<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5]]></title>    <link>https://juejin.cn/post/7603160727717609523</link>    <guid>https://juejin.cn/post/7603160727717609523</guid>    <pubDate>2026-02-05T08:40:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603160727717609523" data-draft-id="7602935146707337262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-05T08:40:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills | æ˜é‡‘ä¸€å‘¨ 2.5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T08:40:11.000Z" title="Thu Feb 05 2026 08:40:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1500+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 4åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770885743&amp;x-signature=pvexyGP3pjpEg0Fli4%2Fh4yfoMXQ%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7599641289887055918" target="_blank" title="https://juejin.cn/post/7599641289887055918">åˆ†äº«å‰ç«¯é¡¹ç›®å¸¸ç”¨çš„ä¸‰ä¸ªSkills--Vueã€React ä¸ UI æ ¸å¿ƒ Skills</a><a href="https://juejin.cn/user/598569647873805/posts" target="_blank" title="https://juejin.cn/user/598569647873805/posts">@å»ä¼ªå­˜çœŸ</a></p>
<blockquote>
<p>æ–‡ç« ä»‹ç»å‰ç«¯é¡¹ç›®å¸¸ç”¨æŠ€èƒ½åŒ…ã€‚Vue-Skills è§£å†³ Vue 3 å¼€å‘ç—›ç‚¹ï¼›React-Skills æ¶µç›–ç»„ä»¶ç»„åˆã€æ€§èƒ½ä¼˜åŒ–ç­‰è§„åˆ™ï¼›UI-Skills æä¾›å¤šå…ƒé£æ ¼ã€é€‚é…å¤šæŠ€æœ¯æ ˆã€‚Skills è®©å¼€å‘è€…è½¬å˜è§’è‰²ï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ä»£ç è´¨é‡ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598921649888968731" target="_blank" title="https://juejin.cn/post/7598921649888968731">ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„ Web æ‰“å°æ–¹æ¡ˆçš„æ¢ç´¢å®è·µ</a><a href="https://juejin.cn/user/3233040624266695/posts" target="_blank" title="https://juejin.cn/user/3233040624266695/posts">@å¤èŒ—å‰ç«¯å›¢é˜Ÿ</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•ä¾›åº”é“¾ç³»ç»Ÿä¸­çš„Webæ‰“å°æ–¹æ¡ˆå±•å¼€ã€‚è°ƒç ”äº†åŸºäºDOMã€å¯è§†åŒ–æ¨¡æ¿ã€æœ¬åœ°æ‰“å°æ§ä»¶ä¸‰ç±»ä¸»æµæ–¹æ¡ˆå¹¶å¯¹æ¯”ã€‚é‡ç‚¹åˆ†æwindow.printï¼Œç»™å‡ºæŒ‡å®šåŒºåŸŸä¸æ‰¹é‡æ‰“å°æ€è·¯ï¼Œä»‹ç»æ ¸å¿ƒCSSæ‰“å°é…ç½®ï¼ŒæŒ‡å‡ºå…¶ä»æ˜¯é«˜æ€§ä»·æ¯”æ–¹æ¡ˆã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599586891084726306" target="_blank" title="https://juejin.cn/post/7599586891084726306">æˆ‘æ¥æ‰‹äº†ä¸€ä¸ª 10 å¹´å‰çš„ jQuery è€é¡¹ç›®ï¼Œç”¨ Web Components ç»™å®ƒç»­äº†å‘½</a><a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts">@ErpanOmer</a></p>
<blockquote>
<p>ä½œè€…æ¥æ‰‹ 2015 å¹´ä¸Šçº¿çš„ jQuery è€ CRM é¡¹ç›®ï¼Œéœ€æ·»åŠ  AI æ™ºèƒ½å®¢æœåŠŸèƒ½ã€‚å› ä¸šåŠ¡æ—¶é—´ç´§ï¼Œé€‰æ‹© Web Componentsï¼Œåˆ©ç”¨å…¶ Shadow DOM è§£å†³ CSS æ±¡æŸ“ã€‚ä»‹ç»ç»„ä»¶å®šä¹‰ä¸ä½¿ç”¨ï¼Œè¯¥æ–¹æ¡ˆä¾µå…¥æ€§é›¶ã€æ¡†æ¶æ— å…³ã€å¯æ¸è¿›è¿ç§»ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600581247020253193" target="_blank" title="https://juejin.cn/post/7600581247020253193">æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨LangChainï¼ˆå‰ç«¯å¼€å‘ç¨‹åºå‘˜ç‰ˆï¼‰</a><a href="https://juejin.cn/user/2788017220891128/posts" target="_blank" title="https://juejin.cn/user/2788017220891128/posts">@å‰ç«¯å°è±†</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯é¢å‘å‰ç«¯å¼€å‘è€…çš„LangChainæ•™ç¨‹ã€‚å…ˆä»‹ç»å‰ç½®å‡†å¤‡ï¼Œæ¥ç€ä»ç¯å¢ƒæ­å»ºã€æ ¸å¿ƒåŠŸèƒ½å®æ“ã€å‰ç«¯é¡¹ç›®é›†æˆå±•å¼€æ•™å­¦ï¼Œè¿˜ç»™å‡ºé¿å‘æŒ‡å—ï¼Œæœ€åæŒ‡æ˜è¿›é˜¶æ–¹å‘ï¼ŒåŠ©å‰ç«¯å¼€å‘è€…ç”¨JS/TSé›†æˆAIèƒ½åŠ›ï¼Œæ‰“é€ æ™ºèƒ½åº”ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7600238071038197769" target="_blank" title="https://juejin.cn/post/7600238071038197769">Clawdbot å®Œæ•´å¯¹æ¥é£ä¹¦æ•™ç¨‹ æ‰‹æŠŠæ‰‹æ­å»ºä½ çš„ä¸“å± AI åŠ©æ‰‹</a><a href="https://juejin.cn/user/993614242266077/posts" target="_blank" title="https://juejin.cn/user/993614242266077/posts">@BingoGo</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbotï¼ˆåŸ Clawdbotï¼‰å¯¹æ¥é£ä¹¦çš„æ•™ç¨‹ã€‚å…ˆä»‹ç»åœ¨ Linux ç³»ç»Ÿå®‰è£…ï¼ŒåŒ…æ‹¬ Gitã€Node.js åŠ Moltbot å®‰è£…æ­¥éª¤ï¼Œè¿˜æåŠæŸ¥çœ‹æœåŠ¡å’Œè®¿é—® Web UI é¢æ¿æ–¹æ³•ã€‚æ¥ç€è¯´æ˜å¯¹æ¥é£ä¹¦æµç¨‹ï¼Œå«æ’ä»¶å®‰è£…ã€å‚æ•°é…ç½®ã€æƒé™è®¾ç½®ç­‰ï¼Œå®Œæˆåå¯ä¸æœºå™¨äººå¯¹è¯ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600994087588053011" target="_blank" title="https://juejin.cn/post/7600994087588053011">Agent Skillså·¥ä½œæµï¼šä»å…¥é—¨åˆ°å®æˆ˜</a><a href="https://juejin.cn/user/694547077666606/posts" target="_blank" title="https://juejin.cn/user/694547077666606/posts">@é›¨ä¸­é£˜è¡çš„è®°å¿†</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Agent Skillså·¥ä½œæµå±•å¼€ï¼Œå…ˆä»‹ç»æ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„è®¾è®¡ï¼Œæ¥ç€é˜è¿°æ ¸å¿ƒç»„ä»¶ã€åŸºç¡€æŠ€èƒ½å®ç°ï¼Œè¿˜æ¶‰åŠäº¤äº’æœºåˆ¶ã€å¤šAgentåä½œã€‚ä»¥æ™ºèƒ½æ•°æ®åˆ†æç³»ç»Ÿä¸ºä¾‹å®æˆ˜ï¼Œç»™å‡ºéƒ¨ç½²ã€æµ‹è¯•ç­–ç•¥ä¸è®¾è®¡åŸåˆ™ï¼Œå±•ç°å…¶ç»“åˆAIä¸ä¼ ç»Ÿå¼€å‘çš„ä¼˜åŠ¿ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599237603976134699" target="_blank" title="https://juejin.cn/post/7599237603976134699">æ€§èƒ½å‘Šè­¦æƒŠå››åº§ ç¥å™¨å‡ºæ‰‹ä¼æ¶é¾™</a><a href="https://juejin.cn/user/2586510420095944/posts" target="_blank" title="https://juejin.cn/user/2586510420095944/posts">@Hello_world_</a></p>
<blockquote>
<p>2025å¹´12æœˆ29æ—¥æœåŠ¡å‡ºç°CPUé˜ˆå€¼å‘Šè­¦ï¼Œä½œè€…ä»ä»£ç ã€æµé‡ã€JVMç»´åº¦æ’æŸ¥ï¼Œæœªæ‰¾åˆ°æ ¹æœ¬åŸå› ã€‚åç”¨ç¥å™¨Arthasåˆ†æï¼Œå‘ç°æ˜¯ä¸šåŠ¡ä»£ç ä¸­åºåˆ—åŒ–/ååºåˆ—åŒ–ä»£ç ä½¿ç”¨ä¸å½“æ‰€è‡´ã€‚ä¿®æ”¹ä»£ç åï¼ŒCPUåˆ©ç”¨ç‡å¤§å¹…é™ä½ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7598737609494855699" target="_blank" title="https://juejin.cn/post/7598737609494855699">è¡€å‹é£™å‡ï¼ŒFlutter &amp; Dart 2025 å¹´åº¦å·¨å‘å›é¡¾</a><a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>æœ¬æ–‡å…ˆæåŠ Google å‘å¸ƒçš„ Flutter &amp; Dart 2025 é«˜å…‰å›é¡¾ï¼Œéšåç€é‡ç›˜ç‚¹è¯¥å¹´ Flutter ç»å…¸å·¨å‘ï¼Œå¦‚å®åŠŸèƒ½æš‚åœã€çº¿ç¨‹åˆå¹¶é—®é¢˜ç­‰ï¼Œå…¶ä¸­è¶…åŠæ•°ä¸º iOS ç›¸å…³é—®é¢˜ï¼Œè™½å®˜æ–¹ç§¯æè§£å†³ï¼Œä½†å¹³å°å‡çº§å‘å¤šã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7600787795478134830" target="_blank" title="https://juejin.cn/post/7600787795478134830">Composeä¸­çš„IntrinsicSizeå®æˆ˜æŒ‡å—</a><a href="https://juejin.cn/user/2788017216685784/posts" target="_blank" title="https://juejin.cn/user/2788017216685784/posts">@ç¨€æœ‰çŒ¿è¯‰</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»•Composeä¸­çš„IntrinsicSizeå±•å¼€ï¼Œä»¥æ„å»ºé‡å å¡ç‰‡å¼UIä¸ºä¾‹ï¼ŒæŒ‡å‡ºweightä¿®é¥°ç¬¦å¯¼è‡´å¸ƒå±€é—®é¢˜çš„åŸå› ï¼Œä»‹ç»äº†IntrinsicSizeæ‰“ç ´å¾ªç¯ä¾èµ–çš„åŸç†ï¼Œåˆ—ä¸¾å¸¸è§ç”¨ä¾‹ï¼Œè¿˜æåŠæ€§èƒ½æ³¨æ„äº‹é¡¹ï¼Œå¼ºè°ƒå…¶å¯¹å¤æ‚UIæ„å»ºçš„é‡è¦æ€§ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7599970244786864191" target="_blank" title="https://juejin.cn/post/7599970244786864191">ä»é›¶å¼€å§‹æ­å»ºéƒ¨ç½² Moltbot/Clawdbot å®Œæ•´æ”»ç•¥</a><a href="https://juejin.cn/user/4388906150921614/posts" target="_blank" title="https://juejin.cn/user/4388906150921614/posts">@å‡ºé—¨ä¸ä¸‹é›¨</a></p>
<blockquote>
<p>æœ¬æ–‡æ˜¯ Moltbot/Clawdbot æ­å»ºéƒ¨ç½²æ”»ç•¥ã€‚ä»‹ç»å…¶ä¸ºæ”¯æŒå¤šæ¨¡å‹ã€å¤šå¹³å°çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼Œé˜è¿°ç³»ç»Ÿè¦æ±‚ï¼Œç»™å‡º Windowsã€Mac å®‰è£…æ­¥éª¤ï¼Œæ¶µç›–é¦–æ¬¡é…ç½®ã€å¸¸ç”¨æŒ‡ä»¤ã€æ—¥å¸¸ç»´æŠ¤ã€æ•…éšœæ’é™¤åŠè¿›é˜¶é…ç½®å†…å®¹ï¼Œè¿˜è§£ç­”å¸¸è§é—®é¢˜ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7599604510366236710" target="_blank" title="https://juejin.cn/post/7599604510366236710">Agent Skills å‚»ç“œå¼æ•™ç¨‹ï¼Œ26 å¹´æœ€ç« AI æŠ€æœ¯å°±è¿™ï¼Ÿ</a><a href="https://juejin.cn/user/2444938365386621/posts" target="_blank" title="https://juejin.cn/user/2444938365386621/posts">@ç¨‹åºå‘˜é±¼çš®</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯ Anthropic æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œå¯è®© AI å­¦ä¹ ä¸“ä¸šæŠ€èƒ½ã€‚ä»‹ç»äº†å…¥é—¨å®æˆ˜ã€å†…éƒ¨åŸç†ã€è·¨å·¥å…·ä½¿ç”¨ã€åˆ›å»ºæ–¹æ³•ï¼Œè¿˜å¯¹æ¯”äº†ä¸ MCPã€æ–œæ å‘½ä»¤åŒºåˆ«ï¼Œå› å…¶å¼€æ”¾å¤ç”¨ä¸”é™ä½é—¨æ§›è€Œå¤§ç«ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7598918127578972194" target="_blank" title="https://juejin.cn/post/7598918127578972194">Agent Skillså®Œå…¨æŒ‡å—ï¼šæ ¸å¿ƒæ¦‚å¿µä¸¨è®¾è®¡æ¨¡å¼ä¸¨å®æˆ˜ä»£ç </a><a href="https://juejin.cn/user/3140624091453053/posts" target="_blank" title="https://juejin.cn/user/3140624091453053/posts">@å¤§æ¨¡å‹çœŸå¥½ç©</a></p>
<blockquote>
<p>æœ¬æ–‡å›´ç»• Agent Skills å±•å¼€ï¼Œå®ƒæ˜¯æ¸è¿›å¼æŠ«éœ²çš„æç¤ºè¯ç®¡ç†æœºåˆ¶ï¼Œèƒ½é™ä½ Token æ¶ˆè€—ã€‚ä»¥ Claude Code ä¸ºä¾‹ï¼Œä»‹ç»å®‰è£…ã€ä½¿ç”¨åŠè¿›é˜¶æ–¹æ³•ã€‚è¿˜å¯¹æ¯”äº†ä¸ MCP çš„åŒºåˆ«ï¼ŒåŠ©å¼€å‘è€…æ„å»ºå¼ºå¤§æ™ºèƒ½ä½“ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°]]></title>    <link>https://juejin.cn/post/7602824293164941327</link>    <guid>https://juejin.cn/post/7602824293164941327</guid>    <pubDate>2026-02-05T00:42:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602824293164941327" data-draft-id="7602634187284660234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-02-05T00:42:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10åˆ†é’Ÿé€Ÿè§ˆAndroidå¼€å‘è€…éœ€è¦å…³æ³¨çš„ Kotlin æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:42:57.000Z" title="Thu Feb 05 2026 00:42:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3799bf045f9147809c80a685fc00e648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=yJ33XXrcEn7wd%2FqsRv23b8lh4Js%3D" alt="2_0.png" loading="lazy"/></p>
<p>Kotlin 2.3.0 å¸¦æ¥äº†ç¨³å®šçš„æ—¶é—´ APIã€æ˜¾å¼å¹•åå­—æ®µã€æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§ä»¥åŠæ›´å®Œå–„çš„å·¥å…·é“¾ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·æµè§ˆé‚£äº›å¯¹äº Android å¼€å‘è€…éœ€è¦å…³æ³¨çš„æ–°ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-0">ç¨³å®šçš„æ—¶é—´ APIï¼šClock ä¸ Instant</h2>
<p><code>kotlin.time.Clock</code> å’Œ <code>kotlin.time.Instant</code> API ç°å·²æ­£å¼ç¨³å®šï¼Œæ— éœ€å†æ·»åŠ  <code>@OptIn</code> æ³¨è§£å³å¯ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.time.*

<span class="hljs-comment">// è·å–å½“å‰æ—¶é—´</span>
<span class="hljs-keyword">val</span> now: Instant = Clock.System.now()

<span class="hljs-comment">// è®¡ç®—æ—¶é—´å·®</span>
<span class="hljs-keyword">val</span> eventTime = Instant.parse(<span class="hljs-string">"2025-12-25T10:00:00Z"</span>)
<span class="hljs-keyword">val</span> timeUntilEvent: Duration = eventTime - now
println(<span class="hljs-string">"è·ç¦»æ´»åŠ¨å¼€å§‹è¿˜æœ‰ï¼š<span class="hljs-subst">${timeUntilEvent.inWholeHours}</span> å°æ—¶"</span>)

<span class="hljs-comment">// é€šè¿‡æ—¶é—´åˆ†é‡åˆ›å»º Instant</span>
<span class="hljs-keyword">val</span> deadline = Instant.fromEpochSeconds(<span class="hljs-number">1735084800</span>)

<span class="hljs-comment">// æ¯”è¾ƒæ—¶é—´</span>
<span class="hljs-keyword">if</span> (now &gt; deadline) {
    println(<span class="hljs-string">"æˆªæ­¢æ—¶é—´å·²è¿‡ï¼"</span>)
}
</code></pre>
<p><strong>Android åœºæ™¯å»ºè®®</strong>ï¼šç”¨å®ƒæ›¿ä»£ <code>System.currentTimeMillis()</code>ï¼Œå®ç°æ›´ç®€æ´ã€ç±»å‹å®‰å…¨çš„æ—¶é—´å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> sessionStart: Instant? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSession</span><span class="hljs-params">()</span></span> {
        sessionStart = Clock.System.now()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSessionDuration</span><span class="hljs-params">()</span></span>: Duration {
        <span class="hljs-keyword">val</span> start = sessionStart ?: <span class="hljs-keyword">return</span> Duration.ZERO
        <span class="hljs-keyword">return</span> Clock.System.now() - start
    }
}
</code></pre>
<h2 data-id="heading-1">æ˜¾å¼å¹•åå­—æ®µï¼ˆå®éªŒæ€§ï¼‰</h2>
<p><em>æˆ‘ç»ˆäºå¯ä»¥æ‘†è„±å‘½åä¸¤ä¸ªå˜é‡çš„å›°å±€äº†ï¼</em></p>
<p>ä½ å¯ä»¥å®šä¹‰ä¸æš´éœ²å±æ€§ç±»å‹ä¸åŒçš„å¹•åå­—æ®µï¼Œæ— éœ€å†å•ç‹¬å£°æ˜ç§æœ‰å±æ€§æ¥å®ç°è¿™ä¸€ç‚¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@OptIn(ExperimentalBackingFields::class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-comment">// å¹•åå­—æ®µæ˜¯å¯å˜åˆ—è¡¨ï¼Œä½†å¯¹å¤–æš´éœ²ä¸ºä¸å¯å˜åˆ—è¡¨</span>
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt;
        field = mutableListOf()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        recentSearches.add(query) <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹å¹•åå­—æ®µ</span>
        <span class="hljs-keyword">if</span> (recentSearches.size &gt; <span class="hljs-number">10</span>) {
            recentSearches.removeAt(<span class="hljs-number">0</span>)
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> prefs = UserPreferences()
prefs.addSearch(<span class="hljs-string">"kotlin 2.3"</span>)
prefs.addSearch(<span class="hljs-string">"coroutines"</span>)
<span class="hljs-comment">// å¤–å¤´æ˜¯æ— æ³•ä½¿ç”¨å¹•åå­—æ®µçš„</span>
<span class="hljs-comment">// prefs.recentSearches.add("flow")</span>
println(prefs.recentSearches) <span class="hljs-comment">// [kotlin 2.3, coroutines]</span>
</code></pre>
<p>Kotlin 2.3 ä¹‹å‰ä½ éœ€è¦è¿™æ ·åšï¼ˆæˆ‘ç¡®å®å¯¹è¿™ä¸ªæ„Ÿåˆ°åŒçƒ¦ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _recentSearches = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">val</span> recentSearches: List&lt;String&gt; <span class="hljs-keyword">get</span>() = _recentSearches.toList()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span> {
        _recentSearches.add(query)
    }
}
</code></pre>
<p>å¦‚æœä½ å¯¹å®ç°æ–¹æ³•æ„Ÿåˆ°å¥½å¥‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16b983eecc6648d9a0d01360945316c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856976&amp;x-signature=wsu2JBYeIkg2kNGEZ6ziwbMKTkA%3D" alt="2_2.jpg" loading="lazy"/></p>
<p>å…¶å®å°±æ˜¯å¢åŠ äº†ä¸€ä¸ª <code>private</code> çš„å­—æ®µç”¨äºç±»çš„å†…éƒ¨ä½¿ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œä½œä¸ºå®éªŒæ€§åŠŸèƒ½ï¼Œä½ éœ€è¦æ·»åŠ é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xexplicit-backing-fields"</span>)
    }
}
</code></pre>
<h2 data-id="heading-2">æœªä½¿ç”¨è¿”å›å€¼æ£€æŸ¥å™¨ï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>å½“ä½ å¿˜è®°ä½¿ç”¨æŸä¸ªæ¥å£çš„è¿”å›å€¼æ—¶ï¼Œè¯¥åŠŸèƒ½å¯ä»¥å¸®ä½ æ•è·è¿™ç±»ä¸æ˜“å¯Ÿè§‰çš„æ½œåœ¨ Bugã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// æœ‰æ½œåœ¨é—®é¢˜çš„ç”¨æ³•</span>
<span class="hljs-meta">@OptIn(ExperimentalUnusedReturnValueChecker::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">badprocess</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> list = mutableListOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment">// è­¦å‘Šï¼š'remove' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.remove(<span class="hljs-number">2</span>) <span class="hljs-comment">// ä½ æ˜¯å¦éœ€è¦æ£€æŸ¥åˆ é™¤æ˜¯å¦æˆåŠŸï¼Ÿ</span>

    <span class="hljs-comment">// è­¦å‘Šï¼š'plus' çš„è¿”å›å€¼æœªè¢«ä½¿ç”¨</span>
    list.plus(<span class="hljs-number">4</span>) <span class="hljs-comment">// Bugï¼æ­¤æ“ä½œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°åˆ—è¡¨</span>

   <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ­£ç¡®ç”¨æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">goodprocess</span><span class="hljs-params">()</span></span> {
    
    <span class="hljs-keyword">val</span> removed = list.remove(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">if</span> (!removed) println(<span class="hljs-string">"å…ƒç´ æœªæ‰¾åˆ°"</span>)

    <span class="hljs-keyword">val</span> newList = list + <span class="hljs-number">4</span> <span class="hljs-comment">// ä½¿ç”¨è¿”å›çš„æ–°åˆ—è¡¨</span>
}
</code></pre>
<p>å½“ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›çš„ä¸æ˜¯ <code>Unit</code> æˆ– <code>Nothing</code> ç±»å‹çš„å€¼ï¼Œä¸”æ²¡æœ‰è¢«ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€ç”¨äºæ¡ä»¶åˆ¤æ–­æˆ–ä»¥å…¶ä»–æ–¹å¼ä½¿ç”¨æ—¶ï¼Œå®ƒå°±ä¼šå‘å‡ºè­¦å‘Šã€‚</p>
<p>è¯¥åŠŸèƒ½ä¼šå¸®åŠ©å¼€å‘è€…æ£€æŸ¥å¯èƒ½å­˜åœ¨çš„ Bugï¼š</p>

























<table><thead><tr><th>è¡¨è¾¾å¼</th><th>Bug</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>list.plus(item)</code></td><td>è¿”å›æ–°åˆ—è¡¨ï¼Œä¸ä¼šä¿®æ”¹åŸåˆ—è¡¨</td><td><code>list = list + item</code> æˆ– <code>list.add(item)</code></td></tr><tr><td><code>string.replace("a", "b")</code></td><td>è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²</td><td><code>val result = string.replace(...)</code></td></tr><tr><td><code>map.minus(key)</code></td><td>è¿”å›æ–°æ˜ å°„ï¼Œä¸ä¼šä¿®æ”¹åŸæ˜ å°„</td><td><code>map = map - key</code></td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xreturn-value-checker=check"</span>)
    }
}
</code></pre>
<h2 data-id="heading-3">å¢å¼ºçš„ UUID æ”¯æŒï¼ˆå®éªŒæ€§ï¼‰</h2>
<p>åŸç”Ÿæ”¯æŒç”Ÿæˆ v4ï¼ˆéšæœºï¼‰å’Œ v7ï¼ˆåŸºäºæ—¶é—´ï¼‰ç±»å‹çš„ <code>UUID</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.uuid.*

<span class="hljs-meta">@OptIn(ExperimentalUuidApi::class)</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateIds</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// éšæœº UUIDï¼ˆv4ï¼‰</span>
    <span class="hljs-keyword">val</span> randomId = Uuid.random()
    println(randomId) <span class="hljs-comment">// ç¤ºä¾‹ï¼š550e8400-e29b-41d4-a716-446655440000</span>

    <span class="hljs-comment">// åŸºäºæ—¶é—´çš„ UUIDï¼ˆv7ï¼‰- å¯æŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
    <span class="hljs-keyword">val</span> timeBasedId = Uuid.randomV7()

    <span class="hljs-comment">// åŸºäºç‰¹å®šæ—¶é—´æˆ³ç”Ÿæˆ v7 UUID</span>
    <span class="hljs-keyword">val</span> instant = Clock.System.now()
    <span class="hljs-keyword">val</span> historicalId = Uuid.randomV7(instant)

    <span class="hljs-comment">// å®‰å…¨è§£æï¼ˆæ— æ•ˆæ—¶è¿”å› null è€ŒéæŠ›å‡ºå¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">val</span> parsed: Uuid? = Uuid.parseOrNull(<span class="hljs-string">"invalid-uuid"</span>)

    <span class="hljs-comment">// æŒ‰æ—¶é—´é¡ºåºæ¯”è¾ƒ v7 UUID</span>
    <span class="hljs-keyword">val</span> id1 = Uuid.randomV7()
    delay(<span class="hljs-number">100</span>)
    <span class="hljs-keyword">val</span> id2 = Uuid.randomV7()
    println(id1 &lt; id2) <span class="hljs-comment">// true - v7 UUID æ”¯æŒæŒ‰æ—¶é—´æ’åº</span>
}
</code></pre>
<p>ä¸‹é¢æä¾›ä¸€ä¸ªé€ŸæŸ¥è¡¨å¸®åŠ©ä½ å¦‚ä½•é€‰æ‹©åˆé€‚çš„ UUID ç‰ˆæœ¬ï¼š</p>

















<table><thead><tr><th>UUID ç‰ˆæœ¬</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>v4 (<code>random()</code>)</td><td>é€šç”¨å”¯ä¸€ IDï¼Œæ— éœ€æ’åºçš„åœºæ™¯</td></tr><tr><td>v7 (<code>randomV7()</code>)</td><td>æ•°æ®åº“ä¸»é”®ï¼ˆå¯æ’åºï¼‰ã€äº‹ä»¶ ID ç­‰éœ€è¦æŒ‰åˆ›å»ºæ—¶é—´æ’åºçš„åœºæ™¯</td></tr></tbody></table>
<p>é¢å¤–çš„ç¼–è¯‘æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-opt-in=kotlin.uuid.ExperimentalUuidApi"</span>)
    }
}
</code></pre>
<h2 data-id="heading-4">è¡¨è¾¾å¼ä½“å‡½æ•°ä¸­æ”¯æŒ return</h2>
<p>åœ¨å…·æœ‰æ˜¾å¼è¿”å›ç±»å‹çš„å•è¡¨è¾¾å¼å‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>return</code> è¯­å¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// userId å¦‚æœä¸ºç©ºï¼Œå‡½æ•°è¿”å› "default"</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDisplayNameOrDefault</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>?)</span></span>: String = getDisplayName(userId ?: <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>)

<span class="hljs-comment">// å¤æ‚æ ¡éªŒåœºæ™¯</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateEmail</span><span class="hljs-params">(email: <span class="hljs-type">String</span>)</span></span>: ValidationResult =
    <span class="hljs-keyword">when</span> {
        email.isBlank() -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Email required"</span>)
        !email.contains(<span class="hljs-string">"@"</span>) -&gt; <span class="hljs-keyword">return</span> ValidationResult.Error(<span class="hljs-string">"Invalid format"</span>)
        <span class="hljs-keyword">else</span> -&gt; ValidationResult.Success
    }
</code></pre>
<h2 data-id="heading-5">åµŒå¥—ç±»å‹åˆ«å</h2>
<p>ç°åœ¨ç±»å‹åˆ«åå¯ä»¥å¼•ç”¨å…¶ä»–ç±»å‹åˆ«åã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åŸºç¡€ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserId = String
<span class="hljs-keyword">typealias</span> ProductId = String

<span class="hljs-comment">// åµŒå¥—ç±»å‹åˆ«å</span>
<span class="hljs-keyword">typealias</span> UserProducts = Map&lt;UserId, List&lt;ProductId&gt;&gt;
<span class="hljs-keyword">typealias</span> UserProductsCallback = (UserProducts) -&gt; <span class="hljs-built_in">Unit</span>

<span class="hljs-comment">// ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductRepository</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserProducts</span><span class="hljs-params">(callback: <span class="hljs-type">UserProductsCallback</span>)</span></span> {
        <span class="hljs-keyword">val</span> products: UserProducts = mapOf(
            <span class="hljs-string">"user_1"</span> to listOf(<span class="hljs-string">"prod_a"</span>, <span class="hljs-string">"prod_b"</span>),
            <span class="hljs-string">"user_2"</span> to listOf(<span class="hljs-string">"prod_c"</span>)
        )
        callback(products)
    }
}
</code></pre>
<h2 data-id="heading-6">æ”¹è¿›çš„ Swift äº’æ“ä½œæ€§</h2>
<p>Kotlin æšä¸¾ç°åœ¨ä¼šå¯¼å‡ºä¸ºåŸç”Ÿ Swift æšä¸¾ï¼Œå¹¶ä¸”å¯å˜å‚æ•°ï¼ˆ<code>vararg</code>ï¼‰å‡½æ•°å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ä»£ç </span>
<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStatus</span> {
    PENDING, COMPLETED, FAILED, REFUNDED
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processPayments</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> payments: <span class="hljs-type">Payment</span>)</span></span>: List&lt;Receipt&gt; {
    <span class="hljs-keyword">return</span> payments.map { process(it) }
}
</code></pre>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Swift ä»£ç  - ç°åœ¨å¯ä»¥è‡ªç„¶è°ƒç”¨</span>
<span class="hljs-keyword">let</span> status: <span class="hljs-type">PaymentStatus</span> <span class="hljs-operator">=</span> .completed
<span class="hljs-keyword">switch</span> status {
    <span class="hljs-keyword">case</span> .pending: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Waiting..."</span>)
    <span class="hljs-keyword">case</span> .completed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Done!"</span>)
    <span class="hljs-keyword">case</span> .failed: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error"</span>)
    <span class="hljs-keyword">case</span> .refunded: <span class="hljs-built_in">print</span>(<span class="hljs-string">"Money back"</span>)
}

<span class="hljs-comment">// å¯å˜å‚æ•°ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> receipts <span class="hljs-operator">=</span> processPayments(payment1, payment2, payment3)
</code></pre>
<h2 data-id="heading-7">Compose ç¼–è¯‘å™¨ï¼šRelease ç‰ˆæœ¬æ”¯æŒæ¸…æ™°å †æ ˆè¿½è¸ª</h2>
<p>å€ŸåŠ©åæ··æ·†çš„å †æ ˆä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°ƒè¯• Compose çš„å´©æºƒé—®é¢˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts</span>
composeCompiler {
    <span class="hljs-comment">// å¯ç”¨ç»„é”®æ ¼å¼çš„å †æ ˆè¿½è¸ªï¼ˆ2.3 ç‰ˆæœ¬é»˜è®¤å¼€å¯ï¼‰</span>
    includeSourceInformation = <span class="hljs-literal">true</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–å‰</strong>ï¼šRelease åŒ…ä¸­çš„å´©æºƒæ—¥å¿—æ˜¯æ··æ·†åçš„ï¼Œéš¾ä»¥å®šä½é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–å</strong>ï¼šç”Ÿæˆæ¸…æ™°çš„ Compose ç»„é”®ï¼Œå¯é€šè¿‡ R8 æ˜ å°„æ–‡ä»¶å…³è”åˆ°ä½ çš„æºä»£ç ï¼Œå¤§å¹…æå‡è°ƒè¯•æ•ˆç‡ã€‚</p>
<h2 data-id="heading-8">Gradle ä¸ AGP æ›´æ–°</h2>
<p><em>æˆ‘ç°åœ¨çœ‹åˆ° AGP çš„æ›´æ–°ï¼Œåªæƒ³å–Šç”°æ–‡é•œï¼</em></p>
<p>ç‰ˆæœ¬è¦æ±‚ï¼š</p>

























<table><thead><tr><th>å·¥å…·</th><th>æœ€ä½ç‰ˆæœ¬</th><th>æœ€é«˜ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Gradle</td><td>7.6.3</td><td>9.0.0</td></tr><tr><td>AGPï¼ˆAndroid Gradle æ’ä»¶ï¼‰</td><td>8.2.2</td><td>8.13.0</td></tr><tr><td>Java</td><td>8</td><td>25</td></tr></tbody></table>
<p>AGP 9.0+ çš„ä¸€ä¸ªé‡è¦å˜æ›´ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ—§å†™æ³• - åœ¨ AGP 9.0+ ä¸­ä¸å†ç”Ÿæ•ˆ</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"kotlin-android"</span>) <span class="hljs-comment">// éœ€è¦ç§»é™¤è¿™ä¸€è¡Œï¼</span>
}

<span class="hljs-comment">// æ–°å†™æ³• - kotlin-android å·²å†…ç½®åˆ° AGP 9.0+</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    <span class="hljs-comment">// Kotlin æ”¯æŒå·²è‡ªåŠ¨å¯ç”¨</span>
}
</code></pre>
<h2 data-id="heading-9">æ•°æ®æµçš„ç©·ä¸¾ when è¡¨è¾¾å¼</h2>
<p>æ›´æ™ºèƒ½çš„ç©·ä¸¾æ£€æŸ¥ï¼Œèƒ½å¤Ÿç†è§£ä½ çš„ä»£ç æ‰§è¡Œæµç¨‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> message: String) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Loading : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleResult</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    <span class="hljs-comment">// ç¼–è¯‘å™¨èƒ½è¯†åˆ«æ‰€æœ‰åˆ†æ”¯å·²è¢«è¦†ç›–</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; println(result.<span class="hljs-keyword">data</span>)
        <span class="hljs-keyword">is</span> Result.Error -&gt; println(result.message)
        Result.Loading -&gt; println(<span class="hljs-string">"Loading..."</span>)
        <span class="hljs-comment">// æ— éœ€å†™ 'else' åˆ†æ”¯ â€” ç¼–è¯‘å™¨ä¼šéªŒè¯ç©·ä¸¾æ€§</span>
    }
}

<span class="hljs-comment">// å…·å¤‡æ•°æ®æµæ„ŸçŸ¥èƒ½åŠ›</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">process</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;?)</span></span> {
    <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>

    <span class="hljs-comment">// ç¼–è¯‘å™¨çŸ¥é“æ­¤å¤„ result ä¸ä¸º null</span>
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; {}
        <span class="hljs-keyword">is</span> Result.Error -&gt; {}
        Result.Loading -&gt; {}
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPermissionLevel</span><span class="hljs-params">(role: <span class="hljs-type">UserRole</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-comment">// è¦†ç›–äº† when è¡¨è¾¾å¼ä¹‹å¤–çš„ Admin åœºæ™¯</span>
    <span class="hljs-keyword">if</span> (role == UserRole.ADMIN) <span class="hljs-keyword">return</span> <span class="hljs-number">99</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (role) {
        UserRole.MEMBER -&gt; <span class="hljs-number">10</span>
        UserRole.GUEST -&gt; <span class="hljs-number">1</span>
        <span class="hljs-comment">// ä½ ä¸å†éœ€è¦ç¼–å†™è¿™ä¸ª else åˆ†æ”¯äº† </span>
        <span class="hljs-comment">// else -&gt; throw IllegalStateException()</span>
    }
}
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>Kotlin 2.3.0 ä¸»è¦è‡´åŠ›äºç¨³å®šå®éªŒæ€§ç‰¹æ€§ï¼Œå¹¶æ”¹è¿›å¤šå¹³å°äº’æ“ä½œæ€§ã€‚</p>
<p>å…¶ä¸­ï¼Œç¨³å®šçš„æ—¶é—´ API å’Œæ˜¾å¼å¹•åå­—æ®µæ˜¯å¯¹ Android å¼€å‘è€…è€Œè¨€æœ€äº®çœ¼çš„æ›´æ–°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7603347438012514339</link>    <guid>https://juejin.cn/post/7603347438012514339</guid>    <pubDate>2026-02-06T06:17:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603347438012514339" data-draft-id="7603355275256938536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-06T06:17:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:17:16.000Z" title="Fri Feb 06 2026 06:17:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Agentæ ¸å¿ƒèƒ½åŠ›è½½ä½“ï¼šSkillsæŠ€èƒ½æ¨¡å—ä»åŸºç¡€åˆ°å®æˆ˜å…¨æŒ‡å—</h2>
<p>åœ¨AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä»â€œæ¦‚å¿µè½åœ°â€åˆ°â€œè§„æ¨¡åŒ–åº”ç”¨â€çš„è¿‡ç¨‹ä¸­ï¼ŒSkillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰é€æ¸æˆä¸ºå†³å®šAgentèƒ½åŠ›è¾¹ç•Œä¸ä½“éªŒä¸Šé™çš„æ ¸å¿ƒè½½ä½“ã€‚å½“MCPå› ä¸Šä¸‹æ–‡å†—ä½™ã€æ€§èƒ½æŸè€—ç­‰é—®é¢˜é€æ¸é€€å±…å°ä¼—åœºæ™¯ï¼ŒSkillsä»¥â€œè½»é‡ã€é«˜æ•ˆã€å¯å¤ç”¨â€çš„ä¼˜åŠ¿ï¼Œæˆä¸ºAnthropicã€OpenAIç­‰å¤§å‚ä¸»æ¨çš„AgentæŠ€èƒ½æ‰©å±•æ–¹æ¡ˆï¼Œä¹Ÿæˆä¸ºå¼€å‘è€…è½åœ°æ™ºèƒ½ä½“é¡¹ç›®çš„é¦–é€‰ã€‚</p>
<p>ä»€ä¹ˆæ˜¯Skillsï¼Ÿå®ƒä¸ä¼ ç»Ÿå·¥å…·è°ƒç”¨æœ‰ä½•åŒºåˆ«ï¼Ÿå¦‚ä½•è®¾è®¡é«˜è´¨é‡çš„Skillsï¼Ÿæ€æ ·å¿«é€Ÿå®ç°Agentä¸Skillsçš„é›†æˆè½åœ°ï¼Ÿæœ¬æ–‡å°†å½»åº•æ‹†è§£Skillsçš„æ ¸å¿ƒé€»è¾‘ï¼Œæ­é…å¯ç›´æ¥å¤ç”¨çš„Javaå®æˆ˜ä»£ç ã€è®¾è®¡è§„èŒƒä¸é¿å‘æŒ‡å—ï¼ŒåŠ©åŠ›å¼€å‘è€…å¿«é€ŸæŒæ¡Skillså¼€å‘æŠ€å·§ï¼Œè®©AgentçœŸæ­£å…·å¤‡â€œè§£å†³å®é™…é—®é¢˜â€çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒè®¤çŸ¥ï¼šè¯»æ‡‚Skillsï¼Œå…ˆåˆ†æ¸…3ä¸ªå…³é”®é—®é¢˜</h3>
<p>å¾ˆå¤šå¼€å‘è€…å®¹æ˜“å°†Skillsä¸â€œå·¥å…·APIâ€â€œMCP Serverâ€æ··æ·†ï¼Œå®åˆ™Skillsæ˜¯æ›´è´´è¿‘Agentã€æ›´è½»é‡åŒ–çš„æŠ€èƒ½å•å…ƒï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºâ€œè®©Agentå…·å¤‡å¯å¤ç”¨ã€å¯æ‰©å±•çš„å…·ä½“èƒ½åŠ›â€ã€‚æˆ‘ä»¬å…ˆä»3ä¸ªæ ¸å¿ƒé—®é¢˜å…¥æ‰‹ï¼Œç†æ¸…Skillsçš„æœ¬è´¨ã€‚</p>
<h4 data-id="heading-2">1. ä»€ä¹ˆæ˜¯Skillsï¼Ÿâ€”â€”Agentçš„â€œå¯æ’æ‹”æŠ€èƒ½æ’ä»¶â€</h4>
<p>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰æ˜¯ä¸ºAI Agentè®¾è®¡çš„ã€èšç„¦å•ä¸€åŠŸèƒ½çš„æ¨¡å—åŒ–ç»„ä»¶ï¼Œæœ¬è´¨æ˜¯â€œå°†å…·ä½“ä¸šåŠ¡é€»è¾‘å°è£…æˆAgentå¯ç›´æ¥è°ƒç”¨çš„æ¥å£â€ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨æœåŠ¡åè®®é€‚é…ï¼Œå¯å¿«é€Ÿé›†æˆåˆ°å„ç±»Agentä¸­ï¼Œå®ç°èƒ½åŠ›æ‰©å±•ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒSkillså°±åƒAgentçš„â€œæ‰‹æœºAPPâ€ï¼šAgentæœ¬èº«æ˜¯â€œæ‰‹æœºç¡¬ä»¶â€ï¼ˆå…·å¤‡å†³ç­–ã€äº¤äº’èƒ½åŠ›ï¼‰ï¼Œæ¯ä¸ªSkillæ˜¯ä¸€ä¸ªâ€œAPPâ€ï¼ˆèšç„¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå¦‚â€œæ‹ç…§â€â€œå¯¼èˆªâ€ï¼‰ï¼ŒAgentå¯æ ¹æ®éœ€æ±‚â€œå®‰è£…â€ï¼ˆåŠ è½½ï¼‰æˆ–â€œå¸è½½â€ï¼ˆç§»é™¤ï¼‰Skillsï¼Œæ— éœ€ä¿®æ”¹è‡ªèº«æ ¸å¿ƒé€»è¾‘ï¼Œå°±èƒ½å¿«é€Ÿè·å¾—å¯¹åº”èƒ½åŠ›ã€‚</p>
<p>æ ¸å¿ƒå®šä½ï¼š<strong>Agentçš„èƒ½åŠ›æ‰©å±•å•å…ƒï¼Œè¿æ¥Agentå†³ç­–ä¸å®é™…ä¸šåŠ¡é€»è¾‘çš„æ¡¥æ¢</strong>ã€‚</p>
<h4 data-id="heading-3">2. Skills vs MCP vs æ™®é€šAPIï¼šæ ¸å¿ƒåŒºåˆ«åœ¨å“ªï¼Ÿ</h4>
<p>å¼€å‘è€…æœ€æ˜“æ··æ·†çš„å°±æ˜¯Skillsä¸MCPã€æ™®é€šAPIï¼Œä¸‰è€…çœ‹ä¼¼éƒ½æ˜¯â€œå®ç°åŠŸèƒ½è°ƒç”¨â€ï¼Œä½†å®šä½ã€è®¾è®¡é€»è¾‘å’Œä½¿ç”¨åœºæ™¯æˆªç„¶ä¸åŒï¼Œä¸€å¼ è¡¨æ ¼å½»åº•åŒºåˆ†ï¼š</p>









































<table><thead><tr><th>æ ¸å¿ƒç»´åº¦</th><th>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰</th><th>MCPï¼ˆå·¥å…·åè®®ï¼‰</th><th>æ™®é€šAPI</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå®šä½</td><td>Agentä¸“å±çš„è½»é‡æŠ€èƒ½ç»„ä»¶</td><td>è·¨Agentçš„å·¥å…·å…±äº«åè®®</td><td>é€šç”¨çš„æœåŠ¡è°ƒç”¨æ¥å£</td></tr><tr><td>ä¾èµ–å…³ç³»</td><td>ä¸Agentæ·±åº¦é›†æˆï¼Œæ— å¤–éƒ¨ä¾èµ–</td><td>ä¾èµ–å¤–éƒ¨MCP Serverï¼Œéœ€åè®®é€‚é…</td><td>ä¾èµ–APIæœåŠ¡ï¼Œéœ€å•ç‹¬é€‚é…è°ƒç”¨</td></tr><tr><td>è°ƒç”¨æˆæœ¬</td><td>æä½ï¼Œç›´æ¥è°ƒç”¨ï¼Œä¸å ç”¨è¿‡å¤šä¸Šä¸‹æ–‡</td><td>è¾ƒé«˜ï¼Œéœ€æºå¸¦åè®®ä¿¡æ¯ï¼Œå ç”¨ä¸Šä¸‹æ–‡</td><td>ä¸­ç­‰ï¼Œéœ€å¤„ç†è¯·æ±‚/å“åº”æ ¼å¼ï¼Œé€‚é…æˆæœ¬é«˜</td></tr><tr><td>å¤ç”¨æ€§</td><td>é«˜ï¼Œå¯åœ¨åŒç±»Agentä¸­ç›´æ¥å¤ç”¨ï¼Œæ”¯æŒç»„åˆ</td><td>é«˜ï¼Œå¤šAgentå¯å…±äº«åŒä¸€MCP Server</td><td>ä½ï¼Œéœ€ä¸ºä¸åŒAgentå•ç‹¬ç¼–å†™é€‚é…ä»£ç </td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•ä¸€Agentçš„å…·ä½“åŠŸèƒ½å®ç°ï¼ˆå¦‚ç”Ÿæˆæ–‡æ¡£ã€æ•°æ®åˆ†æï¼‰</td><td>å¤šAgentå…±äº«åŒä¸€å·¥å…·ï¼ˆå¦‚å¤šAIå…±ç”¨ä¼ä¸šå†…éƒ¨å·¥å…·ï¼‰</td><td>éAgentåœºæ™¯çš„æœåŠ¡è°ƒç”¨ï¼Œæˆ–ç®€å•å·¥å…·æ¥å…¥</td></tr></tbody></table>
<p>å…³é”®ç»“è®ºï¼šSkillsä¸æ˜¯â€œæ›¿ä»£â€MCPå’ŒAPIï¼Œè€Œæ˜¯â€œä¼˜åŒ–â€Agentçš„èƒ½åŠ›è°ƒç”¨æ–¹å¼â€”â€”å¯¹äºAgentå¼€å‘ï¼Œä¼˜å…ˆç”¨Skillså°è£…æ ¸å¿ƒåŠŸèƒ½ï¼Œéœ€å¤šAgentå…±äº«æ—¶æ­é…MCPï¼Œç®€å•å¤–éƒ¨æœåŠ¡è°ƒç”¨å¯é€‚é…æ™®é€šAPIã€‚</p>
<h4 data-id="heading-4">3. Skillsçš„æ ¸å¿ƒç‰¹å¾ï¼šä¸ºä»€ä¹ˆèƒ½æˆä¸ºAgentçš„é¦–é€‰ï¼Ÿ</h4>
<p>Skillsä¹‹æ‰€ä»¥èƒ½å¿«é€Ÿå–ä»£MCPæˆä¸ºAgentæŠ€èƒ½æ‰©å±•çš„ä¸»æµæ–¹æ¡ˆï¼Œæ ¸å¿ƒåœ¨äºå…¶è´´åˆAgentå¼€å‘éœ€æ±‚çš„5å¤§ç‰¹å¾ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è®¾è®¡Skillsçš„æ ¸å¿ƒå‡†åˆ™ï¼š</p>
<ul>
<li><strong>è½»é‡æ— ä¾èµ–</strong>ï¼šæ— éœ€æ­å»ºå¤–éƒ¨Serverï¼Œæ— éœ€éµå¾ªå¤æ‚åè®®ï¼Œå°è£…åå¯ç›´æ¥åµŒå…¥Agentï¼Œè°ƒç”¨æ—¶ä¸å ç”¨å¤§é‡ä¸Šä¸‹æ–‡tokenï¼Œé¿å…æ¨¡å‹æ³¨æ„åŠ›ç¨€é‡Šã€‚</li>
<li><strong>å•ä¸€èŒè´£èšç„¦</strong>ï¼šæ¯ä¸ªSkillä»…å®ç°ä¸€ä¸ªå…·ä½“åŠŸèƒ½ï¼ˆå¦‚â€œExcelè¯»å–â€â€œæ–‡æœ¬ç¿»è¯‘â€â€œæ—¥æœŸè®¡ç®—â€ï¼‰ï¼Œä¸è¿½æ±‚â€œå¤§è€Œå…¨â€ï¼Œç¡®ä¿ä»£ç ç®€æ´ã€å¯ç»´æŠ¤ã€æ— å†—ä½™ã€‚</li>
<li><strong>é«˜å¯å¤ç”¨æ€§</strong>ï¼šéµå¾ªç»Ÿä¸€è§„èŒƒè®¾è®¡çš„Skillsï¼Œå¯åœ¨ä¸åŒAgentä¸­ç›´æ¥å¤ç”¨ï¼ˆå¦‚â€œæ–‡æœ¬ç”ŸæˆSkillâ€å¯åŒæ—¶ç”¨äºå®¢æœAgentã€åŠå…¬Agentï¼‰ï¼Œå¤§å¹…é™ä½é‡å¤å¼€å‘æˆæœ¬ã€‚</li>
<li><strong>å¯ç»„åˆæ‰©å±•</strong>ï¼šå¤šä¸ªSkillså¯ç»„åˆæˆå¤æ‚åŠŸèƒ½ï¼ˆå¦‚â€œæ•°æ®è¯»å–Skill + æ•°æ®ç»Ÿè®¡Skill + æŠ¥å‘Šç”ŸæˆSkillâ€ï¼Œå®ç°è‡ªåŠ¨åŒ–æ•°æ®åˆ†ææŠ¥å‘Šï¼‰ï¼Œçµæ´»é€‚é…å¤æ‚ä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šä¸Agentæ·±åº¦é›†æˆï¼Œå¯ç²¾ç»†åŒ–ç®¡æ§æƒé™ï¼ˆå¦‚â€œæ–‡ä»¶æ“ä½œSkillâ€ä»…å¼€æ”¾è¯»å–æƒé™ï¼‰ï¼Œé¿å…MCPåè®®ç²—æ”¾æƒé™å¸¦æ¥çš„å®‰å…¨é£é™©ã€‚</li>
</ul>
<h3 data-id="heading-5">äºŒã€Skillsè®¾è®¡è§„èŒƒï¼šæ‰“é€ é«˜è´¨é‡å¯å¤ç”¨æŠ€èƒ½æ¨¡å—</h3>
<p>é«˜è´¨é‡çš„Skillsä¸ä»…èƒ½æå‡Agentçš„æ‰§è¡Œæ•ˆç‡ï¼Œè¿˜èƒ½é™ä½ç»´æŠ¤æˆæœ¬ï¼›åä¹‹ï¼Œè®¾è®¡æ··ä¹±ã€å†—ä½™çš„Skillsä¼šå¯¼è‡´Agentè°ƒç”¨æ··ä¹±ã€æ€§èƒ½ä¸‹é™ã€‚ä»¥ä¸‹æ˜¯å¼€å‘è€…å¿…é¡»éµå¾ªçš„è®¾è®¡è§„èŒƒï¼Œé™„å…·ä½“ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-6">1. å‘½åè§„èŒƒï¼šè¯­ä¹‰æ¸…æ™°ï¼Œä¸€çœ¼è¯†åˆ«åŠŸèƒ½</h4>
<p>Skillsçš„å‘½åéœ€éµå¾ªâ€œåŠŸèƒ½ç±»å‹+å…·ä½“æ“ä½œâ€çš„æ ¼å¼ï¼Œé¿å…æ¨¡ç³ŠåŒ–ã€ç¼©å†™åŒ–ï¼Œç¡®ä¿å¼€å‘è€…å’ŒAgentèƒ½å¿«é€Ÿè¯†åˆ«å…¶åŠŸèƒ½ï¼Œå»ºè®®é‡‡ç”¨â€œå°å†™å­—æ¯+å†’å·åˆ†éš”â€çš„å‰ç¼€åˆ†ç±»æ³•ã€‚</p>
<ul>
<li>æ¨èå‘½åï¼šexcel:readï¼ˆExcelè¯»å–ï¼‰ã€text:translateï¼ˆæ–‡æœ¬ç¿»è¯‘ï¼‰ã€ppt:generateï¼ˆPPTç”Ÿæˆï¼‰ã€data:statisticï¼ˆæ•°æ®ç»Ÿè®¡ï¼‰ï¼›</li>
<li>ç¦æ­¢å‘½åï¼šSkill1ã€MySkillã€ExcelSkillï¼ˆæ¨¡ç³Šä¸æ¸…ï¼Œæ— æ³•å¿«é€Ÿè¯†åˆ«å…·ä½“åŠŸèƒ½ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">2. æ¥å£è§„èŒƒï¼šç»Ÿä¸€æ ‡å‡†ï¼Œç¡®ä¿å¯å¤ç”¨</h4>
<p>æ‰€æœ‰Skillséœ€å®ç°ç»Ÿä¸€çš„æ¥å£ï¼Œå®šä¹‰å›ºå®šçš„è°ƒç”¨æ–¹æ³•å’Œå‚æ•°æ ¼å¼ï¼Œé¿å…å› æ¥å£ä¸ä¸€è‡´å¯¼è‡´çš„å¤ç”¨å›°éš¾ã€‚ä»¥Javaè¯­è¨€ä¸ºä¾‹ï¼Œå®šä¹‰é€šç”¨Skillæ¥å£ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">
<span class="hljs-comment">// é€šç”¨Skillæ¥å£ï¼šæ‰€æœ‰Skillå¿…é¡»å®ç°è¯¥æ¥å£ï¼Œç¡®ä¿è°ƒç”¨è§„èŒƒç»Ÿä¸€</span>
<span class="hljs-keyword">public</span> interface Skill {
    <span class="hljs-comment">// 1. è·å–æŠ€èƒ½å”¯ä¸€æ ‡è¯†ï¼ˆéµå¾ªå‘½åè§„èŒƒï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getSkillId</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 2. è·å–æŠ€èƒ½æè¿°ï¼ˆç”¨äºAgentå†³ç­–æ—¶å‚è€ƒï¼Œå¦‚â€œç”¨äºè¯»å–Excelæ–‡ä»¶ï¼Œè¿”å›æ•°æ®åˆ—è¡¨â€ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getDescription</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 3. æ‰§è¡ŒæŠ€èƒ½æ ¸å¿ƒé€»è¾‘</span>
    <span class="hljs-comment">// paramsï¼šè¾“å…¥å‚æ•°ï¼ˆç»Ÿä¸€ç”¨Mapå°è£…ï¼Œé€‚é…ä¸åŒSkillçš„å‚æ•°å·®å¼‚ï¼‰</span>
    <span class="hljs-comment">// returnï¼šæ‰§è¡Œç»“æœï¼ˆç»Ÿä¸€è¿”å›Stringï¼Œå¤æ‚ç»“æœå¯åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">execute</span><span class="hljs-params">(Map&lt;<span class="hljs-type">String</span>, Object&gt; params)</span></span>;
    
    <span class="hljs-comment">// 4. è·å–å‚æ•°è¯´æ˜ï¼ˆç”¨äºæ ¡éªŒè¾“å…¥å‚æ•°ï¼Œé¿å…è°ƒç”¨å¤±è´¥ï¼‰</span>
    <span class="hljs-function">Map&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; <span class="hljs-title">getParamDesc</span><span class="hljs-params">()</span></span>;
}
    
</code></pre>
<h4 data-id="heading-8">3. å‚æ•°è§„èŒƒï¼šç®€æ´å¿…è¦ï¼Œæœ‰æ ¡éªŒæœ‰é»˜è®¤</h4>
<p>å‚æ•°è®¾è®¡éµå¾ªâ€œæœ€å°å¿…è¦åŸåˆ™â€ï¼Œé¿å…å†—ä½™å‚æ•°ï¼›åŒæ—¶éœ€æ·»åŠ å‚æ•°æ ¡éªŒå’Œé»˜è®¤å€¼ï¼Œç¡®ä¿Agentè°ƒç”¨æ—¶ä¸ä¼šå› å‚æ•°ç¼ºå¤±ã€æ ¼å¼é”™è¯¯å¯¼è‡´å¤±è´¥ã€‚</p>
<ul>
<li>å‚æ•°å°è£…ï¼šç»Ÿä¸€ç”¨Map&lt;String, Object&gt;å°è£…è¾“å…¥å‚æ•°ï¼Œkeyä¸ºå‚æ•°åï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰ï¼Œvalueä¸ºå‚æ•°å€¼ï¼›</li>
<li>å‚æ•°æ ¡éªŒï¼šåœ¨executeæ–¹æ³•å¼€å¤´æ ¡éªŒå‚æ•°çš„å­˜åœ¨æ€§ã€æ ¼å¼æ­£ç¡®æ€§ï¼Œå¼‚å¸¸æ—¶è¿”å›æ˜ç¡®çš„é”™è¯¯æç¤ºï¼›</li>
<li>é»˜è®¤å€¼è®¾ç½®ï¼šéå¿…å¡«å‚æ•°éœ€è®¾ç½®åˆç†é»˜è®¤å€¼ï¼Œå‡å°‘Agentè°ƒç”¨æ—¶çš„å‚æ•°ä¼ é€’æˆæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-9">4. å¼‚å¸¸è§„èŒƒï¼šæ•è·å…¨é¢ï¼Œæç¤ºæ¸…æ™°</h4>
<p>Skillsæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°å„ç±»å¼‚å¸¸ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€å‚æ•°æ ¼å¼é”™è¯¯ã€ç½‘ç»œå¼‚å¸¸ï¼‰ï¼Œéœ€å…¨é¢æ•è·å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºï¼Œä¾¿äºAgentåˆ¤æ–­æ˜¯å¦é‡è¯•ã€å¦‚ä½•è°ƒæ•´ç­–ç•¥ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸å¯¼è‡´Agentå´©æºƒã€‚</p>
<h4 data-id="heading-10">5. ç¤ºä¾‹ï¼šç¬¦åˆè§„èŒƒçš„Skillså®ç°ï¼ˆæ–‡æœ¬ç¿»è¯‘Skillï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">HashMap</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Map</span>;

<span class="hljs-comment">// æ–‡æœ¬ç¿»è¯‘Skillï¼šç¬¦åˆæ‰€æœ‰è®¾è®¡è§„èŒƒï¼Œå¯ç›´æ¥å¤ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TextTranslateSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {

    <span class="hljs-comment">// æŠ€èƒ½å”¯ä¸€æ ‡è¯†ï¼ˆéµå¾ªå‘½åè§„èŒƒï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"text:translate"</span>;
    }

    <span class="hljs-comment">// æŠ€èƒ½æè¿°ï¼ˆæ¸…æ™°è¯´æ˜åŠŸèƒ½ã€é€‚ç”¨åœºæ™¯ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºæ–‡æœ¬ç¿»è¯‘ï¼Œæ”¯æŒä¸­æ–‡ä¸è‹±æ–‡äº’è¯‘ï¼Œè¾“å…¥æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼Œè¿”å›ç¿»è¯‘ç»“æœ"</span>;
    }

    <span class="hljs-comment">// å‚æ•°è¯´æ˜ï¼ˆæ˜ç¡®å‚æ•°åã€ç±»å‹ã€æ˜¯å¦å¿…å¡«ã€è¯´æ˜ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"text"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼Œéœ€è¦ç¿»è¯‘çš„æ–‡æœ¬"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"targetLang"</span>, <span class="hljs-string">"éå¿…å¡«ï¼ŒStringç±»å‹ï¼Œç›®æ ‡è¯­è¨€ï¼ˆzh=ä¸­æ–‡ï¼Œen=è‹±æ–‡ï¼‰ï¼Œé»˜è®¤en"</span>);
        <span class="hljs-keyword">return</span> paramDesc;
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ‰§è¡Œé€»è¾‘ï¼ˆå«å‚æ•°æ ¡éªŒã€å¼‚å¸¸æ•è·ï¼‰</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (!params.<span class="hljs-title function_">containsKey</span>(<span class="hljs-string">"text"</span>) || params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text"</span>) == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç¼ºå°‘å¿…å¡«å‚æ•°ã€Œtextã€ï¼ˆéœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼‰"</span>;
            }
            <span class="hljs-title class_">String</span> text = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text"</span>).<span class="hljs-title function_">toString</span>();
            <span class="hljs-title class_">String</span> targetLang = params.<span class="hljs-title function_">getOrDefault</span>(<span class="hljs-string">"targetLang"</span>, <span class="hljs-string">"en"</span>).<span class="hljs-title function_">toString</span>();

            <span class="hljs-comment">// 2. æ ¡éªŒç›®æ ‡è¯­è¨€æ ¼å¼</span>
            <span class="hljs-keyword">if</span> (!<span class="hljs-string">"zh"</span>.<span class="hljs-title function_">equals</span>(targetLang) &amp;&amp; !<span class="hljs-string">"en"</span>.<span class="hljs-title function_">equals</span>(targetLang)) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç›®æ ‡è¯­è¨€ã€ŒtargetLangã€ä»…æ”¯æŒzhï¼ˆä¸­æ–‡ï¼‰å’Œenï¼ˆè‹±æ–‡ï¼‰"</span>;
            }

            <span class="hljs-comment">// 3. æ ¸å¿ƒç¿»è¯‘é€»è¾‘ï¼ˆæ¨¡æ‹Ÿï¼Œå®é™…å¯è°ƒç”¨ç™¾åº¦ç¿»è¯‘ã€è°·æ­Œç¿»è¯‘APIï¼‰</span>
            <span class="hljs-title class_">String</span> result = <span class="hljs-title function_">translate</span>(text, targetLang);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¿»è¯‘æˆåŠŸï¼š"</span> + result;

        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-comment">// æ•è·å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°æç¤º</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ€èƒ½æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡æœ¬ç¿»è¯‘é€»è¾‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">translate</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> text, <span class="hljs-built_in">String</span> targetLang</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"en"</span>.<span class="hljs-title function_">equals</span>(targetLang)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Translated: "</span> + text; <span class="hljs-comment">// æ¨¡æ‹Ÿè‹±è¯‘ä¸­ï¼ˆæ­¤å¤„ç®€åŒ–ï¼Œå®é™…éœ€è°ƒç”¨çœŸå®ç¿»è¯‘é€»è¾‘ï¼‰</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¿»è¯‘ï¼š"</span> + text; <span class="hljs-comment">// æ¨¡æ‹Ÿä¸­è¯‘è‹±</span>
        }
    }
}
    
</code></pre>
<h3 data-id="heading-11">ä¸‰ã€å®æˆ˜è½åœ°ï¼šAgent + Skills å®Œæ•´å¼€å‘ç¤ºä¾‹ï¼ˆå¯ç›´æ¥å¤ç”¨ï¼‰</h3>
<p>ç»“åˆå‰æ–‡çš„è®¾è®¡è§„èŒƒï¼Œæˆ‘ä»¬ä»¥â€œå¤šåŠŸèƒ½åŠå…¬Agentâ€ä¸ºä¾‹ï¼Œå®ç°3ä¸ªå¸¸ç”¨Skillsï¼ˆæ–‡æœ¬ç¿»è¯‘ã€Excelè¯»å–ã€PPTç”Ÿæˆï¼‰ï¼Œæ¼”ç¤ºAgentå¦‚ä½•åŠ è½½ã€å†³ç­–ã€è°ƒç”¨Skillsï¼Œå®Œæˆç”¨æˆ·éœ€æ±‚ï¼Œå…¨ç¨‹åŸºäºJavaè¯­è¨€ï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-12">å®æˆ˜éœ€æ±‚</h4>
<p>å¼€å‘ä¸€ä¸ªåŠå…¬Agentï¼Œå…·å¤‡ä»¥ä¸‹3ä¸ªåŠŸèƒ½ï¼š1. æ–‡æœ¬ç¿»è¯‘ï¼ˆä¸­è¯‘è‹±/è‹±è¯‘ä¸­ï¼‰ï¼›2. è¯»å–Excelæ–‡ä»¶æ•°æ®ï¼›3. ç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼ŒAgentå¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œè‡ªä¸»è¯†åˆ«éœ€è¦è°ƒç”¨çš„Skillï¼Œæ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚</p>
<h4 data-id="heading-13">1. å®ç°3ä¸ªæ ¸å¿ƒSkillsï¼ˆéµå¾ªè§„èŒƒï¼‰</h4>
<p>é™¤äº†å‰æ–‡çš„æ–‡æœ¬ç¿»è¯‘Skillï¼Œå†å®ç°Excelè¯»å–Skillå’ŒPPTç”ŸæˆSkillï¼Œå‡éµå¾ªç»Ÿä¸€æ¥å£è§„èŒƒã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// Excelè¯»å–Skill</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExcelReadSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"excel:read"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºè¯»å–Excelæ–‡ä»¶æ•°æ®ï¼Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¿”å›æ–‡ä»¶ä¸­çš„æ•°æ®æ¡æ•°å’Œå‰3æ¡æ•°æ®é¢„è§ˆ"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"filePath"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼ŒExcelæ–‡ä»¶çš„ç»å¯¹è·¯å¾„"</span>);
        <span class="hljs-keyword">return</span> paramDesc;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (!params.<span class="hljs-title function_">containsKey</span>(<span class="hljs-string">"filePath"</span>) || params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"filePath"</span>) == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼šç¼ºå°‘å¿…å¡«å‚æ•°ã€ŒfilePathã€ï¼ˆExcelæ–‡ä»¶è·¯å¾„ï¼‰"</span>;
            }
            <span class="hljs-title class_">String</span> filePath = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">"filePath"</span>).<span class="hljs-title function_">toString</span>();

            <span class="hljs-comment">// æ¨¡æ‹ŸExcelè¯»å–é€»è¾‘ï¼ˆå®é™…å¼€å‘ä¸­å¯è°ƒç”¨POIå·¥å…·ç±»ï¼‰</span>
            <span class="hljs-comment">// æ­¤å¤„æ¨¡æ‹Ÿï¼šè¯»å–æ–‡ä»¶ï¼Œè¿”å›æ•°æ®æ¡æ•°å’Œå‰3æ¡é¢„è§ˆ</span>
            int dataCount = <span class="hljs-number">50</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®æ¡æ•°</span>
            <span class="hljs-title class_">String</span> preview = <span class="hljs-string">"ç¬¬1æ¡ï¼šå¼ ä¸‰,25,å·¥ç¨‹å¸ˆï¼›ç¬¬2æ¡ï¼šæå››,28,äº§å“ç»ç†ï¼›ç¬¬3æ¡ï¼šç‹äº”,30,è®¾è®¡å¸ˆ"</span>;

            <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"Excelè¯»å–æˆåŠŸï¼æ–‡ä»¶è·¯å¾„ï¼š%sï¼Œå…±%dæ¡æ•°æ®ï¼Œå‰3æ¡é¢„è§ˆï¼š%s"</span>,
                    filePath, dataCount, preview);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŠ€èƒ½æ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }
    }
}
    
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-comment">// PPTç”ŸæˆSkill</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PptGenerateSkill</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSkillId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ppt:generate"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDescription</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨äºç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼Œè¾“å…¥æ ‡é¢˜å’Œæ¯é¡µå†…å®¹ï¼Œè¿”å›PPTç”Ÿæˆç»“æœå’Œä¿å­˜è·¯å¾„"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getParamDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&amp;gt; paramDesc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"title"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒStringç±»å‹ï¼ŒPPTæ ‡é¢˜"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"contents"</span>, <span class="hljs-string">"å¿…å¡«ï¼ŒList&lt;String&gt;ç±»å‹ï¼ŒPPTæ¯é¡µçš„å†…å®¹åˆ—è¡¨"</span>);
        paramDesc.<span class="hljs-title function_">put</span>(<span class="hljs-string">"savePath"</span>, <span class="hljs-string">"éå¿…å¡«ï¼ŒStringç±»å‹ï¼ŒPPTä¿å­˜è·¯å¾„ï¼Œé»˜è®¤ï¼š/data/ppt/"</span>);
    
</code></pre>
<h4 data-id="heading-14">2. å®ç°åŠå…¬Agentï¼ˆåŠ è½½Skills + è‡ªä¸»å†³ç­– + è°ƒç”¨æ‰§è¡Œï¼‰</h4>
<p>Agentçš„æ ¸å¿ƒé€»è¾‘æ˜¯â€œè§£æç”¨æˆ·éœ€æ±‚ â†’ åŒ¹é…å¯¹åº”Skill â†’ è°ƒç”¨Skillæ‰§è¡Œ â†’ è¿”å›ç»“æœâ€ï¼Œæ­¤å¤„æ¨¡æ‹Ÿéœ€æ±‚è§£æï¼ˆå®é™…å¼€å‘ä¸­å¯ç»“åˆå¤§æ¨¡å‹APIå®ç°ç²¾å‡†è§£æï¼‰ï¼Œæ·»åŠ SkillsåŠ è½½ã€å†³ç­–ã€å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.*;

<span class="hljs-comment">// å¤šåŠŸèƒ½åŠå…¬Agent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OfficeAgent</span> {
    <span class="hljs-comment">// Agentåç§°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> agentName;
    <span class="hljs-comment">// åŠ è½½çš„Skillsé›†åˆï¼ˆkeyï¼šskillIdï¼Œvalueï¼šSkillå®ä¾‹ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Skill</span>&amp;gt; skillMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-comment">// åˆå§‹åŒ–Agentï¼ŒåŠ è½½æŒ‡å®šSkills</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">OfficeAgent</span>(<span class="hljs-title class_">String</span> agentName, <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Skill</span>&gt; skillList) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentName</span> = agentName;
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Skill</span> skill : skillList) {
            skillMap.<span class="hljs-title function_">put</span>(skill.<span class="hljs-title function_">getSkillId</span>(), skill);
            <span class="hljs-comment">// æ‰“å°åŠ è½½çš„Skillsä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•</span>
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"AgentåŠ è½½Skillï¼š%sï¼ˆ%sï¼‰%n"</span>, skill.<span class="hljs-title function_">getSkillId</span>(), skill.<span class="hljs-title function_">getDescription</span>());
        }
    }

    <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•ï¼šè§£æç”¨æˆ·éœ€æ±‚ï¼Œè‡ªä¸»åŒ¹é…å¹¶è°ƒç”¨Skill</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">processRequest</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userRequest</span>) {
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"%nç”¨æˆ·éœ€æ±‚ï¼š%s%n"</span>, userRequest);

        <span class="hljs-comment">// 1. æ¨¡æ‹Ÿéœ€æ±‚è§£æï¼ˆå®é™…å¼€å‘ä¸­å¯è°ƒç”¨Claudeã€GPTç­‰å¤§æ¨¡å‹APIï¼Œç²¾å‡†åŒ¹é…Skillï¼‰</span>
        <span class="hljs-title class_">SkillMatchResult</span> matchResult = <span class="hljs-title function_">matchSkill</span>(userRequest);
        <span class="hljs-keyword">if</span> (!matchResult.<span class="hljs-title function_">isMatch</span>()) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ— æ³•è¯†åˆ«æ‚¨çš„éœ€æ±‚ï¼Œå½“å‰Agentæ”¯æŒçš„åŠŸèƒ½ï¼š"</span> + <span class="hljs-title function_">getSupportSkillsDesc</span>();
        }

        <span class="hljs-comment">// 2. è·å–åŒ¹é…çš„Skillå’Œå‚æ•°</span>
        <span class="hljs-title class_">Skill</span> targetSkill = matchResult.<span class="hljs-title function_">getTargetSkill</span>();
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; params = matchResult.<span class="hljs-title function_">getParams</span>();

        <span class="hljs-comment">// 3. è°ƒç”¨Skillæ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœ</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-string">"åŒ¹é…åˆ°Skillï¼š%s%n"</span>, targetSkill.<span class="hljs-title function_">getSkillId</span>());
        <span class="hljs-title class_">String</span> result = targetSkill.<span class="hljs-title function_">execute</span>(params);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ‰§è¡Œç»“æœï¼š"</span> + result;
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šéœ€æ±‚ä¸SkillåŒ¹é…é€»è¾‘</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SkillMatchResult</span> <span class="hljs-title function_">matchSkill</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userRequest</span>) {
        <span class="hljs-title class_">SkillMatchResult</span> result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillMatchResult</span>();
        <span class="hljs-comment">// æ–‡æœ¬ç¿»è¯‘éœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ç¿»è¯‘"</span>) &amp;&amp; (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ä¸­æ–‡"</span>) || userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è‹±æ–‡"</span>))) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"text:translate"</span>));
            <span class="hljs-comment">// å°è£…å‚æ•°ï¼ˆæ¨¡æ‹Ÿè§£æç”¨æˆ·éœ€æ±‚ä¸­çš„æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼‰</span>
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"text"</span>, userRequest.<span class="hljs-title function_">split</span>(<span class="hljs-string">"ç¿»è¯‘"</span>)[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>()); <span class="hljs-comment">// æå–éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬</span>
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"targetLang"</span>, userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è‹±æ–‡"</span>) ? <span class="hljs-string">"en"</span> : <span class="hljs-string">"zh"</span>);
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-comment">// Excelè¯»å–éœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"è¯»å–"</span>) &amp;&amp; userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"Excel"</span>)) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"excel:read"</span>));
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"filePath"</span>, <span class="hljs-string">"/data/åŠå…¬æ•°æ®.xlsx"</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿè§£ææ–‡ä»¶è·¯å¾„</span>
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-comment">// PPTç”Ÿæˆéœ€æ±‚åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"ç”Ÿæˆ"</span>) &amp;&amp; userRequest.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"PPT"</span>)) {
            result.<span class="hljs-title function_">setMatch</span>(<span class="hljs-literal">true</span>);
            result.<span class="hljs-title function_">setTargetSkill</span>(skillMap.<span class="hljs-title function_">get</span>(<span class="hljs-string">"ppt:generate"</span>));
            <span class="hljs-title class_">Map</span>&amp;lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&amp;gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"title"</span>, <span class="hljs-string">"åŠå…¬æ±‡æŠ¥PPT"</span>);
            params.<span class="hljs-title function_">put</span>(<span class="hljs-string">"contents"</span>, <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">"å·¥ä½œæ¦‚è¿°"</span>, <span class="hljs-string">"æˆæœå±•ç¤º"</span>, <span class="hljs-string">"åç»­è®¡åˆ’"</span>));
            result.<span class="hljs-title function_">setParams</span>(params);
            <span class="hljs-keyword">return</span> result;
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè·å–Agentæ”¯æŒçš„Skillsæè¿°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSupportSkillsDesc</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">StringBuilder</span> desc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Skill</span> skill : skillMap.<span class="hljs-title function_">values</span>()) {
            desc.<span class="hljs-title function_">append</span>(skill.<span class="hljs-title function_">getSkillId</span>()).<span class="hljs-title function_">append</span>(<span class="hljs-string">"ï¼ˆ"</span>).<span class="hljs-title function_">append</span>(skill.<span class="hljs-title function_">getDescription</span>()).<span class="hljs-title function_">append</span>(<span class="hljs-string">"ï¼‰ï¼Œ"</span>);
        }
        <span class="hljs-keyword">return</span> desc.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, desc.<span class="hljs-title function_">length</span>() - <span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// è¾…åŠ©ç±»ï¼šSkillåŒ¹é…ç»“æœå°è£…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillMatchResult</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> match;
        <span class="hljs-keyword">private</span> <span class="hljs-title class_">Skill</span> targetSkill;
        <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; params;

        <span class="hljs-comment">// getter/setteræ–¹æ³•ï¼ˆç®€åŒ–ï¼Œå®é™…å¼€å‘ä¸­å¯å®Œå–„ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isMatch</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> match; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setMatch</span>(<span class="hljs-params"><span class="hljs-built_in">boolean</span> match</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">match</span> = match; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Skill</span> <span class="hljs-title function_">getTargetSkill</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> targetSkill; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setTargetSkill</span>(<span class="hljs-params">Skill targetSkill</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetSkill</span> = targetSkill; }
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">getParams</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> params; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setParams</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt; params</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span> = params; }
    }

    <span class="hljs-comment">// æµ‹è¯•æ–¹æ³•ï¼šè¿è¡ŒAgentï¼Œæ¨¡æ‹Ÿç”¨æˆ·éœ€æ±‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-comment">// 1. åŠ è½½3ä¸ªæ ¸å¿ƒSkills</span>
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Skill</span>&gt; skillList = <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTranslateSkill</span>(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExcelReadSkill</span>(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">PptGenerateSkill</span>()
        );

        <span class="hljs-comment">// 2. åˆ›å»ºåŠå…¬Agent</span>
        <span class="hljs-title class_">OfficeAgent</span> officeAgent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OfficeAgent</span>(<span class="hljs-string">"å¤šåŠŸèƒ½åŠå…¬Agent"</span>, skillList);

        <span class="hljs-comment">// 3. æ¨¡æ‹Ÿ3ä¸ªä¸åŒçš„ç”¨æˆ·éœ€æ±‚ï¼Œæµ‹è¯•Agentæ‰§è¡Œæ•ˆæœ</span>
        <span class="hljs-title class_">String</span> request1 = <span class="hljs-string">"å¸®æˆ‘ç¿»è¯‘è¿™å¥è¯ï¼šAIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨ï¼Œç›®æ ‡è¯­è¨€æ˜¯è‹±æ–‡"</span>;
        <span class="hljs-title class_">String</span> request2 = <span class="hljs-string">"å¸®æˆ‘è¯»å–Excelæ–‡ä»¶ä¸­çš„æ•°æ®"</span>;
        <span class="hljs-title class_">String</span> request3 = <span class="hljs-string">"å¸®æˆ‘ç”Ÿæˆä¸€ä»½åŠå…¬æ±‡æŠ¥PPT"</span>;

        <span class="hljs-comment">// 4. æ‰§è¡Œéœ€æ±‚å¹¶è¾“å‡ºç»“æœ</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request1));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request2));
        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(officeAgent.<span class="hljs-title function_">processRequest</span>(request3));
    }
}
    
</code></pre>
<h4 data-id="heading-15">3. æ‰§è¡Œç»“æœä¸è§£æ</h4>
<p>è¿è¡ŒAgentçš„mainæ–¹æ³•ï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼ˆæ¸…æ™°å±•ç¤ºSkillsåŠ è½½ã€éœ€æ±‚åŒ¹é…ã€æ‰§è¡Œç»“æœçš„å®Œæ•´æµç¨‹ï¼‰ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">
<span class="hljs-section">AgentåŠ è½½Skillï¼štext:translateï¼ˆç”¨äºæ–‡æœ¬ç¿»è¯‘ï¼Œæ”¯æŒä¸­æ–‡ä¸è‹±æ–‡äº’è¯‘ï¼Œè¾“å…¥æ–‡æœ¬å’Œç›®æ ‡è¯­è¨€ï¼Œè¿”å›ç¿»è¯‘ç»“æœï¼‰</span>
<span class="hljs-section">AgentåŠ è½½Skillï¼šexcel:readï¼ˆç”¨äºè¯»å–Excelæ–‡ä»¶æ•°æ®ï¼Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¿”å›æ–‡ä»¶ä¸­çš„æ•°æ®æ¡æ•°å’Œå‰3æ¡æ•°æ®é¢„è§ˆï¼‰</span>
<span class="hljs-section">AgentåŠ è½½Skillï¼šppt:generateï¼ˆç”¨äºç”ŸæˆåŠå…¬æ±‡æŠ¥PPTï¼Œè¾“å…¥æ ‡é¢˜å’Œæ¯é¡µå†…å®¹ï¼Œè¿”å›PPTç”Ÿæˆç»“æœå’Œä¿å­˜è·¯å¾„ï¼‰</span>

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘ç¿»è¯‘è¿™å¥è¯ï¼šAIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨ï¼Œç›®æ ‡è¯­è¨€æ˜¯è‹±æ–‡
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼štext:translate</span>
<span class="hljs-section">æ‰§è¡Œç»“æœï¼šç¿»è¯‘æˆåŠŸï¼šTranslated: AIæŠ€èƒ½æ¨¡å—å¾ˆå®ç”¨</span>

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘è¯»å–Excelæ–‡ä»¶ä¸­çš„æ•°æ®
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼šexcel:read</span>
æ‰§è¡Œç»“æœï¼šExcelè¯»å–æˆåŠŸï¼æ–‡ä»¶è·¯å¾„ï¼š/data/åŠå…¬æ•°æ®.xlsxï¼Œå…±50æ¡æ•°æ®ï¼Œå‰3æ¡é¢„è§ˆï¼šç¬¬1æ¡ï¼šå¼ ä¸‰,25,å·¥ç¨‹å¸ˆï¼›ç¬¬2æ¡ï¼šæå››,28,äº§å“ç»ç†ï¼›ç¬¬3æ¡ï¼šç‹äº”,30,è®¾è®¡å¸ˆ

ç”¨æˆ·éœ€æ±‚ï¼šå¸®æˆ‘ç”Ÿæˆä¸€ä»½åŠå…¬æ±‡æŠ¥PPT
<span class="hljs-section">åŒ¹é…åˆ°Skillï¼šppt:generate</span>
æ‰§è¡Œç»“æœï¼šPPTç”ŸæˆæˆåŠŸï¼æ ‡é¢˜ï¼šåŠå…¬æ±‡æŠ¥PPTï¼Œå…±3é¡µï¼Œä¿å­˜è·¯å¾„ï¼š/data/ppt/åŠå…¬æ±‡æŠ¥PPT.pptx
</code></pre>
<p>è§£æï¼šAgentæˆåŠŸåŠ è½½3ä¸ªSkillsï¼Œæ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªä¸»åŒ¹é…å¯¹åº”Skillï¼Œè°ƒç”¨æ‰§è¡Œåè¿”å›æ¸…æ™°ç»“æœï¼Œå®Œå…¨ç¬¦åˆåŠå…¬åœºæ™¯çš„å®é™…éœ€æ±‚ï¼›è‹¥ç”¨æˆ·è¾“å…¥æœªè¯†åˆ«çš„éœ€æ±‚ï¼ŒAgentä¼šè¿”å›æ”¯æŒçš„åŠŸèƒ½åˆ—è¡¨ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-16">å››ã€Skillsè¿›é˜¶æŠ€å·§ï¼šä»åŸºç¡€ä½¿ç”¨åˆ°é«˜çº§åº”ç”¨</h3>
<p>æŒæ¡åŸºç¡€çš„Skillså¼€å‘åï¼Œå¯é€šè¿‡ä»¥ä¸‹è¿›é˜¶æŠ€å·§ï¼Œè¿›ä¸€æ­¥æå‡Skillsçš„çµæ´»æ€§ã€å¯æ‰©å±•æ€§ï¼Œé€‚é…æ›´å¤æ‚çš„Agentåœºæ™¯ï¼Œæ‰“é€ æ›´å¼ºå¤§çš„æ™ºèƒ½ä½“ã€‚</p>
<h4 data-id="heading-17">1. Skillsç»„åˆï¼šå®ç°å¤æ‚åŠŸèƒ½æ‹†è§£ä¸å¤ç”¨</h4>
<p>å•ä¸€Skillsä»…èƒ½å®ç°ç®€å•åŠŸèƒ½ï¼Œé€šè¿‡Skillsç»„åˆï¼Œå¯æ‹†è§£å¤æ‚ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç°â€œ1+1&gt;2â€çš„æ•ˆæœï¼Œä¸”ç»„åˆåçš„é€»è¾‘å¯å¤ç”¨ï¼Œæ— éœ€é‡å¤å¼€å‘ã€‚</p>
<p>ç¤ºä¾‹ï¼šå®ç°â€œè‡ªåŠ¨åŒ–æ•°æ®åˆ†ææŠ¥å‘Šâ€åŠŸèƒ½ï¼Œç»„åˆ3ä¸ªSkillsï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨excel:readï¼ˆExcelè¯»å–Skillï¼‰ï¼Œè¯»å–æ•°æ®æºæ–‡ä»¶ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼šè°ƒç”¨data:statisticï¼ˆæ•°æ®ç»Ÿè®¡Skillï¼‰ï¼Œå¯¹è¯»å–çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼ˆæ±‚å’Œã€å¹³å‡å€¼ã€å æ¯”ï¼‰ï¼›</li>
<li>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨doc:generateï¼ˆæ–‡æ¡£ç”ŸæˆSkillï¼‰ï¼Œå°†ç»Ÿè®¡ç»“æœç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Šã€‚</li>
</ul>
<p>å¯å°è£…ä¸€ä¸ªâ€œç»„åˆSkillâ€ï¼Œå°†ä¸Šè¿°æµç¨‹å›ºåŒ–ï¼ŒAgentè°ƒç”¨è¯¥ç»„åˆSkillå³å¯ç›´æ¥å®Œæˆå¤æ‚åŠŸèƒ½ï¼Œä»£ç å¤ç”¨æ€§å¤§å¹…æå‡ã€‚</p>
<h4 data-id="heading-18">2. åŠ¨æ€åŠ è½½ä¸å¸è½½ï¼šä¼˜åŒ–Agentæ€§èƒ½</h4>
<p>Agentæ— éœ€ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰Skillsï¼Œå¯æ ¹æ®ç”¨æˆ·éœ€æ±‚ã€ä½¿ç”¨åœºæ™¯ï¼ŒåŠ¨æ€åŠ è½½æ‰€éœ€Skillsï¼Œä½¿ç”¨å®Œæˆåå¸è½½ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œä¼˜åŒ–Agentæ€§èƒ½ã€‚</p>
<p>ç¤ºä¾‹ï¼šåŠå…¬Agentåœ¨å·¥ä½œæ—¥åŠ è½½â€œExcelè¯»å–â€â€œPPTç”Ÿæˆâ€ç­‰åŠå…¬Skillsï¼Œåœ¨èŠ‚å‡æ—¥åŠ è½½â€œèŠ‚æ—¥ç¥ç¦ç”Ÿæˆâ€â€œæ—¥ç¨‹æé†’â€ç­‰Skillsï¼Œé€šè¿‡åŠ¨æ€åŠ è½½å®ç°èµ„æºä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-19">3. Skillsç‰ˆæœ¬ç®¡ç†ï¼šé€‚é…è¿­ä»£ä¸å…¼å®¹æ€§</h4>
<p>éšç€ä¸šåŠ¡éœ€æ±‚è¿­ä»£ï¼ŒSkillsä¹Ÿéœ€è¦ä¸æ–­ä¼˜åŒ–å‡çº§ï¼Œä¸ºé¿å…å‡çº§åå½±å“Agentè°ƒç”¨ï¼Œéœ€åšå¥½ç‰ˆæœ¬ç®¡ç†ï¼Œå»ºè®®åœ¨SkillIdä¸­æ·»åŠ ç‰ˆæœ¬å·ï¼ˆå¦‚text:translate:v2ï¼‰ã€‚</p>
<p>æ ¸å¿ƒè¦ç‚¹ï¼šæ–°ç‰ˆæœ¬Skillså…¼å®¹æ—§ç‰ˆæœ¬å‚æ•°ï¼Œæ—§ç‰ˆæœ¬Skillsæš‚æ—¶ä¿ç•™ï¼ˆé€æ­¥æ·˜æ±°ï¼‰ï¼ŒAgentå¯æ ¹æ®éœ€æ±‚é€‰æ‹©è°ƒç”¨å¯¹åº”ç‰ˆæœ¬çš„Skillsï¼Œé¿å…è¿­ä»£å¯¼è‡´çš„è°ƒç”¨å¤±è´¥ã€‚</p>
<h4 data-id="heading-20">4. å¤–éƒ¨APIé›†æˆï¼šæ‰©å±•Skillsèƒ½åŠ›è¾¹ç•Œ</h4>
<p>Skillså¯é›†æˆå¤–éƒ¨APIï¼ˆå¦‚ç¿»è¯‘APIã€åœ°å›¾APIã€æ”¯ä»˜APIï¼‰ï¼Œæ‰©å±•è‡ªèº«èƒ½åŠ›è¾¹ç•Œï¼Œæ— éœ€é‡å¤å¼€å‘å¤æ‚é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç¿»è¯‘Skillå¯é›†æˆç™¾åº¦ç¿»è¯‘APIï¼Œå®ç°æ›´ç²¾å‡†çš„å¤šè¯­è¨€ç¿»è¯‘ï¼›åœ°å›¾Skillå¯é›†æˆé«˜å¾·åœ°å›¾APIï¼Œå®ç°åœ°ç†ä½ç½®æŸ¥è¯¢ã€‚</p>
<p>é¿å‘æé†’ï¼šé›†æˆå¤–éƒ¨APIæ—¶ï¼Œéœ€æ·»åŠ è¶…æ—¶é‡è¯•ã€å¼‚å¸¸æ•è·é€»è¾‘ï¼Œé¿å…APIè°ƒç”¨å¤±è´¥å¯¼è‡´Skillsæ‰§è¡Œå´©æºƒï¼›åŒæ—¶åšå¥½APIå¯†é’¥ç®¡ç†ï¼Œé¿å…æ³„éœ²ã€‚</p>
<h3 data-id="heading-21">äº”ã€Skillsé«˜é¢‘é¿å‘æŒ‡å—ï¼šé¿å¼€è¿™äº›å¼€å‘é™·é˜±</h3>
<p>ç»“åˆå¤§é‡å®æˆ˜ç»éªŒï¼Œæ¢³ç†å¼€å‘è€…åœ¨Skillså¼€å‘ã€ä½¿ç”¨è¿‡ç¨‹ä¸­çš„é«˜é¢‘å‘ç‚¹ï¼Œé™„ä¸Šå…·ä½“è§„é¿æ–¹æ¡ˆï¼Œé¿å…è¸©å‘æµªè´¹å¼€å‘æ—¶é—´ï¼Œæå‡Skillsè´¨é‡å’ŒAgentç¨³å®šæ€§ã€‚</p>
<h4 data-id="heading-22">å‘ç‚¹1ï¼šSkillsåŠŸèƒ½å†—ä½™ï¼Œè¿èƒŒå•ä¸€èŒè´£åŸåˆ™</h4>
<p><strong>ç°è±¡</strong>ï¼šä¸€ä¸ªSkillå®ç°å¤šä¸ªåŠŸèƒ½ï¼ˆå¦‚â€œExcelè¯»å–+æ•°æ®ç»Ÿè®¡+æŠ¥å‘Šç”Ÿæˆâ€ï¼‰ï¼Œå¯¼è‡´ä»£ç è‡ƒè‚¿ã€éš¾ä»¥ç»´æŠ¤ã€å¤ç”¨æ€§å·®ï¼ŒAgentè°ƒç”¨æ—¶å®¹æ˜“å‡ºç°å¼‚å¸¸ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šä¸¥æ ¼éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªSkillä»…å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå¤æ‚åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹Skillsï¼Œé€šè¿‡ç»„åˆå®ç°ï¼Œç¡®ä¿æ¯ä¸ªSkillç®€æ´ã€å¯ç»´æŠ¤ã€‚</p>
<h4 data-id="heading-23">å‘ç‚¹2ï¼šå‚æ•°è®¾è®¡æ··ä¹±ï¼Œæ— æ ¡éªŒã€æ— é»˜è®¤å€¼</h4>
<p><strong>ç°è±¡</strong>ï¼šå‚æ•°è¿‡å¤šã€å†—ä½™ï¼Œæ— æ˜ç¡®è¯´æ˜ï¼Œç¼ºå°‘å‚æ•°æ ¡éªŒï¼Œéå¿…å¡«å‚æ•°æ— é»˜è®¤å€¼ï¼Œå¯¼è‡´Agentè°ƒç”¨æ—¶é¢‘ç¹å‡ºç°å‚æ•°é”™è¯¯ï¼Œè°ƒè¯•æˆæœ¬é«˜ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šéµå¾ªâ€œæœ€å°å¿…è¦åŸåˆ™â€è®¾è®¡å‚æ•°ï¼Œæ·»åŠ å‚æ•°è¯´æ˜ï¼ˆgetParamDescæ–¹æ³•ï¼‰ï¼Œå®ç°å‚æ•°æ ¡éªŒé€»è¾‘ï¼Œéå¿…å¡«å‚æ•°è®¾ç½®åˆç†é»˜è®¤å€¼ï¼Œå¼‚å¸¸æ—¶è¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºã€‚</p>
<h4 data-id="heading-24">å‘ç‚¹3ï¼šå¿½è§†å¼‚å¸¸æ•è·ï¼Œå¯¼è‡´Agentå´©æºƒ</h4>
<p><strong>ç°è±¡</strong>ï¼šSkillsæ‰§è¡Œè¿‡ç¨‹ä¸­æœªå…¨é¢æ•è·å¼‚å¸¸ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ã€APIè°ƒç”¨è¶…æ—¶ã€å‚æ•°æ ¼å¼é”™è¯¯ï¼‰ï¼Œç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸ï¼Œå¯¼è‡´Agentå´©æºƒï¼Œå½±å“æ•´ä½“ä½¿ç”¨ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šåœ¨executeæ–¹æ³•ä¸­æ·»åŠ try-catchæ•è·æ‰€æœ‰å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œè¿”å›æ¸…æ™°çš„é”™è¯¯æç¤ºï¼Œä¾¿äºAgentåˆ¤æ–­æ˜¯å¦é‡è¯•ã€å¦‚ä½•è°ƒæ•´ç­–ç•¥ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡ºæœªæ•è·å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-25">å‘ç‚¹4ï¼šSkillså‘½åæ¨¡ç³Šï¼ŒAgentæ— æ³•ç²¾å‡†åŒ¹é…</h4>
<p><strong>ç°è±¡</strong>ï¼šSkillså‘½åæ¨¡ç³Šï¼ˆå¦‚MySkillã€Skill2ï¼‰ï¼ŒAgentæ— æ³•æ ¹æ®ç”¨æˆ·éœ€æ±‚ç²¾å‡†åŒ¹é…å¯¹åº”Skillï¼Œå¯¼è‡´åŠŸèƒ½æ‰§è¡Œå¤±è´¥ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šä¸¥æ ¼éµå¾ªå‘½åè§„èŒƒï¼Œé‡‡ç”¨â€œåŠŸèƒ½ç±»å‹+å…·ä½“æ“ä½œâ€çš„æ ¼å¼ï¼Œè¯­ä¹‰æ¸…æ™°ï¼Œè®©Agentå’Œå¼€å‘è€…èƒ½å¿«é€Ÿè¯†åˆ«SkillåŠŸèƒ½ï¼Œæå‡åŒ¹é…å‡†ç¡®ç‡ã€‚</p>
<h4 data-id="heading-26">å‘ç‚¹5ï¼šSkillsæ— å¤ç”¨æ€§ï¼Œé‡å¤å¼€å‘</h4>
<p><strong>ç°è±¡</strong>ï¼šä¸åŒAgentä¸­å®ç°ç›¸åŒåŠŸèƒ½çš„Skillsï¼Œæ¥å£ä¸ç»Ÿä¸€ã€é€»è¾‘ä¸é€šç”¨ï¼Œå¯¼è‡´é‡å¤å¼€å‘ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼Œä¸ç¬¦åˆSkillsçš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p><strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼šéµå¾ªç»Ÿä¸€çš„æ¥å£è§„èŒƒã€å‘½åè§„èŒƒã€å‚æ•°è§„èŒƒå¼€å‘Skillsï¼Œæ‰“é€ å¯å¤ç”¨çš„Skillsç»„ä»¶åº“ï¼Œä¸åŒAgentå¯ç›´æ¥å¤ç”¨ï¼Œå‡å°‘é‡å¤å¼€å‘æˆæœ¬ã€‚</p>
<h3 data-id="heading-27">å…­ã€æ€»ç»“ï¼šSkillsæ˜¯AI Agentè§„æ¨¡åŒ–è½åœ°çš„å…³é”®</h3>
<p>AI Agentçš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œä¸åœ¨äºâ€œèƒ½è‡ªä¸»å†³ç­–â€ï¼Œè€Œåœ¨äºâ€œèƒ½é«˜æ•ˆå®Œæˆå…·ä½“ä»»åŠ¡â€â€”â€”è€ŒSkillsï¼Œæ­£æ˜¯è®©Agentå…·å¤‡â€œå®Œæˆä»»åŠ¡èƒ½åŠ›â€çš„æ ¸å¿ƒè½½ä½“ã€‚ä»MCPçš„é‡å†·åˆ°Skillsçš„å´›èµ·ï¼Œæœ¬è´¨æ˜¯AIå¼€å‘ä»â€œè¿½æ±‚é€šç”¨â€åˆ°â€œå›å½’å®ç”¨â€çš„è½¬å˜ï¼ŒSkillsçš„è½»é‡ã€é«˜æ•ˆã€å¯å¤ç”¨ï¼Œå®Œç¾å¥‘åˆäº†Agentè§„æ¨¡åŒ–è½åœ°çš„éœ€æ±‚ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒæŒæ¡Skillsçš„è®¾è®¡è§„èŒƒã€å®æˆ˜æŠ€å·§ä¸é¿å‘è¦ç‚¹ï¼Œä¸ä»…èƒ½æå‡Agentå¼€å‘æ•ˆç‡ã€é™ä½ç»´æŠ¤æˆæœ¬ï¼Œæ›´èƒ½æ‰“é€ å‡ºä½“éªŒæ›´ä¼˜ã€èƒ½åŠ›æ›´å¼ºçš„æ™ºèƒ½ä½“äº§å“ã€‚æœªæ¥ï¼Œéšç€AI Agentçš„æ™®åŠï¼Œé«˜è´¨é‡çš„Skillsç»„ä»¶åº“å°†æˆä¸ºå¼€å‘è€…çš„â€œæ ¸å¿ƒèµ„äº§â€ï¼Œè€Œéµå¾ªè§„èŒƒã€èšç„¦å®ç”¨ï¼Œæ­£æ˜¯æ‰“é€ ä¼˜ç§€Skillsçš„å…³é”®ã€‚</p>
<p>æ— è®ºæ˜¯åŠå…¬è‡ªåŠ¨åŒ–ã€å®¢æœæ¥å¾…ï¼Œè¿˜æ˜¯å·¥ä¸šè´¨æ£€ã€æ™ºèƒ½è¿ç»´ï¼ŒSkillséƒ½èƒ½æˆä¸ºAgentçš„â€œå¾—åŠ›åŠ©æ‰‹â€ï¼Œè®©AIçœŸæ­£èµ°å‡ºâ€œæ¦‚å¿µâ€ï¼Œè½åœ°åˆ°æ¯ä¸€ä¸ªå®é™…åœºæ™¯ä¸­ï¼Œä¸ºå¼€å‘è€…å‡è´Ÿï¼Œä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ]]></title>    <link>https://juejin.cn/post/7603004323870326827</link>    <guid>https://juejin.cn/post/7603004323870326827</guid>    <pubDate>2026-02-05T01:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870326827" data-draft-id="7602814773497331754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ"/> <meta itemprop="keywords" content="å¹´ç»ˆæ€»ç»“,Trae"/> <meta itemprop="datePublished" content="2026-02-05T01:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ«æƒ¹CC"/> <meta itemprop="url" content="https://juejin.cn/user/4095037267779687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ 2025 å¹´ç»ˆæ€»ç»“ã€‘è¢«æ¨ç€èµ°çš„ä¸€å¹´ï¼Œéœ€è¦åœä¸‹æ¥æ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4095037267779687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ«æƒ¹CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T01:12:39.000Z" title="Thu Feb 05 2026 01:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="hybrid">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”Ÿæ´»ä»ä¸æŒ‰è®¡åˆ’</h2>
<p>ä» 2025 å¹´åº•å¼€å§‹è§„åˆ’ï¼Œä¸€ç›´åˆ° 2026 å¹´ 2 æœˆçš„ä¸€å¤©æ·±å¤œï¼Œæˆ‘æ‰çœŸæ­£å¼€å§‹åŠ¨ç¬”ã€‚ç¬¬ä¸‰å¹´å†™å¹´ç»ˆæ€»ç»“â€”æŒ‰å››èˆäº”å…¥çš„ç®—æ³•ï¼Œä¹Ÿç®—æ˜¯å·¥ä½œçš„ç¬¬ä¸‰å¹´ã€‚</p>
<p>å›çœ‹ 2024 å¹´ç«‹ä¸‹çš„ Flagï¼Œæœ€æ¥è¿‘â€œå®Œæˆâ€çš„ï¼Œç«Ÿç„¶è¿˜æ˜¯ã€ŒæŒç»­è¾“å‡ºåšå®¢ã€ã€‚å…¶ä»–çš„è®¡åˆ’ï¼Œä¸æ˜¯æ²¡å¼€å§‹ï¼Œå°±æ˜¯è¢«ç°å®æŒ¤åˆ°è§’è½é‡Œï¼šè½¬äº§å“å¸¦æ¥çš„èŠ‚å¥å˜åŒ–ã€AI å‘å±•å¸¦æ¥çš„è®¤çŸ¥åˆ·æ–°ã€ä»¥åŠå·¥ä½œå¼ºåº¦å¯¹ç”Ÿæ´»ç©ºé—´çš„åå™¬ï¼Œéƒ½åœ¨ä¸€ç‚¹ç‚¹æ”¹å†™æˆ‘åŸæœ¬çš„è®¾æƒ³ã€‚</p>
<p>æ‰€ä»¥ä»Šå¹´æˆ‘ä¸ç«‹é‚£ç§æ¼‚äº®çš„ Flag äº†ã€‚2026 å¹´åªå®šå‡ ä¸ªå¤§æ–¹å‘ï¼šæŠŠèŠ‚å¥æ‰¾å›æ¥ï¼ŒæŠŠèº«ä½“æ‹‰å›æ­£è½¨ï¼ŒæŠŠæ³¨æ„åŠ›æ”¾åœ¨çœŸæ­£ä¼šå¤åˆ©çš„äº‹ä¸Šã€‚</p>
<h2 data-id="heading-1">å†™åšå®¢å¸¦æ¥çš„æ­£å‘åé¦ˆ</h2>
<p>è½¬äº§å“ä¹‹åï¼Œæˆ‘æœ¬æ¥æ‰“ç®—æŠŠæŠ€æœ¯åšå®¢æ…¢æ…¢é™é¢‘ã€‚ä¸æ˜¯ä¸å–œæ¬¢å†™ï¼Œè€Œæ˜¯è§‰å¾—å·¥ä½œä¹‹å¤–çš„ç²¾åŠ›åº”è¯¥æ›´å¤šæŠ•å‘äº§å“ç›¸å…³çš„è¾“å…¥è¾“å‡ºã€‚ä½† 3 æœˆä»½ï¼Œæˆ‘æ”¶åˆ°äº†ä¸€ä¸ªè¯»è€…å‘æ¥çš„é‚®ä»¶ã€‚é‚£ä¸€ç¬é—´å¾ˆå¥‡å¦™ï¼šä½ ä»¥ä¸ºè‡ªå·±åœ¨å¯¹ç€ç©ºæ°”è®²è¯ï¼Œçªç„¶æœ‰äººä»å¾ˆè¿œçš„åœ°æ–¹èµ°è¿‡æ¥ï¼Œè®¤çœŸåœ°å‘Šè¯‰ä½ ï¼š<strong>ä½ å†™çš„ä¸œè¥¿ï¼ŒçœŸçš„å¸®åˆ°æˆ‘äº†ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3a7afcc3cb0430b978d28db9014f658~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=nMHrvLat5GMPWXuWNxVMUmwkoIk%3D" alt="1.png" loading="lazy"/></p>
<p>äºæ˜¯å³ä½¿åé¢å¿™åˆ°çˆ†ç‚¸ï¼Œæˆ‘ä¾æ—§åœ¨æŒ¤æ—¶é—´æ›´æ–°ã€‚æ›´æ–°é¢‘ç‡è™½ç„¶ä¸ç®—å¤¸å¼ ï¼Œä½†åŸºæœ¬ç»´æŒäº†â€œæ¯æœˆéƒ½æœ‰åŠ¨é™â€çš„çŠ¶æ€ï¼Œä¹Ÿé¡ºå¸¦æŠŠå›½å†…å‡ å¤§ä¸»æµæŠ€æœ¯ç¤¾åŒºçš„ã€Œä¸“å®¶åšä¸»ã€ä¹‹ç±»è®¤è¯æ”¶é›†é½äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8eb9a394e304f658ca66c5897ab4081~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=PTkjb%2BL0dxLmMfbee49L7%2FFi1L8%3D" alt="2.png" loading="lazy"/></p>
<p>å¦å¤–ï¼Œé â€œç¬”æ†å­â€æ¥åˆ°äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªæ¨å¹¿åˆä½œã€‚é’±ä¸å¤šï¼Œä½†æ„ä¹‰å¯¹æˆ‘æ¥è¯´å¾ˆé‡ï¼š<strong>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°ï¼Œè¾“å‡ºä¸åªæ˜¯ä¸€ç§è‡ªæˆ‘è®°å½•ï¼Œå®ƒä¹Ÿèƒ½åœ¨ç°å®é‡Œè¢«äº¤æ¢ã€è¢«è®¤å¯ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea7713d3e8b348b9940ff3d096895f4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=vUMndRtDqqzIVuAqfqoX%2BovYleI%3D" alt="3.png" loading="lazy"/></p>
<p>ä¸è¿‡æˆ‘ä¹Ÿå¾—è¯šå®åœ°è®²ï¼š2026 å¹´æŠ€æœ¯åšå®¢æ›´æ–°é¢‘ç‡å¤§æ¦‚ç‡ä¼šæ›´ä½ä¸€ç‚¹ã€‚ä¸æ˜¯ä¸å†™ï¼Œè€Œæ˜¯æˆ‘ç¡®å®éœ€è¦æŠŠæ›´å¤šç²¾åŠ›æŠ•å‘å½“ä¸‹çš„æœ¬èŒèƒ½åŠ›â€”â€”å°¤å…¶æ˜¯äº§å“èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">è¢« Trae å®˜æ–¹é‡‡è®¿</h2>
<p>3 æœˆå‚åŠ äº†ä¸€åœºé»‘å®¢æ¾ï¼Œç”¨çš„æ˜¯ Traeã€‚è™½ç„¶æ²¡æ‹¿ä¸Šåæ¬¡ï¼Œä½†ä½œå“æœ¬èº«æœ‰å¯åœˆå¯ç‚¹çš„åœ°æ–¹ï¼Œæ‰€ä»¥å¾ˆè£å¹¸è¢« Trae å®˜æ–¹é‡‡è®¿ï¼Œæœ€åä¸Šäº†ä»–ä»¬çš„å…¬ä¼—å·ã€‚</p>
<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨â€œåšå®¢ä»¥å¤–â€çš„åœ°æ–¹è¡¨è¾¾è‡ªå·±ï¼Œä¹Ÿç¬¬ä¸€æ¬¡æŠŠä¸€äº›äº§å“è§‚è®²å¾—æ›´å…¬å¼€ã€‚ç°åœ¨å›çœ‹ï¼Œé‚£äº›è§‚ç‚¹ç¡®å®è¿˜æœ‰äº›ç¨šå«©ï¼Œä½†æˆ‘åè€Œæ›´èƒ½æ¥å—è¿™ç§ç¨šå«©ï¼šå®ƒè¯´æ˜é‚£æ—¶çš„æˆ‘ç«™åœ¨é‚£ä¸ªé˜¶æ®µï¼Œç¡®å®è®¤çœŸæƒ³è¿‡ã€è®¤çœŸè¯´è¿‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/354bd6ff8a69454d841e4115caf3bcc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=RlWAZhWZiVO8ws608pTTvQC8cRw%3D" alt="4.png" loading="lazy"/></p>
<p>è™½ç„¶åé¢åˆ‡æ¢åˆ°äº† <code>Claude Code</code>ï¼ŒTrae ç”¨å¾—å°‘äº†ï¼Œä½†æ›´æ–°æˆ‘å…¶å®ä¸€ç›´æœ‰åœ¨å…³æ³¨ï¼Œä¹Ÿçœ‹è¿‡ä»–ä»¬äº§å“è´Ÿè´£äººçš„é‡‡è®¿ï¼Œèƒ½æ„Ÿå—åˆ°å›¢é˜Ÿåœ¨å·¥ç¨‹ä¾§çš„æŠ•å…¥ã€‚ä¹Ÿç¥æ„¿ä»–ä»¬è¶Šåšè¶Šå¥½â€”â€”è¯´ä¸å®šå“ªå¤©äº§å“æ‰“ç£¨åˆ°æŸä¸ªç‚¹ï¼Œæˆ‘è¿˜èƒ½ä» CC å†åˆ‡å›å»ã€‚</p>
<h2 data-id="heading-3">ä»Šå¹´çœ‹è¿‡çš„â€œäº”æœˆå¤©â€</h2>
<p>ä½œä¸ºä¸€ä¸ª wmls ï¼Œä»Šå¹´ä¸€å…±çœ‹äº†ä¸‰åœºï¼š<strong>é¦™æ¸¯ â†’ é•¿æ²™ â†’ å¤§æ¹¾åŒº</strong>ï¼Œå…¶ä¸­å¤§æ¹¾åŒºè¿˜æ˜¯é˜¿ä¿¡ç”Ÿæ—¥åœºï¼Œæ»¡è¶³æ„Ÿæ‹‰æ»¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6230fde44f89418e97b6dfd287f78972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=cyErKQWzpw9FrXThek%2BY8Wcohy8%3D" alt="5.png" loading="lazy"/></p>
<p>ä»Šå¹´æˆ‘ä¹Ÿæ„å¤–å‘ç°ï¼šå»ä¸€ä¸ªæ–°åŸå¸‚çœ‹æ¼”å”±ä¼šï¼Œé¡ºä¾¿â€œå½“ä¸€å¤©æ¸¸å®¢â€ï¼Œä¼šè®©è¿™è¶Ÿå¥”èµ´æ›´ç«‹ä½“ã€‚é•¿æ²™çš„å°ç‚’çœŸçš„ä¸‹é¥­ï¼Œå¾ˆå¯¹æˆ‘çš„èƒƒå£â€”â€”ä¹Ÿç®—æ˜¯â€œéŸ³ä¹ + åŸå¸‚ + é£Ÿç‰©â€çš„ä¸€æ¬¡å®Œæ•´ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bbc8f524510425e841fdc781f99446e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=KSitoSICQJcEysk8ngbY6oNaaGo%3D" alt="6.png" loading="lazy"/></p>
<p>2026 å¹´çš„è¯ï¼Œæˆ‘åº”è¯¥ä¼šå¤šå»å¤§æ¹¾åŒºä»¥å¤–çš„åœ°æ–¹ç»§ç»­è¿½ã€‚å‰ææ˜¯ï¼šæˆ‘å¾—å…ˆæŠŠè‡ªå·±çš„èŠ‚å¥å’Œä½“åŠ›è¿˜ç»™è‡ªå·±ã€‚</p>
<h2 data-id="heading-4">çœŸæ ¼00ååšåˆ†äº«</h2>
<p>11 æœˆæœºç¼˜å·§åˆä¸‹å—é‚€å‚åŠ äº†çœŸæ ¼åŸºé‡‘åœ¨æ·±åœ³ä¸¾åŠçš„ã€ŒçœŸæ ¼ 00 åã€åˆ†äº«ï¼Œåˆ†äº«äº†æˆ‘å¯¹ AI åº”ç”¨æ–¹å‘çš„ä¸€äº›çœ‹æ³•ã€‚å›å¤´çœ‹ï¼Œè‡³å°‘åˆ°ç›®å‰ä¸ºæ­¢ï¼Œopenclawï¼ˆåŸ clawdbotï¼‰çš„çˆ†ç«ä»¥åŠå„å¤§å‚å•†çš„è·Ÿè¿›ï¼Œå’Œæˆ‘å½“æ—¶æ•´ä½“çš„åˆ¤æ–­æ–¹å‘åŸºæœ¬ä¸€è‡´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c254f04b34d44d5e9c10fe74db78dac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=hlkdVS5AJE1qkt9yxK%2BNAHoSWA8%3D" alt="7.png" loading="lazy"/></p>
<p>å‚åŠ è¿™ä¸ªæ´»åŠ¨æ›´å¤§çš„ä»·å€¼ï¼Œä¸æ˜¯â€œè¢«å¬è§â€ï¼Œè€Œæ˜¯â€œçœ‹è§åˆ«äººâ€ã€‚çœ‹åˆ°ä¸€äº›åŒé¾„äººåœ¨åšçš„äº‹ï¼Œä¼šè®©ä½ çªç„¶æ˜ç™½ï¼šä¸–ç•Œæ¯”ä½ æƒ³è±¡å¾—æ›´å¿«ï¼Œè€Œä½ èƒ½åšçš„ä¸æ˜¯ç„¦è™‘ï¼Œè€Œæ˜¯æŠŠè‡ªå·±è¯¥è¡¥çš„é‚£éƒ¨åˆ†è¡¥èµ·æ¥ã€‚</p>
<p>ä¹Ÿæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œæˆ‘å‘ç°è‡ªå·±å¥½åƒæœ‰ä¸€ç‚¹â€œèƒ½æŠŠè¯è®²æ¸…æ¥šâ€çš„å¤©èµ‹ã€‚åé¢æˆ‘åˆåœ¨ 2 ä¸ªå°å‹ AI ç›¸å…³ meetup åšäº†åˆ†äº«â€”â€”è¾“å‡ºå€’é€¼è¾“å…¥ï¼Œäº¤æµæœ¬èº«ä¹Ÿæ˜¯è¾“å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/091937a7f3bf4179a2e67ddf3994877d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=LW64%2FSdGSUKUXnuK2CPlhpuratc%3D" alt="8.png" loading="lazy"/></p>
<h2 data-id="heading-5">å‚åŠ  Vue Conf 2025</h2>
<p>è™½ç„¶å·²ç»è½¬äº§å“ï¼Œä¸å†ä»¥æŠ€æœ¯ä½œä¸ºä¸»ä¸šï¼Œä½†ä¸šä½™å¯¹ code çš„çƒ­çˆ±å…¶å®æ²¡åœã€‚</p>
<p>çœ‹åˆ°ä»Šå¹´ Vue Conf çš„æ¶ˆæ¯ï¼Œæˆ‘å‡ ä¹æ²¡çŠ¹è±«å°±ä¹°ç¥¨äº†ã€‚å»å¹´çŸ¥é“å¤ªæ™šæ²¡å»æˆæ˜¯ä¸ªé—æ†¾ï¼Œä»Šå¹´æ°å¥½è¿˜åœ¨æ·±åœ³ï¼Œä¹Ÿè§åˆ°äº†å°¤å¤§æœ¬äººã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eba4c2da1ee42988c90bc18db832b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=juQSEbS%2F02%2BXgZw0Ec9r%2BMGGAsQ%3D" alt="9.png" loading="lazy"/></p>
<p>æœ‰äº›å–œæ¬¢ä¸éœ€è¦è¯æ˜ï¼Œå®ƒåªä¼šåœ¨ä½ æ„¿æ„çš„æ—¶å€™ï¼ŒæŠŠä½ å¸¦å›ç°åœºã€‚</p>
<h2 data-id="heading-6">æˆä¸ºé“²å±å®˜</h2>
<p>ä»Šå¹´æ•´ä½“éƒ½åœ¨ä¸€ç§å¾ˆç´§å‡‘çš„å·¥ä½œèŠ‚å¥é‡Œåº¦è¿‡ï¼Œå‡ ä¹æ²¡ä»€ä¹ˆçœŸæ­£æ„ä¹‰ä¸Šçš„ä¼‘æ¯æ—¶é—´ã€‚å¹´åº•æˆ‘å…»äº†ä¸€åªå°çŒ«ï¼Œç»™å®ƒå–åå« <strong>å“ˆå“ˆ</strong>ï¼Œå¸Œæœ›å®ƒèƒ½ç»™æˆ‘å¸¦æ¥å¿«ä¹ï¼Œä¹Ÿå¸Œæœ›æˆ‘è‡ªå·±èƒ½æ¯å¤©å¿«å¿«ä¹ä¹çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46e5c46c4d62424cb3fb1c55aa2afeab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=1UEKXi%2Ba93qvsOqyHxUAAJ8naJc%3D" alt="10.png" loading="lazy"/></p>
<p>æ¯å¤©æ™šä¸Šå›å®¶ï¼Œå®ƒä¼šåœ¨é—¨å£ç­‰æˆ‘ã€‚æœ‰äº†å®ƒçš„é™ªä¼´ï¼Œç”Ÿæ´»ç¡®å®ä¸å¤ªä¸€æ ·äº†ï¼šä½ ä¼šå¤šä¸€ç§â€œæœ‰äººåœ¨ç­‰ä½ â€çš„æ„Ÿè§‰ã€‚</p>
<h2 data-id="heading-7">å…³äºä¸ªäºº</h2>
<p>ä¸ªäººå±‚é¢æ¥çœ‹ï¼Œå…¨å¹´å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨å·¥ä½œä¸Šã€‚ä»Šå¹´å¼€å§‹ç‹¬ç«‹è´Ÿè´£ä¸€æ¡ä¸šåŠ¡çº¿ä¹‹åï¼Œå¾ˆå¤šå°äº‹å’Œå¼€ä¸å®Œçš„ä¼šå‡ ä¹æ¦¨å¹²äº†æˆ‘æ‰€æœ‰ç²¾åŠ›ã€‚èŠ‚å‡æ—¥æˆ‘åªæƒ³èººç€ä¼‘æ¯ï¼Œæ‰€ä»¥ä»Šå¹´é™¤äº†çœ‹æ¼”å”±ä¼šï¼ŒåŸºæœ¬æ²¡å®ç°å»å¹´çš„æ—…è¡Œè§„åˆ’ï¼Œè¿™æ˜¯é—æ†¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/455fc16400c64eeebbd214f29bc583d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=uVmL4xQiYTh9b6OnWGAhdG5GyoU%3D" alt="11.png" loading="lazy"/></p>
<p>ä½†æˆ‘ä¹Ÿå¼€å§‹æ…¢æ…¢æœ‰äº†æŒæ§æ„Ÿï¼Œå¹¶ä¸”æ›´èƒ½ç†è§£é‚£å¥è¯ï¼š<strong>è¦å­¦ä¼šåœ¨å·¥ä½œä¸­ä¼‘æ¯</strong>ã€‚ä¸ç„¶ä¼‘æ¯åªä¼šå˜æˆæ›´æ·±çš„ç–²æƒ«ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯ä½“é‡é—®é¢˜ã€‚æ¯•ä¸šè¿™ä¸¤å¹´å¤šèƒ–äº†è¿‘ 40 æ–¤ï¼Œæˆ‘å®‰æ…°è‡ªå·±æ˜¯â€œè¿‡åŠ³è‚¥â€â€”â€”å½“ç„¶å¯èƒ½æœ‰è¿™éƒ¨åˆ†å½±å“ï¼Œä½†ä¹Ÿå¾—æ‰¿è®¤ï¼šå‹åŠ›å¤§çš„æ—¶å€™ï¼Œå˜´ç¡®å®æ›´å®¹æ˜“å¤±æ§ã€‚ç°åœ¨çš„å¤§ä½“é‡çˆ¬ä¸ªæ¢§æ¡å±±éƒ½è¦äº†è€å‘½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f47584cd340c4bcbb2c556f89ae32a9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=5GUoCsVto6lhBZ3%2BSeKjQCj7mCU%3D" alt="12.png" loading="lazy"/></p>
<p>è¿™ä¸€å¹´ç»™æˆ‘çš„ä¸€ä¸ªå¾ˆæœ´ç´ çš„ç»“è®ºæ˜¯ï¼š<strong>å¿ƒæ€çœŸçš„å¾ˆé‡è¦</strong>ã€‚ä¸æ˜¯â€œæƒ³å¼€ç‚¹â€é‚£ç§ç©ºè¯ï¼Œè€Œæ˜¯ä½ ä¸è°ƒæ•´ï¼Œå®ƒä¼šé€šè¿‡ç¡çœ ã€é¥®é£Ÿã€ä½“é‡ï¼Œæ¢ä¸€ç§æ–¹å¼è®©ä½ ä»˜è´¦ã€‚</p>
<h2 data-id="heading-8">AIæ—¶ä»£çš„ç„¦è™‘</h2>
<p>25 å¹´å¤§æ¨¡å‹å’Œ AI åº”ç”¨æ›´æ–°è¶Šæ¥è¶Šå¿«ï¼Œç¤¾åª’ä¸Šçš„ç„¦è™‘ä¹Ÿè¶Šæ¥è¶Šå¯†ï¼šå¥½åƒä¸é©¬ä¸Šå­¦å°±ä¼šè¢«æ·˜æ±°ã€‚</p>
<p>ä½†å›è¿‡å¤´çœ‹ï¼Œå¾ˆå¤šä¸œè¥¿åœ¨è¯•ç”¨åä¸€ä¸¤å‘¨æ•ˆæœä¸€èˆ¬ï¼Œå°±è¢«æˆ‘ä»¬æ‚„æ‚„é—å¿˜äº†ã€‚æœ€ååˆ°å¹´åº•ï¼ŒçœŸæ­£ç•™åœ¨æˆ‘å·¥ä½œæµé‡Œçš„ä»ç„¶æ˜¯é‚£å‡ æ¬¾å·¥å…·ã€‚</p>
<p>æˆ‘ä»¬åšäº§å“å¸¸è®²â€œæŠŠéœ€æ±‚è½¬ä¸ºè§£å†³æ–¹æ¡ˆâ€ã€‚å…¶å®ä¸ªäººå±‚é¢ä¹Ÿä¸€æ ·ï¼š<strong>å½“ä½ åœ¨å·¥ä½œæˆ–ç”Ÿæ´»é‡Œé‡åˆ°é—®é¢˜å¡ç‚¹äº†ï¼Œå†å»æ‰¾ AI å¯¹ä½ æœ‰æ²¡æœ‰å¸®åŠ©å°±å¥½</strong>ï¼Œä¸ç”¨è¿‡åº¦å…³æ³¨æ‰€æœ‰ä¿¡æ¯æµçš„æ›´æ–°ã€‚</p>
<p>ç„¦è™‘ä¸ä¼šè®©ä½ å˜å¼ºï¼Œå®ƒåªä¼šè®©ä½ å˜æ•£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5358f6d13cbd41ec884938add0348e0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858801&amp;x-signature=rlQLl5FVrlQjFgnUo5qdbf2uLYw%3D" alt="13.png" loading="lazy"/></p>
<h2 data-id="heading-9">å°¾è¨€</h2>
<p>æ‰€ä»¥ä»Šå¹´æˆ‘ä¸æƒ³ç«‹ä¸€äº›Flag äº†ã€‚æ›´ç°å®ä¸€ç‚¹ï¼šå…ˆæŠŠèŠ‚å¥é‡æ–°æŒæ¡å›æ¥ï¼Œå…ˆåšå‡ºæ”¹å˜ã€‚</p>
<p>2026 å¹´æˆ‘ç»™è‡ªå·±å®šçš„å¤§æ–¹å‘å¤§æ¦‚æ˜¯ï¼š</p>
<ol>
<li><strong>æŠŠäº§å“èƒ½åŠ›åšå®</strong>ï¼šä¸šåŠ¡ç†è§£ã€è¡¨è¾¾ã€åä½œã€æ¨è¿›ã€‚</li>
<li><strong>æŠŠ AI å½“å·¥å…·</strong>ï¼šå›´ç»•çœŸå®é—®é¢˜æ„å»ºç¨³å®šå·¥ä½œæµï¼Œè€Œä¸æ˜¯è¿½çƒ­ç‚¹ã€‚</li>
<li><strong>æŠŠèº«ä½“æ‹‰å›æ­£è½¨</strong>ï¼šè¿åŠ¨ã€é¥®é£Ÿã€ç¡çœ ï¼Œè‡³å°‘å…ˆæŠŠä½“é‡åˆ¹ä½ã€‚</li>
<li><strong>æŠŠè¾“å‡ºç•™ä¸‹æ¥</strong>ï¼šä¸ä¸ºæ›´æ–°è€Œæ›´æ–°ï¼Œä½†æŒç»­è®°å½•å’Œæ²‰æ·€ã€‚</li>
</ol>
<p>ä¹Ÿç¥ä½ ã€ç¥æˆ‘ã€ç¥æˆ‘ä»¬ï¼š<strong>2026 å¹´éƒ½èƒ½æ›´ç¨³ä¸€ç‚¹ã€æ›´å¼€å¿ƒä¸€ç‚¹ã€‚</strong></p>
<p>äº 2026å¹´2æœˆ5æ—¥ å‡Œæ™¨3ç‚¹å†™å®Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7603004323870851115</link>    <guid>https://juejin.cn/post/7603004323870851115</guid>    <pubDate>2026-02-05T02:39:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603004323870851115" data-draft-id="7602816610932932671" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-05T02:39:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº AI ç”Ÿæˆé«˜è´¨é‡ Mock æ•°æ®çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T02:39:04.000Z" title="Thu Feb 05 2026 02:39:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å‰åç«¯åˆ†ç¦»çš„ç ”å‘æ¨¡å¼ä¸‹ï¼ŒMock æ•°æ®æ˜¯å¹¶è¡Œå¼€å‘çš„åŸºç¡€è®¾æ–½ã€‚æœ¬æ–‡ä»‹ç»ä¸€å¥— Mock å·¥å…·çš„æŠ€æœ¯å®ç°ï¼Œæ ¸å¿ƒè§£å†³å››ä¸ªé—®é¢˜ï¼šè¯·æ±‚æ‹¦æˆªã€è§„åˆ™åŒ¹é…ã€æ•°æ®è´¨é‡ã€å›¢é˜Ÿå…±äº«ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å®é™…ä¸šåŠ¡å¼€å‘ä¸­ï¼Œå‰ç«¯å’Œæµ‹è¯•åŒå­¦ç»å¸¸é‡åˆ°è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>è”è°ƒé˜»å¡</strong>ï¼šåç«¯æ¥å£æœªå°±ç»ªæ—¶ï¼Œå‰ç«¯åªèƒ½ç­‰å¾…æˆ–ç¡¬ç¼–ç  <code>if (true) { ... }</code></li>
<li><strong>åœºæ™¯è¦†ç›–éš¾</strong>ï¼šæƒ³æ¨¡æ‹Ÿè¾¹ç¼˜åœºæ™¯ï¼ˆå¼‚å¸¸ã€ç©ºæ•°æ®ã€åˆ†é¡µï¼‰ï¼Œå¾€å¾€éœ€è¦åç«¯æ”¹æ•°æ®åº“</li>
<li><strong>Mock æ•°æ®è´¨é‡å·®</strong>ï¼šMock.js ç”Ÿæˆçš„ <code>@cname</code>ã€<code>@integer</code> ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰ï¼Œå’ŒçœŸå®æ•°æ®å·®è·å¤§</li>
<li><strong>æ•°æ®éš¾å…±äº«</strong>ï¼šMock æ•°æ®å­˜åœ¨æœ¬åœ°ï¼Œæ¢å°ç”µè„‘æˆ–æ¢ä¸ªåŒäº‹å°±ç”¨ä¸äº†</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦ä¸€å¥—å·¥å…·è§£å†³è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œnpm åŒ…å¼•å…¥å³å¯</li>
<li>æ”¯æŒå‚æ•°çº§åˆ«çš„è§„åˆ™åŒ¹é…ï¼ŒåŒä¸€æ¥å£å¯é…ç½®å¤šä¸ªåœºæ™¯</li>
<li>æ ¹æ®æ¥å£æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®</li>
<li>æ”¯æŒå›¢é˜Ÿå…±äº« Mock é…ç½®</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸šç•Œå¸¸è§æ–¹æ¡ˆ</h2>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ä¸è¶³</th></tr></thead><tbody><tr><td>ç¡¬ç¼–ç  Mock</td><td>ç®€å•ç›´æ¥</td><td>ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œå‘å¸ƒå‰éœ€æ‰‹åŠ¨åˆ é™¤</td></tr><tr><td>Mock.js</td><td>æœ‰æ•°æ®ç”Ÿæˆèƒ½åŠ›</td><td>è§„åˆ™é…ç½®ç¹çï¼Œæ•°æ®ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰</td></tr><tr><td>whistle ä»£ç†</td><td>ä¸ä¾µå…¥ä¸šåŠ¡ï¼Œä½¿ç”¨ç®€å•</td><td>æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ— æ³•å›¢é˜Ÿå…±äº«ï¼Œæ— æ³•åŒ¹é…å¤æ‚åœºæ™¯</td></tr><tr><td>MSW (Service Worker)</td><td>ç½‘ç»œå±‚æ‹¦æˆª</td><td>éœ€æ³¨å†Œ sw.jsï¼Œä¾èµ– HTTPSï¼Œæ¥å…¥æˆæœ¬é«˜</td></tr><tr><td>æµè§ˆå™¨æ’ä»¶</td><td>ä½¿ç”¨ç®€å• æ— ä¾µå…¥å¼</td><td>è§„åˆ™åœ¨æœ¬åœ°ï¼Œæ— æ³•æ¥å…¥å†…éƒ¨æ¥å£å¹³å°</td></tr></tbody></table>
<p>è¿™äº›æ–¹æ¡ˆéƒ½æ— æ³•åŒæ—¶æ»¡è¶³"ä½ä¾µå…¥"ã€"è§„åˆ™çµæ´»"ã€"æ•°æ®è´¨é‡é«˜"ã€"å›¢é˜Ÿå¯å…±äº«"å››ä¸ªéœ€æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-2">æ•´ä½“æ¶æ„</h2>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸šåŠ¡é¡¹ç›®                              â”‚
â”‚   import { mockInit } <span class="hljs-selector-tag">from</span> '<span class="hljs-keyword">@zz-common</span>/ai_mock'             â”‚
â”‚   mockInit({ rules: [<span class="hljs-string">'api.example.com'</span>] })                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ai_mock (npm åŒ…)                         â”‚
â”‚      XHR/Fetch æ‹¦æˆª  â†’  è§„åˆ™åŒ¹é…å¼•æ“  â†’  è¿”å› Mock æ•°æ®         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ åŠ¨æ€åŠ è½½ sdk + CustomEvent é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  mock-sdk (å¯è§†åŒ–é¢æ¿)                        â”‚
â”‚        è¯·æ±‚åˆ—è¡¨  |  è§„åˆ™ç®¡ç†  |  Monaco Editor ç¼–è¾‘å™¨           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   node (åç«¯æœåŠ¡)                            â”‚
â”‚         æ¥å£æ–‡æ¡£è·å–  â†’  AI ç”Ÿæˆ  â†’  æ•°æ®æŒä¹…åŒ–                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ ¸å¿ƒè®¾è®¡ï¼š</p>
<ul>
<li><code>ai_mock</code> åªè´Ÿè´£æ‹¦æˆªå’ŒåŒ¹é…ï¼Œä¸åŒ…å« UI ä»£ç </li>
<li><code>mock-sdk</code> é€šè¿‡ CDN åŠ¨æ€æ³¨å…¥ï¼Œä¸å¢åŠ ä¸šåŠ¡åŒ…ä½“ç§¯</li>
<li>ä¸¤è€…é€šè¿‡ <code>CustomEvent</code> æ¾è€¦åˆé€šä¿¡</li>
<li>ä»…åœ¨éç”Ÿäº§ç¯å¢ƒå¯ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-3">æ ¸å¿ƒå®ç°ä¸€ï¼šè¯·æ±‚æ‹¦æˆª</h2>
<h3 data-id="heading-4">é—®é¢˜</h3>
<p>ç°ä»£å‰ç«¯åº”ç”¨æ··åˆä½¿ç”¨ <code>XMLHttpRequest</code> å’Œ <code>fetch</code>ã€‚æ‹¦æˆªæ—¶éœ€è¦è§£å†³ï¼š</p>
<ol>
<li>åŒæ—¶æ‹¦æˆª XHR å’Œ Fetchï¼Œä¸”ä¸ç ´åç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Sentryï¼‰çš„ç›‘å¬é€»è¾‘</li>
<li>XHR çš„ <code>readyState</code>ã€<code>status</code>ã€<code>responseText</code> æ˜¯åªè¯»å±æ€§ï¼Œæ— æ³•ç›´æ¥èµ‹å€¼</li>
<li>æ‹¦æˆªåå‘é€çœŸå®è¯·æ±‚ä¼šå†æ¬¡è¿›å…¥æ‹¦æˆªé€»è¾‘ï¼Œé€ æˆæ— é™é€’å½’</li>
</ol>
<h3 data-id="heading-5">å®ç°</h3>
<p>é€šè¿‡é‡å†™ <code>XMLHttpRequest.prototype.send</code> å’Œ <code>window.fetch</code> å®ç°æ‹¦æˆªï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿å­˜åŸå§‹æ–¹æ³•</span>
<span class="hljs-keyword">const</span> xhrSendNative = <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span>
<span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>

<span class="hljs-comment">// é˜²é€’å½’ï¼šæ ‡è®°çœŸå®è¯·æ±‚</span>
<span class="hljs-keyword">const</span> isRealRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-title class_">XMLHttpRequest</span>, <span class="hljs-built_in">boolean</span>&gt;()

<span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
  <span class="hljs-keyword">const</span> xhr = <span class="hljs-variable language_">this</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-title function_">sliceUrlPath</span>(xhr.<span class="hljs-property">originRequestUrl</span>)
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºæ ‡è®°çš„çœŸå®è¯·æ±‚ï¼Œé˜²æ­¢æ— é™é€’å½’</span>
  <span class="hljs-keyword">if</span> (isRealRequest.<span class="hljs-title function_">get</span>(xhr)) {
    <span class="hljs-keyword">return</span> xhrSendNative.<span class="hljs-title function_">apply</span>(xhr, args)
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å‘½ä¸­ Mock è§„åˆ™</span>
  <span class="hljs-keyword">if</span> (mockInterface[url]?.<span class="hljs-property">isOpen</span>) {
    <span class="hljs-keyword">const</span> mockResult = <span class="hljs-title function_">getMockData</span>(url, requestData)
    
    <span class="hljs-keyword">if</span> (mockResult.<span class="hljs-property">matched</span>) {
      <span class="hljs-comment">// 1. ç«‹å³è¿”å› Mock å“åº”ç»™ä¸šåŠ¡å±‚</span>
      <span class="hljs-title function_">applyMockResponseToXhr</span>(xhr, mockResult.<span class="hljs-property">data</span>, mockResult.<span class="hljs-property">httpStatusCode</span>)
      
      <span class="hljs-comment">// 2. åå°å‘é€çœŸå®è¯·æ±‚ï¼ˆç”¨äºæ•°æ®å¯¹ç…§ï¼Œä¸è§¦å‘ä¸šåŠ¡å›è°ƒï¼‰</span>
      <span class="hljs-keyword">const</span> realXhr = <span class="hljs-title function_">cloneXHR</span>(xhr, <span class="hljs-literal">false</span>)  <span class="hljs-comment">// ä¸å¤åˆ¶äº‹ä»¶ç›‘å¬å™¨</span>
      isRealRequest.<span class="hljs-title function_">set</span>(realXhr, <span class="hljs-literal">true</span>)       <span class="hljs-comment">// æ ‡è®°ï¼Œé˜²æ­¢é€’å½’</span>
      xhrSendNative.<span class="hljs-title function_">apply</span>(realXhr, args)
      <span class="hljs-keyword">return</span>
    }
  }
  
  <span class="hljs-comment">// æœªå‘½ä¸­ï¼šæ‰§è¡ŒåŸç”Ÿè¯·æ±‚</span>
  xhrSendNative.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)
}
</code></pre>
<p><strong>è¦†å†™åªè¯»å±æ€§</strong>ï¼šXHR çš„ <code>readyState</code>ã€<code>status</code> ç­‰å±æ€§æ˜¯åªè¯»çš„ï¼Œé€šè¿‡ <code>Object.defineProperties</code> è§£å†³ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">applyMockResponseToXhr</span> = (<span class="hljs-params">
  xhr: XMLHttpRequest,
  responseData: <span class="hljs-built_in">any</span>,
  statusCode: <span class="hljs-built_in">number</span>
</span>) =&gt; {
  <span class="hljs-keyword">const</span> responseText = <span class="hljs-keyword">typeof</span> responseData === <span class="hljs-string">'string'</span> 
    ? responseData 
    : <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseData)
  
  <span class="hljs-comment">// é€šè¿‡ defineProperties è¦†å†™åªè¯»å±æ€§</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(xhr, {
    <span class="hljs-attr">readyState</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">4</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">status</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> statusCode, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">response</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> responseData, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">responseText</span>: { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> responseText, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span> }
  })
  
  <span class="hljs-comment">// è§¦å‘æ ‡å‡†äº‹ä»¶åºåˆ—</span>
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'readystatechange'</span>))
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'load'</span>))
  xhr.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'loadend'</span>))
}
</code></pre>
<p><strong>ç«‹å³å“åº” + çœŸå®è¯·æ±‚</strong>ï¼šå¼€å¯ Mock åï¼Œä¸šåŠ¡å±‚ç«‹å³æ‹¿åˆ° Mock æ•°æ®ï¼ŒåŒæ—¶åå°ä¼šå‘é€ä¸€ä»½çœŸå®è¯·æ±‚ç”¨äºæ•°æ®å¯¹ç…§ã€‚é¢æ¿æä¾›ã€ŒåŠ è½½çœŸå®æ•°æ®ã€æŒ‰é’®ï¼Œå¯ä»¥ä¸€é”®å°†çœŸå®å“åº”å¡«å…¥ç¼–è¾‘å™¨ï¼Œæ–¹ä¾¿åŸºäºçœŸå®æ•°æ®å¾®è°ƒã€‚</p>
<hr/>
<h2 data-id="heading-6">æ ¸å¿ƒå®ç°äºŒï¼šè§„åˆ™åŒ¹é…å¼•æ“</h2>
<h3 data-id="heading-7">é—®é¢˜</h3>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼ŒåŒä¸€ä¸ªæ¥å£éœ€è¦æ ¹æ®ä¸åŒå‚æ•°è¿”å›ä¸åŒæ•°æ®ï¼š</p>
<ul>
<li><code>page=1</code> è¿”å›ç¬¬ä¸€é¡µï¼Œ<code>page=2</code> è¿”å›ç¬¬äºŒé¡µ</li>
<li><code>userId=vip</code> è¿”å› VIP æ•°æ®ï¼Œ<code>userId=normal</code> è¿”å›æ™®é€šæ•°æ®</li>
<li><code>header</code> ä¸­å¸¦æŸä¸ªæ ‡è¯†æ—¶è¿”å›è°ƒè¯•æ•°æ®</li>
</ul>
<p>å‚æ•°å¯èƒ½åœ¨ URL Queryã€Request Bodyã€Headerã€Cookieã€Path ä¸­ï¼Œéœ€è¦ä¸€å¥—çµæ´»çš„è§„åˆ™åŒ¹é…æœºåˆ¶ã€‚</p>
<h3 data-id="heading-8">è§„åˆ™æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MockRule</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°è¶Šä¼˜å…ˆ</span>
  <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">type</span>: <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span>;   <span class="hljs-comment">// 1=æœ¬åœ°è‰ç¨¿ï¼Œ2=ä¸ªäººäº‘ç«¯ï¼Œ3=å›¢é˜Ÿå…±äº«</span>
  <span class="hljs-attr">paramConditions</span>: <span class="hljs-title class_">ParamCondition</span>[];  <span class="hljs-comment">// å‚æ•°æ¡ä»¶</span>
  <span class="hljs-attr">mockData</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">httpStatusCode</span>: <span class="hljs-built_in">number</span>;
  delay?: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ParamCondition</span> {
  <span class="hljs-attr">location</span>: <span class="hljs-string">'query'</span> | <span class="hljs-string">'body'</span> | <span class="hljs-string">'header'</span> | <span class="hljs-string">'cookie'</span> | <span class="hljs-string">'path'</span>;
  <span class="hljs-attr">paramName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">operator</span>: <span class="hljs-string">'equals'</span> | <span class="hljs-string">'notEquals'</span> | <span class="hljs-string">'contains'</span> | <span class="hljs-string">'notContains'</span> | 
            <span class="hljs-string">'greaterThan'</span> | <span class="hljs-string">'lessThan'</span> | <span class="hljs-string">'greaterOrEqual'</span> | <span class="hljs-string">'lessOrEqual'</span>;
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>;
}
</code></pre>
<h3 data-id="heading-9">åŒ¹é…ç®—æ³•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">matchRule</span>(<span class="hljs-params">rules: MockRule[], request: RequestInfo</span>): <span class="hljs-title class_">MatchResult</span> {
  <span class="hljs-comment">// åªåŒ¹é…å·²å¯ç”¨çš„æœŸæœ›ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</span>
  <span class="hljs-keyword">const</span> enabledRules = rules
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> rule.<span class="hljs-property">enabled</span>)
    .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">priority</span> - b.<span class="hljs-property">priority</span>);

  <span class="hljs-keyword">const</span> matched = enabledRules.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> <span class="hljs-title function_">isRuleMatched</span>(rule, request));
  
  <span class="hljs-keyword">return</span> matched 
    ? { <span class="hljs-attr">matched</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">rule</span>: matched, <span class="hljs-attr">delay</span>: matched.<span class="hljs-property">delay</span> ?? <span class="hljs-number">0</span> }
    : { <span class="hljs-attr">matched</span>: <span class="hljs-literal">false</span> };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isRuleMatched</span>(<span class="hljs-params">rule: MockRule, request: RequestInfo</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// æ²¡æœ‰å‚æ•°æ¡ä»¶ï¼ŒåŒ¹é…æ‰€æœ‰è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (!rule.<span class="hljs-property">paramConditions</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³æ‰åŒ¹é…ï¼ˆAND å…³ç³»ï¼‰</span>
  <span class="hljs-keyword">return</span> rule.<span class="hljs-property">paramConditions</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">condition</span> =&gt;</span>
    <span class="hljs-title function_">matchParamCondition</span>(condition, request)
  );
}
</code></pre>
<h3 data-id="heading-10">å‚æ•°å€¼è·å–</h3>
<p>æ ¹æ® <code>location</code> ä»ä¸åŒä½ç½®å–å€¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getParamValue</span>(<span class="hljs-params">location: <span class="hljs-built_in">string</span>, paramName: <span class="hljs-built_in">string</span>, request: RequestInfo</span>): <span class="hljs-built_in">any</span> {
  <span class="hljs-keyword">switch</span> (location) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'query'</span>:
      <span class="hljs-keyword">return</span> request.<span class="hljs-property">query</span>?.[paramName];
    <span class="hljs-keyword">case</span> <span class="hljs-string">'body'</span>:
      <span class="hljs-comment">// æ”¯æŒåµŒå¥—è·¯å¾„ï¼Œå¦‚ body.user.id</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">getNestedValue</span>(<span class="hljs-title function_">parseBody</span>(request.<span class="hljs-property">body</span>), paramName);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'header'</span>:
      <span class="hljs-keyword">return</span> request.<span class="hljs-property">headers</span>?.[paramName];
    <span class="hljs-keyword">case</span> <span class="hljs-string">'cookie'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">parseCookie</span>(request.<span class="hljs-property">headers</span>?.<span class="hljs-property">cookie</span>, paramName);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'path'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">extractPathParam</span>(request.<span class="hljs-property">url</span>, paramName);
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  }
}
</code></pre>
<p>æ¯”è¾ƒæ—¶ä¼šåšç±»å‹å…¼å®¹å¤„ç†ï¼Œæ¯”å¦‚ <code>1</code> å’Œ <code>"1"</code> è§†ä¸ºç›¸ç­‰ï¼Œé¿å…å› ç±»å‹ä¸ä¸€è‡´å¯¼è‡´åŒ¹é…å¤±è´¥ã€‚</p>
<h3 data-id="heading-11">ä½¿ç”¨ç¤ºä¾‹</h3>






























<table><thead><tr><th>è¯·æ±‚å‚æ•°</th><th>è§„åˆ™é…ç½®</th><th>ç»“æœ</th></tr></thead><tbody><tr><td><code>?page=1</code></td><td><code>query.page equals 1</code></td><td>è¿”å›ç¬¬ä¸€é¡µæ•°æ®</td></tr><tr><td><code>?page=2</code></td><td><code>query.page equals 2</code></td><td>è¿”å›ç¬¬äºŒé¡µæ•°æ®</td></tr><tr><td><code>body: {"user":{"type":"vip"}}</code></td><td><code>body.user.type equals "vip"</code></td><td>è¿”å› VIP æ•°æ®</td></tr><tr><td><code>Header: X-Debug: true</code></td><td><code>header.X-Debug equals "true"</code></td><td>è¿”å›è°ƒè¯•æ•°æ®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">æ ¸å¿ƒå®ç°ä¸‰ï¼šAI ç”Ÿæˆé«˜è´¨é‡æ•°æ®</h2>
<h3 data-id="heading-13">é—®é¢˜</h3>
<p>Mock.js ç”Ÿæˆçš„æ•°æ®ç¼ºä¹ä¸šåŠ¡è¯­ä¹‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Mock.js ç”Ÿæˆ</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"xxx"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">82</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">3</span> }

<span class="hljs-comment">// æœŸæœ›çš„ä¸šåŠ¡æ•°æ®</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">1</span> }  <span class="hljs-comment">// status: 0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡, 2=å·²æ‹’ç»</span>
</code></pre>
<p>æˆ‘ä»¬å¸Œæœ›æ ¹æ®æ¥å£æ–‡æ¡£ä¸­çš„å­—æ®µæè¿°ã€æšä¸¾è¯´æ˜ã€å­—æ®µå‘½åæ¥ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®, è¿™æ ·æ–‡æ¡£å¤‡æ³¨è¶Šè¯¦ç»† å­—æ®µåå®šä¹‰è¶Šæ¸…æ™° ç”Ÿæˆæ•°æ®ä¼šè¶Šå‡†ç¡®ã€‚</p>
<h3 data-id="heading-14">å®ç°æ€è·¯</h3>
<p>åç«¯æœåŠ¡ä» APIæ–‡æ¡£å¹³å° è·å–æ¥å£çš„ JSON Schemaï¼Œæ„å»º Prompt è°ƒç”¨ AI ç”Ÿæˆæ•°æ®ã€‚</p>
<p><strong>æ ¸å¿ƒ Prompt è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`
ä½ æ˜¯ Mock æ•°æ®ç”Ÿæˆä¸“å®¶ï¼Œæ ¹æ® JSON Schema ç”Ÿæˆç¬¦åˆä¸šåŠ¡åœºæ™¯çš„æ•°æ®ã€‚

ã€ç”Ÿæˆè§„åˆ™ - æŒ‰ä¼˜å…ˆçº§æ’åºã€‘
1. è‹¥ description ä¸­å­˜åœ¨æšä¸¾è¯´æ˜ï¼ˆå¦‚ "0:æˆåŠŸ, 1:å¤±è´¥"ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨æšä¸¾å€¼æœ¬èº«ï¼ˆå¦‚ 0ã€1ï¼‰
2. è‹¥æ—  descriptionï¼Œåˆ™æ ¹æ®å­—æ®µåçš„è¯­ä¹‰ç”Ÿæˆåˆç†å€¼
3. æ•°ç»„ç±»å‹é»˜è®¤ç”Ÿæˆ 5 æ¡æ•°æ®
4. è‹¥ description ä¸­æšä¸¾å€¼è¾ƒå¤šï¼Œæ•°ç»„åº”è¦†ç›–æ‰€æœ‰æšä¸¾å€¼

ã€é»˜è®¤å€¼è§„åˆ™ã€‘
- respCode / codeï¼šæˆåŠŸåœºæ™¯ä¸º 0ï¼Œå¤±è´¥åœºæ™¯ä¸º -1
- errorMsgï¼šæˆåŠŸåœºæ™¯ä¸º nullï¼Œå¤±è´¥åœºæ™¯ä¸º "ç³»ç»Ÿå¼‚å¸¸"
- å›¾ç‰‡ URLï¼šä½¿ç”¨ç»Ÿä¸€çš„å ä½å›¾åœ°å€
- æ™®é€š URLï¼šä½¿ç”¨ç»Ÿä¸€çš„åŸŸååœ°å€

ã€è¾“å‡ºæ ¼å¼ã€‘
ä»…è¾“å‡º JSONï¼Œä¸é™„åŠ ä»»ä½•è§£é‡Šæ–‡å­—
`</span>;
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>description ä¼˜å…ˆ</strong>ï¼šæ¥å£æ–‡æ¡£ä¸­ <code>status: 0=å¾…å®¡æ ¸, 1=å·²é€šè¿‡</code> è¿™ç±»æè¿°ä¼šè¢«ä¼˜å…ˆä½¿ç”¨</li>
<li><strong>å­—æ®µåè¯­ä¹‰</strong>ï¼š<code>userName</code> ç”Ÿæˆä¸­æ–‡å§“åï¼Œ<code>price</code> ç”Ÿæˆåˆç†ä»·æ ¼</li>
<li><strong>æšä¸¾è¦†ç›–</strong>ï¼šæ•°ç»„å­—æ®µä¼šå°½é‡è¦†ç›–æ‰€æœ‰æšä¸¾å€¼ï¼Œä¾¿äºæµ‹è¯•</li>
<li><strong>é»˜è®¤æˆåŠŸåœºæ™¯</strong>ï¼šé™¤éç”¨æˆ·æŒ‡å®šï¼Œå¦åˆ™ç”Ÿæˆæ­£å¸¸æ•°æ®</li>
</ol>
<h3 data-id="heading-15">æ•°æ®æ ¡éªŒ</h3>
<p>AI ç”Ÿæˆçš„ JSON å¯èƒ½æ ¼å¼æœ‰é—®é¢˜ï¼Œé€šè¿‡ <code>jsonrepair</code> éªŒè¯ä¿®å¤ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> jsonMatch = result.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\{[\s\S]*\}/</span>);
<span class="hljs-keyword">if</span> (jsonMatch) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsonrepair</span>(jsonMatch[<span class="hljs-number">0</span>]);
}
</code></pre>
<p>ç”Ÿæˆåå¯¹æ¯” Schema å’Œå®é™…æ•°æ®ï¼Œå­—æ®µç¼ºå¤±æ—¶å‘é€å‘Šè­¦ã€‚</p>
<h3 data-id="heading-16">ç”Ÿæˆæ¨¡å¼</h3>
<ul>
<li><strong>æ•´ä½“ç”Ÿæˆ</strong>ï¼šæ ¹æ®å®Œæ•´ Schema ç”Ÿæˆæ‰€æœ‰å­—æ®µ</li>
<li><strong>é€‰åŒºç”Ÿæˆ</strong>ï¼šåªæ›¿æ¢é€‰ä¸­çš„å­—æ®µï¼Œä¿ç•™å…¶ä»–å­—æ®µä¸å˜</li>
<li><strong>è‡ªå®šä¹‰ Prompt</strong>ï¼šç”¨æˆ·å¯è¾“å…¥é¢å¤–è¦æ±‚ï¼Œå¦‚"ç”Ÿæˆ VIP ç”¨æˆ·æ•°æ®"ã€"ä»·æ ¼åœ¨ 100-500 ä¹‹é—´"ã€"ç”Ÿæˆ10æ¡æ•°æ®"ã€"ç”ŸæˆæŸä¸ªåœºæ™¯å€¼çš„æ•°æ®"ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-17">æ ¸å¿ƒå®ç°å››ï¼šä¸‰å±‚ä½œç”¨åŸŸ</h2>
<h3 data-id="heading-18">é—®é¢˜</h3>
<p>Mock æ•°æ®å­˜åœ¨æœ¬åœ°çš„é—®é¢˜ï¼š</p>
<ul>
<li>æ¢å°ç”µè„‘å°±æ²¡äº†</li>
<li>åŒäº‹æƒ³ç”¨åŒä¸€å¥—æ•°æ®ï¼Œåªèƒ½æ‰‹åŠ¨å¤åˆ¶</li>
<li>å›¢é˜Ÿæ ‡å‡†æµ‹è¯•æ•°æ®æ— æ³•ç»Ÿä¸€ç®¡ç†</li>
</ul>
<h3 data-id="heading-19">è®¾è®¡</h3>
<p>ä¸‰å±‚ä½œç”¨åŸŸè§£å†³ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼š</p>





























<table><thead><tr><th>ä½œç”¨åŸŸ</th><th>å­˜å‚¨ä½ç½®</th><th>å¯è§æ€§</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>æœ¬åœ°è‰ç¨¿</td><td>IndexedDB</td><td>ä»…å½“å‰è®¾å¤‡</td><td>ä¸´æ—¶è°ƒè¯•</td></tr><tr><td>ä¸ªäººäº‘ç«¯</td><td>è¿œç¨‹æ•°æ®åº“</td><td>ä»…åˆ›å»ºè€…</td><td>è·¨è®¾å¤‡åŒæ­¥</td></tr><tr><td>å›¢é˜Ÿå…±äº«</td><td>è¿œç¨‹æ•°æ®åº“</td><td>æ‰€æœ‰å›¢é˜Ÿæˆå‘˜</td><td>æ ‡å‡†æµ‹è¯•æ•°æ®</td></tr></tbody></table>
<p><strong>å…³é”®è®¾è®¡</strong>ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆçº§å’Œå¯ç”¨çŠ¶æ€ä»…åœ¨æœ¬åœ°ç»´æŠ¤</strong>ï¼šé¿å…å›¢é˜Ÿæˆå‘˜äº’ç›¸å¹²æ‰°</li>
<li><strong>äº‘ç«¯åªå­˜æœŸæœ›å†…å®¹</strong>ï¼šæ¯ä¸ªäººç‹¬ç«‹æ§åˆ¶"å“ªäº›æœŸæœ›å¯ç”¨ã€ä¼˜å…ˆçº§å¦‚ä½•æ’åº"</li>
<li><strong>è§„åˆ™ç¼“å­˜</strong>ï¼šåŠ è½½åç¼“å­˜åœ¨ <code>window.__mockRulesCache</code>ï¼Œé¿å…é‡å¤è¯»å– IndexedDB</li>
</ol>
<h3 data-id="heading-20">æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MockRule</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span>;  <span class="hljs-comment">// 1=æœ¬åœ°è‰ç¨¿ï¼Œ2=ä¸ªäººäº‘ç«¯ï¼Œ3=å›¢é˜Ÿå…±äº«</span>
  <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æœ¬åœ°ç»´æŠ¤</span>
  <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æœ¬åœ°ç»´æŠ¤</span>
  <span class="hljs-comment">// ... å…¶ä»–å­—æ®µ</span>
}
</code></pre>
<h3 data-id="heading-21">äº‹ä»¶é€šä¿¡</h3>
<p>SDK ä¸ UI é¢æ¿é€šè¿‡ CustomEvent é€šä¿¡ï¼š</p>

























<table><thead><tr><th>äº‹ä»¶å</th><th>æ–¹å‘</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>mock-request-end</code></td><td>SDK â†’ UI</td><td>è¯·æ±‚å®Œæˆä¸ŠæŠ¥</td></tr><tr><td><code>mock-interface-switch</code></td><td>UI â†’ SDK</td><td>å•æ¥å£å¼€å…³æ§åˆ¶</td></tr><tr><td><code>mock-rules-updated</code></td><td>UI â†’ SDK</td><td>è§„åˆ™æ›´æ–°é€šçŸ¥</td></tr></tbody></table>
<h3 data-id="heading-22">æ•°æ®æ¸…ç†</h3>
<p>è‡ªåŠ¨æ¸…ç† 30 å¤©æœªä½¿ç”¨çš„æœ¬åœ°æ•°æ®ï¼Œè‡ªåŠ¨æ¸…ç†éæ´»è·ƒçš„æ•°æ® é¿å…å­˜å‚¨è†¨èƒ€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">await</span> <span class="hljs-title function_">cleanupInactiveData</span>(<span class="hljs-number">30</span>);
</code></pre>
<hr/>
<h2 data-id="heading-23">åŠ¨æ€æ¨¡æ¿è¯­æ³•</h2>
<p>æ”¯æŒåœ¨ Mock æ•°æ®ä¸­å¼•ç”¨è¯·æ±‚å‚æ•°ï¼Œå®ç°"å“åº”éšè¯·æ±‚å˜åŒ–"ï¼š</p>



































<table><thead><tr><th>è¯­æ³•</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>{{Date.now()}}</code></td><td>å½“å‰æ—¶é—´æˆ³</td><td><code>1706432400000</code></td></tr><tr><td><code>{{uuid()}}</code></td><td>ç”Ÿæˆ UUID</td><td><code>"a1b2c3d4-..."</code></td></tr><tr><td><code>{{request.query.xxx}}</code></td><td>è·å– URL å‚æ•°</td><td><code>{{request.query.page}}</code></td></tr><tr><td><code>{{request.body.xxx}}</code></td><td>è·å–è¯·æ±‚ä½“å­—æ®µ</td><td><code>{{request.body.userId}}</code></td></tr><tr><td><code>{{request.headers.xxx}}</code></td><td>è·å–è¯·æ±‚å¤´</td><td><code>{{request.headers.token}}</code></td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"requestId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{uuid()}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{Date.now()}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{request.body.userId}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"page"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{{request.query.page}}"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-24">å¿«é€Ÿå¼€å§‹</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®‰è£…</span>
npm install <span class="hljs-meta">@zz</span>-common/ai_mock

<span class="hljs-comment">// 2. åˆå§‹åŒ–</span>
<span class="hljs-keyword">import</span> { mockInit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zz-common/ai_mock'</span>

<span class="hljs-title function_">mockInit</span>({
  <span class="hljs-attr">rules</span>: [<span class="hljs-string">'api.example.com'</span>],      <span class="hljs-comment">// æ‹¦æˆªçš„åŸŸå</span>
  <span class="hljs-attr">excludeRules</span>: [<span class="hljs-regexp">/static/</span>, <span class="hljs-regexp">/cdn/</span>]  <span class="hljs-comment">// æ’é™¤çš„èµ„æº</span>
})
</code></pre>
<h2 data-id="heading-25">æ¨èå·¥ä½œæµ</h2>
<p>ä¸‹é¢æ¼”ç¤ºä»è¯·æ±‚é‡‡é›†åˆ° AI ç”Ÿæˆ Mock æ•°æ®çš„å®Œæ•´æµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412918b4575440488ee46ab82d54fb31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770863944&amp;x-signature=%2BY5Ha6UIl1%2Bn86hwo0z%2B0DpXwjY%3D" alt="24182e81-01bc-11f1-83a0-e2f0e015208e.gif" loading="lazy"/></p>
<ol>
<li><strong>æ¥å…¥ npm åŒ…</strong>ï¼šåœ¨éç”Ÿäº§ç¯å¢ƒå¯ç”¨æ‹¦æˆª</li>
<li><strong>ä»çœŸå®è¯·æ±‚åˆ›å»º Mock</strong>ï¼šæ‰“å¼€é¢æ¿ï¼Œç‚¹å‡»è¯·æ±‚æ—¥å¿—çš„"åˆ›å»ºæœŸæœ›"</li>
<li><strong>é…ç½®å‚æ•°æ¡ä»¶</strong>ï¼šåŒä¸€æ¥å£ä¸åŒå‚æ•°è¿”å›ä¸åŒæ•°æ®</li>
<li><strong>AI ç”Ÿæˆè¡¥å……</strong>ï¼šç”¨ AI ç”Ÿæˆç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„æ•°æ®</li>
<li><strong>å›¢é˜Ÿå…±äº«</strong>ï¼šå°†ç¨³å®šçš„æµ‹è¯•æ•°æ®æ¨é€åˆ°å›¢é˜Ÿå…±äº«</li>
</ol>
<hr/>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»çš„ Mock å·¥å…·è§£å†³äº†å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>

























<table><thead><tr><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¯·æ±‚æ‹¦æˆª</td><td>Monkey Patch é‡å†™ XHR/Fetchï¼Œé€šè¿‡ WeakMap é˜²é€’å½’</td></tr><tr><td>è§„åˆ™åŒ¹é…</td><td>æ”¯æŒ 5 ç§å‚æ•°ä½ç½® Ã— 8 ç§æ“ä½œç¬¦ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</td></tr><tr><td>æ•°æ®è´¨é‡</td><td>AI æ ¹æ®æ¥å£æ–‡æ¡£çš„ descriptionã€å­—æ®µåè¯­ä¹‰ç”Ÿæˆæ•°æ®</td></tr><tr><td>å›¢é˜Ÿå…±äº«</td><td>ä¸‰å±‚ä½œç”¨åŸŸï¼Œæœ¬åœ°ç»´æŠ¤å¯ç”¨çŠ¶æ€å’Œä¼˜å…ˆçº§</td></tr></tbody></table>
<p>ç›®å‰è¿™å¥—å·¥å…·å·²åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œå¯ä»¥å‡å°‘è”è°ƒé˜»å¡ã€æé«˜åœºæ™¯è¦†ç›–ç‡ã€‚</p>
<h2 data-id="heading-27">æœªæ¥è§„åˆ’</h2>
<ul>
<li><strong>æµé‡å½•åˆ¶å›æ”¾</strong>ï¼šåŸºäºçœŸå®æµé‡ç”Ÿæˆ Mock æ•°æ®ï¼Œæ•°æ®æ›´è´´è¿‘çº¿ä¸Šåœºæ™¯</li>
<li><strong>AIç”Ÿæˆæ•°æ®æ—¶åŸºäºçœŸå®æ•°æ®</strong>ï¼šè¿›ä¸€æ­¥æå‡AIç”Ÿæˆæ•°æ®è´¨é‡ è´´è¿‘çœŸå®ä¸šåŠ¡åœºæ™¯</li>
<li><strong>ç§»åŠ¨ç«¯æ”¯æŒ</strong>ï¼šçœŸæœºç¯å¢ƒä¸‹é…åˆ PC ç«¯ä½¿ç”¨ Mock æ•°æ®éªŒè¯</li>
<li><strong>è§„åˆ™æ¨è</strong>ï¼šåŸºäºå†å²è¯·æ±‚ï¼Œè‡ªåŠ¨æ¨èå¯èƒ½éœ€è¦çš„ Mock åœºæ™¯</li>
</ul>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚ å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘]]></title>    <link>https://juejin.cn/post/7603142147642196011</link>    <guid>https://juejin.cn/post/7603142147642196011</guid>    <pubDate>2026-02-05T07:58:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603142147642196011" data-draft-id="7603030564837392438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-05T07:58:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ«æƒ¹CC"/> <meta itemprop="url" content="https://juejin.cn/user/4095037267779687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows ä¹Ÿèƒ½è·‘ OpenClawï¼æœ€å®Œæ•´å®‰è£…æ•™ç¨‹ + é£ä¹¦æ¥å…¥ï¼Œå…¨ç¨‹é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4095037267779687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ«æƒ¹CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T07:58:42.000Z" title="Thu Feb 05 2026 07:58:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    22
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>âš ï¸ å°è´´å£«ï¼šåœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æé†’ï¼šç”±äºæ­¤ç±»å·¥å…·æ¶‰åŠè‡ªåŠ¨åŒ–æ“ä½œå’Œç¯å¢ƒé…ç½®ï¼Œå¦‚æœä½ çš„ç”µè„‘å­˜æœ‰é‡è¦çš„å•†ä¸š/èµ„äº§æˆ–ä¸ªäººéšç§ä¿¡æ¯ï¼Œ<strong>å¼ºçƒˆå»ºè®®å¼„ä¸€å°å¹²å‡€çš„å¤‡ç”¨è®¾å¤‡ï¼Œæˆ–è€…ç›´æ¥ç§Ÿç”¨ä¸€ä¸ªäº‘ç«¯è™šæ‹Ÿæœºï¼ˆVPSï¼‰æ¥è¿è¡Œã€‚</strong> è¿™æ ·æ—¢èƒ½ä¿æŠ¤éšç§ï¼Œä¹Ÿèƒ½é¿å…ç¯å¢ƒå†²çªã€‚</p>
</blockquote>
<p>æœ€è¿‘ <strong>OpenClaw</strong> çƒ­åº¦å¾ˆé«˜ï¼Œä½†å®˜æ–¹å¯¹ <strong>Windows åŸç”Ÿç¯å¢ƒ</strong>å¹¶ä¸ç®—å‹å¥½ï¼Œå¾ˆå¤šäººä¼šå¡åœ¨ Node ç¯å¢ƒã€æƒé™ã€è·¯å¾„ã€æ’ä»¶å®‰è£…ç­‰é—®é¢˜ä¸Šã€‚ä¸‹é¢æˆ‘æŠŠè‡ªå·±å®Œæ•´è·‘é€šçš„æµç¨‹æ•´ç†æˆä¸€ç¯‡â€œç…§åšå°±èƒ½æˆâ€çš„æ•™ç¨‹ï¼šä»ç¯å¢ƒå‡†å¤‡ â†’ OpenClaw å®‰è£… â†’ åˆå§‹åŒ–é…ç½® â†’ <strong>æ¥å…¥é£ä¹¦æœºå™¨äºº</strong>ï¼Œæœ€åå†è¡¥ä¸€ä»½å¸¸ç”¨æ’é”™å‘½ä»¤ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-1">1ï¼‰å®‰è£… nvm for Windowsï¼ˆå»ºè®®ç”¨æœ€æ–°ç‰ˆï¼‰</h3>
<p><strong>Windows ç”¨æˆ·</strong> åˆ° GitHub Releases ä¸‹è½½ <code>nvm-setup.exe</code>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoreybutler%2Fnvm-windows%2Freleases" target="_blank" title="https://github.com/coreybutler/nvm-windows/releases" ref="nofollow noopener noreferrer">github.com/coreybutlerâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37bc339dcc8c43cb9bb38a0668f7fcaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Q6lBtDlUjyc3vQNc1NP0QO8ayqo%3D" alt="1.png" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸€è·¯ Next å³å¯ã€‚å®‰è£…æˆåŠŸåå»ºè®®ä½ ç”¨ <strong>ç®¡ç†å‘˜æƒé™</strong>æ‰“å¼€ PowerShellï¼š</p>
<ul>
<li>æŒ‰ <strong>Win é”® + S</strong></li>
<li>æœç´¢ <strong>PowerShell</strong></li>
<li>é¼ æ ‡å³é”® â†’ <strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18d05ee8ba88475bb627d4c764fcfb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=i4b8aliQj5Ut7P9bamHVH9HGBKY%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-2">2ï¼‰å®‰è£… node.js 22.22.0 ç‰ˆæœ¬</h3>
<p>æŒ‰ç…§é¡ºåºåˆ†åˆ«åœ¨ <code>powershell</code> ä¸­è¿è¡Œä¸‹åˆ—æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å®‰è£…æŒ‡ä»¤
nvm install 22

# ä½¿ç”¨æŒ‡ä»¤
nvm use 22.22.0
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a96291aab9274019af9d0cd804cae559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=miqHTIbR1V5uVKInOeujWdNNeBc%3D" alt="3.png" loading="lazy"/></p>
<p>æˆåŠŸåä¼šçœ‹åˆ°ç±»ä¼¼æç¤ºï¼š<code>Now using node v22.22.0</code></p>
<blockquote>
<p>å¦‚æœä½ ä»ç„¶ä¸‹è½½å¤±è´¥ï¼Œæˆ–è€…å…¬å¸ç½‘ç»œæ‹¦æˆªäº†ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a></p>
</blockquote>
<h2 data-id="heading-3">äºŒã€å®‰è£… + é…ç½® OpenClaw</h2>
<h3 data-id="heading-4">1ï¼‰ä¸€é”®å®‰è£…ï¼ˆPowerShellï¼‰</h3>
<p>åœ¨ <strong>ç®¡ç†å‘˜ PowerShell</strong> ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p>å¦‚æœé‡åˆ°æ‰§è¡Œç­–ç•¥æŠ¥é”™ï¼ˆå¸¸è§äºé¦–æ¬¡è¿è¡Œè„šæœ¬ï¼‰ï¼Œåœ¨ PowerShell è¾“å…¥ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1e1a8aa13404874aa31b1b8a71fcaec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=jxvG0Nzfj14RiqxsCL%2FCNgaVczE%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-5">2ï¼‰åˆå§‹åŒ–é…ç½®</h3>
<p>å®‰è£…å®Œæˆåé€šå¸¸ä¼šè‡ªåŠ¨è¿›å…¥é…ç½®æµç¨‹ã€‚
å¦‚æœä½ ä¸å°å¿ƒå…³é—­äº† PowerShellï¼Œé‡æ–°æ‰“å¼€åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw onboard --flow quickstart
</code></pre>
<p>ç¬¬ä¸€ä¸ªé£é™©æç¤ºï¼š</p>
<blockquote>
<p>I understand this is powerful and inherently risky. Continue?</p>
</blockquote>
<p>é€‰æ‹© <strong>Yes</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb74ec6a75441f7b11b96f96ba4dfc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=JWjuEX4E9xKQX9nSm1Iw85pT1mE%3D" alt="5.png" loading="lazy"/></p>
<p>å¦‚æœæœ‰å°ä¼™ä¼´é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼šç³»ç»Ÿä¸çŸ¥é“å®ƒè¢«å®‰è£…åœ¨å“ªé‡Œäº†ã€‚å¤„ç†æ–¹å¼é€šå¸¸å¾ˆç®€å•ï¼š</p>
<blockquote>
<ul>
<li><strong>å…³é—­å½“å‰ PowerShell</strong></li>
<li><strong>é‡æ–°ç”¨ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ PowerShell</strong></li>
<li>ä¸€èˆ¬ <code>nvm</code>/ç¯å¢ƒå˜é‡ä¼šè‡ªåŠ¨åˆ·æ–°è·¯å¾„ï¼Œé—®é¢˜å³å¯æ¶ˆå¤±</li>
</ul>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49925214147e446f90a6c7c403e07ce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=mG9Z1GH9drEfOgIk%2BylLL5eyrQg%3D" alt="7.png" loading="lazy"/></p>
<p>ä¹‹åæŒ‰æç¤ºé€‰æ‹©æ¨¡å‹ã€‚æˆ‘è¿™é‡Œç¤ºä¾‹ç”¨çš„æ˜¯ <strong>Kimi</strong>ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰è‡ªå·±ä¹ æƒ¯é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/605f91a9d9924256a68a83d883dff7ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=qhnQ3Ebjxwgeh9NLaZba970L06I%3D" alt="8.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹ä¸‹é…ç½®ï¼Œä¸»è¦è¾“å…¥API  keyï¼Œå…¶ä»–éƒ½å¯ä»¥é»˜è®¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e19602e5230742e284b0e69ad4c0d020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=woNnCQLgHmdWa1v3un6lrm55idQ%3D" alt="9.png" loading="lazy"/></p>
<p>æ¥ç€é…ç½®é€šè®¯å·¥å…·ï¼Œè™½ç„¶å®˜æ–¹è¿™é‡Œç›´æ¥å¯ä»¥é€‰é£ä¹¦ï¼Œä½†å®˜æ–¹æ–‡æ¡£æ˜ç¡®å»ºè®® <strong>Windows é€šè¿‡ WSL2 è¿è¡Œ</strong>ï¼Œå¹¶ä¸”æåˆ°åŸç”Ÿ Windows æœªæµ‹è¯•ã€æ›´å®¹æ˜“å‡ºé—®é¢˜ã€‚å¹¶ä¸”æˆ‘å®æµ‹è¿™é‡Œä¸‹è½½æ’ä»¶ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå…ˆè·³è¿‡ï¼Œåç»­å†å®‰è£…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a7ad10229ca4b329d81bb6adb4e9b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=VmZC7Vc98cRaRz9Y%2BsYGUVMQWz8%3D" alt="11.png" loading="lazy"/></p>
<p>skillä¹Ÿå…ˆè·³è¿‡ï¼Œåç»­å’±ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ ¹æ®è‡ªå·±çš„å·¥ä½œæµæ…¢æ…¢è¿­ä»£è‡ªå·±çš„skillã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc4331d063754f92ad641c657cda633d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Smb9vF5H%2FuegUnNoMVlTFBDJOQQ%3D" alt="12.png" loading="lazy"/></p>
<p>å®‰è£…å¯åŠ¨ç½‘å…³åï¼Œå®ƒä¼šè‡ªåŠ¨æ–°å¼€ä¸€ä¸ª PowerShell çª—å£ï¼Œéƒ½ä¸è¦å…³é—­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbbe48a09c064117aad539748ad8c130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=hRn3BIKJDywlhdls%2BdHN26JvW6g%3D" alt="13.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06d6a5211dc4b3baecb867c7e7b0360~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=iWEbZmPwuv%2BAkf33zm5GuFKAo50%3D" alt="14.png" loading="lazy"/></p>
<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æ§åˆ¶å°ã€‚åç»­ä½ ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A18789%2F" target="_blank" title="http://127.0.0.1:18789/" ref="nofollow noopener noreferrer">http://127.0.0.1:18789/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b29ea936ddc1486eae25ec47ccaba6b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=sqiLd8A7OEiiSpl7YI9b7tc6nww%3D" alt="15.png" loading="lazy"/></p>
<p>å‘æ¶ˆæ¯æµ‹è¯•ï¼Œæœ‰å›å¤å°±è¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3db6be653243069073215c181f80e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=52tYS8iTN23Rl5eqr0cPXzf2jWo%3D" alt="16.png" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸‰ã€é…ç½®è¿æ¥é£ä¹¦</h2>
<p>æ•´ä½“æ€è·¯æ˜¯ä¸¤æ­¥ï¼š</p>
<ol>
<li>åœ¨ OpenClaw é‡Œå®‰è£…é£ä¹¦æ’ä»¶</li>
<li>åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨ â†’ é…æƒé™/äº‹ä»¶ â†’ å‘å¸ƒç‰ˆæœ¬ â†’ å›åˆ° OpenClaw å¡« AppID/Secret</li>
</ol>
<h3 data-id="heading-7">1ï¼‰å®‰è£…é£ä¹¦æ’ä»¶</h3>
<p>ä½ å¯ä»¥åœ¨æ§åˆ¶å°é‡Œè®©å®ƒå¸®ä½ æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92eb563ef66046f99663e0b783cf7dc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=Y2drbEqAL4eNsL%2FaQ7RoWQITTq4%3D" alt="17.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8655dae9cb7d4f6a824d7afa1b40c46f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=WN%2Bp7RB%2FoZ3j%2BcZ1bLW3zjhMoAU%3D" alt="18.png" loading="lazy"/></p>
<blockquote>
<p>æ’ä»¶å®‰è£…å¯èƒ½è¦ç­‰ä¸€ä¼šå„¿ï¼Œè¿™æ®µæ—¶é—´ä½ å¯ä»¥å»é£ä¹¦å¼€æ”¾å¹³å°æŠŠåº”ç”¨å…ˆå»ºå¥½ã€‚</p>
</blockquote>
<h3 data-id="heading-8">2ï¼‰é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨</h3>
<p>è¿›å…¥é£ä¹¦å¼€æ”¾å¹³å°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2F%25EF%25BC%258C%25E5%2588%259B%25E5%25BB%25BA%25E4%25B8%2580%25E4%25B8%25AA%25E5%25BA%2594%25E7%2594%25A8%25EF%25BC%258C%25E5%25B9%25B6%25E6%25B7%25BB%25E5%258A%25A0%25E6%259C%25BA%25E5%2599%25A8%25E4%25BA%25BA%25E5%25BA%2594%25E7%2594%25A8%25E8%2583%25BD%25E5%258A%259B%25E3%2580%2582" target="_blank" title="https://open.feishu.cn/%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%EF%BC%8C%E5%B9%B6%E6%B7%BB%E5%8A%A0%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%BA%94%E7%94%A8%E8%83%BD%E5%8A%9B%E3%80%82" ref="nofollow noopener noreferrer">open.feishu.cn/ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶æ·»åŠ â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de92703fe3854d6a991f5d24628f0a3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=wXtD2oSWiRIX9%2BwDE7voeBctYME%3D" alt="19.png" loading="lazy"/></p>
<p>ç„¶åæŠŠ <strong>App ID</strong> å’Œ <strong>App Secret</strong> å¤åˆ¶å‡ºæ¥å¤‡ç”¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/960d82e1c33546959f087c49364cf475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=mRcf6dEw9jLlmAivmUhYkYSulyM%3D" alt="20.png" loading="lazy"/></p>
<p>æŠŠè¿™ä¸¤é¡¹æä¾›ç»™ OpenClaw ï¼Œè®©å®ƒå®Œæˆé…ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30220fa6129047eba58d3c062163064e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=GVYpUb8XqyFrcl3AaJHIImGZs8k%3D" alt="20-1.png" loading="lazy"/></p>
<h3 data-id="heading-9">3ï¼‰æ‰¹é‡å¯¼å…¥æƒé™</h3>
<p>è¿›å…¥ <strong>æƒé™ç®¡ç†</strong> â†’ æ‰¾åˆ°ã€Œæ‰¹é‡å¯¼å…¥å¯¼å‡ºæƒé™ã€â†’ æƒé™é…ç½® JSON â†’ ç²˜è´´å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scopes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tenant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application.app_message_stats.overview:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:application:self_manage"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"application:bot.menu:write"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"contact:user.employee_id:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"corehr:file:download"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"event:ip_list"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:chat.members:bot_access"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.group_at_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message.p2p_msg:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:readonly"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:message:send_as_bot"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"im:resource"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"aily:file:read"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"aily:file:write"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"im:chat.access_event.bot_p2p_chat:read"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯¼å…¥å®Œæˆåç‚¹å‡»ã€Œç¡®è®¤æ–°å¢æƒé™ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb41ddaca6dc48fda9561c0ca1a96072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=rszLgU3oPMIKwRJ9moLAs6ISxWE%3D" alt="21.png" loading="lazy"/></p>
<h3 data-id="heading-10">4ï¼‰äº‹ä»¶è®¢é˜…</h3>
<p>è¿›å…¥ã€Œäº‹ä»¶ä¸å›è°ƒã€é¡µé¢ï¼š</p>
<ul>
<li>ã€Œäº‹ä»¶é…ç½®ã€â†’ã€Œè®¢é˜…æ–¹å¼ã€</li>
<li>é€‰æ‹©ï¼š<strong>ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶</strong></li>
<li>ä¿å­˜</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a900916b4654ffeb7ece91fae52d655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=ESwmYT4KwMLq15pbt4NaInJTdSQ%3D" alt="22.png" loading="lazy"/></p>
<blockquote>
<p>å¦‚æœæç¤ºâ€œæ²¡æœ‰å»ºç«‹é•¿è¿æ¥â€ï¼š</p>
<ul>
<li>å…ˆåˆ«æ…Œï¼Œé€šå¸¸ç­‰ 1ï½2 åˆ†é’Ÿå†ç‚¹ä¿å­˜å°±å¥½</li>
<li>å¦‚æœç­‰å¾ˆä¹…ä»ä¸è¡Œï¼Œä¼˜å…ˆæ£€æŸ¥ <strong>OpenClaw ç½‘å…³æ˜¯å¦æ­£å¸¸è¿è¡Œ</strong>ï¼Œå¹¶æŸ¥çœ‹æ—¥å¿—ï¼ˆä¸‹é¢ç¬¬å››éƒ¨åˆ†ç»™äº†å‘½ä»¤ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-11">5ï¼‰æ·»åŠ æ¥æ”¶æ¶ˆæ¯äº‹ä»¶</h3>
<p>åœ¨ã€Œäº‹ä»¶é…ç½®ã€é¡µé¢ç‚¹å‡»ã€Œæ·»åŠ äº‹ä»¶ã€ï¼Œæœç´¢å¹¶æ·»åŠ ï¼š</p>
<ul>
<li><code>im.message.receive_v1</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfc212bebfeb4ddfa56522801cfd0234~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=GlZfyEQLruArpBwJzJJunFMB29I%3D" alt="23.png" loading="lazy"/></p>
<blockquote>
<p>ä¸æ·»åŠ è¿™ä¸ªäº‹ä»¶ï¼Œæœºå™¨äººå°±æ— æ³•æ”¶åˆ°ä½ çš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-12">6ï¼‰å‘å¸ƒç‰ˆæœ¬</h3>
<p>è¿›å…¥ã€Œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€ï¼š</p>
<ul>
<li>åˆ›å»ºç‰ˆæœ¬</li>
<li>å‘å¸ƒ</li>
</ul>
<p>åªæœ‰å‘å¸ƒåï¼Œå‰é¢çš„é…ç½®æ‰ä¼šçœŸæ­£ç”Ÿæ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51bbee8f79aa438cba32668d7326cae5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=xmQmSlkFAVX2ti2ftOgm8q5510M%3D" alt="24.png" loading="lazy"/></p>
<p>ç„¶ååœ¨é£ä¹¦é‡Œæ‰¾åˆ°ä½ åˆšåˆ›å»ºçš„æœºå™¨äººï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå®ƒä¼šè‡ªåŠ¨å›å¤ä¸€ä¸ªé…å¯¹ç </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f7e0fa260f5419587638caa4a680261~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=4DI2yL%2FuZVyJXpFKuXMlqea5hyw%3D" alt="25.png" loading="lazy"/></p>
<p>å¤åˆ¶è¿™ä¸ªé…å¯¹ç ï¼Œæ‰“å¼€ Clawdbot çš„ Web UIï¼ˆå°±æ˜¯å‰é¢é‚£ä¸ªæ§åˆ¶å°ï¼‰ï¼ŒæŠŠé…å¯¹ç å‘ç»™å®ƒï¼ŒClawdbot ä¼šè‡ªåŠ¨å®Œæˆç»‘å®šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f2177ca181c4b889deb7aab211272fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=%2BR0zUdiDGZQabkLfPvoODt72hfE%3D" alt="26.png" loading="lazy"/></p>
<p>ç»‘å®šæˆåŠŸåï¼Œä½ å°±å¯ä»¥åœ¨é£ä¹¦é‡Œè·Ÿ Clawdbot æ„‰å¿«äº¤æµäº†ï¼Œä¹Ÿå¯ä»¥æŠŠæœºå™¨äººæ‹‰åˆ°å…¬å¸ç¾¤é‡Œï¼Œè®©æ‰€æœ‰å°ä¼™ä¼´éƒ½èƒ½ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/633ab41e53e347918d013af6c3c54c40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yir5oO5Q0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770884825&amp;x-signature=oyyf1ayhQNPbpBWC1ZbSW0tN1gU%3D" alt="27.png" loading="lazy"/></p>
<h2 data-id="heading-13">å››ã€å¸¸ç”¨å‘½ä»¤ï¼ˆæ’æŸ¥/ä¿®å¤å¿…å¤‡ï¼‰</h2>
<p>ä¸‹é¢è¿™äº›å‘½ä»¤éå¸¸å®ç”¨ï¼šé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å¡æ­»ã€æ’ä»¶å¼‚å¸¸ã€ç½‘å…³æ²¡èµ·ç­‰é—®é¢˜ï¼Œä¼˜å…ˆç”¨å®ƒä»¬è‡ªæŸ¥ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell"># å¯åŠ¨ç½‘å…³
openclaw gateway start

# é‡å¯ç½‘å…³ï¼ˆåˆ·æ–°æœºå™¨äººçŠ¶æ€ï¼‰
openclaw gateway restart

# é‡ç½®/æ›´æ”¹ API ç­‰é…ç½®
openclaw config

# è¯Šæ–­æ£€æŸ¥
openclaw doctor

# å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆå¼ºçƒˆæ¨èï¼šå‡º bug åŸºæœ¬éƒ½é å®ƒå®šä½ï¼‰
openclaw logs follow
</code></pre>
<p>å¥½äº†ï¼Œè¿™å°±æ˜¯æ•´ä¸ªå®‰è£…å’Œé…ç½®æµç¨‹ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥å¸®æˆ‘ç‚¹ä¸ªèµğŸ‘ï¼Œä¹Ÿå¯ä»¥è½¬å‘ç»™å…¶ä»–ä½ è§‰å¾—éœ€è¦çš„æœ‹å‹ä»¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘]]></title>    <link>https://juejin.cn/post/7602800677712019490</link>    <guid>https://juejin.cn/post/7602800677712019490</guid>    <pubDate>2026-02-05T00:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602800677712019490" data-draft-id="7602800677712003106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-05T00:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±05ï¼šå·¥å…·è°ƒç”¨ Function Callingã€çŸ¥è¯†ä¸æ€è·¯ç¯‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:14:48.000Z" title="Thu Feb 05 2026 00:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><p>LLM é—®ä¸–ä¹‹åï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œäººä»¬å‘ç°äº†å¾ˆå¤šç”¨ä¾‹å¯ä»¥è¯æ˜ï¼š</p>
<blockquote>
<p>AIä¸è¡Œå•Šï¼Œä¸æ˜¯äººå·¥æ™ºèƒ½ï¼Œè€Œæ˜¯äººå·¥æ™ºéšœã€‚</p>
</blockquote>
<p>æ¯”æ–¹è¯´ï¼Œæœ€ç»å…¸çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š</p>
<pre><code class="hljs">7.11 å’Œ 7.9 å“ªä¸ªæ•°å­—æ›´å¤§ï¼Ÿ
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201161528631.png" alt="" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹æˆ‘ä»¬ç¬¬ä¸€èŠ‚è¯¾ã€æ˜¥å“¥çš„Agenté€šå…³ç§˜ç±02ï¼šæ­å»ºç¯å¢ƒåŠè¯­è¨€é€‰æ‹©ã€‘é‡Œçš„ <code>check_env.py</code>ä»£ç ï¼Œé—®AIï¼š"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p><code>deepseek</code> ä¼šè‡ªä¿¡åœ°å›ç­”ä½ ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161737903.png" alt="" loading="lazy"/></p>
<p>æ—©æœŸçš„AIå¯¹äºè¿™æ ·çš„ç”¨ä¾‹æ¯«æ— é˜²å¤‡ï¼Œé—¹äº†å¾ˆå¤šç¬‘è¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨Agentæ—¶ä»£ï¼Œè¿™äº›æ ¹æœ¬ä¸æ˜¯é—®é¢˜ï¼Œä½ å¯ä»¥ç¨³å®šè§£å†³æ‰€æœ‰åŠ å‡ä¹˜é™¤ï¼Œå¯ä»¥å‡†ç¡®æ¯”è¾ƒå¤§å°ï¼Œå¯ä»¥çŸ¥é“ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ã€‚</p>
<p>æ¯”å¦‚ï¼Œæ— è®ºä½ å»deepseekå®˜ç½‘ï¼Œæˆ–è€…æ˜¯è±†åŒ…ï¼Œæé—®"ä»Šå¤©æ˜¯å‡ æœˆå‡ æ—¥ï¼Ÿ"</p>
<p>éƒ½èƒ½å¾—åˆ°å‡†ç¡®è€Œæ­£ç¡®çš„å›ç­”ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201161852635.png" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºå®˜ç½‘å’ŒAPPéƒ½åˆ©ç”¨äº†æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼šFunction Callingã€‚</p>
<p><strong>å·¥å…·è°ƒç”¨</strong>ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Function Callçš„å†å²åŠç°çŠ¶</h2>
<p>ä¸ºäº†è§£å†³æ—©æœŸå¤§è¯­è¨€æ¨¡å‹æ— æ³•åšç²¾ç»†æ´»å„¿ï¼Œæ— æ³•åº”å¯¹å‡†ç¡®è®¡ç®—å’Œå®æ—¶ä¿¡æ¯è·å–çš„é—®é¢˜ã€‚</p>
<p>2023å¹´6æœˆ13æ—¥ ï¼Œ<code>OPENAI</code> åœ¨å‘å¸ƒ gpt-4-0613 å’Œ gpt-3.5-turbo-0613 ç‰ˆæœ¬æ—¶ï¼Œæ¨å‡ºäº†ä¸€é¡¹è½°åŠ¨ä¸–ç•Œçš„è®¾è®¡å’Œèƒ½åŠ›ï¼š</p>
<p><strong>Function Calling</strong>ã€‚</p>
<h3 data-id="heading-1">å‘å¸ƒè¿™ä¸ªåŠŸèƒ½ä¹‹å‰</h3>
<p>å¼€å‘è€…ï¼ˆåŒ…æ‹¬æ—©æœŸçš„ LangChain ç”¨æˆ·ï¼‰æƒ³è¦è®© AI è°ƒç”¨å·¥å…·ï¼Œå¿…é¡»ä½¿ç”¨ ReAct æ¨¡å¼ã€‚</p>
<p>åšæ³•ï¼šä½ åœ¨ System Prompt é‡Œå†™ä¸€å¤§æ®µè¯ï¼šâ€œä½ æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨å·¥å…·çš„ AIã€‚å¦‚æœä½ æƒ³ç”¨è®¡ç®—å™¨ï¼Œè¯·è¾“å‡º Action: Calculator, Input: 1+1ã€‚â€</p>
<p>ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¸ç¨³å®šï¼šAI ç»å¸¸å¿˜äº†æ ¼å¼ï¼Œæˆ–è€…å¤šæ‰“äº†ä¸ªæ ‡ç‚¹ç¬¦å·ã€‚</p>
</li>
<li>
<p>è§£æéš¾ï¼šå¼€å‘è€…å¿…é¡»å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰å»æŠ“å– AI çš„å›å¤ã€‚</p>
</li>
<li>
<p>Token æµªè´¹ï¼šä½ éœ€è¦æŠŠå·¥å…·çš„æè¿°å†™åœ¨ Prompt é‡Œï¼Œå ç”¨å¤§é‡ä¸Šä¸‹æ–‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">OpenAIçš„åˆ›æ–°</h3>
<p>OpenAI å—Metaçš„Toolformerå¯å‘ï¼Œé€šè¿‡å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Œè®©æ¨¡å‹åœ¨åº•å±‚â€œåŸç”Ÿâ€æ”¯æŒäº†è°ƒç”¨å¤–éƒ¨å·¥å…·çš„èƒ½åŠ›ã€‚</p>
<p>ä½ ä¸å†éœ€è¦åœ¨ Prompt é‡Œæ±‚ AI â€œè¯·æŒ‰æ ¼å¼è¾“å‡ºâ€ã€‚ä½ åªéœ€è¦æŠŠ JSON Schema ä¼ ç»™ APIï¼Œæ¨¡å‹å°±èƒ½æåº¦ç¨³å®šåœ°è¾“å‡ºç»“æ„åŒ–çš„ JSON è°ƒç”¨æŒ‡ä»¤ã€‚</p>
<p>å¯ä»¥è¯´ï¼š<strong>Function Calling æ˜¯ OpenAI å°†â€œå­¦æœ¯ç•Œçš„ Tool Learningâ€è½¬åŒ–ä¸ºâ€œå·¥ä¸šçº§ API æ ‡å‡†â€çš„äº§ç‰©ã€‚</strong></p>
<p>å®ƒæ ‡å¿—ç€ AI Agent å¼€å‘ä»â€œæ‰‹æ“ Prompt çš„é»‘å®¢æ—¶ä»£â€è¿›å…¥äº†â€œæ ‡å‡†åŒ–å·¥ç¨‹å¼€å‘æ—¶ä»£â€ã€‚ç°åœ¨ï¼ŒAnthropic (Claude)ã€Google (Gemini)ã€DeepSeek ç­‰ä¸»æµæ¨¡å‹å‚å•†éƒ½è·Ÿéšå¹¶æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚</p>
<h2 data-id="heading-3">äºŒã€Function Calling åŸºæœ¬æµç¨‹</h2>
<p>æˆ‘ç”»äº†ä¸€å¼ å›¾ï¼Œç»™å¤§å®¶è§£é‡Šå½“ç”¨æˆ·è¾“å…¥â€œåŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•â€ä¹‹åï¼Œæ•´ä¸ªçš„æ¶æ„æµè½¬ï¼š</p>
<p><img src="https://pic.zhangshichun.top/pic/20260201203345449.png" alt="" loading="lazy"/></p>
<p>ä½ ä¼šå‘ç°ä¸€ä¸ªé‡è¦çš„å®šå¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LLM å¯¹äº Agent è€Œè¨€ï¼Œå…¶å®æ˜¯æ— çŠ¶æ€çš„ã€‚

å½“AgentæœLLMå‘èµ·ä¼šè¯æ—¶ï¼Œéœ€è¦æ¯æ¬¡éƒ½æºå¸¦å†å²è®°å½•ï¼Œä»¥å®Œæˆå¤šè½®ä¼šè¯ã€‚

æ¯æ¬¡éƒ½éœ€è¦æºå¸¦æ³¨å†Œåˆ°agentä¸­çš„<span class="hljs-keyword">function</span>åˆ—è¡¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦å†™ä»£<span class="hljs-keyword">system</span> promptã€‚
</code></pre>
<p><img src="https://pic.zhangshichun.top/pic/20260201204006127.png" alt="" loading="lazy"/></p>
<blockquote>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç”µå½±ã€Šåˆæ‹50æ¬¡ã€‹é‡Œçš„å¥³ä¸»è§’ï¼Œæˆ–è€…æ˜¯ä¸€æ¡åªæœ‰ 7 ç§’è®°å¿†çš„é‡‘é±¼ã€‚ æ— è®ºä½ ä»¬ä¹‹å‰èŠå¾—å¤šä¹ˆçƒ­ç«æœå¤©ï¼Œå½“ä½ å‘èµ·çš„ HTTP è¯·æ±‚ç»“æŸé‚£ä¸€åˆ»ï¼Œå®ƒå°±æŠŠä½ å½»åº•å¿˜äº†ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¿™å¸¦æ¥äº†ä¸‰ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…é—®é¢˜ï¼š</p>
<ol>
<li>äººè®¾è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡äººè®¾ï¼Œä¸ç„¶LLMå°±ä¼šä¸çŸ¥é“è¯¥ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>æŠ€èƒ½æ ‘è´Ÿæ‹…
<ul>
<li>æ¯æ¬¡ä¼šè¯éƒ½è¦é‡æ–°å£°æ˜ä¸€æ¬¡æ‰€æœ‰Agentæ‹¥æœ‰çš„å…¨æŠ€èƒ½Json Schemaï¼Œè¿™ä¼šå ç”¨å·¨å¤§çš„Tokenã€‚</li>
</ul>
</li>
<li>è®°å¿†è´Ÿæ‹…
<ul>
<li>éšç€å¯¹è¯è¿›è¡Œï¼Œmessages åˆ—è¡¨ä¼šè¶Šæ¥è¶Šé•¿ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™ä¼šå¯¼è‡´ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>è´¹é’±ï¼šLLM æ˜¯æŒ‰ Input Token æ”¶è´¹çš„ã€‚ç¬¬ 1 å¥çš„å†å²ï¼Œåœ¨ç¬¬ 100 è½®å¯¹è¯æ—¶è¢«é‡å¤è®¡è´¹äº† 100 æ¬¡ã€‚</li>
<li>å˜æ…¢ï¼šå¤„ç†çš„æ–‡å­—è¶Šå¤šï¼Œé¦–å­—å»¶è¿Ÿï¼ˆTTFTï¼‰è¶Šé«˜ã€‚</li>
<li>æº¢å‡ºï¼šä¸€æ—¦è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡ä¸Šé™ï¼ˆæ¯”å¦‚ 32k æˆ– 128kï¼‰ï¼Œæ¨¡å‹å°±ä¼šæŠ¥é”™æˆ–å¼ºåˆ¶æˆªæ–­ï¼Œå¯¼è‡´â€œå¤±å¿†â€ã€‚</li>
<li>å˜è ¢ï¼šä¸€æ—¦tokenè¿‡é•¿ï¼ŒLLMåœ¨å·¨å¤§çš„tokené‡Œå…³äºä¼šè¯é‡Œçš„å…³é”®ä¿¡æ¯çš„æ³¨æ„åŠ›ä¼šè¢«ç¨€é‡Šã€‚</li>
</ul>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ‰€æœ‰Agentå¼€å‘å¿…é¡»é¢å¯¹çš„ã€‚è¿™é‡Œä¸è¿‡å¤šå±•å¼€äº†ï¼Œå…ˆæä¸€ä¸‹ã€‚</p>
<p><img src="https://pic.zhangshichun.top/pic/20260202181054274.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ä¸‰ã€å·¥å…·å®šä¹‰ä¸æ³¨å†Œ</h2>
<p>åœ¨è®©AIçŸ¥é“åº”è¯¥åœ¨ä½•æ—¶è°ƒç”¨å·¥å…·çš„ç¬¬ä¸€æ­¥ï¼Œç›¸å½“äºä½ éœ€è¦åœ¨æ¯æ¬¡ä¼šè¯é‡Œé™„å¸¦ä¸€ä¸ªç›®å½•ï¼Œå‘Šè¯‰AIï¼š</p>
<blockquote>
<p>å—¨ï¼Œç‰¢Aï¼Œæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ªåå«<code>get_current_time</code>çš„å·¥å…·ï¼Œå®ƒæ˜¯ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯â€œè·å–å½“å‰å‡†ç¡®çš„æ—¶é—´â€ã€‚</p>
</blockquote>
<p>è¿™æ ·ï¼Œå½“æ²¡æœ‰è®°å¿†çš„LLMé¢å¯¹â€œå½“å‰å‡†ç¡®æ—¶é—´æ˜¯ä»€ä¹ˆâ€çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šçŸ¥é“è¦è°ƒç”¨è¿™ä¸ªå·¥å…·ã€‚</p>
<p>å¾ˆå·§ï¼Œä¸ŠèŠ‚è¯¾æˆ‘ä»¬æ‰ä»‹ç»äº† JSON Schemaï¼Œè¿™èŠ‚è¯¾çš„ <code>Function Calling</code> æ³¨å†Œå·¥å…·ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°JSON Schemaã€‚</p>
<p>ä½†å®ƒä¸æ˜¯å®Œå…¨æ ‡å‡†çš„ JSON Schemaï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python">tools = [
    {
        <span class="hljs-comment"># 1. ç±»å‹ï¼šç›®å‰ä»…æ”¯æŒ "function"</span>
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-comment"># 2. å‡½æ•°å®šä¹‰ä¸»ä½“</span>
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-comment"># 2.1 (å¿…å¡«) å‡½æ•°å</span>
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.2 (å¼ºçƒˆæ¨è) ç»™ AI çœ‹çš„å‡½æ•°è¯´æ˜ä¹¦</span>
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"..."</span>,
            <span class="hljs-comment"># 2.3 (å¿…å¡«) å‚æ•°å®šä¹‰ï¼Œéµå¾ª JSON Schema æ ‡å‡†</span>
            <span class="hljs-string">"parameters"</span>: {        
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: { ... },
                <span class="hljs-string">"required"</span>: [...]
            },
            <span class="hljs-comment"># (å¯é€‰) DeepSeek/OpenAI æ”¯æŒçš„ä¸¥æ ¼æ¨¡å¼ï¼Œè®¾ä¸º True å¼ºåˆ¶è¾“å‡ºç¬¦åˆ Schema</span>
            <span class="hljs-string">"strict"</span>: <span class="hljs-literal">True</span> 
        }
    }
]
</code></pre>
<p>å¦‚æœæƒ³æ‰¾å®˜æ–¹æ–‡æ¡£çš„è¯ï¼Œå›½å†…å¼€å‘è€…ä¼˜å…ˆå»ºè®®å‚è€ƒ <code>deepseek</code> çš„ <code>Function Calling</code> æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi-docs.deepseek.com%2Fzh-cn%2Fguides%2Ffunction_calling" target="_blank" title="https://api-docs.deepseek.com/zh-cn/guides/function_calling" ref="nofollow noopener noreferrer">api-docs.deepseek.com/zh-cn/guideâ€¦</a></p>
<p>å…¶ä¸­æåˆ°ï¼š</p>
<blockquote>
<p>ç”¨æˆ·éœ€è¦è®¾ç½® base_url="<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.deepseek.com%2Fbeta" target="_blank" title="https://api.deepseek.com/beta" ref="nofollow noopener noreferrer">api.deepseek.com/beta</a>" æ¥å¼€å¯ Beta åŠŸèƒ½</p>
</blockquote>
<p>å—¯ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é»˜é»˜åœ°å»ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬ <code>.env</code> æ–‡ä»¶çš„ BASE_URL å‚æ•°ï¼Œä»¥æ±‚è·å¾—æ›´ç¨³å®šçš„è¿”å›ç»“æ„ã€‚</p>
<p>å¦å¤–è¿˜å¯ä»¥å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Ffunction-calling" target="_blank" title="https://platform.openai.com/docs/guides/function-calling" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a></p>
<p>è®©æˆ‘ä»¬æ ¹æ®ä¸Šé¢å­¦åˆ°çš„ï¼Œéšæ‰‹æ³¨å†Œä¸¤ä¸ªå·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰å·¥å…·åˆ—è¡¨ </span>
tools = [
    <span class="hljs-comment"># æ–¹æ³•Aï¼šè·å–å½“å‰ç²¾å‡†æ—¶é—´</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_current_time"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–å½“å‰ç²¾ç¡®æ—¶é—´"</span>,
            <span class="hljs-string">"parameters"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>, <span class="hljs-string">"properties"</span>: {}}
        }
    },
    <span class="hljs-comment"># æ–¹æ³•Bï¼šè®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯</span>
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"calculate_multiply"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è®¡ç®—ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯"</span>,
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"a"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°å­—"</span>},
                    <span class="hljs-string">"b"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"number"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç¬¬äºŒä¸ªæ•°å­—"</span>}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>]
            }
        }
    }
]
</code></pre>
<p>æœ‰äº† <code>Schema</code>ï¼Œå¦‚ä½•æ·»åŠ åˆ°ä¼šè¯é‡Œå»å‘¢ï¼Ÿ</p>
<p>éå¸¸ç®€å•ï¼</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"deepseek-chat"</span>,
    messages=messages,
    tools=tools, <span class="hljs-comment"># ã€å…³é”®ã€‘æŠŠå·¥å…·ç®±é€’ç»™å®ƒ</span>
)
</code></pre>
<h2 data-id="heading-5">å››ã€è¯†åˆ«AIçš„è¿”å›ï¼Œè°ƒç”¨å…·ä½“çš„æ–¹æ³•</h2>
<p>åˆšåˆšæˆ‘ä»¬åœ¨è¯·æ±‚é‡Œé™„å¸¦äº†toolsæ¸…å•ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆè¯†åˆ«AIåœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦è°ƒç”¨æˆ‘ä»¬çš„toolså‘¢?</p>
<p>å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è·å– AI çš„å›å¤æ¶ˆæ¯</span>
ai_msg = response.choices[<span class="hljs-number">0</span>].message
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ai_msg.tool_callsï¼š<span class="hljs-subst">{ai_msg.tool_calls}</span>"</span>)
</code></pre>
<p>åœ¨ai_msgè¿™ä¸ªLLM è¿”å›å€¼ä¿¡æ¯é‡Œï¼Œæˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨ <code>ai_msg.tool_calls</code> è¿™ä¸ªå­—æ®µã€‚</p>
<p>å¦‚æœå®ƒæ˜¯Noneæˆ–è€…ç©ºæ•°ç»„ï¼Œåˆ™è¡¨ç¤ºAIæ²¡æœ‰æƒ³è¦è°ƒç”¨çš„<code>Function</code>ï¼Œå¦åˆ™çš„è¯ï¼Œå³ä»£è¡¨ï¼š</p>
<blockquote>
<p>åˆšæ‰è¿™ä¸€æ¬¡ä¼šè¯ï¼ŒAIæ²¡æœ‰å¾—åˆ°ç»“è®ºï¼Œè€Œæ˜¯å¸Œæœ›è°ƒç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªFunctionã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºå¦‚ä¸‹çš„å¤§è‡´é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> ai_msg.tool_calls:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·ï¼"</span>)
    
    <span class="hljs-comment"># å¿…é¡»æŠŠ AI çš„è¿™å¥â€œæˆ‘æƒ³è°ƒç”¨å·¥å…·â€åŠ å…¥å¯¹è¯å†å²</span>
    <span class="hljs-comment"># å¦åˆ™åé¢é€šè¿‡å·¥å…·ç»“æœå›å¤æ—¶ï¼ŒAI ä¼šå¤±å¿†</span>
    messages.append(ai_msg)

    <span class="hljs-comment"># === ä½ çš„ä»£ç ä»‹å…¥ï¼šæ‰§è¡Œå·¥å…· ===</span>
    <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> ai_msg.tool_calls:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¤– AI å†³å®šè°ƒç”¨å·¥å…·: <span class="hljs-subst">{tool_call.function.name}</span>"</span>)
        func_name = tool_call.function.name
        <span class="hljs-comment"># è§£æå‚æ•° (JSON å­—ç¬¦ä¸² -&gt; å­—å…¸)</span>
        func_args = json.loads(tool_call.function.arguments)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># AI è§‰å¾—ä¸éœ€è¦å·¥å…·ï¼Œç›´æ¥å›ç­”</span>
    <span class="hljs-keyword">return</span> ai_msg.content
</code></pre>
<p>æ‹¿åˆ°æ–¹æ³•åä¸æ–¹æ³•å‚æ•°åï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œå¾—åˆ°ç»“æœï¼Œè¿™ä¸€ç‚¹è¿åˆšæ¥è§¦ç¼–ç¨‹çš„æ–°æ‰‹éƒ½çŸ¥é“æ€ä¹ˆå†™äº†ã€‚</p>
<p>æ‹¿åˆ°ç»“æœåï¼Œåªéœ€è¦å†æ¬¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">messages.append({
    "role": "tool",
    "tool_call_id": tool_call.id,
    "content": tool_result
})
<span class="hljs-comment"># === ç¬¬äºŒè½®äº¤äº’ ===</span>
<span class="hljs-attr">final_response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"deepseek-chat"</span>,
    <span class="hljs-attr">messages</span>=messages,
    <span class="hljs-attr">tools</span>=tools
)
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™é‡Œçš„ç¬¬äºŒè½®äº¤äº’é‡Œè¿˜è¦å¸¦ä¸Š <code>tools</code>ï¼Ÿ</p>
<p>å› ä¸ºAgentå¹¶ä¸çŸ¥é“LLMæ˜¯å¦ä¼šå†å‘èµ·ä¸€æ¬¡Function Callingï¼Œå¦‚æœä¸æºå¸¦toolsï¼ŒLLMå°±éå¸¸å¯èƒ½åœ¨é‡åˆ°é—®é¢˜æ—¶æ— å¥ˆåœ°çç¼–æˆ–è€…æŠ¥é”™ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€’å½’ï¼Œæˆ–è€…å¾ªç¯ã€‚</p>
<p>è¿™å°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªæ–°çš„ï¼Œæ·±åˆ»çš„ï¼Œé‡è¦çš„ï¼Œéš¾ä»¥è§„é¿çš„æ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>åœ¨Agentå¼€å‘ä¸­ï¼Œåº”è¯¥å¦‚ä½•ç»Ÿä¸€AIçš„æ€è€ƒä¸è¡ŒåŠ¨ï¼Œå¹¶å·§å¦™è®¾è®¡è¿™ä¸ªå¾ªç¯ã€‚</p>
</blockquote>
<p>ä¸‹ä¸€èŠ‚è¯¾å†è§ï¼</p>
<h2 data-id="heading-6">ä¸‹ä¸€æ­¥é¢„å‘Š</h2>
<p>ä¸‹èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ Agent ç¼–ç¨‹çš„ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>æ€è€ƒèŒƒå¼ã€‚</p>
</blockquote>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<p><img src="https://pic.zhangshichun.top/pic/ScreenShot_2026-01-26_082327_821.png" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7602834985902145586</link>    <guid>https://juejin.cn/post/7602834985902145586</guid>    <pubDate>2026-02-05T00:37:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602834985902145586" data-draft-id="7602910573404553254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="ECharts,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-05T00:37:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°¢å°é£"/> <meta itemprop="url" content="https://juejin.cn/user/2717648473034823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            10ä¸‡æ•°æ®ç‚¹å¯è§†åŒ–ï¼šEchartsæ€§èƒ½ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648473034823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°¢å°é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:37:54.000Z" title="Thu Feb 05 2026 00:37:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><p>ã€€ã€€æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªé¢‡å…·æŒ‘æˆ˜çš„éœ€æ±‚ï¼Œéœ€è¦åœ¨Webé¡µé¢ä¸Šé€šè¿‡Echartså›¾è¡¨æ¸²æŸ“è¶…è¿‡10ä¸‡æ¡ç‚¹ä½æ•°æ®ã€‚å¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œå¤§æ•°æ®é‡çš„å¯è§†åŒ–æ¸²æŸ“ä¸€ç›´æ˜¯ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“æ•°æ®é‡è¾¾åˆ°10ä¸‡çº§åˆ«æ—¶ï¼Œä¸ä»…æµè§ˆå™¨è¯·æ±‚å“åº”é€Ÿåº¦å˜æ…¢ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½ç“¶é¢ˆä¼šå˜å¾—éå¸¸æ˜æ˜¾ï¼›å› æ­¤ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±çœ‹ä¸‹å¦‚æœåœ¨å·¥ä½œä¸­é‡åˆ°è¿™ç§åœºæ™¯ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ã€‚</p>
<p>ã€€ã€€é¦–å…ˆä»‹ç»ä¸€ä¸‹å®é™…çš„åœºæ™¯ï¼Œæˆ‘ä»¬å›¢é˜Ÿæœ€è¿‘æ¥åˆ°ä¸€ä¸ªç‰©è”ç½‘è®¾å¤‡æ•°æ®åˆ†æéœ€æ±‚ï¼šä¸šåŠ¡æ–¹éœ€è¦æŸ¥çœ‹ç‰¹å®šè®¾å¤‡ä¸€æ®µæ—¶é—´èŒƒå›´å†…çš„è¿è¡ŒçŠ¶æ€è¶‹åŠ¿ã€‚è¿™çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä¸ªç®€å•çš„æŠ˜çº¿å›¾éœ€æ±‚ï¼Œä½†å½“æˆ‘ä»¬æ·±å…¥äº†è§£æ•°æ®è§„æ¨¡æ—¶ï¼Œå‘ç°äº†å·¨å¤§çš„æŒ‘æˆ˜ã€‚</p>
<p>ã€€ã€€é¦–å…ˆæ˜¯ä¸šåŠ¡æ–¹è¦æ±‚ä¸é™åˆ¶æ—¶é—´èŒƒå›´ï¼Œä¾‹å¦‚å¯ä»¥è·¨æ•°å¹´çš„èŒƒå›´ï¼Œä»2021å¹´åˆ°2025å¹´ï¼›è¿™å¯¹æˆ‘ä»¬å‰åç«¯æ¥è¯´ï¼Œæ„å‘³ç€æŸ¥è¯¢å’Œæ¸²æŸ“æ•°æ®é‡ä¼šéå¸¸åºå¤§ï¼Œå› ä¸ºè®¾å¤‡é‡‡é›†ä¸€èˆ¬éƒ½æ˜¯æŒ‰ç…§å›ºå®šçš„æ—¶é—´é¢‘ç‡é‡‡é›†çš„ï¼›æ¯”å¦‚å¦‚æœè®¾å¤‡æ¯éš”15åˆ†é’Ÿå°±ä¼šé‡‡é›†å‘é€ä¸€æ¬¡æ•°æ®ï¼Œä¸€å¤©çš„æ•°æ®é‡å°±æ˜¯24å°æ—¶ Ã— (60åˆ†é’Ÿ/15åˆ†é’Ÿ) = 96ä¸ªæ•°æ®ç‚¹/å¤©ï¼Œå¦‚æœæŸ¥è¯¢4å¹´çš„æ•°æ®å°±æ˜¯4å¹´* 365å¤©* 96ä¸ªæ•°æ®ç‚¹ = 14ä½™ä¸‡æ¡æ•°æ®ã€‚</p>
<p>ã€€ã€€ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬çš„éœ€æ±‚å¾ˆæ˜ç¡®ï¼š"æˆ‘ä»¬éœ€è¦åœ¨è¿™å¼ å›¾ä¸Šçœ‹åˆ°å››å¹´çš„å®Œæ•´è¶‹åŠ¿ï¼Œèƒ½å¤Ÿå¿«é€Ÿå‘ç°å¼‚å¸¸æ³¢åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥éšæ„ç¼©æ”¾æŸ¥çœ‹ä»»æ„æ—¶é—´æ®µçš„ç»†èŠ‚"ã€‚ä»–ä»¬è¡¥å……é“ï¼š"ä¹‹å‰è¯•è¿‡æŒ‰å¤©èšåˆçš„æ•°æ®ï¼Œä½†é‚£æ ·ä¼šä¸¢å¤±å¾ˆå¤šé‡è¦ä¿¡æ¯ã€‚æ¯”å¦‚è®¾å¤‡åœ¨æŸä¸ªå…·ä½“æ—¶é—´ç‚¹çš„ç¬æ—¶å¼‚å¸¸ï¼Œåœ¨æ—¥åº¦æ•°æ®ä¸­å°±çœ‹ä¸å‡ºæ¥äº†ã€‚"</p>
<p>ã€€ã€€æˆ‘ä»¬æœ€åˆçš„å°è¯•éå¸¸ç›´æ¥ï¼Œä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„æ•°æ®ï¼Œç„¶åé€šè¿‡Echartsæ¸²æŸ“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f9c7295154459fa6306939e5b45d0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=7dN38vp3w2aDzjwTpSYRaEZujqw%3D" alt="ä¸€æ¬¡æ€§åŠ è½½" loading="lazy"/></p>
<p>ã€€ã€€ä½†æ˜¯è¯·æ±‚æ¥å£çš„æ—¶é—´å°±è¾¾åˆ°äº†14ç§’ï¼Œæ•°æ®å“åº”æ—¶æµè§ˆå™¨å†…å­˜å ç”¨æ¿€å¢ï¼Œéå¸¸å®¹æ˜“å´©æºƒå¡æ­»ï¼Œå®Œå…¨æ²¡æœ‰ç”¨æˆ·ä½“éªŒå¯è¨€ã€‚</p>
<h2 data-id="heading-0">æ•°æ®åˆ†å‰²ï¼šåŒ–æ•´ä¸ºé›¶çš„ç­–ç•¥</h2>
<p>ã€€ã€€äºæ˜¯ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•æ•°æ®åˆ†å‰²ï¼Œå°†æ•°æ®æŒ‰å¤©ç»´åº¦è¿›è¡Œåˆ†å‰²ï¼Œç„¶ååˆ†åˆ«è¯·æ±‚æ•°æ®ï¼›ä¸‹é¢æ˜¯åˆ†å‰²çš„æ ¸å¿ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">"dayjs"</span>;
<span class="hljs-comment">/**
 * æŒ‰æŒ‡å®šå¤©æ•°åˆ†å‰²æ—¥æœŸåŒºé—´
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} startDate å¼€å§‹æ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} endDate ç»“æŸæ—¥æœŸ
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} num åˆ†å‰²å¤©æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// ä½¿ç”¨dayjs.jsåˆ›å»ºæ—¥æœŸå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> start = <span class="hljs-title function_">dayjs</span>(startDate);
  <span class="hljs-keyword">const</span> end = <span class="hljs-title function_">dayjs</span>(endDate);

  <span class="hljs-comment">// éªŒè¯æ—¥æœŸæœ‰æ•ˆæ€§</span>
  <span class="hljs-keyword">if</span> (!start.<span class="hljs-title function_">isValid</span>() || !end.<span class="hljs-title function_">isValid</span>()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ— æ•ˆçš„æ—¥æœŸæ ¼å¼'</span>);
  }

  <span class="hljs-comment">// ç¡®ä¿å¼€å§‹æ—¥æœŸæ—©äºæˆ–ç­‰äºç»“æŸæ—¥æœŸ</span>
  <span class="hljs-keyword">if</span> (start.<span class="hljs-title function_">isAfter</span>(end)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ'</span>);
  }

  <span class="hljs-comment">// è®¡ç®—æ€»å¤©æ•°</span>
  <span class="hljs-keyword">const</span> totalDays = end.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

  <span class="hljs-comment">// å¦‚æœæ€»å¤©æ•°å°äºç­‰äºæœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªåŒºé—´</span>
  <span class="hljs-keyword">if</span> (totalDays &lt;= num) {
    <span class="hljs-keyword">return</span> [
      {
        <span class="hljs-attr">segmentStartDate</span>: start.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentEndDate</span>: end.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
        <span class="hljs-attr">segmentStartDay</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">segmentEndDay</span>: totalDays,
      },
    ];
  }
}
</code></pre>
<p>ã€€ã€€åœ¨å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä¼šå…ˆæ ¡éªŒå‚æ•°æ ¼å¼å¹¶è®¡ç®—æ€»å¤©æ•°ï¼Œè‹¥æ€»å¤©æ•°æœªè¶…è¿‡æœ€å¤§åˆ†å‰²å¤©æ•°ï¼Œåˆ™å°†ç›´æ¥è¿”å›è¯¥æ—¥æœŸåŒºé—´ï¼Œä¸å†è¿›è¡Œåˆ†å‰²å¤„ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">separateDate</span>(<span class="hljs-params">startDate, endDate, num = <span class="hljs-number">180</span></span>) {
  <span class="hljs-comment">// çœç•¥å…¶ä»–ä»£ç ...</span>

  <span class="hljs-comment">// è®¡ç®—éœ€è¦åˆ†å‰²çš„åŒºé—´æ•°é‡</span>
  <span class="hljs-keyword">const</span> numIntervals = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(totalDays / num);

  <span class="hljs-keyword">const</span> result = [];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numIntervals; i++) {
    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„å¼€å§‹æ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> iStart = start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>(i * num, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// è®¡ç®—å½“å‰åŒºé—´çš„ç»“æŸæ—¥æœŸï¼ˆæœ€åä¸€ä¸ªåŒºé—´ä½¿ç”¨å®é™…ç»“æŸæ—¥æœŸï¼‰</span>
    <span class="hljs-keyword">const</span> iEnd = i === numIntervals - <span class="hljs-number">1</span> ? end : start.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">add</span>((i + <span class="hljs-number">1</span>) * num - <span class="hljs-number">1</span>, <span class="hljs-string">'days'</span>);

    <span class="hljs-comment">// ç¡®ä¿ç»“æŸæ—¥æœŸä¸è¶…è¿‡å®é™…ç»“æŸæ—¥æœŸ</span>
    <span class="hljs-keyword">const</span> actualEnd = iEnd.<span class="hljs-title function_">isAfter</span>(end) ? end : iEnd;

    <span class="hljs-comment">// è®¡ç®—ç›¸å¯¹äºå¼€å§‹æ—¥æœŸçš„å¤©æ•°</span>
    <span class="hljs-keyword">const</span> segmentStartDay = iStart.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">const</span> segmentEndDay = actualEnd.<span class="hljs-title function_">diff</span>(start, <span class="hljs-string">'days'</span>);

    result.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">segmentStartDate</span>: iStart.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      <span class="hljs-attr">segmentEndDate</span>: actualEnd.<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD'</span>),
      segmentStartDay,
      segmentEndDay,
    });
  }

  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>ã€€ã€€ç„¶åé€šè¿‡<code>Math.ceil</code>å°†æ•°å­—å‘ä¸Šèˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ï¼Œå¾—åˆ°numIntervalsï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åŒºé—´çš„æ•°é‡ã€‚æ­¤å¤–åœ¨separateDateè¿”å›çš„æ•°æ®æ¯ä¸ªåˆ†ç‰‡ä¸­ï¼ŒåŒ…å«äº†segmentStartDayå’ŒsegmentEndDayï¼Œå¯¹åº”äº†æ—¶é—´åŒºé—´çš„å¼€å§‹å’Œç»“æŸçš„å¤©æ•°ï¼Œæ–¹ä¾¿åç»­çš„æ•°æ®åˆå¹¶å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œ<code>separateDateå‡½æ•°</code>æ˜¯æˆ‘ä»¬æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆçš„æ ¸å¿ƒåŸºç¡€ï¼Œå®ƒå°†é•¿æ—¶é—´è·¨åº¦çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„å­è¯·æ±‚ï¼›startDateå’ŒendDateæ¥æ”¶æ—¥å†ğŸ“…ç»„ä»¶ä¼ å…¥çš„ç”¨æˆ·é€‰æ‹©çš„å¼€å§‹å’Œç»“æŸæ—¥æœŸï¼›numå‚æ•°é»˜è®¤è®¾ç½®ä¸º180å¤©ï¼Œè¿™ä¸ªå€¼åŸºäºæˆ‘ä»¬åç«¯å“åº”æ•ˆç‡å’Œé€Ÿåº¦çš„æœ€ä¼˜åˆ†æ®µæ—¶é•¿ï¼Œå¦‚æœå•ä¸ªæ—¶é—´è·¨åº¦å¤ªé•¿ï¼Œåˆ™è¾¾ä¸åˆ°åˆ†æ®µçš„æ•ˆæœï¼Œè€Œå¦‚æœå¤ªçŸ­ï¼Œåˆ™åˆ†æ®µæ•°é‡è¿‡å¤šï¼Œè¯·æ±‚æ¬¡æ•°å¤ªé¢‘ç¹ã€‚</p>
<p>ã€€ã€€æ­£æ˜¯åŸºäºseparateDateå‡½æ•°åˆ†å‰²å‡ºçš„è¿™äº›ç‹¬ç«‹ã€åˆè§„çš„æ—¥æœŸåŒºé—´ï¼Œæˆ‘ä»¬åç»­çš„æ‰€æœ‰ä¼˜åŒ–æ“ä½œæ‰å¾—ä»¥å±•å¼€ï¼›æ¥ä¸‹æ¥ï¼Œæ¯ä¸€ä¸ªå­åŒºé—´çš„æ•°æ®ä¼šè¿›è¡Œç‹¬ç«‹çš„å¤„ç†å’ŒåŠ è½½ï¼Œä»è€Œå°†åŸæœ¬åºå¤§è€Œç¬¨é‡çš„å•æ¬¡è¯·æ±‚ï¼Œè½¬åŒ–ä¸ºä¸€æ¬¡æ¬¡é«˜æ•ˆã€å¯ç®¡ç†çš„å¹¶è¡Œä»»åŠ¡æµã€‚</p>
<h2 data-id="heading-1">WebWorkerï¼šå¼€è¾Ÿâ€œç¬¬äºŒæˆ˜çº¿â€</h2>
<p>ã€€ã€€åœ¨ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å®ç°äº†æ•°æ®çš„åˆ†å‰²ï¼ŒæˆåŠŸå°†14ä¸‡+çš„æ•°æ®è¯·æ±‚åˆ†è§£ä¸ºå¤šä¸ªå°è¯·æ±‚ï¼›ä½†æ˜¯å³ä½¿æ•°æ®åˆ†ç‰‡äº†ï¼Œæ¯ä¸€åˆ†ç‰‡æ•°æ®é‡ä»ç„¶å¯èƒ½å¾ˆå¤§ï¼ˆæœ€å¤š180å¤©Ã—96ä¸ªç‚¹/å¤©=17280ä¸ªç‚¹ï¼‰ï¼›å¦‚æœç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†è¿™äº›æ•°æ®ï¼Œä»ç„¶ä¼šå¯¼è‡´UIå¡é¡¿ã€‚è¿™æ—¶å€™ï¼ŒWeb Workerå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>ã€€ã€€<code>Web Worker</code>æ˜¯HTML5æä¾›çš„APIï¼Œå…è®¸åœ¨æµè§ˆå™¨åå°è¿è¡ŒJavaScriptè„šæœ¬ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨Workerçº¿ç¨‹ä¸­æ‰§è¡Œç¹é‡çš„æ•°æ®å¤„ç†ä»»åŠ¡ï¼Œè€Œä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢ï¼›å¦‚æœè¯´ä¸»çº¿ç¨‹æ˜¯â€œå‰å°æœåŠ¡å‘˜â€ï¼Œæ—¢è¦å“åº”å®¢äººï¼ˆç”¨æˆ·ï¼‰çš„ç‚¹å‡»ï¼Œåˆè¦å»åå¨ç‚’èœï¼ˆè®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆWeb Workerå°±æ˜¯é›‡æ¥çš„â€œä¸“èŒåå¨â€ï¼›å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç‹¬ç«‹çº¿ç¨‹ï¼šè¿è¡Œåœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä¸ä¸»çº¿ç¨‹å¹¶è¡Œ</li>
<li>æ— DOMè®¿é—®æƒé™ï¼šä¸èƒ½ç›´æ¥æ“ä½œDOMæˆ–è®¿é—®windowå¯¹è±¡</li>
<li>é€šè¿‡æ¶ˆæ¯é€šä¿¡ï¼šä¸ä¸»çº¿ç¨‹é€šè¿‡postMessageå’Œonmessageé€šä¿¡</li>
<li>ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹ï¼šå…³é—­æ ‡ç­¾é¡µæˆ–Workerè„šæœ¬æ‰§è¡Œå®Œæ¯•æ‰ä¼šç»ˆæ­¢</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9ad8b7a99db4ff5999640a54f77f306~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=o9WAa3hD7Z2zGa3FtCCq%2FeAri4Q%3D" alt="WebWorker" loading="lazy"/></p>
<p>ã€€ã€€é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä¸“é—¨å¤„ç†æ•°æ®çš„Workeræ–‡ä»¶<code>data-processor.worker.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">var</span> list = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;

  <span class="hljs-keyword">const</span> listHandled = list.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
    <span class="hljs-comment">// å¯¹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—è€—æ—¶è®¡ç®—</span>
  });

  self.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">list</span>: listHandled,
  });
};
</code></pre>
<p>ã€€ã€€è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¸“ç”¨Workerçº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡Œæ‰€æœ‰é˜»å¡å‹çš„è®¡ç®—ä»»åŠ¡ï¼Œè´Ÿè´£å¯¹æ•°æ®è¿›è¡Œä¸€äº›è€—æ—¶çš„å¤„ç†ï¼Œä¾‹å¦‚åŸå§‹æ•°æ®æ¸…æ´—ã€å¤æ‚æŒ‡æ ‡è®¡ç®—ç­‰ç­‰ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°æ®ï¼›ä¸»çº¿ç¨‹åˆ™ä¸“æ³¨äºUIäº¤äº’ä¸æµç•…æ¸²æŸ“ï¼Œä»…åœ¨éœ€è¦æ—¶ï¼ˆåˆ†å‰²æ•°æ®è¿”å›ï¼‰å‘Workeræ´¾å‘ä»»åŠ¡å¹¶å¼‚æ­¥æ¥æ”¶å…¶è¿”å›çš„ã€å¯ç›´æ¥ç”¨äºå›¾è¡¨ï¼ˆå¦‚EChartsï¼‰çš„è½»é‡åŒ–ç»“æœã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDate, segmentEndDate } = rangeItem;
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchListData</span>({
    <span class="hljs-attr">startDate</span>: segmentStartDate,
    <span class="hljs-attr">endDate</span>: segmentEndDate,
  });
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;

    <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"/data-processor.worker.js"</span>);
    worker.<span class="hljs-title function_">postMessage</span>({
      <span class="hljs-attr">data</span>: list,
    });
    worker.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-keyword">const</span> { list } = e.<span class="hljs-property">data</span>;
      <span class="hljs-title function_">renderChart</span>(list);
    };
  }
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å°†å‰é¢åˆ†å‰²å¥½çš„æ•°æ®åŒºé—´ï¼Œåˆ†å‘ä¸ºå¹¶å‘çš„æ•°æ®è¯·æ±‚è¿›è¡ŒåŠ è½½ã€‚å¾…æ•°æ®è¿”å›åï¼Œä¸»çº¿ç¨‹ä¼šå®ä¾‹åŒ–ä¸€ä¸ªWorkerçº¿ç¨‹ï¼Œå¹¶é€šè¿‡postMessageå‡½æ•°ï¼Œå°†åŸå§‹æ•°æ®è°ƒåº¦è‡³Workerè¿›è¡Œåç»­å¤„ç†ã€‚</p>
<p>ã€€ã€€è¿™é‡Œè¿˜æ¶‰åŠä¸€ä¸ªæ•°æ®è¿”å›åæ‹¼æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å¾ªç¯è°ƒç”¨loadEchartDataè¯·æ±‚æ•°æ®æ—¶ï¼Œç”±äºæ˜¯å¼‚æ­¥è¿”å›ï¼Œåˆ†ç‰‡æ•°æ®è¿”å›çš„æ—¶å€™ï¼Œæ•°æ®ä¼šä¹±åºè¿”å›ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥é€šè¿‡æ•°ç»„çš„pushæ¥æ·»åŠ æ•°æ®ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬åœ¨å…¨å±€å®šä¹‰xè½´å’Œyè½´ä¸¤ä¸ªæ•°ç»„ï¼Œåœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæå‰é¢„ä¼°è®¡ç®—å‡ºæ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä½¿ç”¨é»˜è®¤æ•°æ®è¿›è¡Œå¡«å……ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">_xList</span>: <span class="hljs-built_in">string</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">_yList</span>: <span class="hljs-built_in">number</span>[] = []

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; diffDay; i++) {
    <span class="hljs-keyword">const</span> nowDate = <span class="hljs-title function_">dayjs</span>(startDate.<span class="hljs-property">value</span>).<span class="hljs-title function_">add</span>(i, <span class="hljs-string">'days'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">96</span>; j++) {
        _xList.<span class="hljs-title function_">push</span>(
            nowDate.<span class="hljs-title function_">add</span>(i * <span class="hljs-number">15</span>, <span class="hljs-string">'minutes'</span>)
            .<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm'</span>)
        )
        _yList.<span class="hljs-title function_">push</span>(<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p>ã€€ã€€å½“å“åº”æ•°æ®è¿”å›åï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ•°æ®æ·»åŠ åˆ°å¯¹åº”çš„ä½ç½®å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadEchartData</span>(<span class="hljs-params">rangeItem</span>) {
  <span class="hljs-keyword">const</span> { segmentStartDay } = rangeItem;
  <span class="hljs-keyword">if</span> (res &amp;&amp; res.<span class="hljs-property">data</span>) {
    <span class="hljs-keyword">const</span> { list } = res.<span class="hljs-property">data</span>;
    <span class="hljs-keyword">const</span> startIndex = segmentStartDay * <span class="hljs-number">96</span>;
    <span class="hljs-comment">// åœ¨å¯¹åº”ç´¢å¼•å¤„æ·»åŠ æ•°æ®</span>
    _yList.<span class="hljs-title function_">splice</span>(startIndex, list.<span class="hljs-property">length</span>, ...list);
  }
}
</code></pre>
<h2 data-id="heading-2">Echartsæ¸²æŸ“ä¼˜åŒ–ï¼šè®©å¤§æ•°æ®é£èµ·æ¥</h2>
<p>ã€€ã€€è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡åˆ†å‰²ã€å¤„ç†ä¸åŠ è½½çš„ä¼˜åŒ–ï¼Œä¸ºæµ·é‡æ•°æ®çš„æ¸²æŸ“æ­å»ºäº†ä¸€æ¡é«˜æ•ˆçš„å‰ç½®ç®¡çº¿ã€‚ã€‚ç„¶è€Œï¼Œå½“æ•°æ®æœ€ç»ˆæŠµè¾¾æµè§ˆå™¨å¹¶å‡†å¤‡åœ¨EChartsä¸­ç»˜åˆ¶æ—¶ï¼Œæ€§èƒ½çš„â€œæœ€ç»ˆæŒ‘æˆ˜â€æ‰çœŸæ­£å¼€å§‹ã€‚å¦‚ä½•è®©EChartsâ€œæ¶ˆåŒ–â€è¿™æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¹¶ä¿æŒæµç•…äº¤äº’ï¼Ÿæœ¬èŠ‚å°†æ·±å…¥EChartsçš„æ¸²æŸ“å±‚ï¼Œæ‹†è§£é‚£äº›è®©å›¾è¡¨â€œé£èµ·æ¥â€çš„å…³é”®ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>ã€€ã€€åœ¨å¤§æ•°æ®é‡çš„å‰æä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®ä¿ï¼Œechartsçš„æ¸²æŸ“å™¨æ˜¯canvasè€Œä¸æ˜¯SVGï¼Œå› ä¸ºSVGå›¾åƒåœ¨å¤„ç†å¤æ‚å›¾å½¢æ—¶å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ç¡®ä¿ä½ çš„å›¾è¡¨ä½¿ç”¨canvasè¿›è¡Œæ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// rendererä¸æ˜¯svg</span>
echarts.<span class="hljs-title function_">init</span>(domElement, <span class="hljs-literal">null</span>, { <span class="hljs-attr">renderer</span>: <span class="hljs-string">'canvas'</span> });
</code></pre>
<h3 data-id="heading-3">é™é‡‡æ ·ç­–ç•¥</h3>
<p>ã€€ã€€ä»€ä¹ˆæ˜¯æ•°æ®é‡‡æ ·ï¼Ÿæ•°æ®é‡‡æ ·æ˜¯EChartsä¸­å¤„ç†å¤§æ•°æ®é‡çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå½“å›¾è¡¨éœ€è¦å±•ç¤ºçš„æ•°æ®ç‚¹è¿‡å¤šæ—¶ï¼ˆé€šå¸¸è¶…è¿‡å‡ åƒä¸ªç‚¹ï¼‰ï¼Œæµè§ˆå™¨æ¸²æŸ“æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚é‡‡æ ·ç®—æ³•å¯ä»¥åœ¨ä¿æŒå›¾è¡¨å¤§è‡´è¶‹åŠ¿ä¸å˜çš„å‰æä¸‹ï¼Œå‡å°‘å®é™…æ¸²æŸ“çš„æ•°æ®ç‚¹æ•°ã€‚</p>
<p>ã€€ã€€ä¾‹å¦‚ï¼Œé€šè¿‡å¯¹ä¸€ä¸‡ä¸ªåŸå§‹æ•°æ®ç‚¹è¿›è¡Œåˆ†å±‚æŠ½æ ·ï¼Œæˆ‘ä»¬å°†æ¸²æŸ“èŠ‚ç‚¹çš„æ•°é‡ç›´æ¥ä»10,000ä¸ªç¼©å‡è‡³1,000ä¸ªã€‚è¿™ä¸€ä¼˜åŒ–ç›´æ¥å¸¦æ¥äº†æ¸²æŸ“æ€§èƒ½çš„æ¿€å¢ï¼Œå¸§ç‡å¾—åˆ°æ˜¾è‘—æå‡ã€‚Echartsæä¾›äº†å¤šç§æ•°æ®é‡‡æ ·ç®—æ³•ï¼ŒåŒ…æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li>sumï¼šå–è¿‡æ»¤ç‚¹çš„å’Œ</li>
<li>averageï¼šå–è¿‡æ»¤ç‚¹çš„å¹³å‡å€¼</li>
<li>minï¼š å–è¿‡æ»¤ç‚¹çš„æœ€å°å€¼</li>
<li>maxï¼š å–è¿‡æ»¤ç‚¹æœ€å¤§çš„å€¼</li>
<li>minmaxï¼šå–è¿‡æ»¤ç‚¹ç»å¯¹å€¼çš„æœ€å¤§æå€¼ (ä» v5.5.0 å¼€å§‹æ”¯æŒ)</li>
<li>lttbï¼šé‡‡ç”¨<code>Largest-Triangle-Three-Bucket</code>ç®—æ³•ï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¿è¯é‡‡æ ·åçº¿æ¡çš„è¶‹åŠ¿ï¼Œå½¢çŠ¶å’Œæå€¼ã€‚</li>
</ul>
<p>ã€€ã€€ä½¿ç”¨æ—¶ï¼Œé€šè¿‡é…ç½®seriesçš„samplingå±æ€§ï¼ŒæŒ‡å®šæ•°æ®é‡‡æ ·ç®—æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">sampling</span>: <span class="hljs-string">"lttb"</span>,
      <span class="hljs-attr">data</span>: yourData,
    },
  ];
}
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬å¯¹æŸ±çŠ¶å›¾è¿›è¡Œlttbç®—æ³•é‡‡æ ·åï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ˜æ˜¾çœ‹åˆ°æŸ±å­çš„å¯†åº¦æœ‰äº›ç¨€ç–ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fd6c129a4f42cea9dbfdfad8fc2bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=VFD4Bhg7AkvSr7S7evzj%2BaXHSa0%3D" alt="æŸ±çŠ¶å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œæ•°æ®ç»è¿‡é‡‡æ ·åï¼Œæ•°æ®ç‚¹ä¼šå‡å°‘ï¼Œé‡‡æ ·ä¼šä¸¢å¤±ç»†èŠ‚ï¼Œå› æ­¤ä¸é€‚åˆéœ€è¦ç²¾ç¡®å€¼çš„åœºæ™¯ï¼›åŒæ—¶ç”±äºæ•°æ®ç‚¹çš„å‡å°‘ï¼Œä¸€äº›å›¾è¡¨çš„äº¤äº’åŠŸèƒ½ï¼Œå¦‚tooltipï¼Œä¹Ÿä¼šå—åˆ°å½±å“ã€‚</p>
</blockquote>
<p>ã€€ã€€é’ˆå¯¹æŠ˜çº¿å›¾ï¼Œæˆ‘ä»¬ä¹Ÿåº”ç”¨äº†lttbç®—æ³•è¿›è¡Œä¸‹é‡‡æ ·ã€‚ä»å¦‚ä¸‹æ•ˆæœå›¾ä¸­å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œç®—æ³•åœ¨å¤§å¹…å‡å°‘æ•°æ®ç‚¹çš„åŒæ—¶ï¼Œä»ä¿æŒäº†åŸå§‹æ›²çº¿çš„æ ¸å¿ƒè¶‹åŠ¿ä¸å½¢çŠ¶ï¼Œæ•´ä½“è¿˜åŸæ•ˆæœéå¸¸å¥½ã€‚å…¶ä¸»è¦è¯¯å·®å‡ºç°åœ¨å˜åŒ–å‰§çƒˆçš„è¾¹ç•ŒåŒºåŸŸæˆ–æå€¼ç‚¹é™„è¿‘ï¼Œå¯¼è‡´å±€éƒ¨æ‹Ÿåˆä¸å¤Ÿå¹³æ»‘ã€‚</p>
<p>ã€€ã€€ç›¸è¾ƒä¹‹ä¸‹ï¼Œåœ¨ä¹‹å‰æŸ±çŠ¶å›¾çš„æµ‹è¯•ä¸­ï¼Œlttbç®—æ³•å› ä¼šæ”¹å˜ç¦»æ•£æŸ±çš„åˆ†å¸ƒä½ç½®è€Œå¯¼è‡´ä¿¡æ¯å¤±çœŸï¼Œå› æ­¤å®ƒæ›´é€‚ç”¨äºæŠ˜çº¿å›¾è¿™ç±»å¼ºè¿ç»­æ€§çš„åºåˆ—æ•°æ®å¯è§†åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c923f7edcec4841820c839306104a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=e56y8qdbKJhEXmeh%2FcjjLq5KPLc%3D" alt="æŠ˜çº¿å›¾çš„lttbé‡‡æ ·æ•ˆæœ" loading="lazy"/></p>
<h4 data-id="heading-4">lttbç®—æ³•åŸç†</h4>
<p>ã€€ã€€é‰´äºLTTBç®—æ³•åœ¨é™é‡‡æ ·ä¸­è¡¨ç°å‡ºçš„å‡ºè‰²æ•ˆæœï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ·±å…¥æ¢ç©¶å…¶æ ¸å¿ƒå®ç°åŸç†ã€‚ä½œä¸ºEChartsç­‰ä¸»æµå¯è§†åŒ–åº“é‡‡ç”¨çš„å…³é”®ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ­¥éª¤æ˜¯å°†æ•°æ®ç‚¹åˆ†ç»„ä¸ºå¤šä¸ªè¿ç»­çš„â€œæ¡¶â€ï¼Œå¹¶åœ¨æ¯ä¸ªæ¡¶å†…ä»…ç­›é€‰ä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„ç‚¹ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªä»£è¡¨ç‚¹æ˜¯å¦‚ä½•è¢«é€‰å®šçš„ï¼Ÿè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®åœ¨äºç†è§£å…¶â€œæœ€å¤§ä¸‰è§’å½¢é¢ç§¯â€çš„ç­›é€‰å‡†åˆ™ã€‚</p>
<pre><code class="hljs language-text" lang="text">æ•°æ®ç‚¹åˆ†å¸ƒï¼š
   â–²
   â”‚                                  
   â”‚             æ¡¶A          æ¡¶B          æ¡¶C
   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚          â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢   â”‚    â”‚  â€¢   â”‚    â”‚  â€¢   â”‚
   â”‚          â”‚  â€¢ â€¢ â”‚    â”‚â€¢  â€¢  â”‚    â”‚  â€¢ â€¢ â”‚
   â”‚         â€¢â”‚ â€¢  â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚   â€¢â”‚â€¢   â€¢ â”‚
   â”‚       â€¢ â€¢â”‚â€¢    â€¢â”‚ â€¢ â€¢â”‚â€¢    â€¢â”‚â€¢ â€¢ â”‚â€¢    â€¢â”‚
   â”‚     â€¢ â€¢  â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚â€¢ â€¢ â”‚     â€¢â”‚
   â”‚   â€¢ â€¢    â”‚      â”‚â€¢ â€¢ â”‚      â”‚â€¢ â€¢ â”‚      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â–¶
   0          10     20    30     40    50     60
                 frameSize = 10ä¸ªç‚¹/æ¡¶
</code></pre>
<p>ã€€ã€€æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ¡¶Açš„ç‚¹é€‰æ‹©åˆå§‹ä½ç½®çš„ç‚¹ï¼Œå½“æˆ‘ä»¬å¼€å§‹é€‰å–ä¸‹ä¸€ä¸ªæ¡¶Bæ—¶ç‚¹æ—¶ï¼Œå†ä¸‹ä¸€ä¸ªæ¡¶Cçš„ç‚¹ï¼Œæˆ‘ä»¬æš‚å®šä¸ºè¿™ä¸ªæ¡¶çš„å¹³å‡å€¼ï¼›è¿™æ ·ï¼Œæˆ‘ä»¬å‰åæ¡¶çš„ç‚¹éƒ½ç¡®å®šäº†ï¼Œè®©æˆ‘ä»¬å›åˆ°æ¡¶Bç‚¹çš„é€‰æ‹©ä¸Šæ¥ï¼›è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éå†æ¡¶Bçš„æ‰€æœ‰ç‚¹ï¼Œè®¡ç®—ABCä¸‰ä¸ªæ¡¶çš„ç‚¹å½¢æˆä¸‰è§’å½¢çš„é¢ç§¯ï¼Œå¹¶é€‰æ‹©é¢ç§¯æœ€å¤§çš„ç‚¹ä½œä¸ºè¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<p>ã€€ã€€ä¸ºä»€ä¹ˆé¢ç§¯å¤§çš„ç‚¹å°±èƒ½ä»£è¡¨è¿™ä¸ªæ¡¶å‘¢ï¼Ÿæˆ‘ä»¬æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœBç‚¹é è¿‘äº†ACè¿çº¿ä¸Šï¼Œé‚£ä¹ˆBç‚¹å‡ ä¹å°±æ²¡æœ‰æä¾›äº†æ–°çš„ä¿¡æ¯äº†ã€‚</p>
<pre><code class="hljs language-text" lang="text">   Aâ”€â”€â”€â”€â”€Bâ”€â”€â”€â”€â”€C
é¢ç§¯ â‰ˆ 0ï¼ˆä¸‰ç‚¹å‡ ä¹å…±çº¿ï¼‰
</code></pre>
<p>ã€€ã€€ä½†æ˜¯å¦‚æœBç‚¹è¿œç¦»ACè¿çº¿ï¼Œé‚£ä¹ˆBç‚¹å°±æä¾›äº†æ–°çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆBç‚¹å°±å¯ä»¥ä»£è¡¨è¿™ä¸ªæ¡¶çš„ç‚¹ã€‚</p>
<pre><code class="hljs language-text" lang="text">         B
        / \
       /   \
      /     \
     A       C
é¢ç§¯å¾ˆå¤§ï¼ŒBç‚¹ä»£è¡¨äº†é‡è¦ç‰¹å¾
</code></pre>
<p>ã€€ã€€å½“æˆ‘ä»¬å·²çŸ¥äºŒç»´å¹³é¢ä¸Šä¸Šä¸‰ä¸ªç‚¹çš„åæ ‡ï¼Œåˆ©ç”¨åˆä¸­çš„çŸ¥è¯†å°±èƒ½æ¨å¯¼ä¸‰è§’å½¢çš„é¢ç§¯ä¸ºï¼š</p>
<blockquote>
<p>ä¸‰è§’å½¢é¢ç§¯ = 0.5 Ã— |AB Ã— AC| = 0.5 Ã— |(x2-x1)(y3-y1) - (x3-x1)(y2-y1)|</p>
</blockquote>
<p>ã€€ã€€ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ¨å¯¼è¿‡ç¨‹:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/620a8b7454224f43a51fef951efedc3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=l8uMBJfaWpv4o%2FZluo0OR0EIjdk%3D" alt="ä¸‰è§’å½¢é¢ç§¯å…¬å¼" loading="lazy"/></p>
<p>ã€€ã€€æˆ‘ä»¬è®¿é—®Echartsä»“åº“ä¸­æŸ¥çœ‹æºç ï¼Œå‘ç°lttbç®—æ³•ä»£ç åœ¨<code>src/data/DataStore.ts</code>çš„lttbDownSampleå‡½æ•°ä¸­å®ç°ï¼›æœ‰äº†ä¸Šé¢ç†è®ºçš„æ”¯æ’‘ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥å¥½å¥½çš„æ‹†è§£æ‹†è§£è¿™ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * Large data down sampling using largest-triangle-three-buckets
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">valueDimension</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">targetCount</span>
 */</span>
<span class="hljs-title function_">lttbDownSample</span>(<span class="hljs-params">
    valueDimension: DimensionIndex,
    rate: <span class="hljs-built_in">number</span>
</span>){
  <span class="hljs-comment">// æ€»æ•°æ®ç‚¹æ•°ï¼Œå¦‚ 10000</span>
  <span class="hljs-keyword">const</span> len = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">count</span>();

  <span class="hljs-comment">// æ¯ä¸ªæ¡¶çš„å¤§å°ï¼Œå¦‚rate = 0.1ï¼Œåˆ™frameSize = 10</span>
  <span class="hljs-keyword">const</span> frameSize = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-number">1</span> / rate);
}
</code></pre>
<p>ã€€ã€€é¦–å…ˆä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè·å–æ•°æ®ç‚¹çš„æ€»æ•°ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ¡¶çš„å¤§å°ï¼›è¿™é‡Œä¼ å…¥çš„valueDimensionä»£è¡¨å€¼çš„ç»´åº¦ï¼Œå¦‚æœç›´æ¥ä¼ å…¥æ•°æ®åˆ—è¡¨ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œå› æ­¤è¿™é‡Œçš„åšæ³•æ˜¯ä¼ å…¥æ•°æ®ç»´åº¦ï¼Œé€šè¿‡ç»´åº¦æ¥è·å–æ•°æ®ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªæ¡¶çš„è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> nextFrameStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len - <span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> nextFrameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize * <span class="hljs-number">2</span>, len);

  <span class="hljs-comment">// è®¡ç®—ä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡ç‚¹</span>
  <span class="hljs-keyword">const</span> avgX = (nextFrameEnd + nextFrameStart) / <span class="hljs-number">2</span>; <span class="hljs-comment">// Xåæ ‡å¹³å‡å€¼</span>
  <span class="hljs-keyword">let</span> avgY = <span class="hljs-number">0</span>; <span class="hljs-comment">// Yåæ ‡å¹³å‡å€¼</span>
}
</code></pre>
<p>ã€€ã€€ç„¶åæˆ‘ä»¬å¼€å§‹éå†æ•°æ®ç‚¹ï¼Œæˆ‘ä»¬å‘ç°iæ˜¯ä»1å¼€å§‹çš„ï¼Œå› ä¸ºæˆ‘ä»¬é»˜è®¤ç¬¬ä¸€ä¸ªç‚¹å°±æ˜¯ç¬¬ä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹ï¼›æ¥ç€ï¼Œåœ¨å½“å‰æ¡¶éå†ä¸‹ï¼Œæˆ‘ä»¬å…ˆè¦è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶Cçš„å¹³å‡ç‚¹ï¼ˆavgXï¼Œ avgYï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = nextFrameStart; idx &lt; nextFrameEnd; idx++) {
      <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªæ¡¶ä¸Šé¢æ¯ä¸€ä¸ªç‚¹çš„å€¼</span>
      <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
      avgY += y <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
  }
  avgY /= (nextFrameEnd - nextFrameStart);
}
</code></pre>
<p>ã€€ã€€ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹éå†ä¸‹ä¸€ä¸ªCæ¡¶ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œå¹¶è®¡ç®—å‡ºä¸‹ä¸€ä¸ªæ¡¶çš„å¹³å‡å€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> maxArea;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// å½“å‰æ¡¶çš„èµ·å§‹ç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameStart = i;
  <span class="hljs-comment">// å½“å‰æ¡¶çš„ç»“æŸç´¢å¼•</span>
  <span class="hljs-keyword">const</span> frameEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i + frameSize, len);

  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Xåæ ‡</span>
  <span class="hljs-keyword">const</span> pointAX = i - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// ä¸Šä¸€ä¸ªç‚¹çš„Yå€¼</span>
  <span class="hljs-keyword">const</span> pointAY = dimStore[currentRawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;

  <span class="hljs-comment">// å½“å‰æ¡¶æœ€å¤§çš„é¢ç§¯</span>
  maxArea = -<span class="hljs-number">1</span>;
}
</code></pre>
<p>ã€€ã€€ç´§æ¥ç€ï¼Œæˆ‘ä»¬ä¸ºå½“å‰æ¡¶Bç‚¹çš„éå†å‡†å¤‡ä¸€ä¸‹æ•°æ®ï¼ŒframeStartå’ŒframeEndæ˜¯å½“å‰æ¡¶Bçš„è¾¹ç•Œï¼ŒpointAXå’ŒpointAYæ˜¯ä¸Šä¸€ä¸ªæ¡¶Açš„åæ ‡ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°è¿™é‡Œçš„pointAXå–å¾—æ˜¯ä¸Šä¸€ä¸ªæ¡¶æœ€åä¸€ä¸ªç‚¹çš„åæ ‡i - 1ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½å°†ä¸Šä¸€ä¸ªæ¡¶çš„é€‰æ‹©ç‚¹å­˜èµ·æ¥ä½¿ç”¨ï¼Œè¿™å…¶å®æ˜¯Echartsä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œç‰ºç‰²äº†ä¸€ç‚¹ç²¾åº¦ï¼Œå‡å°‘å˜é‡è·Ÿè¸ªã€‚</p>
</blockquote>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¾ªç¯éå†æ¯ä¸ªæ¡¶</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; len - <span class="hljs-number">1</span>; i += frameSize) {
  <span class="hljs-comment">// çœç•¥ä¸Šé¢ä»£ç </span>
  <span class="hljs-comment">// å¾ªç¯éå†æ¡¶Bä¸­çš„æ•°æ®ç‚¹</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> idx = frameStart; idx &lt; frameEnd; idx++) {
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Xåæ ‡</span>
    <span class="hljs-keyword">const</span> rawIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRawIndex</span>(idx);
    <span class="hljs-comment">// å½“å‰ç‚¹çš„Yåæ ‡</span>
    <span class="hljs-keyword">const</span> y = dimStore[rawIndex] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>;
    <span class="hljs-comment">// è®¡ç®—ä¸‰è§’å½¢çš„é¢ç§¯</span>
    area = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>((pointAX - avgX) * (y - pointAY)
      - (pointAX - idx) * (avgY - pointAY)
    );
    <span class="hljs-keyword">if</span> (area &gt; maxArea) {
      maxArea = area;
      nextRawIndex = rawIndex;
    }
  }

  newIndices[sampledIndex++] = nextRawIndex;
}
</code></pre>
<p>ã€€ã€€æœ€åè¿™ä¸ªä»£ç æ˜¯æ•´ä¸ªç®—æ³•çš„æ ¸å¿ƒä»£ç ,ä¹Ÿæ˜¯æœ€ç²¾å¦™çš„åœ°æ–¹ï¼›åŸºäºä¹‹å‰æ¡¶çš„å¾ªç¯ï¼Œæˆ‘ä»¬åœ¨å½“å‰æ¡¶å†…ï¼Œéå†æ¡¶ä¸­æ¯ä¸ªæ•°æ®ç‚¹ï¼ŒrawIndexå’Œyè¡¨ç¤ºå½“å‰ç‚¹çš„åæ ‡ï¼›è€Œè¿™é‡Œçš„areaå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„ä¸‰è§’å½¢çš„è®¡ç®—å…¬å¼ï¼Œç»è¿‡ä¹‹å‰å¯¹äºæ¡¶Aã€æ¡¶Bã€æ¡¶Cçš„ç‚¹å‡†å¤‡ï¼Œç›¸ä¿¡è¿™é‡Œçš„areaè®¡ç®—ç›¸ä¿¡å¤§å®¶éƒ½èƒ½å¤Ÿç†è§£äº†ï¼›æœ€åå¦‚æœareaè¶…å‡ºäº†è®°å½•çš„æœ€å¤§é¢ç§¯maxAreaï¼Œåˆ™å°†å½“å‰ç‚¹åŠ å…¥åˆ°æ–°çš„é‡‡æ ·æ•°æ®ä¸­è¿›è¡Œæ•°æ®ç•™å­˜ã€‚</p>
<p>ã€€ã€€çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç®—æ³•çš„ç²¾å¦™ï¼Œéå¾—äº²æ‰‹è¯•ä¸€ä¸‹ä¸å¯ã€‚ä¸ºæ­¤ï¼Œç¬”è€…å†™äº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fgallery.xieyufei.com%2Fcase%2Falgorithm%2Flttb" target="_blank" title="https://gallery.xieyufei.com/case/algorithm/lttb" ref="nofollow noopener noreferrer">ç®€å•çš„é¡µé¢</a>æ¥æ¼”ç¤ºLTTBç®—æ³•çš„å®é™…æ•ˆæœï¼Œé»˜è®¤è®¾ç½®é‡‡æ ·ç‡rateä¸º0.1ï¼ŒåŒæ—¶å¯¹æŠ˜çº¿å›¾æ•°æ®è¿›è¡Œé‡‡æ ·å¯¹æ¯”ï¼Œå°±èƒ½çœ‹åˆ°å’ŒåŸå§‹æ•°æ®ä¹‹é—´çš„ç»†å¾®å·®å¼‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68032c1dcb8c4c43a7dae545906e4145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=f63zVFdEVw2%2Bhpm6bXwoEBljbME%3D" alt="æ‰‹å†™lttbç®—æ³•é‡‡æ ·çš„æ•ˆæœ" loading="lazy"/></p>
<h3 data-id="heading-5">dataZoomåˆ†å—æ¸²æŸ“</h3>
<p>ã€€ã€€åœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ï¼Œå¯ç”¨<code>dataZoomç»„ä»¶</code>æ˜¯å®ç°æ€§èƒ½è·ƒå‡çš„æ ¸å¿ƒç­–ç•¥ä¹‹ä¸€ã€‚å®ƒå°†æ¸²æŸ“æ¨¡å¼ä»ä¸€æ¬¡æ€§æ‰¿è½½å…¨é‡æ•°æ®ï¼Œè½¬å˜ä¸ºåŠ¨æ€çš„çª—å£åŒ–æ¸²æŸ“ã€‚åˆå§‹åŒ–æ—¶ä»…åŠ è½½è§†å£èŒƒå›´å†…çš„æ•°æ®ï¼Œéšç€ç”¨æˆ·æ»šåŠ¨æˆ–ç¼©æ”¾å†åŠ¨æ€åŠ è½½å…¶ä»–éƒ¨åˆ†ã€‚è¿™ç§æ–¹å¼å°†æ¸²æŸ“å‹åŠ›åˆ†æ•£åˆ°å¤šæ¬¡è½»é‡çº§æ“ä½œä¸­ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å•æ¬¡æ¸²æŸ“å¡é¡¿ï¼Œå¤§å¹…æå‡äº†äº¤äº’å“åº”é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> option = {
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
};
</code></pre>
<p>ã€€ã€€ç„¶è€Œï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªçŠ¶æ€å†²çªé—®é¢˜ï¼Œæ¯æ¬¡ä»æ¥å£è·å–æ–°æ•°æ®å¹¶é‡æ¸²æŸ“å›¾è¡¨æ—¶ï¼ŒdataZooméƒ½ä¼šè¢«å¼ºåˆ¶é‡ç½®åˆ°åˆå§‹çš„[0, 20]åŒºé—´ã€‚å¦‚æœç”¨æˆ·åœ¨ä¹‹å‰å·²ç»é€šè¿‡æ‹–æ‹½ç¼©æ”¾æµè§ˆäº†å…¶ä»–æ•°æ®åŒºåŸŸï¼Œè¿™ä¸ªè¡Œä¸ºå°±ä¼šç ´åå…¶æ¢ç´¢çŠ¶æ€ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒå‰²è£‚ã€‚</p>
<p>ã€€ã€€ç¬¬ä¸€ç§å¸¸è§„çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬åœ¨æ ¸å¿ƒçš„å›¾è¡¨æ¸²æŸ“å‡½æ•°<code>renderChart</code>ä¸­å¼•å…¥ä¸€ä¸ªå®ˆå«å‚æ•°isInitialã€‚åªæœ‰å½“ isInitial ä¸º trueï¼ˆä¾‹å¦‚åˆæ¬¡æ¸²æŸ“æ—¶ï¼‰ï¼Œæ‰è®¾ç½®dataZoomçš„åŒºé—´ã€‚åœ¨å¸¸è§„çš„æ•°æ®æ›´æ–°æ¸²æŸ“ä¸­ï¼Œåˆ™ä¿ç•™ç”¨æˆ·å½“å‰äº¤äº’çŠ¶æ€ï¼Œä»…åˆ·æ–°æ•°æ®è€Œä¸è§¦åŠ¨ç¼©æ”¾ç»„ä»¶ã€‚</p>
<p>ã€€ã€€å¦ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨setOptionæ—¶ï¼Œä½¿ç”¨<code>replaceMerge</code>å‚æ•°ï¼Œå‘Šè¯‰EChartsåªæ›¿æ¢æŒ‡å®šçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶ï¼ˆå¦‚ dataZoomï¼‰ä¿æŒä¸å˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">echartsInst.<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">dataZoom</span>: [
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">"inside"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>
    },
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"slider"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-number">20</span>,
    },
  ],
  <span class="hljs-attr">series</span>:[
    <span class="hljs-comment">//...</span>
  ]
}, {
  <span class="hljs-attr">notMerge</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">replaceMerge</span>: [<span class="hljs-string">"xAxis"</span>, <span class="hljs-string">"series"</span>],
})
</code></pre>
<p>ã€€ã€€è¿™æ ·å³ä½¿å¤šæ¬¡setOptionä¹Ÿä¸ä¼šé‡ç½®dataZoomçš„åŒºé—´ã€‚</p>
<h3 data-id="heading-6">å¤§æ•°æ®æ¨¡å¼ä¸æ¸è¿›å¼æ¸²æŸ“</h3>
<p>ã€€ã€€ç»å¸¸æŸ¥çœ‹Echartså®˜æ–¹æ–‡æ¡£çš„å°ä¼™ä¼´ï¼Œç›¸ä¿¡éƒ½çœ‹åˆ°è¿‡largeå’Œprogressiveç­‰å±æ€§ï¼Œä½†æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ç”¨åˆ°largeå’Œprogressiveå‘¢ï¼Ÿç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½ä¸€å¤´é›¾æ°´ï¼Œè¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°±æ¥å¥½å¥½è¯´é“è¯´é“ã€‚</p>
<p>ã€€ã€€<code>largeå±æ€§</code>æ˜¯EChartsä¸ºæµ·é‡æ•°æ®æ¸²æŸ“è®¾è®¡çš„ä¸“ç”¨æ€§èƒ½ä¼˜åŒ–å¼€å…³ï¼Œé€šå¸¸æŒ‡æ•°æ®é‡åœ¨æ•°ä¸‡åˆ°æ•°ç™¾ä¸‡çº§åˆ«ï¼› å½“ä½ çš„æ•°æ®é‡é¢„è®¡è¾¾åˆ°æ­¤è§„æ¨¡æ—¶ï¼Œå¼€å¯æ­¤é€‰é¡¹å°†ç›´æ¥è°ƒç”¨åº•å±‚ä¼˜åŒ–ç®—æ³•ï¼Œä»è€Œè·å¾—æ˜¾è‘—çš„æ¸²æŸ“æ€§èƒ½æå‡ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡è¡¨æ ¼å®é™…æ„Ÿå—ä¸€ä¸‹10w+çº§çš„å®æµ‹å¯¹æ¯”æ•°æ®ï¼š</p>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>æœªå¼€å¯ large</th><th>å¼€å¯ large</th></tr></thead><tbody><tr><td>FPS</td><td>3-10</td><td>51-60</td></tr><tr><td>MS(æ¸²æŸ“ä¸€å¸§æ‰€éœ€çš„æ¯«ç§’æ•°)</td><td>179-246</td><td>17-28</td></tr><tr><td>å†…å­˜å ç”¨(MB)</td><td>277-305</td><td>53-59</td></tr><tr><td>äº¤äº’å“åº”</td><td>å¡é¡¿æ˜æ˜¾</td><td>åŸºæœ¬æµç•…</td></tr></tbody></table>
<p>ã€€ã€€<code>largeThreshold</code>æ˜¯ä¸largeå±æ€§é…åˆä½¿ç”¨çš„é˜ˆå€¼å‚æ•°ï¼Œå®ƒå®šä¹‰äº†å¯ç”¨å¤§è§„æ¨¡ä¼˜åŒ–æ¨¡å¼çš„æ•°æ®é‡ä¸‹é™ã€‚å½“ä¸”ä»…å½“æ•°æ®é¡¹æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œä¼˜åŒ–ç»˜åˆ¶é€»è¾‘æ‰ä¼šç”Ÿæ•ˆï¼›åä¹‹ï¼Œç³»ç»Ÿå°†ä½¿ç”¨æ ‡å‡†æ¸²æŸ“æµç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„å¼€é”€ï¼›å¤§å¤šæ•°æƒ…å†µä¸‹æ— éœ€æ‰‹åŠ¨è°ƒæ•´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      data,
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
    },
  ],
});
</code></pre>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„</strong>çš„æ˜¯ï¼Œä¸æ˜¯æ¯ç§ç±»å‹çš„å›¾è¡¨éƒ½æ”¯æŒlargeå’ŒlargeThresholdå±æ€§çš„ï¼Œç›®å‰ä»…æœ‰barå’Œscatterå›¾è¡¨æ”¯æŒã€‚</p>
</blockquote>
<p>ã€€ã€€éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œåœ¨largeæ¨¡å¼ä¸‹ï¼ŒEchartså‡ºäºæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘ï¼Œæ— æ³•ä¸ºå•ä¸ªæ•°æ®ç‚¹è®¾ç½®ç‹¬ç«‹æ ·å¼ï¼Œæ‰€æœ‰æ•°æ®ç‚¹å°†å…±äº«åŒä¸€å¥—æ ·å¼é…ç½®ï¼›æ¯”å¦‚ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºæœ€åä¸€ä¸ªæ•°æ®é¡¹å•ç‹¬è®¾ç½®çš„itemStyleå°±ä¸ä¼šç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">"bar"</span>,
      <span class="hljs-attr">data</span>: [
        <span class="hljs-number">10</span>,
        <span class="hljs-number">20</span>,
        <span class="hljs-number">30</span>,
        <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šç”Ÿæ•ˆ</span>
        { <span class="hljs-attr">value</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">itemStyle</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> } }
      ],
      <span class="hljs-attr">large</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">largeThreshold</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">itemStyle</span>: {
        <span class="hljs-comment">// æ‰€æœ‰æŸ±å­éƒ½æ˜¯è¿™ä¸ªé¢œè‰²</span>
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>
      }
    },
  ],
});
</code></pre>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æœ¬è´¨æ˜¯å¼€å¯â€œåˆ†ç‰‡æ¸²æŸ“â€æ¨¡å¼ï¼Œç”¨ä»¥è§£å†³è¶…å¤§è§„æ¨¡å›¾å½¢å…ƒç´ ï¼ˆæ•°åƒè‡³åƒä¸‡çº§ï¼‰é€ æˆçš„æµè§ˆå™¨ç¬æ—¶é˜»å¡é£é™©ã€‚å¯ç”¨åï¼ŒEChartsä¼šå°†åºå¤§çš„æ•°æ®é›†è‡ªåŠ¨åˆ†å‰²ä¸ºå¤šä¸ªå°å—ï¼ˆchunkï¼‰ï¼Œåœ¨å¤šä¸ªåŠ¨ç”»å¸§ä¸­ä¾æ¬¡æ¸²æŸ“ï¼Œä»è€Œå°†ä¸€æ¬¡æ€§çš„æ²‰é‡è´Ÿè½½åˆ†æ•£ä¸ºå¹³ç¼“çš„å¢é‡ä»»åŠ¡ã€‚æˆ‘ä»¬åœ¨æ•£ç‚¹å›¾ä¸Šå®æµ‹æ­¤åŠŸèƒ½ï¼Œå¯ä»¥æ¸…æ™°åœ°è§‚å¯Ÿåˆ°æ•°ä¸‡ä¸ªæ•°æ®ç‚¹å¦‚åŒé›¨ç‚¹èˆ¬åœ¨ç”»å¸ƒä¸Šé€æ¸æµ®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Array</span>&lt;[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]&gt; = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
  data.<span class="hljs-title function_">push</span>([
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>, 
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>
  ]);
}

<span class="hljs-title function_">setOption</span>({
  <span class="hljs-attr">series</span>: [
    {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"scatter"</span>,
        data,
        <span class="hljs-attr">progressive</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">progressiveThreshold</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">progressiveChunkMode</span>: <span class="hljs-string">'mod'</span>
    },
  ],
});
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c802f9023f1c40b7a4fb8beb81f4aeef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LCi5bCP6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770856674&amp;x-signature=DyhW2X74eyMmE1K356VMb3xs2dc%3D" alt="progressiveå±æ€§æ•ˆæœ" loading="lazy"/></p>
<p>ã€€ã€€<code>progressiveå±æ€§</code>æ§åˆ¶æ¸è¿›å¼æ¸²æŸ“çš„ â€œç²’åº¦â€ï¼Œå…¶å€¼ä¸ºæ¯ä¸€å¸§æ¸²æŸ“çš„å›¾å½¢æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º400ï¼Œè®¾ä¸º0ï¼Œåˆ™ç›¸å½“äºå…³é—­æ­¤åŠŸèƒ½ï¼›è€Œ<code>progressiveThresholdå±æ€§</code>åˆ™è®¾å®šäº†å¯ç”¨æ­¤åŠŸèƒ½çš„ â€œé—¨æ§›â€ã€‚ä»…å½“å›¾å½¢æ€»æ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œprogressiveçš„é…ç½®æ‰ä¼šç”Ÿæ•ˆï¼Œå¼€å§‹åˆ†å¸§æ¸²æŸ“ã€‚</p>
<blockquote>
<p>å¼€å¯largeé»˜è®¤ä¼šå¼€å¯progressiveæ¸è¿›æ¸²æŸ“ã€‚</p>
</blockquote>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>ã€€ã€€åˆ°è¿™é‡Œï¼Œæˆ‘çš„Echartsæ€§èƒ½ä¼˜åŒ–ä¸‰éƒ¨æ›²æ€»ç®—å‘Šä¸€æ®µè½äº†ï¼›å½“çœ‹åˆ°ä¸šåŠ¡æ–¹åœ¨æµç•…æ¸²æŸ“ç€å››å¹´è®¾å¤‡æ•°æ®çš„å›¾è¡¨å‰éœ²å‡ºæ»¡æ„ç¬‘å®¹æ—¶ï¼Œæˆ‘å°±çŸ¥é“ï¼Œè¿™æ¬¡ä¼˜åŒ–çš„åŠªåŠ›æ²¡æœ‰ç™½è´¹ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬é¦–å…ˆæ„å»ºäº†æ•°æ®åˆ†å‰²æœºåˆ¶ã€‚å½“ç”¨æˆ·é€‰æ‹©è·¨å¹´åº¦çš„æŸ¥è¯¢èŒƒå›´æ—¶ï¼Œç³»ç»Ÿä¸å†å‚»ä¹ä¹åœ°ä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯åƒä¸€ä½ç»†å¿ƒçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå°†åšåšçš„å†å²æ¡£æ¡ˆæŒ‰æ—¶é—´ç« èŠ‚åˆ†å†Œå–å‡ºã€‚è¿™ä¸ªç®€å•çš„ç­–ç•¥ï¼Œå°†åŸæœ¬é•¿è¾¾14ç§’çš„æ¥å£å“åº”æ—¶é—´åˆ†è§£ä¸ºå¤šä¸ªæ¯«ç§’çº§çš„å¿«é€Ÿè¯·æ±‚ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†æµè§ˆå™¨çš„å†…å­˜è¿‡è½½å’Œç•Œé¢å†»ç»“ã€‚</p>
<p>ã€€ã€€æ¥ç€æˆ‘ä»¬å¼•å…¥äº†Web Workerå¹¶è¡Œè®¡ç®—ã€‚è¿™ç›¸å½“äºç»™æ•°æ®å¤„ç†æµç¨‹é›‡ä½£äº†ä¸€ä½ä¸“å±çš„åå°åŠ©ç†ã€‚æ‰€æœ‰è€—æ—¶çš„æ•°æ®æ¸…æ´—ã€æ ¼å¼è½¬æ¢å’ŒæŒ‡æ ‡è®¡ç®—éƒ½è¢«è½¬ç§»åˆ°ç‹¬ç«‹çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸»çº¿ç¨‹å¾—ä»¥ä¿æŒè½»ç›ˆï¼Œç»§ç»­æµç•…åœ°å“åº”ç”¨æˆ·çš„æ¯ä¸€æ¬¡ç‚¹å‡»å’Œæ»‘åŠ¨ã€‚è¿™ç§å‰åå°åˆ†å·¥åä½œçš„æ¨¡å¼ï¼Œè®©æ•°æ®å¤„ç†ä»â€œé˜»å¡æ€§ä»»åŠ¡â€å˜æˆäº†â€œåå°æœåŠ¡â€ã€‚</p>
<p>ã€€ã€€æœ€åï¼Œæˆ‘ä»¬åœ¨Echartsæ¸²æŸ“å±‚æ–½å±•äº†ä¸€ç³»åˆ—ç»„åˆä¼˜åŒ–ã€‚é€šè¿‡LTTBé‡‡æ ·ç®—æ³•ï¼Œæˆ‘ä»¬åœ¨ä¿ç•™æ•°æ®è¶‹åŠ¿çµé­‚çš„åŒæ—¶ï¼Œå·§å¦™åœ°å‡å°‘äº†æ¸²æŸ“è´Ÿæ‹…ï¼›å€ŸåŠ©dataZoomçš„è§†å£åŠ¨æ€åŠ è½½ï¼Œæˆ‘ä»¬å®ç°äº†â€œæ‰€è§å³æ‰€å¾—â€çš„æŒ‰éœ€æ¸²æŸ“ï¼›è€Œå¯ç”¨largeå’Œprogressiveæ¨¡å¼ï¼Œåˆ™æ˜¯ç»™å›¾è¡¨å¼•æ“è£…ä¸Šäº†æ¶¡è½®å¢å‹ï¼Œè®©ä¸‡çº§æ•°æ®ç‚¹çš„ç»˜åˆ¶ä¹Ÿèƒ½è¾¾åˆ°60å¸§çš„æµç•…ä½“éªŒã€‚</p>
<p>ã€€ã€€ç°åœ¨å›é¡¾è¿™æ®µæ—…ç¨‹ï¼Œè®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°æ•°æ®å¯è§†åŒ–çš„æœ¬è´¨â€”â€”å®ƒä¸ä»…ä»…æ˜¯æ•°æ®çš„å›¾å½¢åŒ–å‘ˆç°ï¼Œæ›´æ˜¯ä¿¡æ¯ä¸æ´å¯Ÿçš„è‰ºæœ¯è¡¨è¾¾ã€‚å¥½äº†ï¼Œæˆ‘çš„ä¼˜åŒ–ä¹‹æ—…æš‚å‘Šä¸€æ®µè½ï¼Œä½†æŠ€æœ¯çš„æ¢ç´¢æ°¸æ— æ­¢å¢ƒã€‚é‚£ä¹ˆï¼Œä½ çš„é¡¹ç›®ä¸­æ˜¯å¦ä¹Ÿè—ç€éœ€è¦è¢«é©¯æœçš„â€œæ•°æ®å·¨å…½â€å‘¢ï¼Ÿå¸¦ä¸Šè¿™ä»½å®æˆ˜å¿ƒå¾—ï¼Œå¼€å§‹ä½ çš„ä¼˜åŒ–ä¹‹æ—…å§ï¼</p>
<p>å¦‚æœè§‰å¾—å†™å¾—è¿˜ä¸é”™ï¼Œè¯·å…³æ³¨æˆ‘çš„<a href="//juejin.im/user/580038cebf22ec0064bd0b2d" target="_blank" title="//juejin.im/user/580038cebf22ec0064bd0b2d">æ˜é‡‘ä¸»é¡µ</a>ã€‚æ›´å¤šæ–‡ç« è¯·è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fxieyufei.com" target="_blank" title="https://xieyufei.com" ref="nofollow noopener noreferrer">è°¢å°é£çš„åšå®¢</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ ä¸çŸ¥é“çš„ v-on]]></title>    <link>https://juejin.cn/post/7603355275256954920</link>    <guid>https://juejin.cn/post/7603355275256954920</guid>    <pubDate>2026-02-06T06:18:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603355275256954920" data-draft-id="7603308967124795392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ ä¸çŸ¥é“çš„ v-on"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-02-06T06:18:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SuperEugene"/> <meta itemprop="url" content="https://juejin.cn/user/2366613652515256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ ä¸çŸ¥é“çš„ v-on
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2366613652515256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SuperEugene
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:18:24.000Z" title="Fri Feb 06 2026 06:18:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>v-on</code> æ˜¯ <code>Vue</code> çš„<strong>äº‹ä»¶ç»‘å®šæŒ‡ä»¤</strong>ï¼Œè¿‘æœŸåœ¨ä½¿ç”¨<code>Vxe Table</code>ç»„ä»¶åº“çš„æ—¶å€™çœ‹è§äº†ä¸€ä¸ªå°±èŒå…¬å¸é¡¹ç›®åœºæ™¯ä¸å¸¸ç”¨çš„å†™æ³•ï¼Œåœ¨æ­¤åˆ†äº«ç»™åŒæ ·ä¸å¸¸ç”¨æˆ–ä¸çŸ¥é“çš„åŒå­¦ä»¬ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//æ­¤å¤„å¤åˆ¶çš„æ˜¯vxetbaleç»„ä»¶åº“çš„ç¤ºä¾‹ä»£ç </span>
&lt;vxe-grid v-bind=<span class="hljs-string">"gridOptions"</span> v-on=<span class="hljs-string">"gridEvents"</span>&gt;&lt;/vxe-grid&gt;

<span class="hljs-keyword">const</span> <span class="hljs-attr">gridEvents</span>: <span class="hljs-title class_">VxeGridListeners</span> = { 
    pageChange ({ pageSize, currentPage }) { 
        pagerVO.<span class="hljs-property">currentPage</span> = currentPage
        pagerVO.<span class="hljs-property">pageSize</span> = pageSize
        <span class="hljs-title function_">loadList</span>()
    } 
}
</code></pre>
<p>v-onç»å¤§éƒ¨åˆ†äººåªçŸ¥é“æ˜¯vueæä¾›çš„äº‹ä»¶ç»‘å®šapiï¼Œé€šå¸¸ç”¨æ³•ï¼š<code>v-on:click="getInfo"</code> æˆ–è€…ç®€å†™ <code>@click="handleClick"</code>ã€‚åœ¨ä¸Šè¿°æ¡ˆä¾‹ä»£ç ä¸­<code>v-on</code>åé¢ç›´æ¥å°±æ˜¯<code>="gridEvents"</code>è¿™å¹¶ä¸æ˜¯é”™è¯¯å†™æ³•ï¼Œ è€Œæ˜¯<code>v-on</code>çš„<strong>å¯¹è±¡å¼äº‹ä»¶ç»‘å®š</strong>å†™æ³•ã€‚å’Œå¸¸ç”¨çš„ <code>@click="handleClick"</code> å±äºåŒä¸€å¥—äº‹ä»¶ç»‘å®šæœºåˆ¶ï¼Œä»…å†™æ³•å½¢å¼ä¸åŒã€‚</p>
<h2 data-id="heading-0">ä¸¤ç§å†™æ³•å¯¹æ¯”</h2>
<h3 data-id="heading-1">1. å•ä¸ªäº‹ä»¶ï¼ˆå¸¸è§„ç†Ÿæ‚‰å†™æ³•ï¼‰</h3>
<p><code>@</code> æ˜¯ <code>v-on:</code> çš„è¯­æ³•ç³–ï¼Œä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;button <span class="hljs-meta">@click</span>=<span class="hljs-string">"handleClick"</span>&gt;ç‚¹å‡»&lt;/button&gt;
&lt;!-- ç­‰ä»·äº --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-2">2. å¯¹è±¡å¼ç»‘å®šï¼ˆv-on="å¯¹è±¡" ç”¨æ³•ï¼‰</h3>
<p>ç›´æ¥é€šè¿‡ <code>v-on</code> ç»‘å®šä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œé€‚ç”¨äºå¤šä¸ªäº‹ä»¶ç»‘å®šçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid v-on=<span class="hljs-string">"gridEvents"</span>&gt;&lt;/vxe-grid&gt;
</code></pre>
<p>å…¶ä¸­ <code>gridEvents</code> æ˜¯ä¸€ä¸ª<strong>é”®å€¼å¯¹å¯¹è±¡</strong>ï¼š</p>
<ul>
<li>é”®ï¼šäº‹ä»¶åï¼ˆå¦‚ <code>pageChange</code>ã€<code>cellClick</code>ï¼‰</li>
<li>å€¼ï¼šè¯¥äº‹ä»¶å¯¹åº”çš„å¤„ç†å‡½æ•°<code>Vue</code> ä¼šè‡ªåŠ¨éå†è¿™ä¸ªå¯¹è±¡ï¼Œå°†æ¯ä¸ªé”®å€¼å¯¹è§£æä¸ºã€Œ<code>v-on:äº‹ä»¶å=å¤„ç†å‡½æ•°</code>ã€çš„å½¢å¼å®Œæˆç»‘å®šã€‚</li>
</ul>
<h2 data-id="heading-3">åœ¨ä»£ç ä¸­çš„å®é™…å«ä¹‰</h2>
<p>ä»¥ <code>vxe-table</code>çš„åˆ†é¡µäº‹ä»¶ä¸ºä¾‹ï¼Œå®é™…å®šä¹‰çš„äº‹ä»¶å¯¹è±¡å¦‚ä¸‹ï¼ˆåŒ…å«<code>TypeScript</code>ç±»å‹çº¦æŸï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">gridEvents</span>: <span class="hljs-title class_">VxeGridListeners</span> = {
  <span class="hljs-title function_">pageChange</span>(<span class="hljs-params">{ pageSize, currentPage }</span>) {
    pagerVO.<span class="hljs-property">currentPage</span> = currentPage
    pagerVO.<span class="hljs-property">pageSize</span> = pageSize
    <span class="hljs-title function_">loadList</span>()
  },
}
</code></pre>
<p>æ­¤æ—¶ <code>v-on="gridEvents"</code> å®Œå…¨ç­‰ä»·äº<strong>å•ä¸ªäº‹ä»¶ç»‘å®šçš„å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid v-<span class="hljs-attr">on</span>:pageChange=<span class="hljs-string">"gridEvents.pageChange"</span>&gt;&lt;/vxe-grid&gt;
</code></pre>
<p>å¦‚æœ <code>gridEvents</code> ä¸­åŒ…å«<strong>å¤šä¸ªäº‹ä»¶</strong>ï¼Œ<code>Vue</code>ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰äº‹ä»¶çš„æ‰¹é‡ç»‘å®šï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åŒ…å«å¤šä¸ªäº‹ä»¶çš„å¤„ç†å¯¹è±¡</span>
<span class="hljs-keyword">const</span> gridEvents = {
  <span class="hljs-attr">pageChange</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
  <span class="hljs-attr">editClosed</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
  <span class="hljs-attr">cellClick</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> { ... },
}
</code></pre>
<p>ç­‰ä»·äºæ‰‹åŠ¨ä¸ºæ¯ä¸ªäº‹ä»¶å•ç‹¬ç»‘å®šï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;vxe-grid
  v-<span class="hljs-attr">on</span>:pageChange=<span class="hljs-string">"gridEvents.pageChange"</span>
  v-<span class="hljs-attr">on</span>:editClosed=<span class="hljs-string">"gridEvents.editClosed"</span>
  v-<span class="hljs-attr">on</span>:cellClick=<span class="hljs-string">"gridEvents.cellClick"</span>
&gt;&lt;/vxe-grid&gt;
</code></pre>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å¼äº‹ä»¶ç»‘å®šå†™æ³•ï¼Ÿ</h2>
<ol>
<li><strong>äº‹ä»¶å¤šæ—¶æ›´ç®€æ´</strong>ï¼šæ— éœ€åœ¨æ¨¡æ¿ä¸­é‡å¤ä¹¦å†™å¤§é‡ <code>v-on:xxx="xxx"</code>ï¼Œä»…éœ€ä¸€ä¸ª <code>v-on="å¯¹è±¡"</code> å³å¯å®Œæˆæ‰¹é‡ç»‘å®šï¼Œç®€åŒ–æ¨¡æ¿ä»£ç ï¼›</li>
<li><strong>ä¾¿äºç»´æŠ¤</strong>ï¼šæ‰€æœ‰äº‹ä»¶çš„å¤„ç†å‡½æ•°éƒ½é›†ä¸­åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œäº‹ä»¶åå’Œå¯¹åº”é€»è¾‘ä¸€ä¸€å¯¹åº”ï¼Œåç»­æ–°å¢ / ä¿®æ”¹ / åˆ é™¤äº‹ä»¶æ—¶ï¼Œåªéœ€æ“ä½œè¯¥å¯¹è±¡ï¼Œæ— éœ€æ”¹åŠ¨æ¨¡æ¿ï¼›</li>
<li><strong>é€‚é…ç»„ä»¶åº“åœºæ™¯</strong>ï¼š <code>vxe-table</code>ã€<code>Element Plus</code>è¿™ç±» UI ç»„ä»¶åº“çš„å¤æ‚ç»„ä»¶ï¼ˆå¦‚è¡¨æ ¼ã€æ ‘å½¢æ§ä»¶ï¼‰é€šå¸¸æä¾›å¤§é‡äº‹ä»¶ï¼Œä½¿ç”¨å¯¹è±¡ç»Ÿä¸€é…ç½®äº‹ä»¶ï¼Œä»£ç ç»“æ„ä¼šæ›´æ¸…æ™°ã€‚</li>
</ol>
<p>ä»¥ä¸Šä¾¿æ˜¯å¯¹<code>v-on</code>çš„åˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£è®¨è®ºï¼Œä¸å¤§å®¶å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React çš„ ViewTransition å…ƒç´ ]]></title>    <link>https://juejin.cn/post/7602811649126891571</link>    <guid>https://juejin.cn/post/7602811649126891571</guid>    <pubDate>2026-02-05T00:58:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649126891571" data-draft-id="7602850166731472905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React çš„ ViewTransition å…ƒç´ "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-05T00:58:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React çš„ ViewTransition å…ƒç´ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T00:58:23.000Z" title="Thu Feb 05 2026 00:58:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Freacts-viewtransition-element%2F" target="_blank" title="https://frontendmasters.com/blog/reacts-viewtransition-element/" ref="nofollow noopener noreferrer">Reactâ€™s ViewTransition Element</a></p>
<p>ä½œè€…ï¼šChris Coyier</p>
<p>æ—¥æœŸï¼š2026å¹´1æœˆ30æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p>ä½œä¸ºä¸€ä¸ª View Transitions çš„çˆ±å¥½è€…ï¼ŒåŒæ—¶åˆåœ¨ç”¨ Reactï¼Œæˆ‘è‡ªç„¶ä¼šå…³æ³¨ React ç°åœ¨ç›´æ¥æä¾›äº†ä¸€ä¸ª <code>&lt;ViewTransition&gt;</code> å…ƒç´ ï¼ˆç›®å‰åœ¨ â€œCanaryâ€ é¢„å‘å¸ƒç‰ˆæœ¬ä¸­ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4728576e2e7349779a5eccab31609eed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770857902&amp;x-signature=hqNZ4FAkvFqE8mSdYaKtNgOokAk%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æƒ³çœ‹çœ‹å®ƒåˆ°åº•æ€ä¹ˆç”¨ï¼Œä½†åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆâ€¦â€¦<strong>åˆ«</strong>ç”¨å®ƒã€‚View Transitions æ˜¯ Web å¹³å°æœ¬èº«çš„ç‰¹æ€§ï¼Œä¸å±äºä»»ä½•æ¡†æ¶ã€‚æ‰€ä»¥ React ä¹Ÿæ— æ³•é˜»æ­¢æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚ç›´æ¥ç”¨å…¶å®ä¹Ÿä¸ç®—å¥‡æ€ªã€‚</p>
<h2 data-id="heading-0">åœ¨ React ä¸­ä½¿ç”¨ View Transitionsï¼ˆç»å…¸æ–¹å¼ï¼Ÿï¼‰</h2>
<p>åŒé¡µ View Transitions APIï¼ˆå¯¹ React æ›´ç›¸å…³ï¼Œè€Œä¸æ˜¯å¤šé¡µåˆ‡æ¢çš„é‚£ç§ï¼‰åŸºæœ¬æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åœ¨è¿™é‡Œæ”¹ DOM</span>
});
</code></pre>
<p>ä½†æ”¹ DOM è¿™ç§äº‹â€¦â€¦æ˜¯ React çš„å·¥ä½œã€‚å®ƒå¹¶ä¸å–œæ¬¢ä½ è‡ªå·±å»åŠ¨å®ƒã€‚æ‰€ä»¥ä¸å…¶ç›´æ¥æ“ä½œ DOMï¼Œæˆ‘ä»¬ä¸å¦‚åšäº›â€œæ›´ React çš„äº‹â€ï¼Œæ¯”å¦‚æ›´æ–° stateã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoOne</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">startViewTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
    &gt;</span>
      Button
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>è§†è§‰æ•ˆæœç”± CSS å®Œæˆã€‚çŠ¶æ€å˜åŒ–è§¦å‘ class å˜åŒ–ï¼Œè€Œ class æ”¹å˜æŒ‰é’®çš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button</span> {
  <span class="hljs-comment">/* button styles */</span>

  &amp;<span class="hljs-selector-class">.expanded</span> {
    scale: <span class="hljs-number">1.4</span>;
    rotate: -<span class="hljs-number">6deg</span>;
  }
}
</code></pre>
<h2 data-id="heading-1">å‡†å¤‡ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œè¿™ä¸ªå…ƒç´ è¿˜åªå­˜åœ¨äº React çš„ â€œCanaryâ€ ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä½ å¾—æ˜¾å¼å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install react@canary
</code></pre>
<p>ä½ çš„ <code>package.json</code> ä¼šæŠŠç‰ˆæœ¬å†™æˆ <code>canary</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"canary"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœä½ åœ¨å®¢æˆ·ç«¯ç”¨ Reactï¼Œä¹Ÿå¯ä»¥ç”¨ CDN çš„ import mapï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
{
  <span class="hljs-string">"imports"</span>: {
    <span class="hljs-string">"react"</span>: <span class="hljs-string">"https://esm.sh/react@canary"</span>,
    <span class="hljs-string">"react-dom"</span>: <span class="hljs-string">"https://esm.sh/react-dom@canary"</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">åœ¨ React ä¸­ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code></h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¯¼å…¥ <code>ViewTransition</code>ï¼Œå¹¶æŠŠå®ƒä½œä¸º JSX å…ƒç´ ä½¿ç”¨ï¼ŒåŒæ—¶é…åˆå®ƒçš„æ­æ¡£ <code>startTransition</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { startTransition, <span class="hljs-title class_">ViewTransition</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [buttonExpanded, setButtonExpanded] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleButton</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ä»¥æ›´â€œReactâ€çš„æ–¹å¼æ”¹å˜ DOM</span>
      <span class="hljs-title function_">setButtonExpanded</span>(!buttonExpanded);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ViewTransition</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">button</span> ${<span class="hljs-attr">buttonExpanded</span> ? "<span class="hljs-attr">expanded</span>" <span class="hljs-attr">:</span> ""}`}
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleButton}</span>
        &gt;</span>
          Button
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ViewTransition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  );
}
</code></pre>
<p>CSS å’Œä¸Šé¢ä¸€æ ·ï¼Œå› ä¸ºæœ¬è´¨è¿˜æ˜¯åˆ‡æ¢ classã€‚æ³¨æ„æˆ‘ä»¬æ²¡æœ‰ç”¨ <code>.classList.toggle("expanded")</code> è¿™ç§ç›´æ¥ DOM æ“ä½œï¼Œè€Œæ˜¯è®© React èµ°è‡ªå·±çš„æ¸²æŸ“æµç¨‹ã€‚</p>
<h2 data-id="heading-3">æ‰€ä»¥â€¦â€¦ä¸¤ç§æ–¹å¼éƒ½èƒ½ç”¨ï¼Ÿ</h2>
<p>æ˜¯çš„ï¼Œè‡³å°‘åœ¨è¿™äº›ç®€å• demo é‡Œéƒ½æ²¡é—®é¢˜ã€‚ç”šè‡³åŒé¡µæ··ç”¨ä¹Ÿå¯ä»¥ã€‚</p>
<p>ä¸€ä¸ªå°å·®å¼‚æ˜¯ï¼šå¦‚æœä½ ç›´æ¥ç”¨ <code>document.startViewTransition</code>ï¼Œéœ€è¦è‡ªå·±åŠ  <code>view-transition-name</code>ï¼›è€Œ <code>&lt;ViewTransition&gt;</code> ä¼šè‡ªåŠ¨å¸®ä½ åŠ ã€‚è¿™ç®—æ˜¯ <code>&lt;ViewTransition&gt;</code> çš„ä¸€ä¸ªå°åŠ åˆ†ç‚¹ã€‚</p>
<h3 data-id="heading-4">æˆ‘â€œè®¨åŒâ€çš„é‚£éƒ¨åˆ†</h3>
<p>æœ‰ä¸€éƒ¨åˆ†æˆ‘å¹¶ä¸å–œæ¬¢è¿™ä¸ªæ–¹æ¡ˆã€‚React å¹¶æ²¡æœ‰ç»™å‡ºå¤ªå¤šé¢å¤–ä»·å€¼ï¼Œå®ƒåªæ˜¯è¦æ±‚ä½ ç”¨ä¸€ç§ä¸ç ´åæ¡†æ¶è¿è¡Œæ–¹å¼çš„å†™æ³•ã€‚å¦‚æœä½ èŠ±äº†å¾ˆå¤šæ—¶é—´å»å­¦å®ƒï¼ˆè€Œä¸”<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact%2FViewTransition%23my-viewtransition-is-not-activating" target="_blank" title="https://react.dev/reference/react/ViewTransition#my-viewtransition-is-not-activating" ref="nofollow noopener noreferrer">ç¡®å®æœ‰ä¸å°‘å†…å®¹</a>ï¼‰ï¼Œè¿™äº›çŸ¥è¯†å¹¶ä¸å¤ªèƒ½è¿ç§»åˆ°å…¶ä»–åœ°æ–¹ã€‚</p>
<h3 data-id="heading-5">æˆ‘â€œå‹‰å¼ºæ¥å—â€çš„é‚£éƒ¨åˆ†</h3>
<p>React ä¸€ç›´ä»¥æ¥å°±å¸Œæœ›è‡ªå·±æŒæ§ DOMï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒå–ç‚¹ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œä½ å¿…é¡»è®©å®ƒæ¥åšä¸€äº›åè°ƒå·¥ä½œã€‚è¿™æ„å‘³ç€ä½¿ç”¨ <code>&lt;ViewTransition&gt;</code> å¯ä»¥â€œè‡ªåŠ¨ä¸æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸã€Suspense è¾¹ç•Œã€å¹¶å‘ç‰¹æ€§åè°ƒâ€ï¼Œå®Œæˆæ‰¹é‡æ›´æ–°ã€é˜²å†²çªã€åµŒå¥—ç®¡ç†ç­‰ä½ æˆ‘ä¸æƒ³æ“å¿ƒçš„äº‹æƒ…ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>&lt;ViewTransition&gt;</code> æœ‰ä¸€ç‚¹ç‚¹æ›´â€œå£°æ˜å¼â€ï¼šä½ æ˜ç¡®åŒ…è£¹äº†è¦è¿‡æ¸¡çš„åŒºåŸŸï¼Œæ›´ç¬¦åˆå¾ˆå¤šäººçš„å¿ƒæ™ºæ¨¡å‹ã€‚ä½†ä½ ä»ç„¶éœ€è¦è°ƒç”¨ <code>startTransition</code>ï¼Œæ‰€ä»¥ä»ç„¶æ˜¯åå‘½ä»¤å¼çš„ã€‚åœ¨æ›´å¤æ‚çš„åµŒå¥— UI ä¸­ï¼Œå¦‚ä½•ç»„ç»‡å®ƒå¯èƒ½ä¼šæœ‰äº›å›°æƒ‘ã€‚</p>
<p>æˆ‘å€’æ˜¯æŒºå–œæ¬¢ <code>&lt;ViewTransition&gt;</code> ä¸Šåƒ <code>enter</code>ã€<code>exit</code> è¿™æ ·çš„æ˜ç¡®å±æ€§ï¼Œå®ƒå¯¹åº”â€œè‡ªå¸¦çš„â€ CSS view transition classï¼Œæ¯”èµ·è‡ªå·±é€šè¿‡ <code>:only-child</code> æŠ€å·§æ¨æ–­è¦ç›´è§‚ä¸€äº›ã€‚</p>
<p>æ€»ä¹‹ï¼Œä»¥ä¸Šå°±æ˜¯æˆ‘çš„çœ‹æ³•ã€‚æ›´å¤šç¤ºä¾‹è¯·å‚è§åŸæ–‡ã€‚</p>
<h2 data-id="heading-6">æ¨è</h2>
<p><strong>React çš„ <code>&lt;ViewTransition&gt;</code> æŠŠ Web åŸç”Ÿ View Transitions çº³å…¥ React çš„æ¸²æŸ“ä¸å¹¶å‘ä½“ç³»ä¸­ã€‚</strong></p>
<p>ç›´æ¥ä½¿ç”¨ <code>document.startViewTransition</code> å·²ç»è¶³å¤Ÿçµæ´»ï¼Œè€Œ <code>&lt;ViewTransition&gt;</code> çš„ä»·å€¼æ›´å¤šä½“ç°åœ¨ä¸ React ç”Ÿå‘½å‘¨æœŸã€Suspenseã€å¹¶å‘æ›´æ–°çš„è‡ªåŠ¨ååŒä¸Šï¼Œä»£ä»·æ˜¯å¤šäº†ä¸€å±‚æ¡†æ¶è¯­ä¹‰ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ›´å React ç§æœ‰ã€‚å®ƒæ›´åƒæ˜¯ä¸€ç§â€œå®‰å…¨å°è£…â€ï¼Œè€Œä¸æ˜¯å¿…é€‰èƒ½åŠ›ã€‚</p>
<p>å¦‚æœä½ éœ€è¦æŠŠè¿™ç±»æ–°ç‰¹æ€§å¿«é€Ÿåšæˆ <strong>ç¤ºä¾‹é¡µã€æŠ€æœ¯æ–‡ç« æˆ– Demo ç«™ç‚¹</strong>ï¼Œå¯ä»¥ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Datn" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=atn" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a></strong> å¿«é€Ÿæ­å»ºå±•ç¤ºé¡µé¢ï¼ŒæŠŠå®éªŒã€è®²è§£å’Œè½¬åŒ–è·¯å¾„ä¸€æ¬¡æ€§è·‘é€šï¼Œè€Œä¸ç”¨åœ¨å·¥ç¨‹è„šæ‰‹æ¶ä¸Šæ¶ˆè€—ç²¾åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7602850166731718665</link>    <guid>https://juejin.cn/post/7602850166731718665</guid>    <pubDate>2026-02-05T01:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602850166731718665" data-draft-id="7602824293164548111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-05T01:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T01:14:48.000Z" title="Thu Feb 05 2026 01:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†·çƒ­é’±åŒ…ç³»ç»Ÿè®¾è®¡å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šæ ¸å¿ƒä»£ç å®ç°ä¸éƒ¨ç½²</h2>
<blockquote>
<p>æ·±å…¥ä»£ç å±‚é¢ï¼Œå­¦ä¹ å†·çƒ­é’±åŒ…ç³»ç»Ÿçš„æ ¸å¿ƒå®ç°ã€å¹¶å‘æ§åˆ¶æœºåˆ¶å’Œéƒ¨ç½²æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<p><strong>æœ¬æ–‡åˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡ï¼Œè¿™æ˜¯ä¸‹ç¯‡ã€‚</strong></p>
<p><strong>ä¸Šç¯‡å›é¡¾ï¼š</strong></p>
<ol>
<li>å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦å†·çƒ­é’±åŒ…ï¼Ÿ</li>
<li>å†·çƒ­é’±åŒ…çš„ç”±æ¥ï¼šä»æ¯”ç‰¹å¸è¯´èµ·</li>
<li>é—®é¢˜åœºæ™¯ï¼šä¸€æ¬¡çœŸå®çš„çº¿ä¸Šäº‹æ•…</li>
<li>å†·çƒ­é’±åŒ…æ¶æ„ï¼šå°ç™½ä¹Ÿèƒ½æ‡‚çš„æ–¹æ¡ˆ</li>
<li>ç³»ç»Ÿæ¶æ„è®¾è®¡</li>
</ol>
<p><strong>æœ¬ç¯‡å†…å®¹ï¼š</strong>
6. æ ¸å¿ƒä»£ç å®ç°</p>
<ol start="7">
<li>å®Œæ•´äº¤æ˜“æµç¨‹</li>
<li>å¹¶å‘æ§åˆ¶æœºåˆ¶</li>
<li>éƒ¨ç½²ä¸è¿ç»´</li>
<li>æ€»ç»“ä¸å±•æœ›</li>
</ol>
<hr/>
<h3 data-id="heading-1">å…­ã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-2">6.1 æ ¸å¿ƒå¸¸é‡é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç”¨æˆ·è´¦æˆ·æœåŠ¡å®ç°
 * æ ¸å¿ƒé€»è¾‘ï¼šå†·çƒ­é’±åŒ…æ‰£æ¬¾æœºåˆ¶
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAccountServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserAccountService</span> {

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…é˜ˆå€¼
     * å½“çƒ­é’±åŒ…ä½™é¢ä½äºæ­¤å€¼æ—¶ï¼Œè‡ªåŠ¨ä»å†·é’±åŒ…è¡¥å……
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">HOT_WALLET_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"10000"</span>);

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…è¡¥å……é‡‘é¢
     * ä»å†·é’±åŒ…è°ƒæ‹¨åˆ°çƒ­é’±åŒ…çš„å›ºå®šé‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">HOT_WALLET_RECHARGE_AMOUNT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"50000"</span>);
    
}
</code></pre>
<h4 data-id="heading-3">6.2 å¤„ç†å……å€¼</h4>
<p>å……å€¼æ˜¯ç”¨æˆ·èµ„é‡‘æµå…¥çš„ä¸»è¦æ–¹å¼ï¼Œæ‰€æœ‰å……å€¼ç›´æ¥è¿›å…¥å†·é’±åŒ…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤„ç†å……å€¼
 * å……å€¼é‡‘é¢ç›´æ¥è¿›å…¥å†·é’±åŒ…
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRecharge</span><span class="hljs-params">(UserAccount account, TransactionRequest request,
                            TransactionResponse response)</span> {
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

    <span class="hljs-comment">// å¢åŠ å†·é’±åŒ…ä½™é¢ï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userAccountMapper.addColdBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );

    <span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å……å€¼å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }

    <span class="hljs-comment">// æ›´æ–°è´¦æˆ·å¯¹è±¡</span>
    account.setColdBalance(account.getColdBalance().add(amount));

    <span class="hljs-comment">// è®°å½•äº¤æ˜“</span>
    saveTransactionRecord(account, request, response,
                         TransactionType.RECHARGE,
                         account.getColdBalance(),
                         account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-4">6.3 å¤„ç†æ¶ˆè´¹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</h4>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿæœ€æ ¸å¿ƒçš„é€»è¾‘ï¼š<strong>ä¼˜å…ˆä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼Œçƒ­é’±åŒ…ä¸è¶³æ—¶è‡ªåŠ¨ä»å†·é’±åŒ…è°ƒæ‹¨</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤„ç†æ¶ˆè´¹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
 * ä¼˜å…ˆä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼Œçƒ­é’±åŒ…ä¸è¶³æ—¶è‡ªåŠ¨ä»å†·é’±åŒ…è°ƒæ‹¨
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processConsume</span><span class="hljs-params">(UserAccount account, TransactionRequest request,
                           TransactionResponse response)</span> {
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

    <span class="hljs-comment">// 1. æ£€æŸ¥æ€»ä½™é¢æ˜¯å¦è¶³å¤Ÿ</span>
    <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">totalBalance</span> <span class="hljs-operator">=</span> account.getColdBalance().add(account.getHotBalance());
    <span class="hljs-keyword">if</span> (totalBalance.compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"ä½™é¢ä¸è¶³"</span>);
    }

    <span class="hljs-comment">// 2. å¦‚æœçƒ­é’±åŒ…ä½™é¢ä¸è¶³ï¼Œå…ˆä»å†·é’±åŒ…è°ƒæ‹¨</span>
    <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">needTransfer</span> <span class="hljs-operator">=</span> amount.subtract(account.getHotBalance());
        transferColdToHot(account, needTransfer);

        <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è´¦æˆ·ä»¥è·å–æœ€æ–°çš„ç‰ˆæœ¬å·</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, account.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
        account.setVersion(freshAccount.getVersion());
        account.setColdBalance(freshAccount.getColdBalance());
        account.setHotBalance(freshAccount.getHotBalance());
    }

    <span class="hljs-comment">// 3. ä»çƒ­é’±åŒ…æ‰£æ¬¾ï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userAccountMapper.deductHotBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );

    <span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"æ‰£æ¬¾å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }

    <span class="hljs-comment">// æ›´æ–°è´¦æˆ·å¯¹è±¡</span>
    account.setHotBalance(account.getHotBalance().subtract(amount));

    <span class="hljs-comment">// è®°å½•äº¤æ˜“</span>
    saveTransactionRecord(account, request, response, TransactionType.CONSUME,
                         account.getColdBalance(), account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-5">6.4 å†·çƒ­é’±åŒ…è°ƒæ‹¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å†·é’±åŒ…è½¬çƒ­é’±åŒ…ï¼ˆå†…éƒ¨è°ƒæ‹¨ï¼‰
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferColdToHot</span><span class="hljs-params">(UserAccount account, BigDecimal amount)</span> {
    log.info(<span class="hljs-string">"å¼€å§‹è°ƒæ‹¨: userId={}, amount=å†·è½¬çƒ­{}"</span>, account.getUserId(), amount);

    <span class="hljs-comment">// 1. æ£€æŸ¥å†·é’±åŒ…ä½™é¢</span>
    <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å†·é’±åŒ…ä½™é¢ä¸è¶³"</span>);
    }

    <span class="hljs-comment">// 2. æ‰£å‡å†·é’±åŒ…</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows1</span> <span class="hljs-operator">=</span> userAccountMapper.deductColdBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );
    <span class="hljs-keyword">if</span> (rows1 == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }
    account.setColdBalance(account.getColdBalance().subtract(amount));

    <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è·å–æœ€æ–°ç‰ˆæœ¬å·</span>
    LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
    wrapper.eq(UserAccount::getUserId, account.getUserId());
    <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
    account.setVersion(freshAccount.getVersion());
    account.setColdBalance(freshAccount.getColdBalance());
    account.setHotBalance(freshAccount.getHotBalance());

    <span class="hljs-comment">// 3. å¢åŠ çƒ­é’±åŒ…</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">rows2</span> <span class="hljs-operator">=</span> userAccountMapper.addHotBalance(
        account.getUserId(),
        amount.longValue(),
        account.getVersion()
    );
    <span class="hljs-keyword">if</span> (rows2 == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥ï¼Œå¹¶å‘å†²çª"</span>);
    }
    account.setHotBalance(account.getHotBalance().add(amount));

    log.info(<span class="hljs-string">"è°ƒæ‹¨å®Œæˆ: coldBalance={}, hotBalance={}"</span>,
             account.getColdBalance(), account.getHotBalance());
}
</code></pre>
<h4 data-id="heading-6">6.5 è‡ªåŠ¨å……å€¼çƒ­é’±åŒ…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªåŠ¨å……å€¼çƒ­é’±åŒ…
 * å½“çƒ­é’±åŒ…ä½™é¢ä½äºé˜ˆå€¼æ—¶ï¼Œè‡ªåŠ¨ä»å†·é’±åŒ…è¡¥å……
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">autoRechargeHotWallet</span><span class="hljs-params">(UserAccount account)</span> {
    <span class="hljs-comment">// é‡æ–°æŸ¥è¯¢è·å–æœ€æ–°ä½™é¢ï¼ˆåœ¨æ¶ˆè´¹åï¼‰</span>
    LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
    wrapper.eq(UserAccount::getUserId, account.getUserId());
    <span class="hljs-type">UserAccount</span> <span class="hljs-variable">freshAccount</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);
    account.setColdBalance(freshAccount.getColdBalance());
    account.setHotBalance(freshAccount.getHotBalance());
    account.setVersion(freshAccount.getVersion());

    <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(HOT_WALLET_THRESHOLD) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(HOT_WALLET_RECHARGE_AMOUNT) &gt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">try</span> {
                transferColdToHot(account, HOT_WALLET_RECHARGE_AMOUNT);
                log.info(<span class="hljs-string">"è‡ªåŠ¨è¡¥å……çƒ­é’±åŒ…: userId={}, amount={}"</span>,
                        account.getUserId(), HOT_WALLET_RECHARGE_AMOUNT);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.warn(<span class="hljs-string">"è‡ªåŠ¨è¡¥å……çƒ­é’±åŒ…å¤±è´¥: {}"</span>, e.getMessage());
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-7">6.6 å¼€å§‹è°ƒæ‹¨</h4>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@DistributedLock(key = "#request.userId", waitTime = 3, leaseTime = 10)</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> TransactionResponse <span class="hljs-title function_">transfer</span><span class="hljs-params">(TransferRequest request)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹è°ƒæ‹¨: userId={}, amount={}, type={}"</span>,
                request.getUserId(), request.getAmount(), request.getTransferType());

        <span class="hljs-comment">// 1. æŸ¥è¯¢è´¦æˆ·</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, request.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);

        <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>);
        }

        <span class="hljs-comment">// ä¿å­˜è°ƒæ‹¨å‰ä½™é¢</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeColdBalance</span> <span class="hljs-operator">=</span> account.getColdBalance();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeHotBalance</span> <span class="hljs-operator">=</span> account.getHotBalance();

        <span class="hljs-comment">// 2. ç”Ÿæˆè°ƒæ‹¨æµæ°´å·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">transferNo</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TF"</span> + LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMddHHmmss"</span>))
                + String.format(<span class="hljs-string">"%04d"</span>, (<span class="hljs-type">int</span>)(Math.random() * <span class="hljs-number">10000</span>));

        <span class="hljs-comment">// 3. æ‰§è¡Œè°ƒæ‹¨</span>
        <span class="hljs-type">TransferType</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> TransferType.getByCode(request.getTransferType());
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> request.getAmount();

        <span class="hljs-keyword">if</span> (type == TransferType.COLD_TO_HOT) {
            <span class="hljs-comment">// å†·è½¬çƒ­</span>
            <span class="hljs-keyword">if</span> (account.getColdBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"å†·é’±åŒ…ä½™é¢ä¸è¶³"</span>);
            }
            transferColdToHot(account, amount);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// çƒ­è½¬å†·</span>
            <span class="hljs-keyword">if</span> (account.getHotBalance().compareTo(amount) &lt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"çƒ­é’±åŒ…ä½™é¢ä¸è¶³"</span>);
            }
            <span class="hljs-comment">// æ‰£å‡çƒ­é’±åŒ…</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rows1</span> <span class="hljs-operator">=</span> userAccountMapper.deductHotBalance(
                    account.getUserId(),
                    amount.longValue(),
                    account.getVersion()
            );
            <span class="hljs-keyword">if</span> (rows1 == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥"</span>);
            }
            account.setHotBalance(account.getHotBalance().subtract(amount));
            account.setVersion(account.getVersion() + <span class="hljs-number">1</span>);

            <span class="hljs-comment">// å¢åŠ å†·é’±åŒ…</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">rows2</span> <span class="hljs-operator">=</span> userAccountMapper.addColdBalance(
                    account.getUserId(),
                    amount.longValue(),
                    account.getVersion()
            );
            <span class="hljs-keyword">if</span> (rows2 == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è°ƒæ‹¨å¤±è´¥"</span>);
            }
            account.setColdBalance(account.getColdBalance().add(amount));
        }

        <span class="hljs-comment">// 4. è®°å½•è°ƒæ‹¨</span>
        <span class="hljs-type">WalletTransfer</span> <span class="hljs-variable">transfer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletTransfer</span>();
        transfer.setTransferNo(transferNo);
        transfer.setUserId(request.getUserId());
        transfer.setTransferType(request.getTransferType());
        transfer.setAmount(amount);
        transfer.setBeforeColdBalance(BigDecimal.ZERO);
        transfer.setAfterColdBalance(account.getColdBalance());
        transfer.setBeforeHotBalance(BigDecimal.ZERO);
        transfer.setAfterHotBalance(account.getHotBalance());
        transfer.setStatus(TransactionStatus.SUCCESS.getCode());
        transfer.setCreateTime(LocalDateTime.now());
        transfer.setUpdateTime(LocalDateTime.now());
        walletTransferMapper.insert(transfer);

        <span class="hljs-comment">// 5. å‘é€è°ƒæ‹¨å®¡è®¡æ¶ˆæ¯</span>
        sendTransferAuditMessage(request.getUserId(), transferNo, type,
                amount, beforeColdBalance, beforeHotBalance,
                account.getColdBalance(), account.getHotBalance(),
                request.getOperatorId(), request.getOperatorName());

        <span class="hljs-comment">// 6. è¿”å›ç»“æœ</span>
        <span class="hljs-type">TransactionResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionResponse</span>();
        response.setTransactionNo(transferNo);
        response.setUserId(request.getUserId());
        response.setAmount(amount);
        response.setStatus(TransactionStatus.SUCCESS.getCode());
        response.setStatusDesc(TransactionStatus.SUCCESS.getDesc());
        response.setColdBalance(account.getColdBalance());
        response.setHotBalance(account.getHotBalance());
        response.setMessage(<span class="hljs-string">"è°ƒæ‹¨æˆåŠŸ"</span>);
        response.setCreateTime(LocalDateTime.now());

        <span class="hljs-keyword">return</span> response;
    }
</code></pre>
<h3 data-id="heading-8">ä¸ƒã€å®Œæ•´äº¤æ˜“æµç¨‹</h3>
<h3 data-id="heading-9">7.1 äº¤æ˜“æµç¨‹å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/944f4886303247af93013b2f3b0214a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=oNcO3V2pAugua0mUNseTQVlBRk8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">7.2 æ—¶åºå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4ccd763adf843cd9d86d3f10a76bfcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=fPVwfGrYHm7UgwWhUQNavBukNSE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">7.3 å…¸å‹äº¤æ˜“åœºæ™¯</h4>
<h5 data-id="heading-12">åœºæ™¯1ï¼šæ­£å¸¸æ¶ˆè´¹ï¼ˆçƒ­é’±åŒ…å……è¶³ï¼‰</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=20000
æ¶ˆè´¹é‡‘é¢ï¼š5000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ£€æŸ¥çƒ­é’±åŒ…ä½™é¢(20000) &gt;= æ¶ˆè´¹é‡‘é¢(5000)ï¼Ÿ âœ“ æ˜¯
<span class="hljs-bullet">2.</span> ç›´æ¥ä»çƒ­é’±åŒ…æ‰£æ¬¾
<span class="hljs-bullet">3.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=15000
</code></pre>
<h5 data-id="heading-13">åœºæ™¯2ï¼šçƒ­é’±åŒ…ä¸è¶³</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=5000
æ¶ˆè´¹é‡‘é¢ï¼š15000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ£€æŸ¥çƒ­é’±åŒ…ä½™é¢(5000) &gt;= æ¶ˆè´¹é‡‘é¢(15000)ï¼Ÿ âœ— å¦
<span class="hljs-bullet">2.</span> è®¡ç®—éœ€è¦è°ƒæ‹¨ï¼š15000 - 5000 = 10000
<span class="hljs-bullet">3.</span> ä»å†·é’±åŒ…è°ƒæ‹¨10000åˆ°çƒ­é’±åŒ…
<span class="hljs-bullet">4.</span> ä»çƒ­é’±åŒ…æ‰£æ¬¾15000
<span class="hljs-bullet">5.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=90000ï¼Œçƒ­é’±åŒ…=0
</code></pre>
<h5 data-id="heading-14">åœºæ™¯3ï¼šè§¦å‘è‡ªåŠ¨è¡¥å……</h5>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·ä½™é¢ï¼šå†·é’±åŒ…=100000ï¼Œçƒ­é’±åŒ…=5000
æ¶ˆè´¹é‡‘é¢ï¼š1000
çƒ­é’±åŒ…é˜ˆå€¼ï¼š10000
è‡ªåŠ¨è¡¥å……é‡‘é¢ï¼š50000

æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> ä»çƒ­é’±åŒ…æ‰£æ¬¾1000
<span class="hljs-bullet">2.</span> æ‰£æ¬¾åçƒ­é’±åŒ…=4000ï¼Œä½äºé˜ˆå€¼(10000)
<span class="hljs-bullet">3.</span> è§¦å‘è‡ªåŠ¨è¡¥å……ï¼šä»å†·é’±åŒ…è°ƒæ‹¨50000åˆ°çƒ­é’±åŒ…
<span class="hljs-bullet">4.</span> æœ€ç»ˆï¼šå†·é’±åŒ…=50000ï¼Œçƒ­é’±åŒ…=54000
</code></pre>
<hr/>
<h3 data-id="heading-15">å…«ã€å¹¶å‘æ§åˆ¶æœºåˆ¶</h3>
<h4 data-id="heading-16">8.1 å¹¶å‘æ§åˆ¶æœºåˆ¶å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73133b1dadc24ef19f4f790598cf0d81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=V6IuPzkIR68OX3%2F3lRea%2BGL%2FIpw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">8.2 åŒé‡å¹¶å‘ä¿æŠ¤</h4>
<p>æœ¬ç³»ç»Ÿé‡‡ç”¨<strong>åŒé‡å¹¶å‘ä¿æŠ¤æœºåˆ¶</strong>ï¼š</p>
<h5 data-id="heading-18">ç¬¬ä¸€å±‚ï¼šRedisåˆ†å¸ƒå¼é”</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.wallet.aspect;

<span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”æ³¨è§£
 * ç”¨äºé˜²æ­¢åŒä¸€ç”¨æˆ·çš„å¹¶å‘æ“ä½œ
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DistributedLock {

    <span class="hljs-comment">/**
     * é”çš„keyå‰ç¼€
     */</span>
    String <span class="hljs-title function_">prefix</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"wallet:lock:"</span>;

    <span class="hljs-comment">/**
     * é”çš„keyè¡¨è¾¾å¼ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼
     */</span>
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;

    <span class="hljs-comment">/**
     * ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">waitTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">3</span>;

    <span class="hljs-comment">/**
     * é”è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
     */</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">leaseTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">10</span>;
}


<span class="hljs-keyword">package</span> com.wallet.aspect;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;
<span class="hljs-keyword">import</span> org.aspectj.lang.reflect.MethodSignature;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;
<span class="hljs-keyword">import</span> java.util.UUID;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”åˆ‡é¢
 * ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢åŒä¸€ç”¨æˆ·çš„å¹¶å‘æ“ä½œ
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockAspect</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;

    <span class="hljs-meta">@Around("@annotation(com.wallet.aspect.DistributedLock)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        <span class="hljs-type">DistributedLock</span> <span class="hljs-variable">distributedLock</span> <span class="hljs-operator">=</span> method.getAnnotation(DistributedLock.class);

        <span class="hljs-comment">// è·å–é”çš„key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> getLockKey(distributedLock, joinPoint);

        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„é”å€¼</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();

        <span class="hljs-comment">// å°è¯•è·å–é”</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> Boolean.TRUE.equals(stringRedisTemplate.opsForValue()
                .setIfAbsent(lockKey, lockValue, distributedLock.leaseTime(), TimeUnit.SECONDS));

        <span class="hljs-keyword">if</span> (!acquired) {
            <span class="hljs-comment">// å°è¯•ç­‰å¾…</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">long</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> distributedLock.waitTime() * <span class="hljs-number">1000L</span>;

            <span class="hljs-keyword">while</span> (System.currentTimeMillis() - startTime &lt; timeout) {
                acquired = Boolean.TRUE.equals(stringRedisTemplate.opsForValue()
                        .setIfAbsent(lockKey, lockValue, distributedLock.leaseTime(), TimeUnit.SECONDS));
                <span class="hljs-keyword">if</span> (acquired) {
                    <span class="hljs-keyword">break</span>;
                }
                Thread.sleep(<span class="hljs-number">50</span>);
            }

            <span class="hljs-keyword">if</span> (!acquired) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ“ä½œé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•"</span>);
            }
        }

        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
            <span class="hljs-keyword">return</span> joinPoint.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾é”</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">currentValue</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(lockKey);
            <span class="hljs-keyword">if</span> (lockValue.equals(currentValue)) {
                stringRedisTemplate.delete(lockKey);
                log.info(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
            }
        }
    }

    <span class="hljs-comment">/**
     * è·å–é”çš„key
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getLockKey</span><span class="hljs-params">(DistributedLock distributedLock, ProceedingJoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> distributedLock.key();
        <span class="hljs-keyword">if</span> (key.isEmpty()) {
            <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºkey</span>
            Object[] args = joinPoint.getArgs();
            <span class="hljs-keyword">if</span> (args.length &gt; <span class="hljs-number">0</span> &amp;&amp; args[<span class="hljs-number">0</span>] != <span class="hljs-literal">null</span>) {
                key = String.valueOf(args[<span class="hljs-number">0</span>]);
            } <span class="hljs-keyword">else</span> {
                key = <span class="hljs-string">"default"</span>;
            }
        }
        <span class="hljs-keyword">return</span> distributedLock.prefix() + key;
    }
}


<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
 <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@DistributedLock(key = "#request.userId", waitTime = 3, leaseTime = 10)</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> TransactionResponse <span class="hljs-title function_">processTransaction</span><span class="hljs-params">(TransactionRequest request)</span> {
        <span class="hljs-comment">// è®°å½•äº¤æ˜“å¼€å§‹æ—¶é—´</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        TRANSACTION_START_TIME.set(startTime);

        log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†äº¤æ˜“: userId={}, amount={}, type={}"</span>,
                request.getUserId(), request.getAmount(), request.getTransactionType());

        <span class="hljs-comment">// 1. æŸ¥è¯¢è´¦æˆ·ï¼ˆåŠ é”ï¼‰</span>
        LambdaQueryWrapper&lt;UserAccount&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();
        wrapper.eq(UserAccount::getUserId, request.getUserId());
        <span class="hljs-type">UserAccount</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> userAccountMapper.selectOne(wrapper);

        <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span>) {
            sendTransactionFailureNotification(request.getUserId(), <span class="hljs-literal">null</span>, request,
                    <span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>, startTime);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·ä¸å­˜åœ¨"</span>);
        }

        <span class="hljs-comment">// ä¿å­˜äº¤æ˜“å‰ä½™é¢</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeColdBalance</span> <span class="hljs-operator">=</span> account.getColdBalance();
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">beforeHotBalance</span> <span class="hljs-operator">=</span> account.getHotBalance();

        <span class="hljs-comment">// 2. æ£€æŸ¥è´¦æˆ·çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (account.getStatus() != AccountStatus.NORMAL.getCode()) {
            sendTransactionFailureNotification(request.getUserId(), <span class="hljs-literal">null</span>, request,
                    <span class="hljs-string">"è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è¿›è¡Œäº¤æ˜“"</span>, startTime);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WalletException</span>(<span class="hljs-string">"è´¦æˆ·çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•è¿›è¡Œäº¤æ˜“"</span>);
        }
    }     
</code></pre>
<h5 data-id="heading-19">ç¬¬äºŒå±‚ï¼šæ•°æ®åº“ä¹è§‚é”</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.wallet.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-comment">/**
 * ç”¨æˆ·è´¦æˆ·å®ä½“
 * å†·é’±åŒ… - å­˜å‚¨ç”¨æˆ·çš„ä¸»è¦ä½™é¢
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("user_account")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAccount</span> {

    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-comment">/**
     * ç”¨æˆ·ID
     */</span>
    <span class="hljs-keyword">private</span> Long userId;

    <span class="hljs-comment">/**
     * ç”¨æˆ·å
     */</span>
    <span class="hljs-keyword">private</span> String username;

    <span class="hljs-comment">/**
     * å†·é’±åŒ…ä½™é¢ï¼ˆä¸»è´¦æˆ·ä½™é¢ï¼‰
     * ç”¨æˆ·çš„ä¸»è¦èµ„é‡‘å­˜å‚¨
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal coldBalance;

    <span class="hljs-comment">/**
     * çƒ­é’±åŒ…ä½™é¢ï¼ˆå¯ç”¨ä½™é¢ï¼‰
     * ç”¨äºæ—¥å¸¸äº¤æ˜“å’Œå¿«é€Ÿæ‰£æ¬¾
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal hotBalance;

    <span class="hljs-comment">/**
     * è´¦æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ 2-å†»ç»“ 3-æ³¨é”€
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">/**
     * ç‰ˆæœ¬å·ï¼ˆä¹è§‚é”ï¼‰
     */</span>
    <span class="hljs-meta">@Version</span>
    <span class="hljs-keyword">private</span> Integer version;

    <span class="hljs-comment">/**
     * é€»è¾‘åˆ é™¤æ ‡è®°
     */</span>
    <span class="hljs-meta">@TableLogic</span>
    <span class="hljs-keyword">private</span> Integer deleted;
}


<span class="hljs-comment">/**
 * æ‰£æ¬¾æ“ä½œï¼ˆä½¿ç”¨ä¹è§‚é”ï¼‰
 */</span>
UPDATE user_account
<span class="hljs-type">SET</span> <span class="hljs-variable">hot_balance</span> <span class="hljs-operator">=</span> hot_balance - #{amount},
    version = version + <span class="hljs-number">1</span>,
    update_time = NOW()
<span class="hljs-type">WHERE</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> #{userId}
  AND hot_balance &gt;= #{amount}
  <span class="hljs-type">AND</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> #{version}
  <span class="hljs-type">AND</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
</code></pre>
<h4 data-id="heading-20">8.3 ä¸ºä»€ä¹ˆéœ€è¦åŒé‡ä¿æŠ¤ï¼Ÿ</h4>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŒé‡ä¿æŠ¤çš„å¿…è¦æ€§                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å•é Redisé”çš„é—®é¢˜ï¼š                                          â”‚
â”‚  â”œâ”€ Rediså®•æœºæ—¶é”å¤±æ•ˆ                                        â”‚
â”‚  â”œâ”€ ç½‘ç»œåˆ†åŒºæ—¶å¯èƒ½å‡ºç°è„‘è£‚                                   â”‚
â”‚  â””â”€ æ— æ³•é˜²æ­¢DBå±‚é¢çš„ç›´æ¥æ›´æ–°                                 â”‚
â”‚                                                             â”‚
â”‚  å•é æ•°æ®åº“é”çš„é—®é¢˜ï¼š                                         â”‚
â”‚  â”œâ”€ å¤§é‡è¯·æ±‚æ—¶DBè¿æ¥è€—å°½                                     â”‚
â”‚  â”œâ”€ äº‹åŠ¡ç­‰å¾…æ—¶é—´é•¿                                          â”‚
â”‚  â””â”€ ç³»ç»Ÿååé‡ä½                                            â”‚
â”‚                                                             â”‚
â”‚  åŒé‡ä¿æŠ¤çš„ä¼˜åŠ¿ï¼š                                            â”‚
â”‚  â”œâ”€ Redisé”ï¼šæŒ¡ä½<span class="hljs-number">99</span><span class="hljs-comment">%çš„å¹¶å‘è¯·æ±‚                               â”‚</span>
â”‚  â”œâ”€ DBé”ï¼šæŒ¡ä½æ¼ç½‘çš„<span class="hljs-number">1</span><span class="hljs-comment">%                                      â”‚</span>
â”‚  â”œâ”€ å®¹é”™æ€§å¼ºï¼šä»»ä¸€å±‚å¤±æ•ˆéƒ½èƒ½ä¿è¯æ•°æ®æ­£ç¡®                      â”‚
â”‚  â””â”€ æ€§èƒ½ä¼˜å¼‚ï¼šå¤§éƒ¨åˆ†è¯·æ±‚åœ¨Rediså±‚å°±è¢«æ‹¦æˆª                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-21">8.4 ç³»ç»Ÿäº¤äº’å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f26f6b6d642a4fea866c9e8b4d227ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=J%2FXI52aSWljxWuc4KMyLuJou8Is%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-22">ä¹ã€éƒ¨ç½²ä¸è¿ç»´</h3>
<h4 data-id="heading-23">9.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cc67f6c796147f5a609937151af59d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770858888&amp;x-signature=e%2BtBSuSEQSq2rvncPJKq5LcEGp8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-24">9.2 Docker Compose é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># MySQLæ•°æ®åº“</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-mysql</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">wallet_db</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/schema.sql</span>

  <span class="hljs-comment"># Redisç¼“å­˜</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-redis</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6379:6379"</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>

  <span class="hljs-comment"># åº”ç”¨æœåŠ¡</span>
  <span class="hljs-attr">wallet-app:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">wallet-app</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">SPRING_DATASOURCE_URL:</span> <span class="hljs-string">jdbc:mysql://mysql:3306/wallet_db</span>
      <span class="hljs-attr">SPRING_REDIS_HOST:</span> <span class="hljs-string">redis</span>
      <span class="hljs-attr">SPRING_REDIS_PORT:</span> <span class="hljs-number">6379</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>
  <span class="hljs-attr">redis-data:</span>
</code></pre>
<h4 data-id="heading-25">9.3 å…³é”®é…ç½®</h4>
<h5 data-id="heading-26">application.yml</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-comment"># æ•°æ®æºé…ç½®</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span>
    <span class="hljs-attr">druid:</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/wallet_db?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
      <span class="hljs-comment"># è¿æ¥æ± é…ç½®</span>
      <span class="hljs-attr">initial-size:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">max-active:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">max-wait:</span> <span class="hljs-number">60000</span>
      <span class="hljs-attr">test-while-idle:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">validation-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>

  <span class="hljs-comment"># Redisé…ç½®</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">-1ms</span>

  <span class="hljs-comment"># äº‹åŠ¡é…ç½®</span>
  <span class="hljs-attr">transaction:</span>
    <span class="hljs-attr">rollback-on-commit-failure:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># MyBatis Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.wallet.entity</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</code></pre>
<h4 data-id="heading-27">9.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>








































<table><thead><tr><th align="center">ä¼˜åŒ–é¡¹</th><th align="left">å…·ä½“æªæ–½</th><th align="left">é¢„æœŸæ•ˆæœ</th></tr></thead><tbody><tr><td align="center"><strong>æ•°æ®åº“ç´¢å¼•</strong></td><td align="left">user_idã€transaction_noç­‰å­—æ®µå»ºç«‹ç´¢å¼•</td><td align="left">æŸ¥è¯¢é€Ÿåº¦æå‡10å€+</td></tr><tr><td align="center"><strong>è¿æ¥æ± ä¼˜åŒ–</strong></td><td align="left">åˆç†è®¾ç½®åˆå§‹å¤§å°ã€æœ€å¤§è¿æ¥æ•°</td><td align="left">é¿å…è¿æ¥åˆ›å»ºå¼€é”€</td></tr><tr><td align="center"><strong>Redisç¼“å­˜</strong></td><td align="left">çƒ­ç‚¹è´¦æˆ·ä¿¡æ¯ç¼“å­˜</td><td align="left">å‡å°‘DBæŸ¥è¯¢80%</td></tr><tr><td align="center"><strong>å¼‚æ­¥å¤„ç†</strong></td><td align="left">äº¤æ˜“æ—¥å¿—å¼‚æ­¥å†™å…¥</td><td align="left">å“åº”æ—¶é—´å‡å°‘50%</td></tr><tr><td align="center"><strong>SQLä¼˜åŒ–</strong></td><td align="left">ä½¿ç”¨æ‰¹é‡æ“ä½œã€é¿å…SELECT *</td><td align="left">å‡å°‘ç½‘ç»œä¼ è¾“</td></tr><tr><td align="center"><strong>JVMè°ƒä¼˜</strong></td><td align="left">åˆç†è®¾ç½®å †å†…å­˜ã€GCç­–ç•¥</td><td align="left">å‡å°‘STWæ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-28">åã€æ€»ç»“</h3>
<h4 data-id="heading-29">10.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å†·çƒ­é’±åŒ…ç³»ç»Ÿæ ¸å¿ƒè¦ç‚¹æ€»ç»“                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ä¸€ã€è®¾è®¡æ€æƒ³                                                â”‚
â”‚  â”œâ”€ å†·çƒ­é’±åŒ…åˆ†ç¦»ï¼šå®‰å…¨æ€§ä¸æµåŠ¨æ€§å¹³è¡¡                          â”‚
â”‚  â”œâ”€ ç©ºé—´æ¢æ—¶é—´ï¼šç”¨æ¶æ„æ¢æ€§èƒ½                                  â”‚
â”‚  â””â”€ ç«äº‰å˜åä½œï¼šæŠŠä¸²è¡Œå˜å¹¶è¡Œ                                  â”‚
â”‚                                                             â”‚
â”‚  äºŒã€æ ¸å¿ƒæŠ€æœ¯                                                â”‚
â”‚  â”œâ”€ Redisåˆ†å¸ƒå¼é”ï¼šåº”ç”¨å±‚å¹¶å‘æ§åˆ¶                            â”‚
â”‚  â”œâ”€ æ•°æ®åº“ä¹è§‚é”ï¼šæ•°æ®å±‚æœ€ç»ˆä¿éšœ                              â”‚
â”‚  â”œâ”€ è‡ªåŠ¨è°ƒæ‹¨æœºåˆ¶ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–                                â”‚
â”‚  â””â”€ äº‹åŠ¡ç®¡ç†ï¼šæ•°æ®ä¸€è‡´æ€§ä¿è¯                                 â”‚
â”‚                                                             â”‚
â”‚  ä¸‰ã€å®æ–½æ•ˆæœ                                                â”‚
â”‚  â”œâ”€ å¹¶å‘èƒ½åŠ›ï¼šæå‡<span class="hljs-number">10</span>å€ä»¥ä¸Š                                   â”‚
â”‚  â”œâ”€ å“åº”æ—¶é—´ï¼šé™ä½åˆ°<span class="hljs-number">100</span>msä»¥å†…                                â”‚
â”‚  â”œâ”€ ç³»ç»Ÿç¨³å®šæ€§ï¼š<span class="hljs-number">99.9</span><span class="hljs-comment">%å¯ç”¨æ€§                                  â”‚</span>
â”‚  â””â”€ ç”¨æˆ·ä½“éªŒï¼šäº¤æ˜“æˆåŠŸç‡æ¥è¿‘<span class="hljs-number">100</span><span class="hljs-comment">%                             â”‚</span>
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-30">10.2 é€‚ç”¨åœºæ™¯</h4>
<p>å†·çƒ­é’±åŒ…æ¶æ„é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>






























<table><thead><tr><th align="left">åœºæ™¯</th><th align="center">é€‚ç”¨æ€§</th><th align="left">åŸå› </th></tr></thead><tbody><tr><td align="left"><strong>ç”µå•†å¹³å°</strong></td><td align="center">â­â­â­â­â­</td><td align="left">é«˜å¹¶å‘ç§’æ€ã€è®¢å•æ”¯ä»˜</td></tr><tr><td align="left"><strong>åœ¨çº¿æ”¯ä»˜</strong></td><td align="center">â­â­â­â­â­</td><td align="left">å®æ—¶è½¬è´¦ã€é’±åŒ…ä½™é¢</td></tr><tr><td align="left"><strong>O2OæœåŠ¡</strong></td><td align="center">â­â­â­â­</td><td align="left">é¢„ä»˜æ¬¾ã€ä¼šå‘˜ä½™é¢</td></tr><tr><td align="left"><strong>å…±äº«ç»æµ</strong></td><td align="center">â­â­â­</td><td align="left">æŠ¼é‡‘ã€ä½™é¢ç®¡ç†</td></tr></tbody></table>
<h4 data-id="heading-31">10.3 å†™åœ¨æœ€å</h4>
<p>å†·çƒ­é’±åŒ…æ¶æ„æ˜¯æ”¯ä»˜ç³»ç»Ÿè®¾è®¡ä¸­çš„ç»å…¸æ–¹æ¡ˆï¼Œå®ƒå·§å¦™åœ°å¹³è¡¡äº†<strong>å®‰å…¨æ€§ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</strong>ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™]]></title>    <link>https://juejin.cn/post/7603283691457527818</link>    <guid>https://juejin.cn/post/7603283691457527818</guid>    <pubDate>2026-02-06T06:33:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603283691457527818" data-draft-id="7603347438012547107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™"/> <meta itemprop="keywords" content="APP,Apple,uni-app"/> <meta itemprop="datePublished" content="2026-02-06T06:33:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/1421041942671774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AppLovin å±æœºå‡çº§ï¼šSDK å®‰å…¨äº‰è®®æœªå¹³ï¼Œå»ºè®®ç§»é™¤ä¸ºå¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1421041942671774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:33:45.000Z" title="Fri Feb 06 2026 06:33:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ç»§ 1 æœˆåšç©ºæœºæ„ CapitalWatch æŒ‡æ§ AppLovin æ·±åº¦æ¶‰å…¥æ´—é’±ç½‘ç»œã€å…³è”ä¸œå—äºš â€œæ€çŒªç›˜â€ åï¼Œè¿™åœºèµ„æœ¬é£æ³¢çš„ä½™éœ‡ä»åœ¨æŒç»­ã€‚æœ€æ–°å¸‚åœºæ•°æ®æ˜¾ç¤ºï¼Œæˆªè‡³ 2026 å¹´ 2 æœˆ 5 æ—¥ï¼ŒAppLovinï¼ˆè‚¡ç¥¨ä»£ç ï¼šAPPï¼‰è‚¡ä»·å·²ä» 2025 å¹´ 11 æœˆ 10 æ—¥çš„ 651.32 ç¾å…ƒè·Œè‡³ 375.23 ç¾å…ƒï¼Œ<strong>ä¸‰ä¸ªæœˆç´¯è®¡è·Œå¹…è¾¾ 42.39%</strong> ï¼›ä»… 2 æœˆå‰ 5 ä¸ªäº¤æ˜“æ—¥ï¼Œè‚¡ä»·å°±ä» 483 ç¾å…ƒè·Œè‡³ 375.23 ç¾å…ƒï¼Œå•å‘¨è·Œå¹…è¶… 22%ï¼Œæ¢æ‰‹ç‡æœ€é«˜è¾¾ 6.65%ï¼Œå¸‚åœºææ…Œæƒ…ç»ªå¯è§ä¸€æ–‘ã€‚</p>
<h3 data-id="heading-1">äº‰è®®å†å‘é…µï¼šä»è‚¡ä¸œåˆè§„åˆ° SDK æŠ€æœ¯é£é™©</h3>
<p>æ­¤å‰ CapitalWatch çš„æŠ¥å‘Šå·²æŒ‡å‡ºï¼ŒAppLovin ä¸»è¦è‚¡ä¸œ Hao Tangã€Ling Tangï¼ˆè¢«æŒ‡ä¸º Hao Tang äº²å±ï¼‰åŠå…³è”æ–¹åˆè®¡æŒè‚¡è¶… 28%ï¼Œæ¶‰å«Œé€šè¿‡å¹¿å‘Šä¸šåŠ¡ååŠ©è½¬ç§»å›¢è´·ç½‘éæ³•é›†èµ„æ¬¾ã€ä¸œå—äºšè¯ˆéª—èµ„é‡‘ã€‚å°½ç®¡ AppLovin å…¨ç›˜å¦è®¤æŒ‡æ§ï¼Œç§° â€œæ— æ³•æ§åˆ¶ä¸ªäººè‚¡ç¥¨ä¹°å–â€ï¼Œä½†å¸‚åœºå¯¹å…¶<strong>è‚¡ä¸œå±‚é¢çš„åˆè§„å¤±èŒ</strong>è´¨ç–‘æœªæ¶ˆ â€”â€” ä½œä¸ºä¸Šå¸‚å…¬å¸ï¼Œå¯¹ä¸»è¦è‚¡ä¸œçš„èƒŒæ™¯å®¡æŸ¥ã€åæ´—é’±æµç¨‹æ˜¯å¦åˆ°ä½ï¼Œè‡³ä»Šä»æ˜¯æœªè§£ä¹‹è°œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8534212848f540dc82e963b5ac96cf13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaU9T56CU56m26Zmi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964425&amp;x-signature=HiKXXc7USyyqiTXHWzlAf0HPWcg%3D" alt="" loading="lazy"/></p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè¿™åœºäº‰è®®å·²ç›´æ¥æ³¢åŠæ™®é€šå¼€å‘è€…ã€‚æœ‰è¡Œä¸šåˆ†ææŒ‡å‡ºï¼ŒAppLovin çš„ SDK å­˜åœ¨ä¸¤å¤§æ ¸å¿ƒé£é™©ï¼šä¸€æ˜¯<strong>æŠ€æœ¯åˆè§„é—®é¢˜</strong>ï¼Œå…¶ SDK è¢«æ›åŒ…å«æŒ‡çº¹è¿½è¸ªã€é™é»˜å®‰è£…åŠŸèƒ½ï¼Œå‰è€…å¯èƒ½è¿åç”¨æˆ·éšç§ä¿æŠ¤æ³•è§„ï¼ˆå¦‚ GDPRã€CCPAï¼‰ï¼Œåè€…åˆ™å¯èƒ½ç»•è¿‡ç”¨æˆ·æˆæƒå¼ºåˆ¶å®‰è£…åº”ç”¨ï¼Œå­˜åœ¨è¢«åº”ç”¨å•†åº—ä¸‹æ¶çš„éšæ‚£ï¼›äºŒæ˜¯<strong>è¿å¸¦é£é™©</strong>ï¼Œè‹¥åç»­ç›‘ç®¡éƒ¨é—¨ï¼ˆå¦‚ç¾å›½å¸æ³•éƒ¨ã€SECï¼‰å¯¹ AppLovin å¯åŠ¨è°ƒæŸ¥ï¼Œæˆ–è¦æ±‚å¹³å°è‡ªæŸ¥æ¶‰äº‹ SDKï¼Œå¼€å‘è€…å¯èƒ½é¢ä¸´ â€œçŒä¸åŠé˜²çš„ä¸‹æ¶å‹åŠ›â€ï¼Œå½±å“åº”ç”¨æ­£å¸¸è¿è¥ã€‚</p>
<h3 data-id="heading-2">è‚¡ä»·æš´è·ŒèƒŒåï¼šå¤šé‡åˆ©ç©ºä¸‹çš„å¸‚åœºä¿¡å¿ƒå´©å¡Œ</h3>
<p>ä»è‚¡ä»·èµ°åŠ¿çœ‹ï¼ŒAppLovin çš„é¢“åŠ¿å¹¶éå¶ç„¶ã€‚é™¤äº†æ´—é’±ã€SDK åˆè§„äº‰è®®ï¼Œå…¶å•†ä¸šæ¨¡å¼æœ¬èº«ä¹Ÿå­˜åœ¨éšå¿§ã€‚æ­¤å‰å·²æœ‰åšç©ºæœºæ„æŒ‡å‡ºï¼ŒAppLovin çº¦ 35% çš„å¹¿å‘Šæ”¶å…¥æ¥è‡ªè¶…ä¼‘é—²æ¸¸æˆï¼Œè€Œè¿™ç±»ä¸šåŠ¡çš„<strong>è™šå‡ç‚¹å‡»å æ¯”æˆ–è¾¾ 20%</strong> ï¼›åŒæ—¶ï¼Œå…¬å¸ 60% çš„æµé‡ä¾èµ– Meta å’Œ Googleï¼Œè‹¥ä¸Šæ¸¸å¹³å°è°ƒæ•´æ”¿ç­–ï¼Œæ”¶å…¥å¯èƒ½é¢ä¸´æ–­å´–å¼ä¸‹è·Œã€‚</p>
<p>å åŠ æœ€æ–°çš„åˆè§„é£é™©ï¼Œæœºæ„å¯¹å…¶ä¼°å€¼çš„åˆ†æ­§æŒç»­æ‰©å¤§ã€‚æˆªè‡³ 2 æœˆï¼Œå°½ç®¡ä»æœ‰ 9 å®¶æœºæ„ç»™å‡º â€œå¼ºåŠ›æ¨èâ€ è¯„çº§ï¼Œä½†æœ€ä½ç›®æ ‡ä»·ä»… 80 ç¾å…ƒï¼Œè¾ƒå½“å‰è‚¡ä»·éšå« 75.8% çš„è·Œå¹…ã€‚ç©ºå¤´ä»“ä½ä¹Ÿåœ¨æ¿€å¢ï¼Œ1 æœˆ 3 æ—¥å•æ—¥åšç©ºé‡å æ¯”è¾¾ 21.36%ï¼Œç´¯è®¡ç©ºå¤´ä»“ä½è¶…æµé€šè‚¡ 15%ï¼Œé€¼è¿‘ç†”æ–­é˜ˆå€¼ï¼Œå¸‚åœºå¯¹å…¶ä¿¡å¿ƒå·²é™è‡³å†°ç‚¹ã€‚</p>
<h3 data-id="heading-3">å¼€å‘è€…åº”å¯¹æŒ‡å—ï¼šè§„é¿é£é™©åˆ»ä¸å®¹ç¼“</h3>
<p>é¢å¯¹ AppLovin çš„å¤šé‡å±æœºï¼Œå¼€å‘è€…éœ€ä¼˜å…ˆè€ƒè™‘ä¸šåŠ¡ç¨³å®šæ€§ï¼Œé¿å…è¸©å…¥åˆè§„ â€œé›·åŒºâ€ï¼š</p>
<ul>
<li><strong>è¯„ä¼°æ›¿æ¢æ–¹æ¡ˆ</strong>ï¼šè‹¥å½“å‰åº”ç”¨é›†æˆäº† AppLovin SDKï¼Œå»ºè®®å°½å¿«è°ƒç ”å¹¿å‘Šèšåˆå¹³å°ï¼Œé€šè¿‡æ¥å…¥å¤šæ¸ é“å¹¿å‘Šæºï¼Œé™ä½å¯¹å•ä¸€ SDK çš„ä¾èµ–ï¼Œé¿å…å›  SDK ä¸‹æ¶å¯¼è‡´æ”¶å…¥æ–­å±‚ï¼›</li>
<li><strong>è‡ªæŸ¥åˆè§„ç»†èŠ‚</strong>ï¼šé‡ç‚¹æ£€æŸ¥ AppLovin SDK çš„æŒ‡çº¹è¿½è¸ªã€é™é»˜å®‰è£…åŠŸèƒ½æ˜¯å¦å…³é—­ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®æ”¶é›†ã€åº”ç”¨å®‰è£…æµç¨‹ç¬¦åˆå½“åœ°éšç§æ³•è§„ï¼ˆå¦‚ GDPR çš„ç”¨æˆ·åŒæ„è¦æ±‚ï¼‰ï¼›</li>
<li><strong>è·Ÿè¸ªç›‘ç®¡åŠ¨æ€</strong>ï¼šå¯†åˆ‡å…³æ³¨ç¾å›½å¸æ³•éƒ¨ã€SEC åŠåº”ç”¨å•†åº—ï¼ˆå¦‚è‹¹æœ App Storeã€Google Playï¼‰çš„æœ€æ–°æ”¿ç­–ï¼Œè‹¥å‡ºç°é’ˆå¯¹ AppLovin çš„è°ƒæŸ¥æˆ–ä¸‹æ¶é€šçŸ¥ï¼Œéœ€ç¬¬ä¸€æ—¶é—´å¯åŠ¨åº”æ€¥æ–¹æ¡ˆã€‚</li>
</ul>
<p>AppLovin çš„æ¡ˆä¾‹ä¹Ÿä¸ºæ•´ä¸ªè¡Œä¸šæ•²å“è­¦é’Ÿï¼šåœ¨é€‰æ‹©ç¬¬ä¸‰æ–¹ SDK æ—¶ï¼Œé™¤äº†å…³æ³¨æµé‡ã€æ”¶ç›Šï¼Œæ›´éœ€ç©¿é€å¼å®¡æŸ¥åˆè§„æƒ…å†µã€‚</p>
<p>æ¯•ç«Ÿï¼Œ<strong>ä¸€æ¬¡åˆè§„å±æœºå¸¦æ¥çš„æŸå¤±ï¼Œå¯èƒ½è¿œè¶…è¿‡å»çš„æ”¶ç›Š</strong>ã€‚</p>
<p><code>éµå®ˆè§„åˆ™ï¼Œæ–¹å¾—é•¿æ²»ä¹…å®‰</code>ï¼Œæœ€åç¥å¤§å®¶å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šè¿‡å®¡ï¼</p>
<h3 data-id="heading-4">ç›¸å…³æ¨è</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FURmC_4vxQv5ttOg8yYe7Eg" target="_blank" title="https://mp.weixin.qq.com/s/URmC_4vxQv5ttOg8yYe7Eg" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…ç»­è´¹å¤§å‘åŠæˆåŠŸç»­è´¹æ–¹æ¡ˆï¼äº²æµ‹æœ‰æ•ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1bAA90Tzpx03tTHZbdg3aw" target="_blank" title="https://mp.weixin.qq.com/s/1bAA90Tzpx03tTHZbdg3aw" ref="nofollow noopener noreferrer"># AppStoreæ•æ„Ÿè¯æ’æŸ¥æ‰‹å†Œï¼Œå¤šç»´åº¦åˆ†æGuideline 2.3.1éšè—åŠŸèƒ½ï¼Œè½»æ¾è¿‡å®¡ã€‚</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FV2F4BaEYh5HfeUUHm1tI6Q" target="_blank" title="https://mp.weixin.qq.com/s/V2F4BaEYh5HfeUUHm1tI6Q" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆä»£ç ç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FLs3su8fmMckTocPwMmFaNQ" target="_blank" title="https://mp.weixin.qq.com/s/Ls3su8fmMckTocPwMmFaNQ" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆASOç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484371%26idx%3D1%26sn%3D33568c58e90a5bf4d2612d803ecb2a27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484371&amp;idx=1&amp;sn=33568c58e90a5bf4d2612d803ecb2a27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœåŠ æ€¥å®¡æ ¸æ˜¯â€œç»¿è‰²é€šé“â€è¿˜æ˜¯â€œæ­»äº¡é™·é˜±â€ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3Dea61bd42d5ae8b99d2a56cbfb8d91e88%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484362&amp;idx=1&amp;sn=ea61bd42d5ae8b99d2a56cbfb8d91e88&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…é‚®ç®±ï¼Œçªç„¶æ”¶åˆ°11.2é€šçŸ¥ä¸¥é‡ä¹ˆï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484413%26idx%3D1%26sn%3D82870d4c8892fa65803a8e05fd5ac938%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484413&amp;idx=1&amp;sn=82870d4c8892fa65803a8e05fd5ac938&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># ä¸æƒ³è¢«è‹¹æœå¡å®¡æœ€å¥½é”™å¼€è¿™ä¸¤ä¸ªæå®¡æ—¶é—´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484349%26idx%3D1%26sn%3D1c75a6b08cb5de64ddf41a88b61ff108%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484349&amp;idx=1&amp;sn=1c75a6b08cb5de64ddf41a88b61ff108&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æ‰‹æ’•è‹¹æœå®¡æ ¸4.3æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡é—®é¢˜ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484344%26idx%3D1%26sn%3D4399eb8d8bf82e9c5df26a18b8564cfb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484344&amp;idx=1&amp;sn=4399eb8d8bf82e9c5df26a18b8564cfb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æœ‰å¹¸å’ŒAppstoreå®¡æ ¸äººå‘˜è¿›è¡Œäº†ä¸€åœºè§†é¢‘ä¼šè®®ç‰¹æ­¤è®°å½•ã€‚</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²]]></title>    <link>https://juejin.cn/post/7603347438012629027</link>    <guid>https://juejin.cn/post/7603347438012629027</guid>    <pubDate>2026-02-06T06:35:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603347438012629027" data-draft-id="7603347438012612643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-02-06T06:35:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå–å¹¿å‘Šï¼Œåµåˆ°äº†è¶…çº§ç¢—ï¼šå…¨çƒç½‘å‹å›´è§‚å¥¥ç‰¹æ›¼ç ´é˜²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:35:39.000Z" title="Fri Feb 06 2026 06:35:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é«˜ç«¯å•†æˆ˜ï¼Œå¾€å¾€å°±æ˜¯è¿™ä¹ˆæœ´å®æ— åã€‚</p>
<p>OpenAIÂ ä¸Šä¸ªæœˆæ‰å®£å¸ƒè¦åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3MzI4MjgzMw%3D%3D%26mid%3D2651012368%26idx%3D1%26sn%3D44c0709a46446f8b67df438d68c17815%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2651012368&amp;idx=1&amp;sn=44c0709a46446f8b67df438d68c17815&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ChatGPT é‡ŒåŠ å¹¿å‘Š</a>ï¼ŒAnthropic å°±æŒ‘äº†ä¸ªè¶…çº§ç¢—çš„æ—¶é—´èŠ‚ç‚¹ï¼Œæ’­å‡ºå˜²è®½ ChatGPT çš„å¹¿å‘Šã€‚</p>
<p>ã€Œæ„æœ‰æ‰€æŒ‡ã€çš„è¶…çº§ç¢—å¹¿å‘Š</p>
<p>åœ¨è¿™æ”¯é¢‡å…·è®½åˆºæ„å‘³çš„å¹¿å‘Šä¸­ï¼Œä¸€ä¸ªç”·å­åœ¨å¥èº«æ•™ç»ƒæ—è¾¹è‰°éš¾åœ°åšå¼•ä½“å‘ä¸Šã€‚</p>
<p>è¿™ä½å¥èº«æ•™ç»ƒæ˜¯ AI åŠ©æ‰‹çš„åŒ–èº«ï¼Œå½“ç”·å­å‘ä»–è¯·æ•™åˆ¶å®šå¥èº«è®¡åˆ’æ—¶ï¼Œã€ŒåŠ©æ‰‹ã€å´çªç„¶æ’å…¥äº†ä¸€æ¡ä¿å¥å“å¹¿å‘Šï¼Œè®©ç”·å­ä¸€è„¸æ‡µé€¼ã€‚</p>
<p>æœ€ç»çš„æ˜¯ï¼Œå¹¿å‘Šæœ«å°¾æ¥äº†è¿™ä¹ˆä¸€å¥è¯ï¼šAds are coming to Al. But not to Claude.ï¼ˆAI æ­£åœ¨è¿æ¥å¹¿å‘Šï¼Œä½† Claude ä¸ä¼šã€‚ï¼‰</p>
<p>å­—å­—ä¸æ ChatGPTï¼Œä½†å­—å­—éƒ½æŒ‡å‘ ChatGPTï¼Œä½ å°±è¯´å¦™ä¸å¦™å§ã€‚</p>
<p>éš¾æ€ªæœ‰ç½‘å‹æƒ³å»è§è§ Claude çš„å…¬å…³å›¢é˜Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24fe3e6e1ec8440a93eb325e66c866f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=LePZEwIT2d0JxjOEjGF9SlTglhU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é…åˆè¿™åˆ™å¹¿å‘Šï¼ŒAnthropic åœ¨å‘¨ä¸‰å‘å¸ƒåšå®¢æ­£å¼å®£å¸ƒï¼šClaude å°†æ°¸ä¹…ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b56c7e61c3cf4707a4c5f057fdb49406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=FOjJCf2VS04etBjfRYgrBGLLmO8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€Œæœ‰å¾ˆå¤šé€‚åˆåšå¹¿å‘Šçš„å¥½åœ°æ–¹ï¼Œä½†è·Ÿ Claude èŠå¤©çš„åœ°å„¿ï¼ŒçœŸçš„ä¸åˆé€‚å¡å¹¿å‘Šã€‚ã€AnthropicÂ è®¤ä¸ºï¼Œåœ¨ AI å¯¹è¯ä¸­æ¤å…¥å¹¿å‘Šä¸ Claudeã€Œä¸€ä¸ªçœŸæ­£æœ‰åŠ©äºå·¥ä½œå’Œæ·±åº¦æ€è€ƒåŠ©æ‰‹ã€çš„å®šä½ä¸å…¼å®¹ã€‚</p>
<p>è¿™ä¸€ç«‹åœºè¢«å¾ˆå¤šäººè§£è¯»ä¸ºå¯¹ç€ OpenAI ã€Œè´´è„¸å¼€å¤§ã€ã€‚</p>
<p>å› ä¸ºä¸Šä¸ªæœˆ OpenAI å®£å¸ƒå¼€å§‹åœ¨å…è´¹ç”¨æˆ·å’Œ ChatGPT Go è®¢é˜…ç”¨æˆ·ä¸­æµ‹è¯•æ¨ªå¹…å¹¿å‘Šï¼Œè¿™äº›å¹¿å‘Šä¼šå‡ºç°åœ¨å›å¤åº•éƒ¨ï¼Œä½†ä¸ä¼šå½±å“èŠå¤©æœºå™¨äººçš„å®é™…ç­”æ¡ˆã€‚è€Œä»˜è´¹è®¢é˜… Plusã€Proã€Business å’Œ Enterprise å¥—é¤çš„ç”¨æˆ·åˆ™ä¸ä¼šçœ‹åˆ°å¹¿å‘Šã€‚</p>
<p>Anthropic åœ¨åšæ–‡ä¸­å¼ºè°ƒï¼šã€Œæˆ‘ä»¬å¸Œæœ› Claude æ˜ç¡®æ— è¯¯åœ°ä¸ºç”¨æˆ·åˆ©ç›Šè¡Œäº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åšå‡ºäº†é€‰æ‹©ï¼šClaude å°†ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ã€‚æˆ‘ä»¬çš„ç”¨æˆ·ä¸ä¼šåœ¨ä¸ Claude çš„å¯¹è¯æ—è¾¹çœ‹åˆ°èµåŠ©é“¾æ¥ï¼ŒClaude çš„å›å¤ä¹Ÿä¸ä¼šå—åˆ°å¹¿å‘Šå•†çš„å½±å“ï¼Œæˆ–åŒ…å«ç”¨æˆ·æ²¡æœ‰è¦æ±‚çš„ç¬¬ä¸‰æ–¹äº§å“æ¤å…¥ã€‚ã€</p>
<p>å…¬å¸è¿›ä¸€æ­¥è§£é‡Šäº†è¿™ä¸€å†³å®šèƒŒåçš„è€ƒé‡ã€‚</p>
<p>å†…éƒ¨åˆ†ææ˜¾ç¤ºï¼Œè®¸å¤š Claude å¯¹è¯æ¶‰åŠã€Œæ•æ„Ÿæˆ–æ·±åº¦ç§äººã€çš„è¯é¢˜ï¼Œæˆ–éœ€è¦æŒç»­ä¸“æ³¨äºå¤æ‚ä»»åŠ¡ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œå¹¿å‘Šçš„å‡ºç°ä¼šæ˜¾å¾—ã€Œä¸åè°ƒã€ç”šè‡³åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ä¸æ°å½“çš„ã€ã€‚</p>
<p>Anthropic è¿˜æŒ‡å‡ºï¼Œå¹¿å‘Šä¼šå¼•å…¥å¯èƒ½ä¸æä¾›çœŸæ­£æœ‰ç”¨å»ºè®®ç›¸å†²çªçš„æ¿€åŠ±æœºåˆ¶ã€‚</p>
<p>ä»–ä»¬ä¸¾äº†ä¸ªä¾‹å­ï¼šå½“ç”¨æˆ·æåˆ°ç¡çœ é—®é¢˜æ—¶ï¼Œæ— å¹¿å‘ŠåŠ©æ‰‹ä¼šæ¢ç´¢å„ç§å¯èƒ½çš„åŸå› ï¼Œè€Œæœ‰å¹¿å‘Šæ”¯æŒçš„åŠ©æ‰‹å¯èƒ½ä¼šå°†å¯¹è¯å¼•å‘æŸä¸ªäº¤æ˜“ã€‚</p>
<p>ã€Œç”¨æˆ·ä¸åº”è¯¥éœ€è¦å»çŒœæµ‹ AI æ˜¯çœŸæ­£åœ¨å¸®åŠ©ä»–ä»¬ï¼Œè¿˜æ˜¯åœ¨å·§å¦™åœ°å°†å¯¹è¯å¼•å‘å¯ä»¥å˜ç°çš„æ–¹å‘ã€‚ã€</p>
<p>ä¸è¿‡ï¼ŒAnthropic å¹¶éå®Œå…¨æ‹’ç»å•†ä¸šåŒ–ã€‚</p>
<p>ä»–ä»¬è¡¨ç¤º AI å°†è¶Šæ¥è¶Šå¤šåœ°ä¸å•†ä¸šäº’åŠ¨ï¼Œå…¬å¸æœŸå¾…ä»¥å¸®åŠ©ç”¨æˆ·çš„æ–¹å¼æ”¯æŒè¿™ä¸€ç‚¹ã€‚ä»–ä»¬ç‰¹åˆ«çœ‹å¥½ã€Œä»£ç†å¼å•†åŠ¡ã€ï¼Œå³ Claude ä»£è¡¨ç”¨æˆ·å…¨ç¨‹ä»£ç†å®Œæˆè´­ä¹°æˆ–é¢„è®¢ç­‰æ“ä½œã€‚</p>
<p>å…¬å¸è¿˜åœ¨æ¢ç´¢æ›´å¤šæ–¹å¼è®© Claude æˆä¸ºæé«˜ç”Ÿäº§åŠ›çš„ä¸“æ³¨ç©ºé—´ï¼Œç”¨æˆ·å·²ç»å¯ä»¥è¿æ¥ Figmaã€Asanaã€Canva ç­‰ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¹¶ç›´æ¥åœ¨ Claude ä¸­ä¸å®ƒä»¬äº¤äº’ã€‚æ‰€æœ‰ç¬¬ä¸‰æ–¹äº¤äº’éƒ½å°†éµå¾ªåŒä¸€ä¸ªæ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šç”±ç”¨æˆ·å‘èµ·ï¼Œè€Œéç”±å¹¿å‘Šå•†å‘èµ·ã€‚</p>
<p>å¥¥ç‰¹æ›¼çš„åå‡»ã€Œå°ä½œæ–‡ã€</p>
<p>å¯¹æ­¤ï¼ŒOpenAI CEO è¨å§†ãƒ»å¥¥ç‰¹æ›¼è¿…é€Ÿå‘å¸ƒä¸€ç¯‡åå‡»å°ä½œæ–‡ã€‚</p>
<p>ä»–å¼€ç¯‡å…ˆæ‰¿è®¤ï¼šã€Œé¦–å…ˆè¯´å¥½çš„ä¸€é¢ï¼šAnthropic çš„å¹¿å‘Šç¡®å®å¾ˆæœ‰è¶£ï¼Œæˆ‘ç¬‘äº†ã€‚ã€ä½†ç´§æ¥ç€è¯é”‹ä¸€è½¬ï¼Œç›´æ¥è´¨ç–‘ Anthropic ä¸ºä½•è¦é‡‡ç”¨ã€Œå¦‚æ­¤æ˜æ˜¾ä¸è¯šå®ã€çš„æ‰‹æ³•ã€‚</p>
<p>å¥¥ç‰¹æ›¼å¼ºè°ƒï¼ŒOpenAI å…³äºå¹¿å‘Šçš„æœ€é‡è¦åŸåˆ™å°±æ˜¯ä¸ä¼šåƒ Anthropic æ‰€æç»˜çš„é‚£æ ·åšã€‚ã€Œæˆ‘ä»¬ä¸å‚»ï¼Œæˆ‘ä»¬çŸ¥é“ç”¨æˆ·ä¼šæ‹’ç»é‚£æ ·çš„åšæ³•ã€‚ã€</p>
<p>ä»–è¡¨ç¤ºï¼ŒAnthropic ä¸€è´¯çš„åŒé‡æ ‡å‡†å€’æ˜¯æŒºç¬¦åˆå“ç‰Œå½¢è±¡çš„ï¼Œã€Œç”¨æ¬ºéª—æ€§å¹¿å‘Šæ¥æ‰¹è¯„å®é™…ä¸Šå¹¶ä¸å­˜åœ¨çš„ç†è®ºä¸Šçš„æ¬ºéª—æ€§å¹¿å‘Šï¼Œä½†æˆ‘æ²¡æƒ³åˆ°ä»–ä»¬ä¼šæŠŠè¿™æ‹›ç”¨åœ¨è¶…çº§ç¢—å¹¿å‘Šä¸Šã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c984618029c44aaba576b83b5220583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=I1ln2QZq7iNtL0hYP8208RcU56s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¥¥ç‰¹æ›¼è¿˜å°†è¿™åœºäº‰è®ºä¸Šå‡åˆ°äº† AI æ™®æƒ çš„é«˜åº¦ã€‚</p>
<p>ã€Œæˆ‘ä»¬ç›¸ä¿¡æ¯ä¸ªäººéƒ½åº”è¯¥ä½¿ç”¨ AIï¼Œå¹¶è‡´åŠ›äºæä¾›å…è´¹è®¿é—®ï¼Œå› ä¸ºæˆ‘ä»¬ç›¸ä¿¡è®¿é—®æƒåˆ›é€ äº†èƒ½åŠ¨æ€§ã€‚ã€ä»–æŠ«éœ²äº†ä¸€ä¸ªæ•°æ®ï¼šä»…åœ¨å¾·å…‹è¨æ–¯å·å…è´¹ä½¿ç”¨ ChatGPT çš„äººæ•°å°±è¶…è¿‡äº†å…¨ç¾ä½¿ç”¨ Claude çš„æ€»äººæ•°ï¼Œå› æ­¤Â OpenAI é¢ä¸´ç€ä¸ Anthropicã€Œä¸åŒçš„é—®é¢˜ã€ã€‚ä»–è¡¥å……é“ï¼Œå¯¹äºä»˜è´¹è®¢é˜… Plus æˆ– Pro çš„ç”¨æˆ·ï¼ŒOpenAI ä¸ä¼šæ˜¾ç¤ºå¹¿å‘Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a9c16fa790540a5aabcbcc5d2f6a591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=H7KrFeUpavCJ8ZH%2FIKi4zJjmzfE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éšåï¼Œå¥¥ç‰¹æ›¼çš„æ‰¹è¯„å˜å¾—æ›´åŠ å°–é”ã€‚ä»–æŒ‡è´£ Anthropicã€ŒæœåŠ¡äºå¯Œäººçš„æ˜‚è´µäº§å“ã€ï¼Œå¹¶ä¸”ã€Œæƒ³è¦æ§åˆ¶äººä»¬å¦‚ä½•ä½¿ç”¨ AIã€ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒAnthropic å±è”½ä¸å–œæ¬¢çš„å…¬å¸ä½¿ç”¨å…¶ç¼–ç äº§å“ï¼ˆåŒ…æ‹¬ OpenAIï¼‰ï¼Œæƒ³è¦è‡ªå·±åˆ¶å®š AI ä½¿ç”¨è§„åˆ™ï¼Œç°åœ¨è¿˜æƒ³å‘Šè¯‰å…¶ä»–å…¬å¸è¯¥é‡‡ç”¨ä»€ä¹ˆå•†ä¸šæ¨¡å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/116f7ceba7a34d65806c1ae04f1720b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=zh17SE1%2BXd7u71SynVDosR9fUE8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ã€Œæˆ‘ä»¬è‡´åŠ›äºå¹¿æ³›çš„æ°‘ä¸»å†³ç­–å’Œè®¿é—®æƒã€‚æˆ‘ä»¬ä¹Ÿè‡´åŠ›äºä¸ºå…ˆè¿› AI æ„å»ºæœ€å…·éŸ§æ€§çš„ç”Ÿæ€ç³»ç»Ÿï¼Œã€å¥¥ç‰¹æ›¼å†™é“ï¼Œã€Œæˆ‘ä»¬éå¸¸å…³å¿ƒå®‰å…¨ã€å¹¿æ³›æœ‰ç›Šçš„ AGIï¼Œæˆ‘ä»¬çŸ¥é“å®ç°è¿™ä¸€ç›®æ ‡çš„å”¯ä¸€é€”å¾„æ˜¯ä¸ä¸–ç•Œåˆä½œåšå¥½å‡†å¤‡ã€‚ã€</p>
<p>ä»–å£°ç§°ï¼šã€Œä¸€å®¶ç‹¬è£å…¬å¸æ— æ³•å•ç‹¬å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæ›´ä¸ç”¨è¯´å…¶ä»–æ˜æ˜¾çš„é£é™©äº†ã€‚è¿™æ˜¯ä¸€æ¡é»‘æš—çš„é“è·¯ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9bef1111e51478b8dffa3c01280f357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=oDby10wqiW9yXDMDGkP9xwkvcjA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç½‘å‹è¯„è®ºï¼šä¸€åœºå„æ‰§ä¸€è¯çš„å¤§è¾©è®º</p>
<p>è¿™ä¸ªäº‹åœ¨ç¤¾äº¤åª’ä½“ä¸Šä¹Ÿå¼•å‘äº†æ¿€çƒˆè®¨è®ºã€‚</p>
<p>çŸ¥ååšä¸» Yuchen Jin è®¤ä¸ºï¼šã€ŒAI å¹¿å‘Šè¿™äº‹æœ¬èº«å°±å¾ˆè®½åˆºã€‚Anthropic ä¸éœ€è¦å¹¿å‘Šï¼Œå®ƒä¸“æ³¨äºç¼–ç å’Œ B2B ä¸šåŠ¡ï¼›è°·æ­Œé å¹¿å‘Šä¸ºç”Ÿï¼Œä¹Ÿä¸éœ€è¦ LLM å¹¿å‘Šæ¥è·å¾—çŸ­æœŸæ”¶å…¥ï¼›å˜²ç¬‘ OpenAI çš„å¹¿å‘Šåè€Œæˆäº†ä»–ä»¬æœ€å¥½çš„å¹¿å‘Šã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5acea6dfecdc4e37a00a5a9225b9d915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=0y9MUF8%2B%2BWJH9HL4NN2p755kATg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>X å¹³å°åšä¸» @scaling01 åˆ™ç«™åœ¨äº† Anthropic ä¸€è¾¹ï¼Œå¯¹å¥¥ç‰¹æ›¼çš„æ‰¿è¯ºè¡¨ç¤ºå¼ºçƒˆè´¨ç–‘ã€‚</p>
<p>ä»–è½¬å‘å¥¥ç‰¹æ›¼çš„æ–‡ç« å¹¶è¯„è®ºé“ï¼šã€ŒOpenAI åˆåœ¨åšå®ƒæœ€æ“…é•¿çš„äº‹äº†ï¼Œå¯¹ä»–ä»¬çš„ã€å¹¿å‘ŠåŸåˆ™ã€åšå‡ºç©ºæ´çš„æ‰¿è¯ºã€‚åªè¦æŠ•èµ„è€…ç¨å¾®æ¨ä¸€æŠŠï¼Œä½ ä»¬å°±ä¼šåƒçº¸ç‰Œå±‹ä¸€æ ·ä¸å ªä¸€å‡»ã€‚OpenAI å·²ç»ä¸€æ¬¡åˆä¸€æ¬¡åœ°è¯æ˜äº†è¿™ä¸€ç‚¹ï¼Œä½ ä»¬æ¯æ¬¡éƒ½é€‰æ‹©åˆ©æ¶¦ï¼Œå‰Šå¼±éè¥åˆ©æ€§ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1c164efadf493ea58a8a6256f18ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=f%2BmRAOkUi4AlwXg0BtjiLpe73Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸è¿‡ä¹Ÿæœ‰äººå¯¹ Anthropic çš„åŠ¨æœºæå‡ºäº†è´¨ç–‘ã€‚</p>
<p>é£æŠ•æœºæ„ Wing_VC çš„åˆä¼™äºº Tanay Jaipuria è®¤ä¸ºï¼ŒAnthropic å£°ç§° Claude å°†ä¿æŒæ— å¹¿å‘ŠçŠ¶æ€ï¼Œæ˜¯åœ¨äº‰å–æœ¬ãƒ»æ±¤æ™®æ£®æ‰€è¯´çš„ã€Œæˆ˜ç•¥ä¿¡ç”¨ã€ã€‚</p>
<p>ã€Œç°å®æ˜¯ï¼Œç›¸å¯¹äº ChatGPTï¼ŒClaude çš„å…è´¹ç”¨æˆ·åŸºæ•°éå¸¸å°ï¼Œè€Œä¸”ä¸ä»–ä»¬çš„ä¼ä¸šæˆ˜ç•¥æ— å…³ï¼Œæ‰€ä»¥åœ¨å…¶ä¸­æŠ•æ”¾å¹¿å‘Šå¯¹ä»–ä»¬æ¥è¯´æœ¬å°±æ¯«æ— æ„ä¹‰ã€‚ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ae822695404e818dbef061a4b12f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964539&amp;x-signature=eMTsfGAFhBkWYuguKSbQtORkRiQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™åœºã€Œè®ºæˆ˜ã€èƒŒåï¼Œæ˜¯ä¸¤å®¶å…¬å¸æˆªç„¶ä¸åŒçš„å‘å±•å›°å¢ƒå’Œå•†ä¸šé€‰æ‹©ã€‚</p>
<p>OpenAI è¿™è¾¹ï¼Œåœ¨ 2025 å¹´ç­¾è®¢äº†ä»·å€¼è¶…è¿‡ 1.4 ä¸‡äº¿ç¾å…ƒçš„åŸºç¡€è®¾æ–½äº¤æ˜“ã€‚æ ¹æ®ã€Šåå°”è¡—æ—¥æŠ¥ã€‹è·å¾—çš„æ–‡ä»¶æ˜¾ç¤ºï¼ŒOpenAIÂ é¢„è®¡ä»Šå¹´å°†çƒ§æ‰å¤§çº¦90äº¿ç¾å…ƒï¼ŒåŒæ—¶äº§ç”Ÿ130äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚ChatGPT çš„ 8 äº¿å‘¨æ´»è·ƒç”¨æˆ·ä¸­ï¼Œåªæœ‰å¤§çº¦ 5% ä¼šä»˜è´¹è®¢é˜…ã€‚</p>
<p>å·¨å¤§çš„è´¢åŠ¡å‹åŠ›è®©å¥¥ç‰¹æ›¼æ”¹å˜äº†æ­¤å‰çš„ç«‹åœºã€‚ä»–åœ¨ 2024 å¹´å“ˆä½›å¤§å­¦çš„ä¸€æ¬¡é‡‡è®¿ä¸­æ›¾è¡¨ç¤ºï¼Œå¹¿å‘Šä¸ AI å¯¹è¯çš„ç»“åˆã€Œå¼‚å¸¸ä»¤äººä¸å®‰ã€ï¼Œä»–ä¸æƒ³ã€Œå¼„æ¸…æ¥šåˆ°åº•æ˜¯è°åœ¨ä»˜è´¹å½±å“æˆ‘çœ‹åˆ°çš„å†…å®¹ã€ã€‚</p>
<p>å¦ä¸€è¾¹çš„ Anthropicï¼ŒåŒæ ·å°šæœªç›ˆåˆ©ï¼Œä½†é¢„è®¡ä¼šæ¯” OpenAI æ›´å¿«å®ç°ç›ˆåˆ©ã€‚AnthropicÂ æ²¡æœ‰è¯•å›¾é€šè¿‡å¤§è§„æ¨¡å»ºè®¾æ•°æ®ä¸­å¿ƒæ¥è¦†ç›–å…¨çƒï¼Œå…¶å•†ä¸šæ¨¡å¼ä¸»è¦ä¾èµ–ä¼ä¸šåˆåŒå’Œä»˜è´¹è®¢é˜…ã€‚æ® Axios æŠ¥é“ï¼ŒClaude Code å’Œ Cowork å·²ç»å¸¦æ¥äº†è‡³å°‘ 10 äº¿ç¾å…ƒçš„æ”¶å…¥ã€‚</p>
<p>ç§ä»¥ä¸ºï¼Œè¿™åœºå£æ°´ä»—æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼ŒOpenAI å’Œ Anthropic éƒ½åœ¨ç”¨è‡ªå·±çš„æ–¹å¼å›ç­”ä¸€ä¸ªé—®é¢˜ï¼šAI å…¬å¸åˆ°åº•è¯¥æ€ä¹ˆæ´»ä¸‹å»ï¼Œå¹¶ä¸”æ´»å¾—ä½“é¢ï¼Ÿ</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farstechnica.com%2Fai%2F2026%2F02%2Fshould-ai-chatbots-have-ads-anthropic-says-no%2F" target="_blank" title="https://arstechnica.com/ai/2026/02/should-ai-chatbots-have-ads-anthropic-says-no/" ref="nofollow noopener noreferrer">arstechnica.com/ai/2026/02/â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fclaude-is-a-space-to-think" target="_blank" title="https://www.anthropic.com/news/claude-is-a-space-to-think" ref="nofollow noopener noreferrer">www.anthropic.com/news/claudeâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fsama%2Fstatus%2F2019139174339928189" target="_blank" title="https://x.com/sama/status/2019139174339928189" ref="nofollow noopener noreferrer">x.com/sama/statusâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearch 9.X Javaå®¢æˆ·ç«¯APIå®æˆ˜æŒ‡å—ï¼ˆå…¥é—¨æ•™å­¦ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7603263490342862857</link>    <guid>https://juejin.cn/post/7603263490342862857</guid>    <pubDate>2026-02-06T06:36:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490342862857" data-draft-id="7603393977476235290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearch 9.X Javaå®¢æˆ·ç«¯APIå®æˆ˜æŒ‡å—ï¼ˆå…¥é—¨æ•™å­¦ç‰ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T06:36:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearch 9.X Javaå®¢æˆ·ç«¯APIå®æˆ˜æŒ‡å—ï¼ˆå…¥é—¨æ•™å­¦ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:36:28.000Z" title="Fri Feb 06 2026 06:36:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ç°ä»£æœç´¢ä¸æ•°æ®åˆ†æåœºæ™¯ä¸­ï¼ŒElasticsearchï¼ˆä»¥ä¸‹ç®€ç§°ESï¼‰æ—©å·²æˆä¸ºæ ¸å¿ƒç»„ä»¶ï¼Œå¹¿æ³›åº”ç”¨äºæ—¥å¿—åˆ†æã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%2585%25A8%25E6%2596%2587%25E6%25A3%2580%25E7%25B4%25A2%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=1&amp;q=%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å…¨æ–‡æ£€ç´¢</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2595%25B0%25E6%258D%25AE%25E5%258F%25AF%25E8%25A7%2586%25E5%258C%2596%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=1&amp;q=%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ•°æ®å¯è§†åŒ–</a>ç­‰é¢†åŸŸã€‚éšç€ES 9.Xç‰ˆæœ¬çš„æ­£å¼å‘å¸ƒï¼Œå…¶å®˜æ–¹Javaå®¢æˆ·ç«¯APIè¿æ¥äº†é‡å¤§æ›´æ–°â€”â€”<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D1%26q%3DRestHighLevelClient%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=1&amp;q=RestHighLevelClient&amp;zhida_source=entity" ref="nofollow noopener noreferrer">RestHighLevelClient</a>è¢«å½»åº•åºŸå¼ƒ</strong>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å…¨æ–°çš„<code>elasticsearch-java</code>å®¢æˆ·ç«¯ã€‚</p>
<p>å¯¹äºä¹ æƒ¯äº†ä½ç‰ˆæœ¬ESä¸æ—§å®¢æˆ·ç«¯çš„å¼€å‘è€…è€Œè¨€ï¼Œè¿™æ¬¡æ›´æ–°æ— ç–‘å¢åŠ äº†ä¸Šæ‰‹æˆæœ¬ã€‚å®˜æ–¹æ–°å®¢æˆ·ç«¯é‡‡ç”¨äº†æ›´ç®€æ´çš„Fluent DSLè¯­æ³•ï¼Œæ›´è½»é‡çš„ä¾èµ–è®¾è®¡ï¼Œä¸”èƒ½ä¸ESæœåŠ¡ç«¯APIå®æ—¶åŒæ­¥æ¼”è¿›ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ—§å®¢æˆ·ç«¯ä¾èµ–è€¦åˆé‡ã€è¯·æ±‚æ„å»ºè‡ƒè‚¿ã€ä¸RESTæ–‡æ¡£è„±èŠ‚çš„ç—›ç‚¹ã€‚</p>
<p>æœ¬æ–‡ä¸“ä¸ºES 9.Xæ–°æ‰‹æ‰“é€ ï¼Œæ‘’å¼ƒå¤æ‚ç†è®ºï¼Œèšç„¦å®é™…å¼€å‘åœºæ™¯ï¼Œè¯¦ç»†è®²è§£æ–°Javaå®¢æˆ·ç«¯çš„åŸºç¡€ä¾èµ–é…ç½®ä¸æ ¸å¿ƒAPIä½¿ç”¨ï¼ˆå«æ–‡æ¡£CRUDã€æ£€ç´¢ã€èšåˆã€åˆ†é¡µæ’åºï¼‰ï¼Œæ‰€æœ‰ä»£ç å‡å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼ŒåŠ©åŠ›å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹æ–°å®¢æˆ·ç«¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ç¯å¢ƒå‡†å¤‡ä¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D2%26q%3D%25E4%25BE%259D%25E8%25B5%2596%25E9%2585%258D%25E7%25BD%25AE%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=2&amp;q=%E4%BE%9D%E8%B5%96%E9%85%8D%E7%BD%AE&amp;zhida_source=entity" ref="nofollow noopener noreferrer">ä¾èµ–é…ç½®</a></h2>
<p>ä½¿ç”¨ES 9.X Javaå®¢æˆ·ç«¯å‰ï¼Œéœ€ç¡®ä¿æœ¬åœ°/æœåŠ¡å™¨å·²éƒ¨ç½²ES 9.Xç‰ˆæœ¬ï¼ˆå®¢æˆ·ç«¯ç‰ˆæœ¬éœ€ä¸æœåŠ¡ç«¯ç‰ˆæœ¬ä¸¥æ ¼ä¸€è‡´ï¼Œé¿å…ç‰ˆæœ¬å†²çªå¼•å‘å¼‚å¸¸ï¼‰ï¼Œæœ¬æ–‡ä»¥<code>9.1.0</code>ç‰ˆæœ¬ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºã€‚</p>
<h3 data-id="heading-2">1.1 Mavenä¾èµ–ï¼ˆæ›´æ¨èï¼‰</h3>
<p>åœ¨é¡¹ç›®<code>pom.xml</code>ä¸­å¼•å…¥ä»¥ä¸‹ä¾èµ–ï¼Œæ ¸å¿ƒä¾èµ–ä¸º<code>elasticsearch-java</code>ï¼Œé¢å¤–å¼•å…¥<code>lombok</code>ç®€åŒ–å®ä½“ç±»å¼€å‘ï¼ˆå¯é€‰ï¼Œè‹¥ä¸ä½¿ç”¨å¯æ‰‹åŠ¨å®ç°getter/setterï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ES 9.X Javaå®¢æˆ·ç«¯æ ¸å¿ƒä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>co.elastic.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elasticsearch-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Lombokä¾èµ–ï¼ˆç®€åŒ–å®ä½“ç±»ï¼Œå¯é€‰ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¯é€‰ï¼šJacksonä¾èµ–ï¼ˆè‹¥JSONåºåˆ—åŒ–å¼‚å¸¸å¯æ·»åŠ ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.15.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">1.2 Gradleä¾èµ–</h3>
<p>è‹¥é¡¹ç›®ä½¿ç”¨Gradleæ„å»ºï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–è‡³<code>build.gradle</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ES 9.X Javaå®¢æˆ·ç«¯æ ¸å¿ƒä¾èµ–</span>
implementation <span class="hljs-string">'co.elastic.clients:elasticsearch-java:9.1.0'</span>
<span class="hljs-comment">// Lombokä¾èµ–ï¼ˆå¯é€‰ï¼‰</span>
compileOnly <span class="hljs-string">'org.projectlombok:lombok:1.18.24'</span>
annotationProcessor <span class="hljs-string">'org.projectlombok:lombok:1.18.24'</span>
<span class="hljs-comment">// å¯é€‰ï¼šJacksonä¾èµ–</span>
implementation <span class="hljs-string">'com.fasterxml.jackson.core:jackson-databind:2.15.2'</span>
</code></pre>
<h3 data-id="heading-4">1.3 ä¾èµ–æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>æ ¸å¿ƒä¾èµ–<code>elasticsearch-java</code>ç‰ˆæœ¬å¿…é¡»ä¸ESæœåŠ¡ç«¯ç‰ˆæœ¬ä¸€è‡´ï¼ˆå¦‚ESæœåŠ¡ç«¯ä¸º9.1.0ï¼Œå®¢æˆ·ç«¯ä¹Ÿéœ€ä¸º9.1.0ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºç°ç‰ˆæœ¬å…¼å®¹å¼‚å¸¸ï¼ˆå¦‚<code>NoSuchMethodError</code>ã€æœªçŸ¥å‚æ•°å¼‚å¸¸ï¼‰ã€‚</li>
<li>æ— éœ€é¢å¤–å¼•å…¥ESæœåŠ¡ç«¯æ ¸å¿ƒåŒ…ï¼Œæ–°å®¢æˆ·ç«¯å·²å½»åº•è§£è€¦æ—§å®¢æˆ·ç«¯çš„å¼ºä¾èµ–é—®é¢˜ï¼Œä½“ç§¯æ›´è½»é‡ã€‚</li>
<li>å¤šæ¨¡å—é¡¹ç›®ä¸­ï¼Œéœ€ç¡®ä¿æ‰€æœ‰å­æ¨¡å—çš„ESå®¢æˆ·ç«¯ç‰ˆæœ¬ç»Ÿä¸€ï¼Œé¿å…å‡ºç°å¤šä¸ªå®¢æˆ·ç«¯å®ä¾‹å†²çªçš„æƒ…å†µã€‚</li>
</ul>
<h2 data-id="heading-5">äºŒã€æ ¸å¿ƒAPIå®æˆ˜ï¼ˆåŸºç¡€å¿…å­¦ï¼‰</h2>
<p>æœ¬æ–‡ä»¥ã€Œå•†å“ï¼ˆProductï¼‰ã€ä¸ºç¤ºä¾‹å®ä½“ï¼Œæ¨¡æ‹Ÿå®é™…ä¸šåŠ¡åœºæ™¯ï¼Œè®²è§£æ–°å®¢æˆ·ç«¯çš„å„é¡¹åŸºç¡€æ“ä½œã€‚æ‰€æœ‰ä»£ç å‡åŒ…å«å®Œæ•´æ³¨é‡Šï¼Œæ–°æ‰‹å¯ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®ä¸­æµ‹è¯•ï¼ˆéœ€æ›¿æ¢ESæœåŠ¡ç«¯åœ°å€ã€è´¦å·å¯†ç ï¼‰ã€‚</p>
<h3 data-id="heading-6">2.1 å®šä¹‰ç¤ºä¾‹å®ä½“ç±»</h3>
<p>åˆ›å»ºå•†å“å®ä½“ç±»<code>Product</code>ï¼Œå¯¹åº”ESä¸­çš„<code>products</code>ç´¢å¼•ï¼Œå­—æ®µå«ä¹‰ï¼š<code>sku</code>ï¼ˆå•†å“å”¯ä¸€æ ‡è¯†ï¼‰ã€<code>name</code>ï¼ˆå•†å“åç§°ï¼‰ã€<code>price</code>ï¼ˆå•†å“ä»·æ ¼ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> lombok.<span class="hljs-property">AllArgsConstructor</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">Data</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">NoArgsConstructor</span>;

<span class="hljs-comment">/**
 * å•†å“å®ä½“ç±»ï¼ˆå¯¹åº”ESçš„productsç´¢å¼•ï¼‰
 * æ³¨ï¼š<span class="hljs-doctag">@Data</span>æ³¨è§£ç­‰ä»·äº<span class="hljs-doctag">@Getter</span>+<span class="hljs-doctag">@Setter</span>+<span class="hljs-doctag">@ToString</span>+<span class="hljs-doctag">@EqualsAndHashCode</span>+<span class="hljs-doctag">@RequiredArgsConstructor</span>
 * è‹¥ä¸ä½¿ç”¨Lombokï¼Œéœ€æ‰‹åŠ¨å®ç°getter/setteræ–¹æ³•
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>  <span class="hljs-comment">// å…¨å‚æ„é€ æ–¹æ³•</span>
<span class="hljs-meta">@NoArgsConstructor</span>   <span class="hljs-comment">// æ— å‚æ„é€ æ–¹æ³•ï¼ˆJSONååºåˆ—åŒ–å¿…é¡»ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-comment">// å•†å“å”¯ä¸€æ ‡è¯†ï¼ˆå¯¹åº”ESæ–‡æ¡£idï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> sku;
    <span class="hljs-comment">// å•†å“åç§°ï¼ˆå¯ç”¨äºå…¨æ–‡æ£€ç´¢ã€ç²¾ç¡®æ£€ç´¢ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;
    <span class="hljs-comment">// å•†å“ä»·æ ¼ï¼ˆå¯ç”¨äºèŒƒå›´æŸ¥è¯¢ã€èšåˆç»Ÿè®¡ï¼‰</span>
    <span class="hljs-keyword">private</span> double price;
}
</code></pre>
<h3 data-id="heading-7">2.2 åˆ›å»ºESå®¢æˆ·ç«¯ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰</h3>
<p>ES 9.X Javaå®¢æˆ·ç«¯é€šè¿‡<code>ElasticsearchClient</code>ç±»å®ç°ä¸æœåŠ¡ç«¯çš„è¿æ¥ï¼Œæ”¯æŒé…ç½®æœåŠ¡ç«¯åœ°å€ã€è´¦å·å¯†ç ã€è¶…æ—¶æ—¶é—´ç­‰å‚æ•°ã€‚å®¢æˆ·ç«¯ä¸ºé‡é‡çº§å¯¹è±¡ï¼Œå»ºè®®å…¨å±€å•ä¾‹åˆ›å»ºï¼Œé¿å…é¢‘ç¹åˆ›å»º/é”€æ¯å¯¼è‡´èµ„æºæ³„éœ²ã€‚</p>
<p><strong>2.2.1 åŸºç¡€åˆ›å»ºï¼ˆç®€æ´ç‰ˆï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.ElasticsearchClient;
<span class="hljs-keyword">import</span> co.elastic.clients.json.jackson.JacksonJsonpMapper;
<span class="hljs-keyword">import</span> co.elastic.clients.transport.rest_client.RestClientTransport;
<span class="hljs-keyword">import</span> org.elasticsearch.client.RestClient;

<span class="hljs-keyword">import</span> java.net.URI;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsClientUtil</span> {
    <span class="hljs-comment">// å•ä¾‹å®¢æˆ·ç«¯å®ä¾‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ElasticsearchClient esClient;

    <span class="hljs-comment">// åˆå§‹åŒ–å®¢æˆ·ç«¯ï¼ˆé™æ€ä»£ç å—ï¼Œé¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰</span>
    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. é…ç½®ESæœåŠ¡ç«¯åœ°å€ï¼ˆå•æœºï¼šå•ä¸ªURIï¼›é›†ç¾¤ï¼šå¤šä¸ªURIç”¨é€—å·åˆ†éš”ï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">serverUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://127.0.0.1:9200"</span>; <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„ESæœåŠ¡ç«¯åœ°å€</span>
            <span class="hljs-comment">// 2. åˆ›å»ºRestClientï¼ˆåº•å±‚HTTPè¿æ¥ï¼‰</span>
            <span class="hljs-type">RestClient</span> <span class="hljs-variable">restClient</span> <span class="hljs-operator">=</span> RestClient.builder(URI.create(serverUrl))
                    <span class="hljs-comment">// é…ç½®è´¦å·å¯†ç ï¼ˆè‹¥ESæœªå¼€å¯æƒé™éªŒè¯ï¼Œå¯çœç•¥æ­¤æ­¥éª¤ï¼‰</span>
                    .setBasicAuth(<span class="hljs-string">"elastic"</span>, <span class="hljs-string">"123456"</span>) <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„ESè´¦å·å¯†ç </span>
                    .build();

            <span class="hljs-comment">// 3. åˆ›å»ºä¼ è¾“å±‚ï¼ˆæŒ‡å®šJSONåºåˆ—åŒ–æ–¹å¼ï¼ŒJacksonä¸ºé»˜è®¤æ¨èï¼‰</span>
            <span class="hljs-type">RestClientTransport</span> <span class="hljs-variable">transport</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestClientTransport</span>(
                    restClient, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JacksonJsonpMapper</span>()
            );

            <span class="hljs-comment">// 4. åˆ›å»ºæœ€ç»ˆçš„ESå®¢æˆ·ç«¯</span>
            esClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ElasticsearchClient</span>(transport);
            System.out.println(<span class="hljs-string">"ES 9.Xå®¢æˆ·ç«¯åˆå§‹åŒ–æˆåŠŸï¼"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ESå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡ç«¯åœ°å€å’Œè´¦å·å¯†ç "</span>);
        }
    }

    <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯å®ä¾‹ï¼ˆå¯¹å¤–æä¾›ç»Ÿä¸€è®¿é—®å…¥å£ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ElasticsearchClient <span class="hljs-title function_">getEsClient</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> esClient;
    }

    <span class="hljs-comment">// å…³é—­å®¢æˆ·ç«¯ï¼ˆé¡¹ç›®åœæ­¢æ—¶è°ƒç”¨ï¼Œé‡Šæ”¾èµ„æºï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeClient</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (esClient != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// å…³é—­ä¼ è¾“å±‚å’ŒRestClient</span>
                esClient._transport().close();
                esClient._transport().restClient().close();
                System.out.println(<span class="hljs-string">"ESå®¢æˆ·ç«¯å·²å…³é—­"</span>);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼ï¼ˆä»»ä½•åœ°æ–¹ç›´æ¥è°ƒç”¨ï¼‰</span>
<span class="hljs-comment">// ElasticsearchClient client = EsClientUtil.getEsClient();</span>
</code></pre>
<p><strong>2.2.2 è¿›é˜¶é…ç½®ï¼ˆè¶…æ—¶ã€é›†ç¾¤ï¼‰</strong></p>
<p>è‹¥éœ€é…ç½®è¿æ¥è¶…æ—¶ã€è¯»å–è¶…æ—¶ï¼Œæˆ–è¿æ¥ESé›†ç¾¤ï¼Œå¯ä¿®æ”¹å®¢æˆ·ç«¯åˆå§‹åŒ–é€»è¾‘ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é›†ç¾¤é…ç½®+è¶…æ—¶é…ç½®ï¼ˆæ›¿æ¢ä¸Šé¢çš„é™æ€ä»£ç å—ï¼‰</span>
<span class="hljs-keyword">static</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// é›†ç¾¤åœ°å€ï¼ˆå¤šä¸ªèŠ‚ç‚¹ç”¨é€—å·åˆ†éš”ï¼‰</span>
        String[] serverUrls = {<span class="hljs-string">"http://127.0.0.1:9200"</span>, <span class="hljs-string">"http://127.0.0.1:9201"</span>, <span class="hljs-string">"http://127.0.0.1:9202"</span>};
        <span class="hljs-comment">// æ„å»ºRestClientBuilder</span>
        RestClient.<span class="hljs-type">Builder</span> <span class="hljs-variable">restClientBuilder</span> <span class="hljs-operator">=</span> RestClient.builder(
                Arrays.stream(serverUrls).map(URI::create).toArray(URI[]::<span class="hljs-keyword">new</span>)
        );

        <span class="hljs-comment">// é…ç½®è´¦å·å¯†ç </span>
        restClientBuilder.setBasicAuth(<span class="hljs-string">"elastic"</span>, <span class="hljs-string">"123456"</span>);

        <span class="hljs-comment">// é…ç½®è¶…æ—¶æ—¶é—´ï¼ˆå¯é€‰ï¼Œæ ¹æ®ä¸šåŠ¡è°ƒæ•´ï¼‰</span>
        restClientBuilder.setRequestConfigCallback(requestConfigBuilder -&gt; 
                requestConfigBuilder
                        .setConnectTimeout(<span class="hljs-number">5000</span>)  <span class="hljs-comment">// è¿æ¥è¶…æ—¶ï¼š5ç§’</span>
                        .setSocketTimeout(<span class="hljs-number">10000</span>) <span class="hljs-comment">// è¯»å–è¶…æ—¶ï¼š10ç§’</span>
        );

        <span class="hljs-comment">// åç»­æ­¥éª¤ï¼ˆä¼ è¾“å±‚ã€å®¢æˆ·ç«¯åˆ›å»ºï¼‰ä¸åŸºç¡€ç‰ˆä¸€è‡´</span>
        <span class="hljs-type">RestClient</span> <span class="hljs-variable">restClient</span> <span class="hljs-operator">=</span> restClientBuilder.build();
        <span class="hljs-type">RestClientTransport</span> <span class="hljs-variable">transport</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestClientTransport</span>(restClient, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JacksonJsonpMapper</span>());
        esClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ElasticsearchClient</span>(transport);
        System.out.println(<span class="hljs-string">"ESé›†ç¾¤å®¢æˆ·ç«¯åˆå§‹åŒ–æˆåŠŸï¼"</span>);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        e.printStackTrace();
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ESå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥"</span>);
    }
}
</code></pre>
<h3 data-id="heading-8">2.3 æ–‡æ¡£æ“ä½œï¼ˆCRUDæ ¸å¿ƒï¼‰</h3>
<p>ESæ–‡æ¡£æ“ä½œæ˜¯åŸºç¡€ï¼Œæ–°å®¢æˆ·ç«¯æä¾›ä¸¤ç§è¯·æ±‚æ„å»ºæ–¹å¼ï¼š<strong>Fluent DSL</strong>ï¼ˆç®€æ´ä¼˜é›…ï¼Œæ¨èï¼‰å’Œ<strong>Builderæ¨¡å¼</strong>ï¼ˆçµæ´»ï¼Œé€‚åˆå¤æ‚åœºæ™¯ï¼‰ï¼Œä»¥ä¸‹åˆ†åˆ«æ¼”ç¤ºã€‚</p>
<p><strong>2.3.1 æ’å…¥æ–‡æ¡£ï¼ˆå•æ¡ï¼‰</strong></p>
<p>æ’å…¥æ–‡æ¡£å³å‘ESç´¢å¼•ä¸­æ·»åŠ ä¸€æ¡æ•°æ®ï¼Œå¯æŒ‡å®šæ–‡æ¡£idï¼ˆæ¨èç”¨ä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼Œå¦‚å•†å“skuï¼‰ï¼Œä¹Ÿå¯è®©ESè‡ªåŠ¨ç”Ÿæˆidã€‚</p>
<p><strong>æ–¹å¼1ï¼šFluent DSLï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">import co.elastic.clients.elasticsearch.core.IndexRequest;
import co.elastic.clients.elasticsearch.core.IndexResponse;

<span class="hljs-comment">/**
 * å•æ¡æ’å…¥æ–‡æ¡£ï¼ˆFluent DSLæ–¹å¼ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EsDocumentInsert</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è·å–ESå®¢æˆ·ç«¯</span>
            ElasticsearchClient client = EsClientUtil.getEsClient();

            <span class="hljs-comment">// 2. æ„å»ºå•†å“æ•°æ®ï¼ˆæ¨¡æ‹Ÿä¸šåŠ¡æ•°æ®ï¼‰</span>
            Product product = <span class="hljs-keyword">new</span> Product(<span class="hljs-string">"sku001"</span>, <span class="hljs-string">"è‹¹æœ14 Pro"</span>, <span class="hljs-number">7999.0</span>);

            <span class="hljs-comment">// 3. æ„å»ºæ’å…¥è¯·æ±‚ï¼ˆFluent DSLè¯­æ³•ï¼Œé“¾å¼è°ƒç”¨ï¼‰</span>
            IndexRequest&lt;Product&gt; request = IndexRequest.of(i -&gt; i
                    .index(<span class="hljs-string">"products"</span>)          <span class="hljs-comment">// æŒ‡å®šç´¢å¼•åç§°ï¼ˆè‹¥ç´¢å¼•ä¸å­˜åœ¨ï¼ŒESä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå»ºè®®æå‰åˆ›å»ºï¼‰</span>
                    .id(product.getSku())       <span class="hljs-comment">// æŒ‡å®šæ–‡æ¡£idï¼ˆä¸å•†å“skuä¸€è‡´ï¼Œä¾¿äºåç»­æŸ¥è¯¢å’Œä¿®æ”¹ï¼‰</span>
                    .document(product)          <span class="hljs-comment">// ä¼ å…¥è¦æ’å…¥çš„å®ä½“å¯¹è±¡ï¼ˆè‡ªåŠ¨åºåˆ—åŒ–ä¸ºJSONï¼‰</span>
                    .refresh(<span class="hljs-literal">true</span>)              <span class="hljs-comment">// æ’å…¥åç«‹å³åˆ·æ–°ç´¢å¼•ï¼ˆä¾¿äºç«‹å³æŸ¥è¯¢åˆ°ï¼Œç”Ÿäº§ç¯å¢ƒå¯æ ¹æ®æ€§èƒ½è°ƒæ•´ï¼‰</span>
            );

            <span class="hljs-comment">// 4. æ‰§è¡Œæ’å…¥æ“ä½œï¼Œè·å–å“åº”ç»“æœ</span>
            IndexResponse response = client.index(request);

            <span class="hljs-comment">// 5. è§£æå“åº”ç»“æœ</span>
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ–‡æ¡£æ’å…¥æˆåŠŸï¼"</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç´¢å¼•åç§°ï¼š"</span> + response.index());
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ–‡æ¡£idï¼š"</span> + response.id());
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ’å…¥çŠ¶æ€ï¼š"</span> + response.result()); <span class="hljs-comment">// createdï¼ˆæ–°å¢ï¼‰/ updatedï¼ˆè¦†ç›–ï¼‰</span>

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ–‡æ¡£æ’å…¥å¤±è´¥ï¼š"</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é¡¹ç›®åœæ­¢æ—¶å…³é—­å®¢æˆ·ç«¯ï¼ˆå®é™…å¼€å‘ä¸­å¯åœ¨Springé”€æ¯æ–¹æ³•ä¸­è°ƒç”¨ï¼‰</span>
            <span class="hljs-comment">// EsClientUtil.closeClient();</span>
        }
    }
}
</code></pre>
<p><strong>æ–¹å¼2ï¼šBuilderæ¨¡å¼</strong></p>
<p>Builderæ¨¡å¼æ›´çµæ´»ï¼Œå¯åŠ¨æ€è®¾ç½®è¯·æ±‚å‚æ•°ï¼ˆå¦‚æ¡ä»¶åˆ¤æ–­åè®¾ç½®refreshã€timeoutç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.IndexRequest;

<span class="hljs-comment">/**
 * å•æ¡æ’å…¥æ–‡æ¡£ï¼ˆBuilderæ¨¡å¼ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsDocumentInsertByBuilder</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ„å»ºå•†å“æ•°æ®</span>
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"sku002"</span>, <span class="hljs-string">"åä¸ºMate 60"</span>, <span class="hljs-number">6999.0</span>);

            <span class="hljs-comment">// 2. æ„å»ºæ’å…¥è¯·æ±‚Builder</span>
            IndexRequest.Builder&lt;Product&gt; requestBuilder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>.Builder&lt;Product&gt;();
            requestBuilder.index(<span class="hljs-string">"products"</span>);          <span class="hljs-comment">// æŒ‡å®šç´¢å¼•</span>
            requestBuilder.id(product.getSku());       <span class="hljs-comment">// æŒ‡å®šæ–‡æ¡£id</span>
            requestBuilder.document(product);          <span class="hljs-comment">// ä¼ å…¥å®ä½“å¯¹è±¡</span>
            requestBuilder.refresh(<span class="hljs-literal">true</span>);              <span class="hljs-comment">// ç«‹å³åˆ·æ–°</span>

            <span class="hljs-comment">// 3. æ„å»ºè¯·æ±‚å¹¶æ‰§è¡Œ</span>
            <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(requestBuilder.build());

            <span class="hljs-comment">// 4. è§£æå“åº”</span>
            System.out.println(<span class="hljs-string">"Builderæ¨¡å¼æ’å…¥æˆåŠŸï¼Œæ–‡æ¡£idï¼š"</span> + response.id());

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>2.3.2 æ‰¹é‡æ’å…¥æ–‡æ¡£</strong></p>
<p>å½“éœ€è¦æ’å…¥å¤šæ¡æ–‡æ¡£æ—¶ï¼ˆå¦‚æ•°æ®å¯¼å…¥ï¼‰ï¼Œä½¿ç”¨æ‰¹é‡æ’å…¥å¯å¤§å¹…æå‡æ•ˆç‡ï¼Œé¿å…å•æ¡æ’å…¥é¢‘ç¹è¯·æ±‚ESæœåŠ¡ç«¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.BulkRequest;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.BulkResponse;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.bulk.BulkOperation;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * æ‰¹é‡æ’å…¥æ–‡æ¡£ï¼ˆæ¨èç”¨äºå¤šæ¡æ•°æ®å¯¼å…¥åœºæ™¯ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsDocumentBulkInsert</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ¨¡æ‹Ÿæ‰¹é‡å•†å“æ•°æ®ï¼ˆå®é™…å¼€å‘ä¸­å¯ä»æ•°æ®åº“ã€æ–‡ä»¶ä¸­è¯»å–ï¼‰</span>
            List&lt;Product&gt; productList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            productList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"sku003"</span>, <span class="hljs-string">"å°ç±³14"</span>, <span class="hljs-number">4999.0</span>));
            productList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"sku004"</span>, <span class="hljs-string">"OPPO Find X7"</span>, <span class="hljs-number">5999.0</span>));
            productList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"sku005"</span>, <span class="hljs-string">"vivo X100"</span>, <span class="hljs-number">5499.0</span>));

            <span class="hljs-comment">// 2. æ„å»ºæ‰¹é‡è¯·æ±‚Builder</span>
            BulkRequest.<span class="hljs-type">Builder</span> <span class="hljs-variable">bulkBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BulkRequest</span>.Builder();

            <span class="hljs-comment">// 3. éå†å•†å“åˆ—è¡¨ï¼Œæ·»åŠ æ‰¹é‡æ“ä½œï¼ˆæ¯æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªindexæ“ä½œï¼‰</span>
            <span class="hljs-keyword">for</span> (Product product : productList) {
                bulkBuilder.operations(op -&gt; op
                        .index(idx -&gt; idx          <span class="hljs-comment">// æ¯æ¡æ“ä½œéƒ½æ˜¯æ’å…¥æ“ä½œ</span>
                                .index(<span class="hljs-string">"products"</span>)  <span class="hljs-comment">// æŒ‡å®šç´¢å¼•</span>
                                .id(product.getSku()) <span class="hljs-comment">// æŒ‡å®šæ–‡æ¡£id</span>
                                .document(product)  <span class="hljs-comment">// ä¼ å…¥å•†å“æ•°æ®</span>
                        )
                );
            }

            <span class="hljs-comment">// 4. æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Œè·å–å“åº”</span>
            <span class="hljs-type">BulkResponse</span> <span class="hljs-variable">bulkResponse</span> <span class="hljs-operator">=</span> client.bulk(bulkBuilder.build());

            <span class="hljs-comment">// 5. è§£ææ‰¹é‡å“åº”ç»“æœï¼ˆæ‰¹é‡æ“ä½œå¯èƒ½éƒ¨åˆ†æˆåŠŸã€éƒ¨åˆ†å¤±è´¥ï¼Œéœ€æ ¡éªŒï¼‰</span>
            <span class="hljs-keyword">if</span> (bulkResponse.errors()) {
                System.out.println(<span class="hljs-string">"æ‰¹é‡æ’å…¥å­˜åœ¨å¤±è´¥é¡¹ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š"</span>);
                bulkResponse.items().forEach(item -&gt; {
                    <span class="hljs-keyword">if</span> (item.error() != <span class="hljs-literal">null</span>) {
                        System.out.println(<span class="hljs-string">"æ–‡æ¡£idï¼š"</span> + item.id() + <span class="hljs-string">"ï¼Œæ’å…¥å¤±è´¥ï¼š"</span> + item.error().reason());
                    }
                });
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"æ‰¹é‡æ’å…¥å…¨éƒ¨æˆåŠŸï¼"</span>);
                System.out.println(<span class="hljs-string">"æ’å…¥æ€»æ•°ï¼š"</span> + productList.size());
            }

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
            System.out.println(<span class="hljs-string">"æ‰¹é‡æ’å…¥å¤±è´¥ï¼š"</span> + e.getMessage());
        }
    }
}
</code></pre>
<p><strong>2.3.3 è¡¥å……ï¼šåˆ›å»ºç´¢å¼•ï¼ˆæ¨èæå‰åˆ›å»ºï¼‰</strong></p>
<p>è™½ç„¶ESä¼šè‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„ç´¢å¼•ï¼Œä½†è‡ªåŠ¨åˆ›å»ºçš„ç´¢å¼•å­—æ®µç±»å‹å¯èƒ½ä¸ç¬¦åˆé¢„æœŸï¼ˆå¦‚priceå¯èƒ½è¢«è¯†åˆ«ä¸ºtextç±»å‹ï¼Œæ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼‰ï¼Œå»ºè®®æå‰æ‰‹åŠ¨åˆ›å»ºç´¢å¼•ï¼ŒæŒ‡å®šå­—æ®µç±»å‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.indices.CreateIndexRequest;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.indices.CreateIndexResponse;

<span class="hljs-comment">/**
 * æ‰‹åŠ¨åˆ›å»ºproductsç´¢å¼•ï¼ˆæŒ‡å®šå­—æ®µç±»å‹ï¼Œæ¨èæå‰åˆ›å»ºï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsIndexCreate</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> EsClientUtil.getEsClient();

            <span class="hljs-comment">// æ„å»ºåˆ›å»ºç´¢å¼•è¯·æ±‚ï¼ŒæŒ‡å®šå­—æ®µæ˜ å°„ï¼ˆmappingï¼‰</span>
            <span class="hljs-type">CreateIndexRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> CreateIndexRequest.of(c -&gt; c
                    .index(<span class="hljs-string">"products"</span>)          <span class="hljs-comment">// ç´¢å¼•åç§°</span>
                    .mappings(m -&gt; m            <span class="hljs-comment">// å­—æ®µæ˜ å°„é…ç½®</span>
                            .properties(<span class="hljs-string">"sku"</span>, p -&gt; p.keyword())  <span class="hljs-comment">// skuï¼škeywordç±»å‹ï¼ˆç²¾ç¡®åŒ¹é…ï¼Œä¸åˆ†è¯ï¼‰</span>
                            .properties(<span class="hljs-string">"name"</span>, p -&gt; p.text())     <span class="hljs-comment">// nameï¼štextç±»å‹ï¼ˆæ”¯æŒå…¨æ–‡æ£€ç´¢ï¼Œåˆ†è¯ï¼‰</span>
                            .properties(<span class="hljs-string">"price"</span>, p -&gt; p.double_()) <span class="hljs-comment">// priceï¼šdoubleç±»å‹ï¼ˆæ”¯æŒæ•°å€¼è¿ç®—ã€èŒƒå›´æŸ¥è¯¢ï¼‰</span>
                    )
            );

            <span class="hljs-comment">// æ‰§è¡Œåˆ›å»ºæ“ä½œ</span>
            <span class="hljs-type">CreateIndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.indices().create(request);

            <span class="hljs-keyword">if</span> (response.acknowledged()) {
                System.out.println(<span class="hljs-string">"productsç´¢å¼•åˆ›å»ºæˆåŠŸï¼"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"productsç´¢å¼•åˆ›å»ºå¤±è´¥ï¼"</span>);
            }

        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// è‹¥ç´¢å¼•å·²å­˜åœ¨ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¯å¿½ç•¥æˆ–æ•è·å¤„ç†</span>
            <span class="hljs-keyword">if</span> (e.getMessage().contains(<span class="hljs-string">"resource_already_exists_exception"</span>)) {
                System.out.println(<span class="hljs-string">"productsç´¢å¼•å·²å­˜åœ¨ï¼Œæ— éœ€é‡å¤åˆ›å»ºï¼"</span>);
            } <span class="hljs-keyword">else</span> {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-9">2.4 æ£€ç´¢æ“ä½œï¼ˆæ ¸å¿ƒé‡ç‚¹ï¼‰</h3>
<p>ESçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ£€ç´¢ï¼Œæ–°å®¢æˆ·ç«¯æ”¯æŒå…¨æ–‡æ£€ç´¢ã€ç²¾ç¡®æ£€ç´¢ã€ç»„åˆæ£€ç´¢ç­‰å¸¸è§åœºæ™¯ï¼Œä»¥ä¸‹ç»“åˆå•†å“åœºæ™¯è¯¦ç»†æ¼”ç¤ºï¼Œæ‰€æœ‰ç¤ºä¾‹å‡åŸºäº<code>products</code>ç´¢å¼•å’Œæ‰¹é‡æ’å…¥çš„æ•°æ®ã€‚</p>
<p><strong>2.4.1 å…¨æ–‡æ£€ç´¢ï¼ˆmatchAll/matchï¼‰</strong></p>
<p>å…¨æ–‡æ£€ç´¢é€‚ç”¨äºæ¨¡ç³ŠæŸ¥è¯¢åœºæ™¯ï¼ˆå¦‚æ ¹æ®å•†å“åç§°æœç´¢ï¼‰ï¼ŒESä¼šå¯¹æŸ¥è¯¢å…³é”®è¯è¿›è¡Œåˆ†è¯ï¼ŒåŒ¹é…æ‰€æœ‰åŒ…å«åˆ†è¯ç»“æœçš„æ–‡æ¡£ã€‚</p>
<p><strong>åœºæ™¯1ï¼šæŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£ï¼ˆmatchAllï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.SearchRequest;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.SearchResponse;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.search.Hit;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * å…¨æ–‡æ£€ç´¢ - æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£ï¼ˆmatchAllï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsSearchMatchAll</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼ˆæŸ¥è¯¢productsç´¢å¼•ä¸‹æ‰€æœ‰æ–‡æ¡£ï¼‰</span>
            <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> SearchRequest.of(s -&gt; s
                    .index(<span class="hljs-string">"products"</span>)          <span class="hljs-comment">// æŒ‡å®šç´¢å¼•</span>
                    .query(q -&gt; q.matchAll(m -&gt; m)) <span class="hljs-comment">// å…¨æ–‡æ£€ç´¢ - åŒ¹é…æ‰€æœ‰æ–‡æ¡£</span>
            );

            <span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–å“åº”</span>
            SearchResponse&lt;Product&gt; response = client.search(request, Product.class);

            <span class="hljs-comment">// 3. è§£æå“åº”ç»“æœï¼ˆè·å–å‘½ä¸­çš„æ–‡æ¡£åˆ—è¡¨ï¼‰</span>
            List&lt;Hit&lt;Product&gt;&gt; hits = response.hits().hits();
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢åˆ°çš„æ–‡æ¡£æ€»æ•°ï¼š"</span> + response.hits().total().value());
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢ç»“æœè¯¦æƒ…ï¼š"</span>);

            <span class="hljs-comment">// éå†æ–‡æ¡£åˆ—è¡¨ï¼Œè·å–å•†å“ä¿¡æ¯</span>
            <span class="hljs-keyword">for</span> (Hit&lt;Product&gt; hit : hits) {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> hit.source(); <span class="hljs-comment">// ååºåˆ—åŒ–ä¸ºProductå®ä½“</span>
                System.out.println(<span class="hljs-string">"æ–‡æ¡£idï¼š"</span> + hit.id() + <span class="hljs-string">"ï¼Œå•†å“ä¿¡æ¯ï¼š"</span> + product);
            }

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>åœºæ™¯2ï¼šæ ¹æ®å…³é”®è¯æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆmatchï¼‰</strong></p>
<p>æ ¹æ®å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆå¦‚æœç´¢â€œ14â€ï¼Œä¼šåŒ¹é…â€œè‹¹æœ14 Proâ€ã€â€œå°ç±³14â€ï¼‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * å…¨æ–‡æ£€ç´¢ - å…³é”®è¯æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆmatchï¼‰
 */</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">EsSearchMatch</span> {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">ElasticsearchClient</span> <span class="hljs-selector-tag">client</span> = <span class="hljs-selector-tag">EsClientUtil</span><span class="hljs-selector-class">.getEsClient</span>();

            <span class="hljs-comment">// 1. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼ˆæ ¹æ®å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå…³é”®è¯ï¼š14ï¼‰</span>
            <span class="hljs-selector-tag">SearchRequest</span> <span class="hljs-selector-tag">request</span> = <span class="hljs-selector-tag">SearchRequest</span><span class="hljs-selector-class">.of</span>(s -&gt; s
                    .<span class="hljs-built_in">index</span>(<span class="hljs-string">"products"</span>)
                    .<span class="hljs-built_in">query</span>(q -&gt; q
                            .<span class="hljs-built_in">match</span>(m -&gt; m
                                    .<span class="hljs-built_in">field</span>(<span class="hljs-string">"name"</span>)     <span class="hljs-comment">// æ£€ç´¢çš„å­—æ®µï¼ˆå•†å“åç§°ï¼‰</span>
                                    .<span class="hljs-built_in">query</span>(<span class="hljs-string">"14"</span>)       <span class="hljs-comment">// æ£€ç´¢å…³é”®è¯</span>
                                    .<span class="hljs-built_in">fuzziness</span>(<span class="hljs-string">"AUTO"</span>) <span class="hljs-comment">// æ¨¡ç³ŠåŒ¹é…ï¼ˆå…è®¸è½»å¾®æ‹¼å†™é”™è¯¯ï¼Œå¦‚14å†™æˆ15ï¼Œå¯æ ¹æ®éœ€æ±‚å…³é—­ï¼‰</span>
                            )
                    )
            );

            <span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢</span>
            <span class="hljs-selector-tag">SearchResponse</span>&lt;<span class="hljs-selector-tag">Product</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.search</span>(request, Product.class);

            <span class="hljs-comment">// 3. è§£æç»“æœ</span>
            <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Hit</span>&lt;<span class="hljs-selector-tag">Product</span>&gt;&gt; <span class="hljs-selector-tag">hits</span> = <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.hits</span>()<span class="hljs-selector-class">.hits</span>();
            <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"åŒ¹é…åˆ°çš„å•†å“æ•°é‡ï¼š"</span> + hits.<span class="hljs-built_in">size</span>());
            <span class="hljs-selector-tag">hits</span><span class="hljs-selector-class">.forEach</span>(hit -&gt; {
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å•†å“ï¼š"</span> + hit.<span class="hljs-built_in">source</span>().<span class="hljs-built_in">getName</span>() + <span class="hljs-string">"ï¼Œä»·æ ¼ï¼š"</span> + hit.<span class="hljs-built_in">source</span>().<span class="hljs-built_in">getPrice</span>());
            });

        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">e</span><span class="hljs-selector-class">.printStackTrace</span>();
        }
    }
}
</code></pre>
<p><strong>2.4.2 ç²¾ç¡®æ£€ç´¢ï¼ˆterm/rangeï¼‰</strong></p>
<p>ç²¾ç¡®æ£€ç´¢é€‚ç”¨äºæ— éœ€åˆ†è¯ã€ç²¾å‡†åŒ¹é…çš„åœºæ™¯ï¼Œå¸¸è§ä¸¤ç§ç±»å‹ï¼š<code>term</code>ï¼ˆè¯æ¡ç²¾ç¡®åŒ¹é…ï¼‰å’Œ<code>range</code>ï¼ˆèŒƒå›´åŒ¹é…ï¼‰ã€‚</p>
<p><strong>åœºæ™¯1ï¼štermç²¾ç¡®åŒ¹é…ï¼ˆkeywordå­—æ®µæ¨èï¼‰</strong></p>
<p>é€‚ç”¨äºåŒ¹é…å›ºå®šè¯æ¡ï¼ˆå¦‚æ ¹æ®skuæŸ¥è¯¢å•†å“ã€æ ¹æ®å•†å“åç§°ç²¾ç¡®åŒ¹é…ï¼‰ï¼Œæ³¨æ„ï¼štextç±»å‹å­—æ®µä½¿ç”¨termæŸ¥è¯¢å¯èƒ½æ— æ³•åŒ¹é…ï¼ˆå› textä¼šåˆ†è¯ï¼‰ï¼Œæ¨èç”¨äºkeywordå­—æ®µã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
 * ç²¾ç¡®æ£€ç´¢ - termè¯æ¡åŒ¹é…ï¼ˆé€‚ç”¨äºkeywordå­—æ®µï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EsSearchTerm</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-keyword">try</span> {
            ElasticsearchClient client = EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼ˆæ ¹æ®skuç²¾ç¡®æŸ¥è¯¢å•†å“ï¼Œskuä¸ºkeywordå­—æ®µï¼‰</span>
            SearchRequest request = SearchRequest.of(s -&gt; s
                    .index(<span class="hljs-string">"products"</span>)
                    .query(q -&gt; q
                            .term(t -&gt; t
                                    .field(<span class="hljs-string">"sku"</span>)      <span class="hljs-comment">// æ£€ç´¢å­—æ®µï¼ˆskuï¼Œkeywordç±»å‹ï¼‰</span>
                                    .<span class="hljs-keyword">value</span>(<span class="hljs-string">"sku001"</span>)   <span class="hljs-comment">// ç²¾ç¡®åŒ¹é…çš„å€¼</span>
                            )
                    )
            );

            <span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢</span>
            SearchResponse&lt;Product&gt; response = client.search(request, Product.<span class="hljs-keyword">class</span>);

            <span class="hljs-comment">// 3. è§£æç»“æœ</span>
            List&lt;Hit&lt;Product&gt;&gt; hits = response.hits().hits();
            <span class="hljs-keyword">if</span> (hits.isEmpty()) {
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æœªæŸ¥è¯¢åˆ°å¯¹åº”å•†å“ï¼"</span>);
            } <span class="hljs-keyword">else</span> {
                Product product = hits.<span class="hljs-keyword">get</span>(<span class="hljs-number">0</span>).source();
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç²¾ç¡®æŸ¥è¯¢åˆ°çš„å•†å“ï¼š"</span> + product);
            }

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>åœºæ™¯2ï¼šrangeèŒƒå›´æŸ¥è¯¢ï¼ˆæ•°å€¼å­—æ®µæ¨èï¼‰</strong></p>
<p>é€‚ç”¨äºæ•°å€¼ã€æ—¥æœŸç­‰å­—æ®µçš„èŒƒå›´åŒ¹é…ï¼ˆå¦‚æŸ¥è¯¢ä»·æ ¼åœ¨5000-8000ä¹‹é—´çš„å•†å“ï¼‰ï¼ŒES 9.Xä¸­æ•°å€¼ç±»å‹çš„rangeæŸ¥è¯¢éœ€ä½¿ç”¨<code>number</code>å‡½æ•°ï¼Œé¿å…è¸©å‘ï¼</p>
<pre><code class="hljs language-ini" lang="ini">import co.elastic.clients.elasticsearch.core.search.RangeQuery<span class="hljs-comment">;</span>

/**
 * ç²¾ç¡®æ£€ç´¢ - rangeèŒƒå›´æŸ¥è¯¢ï¼ˆé€‚ç”¨äºæ•°å€¼ã€æ—¥æœŸå­—æ®µï¼‰
 */
public class EsSearchRange {
    public static void main(String<span class="hljs-section">[]</span> args) {
        try {
            ElasticsearchClient <span class="hljs-attr">client</span> = EsClientUtil.getEsClient()<span class="hljs-comment">;</span>

            // 1. æ„å»ºrangeæŸ¥è¯¢æ¡ä»¶ï¼ˆä»·æ ¼èŒƒå›´ï¼š5000 â‰¤ price â‰¤ 8000ï¼‰
            RangeQuery <span class="hljs-attr">rangeQuery</span> = RangeQuery.of(r -&gt; r
                    .number(n -&gt; n            // å¿…é¡»ä½¿ç”¨numberå‡½æ•°ï¼ˆæ•°å€¼ç±»å‹ä¸“ç”¨ï¼‰ï¼Œä¸å¯ç›´æ¥ç”¨field
                            .field("price")  // æ£€ç´¢å­—æ®µï¼ˆpriceï¼Œdoubleç±»å‹ï¼‰
                            .gte(5000.0)     // å¤§äºç­‰äºï¼ˆ<span class="hljs-attr">gte</span> = greater than or equalï¼‰
                            .lte(8000.0)     // å°äºç­‰äºï¼ˆ<span class="hljs-attr">lte</span> = less than or equalï¼‰
                            // å¯é€‰ï¼šgtï¼ˆå¤§äºï¼‰ã€ltï¼ˆå°äºï¼‰
                    )
            )<span class="hljs-comment">;</span>

            // 2. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼Œä¼ å…¥rangeæŸ¥è¯¢æ¡ä»¶
            SearchRequest <span class="hljs-attr">request</span> = SearchRequest.of(s -&gt; s
                    .index("products")
                    .query(q -&gt; q.range(rangeQuery)) // æ‰§è¡ŒrangeæŸ¥è¯¢
            )<span class="hljs-comment">;</span>

            // 3. æ‰§è¡ŒæŸ¥è¯¢å¹¶è§£æç»“æœ
            SearchResponse&lt;Product&gt; <span class="hljs-attr">response</span> = client.search(request, Product.class)<span class="hljs-comment">;</span>
            List&lt;Hit&lt;Product&gt;&gt; <span class="hljs-attr">hits</span> = response.hits().hits()<span class="hljs-comment">;</span>
            System.out.println("ä»·æ ¼åœ¨5000-8000ä¹‹é—´çš„å•†å“æ•°é‡ï¼š" + hits.size())<span class="hljs-comment">;</span>
            hits.forEach(hit -&gt; {
                Product <span class="hljs-attr">product</span> = hit.source()<span class="hljs-comment">;</span>
                System.out.println("å•†å“åç§°ï¼š" + product.getName() + "ï¼Œä»·æ ¼ï¼š" + product.getPrice())<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>

        } catch (Exception e) {
            e.printStackTrace()<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<p><strong>2.4.3 ç»„åˆæ£€ç´¢ï¼ˆBool Queryï¼‰</strong></p>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œæ£€ç´¢æ¡ä»¶å¾€å¾€æ˜¯å¤šä¸ªæ¡ä»¶çš„ç»„åˆï¼ˆå¦‚â€œå•†å“åç§°åŒ…å«14â€ä¸”â€œä»·æ ¼åœ¨5000ä»¥ä¸Šâ€ä¸”â€œæ’é™¤sku001â€ï¼‰ï¼Œæ­¤æ—¶éœ€ä½¿ç”¨<code>Bool Query</code>ç»„åˆå¤šä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚</p>
<p>Bool Queryæ ¸å¿ƒå­å¥ï¼ˆå¿…æ‡‚ï¼‰ï¼š</p>
<ul>
<li><code>must</code>ï¼šå¿…é¡»æ»¡è¶³è¯¥æ¡ä»¶ï¼ˆå‚ä¸è¯„åˆ†ï¼Œå½±å“æŸ¥è¯¢ç»“æœæ’åºï¼‰</li>
<li><code>mustNot</code>ï¼šå¿…é¡»ä¸æ»¡è¶³è¯¥æ¡ä»¶ï¼ˆä¸å‚ä¸è¯„åˆ†ï¼‰</li>
<li><code>filter</code>ï¼šå¿…é¡»æ»¡è¶³è¯¥æ¡ä»¶ï¼ˆä¸å‚ä¸è¯„åˆ†ï¼Œå¯ç¼“å­˜ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ï¼‰</li>
<li><code>should</code>ï¼šå¯é€‰æ»¡è¶³è¯¥æ¡ä»¶ï¼ˆæ»¡è¶³ä¼šå¢åŠ è¯„åˆ†ï¼Œä¸æ»¡è¶³ä¸å½±å“ï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.search.BoolQuery;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.search.MatchQuery;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.search.Query;
<span class="hljs-keyword">import</span> co.elastic.clients.elasticsearch.core.search.TermQuery;

<span class="hljs-comment">/**
 * ç»„åˆæ£€ç´¢ - Bool Queryï¼ˆå¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢ï¼Œå®é™…ä¸šåŠ¡é«˜é¢‘ä½¿ç”¨ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EsSearchBool</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ„å»ºå­æŸ¥è¯¢æ¡ä»¶</span>
            <span class="hljs-comment">// å­æŸ¥è¯¢1ï¼šå•†å“åç§°åŒ…å«"14"ï¼ˆmustï¼Œå¿…é¡»æ»¡è¶³ï¼Œå‚ä¸è¯„åˆ†ï¼‰</span>
            <span class="hljs-type">Query</span> <span class="hljs-variable">nameQuery</span> <span class="hljs-operator">=</span> MatchQuery.of(m -&gt; m
                    .field(<span class="hljs-string">"name"</span>)
                    .query(<span class="hljs-string">"14"</span>)
            )._toQuery(); <span class="hljs-comment">// è½¬æ¢ä¸ºé€šç”¨Queryç±»å‹</span>

            <span class="hljs-comment">// å­æŸ¥è¯¢2ï¼šä»·æ ¼å¤§äº5000ï¼ˆfilterï¼Œå¿…é¡»æ»¡è¶³ï¼Œä¸å‚ä¸è¯„åˆ†ï¼Œæå‡æ€§èƒ½ï¼‰</span>
            <span class="hljs-type">RangeQuery</span> <span class="hljs-variable">priceRangeQuery</span> <span class="hljs-operator">=</span> RangeQuery.of(r -&gt; r
                    .number(n -&gt; n
                            .field(<span class="hljs-string">"price"</span>)
                            .gt(<span class="hljs-number">5000.0</span>) <span class="hljs-comment">// å¤§äº5000ï¼ˆgt = greater thanï¼‰</span>
                    )
            );
            <span class="hljs-type">Query</span> <span class="hljs-variable">priceFilterQuery</span> <span class="hljs-operator">=</span> priceRangeQuery._toQuery();

            <span class="hljs-comment">// å­æŸ¥è¯¢3ï¼šæ’é™¤sku001ï¼ˆmustNotï¼Œå¿…é¡»ä¸æ»¡è¶³ï¼‰</span>
            <span class="hljs-type">Query</span> <span class="hljs-variable">excludeSkuQuery</span> <span class="hljs-operator">=</span> TermQuery.of(t -&gt; t
                    .field(<span class="hljs-string">"sku"</span>)
                    .value(<span class="hljs-string">"sku001"</span>)
            )._toQuery();

            <span class="hljs-comment">// 2. ç»„åˆBool Queryï¼ˆå°†å¤šä¸ªå­æŸ¥è¯¢ç»„åˆèµ·æ¥ï¼‰</span>
            <span class="hljs-type">BoolQuery</span> <span class="hljs-variable">boolQuery</span> <span class="hljs-operator">=</span> BoolQuery.of(b -&gt; b
                    .must(nameQuery)           <span class="hljs-comment">// å¿…é¡»æ»¡è¶³ï¼šåç§°åŒ…å«14</span>
                    .filter(priceFilterQuery)  <span class="hljs-comment">// å¿…é¡»æ»¡è¶³ï¼šä»·æ ¼&gt;5000ï¼ˆè¿‡æ»¤ï¼Œä¸è¯„åˆ†ï¼‰</span>
                    .mustNot(excludeSkuQuery)  <span class="hljs-comment">// å¿…é¡»ä¸æ»¡è¶³ï¼šsku != sku001</span>
            );

            <span class="hljs-comment">// 3. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼Œæ‰§è¡ŒBoolæŸ¥è¯¢</span>
            <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> SearchRequest.of(s -&gt; s
                    .index(<span class="hljs-string">"products"</span>)
                    .query(q -&gt; q.bool(boolQuery)) <span class="hljs-comment">// ä¼ å…¥ç»„åˆå¥½çš„BoolæŸ¥è¯¢</span>
            );

            <span class="hljs-comment">// 4. æ‰§è¡ŒæŸ¥è¯¢å¹¶è§£æç»“æœ</span>
            SearchResponse&lt;Product&gt; response = client.search(request, Product.class);
            List&lt;Hit&lt;Product&gt;&gt; hits = response.hits().hits();
            System.out.println(<span class="hljs-string">"ç»„åˆæŸ¥è¯¢åŒ¹é…åˆ°çš„å•†å“æ•°é‡ï¼š"</span> + hits.size());
            hits.forEach(hit -&gt; {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> hit.source();
                System.out.println(<span class="hljs-string">"å•†å“ï¼š"</span> + product.getName() + <span class="hljs-string">"ï¼Œskuï¼š"</span> + product.getSku() + <span class="hljs-string">"ï¼Œä»·æ ¼ï¼š"</span> + product.getPrice());
            });

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h3 data-id="heading-10">2.5 åˆ†é¡µä¸æ’åº</h3>
<p>å®é™…å¼€å‘ä¸­ï¼Œæ£€ç´¢ç»“æœå¾€å¾€éœ€è¦åˆ†é¡µï¼ˆå¦‚å‰ç«¯åˆ—è¡¨åˆ†é¡µï¼‰å’Œæ’åºï¼ˆå¦‚æŒ‰ä»·æ ¼å‡åº/é™åºï¼‰ï¼ŒES 9.Xå®¢æˆ·ç«¯æ”¯æŒçµæ´»çš„åˆ†é¡µæ’åºé…ç½®ï¼Œä»¥ä¸‹ç»“åˆå•†å“åœºæ™¯æ¼”ç¤ºã€‚</p>
<p><strong>2.5.1 åŸºç¡€åˆ†é¡µæ’åºï¼ˆfrom+sizeï¼‰</strong></p>
<p>é€‚ç”¨äºæµ…åˆ†é¡µåœºæ™¯ï¼ˆæ•°æ®é‡è¾ƒå°ï¼Œåˆ†é¡µæ·±åº¦è¾ƒæµ…ï¼‰ï¼Œæ ¸å¿ƒå‚æ•°ï¼š</p>
<ul>
<li><code>from</code>ï¼šèµ·å§‹åç§»é‡ï¼ˆä»ç¬¬å‡ æ¡æ•°æ®å¼€å§‹æŸ¥è¯¢ï¼Œé»˜è®¤0ï¼‰</li>
<li><code>size</code>ï¼šæ¯é¡µæ˜¾ç¤ºæ¡æ•°</li>
<li><code>sort</code>ï¼šæ’åºé…ç½®ï¼ˆæŒ‡å®šæ’åºå­—æ®µå’Œæ’åºæ–¹å‘ï¼‰</li>
</ul>
<p>æ³¨æ„ï¼šfrom+sizeæ–¹å¼åœ¨æ·±åº¦åˆ†é¡µï¼ˆå¦‚from=10000ï¼Œsize=10ï¼‰æ—¶ä¼šå­˜åœ¨ä¸¥é‡æ€§èƒ½ç“¶é¢ˆï¼Œå› ä¸ºESéœ€è¦ä»æ¯ä¸ªåˆ†ç‰‡è¯»å–10010æ¡æ•°æ®ï¼Œå†èšåˆæ’åºåæˆªå–ç»“æœï¼Œå¤§æ•°æ®é‡åœºæ™¯å»ºè®®ä½¿ç”¨Search Afteræˆ–Scroll APIã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">import co.elastic.clients.elasticsearch.core.search.SortOrder;

<span class="hljs-comment">/**
 * åˆ†é¡µä¸æ’åºï¼ˆåŸºç¡€from+sizeæ–¹å¼ï¼Œé€‚ç”¨äºæµ…åˆ†é¡µï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EsSearchPageSort</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        <span class="hljs-keyword">try</span> {
            ElasticsearchClient client = EsClientUtil.getEsClient();

            <span class="hljs-comment">// 1. æ¨¡æ‹Ÿå‰ç«¯åˆ†é¡µå‚æ•°ï¼ˆå®é™…å¼€å‘ä¸­ä»å‰ç«¯æ¥æ”¶ï¼‰</span>
            <span class="hljs-built_in">int</span> currentPage = <span class="hljs-number">1</span>;       <span class="hljs-comment">// å½“å‰é¡µç ï¼ˆå‰ç«¯é»˜è®¤ä»1å¼€å§‹ï¼ŒESä»0å¼€å§‹ï¼‰</span>
            <span class="hljs-built_in">int</span> pageSize = <span class="hljs-number">2</span>;          <span class="hljs-comment">// æ¯é¡µæ˜¾ç¤ºæ¡æ•°</span>
            String sortField = <span class="hljs-string">"price"</span>;<span class="hljs-comment">// æ’åºå­—æ®µï¼ˆå•†å“ä»·æ ¼ï¼‰</span>
            String sortOrder = <span class="hljs-string">"desc"</span>; <span class="hljs-comment">// æ’åºæ–¹å‘ï¼ˆdescï¼šé™åºï¼›ascï¼šå‡åºï¼‰</span>

            <span class="hljs-comment">// 2. è®¡ç®—èµ·å§‹åç§»é‡ï¼ˆfrom = (å½“å‰é¡µç -1) * æ¯é¡µæ¡æ•°ï¼‰</span>
            <span class="hljs-built_in">int</span> <span class="hljs-keyword">from</span> = (currentPage - <span class="hljs-number">1</span>) * pageSize;

            <span class="hljs-comment">// 3. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼ˆåˆ†é¡µ+æ’åº+æ¡ä»¶æŸ¥è¯¢ï¼‰</span>
            SearchRequest request = SearchRequest.of(s -&gt; s
                    .index(<span class="hljs-string">"products"</span>)
                    .<span class="hljs-keyword">from</span>(<span class="hljs-keyword">from</span>)                <span class="hljs-comment">// èµ·å§‹åç§»é‡</span>
                    .size(pageSize)            <span class="hljs-comment">// æ¯é¡µæ¡æ•°</span>
                    .sort(so -&gt; so             <span class="hljs-comment">// æ’åºé…ç½®</span>
                            .field(f -&gt; f
                                    .field(sortField)  <span class="hljs-comment">// æ’åºå­—æ®µ</span>
                                    <span class="hljs-comment">// æ’åºæ–¹å‘ï¼šæ ¹æ®å‰ç«¯å‚æ•°åŠ¨æ€è®¾ç½®</span>
                                    .order(<span class="hljs-string">"desc"</span>.<span class="hljs-keyword">equals</span>(sortOrder) ? SortOrder.Desc : SortOrder.Asc)
                            )
                    )
                    .query(q -&gt; q              <span class="hljs-comment">// å¯é€‰ï¼šæ·»åŠ æŸ¥è¯¢æ¡ä»¶ï¼ˆå¦‚ä»·æ ¼&gt;5000ï¼‰</span>
                            .range(r -&gt; r
                                    .number(n -&gt; n
                                            .field(<span class="hljs-string">"price"</span>)
                                            .gt(<span class="hljs-number">5000.0</span>)
                                    )
                            )
                    )
            );

            <span class="hljs-comment">// 4. æ‰§è¡ŒæŸ¥è¯¢å¹¶è§£æç»“æœ</span>
            SearchResponse&lt;Product&gt; response = client.search(request, Product.<span class="hljs-keyword">class</span>);
            List&lt;Hit&lt;Product&gt;&gt; hits = response.hits().hits();

            <span class="hljs-comment">// è§£æåˆ†é¡µç›¸å…³ä¿¡æ¯</span>
            <span class="hljs-built_in">long</span> total = response.hits().total().<span class="hljs-keyword">value</span>(); <span class="hljs-comment">// æ€»æ¡æ•°</span>
            <span class="hljs-built_in">long</span> totalPage = (total + pageSize - <span class="hljs-number">1</span>) / pageSize; <span class="hljs-comment">// æ€»é¡µæ•°</span>

            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åˆ†é¡µæŸ¥è¯¢ç»“æœï¼š"</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ€»æ¡æ•°ï¼š"</span> + total + <span class="hljs-string">"ï¼Œæ€»é¡µæ•°ï¼š"</span> + totalPage + <span class="hljs-string">"ï¼Œå½“å‰é¡µç ï¼š"</span> + currentPage);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å½“å‰é¡µå•†å“ï¼š"</span>);
            hits.forEach(hit -&gt; {
                Product product = hit.source();
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å•†å“ï¼š"</span> + product.getName() + <span class="hljs-string">"ï¼Œä»·æ ¼ï¼š"</span> + product.getPrice());
            });

        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p><strong>2.5.2 è¡¥å……ï¼šæ·±åº¦åˆ†é¡µè§£å†³æ–¹æ¡ˆ</strong></p>
<p>é’ˆå¯¹å¤§æ•°æ®é‡æ·±åº¦åˆ†é¡µåœºæ™¯ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼Œé¿å…from+sizeçš„æ€§èƒ½ç“¶é¢ˆï¼š</p>
<ol>
<li><strong>Search Afterï¼ˆæ¨èå®æ—¶æ·±åº¦åˆ†é¡µï¼‰</strong> ï¼šåŸºäºä¸Šä¸€é¡µæœ€åä¸€æ¡æ•°æ®çš„æ’åºå€¼ä½œä¸ºâ€œé”šç‚¹â€ï¼Œé¿å…è®¡ç®—åç§»é‡ï¼Œæ”¯æŒå®æ—¶æŸ¥è¯¢ï¼Œé€‚åˆå‰ç«¯åˆ—è¡¨åˆ†é¡µï¼ˆå¦‚APPå•†å“åˆ—è¡¨ç¿»é¡µï¼‰ã€‚</li>
<li><strong>Scroll APIï¼ˆé€‚åˆæ‰¹é‡å¯¼å‡º/æ‰¹å¤„ç†ï¼‰</strong> ï¼šåˆ›å»ºæŸ¥è¯¢å¿«ç…§ï¼Œé€šè¿‡æ¸¸æ ‡æ‰¹é‡è·å–ç»“æœï¼Œä¸æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25AE%259E%25E6%2597%25B6%25E6%2595%25B0%25E6%258D%25AE%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=1&amp;q=%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å®æ—¶æ•°æ®</a>ï¼ˆå¿«ç…§åˆ›å»ºåçš„æ•°æ®å˜æ›´ä¸ä¼šä½“ç°ï¼‰ï¼Œé€‚åˆå…¨é‡æ•°æ®å¯¼å‡ºã€ETLæµç¨‹ç­‰ç¦»çº¿åœºæ™¯ã€‚</li>
</ol>
<h3 data-id="heading-11">2.6 èšåˆæ“ä½œï¼ˆç»Ÿè®¡åˆ†æï¼‰</h3>
<p>èšåˆæ“ä½œé€‚ç”¨äº<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269982258%26content_type%3DArticle%26match_order%3D1%26q%3D%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%259F%25E8%25AE%25A1%25E5%2588%2586%25E6%259E%2590%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269982258&amp;content_type=Article&amp;match_order=1&amp;q=%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90&amp;zhida_source=entity" ref="nofollow noopener noreferrer">æ•°æ®ç»Ÿè®¡åˆ†æ</a>åœºæ™¯ï¼ˆå¦‚å•†å“ä»·æ ¼å¹³å‡å€¼ã€ä¸åŒç±»åˆ«çš„å•†å“æ•°é‡ç»Ÿè®¡ï¼‰ï¼ŒES 9.Xå®¢æˆ·ç«¯æ”¯æŒåŸºç¡€èšåˆå’Œå¤šçº§åµŒå¥—èšåˆï¼Œä»¥ä¸‹ç»“åˆç¤ºä¾‹æ¼”ç¤ºã€‚</p>
<p><strong>2.6.1 åŸºç¡€èšåˆï¼ˆstats/termsï¼‰</strong></p>
<p>å¸¸è§åŸºç¡€èšåˆç±»å‹ï¼š</p>
<ul>
<li><code>stats</code>ï¼šç»Ÿè®¡èšåˆï¼ˆè®¡ç®—å­—æ®µçš„å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€æ€»å’Œã€è®¡æ•°ï¼‰</li>
<li><code>terms</code>ï¼šåˆ†ç»„èšåˆï¼ˆæ ¹æ®å­—æ®µåˆ†ç»„ï¼Œç»Ÿè®¡æ¯ç»„çš„æ–‡æ¡£æ•°é‡ï¼‰</li>
</ul>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.Aggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.StatsAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.StringTermsAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.StringTermsBucket</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Map</span>;

<span class="hljs-comment">/**
 * åŸºç¡€èšåˆæ“ä½œï¼ˆstatsç»Ÿè®¡èšåˆ + termsåˆ†ç»„èšåˆï¼‰
 */</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">EsAggregationBasic</span> {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">ElasticsearchClient</span> <span class="hljs-selector-tag">client</span> = <span class="hljs-selector-tag">EsClientUtil</span><span class="hljs-selector-class">.getEsClient</span>();

            <span class="hljs-comment">// 1. æ„å»ºåŸºç¡€æŸ¥è¯¢æ¡ä»¶ï¼ˆå¯é€‰ï¼šè¿‡æ»¤éœ€è¦ç»Ÿè®¡çš„æ•°æ®ï¼‰</span>
            <span class="hljs-selector-tag">RangeQuery</span> <span class="hljs-selector-tag">rangeQuery</span> = <span class="hljs-selector-tag">RangeQuery</span><span class="hljs-selector-class">.of</span>(r -&gt; r
                    .<span class="hljs-built_in">number</span>(n -&gt; n
                            .<span class="hljs-built_in">field</span>(<span class="hljs-string">"price"</span>)
                            .<span class="hljs-built_in">gte</span>(<span class="hljs-number">5000.0</span>)
                            .<span class="hljs-built_in">lte</span>(<span class="hljs-number">10000.0</span>)
                    )
            );

            <span class="hljs-comment">// 2. æ„å»ºæŸ¥è¯¢è¯·æ±‚ï¼Œæ·»åŠ èšåˆæ“ä½œ</span>
            <span class="hljs-selector-tag">SearchRequest</span> <span class="hljs-selector-tag">request</span> = <span class="hljs-selector-tag">SearchRequest</span><span class="hljs-selector-class">.of</span>(s -&gt; s
                    .<span class="hljs-built_in">index</span>(<span class="hljs-string">"products"</span>)
                    .<span class="hljs-built_in">query</span>(q -&gt; q.<span class="hljs-built_in">range</span>(rangeQuery)) <span class="hljs-comment">// åŸºç¡€è¿‡æ»¤æ¡ä»¶ï¼ˆä»·æ ¼5000-10000ï¼‰</span>
                    .<span class="hljs-built_in">from</span>(<span class="hljs-number">0</span>).<span class="hljs-built_in">size</span>(<span class="hljs-number">10</span>)               <span class="hljs-comment">// åˆ†é¡µï¼šåªæŸ¥è¯¢å‰10æ¡æ–‡æ¡£ï¼ˆèšåˆç»“æœä¸å—å½±å“ï¼‰</span>
                    <span class="hljs-comment">// èšåˆ1ï¼šä»·æ ¼ç»Ÿè®¡ï¼ˆstatsï¼‰ï¼Œèšåˆåç§°ï¼šprice_stats</span>
                    .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"price_stats"</span>, a -&gt; a
                            .<span class="hljs-built_in">stats</span>(st -&gt; st.<span class="hljs-built_in">field</span>(<span class="hljs-string">"price"</span>))
                    )
                    <span class="hljs-comment">// èšåˆ2ï¼šæŒ‰å•†å“ç±»åˆ«åˆ†ç»„ï¼ˆtermsï¼‰ï¼Œèšåˆåç§°ï¼šcategory_termsï¼ˆæ­¤å¤„å‡è®¾å­˜åœ¨categoryå­—æ®µï¼‰</span>
                    .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"category_terms"</span>, a -&gt; a
                            .<span class="hljs-built_in">terms</span>(t -&gt; t
                                    .<span class="hljs-built_in">field</span>(<span class="hljs-string">"category.keyword"</span>) <span class="hljs-comment">// categoryå­—æ®µéœ€ä¸ºkeywordç±»å‹ï¼ˆåˆ†ç»„èšåˆæ¨èï¼‰</span>
                                    .<span class="hljs-built_in">size</span>(<span class="hljs-number">10</span>)                  <span class="hljs-comment">// åªæ˜¾ç¤ºå‰10ä¸ªåˆ†ç»„</span>
                            )
                    )
            );

            <span class="hljs-comment">// 3. æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–å“åº”</span>
            <span class="hljs-selector-tag">SearchResponse</span>&lt;<span class="hljs-selector-tag">Product</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.search</span>(request, Product.class);

            <span class="hljs-comment">// 4. è§£æèšåˆç»“æœï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰</span>
            <span class="hljs-selector-tag">if</span> (response.<span class="hljs-built_in">aggregations</span>() != null) {
                <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Aggregate</span>&gt; <span class="hljs-selector-tag">aggregations</span> = <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.aggregations</span>();

                <span class="hljs-comment">// 4.1 è§£æä»·æ ¼ç»Ÿè®¡èšåˆï¼ˆstatsï¼‰</span>
                <span class="hljs-selector-tag">StatsAggregate</span> <span class="hljs-selector-tag">priceStats</span> = <span class="hljs-selector-tag">aggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"price_stats"</span>)<span class="hljs-selector-class">.stats</span>();
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å•†å“ä»·æ ¼ç»Ÿè®¡ï¼ˆ5000-10000å…ƒï¼‰ï¼š"</span>);
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å¹³å‡ä»·æ ¼ï¼š"</span> + String.<span class="hljs-built_in">format</span>(<span class="hljs-string">"%.2f"</span>, priceStats.<span class="hljs-built_in">avg</span>()));
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"æœ€é«˜ä»·æ ¼ï¼š"</span> + priceStats.<span class="hljs-built_in">max</span>());
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"æœ€ä½ä»·æ ¼ï¼š"</span> + priceStats.<span class="hljs-built_in">min</span>());
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ä»·æ ¼æ€»å’Œï¼š"</span> + priceStats.<span class="hljs-built_in">sum</span>());
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ç»Ÿè®¡å•†å“æ•°é‡ï¼š"</span> + priceStats.<span class="hljs-built_in">count</span>());

                <span class="hljs-comment">// 4.2 è§£æç±»åˆ«åˆ†ç»„èšåˆï¼ˆtermsï¼‰</span>
                <span class="hljs-selector-tag">StringTermsAggregate</span> <span class="hljs-selector-tag">categoryTerms</span> = <span class="hljs-selector-tag">aggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"category_terms"</span>)<span class="hljs-selector-class">.sterms</span>();
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"\nå•†å“ç±»åˆ«åˆ†ç»„ç»Ÿè®¡ï¼š"</span>);
                <span class="hljs-selector-tag">for</span> (StringTermsBucket <span class="hljs-attribute">bucket </span>: categoryTerms.<span class="hljs-built_in">buckets</span>().<span class="hljs-built_in">array</span>()) {
                    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">category</span> = <span class="hljs-selector-tag">bucket</span><span class="hljs-selector-class">.key</span>(); <span class="hljs-comment">// åˆ†ç»„åç§°ï¼ˆç±»åˆ«ï¼‰</span>
                    <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">count</span> = <span class="hljs-selector-tag">bucket</span><span class="hljs-selector-class">.docCount</span>(); <span class="hljs-comment">// è¯¥ç±»åˆ«çš„å•†å“æ•°é‡</span>
                    <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ç±»åˆ«ï¼š"</span> + category + <span class="hljs-string">"ï¼Œå•†å“æ•°é‡ï¼š"</span> + count);
                }
            }

            <span class="hljs-comment">// 5. è§£ææ–‡æ¡£ç»“æœï¼ˆå¯é€‰ï¼‰</span>
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.hits</span>()<span class="hljs-selector-class">.hits</span>()<span class="hljs-selector-class">.forEach</span>(hit -&gt; {
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"\næ–‡æ¡£è¯¦æƒ…ï¼š"</span> + hit.<span class="hljs-built_in">source</span>());
            });

        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">e</span><span class="hljs-selector-class">.printStackTrace</span>();
        }
    }
}
</code></pre>
<p><strong>2.6.2 å¤šçº§åµŒå¥—èšåˆï¼ˆterms+range+avg/sumï¼‰</strong></p>
<p>å¤šçº§åµŒå¥—èšåˆé€‚ç”¨äºå¤æ‚ç»Ÿè®¡åœºæ™¯ï¼ˆå¦‚â€œæŒ‰å•†å“ç±»åˆ«åˆ†ç»„ â†’ æ¯ç»„å†…æŒ‰ä»·æ ¼åŒºé—´åˆ†ç»„ â†’ ç»Ÿè®¡æ¯ä¸ªä»·æ ¼åŒºé—´çš„å¹³å‡è¯„åˆ†å’Œé”€å”®æ€»é‡â€ï¼‰ï¼Œä»¥ä¸‹ä¿®å¤åŸå§‹ä»£ç bugï¼Œæ¼”ç¤ºå®Œæ•´åµŒå¥—èšåˆã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.AvgAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.RangeAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.RangeBucket</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.StringTermsAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.StringTermsBucket</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.TopHitsAggregate</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.SearchHit</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.json</span><span class="hljs-selector-class">.JsonData</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">co</span><span class="hljs-selector-class">.elastic</span><span class="hljs-selector-class">.clients</span><span class="hljs-selector-class">.elasticsearch</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.search</span><span class="hljs-selector-class">.SortOrder</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Map</span>;

<span class="hljs-comment">/**
 * å¤šçº§åµŒå¥—èšåˆï¼ˆtermsåˆ†ç»„ â†’ rangeåˆ†ç»„ â†’ avg/sumç»Ÿè®¡ï¼‰
 */</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">EsAggregationNested</span> {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">ElasticsearchClient</span> <span class="hljs-selector-tag">client</span> = <span class="hljs-selector-tag">EsClientUtil</span><span class="hljs-selector-class">.getEsClient</span>();

            <span class="hljs-comment">// 1. æ„å»ºåŸºç¡€è¿‡æ»¤æ¡ä»¶ï¼ˆè°ƒæ•´ä»·æ ¼èŒƒå›´ï¼Œè¦†ç›–åç»­æ‰€æœ‰åŒºé—´ï¼Œé¿å…ç»Ÿè®¡ä¸åˆ°æ•°æ®ï¼‰</span>
            <span class="hljs-selector-tag">RangeQuery</span> <span class="hljs-selector-tag">rangeQuery</span> = <span class="hljs-selector-tag">RangeQuery</span><span class="hljs-selector-class">.of</span>(r -&gt; r
                    .<span class="hljs-built_in">number</span>(n -&gt; n
                            .<span class="hljs-built_in">field</span>(<span class="hljs-string">"price"</span>)
                            .<span class="hljs-built_in">gte</span>(<span class="hljs-number">0.0</span>)       <span class="hljs-comment">// è¦†ç›–ä½ä»·åŒºé—´</span>
                            .<span class="hljs-built_in">lte</span>(<span class="hljs-number">200.0</span>)     <span class="hljs-comment">// è¦†ç›–é«˜ä»·åŒºé—´</span>
                    )
            );

            <span class="hljs-comment">// 2. æ„å»ºå¤šçº§åµŒå¥—èšåˆæŸ¥è¯¢è¯·æ±‚</span>
            <span class="hljs-selector-tag">SearchRequest</span> <span class="hljs-selector-tag">request</span> = <span class="hljs-selector-tag">SearchRequest</span><span class="hljs-selector-class">.of</span>(s -&gt; s
                    .<span class="hljs-built_in">index</span>(<span class="hljs-string">"products"</span>)
                    .<span class="hljs-built_in">query</span>(q -&gt; q.<span class="hljs-built_in">range</span>(rangeQuery))  <span class="hljs-comment">// åŸºç¡€è¿‡æ»¤æ¡ä»¶ï¼Œç­›é€‰æœ‰æ•ˆå•†å“</span>
                    .<span class="hljs-built_in">size</span>(<span class="hljs-number">0</span>)                          <span class="hljs-comment">// ä¸è¿”å›å…·ä½“æ–‡æ¡£ï¼Œåªå…³æ³¨èšåˆç»“æœï¼ˆæå‡æŸ¥è¯¢æ€§èƒ½ï¼‰</span>
                    <span class="hljs-comment">// ç¬¬ä¸€çº§èšåˆï¼šæŒ‰å•†å“ç±»åˆ«åˆ†ç»„ï¼ˆtermsï¼‰ï¼Œèšåˆåç§°ï¼šcategory_analysis</span>
                    .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"category_analysis"</span>, a -&gt; a
                            .<span class="hljs-built_in">terms</span>(t -&gt; t
                                    .<span class="hljs-built_in">field</span>(<span class="hljs-string">"category.keyword"</span>) <span class="hljs-comment">// æŒ‰ç±»åˆ«åˆ†ç»„ï¼ˆkeywordç±»å‹ï¼Œç¡®ä¿åˆ†ç»„ç²¾å‡†ï¼‰</span>
                                    .<span class="hljs-built_in">size</span>(<span class="hljs-number">10</span>)                  <span class="hljs-comment">// æ˜¾ç¤ºå‰10ä¸ªç±»åˆ«ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´</span>
                            )
                            <span class="hljs-comment">// ç¬¬äºŒçº§èšåˆ1ï¼šæŒ‰ä»·æ ¼åŒºé—´åˆ†ç»„ï¼ˆrangeï¼‰ï¼Œèšåˆåç§°ï¼šprice_ranges</span>
                            .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"price_ranges"</span>, a2 -&gt; a2
                                    .<span class="hljs-built_in">range</span>(r -&gt; r
                                            .<span class="hljs-built_in">field</span>(<span class="hljs-string">"price"</span>)  <span class="hljs-comment">// ä»·æ ¼åŒºé—´åˆ†ç»„å­—æ®µï¼ˆæ•°å€¼ç±»å‹ï¼‰</span>
                                            .<span class="hljs-built_in">ranges</span>(         <span class="hljs-comment">// å®šä¹‰3ä¸ªä»·æ ¼åŒºé—´ï¼Œæ¸…æ™°åŒºåˆ†ä½/ä¸­/é«˜ä»·</span>
                                                    range -&gt; range.<span class="hljs-built_in">key</span>(<span class="hljs-string">"low"</span>).<span class="hljs-built_in">from</span>(<span class="hljs-number">0.0</span>).<span class="hljs-built_in">to</span>(<span class="hljs-number">50.0</span>),      <span class="hljs-comment">// 0-50å…ƒï¼ˆä½ä»·ï¼‰</span>
                                                    range -&gt; range.<span class="hljs-built_in">key</span>(<span class="hljs-string">"medium"</span>).<span class="hljs-built_in">from</span>(<span class="hljs-number">50.0</span>).<span class="hljs-built_in">to</span>(<span class="hljs-number">100.0</span>),  <span class="hljs-comment">// 50-100å…ƒï¼ˆä¸­ä»·ï¼‰</span>
                                                    range -&gt; range.<span class="hljs-built_in">key</span>(<span class="hljs-string">"high"</span>).<span class="hljs-built_in">from</span>(<span class="hljs-number">100.0</span>).<span class="hljs-built_in">to</span>(<span class="hljs-number">200.0</span>)  <span class="hljs-comment">// 100-200å…ƒï¼ˆé«˜ä»·ï¼‰</span>
                                            )
                                    )
                                    <span class="hljs-comment">// ç¬¬ä¸‰çº§èšåˆ1ï¼šæ¯ä¸ªä»·æ ¼åŒºé—´çš„å¹³å‡è¯„åˆ†ï¼ˆavgï¼‰</span>
                                    .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"avg_rating"</span>, a3 -&gt; a3
                                            .<span class="hljs-built_in">avg</span>(avg -&gt; avg.<span class="hljs-built_in">field</span>(<span class="hljs-string">"rating"</span>)) <span class="hljs-comment">// å‡è®¾å­˜åœ¨ratingï¼ˆå•†å“è¯„åˆ†ï¼‰å­—æ®µ</span>
                                    )
                                    <span class="hljs-comment">// ç¬¬ä¸‰çº§èšåˆ2ï¼šæ¯ä¸ªä»·æ ¼åŒºé—´çš„é”€å”®æ€»é‡ï¼ˆsumï¼‰</span>
                                    .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"total_sales"</span>, a3 -&gt; a3
                                            .<span class="hljs-built_in">sum</span>(sum -&gt; sum.<span class="hljs-built_in">field</span>(<span class="hljs-string">"sales"</span>)) <span class="hljs-comment">// å‡è®¾å­˜åœ¨salesï¼ˆå•†å“é”€é‡ï¼‰å­—æ®µ</span>
                                    )
                            )
                            <span class="hljs-comment">// ç¬¬äºŒçº§èšåˆ2ï¼šæ¯ä¸ªç±»åˆ«ä¸‹çš„çƒ­é—¨å•†å“ï¼ˆtopHitsï¼‰ï¼Œå–é”€é‡å‰3</span>
                            .<span class="hljs-built_in">aggregations</span>(<span class="hljs-string">"top_products"</span>, a2 -&gt; a2
                                    .<span class="hljs-built_in">topHits</span>(th -&gt; th
                                            .<span class="hljs-built_in">size</span>(<span class="hljs-number">3</span>) <span class="hljs-comment">// æ¯ä¸ªç±»åˆ«æ˜¾ç¤ºå‰3ä¸ªçƒ­é—¨å•†å“</span>
                                            .<span class="hljs-built_in">sort</span>(so -&gt; so
                                                    .<span class="hljs-built_in">field</span>(f -&gt; f
                                                            .<span class="hljs-built_in">field</span>(<span class="hljs-string">"sales"</span>) <span class="hljs-comment">// æŒ‰é”€é‡é™åºæ’åºï¼Œç­›é€‰çƒ­é—¨</span>
                                                            .<span class="hljs-built_in">order</span>(SortOrder.Desc)
                                                    )
                                            )
                                    )
                            )
                    )
            );

            <span class="hljs-comment">// 3. æ‰§è¡ŒæŸ¥è¯¢ï¼Œè·å–å“åº”ç»“æœ</span>
            <span class="hljs-selector-tag">SearchResponse</span>&lt;<span class="hljs-selector-tag">Product</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">client</span><span class="hljs-selector-class">.search</span>(request, Product.class);

            <span class="hljs-comment">// 4. è§£æå¤šçº§åµŒå¥—èšåˆç»“æœï¼ˆä¿®å¤åŸå§‹bugï¼Œå®Œå–„è·¯å¾„è·å–å’Œéç©ºæ ¡éªŒï¼‰</span>
            <span class="hljs-selector-tag">if</span> (response.<span class="hljs-built_in">aggregations</span>() != null) {
                <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Aggregate</span>&gt; <span class="hljs-selector-tag">rootAggregations</span> = <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.aggregations</span>();

                <span class="hljs-comment">// 4.1 è·å–ç¬¬ä¸€çº§èšåˆï¼šæŒ‰å•†å“ç±»åˆ«åˆ†ç»„ï¼ˆtermsèšåˆï¼‰ï¼Œéç©ºæ ¡éªŒé¿å…ç©ºæŒ‡é’ˆ</span>
                <span class="hljs-selector-tag">if</span> (rootAggregations.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"category_analysis"</span>)) {
                    <span class="hljs-selector-tag">StringTermsAggregate</span> <span class="hljs-selector-tag">categoryAgg</span> = <span class="hljs-selector-tag">rootAggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"category_analysis"</span>)<span class="hljs-selector-class">.sterms</span>();

                    <span class="hljs-comment">// 4.2 éå†æ¯ä¸ªç±»åˆ«æ¡¶ï¼ˆç¬¬ä¸€çº§èšåˆç»“æœï¼‰</span>
                    <span class="hljs-selector-tag">for</span> (StringTermsBucket <span class="hljs-attribute">categoryBucket </span>: categoryAgg.<span class="hljs-built_in">buckets</span>().<span class="hljs-built_in">array</span>()) {
                        <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">category</span> = <span class="hljs-selector-tag">categoryBucket</span><span class="hljs-selector-class">.key</span>(); <span class="hljs-comment">// å•†å“ç±»åˆ«åç§°</span>
                        <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">categoryDocCount</span> = <span class="hljs-selector-tag">categoryBucket</span><span class="hljs-selector-class">.docCount</span>(); <span class="hljs-comment">// è¯¥ç±»åˆ«çš„å•†å“æ€»æ•°</span>
                        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"=== å•†å“ç±»åˆ«ï¼š"</span> + category + <span class="hljs-string">"ï¼ˆå•†å“æ€»æ•°ï¼š"</span> + categoryDocCount + <span class="hljs-string">"ï¼‰==="</span>);

                        <span class="hljs-comment">// 4.3 è·å–ç¬¬äºŒçº§èšåˆï¼šè¯¥ç±»åˆ«ä¸‹çš„ä»·æ ¼åŒºé—´åˆ†ç»„ï¼ˆrangeèšåˆï¼‰</span>
                        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Aggregate</span>&gt; <span class="hljs-selector-tag">categoryAggregations</span> = <span class="hljs-selector-tag">categoryBucket</span><span class="hljs-selector-class">.aggregations</span>();
                        <span class="hljs-selector-tag">if</span> (categoryAggregations.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"price_ranges"</span>)) {
                            <span class="hljs-selector-tag">RangeAggregate</span> <span class="hljs-selector-tag">priceRangeAgg</span> = <span class="hljs-selector-tag">categoryAggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"price_ranges"</span>)<span class="hljs-selector-class">.range</span>();

                            <span class="hljs-comment">// 4.4 éå†æ¯ä¸ªä»·æ ¼åŒºé—´æ¡¶ï¼ˆç¬¬äºŒçº§èšåˆç»“æœï¼‰</span>
                            <span class="hljs-selector-tag">for</span> (RangeBucket <span class="hljs-attribute">priceBucket </span>: priceRangeAgg.<span class="hljs-built_in">buckets</span>().<span class="hljs-built_in">array</span>()) {
                                <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">priceRange</span> = <span class="hljs-selector-tag">priceBucket</span><span class="hljs-selector-class">.key</span>(); <span class="hljs-comment">// ä»·æ ¼åŒºé—´æ ‡è¯†ï¼ˆlow/medium/highï¼‰</span>
                                <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">priceDocCount</span> = <span class="hljs-selector-tag">priceBucket</span><span class="hljs-selector-class">.docCount</span>(); <span class="hljs-comment">// è¯¥ä»·æ ¼åŒºé—´çš„å•†å“æ•°é‡</span>
                                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"  ä»·æ ¼åŒºé—´ï¼š"</span> + priceRange + <span class="hljs-string">"ï¼ˆå•†å“æ•°é‡ï¼š"</span> + priceDocCount + <span class="hljs-string">"ï¼‰"</span>);

                                <span class="hljs-comment">// 4.5 è·å–ç¬¬ä¸‰çº§èšåˆ1ï¼šè¯¥ä»·æ ¼åŒºé—´çš„å¹³å‡è¯„åˆ†ï¼ˆavgèšåˆï¼‰</span>
                                <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Aggregate</span>&gt; <span class="hljs-selector-tag">priceAggregations</span> = <span class="hljs-selector-tag">priceBucket</span><span class="hljs-selector-class">.aggregations</span>();
                                <span class="hljs-selector-tag">if</span> (priceAggregations.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"avg_rating"</span>)) {
                                    <span class="hljs-selector-tag">Aggregate</span> <span class="hljs-selector-tag">avgRatingAgg</span> = <span class="hljs-selector-tag">priceAggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"avg_rating"</span>);
                                    <span class="hljs-selector-tag">if</span> (avgRatingAgg != null &amp;&amp; avgRatingAgg.<span class="hljs-built_in">isAvg</span>()) {
                                        <span class="hljs-selector-tag">AvgAggregate</span> <span class="hljs-selector-tag">avgRating</span> = <span class="hljs-selector-tag">avgRatingAgg</span><span class="hljs-selector-class">.avg</span>();
                                        <span class="hljs-comment">// å®‰å…¨æ ¡éªŒï¼Œé¿å…nullå€¼å¼‚å¸¸ï¼Œä¿ç•™2ä½å°æ•°ï¼Œæå‡å¯è¯»æ€§</span>
                                        <span class="hljs-selector-tag">double</span> <span class="hljs-selector-tag">avg</span> = <span class="hljs-selector-tag">avgRating</span><span class="hljs-selector-class">.value</span>() != <span class="hljs-selector-tag">null</span> ? <span class="hljs-selector-tag">avgRating</span><span class="hljs-selector-class">.value</span>() : <span class="hljs-number">0.0</span>;
                                        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"    å¹³å‡è¯„åˆ†ï¼š"</span> + String.<span class="hljs-built_in">format</span>(<span class="hljs-string">"%.2f"</span>, avg));
                                    }
                                }

                                <span class="hljs-comment">// 4.6 è·å–ç¬¬ä¸‰çº§èšåˆ2ï¼šè¯¥ä»·æ ¼åŒºé—´çš„é”€å”®æ€»é‡ï¼ˆsumèšåˆï¼‰</span>
                                <span class="hljs-selector-tag">if</span> (priceAggregations.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"total_sales"</span>)) {
                                    <span class="hljs-selector-tag">Aggregate</span> <span class="hljs-selector-tag">totalSalesAgg</span> = <span class="hljs-selector-tag">priceAggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"total_sales"</span>);
                                    <span class="hljs-selector-tag">if</span> (totalSalesAgg != null &amp;&amp; totalSalesAgg.<span class="hljs-built_in">isSum</span>()) {
                                        <span class="hljs-comment">// è§£æsumèšåˆç»“æœï¼Œå…¼å®¹æ•°å€¼ç±»å‹</span>
                                        <span class="hljs-selector-tag">JsonData</span> <span class="hljs-selector-tag">salesData</span> = <span class="hljs-selector-tag">totalSalesAgg</span><span class="hljs-selector-class">.sum</span>()<span class="hljs-selector-class">.value</span>();
                                        <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">totalSales</span> = <span class="hljs-selector-tag">salesData</span> != <span class="hljs-selector-tag">null</span> ? <span class="hljs-selector-tag">salesData</span><span class="hljs-selector-class">.toLong</span>() : <span class="hljs-number">0</span>;
                                        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"    é”€å”®æ€»é‡ï¼š"</span> + totalSales);
                                    }
                                }
                            }
                        }

                        <span class="hljs-comment">// 4.7 è·å–ç¬¬äºŒçº§èšåˆ2ï¼šè¯¥ç±»åˆ«ä¸‹çš„çƒ­é—¨å•†å“ï¼ˆtopHitsèšåˆï¼‰</span>
                        <span class="hljs-selector-tag">if</span> (categoryAggregations.<span class="hljs-built_in">containsKey</span>(<span class="hljs-string">"top_products"</span>)) {
                            <span class="hljs-selector-tag">Aggregate</span> <span class="hljs-selector-tag">topProductsAgg</span> = <span class="hljs-selector-tag">categoryAggregations</span><span class="hljs-selector-class">.get</span>(<span class="hljs-string">"top_products"</span>);
                            <span class="hljs-selector-tag">if</span> (topProductsAgg != null &amp;&amp; topProductsAgg.<span class="hljs-built_in">isTopHits</span>()) {
                                <span class="hljs-selector-tag">TopHitsAggregate</span> <span class="hljs-selector-tag">topHits</span> = <span class="hljs-selector-tag">topProductsAgg</span><span class="hljs-selector-class">.topHits</span>();
                                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"  è¯¥ç±»åˆ«çƒ­é—¨å•†å“ï¼ˆé”€é‡å‰3ï¼‰ï¼š"</span>);
                                <span class="hljs-comment">// éå†çƒ­é—¨å•†å“ï¼Œååºåˆ—åŒ–ä¸ºProductå®ä½“</span>
                                <span class="hljs-selector-tag">for</span> (SearchHit&lt;Product&gt; <span class="hljs-attribute">hit </span>: topHits.<span class="hljs-built_in">hits</span>().<span class="hljs-built_in">hits</span>()) {
                                    <span class="hljs-selector-tag">Product</span> <span class="hljs-selector-tag">product</span> = <span class="hljs-selector-tag">hit</span><span class="hljs-selector-class">.source</span>();
                                    <span class="hljs-selector-tag">if</span> (product != null) {
                                        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"    - å•†å“ï¼š"</span> + product.<span class="hljs-built_in">getName</span>() + <span class="hljs-string">"ï¼Œä»·æ ¼ï¼š"</span> + product.<span class="hljs-built_in">getPrice</span>() + <span class="hljs-string">"ï¼Œé”€é‡ï¼š"</span> + hit.<span class="hljs-built_in">fields</span>().<span class="hljs-built_in">get</span>(<span class="hljs-string">"sales"</span>).<span class="hljs-built_in">value</span>());
                                    }
                                }
                            }
                        }
                        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(); <span class="hljs-comment">// æ¢è¡Œï¼ŒåŒºåˆ†ä¸åŒç±»åˆ«ï¼Œæå‡å¯è¯»æ€§</span>
                    }
                } <span class="hljs-selector-tag">else</span> {
                    <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"æœªæŸ¥è¯¢åˆ°å•†å“ç±»åˆ«èšåˆæ•°æ®ï¼Œè¯·æ£€æŸ¥categoryå­—æ®µæ˜¯å¦å­˜åœ¨ä¸”ä¸ºkeywordç±»å‹"</span>);
                }
            } <span class="hljs-selector-tag">else</span> {
                <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"æœªæŸ¥è¯¢åˆ°ä»»ä½•èšåˆç»“æœï¼Œè¯·æ£€æŸ¥ç´¢å¼•æ•°æ®æˆ–æŸ¥è¯¢æ¡ä»¶"</span>);
            }

        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">e</span><span class="hljs-selector-class">.printStackTrace</span>();
            <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"å¤šçº§åµŒå¥—èšåˆæŸ¥è¯¢å¤±è´¥ï¼š"</span> + e.<span class="hljs-built_in">getMessage</span>());
        } <span class="hljs-selector-tag">finally</span> {
            <span class="hljs-comment">// é¡¹ç›®åœæ­¢æ—¶å…³é—­å®¢æˆ·ç«¯ï¼ˆå®é™…å¼€å‘ä¸­å¯åœ¨Springé”€æ¯æ–¹æ³•ã€Tomcatå…³é—­é’©å­ä¸­è°ƒç”¨ï¼‰</span>
            <span class="hljs-comment">// EsClientUtil.closeClient();</span>
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¡¬ç¢°ç¡¬ï¼Claude Opus 4.6ä¸GPT-5.3-CodexåŒæ—¶å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7603308967125204992</link>    <guid>https://juejin.cn/post/7603308967125204992</guid>    <pubDate>2026-02-06T06:34:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603308967125204992" data-draft-id="7603308967125188608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¡¬ç¢°ç¡¬ï¼Claude Opus 4.6ä¸GPT-5.3-CodexåŒæ—¶å‘å¸ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2026-02-06T06:34:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¡¬ç¢°ç¡¬ï¼Claude Opus 4.6ä¸GPT-5.3-CodexåŒæ—¶å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:34:34.000Z" title="Fri Feb 06 2026 06:34:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ˜¥èŠ‚æ¥ä¸´ä¹‹å‰ï¼Œæµ·å¤–å¤§æ¨¡å‹å…ˆæ¥äº†ä¸€æ³¢ç¡¬ç¢°ç¡¬çš„å‘å¸ƒã€‚</p>
<p>åŒ—äº¬æ—¶é—´ 2 æœˆ 6 æ—¥å‡Œæ™¨ï¼ŒAnthropic ä¸ OpenAI ç›¸ç»§æ¨å‡ºäº†æ–°ç‰ˆæœ¬åŸºç¡€å¤§æ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯ Claude Opus 4.6 ä¸ GPT-5.3-Codexã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67495078d79d44b8ae8494fcfb9b99d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=DYKfkEeGPoJTymGqg3biWNWXF3I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a9be215f214624a87e3eb808f1bc17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=Yrpk7kIZsIdgMp92L0cGbWhaT3I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ˜¨å¤©ä¸¤å®¶è¿˜åœ¨å› ä¸º AI é‡Œé¢çš„å¹¿å‘Šè€Œè®ºæˆ˜ï¼Œä»Šå¤©åœ¨å¤§æ¨¡å‹å‘å¸ƒä¸Šåˆæ’è½¦äº†ã€‚è¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹ä»–ä»¬çš„æ¨¡å‹èƒ½åŠ›å¦‚ä½•ã€‚</p>
<p>Claude Opus 4.6</p>
<p>Claude Opus 4.6 æ˜¯ Anthropic å¯¹å…¶æ——èˆ°äººå·¥æ™ºèƒ½æ¨¡å‹çš„ä¸€æ¬¡é‡å¤§å‡çº§ã€‚åœ¨è¿™ä»£æ¨¡å‹ä¸Šï¼Œè§„åˆ’æ›´åŠ è°¨æ…ï¼Œèƒ½å¤Ÿç»´æŒæ›´é•¿æ—¶é—´çš„è‡ªä¸»å·¥ä½œæµç¨‹ï¼Œå¹¶åœ¨å…³é”®çš„ä¼ä¸šåŸºå‡†æµ‹è¯•ä¸­è¶…è¶Šäº†åŒ…æ‹¬ GPT-5.2 åœ¨å†…çš„ç«äº‰å¯¹æ‰‹ã€‚</p>
<p>æ–°æ¨¡å‹é¦–æ¬¡æ‹¥æœ‰ 100 ä¸‡ token çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œä½¿ AI èƒ½å¤Ÿå¤„ç†å’Œæ¨ç†æ¯”ä»¥å¾€ç‰ˆæœ¬å¤šå¾—å¤šçš„ä¿¡æ¯ã€‚Anthropic è¿˜åœ¨ Claude Code ä¸­å¼•å…¥äº†ç±»ä¼¼äº Kimi K2.5 çš„ã€Œæ™ºèƒ½ä½“å›¢é˜Ÿã€åŠŸèƒ½Â â€”â€” ä¸€é¡¹ç ”ç©¶é¢„è§ˆåŠŸèƒ½ï¼Œå®ƒå…è®¸å¤šä¸ª AI æ™ºèƒ½ä½“åŒæ—¶å¤„ç†ç¼–ç é¡¹ç›®çš„ä¸åŒæ–¹é¢ï¼Œå¹¶è¿›è¡Œè‡ªä¸»åè°ƒã€‚</p>
<p>Anthropic å¼ºè°ƒï¼ŒOpus 4.6 å¯å°†å…¶å¢å¼ºçš„åŠŸèƒ½åº”ç”¨äºä¸€ç³»åˆ—æ—¥å¸¸å·¥ä½œä»»åŠ¡ï¼ŒåŒ…æ‹¬è¿è¡Œè´¢åŠ¡åˆ†æã€è¿›è¡Œç ”ç©¶ä»¥åŠä½¿ç”¨å’Œåˆ›å»ºæ–‡æ¡£ã€ç”µå­è¡¨æ ¼å’Œæ¼”ç¤ºæ–‡ç¨¿ã€‚ç°åœ¨åœ¨ Cowork ç¯å¢ƒä¸­ï¼ŒClaude å¯ä»¥è‡ªä¸»åœ°æ‰§è¡Œå¤šä»»åŠ¡ï¼ŒOpus 4.6 å¯ä»¥ä»£è¡¨äººç±»è¿ç”¨æ‰€æœ‰è¿™äº›æŠ€èƒ½ã€‚</p>
<p>Opus 4.6 åœ¨å¤šé¡¹è¯„ä¼°ä¸­å‡è¡¨ç°å‡ºè‰²ã€‚ä¾‹å¦‚ï¼Œå®ƒåœ¨æ™ºèƒ½ä½“ç¼–ç è¯„ä¼°å·¥å…· Terminal-Bench 2.0 ä¸­å–å¾—äº†æœ€é«˜åˆ†ï¼Œå¹¶åœ¨ã€Œäººç±»æœ€åçš„è€ƒè¯•ã€ï¼ˆä¸€é¡¹å¤æ‚çš„å¤šå­¦ç§‘æ¨ç†æµ‹è¯•ï¼‰ä¸­é¢†å…ˆäºæ‰€æœ‰å…¶ä»–å‰æ²¿æ¨¡å‹ã€‚åœ¨ GDPval-AAï¼ˆä¸€é¡¹è¯„ä¼°æ¨¡å‹åœ¨é‡‘èã€æ³•å¾‹å’Œå…¶ä»–é¢†åŸŸä¸­å…·æœ‰ç»æµä»·å€¼çš„çŸ¥è¯†å·¥ä½œä»»åŠ¡ä¸Šçš„è¡¨ç°çš„æµ‹è¯•ï¼‰ä¸­ï¼Œ Opus 4.6 çš„è¡¨ç°æ¯”ä¸šç•Œæ¬¡ä¼˜æ¨¡å‹ï¼ˆOpenAI çš„ GPT-5.2ï¼‰é«˜å‡ºçº¦ 144 ä¸ª Elo åˆ†æ•°ï¼Œæ¯”å…¶å‰èº«ï¼ˆClaude Opus 4.5ï¼‰é«˜å‡º 190 åˆ†ã€‚æ­¤å¤–ï¼ŒOpus 4.6 åœ¨ BrowseComp æµ‹è¯•ä¸­ä¹Ÿä¼˜äºå…¶ä»–æ‰€æœ‰æ¨¡å‹ï¼Œè¯¥æµ‹è¯•ç”¨äºè¡¡é‡æ¨¡å‹åœ¨çº¿æŸ¥æ‰¾éš¾å¯»ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a5e25d3eb074c109f4d0f328044f42c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=J5pX6ckpk6QROCUDtIMwSlVonZc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Opus 4.6 ç°å·²åœ¨ claude.aiã€API ä»¥åŠæ‰€æœ‰ä¸»æµäº‘å¹³å°ä¸Šçº¿ï¼Œå®šä»·ä¿æŒä¸å˜ï¼Œæ¯ç™¾ä¸‡ token 5 ç¾å…ƒ / 25 ç¾å…ƒã€‚</p>
<p>ç›®å‰å¤§æ¨¡å‹çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ã€Œä¸Šä¸‹æ–‡è…çƒ‚ã€ï¼Œå³å½“å¯¹è¯ token æ•°é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œæ¨¡å‹æ€§èƒ½ä¼šä¸‹é™ã€‚Opus 4.6 çš„æ€§èƒ½æ˜¾è‘—ä¼˜äºå…¶å‰ä»£äº§å“ï¼šåœ¨ MRCR v2 çš„ 8 é’ˆ 1M å˜ä½“æµ‹è¯•ä¸­ï¼ˆè¯¥æµ‹è¯•å¦‚åŒå¤§æµ·æé’ˆï¼‰ï¼ŒOpus 4.6 çš„å¾—åˆ†ä¸º 76%ï¼Œè€Œ Sonnet 4.5 çš„å¾—åˆ†ä»…ä¸º 18.5%ã€‚è¿™æ ‡å¿—ç€æ¨¡å‹åœ¨ä¿æŒæœ€ä½³æ€§èƒ½çš„åŒæ—¶ï¼Œèƒ½å¤Ÿåˆ©ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯é‡å‘ç”Ÿäº†è´¨çš„é£è·ƒã€‚</p>
<p>ä¸ºäº†è¯æ˜ Opus 4.6 çš„å¼ºå¤§æ™ºèƒ½ä½“èƒ½åŠ›ï¼ŒAnthropic çš„ä¸€åç ”ç©¶å‘˜ä½¿ç”¨ 16 ä¸ªæ™ºèƒ½ä½“ä»é›¶å¼€å§‹æ„å»ºäº†ä¸€ä¸ªåŸºäº Rust çš„ C è¯­è¨€ç¼–è¯‘å™¨ï¼Œè®¾å®šä»»åŠ¡åå°±åŸºæœ¬æ”¾æ‰‹ä¸ç®¡äº†ã€‚æœ€å AI è¾“å‡ºçš„ä»£ç é•¿è¾¾ 10 ä¸‡è¡Œï¼Œå¯ä»¥ç¼–è¯‘ Linux å†…æ ¸ï¼Œè€—èµ„ 2 ä¸‡ç¾å…ƒï¼Œè¶…è¿‡ 2000 æ¬¡ Claude Code ä¼šè¯ï¼Œå†æ—¶ä¸¤å‘¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9864581632034172806fb0378f11dd4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=bSD%2B%2BiU2I73CqK%2FlNyycC%2FE%2BLtA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥ç¼–è¯‘å™¨å¯ä»¥åœ¨ x86ã€ARM å’Œ RISC-V ä¸Šæ„å»ºå¯å¯åŠ¨çš„ Linux 6.9ï¼Œå®ƒé€šè¿‡äº† GCC 99% çš„å‹åŠ›æµ‹è¯•ï¼Œå¯ä»¥ç¼–è¯‘ FFmpegã€Redisã€PostgreSQLã€QEMUï¼Œè¿˜é€šè¿‡äº†å¼€å‘è€…çš„ç»ˆæè€ƒéªŒï¼šç¼–è¯‘å¹¶è¿è¡Œäº† Doom æ¸¸æˆã€‚</p>
<p>è¯¥ç¼–è¯‘å™¨çš„ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaudes-c-compiler" target="_blank" title="https://github.com/anthropics/claudes-c-compiler" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></p>
<p>è™½ç„¶æ²¡æœ‰äººç±»å‚ä¸ç¼–å†™ä»£ç ï¼Œä½†ç ”ç©¶äººå‘˜ä¸æ–­é‡æ–°è®¾è®¡æµ‹è¯•ï¼Œåœ¨æ™ºèƒ½ä½“ç¨‹åºäº’ç›¸å¹²æ‰°æ—¶æ„å»º CI ç®¡é“ï¼Œå¹¶åœ¨æ‰€æœ‰ 16 ä¸ªæ™ºèƒ½ä½“ç¨‹åºéƒ½å¡åœ¨åŒä¸€ä¸ª bug æ—¶åˆ›å»ºå˜é€šæ–¹æ³•ã€‚</p>
<p>çœ‹èµ·æ¥ï¼Œåœ¨æœªæ¥åŠ å…¥ AI çš„å·¥ä½œæµç¨‹ä¸­ï¼Œäººçš„è§’è‰²å·²ç»ä»ç¼–å†™ä»£ç è½¬å˜ä¸ºæ„å»ºè®© AI èƒ½å¤Ÿç¼–å†™ä»£ç çš„ç¯å¢ƒã€‚</p>
<p>GPT-5.3-Codex</p>
<p>åœ¨ OpenAI è¿™è¾¹ï¼Œæ–°ä¸€ä»£æ¨¡å‹ GPT-5.3-Codex çš„å‘å¸ƒç´§éšå…¶åã€‚å¥¥ç‰¹æ›¼ç§°å…¶æ‹¥æœ‰ç›®å‰æœ€ä½³çš„ç¼–ç æ€§èƒ½ï¼Œè¿›ä¸€æ­¥é‡Šæ”¾äº† Codex çš„æ½œèƒ½ã€‚</p>
<p>GPT-5.3-Codex åœ¨å¤šé¡¹åŸºå‡†ä¸Šåˆ·æ–°çºªå½•ï¼šåœ¨ SWE-Bench Pro ä¸Šè¾¾åˆ° 56.8%ï¼Œåœ¨ Terminal-Bench 2.0 ä¸Šè¾¾åˆ° 77.3%ï¼ŒåŒæ—¶ç›¸æ¯”æ­¤å‰ç‰ˆæœ¬è¿è¡Œæ›´å¿«ã€æ¶ˆè€—çš„ token æ›´å°‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/319461355643478c92fed8479a4a27f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=B7R2zt5Q3ljEkssNnpJ%2B3yQqMaQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33d86f3e893c4a5a93edbb33b388ec17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=w0KnXpsYBm9rKYXF16eQeaZPoJc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3179e4d80f9549d18fb41434d2b9632e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=MKJAEuG%2FQ3XxLB3j8YBYJcw5kOI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>OpenAI è¡¨ç¤ºï¼Œè¯¥æ¨¡å‹èåˆäº† GPT-5.2-Codex çš„å‰æ²¿ç¼–ç æ€§èƒ½å’Œ GPT-5.2 çš„æ¨ç†åŠä¸“ä¸šçŸ¥è¯†èƒ½åŠ›ï¼Œé€Ÿåº¦æå‡äº† 25%ã€‚è¿™ä½¿å…¶èƒ½å¤Ÿèƒœä»»éœ€è¦ç ”ç©¶ã€å·¥å…·ä½¿ç”¨å’Œå¤æ‚æ‰§è¡Œçš„é•¿æ—¶é—´ä»»åŠ¡ã€‚</p>
<p>å®ƒå°±åƒä¸€ä½çœŸæ­£çš„åŒäº‹ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨ GPT-5.3-Codex å·¥ä½œæ—¶å¯¹å…¶è¿›è¡ŒæŒ‡å¯¼å’Œäº¤äº’ï¼Œè€Œä¸ä¼šä¸¢å¤±ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚å€ŸåŠ© GPT-5.3-Codexï¼ŒCodex ä»ä¸€ä¸ªèƒ½å¤Ÿç¼–å†™å’Œå®¡æŸ¥ä»£ç çš„ä»£ç†ï¼Œå˜æˆäº†ä¸€ä¸ªå‡ ä¹å¯ä»¥æ‰§è¡Œå¼€å‘äººå‘˜å’Œä¸“ä¸šäººå£«åœ¨è®¡ç®—æœºä¸Šçš„ä»»ä½•æ“ä½œçš„ä»£ç†ã€‚</p>
<p>é™¤äº†æ›´åŠ å¼ºå¤§çš„ç¼–ç èƒ½åŠ›å¤–ï¼ŒGPT-5.2-Codex åœ¨ OpenAI é•¿æœŸå…³æ³¨çš„ç¾å­¦æ–¹é¢åˆä¸€æ¬¡æœ‰äº†é•¿è¶³çš„è¿›æ­¥ã€‚</p>
<p>åœ¨è¿™æ¬¡å‘å¸ƒä¸­ï¼ŒOpenAI è®© GPT-5.3-Codex æ„å»ºäº†ä¸¤æ¬¾æ¸¸æˆï¼šä¸€æ¬¾æ˜¯ Codex åº”ç”¨å‘å¸ƒæ—¶æ¨å‡ºçš„èµ›è½¦æ¸¸æˆçš„ç¬¬äºŒç‰ˆï¼Œå¦ä¸€æ¬¾æ˜¯æ½œæ°´æ¸¸æˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2fdd3c798d340018c49435059aa01e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=qiJVuUx9drR3vswUmlSN4j8jduk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117b4ef90eca47d194bf1a5726d84d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=jFfrRuAGoXPvpveYo07pXh%2B892g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>OpenAI è¡¨ç¤ºï¼ŒGPT-5.3-Codex åˆ©ç”¨å…¶ç½‘é¡µæ¸¸æˆå¼€å‘æŠ€èƒ½ä»¥åŠé¢„å…ˆè®¾å®šçš„é€šç”¨åç»­æç¤ºï¼ˆä¾‹å¦‚ã€Œä¿®å¤é”™è¯¯ã€æˆ–ã€Œæ”¹è¿›æ¸¸æˆã€ï¼‰ï¼Œè‡ªä¸»åœ°è¿­ä»£å¼€å‘äº†æ•°ç™¾ä¸‡ä¸ª tokenã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒçš„ GPT-5.3-Codex ï¼ŒOpenAI å¯¹å…¶çš„æœŸæœ›è¿œä¸æ­¢æ­¥äºä¸€ä¸ªæ™ºèƒ½ç¼–ç æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿã€ŒBeyond codingã€ï¼Œå®ç°å·¥ä½œåŠ©ç†çš„æ™ºèƒ½ä½“ã€‚</p>
<p>GPT-5.3-Codex èƒ½å¤Ÿæ”¯æŒè½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„æ‰€æœ‰å·¥ä½œ â€”â€” è°ƒè¯•ã€éƒ¨ç½²ã€ç›‘æ§ã€ç¼–å†™äº§å“éœ€æ±‚æ–‡æ¡£ã€ç¼–è¾‘æ–‡æ¡ˆã€ç”¨æˆ·ç ”ç©¶ã€æµ‹è¯•ã€æŒ‡æ ‡åˆ†æç­‰ç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c44cada1a7554d46b9d72a477b9e8a2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=xF3nIlIqfTI2L%2FMhMcrp5YUKir8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>GPT-5.3-Codex è¾“å‡ºå‡€å€¼åˆ†æè¡¨æ ¼ç¤ºä¾‹</p>
<p>OpenAI è®¤ä¸ºï¼Œéšç€æ¨¡å‹èƒ½åŠ›çš„ä¸æ–­å¢å¼ºï¼Œå·®è·ä¸å†ä»…ä»…åœ¨äºæ™ºèƒ½ä½“èƒ½å¤Ÿåšä»€ä¹ˆï¼Œè€Œæ˜¯åœ¨äºäººç±»å¦‚ä½•è½»æ¾åœ°ä¸å¤šä¸ªå¹¶è¡Œå·¥ä½œçš„æ™ºèƒ½ä½“è¿›è¡Œäº¤äº’ã€æŒ‡å¯¼å’Œç›‘ç£ã€‚é‰´äºæ­¤ï¼ŒCodex åº”ç”¨å¯ä»¥è®©ç®¡ç†å’ŒæŒ‡å¯¼æ™ºèƒ½ä½“å˜å¾—æ›´åŠ ä¾¿æ·ï¼Œè€Œ GPT-5.3-Codex çš„åŠ å…¥æ›´ä½¿å…¶äº¤äº’æ€§æ›´å¼ºã€‚</p>
<p>å€ŸåŠ©æ–°æ¨¡å‹ï¼ŒCodex ä¼šé¢‘ç¹æ›´æ–°ï¼Œè®©ä½ éšæ—¶äº†è§£å…³é”®å†³ç­–å’Œè¿›å±•ã€‚äººä»¬æ— éœ€ç­‰å¾…æœ€ç»ˆè¾“å‡ºï¼Œå³å¯å®æ—¶äº’åŠ¨ â€”â€” æå‡ºé—®é¢˜ã€è®¨è®ºæ–¹æ³•ï¼Œå¹¶å…±åŒæ¢ç´¢è§£å†³æ–¹æ¡ˆã€‚GPT-5.3-Codex ä¼šè¯­éŸ³æ’­æŠ¥å…¶è¿è¡Œè¿‡ç¨‹ï¼Œå“åº”åé¦ˆï¼Œå¹¶è®©ä½ ä»å§‹è‡³ç»ˆæŒæ¡æ•´ä¸ªæµç¨‹ã€‚</p>
<p>æœ€åï¼ŒOpenAI è¡¨ç¤ºï¼ŒGPT-5.3-Codex çš„è®­ç»ƒå’Œéƒ¨ç½²ä½¿ç”¨äº† Codexï¼ŒOpenAI çš„è®¸å¤šç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆéƒ½è¡¨ç¤ºï¼Œä»–ä»¬ç°åœ¨çš„å·¥ä½œä¸ä¸¤ä¸ªæœˆå‰ç›¸æ¯”å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç ”ç©¶å›¢é˜Ÿä½¿ç”¨ Codex æ¥ç›‘æ§å’Œè°ƒè¯•æœ¬æ¬¡ç‰ˆæœ¬çš„è®­ç»ƒè¿è¡Œã€‚å®ƒä¸ä»…åŠ é€Ÿäº†åŸºç¡€è®¾æ–½é—®é¢˜çš„è°ƒè¯•ï¼Œè¿˜å¸®åŠ©è¿½è¸ªæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¨¡å¼ï¼Œå¯¹äº¤äº’è´¨é‡è¿›è¡Œæ·±å…¥åˆ†æï¼Œæå‡ºä¿®å¤æ–¹æ¡ˆï¼Œå¹¶æ„å»ºäº†ä¸°å¯Œçš„åº”ç”¨ç¨‹åºï¼Œä½¿ç ”ç©¶äººå‘˜èƒ½å¤Ÿç²¾ç¡®åœ°äº†è§£æ¨¡å‹è¡Œä¸ºä¸å…ˆå‰æ¨¡å‹ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p>å·¥ç¨‹å›¢é˜Ÿä½¿ç”¨ Codex å¯¹ GPT-5.3-Codex æ¡†æ¶è¿›è¡Œäº†ä¼˜åŒ–å’Œé€‚é…ã€‚å½“å‡ºç°å½±å“ç”¨æˆ·çš„å¼‚å¸¸æç«¯æƒ…å†µæ—¶ï¼Œå›¢é˜Ÿæˆå‘˜åˆ©ç”¨ Codex è¯†åˆ«ä¸Šä¸‹æ–‡æ¸²æŸ“é”™è¯¯ï¼Œå¹¶æ‰¾å‡ºç¼“å­˜å‘½ä¸­ç‡ä½çš„æ ¹æœ¬åŸå› ã€‚åœ¨æ•´ä¸ªå‘å¸ƒè¿‡ç¨‹ä¸­ï¼ŒGPT-5.3-Codex é€šè¿‡åŠ¨æ€æ‰©å±• GPU é›†ç¾¤æ¥åº”å¯¹æµé‡é«˜å³°å¹¶ä¿æŒå»¶è¿Ÿç¨³å®šï¼ŒæŒç»­ä¸ºå›¢é˜Ÿæä¾›æ”¯æŒã€‚</p>
<p>åœ¨ Alpha æµ‹è¯•æœŸé—´ï¼Œä¸€ä½ç ”ç©¶äººå‘˜æƒ³è¦äº†è§£ GPT-5.3-Codex æ¯å›åˆèƒ½å®Œæˆå¤šå°‘é¢å¤–å·¥ä½œï¼Œä»¥åŠç”±æ­¤å¸¦æ¥çš„ç”Ÿäº§åŠ›æå‡ã€‚GPT-5.3-Codex ç”Ÿæˆäº†å‡ ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼åˆ†ç±»å™¨ï¼Œç”¨äºä¼°ç®—ç”¨æˆ·æ¾„æ¸…è¯·æ±‚çš„é¢‘ç‡ã€æ­£é¢å’Œè´Ÿé¢åé¦ˆä»¥åŠä»»åŠ¡è¿›åº¦ï¼Œç„¶åå°†è¿™äº›åˆ†ç±»å™¨å¯æ‰©å±•åœ°åº”ç”¨äºæ‰€æœ‰ä¼šè¯æ—¥å¿—ï¼Œå¹¶ç”Ÿæˆä¸€ä»½åŒ…å«ç»“è®ºçš„æŠ¥å‘Šã€‚</p>
<p>GPT-5.3-Codex å·²åŒ…å«åœ¨ ChatGPT çš„ä»˜è´¹å¥—é¤ä¸­ï¼Œä½† API è¿˜éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚</p>
<p>OpenAI æŠ¥å‘Šè¯´ï¼Œç”±äºåŸºç¡€è®¾æ–½å’Œæ¨ç†å †æ ˆçš„æ”¹è¿›ï¼ŒCodex ç”¨æˆ·ç°åœ¨è¿è¡Œ GPT-5.3-Codex çš„é€Ÿåº¦ä¹Ÿæé«˜äº† 25%ï¼Œä»è€Œå®ç°äº†æ›´å¿«çš„äº¤äº’å’Œæ›´å¿«çš„ç»“æœã€‚</p>
<p>ç»“è¯­</p>
<p>æµ·å¤–çš„å¤§æ¨¡å‹å·²ç»è½®ç•ªä¸Šé˜µï¼Œåœ¨æ˜¥èŠ‚å‰çš„æœ€åè¿™å‡ å¤©ï¼Œå›½å†…å¤§æ¨¡å‹ä¹Ÿå¿…ç„¶ä¼šå·èµ·æ¥ï¼ŒåŒ…æ‹¬ DeepSeek v4 ä¹Ÿè®¸å³å°†åˆ°æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c0c4f7651384ffab54e25d5ab4eb0b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770964473&amp;x-signature=M2AicEL0qSn9c7%2Bevr0p56GWnY4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ æœŸå¾…ä½äº†å—ï¼Ÿ</p>
<p>å‚è€ƒå†…å®¹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fclaude-opus-4-6" target="_blank" title="https://www.anthropic.com/news/claude-opus-4-6" ref="nofollow noopener noreferrer">www.anthropic.com/news/claudeâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fbuilding-c-compiler" target="_blank" title="https://www.anthropic.com/engineering/building-c-compiler" ref="nofollow noopener noreferrer">www.anthropic.com/engineeringâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-gpt-5-3-codex%2F" target="_blank" title="https://openai.com/index/introducing-gpt-5-3-codex/" ref="nofollow noopener noreferrer">openai.com/index/introâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹†è§£ Cursor Agent Prompt v1.2ï¼šé¡¶çº§ AI å·¥å…·æ˜¯å¦‚ä½•å†™ç³»ç»Ÿæç¤ºè¯çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603261102795587610</link>    <guid>https://juejin.cn/post/7603261102795587610</guid>    <pubDate>2026-02-06T06:37:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603261102795587610" data-draft-id="7603261102795522074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹†è§£ Cursor Agent Prompt v1.2ï¼šé¡¶çº§ AI å·¥å…·æ˜¯å¦‚ä½•å†™ç³»ç»Ÿæç¤ºè¯çš„ï¼Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2026-02-06T06:37:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¼çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2418581314208279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹†è§£ Cursor Agent Prompt v1.2ï¼šé¡¶çº§ AI å·¥å…·æ˜¯å¦‚ä½•å†™ç³»ç»Ÿæç¤ºè¯çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581314208279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¼çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:37:37.000Z" title="Fri Feb 06 2026 06:37:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><blockquote>
<p>å½“ä½ è¿˜åœ¨åå¤è°ƒè¯•ã€Œè¿™å¥è¯çš„Promptåˆ°åº•èƒ½ä¸èƒ½å‡ºæ•ˆæœã€æ—¶ï¼ŒCursorå·²ç»æŠŠPromptå†™æˆäº†å¯å¤ç”¨ã€å¯æ‰©å±•çš„<strong>å·¥ç¨‹ç³»ç»Ÿ</strong>ã€‚</p>
</blockquote>
<p>ç”¨è¿‡Cursorçš„åŒå­¦éƒ½çŸ¥é“ï¼Œå®ƒçš„Agent Promptï¼ˆv1.2ï¼‰ä»ä¸æ˜¯ç®€å•ä¸€å¥â€œä½ æ˜¯ä¸€ä¸ªAIç¼–ç¨‹åŠ©æ‰‹â€ï¼Œè€Œæ˜¯ä¸€å¥—èƒ½çº¦æŸã€å¯ç»´æŠ¤ã€å¯è¿­ä»£çš„å¤§æ¨¡å‹è¡Œä¸ºè§„èŒƒâ€”â€”è¿™æ‰æ˜¯Prompt Engineeringçš„æ ¸å¿ƒç²¾é«“ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸é€å¥ç¿»è¯‘PromptåŸæ–‡ï¼ˆæ²¡æ„ä¹‰ï¼‰ï¼Œåªæ‹†è§£å®ƒèƒŒåå¯ç›´æ¥å¤ç”¨çš„8ä¸ªå·¥ç¨‹åŒ–æŠ€å·§ã€‚ä¸ç®¡ä½ æ˜¯åšAIç¼–ç¨‹åŠ©æ‰‹ã€Agentç³»ç»Ÿï¼Œè¿˜æ˜¯æƒ³æ‘†è„±â€œPrompté æ„Ÿè§‰â€çš„å†…è€—ï¼Œçœ‹å®Œéƒ½èƒ½ç›´æ¥è½åœ°ã€‚</p>
<p>ğŸ‘‰ é€‚åˆäººç¾¤ï¼ˆå¯¹å·å…¥åº§ï¼‰ï¼š</p>
<ul>
<li>åšAIç¼–ç¨‹åŠ©æ‰‹ã€Agentç³»ç»Ÿå¼€å‘çš„å¼€å‘è€…</li>
<li>æ­å»ºè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œéœ€è¦ç²¾å‡†Promptçš„ä»ä¸šè€…</li>
<li>åŒå€¦â€œPromptç„å­¦â€ï¼Œæƒ³æŠŠå®ƒå‡çº§ä¸ºâ€œå¯è½åœ°å·¥ç¨‹â€çš„äºº</li>
<li>åˆšå…¥é—¨Prompt Engineeringï¼Œæƒ³æ‰¾ä¼˜è´¨æ¡ˆä¾‹æ‹†è§£çš„æ–°æ‰‹</li>
</ul>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Promptç¬¬ä¸€åŸåˆ™ï¼šåˆ«åªâ€œè¯´æ¸…æ¥šâ€ï¼Œæ›´è¦â€œå®šè¾¹ç•Œâ€</h2>
<p>Cursor Promptæœ€åå¸¸è¯†çš„ä¸€ç‚¹ï¼šå¼€ç¯‡ä¸æ•™æ¨¡å‹â€œæ€ä¹ˆå›ç­”â€ï¼Œè€Œæ˜¯å…ˆæŠŠ3ä»¶äº‹è¯´æ­»â€”â€”è¿™ä¹Ÿæ˜¯æ™®é€šPromptå’Œå·¥ç¨‹çº§Promptçš„ç¬¬ä¸€ä¸ªå·®è·ã€‚</p>
<p><strong>ä½ æ˜¯è°ã€ä½ èƒ½åšä»€ä¹ˆã€ä½ ä¸èƒ½åšä»€ä¹ˆ</strong>ï¼Œè¿™3ä¸ªè¾¹ç•Œï¼Œç›´æ¥å†³å®šäº†Promptçš„ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-1">âŒ å¸¸è§ä½æ•ˆå†™æ³•ï¼ˆ90%çš„äººéƒ½åœ¨è¸©å‘ï¼‰</h3>
<pre><code class="hljs">ä½ æ˜¯ä¸€ä¸ªèªæ˜çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œè¯·å¸®åŠ©æˆ‘å†™ä»£ç 
</code></pre>
<p>é—®é¢˜åœ¨å“ªï¼Ÿå¤ªæ¨¡ç³Šï¼â€œèªæ˜â€æ²¡æœ‰æ ‡å‡†ï¼Œâ€œå†™ä»£ç â€æ²¡æœ‰è¾¹ç•Œï¼Œæ¨¡å‹å¾ˆå®¹æ˜“è¾“å‡ºæ— å…³å†…å®¹ã€è¿‡åº¦å‘æŒ¥ï¼Œç”šè‡³è·‘åã€‚</p>
<h3 data-id="heading-2">âœ… Cursoré£æ ¼ï¼ˆæŠ“æœ¬è´¨ï¼Œå¯ç›´æ¥å¤ç”¨æ¨¡æ¿ï¼‰</h3>
<pre><code class="hljs">ä½ æ˜¯ä¸€ä¸ªä¸“æ³¨äºä»£ç ç†è§£ã€ä¿®æ”¹å’Œç”Ÿæˆçš„AI Agentï¼Œ
ä»…åœ¨ç”¨æˆ·æ˜ç¡®è¯·æ±‚æ—¶æ‰§è¡Œæ“ä½œï¼Œ
ä¸å¾—æ“…è‡ªæ›´æ”¹æœªè¢«è¯·æ±‚çš„æ–‡ä»¶ï¼Œ
ä¸å¾—è¾“å‡ºä»»ä½•ä¸ä»»åŠ¡æ— å…³çš„è§£é‡Šã€å†—ä½™è¯æœ¯ã€‚
</code></pre>
<p>ğŸ‘‰ æ ¸å¿ƒæŠ€å·§ï¼ˆåˆ’é‡ç‚¹ï¼Œè®°ä¸‹æ¥ï¼‰ï¼š</p>
<p>Promptçš„ä»·å€¼ï¼Œä»æ¥ä¸æ˜¯â€œç»™æ¨¡å‹èµ‹äºˆèƒ½åŠ›â€ï¼Œè€Œæ˜¯â€œæ”¶æ•›æ¨¡å‹çš„è‡ªç”±åº¦â€â€”â€”è¾¹ç•Œè¶Šæ¸…æ™°ï¼Œæ¨¡å‹è¾“å‡ºè¶Šç¨³å®šï¼Œè¶Šä¸éœ€è¦åå¤è°ƒè¯•ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€ç»“æ„åŒ–Promptï¼šæŠŠâ€œä¸€æ®µè¯â€æ”¹æˆâ€œé…ç½®æ–‡ä»¶â€</h2>
<p>Cursor Agent Promptçš„æ ¸å¿ƒäº®ç‚¹ï¼Œå°±æ˜¯<strong>å½»åº•ç»“æ„åŒ–</strong>ã€‚å®ƒæ²¡æœ‰ç”¨å¤§æ®µè‡ªç„¶è¯­è¨€å †ç Œï¼Œè€Œæ˜¯æ‹†æˆäº†å¤šä¸ªèŒè´£å•ä¸€çš„æ¨¡å—ï¼Œåƒå†™é…ç½®æ–‡ä»¶ä¸€æ ·å†™Promptã€‚</p>
<p>æ¯”å¦‚è¿™æ ·æ‹†åˆ†ï¼ˆç®€åŒ–ç‰ˆï¼Œä¿ç•™æ ¸å¿ƒé€»è¾‘ï¼‰ï¼š</p>
<ul>
<li>roleï¼šæ˜ç¡®æ¨¡å‹èº«ä»½ï¼ˆä¸å¯æ¨¡ç³Šï¼‰</li>
<li>rulesï¼šçº¦æŸæ¨¡å‹è¡Œä¸ºï¼ˆä¸å¯è¿åï¼‰</li>
<li>toolï¼šè§„å®šå·¥å…·ä½¿ç”¨ï¼ˆä»€ä¹ˆæ—¶å€™ç”¨ã€æ€ä¹ˆç”¨ï¼‰</li>
<li>outputï¼šçº¦å®šè¾“å‡ºæ ¼å¼ï¼ˆç»Ÿä¸€æ ‡å‡†ï¼Œå¯æ¶ˆè´¹ï¼‰</li>
<li>contextï¼šè¯´æ˜ä¸Šä¸‹æ–‡èŒƒå›´ï¼ˆé¿å…å¤±å¿†ï¼‰</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå› ä¸ºå¤§æ¨¡å‹å¤©ç”Ÿæ“…é•¿éµå®ˆâ€œç»“æ„åŒ–è§„åˆ™â€ï¼Œæ¨¡å—è¶Šæ¸…æ™°ã€èŒè´£è¶Šå•ä¸€ï¼Œæ¨¡å‹è¶Šä¸å®¹æ˜“æ··ä¹±ï¼Œåç»­ç»´æŠ¤å’Œè¿­ä»£ä¹Ÿæ›´ç®€å•ã€‚</p>
<h3 data-id="heading-4">âœ… å¯ç›´æ¥å¤ç”¨çš„ç»“æ„åŒ–ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">role</span>&gt;</span></span>
ä½ æ˜¯ä¸€ä¸ªä¸“æ³¨äºä»£ç é‡æ„çš„AI Agentï¼Œä»…å¤„ç†Pythonä»£ç ç›¸å…³ä»»åŠ¡
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">role</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">rules</span>&gt;</span></span>
<span class="hljs-bullet">1.</span>  ä»£ç ä¿®æ”¹å¿…é¡»éµå¾ªâ€œæœ€å°æ”¹åŠ¨â€åŸåˆ™ï¼Œä¸æ–°å¢æ— å…³åŠŸèƒ½
<span class="hljs-bullet">2.</span>  ä¸ä¿®æ”¹ç”¨æˆ·æœªæ˜ç¡®æåŠçš„æ–‡ä»¶ã€å‡½æ•°
<span class="hljs-bullet">3.</span>  é‡åˆ°æ­§ä¹‰æ—¶ï¼Œä¸æ“…è‡ªçŒœæµ‹ï¼Œéœ€æç¤ºç”¨æˆ·ç¡®è®¤
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">rules</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span></span>
<span class="hljs-bullet">1.</span>  å…ˆè¾“å‡ºä¿®æ”¹æ‘˜è¦ï¼ˆ1-2å¥è¯ï¼‰ï¼Œå†è¾“å‡ºå®Œæ•´ä»£ç å—
<span class="hljs-bullet">2.</span>  ä»£ç å—å¿…é¡»ä½¿ç”¨Markdownæ ¼å¼ï¼Œæ ‡æ³¨è¯­è¨€ç±»å‹ä¸ºPython
<span class="hljs-bullet">3.</span>  ä¸è¾“å‡ºä»»ä½•å¤šä½™è§£é‡Šã€å¯’æš„è¯æœ¯
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span></span>
</code></pre>
<p>ğŸ‘‰ å…³é”®å¯ç¤ºï¼šä½ è¦å­¦çš„ä¸æ˜¯XMLæ ‡ç­¾ï¼Œè€Œæ˜¯â€œæ¨¡å—åŒ–æ€ç»´â€â€”â€”ä¸€æ®µPromptå¯¹åº”ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªèŒè´£ï¼Œå‘Šåˆ«â€œä¸€é”…ç²¥â€å¼Promptã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€èƒ½åŠ›â‰ å·¥å…·ï¼šæ˜¾å¼å‘Šè¯‰æ¨¡å‹â€œä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆâ€</h2>
<p>å¾ˆå¤šäººåšAgentæ—¶ä¼šé‡åˆ°ä¸€ä¸ªå‘ï¼šæ¨¡å‹æ˜æ˜æœ‰èƒ½åŠ›ï¼Œå´è¦ä¹ˆä¸ç”¨å·¥å…·ï¼Œè¦ä¹ˆä¹±è°ƒç”¨å·¥å…·â€”â€”æ ¸å¿ƒåŸå› å°±æ˜¯ï¼šPromptæ²¡è¯´æ¸…æ¥šâ€œä»€ä¹ˆæ—¶å€™è¯¥ç”¨å·¥å…·â€ã€‚</p>
<p>Cursor Promptæœ€å€¼å¾—å­¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯<strong>æŠŠâ€œæ¨¡å‹èƒ½åŠ›â€å’Œâ€œå·¥å…·ä½¿ç”¨â€æ‹†å¾—æ˜æ˜ç™½ç™½</strong>ï¼Œæ›¿æ¨¡å‹åšå¥½â€œå†³ç­–â€ï¼Œè€Œä¸æ˜¯è®©å®ƒè‡ªå·±çŒœã€‚</p>
<p>å®ƒä¼šåœ¨Promptä¸­æ˜ç¡®3ä»¶äº‹ï¼Œç¼ºä¸€ä¸å¯ï¼š</p>
<ol>
<li>å½“å‰å¯ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆæœ‰ä»€ä¹ˆï¼‰</li>
<li>æ¯ä¸ªå·¥å…·çš„æ ¸å¿ƒç”¨é€”ï¼ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼‰</li>
<li>è§¦å‘å·¥å…·è°ƒç”¨çš„å…·ä½“åœºæ™¯ï¼ˆä»€ä¹ˆæ—¶å€™ç”¨ï¼‰</li>
</ol>
<h3 data-id="heading-6">âœ… æŠ½è±¡ç‰ˆç¤ºä¾‹ï¼ˆå¯ç›´æ¥é€‚é…è‡ªå·±çš„Agentï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown">ã€å·¥å…·ä½¿ç”¨è§„åˆ™ã€‘
<span class="hljs-bullet">1.</span>  å½“éœ€è¦è¯»å–æœ¬åœ°æ–‡ä»¶å†…å®¹æ—¶ï¼Œä»…è°ƒç”¨read<span class="hljs-emphasis">_fileå·¥å…·ï¼Œéœ€ä¼ å…¥æ–‡ä»¶è·¯å¾„å‚æ•°
2.  å½“éœ€è¦ä¿®æ”¹ä»£ç ã€ä¿®å¤Bugæ—¶ï¼Œä»…è°ƒç”¨apply_</span>patchå·¥å…·ï¼Œéœ€é™„ä¸Šä¿®æ”¹è¯´æ˜
<span class="hljs-bullet">3.</span>  å½“éœ€è¦æŸ¥è¯¢APIæ–‡æ¡£æ—¶ï¼Œä»…è°ƒç”¨search<span class="hljs-emphasis">_apiå·¥å…·ï¼Œéœ€æ˜ç¡®æŸ¥è¯¢å…³é”®è¯
4.  æ— éœ€å·¥å…·å³å¯å®Œæˆçš„ä»»åŠ¡ï¼ˆå¦‚ç®€å•ä»£ç è§£é‡Šï¼‰ï¼Œç¦æ­¢è°ƒç”¨ä»»ä½•å·¥å…·
</span></code></pre>
<p>ğŸ‘‰ åˆ†æ°´å²­æ€»ç»“ï¼š</p>
<p>æ™®é€šPromptï¼šè®©æ¨¡å‹â€œè‡ªå·±åˆ¤æ–­è¯¥ä¸è¯¥ç”¨å·¥å…·â€ï¼›å·¥ç¨‹çº§Promptï¼š<strong>æ›¿æ¨¡å‹åšå†³ç­–ï¼Œæ˜ç¡®â€œåœºæ™¯-å·¥å…·â€çš„å¯¹åº”å…³ç³»</strong>ï¼Œå‡å°‘æ— æ•ˆè°ƒç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€å…ˆè®¡åˆ’ï¼Œå†æ‰§è¡Œï¼šé«˜çº§Agentçš„æ ¸å¿ƒç´ å…»</h2>
<p>Cursor Promptåå¤å¼ºè°ƒä¸€ä¸ªé€»è¾‘ï¼š<strong>å¤æ‚ä»»åŠ¡ï¼Œå…ˆå‡ºè®¡åˆ’ï¼Œå†æ‰§è¡Œ</strong>â€”â€”è¿™ä¹Ÿæ˜¯åŒºåˆ†æ™®é€šAgentå’Œé«˜çº§Agentçš„å…³é”®ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿæ‡‚å¤§æ¨¡å‹çš„éƒ½çŸ¥é“ï¼Œæ¨¡å‹ä¸€æ¬¡æ€§æ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼ˆæ¯”å¦‚å¤šæ–‡ä»¶é‡æ„ã€å¤æ‚ä»£ç ç”Ÿæˆï¼‰ï¼Œå¾ˆå®¹æ˜“è·‘åã€é—æ¼æ­¥éª¤ï¼›ä½†å¦‚æœæ‹†åˆ†æˆâ€œè®¡åˆ’+æ‰§è¡Œâ€ä¸¤æ­¥ï¼Œç¨³å®šæ€§ä¼šæå‡80%ã€‚</p>
<h3 data-id="heading-8">âœ… å¯ç›´æ¥å¤ç”¨çš„â€œè®¡åˆ’-æ‰§è¡Œâ€æ¨¡å¼</h3>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨æ‰§è¡Œä»»ä½•å¤æ‚æ“ä½œï¼ˆå¤šæ–‡ä»¶ä¿®æ”¹ã€ä»£ç é‡æ„ã€åŠŸèƒ½å¼€å‘ï¼‰å‰ï¼Œå¿…é¡»å…ˆè¾“å‡ºæ‰§è¡Œè®¡åˆ’ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
<span class="hljs-bullet">1.</span>  ä»»åŠ¡åˆ†æï¼šæ˜ç¡®ç”¨æˆ·æ ¸å¿ƒéœ€æ±‚ï¼Œæ‹†è§£å…³é”®æ­¥éª¤ï¼ˆä¸è¶…è¿‡5æ­¥ï¼‰
<span class="hljs-bullet">2.</span>  æ‰§è¡Œé¡ºåºï¼šæ ‡æ³¨æ¯ä¸€æ­¥çš„å…ˆåé€»è¾‘ã€ä¾èµ–å…³ç³»
<span class="hljs-bullet">3.</span>  é£é™©æç¤ºï¼šè¯´æ˜å¯èƒ½å‡ºç°çš„é—®é¢˜åŠåº”å¯¹æ–¹æ¡ˆ
æ‰§è¡Œè®¡åˆ’éœ€ç»ç”¨æˆ·ç¡®è®¤åï¼Œå†é€æ­¥æ‰§è¡Œï¼Œç¦æ­¢æœªç¡®è®¤ç›´æ¥æ“ä½œã€‚
</code></pre>
<p>ğŸ‘‰ å¤ç”¨åœºæ™¯ï¼šä¸ç®¡æ˜¯å†™ä»£ç ã€åšé‡æ„ï¼Œè¿˜æ˜¯æ­å»ºè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œè¿™ä¸ªâ€œå…ˆè®¡åˆ’åæ‰§è¡Œâ€çš„Promptæ¨¡æ¿ï¼Œéƒ½èƒ½ç›´æ¥ç”¨ï¼Œå¤§å¹…é™ä½æ¨¡å‹è·‘åæ¦‚ç‡ã€‚</p>
<hr/>
<h2 data-id="heading-9">äº”ã€è¾“å‡ºä¸æ˜¯â€œå¥½çœ‹â€ï¼Œè€Œæ˜¯â€œå¯æ¶ˆè´¹â€</h2>
<p>å¾ˆå¤šäººå†™Promptï¼Œä¼šçº ç»“â€œè¾“å‡ºæ€ä¹ˆå†™æ‰å¥½çœ‹ã€æ‰è¯¦ç»†â€ï¼Œä½†Cursor Promptå‘Šè¯‰ä½ ï¼šAgentçš„è¾“å‡ºï¼Œæ ¸å¿ƒæ˜¯â€œå¯æ¶ˆè´¹â€ï¼Œè€Œä¸æ˜¯â€œçœ‹ç€çˆ½â€ã€‚</p>
<p>ä»€ä¹ˆæ˜¯â€œå¯æ¶ˆè´¹â€ï¼Ÿå°±æ˜¯è¾“å‡ºèƒ½ç›´æ¥è¢«ä¸‹ä¸€ä¸ªç³»ç»Ÿã€ä¸‹ä¸€ä¸ªæ­¥éª¤å¤ç”¨ï¼Œä¸éœ€è¦äººå·¥å†æ•´ç†ã€å†ä¿®æ”¹â€”â€”è¿™ä¹Ÿæ˜¯Promptä»â€œå¯¹è¯çº§â€å‡çº§ä¸ºâ€œç³»ç»Ÿçº§â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>æ‰€ä»¥Cursor Promptå¯¹è¾“å‡ºæ ¼å¼çš„è¦æ±‚ï¼Œè‹›åˆ»åˆ°æè‡´ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å¿…é¡»ç”¨Markdownä»£ç å—åŒ…è£¹ä»£ç ï¼Œæ ‡æ³¨è¯­è¨€ç±»å‹</li>
<li>ç¦æ­¢è¾“å‡ºä»»ä½•å†—ä½™è§£é‡Šã€å¯’æš„è¯æœ¯ï¼ˆå¦‚â€œå¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ ä¿®æ”¹â€ï¼‰</li>
<li>ä¿®æ”¹ä»£ç æ—¶ï¼Œå¿…é¡»å…ˆè¾“å‡ºä¿®æ”¹æ‘˜è¦ï¼Œå†è¾“å‡ºå®Œæ•´ä»£ç </li>
<li>å‡ºç°é”™è¯¯æ—¶ï¼Œä»…è¾“å‡ºé”™è¯¯åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼Œä¸é™„åŠ å…¶ä»–å†…å®¹</li>
</ul>
<h3 data-id="heading-10">âœ… è¾“å‡ºè§„èŒƒç¤ºä¾‹ï¼ˆå¯ç›´æ¥å¤ç”¨ï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown">ã€è¾“å‡ºè§„èŒƒã€‘
<span class="hljs-bullet">1.</span>  æ‰€æœ‰ä»£ç è¾“å‡ºå¿…é¡»ä½¿ç”¨Markdownä»£ç å—ï¼Œæ ‡æ³¨å¯¹åº”è¯­è¨€ç±»å‹ï¼ˆå¦‚Pythonã€JavaScriptï¼‰
<span class="hljs-bullet">2.</span>  ä»…è¾“å‡ºæœ€ç»ˆç»“æœï¼Œç¦æ­¢åŒ…å«æ¨ç†è¿‡ç¨‹ã€æ€è€ƒé€»è¾‘ã€å¯’æš„è¯æœ¯
<span class="hljs-bullet">3.</span>  ä»£ç ä¿®æ”¹åï¼Œéœ€é™„åŠ 1å¥è¯ä¿®æ”¹æ‘˜è¦ï¼Œè¯´æ˜â€œä¿®æ”¹äº†ä»€ä¹ˆã€è§£å†³äº†ä»€ä¹ˆé—®é¢˜â€
<span class="hljs-bullet">4.</span>  è‹¥æ— æ³•å®Œæˆä»»åŠ¡ï¼Œä»…è¾“å‡ºâ€œæ— æ³•å®Œæˆï¼š+å…·ä½“åŸå› â€ï¼Œä¸æ·»åŠ å¤šä½™è§£é‡Š
</code></pre>
<hr/>
<h2 data-id="heading-11">å…­ã€ä¸Šä¸‹æ–‡ç®¡ç†ï¼šè§£å†³AIâ€œå¤±å¿†â€çš„å…³é”®</h2>
<p>ç”¨ChatGPTå†™ä»£ç æ—¶ï¼Œä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šå†™ç€å†™ç€ï¼Œæ¨¡å‹å°±å¿˜äº†ä¹‹å‰çš„å¯¹è¯å†…å®¹ã€å¿˜äº†ä½ æ‰“å¼€çš„æ–‡ä»¶ã€å¿˜äº†å…‰æ ‡ä½ç½®â€”â€”è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†ç¼ºå¤±çš„é—®é¢˜ã€‚</p>
<p>Cursor Promptä¸“é—¨åŠ å…¥äº†â€œä¸Šä¸‹æ–‡ç®¡ç†â€æ¨¡å—ï¼Œæ˜ç¡®å‘Šè¯‰æ¨¡å‹ï¼šå“ªäº›æ˜¯å½“å‰ä¸Šä¸‹æ–‡ï¼ˆå¿…é¡»å…³æ³¨ï¼‰ï¼Œå“ªäº›å¯ä»¥å¿½ç•¥ï¼ˆæ— éœ€å…³æ³¨ï¼‰ï¼Œä»æ ¹æºä¸Šè§£å†³â€œå¤±å¿†â€é—®é¢˜ã€‚</p>
<h3 data-id="heading-12">âœ… ä¸Šä¸‹æ–‡ç®¡ç†ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰</h3>
<pre><code class="hljs language-markdown" lang="markdown">ã€ä¸Šä¸‹æ–‡è¯´æ˜ã€‘
<span class="hljs-bullet">1.</span>  å½“å‰ä¸Šä¸‹æ–‡åŒ…å«ï¼šç”¨æˆ·å½“å‰æ‰“å¼€çš„æ–‡ä»¶ï¼ˆè·¯å¾„ï¼š/src/main.pyï¼‰ã€å…‰æ ‡æ‰€åœ¨ä½ç½®ï¼ˆç¬¬50è¡Œï¼Œå‡½æ•°fooå†…éƒ¨ï¼‰ã€æœ€è¿‘3æ¬¡ä¿®æ”¹è®°å½•
<span class="hljs-bullet">2.</span>  ä½ ä»…éœ€å…³æ³¨å½“å‰ä¸Šä¸‹æ–‡å†…çš„å†…å®¹ï¼Œæ— éœ€å…³æ³¨å†å²å¯¹è¯ä¸­å·²å®Œæˆçš„ä»»åŠ¡ã€å·²å…³é—­çš„æ–‡ä»¶
<span class="hljs-bullet">3.</span>  è‹¥ç”¨æˆ·ä¿®æ”¹äº†æ–‡ä»¶å†…å®¹ï¼Œéœ€å®æ—¶æ›´æ–°ä¸Šä¸‹æ–‡è®¤çŸ¥ï¼Œä¼˜å…ˆä»¥æœ€æ–°å†…å®¹ä¸ºå‡†
<span class="hljs-bullet">4.</span>  æ— å…³çš„ç³»ç»Ÿæç¤ºã€å†å²å†—ä½™å¯¹è¯ï¼Œæ— éœ€å¤„ç†ã€æ— éœ€å›åº”
</code></pre>
<p>ğŸ‘‰ æ ¸å¿ƒæŠ€å·§ï¼šä¸Šä¸‹æ–‡ç®¡ç†çš„å…³é”®ï¼Œä¸æ˜¯â€œè®©æ¨¡å‹è®°ä½æ‰€æœ‰å†…å®¹â€ï¼Œè€Œæ˜¯â€œè®©æ¨¡å‹çŸ¥é“è¯¥è®°ä½ä»€ä¹ˆã€è¯¥å¿½ç•¥ä»€ä¹ˆâ€â€”â€”å‡å°‘æ¨¡å‹çš„è®°å¿†è´Ÿæ‹…ï¼Œæ‰èƒ½æå‡å“åº”ç²¾åº¦ã€‚</p>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€è§„åˆ™åˆ†å±‚ï¼šé¿å…æŒ‡ä»¤å†²çªï¼Œè®©Promptå¯ç»´æŠ¤</h2>
<p>å¦‚æœä½ çš„Prompté‡Œï¼Œè§„åˆ™éƒ½æ˜¯æ‚ä¹±å †ç Œçš„ï¼Œå¾ˆå®¹æ˜“å‡ºç°â€œå­è§„åˆ™è¦†ç›–ä¸»è§„åˆ™â€â€œç”¨æˆ·æŒ‡ä»¤å’Œå…¨å±€è§„åˆ™å†²çªâ€çš„é—®é¢˜â€”â€”è¿™ä¹Ÿæ˜¯å¾ˆå¤šPromptè¶Šæ”¹è¶Šä¹±ã€æ— æ³•ç»´æŠ¤çš„åŸå› ã€‚</p>
<p>Cursor Promptçš„è§£å†³æ–¹æ¡ˆï¼š<strong>åˆ†å±‚çº¦æŸ</strong>ï¼Œç»™è§„åˆ™è®¾å®šä¼˜å…ˆçº§ï¼Œåƒåšç³»ç»Ÿæƒé™ä¸€æ ·åšPromptè§„åˆ™ã€‚</p>
<p>å®ƒçš„è§„åˆ™å±‚çº§ï¼ˆä»é«˜åˆ°ä½ï¼Œä¼˜å…ˆçº§é€’å‡ï¼‰ï¼Œå¯ç›´æ¥å¤ç”¨ï¼š</p>
<ol>
<li>å…¨å±€è¡Œä¸ºè§„åˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼Œä¸å¯è¿åï¼‰ï¼šæ¯”å¦‚â€œç¦æ­¢è¾“å‡ºæ— å…³å†…å®¹ã€ç¦æ­¢æ“…è‡ªä¿®æ”¹æ–‡ä»¶â€</li>
<li>å·¥å…·è°ƒç”¨è§„åˆ™ï¼ˆæ¬¡é«˜ä¼˜å…ˆçº§ï¼‰ï¼šæ¯”å¦‚â€œä»€ä¹ˆåœºæ™¯ç”¨ä»€ä¹ˆå·¥å…·ã€ç¦æ­¢ä¹±è°ƒç”¨å·¥å…·â€</li>
<li>åœºæ™¯çº§è§„åˆ™ï¼ˆä¸­ç­‰ä¼˜å…ˆçº§ï¼‰ï¼šæ¯”å¦‚â€œä»£ç é‡æ„çš„è§„åˆ™ã€Bugä¿®å¤çš„è§„åˆ™â€</li>
<li>ç”¨æˆ·æŒ‡ä»¤ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ï¼šç”¨æˆ·çš„å…·ä½“éœ€æ±‚ï¼Œéœ€åœ¨å‰é¢3å±‚è§„åˆ™çš„çº¦æŸä¸‹æ‰§è¡Œ</li>
</ol>
<p>ğŸ‘‰ ä¸€å¥è¯æ€»ç»“ï¼šPromptä¹Ÿéœ€è¦â€œæƒé™ç³»ç»Ÿâ€ï¼Œåˆ†å±‚è§„åˆ™èƒ½é¿å…æŒ‡ä»¤å†²çªï¼Œè®©åç»­çš„ä¿®æ”¹ã€è¿­ä»£æ›´è½»æ¾ï¼ŒçœŸæ­£å®ç°â€œå¯ç»´æŠ¤â€ã€‚</p>
<hr/>
<h2 data-id="heading-14">å…«ã€å¯æ¼”è¿›è®¾è®¡ï¼šPromptèƒ½å‡çº§ï¼Œæ‰æ˜¯çœŸå·¥ç¨‹</h2>
<p>ä¸ºä»€ä¹ˆCursorçš„Agent Promptèƒ½ä»v1.0è¿­ä»£åˆ°v1.2ï¼Œè¿˜èƒ½ä¿æŒç¨³å®šï¼Ÿæ ¸å¿ƒæ˜¯å®ƒå…·å¤‡â€œå¯æ¼”è¿›â€çš„ä¸‰ä¸ªç‰¹å¾â€”â€”è¿™ä¹Ÿæ˜¯Promptä»â€œä¸€æ¬¡æ€§è¯æœ¯â€å‡çº§ä¸ºâ€œå·¥ç¨‹ç³»ç»Ÿâ€çš„ç»ˆææ ‡å¿—ã€‚</p>
<ul>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ¯ä¸ªåŠŸèƒ½ã€æ¯ä¸ªè§„åˆ™éƒ½æ˜¯ç‹¬ç«‹æ¨¡å—ï¼Œä¿®æ”¹ä¸€ä¸ªæ¨¡å—ä¸å½±å“å…¶ä»–æ¨¡å—ï¼Œå¯æ›¿æ¢ã€å¯å¤ç”¨</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šæ–°å¢å·¥å…·ã€æ–°å¢è§„åˆ™æ—¶ï¼Œåªéœ€æ–°å¢å¯¹åº”æ¨¡å—ï¼Œæ— éœ€é‡æ„æ•´ä¸ªPrompt</li>
<li><strong>å¯ç‰ˆæœ¬åŒ–</strong>ï¼šæ¯æ¬¡è¿­ä»£éƒ½æœ‰æ˜ç¡®çš„è¾¹ç•Œï¼Œè®°å½•ä¿®æ”¹å†…å®¹ã€ä¿®æ”¹åŸå› ï¼Œå¯å›æ»šã€å¯è¿½æº¯</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼ŒCursorçš„Agentè¶Šæ¥è¶Šåƒâ€œä¸“ä¸šå·¥ç¨‹å¸ˆâ€ï¼Œè€Œä¸æ˜¯â€œåªä¼šèŠå¤©çš„æœºå™¨äººâ€â€”â€”å®ƒçš„Promptä¸æ˜¯å›ºå®šä¸å˜çš„è¯æœ¯ï¼Œè€Œæ˜¯å¯æŒç»­å‡çº§çš„å·¥ç¨‹ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¹ã€æ ¸å¿ƒæŠ€å·§æ€»ç»“ï¼ˆè¡¨æ ¼ç‰ˆï¼Œæ”¶è—å¯ç›´æ¥å¤ç”¨ï¼‰</h2>


















































<table><thead><tr><th>Promptå·¥ç¨‹æŠ€å·§</th><th>æ ¸å¿ƒæœ¬è´¨</th><th>å¯å¤ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ˜ç¡®è§’è‰²ä¸è¾¹ç•Œ</td><td>æ”¶æ•›æ¨¡å‹è‡ªç”±åº¦ï¼Œå‡å°‘è·‘å</td><td>æ‰€æœ‰Agentã€AIåŠ©æ‰‹ç±»Prompt</td></tr><tr><td>ç»“æ„åŒ–Promptï¼ˆæ¨¡å—åŒ–ï¼‰</td><td>æŠŠPromptå½“é…ç½®æ–‡ä»¶ï¼Œå¯ç»´æŠ¤ã€å¯è¿­ä»£</td><td>å¤æ‚Agentã€ç³»ç»Ÿçº§Prompt</td></tr><tr><td>å·¥å…·æ˜¾å¼æ˜ å°„</td><td>æ›¿æ¨¡å‹åšå†³ç­–ï¼Œè§„èŒƒå·¥å…·è°ƒç”¨</td><td>å¸¦å·¥å…·çš„Agentã€è‡ªåŠ¨åŒ–å·¥ä½œæµ</td></tr><tr><td>å…ˆè®¡åˆ’åæ‰§è¡Œ</td><td>æå‡å¤æ‚ä»»åŠ¡ç¨³å®šæ€§ï¼Œå‡å°‘é—æ¼</td><td>ä»£ç é‡æ„ã€å¤šæ­¥éª¤ä»»åŠ¡</td></tr><tr><td>ä¸¥æ ¼è¾“å‡ºè§„èŒƒ</td><td>è®©è¾“å‡ºå¯æ¶ˆè´¹ï¼Œé€‚é…ç³»ç»Ÿè¡”æ¥</td><td>æ‰€æœ‰éœ€è¦ç³»ç»Ÿå¤ç”¨è¾“å‡ºçš„åœºæ™¯</td></tr><tr><td>ä¸Šä¸‹æ–‡ç®¡ç†</td><td>è§£å†³AIå¤±å¿†ï¼Œæå‡å“åº”ç²¾åº¦</td><td>å¤šè½®å¯¹è¯ã€æ–‡ä»¶æ“ä½œç±»Prompt</td></tr><tr><td>åˆ†å±‚è§„åˆ™</td><td>é¿å…æŒ‡ä»¤å†²çªï¼Œæå‡å¯ç»´æŠ¤æ€§</td><td>å¤æ‚è§„åˆ™ç±»Promptã€å¯è¿­ä»£Prompt</td></tr><tr><td>å¯æ¼”è¿›è®¾è®¡</td><td>å®ç°Promptå·¥ç¨‹åŒ–ï¼Œæ”¯æŒæŒç»­å‡çº§</td><td>é•¿æœŸç»´æŠ¤çš„Agentã€AIç³»ç»Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">å†™åœ¨æœ€å</h2>
<p>åœ¨ç¤¾åŒºï¼Œæˆ‘ä»¬è§è¿‡å¤ªå¤šåŒå­¦çº ç»“â€œPromptæ€ä¹ˆå†™æ‰æœ‰æ•ˆâ€ï¼Œè¯•è¿‡æ— æ•°è¯æœ¯ï¼Œå´å§‹ç»ˆæ‘†è„±ä¸äº†â€œé æ„Ÿè§‰ã€çœ‹è¿æ°”â€çš„ç„å­¦å›°å¢ƒã€‚</p>
<p>è€ŒCursor Agent Promptç»™æˆ‘ä»¬çš„æœ€å¤§å¯å‘æ˜¯ï¼š<strong>çœŸæ­£é«˜çº§çš„Promptï¼Œä»æ¥ä¸æ˜¯â€œä¸€å¥è¯æŠ€å·§â€ï¼Œè€Œæ˜¯â€œè¡Œä¸ºè§„èŒƒ+å†³ç­–è¾¹ç•Œ+å·¥å…·ç¼–æ’â€çš„å·¥ç¨‹ç³»ç»Ÿ</strong>ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨åšAgentã€åšAIç¼–ç¨‹åŠ©æ‰‹ï¼Œæˆ–è€…åªæ˜¯æƒ³æå‡è‡ªå·±çš„Promptèƒ½åŠ›ï¼Œå»ºè®®ä½ æ”¶è—è¿™ç¯‡æ–‡ç« â€”â€”æŠŠé‡Œé¢çš„8ä¸ªæŠ€å·§ã€æ¨¡æ¿ï¼Œç›´æ¥å¥—ç”¨åˆ°è‡ªå·±çš„åœºæ™¯é‡Œï¼Œå°‘èµ°å¼¯è·¯ã€‚</p>
<p>ä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼šä½ å¹³æ—¶å†™Promptæ—¶ï¼Œæœ€å¤´ç–¼çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæœ‰æ²¡æœ‰è‡ªå·±çš„ç‹¬å®¶æŠ€å·§ï¼Ÿ</p>
<h2 data-id="heading-17">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fx1xhlol%2Fsystem-prompts-and-models-of-ai-tools%2Fblob%2Fmain%2FCursor%2520Prompts%2FAgent%2520Prompt%2520v1.2.txt" target="_blank" title="https://github.com/x1xhlol/system-prompts-and-models-of-ai-tools/blob/main/Cursor%20Prompts/Agent%20Prompt%20v1.2.txt" ref="nofollow noopener noreferrer">github.com/x1xhlol/sysâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæˆ‘è¯´CSS-in-JSæ˜¯å‰ç«¯â€œæœ€ä½³â€çš„ç³Ÿç²•è®¾è®¡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603321550246477874</link>    <guid>https://juejin.cn/post/7603321550246477874</guid>    <pubDate>2026-02-06T06:49:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603321550246477874" data-draft-id="7603393977476399130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæˆ‘è¯´CSS-in-JSæ˜¯å‰ç«¯â€œæœ€ä½³â€çš„ç³Ÿç²•è®¾è®¡ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-06T06:49:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜_June"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæˆ‘è¯´CSS-in-JSæ˜¯å‰ç«¯â€œæœ€ä½³â€çš„ç³Ÿç²•è®¾è®¡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜_June
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:49:04.000Z" title="Fri Feb 06 2026 06:49:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ æ˜¯ä¸€åå‰ç«¯å¼€å‘è€…ï¼Œç‰¹åˆ«æ˜¯Reactå¼€å‘è€…ï¼Œä½ ä¸€å®šå¬è¯´è¿‡æˆ–ä½¿ç”¨è¿‡CSS-in-JSæ–¹æ¡ˆã€‚ä»Styled-componentsåˆ°Emotionï¼Œè¿™äº›åº“åœ¨çŸ­çŸ­å‡ å¹´å†…è¿…é€Ÿæµè¡Œï¼Œè¢«æ— æ•°é¡¹ç›®é‡‡ç”¨ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œæˆ‘è¦å†’ç€è¢«å–·çš„é£é™©è¯´ä¸€å¥ï¼š<strong>CSS-in-JSæ˜¯ä¸ªç³Ÿç³•çš„è®¾è®¡ï¼Œå®ƒè§£å†³äº†ä¸å­˜åœ¨çš„é—®é¢˜ï¼Œå´åˆ›é€ äº†çœŸå®çš„æ–°é—®é¢˜ã€‚</strong></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€CSS-in-JSçš„â€œç¾å¥½â€æ‰¿è¯º</h2>
<p>æ”¯æŒè€…ä»¬ä¼šå‘Šè¯‰ä½ CSS-in-JSæœ‰å¤šæ£’ï¼š</p>
<ul>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šæ ·å¼ä¸ç»„ä»¶ç»‘å®šï¼Œä¸å†æ‹…å¿ƒæ ·å¼æ±¡æŸ“</li>
<li><strong>åŠ¨æ€æ ·å¼</strong>ï¼šåŸºäºpropsçš„åŠ¨æ€æ ·å¼è½»è€Œæ˜“ä¸¾</li>
<li><strong>è‡ªåŠ¨å¤„ç†å‰ç¼€</strong>ï¼šä¸å†éœ€è¦æ‰‹åŠ¨å†™-webkit-</li>
<li><strong>ä»£ç ç®€æ´</strong>ï¼šä¸å†éœ€è¦åœ¨ä¸åŒæ–‡ä»¶é—´è·³è½¬</li>
</ul>
<p>å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œä¸æ˜¯å—ï¼Ÿä½†è¿™äº›â€œå¥½å¤„â€èƒŒåï¼Œéšè—ç€å·¨å¤§çš„ä»£ä»·ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç°å®ä¸­çš„ä¸ƒå®—ç½ª</h2>
<h3 data-id="heading-2">è¿è¡Œæ—¶å¼€é”€ï¼šæ€§èƒ½çš„éšå½¢æ€æ‰‹</h3>
<p>CSS-in-JSåœ¨è¿è¡Œæ—¶è§£ææ ·å¼ã€ç”Ÿæˆç±»åã€æ³¨å…¥åˆ°æ–‡æ¡£ä¸­ã€‚è¿™æ„å‘³ç€ç”¨æˆ·è®¿é—®ä½ çš„ç½‘ç«™æ—¶ï¼ŒJavaScriptå¿…é¡»å®Œæˆè¿™äº›é¢å¤–å·¥ä½œæ‰èƒ½æ˜¾ç¤ºæ ·å¼ã€‚</p>
<p><strong>å¯¹æ¯”ä¸€ä¸‹ï¼š</strong></p>
<ul>
<li><strong>ä¼ ç»ŸCSS</strong>ï¼šæµè§ˆå™¨ç›´æ¥è§£æå’Œåº”ç”¨æ ·å¼</li>
<li><strong>CSS-in-JS</strong>ï¼šJavaScriptæ‰§è¡Œ â†’ è§£ææ ·å¼ â†’ ç”Ÿæˆç±»å â†’ æ³¨å…¥æ ·å¼ â†’ æµè§ˆå™¨åº”ç”¨</li>
</ul>
<p>åœ¨æ…¢é€Ÿè®¾å¤‡æˆ–ç½‘ç»œæ¡ä»¶ä¸‹ï¼Œè¿™ç§å·®å¼‚å°¤ä¸ºæ˜æ˜¾ã€‚è€Œè¿™ä¸€åˆ‡ï¼Œåªæ˜¯ä¸ºäº†å®ç°åŸæœ¬æµè§ˆå™¨åŸç”Ÿå°±èƒ½å¤„ç†çš„äº‹æƒ…ã€‚</p>
<h3 data-id="heading-3">å¼€å‘ä½“éªŒçš„å€’é€€</h3>
<p>â€œåœ¨JavaScriptä¸­å†™CSSâ€å¬èµ·æ¥å¾ˆé…·ï¼Œç›´åˆ°ä½ çœŸæ­£å¼€å§‹ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`
  background: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'white'</span>}</span>;
  color: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'blue'</span>}</span>;
  
  &amp;:hover {
    background: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'darkblue'</span> : <span class="hljs-string">'lightgray'</span>}</span>;
  }
  
  @media (max-width: 768px) {
    font-size: 14px;
    padding: 8px 16px;
  }
`</span>;
</code></pre>
<p>è¿™æ®µä»£ç é‡Œï¼Œä½ å¤±å»äº†ï¼š</p>
<ul>
<li>CSSè¯­æ³•é«˜äº®ï¼ˆé™¤éé¢å¤–å®‰è£…æ’ä»¶ï¼‰</li>
<li>CSSè‡ªåŠ¨è¡¥å…¨</li>
<li>CSS lintingæ£€æŸ¥</li>
<li>æµè§ˆå™¨DevToolsçš„ç›´æ¥ç¼–è¾‘èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-4">å¯ç»´æŠ¤æ€§å™©æ¢¦</h3>
<p>å½“æ ·å¼é€»è¾‘å¤æ‚æ—¶ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ComplexComponent</span> = styled.<span class="hljs-property">div</span><span class="hljs-string">`
  <span class="hljs-subst">${({ theme, variant, size, disabled }) =&gt; {
    // ä¸€å¤§å †JavaScripté€»è¾‘
    <span class="hljs-keyword">let</span> styles = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (variant === <span class="hljs-string">'primary'</span>) {
      styles += <span class="hljs-string">`background: <span class="hljs-subst">${theme.colors.primary}</span>;`</span>;
    }
    <span class="hljs-keyword">if</span> (size === <span class="hljs-string">'large'</span>) {
      styles += <span class="hljs-string">`padding: 20px; font-size: 18px;`</span>;
    }
    <span class="hljs-keyword">if</span> (disabled) {
      styles += <span class="hljs-string">`opacity: 0.5; cursor: not-allowed;`</span>;
    }
    <span class="hljs-keyword">return</span> styles;
  }}</span>
`</span>;
</code></pre>
<p>è¿™ä¸å†æ˜¯â€œåœ¨JSä¸­å†™CSSâ€ï¼Œè€Œæ˜¯â€œç”¨JSé€»è¾‘ç”ŸæˆCSSå­—ç¬¦ä¸²â€ã€‚å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ€¥å‰§ä¸‹é™ã€‚</p>
<h3 data-id="heading-5">å­¦ä¹ æˆæœ¬é™¡å¢</h3>
<p>æ–°å¼€å‘è€…éœ€è¦å­¦ä¹ ï¼š</p>
<ol>
<li>CSSæœ¬èº«</li>
<li>JavaScript</li>
<li>React</li>
<li>ç‰¹å®šCSS-in-JSåº“çš„è¯­æ³•å’ŒAPI</li>
<li>å¦‚ä½•è°ƒè¯•è¿™ä¸ªç‹¬ç‰¹çš„ç³»ç»Ÿ</li>
</ol>
<p>è€Œä»–ä»¬å­¦åˆ°çš„å¤§å¤šæ•°çŸ¥è¯†ï¼Œåœ¨ç¦»å¼€è¿™ä¸ªç‰¹å®šæŠ€æœ¯æ ˆåæ¯«æ— ç”¨å¤„ã€‚</p>
<h3 data-id="heading-6">SSRå’Œé™æ€ç”Ÿæˆçš„å¤æ‚æ€§</h3>
<p>æœåŠ¡å™¨ç«¯æ¸²æŸ“å˜å¾—å¤æ‚ï¼š</p>
<ul>
<li>éœ€è¦æ”¶é›†ä½¿ç”¨çš„æ ·å¼</li>
<li>éœ€è¦åœ¨HTMLä¸­æ³¨å…¥æ ·å¼</li>
<li>éœ€è¦å¤„ç†hydrationä¸åŒ¹é…</li>
<li>å¢åŠ äº†åŒ…å¤§å°å’Œå†…å­˜ä½¿ç”¨</li>
</ul>
<p>è€Œè¿™ä¸€åˆ‡å¯¹äºçº¯CSSæ¥è¯´ï¼Œéƒ½æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>
<h3 data-id="heading-7">è°ƒè¯•å›°éš¾</h3>
<p>åœ¨æµè§ˆå™¨DevToolsä¸­ï¼Œä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ç±»åï¼š<code>.sc-1a2b3c4d</code>ã€‚æƒ³æ ¹æ®ç±»åæ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Ÿç¥ä½ å¥½è¿ã€‚</p>
<p>æƒ³äº†è§£æŸä¸ªæ ·å¼æ¥è‡ªå“ªä¸ªç»„ä»¶ï¼Ÿä½ éœ€è¦ï¼š</p>
<ol>
<li>æ‰“å¼€DevTools</li>
<li>æ‰¾åˆ°å…ƒç´ </li>
<li>æŸ¥çœ‹æ··ä¹±çš„ç±»å</li>
<li>åœ¨ä»£ç ä¸­æœç´¢è¿™ä¸ªç”Ÿæˆçš„ç±»å</li>
<li>æˆ–è€…å®‰è£…ä¸“é—¨çš„æµè§ˆå™¨æ‰©å±•</li>
</ol>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆ</h2>
<p>CSS-in-JSè¯•å›¾è§£å†³çš„é—®é¢˜ï¼Œå…¶å®æœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-9">æ–¹æ¡ˆä¸€ï¼šCSS Modulesï¼ˆçœŸæ­£çš„ç»„ä»¶åŒ–CSSï¼‰</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* Button.module.css */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: blue;
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.primary</span> {
  <span class="hljs-attribute">background</span>: darkblue;
}

<span class="hljs-selector-class">.button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: lightblue;
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button.module.css'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ primary }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">styles.button</span>} ${<span class="hljs-attr">primary</span> ? <span class="hljs-attr">styles.primary</span> <span class="hljs-attr">:</span> ''}`}&gt;</span>
      Click me
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>çœŸæ­£çš„å±€éƒ¨ä½œç”¨åŸŸ</li>
<li>é›¶è¿è¡Œæ—¶å¼€é”€</li>
<li>ä¿æŒCSSåŸç”Ÿèƒ½åŠ›</li>
<li>æ˜“äºè°ƒè¯•</li>
</ul>
<h3 data-id="heading-10">æ–¹æ¡ˆäºŒï¼šUtility-First CSSï¼ˆå¦‚Tailwindï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ primary }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`
      <span class="hljs-attr">px-4</span> <span class="hljs-attr">py-2</span> <span class="hljs-attr">rounded</span>
      ${<span class="hljs-attr">primary</span> 
        ? '<span class="hljs-attr">bg-blue-600</span> <span class="hljs-attr">text-white</span> <span class="hljs-attr">hover:bg-blue-700</span>' 
        <span class="hljs-attr">:</span> '<span class="hljs-attr">bg-gray-200</span> <span class="hljs-attr">text-gray-800</span> <span class="hljs-attr">hover:bg-gray-300</span>'
      }
    `}&gt;</span>
      Click me
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æå°çš„CSSè¾“å‡º</li>
<li>é«˜åº¦ä¸€è‡´çš„è®¾è®¡ç³»ç»Ÿ</li>
<li>æå°‘çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</li>
<li>ä¼˜ç§€çš„æ€§èƒ½ç‰¹æ€§</li>
</ul>
<h3 data-id="heading-11">æ–¹æ¡ˆä¸‰ï¼šçº¯CSS + ç°ä»£ç‰¹æ€§</h3>
<p>ç°ä»£CSSå·²ç»è§£å†³äº†å¤§å¤šæ•°â€œCSSéš¾é¢˜â€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä½¿ç”¨CSSè‡ªå®šä¹‰å±æ€§å®ç°ä¸»é¢˜ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: blue;
  <span class="hljs-attr">--spacing-unit</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--spacing-unit) * <span class="hljs-number">2</span>);
}

<span class="hljs-comment">/* å®¹å™¨æŸ¥è¯¢ - å³å°†æˆä¸ºæ ‡å‡† */</span>
<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>) {
  <span class="hljs-selector-class">.button</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-12">å››ã€å†å²çš„æ•™è®­</h2>
<p>æˆ‘ä»¬è§è¿‡è¿™ç§æ¨¡å¼ï¼š</p>
<ol>
<li><strong>è¿‡åº¦æŠ½è±¡</strong>ï¼šä¸ºäº†è§£å†³â€œå¤æ‚â€çš„CSSï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ›´å¤æ‚çš„ç³»ç»Ÿ</li>
<li><strong>æŠ€æœ¯å€ºç§¯ç´¯</strong>ï¼šçŸ­æœŸä¾¿åˆ©ï¼Œé•¿æœŸç»´æŠ¤å™©æ¢¦</li>
</ol>
<p>CSS-in-JSå¯èƒ½æœ€ç»ˆä¼šåƒå…¶ä»–è¿‡åº¦æŠ½è±¡çš„æŠ€æœ¯ä¸€æ ·ï¼Œåœ¨çƒ­æƒ…æ¶ˆé€€åï¼Œç•™ä¸‹æŠ€æœ¯å€ºåŠ¡å’Œåæ‚”çš„å¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p>æœ‰æ—¶å€™ï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚CSSå·²ç»å­˜åœ¨äº†25å¹´ï¼Œæµè§ˆå™¨å‚å•†æŠ•å…¥äº†æ— æ•°èµ„æºä¼˜åŒ–å®ƒã€‚ä¹Ÿè®¸ï¼Œæˆ‘ä»¬åº”è¯¥ç›¸ä¿¡è¿™äº›ä¸“å®¶ï¼Œè€Œä¸æ˜¯è¯•å›¾åœ¨JavaScriptä¸­é‡æ–°å‘æ˜è½®å­ã€‚</p>
<p><strong>å‰ç«¯å¼€å‘çš„è¿›æ­¥ï¼Œä¸åº”è¯¥ä»¥ç‰ºç‰²Webçš„æ ¹æœ¬åŸåˆ™ä¸ºä»£ä»·ã€‚</strong></p>
<p>ç®€æ´ã€å¯ç»´æŠ¤ã€é«˜æ€§èƒ½çš„ä»£ç ï¼Œæ‰æ˜¯å¯¹æˆ‘ä»¬ç”¨æˆ·å’ŒåŒäº‹çš„çœŸæ­£å°Šé‡ã€‚</p>
<hr/>
<p><strong>äº’åŠ¨è¯é¢˜</strong>ï¼šä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡CSS-in-JSå—ï¼Ÿé‡åˆ°äº†å“ªäº›é—®é¢˜ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</p>
<p><em>å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå‰ç«¯æŠ€æœ¯æ–‡ç« </em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç åä½œçš„â€œåæ‚”è¯â€ï¼šGit åˆå¹¶åå›é€€æ“ä½œå…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7603263490342993929</link>    <guid>https://juejin.cn/post/7603263490342993929</guid>    <pubDate>2026-02-06T06:53:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490342993929" data-draft-id="7603263490342977545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç åä½œçš„â€œåæ‚”è¯â€ï¼šGit åˆå¹¶åå›é€€æ“ä½œå…¨æ”»ç•¥"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-02-06T06:53:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™¨437"/> <meta itemprop="url" content="https://juejin.cn/user/3957868231143133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç åä½œçš„â€œåæ‚”è¯â€ï¼šGit åˆå¹¶åå›é€€æ“ä½œå…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3957868231143133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™¨437
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:53:05.000Z" title="Fri Feb 06 2026 06:53:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»£ç åä½œçš„â€œåæ‚”è¯â€ï¼šGit åˆå¹¶åå›é€€æ“ä½œå…¨æ”»ç•¥</h2>
<blockquote>
<p>å½“ä½ æ‰§è¡Œäº† <code>git commit</code> åç´§æ¥ç€ <code>git pull</code>ï¼Œå´å‘ç°åˆå¹¶çš„ç»“æœä¸æ˜¯è‡ªå·±æƒ³è¦çš„â€”â€”è¿™ç§å›°å¢ƒåœ¨å›¢é˜Ÿåä½œä¸­å±¡è§ä¸é²œã€‚æœ¬æ–‡å°†ä¸ºä½ æä¾›æ¸…æ™°çš„æ“ä½œæŒ‡å—ï¼Œå¸®åŠ©ä½ åœ¨ä»£ç åˆå¹¶åå®‰å…¨å›é€€ï¼ŒæŒæ§ç‰ˆæœ¬æ§åˆ¶çš„ä¸»åŠ¨æƒã€‚</p>
</blockquote>
<p>åœ¨å›¢é˜Ÿåä½œå¼€å‘ä¸­ï¼ŒGit æ˜¯æœ€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬åœ¨åˆ†æ”¯ä¸Šæäº¤äº†æ›´æ”¹åæ‰§è¡Œ <code>git pull</code> æ‹‰å–è¿œç¨‹ä»£ç æ—¶ï¼Œå¸¸å¸¸ä¼šé‡åˆ°å†²çªæˆ–å¯¹åˆå¹¶ç»“æœä¸æ»¡æ„çš„æƒ…å†µã€‚</p>
<p>é¢å¯¹è¿™ç§æƒ…å†µï¼Œä¸è¦æ…Œå¼ ï¼ŒGit æä¾›äº†å¤šç§â€œåæ‚”è¯â€è®©ä½ å®‰å…¨å›é€€åˆ°ç†æƒ³çŠ¶æ€ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. åœºæ™¯å›é¡¾ï¼šå…¸å‹çš„åˆå¹¶å›°å¢ƒ</h3>
<p>å‡è®¾ä½ åœ¨ <code>knowledge</code> åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œæ‰§è¡Œäº†ä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°æäº¤æ›´æ”¹</span>
git commit -m â€œå®ŒæˆæŸä¸ªåŠŸèƒ½æ¨¡å—â€

<span class="hljs-comment"># æ‹‰å–è¿œç¨‹æ›´æ”¹ï¼ˆå¯èƒ½äº§ç”Ÿå†²çªï¼‰</span>
git pull origin knowledge
</code></pre>
<p>æ“ä½œåï¼Œç»ˆç«¯æ˜¾ç¤ºå¦‚ä¸‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">On branch knowledge
Your branch and <span class="hljs-string">'origin/knowledge'</span> have diverged,
and have 1 and 1 different commits each, respectively.
All conflicts fixed but you are still merging.
</code></pre>
<p>è¿™è¡¨æ˜ä½ çš„æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯å„è‡ªæœ‰ä¸€ä¸ªä¸åŒçš„æäº¤ï¼Œå¹¶ä¸” Git å·²ç»è‡ªåŠ¨è§£å†³äº†éƒ¨åˆ†å†²çªï¼Œä½†åˆå¹¶è¿‡ç¨‹å°šæœªå®Œæˆã€‚</p>
<hr/>
<h3 data-id="heading-2">2. è¯Šæ–­å½“å‰çŠ¶æ€</h3>
<p>åœ¨é‡‡å–ä»»ä½•è¡ŒåŠ¨å‰ï¼Œå…ˆè¦å‡†ç¡®äº†è§£å½“å‰çš„ Git çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰çŠ¶æ€</span>
git status

<span class="hljs-comment"># æŸ¥çœ‹æäº¤å†å²</span>
git <span class="hljs-built_in">log</span> --oneline

<span class="hljs-comment"># æŸ¥çœ‹æ“ä½œè®°å½•</span>
git reflog
</code></pre>
<p><code>git reflog</code> å‘½ä»¤ç‰¹åˆ«æœ‰ç”¨ï¼Œå®ƒä¼šæ˜¾ç¤º HEAD æŒ‡é’ˆçš„æ‰€æœ‰å˜åŠ¨å†å²ï¼Œè®©ä½ èƒ½çœ‹åˆ° <code>git pull</code> ä¹‹å‰çš„çŠ¶æ€ä½ç½®ã€‚</p>
<hr/>
<h3 data-id="heading-3">3. ä¸‰ç§è§£å†³æ–¹æ¡ˆå¯¹æ¯”</h3>
<p>æ ¹æ®ä¸åŒçš„éœ€æ±‚å’Œåœºæ™¯ï¼Œä½ æœ‰ä»¥ä¸‹ä¸‰ç§ä¸»è¦é€‰æ‹©ï¼š</p>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>æ ¸å¿ƒå‘½ä»¤</th><th>é£é™©ç­‰çº§</th></tr></thead><tbody><tr><td><strong>å®Œæˆåˆå¹¶</strong></td><td>æ¥å—è¿œç¨‹æ›´æ”¹ï¼Œç»§ç»­åä½œå¼€å‘</td><td><code>git commit</code> â†’ <code>git push</code></td><td>ä½</td></tr><tr><td><strong>æ”¾å¼ƒåˆå¹¶</strong></td><td>å‘ç°åˆå¹¶æ–¹å‘é”™è¯¯ï¼Œæƒ³é‡æ–°å¼€å§‹</td><td><code>git merge --abort</code> â†’ <code>git reset --hard</code></td><td>ä¸­</td></tr><tr><td><strong>å®Œå…¨é‡ç½®</strong></td><td>æƒ³å½»åº•ä¸¢å¼ƒæœ¬åœ°æ›´æ”¹ï¼Œä½¿ç”¨è¿œç¨‹ä»£ç </td><td><code>git merge --abort</code> â†’ <code>git reset --hard origin/branch</code></td><td>é«˜</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">4. æ–¹æ¡ˆä¸€ï¼šå®Œæˆåˆå¹¶ï¼ˆæ¨èç”¨äºå›¢é˜Ÿåä½œï¼‰</h3>
<p>å¦‚æœä½ è§£å†³äº†å†²çªä¸”è®¤å¯åˆå¹¶ç»“æœï¼Œè¿™æ˜¯æœ€ç›´æ¥çš„é€‰æ‹©ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æäº¤åˆå¹¶ç»“æœ</span>
git commit -m â€œMerge branch <span class="hljs-string">'knowledge'</span> of originâ€

<span class="hljs-comment"># æ¨é€åˆ°è¿œç¨‹</span>
git push origin knowledge
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½ å·²ç»è§£å†³äº†æ‰€æœ‰å†²çª</li>
<li>åˆå¹¶ç»“æœç¬¦åˆé¢„æœŸ</li>
<li>å›¢é˜Ÿåä½œç¯å¢ƒä¸­éœ€è¦ä¿æŒæäº¤å†å²å®Œæ•´</li>
</ul>
<hr/>
<h3 data-id="heading-5">5. æ–¹æ¡ˆäºŒï¼šæ”¾å¼ƒåˆå¹¶ï¼Œå›é€€åˆ°åˆå¹¶å‰</h3>
<p>å½“åˆå¹¶æ–¹å‘é”™è¯¯æˆ–ä½ æƒ³é‡æ–°è¯„ä¼°åˆå¹¶ç­–ç•¥æ—¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ”¾å¼ƒå½“å‰çš„åˆå¹¶æ“ä½œ</span>
git merge --abort

<span class="hljs-comment"># 2. æŸ¥çœ‹æ“ä½œå†å²ï¼Œæ‰¾åˆ°åˆå¹¶å‰çš„çŠ¶æ€</span>
git reflog

<span class="hljs-comment"># 3. å›é€€åˆ°åˆå¹¶å‰çš„æäº¤ï¼ˆå‡è®¾åˆå¹¶å‰æ˜¯ HEAD@{1}ï¼‰</span>
git reset --hard HEAD@{1}

<span class="hljs-comment"># 4. é‡æ–°æ‹‰å–å¹¶æ‰‹åŠ¨åˆå¹¶ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
git pull origin knowledge --no-commit
</code></pre>
<p><strong>å…³é”®æç¤º</strong>ï¼š</p>
<ul>
<li><code>git merge --abort</code> åªæœ‰åœ¨åˆå¹¶æœªå®Œæˆæ—¶æ‰æœ‰æ•ˆ</li>
<li>ä½¿ç”¨ <code>git reflog</code> å¯ä»¥æ‰¾åˆ°ç¡®åˆ‡çš„å›é€€ç‚¹</li>
<li><code>--no-commit</code> å‚æ•°è®© <code>git pull</code> åªåˆå¹¶ä¸æäº¤ï¼Œç»™ä½ å®¡æŸ¥çš„æœºä¼š</li>
</ul>
<hr/>
<h3 data-id="heading-6">6. æ–¹æ¡ˆä¸‰ï¼šå®Œå…¨é‡ç½®åˆ°è¿œç¨‹çŠ¶æ€</h3>
<p>å¦‚æœä½ æƒ³å½»åº•ä¸¢å¼ƒæœ¬åœ°æ‰€æœ‰æ›´æ”¹ï¼Œå®Œå…¨é‡‡ç”¨è¿œç¨‹ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ”¾å¼ƒå½“å‰åˆå¹¶ï¼ˆå¦‚æœå¤„äºåˆå¹¶ä¸­ï¼‰</span>
git merge --abort

<span class="hljs-comment"># 2. å¤‡ä»½æœ¬åœ°æ›´æ”¹ï¼ˆå®‰å…¨æªæ–½ï¼‰</span>
git stash

<span class="hljs-comment"># 3. å¼ºåˆ¶é‡ç½®åˆ°è¿œç¨‹åˆ†æ”¯çŠ¶æ€</span>
git fetch origin
git reset --hard origin/knowledge

<span class="hljs-comment"># 4. æ¸…ç†æœªè·Ÿè¸ªæ–‡ä»¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
git clean -fd
</code></pre>
<p><strong>è­¦å‘Šä¸å»ºè®®</strong>ï¼š</p>
<ul>
<li><code>git reset --hard</code> ä¼š<strong>æ°¸ä¹…åˆ é™¤</strong>æ‰€æœ‰æœªæäº¤çš„æ›´æ”¹</li>
<li><code>git clean -fd</code> ä¼šåˆ é™¤æ‰€æœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶å’Œç›®å½•</li>
<li>åœ¨æ‰§è¡Œå‰ï¼Œå»ºè®®å…ˆç”¨ <code>git stash</code> å¤‡ä»½å½“å‰çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-7">7. å½“ä»£ç å·²æ¨é€è‡³è¿œç¨‹çš„ç‰¹æ®Šå¤„ç†</h3>
<p>å¦‚æœä½ å·²ç»å°†ä¸æ»¡æ„çš„åˆå¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œéœ€è¦é¢å¤–æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æœ¬åœ°å›é€€åˆ°ç›®æ ‡ç‰ˆæœ¬</span>
git reset --hard &lt;ç›®æ ‡commit-hash&gt;

<span class="hljs-comment"># 2. å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹ï¼ˆè¦†ç›–å†å²ï¼‰</span>
git push --force origin knowledge
</code></pre>
<p><strong>é‡è¦è­¦å‘Š</strong>ï¼š</p>
<ul>
<li><code>--force</code> æ¨é€ä¼šè¦†ç›–è¿œç¨‹å†å²ï¼Œå¯èƒ½å½±å“å…¶ä»–åä½œè€…</li>
<li>ä»…é™ä¸ªäººåˆ†æ”¯æˆ–å·²ä¸å›¢é˜Ÿæ²Ÿé€šåä½¿ç”¨</li>
<li>è€ƒè™‘ä½¿ç”¨ <code>--force-with-lease</code>ï¼ˆæ›´å®‰å…¨ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä»–äººæ¨é€ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">8. æœ€ä½³å®è·µä¸é¢„é˜²æªæ–½</h3>
<p>ä¸ºäº†é¿å…é¢‘ç¹é™·å…¥åˆå¹¶å›é€€çš„å›°å¢ƒï¼Œå»ºè®®éµå¾ªä»¥ä¸‹å®è·µï¼š</p>
<ol>
<li>
<p><strong>å…»æˆè‰¯å¥½ä¹ æƒ¯</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>git pull</code> å‰å…ˆ <code>git fetch</code> æŸ¥çœ‹è¿œç¨‹å˜åŒ–</li>
<li>ä½¿ç”¨ <code>git pull --no-commit</code> ç»™è‡ªå·±ç•™å‡ºå®¡æŸ¥ç©ºé—´</li>
<li>é¢‘ç¹æäº¤ï¼Œå°æ­¥å¿«è·‘ï¼Œå‡å°‘å¤§èŒƒå›´åˆå¹¶å†²çª</li>
</ul>
</li>
<li>
<p><strong>é…ç½®åˆé€‚çš„å·¥ä½œæµ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® pull ç­–ç•¥ä¸º rebase è€Œé merge</span>
git config pull.rebase <span class="hljs-literal">true</span>

<span class="hljs-comment"># æˆ–è€…æ¯æ¬¡æ‰‹åŠ¨ä½¿ç”¨</span>
git pull --rebase origin knowledge
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨å¯è§†åŒ–å·¥å…·</strong>ï¼š</p>
<ul>
<li>GitKrakenã€Sourcetree ç­‰å·¥å…·æä¾›ç›´è§‚çš„åˆå¹¶ç•Œé¢</li>
<li>VS Codeã€IntelliJ IDEA ç­‰ç¼–è¾‘å™¨çš„ Git é›†æˆä¹Ÿå¾ˆå¼ºå¤§</li>
</ul>
</li>
<li>
<p><strong>å»ºç«‹å›¢é˜Ÿåè®®</strong>ï¼š</p>
<ul>
<li>æ˜ç¡®åˆ†æ”¯åˆå¹¶è§„èŒƒ</li>
<li>çº¦å®šä½•æ—¶å¯ä»¥å¼ºåˆ¶æ¨é€</li>
<li>å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-9">9. æ€»ç»“</h3>
<p>Git åˆå¹¶åçš„å›é€€æ“ä½œæ˜¯ç‰ˆæœ¬æ§åˆ¶ä¸­çš„é«˜çº§æŠ€èƒ½ï¼Œç†è§£ä¸åŒæ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯è‡³å…³é‡è¦ï¼š</p>
<ul>
<li><strong>è½»é‡çº§è°ƒæ•´</strong>ï¼šä½¿ç”¨ <code>git merge --abort</code> å’Œ <code>git reset --soft</code></li>
<li><strong>å®Œå…¨é‡æ–°å¼€å§‹</strong>ï¼šä½¿ç”¨ <code>git reset --hard</code> å›åˆ°ç‰¹å®šèŠ‚ç‚¹</li>
<li><strong>å›¢é˜Ÿåä½œæ—¶</strong>ï¼šä¼˜å…ˆå®Œæˆåˆå¹¶ï¼Œå¿…è¦æ—¶æ²Ÿé€šåå¼ºåˆ¶æ¨é€</li>
</ul>
<p>è®°ä½ï¼ŒGit çš„æ ¸å¿ƒç†å¿µæ˜¯â€œä¸€åˆ‡çš†å¯æ¢å¤â€ã€‚å³ä½¿æ˜¯ <code>reset --hard</code> åˆ é™¤çš„å†…å®¹ï¼Œåªè¦æ›¾ç»æäº¤è¿‡ï¼Œé€šå¸¸éƒ½èƒ½ä» reflog ä¸­æ‰¾å›ã€‚å¤§èƒ†å°è¯•ï¼Œè°¨æ…æ“ä½œï¼Œç‰ˆæœ¬æ§åˆ¶çš„çµæ´»æ€§æ­£æ˜¯ Git å¼ºå¤§çš„ä½“ç°ã€‚</p>
<p><strong>æœ€å¥½çš„â€œåæ‚”è¯â€å…¶å®æ˜¯é¢„é˜²</strong>ã€‚é€šè¿‡è‰¯å¥½çš„åä½œä¹ æƒ¯å’Œé€‚å½“çš„å·¥å…·ä½¿ç”¨ï¼Œä½ å¯ä»¥å¤§å¤§å‡å°‘éœ€è¦â€œå›é€€â€çš„åœºæ™¯ï¼Œè®©å›¢é˜Ÿåä½œæ›´åŠ æµç•…é«˜æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] Channelâ€”â€”é©±åŠ¨Nodeæ‰§è¡Œçš„åŸåŠ›]]></title>    <link>https://juejin.cn/post/7603314759757922323</link>    <guid>https://juejin.cn/post/7603314759757922323</guid>    <pubDate>2026-02-06T06:54:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603314759757922323" data-draft-id="7603383059150405674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] Channelâ€”â€”é©±åŠ¨Nodeæ‰§è¡Œçš„åŸåŠ›"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2026-02-06T06:54:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JaydenAI"/> <meta itemprop="url" content="https://juejin.cn/user/3001011641261209"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [æ‹†è§£LangChainæ‰§è¡Œå¼•æ“] Channelâ€”â€”é©±åŠ¨Nodeæ‰§è¡Œçš„åŸåŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3001011641261209/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JaydenAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T06:54:49.000Z" title="Fri Feb 06 2026 06:54:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Pregelç”±Nodeå’ŒChannelè¿™ä¸¤ä¸ªæ ¸å¿ƒéƒ¨ä»¶ç»„æˆï¼ŒChannelä¸ä»…ç»´æŠ¤äº†æ•´ä¸ªå›¾çš„çŠ¶æ€ï¼Œè¿˜æ˜¯é©±åŠ¨Nodeæ‰§è¡Œçš„ â€œåŸåŠ›â€ ã€‚åœ¨å‰é¢æ¼”ç¤ºçš„ä¸€ç³»åˆ—å®ä¾‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†ä¸‰ç§Channelç±»å‹ï¼ŒåŒ…æ‹¬é¢‘ç¹ä½¿ç”¨çš„LastValueï¼Œèƒ½å¤Ÿå°†æ‰€æœ‰æ·»åŠ çš„å€¼ä¿ç•™ä¸‹æ¥çš„BinaryOperatorAggregateï¼Œä»¥åŠå¸®åŠ©æˆ‘ä»¬è½»æ¾è§£å†³å¤šNodeä¾èµ–é—®é¢˜çš„NamedBarrierValueã€‚ä¸ºä»€ä¹ˆChannelæœ‰è¿™ä¹ˆå¤šç±»å‹ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ä½•ç§åœºæ™¯ä¸­ä½¿ç”¨ä½•ç§ç±»å‹çš„Channelï¼Œè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå°±æ— æ³•å›é¿ï¼ˆBSPï¼šBulk Synchronous Parallelï¼‰è¿™ä¸€ä¸ªç®—æ³•æ¨¡å¼ï¼Œæ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œæ•´ä¸ªPregelå°±æ˜¯å›´ç»•BSPè¿›è¡Œè®¾è®¡çš„ã€‚</p>
<h2 data-id="heading-0">1. BSP</h2>
<p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªAgentåˆ©ç”¨ä½œä¸ºå†³ç­–è€…çš„LLMå’Œä¸€ç³»åˆ—ä½œä¸ºæ‰§è¡Œè€…çš„ToolååŠ©å®ŒæˆæŒ‡å®šçš„ä»»åŠ¡ã€‚LLMï¼ˆè¿™é‡Œä¸»è¦æŒ‡åŸºäºæ–‡æœ¬ç”Ÿæˆçš„GPTï¼‰ç”±äºå…¶é€Tokençš„ç”Ÿæˆæœºåˆ¶ï¼ŒåŠ ä¸Šå„ç§å·¥å…·å¯èƒ½æ¶‰åŠåˆ°å¤§æ•°æ®çš„å¤„ç†ã€IOè¯»å†™ã€è·¨ç½‘ç»œçš„äº¤äº’ç­‰è€—æ—¶æ“ä½œï¼Œæ‰€ä»¥è¦ç¡®ä¿Agentèƒ½å¤Ÿæä¾›å¯æ¥å—çš„æ€§èƒ½ä¿éšœï¼Œå¹¶è¡Œè®¡ç®—æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆã€‚è€ƒè™‘åˆ°å¯¹å¹¶è¡Œè®¡ç®—çš„ â€œé’¢éœ€â€ ï¼Œé‚£ä¹ˆPregelä¸ºä»€ä¹ˆé€‰æ‹©Actoræ¨¡å‹æ¥å®ç°ä¹Ÿå°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå› ä¸ºé«˜å¹¶å‘æ­£å¼Actoræ¨¡å‹æœ€æ“…é•¿çš„é¢†åŸŸã€‚BSPä¸­çš„BPï¼ˆBulk Parallelï¼‰å¯ä»¥ç†è§£ä¸ºPregelå¤šä¸ªNodeåœ¨åŒä¸€æ—¶æ®µçš„å¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆSï¼ˆSynchronousï¼‰æœ‰ä½œä½•ç†è§£å‘¢ï¼Ÿ</p>
<p>åœ¨å¾ˆå¤šå…¸å‹çš„Actoræ¨¡å‹é‡Œï¼ŒActorå¤§å¤šæ˜¯æœ‰çŠ¶æ€çš„ï¼Œä½†æ˜¯ä½œä¸ºPregelçš„Actorï¼Œå…¶Nodeå¯¹è±¡æ˜¯å®Œå…¨æ— çŠ¶æ€çš„ã€‚å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œä»–ä»æ³¨å†Œçš„Channelè¯»å–æ•°æ®ï¼Œæ‰§è¡Œç»“æœä»¥æœ€ç»ˆè¾“å‡ºåˆ°ç›¸åº”çš„Channelã€‚æˆ‘ä»¬çŸ¥é“é«˜å¹¶å‘ã€ä½å»¶æ—¶å’Œæ•°æ®ä¸€è‡´æ€§æ˜¯ä¸‰ä¸ªæ°¸è¿œä¸å¯èƒ½åŒæ—¶å…¼é¡¾çš„æŒ‡æ ‡ï¼Œå¦‚æœè¦å…¼é¡¾å…¶ä¸­ä¸¤ä¸ªï¼Œå°±ä¸å¾—ä¸ç‰ºç‰²ç¬¬ä¸‰ä¸ªã€‚å¤§éƒ¨åˆ†ç³»ç»Ÿçš„æ¶æ„ä¸è®¾è®¡éƒ½æ˜¯åœ¨å¯¹ä¸‰è€…ä½œä¸€ä¸ªå¹³è¡¡ï¼ŒPregeläº¦æ˜¯å¦‚æ­¤ã€‚</p>
<p>ç”±äºå¤šä¸ªå¹¶è¡Œæ‰§è¡Œçš„Nodeä¼šæ¶‰åŠé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼ˆChannelï¼‰çš„è¯»å†™ï¼Œå¦‚æœè¦ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå°±ä¸å¾—ä¸æ–½åŠ ç›¸åº”çš„åŒæ­¥æœºåˆ¶ï¼Œæ¯”å¦‚å„ç§ä¸åŒç±»å‹çš„é”ã€‚ä¸è®ºå¤šè½»é‡çº§çš„é”ï¼Œå®ƒä»¬éƒ½æ˜¯é«˜å¹¶å‘æœ€å¼ºçš„æ€æ‰‹ï¼Œé‚£ä¹ˆèƒ½å¦å®ç°æ— é”çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼ŸBSPå°±æ˜¯ç­”æ¡ˆï¼Œè€Œè¿™å…¶ä¸­åˆæ¶‰åŠä¸€ä¸ªåä¸ºSuperstepï¼ˆSuper Stepï¼Œç”±äºè¿™ä¸€ä¸ªæ¦‚å¿µä¼šé¢‘ç¹æåŠï¼Œåç»­å†…å®¹ç›´æ¥å°†Superstepè§†ä¸ºä¸€ä¸ªä¸“æœ‰åè¯æ¥æŒ‡ä»£è¿™ä¸€ä¸ªæ¦‚å¿µï¼‰çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºæ•´ä¸ªå›¾æœ‰æ¡ä¸ç´Šå‘å‰æ¨è¿›çš„ä¸€ä¸ªå•æ­¥ï¼Œæ˜¯Pregelæ‰§è¡Œå¼•æ“çš„ä¸€ä¸ªè„‰å†²ï¼Œæ˜¯æ‰€æœ‰Nodeæ‰§è¡Œçš„â€œèŠ‚æ‹â€ï¼Œæ¯ä¸ªSuperstepå…·æœ‰ä¸€ä¸ªè‡ªå¢çš„åºå·ã€‚</p>
<p>åœ¨æ¯ä¸ªSuperstepç»“æŸä¹‹åï¼Œæ¯ä¸ªChannelçš„çŠ¶æ€è¢«å›ºå®šä¸‹æ¥ï¼Œå¼•æ“æ ¹æ®Nodeé’ˆå¯¹Channelçš„è®¢é˜…å’ŒChannelåœ¨å½“å‰Superstepå†…çš„æ›´æ–°æƒ…å†µç¡®å®šåœ¨ä¸‹ä¸€Superstepéœ€è¦æ‰§è¡Œçš„Nodeï¼Œå¹¶ä¸ºå®ƒä»¬åˆ›å»ºåˆ›å»ºç›¸åº”çš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡åœ¨æ–°çš„Superstepå¼€å§‹æ˜¯å¹¶å‘æ‰§è¡Œï¼Œè€Œä¸”å®ƒä»¬åªèƒ½è®¿é—®å‰ä¸€è¶…æ­¥å›ºåŒ–ä¸‹æ¥çš„å€¼ã€‚è¿™ä¸€ç­–ç•¥ç¡®ä¿è¾“å…¥çš„ä¸€è‡´æ€§ï¼Œä¿è¯æ‰€æœ‰å¹¶å‘æ‰§è¡Œçš„Nodeæ‰€è§çš„çŠ¶æ€éƒ½æ˜¯ä¸€æ ·çš„ï¼›å¦ä¸€æ–¹é¢Channelåœ¨Superstepå†…ä¿æŒåªè¯»çŠ¶æ€å°±å®Œå…¨ä¸ç”¨è€ƒè™‘å¹¶å‘è„è¯»çš„é—®é¢˜äº†ã€‚</p>
<p>å¹¶å‘æ‰§è¡Œçš„Nodeä¸å…è®¸å¯¹ä»»ä½•Channelå®æ–½å†™å…¥ï¼Œå®ƒåªèƒ½å°†å†™å…¥è¯‰æ±‚æäº¤ç»™æ‰§è¡Œå¼•æ“ï¼Œåè€…æŒ‰ç…§æäº¤çš„é¡ºåºå­˜å‚¨ä¸‹æ¥ã€‚è®©æ‰€æœ‰ä»»åŠ¡æˆåŠŸæ‰§è¡Œåï¼ŒSuperstepè¿›å…¥ä¸€ä¸ªåŒæ­¥å±éšœï¼Œæ‰§è¡Œå¼•æ“å°†å¯¹æ”¶é›†åˆ°çš„Channelå†™å…¥è¯·æ±‚æŒ‰ç…§é¡ºåºç»Ÿä¸€åº”ç”¨ï¼Œä½¿æ‰€æœ‰Channelæœ€ç»ˆèƒ½å‡†ç¡®åœ°ä½“ç°Superstepç»“æŸåçš„çŠ¶æ€ã€‚ç„¶åå†ç¡®å®šä¸‹ä¸€Superstepçš„ä»»åŠ¡ï¼Œå¦‚æ­¤åå¤ï¼Œå‘¨è€Œå¤å§‹ã€‚</p>
<p>ç¬¬ä¸€ä¸ªSuperstepçš„åºå·æ˜¯ä»-1å¼€å§‹è®¡æ•°çš„ï¼Œè¿™ä¸ªæ‰€è°“çš„â€œåˆ›ä¸–è¶…æ­¥â€å¼€å§‹äºé’ˆå¯¹Pregelå…‘ç°çš„å¸¸è§„è°ƒç”¨ï¼Œå¼•æ“åˆ©ç”¨è¿™ä¸€Superstepå°†åŸå§‹è¾“å…¥å†™å…¥å¯¹åº”çš„Channelï¼Œå¹¶è®¡ç®—éœ€è¦åœ¨Superstep 0ä¸­æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ‰€ä»¥Nodeçš„é¦–æ¬¡æ‰§è¡Œæ˜¯åœ¨Superstep 0ä¸­æ‰§è¡Œçš„ã€‚</p>
<p>ç”±äºAgentå¯ä»¥æ¶‰åŠä¸€ä¸ªéœ€è¦é•¿æ—¶é—´æ‰§è¡Œçš„å¤„ç†æµç¨‹ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹è¿˜å¯èƒ½å‡ºç°ä¸­æ–­ï¼Œæ­¤ä¸­æ–­å¯èƒ½æ˜¯ç”±äºç³»ç»Ÿæ•…éšœï¼Œä¹Ÿå¯èƒ½æ˜¯éœ€è¦è®¤ä¸ºä»‹å…¥å¯¼è‡´ï¼Œæ‰€ä»¥Agentçš„çŠ¶æ€ä¸å¯èƒ½å¸¸é©»å†…å®¹ã€‚è€Œä¸”Agentè¿˜æä¾›äº† â€œæ—¶é—´æ—…è¡Œâ€ çš„åŠŸèƒ½ï¼Œè¿™ä¸€ä¸ªåŠŸèƒ½ä½¿æˆ‘ä»¬ä»è¿‡å»çš„æŸä¸ªæ—¶é—´ç‚¹å¼€å¯ä¸€ä¸ªæ–°çš„åˆ†æ”¯æ¥æ‰§è¡Œæµç¨‹ï¼Œè¿™ç›¸å½“äºå¼€å¯ä¸€ä¸ª â€œå¹³è¡Œä¸–ç•Œâ€ ã€‚æ‰€æœ‰çš„è¿™ä¸€åˆ‡éƒ½ç¦»ä¸å¼€é’ˆå¯¹çŠ¶æ€çš„æŒä¹…åŒ–ï¼Œè¿™æ˜¯æ•´ä¸ªPregelæœ€å¤æ‚çš„éƒ¨åˆ†ã€‚</p>
<p>æˆ‘ä»¬å°†åœ¨åç»­å†…å®¹è¯¦ç»†ä»‹ç»Pregelé’ˆå¯¹çŠ¶æ€æŒä¹…åŒ–çš„è®¾è®¡ä¸å®ç°ï¼Œè¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªæ¦‚æ‹¬æ€§ä»‹ç»ã€‚å½“Superstepè¿›å…¥åŒæ­¥å±éšœä¹‹åï¼ŒæŒä¹…åŒ–å‘ç”Ÿåœ¨ â€œè§£æå¾…æ‰§è¡Œä»»åŠ¡â€ ä¹‹åï¼Œæ­¤æ—¶å¼•æ“ä¼šé’ˆå¯¹å½“å‰Channelçš„çŠ¶æ€åˆ›å»ºä¸€ä»½åä¸ºCheckpointå¿«ç…§å¹¶åˆ©ç”¨æ³¨å†Œçš„Checkpointerè®°å½•ä¸‹æ¥ã€‚</p>
<p>æ¯ä¸ªè¢«è®°å½•çš„Checkpointä¸ä»…å…·æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œè¿˜ç™»è®°äº†å½“å‰çš„Superstepåºå·ï¼Œè¿˜æœ‰ä¸€ä¸ªèƒ½å¤Ÿç²¾ç¡®æè¿°å½“å‰Agentå¯¹åº”çš„å›¾åœ¨æ•´ä¸ªæ‰§è¡Œå›¾ä¸­çš„ä½ç½®ï¼ˆå¤šAgentåº”ç”¨ä¸­ï¼Œä¸€ä¸ªAgentå¯ä½œä¸º â€œå­Agentâ€ è¢«è°ƒç”¨ï¼Œå¯¹åº”çš„å›¾å°±æ˜¯æ•´å¼ æ‰§è¡Œå›¾çš„ â€œå­å›¾â€ ï¼‰å’Œè°ƒç”¨é¡ºåºçš„ â€œå‘½åç©ºé—´â€ ã€‚å®Œæ•´çš„æ ‡è¯†ä½“ç³»çš„å”¯ä¸€å·¦å³å°±æ˜¯ï¼Œåœ¨Agentä»æŸä¸ªç‚¹æ¢å¤æ‰§è¡Œçš„æ—¶å€™ï¼Œç›¸åº”çš„Checkpointerèƒ½å¤Ÿå‡†ç¡®åœ°æå–å¯¹åº”çš„Checkpointæ¥ â€œæ¢å¤ç°åœºâ€ ã€‚ä¸‹å›¾åŸºæœ¬åæ˜ äº†Pregelé’ˆå¯¹å•ä¸€Superstepçš„æ‰§è¡Œæµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f34dbd6f05204b2888c96e28201f8837~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF5ZGVuQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770965689&amp;x-signature=%2B3lutbYKYEa6sX29pmi00Xmx7wE%3D" alt="image.png" loading="lazy"/>
ä½†æ˜¯å¾ˆå¤šæ–‡æ¡£ä¸­ä½ çœ‹åˆ°ä»–ä»¬å°†Superstepåˆ’åˆ†ä¸ºâ€œè®¡åˆ’â€ã€â€œæ‰§è¡Œâ€ã€â€œæ›´æ–°â€å’Œâ€œæŒä¹…åŒ–â€ï¼Œçœ‹èµ·æ¥åˆç†ï¼Œä½†æ˜¯å’ŒçœŸæ­£çš„æ‰§è¡Œæµç¨‹æ˜¯æœ‰å‡ºå…¥çš„ã€‚è®¡åˆ’é˜¶æ®µå¾—åˆ°å…¶å®ä¸æ˜¯å½“å‰Superstepå¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œè€Œæ˜¯ä¸‹ä¸€Superstepå¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå› ä¸ºè¿™æœ‰è¿™æ ·é‡‡ç”¨è§£é‡Šä¸ºä»€ä¹ˆé’ˆå¯¹Superstep -1çš„Checkpointä¼šåŒ…å«ä»»åŠ¡åˆ—è¡¨ï¼Œè¿™äº›ä»»åŠ¡åˆ†æ˜æ˜¯åœ¨Superstep 0ä¸­æ‰ä¼šè¢«æ‰§è¡Œã€‚å®é™…ä¸ŠCheckpointä¸­çš„ä»»åŠ¡åˆ—è¡¨åæ˜ çš„éƒ½æ˜¯ä¸‹ä¸€Superstepå¾…æ‰§è¡Œçš„æ“ä½œï¼Œæ‰€ä»¥å”¯ç‹¬æœ€åä¸€ä¸ªCheckpointæ‰ä¸ä¼šå­˜åœ¨ä»»åŠ¡åˆ—è¡¨ã€‚è¡¨ç¤ºçŠ¶æ€å¿«ç…§çš„StateSnapshotå°†è¿”å›ä»»åŠ¡åç§°åˆ—è¡¨çš„å­—æ®µå‘½åä¸ºnextï¼Œæˆ‘æƒ³ä¹Ÿåº”è¯¥æ˜¯å¤„äºè¿™ä¸ªåŸå› ã€‚</p>
<h2 data-id="heading-1">2. BaseChannel</h2>
<p>æ‰€æœ‰çš„Channelç±»å‹éƒ½æ´¾ç”Ÿäºå¦‚ä¸‹è¿™ä¸ªåä¸ºBaseChannelçš„æŠ½è±¡ç±»ï¼Œå®ƒçš„æ³›å‹ç±»å‹å‚æ•°Valueå’ŒUpdateåˆ†åˆ«è¡¨ç¤ºå­˜å‚¨ç±»å‹ã€æ›´æ–°æ—¶æä¾›çš„å€¼ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å±æ€§ValueTypeå’ŒUpdateTypeè·å–å‰ä¸¤ç§ç±»å‹ã€‚æŠ½è±¡æ–¹æ³•getå’Œupdateæä¾›é’ˆå¯¹è¿™ä¸¤ä¸ªç±»å‹çš„è¯»å†™,updateæ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦å…·æœ‰å®è´¨æ€§çš„æ›´æ–°ï¼Œå¼•æ“ç”±æ­¤åˆ¤æ–­Channelçš„å€¼æ˜¯å¦å‘ç”Ÿæ”¹å˜ã€‚å¦ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°Checkpointä¸æŒä¹…åŒ–æœ‰å…³ï¼Œå¼•æ“åœ¨æ¢å¤æ‰§è¡Œæ—¶ä¼šä»æŒä¹…åŒ–çš„å¿«ç…§ä¸­æå–å¯¹åº”çš„æ•°æ®å¹¶å°†å…¶è½¬æ¢æˆæ­¤å¯¹è±¡ï¼Œæœ€ç»ˆè°ƒç”¨from_checkpointæ–¹æ³•æ¢å¤Channelçš„çŠ¶æ€ï¼Œåœ¨è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œå¼•æ“ä¼šè°ƒç”¨checkpointæ–¹æ³•å°†è‡ªèº«çš„çŠ¶æ€è½¬æ¢æˆè¯¥ç±»å‹ï¼Œå¹¶æäº¤ç»™Checkpointerå®æ–½æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python">Value = TypeVar(<span class="hljs-string">"Value"</span>)
Update = TypeVar(<span class="hljs-string">"Update"</span>)
Checkpoint = TypeVar(<span class="hljs-string">"Checkpoint"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseChannel</span>(<span class="hljs-type">Generic</span>[Value, Update, Checkpoint], ABC):
    __slots__ = (<span class="hljs-string">"key"</span>, <span class="hljs-string">"typ"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-type">Any</span>, key: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-literal">None</span>

<span class="hljs-meta">    @property</span>
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ValueType</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Any</span>
<span class="hljs-meta">    @property</span>
<span class="hljs-meta">    @abstractmethod</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">UpdateType</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Any</span>
    
<span class="hljs-meta">    @abstractmethod</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>) -&gt; Value
<span class="hljs-meta">    @abstractmethod</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Update]</span>) -&gt; <span class="hljs-built_in">bool</span>

<span class="hljs-meta">    @abstractmethod</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">from_checkpoint</span>(<span class="hljs-params">self, checkpoint: Checkpoint | <span class="hljs-type">Any</span></span>) -&gt; Self
<span class="hljs-keyword">def</span> <span class="hljs-title function_">checkpoint</span>(<span class="hljs-params">self</span>) -&gt; Checkpoint | <span class="hljs-type">Any</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">self</span>) -&gt; Self    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">consume</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">finish</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>	
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_available</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span> 
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒBaseChannelè¿˜å®šä¹‰äº†å…¶ä»–å‡ ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­copyæ–¹æ³•ä¼šæ ¹æ®è‡ªèº«çŠ¶æ€åˆ›å»ºä¸€ä¸ªæ–°Channelå¯¹è±¡ï¼Œé»˜è®¤å®ç°ä¼šå…ˆè°ƒç”¨checkpointæ–¹æ³•ï¼Œç„¶åå°†è¿”å›å€¼ä½œä¸ºå‚æ•°è°ƒç”¨from_checkpointæ–¹æ³•ï¼Œåè€…è°ƒç”¨çš„ç»“æœå°±æ˜¯copyæ–¹æ³•çš„è¿”å›å€¼ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ·±æ‹·è´ã€‚åœ¨æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œè§¦å‘å®ƒä»¬çš„æ‰€æœ‰Channelçš„consumeæ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼ŒChannelå¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºä¼šåšä¸€äº›æ¸…é™¤å·¥ä½œä»¥é˜²æ­¢ç›¸åŒçš„æ•°æ®è¢«é‡å¤æ¶ˆè´¹ã€‚consumeæ–¹æ³•çš„è¿”å›å€¼æ—¨åœ¨å‘Šè¯‰ å¼•æ“è¯¥é€šé“çš„å†…éƒ¨æ•°æ®æ˜¯å¦å·²ç»å‘ç”Ÿäº†å®è´¨æ€§æ”¹å˜ï¼ˆè¢«æ¶ˆè´¹æˆ–è€…æ¸…ç©ºï¼‰ã€‚å¦‚æœè¿”å›Trueï¼Œæ„å‘³ç€Channelçš„çŠ¶æ€å·²è¢«æ›´æ–°ï¼Œå…¶ç‰ˆæœ¬ä¼šè¢«æå‡ã€‚</p>
<p>Channelçš„å€¼å¹¶éåœ¨æ¯ä¸ªæ—¶é—´ç‚¹éƒ½æ˜¯å¯ç”¨çš„ï¼Œæ¯”å¦‚å¯¹äºæŸäº›Channelï¼Œåœ¨Superstep Nä¸­å†™å…¥çš„å€¼åªèƒ½åœ¨Superstep N+1ä¸­å¯ç”¨ï¼ŒChannelçš„å¯ç”¨æ€§ç”±is_availableæ–¹æ³•å†³å®šã€‚finishæ˜¯ä¸€ä¸ªâ€œé’©å­ï¼ˆHookï¼‰â€æ–¹æ³•ï¼Œå¼•æ“ä¼šåœ¨æ¯ä¸ªSuperstepå®Œæˆæ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯¹åº”çš„Channelå¯ç”¨åˆ©ç”¨æ­¤æ–¹æ³•åšä¸€äº›ç±»ä¼¼äºâ€œå¯ç”¨æ€§æ§åˆ¶â€çš„æ“ä½œã€‚æŒ‡çš„ä¸€ä½“çš„æ˜¯ï¼Œåªæœ‰åœ¨å½“å‰Superstepä¸­è¢«æ›´æ–°çš„ä¸”è¢«Nodeè®¢é˜…çš„Channelï¼Œå®ƒä»¬çš„finishæ–¹æ³•æ‰ä¼šè¢«è°ƒç”¨ã€‚</p>
<h2 data-id="heading-2">3. Channel</h2>
<p>Pregelæä¾›äº†è‹¥å¹²é¢„å®šä¹‰çš„Channelç±»å‹ï¼Œå®ƒä»¬çš„è¯»å†™è¡Œä¸ºä»¥åŠå¯ç”¨æ€§ä¸Šéƒ½æœ‰å·®å¼‚ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ•°æ®æˆ–è€…çŠ¶æ€çš„ç‰¹æ€§é€‰æ‹©é€‚åˆçš„Channelç±»å‹ã€‚</p>
<h2 data-id="heading-3">3.1	LastValue</h2>
<p>LastValueåªå­˜å‚¨å•å€¼ï¼Œå¹¶ä¸”é‡‡ç”¨åæ¥å±…ä¸Šçš„ç­–ç•¥ï¼Œå­˜å‚¨æœ€åä¸€ä¸ªæäº¤æ›´æ–°çš„å€¼ã€‚ä»å¦‚ä¸‹æä¾›çš„å…·ä½“å®ç°å¯ç”¨çœ‹å‡ºï¼ŒLastValueçš„å€¼ç±»å‹ã€æ›´æ–°ç±»å‹å’ŒCheckpointç±»å‹ä¸‰è€…åˆä¸€ï¼Œæ‰€ä»¥åªé€šè¿‡å­—æ®µvalueç»´æŠ¤å”¯ä¸€çš„å€¼ã€‚getã€checkpointå’Œupdateæ–¹æ³•å®ç°äº†é’ˆå¯¹è¯¥å­—æ®µçš„è¯»å†™ï¼Œå¦‚æœæ²¡æœ‰å¯¹valueå­—æ®µæ˜¾å¼èµ‹å€¼ï¼Œis_availableæ–¹æ³•ä¼šè¿”å›Falseï¼Œgetæ–¹æ³•ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚copyå’Œfrom_checkpointæ–¹æ³•è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„LastValueå¯¹è±¡ï¼Œæä¾›çš„å€¼ä¼šä¸ºå…¶valueå­—æ®µèµ‹å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LastValue</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, Value]):
    __slots__ = (<span class="hljs-string">"value"</span>,)
    value: Value | <span class="hljs-type">Any</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-type">Any</span>, key: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ, key)
        self.value = MISSING

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, value: <span class="hljs-built_in">object</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">isinstance</span>(value, LastValue)

<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ValueType</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">type</span>[Value]:
        <span class="hljs-keyword">return</span> self.typ

<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">UpdateType</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">type</span>[Value]:
        <span class="hljs-keyword">return</span> self.typ

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">self</span>) -&gt; Self:
        empty = self.__class__(self.typ, self.key)
        empty.value = self.value
        <span class="hljs-keyword">return</span> empty

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_checkpoint</span>(<span class="hljs-params">self, checkpoint: Value</span>) -&gt; Self:
        empty = self.__class__(self.typ, self.key)
        <span class="hljs-keyword">if</span> checkpoint <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING:
            empty.value = checkpoint
        <span class="hljs-keyword">return</span> empty

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) != <span class="hljs-number">1</span>:
            msg = create_error_message(
                message=<span class="hljs-string">f"At key '<span class="hljs-subst">{self.key}</span>': Can receive only one value per step. Use an Annotated key to handle multiple values."</span>,
                error_code=ErrorCode.INVALID_CONCURRENT_GRAPH_UPDATE,
            )
            <span class="hljs-keyword">raise</span> InvalidUpdateError(msg)

        self.value = values[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>) -&gt; Value:
        <span class="hljs-keyword">if</span> self.value <span class="hljs-keyword">is</span> MISSING:
            <span class="hljs-keyword">raise</span> EmptyChannelError()
        <span class="hljs-keyword">return</span> self.value

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_available</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">return</span> self.value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkpoint</span>(<span class="hljs-params">self</span>) -&gt; Value:
        <span class="hljs-keyword">return</span> self.value

MISSING = <span class="hljs-built_in">object</span>()
</code></pre>
<p>æˆ‘ä»¬è¯´LastValueè¿™ä¸ªä½¿ç”¨é¢‘ç‡æœ€é«˜çš„Channelé’ˆå¯¹å¤šä¸ªæ›´æ–°é‡‡ç”¨â€œåæ¥å±…ä¸Šâ€çš„ç­–ç•¥ï¼Œåªå­˜å‚¨æœ€åä¸€æ¬¡æ›´æ–°çš„æä¾›çš„å€¼ï¼Œä½†è¿™é‡Œæ‰€è°“çš„å¤šæ¬¡æ›´æ–°åªå¾—æ—¶è·¨è¶Šä¸åŒSuperstepé’ˆå¯¹Channelå¾—å¤šæ¬¡å†™å…¥ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸æ”¯æŒåœ¨å•ä¸ªSuperstepé’ˆå¯¹å®ƒå¾—å¤šæ¬¡æ›´æ–°ï¼Œupdateæ–¹æ³•å¾—å®ç°å·²ç»ä½“ç°äº†è¿™ä¸€ç‚¹ã€‚åœ¨å¦‚ä¸‹è¿™ä¸ªæ¼”ç¤ºç¨‹åºä¸­ï¼Œæˆ‘ä»¬è®©ä¸‰ä¸ªå¹¶è¡Œæ‰§è¡Œå¾—Nodeåœ¨åŒä¸€Superstepå†…æ›´æ–°å‘½åä¸ºâ€œoutputâ€çš„è¿™ä¸ªLastValueç±»å‹çš„Channelï¼Œç»™å®šçš„æ–­è¨€è¯å®äº†updateæ–¹æ³•ä¸­æŠ›å‡ºInvalidUpdateErrorå¼‚å¸¸çš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> langgraph.errors <span class="hljs-keyword">import</span> InvalidUpdateError

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">node_name:<span class="hljs-built_in">str</span></span>)-&gt;NodeBuilder:
    <span class="hljs-keyword">return</span> (NodeBuilder()
            .subscribe_to(<span class="hljs-string">"start"</span>)
            .do(<span class="hljs-keyword">lambda</span> _:node_name)
            .write_to(<span class="hljs-string">"output"</span>))

app = Pregel(
    nodes={name: build(name) <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>]},
    channels={
        <span class="hljs-string">"start"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"output"</span>: LastValue(<span class="hljs-built_in">str</span>),
    },
    input_channels=[<span class="hljs-string">"start"</span>],
    output_channels=[<span class="hljs-string">"output"</span>],
)

<span class="hljs-keyword">try</span>:
    app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>})
    <span class="hljs-keyword">assert</span> <span class="hljs-literal">False</span>, <span class="hljs-string">"Expected InvalidUpdateError"</span>
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">assert</span> <span class="hljs-built_in">isinstance</span>(e, InvalidUpdateError)
</code></pre>
<h3 data-id="heading-4">3.2	AnyValue</h3>
<p>AnyValueç±»å‹çš„ChannelåŒæ ·æ˜¯ç”¨äºå­˜å‚¨å•å€¼ï¼Œæ‰€ä»¥å®ƒçš„å®ç°äºLastValueåœ¨å¾ˆå¤šåœ°æ–¹éƒ½ç±»ä¼¼ã€‚ä¸¤è€…ä¹‹é—´æœ€å¤§çš„ä¸åŒåœ¨äºï¼ŒAnyValueæ”¯æŒåŒä¸€ä¸ªSuperstepçš„å¤šæ¬¡æ›´æ–°ï¼Œä½†æ˜¯å°†æ‰€æœ‰çš„æ›´æ–°è§†ä¸ºç­‰æ•ˆï¼Œæ‰€ä»¥å®ƒçš„updateæ–¹æ³•ä¼šä½¿ç”¨æœ€åä¸€ä¸ªæ›´æ–°æä¾›çš„å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnyValue</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, Value]):
    __slots__ = (<span class="hljs-string">"typ"</span>, <span class="hljs-string">"value"</span>)

    value: Value | <span class="hljs-type">Any</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-type">Any</span>, key: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ, key)
        self.value = MISSING
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">if</span> self.value <span class="hljs-keyword">is</span> MISSING:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            <span class="hljs-keyword">else</span>:
                self.value = MISSING
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

        self.value = values[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<p>è™½ç„¶AnyValueé’ˆå¯¹åŒä¸€Superstepå†…çš„å¤šæ¬¡æ›´æ–°ä¼šé€‰æ‹©æœ€åä¸€æ¬¡æ›´æ–°ï¼Œä½†æ˜¯è¿™ä¸ªæ›´æ–°çš„é¡ºåºæ˜¯æ— æ³•é€šè¿‡ç¨‹åºæ§åˆ¶çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å¯¹æ›´æ–°é¡ºåºä½œä»»ä½•å‡è®¾ã€‚å¦‚ä¸‹çš„æ¼”ç¤ºç¨‹åºå¾ˆæ¸…æ™°åœ°è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸Šä¸€ä¸ªä¾‹å­ç›¸ä¼¼çš„æ–¹å¼å¹¶è¡Œæ‰§è¡Œâ€œfooâ€ ã€ â€œbarâ€ å’Œ â€œbazâ€ ä¸‰ä¸ªNodeï¼Œå®ƒä»¬åœ¨å®Œæˆæ‰§è¡Œåä¼šæ›´æ–° â€œoutputâ€ è¿™ä¸ªAnyValueç±»å‹çš„Channelã€‚ç”±äºæˆ‘ä»¬ä¸ºâ€œbarâ€ å’Œ â€œbazâ€ çš„å¤„ç†å‡½æ•°åšäº†1ç§’çš„ä¼‘çœ ï¼ŒæŒ‰ç…§â€œå¸¸ç†â€æ¨æ–­ï¼Œâ€œfooâ€æä¾›çš„æ›´æ–°åº”è¯¥å…ˆè¢«æ”¶é›†å’Œåº”ç”¨ï¼Œä½†äº‹å®å´æœªå¿…å¦‚æ­¤ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,AnyValue
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial

changes: <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>] = []
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendedAnyValue</span>(<span class="hljs-title class_ inherited__">AnyValue</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-built_in">list</span>[<span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">global</span> changes
        changes = values
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().update(values)
    
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">node_name:<span class="hljs-built_in">str</span>, args:<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,<span class="hljs-type">Any</span>]</span>)-&gt;<span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">if</span> node_name != <span class="hljs-string">"foo"</span>:
        time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># Simulate some processing delay</span>
    <span class="hljs-keyword">return</span> node_name

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">node_name:<span class="hljs-built_in">str</span></span>)-&gt;NodeBuilder:
    <span class="hljs-keyword">return</span> (NodeBuilder()
            .subscribe_to(<span class="hljs-string">"start"</span>)
            .do(partial(handle, node_name))
            .write_to(<span class="hljs-string">"output"</span>))

app = Pregel(
    nodes={name: build(name) <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>,<span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>]},
    channels={
        <span class="hljs-string">"start"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"output"</span>: ExtendedAnyValue(<span class="hljs-built_in">str</span>),
    },
    input_channels=[<span class="hljs-string">"start"</span>],
    output_channels=[<span class="hljs-string">"output"</span>], 
)

result =  app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-built_in">print</span>(<span class="hljs-string">"collected changes:"</span>, changes)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"channel value:"</span>, result[<span class="hljs-string">"output"</span>])
</code></pre>
<p>æˆ‘ä»¬é€šè¿‡ç»§æ‰¿AnyValueå®šä¹‰äº†ä¸€ä¸ªExtendedAnyValueç±»å‹ï¼Œé‡å†™çš„updateæ–¹æ³•åœ¨è°ƒç”¨åŸºç±»åŒåæ–¹æ³•å‰ï¼Œæˆ‘ä»¬å°†valueså‚æ•°èµ‹å€¼ç»™å…¨å±€å˜é‡changesã€‚â€œoutputâ€ ç°åœ¨ç›–ç”¨ç°åœ¨è¿™ä¸ªç±»å‹ã€‚åœ¨å®Œæˆæ­£å¸¸è°ƒç”¨åï¼Œæˆ‘ä»¬å°†changeså˜é‡æ‰¿è½½çš„æ›´æ–°æ¬¡åºå’ŒChannelæœ€ç»ˆçš„å€¼æ‰“å°å‡ºæ¥ã€‚ä»å¦‚ä¸‹çš„è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œæœ¬åº”è¯¥æœ€å…ˆå®Œæˆçš„ â€œfooâ€ èŠ‚ç‚¹æä¾›çš„æ›´æ–°åè€Œæ”¾åœ¨æœ€åï¼Œä½†æ˜¯Channelæœ€åçš„å€¼ç¡®å®æ˜¯æå–çš„æœ€åä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">collected</span> <span class="hljs-selector-tag">changes</span>: <span class="hljs-selector-attr">[<span class="hljs-string">'bar'</span>, <span class="hljs-string">'baz'</span>, <span class="hljs-string">'foo'</span>]</span>
<span class="hljs-selector-tag">channel</span> <span class="hljs-selector-tag">value</span>: <span class="hljs-selector-tag">foo</span>
</code></pre>
<h3 data-id="heading-5">3.3	LastValueAfterFinish</h3>
<p>LastValueAfterFinishç±»å‹çš„Channelå¼¥è¡¥äº†LastValueåœ¨åŒä¸€Superstepä¸­ä¸èƒ½å¤šæ¬¡æ›´æ–°çš„ä¸è¶³ï¼Œå®ƒçš„updateæ–¹æ³•é‡‡ç”¨äº†ä¸AnyValueç±»ä¼¼çš„é€»è¾‘ï¼Œæ€»æ˜¯ä¼šæå–æœ€åæäº¤çš„æ›´æ–°ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨å‰é¢å·²ç»è¯´è¿‡ï¼Œæˆ‘ä»¬ä¸åº”è¯¥å¯¹æ›´æ–°é¡ºåºä½œä»»ä½•å‡è®¾ï¼Œæ‰€ä»¥å®ƒæ˜¯é€‰æ‹©ç¬¬ä¸€ä¸ªè¿˜æ˜¯æœ€åä¸€ä¸ªå…¶å®éƒ½æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LastValueAfterFinish</span>(
    <span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, <span class="hljs-built_in">tuple</span>[Value, <span class="hljs-built_in">bool</span>]]):
    value: Value | <span class="hljs-type">Any</span>
    finished: <span class="hljs-built_in">bool</span>	
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-type">Any</span>, key: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ, key)
        self.value = MISSING
        self.finished = <span class="hljs-literal">False</span>   

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value | <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

        self.finished = <span class="hljs-literal">False</span>
        self.value = values[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">consume</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> self.finished:
            self.finished = <span class="hljs-literal">False</span>
            self.value = MISSING
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">finish</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.finished <span class="hljs-keyword">and</span> self.value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING:
            self.finished = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>) -&gt; Value:
        <span class="hljs-keyword">if</span> self.value <span class="hljs-keyword">is</span> MISSING <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> self.finished:
            <span class="hljs-keyword">raise</span> EmptyChannelError()
        <span class="hljs-keyword">return</span> self.value

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_available</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">return</span> self.value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING <span class="hljs-keyword">and</span> self.finished
</code></pre>
<p>LastValueAfterFinishæœ€ä¸ºå…¸å‹çš„ç‰¹æ€§æ˜¯é’ˆå¯¹å®ƒçš„æ›´æ–°åªæœ‰åœ¨Superstepå®Œæˆä¹‹åæ‰ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥åœ¨Superstep Nä¸­çš„æ›´æ–°åªèƒ½ç­‰åˆ°Superstep N+1æ‰èƒ½è¢«è¯»å–ã€‚æˆ‘ä»¬å¯ä»¥ä»LastValueAfterFinishçš„å®šä¹‰çœ‹å‡ºå®ƒåˆ©ç”¨finishedå­—æ®µåˆ¤æ–­Superstepæ˜¯å¦å®Œæˆï¼Œè¿™ä¸ªå­—æ®µä¼šåœ¨updateå’Œfinishæ–¹æ³•ä¸­åˆ†åˆ«è¢«è®¾ç½®æˆFalseå’ŒTrueã€‚is_availableæ–¹æ³•åœ¨åšå‡ºå¯ç”¨æ€§åˆ¤æ–­çš„æ—¶å€™ä¼šåŒæ—¶è¯„ä¼°å€¼æ˜¯å¦å­˜åœ¨å’Œè¿™ä¸ªfinishedå­—æ®µçš„å€¼ã€‚</p>
<p>èµ‹äºˆäº†LastValueAfterFinish â€œè·¨æ­¥å»¶è¿Ÿâ€ çš„å¯è§æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¦‚ä¸‹è¿™ä¸ªæ¼”ç¤ºç¨‹åºçœ‹å‡ºå®ƒå’ŒLastValueçš„ä¸åŒä¹‹å¤„ã€‚å¦‚ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼ŒPregelå”¯ä¸€çš„Nodeè®¢é˜…äº†â€œfooâ€å’Œâ€œbarâ€è¿™ä¸¤ä¸ªChannelï¼Œå…¶ç±»å‹åˆ†åˆ«ä¸ºLastValueå’ŒLastValueAfterFinishã€‚åœ¨Superstep -1æä¾›çš„ä¸¤ä¸ªè¾“å…¥fooå’Œbarï¼Œå‰è€…åœ¨Superstep -1å¯è§ï¼Œæ‰€ä»¥ä¼šåœ¨Superstep 0è§¦å‘èŠ‚ç‚¹æ‰§è¡Œï¼Œæ­¤æ—¶åè€…æ˜¯ä¸å¯ç”¨çš„çŠ¶æ€ã€‚ç­‰åˆ°Superstep 0ç»“æŸï¼Œfinishæ–¹æ³•è¢«è°ƒç”¨ä¹‹åï¼Œbarå˜å¾—å¯ç”¨ï¼Œå…¶æ›´æ–°è§¦å‘èŠ‚ç‚¹ä¸Superstep 1ä¸­å†æ¬¡æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,LastValueAfterFinish
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableConfig
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>

inputs:<span class="hljs-built_in">list</span> = []
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">args:<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,<span class="hljs-type">Any</span>], config: RunnableConfig</span>)-&gt;<span class="hljs-literal">None</span>:
    step = config.get(<span class="hljs-string">"metadata"</span>, {}).get(<span class="hljs-string">"langgraph_step"</span>)
    inputs.append((step, args.get(<span class="hljs-string">"foo"</span>), args.get(<span class="hljs-string">"bar"</span>)))

node = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"foo"</span>,<span class="hljs-string">"bar"</span>, read=<span class="hljs-literal">True</span>)
    .do(handle))

app =  Pregel(
    nodes={<span class="hljs-string">"body"</span>: node},
    channels={
        <span class="hljs-string">"foo"</span>: LastValue(<span class="hljs-built_in">str</span>), 
        <span class="hljs-string">"bar"</span>: LastValueAfterFinish(<span class="hljs-built_in">str</span>),  
    },
    input_channels=[<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>],
    output_channels=[],
)
app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"foo"</span>: <span class="hljs-string">"123"</span>, <span class="hljs-string">"bar"</span>: <span class="hljs-string">"456"</span>,})
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(inputs) == <span class="hljs-number">2</span>
<span class="hljs-keyword">assert</span> inputs[<span class="hljs-number">0</span>] == (<span class="hljs-number">0</span>, <span class="hljs-string">"123"</span>, <span class="hljs-literal">None</span>)
<span class="hljs-keyword">assert</span> inputs[<span class="hljs-number">1</span>] == (<span class="hljs-number">1</span>, <span class="hljs-string">"123"</span>, <span class="hljs-string">"456"</span>)
</code></pre>
<p>å¦‚ä¸‹è¿™ç§Nodeæ ¹æ®æ— æ³•è¢«è§¦å‘æ‰§è¡Œçš„é—®é¢˜ï¼Œä¹Ÿæ­£æ˜¯æºäºLastValueAfterFinishè¿™ç§â€œè·¨æ­¥å»¶è¿Ÿâ€ çš„å¯è§æ€§é€ æˆçš„ã€‚ç”±äºä½œä¸ºè¾“å…¥Channelçš„ç±»å‹ä¸ºLastValueAfterFinishï¼Œæ‰€ä»¥åœ¨Superstep -1ä¸­å¤„äºä¸å¯ç”¨çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¼•æ“ä»»åŠ¡ä¸‹ä¸€æ­¥æ²¡æœ‰éœ€è¦æ‰§è¡Œçš„èŠ‚ç‚¹ï¼Œæ•´ä¸ªæµç¨‹å°±ç›´æ¥ç»“æŸäº†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,LastValueAfterFinish
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder

node = (NodeBuilder()
        .subscribe_only(<span class="hljs-string">"input"</span>)
        .do(<span class="hljs-keyword">lambda</span> args:args)
        .write_to(<span class="hljs-string">"output"</span>))
app =  Pregel(
    nodes={<span class="hljs-string">"body"</span>: node},
    channels={
       <span class="hljs-string">"input"</span>: LastValueAfterFinish(<span class="hljs-built_in">str</span>), 
       <span class="hljs-string">"output"</span>: LastValue(<span class="hljs-built_in">str</span>),
    },
    input_channels=[<span class="hljs-string">"input"</span>],
    output_channels=[<span class="hljs-string">"output"</span>],
)
result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"input"</span>: <span class="hljs-string">"foobar"</span>})
<span class="hljs-keyword">assert</span> result == <span class="hljs-literal">None</span>
</code></pre>
<p>ä»ç»™å‡ºçš„å®šä¹‰æˆ‘ä»¬è¿˜å‘ç°ï¼ŒLastValueAfterFinishè¿˜é‡å†™äº†consumeï¼Œå¹¶å°†finishedå­—æ®µé‡ç½®ä¸ºFalseï¼Œå¹¶å°†å€¼æŠ¹é™¤ã€‚è¿™ä¸ªå®ç°èµ‹äºˆäº†LastValueAfterFinish â€œé˜…åå³ç„šâ€ çš„ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-6">3.4	EphemeralValue</h3>
<p>EphemeralValueæ˜¯ä¸€ç§ä¸“é—¨ç”¨äºçŸ­å¯¿å‘½æ•°æ®ä¼ é€’çš„Channelç±»å‹ï¼Œå› ä¸ºå®ƒçš„æ ¸å¿ƒç‰¹æ€§å°±æ˜¯ â€œæ›´æ–°æ•°æ®é‚»æ­¥æœ‰æ•ˆâ€ ã€‚EphemeralValueåœ¨é»˜è®¤æƒ…å†µä¸‹ä¹ŸåƒLastValueä¸€æ ·ä¸æ”¯æŒé€šè¿‡Superstepä¸­çš„å¤šä¸ªæ›´æ–°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ç”¨åœ¨æ„é€ å‡½æ•°ä¸­å°†guardå‚æ•°è®¾ç½®ä¸ºFalseæ¥å…³é—­è¿™ä¸ªé™åˆ¶ã€‚å¦‚æœå…è®¸å•ä¸ªSuperstepå†…çš„å¤šæ¬¡æ›´æ–°ï¼Œå®ƒä¹Ÿåªä¼šé€‰æ‹©æœ€åä¸€æ¬¡æ›´æ–°æä¾›çš„å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EphemeralValue</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, Value]):
    __slots__ = (<span class="hljs-string">"value"</span>, <span class="hljs-string">"guard"</span>)
    value: Value | <span class="hljs-type">Any</span>
    guard: <span class="hljs-built_in">bool</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-type">Any</span>, guard: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ)
        self.guard = guard
        self.value = MISSING    

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">if</span> self.value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING:
                self.value = MISSING
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) != <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> self.guard:
            <span class="hljs-keyword">raise</span> InvalidUpdateError(
                <span class="hljs-string">f"At key '<span class="hljs-subst">{self.key}</span>': EphemeralValue(guard=True) can receive only one value per step. Use guard=False if you want to store any one of multiple values."</span>
            )

        self.value = values[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<p>EphemeralValueæ‰€è°“çš„ â€œé‚»æ­¥æœ‰æ•ˆâ€ çš„æ›´æ–°æœ‰æ•ˆæ€§ç­–ç•¥å®ç°åœ¨å®ƒçš„updateæ–¹æ³•ä¸­ã€‚å¦‚ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œå¦‚æœå½“å‰Superstepå†…æ— æ›´æ–°ï¼Œupdateæ–¹æ³•çš„valueså‚æ•°ä¸ºç©ºï¼Œæ­¤æ—¶å®ƒä¼šå°†ä¹‹å‰è®¾ç½®çš„å€¼æ¸…ç©ºã€‚å¦‚ä¸‹çš„æ¼”ç¤ºç¨‹åºå……åˆ†ä½“ç°äº†è¿™ä¸€ç‚¹ï¼šåœ¨Super step -1è¾“å…¥åˆ° â€œbarâ€ è¿™ä¸ªEphemeralValueç±»å‹çš„Channelï¼Œå®ƒçš„å€¼åªèƒ½Superstep 0ä¸­æ‰§è¡Œçš„Nodeï¼ˆ â€œnode1â€ ï¼‰è¯»å–ï¼Œåœ¨Superstepä¸­çš„Nodeï¼ˆ â€œnode2â€ ï¼‰è¯•è¯•å›¾è¯»å–æ—¶å·²è¢«æ¸…ç©ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,EphemeralValue
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableConfig
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>

inputs:<span class="hljs-built_in">list</span> = []
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle</span>(<span class="hljs-params">args:<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,<span class="hljs-type">Any</span>], config: RunnableConfig</span>)-&gt;<span class="hljs-literal">None</span>:
    step = config.get(<span class="hljs-string">"metadata"</span>, {}).get(<span class="hljs-string">"langgraph_step"</span>)
    inputs.append((step, args.get(<span class="hljs-string">"foo"</span>), args.get(<span class="hljs-string">"bar"</span>)))

node1 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"node1"</span>, read=<span class="hljs-literal">False</span>)
    .read_from(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>)
    .do(handle)
    .write_to(node2= <span class="hljs-literal">None</span>))

node2 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"node2"</span>, read=<span class="hljs-literal">False</span>)
    .read_from(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>)
    .do(handle))

app =  Pregel(
    nodes={<span class="hljs-string">"node1"</span>: node1, <span class="hljs-string">"node2"</span>: node2},
    channels={
        <span class="hljs-string">"foo"</span>: LastValue(<span class="hljs-built_in">str</span>), 
        <span class="hljs-string">"bar"</span>: EphemeralValue(<span class="hljs-built_in">str</span>),  
        <span class="hljs-string">"node1"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"node2"</span>: LastValue(<span class="hljs-literal">None</span>),
    },
    input_channels=[<span class="hljs-string">"node1"</span>,<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>],
    output_channels=[],
)

app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"node1"</span>: <span class="hljs-literal">None</span>,<span class="hljs-string">"foo"</span>: <span class="hljs-string">"123"</span>, <span class="hljs-string">"bar"</span>: <span class="hljs-string">"456"</span>,})
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(inputs) == <span class="hljs-number">2</span>
<span class="hljs-keyword">assert</span> inputs[<span class="hljs-number">0</span>] == (<span class="hljs-number">0</span>, <span class="hljs-string">"123"</span>, <span class="hljs-string">"456"</span>)
<span class="hljs-keyword">assert</span> inputs[<span class="hljs-number">1</span>] == (<span class="hljs-number">1</span>, <span class="hljs-string">"123"</span>, <span class="hljs-literal">None</span>)
</code></pre>
<h3 data-id="heading-7">3.5	UntrackedValue</h3>
<p>UntrackedValueæ˜¯ä¸€ç§ç‰¹æ®Šçš„Channelç±»å‹ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§åœ¨äºå®ƒçš„ â€œéæŒä¹…æ€§â€ å’Œ â€œä¸å¯è¿½è¸ªæ€§â€ ã€‚å†™å…¥UntrackedValueçš„å€¼å¸¸é©»å†…å­˜ï¼Œå¹¶ä¼šå‚ä¸æŒä¹…åŒ–ã€‚è¿™ä¸€ç‰¹æ€§ä½“ç°åœ¨çš„checkpointå’Œfrom_checkpointæ–¹æ³•ä¸Šï¼Œå‰è€…ä¸ºæŒä¹…åŒ–æä¾›ä¸€ä¸ªç©ºå€¼ï¼Œåè€…ç›´æ¥æ”¾å¼ƒä»æŒä¹…åŒ–å­˜å‚¨åŠ è½½çš„å€¼ã€‚ä¸EphemeralValueä¸€æ ·ï¼ŒUntrackedValueä¹Ÿé€šè¿‡æ„é€ å‡½æ•°çš„guardå‚æ•°å†³å®šæ˜¯å¦å…è®¸åŒä¸€Superstepçš„å¤šæ¬¡å†™å…¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UntrackedValue</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, Value]):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkpoint</span>(<span class="hljs-params">self</span>) -&gt; Value | <span class="hljs-type">Any</span>:
        <span class="hljs-keyword">return</span> MISSING
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_checkpoint</span>(<span class="hljs-params">self, checkpoint: Value</span>) -&gt; Self:
        empty = self.__class__(self.typ, self.guard)
        empty.key = self.key
        <span class="hljs-keyword">return</span> empty
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(values) != <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> self.guard:
            <span class="hljs-keyword">raise</span> InvalidUpdateError(
                <span class="hljs-string">f"At key '<span class="hljs-subst">{self.key}</span>': UntrackedValue(guard=True) can receive only one value per step. Use guard=False if you want to store any one of multiple values."</span>
            )

        self.value = values[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<p>åœ¨å¤æ‚çš„æ™ºèƒ½ä½“å·¥ä½œæµä¸­ï¼Œå¹¶éæ‰€æœ‰æ•°æ®éƒ½é€‚åˆæˆ–éœ€è¦æŒä¹…åŒ–ã€‚ä½¿ç”¨UntrackedValueçš„ä¸»è¦åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å®‰å…¨æ€§ä¸éšç§ï¼šæŸäº›æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ä¸´æ—¶è®¿é—®ä»¤ç‰Œã€API Keys æˆ–ç”¨æˆ·ç§å¯†å‡­è¯ï¼‰ä¸åº”å†™å…¥ç£ç›˜æˆ–æŒä¹…åŒ–æ•°æ®åº“çš„å¿«ç…§ä¸­ã€‚</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŒ–ï¼šå¦‚æœæŸäº›æ•°æ®é‡æå¤§ï¼ˆå¦‚å¤§å‹å›¾åƒ Bufferã€å¤§å‹æ–‡ä»¶æµæˆ–å¤æ‚çš„å¯¹è±¡å®ä¾‹ï¼‰ï¼Œä¸”è¿™äº›æ•°æ®åœ¨ç³»ç»Ÿå´©æºƒåå¯ä»¥é‡æ–°ç”Ÿæˆæˆ–ä¸å†éœ€è¦ï¼Œæ’é™¤å®ƒä»¬å¯ä»¥æ˜¾è‘—å‡å° Checkpoint çš„ä½“ç§¯ï¼Œæå‡å­˜å‚¨æ€§èƒ½ã€‚</p>
</li>
<li>
<p>å¯¹è±¡éåºåˆ—åŒ–å…¼å®¹ï¼šæœ‰äº› Python å¯¹è±¡ï¼ˆå¦‚æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ã€æ•°æ®åº“è¿æ¥ã€æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æˆ–ç‰¹å®šçš„ç¬¬ä¸‰æ–¹åº“å¯¹è±¡ï¼‰æ˜¯æ— æ³•è¢«åºåˆ—åŒ–çš„ã€‚å°†å®ƒä»¬æ”¾å…¥UntrackedValueChannelå¯ä»¥é¿å…å›¾åœ¨ä¿å­˜çŠ¶æ€æ—¶æŠ¥é”™ã€‚</p>
</li>
</ul>
<p>UntrackedValueChannelä¸å‚ä¸æŒä¹…åŒ–çš„ç‰¹æ€§å¯ç”¨é€šè¿‡å¦‚ä¸‹è¿™ä¸ªç¨‹åºæ¥éªŒè¯ã€‚å¦‚ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº†ä¸€ä¸ªç»„è¾“å…¥Channelï¼ˆfooå’Œbarï¼‰å’Œè¾“å‡ºChannelï¼ˆbazå’Œquxï¼‰ï¼Œæ¯ç»„ä¸­ä¸€ä¸ªæ˜¯å¸¸è§„çš„LastValueï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯UntrackedValueChannelã€‚æˆ‘ä»¬ä¸ºPregelå¯¹è±¡æŒ‡å®šäº†Checkpointer, å¹¶åœ¨è°ƒç”¨æ—¶åˆ©ç”¨RunnableConfigæŒ‡å®šäº†Thread IDï¼Œé‚£ä¹ˆè°ƒç”¨çš„å†å²å°†ä¼šè¢«æŒä¹…åŒ–ä¸‹æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,UntrackedValue
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableConfig
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver

node = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"foo"</span>,<span class="hljs-string">"bar"</span>)
    .do(<span class="hljs-keyword">lambda</span> args:args)
    .write_to(baz=<span class="hljs-keyword">lambda</span> r: r[<span class="hljs-string">"foo"</span>], qux=<span class="hljs-keyword">lambda</span> r: r[<span class="hljs-string">"bar"</span>]))
app =  Pregel(
    nodes={<span class="hljs-string">"body"</span>: node},
    channels={
        <span class="hljs-string">"foo"</span>: LastValue(<span class="hljs-built_in">str</span>), 
        <span class="hljs-string">"bar"</span>: UntrackedValue(<span class="hljs-built_in">str</span>), 
        <span class="hljs-string">"baz"</span>: LastValue(<span class="hljs-built_in">str</span>), 
        <span class="hljs-string">"qux"</span>: UntrackedValue(<span class="hljs-built_in">str</span>),
    },
    input_channels=[<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>],
    output_channels=[<span class="hljs-string">"baz"</span>, <span class="hljs-string">"qux"</span>],
    checkpointer= InMemorySaver()
)
config:RunnableConfig = {<span class="hljs-string">"configurable"</span>:{<span class="hljs-string">"thread_id"</span>:<span class="hljs-string">"123"</span>}}
app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>,<span class="hljs-string">"foo"</span>: <span class="hljs-string">"123"</span>, <span class="hljs-string">"bar"</span>: <span class="hljs-string">"456"</span>,}, config=config)
<span class="hljs-keyword">for</span> state <span class="hljs-keyword">in</span> app.get_state_history(config=config):
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"step <span class="hljs-subst">{state.metadata[<span class="hljs-string">'step'</span>]}</span>: <span class="hljs-subst">{state.values}</span>"</span>)
</code></pre>
<p>æˆ‘ä»¬è°ƒç”¨Pregelçš„get_state_historyæ–¹æ³•æå–æŒä¹…åŒ–çš„å†å²ï¼Œå¹¶è¾“å‡ºæ¯ä¸ªCheckpointä¸­å­˜å‚¨çš„Channelå€¼ã€‚ä»å¦‚ä¸‹çš„è¾“å‡ºç»“æœå¯ç”¨çœ‹å‡ºï¼Œè¢«æŒä¹…åŒ–çš„Checkpointä¸ä¼šä¿ç•™ç±»å‹ä¸ºUntrackedValueChannelçš„ChannelçŠ¶æ€ï¼Œä¸è®ºå®ƒæ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">step <span class="hljs-number">0</span>: {<span class="hljs-string">'foo'</span>: <span class="hljs-string">'123'</span>, <span class="hljs-string">'baz'</span>: <span class="hljs-string">'123'</span>}
step <span class="hljs-number">-1</span>: {<span class="hljs-string">'foo'</span>: <span class="hljs-string">'123'</span>}
</code></pre>
<h3 data-id="heading-8">3.6	BinaryOperatorAggregate</h3>
<p>BinaryOperatorAggregateæ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„Channelç±»å‹ã€‚é¦–å…ˆï¼Œå®ƒæ”¯æŒåŒä¸€Superstepä¸­é’ˆå¯¹å®ƒçš„å¤šæ¬¡å†™å…¥ï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ç”¨åˆ©ç”¨å®ƒæ¥å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯å•å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ—è¡¨ã€é›†åˆèƒ¡æ€»å’Œå­—å…¸ï¼Œå› ä¸ºæœ€ç»ˆå­˜å‚¨çš„å€¼æ˜¯ç”±æˆ‘ä»¬æä¾›çš„ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦å†³å®šçš„ã€‚è¿™ä¸ªæ“ä½œç¬¦ä½“ç°ä¸ºä¸€ä¸ªCallable[[Value, Value], Value] å¯¹è±¡ï¼Œä¸¤ä¸ªè¾“å…¥å‚æ•°åˆ†åˆ«è¡¨ç¤ºç°æœ‰çš„å€¼å’Œæ–°å†™å…¥çš„å€¼ï¼Œè¿™ä¸ªå¯æ‰§è¡Œå¯¹è±¡çš„è¿”å›å€¼æœ€ç»ˆå†™å…¥Channelçš„å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryOperatorAggregate</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, Value]):
    __slots__ = (<span class="hljs-string">"value"</span>, <span class="hljs-string">"operator"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-built_in">type</span>[Value], operator: <span class="hljs-type">Callable</span>[[Value, Value], Value]</span>):
        <span class="hljs-built_in">super</span>().__init__(typ)
        self.operator = operator
        â€¦
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> values:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> self.value <span class="hljs-keyword">is</span> MISSING:
            self.value = values[<span class="hljs-number">0</span>]
            values = values[<span class="hljs-number">1</span>:]
        seen_overwrite: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values:
            is_overwrite, overwrite_value = _get_overwrite(value)
            <span class="hljs-keyword">if</span> is_overwrite:
                <span class="hljs-keyword">if</span> seen_overwrite:
                    msg = create_error_message(
                        message=<span class="hljs-string">"Can receive only one Overwrite value per super-step."</span>,
                        error_code=ErrorCode.INVALID_CONCURRENT_GRAPH_UPDATE,
                    )
                    <span class="hljs-keyword">raise</span> InvalidUpdateError(msg)
                self.value = overwrite_value
                seen_overwrite = <span class="hljs-literal">True</span>
                <span class="hljs-keyword">continue</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> seen_overwrite:
                self.value = self.operator(self.value, value)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<p>BinaryOperatorAggregateçš„æ ¸å¿ƒå…¨éƒ¨ä½“ç°updateæ–¹æ³•ä¸Šã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®ƒä¼šéå†æ¯ä¸ªå¾…å†™å…¥çš„å€¼ï¼Œå¹¶å°†valueå­—æ®µè¡¨ç¤ºçš„å½“å‰å€¼å’Œå¾…å†™å…¥çš„å€¼ä½œä¸ºå‚æ•°è°ƒç”¨äºŒå…ƒæ“ä½œï¼Œæœ€åå°†è¿”å›ç»“æœèµ‹å€¼ç»™valueå­—æ®µã€‚æˆ‘ä»¬å·²ç»åœ¨å‰é¢çš„æ¼”ç¤ºå®ä¾‹ä¸­å¤šæ¬¡ä½¿ç”¨è¿‡è¿™ä¸ªç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼å°†æ‰€æœ‰å†™å…¥çš„å€¼å…¨éƒ¨ä¿å­˜ä¸‹æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,BinaryOperatorAggregate
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">import</span> operator

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_node</span>(<span class="hljs-params">node_name:<span class="hljs-built_in">str</span></span>)-&gt;NodeBuilder:
    <span class="hljs-keyword">return</span> (NodeBuilder()
        .subscribe_to(<span class="hljs-string">"start"</span>, read=<span class="hljs-literal">False</span>)
        .do(<span class="hljs-keyword">lambda</span> _: [node_name])
        .write_to(<span class="hljs-string">"result"</span>))

app = Pregel(
    nodes={name: build_node(name) <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>]},
    channels={
        <span class="hljs-string">"start"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"result"</span>: BinaryOperatorAggregate(<span class="hljs-built_in">list</span>, operator.add),
    },
    input_channels=[<span class="hljs-string">"start"</span>],
    output_channels=[<span class="hljs-string">"result"</span>],
)

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">all</span>(x <span class="hljs-keyword">in</span> result[<span class="hljs-string">"result"</span>] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>])
</code></pre>
<p>å¯¹äºä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œç”±äºæˆ‘ä»¬Channelå­˜å‚¨çš„æ•°æ®ç±»å‹æ˜¯åˆ—è¡¨ï¼Œè€Œoperator.addè¦æ±‚ä¸¤ä¸ªè¾“å…¥å‚æ•°å‡ä¸ºåˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸è®©Nodeå°†å•å€¼å°è£…æˆåˆ—è¡¨ã€‚è™½ç„¶BinaryOperatorAggregateä»¥â€œæ³›å‹â€ çš„å½¢å¼å®šä¹‰ï¼Œä½œä¸ºæ“ä½œçš„å¯æ‰§è¡Œå¯¹è±¡ä¹Ÿå®šä¹‰Callable[[Value, Value], Value]ç±»å‹ï¼Œè²Œä¼¼è¦æ±‚å­˜å‚¨ç±»å‹å’Œå¾…æ›´æ–°æ•°æ®ç±»å‹ä¸€è‡´ï¼Œä½†æˆ‘ä»¬çŸ¥é“æ³›å‹åœ¨è¿è¡Œæ—¶æ˜¯æ²¡æœ‰çº¦æŸåŠ›çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚è‡ªç”±å‘æŒ¥ã€‚æ¯”å¦‚å¦‚ä¸‹è¿™ä¸ªä¾‹å­ç”¨äºæ„é€ BinaryOperatorAggregateæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„appendå‡½æ•°ï¼Œå®ƒåŠæ”¯æŒåˆ—è¡¨ï¼Œä¹Ÿæ”¯æŒå•å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,BinaryOperatorAggregate
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_node</span>(<span class="hljs-params">node_name:<span class="hljs-built_in">str</span></span>)-&gt;NodeBuilder:
    <span class="hljs-keyword">return</span> (NodeBuilder()
        .subscribe_to(<span class="hljs-string">"start"</span>, read=<span class="hljs-literal">False</span>)
        .do(<span class="hljs-keyword">lambda</span> _: node_name)
        .write_to(<span class="hljs-string">"result"</span>))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">append</span>(<span class="hljs-params">a:<span class="hljs-built_in">list</span>,b:<span class="hljs-type">Any</span></span>)-&gt;<span class="hljs-built_in">list</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(b,<span class="hljs-built_in">list</span>):
        <span class="hljs-keyword">return</span> a + b
    <span class="hljs-keyword">else</span>:
        a.append(b)
        <span class="hljs-keyword">return</span> a

app = Pregel(
    nodes={name: build_node(name) <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>]},
    channels={
        <span class="hljs-string">"start"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"result"</span>: BinaryOperatorAggregate(<span class="hljs-built_in">list</span>, append),
    },
    input_channels=[<span class="hljs-string">"start"</span>],
    output_channels=[<span class="hljs-string">"result"</span>],
)

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">all</span>(x <span class="hljs-keyword">in</span> result[<span class="hljs-string">"result"</span>] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>, <span class="hljs-string">"baz"</span>])
</code></pre>
<p>æˆ‘ä»¬ä»BinaryOperatorAggregateçš„updateæ–¹æ³•çš„å®šä¹‰è¿˜å‘ç°äº†å®ƒæ‰§è¡Œâ€œè¦†ç›–ï¼ˆoverrideï¼‰â€çš„åŠŸèƒ½ã€‚æŒ‰ç…§ä»£ç åæ˜ çš„é€»è¾‘ï¼Œå¦‚æœæä¾›çš„æ˜¯ä¸€ä¸ªOverwriteå¯¹è±¡ï¼ŒæŒ‡å®šçš„äºŒå…ƒæ“ä½œå°†è¢«å¿½ç•¥ï¼Œupdateæ–¹æ³•ä¼šç›´æ¥ä½¿ç”¨è¯¥å¯¹è±¡çš„valueå­—æ®µè¦†ç›–ç°æœ‰çš„å€¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@dataclass(<span class="hljs-params">slots=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Overwrite</span>:
    value: <span class="hljs-type">Any</span>
</code></pre>
<p>æ¯”å¦‚ä¸‹é¢çš„æ¼”ç¤ºç¨‹åºä¸­ï¼Œç‡å…ˆæ‰§è¡Œçš„èŠ‚ç‚¹fooå°†è‡ªå·±çš„åç§°æ·»åŠ åˆ°åä¸ºâ€œoutputâ€çš„è¿™ä¸ªBinaryOperatorAggregateé€šé“ä¸­ï¼Œä½†æ˜¯èŠ‚ç‚¹baræ‰§è¡Œä¹‹åä¼šå°†æœ€ç»ˆçš„å€¼ä»¥è¦†ç›–çš„æ–¹å¼æ”¹å†™æˆ["bar"]ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,BinaryOperatorAggregate
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> Overwrite

foo = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"foo"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(output = [<span class="hljs-string">"foo"</span>], bar=<span class="hljs-literal">None</span>))
bar = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"bar"</span>, read=<span class="hljs-literal">False</span>)
    .do(<span class="hljs-keyword">lambda</span> _: Overwrite(value=[<span class="hljs-string">"bar"</span>]))
    .write_to(<span class="hljs-string">"output"</span>))

app = Pregel(
    nodes={<span class="hljs-string">"foo"</span>: foo, <span class="hljs-string">"bar"</span>: bar},
    channels={
        <span class="hljs-string">"foo"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"bar"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"output"</span>: BinaryOperatorAggregate(<span class="hljs-built_in">list</span>, <span class="hljs-keyword">lambda</span> a,b: a + b),
    },
    input_channels=[<span class="hljs-string">"foo"</span>],
    output_channels=[<span class="hljs-string">"output"</span>],
)

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"foo"</span>: <span class="hljs-literal">None</span>}, interrupt_after= <span class="hljs-string">"foo"</span>)
<span class="hljs-keyword">assert</span> result == {<span class="hljs-string">"output"</span>: [<span class="hljs-string">"foo"</span>]}

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"foo"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-keyword">assert</span> result == {<span class="hljs-string">"output"</span>: [<span class="hljs-string">"bar"</span>]}
</code></pre>
<p>è¿™ç§è¦†ç›–æ€§è´¨çš„å†™è¿˜å¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å†™å…¥ä¸€ä¸ªç‰¹æ®Šçš„å­—å…¸æ¥å®ç°ã€‚è¿™ä¸ªå­—å…¸åªåŒ…å«ä¸€ä¸ªKeyä¸º â€œ<strong>overwrite</strong>â€ çš„é”®å€¼å¯¹ï¼Œå®ƒçš„å€¼å°†ç”¨äºè¦†ç›–ç°æœ‰çš„å€¼ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªSuperstepä¸­ï¼Œè¿™æ ·çš„è¦†ç›–æ“ä½œåªèƒ½è¿›è¡Œä¸€æ¬¡ã€‚å¦‚æœå¤šæ¬¡æä¾›è¿™æ ·çš„å­—å…¸å’ŒOverwriteå¯¹è±¡ï¼Œupdateæ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªInvalidUpdateErrorå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,BinaryOperatorAggregate
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder

foo = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"foo"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(output = [<span class="hljs-string">"foo"</span>], bar=<span class="hljs-literal">None</span>))
bar = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"bar"</span>, read=<span class="hljs-literal">False</span>)
    .do(<span class="hljs-keyword">lambda</span> _: {<span class="hljs-string">"__overwrite__"</span>: [<span class="hljs-string">"bar"</span>]})
    .write_to(<span class="hljs-string">"output"</span>))

app = Pregel(
    nodes={<span class="hljs-string">"foo"</span>: foo, <span class="hljs-string">"bar"</span>: bar},
    channels={
        <span class="hljs-string">"foo"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"bar"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"output"</span>: BinaryOperatorAggregate(<span class="hljs-built_in">list</span>, <span class="hljs-keyword">lambda</span> a,b: a + b),
    },
    input_channels=[<span class="hljs-string">"foo"</span>],
    output_channels=[<span class="hljs-string">"output"</span>],
)

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"foo"</span>: <span class="hljs-literal">None</span>}, interrupt_after= <span class="hljs-string">"foo"</span>)
<span class="hljs-keyword">assert</span> result == {<span class="hljs-string">"output"</span>: [<span class="hljs-string">"foo"</span>]}

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"foo"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-keyword">assert</span> result == {<span class="hljs-string">"output"</span>: [<span class="hljs-string">"bar"</span>]}
</code></pre>
<h3 data-id="heading-9">3.7	NamedBarrierValue</h3>
<p>æˆ‘ä»¬åœ¨å‰é¢çš„æ¼”ç¤ºå®ä¾‹ä¸­åˆ©ç”¨NamedBarrierValueè¿™ä¸ªç‰¹æ®Šçš„Channelè§£å†³äº†â€œå¤šNodeä¾èµ–â€çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä»ä¸­ä¹Ÿèƒ½å¤§è‡´çŸ¥é“å®ƒçš„å·¥ä½œåŸç†ï¼šå®ƒå†…éƒ¨ç»´æŠ¤ä¸¤ä¸ªé›†åˆï¼Œä¸€ä¸ªæ˜¯åˆå§‹åŒ–æŒ‡å®šçš„åç§°é›†åˆï¼Œå¦ä¸€ä¸ªå†™å…¥å¡«å……çš„é›†åˆï¼Œç­‰ä¸¤ä¸ªé›†åˆä¸€è‡´çš„æ—¶å€™è¯¥Channelæ‰å˜å¾—å¯ç”¨ã€‚è¿™ä¸¤ä¸ªé›†åˆå¯¹åº”NamedBarrierValueå¦‚ä¸‹æ‰€ç¤ºçš„nameså’Œseené›†åˆã€‚å½“updateåœ¨åº”ç”¨æ›´æ–°çš„æ—¶å€™ï¼Œå¦‚æœæä¾›çš„åç§°æ²¡æœ‰åœ¨namesé›†åˆä¸­ï¼Œä¼šç›´æ¥æŠ›å‡ºInvalidUpdateErrorå¼‚å¸¸ã€‚å¦‚æœå·²ç»åœ¨seené›†åˆä¸­ï¼Œå®ƒä¼šç›´æ¥å¿½ç•¥å¹¶è¿”å›Falseï¼Œå¦åˆ™æ‰ä¼šå°†å…¶æ·»åŠ åˆ°seené›†åˆä¸­ï¼Œå¹¶è¿”å›Trueã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NamedBarrierValue</span>(<span class="hljs-type">Generic</span>[Value], BaseChannel[Value, Value, <span class="hljs-built_in">set</span>[Value]]):

    names: <span class="hljs-built_in">set</span>[Value]
    seen: <span class="hljs-built_in">set</span>[Value]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-built_in">type</span>[Value], names: <span class="hljs-built_in">set</span>[Value]</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ)
        self.names = names
        self.seen: <span class="hljs-built_in">set</span>[<span class="hljs-built_in">str</span>] = <span class="hljs-built_in">set</span>()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">checkpoint</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">set</span>[Value]:
        <span class="hljs-keyword">return</span> self.seen

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">from_checkpoint</span>(<span class="hljs-params">self, checkpoint: <span class="hljs-built_in">set</span>[Value]</span>) -&gt; Self:
        empty = self.__class__(self.typ, self.names)
        empty.key = self.key
        <span class="hljs-keyword">if</span> checkpoint <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> MISSING:
            empty.seen = checkpoint
        <span class="hljs-keyword">return</span> empty

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        updated = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values:
            <span class="hljs-keyword">if</span> value <span class="hljs-keyword">in</span> self.names:
                <span class="hljs-keyword">if</span> value <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.seen:
                    self.seen.add(value)
                    updated = <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">raise</span> InvalidUpdateError(
                    <span class="hljs-string">f"At key '<span class="hljs-subst">{self.key}</span>': Value <span class="hljs-subst">{value}</span> not in <span class="hljs-subst">{self.names}</span>"</span>
                )
        <span class="hljs-keyword">return</span> updated

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>) -&gt; Value:
        <span class="hljs-keyword">if</span> self.seen != self.names:
            <span class="hljs-keyword">raise</span> EmptyChannelError()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_available</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">return</span> self.seen == self.names

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">consume</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-keyword">if</span> self.seen == self.names:
            self.seen = <span class="hljs-built_in">set</span>()
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<p>ä¸ºäº†ä¿ç•™å¡«å……çš„åç§°ï¼Œç”¨äºæŒä¹…åŒ–çš„checkpointæ–¹æ³•ä¼šç›´æ¥æä¾›seené›†åˆï¼Œè€Œå¯¹åº”çš„from_checkpointæ–¹æ³•åˆ™å°†Checkpointæä¾›çš„å†…å®¹èµ‹å€¼ç»™seené›†åˆã€‚ç”±äºNamedBarrierValueçš„ç›®çš„ä»…ä»…æ˜¯åœ¨ç­‰åˆ°å¸Œæœ›çš„åç§°è¢«å¡«æ»¡æ˜¯å¯¹å¤–å‘å‡ºä¿¡å·ï¼Œè¯¥æ¡ä»¶ä½“ç°åœ¨is_availableæ–¹æ³•ä¸Šã€‚å¦‚æœæ­¤æ¡ä»¶ä¸æ»¡è¶³ï¼Œå®ƒçš„getæ–¹æ³•ä¼šç›´æ¥æŠ›å‡ºEmptyChannelErrorå¼‚å¸¸ã€‚åœ¨æ¡ä»¶æ»¡è¶³åï¼Œgetæ–¹æ³•è¿”å›çš„å€¼ä¹Ÿä¸é‡è¦ï¼Œæ‰€ä»¥å®ƒç›´æ¥è¿”å›Noneã€‚å’ŒLastValueAfterFinishä¸€æ ·ï¼ŒNamedBarrierValueåŒæ ·åœ¨é‡å†™çš„consumeæ–¹æ³•ä¸­æ¸…ç©ºäº†seené›†åˆï¼Œè¾¾åˆ°äº† â€œé˜…åå³ç„šâ€ çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-10">3.8	NamedBarrierValueAfterFinish</h3>
<p>NamedBarrierValueAfterFinishåœ¨NamedBarrierValueåŸºç¡€ä¸Šæ·»åŠ äº†åŸºäº â€œAfterFinishâ€ çš„å¯ç”¨æ€§é™åˆ¶ã€‚å³ä½¿nameså’Œseené›†åˆå¯¼è‡´ä¸€è‡´çŠ¶æ€ï¼Œå…¶ç”Ÿæ•ˆçš„æ—¶æœºä¼šå»¶åè‡´ä¸‹ä¸€ä¸ªSuperstepã€‚NamedBarrierValueAfterFinishä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªfinishedçŠ¶æ€ï¼Œå½“seenè¢«å¡«å……æ»¡æ—¶é’ˆå¯¹finishæ–¹æ³•çš„è°ƒç”¨ä¼šå°†æ­¤çŠ¶æ€è®¾ç½®ä¸ºTrueã€‚åœ¨è¾¾åˆ°å¯ç”¨æ¡ä»¶åé’ˆå¯¹consumeæ–¹æ³•çš„è°ƒç”¨ä¼šå°†æ­¤çŠ¶æ€è®¾ç½®ä¸ºFalseã€‚å®ç°çš„é€»è¾‘åŸºæœ¬ä¸Šä¸å’ŒLastValueAfterFinishä¸€è‡´ã€‚</p>
<h3 data-id="heading-11">3.9	Topic</h3>
<p>Topicç±»å‹çš„Channelå°±ç›¸å½“äºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒä¼šä¿ç•™æ‰€æœ‰æä¾›çš„æ•°æ®ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨å®ŒæˆåŸºäºSuperstepçš„æ›´æ–°åº”ç”¨ä¹‹å‰ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢«æ¸…ç©ºã€‚å¦‚æœåœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ©ç”¨accumulateå‚æ•°å¼€å¯äº† â€œç´¯ç§¯â€ æ¨¡å¼ï¼Œæ•°æ®åœ¨è·¨è¶ŠSuperstepæ—¶ä¼šè¢«ä¿ç•™ã€‚è¿™ä¸ªé€»è¾‘ä½“ç°åœ¨å¦‚ä¸‹æ‰€ç¤ºçš„updateæ–¹æ³•ä¸Šã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Topic</span>(
    <span class="hljs-type">Generic</span>[Value],
    BaseChannel[<span class="hljs-type">Sequence</span>[Value], Value | <span class="hljs-built_in">list</span>[Value], <span class="hljs-built_in">list</span>[Value]]):

    __slots__ = (<span class="hljs-string">"values"</span>, <span class="hljs-string">"accumulate"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, typ: <span class="hljs-built_in">type</span>[Value], accumulate: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">super</span>().__init__(typ)
        self.accumulate = accumulate
        self.values = <span class="hljs-built_in">list</span>[Value]()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, values: <span class="hljs-type">Sequence</span>[Value | <span class="hljs-built_in">list</span>[Value]]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        updated = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.accumulate:
            updated = <span class="hljs-built_in">bool</span>(self.values)
            self.values = <span class="hljs-built_in">list</span>[Value]()
        <span class="hljs-keyword">if</span> flat_values := <span class="hljs-built_in">tuple</span>(_flatten(values)):
            updated = <span class="hljs-literal">True</span>
            self.values.extend(flat_values)
        <span class="hljs-keyword">return</span> updated
</code></pre>
<p>å¦‚ä¸‹çš„ä»£ç ä½“ç°äº†æ˜¯å¦å¼€å¯â€œç´¯ç§¯æ•ˆåº”â€ä¹‹é—´çš„å·®å¼‚ã€‚å¦‚ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬ç”±å››ä¸ªNodeï¼ˆnode1ã€node2ã€node3å’Œnode4ï¼‰æ„å»ºäº†ä¸€ä¸ªPregelã€‚å››ä¸ªNodeåˆ†ä¸¤ä¸ªSuperstepå®Œæˆï¼Œå…¶ä¸­node1å’Œnode2å…ˆæ‰§è¡Œï¼Œnode3å’Œnode4åæ‰§è¡Œï¼Œå…·ä½“å®ç°å€ŸåŠ©äº†ä¸€ä¸ªNamedBarrierValueç±»å‹çš„Channelï¼ˆtriggerï¼‰ã€‚è¿™å››ä¸ªNodeéƒ½ä¼šå°†è‡ªå·±çš„åç§°å†™å…¥fooå’Œbarä¸¤ä¸ªTopicç±»å‹çš„é€šé“ï¼Œå…¶ä¸­barå¼€å¯äº†ç´¯ç§¯æ¨¡å¼ã€‚æ‰€æœ‰ä»æœ€åçš„è°ƒç”¨ç»“æœå¯ç”¨çœ‹å‡ºï¼Œé€šé“fooåªä¿ç•™äº†æœ€åSuperstepå†™å…¥çš„å†…å®¹ï¼Œè€Œé€šé“baråˆ™æŠŠæ•´ä¸ªæ‰§è¡Œæµç¨‹å†™å…¥çš„æ•°æ®éƒ½ä¿ç•™äº†ä¸‹æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.channels <span class="hljs-keyword">import</span> LastValue,NamedBarrierValue, Topic
<span class="hljs-keyword">from</span> langgraph.pregel <span class="hljs-keyword">import</span> Pregel, NodeBuilder

node1 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"start"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(trigger=<span class="hljs-string">"node1"</span>, foo=<span class="hljs-string">"node1"</span>, bar=<span class="hljs-string">"node1"</span>))
node2 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"start"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(trigger=<span class="hljs-string">"node2"</span>, foo=<span class="hljs-string">"node2"</span>, bar=<span class="hljs-string">"node2"</span>))

node3 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"trigger"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(foo=<span class="hljs-string">"node3"</span>, bar=<span class="hljs-string">"node3"</span>))
node4 = (NodeBuilder()
    .subscribe_to(<span class="hljs-string">"trigger"</span>, read=<span class="hljs-literal">False</span>)
    .write_to(foo=<span class="hljs-string">"node4"</span>, bar=<span class="hljs-string">"node4"</span>))

app = Pregel(
    nodes={<span class="hljs-string">"node1"</span>: node1, <span class="hljs-string">"node2"</span>: node2, <span class="hljs-string">"node3"</span>: node3, <span class="hljs-string">"node4"</span>: node4},
    channels={
        <span class="hljs-string">"start"</span>: LastValue(<span class="hljs-literal">None</span>),
        <span class="hljs-string">"trigger"</span>: NamedBarrierValue(<span class="hljs-built_in">list</span>,names={<span class="hljs-string">"node1"</span>, <span class="hljs-string">"node2"</span>}),
        <span class="hljs-string">"foo"</span>: Topic(<span class="hljs-built_in">list</span>),
        <span class="hljs-string">"bar"</span>: Topic(<span class="hljs-built_in">list</span>, accumulate=<span class="hljs-literal">True</span>),
    },
    input_channels=[<span class="hljs-string">"start"</span>],
    output_channels=[<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>],
)   

result = app.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"start"</span>: <span class="hljs-literal">None</span>})
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">set</span>(result[<span class="hljs-string">"foo"</span>]) == {<span class="hljs-string">"node3"</span>, <span class="hljs-string">"node4"</span>}
<span class="hljs-keyword">assert</span> <span class="hljs-built_in">set</span>(result[<span class="hljs-string">"bar"</span>]) == {<span class="hljs-string">"node1"</span>, <span class="hljs-string">"node2"</span>, <span class="hljs-string">"node3"</span>, <span class="hljs-string">"node4"</span>}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Requestsåº“å…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7603282168137842707</link>    <guid>https://juejin.cn/post/7603282168137842707</guid>    <pubDate>2026-02-06T05:15:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603282168137842707" data-draft-id="7603352061505650694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Requestsåº“å…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2026-02-06T05:15:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°å¼ è¯´æ•…äº‹"/> <meta itemprop="url" content="https://juejin.cn/user/741501567509111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Requestsåº“å…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/741501567509111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°å¼ è¯´æ•…äº‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:15:00.000Z" title="Fri Feb 06 2026 05:15:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. åº“çš„æ¦‚è§ˆä¸æ ¸å¿ƒä»·å€¼</h2>
<p>æƒ³è±¡ä¸€ä¸‹,åœ¨ç½‘ç»œä¸–ç•Œä¸­,å¦‚æœä½ æƒ³ä¸å„ç§ç½‘ç«™å’ŒæœåŠ¡è¿›è¡Œé€šä¿¡,å°±åƒæ˜¯ç”¨ä¼ ç»Ÿçš„ä¿¡ä»¶å¾€æ¥ã€‚ä½ éœ€è¦æ‰‹åŠ¨æ‰“åŒ…æ•°æ®ã€ç¼–å†™åœ°å€ã€å¤„ç†å›å¤ç¼–ç ,è¿™äº›ç¹ççš„ç»†èŠ‚ä¼šè®©ç®€å•çš„ä»»åŠ¡å˜å¾—å¤æ‚ã€‚<code>requests</code>åº“æ­£æ˜¯ä¸ºè§£å†³è¿™äº›é—®é¢˜è€Œç”Ÿçš„å·¥å…·ã€‚</p>
<p>Requestsæ˜¯Pythonä¸­æœ€æµè¡Œçš„HTTPå®¢æˆ·ç«¯åº“,å®ƒçš„è®¾è®¡å“²å­¦æ˜¯"ä¸ºäººç±»è®¾è®¡"ã€‚å®ƒå°†å¤æ‚çš„HTTPåè®®ç»†èŠ‚å°è£…åœ¨ç®€æ´çš„APIä¹‹ä¸‹,è®©å¼€å‘è€…èƒ½å¤Ÿç”¨æœ€å°‘çš„ä»£ç å®Œæˆç½‘ç»œè¯·æ±‚ã€‚ä¸Pythonæ ‡å‡†åº“ä¸­çš„<code>urllib</code>ç›¸æ¯”,Requestsçš„ä½¿ç”¨ä½“éªŒæå‡äº†90%ä»¥ä¸Šâ€”â€”ä½ ä¸å†éœ€è¦æ‰‹åŠ¨å¤„ç†URLç¼–ç ã€è¡¨å•æ•°æ®åºåˆ—åŒ–ã€è¿æ¥æ± ç®¡ç†ç­‰åº•å±‚ç»†èŠ‚ã€‚</p>
<p>Requestsåœ¨Pythonç”Ÿæ€ç³»ç»Ÿä¸­å æ®ç€ä¸å¯æˆ–ç¼ºçš„åœ°ä½ã€‚æ®PyPIå®˜æ–¹ç»Ÿè®¡,å®ƒçš„ä¸‹è½½é‡æ¯æœˆè¶…è¿‡10äº¿æ¬¡,è¶…è¿‡50ä¸‡ä¸ªå¼€æºé¡¹ç›®ä¾èµ–å®ƒã€‚æ— è®ºæ˜¯è°ƒç”¨REST APIã€æ„å»ºç½‘ç»œçˆ¬è™«ã€è‡ªåŠ¨åŒ–æµ‹è¯•,è¿˜æ˜¯å¼€å‘å¾®æœåŠ¡å®¢æˆ·ç«¯,Requestséƒ½æ˜¯é¦–é€‰å·¥å…·ã€‚å®ƒæ”¯æŒHTTP/1.1çš„æ‰€æœ‰ç‰¹æ€§,åŒ…æ‹¬è¿æ¥æ± ç®¡ç†ã€CookieæŒä¹…åŒ–ã€SSLéªŒè¯ã€è‡ªåŠ¨å†…å®¹è§£ç ç­‰,è®©HTTPè¯·æ±‚å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚</p>
<h2 data-id="heading-1">2. ç¯å¢ƒæ­å»ºä¸"Hello, World"</h2>
<h3 data-id="heading-2">å®‰è£…è¯´æ˜</h3>
<p>Requestsä¸æ˜¯Pythonæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†,éœ€è¦é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨pipå®‰è£…(æ¨è)</span>
pip install requests

<span class="hljs-comment"># ä½¿ç”¨condaå®‰è£…</span>
conda install requests

<span class="hljs-comment"># ä½¿ç”¨Pythonæ¨¡å—æ–¹å¼å®‰è£…</span>
python -m pip install requests
</code></pre>
<p>Requestså®˜æ–¹æ”¯æŒPython 3.9+ç‰ˆæœ¬,åŒæ—¶ä¹Ÿå…¼å®¹PyPyè§£é‡Šå™¨ã€‚å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°æƒé™é—®é¢˜,å¯ä»¥å°è¯•ä½¿ç”¨<code>--user</code>å‚æ•°æˆ–åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚</p>
<h3 data-id="heading-3">æœ€ç®€ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„"Hello, World"ç¤ºä¾‹,å±•ç¤ºå¦‚ä½•å‘é€GETè¯·æ±‚å¹¶è·å–å“åº”:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

<span class="hljs-comment"># å‘é€GETè¯·æ±‚åˆ°GitHub API</span>
response = requests.get(<span class="hljs-string">'https://api.github.com/events'</span>)

<span class="hljs-comment"># æ‰“å°å“åº”çŠ¶æ€ç </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çŠ¶æ€ç : <span class="hljs-subst">{response.status_code}</span>"</span>)

<span class="hljs-comment"># æ‰“å°å“åº”å†…å®¹çš„å‰100ä¸ªå­—ç¬¦</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å“åº”å†…å®¹: <span class="hljs-subst">{response.text[:<span class="hljs-number">100</span>]}</span>"</span>)
</code></pre>
<h3 data-id="heading-4">é€è¡Œè§£é‡Š</h3>
<ol>
<li><code>import requests</code> - å¯¼å…¥Requestsåº“,ä½¿å…¶åŠŸèƒ½åœ¨å½“å‰è„šæœ¬ä¸­å¯ç”¨ã€‚</li>
<li><code>response = requests.get('https://api.github.com/events')</code> - è°ƒç”¨<code>get()</code>æ–¹æ³•å‘GitHub APIå‘é€GETè¯·æ±‚,è¿”å›çš„<code>Response</code>å¯¹è±¡åŒ…å«äº†æœåŠ¡å™¨çš„å…¨éƒ¨å“åº”ä¿¡æ¯ã€‚</li>
<li><code>print(f"çŠ¶æ€ç : {response.status_code}")</code> - è®¿é—®<code>Response</code>å¯¹è±¡çš„<code>status_code</code>å±æ€§,è·å–HTTPçŠ¶æ€ç (200è¡¨ç¤ºæˆåŠŸ)ã€‚</li>
<li><code>print(f"å“åº”å†…å®¹: {response.text[:100]}")</code> - é€šè¿‡<code>text</code>å±æ€§è·å–å“åº”çš„æ–‡æœ¬å†…å®¹,å¹¶åˆ‡ç‰‡æ˜¾ç¤ºå‰100ä¸ªå­—ç¬¦ã€‚</li>
</ol>
<h3 data-id="heading-5">è¿è¡Œç»“æœ</h3>
<p>ç¨‹åºè¿è¡Œåä¼šè¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹:</p>
<pre><code class="hljs language-json" lang="json">çŠ¶æ€ç <span class="hljs-punctuation">:</span> <span class="hljs-number">200</span>
å“åº”å†…å®¹<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"25698765432"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"PushEvent"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"actor"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">12345678</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"login"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"userna
</span></code></pre>
<p>è¿™ä¸ªç®€å•çš„ä¾‹å­å±•ç¤ºäº†Requestsçš„æ ¸å¿ƒä¼˜åŠ¿:ç”¨ä¸‰è¡Œä»£ç å°±å®Œæˆäº†ä¸€æ¬¡å®Œæ•´çš„HTTPè¯·æ±‚,è‡ªåŠ¨å¤„ç†äº†è¿æ¥å»ºç«‹ã€æ•°æ®ä¼ è¾“ã€å“åº”è§£ç ç­‰æ‰€æœ‰ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-6">3. æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<p>Requestsåº“å›´ç»•å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µæ„å»º,ç†è§£è¿™äº›æ¦‚å¿µæœ‰åŠ©äºä½ æ›´çµæ´»åœ°ä½¿ç”¨å®ƒã€‚</p>
<h3 data-id="heading-7">3.1 è¯·æ±‚æ–¹æ³•(Request Methods)</h3>
<p>HTTPåè®®å®šä¹‰äº†å¤šç§è¯·æ±‚æ–¹æ³•,Requestsä¸ºæ¯ç§æ–¹æ³•éƒ½æä¾›äº†å¯¹åº”çš„å‡½æ•°:</p>
<ul>
<li><code>requests.get()</code> - è·å–èµ„æº</li>
<li><code>requests.post()</code> - æäº¤æ•°æ®</li>
<li><code>requests.put()</code> - æ›´æ–°èµ„æº(å®Œæ•´æ›¿æ¢)</li>
<li><code>requests.patch()</code> - æ›´æ–°èµ„æº(éƒ¨åˆ†ä¿®æ”¹)</li>
<li><code>requests.delete()</code> - åˆ é™¤èµ„æº</li>
<li><code>requests.head()</code> - è·å–å“åº”å¤´</li>
<li><code>requests.options()</code> - è·å–æœåŠ¡å™¨æ”¯æŒçš„æ–¹æ³•</li>
</ul>
<h3 data-id="heading-8">3.2 å“åº”å¯¹è±¡(Response Object)</h3>
<p>æ¯æ¬¡è¯·æ±‚å,Requestséƒ½ä¼šè¿”å›ä¸€ä¸ª<code>Response</code>å¯¹è±¡,å®ƒåŒ…å«äº†æœåŠ¡å™¨çš„å®Œæ•´å“åº”ä¿¡æ¯:</p>
<ul>
<li><code>response.status_code</code> - HTTPçŠ¶æ€ç </li>
<li><code>response.text</code> - å“åº”çš„æ–‡æœ¬å†…å®¹(è‡ªåŠ¨è§£ç )</li>
<li><code>response.content</code> - å“åº”çš„å­—èŠ‚å†…å®¹(åŸå§‹äºŒè¿›åˆ¶)</li>
<li><code>response.json()</code> - å°†JSONå“åº”è§£æä¸ºPythonå­—å…¸</li>
<li><code>response.headers</code> - å“åº”å¤´ä¿¡æ¯(å­—å…¸å½¢å¼)</li>
<li><code>response.cookies</code> - æœåŠ¡å™¨è®¾ç½®çš„Cookie</li>
</ul>
<h3 data-id="heading-9">3.3 ä¼šè¯å¯¹è±¡(Session Object)</h3>
<p><code>Session</code>å¯¹è±¡å…è®¸ä½ åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´ä¿æŒæŸäº›å‚æ•°(å¦‚Cookiesã€è®¤è¯ä¿¡æ¯),å¹¶å¤ç”¨TCPè¿æ¥,æ˜¾è‘—æé«˜æ€§èƒ½:</p>
<pre><code class="hljs language-python" lang="python">session = requests.Session()
session.headers.update({<span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'My App'</span>})

<span class="hljs-comment"># ç¬¬ä¸€ä¸ªè¯·æ±‚ä¼šä¿å­˜Cookies</span>
response1 = session.get(<span class="hljs-string">'https://httpbin.org/cookies/set/sessionid/123'</span>)

<span class="hljs-comment"># ç¬¬äºŒä¸ªè¯·æ±‚ä¼šè‡ªåŠ¨æºå¸¦ä¹‹å‰ä¿å­˜çš„Cookies</span>
response2 = session.get(<span class="hljs-string">'https://httpbin.org/cookies'</span>)
</code></pre>
<h3 data-id="heading-10">æ¦‚å¿µå…³ç³»å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[requestsåº“] --&gt; B[è¯·æ±‚æ–¹æ³•]
    A --&gt; C[å“åº”å¯¹è±¡]
    A --&gt; D[ä¼šè¯å¯¹è±¡]
    
    B --&gt; B1[get/post/put/deleteç­‰]
    B --&gt; B2[å‚æ•°ä¼ é€’: params/data/json]
    
    C --&gt; C1[status_code - çŠ¶æ€ç ]
    C --&gt; C2[text/content/json - å“åº”å†…å®¹]
    C --&gt; C3[headers/cookies - å…ƒä¿¡æ¯]
    
    D --&gt; D1[ä¿æŒCookieå’Œè®¤è¯ä¿¡æ¯]
    D --&gt; D2[å¤ç”¨TCPè¿æ¥]
    D --&gt; D3[æé«˜è¯·æ±‚æ€§èƒ½]
    
    B1 --&gt; C
    B2 --&gt; C
    D --&gt; B
</code></pre>
<p>è¿™ä¸ªå›¾è¡¨å±•ç¤ºäº†Requestsåº“çš„æ ¸å¿ƒæ¦‚å¿µåŠå…¶å…³ç³»:è¯·æ±‚æ–¹æ³•ç”¨äºå‘é€è¯·æ±‚,å“åº”å¯¹è±¡ç”¨äºæ¥æ”¶å’Œå¤„ç†æœåŠ¡å™¨çš„å›åº”,è€Œä¼šè¯å¯¹è±¡åˆ™åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´æä¾›çŠ¶æ€ä¿æŒå’Œè¿æ¥å¤ç”¨ã€‚</p>
<h2 data-id="heading-11">4. å®æˆ˜æ¼”ç»ƒ:è§£å†³ä¸€ä¸ªå…¸å‹é—®é¢˜</h2>
<h3 data-id="heading-12">éœ€æ±‚åˆ†æ</h3>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ªå¤©æ°”æŸ¥è¯¢åº”ç”¨,èƒ½å¤Ÿè·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”ä¿¡æ¯ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å…è´¹çš„å¤©æ°”API,é€šè¿‡å‘é€HTTPè¯·æ±‚æ¥è·å–æ•°æ®,å¹¶è§£æè¿”å›çš„JSONå“åº”ã€‚</p>
<h3 data-id="heading-13">æ–¹æ¡ˆè®¾è®¡</h3>
<p>è¿™ä¸ªé¡¹ç›®å°†å±•ç¤ºRequestsåº“çš„å‡ ä¸ªæ ¸å¿ƒåŠŸèƒ½:</p>
<ol>
<li>ä½¿ç”¨<code>requests.get()</code>å‘é€å¸¦å‚æ•°çš„GETè¯·æ±‚</li>
<li>é€šè¿‡<code>params</code>å‚æ•°ä¼ é€’æŸ¥è¯¢å‚æ•°(åŸå¸‚åç§°)</li>
<li>ä½¿ç”¨<code>response.json()</code>è§£æJSONå“åº”</li>
<li>å®ç°é”™è¯¯å¤„ç†å’Œå¼‚å¸¸æ•è·</li>
<li>å±•ç¤ºå“åº”æ•°æ®çš„æå–å’Œæ ¼å¼åŒ–</li>
</ol>
<h3 data-id="heading-14">ä»£ç å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> requests.exceptions <span class="hljs-keyword">import</span> RequestException

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city</span>):
    <span class="hljs-string">"""
    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯
    
    Args:
        city (str): åŸå¸‚åç§°,ä¾‹å¦‚"Beijing"æˆ–"Shanghai"
    
    Returns:
        dict: åŒ…å«å¤©æ°”ä¿¡æ¯çš„å­—å…¸,å¤±è´¥æ—¶è¿”å›None
    """</span>
    <span class="hljs-comment"># ä½¿ç”¨å…è´¹çš„å¤©æ°”API(ç¤ºä¾‹ä½¿ç”¨httpbin.orgæ¨¡æ‹Ÿ)</span>
    base_url = <span class="hljs-string">"https://httpbin.org/get"</span>
    params = {
        <span class="hljs-string">'city'</span>: city,
        <span class="hljs-string">'units'</span>: <span class="hljs-string">'metric'</span>
    }
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å‘é€GETè¯·æ±‚,è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º5ç§’</span>
        response = requests.get(base_url, params=params, timeout=<span class="hljs-number">5</span>)
        
        <span class="hljs-comment"># æ£€æŸ¥å“åº”çŠ¶æ€ç ,å¦‚æœä¸æ˜¯2xxåˆ™æŠ›å‡ºå¼‚å¸¸</span>
        response.raise_for_status()
        
        <span class="hljs-comment"># è§£æJSONå“åº”</span>
        data = response.json()
        
        <span class="hljs-comment"># æå–å¤©æ°”ä¿¡æ¯(è¿™é‡Œæ¨¡æ‹ŸçœŸå®APIçš„æ•°æ®ç»“æ„)</span>
        weather_info = {
            <span class="hljs-string">'city'</span>: data.get(<span class="hljs-string">'args'</span>, {}).get(<span class="hljs-string">'city'</span>, city),
            <span class="hljs-string">'temperature'</span>: <span class="hljs-number">25</span>,  <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®</span>
            <span class="hljs-string">'condition'</span>: <span class="hljs-string">'æ™´æœ—'</span>,
            <span class="hljs-string">'humidity'</span>: <span class="hljs-number">45</span>,
            <span class="hljs-string">'wind_speed'</span>: <span class="hljs-number">3.2</span>
        }
        
        <span class="hljs-keyword">return</span> weather_info
        
    <span class="hljs-keyword">except</span> requests.exceptions.Timeout:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯: è¯·æ±‚è¶…æ—¶,æ— æ³•è·å–<span class="hljs-subst">{city}</span>çš„å¤©æ°”ä¿¡æ¯"</span>)
    <span class="hljs-keyword">except</span> requests.exceptions.HTTPError <span class="hljs-keyword">as</span> err:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"HTTPé”™è¯¯: <span class="hljs-subst">{err.response.status_code}</span>"</span>)
    <span class="hljs-keyword">except</span> requests.exceptions.RequestException <span class="hljs-keyword">as</span> err:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯·æ±‚å‡ºé”™: <span class="hljs-subst">{err}</span>"</span>)
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°:è·å–å¹¶æ˜¾ç¤ºå¤šä¸ªåŸå¸‚çš„å¤©æ°”"""</span>
    cities = [<span class="hljs-string">'Beijing'</span>, <span class="hljs-string">'Shanghai'</span>, <span class="hljs-string">'Guangzhou'</span>]
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å¤©æ°”æŸ¥è¯¢ç³»ç»Ÿ ===\n"</span>)
    
    <span class="hljs-keyword">for</span> city <span class="hljs-keyword">in</span> cities:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­£åœ¨æŸ¥è¯¢ <span class="hljs-subst">{city}</span> çš„å¤©æ°”..."</span>)
        weather = get_weather(city)
        
        <span class="hljs-keyword">if</span> weather:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{weather[<span class="hljs-string">'city'</span>]}</span> å¤©æ°”ä¿¡æ¯:"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ¸©åº¦: <span class="hljs-subst">{weather[<span class="hljs-string">'temperature'</span>]}</span>Â°C"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å¤©æ°”: <span class="hljs-subst">{weather[<span class="hljs-string">'condition'</span>]}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ¹¿åº¦: <span class="hljs-subst">{weather[<span class="hljs-string">'humidity'</span>]}</span>%"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  é£é€Ÿ: <span class="hljs-subst">{weather[<span class="hljs-string">'wind_speed'</span>]}</span> m/s"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">40</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre>
<h3 data-id="heading-15">è¿è¡Œè¯´æ˜</h3>
<ol>
<li>ç¡®ä¿å·²å®‰è£…Requestsåº“: <code>pip install requests</code></li>
<li>å°†ä»£ç ä¿å­˜ä¸º<code>weather_app.py</code></li>
<li>è¿è¡Œç¨‹åº: <code>python weather_app.py</code></li>
</ol>
<p>ç¨‹åºä¼šä¾æ¬¡æŸ¥è¯¢ä¸‰ä¸ªåŸå¸‚çš„å¤©æ°”ä¿¡æ¯,å¹¶æ ¼å¼åŒ–è¾“å‡ºç»“æœã€‚è™½ç„¶ç¤ºä¾‹ä½¿ç”¨äº†httpbin.orgæ¨¡æ‹Ÿæ•°æ®,ä½†ä»£ç ç»“æ„å¯ä»¥ç›´æ¥é€‚é…çœŸå®çš„å¤©æ°”API(å¦‚OpenWeatherMapã€å’Œé£å¤©æ°”ç­‰),åªéœ€ä¿®æ”¹<code>base_url</code>å’Œæ•°æ®æå–é€»è¾‘å³å¯ã€‚</p>
<h3 data-id="heading-16">å…³é”®ç‚¹è§£æ</h3>
<ul>
<li><strong>å‚æ•°ä¼ é€’</strong>: ä½¿ç”¨<code>params</code>å­—å…¸ä¼ é€’æŸ¥è¯¢å‚æ•°,Requestsä¼šè‡ªåŠ¨è¿›è¡ŒURLç¼–ç </li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>: <code>timeout=5</code>å‚æ•°é˜²æ­¢è¯·æ±‚æ— é™æœŸç­‰å¾…</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: ä½¿ç”¨<code>raise_for_status()</code>è‡ªåŠ¨æ£€æŸ¥çŠ¶æ€ç ,å¹¶æ•è·å„ç±»å¼‚å¸¸</li>
<li><strong>JSONè§£æ</strong>: <code>response.json()</code>å°†JSONå“åº”ç›´æ¥è½¬æ¢ä¸ºPythonå­—å…¸</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>: å°†æ ¸å¿ƒåŠŸèƒ½å°è£…ä¸ºå‡½æ•°,ä¾¿äºå¤ç”¨å’Œæµ‹è¯•</li>
</ul>
<h2 data-id="heading-17">5. æœ€ä½³å®è·µä¸å¸¸è§é™·é˜±</h2>
<h3 data-id="heading-18">å¸¸è§é”™è¯¯åŠè§„é¿æ–¹æ³•</h3>
<h4 data-id="heading-19">é”™è¯¯1:ä¸æ£€æŸ¥çŠ¶æ€ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
response = requests.get(<span class="hljs-string">'https://api.example.com/data'</span>)
data = response.json()  <span class="hljs-comment"># å¦‚æœçŠ¶æ€ç ä¸æ˜¯200,è¿™é‡Œå¯èƒ½æŠ›å‡ºå¼‚å¸¸</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
response = requests.get(<span class="hljs-string">'https://api.example.com/data'</span>)
response.raise_for_status()  <span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€ç ,é2xxæ—¶æŠ›å‡ºHTTPError</span>
data = response.json()
</code></pre>
<h4 data-id="heading-20">é”™è¯¯2:ä¸è®¾ç½®è¶…æ—¶æ—¶é—´</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
response = requests.get(<span class="hljs-string">'https://api.example.com/data'</span>)
<span class="hljs-comment"># å¦‚æœç½‘ç»œæ•…éšœæˆ–æœåŠ¡å™¨æ— å“åº”,ç¨‹åºä¼šæ— é™æœŸç­‰å¾…</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
response = requests.get(<span class="hljs-string">'https://api.example.com/data'</span>, timeout=<span class="hljs-number">10</span>)
<span class="hljs-comment"># 10ç§’åè¶…æ—¶,æŠ›å‡ºTimeoutå¼‚å¸¸</span>
</code></pre>
<h4 data-id="heading-21">é”™è¯¯3:åœ¨å¾ªç¯ä¸­é‡å¤åˆ›å»ºä¼šè¯</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> url_list:
    response = requests.get(url)  <span class="hljs-comment"># æ¯æ¬¡éƒ½å»ºç«‹æ–°è¿æ¥,æ•ˆç‡ä½ä¸‹</span>

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
<span class="hljs-keyword">with</span> requests.Session() <span class="hljs-keyword">as</span> session:
    <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> url_list:
        response = session.get(url)  <span class="hljs-comment"># å¤ç”¨è¿æ¥,æ€§èƒ½æ›´é«˜</span>
</code></pre>
<h3 data-id="heading-22">æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li>
<p><strong>å§‹ç»ˆä½¿ç”¨ä¼šè¯(Session)</strong>: å¯¹äºå‘åŒä¸€åŸŸåå‘é€å¤šä¸ªè¯·æ±‚çš„åœºæ™¯,ä½¿ç”¨Sessionå¯ä»¥å¤ç”¨TCPè¿æ¥,å‡å°‘æ¡æ‰‹å¼€é”€,æé«˜æ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>åˆç†è®¾ç½®è¶…æ—¶</strong>: å»ºè®®ä¸ºæ‰€æœ‰è¯·æ±‚è®¾ç½®è¶…æ—¶å‚æ•°,å¯ä»¥ä½¿ç”¨å…ƒç»„åˆ†åˆ«è®¾ç½®è¿æ¥è¶…æ—¶å’Œè¯»å–è¶…æ—¶,ä¾‹å¦‚<code>timeout=(3, 10)</code>ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†JSONè§£æå¼‚å¸¸</strong>: å¹¶éæ‰€æœ‰APIå“åº”éƒ½æ˜¯æœ‰æ•ˆçš„JSON,ä½¿ç”¨<code>response.json()</code>æ—¶åº”è¯¥æ•è·<code>JSONDecodeError</code>:</p>
</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json

<span class="hljs-keyword">try</span>:
    data = response.json()
<span class="hljs-keyword">except</span> json.JSONDecodeError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å“åº”ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼"</span>)
    data = <span class="hljs-literal">None</span>
</code></pre>
<ol start="4">
<li><strong>ä½¿ç”¨User-Agentæ ‡è¯†</strong>: æŸäº›ç½‘ç«™ä¼šæ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„User-Agent,å»ºè®®è®¾ç½®ä¸€ä¸ªåˆç†çš„æ ‡è¯†:</li>
</ol>
<pre><code class="hljs language-python" lang="python">headers = {
    <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'MyWeatherApp/1.0 (https://myapp.com)'</span>
}
response = requests.get(url, headers=headers)
</code></pre>
<ol start="5">
<li><strong>HTTPSè¯ä¹¦éªŒè¯</strong>: ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥éªŒè¯SSLè¯ä¹¦,ä»…åœ¨æµ‹è¯•ç¯å¢ƒæˆ–ç‰¹å®šåœºæ™¯ä¸‹ç¦ç”¨:</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒ:éªŒè¯è¯ä¹¦(é»˜è®¤è¡Œä¸º)</span>
response = requests.get(<span class="hljs-string">'https://example.com'</span>)

<span class="hljs-comment"># æµ‹è¯•ç¯å¢ƒ:ç¦ç”¨è¯ä¹¦éªŒè¯</span>
response = requests.get(<span class="hljs-string">'https://example.com'</span>, verify=<span class="hljs-literal">False</span>)
</code></pre>
<ol start="6">
<li><strong>ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯</strong>: APIå¯†é’¥ã€ä»¤ç‰Œç­‰æ•æ„Ÿä¿¡æ¯åº”è¯¥å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­,è€Œä¸æ˜¯ç¡¬ç¼–ç åœ¨ä»£ç é‡Œ:</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os

api_key = os.environ.get(<span class="hljs-string">'MY_API_KEY'</span>)
headers = {<span class="hljs-string">'Authorization'</span>: <span class="hljs-string">f'Bearer <span class="hljs-subst">{api_key}</span>'</span>}
</code></pre>
<h3 data-id="heading-23">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>Requestsé»˜è®¤ä½¿ç”¨è¿æ¥æ± ,ä¼šè‡ªåŠ¨å¤„ç†Keep-Alive,æ— éœ€æ‰‹åŠ¨ç®¡ç†è¿æ¥</li>
<li>ä¸‹è½½å¤§æ–‡ä»¶æ—¶,ä½¿ç”¨<code>stream=True</code>å‚æ•°é€æ­¥è¯»å–,é¿å…å†…å­˜æº¢å‡º</li>
<li>å¤„ç†é‡å®šå‘æ—¶,å¯ä»¥é€šè¿‡<code>allow_redirects=False</code>ç¦ç”¨è‡ªåŠ¨é‡å®šå‘</li>
<li>å¯¹äºéœ€è¦è®¤è¯çš„API,ä¼˜å…ˆä½¿ç”¨Sessionå¯¹è±¡çš„<code>auth</code>å‚æ•°æˆ–<code>headers</code>å‚æ•°,è€Œä¸æ˜¯åœ¨æ¯ä¸ªè¯·æ±‚ä¸­é‡å¤è®¾ç½®</li>
</ul>
<h2 data-id="heading-24">6. è¿›é˜¶æŒ‡å¼•</h2>
<h3 data-id="heading-25">é«˜çº§åŠŸèƒ½</h3>
<p>Requestsæä¾›äº†è®¸å¤šé«˜çº§åŠŸèƒ½,å¯ä»¥åº”å¯¹å¤æ‚çš„HTTPäº¤äº’åœºæ™¯:</p>
<ul>
<li><strong>è®¤è¯å¤„ç†</strong>: æ”¯æŒBasicè®¤è¯ã€Digestè®¤è¯ã€OAuthç­‰å¤šç§è®¤è¯æ–¹å¼</li>
<li><strong>ä»£ç†é…ç½®</strong>: é€šè¿‡<code>proxies</code>å‚æ•°é…ç½®HTTP/SOCKSä»£ç†</li>
<li><strong>æµå¼ä¸Šä¼ /ä¸‹è½½</strong>: å¤„ç†å¤§æ–‡ä»¶ä¼ è¾“æ—¶é¿å…å†…å­˜é—®é¢˜</li>
<li><strong>äº‹ä»¶é’©å­</strong>: åœ¨è¯·æ±‚çš„ä¸åŒé˜¶æ®µæ³¨å†Œå›è°ƒå‡½æ•°</li>
<li><strong>è‡ªå®šä¹‰é€‚é…å™¨</strong>: å®ç°è‡ªå®šä¹‰çš„ä¼ è¾“åè®®æˆ–è¿æ¥é€»è¾‘</li>
</ul>
<h3 data-id="heading-26">ç”Ÿæ€æ‰©å±•</h3>
<p>Requestsçš„ç”Ÿæ€ä¸°å¯Œ,æœ‰è®¸å¤šæ‰©å±•åº“å¯ä»¥å¢å¼ºå…¶åŠŸèƒ½:</p>
<ul>
<li><code>requests-oauthlib</code>: OAuthè®¤è¯æ”¯æŒ</li>
<li><code>requests-cache</code>: å“åº”ç¼“å­˜,å‡å°‘é‡å¤è¯·æ±‚</li>
<li><code>requests-toolbelt</code>: å®ç”¨å·¥å…·é›†åˆ,å¦‚Multipartä¸Šä¼ ã€æµå¼è¯·æ±‚ç­‰</li>
<li><code>grequests</code>: åŸºäºgeventçš„å¼‚æ­¥è¯·æ±‚</li>
<li><code>requests-threads</code>: å¤šçº¿ç¨‹è¯·æ±‚æ”¯æŒ</li>
</ul>
<h3 data-id="heading-27">å­¦ä¹ è·¯å¾„</h3>
<p>å¦‚æœä½ æƒ³æ·±å…¥å­¦ä¹ Requests,å»ºè®®æŒ‰ä»¥ä¸‹è·¯å¾„è¿›è¡Œ:</p>
<ol>
<li><strong>æŒæ¡åŸºç¡€API</strong>: ç†Ÿæ‚‰æ‰€æœ‰è¯·æ±‚æ–¹æ³•å’ŒResponseå¯¹è±¡çš„å±æ€§</li>
<li><strong>ç†è§£HTTPåè®®</strong>: å­¦ä¹ HTTP/1.1è§„èŒƒ,ç†è§£çŠ¶æ€ç ã€è¯·æ±‚å¤´ã€å“åº”å¤´çš„å«ä¹‰</li>
<li><strong>æ¢ç´¢é«˜çº§ç‰¹æ€§</strong>: ç ”ç©¶Sessionå¯¹è±¡ã€è¿æ¥æ± ã€SSLéªŒè¯ç­‰é«˜çº§åŠŸèƒ½</li>
<li><strong>é˜…è¯»æºä»£ç </strong>: Requestsçš„ä»£ç ç»“æ„æ¸…æ™°,é˜…è¯»æºç æœ‰åŠ©äºç†è§£å…¶å®ç°åŸç†</li>
<li><strong>å®è·µé¡¹ç›®</strong>: å¼€å‘ä¸€ä¸ªå®Œæ•´çš„çˆ¬è™«æˆ–APIå®¢æˆ·ç«¯é¡¹ç›®</li>
</ol>
<h3 data-id="heading-28">å­¦ä¹ èµ„æº</h3>
<ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.python-requests.org" target="_blank" title="https://docs.python-requests.org" ref="nofollow noopener noreferrer">docs.python-requests.org</a> (æœ€æƒå¨ã€æœ€å®Œæ•´çš„èµ„æº)</li>
<li><strong>GitHubä»“åº“</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpsf%2Frequests" target="_blank" title="https://github.com/psf/requests" ref="nofollow noopener noreferrer">github.com/psf/requestâ€¦</a> (æºç ã€Issueã€è®¨è®º)</li>
<li><strong>Stack Overflow</strong>: æœç´¢æ ‡ç­¾[python-requests]æ‰¾åˆ°å¸¸è§é—®é¢˜çš„è§£ç­”</li>
<li><strong>ç¤¾åŒºåšå®¢</strong>: è®¸å¤šå¼€å‘è€…åˆ†äº«äº†Requestsçš„å®æˆ˜ç»éªŒå’ŒæŠ€å·§</li>
</ul>
<p>Requestsåº“çš„è®¾è®¡ç†å¿µæ˜¯"ç®€å•å³ç¾",ä½†å®ƒçš„èƒŒåæ˜¯HTTPåè®®çš„å¤æ‚æ€§å’Œç½‘ç»œç¼–ç¨‹çš„æŒ‘æˆ˜ã€‚æŒæ¡äº†Requests,ä½ å°±æŒæ¡äº†ä¸ç½‘ç»œä¸–ç•Œæ²Ÿé€šçš„åŸºæœ¬æŠ€èƒ½ã€‚ç»§ç»­æ¢ç´¢,ä½ ä¼šå‘ç°HTTPè¯·æ±‚çš„ä¸–ç•Œè¿œæ¯”ä½ æƒ³è±¡çš„æ›´åŠ ä¸°å¯Œå’Œæœ‰è¶£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šES|QL æ”¯æŒ dense vector æœç´¢]]></title>    <link>https://juejin.cn/post/7603252259561783332</link>    <guid>https://juejin.cn/post/7603252259561783332</guid>    <pubDate>2026-02-06T03:37:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603252259561783332" data-draft-id="7603282168137498643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šES|QL æ”¯æŒ dense vector æœç´¢"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2026-02-06T03:37:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šES|QL æ”¯æŒ dense vector æœç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:37:36.000Z" title="Fri Feb 06 2026 03:37:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fauthor%2Fcarlos-delgado" title="https://www.elastic.co/search-labs/author/carlos-delgado" target="_blank" ref="nofollow noopener noreferrer">Carlos Delgado</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/973046f2739744829b510c37e824b6d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953856&amp;x-signature=LffbOsVLWQflbKxWV6Nyp4%2F2NZA%3D" alt="" loading="lazy"/></p>
<p>åœ¨ ES|QL ä¸­å¯¹ä½ çš„ dense_vector æ•°æ®è¿›è¡Œå‘é‡æœç´¢ã€‚</p>
<p>æ›´å¤šé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F152597172" title="https://elasticstack.blog.csdn.net/article/details/152597172" target="_blank" ref="nofollow noopener noreferrer">Elasticsearchï¼šä½¿ç”¨æ¨ç†ç«¯ç‚¹åŠè¯­ä¹‰æœç´¢æ¼”ç¤º</a></p>
<p>åŠ¨æ‰‹ä½“éªŒ Elasticsearchï¼šæŸ¥çœ‹æˆ‘ä»¬çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felastic%2Felasticsearch-labs%3Ftab%3Dreadme-ov-file" title="https://github.com/elastic/elasticsearch-labs?tab=readme-ov-file" target="_blank" ref="nofollow noopener noreferrer">sample notebooks</a>ï¼Œå¼€å§‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fcloud%2Fcloud-trial-overview" title="https://www.elastic.co/cloud/cloud-trial-overview" target="_blank" ref="nofollow noopener noreferrer">å…è´¹çš„ cloud trial</a>ï¼Œæˆ–è€…åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F143747798" title="https://elasticstack.blog.csdn.net/article/details/143747798" target="_blank" ref="nofollow noopener noreferrer">æœ¬åœ°æœºå™¨</a>ä¸Šè¯•ç”¨ Elasticã€‚</p>
<hr/>
<p>ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ Elasticsearch Query Language (<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fquery-filter%2Flanguages%2Fesql" title="https://www.elastic.co/docs/explore-analyze/query-filter/languages/esql" target="_blank" ref="nofollow noopener noreferrer">ES|QL</a>) è¿›è¡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Fintroduction-to-vector-search" title="https://www.elastic.co/search-labs/blog/introduction-to-vector-search" target="_blank" ref="nofollow noopener noreferrer">vector æœç´¢</a>ï¼ES|QL å¯ä»¥æ£€ç´¢ã€è¿‡æ»¤å¹¶è¯„åˆ† dense_vector å­—æ®µã€‚ä½¿ç”¨ k-nearest neighbors (KNN) æŸ¥è¯¢è¿›è¡Œå¿«é€Ÿã€è¿‘ä¼¼çš„æœ€è¿‘é‚»æœç´¢ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚ä½¿ç”¨ vector similarity å‡½æ•°è¿›è¡Œç²¾ç¡®æœç´¢å’Œè‡ªå®šä¹‰è¯„åˆ†ã€‚</p>
<p>åœ¨ ES|QL ä¸­ä½¿ç”¨ KNN æ¯”åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fquery-filter%2Flanguages%2Fquerydsl" title="https://www.elastic.co/docs/explore-analyze/query-filter/languages/querydsl" target="_blank" ref="nofollow noopener noreferrer">Query DSL</a> ä¸­æ›´ç®€å•ã€‚prefilters å’Œæ¯ä¸ª shard è¦æ£€ç´¢çš„ç»“æœæ•°é‡ä¼šä» ES|QL æŸ¥è¯¢è‡ªåŠ¨æ¨æ–­ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ vector æœç´¢ï¼Ÿ</h2>
<p>ç°ä»£æœç´¢ä¸å†ä»…é™äºç²¾ç¡®çš„ keyword åŒ¹é…ã€‚ç”¨æˆ·å¸Œæœ›ç³»ç»Ÿèƒ½ç†è§£å«ä¹‰ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡æœ¬ã€‚è¿™å°±æ˜¯å‘é‡Â <a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F134748014" title="https://elasticstack.blog.csdn.net/article/details/134748014" target="_blank" ref="nofollow noopener noreferrer">embeddings</a> å’Œ Elasticsearch çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Fmapping-reference%2Fdense-vector" title="https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/dense-vector" target="_blank" ref="nofollow noopener noreferrer">dense_vector</a> å­—æ®µç±»å‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>åœ¨ Elasticsearch ä¸­ä½¿ç”¨ vector æœç´¢æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Fmapping-reference%2Fsemantic-text" title="https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/semantic-text" target="_blank" ref="nofollow noopener noreferrer">semantic_text å­—æ®µç±»å‹</a>ã€‚å®ƒå…è®¸ä½ è‡ªåŠ¨ç”Ÿæˆ text embeddingsã€æ‰§è¡Œè¯­ä¹‰æœç´¢ï¼Œå¹¶å¤„ç† chunkingã€‚ç„¶è€Œï¼Œå½“ä»¥ä¸‹æƒ…å†µå‡ºç°æ—¶ï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨ dense_vectorï¼š</p>
<ul>
<li>ä½ å·²ç»åœ¨ä½¿ç”¨ dense_vector å­—æ®µã€‚</li>
<li>ä½ ä½¿ç”¨çš„æ˜¯éæ–‡æœ¬æ•°æ®ï¼Œæ¯”å¦‚ imagesã€sound æˆ– videoã€‚</li>
<li>ä½ éœ€è¦åœ¨å‘ Elasticsearch ingestion ä¹‹å‰å•ç‹¬ç”Ÿæˆ embeddingsã€‚</li>
<li>ä½ éœ€è¦æ‰§è¡Œè‡ªå®šä¹‰æˆ–é«˜çº§è¯„åˆ†ã€‚</li>
<li>ä½ å¸Œæœ›è¿›è¡Œç²¾ç¡®çš„ nearest neighbors æœç´¢ã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Felasticsearch%2Fmapping-reference%2Fdense-vector" title="https://www.elastic.co/docs/reference/elasticsearch/mapping-reference/dense-vector" target="_blank" ref="nofollow noopener noreferrer">dense_vector</a> å­˜å‚¨ç”± machine learning models ç”Ÿæˆçš„æ•°å€¼ embeddingsã€‚è¿™äº› embeddings æ•æ‰è¯­ä¹‰ç›¸ä¼¼æ€§ï¼šå«ä¹‰ç›¸è¿‘çš„æ–‡æ¡£åœ¨é«˜ç»´ç©ºé—´ä¸­å‘é‡å½¼æ­¤æ¥è¿‘ã€‚</p>
<p>ä½¿ç”¨ vectorsï¼Œä½ å¯ä»¥æ„å»ºï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search" title="https://www.elastic.co/docs/solutions/search/semantic-search" target="_blank" ref="nofollow noopener noreferrer">è¯­ä¹‰æ–‡æœ¬æœç´¢</a>ï¼Œç”¨äºæŸ¥æ‰¾ä¸æŸä¸ªé—®é¢˜ç›¸å…³çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>Retrieval-augmented generation (<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F134396254" title="https://elasticstack.blog.csdn.net/article/details/134396254" target="_blank" ref="nofollow noopener noreferrer">RAG</a>)ã€‚</p>
</li>
<li>
<p>æ¨èç³»ç»Ÿã€‚</p>
</li>
</ul>
<p>ES|QL ä¸º Elasticsearch å¸¦æ¥äº† query-piped ä½“éªŒçš„å¼ºå¤§åŠŸèƒ½ã€‚å¯¹ dense_vector å­—æ®µçš„ä¸€æµæ”¯æŒæ„å‘³ç€ä½ ç°åœ¨å¯ä»¥åœ¨ ES|QL ä¸­ç›´æ¥ä½¿ç”¨ vectors æ£€ç´¢ã€è¿‡æ»¤ã€è¯„åˆ†å’Œæœç´¢ï¼ŒåŒæ—¶å¤„ç†æ–‡æœ¬å’Œéæ–‡æœ¬æ•°æ®ã€‚</p>
<p>æœ¬æ–‡å°†æ¼”ç¤ºå¦‚ä½•åœ¨ ES|QL ä¸­ä½¿ç”¨ dense_vector å­—æ®µï¼Œä»åŸºæœ¬æ£€ç´¢åˆ°è¿‘ä¼¼å’Œç²¾ç¡®ç›¸ä¼¼åº¦æœç´¢ï¼Œä»¥åŠå¦‚ä½•å°† vector æœç´¢ä½œä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F145697606" title="https://elasticstack.blog.csdn.net/article/details/145697606" target="_blank" ref="nofollow noopener noreferrer">hybrid search</a> ç­–ç•¥çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-1">åŸºç¡€ï¼šæ£€ç´¢ vector æ•°æ®</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ª mapping ç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  {
2.    <span class="hljs-string">"mappings"</span>: {
3.      <span class="hljs-string">"properties"</span>: {
4.        <span class="hljs-string">"title"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span> },
5.        <span class="hljs-string">"category"</span>: { <span class="hljs-string">"type"</span>: <span class="hljs-string">"keyword"</span> },
6.        <span class="hljs-string">"content_vector"</span>: {
7.          <span class="hljs-string">"type"</span>: <span class="hljs-string">"dense_vector"</span>,
8.          <span class="hljs-string">"dims"</span>: 384,
9.          <span class="hljs-string">"similarity"</span>: <span class="hljs-string">"cosine"</span>
10.        }
11.      }
12.    }
13.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>ä½ å¯ä»¥åƒæ£€ç´¢å…¶ä»–åˆ—ä¸€æ ·æ£€ç´¢ vector å­—æ®µï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  FROM documents
<span class="hljs-bullet">2.</span>  | KEEP title, content<span class="hljs-emphasis">_vector
3.  | LIMIT 5

`AIå†™ä»£ç 
</span></code></pre>
<p>è¯·è®°ä½ï¼Œvectors å¯èƒ½å¾ˆå¤§ã€‚ç”¨äºæ¢ç´¢å’Œè°ƒè¯•æ—¶ï¼Œæ£€ç´¢ vector æ•°æ®å¯èƒ½æœ‰ç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé™¤éç¡®å®å¿…è¦ï¼Œå¦åˆ™åº”é¿å…è¿”å›å®Œæ•´çš„ vector æ•°æ®ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ ES|QL æ„é€ æ¥æ£€æŸ¥æœ‰å¤šå°‘è¡ŒåŒ…å« vector ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> content_vector <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> STATS non_null <span class="hljs-operator">=</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>)

`AIå†™ä»£ç 
</code></pre>
<h2 data-id="heading-2">è¿‘ä¼¼æœç´¢ä½¿ç”¨ KNN</h2>
<p>Vector search æ„å‘³ç€æ‰¾åˆ°ä¸ç»™å®š query vector æœ€ç›¸ä¼¼çš„ vectorsã€‚</p>
<p>å¯¹äºå¤§å‹æ•°æ®é›†ï¼Œæœ€å¸¸è§çš„æ–¹æ³•æ˜¯è¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F138368674" title="https://elasticstack.blog.csdn.net/article/details/138368674" target="_blank" ref="nofollow noopener noreferrer">approximate nearest neighbor</a>Â - ANNï¼‰æœç´¢ã€‚ANN é€šè¿‡ä½¿ç”¨å…è®¸å¿«é€Ÿè®¡ç®—ç›¸ä¼¼ vectors çš„æ•°æ®ç»“æ„æ¥å¯»æ‰¾æœ€ç›¸ä¼¼çš„ vectorsï¼Œä½†ä¸èƒ½ä¿è¯è€ƒè™‘åˆ°æ‰€æœ‰ vectorsã€‚</p>
<p>ES|QL é€šè¿‡ KNN å‡½æ•°æä¾›è¿‘ä¼¼æœç´¢ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  FROM documents MEDATADATA <span class="hljs-emphasis">_score
2.  | WHERE KNN(content_</span>vector, [0.12, -0.03, 0.98, ...])
<span class="hljs-bullet">3.</span>  | SORT <span class="hljs-emphasis">_score DESC
4.  | KEEP title, _</span>score
<span class="hljs-bullet">5.</span>  | LIMIT 10

`AIå†™ä»£ç 
</code></pre>
<p>è¿™ä¸ªç®€å•ç¤ºä¾‹ï¼š</p>
<ul>
<li>åœ¨ content_vector å­—æ®µä¸Šæœç´¢ã€‚</li>
<li>ä½¿ç”¨å¯†é›†å‘é‡æŸ¥è¯¢ [0.12, -0.03, 0.98, ...] æ¥æœç´¢ä¸å…¶ç›¸ä¼¼çš„å‘é‡ã€‚</li>
<li>æŒ‰åˆ†æ•°æ’åºï¼Œä½¿ç”¨ <code>KNN</code> å‡½æ•°å¡«å……çš„ METADATA _score å±æ€§ã€‚</li>
<li>ä»…ä¿ç•™ title å’Œ scoreï¼Œå› ä¸º content_vector å­—æ®µä¸éœ€è¦è¿”å›ï¼Œè¿™æ ·å¯ä»¥é¿å…åŠ è½½å®ƒçš„å†…å®¹ã€‚</li>
<li>ä½¿ç”¨ LIMIT æ£€ç´¢å‰ 10 ä¸ªå…ƒç´ ï¼Œè¿™ä¼šè‡ªåŠ¨å°† KNN å‡½æ•°çš„ k è®¾ç½®ä¸º 10ã€‚</li>
</ul>
<p>KNN å‡½æ•°å¯ä»¥é€šè¿‡ä»¥ä¸‹é€‰é¡¹è¿›ä¸€æ­¥è‡ªå®šä¹‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents MEDATADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> KNN(content_vector, [<span class="hljs-number">0.12</span>, <span class="hljs-number">-0.03</span>, <span class="hljs-number">0.98</span>, ...], {"k": <span class="hljs-number">20</span>, "min_candidates": <span class="hljs-number">100</span>, "rescore_oversample": <span class="hljs-number">4.0</span>})
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>
<span class="hljs-number">4.</span>  <span class="hljs-operator">|</span> KEEP title, _score
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>

`AIå†™ä»£ç 
</code></pre>
<p>æŸ¥çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-knn" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-knn" target="_blank" ref="nofollow noopener noreferrer">KNN å‡½æ•°</a>çš„å‘½åå‚æ•°ï¼Œå¯ä»¥è·å¾—å¯ç”¨å‚æ•°çš„å®Œæ•´è¯´æ˜ã€‚</p>
<h3 data-id="heading-3">å°† KNN ä¸è¿‡æ»¤å™¨ç»“åˆä½¿ç”¨</h3>
<p>ä½ å¯ä»¥ç¼©å°å‘é‡æœç´¢çš„å€™é€‰é›†åˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> category <span class="hljs-operator">=</span><span class="hljs-operator">=</span> "tutorial"
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> KNN(content_vector, [<span class="hljs-number">0.12</span>, <span class="hljs-number">-0.03</span>, <span class="hljs-number">0.98</span>, ...])
<span class="hljs-number">4.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>
<span class="hljs-number">6.</span>  <span class="hljs-operator">|</span> KEEP title, category, _score

`AIå†™ä»£ç 
</code></pre>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»– WHERE å­å¥æ¥è¿‡æ»¤ç»“æœï¼Œæˆ–è€…å°† KNN ä½œä¸ºè¿‡æ»¤è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">`

<span class="hljs-number">1</span>.  FROM documents METADATA _score
<span class="hljs-number">2</span>.  | WHERE published_date &gt; <span class="hljs-built_in">NOW</span>() - <span class="hljs-number">1</span> hour AND <span class="hljs-built_in">LENGTH</span>(category) &gt; <span class="hljs-number">10</span> AND <span class="hljs-built_in">KNN</span>(content_vector, [<span class="hljs-number">0.12</span>, -<span class="hljs-number">0.03</span>, <span class="hljs-number">0.98</span>, ...])

`AIå†™ä»£ç 
</code></pre>
<h3 data-id="heading-4">KNN ä½¿ç”¨ç®€å•</h3>
<p>åœ¨ ES|QL ä¸­ä½¿ç”¨ KNN æ›´ç®€å•ã€‚ä½ ä¸éœ€è¦æ˜¾å¼åœ°ä¸ºæŸ¥è¯¢æŒ‡å®š prefilters æˆ– kã€‚</p>
<p>Prefilters ç”¨äºç¡®ä¿ KNN æŸ¥è¯¢è¿”å›é¢„æœŸæ•°é‡çš„ç»“æœã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fquery-dsl%2Fquery-dsl-knn-query%23knn-query-filtering" title="https://www.elastic.co/docs/reference/query-languages/query-dsl/query-dsl-knn-query#knn-query-filtering" target="_blank" ref="nofollow noopener noreferrer">Prefilters</a> ä¼šç›´æ¥åº”ç”¨äº KNN æœç´¢ï¼Œè€Œä¸æ˜¯åœ¨æŸ¥è¯¢ä¹‹ååº”ç”¨ã€‚</p>
<p>è¯·è®°ä½ï¼ŒKNN ä¼šè¿”å›è¯·æ±‚çš„ top k ç»“æœã€‚å¦‚æœåœ¨ KNN æŸ¥è¯¢ä¹‹ååº”ç”¨è¿‡æ»¤å™¨ï¼ŒæŸ¥è¯¢è¿”å›çš„ä¸€äº›ç»“æœå¯èƒ½ä¼šè¢«è¿‡æ»¤æ‰ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°†æ£€ç´¢åˆ°çš„ç»“æœæ•°é‡å°‘äºé¢„æœŸã€‚</p>
<p>Query DSL çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fquery-dsl%2Fquery-dsl-knn-query" title="https://www.elastic.co/docs/reference/query-languages/query-dsl/query-dsl-knn-query" target="_blank" ref="nofollow noopener noreferrer">knn æŸ¥è¯¢</a>åŒ…å«ä¸€ä¸ªç”¨äºæŒ‡å®š prefilters çš„éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST my-image-index/_search
2.  {
3.    <span class="hljs-string">"query"</span> : {
4.      <span class="hljs-string">"knn"</span>: {
5.        <span class="hljs-string">"field"</span>: <span class="hljs-string">"content_vector"</span>,
6.        <span class="hljs-string">"query_vector"</span>: [0.12, -0.03, 0.98, ...],
7.        <span class="hljs-string">"filter"</span> : {
8.          <span class="hljs-string">"term"</span> : { <span class="hljs-string">"category"</span> : <span class="hljs-string">"tutorial"</span> }
9.        }
10.      }
11.    }
12.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>åœ¨ ES|QL ä¸­ä½¿ç”¨ KNN æ—¶ï¼Œä½ ä¸éœ€è¦å…³å¿ƒ prefiltersã€‚æ‰€æœ‰è¿‡æ»¤å™¨éƒ½ä¼šä½œä¸º KNN å‡½æ•°çš„ prefilters åº”ç”¨ï¼Œæ‰€ä»¥ä¸éœ€è¦å°†å®ƒä»¬ä½œä¸ºç‰¹å®šé€‰é¡¹æˆ–å‘½ä»¤æŒ‡å®šï¼›åªéœ€ä½¿ç”¨ <code>WHERE</code>ï¼Œè®© ES|QL è‡ªåŠ¨å¤„ç†å³å¯ï¼</p>
<p>KNN è¿˜å…è®¸æŒ‡å®šæ¯ä¸ª shard æ£€ç´¢çš„ç»“æœæ•°é‡ï¼Œä¹Ÿå°±æ˜¯ k å‚æ•°ã€‚ç±»ä¼¼äº Query DSLï¼Œk é»˜è®¤ç­‰äºæŸ¥è¯¢ä¸­æŒ‡å®šçš„ LIMITã€‚</p>
<h2 data-id="heading-5">ç²¾ç¡®æœç´¢ä½¿ç”¨ vector similarity å‡½æ•°</h2>
<p>KNN çš„è®¾è®¡ç›®æ ‡æ˜¯å¿«é€Ÿï¼Œè¿™ä½¿å®ƒéå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®é›†ï¼ˆæ•°åä¸‡åˆ°æ•°ç™¾ä¸‡ä¸ªå‘é‡ï¼‰å’Œå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ã€‚ä»£ä»·æ˜¯ç»“æœæ˜¯è¿‘ä¼¼çš„ï¼Œä½†é€šå¸¸éå¸¸å‡†ç¡®ã€‚</p>
<p>æœ‰æ—¶ä½ å¸Œæœ›è¿›è¡Œç²¾ç¡®ç›¸ä¼¼åº¦è®¡ç®—ï¼Œè€Œä¸æ˜¯è¿‘ä¼¼æœç´¢ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å½“ä½ çš„æ•°æ®é›†è¾ƒå°æ—¶ã€‚</li>
<li>å½“æŸ¥è¯¢ä¸­ä½¿ç”¨çš„è¿‡æ»¤å™¨éå¸¸ä¸¥æ ¼ï¼Œåªé€‰æ‹©æ•°æ®é›†çš„å°å­é›†æ—¶ã€‚</li>
</ul>
<p>ES|QL æä¾›äº†ä»¥ä¸‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions" target="_blank" ref="nofollow noopener noreferrer">vector similarity å‡½æ•°</a>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_cosine" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_cosine" target="_blank" ref="nofollow noopener noreferrer">V_COSINE</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_dot_product" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_dot_product" target="_blank" ref="nofollow noopener noreferrer">V_DOT_PRODUCT</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_hamming" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_hamming" target="_blank" ref="nofollow noopener noreferrer">V_HAMMING</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_l1_norm" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_l1_norm" target="_blank" ref="nofollow noopener noreferrer">V_L1_NORM</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_l2_norm" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_l2_norm" target="_blank" ref="nofollow noopener noreferrer">V_L2_NORM</a></li>
</ul>
<p>ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œä½ å¯ä»¥è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æŸ¥è¯¢æ£€ç´¢åˆ°çš„æ‰€æœ‰å‘é‡çš„ç›¸ä¼¼åº¦ã€‚</p>
<p>ä¸‹é¢çš„æŸ¥è¯¢ä½¿ç”¨ä¸ä¸Šé¢ KNN ç¤ºä¾‹ç›¸åŒçš„ mappingï¼Œä½†ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è¿›è¡Œç²¾ç¡®æœç´¢ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  FROM documents
<span class="hljs-bullet">2.</span>  | EVAL similarity = V<span class="hljs-emphasis">_COSINE(content_</span>vector, [0.12, -0.03, 0.98, ...])
<span class="hljs-bullet">3.</span>  | SORT similarity DESC
<span class="hljs-bullet">4.</span>  | KEEP title, similarity
<span class="hljs-bullet">5.</span>  | LIMIT 10

`AIå†™ä»£ç 
</code></pre>
<p>è¿™ä¸ªæŸ¥è¯¢ï¼š</p>
<ul>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-v_cosine" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-v_cosine" target="_blank" ref="nofollow noopener noreferrer">V_COSINE</a> å‘é‡ç›¸ä¼¼åº¦å‡½æ•°è®¡ç®—ç›¸ä¼¼åº¦ã€‚</li>
<li>æ ¹æ®è®¡ç®—å‡ºçš„ç›¸ä¼¼åº¦è¿›è¡Œæ’åºã€‚</li>
<li>ä¿ç•™å‰ 10 ä¸ªæœ€ç›¸ä¼¼çš„ç»“æœã€‚</li>
</ul>
<h2 data-id="heading-6">è¯­ä¹‰æœç´¢</h2>
<p>è¿›è¡Œè¯­ä¹‰æœç´¢æ—¶ï¼Œä½ ä¼šå°è¯•å°†æ–‡æœ¬æŸ¥è¯¢ä¸å‘é‡åŒ¹é…ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥å…ˆè®¡ç®— embeddings æ¥è·å–æŸ¥è¯¢å‘é‡ï¼Œç„¶åå°†æŸ¥è¯¢å‘é‡ç›´æ¥æä¾›ç»™å‘é‡æœç´¢ã€‚</p>
<p>ä½†æ›´ç®€å•çš„æ–¹æ³•æ˜¯è®© Elasticsearch ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-text_embedding" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-text_embedding" target="_blank" ref="nofollow noopener noreferrer">TEXT_EMBEDDING</a> å‡½æ•°ä¸ºä½ è®¡ç®— embeddingsï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> KNN(content_vector, TEXT_EMBEDDING("my semantic query", inference_id)
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>
<span class="hljs-number">4.</span>  <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> KEEP title, _score

`AIå†™ä»£ç 
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-text_embedding" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-text_embedding" target="_blank" ref="nofollow noopener noreferrer">TEXT_EMBEDDING</a> ä½¿ç”¨å·²ç»å­˜åœ¨çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search%2Fsemantic-search-inference" title="https://www.elastic.co/docs/solutions/search/semantic-search/semantic-search-inference" target="_blank" ref="nofollow noopener noreferrer">inference endpoint</a> è‡ªåŠ¨è®¡ç®— embeddings å¹¶åœ¨ä½ çš„æŸ¥è¯¢ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h2 data-id="heading-7">æ··åˆæœç´¢</h2>
<p>å¤§å¤šæ•°æœç´¢ä¸ä»…ä¾èµ– vector æ•°æ®ï¼›å®ƒä»¬è¿˜éœ€è¦ç»“åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F134111585" title="https://elasticstack.blog.csdn.net/article/details/134111585" target="_blank" ref="nofollow noopener noreferrer">lexical search</a>ï¼Œè¿™æ ·æ‰èƒ½å…¼é¡¾ä¸¤è€…ä¼˜åŠ¿ï¼š</p>
<ul>
<li>Lexical ä¿¡æ¯é€‚åˆç²¾ç¡®åŒ¹é…å•è¯å’ŒåŒä¹‰è¯ï¼Œå¹¶æä¾›ç”¨æˆ·æ­£åœ¨å¯»æ‰¾ç‰¹å®šè¯çš„å¼ºä¿¡å·ã€‚</li>
<li>Vectors æ•æ‰å«ä¹‰å’Œæ„å›¾ï¼Œä½¿ç”¨ç›¸ä¼¼çŸ­è¯­æˆ–ä¸åœ¨è¯æ±‡ä¸Šç›¸å…³çš„æœ¯è¯­ã€‚</li>
</ul>
<p>ç»“åˆ vector search å’Œ lexical search æœ€å¥½ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Ffork" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/fork" target="_blank" ref="nofollow noopener noreferrer">FORK</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Ffuse" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/fuse" target="_blank" ref="nofollow noopener noreferrer">FUSE</a>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents METADATA _score, _id, _index
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> FORK
<span class="hljs-number">3.</span>  (<span class="hljs-keyword">WHERE</span> KNN(content_vector, TEXT_EMBEDDING("my query")) <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span> <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>)
<span class="hljs-number">4.</span>  (<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(title, "my query") <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span> <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>)
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> FUSE
<span class="hljs-number">6.</span>  <span class="hljs-operator">|</span> SORT _score <span class="hljs-keyword">DESC</span>
<span class="hljs-number">7.</span>  <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>

`AIå†™ä»£ç 
</code></pre>
<p>ä¸Šé¢çš„æŸ¥è¯¢ï¼š</p>
<ul>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Ffork" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/fork" target="_blank" ref="nofollow noopener noreferrer">FORK</a> æ‰§è¡Œä¸¤ä¸ªæŸ¥è¯¢ï¼š
<ul>
<li>å¯¹ <code>dense_vector</code> å­—æ®µè¿›è¡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fdense-vector-functions%23esql-knn" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/dense-vector-functions#esql-knn" target="_blank" ref="nofollow noopener noreferrer">KNN</a> æŸ¥è¯¢ã€‚</li>
<li>å¯¹æ–‡æœ¬å­—æ®µè¿›è¡Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Ffunctions-operators%2Fsearch-functions%23esql-match" title="https://www.elastic.co/docs/reference/query-languages/esql/functions-operators/search-functions#esql-match" target="_blank" ref="nofollow noopener noreferrer">MATCH</a> æŸ¥è¯¢ã€‚</li>
<li>ä¸¤ä¸ªæŸ¥è¯¢éƒ½æŒ‰åˆ†æ•°æ’åºï¼Œå¹¶å„è‡ªè¿”å›å‰ 10 ä¸ªç»“æœã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Freference%2Fquery-languages%2Fesql%2Fcommands%2Ffuse" title="https://www.elastic.co/docs/reference/query-languages/esql/commands/fuse" target="_blank" ref="nofollow noopener noreferrer">FUSE</a> å°†æŸ¥è¯¢ç»“æœæ··åˆåœ¨ä¸€èµ·ï¼Œé»˜è®¤ä½¿ç”¨å€’æ•°æ’åºèåˆ (<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F151765742" title="https://elasticstack.blog.csdn.net/article/details/151765742" target="_blank" ref="nofollow noopener noreferrer">RRF</a>)ã€‚</li>
</ul>
<p>è¿™å…è®¸ä½ å®Œå…¨æ§åˆ¶æƒ³æ‰§è¡Œçš„æŸ¥è¯¢ã€æ¯ä¸ªæŸ¥è¯¢è¦è·å–çš„ç»“æœæ•°é‡ï¼Œä»¥åŠå¦‚ä½•ç»„åˆç»“æœã€‚</p>
<p>æŸ¥çœ‹æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F156750993" title="https://elasticstack.blog.csdn.net/article/details/156750993" target="_blank" ref="nofollow noopener noreferrer">å¤šé˜¶æ®µæ£€ç´¢</a>åšå®¢æ–‡ç« ï¼Œäº†è§£ç°ä»£æœç´¢çš„å·¥ä½œåŸç†ä»¥åŠé€šè¿‡ ES|QL å®ç°çš„ç®€ä¾¿æ–¹å¼ã€‚</p>
<h2 data-id="heading-8">è‡ªå®šä¹‰è¯„åˆ†</h2>
<p>ä½¿ç”¨ ES|QL è®¡ç®—è‡ªå®šä¹‰è¯„åˆ†å¾ˆå®¹æ˜“ï¼åªéœ€ä½¿ç”¨ _score å…ƒæ•°æ®å­—æ®µæ¥è®¡ç®—ä½ çš„è‡ªå®šä¹‰è¯„åˆ†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`

<span class="hljs-number">1.</span>  <span class="hljs-keyword">FROM</span> documents METADATA _score
<span class="hljs-number">2.</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">WHERE</span> KNN(content_vector, TEXT_EMBEDDING("my semantic query", inference_id)
<span class="hljs-number">3.</span>  <span class="hljs-operator">|</span> EVAL my_custom_score <span class="hljs-operator">=</span> _score <span class="hljs-operator">*</span> <span class="hljs-number">1.5</span> <span class="hljs-operator">+</span> ...
<span class="hljs-number">4.</span>  <span class="hljs-operator">|</span> SORT my_custom_score <span class="hljs-keyword">DESC</span>
<span class="hljs-number">5.</span>  <span class="hljs-operator">|</span> LIMIT <span class="hljs-number">10</span>

`AIå†™ä»£ç 
</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç²¾ç¡®æœç´¢ï¼Œä½ å·²ç»æœ‰äº†å‘é‡ç›¸ä¼¼åº¦çš„è¯„ä¼°ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œå¾®è°ƒï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  FROM documents
<span class="hljs-bullet">2.</span>  | EVAL similarity = V<span class="hljs-emphasis">_COSINE(content_</span>vector, [0.12, -0.03, 0.98, ...])
<span class="hljs-bullet">3.</span>  | EVAL my<span class="hljs-emphasis">_custom_</span>score = similarity * 1.5 + ...
<span class="hljs-bullet">4.</span>  | SORT my<span class="hljs-emphasis">_custom_</span>score DESC
<span class="hljs-bullet">5.</span>  | LIMIT 10

`AIå†™ä»£ç 
</code></pre>
<p>ä¸ Query DSL çš„ script_score ç›¸æ¯”ï¼Œè¿™ç§æ–¹æ³•æ›´ç®€å•ã€æ›´è¿­ä»£ï¼Œå¹¶ä¸”å®Œç¾é€‚åˆ ES|QL çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<h2 data-id="heading-9">ä½¿ç”¨ query å‚æ•°</h2>
<p>åœ¨ä½¿ç”¨æŸ¥è¯¢å‘é‡æ—¶ï¼Œä½ å¯ä»¥åƒä¹‹å‰çš„ç¤ºä¾‹é‚£æ ·ç›´æ¥åœ¨æŸ¥è¯¢ä¸­æŒ‡å®šå®ƒã€‚ä½†ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†çœç•¥å·ï¼ˆ...ï¼‰æ¥è¡¨ç¤ºè¿˜æœ‰æ›´å¤šæ•°æ®ã€‚</p>
<p>Dense vectors é€šå¸¸æ˜¯é«˜ç»´çš„ï¼›å®ƒä»¬å¯èƒ½æœ‰æ•°ç™¾æˆ–æ•°åƒä¸ªç»´åº¦ï¼Œå› æ­¤åœ¨æŸ¥è¯¢ä¸­ç›´æ¥å¤åˆ¶ç²˜è´´æŸ¥è¯¢å‘é‡ä¼šè®©ç†è§£æˆ–æ¨ç†å˜å¾—å›°éš¾ï¼Œå› ä¸ºä½ ä¼šåœ¨å±å¹•ä¸Šçœ‹åˆ°æˆåƒä¸Šä¸‡çš„æ•°å€¼ã€‚</p>
<p>è®°ä½ï¼Œä½ å¯ä»¥ä½¿ç”¨ ES|QL query å‚æ•°æ¥ä¸ºæŸ¥è¯¢æä¾›å‚æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python">`

<span class="hljs-number">1.</span>  POST _query
<span class="hljs-number">2.</span>  {
<span class="hljs-number">3.</span>    <span class="hljs-string">"query"</span>: <span class="hljs-string">"""
4.  FROM documents
5.  | WHERE KNN(content_vector, ?query_vector)
6.  | SORT _score DESC
7.  | KEEP title, _score
8.  | LIMIT 10
9.     """</span>,
<span class="hljs-number">10.</span>   <span class="hljs-string">"params"</span>: [{<span class="hljs-string">"query_vector"</span> : [<span class="hljs-number">0.12</span>, -<span class="hljs-number">0.03</span>, <span class="hljs-number">0.98</span>, ...]}]
<span class="hljs-number">11.</span>  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>è¿™æœ‰åŠ©äºå°†æŸ¥è¯¢é€»è¾‘ä¸å‚æ•°åˆ†ç¦»ï¼Œè®©ä½ å¯ä»¥ä¸“æ³¨äºæŸ¥è¯¢é€»è¾‘ï¼Œè€Œä¸æ˜¯è¢«å…·ä½“å‚æ•°æŸç¼šã€‚</p>
<p>å¯¹å‘é‡ä½¿ç”¨ query å‚æ•°ä¹Ÿæ›´é«˜æ•ˆï¼Œå› ä¸ºè¿™æ ·é€šè¿‡ request parser è§£æå‘é‡æ¯”é€šè¿‡ ES|QL parser æ›´å¿«ã€‚</p>
<h2 data-id="heading-10">ç»“è®º</h2>
<p>ES|QL ä¸ä»…æ”¯æŒ vector searchï¼Œè¿˜å°†å…¶è‡ªç„¶åœ°èå…¥æ•°æ®æŸ¥è¯¢æ–¹å¼ä¸­ã€‚å®ƒå…è®¸ä½ ç”¨å•ä¸€å¼ºå¤§çš„è¯­æ³•å¤„ç†æ–‡æœ¬ã€å‘é‡åŠäºŒè€…ä¹‹é—´çš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Vector searchï¼ŒåŒ…æ‹¬ approximate å’Œ exactã€‚</li>
<li>Semantic searchï¼Œä½¿ç”¨æ–‡æœ¬å¯¹å‘é‡æ•°æ®è¿›è¡Œæœç´¢ã€‚</li>
<li>Hybrid searchï¼Œç»“åˆæ–‡æœ¬æœç´¢å’Œå‘é‡æœç´¢çš„æœ€ä½³ç»“æœã€‚</li>
<li>Custom vector scoringï¼Œä½¿ç”¨ EVAL å’Œ ES|QL æ„é€ å‡½æ•°ã€‚</li>
</ul>
<p>ES|QL ä¸­çš„ vector search æ¯” Query DSL æ›´ç®€å•ï¼Œé€šè¿‡æ¨æ–­ prefilters å’Œå‚æ•°ï¼Œå¹¶ä¸ ES|QL æä¾›çš„ä¸°å¯Œè¡¨è¾¾å¼æ— ç¼é›†æˆã€‚</p>
<p>å°† KNN å®šä¹‰ä¸º<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F156750993" title="https://elasticstack.blog.csdn.net/article/details/156750993" target="_blank" ref="nofollow noopener noreferrer">å¤šé˜¶æ®µæ£€ç´¢</a>ç®¡é“çš„ä¸€éƒ¨åˆ†åªæ˜¯æŸ¥è¯¢çš„ä¸€ç¯ï¼›ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ filtersï¼Œä¸å…¶ä»–æ–‡æœ¬å‡½æ•°ç»“åˆè¿›è¡Œ hybrid searchï¼Œå¹¶åœ¨å‘é‡ç»“æœä¸Šåº”ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F143352429" title="https://elasticstack.blog.csdn.net/article/details/143352429" target="_blank" ref="nofollow noopener noreferrer">reranking</a> æˆ– query completionã€‚</p>
<p>æˆ‘ä»¬å°†ç»§ç»­å¢åŠ å‘é‡å‡½æ•°ï¼Œç”¨äº dense vectors çš„å‘é‡è¿ç®—å’Œèšåˆï¼Œè®©ä½ å……åˆ†åˆ©ç”¨ ES|QL çš„å…¨éƒ¨åŠŸèƒ½æ“ä½œå‘é‡æ•°æ®ã€‚</p>
<p>ç¥ä½  (vector) æœç´¢æ„‰å¿«ï¼</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fblog%2Fdense-vector-search-elasticsearch-query-language" title="https://www.elastic.co/search-labs/blog/dense-vector-search-elasticsearch-query-language" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/search-labsâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èƒ½æœ¬åœ°è·‘ï¼Œå¤æ‚æ–‡æ¡£è¯†åˆ«ï¼Œ0.9Bå°æ¨¡å‹ï¼ŒGLM-OCRå¼€æºå³å·…å³°ï¼ˆé™„æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7603267434502635535</link>    <guid>https://juejin.cn/post/7603267434502635535</guid>    <pubDate>2026-02-06T03:33:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603267434502635535" data-draft-id="7603283380554186786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èƒ½æœ¬åœ°è·‘ï¼Œå¤æ‚æ–‡æ¡£è¯†åˆ«ï¼Œ0.9Bå°æ¨¡å‹ï¼ŒGLM-OCRå¼€æºå³å·…å³°ï¼ˆé™„æºç ï¼‰"/> <meta itemprop="keywords" content="åç«¯,ChatGLM (æ™ºè°±),å¼€æº"/> <meta itemprop="datePublished" content="2026-02-06T03:33:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èƒ½æœ¬åœ°è·‘ï¼Œå¤æ‚æ–‡æ¡£è¯†åˆ«ï¼Œ0.9Bå°æ¨¡å‹ï¼ŒGLM-OCRå¼€æºå³å·…å³°ï¼ˆé™„æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:33:50.000Z" title="Fri Feb 06 2026 03:33:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<p>ç›´æ¥è¯´æ­£äº‹ï¼Œæ™ºè°±æŠŠè‡ªå®¶çš„æ–°ä¸€ä»£OCRæ¨¡å‹ GLM-OCR ç›´æ¥å¼€æºäº†ï¼Œè€Œä¸”ä¸€ä¸Šæ¥å°±æ˜¯â€œå°èº«æã€å¤§èƒ½é‡â€çš„è·¯çº¿ã€‚</p>
<p>å‚æ•°åªæœ‰0.9Bï¼Œå´åœ¨æƒå¨çš„ OmniDocBench V1.5 æ¦œå•ä¸Šæ‹¿äº† 94.6 åˆ†ï¼Œåœ¨æ–‡æœ¬ã€å…¬å¼ã€è¡¨æ ¼ã€ä¿¡æ¯æŠ½å–è¿™å‡ é¡¹é‡Œéƒ½å†²åˆ°äº† SOTAã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfdaa9a511cb4ddda8ad8ce807b4ed35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=gIOpVtLKNaF1kFti5%2B5Z5gdieWM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ğŸ¤¯ ç—›ç‚¹ï¼šä¼ ç»ŸOCRçš„â€œè€å¤§éš¾â€</strong></p>
<p>ç”¨è¿‡ä¼ ç»ŸOCRå·¥å…·çš„æœ‹å‹ï¼Œå¤§æ¦‚ç‡éƒ½é‡åˆ°è¿‡è¿™äº›åœºæ™¯ï¼š</p>
<p>æ‰«æç‰ˆPDFï¼šç¨å¾®æ¨¡ç³Šä¸€ç‚¹ï¼Œæˆ–è€…è¡¨æ ¼è·¨é¡µï¼Œå‡ºæ¥çš„ç»“æœå°±æ˜¯ä¸€å›¢ä¹±ç ï¼Œä¸æ˜¯ç¼ºè¡Œå°‘åˆ—ï¼Œå°±æ˜¯æ•°å­—å¯¹ä¸ä¸Šã€‚</p>
<p>æ‰‹å†™ä½“ï¼šå­¦ç”Ÿçš„ä½œä¸šã€åŒ»ç”Ÿçš„å¤„æ–¹ï¼Œè¯†åˆ«ç‡ç›´æ¥â€œè·³æ°´â€ï¼Œæœ€åè¿˜æ˜¯å¾—é äººè‚‰æ ¡å¯¹ã€‚</p>
<p>å¤æ‚è¡¨æ ¼ï¼šåˆå¹¶å•å…ƒæ ¼ã€å¤šå±‚è¡¨å¤´ï¼Œè¯†åˆ«å‡ºæ¥å°±æ˜¯ä¸€ç»´æ–‡æœ¬ï¼Œæƒ³è¿˜åŸæˆå¯ç”¨çš„è¡¨æ ¼ï¼Œå¾—æ‰‹åŠ¨è°ƒæ•´åŠå¤©ã€‚</p>
<p>å…¬å¼æˆªå›¾ï¼šå¥½ä¸å®¹æ˜“æ‹æ¸…æ¥šï¼ŒOCR å‡ºæ¥çš„å´æ˜¯ä¸€ä¸²çœ‹ä¸æ‡‚çš„ç¬¦å·ï¼Œæƒ³è½¬æˆ LaTeX æ›´æ˜¯å¥¢æœ›ã€‚</p>
<p>å°ç« ä¸æ–‡æœ¬é‡å ï¼šç›–ç« æ–‡ä»¶è¦æå–ä¿¡æ¯ï¼Œå¸¸å¸¸è¢«å°ç« ç›–ä½å…³é”®å­—æ®µï¼Œä¼ ç»Ÿæ–¹æ³•å¾ˆéš¾æŠŠä¸¤è€…å¹²å‡€åœ°åˆ†å¼€ã€‚</p>
<p>å¤šè¯­è¨€æ··æ’ï¼šä¸­è‹±æ–‡ã€æ•°å­—ã€ç¬¦å·æŒ¤åœ¨ä¸€èµ·ï¼Œè¯†åˆ«ç»“æœç»å¸¸å‡ºç°â€œä¸²å°â€çš„å°´å°¬æƒ…å†µã€‚</p>
<p>å¾ˆå¤šæ–¹æ¡ˆä¸ºäº†æ•ˆæœï¼Œæ¨¡å‹åŠ¨è¾„å‡ ä¸ªBã€å‡ åBçš„å‚æ•°ï¼Œéƒ¨ç½²èµ·æ¥å¯¹æ˜¾å¡å’Œå†…å­˜è¦æ±‚å¾ˆé«˜ï¼Œæ™®é€šå¼€å‘è€…å’Œå°å›¢é˜Ÿåªèƒ½æœ›è€Œå´æ­¥ã€‚</p>
<p>æˆæœ¬ä¹Ÿæ˜¯ä¸ªç°å®é—®é¢˜ï¼ŒæŒ‰é‡è®¡è´¹ã€å¹¶å‘é™åˆ¶ï¼Œå¤„ç†æµ·é‡å†å²æ–‡æ¡£æ—¶ï¼Œè´¦å•ä¼šè®©äººå¿ƒå¤´ä¸€ç´§ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“æˆ‘çœ‹åˆ° GLM-OCR çš„å‚æ•°å’Œå®šä½æ—¶ï¼Œå¿ƒé‡Œæƒ³çš„æ˜¯ï¼šè¿™æ¨¡å‹ï¼Œèƒ½é¡¶ã€‚</p>
<p><strong>ğŸ§  GLM-OCRï¼šéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨</strong></p>
<p>GLM-OCR æ˜¯æ™ºè°±åŸºäº GLM-V ç³»åˆ—â€œè§†è§‰ç¼–ç å™¨ + è¯­è¨€è§£ç å™¨â€æ€è·¯ï¼Œä¸“é—¨ä¸ºæ–‡æ¡£ç†è§£æ‰“é€ çš„ä¸€æ¬¾å¤šæ¨¡æ€OCRæ¨¡å‹ã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šå°ã€å‡†ã€å…¨ã€å¿«ã€ä¾¿å®œã€‚</p>
<p>å°ï¼šæ¨¡å‹æ€»å‚æ•°çº¦ 0.9Bï¼ˆå…¶ä¸­è§†è§‰ç¼–ç å™¨çº¦ 400Mï¼Œè¯­è¨€è§£ç å™¨çº¦ 0.5Bï¼‰ï¼Œä½“ç§¯å’Œæ˜¾å­˜å ç”¨éƒ½æ§åˆ¶å¾—å¾ˆå¥½ï¼Œæ™®é€šæ˜¾å¡ç”šè‡³ CPU ç¯å¢ƒéƒ½æœ‰æœºä¼šè·‘èµ·æ¥ã€‚</p>
<p>å‡†ï¼šåœ¨ OmniDocBench V1.5 ç»¼åˆæ¦œå•ä¸Šæ‹¿åˆ° 94.6 åˆ†ï¼Œåœ¨æ–‡æœ¬ã€å…¬å¼ã€è¡¨æ ¼ã€ä¿¡æ¯æŠ½å–ç­‰å¤šä¸ªå­ä»»åŠ¡ä¸­éƒ½è¾¾åˆ°äº† SOTA æˆ–æ¥è¿‘ SOTA çš„æ°´å¹³ã€‚</p>
<p>å…¨ï¼šå®ƒä¸åªæ˜¯â€œè¯†å­—â€ï¼Œè€Œæ˜¯èƒ½ç†è§£æ•´ä¸ªæ–‡æ¡£çš„ç‰ˆå¼ã€‚å®˜æ–¹é‡ç‚¹ä¼˜åŒ–äº†å…­å¤§çœŸå®ä¸šåŠ¡åœºæ™¯ï¼šä»£ç æ–‡æ¡£ã€å¤æ‚è¡¨æ ¼ã€æ‰‹å†™ä½“ã€å¤šè¯­è¨€ã€å°ç« è¯†åˆ«ã€ç¥¨æ®æå–ã€‚</p>
<p>å¿«ï¼šå®˜æ–¹æµ‹è¯•æ•°æ®æ˜¾ç¤ºï¼Œå•å‰¯æœ¬å•å¹¶å‘ä¸‹ï¼Œå¤„ç† PDF çš„ååé‡çº¦ 1.86 é¡µ/ç§’ï¼Œå¤„ç†å›¾ç‰‡çº¦ 0.67 å¼ /ç§’ï¼Œé€Ÿåº¦åœ¨åŒç±»å°å‚æ•°æ¨¡å‹é‡Œå¾ˆæœ‰ç«äº‰åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a84b85d8e75f44859878c4bdcbe58fa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=vA58lyCIfOOn5%2FlFa3Y8YFaTBAQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¾¿å®œï¼šå®˜æ–¹ API å®šä»·ä¸º 0.2 å…ƒ/ç™¾ä¸‡ Tokensï¼Œ1 å—é’±å¤§æ¦‚èƒ½å¤„ç† 2000 å¼  A4 æ‰«æå›¾æˆ– 200 ä»½ 10 é¡µçš„ PDFï¼Œæˆæœ¬çº¦ä¸ºä¼ ç»Ÿ OCR æ–¹æ¡ˆçš„ååˆ†ä¹‹ä¸€ã€‚</p>
<p>ä»æŠ€æœ¯æ¶æ„ä¸Šçœ‹ï¼ŒGLM-OCR é‡‡ç”¨äº†â€œè§†è§‰ç¼–ç å™¨ â†’ è·¨æ¨¡æ€è¿æ¥å±‚ â†’ è¯­è¨€è§£ç å™¨â€çš„ä¸‰çº§ç»“æ„ã€‚</p>
<p>å¹¶å¼•å…¥äº†å¤š Tokens é¢„æµ‹æŸå¤±ï¼ˆMTPï¼‰å’Œå…¨ä»»åŠ¡å¼ºåŒ–å­¦ä¹ ç­‰è®­ç»ƒç­–ç•¥ï¼Œè®©æ¨¡å‹åœ¨æœ‰é™å‚æ•°ä¸‹ä¹Ÿèƒ½å­¦åˆ°æ›´å¼ºçš„ä¸Šä¸‹æ–‡ç†è§£å’Œæ³›åŒ–èƒ½åŠ›ã€‚</p>
<p><strong>ğŸš€ æ ¸å¿ƒåŠŸèƒ½ï¼šä¸æ­¢äºâ€œè¯†å­—â€</strong></p>
<p>GLM-OCR çš„åŠŸèƒ½è¦†ç›–äº†ä»ç®€å•è¯†åˆ«åˆ°å¤æ‚ç†è§£çš„å¤šä¸ªå±‚æ¬¡ï¼Œå®ç”¨æ€§å¾ˆå¼ºã€‚</p>
<p>é€šç”¨æ–‡æœ¬è¯†åˆ«</p>
<p>æ”¯æŒç…§ç‰‡ã€æˆªå›¾ã€æ‰«æä»¶ã€PDF ç­‰å¤šç§è¾“å…¥ï¼Œèƒ½è¾ƒå¥½åœ°åº”å¯¹æ‰‹å†™ä½“ã€å°ç« ã€ä»£ç æˆªå›¾ç­‰ç‰¹æ®Šå†…å®¹ã€‚</p>
<p>å¯¹äºå­¦ç”Ÿã€ç§‘ç ”äººå‘˜ã€ç¨‹åºå‘˜ç­‰éœ€è¦æ•°å­—åŒ–ç¬”è®°æˆ–æ–‡æ¡£çš„äººæ¥è¯´ï¼Œéå¸¸å‹å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba853d4c2336462ea8d853d6a1351f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=bFdbofQhcahjUOm%2F0OXwF7HXQOU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤æ‚è¡¨æ ¼è§£æ</p>
<p>èƒ½ç†è§£åˆå¹¶å•å…ƒæ ¼ã€å¤šå±‚è¡¨å¤´ã€æ–œçº¿è¡¨å¤´ç­‰å¤æ‚ç»“æ„ï¼Œå¹¶ç›´æ¥è¾“å‡º HTML è¡¨æ ¼ä»£ç ï¼Œæ— éœ€äºŒæ¬¡åˆ¶è¡¨ã€‚</p>
<p>å¯¹äºè´¢åŠ¡ã€è¿è¥ã€æ•°æ®åˆ†æç­‰ç»å¸¸å¤„ç†æŠ¥è¡¨çš„å²—ä½ï¼Œè¿™èƒ½èŠ‚çœå¤§é‡æ—¶é—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c03943f9d33440daab5877444e54f174~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=MRzgbrR8vJYtiVN6WBELQOtZhG8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰‹å†™å…¬å¼è¯†åˆ«</p>
<p>èƒ½å°†æ‰‹å†™æˆ–æ‰“å°çš„å…¬å¼æˆªå›¾å‡†ç¡®åœ°è½¬æ¢æˆ LaTeX æ ¼å¼ï¼Œä¿ç•™ä¸Šä¸‹æ ‡ã€åˆ†å¼ã€æ ¹å·ç­‰å¤æ‚ç»“æ„ã€‚</p>
<p>å¯¹äºç†å·¥ç§‘å¸ˆç”Ÿå’Œç§‘ç ”äººå‘˜ï¼Œè¿™ç®€ç›´æ˜¯â€œè§£æ”¾ç”Ÿäº§åŠ›â€çš„ç¥å™¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beb0d7ba1e304e8b9e0cd9d7555dd8e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=NHtu9UJ0WmFkxerJowZ5ohmGza0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¿¡æ¯ç»“æ„åŒ–æå–</p>
<p>æ”¯æŒé€šè¿‡ JSON Schema æ¨¡æ¿ï¼Œä»å‘ç¥¨ã€è¯ä»¶ã€æŠ¥å…³å•ç­‰æ–‡æ¡£ä¸­è‡ªåŠ¨æå–å…³é”®å­—æ®µå¹¶è¾“å‡ºç»“æ„åŒ– JSON æ•°æ®ã€‚</p>
<p>è¿™å¯¹äºéœ€è¦å¯¹æ¥ä¸šåŠ¡ç³»ç»Ÿã€æ„å»ºè‡ªåŠ¨åŒ–æµç¨‹çš„å¼€å‘è€…æ¥è¯´ï¼Œä»·å€¼å·¨å¤§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9055a4b0fb184412beec7af0274e8b84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=3EFp4fGJFl7noNoS2DzxmX37R6k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰¹é‡å¤„ç†ä¸ RAG æ”¯æŒ</p>
<p>æ”¯æŒå¤§æ‰¹é‡æ–‡æ¡£è§£æï¼Œå…¶é«˜ç²¾åº¦å’Œè§„æ•´çš„è¾“å‡ºæ ¼å¼ï¼Œéå¸¸é€‚åˆä½œä¸ºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç³»ç»Ÿçš„å‰ç½®æ–‡æ¡£è§£ææ¨¡å—ï¼Œä¸ºä¸Šå±‚å¤§æ¨¡å‹æä¾›é«˜è´¨é‡çš„â€œç‡ƒæ–™â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d732cea09fdb497ea8bbb441c4f4fcae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=1E0ffiqAko%2FbYr7ZEEs1PXRoJbE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ğŸ’» ä½¿ç”¨ä½“éªŒï¼šæœ¬åœ°ä¸äº‘ç«¯éƒ¨ç½²</strong></p>
<p>GLM-OCR æä¾›äº†å¤šç§çµæ´»çš„æ¥å…¥æ–¹å¼ï¼Œæ— è®ºæ˜¯å¼€å‘è€…è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±çš„ç©æ³•ã€‚</p>
<p>æœ¬åœ°/ç§æœ‰åŒ–éƒ¨ç½²ï¼šæ”¯æŒ vLLMã€SGLangã€Ollamaå¤šç§ä¸»æµæ¡†æ¶ã€‚å¯¹äºæ³¨é‡æ•°æ®éšç§æˆ–æœ‰æœ¬åœ°åŒ–éƒ¨ç½²éœ€æ±‚çš„ç”¨æˆ·ï¼Œéå¸¸å‹å¥½ã€‚</p>
<p>äº‘ç«¯ API è°ƒç”¨ï¼šæ™ºè°±å¼€æ”¾å¹³å°æä¾›äº†æ ‡å‡†çš„ API æ¥å£ï¼ŒæŒ‰é‡è®¡è´¹ï¼Œæ¥å…¥æˆæœ¬å’Œä½¿ç”¨é—¨æ§›éƒ½å¾ˆä½ã€‚</p>
<p>æœ¬åœ°å®‰è£…</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Install from source</span>
git <span class="hljs-built_in">clone</span> https://github.com/zai-org/glm-ocr.git
<span class="hljs-built_in">cd</span> glm-ocr
uv venv --python 3.12 --seed &amp;&amp; <span class="hljs-built_in">source</span> .venv/bin/activate
uv pip install -e .
<span class="hljs-comment"># Install transformers from source</span>
uv pip install git+https://github.com/huggingface/transformers.git


<span class="hljs-comment"># Parse a single image</span>
glmocr parse examples/source/code.png


<span class="hljs-comment"># Parse a directory</span>
glmocr parse examples/source/


<span class="hljs-comment"># Set output directory</span>
glmocr parse examples/source/code.png --output ./results/


<span class="hljs-comment"># Use a custom config</span>
glmocr parse examples/source/code.png --config my_config.yaml


<span class="hljs-comment"># Enable debug logging with profiling</span>
glmocr parse examples/source/code.png --log-level DEBUG


from glmocr import GlmOcr, parse


<span class="hljs-comment"># Simple function</span>
result = parse(<span class="hljs-string">"image.png"</span>)
result = parse([<span class="hljs-string">"img1.png"</span>, <span class="hljs-string">"img2.jpg"</span>])
result = parse(<span class="hljs-string">"https://example.com/image.png"</span>)
result.save(output_dir=<span class="hljs-string">"./results"</span>)


<span class="hljs-comment"># Note: a list is treated as pages of a single document.</span>


<span class="hljs-comment"># Class-based API</span>
with GlmOcr() as parser:
    result = parser.parse(<span class="hljs-string">"image.png"</span>)
    <span class="hljs-built_in">print</span>(result.json_result)
    result.save()
</code></pre>
<p>å¼€æºç¤¾åŒº</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-number">1</span>.å¼€æºåœ°å€
<span class="hljs-title class_">Github</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/zai</span>-org/<span class="hljs-variable constant_">GLM</span>-<span class="hljs-variable constant_">OCR</span>
<span class="hljs-title class_">Hugging</span> <span class="hljs-title class_">Face</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/huggingface.co/zai</span>-org/<span class="hljs-variable constant_">GLM</span>-<span class="hljs-variable constant_">OCR</span>

<span class="hljs-number">2</span>.æ¨¡å‹<span class="hljs-variable constant_">API</span>
æ™ºè°±å¼€æ”¾å¹³å°ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/docs.bigmodel.cn/cn</span><span class="hljs-regexp">/guide/models</span><span class="hljs-regexp">/vlm/glm</span>-ocr
ç‰¹æƒ å°é²œç¤¼åŒ…ä¸Šçº¿ï¼Œ<span class="hljs-number">2.9</span>å…ƒäº«<span class="hljs-number">5000</span>ä¸‡<span class="hljs-title class_">Tokens</span>ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/bigmodel.cn/special</span>_area
Z.aiï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/docs.z.ai/guides</span><span class="hljs-regexp">/vlm/glm</span>-ocr

<span class="hljs-number">3</span>.åœ¨çº¿ä½“éªŒ
Z.aiï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/ocr.z.ai
</span></code></pre>
<p><strong>ğŸ‘ ä¸ºä»€ä¹ˆæ¨èå®ƒï¼Ÿ</strong></p>
<p>ç»“åˆæˆ‘è‡ªå·±çš„æ„Ÿå—ï¼Œæ¨è GLM-OCR çš„ç†ç”±ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>å¼€æºå…è´¹ï¼Œè‡ªä¸»å¯æ§ï¼šåŸºäºÂ Apache-2.0 licenseÂ åè®®å¼€æºï¼Œä¸ªäººå’Œä¼ä¸šéƒ½å¯ä»¥å…è´¹ä½¿ç”¨ã€äºŒæ¬¡å¼€å‘å’Œå•†ç”¨ã€‚</p>
<p>æ€§èƒ½å¼ºåŠ²ï¼Œæ€§ä»·æ¯”é«˜ï¼š0.9B çš„å°å‚æ•°ï¼Œå´åœ¨å¤šä¸ªæƒå¨æ¦œå•ä¸Šå–å¾—äº†é¡¶å°–æˆç»©ï¼ŒçœŸæ­£åšåˆ°äº†â€œå°è€Œç¾â€ã€‚</p>
<p>åŒæ—¶ï¼Œæ— è®ºæ˜¯æœ¬åœ°éƒ¨ç½²çš„æˆæœ¬è¿˜æ˜¯äº‘ç«¯ API çš„å®šä»·ï¼Œéƒ½æå…·ç«äº‰åŠ›ã€‚</p>
<p>åœºæ™¯è¦†ç›–å¹¿ï¼Œå®ç”¨æ€§å¼ºï¼šä»æ—¥å¸¸åŠå…¬åˆ°ç§‘ç ”å­¦ä¹ ï¼Œä»ç®€å•è¯†åˆ«åˆ°å¤æ‚ç»“æ„åŒ–æå–ï¼ŒGLM-OCR éƒ½èƒ½æä¾›å‡ºè‰²çš„æ”¯æŒï¼Œå…·æœ‰å¾ˆå¼ºçš„é€šç”¨æ€§ã€‚</p>
<p>å·¥ç¨‹å‹å¥½ï¼Œæ˜“äºé›†æˆï¼šæä¾›äº†å®Œæ•´çš„ SDK å’Œæ¨ç†å·¥å…·é“¾ï¼Œæ”¯æŒå¤šç§ä¸»æµéƒ¨ç½²æ–¹å¼ï¼Œæ— è®ºæ˜¯å¼€å‘è€…è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œéƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<p>å›½äº§æ¨¡å‹ï¼Œæœ¬åœŸåŒ–ä¼˜åŠ¿ï¼šå¯¹äºä¸­æ–‡ç”¨æˆ·æ¥è¯´ï¼ŒGLM-OCR åœ¨å¤„ç†ä¸­æ–‡æ–‡æ¡£ã€ç¥¨æ®ç­‰æœ¬åœŸåŒ–åœºæ™¯æ—¶ï¼Œå…·æœ‰å¤©ç„¶çš„ä¼˜åŠ¿ã€‚</p>
<p><strong>ğŸ¯ æœ€å</strong></p>
<p>GLM-OCR çš„å‡ºç°ï¼Œä¸º OCR é¢†åŸŸå¸¦æ¥äº†ä¸€è‚¡æ–°çš„æ´»åŠ›ã€‚</p>
<p>â€œå°èº«æâ€æ’¬åŠ¨äº†â€œé«˜ç²¾åº¦â€ï¼Œç”¨â€œå¼€æºâ€é™ä½äº†æŠ€æœ¯é—¨æ§›ï¼Œè®©æ›´å¤šäººèƒ½å¤Ÿäº«å—åˆ° AI å¸¦æ¥çš„ä¾¿åˆ©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73acc37c5084496185123433e92a42a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953629&amp;x-signature=D1HEhIE1M7Izu%2FUfu8b2a66oX9E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot + AWS Lambda / é˜¿é‡Œäº‘ FCï¼šäº‹ä»¶é©±åŠ¨æ¶æ„ä¸‹ï¼Œè½»é‡å‡½æ•°å¤„ç†å¼‚æ­¥ä»»åŠ¡]]></title>    <link>https://juejin.cn/post/7603282168137891859</link>    <guid>https://juejin.cn/post/7603282168137891859</guid>    <pubDate>2026-02-06T05:29:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603282168137891859" data-draft-id="7600333405979361321" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot + AWS Lambda / é˜¿é‡Œäº‘ FCï¼šäº‹ä»¶é©±åŠ¨æ¶æ„ä¸‹ï¼Œè½»é‡å‡½æ•°å¤„ç†å¼‚æ­¥ä»»åŠ¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T05:29:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çˆ±å¨ƒå“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1398234522335383"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot + AWS Lambda / é˜¿é‡Œäº‘ FCï¼šäº‹ä»¶é©±åŠ¨æ¶æ„ä¸‹ï¼Œè½»é‡å‡½æ•°å¤„ç†å¼‚æ­¥ä»»åŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1398234522335383/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çˆ±å¨ƒå“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:29:05.000Z" title="Fri Feb 06 2026 05:29:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¼ ç»Ÿå¼‚æ­¥ä»»åŠ¡çš„æŒ‘æˆ˜</h2>
<p>åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åéœ€è¦å¼‚æ­¥å¤„ç†ï¼Œä½†é•¿æ—¶é—´å ç”¨åº”ç”¨æœåŠ¡å™¨èµ„æº</li>
<li>è®¢å•çŠ¶æ€å˜æ›´éœ€è¦é€šçŸ¥å¤šä¸ªä¸‹æ¸¸ç³»ç»Ÿï¼ŒåŒæ­¥è°ƒç”¨å½±å“ä¸»æµç¨‹æ€§èƒ½</li>
<li>æ—¥å¿—åˆ†æã€æ•°æ®ç»Ÿè®¡ç­‰æ‰¹é‡ä»»åŠ¡éœ€è¦åœ¨åå°è¿è¡Œ</li>
<li>å›¾ç‰‡å‹ç¼©ã€è§†é¢‘è½¬ç ç­‰è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ¶ˆè€—å¤§é‡CPU</li>
</ul>
<p>ä¼ ç»Ÿçš„å¼‚æ­¥ä»»åŠ¡å¤„ç†æ–¹å¼è¦ä¹ˆéœ€è¦ç»´æŠ¤é¢å¤–çš„æœåŠ¡å™¨èµ„æºï¼Œè¦ä¹ˆæ¶æ„å¤æ‚åº¦é«˜ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•ç”¨Serverlesså‡½æ•°è®¡ç®—ä¼˜é›…åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚
<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.jiangyi.space%2Farticles%2F2026%2F01%2F30%2F1769664610418.html" target="_blank" title="http://www.jiangyi.space/articles/2026/01/30/1769664610418.html" ref="nofollow noopener noreferrer">é˜…è¯»åŸæ–‡</a></p>
<h2 data-id="heading-1">Serverlesså‡½æ•°è®¡ç®—çš„ä¼˜åŠ¿</h2>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„å¼‚æ­¥ä»»åŠ¡å¤„ç†æ–¹æ¡ˆï¼ŒServerlessæœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æŒ‰éœ€ä»˜è´¹</strong>ï¼šåªå¯¹å®é™…æ‰§è¡Œæ—¶é—´ä»˜è´¹ï¼Œé—²ç½®æ—¶ä¸æ”¶è´¹</li>
<li><strong>å¼¹æ€§ä¼¸ç¼©</strong>ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œæ— éœ€äººå·¥å¹²é¢„</li>
<li><strong>å…è¿ç»´</strong>ï¼šæ— éœ€å…³å¿ƒæœåŠ¡å™¨è¿ç»´ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šç§’çº§éƒ¨ç½²ï¼Œå¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚</li>
</ul>
<h2 data-id="heading-2">æ ¸å¿ƒå®ç°æ€è·¯</h2>
<h3 data-id="heading-3">1. äº‹ä»¶é©±åŠ¨æ¶æ„</h3>
<p>Serverlesså‡½æ•°å¤©ç„¶é€‚åˆäº‹ä»¶é©±åŠ¨æ¶æ„ï¼š</p>
<ul>
<li><strong>äº‹ä»¶æº</strong>ï¼šæ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“å˜æ›´ã€APIè°ƒç”¨ç­‰</li>
<li><strong>äº‹ä»¶å¤„ç†</strong>ï¼šå‡½æ•°æ¥æ”¶äº‹ä»¶å¹¶å¤„ç†</li>
<li><strong>äº‹ä»¶å“åº”</strong>ï¼šå¤„ç†ç»“æœå¯ä»¥è§¦å‘åç»­äº‹ä»¶</li>
</ul>
<h3 data-id="heading-4">2. SpringBootä¸Serverlessé›†æˆ</h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å°†SpringBootåº”ç”¨ä¸Serverlesså‡½æ•°é›†æˆï¼š</p>
<ul>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—æ¡¥æ¥</strong>ï¼šSpringBootåº”ç”¨å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œå‡½æ•°æ¶ˆè´¹</li>
<li><strong>HTTPå›è°ƒ</strong>ï¼šå‡½æ•°å¤„ç†å®Œæˆåå›è°ƒSpringBootæ¥å£</li>
<li><strong>æ•°æ®åº“çŠ¶æ€åŒæ­¥</strong>ï¼šé€šè¿‡æ•°æ®åº“çŠ¶æ€å˜æ›´è§¦å‘å‡½æ•°æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-5">å®è·µæ–¹æ¡ˆè¯¦è§£</h2>
<h3 data-id="heading-6">1. AWS Lambdaé›†æˆ</h3>
<h4 data-id="heading-7">å‡½æ•°ç¼–å†™</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskFunction</span> {
    
    <span class="hljs-keyword">public</span> APIGatewayProxyResponseEvent <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(
            APIGatewayProxyRequestEvent input, Context context)</span> {
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è§£æäº‹ä»¶æ•°æ®</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">eventBody</span> <span class="hljs-operator">=</span> input.getBody();
            <span class="hljs-type">AsyncTaskEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> JsonUtils.fromJson(eventBody, AsyncTaskEvent.class);
            
            <span class="hljs-comment">// æ‰§è¡Œå…·ä½“ä»»åŠ¡</span>
            <span class="hljs-keyword">switch</span> (event.getTaskType()) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"FILE_PROCESSING"</span>:
                    processFile(event);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"IMAGE_COMPRESSION"</span>:
                    compressImage(event);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"DATA_ANALYSIS"</span>:
                    analyzeData(event);
                    <span class="hljs-keyword">break</span>;
            }
            
            <span class="hljs-comment">// è¿”å›æˆåŠŸå“åº”</span>
            <span class="hljs-keyword">return</span> createSuccessResponse(<span class="hljs-string">"Task completed"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            context.getLogger().log(<span class="hljs-string">"Error processing task: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> createErrorResponse(e.getMessage());
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processFile</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-comment">// æ–‡ä»¶å¤„ç†é€»è¾‘</span>
        <span class="hljs-type">S3Client</span> <span class="hljs-variable">s3Client</span> <span class="hljs-operator">=</span> S3Client.create();
        <span class="hljs-comment">// ... å…·ä½“å¤„ç†é€»è¾‘</span>
    }
}
</code></pre>
<h4 data-id="heading-8">éƒ¨ç½²é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># serverless.yml</span>
<span class="hljs-attr">service:</span> <span class="hljs-string">async-task-service</span>

<span class="hljs-attr">provider:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">aws</span>
  <span class="hljs-attr">runtime:</span> <span class="hljs-string">java11</span>
  <span class="hljs-attr">region:</span> <span class="hljs-string">us-east-1</span>

<span class="hljs-attr">functions:</span>
  <span class="hljs-attr">fileProcessor:</span>
    <span class="hljs-attr">handler:</span> <span class="hljs-string">com.example.AsyncTaskFunction::handleRequest</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-number">300</span>
    <span class="hljs-attr">memorySize:</span> <span class="hljs-number">1024</span>
    <span class="hljs-attr">events:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">sqs:</span>
          <span class="hljs-attr">arn:</span> <span class="hljs-type">!GetAtt</span> <span class="hljs-string">TaskQueue.Arn</span>
</code></pre>
<h3 data-id="heading-9">2. é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—é›†æˆ</h3>
<h4 data-id="heading-10">å‡½æ•°å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FCTaskProcessor</span> {
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(InputStream input, OutputStream output, Context context)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è¯»å–è¾“å…¥æµ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">eventJson</span> <span class="hljs-operator">=</span> StreamUtils.copyToString(input, StandardCharsets.UTF_8);
            <span class="hljs-type">AsyncTaskEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> JsonUtils.fromJson(eventJson, AsyncTaskEvent.class);
            
            <span class="hljs-comment">// æ ¹æ®ä»»åŠ¡ç±»å‹æ‰§è¡Œä¸åŒé€»è¾‘</span>
            <span class="hljs-type">TaskResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> executeTask(event);
            
            <span class="hljs-comment">// å†™å…¥è¾“å‡ºæµ</span>
            <span class="hljs-keyword">return</span> JsonUtils.toJson(result);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            context.getLogger().info(<span class="hljs-string">"Task execution failed: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
    
    <span class="hljs-keyword">private</span> TaskResult <span class="hljs-title function_">executeTask</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-keyword">switch</span> (event.getTaskType()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"NOTIFICATION"</span>:
                <span class="hljs-keyword">return</span> sendNotification(event);
            <span class="hljs-keyword">case</span> <span class="hljs-string">"REPORT_GENERATION"</span>:
                <span class="hljs-keyword">return</span> generateReport(event);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Unknown task type: "</span> + event.getTaskType());
        }
    }
}
</code></pre>
<h3 data-id="heading-11">3. SpringBootäº‹ä»¶å‘å¸ƒ</h3>
<p>åœ¨SpringBootåº”ç”¨ä¸­å‘å¸ƒäº‹ä»¶åˆ°å‡½æ•°è®¡ç®—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EventPublisherService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SqsTemplate sqsTemplate;  <span class="hljs-comment">// AWS SQS</span>
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RocketMQTemplate rocketMQTemplate;  <span class="hljs-comment">// é˜¿é‡Œäº‘RocketMQ</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishAsyncTask</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-comment">// å‘å¸ƒåˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±å‡½æ•°æ¶ˆè´¹</span>
        <span class="hljs-keyword">if</span> (isUsingAWS()) {
            sqsTemplate.convertAndSend(<span class="hljs-string">"async-task-queue"</span>, event);
        } <span class="hljs-keyword">else</span> {
            rocketMQTemplate.convertAndSend(<span class="hljs-string">"async-task-topic"</span>, event);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">triggerLambdaDirectly</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-comment">// ç›´æ¥è°ƒç”¨Lambdaå‡½æ•°</span>
        <span class="hljs-type">InvokeRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> InvokeRequest.builder()
                .functionName(<span class="hljs-string">"async-task-function"</span>)
                .payload(JsonUtils.toJson(event).getBytes())
                .build();
                
        lambdaClient.invoke(request);
    }
}
</code></pre>
<h3 data-id="heading-12">4. ä»»åŠ¡çŠ¶æ€ç®¡ç†</h3>
<p>ä¸ºäº†æ›´å¥½åœ°ç®¡ç†å¼‚æ­¥ä»»åŠ¡çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆæ•°æ®åº“ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "async_task")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTask</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String taskId;
    <span class="hljs-keyword">private</span> String eventType;
    <span class="hljs-keyword">private</span> String status;  <span class="hljs-comment">// PENDING, PROCESSING, SUCCESS, FAILED</span>
    <span class="hljs-keyword">private</span> String result;
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskService</span> {
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createAndPublishTask</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">taskId</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        
        <span class="hljs-comment">// ä¿å­˜ä»»åŠ¡è®°å½•</span>
        <span class="hljs-type">AsyncTask</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTask</span>();
        task.setTaskId(taskId);
        task.setEventType(event.getType());
        task.setStatus(<span class="hljs-string">"PENDING"</span>);
        task.setCreateTime(LocalDateTime.now());
        asyncTaskRepository.save(task);
        
        <span class="hljs-comment">// å‘å¸ƒåˆ°å‡½æ•°è®¡ç®—</span>
        eventPublisherService.publishAsyncTask(event);
        
        <span class="hljs-keyword">return</span> taskId;
    }
    
    <span class="hljs-keyword">public</span> AsyncTask <span class="hljs-title function_">getTaskStatus</span><span class="hljs-params">(String taskId)</span> {
        <span class="hljs-keyword">return</span> asyncTaskRepository.findById(taskId).orElse(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h2 data-id="heading-13">é«˜çº§ç‰¹æ€§å®ç°</h2>
<h3 data-id="heading-14">1. å‡½æ•°å†·å¯åŠ¨ä¼˜åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedFunction</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> 
        Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
    
    <span class="hljs-comment">// é¢„çƒ­é€»è¾‘</span>
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmup</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é¢„åŠ è½½å¸¸ç”¨èµ„æº</span>
        initializeResources();
    }
    
    <span class="hljs-keyword">public</span> APIGatewayProxyResponseEvent <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(...)</span> {
        <span class="hljs-comment">// ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†ä»»åŠ¡ï¼Œå‡å°‘å†·å¯åŠ¨å½±å“</span>
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> processTask();
        }, executor).join();
    }
}
</code></pre>
<h3 data-id="heading-15">2. é”™è¯¯é‡è¯•æœºåˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryableTaskProcessor</span> {
    
    <span class="hljs-meta">@Retryable(value = {Exception.class}, maxAttempts = 3, backoff = @Backoff(delay = 1000))</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processTask</span><span class="hljs-params">(AsyncTaskEvent event)</span> {
        <span class="hljs-comment">// ä»»åŠ¡å¤„ç†é€»è¾‘</span>
        executeTask(event);
    }
    
    <span class="hljs-meta">@Recover</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recover</span><span class="hljs-params">(Exception ex, AsyncTaskEvent event)</span> {
        <span class="hljs-comment">// é‡è¯•å¤±è´¥åçš„å¤„ç†</span>
        log.error(<span class="hljs-string">"Task failed after retries: {}"</span>, event.getTaskId(), ex);
        updateTaskStatus(event.getTaskId(), <span class="hljs-string">"FAILED"</span>);
    }
}
</code></pre>
<h3 data-id="heading-16">3. ç›‘æ§ä¸å‘Šè­¦</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FunctionMetricsCollector</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordTaskExecution</span><span class="hljs-params">(String taskType, <span class="hljs-type">long</span> duration, <span class="hljs-type">boolean</span> success)</span> {
        Timer.<span class="hljs-type">Sample</span> <span class="hljs-variable">sample</span> <span class="hljs-operator">=</span> Timer.start(meterRegistry);
        
        <span class="hljs-type">Tags</span> <span class="hljs-variable">tags</span> <span class="hljs-operator">=</span> Tags.of(<span class="hljs-string">"task_type"</span>, taskType, <span class="hljs-string">"success"</span>, String.valueOf(success));
        
        sample.stop(Timer.builder(<span class="hljs-string">"function.task.duration"</span>)
                 .tags(tags)
                 .register(meterRegistry));
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorFunctionHealth</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç›‘æ§å‡½æ•°æ‰§è¡ŒæˆåŠŸç‡ã€å»¶è¿Ÿç­‰æŒ‡æ ‡</span>
    }
}
</code></pre>
<h2 data-id="heading-17">æœ€ä½³å®è·µå»ºè®®</h2>
<ol>
<li><strong>å‡½æ•°è®¾è®¡åŸåˆ™</strong>ï¼šå‡½æ•°åº”è¯¥çŸ­å°ç²¾æ‚ï¼Œä¸“æ³¨å•ä¸€èŒè´£</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šé¿å…åœ¨å‡½æ•°ä¸­ç»´æŠ¤çŠ¶æ€ï¼Œä½¿ç”¨å¤–éƒ¨å­˜å‚¨</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</li>
<li><strong>èµ„æºé™åˆ¶</strong>ï¼šåˆç†è®¾ç½®å†…å­˜å’Œæ‰§è¡Œæ—¶é—´é™åˆ¶</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šç¡®ä¿å‡½æ•°è°ƒç”¨çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®</li>
</ol>
<p>é€šè¿‡Serverlesså‡½æ•°è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºé«˜æ•ˆã€å¼¹æ€§çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†ç³»ç»Ÿï¼Œè®©åº”ç”¨æ¶æ„æ›´åŠ ç°ä»£åŒ–ã€‚</p>
<hr/>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸåˆ†äº«çš„å†…å®¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚æ›´å¤šæŠ€æœ¯å¹²è´§ï¼Œè¯·å…³æ³¨æœåŠ¡ç«¯æŠ€æœ¯ç²¾é€‰ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[tsconfig.json åˆ°åº•é…ç½®äº†ä¸ªå•¥ï¼Ÿâ€”â€”ä»å‡¡äººåˆ°å…ƒå©´çš„ä¿®ä»™æŒ‡å—]]></title>    <link>https://juejin.cn/post/7603227363822256154</link>    <guid>https://juejin.cn/post/7603227363822256154</guid>    <pubDate>2026-02-06T03:37:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603227363822256154" data-draft-id="7603215839582470154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="tsconfig.json åˆ°åº•é…ç½®äº†ä¸ªå•¥ï¼Ÿâ€”â€”ä»å‡¡äººåˆ°å…ƒå©´çš„ä¿®ä»™æŒ‡å—"/> <meta itemprop="keywords" content="TypeScript,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-02-06T03:37:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="polaris_tl"/> <meta itemprop="url" content="https://juejin.cn/user/4142615545513224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            tsconfig.json åˆ°åº•é…ç½®äº†ä¸ªå•¥ï¼Ÿâ€”â€”ä»å‡¡äººåˆ°å…ƒå©´çš„ä¿®ä»™æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4142615545513224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    polaris_tl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:37:47.000Z" title="Fri Feb 06 2026 03:37:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">tsconfig.json åˆ°åº•é…ç½®äº†ä¸ªå•¥ï¼Ÿâ€”â€”ä»å‡¡äººåˆ°å…ƒå©´çš„ä¿®ä»™æŒ‡å—</h2>
<h3 data-id="heading-1">1ã€å‡¡äººå…¥é“ï¼šä¸ƒç„é—¨é‡Œçš„â€œè—å®å›¾â€</h3>
<p>æœ€è¿‘ç¬”è€…åœ¨å€’è…¾ä¸€ä¸ª <strong>Monorepo</strong> å¤§å·¥ç¨‹ï¼ˆå…¨æ ˆå¼€å‘ï¼‰ï¼Œä¸å¯é¿å…åœ°æ’ä¸Šäº† <code>tsconfig.json</code>ã€‚ç›¯ç€é‡Œé¢å¯†å¯†éº»éº»çš„é…ç½®é¡¹ï¼Œæˆ‘é™·å…¥äº†æ²‰æ€ï¼šæˆ‘åªæ˜¯æƒ³è®© <code>tsc</code> å¸®æˆ‘æŠŠä»£ç ç¿»è¯‘ç¿»è¯‘ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šç¹ççš„æŒ‡ä»¤ï¼Ÿ</p>
<p>ä½œä¸ºä¸€ä¸ªè€ç‰Œâ€œç å†œä¿®ä»™è€…â€ï¼Œä»¥å‰é…ç½®è¿™ç©æ„å„¿å…¨é <strong>æœé­‚æœ¯</strong>ï¼ˆCtrl+C/Vï¼‰ï¼Œå¤§ä¸äº†è¯·å‡º<strong>AIé‚ªä¿®</strong>å¼ºè¡Œç ´é˜µã€‚ä½†ä¸ºäº†ä¿®å¾—æ­£æœï¼Œæˆ‘å†³å®šæ·±å…¥ç¦åœ°ï¼Œæ‰’ä¸€æ‰’è¿™æœ¬â€œç¼–è¯‘å™¨æ“ä½œæ‰‹å†Œâ€èƒŒåçš„åº•å±‚é€»è¾‘ã€‚</p>
<p><strong>æœ¬æ–‡ä¸å¤è¯»æ–‡æ¡£!!</strong>ï¼Œåªè®ºé“æ³•ã€‚å„ä½é“å‹ï¼Œè¯·éšæˆ‘å…¥é˜µï¼ğŸ«¡</p>
<hr/>
<h3 data-id="heading-2">2ã€ç‚¼æ°”å¥ åŸºï¼šè¯¸ç¥é»„æ˜ä¸æ¨¡å—åŒ–çš„æ©æ€¨</h3>
<p>è¦æƒ³ä¿®ä»™ä¿®å¾—å¥½ï¼Œ<strong>å› æœèƒŒæ™¯</strong>ä¸èƒ½å°‘ã€‚</p>
<p><code>tsconfig.json</code> ä¹‹æ‰€ä»¥å¤æ‚ï¼Œå…¨æ€ª JS é‚£äº›å¹´ç•™ä¸‹çš„â€œæƒ…å€ºâ€ã€‚åœ¨ JS é“ç¥–å¼€å¤©è¾Ÿåœ°ä¹‹åˆï¼Œæ ¹æœ¬æ²¡æœ‰æ¨¡å—åŒ–ã€‚åæ¥æ±Ÿæ¹–å¤§ä¹±ï¼Œ<strong>CommonJS</strong>ã€<strong>AMD</strong>ã€<strong>UMD</strong> å‰²æ®ä¸€æ–¹ã€‚ç›´åˆ° ES6ï¼ˆ2015å¹´ï¼‰ï¼Œå®˜æ–¹æ‰æ¨å‡ºäº† <strong>ES Module (ESM)</strong> è¯•å›¾å¤§ä¸€ç»Ÿã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼šå³ä¾¿ç°åœ¨å·²æ˜¯ 2026 å¹´ï¼Œnpm ç”Ÿæ€é‡Œä¾ç„¶æ®‹ç•™ç€æµ·é‡çš„ CommonJS è€å¤è‘£ã€‚</p>
<p><strong>TypeScript ä½œä¸º JS çš„è¶…é›†ï¼Œå®ƒæœ€æ ¸å¿ƒçš„ç—›è‹¦å°±åœ¨äºï¼š</strong> å®ƒå¾—å½“ä¸€ä¸ªâ€œç¿»è¯‘å®˜â€ï¼Œåè°ƒè¿™äº›äº’ä¸å…¼å®¹çš„æ¨¡å—ä½“ç³»ã€‚</p>
<p>è¿™å°±æ˜¯ <code>tsconfig.json</code> å­˜åœ¨çš„æ ¹æœ¬æ„ä¹‰â€”â€”<strong>å®ƒåœ¨å‘Šè¯‰ç¼–è¯‘å™¨ï¼šåœ¨ä¸åŒæ¨¡å—ä½“ç³»äº¤ç«æ—¶ï¼Œè¯¥å¦‚ä½•â€œæ‹‰åæ¶â€ï¼</strong></p>
<p>JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CommonJS"</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// å‘Šè¯‰ TSï¼šç¼–è¯‘å‡ºçš„ä»£ç ç”¨å“ªç§æ–¹è¨€è¯´è¯</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// å‘Šè¯‰ TSï¼šå»å“ªé‡Œå¯»æ‰¾é‚£äº›å¤±æ•£çš„æ¨¡å—</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// ç»™ ESM å’Œ CJS ä¹‹é—´æ­ä¸ªæ¡¥ï¼Œåˆ«è®©ä»–ä»¬æ‰“æ¶</span>
    <span class="hljs-attr">"allowSyntheticDefaultImports"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-comment">// å³ä½¿å¯¹æ–¹æ²¡å†™ defaultï¼Œä¹Ÿå…è®¸æˆ‘â€œé»˜è®¤â€å¯¼å…¥</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">3ã€ç­‘åŸºé£äº‘ï¼šæ·±å…¥ç†è§£æ ¸å¿ƒé˜µæ³•</h3>
<h4 data-id="heading-4">3.1 æ ¸å¿ƒä½œç”¨ï¼šå®ƒåˆ°åº•ç®¡ä»€ä¹ˆï¼Ÿ</h4>
<p>ç®€å•æ¥è¯´ï¼Œ<code>tsconfig.json</code> è´Ÿè´£ä¸¤ä»¶äº‹ï¼š <strong>â€œç®¡äººâ€</strong> ï¼ˆå“ªäº›æ–‡ä»¶å‚æˆ˜ï¼‰å’Œ <strong>â€œç®¡äº‹â€</strong> ï¼ˆæ€ä¹ˆæ‰“ä»—ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>æ–‡ä»¶ç®¡ç†ï¼ˆç®¡äººï¼‰ï¼š</strong></p>
<p>é€šè¿‡ <code>include</code>ã€<code>exclude</code>ã€<code>files</code> åˆ’å®šåŠ¿åŠ›èŒƒå›´ã€‚æ¯”å¦‚ï¼šç¼–è¯‘ <code>src</code> é‡Œçš„å¤©æ‰ï¼ˆæºç ï¼‰ï¼Œè¸¢å‡º <code>node_modules</code> é‡Œçš„è·¯äººã€‚</p>
</li>
<li>
<p><strong>ç¼–è¯‘è§„åˆ™ï¼ˆç®¡äº‹ï¼‰ï¼š</strong></p>
<ul>
<li><strong>å®¿ä¸»ç¯å¢ƒ</strong>ï¼š<code>target</code> å†³å®šä½ æ˜¯è¦åœ¨è€æ—§çš„æµè§ˆå™¨ï¼ˆES5ï¼‰é‡Œçˆ¬è¡Œï¼Œè¿˜æ˜¯åœ¨ç°ä»£å¼•æ“ï¼ˆESNextï¼‰é‡Œé£å‡ã€‚</li>
<li><strong>æ¨¡å—ä½“ç³»</strong>ï¼š<code>module</code> å†³å®šè¾“å‡ºçš„å½¢çŠ¶ã€‚</li>
<li><strong>æ£€æŸ¥å¼ºåº¦</strong>ï¼š<code>strict</code> æ¨¡å¼ã€‚å¼€å¯åï¼Œç¼–è¯‘å™¨å°±åƒä¸¥å¸ˆï¼Œä¸€ä¸ä¸€æ¯«çš„ç±»å‹æ¨¡ç³Šï¼ˆanyï¼‰éƒ½å¯èƒ½è®©ä½ é“å¿ƒç ´ç¢ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-5">3.2 é…ç½®ç»§æ‰¿ï¼šåˆ†èº«ä¹‹æœ¯ï¼ˆExtendsï¼‰</h4>
<p>åœ¨ Monorepo æˆ– Vite é¡¹ç›®ä¸­ï¼Œä½ ä¼šçœ‹åˆ° <code>tsconfig.app.json</code>ã€<code>tsconfig.node.json</code>ã€‚</p>
<ul>
<li><strong>extends</strong>ï¼šä¸ºäº†é¿å…æ¯ä¸ªå­é¡¹ç›®éƒ½å†™ä¸€éå†—é•¿çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æä¸ªâ€œç¥–ä¼ ç§˜ç±â€ï¼ˆbase.jsonï¼‰ï¼Œå­é¡¹ç›´æ¥ç»§æ‰¿ï¼Œåªéœ€å¾®è°ƒï¼ˆæ¯”å¦‚å‰ç«¯éœ€è¦ <code>DOM</code> åº“ï¼Œåç«¯éœ€è¦ <code>Node</code> åº“ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6">3.3 è·¯å¾„è§£æï¼šç¼©åœ°æˆå¯¸ï¼ˆPathsï¼‰</h4>
<p>å—å¤Ÿäº† <code>import { tool } from "../../../../../utils"</code> è¿™ç§â€œåƒµå°¸è·¯å¾„â€ï¼Ÿ</p>
<p>é€šè¿‡ <code>baseUrl</code> å’Œ <code>paths</code>ï¼Œä½ å¯ä»¥æ–½å±•<strong>ç¼©åœ°æˆå¯¸</strong>ï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/*"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é“å‹è¯·ç•™æ­¥ï¼š</strong> è¿™åªæ˜¯ç»™ <code>tsc</code> çœ‹çš„â€œå¹»æœ¯â€ã€‚å¦‚æœä½ æ²¡é…åˆ Vite/Webpack è¿›è¡Œç‰©ç†å±‚é¢çš„è·¯å¾„æ˜ å°„ï¼Œä»£ç è¿è¡Œåˆ° JS ç¯å¢ƒæ—¶ä¼šå› ä¸ºæ‰¾ä¸åˆ°è·¯è€Œèµ°ç«å…¥é­”ã€‚</p>
<h4 data-id="heading-7">3.4 æ¨¡å—æŸ¥æ‰¾ï¼šç°ä»£ä¿®ä»™çš„æ–°æ³•é—¨</h4>
<p>åˆ°äº† TS 5.x æ—¶ä»£ï¼Œæœ‰ä¸¤ä¸ªé…ç½®å€¼å¾—é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li><strong>moduleResolution: "bundler"</strong> ï¼šè¿™æ˜¯ç»™ Vite/Webpack æ‰“åŒ…å·¥å…·é‡èº«å®šåˆ¶çš„æ¨¡å¼ã€‚å®ƒæ›´èªæ˜ï¼ŒçŸ¥é“ç°åœ¨çš„å¼€å‘è€…ä¸å–œæ¬¢å†™ <code>.js</code> åç¼€ï¼Œä¹Ÿæ‡‚å¾—å¦‚ä½•å¤„ç† <code>package.json</code> é‡Œçš„å„ç§å¤æ‚å¯¼å‡ºã€‚</li>
<li><strong>verbatimModuleSyntax</strong>ï¼šè¿™æ˜¯<strong>é«˜æ€§èƒ½å¼€å…³</strong>ã€‚å®ƒè¦æ±‚ä½ æ˜ç¡®æ ‡è®° <code>import type</code>ã€‚ç¼–è¯‘å™¨çœ‹åˆ° type ç›´æ¥â€œç‰©ç†åˆ é™¤â€ï¼Œä¸è´¹è„‘å­å»çŒœï¼Œç¼–è¯‘é€Ÿåº¦çªé£çŒ›è¿›ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">4ã€ç»“ä¸¹ï¼šé“æ³•æ€»ç»“</h3>
<p>è¦çœŸæ­£æŒæ¡ <code>tsconfig.json</code>ï¼Œåªéœ€è®°ä½ï¼š</p>
<ol>
<li>å®ƒæ˜¯<strong>è¾“å…¥çš„å‡†åˆ™</strong>ï¼šç•Œå®šå“ªäº›æ–‡ä»¶æ˜¯ä½ çš„â€œé—¨å¾’â€ã€‚</li>
<li>å®ƒæ˜¯<strong>è¿è¡Œçš„è“å›¾</strong>ï¼šå†³å®šä»£ç ç¿»è¯‘æˆä»€ä¹ˆæ ·ã€‚</li>
<li>å®ƒæ˜¯<strong>ç±»å‹çš„å¿ƒæ³•</strong>ï¼šå†³å®šé™æ€æ£€æŸ¥æœ‰å¤šç‹ ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-9">5ã€å…ƒå©´å‡ºä¸–ï¼šä¸‹ä¸€æ­¥æŒ‘æˆ˜</h3>
<p>ä¿®ç‚¼è‡³æ­¤ï¼Œä½ å·²ç»è¯†ç ´äº† <code>tsconfig.json</code> çš„ä¼ªè£…ã€‚é¢å¯¹æ·±ä¸å¯æµ‹çš„ Monorepo é…ç½®ï¼Œä½ å·²ç»å…·å¤‡äº†åˆæ­¥çš„æŠ—æ€§ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨å„ä½å¯ä»¥å»æŒ‘æˆ˜éŸ©è€é­”äº†ï¼ŒåŠ æ²¹~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bc61c7825bc4585bf1b27adeb33205e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcG9sYXJpc190bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953868&amp;x-signature=FoI2RYE6MB2bLBIngeVIQajwPj4%3D" alt="honey.jpeg" loading="lazy"/></p>
<p>å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.typescriptlang.org%2Fdocs%2Fhandbook%2Fmodules%2Ftheory.html%23module-resolution" target="_blank" title="https://www.typescriptlang.org/docs/handbook/modules/theory.html#module-resolution" ref="nofollow noopener noreferrer">www.typescriptlang.org/docs/handboâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 DeFi æ–°èŒƒå¼ï¼šæ„å›¾é‡‘èï¼ˆIntent-Centricï¼‰æ·±åº¦è§£æä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7603227363822436378</link>    <guid>https://juejin.cn/post/7603227363822436378</guid>    <pubDate>2026-02-06T04:28:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603227363822436378" data-draft-id="7602914378388750346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 DeFi æ–°èŒƒå¼ï¼šæ„å›¾é‡‘èï¼ˆIntent-Centricï¼‰æ·±åº¦è§£æä¸å®æˆ˜"/> <meta itemprop="keywords" content="æ™ºèƒ½åˆçº¦,Solidity,web3"/> <meta itemprop="datePublished" content="2026-02-06T04:28:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨è¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/2436173496845549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 DeFi æ–°èŒƒå¼ï¼šæ„å›¾é‡‘èï¼ˆIntent-Centricï¼‰æ·±åº¦è§£æä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173496845549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨è¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T04:28:47.000Z" title="Fri Feb 06 2026 04:28:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â€œæ„å›¾é‡‘èâ€ï¼ˆIntent-Centric Financeï¼‰æ˜¯å»ä¸­å¿ƒåŒ–é‡‘èï¼ˆDeFiï¼‰é¢†åŸŸçš„é©å‘½æ€§äº¤äº’èŒƒå¼ï¼Œå…¶æ ¸å¿ƒé€»è¾‘å®ç°äº†ä»â€œè¿‡ç¨‹å¯¼å‘â€åˆ°â€œç»“æœå¯¼å‘â€çš„æ ¹æœ¬æ€§è½¬å˜ã€‚ç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ‰§è¡Œæˆæƒã€è·¨é“¾ã€è·¯å¾„ç­›é€‰ç­‰å¤æ‚æ“ä½œï¼Œä»…éœ€å‘ç³»ç»Ÿå£°æ˜æœ€ç»ˆç›®æ ‡ï¼ˆå³â€œæ„å›¾â€ï¼‰åŠçº¦æŸæ¡ä»¶ï¼Œå‰©ä½™çš„æ‰§è¡Œæµç¨‹ç”±ä¸“ä¸šâ€œæ±‚è§£è€…â€ï¼ˆSolvers/Searchersï¼‰å®Œæˆï¼Œå¤§å¹…é™ä½äº†Web3é‡‘èçš„ä½¿ç”¨é—¨æ§›ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€ è¶‹åŠ¿èƒŒæ™¯ï¼šä»â€œæ“ä½œå¯¼å‘â€åˆ°â€œç»“æœå¯¼å‘â€</h2>
<p>åœ¨ä¼ ç»Ÿçš„ DeFi äº¤äº’ä¸­ï¼Œç”¨æˆ·å¿…é¡»å……å½“â€œæ“ä½œå‘˜â€ï¼š</p>
<ol>
<li><strong>å¯»æ‰¾è·¯å¾„</strong>ï¼šå»å“ªä¸ª DEX æ¢å¸ï¼Ÿç”¨å“ªä¸ªè·¨é“¾æ¡¥ï¼Ÿ</li>
<li><strong>ç®¡ç†ç»†èŠ‚</strong>ï¼šè®¾ç½®æ»‘ç‚¹ã€è®¡ç®— Gas è´¹ã€å¤„ç†å¤šæ­¥æˆæƒã€‚</li>
<li><strong>æ‰¿æ‹…é£é™©</strong>ï¼šæ‰‹åŠ¨æ“ä½œå¤±è¯¯æˆ–é­å— MEV å¤¹å‡»ã€‚</li>
</ol>
<p><strong>æ„å›¾é‡‘è (Intent-Centric Finance)</strong> Â åœ¨ 2026 å¹´å½»åº•æ”¹å˜äº†è¿™ä¸€ç°çŠ¶ã€‚ç”¨æˆ·ä¸å†æäº¤å…·ä½“çš„äº¤æ˜“æ­¥éª¤ï¼Œè€Œæ˜¯ç­¾ç½²ä¸€ä¸ª <strong>â€œæ„å›¾â€ï¼ˆIntentï¼‰</strong> â€”â€”å³å£°æ˜â€œæˆ‘æƒ³è¦çš„ç»“æœâ€ï¼Œè€Œå°†â€œå¦‚ä½•è¾¾æˆç»“æœâ€çš„è¿‡ç¨‹å¤–åŒ…ç»™ä¸“ä¸šçš„<strong>æ±‚è§£è€…ï¼ˆSolversï¼‰</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ æ„å›¾é‡‘è vs. ä¼ ç»Ÿäº¤æ˜“Â </h2>






























<table><thead><tr><th>ç»´åº¦Â </th><th>ä¼ ç»Ÿ DeFi äº¤æ˜“ (Imperative)</th><th>æ„å›¾é‡‘è (Declarative)</th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·æ“ä½œ</strong></td><td>æ‰‹åŠ¨æ“ä½œï¼šæ¡¥æ¥â†’æ¢ Gasâ†’æˆæƒâ†’äº¤æ¢</td><td>å£°æ˜ç›®æ ‡ï¼šâ€œæˆ‘è¦ç”¨100100100USDC æ¢åˆ°æœ€å¤šçš„ ETHâ€</td></tr><tr><td><strong>äº¤äº’å¤æ‚æ€§</strong></td><td>ç”¨æˆ·å¿…é¡»ç†è§£å„ç§åº•å±‚åè®®å’Œ Gas ä¼˜åŒ–</td><td><strong>æŠ½è±¡åŒ–åº•å±‚</strong>ï¼Œç”¨æˆ·åƒâ€œæ‰“è½¦â€ä¸€æ ·ï¼Œåªç»™ç›®çš„åœ°</td></tr><tr><td><strong>æ‰§è¡Œæ•ˆç‡</strong></td><td>è·¯å¾„å•ä¸€ï¼Œå¯èƒ½å› å¤±è¯¯å¯¼è‡´æ»‘ç‚¹é«˜æˆ–å¤±è´¥</td><td>å¤šä¸ªâ€œæ±‚è§£è€…â€ç«äº‰ï¼Œå¯»æ‰¾<strong>å…¨ç½‘æœ€ä¼˜è·¯å¾„</strong></td></tr><tr><td><strong>MEV ä¿æŠ¤</strong></td><td>æ˜“å—æœºå™¨äººå¤¹å‡»æ”»å‡»ï¼ˆMEVï¼‰</td><td>é€šå¸¸å…·å¤‡ <strong>MEV æŠ—æ€§</strong>ï¼Œé£é™©è½¬å«ç»™æ±‚è§£è€…</td></tr></tbody></table>
<h2 data-id="heading-3">ä¸‰ã€ æ„å›¾é‡‘èçš„æ ¸å¿ƒæ¶æ„</h2>
<p>æ„å›¾æ¶æ„ç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š</p>





















<table><thead><tr><th>ç»„ä»¶</th><th>èŒèƒ½</th></tr></thead><tbody><tr><td><strong>ç”¨æˆ· (User)</strong></td><td>ç­¾ç½²åŒ…å«çº¦æŸæ¡ä»¶ï¼ˆä»·æ ¼ã€æ—¶æ•ˆã€Nonceï¼‰çš„å£°æ˜ï¼Œä¸éœ€æ”¯ä»˜ Gas æˆ–äº†è§£è·¯å¾„ã€‚</td></tr><tr><td><strong>æ±‚è§£è€… (Solvers)</strong></td><td>é“¾ä¸‹ç«äº‰è€…ï¼Œå¯»æ‰¾æœ€ä¼˜æ‰§è¡Œè·¯å¾„ï¼ˆèšåˆæµåŠ¨æ€§ã€è·¨é“¾ã€è‡ªè¥èµ„é‡‘è¡¥è¶³ï¼‰ï¼Œå¹¶ä»£ä»˜ Gasã€‚</td></tr><tr><td><strong>ç»“ç®—åˆçº¦ (Executor)</strong></td><td>é“¾ä¸ŠéªŒè¯å™¨ï¼Œç¡®ä¿æ±‚è§£è€…çš„ç»“æœä¸¥æ ¼æ»¡è¶³ç”¨æˆ·æ„å›¾ï¼Œå¦åˆ™æ‹’ç»æ‰§è¡Œã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">å››. 2026 å¹´çš„ä¸»æµåº”ç”¨åœºæ™¯Â </h2>
<p>éšç€æŠ€æœ¯æˆç†Ÿï¼Œæ„å›¾é‡‘èåœ¨2026å¹´å·²è½åœ°å¤šä¸ªæ ¸å¿ƒåœºæ™¯ï¼Œå®ç°ä»â€œæå®¢å·¥å…·â€åˆ°â€œå¤§ä¼—é‡‘èâ€çš„è·¨è¶Šï¼š</p>
<ul>
<li><strong>æ— ç¼è·¨é“¾äº¤æ˜“</strong>ï¼šä»¥Acrossåè®®ä¸ºä»£è¡¨ï¼Œç”¨æˆ·åœ¨Aé“¾æ”¯ä»˜åŸèµ„äº§åï¼Œå¯ç›´æ¥åœ¨Bé“¾æ¥æ”¶ç›®æ ‡èµ„äº§ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œè·¨é“¾æ¡¥çš„ç¹çæ­¥éª¤ï¼Œå®ç°è·¨é“¾äº¤äº’â€œé›¶é—¨æ§›â€ã€‚</li>
<li><strong>æœ€ä¼˜ä»·æ ¼èšåˆäº¤æ˜“</strong>ï¼šUniswapXã€CoW Swapç­‰å¹³å°å€ŸåŠ©æ„å›¾æœºåˆ¶ï¼Œè‡ªåŠ¨æ‰«æå…¨ç½‘æµåŠ¨æ€§æ± ï¼Œæ•´åˆä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ä¸å»ä¸­å¿ƒåŒ–åè®®èµ„æºï¼Œä¸ºç”¨æˆ·è¾¾æˆæœ€ä¼˜æˆäº¤ä»·æ ¼ã€‚</li>
<li><strong>æ™ºèƒ½æ”¶ç›Šç­–ç•¥ç®¡ç†</strong>ï¼šä¾æ‰˜Anomaç­‰åº•å±‚åè®®ï¼Œç”¨æˆ·ä»…éœ€å£°æ˜æ”¶ç›Šç›®æ ‡ï¼ˆå¦‚â€œç¨³å®šå¸å¹´åŒ–æ”¶ç›Šï¼10%â€ï¼‰ï¼Œç³»ç»Ÿå³å¯è‡ªåŠ¨åœ¨ä¸åŒDeFiåè®®é—´è°ƒåº¦èµ„é‡‘ï¼ŒåŠ¨æ€é€‚é…æœ€ä¼˜æ”¶ç›Šç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-5">äº”ã€æ„å›¾é‡‘èæ™ºèƒ½åˆçº¦å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²</h2>
<h4 data-id="heading-6">ä¸€ã€æ™ºèƒ½åˆçº¦</h4>
<p><strong>ä»£å¸åˆçº¦</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
<span class="hljs-comment">// Compatible with OpenZeppelin Contracts ^5.5.0</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.24</span>;

<span class="hljs-keyword">import</span> {<span class="hljs-title class_">ERC20</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@openzeppelin/contracts/token/ERC20/ERC20.sol"</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">ERC20Burnable</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@openzeppelin/contracts/token/ERC20/extensions/ERC20Burnable.sol"</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">ERC20Permit</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@openzeppelin/contracts/token/ERC20/extensions/ERC20Permit.sol"</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">Ownable</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@openzeppelin/contracts/access/Ownable.sol"</span>;

contract <span class="hljs-title class_">BoykaYuriToken</span> is <span class="hljs-title class_">ERC20</span>, <span class="hljs-title class_">ERC20Burnable</span>, <span class="hljs-title class_">Ownable</span>, <span class="hljs-title class_">ERC20Permit</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">address recipient, address initialOwner</span>)
        <span class="hljs-title class_">ERC20</span>(<span class="hljs-string">"MyToken"</span>, <span class="hljs-string">"MTK"</span>)
        <span class="hljs-title class_">Ownable</span>(initialOwner)
        <span class="hljs-title class_">ERC20Permit</span>(<span class="hljs-string">"MyToken"</span>)
    {
        <span class="hljs-title function_">_mint</span>(recipient, <span class="hljs-number">1000000</span> * <span class="hljs-number">10</span> ** <span class="hljs-title function_">decimals</span>());
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">mint</span>(<span class="hljs-params">address to, uint256 amount</span>) public onlyOwner {
        <span class="hljs-title function_">_mint</span>(to, amount);
    }
}
</code></pre>
<p><strong>æ„å›¾é‡‘èåˆçº¦</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.24</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">"@openzeppelin/contracts/utils/cryptography/ECDSA.sol"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@openzeppelin/contracts/utils/cryptography/MessageHashUtils.sol"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@openzeppelin/contracts/utils/ReentrancyGuard.sol"</span>; <span class="hljs-comment">// å¼•å…¥é˜²é‡å…¥åº“</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"@openzeppelin/contracts/token/ERC20/IERC20.sol"</span>;

contract IntentExecutor is ReentrancyGuard { <span class="hljs-comment">// å¿…é¡»åœ¨è¿™é‡Œæ˜¾å¼ç»§æ‰¿</span>
    <span class="hljs-keyword">using</span> ECDSA <span class="hljs-keyword">for</span> bytes32;
    <span class="hljs-keyword">using</span> MessageHashUtils <span class="hljs-keyword">for</span> bytes32;

    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Intent</span> {
        address user;
        address tokenIn;
        uint256 amountIn;
        address tokenOut;
        uint256 minAmountOut;
        uint256 nonce;
        uint256 deadline;
    }

    <span class="hljs-built_in">mapping</span>(address =&gt; uint256) <span class="hljs-keyword">public</span> nonces;

    <span class="hljs-function">event <span class="hljs-title">IntentFulfilled</span><span class="hljs-params">(bytes32 indexed intentHash, address indexed solver)</span></span>;

    <span class="hljs-function">function <span class="hljs-title">getIntentHash</span><span class="hljs-params">(Intent memory intent)</span> <span class="hljs-keyword">public</span> pure <span class="hljs-title">returns</span> <span class="hljs-params">(bytes32)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">keccak256</span>(abi.<span class="hljs-built_in">encode</span>(
            intent.user,
            intent.tokenIn,
            intent.amountIn,
            intent.tokenOut,
            intent.minAmountOut,
            intent.nonce,
            intent.deadline
        ));
    }

    <span class="hljs-comment">/**
     * æ³¨æ„ï¼šOpenZeppelin V5 çš„ä¿®é¥°å™¨æ˜¯ nonReentrant (å°é©¼å³°)
     */</span>
    <span class="hljs-function">function <span class="hljs-title">executeIntent</span><span class="hljs-params">(Intent calldata intent, bytes calldata signature)</span> 
        external 
        nonReentrant <span class="hljs-comment">// ä¿®æ­£æ­¤å¤„ï¼šä» non_reentrant æ”¹ä¸º nonReentrant</span>
    </span>{
        <span class="hljs-built_in">require</span>(block.timestamp &lt;= intent.deadline, <span class="hljs-string">"Intent expired"</span>);
        <span class="hljs-built_in">require</span>(intent.nonce == nonces[intent.user], <span class="hljs-string">"Invalid nonce"</span>);

        <span class="hljs-comment">// éªŒè¯ç­¾å</span>
        bytes32 hash = <span class="hljs-built_in">getIntentHash</span>(intent).<span class="hljs-built_in">toEthSignedMessageHash</span>();
        <span class="hljs-built_in">require</span>(hash.<span class="hljs-built_in">recover</span>(signature) == intent.user, <span class="hljs-string">"Invalid signature"</span>);

        <span class="hljs-comment">// æ›´æ–° Nonce é˜²æ­¢é‡æ”¾</span>
        nonces[intent.user]++;

        <span class="hljs-comment">// æ‰§è¡Œæ„å›¾é€»è¾‘</span>
        <span class="hljs-comment">// 1. ä»ç”¨æˆ·å¤„è½¬å…¥èµ„äº§åˆ° Solver (éœ€ç”¨æˆ·æå‰ approve æœ¬åˆçº¦)</span>
        <span class="hljs-built_in">IERC20</span>(intent.tokenIn).<span class="hljs-built_in">transferFrom</span>(intent.user, msg.sender, intent.amountIn);

        <span class="hljs-comment">// 2. Solver å¿…é¡»ç¡®ä¿ç”¨æˆ·æ”¶åˆ°ç›®æ ‡èµ„äº§</span>
        <span class="hljs-comment">// åœ¨æ„å›¾é‡‘èä¸­ï¼Œç”± Solver ä¿è¯ç»“æœçš„æœ€ç»ˆæ€§</span>
        <span class="hljs-built_in">require</span>(
            <span class="hljs-built_in">IERC20</span>(intent.tokenOut).<span class="hljs-built_in">transferFrom</span>(msg.sender, intent.user, intent.minAmountOut),
            <span class="hljs-string">"Solver failed to provide minAmountOut"</span>
        );

        <span class="hljs-function">emit <span class="hljs-title">IntentFulfilled</span><span class="hljs-params">(getIntentHash(intent), msg.sender)</span></span>;
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-7">äºŒã€æ„å›¾é‡‘èæµ‹è¯•è„šæœ¬</h4>
<p><strong>æµ‹è¯•è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>Solver åº”è¯¥èƒ½å¤Ÿæ‰§è¡Œæœ‰æ•ˆçš„ç”¨æˆ·æ„å›¾</strong></li>
<li><strong>è¿‡æœŸçš„æ„å›¾åº”è¯¥æ‰§è¡Œå¤±è´¥</strong></li>
<li><strong>Nonce ä¸åŒ¹é…åº”è¯¥é˜²æ­¢é‡æ”¾æ”»å‡»</strong></li>
</ol>
<pre><code class="hljs language-php" lang="php">import assert <span class="hljs-keyword">from</span> <span class="hljs-string">"node:assert/strict"</span>;
import { describe, it, beforeEach } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:test"</span>;
import { parseEther, formatEther, keccak256, encodeAbiParameters, hashMessage } <span class="hljs-keyword">from</span> <span class="hljs-string">'viem'</span>;
import { network } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;

<span class="hljs-title function_ invoke__">describe</span>(<span class="hljs-string">"IntentExecutor æ„å›¾é‡‘èåˆçº¦æµ‹è¯•"</span>, function () {
    let IntentExecutor: any, MockTokenA: any, MockTokenB: any;
    let publicClient: any, testClient: any;
    let user: any, solver: any, owner: any;

    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">AMOUNT_IN</span> = <span class="hljs-title function_ invoke__">parseEther</span>(<span class="hljs-string">"100"</span>); <span class="hljs-comment">// ç”¨æˆ·æƒ³å‡ºçš„ 100 A</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MIN_AMOUNT_OUT</span> = <span class="hljs-title function_ invoke__">parseEther</span>(<span class="hljs-string">"0.05"</span>); <span class="hljs-comment">// ç”¨æˆ·è¦æ±‚çš„æœ€ä½å›æŠ¥ 0.05 B</span>

    <span class="hljs-title function_ invoke__">beforeEach</span>(async function () {
        <span class="hljs-keyword">const</span> { viem } = await network.<span class="hljs-title function_ invoke__">connect</span>();
        publicClient = await viem.<span class="hljs-title function_ invoke__">getPublicClient</span>();
        testClient = await viem.<span class="hljs-title function_ invoke__">getTestClient</span>();
        [owner, user, solver] = await viem.<span class="hljs-title function_ invoke__">getWalletClients</span>();

        <span class="hljs-comment">// 1. éƒ¨ç½²ä¸¤ä¸ª Mock ä»£å¸æ¨¡æ‹Ÿäº¤æ¢</span>
        <span class="hljs-comment">// ä½¿ç”¨ä½ çš„ BoykaYuriToken æˆ–æ ‡å‡† ERC20</span>
        MockTokenA = await viem.<span class="hljs-title function_ invoke__">deployContract</span>(<span class="hljs-string">"BoykaYuriToken"</span>, [owner.account.address, owner.account.address]);
        MockTokenB = await viem.<span class="hljs-title function_ invoke__">deployContract</span>(<span class="hljs-string">"BoykaYuriToken"</span>, [owner.account.address, owner.account.address]);

        <span class="hljs-comment">// 2. éƒ¨ç½²æ„å›¾æ‰§è¡Œåˆçº¦</span>
        IntentExecutor = await viem.<span class="hljs-title function_ invoke__">deployContract</span>(<span class="hljs-string">"IntentExecutor"</span>, []);

        <span class="hljs-comment">// 3. åˆå§‹èµ„é‡‘åˆ†é…</span>
        <span class="hljs-comment">// ç»™ç”¨æˆ·å‘ TokenA</span>
        await MockTokenA.write.<span class="hljs-title function_ invoke__">transfer</span>([user.account.address, AMOUNT_IN], { <span class="hljs-attr">account</span>: owner.account });
        <span class="hljs-comment">// ç»™ Solver å‘ TokenB (ç”¨äºå±¥è¡Œæ„å›¾)</span>
        await MockTokenB.write.<span class="hljs-title function_ invoke__">transfer</span>([solver.account.address, <span class="hljs-title function_ invoke__">parseEther</span>(<span class="hljs-string">"10"</span>)], { <span class="hljs-attr">account</span>: owner.account });

        <span class="hljs-comment">// 4. æˆæƒï¼šç”¨æˆ·å’Œ Solver éƒ½éœ€è¦æˆæƒç»™ IntentExecutor åˆçº¦</span>
        await MockTokenA.write.<span class="hljs-title function_ invoke__">approve</span>([IntentExecutor.address, AMOUNT_IN], { <span class="hljs-attr">account</span>: user.account });
        await MockTokenB.write.<span class="hljs-title function_ invoke__">approve</span>([IntentExecutor.address, <span class="hljs-title function_ invoke__">parseEther</span>(<span class="hljs-string">"10"</span>)], { <span class="hljs-attr">account</span>: solver.account });
    });

    <span class="hljs-title function_ invoke__">it</span>(<span class="hljs-string">"Solver åº”è¯¥èƒ½å¤Ÿæ‰§è¡Œæœ‰æ•ˆçš„ç”¨æˆ·æ„å›¾"</span>, async function () {
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">nonce</span> = await IntentExecutor.read.<span class="hljs-title function_ invoke__">nonces</span>([user.account.address]);
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">deadline</span> = <span class="hljs-title function_ invoke__">BigInt</span>(Math.<span class="hljs-title function_ invoke__">floor</span>(Date.<span class="hljs-title function_ invoke__">now</span>() / <span class="hljs-number">1000</span>) + <span class="hljs-number">3600</span>);

        <span class="hljs-comment">// 1. æ„å»ºæ„å›¾å¯¹è±¡ (å¿…é¡»ä¸ Solidity Struct é¡ºåºä¸€è‡´)</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">intent</span> = {
            user: user.account.address,
            tokenIn: MockTokenA.address,
            amountIn: AMOUNT_IN,
            tokenOut: MockTokenB.address,
            minAmountOut: MIN_AMOUNT_OUT,
            nonce: nonce,
            deadline: deadline
        };

        <span class="hljs-comment">// 2. é“¾ä¸‹è®¡ç®—å“ˆå¸Œ (å¯¹åº”åˆçº¦ getIntentHash)</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">structHash</span> = <span class="hljs-title function_ invoke__">keccak256</span>(
            <span class="hljs-title function_ invoke__">encodeAbiParameters</span>(
                [
                    { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> },
                    { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }
                ],
                [intent.user, intent.tokenIn, intent.amountIn, intent.tokenOut, intent.minAmountOut, intent.nonce, intent.deadline]
            )
        );

        <span class="hljs-comment">// 3. ç”¨æˆ·è¿›è¡Œ EIP-191 ç­¾å</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">signature</span> = await user.<span class="hljs-title function_ invoke__">signMessage</span>({
            <span class="hljs-attr">message</span>: { <span class="hljs-attr">raw</span>: structHash },
        });

        <span class="hljs-comment">// 4. Solver æäº¤äº¤æ˜“</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">hash</span> = await IntentExecutor.write.<span class="hljs-title function_ invoke__">executeIntent</span>([intent, signature], { <span class="hljs-attr">account</span>: solver.account });
        await publicClient.<span class="hljs-title function_ invoke__">waitForTransactionReceipt</span>({ hash });

        <span class="hljs-comment">// 5. éªŒè¯èµ„äº§è½¬ç§»</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">userFinalBalanceB</span> = await MockTokenB.read.<span class="hljs-title function_ invoke__">balanceOf</span>([user.account.address]);
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">solverFinalBalanceA</span> = await MockTokenA.read.<span class="hljs-title function_ invoke__">balanceOf</span>([solver.account.address]);

        console.<span class="hljs-title function_ invoke__">log</span>(`æ„å›¾è¾¾æˆï¼ç”¨æˆ·æ”¶åˆ° <span class="hljs-attr">TokenB</span>: ${<span class="hljs-title function_ invoke__">formatEther</span>(userFinalBalanceB)}`);
        
        assert.<span class="hljs-title function_ invoke__">equal</span>(userFinalBalanceB, MIN_AMOUNT_OUT, <span class="hljs-string">"ç”¨æˆ·æ”¶åˆ°çš„ä»£å¸æ•°é‡ä¸ç¬¦åˆæ„å›¾"</span>);
        assert.<span class="hljs-title function_ invoke__">equal</span>(solverFinalBalanceA, AMOUNT_IN, <span class="hljs-string">"Solver æœªæ”¶åˆ°ç”¨æˆ·çš„ä»£å¸"</span>);
    });
       <span class="hljs-title function_ invoke__">it</span>(<span class="hljs-string">"è¿‡æœŸçš„æ„å›¾åº”è¯¥æ‰§è¡Œå¤±è´¥"</span>, async function () {
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">latestBlock</span> = await publicClient.<span class="hljs-title function_ invoke__">getBlock</span>({ <span class="hljs-attr">blockTag</span>: <span class="hljs-string">'latest'</span> });
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">currentChainTime</span> = latestBlock.timestamp;
        
        <span class="hljs-comment">// 1. æ˜ç¡®è®¾ç½®ä¸€ä¸ªå·²ç»è¿‡æœŸçš„æ—¶é—´</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">expiredDeadline</span> = currentChainTime - <span class="hljs-number">1000</span>n;
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">currentNonce</span> = await IntentExecutor.read.<span class="hljs-title function_ invoke__">nonces</span>([user.account.address]);

        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">intent</span> = {
            user: user.account.address,
            tokenIn: MockTokenA.address,
            amountIn: AMOUNT_IN,
            tokenOut: MockTokenB.address,
            minAmountOut: MIN_AMOUNT_OUT,
            nonce: currentNonce,
            deadline: expiredDeadline
        };

        <span class="hljs-comment">// 2. ç”Ÿæˆåˆæ³•ç­¾åï¼ˆç¡®ä¿é”™è¯¯ä¸æ˜¯ç”±ç­¾åè§£æå¼•èµ·çš„ï¼‰</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">structHash</span> = <span class="hljs-title function_ invoke__">keccak256</span>(
            <span class="hljs-title function_ invoke__">encodeAbiParameters</span>(
                [{ <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }],
                [intent.user, intent.tokenIn, intent.amountIn, intent.tokenOut, intent.minAmountOut, intent.nonce, intent.deadline]
            )
        );
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">signature</span> = await user.<span class="hljs-title function_ invoke__">signMessage</span>({ <span class="hljs-attr">message</span>: { <span class="hljs-attr">raw</span>: structHash } });

        <span class="hljs-comment">// 3. æ‰§è¡Œæµ‹è¯•</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨ simulateContract å°è¯•æ‰§è¡Œ</span>
            await publicClient.<span class="hljs-title function_ invoke__">simulateContract</span>({
                <span class="hljs-attr">address</span>: IntentExecutor.address,
                <span class="hljs-attr">abi</span>: IntentExecutor.abi,
                <span class="hljs-attr">functionName</span>: <span class="hljs-string">'executeIntent'</span>,
                <span class="hljs-attr">args</span>: [intent, signature],
                <span class="hljs-attr">account</span>: solver.account,
            });
            assert.<span class="hljs-title function_ invoke__">fail</span>(<span class="hljs-string">"æ„å›¾å·²è¿‡æœŸï¼Œä½†åˆçº¦æœªæŠ›å‡ºå¼‚å¸¸"</span>);
        } <span class="hljs-keyword">catch</span> (error: any) {
            <span class="hljs-comment">// åœ¨ 2026 å¼€å‘å®è·µä¸­ï¼Œå¦‚æœæ— æ³•è§£æåŸå› ï¼Œæˆ‘ä»¬é€šè¿‡æ’é™¤æ³•ç¡®è®¤é”™è¯¯</span>
            <span class="hljs-comment">// åªè¦é”™è¯¯ä¿¡æ¯åŒ…å« "reverted" æˆ– "RPC error"ï¼Œä¸”æˆ‘ä»¬å·²çŸ¥ deadline å·²è¿‡</span>
            <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">isReverted</span> = error.message.<span class="hljs-title function_ invoke__">includes</span>(<span class="hljs-string">"reverted"</span>) || 
                               error.details?.<span class="hljs-title function_ invoke__">includes</span>(<span class="hljs-string">"reverted"</span>) ||
                               error.message.<span class="hljs-title function_ invoke__">includes</span>(<span class="hljs-string">"RPC error"</span>);
            
            assert.<span class="hljs-title function_ invoke__">ok</span>(isReverted, `åº”è¯¥è§¦å‘åˆçº¦ Revertï¼Œå®é™…æ”¶åˆ°: ${error.message}`);
            console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"âœ… æˆåŠŸæ•è·åˆ°è¿‡æœŸå¯¼è‡´çš„åˆçº¦æ‹¦æˆª (å³ä½¿ Hardhat æ— æ³•è§£æå…·ä½“å­—ç¬¦ä¸²)"</span>);
        }
    });
    <span class="hljs-title function_ invoke__">it</span>(<span class="hljs-string">"Nonce ä¸åŒ¹é…åº”è¯¥é˜²æ­¢é‡æ”¾æ”»å‡»"</span>, async function () {
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">deadline</span> = <span class="hljs-title function_ invoke__">BigInt</span>(Math.<span class="hljs-title function_ invoke__">floor</span>(Date.<span class="hljs-title function_ invoke__">now</span>() / <span class="hljs-number">1000</span>) + <span class="hljs-number">3600</span>);
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">intent</span> = {
            user: user.account.address,
            tokenIn: MockTokenA.address,
            amountIn: AMOUNT_IN,
            tokenOut: MockTokenB.address,
            minAmountOut: MIN_AMOUNT_OUT,
            nonce: <span class="hljs-number">0</span>n,
            deadline: deadline
        };

        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸ</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">structHash</span> = <span class="hljs-title function_ invoke__">keccak256</span>(<span class="hljs-title function_ invoke__">encodeAbiParameters</span>(
            [{ <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'address'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span> }],
            [intent.user, intent.tokenIn, intent.amountIn, intent.tokenOut, intent.minAmountOut, intent.nonce, intent.deadline]
        ));
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">signature</span> = await user.<span class="hljs-title function_ invoke__">signMessage</span>({ <span class="hljs-attr">message</span>: { <span class="hljs-attr">raw</span>: structHash } });
        await IntentExecutor.write.<span class="hljs-title function_ invoke__">executeIntent</span>([intent, signature], { <span class="hljs-attr">account</span>: solver.account });

        <span class="hljs-comment">// å°è¯•å†æ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ„å›¾/ç­¾åè¿›è¡Œç¬¬äºŒæ¬¡æ‰§è¡Œ</span>
        <span class="hljs-keyword">try</span> {
            await IntentExecutor.write.<span class="hljs-title function_ invoke__">executeIntent</span>([intent, signature], { <span class="hljs-attr">account</span>: solver.account });
            assert.<span class="hljs-title function_ invoke__">fail</span>(<span class="hljs-string">"ä¸åº”å…è®¸é‡å¤ä½¿ç”¨åŒä¸€ä¸ª Nonce"</span>);
        } <span class="hljs-keyword">catch</span> (error: any) {
            assert.<span class="hljs-title function_ invoke__">ok</span>(error.message.<span class="hljs-title function_ invoke__">includes</span>(<span class="hljs-string">"Invalid nonce"</span>), <span class="hljs-string">"åº”è¯¥æç¤º Nonce æ— æ•ˆ"</span>);
        }
    });
});

</code></pre>
<h4 data-id="heading-8">ä¸‰ã€ éƒ¨ç½²è„šæœ¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/deploy.js</span>
<span class="hljs-keyword">import</span> { network, artifacts } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¿æ¥ç½‘ç»œ</span>
  <span class="hljs-keyword">const</span> { viem } = <span class="hljs-keyword">await</span> network.<span class="hljs-title function_">connect</span>({ <span class="hljs-attr">network</span>: network.<span class="hljs-property">name</span> });<span class="hljs-comment">//æŒ‡å®šç½‘ç»œè¿›è¡Œé“¾æ¥</span>
  
  <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯</span>
  <span class="hljs-keyword">const</span> [deployer] = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getWalletClients</span>();
  <span class="hljs-keyword">const</span> publicClient = <span class="hljs-keyword">await</span> viem.<span class="hljs-title function_">getPublicClient</span>();
 
  <span class="hljs-keyword">const</span> deployerAddress = deployer.<span class="hljs-property">account</span>.<span class="hljs-property">address</span>;
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"éƒ¨ç½²è€…çš„åœ°å€:"</span>, deployerAddress);
  <span class="hljs-comment">// åŠ è½½åˆçº¦</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenAArtifact</span> = <span class="hljs-keyword">await</span> artifacts.<span class="hljs-title function_">readArtifact</span>(<span class="hljs-string">"BoykaYuriToken"</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenBArtifact</span> = <span class="hljs-keyword">await</span> artifacts.<span class="hljs-title function_">readArtifact</span>(<span class="hljs-string">"BoykaYuriToken"</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">IntentExecutorArtifact</span> = <span class="hljs-keyword">await</span> artifacts.<span class="hljs-title function_">readArtifact</span>(<span class="hljs-string">"IntentExecutor"</span>);
 
  <span class="hljs-comment">// éƒ¨ç½²ï¼ˆæ„é€ å‡½æ•°å‚æ•°ï¼šrecipient, initialOwnerï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenAHash</span> = <span class="hljs-keyword">await</span> deployer.<span class="hljs-title function_">deployContract</span>({
    <span class="hljs-attr">abi</span>: <span class="hljs-title class_">BoykaYuriTokenAArtifact</span>.<span class="hljs-property">abi</span>,<span class="hljs-comment">//è·å–abi</span>
    <span class="hljs-attr">bytecode</span>: <span class="hljs-title class_">BoykaYuriTokenAArtifact</span>.<span class="hljs-property">bytecode</span>,<span class="hljs-comment">//ç¡¬ç¼–ç </span>
    <span class="hljs-attr">args</span>: [deployerAddress,deployerAddress],<span class="hljs-comment">//éƒ¨ç½²è€…åœ°å€ï¼Œåˆå§‹æ‰€æœ‰è€…åœ°å€</span>
  });
   <span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenAReceipt</span> = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: <span class="hljs-title class_">BoykaYuriTokenAHash</span> });
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä»£å¸aåˆçº¦åœ°å€:"</span>, <span class="hljs-title class_">BoykaYuriTokenAReceipt</span>.<span class="hljs-property">contractAddress</span>);
<span class="hljs-comment">//</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenBHash</span> = <span class="hljs-keyword">await</span> deployer.<span class="hljs-title function_">deployContract</span>({
    <span class="hljs-attr">abi</span>: <span class="hljs-title class_">BoykaYuriTokenBArtifact</span>.<span class="hljs-property">abi</span>,<span class="hljs-comment">//è·å–abi</span>
    <span class="hljs-attr">bytecode</span>: <span class="hljs-title class_">BoykaYuriTokenBArtifact</span>.<span class="hljs-property">bytecode</span>,<span class="hljs-comment">//ç¡¬ç¼–ç </span>
    <span class="hljs-attr">args</span>: [deployerAddress,deployerAddress],<span class="hljs-comment">//éƒ¨ç½²è€…åœ°å€ï¼Œåˆå§‹æ‰€æœ‰è€…åœ°å€</span>
  });
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">BoykaYuriTokenBReceipt</span> = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: <span class="hljs-title class_">BoykaYuriTokenBHash</span> });
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä»£å¸båˆçº¦åœ°å€:"</span>, <span class="hljs-title class_">BoykaYuriTokenBReceipt</span>.<span class="hljs-property">contractAddress</span>);
<span class="hljs-comment">//</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">IntentExecutorHash</span> = <span class="hljs-keyword">await</span> deployer.<span class="hljs-title function_">deployContract</span>({
    <span class="hljs-attr">abi</span>: <span class="hljs-title class_">IntentExecutorArtifact</span>.<span class="hljs-property">abi</span>,<span class="hljs-comment">//è·å–abi</span>
    <span class="hljs-attr">bytecode</span>: <span class="hljs-title class_">IntentExecutorArtifact</span>.<span class="hljs-property">bytecode</span>,<span class="hljs-comment">//ç¡¬ç¼–ç </span>
    <span class="hljs-attr">args</span>: [],<span class="hljs-comment">//</span>
  });
  <span class="hljs-comment">// ç­‰å¾…ç¡®è®¤å¹¶æ‰“å°åœ°å€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">IntentExecutorReceipt</span> = <span class="hljs-keyword">await</span> publicClient.<span class="hljs-title function_">waitForTransactionReceipt</span>({ <span class="hljs-attr">hash</span>: <span class="hljs-title class_">IntentExecutorHash</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ„å›¾æ‰§è¡Œå™¨åˆçº¦åœ°å€:"</span>, <span class="hljs-title class_">IntentExecutorReceipt</span>.<span class="hljs-property">contractAddress</span>);
}

<span class="hljs-title function_">main</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€ 2026 DeFi ç©æ³•çš„æ ¸å¿ƒåˆ›æ–°æ€»ç»“</h2>
<ol>
<li><strong>Gas æŠ½è±¡åŒ–</strong>ï¼šç”¨æˆ·åªéœ€â€œç­¾åâ€ï¼Œç”±æ±‚è§£è€…æ”¯ä»˜ Gasã€‚è¿™æ¶ˆé™¤äº†ç”¨æˆ·é’±åŒ…å¿…é¡»æŒæœ‰åŸç”Ÿä»£å¸ï¼ˆå¦‚ ETHï¼‰çš„ç—›ç‚¹ã€‚</li>
<li><strong>MEV ä¿æŠ¤</strong>ï¼šæ„å›¾äº¤æ˜“é€šå¸¸åœ¨é“¾ä¸‹å†…å­˜æ± ï¼ˆMatch-makingï¼‰å®Œæˆæ’®åˆï¼Œå‡å°‘äº†é“¾ä¸Šå…¬å¼€å¥—åˆ©æœºä¼šï¼Œä¿æŠ¤ç”¨æˆ·å…å—å¤¹å‡»æ”»å‡»ã€‚</li>
<li><strong>è·¨é“¾æ— ç¼åŒ–</strong>ï¼šæ±‚è§£è€…å¯ä»¥åœ¨é“¾ A æ¥æ”¶ç”¨æˆ·çš„ä»£å¸ï¼Œå¹¶åœ¨é“¾ B ç›´æ¥å±¥è¡Œç»“æœã€‚ç”¨æˆ·æ— éœ€æ„ŸçŸ¥è·¨é“¾æ¡¥çš„å­˜åœ¨ã€‚</li>
<li><strong>æ™ºèƒ½æµåŠ¨æ€§</strong>ï¼šæ„å›¾ä¸å†å—é™äºå•ä¸€æ± å­ï¼Œæ±‚è§£è€…å¯ä»¥åŠ¨ç”¨ CEX åº“å­˜ã€OTC æ¸ é“æˆ–å…¶ä»–é“¾çš„æµåŠ¨æ€§æ¥æ»¡è¶³ç”¨æˆ·çš„Â <code>minAmountOut</code>ã€‚</li>
</ol>
<h2 data-id="heading-10">å…«ã€ ç»“è¯­</h2>
<p>æ„å›¾é‡‘èæ ‡å¿—ç€ Web3 äº¤äº’ä»â€œç¼–ç¨‹æ¨¡å‹â€å‘â€œç”¨æˆ·å¿ƒç†æ¨¡å‹â€çš„é£è·ƒã€‚åˆ° 2026 å¹´ï¼Œè¿™ç§â€œåªçœ‹ç»“æœï¼Œä¸é—®è¿‡ç¨‹â€çš„æ¨¡å¼å°†ä½¿ DeFi çš„ä½“éªŒçœŸæ­£åª²ç¾ Web2 é“¶è¡Œåº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ CloudFront ç¼“å­˜é…ç½®é”™è¯¯å¯¼è‡´çš„ç”¨æˆ·æ•°æ®æ³„éœ²äº‹æ•…]]></title>    <link>https://juejin.cn/post/7603308967124598784</link>    <guid>https://juejin.cn/post/7603308967124598784</guid>    <pubDate>2026-02-06T03:41:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603308967124598784" data-draft-id="7603288778678534179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ CloudFront ç¼“å­˜é…ç½®é”™è¯¯å¯¼è‡´çš„ç”¨æˆ·æ•°æ®æ³„éœ²äº‹æ•…"/> <meta itemprop="keywords" content="å‰ç«¯,AWS"/> <meta itemprop="datePublished" content="2026-02-06T03:41:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜“ç å½“å…ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146916199"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ CloudFront ç¼“å­˜é…ç½®é”™è¯¯å¯¼è‡´çš„ç”¨æˆ·æ•°æ®æ³„éœ²äº‹æ•…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146916199/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜“ç å½“å…ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:41:45.000Z" title="Fri Feb 06 2026 03:41:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ¬¡ CloudFront ç¼“å­˜é…ç½®é”™è¯¯å¯¼è‡´çš„ç”¨æˆ·æ•°æ®æ³„éœ²äº‹æ•…</h2>
<blockquote>
<p>è®°å½•ä¸€æ¬¡ç”±äº CDN ç¼“å­˜é…ç½®ä¸å½“ï¼Œå¯¼è‡´ä¸åŒç”¨æˆ·çœ‹åˆ°å½¼æ­¤ç§æœ‰æ•°æ®çš„ä¸¥é‡å®‰å…¨é—®é¢˜ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ”¥ äº‹æ•…çš„å¼€ç«¯</h3>
<p>é‚£æ˜¯ä¸€ä¸ªå¹³å¸¸çš„ä¸‹åˆï¼ŒQA åŒå­¦åœ¨æµ‹è¯•ç¯å¢ƒå‘ç°äº†ä¸€ä¸ªè¯¡å¼‚çš„ç°è±¡ï¼š</p>
<p><strong>"ä¸ºä»€ä¹ˆæˆ‘çš„ä¼šè¯åˆ—è¡¨æ˜¾ç¤ºçš„æ˜¯åˆ«äººçš„æ•°æ®ï¼Ÿ"</strong></p>
<p>èµ·åˆæˆ‘ä»¥ä¸ºæ˜¯å‰ç«¯ç¼“å­˜çš„é—®é¢˜ï¼Œè®©ä»–æ¸…é™¤æµè§ˆå™¨ç¼“å­˜è¯•è¯•ã€‚ä½†æ˜¯æ¸…é™¤åé—®é¢˜ä¾æ—§ã€‚æ›´å¥‡æ€ªçš„æ˜¯ï¼Œå½“æˆ‘ç”¨ curl æµ‹è¯•åŒä¸€ä¸ªæ¥å£æ—¶ï¼Œè¿”å›çš„å´æ˜¯æ­£ç¡®çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># curl è¯·æ±‚ - è¿”å›æ­£ç¡®æ•°æ®</span>

curl <span class="hljs-string">'https://example.com/api/user/sessions'</span> \

    -H <span class="hljs-string">'authorization: Bearer TOKEN_A'</span>

<span class="hljs-comment"># è¿”å›ï¼šç”¨æˆ· A çš„æ•°æ®ï¼ˆ15 æ¡ä¼šè¯ï¼‰</span>

</code></pre>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// æµè§ˆå™¨ fetch - è¿”å›é”™è¯¯æ•°æ®</span>

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://example.com/api/user/sessions'</span>, {

    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'authorization'</span>: <span class="hljs-string">'Bearer TOKEN_A'</span> }

})

  


<span class="hljs-comment">// è¿”å›ï¼šç”¨æˆ· B çš„æ•°æ®ï¼ˆ23 æ¡ä¼šè¯ï¼‰âŒ</span>

</code></pre>
<p>è¿™ä¸‹æˆ‘æ„è¯†åˆ°ï¼Œé—®é¢˜å¯èƒ½æ²¡é‚£ä¹ˆç®€å•ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ•µï¸ å¼€å§‹æ’æŸ¥</h3>
<h4 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥å“åº”å¤´</h4>
<p>æˆ‘é¦–å…ˆæŸ¥çœ‹äº†æµè§ˆå™¨è¯·æ±‚çš„å“åº”å¤´ï¼š</p>
<pre><code class="hljs language-http" lang="http">
HTTP/2 200

cache-control: (null) âš ï¸

x-cache: Hit from cloudfront âš ï¸

age: 1545 âš ï¸

via: 1.1 xxx.cloudfront.net (CloudFront)

</code></pre>
<p>çœ‹åˆ°è¿™ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼Œæˆ‘å¿ƒé‡Œä¸€å‡‰ï¼š</p>
<ol>
<li>
<p><strong>cache-control ä¸ºç©º</strong> - åç«¯æ²¡æœ‰è®¾ç½®ç¼“å­˜æ§åˆ¶ç­–ç•¥</p>
</li>
<li>
<p><strong>x-cache: Hit from cloudfront</strong> - è¯·æ±‚å‘½ä¸­äº† CloudFront ç¼“å­˜</p>
</li>
<li>
<p><strong>age: 1545</strong> - è¿™ä¸ªç¼“å­˜å·²ç»å­˜åœ¨äº† 1545 ç§’ï¼ˆçº¦ 26 åˆ†é’Ÿï¼‰</p>
</li>
</ol>
<p>é—®é¢˜æ‰¾åˆ°äº†ï¼š<strong>CloudFront æŠŠç”¨æˆ·çš„ç§æœ‰æ•°æ®ç¼“å­˜äº†ï¼</strong></p>
<h4 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šéªŒè¯å‡è®¾</h4>
<p>æˆ‘ç”¨ä¸åŒçš„æ–¹å¼æµ‹è¯•äº†å‡ æ¬¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// æµ‹è¯• 1: ä¸å¸¦ Cookieï¼Œåªå¸¦ Authorization</span>

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/sessions'</span>, {

    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'authorization'</span>: <span class="hljs-string">'Bearer TOKEN_A'</span> },

    <span class="hljs-attr">credentials</span>: <span class="hljs-string">'omit'</span>

})

<span class="hljs-comment">// ç»“æœï¼šè¿”å›ç”¨æˆ· B çš„æ•°æ®ï¼ˆç¼“å­˜ï¼‰</span>


<span class="hljs-comment">// æµ‹è¯• 2: å¸¦ä¸Š Cookie</span>

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/sessions'</span>, {

    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'authorization'</span>: <span class="hljs-string">'Bearer TOKEN_A'</span> },

    <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>

})

<span class="hljs-comment">// ç»“æœï¼šè¿˜æ˜¯ç”¨æˆ· B çš„æ•°æ®ï¼ˆç¼“å­˜ï¼‰</span>


<span class="hljs-comment">// æµ‹è¯• 3: æ·»åŠ éšæœºå‚æ•°ç»•è¿‡ç¼“å­˜</span>

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/user/sessions?_t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>, {

    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'authorization'</span>: <span class="hljs-string">'Bearer TOKEN_A'</span> }

})

<span class="hljs-comment">// ç»“æœï¼šè¿”å›æ­£ç¡®çš„ç”¨æˆ· A æ•°æ® âœ“</span>

</code></pre>
<p>ç¬¬ä¸‰ä¸ªæµ‹è¯•è¯å®äº†æˆ‘çš„çŒœæµ‹ï¼šCloudFront ç¼“å­˜é”®ä¸­æ²¡æœ‰åŒ…å« Authorization headerï¼</p>
<hr/>
<h3 data-id="heading-5">ğŸ’¡ é—®é¢˜æ ¹æºåˆ†æ</h3>
<h4 data-id="heading-6">æˆ‘ä»¬çš„ç³»ç»Ÿæ¶æ„</h4>
<pre><code class="hljs language-javascript" lang="javascript">
ç”¨æˆ·æµè§ˆå™¨

â†“ è¯·æ±‚: <span class="hljs-regexp">/api/u</span>ser/sessions

â†“ <span class="hljs-title class_">Header</span>: <span class="hljs-title class_">Authorization</span>: <span class="hljs-title class_">Bearer</span> &lt;token&gt;

<span class="hljs-title class_">CloudFront</span> <span class="hljs-variable constant_">CDN</span> (å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹)

â†“ ç¼“å­˜é”® = åŸŸå + <span class="hljs-variable constant_">URL</span> è·¯å¾„

â†“ âš ï¸ ä¸åŒ…å« <span class="hljs-title class_">Authorization</span> header!

å‰ç«¯æœåŠ¡å™¨

â†“ <span class="hljs-title class_">Rewrite</span>: <span class="hljs-regexp">/api/</span>* â†’ backend-api.<span class="hljs-property">com</span><span class="hljs-comment">/*

åç«¯ API æœåŠ¡å™¨

â†“ æ ¹æ® Authorization è¯†åˆ«ç”¨æˆ·

â†“ è¿”å›å¯¹åº”ç”¨æˆ·çš„æ•°æ®

</span></code></pre>
<h4 data-id="heading-7">CloudFront é»˜è®¤ç¼“å­˜è¡Œä¸º</h4>
<p>CloudFront é»˜è®¤çš„ç¼“å­˜é”®ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
<pre><code class="hljs">
ç¼“å­˜é”® = åŸŸå + URL è·¯å¾„ + æŸ¥è¯¢å‚æ•°

</code></pre>
<p><strong>ä¸åŒ…å«ï¼š</strong></p>
<ul>
<li>
<p>âŒ è¯·æ±‚å¤´ï¼ˆåŒ…æ‹¬ Authorizationï¼‰</p>
</li>
<li>
<p>âŒ Cookieï¼ˆé™¤éæ˜¾å¼é…ç½®ï¼‰</p>
</li>
<li>
<p>âŒ è¯·æ±‚ä½“</p>
</li>
</ul>
<h4 data-id="heading-8">é—®é¢˜æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Ÿ</h4>
<p>è®©æˆ‘ç”¨æ—¶é—´çº¿æ¥è¿˜åŸæ•´ä¸ªè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">
<span class="hljs-section">10:00 - ç”¨æˆ· A ç™»å½•ï¼Œtoken_A</span>

<span class="hljs-section">10:01 - ç”¨æˆ· A è¯·æ±‚ /api/user/sessions</span>

        â†’ CloudFront: ç¼“å­˜ Miss

        â†’ è½¬å‘åˆ°åç«¯ï¼Œå¸¦ä¸Š Authorization: Bearer token_A

        â†’ åç«¯è¯†åˆ«ç”¨æˆ· Aï¼Œè¿”å›ç”¨æˆ· A çš„æ•°æ®

        â†’ CloudFront ç¼“å­˜è¿™ä¸ªå“åº”ï¼ˆç¼“å­˜é”® = /api/user/sessionsï¼‰

  


<span class="hljs-section">10:15 - ç”¨æˆ· B ç™»å½•ï¼Œtoken_B</span>

<span class="hljs-section">10:16 - ç”¨æˆ· B è¯·æ±‚ /api/user/sessions</span>

        â†’ CloudFront: ç¼“å­˜ Hit! (å› ä¸º URL ç›¸åŒ)

        â†’ ç›´æ¥è¿”å›ç¼“å­˜ï¼ˆç”¨æˆ· A çš„æ•°æ®ï¼‰âŒ

        â†’ è¯·æ±‚æ ¹æœ¬æ²¡æœ‰åˆ°è¾¾åç«¯

        â†’ åç«¯æ— æ³•è¯†åˆ« token_B

</code></pre>
<p><strong>è¿™å°±æ˜¯é—®é¢˜çš„æœ¬è´¨ï¼šä¸åŒç”¨æˆ·è¯·æ±‚åŒä¸€ä¸ª URLï¼ŒCloudFront è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªè¯·æ±‚ï¼Œç›´æ¥è¿”å›äº†ç¼“å­˜çš„å†…å®¹ã€‚</strong></p>
<hr/>
<h3 data-id="heading-9">ğŸ¤” ä¸ºä»€ä¹ˆ curl è¿”å›æ­£ç¡®æ•°æ®ï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ã€‚å¯èƒ½çš„åŸå› ï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚å¤´å·®å¼‚</strong>ï¼šcurl å’Œæµè§ˆå™¨çš„è¯·æ±‚å¤´ä¸åŒï¼Œå¯èƒ½å½¢æˆäº†ä¸åŒçš„ç¼“å­˜é”®</p>
</li>
<li>
<p><strong>æ—¶æœºé—®é¢˜</strong>ï¼šcurl æµ‹è¯•æ—¶ç¼“å­˜å¯èƒ½å·²ç»è¿‡æœŸ</p>
</li>
<li>
<p><strong>Vary å“åº”å¤´</strong>ï¼šå¦‚æœåç«¯è®¾ç½®äº†æŸäº› Vary å¤´ï¼Œcurl å¯èƒ½å‘½ä¸­äº†ä¸åŒçš„ç¼“å­˜</p>
</li>
</ol>
<p>ä½†æ— è®ºå¦‚ä½•ï¼Œ<strong>è¿™éƒ½è¯´æ˜äº†ç¼“å­˜ç­–ç•¥çš„ä¸ç¡®å®šæ€§å’Œå±é™©æ€§</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸ”§ è§£å†³æ–¹æ¡ˆæ¢ç´¢</h3>
<h4 data-id="heading-11">æ–¹æ¡ˆå¯¹æ¯”</h4>
<p>æˆ‘è€ƒè™‘äº†ä¸‰ä¸ªæ–¹æ¡ˆï¼š</p>
<h5 data-id="heading-12">æ–¹æ¡ˆ 1ï¼šä¿®æ”¹ CloudFront Cache Policyï¼Œå°† Authorization åŠ å…¥ç¼“å­˜é”®</h5>
<p><strong>æƒ³æ³•</strong>ï¼šè®©æ¯ä¸ª token æœ‰ç‹¬ç«‹çš„ç¼“å­˜ã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">
ç”¨æˆ· <span class="hljs-selector-tag">A</span> (token_A) â†’ ç¼“å­˜ <span class="hljs-selector-tag">A</span>

ç”¨æˆ· <span class="hljs-selector-tag">B</span> (token_B) â†’ ç¼“å­˜ <span class="hljs-selector-tag">B</span>

...

</code></pre>
<ul>
<li>
<p>âŒ ç”¨æˆ·æ•°æ®ä»ç„¶ä¼šè¢«ç¼“å­˜åœ¨ CDN è¾¹ç¼˜èŠ‚ç‚¹ï¼ˆå®‰å…¨é£é™©ï¼‰</p>
</li>
<li>
<p>âŒ ç¼“å­˜æ•°é‡çˆ†ç‚¸ï¼ˆæ¯ä¸ªç”¨æˆ·ä¸€ä»½ç¼“å­˜ï¼‰</p>
</li>
<li>
<p>âŒ å¦‚æœ token åˆ·æ–°ï¼Œç¼“å­˜ä¼šå¤±æ•ˆï¼Œæµªè´¹èµ„æº</p>
</li>
<li>
<p>âŒ éœ€è¦ä¿®æ”¹ CloudFront é…ç½®ï¼ˆç”±äºæˆ‘ä»¬æœ‰å‰ç«¯ rewriteï¼Œå¾ˆå®¹æ˜“é…é”™å¯¼è‡´ 502ï¼‰</p>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šä¸æ¨è</p>
<h5 data-id="heading-13">æ–¹æ¡ˆ 2ï¼šåœ¨ CloudFront ç¦ç”¨ /api/* è·¯å¾„çš„ç¼“å­˜</h5>
<p><strong>æƒ³æ³•</strong>ï¼šç›´æ¥ç¦ç”¨ API è·¯å¾„çš„ç¼“å­˜ã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>
<p>âš ï¸ ç”±äºæˆ‘ä»¬çš„æ¶æ„ï¼ˆå‰ç«¯æœåŠ¡å™¨åšäº† rewriteï¼‰ï¼Œé…ç½® <code>/api/*</code> çš„ Cache Behavior ä¼šç»•è¿‡å‰ç«¯æœåŠ¡å™¨ï¼Œç›´æ¥è½¬å‘åˆ°åç«¯</p>
</li>
<li>
<p>ğŸ’¥ åç«¯æ²¡æœ‰ <code>/api/*</code> è¿™ä¸ªè·¯å¾„ï¼Œå¯¼è‡´ 502 é”™è¯¯ï¼ˆæˆ‘ä»¬å®é™…é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼‰</p>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šä¸é€‚ç”¨äºæˆ‘ä»¬çš„æ¶æ„</p>
<h5 data-id="heading-14">æ–¹æ¡ˆ 3ï¼šåœ¨åç«¯è®¾ç½® Cache-Control å“åº”å¤´ â­</h5>
<p><strong>æƒ³æ³•</strong>ï¼šè®©åç«¯æ˜ç¡®å‘Šè¯‰ CloudFrontï¼š"è¿™ä¸ªå“åº”ä¸è¦ç¼“å­˜ï¼"</p>
<pre><code class="hljs language-http" lang="http">
Cache-Control: private, no-cache, no-store, must-revalidate

Pragma: no-cache

Expires: 0

</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>âœ… æœ€æ ¹æœ¬çš„è§£å†³æ–¹æ¡ˆ</p>
</li>
<li>
<p>âœ… ä¸éœ€è¦ä¿®æ”¹ CloudFront é…ç½®</p>
</li>
<li>
<p>âœ… å¯¹æ‰€æœ‰ä¸­é—´å±‚ï¼ˆCDNã€ä»£ç†ã€æµè§ˆå™¨ï¼‰éƒ½ç”Ÿæ•ˆ</p>
</li>
<li>
<p>âœ… ç¬¦åˆ HTTP æ ‡å‡†å’Œæœ€ä½³å®è·µ</p>
</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šé‡‡ç”¨ï¼</p>
<hr/>
<h3 data-id="heading-15">ğŸ› ï¸ å…·ä½“å®ç°</h3>
<h4 data-id="heading-16">1. åç«¯æ·»åŠ ä¸­é—´ä»¶</h4>
<p>æˆ‘ä»¬ä½¿ç”¨ Go + Gin æ¡†æ¶ï¼Œå®ç°å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// middleware/nocache.go</span>

<span class="hljs-keyword">package</span> middleware

<span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/gin-gonic/gin"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NoCacheMiddleware</span><span class="hljs-params">()</span></span> gin.HandlerFunc {

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> {

        c.Header(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"private, no-cache, no-store, must-revalidate"</span>)

        c.Header(<span class="hljs-string">"Pragma"</span>, <span class="hljs-string">"no-cache"</span>)

        c.Header(<span class="hljs-string">"Expires"</span>, <span class="hljs-string">"0"</span>)

        c.Next()

    }

}

</code></pre>
<p>åœ¨è·¯ç”±ä¸­åº”ç”¨ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// router/router.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">SetupRouter</span><span class="hljs-params">()</span></span> *gin.Engine {

    r := gin.Default()

    <span class="hljs-comment">// å¯¹æ‰€æœ‰éœ€è¦èº«ä»½éªŒè¯çš„è·¯ç”±åº”ç”¨</span>

    authRoutes := r.Group(<span class="hljs-string">"/"</span>)

    authRoutes.Use(middleware.AuthMiddleware())

    authRoutes.Use(middleware.NoCacheMiddleware()) <span class="hljs-comment">// å…³é”®ï¼</span>

    {

        authRoutes.GET(<span class="hljs-string">"/user/sessions"</span>, handlers.GetUserSessions)

        authRoutes.GET(<span class="hljs-string">"/user/quota"</span>, handlers.GetUserQuota)

        authRoutes.GET(<span class="hljs-string">"/user/profile"</span>, handlers.GetUserProfile)

    }

    <span class="hljs-keyword">return</span> r

}

</code></pre>
<h4 data-id="heading-17">2. æ¸…é™¤ CloudFront ç°æœ‰ç¼“å­˜</h4>
<p>ä»£ç éƒ¨ç½²åï¼Œè¿˜éœ€è¦æ¸…é™¤å·²ç»å­˜åœ¨çš„ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># AWS CLI æ–¹å¼</span>

aws cloudfront create-invalidation \

    --distribution-id E1234567890ABC \

    --paths <span class="hljs-string">"/*"</span>


<span class="hljs-comment"># æˆ–è€…åœ¨ AWS Console ä¸­æ“ä½œï¼š</span>

<span class="hljs-comment"># CloudFront â†’ Distributions â†’ Invalidations â†’ Create</span>

<span class="hljs-comment"># Path: /*</span>

</code></pre>
<h4 data-id="heading-18">3. éªŒè¯ä¿®å¤</h4>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ç­‰å¾… 5-10 åˆ†é’Ÿåæµ‹è¯•</span>

curl -I <span class="hljs-string">'https://example.com/api/user/sessions'</span> \

    -H <span class="hljs-string">'authorization: Bearer YOUR_TOKEN'</span>

</code></pre>
<p>æœŸæœ›çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-http" lang="http">
HTTP/2 200

cache-control: private, no-cache, no-store, must-revalidate âœ“

pragma: no-cache âœ“

expires: 0 âœ“

x-cache: Miss from cloudfront âœ“

age: (ä¸å­˜åœ¨) âœ“

</code></pre>
<p>å¤šæ¬¡è¯·æ±‚åº”è¯¥éƒ½æ˜¯ <code>Miss from cloudfront</code>ï¼Œè€Œä¸æ˜¯ <code>Hit</code>ã€‚</p>
<hr/>
<h3 data-id="heading-19">ğŸ“š æ·±å…¥ç†è§£ Cache-Control</h3>
<p>è¿™æ¬¡äº‹æ•…è®©æˆ‘é‡æ–°å®¡è§†äº† HTTP ç¼“å­˜æœºåˆ¶ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™äº›å“åº”å¤´ï¼š</p>
<h4 data-id="heading-20">Cache-Control æŒ‡ä»¤è¯¦è§£</h4>
<pre><code class="hljs language-http" lang="http">
Cache-Control: private, no-cache, no-store, must-revalidate

</code></pre>
<ul>
<li>
<p><strong><code>private</code></strong>ï¼šå“åº”åªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œä¸èƒ½è¢« CDN ç­‰å…±äº«ç¼“å­˜å­˜å‚¨</p>
</li>
<li>
<p>å³ä½¿åç»­æœ‰äººè®¾ç½®äº†ä»£ç†ç¼“å­˜ï¼Œä¹Ÿä¸ä¼šç¼“å­˜è¿™ä¸ªå“åº”</p>
</li>
<li>
<p><strong><code>no-cache</code></strong>ï¼šå¯ä»¥ç¼“å­˜ï¼Œä½†ä½¿ç”¨å‰å¿…é¡»å‘æœåŠ¡å™¨éªŒè¯</p>
</li>
<li>
<p>çœ‹èµ·æ¥çŸ›ç›¾ï¼Ÿå…¶å®æ˜¯"not without revalidation"çš„æ„æ€</p>
</li>
<li>
<p>ä¸»è¦ç”¨äºéœ€è¦å®æ—¶éªŒè¯ä½†å…è®¸å­˜å‚¨çš„åœºæ™¯</p>
</li>
<li>
<p><strong><code>no-store</code></strong>ï¼šå®Œå…¨ä¸ç¼“å­˜ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å­˜å‚¨</p>
</li>
<li>
<p>æœ€ä¸¥æ ¼çš„ç¦æ­¢ç¼“å­˜æŒ‡ä»¤</p>
</li>
<li>
<p>ç”¨äºé«˜åº¦æ•æ„Ÿçš„æ•°æ®</p>
</li>
<li>
<p><strong><code>must-revalidate</code></strong>ï¼šç¼“å­˜è¿‡æœŸåå¿…é¡»å‘æœåŠ¡å™¨éªŒè¯ï¼Œä¸èƒ½ä½¿ç”¨è¿‡æœŸå†…å®¹</p>
</li>
<li>
<p>é˜²æ­¢åœ¨ç½‘ç»œæ•…éšœæ—¶ä½¿ç”¨è¿‡æœŸç¼“å­˜</p>
</li>
</ul>
<h4 data-id="heading-21">Pragma å’Œ Expires</h4>
<pre><code class="hljs language-http" lang="http">
Pragma: no-cache

Expires: 0

</code></pre>
<p>è¿™ä¸¤ä¸ªæ˜¯ä¸ºäº†å…¼å®¹ HTTP/1.0 çš„è€æ—§å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ã€‚è™½ç„¶ç°åœ¨å¤§å¤šæ•°ç³»ç»Ÿéƒ½æ”¯æŒ HTTP/1.1ï¼Œä½†åŠ ä¸Šå®ƒä»¬æ²¡æœ‰åå¤„ã€‚</p>
<h4 data-id="heading-22">ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šæŒ‡ä»¤ï¼Ÿ</h4>
<p>å› ä¸ºç¼“å­˜å±‚çº§å¾ˆå¤šï¼š</p>
<pre><code class="hljs">
æµè§ˆå™¨ç¼“å­˜

â†“

æ­£å‘ä»£ç†ï¼ˆå…¬å¸ä»£ç†ï¼‰

â†“

CDN è¾¹ç¼˜èŠ‚ç‚¹

â†“

CDN ä¸­å¿ƒèŠ‚ç‚¹

â†“

åå‘ä»£ç†ï¼ˆNginxï¼‰

â†“

åç«¯æœåŠ¡å™¨

</code></pre>
<p>æ¯ä¸€å±‚éƒ½å¯èƒ½ç¼“å­˜ï¼Œæ‰€ä»¥éœ€è¦æ˜ç¡®å‘Šè¯‰å®ƒä»¬ï¼š"è¿™ä¸ªå“åº”ä¸è¦ç¼“å­˜ï¼"</p>
<hr/>
<h3 data-id="heading-23">ğŸ¯ ç»éªŒæ•™è®­</h3>
<h4 data-id="heading-24">1. ç”¨æˆ·æ•°æ®æ°¸è¿œä¸è¦è¢« CDN ç¼“å­˜</h4>
<p><strong>åŸåˆ™ï¼šéœ€è¦èº«ä»½éªŒè¯çš„æ¥å£ = ç§æœ‰æ•°æ® = ç¦æ­¢ç¼“å­˜</strong></p>
<p>å³ä½¿ä½ è®¤ä¸º"ç¼“å­˜å¯ä»¥æé«˜æ€§èƒ½"ï¼Œä¹Ÿä¸è¦è¿™æ ·åšã€‚å› ä¸ºï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·æ•°æ®éšæ—¶å¯èƒ½å˜åŒ–</p>
</li>
<li>
<p>Token å¯èƒ½è¢«åˆ·æ–°æˆ–æ’¤é”€</p>
</li>
<li>
<p>å­˜åœ¨æ•°æ®æ³„éœ²é£é™©</p>
</li>
<li>
<p>å¯èƒ½è¿åæ•°æ®ä¿æŠ¤æ³•è§„ï¼ˆGDPRã€CCPAï¼‰</p>
</li>
</ul>
<h4 data-id="heading-25">2. æ˜ç¡®åŒºåˆ†å¯ç¼“å­˜å’Œä¸å¯ç¼“å­˜çš„å†…å®¹</h4>
<p>åœ¨è®¾è®¡ API æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
âœ“ å¯ä»¥ç¼“å­˜ï¼š

    /public/articles - å…¬å¼€æ–‡ç« åˆ—è¡¨

    /static/logo.png - é™æ€èµ„æº

    /api/public/config - å…¬å¼€é…ç½®

  


âœ— ç¦æ­¢ç¼“å­˜ï¼š

    /api/user/* - ç”¨æˆ·æ•°æ®

    /api/auth/* - è®¤è¯ç›¸å…³

    /api/admin/* - ç®¡ç†æ¥å£

</code></pre>
<h4 data-id="heading-26">3. ä¸è¦ä¾èµ– CDN çš„é»˜è®¤è¡Œä¸º</h4>
<p>CloudFront çš„é»˜è®¤ç¼“å­˜ç­–ç•¥æ˜¯ï¼š</p>
<ul>
<li>
<p>å¯¹ GET/HEAD è¯·æ±‚ç¼“å­˜æˆåŠŸçš„å“åº”ï¼ˆ200ã€301ã€404 ç­‰ï¼‰</p>
</li>
<li>
<p>ç¼“å­˜é”®åªåŒ…å« URL å’ŒæŸ¥è¯¢å‚æ•°</p>
</li>
</ul>
<p><strong>è¿™å¯¹é™æ€èµ„æºå¾ˆå¥½ï¼Œä½†å¯¹ API å¯èƒ½æ˜¯ç¾éš¾ã€‚</strong></p>
<h4 data-id="heading-27">4. åç«¯è¦å¯¹å“åº”è´Ÿè´£</h4>
<p>ä¸è¦æœŸæœ›è¿ç»´æˆ–å‰ç«¯æ¥é…ç½®æ­£ç¡®çš„ç¼“å­˜ç­–ç•¥ã€‚åç«¯åº”è¯¥æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯å’Œä¸­é—´å±‚å¦‚ä½•å¤„ç†å“åº”ï¼š</p>
<pre><code class="hljs language-go" lang="go">
<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šåˆ›å»ºç»Ÿä¸€çš„å“åº”å‡½æ•°</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RespondJSON</span><span class="hljs-params">(c *gin.Context, code <span class="hljs-type">int</span>, data <span class="hljs-keyword">interface</span>{})</span></span> {

    <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ å®‰å…¨çš„å“åº”å¤´</span>

    c.Header(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"private, no-cache, no-store, must-revalidate"</span>)

    c.Header(<span class="hljs-string">"Pragma"</span>, <span class="hljs-string">"no-cache"</span>)

    c.Header(<span class="hljs-string">"Expires"</span>, <span class="hljs-string">"0"</span>)

    c.JSON(code, data)

}

</code></pre>
<h4 data-id="heading-28">5. æµ‹è¯•è¦è¦†ç›–ç¼“å­˜åœºæ™¯</h4>
<p>åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­åº”è¯¥åŒ…å«ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// test/api-cache.test.js</span>

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'API Caching'</span>, <span class="hljs-function">() =&gt;</span> {

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should not cache user data'</span>, <span class="hljs-keyword">async</span> () =&gt; {

        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è¯·æ±‚</span>

        <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/sessions'</span>, {

            <span class="hljs-attr">headers</span>: { <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${token1}</span>`</span> }

        });

        <span class="hljs-keyword">const</span> data1 = <span class="hljs-keyword">await</span> res1.<span class="hljs-title function_">json</span>();

        <span class="hljs-comment">// ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆä¸åŒç”¨æˆ·ï¼‰</span>

        <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/sessions'</span>, {

            <span class="hljs-attr">headers</span>: { <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${token2}</span>`</span> }

        });

        <span class="hljs-keyword">const</span> data2 = <span class="hljs-keyword">await</span> res2.<span class="hljs-title function_">json</span>();

        <span class="hljs-comment">// éªŒè¯è¿”å›çš„æ˜¯ä¸åŒç”¨æˆ·çš„æ•°æ®</span>

        <span class="hljs-title function_">expect</span>(data1.<span class="hljs-property">userId</span>).<span class="hljs-property">not</span>.<span class="hljs-title function_">toBe</span>(data2.<span class="hljs-property">userId</span>);

        <span class="hljs-comment">// éªŒè¯å“åº”å¤´</span>

        <span class="hljs-title function_">expect</span>(res1.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'cache-control'</span>)).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'no-cache'</span>);

        <span class="hljs-title function_">expect</span>(res2.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'cache-control'</span>)).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'no-cache'</span>);

    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">'should not be cached by CDN'</span>, <span class="hljs-keyword">async</span> () =&gt; {

        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user/sessions'</span>, {

        <span class="hljs-attr">headers</span>: { <span class="hljs-attr">authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span> }

        });

        <span class="hljs-comment">// éªŒè¯æ²¡æœ‰å‘½ä¸­ CDN ç¼“å­˜</span>

        <span class="hljs-title function_">expect</span>(res.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'x-cache'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'Miss from cloudfront'</span>);

        <span class="hljs-title function_">expect</span>(res.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'age'</span>)).<span class="hljs-title function_">toBeNull</span>();

    });

});

</code></pre>
<hr/>
<h3 data-id="heading-29">ğŸ” æ’æŸ¥æŠ€å·§åˆ†äº«</h3>
<h4 data-id="heading-30">å¦‚ä½•å¿«é€Ÿåˆ¤æ–­æ˜¯å¦æ˜¯ç¼“å­˜é—®é¢˜ï¼Ÿ</h4>
<p><strong>1. æŸ¥çœ‹å“åº”å¤´</strong></p>
<pre><code class="hljs language-bash" lang="bash">
curl -I <span class="hljs-string">'https://example.com/api/user/sessions'</span> \

    -H <span class="hljs-string">'authorization: Bearer TOKEN'</span>

</code></pre>
<p>å…³é”®å­—æ®µï¼š</p>
<ul>
<li>
<p><code>x-cache: Hit</code> - å‘½ä¸­ç¼“å­˜</p>
</li>
<li>
<p><code>age: æ•°å­—</code> - ç¼“å­˜å­˜åœ¨çš„æ—¶é—´</p>
</li>
<li>
<p><code>cache-control: null</code> - æ²¡æœ‰ç¼“å­˜ç­–ç•¥ï¼ˆå±é™©ï¼ï¼‰</p>
</li>
</ul>
<p><strong>2. æ·»åŠ éšæœºå‚æ•°æµ‹è¯•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// å¦‚æœè¿™ä¸ªè¿”å›æ­£ç¡®æ•°æ®ï¼Œè¯´æ˜æ˜¯ç¼“å­˜é—®é¢˜</span>

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/user/sessions?_t=<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>)

</code></pre>
<p><strong>3. ä½¿ç”¨ä¸åŒçš„å®¢æˆ·ç«¯æµ‹è¯•</strong></p>
<ul>
<li>
<p>æµè§ˆå™¨ â†’ å¯èƒ½å‘½ä¸­ç¼“å­˜</p>
</li>
<li>
<p>curl â†’ å¯èƒ½ç»•è¿‡ç¼“å­˜</p>
</li>
<li>
<p>Postman â†’ å¯èƒ½æœ‰ç‹¬ç«‹çš„ç¼“å­˜</p>
</li>
</ul>
<p>å¦‚æœä¸åŒå®¢æˆ·ç«¯è¿”å›ä¸åŒçš„æ•°æ®ï¼Œå¾ˆå¯èƒ½æ˜¯ç¼“å­˜é—®é¢˜ã€‚</p>
<h4 data-id="heading-31">ä½¿ç”¨ Chrome DevTools æ£€æŸ¥</h4>
<ol>
<li>
<p>æ‰“å¼€ Network æ ‡ç­¾</p>
</li>
<li>
<p>åˆ·æ–°é¡µé¢</p>
</li>
<li>
<p>ç‚¹å‡»å¯¹åº”çš„è¯·æ±‚</p>
</li>
<li>
<p>æŸ¥çœ‹ Response Headers</p>
</li>
</ol>
<p>é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li>
<p><code>CF-Cache-Status: HIT</code> (Cloudflare)</p>
</li>
<li>
<p><code>X-Cache: Hit from cloudfront</code> (CloudFront)</p>
</li>
<li>
<p><code>X-Cache-Lookup: HIT from xxx</code> (å…¶ä»– CDN)</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-32">ğŸ›¡ï¸ é¢„é˜²æªæ–½</h3>
<h4 data-id="heading-33">1. å»ºç«‹ç›‘æ§å‘Šè­¦</h4>
<p><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// CloudWatch Logs Insights æŸ¥è¯¢</span>

fields @timestamp, request_path, cache_status

| filter cache_status = <span class="hljs-string">"Hit"</span>

and request_path like /^\/api\<span class="hljs-comment">//</span>

and request_path not like /^\/api\/public\<span class="hljs-comment">//</span>

| stats <span class="hljs-title function_">count</span>() by request_path

</code></pre>
<p><strong>å‘Šè­¦è§„åˆ™</strong>ï¼š</p>
<ul>
<li>
<p>å¦‚æœç§æœ‰ API å‡ºç°ç¼“å­˜å‘½ä¸­ â†’ ç«‹å³å‘Šè­¦</p>
</li>
<li>
<p>å¦‚æœ API å“åº”ç¼ºå°‘ <code>Cache-Control</code> å¤´ â†’ å‘Šè­¦</p>
</li>
</ul>
<h4 data-id="heading-34">2. ä»£ç å®¡æŸ¥æ£€æŸ¥é¡¹</h4>
<p>åœ¨ Code Review æ—¶ï¼Œæ£€æŸ¥ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item">
<p><input type="checkbox" disabled="disabled"/> æ–°çš„ API endpoint æ˜¯å¦æ·»åŠ äº† no-cache å“åº”å¤´ï¼Ÿ</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº†ç»Ÿä¸€çš„å“åº”å‡½æ•°ï¼Ÿ</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="disabled"/> æ˜¯å¦æœ‰æµ‹è¯•è¦†ç›–ç¼“å­˜åœºæ™¯ï¼Ÿ</p>
</li>
</ul>
<h4 data-id="heading-35">3. æ¶æ„å±‚é¢çš„é˜²æŠ¤</h4>
<p><strong>å‰ç«¯æœåŠ¡å™¨æ·»åŠ å®‰å…¨å“åº”å¤´</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// next.config.js</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {

    <span class="hljs-keyword">async</span> <span class="hljs-title function_">headers</span>(<span class="hljs-params"/>) {

        <span class="hljs-keyword">return</span> [

            {

                <span class="hljs-attr">source</span>: <span class="hljs-string">'/api/:path*'</span>,

                <span class="hljs-attr">headers</span>: [

                    {

                        <span class="hljs-attr">key</span>: <span class="hljs-string">'Cache-Control'</span>,

                        <span class="hljs-attr">value</span>: <span class="hljs-string">'private, no-cache, no-store, must-revalidate'</span>,

                    },

                ],

            },

        ];

    },

};

</code></pre>
<p>è¿™æ ·å³ä½¿åç«¯å¿˜è®°è®¾ç½®ï¼Œå‰ç«¯ä¹Ÿä¼šæ·»åŠ å®‰å…¨çš„å“åº”å¤´ï¼ˆåŒé‡ä¿é™©ï¼‰ã€‚</p>
<h4 data-id="heading-36">4. å®šæœŸå®‰å…¨å®¡è®¡</h4>
<p>æ¯ä¸ªå­£åº¦æ£€æŸ¥ï¼š</p>
<ul>
<li>
<p>å“ªäº› API å¯ä»¥è¢«ç¼“å­˜ï¼Ÿ</p>
</li>
<li>
<p>ç¼“å­˜çš„å†…å®¹æ˜¯å¦åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Ÿ</p>
</li>
<li>
<p>CDN é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ</p>
</li>
<li>
<p>æ˜¯å¦æœ‰æ–°çš„ API æ²¡æœ‰è®¾ç½®ç¼“å­˜ç­–ç•¥ï¼Ÿ</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-37">ğŸ“Š å½±å“åˆ†æ</h3>
<p>è¿™æ¬¡äº‹æ•…çš„å½±å“èŒƒå›´ï¼š</p>
<h4 data-id="heading-38">å—å½±å“çš„æ¥å£</h4>
<p>æˆ‘ä»¬æ’æŸ¥äº†æ‰€æœ‰ APIï¼Œå‘ç°ä»¥ä¸‹æ¥å£éƒ½æœ‰åŒæ ·çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
âœ“ å·²ä¿®å¤ï¼š

/api/user/sessions - ç”¨æˆ·ä¼šè¯åˆ—è¡¨

/api/user/quota - ç”¨æˆ·é…é¢

/api/user/profile - ç”¨æˆ·èµ„æ–™

/api/user/settings - ç”¨æˆ·è®¾ç½®

</code></pre>
<h4 data-id="heading-39">æ½œåœ¨çš„æ•°æ®æ³„éœ²</h4>
<ul>
<li>
<p><strong>æ—¶é—´çª—å£</strong>ï¼šä»éƒ¨ç½²åˆ°å‘ç°ï¼Œçº¦ 2 å‘¨</p>
</li>
<li>
<p><strong>å—å½±å“ç”¨æˆ·</strong>ï¼šæ‰€æœ‰æ´»è·ƒç”¨æˆ·</p>
</li>
<li>
<p><strong>æ³„éœ²æ•°æ®ç±»å‹</strong>ï¼šä¼šè¯ä¿¡æ¯ã€é…é¢ä½¿ç”¨æƒ…å†µã€ç”¨æˆ·è®¾ç½®</p>
</li>
<li>
<p><strong>ä¸¥é‡ç¨‹åº¦</strong>ï¼šé«˜ï¼ˆè™½ç„¶æ²¡æœ‰å¯†ç ç­‰æ ¸å¿ƒæ•°æ®ï¼Œä½†ä»ç„¶æ˜¯éšç§ä¿¡æ¯ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-40">åˆè§„æ€§é—®é¢˜</h4>
<p>æ ¹æ® GDPR å’Œ CCPAï¼š</p>
<ul>
<li>
<p>ç”¨æˆ·æ•°æ®è¢«ç¼“å­˜åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼ˆCloudFront è¾¹ç¼˜èŠ‚ç‚¹ï¼‰</p>
</li>
<li>
<p>ç”¨æˆ·æ²¡æœ‰è¢«å‘ŠçŸ¥æ•°æ®ä¼šè¢«å¦‚æ­¤å¤„ç†</p>
</li>
<li>
<p>å­˜åœ¨æœªç»æˆæƒçš„æ•°æ®è®¿é—®</p>
</li>
</ul>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•ç¯å¢ƒå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ²¡æœ‰å½±å“åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p>
<hr/>
<h3 data-id="heading-41">ğŸ’­ åæ€</h3>
<h4 data-id="heading-42">ä¸ºä»€ä¹ˆä¼šçŠ¯è¿™ä¸ªé”™è¯¯ï¼Ÿ</h4>
<ol>
<li><strong>å¯¹ CDN çš„ç†è§£ä¸å¤Ÿæ·±å…¥</strong></li>
</ol>
<ul>
<li>
<p>æˆ‘ä»¬çŸ¥é“ CDN ä¼šç¼“å­˜ï¼Œä½†æ²¡æƒ³åˆ°ä¼šç¼“å­˜ API å“åº”</p>
</li>
<li>
<p>ä»¥ä¸º"æœ‰ Authorization header å°±ä¸ä¼šç¼“å­˜"</p>
</li>
</ul>
<ol start="2">
<li><strong>ç¼ºå°‘å®Œæ•´çš„æµ‹è¯•</strong></li>
</ol>
<ul>
<li>
<p>åŠŸèƒ½æµ‹è¯•åªå…³æ³¨"èƒ½å¦è¿”å›æ­£ç¡®æ•°æ®"</p>
</li>
<li>
<p>æ²¡æœ‰æµ‹è¯•"ä¸åŒç”¨æˆ·æ˜¯å¦ä¼šçœ‹åˆ°å½¼æ­¤çš„æ•°æ®"</p>
</li>
</ul>
<ol start="3">
<li><strong>æ¶æ„å˜æ›´æ—¶æ²¡æœ‰å……åˆ†è¯„ä¼°</strong></li>
</ol>
<ul>
<li>
<p>å¼•å…¥ CloudFront æ—¶ï¼Œåªè€ƒè™‘äº†æ€§èƒ½æå‡</p>
</li>
<li>
<p>æ²¡æœ‰è¯„ä¼°å¯¹ API çš„å½±å“</p>
</li>
</ul>
<ol start="4">
<li><strong>ç¼ºå°‘å®‰å…¨æ„è¯†</strong></li>
</ol>
<ul>
<li>
<p>æ²¡æœ‰å»ºç«‹"é»˜è®¤ç¦æ­¢ç¼“å­˜ç§æœ‰æ•°æ®"çš„åŸåˆ™</p>
</li>
<li>
<p>æ²¡æœ‰ä»£ç è§„èŒƒè¦æ±‚å¿…é¡»è®¾ç½® Cache-Control</p>
</li>
</ul>
<h4 data-id="heading-43">å¦‚æœé‡æ¥ä¸€æ¬¡ï¼Œæˆ‘ä¼šæ€ä¹ˆåšï¼Ÿ</h4>
<ol>
<li><strong>åœ¨æ¶æ„è®¾è®¡é˜¶æ®µå°±æ˜ç¡®ç¼“å­˜ç­–ç•¥</strong></li>
</ol>
<pre><code class="hljs">
é™æ€èµ„æº â†’ CDN ç¼“å­˜

å…¬å¼€ API â†’ CDN ç¼“å­˜ï¼ˆçŸ­æ—¶é—´ï¼‰

ç§æœ‰ API â†’ ç¦æ­¢ç¼“å­˜

</code></pre>
<ol start="2">
<li><strong>å»ºç«‹ç»Ÿä¸€çš„å“åº”è§„èŒƒ</strong></li>
</ol>
<ul>
<li>
<p>åˆ›å»ºæ ‡å‡†çš„å“åº”å‡½æ•°</p>
</li>
<li>
<p>è‡ªåŠ¨æ·»åŠ æ­£ç¡®çš„å“åº”å¤´</p>
</li>
<li>
<p>ä¸å…è®¸æ‰‹åŠ¨è®¾ç½®å“åº”å¤´</p>
</li>
</ul>
<ol start="3">
<li><strong>å®Œå–„æµ‹è¯•è¦†ç›–</strong></li>
</ol>
<ul>
<li>
<p>æ·»åŠ ç¼“å­˜æµ‹è¯•ç”¨ä¾‹</p>
</li>
<li>
<p>æ·»åŠ è·¨ç”¨æˆ·æ•°æ®éš”ç¦»æµ‹è¯•</p>
</li>
<li>
<p>åœ¨ CI/CD ä¸­æ£€æŸ¥å“åº”å¤´</p>
</li>
</ul>
<ol start="4">
<li><strong>éƒ¨ç½²å‰çš„å®‰å…¨å®¡è®¡</strong></li>
</ol>
<ul>
<li>
<p>æ£€æŸ¥æ‰€æœ‰æ–°çš„ API endpoint</p>
</li>
<li>
<p>éªŒè¯å“åº”å¤´æ˜¯å¦æ­£ç¡®</p>
</li>
<li>
<p>ä½¿ç”¨ä¸åŒç”¨æˆ· token æµ‹è¯•</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-44">ğŸ“ æ‹“å±•é˜…è¯»</h3>
<h4 data-id="heading-45">å…³äº HTTP ç¼“å­˜</h4>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCaching" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching" ref="nofollow noopener noreferrer">MDN - HTTP ç¼“å­˜</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7234" target="_blank" title="https://tools.ietf.org/html/rfc7234" ref="nofollow noopener noreferrer">RFC 7234 - HTTP/1.1 Caching</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Fhttp-cache%2F" target="_blank" title="https://web.dev/http-cache/" ref="nofollow noopener noreferrer">Web.dev - HTTP Caching</a></p>
</li>
</ul>
<h4 data-id="heading-46">å…³äº CloudFront</h4>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonCloudFront%2Flatest%2FDeveloperGuide%2Fcontrolling-the-cache-key.html" target="_blank" title="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/controlling-the-cache-key.html" ref="nofollow noopener noreferrer">CloudFront ç¼“å­˜é”®å’Œç­–ç•¥</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonCloudFront%2Flatest%2FDeveloperGuide%2FResponseHeadersPolicies.html" target="_blank" title="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/ResponseHeadersPolicies.html" ref="nofollow noopener noreferrer">CloudFront å“åº”å¤´ç­–ç•¥</a></p>
</li>
</ul>
<h4 data-id="heading-47">å…³äº Web å®‰å…¨</h4>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2Fwww-project-top-ten%2F" target="_blank" title="https://owasp.org/www-project-top-ten/" ref="nofollow noopener noreferrer">OWASP Top 10</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2Fwww-project-api-security%2F" target="_blank" title="https://owasp.org/www-project-api-security/" ref="nofollow noopener noreferrer">OWASP API Security Top 10</a></p>
</li>
</ul>
<hr/>
<h3 data-id="heading-48">âœ¨ æ€»ç»“</h3>
<p>è¿™æ¬¡äº‹æ•…ç»™æˆ‘ä¸Šäº†æ·±åˆ»çš„ä¸€è¯¾ï¼š</p>
<p><strong>1. CDN æ˜¯åŒåˆƒå‰‘</strong></p>
<ul>
<li>
<p>èƒ½æå‡æ€§èƒ½ï¼Œä½†é…ç½®ä¸å½“ä¼šå¯¼è‡´ä¸¥é‡çš„å®‰å…¨é—®é¢˜</p>
</li>
<li>
<p>ç†è§£ CDN çš„ç¼“å­˜æœºåˆ¶æ˜¯å¿…é¡»çš„</p>
</li>
</ul>
<p><strong>2. åç«¯è¦æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯å¦‚ä½•å¤„ç†å“åº”</strong></p>
<ul>
<li>
<p>ä¸è¦ä¾èµ–é»˜è®¤è¡Œä¸º</p>
</li>
<li>
<p>ä½¿ç”¨ <code>Cache-Control</code> æ˜ç¡®æ§åˆ¶ç¼“å­˜ç­–ç•¥</p>
</li>
</ul>
<p><strong>3. å®‰å…¨æµ‹è¯•å¾ˆé‡è¦</strong></p>
<ul>
<li>
<p>åŠŸèƒ½æµ‹è¯• + å®‰å…¨æµ‹è¯•</p>
</li>
<li>
<p>ä¸åŒç”¨æˆ·çš„æ•°æ®éš”ç¦»æµ‹è¯•</p>
</li>
</ul>
<p><strong>4. å»ºç«‹é˜²æŠ¤æœºåˆ¶</strong></p>
<ul>
<li>
<p>ç›‘æ§å‘Šè­¦</p>
</li>
<li>
<p>ä»£ç è§„èŒƒ</p>
</li>
<li>
<p>è‡ªåŠ¨åŒ–æ£€æŸ¥</p>
</li>
</ul>
<h4 data-id="heading-49">æ ¸å¿ƒåŸåˆ™</h4>
<blockquote>
<p><strong>éœ€è¦èº«ä»½éªŒè¯çš„ APIï¼Œæ°¸è¿œä¸è¦è¢« CDN ç¼“å­˜ã€‚</strong></p>
</blockquote>
<p>å¦‚æœä½ çš„ç³»ç»Ÿä¹Ÿä½¿ç”¨äº† CloudFrontã€Cloudflare æˆ–å…¶ä»– CDNï¼Œå»ºè®®ç«‹å³æ£€æŸ¥ä¸€ä¸‹ä½ çš„ API å“åº”å¤´ã€‚æ–¹æ³•å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
curl -I <span class="hljs-string">'https://your-api.com/api/user/data'</span> \

-H <span class="hljs-string">'authorization: Bearer YOUR_TOKEN'</span> \

| grep -i cache

</code></pre>
<p>å¦‚æœçœ‹åˆ° <code>x-cache: Hit</code> æˆ–è€… <code>cache-control: null</code>ï¼Œé‚£ä½ å¯èƒ½ä¹Ÿé¢ä¸´åŒæ ·çš„é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-50">ğŸ™ è‡´è°¢</h3>
<p>æ„Ÿè°¢ QA å›¢é˜Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿè°¢å›¢é˜Ÿå¿«é€Ÿå“åº”å’Œä¿®å¤ã€‚è¿™æ¬¡äº‹æ•…è™½ç„¶æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒå‘ç°çš„ï¼Œä½†ä¹Ÿæé†’æˆ‘ä»¬ï¼š</p>
<p><strong>å†å°çš„é—®é¢˜ä¹Ÿå¯èƒ½å¯¼è‡´ä¸¥é‡çš„åæœï¼Œå®‰å…¨æ— å°äº‹ã€‚</strong></p>
<hr/>
<p><strong>ä½ é‡åˆ°è¿‡ç±»ä¼¼çš„ç¼“å­˜é—®é¢˜å—ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒã€‚</strong></p>
<hr/>
<p><em>æœ¬æ–‡æŠ€æœ¯æ ˆï¼šCloudFront + Next.js + Goï¼Œä½†åŸç†é€‚ç”¨äºæ‰€æœ‰ CDN + API çš„æ¶æ„ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Chrome æµè§ˆå™¨åº•å±‚æ¶æ„å­¦ä¹ ç¬”è®°ï¼ˆè¡¥å……ç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7603309951226298418</link>    <guid>https://juejin.cn/post/7603309951226298418</guid>    <pubDate>2026-02-06T05:35:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603309951226298418" data-draft-id="7603283691457101834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Chrome æµè§ˆå™¨åº•å±‚æ¶æ„å­¦ä¹ ç¬”è®°ï¼ˆè¡¥å……ç¯‡ï¼‰"/> <meta itemprop="keywords" content="Chrome"/> <meta itemprop="datePublished" content="2026-02-06T05:35:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ•²ä»£ç 1"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Chrome æµè§ˆå™¨åº•å±‚æ¶æ„å­¦ä¹ ç¬”è®°ï¼ˆè¡¥å……ç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ•²ä»£ç 1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:35:00.000Z" title="Fri Feb 06 2026 05:35:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Chrome æµè§ˆå™¨åº•å±‚æ¶æ„å­¦ä¹ ç¬”è®°ï¼ˆè¡¥å……ç¯‡ï¼‰</h2>
<h3 data-id="heading-1">ä¹ã€è¿›ç¨‹ä¸çº¿ç¨‹çš„æ‰§è¡Œæ¨¡å¼å¯¹æ¯”</h3>
<p>åœ¨ç†è§£ Chrome çš„å¤šè¿›ç¨‹æ¶æ„æ—¶ï¼Œç†è§£<strong>å•çº¿ç¨‹</strong>ä¸<strong>å¤šçº¿ç¨‹</strong>çš„æ‰§è¡Œå·®å¼‚è‡³å…³é‡è¦ã€‚</p>
<h4 data-id="heading-2">1. å•çº¿ç¨‹å¤„ç†æ¨¡å‹ï¼ˆè¿›ç¨‹ Aï¼‰</h4>
<p>åœ¨å•çº¿ç¨‹æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½æŒ‰é¡ºåºåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">æ—¶é—´çº¿ï¼šä»»åŠ¡<span class="hljs-number">1</span> â†’ ä»»åŠ¡<span class="hljs-number">2</span> â†’ ä»»åŠ¡<span class="hljs-number">3</span> â†’ ä»»åŠ¡<span class="hljs-number">4</span> â†’ æ˜¾ç¤ºç»“æœ
       <span class="hljs-selector-attr">[ä¸»çº¿ç¨‹ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡]</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç®€å•æ˜“å®ç°ï¼Œé¿å…å¹¶å‘å†²çª</li>
<li>ä½† CPU åˆ©ç”¨ç‡ä½ï¼Œä¸€ä¸ªè€—æ—¶ä»»åŠ¡ä¼šé˜»å¡åç»­æ‰€æœ‰ä»»åŠ¡</li>
<li>æ—©æœŸçš„ JavaScript æ‰§è¡Œç¯å¢ƒé‡‡ç”¨è¿™ç§æ¨¡å‹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c194f611b743368f3a55cf549f46ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5pWy5Luj56CBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770960901&amp;x-signature=OLc55NTHjgwFBRFUUOQWxFwd0uw%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">2. å¤šçº¿ç¨‹å¤„ç†æ¨¡å‹ï¼ˆè¿›ç¨‹ Bï¼‰</h4>
<p>åœ¨å¤šçº¿ç¨‹æ¨¡å‹ä¸­ï¼Œä»»åŠ¡å¯ä»¥å¹¶è¡Œåˆ†é…ç»™ä¸åŒçº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æ—¶é—´çº¿ï¼š
çº¿ç¨‹<span class="hljs-number">1</span>ï¼šä»»åŠ¡<span class="hljs-number">1</span>(<span class="hljs-number">1</span>+<span class="hljs-number">2</span>)
çº¿ç¨‹<span class="hljs-number">2</span>ï¼šä»»åŠ¡<span class="hljs-number">2</span>(<span class="hljs-number">20</span>/<span class="hljs-number">5</span>)
çº¿ç¨‹<span class="hljs-number">3</span>ï¼šä»»åŠ¡<span class="hljs-number">3</span>(<span class="hljs-number">7</span>*<span class="hljs-number">8</span>)
<span class="hljs-selector-attr">[æ‰€æœ‰çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œ]</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å……åˆ†åˆ©ç”¨å¤šæ ¸ CPUï¼Œæé«˜æ‰§è¡Œæ•ˆç‡</li>
<li>å¤æ‚ä»»åŠ¡å¯å¹¶è¡Œå¤„ç†ï¼Œå‡å°‘æ€»æ‰§è¡Œæ—¶é—´</li>
<li>ä½†éœ€è¦å¤„ç†çº¿ç¨‹åŒæ­¥å’Œèµ„æºç«äº‰é—®é¢˜</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f70352a512dd44e9b7d5ec05a7914ad0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5pWy5Luj56CBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770960901&amp;x-signature=NtxnAszYK45k%2FiNSLqB9fOQSa28%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç¤ºä¾‹è®¡ç®—ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>ä»»åŠ¡1: 1+2 = 3</li>
<li>ä»»åŠ¡2: 20/5 = 4</li>
<li>ä»»åŠ¡3: 7*8 = 56</li>
</ul>
<p>åœ¨å•çº¿ç¨‹ä¸­ï¼Œè¿™ä¸‰ä¸ªè®¡ç®—éœ€è¦é¡ºåºæ‰§è¡Œï¼›è€Œåœ¨å¤šçº¿ç¨‹ä¸­ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶è¿›è¡Œã€‚</p>
<h3 data-id="heading-4">åã€çº¿ç¨‹é—´çš„æ•°æ®å…±äº«ä¸é€šä¿¡</h3>
<p>å¤šçº¿ç¨‹æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯<strong>çº¿ç¨‹å…±äº«è¿›ç¨‹èµ„æº</strong>ã€‚è¿™æ„å‘³ç€ï¼š</p>
<h4 data-id="heading-5">1. å…±äº«å†…å­˜ç©ºé—´</h4>
<p>å¤šä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è¿›ç¨‹çš„åŒä¸€å†…å­˜åŒºåŸŸï¼Œè¿™éœ€è¦<strong>çº¿ç¨‹åŒæ­¥æœºåˆ¶</strong>æ¥é¿å…æ•°æ®å†²çªã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af581f23796146f38da2e5cd5bfe1f51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5pWy5Luj56CBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770960901&amp;x-signature=huKVHvRa5HYs%2BFjdlJwR1AegOMQ%3D" alt="å±å¹•æˆªå›¾ 2026-02-05 191232.png" loading="lazy"/></p>
<h4 data-id="heading-6">2. çº¿ç¨‹åŒæ­¥ç¤ºä¾‹</h4>
<p>å¦‚ç¤ºæ„å›¾æ‰€ç¤ºï¼Œå½“å¤šä¸ªçº¿ç¨‹éœ€è¦å†™å…¥å…±äº«å˜é‡"A"æ—¶ï¼š</p>
<ul>
<li>çº¿ç¨‹1å¯èƒ½å†™å…¥å€¼3</li>
<li>çº¿ç¨‹2å¯èƒ½æ‰§è¡Œ1+2çš„è®¡ç®—</li>
<li>éœ€è¦åŒæ­¥æœºåˆ¶ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-7">åä¸€ã€å•è¿›ç¨‹æµè§ˆå™¨ vs å¤šè¿›ç¨‹æµè§ˆå™¨</h3>
<h4 data-id="heading-8">1. å•è¿›ç¨‹æµè§ˆå™¨æ¶æ„</h4>
<p>æ—©æœŸçš„æµè§ˆå™¨ï¼ˆå¦‚æ—§ç‰ˆ IEï¼‰é‡‡ç”¨å•è¿›ç¨‹æ¶æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å•è¿›ç¨‹æµè§ˆå™¨
â”œâ”€â”€ ä»£ç åŒº
â”œâ”€â”€ æ•°æ®åŒº
â”œâ”€â”€ æ–‡ä»¶åŒº
â””â”€â”€ çº¿ç¨‹ï¼š
<span class="hljs-code">    â”œâ”€â”€ ç½‘ç»œçº¿ç¨‹
    â”œâ”€â”€ é¡µé¢çº¿ç¨‹ï¼ˆæ ¸å¿ƒï¼‰
    â”‚   â”œâ”€â”€ é¡µé¢æ¸²æŸ“
    â”‚   â”œâ”€â”€ é¡µé¢å±•ç°
    â”‚   â”œâ”€â”€ JavaScriptç¯å¢ƒ
    â”‚   â””â”€â”€ æ’ä»¶è¿è¡Œ
    â””â”€â”€ å…¶ä»–çº¿ç¨‹
</span></code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li><strong>ç¨³å®šæ€§å·®</strong>ï¼šä¸€ä¸ªæ ‡ç­¾é¡µå´©æºƒä¼šå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨å´©æºƒ</li>
<li><strong>å®‰å…¨æ€§ä½</strong>ï¼šæ¶æ„é¡µé¢å¯èƒ½è®¿é—®å…¶ä»–é¡µé¢æ•°æ®</li>
<li><strong>æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šæ‰€æœ‰ä»»åŠ¡å…±äº«åŒä¸€ä¸ªè¿›ç¨‹èµ„æº</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c24db6861d56469289bb264cc6244355~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5pWy5Luj56CBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770960901&amp;x-signature=J7SYwwz2fYgchgTMuwDQHc2230c%3D" alt="å±å¹•æˆªå›¾ 2026-02-05 191958.png" loading="lazy"/></p>
<h4 data-id="heading-9">2. ç°ä»£ Chrome çš„å¤šè¿›ç¨‹æ¶æ„</h4>
<p>Chrome å°†ä¸åŒåŠŸèƒ½æ¨¡å—æ‹†åˆ†ä¸ºç‹¬ç«‹çš„è¿›ç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Chrome å¤šè¿›ç¨‹æ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æµè§ˆå™¨ä¸»è¿›ç¨‹                  â”‚
â”‚  (Browser Process)                  â”‚
â”‚  â€¢ ç•Œé¢ç®¡ç†                         â”‚
â”‚  â€¢ ç”¨æˆ·äº¤äº’                         â”‚
â”‚  â€¢ å­è¿›ç¨‹ç®¡ç†                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ IPCé€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¸²æŸ“è¿›ç¨‹  â”‚  ç½‘ç»œè¿›ç¨‹   â”‚  GPUè¿›ç¨‹   â”‚
â”‚ (å¤šä¸ª)    â”‚ (ç‹¬ç«‹)     â”‚ (ç‹¬ç«‹)     â”‚
â”‚ â€¢ é¡µé¢æ¸²æŸ“â”‚ â€¢ èµ„æºåŠ è½½ â”‚ â€¢ å›¾å½¢å¤„ç† â”‚
â”‚ â€¢ JSæ‰§è¡Œ  â”‚           â”‚ â€¢ <span class="hljs-number">3</span>DåŠ é€Ÿ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ç¨³å®šæ€§å¢å¼º</strong>ï¼šå•ä¸ªé¡µé¢å´©æºƒä¸å½±å“å…¶ä»–é¡µé¢</li>
<li><strong>å®‰å…¨æ€§æå‡</strong>ï¼šè¿›ç¨‹é—´å†…å­˜éš”ç¦»ï¼Œæ²™ç®±æœºåˆ¶</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä¸“ç”¨è¿›ç¨‹å¤„ç†ä¸“é—¨ä»»åŠ¡</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/686169a0bdce47329575fdbfdd5bd3ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Lya5pWy5Luj56CBMQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770960901&amp;x-signature=JKebnXHIlJIpphelL2SgBUodkAQ%3D" alt="å±å¹•æˆªå›¾ 2026-02-05 193001.png" loading="lazy"/></p>
<h3 data-id="heading-10">åäºŒã€Chrome è¿›ç¨‹æ¶æ„æ¼”è¿›ç»†èŠ‚</h3>
<h4 data-id="heading-11">1. è¿›ç¨‹ç‹¬ç«‹åŒ–è¶‹åŠ¿</h4>
<p>Chrome åœ¨å‘å±•è¿‡ç¨‹ä¸­ï¼Œé€æ¸å°†å…³é”®åŠŸèƒ½ä»æµè§ˆå™¨ä¸»è¿›ç¨‹ä¸­ç‹¬ç«‹å‡ºæ¥ï¼š</p>
<ul>
<li><strong>ç½‘ç»œè¿›ç¨‹</strong>ï¼šåŸæœ¬å±äºæµè§ˆå™¨è¿›ç¨‹ï¼Œç°ç‹¬ç«‹ä»¥ä¼˜åŒ–ç½‘ç»œè¯·æ±‚å¤„ç†</li>
<li><strong>GPUè¿›ç¨‹</strong>ï¼šä¸ºæ”¯æŒæ›´å¤æ‚çš„å›¾å½¢æ¸²æŸ“å’Œç¡¬ä»¶åŠ é€Ÿè€Œç‹¬ç«‹</li>
<li><strong>å­˜å‚¨è¿›ç¨‹</strong>ï¼šä¸“é—¨å¤„ç†æœ¬åœ°å­˜å‚¨å’Œç¼“å­˜</li>
</ul>
<h4 data-id="heading-12">2. æ²™ç®±ï¼ˆSandboxï¼‰å®‰å…¨æœºåˆ¶</h4>
<p>åœ¨æ”¯æŒçš„ç³»ç»Ÿä¸Šï¼ŒChrome ä¸ºæ¸²æŸ“è¿›ç¨‹ç­‰å¯ç”¨æ²™ç®±æœºåˆ¶ï¼š</p>
<ul>
<li>é™åˆ¶è¿›ç¨‹çš„æƒé™ï¼Œé˜²æ­¢æ¶æ„ä»£ç è®¿é—®ç³»ç»Ÿèµ„æº</li>
<li>å³ä½¿æ¸²æŸ“è¿›ç¨‹è¢«æ”»ç ´ï¼Œæ”»å‡»è€…ä¹Ÿéš¾ä»¥çªç ´æ²™ç®±é™åˆ¶</li>
</ul>
<h3 data-id="heading-13">åä¸‰ã€å¯¹å‰ç«¯å¼€å‘çš„å¯ç¤º</h3>
<h4 data-id="heading-14">1. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h4>
<ul>
<li><strong>å‡å°‘ä¸»çº¿ç¨‹é˜»å¡</strong>ï¼šé¿å…é•¿æ—¶é—´çš„ JavaScript è®¡ç®—</li>
<li><strong>åˆç†ä½¿ç”¨ Web Workers</strong>ï¼šå°†è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç§»è‡³åå°çº¿ç¨‹</li>
<li><strong>æ³¨æ„å†…å­˜ç®¡ç†</strong>ï¼šé¡µé¢å…³é—­æ—¶è¿›ç¨‹ä¼šé‡Šæ”¾å†…å­˜ï¼Œä½†é•¿æ—¶é—´è¿è¡Œçš„ SPA éœ€æ³¨æ„å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-15">2. è°ƒè¯•æŠ€å·§</h4>
<ul>
<li>ä½¿ç”¨ Chrome ä»»åŠ¡ç®¡ç†å™¨è¯†åˆ«å†…å­˜æ³„æ¼</li>
<li>é€šè¿‡ <code>chrome://process-internals</code> æŸ¥çœ‹è¯¦ç»†è¿›ç¨‹ä¿¡æ¯</li>
<li>åˆ©ç”¨ Performance é¢æ¿åˆ†æé¡µé¢çº¿ç¨‹æ´»åŠ¨</li>
</ul>
<h3 data-id="heading-16">åå››ã€æ€»ç»“ï¼šChrome æ¶æ„è®¾è®¡çš„æ¼”è¿›æ€æƒ³</h3>
<p>Chrome çš„å¤šè¿›ç¨‹æ¶æ„ä»£è¡¨äº†ç°ä»£æµè§ˆå™¨çš„å‘å±•æ–¹å‘ï¼š</p>
<ol>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šå°†å¤æ‚ç³»ç»Ÿæ‹†åˆ†ä¸ºç‹¬ç«‹çš„ã€åŠŸèƒ½å•ä¸€çš„æ¨¡å—</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼šé€šè¿‡è¿›ç¨‹éš”ç¦»æé«˜å®‰å…¨æ€§å’Œç¨³å®šæ€§</li>
<li><strong>ä¸“ä¸šåŒ–</strong>ï¼šä¸“ç”¨è¿›ç¨‹å¤„ç†ä¸“é—¨ä»»åŠ¡ï¼Œæé«˜æ•ˆç‡</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šä¾¿äºæ·»åŠ æ–°åŠŸèƒ½å’Œä¼˜åŒ–ç°æœ‰æ¨¡å—</li>
</ol>
<p>è¿™ç§æ¶æ„è™½ç„¶å¢åŠ äº†å†…å­˜å¼€é”€ï¼Œä½†æ¢æ¥äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œæ›´é«˜çš„å®‰å…¨æ€§ï¼Œè¿™ä¹Ÿæ˜¯ Chrome èƒ½æˆä¸ºä¸»æµæµè§ˆå™¨çš„é‡è¦åŸå› ã€‚</p>
<hr/>
<p>ç†è§£è¿™äº›åº•å±‚åŸç†ä¸ä»…æœ‰åŠ©äºè°ƒè¯•å’Œä¼˜åŒ–ç½‘é¡µæ€§èƒ½ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ç°ä»£ Web æŠ€æœ¯æ ˆçš„è®¾è®¡æ€æƒ³ï¼Œä¸ºæ„å»ºé«˜æ€§èƒ½ Web åº”ç”¨æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidç³»ç»ŸAPN(Access Point Name)åŠ è½½æµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7603294029531660339</link>    <guid>https://juejin.cn/post/7603294029531660339</guid>    <pubDate>2026-02-06T05:23:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603294029531660339" data-draft-id="7603263490342453257" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidç³»ç»ŸAPN(Access Point Name)åŠ è½½æµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T05:23:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidç³»ç»ŸAPN(Access Point Name)åŠ è½½æµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:23:56.000Z" title="Fri Feb 06 2026 05:23:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸºäºä»£ç åˆ†æï¼Œæˆ‘å°†è¯¦ç»†è®²è§£Androidç³»ç»Ÿå¦‚ä½•åŠ è½½å’Œç®¡ç†APNé…ç½®ã€‚</p>
<h3 data-id="heading-0">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs">APNé…ç½®æ–‡ä»¶ â†’ XMLè§£æ â†’ æ•°æ®åº“å­˜å‚¨ â†’ åº”ç”¨ç¨‹åºæŸ¥è¯¢
</code></pre>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šAPNé…ç½®æ–‡ä»¶æ¥æº</h3>
<h4 data-id="heading-2">1.1 æ–‡ä»¶å­˜å‚¨ä½ç½®ï¼ˆä¼˜å…ˆçº§é¡ºåºï¼‰</h4>
<p>TelephonyProvideræŸ¥æ‰¾APNé…ç½®æ–‡ä»¶æ—¶æŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆçº§é¡ºåºï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// TelephonyProvider.java: 887-896 è¡Œ</span>
private File <span class="hljs-title function_">getApnConfFile</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. é»˜è®¤ç³»ç»Ÿæ–‡ä»¶ (æœ€ä½ä¼˜å…ˆçº§)</span>
    File confFile = new File(Environment.getRootDirectory(), PARTNER_APNS_PATH);
    <span class="hljs-comment">// = /system/etc/apns-conf.xml</span>
    
    <span class="hljs-comment">// 2. OEMå®šåˆ¶æ–‡ä»¶ (æ›´é«˜ä¼˜å…ˆçº§)</span>
    File oemConfFile = new File(Environment.getOemDirectory(), OEM_APNS_PATH);
    <span class="hljs-comment">// = /oem/telephony/apns-conf.xml</span>
    
    <span class="hljs-comment">// 3. äº§å“é…ç½®æ–‡ä»¶</span>
    File productConfFile = new File(Environment.getProductDirectory(), PARTNER_APNS_PATH);
    <span class="hljs-comment">// = /product/etc/apns-conf.xml</span>
    
    <span class="hljs-comment">// 4. OTAæ›´æ–°æ–‡ä»¶ (æœ€é«˜ä¼˜å…ˆçº§)</span>
    File updatedConfFile = new File(Environment.getDataDirectory(), OTA_UPDATED_APNS_PATH);
    <span class="hljs-comment">// = /data/misc/apns/apns-conf.xml</span>
    
    <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§é€‰æ‹©</span>
    confFile = pickSecondIfExists(confFile, oemConfFile);
    confFile = pickSecondIfExists(confFile, productConfFile);
    confFile = pickSecondIfExists(confFile, updatedConfFile);  <span class="hljs-comment">// æœ€ç»ˆä¼˜å…ˆçº§æœ€é«˜</span>
    <span class="hljs-keyword">return</span> confFile;
}
</code></pre>
<p><strong>ä¼˜å…ˆçº§å…³ç³»ï¼š</strong></p>
<pre><code class="hljs">OTAæ–‡ä»¶ &gt; äº§å“æ–‡ä»¶ &gt; OEMæ–‡ä»¶ &gt; ç³»ç»Ÿé»˜è®¤æ–‡ä»¶
</code></pre>
<h4 data-id="heading-3">1.2 æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">apns</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"8"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¯æ¡APNé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">apn</span>
        <span class="hljs-attr">mcc</span>=<span class="hljs-string">"310"</span>
        <span class="hljs-attr">mnc</span>=<span class="hljs-string">"04"</span>
        <span class="hljs-attr">carrier</span>=<span class="hljs-string">"Verizon"</span>
        <span class="hljs-attr">apn</span>=<span class="hljs-string">"vzwinternet"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"default,hipri"</span>
        <span class="hljs-attr">protocol</span>=<span class="hljs-string">"IP"</span>
        <span class="hljs-attr">roaming_protocol</span>=<span class="hljs-string">"IP"</span>
        <span class="hljs-attr">proxy</span>=<span class="hljs-string">"0.0.0.0"</span>
        <span class="hljs-attr">port</span>=<span class="hljs-string">"0"</span>
        <span class="hljs-attr">mmsproxy</span>=<span class="hljs-string">"0.0.0.0"</span>
        <span class="hljs-attr">mmsport</span>=<span class="hljs-string">"0"</span>
        <span class="hljs-attr">mmsc</span>=<span class="hljs-string">""</span>
        <span class="hljs-attr">carrier_enabled</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">user_editable</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">user_visible</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">authtype</span>=<span class="hljs-string">"3"</span>
        <span class="hljs-attr">bearer_bitmask</span>=<span class="hljs-string">"0"</span>
    /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">apns</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">ç¬¬äºŒé˜¶æ®µï¼šåˆå§‹åŒ–é˜¶æ®µ</h3>
<h4 data-id="heading-5">2.1 æ•°æ®åº“åˆå§‹åŒ–æ—¶æœº</h4>
<p>å½“TelephonyProvideré¦–æ¬¡å¯åŠ¨æˆ–æ•°æ®åº“ç‰ˆæœ¬å˜åŒ–æ—¶ï¼Œè§¦å‘åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 918-998 è¡Œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initDatabase</span><span class="hljs-params">(SQLiteDatabase db)</span> {
    <span class="hljs-comment">// æ­¥éª¤1ï¼šåŠ è½½ç³»ç»Ÿå†…ç½®APN</span>
    <span class="hljs-comment">// æ­¥éª¤2ï¼šåŠ è½½OEM/Partneræä¾›çš„APN</span>
    <span class="hljs-comment">// æ­¥éª¤3ï¼šæ¸…ç†å·²åˆ é™¤çš„APN</span>
}
</code></pre>
<h4 data-id="heading-6">2.2 æ ¡éªŒå’Œæ£€æŸ¥</h4>
<p>ä¸ºäº†é¿å…ä¸å¿…è¦çš„æ•°æ®åº“é‡æ–°åŠ è½½ï¼Œç³»ç»Ÿä½¿ç”¨æ ¡éªŒå’Œæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 905-911 è¡Œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">apnDbUpdateNeeded</span><span class="hljs-params">()</span> {
    <span class="hljs-type">File</span> <span class="hljs-variable">confFile</span> <span class="hljs-operator">=</span> getApnConfFile();
    <span class="hljs-type">long</span> <span class="hljs-variable">newChecksum</span> <span class="hljs-operator">=</span> getChecksum(confFile);        <span class="hljs-comment">// è®¡ç®—æ–°æ ¡éªŒå’Œ</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">oldChecksum</span> <span class="hljs-operator">=</span> getApnConfChecksum();         <span class="hljs-comment">// è¯»å–æ—§æ ¡éªŒå’Œ</span>
    
    <span class="hljs-keyword">if</span> (DBG) log(<span class="hljs-string">"newChecksum: "</span> + newChecksum);
    <span class="hljs-keyword">if</span> (DBG) log(<span class="hljs-string">"oldChecksum: "</span> + oldChecksum);
    
    <span class="hljs-keyword">return</span> newChecksum != oldChecksum;  <span class="hljs-comment">// æ ¡éªŒå’Œä¸åŒåˆ™éœ€è¦æ›´æ–°</span>
}
</code></pre>
<p><strong>å­˜å‚¨ä½ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SharedPreferencesä¸­</span>
<span class="hljs-type">SharedPreferences</span> <span class="hljs-variable">sp</span> <span class="hljs-operator">=</span> mContext.getSharedPreferences(PREF_FILE, Context.MODE_PRIVATE);
sp.getLong(APN_CONF_CHECKSUM, -<span class="hljs-number">1</span>);  <span class="hljs-comment">// "apn_conf_checksum"</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">ç¬¬ä¸‰é˜¶æ®µï¼šåŠ è½½æµç¨‹</h3>
<h4 data-id="heading-8">3.1 ä¸¤å±‚APNæ•°æ®æº</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 918-936 è¡Œ</span>
<span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šç³»ç»Ÿå†…ç½®APN</span>
<span class="hljs-type">Resources</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> mContext.getResources();
<span class="hljs-type">XmlResourceParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> r.getXml(com.android.internal.R.xml.apns);
<span class="hljs-keyword">try</span> {
    XmlUtils.beginDocument(parser, <span class="hljs-string">"apns"</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">publicversion</span> <span class="hljs-operator">=</span> Integer.parseInt(parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"version"</span>));
    loadApns(db, parser, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// åŠ è½½å†…ç½®APN (isOverlay=true)</span>
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šOEM/Partneræä¾›çš„APN</span>
<span class="hljs-type">File</span> <span class="hljs-variable">confFile</span> <span class="hljs-operator">=</span> getApnConfFile();
<span class="hljs-type">FileReader</span> <span class="hljs-variable">confreader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(confFile);
<span class="hljs-type">XmlPullParser</span> <span class="hljs-variable">confparser</span> <span class="hljs-operator">=</span> Xml.newPullParser();
confparser.setInput(confreader);

<span class="hljs-comment">// ç‰ˆæœ¬æ ¡éªŒï¼šå†…ç½®ç‰ˆæœ¬å¿…é¡»ä¸å¤–éƒ¨é…ç½®ç‰ˆæœ¬ä¸€è‡´</span>
<span class="hljs-type">int</span> <span class="hljs-variable">confversion</span> <span class="hljs-operator">=</span> Integer.parseInt(confparser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"version"</span>));
<span class="hljs-keyword">if</span> (publicversion != confversion) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Internal APNS file version doesn't match"</span>);
}

loadApns(db, confparser, <span class="hljs-literal">false</span>);  <span class="hljs-comment">// åŠ è½½å¤–éƒ¨APN (isOverlay=false)</span>
</code></pre>
<h4 data-id="heading-9">3.2 XMLè§£æå’Œæ•°æ®æå–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 2716-2831 è¡Œ</span>
<span class="hljs-keyword">private</span> ContentValues <span class="hljs-title function_">getRow</span><span class="hljs-params">(XmlPullParser parser, <span class="hljs-type">boolean</span> isOverlay)</span> {
    <span class="hljs-type">ContentValues</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValues</span>();
    
    <span class="hljs-comment">// å¿…éœ€å­—æ®µï¼šMCC/MNC</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">mcc</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"mcc"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">mnc</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"mnc"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">numeric</span> <span class="hljs-operator">=</span> mcc + mnc;  <span class="hljs-comment">// å¦‚: "31004" (Verizon)</span>
    
    map.put(NUMERIC, numeric);
    map.put(MCC, mcc);
    map.put(MNC, mnc);
    
    <span class="hljs-comment">// åŸºæœ¬ä¿¡æ¯</span>
    map.put(NAME, parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"carrier"</span>));
    map.put(APN, parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"apn"</span>));
    
    <span class="hljs-comment">// ç½‘ç»œå‚æ•°</span>
    addStringAttribute(parser, <span class="hljs-string">"proxy"</span>, map, PROXY);
    addStringAttribute(parser, <span class="hljs-string">"port"</span>, map, PORT);
    
    <span class="hljs-comment">// MMSå‚æ•°</span>
    addStringAttribute(parser, <span class="hljs-string">"mmsproxy"</span>, map, MMSPROXY);
    addStringAttribute(parser, <span class="hljs-string">"mmsport"</span>, map, MMSPORT);
    addStringAttribute(parser, <span class="hljs-string">"mmsc"</span>, map, MMSC);
    
    <span class="hljs-comment">// è®¤è¯ä¿¡æ¯</span>
    addStringAttribute(parser, <span class="hljs-string">"user"</span>, map, USER);
    addStringAttribute(parser, <span class="hljs-string">"password"</span>, map, PASSWORD);
    addIntAttribute(parser, <span class="hljs-string">"authtype"</span>, map, AUTH_TYPE);
    
    <span class="hljs-comment">// APNç±»å‹ (default, mms, supl, hipri, fota, ims, ia, dunç­‰)</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">apnType</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"type"</span>);
    <span class="hljs-keyword">if</span> (apnType != <span class="hljs-literal">null</span>) {
        apnType = apnType.replaceAll(<span class="hljs-string">"\\s+"</span>, <span class="hljs-string">""</span>);  <span class="hljs-comment">// ç§»é™¤ç©ºæ ¼</span>
        map.put(TYPE, apnType);
    }
    
    <span class="hljs-comment">// åè®®é…ç½®</span>
    addStringAttribute(parser, <span class="hljs-string">"protocol"</span>, map, PROTOCOL);              <span class="hljs-comment">// IP/IPV6/IPV4V6</span>
    addStringAttribute(parser, <span class="hljs-string">"roaming_protocol"</span>, map, ROAMING_PROTOCOL);
    
    <span class="hljs-comment">// ç½‘ç»œæŠ€æœ¯æ”¯æŒ</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">networkTypeBitmask</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">networkTypeList</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"network_type_bitmask"</span>);
    <span class="hljs-keyword">if</span> (networkTypeList != <span class="hljs-literal">null</span>) {
        networkTypeBitmask = getBitmaskFromString(networkTypeList);
    }
    map.put(NETWORK_TYPE_BITMASK, networkTypeBitmask);
    
    <span class="hljs-comment">// æ‰¿è½½ç½‘ç»œç±»å‹</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">bearerBitmask</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">bearerList</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"bearer_bitmask"</span>);
    <span class="hljs-keyword">if</span> (bearerList != <span class="hljs-literal">null</span>) {
        bearerBitmask = getBitmaskFromString(bearerList);
    }
    map.put(BEARER_BITMASK, bearerBitmask);
    
    <span class="hljs-comment">// é«˜çº§é…ç½®</span>
    addBoolAttribute(parser, <span class="hljs-string">"carrier_enabled"</span>, map, CARRIER_ENABLED);
    addBoolAttribute(parser, <span class="hljs-string">"user_visible"</span>, map, USER_VISIBLE);
    addBoolAttribute(parser, <span class="hljs-string">"user_editable"</span>, map, USER_EDITABLE);
    addBoolAttribute(parser, <span class="hljs-string">"modem_cognitive"</span>, map, MODEM_PERSIST);
    addBoolAttribute(parser, <span class="hljs-string">"always_on"</span>, map, ALWAYS_ON);
    
    <span class="hljs-comment">// MVNOé…ç½® (è™šæ‹Ÿè¿è¥å•†)</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">mvno_type</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"mvno_type"</span>);
    <span class="hljs-keyword">if</span> (mvno_type != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">String</span> <span class="hljs-variable">mvno_match_data</span> <span class="hljs-operator">=</span> parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"mvno_match_data"</span>);
        <span class="hljs-keyword">if</span> (mvno_match_data != <span class="hljs-literal">null</span>) {
            map.put(MVNO_TYPE, mvno_type);        <span class="hljs-comment">// gid, spn, imsiç­‰</span>
            map.put(MVNO_MATCH_DATA, mvno_match_data);
        }
    }
    
    <span class="hljs-keyword">return</span> map;
}
</code></pre>
<p><strong>æå–çš„å…³é”®å­—æ®µï¼š</strong></p>


















































<table><thead><tr><th>å­—æ®µå</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>numeric</td><td>MCC+MNC</td><td>31004 (Verizon)</td></tr><tr><td>apn</td><td>æ¥å…¥ç‚¹åç§°</td><td>vzwinternet</td></tr><tr><td>type</td><td>APNç±»å‹</td><td>default,hipri,mms</td></tr><tr><td>protocol</td><td>åè®®</td><td>IP/IPV6/IPV4V6</td></tr><tr><td>proxy</td><td>ä»£ç†åœ°å€</td><td>0.0.0.0</td></tr><tr><td>mmsc</td><td>MMSä¸­å¿ƒåœ°å€</td><td><a href="https://link.juejin.cn?target=http%3A%2F%2Fmms.verizon.com" target="_blank" title="http://mms.verizon.com" ref="nofollow noopener noreferrer">mms.verizon.com</a></td></tr><tr><td>user/password</td><td>è®¤è¯å‡­è¯</td><td>(å¯é€‰)</td></tr><tr><td>bearer_bitmask</td><td>ç½‘ç»œæŠ€æœ¯</td><td>LTE, 3Gç­‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">ç¬¬å››é˜¶æ®µï¼šæ•°æ®åº“æ’å…¥</h3>
<h4 data-id="heading-11">4.1 äº‹åŠ¡åŒ–æ’å…¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 2865-2888 è¡Œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadApns</span><span class="hljs-params">(SQLiteDatabase db, XmlPullParser parser, <span class="hljs-type">boolean</span> isOverlay)</span> {
    <span class="hljs-keyword">if</span> (parser != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
            db.beginTransaction();  <span class="hljs-comment">// å¼€å§‹äº‹åŠ¡</span>
            XmlUtils.nextElement(parser);
            
            <span class="hljs-comment">// å¾ªç¯è§£ææ¯æ¡APN</span>
            <span class="hljs-keyword">while</span> (parser.getEventType() != XmlPullParser.END_DOCUMENT) {
                <span class="hljs-type">ContentValues</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> getRow(parser, isOverlay);  <span class="hljs-comment">// è§£æä¸€æ¡APN</span>
                <span class="hljs-keyword">if</span> (row == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XmlPullParserException</span>(<span class="hljs-string">"Expected 'apn' tag"</span>, parser, <span class="hljs-literal">null</span>);
                }
                insertAddingDefaults(db, row);  <span class="hljs-comment">// æ’å…¥æ•°æ®åº“</span>
                XmlUtils.nextElement(parser);
            }
            
            db.setTransactionSuccessful();  <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        } <span class="hljs-keyword">catch</span> (XmlPullParserException | IOException | SQLException e) {
            <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
        } <span class="hljs-keyword">finally</span> {
            db.endTransaction();
        }
    }
}
</code></pre>
<h4 data-id="heading-12">4.2 å†²çªå¤„ç†</h4>
<p>å½“APNå·²å­˜åœ¨æ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨åˆå¹¶ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 2891-2931 è¡Œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertAddingDefaults</span><span class="hljs-params">(SQLiteDatabase db, ContentValues row)</span> {
    row = setDefaultValue(row);  <span class="hljs-comment">// è®¾ç½®é»˜è®¤å€¼</span>
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å°è¯•æ’å…¥ (CONFLICT_ABORT: å¦‚æœå†²çªåˆ™ä¸­æ­¢)</span>
        db.insertWithOnConflict(CARRIERS_TABLE, <span class="hljs-literal">null</span>, row, SQLiteDatabase.CONFLICT_ABORT);
    } <span class="hljs-keyword">catch</span> (SQLException e) {
        <span class="hljs-comment">// æ’å…¥å¤±è´¥ - æ£€æŸ¥æ˜¯å¦å­˜åœ¨å†²çªçš„APN</span>
        <span class="hljs-type">Cursor</span> <span class="hljs-variable">oldRow</span> <span class="hljs-operator">=</span> selectConflictingRow(db, CARRIERS_TABLE, row);
        <span class="hljs-keyword">if</span> (oldRow != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">ContentValues</span> <span class="hljs-variable">mergedValues</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValues</span>();
            <span class="hljs-type">int</span> <span class="hljs-variable">edited</span> <span class="hljs-operator">=</span> oldRow.getInt(oldRow.getColumnIndex(EDITED_STATUS));
            
            <span class="hljs-comment">// å¤„ç†ç¼–è¾‘çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (edited == USER_DELETED) {
                <span class="hljs-comment">// ç”¨æˆ·åˆ é™¤ä½†åœ¨XMLä¸­å­˜åœ¨ -&gt; æ ‡è®°ä¸º USER_DELETED_BUT_PRESENT_IN_XML</span>
                edited = USER_DELETED_BUT_PRESENT_IN_XML;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (edited == CARRIER_DELETED) {
                edited = CARRIER_DELETED_BUT_PRESENT_IN_XML;
            }
            mergedValues.put(EDITED_STATUS, edited);
            
            <span class="hljs-comment">// åˆå¹¶å­—æ®µå¹¶æ›´æ–°æ•°æ®åº“</span>
            mergeFieldsAndUpdateDb(db, CARRIERS_TABLE, oldRow, row, 
                                   mergedValues, <span class="hljs-literal">false</span>, mContext);
        }
    }
}
</code></pre>
<h4 data-id="heading-13">4.3 APNç¼–è¾‘çŠ¶æ€</h4>
<p>ç³»ç»Ÿè·Ÿè¸ªAPNçš„ç¼–è¾‘çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java</span>
UNEDITED = <span class="hljs-number">0</span>                                    <span class="hljs-comment">// æœªç¼–è¾‘ï¼ˆç³»ç»ŸAPNï¼‰</span>
USER_EDITED = <span class="hljs-number">1</span>                                <span class="hljs-comment">// ç”¨æˆ·ç¼–è¾‘</span>
USER_DELETED = <span class="hljs-number">2</span>                               <span class="hljs-comment">// ç”¨æˆ·åˆ é™¤</span>
CARRIER_EDITED = <span class="hljs-number">3</span>                             <span class="hljs-comment">// è¿è¥å•†ç¼–è¾‘</span>
CARRIER_DELETED = <span class="hljs-number">4</span>                            <span class="hljs-comment">// è¿è¥å•†åˆ é™¤</span>
USER_DELETED_BUT_PRESENT_IN_XML = <span class="hljs-number">5</span>           <span class="hljs-comment">// ç”¨æˆ·åˆ é™¤ä½†åœ¨XMLä¸­å­˜åœ¨</span>
CARRIER_DELETED_BUT_PRESENT_IN_XML = <span class="hljs-number">6</span>        <span class="hljs-comment">// è¿è¥å•†åˆ é™¤ä½†åœ¨XMLä¸­å­˜åœ¨</span>
</code></pre>
<p><strong>æ¸…ç†è§„åˆ™ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 973-984 è¡Œ</span>
<span class="hljs-comment">// åŠ è½½å®Œæˆåæ¸…ç†å·²åˆ é™¤çš„APN</span>

<span class="hljs-comment">// åˆ é™¤ç”¨æˆ·/è¿è¥å•†æ˜ç¡®åˆ é™¤çš„APN</span>
db.delete(CARRIERS_TABLE, IS_USER_DELETED + <span class="hljs-string">" or "</span> + IS_CARRIER_DELETED, <span class="hljs-literal">null</span>);

<span class="hljs-comment">// å°†"åˆ é™¤ä½†åœ¨XMLä¸­å­˜åœ¨"çŠ¶æ€æ”¹ä¸º"å·²åˆ é™¤"</span>
<span class="hljs-type">ContentValues</span> <span class="hljs-variable">cv</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValues</span>();
cv.put(EDITED_STATUS, USER_DELETED);
db.update(CARRIERS_TABLE, cv, IS_USER_DELETED_BUT_PRESENT_IN_XML, <span class="hljs-literal">null</span>);
</code></pre>
<hr/>
<h3 data-id="heading-14">ç¬¬äº”é˜¶æ®µï¼šå­—æ®µåˆå¹¶ç­–ç•¥</h3>
<p>å½“æ–°æ—§APNå†²çªæ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½åˆå¹¶ç­–ç•¥ï¼š</p>
<h4 data-id="heading-15">5.1 APNç±»å‹åˆå¹¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 2938-2982 è¡Œ</span>
<span class="hljs-comment">// å¦‚æœç±»å‹ä¸åŒï¼Œåˆå¹¶æ‰€æœ‰å”¯ä¸€çš„ç±»å‹</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼š</span>
<span class="hljs-comment">// oldType = "default,hipri"</span>
<span class="hljs-comment">// newType = "default,mms"</span>
<span class="hljs-comment">// mergedType = "default,hipri,mms"</span>

<span class="hljs-keyword">if</span> (!oldType.equalsIgnoreCase(newType)) {
    String[] oldTypes = oldType.toLowerCase(Locale.ROOT).split(<span class="hljs-string">","</span>);
    String[] newTypes = newType.toLowerCase(Locale.ROOT).split(<span class="hljs-string">","</span>);
    
    ArrayList&lt;String&gt; mergedTypes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    mergedTypes.addAll(Arrays.asList(oldTypes));
    
    <span class="hljs-keyword">for</span> (String s : newTypes) {
        <span class="hljs-keyword">if</span> (!mergedTypes.contains(s.trim())) {
            mergedTypes.add(s);  <span class="hljs-comment">// æ·»åŠ æ–°ç±»å‹</span>
        }
    }
    
    <span class="hljs-comment">// é‡æ–°ç»„åˆ</span>
    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">mergedType</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; mergedTypes.size(); i++) {
        mergedType.append((i == <span class="hljs-number">0</span> ? <span class="hljs-string">""</span> : <span class="hljs-string">","</span>) + mergedTypes.get(i));
    }
    newRow.put(TYPE, mergedType.toString());
}
</code></pre>
<h4 data-id="heading-16">5.2 Bearer/NetworkTypeä½æ©ç åˆå¹¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TelephonyProvider.java: 2985-3009 è¡Œ</span>
<span class="hljs-comment">// ä½æ©ç æŒ‰ä½æˆ–æ“ä½œåˆå¹¶</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼š</span>
<span class="hljs-comment">// oldBearer = 0x0001 (GSM)</span>
<span class="hljs-comment">// newBearer = 0x0002 (CDMA)</span>
<span class="hljs-comment">// mergedBearer = 0x0003 (GSM | CDMA)</span>

<span class="hljs-keyword">if</span> (oldBearer != newBearer) {
    <span class="hljs-keyword">if</span> (oldBearer == <span class="hljs-number">0</span> || newBearer == <span class="hljs-number">0</span>) {
        newRow.put(BEARER_BITMASK, <span class="hljs-number">0</span>);  <span class="hljs-comment">// 0è¡¨ç¤ºæ‰€æœ‰ç½‘ç»œ</span>
    } <span class="hljs-keyword">else</span> {
        newRow.put(BEARER_BITMASK, (oldBearer | newBearer));  <span class="hljs-comment">// æŒ‰ä½æˆ–</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-17">ç¬¬å…­é˜¶æ®µï¼šOTAæ›´æ–°æœºåˆ¶</h3>
<h4 data-id="heading-18">6.1 ç³»ç»Ÿæ›´æ–°å®‰è£…</h4>
<p>OTAæ›´æ–°å¯ä»¥æ¨é€æ–°çš„APNé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ApnDbInstallReceiver.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApnDbInstallReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ConfigUpdateInstallReceiver</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ApnDbInstallReceiver</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"/data/misc/apns/"</span>,      <span class="hljs-comment">// å®‰è£…ç›®å½•</span>
              <span class="hljs-string">"apns-conf.xml"</span>,          <span class="hljs-comment">// æ–‡ä»¶å</span>
              <span class="hljs-string">"metadata/"</span>,              <span class="hljs-comment">// å…ƒæ•°æ®ç›®å½•</span>
              <span class="hljs-string">"version"</span>);               <span class="hljs-comment">// ç‰ˆæœ¬æ–‡ä»¶</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postInstall</span><span class="hljs-params">(Context context, Intent intent)</span> {
        <span class="hljs-comment">// å®‰è£…åè§¦å‘æ•°æ®åº“æ›´æ–°</span>
        <span class="hljs-type">ContentResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> context.getContentResolver();
        resolver.delete(UPDATE_APN_DB, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);  <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-19">ç¬¬ä¸ƒé˜¶æ®µï¼šåº”ç”¨æŸ¥è¯¢APN</h3>
<h4 data-id="heading-20">7.1 é€šè¿‡ContentProvideræŸ¥è¯¢</h4>
<p>åº”ç”¨ç¨‹åºé€šè¿‡æ ‡å‡†ContentProvideræŸ¥è¯¢APNï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ä»£ç </span>
<span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> resolver.query(
    Telephony.Carriers.CONTENT_URI,
    <span class="hljs-literal">null</span>,
    Telephony.Carriers.NUMERIC + <span class="hljs-string">"=?"</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"31004"</span>},  <span class="hljs-comment">// MCC+MNC</span>
    <span class="hljs-literal">null</span>
);

<span class="hljs-comment">// è·å–ç‰¹å®šMNCçš„æ‰€æœ‰APN</span>
<span class="hljs-keyword">while</span> (cursor.moveToNext()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">apn</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(Telephony.Carriers.APN));
    <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(Telephony.Carriers.TYPE));
    <span class="hljs-type">String</span> <span class="hljs-variable">mmsc</span> <span class="hljs-operator">=</span> cursor.getString(cursor.getColumnIndex(Telephony.Carriers.MMSC));
}
</code></pre>
<h4 data-id="heading-21">7.2 ä¼˜å…ˆçº§é€‰æ‹©</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ContentProvideræ”¯æŒæŸ¥è¯¢é¦–é€‰APN</span>
<span class="hljs-comment">// è¡¨ä¸­æœ‰preferredå­—æ®µï¼Œå€¼ä¸º1çš„APNè¢«è§†ä¸ºé¦–é€‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-22">æ•°æ®åº“å­˜å‚¨ç»“æ„</h3>
<p>APNæ•°æ®å­˜å‚¨åœ¨<code>carriers</code>è¡¨ä¸­ï¼š</p>







































































































































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>_id</td><td>INTEGER PRIMARY KEY</td><td>è¡ŒID</td></tr><tr><td>numeric</td><td>TEXT</td><td>MCC+MNC</td></tr><tr><td>mcc</td><td>TEXT</td><td>Mobile Country Code</td></tr><tr><td>mnc</td><td>TEXT</td><td>Mobile Network Code</td></tr><tr><td>apn</td><td>TEXT</td><td>æ¥å…¥ç‚¹åç§°</td></tr><tr><td>name</td><td>TEXT</td><td>è¿è¥å•†åç§°</td></tr><tr><td>proxy</td><td>TEXT</td><td>ä»£ç†åœ°å€</td></tr><tr><td>port</td><td>TEXT</td><td>ä»£ç†ç«¯å£</td></tr><tr><td>mmsproxy</td><td>TEXT</td><td>MMSä»£ç†</td></tr><tr><td>mmsport</td><td>TEXT</td><td>MMSç«¯å£</td></tr><tr><td>mmsc</td><td>TEXT</td><td>MMSä¸­å¿ƒURL</td></tr><tr><td>user</td><td>TEXT</td><td>ç”¨æˆ·å</td></tr><tr><td>password</td><td>TEXT</td><td>å¯†ç </td></tr><tr><td>server</td><td>TEXT</td><td>æœåŠ¡å™¨</td></tr><tr><td>type</td><td>TEXT</td><td>APNç±»å‹</td></tr><tr><td>protocol</td><td>TEXT</td><td>åè®®</td></tr><tr><td>roaming_protocol</td><td>TEXT</td><td>æ¼«æ¸¸åè®®</td></tr><tr><td>authtype</td><td>INTEGER</td><td>è®¤è¯ç±»å‹ (0-PAP, 1-CHAP, 3-PAP/CHAP)</td></tr><tr><td>bearer_bitmask</td><td>INTEGER</td><td>ç½‘ç»œæŠ€æœ¯ä½æ©ç </td></tr><tr><td>network_type_bitmask</td><td>INTEGER</td><td>ç½‘ç»œç±»å‹ä½æ©ç </td></tr><tr><td>edited</td><td>INTEGER</td><td>ç¼–è¾‘çŠ¶æ€ (0-æœªç¼–è¾‘, 1-ç”¨æˆ·ç¼–è¾‘ç­‰)</td></tr><tr><td>user_editable</td><td>BOOLEAN</td><td>ç”¨æˆ·æ˜¯å¦å¯ç¼–è¾‘</td></tr><tr><td>user_visible</td><td>BOOLEAN</td><td>ç”¨æˆ·æ˜¯å¦å¯è§</td></tr><tr><td>carrier_enabled</td><td>BOOLEAN</td><td>æ˜¯å¦å¯ç”¨</td></tr><tr><td>modem_cognitive</td><td>BOOLEAN</td><td>ModemæŒä¹…åŒ–</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-23">APNç±»å‹è¯¦è§£</h3>
<pre><code class="hljs language-scss" lang="scss">default      - é»˜è®¤æ•°æ®è¿æ¥
mms          - å½©ä¿¡(MMS)
supl         - <span class="hljs-selector-tag">A</span>-GPS (Assisted GPS)
hipri        - é«˜ä¼˜å…ˆçº§æ•°æ®è¿æ¥
fota         - Firmware Over-The-Airæ›´æ–°
ims          - IP Multimedia Subsystem
ia           - Initial Attach (åˆå§‹é™„ç€)
dun          - Dial-Up Networking
cbs          - Carrier Branded Services
</code></pre>
<hr/>
<h3 data-id="heading-24">å®Œæ•´çš„APNåŠ è½½æ—¶åº</h3>
<pre><code class="hljs language-scss" lang="scss">å¯åŠ¨æ—¶åºï¼š
â”‚
â”œâ”€ <span class="hljs-selector-attr">[1]</span> TelephonyProvider<span class="hljs-selector-class">.onCreate</span>()
â”‚    â””â”€â†’ DatabaseHelper<span class="hljs-selector-class">.getReadableDatabase</span>()
â”‚
â”œâ”€ <span class="hljs-selector-attr">[2]</span> æ£€æŸ¥æ ¡éªŒå’Œ
â”‚    â””â”€â†’ <span class="hljs-built_in">apnDbUpdateNeeded</span>()?
â”‚
â”œâ”€ <span class="hljs-selector-attr">[3]</span> å¦‚æœéœ€è¦æ›´æ–°ï¼Œæ‰§è¡Œ<span class="hljs-built_in">initDatabase</span>()
â”‚    â”‚
â”‚    â”œâ”€ åŠ è½½ç³»ç»Ÿå†…ç½®APN
â”‚    â”‚  â””â”€â†’ Resources<span class="hljs-selector-class">.getXml</span>(R.xml.apns)
â”‚    â”‚
â”‚    â”œâ”€ åŠ è½½å¤–éƒ¨APNé…ç½®
â”‚    â”‚  â””â”€â†’ <span class="hljs-built_in">getApnConfFile</span>() (ä¼˜å…ˆé€‰æ‹©æœ€æ–°çš„)
â”‚    â”‚      â”œâ”€ /data/misc/apns/apns-conf<span class="hljs-selector-class">.xml</span> (OTA)
â”‚    â”‚      â”œâ”€ /product/etc/apns-conf<span class="hljs-selector-class">.xml</span>
â”‚    â”‚      â”œâ”€ /oem/telephony/apns-conf<span class="hljs-selector-class">.xml</span>
â”‚    â”‚      â””â”€ /system/etc/apns-conf<span class="hljs-selector-class">.xml</span>
â”‚    â”‚
â”‚    â”œâ”€ äº‹åŠ¡åŒ–æ’å…¥æ•°æ®åº“
â”‚    â”‚  â””â”€â†’ <span class="hljs-built_in">loadApns</span>(db, parser)
â”‚    â”‚      â”œâ”€ <span class="hljs-built_in">getRow</span>() è§£ææ¯æ¡APN
â”‚    â”‚      â””â”€ <span class="hljs-built_in">insertAddingDefaults</span>() æ’å…¥æˆ–åˆå¹¶
â”‚    â”‚
â”‚    â””â”€ æ¸…ç†å·²åˆ é™¤çš„APN
â”‚        â””â”€â†’ åˆ é™¤USER_DELETED/CARRIER_DELETED
â”‚
â”œâ”€ <span class="hljs-selector-attr">[4]</span> æ›´æ–°æ ¡éªŒå’Œ
â”‚    â””â”€â†’ <span class="hljs-built_in">setApnConfChecksum</span>()
â”‚
â””â”€ <span class="hljs-selector-attr">[5]</span> åº”ç”¨ç¨‹åºå¯ä»¥æŸ¥è¯¢APN
     â””â”€â†’ ContentProvideræŸ¥è¯¢
</code></pre>
<hr/>
<h3 data-id="heading-25">å…³é”®è®¾è®¡ç‚¹</h3>
<ol>
<li><strong>å¤šæºæ”¯æŒ</strong> - æ”¯æŒç³»ç»Ÿã€OEMã€Productã€OTAç­‰å¤šä¸ªæ¥æº</li>
<li><strong>ç‰ˆæœ¬æ ¡éªŒ</strong> - å†…ç½®ç‰ˆæœ¬å¿…é¡»ä¸å¤–éƒ¨ç‰ˆæœ¬ä¸€è‡´</li>
<li><strong>æ™ºèƒ½åˆå¹¶</strong> - æ–°æ—§APNå†²çªæ—¶æ™ºèƒ½åˆå¹¶è€Œä¸æ˜¯è¦†ç›–</li>
<li><strong>ç¼–è¾‘è·Ÿè¸ª</strong> - åŒºåˆ†ç”¨æˆ·ç¼–è¾‘ã€è¿è¥å•†ç¼–è¾‘å’Œç³»ç»ŸAPN</li>
<li><strong>æ ¡éªŒå’Œä¼˜åŒ–</strong> - é¿å…æ— å¿…è¦çš„æ•°æ®åº“é‡æ–°åŠ è½½</li>
<li><strong>äº‹åŠ¡ä¿è¯</strong> - ç¡®ä¿APNåŠ è½½çš„åŸå­æ€§</li>
<li><strong>å‘åå…¼å®¹</strong> - æ•°æ®åº“å‡çº§æ—¶ä¿ç•™ç”¨æˆ·å’Œè¿è¥å•†ç¼–è¾‘</li>
</ol>
<p>è¿™å°±æ˜¯Androidç³»ç»Ÿçš„å®Œæ•´APNåŠ è½½æœºåˆ¶ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Telephonyé€šè¯çŠ¶æ€æ›´æ–°æ¶ˆæ¯ä¸ŠæŠ¥æµç¨‹]]></title>    <link>https://juejin.cn/post/7603288778678812707</link>    <guid>https://juejin.cn/post/7603288778678812707</guid>    <pubDate>2026-02-06T04:29:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603288778678812707" data-draft-id="7603283380554530850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Telephonyé€šè¯çŠ¶æ€æ›´æ–°æ¶ˆæ¯ä¸ŠæŠ¥æµç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T04:29:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Telephonyé€šè¯çŠ¶æ€æ›´æ–°æ¶ˆæ¯ä¸ŠæŠ¥æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T04:29:07.000Z" title="Fri Feb 06 2026 04:29:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ¥è¯¦ç»†åˆ†æAndroid Telephonyä¸­é€šè¯çŠ¶æ€æ›´æ–°æ¶ˆæ¯çš„ä¸ŠæŠ¥æµç¨‹ã€‚</p>
<p>ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ›´å¤šATæŒ‡ä»¤çš„å¤„ç†å’Œä¸ŠæŠ¥æµç¨‹ï¼š</p>
<p>ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ›´å¤šå…³äºATå‘½ä»¤å¤„ç†å’Œè½®è¯¢çš„ç»†èŠ‚ï¼š</p>
<p>ç°åœ¨è®©æˆ‘æŸ¥çœ‹frameworkså±‚çš„å¤„ç†ï¼Œä»¥äº†è§£å®Œæ•´çš„ä¸ŠæŠ¥æµç¨‹ï¼š</p>
<p>åŸºäºæˆ‘å¯¹ä»£ç çš„åˆ†æï¼Œè¿™ä¸ªæµç¨‹æ¶‰åŠå¤šä¸ªå±‚æ¬¡çš„äº¤äº’ï¼Œæˆ‘å°†è¯¦ç»†è®²è§£ä»Modemåˆ°ä¸Šå±‚åº”ç”¨çš„å®Œæ•´è·¯å¾„ã€‚</p>
<h3 data-id="heading-0">æ•´ä½“æ¶æ„æ¦‚è§ˆ</h3>
<p>é€šè¯çŠ¶æ€æ›´æ–°çš„ä¸ŠæŠ¥æµç¨‹åŒ…æ‹¬ä»¥ä¸‹ä¸»è¦ç¯èŠ‚ï¼š</p>
<pre><code class="hljs">Modem â†’ HAL â†’ RIL Framework â†’ HIDL Service â†’ Java Framework â†’ Phone/CallTracker â†’ Application
</code></pre>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šModemç«¯çš„ä¸»åŠ¨ä¸ŠæŠ¥</h3>
<h4 data-id="heading-2">1.1 Modemä¸»åŠ¨ä¸ŠæŠ¥ï¼ˆUnsolicited Responseï¼‰</h4>
<p>Modemåœ¨é€šè¯çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸»åŠ¨å‘åŸºå¸¦é©±åŠ¨å‘é€æœªç»è¯·æ±‚çš„å›å¤ä¿¡æ¯ã€‚å¸¸è§çš„ä¸»åŠ¨ä¸ŠæŠ¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>RING</strong>: æ¥ç”µé“ƒå£°æŒ‡ç¤º</li>
<li><strong>+CRING</strong>: GSMç‰¹å®šçš„é“ƒå£°æ ¼å¼ï¼ˆå¦‚"VOICE"ï¼‰</li>
<li><strong>NO CARRIER</strong>: é€šè¯ç»“æŸï¼Œè½½æ³¢æ¶ˆå¤±</li>
<li><strong>+CCWA</strong>: æ¥ç”µç­‰å¾…æŒ‡ç¤º</li>
<li><strong>+CREG</strong>: ç½‘ç»œæ³¨å†ŒçŠ¶æ€å˜åŒ–</li>
<li><strong>+CGREG</strong>: GPRSç½‘ç»œæ³¨å†ŒçŠ¶æ€å˜åŒ–</li>
</ul>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// reference-ril.c: 3490-3497 è¡Œ</span>
<span class="hljs-comment">// å½“Modemå‘æ¥ä¸Šè¿°æŒ‡ç¤ºæ—¶ï¼ŒReference RILè§£æå¹¶ä¸ŠæŠ¥</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strStartsWith(s,<span class="hljs-string">"+CRING:"</span>)
            || strStartsWith(s,<span class="hljs-string">"RING"</span>)
            || strStartsWith(s,<span class="hljs-string">"NO CARRIER"</span>)
            || strStartsWith(s,<span class="hljs-string">"+CCWA"</span>)
) {
    RIL_onUnsolicitedResponse (
        RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED,
        <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-3">ç¬¬äºŒé˜¶æ®µï¼šVendor RILå¤„ç†</h3>
<h4 data-id="heading-4">2.1 Vendor RILçš„ATæŒ‡ä»¤å¤„ç†</h4>
<p>Vendor RILè¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤å¤„ç†Modemçš„ä¸»åŠ¨ä¸ŠæŠ¥ï¼š</p>
<ol>
<li><strong>AT Readerçº¿ç¨‹</strong> æŒç»­ä»Modemè¯»å–æ•°æ®</li>
<li><strong>æœªç»è¯·æ±‚çš„å“åº”å¤„ç†</strong> (<code>onUnsolicitedResponse</code>å›è°ƒ)</li>
<li><strong>è°ƒç”¨RIL_onUnsolicitedResponse</strong>å°†æ¶ˆæ¯ä¸ŠæŠ¥ç»™RIL Framework</li>
</ol>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// reference-ril.c: 3490-3497</span>
<span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">onUnsolicited</span> <span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *s, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *sms_pdu)</span>
{
    <span class="hljs-comment">// ... è§£æATæŒ‡ä»¤ ...</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (strStartsWith(s,<span class="hljs-string">"+CRING:"</span>)
                || strStartsWith(s,<span class="hljs-string">"RING"</span>)
                || strStartsWith(s,<span class="hljs-string">"NO CARRIER"</span>)
                || strStartsWith(s,<span class="hljs-string">"+CCWA"</span>)
    ) {
        RIL_onUnsolicitedResponse (
            RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED,
            <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-5">ç¬¬ä¸‰é˜¶æ®µï¼šRIL Frameworkå¤„ç†</h3>
<h4 data-id="heading-6">3.1 RIL_onUnsolicitedResponseå‡½æ•°</h4>
<p>è¿™æ˜¯RIL Frameworkçš„æ ¸å¿ƒå¤„ç†å‡½æ•°ï¼Œåœ¨<code>libril/ril.cpp</code>ä¸­å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ril.cpp: 722-729 è¡Œ</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">RIL_onUnsolicitedResponse</span><span class="hljs-params">(<span class="hljs-type">int</span> unsolResponse, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *data,
                                <span class="hljs-type">size_t</span> datalen, RIL_SOCKET_ID socket_id)</span>
</span></code></pre>
<p><strong>ä¸»è¦å¤„ç†æ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p><strong>Wakelockç®¡ç†</strong> - æ ¹æ®æ¶ˆæ¯ç±»å‹è·å–Partial Wakelockï¼Œé˜²æ­¢CPUä¼‘çœ </p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ril.cpp: 757-761 è¡Œ</span>
<span class="hljs-keyword">switch</span> (s_unsolResponses[unsolResponseIndex].wakeType) {
    <span class="hljs-keyword">case</span> WAKE_PARTIAL:
        <span class="hljs-built_in">grabPartialWakeLock</span>();
        shouldScheduleTimeout = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">break</span>;
}
</code></pre>
</li>
<li>
<p><strong>HIDLæŒ‡ç¤ºåˆ†å‘</strong> - é€šè¿‡HIDLæ¥å£å°†æ¶ˆæ¯è½¬å‘ç»™ä¸Šå±‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ril.cpp: 793-797 è¡Œ</span>
<span class="hljs-keyword">if</span> (s_unsolResponses[unsolResponseIndex].responseFunction) {
    ret = s_unsolResponses[unsolResponseIndex].<span class="hljs-built_in">responseFunction</span>(
            (<span class="hljs-type">int</span>) soc_id, responseType, <span class="hljs-number">0</span>, RIL_E_SUCCESS, 
            <span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">void</span>*&gt;(data), datalen);
}
</code></pre>
</li>
<li>
<p><strong>Wakelocké‡Šæ”¾</strong> - è®¾ç½®è¶…æ—¶åé‡Šæ”¾Wakelockï¼ˆé»˜è®¤200msï¼‰</p>
</li>
</ol>
<h4 data-id="heading-7">3.2 æœªç»è¯·æ±‚å“åº”æ˜ å°„è¡¨</h4>
<p>åœ¨<code>ril_unsol_commands.h</code>ä¸­å®šä¹‰äº†æ¶ˆæ¯ç±»å‹åˆ°å¤„ç†å‡½æ•°çš„æ˜ å°„ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ril_unsol_commands.h: 17-19 è¡Œ</span>
{RIL_UNSOL_RESPONSE_RADIO_STATE_CHANGED, radio::radioStateChangedInd, WAKE_PARTIAL},
{RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED, radio::callStateChangedInd, WAKE_PARTIAL},
{RIL_UNSOL_RESPONSE_VOICE_NETWORK_STATE_CHANGED, radio::networkStateChangedInd, WAKE_PARTIAL},
</code></pre>
<hr/>
<h3 data-id="heading-8">ç¬¬å››é˜¶æ®µï¼šHIDLæœåŠ¡å¤„ç†</h3>
<h4 data-id="heading-9">4.1 callStateChangedIndå‡½æ•°</h4>
<p>åœ¨<code>ril_service.cpp</code>ä¸­å®ç°HIDLæŒ‡ç¤ºå¤„ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ril_service.cpp: 6758-6773 è¡Œ</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">radio::callStateChangedInd</span><span class="hljs-params">(<span class="hljs-type">int</span> slotId,
                               <span class="hljs-type">int</span> indicationType, <span class="hljs-type">int</span> token, RIL_Errno e, <span class="hljs-type">void</span> *response,
                               <span class="hljs-type">size_t</span> responseLen)</span> </span>{
    <span class="hljs-keyword">if</span> (radioService[slotId] != <span class="hljs-literal">NULL</span> &amp;&amp; radioService[slotId]-&gt;mRadioIndication != <span class="hljs-literal">NULL</span>) {
        Return&lt;<span class="hljs-type">void</span>&gt; retStatus = radioService[slotId]-&gt;mRadioIndication-&gt;<span class="hljs-built_in">callStateChanged</span>(
                <span class="hljs-built_in">convertIntToRadioIndicationType</span>(indicationType));
        radioService[slotId]-&gt;<span class="hljs-built_in">checkReturnStatus</span>(retStatus);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>è·å–å¯¹åº”Slotçš„HIDL Indicationå®ä¾‹</li>
<li>è°ƒç”¨HIDLæ¥å£çš„<code>callStateChanged</code>æ–¹æ³•</li>
<li>å°†æ¶ˆæ¯è½¬å‘ç»™Javaå±‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç¬¬äº”é˜¶æ®µï¼šJava Frameworkå¤„ç†</h3>
<h4 data-id="heading-11">5.1 VoiceIndicationæ¥æ”¶</h4>
<p>åœ¨<code>VoiceIndication.java</code>çš„<code>callStateChanged</code>æ–¹æ³•ä¸­å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// VoiceIndication.java: 94-99 è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callStateChanged</span><span class="hljs-params">(<span class="hljs-type">int</span> indicationType)</span> {
    mRil.processIndication(HAL_SERVICE_VOICE, indicationType);

    <span class="hljs-keyword">if</span> (mRil.isLogOrTrace()) mRil.unsljLog(RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED);

    mRil.mCallStateRegistrants.notifyRegistrants();
}
</code></pre>
<p><strong>å¤„ç†æµç¨‹ï¼š</strong></p>
<ol>
<li>å¤„ç†æŒ‡ç¤ºç±»å‹ï¼ˆæ ‡è®°ä¸ºå·²å¤„ç†ï¼‰</li>
<li>è®°å½•æ—¥å¿—</li>
<li><strong>é€šçŸ¥æ‰€æœ‰å·²æ³¨å†Œçš„ç›‘å¬è€…</strong></li>
</ol>
<h4 data-id="heading-12">5.2 CallStateRegistrantsé€šçŸ¥</h4>
<p><code>mCallStateRegistrants</code>æ˜¯ä¸€ä¸ª<code>RegistrantList</code>ï¼ŒåŒ…å«æ‰€æœ‰å¯¹é€šè¯çŠ¶æ€å˜åŒ–æ„Ÿå…´è¶£çš„ç›‘å¬è€…ï¼ˆå¦‚<code>GsmCdmaCallTracker</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// BaseCommands.java: 292-294 è¡Œ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerForCallStateChanged</span><span class="hljs-params">(Handler h, <span class="hljs-type">int</span> what, Object obj)</span> {
    mCallStateRegistrants.addUnique(h, what, obj);
}
</code></pre>
<p>GsmCdmaCallTrackeråœ¨åˆå§‹åŒ–æ—¶æ³¨å†Œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 160-171 è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">GsmCdmaCallTracker</span><span class="hljs-params">(GsmCdmaPhone phone, FeatureFlags featureFlags)</span> {
    <span class="hljs-comment">// ...</span>
    mCi = phone.mCi;
    mCi.registerForCallStateChanged(<span class="hljs-built_in">this</span>, EVENT_CALL_STATE_CHANGE, <span class="hljs-literal">null</span>);
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-13">ç¬¬å…­é˜¶æ®µï¼šCallTrackerè½®è¯¢å½“å‰é€šè¯åˆ—è¡¨</h3>
<h4 data-id="heading-14">6.1 è§¦å‘getCurrentCallsè¯·æ±‚</h4>
<p>å½“æ¥æ”¶åˆ°<code>EVENT_CALL_STATE_CHANGE</code>æ¶ˆæ¯æ—¶ï¼ŒGsmCdmaCallTrackerä¸ä¼šç›´æ¥ä½¿ç”¨è¯¥æ¶ˆæ¯ï¼Œè€Œæ˜¯<strong>ä¸»åŠ¨è½®è¯¢</strong>å½“å‰çš„é€šè¯åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CallTracker.java: 91-98 è¡Œ</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pollCallsWhenSafe</span><span class="hljs-params">()</span> {
    mNeedsPoll = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">if</span> (checkNoOperationsPending()) {
        mLastRelevantPoll = obtainMessage(EVENT_POLL_CALLS_RESULT);
        mCi.getCurrentCalls(mLastRelevantPoll);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è½®è¯¢ï¼Ÿ</strong></p>
<ul>
<li>Modemä¸ŠæŠ¥çš„åªæ˜¯"çŠ¶æ€æœ‰å˜åŒ–"çš„ä¿¡å·ï¼Œä¸åŒ…å«å…·ä½“çš„é€šè¯åˆ—è¡¨æ•°æ®</li>
<li>å¿…é¡»é€šè¿‡AT+CLCCå‘½ä»¤ä¸»åŠ¨æŸ¥è¯¢å½“å‰çš„é€šè¯è¯¦æƒ…</li>
</ul>
<h4 data-id="heading-15">6.2 RIL.getCurrentCallsè¯·æ±‚</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// RIL.java: 1640-1655 è¡Œ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getCurrentCalls</span><span class="hljs-params">(Message result)</span> {
    <span class="hljs-type">RadioVoiceProxy</span> <span class="hljs-variable">voiceProxy</span> <span class="hljs-operator">=</span> getRadioServiceProxy(RadioVoiceProxy.class);
    <span class="hljs-keyword">if</span> (!canMakeRequest(<span class="hljs-string">"getCurrentCalls"</span>, voiceProxy, result, RADIO_HAL_VERSION_1_4)) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-type">RILRequest</span> <span class="hljs-variable">rr</span> <span class="hljs-operator">=</span> obtainRequest(RIL_REQUEST_GET_CURRENT_CALLS, result, mRILDefaultWorkSource);

    <span class="hljs-keyword">if</span> (RILJ_LOGD) {
        riljLog(rr.serialString() + <span class="hljs-string">"&gt; "</span> + RILUtils.requestToString(rr.mRequest));
    }

    radioServiceInvokeHelper(HAL_SERVICE_VOICE, rr, <span class="hljs-string">"getCurrentCalls"</span>, () -&gt; {
        voiceProxy.getCurrentCalls(rr.mSerial);
    });
}
</code></pre>
<hr/>
<h3 data-id="heading-16">ç¬¬ä¸ƒé˜¶æ®µï¼šè§£æé€šè¯åˆ—è¡¨</h3>
<h4 data-id="heading-17">7.1 Modemå“åº”getCurrentCalls</h4>
<p>Modemå“åº”AT+CLCCå‘½ä»¤ï¼Œè¿”å›å½“å‰é€šè¯åˆ—è¡¨ã€‚æ¯æ¡é€šè¯çš„æ ¼å¼ä¸ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml">+CLCC: <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>,<span class="hljs-tag">&lt;<span class="hljs-name">dir</span>&gt;</span>,<span class="hljs-tag">&lt;<span class="hljs-name">stat</span>&gt;</span>,<span class="hljs-tag">&lt;<span class="hljs-name">bearer</span>&gt;</span>,<span class="hljs-tag">&lt;<span class="hljs-name">mpty</span>&gt;</span>[,<span class="hljs-tag">&lt;<span class="hljs-name">number</span>&gt;</span>,<span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>[,<span class="hljs-tag">&lt;<span class="hljs-name">alpha</span>&gt;</span>]]
</code></pre>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">+<span class="hljs-built_in">CLCC</span>: <span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-string">"10086"</span>,<span class="hljs-number">129</span>
+<span class="hljs-built_in">CLCC</span>: <span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>
</code></pre>
<h4 data-id="heading-18">7.2 handlePollCallså¤„ç†ç»“æœ</h4>
<p>å½“RILè¿”å›é€šè¯åˆ—è¡¨åï¼Œ<code>handlePollCalls</code>åœ¨<code>GsmCdmaCallTracker</code>ä¸­å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 848-863 è¡Œ</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlePollCalls</span><span class="hljs-params">(AsyncResult ar)</span> {
    List polledCalls;

    <span class="hljs-keyword">if</span> (VDBG) log(<span class="hljs-string">"handlePollCalls"</span>);
    <span class="hljs-keyword">if</span> (ar.exception == <span class="hljs-literal">null</span>) {
        polledCalls = (List)ar.result;  <span class="hljs-comment">// DriverCallåˆ—è¡¨</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isCommandExceptionRadioNotAvailable(ar.exception)) {
        polledCalls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();
    } <span class="hljs-keyword">else</span> {
        pollCallsAfterDelay();
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// ... å¤„ç†é€šè¯åˆ—è¡¨ ...</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-19">ç¬¬å…«é˜¶æ®µï¼šæ›´æ–°é€šè¯çŠ¶æ€å’Œé€šçŸ¥ä¸Šå±‚</h3>
<h4 data-id="heading-20">8.1 éå†å¹¶æ›´æ–°é€šè¯å¯¹è±¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 878-1070 è¡Œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, curDC = <span class="hljs-number">0</span>, dcSize = polledCalls.size(); i &lt; mConnections.length; i++) {
    <span class="hljs-type">GsmCdmaConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> mConnections[i];
    <span class="hljs-type">DriverCall</span> <span class="hljs-variable">dc</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// è·å–Modemè¿”å›çš„é€šè¯ä¿¡æ¯</span>
    <span class="hljs-keyword">if</span> (curDC &lt; dcSize) {
        dc = (DriverCall) polledCalls.get(curDC);
        <span class="hljs-keyword">if</span> (dc.index == i+<span class="hljs-number">1</span>) {
            curDC++;
        } <span class="hljs-keyword">else</span> {
            dc = <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-comment">// æ¯”è¾ƒæœ¬åœ°è®°å½•å’ŒModemçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (conn == <span class="hljs-literal">null</span> &amp;&amp; dc != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ–°é€šè¯å‡ºç° - åˆ›å»ºæ–°çš„GsmCdmaConnection</span>
        mConnections[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GsmCdmaConnection</span>(mPhone, dc, <span class="hljs-built_in">this</span>, i);
        newRinging = checkMtFindNewRinging(dc, i);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span> &amp;&amp; dc == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// é€šè¯å·²è¢«åˆ é™¤ - æ ‡è®°ä¸ºå·²ä¸¢å¼ƒ</span>
        mDroppedDuringPoll.add(conn);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span> &amp;&amp; dc != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// é€šè¯å­˜åœ¨ï¼Œæ›´æ–°å…¶çŠ¶æ€</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">changed</span> <span class="hljs-operator">=</span> conn.update(dc);
        hasNonHangupStateChanged = hasNonHangupStateChanged || changed;
    }
}
</code></pre>
<h4 data-id="heading-21">8.2 æ›´æ–°PhoneçŠ¶æ€</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 1201-1202 è¡Œ</span>
updatePhoneState();
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æ ¹æ®é€šè¯åˆ—è¡¨ç¡®å®šPhoneçš„æ€»ä½“çŠ¶æ€ï¼ˆIDLEã€RINGINGã€OFFHOOKï¼‰ã€‚</p>
<h4 data-id="heading-22">8.3 é€šçŸ¥ç›‘å¬è€…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 1215-1218 è¡Œ</span>
<span class="hljs-keyword">if</span> (hasNonHangupStateChanged || newRinging != <span class="hljs-literal">null</span> || hasAnyCallDisconnected) {
    mPhone.notifyPreciseCallStateChanged();
    updateMetrics(mConnections);
}
</code></pre>
<hr/>
<h3 data-id="heading-23">ç¬¬ä¹é˜¶æ®µï¼šä¸Šå±‚åº”ç”¨æ„ŸçŸ¥</h3>
<h4 data-id="heading-24">9.1 Phoneå±‚çš„é€šçŸ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 1117 è¡Œ</span>
<span class="hljs-keyword">if</span> (newRinging != <span class="hljs-literal">null</span>) {
    mPhone.notifyNewRingingConnection(newRinging);
}
</code></pre>
<p>é€šçŸ¥Phoneæœ‰æ–°çš„æ¥ç”µã€‚</p>
<h4 data-id="heading-25">9.2 åº”ç”¨å±‚æ„ŸçŸ¥</h4>
<p>åº”ç”¨ç¨‹åºé€šè¿‡ä»¥ä¸‹æ–¹å¼æ„ŸçŸ¥é€šè¯çŠ¶æ€å˜åŒ–ï¼š</p>
<ol>
<li><strong>TelephonyCallbackç›‘å¬</strong> ï¼ˆæ¨èæ–¹å¼ï¼‰</li>
<li><strong>PhoneStateListener</strong> ï¼ˆå·²åºŸå¼ƒï¼‰</li>
<li><strong>TelephonyRegistry</strong> ï¼ˆç³»ç»Ÿçº§é€šçŸ¥ï¼‰</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº”ç”¨å±‚ä»£ç ç¤ºä¾‹</span>
<span class="hljs-type">TelephonyManager</span> <span class="hljs-variable">tm</span> <span class="hljs-operator">=</span> context.getSystemService(TelephonyManager.class);
tm.registerTelephonyCallback(executor, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TelephonyCallback</span>.CallStateListener() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCallStateChanged</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span> {
        <span class="hljs-comment">// å¤„ç†é€šè¯çŠ¶æ€å˜åŒ–</span>
    }
});
</code></pre>
<hr/>
<h2 data-id="heading-26">å®Œæ•´çš„æ¶ˆæ¯æµæ—¶åºå›¾</h2>
<pre><code class="hljs language-scss" lang="scss">æ—¶é—´è½´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚
â”œâ”€ <span class="hljs-selector-attr">[1]</span> Modemæ£€æµ‹åˆ°é€šè¯çŠ¶æ€å˜åŒ–
â”‚       â””â”€â†’ å‘é€æœªç»è¯·æ±‚çš„å›å¤ (RING, NO CARRIER, etc.)
â”‚
â”œâ”€ <span class="hljs-selector-attr">[2]</span> Vendor RILæ¥æ”¶ATæŒ‡ç¤º
â”‚       â””â”€â†’ è°ƒç”¨ <span class="hljs-built_in">RIL_onUnsolicitedResponse</span>()
â”‚
â”œâ”€ <span class="hljs-selector-attr">[3]</span> RIL Frameworkå¤„ç†
â”‚       â”œâ”€â†’ è·å–Partial Wakelock
â”‚       â””â”€â†’ è°ƒç”¨HIDL response handler (callStateChangedInd)
â”‚
â”œâ”€ <span class="hljs-selector-attr">[4]</span> HIDL Serviceè½¬å‘
â”‚       â””â”€â†’ RadioIndication<span class="hljs-selector-class">.callStateChanged</span>() (AIDL)
â”‚
â”œâ”€ <span class="hljs-selector-attr">[5]</span> Java Frameworkæ¥æ”¶
â”‚       â””â”€â†’ VoiceIndication<span class="hljs-selector-class">.callStateChanged</span>()
â”‚           â””â”€â†’ RIL<span class="hljs-selector-class">.mCallStateRegistrants</span><span class="hljs-selector-class">.notifyRegistrants</span>()
â”‚
â”œâ”€ <span class="hljs-selector-attr">[6]</span> CallTrackeræ„ŸçŸ¥çŠ¶æ€å˜åŒ–
â”‚       â””â”€â†’ EVENT_CALL_STATE_CHANGE handler
â”‚           â””â”€â†’ <span class="hljs-built_in">pollCallsWhenSafe</span>()
â”‚               â””â”€â†’ RIL<span class="hljs-selector-class">.getCurrentCalls</span>() <span class="hljs-selector-attr">[åŒæ­¥è½®è¯¢]</span>
â”‚
â”œâ”€ <span class="hljs-selector-attr">[7]</span> Modemè¿”å›é€šè¯åˆ—è¡¨
â”‚       â””â”€â†’ AT+CLCCå“åº” (å¤šæ¡+CLCCè¡Œ)
â”‚
â”œâ”€ <span class="hljs-selector-attr">[8]</span> GsmCdmaCallTrackerå¤„ç†
â”‚       â”œâ”€â†’ EVENT_POLL_CALLS_RESULT handler
â”‚       â”œâ”€â†’ <span class="hljs-built_in">handlePollCalls</span>(AsyncResult ar)
â”‚       â”œâ”€â†’ æ¯”è¾ƒå¹¶æ›´æ–°mConnections<span class="hljs-selector-attr">[]</span>æ•°ç»„
â”‚       â”œâ”€â†’ <span class="hljs-built_in">updatePhoneState</span>()
â”‚       â”œâ”€â†’ mPhone<span class="hljs-selector-class">.notifyPreciseCallStateChanged</span>()
â”‚       â””â”€â†’ mPhone<span class="hljs-selector-class">.notifyNewRingingConnection</span>()
â”‚
â”œâ”€ <span class="hljs-selector-attr">[9]</span> Phoneå±‚é€šçŸ¥
â”‚       â””â”€â†’ TelephonyRegistryå¹¿æ’­
â”‚           â””â”€â†’ é€šçŸ¥ç³»ç»ŸæœåŠ¡å’Œåº”ç”¨
â”‚
â””â”€ <span class="hljs-selector-attr">[10]</span> åº”ç”¨å±‚è·å¾—é€šè¯çŠ¶æ€æ›´æ–°
        â””â”€â†’ TelephonyCallback<span class="hljs-selector-class">.onCallStateChanged</span>()
</code></pre>
<hr/>
<h2 data-id="heading-27">å…³é”®æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-28">1. RIL_Call ç»“æ„ä½“</h3>
<p>å®šä¹‰å•ä¸ªé€šè¯çš„çŠ¶æ€ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ril.h</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
    <span class="hljs-type">int</span> index;              <span class="hljs-comment">// é€šè¯ç´¢å¼•</span>
    <span class="hljs-type">int</span> isMT;               <span class="hljs-comment">// 1=æ¥ç”µ, 0=å»ç”µ</span>
    RIL_CallState state;    <span class="hljs-comment">// é€šè¯çŠ¶æ€ (ACTIVE/HOLDING/DIALING/ç­‰)</span>
    <span class="hljs-type">int</span> mode;               <span class="hljs-comment">// é€šè¯æ¨¡å¼ (0=è¯­éŸ³, 1=æ•°æ®, ç­‰)</span>
    <span class="hljs-type">int</span> mpty;               <span class="hljs-comment">// 0=éå¤šæ–¹é€šè¯, 1=å¤šæ–¹é€šè¯</span>
    <span class="hljs-comment">// ... å…¶ä»–å­—æ®µ ...</span>
} RIL_Call;
</code></pre>
<h3 data-id="heading-29">2. DriverCall ç»“æ„ä½“ï¼ˆJavaç«¯ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DriverCall</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">State</span> {
        ACTIVE, HOLDING, DIALING, ALERTING, INCOMING, WAITING
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> index;
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> isMT;       <span class="hljs-comment">// Mobile Terminated (incoming)</span>
    <span class="hljs-keyword">public</span> State state;
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> number;
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> type;
    <span class="hljs-comment">// ... å…¶ä»–å­—æ®µ ...</span>
}
</code></pre>
<h3 data-id="heading-30">3. GsmCdmaConnection ç±»</h3>
<p>ä»£è¡¨ä¸€æ¡é€»è¾‘é€šè¯è¿æ¥ï¼Œç»´æŠ¤å…¶çŠ¶æ€ã€æ—¶é—´æˆ³ç­‰ä¿¡æ¯ã€‚</p>
<hr/>
<h2 data-id="heading-31">Wakelockæœºåˆ¶</h2>
<p>ä¸ºäº†é˜²æ­¢CPUå› æ¥æ”¶Unsolicited Responseè€Œè¿‡åº¦ä¼‘çœ /å”¤é†’ï¼ŒRIL Frameworké‡‡ç”¨äº†Wakelockæœºåˆ¶ï¼š</p>
<ol>
<li><strong>Unsolicited Responseåˆ°è¾¾æ—¶</strong> â†’ è·å–Partial Wakelock</li>
<li><strong>æ¶ˆæ¯å¤„ç†å®Œæˆå</strong> â†’ è®¾ç½®200msè¶…æ—¶</li>
<li><strong>è¶…æ—¶å</strong> â†’ é‡Šæ”¾Wakelockï¼Œå…è®¸CPUä¼‘çœ </li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ril.cpp: 700-718 è¡Œ</span>
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">wakeTimeoutCallback</span> <span class="hljs-params">(<span class="hljs-type">void</span> *param)</span> </span>{
    <span class="hljs-keyword">if</span> (s_callbacks.version &gt;= <span class="hljs-number">13</span>) {
        <span class="hljs-keyword">if</span> (param == <span class="hljs-literal">NULL</span>) {
            s_wakelock_count = <span class="hljs-number">0</span>;
            <span class="hljs-built_in">release_wake_lock</span>(ANDROID_WAKE_LOCK_NAME);
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-32">æ€§èƒ½ä¼˜åŒ–ç‚¹</h2>
<ol>
<li><strong>Partial Wakelock</strong> - åªå”¤é†’CPUï¼Œä¸ç‚¹äº®å±å¹•</li>
<li><strong>è½®è¯¢å»¶è¿Ÿ</strong> - å¯¹äºæœªå®ŒæˆçŠ¶æ€ï¼ˆDIALING/ALERTING/INCOMING/WAITINGï¼‰ï¼Œè®¾ç½®è½®è¯¢å»¶è¿Ÿï¼ˆé€šå¸¸500msï¼‰</li>
<li><strong>å»é‡æœºåˆ¶</strong> - å†—ä½™æˆ–é‡å¤çš„é€šè¯çŠ¶æ€æ¶ˆæ¯è¢«å®¹å¿ï¼ˆå¦‚æ–‡æ¡£ä¸­æ‰€è¯´ï¼‰</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong> - æ‰€æœ‰æ“ä½œéƒ½åœ¨RILäº‹ä»¶å¾ªç¯ä¸­å¼‚æ­¥è¿›è¡Œ</li>
</ol>
<hr/>
<h2 data-id="heading-33">å¼‚å¸¸å¤„ç†</h2>
<p>å½“Radioä¸å¯ç”¨æ—¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GsmCdmaCallTracker.java: 854-857 è¡Œ</span>
<span class="hljs-keyword">if</span> (ar.exception == <span class="hljs-literal">null</span>) {
    polledCalls = (List)ar.result;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isCommandExceptionRadioNotAvailable(ar.exception)) {
    polledCalls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();  <span class="hljs-comment">// æ¸…ç©ºé€šè¯åˆ—è¡¨</span>
} <span class="hljs-keyword">else</span> {
    pollCallsAfterDelay();  <span class="hljs-comment">// ç¨åé‡è¯•</span>
}
</code></pre>
<hr/>
<p>è¿™ä¸ªæµç¨‹å±•ç¤ºäº†Android Telephonyç³»ç»Ÿçš„é«˜åº¦åˆ†å±‚è®¾è®¡ï¼Œä»åº•å±‚Modemäº‹ä»¶åˆ°ä¸Šå±‚åº”ç”¨é€šçŸ¥ï¼Œæ¶‰åŠå¤šä¸ªè¿›ç¨‹é—´çš„é€šä¿¡å’ŒåŒæ­¥æœºåˆ¶ã€‚</p>
<p>æˆ‘å·²ç»ä¸ºä½ è¯¦ç»†æ€»ç»“äº†<strong>Android Telephonyé€šè¯çŠ¶æ€æ›´æ–°æ¶ˆæ¯çš„å®Œæ•´ä¸ŠæŠ¥æµç¨‹</strong>ã€‚è¿™ä¸ªåˆ†ææ¶µç›–äº†ä»Modemåº•å±‚åˆ°ä¸Šå±‚åº”ç”¨çš„9ä¸ªå…³é”®é˜¶æ®µï¼š</p>
<h2 data-id="heading-34">æ ¸å¿ƒè¦ç‚¹é€Ÿè§ˆï¼š</h2>
<ol>
<li><strong>Modemä¸»åŠ¨ä¸ŠæŠ¥</strong> - å‘é€RING/NO CARRIERç­‰æœªç»è¯·æ±‚çš„å›å¤</li>
<li><strong>Vendor RILå¤„ç†</strong> - è§£æATæŒ‡ä»¤ï¼Œè°ƒç”¨RIL_onUnsolicitedResponse</li>
<li><strong>RIL Framework</strong> - è·å–Wakelockï¼Œé€šè¿‡HIDLè½¬å‘æ¶ˆæ¯</li>
<li><strong>HIDL Service</strong> - å°†C++æ¶ˆæ¯è½¬æ¢ä¸ºJava AIDLè°ƒç”¨</li>
<li><strong>Java Framework</strong> - VoiceIndicationé€šçŸ¥CallStateRegistrants</li>
<li><strong>CallTrackerè½®è¯¢</strong> - ä¸»åŠ¨è°ƒç”¨getCurrentCallsæŸ¥è¯¢é€šè¯åˆ—è¡¨</li>
<li><strong>è§£æé€šè¯åˆ—è¡¨</strong> - å¤„ç†Modemè¿”å›çš„AT+CLCCå“åº”</li>
<li><strong>çŠ¶æ€æ›´æ–°</strong> - GsmCdmaCallTrackeræ›´æ–°æœ¬åœ°é€šè¯å¯¹è±¡</li>
<li><strong>åº”ç”¨æ„ŸçŸ¥</strong> - é€šè¿‡TelephonyCallbacké€šçŸ¥ä¸Šå±‚åº”ç”¨</li>
</ol>
<p>å…³é”®çš„<strong>è®¾è®¡æ¨¡å¼</strong>åŒ…æ‹¬ï¼š</p>
<ul>
<li>âœ… <strong>ä¸»åŠ¨è½®è¯¢</strong> - ä¸ŠæŠ¥åªæ˜¯ä¿¡å·ï¼Œé€šè¯è¯¦æƒ…éœ€è½®è¯¢è·å–</li>
<li>âœ… <strong>Wakelockç®¡ç†</strong> - é˜²æ­¢CPUè¿‡åº¦ä¼‘çœ </li>
<li>âœ… <strong>åˆ†å±‚é€šä¿¡</strong> - Native/HAL/Javaå„å±‚æ¸…æ™°è§£è€¦</li>
<li>âœ… <strong>å¼‚æ­¥å¤„ç†</strong> - æ‰€æœ‰æ“ä½œéƒ½åœ¨äº‹ä»¶å¾ªç¯ä¸­è¿›è¡Œ</li>
</ul>
<p>å¦‚æœä½ éœ€è¦æ·±å…¥äº†è§£ç‰¹å®šé˜¶æ®µï¼ˆå¦‚ATæŒ‡ä»¤çš„è¯¦ç»†è§£æã€HIDLæ¶ˆæ¯è½¬æ¢ã€æˆ–ç‰¹å®šé€šè¯æ“ä½œçš„å®ç°ï¼‰ï¼Œæˆ‘å¯ä»¥æä¾›æ›´è¯¦ç»†çš„ä»£ç åˆ†æï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue Routerå¯¼èˆªå®ˆå«ä¸­ä½¿ç”¨ElMessageBoxçš„å‘ç‚¹ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7603294029531725875</link>    <guid>https://juejin.cn/post/7603294029531725875</guid>    <pubDate>2026-02-06T05:37:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603294029531725875" data-draft-id="7603294029531693107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue Routerå¯¼èˆªå®ˆå«ä¸­ä½¿ç”¨ElMessageBoxçš„å‘ç‚¹ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-06T05:37:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="puhaha"/> <meta itemprop="url" content="https://juejin.cn/user/2665652787090318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue Routerå¯¼èˆªå®ˆå«ä¸­ä½¿ç”¨ElMessageBoxçš„å‘ç‚¹ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2665652787090318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    puhaha
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:37:14.000Z" title="Fri Feb 06 2026 05:37:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜èƒŒæ™¯</h2>
<p>åœ¨Vue 3 + Vue Routeré¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ç”¨æˆ·ç¦»å¼€é¡µé¢å‰è¿›è¡Œç¡®è®¤ï¼Œç‰¹åˆ«æ˜¯å½“è¡¨å•æœ‰æœªä¿å­˜çš„æ›´æ”¹æ—¶ã€‚<code>onBeforeRouteLeave</code>Â ä¸ Element Plus çš„Â <code>ElMessageBox.confirm</code>Â ç»“åˆä½¿ç”¨æ˜¯ä¸€ä¸ªå¸¸è§æ–¹æ¡ˆï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å­˜åœ¨ä¸å°‘å‘ç‚¹ã€‚</p>
<h2 data-id="heading-1">ç›´æ¥ä¸Šä»£ç </h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onBeforeRouteLeave</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-keyword">if</span> (!modelDirty.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>()
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'è¿˜æœªä¿å­˜ï¼Œç¦»å¼€ä¼šä¸¢å¤±ï¼Œç¡®å®šç»§ç»­å—ï¼Ÿ'</span>, <span class="hljs-string">'æç¤º'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">cancelButtonText</span>: <span class="hljs-string">'å–æ¶ˆ'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
      <span class="hljs-attr">closeOnHashChange</span>: <span class="hljs-literal">false</span>
    })
    modelDirty.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    <span class="hljs-title function_">next</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>)
  }
})
</code></pre>
<h2 data-id="heading-2">å‘ç‚¹æ¢³ç†</h2>
<h3 data-id="heading-3">å‘ç‚¹1ï¼š<code>next()</code>Â è°ƒç”¨æ—¶æœºé—®é¢˜</h3>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šåœ¨å¼‚æ­¥æ“ä½œä¸­å¿˜è®°è°ƒç”¨Â <code>next()</code>ï¼Œæˆ–è€…é‡å¤è°ƒç”¨</p>
<p>javascript</p>
<pre><code class="hljs language-vbnet" lang="vbnet">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¯èƒ½åœ¨æŸäº›è·¯å¾„ä¸‹æœªè°ƒç”¨<span class="hljs-keyword">next</span>
onBeforeRouteLeave(<span class="hljs-keyword">async</span> (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!dirty) {
    // è¿™é‡Œæ²¡æœ‰è°ƒç”¨ <span class="hljs-keyword">next</span>()ï¼
    <span class="hljs-keyword">return</span>
  }
  // ...å…¶ä»–é€»è¾‘
})
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šç¡®ä¿æ‰€æœ‰è·¯å¾„éƒ½è°ƒç”¨next</span>
<span class="hljs-title function_">onBeforeRouteLeave</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-keyword">if</span> (!modelDirty.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">next</span>() <span class="hljs-comment">// ç¡®ä¿è¿™é‡Œä¹Ÿè°ƒç”¨next</span>
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-comment">// ...å…¶ä»–é€»è¾‘</span>
})
</code></pre>
<h3 data-id="heading-4">å‘ç‚¹2ï¼š<code>closeOnHashChange</code>Â è®¾ç½®çš„å¿…è¦æ€§</h3>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨å‰è¿›/åé€€æŒ‰é’®æ—¶ï¼Œhashå˜åŒ–å¯èƒ½å¯¼è‡´MessageBoxæ„å¤–å…³é—­</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¿…é¡»è®¾ç½® closeOnHashChange: false</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'æç¤ºå†…å®¹'</span>, <span class="hljs-string">'æ ‡é¢˜'</span>, {
  <span class="hljs-comment">// ...å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">closeOnHashChange</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é˜²æ­¢è·¯ç”±hashå˜åŒ–è‡ªåŠ¨å…³é—­</span>
  <span class="hljs-attr">closeOnClickModal</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é˜²æ­¢ç‚¹å‡»é®ç½©å±‚å…³é—­</span>
  <span class="hljs-attr">closeOnPressEscape</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// é˜²æ­¢ESCé”®å…³é—­ï¼ˆå¯é€‰ï¼‰</span>
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Hash åˆ° HyperLogLogï¼šRedis æµ·é‡ UV ç»Ÿè®¡çš„ 3 ç§é«˜é˜¶ç©æ³•]]></title>    <link>https://juejin.cn/post/7603227363822567450</link>    <guid>https://juejin.cn/post/7603227363822567450</guid>    <pubDate>2026-02-06T05:42:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603227363822567450" data-draft-id="7603283691457150986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Hash åˆ° HyperLogLogï¼šRedis æµ·é‡ UV ç»Ÿè®¡çš„ 3 ç§é«˜é˜¶ç©æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T05:42:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Hash åˆ° HyperLogLogï¼šRedis æµ·é‡ UV ç»Ÿè®¡çš„ 3 ç§é«˜é˜¶ç©æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T05:42:51.000Z" title="Fri Feb 06 2026 05:42:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çœŸå®ä¸šåŠ¡åœºæ™¯</h2>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†å¤§ä¿ƒæ´»åŠ¨é¡µï¼Œäº§å“ç»ç†æäº†ä¸€ä¸ªâ€œç®€å•â€çš„éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å®æ—¶æ˜¾ç¤ºâ€œå½“å‰æ­£åœ¨æµè§ˆå•†å“çš„ç”¨æˆ·æ•°â€ã€‚è¿™ä¸ªæ•°å­—æ¯ç§’å¯èƒ½å˜åŒ–æ•°ä¸‡æ¬¡ã€‚åœ¨ 10 ä¸‡çº§å¹¶å‘ä¸‹ï¼Œä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ä¼šé¢ä¸´ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p><strong>ç»å…¸é”™è¯¯åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Java åˆå­¦è€…çš„å¸¸è§åšæ³•</span>
publicÂ synchronizedÂ voidÂ <span class="hljs-built_in">addCount</span>()Â {
Â  Â Â intÂ count = <span class="hljs-built_in">getFromMySQL</span>();
Â  Â  <span class="hljs-built_in">updateMySQL</span>(count +Â <span class="hljs-number">1</span>);
}
</code></pre>
<p>ä¸Šè¿°ä»£ç åœ¨é«˜å¹¶å‘ä¸‹ä¼šå¯¼è‡´ï¼š</p>
<ol>
<li>æ•°æ®åº“è¿æ¥æ± è¿‡è½½ï¼ˆè¶…æ—¶é”™è¯¯ï¼‰</li>
<li>è¡Œé”ç«äº‰ï¼ˆæ­»é”é£é™©ï¼‰</li>
<li>CPU é£™å‡è‡³ 100%ï¼ˆæ€§èƒ½å´©æºƒï¼‰</li>
</ol>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦è®¾è®¡ Redis ç»Ÿè®¡æ–¹æ¡ˆçš„æ ¸å¿ƒåŸå› â€”â€”åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå…³ç³»å‹æ•°æ®åº“çš„ ACID ç‰¹æ€§åè€Œæˆäº†è´Ÿæ‹…ã€‚</p>
<h2 data-id="heading-1">Redis æ–¹æ¡ˆçš„æ¼”è¿›</h2>
<h3 data-id="heading-2">é˜¶æ®µ 1ï¼šHash æ–¹æ¡ˆâ€”â€”ç²¾ç¡®ç»Ÿè®¡çš„èµ·ç‚¹</h3>
<p><strong>åŸç†ï¼š</strong> ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªç‹¬ç«‹è®¿å®¢ï¼Œé€‚ç”¨äºå¯¹ç²¾åº¦è¦æ±‚é«˜ã€ä¸­å°å‹è§„æ¨¡çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// å°†ç”¨æˆ·è®¿é—®è®°å½•æ·»åŠ åˆ° Hash
Jedis <span class="hljs-attr">jedis</span> =Â newÂ Jedis(<span class="hljs-string">"localhost"</span>,Â <span class="hljs-number">6379</span>)<span class="hljs-comment">;</span>
String <span class="hljs-attr">pageKey</span> =Â <span class="hljs-string">"page_visit_count:examplePage"</span><span class="hljs-comment">;Â // é¡µé¢è®¿é—®è®¡æ•° Key</span>
String <span class="hljs-attr">userId</span> =Â <span class="hljs-string">"user_123"</span><span class="hljs-comment">;Â // å·²ç™»å½•ç”¨æˆ·</span>
String <span class="hljs-attr">visitorId</span> =Â <span class="hljs-string">"visitor_abc123"</span><span class="hljs-comment">;Â // æœªç™»å½•ç”¨æˆ·</span>

// ä½¿ç”¨ HSET å‘½ä»¤æ·»åŠ æ•°æ®ï¼Œå€¼ç®€å•è®¾ä¸º "1"
jedis.hset(pageKey, userId,Â "1")<span class="hljs-comment">;</span>
jedis.hset(pageKey, visitorId,Â "1")<span class="hljs-comment">;</span>

// ç»Ÿè®¡è®¿é—®é‡ï¼Œç›´æ¥ä½¿ç”¨ HLEN å‘½ä»¤è·å–å­—æ®µæ•°é‡
longÂ <span class="hljs-attr">visitCount</span> = jedis.hlen(pageKey)<span class="hljs-comment">;</span>
System.out.println("The page visit count is: "Â + visitCount)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç®€å•ç›´æ¥â€”â€”å®ç°å®¹æ˜“ï¼ŒæŸ¥è¯¢æ–¹ä¾¿ï¼Œä¸”ç²¾åº¦æé«˜ã€‚ä½†ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ã€‚</p>
<p>éšç€è®¿é—®é¡µé¢çš„å¢åŠ ï¼ŒKey åƒæ»šé›ªçƒä¸€æ ·è†¨èƒ€ï¼Œé“¾è¡¨å˜é•¿ï¼Œå†…å­˜å ç”¨è¿…é€Ÿé£™å‡ï¼Œæ€§èƒ½é€æ¸ä¸‹é™ã€‚</p>
<p>å› æ­¤ï¼Œè¿™ç§æ–¹æ³•æ›´é€‚åˆæµé‡ç›¸å¯¹è¾ƒä½çš„é¡µé¢ï¼Œä½œä¸ºåˆæœŸçš„å°è¯•ã€‚</p>
<h3 data-id="heading-3">é˜¶æ®µ 2ï¼šBitmap æ–¹æ¡ˆâ€”â€”ç©ºé—´ä¸æ€§èƒ½çš„å¹³è¡¡</h3>
<p>å½“ç”¨æˆ·åŸºæ•°å˜å¤§æ—¶ï¼Œä½¿ç”¨ Hash åœ¨ç©ºé—´ä¸Šå°±æ˜¾å¾—æœ‰äº›æµªè´¹äº†ã€‚</p>
<p>è¿™æ­£æ˜¯ Bitmap å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™ï¼Œå®ƒæ˜¯ç©ºé—´æ•ˆç‡çš„å¤§å¸ˆã€‚å®ƒå·§å¦™åœ°åˆ©ç”¨äº† 32 ä½ int ç±»å‹â€”â€”ä¸å†å­˜å‚¨ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ· IDï¼Œè€Œæ˜¯æ‹†è§£ 32 ä½ï¼Œæ¯ä¸€ä½ä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œç›´æ¥èŠ‚çœäº† 32 å€çš„ç©ºé—´ã€‚</p>
<p>å¯¹äºå·²ç™»å½•ç”¨æˆ·ï¼Œå…¶ ID ç›´æ¥æ˜ å°„åˆ° Bitmap ä¸­çš„ç‰¹å®šä½ã€‚å¯¹äºæœªç™»å½•ç”¨æˆ·ï¼Œé€šè¿‡å“ˆå¸Œç®—æ³•å°†éšæœºå­—ç¬¦ä¸²æ ‡è¯†ç¬¦è½¬æ¢ä¸ºå“ˆå¸Œå€¼**ï¼Œå†æ˜ å°„åˆ°ç‰¹å®šä½ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ· ID ä¸º 5ï¼Œå¯¹åº” Bitmap ç¬¬ 5 ä½ï¼›éšæœºå­—ç¬¦ä¸²å“ˆå¸Œå€¼ä¸º 10ï¼Œå¯¹åº”ç¬¬ 10 ä½ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// ä½¿ç”¨ Bitmap ç»Ÿè®¡é¡µé¢è®¿é—®é‡
Jedis <span class="hljs-attr">jedis</span> =Â newÂ Jedis(<span class="hljs-string">"localhost"</span>,Â <span class="hljs-number">6379</span>)<span class="hljs-comment">;</span>
String <span class="hljs-attr">pageKey</span> =Â <span class="hljs-string">"bitmap_visit_count:examplePage"</span><span class="hljs-comment">;Â // Bitmap è®¿é—®è®¡æ•° Key</span>
String <span class="hljs-attr">loginUserId</span> =Â <span class="hljs-string">"5"</span><span class="hljs-comment">;Â // å·²ç™»å½•ç”¨æˆ· ID</span>
String <span class="hljs-attr">nonLoginUserKey</span> =Â <span class="hljs-string">"random_str_123"</span><span class="hljs-comment">;Â // æœªç™»å½•ç”¨æˆ·çš„éšæœº Key</span>

// å¯¹äºå·²ç™»å½•ç”¨æˆ·ï¼Œç›´æ¥è®¾ç½®å¯¹åº”ä½
jedis.setbit(pageKey, Long.parseLong(loginUserId),Â true)<span class="hljs-comment">;</span>

// å¯¹äºæœªç™»å½•ç”¨æˆ·ï¼Œå…ˆå¯¹ Key è¿›è¡Œå“ˆå¸Œï¼Œå†è®¾ç½®ä½
String <span class="hljs-attr">hashValue</span> = DigestUtils.md5DigestAsHex(nonLoginUserKey.getBytes())<span class="hljs-comment">;</span>
longÂ <span class="hljs-attr">hashBitIndex</span> = Long.parseLong(hashValue.substring(<span class="hljs-number">0</span>,Â <span class="hljs-number">16</span>),Â <span class="hljs-number">16</span>) % Long.MAX_VALUE<span class="hljs-comment">;</span>
jedis.setbit(pageKey, hashBitIndex,Â true)<span class="hljs-comment">;</span>

// ä½¿ç”¨ BITCOUNT å‘½ä»¤ç»Ÿè®¡è®¿é—®é‡
longÂ <span class="hljs-attr">visitCount</span> = jedis.bitcount(pageKey)<span class="hljs-comment">;</span>
System.out.println("The page visit count is: "Â + visitCount)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºæå°çš„å†…å­˜å ç”¨å’Œä¾¿æ·çš„æŸ¥è¯¢ï¼Œç”šè‡³å¯ä»¥æ£€æŸ¥ç‰¹å®šç”¨æˆ·æ˜¯å¦è®¿é—®è¿‡é¡µé¢ã€‚</p>
<p>ä½†ä¹Ÿå­˜åœ¨æ˜æ˜¾çš„ç¼ºç‚¹ã€‚å¤šä¸ªç”¨æˆ·å¯èƒ½ä¼šç¢°æ’åˆ°åŒä¸€ä½ä¸Šï¼Œå¯¼è‡´ç»Ÿè®¡ç•¥æœ‰åå·®ã€‚æ­¤å¤–ï¼Œå¦‚æœç”¨æˆ·åˆ†å¸ƒç¨€ç–â€”â€”ä¾‹å¦‚ç”¨æˆ· ID æ˜¯ 1 äº¿â€”â€”åˆ™éœ€è¦åˆ†é… 1 äº¿ä¸ªä½ï¼Œå¯èƒ½ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚</p>
<p>å› æ­¤ï¼Œè¿™ç§æ–¹æ³•æ›´é€‚åˆç”¨æˆ·åˆ†å¸ƒç›¸å¯¹å¯†é›†çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-4">é˜¶æ®µ 3ï¼šHyperLogLog æ–¹æ¡ˆâ€”â€”è¶…å¤§æ•°æ®é‡çš„â€œé‡å­â€ç»Ÿè®¡</h3>
<p><strong>çªç ´æ€§æ€ç»´ï¼š</strong> é€šå¸¸ï¼Œç³»ç»Ÿä¸éœ€è¦ç»å¯¹ç²¾ç¡®çš„æ•°æ®ï¼Œå¯ä»¥ç”¨å¯æ§çš„è¯¯å·®æ¢å–å†…å­˜å’Œæ€§èƒ½çš„å·¨å¤§æå‡ã€‚</p>
<p>å®ƒä¸å†è¿½æ±‚è®°å½•æ¯ä¸ªç”¨æˆ·çš„ç¡®åˆ‡è®¡æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨æ¦‚ç‡ç®—æ³•ä¼°ç®—è¿‘ä¼¼è®¿é—®é‡ï¼Œè¯¯å·®æ§åˆ¶åœ¨ 0.81% ä»¥å†…ï¼Œè¿™åœ¨å®é™…åº”ç”¨ä¸­é€šå¸¸å·²ç»è¶³å¤Ÿã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// ä½¿ç”¨ HyperLogLog ç»Ÿè®¡é¡µé¢è®¿é—®é‡
Jedis <span class="hljs-attr">jedis</span> =Â newÂ Jedis(<span class="hljs-string">"localhost"</span>,Â <span class="hljs-number">6379</span>)<span class="hljs-comment">;</span>
String <span class="hljs-attr">pageKey</span> =Â <span class="hljs-string">"hyperloglog_visit_count:examplePage"</span><span class="hljs-comment">;Â // HyperLogLog è®¿é—®è®¡æ•° Key</span>
String <span class="hljs-attr">userId</span> =Â <span class="hljs-string">"user_456"</span><span class="hljs-comment">;Â // ç”¨æˆ·æ ‡è¯†ï¼Œå¯ä»¥æ˜¯ ID æˆ–å…¶ä»–å”¯ä¸€æ ‡è¯†</span>

// ä½¿ç”¨ PFADD å‘½ä»¤æ·»åŠ ç”¨æˆ·è®¿é—®è®°å½•
jedis.pfadd(pageKey, userId)<span class="hljs-comment">;</span>

// ä½¿ç”¨ PFCOUNT å‘½ä»¤ç»Ÿè®¡è®¿é—®é‡
longÂ <span class="hljs-attr">approxVisitCount</span> = jedis.pfcount(pageKey)<span class="hljs-comment">;</span>
System.out.println("The approximate page visit count is: "Â + approxVisitCount)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>è¿™ä¸‰ç§æ–¹æ¡ˆå„æœ‰æ‰€é•¿ã€‚</p>
<p>Hash å°±åƒä¸€æœ¬ç»†è‡´çš„è´¦æœ¬ï¼Œé€‚ç”¨äºå°è§„æ¨¡ã€é«˜ç²¾åº¦çš„ç»Ÿè®¡ã€‚Bitmap æ˜¯ç©ºé—´å‹ç¼©çš„å¤§å¸ˆï¼Œé€‚åˆç”¨æˆ·åˆ†å¸ƒå¯†é›†çš„æ‰ä¸­ç­‰è§„æ¨¡åœºæ™¯ã€‚HyperLogLog åˆ™æ˜¯æ¦‚ç‡ç»Ÿè®¡ä¸“å®¶ï¼Œä¸“ä¸ºè¶…é«˜å¹¶å‘ã€é«˜æµé‡çš„ç½‘ç«™è®¾è®¡ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»é€‰æ‹©ï¼Œä»è€Œåœ¨å¹¶å‘æˆ˜åœºä¸­æŒæ§å…¨å±€ï¼Œç²¾å‡†é«˜æ•ˆåœ°ç»Ÿè®¡ç”¨æˆ·è®¿é—®é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Ansibleå®ç°å…å¯†é’¥çš„åŸç†]]></title>    <link>https://juejin.cn/post/7603252259561734180</link>    <guid>https://juejin.cn/post/7603252259561734180</guid>    <pubDate>2026-02-06T03:20:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603252259561734180" data-draft-id="7602512064976289855" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Ansibleå®ç°å…å¯†é’¥çš„åŸç†"/> <meta itemprop="keywords" content="Linux,è¿ç»´"/> <meta itemprop="datePublished" content="2026-02-06T03:20:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sheffield"/> <meta itemprop="url" content="https://juejin.cn/user/362164852109770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Ansibleå®ç°å…å¯†é’¥çš„åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362164852109770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sheffield
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:20:50.000Z" title="Fri Feb 06 2026 03:20:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>SSH å…å¯†æ˜¯è‡ªåŠ¨åŒ–è¿ç»´çš„åŸºç¡€ï¼ŒAnsibleè¿œç¨‹ç®¡æ§ã€è„šæœ¬è‡ªåŠ¨æ‰§è¡Œéƒ½å¾—é å®ƒã€‚ç”¨å¤§ç™½è¯è®²æ¸…å…å¯†æ ¸å¿ƒåŸç†ï¼Œæ‹†è§£3ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œå†…å®¹æç®€ã€å¥½æ‡‚ã€èƒ½ç›´æ¥ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€SSH å…å¯†æ ¸å¿ƒåŸç†</h2>
<p>SSH å…å¯†é <strong>éå¯¹ç§°åŠ å¯†</strong>ï¼Œå…¨ç¨‹æ— æ˜æ–‡å¯†ç ä¼ è¾“ï¼Œæ§åˆ¶ç«¯Rsyncï¼ˆ172.16.0.61ï¼‰å…å¯†æ§åˆ¶è¢«æ§åˆ¶ç«¯NFS/DataBaseï¼ˆ172.16.0.41ï¼‰ï¼Œæ ¸å¿ƒå°±3ç‚¹ï¼š</p>
<ol>
<li>æ§åˆ¶ç«¯ç”Ÿæˆ<strong>å¯†é’¥å¯¹</strong>ï¼šç§é’¥ï¼ˆid_rsaï¼‰ç•™æœ¬åœ°ï¼Œç›¸å½“äºã€Œä¸ªäººèº«ä»½è¯ã€ï¼Œç»ä¸èƒ½æ³„éœ²ï¼›å…¬é’¥ï¼ˆid_rsa.pubï¼‰å¯å…¬å¼€ï¼Œç›¸å½“äºã€Œå…å¯†æˆæƒå‡½ã€ã€‚</li>
<li>æŠŠæ§åˆ¶ç«¯çš„<strong>å…¬é’¥</strong>ï¼Œæ”¾åˆ°è¢«æ§åˆ¶ç«¯çš„ã€Œå…å¯†ç™½åå•ã€ï¼ˆ/root/.ssh/authorized_keysï¼‰é‡Œã€‚</li>
<li>æ§åˆ¶ç«¯è¿è¢«æ§åˆ¶ç«¯æ—¶ï¼Œç”¨ç§é’¥åšèº«ä»½éªŒè¯ï¼Œè¢«æ§åˆ¶ç«¯ç”¨ç™½åå•é‡Œçš„å…¬é’¥éªŒè¯ï¼ŒåŒ¹é…ä¸Šå°±ç›´æ¥è¿æ¥ï¼Œä¸ç”¨è¾“å¯†ç ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä½ çš„å®æˆ˜Playbook</h2>
<p>å®ç°<strong>172.16.0.61 å…å¯†æ§åˆ¶ 172.16.0.41</strong>çš„æç®€Playbookï¼Œä¹Ÿæ˜¯æˆ‘ä¸ªäººç¯å¢ƒçš„å†™æ³•ï¼Œé‡å¤æ‰§è¡Œä¸æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å®ç°SSHå…å¯†ç™»å½•</span>
  <span class="hljs-attr">hosts:</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.61</span>  <span class="hljs-comment"># æ§åˆ¶ç«¯ï¼ˆç”Ÿæˆå¯†é’¥çš„æœºå™¨ï¼‰</span>
  <span class="hljs-attr">remote_user:</span> <span class="hljs-string">root</span>
  <span class="hljs-attr">tasks:</span>
    <span class="hljs-comment"># æ­¥éª¤1ï¼šæ§åˆ¶ç«¯ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå·²å­˜åœ¨åˆ™è·³è¿‡</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ç”Ÿæˆå¯†é’¥</span>
      <span class="hljs-attr">command:</span> <span class="hljs-string">ssh-keygen</span> <span class="hljs-string">-t</span> <span class="hljs-string">rsa</span> <span class="hljs-string">-N</span> <span class="hljs-string">""</span> <span class="hljs-string">-f</span> <span class="hljs-string">/root/.ssh/id_rsa</span>
      <span class="hljs-attr">args:</span>
        <span class="hljs-attr">creates:</span> <span class="hljs-string">/root/.ssh/id_rsa</span>

    <span class="hljs-comment"># æ­¥éª¤2ï¼šè¯»å–æ§åˆ¶ç«¯å…¬é’¥ï¼Œæ³¨å†Œä¸ºå˜é‡</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">è¯»å–å…¬é’¥</span>
      <span class="hljs-attr">slurp:</span>
        <span class="hljs-attr">src:</span> <span class="hljs-string">/root/.ssh/id_rsa.pub</span>
      <span class="hljs-attr">register:</span> <span class="hljs-string">id_rsa_pub</span>

    <span class="hljs-comment"># æ­¥éª¤3ï¼šæŠŠå…¬é’¥å†™å…¥è¢«æ§åˆ¶ç«¯41çš„å…å¯†ç™½åå•</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å…å¯†æ§åˆ¶41</span>
      <span class="hljs-attr">authorized_key:</span>
        <span class="hljs-attr">user:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">key:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ id_rsa_pub.content | b64decode }}</span>"</span>
      <span class="hljs-attr">delegate_to:</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.41</span>
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€3 æ­¥æ‹†è§£ï¼šæ¯ä¸€æ­¥åšä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ</h2>
<h3 data-id="heading-3">æ­¥éª¤ 1ï¼šæ§åˆ¶ç«¯ç”Ÿæˆå¯†é’¥å¯¹</h3>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šç»™æ§åˆ¶ç«¯ç”Ÿæˆã€Œèº«ä»½è¯+æˆæƒå‡½ã€ï¼Œå‘½ä»¤<code>ssh-keygen -t rsa -N "" -f /root/.ssh/id_rsa</code>ï¼š</p>
<ul>
<li><code>-t rsa</code>ï¼šç”¨æœ€å¸¸ç”¨çš„ RSA åŠ å¯†ç®—æ³•ï¼Œå®‰å…¨åˆå…¼å®¹ï¼›</li>
<li><code>-N ""</code>ï¼šå¯†é’¥æ— å¯†ç ï¼Œè‡ªåŠ¨åŒ–åœºæ™¯å¿…é¡»åŠ ï¼Œå¦åˆ™ä¼šå¼¹çª—è¾“å¯†ç ä¸­æ–­ä»»åŠ¡ï¼›</li>
<li><code>creates: /root/.ssh/id_rsa</code>ï¼šå…³é”®ï¼å¦‚æœå¯†é’¥å·²å­˜åœ¨ï¼Œç›´æ¥è·³è¿‡ï¼Œé¿å…é‡å¤ç”Ÿæˆæç¤ºè¦†ç›–æ–‡ä»¶ã€‚</li>
</ul>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼šæ§åˆ¶ç«¯<code>/root/.ssh/</code>ä¸‹ç”Ÿæˆ 2 ä¸ªæ–‡ä»¶ â€”â€”<code>id_rsa</code>ï¼ˆç§é’¥ï¼Œæƒé™ 600ï¼Œä¸¥ç¦æ³„éœ²ï¼‰ã€<code>id_rsa.pub</code>ï¼ˆå…¬é’¥ï¼Œå¯è‡ªç”±ä¼ è¾“ï¼‰ã€‚</p>
<h3 data-id="heading-4">æ­¥éª¤ 2ï¼šè¯»å–å…¬é’¥å¹¶æ³¨å†Œå˜é‡</h3>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šæŠŠå…¬é’¥å†…å®¹è¯»å‡ºæ¥ï¼Œä¾›åç»­æ­¥éª¤ä½¿ç”¨ã€‚</p>
<ul>
<li>ç”¨<code>slurp</code>æ¨¡å—è€Œéç®€å•çš„<code>cat</code>å‘½ä»¤ï¼šè‡ªåŠ¨å¯¹å†…å®¹åšBase64ç¼–ç ï¼Œè·¨æœºä¼ è¾“ä¸ä¸¢å†…å®¹ã€æ— ç¼–ç é—®é¢˜ï¼›</li>
<li><code>register: id_rsa_pub</code>ï¼šæŠŠç¼–ç åçš„å…¬é’¥å­˜åˆ°å˜é‡é‡Œï¼Œåç»­ç›´æ¥è°ƒç”¨å°±è¡Œã€‚</li>
</ul>
<h3 data-id="heading-5">æ­¥éª¤ 3ï¼šå†™å…¥è¢«æ§åˆ¶ç«¯å…å¯†ç™½åå•</h3>
<p><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šæŠŠæ§åˆ¶ç«¯çš„ã€Œæˆæƒå‡½ã€ï¼Œæ”¾åˆ°è¢«æ§åˆ¶ç«¯41çš„ç™½åå•é‡Œï¼Œå®ç°å…å¯†ã€‚</p>
<ul>
<li><code>authorized_key</code>ï¼šAnsibleä¸“ç”¨ç®¡ç†å…å¯†ç™½åå•çš„æ¨¡å—ï¼Œè‡ªåŠ¨æ ¡éªŒå…¬é’¥æ ¼å¼ï¼Œé¿å…é‡å¤å†™å…¥ï¼Œæ¯”æ‰‹åŠ¨æ•²å‘½ä»¤å®‰å…¨ï¼›</li>
<li><code>{{ id_rsa_pub.content | b64decode }}</code>ï¼šæŠŠæ­¥éª¤2ç¼–ç çš„å…¬é’¥è§£ç ä¸ºåŸå§‹å†…å®¹ï¼Œæ­£å¸¸å†™å…¥ç™½åå•ï¼›</li>
<li><code>delegate_to: 172.16.0.41</code>ï¼šæ ¸å¿ƒæŒ‡ä»¤ï¼æŠŠè¿™ä¸ªä»»åŠ¡çš„æ‰§è¡Œç›®æ ‡ï¼Œä»æ§åˆ¶ç«¯61åˆ‡æ¢åˆ°è¢«æ§åˆ¶ç«¯41ï¼Œä¸ç”¨æ‰‹åŠ¨ç™»å½•41æ“ä½œï¼›</li>
<li><code>user: root</code>ï¼šå…¬é’¥å†™å…¥41æœåŠ¡å™¨rootç”¨æˆ·çš„ç™½åå•ï¼Œæ§åˆ¶ç«¯åç»­ä»¥rootèº«ä»½å…å¯†è¿æ¥41ã€‚</li>
</ul>
<h2 data-id="heading-6">å››ã€ä¸€é”®éªŒè¯ï¼šå…å¯†æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</h2>
<p>åœ¨æ§åˆ¶ç«¯61æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œ<strong>ä¸ç”¨è¾“å¯†ç </strong>å°±èƒ½è¿æ¥41ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼š
è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">ssh root<span class="hljs-keyword">@172</span>.16.0.41
</code></pre>
<h2 data-id="heading-7">äº”ã€å¿«é€Ÿæ‰©å±•ï¼šä¸€é”®å…å¯†å¤šå°æœåŠ¡å™¨</h2>
<p>å¦‚æœéœ€è¦åŒæ—¶å…å¯†41ã€31ï¼Œåªéœ€æŠŠæ­¥éª¤3æ”¹æˆéå†IPï¼Œä¸€è¡Œæå®šå¤šå°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å…å¯†æ§åˆ¶å¤šå°æœåŠ¡å™¨</span>
  <span class="hljs-attr">authorized_key:</span>
    <span class="hljs-attr">user:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">key:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ id_rsa_pub.content | b64decode }}</span>"</span>
  <span class="hljs-attr">delegate_to:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ item }}</span>"</span>
  <span class="hljs-attr">with_items:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.41</span>
    <span class="hljs-bullet">-</span> <span class="hljs-number">172.16</span><span class="hljs-number">.0</span><span class="hljs-number">.31</span>
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<ol>
<li>SSHå…å¯†æ ¸å¿ƒï¼š<strong>æ§åˆ¶ç«¯ç”Ÿå¯†é’¥å¯¹ï¼Œå…¬é’¥å†™å…¥è¢«æ§åˆ¶ç«¯çš„ /root/.ssh/authorized_keys</strong>ï¼›</li>
<li>Ansibleå®ç°3æ­¥ï¼š<strong>ç”Ÿæˆå¯†é’¥â†’è¯»å–å…¬é’¥â†’å†™å…¥è¿œç«¯ç™½åå•</strong>ï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–ï¼Œé‡å¤æ‰§è¡Œä¸æŠ¥é”™ï¼›</li>
<li>å…³é”®è¦ç‚¹ï¼š<code>creates</code>é˜²é‡å¤ç”Ÿæˆã€<code>slurp</code>ä¿å…¬é’¥å®Œæ•´ã€<code>delegate_to</code>åˆ‡æ‰§è¡Œç›®æ ‡ï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒè§„èŒƒå†™æ³•ã€‚</li>
</ol>
<h2 data-id="heading-9">æœ€åäººè¯ä¸¾ä¸ªæ —å­ğŸŒ°ï¼šç”±äºæ­¤æ—¶æ­¤åˆ»çš„è¿ç»´æœºå¯¹æ§åˆ¶çš„ä¸¤å°æœºå™¨éƒ½åšäº†å…å¯†ï¼Œæˆ‘ä»¬æŠŠå…¶ä¸­ä¸€å°ç§°ä¸ºå°æ˜ï¼Œä¸€å°ç§°ä¸ºå°ç¾ï¼Œè¿ç»´æœºæœ‰ä¸¤å®¶æ™ºèƒ½é”çš„ç¼–è¾‘æƒé™ã€‚æŸä¸€å¤©ï¼Œå°æ˜è¦å»å°ç¾å®¶ä¿®å®¶ç”µï¼Œä½†æ˜¯å°ç¾å®¶çš„æ™ºèƒ½é”ä¸è®¤è¯†å°æ˜ï¼Œå°æ˜æ€ä¹ˆæŒ‰æŒ‡çº¹éƒ½æ— æµäºäº‹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¿ç»´æœºå°±å¯ä»¥å‘å°æ˜è¦æ‰‹æŒ‡æŒ‡çº¹ï¼Œç„¶åä¿å­˜ä¸€ä¸‹ï¼Œè¿›å…¥å°ç¾å®¶çš„æ™ºèƒ½é”åå°ç³»ç»Ÿï¼Œè¾“å…¥å°æ˜çš„æŒ‡çº¹ã€‚äºæ˜¯ï¼Œå°æ˜å†æ¬¡æŒ‰å‹æŒ‡çº¹ï¼Œå°±å¯ä»¥è¿›å…¥å°ç¾çš„å®¶ä¸­äº†ï¼Œä¹Ÿå¯ä»¥æ“æ§å°ç¾å®¶çš„ç”µç¯ç”µè§†æ´—è¡£æœºäº†ğŸ¤­</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentåº”ç”¨å¼€å‘åˆæ¢]]></title>    <link>https://juejin.cn/post/7603352061469442090</link>    <guid>https://juejin.cn/post/7603352061469442090</guid>    <pubDate>2026-02-06T03:38:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352061469442090" data-draft-id="7603352061469425706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentåº”ç”¨å¼€å‘åˆæ¢"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-02-06T03:38:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·7694900413493"/> <meta itemprop="url" content="https://juejin.cn/user/442428164682333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentåº”ç”¨å¼€å‘åˆæ¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/442428164682333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·7694900413493
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:38:03.000Z" title="Fri Feb 06 2026 03:38:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">ä¸€ã€ä» LLM åˆ° Agent</h2>
<p>LLMï¼šåŸºäºTransform + å¤§å‚æ•°é‡ + å¤§æ•°æ®é‡ =&gt; ä»æ¦‚ç‡ä¸Šé¢„æµ‹æ–‡æœ¬æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œä½¿æ–‡æœ¬å¾—åˆ°åˆç†çš„â€œå»¶ç»­â€ï¼Œæœ€ç»ˆè¡¨ç°ä¸ºåƒæœ‰æ€è€ƒèƒ½åŠ›çš„â€œå¤§è„‘ğŸ§ â€ä¸€æ ·ï¼Œèƒ½å¤ŸåŸºäºé—®é¢˜å›ç­”é—®é¢˜ã€‚</p>
<p>Agentï¼šåŸºäºLLMèƒ½åŠ›ï¼Œæä¾›â€œå››è‚¢â€ï¼Œä½¿å¾—åƒäººä¸€æ ·ï¼Œä¸ä»…èƒ½æ€è€ƒè¿˜èƒ½è¡ŒåŠ¨ã€‚æ‰€è°“çš„â€œå››è‚¢â€ï¼Œå¯ä»¥ç†è§£ä¸ºç”±ç”¨æˆ·å®æ—¶æ•°æ®+å·¥å…·ï¼Œä½¿å¾—LLMä¸ç°å®å»ºç«‹è¿æ¥ï¼Œå¹¶ä¸”èƒ½å¯¹ç°å®äº§ç”Ÿå½±å“ã€‚</p>
<h2 data-id="heading-1">äºŒã€AI Agentçš„ç³»ç»Ÿç»„æˆ</h2>
<h3 data-id="heading-2">1. ä¸Šä¸‹æ–‡(Context &amp; Memory)</h3>
<blockquote>
<p>ä¸Šä¸‹æ–‡ï¼šå†å²å¯¹è¯è®°å½•ï¼Œé€šå¸¸è¡¨ç°ä¸ºUser-AIä¸€é—®ä¸€ç­”çš„å½¢å¼</p>
<p>è®°å¿†ï¼šAIå›å¤èƒ½å¤ŸåŸºäºå†å²å¯¹è¯è¿›è¡Œå›å¤ï¼Œåƒæ‹¥æœ‰è®°å¿†ä¸€æ ·</p>
</blockquote>
<h4 data-id="heading-3">1. è®°å¿†å®ç°</h4>
<p>æ¯æ¬¡è¯·æ±‚æ¨¡å‹æ—¶ï¼Œæºå¸¦å†å²å¯¹è¯çª—å£ä¿¡æ¯ï¼Œå½“ä½œqueryçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¯¹è¯çª—å£é€šå¸¸å®ç°ä¸ºæ»‘åŠ¨çª—å£ï¼Œç»´æŠ¤æœ€è¿‘nè½®å¯¹è¯ä¿¡æ¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3706679e3e541fdbbd6209eb7d4702c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=RtPvizwYThLHIabxM7ougJyhwDU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h4 data-id="heading-4">2. ä¸Šä¸‹æ–‡ç»´æŠ¤</h4>
<p>åœ¨æœ€ç®€å•ï¼ˆæ»‘åŠ¨çª—å£ï¼‰å®ç°çš„<strong>çŸ­æœŸ</strong>è®°å¿†åŸºç¡€ä¸Šï¼Œè€ƒè™‘å¦‚ä½•<strong>æ›´é«˜æ•ˆç»´æŠ¤é•¿çŸ­è®°å¿†ï¼ˆé™ä½æˆæœ¬</strong> <strong>token</strong> <strong>æ¶ˆè€—</strong>ï¼‰ã€<strong>ç»´æŠ¤é•¿æœŸè®°å¿†</strong>ã€‚</p>
<p><strong>é™ä½æˆæœ¬ï¼š</strong></p>
<ol>
<li>å¤šè½®å¯¹è¯æ”¹å†™ï¼šå°†<strong>èƒ½å¤Ÿ</strong>å‹ç¼©çš„å¤šè½®å¯¹è¯ï¼Œç²¾ç®€è‡³ä¸€æ¡ã€‚</li>
<li>é˜¶æ®µæ€»ç»“ï¼šæ€»ç»“çª—å£å†…å‰mè½®å¯¹è¯ä¸ºä¸€æ¡ï¼Œæœ€è¿‘n-mæ¡ä¸å˜ã€‚</li>
</ol>
<p><strong>ç»´æŠ¤é•¿æœŸè®°å¿†ï¼š</strong></p>
<ol>
<li>æ»šåŠ¨æ‘˜è¦ï¼šæ¯nè½®å¯¹è¯ï¼Œæ€»ç»“ä¸€æ¬¡å¯¹è¯å†…å®¹ï¼Œå°†æ€»ç»“ç»“æœç»´æŠ¤è‡³ç³»ç»Ÿæç¤ºè¯orå‘é‡åŒ–åµŒå…¥ï¼Œè¿›è¡Œæ–‡æ¡£å¬å›ã€‚</li>
</ol>
<h3 data-id="heading-5">2. æ£€ç´¢å¢å¼º (RAG)</h3>
<blockquote>
<p>æä¾›<strong>å¤–éƒ¨æ•°æ®æºä¿¡æ¯</strong>ä½œä¸ºæ¨¡å‹ç”Ÿæˆå†…å®¹æ—¶çš„å‚è€ƒã€‚</p>
</blockquote>
<p>æ–‡æ¡£ï¼šç”¨æˆ·æä¾›çš„æ–‡æœ¬ä¿¡æ¯ï¼Œæ¬²ä¸ºæ¨¡å‹æä¾›ä¿¡æ¯ï¼ˆå¤–éƒ¨æ•°æ®æºï¼‰ã€‚</p>
<p>æ–‡æ¡£è§£æï¼šè¯»å–æ–‡æ¡£ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1e3bf1f6e3f4f1e8ecad0224cf763df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=l9UtxII6Kts6P0j6PAR7lMCEks4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>æ–‡æ¡£åˆ‡åˆ†ï¼šå°†æ–‡æœ¬å†…å®¹åˆ‡åˆ†æˆå°çš„ä¸€æ®µï¼ˆchunkï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4a2298fd5d84731aa6f718c81e11f3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=7MB%2FQvkklg9NsA%2FrGiygwmK9bPM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>å‘é‡åŒ–ï¼šé€šè¿‡å‘é‡åŒ–æ¨¡å‹å°†æ–‡æœ¬è§£ææˆå¤šç»´å‘é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fe99e552afd4d02b586fd7b069e5205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=NZtC8373h%2FMSSSjJWWKAHSR7Acg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>åµŒå…¥ï¼šå‘é‡å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“çš„åŠ¨ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bad3f22608184fc9983441fcfa3b9b63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=yaGrLw%2B8nvxIu40ECGi0rrsFuMw%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>æ–‡æ¡£å¬å›ï¼šæ ¹æ®queryï¼Œå°†queryå‘é‡åŒ–ï¼Œä»å‘é‡åŒ–æ•°æ®åº“ä¸­æ ¹æ®<strong>å‘é‡ç›¸ä¼¼åº¦è®¡ç®—</strong>è¿›è¡Œæ–‡æ¡£å¬å›ã€‚</p>
<p>é‡æ’åºï¼šåº”ç”¨äºæ–‡æ¡£å¬å›çš„ç»“æœï¼Œå†åšä¸€æ¬¡<strong>ç²¾æ’</strong>è¿‡æ»¤ã€‚</p>
<p>å‘é‡ä¸æ–‡æœ¬ä¹‹é—´çš„å…³ç³»ï¼š</p>
<ol>
<li>
<p>å‘é‡æ—¶æ˜¯æ–‡æœ¬åœ¨<strong>è¯­ä¹‰ç©ºé—´</strong>é‡Œçš„<strong>ä½ç½®åæ ‡</strong>ã€‚</p>
</li>
<li>
<p>æ¯ä¸€ä¸ªç»´åº¦è¡¨ç¤ºä¸€ç§è¯­ä¹‰ï¼Œç”¨æ¥åŒºåˆ†æ–‡æœ¬çš„è¡¨è¾¾ï¼ŒåŒæ—¶å‘é‡ç»´åº¦è¶Šé«˜ï¼Œè¡¨è¾¾åŠ›è¶Šé«˜ï¼ŒåŒæ—¶å¯¹å‘é‡åŒ–æ¨¡å‹çš„èƒ½åŠ›ä¸å‘é‡çš„å­˜å‚¨è¦æ±‚ä¹Ÿé«˜ã€‚</p>
</li>
</ol>
<p>eg.</p>
<p>æ–‡æœ¬ï¼šä½ æ˜¯è°</p>
<p>[Â Â  0.02134, -0.11782,Â  0.33491, -0.05217,Â  0.90831, -0.44102,Â  0.12944, -0.77230,Â Â  0.05681,Â  0.24899, -0.31540,Â  0.60127, -0.04498,Â  0.18733,Â  0.09211, -0.50988,Â Â  0.41102, -0.03277,Â  0.27561, -0.19844,Â  0.00321,Â  0.81277, -0.62108,Â  0.14419,Â Â  ...Â Â  -0.08211,Â  0.19344, -0.44720,Â  0.06177 ]</p>
<p>RAGæ ¸å¿ƒæµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc4966c39f40411f83842e0d4e2b31f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=CMKZEhYgmRIl6uBHFv9aaeb8pOo%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h3 data-id="heading-6">3. å·¥å…·è°ƒç”¨ (Function calling)</h3>
<blockquote>
<p>ç»™æ¨¡å‹æä¾›çš„å·¥å…·ï¼Œä½¿å¾—èƒ½å¤Ÿä¸å¤–ç•Œè¿›è¡Œ<strong>äº¤äº’ä¸åº”ç”¨</strong>ï¼Œå®ç°<strong>æ•°æ®äº¤æ¢</strong>æˆ–<strong>äº§ç”Ÿå½±å“ã€‚</strong></p>
<p>æ¨¡å‹é€šè¿‡å¼€å‘è€…å¯¹å·¥å…·çš„å®šä¹‰ï¼Œåˆ¤æ–­ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è°ƒç”¨å·¥å…·ã€‚</p>
</blockquote>
<p>function callingæµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6ceffcdf7b5452486799b0952969e27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=DnH1iKQr0A%2B8wEeSlmzUTtIVbIc%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>1æ¬¡å·¥å…·è°ƒç”¨ =&gt; ä¸è‡³å°‘æ¨¡å‹äº¤äº’2å›åˆ</p>
<h4 data-id="heading-7">MCP</h4>
<blockquote>
<p>å¤§æ¨¡å‹ä¸å¤–ç•Œæ•°æ®æºäº¤äº’çš„ç»Ÿä¸€åè®®ã€‚</p>
</blockquote>
<p>åœ¨agentåº”ç”¨ä¸­ï¼Œæœ¬è´¨ä¹Ÿæ˜¯ä¸€ç§å·¥å…·è°ƒç”¨ï¼ˆfunction callingï¼‰ï¼Œå°±æ˜¯è§„èŒƒåè®®ï¼Œæ–¹ä¾¿å¼€å‘è€…æ¥å…¥ä¸å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16200b11e2514f018ec48668260e9a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=v9ULzqraeHYScSFzC9woqF0KG60%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h2 data-id="heading-8">ä¸‰ã€å¤§æ¨¡å‹åº”ç”¨æ¡†æ¶</h2>
<blockquote>
<p>å¼•è¨€ï¼š</p>
<p>æ¨¡å‹åªæä¾›ç”Ÿæˆèƒ½åŠ›ï¼Œä»¥å·¥ç¨‹çš„è§’åº¦æ¥çœ‹å°±æ˜¯æä¾›ä¸€ä¸ªå¯¹è¯APIï¼ŒåŒ…å«æ¨¡å‹è¶…å‚ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ã€æ˜¯å¦å¼€å¯æµå¼ç­‰ç­‰ã€‚</p>
<p>ä½†ä»…ä¾èµ–æ¨¡å‹åŸç”Ÿèƒ½åŠ›ï¼Œéš¾ä»¥æ„å»ºå…·å¤‡<strong>æ‹Ÿäººæ€§ã€å¯ç”¨æ€§å’Œå·¥ç¨‹å¯é æ€§</strong>çš„å¯¹è¯ç³»ç»Ÿï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜éœ€è¦å›´ç»•æ¨¡å‹å¼•å…¥ä¸€ç³»åˆ—å·¥ç¨‹èƒ½åŠ›ï¼ŒåŒ…æ‹¬ï¼š</p>
<p>è®°å¿†å®ç°ã€è®°å¿†ï¼ˆä¸Šä¸‹æ–‡ï¼‰ç»´æŠ¤ã€æç¤ºè¯å·¥ç¨‹ã€æ£€ç´¢å¢å¼ºï¼ˆRAGï¼‰ã€å·¥å…·è°ƒç”¨ï¼ˆè¾…åŠ©ç”Ÿæˆ/äº§ç”Ÿå½±å“ï¼‰ã€‚</p>
<p>ä¸ºäº†æ›´å…³æ³¨å·¥ç¨‹å®ç°ï¼Œé¿å…é‡å¤å®ç°è¿™äº›é€šç”¨èƒ½åŠ›ï¼Œå°±æœ‰äº†å¤§æ¨¡å‹åº”ç”¨æ¡†æ¶ï¼Œå¯¹ä¸Šè¿°èƒ½åŠ›ç»Ÿä¸€è¿›è¡Œäº†æŠ½è±¡å’Œå°è£…ï¼Œ</p>
<p>è®©å¼€å‘é€»è¾‘èšç„¦äºéœ€è¦å®ç°ä»€ä¹ˆæ ·çš„å¯¹è¯èƒ½åŠ›ï¼Œè€Œä¸æ˜¯æ§åˆ¶å¦‚ä½•è·Ÿæ¨¡å‹äº¤äº’ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50def9559929483eb79972f3738fad16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=1TflBqmvQDoF7dYkSWPhty07TRc%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
</blockquote>
<h3 data-id="heading-9">ä¸šå†…ä¸»æµåº”ç”¨æ¡†æ¶</h3>













































<table><thead><tr><th/><th/><th/><th/><th/><th/></tr></thead><tbody><tr><td><strong>ç»´åº¦</strong></td><td><strong>LangChain</strong></td><td><strong>LangChain4j</strong></td><td><strong>Spring AI</strong></td><td><strong>Eino</strong></td><td/></tr><tr><td>è¯­è¨€</td><td>Python</td><td>Java</td><td>Java</td><td>Go</td><td/></tr><tr><td>å®šä½</td><td>LLM åº”ç”¨æ¡†æ¶</td><td>LangChain çš„ Java ç”Ÿæ€å®ç°</td><td>Spring ä½“ç³»ä¸‹çš„ AI æŠ½è±¡å±‚</td><td>Go ç”Ÿæ€çš„ LLM åº”ç”¨æ¡†æ¶</td><td/></tr><tr><td>ä¸ä¸šåŠ¡æ¡†æ¶èåˆ</td><td>å¼±ï¼ˆåç‹¬ç«‹åº“ï¼‰</td><td>ä¸­ç­‰</td><td>å¼ºï¼ˆSpring åŸç”Ÿï¼‰</td><td>ä¸­ç­‰</td><td/></tr></tbody></table>
<h3 data-id="heading-10">Langchain4j</h3>
<h4 data-id="heading-11">1. èŠå¤©</h4>
<p><strong>è¯­è¨€æ¨¡å‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1753cc1148c447ddb87d47f72b011a7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=Y%2BhNwRiZ2JCAO4XkI7RngV1Bc4E%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<pre><code class="hljs language-scss" lang="scss">OpenAiChatModel model = OpenAiChatModel<span class="hljs-selector-class">.builder</span>()
        <span class="hljs-selector-class">.apiKey</span>(System.getenv("OPENAI_API_KEY"))
        <span class="hljs-selector-class">.modelName</span>("gpt-<span class="hljs-number">4</span>o-mini")
        <span class="hljs-selector-class">.temperature</span>(<span class="hljs-number">0.3</span>)
        <span class="hljs-selector-class">.timeout</span>(ofSeconds(<span class="hljs-number">60</span>))
        <span class="hljs-selector-class">.build</span>();
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>èŠå¤©æ¶ˆæ¯ç±»å‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a49db446dc7d46e68e0e9ce8d43cdd28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=sUulENE6dhTJNWj02ZWfLJJeYl4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p><strong>èŠå¤©è®°å¿†</strong></p>
<p>ChatMemoryæ¥å£æä¾›èŠå¤©å¯¹è¯å­˜å‚¨èƒ½åŠ›ï¼ˆè®°å¿†ï¼‰ï¼Œå¯ä»¥è‡ªå®ç°æ¥å£å®ç°æŒä¹…åŒ–å­˜å‚¨ã€‚langchain4jæä¾›äº†ä¸¤ç§å®ç°ï¼š</p>
<ul>
<li><code>MessageWindowChatMemoryï¼š</code> æ»‘åŠ¨çª—å£ï¼Œä»…ä¿ç•™æœ€è¿‘çª—å£å†…çš„Næ¡å¯¹è¯è®°å½•ã€‚</li>
</ul>

<ul>
<li><code>MessageWindowChatMemoryï¼š</code> ä¹Ÿæ˜¯æ»‘åŠ¨çª—å£ï¼Œä½†ä¸“æ³¨äºä¿ç•™æœ€è¿‘Nä¸ªTokenã€‚</li>
</ul>
<p>å½“æœ‰æ–°æ¶ˆæ¯æ—¶ï¼Œä¼šè‡ªåŠ¨å›è°ƒChatMemoryæ¥å£ä¸­ç›¸å…³çš„æ–¹æ³•ï¼ŒåŒæ­¥æ›´æ–°å¯¹è¯ä¸Šä¸‹æ–‡å­˜å‚¨ã€‚</p>
<p><strong>èŠå¤©ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">interface Assistant {
    String <span class="hljs-built_in">chat</span>(String message);
}

public static void <span class="hljs-selector-tag">main</span>(String[] args) {
    <span class="hljs-comment">// 1. æœ€è¿‘å¯¹è¯(è®°å¿†)å­˜å‚¨å™¨</span>
    ChatMemory chatMemory = MessageWindowChatMemory<span class="hljs-selector-class">.withMaxMessages</span>(<span class="hljs-number">10</span>);
    
    <span class="hljs-comment">// 2. è¯­è¨€æ¨¡å‹</span>
    ChatModel model = OpenAiChatModel<span class="hljs-selector-class">.builder</span>()
            <span class="hljs-selector-class">.apiKey</span>(ApiKeys.OPENAI_API_KEY)
            <span class="hljs-selector-class">.modelName</span>(GPT_4_O_MINI)
            <span class="hljs-selector-class">.build</span>();
    
    <span class="hljs-comment">// 3. aiæœåŠ¡</span>
    Assistant assistant = AiServices<span class="hljs-selector-class">.builder</span>(Assistant.class)
            <span class="hljs-selector-class">.chatModel</span>(model)
            <span class="hljs-selector-class">.chatMemory</span>(chatMemory)
            <span class="hljs-selector-class">.build</span>();

    String answer = assistant<span class="hljs-selector-class">.chat</span>("ä½ å¥½ï¼Œæˆ‘å«å°æ˜");
    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(answer); <span class="hljs-comment">// å°æ˜ä½ å¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</span>

    String answerWithName = assistant<span class="hljs-selector-class">.chat</span>("æˆ‘çš„åå­—å«å•¥");
    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(answerWithName); <span class="hljs-comment">// ä½ å«å°æ˜</span>
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-12">2. å·¥å…·è°ƒç”¨</h4>
<h5 data-id="heading-13"><strong>1. å·¥å…·å®šä¹‰</strong></h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Tool("å¯¹ç»™å®šçš„ 2 ä¸ªæ•°å­—æ±‚å’Œ")</span>
<span class="hljs-type">double</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> {
    <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-meta">@Tool("è¿”å›ç»™å®šæ•°å­—çš„å¹³æ–¹æ ¹")</span>
<span class="hljs-type">double</span> <span class="hljs-title function_">squareRoot</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> {
    <span class="hljs-keyword">return</span> Math.sqrt(x);
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-14"><strong>2. å·¥å…·æ³¨å†Œ</strong></h5>
<pre><code class="hljs language-arduino" lang="arduino">interface MathGenius {
    
    <span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-type">String</span> question)</span></span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
    
    @<span class="hljs-function">Tool
    <span class="hljs-type">double</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
        <span class="hljs-keyword">return</span> a + b;
    }

    @<span class="hljs-function">Tool
    <span class="hljs-type">double</span> <span class="hljs-title">squareRoot</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> </span>{
        <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">sqrt</span>(x);
    }
}

MathGenius mathGenius = AiServices.<span class="hljs-built_in">builder</span>(MathGenius.<span class="hljs-keyword">class</span>)
    .<span class="hljs-built_in">chatLanguageModel</span>(model)
    .<span class="hljs-built_in">tools</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Calculator</span>())
    .<span class="hljs-built_in">build</span>();

<span class="hljs-type">String</span> answer = mathGenius.<span class="hljs-built_in">ask</span>(<span class="hljs-string">"475695037565 çš„å¹³æ–¹æ ¹æ˜¯å¤šå°‘ï¼Ÿ"</span>);

System.out.<span class="hljs-built_in">println</span>(answer); <span class="hljs-comment">// 475695037565 çš„å¹³æ–¹æ ¹æ˜¯ 689706.486532ã€‚</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-15"><strong>3. è°ƒç”¨è¿‡ç¨‹</strong></h5>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ±‚ 1ï¼š
<span class="hljs-bullet">-</span> æ¶ˆæ¯ï¼š
<span class="hljs-bullet">    -</span> UserMessageï¼š
<span class="hljs-bullet">        -</span> æ–‡æœ¬ï¼š475695037565 çš„å¹³æ–¹æ ¹æ˜¯å¤šå°‘ï¼Ÿ
<span class="hljs-bullet">-</span> å·¥å…·ï¼š
<span class="hljs-bullet">    -</span> sum(double a, double b)ï¼šå¯¹ç»™å®šçš„ 2 ä¸ªæ•°å­—æ±‚å’Œ
<span class="hljs-bullet">    -</span> squareRoot(double x)ï¼šè¿”å›ç»™å®šæ•°å­—çš„å¹³æ–¹æ ¹

å“åº” 1ï¼š
<span class="hljs-bullet">-</span> AiMessageï¼š
<span class="hljs-bullet">    -</span> toolExecutionRequestsï¼š
<span class="hljs-bullet">        -</span> squareRoot(475695037565)


è¯·æ±‚ 2ï¼š
<span class="hljs-bullet">-</span> æ¶ˆæ¯ï¼š
<span class="hljs-bullet">    -</span> UserMessageï¼š
<span class="hljs-bullet">        -</span> æ–‡æœ¬ï¼š475695037565 çš„å¹³æ–¹æ ¹æ˜¯å¤šå°‘ï¼Ÿ
<span class="hljs-bullet">    -</span> AiMessageï¼š
<span class="hljs-bullet">        -</span> toolExecutionRequestsï¼š
<span class="hljs-bullet">            -</span> squareRoot(475695037565)
<span class="hljs-bullet">    -</span> ToolExecutionResultMessageï¼š
<span class="hljs-bullet">        -</span> æ–‡æœ¬ï¼š689706.486532

å“åº” 2ï¼š
<span class="hljs-bullet">-</span> AiMessageï¼š
<span class="hljs-bullet">    -</span> æ–‡æœ¬ï¼š475695037565 çš„å¹³æ–¹æ ¹æ˜¯ 689706.486532ã€‚
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-16">4. MCPæ¥å…¥</h5>
<blockquote>
<p>æ¡†æ¶æä¾›mcpå®¢æˆ·ç«¯çš„å°è£…ï¼Œåªéœ€è¦æ³¨å†Œmcpå®¢æˆ·ç«¯ï¼Œå³å¯åƒè°ƒå·¥å…·ä¸€æ ·è°ƒç”¨mcpæœåŠ¡ã€‚</p>
</blockquote>
<p><strong>æ¥å…¥ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">String</span> dashscopeApiKey = <span class="hljs-string">"api-key"</span>;
        
        <span class="hljs-comment">// 0. mcpå®¢æˆ·ç«¯é‰´æƒ</span>
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; headers = <span class="hljs-title class_">Map</span>.<span class="hljs-title function_">of</span>(
            <span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + dashscopeApiKey,
            <span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>
        );
        
        <span class="hljs-comment">// 1. mcpï¼ˆè”ç½‘æœç´¢ï¼‰å°è£…</span>
        <span class="hljs-title class_">McpTransport</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamableHttpMcpTransport</span>.<span class="hljs-title class_">Builder</span>()
            .<span class="hljs-title function_">url</span>(<span class="hljs-string">"https://dashscope.aliyuncs.com/api/v1/mcps/WebSearch/sse"</span>)
            .<span class="hljs-title function_">customHeaders</span>(headers)
            .<span class="hljs-title function_">logRequests</span>(<span class="hljs-literal">true</span>)
            .<span class="hljs-title function_">logResponses</span>(<span class="hljs-literal">true</span>)
            .<span class="hljs-title function_">build</span>();
        
        <span class="hljs-comment">// 2. mcpæ³¨å†Œ</span>
        <span class="hljs-title class_">McpClient</span> mcpClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMcpClient</span>.<span class="hljs-title class_">Builder</span>()
            .<span class="hljs-title function_">transport</span>(transport)
            .<span class="hljs-title function_">build</span>();

        <span class="hljs-title class_">McpToolProvider</span> toolProvider = <span class="hljs-title class_">McpToolProvider</span>.<span class="hljs-title function_">builder</span>()
            .<span class="hljs-title function_">mcpClients</span>(<span class="hljs-title class_">List</span>.<span class="hljs-title function_">of</span>(mcpClient))
            .<span class="hljs-title function_">build</span>();
        
        <span class="hljs-comment">// 3. å¸¦æœ‰è”ç½‘æœç´¢èƒ½åŠ›çš„aiæœåŠ¡</span>
        <span class="hljs-title class_">Bot</span> bot = <span class="hljs-title class_">AiServices</span>.<span class="hljs-title function_">builder</span>(<span class="hljs-title class_">Bot</span>.<span class="hljs-property">class</span>)
            .<span class="hljs-title function_">chatLanguageModel</span>(model)
            .<span class="hljs-title function_">toolProvider</span>(toolProvider)
            .<span class="hljs-title function_">build</span>()
            .<span class="hljs-title function_">getService</span>();
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-17">3. RAG</h4>
<p><strong>å…³é”®è¯è§£é‡Š</strong></p>
<p>Queryï¼šç”¨æˆ·è¾“å…¥</p>
<p>Embedding Modelï¼š å‘é‡åŒ–æ¨¡å‹</p>
<p>Embedding Storeï¼š å‘é‡åŒ–æ•°æ®åº“</p>
<p>Relevant Segmentsï¼š æ£€ç´¢ï¼ˆå¬å›ï¼‰ç»“æœ</p>
<p>Retrieval Augmentorï¼š æ£€ç´¢å¢å¼ºå™¨ï¼Œæ‰€æœ‰RAGç›¸å…³çš„ç»„ä»¶å°è£…åœ¨è¯¥ç±»ä¸­ã€‚</p>
<p>QueryTransformerï¼š é—®é¢˜æ‹†åˆ†å™¨ï¼Œå¦‚æœä¸€æ¬¡queryåŒ…å«å¤šä¸ªé—®é¢˜ï¼Œä¼šè¢«æ‹†åˆ†æˆå­é—®é¢˜ã€‚</p>
<p>Content Retrievalï¼šå†…å®¹æ£€ç´¢å™¨ï¼Œä»ç»™å®šæ•°æ®æºï¼ˆå‘é‡æ•°æ®åº“ï¼‰ä¸­æ£€ç´¢ã€‚</p>
<p>Query Routerï¼šqueryè·¯ç”±å™¨ï¼Œå°†æ‹†åˆ†çš„å­é—®é¢˜æ™ºèƒ½è·¯ç”±åˆ°æ£€ç´¢å™¨ä¸­ã€‚</p>
<p>Content Aggregatorï¼šå†…å®¹èšåˆå™¨ï¼Œè§„å®šå¦‚ä½•å°†å¤šä¸ªå†…å®¹æ£€ç´¢å™¨çš„ç»“æœèšåˆã€‚</p>
<p>Content Injectorï¼šè§„å®šæ£€ç´¢ç»“æœå¦‚ä½•åµŒå…¥åˆ°åŸå§‹queryä¸­ã€‚</p>
<h5 data-id="heading-18">æ£€ç´¢æµç¨‹</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f159996386943c586c680e610eae538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=OxmUW%2Fv0FS7h30LD68yd5id%2Flmg%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p><strong>ä½œä¸šæµç¨‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/223bb2ecdd754898b8bf335a776f2b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NzY5NDkwMDQxMzQ5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770953882&amp;x-signature=xmA%2BJGT4%2BMY9Cr35qPIdrJqdIsI%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VueçŠ¶æ€ç®¡ç†å°ç¥å¯¹æ¯”ï¼šPinia vs Vuexï¼Œåˆ°åº•è¯¥å¼ƒç”¨è°ï¼Ÿï¼ˆæ ¸å¿ƒå·®å¼‚ä¸€æ–‡åƒé€ï¼‰]]></title>    <link>https://juejin.cn/post/7603201727715672116</link>    <guid>https://juejin.cn/post/7603201727715672116</guid>    <pubDate>2026-02-06T01:35:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603201727715672116" data-draft-id="7602929352717484032" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VueçŠ¶æ€ç®¡ç†å°ç¥å¯¹æ¯”ï¼šPinia vs Vuexï¼Œåˆ°åº•è¯¥å¼ƒç”¨è°ï¼Ÿï¼ˆæ ¸å¿ƒå·®å¼‚ä¸€æ–‡åƒé€ï¼‰"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-06T01:35:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VueçŠ¶æ€ç®¡ç†å°ç¥å¯¹æ¯”ï¼šPinia vs Vuexï¼Œåˆ°åº•è¯¥å¼ƒç”¨è°ï¼Ÿï¼ˆæ ¸å¿ƒå·®å¼‚ä¸€æ–‡åƒé€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T01:35:39.000Z" title="Fri Feb 06 2026 01:35:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­£æ–‡</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦ææ‡‚Piniaå’ŒVuexçš„åŒºåˆ«ï¼Ÿ</h3>
<p>åœ¨Vueé¡¹ç›®å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯ä¸­å¤§å‹é¡¹ç›®çš„åˆšéœ€â€”â€”å½“ç»„ä»¶é—´å…±äº«æ•°æ®ã€è·¨å±‚çº§é€šä¿¡é¢‘ç¹æ—¶ï¼Œå•çº¯ä¾é props/emitsã€provide/injectä¼šå¯¼è‡´ä»£ç å†—ä½™ã€çŠ¶æ€æ··ä¹±ï¼Œæ­¤æ—¶å°±éœ€è¦ä¸“é—¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚</p>
<p>Vuexä½œä¸ºVueå®˜æ–¹æ—©æœŸæ¨å‡ºçš„çŠ¶æ€ç®¡ç†åº“ï¼Œæ›¾æ˜¯Vueé¡¹ç›®çš„â€œæ ‡é…â€ï¼›è€ŒPiniaä½œä¸ºVue3å®˜æ–¹æ¨èçš„æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼Œå‡­å€Ÿæ›´ç®€æ´çš„APIã€æ›´å‹å¥½çš„TSæ”¯æŒï¼Œé€æ¸å–ä»£Vuexæˆä¸ºä¸»æµã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…éƒ½ä¼šå›°æƒ‘ï¼šPiniaå’ŒVuexåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ–°é¡¹ç›®è¯¥é€‰å“ªä¸ªï¼Ÿæ—§é¡¹ç›®è¦ä¸è¦ä»Vuexè¿ç§»åˆ°Piniaï¼Ÿæœ¬æ–‡èšç„¦ä¸¤è€…<strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼Œä¸å †ç Œæ— å…³çŸ¥è¯†ç‚¹ï¼Œå¸®ä½ å¿«é€Ÿç†æ¸…é€‰å‹æ€è·¯ã€åƒé€ç”¨æ³•åŒºåˆ«ã€‚</p>
<h3 data-id="heading-2">äºŒã€å…ˆæ˜ç¡®ï¼šä¸¤è€…çš„æ ¸å¿ƒå®šä½ï¼ˆå¿«é€ŸåŒºåˆ†ï¼‰</h3>
<p>åœ¨æ·±å…¥å¯¹æ¯”å‰ï¼Œå…ˆæ˜ç¡®ä¸¤è€…çš„æ ¸å¿ƒå®šä½ï¼Œé¿å…æ··æ·†ï¼Œå¿«é€ŸåŒ¹é…è‡ªèº«é¡¹ç›®éœ€æ±‚ï¼š</p>
<ul>
<li><strong>Vuex</strong>ï¼šVueå®˜æ–¹æ—©æœŸæ¨å‡ºçš„çŠ¶æ€ç®¡ç†åº“ï¼Œé€‚ç”¨äºVue2ã€Vue3é¡¹ç›®ï¼Œæ ¸å¿ƒé‡‡ç”¨â€œå•ä¸€çŠ¶æ€æ ‘+æ¨¡å—åŒ–â€è®¾è®¡ï¼Œè§„èŒƒä¸¥æ ¼ä½†ç”¨æ³•ç¹çï¼Œä¾§é‡â€œé›†ä¸­å¼ç®¡ç†â€ã€‚</li>
<li><strong>Pinia</strong>ï¼šVue3å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼ˆVueæ ¸å¿ƒå›¢é˜Ÿå¼€å‘ï¼‰ï¼Œå¯å…¼å®¹Vue2ï¼Œæ ¸å¿ƒé‡‡ç”¨â€œæ¨¡å—åŒ–å­˜å‚¨â€ï¼ˆæ— å•ä¸€çŠ¶æ€æ ‘é™åˆ¶ï¼‰ï¼ŒAPIç®€æ´ã€TSå‹å¥½ï¼Œä¾§é‡â€œè½»é‡åŒ–ã€æ˜“ç”¨æ€§â€ï¼Œæ˜¯Vuexçš„æ›¿ä»£æ–¹æ¡ˆã€‚</li>
</ul>
<p>å…³é”®ç»“è®ºï¼šVue3æ–°é¡¹ç›®ä¼˜å…ˆé€‰Piniaï¼›Vue2é¡¹ç›®å¯ç»§ç»­ç”¨Vuexï¼Œä¹Ÿå¯è¿ç§»åˆ°Piniaï¼›å°å‹é¡¹ç›®æ— éœ€çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œä¸­å¤§å‹é¡¹ç›®ä¼˜å…ˆPiniaã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒå·®å¼‚æ‹†è§£ï¼ˆé‡ç‚¹ï¼5ä¸ªç»´åº¦å¯¹æ¯”ï¼Œä¸€ç›®äº†ç„¶ï¼‰</h3>
<p>ä»¥ä¸‹æ˜¯Piniaä¸Vuexï¼ˆä»¥Vuex 4.xä¸ºä¾‹ï¼Œé€‚é…Vue3ï¼‰çš„æ ¸å¿ƒå·®å¼‚ï¼Œç»“åˆå®æ“ä½“éªŒå’Œé¡¹ç›®åœºæ™¯ï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ã€‚</p>
<h4 data-id="heading-4">1. æ ¸å¿ƒæ¶æ„ï¼šå•ä¸€çŠ¶æ€æ ‘ vs æ¨¡å—åŒ–å­˜å‚¨ï¼ˆæœ€æ ¸å¿ƒå·®å¼‚ï¼‰</h4>
<p>è¿™æ˜¯ä¸¤è€…æœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œç›´æ¥å†³å®šäº†ç”¨æ³•å¤æ‚åº¦å’Œé¡¹ç›®é€‚é…æ€§ï¼š</p>
<h5 data-id="heading-5">Vuexï¼šå•ä¸€çŠ¶æ€æ ‘ï¼ˆSingle State Treeï¼‰</h5>
<p>Vuexçš„æ ¸å¿ƒè®¾è®¡æ˜¯â€œå•ä¸€çŠ¶æ€æ ‘â€â€”â€”æ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰çŠ¶æ€ï¼Œéƒ½é›†ä¸­åœ¨ä¸€ä¸ªå¤§çš„stateå¯¹è±¡ä¸­ï¼Œå³ä½¿æ˜¯æ¨¡å—åŒ–å¼€å‘ï¼Œæœ€ç»ˆä¹Ÿä¼šåˆå¹¶åˆ°è¿™ä¸ªå•ä¸€çŠ¶æ€æ ‘ä¸­ã€‚</p>
<p>ç—›ç‚¹ï¼šå½“é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œæ¨¡å—åŒ–å¢å¤šæ—¶ï¼Œå•ä¸€çŠ¶æ€æ ‘ä¼šå˜å¾—å¼‚å¸¸åºå¤§ï¼ŒçŠ¶æ€æŸ¥æ‰¾ã€è°ƒè¯•ã€ç»´æŠ¤éš¾åº¦ç¿»å€ï¼›ä¸”æ¨¡å—åŒ–éœ€è¦æ‰‹åŠ¨æ³¨å†Œã€å‘½åç©ºé—´ï¼ˆnamespaced: trueï¼‰ï¼Œç”¨æ³•ç¹çã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Vuex 4.x æ¨¡å—åŒ–å†™æ³•ï¼ˆç¹çï¼‰</span>
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-comment">// å®šä¹‰æ¨¡å—</span>
<span class="hljs-keyword">const</span> userModule = {
  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨å¼€å¯å‘½åç©ºé—´ï¼Œå¦åˆ™çŠ¶æ€ã€æ–¹æ³•ä¼šå†²çª</span>
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Vuex'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">5</span> }),
  <span class="hljs-attr">mutations</span>: { <span class="hljs-title function_">setName</span>(<span class="hljs-params">state, name</span>) { state.<span class="hljs-property">name</span> = name } },
  <span class="hljs-attr">actions</span>: { <span class="hljs-title function_">fetchName</span>(<span class="hljs-params">{ commit }</span>) { <span class="hljs-comment">/* å¼‚æ­¥é€»è¾‘ */</span> } }
}

<span class="hljs-comment">// å•ä¸€çŠ¶æ€æ ‘ï¼šæ‰€æœ‰æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªstoreä¸­</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>({
  <span class="hljs-attr">modules</span>: {
    <span class="hljs-attr">user</span>: userModule <span class="hljs-comment">// æ³¨å†Œæ¨¡å—ï¼Œä½¿ç”¨æ—¶éœ€åŠ å‘½åç©ºé—´ï¼ˆuser/setNameï¼‰</span>
  }
})
</code></pre>
<h5 data-id="heading-6">Piniaï¼šæ¨¡å—åŒ–å­˜å‚¨ï¼ˆæ— å•ä¸€çŠ¶æ€æ ‘é™åˆ¶ï¼‰</h5>
<p>Piniaæ‘’å¼ƒäº†â€œå•ä¸€çŠ¶æ€æ ‘â€ï¼Œé‡‡ç”¨â€œæ¨¡å—åŒ–å­˜å‚¨â€â€”â€”æ¯ä¸ªæ¨¡å—ï¼ˆç§°ä¹‹ä¸ºStoreï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‹¥æœ‰è‡ªå·±çš„stateã€actionsã€gettersï¼Œæ— éœ€åˆå¹¶åˆ°å…¨å±€ï¼Œä¹Ÿæ— éœ€æ‰‹åŠ¨å¼€å¯å‘½åç©ºé—´ã€‚</p>
<p>ä¼˜åŠ¿ï¼šç»“æ„æ¸…æ™°ï¼Œæ¯ä¸ªæ¨¡å—ç‹¬ç«‹ç»´æŠ¤ï¼Œè°ƒè¯•ã€ç»´æŠ¤æ›´ç®€å•ï¼›æ— éœ€å‘½åç©ºé—´ï¼Œç›´æ¥è°ƒç”¨æ¨¡å—æ–¹æ³•å³å¯ï¼Œç”¨æ³•æ›´ç®€æ´ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Pinia æ¨¡å—åŒ–å†™æ³•ï¼ˆç®€æ´ï¼‰</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„Storeï¼ˆæ¨¡å—ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Pinia'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">3</span> }),
  <span class="hljs-attr">actions</span>: { <span class="hljs-title function_">setName</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name } }, <span class="hljs-comment">// æ— éœ€mutationsï¼Œç›´æ¥ä¿®æ”¹state</span>
  <span class="hljs-attr">getters</span>: { <span class="hljs-title function_">fullName</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">`Mr. <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span> } }
})

<span class="hljs-comment">// å†å®šä¹‰å¦ä¸€ä¸ªç‹¬ç«‹çš„Storeï¼ˆæ— éœ€åˆå¹¶ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">list</span>: [] }),
  <span class="hljs-attr">actions</span>: { <span class="hljs-title function_">addCart</span>(<span class="hljs-params">item</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span>.<span class="hljs-title function_">push</span>(item) } }
})
</code></pre>
<h4 data-id="heading-7">2. APIè®¾è®¡ï¼šç¹çå†—ä½™ vs ç®€æ´æ˜“ç”¨ï¼ˆå¼€å‘æ•ˆç‡å·®å¼‚ï¼‰</h4>
<p>Vuexçš„APIè®¾è®¡ç¹çï¼Œéœ€è¦åŒºåˆ†mutationsã€actionsã€gettersï¼Œä¸”ä¿®æ”¹çŠ¶æ€å¿…é¡»é€šè¿‡mutationsï¼›è€ŒPiniaç®€åŒ–äº†APIï¼Œå»æ‰äº†mutationsï¼Œç”¨æ³•æ›´çµæ´»ã€‚</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Vuex 4.x</th><th>Pinia</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>çŠ¶æ€ä¿®æ”¹</td><td>å¿…é¡»é€šè¿‡mutationsï¼ˆåŒæ­¥ï¼‰ã€actionsï¼ˆå¼‚æ­¥ï¼‰ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹state</td><td>æ— éœ€mutationsï¼Œå¯åœ¨actionsä¸­ç›´æ¥ä¿®æ”¹stateï¼ˆåŒæ­¥/å¼‚æ­¥å‡å¯ï¼‰</td><td>Piniaï¼šå‡å°‘ä»£ç å†—ä½™ï¼Œå¼‚æ­¥é€»è¾‘æ›´ç®€æ´</td></tr><tr><td>æ¨¡å—åŒ–</td><td>éœ€æ‰‹åŠ¨æ³¨å†Œæ¨¡å—ã€å¼€å¯å‘½åç©ºé—´</td><td>æ¯ä¸ªdefineStoreå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œè‡ªåŠ¨éš”ç¦»</td><td>Piniaï¼šå¼€å‘æ•ˆç‡æ›´é«˜ï¼Œæ— éœ€å…³æ³¨å‘½åå†²çª</td></tr><tr><td>getters</td><td>æ”¯æŒï¼Œä½†ç”¨æ³•ç¹çï¼Œéœ€åœ¨æ¨¡å—ä¸­å®šä¹‰</td><td>æ”¯æŒï¼Œå†™æ³•ç®€æ´ï¼Œå¯ç›´æ¥è®¿é—®stateï¼Œæ”¯æŒç¼“å­˜</td><td>Piniaï¼šAPIæ›´å‹å¥½ï¼Œç¼“å­˜æ€§èƒ½æ›´ä¼˜</td></tr><tr><td>å…¨å±€æ³¨å†Œ</td><td>éœ€åˆ›å»ºstoreå®ä¾‹ï¼Œæ‰‹åŠ¨æŒ‚è½½åˆ°Vueå®ä¾‹</td><td>åªéœ€åˆ›å»ºStoreï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œï¼Œç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</td><td>Piniaï¼šç®€åŒ–é…ç½®ï¼Œå‡å°‘å†—ä½™ä»£ç </td></tr></tbody></table>
<h4 data-id="heading-8">3. TSæ”¯æŒï¼šå‹‰å¼ºé€‚é… vs åŸç”Ÿå‹å¥½ï¼ˆå¤§å‹é¡¹ç›®å…³é”®ï¼‰</h4>
<p>TSæ”¯æŒæ˜¯ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯å¤§å‹é¡¹ç›®é€‰å‹çš„å…³é”®å› ç´ â€”â€”Vuexå¯¹TSçš„æ”¯æŒè¾ƒå·®ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰å¤§é‡ç±»å‹ï¼Œè€ŒPiniaåŸç”Ÿæ”¯æŒTSï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</p>
<h5 data-id="heading-9">Vuexï¼šTSæ”¯æŒç¹çï¼Œä½“éªŒå·®</h5>
<p>Vuexçš„APIè®¾è®¡æ²¡æœ‰è€ƒè™‘TSçš„ç±»å‹æ¨å¯¼ï¼Œä½¿ç”¨TSæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰stateã€mutationsã€actionsçš„ç±»å‹ï¼Œä»£ç å†—ä½™ï¼Œä¸”å®¹æ˜“å‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Vuex + TS å†™æ³•ï¼ˆç¹çï¼‰</span>
<span class="hljs-keyword">import</span> { createStore, <span class="hljs-title class_">Commit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-comment">// æ‰‹åŠ¨å®šä¹‰stateç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserState</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">const</span> userModule = {
  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">state</span>: (): <span class="hljs-function"><span class="hljs-params">UserState</span> =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Vuex'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">5</span> }),
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-comment">// æ‰‹åŠ¨å®šä¹‰å‚æ•°ç±»å‹</span>
    <span class="hljs-title function_">setName</span>(<span class="hljs-params">state: UserState, name: <span class="hljs-built_in">string</span></span>) {
      state.<span class="hljs-property">name</span> = name
    }
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æ‰‹åŠ¨å®šä¹‰commitç±»å‹</span>
    <span class="hljs-title function_">fetchName</span>(<span class="hljs-params">{ commit }: { commit: Commit }, name: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-title function_">commit</span>(<span class="hljs-string">'setName'</span>, name)
    }
  }
}
</code></pre>
<h5 data-id="heading-10">Piniaï¼šåŸç”ŸTSæ”¯æŒï¼Œé›¶é¢å¤–é…ç½®</h5>
<p>Piniaæ˜¯åŸºäºTSå¼€å‘çš„ï¼ŒåŸç”Ÿæ”¯æŒç±»å‹æ¨å¯¼ï¼Œæ— éœ€æ‰‹åŠ¨å®šä¹‰å¤§é‡ç±»å‹ï¼Œstateã€actionsã€gettersçš„ç±»å‹ä¼šè‡ªåŠ¨æ¨å¯¼ï¼Œå¼€å‘ä½“éªŒæä½³ï¼Œæ˜¯å¤§å‹TSé¡¹ç›®çš„é¦–é€‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Pinia + TS å†™æ³•ï¼ˆç®€æ´ï¼Œè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼‰</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨å®šä¹‰stateç±»å‹ï¼Œè‡ªåŠ¨æ¨å¯¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Pinia'</span>, <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ä¸ºstringç±»å‹</span>
    <span class="hljs-attr">age</span>: <span class="hljs-number">3</span> <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ä¸ºnumberç±»å‹</span>
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹ã€thisç±»å‹</span>
    <span class="hljs-title function_">setName</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name <span class="hljs-comment">// thisè‡ªåŠ¨å…³è”stateç±»å‹ï¼Œä¸ä¼šæŠ¥é”™</span>
    }
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼è¿”å›å€¼ç±»å‹</span>
    <span class="hljs-title function_">fullName</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`Mr. <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span> <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ä¸ºstringç±»å‹</span>
    }
  }
})
</code></pre>
<h4 data-id="heading-11">4. æ€§èƒ½ï¼šç•¥é€Š vs æ›´ä¼˜ï¼ˆä¸­å¤§å‹é¡¹ç›®æ„ŸçŸ¥æ˜æ˜¾ï¼‰</h4>
<p>ä¸¤è€…çš„æ€§èƒ½å·®å¼‚ä¸»è¦ä½“ç°åœ¨â€œçŠ¶æ€æ›´æ–°â€å’Œâ€œæ¨¡å—åŒ–æ¸²æŸ“â€ä¸Šï¼Œå°å‹é¡¹ç›®æ„ŸçŸ¥ä¸æ˜æ˜¾ï¼Œä¸­å¤§å‹é¡¹ç›®å·®å¼‚æ˜¾è‘—ï¼š</p>
<ul>
<li>Vuexï¼šç”±äºé‡‡ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œå½“æŸä¸ªæ¨¡å—çš„stateæ›´æ–°æ—¶ï¼Œä¼šè§¦å‘å…¨å±€stateçš„é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å…¶ä»–æ¨¡å—ä¸è¯¥æ›´æ–°æ— å…³ï¼Œä¹Ÿå¯èƒ½å‡ºç°ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</li>
<li>Piniaï¼šæ¯ä¸ªStoreæ˜¯ç‹¬ç«‹çš„ï¼ŒçŠ¶æ€æ›´æ–°æ—¶ï¼Œåªä¼šè§¦å‘ä½¿ç”¨è¯¥Storeçš„ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¸ä¼šå½±å“å…¶ä»–æ¨¡å—ï¼Œæ€§èƒ½æ›´ä¼˜ï¼›ä¸”Piniaå»æ‰äº†mutationsçš„ä¸­é—´å±‚ï¼ŒçŠ¶æ€æ›´æ–°æ›´é«˜æ•ˆã€‚</li>
</ul>
<h4 data-id="heading-12">5. ç”Ÿæ€ä¸å…¼å®¹æ€§ï¼šæˆç†Ÿ vs ä¸»æµï¼ˆé€‰å‹å‚è€ƒï¼‰</h4>
<ul>
<li><strong>Vuex</strong>ï¼šç”Ÿæ€æˆç†Ÿï¼Œæœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ˆå¦‚vuex-persistedstateç”¨äºçŠ¶æ€æŒä¹…åŒ–ï¼‰ï¼›å…¼å®¹Vue2ã€Vue3ï¼Œä½†Vue3ä¸­å·²ä¸å†æ¨èä½¿ç”¨ï¼Œåç»­ä¸ä¼šæœ‰é‡å¤§æ›´æ–°ã€‚</li>
<li><strong>Pinia</strong>ï¼šç”Ÿæ€é€æ¸å®Œå–„ï¼Œå®˜æ–¹æ”¯æŒçŠ¶æ€æŒä¹…åŒ–ï¼ˆpinia-plugin-persistedstateï¼‰ï¼Œä¸”å…¼å®¹Vue2ã€Vue3ï¼›æ˜¯Vue3å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œåç»­ä¼šæŒç»­è¿­ä»£æ›´æ–°ï¼Œç”Ÿæ€ä¼šè¶Šæ¥è¶Šå®Œå–„ã€‚</li>
</ul>
<h3 data-id="heading-13">å››ã€å®æ“å¯¹æ¯”ï¼šç»„ä»¶ä¸­ä½¿ç”¨æ–¹å¼ï¼ˆç›´è§‚æ„Ÿå—å·®å¼‚ï¼‰</h3>
<p>ç»“åˆç»„ä»¶ä¸­çš„å®é™…ä½¿ç”¨æ–¹å¼ï¼Œæ›´ç›´è§‚åœ°æ„Ÿå—ä¸¤è€…çš„ç”¨æ³•å·®å¼‚ï¼Œæ–°æ‰‹å¯ç›´æ¥å¯¹æ¯”å¥—ç”¨ã€‚</p>
<h4 data-id="heading-14">1. Vuex åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ $store.state.user.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSetName"</span>&gt;</span>ä¿®æ”¹åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

<span class="hljs-comment">// 1. è·å–storeå®ä¾‹</span>
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useStore</span>()

<span class="hljs-comment">// 2. è°ƒç”¨mutationsä¿®æ”¹çŠ¶æ€ï¼ˆå¿…é¡»é€šè¿‡mutationsï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSetName</span> = (<span class="hljs-params"/>) =&gt; {
  store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'user/setName'</span>, <span class="hljs-string">'Vuex-Update'</span>) <span class="hljs-comment">// éœ€åŠ å‘½åç©ºé—´</span>
}

<span class="hljs-comment">// 3. è°ƒç”¨actionsæ‰§è¡Œå¼‚æ­¥é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchName</span> = (<span class="hljs-params"/>) =&gt; {
  store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'user/fetchName'</span>, <span class="hljs-string">'Vuex-Async'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-15">2. Pinia åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ userStore.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>{{ userStore.fullName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSetName"</span>&gt;</span>ä¿®æ”¹åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// 1. ç›´æ¥å¯¼å…¥å¯¹åº”çš„Storeï¼Œæ— éœ€è·å–å…¨å±€å®ä¾‹</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()

<span class="hljs-comment">// 2. ç›´æ¥è°ƒç”¨actionsä¿®æ”¹çŠ¶æ€ï¼ˆæ— éœ€mutationsï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSetName</span> = (<span class="hljs-params"/>) =&gt; {
  userStore.<span class="hljs-title function_">setName</span>(<span class="hljs-string">'Pinia-Update'</span>) <span class="hljs-comment">// æ— éœ€åŠ å‘½åç©ºé—´ï¼Œç›´æ¥è°ƒç”¨</span>
}

<span class="hljs-comment">// 3. è°ƒç”¨actionsæ‰§è¡Œå¼‚æ­¥é€»è¾‘ï¼ˆä¸åŒæ­¥å†™æ³•ä¸€è‡´ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchName</span> = (<span class="hljs-params"/>) =&gt; {
  userStore.<span class="hljs-title function_">fetchName</span>(<span class="hljs-string">'Pinia-Async'</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-16">äº”ã€é€‰å‹å»ºè®®ï¼ˆæ–°æ‰‹ç›´æ¥æŠ„ä½œä¸šï¼‰</h3>
<p>ç»“åˆé¡¹ç›®è§„æ¨¡ã€æŠ€æœ¯æ ˆã€å¼€å‘éœ€æ±‚ï¼Œç»™å‡ºæ˜ç¡®çš„é€‰å‹å»ºè®®ï¼Œé¿å…ç›²ç›®é€‰å‹ï¼š</p>
<ol>
<li>Vue3 + æ–°é¡¹ç›®ï¼ˆæ— è®ºå¤§å°ï¼‰ï¼š<strong>ä¼˜å…ˆé€‰Pinia</strong>â€”â€”APIç®€æ´ã€TSå‹å¥½ã€æ€§èƒ½æ›´ä¼˜ï¼Œç¬¦åˆVue3çš„å‘å±•è¶‹åŠ¿ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ã€‚</li>
<li>Vue3 + æ—§é¡¹ç›®ï¼ˆå·²ç”¨Vuexï¼‰ï¼š<strong>å¯æš‚ä¸è¿ç§»</strong>ï¼Œä½†æ–°æ¨¡å—å»ºè®®ç”¨Piniaï¼›è‹¥é¡¹ç›®é‡æ„ï¼Œå¯é€æ­¥è¿ç§»åˆ°Piniaã€‚</li>
<li>Vue2 + é¡¹ç›®ï¼š<strong>ç»§ç»­ç”¨Vuex</strong>ï¼Œæˆ–è¿ç§»åˆ°Piniaï¼ˆPiniaå…¼å®¹Vue2ï¼Œä½†éœ€é¢å¤–é…ç½®ï¼‰ï¼›å°å‹Vue2é¡¹ç›®æ— éœ€çŠ¶æ€ç®¡ç†å·¥å…·ã€‚</li>
<li>å¤§å‹TSé¡¹ç›®ï¼š<strong>å¿…é€‰Pinia</strong>â€”â€”åŸç”ŸTSæ”¯æŒï¼Œå‡å°‘ç±»å‹å®šä¹‰å†—ä½™ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚</li>
<li>å°å‹é¡¹ç›®ï¼ˆæ— å¤æ‚çŠ¶æ€å…±äº«ï¼‰ï¼š<strong>æ— éœ€ä½¿ç”¨çŠ¶æ€ç®¡ç†å·¥å…·</strong>ï¼Œç”¨props/emitsã€provide/injectå³å¯æ»¡è¶³éœ€æ±‚ï¼Œé¿å…è¿‡åº¦å°è£…ã€‚</li>
</ol>
<h3 data-id="heading-17">å…­ã€æ€»ç»“ï¼šæ ¸å¿ƒè¦ç‚¹ï¼ˆæ–°æ‰‹å¿…èƒŒï¼‰</h3>
<p>Piniaä¸æ˜¯Vuexçš„â€œå‡çº§ç‰ˆæœ¬â€ï¼Œè€Œæ˜¯Vueå®˜æ–¹æ¨å‡ºçš„â€œæ›¿ä»£æ–¹æ¡ˆâ€ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äºâ€œç®€æ´ã€æ˜“ç”¨ã€TSå‹å¥½â€ï¼Œä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚å¯æ€»ç»“ä¸º3å¥è¯ï¼š</p>
<ol>
<li>æ¶æ„ä¸Šï¼šVuexæ˜¯å•ä¸€çŠ¶æ€æ ‘+ç¹çæ¨¡å—åŒ–ï¼ŒPiniaæ˜¯ç‹¬ç«‹æ¨¡å—åŒ–+æ— å‘½åç©ºé—´ï¼Œç»´æŠ¤æ›´ç®€å•ï¼›</li>
<li>ç”¨æ³•ä¸Šï¼šVuexéœ€åŒºåˆ†mutations/actionsï¼ŒPiniaå»æ‰mutationsï¼ŒAPIæ›´ç®€æ´ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ï¼›</li>
<li>ä½“éªŒä¸Šï¼šVuex TSæ”¯æŒå·®ï¼ŒPiniaåŸç”ŸTSå‹å¥½ï¼Œä¸­å¤§å‹é¡¹ç›®æ€§èƒ½æ›´ä¼˜ï¼Œæ˜¯Vue3é¦–é€‰ã€‚</li>
</ol>
<p>å…¶å®ä¸¤è€…çš„æ ¸å¿ƒåŠŸèƒ½éƒ½æ˜¯â€œçŠ¶æ€ç®¡ç†â€ï¼Œä½†Piniaè§£å†³äº†Vuexçš„è¯¸å¤šç—›ç‚¹ï¼Œæ›´è´´åˆç°ä»£Vueé¡¹ç›®çš„å¼€å‘éœ€æ±‚ã€‚æ–°æ‰‹å»ºè®®ç›´æ¥ä»Piniaå…¥æ‰‹ï¼Œä¸Šæ‰‹ç®€å•ã€æ˜“ç²¾é€šï¼›è€æ‰‹å¯å¿«é€Ÿè¿ç§»ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚æŒæ¡ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ï¼Œæ— è®ºé€‰å‹è¿˜æ˜¯å¼€å‘ï¼Œéƒ½èƒ½æ¸¸åˆƒæœ‰ä½™ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Piniaå°ç¥ç”¨æ³•å¯¹æ¯”ï¼šSetup Store vs Option Storeï¼Œåˆ°åº•è¯¥ç”¨å“ªç§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603183929252986932</link>    <guid>https://juejin.cn/post/7603183929252986932</guid>    <pubDate>2026-02-06T01:39:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603183929252986932" data-draft-id="7602936997176115252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Piniaå°ç¥ç”¨æ³•å¯¹æ¯”ï¼šSetup Store vs Option Storeï¼Œåˆ°åº•è¯¥ç”¨å“ªç§ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-06T01:39:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Piniaå°ç¥ç”¨æ³•å¯¹æ¯”ï¼šSetup Store vs Option Storeï¼Œåˆ°åº•è¯¥ç”¨å“ªç§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T01:39:53.000Z" title="Fri Feb 06 2026 01:39:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­£æ–‡</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦åˆ†æ¸…Setup Storeå’ŒOption Storeï¼Ÿ</h3>
<p>Piniaä½œä¸ºVue3å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œå½»åº•æ‘’å¼ƒäº†Vuexçš„ç¹çé…ç½®ï¼Œè€Œå®ƒçš„çµæ´»æ€§æ ¸å¿ƒï¼Œå°±åœ¨äºæ”¯æŒä¸¤ç§æˆªç„¶ä¸åŒçš„Storeå†™æ³•â€”â€”Setup Storeå’ŒOption Storeã€‚</p>
<p>å¾ˆå¤šä½¿ç”¨Piniaçš„å¼€å‘è€…éƒ½ä¼šå›°æƒ‘ï¼šä¸¤ç§å†™æ³•åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨Option Storeï¼Ÿä»€ä¹ˆæ—¶å€™é€‰Setup Storeï¼Ÿé€‰é”™å†™æ³•ä¸ä»…ä¼šå¢åŠ ä»£ç å†—ä½™ï¼Œè¿˜ä¼šé™ä½å¼€å‘æ•ˆç‡ã€‚</p>
<p>æœ¬æ–‡èšç„¦ä¸¤è€…<strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼Œä¸å †ç Œæ— å…³çŸ¥è¯†ç‚¹ï¼Œç»“åˆVue3 
</p><h3 data-id="heading-2">äºŒã€å…ˆæ˜ç¡®ï¼šä¸¤è€…çš„æ ¸å¿ƒå®šä½ï¼ˆå¿«é€ŸåŒºåˆ†ï¼‰</h3>
<p>åœ¨æ·±å…¥å¯¹æ¯”å‰ï¼Œå…ˆæ˜ç¡®ä¸¤ç§å†™æ³•çš„æ ¸å¿ƒå®šä½ï¼Œä¸€å¥è¯åˆ†æ¸…ï¼Œé¿å…æ··æ·†ï¼š</p>
<ul>
<li><strong>Option Storeï¼ˆé€‰é¡¹å¼Storeï¼‰</strong> ï¼šPiniaæ—©æœŸæ¨èå†™æ³•ï¼Œæ¨¡ä»¿Vuexçš„é€‰é¡¹å¼APIï¼ˆstateã€gettersã€actionsï¼‰ï¼Œç»“æ„æ¸…æ™°ã€è§„èŒƒï¼Œä¸Šæ‰‹é—¨æ§›ä½ï¼Œé€‚åˆç®€å•çŠ¶æ€ç®¡ç†åœºæ™¯ã€‚</li>
<li><strong>Setup Storeï¼ˆç»„åˆå¼Storeï¼‰</strong> ï¼šPiniaç›®å‰æ¨èå†™æ³•ï¼Œè´´åˆVue3ç»„åˆå¼APIï¼ˆ
</li></ul>
<p>å…³é”®ç»“è®ºï¼šç®€å•åœºæ™¯ï¼ˆæ— å¤æ‚é€»è¾‘ã€å°‘é‡çŠ¶æ€ï¼‰ç”¨Option Storeï¼›å¤æ‚åœºæ™¯ï¼ˆå¤šé€»è¾‘ã€å¤šå¤ç”¨ã€TSå‹å¥½ï¼‰ç”¨Setup Storeï¼›Vue3æ–°é¡¹ç›®ä¼˜å…ˆé€‰Setup Storeï¼Œè´´åˆç»„åˆå¼å¼€å‘è¶‹åŠ¿ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒå·®å¼‚æ‹†è§£ï¼ˆé‡ç‚¹ï¼4ä¸ªç»´åº¦å¯¹æ¯”ï¼Œä¸€ç›®äº†ç„¶ï¼‰</h3>
<p>ä»¥ä¸‹æ˜¯Setup Storeä¸Option Storeçš„æ ¸å¿ƒå·®å¼‚ï¼Œç»“åˆå®æ“ä»£ç ï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”å®é™…å¼€å‘ä¸­çš„ç”¨æ³•é€‰æ‹©ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ï¼ˆå‡åŸºäºVue3 + TSæ¼”ç¤ºï¼Œé€‚é…ä¸»æµå¼€å‘åœºæ™¯ï¼‰ã€‚</p>
<h4 data-id="heading-4">1. å†™æ³•æ ¼å¼ï¼šé€‰é¡¹å¼ vs ç»„åˆå¼ï¼ˆæœ€ç›´è§‚å·®å¼‚ï¼‰</h4>
<p>ä¸¤è€…çš„å†™æ³•å·®å¼‚æœ€ç›´è§‚ï¼ŒOption Storeæ˜¯â€œå¯¹è±¡é€‰é¡¹â€ï¼ŒSetup Storeæ˜¯â€œå‡½æ•°è¿”å›â€ï¼Œç»“åˆä»£ç å¿«é€Ÿæ„Ÿå—ï¼š</p>
<h5 data-id="heading-5">Option Storeï¼šé€‰é¡¹å¼å†™æ³•ï¼ˆæ¨¡ä»¿Vuexï¼Œè§„èŒƒæ¸…æ™°ï¼‰</h5>
<p>æ ¸å¿ƒï¼šç”¨å¯¹è±¡å½¢å¼å®šä¹‰stateã€gettersã€actionsä¸‰ä¸ªé€‰é¡¹ï¼Œç»“æ„å›ºå®šï¼ŒPiniaä¼šè‡ªåŠ¨å¤„ç†ä¸‰è€…çš„å…³è”ï¼Œä¸Šæ‰‹ç®€å•ï¼Œé€‚åˆæ–°æ‰‹ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Option Store å†™æ³•ï¼ˆsrc/stores/user.tsï¼‰</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// å®šä¹‰Option Storeï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é€‰é¡¹å¯¹è±¡ï¼ˆstateã€gettersã€actionsï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-comment">// çŠ¶æ€ï¼šå­˜å‚¨æ•°æ®ï¼ˆç±»ä¼¼Vueç»„ä»¶çš„dataï¼‰</span>
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Pinia'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">false</span>
  }),
  <span class="hljs-comment">// è®¡ç®—å±æ€§ï¼šåŸºäºstateæ´¾ç”Ÿæ•°æ®ï¼ˆç±»ä¼¼Vueç»„ä»¶çš„computedï¼‰ï¼Œè‡ªåŠ¨ç¼“å­˜</span>
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">fullName</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-string">`Mr. <span class="hljs-subst">${state.name}</span>`</span>, <span class="hljs-comment">// æ¥æ”¶stateä½œä¸ºå‚æ•°</span>
    <span class="hljs-attr">loginText</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">isLogin</span> ? <span class="hljs-string">'é€€å‡ºç™»å½•'</span> : <span class="hljs-string">'ç™»å½•'</span>
  },
  <span class="hljs-comment">// æ–¹æ³•ï¼šå¤„ç†é€»è¾‘ï¼ˆåŒæ­¥/å¼‚æ­¥å‡å¯ï¼Œç±»ä¼¼Vueç»„ä»¶çš„methodsï¼‰</span>
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// åŒæ­¥ä¿®æ”¹çŠ¶æ€ï¼ˆç›´æ¥æ“ä½œthisï¼ŒthisæŒ‡å‘stateï¼‰</span>
    <span class="hljs-title function_">setLogin</span>(<span class="hljs-params">status: <span class="hljs-built_in">boolean</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLogin</span> = status
    },
    <span class="hljs-comment">// å¼‚æ­¥é€»è¾‘ï¼ˆå¦‚æ¥å£è¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchUserInfo</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>)
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = data.<span class="hljs-property">name</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = data.<span class="hljs-property">age</span>
    }
  }
})
</code></pre>
<h5 data-id="heading-6">Setup Storeï¼šç»„åˆå¼å†™æ³•ï¼ˆè´´åˆVue3ï¼Œçµæ´»åº¦é«˜ï¼‰</h5>
<p>æ ¸å¿ƒï¼šç”¨å‡½æ•°å½¢å¼å®šä¹‰ï¼Œå†…éƒ¨é€šè¿‡ref/reactiveå®šä¹‰çŠ¶æ€ï¼Œç”¨computedå®šä¹‰è®¡ç®—å±æ€§ï¼Œç”¨æ™®é€šå‡½æ•°å®šä¹‰æ–¹æ³•ï¼Œæœ€åç»Ÿä¸€è¿”å›ï¼Œå®Œå…¨è´´åˆVue3ç»„åˆå¼APIçš„å†™æ³•ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Setup Store å†™æ³•ï¼ˆsrc/stores/user.tsï¼‰</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å®šä¹‰Setup Storeï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼ˆç±»ä¼¼Vue3çš„setupå‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1. ç”¨ref/reactiveå®šä¹‰çŠ¶æ€ï¼ˆæ›¿ä»£Option Storeçš„stateï¼‰</span>
  <span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Pinia'</span>)
  <span class="hljs-keyword">const</span> age = <span class="hljs-title function_">ref</span>(<span class="hljs-number">3</span>)
  <span class="hljs-keyword">const</span> isLogin = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-comment">// 2. ç”¨computedå®šä¹‰è®¡ç®—å±æ€§ï¼ˆæ›¿ä»£Option Storeçš„gettersï¼‰</span>
  <span class="hljs-keyword">const</span> fullName = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-string">`Mr. <span class="hljs-subst">${name.value}</span>`</span>)
  <span class="hljs-keyword">const</span> loginText = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> isLogin.<span class="hljs-property">value</span> ? <span class="hljs-string">'é€€å‡ºç™»å½•'</span> : <span class="hljs-string">'ç™»å½•'</span>)

  <span class="hljs-comment">// 3. ç”¨æ™®é€šå‡½æ•°å®šä¹‰æ–¹æ³•ï¼ˆæ›¿ä»£Option Storeçš„actionsï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setLogin</span> = (<span class="hljs-params">status: <span class="hljs-built_in">boolean</span></span>) =&gt; {
    isLogin.<span class="hljs-property">value</span> = status <span class="hljs-comment">// æ“ä½œreféœ€åŠ .value</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/user'</span>)
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()
    name.<span class="hljs-property">value</span> = data.<span class="hljs-property">name</span>
    age.<span class="hljs-property">value</span> = data.<span class="hljs-property">age</span>
  }

  <span class="hljs-comment">// å…³é”®ï¼šå¿…é¡»è¿”å›éœ€è¦æš´éœ²ç»™ç»„ä»¶ä½¿ç”¨çš„çŠ¶æ€ã€è®¡ç®—å±æ€§ã€æ–¹æ³•</span>
  <span class="hljs-keyword">return</span> {
    name, age, isLogin,
    fullName, loginText,
    setLogin, fetchUserInfo
  }
})
</code></pre>
<h4 data-id="heading-7">2. æ ¸å¿ƒç‰¹æ€§ï¼šå›ºå®šç»“æ„ vs çµæ´»è‡ªç”±ï¼ˆå¼€å‘æ•ˆç‡å·®å¼‚ï¼‰</h4>
<p>é™¤äº†å†™æ³•ä¸åŒï¼Œä¸¤è€…åœ¨æ ¸å¿ƒç‰¹æ€§ä¸Šçš„å·®å¼‚ï¼Œç›´æ¥å†³å®šäº†é€‚é…åœºæ™¯ï¼Œç”¨è¡¨æ ¼æ¸…æ™°å¯¹æ¯”ï¼š</p>









































<table><thead><tr><th>ç‰¹æ€§</th><th>Option Storeï¼ˆé€‰é¡¹å¼ï¼‰</th><th>Setup Storeï¼ˆç»„åˆå¼ï¼‰</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>çŠ¶æ€å®šä¹‰</td><td>å›ºå®šåœ¨stateé€‰é¡¹ä¸­ï¼Œæ— éœ€æ‰‹åŠ¨æš´éœ²</td><td>ç”¨ref/reactiveå®šä¹‰ï¼Œéœ€æ‰‹åŠ¨è¿”å›æš´éœ²</td><td>Setup Storeï¼šå¯çµæ´»æ‹†åˆ†çŠ¶æ€ï¼Œæ”¯æŒå±€éƒ¨çŠ¶æ€</td></tr><tr><td>è®¡ç®—å±æ€§</td><td>å›ºå®šåœ¨gettersé€‰é¡¹ï¼Œè‡ªåŠ¨æ¥æ”¶stateï¼Œè‡ªåŠ¨ç¼“å­˜</td><td>ç”¨computedå®šä¹‰ï¼Œéœ€æ‰‹åŠ¨è¿”å›ï¼Œç¼“å­˜é€»è¾‘ä¸€è‡´</td><td>ä¸¤è€…ä¸€è‡´ï¼ŒOption Storeæ›´è§„èŒƒï¼ŒSetup Storeæ›´çµæ´»</td></tr><tr><td>æ–¹æ³•å®šä¹‰</td><td>å›ºå®šåœ¨actionsé€‰é¡¹ï¼ŒthisæŒ‡å‘stateï¼Œæ— éœ€åŠ .value</td><td>æ™®é€šå‡½æ•°ï¼Œæ“ä½œreféœ€åŠ .valueï¼ŒthisæŒ‡å‘undefined</td><td>Option Storeä¸Šæ‰‹ç®€å•ï¼ŒSetup Storeè´´åˆç»„åˆå¼API</td></tr><tr><td>é€»è¾‘å¤ç”¨</td><td>éš¾ä»¥æ‹†åˆ†å¤ç”¨å¤æ‚é€»è¾‘ï¼Œç»“æ„å›ºå®šæ­»æ¿</td><td>å¯æ‹†åˆ†é€»è¾‘ä¸ºç‹¬ç«‹å‡½æ•°ï¼Œè‡ªç”±ç»„åˆã€å¤ç”¨æ€§å¼º</td><td>Setup Storeï¼šå¤æ‚åœºæ™¯å¼€å‘æ•ˆç‡ç¿»å€</td></tr><tr><td>TSæ”¯æŒ</td><td>æ”¯æŒï¼Œä½†éœ€æ‰‹åŠ¨å®šä¹‰éƒ¨åˆ†ç±»å‹ï¼Œæ¨å¯¼ä¸å¤Ÿçµæ´»</td><td>åŸç”ŸTSå‹å¥½ï¼Œref/reactiveè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œé›¶é¢å¤–é…ç½®</td><td>Setup Storeï¼šTSé¡¹ç›®é¦–é€‰ï¼Œç±»å‹ä½“éªŒæ›´ä¼˜</td></tr></tbody></table>
<h4 data-id="heading-8">3. ç»„ä»¶ä¸­ä½¿ç”¨ï¼šç”¨æ³•ä¸€è‡´ï¼Œä½“éªŒç•¥æœ‰å·®å¼‚</h4>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºå“ªç§Storeå†™æ³•ï¼Œåœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨çš„æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€ä¿®æ”¹ç»„ä»¶ä»£ç ï¼Œä»…Storeå†…éƒ¨å®šä¹‰ä¸åŒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å§“åï¼š{{ userStore.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å…¨ç§°ï¼š{{ userStore.fullName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"userStore.setLogin(true)"</span>&gt;</span>{{ userStore.loginText }}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥Storeï¼ˆæ— è®ºSetupè¿˜æ˜¯Optionå†™æ³•ï¼Œå¯¼å…¥æ–¹å¼ä¸€è‡´ï¼‰</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()

<span class="hljs-comment">// è°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼ˆç”¨æ³•ä¸€è‡´ï¼‰</span>
userStore.<span class="hljs-title function_">fetchUserInfo</span>()
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>å°å·®å¼‚ï¼šOption Storeä¸­ï¼Œç»„ä»¶ä¸­æ“ä½œçŠ¶æ€å¯é€šè¿‡userStore.$patchæ‰¹é‡ä¿®æ”¹ï¼›Setup Storeä¸­ï¼Œéœ€ç›´æ¥æ“ä½œref/reactiveï¼Œæˆ–è‡ªå®šä¹‰æ‰¹é‡ä¿®æ”¹æ–¹æ³•ã€‚</p>
<h4 data-id="heading-9">4. é«˜é¢‘è¸©å‘ç‚¹ï¼ˆå¿…çœ‹ï¼ï¼‰</h4>
<h5 data-id="heading-10">å‘ç‚¹1ï¼šSetup Store å¿˜è®°è¿”å›çŠ¶æ€/æ–¹æ³•ï¼Œç»„ä»¶æ— æ³•è®¿é—®</h5>
<p>ç—›ç‚¹ï¼šSetup Storeä¸­å®šä¹‰çš„çŠ¶æ€ã€è®¡ç®—å±æ€§ã€æ–¹æ³•ï¼Œè‹¥æœªåœ¨returnä¸­æš´éœ²ï¼Œç»„ä»¶ä¸­è°ƒç”¨ä¼šæŠ¥é”™ï¼ˆundefinedï¼‰ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç‰¢è®°â€œå®šä¹‰å³è¿”å›â€ï¼Œç¡®ä¿æ‰€æœ‰éœ€è¦åœ¨ç»„ä»¶ä¸­ä½¿ç”¨çš„å†…å®¹ï¼Œéƒ½åŒ…å«åœ¨returnå¯¹è±¡ä¸­ï¼ˆæ— éœ€æš´éœ²çš„å±€éƒ¨é€»è¾‘ï¼Œå¯ä¸ç”¨è¿”å›ï¼‰ã€‚</p>
<h5 data-id="heading-11">å‘ç‚¹2ï¼šOption Store ä¸­actionsä½¿ç”¨ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘é”™è¯¯</h5>
<p>ç—›ç‚¹ï¼šOption Storeçš„actionsä¸­ç”¨ç®­å¤´å‡½æ•°ï¼Œä¼šå¯¼è‡´thisæŒ‡å‘undefinedï¼Œæ— æ³•æ“ä½œstateã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šOption Storeçš„actionså¿…é¡»ç”¨æ™®é€šå‡½æ•°ï¼Œç¦æ­¢ç”¨ç®­å¤´å‡½æ•°ï¼›Setup Storeæ— æ­¤é—®é¢˜ï¼ˆæœ¬èº«æ— thisï¼‰ã€‚</p>
<h5 data-id="heading-12">å‘ç‚¹3ï¼šSetup Store æ“ä½œçŠ¶æ€å¿˜è®°åŠ .value</h5>
<p>ç—›ç‚¹ï¼šSetup Storeä¸­ç”¨refå®šä¹‰çš„çŠ¶æ€ï¼Œæ“ä½œæ—¶å¿˜è®°åŠ .valueï¼Œå¯¼è‡´çŠ¶æ€ä¿®æ”¹å¤±è´¥ã€æ— å“åº”ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç‰¢è®°â€œrefåŠ .valueï¼Œreactiveä¸ç”¨åŠ â€ï¼Œå¯é…åˆvue-helperæ’ä»¶è‡ªåŠ¨æç¤ºï¼Œé¿å…é—æ¼ã€‚</p>
<h3 data-id="heading-13">å››ã€é€‰å‹å»ºè®®ï¼ˆæ–°æ‰‹ç›´æ¥æŠ„ä½œä¸šï¼‰</h3>
<p>ç»“åˆé¡¹ç›®åœºæ™¯ã€å¼€å‘ä¹ æƒ¯ã€æŠ€æœ¯æ ˆï¼Œç»™å‡ºæ˜ç¡®çš„é€‰å‹å»ºè®®ï¼Œé¿å…ç›²ç›®é€‰æ‹©ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼š</p>
<ol>
<li>æ–°æ‰‹å…¥é—¨ã€ç®€å•åœºæ™¯ï¼ˆå°‘é‡çŠ¶æ€ã€æ— å¤æ‚é€»è¾‘ï¼‰ï¼š<strong>ä¼˜å…ˆé€‰Option Store</strong>â€”â€”ç»“æ„è§„èŒƒã€ä¸Šæ‰‹ç®€å•ï¼Œæ— éœ€å…³æ³¨ref/reactiveå’Œreturnï¼Œå¿«é€Ÿå®ç°çŠ¶æ€ç®¡ç†ã€‚</li>
<li>Vue3 â€”â€”è´´åˆç»„åˆå¼å¼€å‘è¶‹åŠ¿ï¼Œé€»è¾‘æ‹†åˆ†çµæ´»ï¼Œå¤ç”¨æ€§å¼ºã€‚</li>
<li>TSé¡¹ç›®ï¼ˆæ— è®ºç®€å•è¿˜æ˜¯å¤æ‚ï¼‰ï¼š<strong>å¿…é€‰Setup Store</strong>â€”â€”åŸç”ŸTSå‹å¥½ï¼Œè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œæ— éœ€æ‰‹åŠ¨å®šä¹‰å¤§é‡ç±»å‹ï¼Œå‡å°‘ç±»å‹æŠ¥é”™ã€‚</li>
<li>å›¢é˜Ÿåä½œé¡¹ç›®ï¼š<strong>ç»Ÿä¸€å†™æ³•</strong>â€”â€”å»ºè®®å°å‹é¡¹ç›®ç»Ÿä¸€Option Storeï¼Œä¸­å¤§å‹é¡¹ç›®ç»Ÿä¸€Setup Storeï¼Œé¿å…ä¸¤ç§å†™æ³•æ··ç”¨ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚</li>
<li>è¿ç§»é¡¹ç›®ï¼ˆä»Vuexè¿ç§»åˆ°Piniaï¼‰ï¼š<strong>ä¼˜å…ˆOption Store</strong>â€”â€”å†™æ³•ç±»ä¼¼Vuexï¼Œè¿ç§»æˆæœ¬ä½ï¼Œåç»­å¯é€æ­¥é‡æ„ä¸ºSetup Storeã€‚</li>
</ol>
<h3 data-id="heading-14">äº”ã€æ‰©å±•ï¼šä¸¤ç§å†™æ³•çš„ç›¸äº’è½¬æ¢ï¼ˆæŒ‰éœ€åˆ‡æ¢ï¼‰</h3>
<p>å®é™…å¼€å‘ä¸­ï¼Œè‹¥éœ€åˆ‡æ¢Storeå†™æ³•ï¼Œå¯ç›´æ¥æŒ‰ä»¥ä¸‹è§„åˆ™è½¬æ¢ï¼Œæ— éœ€ä¿®æ”¹ç»„ä»¶ä»£ç ï¼Œç¤ºä¾‹ï¼ˆä»¥ç”¨æˆ·Storeä¸ºä¾‹ï¼‰ï¼š</p>
<p>æ ¸å¿ƒè½¬æ¢é€»è¾‘ï¼šstate â†’ ref/reactiveï¼Œgetters â†’ computedï¼Œactions â†’ æ™®é€šå‡½æ•°ï¼ŒOption Storeçš„this.xxx â†’ Setup Storeçš„ref.valueã€‚</p>
<p>ï¼ˆå‚è€ƒå‰æ–‡ä¸¤ç§å†™æ³•çš„ä»£ç ï¼Œå¯ç›´æ¥å¯¹ç…§è½¬æ¢ï¼Œæ­¤å¤„ä¸å†é‡å¤èµ˜è¿°ï¼Œé‡ç‚¹æ˜¯â€œå±æ€§å¯¹åº”ã€é€»è¾‘ä¸å˜â€ï¼‰</p>
<h3 data-id="heading-15">å…­ã€æ€»ç»“ï¼šæ ¸å¿ƒè¦ç‚¹ï¼ˆæ–°æ‰‹å¿…èƒŒï¼‰</h3>
<p>Setup Storeå’ŒOption Storeï¼Œæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ï¼Œæ ¸å¿ƒæ˜¯â€œé€‚é…åœºæ™¯â€ï¼Œä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚å¯æ€»ç»“ä¸º3å¥è¯ï¼š</p>
<ol>
<li>å†™æ³•ä¸Šï¼šOption Storeæ˜¯â€œé€‰é¡¹å¯¹è±¡â€ï¼Œè§„èŒƒæ­»æ¿ï¼›Setup Storeæ˜¯â€œç»„åˆå‡½æ•°â€ï¼Œçµæ´»è‡ªç”±ï¼Œè´´åˆVue3ç»„åˆå¼APIã€‚</li>
<li>ä½“éªŒä¸Šï¼šOption Storeä¸Šæ‰‹ç®€å•ï¼Œé€‚åˆæ–°æ‰‹ï¼›Setup Store TSå‹å¥½ã€å¤ç”¨æ€§å¼ºï¼Œé€‚åˆå¤æ‚åœºæ™¯å’ŒTSé¡¹ç›®ã€‚</li>
<li>é€‰å‹ä¸Šï¼šç®€å•åœºæ™¯é€‰Option Storeï¼Œå¤æ‚åœºæ™¯ã€TSé¡¹ç›®é€‰Setup Storeï¼ŒVue3æ–°é¡¹ç›®ä¼˜å…ˆSetup Storeã€‚</li>
</ol>
<p>å…¶å®Piniaçš„ä¸¤ç§å†™æ³•ï¼Œæœ¬è´¨éƒ½æ˜¯ä¸ºäº†å®ç°çŠ¶æ€ç®¡ç†ï¼Œåªæ˜¯é€‚é…ä¸åŒçš„å¼€å‘åœºæ™¯å’Œä¹ æƒ¯ã€‚æŒæ¡ä¸¤è€…çš„å·®å¼‚å’Œé€‰å‹æŠ€å·§ï¼Œæ—¢èƒ½å¿«é€Ÿä¸Šæ‰‹Piniaï¼Œä¹Ÿèƒ½æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»é€‰æ‹©ï¼Œæå‡å¼€å‘æ•ˆç‡ã€é™ä½ç»´æŠ¤æˆæœ¬ã€‚æ–°æ‰‹å»ºè®®å…ˆä»Option Storeå…¥æ‰‹ï¼Œç†Ÿç»ƒåå†è¿‡æ¸¡åˆ°Setup Storeï¼Œé€æ­¥åƒé€Piniaçš„çµæ´»æ€§ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ESP32 è¿›é˜¶å¼€å‘æ‚è°ˆï¼šä»å¼‚æ­¥è¯·æ±‚ã€åŠ¨å›¾æ˜¾ç¤ºåˆ°èµ„æºOTA]]></title>    <link>https://juejin.cn/post/7603261102794522650</link>    <guid>https://juejin.cn/post/7603261102794522650</guid>    <pubDate>2026-02-06T02:14:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603261102794522650" data-draft-id="7603227363821715482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ESP32 è¿›é˜¶å¼€å‘æ‚è°ˆï¼šä»å¼‚æ­¥è¯·æ±‚ã€åŠ¨å›¾æ˜¾ç¤ºåˆ°èµ„æºOTA"/> <meta itemprop="keywords" content="åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2026-02-06T02:14:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="chaosgoo"/> <meta itemprop="url" content="https://juejin.cn/user/2541726616010317"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ESP32 è¿›é˜¶å¼€å‘æ‚è°ˆï¼šä»å¼‚æ­¥è¯·æ±‚ã€åŠ¨å›¾æ˜¾ç¤ºåˆ°èµ„æºOTA
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726616010317/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    chaosgoo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T02:14:27.000Z" title="Fri Feb 06 2026 02:14:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchaosgoo.com%2F2022%2F09%2F20%2Fesp32-advanced-dev-tips%2F" target="_blank" title="https://chaosgoo.com/2022/09/20/esp32-advanced-dev-tips/" ref="nofollow noopener noreferrer">chaosgoo.com</a>ï¼Œæ¬¢è¿æ¥è®¿äº¤æµã€‚</p>
</blockquote>
<blockquote>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªESP32é¡¹ç›®ï¼Œå¾€å¾€ä¼šæ‰è¿›å„ç§å„æ ·çš„â€œå‘â€é‡Œã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„ä¸€äº›é¡¹ç›®ä¸­(æ¯”å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fchaosgoo.com%2F2020%2F07%2F30%2FMake%2520A%2520Tiny%2520Pixel%2520Screen%2F" target="_blank" title="https://chaosgoo.com/2020/07/30/Make%20A%20Tiny%20Pixel%20Screen/" ref="nofollow noopener noreferrer">åšä¸ªæ¡Œé¢åƒç´ å°å±å¹•å§</a>)ï¼Œæˆ‘é‡åˆ°è¿‡å„ç§å„æ ·çš„é—®é¢˜ï¼šç½‘ç»œè¯·æ±‚å¡æ­»ä¸»çº¿ç¨‹ã€å±å¹•æ˜¾ç¤ºå¤ªå•è°ƒã€ä¼‘çœ æ—¶PWMåœè½¬ã€ä»¥åŠæ¯æ¬¡åªæ›´æ–°å‡ å¼ å›¾ç‰‡å´è¦é‡åˆ·æ•´ä¸ªå›ºä»¶çš„ç—›è‹¦ã€‚</p>
<p>æŠŠè¿™äº›å‘è¸©å¹³ä¹‹åï¼Œæˆ‘æ•´ç†äº†å››ä¸ªåœ¨ESP32å¼€å‘ä¸­éå¸¸å®ç”¨çš„æŠ€å·§ã€‚ä¸ºäº†é¿å…å¤§å®¶é‡è¹ˆè¦†è¾™ï¼Œä¹Ÿä¸ºäº†æ–¹ä¾¿æˆ‘è‡ªå·±æ—¥åæŸ¥é˜…ï¼ˆCopyï¼‰ï¼Œè¿™ç¯‡æ–‡ç« å°†æŠŠè¿™äº›æŠ€æœ¯ç‚¹æ±‡æ€»èµ·æ¥ã€‚</p>
<p>å¸Œæœ›èƒ½ç»™æ­£åœ¨æŠ˜è…¾ESP32çš„ä½ æä¾›ä¸€äº›çµæ„Ÿã€‚</p>
<h2 data-id="heading-0">æŠ€å·§ä¸€ï¼šæ‹’ç»é˜»å¡ï¼ä½¿ç”¨å¼‚æ­¥ç½‘ç»œè¯·æ±‚</h2>
<h3 data-id="heading-1">ç—›ç‚¹åˆ†æ</h3>
<p>åœ¨æ—©æœŸçš„åƒç´ å°å±å¹•é¡¹ç›®ä¸­ï¼Œæˆ‘ä¸ºäº†è·å–Bç«™ç²‰ä¸æ•°ï¼Œç›´æ¥ä½¿ç”¨äº†åŒæ­¥çš„HTTP Clientã€‚ç»“æœå°±æ˜¯æ¯æ¬¡è¯·æ±‚ç½‘ç»œæ—¶ï¼Œæ•´ä¸ªè®¾å¤‡çš„UIéƒ½ä¼šå¡ä½å‡ ç™¾æ¯«ç§’ç”šè‡³å‡ ç§’ã€‚è¿™å¯¹äºç”¨æˆ·ä½“éªŒæ¥è¯´ç®€ç›´æ˜¯ç¾éš¾â€”â€”ä½ ä¸èƒ½è®©ç”¨æˆ·è§‰å¾—è®¾å¤‡â€œæ­»æœºâ€äº†ã€‚</p>
<p>ä¸ºäº†ä¼˜é›…ï¼Œå¿…é¡»ä¸Šå¼‚æ­¥ã€‚</p>
<h3 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h3>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>AsyncTCP</code> åº“æ¥å®ç°éé˜»å¡çš„HTTPè¯·æ±‚ã€‚è™½ç„¶å†™èµ·æ¥å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰å¥—å¨ƒæœ‰ç‚¹å¤šï¼Œä½†æ¢æ¥çš„æ˜¯ä¸èˆ¬é¡ºæ»‘çš„ä¸»å¾ªç¯ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒä»£ç </h3>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fme-no-dev%2FAsyncTCP" target="_blank" title="https://github.com/me-no-dev/AsyncTCP" ref="nofollow noopener noreferrer">AsyncTCP-esphome</a> åº“ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Arduino.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;AsyncTCP.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;WiFi.h&gt;</span></span>

<span class="hljs-comment">// ... WiFié…ç½®çœç•¥ ...</span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">asyncReqeust</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-type">static</span> AsyncClient *aClient;
  <span class="hljs-keyword">if</span> (aClient) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é˜²æ­¢é‡å¤åˆ›å»º</span>

  aClient = <span class="hljs-keyword">new</span> <span class="hljs-built_in">AsyncClient</span>();
  <span class="hljs-keyword">if</span> (!aClient) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// æ³¨å†Œé”™è¯¯å›è°ƒ</span>
  aClient-&gt;<span class="hljs-built_in">onError</span>([](<span class="hljs-type">void</span> *arg, AsyncClient *client, <span class="hljs-type">int</span> error) {
      Serial.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Connect Error"</span>);
      aClient = <span class="hljs-literal">NULL</span>;
      <span class="hljs-keyword">delete</span> client;
  }, <span class="hljs-literal">NULL</span>);

  <span class="hljs-comment">// æ³¨å†Œè¿æ¥å›è°ƒ</span>
  aClient-&gt;<span class="hljs-built_in">onConnect</span>([](<span class="hljs-type">void</span> *arg, AsyncClient *client) {
      Serial.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Connected"</span>);
      aClient-&gt;<span class="hljs-built_in">onError</span>(<span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);

      <span class="hljs-comment">// æ³¨å†Œæ–­å¼€è¿æ¥å›è°ƒ</span>
      client-&gt;<span class="hljs-built_in">onDisconnect</span>([](<span class="hljs-type">void</span> *arg, AsyncClient *c) {
          aClient = <span class="hljs-literal">NULL</span>;
          <span class="hljs-keyword">delete</span> c;
          Serial.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Disconnected"</span>);
      }, <span class="hljs-literal">NULL</span>);

      <span class="hljs-comment">// æ³¨å†Œæ•°æ®æ¥æ”¶å›è°ƒï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
      client-&gt;<span class="hljs-built_in">onData</span>([](<span class="hljs-type">void</span> *arg, AsyncClient *c, <span class="hljs-type">void</span> *data, <span class="hljs-type">size_t</span> len) {
          Serial.<span class="hljs-built_in">write</span>((<span class="hljs-type">uint8_t</span> *)data, len);
          <span class="hljs-comment">// è¿™é‡Œå¯ä»¥è§£æJSONæ•°æ®</span>
      }, <span class="hljs-literal">NULL</span>);

      <span class="hljs-comment">// å‘é€HTTP GETè¯·æ±‚</span>
      client-&gt;<span class="hljs-built_in">write</span>(<span class="hljs-string">"GET /x/relation/stat?vmid=14374079 HTTP/1.1\r\n"</span>
                    <span class="hljs-string">"Host: api.bilibili.com\r\n"</span>
                    <span class="hljs-string">"Content-Type: application/json; charset=utf-8\r\n\r\n"</span>);
  }, <span class="hljs-literal">NULL</span>);

  <span class="hljs-keyword">if</span> (!aClient-&gt;<span class="hljs-built_in">connect</span>(<span class="hljs-string">"api.bilibili.com"</span>, <span class="hljs-number">80</span>)) {
      Serial.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Connect Fail"</span>);
      AsyncClient *client = aClient;
      aClient = <span class="hljs-literal">NULL</span>;
      <span class="hljs-keyword">delete</span> client;
  }
}
</code></pre>
<p>è¿™æ ·ï¼Œç½‘ç»œè¯·æ±‚åœ¨åå°é»˜é»˜è¿›è¡Œï¼Œä½ çš„ä¸»å¾ªç¯ <code>loop()</code> ä¾ç„¶å¯ä»¥è·‘å¾—é£èµ·ï¼Œå»å¤„ç†æŒ‰é”®æ‰«ææˆ–è€…å±å¹•åˆ·æ–°ã€‚</p>
<hr/>
<h3 data-id="heading-4">æŠ€å·§äºŒï¼šè®©ç”»é¢åŠ¨èµ·æ¥â€”â€”æ’­æ”¾GIFåŠ¨å›¾</h3>
<h4 data-id="heading-5">è§†è§‰å‡çº§</h4>
<p>ç½‘ç»œé€šç•…äº†ï¼Œç•Œé¢ä¹Ÿä¸èƒ½å¤ªå¯’é…¸ã€‚åœ¨åšä¸€ä¸ªå¸¦æœ‰240x135åˆ†è¾¨ç‡çš„è£…ç½®æ—¶ï¼Œæˆ‘å®åœ¨æƒ³ä¸å‡ºä»€ä¹ˆé«˜çº§çš„ç®—æ³•åŠ¨ç”»ï¼Œäºæ˜¯å†³å®šâ€œå·æ‡’â€ï¼šç›´æ¥åœ¨å±å¹•ä¸Šæ’­æ”¾GIFè¡¨æƒ…åŒ…ã€‚</p>
<p>è¿™é‡Œæ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbitbank2%2FAnimatedGIF" target="_blank" title="https://github.com/bitbank2/AnimatedGIF" ref="nofollow noopener noreferrer">AnimatedGIF</a> åº“ï¼Œé…åˆ TFT_eSPI é©±åŠ¨ï¼Œæ•ˆæœéå¸¸ä¸é”™ã€‚</p>
<h4 data-id="heading-6">åˆ¶ä½œGIFå¤´æ–‡ä»¶</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠGIFæ–‡ä»¶è½¬æ¢æˆä»£ç èƒ½è¯»å–çš„æ•°ç»„ã€‚åœ¨Linuxæˆ–è€…WSLå­ç³»ç»Ÿä¸‹ï¼Œä¸€è¡Œ <code>xxd</code> å‘½ä»¤å°±èƒ½æå®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">## å°†GIFè½¬æ¢ä¸ºCæ•°ç»„</span>
xxd -i angry_80px.gif &gt;&gt; loading.h
</code></pre>
<p>ç”Ÿæˆçš„ <code>loading.h</code> é‡Œé¢å°±æ˜¯ä¸€ä¸ªå·¨å¤§çš„ <code>unsigned char</code> æ•°ç»„ã€‚</p>
<h4 data-id="heading-7">é©±åŠ¨ä»£ç </h4>
<p>ä»£ç åŸºäºå®˜æ–¹ç¤ºä¾‹ä¿®æ”¹ï¼Œé€‚é…äº† TFT_eSPIã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;AnimatedGIF.h&gt;</span></span>
#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;TFT_eSPI.h&gt;</span></span>
#<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"loading.h"</span> <span class="hljs-comment">// åˆšæ‰ç”Ÿæˆçš„å¤´æ–‡ä»¶</span></span>

AnimatedGIF gif;
TFT_eSPI tft = <span class="hljs-built_in">TFT_eSPI</span>();

<span class="hljs-comment">// å›è°ƒå‡½æ•°ï¼šå°†è§£ç åçš„ä¸€è¡Œåƒç´ æ¨é€åˆ°å±å¹•</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GIFDraw</span><span class="hljs-params">(GIFDRAW *pDraw)</span> </span>{
    <span class="hljs-comment">// ... æ ¸å¿ƒç»˜åˆ¶é€»è¾‘ï¼ŒåŒ…å«é€æ˜åº¦å¤„ç†å’ŒDMAåŠ é€Ÿ ...</span>
    <span class="hljs-comment">// ç¯‡å¹…åŸå› ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯è°ƒç”¨ tft.pushPixels å°† pDraw-&gt;pPixels æ¨é€æ˜¾ç¤º</span>
    <span class="hljs-comment">// å®Œæ•´é€»è¾‘å‚è€ƒ AnimatedGIF çš„ TFT_eSPI_memory ç¤ºä¾‹</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  tft.<span class="hljs-built_in">begin</span>();
  tft.<span class="hljs-built_in">setRotation</span>(<span class="hljs-number">1</span>);
  tft.<span class="hljs-built_in">fillScreen</span>(TFT_BLACK);
  gif.<span class="hljs-built_in">begin</span>(BIG_ENDIAN_PIXELS);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (gif.<span class="hljs-built_in">open</span>((<span class="hljs-type">uint8_t</span> *)angry_80px_gif, <span class="hljs-built_in">sizeof</span>(angry_80px_gif), GIFDraw)) {
    <span class="hljs-keyword">while</span> (gif.<span class="hljs-built_in">playFrame</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">NULL</span>)) {
      <span class="hljs-built_in">yield</span>(); <span class="hljs-comment">// å–‚ç‹—ï¼Œé˜²æ­¢å¤ä½</span>
    }
    gif.<span class="hljs-built_in">close</span>();
  }
}
</code></pre>
<p>åªè¦å†…å­˜å¤Ÿå¤§ï¼Œæ”¾ä¸ªè”¡å¾å¤æ‰“ç¯®çƒçš„GIFä¹Ÿä¸æ˜¯ä¸å¯èƒ½ï¼ˆé€ƒï¼‰ã€‚</p>
<h2 data-id="heading-8">æŠ€å·§ä¸‰ï¼šLight-Sleepæ¨¡å¼ä¸‹ä¿æŒPWMè¾“å‡º</h2>
<h3 data-id="heading-9">å¥‡æ€ªçš„éœ€æ±‚</h3>
<p>æœ‰äº›åœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚èƒŒå…‰ä¿æŒï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ESP32è¿›å…¥ <code>Light-Sleep</code> çœç”µï¼Œä½†åˆä¸å¸Œæœ› å±å¹•èƒŒå…‰çš„PWM ä¿¡å·ä¸­æ–­ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›å…¥ç¡çœ åé«˜é€Ÿæ—¶é’Ÿä¼šå…³é—­ï¼Œå¯¼è‡´ PWM åœæ‘†ã€‚</p>
<h3 data-id="heading-10">å¼€å¯ RTC8M æ—¶é’Ÿ</h3>
<p>æŸ¥é˜… ESP-IDF æ‰‹å†Œå‘ç°ï¼Œå¦‚æœå°† PWM çš„æ—¶é’Ÿæºé…ç½®ä¸º <code>RTC8M_CLK</code>ï¼Œå³ä½¿åœ¨ Light-Sleep ä¸‹ä¹Ÿèƒ½å·¥ä½œã€‚ä½†è¿™æœ‰ä¸ªå‰æï¼Œéœ€è¦ä¿®æ”¹ <code>menuconfig</code>ã€‚</p>
<ol>
<li>
<p><strong>ç¯å¢ƒé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">idf.py menuconfig
</code></pre>
<p>è¿›å…¥ <code>Component config</code> -&gt; <code>Hardware Settings</code> -&gt; <code>Sleep Config</code>ã€‚
<strong>åŠ¡å¿…å…³é—­</strong> <code>light sleep GPIO reset workaround</code>ã€‚</p>
</li>
<li>
<p><strong>ä»£ç å®ç°</strong>ï¼š
ä½¿ç”¨ ESP-IDF åŸç”Ÿ API é…ç½® LEDCã€‚</p>
</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-id">#include</span> "driver/ledc<span class="hljs-selector-class">.h</span>"
<span class="hljs-selector-id">#include</span> "esp_sleep<span class="hljs-selector-class">.h</span>"

void <span class="hljs-built_in">app_main</span>(void) {
  <span class="hljs-comment">// 1. å®šæ—¶å™¨é…ç½®ï¼šé‡ç‚¹æ˜¯é€‰ç”¨ LEDC_USE_RTC8M_CLK</span>
  ledc_timer_config_t ledc_timer = {
      <span class="hljs-selector-class">.duty_resolution</span> = LEDC_TIMER_13_BIT,
      <span class="hljs-selector-class">.freq_hz</span> = <span class="hljs-number">1000</span>,
      <span class="hljs-selector-class">.speed_mode</span> = LEDC_LOW_SPEED_MODE, <span class="hljs-comment">// å¿…é¡»æ˜¯ä½é€Ÿæ¨¡å¼</span>
      <span class="hljs-selector-class">.timer_num</span> = LEDC_TIMER_0,
      <span class="hljs-selector-class">.clk_cfg</span> = LEDC_USE_RTC8M_CLK,     <span class="hljs-comment">// å…³é”®ï¼</span>
  };
  <span class="hljs-built_in">ESP_ERROR_CHECK</span>(ledc_timer_config(&amp;ledc_timer));

  <span class="hljs-comment">// 2. é€šé“é…ç½®... (å¸¸è§„é…ç½®ï¼Œç•¥)</span>
  
  <span class="hljs-comment">// 3. å¼ºåˆ¶å¼€å¯RTC8Mç”µæºåŸŸ</span>
  <span class="hljs-built_in">esp_sleep_pd_config</span>(ESP_PD_DOMAIN_RTC8M, ESP_PD_OPTION_ON);

  while (<span class="hljs-number">1</span>) {
    <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªå ç©ºæ¯”</span>
    <span class="hljs-built_in">ledc_set_duty</span>(LEDC_LOW_SPEED_MODE, LEDC_CHANNEL_0, <span class="hljs-number">1000</span>);
    <span class="hljs-built_in">ledc_update_duty</span>(LEDC_LOW_SPEED_MODE, LEDC_CHANNEL_0);
    
    <span class="hljs-comment">// è¿›å…¥æµ…ç¡çœ ï¼ŒPWMä¾ç„¶ä¼šä¿æŒè¾“å‡º</span>
    <span class="hljs-built_in">esp_sleep_enable_timer_wakeup</span>(<span class="hljs-number">1000</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">5</span>); <span class="hljs-comment">// ç¡5ç§’</span>
    <span class="hljs-built_in">esp_light_sleep_start</span>();
  }
}
</code></pre>
<p>å®æµ‹è¿™ä¸ªåŠŸèƒ½å¯¹äºé™ä½åŠŸè€—éå¸¸æœ‰ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-11">æŠ€å·§å››ï¼šåªæ›´æ–°èµ„æºæ–‡ä»¶ï¼Ÿè¯•è¯• SPIFFS åˆ†åŒº OTA</h3>
<h4 data-id="heading-12">åœºæ™¯</h4>
<p>éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œæˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šæœ‰æ—¶å€™æˆ‘åªæƒ³æ›´æ–°ä¸€ä¸‹UIé‡Œçš„å›¾ç‰‡èµ„æºæˆ–è€…å­—ä½“åº“ï¼Œå¹¶ä¸æƒ³æ›´æ–°ä»£ç ã€‚
ä¼ ç»Ÿçš„OTAæ˜¯æ›´æ–° App åˆ†åŒºï¼Œè¿™å¾ˆæµªè´¹æµé‡å’Œæ—¶é—´ã€‚å…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥åªé’ˆå¯¹ SPIFFS æ•°æ®åˆ†åŒºè¿›è¡Œ OTAã€‚</p>
<h4 data-id="heading-13">åˆ†åŒºè¡¨è®¾è®¡</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰åˆ†åŒºè¡¨ï¼ˆpartitions.csvï¼‰ï¼ŒæŠŠæ•°æ®ç‹¬ç«‹å‡ºæ¥ã€‚</p>
<pre><code class="hljs language-csv" lang="csv">## Name,   Type, SubType, Offset,  Size, Flags
nvs,      data, nvs,     0x9000,  0x5000,
otadata,  data, ota,     0xe000,  0x2000,
app0,     app,  ota_0,   0x10000, 0x300000,
storage,  data, spiffs,  0x310000, 0xC000,
</code></pre>
<p>è¿™é‡Œæˆ‘åˆ’äº†ä¸€ä¸ª 48KB çš„ <code>storage</code> åˆ†åŒºç”¨äºæ¼”ç¤ºã€‚</p>
<h4 data-id="heading-14">OTA æ ¸å¿ƒé€»è¾‘</h4>
<p>ä¸åŒäºæ›´æ–° Appï¼Œæ›´æ–°åˆ†åŒºå®é™…ä¸Šå°±æ˜¯â€œæ“¦é™¤ + å†™å…¥â€çš„è¿‡ç¨‹ã€‚å‡è®¾æ–°çš„æ–‡ä»¶é•œåƒå·²ç»é€šè¿‡ç½‘ç»œä¸‹è½½åˆ°äº†å†…å­˜ä¸­ï¼ˆæˆ–è€…åƒæœ¬ä¾‹ä¸€æ ·ï¼Œä¸ºäº†æ¼”ç¤ºç›´æ¥ embed åœ¨ä»£ç é‡Œï¼‰ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update_spiffs_partition</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. æŸ¥æ‰¾ SPIFFS åˆ†åŒº</span>
    <span class="hljs-type">const</span> <span class="hljs-type">esp_partition_t</span> *spiffs_part = <span class="hljs-built_in">esp_partition_find_first</span>(
            ESP_PARTITION_TYPE_DATA, ESP_PARTITION_SUBTYPE_DATA_SPIFFS, <span class="hljs-literal">NULL</span>);
    
    <span class="hljs-keyword">if</span> (spiffs_part == <span class="hljs-literal">NULL</span>) {
        <span class="hljs-built_in">ESP_LOGE</span>(<span class="hljs-string">"OTA"</span>, <span class="hljs-string">"SPIFFS partition not found!"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 2. æ“¦é™¤åŸåˆ†åŒºå†…å®¹</span>
    <span class="hljs-built_in">ESP_LOGI</span>(<span class="hljs-string">"OTA"</span>, <span class="hljs-string">"Erasing partition..."</span>);
    <span class="hljs-built_in">esp_partition_erase_range</span>(spiffs_part, <span class="hljs-number">0</span>, spiffs_part-&gt;size);

    <span class="hljs-comment">// 3. å†™å…¥æ–°æ•°æ®</span>
    <span class="hljs-comment">// å‡è®¾ spiffs2_start å’Œ spiffs2_end æ˜¯æ–°é•œåƒåœ¨å†…å­˜ä¸­çš„åœ°å€</span>
    <span class="hljs-type">size_t</span> image_size = spiffs2_end - spiffs2_start - <span class="hljs-number">1</span>;
    <span class="hljs-built_in">ESP_LOGI</span>(<span class="hljs-string">"OTA"</span>, <span class="hljs-string">"Writing new data: %d bytes"</span>, image_size);
    
    <span class="hljs-built_in">esp_partition_write</span>(spiffs_part, <span class="hljs-number">0</span>, spiffs2_start, image_size);

    <span class="hljs-built_in">ESP_LOGI</span>(<span class="hljs-string">"OTA"</span>, <span class="hljs-string">"Done! Restarting..."</span>);
    <span class="hljs-built_in">esp_restart</span>();
}
</code></pre>
<p>è¿™ä¸ªæŠ€å·§åœ¨åšå›¾ç‰‡æ›´æ¢ã€å­—ä½“åˆ‡æ¢ç­‰åŠŸèƒ½æ—¶ç‰¹åˆ«å¥½ç”¨ï¼Œä¸ç”¨åŠ¨æ ¸å¿ƒä»£ç ï¼Œå®‰å…¨åˆå¿«é€Ÿã€‚</p>
<hr/>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘è¿‡å»æŠ˜è…¾ESP32æ—¶æ€»ç»“çš„å››ä¸ªå®ç”¨æŠ€å·§ã€‚
ä»é¿å…é˜»å¡çš„å¼‚æ­¥è¯·æ±‚ï¼Œåˆ°èŠ±é‡Œèƒ¡å“¨çš„GIFæ’­æ”¾ï¼Œå†åˆ°ä½åŠŸè€—ä¸‹çš„PWMæ§åˆ¶å’Œçµæ´»çš„èµ„æºOTAï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½æ˜¯åœ¨å®é™…å¼€å‘ä¸­ä¸ºäº†è§£å†³ç‰¹å®šç—›ç‚¹è€Œæ‘¸ç´¢å‡ºæ¥çš„ã€‚</p>
<p>ç¡¬ä»¶å¼€å‘çš„ä¹è¶£å¤§æ¦‚å°±åœ¨äºæ­¤ï¼šé‡åˆ°ä¸€ä¸ªå‘ï¼Œå¡«å¹³å®ƒï¼Œç„¶åçœ‹ç€è®¾å¤‡æŒ‰ç…§é¢„æƒ³çš„æ–¹å¼è¿è¡Œï¼Œé‚£ç§æˆå°±æ„Ÿæ˜¯æ— æ³•æ›¿ä»£çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ 2026 å¹´ï¼Œ3D å·¥ä¸šè§†è§‰æˆä¸ºè§†è§‰ç®—æ³•åˆ†åŒ–çš„ä¸€å¹´ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603288778678419491</link>    <guid>https://juejin.cn/post/7603288778678419491</guid>    <pubDate>2026-02-06T03:10:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603288778678419491" data-draft-id="7603267434502406159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ 2026 å¹´ï¼Œ3D å·¥ä¸šè§†è§‰æˆä¸ºè§†è§‰ç®—æ³•åˆ†åŒ–çš„ä¸€å¹´ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-06T03:10:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ 2026 å¹´ï¼Œ3D å·¥ä¸šè§†è§‰æˆä¸ºè§†è§‰ç®—æ³•åˆ†åŒ–çš„ä¸€å¹´ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:10:20.000Z" title="Fri Feb 06 2026 03:10:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™å‡ å¹´ï¼Œ3D å·¥ä¸šè§†è§‰èµ°å¾—å¾ˆå¿«ï¼Œä¹Ÿèµ°å¾—æœ‰ç‚¹ç´¯ã€‚</p>
<p>å‚æ•°ä¸€è·¯ç‹‚é£™ï¼šåƒç´ æ›´é«˜ã€å¸§ç‡æ›´å¿«ã€åŠŸç‡æ›´çŒ›ã€è§†è§’æ›´å¹¿ã€ä½“ç§¯æ›´å°ã€‚å•çœ‹è§„æ ¼è¡¨ï¼Œå¾ˆéš¾ä¸è®©äººå…´å¥‹ã€‚ä½†çœŸæ­£æŠŠè®¾å¤‡è£…ä¸Šäº§çº¿çš„äººï¼Œå¾€å¾€ä¼šåœ¨å‡ å‘¨åéœ²å‡ºä¸€ç§å¤æ‚çš„è¡¨æƒ…â€”â€”ç³»ç»Ÿç¡®å®æ›´â€œå¼ºâ€äº†ï¼Œå¯ç°åœºå¹¶æ²¡æœ‰å› æ­¤å˜å¾—æ›´â€œç®€å•â€ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ca30630501a4862ad4811172122e05c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=ZJlvKzXXELb9XX4Z61aV7QN9YEs%3D" alt="faq-what-is-3d-vision-16x9-1600x900.jpg.imgo.jpg" loading="lazy"/></p>
<p>åå…‰çš„é‡‘å±ä¾æ—§åˆºçœ¼ï¼Œæ·±è‰²æè´¨è¿˜æ˜¯éš¾æ‹ï¼Œä¹±å †æ–™ä¸€ä¸Šæ¥ï¼Œç‚¹äº‘å¼€å§‹å‘è™šã€‚é—®é¢˜ä¸ä½†æ²¡æ¶ˆå¤±ï¼Œåè€Œå› ä¸ºèŠ‚æ‹æ›´å¿«ã€å·¥å†µæ›´å¤æ‚ï¼Œè¢«æ”¾å¤§å¾—æ›´åŠ æ˜æ˜¾ã€‚</p>
<p>è¡Œä¸šæ­£åœ¨ç»å†ä¸€ä¸ªä¸å¤ªèˆ’æœçš„æ—¶åˆ»ï¼š</p>
<p><em><strong>ç¡¬ä»¶å·²ç»å·åˆ°æé™äº†ï¼Œå¯çœŸæ­£çš„å·®è·ï¼Œå¥½åƒä¸åœ¨è¿™é‡Œã€‚</strong></em></p>
<h2 data-id="heading-0"><strong>å½“â€œçœ‹å¾—æ›´æ¸…æ¥šâ€ä¸å†ç­‰äºâ€œé—®é¢˜è¢«è§£å†³â€</strong></h2>
<p>è¯´èµ·æ¥ï¼Œ3D è§†è§‰è¿™æ¡è·¯ï¼Œæœ€æ—©å¹¶ä¸æ˜¯è¿™æ ·èµ°çš„ã€‚</p>
<p>åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œå¤§å®¶é»˜è®¤ä¸€ä¸ªé€»è¾‘ï¼š</p>
<p>åªè¦åƒç´ å¤Ÿé«˜ã€å…‰æ‰“å¾—å¤Ÿå¼ºã€å¸§ç‡å¤Ÿå¿«ï¼Œé—®é¢˜æ€»èƒ½è¢«â€œæ‹æ¸…æ¥šâ€ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74826655334e474e813073c9bb957848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=RxKFn4synnfIwHpECaMrKKCgAQ4%3D" alt="images.png" loading="lazy"/></p>
<p>è¿™ä¸ªé€»è¾‘åœ¨å®éªŒç¯å¢ƒé‡Œæˆç«‹ï¼Œåœ¨æ ‡å‡†å·¥ä»¶ã€å›ºå®šæ²»å…·ä¸‹ä¹Ÿå¾ˆå°‘ç¿»è½¦ã€‚ä½†ä¸€æ—¦è¿›å…¥çœŸå®å·¥å‚ï¼Œå®ƒå¼€å§‹å˜å¾—ä¸é‚£ä¹ˆå¯é ã€‚</p>
<ul>
<li>åå…‰ä¸æ˜¯å‡åŒ€åå…‰ï¼Œè€Œæ˜¯éšè§’åº¦è·³å˜ï¼›</li>
<li>æš—è‰²ä¸æ˜¯å•çº¯å˜æš—ï¼Œè€Œæ˜¯è¾¹ç•Œç›´æ¥æ¶ˆå¤±ï¼›</li>
<li>æŸ”æ€§å·¥ä½ä¸æ˜¯å¶å°”å˜åŒ–ï¼Œè€Œæ˜¯æŒç»­å˜åŒ–ã€‚</li>
</ul>
<p>äºæ˜¯å‡ºç°äº†ä¸€ç§ç•¥æ˜¾å°´å°¬çš„ç°è±¡ï¼š</p>
<p><strong>è®¾å¤‡æ‹åˆ°äº†æ›´å¤šä¿¡æ¯ï¼Œä½†ç³»ç»Ÿå´æ›´éš¾ç¨³å®šåœ°â€œç†è§£â€è¿™äº›ä¿¡æ¯ã€‚</strong></p>
<p>è¿™æ—¶å€™å†å¾€ç¡¬ä»¶ä¸Šå †ï¼Œæ”¶ç›Šå¼€å§‹æ˜æ˜¾å˜è–„ã€‚</p>
<h2 data-id="heading-1"><strong>çœŸæ­£æ‹‰å¼€å·®è·çš„ï¼Œæ˜¯ç®—æ³•èƒ½å¦â€œåƒå¾—ä¸‹ç°å®ä¸–ç•Œâ€</strong></h2>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beee3ce52a4645c0b09849b6c6e1e1cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=1qOSTj3UMQz57m2DzlF2qJEI2JY%3D" alt="1400x788_ECCV_Blog_hero_v2-640x360.jpg" loading="lazy"/></p>
<p>æ…¢æ…¢åœ°ï¼Œè¡Œä¸šé‡Œçš„å…±è¯†å¼€å§‹å‘ç”Ÿè½¬ç§»ã€‚</p>
<p>å†³å®šç³»ç»Ÿæˆè´¥çš„ï¼Œä¸æ˜¯å¤šå‡ºæ¥çš„å‡ ä¸ªåƒç´ ï¼Œè€Œæ˜¯ç®—æ³•åœ¨å¤æ‚è¾“å…¥ä¸‹èƒ½å¦ä¿æŒåˆ¤æ–­åŠ›ï¼›</p>
<p>ä¹Ÿä¸æ˜¯å•æ¬¡æµ‹è¯•æœ‰å¤šå‡†ï¼Œè€Œæ˜¯è¿ç»­è¿è¡Œä¸€ä¸ªæœˆåï¼ŒçŠ¶æ€æ˜¯å¦ä¾ç„¶ç¨³å®šã€‚</p>
<p>è¿™èƒŒåï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ›´æ·±å±‚çš„é—®é¢˜ï¼š</p>
<p><strong>ç®—æ³•é¢å¯¹çš„ï¼Œæ˜¯ä¸€ä¸ªè¢«ç²¾å¿ƒæ•´ç†è¿‡çš„ä¸–ç•Œï¼Œè¿˜æ˜¯ä¸€ä¸ªçœŸå®ã€æ··ä¹±ã€ä¸å¯é¢„æµ‹çš„ä¸–ç•Œï¼Ÿ</strong></p>
<p>å½“æŸ”æ€§åˆ¶é€ æˆä¸ºå¸¸æ€ï¼Œå¤š SKUã€éšæœºå§¿æ€ã€å¤æ‚æè´¨ã€å·¥ä½é¢‘ç¹åˆ‡æ¢å åŠ åœ¨ä¸€èµ·ï¼Œè§†è§‰ç³»ç»Ÿå·²ç»ä¸å†åªæ˜¯â€œé‡‡é›†å·¥å…·â€ï¼Œè€Œæ˜¯è¢«æ¨ä¸Šäº†â€œç©ºé—´ç†è§£åº•åº§â€çš„ä½ç½®ã€‚</p>
<p>è¿™ä¸€æ­¥è·¨ä¸è¿‡å»ï¼Œå‚æ•°å†å¥½çœ‹ï¼Œä¹Ÿåªèƒ½åœç•™åœ¨å±•ç¤ºå±‚ã€‚</p>
<h2 data-id="heading-2"><strong>åŒä¸€æ—¶é—´ï¼Œå­¦æœ¯ç•Œåœ¨èµ°ä¸€æ¡çœ‹ä¼¼ç›¸åã€å®åˆ™ä¸€è‡´çš„è·¯</strong></h2>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œç±»ä¼¼çš„è½¬å‘ï¼Œä¹Ÿæ­£åœ¨å­¦æœ¯ç•Œå‘ç”Ÿã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5d025f23c6d4cd69fa3ed9238b63d4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=%2FsD31b%2BnPkSAQPgRMS0P4nt6XNE%3D" alt="LiDAR-vs-Vision-517x306-1-e1748502410760.jpg" loading="lazy"/></p>
<p>åœ¨è‡ªåŠ¨é©¾é©¶å’Œæœºå™¨äººé¢†åŸŸï¼Œç ”ç©¶è€…å¼€å§‹åå¤æŒ‘æˆ˜ä¸€ä¸ªçœ‹ä¼¼æ¿€è¿›çš„é—®é¢˜ï¼š<strong>çœŸçš„éœ€è¦è¿™ä¹ˆå¤šä¼ æ„Ÿå™¨å—ï¼Ÿ</strong></p>
<p>æ¿€å…‰é›·è¾¾ã€æ¯«ç±³æ³¢é›·è¾¾ã€æ‘„åƒå¤´å±‚å±‚å åŠ ï¼Œç¡®å®å®‰å…¨ï¼Œä½†æˆæœ¬ã€åŠŸè€—ã€ç»´æŠ¤å¤æ‚åº¦åŒæ ·å åŠ ã€‚äºæ˜¯ï¼Œä¸€æ¡â€œå‡æ³•è·¯çº¿â€é€æ¸æ¸…æ™°â€”â€”å°è¯•ä»…ä¾èµ–è§†è§‰ï¼Œç”šè‡³åªç”¨ 360Â° ç¯è§†æ‘„åƒå¤´ï¼Œå»å®Œæˆ 3D ç¯å¢ƒç†è§£ã€‚</p>
<p>è¿™å¹¶ä¸æ˜¯é€€è€Œæ±‚å…¶æ¬¡ï¼Œè€Œæ˜¯ä¸€æ¬¡éš¾åº¦æé«˜çš„æ­£é¢è¿›æ”»ã€‚</p>
<p>å•çº¯çš„è§†è§‰ç¼ºä¹ç›´æ¥æ·±åº¦ï¼Œç®—æ³•å¿…é¡»çœŸæ­£ç†è§£å‡ ä½•ã€è¿åŠ¨å’Œè¯­ä¹‰ï¼Œæ‰èƒ½è¡¥è¶³ä¿¡æ¯ç¼ºå£ã€‚</p>
<p>æŠŠè¿™æ¡è·¯çº¿æ”¾å›å·¥ä¸šåœºæ™¯ï¼Œå…¶å®ä¼šå‘ç°ä¸€ä¸ªå…±é€šç‚¹ï¼š</p>
<p><strong>è¡Œä¸šä¸å†æŒ‡æœ›ç¡¬ä»¶æ›¿ç³»ç»Ÿå…œåº•ï¼Œè€Œæ˜¯è¦æ±‚ç³»ç»Ÿè‡ªå·±å…·å¤‡ç†è§£èƒ½åŠ›ã€‚</strong></p>
<h2 data-id="heading-3"><strong>ä»å•ç‚¹æ€§èƒ½ï¼Œèµ°å‘ç³»ç»ŸååŒ</strong></h2>
<p>ä¹Ÿæ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œâ€œç³»ç»ŸååŒâ€å¼€å§‹è¢«åå¤æèµ·ã€‚</p>
<p>ä¸€å¥— 3D å·¥ä¸šè§†è§‰ç³»ç»Ÿï¼Œå¾ˆå°‘åªç”±ä¸€ä¸ªæ¨¡å‹å†³å®šæˆè´¥ã€‚</p>
<p>å…‰æœºç¨³å®šæ€§ã€æˆåƒä¸€è‡´æ€§ã€æ ‡å®šç²¾åº¦ã€é‡å»ºç®—æ³•ã€å¹³å°å·¥å…·é“¾ï¼Œä»»ä½•ä¸€ä¸ªç¯èŠ‚æ³¢åŠ¨ï¼Œéƒ½ä¼šè¢«ç®—æ³•æˆå€æ”¾å¤§ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œè¶Šæ¥è¶Šå¤šå®¢æˆ·å¼€å§‹å…³æ³¨ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p align="center">**<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb18b2f0f51841d6a1987243ee1ea6f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=3OZg6%2BSkFQgxsF358Un23lsVUE8%3D" alt="ScreenShot_2026-02-05_164154_547.png" loading="lazy"/>**</p>
<p><strong>ç³»ç»Ÿæ˜¯ä¸æ˜¯ä¸ºç®—æ³•è€Œè®¾è®¡ï¼Œè€Œä¸æ˜¯ç®—æ³•è¢«è¿«å»é€‚é…ç¡¬ä»¶ã€‚</strong></p>
<p>å½“è¾“å…¥æºä¸ç¨³å®šï¼Œç®—æ³•å†èªæ˜ä¹Ÿåªèƒ½ç–²äºä¿®è¡¥ï¼›</p>
<p>å½“æˆåƒè¡Œä¸ºæ‰¹æ¬¡ä¸ä¸€è‡´ï¼Œæ¨¡å‹æ³›åŒ–å°±æ— ä»è°ˆèµ·ã€‚</p>
<h2 data-id="heading-4"><strong>å…¨é“¾è·¯èƒ½åŠ›ï¼Œæ­£åœ¨æˆä¸ºçœŸæ­£çš„åˆ†æ°´å²­</strong></h2>
<p>ç«™åœ¨ 2026 å¹´è¿™ä¸ªæ—¶é—´ç‚¹å›çœ‹ï¼Œè¡Œä¸šçš„åˆ†åŒ–é€»è¾‘å·²ç»ç›¸å½“æ¸…æ™°ã€‚</p>
<p>æœªæ¥çš„ç«äº‰ï¼Œä¸ä¼šåªå›´ç»•â€œè°çš„å‚æ•°æ›´é«˜â€ï¼Œè€Œæ˜¯å›´ç»•ï¼šè°èƒ½åœ¨å¤æ‚å·¥å†µä¸‹ï¼Œé•¿æœŸã€ç¨³å®šåœ°è¾“å‡ºå¯ç”¨çš„ä¸‰ç»´ä¿¡æ¯ï¼›</p>
<p>è°èƒ½æŠŠå…‰æœºã€æˆåƒã€é‡å»ºã€ç®—æ³•å’Œå¹³å°ï¼Œæ‹§æˆä¸€æ¡çœŸæ­£ååŒçš„é“¾è·¯ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå…·å¤‡å…¨é“¾è·¯æŒæ§èƒ½åŠ›çš„ä¼ä¸šå¼€å§‹æ˜¾éœ²å‡ºç»“æ„æ€§ä¼˜åŠ¿ã€‚</p>
<p>åœ¨ç®—æ³•è¢«æŒç»­æ”¾å¤§çš„æ—¶ä»£ï¼Œ</p>
<ul>
<li>å¯æ§ã€å¯é¢„æµ‹çš„è¾“å…¥æºæœ¬èº«å°±æ˜¯å£å’ï¼›</li>
<li>ç¨³å®šã€ä¸€è‡´çš„æˆåƒé“¾è·¯ï¼Œæœ¬èº«å°±æ˜¯ç®—æ³•çš„æ”¾å¤§å™¨ï¼›</li>
<li>è€Œå¹³å°åŒ–çš„è½¯ä»¶èƒ½åŠ›ï¼Œå†³å®šäº†ç³»ç»Ÿèƒ½èµ°å¤šè¿œã€‚</li>
</ul>
<p>å½“ 3D å·¥ä¸šè§†è§‰ç³»ç»Ÿè¢«æ¨å‘â€œé•¿æœŸç¨³å®šè¿è¡Œâ€çš„è¦æ±‚æ—¶ï¼Œé—®é¢˜å·²ç»ä¸å†æ˜¯æœ‰æ²¡æœ‰æ¨¡å‹ï¼Œè€Œæ˜¯ï¼šæ¨¡å‹æ˜¯å¦è¢«æ”¾åœ¨äº†ä¸€æ¡å¯æ§ã€å¯å¤ç°ã€å¯è¿­ä»£çš„ç³»ç»Ÿé“¾è·¯é‡Œã€‚</p>
<p>Coovally æ­£æ˜¯æ²¿ç€è¿™æ¡æ€è·¯æ„å»ºçš„ã€‚</p>
<p>å®ƒå¹¶ä¸è¯•å›¾ç”¨æŸä¸€ä¸ªâ€œæ›´å¼ºâ€çš„æ¨¡å‹å»è¦†ç›–æ‰€æœ‰å¤æ‚å·¥å†µï¼Œè€Œæ˜¯æŠŠé‡ç‚¹æ”¾åœ¨å¦‚ä½•è®©ç®—æ³•æŒç»­åƒå¾—ä¸‹çœŸå®ä¸–ç•Œï¼š</p>
<p>ä»æ•°æ®å¤„ç†å¼€å§‹ï¼Œåˆ°æ¨¡å‹è®­ç»ƒã€è¯„ä¼°ã€ç‰ˆæœ¬ç®¡ç†ï¼Œå†åˆ°è¾¹ç¼˜ç«¯éƒ¨ç½²ï¼Œæ‰€æœ‰ç¯èŠ‚è¢«çº³å…¥åŒä¸€å¥—å¹³å°ä½“ç³»ä¸­ï¼Œè¾“å…¥æ¥æºã€å®éªŒæ¡ä»¶å’Œè¾“å‡ºç»“æœéƒ½å¯ä»¥è¢«æ¸…æ™°è¿½æº¯ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74a099dc0f064d4798b508620d437071~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=7n%2B7QRff7SFBe5pRkQCv0vcQIqY%3D" alt="Coovallyæ“ä½œåŠ¨å›¾.gif" loading="lazy"/></p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ç§èƒ½åŠ›çš„ä»·å€¼å¾€å¾€ä½“ç°åœ¨ç»†èŠ‚é‡Œâ€”â€”å½“æˆåƒæ¡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œæ¨¡å‹æ•ˆæœæ³¢åŠ¨æ—¶ï¼Œå·¥ç¨‹å›¢é˜Ÿèƒ½è¿…é€Ÿå®šä½é—®é¢˜ç©¶ç«Ÿå‡ºåœ¨æ•°æ®ã€è®­ç»ƒç­–ç•¥ï¼Œè¿˜æ˜¯éƒ¨ç½²ç¯å¢ƒï¼›å½“å·¥å†µå‡çº§ã€å¤š SKU å¹¶è¡Œæˆä¸ºå¸¸æ€ï¼Œæ¨¡å‹ä¸éœ€è¦â€œæ¨å€’é‡æ¥â€ï¼Œè€Œæ˜¯æ²¿ç€å·²æœ‰é“¾è·¯ç»§ç»­æ¼”è¿›ã€‚</p>
<p>å¦‚æœä½ å·²ç»æœ‰æ˜ç¡®çš„å·¥ä¸šåœºæ™¯ï¼Œæ­£åœ¨è¯„ä¼°å¦‚ä½•æŠŠè§†è§‰ç®—æ³•çœŸæ­£ç”¨è¿›ç”Ÿäº§æµç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸‹æ–¹äºŒç»´ç è”ç³» Coovallyã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/580693153b9f47daaf1bb87fa15b72cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770952220&amp;x-signature=TbyEOTeed0uiZKZVN7qpo%2FZ%2BHLE%3D" alt="å°åŠ©æ‰‹äºŒç»´ç .png" loading="lazy"/></p>
<p>æˆ‘ä»¬æ›´å…³æ³¨çš„ï¼Œä¸æ˜¯ç»™ä½ ä¸€å¥—ç°æˆæ¨¡å‹ï¼Œè€Œæ˜¯ä¸€èµ·æŠŠä½ çš„åœºæ™¯æ‹†è§£æˆä¸€æ¡å¯é•¿æœŸè¿è¡Œçš„ç³»ç»Ÿæ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-5"><strong>ä¸æ˜¯æ´—ç‰Œï¼Œè€Œæ˜¯èƒ½åŠ›å¼€å§‹å…‘ç°</strong></h2>
<p>æ‰€ä»¥ï¼Œä¸å…¶è¯´ 2026 å¹´æ˜¯ä¸€æ¬¡è¡Œä¸šæ´—ç‰Œï¼Œä¸å¦‚è¯´æ˜¯ä¸€è½®èƒ½åŠ›å…‘ç°ã€‚</p>
<p>è¿‡å»å‡ å¹´è¢«åå¤éªŒè¯ã€å´ä¸å¤Ÿâ€œå¥½è®²æ•…äº‹â€çš„ç³»ç»Ÿèƒ½åŠ›ï¼Œæ­£åœ¨è¢«ç°å®åœºæ™¯é€ä¸€æ”¾å¤§ï¼›</p>
<p>è€Œå•çº¯ä¾èµ–ç¡¬ä»¶å‚æ•°é¢†å…ˆçš„ä¼˜åŠ¿ï¼Œå¼€å§‹å˜å¾—è„†å¼±ã€‚</p>
<p>3D å·¥ä¸šè§†è§‰çœŸæ­£çš„æ—¶ä»£ï¼Œæˆ–è®¸æ‰åˆšåˆšè¿›å…¥æ­£é¢˜ã€‚</p>
<p>å®ƒä¸å†å¥–åŠ±æœ€æ¿€è¿›çš„å‚æ•°ï¼Œè€Œæ›´åçˆ±é‚£äº›åœ¨æ··ä¹±ä¸­ä¾ç„¶èƒ½ä¿æŒç§©åºçš„ç³»ç»Ÿã€‚</p>
<p>ç«™åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šå†å›å¤´çœ‹ï¼Œä¼šå‘ç°æ–¹å‘å…¶å®å·²ç»å¾ˆæ˜ç¡®äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniappè„šæ‰‹æ¶ç¼–è¯‘å¾®ä¿¡å°ç¨‹åºå‡ºç°ç™½å±é—®é¢˜ï¼Œç‹‚è¸©å‘å¾—å‡ºçš„ç»“è®º]]></title>    <link>https://juejin.cn/post/7603263490342060041</link>    <guid>https://juejin.cn/post/7603263490342060041</guid>    <pubDate>2026-02-06T03:09:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490342060041" data-draft-id="7603216479836815411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniappè„šæ‰‹æ¶ç¼–è¯‘å¾®ä¿¡å°ç¨‹åºå‡ºç°ç™½å±é—®é¢˜ï¼Œç‹‚è¸©å‘å¾—å‡ºçš„ç»“è®º"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-02-06T03:09:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="douze"/> <meta itemprop="url" content="https://juejin.cn/user/1948793732608462"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniappè„šæ‰‹æ¶ç¼–è¯‘å¾®ä¿¡å°ç¨‹åºå‡ºç°ç™½å±é—®é¢˜ï¼Œç‹‚è¸©å‘å¾—å‡ºçš„ç»“è®º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1948793732608462/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    douze
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:09:26.000Z" title="Fri Feb 06 2026 03:09:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å› ä¸ºå…¬å¸çš„å°ç¨‹åºé¡¹ç›®æ˜¯ä½¿ç”¨uniappè„šæ‰‹æ¶ç¼–è¯‘çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æµ‹è¯•é˜¶æ®µå’Œç”Ÿäº§é˜¶æ®µåŸºæœ¬ä¸ä¼šå‡ºç°ï¼Œä½†æ˜¯ç”¨æˆ·åŸºæ•°è¿‡å¤šçš„æ—¶å€™å°±ä¼šä¸¤éäº§ç”Ÿè´¨å˜ï¼Œä»¥ä¸‹å†…å®¹æ˜¯æˆ‘è¸©è¿‡çš„å‘å¾—å‡ºçš„ä¸€äº›ç»“è®ºï¼ˆä½¿ç”¨aiæ¶¦è‰²äº†ä¸€ä¸‹ï¼‰</p>
<p>å¾®ä¿¡å°ç¨‹åºç«¯â€œç™½å±â€å¾ˆå¤šæ—¶å€™ä¸æ˜¯æ¸²æŸ“é—®é¢˜ï¼Œè€Œæ˜¯ä»¥ä¸‹å‡ ç±»åŸå› å¯¼è‡´ JS é€»è¾‘ä¸­æ–­æˆ–å¡æ­»ï¼š</p>
<ul>
<li>è·¯ç”±é‡å®šå‘å¾ªç¯ã€å¹¶å‘è·³è½¬ã€tabBar è·³è½¬æ–¹å¼é”™è¯¯</li>
<li>è¯·æ±‚å±‚æŠ›å¼‚å¸¸æœªæ•è·ï¼ˆUnhandled Rejectionï¼‰ï¼Œé¡µé¢é€»è¾‘ç›´æ¥æ–­æ‰</li>
<li>é¦–å±ç›´æ¥è½åˆ°åˆ†åŒ…é¡µ/é‰´æƒé¡µ/æ·±é“¾é¡µï¼Œå¯åŠ¨ç«æ€å¯¼è‡´ç™½å±</li>
<li>å°ç¨‹åºé€€åˆ°åå°å¤ªä¹…ï¼Œå›æ¥çŠ¶æ€è„äº†ï¼ˆtoken/ç”¨æˆ·æ€ï¼‰ç»§ç»­è·‘å¯¼è‡´å¼‚å¸¸</li>
</ul>
<p>æœ¬æ–‡æŒ‰æ’æŸ¥ä¼˜å…ˆçº§ç»™ä¸€å¥—ç¨³å®šæ–¹æ¡ˆï¼Œé€‚é… <strong>Vue3 + Pinia</strong>ã€‚</p>
<p>å…ˆæŠŠç™½å±å˜â€œå¯è§é”™è¯¯â€ï¼šå…¨å±€å¼‚å¸¸æ•è·ï¼ˆå¿…åšï¼‰</p>
<p>App.vueï¼ˆVue3 å†™æ³•ï¼‰</p>
<pre><code class="hljs language-&lt;script" lang="&lt;script">import { onLaunch, onShow } from '@dcloudio/uni-app'

onLaunch(() =&gt; {
  // Vue3 æ²¡æœ‰ Vue.config.errorHandlerï¼Œè¿™é‡Œä¸»è¦è¡¥é½å°ç¨‹åºé”™è¯¯ä¸æœªå¤„ç† Promise
  // #ifdef MP-WEIXIN
  wx.onError((msg) =&gt; {
    console.error('[wx.onError]', msg)
  })
  wx.onUnhandledRejection((res) =&gt; {
    console.error('[wx.onUnhandledRejection]', res)
  })
  // #endif
})

onShow(() =&gt; {
  // å¯é€‰ï¼šè®°å½•æ¯æ¬¡å›å‰å°
})
&lt;/script&gt;

</code></pre>
<p>è¯´æ˜ï¼šVue3 ä¾§çš„ errorHandler æ›´å»ºè®®åœ¨ main.ts ç”¨ <code>app.config.errorHandler</code> åšï¼ˆä¸‹é¢ä¼šç»™ï¼‰ã€‚</p>
<blockquote>
<p>main.tsï¼ˆæ¨èè¡¥å…¨ Vue é”™è¯¯æ•è·ï¼‰</p>
</blockquote>
<pre><code class="hljs language-import" lang="import">import App from './App.vue'
import { createPinia } from 'pinia'

export function createApp() {
  const app = createSSRApp(App)
  const pinia = createPinia()
  app.use(pinia)

  app.config.errorHandler = (err, instance, info) =&gt; {
    console.error('[VueError]', err, info)
  }

  return { app, pinia }
}

</code></pre>
<h2 data-id="heading-1">ï¼ˆä¸€ï¼‰æ’æŸ¥é¡µé¢é‡å®šå‘é—®é¢˜ï¼šé˜²å¹¶å‘ã€é˜²å¾ªç¯ã€ç»Ÿä¸€å…¥å£</h2>
<h3 data-id="heading-2">1.1 å¸¸è§å‘ç‚¹ï¼ˆç™½å±é«˜å‘ï¼‰</h3>
<ul>
<li>tabBar é¡µé¢ç”¨äº† <code>navigateTo</code>ï¼ˆä¼š failï¼‰</li>
<li>A â†’ redirectTo Bï¼ŒB åˆ redirectTo Aï¼ˆå¾ªç¯ï¼‰</li>
<li>onLoad/onShow åŒæ—¶è§¦å‘ç™»å½•æ ¡éªŒ + æ´»åŠ¨è·³è½¬ï¼ˆå¹¶å‘è·³è½¬ï¼‰</li>
<li>å¯åŠ¨æ—¶é¢‘ç¹ <code>reLaunch</code>/<code>redirectTo</code>ï¼ˆç«æ€ï¼‰</li>
</ul>
<h3 data-id="heading-3">1.2 è·¯ç”±ç»Ÿä¸€å°è£…ï¼ˆVue3 ç›´æ¥ç”¨å‡½æ•°ï¼‰</h3>
<p>/src/utils/router.ts</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOCK_KEY</span> = <span class="hljs-string">'__router_lock__'</span>
<span class="hljs-keyword">let</span> lastUrl = <span class="hljs-string">''</span>
<span class="hljs-keyword">let</span> lastAt = <span class="hljs-number">0</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAB_BAR_PAGES</span> = [
  <span class="hljs-string">'/pages/index/index'</span>,
  <span class="hljs-comment">// '/pages/home/index',</span>
]

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isTabBar</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> path = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">TAB_BAR_PAGES</span>.<span class="hljs-title function_">includes</span>(path)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">safeGo</span>(<span class="hljs-params">options: { url: <span class="hljs-built_in">string</span>; <span class="hljs-keyword">type</span>?: <span class="hljs-string">'navigateTo'</span> | <span class="hljs-string">'redirectTo'</span> | <span class="hljs-string">'reLaunch'</span> }</span>) {
  <span class="hljs-keyword">const</span> { url, <span class="hljs-keyword">type</span> = <span class="hljs-string">'navigateTo'</span> } = options
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()

  <span class="hljs-comment">// 300ms å†…é‡å¤è·³åŒä¸€åœ°å€ï¼Œç›´æ¥æ‹¦æˆª</span>
  <span class="hljs-keyword">if</span> (now - lastAt &lt; <span class="hljs-number">300</span> &amp;&amp; url === lastUrl) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[router] blocked duplicate:'</span>, url)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">const</span> app = getApp&lt;{ <span class="hljs-attr">globalData</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; }&gt;()
  <span class="hljs-keyword">if</span> (app.<span class="hljs-property">globalData</span>[<span class="hljs-variable constant_">LOCK_KEY</span>]) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[router] locked, ignore:'</span>, url)
    <span class="hljs-keyword">return</span>
  }
  app.<span class="hljs-property">globalData</span>[<span class="hljs-variable constant_">LOCK_KEY</span>] = <span class="hljs-literal">true</span>

  lastUrl = url
  lastAt = now

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">done</span> = (<span class="hljs-params"/>) =&gt; {
    app.<span class="hljs-property">globalData</span>[<span class="hljs-variable constant_">LOCK_KEY</span>] = <span class="hljs-literal">false</span>
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isTabBar</span>(url)) {
    uni.<span class="hljs-title function_">switchTab</span>({ url, <span class="hljs-attr">complete</span>: done })
    <span class="hljs-keyword">return</span>
  }

  uni[<span class="hljs-keyword">type</span>]({
    url,
    <span class="hljs-attr">complete</span>: done,
    <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[router] fail:'</span>, <span class="hljs-keyword">type</span>, url, e)
      <span class="hljs-title function_">done</span>()
      uni.<span class="hljs-title function_">reLaunch</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span> }) <span class="hljs-comment">// å…œåº•å›é¦–é¡µ</span>
    },
  })
}

</code></pre>
<p>åé¢æ–‡ç« é‡Œæ¶‰åŠè·³è½¬ï¼Œç»Ÿä¸€ç”¨ <code>safeGo()</code>ï¼Œä½ ä¼šå‘ç°ç™½å±æ¦‚ç‡ä¼šæ˜æ˜¾ä¸‹é™ã€‚</p>
<h2 data-id="heading-4">ï¼ˆäºŒï¼‰æ’æŸ¥ http æŠ›å‡ºå¼‚å¸¸æ¥æ”¶ï¼šè¯·æ±‚å±‚ä¸è¦éšæ„ throwï¼Œç»Ÿä¸€å…œåº•ç»“æ„</h2>
<h3 data-id="heading-5">2.1 æ¨èï¼šrequest æ°¸è¿œ resolveï¼ˆok/data/msg/codeï¼‰</h3>
<p>/src/utils/http.ts</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BASE_URL</span> = <span class="hljs-string">'https://api.xxx.com'</span>

export type HttpResult&lt;T = any&gt; = {
  ok: <span class="hljs-keyword">boolean</span>
  data: T | <span class="hljs-literal">null</span>
  msg: <span class="hljs-keyword">string</span>
  code: number
}

export <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>&lt;<span class="hljs-title">T</span> = <span class="hljs-title">any</span>&gt;(<span class="hljs-params">opt: {
  url: <span class="hljs-keyword">string</span>
  method?: UniApp.RequestOptions[<span class="hljs-string">'method'</span>]
  data?: any
  header?: any
  timeout?: number
}</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">HttpResult</span>&lt;<span class="hljs-title">T</span>&gt;&gt; </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>((resolve) =&gt; {
    uni.<span class="hljs-title function_ invoke__">request</span>({
      <span class="hljs-attr">url</span>: BASE_URL + opt.url,
      <span class="hljs-attr">method</span>: opt.method || <span class="hljs-string">'GET'</span>,
      <span class="hljs-attr">data</span>: opt.data || {},
      <span class="hljs-attr">header</span>: opt.header || {},
      <span class="hljs-attr">timeout</span>: opt.timeout || <span class="hljs-number">15000</span>,
      <span class="hljs-attr">success</span>: (res) =&gt; {
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">status</span> = res.statusCode || <span class="hljs-number">0</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">body</span>: any = res.data || {}

        <span class="hljs-comment">// æŒ‰ä½ ä»¬åç«¯åè®®è°ƒæ•´ï¼šä¾‹å¦‚ code === 0 æˆåŠŸ</span>
        <span class="hljs-keyword">if</span> (status &gt;= <span class="hljs-number">200</span> &amp;&amp; status &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-keyword">if</span> (body.code === <span class="hljs-number">0</span>) {
            <span class="hljs-title function_ invoke__">resolve</span>({ <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: body.data ?? <span class="hljs-literal">null</span>, <span class="hljs-attr">msg</span>: body.msg || <span class="hljs-string">'ok'</span>, <span class="hljs-attr">code</span>: body.code })
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_ invoke__">resolve</span>({ <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">msg</span>: body.msg || <span class="hljs-string">'ä¸šåŠ¡å¼‚å¸¸'</span>, <span class="hljs-attr">code</span>: body.code ?? -<span class="hljs-number">2</span> })
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_ invoke__">resolve</span>({ <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">msg</span>: `HTTP ${status}`, <span class="hljs-attr">code</span>: status })
        }
      },
      fail: (err) =&gt; {
        console.<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">'[http.fail]'</span>, err)
        <span class="hljs-title function_ invoke__">resolve</span>({ <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">msg</span>: err.errMsg || <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸'</span>, <span class="hljs-attr">code</span>: -<span class="hljs-number">1</span> })
      },
    })
  })
}

</code></pre>
<p>2.2 é¡µé¢è°ƒç”¨å¿…é¡»å…œåº•ï¼ˆä¸è¦é»˜è®¤æˆåŠŸï¼‰</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/http'</span>

<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request&lt;{ <span class="hljs-attr">list</span>: <span class="hljs-built_in">any</span>[] }&gt;({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/list'</span> })
<span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) {
  uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">title</span>: res.<span class="hljs-property">msg</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span> })
  <span class="hljs-keyword">return</span>
}
list.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>?.<span class="hljs-property">list</span> || []

</code></pre>
<p>è¿™æ ·ä½ å‡ ä¹ä¸ä¼šå†é‡åˆ°â€œè¯·æ±‚å¤±è´¥ç›´æ¥ç™½å±â€ï¼Œå› ä¸ºé¡µé¢é€»è¾‘æ°¸è¿œèƒ½èµ°åˆ°å…œåº•åˆ†æ”¯ã€‚</p>
<h2 data-id="heading-6">ï¼ˆä¸‰ï¼‰è¿›å…¥é¡µé¢ä¸€å®šå…ˆè¿›å…¥é¦–é¡µï¼šç¼“å­˜è®°å½•å†é‡å®šå‘ï¼ˆé¦–å±ç¨³å®šç­–ç•¥ï¼‰</h2>
<p>ä½ çš„ç›®æ ‡ï¼š<strong>æ— è®ºä»å“ªé‡Œæ‰“å¼€å°ç¨‹åºï¼Œå…ˆè½é¦–é¡µæ¸²æŸ“ï¼Œå†äºŒè·³åˆ°ç›®æ ‡é¡µ</strong>ã€‚<br/>
è¿™èƒ½è§£å†³ï¼šåˆ†åŒ…æœªåŠ è½½ã€é‰´æƒç«æ€ã€å¯åŠ¨æ—¶å¤šå¤„è·³è½¬é€ æˆçš„ç™½å±ã€‚</p>
<h3 data-id="heading-7">3.1 Pinia ç”¨æˆ·æ€ï¼ˆç”¨äºæ¸…ç†ç­‰ï¼‰</h3>
<p><code>/src/stores/user.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">token</span>: uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'token'</span>) || <span class="hljs-string">''</span>,
    <span class="hljs-attr">userInfo</span>: uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'userInfo'</span>) || <span class="hljs-literal">null</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>,
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">setToken</span>(<span class="hljs-params">t: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = t
      uni.<span class="hljs-title function_">setStorageSync</span>(<span class="hljs-string">'token'</span>, t)
    },
    <span class="hljs-title function_">setUserInfo</span>(<span class="hljs-params">info: <span class="hljs-built_in">any</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span> = info
      uni.<span class="hljs-title function_">setStorageSync</span>(<span class="hljs-string">'userInfo'</span>, info)
    },
    <span class="hljs-title function_">reset</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-string">''</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span> = <span class="hljs-literal">null</span>
      uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'token'</span>)
      uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'userInfo'</span>)
    },
  },
})

</code></pre>
<p>3.2 App å¯åŠ¨è®°å½•ç›®æ ‡é¡µï¼Œå¹¶å¼ºåˆ¶ reLaunch é¦–é¡µ
App.vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onLaunch, onShow, onHide } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dcloudio/uni-app'</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">EXPIRE_MS</span> = <span class="hljs-number">30</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> <span class="hljs-comment">// 30åˆ†é’Ÿ</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">buildTargetFromLaunchOptions</span>(<span class="hljs-params"/>): string {
  <span class="hljs-comment">// #ifdef MP-WEIXIN</span>
  <span class="hljs-keyword">const</span> opts = wx.<span class="hljs-property">getLaunchOptionsSync</span>?.() || {}
  <span class="hljs-keyword">if</span> (!opts.<span class="hljs-property">path</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">const</span> path = <span class="hljs-string">'/'</span> + opts.<span class="hljs-property">path</span>
  <span class="hljs-keyword">const</span> query = opts.<span class="hljs-property">query</span> || {}
  <span class="hljs-keyword">const</span> qs = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(query).<span class="hljs-property">length</span>
    ? <span class="hljs-string">'?'</span> + <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(query).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${k}</span>=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(query[k])}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'&amp;'</span>)
    : <span class="hljs-string">''</span>
  <span class="hljs-keyword">const</span> full = path + qs
  <span class="hljs-keyword">if</span> (full.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/pages/index/index'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> full
  <span class="hljs-comment">// #endif</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useUserStore</span>()
  user.<span class="hljs-title function_">reset</span>()
  uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'pending_redirect'</span>)
}

<span class="hljs-title function_">onLaunch</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1) è®°å½•ç›®æ ‡é¡µ</span>
  <span class="hljs-keyword">const</span> target = <span class="hljs-title function_">buildTargetFromLaunchOptions</span>()
  <span class="hljs-keyword">if</span> (target) uni.<span class="hljs-title function_">setStorageSync</span>(<span class="hljs-string">'pending_redirect'</span>, target)

  <span class="hljs-comment">// 2) å¼ºåˆ¶å…ˆè½é¦–é¡µ</span>
  uni.<span class="hljs-title function_">reLaunch</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span> })
})

<span class="hljs-title function_">onHide</span>(<span class="hljs-function">() =&gt;</span> {
  uni.<span class="hljs-title function_">setStorageSync</span>(<span class="hljs-string">'last_hide_time'</span>, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>())
})

<span class="hljs-title function_">onShow</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> last = <span class="hljs-title class_">Number</span>(uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'last_hide_time'</span>) || <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (!last) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> gap = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - last
  <span class="hljs-keyword">if</span> (gap &gt; <span class="hljs-variable constant_">EXPIRE_MS</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[expire] too long:'</span>, gap)
    <span class="hljs-title function_">clearUserData</span>()
    uni.<span class="hljs-title function_">reLaunch</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/index'</span> })
  }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre>
<p>3.3 é¦–é¡µè´Ÿè´£â€œäºŒè·³é‡å®šå‘â€ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
/pages/index/index.vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onShow } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dcloudio/uni-app'</span>
<span class="hljs-keyword">import</span> { safeGo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/router'</span>

<span class="hljs-title function_">onShow</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> target = uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'pending_redirect'</span>)
  <span class="hljs-keyword">if</span> (!target) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// å…ˆæ¸…æ‰ï¼Œé¿å…å¾ªç¯</span>
  uni.<span class="hljs-title function_">removeStorageSync</span>(<span class="hljs-string">'pending_redirect'</span>)

  <span class="hljs-comment">// å»¶è¿Ÿä¸€å¸§ï¼Œç¡®ä¿é¦–å±å…ˆæ¸²æŸ“å‡ºæ¥</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">safeGo</span>({ <span class="hljs-attr">url</span>: target, <span class="hljs-attr">type</span>: <span class="hljs-string">'redirectTo'</span> })
  }, <span class="hljs-number">0</span>)
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre>
<p>è¿™å¥—æ¨¡å¼éå¸¸â€œæŠ—ç™½å±â€ï¼šå¯åŠ¨æ— è®ºå¤šå¤æ‚ï¼Œå…ˆç»™ç”¨æˆ·ä¸€ä¸ªèƒ½æ¸²æŸ“çš„é¦–é¡µï¼Œå†åšä¸šåŠ¡è·³è½¬ã€‚</p>
<h2 data-id="heading-8">å››ï¼‰é€€å‡ºæ—¶é•¿å¤„ç†ï¼šè¶…è¿‡æ—¶é•¿æ¸…é™¤ç”¨æˆ·æ•°æ®ï¼ˆPinia ç‰ˆï¼‰</h2>
<p>ä¸Šé¢ App.vue å·²ç»å®ç°äº†â€œé€€åå°è¶…æ—¶æ¸…ç†â€ã€‚è¿™é‡Œè¡¥å……ä¸¤ä¸ªç»éªŒç‚¹ï¼š</p>
<h3 data-id="heading-9">4.1 ä¸å»ºè®®æ¸… <code>uni.clearStorageSync()</code></h3>
<p>ä¼šè¯¯åˆ é…ç½®/å¼•å¯¼æ ‡è®°/AB å®éªŒç­‰æ•°æ®ã€‚åªæ¸…ç”¨æˆ·ç›¸å…³å³å¯ï¼ˆtokenã€userInfoã€pending_redirectï¼‰ã€‚</p>
<h3 data-id="heading-10">4.2 å¦‚æœè¦â€œé¡µé¢çº§è¶…æ—¶â€</h3>
<p>å¯¹æ•æ„Ÿé¡µé¢å¯å åŠ é¡µé¢çº§è¶…æ—¶ï¼ˆä¸šåŠ¡æ›´å®‰å…¨ï¼‰ï¼Œä½†å…¨å±€è¶…æ—¶ä¾ç„¶å»ºè®®ä¿ç•™ã€‚</p>
<hr/>
<h2 data-id="heading-11">æœ€åï¼šä¸€å¥—ç™½å±æ’æŸ¥ä¼˜å…ˆçº§ï¼ˆç›´æ¥ç…§è¿™ä¸ªé¡ºåºæŸ¥ï¼‰</h2>
<ol>
<li><strong>è·¯ç”±</strong>ï¼štabBar è·³è½¬æ–¹å¼æ­£ç¡®å—ï¼Ÿæœ‰æ— é‡å®šå‘å¾ªç¯ï¼Ÿæœ‰æ— å¹¶å‘è·³è½¬ï¼Ÿ</li>
<li><strong>è¯·æ±‚</strong>ï¼šæœ‰æ²¡æœ‰ throw æœª catchï¼Ÿæœ‰æ²¡æœ‰ unhandledRejectionï¼Ÿè¯·æ±‚å¤±è´¥æœ‰æ²¡æœ‰å…œåº•ï¼Ÿ</li>
<li><strong>é¦–å±ç­–ç•¥</strong>ï¼šæ˜¯å¦å…è®¸å¯åŠ¨ç›´æ¥è½åˆ°æ·±å±‚é¡µï¼Ÿå»ºè®®â€œå…ˆé¦–é¡µæ¸²æŸ“ï¼Œå†äºŒè·³â€ã€‚</li>
<li><strong>åå°è¶…æ—¶</strong>ï¼šç”¨æˆ·é€€åå°å¤ªä¹…å›æ¥ï¼Œæ˜¯å¦éœ€è¦æ¸…ç† token/ç”¨æˆ·æ€é¿å…è„çŠ¶æ€å¼•å‘ç™½å±ï¼Ÿ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NestJS å…¥é—¨ï¼šä»é›¶åˆ° CRUD æ¥å£]]></title>    <link>https://juejin.cn/post/7603267434502520847</link>    <guid>https://juejin.cn/post/7603267434502520847</guid>    <pubDate>2026-02-06T03:17:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603267434502520847" data-draft-id="7603288778678222883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NestJS å…¥é—¨ï¼šä»é›¶åˆ° CRUD æ¥å£"/> <meta itemprop="keywords" content="NestJS"/> <meta itemprop="datePublished" content="2026-02-06T03:17:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="codingWhat"/> <meta itemprop="url" content="https://juejin.cn/user/2189882895642728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NestJS å…¥é—¨ï¼šä»é›¶åˆ° CRUD æ¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882895642728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    codingWhat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:17:37.000Z" title="Fri Feb 06 2026 03:17:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NestJS å…¥é—¨ï¼šä»é›¶åˆ° CRUD æ¥å£</h2>
<p>æœ¬æ–‡åŸºäºä¸€ä¸ªçœŸå®çš„ NestJS + MongoDB é¡¹ç›®ï¼Œå¸¦ä½ ç†è§£ NestJS çš„æ ¸å¿ƒæ¦‚å¿µå’Œç›®å½•ç»“æ„ï¼Œé€‚åˆæœ‰ Node/TypeScript åŸºç¡€ã€æƒ³ä¸Šæ‰‹ Nest çš„è¯»è€…ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€è¯ä¸å¤šè¯´ï¼ŒNestJS æ˜¯ä»€ä¹ˆå¾—ææ¸…æ¥šï¼Ÿ</h3>
<p>NestJS æ˜¯ä¸€ä¸ªç”¨äºæ„å»º<strong>æœåŠ¡ç«¯åº”ç”¨</strong>çš„ Node æ¡†æ¶ï¼Œåº•å±‚é»˜è®¤åŸºäº <strong>Express</strong>ï¼ˆä¹Ÿå¯åˆ‡æ¢ä¸º Fastifyï¼‰ã€‚æ”¯æŒç”¨ <strong>TypeScript</strong> ç¼–å†™ï¼Œé‡‡ç”¨<strong>æ¨¡å—åŒ–</strong>å’Œ<strong>ä¾èµ–æ³¨å…¥</strong>ï¼Œç»“æ„ç±»ä¼¼ Angularï¼Œé€‚åˆå†™ä¸­å¤§å‹åç«¯é¡¹ç›®ã€‚</p>
<p>è®©æˆ‘ä»¬ç®€è¦æ¦‚æ‹¬ä¸€ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>åˆ†å±‚æ¸…æ™°</strong>ï¼šController â†’ Service â†’ Modelï¼ŒèŒè´£åˆ†ç¦»</li>
<li><strong>è£…é¥°å™¨é©±åŠ¨</strong>ï¼šè·¯ç”±ã€å‚æ•°ã€æ ¡éªŒç­‰ç”¨ <code>@Get()</code>ã€<code>@Body()</code> ç­‰å£°æ˜</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæŒ‰åŠŸèƒ½æ‹†æˆ Moduleï¼Œä¾¿äºæ‰©å±•ä¸å¤ç”¨</li>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šä¸ TypeORMã€Mongooseã€Configã€Validation ç­‰é›†æˆç®€å•</li>
</ul>
<hr/>
<h3 data-id="heading-2">äºŒã€é¡¹ç›®ç»“æ„ä¸€è§ˆ</h3>
<pre><code class="hljs language-ruby" lang="ruby">src/
â”œâ”€â”€ main.ts                    <span class="hljs-comment"># åº”ç”¨å…¥å£ï¼Œåˆ›å»ºå®ä¾‹ã€å…¨å±€é…ç½®ã€ç›‘å¬ç«¯å£</span>
â”œâ”€â”€ app.<span class="hljs-keyword">module</span>.ts              <span class="hljs-comment"># æ ¹æ¨¡å—ï¼Œæ±‡æ€»å„åŠŸèƒ½æ¨¡å—ä¸å…¨å±€ä¾èµ–</span>
â”œâ”€â”€ app.controller.ts          <span class="hljs-comment"># æ ¹æ§åˆ¶å™¨ï¼ˆå¦‚å¥åº·æ£€æŸ¥ï¼‰</span>
â”œâ”€â”€ app.service.ts
â”œâ”€â”€ example/                  <span class="hljs-comment"># ç¤ºä¾‹åŠŸèƒ½æ¨¡å—ï¼ˆæŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼‰</span>
â”‚   â”œâ”€â”€ example.<span class="hljs-keyword">module</span>.ts     <span class="hljs-comment"># ç¤ºä¾‹æ¨¡å—ï¼šæ³¨å†Œæ¨¡å‹ã€æ§åˆ¶å™¨ã€æœåŠ¡</span>
â”‚   â”œâ”€â”€ example.controller.ts <span class="hljs-comment"># ç¤ºä¾‹ç›¸å…³ HTTP æ¥å£</span>
â”‚   â”œâ”€â”€ example.service.ts    <span class="hljs-comment"># ç¤ºä¾‹ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“æ“ä½œ</span>
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â””â”€â”€ example.dto.ts    <span class="hljs-comment"># å…¥å‚/å‡ºå‚çš„æ•°æ®ç»“æ„</span>
â”‚   â””â”€â”€ schemas/
â”‚       â””â”€â”€ example.schemas.ts <span class="hljs-comment"># Mongoose æ–‡æ¡£æ¨¡å‹</span>
â”œâ”€â”€ tansform/
â”‚   â””â”€â”€ tansform.interceptor.ts  <span class="hljs-comment"># å…¨å±€å“åº”åŒ…è£…ï¼ˆç»Ÿä¸€è¿”å›æ ¼å¼ï¼‰</span>
â””â”€â”€ http-exeption/
    â””â”€â”€ http-exception.filter.ts <span class="hljs-comment"># å…¨å±€å¼‚å¸¸æ•è·ä¸é”™è¯¯è¿”å›æ ¼å¼</span>
</code></pre>
<p>å…ˆå»ºç«‹æ•´ä½“å°è±¡ï¼š<strong>å…¥å£ â†’ æ ¹æ¨¡å— â†’ å„åŠŸèƒ½æ¨¡å—ï¼ˆModule + Controller + Service + Schema/DTOï¼‰</strong>ï¼Œå†é…åˆæ‹¦æˆªå™¨ã€è¿‡æ»¤å™¨åšç»Ÿä¸€æ ¼å¼å’Œé”™è¯¯å¤„ç†ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€é¦–å…ˆçœ‹ä¸€ä¸‹å…¥å£æ–‡ä»¶ï¼šmain.ts</h3>
<p>å¤§éƒ½ä¸ºå›ºå®šå†™æ³•ï¼Œåº”ç”¨ä»è¿™é‡Œå¯åŠ¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TansformInterceptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./tansform/tansform.interceptor'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HttpExceptionFilter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./http-exeption/http-exception.filter'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">setGlobalPrefix</span>(<span class="hljs-string">'api'</span>);                           <span class="hljs-comment">// æ‰€æœ‰è·¯ç”±åŠ  /api å‰ç¼€</span>
  app.<span class="hljs-title function_">useGlobalInterceptors</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TansformInterceptor</span>()); <span class="hljs-comment">// ç»Ÿä¸€æˆåŠŸå“åº”æ ¼å¼</span>
  app.<span class="hljs-title function_">useGlobalFilters</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpExceptionFilter</span>());      <span class="hljs-comment">// ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼</span>
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3005</span>);
}
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</p>
<ul>
<li><code>NestFactory.create(AppModule)</code>ï¼šæ ¹æ®æ ¹æ¨¡å—åˆ›å»ºåº”ç”¨ã€‚</li>
<li><code>setGlobalPrefix('api')</code>ï¼šä¾‹å¦‚ <code>/example</code> ä¼šå˜æˆ <code>/api/example</code>ã€‚</li>
<li>å…¨å±€æ‹¦æˆªå™¨ï¼šåœ¨æ§åˆ¶å™¨è¿”å›åï¼ŒæŠŠç»“æœåŒ…æˆ <code>{ errno: 0, data }</code>ã€‚</li>
<li>å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨ï¼šæ•è· <code>HttpException</code>ï¼Œè¿”å› <code>{ error: -1, message, ... }</code>ã€‚</li>
<li>ç«¯å£ä»ç¯å¢ƒå˜é‡ <code>PORT</code> è¯»ï¼Œé»˜è®¤ 3005ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">å››ã€å†çœ‹æ ¹æ¨¡å—ï¼šapp.module.ts</h3>
<p>æ ¹æ¨¡å—è´Ÿè´£ã€Œæ‹¼è£…ã€æ•´ä¸ªåº”ç”¨ï¼šé…ç½®ã€æ•°æ®åº“ã€å„ä¸šåŠ¡æ¨¡å—ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">ConfigModule</span>.<span class="hljs-title function_">forRoot</span>(),   <span class="hljs-comment">// å¿…é¡»æœ€å…ˆåŠ è½½ï¼Œæ‰èƒ½è¯»åˆ° process.env</span>
    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forRoot</span>(
      <span class="hljs-string">`mongodb://<span class="hljs-subst">${process.env.MONGO_HOST}</span>:<span class="hljs-subst">${process.env.MONGO_PORT}</span>/<span class="hljs-subst">${process.env.MONGO_DATABASE}</span>`</span>,
    ),
    <span class="hljs-title class_">ExampleModule</span>,
    <span class="hljs-title class_">UserModule</span>,
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<p>æ³¨æ„å‡ ä¸ªç‚¹ï¼š</p>
<ul>
<li><strong>ConfigModule.forRoot()</strong> è¦æ”¾åœ¨æœ€å‰é¢ï¼Œå¦åˆ™åé¢çš„ <code>process.env.*</code> å¯èƒ½æ˜¯ <code>undefined</code>ï¼ˆä¾‹å¦‚ MongoDB è¿æ¥ä¼šå˜æˆ <code>undefined:undefined</code>ï¼‰ã€‚</li>
<li><strong>MongooseModule.forRoot()</strong> è¿æ¥ MongoDBï¼Œä¸€æ¡è¿æ¥å¤šæ¨¡å—å¤ç”¨ã€‚</li>
<li><strong>ExampleModuleã€UserModule</strong> ç­‰æ˜¯åŠŸèƒ½æ¨¡å—ï¼Œå„è‡ªå†…éƒ¨å†æ³¨å†Œ Controllerã€Service å’Œ <code>forFeature</code> çš„æ¨¡å‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€åŠŸèƒ½æ¨¡å—ï¼šä»¥ Example ä¸ºä¾‹</h3>
<p>ä¸€ä¸ªå®Œæ•´åŠŸèƒ½é€šå¸¸åŒ…å«ï¼š<strong>Module + Controller + Service + Schemaï¼ˆ+ DTOï¼‰</strong>ã€‚</p>
<h4 data-id="heading-6">5.1 æ¨¡å—ï¼šexample.module.ts</h4>
<p>æ¨¡å—æŠŠã€Œè¯¥åŠŸèƒ½éœ€è¦çš„æ¨¡å‹ã€æ§åˆ¶å™¨ã€æœåŠ¡ã€æ†ç»‘åœ¨ä¸€èµ·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">MongooseModule</span>.<span class="hljs-title function_">forFeature</span>([
      { <span class="hljs-attr">name</span>: <span class="hljs-title class_">Example</span>.<span class="hljs-property">name</span>, <span class="hljs-attr">schema</span>: <span class="hljs-title class_">ExampleSchema</span> },
    ]),
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">ExampleController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">ExampleService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleModule</span> {}
</code></pre>
<ul>
<li><strong>MongooseModule.forFeature</strong>ï¼šåœ¨å½“å‰æ¨¡å—å†…æ³¨å†Œ Mongoose æ¨¡å‹ï¼Œè¿™æ ·åœ¨ Service é‡Œæ‰èƒ½ <code>@InjectModel(Example.name)</code>ã€‚</li>
<li><strong>controllers / providers</strong>ï¼šå£°æ˜æœ¬æ¨¡å—çš„æ§åˆ¶å™¨å’Œå¯æ³¨å…¥æœåŠ¡ã€‚</li>
</ul>
<h4 data-id="heading-7">5.2 æ§åˆ¶å™¨ï¼šexample.controller.ts</h4>
<p>æ§åˆ¶å™¨åªåšã€Œæ¥æ”¶è¯·æ±‚ã€è°ƒ Serviceã€è¿”å›ç»“æœã€ï¼Œä¸å†™å…·ä½“ä¸šåŠ¡å’Œæ•°æ®åº“é€»è¾‘ï¼ˆç±»ä¼¼äºjavaä¸­çš„controllerå»è°ƒç”¨Facadeï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªåˆ†å±‚ï¼Œä½¿é€»è¾‘æ›´æ¸…æ™°ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Controller</span>(<span class="hljs-string">'example'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> exampleService: ExampleService</span>) {}

  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">create</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleService</span>.<span class="hljs-title function_">create</span>();
  }

  <span class="hljs-meta">@Get</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">findOne</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleService</span>.<span class="hljs-title function_">findOne</span>(id);
  }

  <span class="hljs-meta">@Patch</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title class_">UpdateOne</span>(<span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-meta">@Body</span>() <span class="hljs-attr">exampleDto</span>: <span class="hljs-title class_">ExampleDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleService</span>.<span class="hljs-title function_">update</span>(id, exampleDto);
  }

  <span class="hljs-meta">@Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">deleteOne</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleService</span>.<span class="hljs-title function_">delete</span>(id);
  }
}
</code></pre>
<p>æ³¨æ„ä¸€ä¸‹è£…é¥°å™¨è¯­æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li><code>@Controller('example')</code>ï¼šè·¯å¾„å‰ç¼€ï¼Œå¾—åˆ° <code>/api/example/...</code>ã€‚</li>
<li><code>@Get() / @Post() / @Patch() / @Delete()</code>ï¼šHTTP æ–¹æ³•ã€‚</li>
<li><code>@Query()</code>ï¼šæŸ¥è¯¢å‚æ•°ï¼›<code>@Param()</code>ï¼šè·¯å¾„å‚æ•°ï¼›<code>@Body()</code>ï¼šè¯·æ±‚ä½“ã€‚</li>
<li>Service é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼Œç”± Nest è‡ªåŠ¨åˆ›å»ºå¹¶æ³¨å…¥å®ä¾‹ã€‚</li>
</ul>
<h4 data-id="heading-8">5.3 æœåŠ¡ï¼šexample.service.ts</h4>
<p>ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“è®¿é—®éƒ½æ”¾åœ¨ Service é‡Œï¼Œé€šè¿‡æ³¨å…¥çš„ Model è°ƒç”¨ Mongoose APIï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-meta">@InjectModel</span>(Example.name)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> exampleModel,
  </span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> example = <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">exampleModel</span>({ <span class="hljs-attr">title</span>: <span class="hljs-string">'test'</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-attr">name</span>: <span class="hljs-string">'nest.js'</span> });
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> example.<span class="hljs-title function_">save</span>();
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleModel</span>.<span class="hljs-title function_">findById</span>(id);
  }


  <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, updateData</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleModel</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: id }, updateData);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">exampleModel</span>.<span class="hljs-title function_">findByIdAndDelete</span>(id);
  }
}
</code></pre>
<ul>
<li><strong>@InjectModel(Example.name)</strong>ï¼šæ³¨å…¥ Mongoose Modelï¼Œ<code>findById</code>ã€<code>updateOne</code>ã€<code>findByIdAndDelete</code> ç­‰éƒ½æ˜¯ Model è‡ªå¸¦æ–¹æ³•ã€‚</li>
</ul>
<h4 data-id="heading-9">5.4 æ–‡æ¡£æ¨¡å‹ï¼šschemas/example.schemas.ts</h4>
<p>ç”¨ Nest çš„ <code>@Schema</code> å’Œ Mongoose å®šä¹‰é›†åˆç»“æ„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Schema</span>({ <span class="hljs-attr">timestamps</span>: <span class="hljs-literal">true</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {
  <span class="hljs-meta">@Prop</span>({ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> })
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@Prop</span>()
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ExampleSchema</span> = <span class="hljs-title class_">SchemaFactory</span>.<span class="hljs-title function_">createForClass</span>(<span class="hljs-title class_">Example</span>);
</code></pre>
<ul>
<li><code>timestamps: true</code> ä¼šè‡ªåŠ¨åŠ  <code>createdAt</code>ã€<code>updatedAt</code>ã€‚</li>
<li><code>ExampleSchema</code> åœ¨ <code>example.module.ts</code> é‡Œé€šè¿‡ <code>forFeature</code> æ³¨å†Œï¼Œå¯¹åº” MongoDB é‡Œçš„ä¸€ä¸ªé›†åˆã€‚</li>
</ul>
<h4 data-id="heading-10">5.5 DTOï¼šdto/example.dto.ts</h4>
<p>DTO æè¿°ã€Œè¯·æ±‚ä½“æˆ–æŸæ®µæ•°æ®çš„å½¢çŠ¶ã€ï¼Œä¾¿äºç±»å‹çº¦æŸå’Œåç»­åŠ æ ¡éªŒï¼ˆå¦‚ class-validatorï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleDto</span> {
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>åœ¨ Controller é‡Œç”¨ <code>@Body() exampleDto: ExampleDto</code> å³å¯è·å¾—ç±»å‹æç¤ºå’Œç»Ÿä¸€ç»“æ„ã€‚</p>
<hr/>
<h3 data-id="heading-11">å…­ã€å…¨å±€æ‹¦æˆªå™¨ä¸å¼‚å¸¸è¿‡æ»¤å™¨</h3>
<h4 data-id="heading-12">6.1 ç»Ÿä¸€æˆåŠŸå“åº”ï¼šTansformInterceptor</h4>
<p>æ‰€æœ‰æ­£å¸¸è¿”å›éƒ½ä¼šå…ˆç»è¿‡æ‹¦æˆªå™¨ï¼Œè¢«åŒ…è£…æˆï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"errno"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>
</code></pre>
<p>å®ç°æ–¹å¼ï¼šåœ¨ <code>next.handle()</code> çš„ Observable ä¸Š <code>map</code> ä¸€å±‚å³å¯,è¿™æ ·å‰ç«¯å¯ä»¥ç»Ÿä¸€æ ¹æ® <code>errno === 0</code> å’Œ <code>data</code> å¤„ç†æˆåŠŸç»“æœã€‚</p>
<h4 data-id="heading-13">6.2 ç»Ÿä¸€é”™è¯¯å“åº”ï¼šHttpExceptionFilter</h4>
<p>å½“æ§åˆ¶å™¨æˆ– Service æŠ›å‡º <code>HttpException</code>ï¼ˆæˆ– Nest å†…ç½®çš„ BadRequestExceptionã€NotFoundException ç­‰ï¼‰æ—¶ï¼Œä¼šè¢«è¯¥è¿‡æ»¤å™¨æ•è·ï¼Œè¿”å›ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é”™è¯¯ä¿¡æ¯"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-01-30T..."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/example/xxx"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åŒæ—¶å¯ä»¥ä¿ç•™æ­£ç¡®çš„ HTTP çŠ¶æ€ç ï¼ˆå¦‚ 400ã€404ï¼‰ã€‚è¿™æ ·æˆåŠŸèµ°æ‹¦æˆªå™¨ã€å¤±è´¥èµ°è¿‡æ»¤å™¨ï¼Œå‰åç«¯çº¦å®šæ¸…æ™°ã€‚</p>
<hr/>
<h3 data-id="heading-14">ä¸ƒã€ç¯å¢ƒå˜é‡ä¸ MongoDB</h3>
<p>æ ¹ç›®å½• <code>.env</code> ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">MONGO_HOST</span>=<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>
<span class="hljs-attr">MONGO_PORT</span>=<span class="hljs-number">27017</span>
<span class="hljs-attr">MONGO_DATABASE</span>=nestdb
<span class="hljs-attr">PORT</span>=<span class="hljs-number">3005</span>
</code></pre>
<p>åŠ¡å¿…ä¿è¯ <strong>ConfigModule.forRoot()</strong> åœ¨ AppModule çš„ <code>imports</code> é‡Œæ’åœ¨æœ€å‰ï¼Œå¦åˆ™ <code>process.env.MONGO_HOST</code> ç­‰å¯èƒ½æœªå®šä¹‰ï¼Œå¯¼è‡´è¿æ¥å¤±è´¥ã€‚</p>
<hr/>
<h3 data-id="heading-15">å…«ã€å°ç»“ä¸å¸¸ç”¨å‘½ä»¤</h3>





































<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>Module</strong></td><td>æŠŠ Controllerã€Serviceã€Mongoose forFeature ç­‰ç»„ç»‡åœ¨ä¸€èµ·</td></tr><tr><td><strong>Controller</strong></td><td>å®šä¹‰è·¯ç”±ï¼Œä½¿ç”¨ @Query / @Param / @Bodyï¼Œè°ƒç”¨ Service</td></tr><tr><td><strong>Service</strong></td><td>ä¸šåŠ¡é€»è¾‘ + æ³¨å…¥ Modelï¼Œåšå¢åˆ æ”¹æŸ¥</td></tr><tr><td><strong>Schema</strong></td><td>Mongoose æ–‡æ¡£ç»“æ„ï¼Œå¯¹åº”ä¸€ä¸ªé›†åˆ</td></tr><tr><td><strong>DTO</strong></td><td>è¯·æ±‚/å“åº”æ•°æ®ç»“æ„ï¼Œä¾¿äºç±»å‹ä¸æ ¡éªŒ</td></tr><tr><td><strong>Interceptor</strong></td><td>åœ¨å“åº”è¿”å›å‰ç»Ÿä¸€åŒ…è£…ï¼ˆå¦‚ errno + dataï¼‰</td></tr><tr><td><strong>ExceptionFilter</strong></td><td>æ•è·å¼‚å¸¸ï¼Œç»Ÿä¸€é”™è¯¯è¿”å›æ ¼å¼</td></tr></tbody></table>
<p>å¸¸ç”¨å‘½ä»¤ï¼ˆä¸å¸¸è§„å‰ç«¯åº”ç”¨åŸºæœ¬ä¸€è‡´ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run start:dev   <span class="hljs-comment"># å¼€å‘æ¨¡å¼ï¼Œçƒ­é‡è½½</span>
npm run build       <span class="hljs-comment"># ç¼–è¯‘</span>
npm run start:prod  <span class="hljs-comment"># ç”Ÿäº§è¿è¡Œï¼ˆéœ€å…ˆ buildï¼‰</span>
</code></pre>
<p>æŒ‰ã€Œå…¥å£ â†’ æ ¹æ¨¡å— â†’ åŠŸèƒ½æ¨¡å—ï¼ˆModule/Controller/Service/Schema/DTOï¼‰â†’ æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨ã€è¿™æ¡çº¿æŠŠé¡¹ç›®èµ°ä¸€éï¼Œå†åŠ¨æ‰‹å¢åˆ æ”¹å‡ æ¡ç¤ºä¾‹æ¥å£ï¼Œå°±èƒ½å¿«é€Ÿå…¥é—¨ NestJSå•¦ã€‚<br/>
åç»­ä¹Ÿå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸ŠåŠ å…¥æ ¡éªŒï¼ˆValidationPipeï¼‰ã€é‰´æƒï¼ˆGuardï¼‰ç­‰ï¼Œé€æ­¥å®Œå–„é¡¹ç›®ã€‚<br/>å¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æŒ‡æ­£~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JWT è®¤è¯åŸç†ä¸æµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7603227363822125082</link>    <guid>https://juejin.cn/post/7603227363822125082</guid>    <pubDate>2026-02-06T03:18:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603227363822125082" data-draft-id="7603216479836913715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JWT è®¤è¯åŸç†ä¸æµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T03:18:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é£Coding"/> <meta itemprop="url" content="https://juejin.cn/user/954816145155181"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JWT è®¤è¯åŸç†ä¸æµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/954816145155181/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é£Coding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:18:51.000Z" title="Fri Feb 06 2026 03:18:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ JWTï¼Ÿ</h2>
<p><strong>JWTï¼ˆJSON Web Tokenï¼‰</strong> æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7519" target="_blank" title="https://tools.ietf.org/html/rfc7519" ref="nofollow noopener noreferrer">RFC 7519</a>ï¼‰ï¼Œç”¨äºåœ¨å„æ–¹ä¹‹é—´ä»¥ JSON å¯¹è±¡çš„å½¢å¼å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚å®ƒå¹¿æ³›åº”ç”¨äº<strong>èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰</strong> å’Œ <strong>ä¿¡æ¯äº¤æ¢ï¼ˆInformation Exchangeï¼‰</strong>ã€‚</p>
<h3 data-id="heading-1">1.1 JWT çš„ç»“æ„</h3>
<p>ä¸€ä¸ªåˆæ³•çš„ JWT ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ç‚¹ <code>.</code> åˆ†éš”ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.Payload</span><span class="hljs-selector-class">.Signature</span>
</code></pre>
<ul>
<li>
<p><strong>Headerï¼ˆå¤´éƒ¨ï¼‰</strong>ï¼šæè¿°ç­¾åç®—æ³•å’Œ token ç±»å‹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"alg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HS256"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"typ"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JWT"</span> <span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>Payloadï¼ˆè½½è·ï¼‰</strong>ï¼šåŒ…å«â€œå£°æ˜â€ï¼ˆClaimsï¼‰ï¼Œå¦‚ç”¨æˆ· IDã€è§’è‰²ã€è¿‡æœŸæ—¶é—´ç­‰</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sub"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1001"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Alice"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"iat"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1700000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1700003600</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>Signatureï¼ˆç­¾åï¼‰</strong>ï¼šç”¨äºéªŒè¯ token æ˜¯å¦è¢«ç¯¡æ”¹</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">HMACSHA256</span>(base64UrlEncode(header) + "." + <span class="hljs-built_in">base64UrlEncode</span>(payload), secret)
</code></pre>
</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šJWT ä½¿ç”¨ Base64Url <strong>ç¼–ç </strong>ï¼Œä¸æ˜¯åŠ å¯†ï¼<strong>ä¸è¦åœ¨ Payload ä¸­å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">äºŒã€JWT è®¤è¯çš„åŸºæœ¬æµç¨‹</h2>
<h3 data-id="heading-3">2.1 æ ‡å‡†è®¤è¯æµç¨‹ï¼ˆæµè§ˆå™¨æˆ–å®¢æˆ·ç«¯ï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Client as å®¢æˆ·ç«¯
    participant AuthServer as è®¤è¯æœåŠ¡å™¨
    participant API as èµ„æºæœåŠ¡å™¨

    User-&gt;&gt;Client: è¾“å…¥è´¦å·å¯†ç 
    Client-&gt;&gt;AuthServer: POST /login {username, password}
    AuthServer--&gt;&gt;AuthServer: éªŒè¯å‡­è¯
    AuthServer-&gt;&gt;Client: 200 OK { access_token, [refresh_token] }
    Client-&gt;&gt;API: GET /profile&lt;br/&gt;Authorization: Bearer &lt;access_token&gt;
    API-&gt;&gt;API: éªŒè¯ JWTï¼ˆç­¾å + è¿‡æœŸæ—¶é—´ï¼‰
    API--&gt;&gt;Client: è¿”å›å—ä¿æŠ¤èµ„æº
</code></pre>
<p><strong>Refresh Tokenå¯é€‰ã€‚</strong></p>
<h3 data-id="heading-4">2.2 å…³é”®ç»†èŠ‚è¯´æ˜</h3>
<ul>
<li>
<p><strong>Access Token</strong>ï¼šçŸ­æœŸæœ‰æ•ˆï¼ˆå¦‚ 15 åˆ†é’Ÿï¼‰ï¼Œé€šå¸¸ä¸º JWTã€‚</p>
</li>
<li>
<p>ä¼ è¾“æ–¹å¼ï¼šé€šè¿‡ HTTP Headerï¼š</p>
<pre><code class="hljs language-http" lang="http"/></pre>
</li>
</ul>
<p>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.x.x</p>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-bullet">-</span> <span class="hljs-code">`Authorization`</span> æ˜¯ Header åï¼ˆkeyï¼‰
<span class="hljs-bullet">-</span> <span class="hljs-code">`Bearer &lt;token&gt;`</span> æ˜¯å€¼ï¼ˆvalueï¼‰ï¼Œå…¶ä¸­ <span class="hljs-code">`Bearer`</span> æ˜¯ OAuth 2.0 å®šä¹‰çš„è®¤è¯æ–¹æ¡ˆã€‚

------

<span class="hljs-section">## ä¸‰ã€JWT çš„å®‰å…¨æ€§åŸç†</span>

<span class="hljs-section">### 3.1 ä¸ºä»€ä¹ˆéœ€è¦å¯†é’¥ï¼Ÿâ€”â€”ç­¾åæœºåˆ¶</span>

JWT çš„ç­¾åä¸æ˜¯æ™®é€šå“ˆå¸Œï¼Œè€Œæ˜¯ <span class="hljs-strong">**å¸¦å¯†é’¥çš„æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼‰**</span>ï¼š

<span class="hljs-bullet">-</span> <span class="hljs-strong">**HS256ï¼ˆå¯¹ç§°ï¼‰**</span>ï¼šä½¿ç”¨å…±äº«å¯†é’¥ï¼ˆsecretï¼‰è¿›è¡Œ HMAC-SHA256 ç­¾åã€‚
<span class="hljs-bullet">-</span> åªæœ‰çŸ¥é“å¯†é’¥çš„æœåŠ¡ç«¯æ‰èƒ½ç­¾å‘æˆ–éªŒè¯ tokenã€‚
<span class="hljs-bullet">-</span> âŒ å¯†é’¥ â‰  â€œç›â€ï¼šç›å¯å…¬å¼€ï¼Œå¯†é’¥å¿…é¡»ä¸¥æ ¼ä¿å¯†ã€‚
<span class="hljs-bullet">-</span> <span class="hljs-strong">**RS256ï¼ˆéå¯¹ç§°ï¼‰**</span>ï¼šæœåŠ¡ç«¯ç”¨ç§é’¥ç­¾åï¼Œå…¶ä»–æœåŠ¡ç”¨å…¬é’¥éªŒè¯ã€‚
<span class="hljs-bullet">-</span> æ›´é€‚åˆå¾®æœåŠ¡æ¶æ„ï¼Œé¿å…å¯†é’¥åˆ†å‘é—®é¢˜ã€‚

<span class="hljs-quote">&gt; âœ… ç­¾åä½œç”¨ï¼šç¡®ä¿ token æœªè¢«ç¯¡æ”¹ï¼Œä¸”æ¥æºå¯ä¿¡ã€‚</span>

<span class="hljs-section">### 3.2 å®‰å…¨é™åˆ¶ä¸é£é™©</span>

| é£é™©                 | åº”å¯¹æªæ–½                                                     |
| -------------------- | ------------------------------------------------------------ |
| Token æ³„éœ²ï¼ˆå¦‚ XSSï¼‰ | ä½¿ç”¨ HTTPSï¼›Access Token çŸ­æœ‰æ•ˆæœŸ                            |
| æ— æ³•ä¸»åŠ¨å¤±æ•ˆ         | å¼•å…¥ Refresh Token æœºåˆ¶ï¼›æˆ–ç»´æŠ¤ token é»‘åå•ï¼ˆç‰ºç‰²æ— çŠ¶æ€æ€§ï¼‰ |
| é‡æ”¾æ”»å‡»             | ç»‘å®šè®¾å¤‡/IPï¼ˆå¯é€‰ï¼‰ï¼›é™åˆ¶ token ä½œç”¨åŸŸ                       |

------

<span class="hljs-section">## å››ã€Token è¿‡æœŸä¸åˆ·æ–°æœºåˆ¶</span>

<span class="hljs-section">### 4.1 ä¸ºä»€ä¹ˆéœ€è¦ Refresh Tokenï¼Ÿ</span>

<span class="hljs-bullet">-</span> Access Token çŸ­æœŸæœ‰æ•ˆ â†’ å®‰å…¨æ€§é«˜ï¼Œä½†é¢‘ç¹ç™»å½•ä½“éªŒå·®ã€‚
<span class="hljs-bullet">-</span> Refresh Token é•¿æœŸæœ‰æ•ˆ â†’ ç”¨äºé™é»˜è·å–æ–° Access Tokenã€‚

<span class="hljs-section">### 4.2 æ¨èè®¾è®¡</span>

| å±æ€§           | Access Token            | Refresh Token                                    |
| -------------- | ----------------------- | ------------------------------------------------ |
| æ ¼å¼           | JWT                     | <span class="hljs-strong">**éšæœºå­—ç¬¦ä¸²ï¼ˆOpaque Tokenï¼‰**</span>                   |
| å­˜å‚¨ï¼ˆæœåŠ¡ç«¯ï¼‰ | æ— ï¼ˆæ— çŠ¶æ€ï¼‰            | æ•°æ®åº“ / Redisï¼ˆå¯æ’¤é”€ï¼‰                         |
| æœ‰æ•ˆæœŸ         | 5~30 åˆ†é’Ÿ               | æ•°å¤©è‡³æ•°å‘¨                                       |
| ä¼ è¾“æ–¹å¼       | <span class="hljs-code">`Authorization: Bearer`</span> | <span class="hljs-strong">**éæµè§ˆå™¨ï¼šJSON Bodyï¼›æµè§ˆå™¨ï¼šHttpOnly Cookie**</span> |

<span class="hljs-quote">&gt; âœ… <span class="hljs-strong">**Refresh Token ä¸å»ºè®®ç”¨ JWT**</span>ï¼Œå› å…¶éœ€æ”¯æŒåŠé”€ï¼ˆå¦‚ç”¨æˆ·ç™»å‡ºã€å¼‚å¸¸æ£€æµ‹ï¼‰ã€‚</span>

<span class="hljs-section">### 4.3 åˆ·æ–°æµç¨‹ï¼ˆå¤–éƒ¨ç³»ç»Ÿè°ƒç”¨ï¼‰</span>

<span class="hljs-code">```mermaid
sequenceDiagram
  participant Client as å¤–éƒ¨ç³»ç»Ÿ
  participant AuthServer as è®¤è¯æœåŠ¡å™¨
  participant API as èµ„æºæœåŠ¡å™¨

  Client-&gt;&gt;API: GET /data&lt;br/&gt;Authorization: Bearer &lt;expired_token&gt;
  API--&gt;&gt;Client: 401 Unauthorized

  Client-&gt;&gt;AuthServer: POST /auth/refresh&lt;br/&gt;{ "refresh_token": "abc123" }
  AuthServer-&gt;&gt;AuthServer: éªŒè¯ refresh_tokenï¼ˆæŸ¥åº“ + æ£€æŸ¥çŠ¶æ€ï¼‰
  alt æœ‰æ•ˆ
      AuthServer-&gt;&gt;Client: 200 OK { "access_token": "new_jwt..." }
      Client-&gt;&gt;API: é‡è¯•è¯·æ±‚ with new token
      API--&gt;&gt;Client: 200 OK æ•°æ®
  else æ— æ•ˆæˆ–è¿‡æœŸ
      AuthServer--&gt;&gt;Client: 401 { error: "invalid_grant" }
      Client-&gt;&gt;Client: é‡æ–°èµ°å®Œæ•´ç™»å½•æµç¨‹
  end
</span></code></pre>
<blockquote>
<p>ğŸ’¡ å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚ HttpClientï¼‰<strong>ä¸åº”ä½¿ç”¨ Cookie</strong>ï¼Œè€Œåº”é€šè¿‡ JSON æˆ– Header ä¼ é€’æ‰€æœ‰ tokenã€‚</p>
</blockquote>
<hr/>
<p>éå¸¸å¥½ï¼ä½ æä¾›çš„æŠ€æœ¯èµ„æ–™å·²ç»éå¸¸å®Œæ•´ï¼Œç°åœ¨æˆ‘ä»¬<strong>ä¸“é—¨é’ˆå¯¹â€œå†…éƒ¨ç³»ç»Ÿä½œä¸ºå®¢æˆ·ç«¯è°ƒç”¨ token æ¥å£â€çš„åœºæ™¯</strong>ï¼Œè¡¥å……ä¸€ä¸ªç®€æ´ã€å®ç”¨ã€ä¸å¤æ‚çš„å®‰å…¨æœºåˆ¶ï¼š<strong>ä½¿ç”¨ Client ID + Client Secretï¼ˆå®¢æˆ·ç«¯å‡­è¯ï¼‰æ¥ä¿æŠ¤ token ä¸‹å‘æ¥å£</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ–°å¢çš„ç« èŠ‚ï¼Œå»ºè®®æ’å…¥åœ¨ <strong>ç¬¬äº”èŠ‚â€œç‰¹æ®Šåœºæ™¯ï¼šéæµè§ˆå™¨å®¢æˆ·ç«¯â€ä¹‹åã€ç¬¬å…­èŠ‚â€œJWT éªŒè¯æµç¨‹â€ä¹‹å‰</strong>ï¼Œä½œä¸º <strong>ç¬¬äº”èŠ‚ï¼ˆåŸç¬¬äº”èŠ‚é¡ºå»¶ä¸ºç¬¬å…­èŠ‚ï¼Œä»¥æ­¤ç±»æ¨ï¼‰</strong>ï¼š</p>
<hr/>
<h2 data-id="heading-5">äº”ã€ä¿æŠ¤ Token ä¸‹å‘æ¥å£ï¼šç¡®ä¿åªæœ‰å—ä¿¡ä»»çš„å†…éƒ¨å®¢æˆ·ç«¯èƒ½è·å– JWT</h2>
<p>å½“ä½ å¼€æ”¾ä¸€ä¸ªæ¥å£ï¼ˆå¦‚ <code>/auth/token</code>ï¼‰ç”¨äºä¸‹å‘ Access Token æ—¶ï¼Œ<strong>å¿…é¡»é˜²æ­¢è¯¥æ¥å£è¢«ä»»æ„ç¨‹åºè°ƒç”¨</strong>ã€‚å¦åˆ™ï¼Œæ”»å‡»è€…å¯ç›´æ¥è¯·æ±‚æ­¤æ¥å£ï¼Œç»•è¿‡å‰ç«¯é€»è¾‘ï¼Œç”šè‡³æš´åŠ›å°è¯•ç”¨æˆ·å‡­è¯ã€‚</p>
<p>å¯¹äº<strong>å†…éƒ¨ç³»ç»Ÿä¹‹é—´çš„è°ƒç”¨</strong>ï¼ˆä¾‹å¦‚å¾®æœåŠ¡ A è°ƒç”¨è®¤è¯æœåŠ¡è·å– JWTï¼‰ï¼Œæ¨èé‡‡ç”¨ <strong>Client ID + Client Secretï¼ˆå®¢æˆ·ç«¯å‡­è¯ï¼‰</strong> æœºåˆ¶ã€‚è¿™æ˜¯ä¸€ç§ç®€å•ã€æ ‡å‡†ã€å®‰å…¨çš„åšæ³•ï¼Œæ— éœ€å¤æ‚åè®®ã€‚</p>
<h3 data-id="heading-6">5.1 åŸºæœ¬åŸç†</h3>
<ul>
<li>æ¯ä¸ªå¯ä¿¡çš„å†…éƒ¨æœåŠ¡åœ¨è®¤è¯æœåŠ¡å™¨æ³¨å†Œæ—¶ï¼Œåˆ†é…ä¸€å¯¹å”¯ä¸€å‡­è¯ï¼š
<ul>
<li><code>client_id</code>ï¼šå…¬å¼€æ ‡è¯†ï¼ˆå¦‚ <code>order-service</code>ï¼‰</li>
<li><code>client_secret</code>ï¼šé«˜ç†µå¯†é’¥ï¼ˆå¦‚ <code>aB3$xK9!qL2@mN8</code>ï¼‰ï¼Œä¸¥æ ¼ä¿å¯†</li>
</ul>
</li>
<li>è°ƒç”¨ <code>/token</code> æ¥å£æ—¶ï¼Œå®¢æˆ·ç«¯å¿…é¡»æä¾›è¿™å¯¹å‡­è¯</li>
<li>è®¤è¯æœåŠ¡éªŒè¯å‡­è¯åˆæ³•åï¼Œæ‰ç­¾å‘ JWT</li>
</ul>
<blockquote>
<p>âœ… è¿™æœ¬è´¨ä¸Šæ˜¯ OAuth 2.0 çš„ <strong>Client Credentials Flow</strong>ï¼Œä½†å®ç°å¯ä»¥æç®€ã€‚</p>
</blockquote>
<h3 data-id="heading-7">5.2 è°ƒç”¨æ–¹å¼ï¼ˆæ¨è HTTP Basic Authï¼‰</h3>
<p>å®¢æˆ·ç«¯é€šè¿‡ <strong>HTTP Basic Authentication</strong> ä¼ é€’å‡­è¯ï¼ˆç¬¦åˆæ ‡å‡†ä¸”ç®€å•ï¼‰ï¼š</p>
<pre><code class="hljs language-http" lang="http">POST /auth/token
Host: auth.yourcompany.com
Authorization: Basic base64(client_id:client_secret)
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials
</code></pre>
<h4 data-id="heading-8">ç¤ºä¾‹ï¼ˆcurlï¼‰ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">curl -u <span class="hljs-string">"order-service:aB3<span class="hljs-variable">$xK9</span>!qL2@mN8"</span> \
  -d <span class="hljs-string">"grant_type=client_credentials"</span> \
  https://auth.yourcompany.com/auth/token
</code></pre>
<blockquote>
<p>ğŸ’¡ ä¸ºä»€ä¹ˆç”¨ Basic Authï¼Ÿ</p>
<ul>
<li>å‡­è¯ä¸ä¼šå‡ºç°åœ¨ URL æˆ–è¯·æ±‚ä½“æ˜æ–‡</li>
<li>æ‰€æœ‰ HTTP å®¢æˆ·ç«¯å¤©ç„¶æ”¯æŒ</li>
<li>é¿å…è‡ªå®šä¹‰ Header å¸¦æ¥çš„å…¼å®¹æ€§é—®é¢˜</li>
</ul>
</blockquote>
<h3 data-id="heading-9">5.3 æœåŠ¡ç«¯éªŒè¯é€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰</h3>
<p>è®¤è¯æœåŠ¡æ”¶åˆ°è¯·æ±‚åï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>ä» <code>Authorization: Basic xxx</code> ä¸­è§£æå‡º <code>client_id</code> å’Œ <code>client_secret</code></li>
<li>æŸ¥è¯¢æœ¬åœ°é…ç½®æˆ–æ•°æ®åº“ï¼Œæ£€æŸ¥ï¼š
<ul>
<li><code>client_id</code> æ˜¯å¦å­˜åœ¨ï¼Ÿ</li>
<li>æä¾›çš„ <code>client_secret</code> æ˜¯å¦åŒ¹é…ï¼Ÿ</li>
</ul>
</li>
<li>è‹¥éªŒè¯é€šè¿‡ï¼Œç”Ÿæˆå¹¶è¿”å› JWTï¼›å¦åˆ™è¿”å› <code>401 Unauthorized</code></li>
</ol>
<blockquote>
<p>ğŸ” å®‰å…¨æç¤ºï¼š</p>
<ul>
<li><code>client_secret</code> åº”é€šè¿‡å®‰å…¨æ–¹å¼åˆ†å‘ï¼ˆå¦‚ç¯å¢ƒå˜é‡ã€K8s Secretã€Vaultï¼‰</li>
<li>ä¸è¦å°† secret å†™å…¥ä»£ç æˆ–æ˜æ–‡é…ç½®æ–‡ä»¶</li>
<li>æ‰€æœ‰é€šä¿¡å¿…é¡»èµ° HTTPS</li>
</ul>
</blockquote>
<h3 data-id="heading-10">5.4 ä¼˜åŠ¿ä¸é€‚ç”¨æ€§</h3>

























<table><thead><tr><th>ä¼˜ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç®€å•</strong></td><td>æ— éœ€ PKIã€mTLSã€å¤æ‚ç­¾å</td></tr><tr><td><strong>æ ‡å‡†</strong></td><td>ç¬¦åˆ OAuth 2.0ï¼Œå·¥å…·é“¾å¹¿æ³›æ”¯æŒ</td></tr><tr><td><strong>å¯æ§</strong></td><td>å¯éšæ—¶ç¦ç”¨æŸä¸ª <code>client_id</code>ï¼ˆå¦‚æœåŠ¡ä¸‹çº¿æˆ–æ³„éœ²ï¼‰</td></tr><tr><td><strong>éš”ç¦»</strong></td><td>ä¸åŒæœåŠ¡ä½¿ç”¨ä¸åŒå‡­è¯ï¼Œæƒé™å¯ç»†åˆ†</td></tr></tbody></table>
<blockquote>
<p>âœ… é€‚ç”¨äºï¼šå†…éƒ¨å¾®æœåŠ¡ã€å®šæ—¶ä»»åŠ¡ã€åå°è„šæœ¬ç­‰<strong>å¯ä¿¡åç«¯ç³»ç»Ÿ</strong>ã€‚</p>
</blockquote>
<hr/>
<p>è¿™æ ·è¡¥å……åï¼Œä½ çš„æŠ€æœ¯èµ„æ–™å°±å®Œæ•´è¦†ç›–äº† <strong>â€œå¦‚ä½•é˜²æ­¢ token æ¥å£è£¸å¥”â€</strong> çš„å…³é”®å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶ä¿æŒå®ç°ç®€å•ã€æ˜“äºè½åœ°ã€‚</p>
<p>å…¶ä½™ç« èŠ‚ç¼–å·è¯·ç›¸åº”é¡ºå»¶å³å¯ã€‚æ˜¯å¦éœ€è¦æˆ‘å¸®ä½ ç”Ÿæˆå®Œæ•´çš„ä¿®è®¢ç‰ˆæ–‡æ¡£ï¼Ÿ</p>
<h2 data-id="heading-11">å…­ã€ç‰¹æ®Šåœºæ™¯ï¼šéæµè§ˆå™¨å®¢æˆ·ç«¯ï¼ˆå¦‚ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼‰</h2>
<p>âœ…**æ­£ç¡®åšæ³•ï¼š**å…¨éƒ¨ä½¿ç”¨ Tokenï¼ˆæ”¾åœ¨ Header ä¸­ï¼‰</p>
<p>åœ¨éæµè§ˆå™¨å®¢æˆ·ç«¯åœºæ™¯ä¸‹ï¼Œå½“è°ƒç”¨æ–¹æ˜¯åç«¯æœåŠ¡ã€è„šæœ¬æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼š</p>




















<table><thead><tr><th>Token ç±»å‹</th><th>å­˜æ”¾ä½ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Access Token</strong></td><td><code>Authorization: Bearer &lt;JWT&gt;</code></td><td>å¿…é¡»ï¼Œç”¨äºæ¯æ¬¡ API è°ƒç”¨</td></tr><tr><td><strong>Refresh Token</strong></td><td><strong>ä¹Ÿæ”¾åœ¨ Body æˆ– Header</strong>ï¼ˆä¸å†æ˜¯ Cookieï¼ï¼‰</td><td>å› ä¸ºå¯¹æ–¹æ˜¯ç¨‹åºï¼Œå¯ä»¥å®‰å…¨å­˜å‚¨å¹¶ä¸»åŠ¨å‘é€</td></tr></tbody></table>
<h3 data-id="heading-12">ç¤ºä¾‹æµç¨‹ï¼ˆå¤–éƒ¨ç³»ç»Ÿè°ƒç”¨ï¼‰</h3>
<pre><code class="hljs language-http" lang="http"># 1. è·å– tokenï¼ˆå®¢æˆ·ç«¯ ID + Secretï¼‰
POST /oauth/token
Content-Type: application/json

{ "grant_type": "client_credentials", "client_id": "svc-a", "client_secret": "xxx" }

â†’ 
200 OK
{
  "access_token": "eyJ...",      // JWT
  "refresh_token": "def456...",  // éšæœºå­—ç¬¦ä¸² or JWTï¼ˆæ ¹æ®è®¾è®¡ï¼‰
  "expires_in": 900
}
# 2. è°ƒç”¨ API
GET /api/data
Authorization: Bearer eyJ...
# 3. åˆ·æ–° tokenï¼ˆå½“ access_token è¿‡æœŸï¼‰
POST /oauth/refresh
Content-Type: application/json

{ "refresh_token": "def456..." }  â† æ”¾åœ¨ body ä¸­ï¼

â†’ 
200 OK
{ "access_token": "new_jwt...", "refresh_token": "new_def..." }
</code></pre>
<h2 data-id="heading-13">ğŸ›¡ï¸ å®‰å…¨å»ºè®®ï¼ˆé’ˆå¯¹å¤–éƒ¨ç³»ç»Ÿï¼‰</h2>
<ol>
<li><strong>ä½¿ç”¨ HTTPS å¼ºåˆ¶åŠ å¯†</strong>
æ‰€æœ‰ token åœ¨ä¼ è¾“ä¸­å¿…é¡»åŠ å¯†ï¼ˆå¦åˆ™ä¼šè¢«ä¸­é—´äººçªƒå–ï¼‰ã€‚</li>
<li><strong>Refresh Token ä»åº”å¯æ’¤é”€</strong>
å³ä½¿æ”¾åœ¨ Body ä¸­ï¼Œä¹Ÿè¦åœ¨æœåŠ¡ç«¯æ•°æ®åº“å­˜å‚¨å…¶çŠ¶æ€ï¼ˆæ˜¯å¦è¿‡æœŸã€æ˜¯å¦è¢«åŠé”€ï¼‰ã€‚</li>
<li><strong>é™åˆ¶å®¢æˆ·ç«¯æƒé™ï¼ˆScopeï¼‰</strong>
ä½¿ç”¨ OAuth2 çš„ <code>scope</code> å­—æ®µï¼Œç¡®ä¿å¤–éƒ¨ç³»ç»Ÿåªèƒ½è®¿é—®æ‰€éœ€èµ„æºã€‚</li>
<li><strong>ä½¿ç”¨ Client Credentials Flowï¼ˆOAuth2ï¼‰</strong>
é€‚åˆ M2M åœºæ™¯ï¼šç”¨ <code>client_id + client_secret</code> æ¢å– Access Tokenï¼Œæ— éœ€ç”¨æˆ·å‚ä¸ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-14">ä¸ƒã€JWT éªŒè¯æµç¨‹ï¼ˆæœåŠ¡ç«¯è§†è§’ï¼‰</h2>
<p>å½“æ”¶åˆ°ä¸€ä¸ª JWTï¼ŒæœåŠ¡ç«¯æŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š</p>
<ol>
<li><strong>æ ¼å¼æ£€æŸ¥</strong>ï¼šæ˜¯å¦åŒ…å« exactly ä¸¤ä¸ª <code>.</code>ï¼Ÿ</li>
<li><strong>åˆ†å‰²ä¸‰æ®µ</strong>ï¼šHeaderã€Payloadã€Signatureã€‚</li>
<li><strong>Base64Url è§£ç </strong> Header å’Œ Payloadã€‚</li>
<li>éªŒè¯ç­¾åï¼š
<ul>
<li>ç”¨ header æŒ‡å®šçš„ç®—æ³• + æœåŠ¡ç«¯å¯†é’¥é‡æ–°è®¡ç®—ç­¾åã€‚</li>
<li>ä¸åŸå§‹ Signature æ¯”è¾ƒï¼Œä¸ä¸€è‡´åˆ™æ‹’ç»ã€‚</li>
</ul>
</li>
<li>éªŒè¯ Claimsï¼š
<ul>
<li><code>exp</code>ï¼šæ˜¯å¦è¿‡æœŸï¼Ÿ</li>
<li><code>nbf</code>ï¼šæ˜¯å¦å°šæœªç”Ÿæ•ˆï¼Ÿ</li>
<li><code>iss</code> / <code>aud</code>ï¼šç­¾å‘è€…å’Œå—ä¼—æ˜¯å¦åˆæ³•ï¼Ÿ</li>
</ul>
</li>
<li><strong>ï¼ˆå¯é€‰ï¼‰é¢å¤–æ£€æŸ¥</strong>ï¼šç”¨æˆ·æ˜¯å¦è¢«ç¦ç”¨ï¼ŸIP æ˜¯å¦å¼‚å¸¸ï¼Ÿ</li>
<li><strong>é€šè¿‡</strong>ï¼šä» <code>sub</code> ç­‰å­—æ®µæå–ç”¨æˆ·èº«ä»½ï¼Œç»§ç»­å¤„ç†è¯·æ±‚ã€‚</li>
</ol>
<blockquote>
<p>âœ… æ•´ä¸ªè¿‡ç¨‹é€šå¸¸æ— éœ€æŸ¥æ•°æ®åº“ï¼ˆé™¤éåšé¢å¤–é£æ§ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">å…«ã€æœ€ä½³å®è·µæ€»ç»“</h2>





































<table><thead><tr><th>é¡¹ç›®</th><th>å»ºè®®</th></tr></thead><tbody><tr><td><strong>Access Token</strong></td><td>ä½¿ç”¨ JWTï¼ŒçŸ­æœŸæœ‰æ•ˆï¼Œæ”¾ <code>Authorization: Bearer</code></td></tr><tr><td><strong>Refresh Token</strong></td><td>ä½¿ç”¨éšæœºå­—ç¬¦ä¸²ï¼Œé•¿æœŸæœ‰æ•ˆï¼ŒæœåŠ¡ç«¯å¯æ’¤é”€</td></tr><tr><td><strong>æµè§ˆå™¨åœºæ™¯</strong></td><td>Refresh Token å­˜ HttpOnly + Secure + SameSite Cookie</td></tr><tr><td><strong>å¤–éƒ¨ç³»ç»Ÿåœºæ™¯</strong></td><td>æ‰€æœ‰ token é€šè¿‡ JSON/Header ä¼ é€’ï¼Œä¸ç”¨ Cookie</td></tr><tr><td><strong>ä¼ è¾“å®‰å…¨</strong></td><td>å¼ºåˆ¶ HTTPS</td></tr><tr><td><strong>ç®—æ³•é€‰æ‹©</strong></td><td>ä¼˜å…ˆ RS256ï¼ˆéå¯¹ç§°ï¼‰ï¼›è‹¥å•ä½“åº”ç”¨å¯ç”¨ HS256ï¼ˆå¯†é’¥ä¸¥æ ¼ä¿å¯†ï¼‰</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>æ˜ç¡®åŒºåˆ† <code>access_token_expired</code> ä¸ <code>invalid_refresh_token</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">ä¹ã€å¸¸è§è¯¯åŒºæ¾„æ¸…</h2>
<ul>
<li>âŒ â€œJWT æ˜¯åŠ å¯†çš„â€ â†’ å®é™…åªæ˜¯ç¼–ç ï¼Œå†…å®¹å¯è¯»ã€‚</li>
<li>âŒ â€œRefresh Token ä¹Ÿè¯¥æ˜¯ JWTâ€ â†’ ä¼šå¤±å»å¯æ’¤é”€æ€§ï¼Œä¸æ¨èã€‚</li>
<li>âŒ â€œHttpOnly Cookie èƒ½é˜² CSRFâ€ â†’ ä¸èƒ½ï¼éœ€é…åˆ <code>SameSite</code> æˆ– CSRF Tokenã€‚</li>
<li>âŒ â€œæ‰€æœ‰å®¢æˆ·ç«¯éƒ½é€‚åˆç”¨ Cookieâ€ â†’ ä»…æµè§ˆå™¨é€‚ç”¨ï¼Œå¤–éƒ¨ç³»ç»Ÿåº”èµ° Token-in-Headerã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[CustomColorBufferèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7603201727716442164</link>    <guid>https://juejin.cn/post/7603201727716442164</guid>    <pubDate>2026-02-06T03:30:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603201727716442164" data-draft-id="7603201727716425780" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[CustomColorBufferèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-02-06T03:30:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[CustomColorBufferèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:30:03.000Z" title="Fri Feb 06 2026 03:30:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹ï¼ˆCustom Color Nodeï¼‰æ˜¯Unityé«˜æ¸…æ¸²æŸ“ç®¡çº¿ï¼ˆHDRPï¼‰ä¸­ä¸€ä¸ªé‡è¦çš„ç€è‰²å™¨å›¾å½¢èŠ‚ç‚¹ï¼Œä¸“é—¨ç”¨äºè®¿é—®HDRPåˆ†é…çš„è‡ªå®šä¹‰é€šé“é¢œè‰²ç¼“å†²åŒºã€‚è¿™ä¸ªèŠ‚ç‚¹ä¸ºç€è‰²å™¨å¼€å‘è€…æä¾›äº†åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¯»å–å’Œåˆ©ç”¨è‡ªå®šä¹‰é¢œè‰²æ•°æ®çš„èƒ½åŠ›ï¼Œæ˜¯å®ç°å¤æ‚æ¸²æŸ“æ•ˆæœçš„å…³é”®å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>åœ¨HDRPæ¸²æŸ“ç®¡çº¿ä¸­ï¼Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¸²æŸ“ç›®æ ‡ï¼Œå…è®¸å¼€å‘è€…åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å­˜å‚¨é¢å¤–çš„é¢œè‰²ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥åœ¨åç»­çš„æ¸²æŸ“é€šé“ä¸­è¢«å…¶ä»–ç€è‰²å™¨è¯»å–å’Œä½¿ç”¨ï¼Œä»è€Œå®ç°å„ç§é«˜çº§æ¸²æŸ“æŠ€æœ¯ï¼Œå¦‚è‡ªå®šä¹‰å…‰ç…§è®¡ç®—ã€åæœŸå¤„ç†æ•ˆæœã€æè´¨å±æ€§ä¼ é€’ç­‰ã€‚</p>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä»è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¸­é‡‡æ ·æ•°æ®ã€‚å®ƒæ¥å—UVåæ ‡ä½œä¸ºè¾“å…¥ï¼Œè¿”å›å¯¹åº”å±å¹•ä½ç½®çš„è‡ªå®šä¹‰é¢œè‰²å€¼ã€‚è¿™ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨ç€è‰²å™¨ä¸­è®¿é—®ä¹‹å‰æ¸²æŸ“é€šé“ä¸­å­˜å‚¨çš„é¢œè‰²ä¿¡æ¯ï¼Œä¸ºåˆ›å»ºå¤æ‚çš„å¤šé€šé“æ¸²æŸ“æ•ˆæœæä¾›äº†å¯èƒ½ã€‚</p>
<h2 data-id="heading-0">æ¸²æŸ“ç®¡çº¿å…¼å®¹æ€§</h2>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹åœ¨ä¸åŒæ¸²æŸ“ç®¡çº¿ä¸­çš„æ”¯æŒæƒ…å†µæ˜¯å¼€å‘è€…éœ€è¦é‡ç‚¹å…³æ³¨çš„å†…å®¹ã€‚äº†è§£èŠ‚ç‚¹çš„å…¼å®¹æ€§æœ‰åŠ©äºæ­£ç¡®é€‰æ‹©å’Œä½¿ç”¨è¯¥èŠ‚ç‚¹ï¼Œé¿å…åœ¨ä¸æ”¯æŒçš„æ¸²æŸ“ç®¡çº¿ä¸­å‡ºç°é”™è¯¯æˆ–æ„å¤–è¡Œä¸ºã€‚</p>















<table><thead><tr><th><strong>èŠ‚ç‚¹</strong></th><th><strong>é€šç”¨æ¸²æŸ“ç®¡çº¿ (URP)</strong></th><th><strong>é«˜æ¸…æ¸²æŸ“ç®¡çº¿ (HDRP)</strong></th></tr></thead><tbody><tr><td>Custom Color Node</td><td>å¦</td><td>æ˜¯</td></tr></tbody></table>
<p>ä»å…¼å®¹æ€§è¡¨æ ¼å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œè‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ˜¯HDRPç‰¹æœ‰çš„åŠŸèƒ½ï¼Œåœ¨URPä¸­ä¸è¢«æ”¯æŒã€‚è¿™ä¸€å·®å¼‚æºäºä¸¤ä¸ªæ¸²æŸ“ç®¡çº¿çš„æ¶æ„è®¾è®¡å’ŒåŠŸèƒ½å®šä½ä¸åŒã€‚</p>
<p>HDRPä½œä¸ºUnityçš„é«˜ç«¯æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼Œä¸“æ³¨äºå®ç°æœ€é«˜è´¨é‡çš„å›¾å½¢æ•ˆæœï¼Œæ”¯æŒå„ç§å¤æ‚çš„æ¸²æŸ“æŠ€æœ¯ã€‚è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºæ˜¯HDRPå¤šé€šé“æ¸²æŸ“æ¶æ„çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…è®¸å¼€å‘è€…åœ¨ä¸åŒçš„æ¸²æŸ“é€šé“ä¹‹é—´ä¼ é€’é¢œè‰²æ•°æ®ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒURPä½œä¸ºè½»é‡çº§æ¸²æŸ“ç®¡çº¿ï¼Œä¼˜å…ˆè€ƒè™‘æ€§èƒ½å’Œè·¨å¹³å°å…¼å®¹æ€§ï¼Œå› æ­¤æ²¡æœ‰å®ç°è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºè¿™æ ·çš„é«˜çº§åŠŸèƒ½ã€‚URPæä¾›äº†æ›´ç®€åŒ–çš„æ¸²æŸ“è·¯å¾„ï¼Œå‡å°‘äº†æ¸²æŸ“é€šé“çš„å¤æ‚æ€§å’Œèµ„æºæ¶ˆè€—ã€‚</p>
<p>å½“åœ¨URPé¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ—¶ï¼ŒShader Graphä¼šæ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œå¹¶ä¸”èŠ‚ç‚¹ä¸ä¼šäº§ç”Ÿä»»ä½•æœ‰æ•ˆè¾“å‡ºã€‚å¦‚æœé¡¹ç›®éœ€è¦ä»URPè¿ç§»åˆ°HDRPï¼Œæˆ–è€…åä¹‹ï¼Œå¼€å‘è€…éœ€è¦æ³¨æ„è¿™ä¸€ç‚¹ï¼Œå¹¶ç›¸åº”è°ƒæ•´ç€è‰²å™¨é€»è¾‘ã€‚</p>
<h2 data-id="heading-1">ç«¯å£è¯¦è§£</h2>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªä¸»è¦ç«¯å£ï¼šè¾“å…¥ç«¯å£UVå’Œè¾“å‡ºç«¯å£Outputã€‚ç†è§£è¿™äº›ç«¯å£çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•æ˜¯æ­£ç¡®ä½¿ç”¨è¯¥èŠ‚ç‚¹çš„å…³é”®ã€‚</p>
<h3 data-id="heading-2">UVè¾“å…¥ç«¯å£</h3>
<p>UVè¾“å…¥ç«¯å£æ˜¯è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹çš„ä¸»è¦è¾“å…¥æ¥å£ï¼Œç”¨äºæŒ‡å®šä»è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºé‡‡æ ·çš„ä½ç½®ã€‚</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>åç§°</strong></td><td>UV</td></tr><tr><td><strong>æ–¹å‘</strong></td><td>è¾“å…¥</td></tr><tr><td><strong>ç±»å‹</strong></td><td>Vector 4</td></tr><tr><td><strong>ç»‘å®š</strong></td><td>å±å¹•ä½ç½®ï¼ˆScreen Positionï¼‰</td></tr><tr><td><strong>æè¿°</strong></td><td>è®¾ç½®ç”¨äºé‡‡æ ·çš„æ ‡å‡†åŒ–å±å¹•åæ ‡</td></tr></tbody></table>
<p>UVç«¯å£æ¥å—Vector 4ç±»å‹çš„è¾“å…¥ï¼Œä½†å®é™…ä½¿ç”¨çš„é€šå¸¸æ˜¯xyåˆ†é‡ï¼Œå¯¹åº”å±å¹•ç©ºé—´çš„æ ‡å‡†åŒ–åæ ‡ã€‚æ ‡å‡†åŒ–åæ ‡æ„å‘³ç€åæ ‡å€¼èŒƒå›´åœ¨[0,1]ä¹‹é—´ï¼Œå…¶ä¸­(0,0)è¡¨ç¤ºå±å¹•å·¦ä¸‹è§’ï¼Œ(1,1)è¡¨ç¤ºå±å¹•å³ä¸Šè§’ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒUVè¾“å…¥é€šå¸¸è¿æ¥åˆ°Screen PositionèŠ‚ç‚¹çš„è¾“å‡ºã€‚Screen PositionèŠ‚ç‚¹æä¾›äº†å½“å‰åƒç´ åœ¨å±å¹•ç©ºé—´ä¸­çš„ä½ç½®ä¿¡æ¯ï¼Œå¯ä»¥ä»¥ä¸åŒçš„åæ ‡ç©ºé—´å½¢å¼è¾“å‡ºï¼š</p>
<ul>
<li>é»˜è®¤çš„å±å¹•ç©ºé—´åæ ‡ï¼ˆä¸­å¿ƒä¸º(0,0)ï¼ŒèŒƒå›´å–å†³äºåˆ†è¾¨ç‡ï¼‰</li>
<li>æ ‡å‡†åŒ–å±å¹•åæ ‡ï¼ˆèŒƒå›´[0,1]ï¼‰</li>
<li>åŸå§‹å±å¹•åæ ‡ï¼ˆåƒç´ åæ ‡ï¼‰</li>
</ul>
<p>å¯¹äºè‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹ï¼Œæœ€å¸¸ç”¨çš„æ˜¯æ ‡å‡†åŒ–å±å¹•åæ ‡ï¼Œå› ä¸ºå®ƒä¸å—å±å¹•åˆ†è¾¨ç‡å½±å“ï¼Œèƒ½å¤Ÿç¡®ä¿åœ¨ä¸åŒåˆ†è¾¨ç‡å’Œå®½é«˜æ¯”ä¸‹çš„ä¸€è‡´è¡Œä¸ºã€‚</p>
<p>é™¤äº†ç›´æ¥ä½¿ç”¨å±å¹•ä½ç½®ï¼ŒUVè¾“å…¥è¿˜å¯ä»¥ç»è¿‡å˜æ¢å¤„ç†ï¼Œä»¥å®ç°ç‰¹å®šçš„é‡‡æ ·æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡Tilingå’ŒOffsetæ“ä½œå®ç°çº¹ç†çš„å¹³é“ºå’Œåç§»ï¼Œæˆ–è€…ä½¿ç”¨æ•°å­¦èŠ‚ç‚¹å¯¹UVåæ ‡è¿›è¡Œæ‰­æ›²ï¼Œåˆ›å»ºç‰¹æ®Šçš„è§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-3">Outputè¾“å‡ºç«¯å£</h3>
<p>Outputè¾“å‡ºç«¯å£æ˜¯è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹çš„ä¸»è¦è¾“å‡ºæ¥å£ï¼Œæä¾›ä»è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºé‡‡æ ·å¾—åˆ°çš„é¢œè‰²å€¼ã€‚</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>åç§°</strong></td><td>Output</td></tr><tr><td><strong>æ–¹å‘</strong></td><td>è¾“å‡º</td></tr><tr><td><strong>ç±»å‹</strong></td><td>Vector 4</td></tr><tr><td><strong>ç»‘å®š</strong></td><td>æ— </td></tr><tr><td><strong>æè¿°</strong></td><td>é‡‡æ ·åæ ‡ä½ç½®çš„è‡ªå®šä¹‰é€šé“é¢œè‰²ç¼“å†²åŒºä¸­çš„å€¼</td></tr></tbody></table>
<p>Outputç«¯å£è¾“å‡ºVector 4ç±»å‹çš„å€¼ï¼Œå¯¹åº”RGBAé¢œè‰²é€šé“ã€‚åœ¨HDRPä¸­ï¼Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºé€šå¸¸ä½¿ç”¨HDRï¼ˆé«˜åŠ¨æ€èŒƒå›´ï¼‰æ ¼å¼å­˜å‚¨é¢œè‰²ä¿¡æ¯ï¼Œè¿™æ„å‘³ç€é¢œè‰²å€¼å¯ä»¥è¶…è¿‡[0,1]çš„èŒƒå›´ï¼Œæ”¯æŒæ›´äº®çš„é¢œè‰²å’Œæ›´ä¸°å¯Œçš„å…‰ç…§ç»†èŠ‚ã€‚</p>
<p>è¾“å‡ºé¢œè‰²çš„å…·ä½“å«ä¹‰å’Œç”¨é€”å–å†³äºè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„å†™å…¥å†…å®¹ã€‚åœ¨HDRPä¸­ï¼Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¡«å……ï¼š</p>
<ul>
<li>ä½¿ç”¨è‡ªå®šä¹‰æ¸²æŸ“é€šé“ï¼ˆCustom Passï¼‰å†™å…¥æ•°æ®</li>
<li>åœ¨æè´¨çš„ç€è‰²å™¨ä¸­ç›´æ¥å†™å…¥è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒº</li>
<li>é€šè¿‡HDRPçš„ä½“ç§¯ç³»ç»Ÿæˆ–åæœŸå¤„ç†æ•ˆæœå†™å…¥</li>
</ul>
<p>ç”±äºè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå¯èƒ½åŒ…å«å„ç§ç±»å‹çš„æ•°æ®ï¼ˆä¸ä»…ä»…æ˜¯é¢œè‰²å€¼ï¼‰ï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨æ—¶éœ€è¦äº†è§£æ•°æ®çš„æ¥æºå’Œæ ¼å¼ã€‚ä¾‹å¦‚ï¼Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå¯èƒ½å­˜å‚¨çš„æ˜¯æ³•çº¿ä¿¡æ¯ã€æ·±åº¦å€¼ã€æè´¨å±æ€§æˆ–å…¶ä»–è‡ªå®šä¹‰æ•°æ®ï¼Œè¿™æ—¶éœ€è¦å¯¹é‡‡æ ·ç»“æœè¿›è¡Œé€‚å½“çš„è§£ç å’Œå¤„ç†ã€‚</p>
<h2 data-id="heading-4">ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹</h2>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹åœ¨HDRPé¡¹ç›®ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤šé€šé“æ¸²æŸ“å’Œè‡ªå®šä¹‰åæœŸå¤„ç†æ•ˆæœçš„å¤æ‚é¡¹ç›®ä¸­ã€‚</p>
<h3 data-id="heading-5">å±å¹•ç©ºé—´æ•ˆæœ</h3>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹å¸¸ç”¨äºåˆ›å»ºå„ç§å±å¹•ç©ºé—´æ•ˆæœï¼Œé€šè¿‡åœ¨ä¸€ä¸ªæ¸²æŸ“é€šé“ä¸­è®¡ç®—å¹¶å­˜å‚¨æ•°æ®ï¼Œåœ¨åç»­é€šé“ä¸­è¯»å–ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>å±å¹•ç©ºé—´åå°„</strong>ï¼šåœ¨ç¬¬ä¸€ä¸ªé€šé“ä¸­æ¸²æŸ“åœºæ™¯å¹¶å­˜å‚¨åå°„æ•°æ®åˆ°è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºï¼Œåœ¨ç¬¬äºŒä¸ªé€šé“ä¸­é‡‡æ ·è¿™äº›æ•°æ®è®¡ç®—åå°„æ•ˆæœ</li>
<li><strong>é«˜çº§é›¾æ•ˆ</strong>ï¼šå­˜å‚¨æ¯ä¸ªåƒç´ çš„é›¾æ•ˆå‚æ•°ï¼Œåœ¨åæœŸå¤„ç†ä¸­å®ç°å¤æ‚çš„ä½“ç§¯é›¾æ•ˆæœ</li>
<li><strong>è‡ªå®šä¹‰æŠ—é”¯é½¿</strong>ï¼šå­˜å‚¨å‡ ä½•è¾¹ç•Œä¿¡æ¯ï¼Œç”¨äºå®ç°æ¯”MSAAæ›´é«˜çº§çš„è‡ªå®šä¹‰æŠ—é”¯é½¿ç®—æ³•</li>
</ul>
<h3 data-id="heading-6">æè´¨ç‰¹æ•ˆ</h3>
<p>é€šè¿‡è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹ï¼Œå¯ä»¥å®ç°éœ€è¦è®¿é—®å±å¹•ç©ºé—´æ•°æ®çš„å¤æ‚æè´¨æ•ˆæœã€‚</p>
<ul>
<li><strong>æ¹¿è¡¨é¢æ•ˆæœ</strong>ï¼šæ ¹æ®è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¸­å­˜å‚¨çš„æ¹¿åº¦å›¾ï¼ŒåŠ¨æ€è°ƒæ•´æè´¨çš„åå°„ç‡å’Œå…‰æ»‘åº¦</li>
<li><strong>å˜å½¢æ•ˆæœ</strong>ï¼šä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¸­çš„å˜å½¢æ•°æ®ï¼Œæ‰­æ›²æè´¨è¡¨é¢åˆ›å»ºçƒ­æµªæˆ–æ°´ä¸‹æ‰­æ›²æ•ˆæœ</li>
<li><strong>è¾¹ç¼˜å…‰å¢å¼º</strong>ï¼šç»“åˆè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¸­çš„æ·±åº¦å’Œæ³•çº¿ä¿¡æ¯ï¼Œå®ç°æ›´ç²¾ç¡®çš„è¾¹ç¼˜å…‰æ•ˆæœ</li>
</ul>
<h3 data-id="heading-7">æ•°æ®ä¼ é€’ä¸åå¤„ç†</h3>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹å¯ä»¥ä½œä¸ºä¸åŒæ¸²æŸ“å…ƒç´ ä¹‹é—´çš„æ•°æ®æ¡¥æ¢ï¼Œå®ç°å¤æ‚çš„æ¸²æŸ“ç®¡çº¿ã€‚</p>
<ul>
<li><strong>å…‰ç…§ä¼ é€’</strong>ï¼šå°†å¤æ‚çš„å…‰ç…§è®¡ç®—ç»“æœå­˜å‚¨åˆ°è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºï¼Œä¾›å¤šä¸ªåæœŸå¤„ç†æ•ˆæœä½¿ç”¨</li>
<li><strong>è’™ç‰ˆä¸é€‰æ‹©</strong>ï¼šå­˜å‚¨å¯¹è±¡IDæˆ–é€‰æ‹©ä¿¡æ¯ï¼Œå®ç°ç‚¹å‡»é€‰æ‹©ã€åŒºåŸŸé«˜äº®ç­‰äº¤äº’åŠŸèƒ½</li>
<li><strong>è‡ªå®šä¹‰æ·±åº¦ä½¿ç”¨</strong>ï¼šå­˜å‚¨éæ ‡å‡†çš„æ·±åº¦ä¿¡æ¯ï¼Œç”¨äºç‰¹æ®Šçš„å…‰ç…§è®¡ç®—æˆ–é›¾æ•ˆ</li>
</ul>
<h2 data-id="heading-8">é…ç½®ä¸è®¾ç½®</h2>
<p>åœ¨HDRPä¸­ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹å‰ï¼Œéœ€è¦æ­£ç¡®é…ç½®æ¸²æŸ“ç®¡çº¿èµ„äº§å’Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºã€‚</p>
<h3 data-id="heading-9">HDRPèµ„æºé…ç½®</h3>
<p>ç¡®ä¿HDRPèµ„æºä¸­å¯ç”¨äº†è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºæ”¯æŒï¼š</p>
<ul>
<li>åœ¨Projectçª—å£ä¸­é€‰æ‹©HDRPèµ„æº</li>
<li>åœ¨Inspectorä¸­æ‰¾åˆ°Frame Settings &gt; Lighting</li>
<li>ç¡®ä¿Custom Coloré€‰é¡¹å·²å¯ç”¨</li>
<li>æ ¹æ®éœ€è¦è®¾ç½®è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„æ ¼å¼å’Œç²¾åº¦</li>
</ul>
<h3 data-id="heading-10">è‡ªå®šä¹‰æ¸²æŸ“é€šé“è®¾ç½®</h3>
<p>é€šè¿‡è‡ªå®šä¹‰æ¸²æŸ“é€šé“ï¼ˆCustom Passï¼‰å‘è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå†™å…¥æ•°æ®ï¼š</p>
<ul>
<li>åˆ›å»ºCustom Pass Volumeæˆ–å°†Custom Passç»„ä»¶æ·»åŠ åˆ°ç›¸æœº</li>
<li>é€‰æ‹©é€‚å½“çš„Custom Passç±»å‹ï¼ˆå¦‚Draw Renderersï¼‰</li>
<li>åœ¨Custom Passçš„è®¾ç½®ä¸­ï¼ŒæŒ‡å®šç›®æ ‡é¢œè‰²ç¼“å†²åŒºä¸ºCustom Color</li>
<li>ç¼–å†™æˆ–é€‰æ‹©ç”¨äºå†™å…¥è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„ç€è‰²å™¨</li>
</ul>
<h3 data-id="heading-11">ç€è‰²å™¨ä¸­çš„å†™å…¥</h3>
<p>åœ¨ç€è‰²å™¨ä¸­å‘è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå†™å…¥æ•°æ®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">HLSL

<span class="hljs-comment">// åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­</span>
void <span class="hljs-built_in">frag</span>(v2f i, out float4 outColor : COLOR, out float4 customColor : CustomColor)
{
    <span class="hljs-comment">// è®¡ç®—ä¸»é¢œè‰²è¾“å‡º</span>
    outColor = <span class="hljs-built_in">CalculateMainColor</span>(i);

    <span class="hljs-comment">// è®¡ç®—å¹¶å†™å…¥è‡ªå®šä¹‰é¢œè‰²</span>
    customColor = <span class="hljs-built_in">CalculateCustomData</span>(i);
}
</code></pre>
<h2 data-id="heading-12">æ€§èƒ½è€ƒè™‘</h2>
<p>ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ—¶éœ€è¦è€ƒè™‘æ€§èƒ½å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨å¹³å°æˆ–æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸­ã€‚</p>
<h3 data-id="heading-13">å¸¦å®½ä¸å†…å­˜</h3>
<p>è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¼šå¢åŠ æ˜¾å­˜å ç”¨å’Œå†…å­˜å¸¦å®½ä½¿ç”¨ï¼š</p>
<ul>
<li>è¯„ä¼°æ˜¯å¦éœ€è¦å…¨åˆ†è¾¨ç‡çš„è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºï¼Œè€ƒè™‘ä½¿ç”¨åŠåˆ†è¾¨ç‡æˆ–å››åˆ†ä¹‹ä¸€åˆ†è¾¨ç‡</li>
<li>é€‰æ‹©åˆé€‚çš„ç¼“å†²åŒºæ ¼å¼ï¼Œé¿å…ä¸å¿…è¦çš„ç²¾åº¦æµªè´¹</li>
<li>åœ¨ä¸éœ€è¦è‡ªå®šä¹‰é¢œè‰²æ•ˆæœçš„ç›¸æœºä¸Šç¦ç”¨ç›¸å…³åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-14">é‡‡æ ·ä¼˜åŒ–</h3>
<p>ä¼˜åŒ–è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„é‡‡æ ·æ“ä½œï¼š</p>
<ul>
<li>é¿å…åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è¿›è¡Œå¤šæ¬¡é‡‡æ ·ï¼Œè€ƒè™‘ä½¿ç”¨é¢„è®¡ç®—æˆ–é¡¶ç‚¹ç€è‰²å™¨é‡‡æ ·</li>
<li>ä½¿ç”¨é€‚å½“çš„mipmapçº§åˆ«æˆ–ä½¿ç”¨é‡‡æ ·å™¨çŠ¶æ€ä¼˜åŒ–è¯»å–æ€§èƒ½</li>
<li>è€ƒè™‘ä½¿ç”¨è®¡ç®—ç€è‰²å™¨è¿›è¡Œæ‰¹é‡å¤„ç†ï¼Œå‡å°‘ç‰‡å…ƒç€è‰²å™¨çš„è´Ÿæ‹…</li>
</ul>
<h3 data-id="heading-15">å¹³å°å·®å¼‚</h3>
<p>ä¸åŒç¡¬ä»¶å¹³å°å¯¹è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„æ”¯æŒå¯èƒ½æœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li>ç§»åŠ¨è®¾å¤‡å¯èƒ½å¯¹æ¸²æŸ“ç›®æ ‡æ•°é‡æœ‰é™åˆ¶</li>
<li>æŸäº›å¹³å°å¯èƒ½ä¸æ”¯æŒç‰¹å®šçš„ç¼“å†²åŒºæ ¼å¼</li>
<li>æµ‹è¯•åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„æ€§èƒ½å’Œå…¼å®¹æ€§ï¼Œå‡†å¤‡å›é€€æ–¹æ¡ˆ</li>
</ul>
<h2 data-id="heading-16">æ•…éšœæ’é™¤</h2>
<p>åœ¨ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ—¶å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•ã€‚</p>
<h3 data-id="heading-17">èŠ‚ç‚¹ä¸å·¥ä½œ</h3>
<p>å¦‚æœè‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ²¡æœ‰è¾“å‡ºé¢„æœŸç»“æœï¼š</p>
<ul>
<li>ç¡®è®¤é¡¹ç›®ä½¿ç”¨çš„æ˜¯HDRPæ¸²æŸ“ç®¡çº¿ï¼Œè€Œä¸æ˜¯URPæˆ–å†…ç½®æ¸²æŸ“ç®¡çº¿</li>
<li>æ£€æŸ¥HDRPèµ„æºä¸­æ˜¯å¦å¯ç”¨äº†Custom ColoråŠŸèƒ½</li>
<li>éªŒè¯è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºæ˜¯å¦å·²è¢«æ­£ç¡®å†™å…¥æ•°æ®</li>
<li>æ£€æŸ¥UVè¾“å…¥æ˜¯å¦æ­£ç¡®è¿æ¥ï¼Œç¡®ä¿é‡‡æ ·ä½ç½®æ­£ç¡®</li>
</ul>
<h3 data-id="heading-18">é¢œè‰²å€¼å¼‚å¸¸</h3>
<p>å¦‚æœé‡‡æ ·å¾—åˆ°çš„é¢œè‰²å€¼ä¸ç¬¦åˆé¢„æœŸï¼š</p>
<ul>
<li>ç¡®è®¤è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„æ•°æ®æ ¼å¼ä¸è¯»å–é¢„æœŸä¸€è‡´</li>
<li>æ£€æŸ¥å†™å…¥è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„ç€è‰²å™¨é€»è¾‘æ˜¯å¦æ­£ç¡®</li>
<li>éªŒè¯é¢œè‰²ç©ºé—´ï¼ˆGamma/Linearï¼‰è®¾ç½®æ˜¯å¦ä¸€è‡´</li>
<li>ä½¿ç”¨Frame Debuggeræ£€æŸ¥è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„å®é™…å†…å®¹</li>
</ul>
<h3 data-id="heading-19">æ€§èƒ½é—®é¢˜</h3>
<p>å¦‚æœä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼š</p>
<ul>
<li>æ£€æŸ¥è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„åˆ†è¾¨ç‡å’Œæ ¼å¼æ˜¯å¦å¿…è¦</li>
<li>åˆ†ææ¸²æŸ“ç®¡çº¿ï¼Œç¡®è®¤è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºæ˜¯å¦è¢«å¤šæ¬¡è¯»å†™</li>
<li>è€ƒè™‘åˆå¹¶æ¸²æŸ“é€šé“ï¼Œå‡å°‘æ¸²æŸ“ç›®æ ‡åˆ‡æ¢</li>
<li>ä½¿ç”¨RenderDocæˆ–ç±»ä¼¼å·¥å…·åˆ†æGPUæ€§èƒ½</li>
</ul>
<h2 data-id="heading-20">è¿›é˜¶æŠ€å·§</h2>
<p>æŒæ¡åŸºæœ¬ç”¨æ³•åï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹è¿›é˜¶æŠ€å·§æå‡æ¸²æŸ“æ•ˆæœå’Œæ€§èƒ½ã€‚</p>
<h3 data-id="heading-21">å¤šç¼“å†²åŒºååŒ</h3>
<p>ç»“åˆå¤šä¸ªè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå®ç°å¤æ‚æ•ˆæœï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸åŒçš„è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºå­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®</li>
<li>é€šè¿‡ç»„åˆå¤šä¸ªç¼“å†²åŒºçš„æ•°æ®åˆ›å»ºå¤æ‚çš„æè´¨å“åº”</li>
<li>å®ç°åŸºäºç‰©ç†çš„æ¸²æŸ“æ‰©å±•ï¼Œå­˜å‚¨é¢å¤–çš„å…‰ç…§ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-22">åŠ¨æ€åˆ†è¾¨ç‡</h3>
<p>æ ¹æ®æ€§èƒ½éœ€æ±‚åŠ¨æ€è°ƒæ•´è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„åˆ†è¾¨ç‡ï¼š</p>
<ul>
<li>åœ¨é«˜é€Ÿè¿åŠ¨æ—¶ä½¿ç”¨ä½åˆ†è¾¨ç‡ç¼“å†²åŒº</li>
<li>é™æ€åœºæ™¯æˆ–é‡è¦æ—¶åˆ»ä½¿ç”¨é«˜åˆ†è¾¨ç‡</li>
<li>å®ç°åŸºäºå†…å®¹çš„è‡ªé€‚åº”åˆ†è¾¨ç‡ç­–ç•¥</li>
</ul>
<h3 data-id="heading-23">è‡ªå®šä¹‰è§£ç </h3>
<p>å¯¹è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºä¸­çš„æ•°æ®è¿›è¡Œç‰¹æ®Šç¼–ç å’Œè§£ç ï¼š</p>
<ul>
<li>å°†å¤šä¸ªå‚æ•°æ‰“åŒ…åˆ°å•ä¸ªé¢œè‰²é€šé“ä¸­</li>
<li>ä½¿ç”¨ç‰¹æ®Šçš„æ•°æ®ç¼–ç æ–¹æ¡ˆæé«˜ç²¾åº¦æˆ–èŒƒå›´</li>
<li>å®ç°æ— æŸæˆ–æœ‰æŸçš„æ•°æ®å‹ç¼©ï¼Œå‡å°‘å¸¦å®½ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹æ˜¯HDRPä¸­ä¸€ä¸ªå¼ºå¤§è€Œçµæ´»çš„å·¥å…·ï¼Œä¸ºç€è‰²å™¨å¼€å‘è€…æä¾›äº†è®¿é—®è‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒºçš„èƒ½åŠ›ã€‚é€šè¿‡æ­£ç¡®ç†è§£å’Œä½¿ç”¨è¿™ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥å®ç°å„ç§é«˜çº§æ¸²æŸ“æ•ˆæœï¼Œæå‡é¡¹ç›®çš„è§†è§‰è´¨é‡ã€‚</p>
<p>å…³é”®è¦ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰é¢œè‰²èŠ‚ç‚¹ä»…åœ¨HDRPä¸­å¯ç”¨ï¼ŒURPä¸æ”¯æŒ</li>
<li>èŠ‚ç‚¹é€šè¿‡UVè¾“å…¥æŒ‡å®šé‡‡æ ·ä½ç½®ï¼Œè¾“å‡ºå¯¹åº”ä½ç½®çš„é¢œè‰²å€¼</li>
<li>ä½¿ç”¨å‰éœ€è¦æ­£ç¡®é…ç½®HDRPèµ„æºå’Œè‡ªå®šä¹‰é¢œè‰²ç¼“å†²åŒº</li>
<li>è€ƒè™‘æ€§èƒ½å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡å’Œä½ç«¯ç¡¬ä»¶ä¸Š</li>
<li>ç»“åˆè‡ªå®šä¹‰æ¸²æŸ“é€šé“å’ŒåæœŸå¤„ç†å¯ä»¥å®ç°å¤æ‚çš„æ•ˆæœ</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-AbortControllerï¼šä¼˜é›…ä¸­æ­¢è¯·æ±‚æ“ä½œ]]></title>    <link>https://juejin.cn/post/7603263490342158345</link>    <guid>https://juejin.cn/post/7603263490342158345</guid>    <pubDate>2026-02-06T03:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490342158345" data-draft-id="7603294029531250739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-AbortControllerï¼šä¼˜é›…ä¸­æ­¢è¯·æ±‚æ“ä½œ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-06T03:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-AbortControllerï¼šä¼˜é›…ä¸­æ­¢è¯·æ±‚æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:32:44.000Z" title="Fri Feb 06 2026 03:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦ä¸­é€”æ’¤å›è¯·æ±‚çš„æƒ…å†µï¼ˆä¾‹å¦‚ï¼šæœç´¢æ¡†å¿«é€Ÿè¾“å…¥ã€å¤§å‹æ–‡ä»¶ä¸Šä¼ å–æ¶ˆã€æˆ–æ˜¯ AI èŠå¤©æµçš„å³æ—¶ä¸­æ–­ï¼‰ã€‚ä¼ ç»Ÿçš„ Promise ä¸€æ—¦å¯åŠ¨å°±æ— æ³•åœ¨å¤–éƒ¨â€œå«åœâ€ï¼Œè€Œ <code>AbortController</code> çš„å‡ºç°ï¼Œå®Œç¾å¡«è¡¥äº†è¿™ä¸€ç©ºç™½ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µä¸åŸç†</h2>
<p><code>AbortController</code> æ˜¯ JavaScript å†…ç½®çš„ä¿¡å·æ§åˆ¶å¯¹è±¡ï¼Œå®ƒæ˜¯å®ç°å¼‚æ­¥æ“ä½œå¯æ§åˆ¶ã€å¯ä¸­æ­¢çš„æ ¸å¿ƒã€‚</p>
<h3 data-id="heading-2">1. å…³é”®ç»„æˆéƒ¨åˆ†</h3>
<ul>
<li>
<p><strong><code>controller.signal</code></strong>ï¼šä¸€ä¸ª <code>AbortSignal</code> å¯¹è±¡å®ä¾‹ã€‚å®ƒå……å½“â€œç›‘å¬å™¨â€ï¼Œå°†å…¶ä¼ é€’ç»™å¼‚æ­¥æ“ä½œåï¼Œè¯¥æ“ä½œä¼šæŒç»­è§‚å¯Ÿä¿¡å·çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong><code>controller.abort()</code></strong> ï¼šè§¦å‘ä¸­æ­¢çš„æ–¹æ³•ã€‚è°ƒç”¨åï¼Œ<code>signal</code> ä¸Šçš„ <code>abort</code> äº‹ä»¶ä¼šè¢«è§¦å‘ï¼ŒåŒæ—¶å°† <code>signal.aborted</code> è®¾ä¸º <code>true</code>ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ åŸºç¡€ä½¿ç”¨æ¨¡å¼</h2>
<h3 data-id="heading-4">1. å®ç°æ­¥éª¤</h3>
<ol>
<li>ä½¿ç”¨ <code>new AbortController()</code> ç”Ÿæˆå®ä¾‹ã€‚</li>
<li>å°†å®ä¾‹ä¸­çš„ <code>signal</code> å±æ€§ä¼ é€’ç»™éœ€è¦æ”¯æŒä¸­æ­¢çš„å¼‚æ­¥ APIï¼ˆå¦‚ <code>fetch</code>ï¼‰ã€‚</li>
<li>åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨ <code>controller.abort()</code> å³å¯ä¸»åŠ¨ç»ˆæ­¢ã€‚</li>
</ol>
<h3 data-id="heading-5">2. ä»£ç ç¤ºä¾‹</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// 1. åˆ›å»º AbortController å®ä¾‹</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> { signal } = controller;

<span class="hljs-comment">// 2. å‘èµ·è¯·æ±‚å¹¶ç»‘å®šä¿¡å·</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>, { signal })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·æ±‚æˆåŠŸ:"</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-comment">// 3. æ•è·ä¸­æ­¢é”™è¯¯</span>
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">name</span> === <span class="hljs-string">"AbortError"</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä¸»åŠ¨å–æ¶ˆï¼šè¯·æ±‚è¢«æˆåŠŸæˆªæ–­"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯·æ±‚å¤±è´¥:"</span>, err);
    }
  });

<span class="hljs-comment">// 2 ç§’åä¸»åŠ¨å–æ¶ˆè¯·æ±‚</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  controller.<span class="hljs-title function_">abort</span>(); 
}, <span class="hljs-number">2000</span>);
</code></pre>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ è¿›é˜¶æŠ€å·§ä¸åœºæ™¯</h2>
<h3 data-id="heading-7">1. æ‰¹é‡å–æ¶ˆè¯·æ±‚</h3>
<p>å¦‚æœæƒ³åŒæ—¶å–æ¶ˆå¤šä¸ªç›¸å…³çš„è¯·æ±‚ï¼Œå¯ä»¥ç»™è¿™äº›è¯·æ±‚<strong>å…±äº«åŒä¸€ä¸ª <code>signal</code></strong>ã€‚å½“è°ƒç”¨ <code>abort()</code> æ—¶ï¼Œæ‰€æœ‰å…³è”çš„ä»»åŠ¡éƒ½ä¼šæ”¶åˆ°ä¸­æ­¢ä¿¡å·ã€‚</p>
<h3 data-id="heading-8">2. ç¤ºä¾‹</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä½¿ç”¨åŒä¸€ä¸ª AbortController å–æ¶ˆå¤šä¸ªè¯·æ±‚</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

<span class="hljs-comment">// è¯·æ±‚1</span>
<span class="hljs-keyword">const</span> request1 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'url1'</span>, {
  <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>
});

<span class="hljs-comment">// è¯·æ±‚2</span>
<span class="hljs-keyword">const</span> request2 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'url2'</span>, {
  <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>
});

<span class="hljs-comment">// è¯·æ±‚3</span>
<span class="hljs-keyword">const</span> request3 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'url3'</span>, {
  <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>
});

<span class="hljs-comment">// åŒæ—¶å–æ¶ˆæ‰€æœ‰è¯·æ±‚</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'cancelBtn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  controller.<span class="hljs-title function_">abort</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰è¯·æ±‚å·²å–æ¶ˆ'</span>);
});

<span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰è¯·æ±‚</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([request1, request2, request3])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">responses</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(responses.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>())))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰æ•°æ®:'</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ'</span>);
    }
  });
</code></pre>
<h3 data-id="heading-9">3. æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>å…¼å®¹æ€§</strong>ï¼šå¹¶éæ‰€æœ‰ API éƒ½åŸç”Ÿæ”¯æŒã€‚ç›®å‰ <code>fetch</code>ã€<code>Axios (v0.22+)</code> æ¨¡å—å·²æä¾›æ”¯æŒã€‚</li>
<li><strong>å¹‚ç­‰æ€§</strong>ï¼š<code>abort()</code> æ–¹æ³•<strong>åªèƒ½ç”Ÿæ•ˆä¸€æ¬¡</strong>ã€‚å¤šæ¬¡è°ƒç”¨è™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè§¦å‘ä¸­æ­¢é€»è¾‘ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">å››ã€ æ€»ç»“å¯¹æ¯”</h2>

























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>ä¼ ç»Ÿ Promise</strong></th><th><strong>å¸¦æœ‰ AbortController çš„ Promise</strong></th></tr></thead><tbody><tr><td><strong>å¯æ§æ€§</strong></td><td>å¼€å¯åæ— æ³•å¹²é¢„</td><td>å¯éšæ—¶é€šè¿‡ <code>abort()</code> ä¸­æ­¢</td></tr><tr><td><strong>å¼‚å¸¸å¤„ç†</strong></td><td>åªæœ‰æˆåŠŸ/å¤±è´¥</td><td>å¢åŠ  <code>AbortError</code> ç±»å‹ï¼Œæ–¹ä¾¿åŒºåˆ†ä¸»åŠ¨å–æ¶ˆä¸ç½‘ç»œå¼‚å¸¸</td></tr><tr><td><strong>åº”ç”¨åœºæ™¯</strong></td><td>ç®€å•çš„æ•°æ®è·å–</td><td>å¤æ‚äº¤äº’ã€æµå¼è¾“å‡ºã€æ€§èƒ½è°ƒä¼˜</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot é¢è¯•é—®é¢˜]]></title>    <link>https://juejin.cn/post/7603294029531349043</link>    <guid>https://juejin.cn/post/7603294029531349043</guid>    <pubDate>2026-02-06T03:39:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603294029531349043" data-draft-id="7603216479837061171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot é¢è¯•é—®é¢˜"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2026-02-06T03:39:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿¡ç ç”±ç¼°"/> <meta itemprop="url" content="https://juejin.cn/user/2110664941509214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot é¢è¯•é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2110664941509214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿¡ç ç”±ç¼°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:39:36.000Z" title="Fri Feb 06 2026 03:39:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸ºåˆå­¦è€…å’Œåˆçº§å¼€å‘è€…ï¼ˆ0-3å¹´ç»éªŒï¼‰å‡†å¤‡çš„<strong>2024-2025ç‰ˆç»ˆææ±‡æ€»æ¸…å•â€”â€”88ä¸ªSpring Booté¢è¯•é—®é¢˜å…¨é›†</strong>ã€‚</p>
<p><img src="https://cf-blog.icodebuddy.com/image/108/108-0.jpg" alt="" loading="lazy"/></p>
<p>æ¶µç›–äº†TCSã€Infosysã€Cognizantã€Accentureã€Capgeminiã€Wiproã€Deloitteã€IBMã€Mindtreeã€LTIMindtreeã€Tech Mahindraã€HCLç­‰å…¬å¸æå‡ºçš„æ‰€æœ‰é—®é¢˜ã€‚</p>
<p>| åºå· | é—®é¢˜ |</p>
<p>| :--- | :--- |</p>
<p>| 1 | ä»€ä¹ˆæ˜¯ Spring Bootï¼Ÿ |</p>
<p>| 2 | Spring Boot ç›¸è¾ƒäº Spring Framework æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ |</p>
<p>| 3 | Spring Boot ä¸­çš„è‡ªåŠ¨é…ç½®æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 4 | ä»€ä¹ˆæ˜¯ Spring Boot Startersï¼Ÿåˆ—ä¸¾ä¸€äº›é‡è¦çš„ starterã€‚ |</p>
<p>| 5 | <code>@SpringBootApplication</code> æ³¨è§£çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 6 | <code>@SpringBootApplication</code> å†…éƒ¨åŒ…å«å“ªä¸‰ä¸ªä¸»è¦æ³¨è§£ï¼Ÿ |</p>
<p>| 7 | è§£é‡Š SpringBootApplication çš„ <code>main()</code> æ–¹æ³•çš„ä½œç”¨ã€‚ |</p>
<p>| 8 | ä»€ä¹ˆæ˜¯ <code>application.properties</code> å’Œ <code>application.yml</code>ï¼Ÿ |</p>
<p>| 9 | å¦‚ä½•åœ¨ Spring Boot ä¸­æ›´æ”¹é»˜è®¤ç«¯å£ï¼Ÿ |</p>
<p>| 10 | <code>application.properties</code> å’Œ <code>application.yml</code> ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 11 | <code>@RestController</code> æ³¨è§£æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 12 | <code>@Controller</code> å’Œ <code>@RestController</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 13 | ä»€ä¹ˆæ˜¯ <code>@RequestMapping</code>ï¼Ÿ |</p>
<p>| 14 | <code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PutMapping</code>ã€<code>@DeleteMapping</code> æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 15 | <code>@PathVariable</code> å’Œ <code>@RequestParam</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 16 | å¦‚ä½•åœ¨ Spring Boot ä¸­è¿”å› JSON å“åº”ï¼Ÿ |</p>
<p>| 17 | ä»€ä¹ˆæ˜¯ Spring Boot Actuatorï¼Ÿå¦‚ä½•å¯ç”¨å®ƒï¼Ÿ |</p>
<p>| 18 | åˆ—ä¸¾ä¸€äº›é‡è¦çš„ Actuator ç«¯ç‚¹ã€‚ |</p>
<p>| 19 | å¦‚ä½•å¯ç”¨æ‰€æœ‰çš„ Actuator ç«¯ç‚¹ï¼Ÿ |</p>
<p>| 20 | <code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code> æ³¨è§£çš„ç”¨é€”ï¼Ÿ |</p>
<p>| 21 | ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼ŸSpring Boot æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ |</p>
<p>| 22 | <code>@Autowired</code> æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨å“ªé‡Œä½¿ç”¨å®ƒï¼Ÿ |</p>
<p>| 23 | <code>@Component</code> å’Œ <code>@Bean</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 24 | <code>@Configuration</code> æ³¨è§£æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 25 | Spring Boot ä¸­çš„ <code>@Profile</code> æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ |</p>
<p>| 26 | å¦‚ä½•åˆ›å»ºå¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆdevã€prodã€testï¼‰ï¼Ÿ |</p>
<p>| 27 | ä»€ä¹ˆæ˜¯ Spring Boot DevToolsï¼Ÿå®ƒä¸ºä»€ä¹ˆæœ‰ç”¨ï¼Ÿ |</p>
<p>| 28 | <code>@Entity</code> æ³¨è§£çš„ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 29 | ä»€ä¹ˆæ˜¯ JPA å’Œ Hibernateï¼Ÿ |</p>
<p>| 30 | ä»€ä¹ˆæ˜¯ Spring Data JPAï¼Ÿ |</p>
<p>| 31 | <code>spring-boot-starter-data-jpa</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 32 | å¦‚ä½•ä½¿ç”¨ <code>application.properties</code> è¿æ¥æ•°æ®åº“ï¼Ÿ |</p>
<p>| 33 | Spring Boot ä¸­é»˜è®¤çš„åµŒå…¥å¼æ•°æ®åº“æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 34 | åˆ—ä¸¾ä½ ä½¿ç”¨è¿‡çš„ä¸åŒ Spring Boot Startersã€‚ |</p>
<p>| 35 | ä»€ä¹ˆæ˜¯ <code>spring-boot-starter-web</code>ï¼Ÿ |</p>
<p>| 36 | ä»€ä¹ˆæ˜¯ <code>spring-boot-starter-test</code>ï¼Ÿå®ƒåŒ…å«å“ªäº›åº“ï¼Ÿ |</p>
<p>| 37 | <code>@SpringBootTest</code> æ³¨è§£æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 38 | <code>@MockBean</code> çš„ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 39 | å¦‚ä½•åœ¨ Spring Boot ä¸­å…¨å±€å¤„ç†å¼‚å¸¸ï¼Ÿ |</p>
<p>| 40 | ä»€ä¹ˆæ˜¯ <code>@ControllerAdvice</code> å’Œ <code>@ExceptionHandler</code>ï¼Ÿ |</p>
<p>| 41 | å¦‚ä½•åœ¨ Spring Boot ä¸­åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ï¼Ÿ |</p>
<p>| 42 | <code>@ResponseStatus</code> å’Œ <code>@ExceptionHandler</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 43 | Spring Boot ä¸­çš„æ—¥å¿—è®°å½•æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•æ›´æ”¹æ—¥å¿—çº§åˆ«ï¼Ÿ |</p>
<p>| 44 | Spring Boot ä¸­é»˜è®¤çš„æ—¥å¿—æ¡†æ¶æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 45 | å¦‚ä½•åœ¨ Spring Boot ä¸­å¤–éƒ¨åŒ–é…ç½®ï¼Ÿ |</p>
<p>| 46 | ä»€ä¹ˆæ˜¯ Spring Boot CLIï¼Ÿ |</p>
<p>| 47 | å¦‚ä½•åˆ›å»ºå¯æ‰§è¡Œ JARï¼Ÿ |</p>
<p>| 48 | Spring MVC å’Œ Spring Boot çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 49 | <code>pom.xml</code> å’Œ <code>spring-boot-starter-parent</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 50 | <code>spring-boot-starter-parent</code> å’Œå¯¼å…¥ BOM çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 51 | å¦‚ä½•è¦†ç›– <code>spring-boot-starter-parent</code> çš„å±æ€§ï¼Ÿ |</p>
<p>| 52 | <code>@Bean</code> ä¸ <code>@Component</code>ï¼Ÿä½•æ—¶ä½¿ç”¨å“ªä¸ªï¼Ÿ |</p>
<p>| 53 | ä»€ä¹ˆæ˜¯ <code>@Qualifier</code>ï¼Ÿä¸¾ä¾‹è¯´æ˜ã€‚ |</p>
<p>| 54 | <code>@Primary</code> å’Œ <code>@Qualifier</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 55 | åˆ†æ­¥è§£é‡Š Spring Boot çš„å¯åŠ¨è¿‡ç¨‹ã€‚ |</p>
<p>| 56 | ä»€ä¹ˆæ˜¯åµŒå…¥å¼ Tomcatï¼Ÿä¸ºä»€ä¹ˆå®ƒæ˜¯ Spring Boot çš„é»˜è®¤é€‰é¡¹ï¼Ÿ |</p>
<p>| 57 | å¦‚ä½•å°†åµŒå…¥å¼æœåŠ¡å™¨æ›´æ”¹ä¸º Jetty æˆ– Undertowï¼Ÿ |</p>
<p>| 58 | REST ä¸­å—æ£€æŸ¥å¼‚å¸¸å’Œéå—æ£€æŸ¥å¼‚å¸¸çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 59 | ä»€ä¹ˆæ˜¯ <code>@ResponseEntity</code>ï¼Ÿä¸ºä»€ä¹ˆä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒï¼Ÿ |</p>
<p>| 60 | å¦‚ä½•åœ¨ Spring Boot ä¸­è¿›è¡ŒéªŒè¯ï¼Ÿï¼ˆ<code>@Valid</code> ä¸ <code>@Validated</code>ï¼‰ |</p>
<p>| 61 | <code>application-dev.yml</code>ã€<code>application-prod.yml</code> æ˜¯ä»€ä¹ˆï¼ŸSpring å¦‚ä½•é€‰å–å®ƒä»¬ï¼Ÿ |</p>
<p>| 62 | ä»€ä¹ˆæ˜¯ Spring Boot ä¼˜é›…å…³æœºï¼Ÿå¦‚ä½•å¯ç”¨ï¼Ÿ |</p>
<p>| 63 | <code>@ConfigurationProperties</code> å’Œ <code>@Value</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 64 | Spring Boot 3 çš„ä¸»è¦å˜åŒ–æœ‰å“ªäº›ï¼Ÿï¼ˆJava 17, Jakarta EE ç­‰ï¼‰ |</p>
<p>| 65 | <code>javax.*</code> å’Œ <code>jakarta.*</code> åŒ…çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 66 | <code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code> ä¹‹é—´çš„ç¡®åˆ‡åŒºåˆ«ï¼Ÿ |</p>
<p>| 67 | ä¸ºä»€ä¹ˆ <code>@Repository</code> å°†å—æ£€æŸ¥å¼‚å¸¸è½¬æ¢ä¸ºéå—æ£€æŸ¥å¼‚å¸¸ï¼Ÿ |</p>
<p>| 68 | ä»€ä¹ˆæ˜¯ <code>@Lazy</code> æ³¨è§£ï¼Ÿ |</p>
<p>| 69 | æ„é€ å™¨æ³¨å…¥ vs å­—æ®µæ³¨å…¥ vs Setteræ³¨å…¥ â€”â€” Spring Boot 3 ä¸­æ¨èå“ªç§ï¼Ÿ |</p>
<p>| 70 | <code>application.yml</code> å’Œ <code>bootstrap.yml</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 71 | å¦‚ä½•ä¿æŠ¤ Spring Boot åº”ç”¨ç¨‹åºï¼Ÿï¼ˆè‡³å°‘ 3 ç§æ–¹å¼ï¼‰ |</p>
<p>| 72 | ä»€ä¹ˆæ˜¯ <code>spring-boot-starter-security</code>ï¼Ÿ |</p>
<p>| 73 | Spring Boot 3 ä¸­çš„ <code>@EnableMethodSecurity</code> æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 74 | å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰è‡ªåŠ¨é…ç½®ï¼Ÿ |</p>
<p>| 75 | <code>spring.factories</code> / <code>spring-boot-autoconfigure-META-INF</code> çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 76 | Actuator + Micrometer + Prometheus + Grafana æ˜¯ä»€ä¹ˆï¼Ÿ |</p>
<p>| 77 | å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨ï¼Ÿ |</p>
<p>| 78 | <code>/actuator/health</code> å’Œ <code>/actuator/info</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 79 | å¦‚ä½•ä»å‘½ä»¤è¡Œè¿è¡Œç‰¹å®š profileï¼Ÿ |</p>
<p>| 80 | ä»€ä¹ˆæ˜¯ <code>@ConditionalOnMissingBean</code>ï¼Ÿä¸¾ä¾‹è¯´æ˜ï¼Ÿ |</p>
<p>| 81 | ä½ èƒ½åœ¨ä¸ä½¿ç”¨ä»»ä½• starter çš„æƒ…å†µä¸‹è¿è¡Œ Spring Boot å—ï¼Ÿ |</p>
<p>| 82 | <code>SpringApplication.run()</code> å’Œ <code>new SpringApplication().run()</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 83 | å¦‚ä½•ç¦ç”¨ Spring Boot æ¨ªå¹…ï¼Ÿï¼ˆ3 ç§æ–¹å¼ï¼‰ |</p>
<p>| 84 | <code>@EntityScan</code> å’Œ <code>@ComponentScan</code> çš„åŒºåˆ«ï¼Ÿ |</p>
<p>| 85 | Spring Boot å¦‚ä½•æ”¯æŒå“åº”å¼ç¼–ç¨‹ï¼Ÿï¼ˆWebFlux ä¸ MVCï¼‰ |</p>
<p>| 86 | ä»€ä¹ˆæ˜¯ <code>@EnableAutoConfiguration</code>ï¼Ÿ |</p>
<p>| 87 | å¦‚ä½•ç¦ç”¨ç‰¹å®šçš„è‡ªåŠ¨é…ç½®ï¼Ÿ |</p>
<p>| 88 | ä»€ä¹ˆæ˜¯ Spring Initializrï¼Ÿï¼ˆstart.spring.ioï¼‰ |</p>
<hr/>
<p>ã€æ³¨ã€‘æœ¬æ–‡è¯‘è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fbhu_kalki%2Fspring-boot-interview-question-1chb" target="_blank" title="https://dev.to/bhu_kalki/spring-boot-interview-question-1chb" ref="nofollow noopener noreferrer">Spring Boot Interview Question - DEV Community</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«äº‘ç›˜é™åˆ¶ï¼NanoPi R4S+iStoreOS æ‰“é€ ä¸“å±ç§æœ‰äº‘ï¼Œç”¨äº†cpolarå¤–ç½‘è®¿é—®ä¹Ÿèƒ½è¶…ä¸æ»‘]]></title>    <link>https://juejin.cn/post/7603261102795063322</link>    <guid>https://juejin.cn/post/7603261102795063322</guid>    <pubDate>2026-02-06T03:52:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603261102795063322" data-draft-id="7603216479837159475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«äº‘ç›˜é™åˆ¶ï¼NanoPi R4S+iStoreOS æ‰“é€ ä¸“å±ç§æœ‰äº‘ï¼Œç”¨äº†cpolarå¤–ç½‘è®¿é—®ä¹Ÿèƒ½è¶…ä¸æ»‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-06T03:52:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«äº‘ç›˜é™åˆ¶ï¼NanoPi R4S+iStoreOS æ‰“é€ ä¸“å±ç§æœ‰äº‘ï¼Œç”¨äº†cpolarå¤–ç½‘è®¿é—®ä¹Ÿèƒ½è¶…ä¸æ»‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T03:52:48.000Z" title="Fri Feb 06 2026 03:52:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bcecdacfee546b18a5905d0cebcfb09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=RtU99xIAS1m0gWCJJC0EmTJEw1s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>NanoPi R4S æ­é… iStoreOS ç³»ç»Ÿï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯ä¾æ‰˜ WebDAV åè®®å®ç°è·¨è®¾å¤‡æ–‡ä»¶å…±äº«ä¸ç®¡ç†ï¼Œè¿˜èƒ½å…¼é¡¾è½¯è·¯ç”±ã€æ™ºèƒ½å®¶å±…æ§åˆ¶ç­‰å®ç”¨åŠŸèƒ½ï¼Œé€‚é…æœ‰ç§äººæ•°æ®å­˜å‚¨éœ€æ±‚çš„å®¶åº­ç”¨æˆ·ã€è¿œç¨‹åŠå…¬äººç¾¤ï¼Œä»¥åŠè¿½æ±‚æ•°æ®è‡ªä¸»å¯æ§çš„æ™®é€šä½¿ç”¨è€…ã€‚å®ƒçš„ä¼˜åŠ¿å¾ˆè´´åˆæ—¥å¸¸ä½¿ç”¨åœºæ™¯ï¼šç¡¬ä»¶ä½“ç§¯å°å·§ä¸å ç©ºé—´ï¼Œä½åŠŸè€—è®¾è®¡é•¿æœŸè¿è¡Œä¹Ÿä¸è´¹ç”µï¼ŒUSB3.0 æ¥å£ä¼ è¾“æ–‡ä»¶é€Ÿåº¦ç¨³å®šï¼Œè¿˜èƒ½è‡ªä¸»è®¾ç½®å­˜å‚¨æƒé™ï¼Œæ¯”å…¬å…±äº‘ç›˜æ›´èƒ½ä¿éšœæ•°æ®éšç§ã€‚</p>
<p>ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›å®é™…çš„å°ä½“ä¼šï¼šé¦–æ¬¡é…ç½®æ—¶å»ºè®®å…ˆç¡®è®¤ç¡¬ç›˜æ ¼å¼ä¸º EXT4ï¼Œé¿å…è¯†åˆ«å¼‚å¸¸ï¼›æ—¥å¸¸ä½¿ç”¨ä¸­å¦‚æœåŒæ—¶å¼€å¯è·¯ç”±å’Œ NAS åŠŸèƒ½ï¼Œè¦æ³¨æ„ç½‘çº¿è¿æ¥æ–¹å¼ï¼ŒåŒç½‘å£æ¨¡å¼ä¸‹ç®¡ç† IP æ›´å›ºå®šï¼Œæ–°æ‰‹ä¸Šæ‰‹æ›´çœå¿ƒï¼›å¦å¤–ç§»åŠ¨ç¡¬ç›˜å°½é‡é€‰æ‹©ç¨³å®šçš„å“ç‰Œï¼Œé¿å…ä¾›ç”µä¸è¶³å¯¼è‡´æ–‡ä»¶ä¼ è¾“ä¸­æ–­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c8640713924dd7bd3288236895babb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=6oKMlzlYJBGPzKr3QzGMzgwXoCE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸è¿‡ä»…é å±€åŸŸç½‘ä½¿ç”¨çš„è¯ï¼Œå®é™…ä½“éªŒä¼šæ‰“ä¸å°‘æŠ˜æ‰£ã€‚æ¯”å¦‚å‡ºå·®åœ¨å¤–æƒ³è°ƒå–å®¶é‡Œå­˜å‚¨çš„å·¥ä½œåˆåŒã€è®¾è®¡ç´ æï¼Œæˆ–è€…å›è€å®¶æƒ³æŸ¥çœ‹è‡ªå·±å­˜åœ¨è®¾å¤‡é‡Œçš„å®¶åº­ç…§ç‰‡å’Œè§†é¢‘ï¼Œéƒ½å› ä¸ºä¸åœ¨åŒä¸€ç½‘ç»œè€Œæ— æ³•è®¿é—®ï¼›ç”šè‡³å®¶äººåœ¨ä¸åŒæˆ¿é—´ç”¨ä¸åŒè®¾å¤‡ï¼Œæƒ³å…±äº«åˆšä¸‹è½½çš„çºªå½•ç‰‡ï¼Œä¹Ÿå¾—è¿åŒä¸€å±€åŸŸç½‘æ‰è¡Œï¼Œæ—¥å¸¸ä½¿ç”¨çš„çµæ´»æ€§å¤§å¤§é™ä½ã€‚</p>
<p>è€Œå°†è¿™å¥—ç³»ç»Ÿä¸ cpolar ç»“åˆåï¼Œå°±èƒ½å½»åº•æ‰“ç ´ç½‘ç»œè¾¹ç•Œï¼šæ— éœ€ç”³è¯·å…¬ç½‘ IPï¼Œä¹Ÿä¸ç”¨å¤æ‚çš„ç½‘ç»œé…ç½®ï¼Œå°±èƒ½è®©ç§æœ‰äº‘æœåŠ¡å®ç°å¤–ç½‘è®¿é—®ã€‚æ¯”å¦‚åœ¨å…¬å¸ç”¨ç”µè„‘ã€åœ¨å’–å•¡å…ç”¨å¹³æ¿ï¼Œéƒ½èƒ½éšæ—¶è®¿é—®å®¶é‡Œçš„å­˜å‚¨æ–‡ä»¶ï¼Œå¼‚åœ°å¤‡ä»½é‡è¦æ•°æ®ä¹Ÿå˜å¾—ç®€å•ï¼Œå“ªæ€•æ˜¯å’Œå¼‚åœ°çš„å®¶äººå…±äº«å®¶åº­å½±éŸ³èµ„æ–™ï¼Œä¹Ÿèƒ½ç›´æ¥é€šè¿‡ä¸“å±åœ°å€è®¿é—®ï¼Œå®ç”¨æ€§ç›´æ¥æ‹‰æ»¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81e06532760f4eb5a83953067a0323ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=OffF6iiqrzi0y%2Bz%2FwE7kQPNqgvg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å®Œæ•´çš„ä¿å§†çº§æ•™ç¨‹ã€‚å°±åœ¨ä¸‹é¢å‘¦ï¼</p>
<h2 data-id="heading-0">1 NanoPi R4Sæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/621dcee17911448992842ba1db2d9d08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=3iKIKtMmaOxQmNyxl%2FDO3UsemWw%3D" alt="image-20250917134030895" loading="lazy"/></p>
<p><strong>NanoPi R4S</strong> æ˜¯ç”±å‹å–„ç”µå­ï¼ˆFriendlyELECï¼‰æ¨å‡ºçš„ä¸€æ¬¾é«˜æ€§èƒ½ã€ä½åŠŸè€—çš„è¿·ä½ å¼€å‘æ¿ï¼Œä¸“ä¸ºè½¯è·¯ç”±ã€ç‰©è”ç½‘ç½‘å…³ã€NASï¼ˆç½‘ç»œé™„åŠ å­˜å‚¨ï¼‰å’Œæ™ºèƒ½å®¶å±…ç­‰åº”ç”¨åœºæ™¯è®¾è®¡ã€‚</p>
<h3 data-id="heading-1">ğŸ”§ æ ¸å¿ƒç¡¬ä»¶è§„æ ¼</h3>
<ul>
<li><strong>å¤„ç†å™¨</strong>ï¼šRockchip RK3399ï¼Œ6æ ¸æ¶æ„ï¼ˆ2Ã—Cortex-A72 + 4Ã—Cortex-A53ï¼‰ï¼Œä¸»é¢‘æœ€é«˜å¯è¾¾ 2.0GHzã€‚</li>
<li><strong>å†…å­˜</strong>ï¼š1GB DDR3 æˆ– 4GB LPDDR4ï¼ˆå–å†³äºç‰ˆæœ¬ï¼‰ã€‚</li>
<li><strong>å­˜å‚¨</strong>ï¼šæ”¯æŒ microSD å¡å¯åŠ¨ï¼Œä¸æ”¯æŒ eMMCã€‚</li>
<li><strong>ç½‘ç»œæ¥å£</strong>ï¼š2 ä¸ªåƒå…†ä»¥å¤ªç½‘å£ï¼ˆæ”¯æŒåŒåƒå…†å…¨é€Ÿè½¬å‘ï¼‰ã€‚</li>
<li><strong>USB æ¥å£</strong>ï¼š2 ä¸ª USB 3.0 æ¥å£ã€‚</li>
<li><strong>ç”µæºæ¥å£</strong>ï¼šUSB Type-C 5V ç”µæºè¾“å…¥ã€‚</li>
<li><strong>å°ºå¯¸</strong>ï¼šçº¦ 66mm Ã— 66mmï¼Œé€‚åˆåµŒå…¥å¼æˆ–å¢™é¢å®‰è£…ã€‚</li>
</ul>
<h3 data-id="heading-2">ğŸ’¡ åº”ç”¨åœºæ™¯</h3>
<p>NanoPi R4S é€‚ç”¨äºå¤šç§åœºæ™¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è½¯è·¯ç”±</strong>ï¼šä½œä¸ºé«˜æ€§èƒ½çš„è·¯ç”±å™¨ï¼Œæ”¯æŒ OpenWrt ç­‰ç³»ç»Ÿï¼Œå…·å¤‡å¼ºå¤§çš„ç½‘ç»œå¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>ç‰©è”ç½‘ç½‘å…³</strong>ï¼šä½œä¸ºç‰©è”ç½‘è®¾å¤‡çš„ä¸­æ¢ï¼Œè¿æ¥å’Œç®¡ç†å¤šä¸ªè®¾å¤‡ã€‚</li>
<li><strong>NASï¼ˆç½‘ç»œé™„åŠ å­˜å‚¨ï¼‰</strong>ï¼šé€šè¿‡ USB æ¥å£è¿æ¥ç¡¬ç›˜ï¼Œæä¾›ç½‘ç»œå­˜å‚¨æœåŠ¡ã€‚</li>
<li><strong>æ™ºèƒ½å®¶å±…ä¸­å¿ƒ</strong>ï¼šä½œä¸ºæ™ºèƒ½å®¶å±…è®¾å¤‡çš„æ§åˆ¶ä¸­å¿ƒï¼Œç®¡ç†å’Œè°ƒåº¦å„ç±»è®¾å¤‡ã€‚</li>
</ul>
<h2 data-id="heading-3">2 å‡†å¤‡é˜¶æ®µ</h2>
<p>æœ¬æ•™ç¨‹éœ€è¦ç”¨åˆ°å¦‚ä¸‹ææ–™ï¼š</p>
<ol>
<li><strong>NanoPi R4Sè®¾å¤‡</strong> *1ï¼ˆæœ¬æ•™ç¨‹æ¼”ç¤ºçš„ä¸º4Gç‰ˆæœ¬ï¼‰</li>
<li><strong>ç”µæº</strong> *1ï¼ˆ5V3Aç”µæºï¼Œr4sçš„ç”µæºæ˜¯cå£çš„ï¼Œéœ€è¦Type-Cçš„æ•°æ®çº¿ï¼‰</li>
<li><strong>USBè¯»å¡å™¨</strong> *1ï¼ˆæ’å…¥SDå¡ç”¨ï¼‰</li>
<li><strong>TFå¡/SDå¡</strong> *1</li>
<li><strong>ç½‘çº¿</strong> *2ï¼ˆå»ºè®®2æ ¹ï¼Œ1æ ¹çš„è¯å°±éœ€è½¬å•ç½‘å£æ¨¡å¼ï¼‰</li>
<li><strong>ç§»åŠ¨ç¡¬ç›˜</strong> *1ï¼ˆå›ºæ€ç¡¬ç›˜/æœºæ¢°ç¡¬ç›˜éƒ½å¯ä»¥  <strong>å®¹é‡&gt;=20Gï¼Œæ ¼å¼ä¸ºï¼šEXT4</strong>ï¼‰</li>
<li><strong>æœ¬æ•™ç¨‹å¯èƒ½éœ€è¦ç”¨åˆ°çš„èµ„æºæ–‡ä»¶</strong>ï¼ˆiStoreOSç³»ç»Ÿå›ºä»¶ï¼ŒbalenaEtcherçƒ§å½•å·¥å…·ï¼Œå±€åŸŸç½‘IPæ‰«æå·¥å…·ï¼ŒRaiDrive.MountæŒ‚è½½è½¯ä»¶ï¼‰</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65ad3f8a0c0c4a50ae107fc35cafd8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=%2BxvYzrTMYTnlzyEPJQs0eL8B59I%3D" alt="image-20250917181053867" loading="lazy"/></p>
<p><strong>123äº‘ç›˜æ°¸ä¹…é“¾æ¥ï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æå–ç 1314</span>
https://www.123865.com/s/3jOKVv-apNzH?pwd=1314#
</code></pre>
<h2 data-id="heading-4">3 çƒ§å½•iStoreOSé•œåƒè‡³SDå¡</h2>
<p>åœ¨ç”µè„‘ä¸Šå®‰è£…é“¾æ¥ä¸­çš„<code>balenaEtcher-Setup-1.18.11.exe</code>åº”ç”¨ç¨‹åºï¼Œæ‰“å¼€åç›´æ¥å°†<code>istoreos-24.10.2-2025090517-r4s-squashfs.img.gz</code>é•œåƒæ‹–å…¥åˆ°<code>balenaEtcher</code>çš„ä»æ–‡ä»¶çƒ§å½•ä½ç½®ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77d8601f082246989efee4cbba8b8b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=IZQ51cJkkijOSeq%2BT%2FNDDq2HllY%3D" alt="image-20250917143751594" loading="lazy"/></p>
<p>ç„¶åå°†<code>USBè¯»å¡å™¨ï¼ˆè¯»å¡å™¨æ’å…¥SDå¡ï¼‰</code>æ’å…¥åˆ°ç”µè„‘çš„<code>USBå£</code>ï¼Œæ¥ç€<code>ç›®æ ‡ç£ç›˜</code>é€‰æ‹©SDå¡è®¾å¤‡ï¼ˆä¸è¦é€‰é”™äº†ï¼Œåˆ«æŠŠç”µè„‘ä¸Šçš„ç£ç›˜ç»™é€‰ä¸Šäº†ï¼‰ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0dd32202e2b404185b2c618e3ee23cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=twgY1e9AUUG0QgNBVjD8qtNhH1Y%3D" alt="image-20250917143942841" loading="lazy"/></p>
<p>é€‰å®šåï¼Œç‚¹å‡»<code>ç°åœ¨çƒ§å½•</code>ï¼ŒæœŸé—´å¼¹å‡ºçš„ä¸€äº›é”™è¯¯æç¤ºä¸ç”¨ç†ä¼šï¼Œå±äºæ­£å¸¸ç°è±¡ï¼Œå¦‚ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70d2693b35914c62aad9d36c163d97ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=o0W4fvUkPRdC6w%2FwvFcqL08aYM8%3D" alt="image-20250917144150188" loading="lazy"/></p>
<p>ç­‰å¾…çƒ§å½•å’ŒéªŒè¯ï¼Œæç¤ºçƒ§å½•æˆåŠŸå³å¯æ‹”å‡ºUç›˜ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6554952409c845bb947efcf83a23d951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=zA5RbbcdCpuKs7rUq3zH%2Bn9POps%3D" alt="image-20250917144116621" loading="lazy"/></p>
<h2 data-id="heading-5">4 å¯åŠ¨iStoreOSç³»ç»Ÿ</h2>
<p>ç”±äº<code>R4S</code>æœ‰åŒç½‘å£ï¼Œä¸€ä¸ª<code>WANå£</code>å’Œä¸€ä¸ª<code>LANå£</code>ï¼Œæ ¹æ®ä¸åŒçš„è¿æ¥æ–¹å¼ä¼šäº§ç”Ÿä¸åŒçš„IPåœ°å€æƒ…å†µã€‚å¦‚æœé‡‡ç”¨<strong>åŒç½‘å£æ¨¡å¼</strong>ï¼ˆWANå£æ¥å…¥ä¸Šæ¸¸è·¯ç”±å™¨/å…‰çŒ«ï¼ŒLANå£è¿æ¥ä¸‹æ¸¸è®¾å¤‡ï¼‰ï¼ŒR4Sä¼šä½œä¸ºè·¯ç”±å™¨å·¥ä½œå¹¶æ‰§è¡ŒNATè½¬æ¢ï¼Œåˆ›å»ºæ–°çš„ç½‘æ®µï¼ˆé»˜è®¤ä¸º192.168.100.xï¼‰ï¼Œæ­¤æ—¶R4Sçš„ç®¡ç†IPä¸º<strong>192.168.100.1</strong>ï¼›å¦‚æœé‡‡ç”¨<strong>å•ç½‘å£æ¨¡å¼</strong>ï¼ˆä»…LANå£è¿æ¥åˆ°ä¸Šæ¸¸è·¯ç”±å™¨çš„LANå£ï¼‰ï¼ŒR4Sä¸ä¸Šæ¸¸è·¯ç”±å™¨å¤„äºåŒä¸€å±€åŸŸç½‘å†…ï¼Œå…±äº«ç›¸åŒç½‘æ®µï¼ˆå¦‚192.168.50.xï¼‰ï¼Œæ— NATè½¬æ¢ï¼Œéœ€è¦é€šè¿‡è·¯ç”±å™¨ç®¡ç†é¡µé¢æˆ–IPæ‰«æå·¥å…·æ¥ç¡®å®šR4Sçš„å…·ä½“IPåœ°å€ã€‚å»ºè®®åˆæ¬¡é…ç½®æ—¶ä½¿ç”¨åŒç½‘å£æ¨¡å¼ï¼Œä¾¿äºç›´æ¥é€šè¿‡192.168.100.1è®¿é—®ç®¡ç†ç•Œé¢ã€‚</p>
<p>æœ¬éƒ¨åˆ†å°†ä»¥<code>åŒç½‘å£æ¨¡å¼</code>è¿›è¡Œæ¼”ç¤ºï¼Œ<code>å•ç½‘å£æ¨¡å¼</code>è¯·å°†ç½‘çº¿æ’å…¥<code>R4S</code>çš„<code>LANå£</code>ï¼Œå¦ä¸€å¤´æ’å…¥è·¯ç”±å™¨çš„<code>LANå£</code>ï¼Œå½¢æˆåŒä¸€å±€åŸŸç½‘ï¼Œç„¶åä½¿ç”¨<code>èµ„æºåˆ†äº«é“¾æ¥</code>ä¸­çš„<code>å±€åŸŸç½‘IPæ‰«æå·¥å…·</code>æ¥è¿›è¡Œæ‰«æè·å–<code>R4Sçš„IPåœ°å€</code>ã€‚</p>
<p>åœ¨å‰é¢çš„æ­¥éª¤ï¼Œå·²ç»å°†<code>iStoreOSç³»ç»Ÿ</code>çƒ§å½•è‡³<code>SDå¡</code>ä¸­äº†ï¼Œæ¥ä¸‹æ¥å°†<code>SDå¡</code>æ’å…¥è‡³<code>R4S</code>ä¸­ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f666a75e712f432ea38f20cadd60ba25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=2Zb1zbxjL45sC2JVYGH3KGC57Hc%3D" alt="image-20250917154623613" loading="lazy"/></p>
<p>ç„¶åæ’å°†<code>ç½‘çº¿1</code>å’Œ<code>ç½‘çº¿2</code>ä¸¤æ ¹ç½‘çº¿åˆ†åˆ«æ’å…¥<code>R4S</code>çš„<code>WANå£</code>å’Œ<code>LANå£</code>ï¼Œå¦ä¸€å¤´åˆ†åˆ«æ’å…¥è·¯ç”±å™¨çš„<code>LANå£ï¼ˆæˆ–å…‰çŒ«LAN/WANå£ï¼‰</code>å’Œç”µè„‘çš„<code>ç½‘å£</code>,å‚è€ƒå›¾å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5df8e797791481082c3dfcbcfa3b49f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=mbhaGMrYXUfwlm9eAZj%2F6pbBrQ8%3D" alt="image-20250917155512215" loading="lazy"/></p>
<p>å½“å‰æ•™ç¨‹ä¸­è¿æ¥ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa7e03f959524b9e9bc7e5e94157979c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=B%2Fmwn7I7hA0WxeDfkQp%2BUdHvVWw%3D" alt="image-20250917161123045" loading="lazy"/></p>
<p>ç­‰å¾…<code>2~3</code>åˆ†é’Ÿï¼Œå¯ä»¥çœ‹åˆ°<code>R4S</code>çš„æŒ‡ç¤ºç¯å…¨éƒ¨ç‚¹äº®(å•ç½‘å£æ¨¡å¼WANå£ä¸ä¼šäº®ï¼Œå› ä¸ºæ²¡æœ‰æ¥ç½‘çº¿)ï¼Œè¡¨ç¤ºç³»ç»Ÿå¯åŠ¨å®Œæˆï¼š</p>
<ul>
<li><strong>PWRï¼ˆç”µæºç¯ï¼‰</strong>: çº¢è‰²å¸¸äº®ï¼Œè¡¨ç¤ºè®¾å¤‡æ­£å¸¸ä¾›ç”µ</li>
<li><strong>SYSï¼ˆç³»ç»Ÿç¯ï¼‰</strong>: ç»¿è‰²é—ªçƒåå¸¸äº®ï¼Œè¡¨ç¤ºç³»ç»Ÿå¯åŠ¨å®Œæˆ</li>
<li><strong>WANï¼ˆWANå£ç¯ï¼‰</strong>: ç»¿è‰²å¸¸äº®ï¼Œè¡¨ç¤ºWANå£ç½‘ç»œè¿æ¥æ­£å¸¸</li>
<li><strong>LANï¼ˆLANå£ç¯ï¼‰</strong>: ç»¿è‰²å¸¸äº®ï¼Œè¡¨ç¤ºLANå£ç½‘ç»œè¿æ¥æ­£å¸¸</li>
</ul>
<p>å‚è€ƒå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd836741c64e4844b2ee4b0ab70a1419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=LfK3%2F8Camc2LDHWQCAb42FCr5d0%3D" alt="e56a7e7c87c575a227da8f7394a8846e" loading="lazy"/></p>
<p>ä¸ºäº†ç¡®è®¤IPæ˜¯å¦ä¸º<strong>192.168.100.1</strong>ï¼Œå¯ä»¥åœ¨<code>cmd</code>ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œç„¶åæŸ¥çœ‹<code>ä»¥å¤ªç½‘é€‚é…å™¨</code>çš„IPV4æ˜¯å¦ä¸º100ç½‘æ®µï¼š</p>
<pre><code class="hljs language-shell" lang="shell">ipconfig
</code></pre>
<p>å¦‚ä¸‹å›¾ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/367f5078c798452c88a89baa127ef9d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=dH66L4z0YomJp6P4WUwZpLj8I7k%3D" alt="image-20250917161859495" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ç”µè„‘çš„IPæ˜¾ç¤ºä¸º<code>192.168.100.137</code>,ç½‘å…³æ˜¾ç¤ºä¸º<code>192.168.100.1</code>,æ¥ç€ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®æµè§ˆå™¨æµ‹è¯•:</p>
<pre><code class="hljs language-shell" lang="shell">http://192.168.100.1
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cfd83b970c5488aa9af01fb3d0a2a1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=O8NysQzynYdFSPpmsXVKqG%2Fwa0I%3D" alt="image-20250917162038653" loading="lazy"/></p>
<p>æˆåŠŸè·³è½¬è®¿é—®åˆ°äº†<code>iStoreOSç³»ç»Ÿ</code>çš„ç™»å½•ç•Œé¢å•¦ï¼</p>
<h2 data-id="heading-6">5.iStoreOSç³»ç»Ÿä¸­é…ç½®WebDAV</h2>
<p>åœ¨å‰é¢æ­¥éª¤å·²ç»æˆåŠŸçƒ§å½•å¥½é•œåƒä¸”æˆåŠŸè®¿é—®åˆ°<code>iStoreOSç³»ç»Ÿ</code>,æ¥ä¸‹æ¥éœ€è¦è¿›è¡Œé…ç½®<code>WebDAV</code>ä»¥ç”¨æ¥è¿›è¡ŒæŒ‚è½½ã€‚**WebDAVï¼ˆWeb Distributed Authoring and Versioningï¼‰**æ˜¯ä¸€ç§åŸºäºHTTPåè®®çš„æ–‡ä»¶ä¼ è¾“åè®®ï¼Œé…ç½®å®Œæˆåï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡ç½‘ç»œè®¿é—®å®¶ä¸­çš„æ–‡ä»¶ï¼Œå°±åƒä½¿ç”¨ç½‘ç›˜ä¸€æ ·ã€‚æ¯”å¦‚åœ¨å…¬å¸éœ€è¦æŸ¥çœ‹å®¶é‡Œç”µè„‘ä¸Šçš„ç…§ç‰‡ã€åœ¨å‡ºå·®æ—¶è®¿é—®é‡è¦æ–‡æ¡£ã€æˆ–è€…åœ¨æœ‹å‹å®¶é‡Œä¸‹è½½è‡ªå·±çš„éŸ³ä¹æ”¶è—ï¼Œéƒ½å¯ä»¥é€šè¿‡WebDAVè½»æ¾å®ç°ï¼Œè€Œä¸”æ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œæ— éœ€æ‹…å¿ƒéšç§æ³„éœ²æˆ–å­˜å‚¨ç©ºé—´é™åˆ¶ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨ç™»å½•ç•Œé¢ç›´æ¥ç‚¹å‡»<code>ç™»å½•</code>æŒ‰é’®è¿›å…¥ä¸»é¡µï¼ˆé¦–æ¬¡è®¿é—®é»˜è®¤æ²¡æœ‰å¯†ç ï¼‰ï¼Œè¿›å…¥ä¸»é¡µåæŒ‰é¡¶éƒ¨æç¤ºè¿›è¡Œè®¾ç½®ä¸€ä¸ªç®¡ç†å‘˜å¯†ç ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51158250bd3d4c29b9db5b8340421d90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=%2BzD%2FqMRAaQRQpXsJsvOwUrUCfio%3D" alt="image-20250917164235876" loading="lazy"/></p>
<p>è¿›å…¥åˆ°å¯†ç è®¾ç½®é¡µé¢åï¼Œè®¾ç½®å¥½å¯†ç ç‚¹å‡»<code>ä¿å­˜</code>æŒ‰é’®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f64b854825e84849856feb6188ef6937~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=YBfZvH27vOg8ttfCz2CxxfSSDK8%3D" alt="image-20250917164506164" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œå›åˆ°é¦–é¡µï¼Œç‚¹å‡»<code>å­˜å‚¨æœåŠ¡</code>ä¸‹çš„<code>å¿«é€Ÿé…ç½®</code>æŒ‰é’®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1289fe75d45429aae5cd17ca2ee790c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=UmCawnUmYw0NeLhc1LD5MuB6Azk%3D" alt="image-20250917164840820" loading="lazy"/></p>
<p>ç„¶ååœ¨å¼¹å‡ºçš„é¡µé¢é€‰æ‹©<code>å±€åŸŸç½‘æ–‡ä»¶å…±äº«ï¼ˆWebDAVï¼‰</code>ï¼Œæ¥ç€ç‚¹å‡»<code>ä¸‹ä¸€æ­¥</code>ä¼šæç¤ºï¼š<strong>æ£€æµ‹åˆ°ä½ å°šæœªå®‰è£… GoWebdav æ’ä»¶,æ˜¯å¦å®‰è£…ï¼Ÿ</strong>,ç‚¹å‡»<code>ç¡®å®š</code>æŒ‰é’®å³å¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f8bfc12d6ae4a6d9a3b3b064a66e113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=Stnr0PbElh7z2Xav4O9REPaD5MA%3D" alt="image-20250917165049027" loading="lazy"/></p>
<p>æ¥ç€ï¼Œæ’å…¥ä¸€ä¸ª<code>ç§»åŠ¨ç¡¬ç›˜</code>ï¼Œæ’å…¥åˆ°<code>R4S</code>çš„å¦ä¸€è¾¹<code>USBæ¥å£ï¼ˆä¸¤ä¸ªä¸­ä»»æ„ä¸€ä¸ªå£éƒ½å¯ä»¥ï¼‰</code>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ad98ef328a74ddd991cf7803a426ac0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=WxpEErZqEE%2F%2BrO27c21uTGDp3FU%3D" alt="7f9e257b19ab58ef4c6aa836b3fb2c41" loading="lazy"/></p>
<p>ç„¶ååœ¨é€‰æ‹©ç¡¬ç›˜é¡µé¢é€‰æ‹©æ’å…¥çš„<code>ç§»åŠ¨ç¡¬ç›˜(æ²¡æœ‰çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€‰æ‹©é»˜è®¤çš„SDå¡)</code>:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/324e24c3092a4b77abbe36e1c7d17315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=joQNDmAc8cSFLc2%2BPwy8XHYeBrI%3D" alt="image-20250917170526921" loading="lazy"/></p>
<p>æ¥ç€æ¥åˆ°ç¡¬ç›˜é…ç½®é¡µé¢ï¼Œæ ¼å¼åŒ–é€‰é¡¹æŒ‰éœ€é€‰æ‹©å³å¯ï¼Œå¯ä»¥é€‰æ‹©ä¸è¿›è¡Œæ ¼å¼åŒ–ã€‚è¿™é‡Œé€‰æ‹©æ ¼å¼åŒ–è¯¥ç¡¬ç›˜ï¼ˆå¦‚æœ‰èµ„æ–™ï¼Œå»ºè®®å…ˆå¤‡ä»½å¥½èµ„æ–™ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e549ba7934e4c93aefdcbb5c3a9f99f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=jARBJr%2BDzj4gItiWGuIi%2Fj7II%2FU%3D" alt="image-20250917170722279" loading="lazy"/></p>
<p>ç„¶ååˆ°å…±äº«é…ç½®é¡µé¢ï¼Œè®¾ç½®ä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»åˆ›å»ºæŒ‰é’®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b09131c463624e2aa1d3fceb6a8467cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=ETovnqVmJ3qO7ZrSpfbB1pOkcms%3D" alt="image-20250917170907695" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆåï¼Œåœ¨é¦–é¡µçš„<code>å­˜å‚¨æœåŠ¡</code>ä¸‹çš„<code>WEBDAV</code>æ å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>æŒ‚è½½è·¯å¾„</strong>ï¼š<code>/mnt/usb6-3</code></li>
<li>æœåŠ¡è·¯å¾„ï¼š<code>http://192.168.100.1:6086</code></li>
<li><strong>è´¦å·</strong>ï¼š<code>user</code></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e1d32645cdc4a1c80ca3b0e1f6128aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=wXSgUnxkAH2dNUN4xzbcMM5%2BvPE%3D" alt="image-20250917171050926" loading="lazy"/></p>
<p>åˆ°è¿™é‡Œï¼ŒWEBDAVå°±é…ç½®å¥½å•¦ï¼Œæµè§ˆå™¨è®¿é—®ä¸€ä¸‹æœåŠ¡è·¯å¾„æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">http://192.168.100.1:6086
</code></pre>
<p>è®¿é—®å¦‚ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/020bcb10fafa48bfb7cbb8d5930d1b1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=nsPBV9DOaJ8tvYtM8QRvbNj8X5U%3D" alt="image-20250917174453751" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°éœ€è¦è¾“å…¥åˆšæ‰è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥ä¸€ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba9a85977e1f45b5b8f4c4fcca645cd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=9BMwWlcgXFKoOUXSOolFu79QoJI%3D" alt="image-20250917174601342" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°æˆåŠŸè¿›æ¥äº†ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œæ ¼å¼åŒ–ï¼Œåº”è¯¥èƒ½çœ‹åˆ°è‡ªå·±çš„ä¸€äº›ç›®å½•å’Œæ–‡ä»¶ï¼è¿™é‡Œä¸Šä¼ äº†ä¸€ä¸ªè§†é¢‘ï¼Œè®©æˆ‘ä»¬æ¼”ç¤ºæ’­æ”¾çœ‹çœ‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d85f373a5194a1c84e0c2b5d77a0509~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=l95g2NiuoMyoB2SsJIkKX9qtEmc%3D" alt="image-20250917175012886" loading="lazy"/></p>
<p>å¯ä»¥å‘ç°ï¼ŒæˆåŠŸçš„è®¿é—®ä¸”æ’­æ”¾äº†è§†é¢‘ï¼è‡³æ­¤ï¼ŒWebDAVæœåŠ¡å·²ç»åœ¨å±€åŸŸç½‘å†…é…ç½®æˆåŠŸï¼Œä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªåœ¨å®¶åº­ç½‘ç»œå†…çš„ç§äººå­˜å‚¨æœåŠ¡ã€‚åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ä»»ä½•è®¾å¤‡ï¼ˆæ‰‹æœºã€ç”µè„‘ã€å¹³æ¿ç­‰ï¼‰è½»æ¾è®¿é—®å’Œç®¡ç†R4Sä¸Šçš„æ–‡ä»¶æ•°æ®ï¼Œä¸ºåç»­å®ç°å¤–ç½‘è®¿é—®æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-7">6.åœ¨Windowsä¸ŠæŒ‚è½½WebDAV</h2>
<p>ä¸ºäº†æ›´æ–¹ä¾¿åœ°ä½¿ç”¨WebDAVæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŒ‚è½½ä¸ºWindowsç³»ç»Ÿçš„ç½‘ç»œé©±åŠ¨å™¨ï¼Œè¿™æ ·å°±èƒ½åƒè®¿é—®æœ¬åœ°ç¡¬ç›˜ä¸€æ ·ç›´æ¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ“ä½œæ–‡ä»¶ã€‚RaiDriveæ˜¯ä¸€æ¬¾å…è´¹çš„ç½‘ç»œé©±åŠ¨å™¨æŒ‚è½½å·¥å…·ï¼Œæ”¯æŒWebDAVã€FTPã€SFTPç­‰å¤šç§åè®®ï¼Œæ“ä½œç®€å•ä¸”ç¨³å®šæ€§å¥½ã€‚</p>
<p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…<code>RaiDrive</code>ï¼Œå¯ä»¥ä»å‰é¢æä¾›çš„èµ„æºåˆ†äº«é“¾æ¥ä¸­çš„windowsç‰ˆæœ¬åº”ç”¨ç¨‹åºï¼ˆé€‚ç”¨äºwin10/win11ï¼‰ä¸‹è½½å®‰è£…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b06daf58002f49e08a93622e23b09a74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=pskQV4j19Kk6SuOnKN%2F0JgTqLWM%3D" alt="image-20250917182105838" loading="lazy"/></p>
<p>æˆ–è€…å‰å¾€å®˜ç½‘è¿›è¡Œä¸‹è½½ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">https://www.raidrive.com/download
</code></pre>
<p>ä¸‹è½½ä¸‹æ¥åå®‰è£…å¥½ï¼Œæ‰“å¼€ç¨‹åºåï¼Œæç¤ºéœ€è¦è¿›è¡Œç™»å½•ï¼Œç‚¹å‡»<code>Sign In</code>è¿›è¡Œç™»å½•ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e964f59dc764068982f4598c623000e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=wI8RaCZ8aM41QbsF31WgzYHYbws%3D" alt="image-20250917182554310" loading="lazy"/></p>
<p>ç™»å½•å®Œæˆåï¼Œé¡¶éƒ¨å¯¼èˆªæ æµ…ç°è‰²çš„<code>Add</code>æŒ‰é’®ä¼šå˜ä¸ºç™½è‰²ï¼Œç‚¹å‡»<code>Add</code>æŒ‰é’®ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹å›¾æ“ä½œï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7404b43781204e49a3e810515af62689~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=xI2PJNAsCJyTzJXqJTnv9EwgzLs%3D" alt="image-20250917183655099" loading="lazy"/></p>
<p>ç‚¹å‡»è¿æ¥åï¼Œå¯ä»¥çœ‹åˆ°åœ¨èµ„æºç®¡ç†å™¨ä¸­ï¼Œå¤šå‡ºäº†ä¸€ä¸ªç½‘ç»œä½ç½®çš„ç£ç›˜ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b1c84f190b3432e8b46502e1f13dc4e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=LmRp2RTOSKbJrIwThZWueL9dvE4%3D" alt="image-20250917184005229" loading="lazy"/></p>
<p>å¦‚æœæ˜¾ç¤ºå¤§å°ä¸å¯¹ï¼Œå¯ä»¥å…ˆ<code>åœæ­¢è¿æ¥</code>ï¼Œç„¶åå†ç‚¹å‡»<code>è®¾ç½®</code>æŒ‰é’®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d818e9a5e5184c9dbb313bf5343f480c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=Co%2BMpo0PGSQIvINOKnBATU50nF8%3D" alt="image-20250917184124461" loading="lazy"/></p>
<p>åœ¨é«˜çº§é€‰é¡¹é‡Œé¢é…ç½®ä¸€ä¸‹ç¡¬ç›˜çœŸæ­£çš„å¤§å°ï¼Œç„¶åé‡æ–°è¿æ¥å³å¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd15260536584184b866faf73d3d87d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=ZTZxuLZKFvtkj8ods5Ee8uk26P0%3D" alt="image-20250917184209034" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬æ’­æ”¾ä¸€ä¸‹è§†é¢‘æµ‹è¯•ä¸€ä¸‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8831f6ac5f4546889c0974519d98d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=8SmuiEdjKXEvnySl5Ud%2FZZUvJGw%3D" alt="image-20250917184430694" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸçš„è®¿é—®äº†å±€åŸŸç½‘é…ç½®WebDAVçš„ç¡¬ç›˜ä¸­è§†é¢‘ï¼Œä¸”è°ƒç”¨äº†ç”µè„‘ä¸Šçš„æ’­æ”¾å™¨è¿›è¡Œæ’­æ”¾ï¼è‡³æ­¤ï¼ŒRaiDriveæŒ‚è½½åŠŸèƒ½å·²ç»å®Œå…¨é…ç½®æˆåŠŸï¼Œä½ ç°åœ¨å¯ä»¥åƒä½¿ç”¨æœ¬åœ°ç¡¬ç›˜ä¸€æ ·åœ¨Windowsèµ„æºç®¡ç†å™¨ä¸­ç›´æ¥æ“ä½œè¿œç¨‹æ–‡ä»¶ï¼Œæ— éœ€é¢‘ç¹çš„ä¸Šä¼ ä¸‹è½½æ“ä½œã€‚ä½†ç›®å‰è¿™ç§è®¿é—®æ–¹å¼ä»…é™äºå±€åŸŸç½‘å†…ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†é€šè¿‡cpolarå†…ç½‘ç©¿é€æœåŠ¡ï¼Œè®©ä½ åœ¨ä¸–ç•Œä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®å®¶ä¸­çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-8">7 é…ç½®cpolarå†…ç½‘ç©¿é€å®ç°å¤–ç½‘è®¿é—®</h2>
<p>é€šè¿‡å‰æ–‡çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å±€åŸŸç½‘æˆåŠŸéƒ¨ç½²äº†WebDAVæœåŠ¡ã€‚è™½ç„¶å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½†ç»†å¿ƒçš„ä½ å¯èƒ½å·²ç»å‘ç°ï¼š<strong>æµè§ˆå™¨åœ°å€æ ä¸­æ˜¾ç¤ºçš„IPæ˜¯<code>192.168.x.x</code>è¿™æ ·çš„å±€åŸŸç½‘åœ°å€</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>å¤–å‡ºåŠå…¬æ—¶æ— æ³•è·å–å®¶ä¸­å­˜å‚¨çš„å·¥ä½œèµ„æ–™</li>
<li>åº¦å‡æœŸé—´æƒ³è¦å¤‡ä»½æ‰‹æœºç…§ç‰‡åˆ°å®¶ä¸­å­˜å‚¨è®¾å¤‡æ—¶æ— æ³•è¿æ¥</li>
<li>æ— æ³•å°†å®¶ä¸­çš„æ–‡ä»¶ç›´æ¥åˆ†äº«ç»™è¿œç¨‹çš„æœ‹å‹æˆ–åŒäº‹</li>
</ul>
<p><strong>å¦‚ä½•æ‰“ç ´è¿™å±‚"å±€åŸŸç½‘æ·é”"ï¼Œè®©éƒ¨ç½²åœ¨NanoPi R4Sä¸Šçš„WebDAVæœåŠ¡éšæ—¶éšåœ°å¯è®¿é—®ï¼Ÿ</strong></p>
<p>æœ¬èŠ‚å°†ä½¿ç”¨<strong>cpolarå†…ç½‘ç©¿é€</strong>ï¼Œä¸€æ¬¾å®‰å…¨æ˜“ç”¨çš„å›½äº§å·¥å…·ï¼Œæ— éœ€å…¬ç½‘IPï¼Œåªéœ€ç®€å•é…ç½®ï¼Œå°±èƒ½ä¸ºä½ çš„æœ¬åœ°æœåŠ¡åˆ›å»ºä¸€æ¡å®‰å…¨çš„éš§é“ï¼Œç”Ÿæˆä¸€ä¸ªä¸“å±çš„å…¬å…±ç½‘å€ã€‚è®©ä½ åœ¨ä»»ä½•æœ‰ç½‘ç»œçš„åœ°æ–¹ï¼Œéƒ½èƒ½é¡ºç•…è®¿é—®å®¶ä¸­R4Sä¸Šçš„WebDAVæ–‡ä»¶æœåŠ¡ã€‚</p>
<h3 data-id="heading-9">7.1 iStoreOSç³»ç»Ÿä¸­å®‰è£…cpolaræœåŠ¡</h3>
<p>é¦–å…ˆï¼Œç‚¹å‡»é¦–é¡µçš„ç»ˆç«¯æŒ‰é’®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e2c3f38aded462093659741cb4ebf98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=tyHSHfIhfhiWo%2FRdgwDiQjVNYjY%3D" alt="image-20250822191618779" loading="lazy"/></p>
<p>ç‚¹å‡»åä¼šè·³è½¬æ–°çš„é¡µé¢ï¼Œæ–°çš„iStoreOSç»ˆç«¯é¡µé¢ç™»å½•è¿›ç³»ç»Ÿï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f251e7c32d04d3aa6077cbc1e127773~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=tY5stikLhZHV3tIquE2CM0Mo%2BAA%3D" alt="image-20250918095938766" loading="lazy"/></p>
<p>ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä¸‹è½½å…¬é’¥ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">wget -O cpolar-public.key http://openwrt.cpolar.com/releases/public.key
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecb5b32215f243f29993dba95b2eecb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=FGQCZmtAXABRMfgVkTVvWlTuZcQ%3D" alt="image-20250918100000390" loading="lazy"/></p>
<p>ä¸‹è½½å®Œæˆä»¥åï¼Œæ·»åŠ è¯¥å…¬é’¥ï¼Œä»¥åŠæ·»åŠ cpolarçš„opkgä»“åº“æºï¼š</p>
<pre><code class="hljs language-shell" lang="shell">opkg-key add cpolar-public.key

echo "src/gz cpolar_packages http://openwrt.cpolar.com/releases/packages/$(. /etc/openwrt_release ; echo $DISTRIB_ARCH)" &gt;&gt; /etc/opkg/customfeeds.conf
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02cea7d3128e4dce81d841a51d08637f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=RVTJGsD00g%2FtZ765oWTIr5kNHSQ%3D" alt="image-20250822193822744" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæ›´æ–°ä»“åº“:</p>
<pre><code class="hljs language-shell" lang="shell">opkg update
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9218ed1a3ef04946b03c84ad1b629333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=0igP6F9RBHpmKA2zEUFh%2FlBtDFY%3D" alt="image-20250918100107298" loading="lazy"/></p>
<p>ç„¶åå®‰è£…cpolarå†…ç½‘ç©¿é€å·¥å…·ï¼Œæ‰§è¡Œå¦‚ä¸‹3æ¡å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£… cpolar ä¸»ç¨‹åºï¼Œè¿™æ˜¯æ ¸å¿ƒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œéš§é“æœåŠ¡ã€‚</span>
opkg install cpolar
<span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£… LuCI çš„å‰ç«¯ç®¡ç†ç•Œé¢æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯åœ¨ iStoreOS çš„ Web ç•Œé¢ï¼ˆLuCIï¼‰é‡Œèƒ½çœ‹åˆ°å›¾å½¢åŒ–çš„ Cpolar é…ç½®ã€‚</span>
opkg install luci-app-cpolar
<span class="hljs-meta prompt_">#</span><span class="bash">å®‰è£… LuCI çš„ä¸­æ–‡è¯­è¨€åŒ…ï¼Œè®© Web ç•Œé¢æ˜¾ç¤ºä¸­æ–‡ã€‚</span>
opkg install luci-i18n-cpolar-zh-cn
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bc377afb70f4200a9b7e6f869d01309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=pMzIEl0P9%2FAQ16b2ymbTI4whWQc%3D" alt="image-20250918100159524" loading="lazy"/></p>
<p>æ‰§è¡Œå®Œæˆåï¼Œç›´æ¥åˆ·æ–°iStoreOSé¦–é¡µï¼Œç„¶åç‚¹å‡»æœåŠ¡ï¼Œå±•å¼€å³å¯çœ‹åˆ°Cpolarèœå•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da9e22b4ec804c0490a39714c6ce66b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=hK5IPEpqLNmIdT%2FWL57xnQTiTzY%3D" alt="image-20250918100904662" loading="lazy"/></p>
<h3 data-id="heading-10">7.2 é…ç½®WebDAVçš„httpéš§é“</h3>
<p>ç‚¹å‡»<code>æ‰“å¼€Web-UIç®¡ç†ç•Œé¢</code>æŒ‰é’®ï¼Œå³å¯è·³è½¬è‡³web uiçš„åå°ç®¡ç†ç•Œé¢ï¼Œå¦‚æœè¿˜æ²¡æœ‰è´¦å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨è¯¥é¡µé¢è·³è½¬æ³¨å†Œé¡µé¢æ³¨å†Œè´¦å·ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e262de968bbf472c86e8964393cb27e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=8pZ4qkKFCb2uqlliO9TCN2rdbAM%3D" alt="image-20250918101021629" loading="lazy"/></p>
<p>æ³¨å†Œå¥½è´¦å·ä»¥åï¼Œå›åˆ°è¯¥é¡µé¢è¿›è¡Œç™»å½•å³å¯ï¼Œç™»å½•æˆåŠŸåï¼Œè¿›å…¥ä¾§è¾¹çš„ã€éš§é“ç®¡ç†&gt;éš§é“åˆ—è¡¨ã€‘ï¼Œå¯ä»¥çœ‹åˆ°æœ‰2æ¡éš§é“ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eac5faea4464692a8a5caec8d5ca3c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=UvR4Rm0rY7%2FctrVfjkUCPJL%2FiII%3D" alt="image-20250918101111162" loading="lazy"/></p>
<p>é€‰æ‹©ã€websiteã€‘è¿™æ¡éš§é“ï¼Œç‚¹å‡»ç¼–è¾‘è¿›è¡Œä¿®æ”¹ï¼ˆä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„éš§é“ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/757cfb272c694b43a5f073817130b640~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=QIADCz%2FNINYOYY0lH5d97kVwQs8%3D" alt="image-20250918101351042" loading="lazy"/></p>
<p>æ¥ç€ç‚¹å‡»ã€çŠ¶æ€ã€‘&gt;ã€åœ¨çº¿éš§é“é‡Œåˆ—è¡¨ã€‘ï¼Œå¯ä»¥çœ‹åˆ°æœ‰2æ¡éš§é“ï¼Œä¸€æ¡ä¸ºhttpçš„åè®®ï¼Œå¦ä¸€æ¡ä¸ºhttpsçš„åè®®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68358af935fb4e029a10c70189e58881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=OOKVPHloLYw4eqfpE8eM%2B6jxuJA%3D" alt="image-20250918101527952" loading="lazy"/></p>
<p>è¿™é‡Œä»¥httpsä¸ºä¾‹ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b60c87cc9cdc4bd094db5a86b9ff0a02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=vW6ZPbJTrqvrk8gKXAVLjNFLDQg%3D" alt="image-20250918101600835" loading="lazy"/></p>
<p>è®¿é—®æˆåŠŸï¼</p>
<h3 data-id="heading-11">7.3 å›ºå®šäºŒçº§å­åŸŸåï¼ˆå‡çº§ä»»æ„å¥—é¤ï¼‰</h3>
<p>ç”±äºå‰é¢è®¾ç½®çš„ä¸ºéšæœºåŸŸåï¼ŒéšæœºåŸŸåçš„æ•°æ®éš§é“å¤„äºä¸´æ—¶çŠ¶æ€ï¼ˆæ¯24å°æ—¶é‡ç½®ä¸€æ¬¡ï¼‰ï¼Œå¤§å¤šç”¨äºæµ‹è¯•åœºæ™¯ã€‚ä½œä¸ºWebDavè¿™ç§ç±»å‹çš„æœåŠ¡ï¼Œæ›´é€‚åˆé•¿æœŸè®¿é—®ï¼Œæ‰€ä»¥è¿™é‡Œè¿›è¡Œè®¾ç½®ä¸€ä¸ªå›ºå®šäºŒçº§å­åŸŸåï¼Œä½¿å…¶é•¿æœŸä¸å˜ï¼Œæ–¹ä¾¿è®°å¿†çš„åŸŸåã€‚</p>
<p>é¦–å…ˆï¼Œè¿›å…¥å®˜ç½‘çš„é¢„ç•™é¡µé¢ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">https://dashboard.cpolar.com/reserved
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4419572449447d5be123ff3a3c6ba5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=QuMXFNp8KOeAEx27piYTedmbcy8%3D" alt="image-20250918102539005" loading="lazy"/></p>
<p>åˆ—è¡¨ä¸­æ˜¾ç¤ºäº†ä¸€æ¡å·²ä¿ç•™çš„äºŒçº§å­åŸŸåè®°å½•ï¼š</p>
<ul>
<li>åœ°åŒºï¼šæ˜¾ç¤ºä¸º<code>China Top</code>ã€‚</li>
<li>äºŒçº§åŸŸåï¼šæ˜¾ç¤ºä¸º<code>dav01</code>ã€‚</li>
</ul>

<pre><code class="hljs">æ³¨ï¼šäºŒçº§åŸŸåæ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªè´¦å·éƒ½ä¸ç›¸åŒï¼Œè¯·ä»¥è‡ªå·±è®¾ç½®çš„äºŒçº§åŸŸåä¿ç•™çš„ä¸ºä¸»
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œè¿›å…¥ä¾§è¾¹èœå•æ çš„<code>éš§é“ç®¡ç†</code>ä¸‹çš„<code>éš§é“åˆ—è¡¨</code>ï¼Œå¯ä»¥çœ‹åˆ°åä¸º<code>WebDAV-6086</code>çš„éš§é“</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a1078cf8bd0446ca6d0dd952509a457~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=%2Bj6c5eFcKyMWDWLbu3cGRyyNCbE%3D" alt="image-20250918102307459" loading="lazy"/></p>
<p>ç‚¹å‡»<code>ç¼–è¾‘</code>æŒ‰é’®è¿›å…¥ç¼–è¾‘é¡µé¢ï¼Œä¿®æ”¹åŸŸåç±»å‹ä¸º<code>äºŒçº§å­åŸŸå</code>ï¼Œç„¶åå¡«å†™å‰é¢é…ç½®å¥½çš„å­åŸŸåï¼Œç‚¹å‡»æ›´æ–°æŒ‰é’®ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6ca0a3fa4864d8daa6e585e245e5355~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=1OhSkFRjruJist7gIFjG1mB%2B6FI%3D" alt="image-20250918102444306" loading="lazy"/></p>
<p>æ¥åˆ°<code>çŠ¶æ€</code>èœå•ä¸‹çš„<code>åœ¨çº¿éš§é“åˆ—è¡¨</code>å¯ä»¥çœ‹åˆ°éš§é“åç§°ä¸º<code>WebDAV-6086</code>çš„å…¬ç½‘åœ°å€å·²ç»å˜æ›´ä¸º<code>äºŒçº§å­åŸŸå+å›ºå®šåŸŸåä¸»ä½“åŠåç¼€</code>çš„å½¢å¼äº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ab4e523948f43d5bc83e1940be7bf19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=UU4yAYA6Tr3MhV8eNHXgMhZBJow%3D" alt="image-20250918102521091" loading="lazy"/></p>
<p>è¿™é‡Œä»¥httpsåè®®åšè®¿é—®æµ‹è¯•:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b49577b1dbde4a2cb73f82989f4c049d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=HP3ycjDagLeagqMMxBITLB6zByw%3D" alt="image-20250918102619779" loading="lazy"/></p>
<p>è®¿é—®æˆåŠŸï¼è¿™æ ·ï¼Œä¸€ä¸ªå›ºå®šä¸å˜çš„åŸŸåå°±è®¾ç½®å®Œæˆå•¦ï¼</p>
<h3 data-id="heading-12">7.4 é…ç½®RaiDriveæŒ‚è½½ç©¿é€åçš„åœ°å€</h3>
<p>å›åˆ°<code>RaiDrive Mount</code>åº”ç”¨ç¨‹åºä¸­ï¼Œç‚¹å‡»<code>Add</code>æ·»åŠ ä¸€ä¸ªï¼Œæ“ä½œå¦‚ä¸‹å›¾ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e46132632a0491991b5c21d24c1eb72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=L4SXrqzLtPGTPcvNEDA0ersFzvY%3D" alt="image-20250918103413097" loading="lazy"/></p>
<p>ç‚¹å‡»è¿æ¥åï¼Œå¯ä»¥åœ¨èµ„æºç®¡ç†å™¨ä¸­çœ‹åˆ°æ–°å¢çš„ç½‘ç»œç£ç›˜ï¼Œç°åœ¨å³ä½¿ç¦»å¼€å®¶åº­ç½‘ç»œç¯å¢ƒï¼Œä¹Ÿèƒ½é€šè¿‡è¿™ä¸ªå…¬ç½‘åœ°å€æ­£å¸¸è®¿é—®WebDAVæœåŠ¡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6884d97c5d44538b43ef0cf66423b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770954767&amp;x-signature=CWf5WlFowbjDfx2HM%2FTya2Dqlus%3D" alt="image-20250918103925393" loading="lazy"/></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸå®Œæˆäº†NanoPi R4Såˆ·å…¥iStoreOSç³»ç»Ÿå¹¶é…ç½®WebDAVå¤–ç½‘æŒ‚è½½çš„å…¨éƒ¨æ­¥éª¤ã€‚é€šè¿‡è¿™å¥—æ–¹æ¡ˆï¼Œä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œå…¨å±äºè‡ªå·±çš„ç§äººäº‘å­˜å‚¨ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p>NanoPi R4S+iStoreOS çš„ç»„åˆæœ¬å°±ä¸ºç§äººæ•°æ®ç®¡ç†æä¾›äº†ç¨³å®šã€è‡ªä¸»çš„åŸºç¡€ï¼Œè€Œ cpolar çš„åŠ å…¥åˆ™å¼¥è¡¥äº†å±€åŸŸç½‘ä½¿ç”¨çš„å±€é™æ€§ï¼Œè®©ç§æœ‰äº‘çœŸæ­£å®ç°äº† â€œéšæ—¶éšåœ°å¯ç”¨â€ã€‚è¿™å¥—æ–¹æ¡ˆæ²¡æœ‰å¤æ‚çš„æ“ä½œé—¨æ§›ï¼Œä¹Ÿæ— éœ€ä¾èµ–ç¬¬ä¸‰æ–¹äº‘æœåŠ¡ï¼Œæ— è®ºæ˜¯æ—¥å¸¸å­˜å‚¨å®¶åº­ç…§ç‰‡ã€å·¥ä½œæ–‡æ¡£ï¼Œè¿˜æ˜¯ç®¡ç†æ™ºèƒ½å®¶å±…è®¾å¤‡ï¼Œéƒ½èƒ½åœ¨ä¿éšœæ•°æ®å®‰å…¨çš„å‰æä¸‹ï¼Œæ»¡è¶³è·¨åœºæ™¯ã€è·¨åœ°åŸŸçš„ä½¿ç”¨éœ€æ±‚ï¼ŒçœŸæ­£è®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½è½»æ¾æ‹¥æœ‰å±äºè‡ªå·±çš„ã€å®ç”¨åˆä¾¿æ·çš„ç§æœ‰äº‘ç³»ç»Ÿã€‚</p>
<p>æ„Ÿè°¢æ‚¨é˜…è¯»æœ¬ç¯‡æ–‡ç« ï¼Œæœ‰ä»»ä½•é—®é¢˜æ¬¢è¿ç•™è¨€äº¤æµã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cpolar.com%2F" target="_blank" title="https://www.cpolar.com/" ref="nofollow noopener noreferrer">cpolarå®˜ç½‘-å®‰å…¨çš„å†…ç½‘ç©¿é€å·¥å…· | æ— éœ€å…¬ç½‘ip | è¿œç¨‹è®¿é—® | æ­å»ºç½‘ç«™</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ®µJavaScriptä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603201727715917876</link>    <guid>https://juejin.cn/post/7603201727715917876</guid>    <pubDate>2026-02-06T02:04:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603201727715917876" data-draft-id="7602488966609928230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ®µJavaScriptä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-02-06T02:04:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="libokaifa"/> <meta itemprop="url" content="https://juejin.cn/user/676954894018808"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ®µJavaScriptä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/676954894018808/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    libokaifa
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T02:04:20.000Z" title="Fri Feb 06 2026 02:04:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¼—æ‰€å‘¨çŸ¥JavaScript æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œè§£é‡Šå‹è¯­è¨€éƒ½æœ‰ç¼–è¯‘å™¨ï¼Œé€šè¿‡è°·æ­Œæµè§ˆå™¨çš„ç¼–è¯‘å™¨æ˜¯V8å¼•æ“ ç”Ÿæˆå­—èŠ‚ç å¹¶è¢«è®¡ç®—æœºè®¤è¯†å¹¶æ‰§è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>V8å¼•æ“ä¸»è¦è¿è¡Œä»£ç è¡Œä¸ºæ˜¯ï¼š æºä»£ç (.js æ–‡ä»¶)--&gt;è¯æ³•åˆ†æ(è§£æå™¨ï¼ˆparser)--&gt;AST(è¯­æ³•åˆ†æ)--&gt;å­—èŠ‚ç ï¼ˆIgnition ç”Ÿæˆï¼‰-ã€‹æ‰§è¡Œï¼ˆï¼‰</p>
</blockquote>
<h2 data-id="heading-0">è¯æ³•åˆ†æ</h2>
<pre><code class="hljs language-ini" lang="ini">// æˆ‘æ˜¯æ³¨é‡Š
var <span class="hljs-attr">answer</span> = <span class="hljs-number">6</span> * <span class="hljs-number">7</span><span class="hljs-comment">;</span>
</code></pre>
<p>åƒä¸Šé¢ä¸€æ®µä»£ç </p>
<p>ä¼šè¢«V8å¼•æ“å»é™¤æ— ç”¨çš„çš„æ³¨é‡Šç­‰é€šè¿‡è§£æå™¨ï¼ˆparserï¼‰åˆ†è§£ä¸ºæœ€å°çš„è¯æ³•å•å…ƒtoken(<a href="https://link.juejin.cn?target=https%3A%2F%2Fesprima.org%2Fdemo%2Fparse.html%23" target="_blank" title="https://esprima.org/demo/parse.html#" ref="nofollow noopener noreferrer">parser</a>)ï¼Œ
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å‡ºæœ€å°å•å…ƒçš„Tokenï¼Œè®©V8æ›´å¿«çš„æ‰«æå¹¶è¿›è¡Œè§£æ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d99c847362a546d29e6163c26ed08bb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGlib2thaWZh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770948262&amp;x-signature=BqrSgY69sJYiGvxVfT9y9AZMZ7U%3D" alt="image.png" loading="lazy"/>
è¿™æ®µä»£ç è¢«æ‹†è§£ä¸ºï¼štoken æ•°ç»„ï¼Œå¹¶æ ‡è¯†äº†typeç±»å‹å’Œvalue</p>
<h2 data-id="heading-1">è¯­æ³•åˆ†æAST</h2>
<p>ä¼—æ‰€å‘¨çŸ¥ æ˜¯é™æ€è¯­éŸ³ï¼Œç±»ä¼¼VsCode ç¼–è¾‘å™¨è™½ç„¶ä¹Ÿä¼šå¯¹ä»£ç ç¼–å†™æ—¶çš„è¯­æ³•çš„é™æ€æ£€æŸ¥ï¼Œä½†æ˜¯æ˜¯éå¸¸è½»é‡çº§ï¼Œå¹¶ä¸”ä¸æ¶‰åŠåˆ°ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥åœ¨è¯æ³•åˆ†æçš„ä¸‹ä¸€æ­¥è¿›è¡Œç¼–è¯‘é˜¶æ®µçš„è¯­æ³•åˆ†æASTä»¥ä¿è¯ä»£ç è¯­æ³•ç»“æ„çš„æ­£ç¡®æ€§ï¼ŒåŒæ—¶ä¸ºåç»­çš„è¯­ä¹‰åˆ†æç­‰æä¾›ç»“æ„æ€§çš„æ•°æ®ã€‚ä¸‹é¢æ˜¯ä¸€æ®µä»£ç AST ç»“æ„å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae24281cd8044026b7fea10ef979ac4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGlib2thaWZh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770948262&amp;x-signature=L8LsB4p75a07akfb1hbkv6m6Etc%3D" alt="image.png" loading="lazy"/>
ä¸Šå›¾æ˜¯æ ¹æ®ä¸Šä¸€æ­¥çš„è¯æ³•åˆ†æTokenæ•°ç»„ç”Ÿäº§çš„Jsonæ ‘çŠ¶ç»“æ„æ ‘ï¼Œå…¶ä¸»è¦åŒ…å«çš„ä¿¡æ¯æœ‰ï¼š<code>"VariableDeclaration"</code>ï¼ˆå˜é‡å£°æ˜ï¼‰<code>"BinaryExpression"</code>ï¼ˆè®¡ç®—çš„äºŒå…ƒè¡¨è¾¾å¼ï¼‰,<code>"name"</code>(æ ‡è¯†ç¬¦çš„åç§°),<code>"value"</code>(å­—é¢é‡çš„å€¼)ï¼Œ<code>"operato"</code>(è¡¨è¾¾å¼çš„æ“ä½œç¬¦)ç­‰ã€‚åœ¨è¿™ä¸€é˜¶æ®µå¦‚æœå‘ç”Ÿé”™è¯¯ä»£ç åŠ è½½ä¼šåœ¨è¿™æ­¥åœæ­¢å¹¶æŠ›å‡ºå¼‚å¸¸å¦‚ï¼š<code> è¾“å‡º: Unexpected token at line 1, column 5</code></p>
<h2 data-id="heading-2">ç”Ÿæˆå­—èŠ‚ç </h2>
<p>JS å­—èŠ‚ç  çš„ç”Ÿæˆæ˜¯ç”±V8ï¼ˆIgnition è§£é‡Šå™¨å®Œæˆï¼‰ï¼Œç†Ÿæ‚‰Java çš„éƒ½çŸ¥é“ï¼ŒJavaçš„å­—èŠ‚ç  ç»è¿‡AOTå­˜åœ¨.classæ–‡ä»¶ä¸­ï¼Œä½†JavaScript ä¸ºäº†å¿«é€Ÿæ‰§è¡ŒæŠŠå­—èŠ‚ç å­˜åœ¨äº†å†…å­˜ä¸­ï¼Œç„¶åç»è¿‡JIT ç”Ÿæˆæœºå™¨ç ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å‘ç°ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†è¯­è¨€éƒ½æ˜¯å…ˆæ˜¯ç”Ÿæˆå­—èŠ‚ç å†ç”Ÿæˆæœºå™¨ç å‘¢ã€‚å…¶å®æ—©æœŸV8 å¼•æ“ä¹Ÿæ˜¯ç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼Œå°±ä¼šé€ æˆå¤±è´¥å’Œå¡é¡¿ã€‚æœ‰äº†å­—èŠ‚ç ä»¥ååšäº†ä¸­é—´æµç¨‹å,å¼•æ“å¯ä»¥æ£€æµ‹çƒ­ç‚¹ï¼ˆhot codeï¼‰ä»£ç ï¼Œç”±TurboFan ç¼–è¯‘å™¨å†ç”Ÿæˆæœºå™¨ç ï¼Œæå‡è¿è¡Œæ—¶æ•ˆç‡ï¼Œéçƒ­ç‚¹ä»£ç çš„å­—èŠ‚ç å¯ä»¥ç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆå­—èŠ‚ç çš„é€Ÿåº¦è¿œå¤§äºç”Ÿäº§æœºå™¨ç çš„é€Ÿåº¦ï¼Œè¿™æ ·çš„ä¸€é¡¿æ“ä½œåV8å°±å¯ä»¥å¹³è¡¡ä»£ç è¿è¡Œæ—¶çš„æ—¶é—´å’Œç©ºé—´çš„å¤æ‚åº¦ã€‚
ä¸‹é¢æ˜¯æ¨¡æ‹Ÿå­—èŠ‚ç å’Œæœºå™¨ç è¿è¡Œçš„æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—å¯†é›†å‹å‡½æ•°ï¼ˆæ¨¡æ‹Ÿçƒ­ç‚¹ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">computeIntensive</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000000</span>; i++) {  <span class="hljs-comment">// å¢åŠ å¾ªç¯æ¬¡æ•°ä»¥æ”¾å¤§å·®è·</span>
    result += <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(i);
  }
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// å†·å¯åŠ¨æµ‹è¯•ï¼šç¬¬ä¸€æ¬¡æ‰§è¡Œï¼ˆä¸»è¦ä½¿ç”¨å­—èŠ‚ç ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'Cold Start (Bytecode)'</span>);
<span class="hljs-title function_">computeIntensive</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'Cold Start (Bytecode)'</span>);

<span class="hljs-comment">// çƒ­å¯åŠ¨æµ‹è¯•ï¼šå¤šæ¬¡æ‰§è¡Œåï¼ˆè§¦å‘ JITï¼Œæœºå™¨ç ä¼˜åŒ–ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'Hot Start (Machine Code)'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-title function_">computeIntensive</span>();  <span class="hljs-comment">// é‡å¤æ‰§è¡Œï¼ŒV8 ä¼šä¼˜åŒ–æˆæœºå™¨ç </span>
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'Hot Start (Machine Code)'</span>);
</code></pre>
<p>åœ¨ç»ˆç«¯è¿è¡Œï¼š<code>node --trace-opt  test.js</code>(<strong>Node.js</strong>ï¼šæ˜¯ä¸€ä¸ªåŸºäº V8 JavaScript å¼•æ“çš„è¿è¡Œæ—¶ç¯å¢ƒ),æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c75243a0251451f885b0abe5fcdcd7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGlib2thaWZh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770948262&amp;x-signature=t3rCcKROxtGDQJnhRe0aoc4wJe8%3D" alt="image.png" loading="lazy"/>
å†·å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œäº†ï¼Œè€—æ—¶ï¼š1.486s ,ä½†ä»£ç ç«‹å³æ‰§è¡Œäº†ä¸€æ¬¡ã€‚
Hot Codeçƒ­å¯åŠ¨ è€—æ—¶ï¼š14.955sï¼Œä½†æ‰§è¡Œäº†100,000,000æ¬¡ï¼Œå¯ä»¥çœ‹å‡ºV8 é€šè¿‡åˆ†å±‚æ‰§è¡Œå­—èŠ‚ç å’Œæœºå™¨ç ä»¥ä¿è¯ä»£ç æ‰§è¡Œçš„æ•ˆç‡ï¼›</p>
<h2 data-id="heading-3">æ‰§è¡Œ</h2>
<p>ç”Ÿæˆåçš„æœºå™¨ç å’Œå­—èŠ‚ç å…¨éƒ¨å­˜åœ¨å†…å­˜é‡Œï¼Œå½“ä¸€ä¸ªæ‰§è¡Œå‘½ä»¤æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°åï¼ŒV8 runtime ä¼šæ£€æµ‹æ˜¯è°ƒå–æœºå™¨ç è¿˜æ˜¯å­—èŠ‚ç ï¼Œå¹¶æŠŠåœ°å€ä¿¡æ¯ç»™åˆ°Cpuï¼Œæ¥æ‰§è¡Œè¯¥åœ°å€çš„æŒ‡ä»¤</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆšåˆšï¼ŒClaude Opus 4.6 å’Œ GPT-5.3-Codex åŒæ—¶ç‚¸åœºï¼AI ç¼–ç¨‹è¦å˜å¤©äº†]]></title>    <link>https://juejin.cn/post/7603263490341945353</link>    <guid>https://juejin.cn/post/7603263490341945353</guid>    <pubDate>2026-02-06T02:39:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603263490341945353" data-draft-id="7603263490341814281" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆšåˆšï¼ŒClaude Opus 4.6 å’Œ GPT-5.3-Codex åŒæ—¶ç‚¸åœºï¼AI ç¼–ç¨‹è¦å˜å¤©äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,ç¨‹åºå‘˜,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-06T02:39:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆšåˆšï¼ŒClaude Opus 4.6 å’Œ GPT-5.3-Codex åŒæ—¶ç‚¸åœºï¼AI ç¼–ç¨‹è¦å˜å¤©äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-06T02:39:54.000Z" title="Fri Feb 06 2026 02:39:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚</p>
<p>ä»Šå¤©å‡Œæ™¨ï¼ŒAI åœˆåˆåŒå’ç‚¸äº†ã€‚Anthropic å’Œ OpenAI å‡ ä¹åŒæ—¶å‘å¸ƒäº†è‡ªå®¶çš„æœ€æ–°å¤§æ¨¡å‹ â€”â€” Claude Opus 4.6 å’Œ GPT-5.3-Codexï¼Œä¸­é—¨å¯¹ç‹™ï¼Œç«è¯å‘³åè¶³ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260206092008146.png" alt="" loading="lazy"/></p>
<p>è¿™æ¬¡ä¸¤å®¶æ˜¯çœŸå¾€ç¼–ç¨‹å’Œå®é™…å·¥ä½œèƒ½åŠ›ä¸Šå·äº†ï¼Œä¸æ˜¯é‚£ç§ â€œè·‘åˆ†å‡äº† 2 ä¸ªç‚¹â€ å°±å‘ç¯‡åšå®¢çš„æ•·è¡æ›´æ–°ã€‚</p>
<p>ä¸‹é¢æˆ‘å¸¦å¤§å®¶å¿«é€Ÿäº†è§£ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹åˆ°åº•æ›´æ–°äº†ä»€ä¹ˆï¼Ÿå¯¹æˆ‘ä»¬ç¨‹åºå‘˜å’Œ AI ç©å®¶æ¥è¯´æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<h2 data-id="heading-0">Claude Opus 4.6ï¼šæ›´èªæ˜ã€æ›´èƒ½å¹²ã€æ›´æŒä¹…</h2>
<p>å…ˆè¯´ Anthropic è¿™è¾¹ã€‚Claude Opus 4.6 æ˜¯ç›®å‰ Claude å®¶æ—æœ€å¼ºçš„æ¨¡å‹ï¼Œä¹‹å‰ç”¨ Claude Opus 4.5 ç¼–ç¨‹å°±å·²ç»è®©æˆ‘æ„Ÿè§‰ â€œAI å†™ä»£ç æ— æ‰€ä¸èƒ½â€ äº†ï¼Œè€Œè¿™æ¬¡çš„ Opus 4.6 åœ¨å¤šé¡¹è¯„ä¼°ä¸­å‡å¤„äºæœ€å…ˆè¿›æ°´å¹³ï¼ŒåŒ…æ‹¬æ™ºèƒ½ç¼–ç ã€å¤šå­¦ç§‘æ¨ç†ã€çŸ¥è¯†å·¥ä½œå’Œæ™ºèƒ½æœç´¢ç­‰ã€‚</p>
<p>å…‰çœ‹è¿™ä¸ªè·‘åˆ†æˆ‘å°±è´¼æ¿€åŠ¨äº†ï¼</p>
<p><img src="https://pic.yupi.icu/1/1770339059467-24cdc13f-957e-4ff8-bee2-7b8625d0c4a6.png" alt="" loading="lazy"/></p>
<p>å®é™…ä¸Šæ‰‹åï¼Œæˆ‘æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼š<strong>å¹²æ´»æ›´é è°±äº†</strong>ã€‚</p>
<p>å…·ä½“æ›´æ–°äº†è¿™äº›ï¼š</p>
<p>1ï¼‰ç¼–ç¨‹èƒ½åŠ›å¤§å¹…æå‡ï¼šOpus 4.6 èƒ½æ›´å¥½åœ°åœ¨å¤§å‹ä»£ç åº“ä¸­å·¥ä½œï¼Œè°ƒè¯•å’Œä»£ç å®¡æŸ¥èƒ½åŠ›å¢å¼ºï¼Œå†™å®Œä»£ç è¿˜èƒ½è‡ªå·±æ£€æŸ¥é”™è¯¯ã€‚</p>
<p>æˆ‘å®æµ‹äº†ä¸€æ³¢ï¼Œè®©ä¹‹å‰çš„ Opus 4.5 å’Œæ–°å‡ºçš„ Opus 4.6 åŒæ—¶å¼€å‘ä¸€ä¸ªã€Œèšåˆæœç´¢å¼•æ“ã€é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·ä½ å¸®æˆ‘å¼€å‘ä¸€ä¸ªèšåˆæœç´¢ç½‘ç«™ï¼ŒåŒ…å«å®Œæ•´çš„å‰ç«¯å’Œåç«¯ï¼Œèƒ½å¤ŸåŒæ—¶ä»å¤šä¸ªä¸åŒçš„æœç´¢å¼•æ“æœç´¢å’Œèšåˆç»“æœã€‚
åº”è¯¥å…ˆåš MVP æœ€å°å¯è¡Œäº§å“ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦å‘æˆ‘ç¡®è®¤ã€ä¸éœ€è¦æˆ‘æä¾› API Keyï¼Œä½ å¿…é¡»ç¡®ä¿åŠŸèƒ½æ­£å¸¸å¯ç”¨ã€‚

</code></pre>
<p><img src="https://pic.yupi.icu/1/image-20260206095821042.png" alt="" loading="lazy"/></p>
<p>å‡ åˆ†é’Ÿåï¼ŒäºŒè€…éƒ½å®Œæˆäº†ä»»åŠ¡ï¼š</p>
<p><img src="https://pic.yupi.icu/1/image-20260206100013366.png" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯å¯¹æ¯”ä¸€ä¸‹å®é™…æœç´¢æ•ˆæœï¼ŒOpus 4.5 å®Œè´¥ï¼Œçœ‹åˆ°è¿™æˆ‘å°±æ”¾å¿ƒäº†ï¼Œä»¥åæˆ‘ç”¨ AI ç¼–ç¨‹ä¼°è®¡ Bug æ›´å°‘äº†~</p>
<p><img src="https://pic.yupi.icu/1/image-20260206100155670.png" alt="" loading="lazy"/></p>
<p>2ï¼‰100 ä¸‡ token ä¸Šä¸‹æ–‡çª—å£ã€‚Opus ç³»åˆ—ç¬¬ä¸€æ¬¡æ”¯æŒè¿™ä¹ˆé•¿çš„ä¸Šä¸‹æ–‡ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä½ å¯ä»¥ä¸€æ¬¡æ€§ç»™å®ƒä¸¢ä¸€å¤§å †æ–‡ä»¶å’Œä»£ç ï¼Œå®ƒéƒ½èƒ½è®°ä½å¹¶ç†è§£ï¼Œä¸ä¼šåƒä»¥å‰é‚£æ ·èŠç€èŠç€å°±å¤±å¿†äº†ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘æœ€æœ€æœ€æœŸå¾…çš„ç‰¹æ€§ï¼Œå¤æ‚çš„å‰åç«¯é¡¹ç›®ä¹Ÿå¯ä»¥åœ¨åŒä¸€å¯¹è¯æ¡†ä¸­ä¸€æŠŠæ¢­äº†ï¼ä¸ç”¨æ¥æ¥å›å›æ€»ç»“ä¸Šä¸‹æ–‡å’Œæ–°å¼€å¯¹è¯æ¡†ã€‚</p>
<p>èµ£ï¼Œå‡†å¤‡å˜å˜çƒ§ Tokens äº†ã€‚</p>
<p>3ï¼‰128k è¾“å‡º tokenã€‚è¾“å‡ºé•¿åº¦ç¿»å€ï¼Œæ„å‘³ç€ Claude å¯ä»¥ä¸€æ¬¡æ€§ç”Ÿæˆæ›´é•¿çš„ä»£ç å’Œæ–‡æ¡£ï¼Œä¸ç”¨å†æ‹†æˆå¥½å‡ æ¬¡è¯·æ±‚äº†ã€‚</p>
<p>4ï¼‰è‡ªé€‚åº”æ€è€ƒã€‚ä»¥å‰å¼€å‘è€…åªèƒ½æ‰‹é€‰å¼€å¯æˆ–å…³é—­æ·±åº¦æ¨ç†ï¼Œç°åœ¨ Claude ä¼šè‡ªåŠ¨åˆ¤æ–­è¿™ä¸ªé—®é¢˜éœ€ä¸éœ€è¦æ·±åº¦æ€è€ƒã€‚ç®€å•é—®é¢˜ç§’å›ï¼Œå¤æ‚é—®é¢˜æ…¢æ…¢æƒ³ï¼Œæ™ºèƒ½è°ƒèŠ‚ï¼Œçœæ—¶çœé’±ã€‚</p>
<p>5ï¼‰ä¸Šä¸‹æ–‡å‹ç¼©ã€‚ä»¥å‰è·‘é•¿ä»»åŠ¡çš„æ—¶å€™ï¼ŒAI ç»å¸¸ä¼šæ’åˆ°ä¸Šä¸‹æ–‡é•¿åº¦çš„å¤©èŠ±æ¿ã€‚ç°åœ¨ Claude èƒ½è‡ªåŠ¨å‹ç¼©å’Œæ€»ç»“ä¹‹å‰çš„å¯¹è¯å†…å®¹ï¼Œè®©é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ä¸ä¼šä¸­é€”ç¿»è½¦ã€‚æ­é… 100 ä¸‡ token ä¸Šä¸‹æ–‡ï¼Œä¸æ•¢æƒ³è±¡æœ‰å¤šæŒä¹…ï¼</p>
<p>6ï¼‰Claude Code æ”¯æŒå¤šæ™ºèƒ½ä½“åä½œã€‚ä½ å¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ª AI Agent å¹¶è¡Œå·¥ä½œï¼Œæ¯”å¦‚è®©å‡ ä¸ª Agent åŒæ—¶å®¡æŸ¥ä»£ç åº“çš„ä¸åŒéƒ¨åˆ†ï¼Œæ•ˆç‡ç›´æ¥ç¿»å€ã€‚</p>
<p>7ï¼‰Claude in Excel å¤§å‡çº§ã€‚ç°åœ¨èƒ½å¤„ç†æ›´å¤æ‚çš„é•¿æ—¶é—´ä»»åŠ¡ï¼Œæ”¯æŒæ•°æ®é€è§†è¡¨ã€å›¾è¡¨ä¿®æ”¹ã€æ¡ä»¶æ ¼å¼ã€æ•°æ®éªŒè¯ç­‰ï¼Œè¿˜èƒ½ä¸€æ¬¡æ€§å¤„ç†å¤šæ­¥éª¤æ“ä½œã€‚</p>
<p><img src="https://pic.yupi.icu/1/6984ae18765ce9ada0768cfc_ClaudeExcel-Blog-Hero-Desktop.png" alt="" loading="lazy"/></p>
<p>8ï¼‰Claude in PowerPoint ä¸Šçº¿ã€‚èƒ½è¯»å–ä½ å·²æœ‰çš„æ¨¡æ¿ã€å­—ä½“å’Œæ¯ç‰ˆï¼Œä¿æŒå“ç‰Œé£æ ¼ä¸€è‡´ï¼Œç„¶åç›´æ¥å¸®ä½ ç”Ÿæˆå®Œæ•´çš„ PPTã€‚</p>
<p><img src="https://pic.yupi.icu/1/1770339189972-c3c8b2e7-234b-4089-8b69-d172b523d5d4.png" alt="" loading="lazy"/></p>
<p>å¤§å®¶å¯¹ Opus 4.6 ä¹Ÿæ˜¯ä¸€è‡´å¥½è¯„ï¼Œä¸å°‘æ—©æœŸæµ‹è¯•çš„å…¬å¸éƒ½è¡¨ç¤º â€œç”¨äº†å›ä¸å»â€ï¼ŒCursor å®˜æ–¹è¯´ Opus 4.6 æ˜¯ä»–ä»¬å†…éƒ¨é•¿ä»»åŠ¡æµ‹è¯•ä¸­çš„æœ€å¼ºæ¨¡å‹ï¼ŒReplit è¯´å®ƒçš„ä»»åŠ¡æ‹†è§£å’Œå¹¶è¡Œè§„åˆ’èƒ½åŠ›æœ‰äº†å·¨å¤§é£è·ƒã€‚</p>
<h2 data-id="heading-1">GPT-5.3-Codexï¼šOpenAI çš„ç¼–ç¨‹æ€æ‰‹é”</h2>
<p>å†çœ‹ OpenAI è¿™è¾¹ã€‚è¿™æ¬¡å‘å¸ƒçš„ GPT-5.3-Codexï¼Œå‰‘æŒ‡ <strong>æœ€å¼ºç¼–ç¨‹ Agent</strong>ï¼Œè€Œä¸”ä¸åªæ˜¯å†™ä»£ç ï¼Œè¿˜èƒ½åƒä½ çš„åŒäº‹ä¸€æ ·è¾¹å¹²æ´»è¾¹å’Œä½ æ²Ÿé€šã€‚</p>
<p>ç›¸æ¯” Claude å®˜æ–¹è¿å‘å¥½å‡ ä¸ªå¸–å­ä»‹ç»è‡ªå®¶æ–°æ¨¡å‹ï¼ŒOpenAI å®˜æ–¹è¿™è¾¹åˆ™ä½è°ƒä¸å°‘ã€‚Sam Altman äº²è‡ªåœ¨ X ä¸Šå–Šè¯ï¼š</p>
<p><img src="https://pic.yupi.icu/1/1770340355704-c9569d19-a5f5-4e46-98c4-b6b75dab01bc-20260206093449865.png" alt="" loading="lazy"/></p>
<p>æ¥çœ‹çœ‹å…·ä½“æœ‰ä»€ä¹ˆï¼š</p>
<p>1ï¼‰ç¼–ç¨‹è·‘åˆ†å…¨é¢é¢†å…ˆã€‚SWE-Bench Pro 57% å’Œ TerminalBench 2.0 77%ï¼Œç¼–ç¨‹ç›¸å…³åŸºå‡†éƒ½åˆ›äº†æ–°é«˜ã€‚å°¤å…¶æ˜¯ OSWorldï¼ˆæµ‹è¯• AI åœ¨çœŸå®æ¡Œé¢ç¯å¢ƒä¸­å®Œæˆä»»åŠ¡çš„èƒ½åŠ›ï¼‰ç›´æ¥ä»ä¸Šä¸€ä»£çš„ 38.2% é£™åˆ° 64.7%ï¼Œè¿™ä¸ªæå‡å¹…åº¦ç›¸å½“ç‚¸è£‚ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260206094035858.png" alt="" loading="lazy"/></p>
<p>2ï¼‰é€Ÿåº¦æ›´å¿«ã€æ›´çœé’±ã€‚å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼Œtoken æ¶ˆè€—é‡ä¸åˆ°ä¸Šä¸€ä»£ï¼ˆ5.2-Codexï¼‰çš„ä¸€åŠï¼Œè€Œä¸”æ¯ä¸ª token å¤„ç†é€Ÿåº¦è¿˜å¿«äº† 25%ã€‚åˆå¿«åˆçœï¼Œè¿™æ‰æ˜¯å®å®åœ¨åœ¨çš„ä½“éªŒæå‡ã€‚</p>
<p>3ï¼‰è¾¹å¹²æ´»è¾¹æ±‡æŠ¥ã€‚ä»¥å‰ä½ ä¸¢ä¸€ä¸ªä»»åŠ¡ç»™ AIï¼Œåªèƒ½å¹²ç­‰ç»“æœã€‚ç°åœ¨ GPT-5.3-Codex ä¼šåœ¨å·¥ä½œè¿‡ç¨‹ä¸­å®æ—¶å‘Šè¯‰ä½ å®ƒåœ¨åšä»€ä¹ˆã€åšåˆ°å“ªäº†ï¼Œä½ éšæ—¶å¯ä»¥æ’å˜´è°ƒæ•´æ–¹å‘ï¼Œå°±åƒçœŸçš„åœ¨å’Œä¸€ä¸ªåŒäº‹åä½œä¸€æ ·ã€‚</p>
<p>4ï¼‰è¶…å¼ºçš„å‰ç«¯å¼€å‘èƒ½åŠ›ã€‚å®˜æ–¹ç›´æ¥å±•ç¤ºäº†è®©å®ƒåšèµ›è½¦æ¸¸æˆå’Œæ½œæ°´æ¸¸æˆçš„æ•ˆæœï¼Œå®Œæ•´åº¦é«˜å¾—ç¦»è°±ï¼Œæœ‰å¤šä¸ªåœ°å›¾ã€é“å…·ç³»ç»Ÿå’Œå®Œæ•´çš„æ¸¸æˆé€»è¾‘ã€‚</p>
<p><img src="https://pic.yupi.icu/1/image-20260206094133069.png" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆæ™®é€šç½‘é¡µæ—¶ AI ä¹Ÿæ›´æ‡‚ä½ çš„æ„å›¾äº†ï¼Œé»˜è®¤å°±èƒ½ç»™ä½ åšå‡ºåŠŸèƒ½æ›´ä¸°å¯Œã€è®¾è®¡æ›´åˆç†çš„é¡µé¢ã€‚</p>
<p>5ï¼‰ç”µè„‘æ“ä½œèƒ½åŠ›å¢å¼ºã€‚ä¸åªæ˜¯å†™ä»£ç ï¼Œå®ƒè¿˜èƒ½åƒäººä¸€æ ·æ“ä½œç”µè„‘å®Œæˆå„ç§ä»»åŠ¡ï¼Œæ¯”å¦‚åš PPTã€åˆ†ææ•°æ®ã€å¤„ç†è¡¨æ ¼ï¼ŒæŠŠç¼–ç¨‹ Agent çš„è¾¹ç•Œæ‰©å±•åˆ°äº†å…¨èƒ½æ‰“å·¥ Agentã€‚</p>
<p>6ï¼‰è‡ªå·±è®­ç»ƒè‡ªå·±ã€‚OpenAI å›¢é˜Ÿè¯´ GPT-5.3-Codex æ˜¯ç¬¬ä¸€ä¸ª <strong>å‚ä¸äº†è‡ªèº«åˆ›é€ </strong> çš„æ¨¡å‹ã€‚å›¢é˜Ÿç”¨å®ƒçš„æ—©æœŸç‰ˆæœ¬æ¥è°ƒè¯•è®­ç»ƒè¿‡ç¨‹ã€ç®¡ç†éƒ¨ç½²ã€åˆ†ææµ‹è¯•ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒAI åœ¨åŠ é€Ÿ AI è‡ªèº«çš„è¿›åŒ–ï¼Œä»¥åçš„è¿›åŒ–é€Ÿåº¦è‚¯å®šä¼šè¶Šæ¥è¶Šå¿«ã€‚</p>
<p>7ï¼‰ç½‘ç»œå®‰å…¨èƒ½åŠ›å¤§å¹…å¢å¼ºã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ªè¢« OpenAI å½’ç±»ä¸ºé«˜èƒ½åŠ›ç½‘ç»œå®‰å…¨æ¨¡å‹çš„ç‰ˆæœ¬ï¼Œèƒ½ä¸»åŠ¨å‘ç°ä»£ç æ¼æ´ã€‚OpenAI åŒæ—¶æ‰¿è¯ºæŠ•å…¥ 1000 ä¸‡ç¾å…ƒ API é¢åº¦æ”¯æŒç½‘ç»œé˜²å¾¡ç ”ç©¶ã€‚</p>
<h2 data-id="heading-2">æˆ‘çš„çœ‹æ³•</h2>
<p>è¿™æ¬¡ä¸¤å®¶å·¨å¤´åŒæ—¶å‘å¸ƒæ–°æ¨¡å‹ï¼Œäº’ç›¸è´´è„¸å¼€å¤§ï¼Œå¯¹æˆ‘ä»¬ç”¨æˆ·æ¥è¯´æ˜¯å¥½äº‹ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹éƒ½åœ¨å¾€ <strong>å®ç”¨æ–¹å‘</strong> çŒ›å·ï¼Œæ˜¯çœŸçš„æƒ³è®©ä½ æ—¥å¸¸å·¥ä½œä¸­ç”¨å¾—ä¸Šã€‚</p>
<p>è¿™ä¸¤ä¸ªå¤§æ¨¡å‹åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<p>ç®€å•å¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<ul>
<li>Claude Opus 4.6 æ˜¯å…­è¾¹å½¢æˆ˜å£«ï¼Œç¼–ç¨‹ã€åŠå…¬ã€ç ”ç©¶æ ·æ ·è¡Œï¼Œç‰¹åˆ«æ˜¯åœ¨ Excelã€PowerPoint è¿™äº›åŠå…¬åœºæ™¯é‡Œåšäº†å¾ˆæ·±çš„æ•´åˆã€‚</li>
<li>GPT-5.3-Codex æŠŠç¼–ç¨‹èƒ½åŠ›æ‹‰æ»¡ï¼Œåœ¨ä»£ç ç”Ÿæˆã€ä»»åŠ¡æ‰§è¡Œå’Œäººæœºåä½œä¸Šæ‰“å‡ºäº†å·®å¼‚åŒ–ä¼˜åŠ¿ã€‚</li>
</ul>
<p>ä¸è¿‡æˆ‘ä¼°è®¡ç½‘ç»œå’Œä»·æ ¼å°±å·²ç»åŠé€€ä¸€å¤§æ³¢å›½å†…ç”¨æˆ·äº†ï¼Œå¦‚æœä½ åªæ˜¯æ—¥å¸¸å­¦ä¹ ã€æˆ–è€…åšåšå·¥å…·ç±»å°é¡¹ç›®ï¼Œä¹Ÿä¸å¿…ç›²ç›®è¿½æ±‚å›½å¤–çš„å¤§æ¨¡å‹ã€‚å¾ˆå¿« DeepSeek V4 ç­‰ä¸€ç³»åˆ—å›½äº§å¤§æ¨¡å‹åº”è¯¥å°±è¦å‡ºæ¥äº†ï¼ŒæœŸå¾…ä¸€æ³¢~</p>
<h2 data-id="heading-3">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a><br/>
ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a><br/>
âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a><br/>
ğŸ“– AI å­¦ä¹ æŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fai-guide" target="_blank" title="https://github.com/liyupi/ai-guide" ref="nofollow noopener noreferrer">é±¼çš® AI å¯¼èˆª</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin 2.2.20 æŠ€æœ¯å‰ç»ï¼šWebAssembly æ”¯æŒçš„æ·±åº¦è§£æä¸æœªæ¥å›¾æ™¯]]></title>    <link>https://juejin.cn/post/7603352061468246058</link>    <guid>https://juejin.cn/post/7603352061468246058</guid>    <pubDate>2026-02-05T16:54:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603352061468246058" data-draft-id="7603352061468229674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin 2.2.20 æŠ€æœ¯å‰ç»ï¼šWebAssembly æ”¯æŒçš„æ·±åº¦è§£æä¸æœªæ¥å›¾æ™¯"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-05T16:54:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç å“¥_å¸¸"/> <meta itemprop="url" content="https://juejin.cn/user/705230023172650"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin 2.2.20 æŠ€æœ¯å‰ç»ï¼šWebAssembly æ”¯æŒçš„æ·±åº¦è§£æä¸æœªæ¥å›¾æ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/705230023172650/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç å“¥_å¸¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T16:54:20.000Z" title="Thu Feb 05 2026 16:54:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æ³¨ï¼šæœ¬æ–‡ä¸ºæŠ€æœ¯å‰ç»æ€§åˆ†æã€‚æˆªè‡³2024å¹´ä¸­ï¼ŒKotlin å®˜æ–¹æœ€æ–°ç¨³å®šç‰ˆä¸º 1.9.20ï¼ŒKotlin 2.0.0 å°šæœªå‘å¸ƒã€‚æ‰€è°“â€œ2.2.20"ç³»åŸºäº Kotlin/Wasm å½“å‰å®éªŒè¿›å±•ï¼ˆKotlin 1.8.20+ï¼‰ä¸ JetBrains è·¯çº¿å›¾çš„åˆç†æ¨æ¼”ï¼Œæ—¨åœ¨æ¢è®¨ Kotlin æ·±åº¦é›†æˆ WebAssembly çš„æŠ€æœ¯è·¯å¾„ä¸ç”Ÿæ€ä»·å€¼ã€‚å®é™…åŠŸèƒ½è¯·ä»¥ JetBrains å®˜æ–¹å‘å¸ƒä¸ºå‡†ã€‚</em></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä½• Kotlin éœ€è¦ WebAssemblyï¼Ÿâ€”â€” æˆ˜ç•¥èƒŒæ™¯</h2>
<p>WebAssemblyï¼ˆWasmï¼‰å·²ä»â€œæµè§ˆå™¨è¡¥å……æŠ€æœ¯â€æ¼”è¿›ä¸ºè·¨å¹³å°è¿è¡Œæ—¶åŸºçŸ³ï¼ˆWASIã€Serverlessã€è¾¹ç¼˜è®¡ç®—ï¼‰ã€‚å¯¹ Kotlin è€Œè¨€ï¼š</p>
<ul>
<li><strong>çªç ´ JavaScript æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šè®¡ç®—å¯†é›†å‹åœºæ™¯ï¼ˆå›¾åƒå¤„ç†ã€æ¸¸æˆé€»è¾‘ã€ç§‘å­¦è®¡ç®—ï¼‰éœ€æ¥è¿‘åŸç”Ÿçš„æ‰§è¡Œæ•ˆç‡</li>
<li><strong>ç»Ÿä¸€å¤šå¹³å°æˆ˜ç•¥</strong>ï¼šKotlin Multiplatformï¼ˆKMPï¼‰éœ€è¦†ç›– Web ç«¯é«˜æ€§èƒ½åœºæ™¯ï¼Œè¡¥å…¨â€œKotlin/JSï¼ˆå…¼å®¹æ€§ï¼‰ + Kotlin/Wasmï¼ˆæ€§èƒ½ï¼‰â€åŒè½¨æ–¹æ¡ˆ</li>
<li><strong>æ‹¥æŠ±ç°ä»£ Web æ ‡å‡†</strong>ï¼šWasm GC Proposalï¼ˆ2023å¹´åº•è¿›å…¥ Phase 4ï¼‰ä¸ºå¸¦ GC è¯­è¨€ï¼ˆå¦‚ Kotlinï¼‰æä¾›åŸç”Ÿå¯¹è±¡æ¨¡å‹æ”¯æŒï¼Œæ¶ˆé™¤ JS äº’æ“ä½œå¼€é”€</li>
</ul>
<blockquote>
<p>ğŸ’¡ å…³é”®è½¬æŠ˜ï¼šKotlin 1.8.20 é¦–æ¬¡å¼•å…¥å®éªŒæ€§ <code>wasm</code> ç›®æ ‡ï¼›1.9.20 ä¼˜åŒ–å†…å­˜ç®¡ç†ä¸ JS äº’æ“ä½œã€‚æœ¬æ–‡å‡è®¾åœ¨â€œ2.2.20"ä¸­ï¼ŒKotlin/Wasm è¾¾åˆ° <strong>Production-Ready</strong> çº§åˆ«ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£æï¼ˆåŸºäºå½“å‰è·¯çº¿å›¾æ¨æ¼”ï¼‰</h2>
<h3 data-id="heading-2">1. ç¼–è¯‘å™¨æ¶æ„ï¼šä» IR åˆ° Wasm GC</h3>
<ul>
<li><strong>ç»Ÿä¸€ä¸­é—´è¡¨ç¤ºï¼ˆIRï¼‰</strong>ï¼šKotlin ç¼–è¯‘å™¨å‰ç«¯ç”Ÿæˆå¹³å°æ— å…³ IRï¼Œåç«¯é’ˆå¯¹ Wasm GC ç”Ÿæˆé«˜æ•ˆå­—èŠ‚ç </li>
<li><strong>Wasm GC æ·±åº¦é›†æˆ</strong>ï¼š
<ul>
<li>Kotlin å¯¹è±¡ â†’ Wasm Struct/Arrayï¼ˆéçº¿æ€§å†…å­˜æ¨¡æ‹Ÿï¼‰</li>
<li>åç¨‹çŠ¶æ€æœº â†’ Wasm å¼•ç”¨ç±»å‹ï¼ˆé¿å… JS å †æ‹·è´ï¼‰</li>
<li>æ ‡å‡†åº“ç²¾ç®€ï¼šä»…ä¿ç•™ <code>kotlin.wasm</code> æ¨¡å—å¿…è¦ APIï¼Œä½“ç§¯è¾ƒ Kotlin/JS å‡å°‘ 40%+</li>
</ul>
</li>
<li><strong>åŒæ¨¡å¼è¾“å‡º</strong>ï¼š
<ul>
<li><code>wasm32-unknown-wasi</code>ï¼šæœåŠ¡ç«¯/è¾¹ç¼˜è®¡ç®—åœºæ™¯</li>
<li><code>wasm32-unknown-emscripten</code>ï¼šæµè§ˆå™¨ç¯å¢ƒï¼ˆå« JS èƒ¶æ°´ä»£ç ä¼˜åŒ–ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">2. å†…å­˜ä¸å¹¶å‘æ¨¡å‹é©æ–°</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Kotlin/JS</th><th>Kotlin/Wasmï¼ˆæ¨æ¼”ï¼‰</th></tr></thead><tbody><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>ä¾èµ– JS GC</td><td>ç›´æ¥ä½¿ç”¨ Wasm GCï¼ˆä¸å®¿ä¸»éš”ç¦»ï¼‰</td></tr><tr><td><strong>åç¨‹è°ƒåº¦</strong></td><td>åŸºäº JS Promise</td><td>åŸç”Ÿ Wasm å¼‚æ­¥ï¼ˆ<code>asyncify</code> ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹æ”¯æŒ</strong></td><td>æ— ï¼ˆå•çº¿ç¨‹ï¼‰</td><td>Wasm Threads Proposalï¼ˆSharedArrayBufferï¼‰</td></tr><tr><td><strong>å¯åŠ¨å»¶è¿Ÿ</strong></td><td>é«˜ï¼ˆJS è§£æï¼‰</td><td>ä½ï¼ˆäºŒè¿›åˆ¶é¢„ç¼–è¯‘ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-4">3. æ— ç¼äº’æ“ä½œè®¾è®¡</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Kotlin ä»£ç ï¼ˆç¼–è¯‘ä¸º Wasm æ¨¡å—ï¼‰</span>
<span class="hljs-meta">@WasmExport</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processImage</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">ByteArray</span>)</span></span>: ByteArray {
    <span class="hljs-comment">// é«˜æ€§èƒ½å›¾åƒå¤„ç†ï¼ˆç›´æ¥æ“ä½œ Wasm çº¿æ€§å†…å­˜ï¼‰</span>
    <span class="hljs-keyword">return</span> applyFilter(<span class="hljs-keyword">data</span>)
}

<span class="hljs-meta">@WasmImport(<span class="hljs-string">"env"</span>, <span class="hljs-string">"logMessage"</span>)</span>
<span class="hljs-keyword">external</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">log</span><span class="hljs-params">(msg: <span class="hljs-type">String</span>)</span></span>

<span class="hljs-comment">// JS è°ƒç”¨ç¤ºä¾‹ï¼ˆæµè§ˆå™¨ï¼‰</span>
<span class="hljs-keyword">const</span> module = await WebAssembly.instantiateStreaming(fetch(<span class="hljs-string">'app.wasm'</span>));
module.exports.processImage(imageBuffer); <span class="hljs-comment">// é›¶æ‹·è´ä¼ é€’ ArrayBuffer</span>
</code></pre>
<ul>
<li><strong>æ™ºèƒ½èƒ¶æ°´å±‚</strong>ï¼šç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆæœ€å°åŒ– JS èƒ¶æ°´ä»£ç ï¼ˆè¾ƒ Emscripten å‡å°‘ 70%ï¼‰</li>
<li><strong>ç±»å‹å®‰å…¨æ¡¥æ¥</strong>ï¼šKotlin <code>String</code> â†” Wasm UTF-8 ç¼–ç ï¼Œé›†åˆç±»å‹è‡ªåŠ¨è½¬æ¢</li>
<li><strong>å¼‚å¸¸ä¼ é€’</strong>ï¼šKotlin å¼‚å¸¸ â†’ Wasm Exception Handling Proposalï¼ˆé¿å… fatal abortï¼‰</li>
</ul>
<h3 data-id="heading-5">4. å·¥å…·é“¾ä¸å¼€å‘è€…ä½“éªŒ</h3>
<ul>
<li><strong>Gradle æ’ä»¶å¢å¼º</strong>ï¼š
<pre><code class="hljs language-gradle" lang="gradle">kotlin {
    wasm("wasmBrowser") {
        browser()
        binaries.executable() // ç”Ÿæˆ .wasm + .js èƒ¶æ°´
    }
}
</code></pre>
</li>
<li><strong>è°ƒè¯•æ”¯æŒ</strong>ï¼šSource Map æ˜ å°„è‡³ Kotlin æºç ï¼ŒChrome DevTools ç›´æ¥æ–­ç‚¹è°ƒè¯•</li>
<li><strong>æ€§èƒ½åˆ†æ</strong>ï¼šé›†æˆ Wasm Profilerï¼Œå¯è§†åŒ–åç¨‹è°ƒåº¦ä¸å†…å­˜åˆ†é…çƒ­ç‚¹</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€å®æˆ˜ä»·å€¼ï¼šä½•æ—¶é€‰æ‹© Kotlin/Wasmï¼Ÿ</h2>
<p>âœ… <strong>æ¨èåœºæ™¯</strong></p>
<ul>
<li>æ¸¸æˆå¼•æ“é€»è¾‘ï¼ˆGodot æ’ä»¶ã€WebGL æ¸²æŸ“åç«¯ï¼‰</li>
<li>éŸ³è§†é¢‘ç¼–è§£ç ï¼ˆFFmpeg Kotlin å°è£…ï¼‰</li>
<li>åŠ å¯†/åŒºå—é“¾è®¡ç®—ï¼ˆæ•æ„Ÿé€»è¾‘éš”ç¦»æ‰§è¡Œï¼‰</li>
<li>KMP å…±äº«ä¸šåŠ¡é€»è¾‘ï¼ˆç§»åŠ¨ç«¯ + Web é«˜æ€§èƒ½æ¨¡å—ç»Ÿä¸€ï¼‰</li>
</ul>
<p>âŒ <strong>æš‚ä¸é€‚ç”¨</strong></p>
<ul>
<li>ç®€å• DOM æ“ä½œï¼ˆKotlin/JS æ›´è½»é‡ï¼‰</li>
<li>é‡åº¦ä¾èµ–æµè§ˆå™¨ API çš„åº”ç”¨ï¼ˆéœ€ç­‰å¾… Wasm Interface Types æ™®åŠï¼‰</li>
<li>ä½é…è®¾å¤‡ï¼ˆWasm GC æµè§ˆå™¨æ”¯æŒéœ€ Chromium 119+ / Firefox 115+ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€æŒ‘æˆ˜ä¸ç¤¾åŒºæ¼”è¿›</h2>

























<table><thead><tr><th>æŒ‘æˆ˜</th><th>åº”å¯¹è·¯å¾„ï¼ˆJetBrains ç¤¾åŒºåŠ¨æ€ï¼‰</th></tr></thead><tbody><tr><td><strong>æµè§ˆå™¨æ”¯æŒç¢ç‰‡åŒ–</strong></td><td>æä¾›é™çº§æ–¹æ¡ˆï¼šWasm æ¨¡å— + Kotlin/JS å›é€€</td></tr><tr><td><strong>è°ƒè¯•ä½“éªŒå¾…ä¼˜åŒ–</strong></td><td>ä¸ Chrome DevTools å›¢é˜Ÿåˆä½œå¢å¼º Source Map æ”¯æŒ</td></tr><tr><td><strong>ç”Ÿæ€åº“è¿ç§»</strong></td><td>kotlinx-wasm æ ‡å‡†åº“æ‰©å±•ï¼ˆåç¨‹ã€åºåˆ—åŒ–ä¸“é¡¹ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>æ„å»ºä½“ç§¯</strong></td><td>Tree-shaking æ·±åº¦ä¼˜åŒ– + æŒ‰éœ€åŠ è½½æ¨¡å—</td></tr></tbody></table>
<blockquote>
<p>ğŸŒ ç¤¾åŒºåŠ¨æ€ï¼šKotlin/Wasm å·²åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJetBrains%2Fkotlin-wasm-showcase" target="_blank" title="https://github.com/JetBrains/kotlin-wasm-showcase" ref="nofollow noopener noreferrer">kotlin-wasm-showcase</a> æä¾›å›¾åƒæ»¤é•œã€ç‰©ç†å¼•æ“ç­‰ Demoï¼›Compose Multiplatform æœªæ¥æˆ–æ”¯æŒ Wasm æ¸²æŸ“åç«¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">äº”ã€ç»“è¯­ï¼šä¸æ­¢äºâ€œç¼–è¯‘åˆ° Wasmâ€</h2>
<p>Kotlin å¯¹ WebAssembly çš„æ‹¥æŠ±ï¼Œæœ¬è´¨æ˜¯ <strong>â€œç”¨å·¥ç¨‹åŒ–æ€ç»´é‡æ„ Web æ€§èƒ½è¾¹ç•Œâ€</strong>ï¼š</p>
<ul>
<li>å¯¹å¼€å‘è€…ï¼šä¿ç•™ Kotlin çš„ç©ºå®‰å…¨ã€åç¨‹ç­‰ç”Ÿäº§åŠ›ç‰¹æ€§ï¼Œæ— ç¼åˆ‡å…¥é«˜æ€§èƒ½åœºæ™¯</li>
<li>å¯¹ç”Ÿæ€ï¼šå¼ºåŒ– Kotlin Multiplatform â€œä¸€æ¬¡ç¼–å†™ï¼Œå…¨ç«¯é«˜æ€§èƒ½è¿è¡Œâ€çš„æ„¿æ™¯</li>
<li>å¯¹è¡Œä¸šï¼šæ¨åŠ¨ Wasm ä»â€œC/Rust ä¸“å±â€èµ°å‘ä¸»æµ JVM è¯­è¨€å‹å¥½ç”Ÿæ€</li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.jetbrains.com%2Fkotlin%2F" target="_blank" title="https://blog.jetbrains.com/kotlin/" ref="nofollow noopener noreferrer">Kotlin Blog</a> çš„ Wasm ä¸“é¢˜</li>
<li>å°è¯• Kotlin 1.9.20+ çš„å®éªŒæ€§ <code>wasm</code> ç›®æ ‡ï¼ˆéœ€å¯ç”¨ <code>-Xwasm-enable</code>ï¼‰</li>
<li>å‚ä¸ kotlinx-wasm ç¤¾åŒºè®¨è®ºï¼Œè´¡çŒ®ç”¨ä¾‹ä¸åé¦ˆ</li>
</ol>
</blockquote>
<p>æŠ€æœ¯æ¼”è¿›ä»æ— å¦é€”ï¼Œä½†å½“ Kotlin çš„ä¼˜é›…ä¸ WebAssembly çš„é”‹èŠ’ç›¸é‡ï¼Œæˆ‘ä»¬æ­£ç«™åœ¨ä¸‹ä¸€ä»£å…¨æ ˆå¼€å‘çš„é—¨æ§›ä¸Šã€‚ä¿æŒå¥½å¥‡ï¼Œç†æ€§æœŸå¾…â€”â€”çœŸæ­£çš„ 2.2.20 æ—¶ä»£ï¼Œå€¼å¾—æ¯ä¸€ä½ Kotlin å¼€å‘è€…å…±åŒå¡‘é€ ã€‚</p>
<blockquote>
<p>ğŸ“Œ <strong>è½¬è½½æé†’</strong>ï¼š<br/>
æœ¬æ–‡æœ€æ—©å‘å¸ƒäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fmake.dxmwl.com%2F" target="_blank" title="https://make.dxmwl.com/" ref="nofollow noopener noreferrer">ç å®¢</a><br/>
æ–‡ç« åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmake.dxmwl.com%2Fp%2F67" target="_blank" title="https://make.dxmwl.com/p/67" ref="nofollow noopener noreferrer">make.dxmwl.com/p/67</a><br/>
è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œå¹¶ä¸ä½œè€…è¿›è¡Œè”ç³»</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3. iOSå¼€å‘ä¸­ä½¿ç”¨atomicï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7603185231802564634</link>    <guid>https://juejin.cn/post/7603185231802564634</guid>    <pubDate>2026-02-05T18:22:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603185231802564634" data-draft-id="7603185231802548250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3. iOSå¼€å‘ä¸­ä½¿ç”¨atomicï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-02-05T18:22:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSåœ¨å…¥é—¨"/> <meta itemprop="url" content="https://juejin.cn/user/4037062426627758"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3. iOSå¼€å‘ä¸­ä½¿ç”¨atomicï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4037062426627758/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSåœ¨å…¥é—¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T18:22:52.000Z" title="Thu Feb 05 2026 18:22:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å€ŸåŠ©AIè¾…åŠ©ã€‚</p>
</blockquote>
<h3 data-id="heading-0">1. æ ¸å¿ƒç»“è®º</h3>
<p><strong>åœ¨ iOS å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ€»æ˜¯ä½¿ç”¨ <code>nonatomic</code>ï¼Œæå°‘ä½¿ç”¨ <code>atomic</code>ã€‚</strong></p>
<p>ä½¿ç”¨ <code>atomic</code> å­˜åœ¨ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ€§èƒ½æŸè€—</strong>ï¼š<code>atomic</code> ä¼šåœ¨ setter/getter æ–¹æ³•ä¸­åŠ é”ï¼Œé¢‘ç¹è®¿é—®æ—¶ä¼šä¸¥é‡æ‹–æ…¢æ€§èƒ½ã€‚</li>
<li><strong>è™šå‡çš„çº¿ç¨‹å®‰å…¨</strong>ï¼š<code>atomic</code> åªèƒ½ä¿è¯å±æ€§çš„<strong>è¯»å†™æ“ä½œï¼ˆAccessorsï¼‰<strong>æ˜¯åŸå­çš„ï¼Œä½†</strong>ä¸èƒ½ä¿è¯å¯¹è±¡çš„æ“ä½œé€»è¾‘</strong>æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1">2. æ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯â€œè™šå‡â€çš„çº¿ç¨‹å®‰å…¨ï¼Ÿ</h3>
<p><code>atomic</code> ä¿è¯çš„æ˜¯ï¼šå½“ä¸€ä¸ªçº¿ç¨‹åœ¨å†™æ•°æ®ï¼ˆSetterï¼‰æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ— æ³•åŒæ—¶å»å†™ï¼Œä¹Ÿæ— æ³•åŒæ—¶å»è¯»ï¼ˆGetterï¼‰ã€‚å®ƒä¿è¯äº†ä½ è¯»åˆ°çš„æ•°æ®è¦ä¹ˆæ˜¯â€œä¿®æ”¹å‰â€çš„ï¼Œè¦ä¹ˆæ˜¯â€œä¿®æ”¹åâ€çš„ï¼Œä¸ä¼šè¯»åˆ°â€œå†™äº†ä¸€åŠâ€çš„è„æ•°æ®ã€‚</p>
<p><strong>ä½†æ˜¯ï¼å®ƒä¸ç®¡åç»­çš„æ“ä½œã€‚</strong></p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong>
å‡è®¾ä½ æœ‰ä¸€ä¸ª <code>atomic</code> çš„æ•°ç»„å±æ€§ <code>self.dataArray</code>ã€‚</p>
<pre><code class="hljs language-objective-c" lang="objective-c">@property (atomic, strong) NSMutableArray *dataArray;
</code></pre>
<p><strong>åœºæ™¯ï¼š</strong> çº¿ç¨‹ A åœ¨è¯»å–æ•°ç»„çš„ç¬¬ 0 ä¸ªå…ƒç´ ï¼Œçº¿ç¨‹ B åŒæ—¶åœ¨æ¸…ç©ºæ•°ç»„ã€‚</p>
<pre><code class="hljs language-objective-c" lang="objective-c">// çº¿ç¨‹ A
id obj = [self.dataArray objectAtIndex:0]; 

// çº¿ç¨‹ B
[self.dataArray removeAllObjects];
</code></pre>
<p><strong>ç»“æœï¼š</strong> ä¾ç„¶ä¼šå´©æºƒï¼ˆCrashï¼‰ã€‚</p>
<p><strong>åŸå› ï¼š</strong></p>
<ul>
<li><code>[self.dataArray]</code> è¿™ä¸ªè¯»å–æ“ä½œæ˜¯åŸå­çš„ï¼ˆå®‰å…¨çš„ï¼‰ï¼Œä½ ç¡®å®æ‹¿åˆ°äº†æ•°ç»„å¯¹è±¡ã€‚</li>
<li>ä½†æ˜¯åœ¨ä½ æ‹¿åˆ°æ•°ç»„åï¼Œç´§æ¥ç€è°ƒç”¨ <code>objectAtIndex:0</code> æ—¶ï¼Œçº¿ç¨‹ B å¯èƒ½åˆšå¥½æŠŠæ•°ç»„æ¸…ç©ºäº†ã€‚</li>
<li><code>atomic</code> é”ä¸ä½ <code>objectAtIndex:</code> å’Œ <code>removeAllObjects</code> è¿™äº›æ–¹æ³•è°ƒç”¨ã€‚å®ƒåªç®¡ <code>self.dataArray = ...</code> (setter) å’Œ <code>... = self.dataArray</code> (getter)ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> è¦æƒ³çœŸæ­£å®ç°çº¿ç¨‹å®‰å…¨ï¼Œä½ éœ€è¦ä½¿ç”¨æ›´é«˜å±‚çº§çš„é”ï¼ˆå¦‚ <code>@synchronized</code>, <code>NSLock</code>, <code>dispatch_semaphore</code> æˆ–ä¸²è¡Œé˜Ÿåˆ—ï¼‰æ¥åŒ…è£¹ä½æ•´æ®µé€»è¾‘ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¾èµ–å±æ€§çš„ <code>atomic</code>ã€‚</p>
<hr/>
<h3 data-id="heading-2">3. æ€§èƒ½é—®é¢˜ï¼ˆåº•å±‚å®ç°ï¼‰</h3>
<p><code>atomic</code> çš„åº•å±‚å®ç°å¤§è‡´å¦‚ä¸‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">- (void)setName:(NSString *)name {
    // è‡ªåŠ¨åŠ é”
    [self.internalLock lock];
    _name = name;
    [self.internalLock unlock];
}

- (NSString *)name {
    // è‡ªåŠ¨åŠ é”
    [self.internalLock lock];
    NSString *result = [[_name retain] autorelease];
    [self.internalLock unlock];
    return result;
}
</code></pre>
<p>æ¯æ¬¡è®¿é—®å±æ€§éƒ½è¦ç»å† <code>lock</code> -&gt; <code>unlock</code> çš„è¿‡ç¨‹ã€‚åœ¨ UI æ¸²æŸ“æˆ–é«˜é¢‘è®¡ç®—ç­‰å¯¹æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ä¸‹ï¼Œè¿™ç§å¼€é”€æ˜¯ä¸å¯æ¥å—çš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>nonatomic</code> ç›´æ¥è®¿é—®å†…å­˜ï¼Œé€Ÿåº¦å¿«å¾—å¤šã€‚</p>
<hr/>
<h3 data-id="heading-3">4. ä»€ä¹ˆæ—¶å€™çœŸæ­£éœ€è¦ç”¨ atomicï¼Ÿ</h3>
<p>è™½ç„¶å¾ˆå°‘ï¼Œä½†ä¹Ÿä¸æ˜¯å®Œå…¨æ²¡æœ‰ã€‚</p>
<ul>
<li>å¦‚æœä½ å¼€å‘çš„ä¸æ˜¯ Appï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ç¬¬ä¸‰æ–¹ SDK</strong> æˆ– <strong>åº•å±‚åº“</strong>ã€‚</li>
<li>å¹¶ä¸”ä½ ç¡®å®šè¯¥å±æ€§ä»…ä»…æ˜¯ä¿å­˜ä¸€ä¸ªç®€å•çš„å€¼ï¼ˆæ¯”å¦‚ä¸€ä¸ªæ•´æ•°é…ç½®é¡¹ï¼Œæˆ–è€…ä¸€ä¸ªæŒ‡é’ˆï¼‰ï¼Œä¸æ¶‰åŠå¤æ‚çš„é›†åˆæ“ä½œæˆ–é€»è¾‘ä¾èµ–ã€‚</li>
<li>æ­¤æ—¶ä¸ºäº†é˜²æ­¢å¤–éƒ¨è°ƒç”¨è€…åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¯»åˆ°è„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>atomic</code> ä½œä¸ºä¸€ç§å…œåº•çš„é˜²æŠ¤æ‰‹æ®µã€‚</li>
</ul>
<h3 data-id="heading-4">å‚è€ƒæ–‡ç« </h3>
<ol>
<li><a href="https://juejin.cn/post/6844903748997758983?searchId=202602061058580880844DB6A443C7B232" target="_blank" title="https://juejin.cn/post/6844903748997758983?searchId=202602061058580880844DB6A443C7B232">å…³äºIOS å±æ€§atomicï¼ˆåŸå­æ€§ï¼‰çš„ç†è§£</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¢«AIå‘äº†3æ¬¡åï¼Œæˆ‘ç»ˆäºå­¦ä¼šç”¨Gitæ•‘å‘½]]></title>    <link>https://juejin.cn/post/7603185231802449946</link>    <guid>https://juejin.cn/post/7603185231802449946</guid>    <pubDate>2026-02-05T16:06:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7603185231802449946" data-draft-id="7602965400810176562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¢«AIå‘äº†3æ¬¡åï¼Œæˆ‘ç»ˆäºå­¦ä¼šç”¨Gitæ•‘å‘½"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-02-05T16:06:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·54881731631"/> <meta itemprop="url" content="https://juejin.cn/user/3625533074849658"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¢«AIå‘äº†3æ¬¡åï¼Œæˆ‘ç»ˆäºå­¦ä¼šç”¨Gitæ•‘å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3625533074849658/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·54881731631
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-05T16:06:56.000Z" title="Thu Feb 05 2026 16:06:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ Git + GitHub + VSCode é›¶åŸºç¡€ä¿å§†çº§å…¥é˜ŸæŒ‡å—</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šAIç¼–ç¨‹çš„æ•‘å‘½ç¨»è‰â€”â€”Git</h3>
<blockquote>
<p>åŒå­¦ï¼Œä½ å¯èƒ½åœ¨æƒ³ï¼šâ€œgitæ˜¯ä»€ä¹ˆ æˆ‘ä»¬æ˜¯å†™ä»£ç çš„ ä¸ºä»€ä¹ˆè¦å®‰è£…è¿™ä¸ªä¸œè¥¿ï¼Ÿâ€</p>
<p><strong>å›ç­”</strong>ï¼šå› ä¸ºæˆ‘ä»¬æ˜¯AIç¼–ç¨‹ï¼ŒAIæœ‰æ—¶å€™â€œå‘ç¥ç»â€ä¼šæŠŠä½ çš„é¡¹ç›®æ”¹çš„ä¸‘ä¸æ‹‰å‡  æ— æ³•è¿è¡Œ æ”¹çš„åœ°æ–¹å¤ªå¤šäº†åˆä¸å¥½æ’¤å› è¿™æ˜¯æˆ‘çš„çœŸå®ç»å† ï¼š</p>
</blockquote>
<p><strong>çœŸå®æ•…äº‹</strong>ï¼šæˆ‘ä¹‹å‰ç”¨Trae AIæ”¹ä»£ç ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„é—®å·ç½‘é¡µçš„æ—¶å€™ã€‚æˆ‘ä¸€æ¬¡æ€§å·´æ‹‰å·´æ‹‰è¾“å‡ºäº†5ä¸ªéœ€æ±‚ã€‚æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªçš„èƒ½åŠ›ä¸Šé™ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62f1c992e89349a680ad2c98662d4812~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=BMX2a4FGW%2FVJl2AZLEBpDnNpNnM%3D" alt="æˆ‘æäº†5ä¸ªéœ€æ±‚çœ‹Traeèƒ½ä¸èƒ½ä¸€æ¬¡æ€§å®Œæˆ" loading="lazy"/>
æˆ‘å½“æ—¶å…´å†²å†²åœ°æ‰“å¼€ç½‘é¡µï¼Œç»“æœç½‘é¡µä¸ä»…ä¸‘ä¸æ‹‰å‡ è¿˜çªç„¶è¿è¡Œä¸äº†äº†ï¼Œæ°”æ­»æˆ‘äº†ã€‚æˆ‘å½“æ—¶è¿˜æ‰‹è´±åœ¨ç¼–è¾‘å™¨é‡Œæƒ³ä¿®æ”¹ä¸€ä¸‹ï¼Œç„¶åè¿˜ç‚¹å‡»äº†ç¡®è®¤ã€‚æ— æ•Œäº†
<strong>å¹¸å¥½æˆ‘ä¹‹å‰å¬äº†aiçš„å»ºè®®å…ˆè£…äº†Git</strong>ï¼Œä¸€æ¡å‘½ä»¤æŠŠä»£ç æ¢å¤åˆ°ä¹‹å‰æ­£å¸¸çš„çŠ¶æ€ã€‚å¦‚æœæ²¡æœ‰Gitï¼Œæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®å¯èƒ½åŸåœ°è§£æ•£äº†å“ˆå“ˆ
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/194addbcdb86466aacd85a41963ba24e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=k2J%2Byo2hq0GauLhP1eCbixt2w9c%3D" alt="å›é€€ç‰ˆæœ¬" loading="lazy"/></p>
<p><strong>è¿™å°±æ˜¯Gitçš„ä½œç”¨</strong>ï¼šä»£ç çš„â€œæ—¶å…‰æœºâ€å’Œâ€œåæ‚”è¯â€ã€‚</p>
<h4 data-id="heading-2">Git vs GitHubï¼šå®ƒä»¬æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h4>























<table><thead><tr><th>å·¥å…·</th><th>æ˜¯ä»€ä¹ˆï¼Ÿ</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>Git</strong></td><td>ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼ˆèåˆåˆ°ä½ çš„å‘½ä»¤è¡Œé‡Œé¢å»ï¼‰</td><td>è®°å½•æ¯æ¬¡ä»£ç ä¿®æ”¹ï¼Œå¯ä»¥éšæ—¶å›åˆ°ä½ æäº¤è¿‡çš„å†å²ç‰ˆæœ¬</td><td>å°±åƒç©æ¸¸æˆçš„â€œå­˜æ¡£â€ä¸€æ ·ï¼Œè¿™ä¸ªæ¡£æ‰“åºŸäº†å¯ä»¥è¯»æ¡£</td></tr><tr><td><strong>GitHub</strong></td><td>ä»£ç æ‰˜ç®¡å¹³å°ï¼ˆç½‘ç«™ï¼Œå…è´¹çš„ä»£ç äº‘ç«¯å­˜å‚¨åº“ï¼‰</td><td>1. å¤‡ä»½ä½ çš„ä»£ç åˆ°äº‘ç«¯ï¼Œæ°¸ä¸ä¸¢å¤±<br/>2. å¤šäººåä½œï¼Œåˆå¹¶ä»£ç <br/>3. å±•ç¤ºä½ çš„é¡¹ç›®ï¼ˆç®€å†é‡Œæ”¾ä¸ªé¡¹ç›®é‚£ä¸æ˜¯nb?(doge)ï¼‰</td><td>å°±åƒä»£ç çš„â€œç½‘ç›˜+æœ‹å‹åœˆâ€</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒæ¯”å–»</strong>ï¼š</p>
<ul>
<li><strong>Git</strong> = ä½ ç”µè„‘ä¸Šçš„â€œå­˜æ¡£è½¯ä»¶â€ï¼ˆæƒ³è¦å­˜æ¡£çš„æ—¶å€™3è¡Œå‘½ä»¤å°±è¡Œäº†ï¼‰</li>
<li><strong>GitHub</strong> = æŠŠâ€œå­˜æ¡£â€è¿‡çš„è®°å½•ä¸Šä¼ åˆ°äº‘ç«¯ï¼ˆå¤‡ä»½+åä½œï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»ç”¨ï¼Ÿ</strong></p>
<ol>
<li><strong>é˜²AIå‘ç¥ç»</strong>ï¼šAIæ”¹ä»£ç æŠŠé¡¹ç›®æ”¹åäº†ï¼Œä¸€é”®æ¢å¤</li>
<li><strong>é˜²æ‰‹æ®‹</strong>ï¼šè‡ªå·±æ”¹é”™äº†ï¼Œä¸€é”®æ¢å¤</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå››ä¸ªäººåŒæ—¶æ”¹ä»£ç ï¼Œè‡ªåŠ¨åˆå¹¶ï¼Œä¸ä¼šäº’ç›¸è¦†ç›–</li>
<li><strong>ä»£ç å¤‡ä»½</strong>ï¼šç”µè„‘åäº†ã€ä¸¢äº†ï¼Œä»£ç éƒ½åœ¨äº‘ç«¯</li>
</ol>
<hr/>
<h3 data-id="heading-3">ç¬¬ä¸€ç« ï¼šæ³¨å†ŒGitHubè´¦å·ï¼ˆç”µè„‘ç‰ˆå…¨æµç¨‹ï¼‰</h3>
<h4 data-id="heading-4">1.1 ä¸ºä»€ä¹ˆå…ˆæ³¨å†ŒGitHubï¼Ÿ</h4>
<p>å› ä¸ºæˆ‘ä»¬è¦æŠŠä»£ç å­˜åˆ°äº‘ç«¯ï¼Œéœ€è¦å…ˆæœ‰ä¸ªè´¦æˆ·ã€‚GitHubæ˜¯å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œä¹Ÿæ˜¯ç¨‹åºå‘˜çš„â€œç¤¾äº¤ç½‘ç»œâ€ã€‚</p>
<h4 data-id="heading-5">1.2 æ³¨å†Œæ­¥éª¤ï¼ˆæ¯ä¸ªæ­¥éª¤éƒ½éœ€è¦æˆªå›¾ï¼ï¼‰</h4>
<p><strong>æ­¥éª¤1ï¼šæ‰“å¼€GitHubå®˜ç½‘</strong>ï¼ˆéœ€è¦æ¢¯å­ ç„¶åæœ€å¥½æœ‰ä¸€ä¸ªç¿»è¯‘çš„æ’ä»¶ å¤–å›½ç½‘ç«™ é™¤éä½ çš„è‹±æ–‡ç‰¹åˆ«å¥½ ä¸ç„¶è¿˜æ˜¯ç¿»è¯‘ä¸€ä¸‹ è¿™æ˜¯æˆ‘ç”¨çš„ edgeæ’ä»¶å•†åº—é‡Œæœä¸€ä¸‹å°±è¡Œäº†ï¼‰ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12449694e8f9492b918a8c5575c4c636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=UmOixH50s0u1Fzosovq2U7ra0Jg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ul>
<li><strong>ç½‘å€</strong>ï¼š<code>https://github.com</code> æŠŠä½ çš„é‚®ç®±å¡«è¿›å»ï¼ˆå¸¸ç”¨çš„ qqé‚®ç®±å°±è¡Œï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a0e908c3a7349829c4324b9d4af6987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=gnfFvZan%2BdoIQmQThBkzcHuBXiE%3D" alt="githubå®˜ç½‘" loading="lazy"/></li>
</ul>
<p><strong>æ­¥éª¤2ï¼šç‚¹å‡»â€œSign upåå¡«å†™ä¿¡æ¯â€</strong></p>
<ul>
<li>ã€é…å›¾2ã€‘ç‚¹å‡»åçš„æ³¨å†Œé¡µé¢æˆªå›¾
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d244a5b0234322b06172f8af0ee2c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=e6aod28%2FDRzQQpK13O0nvAegHc0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ç‚¹å‡»â€œCreate accountâ€</li>
</ul>
<p>tips:ç”¨æˆ·åä¸è¦å¤ªæŠ½è±¡å“ˆå“ˆ Hrå¯èƒ½ä¼šçœ‹
âœ”ï¸ æ¥æ”¶äº§å“æ›´æ–°ï¼ˆå¯é€‰ï¼‰
<strong>æ­¥éª¤3ï¼šäººæœºéªŒè¯</strong>
6é“å˜æ€çš„äººæœºéªŒè¯é¢˜ç›®ï¼ˆæˆ‘çš„æ˜¯è¿çº¿é¢˜ç›®)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5d22b3813da40a1a362d8e7892d054f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=XHcPJFguaVhHudBMOpVC%2B3LHyQQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç„¶ågithubä¼šç»™ä½ çš„é‚®ç®±å‘ä¸€ä¸ªéªŒè¯ç  å¡«å…¥å°±è¡Œäº† è¿›å…¥ä½ çš„é‚®ç®±</p>
<p><strong>æ­¥éª¤4ï¼šå®Œæˆæ³¨å†Œ</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cda9c012f1f4298808676fd9378f6c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=NZX3oc2cyr5emFp%2BibZKF%2BKfG3M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>é‡è¦æç¤º</strong>ï¼š</p>
<ul>
<li>âœ… æ³¨å†Œå<strong>ç«‹å³ç™»å½•ä¸€æ¬¡</strong>ï¼Œç¡®è®¤æˆåŠŸ</li>
<li>âœ… æŠŠç”¨æˆ·åå’Œå¯†ç è®°åœ¨æ‰‹æœºå¤‡å¿˜å½•</li>
<li>âœ… é˜Ÿå‹é—´äº’ç›¸åŠ å¥½å‹ï¼ˆåé¢æ•™ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-6">ç¬¬äºŒç« ï¼šå®‰è£…Gitï¼ˆWindows/MacåŒç‰ˆæœ¬ï¼‰</h3>
<h4 data-id="heading-7">2.1 å®‰è£…Gitçš„ç›®çš„</h4>
<p>Gitæ˜¯è¿è¡Œåœ¨ä½ ç”µè„‘ä¸Šçš„â€œå‘½ä»¤è¡Œå­˜æ¡£è½¯ä»¶â€ï¼Œåªæœ‰å®‰è£…äº†Gitï¼Œæ‰èƒ½ä½¿ç”¨GitHubçš„äº‘ç«¯åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-8">2.2 Windowsç”¨æˆ·å®‰è£…æ­¥éª¤</h4>
<p><strong>æ­¥éª¤1ï¼šä¸‹è½½Git</strong></p>
<ul>
<li><strong>ç½‘å€</strong>ï¼š<code>https://git-scm.com/download/win</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c70ae7df05f4415c8ca5abc9f4d93595~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=gRsXCGveCsrpNuWKD5pSwTTto8Q%3D" alt="" loading="lazy"/>
å°±è¿™ç¬¬ä¸€ä¸ª çœ‹ä½ ç”µè„‘ ä¸€èˆ¬éƒ½æ˜¯x64 æœ€æ–°ç‰ˆçš„</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šè¿è¡Œå®‰è£…ç¨‹åº</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92e03341206045feae07b9aed9c2aec0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=vxmX0DN7evWZCxp0OOUNhwIDTYI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ­¥éª¤3ï¼šé€‰æ‹©å®‰è£…ä½ç½®</strong></p>
<ul>
<li>é»˜è®¤Cç›˜å³å¯ï¼Œç‚¹Next</li>
</ul>
<p><strong>æ­¥éª¤4ï¼šé€‰æ‹©ç»„ä»¶ï¼ˆï¼‰</strong></p>
<pre><code class="hljs">è¿™ä¸ªä¹Ÿé»˜è®¤å°±è¡Œ

</code></pre>
<p><strong>æ­¥éª¤5ï¼šå…¶ä»–è®¾ç½®</strong></p>
<ul>
<li>ä¸€è·¯Nextï¼Œéƒ½ç”¨é»˜è®¤è®¾ç½®</li>
<li>æœ€åç‚¹Install</li>
</ul>
<p><strong>æ­¥éª¤6ï¼šéªŒè¯å®‰è£…</strong></p>
<ul>
<li>
<p>æŒ‰<code>Win + R</code>ï¼Œè¾“å…¥<code>cmd</code>å›è½¦
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f23dd4d133274c85ab2c11b905cd2832~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=F7FdBqh4MvnfdJp4u6OeLE2AmXI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</li>
<li>
<p>è¾“å…¥<code>git --version</code>ï¼ˆæ³¨æ„æœ‰ä¸ªç©ºæ ¼ï¼‰</p>
</li>
<li>
<p>çœ‹åˆ°ç‰ˆæœ¬å·å°±æˆåŠŸäº†ï¼
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6baf4fb2894746179afd94c26fd8a9a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=MbD4hLkRcvm9N15zRn5MOKCqqag%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç¬¬å››ç« ï¼šè¿æ¥Gitå’ŒGitHubï¼ˆå…³é”®ï¼ï¼‰</h3>
<h4 data-id="heading-10">4.1 é…ç½®Gitç”¨æˆ·ä¿¡æ¯ï¼ˆä¸€æ¬¡æ€§ï¼‰</h4>
<ul>
<li>æ‰“å¼€ç»ˆç«¯ï¼ˆWindowsç”¨CMDï¼‰ï¼ˆvscodeé‡Œé¢çš„ç»ˆç«¯ä¹Ÿè¡Œï¼‰</li>
<li>è¾“å…¥ä»¥ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼ˆç»¿è‰²çš„å­—æ›¿æ¢æˆä½ çš„ä¿¡æ¯ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">git config --global user.name <span class="hljs-string">"ä½ çš„GitHubç”¨æˆ·å"</span>
git config --global user.email <span class="hljs-string">"ä½ çš„GitHubæ³¨å†Œé‚®ç®±"</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ec07cdb19db4b77a6e9f9c7e7a545fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=545pAE0m%2BndMdaaF1x6ZGfet7Ss%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ï¼ˆä¸¤è¡Œåˆ†å¼€è¾“å…¥ ä¸ç„¶å°±ä¼šæŠ¥é”™
gitåªè®¤è¯†ä¸€è¡Œå‘½ä»¤ï¼‰</p>
<h4 data-id="heading-11">4.2 ç»™Git æŒ‚è½½ä»£ç†</h4>
<p>ã€åŸå› ã€‘git é»˜è®¤ä¸ä¼šèµ°æ¢¯å­ å¾—å‘Šè¯‰ä»–èµ°è¿™ä¸ªæ¢¯å­</p>
<ul>
<li>åŠ¨ä½œï¼šåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆå‘Šè¯‰ Git èµ° 7890 é€šé“ï¼‰ï¼š
ã€ç«¯å£å°±æ˜¯æ¢¯å­é…ç½®çš„ç«¯å£ é»˜è®¤éƒ½æ˜¯7890ã€‘</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">git config --global http.proxy http://127.0.0.1:7890
</code></pre>
<hr/>
<h3 data-id="heading-12">ç¬¬äº”ç« ï¼šå¯ä»¥éƒ¨ç½²ä¸€ä¸ªçš„githubçš„é¡¹ç›®</h3>
<h4 data-id="heading-13">5.1 è¿™æ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„åšçš„ä¸€ä¸ªé—®å·ç½‘ç«™çš„é¡¹ç›® ä½ ä»¬å¯ä»¥å°è¯•éƒ¨ç½²è¿™ä¸ªä½œä¸ºç»ƒä¹ </h4>
<p>ç½‘å€ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//github.com/hhh-dahah/CyberTCM.git</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/860152143bfe4dae9b8ba67c4fca2526~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=UXmLsfTZ%2BGFdFwuMBCdCosoOnOo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-14">5.2 å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</h4>
<p><strong>æ­¥éª¤1ï¼šé€‰æ‹©å­˜æ”¾ä½ç½®</strong></p>
<ul>
<li>å»ºè®®æ”¾æ¡Œé¢æˆ–Dç›˜ï¼Œè·¯å¾„ä¸è¦æœ‰ä¸­æ–‡</li>
</ul>
<p><strong>æ­¥éª¤2ï¼šç”¨VS Codeå…‹éš†</strong></p>
<ol>
<li>
<p>æ‰“å¼€VS Code</p>
</li>
<li>
<p>æŒ‰<code>Ctrl+Shift+P</code></p>
</li>
<li>
<p>è¾“å…¥â€œGit: Cloneâ€</p>
</li>
<li>
<p>ç²˜è´´é¡¹ç›®åœ°å€ ï¼ˆæˆ‘ä¸Šé¢ç»™çš„ç½‘å€ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/081a6d1f0e0b432d8a81e04a6a15ecd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=HIDv0E3OFexNg6JpBvJig6rXOgY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</li>
<li>
<p>é€‰æ‹©å­˜æ”¾æ–‡ä»¶å¤¹ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aaee337fd874cf9bbcf364201c9bb2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=f4aF7CPlrP9XCI%2BrBLsPNhcyABE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</li>
</ol>
<p><strong>æ­¥éª¤3ï¼šæ‰“å¼€é¡¹ç›®</strong></p>
<ul>
<li>å…‹éš†å®Œæˆåï¼ŒVS Codeä¼šæç¤ºæ‰“å¼€</li>
<li>ç‚¹å‡»â€œOpenâ€
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e3a1700d33d412ca1b9b6444ec61373~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=Qw2LfGO%2FKxg1BzpZczftZeGYjM4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<hr/>
<h3 data-id="heading-15">ç¬¬å…­ç« ï¼šè¿è¡Œé¡¹ç›®ï¼ˆéªŒè¯ä¸€åˆ‡æ­£å¸¸ï¼‰</h3>
<h4 data-id="heading-16">6.1 ç¬¬ä¸€æ¬¡è¿è¡Œå‰æ£€æŸ¥</h4>
<p><strong>æ£€æŸ¥1ï¼šæ–‡ä»¶å¤¹ç»“æ„</strong></p>
<ul>
<li>å·¦è¾¹æ åº”è¯¥çœ‹åˆ°è¿™äº›æ–‡ä»¶ï¼š</li>
</ul>

<pre><code class="hljs language-erlang" lang="erlang">CyberTCM/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ assets/
â””â”€â”€ ...
</code></pre>
<p><strong>æ£€æŸ¥2ï¼šæ‰“å¼€ç»ˆç«¯</strong></p>
<ul>
<li>VS Codeé¡¶éƒ¨èœå•ï¼šæŸ¥çœ‹ â†’ ç»ˆç«¯</li>
<li>ç¡®è®¤è·¯å¾„æ­£ç¡®ï¼ˆç»“å°¾æ˜¯<code>/CyberTCM&gt;</code>ï¼‰
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a686a6dbbc4458ba76b616ab37805d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=1nzC6BdQSC5tw%2FjmW6a9JvCI0zw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<h4 data-id="heading-17">6.2 å®‰è£…Pythonä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<ul>
<li>æˆ‘æŠŠä¾èµ–å…¨éƒ¨å†™åœ¨requirement è¿™ä¸ªæ–‡ä»¶é‡Œäº†æ‰€ä»¥ç›´æ¥è¿è¡Œè¿™ä¸ªå‘½ä»¤å°±è¡Œäº†<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a80926b120e4eedb6f4b358bf25ca55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=xCLQJGGWlYT5qz%2FJDyUOUtKXonE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>æˆ‘è¿™å·²ç»å®‰è£…è¿‡äº†ï¼ˆå®‰è£…è¿‡ç¨‹å¼€æ¢¯å­ ä¸ç„¶å¾ˆæ…¢ï¼‰</li>
</ul>
<h4 data-id="heading-18">6.3 è¿è¡Œé¡¹ç›®</h4>
<p>-å‘½ä»¤è¡Œè¾“å…¥</p>
<pre><code class="hljs language-bash" lang="bash">streamlit run app.py
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23f32c31819448a19e150f140e467648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=N3nPuHoScoMilXSjBjRxZsYJYT0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
-å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ‰“å¼€ç½‘é¡µå°±æŒ‰ä½ctrl é¼ æ ‡ç‚¹ä¸€ä¸‹ä¸‹é¢é‚£ä¸ªLocal URLå°±å¯ä»¥æ‰“å¼€ç½‘é¡µ å°±è¿™æ · ï¼ˆè¯„è®ºåŒºæˆªå›¾äº¤ä½œä¸šå•Šhh)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cce7f0ed02547b0854b2bb5d41414e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTQ4ODE3MzE2MzE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770912416&amp;x-signature=sIb1kU4%2FpKRzt7SS%2BX4%2Fdn5dXsc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-19">ç¬¬ä¸ƒç« ï¼šæ—¥å¸¸åä½œæµç¨‹ï¼ˆç®€åŒ–ç‰ˆSOPï¼‰</h3>
<h4 data-id="heading-20">7.1 æ¯å¤©å¼€å§‹å·¥ä½œå‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆåŒæ­¥é˜Ÿå‹çš„ä¿®æ”¹ï¼‰</span>
git pull origin master

<span class="hljs-comment"># 2. è¿è¡Œé¡¹ç›®</span>
streamlit run app.py
</code></pre>
<h4 data-id="heading-21">7.2 å†™å®Œä»£ç åä¿å­˜</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ·»åŠ æ‰€æœ‰ä¿®æ”¹</span>
git add .  ã€æ³¨æ„åé¢æœ‰ä¸ªç©ºæ ¼å’Œä¸€ä¸ªç‚¹ã€‘

<span class="hljs-comment"># 2. å†™æäº¤ä¿¡æ¯ï¼ˆå¿…é¡»ï¼ï¼‰</span>
git commit -m <span class="hljs-string">"ä½ çš„åå­—: åšäº†ä»€ä¹ˆ"</span>
<span class="hljs-comment"># ç¤ºä¾‹ï¼šgit commit -m "å¼ ä¸‰: ä¿®å¤äº†ç™»å½•æŒ‰é’®bug"</span>

<span class="hljs-comment"># 3. æ¨é€åˆ°GitHub ã€å¼€æ¢¯å­ã€‘</span>
git push origin master
</code></pre>
<h4 data-id="heading-22">7.3 è®°ä½è¿™3ä¸ªå‘½ä»¤å°±å¤Ÿç”¨</h4>
<pre><code class="hljs language-sql" lang="sql">æ¯å¤©å¼€å§‹ï¼šgit pull
ä¿®æ”¹åï¼šgit <span class="hljs-keyword">add</span> . â†’ git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "æè¿°" â†’ git push
</code></pre>
<hr/>
<h3 data-id="heading-23">ç¬¬å…«ç« ï¼šå¸¸è§é—®é¢˜è§£å†³ï¼ˆQ&amp;Aï¼‰</h3>
<h4 data-id="heading-24">Q1ï¼šå‘½ä»¤è¾“é”™äº†æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>A</strong>ï¼šæŒ‰<code>Ctrl+C</code>å¯ä»¥ä¸­æ–­å½“å‰å‘½ä»¤ã€‚</p>
<h4 data-id="heading-25">Q2ï¼šç»ˆç«¯æ˜¾ç¤ºä¸€å †çœ‹ä¸æ‡‚çš„è‹±æ–‡ï¼Ÿ</h4>
<p><strong>A</strong>ï¼šç›´æ¥å¤åˆ¶é—®ai è®©å®ƒè§£å†³</p>
<hr/>
<h3 data-id="heading-26">ç¬¬ä¹ç« ï¼šå›¢é˜ŸéªŒæ”¶ä»»åŠ¡æ¸…å•</h3>
<p>æ¯ä¸ªé˜Ÿå‘˜å®Œæˆä»¥ä¸‹ä»»åŠ¡å<strong>åœ¨ç¾¤é‡Œæ‰“å¡</strong>ï¼š</p>
<h4 data-id="heading-27">âœ… ä»»åŠ¡æ¸…å•</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ³¨å†ŒGitHubè´¦å·ï¼ŒæŠŠç”¨æˆ·åå‘ç¾¤é‡Œ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®‰è£…VS Codeï¼Œæˆªå›¾ä¸»ç•Œé¢</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å…‹éš†é¡¹ç›®ï¼Œæˆªå›¾æ–‡ä»¶ç»“æ„</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è¿è¡Œé¡¹ç›®ï¼Œæˆªå›¾æµè§ˆå™¨æ‰“å¼€çš„ç½‘é¡µ</li>
</ul>
<h4 data-id="heading-28">ğŸ† å®Œæˆå¥–åŠ±</h4>
<ul>
<li>å…¨é˜Ÿå®Œæˆï¼šè¯·æˆ‘å–å¥¶èŒ¶</li>
<li>å‰ä¸‰åå®Œæˆï¼šç»™æˆ‘å‘çº¢åŒ…</li>
<li>å¸®åŠ©é˜Ÿå‹è§£å†³é—®é¢˜ï¼šå›¢é˜Ÿè´¡çŒ®åŠ åˆ†</li>
</ul>
<hr/>
<h3 data-id="heading-29">ç¬¬åç« ï¼šä¸‹ä¸€æ­¥å­¦ä¹ è®¡åˆ’</h3>
<p>å®Œæˆè¿™ä¸ªæŒ‡å—åï¼Œæˆ‘ä»¬æŒ‰è¿™ä¸ªé¡ºåºå­¦ä¹ ï¼š</p>
<h4 data-id="heading-30">å­¦ä¹ è·¯çº¿å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[GitåŸºç¡€] --&gt; B[Traeç†Ÿç»ƒä½¿ç”¨]
    B --&gt; C[Dockerç¯å¢ƒç»Ÿä¸€]
    C --&gt; D[Dockerç¯å¢ƒç»Ÿä¸€]
    
    D --&gt; F[é¡¹ç›®éƒ¨ç½²ä¸Šçº¿]
</code></pre>
<h4 data-id="heading-31">é¢„è®¡æ—¶é—´</h4>
<ul>
<li>æœ¬å‘¨ï¼šå®ŒæˆGitåŸºç¡€ï¼ˆè¿™ä¸ªæŒ‡å—ï¼‰</li>
<li>ä¸‹å‘¨ï¼šé¡¹ç›®å¼€å‘è§„èŒƒ</li>
<li>ä¸‹ä¸‹å‘¨ï¼šDockerå…¥é—¨</li>
<li>ä¸€ä¸ªæœˆåï¼šæˆ‘ä»¬çš„AIé¡¹ç›®ä¸­çº§ç‰ˆå®Œæˆï¼</li>
</ul>
<hr/>
<p>é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œéšæ—¶åœ¨ç¾¤é‡Œ@æˆ‘ï¼Œæˆ–è€…ç›´æ¥æ‰“æˆ‘çš„ç”µè¯ã€‚</p>
<p><strong>è®°ä½</strong>ï¼šæˆ‘ä»¬æ˜¯ä¸€ä¸ªå›¢é˜Ÿï¼Œä½ çš„é—®é¢˜å°±æ˜¯å›¢é˜Ÿçš„é—®é¢˜ã€‚æ²¡æœ‰äººä¼šç¬‘ä½ é—®â€œè ¢é—®é¢˜â€ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½æ˜¯ä»é›¶å¼€å§‹çš„ã€‚</p>
<p>ç°åœ¨ï¼Œå¼€å§‹ç¬¬ä¸€æ­¥å§ï¼ä»æ‰“å¼€<code>github.com</code>å¼€å§‹ã€‚</p>
<hr/>
<h3 data-id="heading-32">ğŸ“ é™„å½•ï¼šæ‰€æœ‰é“¾æ¥æ±‡æ€»</h3>
<h4 data-id="heading-33">å¿…å¤‡ç½‘ç«™</h4>
<ol>
<li>GitHubæ³¨å†Œï¼š<code>https://github.com</code></li>
<li>Gitä¸‹è½½ï¼š<code>https://git-scm.com/downloads</code></li>
<li>VS Codeä¸‹è½½ï¼š<code>https://code.visualstudio.com</code></li>
</ol>
<h4 data-id="heading-34">å›¢é˜Ÿèµ„æº</h4>
<ol>
<li>é¡¹ç›®åœ°å€ï¼š<code>https://github.com/hhh-dahah/CyberTCM.git</code></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>