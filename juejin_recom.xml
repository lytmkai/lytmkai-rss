<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ & ç­–ç•¥æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7590915294446485531</link>    <guid>https://juejin.cn/post/7590915294446485531</guid>    <pubDate>2026-01-03T22:57:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590915294446485531" data-draft-id="7590608345923485722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ &amp; ç­–ç•¥æ¨¡å¼"/> <meta itemprop="keywords" content="Python,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-03T22:57:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸åŠ ç³–435"/> <meta itemprop="url" content="https://juejin.cn/user/1464990724787549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾è®¡æ¨¡å¼ -- é€‚é…å™¨ &amp; ç­–ç•¥æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1464990724787549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸åŠ ç³–435
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T22:57:00.000Z" title="Sat Jan 03 2026 22:57:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜ï¼šAPIæ¥å£ä¸ç»Ÿä¸€</h2>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š<br/>
å‡è®¾ä½ è¦å‘é€é‚®ä»¶ï¼Œä½†ä¸åŒæœåŠ¡å•†è°ƒç”¨æ–¹å¼ä¸åŒã€‚æ¯”å¦‚å‘é€é‚®ä»¶ï¼ŒSendGridã€Mailgunã€Microsoft Graph éƒ½èƒ½å‘ï¼Œä½†è°ƒç”¨æ–¹å¼å¤©å·®åœ°åˆ«</p>
<p>SendGrid çš„è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># SendGrid SDKçš„è°ƒç”¨æ–¹å¼</span>
<span class="hljs-attr">sg</span> = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
<span class="hljs-attr">message</span> = Mail(
    <span class="hljs-attr">from_email</span>=<span class="hljs-string">'from@example.com'</span>,
    <span class="hljs-attr">to_emails</span>=<span class="hljs-string">'to@example.com'</span>,
    <span class="hljs-attr">subject</span>=<span class="hljs-string">'Hello'</span>,
    <span class="hljs-attr">plain_text_content</span>=<span class="hljs-string">'World'</span>
)
<span class="hljs-attr">response</span> = sg.send(message)
</code></pre>
<p>Mailgun çš„è°ƒç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># Mailgun SDKçš„è°ƒç”¨æ–¹å¼</span>
requests.post(
    <span class="hljs-string">"https://api.mailgun.net/v3/your-domain/messages"</span>,
    auth=(<span class="hljs-string">"api"</span>, <span class="hljs-string">"your-api-key"</span>),
    data={
        <span class="hljs-string">"from"</span>: <span class="hljs-string">"from@example.com"</span>,
        <span class="hljs-string">"to"</span>: <span class="hljs-string">"to@example.com"</span>,
        <span class="hljs-string">"subject"</span>: <span class="hljs-string">"Hello"</span>,
        <span class="hljs-string">"text"</span>: <span class="hljs-string">"World"</span>
    }
)
</code></pre>
<p>é—®é¢˜ï¼šçœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿå‚æ•°åä¸ä¸€æ ·ï¼ˆ<code>to_emails</code> vs <code>to</code>ï¼‰ï¼Œè°ƒç”¨æ–¹å¼ä¸ä¸€æ ·ï¼ˆå¯¹è±¡æ–¹æ³• vs HTTPè¯·æ±‚ï¼‰ï¼Œè¿”å›æ ¼å¼ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<p><strong>å¦‚æœç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¸­è°ƒç”¨è¿™äº›SDKï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¢å•æœåŠ¡ä¸­</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_order_confirmation</span>(<span class="hljs-params">order_id</span>):
    sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
    message = Mail(...)
    sg.send(message)

<span class="hljs-comment"># ç”¨æˆ·æœåŠ¡ä¸­</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_welcome_email</span>(<span class="hljs-params">user_email</span>):
    sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
    message = Mail(...)
    sg.send(message)

<span class="hljs-comment"># ... è¿˜æœ‰20ä¸ªåœ°æ–¹éƒ½åœ¨è°ƒç”¨SendGrid</span>
</code></pre>
<p>å¦‚æœè¦æ¢æˆMailgunï¼Œå¾—æŠŠæ‰€æœ‰åœ°æ–¹éƒ½æ”¹ä¸€éã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°è£…æˆä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to, subject, content, provider=<span class="hljs-string">'sendgrid'</span></span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        sg = sendgrid.SendGridAPIClient(api_key=<span class="hljs-string">'SG.xxx'</span>)
        message = Mail(from_email=..., to_emails=to, ...)
        sg.send(message)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        requests.post(<span class="hljs-string">"https://api.mailgun.net/v3/..."</span>, 
                     auth=(<span class="hljs-string">"api"</span>, <span class="hljs-string">"..."</span>), 
                     data={<span class="hljs-string">"from"</span>: ..., <span class="hljs-string">"to"</span>: to, ...})
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'microsoft_graph'</span>:
        <span class="hljs-comment"># åˆæ˜¯å¦ä¸€å¥—ä»£ç </span>
        ...

<span class="hljs-comment"># ä¸šåŠ¡ä»£ç å°±å¯ä»¥è¿™æ ·ç”¨äº†</span>
send_email(<span class="hljs-string">"user@example.com"</span>, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"World"</span>, provider=<span class="hljs-string">'sendgrid'</span>)
</code></pre>
<p>å°è£…åç¡®å®å¥½å¤šäº†ï¼Œä¸šåŠ¡ä»£ç æ¸…çˆ½äº†ã€‚ä½†æ˜¯è¿™ç§å°è£…æ–¹å¼ä¾ç„¶æœ‰é—®é¢˜ã€‚</p>
<p><strong>å‡½æ•°è¶Šæ¥è¶Šé•¿</strong>ï¼šæ–°å¢æœåŠ¡å•†è¦åœ¨è¿™ä¸ªå‡½æ•°ä¸­ç»§ç»­åŠ ä¸€ä¸ªåˆ†æ”¯ï¼Œä»£ç è¶Šæ¥è¶Šé•¿ã€‚æ‰¾ä¸ªæŸä¸ªç‰¹å®šçš„æœåŠ¡å•†è¦åœ¨è¿™ä¸ªå¾ˆé•¿çš„å‡½æ•°ä¸­æ‰¾ï¼Œå®¹æ˜“æ”¹é”™ã€‚æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸å¥½ç»´æŠ¤ã€‚<br/>
å½“ç„¶ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒæŠŠä¸åŒæœåŠ¡å•†å°è£…åˆ°ä¸åŒçš„ç±»ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SendGridEmail</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># SendGrid çš„ä»£ç </span>
        ...

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MailgunEmail</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># Mailgun çš„ä»£ç </span>
        ...

</code></pre>
<p>å¥½å¤šäº†ï¼Œ<strong>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸ªå…³é”®é—®é¢˜</strong>ï¼š<strong>æ¥å£ä¸ç»Ÿä¸€</strong>ï¼<br/>
çœ‹å›æœ€å¼€å§‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>SendGrid ç”¨ <code>to_emails</code>ï¼ŒMailgun ç”¨ <code>to</code></li>
<li>SendGrid ç”¨ <code>plain_text_content</code>ï¼ŒMailgun ç”¨ <code>text</code></li>
</ul>
<p><strong>å¦‚æœåªæ˜¯ç®€å•å°è£…åˆ°ç±»é‡Œï¼Œæ¥å£è¿˜æ˜¯ä¸ç»Ÿä¸€</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯ä¸ªæœåŠ¡å•†çš„æ¥å£ä¸ä¸€æ ·ï¼Œä¸šåŠ¡ä»£ç è¿˜æ˜¯è¦åˆ¤æ–­ï¼Œè€Œä¸”è°ƒç”¨æ–¹å¼è¿˜ä¸ä¸€æ ·!</span>
<span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
    email = SendGridEmail()
    email.send(to_emails=to, subject=subject, plain_text_content=content)  <span class="hljs-comment"># å‚æ•°åä¸ä¸€æ ·</span>
<span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
    email = MailgunEmail()
    email.send(to=to, subject=subject, text=content)  <span class="hljs-comment"># å‚æ•°åä¸ä¸€æ ·</span>
</code></pre>
<p>é€‚é…å™¨æ¨¡å¼çš„ä½œç”¨**ï¼š<strong>ç»Ÿä¸€æ¥å£</strong>
æˆ‘ä»¬æƒ³è¦ä¸šåŠ¡ä»£ç åªå…³å¿ƒ"å‘é‚®ä»¶"è¿™ä¸ªåŠŸèƒ½ï¼Œä¸å…³å¿ƒç”¨å“ªä¸ªæœåŠ¡å•†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸šåŠ¡ä»£ç åªéœ€è¦è¿™æ ·å†™ï¼Œä¸ç®¡ç”¨å“ªä¸ªæœåŠ¡å•†</span>
manager.send_email(
    to=<span class="hljs-string">"user@example.com"</span>,
    subject=<span class="hljs-string">"Hello"</span>,
    content=<span class="hljs-string">"World"</span>
)

<span class="hljs-comment"># åˆ‡æ¢æœåŠ¡å•†ï¼Ÿæ”¹é…ç½®æ–‡ä»¶å³å¯ï¼Œæ— éœ€ä¿®æ”¹å‘é‚®ä»¶ä»£ç </span>
</code></pre>
<h2 data-id="heading-1">é€‚é…å™¨æ¨¡å¼</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼ï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>è®©æ‰€æœ‰æœåŠ¡å•†çš„ç±»å®ç°åŒä¸€ä¸ªæ¥å£</strong>ã€‚</p>
<p><strong>ç®€å•è¯´</strong>ï¼šé€‚é…å™¨æ¨¡å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ª<strong>ç»Ÿä¸€çš„æ¥å£</strong>ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œè®©ä¸åŒçš„å®ç°ç±»éƒ½éµå¾ªè¿™ä¸ªæ¥å£ï¼Œè¿™æ ·ä¸šåŠ¡ä»£ç å°±å¯ä»¥ç»Ÿä¸€è°ƒç”¨ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå®ç°ã€‚</p>
<p><strong>ç”Ÿæ´»ä¸­çš„ä¾‹å­</strong>ï¼šä¸­å›½æ‰‹æœºæ’å¤´æ’ä¸è¿›æ¬§æ´²æ’åº§ï¼Œä¹°ä¸ªè½¬æ¢æ’å¤´å°±è¡Œäº†ã€‚è½¬æ¢æ’å¤´åšäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä¸æ”¹å˜ä½ çš„æ‰‹æœº</li>
<li>ä¸æ”¹å˜æ¬§æ´²çš„æ’åº§</li>
<li>åªæ˜¯åœ¨ä¸­é—´åšäº†ä¸ª"ç¿»è¯‘"ï¼Œç»Ÿä¸€äº†æ¥å£</li>
</ul>
<p><strong>æŠ½è±¡ç±»</strong>ï¼ˆAbstract Classï¼‰å°±æ˜¯å®šä¹‰äº†æ¥å£ä½†è‡ªå·±ä¸å®ç°å…·ä½“åŠŸèƒ½çš„ç±»ã€‚å®ƒå°±åƒä¸€ä¸ª"æ¨¡æ¿"ï¼Œå‘Šè¯‰å­ç±»"ä½ å¿…é¡»å®ç°è¿™äº›æ–¹æ³•"ã€‚<br/>
åœ¨ Python ä¸­ï¼Œä½¿ç”¨ <code>ABC</code>ï¼ˆAbstract Base Classï¼‰å’Œ <code>@abstractmethod</code> æ¥å®šä¹‰æŠ½è±¡ç±»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEmailAdapter</span>(<span class="hljs-title class_ inherited__">ABC</span>):  <span class="hljs-comment"># ABC è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»</span>
<span class="hljs-meta">    @abstractmethod  </span><span class="hljs-comment"># è¿™ä¸ªè£…é¥°å™¨è¡¨ç¤ºå­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># æŠ½è±¡æ–¹æ³•ä¸å†™å…·ä½“å®ç°ï¼Œåªæ˜¯å®šä¹‰æ¥å£</span>
</code></pre>
<h3 data-id="heading-3">é€‚é…å™¨æ¨¡å¼çš„å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. å…ˆå®šä¹‰ç»Ÿä¸€æ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰</span>
<span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseEmailAdapter</span>(<span class="hljs-title class_ inherited__">ABC</span>):  <span class="hljs-comment"># æŠ½è±¡åŸºç±»</span>
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># ç»Ÿä¸€çš„å‚æ•°</span>
        <span class="hljs-string">"""å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•"""</span>
        <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># 2. æ¯ä¸ªæœåŠ¡å•†å®ç°è¿™ä¸ªæ¥å£ï¼ˆç»§æ‰¿æŠ½è±¡ç±»ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SendGridAdapter</span>(<span class="hljs-title class_ inherited__">BaseEmailAdapter</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># å¿…é¡»å’Œæ¥å£ä¸€æ ·</span>
        <span class="hljs-comment"># SendGrid çš„ä»£ç ï¼Œå†…éƒ¨è½¬æ¢æˆ SendGrid çš„è°ƒç”¨æ–¹å¼</span>
        sg = sendgrid.SendGridAPIClient(api_key=self.api_key)
        message = Mail(
            from_email=self.from_email,
            to_emails=to,  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ toï¼Œå†…éƒ¨è½¬æ¢æˆ SendGrid çš„ to_emails</span>
            subject=subject,
            plain_text_content=content  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ contentï¼Œå†…éƒ¨è½¬æ¢æˆ plain_text_content</span>
        )
        <span class="hljs-keyword">return</span> sg.send(message)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MailgunAdapter</span>(<span class="hljs-title class_ inherited__">BaseEmailAdapter</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">self, to, subject, content</span>):  <span class="hljs-comment"># å¿…é¡»å’Œæ¥å£ä¸€æ ·</span>
        <span class="hljs-comment"># Mailgun çš„ä»£ç ï¼Œå†…éƒ¨è½¬æ¢æˆ Mailgun çš„è°ƒç”¨æ–¹å¼</span>
        requests.post(
            <span class="hljs-string">"https://api.mailgun.net/v3/your-domain/messages"</span>,
            auth=(<span class="hljs-string">"api"</span>, self.api_key),
            data={
                <span class="hljs-string">"from"</span>: self.from_email,
                <span class="hljs-string">"to"</span>: to,  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ toï¼ŒMailgun ä¹Ÿç”¨ toï¼Œç›´æ¥ä¼ </span>
                <span class="hljs-string">"subject"</span>: subject,
                <span class="hljs-string">"text"</span>: content  <span class="hljs-comment"># ç»Ÿä¸€æ¥å£ç”¨ contentï¼Œå†…éƒ¨è½¬æ¢æˆ Mailgun çš„ text</span>
            }
        )



<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_adapter</span>(<span class="hljs-params">provider</span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        <span class="hljs-keyword">return</span> SendGridAdapter(...)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        <span class="hljs-keyword">return</span> MailgunAdapter(...)
<span class="hljs-comment"># 3. ä¸šåŠ¡ä»£ç åªéœ€è¦ä¾èµ–æ¥å£ï¼Œä¸éœ€è¦çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªæœåŠ¡å•†</span>
adapter = create_adapter(provider)  <span class="hljs-comment"># æ ¹æ®é…ç½®åˆ›å»ºé€‚é…å™¨ï¼ˆè¿™é‡Œåªæœ‰ä¸€æ¬¡ if-elseï¼‰</span>
adapter.send(to, subject, content)  <span class="hljs-comment"># ç»Ÿä¸€è°ƒç”¨ï¼Œå‚æ•°éƒ½ä¸€æ ·ï¼</span>
</code></pre>
<h2 data-id="heading-4">ç­–ç•¥æ¨¡å¼ï¼šä¼˜åŒ–é€‰æ‹©é€»è¾‘</h2>
<h3 data-id="heading-5">æ ¸å¿ƒæ€æƒ³</h3>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šå°è£…é€‰æ‹©é€»è¾‘ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨å“ªä¸ªç­–ç•¥</p>
<h3 data-id="heading-6">ä¸¤ç§å®ç°æ–¹å¼</h3>
<p><strong>æ–¹å¼1ï¼šif-elseï¼ˆç®€å•å®ç°ï¼‰</strong>
æ ¹æ® <code>provider</code> é€‰æ‹©ä¸åŒçš„é€‚é…å™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_adapter</span>(<span class="hljs-params">provider</span>):
    <span class="hljs-keyword">if</span> provider == <span class="hljs-string">'sendgrid'</span>:
        <span class="hljs-keyword">return</span> SendGridAdapter(...)
    <span class="hljs-keyword">elif</span> provider == <span class="hljs-string">'mailgun'</span>:
        <span class="hljs-keyword">return</span> MailgunAdapter(...)
    <span class="hljs-comment"># æ·»åŠ æ–°æœåŠ¡å•†ï¼Ÿåˆè¦åŠ ä¸€ä¸ª elif</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šæ¯æ¬¡æ·»åŠ æ–°æœåŠ¡å•†ï¼Œéƒ½è¦æ”¹è¿™ä¸ªå‡½æ•°ï¼ŒåŠ æ–°çš„ <code>elif</code>ã€‚</p>
<p><strong>æ–¹å¼2ï¼šå­—å…¸æ˜ å°„ï¼ˆä¼˜é›…å®ç°ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailManager</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ç­–ç•¥æ˜ å°„ï¼šæŠŠæœåŠ¡å•†åç§°æ˜ å°„åˆ°å¯¹åº”çš„é€‚é…å™¨ç±»</span>
        self._adapter_classes = {
            <span class="hljs-string">'sendgrid'</span>: SendGridAdapter,
            <span class="hljs-string">'mailgun'</span>: MailgunAdapter,
            <span class="hljs-string">'microsoft_graph'</span>: MicrosoftGraphAdapter
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_adapter</span>(<span class="hljs-params">self, provider</span>):
        <span class="hljs-comment"># ä»å­—å…¸ä¸­è·å–å¯¹åº”çš„é€‚é…å™¨ç±»</span>
        adapter_class = self._adapter_classes.get(provider)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> adapter_class:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"ä¸æ”¯æŒçš„é‚®ä»¶æœåŠ¡å•†: <span class="hljs-subst">{provider}</span>"</span>)
        <span class="hljs-keyword">return</span> adapter_class(api_key=..., from_email=...)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">self, to, subject, content</span>):
        <span class="hljs-comment"># 1. ä»é…ç½®è·å–æœåŠ¡å•†</span>
        provider = self._get_provider_from_config()
        
        <span class="hljs-comment"># 2. åˆ›å»ºé€‚é…å™¨ï¼ˆç­–ç•¥æ¨¡å¼ï¼šæ ¹æ®é…ç½®é€‰æ‹©ï¼‰</span>
        adapter = self._create_adapter(provider)
        
        <span class="hljs-comment"># 3. è°ƒç”¨é€‚é…å™¨çš„ send æ–¹æ³•ï¼ˆé€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€æ¥å£ï¼‰</span>
        <span class="hljs-keyword">return</span> adapter.send(to, subject, content)
</code></pre>
<h2 data-id="heading-7">ä¸¤ç§æ¨¡å¼çš„åä½œ</h2>
<h3 data-id="heading-8">å®Œæ•´æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡ä»£ç 
  â†“
EmailManager<span class="hljs-selector-class">.send_email</span>()  (ç­–ç•¥æ¨¡å¼ï¼šé€‰æ‹©é€‚é…å™¨)
  â†“
<span class="hljs-built_in">_create_adapter</span>(provider)  (ç­–ç•¥æ¨¡å¼ï¼šæ ¹æ®é…ç½®é€‰æ‹©)
  â†“
SendGridAdapter / MailgunAdapter  (é€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€æ¥å£)
  â†“
adapter<span class="hljs-selector-class">.send</span>()            (é€‚é…å™¨æ¨¡å¼ï¼šç»Ÿä¸€è°ƒç”¨)
  â†“
SendGrid API / Mailgun API (ç¬¬ä¸‰æ–¹API)
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<h3 data-id="heading-10">é€‚é…å™¨æ¨¡å¼</h3>
<p><strong>è§£å†³çš„é—®é¢˜</strong>ï¼šæ¥å£ä¸ç»Ÿä¸€<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®šä¹‰ç»Ÿä¸€æ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œæ‰€æœ‰é€‚é…å™¨éƒ½å®ç°ç›¸åŒçš„æ¥å£<br/>
<strong>ä»·å€¼</strong>ï¼šä¸šåŠ¡ä»£ç å¯ä»¥ç»Ÿä¸€è°ƒç”¨ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“å®ç°</p>
<h3 data-id="heading-11">ç­–ç•¥æ¨¡å¼</h3>
<p><strong>æ ¸å¿ƒ</strong>ï¼šå°è£…é€‰æ‹©é€»è¾‘ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©ä½¿ç”¨å“ªä¸ªç­–ç•¥</p>
<p><strong>åæ€</strong></p>
<p>äººç”Ÿæ€ä¹ˆè¿‡éƒ½å¯ä»¥ã€‚<br/>
ä½ æƒ³è¦æ€æ ·çš„äººç”Ÿï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰]]></title>    <link>https://juejin.cn/post/7590929624742903858</link>    <guid>https://juejin.cn/post/7590929624742903858</guid>    <pubDate>2026-01-04T00:18:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590929624742903858" data-draft-id="7590849961727377435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,WebRTC"/> <meta itemprop="datePublished" content="2026-01-04T00:18:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å_"/> <meta itemprop="url" content="https://juejin.cn/user/1521379822805176"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebRTC å…¥é—¨ï¼šä¸€åˆ†é’Ÿç†è§£ä¼šè®®ç³»ç»Ÿçš„ä¸‰ç§æ¶æ„ï¼ˆMesh/SFU/MCUï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379822805176/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T00:18:52.000Z" title="Sun Jan 04 2026 00:18:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ WebRTC ä¸­ï¼Œä¸¤ç‚¹ä¹‹é—´çš„ P2P é€šè¯æ˜¯åŸºç¡€ï¼Œä½†å½“å‚ä¼šäººæ•°å¢åŠ åˆ° 3 äººã€4 äººç”šè‡³æ›´å¤šæ—¶ï¼Œå•çº¯çš„ç‚¹å¯¹ç‚¹è¿æ¥å°±ä¼šé¢ä¸´æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥æµ…å‡ºåœ°äº†è§£ WebRTC ä¼šè®®çš„ä¸‰ç§ä¸»æµæ¶æ„ï¼š<strong>Mesh</strong>ã€<strong>SFU</strong> å’Œ <strong>MCU</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. Mesh æ¶æ„ï¼šå®Œå…¨äº’è”çš„ç½‘çŠ¶ç»“æ„</h2>
<p>è¿™æ˜¯æœ€ç›´è§‚ã€ä¹Ÿæ˜¯æœ€åŸºç¡€çš„æ¶æ„å½¢å¼ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒåŸç†</h3>
<p>å‡è®¾æœ‰ Aã€Bã€Cã€D å››ä¸ªäººéœ€è¦å‚ä¼šã€‚åœ¨ WebRTC ä»…æ”¯æŒ P2P çš„å‰æä¸‹ï¼Œä¸ºäº†è®©æ‰€æœ‰äººéƒ½èƒ½äº’é€šï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éƒ½å¿…é¡»å’Œå…¶ä½™æ‰€æœ‰äººå»ºç«‹è¿æ¥ã€‚</p>
<ul>
<li><strong>A çš„è§†è§’</strong>ï¼šA å¿…é¡»åˆ†åˆ«å’Œ Bã€Cã€D å»ºç«‹å…³è”ï¼Œå½¢æˆ A-Bã€A-Cã€A-D ä¸‰æ¡é€šè·¯ã€‚åªæœ‰è¿™æ ·ï¼ŒA æ‰èƒ½æŠŠè§†é¢‘ä¼ ç»™ä»–ä»¬ï¼Œå¹¶æ¥æ”¶ä»–ä»¬çš„è§†é¢‘ã€‚</li>
<li><strong>B çš„è§†è§’</strong>ï¼šåŒç†ï¼ŒB ä¹Ÿè¦å’Œ Aã€Cã€D å»ºç«‹å…³è”ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e86225d7cd5c4fb2b9c58c50cb510117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=jo8UPPTnqmw4dqGqlOSVksJ%2Bptk%3D" alt="image-20251228231759695.png" loading="lazy"/></p>
<h3 data-id="heading-2">ä»£ç å±‚é¢</h3>
<p>ä» WebRTC çš„æ ¸å¿ƒè½½ä½“ <strong>PeerConnection</strong> æ¥çœ‹ï¼š</p>
<ul>
<li><strong>ä¸€å¯¹å…³è”å…³ç³» = ä¸€ä¸ª PeerConnection å¯¹è±¡</strong>ã€‚</li>
<li>ä¾‹å¦‚ A-B è¿™ä¸€å…³ç³»ï¼Œåœ¨ä»£ç ä¸­å®é™…å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª PeerConnection å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å†…éƒ¨ç»´æŠ¤ç€ A å’Œ B ä¹‹é—´çš„ <strong>SDP ä¿¡ä»¤</strong>å’Œ<strong>åª’ä½“ä¿¡æ¯</strong>ã€‚</li>
<li>å¦‚æœæ˜¯ 4 äººä¼šè®®ï¼ŒA çš„æµè§ˆå™¨é‡Œå°±éœ€è¦ç»´æŠ¤ 3 ä¸ª PeerConnection å¯¹è±¡ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¼˜ç¼ºç‚¹</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæœåŠ¡å™¨æˆæœ¬ä½ï¼ˆå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨è½¬å‘åª’ä½“æµï¼Œåªè´Ÿè´£ä¿¡ä»¤ï¼‰ï¼Œé€»è¾‘ç®€å•ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå®¢æˆ·ç«¯<strong>å¸¦å®½å‹åŠ›æå¤§</strong>ã€‚ä¸€ä¸ª N äººä¼šè®®éœ€è¦å»ºç«‹ <strong><code>N Ã— (N âˆ’ 1) / 2</code> æ¡ P2P è¿æ¥</strong>ï¼Œ æ¯ä¸ªå®¢æˆ·ç«¯éœ€è¦ç»´æŠ¤ <strong><code>N âˆ’ 1</code> æ¡ RTCPeerConnection</strong>ï¼Œè¿æ¥æ•°é‡å‘ˆå¹³æ–¹çº§å¢é•¿ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">2. SFU æ¶æ„ï¼šé«˜æ•ˆçš„â€œä¸­å¿ƒè½¬å‘â€</h2>
<p>SFUï¼ˆSelective Forwarding Unitï¼Œé€‰æ‹©æ€§è½¬å‘å•å…ƒï¼‰æ˜¯ç›®å‰ä¸»æµçš„ä¼šè®®æ¶æ„ã€‚å®ƒå¼•å…¥äº†ä¸€ä¸ªæœåŠ¡å™¨ä½œä¸ºä¸­è½¬ç«™ï¼Œå®¢æˆ·ç«¯åªå‘ä¸€è·¯æµç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è´Ÿè´£æŠŠè¿™è·¯æµâ€œå¤åˆ¶â€å¹¶è½¬å‘ç»™å…¶ä»–å‚ä¼šè€…ã€‚è€Œè¿™ä¸ªæœåŠ¡å™¨åˆ™è¢«ç§°ä¸º <strong>SFU æœåŠ¡å™¨</strong>ã€‚</p>
<h3 data-id="heading-5">æ ¸å¿ƒåŸç†</h3>
<p>ä¸ºäº†ç†è§£ SFUï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿å‘å¿«é€’åšæ¯”å–»ï¼š</p>
<ul>
<li>
<p><strong>Mesh æ¶æ„</strong>ï¼šå°±åƒæ˜¯ä½ ï¼ˆAï¼‰è¦ç»™ Bã€Cã€D ä¸‰ä¸ªäººé€ç¤¼ç‰©ï¼Œä½ éœ€è¦äº²è‡ªå¼€è½¦è·‘ä¸‰è¶Ÿï¼Œåˆ†åˆ«æŠŠç¤¼ç‰©é€åˆ°ä»–ä»¬æ¯ä¸ªäººæ‰‹é‡Œã€‚</p>
</li>
<li>
<p><strong>SFU æ¶æ„</strong>ï¼šå°±åƒæ˜¯ä¸€ä¸ª<strong>å¿«é€’é›†æ•£ä¸­å¿ƒ</strong>ã€‚</p>
<ul>
<li>ä½ ï¼ˆAï¼‰åªéœ€è¦æŠŠç¤¼ç‰©æ‰“åŒ…å‘ç»™é›†æ•£ä¸­å¿ƒï¼ˆSFU æœåŠ¡å™¨ï¼‰ã€‚</li>
<li>é›†æ•£ä¸­å¿ƒæ”¶åˆ°åï¼Œè´Ÿè´£æŠŠä½ çš„ç¤¼ç‰©åˆ†åˆ«æ´¾é€ç»™ Bã€Cã€Dã€‚</li>
<li>åŒç†ï¼ŒBã€Cã€D ä¹Ÿåªéœ€è¦æŠŠä»–ä»¬çš„ç¤¼ç‰©å‘ç»™é›†æ•£ä¸­å¿ƒï¼Œç”±é›†æ•£ä¸­å¿ƒç»Ÿä¸€è½¬å‘ç»™ä½ ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bac68f91bdb4d5abade15b95ee732d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=xTPmchB3T0IfFXdbajN8vV0uN04%3D" alt="image-20251229083354743.png" loading="lazy"/></p>
<h3 data-id="heading-6">ä»£ç å±‚é¢</h3>
<p>åœ¨ SFU æ¶æ„ä¸­ï¼Œä»£ç é€»è¾‘å‘ç”Ÿäº†è´¨çš„å˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>1 ä¸ª PeerConnection</strong>ï¼šæ— è®ºä¼šè®®å®¤é‡Œæœ‰å¤šå°‘äººï¼Œæ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ç»´æŠ¤ 1 ä¸ª PeerConnection å¯¹è±¡ã€‚</p>
<blockquote>
<p>è™½ç„¶æ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ç»´æŠ¤ <strong>1 ä¸ª RTCPeerConnection</strong>ï¼Œä½†è¿™ä¸ªè¿æ¥ä¸­ä¼šæ‰¿è½½ <strong>å¤šè·¯ MediaStreamTrack</strong>ã€‚å› æ­¤å®¢æˆ·ç«¯çš„<strong>ä¸‹è¡Œå¸¦å®½å’Œè§£ç å‹åŠ›ï¼Œä»ç„¶éšå‚ä¼šäººæ•°çº¿æ€§å¢é•¿ï¼ˆNâˆ’1ï¼‰</strong> ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å¯¹ç«¯æ°¸è¿œæ˜¯ SFU</strong>ï¼šè¿™ä¸ª PeerConnection çš„è¿æ¥å¯¹è±¡æ°¸è¿œæ˜¯ SFU æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯å…¶ä»–å®¢æˆ·ç«¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">æ¶æ„ä¼˜åŠ¿</h3>
<ol start="0">
<li><strong>å®¢æˆ·ç«¯è¿æ¥æ•°ä½</strong>ï¼šæ¯ä¸ªå®¢æˆ·ç«¯åªéœ€è¦ 1 ä¸ª PeerConnection</li>
<li><strong>ä¸Šè¡Œå¸¦å®½å‹åŠ›å°</strong>ï¼šæ— è®ºä¼šè®®ä¸­æœ‰å¤šå°‘äººï¼Œå®¢æˆ·ç«¯å§‹ç»ˆåªä¸Šä¼  <strong>1 è·¯éŸ³è§†é¢‘æµ</strong></li>
<li><strong>å»¶è¿Ÿä½</strong>ï¼šSFU åªåšåª’ä½“è½¬å‘ï¼Œä¸è§£ç ã€ä¸æ··æµï¼Œå»¶è¿Ÿæ¥è¿‘ P2P</li>
<li><strong>æ‰©å±•æ€§å¥½</strong>ï¼šæ”¯æŒå‡ åäººè§„æ¨¡çš„ä¼šè®®ï¼Œæ˜¯å½“å‰ä¸»æµè§†é¢‘ä¼šè®®ç³»ç»Ÿçš„æ ¸å¿ƒæ¶æ„</li>
</ol>
<h3 data-id="heading-8">ç¼ºç‚¹</h3>
<ol start="0">
<li><strong>ä¸‹è¡Œå¸¦å®½ä»ç„¶éšäººæ•°å¢é•¿</strong>ï¼šå®¢æˆ·ç«¯éœ€è¦æ¥æ”¶ <strong>Nâˆ’1 è·¯åª’ä½“æµ</strong>ï¼Œä¸‹è¡Œå¸¦å®½å’Œè§£ç å‹åŠ›çº¿æ€§å¢åŠ ã€‚</li>
<li><strong>æœåŠ¡å™¨å¸¦å®½æˆæœ¬é«˜</strong>ï¼šè™½ç„¶ä¸åƒ CPUï¼Œä½†å¯¹æœåŠ¡å™¨å‡ºå£å¸¦å®½è¦æ±‚å¾ˆé«˜ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">3. MCU æ¶æ„ï¼šå…¨èƒ½çš„â€œåª’ä½“å¤§è„‘â€</h2>
<p>MCUï¼ˆMultipoint Control Unitï¼Œå¤šç‚¹æ§åˆ¶å•å…ƒï¼‰å®ƒå¤§ä½“ä¸Šå’Œ SFU ç±»ä¼¼ï¼Œä½†å®ƒä¸ä»…ä»…æ˜¯è½¬å‘ï¼Œè¿˜ä¼šå¯¹æµè¿›è¡Œ<strong>æ··åˆï¼ˆMixingï¼‰</strong> ã€è½¬ç å’Œå¤„ç†ã€‚æœåŠ¡å™¨æŠŠæ‰€æœ‰äººçš„ç”»é¢æ‹¼åˆæˆä¸€å¼ å›¾ï¼Œç¼–ç æˆä¸€è·¯è§†é¢‘æµå‘ç»™å®¢æˆ·ç«¯ã€‚</p>
<h3 data-id="heading-10">é€‚ç”¨åœºæ™¯</h3>
<p>MCU ä¸“ä¸º<strong>åª’ä½“åœºæ™¯å¤æ‚</strong>çš„æƒ…å†µè®¾è®¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>å¤šç§ä¸åŒè®¾å¤‡æ¥å…¥</strong>ï¼šæ¥å…¥ä¼šè®®çš„ä¸åªæ˜¯æ‰‹æœºç”µè„‘ï¼Œè¿˜æœ‰ç›‘æ§æ‘„åƒå¤´ï¼ˆRTSPæµï¼‰ã€ç¡¬ä»¶ç»ˆç«¯ã€‚</li>
<li><strong>ç›´æ’­ä¸è½¬æ’­</strong>ï¼šéœ€è¦å°†ä¼šè®®ç”»é¢æ¨æµç»™æˆåƒä¸Šä¸‡çš„è§‚ä¼—ã€‚</li>
<li><strong>äº‘ç«¯å½•åˆ¶</strong>ï¼šéœ€è¦å¯¹ä¼šè®®è¿›è¡Œé«˜è´¨é‡å­˜æ¡£ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f321edda01a4697a07125170e3dc1b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5Y2BXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768090732&amp;x-signature=uqOxVS7o0Phssms6Rdz8WfiH2hw%3D" alt="image-20251230081150459.png" loading="lazy"/></p>
<h3 data-id="heading-11">MCU æœåŠ¡å™¨å†…éƒ¨åšçš„äº‹</h3>
<p>æ‰€æœ‰å‚ä¼šçš„æµé¦–å…ˆè¿›å…¥ MCU æœåŠ¡å™¨ï¼Œåœ¨è¿™é‡Œï¼Œå®ƒä»¬ä¼šç»å†æ·±åº¦çš„å¤„ç†ï¼š</p>
<ol start="0">
<li>
<p><strong>åª’ä½“è½¬ç </strong>ï¼šè¿™æ˜¯ MCU çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<ul>
<li>æ¯”å¦‚ç›‘æ§æ‘„åƒå¤´çš„è§†é¢‘æ˜¯ H.265 æ ¼å¼ï¼Œæµè§ˆå™¨ä¸æ”¯æŒï¼ŒMCU å¯ä»¥å°†å…¶å®æ—¶è½¬ç ä¸º H.264ã€‚</li>
<li>å°† RTMPã€RTSP ç­‰åè®®è½¬æ¢ä¸º WebRTC æ ‡å‡†çš„ RTC æµï¼Œæˆ–è€…å°† RTP è½¬ä¸º FLV ä¾›ç›´æ’­ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>äº‘ç«¯å½•åˆ¶</strong>ï¼šæœåŠ¡å™¨å¯ä»¥ç›´æ¥è¿‡æ»¤å¹¶å½•åˆ¶ç»è¿‡çš„æµã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡ç«¯ AI æ£€æµ‹</strong>ï¼š</p>
<ul>
<li>åœ¨å¤§å‹ç›´æ’­ä¸­ï¼Œå†…å®¹å®‰å…¨è‡³å…³é‡è¦ã€‚MCU å¯ä»¥åœ¨æœåŠ¡ç«¯æ¥å…¥ AI é‰´åˆ«ä¸­å¿ƒï¼Œå®æ—¶æ£€æµ‹ç›´æ’­å†…å®¹ã€‚</li>
<li>ä¸€æ—¦å‘ç°éæ³•å†…å®¹ï¼ŒAI å¯ä»¥ç›´æ¥åˆ‡æ–­ç›´æ’­ï¼Œç¡®ä¿å®‰å…¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¶ä»–èƒ½åŠ›</strong>ï¼šåª’ä½“æµæ··åˆï¼ˆå°†å¤šä¸ªäººç”»é¢åˆæˆä¸€ä¸ªç”»é¢ï¼‰ã€éŸ³é¢‘æå–ã€è§†é¢‘æŠ½å¸§å­˜æ¡£ç­‰ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>åœ¨ WebRTC å¤šäººå®æ—¶é€šä¿¡ä¸­ï¼Œ<strong>æ¶æ„é€‰æ‹©çš„æœ¬è´¨</strong>ï¼Œæ˜¯å¦‚ä½•åœ¨ <strong>å®¢æˆ·ç«¯å‹åŠ›ã€æœåŠ¡å™¨æˆæœ¬ã€å»¶è¿Ÿå’ŒåŠŸèƒ½å¤æ‚åº¦</strong> ä¹‹é—´åšå–èˆã€‚</p>





















































<table><thead><tr><th>ç»´åº¦</th><th>Mesh</th><th>SFU</th><th>MCU</th></tr></thead><tbody><tr><td>PeerConnection</td><td>Nâˆ’1</td><td>1</td><td>1</td></tr><tr><td>å®¢æˆ·ç«¯ä¸Šè¡Œ</td><td>Nâˆ’1 è·¯</td><td>1 è·¯</td><td>1 è·¯</td></tr><tr><td>å®¢æˆ·ç«¯ä¸‹è¡Œ</td><td>Nâˆ’1 è·¯</td><td>Nâˆ’1 è·¯</td><td>1 è·¯</td></tr><tr><td>æœåŠ¡å™¨å‹åŠ›</td><td>æä½</td><td>ä¸­ï¼ˆå¸¦å®½ï¼‰</td><td>æé«˜ï¼ˆè®¡ç®—ï¼‰</td></tr><tr><td>å»¶è¿Ÿ</td><td>æœ€ä½</td><td>ä½</td><td>è¾ƒé«˜</td></tr><tr><td>æ‰©å±•æ€§</td><td>æå·®</td><td>å¥½</td><td>å¾ˆå¥½</td></tr><tr><td>å…¸å‹åº”ç”¨</td><td>1v1</td><td>è§†é¢‘ä¼šè®®</td><td>ç›´æ’­ / èåˆ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element]]></title>    <link>https://juejin.cn/post/7591177139660455990</link>    <guid>https://juejin.cn/post/7591177139660455990</guid>    <pubDate>2026-01-04T00:47:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591177139660455990" data-draft-id="7590403249561190415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element"/> <meta itemprop="keywords" content="React.js,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-04T00:47:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yyyao"/> <meta itemprop="url" content="https://juejin.cn/user/4266531531793976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - React Element
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4266531531793976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yyyao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T00:47:13.000Z" title="Sun Jan 04 2026 00:47:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡çš„<code>React</code>ä»£ç ç‰ˆæœ¬ä¸º<code>18.2.0</code></p>
<p>å¯è°ƒè¯•çš„ä»£ç ä»“åº“ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyyyao-hh%2Freact-debug%2Ftree%2Fmaster-pure" target="_blank" title="https://github.com/yyyao-hh/react-debug/tree/master-pure" ref="nofollow noopener noreferrer">GitHub - yyyao-hh/react-debug at master-pure</a></p>
<p><code>React Element</code>ä½œä¸º<code>React</code>æ¶æ„çš„åŸºçŸ³ï¼Œç†è§£å…¶æœ¬è´¨å’Œå·¥ä½œåŸç†å¯¹äºæ·±å…¥æŒæ¡<code>React</code>è‡³å…³é‡è¦ã€‚å¹¶ä¸”åé¢çš„ç« èŠ‚éƒ½ä¾æ‰˜äºå‰é¢åŸºç¡€çŸ¥è¯†çš„é“ºå«ï¼Œæ‰€ä»¥åŠ¡å¿…ä»”ç»†é˜…è¯»æœ¬ç« å†…å®¹ï¼ï¼ï¼</p>
<h2 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h2>
<p><strong>JSX</strong>ï¼ˆ<code>JavaScript XML</code>ï¼‰æ˜¯ä¸€ç§<code>JavaScript</code>çš„è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨<code>JavaScript</code>ä¸­ç›´æ¥ä¹¦å†™ç±»ä¼¼<code>HTML</code>çš„ç»“æ„ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ç®€æ´ã€ç›´è§‚ä¸”é«˜æ•ˆçš„æ–¹å¼æè¿° UI ç»„ä»¶ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.legacy.reactjs.org%2Fdocs%2Fintroducing-jsx.html" target="_blank" title="https://zh-hans.legacy.reactjs.org/docs/introducing-jsx.html" ref="nofollow noopener noreferrer">JSX ç®€ä»‹ â€“ React</a></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/index.js */</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">APP</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-2">ä» JSX åˆ° React Element</h3>
<p>å®é™…ä¸Šï¼Œ<code>JSX</code>å¹¶ä¸æ˜¯<code>React</code>ç›´æ¥æ‰§è¡Œçš„ä»£ç ï¼Œå®ƒä¼šè¢«ç¼–è¯‘æˆæ ‡å‡†çš„<code>JavaScript</code>ä»£ç ã€‚</p>
<ul>
<li>åœ¨ <code>React17</code>ä¹‹å‰ï¼Œ<code>JSX</code>ä»£ç éƒ½ä¼šè¢«è½¬åŒ–ä¸º<code>React.createElement</code>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚è€Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¹‹å‰çš„é¡¹ç›®ä¸­éœ€è¦å¼•å…¥<code>React</code>ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* createElement: src/react/packages/react/src/ReactElement.js */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">// JSX ä»£ç </span>
&lt;div className=<span class="hljs-string">"title"</span>&gt;<span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span>&lt;/div&gt;

<span class="hljs-comment">// ç¼–è¯‘ä¸º</span>
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">className</span>: <span class="hljs-string">'title'</span> }, <span class="hljs-string">'Hello World'</span>)
</code></pre>
<ul>
<li>åœ¨<code>React17</code>ä¹‹åï¼Œ<code>React</code>å’Œ<code>babel</code>è¿›è¡Œäº†åˆä½œï¼Œæ”¯æŒäº†<code>jsx-runtime</code>ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å¼•å…¥<code>React</code>ï¼Œè€Œæ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å¼•å…¥æ–°çš„<code>jsx</code>å‡½æ•° ã€‚</li>
</ul>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">/* jsx: src/react/packages/react/jsx-runtime.js */</span>

<span class="hljs-comment">// JSX ä»£ç   </span>
&lt;div className=<span class="hljs-string">"title"</span>&gt;Hello World&lt;/div&gt;

<span class="hljs-comment">// ç¼–è¯‘ä¸º</span>
import { jsx <span class="hljs-keyword">as</span> _jsx } <span class="hljs-keyword">from</span> <span class="hljs-string">'react/jsx-runtime'</span>
<span class="hljs-title function_ invoke__">_jsx</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">className</span>: <span class="hljs-string">'title'</span>, <span class="hljs-attr">children</span>: <span class="hljs-string">'Hello World'</span> })
</code></pre>
<p>æ–°æ¨¡å¼é…ç½®ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">{
  <span class="hljs-string">"plugins"</span>: <span class="hljs-string">[["@babel/plugin-transform-react-jsx", { "runtime": "automatic" }]]</span>
}
</code></pre>
<blockquote>
<p>ä½¿ç”¨<code>create-react-app</code>æˆ–<code>Vite</code>ç­‰ç°ä»£å·¥å…·é“¾ï¼Œé€šå¸¸é»˜è®¤ä½¿ç”¨æ–°æ¨¡å¼</p>
</blockquote>
<p>ä½†æ˜¯æ— è®ºæ˜¯ä¸Šé¢çš„å“ªç§è½¬æ¢æ–¹å¼ï¼Œæœ€ç»ˆç»“æœéƒ½æ˜¯è¢«è½¬åŒ–ä¸ºä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œå®ƒæè¿°äº†ä½ å¸Œæœ›åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-3">React Element çš„æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/* src/react/packages/shared/ReactElementType.js */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactElement</span> = {|
  <span class="hljs-attr">$$typeof</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">ref</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">props</span>: <span class="hljs-built_in">any</span>,
  <span class="hljs-attr">_owner</span>: <span class="hljs-built_in">any</span>

  <span class="hljs-comment">// çœç•¥ __DEV__ ç¯å¢ƒçš„ä¸€äº›å±æ€§</span>
|};
</code></pre>
<p>æ¯ä¸ªå±æ€§çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>








































<table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><code>$$typeof</code></td><td>å”¯ä¸€æ ‡è¯†è¿™æ˜¯ä¸€ä¸ª<code>React Element</code>ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª<code>Symbol</code></td><td><code>Symbol(react.element)</code></td></tr><tr><td><code>type</code></td><td>å…ƒç´ çš„ç±»å‹</td><td>- å­—ç¬¦ä¸²ï¼šè¡¨ç¤ºåŸç”Ÿ<code>DOM</code>èŠ‚ç‚¹ï¼ˆ<code>'div'</code>ï¼‰<br/>- å‡½æ•°æˆ–ç±»ï¼šè¡¨ç¤ºè‡ªå®šä¹‰ç»„ä»¶ï¼ˆ<code>MyComp</code>ï¼‰</td></tr><tr><td><code>key</code></td><td>åˆ—è¡¨é¡¹çš„å”¯ä¸€æ ‡è¯†</td><td><code>'item-1'</code></td></tr><tr><td><code>ref</code></td><td>ç”¨äºè®¿é—®åº•å±‚<code>DOM</code>èŠ‚ç‚¹æˆ–ç»„ä»¶å®ä¾‹çš„å¼•ç”¨</td><td><code>{current: null}</code></td></tr><tr><td><code>props</code></td><td>å…ƒç´ çš„å±æ€§é›†åˆï¼ˆä¸åŒ…æ‹¬<code>key</code>å’Œ<code>ref</code>ï¼‰</td><td><code>{className: 'app', children: ...}</code></td></tr><tr><td><code>_owner</code></td><td>åˆ›å»ºæ­¤å…ƒç´ çš„ç»„ä»¶å¯¹åº”çš„<code>Fiber</code>èŠ‚ç‚¹</td><td><code>FiberNode</code></td></tr></tbody></table>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯<code>$$typeof</code>å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>Symbol</code>ç±»å‹çš„å€¼ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†<code>React Element</code>ã€‚è¿™ä¸ªè®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘â€”â€”é˜²æ­¢<code>XSS</code>æ”»å‡»ï¼Œå› ä¸º<code>JSON</code>ä¸­ä¸èƒ½åŒ…å«<code>Symbol</code>ç±»å‹çš„å€¼ï¼Œå³ä½¿æœåŠ¡å™¨æ³¨å…¥äº†ä¸€ä¸ªæ¶æ„çš„<code>React Element</code>å¯¹è±¡ï¼Œ<code>React</code>ä¹Ÿä¸ä¼šè®¤å®ƒã€‚</p>
<h2 data-id="heading-4">React Element ä¸ Fiber èŠ‚ç‚¹çš„å…³ç³»</h2>
<p>ç†è§£<code>React Element</code>å’Œ<code>Fiber</code>èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»è‡³å…³é‡è¦ï¼Œå®ƒä»¬æ˜¯<code>React</code>æ¶æ„ä¸­ä¸åŒä½†äº’è¡¥çš„æ¦‚å¿µã€‚</p>
<h3 data-id="heading-5">ä¸åŒçš„è§’è‰²ä¸èŒè´£</h3>
<ul>
<li><strong>React Element</strong>ï¼šæ˜¯ä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œå®ƒæè¿°äº†<code>UI</code>åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚å®ƒæ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„<code>Element</code>å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯<code>UI</code>çš„è“å›¾ï¼šå®ƒè¯´æ˜äº†éœ€è¦æ¸²æŸ“ä»€ä¹ˆï¼Œä½†ä¸ä¼šå®é™…æ‰§è¡Œæ¸²æŸ“å·¥ä½œã€‚</li>
<li><strong>Fiber</strong>ï¼šæ˜¯<code>React</code>è°ƒå’Œè¿‡ç¨‹ï¼ˆ<code>Reconciliation</code>ï¼‰ä¸­çš„å·¥ä½œå•å…ƒã€‚å®ƒæ˜¯åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œç„¶åç»„æˆäº†<code>Fiber</code>æ ‘ã€‚ä¸<code>React Element</code>ä¸åŒï¼Œ<code>Fiber</code>æ˜¯å¯å˜çš„ï¼Œå®ƒä»¬åŒ…å«ç»„ä»¶çŠ¶æ€ã€å‰¯ä½œç”¨æ ‡è®°ã€ä»¥åŠæŒ‡å‘å…¶ä»–<code>Fiber</code>çš„æŒ‡é’ˆï¼ˆå½¢æˆé“¾è¡¨ç»“æ„ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">æ¸²æŸ“è¿‡ç¨‹ä¸­çš„åä½œ</h3>
<p><code>React</code>æ¸²æŸ“è¿‡ç¨‹çš„æ­¥éª¤ï¼Œä¼šéµå¾ªä»¥ä¸‹è¿‡ç¨‹ï¼š</p>
<ol>
<li>ç¼–è¯‘é˜¶æ®µï¼š<code>JSX</code>è¢«è½¬è¯‘ä¸º<code>createElement/jsx</code>å‡½æ•°è°ƒç”¨</li>
<li>è§¦å‘æ›´æ–°ï¼šåˆå§‹æ¸²æŸ“ã€çŠ¶æ€æ›´æ–°ã€å±æ€§æ›´æ–°ç­‰</li>
<li>æ¸²æŸ“é˜¶æ®µï¼š</li>
</ol>

<ol>
<li>
<ol>
<li>è°ƒç”¨å‡½æ•°ç»„ä»¶ï¼ˆæˆ–ç±»ç»„ä»¶çš„<code>render</code>æ–¹æ³•ï¼‰è·å–æ–°çš„<code>React Element</code></li>
<li>å°†æ–°çš„<code>Element</code>æ ‘ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“çš„<code>Fiber</code>æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œç”Ÿæˆæ–°çš„<code>Fiber</code>æ ‘ï¼ˆ<code>Diff</code>ç®—æ³•ï¼‰</li>
</ol>
</li>
</ol>

<ol start="4">
<li>æäº¤é˜¶æ®µï¼šå°†æ›´æ–°åº”ç”¨åˆ°å®é™…çš„<code>DOM</code></li>
</ol>
<h2 data-id="heading-7">åˆ›å»ºè¿‡ç¨‹</h2>
<p>è¦çœŸæ­£ç†è§£<code>React Element</code>ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥<code>createElement/jsx</code>å‡½æ•°çš„æºç ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•æ„é€ è¿™ä¸ªæ ¸å¿ƒæ•°æ®ç»“æ„çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä»£ç å»é™¤äº†å¼€å‘ç¯å¢ƒç›¸å…³çš„é€»è¾‘ï¼Œå¹¶ç²¾ç®€å¤„ç†</p>
</blockquote>
<h3 data-id="heading-8">createElement å‡½æ•°åˆ†æ</h3>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react/src/ReactElement.js */

const <span class="hljs-attr">RESERVED_PROPS</span> = {
  key: true,
  ref: true,
}<span class="hljs-comment">;</span>

export function createElement(type, config, children) {
  let propName<span class="hljs-comment">;</span>
  const <span class="hljs-attr">props</span> = {}<span class="hljs-comment">;</span>

  let <span class="hljs-attr">key</span> = <span class="hljs-string">''</span> + config.key<span class="hljs-comment">;</span>
  let <span class="hljs-attr">ref</span> = config.ref<span class="hljs-comment">;</span>

  // è¿‡æ»¤æ‰ä¿ç•™å±æ€§(key, refç­‰), å°†å…¶ä»–å±æ€§å­˜åˆ° props å¯¹è±¡
  for (propName in config) {
    if (
      hasOwnProperty.call(config, propName) &amp;&amp;
      !RESERVED_PROPS.hasOwnProperty(propName)
    ) {
      props<span class="hljs-section">[propName]</span> = config<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
    }
  }

  // å¤„ç† children å‚æ•°
  const <span class="hljs-attr">childrenLength</span> = arguments.length - <span class="hljs-number">2</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">childrenLength</span> === <span class="hljs-number">1</span>) {
    <span class="hljs-attr">props.children</span> = children<span class="hljs-comment">;</span>
  } else if (childrenLength &gt; 1) {
    const <span class="hljs-attr">childArray</span> = Array(childrenLength)<span class="hljs-comment">;</span>
    for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; childrenLength; i++) {</span>
      childArray<span class="hljs-section">[i]</span> = arguments<span class="hljs-section">[i + 2]</span><span class="hljs-comment">;</span>
    }
    <span class="hljs-attr">props.children</span> = childArray<span class="hljs-comment">;</span>
  }

  // å¤„ç†é»˜è®¤ props
  if (type &amp;&amp; type.defaultProps) {
    const <span class="hljs-attr">defaultProps</span> = type.defaultProps<span class="hljs-comment">;</span>
    for (propName in defaultProps) {
      if (props<span class="hljs-section">[propName]</span> === undefined) {
        props<span class="hljs-section">[propName]</span> = defaultProps<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
      }
    }
  }

  // åˆ›å»ºå¹¶è¿”å› React Element
  return ReactElement(...)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-9">jsx å‡½æ•°åˆ†æ</h3>
<p>é€»è¾‘ä¸<code>createElement</code>ç±»ä¼¼ï¼Œå…¥å‚æ–¹é¢å°†<code>key</code>ä½œä¸ºå•ç‹¬å‚æ•°ä¼ é€’ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">/* src/react/packages/react/src/jsx/ReactJSXElement.js */

const <span class="hljs-attr">RESERVED_PROPS</span> = {
  key: true,
  ref: true,
}<span class="hljs-comment">;</span>

export function jsx(type, config, maybeKey) {
  let propName<span class="hljs-comment">;</span>
  const <span class="hljs-attr">props</span> = {}<span class="hljs-comment">;</span>

  let <span class="hljs-attr">key</span> = config.key<span class="hljs-comment">;</span>
  let <span class="hljs-attr">ref</span> = config.ref<span class="hljs-comment">;</span>

  // è¿‡æ»¤æ‰ä¿ç•™å±æ€§(key, refç­‰), å°†å…¶ä»–å±æ€§å­˜åˆ° props å¯¹è±¡(children ä¹Ÿåœ¨ config ä¸­)
  for (propName in config) {
    if (
      hasOwnProperty.call(config, propName) &amp;&amp;
      !RESERVED_PROPS.hasOwnProperty(propName)
    ) {
      props<span class="hljs-section">[propName]</span> = config<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
    }
  }

  // å¤„ç†é»˜è®¤ props
  if (type &amp;&amp; type.defaultProps) {
    const <span class="hljs-attr">defaultProps</span> = type.defaultProps<span class="hljs-comment">;</span>
    for (propName in defaultProps) {
      if (props<span class="hljs-section">[propName]</span> === undefined) {
        props<span class="hljs-section">[propName]</span> = defaultProps<span class="hljs-section">[propName]</span><span class="hljs-comment">;</span>
      }
    }
  }

  // åˆ›å»ºå¹¶è¿”å› React Element
  return ReactElement(...)<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-10">ReactElement å‡½æ•°</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">const</span> ReactElement = <span class="hljs-title function_ invoke__">function</span>(<span class="hljs-keyword">type</span>, key, <span class="hljs-keyword">ref</span>, <span class="hljs-keyword">self</span>, source, owner, props) {
  <span class="hljs-keyword">const</span> element = {
    $$<span class="hljs-keyword">typeof</span>: REACT_ELEMENT_TYPE,
    <span class="hljs-keyword">type</span>: <span class="hljs-keyword">type</span>,
    key: key,
    <span class="hljs-keyword">ref</span>: <span class="hljs-keyword">ref</span>,
    props: props,
    _owner: owner,
  };
  
  <span class="hljs-keyword">return</span> element;
};
</code></pre>
<blockquote>
<p>è¦æ·±å…¥ç†è§£<code>React Element</code>çš„åˆ›å»ºè¿‡ç¨‹ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯åœ¨æºç ä¸­è®¾ç½®æ–­ç‚¹å¹¶è¿›è¡Œè°ƒè¯•ã€‚</p>
</blockquote>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>å¾ˆå¤šäººå°†<code>React Element</code>ç­‰åŒäºè™šæ‹Ÿ<code>DOM</code>ï¼Œå®é™…ä¸Š<code>React Element</code>ç¡®å®æ˜¯<code>React</code>è™šæ‹Ÿ<code>DOM</code>å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå¦ä¸€éƒ¨åˆ†å°±æ˜¯<code>Fiber</code>æ¶æ„ã€‚å½“ç»„ä»¶çŠ¶æ€å˜åŒ–æ—¶ï¼Œ<code>React</code>ä¼šåˆ›å»ºæ–°çš„<code>Element</code>æ ‘ï¼Œç„¶åé€šè¿‡<code>Diff</code>ç®—æ³•æ¯”è¾ƒæ–°æ—§ä¸¤æ£µæ ‘ï¼Œæ‰¾å‡ºæœ€å°å˜æ›´ï¼Œæœ€åæ‰¹é‡æ›´æ–°çœŸå®<code>DOM</code>ã€‚</p>
<p>ä¸‹ä¸€ç« æˆ‘ä»¬å°†äº†è§£æ•´ä¸ª<code>React</code>åº”ç”¨æ¸²æŸ“çš„èµ·ç‚¹ï¼šå®¹å™¨çš„æŒ‚è½½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[jsä¸­workerçš„è¯¦ç»†è®²è§£]]></title>    <link>https://juejin.cn/post/7590705425135403017</link>    <guid>https://juejin.cn/post/7590705425135403017</guid>    <pubDate>2026-01-04T01:07:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590705425135403017" data-draft-id="7590699877631770662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="jsä¸­workerçš„è¯¦ç»†è®²è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-04T01:07:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/1310273593440398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            jsä¸­workerçš„è¯¦ç»†è®²è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1310273593440398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çš„divä¸¢äº†è‚¿ä¹ˆåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:07:16.000Z" title="Sun Jan 04 2026 01:07:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»€ä¹ˆæ˜¯ JavaScript Workerï¼Ÿ</h4>
<p>Worker æ˜¯åœ¨Webåº”ç”¨ç¨‹åºä¸­å®ç°å¤šçº¿ç¨‹çš„æœºåˆ¶ã€‚<br/>
å®ƒå¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬ï¼Œç‹¬ç«‹äºä¸»çº¿ç¨‹ã€‚<br/>
è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›è€—æ—¶çš„è®¡ç®—ä»»åŠ¡äº¤ç»™Workerçº¿ç¨‹å¤„ç†ã€‚<br/>
ä»¥ä¿è¯ä¸»çº¿ç¨‹çš„ä¸ä¼šè¢«é˜»å¡ã€‚</p>
<h4 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦Workerï¼Ÿ</h4>
<p>ç”±äºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€æœ‰ä»»åŠ¡åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚<br/>
å¦‚æœé‡åˆ°ä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚å¤§è§„æ¨¡æ•°æ®è®¡ç®—ã€å›¾åƒå¤„ç†ã€å¤æ‚ç®—æ³•ï¼‰ã€‚<br/>
å®ƒä¼šé˜»å¡ä¸»çº¿ç¨‹å¯¼è‡´é¡µé¢æ— æ³•å“åº”ï¼Œç”¨æˆ·ä½“éªŒå˜å·®ã€‚<br/>
Workerçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°†è€—æ—¶çš„è®¡ç®—ä»»åŠ¡æ”¾åˆ°åå°çº¿ç¨‹å»æ‰§è¡Œã€‚</p>
<h3 data-id="heading-2">vue2ä¸­å¦‚ä½•ä½¿ç”¨ worker</h3>
<p>åœ¨vue/cliè„šæ‰‹æ¶ä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨workerã€‚<br/>
å› ä¸ºï¼š<br/>
1ï¼Œæ— æ³•å°† Worker è„šæœ¬æ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯åŠ è½½æ–‡ä»¶ã€‚<br/>
2ï¼Œæ‰“åŒ…åä¼šå¯¼è‡´ä¾èµ–ä¸¢å¤±æˆ–è·¯å¾„é”™è¯¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">npm install worker-loader -D
æˆ–è€…
yarn <span class="hljs-keyword">add</span> worker-loader -D
</code></pre>
<h4 data-id="heading-3">vue.config.js é…ç½®å¦‚ä¸‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">chainWebpack</span>:<span class="hljs-function"><span class="hljs-params">config</span>=&gt;</span>{
    <span class="hljs-comment">// ä¸‹é¢æ˜¯workerçš„é…ç½®</span>
    .<span class="hljs-title function_">rule</span>(<span class="hljs-string">'worker'</span>)
    .<span class="hljs-title function_">test</span>(<span class="hljs-regexp">/\.worker\.js$/</span>)
    .<span class="hljs-title function_">use</span>(<span class="hljs-string">'worker-loader'</span>)
    .<span class="hljs-title function_">loader</span>(<span class="hljs-string">'worker-loader'</span>)
    .<span class="hljs-title function_">end</span>();

    <span class="hljs-comment">// è§£å†³ï¼šworker çƒ­æ›´æ–°é—®é¢˜</span>
    config.<span class="hljs-property">module</span>.<span class="hljs-title function_">rule</span>(<span class="hljs-string">'js'</span>).<span class="hljs-property">exclude</span>.<span class="hljs-title function_">add</span>(<span class="hljs-regexp">/\.worker\.js$/</span>);
  },
  <span class="hljs-attr">parallel</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-comment">// è§£å†³ï¼šâ€œwindow is undefinedâ€æŠ¥é”™ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºworkerçº¿ç¨‹ä¸­ä¸å­˜åœ¨windowå¯¹è±¡ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè¦ç”¨thisä»£æ›¿</span>
    config.<span class="hljs-property">output</span>.<span class="hljs-title function_">globalObject</span>(<span class="hljs-string">'this'</span>)
  }
}
</code></pre>
<h4 data-id="heading-4">postMessage å­çº¿ç¨‹ç»™ä¸»çº¿å‘é€æ¶ˆæ¯</h4>
<p>self.postMessageå­çº¿ç¨‹å‘ä¸»çº¿ç¨‹å‘é€æ¶ˆæ¯ã€‚<br/>
åœ¨ Web Worker ä¸­ï¼Œself æŒ‡å‘å½“å‰åˆ›å»ºçš„è¿™ä¸ª worker çº¿ç¨‹ï¼Œself æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚<br/>
self.postMessage()å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-5">ä¸»çº¿ç¨‹é€šçŸ¥å­çº¿ç¨‹(worker)å¼€å§‹å·¥ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ›å»º worker</span>
<span class="hljs-keyword">this</span>.webWorker = new Worker(<span class="hljs-string">'./web.worker.js'</span>)
<span class="hljs-comment">// é€šçŸ¥ Worker å­çº¿ç¨‹å¯ä»¥è¿›è¡Œå“åº”çš„å·¥ä½œã€‚</span>
<span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Worker å‘æ¶ˆæ¯</span>
<span class="hljs-keyword">this</span>.webWorker.postMessage({ action: <span class="hljs-string">'startFetch'</span> });
</code></pre>
<h4 data-id="heading-6">worker ä¸­æ¥å‘é€ç½‘ç»œè¯·æ±‚å“ˆ</h4>
<p>src\views\element.vue æ–‡ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä½¿ç”¨workeræ¥å‘å‘é€ç½‘ç»œè¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"sendFetchHandler"</span>&gt;</span>å¼€å§‹å‘é€ç½‘ç»œè¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item,index) in apiBackData"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>&gt;</span>{{ item.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥ worker æ–‡ä»¶, å¿…é¡»ä½¿ç”¨ è¿™æ ·çš„æ–¹å¼å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WorkerA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'worker-loader!./web.worker.js'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">apiBackData</span>: []
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">sendFetchHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'startFetch'</span> });
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º worker å®ä¾‹ï¼Œåç§°å¿…é¡»å’Œå¯¼å…¥æ—¶çš„ä¿æŒä¸€è‡´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>)
    <span class="hljs-comment">// å…ˆæ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-comment">// e.data æ˜¯æ¥æ”¶åˆ°çš„æ•°æ®</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ª Worker çš„æ¶ˆæ¯:'</span>, e.<span class="hljs-property">data</span>)
      <span class="hljs-comment">// å¤„ç† Worker è¿”å›çš„æ•°æ®</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'fetchSuccess'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiBackData</span> = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">data</span> || []
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–çš„æ•°æ®:'</span>,  <span class="hljs-variable language_">this</span>.<span class="hljs-property">apiBackData</span> );
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'fetchError'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–æ•°æ®å¤±è´¥:'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>);
      }
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Workerå‘ç”Ÿé”™è¯¯:'</span>, error)
    })
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>

<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¼•å…¥ç½‘ç»œè¯·æ±‚ä¸­çš„æ–¹æ³•</span>
import {getList} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/request/api.js'</span>

<span class="hljs-built_in">self</span>.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"worker:"</span>, e)
  <span class="hljs-keyword">if</span>(e.data &amp;&amp; e.data.action===<span class="hljs-string">'startFetch'</span>){
    <span class="hljs-comment">//  e.dataæ˜¯ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®</span>
    <span class="hljs-title function_ invoke__">getList</span>().<span class="hljs-title function_ invoke__">then</span>(res=&gt;{
      console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-number">1111</span>,res)
      // å‡è®¾ æ˜¯ä¸€ä¸ªæ•°ç»„å°±æ˜¯è¯·æ±‚æˆåŠŸ
      <span class="hljs-keyword">if</span>(Array.<span class="hljs-title function_ invoke__">isArray</span>(res)){
        <span class="hljs-comment">//å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹</span>
        <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ 
          <span class="hljs-attr">type</span>: <span class="hljs-string">'fetchSuccess'</span>,
          <span class="hljs-attr">data</span>:{
            <span class="hljs-attr">data</span>:res,
            <span class="hljs-attr">message</span>: <span class="hljs-string">'è·å–æˆåŠŸ'</span>
          }
        });
      }<span class="hljs-keyword">else</span>{
        <span class="hljs-comment">// å°†æ•°æ®ä» worker çº¿ç¨‹å‘é€åˆ°åˆ›å»ºå®ƒçš„ä¸»çº¿ç¨‹</span>
        <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'fetchError'</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span> });
      }
    })
  }
};
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b75505495a6547b584f72e0888246a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=esBg%2BjRppnepiB8gyms3iJJZzZU%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-7">workerå¯¼å‡ºè¡¨æ ¼æ¡ˆä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"exportExcelHandler"</span>&gt;</span>å¯¼å‡ºexcel<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> {writeFile, utils} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">exportExcelHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-keyword">let</span> arr = []
      <span class="hljs-comment">// 50wè¡Œçš„æ•°æ®</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i= <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500000</span>;i++){
        arr.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ '</span> + i,
          <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
          <span class="hljs-attr">sex</span>: <span class="hljs-string">'ç”·'</span>,
          <span class="hljs-attr">id</span>: <span class="hljs-string">'2025_12_12'</span>+ i,
          <span class="hljs-attr">address</span>:<span class="hljs-string">'XXåŒºYYYå¤§é“'</span> + i + <span class="hljs-string">'å·'</span>
        })
      }
      <span class="hljs-comment">// å°†å¯¹è±¡æ•°ç»„ arr è½¬æ¢ä¸º Excel å·¥ä½œè¡¨(sheet)</span>
      <span class="hljs-keyword">const</span> sheet  = utils.<span class="hljs-title function_">json_to_sheet</span>(arr)
      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå·¥ä½œç°¿å¯¹è±¡ã€‚</span>
      <span class="hljs-comment">// å·¥ä½œç°¿æ˜¯ Excel æ–‡ä»¶çš„å®¹å™¨ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªå·¥ä½œè¡¨</span>
      <span class="hljs-keyword">const</span> workbook = utils.<span class="hljs-title function_">book_new</span>()
      <span class="hljs-comment">// å°†ä¹‹å‰åˆ›å»ºçš„å·¥ä½œè¡¨ sheet æ·»åŠ åˆ°å·¥ä½œç°¿ workbook ä¸­</span>
      utils.<span class="hljs-title function_">book_append_sheet</span>(workbook, sheet, <span class="hljs-string">'sheet1'</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'workbook'</span>, workbook)
      <span class="hljs-comment">// å°†æ•´ä¸ªå·¥ä½œç°¿ workbook å†™å…¥æ–‡ä»¶å¹¶è§¦å‘æµè§ˆå™¨ä¸‹è½½</span>
      <span class="hljs-title function_">writeFile</span>(workbook, <span class="hljs-string">'test.xlsx'</span>)
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œç½‘ç»œè¯·æ±‚</span>
      <span class="hljs-comment">// this.webWorker1.postMessage({ action: 'startFetch', data: this.vueData });</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2520c90977e14ca6a31c773fc946d053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=VxpaYpsDTTKNTgo5RAKP47Bs8v0%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-8">ç°åœ¨æˆ‘ä»¬ä½¿ç”¨workeræ¥è§£å†³æ·»åŠ æ•°æ®è€—æ—¶çš„é—®é¢˜</h4>
<p>ä¸‹è½½xlsxæ¨¡å—ã€‚</p>
<pre><code class="hljs language-css" lang="css">npm install <span class="hljs-attr">--save</span> xlsx
</code></pre>
<p>ä½¿ç”¨workerçš„æ–‡ä»¶(ä¸‹è½½çš„ä¸»é¡µé¢)</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"exportExcelHandler"</span>&gt;</span>å¯¼å‡ºexcel<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥ worker æ–‡ä»¶, å¿…é¡»ä½¿ç”¨ è¿™æ ·çš„æ–¹å¼å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">WorkerA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'worker-loader!./web.worker.js'</span>
<span class="hljs-keyword">import</span> {writeFile} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">exportExcelHandler</span>(<span class="hljs-params"/>){
      <span class="hljs-comment">// ä¸»çº¿ç¨‹è°ƒç”¨worker.postMessage()æ–¹æ³•ï¼Œå‘ Workerçº¿ç¨‹ å‘æ¶ˆæ¯,å¼€å§‹è¿›è¡Œæ„é€ æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">action</span>: <span class="hljs-string">'startCreateExcelData'</span>});
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º worker å®ä¾‹ï¼Œåç§°å¿…é¡»å’Œå¯¼å…¥æ—¶çš„ä¿æŒä¸€è‡´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>)
    <span class="hljs-comment">// å…ˆæ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¥è‡ª Worker çš„æ¶ˆæ¯:'</span>, e.<span class="hljs-property">data</span>)
      <span class="hljs-comment">// å¤„ç† Worker è¿”å›çš„æ•°æ®</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'createExcelSuccess'</span>) {
        <span class="hljs-comment">// è¿”å›è¡¨çš„æ•°æ®</span>
        <span class="hljs-keyword">const</span> workbook = e.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>
        <span class="hljs-comment">// å°†æ•´ä¸ªå·¥ä½œç°¿ workbook å†™å…¥æ–‡ä»¶å¹¶è§¦å‘æµè§ˆå™¨ä¸‹è½½ã€‚</span>
        <span class="hljs-comment">// æœ€åå¼‚æ­¥ä»ç„¶ä¼šå¡é¡¿,å› ä¸ºæ•°æ®é‡å¤ªå¤§äº†.ä½†æ˜¯å¡é¡¿çš„æ—¶é—´ä¼šæ¯”ä¹‹å‰å¥½ä¸€äº›</span>
        <span class="hljs-title function_">writeFile</span>(workbook, <span class="hljs-string">'é€šè¿‡workerå¯¼å¤„excel.xlsx'</span>)
      } <span class="hljs-keyword">else</span>  {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–æ•°æ®å¤±è´¥:'</span>, e.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>);
      }
    })

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webWorker1</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Workerå‘ç”Ÿé”™è¯¯:'</span>, error)
    })
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>workeræ–‡ä»¶(src\views\web.worker.js )</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¼•å…¥ xlsx</span>
import {utils} <span class="hljs-keyword">from</span> <span class="hljs-string">'xlsx'</span>
<span class="hljs-built_in">self</span>.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  console.<span class="hljs-title function_ invoke__">log</span>(<span class="hljs-string">"worker:"</span>, e)
  <span class="hljs-keyword">if</span>(e.data &amp;&amp; e.data.action===<span class="hljs-string">'startCreateExcelData'</span>){
    <span class="hljs-comment">//  e.dataæ˜¯ä¸»çº¿ç¨‹å‘é€è¿‡æ¥çš„æ•°æ®</span>
    let arr = []
    <span class="hljs-comment">// 50wè¡Œçš„æ•°æ®</span>
    <span class="hljs-keyword">for</span>(let i= <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">500000</span>;i++){
      arr.<span class="hljs-title function_ invoke__">push</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ '</span> + i,
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
        <span class="hljs-attr">sex</span>: <span class="hljs-string">'ç”·'</span>,
        <span class="hljs-attr">id</span>: <span class="hljs-string">'2025_12_12'</span>+ i,
        <span class="hljs-attr">address</span>:<span class="hljs-string">'XXåŒºYYYå¤§é“'</span> + i + <span class="hljs-string">'å·'</span>
      })
    }
    <span class="hljs-comment">// å°†å¯¹è±¡æ•°ç»„ arr è½¬æ¢ä¸º Excel å·¥ä½œè¡¨(sheet)</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">sheet</span>  = utils.<span class="hljs-title function_ invoke__">json_to_sheet</span>(arr)
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå·¥ä½œç°¿(book)å¯¹è±¡ã€‚å·¥ä½œç°¿æ˜¯ Excel æ–‡ä»¶çš„å®¹å™¨ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªå·¥ä½œè¡¨(sheet)</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">workbook</span> = utils.<span class="hljs-title function_ invoke__">book_new</span>()
    <span class="hljs-comment">// å°†ä¹‹å‰åˆ›å»ºçš„å·¥ä½œè¡¨ (sheet) æ·»åŠ åˆ°å·¥ä½œç°¿(workbook)ä¸­</span>
    utils.<span class="hljs-title function_ invoke__">book_append_sheet</span>(workbook, sheet, <span class="hljs-string">'sheet1'</span>)
    <span class="hljs-built_in">self</span>.<span class="hljs-title function_ invoke__">postMessage</span>({ 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'createExcelSuccess'</span>,
      <span class="hljs-attr">data</span>:{
        <span class="hljs-attr">data</span>:workbook,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è·å–æˆåŠŸ'</span>
      }
    });
  }
};
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d7ffee930b24710a957d4abd07bb68e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=RrGKHkVhCF9HQQrSoH7vxzt7icQ%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-9">å…³é—­ Web Worker</h4>
<p>åœ¨ä¸»çº¿ç¨‹å’Œåœ¨Workerçº¿ç¨‹çš„å…³é—­æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚
å¦‚æœåœ¨ä¸»çº¿ç¨‹ï¼Œè°ƒç”¨terminate()æ–¹æ³•å…³é—­</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">this</span>.webWorker1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WorkerA</span>(<span class="hljs-string">'./web.worker.js'</span>) 
<span class="hljs-keyword">this</span>.webWorker1.<span class="hljs-built_in">terminate</span>();
</code></pre>
<p>å¦‚æœæ˜¯åœ¨Workçº¿ç¨‹ï¼Œå¯ä»¥è°ƒç”¨close()æ–¹æ³•è¿›è¡Œå…³é—­</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-built_in">self</span>.<span class="hljs-built_in">close</span>();
</code></pre>
<h4 data-id="heading-10">ä¸»çº¿ç¨‹å…³é—­ worker çº¿ç¨‹çš„è¯´æ˜</h4>
<p>å½“ä¸»çº¿ç¨‹è°ƒç”¨worker.terminate()æ—¶ï¼ŒWorkerçº¿ç¨‹ä¼šè¢«ç«‹å³ç»ˆæ­¢ã€‚<br/>
æ— è®ºå½“å‰äº‹ä»¶å¾ªç¯ä¸­æ˜¯å¦æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼Œéƒ½ä¸ä¼šç»§ç»­æ‰§è¡Œã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœæˆ‘åœ¨ç‚¹å‡»[å¯¼å…¥excel]æŒ‰é’®åï¼Œé©¬ä¸Šåˆå…³é—­ç‚¹å‡»[å…³é—­worker]ï¼Œé‚£ä¹ˆä¸èƒ½å¤Ÿæ­£å¸¸å¯¼å‡ºè¡¨æ ¼ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2410306deb3349f4b701210b7946ee2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=bp8lItRsyuiNaL0ee9NsckyFjLU%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-11">Workerçº¿ç¨‹å†…éƒ¨å…³é—­ worker çº¿ç¨‹çš„è¯´æ˜</h4>
<p>å½“Workerçº¿ç¨‹å†…éƒ¨è°ƒç”¨self.close()æ—¶ï¼ŒWorkerçº¿ç¨‹å¹¶ä¸ä¼šç«‹å³ç»ˆæ­¢ã€‚<br/>
å®ƒä¼š[ç»§ç»­æ‰§è¡Œå½“å‰]äº‹ä»¶å¾ªç¯ä¸­çš„ä»»åŠ¡ï¼Œä½†æ˜¯[ä¼šé˜»æ­¢åç»­]äº‹ä»¶å¾ªç¯çš„ä»»åŠ¡æ‰§è¡Œã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœæˆ‘åœ¨ç‚¹å‡»[å¯¼å…¥excel]æŒ‰é’®åï¼Œé©¬ä¸Šåˆå…³é—­ç‚¹å‡»[Workerå†…éƒ¨å…³é—­Worker]ï¼Œä»ç„¶å¯ä»¥å¯¼å‡ºè¡¨æ ¼ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c321903106440f9a8a03ead44ab39df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR55qEZGl25Lii5LqG6IK_5LmI5Yqe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768093642&amp;x-signature=5oz%2BzYg56Fqat1z5Nf0mLQDHbLo%3D" alt="image" loading="lazy"/></p>
<h4 data-id="heading-12">åˆ¤æ–­ç”¨æˆ·æµè§ˆå™¨æ˜¯å¦æ”¯æŒ worker</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Worker</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æµè§ˆå™¨æ”¯æŒ Web Workers'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æµè§ˆå™¨ä¸æ”¯æŒ Web Workers'</span>);
}
</code></pre>
<h4 data-id="heading-13">Worker çº¿ç¨‹å¼•ç”¨å…¶ä»–jsæ–‡ä»¶</h4>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨workeræ–‡ä»¶ä¸­ï¼Œå¼•å…¥å…¶ä»–æ¨¡å—çš„æ–‡ä»¶ã€‚<br/>
å¯ä»¥é€šè¿‡ importScripts() æ–¹æ³•æ¥å®ç°ï¼Œåœ¨ worker ä¸­å¯¼å…¥å…¶ä»–çš„æ¨¡å—ã€‚è¿™ä¸ªåœ°å€æ˜¯å¯ä»¥è·¨åŸŸçš„ã€‚</p>
<h4 data-id="heading-14">Worker æŒ‡å®šæ¨¡å—ç±»å‹</h4>
<p>å¦‚æœæˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦å¯¼å‡ºçš„æ–¹æ³•ä½¿ç”¨çš„æ˜¯ESModule æ¨¡å¼å¯¼å‡ºã€‚<br/>
æ­¤æ—¶ä½¿ç”¨ importScripts() æ–¹æ³•å¼•å…¥ä»–æ¨¡å—ï¼Œä¼šæŠ¥é”™ã€‚<br/>
æ­¤æ—¶éœ€è¦æŒ‡å®šæ¨¡å—ç±»å‹ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// main.jsï¼ˆä¸»çº¿ç¨‹çš„ä»£ç ï¼‰</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-built_in">new</span> Worker(<span class="hljs-string">'/worker.js'</span>, {
    <span class="hljs-keyword">type</span>: <span class="hljs-string">'module'</span>  <span class="hljs-comment">// æŒ‡å®š worker.js çš„ç±»å‹</span>
});
</code></pre>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// worker.jsï¼ˆworkerçº¿ç¨‹çš„ä»£ç ï¼‰</span>
import <span class="hljs-keyword">add</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>; <span class="hljs-comment">// å¯¼å…¥å¤–éƒ¨js</span>

self.addEventListener(<span class="hljs-string">'message'</span>, e =&gt; { 
    postMessage(e.data);
});

<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js ä½¿ç”¨äº†ESModule æ¨¡å—å¯¼å‡ºçš„ add æ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> add = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;
</code></pre>
<h4 data-id="heading-15">ä½¿ç”¨workerçš„æ³¨æ„äº‹é¡¹</h4>
<p>1ï¼Œworkerä¸èƒ½ä½¿ç”¨windowä¸Šçš„domæ“ä½œï¼Œä¹Ÿä¸èƒ½è·å–domå¯¹è±¡,domç›¸å…³çš„ä¸œè¥¿åªæœ‰ä¸»çº¿ç¨‹æœ‰ã€‚workeråªèƒ½åšä¸€äº›è®¡ç®—ç›¸å…³çš„æ“ä½œ<br/>
2ï¼Œæœ‰çš„ä¸œè¥¿æ˜¯æ— æ³•é€šè¿‡ä¸»çº¿ç¨‹ä¼ é€’ä¸ªå­çº¿ç¨‹çš„ã€‚<br/>
æ¯”å¦‚ï¼šæ–¹æ³•ï¼ŒdomèŠ‚ç‚¹ï¼Œä¸€äº›å¯¹è±¡é‡Œçš„ç‰¹æ®Šè®¾ç½®(freeze,getter,setterè¿™äº›)æ‰€ä»¥vueçš„å“åº”å¼å¯¹è±¡åœ¨ä¼ é€’ä¹‹åå°±ä¼šå˜æˆæ™®é€šå¯¹è±¡</p>
<h4 data-id="heading-16">workerå®é™…åº”ç”¨æ¡ˆä¾‹</h4>
<p>1ï¼Œå°†è¯­æ³•æ£€æŸ¥ã€ä»£ç å‹ç¼©ç­‰ä»»åŠ¡æ”¾åœ¨ Worker ä¸­æ‰§è¡Œ<br/>
2ï¼Œå›¾åƒå¤„ç†ï¼šæ¯”å¦‚ä½¿ç”¨Canvaså¤„ç†å›¾ç‰‡ï¼Œè¿›è¡Œæ»¤é•œ</p>
<h4 data-id="heading-17">workeræ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<p>å‡å°‘é€šä¿¡å¼€é”€ï¼šé¿å…é¢‘ç¹ä¼ é€’å¤§é‡æ•°æ®ï¼Œå¿…è¦æ—¶ä½¿ç”¨ Transferable Objectsï¼ˆå¦‚ ArrayBufferï¼‰<br/>
æ‰¹é‡å¤„ç†ï¼šå¯¹äºå¤§æ‰¹é‡ä»»åŠ¡ï¼Œå¯æ‰¹é‡åˆ›å»º Worker å¹¶è¡Œå¤„ç†<br/>
å¸¸é©»çº¿ç¨‹ï¼šå¯¹äºé¢‘ç¹ä½¿ç”¨çš„ Workerï¼Œå¯ä¿æŒå¸¸é©»è€Œéé‡å¤åˆ›å»º<br/>
é”™è¯¯å¤„ç†ï¼šå§‹ç»ˆç›‘å¬ onerror äº‹ä»¶ï¼Œæ•è· Worker å†…éƒ¨çš„å¼‚å¸¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰]]></title>    <link>https://juejin.cn/post/7591177139660554294</link>    <guid>https://juejin.cn/post/7591177139660554294</guid>    <pubDate>2026-01-04T01:13:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591177139660554294" data-draft-id="7582776967817166848" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-04T01:13:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjså­¦ä¹ 4ï¼šåˆ›å»ºæœåŠ¡ç«¯ APIï¼ˆè·¯ç”±å¤„ç†ç¨‹åºï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:13:21.000Z" title="Sun Jan 04 2026 01:13:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰åç«¯åˆ†ç¦»æ¶æ„ä¸­ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´é€šè¿‡ API æ¥å£æ¥äº¤äº’ã€‚è¿™ä¸ªAPI æ¥å£åœ¨ Next.js ä¸­æœ‰ä¸ªæ›´ä¸ºæ­£å¼çš„ç§°å‘¼ï¼Œå°±æ˜¯<strong>è·¯ç”±å¤„ç†ç¨‹åº</strong>ã€‚</p>
<h2 data-id="heading-0">å®šä¹‰è·¯ç”±å¤„ç†ç¨‹åº</h2>
<p>å†™è·¯ç”±å¤„ç†ç¨‹åºï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªåä¸ºÂ <code>route.js</code>çš„ç‰¹æ®Šæ–‡ä»¶ã€‚ï¼ˆæ³¨æ„æ˜¯Â <code>route</code>Â ä¸æ˜¯Â <code>router</code>ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93becba8e90944ef90a6740b6277caca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768094001&amp;x-signature=%2FWQ4kkkXRzJGf%2Bug3BTGTewMczU%3D" alt="image.png" loading="lazy"/></p>
<p>è¯¥æ–‡ä»¶å¿…é¡»åœ¨Â <code>app</code>ç›®å½•ä¸‹ï¼Œå¯ä»¥åœ¨Â <code>app</code>Â åµŒå¥—çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä½†æ˜¯è¦æ³¨æ„Â <code>page.js</code>å’ŒÂ <code>route.js</code>ä¸èƒ½åœ¨åŒä¸€å±‚çº§åŒæ—¶å­˜åœ¨ã€‚</p>
<p>æƒ³æƒ³ä¹Ÿèƒ½ç†è§£ï¼Œ<code>page.js</code>å’ŒÂ <code>route.js</code>æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹è·¯ç”±çš„å“åº”ã€‚<code>page.js</code>ä¸»è¦è´Ÿè´£æ¸²æŸ“ UIï¼Œ<code>route.js</code>ä¸»è¦è´Ÿè´£å¤„ç†è¯·æ±‚ã€‚å¦‚æœåŒæ—¶å­˜åœ¨ï¼ŒNext.js å°±ä¸çŸ¥é“ç”¨è°çš„é€»è¾‘äº†ã€‚</p>
<h3 data-id="heading-1">GET è¯·æ±‚</h3>
<p>è®©æˆ‘ä»¬ä»å†™ GET è¯·æ±‚å¼€å§‹ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªè·å–æ–‡ç« åˆ—è¡¨çš„æ¥å£ã€‚</p>
<p>æ–°å»ºÂ <code>app/api/posts/route.js</code>Â æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span>)
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>()
 
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>({ data })
}
</code></pre>
<p>æµè§ˆå™¨è®¿é—®Â <code>http://localhost:3000/api/posts</code>Â æŸ¥çœ‹æ¥å£è¿”å›çš„æ•°æ®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16018a9457744d00a28147ad266b5860~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768094001&amp;x-signature=iiLxixrg%2F4OMUV8x%2FK98WNLQk5c%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ol>
<li>
<p>æˆ‘ä»¬Â <code>export</code>Â ä¸€ä¸ªåä¸ºÂ <code>GET</code>Â çš„Â <code>async</code>Â å‡½æ•°æ¥å®šä¹‰ GET è¯·æ±‚å¤„ç†ï¼Œæ³¨æ„æ˜¯ export è€Œä¸æ˜¯ export default</p>
</li>
<li>
<p>æˆ‘ä»¬ä½¿ç”¨Â <code>next/server</code>Â çš„ NextResponse å¯¹è±¡ç”¨äºè®¾ç½®å“åº”å†…å®¹ï¼Œä½†è¿™é‡Œä¸ä¸€å®šéè¦ç”¨Â <code>NextResponse</code>ï¼Œç›´æ¥ä½¿ç”¨Â <code>Response</code>Â ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
</li>
<li>
<p>æˆ‘ä»¬å°†æ¥å£å†™åœ¨äº†Â <code>app/api</code>Â æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ¥å£ä¸€å®šè¦æ”¾åœ¨åä¸ºÂ <code>api</code>Â æ–‡ä»¶å¤¹ä¸‹ã€‚å¦‚æœä½ ä»£ç å†™åœ¨Â <code>app/posts/route.js</code>ï¼Œå¯¹åº”çš„æ¥å£åœ°å€å°±æ˜¯Â <code>/posts</code>ã€‚æ”¾åœ¨Â <code>api</code>Â æ–‡ä»¶å¤¹ä¸‹åªæ˜¯ä¸ºäº†æ–¹ä¾¿åŒºåˆ†åœ°å€æ˜¯æ¥å£è¿˜æ˜¯é¡µé¢ã€‚</p>
</li>
</ol>
<p>ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨Â <code>NextResponse</code>ï¼Œå› ä¸ºå®ƒæ˜¯ Next.js åŸºäºÂ <code>Response</code>Â çš„å°è£…ï¼Œå®ƒå¯¹ TypeScript æ›´åŠ å‹å¥½ï¼ŒåŒæ—¶æä¾›äº†æ›´ä¸ºæ–¹ä¾¿çš„ç”¨æ³•ï¼Œæ¯”å¦‚è·å– Cookie ç­‰ã€‚</p>
<h3 data-id="heading-2">æ”¯æŒæ–¹æ³•</h3>
<p>Next.js æ”¯æŒÂ <code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>ã€<code>PATCH</code>ã€<code>DELETE</code>ã€<code>HEAD</code>Â å’ŒÂ <code>OPTIONS</code>Â è¿™äº› HTTP è¯·æ±‚æ–¹æ³•ã€‚å¦‚æœä¼ å…¥äº†ä¸æ”¯æŒçš„è¯·æ±‚æ–¹æ³•ï¼ŒNext.js ä¼šè¿”å›Â <code>405 Method Not Allowed</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// route.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HEAD</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PUT</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DELETE</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PATCH</span>(<span class="hljs-params">request</span>) {}
 
<span class="hljs-comment">// å¦‚æœ `OPTIONS` æ²¡æœ‰å®šä¹‰, Next.js ä¼šè‡ªåŠ¨å®ç° `OPTIONS`</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">OPTIONS</span>(<span class="hljs-params">request</span>) {}
</code></pre>
<p>ç»§ç»­ä¿®æ”¹Â <code>app/api/posts/route.js</code>ï¼Œæ·»åŠ ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">const</span> article = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">json</span>()
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">slice</span>(-<span class="hljs-number">8</span>),
    <span class="hljs-attr">data</span>: article
  }, { <span class="hljs-attr">status</span>: <span class="hljs-number">201</span> })
}
</code></pre>
<h3 data-id="heading-3">ä¼ å…¥å‚æ•°</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬å…·ä½“çœ‹ä¸‹è¯·æ±‚æ–¹æ³•ã€‚æ¯ä¸ªè¯·æ±‚æ–¹æ³•çš„å¤„ç†å‡½æ•°ä¼šè¢«ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªÂ <code>request</code>ï¼Œä¸€ä¸ªÂ <code>context</code>Â ã€‚ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, context</span>) {}
</code></pre>
<p>request å¯¹è±¡æ˜¯ä¸€ä¸ªÂ <a href="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-23" title="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-23" target="_blank">NextRequest</a>Â å¯¹è±¡ï¼Œå®ƒæ˜¯åŸºäºÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FRequest" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FRequest" target="_blank">Web Request API</a>Â çš„æ‰©å±•ã€‚ä½¿ç”¨ request ï¼Œä½ å¯ä»¥å¿«æ·è¯»å– cookies å’Œå¤„ç† URLã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œè®²è®²å¦‚ä½•è·å– URL å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, context</span>) {
  <span class="hljs-comment">//  è®¿é—® /home, pathname çš„å€¼ä¸º /home</span>
  <span class="hljs-keyword">const</span> pathname = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">pathname</span>
  <span class="hljs-comment">// è®¿é—® /home?name=lee, searchParams çš„å€¼ä¸º { 'name': 'lee' }</span>
  <span class="hljs-keyword">const</span> searchParams = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">searchParams</span>
}
</code></pre>
<p>å…¶ä¸­ nextUrl æ˜¯åŸºäº Web URL API çš„æ‰©å±•ï¼ˆå¦‚æœä½ æƒ³è·å–å…¶ä»–å€¼ï¼Œå‚è€ƒÂ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FURL" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FURL" target="_blank">URL API</a>ï¼‰ï¼ŒåŒæ ·æä¾›äº†ä¸€äº›æ–¹ä¾¿ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<h4 data-id="heading-4">context (optional)</h4>
<p>ç›®å‰<code>context</code>Â åªæœ‰ä¸€ä¸ªå€¼å°±æ˜¯Â <code>params</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«å½“å‰åŠ¨æ€è·¯ç”±å‚æ•°çš„å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/dashboard/[team]/route.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, { params }</span>) {
  <span class="hljs-keyword">const</span> team = params.<span class="hljs-property">team</span>
}
</code></pre>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<p>éœ€æ±‚ï¼šç›®å‰ GET è¯·æ±‚Â <code>/api/posts</code>Â æ—¶ä¼šè¿”å›æ‰€æœ‰æ–‡ç« æ•°æ®ï¼Œç°åœ¨å¸Œæœ› GET è¯·æ±‚Â <code>/api/posts/1?dataField=title</code>Â è·å– post id ä¸º 1 çš„æ–‡ç« æ•°æ®ï¼ŒdataField ç”¨äºæŒ‡å®šè¿”å›å“ªäº›å­—æ®µæ•°æ®ã€‚</p>
<p>æ–°å»ºÂ <code>/api/posts/[id]/route.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request, { params }</span>) {
  <span class="hljs-keyword">const</span> field = request.<span class="hljs-property">nextUrl</span>.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"dataField"</span>)
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> ((<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/posts/<span class="hljs-subst">${params.id}</span>`</span>)).<span class="hljs-title function_">json</span>())
  <span class="hljs-keyword">const</span> result = field ? { [field]: data[field] } : data
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">json</span>(result)
}
</code></pre>
<p>ç°åœ¨æœ‰äº†æœåŠ¡ç«¯ API ï¼Œå®¢æˆ·ç«¯ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ axios æˆ– fetch æ¥è¯·æ±‚æ•°æ®äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming]]></title>    <link>https://juejin.cn/post/7590330924001853503</link>    <guid>https://juejin.cn/post/7590330924001853503</guid>    <pubDate>2026-01-04T01:35:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924001853503" data-draft-id="7582783931163148323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-04T01:35:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjså­¦ä¹ 5ï¼šSuspense ä¸ Streaming
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:35:05.000Z" title="Sun Jan 04 2026 01:35:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Suspense</code> æ˜¯ Next.js é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€ä¸ªç»„ä»¶ï¼Œäº†è§£å…¶åŸç†å’ŒèƒŒæ™¯æœ‰åŠ©äºæˆ‘ä»¬æ­£ç¡®ä½¿ç”¨ <code>Suspense</code> ç»„ä»¶ã€‚</p>
<h2 data-id="heading-0">ä¼ ç»Ÿ SSR</h2>
<p>ä¼ ç»Ÿ SSRï¼Œéœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œç”¨æˆ·æ‰èƒ½æŸ¥çœ‹é¡µé¢ã€ä¸ä¹‹äº¤äº’ã€‚</p>
<p>å…·ä½“è¿™äº›æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>æœåŠ¡ç«¯è·å–æ‰€æœ‰æ•°æ®ï¼›</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“ HTMLï¼›</li>
<li>å°†é¡µé¢çš„ HTMLã€CSSã€JavaScript å‘é€åˆ°å®¢æˆ·ç«¯ï¼›</li>
<li>ä½¿ç”¨ HTML å’Œ CSS ç”Ÿæˆä¸å¯äº¤äº’çš„ç”¨æˆ·ç•Œé¢ï¼ˆnon-interactive UIï¼‰ï¼›</li>
<li>React å¯¹ç”¨æˆ·ç•Œé¢è¿›è¡Œæ°´åˆï¼ˆhydrateï¼‰ï¼Œä½¿å…¶å¯äº¤äº’ï¼ˆinteractive UIï¼‰ï¼›</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7b20b7be5e548ccad0115bb7290cb69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=8oGXAAgwYYSEaQN5G9SRJyhGsCE%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™äº›æ­¥éª¤æ˜¯è¿ç»­çš„ã€é˜»å¡çš„ã€‚è¿™æ„å‘³ç€æœåŠ¡ç«¯åªèƒ½åœ¨è·å–æ‰€æœ‰æ•°æ®åæ¸²æŸ“ HTMLï¼ŒReact åªèƒ½åœ¨ä¸‹è½½äº†æ‰€æœ‰ç»„ä»¶ä»£ç åæ‰èƒ½è¿›è¡Œæ°´åˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fa275175615468695e714e4eefe3212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=TSz0K1LR%2FLdO6H2%2Br7RUaq%2Fl7ag%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼ ç»Ÿ SSR å‡ ä¸ªç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>SSR çš„æ•°æ®è·å–å¿…é¡»åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰</strong></li>
<li><strong>ç»„ä»¶çš„ JavaScript å¿…é¡»å…ˆåŠ è½½åˆ°å®¢æˆ·ç«¯ï¼Œæ‰èƒ½å¼€å§‹æ°´åˆ</strong></li>
<li><strong>æ‰€æœ‰ç»„ä»¶å¿…é¡»å…ˆæ°´åˆï¼Œç„¶åæ‰èƒ½è·Ÿå…¶ä¸­ä»»æ„ä¸€ä¸ªç»„ä»¶äº¤äº’</strong>ï¼›</li>
</ol>
<h2 data-id="heading-1">Suspense</h2>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒReact 18 å¼•å…¥äº†Â <code>&lt;Suspense&gt;</code>Â ç»„ä»¶ã€‚</p>
<p><code>&lt;Suspense&gt;</code>Â å…è®¸ä½ æ¨è¿Ÿæ¸²æŸ“æŸäº›å†…å®¹ï¼Œç›´åˆ°æ»¡è¶³æŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚æ•°æ®åŠ è½½å®Œæ¯•ï¼‰ã€‚</p>
<p>ä½ å¯ä»¥å°†åŠ¨æ€ç»„ä»¶åŒ…è£…åœ¨ Suspense ä¸­ï¼Œç„¶åå‘å…¶ä¼ é€’ä¸€ä¸ª fallback UIï¼Œä»¥ä¾¿åœ¨åŠ¨æ€ç»„ä»¶åŠ è½½æ—¶æ˜¾ç¤ºã€‚</p>
<p><strong>å¦‚æœæ•°æ®è¯·æ±‚ç¼“æ…¢ï¼Œä½¿ç”¨ Suspense æµå¼æ¸²æŸ“è¯¥ç»„ä»¶ï¼Œä¸ä¼šå½±å“é¡µé¢å…¶ä»–éƒ¨åˆ†çš„æ¸²æŸ“ï¼Œæ›´ä¸ä¼šé˜»å¡æ•´ä¸ªé¡µé¢</strong>ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥å†™ä¸€ä¸ªä¾‹å­ï¼Œæ–°å»ºÂ <code>app/dashboard/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = ms =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, ms));

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PostFeed</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">2000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello PostFeed<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Weather</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">8000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Weather<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Recommend</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">5000</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{padding:</span> '<span class="hljs-attr">20px</span>'}}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading PostFeed Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">PostFeed</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading Weather Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Weather</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">p</span>&gt;</span>Loading Recommend Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Recommend</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span>
  )
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ Suspense åŒ…è£…äº†ä¸‰ä¸ªç»„ä»¶ï¼Œå¹¶é€šè¿‡ sleep å‡½æ•°æ¨¡æ‹Ÿäº†æ•°æ®è¯·æ±‚è€—è´¹çš„æ—¶é•¿ã€‚åŠ è½½æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3fd5c32e4404149ad4d5b38c8352016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=MlxoTlJTTsZC0z8x9wcKdQydMOQ%3D" alt="60be4c9076614e16934f26215a242841~tplv-k3u1fbpfcp-jj-mark_1512_0_0_0_q75.awebp" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬è§‚å¯Ÿä¸‹ dashboard è¿™ä¸ª HTML æ–‡ä»¶çš„åŠ è½½æƒ…å†µï¼Œä½ ä¼šå‘ç°å®ƒä¸€å¼€å§‹æ˜¯ 2.03sï¼Œç„¶åå˜æˆäº† 5.03sï¼Œæœ€åå˜æˆäº† 8.04sï¼Œè¿™ä¸å°±æ­£æ˜¯æˆ‘ä»¬è®¾ç½®çš„ sleep æ—¶é—´å—ï¼Ÿ</p>
<p>æŸ¥çœ‹ dashboard è¯·æ±‚çš„å“åº”å¤´ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ea40e899a2446e2a0ca81cd82cdecd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=u6pQ2Y9gthlX3xESLkjR2fjyOQw%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>Transfer-Encoding</code>Â æ ‡å¤´çš„å€¼ä¸ºÂ <code>chunked</code>ï¼Œè¡¨ç¤ºæ•°æ®å°†ä»¥ä¸€ç³»åˆ—åˆ†å—çš„å½¢å¼è¿›è¡Œå‘é€</strong>ã€‚</p>
<blockquote>
<p>åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked transfer encodingï¼‰æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰ä¸­çš„ä¸€ç§æ•°æ®ä¼ è¾“æœºåˆ¶ï¼Œå…è®¸ HTTP ç”±ç½‘é¡µæœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯åº”ç”¨ï¼ˆ é€šå¸¸æ˜¯ç½‘é¡µæµè§ˆå™¨ï¼‰çš„æ•°æ®å¯ä»¥åˆ†æˆå¤šä¸ªéƒ¨åˆ†ã€‚åˆ†å—ä¼ è¾“ç¼–ç åªåœ¨ HTTP åè®®1.1ç‰ˆæœ¬ï¼ˆHTTP/1.1ï¼‰ä¸­æä¾›ã€‚</p>
</blockquote>
<p>å†æŸ¥çœ‹ dashboard è¿”å›çš„æ•°æ®ï¼ˆè¿™é‡Œæˆ‘ä»¬åšäº†ç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        // ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"__className_aaf875"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding:20px"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:0"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading PostFeed Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading Weather Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
            <span class="hljs-comment">&lt;!--$?--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"B:2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading Recommend Component<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-comment">&lt;!--/$--&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
        // ...
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:0"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello PostFeed<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            <span class="hljs-comment">// äº¤æ¢ä½ç½®</span>
            $RC = <span class="hljs-keyword">function</span>(<span class="hljs-params">b, c, e</span>) {
                <span class="hljs-comment">// ...</span>
            };
            $RC(<span class="hljs-string">"B:0"</span>, <span class="hljs-string">"S:0"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            $RC(<span class="hljs-string">"B:2"</span>, <span class="hljs-string">"S:2"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">hidden</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"S:1"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello Weather<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
            $RC(<span class="hljs-string">"B:1"</span>, <span class="hljs-string">"S:1"</span>)
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>

</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨ Suspense ç»„ä»¶çš„ fallback UI å’Œæ¸²æŸ“åçš„å†…å®¹éƒ½ä¼šå‡ºç°åœ¨è¯¥ HTML æ–‡ä»¶ä¸­ï¼Œ<strong>è¯´æ˜è¯¥è¯·æ±‚æŒç»­ä¸æœåŠ¡ç«¯ä¿æŒè¿æ¥ï¼ŒæœåŠ¡ç«¯åœ¨ç»„ä»¶æ¸²æŸ“å®Œåä¼šå°†æ¸²æŸ“åçš„å†…å®¹è¿½åŠ ä¼ ç»™å®¢æˆ·ç«¯</strong>ã€‚</p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°æ–°çš„å†…å®¹åè¿›è¡Œè§£æï¼Œæ‰§è¡Œç±»ä¼¼äºÂ <code>$RC("B:2", "S:2")</code>è¿™æ ·çš„å‡½æ•°äº¤æ¢ DOM å†…å®¹ï¼Œä½¿ fallback UI æ›¿æ¢ä¸ºæ¸²æŸ“åçš„å†…å®¹ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¹‹ä¸º <strong>Streaming Server Renderingï¼ˆæµå¼æ¸²æŸ“ï¼‰</strong>ï¼Œ<strong>å®ƒè§£å†³äº†ä¸ŠèŠ‚è¯´çš„ä¼ ç»Ÿ SSR çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ•°æ®è·å–å¿…é¡»åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰</strong>ã€‚ä½¿ç”¨ Suspenseï¼Œå…ˆæ¸²æŸ“ Fallback UIï¼Œç­‰æ•°æ®è¿”å›å†æ¸²æŸ“å…·ä½“çš„ç»„ä»¶å†…å®¹ã€‚</p>
<p>ä½¿ç”¨ Suspense è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ <strong>Selective Hydrationï¼ˆé€‰æ‹©æ€§æ°´åˆï¼‰</strong>ã€‚ç®€å•çš„æ¥è¯´ï¼Œå½“å¤šä¸ªç»„ä»¶ç­‰å¾…æ°´åˆçš„æ—¶å€™ï¼ŒReact å¯ä»¥æ ¹æ®ç”¨æˆ·äº¤äº’å†³å®šç»„ä»¶æ°´åˆçš„ä¼˜å…ˆçº§ã€‚æ¯”å¦‚ Sidebar å’Œ MainContent ç»„ä»¶éƒ½åœ¨ç­‰å¾…æ°´åˆï¼Œå¿«è¦åˆ° Sidebar äº†ï¼Œä½†æ­¤æ—¶ç”¨æˆ·ç‚¹å‡»äº† MainContent ç»„ä»¶ï¼ŒReact ä¼šåœ¨å•å‡»äº‹ä»¶çš„æ•è·é˜¶æ®µåŒæ­¥æ°´åˆ MainContent ç»„ä»¶ä»¥ä¿è¯ç«‹å³å“åº”ï¼ŒSidebar ç¨åæ°´åˆã€‚</p>
<h2 data-id="heading-2">Streaming</h2>
<p><strong>Suspense èƒŒåçš„è¿™ç§æŠ€æœ¯ç§°ä¹‹ä¸º Streaming</strong>ã€‚</p>
<p><strong>å°†é¡µé¢çš„ HTML æ‹†åˆ†æˆå¤šä¸ª chunksï¼Œç„¶åé€æ­¥å°†è¿™äº›å—ä»æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1134a44111224c3f9ec4ec38c457a26a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=0n356kbxyoCgIfFfXLqX2myGrsY%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•ç†è§£ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šæœåŠ¡å™¨åœ¨ç”Ÿæˆ HTML æ—¶ï¼Œä¸ç”¨ç­‰æ‰€æœ‰æ•°æ®ï¼ˆæ¯”å¦‚æ¥å£è¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰éƒ½è¿”å›ï¼Œè€Œæ˜¯<strong>å…ˆæŠŠé¡µé¢çš„é™æ€éª¨æ¶ï¼ˆå¯¼èˆªã€é¡µè„šã€ç©ºçš„å†…å®¹å®¹å™¨ï¼‰ä»¥ chunk å—çš„å½¢å¼å‘ç»™æµè§ˆå™¨</strong>ï¼Œæµè§ˆå™¨æ”¶åˆ°åç«‹åˆ»æ¸²æŸ“å‡ºéª¨æ¶ï¼Œå‡å°‘ç™½å±æ—¶é—´ã€‚</li>
<li>ä¹‹åæœåŠ¡å™¨å†é€ä¸ªè·å–åŠ¨æ€æ•°æ®ï¼ˆæ¯”å¦‚å•†å“åˆ—è¡¨ã€æ–‡ç« å†…å®¹ï¼‰ï¼Œæ¯æ‹¿åˆ°ä¸€éƒ¨åˆ†å°±ç”Ÿæˆå¯¹åº”çš„ HTML ç‰‡æ®µï¼Œå†ä»¥ chunk å—å‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°å<strong>å¢é‡æ’å…¥åˆ°é¡µé¢ä¸­</strong>ï¼Œé¡µé¢å†…å®¹é€æ­¥ <strong>å¡«å……</strong> å®Œæˆã€‚</li>
<li><strong>æŠ€æœ¯ä¾èµ–</strong>ï¼šå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¯´çš„ HTTP åˆ†å—ä¼ è¾“ï¼ˆ<code>Transfer-Encoding: chunked</code>ï¼‰æˆ– HTTP/2 äºŒè¿›åˆ¶åˆ†å¸§ï¼ŒNext.jsã€Nuxt.js ç­‰æ¡†æ¶çš„ SSR æµå¼æ¸²æŸ“éƒ½æ˜¯è¿™ä¹ˆå®ç°çš„ã€‚</li>
</ul>
<p>è¿™æ ·å°±å¯ä»¥æ›´å¿«çš„å±•ç°å‡ºé¡µé¢çš„æŸäº›å†…å®¹ï¼Œè€Œæ— éœ€åœ¨æ¸²æŸ“ UI ä¹‹å‰ç­‰å¾…åŠ è½½æ‰€æœ‰æ•°æ®ã€‚</p>
<p><strong>æå‰å‘é€çš„ç»„ä»¶å¯ä»¥æå‰å¼€å§‹æ°´åˆï¼Œè¿™æ ·å½“å…¶ä»–éƒ¨åˆ†è¿˜åœ¨åŠ è½½çš„æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥å’Œå·²å®Œæˆæ°´åˆçš„ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œæœ‰æ•ˆæ”¹å–„ç”¨æˆ·ä½“éªŒ</strong>ã€‚</p>
<p>ä¼ ç»Ÿ SSRï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce5dfd0d23004d1a9ccb8436d4af61f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=y98HaoMnwMTV75Ua9J0LqWtAQXw%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨ Streaming åï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4072d62dfa1a430999f3d08c3753688e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=MPGbAuejwxPjr6HSYGVwcGum89U%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åœ¨ Next.js ä¸­æœ‰ä¸¤ç§å®ç° Streaming çš„æ–¹æ³•</strong>ï¼š</p>
<ol>
<li><strong>é¡µé¢çº§åˆ«ï¼Œä½¿ç”¨Â <code>loading.jsx</code></strong></li>
<li><strong>ç‰¹å®šç»„ä»¶ï¼Œä½¿ç”¨Â <code>&lt;Suspense&gt;</code></strong></li>
</ol>
<p>Suspense å’Œ Streaming ç¡®å®å¾ˆå¥½ï¼Œå°†åŸæœ¬åªèƒ½å…ˆè·å–æ•°æ®ã€å†æ¸²æŸ“æ°´åˆçš„ä¼ ç»Ÿ SSR æ”¹ä¸º<strong>æ¸è¿›å¼æ¸²æŸ“æ°´åˆ</strong>ã€‚</p>
<p>ä½†è¿˜æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰è§£å†³ï¼š</p>
<p><strong>1. ç”¨æˆ·ä¸‹è½½çš„ JavaScript ä»£ç ï¼Œè¯¥ä¸‹è½½çš„ä»£ç è¿˜æ˜¯æ²¡æœ‰å°‘ï¼Œå¯æ˜¯ç”¨æˆ·çœŸçš„éœ€è¦ä¸‹è½½é‚£ä¹ˆå¤šçš„ Javascript ä»£ç å—ï¼Ÿ</strong></p>
<p><strong>2. æ‰€æœ‰çš„ç»„ä»¶éƒ½å¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ°´åˆï¼Œå¯¹äºä¸éœ€è¦äº¤äº’æ€§çš„ç»„ä»¶å…¶å®æ²¡æœ‰å¿…è¦è¿›è¡Œæ°´åˆã€‚</strong></p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æœåŠ¡ç«¯ç»„ä»¶è¦è§£å†³çš„é—®é¢˜äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31b72c972bf74068af79234745f61944~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=3ZhK6XvgutXLLh%2Fv11eK8SezfzQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨]]></title>    <link>https://juejin.cn/post/7591066233670156314</link>    <guid>https://juejin.cn/post/7591066233670156314</guid>    <pubDate>2026-01-04T03:24:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591066233670156314" data-draft-id="7591079707698774026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨"/> <meta itemprop="keywords" content="Claude,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-04T03:24:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            âš¡å¼€å‘è€…ç¥å™¨æ¥äº†ï¼Anthropicå®˜æ–¹Ralph Wiggumæ’ä»¶æ·±åº¦å®æµ‹ï¼šè®©Claude Codeå˜èº«æ°¸ä¸åœæ­‡çš„å…¨è‡ªåŠ¨å¼€å‘æœºå™¨ï¼å‘Šåˆ«æ‰‹åŠ¨è°ƒè¯•ï¼iOSåŸç”Ÿåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:24:33.000Z" title="Sun Jan 04 2026 03:24:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®© Claude Code â€œåˆ«åœâ€ï¼šRalph Wiggum æ’ä»¶åˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>å¦‚æœä½ ç”¨è¿‡å„ç§ AI ç¼–ç¨‹å·¥å…·ï¼Œå¤§æ¦‚ç‡é‡åˆ°è¿‡åŒä¸€ç§æ†‹å±ˆï¼šå®ƒå†™å®Œä¸€æ®µä»£ç ã€æ”¹å®Œå‡ ä¸ªæ–‡ä»¶ï¼Œå°±è§‰å¾—å·®ä¸å¤šå®Œæˆäº†ï¼Œç„¶ååœä¸‹ï¼Œç•™ä½ ä¸€ä¸ªäººé¢å¯¹æ„å»ºæ²¡è¿‡ã€æµ‹è¯•çº¢äº†ä¸€ç‰‡ã€UI ç»†èŠ‚è¿˜å·®ä¸€å£æ°”ã€æŸä¸ªè¾¹ç•Œ case ä¾ç„¶å´©ã€‚</p>
<p>çœŸå®å¼€å‘ä»æ¥ä¸æ˜¯ä¸€æ¬¡æ€§å†™å®Œï¼Œè€Œæ˜¯å†™ä¸€ç‚¹ â†’ è·‘ä¸€ä¸‹ â†’ æŠ¥é”™ â†’ ä¿® â†’ å†è·‘ â†’ å†ä¿®ï¼Œå¾ªç¯å¾€å¤ï¼Œç›´åˆ°è¾¾æ ‡ã€‚</p>
<p>Ralph Wiggum è¿™ä¸ª Claude Code å®˜æ–¹æ’ä»¶çš„å‰å®³ä¹‹å¤„å°±åœ¨äºï¼šå®ƒä¸è¯•å›¾æ›´èªæ˜åœ°å†™ä»£ç ï¼Œè€Œæ˜¯æŠŠ Claude Code å˜æˆä¸€ä¸ªå¯æ§çš„æŒç»­è¿­ä»£æ‰§è¡Œå™¨ã€‚ä½ è®¾å®šè§„åˆ™ï¼Œå®ƒå°±æŒ‰å›åˆåˆ¶ä¸€ç›´æ¨è¿›ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶æ‰åœã€‚</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1zyiiBRE32%2F" target="_blank" title="https://www.bilibili.com/video/BV1zyiiBRE32/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1zyâ€¦</a></p>
<hr/>
<h3 data-id="heading-1">1ï¼‰Ralph Wiggum æ˜¯ä»€ä¹ˆï¼šä¸æ˜¯æ–°æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤–éƒ¨æ§åˆ¶å›è·¯</h3>
<p>Ralph çš„æœ¬è´¨éå¸¸æœ´ç´ ï¼šClaude æ¯æ¬¡æƒ³é€€å‡ºæ—¶ï¼ŒæŠŠå®ƒæ‹¦ä¸‹æ¥ï¼Œå†æŠŠåŒä¸€ä¸ªä»»åŠ¡å–‚å›å»ç»§ç»­åšã€‚</p>
<p>å®ƒä¾èµ–çš„æ˜¯ Claude Code çš„ Stop hook æœºåˆ¶ï¼šå½“ Claude è§‰å¾—è‡ªå·±åšå®Œäº†å‡†å¤‡ç»“æŸï¼Œæ’ä»¶çš„ stop hook ä¼šä»‹å…¥ï¼Œé˜»æ­¢é€€å‡ºå¹¶è§¦å‘ä¸‹ä¸€è½®ã€‚</p>
<p>æ‰€ä»¥ Ralph çš„æ ¸å¿ƒä»·å€¼ä¸æ˜¯çµæ„Ÿï¼Œè€Œæ˜¯èŠ‚å¥ã€‚å®ƒæŠŠå¤æ‚å·¥ç¨‹å˜æˆç¨³å®šçš„å›åˆåˆ¶æ¨è¿›ï¼š</p>
<ul>
<li>æœ¬è½®åšä»€ä¹ˆ</li>
<li>æœ¬è½®æ€ä¹ˆéªŒè¯</li>
<li>ä¸è¾¾æ ‡å°±ä¸‹ä¸€è½®ç»§ç»­ä¿®</li>
<li>è¾¾æ ‡æ‰å…è®¸ç»“æŸ</li>
</ul>
<hr/>
<h3 data-id="heading-2">2ï¼‰å®ƒä¸ºä»€ä¹ˆå« Ralph Wiggumï¼šå¹¼ç¨šï¼Œä½†éå¸¸æœ‰æ•ˆçš„åšæŒ</h3>
<p>è¿™ä¸ªåå­—æ¥è‡ªè¾›æ™®æ£®ä¸€å®¶é‡Œçš„ Ralph Wiggumï¼šç»å¸¸çŠ¯é”™ã€ç»å¸¸ç¿»è½¦ï¼Œä½†ä¹Ÿä¼šåƒå°å­©ä¸€æ ·ç»§ç»­å°è¯•ï¼Œç›´åˆ°æŠŠäº‹æƒ…åšå¯¹ã€‚å¾ˆå¤šäººç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªåå­—ä¼šè§‰å¾—ç¦»è°±ï¼Œä½†ç”¨è¿‡ä¹‹ååè€Œä¼šè§‰å¾—è´´åˆ‡ã€‚å·¥ç¨‹é‡Œæœ€ç¨€ç¼ºçš„ä¸æ˜¯èªæ˜ï¼Œæ˜¯ä¸åœä¸‹æ¥æŠŠçƒ‚å°¾æ”¶æ‰çš„è€å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-3">3ï¼‰æ€ä¹ˆç”¨ï¼šä¸‰æ¡å‘½ä»¤ + ä¸¤ä¸ªå…³é”®å‚æ•°</h3>
<p>ä¸åŒç¯å¢ƒé‡Œä½ å¯èƒ½çœ‹åˆ°ç®€å†™ï¼Œä½†æ›´ç¨³çš„ç†è§£æ–¹å¼æ˜¯æŒ‰å‘½åç©ºé—´å†™æ³•æ¥è®°ã€‚Claude Code çš„æ’ä»¶å‘½ä»¤é€šå¸¸ä»¥ æ’ä»¶å: ä½œä¸ºå‰ç¼€ã€‚</p>
<p>å¸¸è§å‘½ä»¤æ˜¯è¿™ä¸‰æ¡ï¼š</p>
<ul>
<li>å¯åŠ¨å¾ªç¯ï¼š/ralph-wiggum:ralph-loop æç¤ºè¯ --max-iterations N</li>
<li>å–æ¶ˆå¾ªç¯ï¼š/ralph-wiggum:cancel-ralph</li>
<li>æŸ¥çœ‹è¯´æ˜ï¼š/ralph-wiggum:help</li>
</ul>
<p>ç„¶åæ˜¯ä¸¤ä¸ªä½ ä¸€å®šä¼šç”¨ä¸Šçš„å‚æ•°ã€‚</p>
<p>max-iterations<br/>
ç»™å¾ªç¯åŠ ä¿é™©ä¸ã€‚å¦åˆ™ä»»åŠ¡ä¸€æ—¦å†™å¾—å¤ªæ³›ã€éªŒæ”¶æ¡ä»¶ä¸æ¸…æ™°ï¼Œå°±å¯èƒ½è·‘å¾ˆä¹…ã€‚è¿™ä¸ªå‚æ•°è®©å®ƒæœ€å¤šè¿­ä»£ N è½®ï¼Œåˆ°ç‚¹å¼ºåˆ¶åœã€‚</p>
<p>completion-promise<br/>
è¿™æ˜¯ Ralph çš„çµé­‚ï¼šæ˜ç¡®ä»€ä¹ˆæƒ…å†µä¸‹ç®—å®Œæˆã€‚æ’ä»¶ä¼šç›¯ç€ Claude çš„è¾“å‡ºï¼Œä¸€æ—¦å‡ºç°ä½ æŒ‡å®šçš„å®Œæˆæ ‡è®°ï¼Œå°±å…è®¸é€€å‡ºã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼Œè¿™é‡ŒçœŸæ­£è®©å¾ªç¯å¯æ§çš„ä¸æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œè€Œæ˜¯éªŒæ”¶å£å¾„ã€‚</p>
<hr/>
<h3 data-id="heading-4">4ï¼‰æœ€é‡è¦çš„ä¸€ç‚¹ï¼šRalph ä¸ä¼šæ›¿ä½ æƒ³æ¸…æ¥šéªŒæ”¶æ ‡å‡†</h3>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡ç”¨ Ralphï¼Œä¼šæŠŠæç¤ºè¯å†™æˆä¸€å¥è¯ï¼šæŠŠé¡¹ç›®å˜å¥½ã€ä¿®å¤ bugã€ä¼˜åŒ–ä¸€ä¸‹ UIã€‚ç„¶åè·‘åˆ°ç¬¬ 10 è½®ï¼Œå‘ç°æ•ˆæœå¹¶ä¸ç¨³å®šã€‚ä¸æ˜¯ Ralph ä¸è¡Œï¼Œè€Œæ˜¯ä½ ç»™äº†ä¸€ä¸ªæ— æ³•éªŒè¯çš„ç›®æ ‡ã€‚</p>
<p>Ralph çš„æ­£ç¡®æ‰“å¼€æ–¹å¼æ˜¯ï¼šæŠŠå¼€å‘ä»»åŠ¡å†™æˆå¯éªŒè¯çš„äº¤ä»˜æ¸…å•ã€‚</p>
<p>æ¯”å¦‚ä½ å¯ä»¥è¿™æ ·è¡¨è¾¾ï¼š</p>
<ul>
<li>æŠŠç™»å½•é¡µåšå¾—æ›´ä¸“ä¸š</li>
<li>é¡µé¢åœ¨ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½ä¸æº¢å‡º</li>
<li>è¡¨å•æ ¡éªŒï¼šé‚®ç®±æ ¼å¼ä¸å¯¹æ—¶æç¤ºï¼›å¯†ç å°‘äº 8 ä½æç¤º</li>
<li>äº¤äº’ï¼šæŒ‰é’®æœ‰ hover ä¸ disabled çŠ¶æ€</li>
<li>è·‘æµ‹è¯•å…¨ç»¿æˆ–æ„å»ºé€šè¿‡</li>
<li>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶åè¾“å‡ºæŒ‡å®šçš„å®Œæˆæ ‡è®°</li>
</ul>
<p>æ³¨æ„å®Œæˆæ ‡è®°æœ€å¥½å†™å¾—ä¸å®¹æ˜“è¯¯åˆ¤ï¼Œæ¯”å¦‚ç”¨ä¸€ä¸ªå¾ˆç‹¬ç‰¹çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯éšå£å°±å¯èƒ½å‡ºç°çš„ doneã€‚</p>
<hr/>
<h3 data-id="heading-5">5ï¼‰å“ªäº›åœºæ™¯æœ€é€‚åˆï¼šRalph çš„å¼ºé¡¹å…¶å®æ˜¯æ”¶å°¾æ´»</h3>
<p>Ralph æŠŠ Claude Code å˜æˆæŒç»­å¾ªç¯ï¼Œç‰¹åˆ«é€‚åˆé‚£äº›éœ€è¦å¤šè½®çº é”™çš„ä»»åŠ¡ã€‚</p>
<p>æˆ‘å»ºè®®ä½ ä¼˜å…ˆæŠŠ Ralph ç”¨åœ¨è¿™å››ç±»æœ€æŠ˜ç£¨äººçš„çœŸå®åœºæ™¯ï¼š</p>
<p>A. Bug ä¿®å¤<br/>
å°¤å…¶æ˜¯ä¿®äº†åˆå†’å‡ºæ¥çš„é‚£ç§ã€‚è®©å®ƒæ¯è½®éƒ½å¤ç° â†’ å®šä½ â†’ ä¿®å¤ â†’ è¿è¡Œæµ‹è¯•æˆ–æ„å»º â†’ å†å¤ç°ç¡®è®¤ã€‚ä½ åªéœ€è¦æŠŠå¤ç°æ­¥éª¤å’Œé€šè¿‡æ¡ä»¶å†™æ¸…æ¥šã€‚</p>
<p>B. è¡¥æµ‹è¯•ä¸å›å½’<br/>
è¿™ç±»ä»»åŠ¡å¤©ç„¶éœ€è¦å¾ªç¯ï¼šè¡¥ä¸€ä¸ªæµ‹è¯• â†’ å¤±è´¥ â†’ ä¿®å®ç° â†’ å†è¡¥ä¸‹ä¸€ä¸ªã€‚æµ‹è¯•å…¨ç»¿æœ¬èº«å°±æ˜¯æœ€æ¸…æ™°çš„å®Œæˆä¿¡å·ã€‚</p>
<p>C. ä¾èµ–è¿ç§»ä¸å¤§ç‰ˆæœ¬å‡çº§<br/>
æ¯”å¦‚æµ‹è¯•æ¡†æ¶è¿ç§»ã€è·¯ç”±å‡çº§ã€æ„å»ºå·¥å…·æ›¿æ¢ã€‚è¿ç§»æœ€æ€•åŠåŠå­ï¼šèƒ½ç¼–è¯‘ä½†è·‘ä¸èµ·æ¥ã€‚å¾ªç¯è·‘æ„å»ºå’Œæµ‹è¯•ï¼Œæ‰ä¼šæŠŠå°¾å·´æ”¶å¹²å‡€ã€‚</p>
<p>D. é‡æ„<br/>
é‡æ„æœ€éœ€è¦èŠ‚å¥ï¼šæ”¹ä¸€éƒ¨åˆ† â†’ éªŒè¯ â†’ å†æ”¹ä¸€éƒ¨åˆ†ã€‚Ralph çš„å›åˆåˆ¶éå¸¸é€‚åˆæŠŠé‡æ„æ‹†æˆç¨³å®šæ¨è¿›çš„å·¥ç¨‹åŠ¨ä½œã€‚</p>
<hr/>
<h3 data-id="heading-6">6ï¼‰å®ƒä¸ºä»€ä¹ˆæœ‰æ•ˆï¼šå› ä¸ºå®ƒæŠŠåé¦ˆå˜æˆäº†ä¸‹ä¸€è½®çš„ç‡ƒæ–™</h3>
<p>å¾ˆå¤š AI ç¼–ç¨‹å¤±è´¥ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæ¨¡å‹ä¸ä¼šå†™ï¼Œè€Œæ˜¯å› ä¸ºå®ƒæ‹¿ä¸åˆ°è¶³å¤Ÿå¼ºçš„åé¦ˆé—­ç¯ã€‚å†™å®Œå°±åœï¼Œç­‰äºæŠŠæœ€å…³é”®çš„æŠ¥é”™ä¿¡æ¯ã€æµ‹è¯•ç»“æœã€æ„å»ºæ—¥å¿—ä¸¢æ‰äº†ã€‚</p>
<p>Ralph å¼ºåˆ¶ä½ è¿›å…¥ä¸€ç§æ›´æ¥è¿‘ç°å®å¼€å‘çš„æµç¨‹ï¼š</p>
<ul>
<li>è¿™è½®åšäº†ä»€ä¹ˆ</li>
<li>è¿™è½®éªŒè¯ç»“æœæ˜¯ä»€ä¹ˆ</li>
<li>ä¸‹ä¸€è½®å¿…é¡»åŸºäºè¿™äº›åé¦ˆç»§ç»­ä¿®æ­£</li>
</ul>
<p>åé¦ˆè¶Šå…·ä½“ï¼Œä¸‹ä¸€è½®è¶Šå‡†ã€‚è¿™ç§æœºåˆ¶åœ¨å·¥ç¨‹é‡Œå½“ç„¶æœ‰æ•ˆï¼Œå› ä¸ºæˆ‘ä»¬äººç±»å°±æ˜¯è¿™ä¹ˆè¿­ä»£å‡ºæ¥çš„ã€‚</p>
<hr/>
<h3 data-id="heading-7">7ï¼‰ä½ éœ€è¦æå‰çŸ¥é“çš„å‘ï¼šå®ƒå¾ˆå¼ºï¼Œä½†ä¹Ÿä¸æ˜¯æ— è„‘å¼€æŒ‚</h3>
<p>å‘ 1ï¼šå®‰å…¨é™åˆ¶å¯¼è‡´çš„æ¢è¡ŒæŠ¥é”™<br/>
æœ‰äº›ç¯å¢ƒé‡Œï¼ŒRalph å¯èƒ½è§¦å‘ Claude Code å¯¹å¤šè¡Œå‘½ä»¤çš„å®‰å…¨æ£€æŸ¥ï¼Œå¯¼è‡´æ— æ³•å¯åŠ¨å¾ªç¯ã€‚é€šå¸¸çš„è§„é¿æ–¹å¼æ˜¯æŠŠæç¤ºè¯å†™æˆå•è¡Œï¼ŒæŠŠé•¿è¦æ±‚æ”¾åˆ°æ–‡ä»¶é‡Œï¼Œå†è®© Claude å»è¯»ã€‚</p>
<p>å‘ 2ï¼šWindows ç¯å¢ƒä¾èµ–é—®é¢˜<br/>
æœ‰äººåœ¨ Windows æˆ–æŸäº› shell ç¯å¢ƒé‡Œé‡åˆ° stop hook å› ä¸ºç¼ºå°‘ä¾èµ–è€Œå¤±è´¥ã€‚é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œä¼˜å…ˆæ£€æŸ¥è¿è¡Œç¯å¢ƒå’Œå¸¸ç”¨å‘½ä»¤æ˜¯å¦é½å…¨ã€‚</p>
<p>å‘ 3ï¼šå¿˜è®°åŠ ä¿é™©ä¸ï¼Œæˆæœ¬ä¼šé£™<br/>
ä¸å¼€ max-iterationsï¼Œå†é…ä¸Šæ¨¡ç³Šçš„éªŒæ”¶æ¡ä»¶ï¼Œè·‘ç€è·‘ç€å°±ä¼šå˜æˆè‡ªåŠ¨çƒ§é’±çƒ§æ—¶é—´çš„æœºå™¨ã€‚æ­£ç¡®å§¿åŠ¿æ°¸è¿œæ˜¯ä¸Šé™ + æ˜ç¡®éªŒæ”¶ã€‚</p>
<hr/>
<h3 data-id="heading-8">8ï¼‰æœ€åç»™ä¸€ä¸ªå…¬ä¼—å·å¼ç»“è®ºï¼šRalph çš„æ ¸å¿ƒç†å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<p>è®© Claude Code è´Ÿè´£å†™ä»£ç ï¼Œè®© Ralph Wiggum è´Ÿè´£è®©å®ƒåˆ«åœï¼Œç›´åˆ°ä½ å®šä¹‰çš„å®ŒæˆçœŸçš„å®Œæˆã€‚</p>
<p>å®ƒæŠŠ AI ç¼–ç¨‹ä»ä¸€æ¬¡æ€§å›ç­”æ‹‰å›åˆ°å·¥ç¨‹è¿­ä»£ï¼ŒæŠŠæœ€ç°å®ã€æœ€å…³é”®ã€ä¹Ÿæœ€å®¹æ˜“çƒ‚å°¾çš„é‚£éƒ¨åˆ†å·¥ä½œï¼šæµ‹è¯•ã€ä¿®é”™ã€æ”¶å°¾ï¼Œå˜æˆäº†å¯ä»¥è‡ªåŠ¨æ¨è¿›çš„æµç¨‹ã€‚</p>
<p>å¦‚æœä½ æ›¾ç»è¢«å·®ä¸€ç‚¹å°±å¥½äº†çš„ AI ç¼–ç¨‹ä½“éªŒæ°”åˆ°ï¼Œé‚£ Ralph å¾ˆå¯èƒ½ä¼šè®©ä½ ç¬¬ä¸€æ¬¡è§‰å¾—ï¼šAI ä¸æ˜¯å†™å®Œå°±èµ°ï¼Œè€Œæ˜¯èƒ½æŠŠé¡¹ç›®çœŸæ­£è·‘é€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]]]></title>    <link>https://juejin.cn/post/7590403249561649167</link>    <guid>https://juejin.cn/post/7590403249561649167</guid>    <pubDate>2026-01-04T02:12:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249561649167" data-draft-id="7590681158716473384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-04T02:12:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»™äººæŒä¸€å·"/> <meta itemprop="url" content="https://juejin.cn/user/814057212357645"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ç™½å±æœºåˆ¶åŸç†åˆ†æ[å…±1500å­—ï¼Œé˜…è¯»æ—¶é•¿8min]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/814057212357645/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»™äººæŒä¸€å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:12:27.000Z" title="Sun Jan 04 2026 02:12:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç™½å±æ˜¯ä»€ä¹ˆ</h3>
<p>ç™½å±æ˜¯Reactä¸»åŠ¨é˜²å¾¡æœºåˆ¶ï¼ŒReactå›¢é˜Ÿè®¤ä¸ºï¼Œæ˜¾ç¤ºé”™è¯¯çš„UIæ¯”ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹æ›´ç³Ÿç³•ï¼ˆä¾‹å¦‚ï¼Œè½¬è´¦é‡‘é¢æ˜¾ç¤ºé”™è¯¯ï¼‰ï¼Œå› æ­¤Reacté‡åˆ°æ— æ³•å¤„ç†çš„å¼‚å¸¸ï¼Œä¼šé€‰æ‹©å¸è½½æ‰æ•´ä¸ªç»„ä»¶æ ‘ã€‚å¯¹æ¯”ç€çœ‹ï¼ŒåŸç”Ÿç›´æ¥æ“ä½œDOMçš„æ–¹å¼é€šå¸¸ä¸ä¼šé€ æˆç™½å±çš„ç°è±¡ï¼Œè€Œæ˜¯ä¼šåœç•™åœ¨é”™è¯¯å‘ç”Ÿå‰çš„çŠ¶æ€ã€‚</p>
<h3 data-id="heading-1">Reactæ¸²æŸ“æœºåˆ¶</h3>
<p>ç™½å±çš„å‡ºç°ä¸Reactæ¸²æŸ“æœºåˆ¶æ¯æ¯ç›¸å…³ï¼Œç™½å±å®é™…å°±æ˜¯ï¼šReactæ¸²æŸ“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†æœªæ•è·é”™è¯¯ï¼ŒReactå†…éƒ¨é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ•è·äº†è¯¥é”™è¯¯ï¼Œç„¶åè¿›è¡Œç»„ä»¶å¸è½½ï¼Œé˜²æ­¢æ˜¾ç¤ºé”™è¯¯UIã€‚ä¸‹å›¾æ˜¯Reactçš„æ¸²æŸ“æµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/511ffab692214dfa903ea37f1a089f6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=Zlc%2BM0PBQl2qnDJo5de8OKgYMQY%3D" alt="image.png" loading="lazy"/>
ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<h4 data-id="heading-2">Renderé˜¶æ®µ</h4>
<p>æ ¹æ® JSXè½¬æ¢çš„ReactElementèŠ‚ç‚¹ +æ—§çš„FiberèŠ‚ç‚¹æ ‘ æ„å»ºå‡ºæ–°çš„FiberèŠ‚ç‚¹æ ‘ï¼ˆFiberå¯ä»¥è¢«çœ‹ä½œä¸ºæ˜¯è™šæ‹ŸDOMï¼‰ã€‚</p>
<h4 data-id="heading-3">Commité˜¶æ®µ</h4>
<p>æ ¹æ®Renderé˜¶æ®µå¾—å‡ºçš„æ–°çš„Fiberæ ‘æ›´æ–°DOMã€‚</p>
<h4 data-id="heading-4">æ¸²æŸ“è§¦å‘æ—¶æœº</h4>
<ol>
<li>ç»„ä»¶åˆå§‹åŒ–ã€‚</li>
<li>é€šè¿‡setStateè§¦å‘ç»„ä»¶çŠ¶æ€æ›´æ–°ã€‚</li>
</ol>
<p><strong>ç»„ä»¶åˆå§‹åŒ–</strong>å’Œ<strong>çŠ¶æ€å˜æ›´</strong>éƒ½ä¼šèµ°è¿™å¥—æ¸²æŸ“æµç¨‹ï¼Œåªä¸è¿‡ä¼šæ ¹æ®Mounté˜¶æ®µ/Updateé˜¶æ®µçš„ä¸åŒï¼Œä¸€äº›å¤„ç†é€»è¾‘ä¸åŒï¼Œæ•´ä½“æµç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<h3 data-id="heading-5">ç™½å±æœºåˆ¶</h3>
<h4 data-id="heading-6">Renderé˜¶æ®µ</h4>
<p>åœ¨æºç ä¸­ï¼Œå¯ä»¥æŠŠ<strong>workLoopSync</strong>å‡½æ•°çœ‹ä½œæ˜¯Reactçš„<strong>Render</strong>é˜¶æ®µï¼ŒworkLoopSyncæ˜¯è¢«try/catchåŒ…è£¹çš„ã€‚ä¸€æ—¦workLoopSyncè¿‡ç¨‹ä¸­é‡åˆ°<strong>ä¸å¯å¤„ç†ä¸”æœªæ•è·çš„é”™è¯¯</strong>ï¼Œå¦‚aæ˜¯undefinedï¼Œä»£ç ä¸­è¯»å–a.b.cï¼Œè¿™ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆé”™è¯¯ï¼Œå¹¶ä¸”è¿™ä¸ªé”™è¯¯ä¼šè¢«try/catchæ‰€æ•è·ï¼Œè¿›å…¥<strong>handleError</strong>å‡½æ•°ä¸­ã€‚åœ¨handleErrorå‡½æ•°ä¸­ä¼šè§¦å‘Reactçš„ç™½å±é€»è¾‘å’ŒErrorboundaryé€»è¾‘ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0992eb98f44d471c983edebafe6c905f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=LFLkQRT%2FMT%2ByD3W7ofbGueIhv%2BI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ€»ç»“</strong>ï¼šå½“ Render é˜¶æ®µï¼ˆå¦‚ workLoopSync æ„å»º Fiber æ ‘ï¼‰å‘ç”Ÿæœªæ•è·çš„ JavaScript é”™è¯¯æ—¶ï¼ŒReact ä¼šåˆ©ç”¨å†…éƒ¨çš„ try/catch æ•è·å¼‚å¸¸ã€‚ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºæ•°æ®ä¸ä¸€è‡´æˆ–æŸåçš„ UIï¼ŒReact ä¼šé€‰æ‹©å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ï¼ˆå³ç™½å±ï¼‰ã€‚</p>
<h4 data-id="heading-7">commité˜¶æ®µ</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffb63c93b2dd4e77b8fe2753657ce51f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuZ5Lq65o6M5LiA5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097547&amp;x-signature=90IlcyuxqkyppjFl2dnQQwzl1U4%3D" alt="image.png" loading="lazy"/></p>
<p>è™½ç„¶<strong>Render</strong>é˜¶æ®µè°ƒç”¨çš„æ˜¯<strong>handleError</strong>ï¼Œ<strong>Commit</strong>é˜¶æ®µè°ƒç”¨çš„æ˜¯<strong>captureCommitPhaseError</strong>ï¼Œä½†æ˜¯ä¸¤ä¸ªå‡½æ•°åœ¨å¤„ç†ç™½å±é€»è¾‘æ˜¯ç›¸ä¼¼çš„ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>commité˜¶æ®µçš„æµç¨‹åŒ…æ‹¬ï¼šæ›´æ–°DOMï¼Œæ‰§è¡ŒuseLayoutEffectï¼Œæ‰§è¡ŒuseEffectã€‚è¿™ä¸‰éƒ¨åˆ†éƒ½è¢«Reactå†…ç½®çš„try/catch åŒ…è£¹ï¼Œå¼‚å¸¸å¤„ç†å‡½æ•°æ˜¯<strong>captureCommitPhaseError</strong>ã€‚å¦‚æœCommité˜¶æ®µï¼Œä»£ç æŠ›å‡ºäº†æœªæ•è·çš„é”™è¯¯ï¼Œä»ç„¶ä¼šè§¦å‘<strong>captureCommitPhaseError</strong>å‡½æ•°ã€‚</p>
<h3 data-id="heading-8">ç™½å±ä¾‹å­</h3>
<h5 data-id="heading-9">ç¬¬ä¸€ä¸ªä¾‹å­</h5>
<p>æœ€å…¸å‹çš„ç™½å±ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data.message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼š</p>
<ol>
<li>ç¼–è¯‘æ—¶ ï¼š<strong>JSX</strong>è½¬å˜ä¸º<strong>React.createElement/_jsx</strong>ï¼Œåˆ›å»ºReactElementçš„å‡½æ•°è¯­å¥.</li>
<li>è¿è¡Œæ—¶ ï¼šç»„ä»¶ Render è¿‡ç¨‹ä¸­ï¼Œ _jsx å‡½æ•°è¯»å–å‚æ•°ï¼Œå›  data.message æ±‚å€¼å¤±è´¥æŠ›å‡º TypeErrorã€‚React æ•è·è¿™ä¸ªé”™è¯¯åï¼Œè§¦å‘äº†å…¨é‡çš„ Unmount ä¿æŠ¤æœºåˆ¶ ï¼Œå¯¼è‡´ç™½å±ã€‚å¦‚æœå­˜åœ¨ErrorBoundaryç»„ä»¶ï¼Œåˆ™ä¼šä½¿ç”¨Error Boundaryå…œåº•ã€‚</li>
</ol>
<h5 data-id="heading-10">ç¬¬äºŒä¸ªä¾‹å­</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>)

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data || null}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™æ®µä»£ç åŒæ ·ä¹Ÿä¼šå‘ç”Ÿç™½å±ï¼Œæœ¬è´¨ä¸Šï¼Œ å‡½æ•°ç»„ä»¶çš„<strong>å‡½æ•°ä½“æ‰§è¡Œæœ¬èº«</strong>å°±æ˜¯ Render é˜¶æ®µçš„ä¸€éƒ¨åˆ† ã€‚React åœ¨æ„å»º Fiber æ ‘æ—¶ä¼šç›´æ¥è°ƒç”¨è¯¥ç»„ä»¶å‡½æ•°ã€‚å› æ­¤ï¼Œ <strong>console.log(data.a.b)</strong> æŠ›å‡ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¼šç›´æ¥è¢« React å†…éƒ¨çš„try/catchæ•è·ï¼Œè¿›å…¥<strong>handleError</strong>å‡½æ•°ï¼Œ<strong>React å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ï¼Œä»è€Œå¯¼è‡´ç™½å±</strong>ã€‚</p>
<h5 data-id="heading-11">ç¬¬äºŒä¸ªä¾‹å­æ”¹è¿›</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">try</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>)
  } <span class="hljs-keyword">catch</span> (error) {

  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>{data || '404'}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>console.log(data.a.b)</strong> è™½ç„¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†å› ä¸ºä½¿ç”¨äº† try/catch ï¼Œè¿™ä¸ªé”™è¯¯æ²¡æœ‰æŠ›å‡ºç»™ Reactå†…éƒ¨çš„try/catchï¼Œæ‰€ä»¥ React å¹¶ä¸çŸ¥æƒ…ã€‚</p>
<h5 data-id="heading-12">ç¬¬ä¸‰ä¸ªä¾‹å­ï¼ˆè¿™ä¸ªä¾‹å­å¾ˆé‡è¦ï¼‰</h5>
<p>ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿç™½å±é”™è¯¯ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>)
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{data || '404'}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¸ä¼š</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ Render é˜¶æ®µæ—©å·²ç»“æŸ ï¼ŒCommit é˜¶æ®µä¹Ÿç»“æŸäº†ï¼ŒUI å·²ç»ç¨³å®šåœ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä¹‹å‰æˆ‘ä»¬è¯´è¿‡Renderè¿‡ç¨‹çš„æœªæ•è·é”™è¯¯ï¼Œæ‰ä¼šè¢«Reactå†…éƒ¨çš„try/catchæ‰€æ•è·ã€‚</p>
<p>æ€»ç»“ï¼š è¿™ä¸ªä¾‹å­è¡¨æ˜ä¸æ˜¯å‘ç”Ÿäº†JSé”™è¯¯ï¼Œå°±ä¼šç™½å±ã€‚ç™½å±å¯¹å‘ç”Ÿæ—¶æœºæœ‰ç€ä¸¥æ ¼è¦æ±‚ï¼Œå¿…é¡»æ˜¯æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé¡¹ç›®æ‰ä¼šç™½å±ã€‚</p>
<h5 data-id="heading-13">ç¬¬å››ä¸ªä¾‹å­</h5>
<p>ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ˜¯å¦ä¼šå‘ç”Ÿç™½å±é”™è¯¯ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>({<span class="hljs-attr">message</span>:<span class="hljs-string">"404"</span>})

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setData</span>(<span class="hljs-literal">null</span>)
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{data.message}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¼š
å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè°ƒç”¨handleClickå‡½æ•°ï¼Œæ‰§è¡Œ setData(null) ä¿®æ”¹çŠ¶æ€ï¼Œè¿™ä¼šè§¦å‘å½“å‰ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚åœ¨Renderè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºdataè¢«æ›´æ–°ä¸ºnullï¼Œä»£ç æ‰§è¡Œåˆ° ã€Šh1ã€‹ {data.message}ã€Š/h1ã€‹ï¼ˆæ˜é‡‘ç”¨h1æ ‡ç­¾å°±è‡ªåŠ¨å˜å¤§äº†ï¼Œå› æ­¤ç”¨ã€Šã€‹ä»£æ›¿&lt;&gt;ï¼‰ï¼Œå› ä¸ºdataæ˜¯nullï¼Œä»£ç ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆæŠ¥é”™ï¼Œè¿™ä¼šè¢«Reactå†…éƒ¨çš„try/catchæ‰€æ•è·ï¼Œä»è€Œè§¦å‘ç™½å±é€»è¾‘ã€‚</p>
<h5 data-id="heading-14">ç¬¬äº”ä¸ªä¾‹å­</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page404</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">a</span>.<span class="hljs-property">b</span>.<span class="hljs-property">c</span>)
  }, [])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fx-center mt-80"</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼šä¼šç™½å±
è™½ç„¶ useEffect æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä½†å®ƒæ˜¯ç”± React Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰ æ¥ç®¡çš„ã€‚å½“ Commit é˜¶æ®µå®Œæˆåï¼ŒScheduler ä¼šè°ƒåº¦å¹¶æ‰§è¡Œ flushPassiveEffects æ–¹æ³•æ¥å¤„ç†æ‰€æœ‰å‰¯ä½œç”¨ã€‚<br/>
åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šæ˜¾å¼åœ°ç”¨ try-catch åŒ…è£¹å›è°ƒå‡½æ•°çš„æ‰§è¡Œã€‚å› æ­¤ï¼Œ data.a.b.c æŠ›å‡ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¼šè¢« React ç²¾ç¡®æ•è·ï¼Œå¹¶è§¦å‘ captureCommitPhaseError æµç¨‹ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>ç™½å±æ˜¯ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­æŠ›å‡ºæœªæ•è·çš„é”™è¯¯ï¼Œè¢«Reactå†…éƒ¨çš„é”™è¯¯å¤„ç†æœºåˆ¶æ•è·ï¼Œä»è€Œè§¦å‘çš„ä¸€ç§ä¸»åŠ¨é˜²å¾¡çš„æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray]]></title>    <link>https://juejin.cn/post/7590330924002508863</link>    <guid>https://juejin.cn/post/7590330924002508863</guid>    <pubDate>2026-01-04T03:24:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924002508863" data-draft-id="7590735421262004265" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2026-01-04T03:24:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åäº”ç¯‡ï¼‰ï¼šç‹è¯­å«£çš„ã€Šä¸‡å‰‘å½’å®—ã€‹ä¸ InlineArray
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:24:34.000Z" title="Sun Jan 04 2026 03:24:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7363d0e01524c69af83943332a28590~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=%2B54zbSwO5e5VTwYVeaR%2FkyXjGR8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šå½“åŠ¨æ€æ•°ç»„çš„éšæ€§ï¼ˆ<strong>Array</strong>ï¼‰ä¸å…ƒç»„çš„åˆ»æ¿ï¼ˆ<strong>Tuple</strong>ï¼‰é™·å…¥ä¸¤éš¾ï¼Œé«˜æ€§èƒ½çš„å†…è”æ•°ç»„ï¼ˆ<strong>InlineArray</strong>ï¼‰æ¨ªç©ºå‡ºä¸–ã€‚Swift 6.2 å¼•å…¥çš„ SE-0453 å°±åƒæ˜¯æ­¦å­¦ä¸­çš„â€œä¸‡å‰‘å½’å®—â€ï¼Œæ—¨åœ¨ä»¥å›ºå®šå¤§å°çš„å†…å­˜å¸ƒå±€ï¼Œè§£å†³æ€§èƒ½ä¸çµæ´»æ€§çš„<strong>é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—</strong>ä¹‹å›°ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šç…å¬›ç¦åœ°çš„â€œå†…å­˜â€è¿·å±€</h2>
<p>ç…å¬›ç¦åœ°ï¼Œå¤©å±±ç«¥å§¥é—ç•™çš„è™šæ‹Ÿæ•°æ®ä¸­å¿ƒã€‚</p>
<p>è¿™é‡Œæ˜¯å­˜å‚¨ç€å¤©ä¸‹æ‰€æœ‰æ•°æ®ç»“æ„ç§˜ç±çš„å®åº“ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç©¿æ¢­åœ¨å·¨å¤§çš„å…¨æ¯å·è½´ä¹‹é—´ï¼ŒèƒŒæ™¯éŸ³ä¹æ˜¯ã€Šå¤©é¾™å…«éƒ¨ã€‹çš„BGMï¼Œä»–ä¸€è¾¹èµ°ä¸€è¾¹æ‘¸äº†æ‘¸å¤´é¡¶â€”â€”é»‘æ¯›æ²¹å…‰é”ƒäº®ï¼Œ<strong>å¤´ç»å¯¹ä¸ç§ƒ</strong>ï¼Œå®‰å…¨æ„Ÿåè¶³ã€‚</p>
<p>ä»–ä¹‹æ‰€ä»¥æ¥è¿™ï¼Œæ˜¯å› ä¸ºä¸Šä¸€å›ä»»åŠ¡ç»“æŸåï¼Œä»–ä»å¯¹ç«¹ç¬‹çš„å­˜å‚¨é—®é¢˜è€¿è€¿äºæ€€ã€‚</p>
<p>â€œæˆ‘é‚£å››æ ¹â€˜é•‡å±±ä¹‹å®â€™çº§ç«¹ç¬‹ï¼Œå¿…é¡»ä»¥æœ€å¿«çš„é€Ÿåº¦å–ç”¨ï¼â€ä¾¯ä½©å¯¹ç€ä¸€å·å†™ç€ <code>Array</code> çš„ç§˜ç±å¤§å£°åš·é“ï¼Œâ€œç”¨æ™®é€šçš„ <code>Array</code>ï¼Œè™½ç„¶æ–¹ä¾¿ï¼Œä½†é‚£åŠ¨æ€åˆ†é…å†…å­˜çš„æ–¹å¼ï¼Œè®©æˆ‘æ¯æ¬¡å–ç¬‹éƒ½æ„Ÿè§‰åƒæ˜¯åœ¨ä¸å¸®çš„è¢‹å­é‡Œæä¸œè¥¿ï¼Œ<strong>éšæ€§å¾—å¾ˆï¼Œä½†å¤ªæ…¢äº†ï¼</strong>â€</p>
<p>â€œè‹¥è¿½æ±‚æè‡´é€Ÿåº¦ï¼Œä½•ä¸ç”¨ <strong>Tuple</strong>ï¼ˆå…ƒç»„ï¼‰ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceca77a66a80450cab5a183ca5d6dd24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=WYTl2X5k5jLFYkjgCu3pvhKwC%2F8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€ä¸ªæ¸…å†·çš„å£°éŸ³ä¼ æ¥ã€‚ä¾¯ä½©å¾ªå£°æœ›å»ï¼Œåªè§ä¸€ä½å®¹è²Œæ¯”æ•°æ®æµè¿˜ç²¾è‡´çš„å°‘å¥³ç«™åœ¨å…‰å½±ä¹‹ä¸­ï¼Œå¥¹çš“é½¿æ˜çœ¸ï¼Œæ‰‹ä¸­æ­£æ‹¿ç€ä¸€æœ¬ã€Šä¹é˜´çœŸç»ã€‹çš„ä»£ç ç‰ˆæœ¬ï¼Œæ­£æ˜¯<strong>ç‹è¯­å«£</strong>ã€‚</p>
<p>ç‹è¯­å«£ï¼Œç†Ÿè¯»å¤©ä¸‹æ­¦å­¦ç§˜ç±ï¼Œå¯¹å„ç§æ•°æ®ç»“æ„äº†å¦‚æŒ‡æŒã€‚å¥¹çš„çˆ±å¥½å°±æ˜¯æ•´ç†å’Œåˆ†ç±»è¿™äº›ä»£ç ç§˜ç±ï¼Œç‰¹ç‚¹æ˜¯<strong>ç†è®ºçŸ¥è¯†ä¸°å¯Œåˆ°å¯ä»¥å¼€å®—ç«‹æ´¾ï¼Œä½†ä»æœªäº²æ‰‹å®è·µï¼ˆç¼–å†™ï¼‰è¿‡ä¸€è¡Œä»£ç </strong>ã€‚</p>
<p>â€œç‹å§‘å¨˜ï¼â€ä¾¯ä½©çš„çœ¼ç›ç¬é—´å˜æˆäº†å¿ƒå½¢ï¼ˆèŠ±ç—´å±æ€§å‘ä½œï¼‰ï¼Œâ€œå…ƒç»„æ˜¯å¿«ï¼Œå®ƒå†…å­˜è¿ç»­ä¸”å›ºå®šï¼Œä½†æ‚¨çœ‹ï¼Œæˆ‘å¦‚æœè¦ç”¨ä¸‹æ ‡å¾ªç¯éå†æˆ‘çš„å››æ ¹ç«¹ç¬‹ï¼Œ<code>myTuple.0</code>ï¼Œ<code>myTuple.1</code>â€¦â€¦è¿™å†™æ³•ç®€ç›´æ˜¯<strong>æœ›æ´‹å…´å¹</strong>ï¼Œæ—¢ä¸ä¼˜é›…ï¼Œåˆä¸æ”¯æŒå¾ªç¯ï¼â€</p>
<p><strong>åœ¨æœ¬æ¬¡å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šç…å¬›ç¦åœ°çš„â€œå†…å­˜â€è¿·å±€</li>
<li>1ï¸âƒ£ ğŸ’¥ æ··è¡€ç§˜ç±ï¼šInlineArray çš„è¯ç”Ÿ (SE-0453)</li>
<li>2ï¸âƒ£ ğŸ“œ å›ºè‹¥é‡‘æ±¤ï¼šInlineArray çš„ä½¿ç”¨æ³•é—¨
<ul>
<li>æ‹›å¼ä¸€ï¼šæ˜ç¡®æŒ‡å®šå¤§å°ä¸ç±»å‹</li>
<li>æ‹›å¼äºŒï¼šè®©ç¼–è¯‘å™¨â€œå¿ƒé¢†ç¥ä¼šâ€</li>
<li>ä¸‹æ ‡è¯»å†™ï¼šè¡Œäº‘æµæ°´</li>
</ul>
</li>
<li>3ï¸âƒ£ ğŸš§ ä¹¾å¤å·²å®šï¼šå›ºå®šå¤§å°çš„ä»£ä»·
<ul>
<li>è¿­ä»£ä¹‹å›°ï¼šä¸å…¥æµçš„é™åˆ¶</li>
</ul>
</li>
<li>4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„é»‘è‰²å¹½é»˜ä¸æŠ‰æ‹©</li>
<li>5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šæ…•å®¹å¤çš„ä¼ªè£…ä¸â€œå‘åçœ‹â€çš„éš¾é¢˜</li>
</ul>
<p>ç‹è¯­å«£è½»è½»å¹äº†ä¸€å£æ°”ï¼šâ€œæ˜¯å•Šï¼Œé±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ã€‚å†…å­˜å¸ƒå±€ï¼ˆPerformanceï¼‰å’Œä¸‹æ ‡è®¿é—®ï¼ˆUsabilityï¼‰ï¼Œå†æ¥æ˜¯ç¨‹åºå‘˜æ±Ÿæ¹–çš„åƒå¹´éš¾é¢˜ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73f26430b7eb40b3a6d157c37d4034ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=TKcNBgX%2FYJUe9Ka%2FvT8T1Gr7Hxw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ’¥ æ··è¡€ç§˜ç±ï¼šInlineArray çš„è¯ç”Ÿ (SE-0453)</h2>
<p>å°±åœ¨ä¾¯ä½©å’Œç‹è¯­å«£é™·å…¥æŠ€æœ¯å“²å­¦çš„æ­»å¾ªç¯æ—¶ï¼Œä¸€é“æ–°çš„å…¨æ¯å·è½´ä»å¤©è€Œé™ï¼Œæ­£æ˜¯ <strong>SE-0453</strong> ç§˜ç±ã€‚</p>
<p>â€œå¿«çœ‹ï¼Œè¿™æ˜¯æœ€æ–°çš„â€˜æ··è¡€â€™æ•°æ®ç»“æ„ï¼Œâ€ä¾¯ä½©æ¿€åŠ¨åœ°å–Šé“ï¼Œâ€œå®ƒå« <strong>InlineArray</strong>ï¼ˆå†…è”æ•°ç»„ï¼‰ï¼Œå®ƒæŠŠå…ƒç»„çš„â€˜<strong>å›ºå®šå¤§å°</strong>â€™ä¸æ•°ç»„çš„â€˜<strong>è‡ªç„¶ä¸‹æ ‡</strong>â€™å®Œç¾åœ°èåˆäº†ï¼â€</p>
<p><strong><code>InlineArray</code></strong> æœ€æ ¸å¿ƒçš„å¥¥ä¹‰åœ¨äºï¼šå®ƒå°†å›ºå®šæ•°é‡çš„å…ƒç´ ç›´æ¥å­˜å‚¨åœ¨ç»“æ„ä½“å†…éƒ¨ï¼Œæ²¡æœ‰åŠ¨æ€åˆ†é…çš„å¼€é”€ï¼Œä»è€Œå®ç°äº†<strong>ç»“æ„ä½“çº§åˆ«çš„å†…å­˜è¿ç»­æ€§</strong>å’Œ<strong>åª²ç¾ C è¯­è¨€æ•°ç»„çš„å­˜å–é€Ÿåº¦</strong>ã€‚</p>
<blockquote>
<p><strong>ğŸ’¡ å‰ç½®æ¡ä»¶ï¼ˆSE-0452ï¼‰</strong>ï¼š
è¦å®ç°è¿™ç§å›ºå®šå¤§å°çš„æ³›å‹ï¼ˆGenericï¼‰ï¼ŒSwift 6.2 è¿˜å¿…é¡»å¼•å…¥å¦ä¸€ä¸ªé‡è¦çš„å‰æï¼š<strong>SE-0452ï¼šInteger Generic Parametersï¼ˆæ•´æ•°æ³›å‹å‚æ•°ï¼‰</strong>ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°å€¼æ¥çº¦æŸæ³›å‹ç±»å‹çš„å¤§å°ï¼Œæ¯”å¦‚ <code>InlineArray&lt;4, String&gt;</code> ä¸­çš„ <code>4</code>ï¼Œè¿™åœ¨ä»¥å‰çš„ Swift ç‰ˆæœ¬ä¸­æ˜¯æ— æ³•æƒ³è±¡çš„ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f982f69c4b9543aba02a102a03410835~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=OAYm8nDeJkEYR94Sogl7JnfCo0c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-2">2ï¸âƒ£ ğŸ“œ å›ºè‹¥é‡‘æ±¤ï¼šInlineArray çš„ä½¿ç”¨æ³•é—¨</h2>
<p>ç‹è¯­å«£ä½œä¸ºç†è®ºå¤§å¸ˆï¼Œç«‹åˆ»è§£æäº†è¿™æ®µç§˜ç±ã€‚</p>
<p>åˆ›å»º <code>InlineArray</code> æœ‰ä¸¤ç§æ³•é—¨ï¼š</p>
<h3 data-id="heading-3">æ‹›å¼ä¸€ï¼šæ˜ç¡®æŒ‡å®šå¤§å°ä¸ç±»å‹</h3>
<p>æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ³›å‹ä¸€æ ·ï¼Œæ˜ç¡®å‘ŠçŸ¥ç¼–è¯‘å™¨ï¼šâ€œæˆ‘è¦ä¸€ä¸ªå›ºå®šå¤§å°ä¸º <strong>4</strong> çš„ <strong>String</strong> ç±»å‹æ•°ç»„ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ï¼šæˆ‘è¦ä¸€ä¸ªå›ºå®šå¤§å°ä¸º 4 çš„ String æ•°ç»„</span>
<span class="hljs-keyword">var</span> names1: <span class="hljs-type">InlineArray</span>&lt;4, <span class="hljs-type">String</span>&gt; <span class="hljs-operator">=</span> [<span class="hljs-string">"Moon"</span>, <span class="hljs-string">"Mercury"</span>, <span class="hljs-string">"Mars"</span>, <span class="hljs-string">"Tuxedo Mask"</span>]
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b94e76bbc304f26b81d9f9d8d9ac58e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=EN1ugsll2SMumxPCWNs7u%2FC70cY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">æ‹›å¼äºŒï¼šè®©ç¼–è¯‘å™¨â€œå¿ƒé¢†ç¥ä¼šâ€</h3>
<p>ä¾¯ä½©è¿™ç§æ‡’äººå½“ç„¶æ›´å–œæ¬¢è®©ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­ï¼ˆType Inferenceï¼‰å¤§å°ã€‚åªè¦ä¼ å…¥çš„å…ƒç´ æ•°é‡å’Œç±»å‹å›ºå®šï¼Œç¼–è¯‘å™¨å°±èƒ½è‡ªåŠ¨æå®šã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„ 4 ä¸ª Stringï¼Œè‡ªåŠ¨æ¨æ–­å‡ºå®ƒæ˜¯ InlineArray&lt;4, String&gt;</span>
<span class="hljs-keyword">var</span> names2: <span class="hljs-type">InlineArray</span> <span class="hljs-operator">=</span> [<span class="hljs-string">"Moon"</span>, <span class="hljs-string">"Mercury"</span>, <span class="hljs-string">"Mars"</span>, <span class="hljs-string">"Tuxedo Mask"</span>]
</code></pre>
<p>â€œå¤ªå®Œç¾äº†ï¼â€ä¾¯ä½©èµå¹é“ï¼Œâ€œè¿™å°±åƒæ˜¯æŠŠæˆ‘çš„å››æ ¹ç«¹ç¬‹ä¸¥ä¸åˆç¼åœ°æ”¾è¿›äº†å››ä¸ªç²¾ç¡®å°ºå¯¸çš„æ ¼å­ï¼Œ<strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒå†…å­˜è·³æ¥è·³å»äº†ã€‚â€</p>
<h3 data-id="heading-5">ä¸‹æ ‡è¯»å†™ï¼šè¡Œäº‘æµæ°´</h3>
<p>è™½ç„¶å®ƒå†…å­˜å¸ƒå±€åƒå…ƒç»„ï¼Œä½†ä½¿ç”¨èµ·æ¥å´å’Œæ•°ç»„ä¸€æ ·ï¼Œæ”¯æŒç›´è§‚çš„ä¸‹æ ‡è¯»å†™ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è¯»å–ï¼šå°±åƒæ™®é€šçš„æ•°ç»„ä¸€æ ·</span>
<span class="hljs-built_in">print</span>(names1[<span class="hljs-number">0</span>]) <span class="hljs-comment">// è¾“å‡º: Moon</span>
<span class="hljs-comment">// å†™å…¥ï¼šè½»æ¾ä¿®æ”¹ç‰¹å®šä½ç½®çš„å…ƒç´ </span>
names1[<span class="hljs-number">2</span>] <span class="hljs-operator">=</span> <span class="hljs-string">"Jupiter"</span> <span class="hljs-comment">// ç«æ˜Ÿå˜æœ¨æ˜Ÿï¼Œæ”¹å†™æ•°æ®ï¼Œæ¯«ä¸è´¹åŠ›</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bed37f385f14403a9e7ed165f19d0868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=6Lp0ZfiIIasldmRku9i02hEqV44%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-6">3ï¸âƒ£ ğŸš§ ä¹¾å¤å·²å®šï¼šå›ºå®šå¤§å°çš„ä»£ä»·</h2>
<p>ç‹è¯­å«£å¾ˆå¿«æŒ‡å‡ºäº†è¿™ç§â€œç¥åŠŸâ€çš„é™åˆ¶ï¼šâ€œä¾¯å¤§å“¥ï¼Œæ­¤åŠŸæ³•è™½ç„¶å†…åŠ›é›„åšï¼ˆæ€§èƒ½å“è¶Šï¼‰ï¼Œä½†é™åˆ¶ä¹Ÿå¤šã€‚æ—¢ç„¶æ˜¯å›ºå®šå¤§å°ï¼Œé‚£ä¹ˆå®ƒå°±å¤±å»äº†æ•°ç»„çš„åŠ¨æ€ä¼¸ç¼©æ€§ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7999aa56782f45ecb014623b5287b1fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=rT1hSeSmQ%2F5dkh5U196cD1LYnMA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ä¸€å¬ï¼Œèµ¶ç´§é—®é“ï¼šâ€œé‚£æ˜¯ä¸æ˜¯ä¸èƒ½å†å¤šå¡ä¸€æ ¹ç«¹ç¬‹è¿›å»äº†ï¼Ÿâ€</p>
<p>ç‹è¯­å«£ç‚¹å¤´ï¼šâ€œæ­£æ˜¯ã€‚<strong><code>InlineArray</code> æ²¡æœ‰ <code>append()</code> æˆ– <code>remove(at:)</code> æ–¹æ³•ã€‚</strong> å®ƒçš„å®¹é‡åœ¨è¯ç”Ÿä¹‹åˆå°±å·²æ˜¯<strong>å¤©æ•°</strong>ï¼Œæ— æ³•æ›´æ”¹ã€‚â€</p>
<h3 data-id="heading-7">è¿­ä»£ä¹‹å›°ï¼šä¸å…¥æµçš„é™åˆ¶</h3>
<p>æ›´è®©äººå¤´ç–¼çš„æ˜¯å®ƒçš„â€œä¸å…¥æµâ€é™åˆ¶ï¼š</p>
<blockquote>
<p>ğŸš¨ <strong>æŠ€æœ¯å“²å­¦</strong>ï¼š<code>InlineArray</code> ä¸å…¼å®¹ä¼ ç»Ÿçš„ <strong><code>Sequence</code></strong>ï¼ˆåºåˆ—ï¼‰å’Œ <strong><code>Collection</code></strong>ï¼ˆé›†åˆï¼‰åè®®ã€‚</p>
</blockquote>
<p>â€œä¸ºä»€ä¹ˆï¼Ÿâ€ä¾¯ä½©ä¸è§£ï¼Œâ€œå®ƒä¸æ˜¯æ•°ç»„å—ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8aeb86eab890472b9c96f431d33c6977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=RbB59m71p8xkWWINAfdA%2BpYElCI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå› ä¸ºå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯<strong>æè‡´æ€§èƒ½å’Œç¼–è¯‘æ—¶ç¡®å®šæ€§</strong>ã€‚â€ç‹è¯­å«£è§£é‡Šé“ï¼Œâ€œä¸ºäº†é¿å…éµå¾ªè¿™äº›åè®®å¯èƒ½å¸¦æ¥çš„æŠ½è±¡å±‚å¼€é”€ï¼Œå®ƒé€‰æ‹©â€˜è‡ªç»ç»è„‰â€™ã€‚å¦‚æœä½ æƒ³éå†å®ƒï¼Œä½ å¿…é¡»é€šè¿‡å®ƒçš„ <code>indices</code> å±æ€§ï¼Œé…åˆä¸‹æ ‡è®¿é—®æ¥å®ç°ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä¾¯ä½©ï¼šè™½ç„¶ä¸æ–¹ä¾¿ï¼Œä½†ä¸ºäº†æ€§èƒ½ï¼Œå¿äº†ï¼</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> names1.indices {
    <span class="hljs-comment">// å¿…é¡»é€šè¿‡ç´¢å¼• i æ¥è®¿é—®ï¼Œä¸èƒ½ç›´æ¥ç”¨ for element in names1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, <span class="hljs-subst">\(names1[i])</span>!"</span>) 
}
</code></pre>
<p>ä¾¯ä½©æ€»ç»“é“ï¼šâ€œè¿™å°±åƒæ˜¯è¯´ï¼Œè™½ç„¶å®ƒæ˜¯æ­¦æ—é«˜æ‰‹ï¼Œä½†å®ƒæ‹’ç»å‚åŠ æ­¦æ—å¤§ä¼šï¼ˆä¸éµå¾ª <code>Collection</code> åè®®ï¼‰ï¼Œå¦‚æœä½ æƒ³è¯·æ•™å®ƒï¼Œå¿…é¡»å…ˆæ‹¿åˆ°å®ƒçš„æ‹œå¸–ï¼ˆ<code>indices</code>ï¼‰æ‰è¡Œã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b930efc28b664e09a7fe82c2fd7bbd21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=8N6K0C6hjoBTar%2FQ4JA1m9YtERc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-8">4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„é»‘è‰²å¹½é»˜ä¸æŠ‰æ‹©</h2>
<p>â€œå“å‘€ï¼Œè¿™ä¸–é“ï¼Œè¿æ•°æ®ç»“æ„éƒ½å¾—çœ‹é¢œå€¼å’Œå‡ºèº«ã€‚â€ä¾¯ä½©å¹äº†å£æ°”ï¼ŒæŠŠç«¹ç¬‹æ”¶è¿›äº†è™šæ‹Ÿçš„ <code>InlineArray</code> å®¹å™¨é‡Œï¼Œæ„Ÿè§‰èº«è½»å¦‚ç‡•ï¼Œè¿èµ°è·¯éƒ½å¸¦é£äº†ã€‚</p>
<p>â€œä¸è¿‡è¯è¯´å›æ¥ï¼Œâ€ä¾¯ä½©çœ‹å‘ç‹è¯­å«£ï¼Œâ€œæˆ‘è¿˜æ˜¯è§‰å¾—è¿™ç§ç¡¬ç¼–ç çš„è¯­æ³•æœ‰ç‚¹ä¸å¤Ÿâ€˜ç†ŠçŒ«åŒ–â€™ï¼ˆä¸å¤Ÿæ‡’ï¼‰ã€‚å¬è¯´ç¤¾åŒºé‡Œæœ‰äººæƒ³æä¸ªæ›´ç›´è§‚çš„è¯­æ³•ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec3e45fbb57544d9ae0f789e7417184f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=6q0uRELOvYnU4PaajXVC2vszFl8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç‹è¯­å«£æèµ·äº†ä¸€ä»¶æ±Ÿæ¹–è½¶äº‹ï¼ˆSE-0483ï¼‰ï¼š</p>
<blockquote>
<p><strong>æ’æ›²ï¼šå¤­æŠ˜çš„ææ¡ˆ</strong>ï¼š
â€œæœ‰ä¸€ä¸ªå«åš <strong>SE-0483</strong> çš„æè®®ï¼Œæƒ³è¦å¼•å…¥ç±»ä¼¼ <code>var names: [5 x String] = .init(repeating: "Anonymous")</code> çš„ç®€æ´è¯­æ³•ï¼Œæ¥è¡¨ç¤ºä¸€ä¸ªå›ºå®šåŒ…å« 5 ä¸ª String çš„æ•°ç»„ã€‚ä½†ç”±äºåé¦ˆæ„è§è®¤ä¸ºå®ƒè¿‡äºçªå…€ä¸”ä¸å¤Ÿ Swift é£æ ¼ï¼Œç›®å‰å·²è¢«â€˜æ‰“å›é‡ä¿®â€™ã€‚â€</p>
</blockquote>
<p>ä¾¯ä½©å˜¿å˜¿ä¸€ç¬‘ï¼šâ€œæœç„¶ï¼Œä»»ä½•æ–°ç§˜ç±çš„æ¨å¹¿ï¼Œéƒ½ä¼šé‡åˆ°â€˜ä¿å®ˆæ´¾â€™çš„é˜»åŠ›ã€‚ä¸è¿‡ï¼Œèƒ½ç”¨ï¼Œé€Ÿåº¦å¿«ï¼Œ<strong>å¤´ä¸ç§ƒ</strong>ï¼Œå¯¹æˆ‘æ¥è¯´å°±å¤Ÿäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ece6e22d29c4cefa31f075704cd5467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=JETvSrnHeRfBGU6xsHIxvQFkFek%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-9">5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šæ…•å®¹å¤çš„ä¼ªè£…ä¸â€œå‘åçœ‹â€çš„éš¾é¢˜</h2>
<p>å°±åœ¨ä¾¯ä½©æ²‰æµ¸åœ¨é«˜æ€§èƒ½ç«¹ç¬‹å®¹å™¨çš„å–œæ‚¦ä¸­æ—¶ï¼Œç‹è¯­å«£çªç„¶è„¸è‰²å¤§å˜ã€‚</p>
<p>â€œä¾¯å¤§å“¥ï¼æˆ‘åˆšæ‰åœ¨æ•´ç†æ…•å®¹å¤ç•™ä¸‹çš„æ•°æ®å·è½´æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªæƒŠå¤©çš„ç§˜å¯†ï¼â€</p>
<p>å¥¹æŒ‡ç€å±å¹•ä¸Šçš„ä¸€æ®µæ–‡æœ¬ï¼Œé‚£æ˜¯ä¸€ç¯‡å…³äºâ€œå…´å¤å¤§ç‡•â€çš„å®å¤§è®¡åˆ’ä¹¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85b6409a7ea1407586fd21c2d43b2626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=BVSNZNoYvvOyAeqLMPxlqRImp84%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæˆ‘æƒ³ç”¨ <strong>Regexï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</strong> æŸ¥æ‰¾å·è½´ä¸­æ‰€æœ‰æåˆ°ä»–åå­—çš„åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¸æƒ³è¦åŒ¹é…åˆ°é‚£äº›ä»–ç”¨æ¥ä¼ªè£…è‡ªå·±èº«ä»½çš„ç§°å‘¼ï¼Œæ¯”å¦‚â€˜å…¬å†¶ä¹¾â€™ã€â€˜åŒ…ä¸åŒâ€™è¿™äº›åå­—åé¢çš„â€˜æ…•å®¹å¤â€™ã€‚â€ç‹è¯­å«£æ€¥é“ï¼Œâ€œæˆ‘åªæƒ³åŒ¹é…åˆ°é‚£äº›ï¼Œ<strong>å‰é¢ç´§è·Ÿç€â€˜æˆ‘çš„æŒšçˆ±â€™è¿™å››ä¸ªå­—</strong>çš„â€˜æ…•å®¹å¤â€™ï¼â€</p>
<p>ä¾¯ä½©æŒ äº†æŒ å¤´ï¼šâ€œä½ çš„æ„æ€æ˜¯ï¼Œä½ æƒ³æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼ï¼Œä½†è¿™ä¸ªæ¨¡å¼å¿…é¡»æ»¡è¶³å®ƒ<strong>å‰é¢æœ‰ä¸€ä¸ªç‰¹å®šçš„å‰ç½®æ¡ä»¶</strong>ï¼Œè€Œè¿™ä¸ªå‰ç½®æ¡ä»¶æœ¬èº«ï¼Œ<strong>åˆä¸è¢«çº³å…¥åŒ¹é…ç»“æœ</strong>ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e2cd8f805a145dcaf3d093198bfb0b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=xrj6vDDb86cwDkO1Jv0YDCsiB%2Fg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå¯¹ï¼â€ç‹è¯­å«£ç„¦æ€¥ä¸‡åˆ†ï¼Œâ€œæˆ‘çš„ <strong>Regex</strong> åŠŸå¤«åªèƒ½â€˜å‘å‰çœ‹â€™ï¼ˆLookaheadï¼‰ï¼Œå´æ— æ³•å®Œç¾åœ°**â€˜å‘åçœ‹â€™**ï¼Œæˆ‘ä¸èƒ½ç¡®å®šæ–‡æœ¬ä¸­è¿™ä¸‰ä¸ªå­—å‰é¢æ˜¯ä¸æ˜¯çœŸçš„æœ‰â€˜æˆ‘çš„æŒšçˆ±â€™ã€‚â€</p>
<p>ä¾¯ä½©æœ›ç€å·è½´æ·±å¤„é‚£æ®µå……æ»¡ç§˜å¯†çš„ä»£ç ï¼Œç¥ç§˜åœ°ä¸€ç¬‘ï¼šâ€œç‹å§‘å¨˜ï¼Œä½ ä¸ç”¨å†å¯¹ç€æ—§ç§˜ç±<strong>æœ›æ´‹å…´å¹</strong>äº†ã€‚ä¸‹ä¸€ç« ï¼ŒSwift 6.2 å°±è¦æ•™æˆ‘ä»¬ä¸€æ‹›ç»é¡¶çš„ä¾¦æŸ¥æ­¦åŠŸï¼š<strong>Regex lookbehind assertions</strong>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼å‘åæŸ¥æ‰¾æ–­è¨€ï¼‰ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3064bc9b88f4878a07b6ce369201843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101873&amp;x-signature=Tu4X1lgvVmhelYRUDSaqdGa3uD4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ï¼ˆæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”çœ‹ä¸‹å›åˆ†è§£ï¼šRegex lookbehind assertions â€”â€” å¦‚ä½•åœ¨ä¸åŒ¹é…å‰æ–‡çš„æƒ…å†µä¸‹ï¼Œç²¾ç¡®åˆ¤æ–­å‰æ–‡çš„å­˜åœ¨æ€§ï¼Œæ‰¾åˆ°ç‹è¯­å«£çœŸæ­£çš„â€œæŒšçˆ±â€ã€‚ï¼‰</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°]]></title>    <link>https://juejin.cn/post/7590597231708454947</link>    <guid>https://juejin.cn/post/7590597231708454947</guid>    <pubDate>2026-01-04T02:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590597231708454947" data-draft-id="7590597231708422179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°"/> <meta itemprop="keywords" content="Vue.js,Element"/> <meta itemprop="datePublished" content="2026-01-04T02:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±åˆ†äº«çš„é±¼é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/3901536646733133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¯†ç éªŒè¯è¯¦è§£ï¼šVue3+Element Plus æ–¹æ¡ˆ/çº¯è¡€Vue 3 æ–¹æ¡ˆï¼šä»è¯­æ³•è§£æåˆ°å®æˆ˜å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3901536646733133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±åˆ†äº«çš„é±¼é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:36:02.000Z" title="Sun Jan 04 2026 02:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web åº”ç”¨å¼€å‘ä¸­ï¼Œç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚ä¸€ä¸ªå¥å£®çš„å¯†ç éªŒè¯ç³»ç»Ÿä¸ä»…èƒ½ä¿æŠ¤ç”¨æˆ·è´¦æˆ·å®‰å…¨ï¼Œè¿˜èƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡å°†ç»“åˆå®é™…ä»£ç ï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Vue 3 + Element Plus é¡¹ç›®ä¸­å®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç”¨æˆ·ä½“éªŒè‰¯å¥½çš„å¯†ç éªŒè¯ç³»ç»Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70d380337e3b4fffa0997a2e2964875b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5YiG5Lqr55qE6bG86bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099052&amp;x-signature=qQLlN7oRNhduBlMKKUGbj%2BzAwqU%3D" alt="ScreenShot_2026-01-04_103545_723.png" loading="lazy"/></p>
<h2 data-id="heading-0">æŠ€æœ¯æ ˆä»‹ç»</h2>
<h3 data-id="heading-1">Vue 3 Composition API</h3>
<p>Vue 3 å¼•å…¥äº† Composition APIï¼Œè¿™æ˜¯ä¸€ç§æ›´çµæ´»ã€æ›´æ˜“äºé€»è¾‘å¤ç”¨çš„ç»„ä»¶ç»„ç»‡æ–¹å¼ã€‚åœ¨æˆ‘ä»¬çš„å¯†ç éªŒè¯å®ç°ä¸­ï¼Œä½¿ç”¨äº†ä»¥ä¸‹å…³é”®æ¦‚å¿µï¼š</p>
<ul>
<li><code>ref</code>/<code>reactive</code>: ç”¨äºåˆ›å»ºå“åº”å¼æ•°æ®</li>
<li><code>setup</code> å‡½æ•°: ç»„ä»¶çš„é€»è¾‘å…¥å£ç‚¹</li>
<li>ç»„åˆå¼å‡½æ•°: å°†ç›¸å…³é€»è¾‘å°è£…åˆ°å¯å¤ç”¨çš„å‡½æ•°ä¸­</li>
</ul>
<h3 data-id="heading-2">Element Plus è¡¨å•éªŒè¯</h3>
<p>Element Plus æ˜¯åŸºäº Vue 3 çš„ UI ç»„ä»¶åº“ï¼Œå…¶è¡¨å•éªŒè¯åŠŸèƒ½æä¾›äº†å¼ºå¤§çš„éªŒè¯æœºåˆ¶ï¼š</p>
<ul>
<li>å†…ç½®éªŒè¯è§„åˆ™ï¼ˆå¦‚ <code>required</code>ã€<code>min</code>ã€<code>max</code> ç­‰ï¼‰</li>
<li>è‡ªå®šä¹‰éªŒè¯å‡½æ•°æ”¯æŒ</li>
<li>å¤šç§è§¦å‘æ–¹å¼ï¼ˆ<code>blur</code>ã€<code>change</code> ç­‰ï¼‰</li>
<li>å‹å¥½çš„é”™è¯¯æç¤ºæœºåˆ¶</li>
</ul>
<h2 data-id="heading-3">ä»£ç å®ç°è¯¦è§£</h2>
<h3 data-id="heading-4">1. åŸºç¡€ç»“æ„è®¾ç½®</h3>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ•´ä¸ªç»„ä»¶çš„åŸºç¡€ç»“æ„ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-form :model="userForm" :rules="rules" ref="formRef" label-width="80px"&gt;
    &lt;el-form-item label="å¯†ç " prop="password" v-if="!userForm.id"&gt;
      &lt;el-input v-model="userForm.password" type="password" placeholder="è¯·è¾“å…¥å¯†ç " /&gt;
    &lt;/el-form-item&gt;
  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å¯¼å…¥å¿…è¦çš„æ¨¡å—
import { ref, reactive } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'

// å“åº”å¼æ•°æ®å®šä¹‰
const userForm = reactive({
  // ç”¨æˆ·è¡¨å•æ•°æ®
  id: null,
  name: null,
  password: null,
  // ... å…¶ä»–å­—æ®µ
})

// è¡¨å•éªŒè¯è§„åˆ™
const rules = {
  // éªŒè¯è§„åˆ™å®šä¹‰
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-5">2. å®Œæ•´çš„å¯†ç éªŒè¯è§„åˆ™</h3>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è§£æå¯†ç éªŒè¯çš„å®Œæ•´å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯†ç éªŒè¯è§„åˆ™</span>
<span class="hljs-attr">password</span>: [
  <span class="hljs-comment">// å¿…å¡«éªŒè¯</span>
  { 
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, 
    <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>, 
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> 
  },
  
  <span class="hljs-comment">// é•¿åº¦éªŒè¯</span>
  { 
    <span class="hljs-attr">min</span>: <span class="hljs-number">8</span>, 
    <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>, 
    <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>, 
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> 
  },
  
  <span class="hljs-comment">// å°å†™å­—æ¯éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// å¤§å†™å­—æ¯éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// æ•°å­—éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  },
  
  <span class="hljs-comment">// ç‰¹æ®Šå­—ç¬¦éªŒè¯</span>
  {
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>;
      <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>()
      }
    },
    <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>
  }
],
</code></pre>
<h3 data-id="heading-6">3. è¯­æ³•è¯¦ç»†è§£æ</h3>
<h4 data-id="heading-7">3.1 Element Plus éªŒè¯è§„åˆ™ç»“æ„</h4>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,           <span class="hljs-comment">// æ˜¯å¦å¿…å¡«</span>
  <span class="hljs-attr">message</span>: <span class="hljs-string">'é”™è¯¯æç¤ºä¿¡æ¯'</span>,   <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯</span>
  <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>,         <span class="hljs-comment">// è§¦å‘éªŒè¯çš„æ—¶æœº</span>
  <span class="hljs-attr">min</span>: <span class="hljs-number">8</span>,                  <span class="hljs-comment">// æœ€å°é•¿åº¦</span>
  <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,                 <span class="hljs-comment">// æœ€å¤§é•¿åº¦</span>
  <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>      <span class="hljs-comment">// è‡ªå®šä¹‰éªŒè¯å‡½æ•°</span>
}
</code></pre>
<h4 data-id="heading-8">3.2 è‡ªå®šä¹‰éªŒè¯å‡½æ•°å‚æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> {
  <span class="hljs-comment">// rule: å½“å‰éªŒè¯è§„åˆ™çš„é…ç½®å¯¹è±¡</span>
  <span class="hljs-comment">// value: å½“å‰å­—æ®µçš„è¾“å…¥å€¼ï¼ˆç”¨æˆ·è¾“å…¥çš„å¯†ç ï¼‰</span>
  <span class="hljs-comment">// callback: éªŒè¯å®Œæˆåçš„å›è°ƒå‡½æ•°</span>
}
</code></pre>
<ul>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">rule</a>: åŒ…å«å½“å‰éªŒè¯è§„åˆ™çš„æ‰€æœ‰é…ç½®ä¿¡æ¯</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">value</a>: ç”¨æˆ·åœ¨å¯†ç å­—æ®µè¾“å…¥çš„å®é™…å€¼</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">callback</a>: ç”¨äºé€šçŸ¥éªŒè¯ç»“æœçš„å›è°ƒå‡½æ•°</li>
</ul>
<h4 data-id="heading-9">3.3 æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£</h4>
<pre><code class="hljs language-javascript" lang="javascript">/[a-z]/.<span class="hljs-title function_">test</span>(value)        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«å°å†™å­—æ¯ a-z</span>
/[A-Z]/.<span class="hljs-title function_">test</span>(value)        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«å¤§å†™å­—æ¯ A-Z</span>
/\d/.<span class="hljs-title function_">test</span>(value)           <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«æ•°å­— 0-9</span>
/[@$!%*?&amp;~#^_+=<span class="xml"><span class="hljs-tag">&lt;&gt;</span>,.:/|\\(){}[\]]/.test(value)  // æ£€æŸ¥æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
</span></code></pre>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼è§£é‡Šï¼š</strong></p>
<ul>
<li><code>/[a-z]/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯</li>
<li><code>/[A-Z]/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™å­—æ¯</li>
<li><code>/\d/</code> : åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—ï¼ˆç­‰åŒäº <code>[0-9]</code>ï¼‰</li>
<li><code>/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</code> : åŒ¹é…æŒ‡å®šçš„ç‰¹æ®Šå­—ç¬¦é›†åˆ</li>
</ul>
<h3 data-id="heading-10">4. éªŒè¯æµç¨‹åˆ†æ</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹éªŒè¯æ˜¯å¦‚ä½•åœ¨ç”¨æˆ·äº¤äº’ä¸­å·¥ä½œçš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!formRef.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è§¦å‘è¡¨å•éªŒè¯</span>
    <span class="hljs-keyword">await</span> formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>()
    
    <span class="hljs-comment">// éªŒè¯é€šè¿‡åçš„é€»è¾‘</span>
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// éªŒè¯å¤±è´¥æ—¶çš„å¤„ç†</span>
    <span class="hljs-comment">// Element Plus ä¼šè‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
  }
}
</code></pre>
<p>å½“ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>formRef.value.validate()</code> æ–¹æ³•</li>
<li>Element Plus éå†æ‰€æœ‰éªŒè¯è§„åˆ™</li>
<li>å¯¹æ¯ä¸ªè§„åˆ™æ‰§è¡Œç›¸åº”çš„éªŒè¯é€»è¾‘</li>
<li>å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</li>
<li>å¦‚æœæ‰€æœ‰éªŒè¯é€šè¿‡ï¼Œç»§ç»­æ‰§è¡Œæäº¤é€»è¾‘</li>
</ol>
<h3 data-id="heading-11">5. ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>
<p>é€šè¿‡å°†å¯†ç éªŒè¯æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹è§„åˆ™ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼š</p>
<h4 data-id="heading-12">5.1 å³æ—¶åé¦ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span>  <span class="hljs-comment">// åœ¨ç”¨æˆ·ç¦»å¼€è¾“å…¥æ¡†æ—¶ç«‹å³éªŒè¯</span>
</code></pre>
<h4 data-id="heading-13">5.2 å…·ä½“é”™è¯¯ä¿¡æ¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>))
</code></pre>
<p>ç”¨æˆ·èƒ½æ¸…æ¥šçŸ¥é“å¯†ç ç¼ºå°‘å“ªç§ç±»å‹çš„å­—ç¬¦ã€‚</p>
<h4 data-id="heading-14">5.3 æ¸è¿›å¼æç¤º</h4>
<p>ç”¨æˆ·æ¯æ»¡è¶³ä¸€ä¸ªæ¡ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªéªŒè¯é€šè¿‡ï¼Œæä¾›ç§¯æçš„åé¦ˆã€‚</p>
<h2 data-id="heading-15">å®‰å…¨è€ƒè™‘</h2>
<h3 data-id="heading-16">1. å‰åç«¯ä¸€è‡´æ€§</h3>
<p>æ ¹æ®é¡¹ç›®è§„èŒƒï¼Œå‰ç«¯éªŒè¯è§„åˆ™å¿…é¡»ä¸åç«¯ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">PasswordValidator</a> ç±»ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ï¼š</p>
<ul>
<li>ç›¸åŒçš„å¯†ç å¤æ‚åº¦è¦æ±‚</li>
<li>ç»Ÿä¸€çš„ç‰¹æ®Šå­—ç¬¦å®šä¹‰ï¼ˆåŒ…æ‹¬ <code>~</code> å­—ç¬¦ï¼‰</li>
<li>ä¸€è‡´çš„é•¿åº¦é™åˆ¶</li>
</ul>
<h3 data-id="heading-17">2. éªŒè¯å±‚çº§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯éªŒè¯ï¼ˆç”¨æˆ·ä½“éªŒï¼‰</span>
<span class="hljs-comment">// åç«¯éªŒè¯ï¼ˆå®‰å…¨ä¿è¯ï¼‰</span>
<span class="hljs-comment">// æ•°æ®åº“çº¦æŸï¼ˆæœ€åé˜²çº¿ï¼‰</span>
</code></pre>
<p>å‰ç«¯éªŒè¯ä»…ç”¨äºæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œåç«¯éªŒè¯æ˜¯å®‰å…¨çš„æœ€ç»ˆä¿éšœã€‚</p>
<h3 data-id="heading-18">3. å¯†ç ç­–ç•¥</h3>
<p>å½“å‰å®ç°çš„å¯†ç ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li>é•¿åº¦ï¼š8-20 ä½</li>
<li>å¿…é¡»åŒ…å«ï¼šå°å†™å­—æ¯ã€å¤§å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦</li>
<li>ç‰¹æ®Šå­—ç¬¦é›†åˆï¼š<code>@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\(){}[]</code></li>
</ul>
<h2 data-id="heading-19">ä»£ç é‡æ„ä¸ä¼˜åŒ–</h2>
<p>æ ¹æ®é¡¹ç›®è§„èŒƒï¼Œæˆ‘ä»¬å°†å¯†ç éªŒè¯æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹éªŒè¯è§„åˆ™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ä¸€çš„å¤æ‚æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<p><strong>é‡æ„å‰ï¼ˆå•ä¸€éªŒè¯ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]])[A-Za-z\d@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]+$/</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦'</span>
}
</code></pre>
<p><strong>é‡æ„åï¼ˆåˆ†é¡¹éªŒè¯ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">[
  <span class="hljs-comment">// å°å†™å­—æ¯éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateLowercase, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// å¤§å†™å­—æ¯éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateUppercase, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// æ•°å­—éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateDigit, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> },
  <span class="hljs-comment">// ç‰¹æ®Šå­—ç¬¦éªŒè¯</span>
  { <span class="hljs-attr">validator</span>: validateSpecialChar, <span class="hljs-attr">trigger</span>: <span class="hljs-string">'blur'</span> }
]
</code></pre>
<h2 data-id="heading-20">çº¯ Vue 3 å¯†ç éªŒè¯å®ç°</h2>
<p>å¦‚æœåªä½¿ç”¨ Vue 3 è€Œä¸ä½¿ç”¨ Element Plusï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°å¯†ç éªŒè¯é€»è¾‘ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨çº¯ Vue 3 å®ç°å¯†ç éªŒè¯çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-21">1. åŸºç¡€ç»„ä»¶ç»“æ„</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"password-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¯†ç è¾“å…¥æ¡† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>å¯†ç :<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        @<span class="hljs-attr">blur</span>=<span class="hljs-string">"validatePassword"</span>
        @<span class="hljs-attr">input</span>=<span class="hljs-string">"validatePasswordRealTime"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'error': hasError, 'valid': isValid &amp;&amp; password }"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-message"</span>&gt;</span>{{ errorMessage }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"password-requirements"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasLowercase }]"</span>&gt;</span>
        åŒ…å«å°å†™å­—æ¯
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasUppercase }]"</span>&gt;</span>
        åŒ…å«å¤§å†™å­—æ¯
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasDigit }]"</span>&gt;</span>
        åŒ…å«æ•°å­—
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: hasSpecialChar }]"</span>&gt;</span>
        åŒ…å«ç‰¹æ®Šå­—ç¬¦
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"['requirement', { satisfied: isLengthValid }]"</span>&gt;</span>
        é•¿åº¦åœ¨8-20ä½ä¹‹é—´
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æäº¤æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSubmit"</span> 
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!isValid"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"submit-btn"</span>
    &gt;</span>
      æäº¤
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> errorMessage = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
<span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// éªŒè¯ç»“æœ</span>
<span class="hljs-keyword">const</span> hasLowercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasUppercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasDigit = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> hasSpecialChar = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> isLengthValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// è®¡ç®—å±æ€§ï¼šæ˜¯å¦åŒ…å«é”™è¯¯</span>
<span class="hljs-keyword">const</span> hasError = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> !!errorMessage.<span class="hljs-property">value</span>)

<span class="hljs-comment">// å®æ—¶éªŒè¯å¯†ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordRealTime</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> value = password.<span class="hljs-property">value</span>
  
  <span class="hljs-comment">// æ£€æŸ¥å„é¡¹è¦æ±‚</span>
  hasLowercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)
  hasUppercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)
  hasDigit.<span class="hljs-property">value</span> = <span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)
  hasSpecialChar.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>.<span class="hljs-title function_">test</span>(value)
  isLengthValid.<span class="hljs-property">value</span> = value.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">8</span> &amp;&amp; value.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">20</span>
  
  <span class="hljs-comment">// æ£€æŸ¥æ•´ä½“æ˜¯å¦æœ‰æ•ˆ</span>
  isValid.<span class="hljs-property">value</span> = hasLowercase.<span class="hljs-property">value</span> &amp;&amp; 
                  hasUppercase.<span class="hljs-property">value</span> &amp;&amp; 
                  hasDigit.<span class="hljs-property">value</span> &amp;&amp; 
                  hasSpecialChar.<span class="hljs-property">value</span> &amp;&amp; 
                  isLengthValid.<span class="hljs-property">value</span>
}

<span class="hljs-comment">// å¤±ç„¦æ—¶éªŒè¯ï¼ˆç”¨äºé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePassword</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> value = password.<span class="hljs-property">value</span>
  
  <span class="hljs-keyword">if</span> (!value) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &lt; <span class="hljs-number">8</span> || value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">20</span>) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>
  <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  
  <span class="hljs-comment">// æ‰€æœ‰éªŒè¯é€šè¿‡</span>
  errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// æäº¤å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validatePassword</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯†ç éªŒè¯é€šè¿‡ï¼Œå¯ä»¥æäº¤è¡¨å•'</span>)
    <span class="hljs-comment">// è¿™é‡Œæ‰§è¡Œæäº¤é€»è¾‘</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¯†ç éªŒè¯å¤±è´¥'</span>)
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.password-form</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.input-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">label</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.error</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#e74c3c</span>;
}

<span class="hljs-selector-class">.input-group</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-class">.valid</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#27ae60</span>;
}

<span class="hljs-selector-class">.error-message</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e74c3c</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-selector-class">.password-requirements</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.requirement</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e74c3c</span>;
}

<span class="hljs-selector-class">.requirement</span><span class="hljs-selector-class">.satisfied</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#27ae60</span>;
}

<span class="hljs-selector-class">.submit-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bdc3c7</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
}

<span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>)<span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2980b9</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-22">2. ä½¿ç”¨ç»„åˆå¼å‡½æ•°çš„é«˜çº§å®ç°</h3>
<p>ä¸ºäº†æ›´å¥½çš„ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯†ç éªŒè¯é€»è¾‘å°è£…æˆç»„åˆå¼å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// composables/usePasswordValidation.js</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePasswordValidation</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
  <span class="hljs-keyword">const</span> password = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> errorMessage = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-comment">// éªŒè¯çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> hasLowercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasUppercase = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasDigit = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> hasSpecialChar = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> isLengthValid = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  
  <span class="hljs-comment">// è®¡ç®—å±æ€§</span>
  <span class="hljs-keyword">const</span> isValid = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
    hasLowercase.<span class="hljs-property">value</span> &amp;&amp; 
    hasUppercase.<span class="hljs-property">value</span> &amp;&amp; 
    hasDigit.<span class="hljs-property">value</span> &amp;&amp; 
    hasSpecialChar.<span class="hljs-property">value</span> &amp;&amp; 
    isLengthValid.<span class="hljs-property">value</span>
  )
  
  <span class="hljs-keyword">const</span> hasError = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> !!errorMessage.<span class="hljs-property">value</span>)
  
  <span class="hljs-comment">// å®æ—¶éªŒè¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordRealTime</span> = (<span class="hljs-params">value</span>) =&gt; {
    password.<span class="hljs-property">value</span> = value
    
    hasLowercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)
    hasUppercase.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)
    hasDigit.<span class="hljs-property">value</span> = <span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)
    hasSpecialChar.<span class="hljs-property">value</span> = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>.<span class="hljs-title function_">test</span>(value)
    isLengthValid.<span class="hljs-property">value</span> = value.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">8</span> &amp;&amp; value.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">20</span>
    
    <span class="hljs-keyword">return</span> isValid.<span class="hljs-property">value</span>
  }
  
  <span class="hljs-comment">// å®Œæ•´éªŒè¯ï¼ˆå¸¦é”™è¯¯ä¿¡æ¯ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePassword</span> = (<span class="hljs-params">value = password.value</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!value) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &lt; <span class="hljs-number">8</span> || value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">20</span>) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç é•¿åº¦åº”åœ¨8-20ä½ä¹‹é—´'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[a-z]/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå°å†™å­—æ¯'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/[A-Z]/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\d/</span>.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-keyword">const</span> specialCharPattern = <span class="hljs-regexp">/[@$!%*?&amp;~#^_+=&lt;&gt;,.:/|\\(){}[\]]/</span>
    <span class="hljs-keyword">if</span> (!specialCharPattern.<span class="hljs-title function_">test</span>(value)) {
      errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">'å¯†ç å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    errorMessage.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
  
  <span class="hljs-keyword">return</span> {
    password,
    errorMessage,
    hasLowercase,
    hasUppercase,
    hasDigit,
    hasSpecialChar,
    isLengthValid,
    isValid,
    hasError,
    validatePasswordRealTime,
    validatePassword
  }
}
</code></pre>
<p>ç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="password-form"&gt;
    &lt;h3&gt;ç”¨æˆ·æ³¨å†Œ&lt;/h3&gt;
    
    &lt;div class="input-group"&gt;
      &lt;label for="password"&gt;å¯†ç :&lt;/label&gt;
      &lt;input
        id="password"
        v-model="password"
        type="password"
        @blur="() =&gt; validatePassword()"
        @input="e =&gt; validatePasswordRealTime(e.target.value)"
        :class="{ 'error': hasError, 'valid': isValid &amp;&amp; password }"
      /&gt;
      &lt;div v-if="hasError" class="error-message"&gt;{{ errorMessage }}&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="password-requirements"&gt;
      &lt;div :class="['requirement', { satisfied: hasLowercase }]"&gt;
        åŒ…å«å°å†™å­—æ¯
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasUppercase }]"&gt;
        åŒ…å«å¤§å†™å­—æ¯
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasDigit }]"&gt;
        åŒ…å«æ•°å­—
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: hasSpecialChar }]"&gt;
        åŒ…å«ç‰¹æ®Šå­—ç¬¦
      &lt;/div&gt;
      &lt;div :class="['requirement', { satisfied: isLengthValid }]"&gt;
        é•¿åº¦åœ¨8-20ä½ä¹‹é—´
      &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;button 
      @click="handleSubmit" 
      :disabled="!isValid"
      class="submit-btn"
    &gt;
      æäº¤
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { usePasswordValidation } from './composables/usePasswordValidation'

// ä½¿ç”¨å¯†ç éªŒè¯ç»„åˆå¼å‡½æ•°
const {
  password,
  errorMessage,
  hasLowercase,
  hasUppercase,
  hasDigit,
  hasSpecialChar,
  isLengthValid,
  isValid,
  hasError,
  validatePasswordRealTime,
  validatePassword
} = usePasswordValidation()

const handleSubmit = () =&gt; {
  if (validatePassword()) {
    console.log('å¯†ç éªŒè¯é€šè¿‡ï¼Œå¯ä»¥æäº¤è¡¨å•')
    // è¿™é‡Œæ‰§è¡Œæäº¤é€»è¾‘
  } else {
    console.log('å¯†ç éªŒè¯å¤±è´¥')
  }
}
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-23">ä¸ Element Plus æ–¹æ¡ˆçš„å¯¹æ¯”</h2>
<h3 data-id="heading-24">Vue 3 çº¯å®ç°çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>å®Œå…¨æ§åˆ¶</strong>ï¼šå¯ä»¥å®Œå…¨è‡ªå®šä¹‰éªŒè¯é€»è¾‘å’ŒUI</li>
<li><strong>è½»é‡çº§</strong>ï¼šä¸éœ€è¦å¼•å…¥ UI ç»„ä»¶åº“</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥å®ç°ä»»ä½•æƒ³è¦çš„éªŒè¯é€»è¾‘</li>
<li><strong>å¤æ‚åº¦</strong>ï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†æ ·å¼å’Œäº¤äº’é€»è¾‘</li>
</ol>
<h3 data-id="heading-25">Element Plus å®ç°çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>å¿«é€Ÿå¼€å‘</strong>ï¼šæä¾›é¢„è®¾çš„éªŒè¯è§„åˆ™å’Œæ ·å¼</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šUI ç»„ä»¶é£æ ¼ç»Ÿä¸€</li>
<li><strong>å†…ç½®åŠŸèƒ½</strong>ï¼šè¡¨å•éªŒè¯ã€é”™è¯¯æç¤ºç­‰å¼€ç®±å³ç”¨</li>
<li><strong>ä¾èµ–æ€§</strong>ï¼šéœ€è¦å¼•å…¥æ•´ä¸ª UI ç»„ä»¶åº“</li>
</ol>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>çº¯ Vue 3 å®ç°å¯†ç éªŒè¯éœ€è¦æˆ‘ä»¬è‡ªå·±å¤„ç†ï¼š</p>
<ol>
<li><strong>å“åº”å¼æ•°æ®ç®¡ç†</strong>ï¼šä½¿ç”¨ <code>ref</code> å’Œ <code>reactive</code></li>
<li><strong>éªŒè¯é€»è¾‘</strong>ï¼šç¼–å†™å…·ä½“çš„éªŒè¯å‡½æ•°</li>
<li><strong>UI äº¤äº’</strong>ï¼šå¤„ç†è¾“å…¥äº‹ä»¶ã€é”™è¯¯æç¤ºã€æ ·å¼å˜åŒ–</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå®æ—¶åé¦ˆã€è§†è§‰æŒ‡ç¤ºç­‰</li>
</ol>
<p>è¿™ç§æ–¹å¼è™½ç„¶éœ€è¦æ›´å¤šçš„ä»£ç ï¼Œä½†æä¾›äº†å®Œå…¨çš„æ§åˆ¶æƒï¼Œé€‚åˆå¯¹ UI å’Œäº¤äº’æœ‰ç‰¹æ®Šè¦æ±‚çš„é¡¹ç›®ã€‚é€šè¿‡ç»„åˆå¼å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ç»„ç»‡å’Œå¤ç”¨éªŒè¯é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½]]></title>    <link>https://juejin.cn/post/7590283328177586219</link>    <guid>https://juejin.cn/post/7590283328177586219</guid>    <pubDate>2026-01-04T03:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590283328177586219" data-draft-id="7590735421261922345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-04T03:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤–å•«å•«"/> <meta itemprop="url" content="https://juejin.cn/user/3314378809290953"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3å®ç°å‰ç«¯ç”Ÿæˆwordå¹¶ä¸‹è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3314378809290953/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤–å•«å•«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:14:51.000Z" title="Sun Jan 04 2026 03:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. å‰æƒ…</h2>
<p>åœ¨åå°ç®¡ç†å¹³å°å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šä»åç«¯è·å–åˆ°æ•°æ®åï¼Œå‰ç«¯ç”ŸæˆæŒ‡å®šæ¨¡æ¿å†…å®¹çš„wordæ–‡ä»¶å¹¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚å½“å¯¼å‡ºçš„æ–‡ä»¶è¿‡å¤šæ—¶ï¼Œä¸ºäº†å‡å°‘å“åº”æ—¶é—´ï¼Œä¹ŸåŠ ä¸Šäº†è¿›è¡Œå‹ç¼©ä¸‹è½½éƒ¨åˆ†ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­å¯æ ¹æ®å®é™…éœ€æ±‚ä½œå‡ºè°ƒæ•´ã€‚</p>
<h2 data-id="heading-1">2. å‡†å¤‡</h2>
<p>wqqqq</p>
<h4 data-id="heading-2">ä¾èµ–</h4>
<pre><code class="hljs language-js" lang="js">npm install docxtemplater
 
npm install jszip
 
npm install pizzip
 
npm install file-saver
 
npm install jszip-utils
 
npm install angular-expressions
</code></pre>
<h4 data-id="heading-3">æ¨¡æ¿æ–‡ä»¶</h4>
<p>éœ€è¦æŒ‰å¯¼å‡ºæ ·å¼å‡†å¤‡ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œæ”¾åˆ° public ç›®å½•ä¸‹ã€‚æ¨¡æ¿ä¸­å ä½ç¬¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<ul>
<li>å•ä¸€å˜é‡ï¼š{å˜é‡å}ã€‚ç›´æ¥æ˜¾ç¤ºæ”¹å˜é‡çš„å€¼ã€‚</li>
<li>éå†ï¼š{#å˜é‡å}å†…å®¹{/å˜é‡å}ã€‚ä¼šå¯¹è¯¥æ•°æ®è¿›è¡Œéå†å±•ç¤º</li>
<li>æ˜¾ç¤º/éšè—ï¼š{#å˜é‡å}å†…å®¹{/å˜é‡å}ã€‚å…¶ä¸­ä¸ºtrueçš„æ—¶å€™æ˜¾ç¤ºï¼Œfalseåˆ™ä¸æ˜¾ç¤ºã€‚</li>
<li>å›¾ç‰‡ï¼š{%å˜é‡å}ã€‚å˜é‡å€¼ä¸ºbase64æ ¼å¼ã€‚</li>
<li>if-elseï¼š{#å˜é‡å}A{/å˜é‡å}{^å˜é‡å}B{/å˜é‡å}ã€‚å…¶ä¸­å€¼ä¸ºtrueçš„æ—¶å€™æ˜¾ç¤ºâ€œAâ€ï¼Œä¸ºfalseæ˜¾ç¤ºâ€œBâ€ï¼›</li>
<li>å¤é€‰æ¡†ï¼š{#å˜é‡å}é€‰ä¸­{/å˜é‡å}{^å˜é‡å}éé€‰ä¸­{/å˜é‡å}
ä»¥ä¸Šéƒ¨åˆ†æ˜¯æˆ‘åœ¨å®é™…éœ€æ±‚ä¸­ä½¿ç”¨åˆ°çš„ï¼Œå…¶ä»–ä½¿ç”¨å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocxtemplater.com%2Fdocs%2F" title="https://docxtemplater.com/docs/" target="_blank" ref="nofollow noopener noreferrer">docxtemplater.com/docs/</a></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> obj={
    <span class="hljs-attr">name</span>:<span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">age</span>:<span class="hljs-number">12</span>,
    <span class="hljs-attr">hobby</span>:[<span class="hljs-string">'basketball'</span>ï¼Œ<span class="hljs-string">'swimming'</span>],
    <span class="hljs-attr">url</span>:<span class="hljs-string">'xxxxxxxxxxxxxx.png'</span>,
    <span class="hljs-attr">isPic</span>:<span class="hljs-literal">false</span>
}
</code></pre>
<p>è¿™é‡Œå®šä¸€ä¸ªåä¸º obj çš„å¯¹è±¡ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§ä¸‹é¢çš„æ¨¡æ¿ç”Ÿæˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a06d4dc444db4082921b484202fe9897~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSW5ZWr5ZWr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768101290&amp;x-signature=c1tu883VBScblxhECkHGHzaZfQM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">3. å®ç°</h2>
<p><strong>docFiles.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { imageHandle } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/image'</span>
<span class="hljs-keyword">import</span> { saveAs } <span class="hljs-keyword">from</span> <span class="hljs-string">'file-saver'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JsZip</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'jszip'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PizZip</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"pizzip"</span>;
<span class="hljs-keyword">import</span> docxtemplater <span class="hljs-keyword">from</span> <span class="hljs-string">"docxtemplater"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JSZipUtils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"jszip-utils"</span>;
<span class="hljs-keyword">import</span> expressions <span class="hljs-keyword">from</span> <span class="hljs-string">"angular-expressions"</span>;
 
<span class="hljs-keyword">let</span> <span class="hljs-attr">promises</span>: any[] = [];
</code></pre>
<p>ä¸‹è½½å•ä¸ªæ–‡ä»¶</p>
<pre><code class="hljs language-js" lang="js"> 
<span class="hljs-comment">/**å¯¼å‡ºå•ä¸ªwordæ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">exportDocx</span> = (<span class="hljs-params">opts</span>) =&gt; {
  <span class="hljs-keyword">let</span> {
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶è·¯å¾„(å¿…å¡«)</span>
    tempDocxpath,
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶æ•°æ®ï¼ˆå¿…å¡«ï¼‰</span>
    data,
    <span class="hljs-comment">//å¯¼å‡ºæ–‡ä»¶å</span>
    fileName,
    <span class="hljs-comment">//æ˜¯å¦åŒ…å«å›¾ç‰‡</span>
    imageable,
    <span class="hljs-comment">//å¯¼å‡ºæˆåŠŸåçš„å›è°ƒ</span>
    onSuccess,
    <span class="hljs-comment">//å¯¼å‡ºå¤±è´¥åçš„å›è°ƒ</span>
    onError,
  } = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({
    <span class="hljs-attr">imageable</span>: <span class="hljs-literal">false</span>ï¼Œ
    <span class="hljs-attr">fileName</span>:<span class="hljs-string">'æ–°å»ºæ–‡ä»¶1'</span>,
  }, opts)
 
  <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolver, reject</span>) =&gt;</span> {
    <span class="hljs-title class_">JSZipUtils</span>.<span class="hljs-title function_">getBinaryContent</span>(tempDocxpath, <span class="hljs-function">(<span class="hljs-params">error, content</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (error) {
        <span class="hljs-keyword">throw</span> error;
      }
      expressions.<span class="hljs-property">filters</span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, width, height</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">data</span>: input,
          <span class="hljs-attr">size</span>: [width, height],
        };
      }
 
      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªPiZipç¤ºä¾‹ï¼Œå†…å®¹ä¸ºæ¨¡æ¿çš„å†…å®¹</span>
      <span class="hljs-keyword">const</span> zip = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PizZip</span>(content);
 
      <span class="hljs-comment">//åˆ›å»ºå¹¶åŠ è½½docxtemplaterå®ä¾‹å¯¹è±¡</span>
      <span class="hljs-keyword">let</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title function_">docxtemplater</span>();
 
      <span class="hljs-keyword">if</span> (imageable) {
        <span class="hljs-keyword">let</span> opts = <span class="hljs-title function_">imageHandle</span>()
        doc.<span class="hljs-title function_">attachModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageModule</span>(opts));
      }
 
      doc.<span class="hljs-title function_">loadZip</span>(zip);
      doc.<span class="hljs-title function_">setData</span>(data);
 
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//ç”¨æ¨¡æ¿å˜é‡çš„å€¼æ›¿æ¢æ‰€æœ‰æ¨¡æ¿å˜é‡</span>
        doc.<span class="hljs-title function_">render</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> e = {
          <span class="hljs-string">"message"</span>: error.<span class="hljs-property">message</span>,
          <span class="hljs-string">"name"</span>: error.<span class="hljs-property">name</span>,
          <span class="hljs-string">"stack"</span>: error.<span class="hljs-property">stack</span>,
          <span class="hljs-string">"properties"</span>: error.<span class="hljs-property">properties</span>
        };
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">error</span>: e });
        <span class="hljs-keyword">throw</span> error;
      }
 
      <span class="hljs-comment">//ç”Ÿæˆä¸€ä¸ªä»£è¡¨docxtemplaterå¯¹è±¡çš„zipæ–‡ä»¶ï¼ˆåœ¨å†…å­˜ä¸­è¡¨ç¤ºï¼‰</span>
      <span class="hljs-keyword">const</span> out = doc.<span class="hljs-title function_">getZip</span>().<span class="hljs-title function_">generate</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span>,
        <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span>,
      });
      <span class="hljs-title function_">resolver</span>(out);
    })
  })
 
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([promise]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">out</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(onSuccess) <span class="hljs-title function_">onSuccess</span>()
    <span class="hljs-title function_">saveAs</span>(out, fileName);
  }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span>(onError) <span class="hljs-title function_">onError</span>()
  })
}
</code></pre>
<p>å‹ç¼©åŒ…å½¢å¼æ‰¹é‡ä¸‹è½½</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**å¤šçº§ç›®å½•çš„å½¢å¼å¯¼å‡ºæ–‡ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">exportFile_MultiLevelDirectory</span> = (<span class="hljs-params">opts</span>) =&gt; {
  <span class="hljs-keyword">let</span> {
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶è·¯å¾„</span>
    tempDocxpath,
    <span class="hljs-comment">//æ¨¡æ¿æ–‡ä»¶æ•°æ®</span>
    data,
    <span class="hljs-comment">//ä¸€çº§ç›®å½•å</span>
    zipName,
    <span class="hljs-comment">//ä¸‹çº§ç›®å½•å¯¹åº”æ•°æ®è·¯å¾„</span>
    path,
    <span class="hljs-comment">//ä¸‹çº§ç›®å½•åç§°ç±»å‹</span>
    subFolderNameType,
    <span class="hljs-comment">//æ–‡ä»¶åç§°ç±»å‹</span>
    fileNameType,
    <span class="hljs-comment">//æ˜¯å¦åŒ…å«å›¾ç‰‡</span>
    imageable,
    <span class="hljs-comment">//å¯¼å‡ºæˆåŠŸåçš„å›è°ƒ</span>
    onSuccess,
    <span class="hljs-comment">//å¯¼å‡ºå¤±è´¥åçš„å›è°ƒ</span>
    onError,
  } = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({
    <span class="hljs-attr">imageable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">zipName</span>:<span class="hljs-string">'æ–°å»ºæ–‡ä»¶1'</span>
  }, opts)
 
  <span class="hljs-keyword">const</span> zips = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsZip</span>();
  <span class="hljs-comment">//åˆ›å»ºä¸€çº§ç›®å½•çš„å‹ç¼©åŒ…</span>
  <span class="hljs-keyword">const</span> folder = zips.<span class="hljs-title function_">folder</span>(zipName);
 
  <span class="hljs-keyword">let</span> creatOpts = {
    tempDocxpath,
    data,
    path,
    fileNameType,
    subFolderNameType,
    imageable,
    folder,
    zips,
  }
  <span class="hljs-title function_">create_Directory</span>(creatOpts)
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    zips.<span class="hljs-title function_">generateAsync</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">content</span> =&gt;</span> {
      <span class="hljs-comment">//ç”ŸæˆäºŒè¿›åˆ¶æµ</span>
      <span class="hljs-keyword">if</span>(onSuccess) <span class="hljs-title function_">onSuccess</span>()
      <span class="hljs-title function_">saveAs</span>(content, zipName);
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span>(onError) <span class="hljs-title function_">onError</span>()
    })
  })
}
 
<span class="hljs-comment">/**åˆ›å»ºä¸‹çº§ç›®å½•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} opts é…ç½®é¡¹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">create_Directory</span>(<span class="hljs-params">opts</span>) {
  <span class="hljs-keyword">let</span> { 
     tempDocxpath,
     data,
     path,
     folder,
     subFolderNameType,
     fileNameType,
     imageable,
     zips
  } = opts
 
  <span class="hljs-comment">//éå†æ•°æ®ï¼Œä¾æ¬¡å½¢æˆä¸‹çº§ç›®å½•/æ–‡ä»¶</span>
  data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (item[path] || item[path]?.<span class="hljs-property">length</span>) {
     item[path].<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item2, index2</span>) =&gt;</span> {
        <span class="hljs-comment">//åˆ›å»ºä¸‹çº§ç›®å½•</span>
        <span class="hljs-keyword">let</span> subFolderName = item2.<span class="hljs-property">folderName</span>
        <span class="hljs-keyword">let</span> subFolder = folder.<span class="hljs-title function_">folder</span>(subFolderName);
 
        <span class="hljs-keyword">let</span> creatOpts = {
          tempDocxpath,
          <span class="hljs-attr">data</span>: item[path],
          fileNameType,
          subFolderNameType,
          imageable,
          zips,
          <span class="hljs-attr">folder</span>: subFolder
        }
        <span class="hljs-title function_">create_Directory</span>(creatOpts)
      })
    }<span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> fileName = item.<span class="hljs-property">fileName</span>
      <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolver, reject</span>) =&gt;</span> {
        <span class="hljs-title class_">JSZipUtils</span>.<span class="hljs-title function_">getBinaryContent</span>(tempDocxpath, <span class="hljs-function">(<span class="hljs-params">error, content</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (error) {
            <span class="hljs-keyword">throw</span> error;
          }
          expressions.<span class="hljs-property">filters</span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">input, width, height</span>) {
            <span class="hljs-keyword">return</span> {
              <span class="hljs-attr">data</span>: input,
              <span class="hljs-attr">size</span>: [width, height],
            };
          };
          <span class="hljs-keyword">const</span> zip = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PizZip</span>(content);
          <span class="hljs-keyword">let</span> doc = <span class="hljs-keyword">new</span> <span class="hljs-title function_">docxtemplater</span>();
          <span class="hljs-keyword">if</span> (imageable) {
            <span class="hljs-keyword">let</span> opts = <span class="hljs-title function_">imageHandle</span>()
            doc.<span class="hljs-title function_">attachModule</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageModule</span>(opts));
          }
          doc.<span class="hljs-title function_">loadZip</span>(zip);
 
          doc.<span class="hljs-title function_">setData</span>(item);
          <span class="hljs-keyword">try</span> {
            doc.<span class="hljs-title function_">render</span>();
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> e = {
              <span class="hljs-string">"message"</span>: error.<span class="hljs-property">message</span>,
              <span class="hljs-string">"name"</span>: error.<span class="hljs-property">name</span>,
              <span class="hljs-string">"stack"</span>: error.<span class="hljs-property">stack</span>,
              <span class="hljs-string">"properties"</span>: error.<span class="hljs-property">properties</span>
            };
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ <span class="hljs-attr">error</span>: e });
            <span class="hljs-keyword">throw</span> error;
          }
          <span class="hljs-keyword">const</span> out = doc.<span class="hljs-title function_">getZip</span>().<span class="hljs-title function_">generate</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"blob"</span>,
            <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/vnd.openxmlformats-officedocument.wordprocessingml.document"</span>,
          });
          folder.<span class="hljs-title function_">file</span>(fileName, out, { <span class="hljs-attr">binary</span>: <span class="hljs-literal">true</span> });
          <span class="hljs-title function_">resolver</span>(<span class="hljs-string">'success'</span>);
        });
      })
      promises.<span class="hljs-title function_">push</span>(promise);
    }
  }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šå¯¼å‡ºå¤šä¸ªwordæ–‡ä»¶æ—¶éœ€æ³¨æ„æ–‡æ¡£å‘½åé—®é¢˜ï¼Œé¿å…å› åç§°é‡å¤äº§ç”Ÿçš„æ–‡ä»¶è¦†ç›–é—®é¢˜ã€‚</p>
</blockquote>
<p><strong>image.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * å›¾ç‰‡å¤„ç†é€‰é¡¹é…ç½®ç”Ÿæˆå‡½æ•°ã€‚
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Object</span>} è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å¤„ç†é€‰é¡¹çš„å¯¹è±¡ã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">imageHandle</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å›¾ç‰‡å¤„ç†</span>
  <span class="hljs-keyword">let</span> opts = {}
 
  opts = {
    <span class="hljs-comment">//å›¾åƒæ˜¯å¦å±…ä¸­</span>
    <span class="hljs-attr">centered</span>: <span class="hljs-literal">false</span>
  };
  opts.<span class="hljs-property">getImage</span> = <span class="hljs-function">(<span class="hljs-params">chartId</span>) =&gt;</span> {
    <span class="hljs-comment">// å°†base64çš„æ•°æ®è½¬ä¸ºArrayBuffer</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">base64DataURLToArrayBuffer</span>(chartId);
  }
  opts.<span class="hljs-property">getSize</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">img, tagValue, tagName</span>) {
    <span class="hljs-comment">//è‡ªå®šä¹‰æŒ‡å®šå›¾åƒå¤§å°</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-number">500</span>, <span class="hljs-number">400</span>];
  }
  <span class="hljs-keyword">return</span> opts
}
 
<span class="hljs-comment">/**
 * å°†base64æ ¼å¼çš„æ•°æ®è½¬ä¸ºArrayBuffer
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} dataURL base64æ ¼å¼çš„æ•°æ®
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">base64DataURLToArrayBuffer</span>(<span class="hljs-params">dataURL</span>) {
  <span class="hljs-keyword">const</span> base64Regex = <span class="hljs-regexp">/^data:image\/(png|jpg|jpeg|svg|svg\+xml);base64,/</span>;
  <span class="hljs-keyword">if</span> (!base64Regex.<span class="hljs-title function_">test</span>(dataURL)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">const</span> stringBase64 = dataURL.<span class="hljs-title function_">replace</span>(base64Regex, <span class="hljs-string">""</span>);
  <span class="hljs-keyword">let</span> binaryString;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span>) {
    binaryString = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">atob</span>(stringBase64);
  } <span class="hljs-keyword">else</span> {
    binaryString = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Buffer</span>(stringBase64, <span class="hljs-string">"base64"</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-string">"binary"</span>);
  }
  <span class="hljs-keyword">const</span> len = binaryString.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">const</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(len);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-keyword">const</span> ascii = binaryString.<span class="hljs-title function_">charCodeAt</span>(i);
    bytes[i] = ascii;
  }
  <span class="hljs-keyword">return</span> bytes.<span class="hljs-property">buffer</span>;
}
</code></pre>
<p><strong>åº”ç”¨é¡µé¢æ–‡ä»¶</strong></p>
<p>æ³¨é‡Šéƒ¨åˆ†ä¸ºæ‰¹é‡å¯¼å‡º</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"downWord"</span>&gt;</span>å¯¼å‡ºword<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">let</span> obj={
        <span class="hljs-attr">name</span>:<span class="hljs-string">'å¼ ä¸‰'</span>,
        <span class="hljs-attr">images</span>:[]
    }
    
    <span class="hljs-comment">/*let objList=[
        {
            folderName:'æµå—å¸‚',
            children:[
                {
                    fileName:'å¼ æ‘ç”³è¯·åˆåŒ',
                    name:'å¼ æ‘',
                    count:72
                },
                {
                    fileName:'å¤§ç‹æ‘ç”³è¯·åˆåŒ',
                    name:'å¤§ç‹æ‘',
                    count:56
                },
            ]
        },
        {
            folderName:'å¾·å·å¸‚',
            children:[
                {
                    fileName:'é«˜å®¶æ‘ç”³è¯·åˆåŒ',
                    name:'é«˜å®¶æ‘',
                    count:10
                },
            ]
        },
        {
            fileName:'å±…æˆ·é‡Œæ‘ç”³è¯·åˆåŒ',
            name:'å±…æˆ·é‡Œæ‘',
            count:74
        },
    ]*/</span>
 
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">downWord</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">let</span> opts={
            <span class="hljs-attr">tempDocxpath</span>:<span class="hljs-string">'/moBan.docx'</span>,
            <span class="hljs-attr">data</span>:obj,
            <span class="hljs-attr">fileName</span>:<span class="hljs-string">'ç”³è¯·è¡¨'</span>
        }
        <span class="hljs-title function_">exportDocx</span>(opts)
        <span class="hljs-comment">/*let opts={
            tempDocxpath:'/moBan.docx',
            data:objList,
            zipName:'åˆåŒç”³è¯·'
        }*/</span>
        <span class="hljs-comment">//exportFile_MultiLevelDirectory(opts)</span>
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">4. é—®é¢˜</h2>
<p>ï¼ˆ1ï¼‰End of data reached (data length = 0, asked index = 4). Corrupted zip ?</p>
<p>åŸå› ï¼šæ¨¡æ¿æ–‡ä»¶ä¸ºç©ºæ–‡ä»¶ï¼›</p>
<p>æ’æŸ¥ï¼šæ£€æŸ¥æ¨¡æ¿æ–‡ä»¶å¼•å…¥æ˜¯å¦æ­£ç¡®</p>
<p>ï¼ˆ2ï¼‰å¯¼å‡ºçš„æ–‡ä»¶ä¸­å›¾ç‰‡æ˜¾ç¤ºundefined</p>
<p>åŸå› ï¼šå›¾ç‰‡è·¯å¾„è½¬æ¢æˆbase64åçš„æ ¼å¼ä¸å¯¹</p>
<p>ï¼ˆ3ï¼‰æ–‡ä»¶æ•°é‡ä¸å¯¹</p>
<p>æ’æŸ¥ï¼šæ˜¯ä¸æ˜¯æ–‡ä»¶åé‡å¤è¦†ç›–å¯¼è‡´æ•°é‡ä¸å¯¹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°]]></title>    <link>https://juejin.cn/post/7590303618429796387</link>    <guid>https://juejin.cn/post/7590303618429796387</guid>    <pubDate>2026-01-04T01:09:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590303618429796387" data-draft-id="7590303618429780003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-04T01:09:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android ä¸­çš„ LayoutInflater.Factory2 ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:09:49.000Z" title="Sun Jan 04 2026 01:09:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Androidä¸­ï¼Œ<code>Factory2</code> æ˜¯ <code>LayoutInflater</code> çš„ä¸€ä¸ªæ¥å£ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>æ‹¦æˆªå¹¶æ¥ç®¡å¸ƒå±€æ–‡ä»¶ï¼ˆXMLï¼‰ä¸­æ¯ä¸€ä¸ªè§†å›¾ï¼ˆViewï¼‰çš„åˆ›å»ºè¿‡ç¨‹</strong>ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªâ€œ<strong>è§†å›¾åˆ›å»ºæ‹¦æˆªå™¨</strong>â€ã€‚å½“ç³»ç»Ÿè§£æXMLå¸ƒå±€ã€å‡†å¤‡å°†æ ‡ç­¾åï¼ˆå¦‚ <code>&lt;TextView&gt;</code>ï¼‰å®ä¾‹åŒ–ä¸ºçœŸæ­£çš„Viewå¯¹è±¡æ—¶ï¼Œä¼šä¼˜å…ˆè¯¢é—®ä½ è®¾ç½®çš„ <code>Factory2</code>ï¼šâ€œä½ æƒ³æ€ä¹ˆåˆ›å»ºè¿™ä¸ªViewï¼Ÿâ€ã€‚</li>
<li><strong>å·¥ä½œåŸç†</strong>ï¼š<code>LayoutInflater</code> å†…éƒ¨æœ‰ä¸€ä¸ª <code>createViewFromTag</code> æ–¹æ³•ã€‚åœ¨åˆ›å»ºViewæ—¶ï¼Œå®ƒä¼š<strong>é¦–å…ˆæ£€æŸ¥æ˜¯å¦è®¾ç½®äº† <code>Factory2</code></strong>ã€‚å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šè°ƒç”¨ <code>Factory2.onCreateView()</code> æ–¹æ³•ã€‚å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªæœ‰æ•ˆçš„Viewå¯¹è±¡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœè¿”å› <code>null</code>ï¼Œåˆ™ç³»ç»Ÿä¼šæŒ‰ç…§é»˜è®¤æµç¨‹å»åˆ›å»ºViewã€‚</li>
</ul>
<h3 data-id="heading-0">ğŸ”§ ä¸»è¦ç”¨é€”ä¸åº”ç”¨åœºæ™¯</h3>
<p>åˆ©ç”¨è¿™ä¸ªâ€œæ‹¦æˆªâ€èƒ½åŠ›ï¼Œ<code>Factory2</code> å¯ä»¥å®ç°è®¸å¤šå¼ºå¤§çš„åŠŸèƒ½ï¼š</p>






























<table><thead><tr><th align="left">ç”¨é€”åœºæ™¯</th><th align="left">åŠŸèƒ½è¯´æ˜</th><th align="left">ç¤ºä¾‹ / å®ç°å…³é”®</th></tr></thead><tbody><tr><td align="left"><strong>å…¨å±€æ›¿æ¢ç³»ç»Ÿç»„ä»¶</strong></td><td align="left">å°†XMLä¸­çš„æ ‡å‡†æ§ä»¶è‡ªåŠ¨æ›¿æ¢ä¸ºå…¼å®¹æ€§æˆ–è‡ªå®šä¹‰ç‰ˆæœ¬ã€‚</td><td align="left"><code>AppCompatActivity</code> ç”¨å®ƒè‡ªåŠ¨å°† <code>&lt;Button&gt;</code> æ›¿æ¢ä¸º <code>AppCompatButton</code>ã€‚</td></tr><tr><td align="left"><strong>ç»Ÿä¸€ä¿®æ”¹è§†å›¾å±æ€§</strong></td><td align="left">ä¸ºæ‰€æœ‰ç‰¹å®šç±»å‹çš„Viewï¼ˆå¦‚æ‰€æœ‰TextViewï¼‰åŠ¨æ€æ·»åŠ ç»Ÿä¸€æ ·å¼æˆ–è¡Œä¸ºã€‚</td><td align="left">æ‹¦æˆª <code>TextView</code> åˆ›å»ºï¼Œè®¾ç½®å…¨å±€é»˜è®¤å­—ä½“ã€æ–‡å­—é¢œè‰²æˆ–èƒŒæ™¯ã€‚</td></tr><tr><td align="left"><strong>å®ç°æ— ä¾µå…¥çš„ç›‘æ§</strong></td><td align="left">åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºæ‰€æœ‰Viewæ·»åŠ æ€§èƒ½ç›‘æ§æˆ–äº‹ä»¶åŸ‹ç‚¹ã€‚</td><td align="left">åˆ›å»ºViewæ—¶ï¼Œä¸ºå…¶åŒ…è£…ä¸€å±‚ä»£ç†ï¼Œç»Ÿä¸€ç›‘å¬ç‚¹å‡»ã€æµ‹é‡ç­‰äº‹ä»¶ã€‚</td></tr><tr><td align="left"><strong>åŠ¨æ€ä¸»é¢˜/æ¢è‚¤</strong></td><td align="left">æ ¹æ®è¿è¡Œæ—¶ä¸»é¢˜ï¼ŒåŠ¨æ€æ›¿æ¢è§†å›¾å¯¹åº”çš„èµ„æºã€‚</td><td align="left">æ ¹æ®ä¸»é¢˜çŠ¶æ€ï¼Œåœ¨åˆ›å»ºViewæ—¶é€‰æ‹©ä¸åŒçš„èµ„æºIDæˆ–æ„é€ æ–¹å¼ã€‚</td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ’¡ å¦‚ä½•ä½¿ç”¨ä¸å…³é”®ä»£ç </h3>
<p>ä½¿ç”¨ <code>Factory2</code> çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼Œä½†éœ€è¦æ³¨æ„ä¸ <code>AppCompatActivity</code> çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p><strong>1. åŸºæœ¬ä½¿ç”¨æ¨¡å¼</strong>
ä½ éœ€è¦å®ç° <code>LayoutInflater.Factory2</code> æ¥å£ï¼Œå¹¶åœ¨ <code>Activity.onCreate()</code> çš„ <code>super.onCreate()</code> <strong>ä¹‹å‰</strong>è¿›è¡Œè®¾ç½®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Activity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-comment">// å¿…é¡»åœ¨ super.onCreate ä¹‹å‰è®¾ç½®</span>
        LayoutInflater.from(<span class="hljs-built_in">this</span>).setFactory2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LayoutInflater</span>.Factory2() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(View parent, String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// 1. åœ¨è¿™é‡Œè¿›è¡Œæ‹¦æˆªå’Œè‡ªå®šä¹‰</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"TextView"</span>.equals(name)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomTextView</span>(context, attrs); <span class="hljs-comment">// è¿”å›ä½ çš„è‡ªå®šä¹‰View</span>
                }
                <span class="hljs-comment">// 2. å¯¹äºä¸æƒ³å¤„ç†çš„Viewï¼Œè¿”å›nullï¼Œè®©ç³»ç»Ÿæˆ–å…¶ä»–Factoryå¤„ç†</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// æ­¤æ–¹æ³•ä¸ºç»§æ‰¿è‡ªFactoryçš„æ¥å£ï¼Œé€šå¸¸é€šè¿‡ä¸Šä¸€ä¸ªæ–¹æ³•å®ç°å³å¯</span>
                <span class="hljs-keyword">return</span> onCreateView(<span class="hljs-literal">null</span>, name, context, attrs);
            }
        });

        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<p><strong>2. ä¸ AppCompatActivity çš„å…¼å®¹æ€§é—®é¢˜ï¼ˆå…³é”®ï¼ï¼‰</strong>
å¦‚æœä½ ç»§æ‰¿ <code>AppCompatActivity</code>ï¼Œä¼šå‘ç°ä¸Šè¿°æ–¹æ³•å¯èƒ½æ— æ•ˆæˆ–æŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º <code>AppCompatActivity</code> è‡ªå·±ä¹Ÿåœ¨ <code>onCreate</code> ä¸­è®¾ç½®äº†ä¸€ä¸ª <code>Factory2</code> æ¥å®ç°å‘åå…¼å®¹ï¼ˆå¦‚å°† <code>Button</code> æ›¿æ¢ä¸º <code>AppCompatButton</code>ï¼‰ï¼Œè€Œ <code>LayoutInflater</code> çš„ Factory <strong>åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡</strong>ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šä»£ç†æ¨¡å¼</strong>
æ­£ç¡®çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œå°†ä½ ä¸å¤„ç†çš„Viewåˆ›å»ºè¯·æ±‚ï¼Œè½¬å‘ç»™ <code>AppCompatDelegate</code> å»å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAppCompatActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        LayoutInflater.from(<span class="hljs-built_in">this</span>).setFactory2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LayoutInflater</span>.Factory2() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(View parent, String name, Context context, AttributeSet attrs)</span> {
                <span class="hljs-comment">// 1. è‡ªå·±çš„é€»è¾‘ï¼šæ‹¦æˆªTextView</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"TextView"</span>.equals(name)) {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomTextView</span>(context, attrs);
                }
                <span class="hljs-comment">// 2. é‡è¦ï¼šå°†å…¶ä»–Viewçš„åˆ›å»ºä»£ç†ç»™AppCompat</span>
                <span class="hljs-type">AppCompatDelegate</span> <span class="hljs-variable">delegate</span> <span class="hljs-operator">=</span> getDelegate();
                <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> delegate.createView(parent, name, context, attrs);
                <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> view;
                }
                <span class="hljs-comment">// 3. å¦‚æœAppCompatä¹Ÿæ²¡å¤„ç†ï¼Œè¿”å›nullèµ°é»˜è®¤æµç¨‹</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-comment">// ... çœç•¥å¦ä¸€ä¸ª onCreateView æ–¹æ³•</span>
        });
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<h3 data-id="heading-2">âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>åªèƒ½è®¾ç½®ä¸€æ¬¡</strong>ï¼š<code>LayoutInflater</code> çš„ <code>setFactory</code> æˆ– <code>setFactory2</code> <strong>åªèƒ½æˆåŠŸè°ƒç”¨ä¸€æ¬¡</strong>ï¼Œé‡å¤è®¾ç½®ä¼šæŠ›å‡º <code>IllegalStateException</code>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ <code>AppCompatActivity</code> ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</li>
<li><strong>æ—¶åºéå¸¸é‡è¦</strong>ï¼šè‡ªå®šä¹‰çš„ <code>Factory2</code> <strong>å¿…é¡»åœ¨ <code>super.onCreate(savedInstanceState)</code> ä¹‹å‰è®¾ç½®</strong>ï¼Œå¦åˆ™å¯èƒ½ä¼šå› ä¸º <code>AppCompatActivity</code> å·²æŠ¢å…ˆè®¾ç½®è€Œå¤±è´¥ã€‚</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Factory2</strong>ï¼š<code>Factory2</code> ç»§æ‰¿è‡ª <code>Factory</code>ï¼Œå¹¶å¤šäº†ä¸€ä¸ª <code>parent</code> å‚æ•°ï¼Œèƒ½æä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚åœ¨ API 11+ çš„åº”ç”¨ä¸­åº”ä¼˜å…ˆä½¿ç”¨ <code>setFactory2</code>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ³¨è§£]]></title>    <link>https://juejin.cn/post/7590403249561665551</link>    <guid>https://juejin.cn/post/7590403249561665551</guid>    <pubDate>2026-01-04T02:14:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249561665551" data-draft-id="7590403249561337871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ³¨è§£"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-04T02:14:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ³¨è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:14:37.000Z" title="Sun Jan 04 2026 02:14:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯æ³¨è§£</h3>
<p>java.lang.annotation.Annotation æ¥å£ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼Œç”¨æ¥æè¿°æ³¨è§£ã€‚</p>
<p>The common interface extended by all annotation types
æ‰€æœ‰çš„æ³¨è§£ç±»å‹éƒ½ç»§æ‰¿ Annotation</p>
<p>è¿™å¥è¯æœ‰ç‚¹æŠ½è±¡ï¼Œä½†å´è¯´å‡ºäº†æ³¨è§£çš„æœ¬è´¨ã€‚æˆ‘ä»¬çœ‹çœ‹ JDK å†…ç½®æ³¨è§£ @Override çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Override {

}
</code></pre>
<p>å…¶å®æœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Override</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Annotation</span>{

}
</code></pre>
<p>æ²¡é”™ï¼Œæ³¨è§£çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç»§æ‰¿äº† Annotation æ¥å£çš„æ¥å£ã€‚æœ‰å…³è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥å»åç¼–è¯‘ä»»æ„ä¸€ä¸ªæ³¨è§£ç±»çœ‹çœ‹ç»“æœã€‚</p>
<p>æ¯”å¦‚æ–°å»ºä¸€ä¸ª Teacher.java æ–‡ä»¶ç”¨äºè‡ªå®šä¹‰æ³¨è§£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>({ElementType.TYPE,ElementType.FIELD})
<span class="hljs-variable">@Retention</span>(RetentionPolicy.SOURCE)
public <span class="hljs-variable">@interface</span> Teacher {
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">name</span>();
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">age</span>() <span class="hljs-selector-tag">default</span> <span class="hljs-number">20</span>; 
}
</code></pre>
<p>ç„¶åä½¿ç”¨ <code>javac Teacher.java</code> å‘½ä»¤ç”Ÿæˆ Teacher.class æ–‡ä»¶ï¼Œå†ä½¿ç”¨ <code>javap Teacher.class</code> åç¼–è¯‘åè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">Compiled from <span class="hljs-string">"Teacher.java"</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">com</span>.example.test.Teacher <span class="hljs-keyword">extends</span> <span class="hljs-title class_">java</span>.lang.annotation.Annotation {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> java.lang.String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰æ³¨è§£ç¡®å®æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª java.lang.annotation.Annotation æ¥å£çš„æ¥å£ã€‚</p>
<p><strong>å‡†ç¡®æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ³¨è§£åªä¸è¿‡æ˜¯ä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°è€Œå·²</strong>ã€‚è¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ã€ç±»åŠ è½½æˆ–è¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨æ³¨è§£ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œåœ¨æºæ–‡ä»¶ä¸­åµŒå…¥ä¸€äº›è¡¥å……ä¿¡æ¯ã€‚ä»£ç åˆ†æå·¥å…·ã€å¼€å‘å·¥å…·å’Œéƒ¨ç½²å·¥å…·å¯ä»¥é€šè¿‡è¿™äº›è¡¥å……ä¿¡æ¯è¿›è¡ŒéªŒè¯ã€å¤„ç†æˆ–è€…éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-1">å…ƒæ³¨è§£</h3>
<p>ä¸å£°æ˜ä¸€ä¸ªç±»ä¸åŒçš„æ˜¯ï¼Œæ³¨è§£çš„å£°æ˜ä½¿ç”¨ @interface å…³é”®å­—ï¼Œ@Override æ³¨è§£çš„å£°æ˜å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Override {

}
</code></pre>
<p>å…¶ä¸­çš„ @Targetï¼Œ@Retention ä¸¤ä¸ªæ³¨è§£æ˜¯æˆ‘ä»¬æ‰€è°“çš„ã€å…ƒæ³¨è§£ã€ï¼Œã€å…ƒæ³¨è§£ã€æ˜¯ç”¨äºä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼Œé€šå¸¸ç”¨åœ¨æ³¨è§£çš„å®šä¹‰ä¸Šï¼Œã€å…ƒæ³¨è§£ã€ä¸€èˆ¬ç”¨äºæŒ‡å®šæŸä¸ªæ³¨è§£çš„ä¿ç•™ç­–ç•¥ä»¥åŠä½œç”¨ç›®æ ‡ç­‰ä¿¡æ¯ã€‚</p>
<p>Java ä¸­æœ‰ä»¥ä¸‹å‡ ä¸ªã€å…ƒæ³¨è§£ã€ï¼š</p>
<ul>
<li>@Targetï¼šæ³¨è§£çš„ä½œç”¨ç›®æ ‡</li>
<li>@Retentionï¼šæ³¨è§£çš„ä¿ç•™ç­–ç•¥</li>
<li>@Documentedï¼šæ³¨è§£æ˜¯å¦åº”å½“è¢«åŒ…å«åœ¨ JavaDoc æ–‡æ¡£ä¸­</li>
<li>@Inheritedï¼šæ˜¯å¦å…è®¸å­ç±»ç»§æ‰¿è¯¥æ³¨è§£</li>
</ul>
<p>å…¶ä¸­ï¼Œ@Target ç”¨äºæŒ‡æ˜è¢«ä¿®é¥°çš„æ³¨è§£æœ€ç»ˆå¯ä»¥ä½œç”¨çš„ç›®æ ‡æ˜¯è°ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ˜ï¼Œä½ çš„æ³¨è§£åˆ°åº•æ˜¯ç”¨æ¥ä¿®é¥°æ–¹æ³•çš„ï¼Œä¿®é¥°ç±»çš„ï¼Œè¿˜æ˜¯ç”¨æ¥ä¿®é¥°å­—æ®µå±æ€§çš„ã€‚</p>
<p>@Targetå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.ANNOTATION_TYPE})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Target {
    ElementType[] value();
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥ä¸ºè¿™ä¸ª value ä¼ å€¼ï¼š</p>
<p>@Target(value = {ElementType.FIELD})</p>
<p>ä¸Šé¢è¿™æ®µä»£ç è¡¨ç¤ºè¯¥æ³¨è§£å°†åªèƒ½ä½œç”¨åœ¨æˆå‘˜å­—æ®µä¸Šï¼Œä¸èƒ½ç”¨äºä¿®é¥°æ–¹æ³•æˆ–è€…ç±»ã€‚å…¶ä¸­ï¼ŒElementType æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›å€¼ï¼š</p>
<ul>
<li>ElementType.TYPE å…è®¸è¢«ä¿®é¥°çš„æ³¨è§£ä½œç”¨åœ¨ç±»ã€æ¥å£å’Œæšä¸¾ä¸Š</li>
<li>ElementType.FIELD å…è®¸ä½œç”¨åœ¨æˆå‘˜å˜é‡ä¸Š</li>
<li>ElementType.METHODï¼šå…è®¸ä½œç”¨åœ¨æ–¹æ³•ä¸Š</li>
<li>ElementType.PARAMETERï¼šå…è®¸ä½œç”¨åœ¨æ–¹æ³•å‚æ•°ä¸Š</li>
<li>ElementType.CONSTRUCTORï¼šå…è®¸ä½œç”¨åœ¨æ„é€ æ–¹æ³•ä¸Š</li>
<li>ElementType.LOCAL_VARIABLEï¼šå…è®¸ä½œç”¨åœ¨æœ¬åœ°å±€éƒ¨å˜é‡ä¸Š</li>
<li>ElementType.ANNOTATION_TYPEï¼šå…è®¸ä½œç”¨åœ¨æ³¨è§£ä¸Š</li>
<li>ElementType.PACKAGEï¼šå…è®¸ä½œç”¨åœ¨åŒ…ä¸Š</li>
</ul>
<p>@Retention ç”¨äºæŒ‡æ˜å½“å‰æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼Œå®ƒçš„åŸºæœ¬å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Documented</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Target({ElementType.ANNOTATION_TYPE})</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Retention {
    RetentionPolicy <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>åŒæ ·çš„ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ª value å±æ€§ï¼š</p>
<p>@Retention(value = RetentionPolicy.RUNTIMEï¼‰</p>
<p>è¿™é‡Œçš„ RetentionPolicy ä¾ç„¶æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªæšä¸¾å€¼å¯å–ï¼š</p>
<ul>
<li><strong>RetentionPolicy.SOURCEï¼šæºç çº§æ³¨è§£ã€‚æ³¨è§£ä¿¡æ¯åªä¼šä¿ç•™åœ¨ .java æºç ä¸­ï¼Œæºç åœ¨ç¼–è¯‘åï¼Œæ³¨è§£ä¿¡æ¯è¢«ä¸¢å¼ƒï¼Œä¸ä¼šä¿ç•™åœ¨ .class ä¸­</strong>ã€‚</li>
<li><strong>RetentionPolicy.CLASSï¼šç¼–è¯‘æ—¶æ³¨è§£ã€‚æ³¨è§£ä¿¡æ¯ä¼šä¿ç•™åœ¨ .java æºç ä»¥åŠ .class ä¸­ã€‚å½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼Œ JVM ä¼šä¸¢å¼ƒè¯¥æ³¨è§£ä¿¡æ¯ï¼Œä¸ä¼šä¿ç•™åœ¨ JVM ä¸­</strong>ã€‚</li>
<li><strong>RetentionPolicy.RUNTIMEï¼šè¿è¡Œæ—¶æ³¨è§£ã€‚å½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼Œ JVM ä¹Ÿä¼šä¿ç•™è¯¥æ³¨è§£ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨è§£ä¿¡æ¯</strong>ã€‚</li>
</ul>
<p>@Retention æ³¨è§£æŒ‡å®šäº†è¢«ä¿®é¥°çš„æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼Œè¿™3ä¸ªç­–ç•¥çš„ç”Ÿå‘½å‘¨æœŸé•¿åº¦ä¸º SOURCE &lt; CLASS &lt; RUNTIME ã€‚ç”Ÿå‘½å‘¨æœŸçŸ­çš„èƒ½èµ·ä½œç”¨çš„åœ°æ–¹ï¼Œç”Ÿå‘½å‘¨æœŸé•¿çš„ä¹Ÿä¸€å®šèƒ½èµ·ä½œç”¨ã€‚å¦‚æœåªæ˜¯åšä¸€äº›æ£€æŸ¥æ€§çš„æ“ä½œï¼Œæ¯”å¦‚ @Override å’Œ @SuppressWarning ï¼Œåˆ™å¯é€‰ç”¨ RetentionPolicy.SOURCE ã€‚å¦‚æœè¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚ç”Ÿæˆä¸€äº›è¾…åŠ©ä»£ç ï¼ˆARouter çš„ @Route æ³¨è§£å°±æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œå°±ç”¨ RetentionPolicy.CLASS ã€‚å¦‚æœè¦åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–æ³¨è§£ä¿¡æ¯ï¼Œé‚£å°±åªèƒ½ç”¨ RetentionPolicy.RUNTIME ã€‚</p>
<p>å‰©ä¸‹ä¸¤ç§ç±»å‹çš„å…ƒæ³¨è§£æˆ‘ä»¬æ—¥å¸¸ç”¨çš„ä¸å¤šï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œä¸å†è¯¦ç»†ä»‹ç»äº†ï¼Œä½ åªéœ€è¦çŸ¥é“ä»–ä»¬å„è‡ªçš„ä½œç”¨å³å¯ã€‚@Documented æ³¨è§£ä¿®é¥°çš„æ³¨è§£ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ JavaDoc æ–‡æ¡£æ‰“åŒ…æ—¶ä¼šè¢«ä¿å­˜è¿› doc æ–‡æ¡£ï¼Œåä¹‹å°†åœ¨æ‰“åŒ…æ—¶ä¸¢å¼ƒã€‚@Inherited æ³¨è§£ä¿®é¥°çš„æ³¨è§£æ˜¯å…·æœ‰å¯ç»§æ‰¿æ€§çš„ï¼Œä¹Ÿå°±è¯´æˆ‘ä»¬çš„æ³¨è§£ä¿®é¥°äº†ä¸€ä¸ªç±»ï¼Œè€Œè¯¥ç±»çš„å­ç±»å°†è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„è¯¥æ³¨è§£ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œé‡Œé¢æœ‰ 2 ä¸ªæˆå‘˜å˜é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target({ElementType.TYPE,ElementType.FIELD})</span> 
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Teacher {
    String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>; <span class="hljs-comment">//æ— é»˜è®¤å€¼</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">20</span>; 
}
</code></pre>
<p>æ³¨è§£åªæœ‰æˆå‘˜å˜é‡ï¼Œæˆå‘˜å˜é‡åœ¨æ³¨è§£å®šä¹‰ä¸­ä»¥<strong>æ— å½¢å‚çš„æ–¹æ³•</strong>çš„å½¢å¼æ¥å£°æ˜ã€‚åœ¨ä½¿ç”¨æ³¨è§£æ—¶ï¼Œå¦‚æœå®šä¹‰çš„æ³¨è§£ä¸­çš„æˆå‘˜å˜é‡æ— é»˜è®¤å€¼ï¼Œåˆ™ä½¿ç”¨æ—¶å¿…é¡»ä¼ å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Teacher(name = "å°å¸…")</span> <span class="hljs-comment">// name æ— é»˜è®¤å€¼ï¼Œéœ€è¦ä¼ å€¼ï¼›age æœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥çœç•¥</span>
<span class="hljs-meta">@Teacher(name = "å°å¸…", age = 22)</span> <span class="hljs-comment">// ä¹Ÿå¯ä»¥æ˜¾å¼èµ‹å€¼ </span>
</code></pre>
<h3 data-id="heading-2">æºç çº§æ³¨è§£çš„åº”ç”¨</h3>
<p>æºç çº§æ³¨è§£çš„æ³¨è§£ä¿¡æ¯åªä¼šä¿ç•™åœ¨ .java æºç ä¸­ï¼Œç¼–è¯‘åæ³¨è§£ä¿¡æ¯ä¼šè¢«ä¸¢å¼ƒï¼Œä¸ä¼šä¿ç•™åœ¨ .class ä¸­ã€‚ç¼–è¯‘å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Teacher(name = "å°å¸…", age = 22)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
}
</code></pre>
<p>ç„¶åå» build\intermediates\javac\debug\classes\ ç›®å½•ä¸‹æ‰¾åˆ° Test.classï¼Œæ‰“å¼€å‘ç°å·²ç»æ‰¾ä¸åˆ°æ³¨è§£äº†ã€‚å¦‚æœå°†ä¿ç•™ç­–ç•¥æ”¹æˆ RetentionPolicy.CLASS ï¼Œåˆ™åœ¨ Test.class ä¸­è¿˜å¯ä»¥æ‰¾åˆ°æ³¨è§£:</p>
<pre><code class="hljs language-class" lang="class">@Teacher(
    name = "å°å¸…",
    age = 22
)
public class Test {
}
</code></pre>
<p>æºç çº§æ³¨è§£ä¸»è¦ç”¨æ¥åšä¸€äº›æ£€æŸ¥æ€§çš„å·¥ä½œï¼Œæ¯”å¦‚ï¼Œåœ¨ androidx.annotation ä¸­æœ‰æä¾› @IntDef æ³¨è§£ï¼Œæ­¤æ³¨è§£çš„å®šä¹‰å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Retention(SOURCE)</span> 
<span class="hljs-meta">@Target({ANNOTATION_TYPE})</span> 
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> IntDef {
    <span class="hljs-type">int</span>[] value() <span class="hljs-keyword">default</span> {};
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">flag</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p>æ­¤æ³¨è§£èƒ½å¤Ÿå–ä»£æšä¸¾ï¼Œå®ç°æ–¹æ³•å…¥å‚çš„é™åˆ¶ã€‚</p>
<blockquote>
<p>Java ä¸­çš„ enum ï¼ˆæšä¸¾ï¼‰å®è´¨æ˜¯ç‰¹æ®Šå•ä¾‹çš„é™æ€æˆå‘˜å˜é‡ï¼Œåœ¨è¿è¡ŒæœŸæ‰€æœ‰æšä¸¾ç±»ä½œä¸ºå•ä¾‹ï¼Œå…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ¯”å¸¸é‡å¤š 5 åˆ° 10 å€çš„å†…å­˜å ç”¨ã€‚</p>
</blockquote>
<p>æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª test() æ–¹æ³•ï¼Œæ¥æ”¶çš„å‚æ•° Student åªèƒ½åœ¨ Jim ã€ Lily ä¸¤ä½å­¦ç”Ÿä¸­é€‰ä¸€ä¸ªï¼Œå¦‚æœä½¿ç”¨æšä¸¾å®ç°ï¼Œä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Student</span>{
        Jim,
        Lily
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(Student student)</span>{
    }
}
</code></pre>
<p>ä¸ºäº†ä¼˜åŒ–å†…å­˜ï¼Œæˆ‘ä»¬ç°åœ¨ä¸å†ä½¿ç”¨æšä¸¾ï¼Œæ”¹æˆå¦‚ä¸‹ä»£ç :</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">Jim</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">Lily</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-type">int</span> student)</span>{

    }
}
</code></pre>
<p>è¿™ç§æ–¹å¼æœ‰ä»€ä¹ˆå¼Šç«¯å‘¢ï¼Ÿtest() æ–¹æ³•ç”±äºé‡‡ç”¨ int ç±»å‹ï¼Œå°†æ— æ³•é™å®šä¸º Jim å’Œ Lily ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨æ³¨è§£è¿›è¡Œä¼˜åŒ–:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Constants</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">Jim</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-type">int</span> <span class="hljs-variable">Lily</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@IntDef(value = {Constants.Jim, Constants.Lily})</span>
<span class="hljs-meta">@Target(ElementType.PARAMETER)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Student {
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-meta">@Student</span> <span class="hljs-type">int</span> student)</span>{

    }
}
</code></pre>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å†å»è°ƒç”¨ test() æ–¹æ³•ï¼Œå¦‚æœä¼ é€’çš„å‚æ•°ä¸æ˜¯ Constants.Jim æˆ– Constants.Lily ï¼ŒAndroid Studio ä¼šæŠ¥çº¢ã€‚</p>
<h3 data-id="heading-3">è¿è¡Œæ—¶æ³¨è§£çš„åº”ç”¨</h3>
<p>é’ˆå¯¹è¿è¡Œæ—¶æ³¨è§£ä¼šé‡‡ç”¨åå°„æœºåˆ¶è·å–æ³¨è§£ä¿¡æ¯ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¿è¡Œæ—¶æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target({ElementType.METHOD})</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Teacher {
    String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>; 
    <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">20</span>;
}
</code></pre>
<p>æ¥ä¸‹æ¥åœ¨ AnnotationTest ç±»çš„æ–¹æ³•ä¸Šåº”ç”¨è¯¥æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationTest</span> {

    <span class="hljs-meta">@Teacher(name = "è€ç‹")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMathTeacherName</span><span class="hljs-params">()</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }

    <span class="hljs-meta">@Teacher(name = "è€åˆ˜")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEnglishTeacherName</span><span class="hljs-params">()</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
}
</code></pre>
<p>æœ€åå†™ä¸€ä¸ªç®€å•çš„æ³¨è§£å¤„ç†å™¨ï¼Œé€šè¿‡åå°„è·å–æ³¨è§£ä¸­çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationProcessor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Method[] methods = AnnotationTest.class.getDeclaredMethods();
        <span class="hljs-keyword">for</span>(Method m : methods){
            <span class="hljs-comment">// é€šè¿‡ getAnnotation() è·å–æŒ‡å®šç±»å‹çš„æ³¨è§£å¯¹è±¡</span>
            <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> m.getAnnotation(Teacher.class);
            System.out.println(teacher.name());
        }
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<pre><code class="hljs language-java" lang="java">è€åˆ˜
è€ç‹
</code></pre>
<p>è¿™æ ·å°±æ‹¿åˆ°äº†æ³¨è§£ä¸­çš„æˆå‘˜å˜é‡çš„å€¼ï¼ŒRetrofit ä¸­çš„æ³¨è§£ä¹Ÿæ˜¯åŒæ ·çš„åŸç†ï¼Œé€šè¿‡åå°„æ‹¿åˆ°æ³¨è§£ä¸­çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">ç¼–è¯‘æ—¶æ³¨è§£çš„åº”ç”¨</h3>
<p>å¤„ç†ç¼–è¯‘æ—¶æ³¨è§£ç›¸å¯¹ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œç¼–è¯‘æ—¶æ³¨è§£ä¸€èˆ¬ä¼šç»“åˆæ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰å¯¹æ³¨è§£è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJakeWharton%2Fbutterknife" target="_blank" title="https://github.com/JakeWharton/butterknife" ref="nofollow noopener noreferrer">ButterKnife</a> è‡ªåŠ¨ç»‘å®šå¸ƒå±€ id çš„ä¾‹å­è¿›è¡Œè¯´æ˜ã€‚</p>
<h5 data-id="heading-5">1. å®šä¹‰æ³¨è§£</h5>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª Java Library æ¥å­˜æ”¾æ³¨è§£ï¼ŒLibrary å‘½åä¸º annotations ã€‚æ¥ä¸‹æ¥å®šä¹‰æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.FIELD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.CLASS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyBindView {
    <span class="hljs-comment">// value å€¼å¯¹åº”è¦ç»‘å®šçš„å¸ƒå±€ id</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>æ³¨è§£å®šä¹‰å¥½äº†ï¼Œåœ¨ Activity ä¸­å°±å¯ä»¥ä½¿ç”¨äº†ã€‚åœ¨ app æ¨¡å—çš„ MainActivity ä¸­ä½¿ç”¨è¯¥æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-meta">@MyBindView(R.id.tv_text)</span>
    TextView textView;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}
</code></pre>
<p>é€šè¿‡æ³¨è§£çš„ value å€¼å°±å¯ä»¥æ‹¿åˆ°å¸ƒå±€ id ï¼Œä½†æ˜¯æ€ä¹ˆæŠŠ View å’Œ id ç»‘å®šèµ·æ¥å‘¢ï¼Ÿ</p>
<p>å¦‚æœ MyBindView æ˜¯ RetentionPolicy.RUNTIME ç±»å‹çš„ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œæ—¶åå°„ç»‘å®š id:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(Activity activity)</span> {
    <span class="hljs-comment">// è·å–æˆå‘˜å˜é‡</span>
    <span class="hljs-keyword">for</span> (Field field : activity.getClass().getDeclaredFields()) {
        <span class="hljs-comment">// åˆ¤æ–­è¿™ä¸ªæˆå‘˜å˜é‡ä¸Šæ˜¯å¦æœ‰ @MyBindView æ³¨è§£</span>
        <span class="hljs-type">MyBindView</span> <span class="hljs-variable">myBindView</span> <span class="hljs-operator">=</span> field.getAnnotation(MyBindView.class);
        <span class="hljs-keyword">if</span> (myBindView != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// å°† activity ä¸­æˆå‘˜ field çš„å€¼èµ‹å€¼ä¸ºï¼šactivity.findViewById(myBindView.value())</span>
                field.set(activity, activity.findViewById(myBindView.value()));
            } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre>
<p>ä½†æ˜¯ç°åœ¨æ³¨è§£ä¸æ˜¯ RetentionPolicy.RUNTIME ç±»å‹çš„ï¼Œå¹¶ä¸”æ¯æ¬¡è¿è¡Œçš„æ—¶å€™å»åå°„æ•ˆç‡æ¯”è¾ƒä½ï¼Œå› ä¸ºåå°„æ˜¯æ¯”è¾ƒè€—æ€§èƒ½çš„ï¼Œå½“ç„¶ä½ å¯ä»¥ç”¨ç¼“å­˜æ¥ä¼˜åŒ–ï¼Œè¿˜æœ‰ä¸€ç§æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ APT ç»“åˆ JavaPoet æ¥å®ç°ã€‚</p>
<h5 data-id="heading-6">2.ç¼–å†™æ³¨è§£å¤„ç†å™¨</h5>
<p>å†æ–°å»ºä¸€ä¸ª Java Library æ¥å­˜æ”¾æ³¨è§£å¤„ç†å™¨ï¼ŒLibrary å‘½åä¸º processorï¼Œæ¥ä¸‹æ¥ç¼–å†™æ³¨è§£å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@AutoService(Processor.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> {
    Filer filer;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnvironment)</span> {
        <span class="hljs-built_in">super</span>.init(processingEnvironment);
        filer = processingEnvironment.getFiler();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; set, RoundEnvironment roundEnvironment)</span> {
        <span class="hljs-comment">// éå†æ‰€æœ‰çš„ç±»</span>
        <span class="hljs-keyword">for</span> (Element element : roundEnvironment.getRootElements()) {
            <span class="hljs-comment">// è·å–ç±»çš„åŒ…å</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">packageStr</span> <span class="hljs-operator">=</span> element.getEnclosingElement().toString();
            <span class="hljs-comment">// è·å–ç±»çš„åå­—</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">classStr</span> <span class="hljs-operator">=</span> element.getSimpleName().toString();
            <span class="hljs-comment">// éœ€è¦æ„å»ºçš„æ–°ç±»åï¼šåŸç±»å + Binding</span>
            <span class="hljs-type">ClassName</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> ClassName.get(packageStr, classStr + <span class="hljs-string">"Binding"</span>);
            <span class="hljs-comment">// æ„å»ºæ–°çš„ç±»çš„æ„é€ æ–¹æ³•</span>
            MethodSpec.<span class="hljs-type">Builder</span> <span class="hljs-variable">constructorBuilder</span> <span class="hljs-operator">=</span> MethodSpec.constructorBuilder()
                    .addModifiers(Modifier.PUBLIC)
                    .addParameter(ClassName.get(packageStr, classStr), <span class="hljs-string">"activity"</span>);

            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasBuild</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// è·å–ç±»é‡Œé¢çš„å…ƒç´ ï¼Œæ¯”å¦‚ç±»çš„æˆå‘˜å˜é‡ã€æ–¹æ³•ã€å†…éƒ¨ç±»ç­‰</span>
            <span class="hljs-keyword">for</span> (Element enclosedElement : element.getEnclosedElements()) {
                <span class="hljs-comment">// è·å–æˆå‘˜å˜é‡</span>
                <span class="hljs-keyword">if</span> (enclosedElement.getKind() == ElementKind.FIELD) {
                    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦è¢« @MyBindView æ³¨è§£</span>
                    <span class="hljs-type">MyBindView</span> <span class="hljs-variable">bindView</span> <span class="hljs-operator">=</span> enclosedElement.getAnnotation(MyBindView.class);
                    <span class="hljs-keyword">if</span> (bindView != <span class="hljs-literal">null</span>) {
                        <span class="hljs-comment">// éœ€è¦ç”Ÿæˆç±»</span>
                        hasBuild = <span class="hljs-literal">true</span>;
                        <span class="hljs-comment">// åœ¨æ„é€ æ–¹æ³•ä¸­åŠ å…¥ä»£ç </span>
                        constructorBuilder.addStatement(<span class="hljs-string">"activity.$N = activity.findViewById($L)"</span>,
                                enclosedElement.getSimpleName(), bindView.value());
                    }
                }
            }
            <span class="hljs-comment">// åˆ¤æ–­éœ€è¦ç”Ÿæˆ</span>
            <span class="hljs-keyword">if</span> (hasBuild) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ„å»ºæ–°çš„ç±»</span>
                    <span class="hljs-type">TypeSpec</span> <span class="hljs-variable">builtClass</span> <span class="hljs-operator">=</span> TypeSpec.classBuilder(className)
                            .addModifiers(Modifier.PUBLIC)
                            .addMethod(constructorBuilder.build())
                            .build();
                    <span class="hljs-comment">// ç”Ÿæˆ Java æ–‡ä»¶</span>
                    JavaFile.builder(packageStr, builtClass)
                            .build().writeTo(filer);
                } <span class="hljs-keyword">catch</span> (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }


    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title function_">getSupportedAnnotationTypes</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åªæ”¯æŒ @MyBindView æ³¨è§£</span>
        <span class="hljs-keyword">return</span> Collections.singleton(MyBindView.class.getCanonicalName());
    }

}
</code></pre>
<p>åœ¨å…¶ build.gradle ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-c" lang="c">dependencies {
    implementation <span class="hljs-title function_">project</span><span class="hljs-params">(<span class="hljs-string">":annotations"</span>)</span>
    <span class="hljs-comment">// AutoService æ˜¯Googleæä¾›çš„</span>
    annotationProcessor 'com.google.<span class="hljs-keyword">auto</span>.service:<span class="hljs-keyword">auto</span>-service:1.0-rc7'
    compileOnly 'com.google.<span class="hljs-keyword">auto</span>.service:<span class="hljs-keyword">auto</span>-service:1.0-rc7'
    <span class="hljs-comment">// javapoet æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆæ¡†æ¶ï¼Œåˆ©ç”¨å®ƒå¯ä»¥ä¼˜é›…çš„ç”Ÿæˆæˆ‘ä»¬æƒ³è¦çš„ä»£ç </span>
    implementation 'com.squareup:javapoet:1.10.0'
}
</code></pre>
<p>å…¶ä¸­ AutoService æ˜¯ Google æä¾›çš„ï¼Œç”¨æ¥å¸®åŠ©ç”Ÿæˆ javax.annotation.processing.Processor æ–‡ä»¶çš„ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨å®ƒï¼Œä½ å°±éœ€è¦è‡ªå·±å» resources ä¸­æ·»åŠ è¯¥æ–‡ä»¶ã€‚</p>
<p>æ³¨è§£å¤„ç†å™¨é‡Œé¢çš„å‡ ä¸ªæ–¹æ³•è§£é‡Šä¸€ä¸‹ï¼š</p>
<ol>
<li>init: ä¼šè¢«æ³¨è§£å¤„ç†å·¥å…·è°ƒç”¨ï¼Œå…¥å‚ä¸º ProcessingEnvironmentï¼ŒProcessingEnvironment æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·ç±»ï¼Œæ¯”å¦‚ Elementsã€Typesã€Filter å’Œ Messager ç­‰ã€‚</li>
<li>processï¼šä½ è¦åœ¨è¿™é‡Œå¯¹æ³¨è§£è¿›è¡Œå¤„ç†ã€‚</li>
<li>getSupportedAnnotationTypesï¼šæŒ‡å®šè¿™ä¸ªæ³¨è§£å¤„ç†å™¨æ”¯æŒçš„æ³¨è§£ç±»å‹ã€‚</li>
</ol>
<p>process() æ–¹æ³•ä¸­çš„ä»£ç ä¼šæŸ¥æ‰¾æˆå‘˜å˜é‡ä¸Šæœ‰ @MyBindView æ³¨è§£çš„ç±»ï¼Œç”Ÿæˆä»£ç ï¼Œç±»åä¸ºï¼šåŸç±»å + Bindingï¼Œå¹¶é€šè¿‡ findViewById æ¥ç»‘å®š View å’Œ id ã€‚ä»£ç æ˜¯é€šè¿‡ <code>com.squareup:javapoet:1.10.0</code> è¿™ä¸ªæ¡†æ¶æ¥ç”Ÿæˆçš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ¥ç”Ÿæˆä»£ç ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgreenrobot%2FEventBus" target="_blank" title="https://github.com/greenrobot/EventBus" ref="nofollow noopener noreferrer">EventBus</a> å°±ä½¿ç”¨äº†å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼:</p>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3ce33f7c0464b3cb4f4e18cab987773~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=949&amp;h=969&amp;s=122587&amp;e=png&amp;b=fffefe" alt="image.png" width="70%" loading="lazy"/>
<p>ç»™ app æ¨¡å—çš„build.gradleæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    implementation project(path: <span class="hljs-string">':annotations'</span>)
    annotationProcessor <span class="hljs-built_in">project</span>(<span class="hljs-string">':processor'</span>)
}
</code></pre>
<p>ç„¶ååœ¨Terminalä¸­è¾“å…¥ï¼š<code>./gradlew :app:compileDebugJavaWithJavac</code>ï¼Œå°±ä¼šåœ¨ app æ¨¡å—ä¸‹ç”ŸæˆMainActivityBind.javaæ–‡ä»¶ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d853945ba8ef453bab12e04d0d1f9ec2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=403&amp;h=171&amp;s=7955&amp;e=png&amp;b=4f4b41" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€ MainActivityBind.javaï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivityBinding</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MainActivityBinding</span><span class="hljs-params">(MainActivity activity)</span> {
        activity.textView = activity.findViewById(<span class="hljs-number">2131231011</span>);
    }
}
</code></pre>
<p>æ­¤æ—¶åªæ˜¯ç”Ÿæˆäº†æˆ‘ä»¬æƒ³è¦çš„ä»£ç ï¼Œè¿˜éœ€è¦è°ƒç”¨ MainActivityBinding çš„æ„é€ å‡½æ•°ã€‚</p>
<h5 data-id="heading-7">3.åº”ç”¨æ³¨è§£</h5>
<p>å†æ–°å»ºä¸€ä¸ª Android Libraryï¼ŒLibrary å‘½åä¸º reflectï¼Œåœ¨ build.gradle ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    api project(path: <span class="hljs-string">':annotations'</span>)
}
</code></pre>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyButterKnife</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bind</span><span class="hljs-params">(Activity activity)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–"å½“å‰çš„ activity ç±»å + Binding "çš„ class å¯¹è±¡</span>
            <span class="hljs-type">Class</span> <span class="hljs-variable">bindingClass</span> <span class="hljs-operator">=</span> Class.forName(activity.getClass().getCanonicalName() + <span class="hljs-string">"Binding"</span>);
            <span class="hljs-comment">// è·å– class å¯¹è±¡çš„æ„é€ æ–¹æ³•ï¼Œè¯¥æ„é€ æ–¹æ³•çš„å‚æ•°ä¸ºå½“å‰çš„ activity å¯¹è±¡</span>
            <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> bindingClass.getDeclaredConstructor(activity.getClass());
            <span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
            constructor.newInstance(activity);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>æœ€ååœ¨ app æ¨¡å—çš„ MainActivity ä¸­è°ƒç”¨ MyButterKnife çš„ bind() æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@MyBindView(R.id.tv_text)</span>
    TextView textView;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MyButterKnife.bind(<span class="hljs-built_in">this</span>);
        textView.setText(<span class="hljs-string">"Hello APT!!!!"</span>);
    }
}
</code></pre>
<p>å…¶ä¸­ app æ¨¡å—çš„ build.gradle é…ç½®éœ€è¦ä¿®æ”¹æˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-css" lang="css">dependencies {
    implementation project(path: <span class="hljs-string">':reflect'</span>)
    annotationProcessor <span class="hljs-built_in">project</span>(<span class="hljs-string">':processor'</span>)
}
</code></pre>
<p>è¿è¡Œ MainActivity ï¼Œé€šè¿‡ MyButterKnife çš„ bind() æ–¹æ³•å°±å®ç°äº†è‡ªåŠ¨ç»‘å®šå¸ƒå±€ id çš„åŠŸèƒ½ã€‚å¯ä»¥åˆ†æä¸€ä¸‹ ARouter æ¡†æ¶ï¼Œä¹Ÿæ˜¯ç±»ä¼¼çš„åŸç†ã€‚</p>
<p>Demoåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FEnzoXRay%2FAnnotationTest" target="_blank" title="https://github.com/EnzoXRay/AnnotationTest" ref="nofollow noopener noreferrer">github.com/EnzoXRay/Anâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼]]></title>    <link>https://juejin.cn/post/7590684822726459432</link>    <guid>https://juejin.cn/post/7590684822726459432</guid>    <pubDate>2026-01-04T02:24:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590684822726459432" data-draft-id="7587997893987090459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T02:24:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆæ³¡æ³¡_"/> <meta itemprop="url" content="https://juejin.cn/user/2735240662223358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AndroidæŠ“å–traceçš„å‡ ç§æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240662223358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆæ³¡æ³¡_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:24:31.000Z" title="Sun Jan 04 2026 02:24:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€èˆ¬åœ¨åšæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å–œæ¬¢ç”¨æŠ“å–ç«ç„°å›¾çš„æ–¹å¼ï¼Œæ¥åˆ†æç›¸å…³traceè°ƒç”¨ï¼Œå‘ç°å¯¹åº”çš„æ€§èƒ½é—®é¢˜ï¼›æœ€è¿‘åœ¨åšå¯åŠ¨ä¼˜åŒ–ï¼Œä¹Ÿå°è¯•äº†å‡ ç§ä¸åŒçš„æ–¹å¼ï¼Œé‚è®°å½•ä¸‹æ¥</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å‡ ç§æŠ“å–ç«ç„°å›¾çš„æ–¹å¼</h2>
<blockquote>
<p>Googleå¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile%2Fchart-glossary%2Fflame-chart%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/studio/profile/chart-glossary/flame-chart?hl=zh-cn" ref="nofollow noopener noreferrer">ç«ç„°å›¾</a>çš„ä»‹ç»</p>
</blockquote>
<h4 data-id="heading-1">1.ä½¿ç”¨ASçš„Profiler</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile" target="_blank" title="https://developer.android.com/studio/profile" ref="nofollow noopener noreferrer">developer.android.com/studio/profâ€¦</a></p>
<ul>
<li>2024.1.2ç‰ˆæœ¬ä¹‹å‰çš„æŠ“å–ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬æŠ“å–æ—¶é—´ä¸€é•¿å°±ä¼šå¡æ­»ï¼Œè€Œä¸”æ²¡åŠæ³•æŠ“å–å¯åŠ¨é˜¶æ®µçš„ç«ç„°å›¾ï¼Œç•Œé¢ä¹Ÿä¸æ˜¯å¾ˆç›´è§‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1074b6788b0f4167a04662bbb0411d91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=1%2BaFRKIG40XeyMhG1VDhXGyEErs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Freleases%2Fpast-releases%2Fas-koala-feature-drop-release-notes%23task-based-profiler" target="_blank" title="https://developer.android.com/studio/releases/past-releases/as-koala-feature-drop-release-notes#task-based-profiler" ref="nofollow noopener noreferrer">æ–°ç‰ˆæœ¬</a>æ”¹è¿›äº† Android Studio Profiler çš„æ€§èƒ½ï¼ŒProfilerä¹Ÿæ ¹æ®CPUã€å†…å­˜å’ŒåŠŸè€—è¿™ç§ä»»åŠ¡ä¸ºä¸­å¿ƒè¿›è¡Œäº†é‡æ–°è®¾è®¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ‰“å¼€ Profiler åç«‹å³ä»ç”¨æˆ·ç•Œé¢å¯åŠ¨ç³»ç»Ÿè·Ÿè¸ªä»»åŠ¡ï¼Œä»¥åˆ†æå¹¶æ”¹è¿›åº”ç”¨ç¨‹åºçš„å¯åŠ¨æ—¶é—´ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b264b1868194d31a4a458f1350c8fbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=zUJUmNXr0J6%2BBivH04e0Z%2FM%2FP4I%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æ•´ä½“æ“ä½œæ¯”è¾ƒç®€å•ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fprofile%2Fcapture-heap-dump" target="_blank" title="https://developer.android.com/studio/profile/capture-heap-dump" ref="nofollow noopener noreferrer">developer.android.com/studio/profâ€¦</a></li>
</ul>
<h4 data-id="heading-2">2.ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fui.perfetto.dev%2F" target="_blank" title="https://ui.perfetto.dev/" ref="nofollow noopener noreferrer">perfetto</a>æ¥æŠ“å–</h4>
<p>å¿«é€Ÿå¼€å§‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fquickstart%2Fandroid-tracing" target="_blank" title="https://perfetto.dev/docs/quickstart/android-tracing" ref="nofollow noopener noreferrer">perfetto.dev/docs/quicksâ€¦</a></p>
<ul>
<li>æŠ“å–åˆ°çš„ç«ç„°å›¾ç±»ä¼¼ä¸‹é¢è¿™ç§ï¼Œæ²¡æœ‰å †æ ˆï¼ŒåŸå› æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨åŠ trace</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/400d9ae44c29469fac9b15e0e7b42f2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=KNA1IBv3BsJ0Y%2BWPhWsVuNFGkH0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å¦‚æœæç¤ºadbè¿æ¥å¤±è´¥ï¼Œå¯ä»¥æŠŠAndroid Studioå…³é—­ï¼Œæˆ–è€…é‡æ–°æ’æ‹”usb</li>
<li>ç½‘é¡µçš„settingå¤§å®¶æ ¹æ®è‡ªå·±æƒ³æ‰‹æœºçš„æ•°æ®é€‰æ‹©æ€§å¼€å¯å³å¯ï¼Œä½†ä¸€å®šè¦è®°å¾—å¼€å¯Perfetto SDK -&gt; Tracek Event
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/909d5f676ddb4166b6cc1737fe390dfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZmI5rOh5rOhXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098271&amp;x-signature=ET9q%2BI0A6VEXp%2FldSf3jNtB3Si4%3D" alt="" loading="lazy"/></li>
<li>æœ‰äº›è®¾å¤‡çœ‹ä¸åˆ°å¯¹åº”çš„traceä¿¡æ¯éœ€è¦åœ¨è®¾ç½®ä¸­å¼€å¯è½¨è¿¹å½•åˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fzhangphil%2Farticle%2Fdetails%2F145935055" target="_blank" title="https://blog.csdn.net/zhangphil/article/details/145935055" ref="nofollow noopener noreferrer">blog.csdn.net/zhangphil/aâ€¦</a></li>
</ul>
<h2 data-id="heading-3">äºŒã€å¦‚ä½•è‡ªå®šä¹‰æŠ“å–trace</h2>
<h4 data-id="heading-4">1.btrace</h4>
<p>å­—èŠ‚å¼€æºçš„é«˜æ€§èƒ½æŠ“å–traceæ–¹æ¡ˆï¼Œç›®å‰3.0ç‰ˆæœ¬é‡‡ç”¨åŒæ­¥æŠ“æ ˆå’ŒåŠ¨æ€æ’æ¡©çš„æ–¹æ¡ˆï¼Œæ•´ä½“æŠ“å–çš„ç²’åº¦å’Œå‡†ç¡®åº¦éƒ½æ˜¯ä¸šå†…è¾ƒé«˜æ°´å¹³ï¼Œä½†æ˜¯ç›®å‰è¿˜ä¸æ”¯æŒå¤šè¿›ç¨‹ï¼Œå…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytedance%2Fbtrace%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/bytedance/btrace?tab=readme-ov-file" ref="nofollow noopener noreferrer">github.com/bytedance/bâ€¦</a></p>
<h4 data-id="heading-5">2.æ’æ¡©</h4>
<p>ä¸€èˆ¬æ­£å¸¸çš„åœºæ™¯btraceå°±èƒ½æ»¡è¶³è¯‰æ±‚ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šè¿›ç¨‹çš„è¯‰æ±‚æˆ–è€…ç¼–è¯‘å†²çªç­‰æ›´è‡ªå®šä¹‰çš„è¯‰æ±‚ï¼Œå°±éœ€è¦è‡ªå·±æ·»åŠ traceï¼›è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°æ’æ¡©çš„æ–¹æ¡ˆ</p>
<ul>
<li>ç®€å•çš„traceæŠ“å–å¯ä»¥åˆ©ç”¨åŸç”Ÿçš„èƒ½åŠ›</li>
</ul>
<p><code>Trace#beginSection(String)</code>Â å’ŒÂ <code>Trace.endSection()</code></p>
<h2 data-id="heading-6">ä¸‰ã€å¦‚ä½•åˆ†æ</h2>
<h4 data-id="heading-7">1.äººå·¥åˆ†æ</h4>
<p>å…¶å®äººå·¥åˆ†æå°±å…¨é ä¸ªäººç»éªŒï¼Œ</p>
<ul>
<li>
<p>å¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„æ–‡ç« å…ˆèƒ½è¯»æ‡‚ç«ç„°å›¾<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2017%2F09%2Fflame-graph.html" target="_blank" title="https://www.ruanyifeng.com/blog/2017/09/flame-graph.html" ref="nofollow noopener noreferrer">www.ruanyifeng.com/blog/2017/0â€¦</a></p>
</li>
<li>
<p>é™¤äº†çœ‹å›¾ä¹‹å¤–ï¼Œæœ€ä¸»è¦çš„æ‰‹æ®µæ˜¯æ ¹æ®SQLå»æŸ¥è¯¢ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£
<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fandroid-trace-analysis" target="_blank" title="https://perfetto.dev/docs/getting-started/android-trace-analysis" ref="nofollow noopener noreferrer">perfetto.dev/docs/gettinâ€¦</a></p>
</li>
</ul>
<h4 data-id="heading-8">2.AIåˆ†æ</h4>
<p>ç›®å‰å¸‚é¢ä¸Šè¿˜æ²¡å‡ºç›¸å¯¹åº”çš„äº§å“ï¼Œä½†æ˜¯æ ¹æ®å‰é¢äººå·¥åˆ†æçš„æ­¥éª¤æ¥çœ‹ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ€è·¯ä¸éš¾å®ç°ä¸€ä¸ªéå¸¸å¥½ç”¨çš„AIåˆ†æç«ç„°å›¾å·¥å…·ï¼š</p>
<ul>
<li>æ ¹æ®GUIåˆ†æå½“å‰ç«ç„°å›¾çš„å…¨å±€æƒ…å†µ(GPU/CPUç­‰)</li>
<li>ç»“åˆSQLè§£æçº¿ç¨‹çš„è€—æ—¶ã€binderçš„é€šä¿¡ç­‰</li>
<li>å†æ”¯æŒæŠŠä»£ç åº“/ç‰‡æ®µä½œä¸ºä¸Šä¸‹æ–‡çŸ¥è¯†åº“ä¼ å…¥</li>
<li>ç»“åˆåˆ†æç«ç„°å›¾çš„ç»éªŒï¼Œé€šè¿‡LLMåˆ†æå½“å‰çš„å¡é¡¿ã€è€—æ—¶å’Œä¼˜åŒ–æ–¹æ¡ˆ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›]]></title>    <link>https://juejin.cn/post/7590961898399170598</link>    <guid>https://juejin.cn/post/7590961898399170598</guid>    <pubDate>2026-01-04T03:28:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590961898399170598" data-draft-id="7591079707698757642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-04T03:28:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œä¸œæ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/3808364011728392"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠªåŠ›æ²¡é”™ï¼Œä½†ä½ å¯èƒ½ä¸€ç›´åœ¨é”™è¯¯çš„å±‚çº§é‡Œç”¨åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364011728392/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œä¸œæ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:28:34.000Z" title="Sun Jan 04 2026 03:28:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä¹‹å‰åœ¨å­—èŠ‚çš„æ—¶å€™ï¼Œå·¥ä½œå‹åŠ›å¾ˆå¤§ï¼Œä¸ºäº†æ‹¿åˆ°å¥½ç»©æ•ˆï¼Œèƒ½æ™‹å‡ï¼Œæˆ‘ç†æ‰€å½“ç„¶çš„è®¤ä¸ºåªè¦è¸è¸å®å®å¹²å¥½é¢†å¯¼å®‰æ’çš„å·¥ä½œå°±è¡Œã€‚</p>
<p>äºæ˜¯éœ€æ±‚è¯„å®¡çš„æ—¶å€™ï¼Œå°½é‡å¤šæ¥å‡ ä¸ªéœ€æ±‚ï¼Œæƒ³è®©ä¸šåŠ¡æ–¹çš„éœ€æ±‚å°½å¿«ä¸Šçº¿ã€‚</p>
<p>ä¸šåŠ¡æ–¹åé¦ˆçš„é—®é¢˜ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´ä»‹å…¥å¤„ç†ï¼Œæƒ³ç”¨è‡ªå·±çš„ç»éªŒå‡å°‘é—®é¢˜è§£å†³çš„æ—¶é—´ã€‚</p>
<p>åŸ‹å¤´è‹¦å¹²ä¸€å¹´ï¼Œä½†å¹´åº•ç»©æ•ˆè¯„å®¡çš„æ—¶å€™ï¼Œå›å¤´çœ‹çœ‹ï¼Œå´å‘ç°è‡ªå·±ä¹Ÿæ²¡åšå‡ºä»€ä¹ˆæˆç»©ï¼Œä¹Ÿæœ‰åˆ«äººæ¯”æˆ‘å¹²çš„æ›´å¤šï¼Œæ‰€ä»¥å†…å¿ƒå……æ»¡å¿å¿‘ã€‚</p>
<p>é‚£æ—¶å€™æˆ‘è¿˜ä¸çŸ¥é“ï¼Œæˆ‘ç¼ºå°‘çš„ä¸æ˜¯åŠªåŠ›ï¼Œè€Œæ˜¯çœ‹é—®é¢˜çš„é«˜åº¦ã€‚</p>
<p>å°±åƒã€Šé•¿å®‰çš„è”æã€‹é‡Œï¼Œä¸€è·¯æŠ«æ˜Ÿæˆ´æœˆé•¿é€”å¥”è¢­ï¼Œç»ˆäºæˆåŠŸæŠŠæ–°é²œçš„è”ææŠ¤é€åˆ°é•¿å®‰ï¼Œå¯ä¸Šå±‚çš„äººåªæ˜¯æƒ³å€Ÿæ­¤åšç¾äººä¸€ç¬‘è€Œå·²ã€‚</p>
<p><strong>æƒ³è¦è·³å‡ºè¿™ä¸ªæœ‰äº›å¯æ‚²çš„å±€é¢ï¼Œæˆ‘ä»¬éœ€è¦è·ƒå±‚æ€ç»´ã€‚</strong></p>
<h2 data-id="heading-1">ç¬¬ä¸€å±‚ï¼šåœæ­¢åªç›¯ç€â€œä»»åŠ¡â€ï¼Œå¼€å§‹ç›¯â€œç³»ç»Ÿâ€</h2>
<p>è·ƒå±‚æ€ç»´çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯è¦å‘ä¸Šä¸€å±‚çœ‹é—®é¢˜ã€‚</p>
<p>äº”å¹´å‰æˆ‘åœ¨ä¸€å®¶é‡‘èäº’è”ç½‘å…¬å¸å·¥ä½œã€‚å…¥èŒåæ¥åˆ°çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œæ˜¯æŠŠappçš„åŠŸèƒ½è¿ç§»åˆ°å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¼€å§‹åšèµ·äº†ä»£ç è¿ç§»å·¥ä½œã€‚</p>
<p>å› ä¸ºæ˜¯é‡‘èç›¸å…³ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå…³äºé£æ§çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè€Œé‚£æ—¶å€™è¿™éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½å¹¶æ²¡æœ‰ç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹ŸæŠŠæ ¸å¿ƒçš„é£æ§åŠŸèƒ½éƒ½å®Œæˆäº†ä¸€æ¬¡è¿ç§»ã€‚</p>
<p>é‚£æ®µæ—¶é—´æˆ‘æ²¡æœ‰æ­£ç‚¹ä¸‹è¿‡ç­ï¼Œå¿™çš„æ˜å¤©é»‘åœ°ï¼Œæ€»ç®—æŠŠç³»ç»ŸæŒ‰æ—¶ä¸Šçº¿äº†ã€‚</p>
<p>è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œé¢†å¯¼è®¤ä¸ºé£æ§åŠŸéœ€è¦å•ç‹¬æ‹†åˆ†æˆå¾®æœåŠ¡ï¼Œä¸“é—¨è´Ÿè´£é£æ§æµç¨‹ï¼Œç›¸å½“äºåˆè¦åšä¸€æ¬¡ä»£ç è¿ç§»ï¼Œè¿™éƒ¨åˆ†å·¥ä½œå°±äº¤ç»™äº†å¦ä¸€ä¸ªåŒäº‹ã€‚</p>
<p>åˆ°äº†å¹´åº•ç»©æ•ˆè¯„å®¡ï¼Œæˆ‘çš„ç»©æ•ˆå¹³å¹³ï¼Œè€Œè´Ÿè´£é£æ§åŠŸèƒ½è¿ç§»çš„åŒäº‹ï¼Œé¢†å¯¼å´ç»™äº†ä»–å¥½çš„ç»©æ•ˆã€‚</p>
<p>æ˜æ˜éƒ½æ˜¯åšçš„ä»£ç è¿ç§»å·¥ä½œï¼Œä½†é¢†å¯¼å¯¹æ­¤ç¡®å®å®Œå…¨ä¸åŒçš„è¯„ä»·ï¼Œå½“æ—¶çš„æˆ‘å¿¿å¿¿ä¸å¹³ï¼Œå´æ ¹æœ¬ä¸çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªé‡Œã€‚</p>
<p>ç°åœ¨çœ‹æ¥ï¼Œå°ç¨‹åºåªæ˜¯æ™®é€šçš„ä¸šåŠ¡é¡¹ç›®ï¼Œåœ¨é¢†å¯¼å±‚é¢çœ‹æ¥ï¼Œå®Œæˆå¯¹æ¥å°±å¥½ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†ï¼Œæ˜¯æ ¸å¿ƒæµç¨‹çš„å¾®æœåŠ¡æŠ€æœ¯é¡¹ç›®ï¼Œæ‰€ä»¥è‡ªç„¶æ›´å—åˆ°é¢†å¯¼é‡è§†ã€‚</p>
<p>åœ¨å½“æ—¶ï¼Œå¯¹äºæŠ€æœ¯å›¢é˜Ÿæ¥è¯´ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„æŠ€æœ¯é¡¹ç›®ï¼Œæ¯”ä¸€ä¸ªä¸šåŠ¡é¡¹ç›®ï¼Œä»·å€¼è¦é«˜å¾—å¤šã€‚</p>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<p>ä½ å¿…é¡»è·³å‡ºè¿™ä¸€å±‚ï¼Œä»æ›´é«˜çš„è§†è§’å¾€ä¸‹çœ‹ã€‚</p>
<p>å¯¹äºå·¥ä½œæ¥è¯´ï¼Œå…¶å®å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯å°½é‡å¤šçš„å»äº†è§£ä½ çš„ç›´æ¥é¢†å¯¼ï¼Œä½ éœ€è¦äº†è§£ä¸€äº›ä¿¡æ¯ï¼š</p>
<p>ä»–çš„æ ¸å¿ƒé¢†å¯¼æ˜¯è°ï¼Ÿè¿™å†³å®šäº†ä»–çš„æ ¸å¿ƒè¯„ä»·æ ‡å‡†ã€‚</p>
<p>ä»–çš„ä¸šç»©é ä»€ä¹ˆè¡¡é‡ï¼Ÿæ˜¯é”€é‡ã€åˆ©æ¶¦è¿˜æ˜¯å®¢æˆ·æ»¡æ„åº¦ï¼Ÿè¿™å†³å®šäº†ä»–å…³å¿ƒä»€ä¹ˆæŒ‡æ ‡ã€‚</p>
<p>ä»–çš„é£é™©å’Œæ¿€åŠ±æ˜¯ä»€ä¹ˆï¼Ÿè¿™å†³å®šäº†ä»–çš„è¡ŒåŠ¨ä¼˜å…ˆçº§ã€‚</p>
<p>ä»–çš„å†³ç­–è¾¹ç•Œæ˜¯ä»€ä¹ˆï¼Ÿå“ªäº›äº‹æƒ…ä»–èƒ½åšä¸»ï¼Œå“ªäº›éœ€è¦è¯·ç¤ºé¢†å¯¼ã€‚è¿™å†³å®šä»–çš„å†³ç­–è‡ªç”±åº¦ã€‚</p>
<p>ä»–ç›®å‰é¢ä¸´çš„éš¾é¢˜æ˜¯ä»€ä¹ˆï¼Ÿè¿™å†³å®šäº†ä»–çŸ­æœŸå†…è¦åšä»€ä¹ˆäº‹æƒ…ã€‚</p>
<p>äº†è§£è¿™äº›ï¼Œ å¹¶ä¸æ˜¯è¦æ±‚ä½ ä»é¢†å¯¼çš„è§’åº¦å»è€ƒè™‘é—®é¢˜ï¼Œè€Œæ˜¯è®©ä½ é¿å…åšä¸€äº›æ— ç”¨åŠŸï¼Œç”šè‡³æ˜¯åœ¨ä¸€äº›é”™è¯¯çš„æ–¹å‘è¶Šèµ°è¶Šè¿œã€‚</p>
<p>ä½ å¯ä»¥æŒ‰è¿™äº›é—®é¢˜ï¼Œçœ‹çœ‹ä½ å¯¹ç›´æ¥é¢†å¯¼äº†è§£å¤šå°‘ï¼Œå¹¶ä¸æ˜¯è¦ä½ å»è¿åˆé¢†å¯¼ã€æ£æ‘©äººå¿ƒï¼Œè€Œæ˜¯ä¸ºäº†â€”â€”åˆ«æŠŠç”Ÿå‘½æµªè´¹åœ¨é”™è¯¯æ–¹å‘çš„åŠªåŠ›ä¸Šã€‚</p>
<p>å¯é¢†å¯¼ä¸æ˜¯ä¸‡èƒ½çš„ã€‚</p>
<h2 data-id="heading-2">ç¬¬äºŒå±‚ï¼šçœ‹æ¸…â€œè§„åˆ™èƒŒåçš„çœŸå®æ„å›¾â€</h2>
<p>æˆ‘æ‰€åœ¨çš„å…¬å¸æ­£åœ¨è½¬å‹ï¼Œè€ƒæ ¸æ ‡å‡†å‡ ä¹å¤„äºâ€œåŠ¨æ€åˆ·æ–°â€çŠ¶æ€ã€‚</p>
<p>è¿™ä¸ªæœˆæ˜¯å®¢æˆ·æ»¡æ„åº¦ï¼Œä¸‹ä¸ªæœˆæ˜¯éœ€æ±‚æ•°é‡ï¼Œå†å¾€åå¯èƒ½åˆå˜æˆç¼ºé™·ç‡æ§åˆ¶ã€‚</p>
<p>æ ‡å‡†å˜åŠ¨çš„å¦‚æ­¤é¢‘ç¹ï¼Œä¹ƒè‡³äºæœ‰æ—¶å€™å›¢é˜Ÿè´Ÿè´£äººåœ¨ç»™è‡ªå·±å›¢é˜Ÿå®£è´¯çš„æ—¶å€™ï¼Œéƒ½æ ¹æœ¬è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆåˆ¶å®šäº†è¿™ä¸ªè§„åˆ™ï¼Œåº”è¯¥æ€ä¹ˆåŠæ‰èƒ½å®Œæˆè¿™äº›ç›®æ ‡ã€‚</p>
<p>æˆ‘å‘ç°äº†ä¸¤ä¸ªæœ‰æ„æ€çš„æç«¯ç°è±¡ï¼Œæœ‰äººæŠŠä¸Šå±‚åˆ¶å®šçš„è§„åˆ™å½“æˆé‡‘ç§‘ç‰å¾‹ï¼Œç»å°½è„‘æ±çš„å»æƒ³å›¢é˜Ÿå†…çš„æ‰§è¡Œæ–¹æ¡ˆï¼Œå¸Œæœ›é€šè¿‡å®Œæˆä»»åŠ¡ï¼Œæ¥è·å¾—ã€‚æœ‰äººç«‹åˆ»å¼€å§‹åæ§½ç›®æ ‡å˜åŒ–å¿«ï¼Œè¿™ä¸ªè§„åˆ™è®¾è®¡çš„è¿™ä¹ˆä¸åˆç†ã€‚</p>
<p>é‚£ä¹ˆçœŸæ­£çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿå¹¶ä¸æ˜¯æˆ‘ä»¬è¯¥æ€ä¹ˆæ‰§è¡Œï¼Œè¿™è§„åˆ™åˆä¸åˆç†ã€‚</p>
<p>è€Œæ˜¯é¢†å¯¼ä¸ºä»€ä¹ˆè¦åˆ¶å®šè¿™å¥—è§„åˆ™ï¼Ÿè¿™å¥—è§„åˆ™æƒ³ä¿®è¡¥çš„ï¼Œæ˜¯ç³»ç»Ÿé‡Œçš„å“ªä¸€å—é£é™©æˆ–çŸ­æ¿ï¼Ÿå®ƒæ˜¯ä¸´æ—¶åº”æ€¥ï¼Œè¿˜æ˜¯ç»“æ„æ€§æ–¹å‘è°ƒæ•´ï¼Ÿ</p>
<p>æ¯”å¦‚è¯´åœ¨è½¬å‹æœŸï¼Œè€ƒæ ¸æŒ‡æ ‡é¢‘ç¹å˜åŒ–ï¼Œå…·ä½“è¦æ±‚æ¯ä¸ªæœˆéƒ½åœ¨å˜ã€‚æŠ“å®Œéœ€æ±‚äº¤ä»˜æŠ“æµç¨‹åˆè§„ï¼ŒæŠ“å®Œåˆè§„æŠ“AIåˆ›æ–°ã€‚å…¶å®ä¸æ˜¯å…¬å¸æƒ³æŠ˜è…¾å‘˜å·¥ï¼Œè€Œæ˜¯ç»„ç»‡æœ¬èº«ä¹Ÿåœ¨è¿·èŒ«ã€‚</p>
<p>å¾ˆå¤šæŒ‡æ ‡ä¸æ˜¯æˆ˜ç•¥ï¼Œè€Œæ˜¯ä¼ä¸šç„¦è™‘çš„å…·è±¡åŒ–ã€‚</p>
<p>å†è¯´ä¸ªä¾‹å­å§ï¼Œæˆ‘èº«è¾¹çš„å¤§éƒ¨åˆ†æœ‹å‹éƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå·²ç»ç»“å©šã€ä¹°æˆ¿ã€ç”Ÿå­äº†ã€‚</p>
<p>æœ‰æ—¶å€™å¤§å®¶èŠèµ·å¤©æ¥ï¼Œäº’ç›¸åæ§½åæ§½ï¼Œæ€»ä¼šæœ‰äº›è®¸æ— å¥ˆï¼Œç»“æŸæ—¶æ€»ä¼šè¯´ï¼šæ²¡åŠæ³•ï¼Œåˆ°äº†è¿™ä¸ªå¹´çºªï¼Œå¾ˆå¤šäº‹æƒ…å°±å¾—æ‰¿æ‹…ã€‚</p>
<p>å¬èµ·æ¥å¾ˆæˆç†Ÿï¼Œå¾ˆè´Ÿè´£ä»»å¯¹å§ï¼Ÿä½†æˆ‘æœ€è¿‘æ„è¯†åˆ°ï¼Œå½“æˆ‘ä»¬è¯´å‡ºâ€œåˆ°äº†è¯¥â€¦â€¦çš„æ—¶å€™äº†â€è¿™å¥è¯æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å‘ç°â€”â€”</p>
<p>é‚£äº›çœ‹ä¼¼ç¨³å®šã€æ­£å¸¸çš„äººç”Ÿè½¨è¿¹ï¼Œå¾ˆå¤šæ—¶å€™å¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬çœŸçš„å‡†å¤‡å¥½äº†ï¼Œè€Œæ˜¯é‚£å¥—ç¤¾ä¼šé»˜è®¤çš„å‰§æœ¬åœ¨æ¨è¿›ã€‚</p>
<p>ç»“å©šã€ä¹°æˆ¿ã€ç”Ÿå­©å­ï¼Œæœ¬åº”æ˜¯æœ€ä¸ªä½“ã€æœ€ç§äººçš„é€‰æ‹©ï¼Œ</p>
<p>ä½†åœ¨ç°å®é‡Œï¼Œå¾€å¾€å˜æˆäº†â€œåˆ°äº†è¿™ä¸ªé˜¶æ®µä½ å°±è¯¥å®Œæˆçš„èŠ‚ç‚¹ä»»åŠ¡â€ã€‚</p>
<p>è€Œä¸”è¶Šæ˜¯äºŒä¸‰çº¿åŸå¸‚ï¼Œè¿™ç§ç”±â€œç¤¾ä¼šæœŸå¾…â€æ¨åŠ¨çš„äººç”ŸèŠ‚å¥ï¼Œè¡¨ç°å¾—è¶Šæ˜æ˜¾ã€‚</p>
<p>è·ƒå±‚æ€ç»´å¯ä»¥æé†’æˆ‘ä»¬çš„æ˜¯ï¼šä¸è¦åªç›¯ç€è§„åˆ™æœ¬èº«â€”â€”æ— è®ºæ˜¯èŒåœºè§„åˆ™ï¼Œè¿˜æ˜¯äººç”Ÿè§„åˆ™ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¯•ç€çœ‹æ¸…è§„åˆ™èƒŒåçš„çœŸå®åŠ¨æœºï¼š</p>
<p><strong>å®ƒçœŸçš„æ¥è‡ªä½ çš„é€‰æ‹©å—ï¼Ÿè¿˜æ˜¯æ¥è‡ªç»„ç»‡çš„ç„¦è™‘ã€ç¤¾ä¼šçš„è®¾å®šã€ä»–äººçš„æœŸå¾…ï¼Ÿ</strong></p>
<p>åªæœ‰çœ‹æ¸…è¿™ä¸€å±‚ï¼Œä½ æ‰ä¸æ˜¯è¢«è§„åˆ™æ¨ç€èµ°çš„äººï¼Œè€Œæ˜¯é‚£ä¸ªè‡³å°‘æœ‰æœºä¼šï¼Œåšä¸€ç‚¹â€œä¸»åŠ¨é€‰æ‹©â€çš„äººã€‚</p>
<h2 data-id="heading-3">ç¬¬ä¸‰å±‚ï¼šä¸è¦åªæ˜¯â€œåšâ€ï¼Œè¦å»â€œæ»¡è¶³çœŸæ­£çš„é‚£ä¸ªéœ€æ±‚â€</h2>
<p>å·¥ä½œå‰å‡ å¹´ï¼Œæˆ‘ä¹ æƒ¯æ€§åœ°æŠŠé¢†å¯¼å¸ƒç½®çš„ä»»åŠ¡ï¼Œå½“æˆâ€œç›®æ ‡æœ¬èº«â€ã€‚</p>
<p>æ¯”å¦‚åœ¨å…¬å¸é‡Œï¼Œé¢†å¯¼è¯´ï¼šâ€œè¿™ä¸ªç³»ç»Ÿä¸€å®šè¦æŒ‰æœŸä¸Šçº¿ã€‚â€</p>
<p>æˆ‘èµ·åˆç†è§£å¾ˆç®€å•æŒ‰æ—¶å¹²å®Œï¼Œéƒ¨ç½²ä¸Šå»ï¼Œåˆ«æ‰é“¾å­ï¼Œè¿™å°±ç®—å®Œæˆä»»åŠ¡å°±åƒå¼€å¤´æˆ‘è¯´åˆ°çš„ä»£ç è¿ç§»çš„å·¥ä½œã€‚</p>
<p>åæ¥æœ‰äº†ä¸€å®šå·¥ä½œç»éªŒï¼Œæˆ‘ä¼šè¯„ä¼°æŠ€æœ¯æ–¹æ¡ˆã€è¯„ä¼°å·¥ä½œé‡ã€‚è¯„ä¼°å®Œä¸€çœ‹æ—¶é—´æ ¹æœ¬ä¸å¤Ÿï¼Œç»™çš„æ—¶é—´æ ¹æœ¬å°±ä¸å¯èƒ½å®Œæˆï¼Œè§‰ç€é¢†å¯¼å¤–è¡ŒæŒ‡å¯¼å†…è¡Œã€‚</p>
<p>è·ƒå±‚æ€ç»´è¦æ±‚æˆ‘ä»¬å¤šé—®å‡ ä¸ªé—®é¢˜ï¼š</p>
<p>ä¸ºä»€ä¹ˆå¼ºè°ƒâ€œæŒ‰æœŸâ€ï¼Ÿä»–æ˜¯åœ¨æ‹…å¿ƒäº¤ä»˜èƒ½åŠ›å—ï¼Ÿè¿˜æ˜¯ä¸Šçº§å’Œä¸šåŠ¡æ–¹ç›¯å¾—ç´§ï¼Œå¯¼è‡´å‹åŠ›å¤§ï¼Ÿè¿™ä¸ªä¸Šçº¿å¯¹å…¬å¸æ¥è¯´ï¼Œç©¶ç«Ÿæ‰¿æ‹…ç€ä»€ä¹ˆæ„ä¹‰ï¼Ÿ</p>
<p>åæ¥æˆ‘æ…¢æ…¢å‘ç°ï¼Œå¾ˆå¤šè¦æ±‚çœŸæ­£å…³å¿ƒçš„ä¸æ˜¯â€œåŠŸèƒ½æ˜¯å¦ 100%å®Œç¾â€ï¼Œ</p>
<p>è€Œæ˜¯ï¼šè¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªèƒ½è¢«å±•ç¤ºçš„æˆæœï¼Ÿå“ªæ€•åªæ˜¯ä¸€ä¸ªdemoä¹Ÿå¯ä»¥ï¼Œåªè¦èƒ½å¤Ÿç¼“å’Œä¸šåŠ¡å…³ç³»ï¼Œè¯æ˜å›¢é˜Ÿå…·å¤‡ç¨³å®šçš„äº¤ä»˜èƒ½åŠ›å°±å¤Ÿäº†ã€‚</p>
<p>äºæ˜¯â€œä¸Šçº¿â€ä¸å†åªæ˜¯ä¸Šçº¿ï¼Œ</p>
<p>è€Œå˜æˆäº†ä¸€ä»¶å¸®é¢†å¯¼è·å¾—ç¡®å®šæ€§çš„äº‹æƒ…ã€‚</p>
<p>ç±»ä¼¼çš„é€»è¾‘ï¼Œåœ¨ç”Ÿæ´»ä¸­æ¯”æ¯”çš†æ˜¯ã€‚</p>
<p>æˆ‘å¾ˆæ—©ä¹‹å‰å°±å¬è¯´è¿‡ï¼Œç¾å›½åæ ¡åœ¨å½•å–å­¦ç”Ÿæ—¶ï¼Œé™¤äº†å­¦ç”Ÿçš„æˆç»©å¤–ï¼Œè¿˜ä¼šè€ƒè™‘å­¦ç”Ÿçš„ç»¼åˆç´ è´¨ï¼Œæœ‰äº›é«˜ç«¯çˆ±å¥½ï¼Œè¿˜ä¼šåŠ åˆ†ã€‚</p>
<p>æœ‰ä¸€æœ¬ç¾å›½çš„ä¹¦å«ã€Šè°èƒ½è¿›ï¼šå¤§å­¦å½•å–ä¸€å¹´å†…å¹•ã€‹ï¼Œä¹¦ä¸­æåˆ°ï¼Œæœ‰ä¸ƒä¸ªå› ç´ æ˜¯ä¸å­¦ç”Ÿæœ¬äººç´ è´¨æ— å…³çš„ï¼Œ åˆ†åˆ«æ˜¯ï¼šç§æ—ã€æ€§åˆ«ã€ä¸“ä¸šã€åœ°åŸŸã€ç»æµèƒ½åŠ›ã€æ ¡å‹å­å¥³ã€å­¦æ ¡å‘˜å·¥å­å¥³ã€‚</p>
<p>å°¤å…¶æ˜¯ç§æ—ï¼Œåœ¨å½•å–æ—¶ä¸€å®šè¦ä¿è¯ä¸€å®šæ¯”ä¾‹æ¥è‡ªå¼±åŠ¿ç§æ—çš„å­¦ç”Ÿï¼Œæ¯”å¦‚é»‘äººå’Œæ‹‰ä¸è£”ã€‚</p>
<p>å¦‚æœä½ æƒ³å»ç”³è¯·ç¾å›½åæ ¡ï¼Œ æˆ–è€…æ˜¯æƒ³è®©ä½ çš„å­©å­ç”³è¯·ç¾å›½åæ ¡ï¼Œç”¨ä¸­å›½é«˜è€ƒæ€ç»´ï¼Œæ‹¼å‘½åˆ·åˆ†ã€‚åæ¥äº†è§£åˆ°ï¼Œç¾å›½å¸¸é’è—¤å¤§å­¦è¿˜å¾ˆæ³¨é‡ä½“è‚²ã€è‰ºæœ¯ä»€ä¹ˆçš„ç»¼åˆæ–¹å¼ï¼Œç„¶åç¡¬ç€å¤´çš®è‹¦ç»ƒä¸€é¡¹æ‰è‰ºã€‚</p>
<p>å¯å½“ä½ æœ‰äº†è·ƒå±‚æ€ç»´ï¼Œä»å½•å–è€…çš„è§’åº¦è€ƒè™‘ç§æ—æ¯”ä¾‹çš„éœ€æ±‚æ—¶ã€‚å°±å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œæˆ‘ä»¬äº†è§£åˆ°çš„ä½“è‚²ã€è‰ºæœ¯è¿™äº›å½•å–æ¡ä»¶ï¼Œåªä¸è¿‡æ˜¯ä¸ºäº†ä¿è¯å½•å–ä¸€å®šæ¯”ä¾‹çš„ç²¾è‹±é˜¶çº§çš„å­¦ç”Ÿè€Œå·²ã€‚</p>
<p>ä½ åœ¨åˆ·â€œä¸ªäººèƒ½åŠ›â€ï¼Œé«˜æ ¡è®¾è®¡â€œå½•å–ç»“æ„â€ã€‚</p>
<h2 data-id="heading-4">å»ºç«‹è—è§†ç³»ç»Ÿçš„å‹‡æ°”</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œè·ƒå±‚æ€ç»´æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå…¶å®ä¸æ˜¯èªæ˜ã€ä¸æ˜¯åˆ†æèƒ½åŠ›ï¼Œè€Œæ˜¯â€”â€”</p>
<p>è¦æœ‰â€œè—è§†ç³»ç»Ÿâ€çš„å‹‡æ°”ã€‚</p>
<p>æœ€è¿‘æˆ‘ä»¬åœ¨æ¨è‡ªå·±ç ”å‘çš„AIç¼–ç å·¥å…·ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯å¾ˆå¤šå…¬å¸éƒ½åœ¨åšçš„äº‹æƒ…ã€‚</p>
<p>æˆ‘ä»¬æœ€æ–°çš„è€ƒæ ¸æ˜¯è€ƒæ ¸ä½¿ç”¨è‡ªç ”å·¥å…·çš„AIä½¿ç”¨ç‡ï¼Œ å’Œéœ€æ±‚æœ€ç»ˆçš„ä»£ç é‡‡çº³ç‡ï¼Œå¦‚æœä¸è¾¾æ ‡å°±æœ‰ä¸€å®šçš„å¤„ç½šã€‚</p>
<p>ä¸ºäº†åº”å¯¹æŒ‡æ ‡ï¼Œæˆ‘çœ‹åˆ°ä¸å°‘åŒäº‹ï¼Œä¸€æ¡æ¡éœ€æ±‚å»ç¡®è®¤è‡ªå·±çš„ä»£ç é‡‡çº³ç‡åˆ°åº•æœ‰æ²¡æœ‰è¾¾æ ‡ã€‚</p>
<p>AIç¼–ç ä¸€å®šæ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼Œæˆ‘ä¹Ÿæ˜ç™½å…¬å¸çš„åˆå¿ƒï¼Œæ˜¯æƒ³è®©å¤§å®¶å…»æˆç”¨AIç¼–ç çš„ä¹ æƒ¯ã€‚</p>
<p>åªè¦æˆ‘ä»¬ç¨å¾®è¿ç”¨ä¸€ä¸‹è·ƒå±‚æ€ç»´ï¼Œå°±ä¼šå‘ç°è§„åˆ™å’Œç°å®çš„é”™ä½ï¼š</p>
<p>AIç¼–ç ï¼Œæ˜¯ä¸ºäº†è®©ç ”å‘èŠ‚çœæ—¶é—´ï¼Œç»“æœç°åœ¨ï¼Œç ”å‘åè€Œè¦èŠ±é¢å¤–æ—¶é—´å»è¯æ˜â€œæˆ‘ç¡®å®åœ¨ç”¨ AIâ€ã€‚</p>
<p>ä¸ºäº†è¯æ˜æ•ˆç‡ï¼Œåè€Œåˆ¶é€ äº†æ–°çš„ä½æ•ˆã€‚</p>
<p>ç ”å‘çš„æ—¶é—´ï¼Œéš¾å€’ä¸åº”è¯¥å»æ¢ç´¢AIçš„å·¥å…·ä½¿ç”¨ï¼Œå»ä¼˜åŒ–è‡ªå·±çš„å·¥ä½œæµç¨‹ï¼Œä¼˜åŒ–äº§å“çš„ä¸è¶³å—ï¼Ÿ</p>
<p>æ‰€ä»¥åæ¥æˆ‘åšäº†ä¸€ä¸ªé€‰æ‹©ï¼šä¸å†èŠ±é¢å¤–æ—¶é—´å»æ ¸å¯¹é‚£äº›æ•°å­—ï¼Œè€Œæ˜¯æŠŠè¿™éƒ¨åˆ†æ—¶é—´ï¼Œå…¨éƒ¨äº¤è¿˜ç»™â€œçœŸæ­£çš„ä»·å€¼åˆ›é€ â€ã€‚</p>
<p>é‚£ä½ è¯´å¦‚æœæˆ‘çš„è€ƒæ ¸ä¸è¾¾æ ‡æ€ä¹ˆåŠï¼Ÿè¿™çš„ç¡®æ˜¯ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸è¿‡æˆ‘æƒ³ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ç»ˆä¼šå’Œä¸–ç•Œçš„è§„åˆ™å‘ç”Ÿå†²çªã€‚å¦‚æœä½ æŠŠåˆ«äººå®šçš„è§„åˆ™å½“æˆå¤©å‘½ï¼Œä½ å°±æ°¸è¿œåªèƒ½åœ¨ç°æœ‰çš„è§„åˆ™æ¡†æ¶ä¸‹å¥‹æ–—ã€‚</p>
<p>å¦‚æœä¸€ä¸ªäººçœŸçš„åœ¨æ·±åº¦ä½¿ç”¨ AIï¼Œå·²ç»èå…¥äº†å·¥ä½œèŠ‚å¥ï¼Œè®©æ•ˆç‡ã€è´¨é‡ã€åˆ›æ–°èƒ½åŠ›éƒ½æ˜æ˜¾æå‡ï¼Œé‚£ä¹ˆâ€”â€”</p>
<p>é‚£äº›ç³»ç»Ÿå…³æ³¨çš„â€œä½¿ç”¨æ¬¡æ•°â€â€œé‡‡çº³æ¯”ä¾‹â€çš„æ•°æ®ï¼Œå…¶å®å·²ç»æ²¡æœ‰é‚£ä¹ˆé‡è¦äº†ã€‚</p>
<p>æˆ‘å¹¶ä¸æ˜¯é¼“åŠ±åå›ï¼Œè€Œæ˜¯é¼“åŠ±æ¸…é†’ä¸é€‰æ‹©ã€‚å› ä¸ºæœ‰äº›è§„åˆ™å€¼å¾—éµå®ˆï¼Œæœ‰äº›å€¼å¾—ç†è§£ï¼Œæœ‰äº›åˆ™éœ€è¦è¶…è¶Šã€‚</p>
<p>è¿™æ˜¯ä¸œä¸œæ‹¿é“çš„ç¬¬95ç¯‡åŸåˆ›æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—]]></title>    <link>https://juejin.cn/post/7590283328177651755</link>    <guid>https://juejin.cn/post/7590283328177651755</guid>    <pubDate>2026-01-04T03:28:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590283328177651755" data-draft-id="7590712589296517126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,Swift,Apple"/> <meta itemprop="datePublished" content="2026-01-04T03:28:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 ç å†œæ¼«æ¸¸ï¼šAI è¾…åŠ© Swift ä»£ç ä¿®å¤æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:28:10.000Z" title="Sun Jan 04 2026 03:28:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91494cb60e094fb0b8e43b0efbcd17f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=3D00v%2BxegiM09hGCe3srSOLnED0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">â˜”ï¸ å¼•å­</h2>
<p>è¿™æ˜¯ä¸€ä¸ªé›¨å¤œï¼Œéœ“è™¹ç¯çš„å…‰æ™•åœ¨è„å…®å…®çš„çª—ç»ç’ƒä¸Šæ™•å¼€ï¼Œåƒæäº†é‚£ä¸ªè¯¥æ­»çš„ <strong>View Hierarchy</strong> æ¸²æŸ“ä¸å‡ºé«˜æ–¯æ¨¡ç³Šçš„æ ·å­ã€‚</p>
<p>åœ¨æ–°ä¸Šæµ·çš„åœ°ä¸‹é¿éš¾æ‰€é‡Œï¼Œè€ç‹ï¼ˆOld Wangï¼‰åå‡ºä¸€å£åˆæˆçƒŸé›¾ï¼Œç›¯ç€å…¨æ¯å±å¹•ä¸Šä¸æ–­æŠ¥é”™çš„ç»ˆç«¯ã€‚ä½œä¸ºäººç±»åæŠ—å†›é‡Œä»…å­˜çš„å‡ ä½ã€Œ<strong>ç²¾é€š Apple è½¯ä»¶å¼€å‘</strong>ã€çš„å·¥ç¨‹å¸ˆä¹‹ä¸€ï¼Œä»–è´Ÿè´£ç»™ AI éœ¸ä¸»ã€Œæ™ºæ ¸ï¼ˆThe Coreï¼‰ã€ç”Ÿæˆçš„åƒåœ¾ä»£ç æ“¦å±è‚¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c923532a12a649b994fd54d1fcc2314d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=F60v8pwNHupvNHczW7e5z%2FoErbQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é—¨è¢«æ’å¼€äº†ï¼Œå¹´è½»çš„å¥³é»‘å®¢è‰äºšï¼ˆLiyaï¼‰æ°”å–˜åååœ°å†²è¿›æ¥ï¼Œæ‰‹é‡Œæ”¥ç€ä¸€å—å­˜æ»¡ä»£ç çš„ç¥ç»æ™¶ç‰‡ã€‚â€œè€ç‹ï¼æ•‘å‘½ï¼â€˜æ™ºæ ¸â€™ç”Ÿæˆçš„ SwiftUI ä»£ç åœ¨ iOS 26 ä¸Šåˆå´©äº†ï¼åæŠ—å†›çš„é€šè®¯ App æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼â€</p>
<p>è€ç‹å†·ç¬‘ä¸€å£°ï¼Œæç­äº†çƒŸå¤´ã€‚â€œæˆ‘å°±çŸ¥é“ã€‚é‚£äº›è¢«æ§ä¸Šç¥å›çš„ LLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰ï¼Œä¸ç®¡æ˜¯ Claudeã€Codex è¿˜æ˜¯ Geminiï¼Œå†™èµ· Python æ¥æ˜¯æŠŠå¥½æ‰‹ï¼Œä½†ä¸€ç¢°åˆ° Swiftï¼Œå°±åƒæ˜¯ç©¿ç€æºœå†°é‹èµ°é’¢ä¸â€”â€”<strong>æ­¥æ­¥æƒŠå¿ƒ</strong>ã€‚â€</p>
<p><strong>åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>â˜”ï¸ å¼•å­
<ul>
<li>ğŸ¤– ä¸ºä»€ä¹ˆ AI æ€»æ˜¯åœ¨ Swift ä¸Šã€Œé¬¼æ‰“å¢™ã€ï¼Ÿ</li>
<li>ğŸ¨ 1. åˆ«å†ç”¨è¿‡æ—¶çš„è°ƒè‰²ç›˜äº†</li>
<li>ğŸ“ 2. åªæœ‰åˆ‡æ‰æ£±è§’ï¼Œæ‰èƒ½åœ†æ»‘å¤„ä¸–</li>
<li>ğŸ”„ 3. ç›‘æ§å˜åŒ–ï¼Œä¸è¦ç¼ºæ–¤å°‘ä¸¤</li>
<li>ğŸ“‘ 4. æ ‡ç­¾é¡µçš„ã€ŒæŒ‡é¹¿ä¸ºé©¬ã€</li>
<li>ğŸ‘† 5. åˆ«ä»€ä¹ˆéƒ½ç”¨ã€Œæˆ³ä¸€æˆ³ã€</li>
<li>ğŸ§  6. æ‰”æ‰æ—§æ—¶ä»£çš„è§‚å¯Ÿè€…</li>
<li>â˜ï¸ 7. æ•°æ®çš„é™·é˜±</li>
<li>ğŸ“‰ 8. æ€§èƒ½çš„éšå½¢æ€æ‰‹</li>
<li>ğŸ”  9. å­—ä½“æ’å°çš„æ³•è¥¿æ–¯</li>
<li>ğŸ”— 10. å¯¼èˆªçš„æ­»èƒ¡åŒ</li>
<li>ğŸ·ï¸ 11. æŒ‰é’®çš„è‡ªæˆ‘ä¿®å…»</li>
<li>ğŸ”¢ 12. æ•°ç»„çš„ç”»è›‡æ·»è¶³</li>
<li>ğŸ“‚ 13. å¯»æ‰¾æ–‡ä»¶çš„æ·å¾„</li>
<li>ğŸ§­ 14. å¯¼èˆªæ ˆçš„æ”¹æœæ¢ä»£</li>
<li>ğŸ’¤ 15. ç¡ä¸ªå¥½è§‰</li>
<li>ğŸ§® 16. æ ¼å¼åŒ–çš„è‰ºæœ¯</li>
<li>ğŸ—ï¸ 17. ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œ</li>
<li>ğŸ–¼ï¸ 18. æ¸²æŸ“çš„æ–°æ¬¢</li>
<li>ğŸ‹ï¸ 19. å­—é‡çš„è¿·æƒ‘è¡Œä¸º</li>
<li>ğŸš¦ 20. å¹¶å‘çš„ä¸‡é‡‘æ²¹ï¼ˆä¹Ÿæ˜¯æ¯’è¯ï¼‰</li>
<li>ğŸ­ 21. ä¸»è§’å…‰ç¯æ˜¯é»˜è®¤çš„</li>
<li>ğŸ“ 22. å‡ ä½•çš„è¯…å’’</li>
</ul>
</li>
<li>å°¾å£°ï¼šæ•°å­—å¹½çµçš„ä½è¯­</li>
</ul>
<p>ä»–æŠŠæ™¶ç‰‡æ’å…¥æ¥å£ï¼Œå…¨æ¯æŠ•å½±åœ¨ç©ºä¸­å±•å¼€ã€‚â€œåä¸‹ï¼Œè‰äºšã€‚ä»Šå¤©æˆ‘å°±ç»™ä½ ä¸Šä¸€è¯¾ï¼Œè®©ä½ çœ‹çœ‹æ‰€è°“çš„â€˜äººå·¥æ™ºèƒ½â€™æ˜¯å¦‚ä½•åœ¨ Swift çš„<strong>å¹¶å‘åœ°ç‹±</strong>å’Œ<strong>å¿«é€Ÿè¿­ä»£</strong>ä¸­ç¿»è½¦çš„ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0029fae5953f4517a41380b8e5548408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=NKk%2F45n56LYdZN80tg3Lpp5xfSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ¤– ä¸ºä»€ä¹ˆ AI æ€»æ˜¯åœ¨ Swift ä¸Šã€Œé¬¼æ‰“å¢™ã€ï¼Ÿ</h2>
<p>è€ç‹æŒ‡ç€å±å¹•ä¸Šä¹±æˆä¸€é”…ç²¥çš„ä»£ç è¯´é“ï¼šâ€œè¿™ä¸æ€ªå®ƒä»¬ã€‚Swift å’Œ SwiftUI çš„è¿›åŒ–é€Ÿåº¦æ¯”å˜å¼‚ç—…æ¯’è¿˜å¿«ã€‚å†åŠ ä¸Š Python å’Œ JavaScript çš„è®­ç»ƒæ•°æ®æµ©å¦‚çƒŸæµ·ï¼Œè€Œ Swift çš„é«˜è´¨é‡è¯­æ–™ç›¸å¯¹è¾ƒå°‘ï¼ŒAI å¸¸å¸¸ä¼šäº§ç”Ÿå¹»è§‰ã€‚æ›´åˆ«æ Swift çš„ <strong>Concurrencyï¼ˆå¹¶å‘ï¼‰</strong> æ¨¡å‹ï¼Œè¿äººç±»ä¸“å®¶éƒ½å¤´ç§ƒï¼Œæ›´åˆ«è¯´è¿™äº›åªä¼šæ¦‚ç‡é¢„æµ‹çš„å‚»å¤§ä¸ªäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/362076e2e3474f4cbac2349a1a464850~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=odC67V8dogERJB6EQNsVGPrn4G0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå¬ç€ï¼Œè‰äºšï¼Œâ€è€ç‹ä¸¥è‚ƒåœ°è¯´ï¼Œâ€œè¦æƒ³åœ¨ iOS 18 ç”šè‡³æ›´é«˜ç‰ˆæœ¬çš„åºŸåœŸä¸Šç”Ÿå­˜ï¼Œä½ å¿…é¡»å­¦ä¼šè¯†åˆ«è¿™äº›â€˜æ™ºéšœæ“ä½œâ€™ã€‚æˆ‘ä»¬ä¸è°ˆå“²å­¦ï¼Œåªè°ˆç”Ÿå­˜ã€‚ä»¥ä¸‹å°±æ˜¯æˆ‘ä»æ­»äººå †é‡Œæ€»ç»“å‡ºæ¥çš„<strong>ä»£ç æ’é›·æŒ‡å—</strong>ã€‚â€</p>
<hr/>
<h3 data-id="heading-2">ğŸ¨ 1. åˆ«å†ç”¨è¿‡æ—¶çš„è°ƒè‰²ç›˜äº†</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>foregroundColor()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>foregroundStyle()</code></p>
<p>â€œçœ‹è¿™é‡Œï¼Œâ€è€ç‹æŒ‡ç€ä¸€è¡Œä»£ç ï¼Œâ€œAI è¿˜åœ¨ç”¨ <code>foregroundColor()</code>ã€‚è¿™å°±åƒæ˜¯è¿˜åœ¨ç”¨é»‘ç«è¯åšç‚¸å¼¹ã€‚è™½ç„¶å­—æ•°ä¸€æ ·ï¼Œä½†å‰è€…å·²ç»æ˜¯ä¸ªè¡Œå°†å°±æœ¨çš„<strong>Deprecated API</strong>ã€‚æŠŠå®ƒæ¢æˆ <strong><code>foregroundStyle()</code></strong>ï¼åè€…æ‰æ˜¯æœªæ¥ï¼Œå®ƒæ”¯æŒæ¸å˜ï¼ˆGradientsï¼‰ç­‰é«˜çº§ç‰¹æ€§ã€‚åˆ«è®©ä½ çš„ UI çœ‹èµ·æ¥åƒä¸Šä¸ªä¸–çºªçš„äº§ç‰©ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d95496384a78433d87abb67b00f0d7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=39luGjfrfKdlRmBh6zO2nW466ps%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ“ 2. åªæœ‰åˆ‡æ‰æ£±è§’ï¼Œæ‰èƒ½åœ†æ»‘å¤„ä¸–</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>cornerRadius()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>clipShape(.rect(cornerRadius:))</code></p>
<p>â€œåˆæ˜¯ä¸€ä¸ªè€å¤è‘£ã€‚<code>cornerRadius()</code> æ—©å°±è¯¥è¿›åšç‰©é¦†äº†ã€‚ç°åœ¨çš„æ ‡å‡†æ˜¯ä½¿ç”¨ <strong><code>clipShape(.rect(cornerRadius:))</code></strong>ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå‰è€…æ˜¯å‚»ç“œå¼åœ†è§’ï¼Œåè€…èƒ½è®©ä½ é€šè¿‡ <code>uneven rounded rectangles</code>ï¼ˆä¸è§„åˆ™åœ†è§’çŸ©å½¢ï¼‰ç©å‡ºèŠ±æ¥ã€‚åœ¨è¿™ä¸ªçœ‹è„¸çš„ä¸–ç•Œï¼Œç»†èŠ‚å†³å®šæˆè´¥ã€‚â€</p>
<h3 data-id="heading-4">ğŸ”„ 3. ç›‘æ§å˜åŒ–ï¼Œä¸è¦ç¼ºæ–¤å°‘ä¸¤</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>onChange(of: value) { ... }</code> (å•å‚æ•°ç‰ˆæœ¬)
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>onChange(of: value) { oldValue, newValue in ... }</code></p>
<p>è€ç‹çš±èµ·çœ‰å¤´ï¼šâ€œè¿™ä¸ª <code>onChange</code> ä¿®æ”¹å™¨ï¼ŒAI ç»å¸¸åªç»™ä¸€ä¸ªå‚æ•°é—­åŒ…ã€‚è¿™åœ¨æ—§ç‰ˆæœ¬æ˜¯â€˜ä¸å®‰å…¨â€™çš„ï¼Œç°åœ¨å·²ç»è¢«æ ‡è®°ä¸ºå¼ƒç”¨ã€‚è¦ä¹ˆä¸ä¼ å‚ï¼Œè¦ä¹ˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆæ–°æ—§å€¼ï¼‰ã€‚åˆ«æå¾—ä¸æ¸…ä¸æ¥šçš„ï¼Œå®¹æ˜“å‡ºäººå‘½ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ad45e7dc39b4f9b8b7ed19494250721~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=iO0nOgAWvuSSI3Q1Gyyc8XA%2BULQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ğŸ“‘ 4. æ ‡ç­¾é¡µçš„ã€ŒæŒ‡é¹¿ä¸ºé©¬ã€</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>tabItem()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ–°çš„ <strong>Tab API</strong></p>
<p>â€œå¦‚æœçœ‹åˆ°è€æ—§çš„ <code>tabItem()</code>ï¼Œç«‹åˆ»æŠŠå®ƒæ¢æˆæ–°çš„ <strong>Tab API</strong>ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸ºäº†æ‰€è°“çš„â€˜ç±»å‹å®‰å…¨ï¼ˆType-safeï¼‰â€™ï¼Œæ›´æ˜¯ä¸ºäº†é€‚é…æœªæ¥â€”â€”æ¯”å¦‚é‚£ä¸ªä¼ é—»ä¸­çš„ iOS 26 æœç´¢æ ‡ç­¾é¡µè®¾è®¡ã€‚æˆ‘ä»¬è¦é¢†å…ˆâ€˜æ™ºæ ¸â€™ä¸€æ­¥ï¼Œæ‡‚å—ï¼Ÿâ€</p>
<h3 data-id="heading-6">ğŸ‘† 5. åˆ«ä»€ä¹ˆéƒ½ç”¨ã€Œæˆ³ä¸€æˆ³ã€</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> æ»¥ç”¨ <code>onTapGesture()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> ä½¿ç”¨çœŸæ­£çš„ <code>Button</code></p>
<p>â€œAI ä¼¼ä¹è§‰å¾—ä¸‡ç‰©çš†å¯ <code>onTapGesture()</code>ã€‚å¤§é”™ç‰¹é”™ï¼é™¤éä½ éœ€è¦çŸ¥é“ç‚¹å‡»çš„å…·ä½“åæ ‡æˆ–è€…ç‚¹å‡»æ¬¡æ•°ï¼Œå¦åˆ™ç»Ÿç»Ÿç»™æˆ‘æ¢æˆæ ‡å‡†çš„ <strong><code>Button</code></strong>ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†è®© <strong>VoiceOver</strong>ï¼ˆæ—ç™½ï¼‰ç”¨æˆ·èƒ½æ´»ä¸‹å»ï¼Œä¹Ÿæ˜¯ä¸ºäº†è®© visionOS ä¸Šçš„çœ¼çƒè¿½è¸ªèƒ½æ­£å¸¸å·¥ä½œã€‚åˆ«åšä¸€ä¸ªå¯¹æ®‹éšœäººå£«ä¸å‹å¥½çš„æ··è›‹ã€‚â€</p>
<h3 data-id="heading-7">ğŸ§  6. æ‰”æ‰æ—§æ—¶ä»£çš„è§‚å¯Ÿè€…</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>ObservableObject</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>@Observable</code> å®</p>
<p>â€œè‰äºšï¼Œçœ‹ç€æˆ‘çš„çœ¼ç›ã€‚é™¤éä½ å¯¹ <strong>Combine</strong> æ¡†æ¶æœ‰ä»€ä¹ˆç‰¹æ®Šçš„å„ç§ç™–å¥½ï¼Œå¦åˆ™æŠŠæ‰€æœ‰çš„ <code>ObservableObject</code> éƒ½æ‰”è¿›ç„šåŒ–ç‚‰ï¼Œæ¢æˆ <strong><code>@Observable</code></strong> å®ã€‚ä»£ç æ›´å°‘ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè¿™å°±å¥½æ¯”ä»ç‡ƒæ²¹è½¦æ¢æˆäº†æ ¸åŠ¨åŠ›æˆ˜è½¦ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e99a3409524f679105a722c29c330c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=HOdeueYmtbn3B5Gn8jwldYO3zdI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-8">â˜ï¸ 7. æ•°æ®çš„é™·é˜±</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> SwiftData æ¨¡å‹ä¸­çš„ <code>@Attribute(.unique)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> å°å¿ƒä½¿ç”¨ï¼</p>
<p>â€œè¿™æ˜¯ä¸€ä¸ªéšè”½çš„é›·åŒºã€‚å¦‚æœåœ¨ SwiftData æ¨¡å‹å®šä¹‰é‡Œçœ‹åˆ° <strong><code>@Attribute(.unique)</code></strong>ï¼Œä½ è¦è­¦æƒ•â€”â€”è¿™ç©æ„å„¿è·Ÿ <strong>CloudKit</strong> å…«å­—ä¸åˆã€‚åˆ«åˆ°æ—¶å€™æ•°æ®åŒæ­¥å¤±è´¥ï¼Œä½ è¿˜åœ¨é‚£å„¿å‚»ä¹ä¹åœ°æŸ¥ç½‘ç»œè¿æ¥ã€‚â€</p>
<h3 data-id="heading-9">ğŸ“‰ 8. æ€§èƒ½çš„éšå½¢æ€æ‰‹</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å°†è§†å›¾æ‹†åˆ†ä¸ºã€Œè®¡ç®—å±æ€§ï¼ˆComputed Propertiesï¼‰ã€
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ SwiftUI <strong>Views</strong></p>
<p>â€œä¸ºäº†å›¾çœäº‹ï¼ŒAI å–œæ¬¢æŠŠå¤§æ®µçš„ UI ä»£ç å¡è¿›è®¡ç®—å±æ€§é‡Œã€‚è¿™æ˜¯<strong>å°¸ä½ç´ é¤</strong>ï¼å°¤å…¶æ˜¯åœ¨ä½¿ç”¨ <code>@Observable</code> æ—¶ï¼Œè®¡ç®—å±æ€§æ— æ³•äº«å—æ™ºèƒ½è§†å›¾å¤±æ•ˆï¼ˆView Invalidationï¼‰çš„ä¼˜åŒ–ã€‚æŠŠå®ƒä»¬æ‹†åˆ†æˆç‹¬ç«‹çš„ SwiftUI ç»“æ„ä½“ï¼è™½ç„¶éº»çƒ¦ç‚¹ï¼Œä½†ä¸ºäº†é‚£ 60fps çš„æµç•…åº¦ï¼Œå€¼å¾—ã€‚â€</p>
<h3 data-id="heading-10">ğŸ”  9. å­—ä½“æ’å°çš„æ³•è¥¿æ–¯</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>.font(.system(size: 14))</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <strong>Dynamic Type</strong> (åŠ¨æ€å­—ä½“)</p>
<p>â€œæœ‰äº› LLMï¼ˆå°¤å…¶æ˜¯é‚£ä¸ªå« Claude çš„å®¶ä¼™ï¼‰ç®€ç›´å°±æ˜¯å­—ä½“ç•Œçš„ç‹¬è£è€…ï¼Œæ€»å–œæ¬¢å¼ºè¡ŒæŒ‡å®š <code>.font(.system(size: ...))</code>ã€‚ç»™æˆ‘æœå‡ºè¿™äº›æ¯’ç˜¤ï¼Œå…¨éƒ¨æ¢æˆ <strong>Dynamic Type</strong>ã€‚å¦‚æœæ˜¯ iOS 26+ï¼Œä½ å¯ä»¥ç”¨ <code>.font(.body.scaled(by: 1.5))</code>ã€‚è®°ä½ï¼Œç”¨æˆ·å¯èƒ½çœ¼èŠ±ï¼Œåˆ«è®©ä»–ä»¬çœ‹çäº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3dc968c64580447185c00e2d4aa1ddf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=wKAUg%2FLaVVhBE7dCrvIORkPs4kg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">ğŸ”— 10. å¯¼èˆªçš„æ­»èƒ¡åŒ</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> åˆ—è¡¨é‡Œçš„å†…è” <code>NavigationLink</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>navigationDestination(for:)</code></p>
<p>â€œåœ¨ List é‡Œç›´æ¥å†™ <code>NavigationLink</code> çš„ç›®æ ‡åœ°å€ï¼Ÿé‚£æ˜¯åŸå§‹äººçš„åšæ³•ã€‚ç°åœ¨çš„æ–‡æ˜äººä½¿ç”¨ <strong><code>navigationDestination(for:)</code></strong>ã€‚è§£è€¦ï¼è§£è€¦æ‡‚ä¸æ‡‚ï¼Ÿåˆ«æŠŠåœ°å›¾ç”»åœ¨è„šåº•æ¿ä¸Šã€‚â€</p>
<hr/>
<p>è€ç‹å–äº†ä¸€å£å·²ç»å‡‰é€çš„å’–å•¡ï¼Œç»§ç»­åœ¨è¿™å †èµ›åšåƒåœ¾ä¸­æŒ–æ˜ã€‚</p>
<h3 data-id="heading-12">ğŸ·ï¸ 11. æŒ‰é’®çš„è‡ªæˆ‘ä¿®å…»</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> ç”¨ <code>Label</code> åšæŒ‰é’®å†…å®¹
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> å†…è” API <code>Button("Title", systemImage: "plus", action: ...)</code></p>
<p>â€œæœŸå¾…çœ‹åˆ° AI ç”¨ <code>Label</code> ç”šè‡³çº¯ <code>Image</code> æ¥åšæŒ‰é’®å†…å®¹å§â€”â€”è¿™å¯¹ VoiceOver ç”¨æˆ·æ¥è¯´ç®€ç›´æ˜¯ç¾éš¾ã€‚ç”¨æ–°çš„å†…è” APIï¼š<strong><code>Button("Tap me", systemImage: "plus", action: whatever)</code></strong>ã€‚ç®€å•ï¼Œç²—æš´ï¼Œæœ‰æ•ˆã€‚â€</p>
<h3 data-id="heading-13">ğŸ”¢ 12. æ•°ç»„çš„ç”»è›‡æ·»è¶³</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>ForEach(Array(x.enumerated()), ...)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>ForEach(x.enumerated(), ...)</code></p>
<p>â€œçœ‹åˆ°è¿™ä¸ª <code>Array(x.enumerated())</code> äº†å—ï¼Ÿè¿™å°±æ˜¯è„±è£¤å­æ”¾å±ã€‚ç›´æ¥ç”¨ <strong><code>ForEach(x.enumerated(), ...)</code></strong> å°±è¡Œäº†ã€‚çœç‚¹å†…å­˜å§ï¼Œè™½ç„¶ç°åœ¨çš„å†…å­˜ä¸å€¼é’±ï¼Œä½†ç¨‹åºå‘˜çš„å°Šä¸¥å€¼é’±ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31650a28904b47d696498ab9a61585f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=Jnma3Jpn0NN3PbH2qUvHwjJoHyc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-14">ğŸ“‚ 13. å¯»æ‰¾æ–‡ä»¶çš„æ·å¾„</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å†—é•¿çš„æ–‡ä»¶è·¯å¾„æŸ¥æ‰¾ä»£ç 
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>URL.documentsDirectory</code></p>
<p>â€œé‚£äº›åˆè‡­åˆé•¿çš„æŸ¥æ‰¾ Document ç›®å½•çš„ä»£ç ï¼Œç»Ÿç»Ÿåˆ æ‰ã€‚æ¢æˆ <strong><code>URL.documentsDirectory</code></strong>ã€‚ä¸€è¡Œä»£ç èƒ½è§£å†³çš„äº‹ï¼Œç»ä¸å†™åè¡Œã€‚â€</p>
<h3 data-id="heading-15">ğŸ§­ 14. å¯¼èˆªæ ˆçš„æ”¹æœæ¢ä»£</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>NavigationView</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>NavigationStack</code></p>
<p>â€œ<code>NavigationView</code> å·²ç»æ­»äº†ï¼Œæœ‰äº‹çƒ§çº¸ã€‚é™¤éä½ è¦æ”¯æŒ iOS 15 é‚£ä¸ªä¸Šå¤ç‰ˆæœ¬ï¼Œå¦åˆ™å…¨éƒ¨æ¢æˆ <strong><code>NavigationStack</code></strong>ã€‚â€</p>
<h3 data-id="heading-16">ğŸ’¤ 15. ç¡ä¸ªå¥½è§‰</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>Task.sleep(nanoseconds:)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>Task.sleep(for: .seconds(1))</code></p>
<p>â€œâ€˜æ™ºæ ¸â€™ ä¼¼ä¹å¾ˆå–œæ¬¢çº³ç§’ï¼Œå¯èƒ½å®ƒè§‰å¾—è‡ªå·±ç®—å¾—å¿«ã€‚ä½†ä½ è¦ç”¨ <strong><code>Task.sleep(for:)</code></strong>ï¼Œé…åˆ <code>.seconds(1)</code> è¿™ç§äººç±»èƒ½è¯»æ‡‚çš„å•ä½ã€‚åˆ«å†åƒä¸ªåƒµå°¸ä¸€æ ·æ•°çº³ç§’äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/114948205e434dfa8db76273b5378d44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=xTAcskaSAdfJJUOzCYObV3w%2B%2FtE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">ğŸ§® 16. æ ¼å¼åŒ–çš„è‰ºæœ¯</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> C é£æ ¼æ ¼å¼åŒ– <code>String(format: "%.2f", ...)</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> Swift åŸç”Ÿæ ¼å¼åŒ– <code>.formatted()</code></p>
<p>â€œæˆ‘çŸ¥é“ C é£æ ¼çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–å¾ˆç»å…¸ï¼Œä½†å®ƒä¸å®‰å…¨ã€‚æŠŠå®ƒæ¢æˆ Swift åŸç”Ÿçš„ <strong><code>Text(abs(change), format: .number.precision(.fractionLength(2)))</code></strong>ã€‚è™½ç„¶å†™èµ·æ¥é•¿ä¸€ç‚¹ï¼Œä½†å®ƒåƒç©¿äº†é˜²å¼¹è¡£ä¸€æ ·å®‰å…¨ã€‚â€</p>
<h3 data-id="heading-18">ğŸ—ï¸ 17. ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œ</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> å•ä¸ªæ–‡ä»¶å¡å…¥å¤§é‡ç±»å‹
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> æ‹†åˆ†æ–‡ä»¶</p>
<p>â€œAI å–œæ¬¢æŠŠå‡ åä¸ª struct å’Œ class å¡è¿›ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ç®€ç›´æ˜¯<strong>ç¼–è¯‘æ—¶é—´æ¯ç­è€…</strong>ã€‚æ‹†å¼€å®ƒä»¬ï¼é™¤éä½ æƒ³åœ¨ç¼–è¯‘çš„æ—¶å€™æœ‰æ—¶é—´å»ç…®ä¸ªæ»¡æ±‰å…¨å¸­ã€‚â€</p>
<h3 data-id="heading-19">ğŸ–¼ï¸ 18. æ¸²æŸ“çš„æ–°æ¬¢</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>UIGraphicsImageRenderer</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>ImageRenderer</code></p>
<p>â€œå¦‚æœä½ åœ¨æ¸²æŸ“ SwiftUI è§†å›¾ï¼Œåˆ«å†ç”¨ UIKit æ—¶ä»£çš„ <code>UIGraphicsImageRenderer</code> äº†ã€‚æ‹¥æŠ± <strong><code>ImageRenderer</code></strong> å§ï¼Œè¿™æ˜¯å®ƒçš„ä¸»åœºã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a35e5cae7643b89f45c75fdb66339e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=4QK9sEzKDSuV05uIzEb11NeE98w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-20">ğŸ‹ï¸ 19. å­—é‡çš„è¿·æƒ‘è¡Œä¸º</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> æ»¥ç”¨ <code>fontWeight()</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> åŒºåˆ† <code>bold()</code> å’Œ <code>fontWeight(.bold)</code></p>
<p>â€œä¸‰å¤§ AI å·¨å¤´éƒ½å–œæ¬¢æ»¥ç”¨ <code>fontWeight()</code>ã€‚è®°ä½ï¼Œ<code>fontWeight(.bold)</code> å’Œ <code>bold()</code> æ¸²æŸ“å‡ºæ¥çš„ç»“æœæœªå¿…ä¸€æ ·ã€‚è¿™å°±åƒâ€˜å¾®èƒ–â€™å’Œâ€˜å£®å®â€™çš„åŒºåˆ«ï¼Œå¾®å¦™ä½†é‡è¦ã€‚â€</p>
<h3 data-id="heading-21">ğŸš¦ 20. å¹¶å‘çš„ä¸‡é‡‘æ²¹ï¼ˆä¹Ÿæ˜¯æ¯’è¯ï¼‰</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>DispatchQueue.main.async</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> ç°ä»£å¹¶å‘æ¨¡å‹</p>
<p>â€œä¸€æ—¦ AI é‡åˆ°å¹¶å‘é—®é¢˜ï¼Œå®ƒå°±ä¼šåƒå—æƒŠçš„é¸µé¸Ÿä¸€æ ·æŠŠå¤´åŸ‹è¿› <strong><code>DispatchQueue.main.async</code></strong> é‡Œã€‚è¿™æ˜¯ä¸å¯åŸè°…çš„æ‡’æƒ°ï¼é‚£æ˜¯æ—§æ—¶ä»£çš„åˆ›å¯è´´ï¼Œç°åœ¨çš„æˆ‘ä»¬æœ‰æ›´ä¼˜é›…çš„ Actor æ¨¡å‹ã€‚â€</p>
<h3 data-id="heading-22">ğŸ­ 21. ä¸»è§’å…‰ç¯æ˜¯é»˜è®¤çš„</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> åˆ°å¤„åŠ  <code>@MainActor</code>
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> é»˜è®¤å¼€å¯</p>
<p>â€œå¦‚æœä½ åœ¨å†™æ–° Appï¼ŒMain Actor éš”ç¦»é€šå¸¸æ˜¯é»˜è®¤å¼€å¯çš„ã€‚ä¸ç”¨åƒè´´ç¬¦å’’ä¸€æ ·åˆ°å¤„è´´ <strong><code>@MainActor</code></strong>ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a49b0e71c80b40fda35c78625af9a159~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=Vwh8kzNdqsxnn7xDmC7n%2BCMTbmA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-23">ğŸ“ 22. å‡ ä½•çš„è¯…å’’</h3>
<p><strong>ğŸ’€ AI çš„çƒ‚ä»£ç ï¼š</strong> <code>GeometryReader</code> + å›ºå®š Frame
<strong>âœ¨ è€ç‹çš„ä¿®æ­£ï¼š</strong> <code>visualEffect()</code> æˆ– <code>containerRelativeFrame()</code></p>
<p>â€œæœ€åï¼Œä¹Ÿæ˜¯æœ€å¯æ€•çš„â€”â€”<strong><code>GeometryReader</code></strong>ã€‚å¤©å“ªï¼ŒAI å¯¹è¿™ç©æ„å„¿ç®€ç›´æ˜¯çœŸçˆ±ï¼Œè¿˜å–œæ¬¢é…åˆå›ºå®šå°ºå¯¸çš„ Frame ä½¿ç”¨ã€‚è¿™æ˜¯å¸ƒå±€ç•Œçš„æ ¸æ­¦å™¨ï¼Œä¸€ç‚¸æ¯æ‰€æœ‰ã€‚è¯•ç€ç”¨ <strong><code>visualEffect()</code></strong> æˆ–è€… <strong><code>containerRelativeFrame()</code></strong> æ¥ä»£æ›¿ã€‚åˆ«åšé‚£ä¸ªç ´åå¸ƒå±€æµçš„ç½ªäººã€‚â€</p>
<hr/>
<h2 data-id="heading-24">å°¾å£°ï¼šæ•°å­—å¹½çµçš„ä½è¯­</h2>
<p>è€ç‹æ•²ä¸‹æœ€åä¸€ä¸ªå›è½¦é”®ï¼Œå…¨æ¯å±å¹•ä¸Šçš„çº¢è‰²æŠ¥é”™ç¬é—´å˜æˆäº†ä»¤äººæ„‰æ‚¦çš„ç»¿è‰²æ„å»ºæˆåŠŸæç¤ºã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// Human-verified Code</span>
<span class="hljs-comment">// Status: Compiling... Success.</span>
<span class="hljs-comment">// Fixed by: The Refiners (Old Wang &amp; Liya)</span>
</code></pre>
<p>â€œæå®šã€‚â€ è€ç‹ç˜«ååœ¨æ¤…å­ä¸Šï¼Œå¬ç€çª—å¤–é›¨å£°æ¸å¤§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff285e2e07243e19c071d1960fa2bba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=pyQ1%2FUg%2BClMdAt3UVUof1uyRW4k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è‰äºšçœ‹ç€å®Œç¾è¿è¡Œçš„ Appï¼Œçœ¼ä¸­é—ªçƒç€å´‡æ‹œçš„å…‰èŠ’ï¼šâ€œè€ç‹ï¼Œä½ ç®€ç›´æ˜¯ç¥ï¼æ—¢ç„¶æˆ‘ä»¬èƒ½ä¿®å¤è¿™äº›ä»£ç ï¼Œä¸ºä»€ä¹ˆ AI è¿˜æ˜¯ä¼šä¸æ–­åœ°ç”Ÿæˆè¿™ç§åƒåœ¾ï¼Ÿâ€</p>
<p>è€ç‹ç‚¹ç‡ƒäº†æœ€åä¸€æ”¯çƒŸï¼Œçœ‹ç€çƒŸé›¾åœ¨éœ“è™¹ç¯ä¸‹ç¼­ç»•ã€‚â€œå› ä¸º AI ä¼šäº§ç”Ÿ<strong>å¹»è§‰ï¼ˆHallucinationsï¼‰</strong>ã€‚å®ƒä»¬ä¼šç¼–é€ å‡ºçœ‹èµ·æ¥å¾ˆç¾ã€åå­—å¾ˆåƒæ ·ï¼Œä½†å®é™…ä¸Šæ ¹æœ¬ä¸å­˜åœ¨çš„ APIã€‚è¿™å°±åƒæ˜¯åœ¨æ•°å­—ä¸–ç•Œé‡Œè§é¬¼äº†ä¸€æ ·ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e36f4c6462b54da6880dd0b012a29ca7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=S%2BTQVv0fjojQUL%2BLrxEHq8kDi9k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»–è½¬è¿‡å¤´ï¼Œæ„å‘³æ·±é•¿åœ°çœ‹ç€è‰äºšï¼šâ€œå¯¹æ­¤ï¼Œæˆ‘ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚æˆ‘åªèƒ½ä¿®è¡¥å·²çŸ¥çš„é”™è¯¯ï¼Œå´æ— æ³•é¢„æµ‹æœªçŸ¥çš„ç–¯ç‹‚ã€‚â€</p>
<p>â€œé‚£ä¹ˆï¼Œâ€è€ç‹æŠŠç›®å…‰æŠ•å‘äº†å±å¹•å‰çš„ä½ â€”â€”ç¬¬å››é¢å¢™ä¹‹å¤–çš„è§‚å¯Ÿè€…ï¼Œâ€œè½®åˆ°ä½ äº†ã€‚<strong>åœ¨ä½ çš„èµ›åšæ¢é™©ä¸­ï¼Œé€šå¸¸ä¼šåœ¨ AI ç”Ÿæˆçš„ä»£ç é‡Œå‘ç°ä»€ä¹ˆâ€˜æƒŠå–œâ€™ï¼Ÿ</strong>â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc4c156db2b4a67956ba5cd918f72f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768102090&amp;x-signature=rmGidCBjhQZbbr9DjDlotL9YiV4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœä½ è¿˜æ´»ç€ï¼Œè¯·åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä»¬ã€‚æ¯•ç«Ÿï¼Œåœ¨è¿™åœºäººæœºå¤§æˆ˜ä¸­ï¼ŒçŸ¥è¯†æ˜¯æˆ‘ä»¬å”¯ä¸€çš„æ­¦å™¨ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ„Ÿè°¢è§‚èµï¼Œå†ä¼šå•¦ï¼8-)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ]]></title>    <link>https://juejin.cn/post/7590433626561085475</link>    <guid>https://juejin.cn/post/7590433626561085475</guid>    <pubDate>2026-01-04T02:02:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590433626561085475" data-draft-id="7590433626561069091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-04T02:02:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆåä¸ƒï¼‰ç¬¬17ç« ï¼šSkillç³»ç»Ÿä¸Runtime Sandboxé›†æˆ - AIOpså®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:02:31.000Z" title="Sun Jan 04 2026 02:02:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    29
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>æœ¬ç« è®²è§£<strong>Skillç³»ç»Ÿä¸AgentScope Runtime Sandboxçš„é›†æˆ</strong>ï¼Œé€šè¿‡çœŸå®çš„AIOpsåœºæ™¯å±•ç¤ºå¦‚ä½•æ„å»º<strong>æ‰§è¡Œè„šæœ¬ã€è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€è°ƒç”¨ç³»ç»Ÿå·¥å…·çš„Skillç³»ç»Ÿ</strong>ã€‚</p>
<p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼š</p>
<ul>
<li>ç†è§£Runtime Sandboxçš„æ¶æ„è®¾è®¡</li>
<li>æŒæ¡Skillä¸æ–‡ä»¶ç³»ç»Ÿçš„å…³è”æœºåˆ¶</li>
<li>å­¦ä¼šå®ç°è„šæœ¬æ‰§è¡Œç±»Skill</li>
<li>æŒæ¡ç³»ç»Ÿå·¥å…·ï¼ˆgrepã€catç­‰ï¼‰çš„é›†æˆ</li>
<li>äº†è§£è‡ªå®šä¹‰å·¥å…·çš„æ‰©å±•æœºåˆ¶</li>
<li>å®ç°AIOpsåœºæ™¯ï¼šæ•…éšœè¯Šæ–­ + æŠ¥å‘Šç”Ÿæˆ</li>
</ul>
<p>sandbox: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-runtime" target="_blank" title="https://github.com/agentscope-ai/agentscope-runtime" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<hr/>
<h3 data-id="heading-1">1.1 What - æ•´ä½“æ¶æ„</h3>
<p><strong>èƒŒæ™¯é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Skilléœ€è¦çš„èƒ½åŠ›ï¼š
â”œâ”€ æ‰§è¡ŒShellè„šæœ¬ (æ•…éšœè¯Šæ–­ã€æ—¥å¿—åˆ†æ)
â”œâ”€ è°ƒç”¨ç³»ç»Ÿå·¥å…· (grepã€awkã€catç­‰)
â”œâ”€ è¯»å–æ–‡ä»¶ç³»ç»Ÿ (æ—¥å¿—ã€é…ç½®ã€æ•°æ®)
â”œâ”€ ç®¡ç†ç‹¬ç«‹ç¯å¢ƒ (éš”ç¦»ã€å®‰å…¨ã€å¯å¤ç°)
â””â”€ è·¨åº”ç”¨é€šä¿¡ (Agent Runtime as Server)

ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜ï¼š
âŒ å®‰å…¨éšæ‚£ï¼šç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
âŒ ç¯å¢ƒæ±¡æŸ“ï¼šå½±å“ä¸»åº”ç”¨ç¯å¢ƒ
âŒ éš¾ä»¥ç®¡ç†ï¼šæ–‡ä»¶ç³»ç»Ÿæ··ä¹±
âŒ éš¾ä»¥æ‰©å±•ï¼šå·¥å…·é›†æˆç¹ç
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šRuntime Sandbox</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentScope Application                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                  Skill Management System                â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ Diagnosis    â”‚  â”‚ Report Gen   â”‚  â”‚ Custom Tools â”‚  â”‚â”‚
â”‚  â”‚  â”‚ Skill        â”‚  â”‚ Skill        â”‚  â”‚ Skill        â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚          â”‚                â”‚                â”‚            â”‚â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚                           â”‚                            â”‚â”‚
â”‚  â”‚                  Runtime Client (gRPC)                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”‚  Runtime Server    â”‚
â”‚                    â”‚ (Sandbox Service)  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                               â”‚
        Network (å¯è·¨æœåŠ¡å™¨)
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Isolated Sandbox Environment               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚ File System (/tmp/skill_workspace)     â”‚ â”‚
        â”‚  â”‚ â”œâ”€ /diagnostics/                       â”‚ â”‚
        â”‚  â”‚ â”‚  â”œâ”€ scripts/                         â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â”œâ”€ check_cpu<span class="hljs-selector-class">.sh</span>                 â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â”œâ”€ check_memory<span class="hljs-selector-class">.sh</span>              â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â””â”€ analyze_logs<span class="hljs-selector-class">.sh</span>              â”‚ â”‚
        â”‚  â”‚ â”‚  â”œâ”€ reports/                        â”‚ â”‚
        â”‚  â”‚ â”‚  â”‚  â””â”€ diagnosis_report<span class="hljs-selector-class">.md</span>          â”‚ â”‚
        â”‚  â”‚ â”‚  â””â”€ tools/                          â”‚ â”‚
        â”‚  â”‚ â””â”€ /tools/                            â”‚ â”‚
        â”‚  â”‚    â”œâ”€ grep, cat, awk (ç³»ç»Ÿå·¥å…·)       â”‚ â”‚
        â”‚  â”‚    â”œâ”€ custom_analyzer (è‡ªå®šä¹‰å·¥å…·)   â”‚ â”‚
        â”‚  â”‚    â””â”€ ...                             â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                              â”‚
        â”‚  Execution Engine                            â”‚
        â”‚  â”œâ”€ Script Executor                          â”‚
        â”‚  â”œâ”€ Tool Invoker                             â”‚
        â”‚  â””â”€ Resource Monitor                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">24.1.2 Why - ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·çš„é›†æˆ</h3>
<p><strong>1. å®‰å…¨éš”ç¦»</strong></p>
<pre><code class="hljs language-bash" lang="bash">æ²¡æœ‰Sandboxï¼š
Agentè¿è¡Œè„šæœ¬ â†’ ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ â†’ å¯èƒ½åˆ é™¤/varã€/etcç­‰å…³é”®æ–‡ä»¶ âŒ

ä½¿ç”¨Sandboxï¼š
Agentè¿è¡Œè„šæœ¬ â†’ Sandboxç¯å¢ƒä¸­æ‰§è¡Œ â†’ éš”ç¦»çš„æ–‡ä»¶ç³»ç»Ÿ âœ…
                                  â†’ è„šæœ¬å‡ºé”™ä¸å½±å“ä¸»æœºç³»ç»Ÿ
</code></pre>
<p><strong>2. æ–‡ä»¶ç³»ç»Ÿç»„ç»‡</strong></p>
<pre><code class="hljs language-scss" lang="scss">Skillçš„æ–‡ä»¶ç»„ç»‡é—®é¢˜ï¼š
- Skill <span class="hljs-selector-tag">A</span>çš„è„šæœ¬åœ¨/opt/scripts/<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.sh</span>
- Skill <span class="hljs-selector-tag">B</span>çš„è„šæœ¬åœ¨/opt/scripts/<span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.sh</span>
- æŠ¥å‘Šæ¨¡æ¿åœ¨/<span class="hljs-selector-tag">var</span>/templates/report<span class="hljs-selector-class">.md</span>
â†’ éš¾ä»¥ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶å›°éš¾ã€å®¹æ˜“å†²çª

è§£å†³æ–¹æ¡ˆï¼ˆSandboxï¼‰ï¼š
/tmp/skill_workspace/
â”œâ”€ skill_diagnosis/
â”‚  â”œâ”€ scripts/        (è¯Šæ–­è„šæœ¬)
â”‚  â”œâ”€ tools/          (è¯Šæ–­å·¥å…·)
â”‚  â”œâ”€ cache/          (è¯Šæ–­ç¼“å­˜)
â”‚  â””â”€ reports/        (è¯Šæ–­æŠ¥å‘Š)
â”œâ”€ skill_reporting/
â”‚  â”œâ”€ templates/      (æŠ¥å‘Šæ¨¡æ¿)
â”‚  â”œâ”€ tools/          (æŠ¥å‘Šå·¥å…·)
â”‚  â””â”€ outputs/        (ç”Ÿæˆçš„æŠ¥å‘Š)
â†’ æ¸…æ™°ã€æ˜“äºç‰ˆæœ¬æ§åˆ¶ã€æ”¯æŒå®¹å™¨åŒ–
</code></pre>
<p><strong>3. å·¥å…·ç®¡ç†</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä¼ ç»Ÿæ–¹å¼ï¼š
<span class="hljs-deletion">- ç³»ç»Ÿå·¥å…·ï¼ˆgrepã€catã€awkï¼‰ç›´æ¥è®¿é—®</span>
<span class="hljs-deletion">- è‡ªå®šä¹‰å·¥å…·éœ€è¦å®‰è£…åˆ°ç³»ç»Ÿç›®å½•</span>
<span class="hljs-deletion">- éš¾ä»¥æ›´æ–°å’Œå›æ»š</span>

Sandboxæ–¹å¼ï¼š
<span class="hljs-deletion">- Sandboxå†…åŒ…å«å¿…è¦çš„ç³»ç»Ÿå·¥å…·</span>
<span class="hljs-deletion">- è‡ªå®šä¹‰å·¥å…·åŠ¨æ€æŒ‚è½½æˆ–ç¼–è¯‘åˆ°Sandbox</span>
<span class="hljs-deletion">- å·¥å…·ç‰ˆæœ¬ä¸Skillç»‘å®šï¼Œæ˜“äºç®¡ç†</span>
</code></pre>
<p><strong>4. Agent Runtime as Server</strong></p>
<pre><code class="hljs language-scss" lang="scss">åˆ†å¸ƒå¼éƒ¨ç½²åœºæ™¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent App <span class="hljs-number">1</span> â”‚         â”‚  Agent App <span class="hljs-number">2</span> â”‚
â”‚   (Service A)â”‚         â”‚   (Service B)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         gRPC/HTTP (è·¨ç½‘ç»œ)
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Runtime Server  â”‚
        â”‚   (Shared)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿ï¼š
âœ… å¤šä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªRuntime Server
âœ… é›†ä¸­ç®¡ç†Sandboxèµ„æº
âœ… æ–‡ä»¶ç³»ç»Ÿç»Ÿä¸€ç®¡ç†
âœ… æˆæœ¬é™ä½
</code></pre>
<h3 data-id="heading-3">1.3 Runtime Sandboxæ¶æ„è¯¦è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Runtime Sandboxæ ¸å¿ƒæ¶æ„
 */</span>

<span class="hljs-comment">// 1. Sandboxé…ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SandboxConfig</span> {
    <span class="hljs-keyword">private</span> String sandboxId;           <span class="hljs-comment">// æ²™ç®±å”¯ä¸€ID</span>
    <span class="hljs-keyword">private</span> String workspaceRoot;       <span class="hljs-comment">// å·¥ä½œç›®å½• /tmp/skill_workspace</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> maxMemory;             <span class="hljs-comment">// æœ€å¤§å†…å­˜ 512MB</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> maxCpuTime;            <span class="hljs-comment">// æœ€å¤§CPUæ—¶é—´ 30s</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; allowedTools;  <span class="hljs-comment">// å…è®¸çš„å·¥å…·åˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; env;    <span class="hljs-comment">// ç¯å¢ƒå˜é‡</span>
}

<span class="hljs-comment">// 2. æ–‡ä»¶ç³»ç»Ÿéš”ç¦»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IsolatedFileSystem</span> {
    <span class="hljs-keyword">private</span> File workspaceRoot;
    <span class="hljs-keyword">private</span> Map&lt;String, SkillFileSystemLayout&gt; skillLayouts;
    
    <span class="hljs-comment">// æ¯ä¸ªSkillæœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç»“æ„</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkillFileSystemLayout</span> {
        <span class="hljs-keyword">public</span> File scriptsDir;      <span class="hljs-comment">// /workspace/skill_name/scripts/</span>
        <span class="hljs-keyword">public</span> File toolsDir;        <span class="hljs-comment">// /workspace/skill_name/tools/</span>
        <span class="hljs-keyword">public</span> File cacheDir;        <span class="hljs-comment">// /workspace/skill_name/cache/</span>
        <span class="hljs-keyword">public</span> File outputDir;       <span class="hljs-comment">// /workspace/skill_name/output/</span>
        <span class="hljs-keyword">public</span> File configDir;       <span class="hljs-comment">// /workspace/skill_name/config/</span>
    }
}

<span class="hljs-comment">// 3. è„šæœ¬æ‰§è¡Œå™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScriptExecutor</span> {
    <span class="hljs-keyword">public</span> ExecutionResult <span class="hljs-title function_">execute</span><span class="hljs-params">(
        String sandboxId,
        String scriptPath,
        Map&lt;String, String&gt; env,
        <span class="hljs-type">long</span> timeout
    )</span> {
        <span class="hljs-comment">// åœ¨Sandboxä¸­æ‰§è¡Œè„šæœ¬</span>
        <span class="hljs-comment">// è¿”å›ï¼šexitCode, stdout, stderr, executionTime</span>
    }
}

<span class="hljs-comment">// 4. å·¥å…·æ³¨å†Œè¡¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolRegistry</span> {
    <span class="hljs-keyword">private</span> Map&lt;String, ToolDefinition&gt; tools;
    
    <span class="hljs-comment">// ç³»ç»Ÿå·¥å…·ï¼šgrep, cat, awk, sed, tailç­‰</span>
    <span class="hljs-comment">// è‡ªå®šä¹‰å·¥å…·ï¼šcustom_analyzer, log_parserç­‰</span>
    
    <span class="hljs-keyword">public</span> ToolDefinition <span class="hljs-title function_">registerTool</span><span class="hljs-params">(String name, String path, String version)</span> {
        <span class="hljs-comment">// æ³¨å†Œå·¥å…·åˆ°Sandbox</span>
    }
}

<span class="hljs-comment">// 5. èµ„æºç›‘æ§</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceMonitor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorExecution</span><span class="hljs-params">(
        String sandboxId,
        <span class="hljs-type">long</span> timeout,
        <span class="hljs-type">long</span> maxMemory
    )</span> {
        <span class="hljs-comment">// ç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜ç­‰èµ„æº</span>
        <span class="hljs-comment">// è¶…è¿‡é™åˆ¶æ—¶è‡ªåŠ¨æ€æ­»è¿›ç¨‹</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-4">2. Skillçš„æ–‡ä»¶ç³»ç»Ÿç»„ç»‡</h2>
<h3 data-id="heading-5">2.1 æ ‡å‡†çš„Skillæ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">/tmp/skill_workspace/
â”‚
â”œâ”€ skill_aiops_diagnostics/           <span class="hljs-comment"># AIOpsè¯Šæ–­Skill</span>
â”‚  â”œâ”€ skill_manifest.yaml              <span class="hljs-comment"># Skillå…ƒæ•°æ®</span>
â”‚  â”œâ”€ scripts/                         <span class="hljs-comment"># è¯Šæ–­è„šæœ¬</span>
â”‚  â”‚  â”œâ”€ cpu_diagnostics.sh           <span class="hljs-comment"># CPUè¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ memory_diagnostics.sh         <span class="hljs-comment"># å†…å­˜è¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ disk_diagnostics.sh           <span class="hljs-comment"># ç£ç›˜è¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ network_diagnostics.sh        <span class="hljs-comment"># ç½‘ç»œè¯Šæ–­</span>
â”‚  â”‚  â”œâ”€ log_analysis.sh               <span class="hljs-comment"># æ—¥å¿—åˆ†æ</span>
â”‚  â”‚  â””â”€ correlation_analysis.py       <span class="hljs-comment"># æ•…éšœå…³è”åˆ†æ</span>
â”‚  â”‚
â”‚  â”œâ”€ tools/                           <span class="hljs-comment"># å·¥å…·é›†</span>
â”‚  â”‚  â”œâ”€ system/                       <span class="hljs-comment"># ç³»ç»Ÿå·¥å…·</span>
â”‚  â”‚  â”‚  â”œâ”€ grep                       <span class="hljs-comment"># æ–‡æœ¬æœç´¢</span>
â”‚  â”‚  â”‚  â”œâ”€ awk                        <span class="hljs-comment"># æ–‡æœ¬å¤„ç†</span>
â”‚  â”‚  â”‚  â”œâ”€ sed                        <span class="hljs-comment"># æµç¼–è¾‘å™¨</span>
â”‚  â”‚  â”‚  â””â”€ <span class="hljs-built_in">tail</span>                       <span class="hljs-comment"># æ–‡ä»¶å°¾éƒ¨</span>
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ custom/                       <span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·</span>
â”‚  â”‚     â”œâ”€ log_parser                 <span class="hljs-comment"># æ—¥å¿—è§£æå™¨</span>
â”‚  â”‚     â”œâ”€ metric_aggregator          <span class="hljs-comment"># æŒ‡æ ‡èšåˆå™¨</span>
â”‚  â”‚     â””â”€ anomaly_detector            <span class="hljs-comment"># å¼‚å¸¸æ£€æµ‹å™¨</span>
â”‚  â”‚
â”‚  â”œâ”€ cache/                           <span class="hljs-comment"># ç¼“å­˜ç›®å½•</span>
â”‚  â”‚  â”œâ”€ metrics_cache/                <span class="hljs-comment"># æŒ‡æ ‡ç¼“å­˜</span>
â”‚  â”‚  â””â”€ analysis_cache/               <span class="hljs-comment"># åˆ†æç¼“å­˜</span>
â”‚  â”‚
â”‚  â”œâ”€ reports/                         <span class="hljs-comment"># æŠ¥å‘Šè¾“å‡º</span>
â”‚  â”‚  â”œâ”€ diagnosis_reports/            <span class="hljs-comment"># è¯Šæ–­æŠ¥å‘Š</span>
â”‚  â”‚  â””â”€ analysis_results/             <span class="hljs-comment"># åˆ†æç»“æœ</span>
â”‚  â”‚
â”‚  â””â”€ config/                          <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
â”‚     â”œâ”€ diagnostic_rules.yaml          <span class="hljs-comment"># è¯Šæ–­è§„åˆ™</span>
â”‚     â”œâ”€ thresholds.yaml                <span class="hljs-comment"># å‘Šè­¦é˜ˆå€¼</span>
â”‚     â””â”€ tool_config.yaml               <span class="hljs-comment"># å·¥å…·é…ç½®</span>
â”‚
â”œâ”€ skill_report_generation/             <span class="hljs-comment"># æŠ¥å‘Šç”ŸæˆSkill</span>
â”‚  â”œâ”€ skill_manifest.yaml
â”‚  â”œâ”€ templates/                       <span class="hljs-comment"># æŠ¥å‘Šæ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ executive_summary.md          <span class="hljs-comment"># æ‰§è¡Œæ‘˜è¦æ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ detailed_analysis.md          <span class="hljs-comment"># è¯¦ç»†åˆ†ææ¨¡æ¿</span>
â”‚  â”‚  â”œâ”€ recommendations.md            <span class="hljs-comment"># å»ºè®®æ¨¡æ¿</span>
â”‚  â”‚  â””â”€ styles/
â”‚  â”‚     â””â”€ markdown.css               <span class="hljs-comment"># æ ·å¼</span>
â”‚  â”‚
â”‚  â”œâ”€ generators/                      <span class="hljs-comment"># æŠ¥å‘Šç”Ÿæˆå™¨</span>
â”‚  â”‚  â”œâ”€ pdf_generator.py              <span class="hljs-comment"># PDFç”Ÿæˆ</span>
â”‚  â”‚  â”œâ”€ html_generator.py             <span class="hljs-comment"># HTMLç”Ÿæˆ</span>
â”‚  â”‚  â””â”€ markdown_generator.py          <span class="hljs-comment"># Markdownç”Ÿæˆ</span>
â”‚  â”‚
â”‚  â”œâ”€ outputs/                         <span class="hljs-comment"># ç”Ÿæˆçš„æŠ¥å‘Š</span>
â”‚  â”‚  â”œâ”€ diagnosis_report_2025_01_04.pdf
â”‚  â”‚  â”œâ”€ diagnosis_report_2025_01_04.html
â”‚  â”‚  â””â”€ diagnosis_report_2025_01_04.md
â”‚  â”‚
â”‚  â””â”€ config/
â”‚     â”œâ”€ template_config.yaml           <span class="hljs-comment"># æ¨¡æ¿é…ç½®</span>
â”‚     â””â”€ style_config.yaml              <span class="hljs-comment"># æ ·å¼é…ç½®</span>
â”‚
â””â”€ shared_tools/                        <span class="hljs-comment"># å…±äº«å·¥å…·</span>
   â”œâ”€ log_processor                     <span class="hljs-comment"># æ—¥å¿—å¤„ç†å·¥å…·</span>
   â”œâ”€ data_analyzer                     <span class="hljs-comment"># æ•°æ®åˆ†æå·¥å…·</span>
   â””â”€ report_formatter                  <span class="hljs-comment"># æŠ¥å‘Šæ ¼å¼åŒ–å·¥å…·</span>
</code></pre>
<h3 data-id="heading-6">2.2 Skill Manifestå®šä¹‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># skill_manifest.yaml - Skillå…ƒæ•°æ®</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">SkillManifest</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">aiops_diagnostics</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">"AIOpsæ•…éšœè¯Šæ–­Skill"</span>
  <span class="hljs-attr">author:</span> <span class="hljs-string">"Platform Team"</span>
  <span class="hljs-attr">lastModified:</span> <span class="hljs-string">"2025-01-04"</span>

<span class="hljs-attr">spec:</span>
  <span class="hljs-comment"># SkillåŸºæœ¬ä¿¡æ¯</span>
  <span class="hljs-attr">skillType:</span> <span class="hljs-string">"diagnostic"</span>  <span class="hljs-comment"># diagnostic / reporting / analysis</span>
  
  <span class="hljs-comment"># æ–‡ä»¶ç³»ç»Ÿéœ€æ±‚</span>
  <span class="hljs-attr">filesystem:</span>
    <span class="hljs-attr">workspaceSize:</span> <span class="hljs-string">"1GB"</span>
    <span class="hljs-attr">persistentDirs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cache/</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">config/</span>
    <span class="hljs-attr">tempDirs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">reports/</span>
  
  <span class="hljs-comment"># è„šæœ¬å®šä¹‰</span>
  <span class="hljs-attr">scripts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"cpu_diagnostics"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/cpu_diagnostics.sh"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"bash"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"30s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"duration"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"integer"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"è¯Šæ–­æ—¶é•¿ï¼ˆç§’ï¼‰"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"cpu_report"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"CPUè¯Šæ–­ç»“æœ"</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_analysis"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/log_analysis.sh"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"bash"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"60s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_file"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æ—¥å¿—æ–‡ä»¶è·¯å¾„"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"keywords"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"å…³é”®è¯åˆ—è¡¨"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"analysis_result"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"åˆ†æç»“æœ"</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"correlation_analysis"</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">"scripts/correlation_analysis.py"</span>
      <span class="hljs-attr">language:</span> <span class="hljs-string">"python"</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">"120s"</span>
      <span class="hljs-attr">inputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"metrics_data"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æŒ‡æ ‡æ•°æ®"</span>
      <span class="hljs-attr">outputs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"correlation_report"</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"å…³è”åˆ†ææŠ¥å‘Š"</span>
  
  <span class="hljs-comment"># å·¥å…·ä¾èµ–</span>
  <span class="hljs-attr">tools:</span>
    <span class="hljs-attr">system:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"grep"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"awk"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"sed"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"tail"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"*"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
    
    <span class="hljs-attr">custom:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"log_parser"</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">"tools/custom/log_parser"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"metric_aggregator"</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">"tools/custom/metric_aggregator"</span>
        <span class="hljs-attr">version:</span> <span class="hljs-string">"1.0.0"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
  
  <span class="hljs-comment"># ç¯å¢ƒå˜é‡</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">JAVA_HOME:</span> <span class="hljs-string">"/usr/lib/jvm/java-17"</span>
    <span class="hljs-attr">LOG_LEVEL:</span> <span class="hljs-string">"INFO"</span>
    <span class="hljs-attr">CACHE_DIR:</span> <span class="hljs-string">"${WORKSPACE}/cache"</span>
    <span class="hljs-attr">REPORT_DIR:</span> <span class="hljs-string">"${WORKSPACE}/reports"</span>
  
  <span class="hljs-comment"># èµ„æºé™åˆ¶</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"2"</span>           <span class="hljs-comment"># æœ€å¤š2ä¸ªæ ¸å¿ƒ</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>     <span class="hljs-comment"># æœ€å¤š512MB</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">"300s"</span>     <span class="hljs-comment"># æœ€å¤š5åˆ†é’Ÿ</span>
    <span class="hljs-attr">diskSpace:</span> <span class="hljs-string">"1Gi"</span>    <span class="hljs-comment"># æœ€å¤š1GBç£ç›˜</span>
  
  <span class="hljs-comment"># å®‰å…¨æƒé™</span>
  <span class="hljs-attr">security:</span>
    <span class="hljs-attr">readPaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/var/log/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/proc/stat"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"/proc/meminfo"</span>
    <span class="hljs-attr">writePaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${WORKSPACE}/cache/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${WORKSPACE}/reports/"</span>
    <span class="hljs-attr">networkAccess:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># ä¸å…è®¸ç½‘ç»œè®¿é—®</span>
    <span class="hljs-attr">executablePaths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"scripts/"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"tools/"</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">3. AIOpsæ•…éšœè¯Šæ–­Skillå®ç°</h2>
<h3 data-id="heading-8">3.1 SkillåŸºç¡€æ¡†æ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * AIOpsæ•…éšœè¯Šæ–­SkillåŸºç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIOpsDiagnosticSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AgentSkill</span> {
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(AIOpsDiagnosticSkill.class);
    
    <span class="hljs-comment">// Runtime Sandboxå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> SandboxClient sandboxClient;
    
    <span class="hljs-comment">// Skillæ–‡ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    
    <span class="hljs-comment">// å·¥å…·æ³¨å†Œè¡¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> ToolRegistry toolRegistry;
    
    <span class="hljs-comment">// è¯Šæ–­è§„åˆ™</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> DiagnosticRuleEngine ruleEngine;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AIOpsDiagnosticSkill</span><span class="hljs-params">(
            String skillName,
            SandboxClient sandboxClient,
            SkillFileSystem fileSystem,
            ToolRegistry toolRegistry)</span> {
        <span class="hljs-built_in">super</span>(skillName);
        <span class="hljs-built_in">this</span>.sandboxClient = sandboxClient;
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
        <span class="hljs-built_in">this</span>.toolRegistry = toolRegistry;
        <span class="hljs-built_in">this</span>.ruleEngine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticRuleEngine</span>(<span class="hljs-built_in">this</span>.fileSystem);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œè¯Šæ–­è„šæœ¬
     */</span>
    <span class="hljs-keyword">protected</span> ExecutionResult <span class="hljs-title function_">executeScript</span><span class="hljs-params">(
            String scriptName,
            Map&lt;String, String&gt; inputs,
            <span class="hljs-type">long</span> timeout)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"æ‰§è¡Œè¯Šæ–­è„šæœ¬: {}"</span>, scriptName);
        
        <span class="hljs-comment">// è·å–è„šæœ¬è·¯å¾„</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">scriptPath</span> <span class="hljs-operator">=</span> fileSystem.getScriptPath(scriptName);
        
        <span class="hljs-comment">// æ„å»ºè„šæœ¬å‘½ä»¤</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">command</span> <span class="hljs-operator">=</span> buildCommand(scriptPath, inputs);
        
        <span class="hljs-comment">// åœ¨Sandboxä¸­æ‰§è¡Œ</span>
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sandboxClient.executeScript(
            getSandboxId(),
            command,
            timeout,
            getEnvironmentVariables()
        );
        
        logger.info(<span class="hljs-string">"è„šæœ¬æ‰§è¡Œå®Œæˆ: exitCode={}, duration={}ms"</span>,
            result.getExitCode(), result.getExecutionTime());
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * è°ƒç”¨ç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">invokeTool</span><span class="hljs-params">(
            String toolName,
            List&lt;String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.debug(<span class="hljs-string">"è°ƒç”¨å·¥å…·: {} with args: {}"</span>, toolName, args);
        
        <span class="hljs-type">ToolDefinition</span> <span class="hljs-variable">tool</span> <span class="hljs-operator">=</span> toolRegistry.getTool(toolName);
        <span class="hljs-keyword">if</span> (tool == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolNotFoundException</span>(toolName);
        }
        
        <span class="hljs-comment">// æ„å»ºå®Œæ•´å‘½ä»¤</span>
        List&lt;String&gt; command = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        command.add(tool.getPath());
        command.addAll(args);
        
        <span class="hljs-comment">// æ‰§è¡Œå‘½ä»¤</span>
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sandboxClient.execute(
            getSandboxId(),
            String.join(<span class="hljs-string">" "</span>, command),
            <span class="hljs-number">30000</span>  <span class="hljs-comment">// 30ç§’è¶…æ—¶</span>
        );
        
        <span class="hljs-keyword">if</span> (result.getExitCode() != <span class="hljs-number">0</span>) {
            logger.error(<span class="hljs-string">"å·¥å…·æ‰§è¡Œå¤±è´¥: {}"</span>, result.getStderr());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolExecutionException</span>(toolName, result.getStderr());
        }
        
        <span class="hljs-keyword">return</span> result.getStdout();
    }
    
    <span class="hljs-comment">/**
     * è¯»å–æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">readFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">fullPath</span> <span class="hljs-operator">=</span> fileSystem.resolvePath(filePath);
        
        <span class="hljs-comment">// ä½¿ç”¨catå·¥å…·è¯»å–æ–‡ä»¶</span>
        <span class="hljs-keyword">return</span> invokeTool(<span class="hljs-string">"cat"</span>, List.of(fullPath));
    }
    
    <span class="hljs-comment">/**
     * åˆ†ææ—¥å¿—æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">protected</span> LogAnalysisResult <span class="hljs-title function_">analyzeLog</span><span class="hljs-params">(
            String logFilePath,
            List&lt;String&gt; keywords)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"åˆ†ææ—¥å¿—æ–‡ä»¶: {}"</span>, logFilePath);
        
        <span class="hljs-comment">// æ‰§è¡Œæ—¥å¿—åˆ†æè„šæœ¬</span>
        Map&lt;String, String&gt; inputs = Map.of(
            <span class="hljs-string">"log_file"</span>, logFilePath,
            <span class="hljs-string">"keywords"</span>, String.join(<span class="hljs-string">","</span>, keywords)
        );
        
        <span class="hljs-type">ExecutionResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> executeScript(<span class="hljs-string">"log_analysis"</span>, inputs, <span class="hljs-number">60000</span>);
        
        <span class="hljs-comment">// è§£æç»“æœ</span>
        <span class="hljs-keyword">return</span> parseAnalysisResult(result.getStdout());
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">buildCommand</span><span class="hljs-params">(String scriptPath, Map&lt;String, String&gt; inputs)</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Map&lt;String, String&gt; <span class="hljs-title function_">getEnvironmentVariables</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">getSandboxId</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> LogAnalysisResult <span class="hljs-title function_">parseAnalysisResult</span><span class="hljs-params">(String output)</span>;
}

<span class="hljs-comment">/**
 * æ‰§è¡Œç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecutionResult</span> {
    <span class="hljs-keyword">private</span> String sandboxId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> exitCode;
    <span class="hljs-keyword">private</span> String stdout;
    <span class="hljs-keyword">private</span> String stderr;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> executionTime;
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; metrics;  <span class="hljs-comment">// CPUã€å†…å­˜ç­‰</span>
}

<span class="hljs-comment">/**
 * æ—¥å¿—åˆ†æç»“æœ
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAnalysisResult</span> {
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; errorLines;
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; warningLines;
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; keywordCounts;
    <span class="hljs-keyword">private</span> String summary;
    <span class="hljs-keyword">private</span> LocalDateTime analysisTime;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogEntry</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> lineNumber;
    <span class="hljs-keyword">private</span> String timestamp;
    <span class="hljs-keyword">private</span> String level;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> String context;
}
</code></pre>
<h3 data-id="heading-9">3.2 CPUè¯Šæ–­è„šæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># scripts/cpu_diagnostics.sh - CPUè¯Šæ–­è„šæœ¬</span>

<span class="hljs-built_in">set</span> -e

DURATION=<span class="hljs-variable">${1:-30}</span>
OUTPUT_FILE=<span class="hljs-string">"/workspace/reports/cpu_diagnostics_<span class="hljs-subst">$(date +%s)</span>.json"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹CPUè¯Šæ–­ï¼ˆ<span class="hljs-variable">${DURATION}</span>ç§’ï¼‰..."</span>

<span class="hljs-comment"># åˆ›å»ºJSONæŠ¥å‘Š</span>
{
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"{"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"timestamp\": \"<span class="hljs-subst">$(date -u +%Y-%m-%dT%H:%M:%SZ)</span>\","</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"diagnostics\": {"</span>
    
    <span class="hljs-comment"># 1. è·å–CPUæ ¸å¿ƒæ•°</span>
    CPU_CORES=$(grep -c <span class="hljs-string">"^processor"</span> /proc/cpuinfo)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"cpu_cores\": <span class="hljs-variable">$CPU_CORES</span>,"</span>
    
    <span class="hljs-comment"># 2. è·å–CPUå‹å·</span>
    CPU_MODEL=$(grep <span class="hljs-string">"^model name"</span> /proc/cpuinfo | <span class="hljs-built_in">head</span> -1 | <span class="hljs-built_in">cut</span> -d: -f2 | xargs)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"cpu_model\": \"<span class="hljs-variable">$CPU_MODEL</span>\","</span>
    
    <span class="hljs-comment"># 3. è·å–å½“å‰CPUä½¿ç”¨ç‡</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"current_usage\": {"</span>
    
    <span class="hljs-comment"># ä½¿ç”¨topå‘½ä»¤è·å–å¹³å‡è´Ÿè½½</span>
    IFS=<span class="hljs-string">' '</span> <span class="hljs-built_in">read</span> -r LA1 LA5 LA15 &lt; /proc/loadavg
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      \"load_average\": {"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"1m\": <span class="hljs-variable">$LA1</span>,"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"5m\": <span class="hljs-variable">$LA5</span>,"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"        \"15m\": <span class="hljs-variable">$LA15</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      },"</span>
    
    <span class="hljs-comment"># è·å–æ¯ä¸ªCPUæ ¸çš„ä½¿ç”¨ç‡</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      \"per_cpu\": ["</span>
    
    FIRST=<span class="hljs-literal">true</span>
    <span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r line; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$line</span> == cpu[0-9]* ]]; <span class="hljs-keyword">then</span>
            <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIRST</span>"</span> = <span class="hljs-literal">false</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">","</span>; <span class="hljs-keyword">fi</span>
            FIRST=<span class="hljs-literal">false</span>
            
            <span class="hljs-comment"># è§£æCPUç»Ÿè®¡ä¿¡æ¯</span>
            FIELDS=(<span class="hljs-variable">$line</span>)
            USER=<span class="hljs-variable">${FIELDS[1]}</span>
            NICE=<span class="hljs-variable">${FIELDS[2]}</span>
            SYSTEM=<span class="hljs-variable">${FIELDS[3]}</span>
            IDLE=<span class="hljs-variable">${FIELDS[4]}</span>
            
            TOTAL=$((USER + NICE + SYSTEM + IDLE))
            USAGE=$((<span class="hljs-number">100</span> * (TOTAL - IDLE) / TOTAL))
            
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"        {"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"cpu\": \"<span class="hljs-variable">${FIELDS[0]}</span>\","</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"usage_percent\": <span class="hljs-variable">$USAGE</span>"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"        }"</span> | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">'\n'</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span> &lt; /proc/stat
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    },"</span>
    
    <span class="hljs-comment"># 4. è¯Šæ–­é«˜CPUä½¿ç”¨çš„è¿›ç¨‹</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"top_processes\": ["</span>
    
    FIRST=<span class="hljs-literal">true</span>
    ps aux --<span class="hljs-built_in">sort</span>=-%cpu | <span class="hljs-built_in">tail</span> -n +2 | <span class="hljs-built_in">head</span> -5 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r line; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$FIRST</span>"</span> = <span class="hljs-literal">false</span> ]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">","</span>; <span class="hljs-keyword">fi</span>
        FIRST=<span class="hljs-literal">false</span>
        
        IFS=<span class="hljs-string">' '</span> <span class="hljs-built_in">read</span> -r USER PID PCPU PMEM VSZ RSS TTY STAT START TIME CMD &lt;&lt;&lt; <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span>
        
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"        {"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"pid\": <span class="hljs-variable">$PID</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"user\": \"<span class="hljs-variable">$USER</span>\","</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"cpu_percent\": <span class="hljs-variable">$PCPU</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"memory_percent\": <span class="hljs-variable">$PMEM</span>,"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"          \"command\": \"<span class="hljs-subst">$(echo $CMD | cut -d' ' -f1)</span>\""</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"        }"</span> | <span class="hljs-built_in">tr</span> -d <span class="hljs-string">'\n'</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"      ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    }"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  },"</span>
    
    <span class="hljs-comment"># 5. è¯Šæ–­å»ºè®®</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  \"recommendations\": ["</span>
    
    <span class="hljs-keyword">if</span> (( $(echo "<span class="hljs-variable">$LA1</span> &gt; <span class="hljs-variable">$CPU_CORES</span>" | bc -l) )); <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"è­¦å‘Šï¼š1åˆ†é’Ÿå¹³å‡è´Ÿè½½é«˜äºCPUæ ¸å¿ƒæ•°ï¼Œç³»ç»Ÿå¯èƒ½è¿‡è½½\","</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-keyword">if</span> (( $(echo "<span class="hljs-variable">$LA5</span> &gt; <span class="hljs-variable">$CPU_CORES</span> * <span class="hljs-number">0.8</span>" | bc -l) )); <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"æç¤ºï¼š5åˆ†é’Ÿå¹³å‡è´Ÿè½½è¾ƒé«˜ï¼Œå»ºè®®æ£€æŸ¥åå°ä»»åŠ¡\","</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"    \"å»ºè®®å®šæœŸç›‘æ§CPUä½¿ç”¨ç‡\""</span> 
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"}"</span>
    
} &gt; <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-comment"># è¾“å‡ºç»“æœè·¯å¾„</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯Šæ–­å®Œæˆï¼Œç»“æœä¿å­˜åˆ°: <span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
</code></pre>
<h3 data-id="heading-10">3.3 å†…å­˜è¯Šæ–­Skillå®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å†…å­˜è¯Šæ–­Skill
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryDiagnosticSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AIOpsDiagnosticSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(MemoryDiagnosticSkill.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MetricAggregator metricAggregator;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MemoryDiagnosticSkill</span><span class="hljs-params">(
            SandboxClient sandboxClient,
            SkillFileSystem fileSystem,
            ToolRegistry toolRegistry)</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"memory_diagnostic"</span>, sandboxClient, fileSystem, toolRegistry);
        <span class="hljs-built_in">this</span>.metricAggregator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetricAggregator</span>();
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå†…å­˜è¯Šæ–­
     */</span>
    <span class="hljs-keyword">public</span> MemoryDiagnosticReport <span class="hljs-title function_">diagnose</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"å¼€å§‹å†…å­˜è¯Šæ–­..."</span>);
        
        MemoryDiagnosticReport.<span class="hljs-type">Builder</span> <span class="hljs-variable">reportBuilder</span> <span class="hljs-operator">=</span> MemoryDiagnosticReport.builder()
            .timestamp(LocalDateTime.now());
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: è·å–å†…å­˜ç»Ÿè®¡</span>
            <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> getMemoryStatistics();
            reportBuilder.statistics(stats);
            logger.info(<span class="hljs-string">"å†…å­˜ç»Ÿè®¡: æ€»å†…å­˜={}MB, å·²ç”¨={}MB, å¯ç”¨={}MB"</span>,
                stats.getTotalMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>,
                stats.getUsedMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>,
                stats.getAvailableMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
            
            <span class="hljs-comment">// Step 2: åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿</span>
            List&lt;MemoryMetric&gt; trends = analyzeMemoryTrends();
            reportBuilder.trends(trends);
            
            <span class="hljs-comment">// Step 3: è¯†åˆ«å†…å­˜æ³„æ¼</span>
            <span class="hljs-type">MemoryLeakDetection</span> <span class="hljs-variable">leakDetection</span> <span class="hljs-operator">=</span> detectMemoryLeaks();
            reportBuilder.leakDetection(leakDetection);
            
            <span class="hljs-comment">// Step 4: è¯Šæ–­é«˜å†…å­˜è¿›ç¨‹</span>
            List&lt;ProcessMemoryInfo&gt; topProcesses = getTopMemoryConsumers(<span class="hljs-number">5</span>);
            reportBuilder.topProcesses(topProcesses);
            
            <span class="hljs-comment">// Step 5: ç”Ÿæˆå»ºè®®</span>
            List&lt;String&gt; recommendations = generateRecommendations(stats, leakDetection);
            reportBuilder.recommendations(recommendations);
            
            reportBuilder.status(<span class="hljs-string">"SUCCESS"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"å†…å­˜è¯Šæ–­å¤±è´¥"</span>, e);
            reportBuilder.status(<span class="hljs-string">"FAILED"</span>).error(e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> reportBuilder.build();
    }
    
    <span class="hljs-comment">/**
     * è·å–å†…å­˜ç»Ÿè®¡ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> MemoryStatistics <span class="hljs-title function_">getMemoryStatistics</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è°ƒç”¨ç³»ç»Ÿå·¥å…·è·å–å†…å­˜ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">meminfo</span> <span class="hljs-operator">=</span> readFile(<span class="hljs-string">"/proc/meminfo"</span>);
        
        <span class="hljs-comment">// è§£æ/proc/meminfo</span>
        Map&lt;String, Long&gt; memStats = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (String line : meminfo.split(<span class="hljs-string">"\n"</span>)) {
            <span class="hljs-keyword">if</span> (line.trim().isEmpty()) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// æ ¼å¼: MemTotal:        16334732 kB</span>
            String[] parts = line.split(<span class="hljs-string">":"</span>);
            <span class="hljs-keyword">if</span> (parts.length == <span class="hljs-number">2</span>) {
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> parts[<span class="hljs-number">0</span>].trim();
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> parts[<span class="hljs-number">1</span>].trim().split(<span class="hljs-string">"\\s+"</span>)[<span class="hljs-number">0</span>];
                memStats.put(key, Long.parseLong(value) * <span class="hljs-number">1024</span>); <span class="hljs-comment">// è½¬æ¢ä¸ºå­—èŠ‚</span>
            }
        }
        
        <span class="hljs-keyword">return</span> MemoryStatistics.builder()
            .totalMemory(memStats.getOrDefault(<span class="hljs-string">"MemTotal"</span>, <span class="hljs-number">0L</span>))
            .usedMemory(memStats.getOrDefault(<span class="hljs-string">"MemTotal"</span>, <span class="hljs-number">0L</span>) - 
                       memStats.getOrDefault(<span class="hljs-string">"MemAvailable"</span>, <span class="hljs-number">0L</span>))
            .availableMemory(memStats.getOrDefault(<span class="hljs-string">"MemAvailable"</span>, <span class="hljs-number">0L</span>))
            .buffers(memStats.getOrDefault(<span class="hljs-string">"Buffers"</span>, <span class="hljs-number">0L</span>))
            .cached(memStats.getOrDefault(<span class="hljs-string">"Cached"</span>, <span class="hljs-number">0L</span>))
            .swapTotal(memStats.getOrDefault(<span class="hljs-string">"SwapTotal"</span>, <span class="hljs-number">0L</span>))
            .swapUsed(memStats.getOrDefault(<span class="hljs-string">"SwapTotal"</span>, <span class="hljs-number">0L</span>) - 
                     memStats.getOrDefault(<span class="hljs-string">"SwapFree"</span>, <span class="hljs-number">0L</span>))
            .timestamp(LocalDateTime.now())
            .build();
    }
    
    <span class="hljs-comment">/**
     * åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿
     */</span>
    <span class="hljs-keyword">private</span> List&lt;MemoryMetric&gt; <span class="hljs-title function_">analyzeMemoryTrends</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"åˆ†æå†…å­˜ä½¿ç”¨è¶‹åŠ¿..."</span>);
        
        <span class="hljs-comment">// è·å–ç¼“å­˜ä¸­çš„å†å²æ•°æ®</span>
        <span class="hljs-type">File</span> <span class="hljs-variable">cacheDir</span> <span class="hljs-operator">=</span> fileSystem.getCacheDir();
        List&lt;MemoryMetric&gt; trends = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-comment">// è¯»å–å†å²æŒ‡æ ‡ï¼ˆJSONæ ¼å¼ï¼‰</span>
        File[] cacheFiles = cacheDir.listFiles((dir, name) -&gt; name.startsWith(<span class="hljs-string">"memory_"</span>) &amp;&amp; name.endsWith(<span class="hljs-string">".json"</span>));
        
        <span class="hljs-keyword">if</span> (cacheFiles != <span class="hljs-literal">null</span>) {
            Arrays.sort(cacheFiles, Comparator.comparingLong(File::lastModified));
            
            <span class="hljs-keyword">for</span> (File cacheFile : cacheFiles) {
                <span class="hljs-type">MemoryMetric</span> <span class="hljs-variable">metric</span> <span class="hljs-operator">=</span> parseMemoryMetric(readFile(cacheFile.getAbsolutePath()));
                trends.add(metric);
            }
        }
        
        <span class="hljs-comment">// ä¿å­˜å½“å‰æŒ‡æ ‡åˆ°ç¼“å­˜</span>
        <span class="hljs-type">MemoryMetric</span> <span class="hljs-variable">currentMetric</span> <span class="hljs-operator">=</span> MemoryMetric.builder()
            .timestamp(LocalDateTime.now())
            .memoryUsagePercent(getCurrentMemoryUsagePercent())
            .build();
        
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheFile</span> <span class="hljs-operator">=</span> cacheDir.getAbsolutePath() + <span class="hljs-string">"/memory_"</span> + System.currentTimeMillis() + <span class="hljs-string">".json"</span>;
        saveMetricToCache(cacheFile, currentMetric);
        
        trends.add(currentMetric);
        <span class="hljs-keyword">return</span> trends;
    }
    
    <span class="hljs-comment">/**
     * æ£€æµ‹å†…å­˜æ³„æ¼
     */</span>
    <span class="hljs-keyword">private</span> MemoryLeakDetection <span class="hljs-title function_">detectMemoryLeaks</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"æ£€æµ‹å†…å­˜æ³„æ¼..."</span>);
        
        <span class="hljs-comment">// æ‰§è¡Œè‡ªå®šä¹‰çš„å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invokeTool(<span class="hljs-string">"memory_leak_detector"</span>, List.of(
            <span class="hljs-string">"--duration"</span>, <span class="hljs-string">"60"</span>,
            <span class="hljs-string">"--threshold"</span>, <span class="hljs-string">"80"</span>
        ));
        
        <span class="hljs-comment">// è§£æç»“æœ</span>
        <span class="hljs-keyword">return</span> parseLeakDetectionResult(result);
    }
    
    <span class="hljs-comment">/**
     * è·å–å†…å­˜ä½¿ç”¨æœ€é«˜çš„è¿›ç¨‹
     */</span>
    <span class="hljs-keyword">private</span> List&lt;ProcessMemoryInfo&gt; <span class="hljs-title function_">getTopMemoryConsumers</span><span class="hljs-params">(<span class="hljs-type">int</span> topN)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨grepå’Œawkå¤„ç†psè¾“å‡º</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">psOutput</span> <span class="hljs-operator">=</span> invokeTool(<span class="hljs-string">"ps"</span>, Arrays.asList(
            <span class="hljs-string">"aux"</span>, <span class="hljs-string">"--sort=-rss"</span>
        ));
        
        List&lt;ProcessMemoryInfo&gt; processes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        String[] lines = psOutput.split(<span class="hljs-string">"\n"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; Math.min(lines.length, topN + <span class="hljs-number">1</span>); i++) {
            String[] fields = lines[i].trim().split(<span class="hljs-string">"\\s+"</span>);
            
            <span class="hljs-type">ProcessMemoryInfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> ProcessMemoryInfo.builder()
                .pid(Integer.parseInt(fields[<span class="hljs-number">1</span>]))
                .user(fields[<span class="hljs-number">0</span>])
                .memoryPercent(Double.parseDouble(fields[<span class="hljs-number">3</span>]))
                .memoryRss(Long.parseLong(fields[<span class="hljs-number">5</span>]) * <span class="hljs-number">1024</span>) <span class="hljs-comment">// è½¬æ¢ä¸ºå­—èŠ‚</span>
                .command(fields[<span class="hljs-number">10</span>])
                .build();
            
            processes.add(info);
        }
        
        <span class="hljs-keyword">return</span> processes;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆè¯Šæ–­å»ºè®®
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">generateRecommendations</span><span class="hljs-params">(
            MemoryStatistics stats,
            MemoryLeakDetection leakDetection)</span> {
        
        List&lt;String&gt; recommendations = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-type">double</span> <span class="hljs-variable">usagePercent</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>;
        
        <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">90</span>) {
            recommendations.add(<span class="hljs-string">"âš ï¸  ä¸¥é‡è­¦å‘Šï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡90%ï¼Œç³»ç»Ÿå¯èƒ½é¢ä¸´OOMé£é™©"</span>);
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šç«‹å³é‡Šæ”¾ä¸å¿…è¦çš„å†…å­˜ï¼Œè€ƒè™‘å¢åŠ ç‰©ç†å†…å­˜"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">80</span>) {
            recommendations.add(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œæ€§èƒ½å¯èƒ½ä¸‹é™"</span>);
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè¯†åˆ«å¤§å†…å­˜åº”ç”¨"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usagePercent &gt; <span class="hljs-number">70</span>) {
            recommendations.add(<span class="hljs-string">"ğŸ“Œ æç¤ºï¼šå†…å­˜ä½¿ç”¨ç‡è¶…è¿‡70%ï¼Œå»ºè®®å®šæœŸæ¸…ç†"</span>);
        }
        
        <span class="hljs-keyword">if</span> (leakDetection.isDetected()) {
            recommendations.add(<span class="hljs-string">"âš ï¸  æ£€æµ‹åˆ°å¯èƒ½çš„å†…å­˜æ³„æ¼ï¼š"</span> + leakDetection.getDescription());
            recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šåˆ†æç›¸å…³åº”ç”¨çš„æ—¥å¿—å’Œå †è½¬å‚¨"</span>);
        }
        
        <span class="hljs-keyword">if</span> (stats.getSwapUsed() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">swapPercent</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) stats.getSwapUsed() / stats.getSwapTotal() * <span class="hljs-number">100</span>;
            <span class="hljs-keyword">if</span> (swapPercent &gt; <span class="hljs-number">50</span>) {
                recommendations.add(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šSwapä½¿ç”¨ç‡è¿‡é«˜ï¼ˆ"</span> + String.format(<span class="hljs-string">"%.1f"</span>, swapPercent) + <span class="hljs-string">"%ï¼‰ï¼Œæ€§èƒ½ä¸¥é‡ä¸‹é™"</span>);
                recommendations.add(<span class="hljs-string">"   å»ºè®®ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼æˆ–ä¸åˆç†çš„å†…å­˜å ç”¨"</span>);
            }
        }
        
        recommendations.add(<span class="hljs-string">"ğŸ’¡ å»ºè®®ï¼šå®šæœŸè¿è¡Œå†…å­˜è¯Šæ–­ï¼ŒåŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜"</span>);
        
        <span class="hljs-keyword">return</span> recommendations;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">buildCommand</span><span class="hljs-params">(String scriptPath, Map&lt;String, String&gt; inputs)</span> {
        <span class="hljs-keyword">return</span> scriptPath;  <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œè„šæœ¬</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Map&lt;String, String&gt; <span class="hljs-title function_">getEnvironmentVariables</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Map.of(
            <span class="hljs-string">"JAVA_HOME"</span>, <span class="hljs-string">"/usr/lib/jvm/java-17"</span>,
            <span class="hljs-string">"LOG_LEVEL"</span>, <span class="hljs-string">"INFO"</span>
        );
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getSandboxId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"aiops_sandbox_memory"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> LogAnalysisResult <span class="hljs-title function_">parseAnalysisResult</span><span class="hljs-params">(String output)</span> {
        <span class="hljs-comment">// å®ç°æ—¥å¿—åˆ†æç»“æœè§£æ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•...</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getCurrentMemoryUsagePercent</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> getMemoryStatistics();
        <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>;
    }
    
    <span class="hljs-keyword">private</span> MemoryMetric <span class="hljs-title function_">parseMemoryMetric</span><span class="hljs-params">(String json)</span> {
        <span class="hljs-comment">// è§£æJSONæ ¼å¼çš„å†…å­˜æŒ‡æ ‡</span>
        <span class="hljs-keyword">return</span> MemoryMetric.builder().build();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveMetricToCache</span><span class="hljs-params">(String path, MemoryMetric metric)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä¿å­˜æŒ‡æ ‡åˆ°ç¼“å­˜</span>
    }
    
    <span class="hljs-keyword">private</span> MemoryLeakDetection <span class="hljs-title function_">parseLeakDetectionResult</span><span class="hljs-params">(String result)</span> {
        <span class="hljs-keyword">return</span> MemoryLeakDetection.builder()
            .detected(result.contains(<span class="hljs-string">"leak"</span>))
            .description(result)
            .build();
    }
}

<span class="hljs-comment">// æ•°æ®æ¨¡å‹</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryDiagnosticReport</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> MemoryStatistics statistics;
    <span class="hljs-keyword">private</span> List&lt;MemoryMetric&gt; trends;
    <span class="hljs-keyword">private</span> MemoryLeakDetection leakDetection;
    <span class="hljs-keyword">private</span> List&lt;ProcessMemoryInfo&gt; topProcesses;
    <span class="hljs-keyword">private</span> List&lt;String&gt; recommendations;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> String error;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryStatistics</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> totalMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> usedMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> availableMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> buffers;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> cached;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> swapTotal;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> swapUsed;
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMetric</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> memoryUsagePercent;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLeakDetection</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> detected;
    <span class="hljs-keyword">private</span> String description;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProcessMemoryInfo</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> pid;
    <span class="hljs-keyword">private</span> String user;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> memoryPercent;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> memoryRss;
    <span class="hljs-keyword">private</span> String command;
}
</code></pre>
<hr/>
<h2 data-id="heading-11">4. è‡ªå®šä¹‰å·¥å…·çš„å¼€å‘ä¸é›†æˆ</h2>
<h3 data-id="heading-12">4.1 è‡ªå®šä¹‰å·¥å…·æ¡†æ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰å·¥å…·åŸºç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(getClass());
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> ToolContext context;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">this</span>.context = context;
    }
    
    <span class="hljs-comment">/**
     * å·¥å…·å…ƒæ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception;
    
    <span class="hljs-comment">/**
     * å·¥å…·å…ƒæ•°æ®
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolMetadata</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String version;
        <span class="hljs-keyword">private</span> String description;
        <span class="hljs-keyword">private</span> List&lt;ParameterSpec&gt; parameters;
        <span class="hljs-keyword">private</span> String outputFormat;  <span class="hljs-comment">// json / text / binary</span>
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterSpec</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> String type;  <span class="hljs-comment">// string / int / boolean / array</span>
        <span class="hljs-keyword">private</span> String description;
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> required;
        <span class="hljs-keyword">private</span> String defaultValue;
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@Builder</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolResult</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> exitCode;
        <span class="hljs-keyword">private</span> String output;
        <span class="hljs-keyword">private</span> String error;
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; metrics;  <span class="hljs-comment">// æ‰§è¡ŒæŒ‡æ ‡</span>
    }
}

<span class="hljs-comment">/**
 * å·¥å…·ä¸Šä¸‹æ–‡
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolContext</span> {
    <span class="hljs-keyword">private</span> String toolId;
    <span class="hljs-keyword">private</span> String sandboxId;
    <span class="hljs-keyword">private</span> File workspaceRoot;
    <span class="hljs-keyword">private</span> Map&lt;String, String&gt; environment;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timeout;
}

<span class="hljs-comment">/**
 * æ—¥å¿—è§£æå·¥å…·
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogParserTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LogParserTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">super</span>(context);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ToolMetadata.builder()
            .name(<span class="hljs-string">"log_parser"</span>)
            .version(<span class="hljs-string">"1.0.0"</span>)
            .description(<span class="hljs-string">"é«˜æ€§èƒ½æ—¥å¿—è§£æå’Œåˆ†æå·¥å…·"</span>)
            .parameters(Arrays.asList(
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"log_file"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æ—¥å¿—æ–‡ä»¶è·¯å¾„"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"pattern"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"åŒ¹é…æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"level"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æ—¥å¿—çº§åˆ«ï¼ˆERROR/WARN/INFOï¼‰"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .defaultValue(<span class="hljs-string">"*"</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"max_lines"</span>)
                    .type(<span class="hljs-string">"int"</span>)
                    .description(<span class="hljs-string">"æœ€å¤šè¿”å›è¡Œæ•°"</span>)
                    .required(<span class="hljs-literal">false</span>)
                    .defaultValue(<span class="hljs-string">"1000"</span>)
                    .build()
            ))
            .outputFormat(<span class="hljs-string">"json"</span>)
            .build();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"æ‰§è¡Œæ—¥å¿—è§£æ: file={}"</span>, args.get(<span class="hljs-string">"log_file"</span>));
        
        <span class="hljs-type">String</span> <span class="hljs-variable">logFile</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"log_file"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> args.getOrDefault(<span class="hljs-string">"pattern"</span>, <span class="hljs-string">".*"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">level</span> <span class="hljs-operator">=</span> args.getOrDefault(<span class="hljs-string">"level"</span>, <span class="hljs-string">"*"</span>);
        <span class="hljs-type">int</span> <span class="hljs-variable">maxLines</span> <span class="hljs-operator">=</span> Integer.parseInt(args.getOrDefault(<span class="hljs-string">"max_lines"</span>, <span class="hljs-string">"1000"</span>));
        
        <span class="hljs-comment">// è¯»å–æ—¥å¿—æ–‡ä»¶</span>
        List&lt;String&gt; lines = readLogFile(logFile);
        
        <span class="hljs-comment">// è§£ææ—¥å¿—</span>
        List&lt;LogEntry&gt; entries = parseLogLines(lines, pattern, level, maxLines);
        
        <span class="hljs-comment">// ç»Ÿè®¡ä¿¡æ¯</span>
        Map&lt;String, Integer&gt; statistics = computeStatistics(entries);
        
        <span class="hljs-comment">// ç”ŸæˆJSONè¾“å‡º</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> generateJsonOutput(entries, statistics);
        
        <span class="hljs-keyword">return</span> ToolResult.builder()
            .exitCode(<span class="hljs-number">0</span>)
            .output(output)
            .metrics(Map.of(<span class="hljs-string">"lines_processed"</span>, lines.size(), <span class="hljs-string">"entries_matched"</span>, entries.size()))
            .build();
    }
    
    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">readLogFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Path</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Paths.get(filePath);
        <span class="hljs-keyword">return</span> Files.readAllLines(path);
    }
    
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; <span class="hljs-title function_">parseLogLines</span><span class="hljs-params">(
            List&lt;String&gt; lines,
            String pattern,
            String level,
            <span class="hljs-type">int</span> maxLines)</span> <span class="hljs-keyword">throws</span> Exception {
        
        List&lt;LogEntry&gt; entries = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">Pattern</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> Pattern.compile(pattern);
        
        <span class="hljs-keyword">for</span> (String line : lines) {
            <span class="hljs-keyword">if</span> (entries.size() &gt;= maxLines) <span class="hljs-keyword">break</span>;
            
            <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> regex.matcher(line);
            <span class="hljs-keyword">if</span> (matcher.find()) {
                <span class="hljs-comment">// è§£ææ—¥å¿—æ ¼å¼ï¼ˆæ”¯æŒå¸¸è§æ ¼å¼ï¼‰</span>
                <span class="hljs-type">LogEntry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> parseSingleLogEntry(line);
                
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"*"</span>.equals(level) || line.contains(level)) {
                    entries.add(entry);
                }
            }
        }
        
        <span class="hljs-keyword">return</span> entries;
    }
    
    <span class="hljs-keyword">private</span> LogEntry <span class="hljs-title function_">parseSingleLogEntry</span><span class="hljs-params">(String line)</span> {
        <span class="hljs-comment">// ç®€å•çš„æ—¥å¿—è§£æå®ç°</span>
        <span class="hljs-comment">// æ”¯æŒæ ¼å¼: [2025-01-04 10:30:45] ERROR [com.example.Service] Message</span>
        
        String[] parts = line.split(<span class="hljs-string">"\\]"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> parts.length &gt; <span class="hljs-number">0</span> ? parts[<span class="hljs-number">0</span>].substring(<span class="hljs-number">1</span>) : <span class="hljs-string">""</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">levelAndMessage</span> <span class="hljs-operator">=</span> parts.length &gt; <span class="hljs-number">1</span> ? parts[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">""</span>;
        
        <span class="hljs-keyword">return</span> LogEntry.builder()
            .timestamp(timestamp)
            .message(levelAndMessage)
            .build();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; <span class="hljs-title function_">computeStatistics</span><span class="hljs-params">(List&lt;LogEntry&gt; entries)</span> {
        Map&lt;String, Integer&gt; stats = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        stats.put(<span class="hljs-string">"total_entries"</span>, entries.size());
        
        <span class="hljs-comment">// ç»Ÿè®¡å„çº§åˆ«æ—¥å¿—</span>
        entries.stream()
            .filter(e -&gt; e.getMessage().contains(<span class="hljs-string">"ERROR"</span>))
            .count();
        
        <span class="hljs-keyword">return</span> stats;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">generateJsonOutput</span><span class="hljs-params">(List&lt;LogEntry&gt; entries, Map&lt;String, Integer&gt; stats)</span> {
        <span class="hljs-comment">// è¿”å›JSONæ ¼å¼çš„åˆ†æç»“æœ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(Map.of(
            <span class="hljs-string">"entries"</span>, entries,
            <span class="hljs-string">"statistics"</span>, stats
        ));
    }
}

<span class="hljs-comment">/**
 * æŒ‡æ ‡èšåˆå·¥å…·
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricAggregatorTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CustomTool</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MetricAggregatorTool</span><span class="hljs-params">(ToolContext context)</span> {
        <span class="hljs-built_in">super</span>(context);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolMetadata <span class="hljs-title function_">getMetadata</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ToolMetadata.builder()
            .name(<span class="hljs-string">"metric_aggregator"</span>)
            .version(<span class="hljs-string">"1.0.0"</span>)
            .description(<span class="hljs-string">"ç³»ç»ŸæŒ‡æ ‡èšåˆå’Œç»Ÿè®¡å·¥å…·"</span>)
            .parameters(Arrays.asList(
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"metric_file"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"æŒ‡æ ‡æ–‡ä»¶è·¯å¾„"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build(),
                ParameterSpec.builder()
                    .name(<span class="hljs-string">"aggregate_type"</span>)
                    .type(<span class="hljs-string">"string"</span>)
                    .description(<span class="hljs-string">"èšåˆç±»å‹ï¼ˆsum/avg/min/max/percentileï¼‰"</span>)
                    .required(<span class="hljs-literal">true</span>)
                    .build()
            ))
            .outputFormat(<span class="hljs-string">"json"</span>)
            .build();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ToolResult <span class="hljs-title function_">execute</span><span class="hljs-params">(Map&lt;String, String&gt; args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">metricFile</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"metric_file"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">aggregateType</span> <span class="hljs-operator">=</span> args.get(<span class="hljs-string">"aggregate_type"</span>);
        
        logger.info(<span class="hljs-string">"èšåˆæŒ‡æ ‡: file={}, type={}"</span>, metricFile, aggregateType);
        
        <span class="hljs-comment">// è¯»å–æŒ‡æ ‡æ–‡ä»¶</span>
        List&lt;Double&gt; metrics = readMetricFile(metricFile);
        
        <span class="hljs-comment">// æ‰§è¡Œèšåˆ</span>
        Map&lt;String, Double&gt; result = aggregate(metrics, aggregateType);
        
        <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(result);
        
        <span class="hljs-keyword">return</span> ToolResult.builder()
            .exitCode(<span class="hljs-number">0</span>)
            .output(output)
            .metrics(Map.of(<span class="hljs-string">"metrics_count"</span>, metrics.size()))
            .build();
    }
    
    <span class="hljs-keyword">private</span> List&lt;Double&gt; <span class="hljs-title function_">readMetricFile</span><span class="hljs-params">(String filePath)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è¯»å–æŒ‡æ ‡æ–‡ä»¶</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
    
    <span class="hljs-keyword">private</span> Map&lt;String, Double&gt; <span class="hljs-title function_">aggregate</span><span class="hljs-params">(List&lt;Double&gt; metrics, String type)</span> {
        Map&lt;String, Double&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"sum"</span>.equals(type)) {
            result.put(<span class="hljs-string">"sum"</span>, metrics.stream().mapToDouble(Double::doubleValue).sum());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"avg"</span>.equals(type)) {
            result.put(<span class="hljs-string">"average"</span>, metrics.stream().mapToDouble(Double::doubleValue).average().orElse(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"min"</span>.equals(type)) {
            result.put(<span class="hljs-string">"min"</span>, metrics.stream().mapToDouble(Double::doubleValue).min().orElse(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"max"</span>.equals(type)) {
            result.put(<span class="hljs-string">"max"</span>, metrics.stream().mapToDouble(Double::doubleValue).max().orElse(<span class="hljs-number">0</span>));
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-13">4.2 å·¥å…·æ³¨å†Œå’Œç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å·¥å…·æ³¨å†Œè¡¨å’Œç®¡ç†å™¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolRegistry</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, ToolDefinition&gt; systemTools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, CustomTool&gt; customTools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ToolRegistry</span><span class="hljs-params">()</span> {
        initializeSystemTools();
    }
    
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–ç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeSystemTools</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ³¨å†Œgrep</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"grep"</span>)
            .path(<span class="hljs-string">"/bin/grep"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"2.28"</span>)
            .description(<span class="hljs-string">"æ–‡æœ¬æœç´¢å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œcat</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"cat"</span>)
            .path(<span class="hljs-string">"/bin/cat"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"8.32"</span>)
            .description(<span class="hljs-string">"æ–‡ä»¶æŸ¥çœ‹å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œawk</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"awk"</span>)
            .path(<span class="hljs-string">"/usr/bin/awk"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"5.1.0"</span>)
            .description(<span class="hljs-string">"æ–‡æœ¬å¤„ç†å·¥å…·"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œsed</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"sed"</span>)
            .path(<span class="hljs-string">"/bin/sed"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"4.7"</span>)
            .description(<span class="hljs-string">"æµç¼–è¾‘å™¨"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œtail</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"tail"</span>)
            .path(<span class="hljs-string">"/usr/bin/tail"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"8.32"</span>)
            .description(<span class="hljs-string">"æŸ¥çœ‹æ–‡ä»¶æœ«å°¾"</span>)
            .build());
        
        <span class="hljs-comment">// æ³¨å†Œps</span>
        registerSystemTool(ToolDefinition.builder()
            .name(<span class="hljs-string">"ps"</span>)
            .path(<span class="hljs-string">"/bin/ps"</span>)
            .type(<span class="hljs-string">"system"</span>)
            .version(<span class="hljs-string">"3.3.17"</span>)
            .description(<span class="hljs-string">"è¿›ç¨‹ä¿¡æ¯æŸ¥çœ‹"</span>)
            .build());
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œç³»ç»Ÿå·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerSystemTool</span><span class="hljs-params">(ToolDefinition toolDef)</span> {
        systemTools.put(toolDef.getName(), toolDef);
        logger.info(<span class="hljs-string">"å·²æ³¨å†Œç³»ç»Ÿå·¥å…·: {} ({})"</span>, toolDef.getName(), toolDef.getPath());
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerCustomTool</span><span class="hljs-params">(String name, CustomTool tool)</span> {
        customTools.put(name, tool);
        <span class="hljs-type">ToolMetadata</span> <span class="hljs-variable">metadata</span> <span class="hljs-operator">=</span> tool.getMetadata();
        logger.info(<span class="hljs-string">"å·²æ³¨å†Œè‡ªå®šä¹‰å·¥å…·: {} v{}"</span>, metadata.getName(), metadata.getVersion());
    }
    
    <span class="hljs-comment">/**
     * è·å–å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> ToolDefinition <span class="hljs-title function_">getTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> systemTools.get(name);
    }
    
    <span class="hljs-comment">/**
     * è·å–è‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> CustomTool <span class="hljs-title function_">getCustomTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> customTools.get(name);
    }
    
    <span class="hljs-comment">/**
     * éªŒè¯å·¥å…·æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasTool</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> systemTools.containsKey(name) || customTools.containsKey(name);
    }
    
    <span class="hljs-comment">/**
     * åˆ—å‡ºæ‰€æœ‰å·¥å…·
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">listAllTools</span><span class="hljs-params">()</span> {
        List&lt;String&gt; tools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        tools.addAll(systemTools.keySet());
        tools.addAll(customTools.keySet());
        <span class="hljs-keyword">return</span> tools;
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolDefinition</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String path;
    <span class="hljs-keyword">private</span> String type;  <span class="hljs-comment">// system / custom</span>
    <span class="hljs-keyword">private</span> String version;
    <span class="hljs-keyword">private</span> String description;
}
</code></pre>
<hr/>
<h2 data-id="heading-14">5. æŠ¥å‘Šç”ŸæˆSkill</h2>
<h3 data-id="heading-15">5.1 æŠ¥å‘Šæ¨¡æ¿ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æŠ¥å‘Šæ¨¡æ¿ç³»ç»Ÿ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReportTemplateEngine</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TemplateResolver resolver;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReportTemplateEngine</span><span class="hljs-params">(SkillFileSystem fileSystem)</span> {
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
        <span class="hljs-built_in">this</span>.resolver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TemplateResolver</span>();
    }
    
    <span class="hljs-comment">/**
     * ç”ŸæˆæŠ¥å‘Š
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateReport</span><span class="hljs-params">(
            String templateName,
            Map&lt;String, Object&gt; data,
            ReportFormat format)</span> <span class="hljs-keyword">throws</span> Exception {
        
        logger.info(<span class="hljs-string">"ç”ŸæˆæŠ¥å‘Š: template={}, format={}"</span>, templateName, format);
        
        <span class="hljs-comment">// åŠ è½½æ¨¡æ¿</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">templateContent</span> <span class="hljs-operator">=</span> loadTemplate(templateName);
        
        <span class="hljs-comment">// æ¸²æŸ“æ¨¡æ¿</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">renderedContent</span> <span class="hljs-operator">=</span> renderTemplate(templateContent, data);
        
        <span class="hljs-comment">// è½¬æ¢æ ¼å¼</span>
        <span class="hljs-keyword">return</span> convertFormat(renderedContent, format);
    }
    
    <span class="hljs-comment">/**
     * åŠ è½½æ¨¡æ¿
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">loadTemplate</span><span class="hljs-params">(String templateName)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">File</span> <span class="hljs-variable">templateFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(
            fileSystem.getTemplateDir(),
            templateName + <span class="hljs-string">".md"</span>
        );
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(Files.readAllBytes(templateFile.toPath()));
    }
    
    <span class="hljs-comment">/**
     * æ¸²æŸ“æ¨¡æ¿
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">renderTemplate</span><span class="hljs-params">(String template, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-comment">// ä½¿ç”¨Freemarkeræˆ–Velocityè¿›è¡Œæ¨¡æ¿æ¸²æŸ“</span>
        <span class="hljs-comment">// è¿™é‡Œç®€åŒ–ä¸ºç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢</span>
        
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> template;
        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : data.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">placeholder</span> <span class="hljs-operator">=</span> <span class="hljs-string">"${"</span> + entry.getKey() + <span class="hljs-string">"}"</span>;
            result = result.replace(placeholder, String.valueOf(entry.getValue()));
        }
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">/**
     * æ ¼å¼è½¬æ¢
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertFormat</span><span class="hljs-params">(String content, ReportFormat format)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">switch</span> (format) {
            <span class="hljs-keyword">case</span> MARKDOWN:
                <span class="hljs-keyword">return</span> content;
            <span class="hljs-keyword">case</span> HTML:
                <span class="hljs-keyword">return</span> convertMarkdownToHtml(content);
            <span class="hljs-keyword">case</span> PDF:
                <span class="hljs-keyword">return</span> convertMarkdownToPdf(content);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> content;
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertMarkdownToHtml</span><span class="hljs-params">(String markdown)</span> {
        <span class="hljs-comment">// ä½¿ç”¨commonmarkåº“è¿›è¡Œè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;html&gt;&lt;body&gt;"</span> + markdown + <span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">convertMarkdownToPdf</span><span class="hljs-params">(String markdown)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨iTextæˆ–wkhtmltopdfè¿›è¡Œè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"PDFå†…å®¹"</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ReportFormat</span> {
    MARKDOWN,
    HTML,
    PDF
}
</code></pre>
<h3 data-id="heading-16">5.2 è¯Šæ–­æŠ¥å‘Šç”ŸæˆSkill</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¯Šæ–­æŠ¥å‘Šç”ŸæˆSkill
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DiagnosticReportGenerationSkill</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AgentSkill</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DiagnosticReportGenerationSkill.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ReportTemplateEngine templateEngine;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemoryDiagnosticSkill memoryDiagnosticSkill;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DiagnosticReportGenerationSkill</span><span class="hljs-params">(
            ReportTemplateEngine templateEngine,
            MemoryDiagnosticSkill memoryDiagnosticSkill,
            SkillFileSystem fileSystem)</span> {
        <span class="hljs-built_in">super</span>(<span class="hljs-string">"diagnostic_report_generation"</span>);
        <span class="hljs-built_in">this</span>.templateEngine = templateEngine;
        <span class="hljs-built_in">this</span>.memoryDiagnosticSkill = memoryDiagnosticSkill;
        <span class="hljs-built_in">this</span>.fileSystem = fileSystem;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå®Œæ•´çš„è¯Šæ–­æŠ¥å‘Š
     */</span>
    <span class="hljs-keyword">public</span> DiagnosticReport <span class="hljs-title function_">generateFullReport</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š..."</span>);
        
        DiagnosticReport.<span class="hljs-type">Builder</span> <span class="hljs-variable">reportBuilder</span> <span class="hljs-operator">=</span> DiagnosticReport.builder()
            .timestamp(LocalDateTime.now())
            .version(<span class="hljs-string">"1.0"</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: æ‰§è¡Œè¯Šæ–­</span>
            <span class="hljs-type">MemoryDiagnosticReport</span> <span class="hljs-variable">memoryReport</span> <span class="hljs-operator">=</span> memoryDiagnosticSkill.diagnose();
            reportBuilder.memoryReport(memoryReport);
            
            <span class="hljs-comment">// Step 2: å‡†å¤‡æŠ¥å‘Šæ•°æ®</span>
            Map&lt;String, Object&gt; reportData = prepareReportData(memoryReport);
            
            <span class="hljs-comment">// Step 3: ç”ŸæˆMarkdownæŠ¥å‘Š</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">markdownContent</span> <span class="hljs-operator">=</span> templateEngine.generateReport(
                <span class="hljs-string">"diagnostic_template"</span>,
                reportData,
                ReportFormat.MARKDOWN
            );
            reportBuilder.markdownContent(markdownContent);
            
            <span class="hljs-comment">// Step 4: è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">htmlContent</span> <span class="hljs-operator">=</span> templateEngine.generateReport(
                <span class="hljs-string">"diagnostic_template"</span>,
                reportData,
                ReportFormat.HTML
            );
            reportBuilder.htmlContent(htmlContent);
            
            <span class="hljs-comment">// Step 5: ä¿å­˜æŠ¥å‘Šæ–‡ä»¶</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">reportPath</span> <span class="hljs-operator">=</span> saveReport(markdownContent, htmlContent);
            reportBuilder.reportPath(reportPath);
            
            reportBuilder.status(<span class="hljs-string">"SUCCESS"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"æŠ¥å‘Šç”Ÿæˆå¤±è´¥"</span>, e);
            reportBuilder.status(<span class="hljs-string">"FAILED"</span>).error(e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> reportBuilder.build();
    }
    
    <span class="hljs-comment">/**
     * å‡†å¤‡æŠ¥å‘Šæ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title function_">prepareReportData</span><span class="hljs-params">(MemoryDiagnosticReport memoryReport)</span> {
        Map&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// æ‰§è¡Œæ‘˜è¦</span>
        data.put(<span class="hljs-string">"report_title"</span>, <span class="hljs-string">"AIOpsè¯Šæ–­æŠ¥å‘Š"</span>);
        data.put(<span class="hljs-string">"report_date"</span>, LocalDate.now().format(DateTimeFormatter.ISO_DATE));
        data.put(<span class="hljs-string">"report_time"</span>, LocalTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"HH:mm:ss"</span>)));
        
        <span class="hljs-comment">// å†…å­˜è¯Šæ–­ç»“æœ</span>
        <span class="hljs-type">MemoryStatistics</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> memoryReport.getStatistics();
        data.put(<span class="hljs-string">"total_memory"</span>, formatBytes(stats.getTotalMemory()));
        data.put(<span class="hljs-string">"used_memory"</span>, formatBytes(stats.getUsedMemory()));
        data.put(<span class="hljs-string">"memory_usage_percent"</span>, String.format(<span class="hljs-string">"%.1f%%"</span>, 
            (<span class="hljs-type">double</span>) stats.getUsedMemory() / stats.getTotalMemory() * <span class="hljs-number">100</span>));
        
        <span class="hljs-comment">// è¯Šæ–­å»ºè®®</span>
        data.put(<span class="hljs-string">"recommendations"</span>, memoryReport.getRecommendations());
        
        <span class="hljs-comment">// è¿›ç¨‹ä¿¡æ¯</span>
        List&lt;Map&lt;String, Object&gt;&gt; processesData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (ProcessMemoryInfo proc : memoryReport.getTopProcesses()) {
            Map&lt;String, Object&gt; procData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            procData.put(<span class="hljs-string">"pid"</span>, proc.getPid());
            procData.put(<span class="hljs-string">"user"</span>, proc.getUser());
            procData.put(<span class="hljs-string">"memory"</span>, formatBytes(proc.getMemoryRss()));
            procData.put(<span class="hljs-string">"command"</span>, proc.getCommand());
            processesData.add(procData);
        }
        data.put(<span class="hljs-string">"top_processes"</span>, processesData);
        
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-comment">/**
     * ä¿å­˜æŠ¥å‘Šæ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">saveReport</span><span class="hljs-params">(String markdownContent, String htmlContent)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMdd_HHmmss"</span>));
        <span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> <span class="hljs-string">"diagnostic_report_"</span> + timestamp;
        
        <span class="hljs-type">File</span> <span class="hljs-variable">reportsDir</span> <span class="hljs-operator">=</span> fileSystem.getOutputDir();
        
        <span class="hljs-comment">// ä¿å­˜Markdown</span>
        Files.write(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(reportsDir, filename + <span class="hljs-string">".md"</span>).toPath(),
            markdownContent.getBytes(StandardCharsets.UTF_8)
        );
        
        <span class="hljs-comment">// ä¿å­˜HTML</span>
        Files.write(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(reportsDir, filename + <span class="hljs-string">".html"</span>).toPath(),
            htmlContent.getBytes(StandardCharsets.UTF_8)
        );
        
        logger.info(<span class="hljs-string">"æŠ¥å‘Šå·²ä¿å­˜: {}"</span>, reportsDir.getAbsolutePath());
        
        <span class="hljs-keyword">return</span> reportsDir.getAbsolutePath() + <span class="hljs-string">"/"</span> + filename;
    }
    
    <span class="hljs-comment">/**
     * æ ¼å¼åŒ–å­—èŠ‚å¤§å°
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatBytes</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"0 B"</span>;
        <span class="hljs-keyword">final</span> String[] units = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"B"</span>, <span class="hljs-string">"KB"</span>, <span class="hljs-string">"MB"</span>, <span class="hljs-string">"GB"</span>, <span class="hljs-string">"TB"</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">digitGroups</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.log10(bytes) / Math.log10(<span class="hljs-number">1024</span>));
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.1f %s"</span>, bytes / Math.pow(<span class="hljs-number">1024</span>, digitGroups), units[digitGroups]);
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DiagnosticReport</span> {
    <span class="hljs-keyword">private</span> LocalDateTime timestamp;
    <span class="hljs-keyword">private</span> String version;
    <span class="hljs-keyword">private</span> MemoryDiagnosticReport memoryReport;
    <span class="hljs-keyword">private</span> String markdownContent;
    <span class="hljs-keyword">private</span> String htmlContent;
    <span class="hljs-keyword">private</span> String reportPath;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> String error;
}
</code></pre>
<hr/>
<h2 data-id="heading-17">6. AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆçš„é›†æˆç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆçš„é›†æˆ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIOpsDiagnosticSystem</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(AIOpsDiagnosticSystem.class);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SandboxClient sandboxClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SkillFileSystem fileSystem;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ToolRegistry toolRegistry;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemoryDiagnosticSkill memoryDiagnosticSkill;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DiagnosticReportGenerationSkill reportGenerationSkill;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AIOpsDiagnosticSystem</span><span class="hljs-params">(String runtimeServerHost, <span class="hljs-type">int</span> runtimeServerPort)</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"åˆå§‹åŒ–AIOpsè¯Šæ–­ç³»ç»Ÿ..."</span>);
        
        <span class="hljs-comment">// åˆå§‹åŒ–Sandboxå®¢æˆ·ç«¯</span>
        <span class="hljs-built_in">this</span>.sandboxClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SandboxClient</span>(runtimeServerHost, runtimeServerPort);
        
        <span class="hljs-comment">// åˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿ</span>
        <span class="hljs-built_in">this</span>.fileSystem = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SkillFileSystem</span>(<span class="hljs-string">"/tmp/skill_workspace"</span>);
        fileSystem.initializeSkillDirs(<span class="hljs-string">"aiops_diagnostics"</span>, <span class="hljs-string">"diagnostic_reporting"</span>);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å·¥å…·æ³¨å†Œè¡¨</span>
        <span class="hljs-built_in">this</span>.toolRegistry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolRegistry</span>();
        registerCustomTools();
        
        <span class="hljs-comment">// åˆå§‹åŒ–è¯Šæ–­Skill</span>
        <span class="hljs-built_in">this</span>.memoryDiagnosticSkill = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemoryDiagnosticSkill</span>(
            sandboxClient, fileSystem, toolRegistry
        );
        
        <span class="hljs-comment">// åˆå§‹åŒ–æŠ¥å‘Šç”ŸæˆSkill</span>
        <span class="hljs-type">ReportTemplateEngine</span> <span class="hljs-variable">templateEngine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReportTemplateEngine</span>(fileSystem);
        <span class="hljs-built_in">this</span>.reportGenerationSkill = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiagnosticReportGenerationSkill</span>(
            templateEngine, memoryDiagnosticSkill, fileSystem
        );
        
        logger.info(<span class="hljs-string">"âœ“ AIOpsè¯Šæ–­ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ³¨å†Œè‡ªå®šä¹‰å·¥å…·
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerCustomTools</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ToolContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolContext</span>();
        context.setWorkspaceRoot(fileSystem.getWorkspaceRoot());
        context.setTimeout(<span class="hljs-number">30000</span>);
        
        <span class="hljs-comment">// æ³¨å†Œæ—¥å¿—è§£æå·¥å…·</span>
        toolRegistry.registerCustomTool(<span class="hljs-string">"log_parser"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogParserTool</span>(context));
        
        <span class="hljs-comment">// æ³¨å†ŒæŒ‡æ ‡èšåˆå·¥å…·</span>
        toolRegistry.registerCustomTool(<span class="hljs-string">"metric_aggregator"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetricAggregatorTool</span>(context));
        
        logger.info(<span class="hljs-string">"âœ“ è‡ªå®šä¹‰å·¥å…·æ³¨å†Œå®Œæˆ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œå®Œæ•´çš„è¯Šæ–­å’ŒæŠ¥å‘Šæµç¨‹
     */</span>
    <span class="hljs-keyword">public</span> DiagnosticReport <span class="hljs-title function_">runFullDiagnostics</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
        logger.info(<span class="hljs-string">"å¼€å§‹AIOpsè¯Šæ–­å’ŒæŠ¥å‘Šç”Ÿæˆ"</span>);
        logger.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Step 1: æ‰§è¡Œè¯Šæ–­</span>
            logger.info(<span class="hljs-string">"\nã€Step 1ã€‘æ‰§è¡Œè¯Šæ–­..."</span>);
            <span class="hljs-type">MemoryDiagnosticReport</span> <span class="hljs-variable">memoryReport</span> <span class="hljs-operator">=</span> memoryDiagnosticSkill.diagnose();
            logger.info(<span class="hljs-string">"âœ“ è¯Šæ–­å®Œæˆï¼ŒçŠ¶æ€: {}"</span>, memoryReport.getStatus());
            
            <span class="hljs-comment">// Step 2: ç”ŸæˆæŠ¥å‘Š</span>
            logger.info(<span class="hljs-string">"\nã€Step 2ã€‘ç”ŸæˆæŠ¥å‘Š..."</span>);
            <span class="hljs-type">DiagnosticReport</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> reportGenerationSkill.generateFullReport();
            logger.info(<span class="hljs-string">"âœ“ æŠ¥å‘Šç”Ÿæˆå®Œæˆï¼Œå·²ä¿å­˜åˆ°: {}"</span>, report.getReportPath());
            
            <span class="hljs-comment">// Step 3: è¾“å‡ºæ€»ç»“</span>
            logger.info(<span class="hljs-string">"\nã€Step 3ã€‘è¯Šæ–­æ€»ç»“"</span>);
            logger.info(<span class="hljs-string">"æ€»å†…å­˜: {}"</span>, formatBytes(memoryReport.getStatistics().getTotalMemory()));
            logger.info(<span class="hljs-string">"å·²ç”¨å†…å­˜: {}"</span>, formatBytes(memoryReport.getStatistics().getUsedMemory()));
            logger.info(<span class="hljs-string">"å†…å­˜ä½¿ç”¨ç‡: {:.1f}%"</span>,
                (<span class="hljs-type">double</span>) memoryReport.getStatistics().getUsedMemory() / 
                memoryReport.getStatistics().getTotalMemory() * <span class="hljs-number">100</span>);
            
            logger.info(<span class="hljs-string">"\nè¯Šæ–­å»ºè®®:"</span>);
            <span class="hljs-keyword">for</span> (String recommendation : memoryReport.getRecommendations()) {
                logger.info(<span class="hljs-string">"  {}"</span>, recommendation);
            }
            
            logger.info(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
            logger.info(<span class="hljs-string">"è¯Šæ–­å’ŒæŠ¥å‘Šç”ŸæˆæˆåŠŸ"</span>);
            logger.info(<span class="hljs-string">"="</span>.repeat(<span class="hljs-number">60</span>));
            
            <span class="hljs-keyword">return</span> report;
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"è¯Šæ–­å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">formatBytes</span><span class="hljs-params">(<span class="hljs-type">long</span> bytes)</span> {
        <span class="hljs-keyword">if</span> (bytes &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"0 B"</span>;
        <span class="hljs-keyword">final</span> String[] units = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"B"</span>, <span class="hljs-string">"KB"</span>, <span class="hljs-string">"MB"</span>, <span class="hljs-string">"GB"</span>, <span class="hljs-string">"TB"</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">digitGroups</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (Math.log10(bytes) / Math.log10(<span class="hljs-number">1024</span>));
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"%.1f %s"</span>, bytes / Math.pow(<span class="hljs-number">1024</span>, digitGroups), units[digitGroups]);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// è¿æ¥åˆ°Runtime Server</span>
        <span class="hljs-type">AIOpsDiagnosticSystem</span> <span class="hljs-variable">system</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIOpsDiagnosticSystem</span>(
            <span class="hljs-string">"localhost"</span>,  <span class="hljs-comment">// Runtime Serverä¸»æœº</span>
            <span class="hljs-number">50051</span>         <span class="hljs-comment">// Runtime Serverç«¯å£</span>
        );
        
        <span class="hljs-comment">// è¿è¡Œè¯Šæ–­</span>
        <span class="hljs-type">DiagnosticReport</span> <span class="hljs-variable">report</span> <span class="hljs-operator">=</span> system.runFullDiagnostics();
        
        <span class="hljs-comment">// å¯ä»¥è¿›ä¸€æ­¥å¤„ç†æŠ¥å‘Š...</span>
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[npm patch å®ç”¨æŒ‡å—ï¼šä¾èµ–åŒ…ä¸´æ—¶ä¿®å¤çš„æ­£ç¡®å§¿åŠ¿]]></title>    <link>https://juejin.cn/post/7590735421262135337</link>    <guid>https://juejin.cn/post/7590735421262135337</guid>    <pubDate>2026-01-04T03:31:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590735421262135337" data-draft-id="7590283328177684523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="npm patch å®ç”¨æŒ‡å—ï¼šä¾èµ–åŒ…ä¸´æ—¶ä¿®å¤çš„æ­£ç¡®å§¿åŠ¿"/> <meta itemprop="keywords" content="å‰ç«¯å·¥ç¨‹åŒ–,NPM"/> <meta itemprop="datePublished" content="2026-01-04T03:31:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            npm patch å®ç”¨æŒ‡å—ï¼šä¾èµ–åŒ…ä¸´æ—¶ä¿®å¤çš„æ­£ç¡®å§¿åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:31:36.000Z" title="Sun Jan 04 2026 03:31:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">npm patch å®ç”¨æŒ‡å—ï¼šä¾èµ–åŒ…ä¸´æ—¶ä¿®å¤çš„æ­£ç¡®å§¿åŠ¿</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„çª˜å¢ƒï¼šé¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…çªç„¶çˆ†å‡º bugï¼Œå¯¼è‡´åŠŸèƒ½å¼‚å¸¸ï¼Œä½†ä¸Šæ¸¸ä½œè€…è¿Ÿè¿Ÿæœªå‘å¸ƒä¿®å¤ç‰ˆæœ¬ï¼Ÿç›´æ¥ä¿®æ”¹ <code>node_modules</code> é‡Œçš„ä»£ç è™½ç„¶å¿«æ·ï¼Œå´ä¼šåœ¨ä¸‹æ¬¡ <code>npm install</code> æ—¶è¢«è¦†ç›–ï¼›fork ä»“åº“è‡ªå·±ç»´æŠ¤åˆè¿‡äºç¹çã€‚</p>
<p>è¿™æ—¶ï¼Œ<code>npm patch</code> å·¥ä½œæµç¨‹å°±èƒ½å¸®ä½ è§£å†³ç‡ƒçœ‰ä¹‹æ€¥ã€‚æœ¬æ–‡å°†è¯¦ç»†æ‹†è§£å®ƒçš„æ ¸å¿ƒé€»è¾‘ã€ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µï¼Œè®©ä½ è½»æ¾æå®šä¾èµ–åŒ…çš„ä¸´æ—¶ä¿®å¤ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯ npm patch å·¥ä½œæµç¨‹ï¼Ÿ</h3>
<p>é¦–å…ˆè¦æ˜ç¡®ï¼š<code>npm patch</code> å¹¶ä¸æ˜¯ npm å®˜æ–¹æä¾›çš„å•ä¸€å‘½ä»¤ï¼Œè€Œæ˜¯ä¸€å¥—ã€Œä¸´æ—¶ä¿®å¤ä¾èµ–åŒ… + æŒä¹…åŒ–è¡¥ä¸ã€çš„è§£å†³æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p>
<ol>
<li>ç›´æ¥åœ¨æœ¬åœ° <code>node_modules</code> ä¸­ä¿®æ”¹ä¾èµ–åŒ…çš„é—®é¢˜ä»£ç ï¼Œå…ˆè®©é¡¹ç›®æ­£å¸¸è¿è¡Œï¼›</li>
<li>é€šè¿‡å·¥å…·ç”Ÿæˆã€Œè¡¥ä¸æ–‡ä»¶ã€ï¼Œè®°å½•ä½ çš„ä¿®æ”¹å·®å¼‚ï¼›</li>
<li>å°†è¡¥ä¸æ–‡ä»¶æäº¤åˆ°é¡¹ç›®ä»“åº“ï¼Œä¾›å›¢é˜Ÿæˆå‘˜å…±äº«ï¼›</li>
<li>é…ç½®è‡ªåŠ¨è„šæœ¬ï¼Œç¡®ä¿æ¯æ¬¡ <code>npm install</code> åè‡ªåŠ¨åº”ç”¨è¡¥ä¸ã€‚</li>
</ol>
<p>ç®€å•è¯´ï¼Œå®ƒå°±æ˜¯ç»™ä¾èµ–åŒ…æ‰“ã€Œä¸´æ—¶è¡¥ä¸ã€çš„æ ‡å‡†åŒ–æµç¨‹ï¼Œæ—¢èƒ½è§£å†³å½“ä¸‹é—®é¢˜ï¼Œåˆèƒ½é¿å…ä¿®æ”¹è¢«è¦†ç›–ï¼Œè¿˜èƒ½è®©å›¢é˜Ÿåä½œä¸å—å½±å“ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒå·¥å…·ï¼špatch-package</h3>
<p>å®ç°è¿™å¥—å·¥ä½œæµç¨‹æœ€æµè¡Œã€æœ€æ˜“ç”¨çš„å·¥å…·æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fds300%2Fpatch-package" target="_blank" title="https://github.com/ds300/patch-package" ref="nofollow noopener noreferrer">patch-package</a>ï¼ˆç¬¬ä¸‰æ–¹åŒ…ï¼‰ã€‚å®ƒèƒ½è‡ªåŠ¨å¯¹æ¯”ä¿®æ”¹å‰åçš„æ–‡ä»¶å·®å¼‚ï¼Œç”Ÿæˆæ ‡å‡†è¡¥ä¸ï¼Œè¿˜èƒ½é€šè¿‡ npm é’©å­è‡ªåŠ¨åº”ç”¨è¡¥ä¸ï¼Œå®Œç¾é€‚é… npm/yarn/pnpm ç­‰åŒ…ç®¡ç†å™¨ã€‚</p>
<h4 data-id="heading-3">2.1 å®‰è£… patch-package</h4>
<p>å°†å…¶ä½œä¸ºå¼€å‘ä¾èµ–å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># npm å®‰è£…</span>
npm install patch-<span class="hljs-keyword">package</span> --save-dev

<span class="hljs-comment"># yarn å®‰è£…</span>
yarn add patch-<span class="hljs-keyword">package</span> --dev

<span class="hljs-comment"># pnpm å®‰è£…</span>
pnpm add patch-<span class="hljs-keyword">package</span> -D
</code></pre>
<h3 data-id="heading-4">ä¸‰ã€npm patch å®Œæ•´ä½¿ç”¨æ­¥éª¤</h3>
<p>å‡è®¾æˆ‘ä»¬çš„é¡¹ç›®ä¾èµ–äº† <code>some-library@1.2.3</code>ï¼Œå¹¶å‘ç°è¯¥åŒ…å­˜åœ¨ä¸€ä¸ªå½±å“åŠŸèƒ½çš„ bugï¼Œéœ€è¦ä¸´æ—¶ä¿®å¤ã€‚</p>
<h4 data-id="heading-5">æ­¥éª¤ 1ï¼šç›´æ¥ä¿®æ”¹ node_modules ä¸­çš„ä¾èµ–åŒ…</h4>
<p>æ‰¾åˆ° <code>node_modules/some-library</code> ç›®å½•ï¼Œå®šä½åˆ°æœ‰é—®é¢˜çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>src/index.js</code>ï¼‰ï¼Œç›´æ¥ä¿®æ”¹ä»£ç å¹¶æµ‹è¯•ï¼Œç¡®ä¿é¡¹ç›®èƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<p>âš ï¸ æ³¨æ„ï¼šè¿™ä¸€æ­¥åªæ˜¯ä¸´æ—¶ä¿®å¤ï¼Œä¿®æ”¹ä¼šåœ¨ä¸‹æ¬¡ <code>npm install</code> æ—¶è¢«è¦†ç›–ï¼Œæ‰€ä»¥åç»­å¿…é¡»ç”Ÿæˆè¡¥ä¸ã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤ 2ï¼šç”Ÿæˆè¡¥ä¸æ–‡ä»¶</h4>
<p>ä¿®æ”¹å®Œæˆåï¼Œå›åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¡¥ä¸ï¼š</p>
<pre><code class="hljs language-go" lang="go"># è¯­æ³•ï¼šnpx patch-<span class="hljs-keyword">package</span> &lt;åŒ…å&gt;
npx patch-<span class="hljs-keyword">package</span> some-library
</code></pre>
<p>æ‰§è¡ŒæˆåŠŸåï¼Œé¡¹ç›®æ ¹ç›®å½•ä¼šè‡ªåŠ¨åˆ›å»º <code>patches</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢ä¼šç”Ÿæˆä¸€ä¸ªä»¥ã€ŒåŒ…å+ç‰ˆæœ¬å·ã€å‘½åçš„è¡¥ä¸æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>some-library+1.2.3.patch</code>ã€‚</p>
<p>è¿™ä¸ª <code>.patch</code> æ–‡ä»¶æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œè®°å½•äº†ä¿®æ”¹å‰åçš„ä»£ç å·®å¼‚ï¼ˆç±»ä¼¼ Git çš„ diff æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ‰“å¼€æŸ¥çœ‹ã€‚</p>
<p>âœ… å…³é”®æ“ä½œï¼šå°† <code>patches</code> æ–‡ä»¶å¤¹å’Œè¡¥ä¸æ–‡ä»¶ä¸€èµ·æäº¤åˆ° Git ä»“åº“ï¼Œè®©å›¢é˜Ÿå…¶ä»–æˆå‘˜ä¹Ÿèƒ½ä½¿ç”¨è¿™ä¸ªè¡¥ä¸ã€‚</p>
<h4 data-id="heading-7">æ­¥éª¤ 3ï¼šé…ç½®è‡ªåŠ¨åº”ç”¨è¡¥ä¸</h4>
<p>ä¸ºäº†è®©æ¯æ¬¡ <code>npm install</code>ï¼ˆæˆ– yarn/pnpm installï¼‰åè‡ªåŠ¨åº”ç”¨è¡¥ä¸ï¼Œéœ€è¦åœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>postinstall</code> è„šæœ¬ã€‚</p>
<p><code>postinstall</code> æ˜¯ npm çš„ç‰¹æ®Šé’©å­ï¼Œä¼šåœ¨ä¾èµ–å®‰è£…å®Œæˆåè‡ªåŠ¨æ‰§è¡Œã€‚ä¿®æ”¹ <code>package.json</code> çš„ <code>scripts</code> å­—æ®µï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your-project"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"react-scripts start"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"react-scripts build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"postinstall"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"patch-package"</span> <span class="hljs-comment">// æ–°å¢ï¼šè‡ªåŠ¨åº”ç”¨è¡¥ä¸</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"some-library"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.2.3"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"patch-package"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.0.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤ 4ï¼šéªŒè¯è¡¥ä¸æ•ˆæœ</h4>
<p>ä¸ºäº†ç¡®ä¿è¡¥ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥æµ‹è¯•ä»¥ä¸‹æµç¨‹ï¼š</p>
<ol>
<li>åˆ é™¤é¡¹ç›®çš„ <code>node_modules</code> æ–‡ä»¶å¤¹å’Œ <code>package-lock.json</code>ï¼ˆæˆ– <code>yarn.lock</code>ï¼‰ï¼›</li>
<li>é‡æ–°è¿è¡Œ <code>npm install</code>ï¼›</li>
<li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œä¼šçœ‹åˆ° <code>patch-package</code> æ­£åœ¨åº”ç”¨è¡¥ä¸çš„æ—¥å¿—ï¼›</li>
<li>æ‰“å¼€ <code>node_modules/some-library</code> ä¸­çš„ç›®æ ‡æ–‡ä»¶ï¼Œç¡®è®¤ä¿®æ”¹å·²è¢«æ­£ç¡®åº”ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-9">å››ã€å®Œæ•´ç¤ºä¾‹ï¼šç»™ lodash æ‰“è¡¥ä¸ï¼ˆæ¼”ç¤ºç”¨ï¼‰</h3>
<p>ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚ç†è§£ï¼Œæˆ‘ä»¬ä»¥ã€Œç»™ lodash æ‰“æ¼”ç¤ºè¡¥ä¸ã€ä¸ºä¾‹ï¼Œå®Œæ•´èµ°ä¸€éæµç¨‹ã€‚</p>
<h4 data-id="heading-10">1. å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-lua" lang="lua"># å®‰è£… lodashï¼ˆç›®æ ‡ä¾èµ–ï¼‰
npm install lodash

# å®‰è£… patch-<span class="hljs-built_in">package</span>ï¼ˆå¼€å‘ä¾èµ–ï¼‰
npm install patch-<span class="hljs-built_in">package</span> <span class="hljs-comment">--save-dev</span>
</code></pre>
<h4 data-id="heading-11">2. é…ç½® postinstall è„šæœ¬</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"postinstall"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"patch-package"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-12">3. ä¿®æ”¹ node_modules ä¸­çš„ lodash</h4>
<p>æ‰“å¼€ <code>node_modules/lodash/lodash.js</code>ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ä¸€è¡Œæ³¨é‡Šï¼ˆæ¼”ç¤ºä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">// ä¸´æ—¶è¡¥ä¸ï¼šæ¼”ç¤ºç”¨æ³¨é‡Š
/**
<span class="hljs-bullet"> *</span> @license
<span class="hljs-bullet"> *</span> Lodash (Custom Build) <span class="xml">&lt;https://lodash.com/&gt;</span>
<span class="hljs-bullet"> *</span> Build: <span class="hljs-code">`lodash modularize exports="npm" -o ./`</span>
<span class="hljs-bullet"> *</span> Copyright JS Foundation and other contributors <span class="xml">&lt;https://js.foundation/&gt;</span>
<span class="hljs-bullet"> *</span> Released under MIT license <span class="xml">&lt;https://lodash.com/license&gt;</span>
 <span class="hljs-emphasis">*/
</span></code></pre>
<h4 data-id="heading-13">4. ç”Ÿæˆè¡¥ä¸</h4>
<pre><code class="hljs language-go" lang="go">npx patch-<span class="hljs-keyword">package</span> lodash
</code></pre>
<p>æ­¤æ—¶é¡¹ç›®æ ¹ç›®å½•ä¼šç”Ÿæˆ <code>patches/lodash+4.17.21.patch</code>ï¼ˆç‰ˆæœ¬å·ä»¥å®é™…å®‰è£…ä¸ºå‡†ï¼‰ã€‚</p>
<h4 data-id="heading-14">5. éªŒè¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ä¾èµ–å’Œé”æ–‡ä»¶</span>
<span class="hljs-built_in">rm</span> -rf node_modules package-lock.json

<span class="hljs-comment"># é‡æ–°å®‰è£…ä¾èµ–</span>
npm install

<span class="hljs-comment"># æŸ¥çœ‹ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆ</span>
<span class="hljs-built_in">cat</span> node_modules/lodash/lodash.js | <span class="hljs-built_in">head</span> -10
</code></pre>
<p>è¾“å‡ºç»“æœä¸­ä¼šåŒ…å«æˆ‘ä»¬æ·»åŠ çš„æ³¨é‡Šï¼Œè¯´æ˜è¡¥ä¸åº”ç”¨æˆåŠŸã€‚</p>
<h3 data-id="heading-15">äº”ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-16">1. ä»…ä½œä¸ºä¸´æ—¶æ–¹æ¡ˆ</h4>
<p>npm patch çš„æ ¸å¿ƒä½œç”¨æ˜¯ã€Œä¸´æ—¶æ•‘æ€¥ã€ï¼Œè€Œä¸æ˜¯æ›¿ä»£ä¸Šæ¸¸ä¿®å¤ã€‚ä¸€æ—¦ä¸Šæ¸¸åŒ…å‘å¸ƒäº†åŒ…å«ä¿®å¤çš„æ–°ç‰ˆæœ¬ï¼Œä½ åº”è¯¥ï¼š</p>
<ol>
<li>å°†é¡¹ç›®ä¸­ä¾èµ–çš„ç‰ˆæœ¬å‡çº§åˆ°æ–°ç‰ˆæœ¬ï¼›</li>
<li>åˆ é™¤ <code>patches</code> æ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„è¡¥ä¸æ–‡ä»¶ï¼›</li>
<li>æäº¤è¿™äº›ä¿®æ”¹åˆ° Git ä»“åº“ã€‚</li>
</ol>
<h4 data-id="heading-17">2. è¡¥ä¸ä¸ç‰ˆæœ¬ç»‘å®š</h4>
<p>è¡¥ä¸æ–‡ä»¶ååŒ…å«ç‰ˆæœ¬å·ï¼ˆå¦‚ <code>some-library+1.2.3.patch</code>ï¼‰ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>å¦‚æœå‡çº§äº†ä¾èµ–åŒ…ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ä» 1.2.3 åˆ° 1.2.4ï¼‰ï¼Œæ—§è¡¥ä¸ä¸ä¼šè‡ªåŠ¨åº”ç”¨ï¼ˆé˜²æ­¢æ—§è¡¥ä¸ç ´åæ–°ç‰ˆæœ¬ï¼‰ï¼›</li>
<li>å¦‚æœç¡®è®¤è¡¥ä¸å¯¹æ–°ç‰ˆæœ¬ä»é€‚ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è¡¥ä¸æ–‡ä»¶åï¼ˆå°†ç‰ˆæœ¬å·æ”¹ä¸ºæ–°çš„ï¼‰ï¼Œå¹¶é‡æ–°æµ‹è¯•ã€‚</li>
</ul>
<h4 data-id="heading-18">3. å®‰å…¨æ€§æé†’</h4>
<p>patch-package ç›´æ¥ä¿®æ”¹ <code>node_modules</code>ä¸­çš„æ–‡ä»¶ï¼Œç›¸æ¯”ä¿®æ”¹ä¾èµ–æ ‘çš„å·¥å…·ï¼ˆå¦‚ npm-force-resolutionsï¼‰æ›´é€æ˜ï¼Œä½†ä»éœ€æ³¨æ„ï¼š</p>
<ul>
<li>åªç»™ä¿¡ä»»çš„åŒ…æ‰“è¡¥ä¸ï¼Œé¿å…ä¿®æ”¹æœªçŸ¥æ¥æºçš„ä¾èµ–ä»£ç ï¼›</li>
<li>è¡¥ä¸æ–‡ä»¶è¦æäº¤åˆ°ä»“åº“ï¼Œæ–¹ä¾¿å›¢é˜Ÿå®¡æŸ¥ï¼Œé¿å…æ¶æ„ä¿®æ”¹ã€‚</li>
</ul>
<h4 data-id="heading-19">4. è·¨åŒ…ç®¡ç†å™¨å…¼å®¹</h4>
<p>patch-package æ”¯æŒ npmã€yarnã€pnpmï¼Œä½†ä½¿ç”¨ pnpm æ—¶éœ€è¦é¢å¤–é…ç½® <code>package.json</code>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"postinstall"</span>: <span class="hljs-string">"patch-package"</span>
  },
  <span class="hljs-string">"pnpm"</span>: {
    <span class="hljs-string">"patchedDependencies"</span>: {
      <span class="hljs-string">"some-library@1.2.3"</span>: <span class="hljs-string">"patches/some-library+1.2.3.patch"</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-20">å…­ã€æ€»ç»“</h3>
<p>npm patch å·¥ä½œæµç¨‹ï¼ˆåŸºäº patch-packageï¼‰æ˜¯å‰ç«¯å¼€å‘ä¸­è§£å†³ã€Œä¾èµ–åŒ…ä¸´æ—¶ä¿®å¤ã€çš„é«˜æ•ˆæ–¹æ¡ˆï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯ï¼š</p>
<ul>
<li>ç®€å•å¿«æ·ï¼šæ— éœ€ fork ä»“åº“ï¼Œç›´æ¥ä¿®æ”¹ + ç”Ÿæˆè¡¥ä¸å³å¯ï¼›</li>
<li>æŒä¹…åŒ–ï¼šè¡¥ä¸æ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼Œå›¢é˜Ÿå…±äº«æ— å‹åŠ›ï¼›</li>
<li>è‡ªåŠ¨åŒ–ï¼šé€šè¿‡ postinstall é’©å­ï¼Œå®‰è£…ä¾èµ–åè‡ªåŠ¨åº”ç”¨ã€‚</li>
</ul>
<p>è®°ä½ï¼Œå®ƒæ˜¯ä¸´æ—¶æ–¹æ¡ˆï¼Œæœ€ç»ˆè¿˜æ˜¯è¦ä¾èµ–ä¸Šæ¸¸ä½œè€…çš„æ­£å¼ä¿®å¤ã€‚åˆç†ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥å¸®ä½ åœ¨å¼€å‘ä¸­å°‘èµ°å¾ˆå¤šå¼¯è·¯ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[js ä¸¥æ ¼æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7590330924002623551</link>    <guid>https://juejin.cn/post/7590330924002623551</guid>    <pubDate>2026-01-04T03:44:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924002623551" data-draft-id="7591177139661193270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="js ä¸¥æ ¼æ¨¡å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T03:44:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—é›¨åŒ—æ–—"/> <meta itemprop="url" content="https://juejin.cn/user/4059818590476286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            js ä¸¥æ ¼æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059818590476286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—é›¨åŒ—æ–—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:44:32.000Z" title="Sun Jan 04 2026 03:44:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼</h3>
<p>ä¸¥æ ¼æ¨¡å¼æ˜¯ ECMAScript 5 å¼•å…¥çš„ä¸€ç§ä»£ç è¿è¡Œæ¨¡å¼ï¼Œå®ƒé€šè¿‡<strong>é™åˆ¶ä¸€äº›ä¸è§„èŒƒçš„è¯­æ³•è¡Œä¸ºã€ç¦æ­¢æŸäº›æ½œåœ¨çš„é”™è¯¯æ“ä½œã€æŠ›å‡ºæ›´å¤šæ˜ç¡®çš„å¼‚å¸¸</strong>ï¼Œæ¥è®©ä»£ç è¿è¡Œæ›´å®‰å…¨ã€æ›´è§„èŒƒï¼ŒåŒæ—¶ä¹Ÿä¸ºåç»­çš„ ES ç‰ˆæœ¬ç‰¹æ€§æä¾›äº†æ›´å¥½çš„å…¼å®¹æ€§ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œä¸¥æ ¼æ¨¡å¼å°±æ˜¯ç»™ JavaScript ä»£ç åŠ ä¸Šäº†ä¸€å¥—ã€Œè¯­æ³•çº¦æŸè§„åˆ™ã€ï¼Œè®©å¼€å‘è€…æ›´æ—©å‘ç°ä»£ç ä¸­çš„é—®é¢˜ï¼Œå‡å°‘éšè”½çš„ bugã€‚</p>
<h3 data-id="heading-1">äºŒã€å¦‚ä½•å¯ç”¨ä¸¥æ ¼æ¨¡å¼</h3>
<p>ä¸¥æ ¼æ¨¡å¼çš„å¯ç”¨åˆ†ä¸ºã€Œå…¨å±€å¯ç”¨ã€å’Œã€Œå±€éƒ¨å¯ç”¨ã€ï¼ˆæ¨èå±€éƒ¨å¯ç”¨ï¼‰ï¼Œè¯­æ³•éå¸¸ç®€å•ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æŒ‡ä»¤Â <code>"use strict";</code>ï¼ˆå•åŒå¼•å·å‡å¯ï¼Œä¹Ÿå¯å†™æˆÂ <code>'use strict';</code>ï¼‰ã€‚</p>
<h4 data-id="heading-2">1. å…¨å±€å¯ç”¨ï¼ˆä¸æ¨èï¼Œå­˜åœ¨éšæ‚£ï¼‰</h4>
<p>å°†Â <code>"use strict";</code>Â æ”¾åœ¨è„šæœ¬æ–‡ä»¶çš„<strong>æœ€é¡¶éƒ¨</strong>ï¼ˆåœ¨ä»»ä½•å…¶ä»–ä»£ç ä¹‹å‰ï¼‰ï¼Œåˆ™æ•´ä¸ªè„šæœ¬æ–‡ä»¶å†…çš„ä»£ç éƒ½å°†è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆè„šæœ¬æœ€é¡¶éƒ¨ï¼Œæ— ä»»ä½•ä»£ç å‰ç½®ï¼‰</span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
a = <span class="hljs-number">20</span>; <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
</code></pre>
<p><strong>éšæ‚£</strong>ï¼šå¦‚æœè¯¥è„šæœ¬æ–‡ä»¶è¢«å…¶ä»–éä¸¥æ ¼æ¨¡å¼çš„è„šæœ¬å¼•å…¥ï¼Œå¯èƒ½ä¼šå½±å“å…¶ä»–è„šæœ¬çš„è¿è¡Œï¼›åŒæ—¶ï¼Œå…¨å±€ä¸¥æ ¼æ¨¡å¼ä¼šæ±¡æŸ“æ•´ä¸ªä½œç”¨åŸŸï¼Œä¸åˆ©äºä»£ç æ¨¡å—åŒ–ã€‚</p>
<h4 data-id="heading-3">2. å±€éƒ¨å¯ç”¨ï¼ˆæ¨èï¼Œæ¨¡å—åŒ–éš”ç¦»ï¼‰</h4>
<p>å°†Â <code>"use strict";</code>Â æ”¾åœ¨<strong>å‡½æ•°ä½“çš„æœ€é¡¶éƒ¨</strong>ï¼Œåˆ™ä»…è¯¥å‡½æ•°å†…éƒ¨çš„ä»£ç è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¤–éƒ¨ä»£ç ä¸å—å½±å“ã€‚è¿™æ˜¯æœ€å®‰å…¨çš„æ–¹å¼ï¼Œå°¤å…¶é€‚åˆåœ¨å‡½æ•°ã€å¯¹è±¡æ–¹æ³•ã€æ¨¡å—åŒ–ä»£ç ä¸­ä½¿ç”¨ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ™®é€šæ¨¡å¼ï¼ˆå¤–éƒ¨ä»£ç ï¼‰</span>
function <span class="hljs-built_in">normalFunc</span>() {
  <span class="hljs-selector-tag">b</span> = <span class="hljs-number">30</span>; <span class="hljs-comment">// æ™®é€šæ¨¡å¼ä¸‹ï¼šæœªå£°æ˜çš„å˜é‡ä¼šéšå¼æŒ‚è½½åˆ° window ä¸Šï¼Œä¸æŠ¥é”™</span>
}

<span class="hljs-comment">// å±€éƒ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆå‡½æ•°å†…éƒ¨æœ€é¡¶éƒ¨ï¼‰</span>
function <span class="hljs-built_in">strictFunc</span>() {
  "use strict";
  let c = <span class="hljs-number">40</span>;
  d = <span class="hljs-number">50</span>; <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¦æ­¢éšå¼å£°æ˜å…¨å±€å˜é‡</span>
}

<span class="hljs-built_in">normalFunc</span>(); <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œ</span>
<span class="hljs-built_in">strictFunc</span>(); <span class="hljs-comment">// æŠ¥é”™ï¼šReferenceError: d is not defined</span>
</code></pre>
<h3 data-id="heading-4">ä¸‰ã€ä¸¥æ ¼æ¨¡å¼çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆä¸æ™®é€šæ¨¡å¼çš„å…³é”®åŒºåˆ«ï¼‰</h3>
<p>ä¸¥æ ¼æ¨¡å¼çš„æ ¸å¿ƒå˜åŒ–æ˜¯ã€Œç¦æ­¢ä¸è‰¯è¡Œä¸ºã€å’Œã€ŒæŠ›å‡ºæ›´å¤šå¼‚å¸¸ã€ï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨ã€æœ€å…³é”®çš„å‡ ä¸ªç‰¹æ€§ï¼š</p>
<h4 data-id="heading-5">1. ç¦æ­¢<strong>éšå¼å£°æ˜å…¨å±€å˜é‡</strong>ï¼ˆæ ¸å¿ƒå˜åŒ–ä¹‹ä¸€ï¼‰</h4>
<p>æ™®é€šæ¨¡å¼ä¸‹ï¼Œæœªä½¿ç”¨Â <code>var</code>/<code>let</code>/<code>const</code>Â å£°æ˜çš„å˜é‡ï¼Œä¼šè¢«éšå¼æŒ‚è½½åˆ°å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯Â <code>window</code>ï¼‰ä¸Šï¼Œä¸ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å¾ˆå¤šå…¨å±€å˜é‡æ±¡æŸ“å’Œ bug çš„æ ¹æºã€‚</p>
<p>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<strong>æœªå£°æ˜ç›´æ¥èµ‹å€¼çš„å˜é‡ä¼šæŠ›å‡ºÂ <code>ReferenceError</code>Â å¼‚å¸¸</strong>ï¼Œå¼ºåˆ¶å¼€å‘è€…å¿…é¡»æ˜¾å¼å£°æ˜å˜é‡ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// é”™è¯¯ï¼šæœªå£°æ˜å˜é‡ç›´æ¥èµ‹å€¼ï¼ŒæŠ›å‡º ReferenceError</span>
x = <span class="hljs-number">100</span>; 

<span class="hljs-comment">// æ­£ç¡®ï¼šæ˜¾å¼ä½¿ç”¨ let/const/var å£°æ˜å˜é‡</span>
<span class="hljs-keyword">let</span> y = <span class="hljs-number">200</span>;
</code></pre>
<h4 data-id="heading-6">2. ç¦æ­¢å¯¹<strong>åªè¯»å±æ€§ / ä¸å¯å†™å±æ€§</strong>èµ‹å€¼ï¼Œç¦æ­¢åˆ é™¤<strong>ä¸å¯é…ç½®å±æ€§</strong></h4>
<p>æ™®é€šæ¨¡å¼ä¸‹ï¼Œå¯¹åªè¯»å±æ€§èµ‹å€¼ã€åˆ é™¤ä¸å¯é…ç½®å±æ€§åªä¼šã€Œé™é»˜å¤±è´¥ã€ï¼ˆä¸æŠ¥é”™ï¼Œä½†æ“ä½œæ— æ•ˆï¼‰ï¼Œå¾ˆéš¾è¢«å‘ç°ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™äº›æ“ä½œä¼šç›´æ¥æŠ›å‡ºÂ <code>TypeError</code>Â å¼‚å¸¸ï¼Œæ˜ç¡®å‘ŠçŸ¥å¼€å‘è€…æ“ä½œæ— æ•ˆã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// 1. å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>({}, <span class="hljs-string">"name"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// åªè¯»å±æ€§ï¼Œä¸å¯ä¿®æ”¹</span>
});
obj.<span class="hljs-property">name</span> = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šæŠ›å‡º TypeError: Cannot assign to read only property 'name'</span>

<span class="hljs-comment">// 2. åˆ é™¤ä¸å¯é…ç½®å±æ€§ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">"age"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// ä¸å¯é…ç½®ï¼Œæ— æ³•åˆ é™¤</span>
});
<span class="hljs-keyword">delete</span> obj.<span class="hljs-property">age</span>; <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šæŠ›å‡º TypeError: Cannot delete property 'age'</span>
</code></pre>
<h4 data-id="heading-7">3. ç¦æ­¢<strong>åˆ é™¤å˜é‡ / å‡½æ•° / å‡½æ•°å‚æ•°</strong></h4>
<p>æ™®é€šæ¨¡å¼ä¸‹ï¼Œåˆ é™¤å˜é‡ï¼ˆ<code>delete a</code>ï¼‰åªä¼šè¿”å›Â <code>false</code>ï¼Œé™é»˜å¤±è´¥ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<strong>åˆ é™¤å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°ä¼šæŠ›å‡ºÂ <code>SyntaxError</code>Â æˆ–Â <code>ReferenceError</code>Â å¼‚å¸¸</strong>ï¼Œåªæœ‰å¯¹è±¡çš„å¯é…ç½®å±æ€§æ‰èƒ½è¢«Â <code>delete</code>ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">let</span> num = <span class="hljs-number">10</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// é”™è¯¯ï¼šåˆ é™¤å˜é‡ï¼ŒæŠ›å‡º SyntaxError</span>
<span class="hljs-keyword">delete</span> num; 

<span class="hljs-comment">// é”™è¯¯ï¼šåˆ é™¤å‡½æ•°ï¼ŒæŠ›å‡º SyntaxError</span>
<span class="hljs-keyword">delete</span> fn; 

<span class="hljs-comment">// æ­£ç¡®ï¼šåˆ é™¤å¯¹è±¡çš„å¯é…ç½®å±æ€§</span>
<span class="hljs-keyword">let</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span> };
<span class="hljs-keyword">delete</span> person.<span class="hljs-property">name</span>; <span class="hljs-comment">// æ‰§è¡ŒæˆåŠŸï¼Œè¿”å› true</span>
</code></pre>
<h4 data-id="heading-8">4. ç¦æ­¢<strong>å‡½æ•°å‚æ•°é‡å</strong></h4>
<p>æ™®é€šæ¨¡å¼ä¸‹ï¼Œå‡½æ•°å‚æ•°å¯ä»¥é‡åï¼ˆå¦‚Â <code>function fn(a, a) {}</code>ï¼‰ï¼Œåé¢çš„å‚æ•°ä¼šè¦†ç›–å‰é¢çš„ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<strong>å‡½æ•°å‚æ•°ä¸èƒ½é‡å</strong>ï¼Œå¦åˆ™ä¼šæŠ›å‡ºÂ <code>SyntaxError</code>Â å¼‚å¸¸ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// é”™è¯¯ï¼šå‚æ•°é‡åï¼ŒæŠ›å‡º SyntaxError</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a, a</span>) { 
  <span class="hljs-keyword">return</span> a + a;
}

<span class="hljs-comment">// æ­£ç¡®ï¼šå‚æ•°å”¯ä¸€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn2</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}
</code></pre>
<h4 data-id="heading-9">5.Â <code>this</code>Â æŒ‡å‘çš„å˜åŒ–ï¼ˆé‡è¦åŒºåˆ«ï¼‰</h4>
<p>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>this</code>Â çš„æŒ‡å‘ä¸æ™®é€šæ¨¡å¼æœ‰æ˜æ˜¾ä¸åŒï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªåœºæ™¯ï¼š</p>
<ul>
<li>å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œæ™®é€šå‡½æ•°çš„Â <code>this</code>Â æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸­æ˜¯Â <code>window</code>ï¼‰ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<strong>å…¨å±€ä½œç”¨åŸŸä¸­æ™®é€šå‡½æ•°çš„Â <code>this</code>Â ä¸ºÂ <code>undefined</code></strong>ï¼ˆä¸å†æŒ‡å‘Â <code>window</code>ï¼‰ã€‚</li>
<li>æ„é€ å‡½æ•°å¿˜è®°ä½¿ç”¨Â <code>new</code>Â è°ƒç”¨æ—¶ï¼Œæ™®é€šæ¨¡å¼ä¸‹Â <code>this</code>Â æŒ‡å‘Â <code>window</code>ï¼Œä¼šéšå¼åˆ›å»ºå…¨å±€å˜é‡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<strong>æœªä½¿ç”¨Â <code>new</code>Â è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ<code>this</code>Â ä¸ºÂ <code>undefined</code>ï¼Œä¼šæŠ›å‡ºÂ <code>TypeError</code>Â å¼‚å¸¸</strong>ã€‚</li>
</ul>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// åœºæ™¯ 1ï¼šå…¨å±€å‡½æ•°çš„ this ä¸º undefined</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">globalFunc</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// è¾“å‡ºï¼šundefined</span>
}
<span class="hljs-title function_">globalFunc</span>();

<span class="hljs-comment">// åœºæ™¯ 2ï¼šæ„é€ å‡½æ•°å¿˜è®° new è°ƒç”¨ï¼ˆæŠ¥é”™ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šæŠ›å‡º TypeError: Cannot set property 'name' of undefined</span>
}
<span class="hljs-keyword">let</span> p = <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¼ ä¸‰"</span>); <span class="hljs-comment">// æœªä½¿ç”¨ newï¼Œç›´æ¥è°ƒç”¨</span>
</code></pre>
<h4 data-id="heading-10">6. ç¦æ­¢ä½¿ç”¨ä¸€äº›<strong>ä¿ç•™å­—</strong>å’Œ<strong>ä¸è§„èŒƒè¯­æ³•</strong></h4>
<p>ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç¦æ­¢ä½¿ç”¨ ES ä¿ç•™å­—ä½œä¸ºå˜é‡å / å‡½æ•°åï¼ˆå¦‚Â <code>let</code>,Â <code>const</code>,Â <code>class</code>,Â <code>export</code>,Â <code>import</code>Â ç­‰ï¼‰ï¼ŒåŒæ—¶ç¦æ­¢ä¸€äº›ä¸è§„èŒƒçš„è¯­æ³•ï¼ˆå¦‚Â <code>with</code>Â è¯­å¥ã€<code>arguments.callee</code>ã€<code>arguments.caller</code>Â ç­‰ï¼‰ï¼Œä½¿ç”¨è¿™äº›è¯­æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// é”™è¯¯ï¼šä½¿ç”¨ with è¯­å¥ï¼ŒæŠ›å‡º SyntaxErrorï¼ˆä¸¥æ ¼æ¨¡å¼ç¦æ­¢ withï¼‰</span>
<span class="hljs-keyword">with</span> (<span class="hljs-title class_">Math</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">16</span>));
}

<span class="hljs-comment">// é”™è¯¯ï¼šä½¿ç”¨ arguments.calleeï¼ŒæŠ›å‡º TypeErrorï¼ˆä¸¥æ ¼æ¨¡å¼ç¦æ­¢ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">factorial</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-keyword">return</span> n &lt;= <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : n * <span class="hljs-variable language_">arguments</span>.<span class="hljs-title function_">callee</span>(n - <span class="hljs-number">1</span>);
}
</code></pre>
<h3 data-id="heading-11">å››ã€ä¸¥æ ¼æ¨¡å¼ä¸ä¹‹å‰Â <code>for...in</code>Â ä¸­Â <code>const</code>Â çš„å…³è”</h3>
<p>è¡¥å……è¯´æ˜ä½ ä¸Šä¸€ä¸ªé—®é¢˜ä¸­Â <code>for...in</code>Â å¾ªç¯ä½¿ç”¨Â <code>const</code>Â ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»ï¼š</p>
<ol>
<li><code>for...in</code>/<code>for...of</code>Â å¾ªç¯ä¸­ä½¿ç”¨Â <code>const</code>Â å£°æ˜è¿­ä»£å˜é‡ï¼Œ<strong>åœ¨ä¸¥æ ¼æ¨¡å¼å’Œæ™®é€šæ¨¡å¼ä¸‹éƒ½å¯ä»¥æ­£å¸¸è¿è¡Œ</strong>ï¼Œä¸ä¼šå› ä¸ºä¸¥æ ¼æ¨¡å¼è€ŒæŠ¥é”™ï¼›</li>
<li>ä¸¥æ ¼æ¨¡å¼ä¸ä¼šæ”¹å˜ã€Œ<code>for...in</code>Â æ¯æ¬¡è¿­ä»£åˆ›å»ºå…¨æ–°å˜é‡ç»‘å®šã€çš„æœºåˆ¶ï¼Œ<code>const</code>Â å£°æ˜çš„è¿­ä»£å˜é‡ä¾ç„¶ç¬¦åˆã€Œä¸é‡æ–°èµ‹å€¼ã€çš„çº¦æŸï¼Œå› æ­¤å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›</li>
<li>åè€Œï¼Œä¸¥æ ¼æ¨¡å¼ä¼šç¦æ­¢Â <code>for...in</code>Â å¾ªç¯ä¸­ä¸€äº›ä¸è§„èŒƒçš„æ“ä½œï¼ˆå¦‚è¿­ä»£å˜é‡æœªå£°æ˜ï¼‰ï¼Œè®©ä»£ç æ›´ä¸¥è°¨ã€‚</li>
</ol>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œfor...in ç”¨ const å£°æ˜è¿­ä»£å˜é‡ï¼Œæ­£å¸¸æ‰§è¡Œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> propName <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(propName);
}
</code></pre>
<h3 data-id="heading-12">æ€»ç»“</h3>
<ol>
<li>ä¸¥æ ¼æ¨¡å¼é€šè¿‡Â <code>"use strict";</code>Â å¯ç”¨ï¼Œæ¨è<strong>å±€éƒ¨ï¼ˆå‡½æ•°å†…ï¼‰å¯ç”¨</strong>ï¼Œé¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li>æ ¸å¿ƒç‰¹æ€§æ˜¯ã€Œç¦æ­¢ä¸è‰¯è¡Œä¸ºã€æŠ›å‡ºæ›´å¤šå¼‚å¸¸ã€ï¼Œå…³é”®åŒ…æ‹¬ç¦æ­¢éšå¼å…¨å±€å˜é‡ã€ç¦æ­¢å‚æ•°é‡åã€<code>this</code>Â æŒ‡å‘å˜åŒ–ç­‰ï¼›</li>
<li>ä¸¥æ ¼æ¨¡å¼è®©ä»£ç æ›´å®‰å…¨ã€æ›´è§„èŒƒï¼Œå‡å°‘éšè”½ bugï¼Œæ˜¯ç°ä»£ JavaScript å¼€å‘çš„è‰¯å¥½å®è·µï¼›</li>
<li><code>for...in</code>Â ä¸­ä½¿ç”¨Â <code>const</code>Â åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å®Œå…¨å…¼å®¹ï¼Œä¸å—ä¸¥æ ¼æ¨¡å¼å½±å“ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot å®ç°åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ä¸è¿›åº¦æ¡]]></title>    <link>https://juejin.cn/post/7590403249562140687</link>    <guid>https://juejin.cn/post/7590403249562140687</guid>    <pubDate>2026-01-04T03:43:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249562140687" data-draft-id="7590778284758384675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot å®ç°åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ä¸è¿›åº¦æ¡"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-04T03:43:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‚¹æˆ‘è®¾ç½®æ˜µç§°"/> <meta itemprop="url" content="https://juejin.cn/user/2386363528256733"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot å®ç°åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ä¸è¿›åº¦æ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2386363528256733/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‚¹æˆ‘è®¾ç½®æ˜µç§°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T03:43:43.000Z" title="Sun Jan 04 2026 03:43:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Spring Boot å®ç°åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ä¸è¿›åº¦æ¡</p>
<hr/>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section"># Spring Boot å®ç°åˆ†ç‰‡ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ä¸è¿›åº¦æ¡  </span>
<span class="hljs-section">## â€”â€” æ”¯æŒ MinIO / RustFS / SeaweedFS å¯é…ç½®åˆ‡æ¢</span>

åœ¨å¤§æ–‡ä»¶ä¸Šä¼ åœºæ™¯ä¸‹ï¼Œä¼ ç»Ÿå•æ¬¡ä¸Šä¼ å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š

<span class="hljs-bullet">-</span> æ–‡ä»¶è¿‡å¤§ï¼Œå¤±è´¥åéœ€è¦æ•´ä½“é‡ä¼ 
<span class="hljs-bullet">-</span> ç½‘ç»œä¸ç¨³å®šï¼Œç”¨æˆ·ä½“éªŒå·®
<span class="hljs-bullet">-</span> æ— æ³•å±•ç¤ºä¸Šä¼ è¿›åº¦

æœ¬æ–‡åŸºäº <span class="hljs-strong">**Spring Boot**</span>ï¼Œå®ç°ä¸€å¥—<span class="hljs-strong">**ç”Ÿäº§å¯ç”¨**</span>çš„å¤§æ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆï¼Œæ”¯æŒï¼š

<span class="hljs-bullet">-</span> åˆ†ç‰‡ä¸Šä¼ 
<span class="hljs-bullet">-</span> æ–­ç‚¹ç»­ä¼ 
<span class="hljs-bullet">-</span> ä¸Šä¼ è¿›åº¦æŸ¥è¯¢
<span class="hljs-bullet">-</span> MinIO / RustFS / SeaweedFS / æœ¬åœ°å­˜å‚¨
<span class="hljs-bullet">-</span> é€šè¿‡ yml é…ç½®æ–‡ä»¶åˆ‡æ¢å­˜å‚¨ç±»å‹

---

<span class="hljs-section">## ä¸€ã€æ•´ä½“æ¶æ„è®¾è®¡</span>

ç³»ç»Ÿæ•´ä½“é‡‡ç”¨ã€Œæ¥å£éš”ç¦» + ç­–ç•¥æ¨¡å¼ã€è®¾è®¡ï¼š

</code></pre>
<blockquote>
<p>Controller
â†“
UploadService
â†“
StorageServiceï¼ˆç»Ÿä¸€æŠ½è±¡ï¼‰
â†“
MinIO / RustFS / SeaweedFS / Local</p>
</blockquote>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-string">**æ ¸å¿ƒæ€æƒ³ï¼šä¸Šä¼ é€»è¾‘ä¸åº•å±‚å­˜å‚¨è§£è€¦ã€‚**</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## äºŒã€ç»Ÿä¸€é…ç½®è®¾è®¡</span>

<span class="hljs-comment">### 1. å­˜å‚¨ç±»å‹åˆ‡æ¢</span>

<span class="hljs-string">```yaml</span>
<span class="hljs-attr">file:</span>
  <span class="hljs-attr">path:</span> <span class="hljs-string">file/</span>
  <span class="hljs-attr">prefix:</span> <span class="hljs-string">pre</span>
  <span class="hljs-attr">domain:</span> <span class="hljs-string">domain/</span>
  <span class="hljs-attr">storage:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">minio</span>   <span class="hljs-comment"># minio / rustfs / seaweedfs / local</span>
</code></pre>
<p>åªéœ€ä¿®æ”¹ <code>storage.type</code>ï¼Œå³å¯åˆ‡æ¢å­˜å‚¨å®ç°ã€‚</p>
<hr/>
<h3 data-id="heading-0">2. MinIO é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">minio:</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost:9000</span>
  <span class="hljs-attr">accessKey:</span> <span class="hljs-string">minioadmin</span>
  <span class="hljs-attr">secretKey:</span> <span class="hljs-string">minioadmin123</span>
  <span class="hljs-attr">bucketName:</span> <span class="hljs-string">xxx</span>
</code></pre>
<hr/>
<h3 data-id="heading-1">3. RustFS é…ç½®ï¼ˆS3 åè®®ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">rustfs:</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost:9000</span>
  <span class="hljs-attr">accessKey:</span> <span class="hljs-string">rustfsadmin</span>
  <span class="hljs-attr">secretKey:</span> <span class="hljs-string">rustfsadmin</span>
  <span class="hljs-attr">bucketName:</span> <span class="hljs-string">xxx</span>
</code></pre>
<blockquote>
<p>RustFS å…¼å®¹ S3 åè®®ï¼Œå¯ç›´æ¥å¤ç”¨ MinIO SDKã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">4. SeaweedFS é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">seaweedfs:</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">http://127.0.0.1:8333</span>
  <span class="hljs-attr">accessKey:</span> <span class="hljs-string">weed</span>
  <span class="hljs-attr">secretKey:</span> <span class="hljs-string">weed</span>
  <span class="hljs-attr">bucketName:</span> <span class="hljs-string">xxx</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€åˆ†ç‰‡ä¸Šä¼ æ ¸å¿ƒæµç¨‹</h2>
<h3 data-id="heading-4">1. å‰ç«¯åˆ‡ç‰‡æ€è·¯</h3>
<p>å‰ç«¯å°†å¤§æ–‡ä»¶åˆ‡å‰²ä¸ºå¤šä¸ªåˆ†ç‰‡ï¼ˆå¦‚ 5MBï¼‰ï¼š</p>
<pre><code class="hljs">file
â”œâ”€â”€ chunk_0
â”œâ”€â”€ chunk_1
â”œâ”€â”€ chunk_2
â””â”€â”€ chunk_n
</code></pre>
<p>æ¯ä¸ªåˆ†ç‰‡ä¸Šä¼ æ—¶æºå¸¦ï¼š</p>
<ul>
<li>æ–‡ä»¶å”¯ä¸€æ ‡è¯†ï¼ˆguid / md5ï¼‰</li>
<li>åˆ†ç‰‡ç´¢å¼•ï¼ˆchunkIndexï¼‰</li>
<li>æ€»åˆ†ç‰‡æ•°ï¼ˆtotalChunkï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-5">2. åˆ†ç‰‡ä¸Šä¼ æ¥å£</h3>
<pre><code class="hljs language-http" lang="http">POST /file/chunk/upload
</code></pre>
<hr/>
<h2 data-id="heading-6">å››ã€æ–­ç‚¹ç»­ä¼ å®ç°</h2>
<h3 data-id="heading-7">1. æŸ¥è¯¢å·²ä¸Šä¼ åˆ†ç‰‡</h3>
<pre><code class="hljs language-http" lang="http">GET /file/chunk/uploaded?guid=xxx
</code></pre>
<p>è¿”å›ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span>
</code></pre>
<p>å‰ç«¯åªä¸Šä¼ ç¼ºå¤±åˆ†ç‰‡å³å¯ã€‚</p>
<hr/>
<h3 data-id="heading-8">2. å®ç°åŸåˆ™</h3>
<ul>
<li>æ˜¯å¦å·²ä¸Šä¼ ä»¥ã€Œå­˜å‚¨å±‚ã€ä¸ºå‡†</li>
<li>ä¸ä¾èµ–å†…å­˜æˆ– Redis</li>
<li>æœåŠ¡é‡å¯ä¸å½±å“ç»­ä¼ </li>
</ul>
<hr/>
<h2 data-id="heading-9">äº”ã€ä¸Šä¼ è¿›åº¦è®¡ç®—</h2>
<pre><code class="hljs language-text" lang="text">è¿›åº¦ = å·²ä¸Šä¼ åˆ†ç‰‡æ•° / æ€»åˆ†ç‰‡æ•° Ã— 100%
</code></pre>
<p>ç¤ºä¾‹è¿”å›ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uploaded"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"total"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"percent"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">60</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">å…­ã€å­˜å‚¨å±‚æŠ½è±¡è®¾è®¡</h2>
<h3 data-id="heading-11">1. ç»Ÿä¸€æ¥å£å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StorageService</span> {

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadChunk</span><span class="hljs-params">(String path, InputStream inputStream)</span>;

    <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String path)</span>;

    List&lt;Integer&gt; <span class="hljs-title function_">listChunks</span><span class="hljs-params">(String prefix)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">mergeChunks</span><span class="hljs-params">(String chunkPrefix, String targetPath, <span class="hljs-type">int</span> totalChunk)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteChunks</span><span class="hljs-params">(String chunkPrefix)</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-12">2. MinIO / RustFS å®ç°ï¼ˆS3 é€šç”¨ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MinioStorageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">StorageService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MinioClient minioClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String bucket;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MinioStorageService</span><span class="hljs-params">(MinioClient client, String bucket)</span> {
        <span class="hljs-built_in">this</span>.minioClient = client;
        <span class="hljs-built_in">this</span>.bucket = bucket;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadChunk</span><span class="hljs-params">(String path, InputStream inputStream)</span> {
        <span class="hljs-keyword">try</span> {
            minioClient.putObject(
                PutObjectArgs.builder()
                    .bucket(bucket)
                    .object(path)
                    .stream(inputStream, -<span class="hljs-number">1</span>, <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>)
                    .build()
            );
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ†ç‰‡ä¸Šä¼ å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">exists</span><span class="hljs-params">(String path)</span> {
        <span class="hljs-keyword">try</span> {
            minioClient.statObject(
                StatObjectArgs.builder()
                    .bucket(bucket)
                    .object(path)
                    .build()
            );
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">listChunks</span><span class="hljs-params">(String prefix)</span> {
        List&lt;Integer&gt; chunks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        Iterable&lt;Result&lt;Item&gt;&gt; results =
            minioClient.listObjects(
                ListObjectsArgs.builder()
                    .bucket(bucket)
                    .prefix(prefix)
                    .build()
            );

        <span class="hljs-keyword">for</span> (Result&lt;Item&gt; r : results) {
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> r.get().objectName();
            chunks.add(Integer.parseInt(
                name.substring(name.lastIndexOf(<span class="hljs-string">"_"</span>) + <span class="hljs-number">1</span>)));
        }
        <span class="hljs-keyword">return</span> chunks;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mergeChunks</span><span class="hljs-params">(String chunkPrefix,
                            String targetPath,
                            <span class="hljs-type">int</span> totalChunk)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; totalChunk; i++) {
                <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> minioClient.getObject(
                    GetObjectArgs.builder()
                        .bucket(bucket)
                        .object(chunkPrefix + <span class="hljs-string">"/chunk_"</span> + i)
                        .build()
                );
                IOUtils.copy(in, out);
            }
            uploadChunk(
                targetPath,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(out.toByteArray()));
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ†ç‰‡åˆå¹¶å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteChunks</span><span class="hljs-params">(String chunkPrefix)</span> {
        <span class="hljs-comment">// å¯æŒ‰éœ€å®ç°æ‰¹é‡åˆ é™¤</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-13">ä¸ƒã€ä¸šåŠ¡ Service å®ç°</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileUploadServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FileUploadService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StorageService storageService;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadChunk</span><span class="hljs-params">(ChunkUploadDTO dto)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> dto.getGuid() + <span class="hljs-string">"/chunk_"</span> + dto.getChunkIndex();
        <span class="hljs-keyword">if</span> (storageService.exists(path)) {
            <span class="hljs-keyword">return</span>;
        }
        storageService.uploadChunk(
            path, dto.getFile().getInputStream());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">uploadedChunks</span><span class="hljs-params">(String guid)</span> {
        <span class="hljs-keyword">return</span> storageService.listChunks(guid + <span class="hljs-string">"/"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(String guid, <span class="hljs-type">int</span> totalChunk)</span> {
        storageService.mergeChunks(
            guid, guid + <span class="hljs-string">".final"</span>, totalChunk);
        storageService.deleteChunks(guid + <span class="hljs-string">"/"</span>);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-14">å…«ã€Controller æ¥å£</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/file/chunk")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileUploadController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> FileUploadService fileUploadService;

    <span class="hljs-meta">@PostMapping("/upload")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">upload</span><span class="hljs-params">(ChunkUploadDTO dto)</span> <span class="hljs-keyword">throws</span> IOException {
        fileUploadService.uploadChunk(dto);
    }

    <span class="hljs-meta">@GetMapping("/uploaded")</span>
    <span class="hljs-keyword">public</span> List&lt;Integer&gt; <span class="hljs-title function_">uploaded</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String guid)</span> {
        <span class="hljs-keyword">return</span> fileUploadService.uploadedChunks(guid);
    }

    <span class="hljs-meta">@PostMapping("/merge")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String guid,
                      <span class="hljs-meta">@RequestParam</span> Integer totalChunk)</span> {
        fileUploadService.merge(guid, totalChunk);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-15">ä¹ã€æ€»ç»“</h2>
<p>æœ¬æ–‡å®ç°äº†ä¸€å¥— <strong>Spring Boot å¤§æ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆ</strong>ï¼Œå…·å¤‡ï¼š</p>
<ul>
<li>åˆ†ç‰‡ä¸Šä¼ </li>
<li>æ–­ç‚¹ç»­ä¼ </li>
<li>ä¸Šä¼ è¿›åº¦è®¡ç®—</li>
<li>å¤šå­˜å‚¨åç«¯è§£è€¦</li>
<li>yml é…ç½®å¿«é€Ÿåˆ‡æ¢</li>
</ul>
<p>é€‚ç”¨äºæ–‡ä»¶ä¸­å¿ƒã€æ•°æ®å¹³å°ã€ä¼ä¸šç½‘ç›˜ç­‰åœºæ™¯ï¼Œ<strong>å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒ</strong>ã€‚</p>
<hr/>
<p><strong>æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºäº¤æµã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSå¼¹çª—+bindSheetåŠæ¨¡æ€+æµ®å±‚é€šç”¨è§£å†³æ–¹æ¡ˆè¦†ç›–å…¨ä¸šåŠ¡åœºæ™¯]]></title>    <link>https://juejin.cn/post/7590608345923518490</link>    <guid>https://juejin.cn/post/7590608345923518490</guid>    <pubDate>2026-01-03T14:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590608345923518490" data-draft-id="7590592594674892810" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSå¼¹çª—+bindSheetåŠæ¨¡æ€+æµ®å±‚é€šç”¨è§£å†³æ–¹æ¡ˆè¦†ç›–å…¨ä¸šåŠ¡åœºæ™¯"/> <meta itemprop="keywords" content="HarmonyOS,Android"/> <meta itemprop="datePublished" content="2026-01-03T14:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’Ÿç¿"/> <meta itemprop="url" content="https://juejin.cn/user/703287125625901"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSå¼¹çª—+bindSheetåŠæ¨¡æ€+æµ®å±‚é€šç”¨è§£å†³æ–¹æ¡ˆè¦†ç›–å…¨ä¸šåŠ¡åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/703287125625901/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’Ÿç¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T14:36:02.000Z" title="Sat Jan 03 2026 14:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»api9å¼€å§‹å¼€å‘é¸¿è’™çš„å¤§ä½¬ä»¬æƒ³å¿…ä¸€å¼€å§‹è¢«å¼¹çª—æŠ˜è…¾å¾—æœ‰ç‚¹éš¾å—ï¼Œä½¿ç”¨èµ·æ¥å„ç§ä¸é¡ºæ‰‹ä¸”ä¸æ–¹ä¾¿è¿˜æœ‰å„ç§é™åˆ¶ï¼Œ
å°¤å…¶æ˜¯é¢å¯¹å¤æ‚ä¸”å¤šæ ·åŒ–çš„éœ€æ±‚è®¾è®¡åœºæ™¯ä¸‹å¤ªéš¾å—äº†ï¼Œè¿˜å¥½ComponentContentåœ¨api12çš„ç‰ˆæœ¬å‡ºç°äº†</p>
<p><strong>ComponentContentçš„å‡ºç°èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p>
<p>ä»¥CustomDialogå¼¹çª—ä¸ºä¾‹ï¼Œå¦‚æœè¦ä½¿ç”¨å¼¹çª—CustomDialogControllerå¿…é¡»å®šä¹‰åœ¨é¡µé¢ä¸­ï¼Œé€šè¿‡CustomDialogControlleræ§åˆ¶å¼¹çª—æ˜¾ç¤ºéšè—ï¼Œè¿™æ ·å°±è‡³å°‘å¸¦æ¥2ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>1ï¼šå“ªé‡Œéœ€è¦å¼¹çª—å°±éœ€è¦åœ¨å“ªé‡Œå£°æ˜CustomDialogControllerï¼Œä¸èƒ½ç›´æ¥åœ¨å…¶ä»–æ™®é€šç±»ï¼ˆé@Componentï¼‰ç›´æ¥ä½¿ç”¨å¼¹çª—ï¼Œè¿™æ ·å°±å¯¼è‡´æŠŠå¼¹çª—çš„éƒ¨åˆ†é€»è¾‘å¼ºåˆ¶è€¦åˆåœ¨é¡µé¢ä¸Šï¼Œä¸šåŠ¡è¶Šå¤æ‚ï¼Œè€¦åˆåº¦è¶Šé«˜</p>
</blockquote>
<blockquote>
<p>2ï¼šåœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸‹å¼¹çª—ä¸æ–¹ä¾¿æ”¹æˆæ™®é€šé¡µé¢æˆ–è€…æ™®é€šç»„ä»¶</p>
</blockquote>
<p><strong>è€Œé€šè¿‡ComponentContentå®ç°å¼¹çª—çš„æ–¹æ¡ˆåªéœ€è¦ä¸€ä¸ªuiContextå³å¯åœ¨ä»»æ„åœ°æ–¹æ§åˆ¶å¼¹çª—æ˜¾ç¤ºï¼Œè€Œä¸”è¿˜èƒ½å¿«é€Ÿçš„æ”¹é€ æˆå…¶ä»–é¡µé¢ã€ç»„ä»¶ã€ç”šè‡³æ˜¯overlay(æµ®å±‚)å’ŒbindSheet(åŠæ¨¡æ€)ä¸”å…¥ä¾µæ€§æä½</strong></p>
<p><strong>åŸºäºComponentContentå®ç°çš„å¼¹çª—æœ‰å¤šæ–¹ä¾¿ï¼Ÿ</strong><br/>
æ˜¾ç¤ºå¼¹çª—çš„æ ¸å¿ƒä»£ç å°±ä¸‰è¡Œ(å®ä¾‹åŒ–Dialogï¼Œè®¾ç½®è§†å›¾ï¼Œæ˜¾ç¤ºå¼¹çª—)ï¼Œä»¥å‰åšAndroidå¼€å‘çš„åº”è¯¥å¯¹è¿™ä¸ªå†™æ³•å¾ˆç†Ÿæ‚‰</p>
<pre><code class="hljs language-text" lang="text">import { BaseDialog, ComponentParam } from '@zhongrui/easy_dialog'

@Entry
@Component
struct Page {
  build() {
    Column() {
      Button('æ˜¾ç¤ºå¼¹çª—').onClick(() =&gt; {
        //åªè¦æœ‰uiContextï¼Œæ­¤å¤„æ˜¾ç¤ºå¼¹çª—çš„ä»£ç å¯ä»¥å†™åˆ°ä¸»çº¿ç¨‹çš„ä»»æ„åœ°æ–¹
        const dialog = new BaseDialog(this.getUIContext())
        //ä¼ å…¥å¼¹çª—è§†å›¾å’Œå‚æ•°
        dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
        dialog.show()
      })
      
      //å¼¹çª—çš„è§†å›¾ä»¥ç»„ä»¶çš„å½¢å¼åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨
      DialogView({ param: new ComponentParam('è‡ªå®šä¹‰å‚æ•°') })
    }
    .height('100%')
    .width('100%')
  }
}

@Builder
function dialogView(param: ComponentParam&lt;string&gt;) {
  DialogView({ param: param })
}

@ComponentV2
struct DialogView {
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')

  build() {
    Button('é”€æ¯å¼¹çª—').onClick(() =&gt; {
      this.param.dismiss()
    })
  }
}
</code></pre>
<p><strong>åŸºäºComponentContentå®ç°çš„å¼¹çª—å¦‚ä½•å¿«é€Ÿæ”¹é€ æˆé¡µé¢ã€ç»„ä»¶ã€ç”šè‡³æ˜¯overlay(æµ®å±‚)å’ŒbindSheet(åŠæ¨¡æ€)</strong></p>
<pre><code class="hljs language-text" lang="text">//å¼¹çª—çš„è§†å›¾ä»¥ç»„ä»¶çš„å½¢å¼åœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨,å…¶ä»–åœ°æ–¹å¯ä»¥ä¸åšä»»ä½•ä¿®æ”¹ç¼–è¯‘ä¸ä¼šæŠ¥é”™
DialogView({ param: new ComponentParam('è‡ªå®šä¹‰å‚æ•°') })
</code></pre>
<pre><code class="hljs language-text" lang="text">//æ”¹æˆoverlayæµ®å±‚
const dialog = new BaseOverlay(this.getUIContext())
dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
dialog.show()
</code></pre>
<pre><code class="hljs language-text" lang="text">//æ”¹æˆbindSheetåŠæ¨¡æ€
const dialog = new BaseSheet(this.getUIContext(),'é¡µé¢ç»„ä»¶id')
dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
dialog.show()
</code></pre>
<p>æ²¡é”™ï¼Œåªéœ€è¦åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œæ”¹ä¸ªåå­—å°±è¡Œäº†</p>
<h2 data-id="heading-1">ä¸‹è½½å®‰è£…</h2>
<blockquote>
<p>ohpm install @zhongrui/easy_dialog</p>
</blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fohpm.openharmony.cn%2F%23%2Fcn%2Fdetail%2F%40zhongrui%252Feasy_dialog" target="_blank" title="https://ohpm.openharmony.cn/#/cn/detail/@zhongrui%2Feasy_dialog" ref="nofollow noopener noreferrer">easy_dialogå¼€æºåº“ä¸­å¿ƒä»“(<strong>apiè¯¦ç»†ä½¿ç”¨è¯´æ˜</strong>)</a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fdeveloper_zhongrui%2FEasyDialog" target="_blank" title="https://gitcode.com/developer_zhongrui/EasyDialog" ref="nofollow noopener noreferrer">æºç åœ°å€</a></p>
<h2 data-id="heading-2">æ•ˆæœå›¾</h2>

















<table><thead><tr><th/><th/></tr></thead><tbody><tr><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a91eb6c0ada4a0db5b73bec4c625887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZKf552_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768056170&amp;x-signature=Ax%2FS0IlDVFpOqd3YJxRllrwbMGs%3D" alt="11.gif" loading="lazy"/></td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7deca0fbb9d42229108ebaa4563b164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZKf552_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768056170&amp;x-signature=VqWhrWUaa8BZR2LvIBc2ngfwZK0%3D" alt="22.gif" loading="lazy"/></td></tr><tr><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2f221726b11459d8d4b455cb28bcb38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZKf552_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768056170&amp;x-signature=HunJ0aeLPeMTA%2FvajSGpk6VOrls%3D" alt="33.gif" loading="lazy"/></td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/657701258ed946718e35b3b6dbc86437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZKf552_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768056170&amp;x-signature=vYgNVATHMUrPe3%2BU6GcJTt%2BPFcg%3D" alt="44.gif" loading="lazy"/></td></tr></tbody></table>
<p><strong>å½“å‡ºç°ä»¥ä¸‹åœºæ™¯æ—¶ä½¿ç”¨easy_dialogè½»æ¾åº”å¯¹</strong></p>
<ul>
<li>
<p>åœºæ™¯1ï¼šä¸åŒé¡µé¢æ˜¾ç¤ºåŒä¸€ä¸ªå¼¹çª—æ—¶ï¼Œå¼¹çª—ä¸Šé¢æŸäº›åŸ‹ç‚¹ä¸ŠæŠ¥éœ€è¦ä¸ŠæŠ¥ä¸åŒé¡µé¢æ¥æºï¼ˆé¡µé¢ä¼ é€’å‚æ•°ç»™å¼¹çª—è§†å›¾ï¼‰</p>
</li>
<li>
<p>åœºæ™¯2ï¼šåœ¨å¼¹çª—çš„è§†å›¾ä¸Šæ‰§è¡ŒæŸä¸ªæ“ä½œä¹‹åï¼Œéœ€è¦å°†æŸäº›æ•°æ®åŒæ­¥ç»™é¡µé¢ï¼ˆå¼¹çª—è§†å›¾å’Œé¡µé¢é€šä¿¡ï¼‰</p>
</li>
<li>
<p>åœºæ™¯3ï¼šé¡µé¢æ»¡è¶³æŸä¸ªçŠ¶æ€æ—¶ï¼Œéœ€è¦å°†æŸäº›æ•°æ®åŒæ­¥ç»™å¼¹çª—è§†å›¾ï¼ˆé¡µé¢å’Œå¼¹çª—è§†å›¾é€šä¿¡ï¼‰</p>
</li>
<li>
<p>åœºæ™¯4ï¼šé¡µé¢å‡ºç°å¤šä¸ªè¿è¥æ´»åŠ¨å¼¹çª—ï¼Œäº§å“è¦æ±‚å‡ºç°å¤šä¸ªå¼¹çª—çš„åœºæ™¯ï¼Œä¸Šä¸€ä¸ªå¼¹çª—æ¶ˆå¤±æ—¶ï¼Œä¸‹ä¸€ä¸ªå¼¹çª—æ‰èƒ½å‡ºç°ï¼Œä¸èƒ½åŒæ—¶æ˜¾ç¤º</p>
</li>
<li>
<p>åœºæ™¯5ï¼šé¡µé¢ï¼Œå¼¹çª—ï¼ŒåŠæ¨¡æ€ä¹‹é—´åˆ‡æ¢<br/>
é¢†å¯¼ï¼šè¿™ä¸ªç™»å½•é¡µé¢ä½ æ”¹æˆå¼¹çª—å®ç°å§<br/>
æˆ‘ï¼šä¿®æ”¹è¿™ä¸ªå¤§æ¦‚éœ€è¦1ä¸ªå°æ—¶(å°†é¡µé¢æ”¹æˆå¼¹çª—ç”¨easy_dialogå®é™…ä¸Š10åˆ†é’Ÿä¸åˆ°å°±æ”¹å®Œäº†)<br/>
é¢†å¯¼ï¼šè¿™ä¸ªå¼¹çª—èƒ½ä¸èƒ½æ»‘ä¸Šå»ï¼Œæˆ‘çœ‹å…¶ä»–appæœ‰è¿™ä¸ªæ•ˆæœï¼Œèƒ½ä¸èƒ½æ”¹æˆè¿™æ ·çš„æ•ˆæœï¼Ÿ<br/>
æˆ‘ï¼šæˆ‘ç…ç…ï¼Œå™¢~è¿™ä¸ªåŠæ¨¡æ€æ•ˆæœå•Šï¼Œå¯ä»¥æ”¹çš„<br/>
é¢†å¯¼ï¼šæˆ‘å¬å…¶ä»–å¼€å‘è¯´è¿™æ˜¯bindSheetï¼Œä½ å†èŠ±1å°æ—¶ç ”ç©¶ä¸‹æ€ä¹ˆå®ç°çš„<br/>
æˆ‘ï¼šå¥½çš„å¥½çš„ï¼ˆç”¨2ç§’é’ŸæŠŠBaseDialogæ”¹æˆäº†BaseSheetï¼Œç„¶åæ‘¸é±¼59åˆ†é’Ÿåå»ç»™é¢†å¯¼æ¼”ç¤ºæ•ˆæœï¼‰</p>
</li>
</ul>
<p>å®ç°ä¸Šè¿°åœºæ™¯çš„éœ€æ±‚ï¼Œæ ¸å¿ƒæ˜¯è§£è€¦çš„æ¡ä»¶ä¸‹è¿›è¡Œä¼ å‚å’Œé€šä¿¡ï¼Œåªè¦è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜é‚£ä¹ˆè¯¥æ–¹æ¡ˆå°±èƒ½è¦†ç›–99%ä»¥ä¸Šçš„ä¸šåŠ¡åœºæ™¯</p>
<blockquote>
<p>åœºæ™¯1ï¼šä¸åŒé¡µé¢æ˜¾ç¤ºåŒä¸€ä¸ªå¼¹çª—æ—¶ï¼Œå¼¹çª—ä¸Šé¢æŸäº›åŸ‹ç‚¹ä¸ŠæŠ¥éœ€è¦ä¸ŠæŠ¥ä¸åŒé¡µé¢æ¥æº</p>
</blockquote>
<pre><code class="hljs language-text" lang="text">const dialog = new BaseDialog(this.getUIContext())
dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
//é€šè¿‡Tagç»™Dialogè®¾ç½®é¡µé¢æ¥æº
dialog.addTag('pageSource','xxx')
dialog.show()

@Builder
function dialogView(param: ComponentParam&lt;string&gt;) {
  DialogView({ param: param })
}
</code></pre>
<pre><code class="hljs language-text" lang="text">@ComponentV2
struct DialogView {
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')

  aboutToAppear(): void {
    //è·å–é¡µé¢æ¥æº
    const pageSource = this.param.getTag('pageSource')
  }

  build() {
    Text()
  }
}
</code></pre>
<blockquote>
<p>åœºæ™¯2ï¼šåœ¨å¼¹çª—çš„è§†å›¾ä¸Šæ‰§è¡ŒæŸä¸ªæ“ä½œä¹‹åï¼Œéœ€è¦å°†æŸäº›æ•°æ®åŒæ­¥ç»™é¡µé¢</p>
</blockquote>
<pre><code class="hljs language-text" lang="text">@Entry
@Component
struct Page {
  build() {
    Column() {
      Button('æ˜¾ç¤ºå¼¹çª—').onClick(() =&gt; {
        const dialog = new BaseDialog(this.getUIContext())
        dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
        //æ³¨å†Œäº‹ä»¶ï¼Œæ¥æ”¶å¼¹çª—è§†å›¾å‘é€çš„äº‹ä»¶
        dialog.addEvent&lt;string&gt;('key', (data) =&gt; {
          //è·å–äº‹ä»¶ä¼ çš„å‚æ•°
          const result = data
          return 'è¿”å›å€¼'
        })
        dialog.show()
      })
    }
    .height('100%')
    .width('100%')
  }
}

@Builder
function dialogView(param: ComponentParam&lt;string&gt;) {
  DialogView({ param: param })
}
</code></pre>
<pre><code class="hljs language-text" lang="text">@ComponentV2
struct DialogView {
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')

  build() {
    Text('xxxæ“ä½œ').onClick(() =&gt; {
      //ç»™Dialogå‘é€äº‹ä»¶ä¸”è·å–ç»“æœ
      const result = this.param.sendEvent('key', 'è‡ªå®šä¹‰æ•°æ®')
    })
  }
}
</code></pre>
<blockquote>
<p>åœºæ™¯3ï¼šé¡µé¢æ»¡è¶³æŸä¸ªçŠ¶æ€æ—¶ï¼Œéœ€è¦å°†æŸäº›æ•°æ®åŒæ­¥ç»™å¼¹çª—è§†å›¾ï¼ˆé¡µé¢å’Œå¼¹çª—è§†å›¾é€šä¿¡ï¼‰</p>
</blockquote>
<pre><code class="hljs language-text" lang="text">import { BaseDialog, ComponentParam } from '@zhongrui/easy_dialog'

@Entry
@Component
struct Page {
  build() {
    Column() {
      Button('æ˜¾ç¤ºå¼¹çª—').onClick(() =&gt; {
        const dialog = new BaseDialog(this.getUIContext())
        dialog.setContentView(wrapBuilder(dialogView), new ComponentParam('è‡ªå®šä¹‰å‚æ•°'))
        dialog.show()

        setTimeout(() =&gt; {
          //æ¨¡æ‹Ÿè§¦å‘æŸä¸ªçŠ¶æ€
          //ç»™å¼¹çª—è§†å›¾å‘é€äº‹ä»¶å¹¶è·å–è¿”å›å€¼
          const result = dialog.sendEvent('key', 'è‡ªå®šä¹‰æ•°æ®')
        }, 2000)
      })
    }
    .height('100%')
    .width('100%')
  }
}

@Builder
function dialogView(param: ComponentParam&lt;string&gt;) {
  DialogView({ param: param })
}
</code></pre>
<pre><code class="hljs language-text" lang="text">@ComponentV2
struct DialogView {
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')

  aboutToAppear(): void {
    //æ³¨å†Œäº‹ä»¶ï¼Œæ¥æ”¶dialogå‘é€çš„äº‹ä»¶
    this.param.addEvent&lt;string&gt;('key', (data) =&gt; {
      //è·å–äº‹ä»¶ä¼ çš„å‚æ•°
      const result = data
      return 'è¿”å›å€¼'
    })
  }

  build() {
  }
}
</code></pre>
<blockquote>
<p>åœºæ™¯4ï¼šé¡µé¢å‡ºç°å¤šä¸ªè¿è¥æ´»åŠ¨å¼¹çª—ï¼Œäº§å“è¦æ±‚å‡ºç°å¤šä¸ªå¼¹çª—çš„åœºæ™¯ï¼Œä¸Šä¸€ä¸ªå¼¹çª—æ¶ˆå¤±æ—¶ï¼Œä¸‹ä¸€ä¸ªå¼¹çª—æ‰èƒ½å‡ºç°ï¼Œä¸èƒ½åŒæ—¶æ˜¾ç¤º</p>
</blockquote>
<pre><code class="hljs language-text" lang="text">import { BaseDialog, ComponentParam, DialogManager } from '@zhongrui/easy_dialog'

@Entry
@Component
struct Page {
  build() {
    Column() {
      Button('æ˜¾ç¤ºå¼¹çª—').onClick(() =&gt; {
        const dialog1 = new BaseDialog(this.getUIContext())
        dialog1.setContentView(wrapBuilder(dialogView), new ComponentParam('ç¬¬1ä¸ªå¼¹çª—'))

        const dialog2 = new BaseDialog(this.getUIContext())
        dialog2.setContentView(wrapBuilder(dialogView), new ComponentParam('ç¬¬2ä¸ªå¼¹çª—'))

        const dialog3 = new BaseDialog(this.getUIContext())
        dialog3.setContentView(wrapBuilder(dialogView), new ComponentParam('ç¬¬3ä¸ªå¼¹çª—'))

        DialogManager.get('def').show(dialog1)
        DialogManager.get('def').show(dialog2)
        DialogManager.get('def').show(dialog3)
        //æˆ–è€…
        DialogManager.get('def').addDialog(dialog1)
        DialogManager.get('def').addDialog(dialog2)
        DialogManager.get('def').addDialog(dialog3)
        DialogManager.get('def').show()
      })
    }
    .height('100%')
    .width('100%')
  }
}

@Builder
function dialogView(param: ComponentParam&lt;string&gt;) {
  DialogView({ param: param })
}
</code></pre>
<pre><code class="hljs language-text" lang="text">@ComponentV2
struct DialogView {
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')

  build() {
    Button('å–æ¶ˆå¼¹çª—').onClick(() =&gt; {
      this.param.dismissAndShowNext()
    })
  }
}
</code></pre>
<h2 data-id="heading-3">å®é™…é¡¹ç›®ç”¨æ³•</h2>
<blockquote>
<p>1ï¼šæ–°å»ºä¸€ä¸ªæ™®é€šç±»æ¯”å¦‚LoginDialogï¼Œç»§æ‰¿BaseDialogæˆ–BaseOverlayæˆ–BaseSheet<br/>
2ï¼šåˆ›å»ºä¸€ä¸ªé™æ€æ–¹æ³•å¯¹å¤–æä¾›ï¼Œå“ªä¸ªé¡µé¢éœ€è¦æ˜¾ç¤ºå¼¹çª—ï¼Œè°ƒç”¨é™æ€æ–¹æ³•å³å¯ï¼Œé¡µé¢ä¸ç”¨å…³å¿ƒå¼¹çª—çš„åˆ›å»ºé€»è¾‘ä»¥åŠå¼¹çª—å†…éƒ¨äº¤äº’é€»è¾‘<br/>
3ï¼š@Builderè£…é¥°çš„functionæ–¹æ³•å®šä¹‰åœ¨LoginDialogæ–‡ä»¶é‡Œé¢<br/>
4ï¼šé‡åˆ°å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œéƒ¨åˆ†ä¸šåŠ¡é€»è¾‘åœ¨LoginDialogç±»ä¸­å•ç‹¬é—­ç¯ä¸å¤–éƒ¨é¡µé¢å®Œå…¨è§£è€¦</p>
</blockquote>
<h3 data-id="heading-4">é¡µé¢</h3>
<pre><code class="hljs language-text" lang="text">import { LoginDialog, LoginResult } from '../test/LoginDialog'

@Entry
@Component
struct Page {
  build() {
    Column() {
      Button('æ˜¾ç¤ºç™»å½•å¼¹çª—').onClick(() =&gt; {
        LoginDialog.showDialog(this.getUIContext(), '156xxx8888', (result: LoginResult) =&gt; {
          //è·å–ç™»å½•ç»“æœ
        })
      })
    }
    .height('100%')
    .width('100%')
  }
}
</code></pre>
<h3 data-id="heading-5">LoginDialogç±»</h3>
<pre><code class="hljs language-text" lang="text">import { BaseDialog, ComponentParam } from '@zhongrui/easy_dialog';
import { LoginDialogView } from './LoginDialogView';

export interface LoginParam {
  phone: string
}

export interface LoginResult {
  phone: string
  userName: string
  pwd: string
}

@Builder
function dialogView(param: ComponentParam&lt;LoginParam&gt;) {
  LoginDialogView({ param: param })
}

export class LoginDialog extends BaseDialog {
  public static showDialog(uiContext: UIContext, phone: string,
    loginSuccess: (data: LoginResult) =&gt; void): LoginDialog {
    //æ„é€ ä¸šåŠ¡å‚æ•°
    const data: ComponentParam&lt;LoginParam&gt; = new ComponentParam&lt;LoginParam&gt;({ phone: phone })
    //åˆ›å»ºå¼¹çª—
    const dialog = new LoginDialog(uiContext)
    //è®¾ç½®è§†å›¾
    dialog.setContentView(wrapBuilder(dialogView), data)
    //è®¾ç½®å¼¹çª—å‚æ•°promptAction.BaseDialogOptionsï¼ˆå’Œå®˜ç½‘æ–‡æ¡£ä¸€è‡´ï¼‰
    //maskRect,alignment,offset,isModal,showInSubWindow,onWillDismiss,autoCancel
    //maskColor,transition,dialogTransitionç­‰
    dialog.setOption({})
    //è®¾ç½®tag
    dialog.addTag('key', 'è‡ªå®šä¹‰å‚æ•°')
    //æ³¨å†Œç™»å½•æˆåŠŸäº‹ä»¶
    dialog.addEvent&lt;LoginResult&gt;('success', (data: LoginResult | undefined) =&gt; {
      if (!data) {
        return
      }
      loginSuccess?.(data)
    })
    //æ˜¾ç¤ºå¼¹çª—
    dialog.show()
    return dialog
  }

  //å¯ä»¥å®šä¹‰å…¶ä»–æ–¹æ³•æ ¹æ®å®é™…åœºæ™¯å¤„ç†ä¸€äº›é¢å¤–çš„ä¸šåŠ¡é€»è¾‘
  public otherMethod() {
    this.addTag('key', 'value')
  }
}
</code></pre>
<h3 data-id="heading-6">LoginDialogè§†å›¾</h3>
<pre><code class="hljs language-text" lang="text">import { ComponentParam } from '@zhongrui/easy_dialog'
import { LoginParam, LoginResult } from './LoginDialog'

@ComponentV2
export struct LoginDialogView {
  @Param param: ComponentParam&lt;LoginParam&gt; = new ComponentParam&lt;LoginParam&gt;({ phone: '' })
  @Local phone: string = ''

  aboutToAppear(): void {
    this.phone = this.param.data.phone
    //å¯ä»¥è·å–å…¶ä»–å‚æ•°
    this.param.getTag('key')
  }

  build() {
    Column() {
      Text("æ‰‹æœºå·ï¼š" + this.phone)
      Button('ç™»å½•').onClick(() =&gt; {
        //ç™»å½•æˆåŠŸ
        const result: LoginResult = {
          phone: this.phone,
          userName: 'Harmony',
          pwd: 'OpenHarmony'
        }
        //å‘é€ç™»å½•æˆåŠŸäº‹ä»¶
        this.param.sendEvent('success', result)
        //éšè—å¼¹çª—
        this.param.dismiss()
      })
    }
  }
}
</code></pre>
<h2 data-id="heading-7">è¿›é˜¶ç”¨æ³•</h2>
<h3 data-id="heading-8">å…¬å…±éƒ¨åˆ†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//é™¤äº†æ„é€ å‡½æ•°èƒ½è®¾ç½®ä¸šåŠ¡å‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡setDataè®¾ç½®ï¼Œæ”¯æŒå„ç§ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ComponentParam</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentParam</span>(<span class="hljs-string">'è‡ªå®šä¹‰å‚æ•°'</span>)
data.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'xxx'</span>)

<span class="hljs-comment">//Dialog(è‡ªå®šä¹‰å¼¹çª—)</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">dialog</span>: <span class="hljs-title class_">AbsDialog</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseDialog</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>())
<span class="hljs-comment">//Overlay(æµ®å±‚)</span>
dialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseOverlay</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>())
<span class="hljs-comment">//bindSheet(åŠæ¨¡æ€å¼¹çª—)</span>
dialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseSheet</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-string">'contentId'</span>)

<span class="hljs-comment">//Dialog(è‡ªå®šä¹‰å¼¹çª—)è®¾ç½®ç»‘å®šçš„ç»„ä»¶id</span>
<span class="hljs-comment">//è™½ç„¶ä¸è®¾ç½®ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯åç»­Navigationè·³è½¬çš„é¡µé¢éƒ½ä¼šè¢«å¼¹çª—è¦†ç›–ï¼Œæ ¹æ®å®é™…åœºæ™¯è°ƒç”¨å³å¯</span>
dialog.<span class="hljs-title function_">setComponentId</span>(<span class="hljs-string">'contentId'</span>)

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)è®¾ç½®å®ä¾‹åŒ–ComponentContentçš„å‚æ•°ï¼Œæ‰€ä»¥setBuildOptionå¿…é¡»åœ¨setContentViewä¹‹å‰è°ƒç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">buildOption</span>: <span class="hljs-title class_">BuildOptions</span> = {}
dialog.<span class="hljs-title function_">setBuildOption</span>(buildOption)

<span class="hljs-comment">//è®¾ç½®å¼¹çª—è§†å›¾</span>
dialog.<span class="hljs-title function_">setContentView</span>(<span class="hljs-title function_">wrapBuilder</span>(dialogView), data)

<span class="hljs-comment">//æ³¨å†Œäº‹ä»¶ï¼Œæ¥æ”¶è§†å›¾å‘é€çš„äº‹ä»¶ï¼Œè·å–äº‹ä»¶å‚æ•°çš„åŒæ—¶ï¼Œæ”¯æŒè®¾ç½®è¿”å›å€¼</span>
dialog.<span class="hljs-property">addEvent</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">'key'</span>, <span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span></span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>
})
dialog.<span class="hljs-property">addEvent</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'key'</span>, <span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span></span>) =&gt;</span> {
})
<span class="hljs-comment">//åˆ é™¤å•ä¸ªäº‹ä»¶</span>
dialog.<span class="hljs-title function_">deleteEvent</span>(<span class="hljs-string">'key'</span>)

<span class="hljs-comment">//ç»™ç»„ä»¶è§†å›¾å‘é€äº‹ä»¶(ä¸æ˜¯dialog.addEventæ³¨å†Œçš„äº‹ä»¶)å¹¶è·å–äº‹ä»¶çš„è¿”å›å€¼</span>
<span class="hljs-keyword">const</span> result1 = dialog.<span class="hljs-title function_">sendEvent</span>(<span class="hljs-string">'key'</span>)
<span class="hljs-keyword">const</span> result2 = dialog.<span class="hljs-title function_">sendEvent</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'è‡ªå®šä¹‰ç±»å‹å‚æ•°'</span>)

<span class="hljs-comment">//æ¸…é™¤Dialogæ³¨å†Œçš„æ‰€æœ‰äº‹ä»¶</span>
dialog.<span class="hljs-title function_">clearDialogRegisterEvent</span>()

<span class="hljs-comment">//æ¸…é™¤è§†å›¾æ³¨å†Œçš„æ‰€æœ‰äº‹ä»¶</span>
dialog.<span class="hljs-title function_">clearComponentRegisterEvent</span>()

<span class="hljs-comment">//æ¸…é™¤Dialogæ³¨å†Œçš„äº‹ä»¶+å½“å‰ç»„ä»¶æ³¨å†Œçš„äº‹ä»¶</span>
dialog.<span class="hljs-title function_">clearAllEvent</span>()

<span class="hljs-comment">//è®¾ç½®tagï¼Œåœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥é€šè¿‡getTagå¯ä»¥è·å–</span>
dialog.<span class="hljs-title function_">setTag</span>(<span class="hljs-string">'xxx'</span>)

<span class="hljs-comment">//æ·»åŠ tagï¼Œæ”¯æŒå„ç§ç±»å‹ï¼Œåœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥é€šè¿‡getTag(key)å¯ä»¥è·å–</span>
dialog.<span class="hljs-title function_">addTag</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'value'</span>)

<span class="hljs-comment">//è·å–tagï¼Œä¸ä¼ keyè·å–setTag('xxx')çš„å€¼ï¼Œä¼ keyè·å–addTag('key', 'value')çš„å€¼</span>
<span class="hljs-comment">//åœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥è·å–</span>
dialog.<span class="hljs-title function_">getTag</span>(<span class="hljs-string">'key'</span>)

<span class="hljs-comment">//åˆ é™¤tag</span>
dialog.<span class="hljs-title function_">deleteTag</span>(<span class="hljs-string">'key'</span>)

<span class="hljs-comment">//æ¸…é™¤tagï¼Œtrue:æ¸…é™¤æ‰€æœ‰tagï¼Œfalse:åªæ¸…é™¤addTag('key', 'value')çš„å€¼,ä¸æ¸…é™¤setTag('xxx')çš„å€¼</span>
dialog.<span class="hljs-title function_">clearTag</span>(<span class="hljs-literal">true</span>)

<span class="hljs-comment">//æ˜¾ç¤ºå¼¹çª—</span>
dialog.<span class="hljs-title function_">show</span>()

<span class="hljs-comment">//éšè—å¼¹çª—ï¼Œä¸‹æ¬¡ç›´æ¥è°ƒç”¨showæ–¹æ³•å³å¯å†æ¬¡æ˜¾ç¤º</span>
dialog.<span class="hljs-title function_">hide</span>()

<span class="hljs-comment">//é”€æ¯å¼¹çª—ï¼Œä¸‹æ¬¡æ˜¾ç¤ºå¿…é¡»é‡æ–°å®ä¾‹åŒ–</span>
dialog.<span class="hljs-title function_">dismiss</span>()

<span class="hljs-comment">//éšè—å¼¹çª—/æµ®å±‚/sheetï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ª(ç”¨äºæœ‰åºå¼¹çª—/æµ®å±‚/sheet)</span>
dialog.<span class="hljs-title function_">hideAndShowNext</span>()

<span class="hljs-comment">//éšè—å¹¶é”€æ¯å¼¹çª—/æµ®å±‚/sheetï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ª(ç”¨äºæœ‰åºå¼¹çª—/æµ®å±‚/sheet)</span>
dialog.<span class="hljs-title function_">dismissAndShowNext</span>()

<span class="hljs-comment">//åˆ¤æ–­å¼¹çª—æ˜¯å¦æ˜¾ç¤º</span>
dialog.<span class="hljs-title function_">isShowing</span>()

<span class="hljs-comment">//åˆ¤æ–­å¼¹çª—æ˜¯å¦éšè—</span>
dialog.<span class="hljs-title function_">isHide</span>()

<span class="hljs-comment">//åˆ¤æ–­å¼¹çª—æ˜¯å¦é”€æ¯</span>
dialog.<span class="hljs-title function_">isDismiss</span>()

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)ç”¨äºæ›´æ–°WrappedBuilderå¯¹è±¡å°è£…çš„builderå‡½æ•°å‚æ•°ï¼Œä¸constructorä¼ å…¥çš„å‚æ•°ç±»å‹ä¿æŒä¸€è‡´</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">newData</span>: <span class="hljs-title class_">ComponentParam</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentParam</span>(<span class="hljs-string">'è‡ªå®šä¹‰å‚æ•°'</span>)
dialog.<span class="hljs-title function_">update</span>(newData)

<span class="hljs-comment">//è§¦å‘ComponentContentä¸­çš„è‡ªå®šä¹‰ç»„ä»¶çš„å¤ç”¨</span>
dialog.<span class="hljs-title function_">reuse</span>()

<span class="hljs-comment">//è§¦å‘ComponentContentä¸­è‡ªå®šä¹‰ç»„ä»¶çš„å›æ”¶</span>
dialog.<span class="hljs-title function_">recycle</span>()

<span class="hljs-comment">//ä¼ é€’ç³»ç»Ÿç¯å¢ƒå˜åŒ–äº‹ä»¶ï¼Œè§¦å‘èŠ‚ç‚¹çš„å…¨é‡æ›´æ–°</span>
dialog.<span class="hljs-title function_">updateConfiguration</span>()
</code></pre>
<h3 data-id="heading-9">ç»„ä»¶è§†å›¾</h3>
<pre><code class="hljs language-txt" lang="txt">import { ComponentParam } from '@zhongrui/easy_dialog'

@ComponentV2
export struct DialogView {
  //å›ºå®šå†™æ³•
  @Param param: ComponentParam&lt;string&gt; = new ComponentParam('')
  @Local title: string = ''

  aboutToAppear(): void {
    //è·å–å‚æ•°
    this.title = this.param.data
    
    //æ³¨å†Œæ¥æ”¶Dialogå‘é€çš„äº‹ä»¶
    this.param.addEvent&lt;string&gt;('key', (result: string | undefined) =&gt; {
      return 'xxx'
    })
    this.param.addEvent&lt;number&gt;('key', () =&gt; {
    })
    
    //åˆ é™¤æ³¨å†Œçš„äº‹ä»¶
    this.param.deleteEvent('key')
    
    //ç»™Dialogå‘é€äº‹ä»¶å¹¶è·å–è¿”å›å€¼
    const result1 = this.param.sendEvent('key')
    const result2 = this.param.sendEvent('key', 'xxx')

    //éšè—å¼¹çª—/æµ®å±‚/sheet
    this.param.hide()
    
    //éšè—å¹¶é”€æ¯å¼¹çª—/æµ®å±‚/sheet
    this.param.dismiss()
    
    //éšè—å¼¹çª—/æµ®å±‚/sheetï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ª(ç”¨äºæœ‰åºå¼¹çª—/æµ®å±‚/sheet)
    this.param.hideAndShowNext()
    
    //éšè—å¹¶é”€æ¯å¼¹çª—/æµ®å±‚/sheetï¼Œæ˜¾ç¤ºä¸‹ä¸€ä¸ª(ç”¨äºæœ‰åºå¼¹çª—/æµ®å±‚/sheet)
    this.param.dismissAndShowNext()

    //è®¾ç½®tagï¼Œåœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥é€šè¿‡getTagå¯ä»¥è·å–
    this.param.setTag('xxx')

    //æ·»åŠ tagï¼Œæ”¯æŒå„ç§ç±»å‹ï¼Œåœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥é€šè¿‡getTag(key)å¯ä»¥è·å–
    this.param.addTag('key', 'value')

    //è·å–tagï¼Œä¸ä¼ keyè·å–setTag('xxx')çš„å€¼ï¼Œä¼ keyè·å–addTag('key', 'value')çš„å€¼
    //åœ¨dialogå’Œç»„ä»¶è§†å›¾ä¸­éƒ½å¯ä»¥è·å–
    this.param.getTag('key')

    //åˆ é™¤tag
    this.param.deleteTag('key')

    //æ¸…é™¤tagï¼Œtrue:æ¸…é™¤æ‰€æœ‰tagï¼Œfalse:åªæ¸…é™¤addTag('key', 'value')çš„å€¼,ä¸æ¸…é™¤setTag('xxx')çš„å€¼
    this.param.clearTag(true)

    //æ¸…é™¤Dialogæ³¨å†Œçš„äº‹ä»¶
    this.param.clearDialogRegisterEvent()
    
    //æ¸…é™¤å½“å‰ç»„ä»¶æ³¨å†Œçš„äº‹ä»¶
    this.param.clearComponentRegisterEvent()
    
    //æ¸…é™¤Dialogæ³¨å†Œçš„äº‹ä»¶+å½“å‰ç»„ä»¶æ³¨å†Œçš„äº‹ä»¶
    this.param.clearAllEvent()

  }

  build() {
    Text(this.title)
  }
}
</code></pre>
<h2 data-id="heading-10">å·®å¼‚éƒ¨åˆ†</h2>
<h3 data-id="heading-11">Dialog(è‡ªå®šä¹‰å¼¹çª—)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ComponentParam</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentParam</span>(<span class="hljs-string">'è‡ªå®šä¹‰å‚æ•°'</span>)
data.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'xxx'</span>)

<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseDialog</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>())
dialog.<span class="hljs-title function_">setContentView</span>(<span class="hljs-title function_">wrapBuilder</span>(dialogView), data)

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)è®¾ç½®å¼¹çª—å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: promptAction.<span class="hljs-property">BaseDialogOptions</span> = {}
dialog.<span class="hljs-title function_">setOption</span>(options)

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)åœ¨å¼¹çª—æ˜¾ç¤ºçš„æƒ…å†µä¸‹å¯ä»¥æ›´æ–°å¼¹çª—å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">dialogOption</span>: promptAction.<span class="hljs-property">BaseDialogOptions</span> = {}
dialog.<span class="hljs-title function_">updateDialog</span>(dialogOption)

dialog.<span class="hljs-title function_">show</span>()
</code></pre>
<h3 data-id="heading-12">Overlay(æµ®å±‚)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ComponentParam</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentParam</span>(<span class="hljs-string">'è‡ªå®šä¹‰å‚æ•°'</span>)
data.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'xxx'</span>)

<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseOverlay</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>())
dialog.<span class="hljs-title function_">setContentView</span>(<span class="hljs-title function_">wrapBuilder</span>(dialogView), data)

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)è®¾ç½®OverlayManagerå‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">OverlayManagerOptions</span> = {}
dialog.<span class="hljs-title function_">setOverlayManagerOption</span>(options)

<span class="hljs-comment">//æ–°å¢è§†å›¾èŠ‚ç‚¹åœ¨OverlayManagerä¸Šçš„å±‚çº§ä½ç½®ï¼Œå½“index â‰¥ 0æ—¶ï¼Œè¶Šå¤§</span>
dialog.<span class="hljs-title function_">setIndex</span>(<span class="hljs-number">1</span>)

dialog.<span class="hljs-title function_">show</span>()
</code></pre>
<h3 data-id="heading-13">bindSheet(åŠæ¨¡æ€å¼¹çª—)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ComponentParam</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentParam</span>(<span class="hljs-string">'è‡ªå®šä¹‰å‚æ•°'</span>)
data.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'xxx'</span>)

<span class="hljs-keyword">const</span> dialog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseSheet</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-string">'contentId'</span>)
dialog.<span class="hljs-title function_">setContentView</span>(<span class="hljs-title function_">wrapBuilder</span>(dialogView), data)

<span class="hljs-comment">//(å’Œå®˜æ–¹æ–‡æ¡£ä¸€è‡´)è®¾ç½®åŠæ¨¡æ€å‚æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">SheetOptions</span> = {}
dialog.<span class="hljs-title function_">setSheetOption</span>(options)

dialog.<span class="hljs-title function_">show</span>()
</code></pre>
<h2 data-id="heading-14">å†å²æ–‡ç« </h2>
<p><a href="https://juejin.cn/post/7427050728719368202" target="_blank" title="https://juejin.cn/post/7427050728719368202"><strong>HarmonyOS NEXTå¤šç¯å¢ƒ+å¤šæ¸ é“+è‡ªå®šä¹‰è·¯å¾„è¾“å‡º+è‡ªå®šä¹‰åç§°ä¸€é”®æ‰“appå’ŒhapåŒ…</strong></a></p>
<p><a href="https://juejin.cn/post/7401358349877444642" target="_blank" title="https://juejin.cn/post/7401358349877444642"><strong>HarmonyOS NEXTä¸€è¡Œä»£ç å®ç°ä»»æ„å¤„å¼¹çª—</strong></a></p>
<p><a href="https://juejin.cn/post/7397638569731358760" target="_blank" title="https://juejin.cn/post/7397638569731358760"><strong>HarmonyOS NEXTæ•°æ®åˆ—è¡¨åŠ è½½æ›´å¤š(æ— éœ€ç›‘å¬åˆ—è¡¨æ»‘åˆ°æœ€åº•éƒ¨)</strong></a></p>
<p><a href="https://juejin.cn/post/7395866502716702755" target="_blank" title="https://juejin.cn/post/7395866502716702755"><strong>HarmonyOS NEXTä¸‹æ‹‰åˆ·æ–°+ä¸Šæ‹‰åŠ è½½(çºµå‘æ¨ªå‘éƒ½æ”¯æŒ)(v1+v2è£…é¥°å™¨)</strong></a></p>
<p><a href="https://juejin.cn/post/7505633505980940297" target="_blank" title="https://juejin.cn/post/7505633505980940297"><strong>HarmonyOS NEXTå›¾ç‰‡å‹ç¼©(æ”¯æŒfd,uri,ç½‘ç»œå›¾ç‰‡,æ²™ç®±è·¯å¾„,base64,ArrayBuffer)</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æƒ³è®©ç½‘é¡µç§’å¼€ï¼Ÿè¿™äº› CSS ä¼˜åŒ–æ–¹æ³•å¸®ä½ æå®š]]></title>    <link>https://juejin.cn/post/7590961898398384166</link>    <guid>https://juejin.cn/post/7590961898398384166</guid>    <pubDate>2026-01-04T02:03:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590961898398384166" data-draft-id="7372393716092633139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æƒ³è®©ç½‘é¡µç§’å¼€ï¼Ÿè¿™äº› CSS ä¼˜åŒ–æ–¹æ³•å¸®ä½ æå®š"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,CSS"/> <meta itemprop="datePublished" content="2026-01-04T02:03:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æƒ³è®©ç½‘é¡µç§’å¼€ï¼Ÿè¿™äº› CSS ä¼˜åŒ–æ–¹æ³•å¸®ä½ æå®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:03:59.000Z" title="Sun Jan 04 2026 02:03:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£å¹³å°ã€‚è¯¥é¡¹ç›®èåˆäº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬åŸºäº <code>Tiptap</code> çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€<code>NestJs</code> åç«¯æœåŠ¡ã€<code>AI</code> é›†æˆåŠŸèƒ½å’Œå®æ—¶åä½œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ¶µç›–äº† <code>Tiptap</code> çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œåä½œåŠŸèƒ½çš„å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶æˆ– DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> è¿›è¡Œç§èŠå’¨è¯¢ï¼Œè·å–è¯¦ç»†çš„æŠ€æœ¯åˆ†äº«å’Œæœ€ä½³å®è·µã€‚</p>
<p>CSS æ€§èƒ½ä¼˜åŒ–æ˜¯å‰ç«¯å¼€å‘ä¸­çš„é‡è¦ä¸€ç¯ï¼Œç›®çš„æ˜¯æé«˜é¡µé¢åŠ è½½é€Ÿåº¦å’Œæ¸²æŸ“æ€§èƒ½ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è®²è§£ä¸€äº›å¸¸è§çš„æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-0">å‡å°‘ css æ–‡ä»¶å¤§å°</h2>
<p>å‹ç¼© CSS æ–‡ä»¶å¯ä»¥é€šè¿‡ç§»é™¤ç©ºç™½å­—ç¬¦ã€æ³¨é‡Šå’Œå†—ä½™ä»£ç æ¥å‡å°‘æ–‡ä»¶å¤§å°ï¼Œä»è€Œæé«˜åŠ è½½é€Ÿåº¦ã€‚å¸¸ç”¨å·¥å…·æœ‰ cssnano å’Œ clean-cssã€‚</p>
<p>ä½¿ç”¨ cssnano å‹ç¼© CSS æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> cssnano = <span class="hljs-built_in">require</span>(<span class="hljs-string">"cssnano"</span>);
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">"postcss"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"./style.css"</span>, <span class="hljs-function">(<span class="hljs-params">err, css</span>) =&gt;</span> {
  <span class="hljs-title function_">postcss</span>([cssnano])
    .<span class="hljs-title function_">process</span>(css, { <span class="hljs-attr">from</span>: <span class="hljs-string">"style.css"</span>, <span class="hljs-attr">to</span>: <span class="hljs-string">"styles.min.css"</span> })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
      fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">"styles.min.css"</span>, result.<span class="hljs-property">css</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>);
    });
});
</code></pre>
<p>æœ€ç»ˆè¾“å‡ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/753a0a65f414496c9d001d3a7f29a6bc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1637&amp;h=577&amp;s=57796&amp;e=png&amp;b=202020" alt="20240524112942" loading="lazy"/></p>
<p>style.css æ–‡ä»¶ä¼šè¢«å‹ç¼©åˆ° styles.min.cssã€‚</p>
<h2 data-id="heading-1">åˆ é™¤æœªä½¿ç”¨çš„ CSS</h2>
<p>é€šè¿‡å·¥å…·ï¼ˆå¦‚ PurgeCSSã€UnCSSï¼‰æ‰«æ HTML å’Œ JS æ–‡ä»¶ï¼Œåˆ é™¤æœªä½¿ç”¨çš„ CSS è§„åˆ™ï¼Œå‡å°‘ä¸å¿…è¦çš„æ ·å¼ï¼Œæé«˜æ€§èƒ½ã€‚</p>
<p>ä½¿ç”¨ PurgeCSS åˆ é™¤æœªä½¿ç”¨çš„ CSSï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">PurgeCSS</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"purgecss"</span>).<span class="hljs-property">PurgeCSS</span>;
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">new</span> <span class="hljs-title class_">PurgeCSS</span>()
  .<span class="hljs-title function_">purge</span>({
    <span class="hljs-attr">content</span>: [<span class="hljs-string">"*.html"</span>],
    <span class="hljs-attr">css</span>: [<span class="hljs-string">"styles.css"</span>],
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    <span class="hljs-comment">// ä¿å­˜ä¼˜åŒ–åçš„ CSS æ–‡ä»¶</span>
    fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">"./styles.purged.css"</span>, result[<span class="hljs-number">0</span>].<span class="hljs-property">css</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>);
  });
</code></pre>
<p>ä»£ç æ‰§è¡Œå®Œæˆä¹‹åï¼Œåªæœ‰åœ¨ä½¿ç”¨çš„ css è§„åˆ™æ‰ä¼šè¢«åº”ç”¨ï¼Œå…¶ä½™çš„éƒ½ä¼šè¢«åˆ é™¤æ‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbb4175eb7f0413ea39375223840e406~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1282&amp;h=710&amp;s=62226&amp;e=png&amp;b=1f1f1f" alt="20240524115043" loading="lazy"/></p>
<h2 data-id="heading-2">ä½¿ç”¨ CSS é¢„å¤„ç†å™¨</h2>
<p>ä½¿ç”¨ CSS é¢„å¤„ç†å™¨ï¼ˆå¦‚ Sassã€Lessã€Stylus ç­‰ï¼‰å¯ä»¥ä¸ºä½ çš„å¼€å‘å·¥ä½œå¸¦æ¥è®¸å¤šå¥½å¤„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„ä¼˜åŠ¿å’Œè¯¦ç»†çš„è§£é‡Šï¼š</p>
<h3 data-id="heading-3">å˜é‡</h3>
<p>åœ¨ CSS é¢„å¤„ç†å™¨ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰å˜é‡æ¥å­˜å‚¨é‡å¤ä½¿ç”¨çš„å€¼ï¼ˆå¦‚é¢œè‰²ã€å­—ä½“å¤§å°ã€é—´è·ç­‰ï¼‰ã€‚è¿™ä½¿å¾—ä½ çš„ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-variable">$primary-color</span>: <span class="hljs-number">#3498db</span>;
<span class="hljs-variable">$font-size</span>: <span class="hljs-number">16px</span>;

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-variable">$font-size</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-variable">$primary-color</span>;
}
</code></pre>
<h3 data-id="heading-4">åµŒå¥—</h3>
<p>é¢„å¤„ç†å™¨å…è®¸ä½ åµŒå¥— CSS è§„åˆ™ï¼Œè¿™ä½¿å¾—ä½ çš„ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚çš„é€‰æ‹©å™¨å±‚æ¬¡æ—¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-tag">nav</span> {
  <span class="hljs-selector-tag">ul</span> {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">list-style</span>: none;

    <span class="hljs-selector-tag">li</span> {
      <span class="hljs-attribute">display</span>: inline-block;
      <span class="hljs-selector-tag">a</span> {
        <span class="hljs-attribute">text-decoration</span>: none;
        <span class="hljs-attribute">color</span>: <span class="hljs-variable">$primary-color</span>;
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-5">æ··åˆå®ï¼ˆMixinsï¼‰</h3>
<p>æ··åˆå®å…è®¸ä½ å®šä¹‰ä¸€ç»„æ ·å¼ï¼Œç„¶ååœ¨å…¶ä»–åœ°æ–¹é‡å¤ä½¿ç”¨ã€‚è¿™å¯¹äºå®ç°å¯é‡ç”¨çš„å“åº”å¼è®¾è®¡æ¨¡å¼æˆ–å…¶ä»–å¤æ‚çš„æ ·å¼éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@mixin</span> border-radius(<span class="hljs-variable">$radius</span>) {
  -webkit-<span class="hljs-attribute">border-radius</span>: <span class="hljs-variable">$radius</span>;
  -moz-<span class="hljs-attribute">border-radius</span>: <span class="hljs-variable">$radius</span>;
  -ms-<span class="hljs-attribute">border-radius</span>: <span class="hljs-variable">$radius</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-variable">$radius</span>;
}

<span class="hljs-selector-class">.button</span> {
  <span class="hljs-keyword">@include</span> border-radius(<span class="hljs-number">5px</span>);
}
</code></pre>
<h3 data-id="heading-6">ç»§æ‰¿ï¼ˆExtend/Inheritï¼‰</h3>
<p>ç»§æ‰¿å…è®¸ä¸€ä¸ªé€‰æ‹©å™¨ç»§æ‰¿å¦ä¸€ä¸ªé€‰æ‹©å™¨çš„æ ·å¼ï¼Œä»è€Œå‡å°‘ä»£ç é‡å¤ï¼Œæé«˜æ ·å¼çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">%<span class="hljs-selector-tag">button</span>-styles {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-variable">$primary-color</span>;
}

<span class="hljs-selector-class">.button</span> {
  <span class="hljs-keyword">@extend</span> %button-styles;
}

<span class="hljs-selector-class">.alert-button</span> {
  <span class="hljs-keyword">@extend</span> %button-styles;
  <span class="hljs-attribute">background-color</span>: red;
}
</code></pre>
<h3 data-id="heading-7">è¿ç®—</h3>
<p>ä½ å¯ä»¥åœ¨ CSS ä¸­è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œè¿™å¯¹äºåŠ¨æ€è®¡ç®—å®½åº¦ã€é«˜åº¦ã€é—´è·ç­‰éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> - <span class="hljs-number">20px</span>; <span class="hljs-comment">// è®¡ç®—ç»“æœ</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> + <span class="hljs-number">5px</span>; <span class="hljs-comment">// è®¡ç®—ç»“æœ</span>
}
</code></pre>
<h3 data-id="heading-8">æ¨¡å—åŒ–</h3>
<p>é¢„å¤„ç†å™¨é€šå¸¸æ”¯æŒå°† CSS åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨ä¸€ä¸ªä¸»æ–‡ä»¶ä¸­å¯¼å…¥è¿™äº›æ–‡ä»¶ã€‚è¿™ä½¿å¾—ä½ çš„ CSS ä»£ç æ›´å…·å¯ç»´æŠ¤æ€§å’Œç»„ç»‡æ€§ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åœ¨ main.scss æ–‡ä»¶ä¸­</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">"variables"</span>;
<span class="hljs-keyword">@import</span> <span class="hljs-string">"mixins"</span>;
<span class="hljs-keyword">@import</span> <span class="hljs-string">"header"</span>;
<span class="hljs-keyword">@import</span> <span class="hljs-string">"footer"</span>;
</code></pre>
<h3 data-id="heading-9">æ¡ä»¶è¯­å¥å’Œå¾ªç¯</h3>
<p>é¢„å¤„ç†å™¨æ”¯æŒä½¿ç”¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯ï¼Œä»è€Œå¯ä»¥åœ¨ CSS ä¸­å®ç°æ›´å¤æ‚çš„é€»è¾‘å’Œæ¨¡å¼ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@for</span> <span class="hljs-variable">$i</span> from <span class="hljs-number">1</span> through <span class="hljs-number">3</span> {
  <span class="hljs-selector-class">.col-</span>#{<span class="hljs-variable">$i</span>} {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span> / <span class="hljs-number">3</span> * <span class="hljs-variable">$i</span>;
  }
}

<span class="hljs-keyword">@mixin</span> responsive(<span class="hljs-variable">$device</span>) {
  <span class="hljs-keyword">@if</span> <span class="hljs-variable">$device</span> == <span class="hljs-string">"mobile"</span> {
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>) {
      <span class="hljs-keyword">@content</span>;
    }
  } <span class="hljs-keyword">@else</span> if <span class="hljs-variable">$device</span> == <span class="hljs-string">"tablet"</span> {
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>) {
      <span class="hljs-keyword">@content</span>;
    }
  }
}

<span class="hljs-selector-class">.container</span> {
  <span class="hljs-keyword">@include</span> responsive(<span class="hljs-string">"mobile"</span>) {
    <span class="hljs-attribute">background-color</span>: blue;
  }
  <span class="hljs-keyword">@include</span> responsive(<span class="hljs-string">"tablet"</span>) {
    <span class="hljs-attribute">background-color</span>: green;
  }
}
</code></pre>
<h3 data-id="heading-10">è‡ªåŠ¨å‰ç¼€</h3>
<p>ä¸€äº›é¢„å¤„ç†å™¨æ’ä»¶å¯ä»¥è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ å„ç§æµè§ˆå™¨å‰ç¼€ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Sass æ–‡ä»¶</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">display</span>: flex;
}

<span class="hljs-comment">// ç¼–è¯‘åçš„ CSS æ–‡ä»¶ï¼ˆä½¿ç”¨ Autoprefixer å¤„ç†ï¼‰</span>
<span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">display</span>: -webkit-box;
  <span class="hljs-attribute">display</span>: -ms-flexbox;
  <span class="hljs-attribute">display</span>: flex;
}
</code></pre>
<p>ä½¿ç”¨ CSS é¢„å¤„ç†å™¨å¯ä»¥æå¤§åœ°æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç å¯ç»´æŠ¤æ€§ã€‚é€šè¿‡å¼•å…¥å˜é‡ã€åµŒå¥—ã€æ··åˆå®ã€ç»§æ‰¿ã€è¿ç®—ã€æ¨¡å—åŒ–ã€æ¡ä»¶è¯­å¥å’Œå¾ªç¯ç­‰é«˜çº§åŠŸèƒ½ï¼Œé¢„å¤„ç†å™¨ä½¿å¾—ç¼–å†™å’Œç®¡ç†å¤æ‚çš„ CSS å˜å¾—æ›´åŠ è½»æ¾å’Œé«˜æ•ˆã€‚</p>
<h2 data-id="heading-11">ä¼˜åŒ–é€‰æ‹©å™¨</h2>
<p>é¿å…ä½¿ç”¨ä½æ•ˆé€‰æ‹©å™¨ï¼Œå‡å°‘é€‰æ‹©å™¨å±‚çº§åµŒå¥—ï¼Œä½¿ç”¨æ›´é«˜æ•ˆçš„ç±»é€‰æ‹©å™¨ã€‚</p>
<p>ä½æ•ˆé€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span> &gt; <span class="hljs-selector-tag">ul</span> &gt; <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:first</span>-child {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>é«˜æ•ˆé€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.item-first</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<h2 data-id="heading-12">å‡å°‘é‡ç»˜å’Œé‡æ’</h2>
<p>é¢‘ç¹æ›´æ”¹ DOM å’Œæ ·å¼ä¼šå¯¼è‡´é‡ç»˜å’Œé‡æ’ï¼Œå½±å“æ€§èƒ½ã€‚å°½é‡æ‰¹é‡æ›´æ–°æ ·å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js">element.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">"background-color: blue; width: 100px; height: 100px;"</span>;
</code></pre>
<h2 data-id="heading-13">å»¶è¿ŸåŠ è½½å’Œå¼‚æ­¥åŠ è½½</h2>
<p>å»¶è¿ŸåŠ è½½éå…³é”® CSS æ–‡ä»¶ï¼Œæé«˜å…³é”®æ¸²æŸ“è·¯å¾„çš„æ€§èƒ½ã€‚</p>
<p>å¼‚æ­¥åŠ è½½ CSSï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span>
  <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span>
  <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span>
  <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>
  <span class="hljs-attr">onload</span>=<span class="hljs-string">"this.onload=null;this.rel='stylesheet'"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
</code></pre>
<h2 data-id="heading-14">ä½¿ç”¨å­—ä½“ä¼˜åŒ–</h2>
<p>å‡å°‘å­—ä½“æ–‡ä»¶å¤§å°ï¼Œä½¿ç”¨é€‚å½“çš„å­—ä½“æ˜¾ç¤ºç­–ç•¥ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">"MyFont"</span>;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"myfont.woff2"</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">"woff2"</span>);
  <span class="hljs-attribute">font-display</span>: swap;
}
</code></pre>
<h2 data-id="heading-15">æµè§ˆå™¨ç¼“å­˜</h2>
<p>é€šè¿‡è®¾ç½®ç¼“å­˜å¤´å’Œç‰ˆæœ¬æ§åˆ¶ï¼Œæé«˜ CSS æ–‡ä»¶çš„åŠ è½½é€Ÿåº¦ã€‚</p>
<p>åœ¨æœåŠ¡å™¨ä¸Šé…ç½®é€‚å½“çš„ç¼“å­˜å¤´ï¼Œå…è®¸æµè§ˆå™¨ç¼“å­˜ CSS æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Apache æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨ .htaccess æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-apache" lang="apache">&lt;FilesMatch "\.(css|js)$"&gt;
  Header set Cache-Control "max-age=31536000, public"
&lt;/FilesMatch&gt;
</code></pre>
<p>é€šè¿‡æ–‡ä»¶åä¸­åŒ…å«ç‰ˆæœ¬å·ï¼ˆå¦‚ style.v1.cssï¼‰æ¥æ§åˆ¶ç¼“å­˜ï¼Œç¡®ä¿æ›´æ–°åçš„ CSS æ–‡ä»¶è¢«é‡æ–°åŠ è½½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.v1.css"</span> /&gt;</span>
</code></pre>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>é€šè¿‡ä»¥ä¸Šè¿™äº›ä¼˜åŒ–æ–¹æ³•å’Œå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾è‘—æå‡ css çš„æ€§èƒ½ï¼Œæ”¹å–„ç½‘é¡µçš„åŠ è½½å’Œæ¸²æŸ“é€Ÿåº¦ï¼Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ï¼ˆ æ•™å­¦ ï¼‰Agent æ„å»º Memoryï¼ˆæç¤ºè¯å¯¹è¯å­˜å‚¨ï¼‰3. ConversationTokenBufferMemory(æ ¹æ®â€œä»¤ç‰Œé•¿åº¦â€åˆ·æ–°å¯¹è¯å†…å®¹, ç‰ˆ]]></title>    <link>https://juejin.cn/post/7590699877630476326</link>    <guid>https://juejin.cn/post/7590699877630476326</guid>    <pubDate>2026-01-03T12:48:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590699877630476326" data-draft-id="7590608345923256346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ï¼ˆ æ•™å­¦ ï¼‰Agent æ„å»º Memoryï¼ˆæç¤ºè¯å¯¹è¯å­˜å‚¨ï¼‰3. ConversationTokenBufferMemory(æ ¹æ®â€œä»¤ç‰Œé•¿åº¦â€åˆ·æ–°å¯¹è¯å†…å®¹, ç‰ˆ"/> <meta itemprop="keywords" content="Agent,LangChain"/> <meta itemprop="datePublished" content="2026-01-03T12:48:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RedTiemr"/> <meta itemprop="url" content="https://juejin.cn/user/2140104538466522"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ï¼ˆ æ•™å­¦ ï¼‰Agent æ„å»º Memoryï¼ˆæç¤ºè¯å¯¹è¯å­˜å‚¨ï¼‰3. ConversationTokenBufferMemory(æ ¹æ®â€œä»¤ç‰Œé•¿åº¦â€åˆ·æ–°å¯¹è¯å†…å®¹, ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2140104538466522/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RedTiemr
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:48:10.000Z" title="Sat Jan 03 2026 12:48:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ï¼ˆ æ•™å­¦ ï¼‰Agent æ„å»º Memoryï¼ˆæç¤ºè¯å¯¹è¯å­˜å‚¨ï¼‰3. ConversationTokenBufferMemory(æ ¹æ®â€œä»¤ç‰Œé•¿åº¦â€åˆ·æ–°å¯¹è¯å†…å®¹, ç‰ˆæœ¬&gt;1.0å’Œ&lt;1.0çš„åŒºåˆ«)</h2>
<p>â€œConversationTokenBufferMemoryâ€ä¼šå°†è¿‘æœŸçš„å¯¹è¯å†å²è®°å½•å­˜å‚¨åœ¨ç¼“å†²å­˜å‚¨å™¨ä¸­ï¼Œå¹¶æ ¹æ®â€œä»¤ç‰Œé•¿åº¦â€è€Œéå¯¹è¯æ•°é‡æ¥å†³å®šä½•æ—¶åˆ·æ–°å¯¹è¯å†…å®¹ã€‚
å…³é”®å‚æ•°ï¼š</p>
<ul>
<li><code>max_token_limit</code>ï¼š è®¾å®šç”¨äºå­˜å‚¨å¯¹è¯å†…å®¹çš„æœ€å¤§ä»¤ç‰Œé•¿åº¦</li>
<li><code>return_messages</code>ï¼š å½“ä¸º True æ—¶ï¼Œå°†ä»¥èŠå¤©æ ¼å¼è¿”å›æ¶ˆæ¯ã€‚å½“ä¸º False æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²</li>
<li><code>human_prefix</code>ï¼š åœ¨äººç±»æ¶ˆæ¯å‰æ·»åŠ çš„å‰ç¼€ï¼ˆé»˜è®¤å€¼ï¼š"Human"ï¼‰</li>
<li><code>ai_prefix</code>ï¼š åœ¨ AI æ¶ˆæ¯å‰æ·»åŠ çš„å‰ç¼€ï¼ˆé»˜è®¤å€¼ï¼š"AI"ï¼‰</li>
</ul>
<h3 data-id="heading-1">è¯¥ç±»ï¼Œæ˜¯ä¹‹å‰çš„ç‰ˆæœ¬1.0ä»¥å‰çš„ï¼Œç‰ˆæœ¬1.0ä»¥åçš„ã€‚æˆ‘ä¼šåˆ—å‡ºä¸¤ä¸ªç‰ˆæœ¬çš„ä½¿ç”¨æ–¹å¼å’Œç‰¹ç‚¹ã€‚</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_classic.memory <span class="hljs-keyword">import</span> ConversationTokenBufferMemory
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI


<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate
load_dotenv()
<span class="hljs-comment"># åˆ›å»ºChatOpenAIå¯¹è±¡ï¼Œé…ç½®ä¸ºä½¿ç”¨ç¡…åŸºæµåŠ¨API</span>
Qwen2_5_7B_Instruct_llm = ChatOpenAI(
    temperature=<span class="hljs-number">0.1</span>,  <span class="hljs-comment"># æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œåˆ›é€ æ€§ï¼Œå€¼è¶Šä½è¾“å‡ºè¶Šç¨³å®šå¯é¢„æµ‹ï¼Œå€¼è¶Šé«˜è¾“å‡ºè¶Šæœ‰åˆ›æ„ä½†å¯èƒ½åç¦»é¢„æœŸ (èŒƒå›´: 0.0 ~ 2.0)</span>
    model_name=<span class="hljs-string">"Qwen/Qwen2.5-7B-Instruct"</span>,  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨æ”¯æŒçš„æ¨¡å‹åç§°</span>
    openai_api_key=os.getenv(<span class="hljs-string">"SILICONFLOW_API_KEY"</span>),  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è·å–APIå¯†é’¥</span>
    openai_api_base=<span class="hljs-string">"https://api.siliconflow.cn/v1"</span>  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨APIçš„åŸºç¡€URL</span>
)

<span class="hljs-comment"># Configure memory</span>
memory = ConversationTokenBufferMemory(
    llm=Qwen2_5_7B_Instruct_llm,
    max_token_limit=<span class="hljs-number">50</span>,
    return_messages=<span class="hljs-literal">True</span>,  <span class="hljs-comment"># Limit maximum token length to 50</span>
)

<span class="hljs-comment"># æ·»åŠ ä»»æ„å¯¹è¯</span>
memory.save_context(
    inputs={
        <span class="hljs-string">"human"</span>: <span class="hljs-string">"æ‚¨å¥½ï¼Œæˆ‘æœ€è¿‘ä»è´µå…¬å¸è´­ä¹°äº†ä¸€å°æœºåºŠã€‚è¯·é—®å¦‚ä½•å®‰è£…ï¼Ÿ"</span>
    },
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"æ‚¨å¥½ï¼æ„Ÿè°¢æ‚¨çš„è´­ä¹°ã€‚è¯·é—®æ‚¨èƒ½å‘Šè¯‰æˆ‘æœºå™¨çš„å‹å·å—ï¼Ÿ"</span>
    },
)
memory.save_context(
    inputs={<span class="hljs-string">"human"</span>: <span class="hljs-string">"æ˜¯çš„ï¼Œå‹å·æ˜¯XG-200ã€‚"</span>},
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"è°¢è°¢ã€‚æˆ‘æ¥ä¸ºæ‚¨ä»‹ç»XG-200å‹å·çš„å®‰è£…æŒ‡å—ã€‚é¦–å…ˆï¼Œè¯·æ£€æŸ¥å®‰è£…åœ°ç‚¹çš„ä¾›ç”µçŠ¶æ€ã€‚è¿™å°æœºå™¨éœ€è¦220Vç”µæºã€‚"</span>
    },
)
memory.save_context(
    inputs={<span class="hljs-string">"human"</span>: <span class="hljs-string">"æˆ‘å·²ç»æ£€æŸ¥äº†ç”µæºã€‚ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšï¼Ÿ"</span>},
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"å¾ˆå¥½ã€‚æ¥ä¸‹æ¥ï¼Œè¯·å°†æœºå™¨æ”¾ç½®åœ¨å¹³æ•´ç¨³å›ºçš„è¡¨é¢ä¸Šã€‚ç„¶åï¼ŒæŒ‰ç…§ç”¨æˆ·æ‰‹å†Œçš„è¯´æ˜è¿›è¡Œçº¿ç¼†è¿æ¥ã€‚"</span>
    },
)
memory.save_context(
    inputs={<span class="hljs-string">"human"</span>: <span class="hljs-string">"å¦‚ä½•è¿›è¡Œè¿æ¥ï¼Ÿ"</span>},
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"è¯·å‚è€ƒè¯´æ˜ä¹¦ç¬¬5é¡µã€‚é‚£é‡Œæœ‰è¯¦ç»†çš„çº¿ç¼†è¿æ¥è¯´æ˜ã€‚å¦‚æœæ‚¨åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•å›°éš¾ï¼Œæˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æä¾›è¿›ä¸€æ­¥çš„å¸®åŠ©ã€‚"</span>
    },
)
memory.save_context(
    inputs={<span class="hljs-string">"human"</span>: <span class="hljs-string">"å®‰è£…å®Œæˆåæˆ‘è¯¥åšä»€ä¹ˆï¼Ÿ"</span>},
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"å®‰è£…å®Œæˆåï¼Œè¯·æ‰“å¼€ç”µæºå¹¶è¿›è¡Œåˆå§‹è¿è¡Œæµ‹è¯•ã€‚æµ‹è¯•ç¨‹åºåœ¨è¯´æ˜ä¹¦ç¬¬10é¡µæœ‰è¯¦ç»†è¯´æ˜ã€‚å¦‚æœæœºå™¨æœ‰ä»»ä½•é—®é¢˜æˆ–è€…æ‚¨éœ€è¦é¢å¤–æ”¯æŒï¼Œè¯·éšæ—¶ä¸æˆ‘ä»¬è”ç³»ã€‚"</span>
    },
)
memory.save_context(
    inputs={<span class="hljs-string">"human"</span>: <span class="hljs-string">"è°¢è°¢ï¼Œè¿™äº›ä¿¡æ¯å¯¹æˆ‘å¾ˆæœ‰å¸®åŠ©ï¼"</span>},
    outputs={
        <span class="hljs-string">"ai"</span>: <span class="hljs-string">"æˆ‘ä»¬éšæ—¶å‡†å¤‡ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚å¦‚æœæ‚¨è¿˜æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦æ”¯æŒï¼Œè¯·éšæ—¶è¯¢é—®ã€‚ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼"</span>
    },
)
</code></pre>
<p>æ‰“å°memoryä¸­çš„å¯¹è¯å†…å®¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(memory.load_memory_variables({})[<span class="hljs-string">"history"</span>])
</code></pre>
<blockquote>
<p>[HumanMessage(content='æ‚¨å¥½ï¼Œæˆ‘æœ€è¿‘ä»è´µå…¬å¸è´­ä¹°äº†ä¸€å°æœºåºŠã€‚è¯·é—®å¦‚ä½•å®‰è£…ï¼Ÿ', additional_kwargs={}, response_metadata={}),
AIMessage(content='æ‚¨å¥½ï¼æ„Ÿè°¢æ‚¨çš„è´­ä¹°ã€‚è¯·é—®æ‚¨èƒ½å‘Šè¯‰æˆ‘æœºå™¨çš„å‹å·å—ï¼Ÿ', additional_kwargs={}, response_metadata={}),
HumanMessage(content='æ‚¨å¥½ï¼Œæˆ‘æœ€è¿‘ä»è´µå…¬å¸è´­ä¹°äº†ä¸€å°æœºåºŠã€‚è¯·é—®å¦‚ä½•å®‰è£…ï¼Ÿ', additional_kwargs={}, response_metadata={}),
AIMessage(content='æ‚¨å¥½ï¼æ„Ÿè°¢æ‚¨çš„è´­ä¹°ã€‚è¯·é—®æ‚¨èƒ½å‘Šè¯‰æˆ‘æœºå™¨çš„å‹å·å—ï¼Ÿ', additional_kwargs={}, response_metadata={})]</p>
</blockquote>
<h3 data-id="heading-2">ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬é€»è¾‘å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> MessagesState, START, StateGraph
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, AIMessage
<span class="hljs-keyword">from</span> tiktoken <span class="hljs-keyword">import</span> get_encoding

checkpointer = MemorySaver()
model =  ChatOpenAI(
    temperature=<span class="hljs-number">0.1</span>,  <span class="hljs-comment"># æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œåˆ›é€ æ€§ï¼Œå€¼è¶Šä½è¾“å‡ºè¶Šç¨³å®šå¯é¢„æµ‹ï¼Œå€¼è¶Šé«˜è¾“å‡ºè¶Šæœ‰åˆ›æ„ä½†å¯èƒ½åç¦»é¢„æœŸ (èŒƒå›´: 0.0 ~ 2.0)</span>
    model_name=<span class="hljs-string">"Qwen/Qwen2.5-7B-Instruct"</span>,  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨æ”¯æŒçš„æ¨¡å‹åç§°</span>
    openai_api_key=os.getenv(<span class="hljs-string">"SILICONFLOW_API_KEY"</span>),  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è·å–APIå¯†é’¥</span>
    openai_api_base=<span class="hljs-string">"https://api.siliconflow.cn/v1"</span>  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨APIçš„åŸºç¡€URL</span>
)

tokenizer = get_encoding(<span class="hljs-string">"cl100k_base"</span>)  <span class="hljs-comment"># tokenizer</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_with_token_window</span>(<span class="hljs-params">state: MessagesState</span>):
    <span class="hljs-string">"""åŸºäº token é™åˆ¶çš„è®°å¿†ç®¡ç†ï¼ˆæœ€å¤§ 2000 tokensï¼‰"""</span>
    messages = state[<span class="hljs-string">"messages"</span>]
    max_tokens = <span class="hljs-number">2000</span>
    
    <span class="hljs-comment"># è®¡ç®—å½“å‰ token æ€»æ•°</span>
    total_tokens = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">len</span>(tokenizer.encode(msg.content)) <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> messages)
    
    <span class="hljs-comment"># é€æ­¥ç§»é™¤æœ€æ—©æ¶ˆæ¯ç›´åˆ°ç¬¦åˆ token é™åˆ¶</span>
    <span class="hljs-keyword">while</span> total_tokens &gt; max_tokens <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(messages) &gt; <span class="hljs-number">1</span>:
        messages.pop(<span class="hljs-number">0</span>)
        total_tokens = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">len</span>(tokenizer.encode(msg.content)) <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> messages)
    
    response = model.invoke(messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>: [response]}

<span class="hljs-comment"># æ„å»ºå›¾</span>
builder = StateGraph(state_schema=MessagesState)
builder.add_node(<span class="hljs-string">"chat"</span>, chat_with_token_window)
builder.add_edge(START, <span class="hljs-string">"chat"</span>)
graph = builder.<span class="hljs-built_in">compile</span>(checkpointer=checkpointer)

config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"user-1"</span>}}

<span class="hljs-comment"># æµ‹è¯•é•¿å¯¹è¯ï¼ˆä¼šè‡ªåŠ¨æˆªæ–­ï¼‰</span>
long_dialogue = [
    <span class="hljs-string">"è¿™æ˜¯å¾ˆé•¿çš„ç¬¬ä¸€æ¡æ¶ˆæ¯ï¼ŒåŒ…å«å¾ˆå¤šå†…å®¹..."</span> * <span class="hljs-number">10</span>,
    <span class="hljs-string">"ç¬¬äºŒæ¡ä¹Ÿå¾ˆé•¿..."</span> * <span class="hljs-number">8</span>,
    <span class="hljs-string">"ç¬¬ä¸‰æ¡æ¶ˆæ¯ï¼Œé—®æˆ‘çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
]

<span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> long_dialogue:
    result = graph.invoke(
        {<span class="hljs-string">"messages"</span>: [HumanMessage(content=msg)]}, 
        config
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI: <span class="hljs-subst">{result[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content[:<span class="hljs-number">100</span>]}</span>..."</span>)
</code></pre>
<h4 data-id="heading-3">é«˜çº§ä½¿ç”¨</h4>
<ul>
<li>è‡ªå®šä¹‰ token è®¡ç®—ï¼š æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ token è®¡ç®—é€»è¾‘ï¼Œä¾‹å¦‚è€ƒè™‘ç‰¹æ®Šå­—ç¬¦æˆ–éè‹±æ–‡æ–‡æœ¬ã€‚</li>
<li>åŠ¨æ€è°ƒæ•´ token é™åˆ¶ï¼š æ ¹æ®å®é™…å¯¹è¯åœºæ™¯åŠ¨æ€è°ƒæ•´ token é™åˆ¶ï¼Œä¾‹å¦‚åœ¨ç”¨æˆ·é—®é¢˜å¤æ‚æ—¶å¢åŠ é™åˆ¶ã€‚</li>
<li>ç»“åˆå…¶ä»–è®°å¿†ç®¡ç†ç­–ç•¥ï¼š æ‚¨å¯ä»¥å°†åŸºäº token é•¿åº¦çš„è®°å¿†ç®¡ç†ä¸å…¶ä»–ç­–ç•¥ï¼ˆå¦‚åŸºäºæ—¶é—´çš„è®°å¿†ç®¡ç†ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥è·å¾—æ›´å®Œå–„çš„å¯¹è¯ç®¡ç†ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">smart_token_memory</span>(<span class="hljs-params">state: MessagesState</span>):
    <span class="hljs-string">"""Token çª—å£ + æ™ºèƒ½æ€»ç»“"""</span>
    messages = state[<span class="hljs-string">"messages"</span>][:]
    max_tokens = <span class="hljs-number">1000</span>
    model = ChatOpenAI(
        temperature=<span class="hljs-number">0.1</span>,  <span class="hljs-comment"># æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§å’Œåˆ›é€ æ€§ï¼Œå€¼è¶Šä½è¾“å‡ºè¶Šç¨³å®šå¯é¢„æµ‹ï¼Œå€¼è¶Šé«˜è¾“å‡ºè¶Šæœ‰åˆ›æ„ä½†å¯èƒ½åç¦»é¢„æœŸ (èŒƒå›´: 0.0 ~ 2.0)</span>
        model_name=<span class="hljs-string">"Qwen/Qwen2.5-7B-Instruct"</span>,  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨æ”¯æŒçš„æ¨¡å‹åç§°</span>
        openai_api_key=os.getenv(<span class="hljs-string">"SILICONFLOW_API_KEY"</span>),  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è·å–APIå¯†é’¥</span>
        openai_api_base=<span class="hljs-string">"https://api.siliconflow.cn/v1"</span>  <span class="hljs-comment"># ç¡…åŸºæµåŠ¨APIçš„åŸºç¡€URL</span>
    )
    tokenizer = get_encoding(<span class="hljs-string">"cl100k_base"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">count_tokens</span>(<span class="hljs-params">msgs</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">len</span>(tokenizer.encode(m.content)) <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> msgs)
    
    <span class="hljs-comment"># å¦‚æœè¶…è¿‡é™åˆ¶ï¼Œå…ˆå°è¯•æ€»ç»“æ—©æœŸå¯¹è¯</span>
    <span class="hljs-keyword">while</span> count_tokens(messages) &gt; max_tokens <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(messages) &gt; <span class="hljs-number">2</span>:
        <span class="hljs-comment"># æ€»ç»“æœ€æ—© 50% å¯¹è¯</span>
        mid_point = <span class="hljs-built_in">len</span>(messages) // <span class="hljs-number">2</span>
        early_msgs = messages[:mid_point]
        
        summary_prompt = <span class="hljs-string">f"æ€»ç»“ä»¥ä¸‹å¯¹è¯ï¼ˆ30å­—å†…ï¼‰ï¼š<span class="hljs-subst">{<span class="hljs-string">' '</span>.join(m.content <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> early_msgs)}</span>"</span>
        summary = model.invoke([(<span class="hljs-string">"user"</span>, summary_prompt)])
        
        <span class="hljs-comment"># ç”¨æ€»ç»“æ›¿æ¢æ—©æœŸå¯¹è¯</span>
        messages = [AIMessage(content=<span class="hljs-string">f"æ€»ç»“ï¼š<span class="hljs-subst">{summary.content}</span>"</span>)] + messages[mid_point:]
    
    <span class="hljs-comment"># æœ€åç²¾ç¡®æˆªæ–­</span>
    <span class="hljs-keyword">while</span> count_tokens(messages) &gt; max_tokens <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(messages) &gt; <span class="hljs-number">1</span>:
        messages.pop(<span class="hljs-number">0</span>)
    
    response = model.invoke(messages)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"messages"</span>: [response]}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Selenium æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼ˆå®Œæ•´å®æ“æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7590421489998250003</link>    <guid>https://juejin.cn/post/7590421489998250003</guid>    <pubDate>2026-01-03T13:40:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590421489998250003" data-draft-id="7590421489998233619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Selenium æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼ˆå®Œæ•´å®æ“æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-03T13:40:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆšå“¥çš„è¿›åŒ–è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/71892859621675"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Selenium æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼ˆå®Œæ•´å®æ“æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/71892859621675/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆšå“¥çš„è¿›åŒ–è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:40:39.000Z" title="Sat Jan 03 2026 13:40:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Selenium æ ¸å¿ƒä»·å€¼åœ¨äº<strong>æ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„æµè§ˆå™¨æ“ä½œè¡Œä¸º</strong>ï¼Œèƒ½å¤Ÿç²¾å‡†è¿˜åŸæ‰“å¼€é¡µé¢ã€è¾“å…¥æ–‡æœ¬ã€ç‚¹å‡»æŒ‰é’®ã€æ»šåŠ¨é¡µé¢ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå®Œç¾è§£å†³åŠ¨æ€ç½‘é¡µçš„æ•°æ®çˆ¬å–å’Œè‡ªåŠ¨åŒ–åœºæ™¯éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»å®æ“è§’åº¦å‡ºå‘ï¼Œè¯¦ç»†è®²è§£ Selenium æ¨¡æ‹Ÿå„ç±»æµè§ˆå™¨æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•ï¼Œé™„å¸¦å®Œæ•´å¯è¿è¡Œä»£ç ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‰æœŸå‡†å¤‡ï¼ˆå›é¡¾å¿…å¤‡ï¼‰</h2>
<ol>
<li>å·²å®‰è£… Selenium åº“ï¼š<code>pip install selenium -i https://pypi.doubanio.com/simple/</code></li>
<li>å·²é…ç½®å¯¹åº”æµè§ˆå™¨é©±åŠ¨ï¼ˆChromeDriver ä¼˜å…ˆï¼Œç‰ˆæœ¬ä¸æµè§ˆå™¨å¤§ç‰ˆæœ¬ä¸€è‡´ï¼‰</li>
<li>æ ¸å¿ƒå¯¼å…¥æ¨¡å—ï¼ˆåç»­ç¤ºä¾‹é»˜è®¤åŒ…å«ä»¥ä¸‹å¯¼å…¥ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By
<span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys
<span class="hljs-keyword">import</span> time
</code></pre>
<h2 data-id="heading-1">äºŒã€åŸºç¡€æ“ä½œï¼šåˆå§‹åŒ–æµè§ˆå™¨ä¸è®¿é—®ç½‘é¡µ</h2>
<p>è¿™æ˜¯æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œçš„ç¬¬ä¸€æ­¥ï¼Œå®Œæˆæµè§ˆå™¨çš„å¯åŠ¨ã€é…ç½®ä¸ç›®æ ‡ç½‘é¡µçš„è®¿é—®ã€‚</p>
<h3 data-id="heading-2">1. åŸºç¡€åˆå§‹åŒ–ï¼ˆå¯è§†åŒ–æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. åˆå§‹åŒ– Chrome æµè§ˆå™¨é©±åŠ¨ï¼ˆå¯åŠ¨æµè§ˆå™¨ï¼‰</span>
driver = webdriver.Chrome()

<span class="hljs-comment"># 2. å¯é€‰ï¼šæœ€å¤§åŒ–æµè§ˆå™¨çª—å£ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·æ­£å¸¸ä½¿ç”¨ä¹ æƒ¯ï¼‰</span>
driver.maximize_window()

<span class="hljs-comment"># 3. è®¿é—®ç›®æ ‡ç½‘é¡µï¼ˆget æ–¹æ³•ä¼šç­‰å¾…é¡µé¢åˆæ­¥åŠ è½½å®Œæˆï¼‰</span>
target_url = <span class="hljs-string">"https://www.baidu.com"</span>
driver.get(target_url)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸè®¿é—®ï¼š<span class="hljs-subst">{target_url}</span>ï¼Œå½“å‰é¡µé¢æ ‡é¢˜ï¼š<span class="hljs-subst">{driver.title}</span>"</span>)

<span class="hljs-comment"># 4. å¯é€‰ï¼šçŸ­æš‚å»¶æ—¶ï¼Œç¡®ä¿é¡µé¢å®Œå…¨æ¸²æŸ“ï¼ˆåç»­ä¼˜å…ˆä½¿ç”¨æ˜¾å¼ç­‰å¾…ï¼‰</span>
time.sleep(<span class="hljs-number">2</span>)
</code></pre>
<h3 data-id="heading-3">2. æ— ç•Œé¢æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼Œä¸æ˜¾ç¤ºæµè§ˆå™¨çª—å£ï¼‰</h3>
<p>é€‚åˆæœåŠ¡å™¨è¿è¡Œæˆ–æ— éœ€å¯è§†åŒ–çš„åœºæ™¯ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. æ„é€  Chrome é…ç½®å¯¹è±¡</span>
chrome_options = webdriver.ChromeOptions()
<span class="hljs-comment"># å¯ç”¨æ— ç•Œé¢æ¨¡å¼ï¼ˆSelenium 4.x æ¨èå†™æ³•ï¼‰</span>
chrome_options.add_argument(<span class="hljs-string">"--headless=new"</span>)
<span class="hljs-comment"># ç¦ç”¨ GPU åŠ é€Ÿï¼Œé¿å…éƒ¨åˆ†ç¯å¢ƒæŠ¥é”™</span>
chrome_options.add_argument(<span class="hljs-string">"--disable-gpu"</span>)

<span class="hljs-comment"># 2. ä¼ å…¥é…ç½®åˆå§‹åŒ–æµè§ˆå™¨</span>
driver = webdriver.Chrome(options=chrome_options)
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— ç•Œé¢æ¨¡å¼ï¼šé¡µé¢æ ‡é¢˜ä¸º <span class="hljs-subst">{driver.title}</span>"</span>)
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒæ“ä½œ1ï¼šå®šä½é¡µé¢å…ƒç´ ï¼ˆæ“ä½œçš„å‰æï¼‰</h2>
<p>æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œçš„æ ¸å¿ƒæ˜¯ã€Œå…ˆå®šä½å…ƒç´ ï¼Œå†æ‰§è¡Œæ“ä½œã€ï¼ŒSelenium æä¾›äº† 6 ç§å¸¸ç”¨å®šä½æ–¹å¼ï¼Œå…¶ä¸­ <strong>IDã€XPathã€CSS é€‰æ‹©å™¨</strong> æœ€ä¸ºå®ç”¨ï¼Œä¼˜å…ˆæŒæ¡ã€‚</p>








































<table><thead><tr><th>å®šä½æ–¹å¼</th><th>è¯­æ³•ï¼ˆBy.XXXï¼‰</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ID å®šä½</td><td><code>By.ID</code></td><td>å…ƒç´  ID å”¯ä¸€ï¼ˆé«˜æ•ˆç²¾å‡†ï¼Œä¼˜å…ˆä½¿ç”¨ï¼‰</td></tr><tr><td>XPath å®šä½</td><td><code>By.XPATH</code></td><td>ä¸‡èƒ½çµæ´»ï¼Œå¯åº”å¯¹å¤æ‚é¡µé¢ï¼ˆæ— å”¯ä¸€ ID/Class æ—¶é¦–é€‰ï¼‰</td></tr><tr><td>CSS é€‰æ‹©å™¨</td><td><code>By.CSS_SELECTOR</code></td><td>é«˜æ•ˆï¼Œä¸å‰ç«¯å¼€å‘è¯­æ³•ä¸€è‡´</td></tr><tr><td>Name å®šä½</td><td><code>By.NAME</code></td><td>å…ƒç´ æœ‰å”¯ä¸€ name å±æ€§</td></tr><tr><td>æ ‡ç­¾åå®šä½</td><td><code>By.TAG_NAME</code></td><td>æ‰¹é‡æŸ¥æ‰¾ç›¸åŒæ ‡ç­¾ï¼ˆå¦‚æ‰€æœ‰ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼‰</td></tr><tr><td>é“¾æ¥æ–‡æœ¬å®šä½</td><td><code>By.LINK_TEXT</code></td><td>ç²¾å‡†åŒ¹é… <code>&lt;a&gt;</code> æ ‡ç­¾çš„å®Œæ•´æ–‡æœ¬</td></tr></tbody></table>
<h3 data-id="heading-5">å®æ“ç¤ºä¾‹ï¼ˆä»¥ç™¾åº¦é¦–é¡µä¸ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 1. ID å®šä½ï¼ˆç™¾åº¦æœç´¢æ¡† ID ä¸º "kw"ï¼‰</span>
search_input = driver.find_element(By.ID, <span class="hljs-string">"kw"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ID å®šä½æˆåŠŸï¼š"</span>, search_input.tag_name)

<span class="hljs-comment"># 2. XPath å®šä½ï¼ˆç›¸å¯¹è·¯å¾„ï¼Œå®¹é”™æ€§å¼ºï¼‰</span>
search_button = driver.find_element(By.XPATH, <span class="hljs-string">'//input[@id="su"]'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"XPath å®šä½æˆåŠŸï¼š"</span>, search_button.tag_name)

<span class="hljs-comment"># 3. CSS é€‰æ‹©å™¨å®šä½ï¼ˆ# è¡¨ç¤º IDï¼Œ. è¡¨ç¤º Classï¼‰</span>
news_link = driver.find_element(By.CSS_SELECTOR, <span class="hljs-string">'a[href="https://news.baidu.com"]'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"CSS é€‰æ‹©å™¨å®šä½æˆåŠŸï¼š"</span>, news_link.text)

driver.quit()
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼š<code>driver.find_element()</code> è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ ï¼Œ<code>driver.find_elements()</code> è¿”å›æ‰€æœ‰åŒ¹é…å…ƒç´ åˆ—è¡¨ï¼ˆæ— åŒ¹é…è¿”å›ç©ºåˆ—è¡¨ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-6">å››ã€æ ¸å¿ƒæ“ä½œ2ï¼šæ¨¡æ‹Ÿç”¨æˆ·å¸¸ç”¨äº¤äº’è¡Œä¸º</h2>
<h3 data-id="heading-7">1. è¾“å…¥ä¸æ¸…ç©ºæ–‡æœ¬ï¼ˆå¦‚æœç´¢æ¡†ã€ç™»å½•è¾“å…¥æ¡†ï¼‰</h3>
<p>ä½¿ç”¨ <code>send_keys()</code> è¾“å…¥æ–‡æœ¬ï¼Œ<code>clear()</code> æ¸…ç©ºè¾“å…¥æ¡†å†…å®¹ï¼Œæ˜¯è¡¨å•æ“ä½œçš„æ ¸å¿ƒæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 1. å®šä½æœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®è¯</span>
search_input = driver.find_element(By.ID, <span class="hljs-string">"kw"</span>)
search_input.send_keys(<span class="hljs-string">"Selenium æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œ"</span>)  <span class="hljs-comment"># è¾“å…¥ä»»æ„æ–‡æœ¬ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²è¾“å…¥æœç´¢å…³é”®è¯"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 2. æ¸…ç©ºæœç´¢æ¡†å†…å®¹ï¼ˆå¯é€‰ï¼‰</span>
search_input.clear()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æ¸…ç©ºæœç´¢æ¡†"</span>)
time.sleep(<span class="hljs-number">1</span>)

<span class="hljs-comment"># 3. é‡æ–°è¾“å…¥å¹¶å›è½¦æäº¤æœç´¢ï¼ˆç»“åˆ Keys ç±»æ¨¡æ‹Ÿé”®ç›˜æ“ä½œï¼‰</span>
search_input.send_keys(<span class="hljs-string">"Python çˆ¬è™«è¿›é˜¶"</span>)
search_input.send_keys(Keys.ENTER)  <span class="hljs-comment"># æ¨¡æ‹ŸæŒ‰ä¸‹å›è½¦é”®</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æäº¤æœç´¢ï¼Œç­‰å¾…ç»“æœåŠ è½½"</span>)
time.sleep(<span class="hljs-number">3</span>)

driver.quit()
</code></pre>
<h3 data-id="heading-8">2. æ¨¡æ‹Ÿç‚¹å‡»æ“ä½œï¼ˆæŒ‰é’®ã€é“¾æ¥ã€å¤é€‰æ¡†ç­‰ï¼‰</h3>
<p>ä½¿ç”¨ <code>click()</code> æ–¹æ³•æ¨¡æ‹Ÿç”¨æˆ·å·¦é”®ç‚¹å‡»ï¼Œæ”¯æŒæ‰€æœ‰å¯ç‚¹å‡»å…ƒç´ ï¼ˆæŒ‰é’®ã€<code>&lt;a&gt;</code> æ ‡ç­¾ã€å•é€‰æ¡†ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 1. å®šä½æœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®è¯</span>
search_input = driver.find_element(By.ID, <span class="hljs-string">"kw"</span>)
search_input.send_keys(<span class="hljs-string">"Selenium æ•™ç¨‹"</span>)

<span class="hljs-comment"># 2. å®šä½æœç´¢æŒ‰é’®ï¼Œæ¨¡æ‹Ÿç‚¹å‡»æäº¤</span>
search_button = driver.find_element(By.ID, <span class="hljs-string">"su"</span>)
search_button.click()  <span class="hljs-comment"># æ ¸å¿ƒç‚¹å‡»æ–¹æ³•</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œæäº¤æŸ¥è¯¢"</span>)
time.sleep(<span class="hljs-number">3</span>)

<span class="hljs-comment"># 3. å®šä½æœç´¢ç»“æœä¸­çš„é“¾æ¥ï¼Œç‚¹å‡»è·³è½¬</span>
first_result = driver.find_element(By.XPATH, <span class="hljs-string">'//div[@id="content_left"]//a[1]'</span>)
first_result.click()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç‚¹å‡»ç¬¬ä¸€æ¡æœç´¢ç»“æœï¼Œè·³è½¬æ–°é¡µé¢"</span>)
time.sleep(<span class="hljs-number">3</span>)

driver.quit()
</code></pre>
<h3 data-id="heading-9">3. æ¨¡æ‹Ÿé¡µé¢æ»šåŠ¨ï¼ˆåº”å¯¹æ»šåŠ¨åŠ è½½ã€æŸ¥çœ‹æ›´å¤šå†…å®¹ï¼‰</h3>
<p>åŠ¨æ€ç½‘é¡µå¸¸éœ€è¦æ»šåŠ¨é¡µé¢æ‰èƒ½åŠ è½½æ›´å¤šæ•°æ®ï¼ŒSelenium æ¨èä½¿ç”¨ <code>execute_script()</code> æ‰§è¡Œ JavaScript è„šæœ¬å®ç°æ»šåŠ¨ï¼Œä¸‡èƒ½ä¸”ç¨³å®šã€‚</p>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.runoob.com/python/python-blog.html"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 1. æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼ˆè·å–å®Œæ•´åŠ¨æ€æ•°æ®ï¼‰</span>
driver.execute_script(<span class="hljs-string">"window.scrollTo(0, document.body.scrollHeight);"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨"</span>)
time.sleep(<span class="hljs-number">3</span>)

<span class="hljs-comment"># 2. æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨</span>
driver.execute_script(<span class="hljs-string">"window.scrollTo(0, 0);"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 3. æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ï¼ˆæ¨ªå‘ x=0ï¼Œçºµå‘ y=800 åƒç´ ï¼‰</span>
driver.execute_script(<span class="hljs-string">"window.scrollTo(0, 800);"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æ»šåŠ¨åˆ°é¡µé¢ y=800 ä½ç½®"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 4. æ¨¡æ‹Ÿé€é¡µæ»šåŠ¨ï¼ˆPageDown é”®ï¼‰</span>
driver.find_element(By.TAG_NAME, <span class="hljs-string">"body"</span>).send_keys(Keys.PAGE_DOWN)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²å‘ä¸‹æ»šåŠ¨ä¸€é¡µ"</span>)
time.sleep(<span class="hljs-number">2</span>)

driver.quit()
</code></pre>
<h3 data-id="heading-10">4. æµè§ˆå™¨çª—å£è¾…åŠ©æ“ä½œï¼ˆåˆ·æ–°ã€å‰è¿›ã€åé€€ã€å…³é—­ï¼‰</h3>
<p>æ¨¡æ‹Ÿç”¨æˆ·å¯¹æµè§ˆå™¨çª—å£çš„å¸¸ç”¨æ“ä½œï¼Œå®Œå–„è‡ªåŠ¨åŒ–æµç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 1. åˆ·æ–°å½“å‰é¡µé¢</span>
driver.refresh()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²åˆ·æ–°é¡µé¢"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 2. è®¿é—®æ–°é¡µé¢ï¼ˆä¸ºåç»­å‰è¿›/åé€€åšå‡†å¤‡ï¼‰</span>
driver.get(<span class="hljs-string">"https://www.runoob.com"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²è®¿é—®èœé¸Ÿæ•™ç¨‹"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 3. åé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼ˆç™¾åº¦é¦–é¡µï¼‰</span>
driver.back()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²åé€€åˆ°ç™¾åº¦é¦–é¡µ"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 4. å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ï¼ˆèœé¸Ÿæ•™ç¨‹ï¼‰</span>
driver.forward()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²å‰è¿›åˆ°èœé¸Ÿæ•™ç¨‹"</span>)
time.sleep(<span class="hljs-number">2</span>)

<span class="hljs-comment"># 5. å…³é—­æµè§ˆå™¨ï¼ˆé‡Šæ”¾æ‰€æœ‰èµ„æºï¼Œæ¨èä½¿ç”¨ quit() è€Œé close()ï¼‰</span>
<span class="hljs-comment"># driver.close()  # å…³é—­å½“å‰çª—å£ï¼ˆå¤šçª—å£æ—¶é€‚ç”¨ï¼‰</span>
driver.quit()  <span class="hljs-comment"># é€€å‡ºæµè§ˆå™¨ï¼Œé‡Šæ”¾æ‰€æœ‰èµ„æº</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æµè§ˆå™¨å·²å…³é—­"</span>)
</code></pre>
<h2 data-id="heading-11">äº”ã€å…³é”®ä¼˜åŒ–ï¼šç­‰å¾…å…ƒç´ åŠ è½½ï¼ˆé¿å…æ“ä½œå¤±è´¥ï¼‰</h2>
<p>åŠ¨æ€ç½‘é¡µå­˜åœ¨åŠ è½½å»¶è¿Ÿï¼Œç›´æ¥æ‰§è¡Œæ“ä½œå¯èƒ½ä¼šå› å…ƒç´ æœªåŠ è½½å®Œæˆè€ŒæŠ›å‡º <code>NoSuchElementException</code> å¼‚å¸¸ã€‚Selenium æä¾› 3 ç§ç­‰å¾…ç­–ç•¥ï¼Œ<strong>æ˜¾å¼ç­‰å¾…</strong> æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚</p>
<h3 data-id="heading-12">1. å¼ºåˆ¶ç­‰å¾…ï¼ˆæœ€ç®€å•ï¼Œä¸æ¨èï¼‰</h3>
<p>å³ <code>time.sleep(seconds)</code>ï¼Œå›ºå®šå»¶æ—¶ï¼Œæ— è®ºé¡µé¢æ˜¯å¦åŠ è½½å®Œæˆéƒ½ç­‰å¾…ï¼Œé€‚åˆç®€å•åœºæ™¯æˆ–ä¸´æ—¶è°ƒè¯•ã€‚</p>
<pre><code class="hljs language-python" lang="python">driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)
time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># å›ºå®šç­‰å¾… 2 ç§’</span>
</code></pre>
<h3 data-id="heading-13">2. éšå¼ç­‰å¾…ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼Œä¸­ç­‰æ¨èï¼‰</h3>
<p>é€šè¿‡ <code>driver.implicitly_wait(seconds)</code> è®¾ç½®å…¨å±€ç­‰å¾…æ—¶é—´ï¼Œåœ¨æŒ‡å®šæ—¶é—´å†…ä¼šä¸æ–­å°è¯•å®šä½å…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–è¶…æ—¶ã€‚</p>
<pre><code class="hljs language-python" lang="python">driver = webdriver.Chrome()
<span class="hljs-comment"># è®¾ç½®éšå¼ç­‰å¾… 10 ç§’ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼Œä»…å¯¹å…ƒç´ å®šä½æ“ä½œæœ‰æ•ˆï¼‰</span>
driver.implicitly_wait(<span class="hljs-number">10</span>)
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)

<span class="hljs-comment"># è‹¥ 10 ç§’å†…æ‰¾åˆ°å…ƒç´ åˆ™ç«‹å³æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸</span>
search_input = driver.find_element(By.ID, <span class="hljs-string">"kw"</span>)
search_input.send_keys(<span class="hljs-string">"éšå¼ç­‰å¾…æµ‹è¯•"</span>)
driver.quit()
</code></pre>
<h3 data-id="heading-14">3. æ˜¾å¼ç­‰å¾…ï¼ˆçµæ´»é«˜æ•ˆï¼Œå¼ºçƒˆæ¨èï¼‰</h3>
<p>é€šè¿‡ <code>WebDriverWait</code> é…åˆ <code>expected_conditions</code>ï¼Œé’ˆå¯¹å•ä¸ªå…ƒç´ è®¾ç½®ä¸ªæ€§åŒ–ç­‰å¾…æ¡ä»¶ï¼ˆå¦‚å…ƒç´ å¯è§ã€å¯ç‚¹å‡»ï¼‰ï¼Œè¶…æ—¶åæŠ›å‡ºæ˜ç¡®å¼‚å¸¸ï¼Œé€‚åˆå¤æ‚åŠ¨æ€é¡µé¢ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait
<span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC

driver = webdriver.Chrome()
driver.maximize_window()
driver.get(<span class="hljs-string">"https://www.baidu.com"</span>)

<span class="hljs-comment"># 1. æ„é€ æ˜¾å¼ç­‰å¾…å¯¹è±¡ï¼ˆæœ€é•¿ç­‰å¾… 10 ç§’ï¼Œæ¯ 0.5 ç§’æ£€æŸ¥ä¸€æ¬¡æ¡ä»¶ï¼‰</span>
wait = WebDriverWait(driver, <span class="hljs-number">10</span>, poll_frequency=<span class="hljs-number">0.5</span>)

<span class="hljs-comment"># 2. ç­‰å¾…æœç´¢æ¡†å¯ç‚¹å‡»ï¼ˆå¸¸ç”¨æ¡ä»¶ï¼šelement_to_be_clickableï¼‰</span>
search_input = wait.until(
    EC.element_to_be_clickable((By.ID, <span class="hljs-string">"kw"</span>)),
    message=<span class="hljs-string">"è¶…æ—¶ï¼šæœªæ‰¾åˆ°å¯ç‚¹å‡»çš„ç™¾åº¦æœç´¢æ¡†"</span>
)

<span class="hljs-comment"># 3. å…ƒç´ åŠ è½½å®Œæˆåæ‰§è¡Œæ“ä½œ</span>
search_input.send_keys(<span class="hljs-string">"æ˜¾å¼ç­‰å¾…æµ‹è¯•"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥æˆåŠŸï¼Œç­‰å¾…æ¡ä»¶æ»¡è¶³"</span>)

driver.quit()
</code></pre>
<blockquote>
<p>å¸¸ç”¨ç­‰å¾…æ¡ä»¶ï¼š<code>EC.visibility_of_element_located()</code>ï¼ˆå…ƒç´ å¯è§ï¼‰ã€<code>EC.presence_of_element_located()</code>ï¼ˆå…ƒç´ å­˜åœ¨äº DOM ä¸­ï¼‰ã€<code>EC.element_to_be_clickable()</code>ï¼ˆå…ƒç´ å¯ç‚¹å‡»ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-15">å…­ã€å®Œæ•´å®æˆ˜ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨å®Œæˆæœç´¢+æ»šåŠ¨+æ•°æ®æå–</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By
<span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys
<span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait
<span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">simulate_browser_operation</span>():
    <span class="hljs-comment"># 1. åˆå§‹åŒ–æµè§ˆå™¨</span>
    driver = webdriver.Chrome()
    driver.maximize_window()
    target_url = <span class="hljs-string">"https://www.baidu.com"</span>
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 2. è®¿é—®ç½‘é¡µ</span>
        driver.get(target_url)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²è®¿é—®ï¼š<span class="hljs-subst">{target_url}</span>"</span>)
        
        <span class="hljs-comment"># 3. æ˜¾å¼ç­‰å¾…æœç´¢æ¡†ï¼Œè¾“å…¥å…³é”®è¯å¹¶æäº¤</span>
        wait = WebDriverWait(driver, <span class="hljs-number">10</span>)
        search_input = wait.until(
            EC.element_to_be_clickable((By.ID, <span class="hljs-string">"kw"</span>)),
            message=<span class="hljs-string">"è¶…æ—¶ï¼šæœç´¢æ¡†æœªåŠ è½½å®Œæˆ"</span>
        )
        search_input.send_keys(<span class="hljs-string">"Selenium æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œ å®æˆ˜"</span>)
        search_input.send_keys(Keys.ENTER)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æäº¤æœç´¢ï¼Œç­‰å¾…ç»“æœåŠ è½½"</span>)
        time.sleep(<span class="hljs-number">3</span>)
        
        <span class="hljs-comment"># 4. æ¨¡æ‹Ÿæ»šåŠ¨é¡µé¢ï¼ŒæŸ¥çœ‹æ›´å¤šç»“æœ</span>
        driver.execute_script(<span class="hljs-string">"window.scrollTo(0, 1000);"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å·²æ»šåŠ¨åˆ°æœç´¢ç»“æœä¸­éƒ¨"</span>)
        time.sleep(<span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># 5. è·å–é¡µé¢æºç ï¼Œæå–ç¬¬ä¸€æ¡ç»“æœæ ‡é¢˜</span>
        html_source = driver.page_source
        soup = BeautifulSoup(html_source, <span class="hljs-string">"lxml"</span>)
        first_result_title = soup.find(<span class="hljs-string">"h3"</span>, class_=<span class="hljs-string">"t"</span>).get_text(strip=<span class="hljs-literal">True</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç¬¬ä¸€æ¡æœç´¢ç»“æœæ ‡é¢˜ï¼š<span class="hljs-subst">{first_result_title}</span>"</span>)
    
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ“ä½œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼š<span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-comment"># 6. å…³é—­æµè§ˆå™¨</span>
        time.sleep(<span class="hljs-number">2</span>)
        driver.quit()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næµè§ˆå™¨å·²å…³é—­ï¼Œæ“ä½œæµç¨‹ç»“æŸ"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    simulate_browser_operation()
</code></pre>
<h2 data-id="heading-16">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³åŠæ³•</h2>
<ol>
<li><strong><code>NoSuchElementException</code>ï¼ˆæœªæ‰¾åˆ°å…ƒç´ ï¼‰</strong>ï¼šâ‘  æ£€æŸ¥å®šä½è¡¨è¾¾å¼ï¼ˆIDã€XPathï¼‰æ˜¯å¦æ­£ç¡®ï¼›â‘¡ é¡µé¢æœªåŠ è½½å®Œæˆï¼Œæ›¿æ¢ä¸ºæ˜¾å¼ç­‰å¾…ï¼›â‘¢ å…ƒç´ åœ¨ <code>iframe</code> ä¸­ï¼Œéœ€å…ˆåˆ‡æ¢ï¼š<code>driver.switch_to.frame(iframe_element)</code>ã€‚</li>
<li><strong>é©±åŠ¨ä¸æµè§ˆå™¨ç‰ˆæœ¬ä¸åŒ¹é…</strong>ï¼šä¸‹è½½ä¸æµè§ˆå™¨å¤§ç‰ˆæœ¬ä¸€è‡´çš„é©±åŠ¨ï¼ˆå¦‚ Chrome 119.x å¯¹åº” ChromeDriver 119.xï¼‰ï¼Œé¿å…è¿‡æ–°æˆ–è¿‡æ—§ã€‚</li>
<li><strong>ç‚¹å‡»æ“ä½œæ— å“åº”</strong>ï¼šâ‘  å…ƒç´ è¢«é®æŒ¡ï¼ˆå¦‚å¹¿å‘Šå¼¹çª—ï¼‰ï¼Œå…ˆå…³é—­å¼¹çª—ï¼›â‘¡ å…ƒç´ ä¸å¯ç‚¹å‡»ï¼Œç­‰å¾… <code>EC.element_to_be_clickable()</code> æ¡ä»¶æ»¡è¶³ã€‚</li>
<li><strong>ä¸­æ–‡è¾“å…¥ä¹±ç </strong>ï¼šSelenium 4.x å·²è‰¯å¥½æ”¯æŒä¸­æ–‡ï¼Œç¡®ä¿æµè§ˆå™¨ç¼–ç ä¸º UTF-8ï¼Œç›´æ¥ä½¿ç”¨ <code>send_keys()</code> ä¼ å…¥ä¸­æ–‡å³å¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6å°æ—¶ä»0åˆ°1:æˆ‘ç”¨AIé€ äº†ä¸ªåˆ†ç‰‡SQLç”Ÿæˆå™¨]]></title>    <link>https://juejin.cn/post/7590433626560348195</link>    <guid>https://juejin.cn/post/7590433626560348195</guid>    <pubDate>2026-01-03T13:54:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590433626560348195" data-draft-id="7590433626560331811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6å°æ—¶ä»0åˆ°1:æˆ‘ç”¨AIé€ äº†ä¸ªåˆ†ç‰‡SQLç”Ÿæˆå™¨"/> <meta itemprop="keywords" content="åç«¯,SQL,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-03T13:54:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠç“¶å…¥æ¢¦"/> <meta itemprop="url" content="https://juejin.cn/user/2757990117802792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6å°æ—¶ä»0åˆ°1:æˆ‘ç”¨AIé€ äº†ä¸ªåˆ†ç‰‡SQLç”Ÿæˆå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2757990117802792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠç“¶å…¥æ¢¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:54:26.000Z" title="Sat Jan 03 2026 13:54:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<p>2025å¹´12æœˆåˆ,å› æ—§ç³»ç»Ÿæ•°æ®ä¿®å¤éœ€è¦,æˆ‘åœ¨æ²¡æœ‰db-proxyçš„æƒ…å†µä¸‹,ç”¨6å°æ—¶æ—¶é—´è®©AIä»é›¶å¼€å‘äº†ä¸€ä¸ªåˆ†ç‰‡SQLç”Ÿæˆå™¨ã€‚çº¯Node.jsåŸç”Ÿå®ç°,æ”¯æŒ6ç§åˆ†ç‰‡ç®—æ³•,åŒ…å«å®Œæ•´UIç•Œé¢å’ŒDockeréƒ¨ç½²æ–¹æ¡ˆã€‚ä»£ç å·²å¼€æº,ä½“éªŒåœ°å€:shard-sql-generator-demo.bpdream.com</p>
<hr/>
<h2 data-id="heading-1">The Incident:å‘¨å››ä¸‹åˆçš„æœªå®šçº§é—®é¢˜</h2>
<p>é‚£æ˜¯12æœˆåˆçš„ä¸€ä¸ªå‘¨å››ä¸‹åˆ,ç”¨æˆ·èµ„é‡‘åˆ’è½¬æ•°æ®å¼‚å¸¸ã€‚</p>
<p>å…·ä½“åœºæ™¯æ˜¯è¿™æ ·çš„:æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®,éœ€è¦é€šè¿‡è„šæœ¬æ‰¹é‡æ“ä½œç”¨æˆ·èµ„é‡‘ã€‚è„šæœ¬æ‰§è¡Œå,å‘ç°æ•°æ®é”™è¯¯â€”â€”å¹¸è¿çš„æ˜¯,é”™è¯¯é‡‘é¢å°äºåº”åˆ’è½¬é‡‘é¢,æ²¡æœ‰é€ æˆèµ„æŸã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†:éœ€è¦ä¿®å¤æ•°æ®ã€‚</p>
<p>ç›‘æ§ç³»ç»Ÿæœ‰1å°æ—¶å»¶æ—¶,ç­‰æˆ‘ä»¬å‘ç°é—®é¢˜æ—¶,å·²ç»è¿‡å»å¾ˆä¹…äº†ã€‚æˆ‘èµ¶ç´§æ‰¾ç›¸å…³RDæ‹‰æ•°æ®,å¯¹æ–¹é—®:"ä½ è¦å“ªä¸ªåˆ†ç‰‡çš„æ•°æ®?"</p>
<p>æˆ‘æ„£ä½äº†:"åˆ†ç‰‡?db-proxyä¸æ˜¯è‡ªåŠ¨è·¯ç”±å—?"</p>
<p>å¯¹æ–¹:"è¿™ä¸ªæ—§ç³»ç»Ÿæ²¡æœ‰db-proxy,éœ€è¦æ‰‹åŠ¨æŒ‡å®šåˆ†ç‰‡IDã€‚"</p>
<p>é‚£ä¸€åˆ»,æˆ‘è„‘å­é‡Œé—ªè¿‡ä¸€ä¸ªå¿µå¤´:è¿™ä¸å°±æ˜¯å…¸å‹çš„"æ—¥å¸¸çäº‹"å—?</p>
<hr/>
<h2 data-id="heading-2">The Struggle:LLMæ•‘åœº,ä½†ç—›ç‚¹çŠ¹åœ¨</h2>
<p>å¯¹æ–¹RDè¯´:"æ²¡äº‹,æˆ‘è®©LLMå¸®æˆ‘ç”Ÿæˆåˆ†ç‰‡SQLã€‚"</p>
<p>å‡ åˆ†é’Ÿå,ä»–å‘æ¥äº†ä¸€å †SQLè¯­å¥,æ¯ä¸ªéƒ½å¸¦ç€ä¸åŒçš„åˆ†ç‰‡åç¼€:<code>user_account_0</code>, <code>user_account_1</code>, <code>user_account_2</code>...</p>
<p>é—®é¢˜è§£å†³äº†,ä½†æˆ‘çš„èŒä¸šç—…çŠ¯äº†:</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆæ¯æ¬¡éƒ½è¦é—®LLM?</strong>
<strong>ä¸ºä»€ä¹ˆæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å·¥å…·æ¥å¤„ç†è¿™ç§éœ€æ±‚?</strong>
<strong>ä¸ºä»€ä¹ˆåˆ†ç‰‡è§„åˆ™è¦è®°åœ¨è„‘å­é‡Œ,è€Œä¸æ˜¯å¯è§†åŒ–é…ç½®?</strong></p>
</blockquote>
<p>æˆ‘å†³å®š:å†™ä¸€ä¸ªå·¥å…·ç½‘ç«™ã€‚</p>
<hr/>
<h2 data-id="heading-3">The Epiphany:AIå¼€å‘,6å°æ—¶äº¤ä»˜</h2>
<p>æˆ‘æ‰“å¼€Trae IDE,é€‰æ‹©äº†æ ‡å‡†æ™ºèƒ½ä½“,æ¨¡å‹ç”¨çš„æ˜¯doubao-seed-codeã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">gantt
    title 6å°æ—¶å¼€å‘æ—¶é—´çº¿
    dateFormat  HH:mm
    axisFormat %H:%M

    section éœ€æ±‚é˜¶æ®µ
    éœ€æ±‚åˆ†æä¸æŠ€æœ¯é€‰å‹        :a1, 14:00, 30m
    æ¶æ„è®¾è®¡                :a2, after a1, 30m

    section å¼€å‘é˜¶æ®µ
    åç«¯æ ¸å¿ƒåŠŸèƒ½å®ç°        :b1, after a2, 2h
    å‰ç«¯ç•Œé¢å¼€å‘            :b2, after b1, 2h
    APIæ¥å£å¯¹æ¥            :b3, after b2, 30m

    section æµ‹è¯•ä¸éƒ¨ç½²
    åŠŸèƒ½æµ‹è¯•ä¸ä¿®å¤          :c1, after b3, 30m
    Dockeréƒ¨ç½²é…ç½®          :c2, after c1, 30m
</code></pre>
<p>ä»ä¸‹åˆ2ç‚¹å¼€å§‹,åˆ°æ™šä¸Š8ç‚¹,ä¸€ä¸ªå®Œæ•´çš„åˆ†ç‰‡SQLç”Ÿæˆå™¨å°±ä¸Šçº¿äº†ã€‚</p>
<hr/>
<h2 data-id="heading-4">The System:æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-5">æŠ€æœ¯é€‰å‹:çº¯åŸç”Ÿ,é›¶ä¾èµ–</h3>
<p>ä¸ºä»€ä¹ˆä¸ç”¨Express/Koa/React/Vue?</p>
<p><strong>ç†ç”±å¾ˆç®€å•:</strong></p>
<ol>
<li><strong>éƒ¨ç½²æˆæœ¬</strong>:ç¬¬ä¸‰æ–¹ä¾èµ–è¶Šå¤š,éƒ¨ç½²è¶Šå¤æ‚</li>
<li><strong>å®‰å…¨æ€§</strong>:ä¾èµ–è¶Šå°‘,æ”»å‡»é¢è¶Šå°</li>
<li><strong>å­¦ä¹ æˆæœ¬</strong>:çº¯åŸç”Ÿä»£ç ,ä»»ä½•Node.jså¼€å‘è€…éƒ½èƒ½çœ‹æ‡‚</li>
<li><strong>æ€§èƒ½</strong>:åŸç”Ÿå®ç°,æ²¡æœ‰æ¡†æ¶å¼€é”€</li>
</ol>
<h3 data-id="heading-6">æ ¸å¿ƒæ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·æµè§ˆå™¨] --&gt; B[HTTPè¯·æ±‚]
    B --&gt; C[Node.jsåŸç”ŸæœåŠ¡å™¨]
    C --&gt; D[è·¯ç”±å¤„ç†]
    D --&gt; E[SQLç”Ÿæˆå™¨]
    D --&gt; F[åˆ†ç‰‡ç®—æ³•å¼•æ“]
    D --&gt; G[è„šæœ¬ç®¡ç†å™¨]
    E --&gt; H[è¿”å›åˆ†ç‰‡SQL]
    F --&gt; H
    G --&gt; H
    H --&gt; A

    style A fill:#e1f5ff
    style C fill:#fff4e1
    style H fill:#e8f5e9
</code></pre>
<h3 data-id="heading-7">åˆ†ç‰‡ç®—æ³•æ”¯æŒ</h3>








































<table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>å‚æ•°è¯´æ˜</th></tr></thead><tbody><tr><td>å–æ¨¡ç®—æ³•</td><td>æ•°æ®å‡åŒ€åˆ†å¸ƒ</td><td><code>mod</code>:å–æ¨¡åŸºæ•°</td></tr><tr><td>èŒƒå›´åˆ†ç‰‡</td><td>æœ‰æ˜ç¡®èŒƒå›´åˆ’åˆ†</td><td><code>rangeRules</code>:èŒƒå›´è§„åˆ™é…ç½®</td></tr><tr><td>å“ˆå¸Œåˆ†ç‰‡</td><td>å­—ç¬¦ä¸²ç±»å‹åˆ†ç‰‡é”®</td><td><code>hashAlgorithm</code>:å“ˆå¸Œç®—æ³•<br/><code>numShards</code>:åˆ†ç‰‡æ•°é‡</td></tr><tr><td>ä¸€è‡´æ€§å“ˆå¸Œ</td><td>åŠ¨æ€å¢å‡åˆ†ç‰‡</td><td><code>nodes</code>:èŠ‚ç‚¹é…ç½®<br/><code>virtualNodes</code>:è™šæ‹ŸèŠ‚ç‚¹æ•°</td></tr><tr><td>æ—¥æœŸåˆ†ç‰‡</td><td>æ—¶é—´åºåˆ—æ•°æ®</td><td><code>dateFormat</code>:æ—¥æœŸæ ¼å¼</td></tr><tr><td>è‡ªå®šä¹‰è„šæœ¬</td><td>ç‰¹æ®Šéœ€æ±‚åœºæ™¯</td><td><code>script</code>:è‡ªå®šä¹‰è„šæœ¬å†…å®¹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">The Implementation:æ ¸å¿ƒä»£ç è§£æ</h2>
<h3 data-id="heading-9">SQLç”Ÿæˆå™¨:ä»åŸå§‹SQLåˆ°åˆ†ç‰‡SQL</h3>
<p>æ ¸å¿ƒé€»è¾‘åœ¨<code>core/sql-generator.js</code>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">generateShardSQL</span>(<span class="hljs-params">originalSQL, shardKey, shardValue, shardId</span>) {
  <span class="hljs-keyword">let</span> shardSQL = originalSQL;

  <span class="hljs-comment">// 1. å¤„ç†è¡¨å,æ·»åŠ åˆ†ç‰‡åç¼€</span>
  <span class="hljs-keyword">const</span> fromTableRegex = <span class="hljs-regexp">/\bFROM\s+([a-zA-Z0-9_.]+)(?:\s+AS\s+([a-zA-Z0-9_]+))?\b/gi</span>;
  shardSQL = shardSQL.<span class="hljs-title function_">replace</span>(fromTableRegex, <span class="hljs-function">(<span class="hljs-params">match, table, alias</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> tableParts = table.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>);
    <span class="hljs-keyword">const</span> baseTable = tableParts[tableParts.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> schemaPrefix = tableParts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> ? tableParts.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'.'</span>) + <span class="hljs-string">'.'</span> : <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> shardedTable = <span class="hljs-string">`<span class="hljs-subst">${schemaPrefix}</span><span class="hljs-subst">${baseTable}</span>_<span class="hljs-subst">${shardId}</span>`</span>;
    <span class="hljs-keyword">return</span> alias ? <span class="hljs-string">`FROM <span class="hljs-subst">${shardedTable}</span> AS <span class="hljs-subst">${alias}</span>`</span> : <span class="hljs-string">`FROM <span class="hljs-subst">${shardedTable}</span>`</span>;
  });

  <span class="hljs-comment">// 2. æ·»åŠ åˆ†ç‰‡é”®æ¡ä»¶</span>
  <span class="hljs-keyword">const</span> shardCondition = <span class="hljs-string">`<span class="hljs-subst">${shardKey}</span> = <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> shardValue === <span class="hljs-string">'number'</span> ? shardValue : <span class="hljs-string">`'<span class="hljs-subst">${shardValue}</span>'`</span>}</span>`</span>;
  <span class="hljs-keyword">const</span> whereIndex = shardSQL.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">' where '</span>);

  <span class="hljs-keyword">if</span> (whereIndex !== -<span class="hljs-number">1</span>) {
    <span class="hljs-comment">// å·²æœ‰WHEREå­å¥,æ·»åŠ ANDæ¡ä»¶</span>
    <span class="hljs-keyword">const</span> whereEnd = whereIndex + <span class="hljs-number">7</span>;
    shardSQL = shardSQL.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, whereEnd) + <span class="hljs-string">`<span class="hljs-subst">${shardCondition}</span> AND `</span> + shardSQL.<span class="hljs-title function_">slice</span>(whereEnd);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ²¡æœ‰WHEREå­å¥,ç›´æ¥æ·»åŠ </span>
    shardSQL += <span class="hljs-string">` WHERE <span class="hljs-subst">${shardCondition}</span>`</span>;
  }

  <span class="hljs-keyword">return</span> shardSQL;
}
</code></pre>
<p><strong>åŸå§‹SQL:</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_account <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
</code></pre>
<p><strong>ç”Ÿæˆå(åˆ†ç‰‡ID=2,åˆ†ç‰‡é”®=user_id=12345):</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> user_account_2 <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">12345</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
</code></pre>
<h3 data-id="heading-10">åˆ†ç‰‡ç®—æ³•:å–æ¨¡ç®—æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> shardAlgorithms = {
  <span class="hljs-attr">mod</span>: <span class="hljs-function">(<span class="hljs-params">value, config</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> num = <span class="hljs-built_in">parseInt</span>(value);
    <span class="hljs-keyword">const</span> mod = <span class="hljs-built_in">parseInt</span>(config.<span class="hljs-property">mod</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">isNaN</span>(num) ? <span class="hljs-number">0</span> : num % mod;
  }
};
</code></pre>
<p><strong>ç¤ºä¾‹:</strong></p>
<ul>
<li><code>user_id = 12345</code>, <code>mod = 4</code></li>
<li><code>12345 % 4 = 1</code></li>
<li>è·¯ç”±åˆ°åˆ†ç‰‡1</li>
</ul>
<hr/>
<h2 data-id="heading-11">The UI:ç°ä»£åŒ–ç•Œé¢è®¾è®¡</h2>
<h3 data-id="heading-12">ä¸»ç•Œé¢å¸ƒå±€</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å·¦ä¾§é¢æ¿&lt;br/&gt;åˆ†ç‰‡è§„åˆ™é…ç½®] --&gt; B[ä¸­é—´é¢æ¿&lt;br/&gt;SQLè¾“å…¥ä¸ç”Ÿæˆ]
    B --&gt; C[å³ä¾§é¢æ¿&lt;br/&gt;ç»“æœå±•ç¤ºä¸å†å²]

    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e9
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c118e669384f4a8f9a316fe3c2f5b830~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2K55O25YWl5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768053266&amp;x-signature=o924%2FyTlWAX5nvMz%2BxovQatnudM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</h3>
<ol>
<li>
<p><strong>åˆ†ç‰‡è§„åˆ™é…ç½®</strong></p>
<ul>
<li>6ç§åˆ†ç‰‡ç®—æ³•é€‰æ‹©</li>
<li>åŠ¨æ€å‚æ•°é…ç½®</li>
<li>è‡ªå®šä¹‰è„šæœ¬ç¼–è¾‘å™¨</li>
</ul>
</li>
<li>
<p><strong>SQLè¾“å…¥ä¸ç”Ÿæˆ</strong></p>
<ul>
<li>SQLè¯­æ³•é«˜äº®</li>
<li>æ‰¹é‡åˆ†ç‰‡é”®å€¼è¾“å…¥</li>
<li>ä¸€é”®ç”Ÿæˆ</li>
</ul>
</li>
<li>
<p><strong>ç»“æœå±•ç¤º</strong></p>
<ul>
<li>åˆ†ç‰‡SQLåˆ—è¡¨</li>
<li>èšåˆSQLç”Ÿæˆ</li>
<li>ä¸€é”®å¤åˆ¶/å¯¼å‡º</li>
</ul>
</li>
<li>
<p><strong>å†å²è®°å½•</strong></p>
<ul>
<li>æ“ä½œå†å²ä¿å­˜</li>
<li>å¿«é€Ÿå›æº¯</li>
<li>æœ¬åœ°å­˜å‚¨</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-14">The Deployment:åŒé‡éƒ¨ç½²æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">è£¸æœºéƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…‹éš†é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/skys-mission/ai-dev-demo.git
<span class="hljs-built_in">cd</span> ai-dev-demo/shard-sql-generator

<span class="hljs-comment"># 2. å¯åŠ¨æœåŠ¡</span>
node server.js

<span class="hljs-comment"># 3. è®¿é—®åº”ç”¨</span>
<span class="hljs-comment"># http://localhost:3000</span>
</code></pre>
<p><strong>ç¯å¢ƒè¦æ±‚:</strong></p>
<ul>
<li>Node.js 14.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>512MB ä»¥ä¸Šå†…å­˜</li>
<li>100MB ä»¥ä¸Šç£ç›˜ç©ºé—´</li>
</ul>
<h3 data-id="heading-16">Dockeréƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ„å»ºé•œåƒ</span>
docker build -t shard-sql-generator .

<span class="hljs-comment"># 2. è¿è¡Œå®¹å™¨</span>
docker run -d -p 3000:3000 --name shard-sql-generator shard-sql-generator

<span class="hljs-comment"># 3. ä½¿ç”¨Docker Compose</span>
docker-compose up -d
</code></pre>
<p><strong>Dockerfile:</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:14-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 3000

CMD ["node", "server.js"]
</code></pre>
<hr/>
<h2 data-id="heading-17">The Impact:å®é™…åº”ç”¨ä»·å€¼</h2>
<h3 data-id="heading-18">è§£å†³çš„é—®é¢˜</h3>
<ol>
<li><strong>æ•ˆç‡æå‡</strong>:ä»"é—®LLM+æ‰‹åŠ¨ä¿®æ”¹"åˆ°"ä¸€é”®ç”Ÿæˆ",èŠ‚çœ90%æ—¶é—´</li>
<li><strong>é”™è¯¯å‡å°‘</strong>:é¿å…æ‰‹åŠ¨ä¿®æ”¹SQLæ—¶çš„æ‹¼å†™é”™è¯¯</li>
<li><strong>çŸ¥è¯†æ²‰æ·€</strong>:åˆ†ç‰‡è§„åˆ™å¯è§†åŒ–é…ç½®,ä¸å†ä¾èµ–ä¸ªäººè®°å¿†</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>:ç»Ÿä¸€çš„å·¥å…·,é™ä½æ²Ÿé€šæˆæœ¬</li>
</ol>
<h3 data-id="heading-19">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•°æ®ä¿®å¤</strong>:æ‰¹é‡ä¿®å¤åˆ†ç‰‡è¡¨æ•°æ®</li>
<li><strong>æ•°æ®è¿ç§»</strong>:è·¨åˆ†ç‰‡æ•°æ®è¿ç§»</li>
<li><strong>æ•°æ®åˆ†æ</strong>:åˆ†æç‰¹å®šåˆ†ç‰‡çš„æ•°æ®</li>
<li><strong>æ—¥å¸¸è¿ç»´</strong>:å¿«é€Ÿç”Ÿæˆåˆ†ç‰‡SQL</li>
</ul>
<hr/>
<h2 data-id="heading-20">The Reflection:AIå¼€å‘çš„æ€è€ƒ</h2>
<h3 data-id="heading-21">ä¸ºä»€ä¹ˆèƒ½6å°æ—¶å®Œæˆ?</h3>
<ol>
<li><strong>éœ€æ±‚æ˜ç¡®</strong>:ä»å®é™…é—®é¢˜å‡ºå‘,æ²¡æœ‰è¿‡åº¦è®¾è®¡</li>
<li><strong>æŠ€æœ¯é€‰å‹ç®€å•</strong>:çº¯åŸç”Ÿå®ç°,é¿å…æ¡†æ¶å­¦ä¹ æˆæœ¬</li>
<li><strong>AIè¾…åŠ©</strong>:Traeæ™ºèƒ½ä½“+doubao-seed-codeæ¨¡å‹,ä»£ç ç”Ÿæˆæ•ˆç‡é«˜</li>
<li><strong>MVPæ€ç»´</strong>:å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½,å†è¿­ä»£ä¼˜åŒ–</li>
</ol>
<h3 data-id="heading-22">AIå¼€å‘çš„å±€é™æ€§</h3>
<ol>
<li><strong>ä¸Šä¸‹æ–‡ç†è§£</strong>:AIå¯¹ä¸šåŠ¡é€»è¾‘çš„ç†è§£ä¸å¦‚äººç±»,éœ€è¦æ˜ç¡®çš„éœ€æ±‚æè¿°</li>
<li><strong>ä»£ç è´¨é‡</strong>:AIç”Ÿæˆçš„ä»£ç éœ€è¦äººå·¥reviewå’Œä¼˜åŒ–</li>
<li><strong>è°ƒè¯•æˆæœ¬</strong>:AIç”Ÿæˆçš„bugéœ€è¦äººç±»è°ƒè¯•,å¯èƒ½æ¯”æ‰‹å†™æ›´è€—æ—¶</li>
<li><strong>ç»´æŠ¤æ€§</strong>:AIç”Ÿæˆçš„ä»£ç å¯è¯»æ€§å¯èƒ½ä¸å¦‚æ‰‹å†™</li>
</ol>
<h3 data-id="heading-23">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>éœ€æ±‚å…ˆè¡Œ</strong>:æ˜ç¡®éœ€æ±‚,å†è®©AIå®ç°</li>
<li><strong>è¿­ä»£å¼€å‘</strong>:åˆ†é˜¶æ®µå®ç°,æ¯é˜¶æ®µéªŒè¯</li>
<li><strong>ä»£ç Review</strong>:AIç”Ÿæˆå,äººå·¥reviewå¿…ä¸å¯å°‘</li>
<li><strong>æµ‹è¯•é©±åŠ¨</strong>:å†™æµ‹è¯•ç”¨ä¾‹,ç¡®ä¿åŠŸèƒ½æ­£ç¡®</li>
</ol>
<hr/>
<h2 data-id="heading-24">The Code:å¼€æºä¸è´¡çŒ®</h2>
<h3 data-id="heading-25">é¡¹ç›®åœ°å€</h3>
<ul>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fskys-mission%2Fai-dev-demo%2Ftree%2Fmain%2Fshard-sql-generator" target="_blank" title="https://github.com/skys-mission/ai-dev-demo/tree/main/shard-sql-generator" ref="nofollow noopener noreferrer">github.com/skys-missioâ€¦</a></li>
<li><strong>ä½“éªŒåœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fshard-sql-generator-demo.bpdream.com" target="_blank" title="https://shard-sql-generator-demo.bpdream.com" ref="nofollow noopener noreferrer">shard-sql-generator-demo.bpdream.com</a></li>
</ul>
<h3 data-id="heading-26">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-csharp" lang="csharp">shard-sql-generator/
â”œâ”€â”€ core/                 <span class="hljs-meta"># æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</span>
â”‚   â”œâ”€â”€ sql-generator.js  <span class="hljs-meta"># åˆ†ç‰‡SQLç”Ÿæˆå™¨</span>
â”‚   â””â”€â”€ script-manager.js <span class="hljs-meta"># è„šæœ¬ç®¡ç†å™¨</span>
â”œâ”€â”€ <span class="hljs-keyword">public</span>/               <span class="hljs-meta"># é™æ€æ–‡ä»¶ç›®å½•</span>
â”‚   â”œâ”€â”€ index.html        <span class="hljs-meta"># ä¸»é¡µé¢</span>
â”‚   â”œâ”€â”€ styles.css        <span class="hljs-meta"># æ ·å¼æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ app.js            <span class="hljs-meta"># å‰ç«¯é€»è¾‘</span>
â”‚   â””â”€â”€ modules/          <span class="hljs-meta"># åŠŸèƒ½æ¨¡å—</span>
â”‚       â”œâ”€â”€ shard-algorithm.js
â”‚       â”œâ”€â”€ sql-handler.js
â”‚       â”œâ”€â”€ script-manager.js
â”‚       â””â”€â”€ history-manager.js
â”œâ”€â”€ server.js             <span class="hljs-meta"># æœåŠ¡å™¨å…¥å£</span>
â”œâ”€â”€ Dockerfile            <span class="hljs-meta"># Dockeré…ç½®</span>
â”œâ”€â”€ docker-compose.yml    <span class="hljs-meta"># Docker Composeé…ç½®</span>
â””â”€â”€ package.json          <span class="hljs-meta"># é¡¹ç›®é…ç½®</span>
</code></pre>
<h3 data-id="heading-27">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>åç«¯</strong>:Node.js åŸç”Ÿ (æ— ç¬¬ä¸‰æ–¹ä¾èµ–)</li>
<li><strong>å‰ç«¯</strong>:HTML5 + CSS3 + JavaScript (åŸç”Ÿ)</li>
<li><strong>å­˜å‚¨</strong>:localStorage + JSONæ–‡ä»¶</li>
<li><strong>éƒ¨ç½²</strong>:è£¸æœºéƒ¨ç½² / Dockerå®¹å™¨</li>
</ul>
<hr/>
<h2 data-id="heading-28">Conclusion</h2>
<p>6å°æ—¶,ä»0åˆ°1,ä¸€ä¸ªå®Œæ•´çš„åˆ†ç‰‡SQLç”Ÿæˆå™¨ã€‚</p>
<p>è¿™ä¸æ˜¯ä»€ä¹ˆ"é©å‘½æ€§"çš„æŠ€æœ¯åˆ›æ–°,ä½†å®ƒè§£å†³äº†ä¸€ä¸ªçœŸå®å­˜åœ¨çš„ç—›ç‚¹ã€‚</p>
<p>åœ¨å¤§å‚,æˆ‘ä»¬æ¯å¤©éƒ½åœ¨å¤„ç†å„ç§"çäº‹":æ•°æ®ä¿®å¤ã€SQLç”Ÿæˆã€è„šæœ¬ç¼–å†™...è¿™äº›äº‹æƒ…çœ‹ä¼¼ç®€å•,ä½†é‡å¤åŠ³åŠ¨ä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ã€‚</p>
<p><strong>AIçš„ä»·å€¼ä¸åœ¨äºæ›¿ä»£äººç±»,è€Œåœ¨äºæŠŠäººç±»ä»é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥,è®©æˆ‘ä»¬ä¸“æ³¨äºæ›´æœ‰ä»·å€¼çš„äº‹æƒ…ã€‚</strong></p>
<p>è¿™ä¸ªé¡¹ç›®åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æœªæ¥,æˆ‘ä¼šç»§ç»­ç”¨AIè§£å†³æ›´å¤šæ—¥å¸¸çäº‹,å¹¶æŠŠç»éªŒåˆ†äº«å‡ºæ¥ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚,æ¬¢è¿è¯•ç”¨,ä¹Ÿæ¬¢è¿è´¡çŒ®ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ç¡¬æ ¸ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Python æ‰“é€ ä¼ä¸šçº§ LLM ç½‘å…³ (FastAPI + Asyncio æ¶æ„ç¯‡)]]></title>    <link>https://juejin.cn/post/7590654281036873771</link>    <guid>https://juejin.cn/post/7590654281036873771</guid>    <pubDate>2026-01-03T15:02:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590654281036873771" data-draft-id="7590309337861619753" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ç¡¬æ ¸ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Python æ‰“é€ ä¼ä¸šçº§ LLM ç½‘å…³ (FastAPI + Asyncio æ¶æ„ç¯‡)"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-03T15:02:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç›´åœ¨è¿½"/> <meta itemprop="url" content="https://juejin.cn/user/239028506736411"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ç¡¬æ ¸ï¼æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ Python æ‰“é€ ä¼ä¸šçº§ LLM ç½‘å…³ (FastAPI + Asyncio æ¶æ„ç¯‡)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/239028506736411/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç›´åœ¨è¿½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T15:02:00.000Z" title="Sat Jan 03 2026 15:02:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ğŸ’ æœ¬æ–‡ä»·å€¼æç¤º</h3>
<blockquote>
<p><strong>ä½ å°†è·å¾—ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li><strong>ä»é›¶æ„å»º</strong>ï¼šä¸å†æ˜¯å†™è„šæœ¬ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ªå¯æ‰©å±•çš„å¾®æœåŠ¡æ¶æ„ã€‚</li>
<li><strong>ä¼ä¸šçº§æ€ç»´</strong>ï¼šæŒæ¡é™æµã€ç†”æ–­ã€æµå¼ä¼ è¾“ç­‰ç”Ÿäº§ç¯å¢ƒå¿…å¤‡æŠ€èƒ½ã€‚</li>
<li><strong>ä»£ç å³èµ„äº§</strong>ï¼šä¸€å¥—å¯ç›´æ¥å¤ç”¨çš„ LLM Gateway æ ¸å¿ƒä»£ç éª¨æ¶ã€‚</li>
<li><strong>è½¬å‹è§†è§’</strong>ï¼šçœ‹æ‡‚å¤§æ•°æ®é«˜ååæ€ç»´å¦‚ä½•æ˜ å°„åˆ° AI é«˜å¹¶å‘æ¶æ„ã€‚</li>
</ol>
</blockquote>
<hr/>
<p>ğŸ‘‹ <strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä½ ä»¬çš„è€æœ‹å‹ï¼Œé‚£ä¸ªæ­£åœ¨ä»å¤§æ•°æ®è½¬å‹ AI æ¶æ„çš„â€œè€å¸æœºâ€ã€‚</strong></p>
<p>åœ¨å‰ä¸‰ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† Python çš„â€œè„±èƒæ¢éª¨â€ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€ç¯‡</strong>ï¼šæˆ‘ä»¬ç”¨ <strong>Type Hints å’Œ Pydantic</strong> æˆ’æ‰äº†â€œå¼±ç±»å‹â€çš„éšæ„ï¼Œåƒå†™ Java ä¸€æ ·ä¸¥è°¨ï¼›</li>
<li><strong>ç¬¬äºŒç¯‡</strong>ï¼šæˆ‘ä»¬ç”¨ <strong>Asyncio</strong> å¾æœäº†é«˜å¹¶å‘ I/Oï¼Œä¸å†è®© CPU å‚»ç­‰ï¼›</li>
<li><strong>ç¬¬ä¸‰ç¯‡</strong>ï¼šæˆ‘ä»¬ç”¨ <strong>Generator å’Œ Decorator</strong> æå®šäº†æµå¼è¾“å‡ºå’Œ AOP åˆ‡é¢ç¼–ç¨‹ã€‚</li>
</ul>
<p>ä»Šå¤©ï¼Œæ˜¯æ—¶å€™æŠŠè¿™äº›æ•£è½çš„çç ä¸²æˆé¡¹é“¾äº†ï¼æˆ‘ä»¬å°†è¿›å…¥ <strong>Phase 4ï¼šå·¥ç¨‹åŒ–è½åœ°ä¸æ¶æ„è®¾è®¡</strong>ã€‚</p>
<p>æˆ‘ä»¬è¦ä¸€èµ·åšä¸€ä¸ª <strong>Capstone Projectï¼ˆæ¯•ä¸šè®¾è®¡ï¼‰</strong> â€”â€” <strong>ä¼ä¸šçº§ LLM Gatewayï¼ˆå¤§æ¨¡å‹ç½‘å…³ï¼‰</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ—ï¸ ä¸ºä»€ä¹ˆè¦é€ ä¸€ä¸ª LLM Gatewayï¼Ÿ</h3>
<p>åœ¨ä¼ä¸šé‡Œï¼Œç›´æ¥è®©ä¸šåŠ¡ä»£ç è°ƒç”¨ OpenAI æˆ– DeepSeek çš„ API æ˜¯éå¸¸å±é™©çš„ã€‚è¿™å°±å¥½æ¯”è®©å…¬å¸çš„æ¯è¾†è½¦éƒ½è‡ªå·±å»æµ·å…³æŠ¥å…³ï¼Œæ•ˆç‡ä½ä¸”æ— æ³•ç®¡æ§ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <strong>â€œæµ·å…³æ€»ç½²â€ (Gateway)</strong> ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€è®¡è´¹</strong>ï¼šè°ç”¨äº†å¤šå°‘ Tokenï¼Œå¾—ç®—æ¸…æ¥šã€‚</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šé˜²æ­¢æŸä¸ªä¸šåŠ¡çº¿æŠŠ API Rate Limit åˆ·çˆ†ã€‚</li>
<li><strong>åè®®è½¬æ¢</strong>ï¼šå‰ç«¯è¦ SSE æµå¼ï¼Œåç«¯è¦ç»Ÿä¸€æ¥å£ã€‚</li>
<li><strong>å®‰å…¨å®¡è®¡</strong>ï¼šæ•æ„Ÿè¯è¿‡æ»¤ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²ã€‚</li>
</ol>
<p><strong>æŠ€æœ¯æ ˆé€‰å‹</strong>ï¼š</p>
<ul>
<li><strong>æ¡†æ¶</strong>ï¼š<code>FastAPI</code> (Python ç•Œçš„æœ€å¼ºé»‘é©¬ï¼Œæ€§èƒ½ç›´é€¼ Go)ã€‚</li>
<li><strong>æ ¡éªŒ</strong>ï¼š<code>Pydantic V2</code> (æ•°æ®å¥‘çº¦çš„å®ˆæŠ¤ç¥)ã€‚</li>
<li><strong>å¹¶å‘</strong>ï¼š<code>Asyncio</code> (é«˜å¹¶å‘çš„æ ¸å¿ƒå¼•æ“)ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ§© æ¶æ„è“å›¾ï¼šæ•°æ®æ˜¯å¦‚ä½•æµåŠ¨çš„ï¼Ÿ</h3>
<p>åœ¨æˆ‘ä»¬å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œå…ˆåƒè®¾è®¡ Flink æ‹“æ‰‘å›¾ä¸€æ ·ï¼Œç”»å‡ºæˆ‘ä»¬çš„æ¶æ„æµå‘ã€‚</p>
<p><img src="http://openwrite.cn/uploads/20235/58127/860d1052-faec-42e2-82b2-3b44abe459a4.png" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šç«‹è§„çŸ© â€”â€” å®šä¹‰æ•°æ®å¥‘çº¦ (Pydantic)</h3>
<p>åšå¤§æ•°æ®å‡ºèº«çš„æˆ‘ä»¬ï¼Œæœ€æ€•æ•°æ®æ ¼å¼ä¹±ä¸ƒå…«ç³Ÿã€‚åœ¨ AI æ¶æ„ä¸­ï¼Œ<strong>Prompt å°±æ˜¯ SQLï¼ŒSchema å°±æ˜¯ Table Schema</strong>ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å®šä¹‰â€œè¾“å…¥â€å’Œâ€œè¾“å‡ºâ€çš„ä¸¥æ ¼æ ‡å‡†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field, field_validator
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span>, <span class="hljs-type">Literal</span>

<span class="hljs-comment"># 1. å®šä¹‰æ¶ˆæ¯ä½“</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Message</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    role: <span class="hljs-type">Literal</span>[<span class="hljs-string">"system"</span>, <span class="hljs-string">"user"</span>, <span class="hljs-string">"assistant"</span>]
    content: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># 2. å®šä¹‰è¯·æ±‚å¥‘çº¦ (Request Contract)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatCompletionRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    model: <span class="hljs-built_in">str</span> = Field(..., description=<span class="hljs-string">"æ¨¡å‹åç§°ï¼Œå¦‚ gpt-4, deepseek-chat"</span>)
    messages: <span class="hljs-type">List</span>[Message]
    temperature: <span class="hljs-built_in">float</span> = Field(<span class="hljs-number">0.7</span>, ge=<span class="hljs-number">0.0</span>, le=<span class="hljs-number">2.0</span>)
    stream: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span>

    <span class="hljs-comment"># ğŸ’¡ äº®ç‚¹ï¼šè‡ªå®šä¹‰æ ¡éªŒï¼Œé˜²æ­¢æ¶æ„æ³¨å…¥è¿‡é•¿æ–‡æœ¬</span>
<span class="hljs-meta">    @field_validator(<span class="hljs-params"><span class="hljs-string">'messages'</span></span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_message_length</span>(<span class="hljs-params">cls, v</span>):
        total_len = <span class="hljs-built_in">sum</span>(<span class="hljs-built_in">len</span>(m.content) <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> v)
        <span class="hljs-keyword">if</span> total_len &gt; <span class="hljs-number">10000</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Prompt å†…å®¹è¿‡é•¿ï¼Œè¯·ç²¾ç®€åé‡è¯•"</span>)
        <span class="hljs-keyword">return</span> v

<span class="hljs-comment"># 3. å®šä¹‰å“åº”å¥‘çº¦ (Response Contract)</span>
<span class="hljs-comment"># è¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿ OpenAI çš„æ ‡å‡†è¿”å›æ ¼å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatCompletionResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">id</span>: <span class="hljs-built_in">str</span>
    <span class="hljs-built_in">object</span>: <span class="hljs-built_in">str</span> = <span class="hljs-string">"chat.completion"</span>
    created: <span class="hljs-built_in">int</span>
    choices: <span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>]
</code></pre>
<p><strong>ğŸ‘¨â€ğŸ’» æ¶æ„å¸ˆæ—ç™½</strong>ï¼š
è¿™ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œè¿™æ˜¯<strong>åè®®</strong>ã€‚æœ‰äº†å®ƒï¼Œå‰ç«¯å¼€å‘å’Œåç«¯å¼€å‘å°±æœ‰äº†â€œæ³•å¾‹ä¾æ®â€ï¼Œä¸å†éœ€è¦å£å¤´å¯¹é½å­—æ®µã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸš€ ç¬¬äºŒæ­¥ï¼šé«˜å¹¶å‘å¼•æ“ â€”â€” å¼‚æ­¥è¯·æ±‚ (Asyncio)</h3>
<p>LLM çš„å“åº”é€šå¸¸å¾ˆæ…¢ï¼ˆå‡ ç§’åˆ°å‡ åç§’ï¼‰ã€‚å¦‚æœç”¨ä¼ ç»Ÿçš„åŒæ­¥ä»£ç ï¼ˆåƒ JDBC é‚£æ ·ï¼‰ï¼Œä¸€ä¸ªè¯·æ±‚å¡ä½ï¼Œæ•´ä¸ªæœåŠ¡å°±æŒ‚äº†ã€‚</p>
<p>æˆ‘ä»¬è¦ç”¨ <code>Asyncio</code> + <code>httpx</code>ï¼Œå®ç°<strong>éé˜»å¡è°ƒç”¨</strong>ã€‚è¿™å°±åƒ Node.js çš„äº‹ä»¶å¾ªç¯ï¼Œæˆ–è€… Netty çš„ IO çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> HTTPException

<span class="hljs-comment"># æ¨¡æ‹Ÿä»ç¯å¢ƒå˜é‡è·å– Key</span>
LLM_API_KEY = os.getenv(<span class="hljs-string">"LLM_API_KEY"</span>)
LLM_BASE_URL = <span class="hljs-string">"https://api.deepseek.com/v1"</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">call_llm_api</span>(<span class="hljs-params">request: ChatCompletionRequest</span>):
    <span class="hljs-string">"""
    å¼‚æ­¥è°ƒç”¨ä¸Šæ¸¸å¤§æ¨¡å‹æ¥å£
    """</span>
    headers = {
        <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{LLM_API_KEY}</span>"</span>,
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>
    }
    
    <span class="hljs-comment"># ğŸ’¡ äº®ç‚¹ï¼šä½¿ç”¨å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œè‡ªåŠ¨é‡Šæ”¾è¿æ¥</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient(timeout=<span class="hljs-number">60.0</span>) <span class="hljs-keyword">as</span> client:
        <span class="hljs-keyword">try</span>:
            response = <span class="hljs-keyword">await</span> client.post(
                <span class="hljs-string">f"<span class="hljs-subst">{LLM_BASE_URL}</span>/chat/completions"</span>,
                json=request.model_dump(), <span class="hljs-comment"># Pydantic V2 åºåˆ—åŒ–</span>
                headers=headers
            )
            response.raise_for_status()
            <span class="hljs-keyword">return</span> response.json()
        <span class="hljs-keyword">except</span> httpx.HTTPStatusError <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># è®°å½•æ—¥å¿—...</span>
            <span class="hljs-keyword">raise</span> HTTPException(status_code=e.response.status_code, detail=<span class="hljs-string">"ä¸Šæ¸¸æœåŠ¡æŠ¥é”™"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸŒŠ ç¬¬ä¸‰æ­¥ï¼šæè‡´ä½“éªŒ â€”â€” æµå¼é€ä¼  (Generator)</h3>
<p>ç”¨æˆ·ä¸æƒ³ç›¯ç€ç©ºç™½å±å¹•ç­‰ 10 ç§’ã€‚ä»–ä»¬æƒ³è¦ ChatGPT é‚£ç§â€œæ‰“å­—æœºâ€æ•ˆæœã€‚
è¿™å°±éœ€è¦ç”¨åˆ° Python çš„ <strong>Generator (ç”Ÿæˆå™¨)</strong> ï¼Œé…åˆ FastAPI çš„ <code>StreamingResponse</code>ã€‚</p>
<p>è¿™åœ¨å¤§æ•°æ®é¢†åŸŸï¼Œå°±æ˜¯ <strong>Spark Streaming</strong> æˆ– <strong>Flink DataStream</strong> â€”â€” æ•°æ®æ¥ä¸€æ¡ï¼Œå¤„ç†ä¸€æ¡ï¼Œå‘èµ°ä¸€æ¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> AsyncGenerator

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">stream_llm_api</span>(<span class="hljs-params">request: ChatCompletionRequest</span>) -&gt; AsyncGenerator[<span class="hljs-built_in">str</span>, <span class="hljs-literal">None</span>]:
    <span class="hljs-string">"""
    æµå¼ç”Ÿæˆå™¨ï¼šåƒæ°´ç®¡ä¸€æ ·æ¥é€šä¸Šæ¸¸å’Œä¸‹æ¸¸
    """</span>
    headers = {
        <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">f"Bearer <span class="hljs-subst">{LLM_API_KEY}</span>"</span>,
        <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>
    }
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        <span class="hljs-comment"># å¼€å¯æµå¼è¯·æ±‚</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> client.stream(
            <span class="hljs-string">"POST"</span>, 
            <span class="hljs-string">f"<span class="hljs-subst">{LLM_BASE_URL}</span>/chat/completions"</span>, 
            json=request.model_dump(), 
            headers=headers
        ) <span class="hljs-keyword">as</span> response:
            
            <span class="hljs-comment"># ğŸ’¡ äº®ç‚¹ï¼šé€è¡Œè¯»å–ä¸Šæ¸¸æ•°æ®ï¼Œå¹¶å®æ—¶ yield ç»™å‰ç«¯</span>
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> response.aiter_lines():
                <span class="hljs-keyword">if</span> line:
                    <span class="hljs-comment"># è¿™é‡Œå¯ä»¥åšæ•°æ®æ¸…æ´—ã€è®¡è´¹ç»Ÿè®¡ç­‰ä¸­é—´å¤„ç†</span>
                    <span class="hljs-keyword">yield</span> <span class="hljs-string">f"<span class="hljs-subst">{line}</span>\n\n"</span> <span class="hljs-comment"># ç¬¦åˆ SSE æ ¼å¼</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">ğŸ›¡ï¸ ç¬¬å››æ­¥ï¼šç¨³å®šæ€§ä¿éšœ â€”â€” ç†”æ–­å™¨ (Decorator)</h3>
<p>å¦‚æœä¸Šæ¸¸ DeepSeek æŒ‚äº†ï¼Œæˆ–è€…ç½‘ç»œæŠ–åŠ¨ï¼Œæˆ‘ä»¬ä¸èƒ½è®©è¯·æ±‚å †ç§¯æŠŠè‡ªå·±çš„ç½‘å…³å‹å®ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <strong>ç†”æ–­å™¨ (Circuit Breaker)</strong> ã€‚</p>
<p>åˆ©ç”¨ Python çš„ <strong>Decorator (è£…é¥°å™¨)</strong> ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜é›…åœ°å®ç° AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-comment"># ç®€å•çš„ç†”æ–­å™¨çŠ¶æ€</span>
CIRCUIT_OPEN = <span class="hljs-literal">False</span>
ERROR_COUNT = <span class="hljs-number">0</span>
LAST_ERROR_TIME = <span class="hljs-number">0</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">circuit_breaker</span>(<span class="hljs-params">threshold=<span class="hljs-number">5</span>, recovery_time=<span class="hljs-number">60</span></span>):
    <span class="hljs-string">"""
    è£…é¥°å™¨ï¼šå½“é”™è¯¯æ¬¡æ•°è¶…è¿‡ threshold æ—¶ï¼Œæš‚åœæœåŠ¡ recovery_time ç§’
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
            <span class="hljs-keyword">global</span> CIRCUIT_OPEN, ERROR_COUNT, LAST_ERROR_TIME
            
            <span class="hljs-comment"># 1. æ£€æŸ¥æ˜¯å¦ç†”æ–­</span>
            <span class="hljs-keyword">if</span> CIRCUIT_OPEN:
                <span class="hljs-keyword">if</span> time.time() - LAST_ERROR_TIME &gt; recovery_time:
                    <span class="hljs-comment"># å°è¯•æ¢å¤</span>
                    CIRCUIT_OPEN = <span class="hljs-literal">False</span>
                    ERROR_COUNT = <span class="hljs-number">0</span>
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">503</span>, detail=<span class="hljs-string">"æœåŠ¡ç†”æ–­ä¸­ï¼Œè¯·ç¨åé‡è¯•"</span>)
            
            <span class="hljs-comment"># 2. å°è¯•æ‰§è¡Œ</span>
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> func(*args, **kwargs)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                ERROR_COUNT += <span class="hljs-number">1</span>
                LAST_ERROR_TIME = time.time()
                <span class="hljs-keyword">if</span> ERROR_COUNT &gt;= threshold:
                    CIRCUIT_OPEN = <span class="hljs-literal">True</span>
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ è§¦å‘ç†”æ–­ä¿æŠ¤ï¼"</span>)
                <span class="hljs-keyword">raise</span> e
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorator
</code></pre>
<hr/>
<h3 data-id="heading-7">ğŸ° ç¬¬äº”æ­¥ï¼šé›†å¤§æˆ â€”â€” FastAPI å…¥å£</h3>
<p>æœ€åï¼Œæˆ‘ä»¬å°†æ‰€æœ‰ç»„ä»¶ç»„è£…åˆ° <code>main.py</code> ä¸­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">from</span> fastapi.responses <span class="hljs-keyword">import</span> StreamingResponse

app = FastAPI(title=<span class="hljs-string">"Enterprise LLM Gateway"</span>)

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/v1/chat/completions"</span></span>)</span>
<span class="hljs-meta">@circuit_breaker() </span><span class="hljs-comment"># æŒ‚è½½ç†”æ–­å™¨</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_completions</span>(<span class="hljs-params">request: ChatCompletionRequest</span>):
    <span class="hljs-string">"""
    ç½‘å…³æ ¸å¿ƒæ¥å£
    """</span>
    <span class="hljs-comment"># 1. æ‰“å°æ—¥å¿— (å®é™…é¡¹ç›®ä¸­åº”ä½¿ç”¨ logging æ¨¡å—)</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°è¯·æ±‚: <span class="hljs-subst">{request.model}</span> - <span class="hljs-subst">{<span class="hljs-built_in">len</span>(request.messages)}</span> msgs"</span>)
    
    <span class="hljs-comment"># 2. åˆ¤æ–­æ˜¯å¦æµå¼</span>
    <span class="hljs-keyword">if</span> request.stream:
        <span class="hljs-comment"># è¿”å›æµå¼å“åº” (SSE)</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            stream_llm_api(request), 
            media_type=<span class="hljs-string">"text/event-stream"</span>
        )
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># è¿”å›æ™®é€š JSON</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> call_llm_api(request)

<span class="hljs-comment"># å¯åŠ¨å‘½ä»¤: uvicorn main:app --reload</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">ğŸ“ æ€»ç»“ä¸å›é¡¾</h3>
<p>æ­å–œä½ ï¼ä½ å·²ç»ä»ä¸€ä¸ªå†™ <code>ETL</code> è„šæœ¬çš„å¤§æ•°æ®å·¥ç¨‹å¸ˆï¼ŒæˆåŠŸèœ•å˜ä¸ºèƒ½æ‰‹å†™ <strong>é«˜å¹¶å‘å¾®æœåŠ¡</strong> çš„ AI æ¶æ„å¸ˆã€‚</p>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸ª <strong>LLM Gateway</strong> æ¶‰åŠçš„æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ol>
<li><strong>Pydantic</strong>: ä½ çš„â€œæ•°æ®å®‰æ£€å‘˜â€ï¼Œç¡®ä¿è¿›æ¥çš„æ•°æ®éƒ½æ˜¯åˆè§„çš„ã€‚</li>
<li><strong>Asyncio</strong>: ä½ çš„â€œäº¤é€šæŒ‡æŒ¥å®˜â€ï¼Œè®©å•çº¿ç¨‹ä¹Ÿèƒ½å¤„ç†æˆåƒä¸Šä¸‡çš„å¹¶å‘è¯·æ±‚ã€‚</li>
<li><strong>Generator</strong>: ä½ çš„â€œæµæ°´çº¿â€ï¼Œå®ç°æ•°æ®çš„å®æ—¶æµè½¬ï¼Œé™ä½å†…å­˜å‹åŠ›ã€‚</li>
<li><strong>Decorator</strong>: ä½ çš„â€œä¿é•–â€ï¼Œåœ¨ä¸ä¾µå…¥ä¸šåŠ¡é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œæä¾›ç†”æ–­å’Œé‡è¯•ä¿æŠ¤ã€‚</li>
</ol>
<h4 data-id="heading-9">ğŸ§  æœ¬æ–‡æ€ç»´å¯¼å›¾</h4>
<p><img src="http://openwrite.cn/uploads/20235/58127/88463e01-4a77-46d4-9ac4-0bf1244e3d2a.png" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-10">ğŸ—£ï¸ äº’åŠ¨è¯é¢˜</h3>
<p><strong>ä½ åœ¨è½¬å‹ AI å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„æœ€å¤§â€œå‘â€æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>A. ä¹ æƒ¯äº† Java çš„å¼ºç±»å‹ï¼Œå—ä¸äº† Python çš„åŠ¨æ€ç±»å‹ï¼Ÿ</li>
<li>B. æä¸æ‡‚ <code>async/await</code>ï¼Œä»£ç ç»å¸¸å¡æ­»ï¼Ÿ</li>
<li>C. æµå¼è¾“å‡º (Streaming) æ€»æ˜¯æ–­æ–­ç»­ç»­ï¼Ÿ</li>
<li>D. ä¾èµ–ç®¡ç†å¤ªä¹±ï¼Œ<code>pip</code> å’Œ <code>conda</code> æ‰“æ¶ï¼Ÿ</li>
</ul>
<p>ğŸ‘‡ <strong>åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ä½ çš„ç­”æ¡ˆï¼Œæˆ–è€…è¾“å…¥å…³é”®è¯ã€ç½‘å…³æºç ã€‘ï¼Œè·å–æœ¬æ–‡å®Œæ•´çš„é¡¹ç›®ä»£ç åŒ…ï¼</strong></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨é¢è¿›å‘ | 2025å¹´åº¦æ€»ç»“]]></title>    <link>https://juejin.cn/post/7590929624743804978</link>    <guid>https://juejin.cn/post/7590929624743804978</guid>    <pubDate>2026-01-04T02:14:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590929624743804978" data-draft-id="7590957076630781998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨é¢è¿›å‘ | 2025å¹´åº¦æ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-04T02:14:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ£ä»"/> <meta itemprop="url" content="https://juejin.cn/user/958429872270654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨é¢è¿›å‘ | 2025å¹´åº¦æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872270654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ£ä»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:14:20.000Z" title="Sun Jan 04 2026 02:14:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>ä»Šå¤©æ˜¯2026å¹´çš„ç¬¬ä¸€å¤©ï¼Œåˆåˆ°ä¸€å¹´ä¸€åº¦çš„å¹´åº¦æ€»ç»“ç¯èŠ‚ã€‚å’Œå¾€å¹´ä¸€æ ·ï¼Œæˆ‘ä»Šå¹´ä¾ç„¶åœ¨å¤‡å¿˜å½•ä¸­è®°å½•ä¸‹æ¯å¤©çš„Todolistï¼Œå¹¶ä¸”åœ¨å®Œæˆ"å¤§äº‹ä»¶"æ—¶è®°ä¸‹å®Œæˆæƒ…å†µã€‚ä»Šå¹´æ¶‰çŒçš„æ–¹é¢ä¼šæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æˆ‘æ„¿æ„ç”¨<strong>å…¨é¢è¿›å‘</strong>è¿™ä¸ªå…³é”®å­—æ¥æ€»ç»“æˆ‘çš„2025ã€‚</p>
<p>å¯¹è¯ä¸€ä¸‹2024å¹´ï¼Œå½“æ—¶çš„å±•æœ›ï¼š</p>
<ol>
<li>ä¿æŒé”»ç‚¼ï¼Œæ¯å‘¨è‡³å°‘é”»ç‚¼2æ¬¡ï¼ˆä¸€å¹´å·®ä¸å¤š100æ¬¡ï¼‰ âœ…</li>
</ol>

<ol start="2">
<li>å­¦ä¼šä¸€é¡¹æ–°çš„ä½“è‚²æŠ€èƒ½ï¼Œèƒ½ä½œä¸ºæ—¥å¸¸çš„é”»ç‚¼é¡¹ç›®ï¼ˆæš‚å®šç¾½æ¯›çƒï¼Œäº‰å–ç»ƒåˆ°èƒ½åœ¨ä½ç«¯å±€æ‰“é‡çƒçš„æ°´å¹³ï¼‰âœ…</li>
</ol>

<ol start="3">
<li>é”»ç‚¼å¨è‰ºï¼Œä¿æŒå¥½çš„é¥®é£Ÿä¹ æƒ¯ï¼ˆåœ¨å®¶åº­èœè°±ä¸­è‡³å°‘æ”¶å½•100é“èœå“ï¼‰âŒ</li>
</ol>

<ol start="4">
<li>è‡³å°‘é˜…è¯»10æœ¬ä¹¦ï¼ˆ15/ 10ï¼‰ âœ…</li>
</ol>

<ol start="5">
<li>å·¥ä½œä¸Šé™¤äº†ç¨³å®šæ€§ä»¥å¤–ï¼Œå†æ·±è€•ä¸€ä¸ªå…¶ä»–é¢†åŸŸï¼ˆé™¤äº†ç¨³å®šæ€§ï¼Œåœ¨å…¶ä»–æ–¹å‘ä¸Šæœ‰æœ‰äº›æ”¶è´§ï¼‰ âœ…</li>
</ol>

<ol start="6">
<li>æ¢ç´¢æ–°çš„å¸®åŠ©è‡ªå·±æˆé•¿çš„æ–¹å¼ï¼ˆæ¯”å¦‚å¬æ’­å®¢ï¼Ÿé”»ç‚¼æ—¶å¬åšå®¢ä¸€ä¸¾ä¸¤å¾—ï¼Ÿï¼‰âœ…</li>
</ol>
<p>é™¤äº†è‡ªå·±å¤šåšé¥­ä»¥å¤–ï¼Œå…¶ä»–å·®ä¸å¤šéƒ½å®Œæˆäº†ï¼Œä¸»è¦åŸå› æ˜¯å‘¨æœ«åŸºæœ¬ä¸Šéƒ½æ²¡åœ¨å®¶ï¼Œåšé¥­ä¸å¤ªç†Ÿç»ƒï¼Œåšèµ·æ¥æ¯”è¾ƒèŠ±æ—¶é—´ã€‚</p>
<h3 data-id="heading-1">å·¥ä½œ</h3>
<p>å·¥ä½œæ–¹é¢ï¼Œä»»ç„¶ä¿æŒç°çŠ¶ï¼Œä½†å’Œå»å¹´ç›¸æ¯”ï¼Œä»Šå¹´æ˜æ˜¾æ²¡æœ‰å»å¹´é‚£ä¹ˆç„¦è™‘äº†ï¼Œå·¥ä½œå†…å®¹ã€åŒäº‹ã€åˆä½œæ–¹éƒ½è¾¾æˆäº†ä¸€å®šç¨‹åº¦çš„é»˜å¥‘ï¼Œåšäº‹æ•ˆç‡æå‡äº†ã€‚å½“ç„¶é‚£æˆ‘ä¹Ÿæœ‰åœ¨åˆ»æ„çš„è°ƒæ•´è‡ªå·±ï¼Œå·¥ä½œå·²ç»å ç”¨äº†æˆ‘ä»¬å¤ªå¤šæ—¶é—´äº†ï¼Œå¿ƒçµä¸Šè‡³å°‘å¯ä»¥æ‰¾æœºä¼šé‡Šæ”¾ä¸€ä¸‹ã€‚</p>
<p>ä¸ŠåŠå¹´çš„æ—¶é—´ï¼Œä¸»è¦åœ¨åšä¸€äº›AIæ¢ç´¢ç›¸å…³çš„å†…å®¹ï¼Œè™½ç„¶åæ¥è¿›å±•ç¼“æ…¢ï¼Œä½†è¿˜æ˜¯ç§¯ç´¯äº†ä¸€äº›ç»éªŒï¼Œå¯¹AIçš„ç°çŠ¶æœ‰äº†ä¸€äº›åŸºæœ¬çš„è®¤çŸ¥å’Œç§¯ç´¯ã€‚</p>
<p>ä¸‹åŠå¹´ä¸»è¦åœ¨æ”¯æŒé‡ç‚¹çš„é¡¹ç›®ï¼Œä»¥åŠå›¢é˜Ÿåœ¨å¹´åº•çš„æ—¶å€™æœ‰ä¸€æ³¢è°ƒæ•´ï¼Œç›®å‰æ­£åœ¨é€æ­¥é€‚åº”å’Œæ¥å—å˜åŒ–ä¸­ã€‚</p>
<h3 data-id="heading-2">é”»ç‚¼</h3>
<p>ä»Šå¹´æ€»å…±é”»ç‚¼äº†<strong>158</strong>æ¬¡</p>
<ol>
<li>è·‘æ­¥ ğŸƒğŸ»â€â™€ï¸ï¼ˆ48æ¬¡ï¼‰</li>
<li>æ¸¸æ³³ ğŸŠğŸ»ï¼ˆ42æ¬¡ï¼‰</li>
<li>ç¾½æ¯›çƒğŸ¸ï¼ˆ36æ¬¡ï¼‰</li>
<li>å¥èº« ğŸ’ªğŸ»ï¼ˆ13æ¬¡ï¼‰</li>
<li>ç¯®çƒ ğŸ€ï¼ˆ3æ¬¡ï¼‰</li>
<li>å…¶ä»–ï¼ˆçˆ¬å±±ã€é£ç›˜ã€ä¹’ä¹“çƒğŸ“æ€»è®¡12æ¬¡ï¼‰</li>
</ol>
<p>æ€»çš„æ¥è®²ï¼Œä»Šå¹´çš„é”»ç‚¼é¢‘æ¬¡æ˜¯å¥åº·ä¸”åˆç†çš„ã€‚åœ¨10æœˆä»½çš„æ—¶å€™å®Œæˆäº†é¦–æ¬¡åŠé©¬ï¼Œæˆç»©ï¼ˆ1:57:22ï¼‰ã€‚å¹¶ä¸”æŒ‰ç…§å¹´åˆçš„è§„åˆ’ï¼Œç¾½æ¯›çƒè¾¾åˆ°äº†èƒ½åœ¨é‡çƒåœºæ‰“çƒçš„æ°´å¹³ï¼ˆå¤§æ¦‚L2 ~ L3ï¼Ÿï¼‰ã€‚æ¸¸æ³³åœ¨ç»è¿‡æ•™ç»ƒçš„åŠ¨ä½œæŒ‡æ­£ä¹‹åäºŒæ¬¡è…¿å››æ¬¡è…¿ä¹Ÿå­¦ä¼šäº†ï¼Œæ˜å¹´äº‰å–æ¸¸çš„æ›´ä¹…æ›´è¿œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95855b28f0344692bc7dd13b3e98ef13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=Au2h2%2BA%2FGRrTSd03TxQdqi29Qbk%3D" alt="cf531a27c12ac1467dbd74e25ae8add4.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">é˜…è¯»</h3>
<p>é˜…è¯»å¯¹æˆ‘æ¥è¯´ä¸æ˜¯ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œæˆ‘å¤§å°å°±ä¸æ˜¯ä¸€ä¸ªçˆ±è¯»ä¹¦çš„äººï¼Œä½†æ˜¯ä»Šå¹´ä¸‹æ¥ä¹Ÿè¯»äº†15æœ¬ä¹¦</p>
<ul>
<li>ã€Šå½“ä¸‹çš„åŠ›é‡ã€‹</li>
<li>ã€Šéæš´åŠ›æ²Ÿé€šã€‹</li>
<li>ã€Šä½ æœ‰ä½ çš„è®¡åˆ’ï¼Œä¸–ç•Œå¦æœ‰è®¡åˆ’ã€‹</li>
<li>ã€Šå»é‡è§ã€‹</li>
<li>ã€Šå¥½å¥½è¯´è¯ã€‹</li>
<li>ã€Šæˆ‘ä¸æ˜¯æ•™ä½ è¯ˆã€‹</li>
<li>ã€Šè¶…è¶Šç™¾å²ã€‹</li>
<li>ã€Šæ— ä¼¤è·‘æ³•ã€‹</li>
<li>ã€Šæˆ‘çœ‹è§çš„ä¸–ç•Œã€‹</li>
<li>ã€Šæ›¾å›½è—©ä¼ ã€‹</li>
<li>ã€Šæˆ‘åœ¨è¥¿å—è”å¤§çš„æ—¥å­ã€‹</li>
<li>ã€Šæ·±åº¦å·¥ä½œã€‹</li>
<li>ã€Šè´¢å¯Œæ–¹ç¨‹å¼ã€‹</li>
<li>ã€Šä¹ æƒ¯çš„åŠ›é‡ã€‹</li>
<li>ã€Šç†è§£äººæ€§ã€‹</li>
</ul>
<p>å…¶ä¸­ã€Šå½“ä¸‹çš„åŠ›é‡ã€‹å¯¹æˆ‘å½“ä¸‹çš„ç”Ÿæ´»ç¡®å®æœ‰äº†å®è´¨æ€§çš„æ”¹å˜ï¼Œæ²»å¥½äº†åŠå¤œé†’æ¥ä¼šèƒ¡æ€ä¹±æƒ³çš„æ¯›ç—…ï¼Œæ•™ä¼šäº†æˆ‘å¦‚ä½•å¾ˆå¥½çš„å…³æ³¨å½“ä¸‹ã€‚ã€Šè¶…è¶Šç™¾å²ã€‹è¿™æœ¬ä¹¦å¯¹æˆ‘çš„å¸®åŠ©ä¹Ÿå¾ˆå¤§ï¼Œæˆ‘è¯»å®Œè¿™æœ¬ä¹¦ä¹‹åï¼Œè®©æˆ‘ç¬¬ä¸€æ¬¡è®¤åŒç¡çœ è¿™ä»¶äº‹æƒ…æ˜¯çœŸçš„é‡è¦çš„ã€‚è¿™ä¸¤æœ¬ä¹¦æ˜¯ä»Šå¹´è¯»å®Œä¹‹åæ”¶è´§æœ€å¤§çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f59e7393ddec479986787726275b1a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=ockhqn9fQj3eStutkANGN0TgMyU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4"><strong>å­¦ä¹  &amp; å†™ä½œ</strong></h3>
<h4 data-id="heading-5">å†™ä½œ</h4>
<p>ä»Šå¹´åœ¨åšå®¢ä¸Šå†™ä½œçš„å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸€éƒ¨åˆ†åŸå› æ˜¯å·¥ä½œä¸Šçš„å¤§éƒ¨åˆ†å†…å®¹éƒ½ä¸æ–¹ä¾¿åˆ†äº«ï¼Œå¦å¤–ä¸€æ–¹é¢ç¡®å®ä¹Ÿæ²¡æœ‰åœ¨ä»”ç»†ä¸“ç ”çš„æŠ€æœ¯å†…å®¹ï¼ˆå¥½å§ï¼Œæ‡ˆæ€ äº†ï¼‰ã€‚ä½†æ˜¯å·¥ä½œä¸Šéœ€è¦å†™çš„æ–‡æ¡£å˜å¤šäº†ï¼Œè¿™æ˜¯å·¥ä½œéœ€è¦ã€‚</p>
<h4 data-id="heading-6">å­¦ä¹ </h4>
<p>ä»Šå¹´é™¤äº†çœ‹ä¹¦ä»¥å¤–ï¼Œå­¦ä¹ äº†çš„æœ‰ä»¥ä¸‹å†…å®¹ï¼ˆç»¼åˆï¼‰ï¼š</p>
<ol>
<li>ã€Šæ¨å¤©çœŸçš„32ä¸ªé«˜æƒ…å•†å…¬å¼ã€‹</li>
<li>ã€Šè´¾æ°çš„AIç¼–ç¨‹ç§˜ç±ã€‹</li>
<li>ã€Šæå®‡è½©ç¾½æ¯›çƒã€‹</li>
<li>ã€Šå†´ç¾½çš„çŸ¥è¯†æ˜Ÿçƒã€‹ï¼ˆè¿™ä¸ªå†…å®¹æœ‰ç‚¹æ‚ï¼Œä½†æ˜¯ç¡®å®æ˜¯è®¤çœŸçœ‹äº†ä¸å°‘ï¼‰</li>
</ol>
<div>
  <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ab1e3092ce543e5b1e20efaca9c818d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=5BmtGg8vAobcDiVFVyf14w5xQ6M%3D" alt="å›¾ç‰‡1æè¿°è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
  <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47d374d1b33648088b3281d2bc1205e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=Q9VkTFHmaHNHAKyIcbRrNoTqUMY%3D" alt="å›¾ç‰‡2æè¿°è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/>
</div>
<h3 data-id="heading-7">ç”Ÿæ´»</h3>
<h4 data-id="heading-8">æ—…æ¸¸</h4>
<p>ä»Šå¹´ç´¯è®¡å»äº†8ä¸ªåŸå¸‚æ—…æ¸¸ï¼Œæ˜ åƒæœ€æ·±çš„æ˜¯åœ¨ç¦é¼æ™•èˆ¹åˆ°æƒ³æ­»ï¼Œå®œå…´çš„æ³¡æ³¡ç®€ç›´ä¸€ç»ï¼Œé»„å±±çš„äº‘é›¾ç¾å¾—åŠ¨äººï¼Œå²±å±±å²›å®é™çš„å¤œæ™šï¼Œæˆ‘ç‹¬è‡ªä¸€äººéª‘è½¦åœ¨é•¿å‰‘å¤§é“æ„Ÿå—è¿™ä¸ªåŸå¸‚...</p>
<ul>
<li>ç¦é¼</li>
<li>ä¸´æµ·</li>
<li>å¤©å°</li>
<li>ä¸Šæµ·</li>
<li>å®œå…´</li>
<li>é‡‘å</li>
<li>é»„å±±</li>
<li>å²±å±±å²›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e25ff925bd0140539c143694e92328ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=ithj74iisjdPJvtckpP%2B7JQxzpE%3D" alt="bb432278d59b1c5cf4e89416f4b2d9c7.jpg" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aeec2827baa4dce969aa7142efb3245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=%2BdPObRb4bettFqCJqTz6RRlmJT4%3D" alt="f608b1e19088bb566c382c56ca7e2d4c.jpg" loading="lazy"/></p>
<h4 data-id="heading-9">æ¼”å”±ä¼š</h4>
<p>ä»Šå¹´å»å¬äº†å­™ç‡•å§¿ã€å¼ æ°ã€æ–°è£¤å­çš„æ¼”å”±ä¼šï¼Œè¿˜å»äº†å¸¸å·çš„å¤ªæ¹–æ¹¾éŸ³ä¹èŠ‚ã€‚å¯¹æ–°è£¤å­è·¯è½¬ç²‰ï¼ŒæŠŠä¹é˜Ÿçš„å¤å¤©ç¬¬ä¸€å­£éƒ½çœ‹äº†ä¸€éã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26eeca4b9cb14e67887f9a7f18c7ec8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=SV%2Bk6t5v8UrgKnd8c59oLoQeUIk%3D" alt="9569b1e814c0f2bd79cd893f84cde99a.jpg" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7068b7fbd6e2489a9ac2f998e054da5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6j5LuB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768097660&amp;x-signature=uNtO54xMCTmY8i%2B6teOGGzbIvZQ%3D" alt="ea3fa3d3f84828b317b639b7360843b9.jpg" loading="lazy"/></p>
<h4 data-id="heading-10">ç»¼è‰ºå¨±ä¹</h4>
<p>ä»Šå¹´çœ‹äº†å¥½äº›å–œå‰§ç»¼è‰ºï¼Œéƒ½æ˜¯æˆ‘å–œæ¬¢çš„ã€‚åœ¨å‘¨æœ«çš„æ™šä¸Šåƒç€æ™šé¥­ï¼Œçœ‹ç€ç»¼è‰ºï¼Œç¬‘åˆ°åœä¸ä¸‹æ¥ï¼ŒçœŸçš„éƒ½å¼ºçƒˆæ¨èï¼ï¼ï¼</p>
<ul>
<li>ã€ŠèŠ±å„¿ä¸å°‘å¹´ Â· ä¸è·¯å­£ã€‹ â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li>
<li>ã€Šä¹é˜Ÿçš„å¤å¤©ç¬¬ä¸€å­£ã€‹ â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li>
<li>ã€Šå–œå‰§ä¹‹ç‹å•å£å­£ã€‹ â­ï¸â­ï¸â­ï¸â­ï¸</li>
<li>ã€Šå–œäººå¥‡å¦™å¤œ2ã€‹ â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li>
<li>ã€Šç°åœ¨å°±å‡ºå‘2ã€‹ â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</li>
</ul>
<h4 data-id="heading-11">å…³äºå©šç¤¼</h4>
<p>åœ¨å›½åº†çš„æ—¶å€™ï¼ŒåŠäº†äººç”Ÿä¸­æœ€é‡è¦çš„ä¸€ä»¶äº‹æƒ…ï¼Œè¿˜ç®—æ¯”è¾ƒé¡ºåˆ©</p>
<h4 data-id="heading-12">å…³äºğŸš—å’Œè‡ªé©¾</h4>
<p>10æœˆä»½çš„æ—¶å€™ï¼Œä¹°äº†è¾†è½¦å­ï¼Œè™½ç„¶ç”Ÿæ´»æˆæœ¬æœ‰æ‰€æå‡ï¼Œä½†æ˜¯ç”Ÿæ´»å“è´¨ç¡®å®ä¸ä¸€æ ·ï¼ˆå°±å½“æ˜¯ä¸€é¡¹å¤§å®—æ¶ˆè´¹äº†ï¼‰ã€‚ç°åœ¨å‘¨æœ«éƒ½ä¼šè€ƒè™‘çŸ­é€”æ—…è¡Œï¼Œ200 ~300kmèƒ½å¼€åˆ°çš„ï¼Œéƒ½èƒ½å»ï¼Œç›®å‰å·²ç»è‡ªé©¾å»äº†é»„å±±ã€å®æ³¢ã€èˆŸå±±ï¼Œæ˜å¹´è®¡åˆ’å»æ›´å¤šçš„åœ°æ–¹ç©è€ã€‚</p>
<h4 data-id="heading-13">å…³äºä¸¤ç§’é’Ÿè®¡åˆ’</h4>
<p>çµæ„Ÿæ¥è‡ªåŒäº‹åœ¨é£ä¹¦ä¸Šçš„åˆ†äº«ï¼Œå¥¹ä¼šç”¨2ç§’é’Ÿè®°å½•æ¯å¤©çš„ç”Ÿæ´»ï¼Œç„¶åæ¯ä¸ªæœˆå‘ä¸€ä¸ªè§†é¢‘ï¼Œæ¥æå‡è‡ªå·±å¯¹ç”Ÿæ´»çš„ä½“éªŒã€‚æ‰€ä»¥ï¼Œä»Šå¹´3/4æœˆä»½çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿè®°å½•ä¸‹äº†æˆ‘çš„æ¯ä¸€å¤©ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.douyin.com%2Fuser%2Fself%3Fmodal_id%3D7487914507407215887" target="_blank" title="https://www.douyin.com/user/self?modal_id=7487914507407215887" ref="nofollow noopener noreferrer">20253æœˆä»½å…¨è®°å½•</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.douyin.com%2Fuser%2Fself%3Fmodal_id%3D7499460451224489231" target="_blank" title="https://www.douyin.com/user/self?modal_id=7499460451224489231" ref="nofollow noopener noreferrer">20254æœˆä»½å…¨è®°å½•</a></p>
<h4 data-id="heading-14">å…³äºå†¥æƒ³</h4>
<p>æœ€è¿‘åŠ å…¥äº†ä¸€äº›å‰è¾ˆçš„æ˜Ÿçƒï¼Œå‘ç°å†¥æƒ³è¿™ä¸ªè¯é¢˜ä¹Ÿåœ¨é‡ç‚¹è®¨è®ºèŒƒå›´å†…ï¼Œè™½ç„¶è¿™ä¸æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªæ¦‚å¿µï¼ˆç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªæ¦‚å¿µæ˜¯åœ¨è®¤çŸ¥è§‰é†’è¿™æœ¬ä¹¦ä¸­ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨ä¹ æƒ¯çš„åŠ›é‡ï¼‰ï¼Œä½†è¿™æ¬¡æ˜¯æˆ‘ä¸‹å®šå†³å¿ƒæƒ³è¦æŠŠå†¥æƒ³è®¤çœŸçš„å½“ä½œä¸€é¡¹æŠ€èƒ½æ¥åŸ¹å…»ï¼Œå¸Œæœ›é€šè¿‡å†¥æƒ³èƒ½å¤Ÿç®¡ç†å¥½è‡ªå·±çš„ç²¾åŠ›ï¼Œæå‡è‡ªå·±çš„ä¸“æ³¨åŠ›ï¼Œæ›´å¥½çš„ç®¡ç†è‡ªå·±çš„æƒ…ç»ªå’Œç¡çœ </p>
<h3 data-id="heading-15">ç†è´¢</h3>
<p>çœ‹äº†å­Ÿå²©å†™çš„ã€ŠæŠ•èµ„ç¬¬ä¸€è¯¾ã€‹ï¼Œå¼€å§‹å­¦ä¹ ç†è´¢çŸ¥è¯†ï¼Œæ¯”è¾ƒè®¤åŒä»–çš„æŠ•èµ„è§‚å¿µã€‚æ‹¿é›¶èŠ±é’±è¿›è¡Œç†è´¢æŠ•èµ„ï¼ŒæŠ•èµ„çš„çºªå¾‹æ€§å’Œäººæ€§ï¼Œç®¡ç†å¥½è‡ªå·±çš„é¢„æœŸã€‚</p>
<p>ç°åœ¨çš„ä¼šæ¯å‘¨å®šæŠ•3åªåŸºé‡‘ï¼Œæ¯åª200ï¼Œè¿™æ ·ä¸‹æ¥ä¸€å¹´å°±æ˜¯3wå¤šï¼Œèƒ½åšæŒ5 ~ 6å¹´çš„è¯ï¼Œæˆ‘ä¼°è®¡æ˜¯ä¸€ç¬”ä¸å°çš„é’±ã€‚</p>
<p>æˆ‘å½“ä¸‹çš„æŠ•èµ„é€»è¾‘ï¼š</p>
<ol>
<li><strong>çºªå¾‹ï¼Œçºªå¾‹ï¼Œè¿˜æ˜¯çºªå¾‹</strong>ï¼ˆä¸è‡ªä½œèªæ˜çæ“ä½œï¼‰</li>
<li>ç¡®å®šå®šæŠ•ç›®çš„ï¼š30å¹´ä¹‹åï¼Œè‡ªå·±çš„é€€ä¼‘é’±</li>
<li>æŒ‰ç…§æ¯ä¸ªæœˆ<strong>é—²é’±</strong>çš„5% ~ 10%ï¼ˆæˆ–è€…è¯´è‡ªå·±çš„é›¶èŠ±é’±ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œå¸‚åœºçš„æ³¢åŠ¨æ‰ä¸ä¼šå½±å“ä½ çš„æƒ…ç»ªå’Œåˆ¤æ–­ï¼Œè¡Œä¸ºäº§ç”Ÿè¯¯å¯¼ï¼‰</li>
</ol>
<h3 data-id="heading-16">æ„å¤–æ”¶è·</h3>
<p>ä»Šå¹´æœ‰ä¸‰ä¸ªæ„å¤–ä¹‹å–œï¼š</p>
<ol>
<li>å–œæ¬¢ä¸Šäº†ç¾½æ¯›çƒè¿™é¡¹è¿åŠ¨ï¼Œä½œä¸ºæˆ‘çš„ä¸»è¦è¿åŠ¨ä¹‹ä¸€ï¼Œå†¬å¤©èƒ½åœ¨çƒé¦†æ‰“çƒï¼Œèº«ä½“æ¥è§¦å°‘ï¼Œé€‚åˆç°é˜¶æ®µçš„æˆ‘</li>
<li>ç½—æŒ¯å®‡è€å¸ˆçš„æ–‡æ˜ä¹‹æ—…èŠ‚ç›®ã€‚æœ¬èº«æˆ‘å°±å¯¹å†å²æ–‡åŒ–æœ‰ä¸€äº›å…´è¶£ï¼Œç½—è€å¸ˆçš„è¿™æ¡£èŠ‚ç›®è§†è§’ç‹¬åˆ°ã€å†…å®¹ä¸°å¯Œï¼ŒæŒ‰ä»–çš„è¯´æ³•ï¼Œè¿™æ¡£èŠ‚ç›®è¦åš20å¹´ï¼Œä»1000å¹´ä¸€ç›´è®²åˆ°1919å¹´</li>
<li>æ’­å®¢ - çŸ¥è¡Œå°é…’é¦†ã€‚â€œæˆ‘ä»¬å…³æ³¨æŠ•èµ„ï¼Œæ›´å…³æ³¨å¦‚ä½•æ›´å¥½çš„ç”Ÿæ´»â€ï¼Œå¥½å‡ æ¡£èŠ‚ç›®å¬å®Œéƒ½é†é†çŒé¡¶ï¼Œå­Ÿå²©çš„æŠ•èµ„ç¬¬ä¸€è¯¾ä¹Ÿä½œä¸ºæˆ‘æŠ•èµ„å…¥é—¨è¯¾ç¨‹ï¼Œæ­£å¼å¼€å¯å­¦ä¹ æŠ•èµ„ã€‚</li>
</ol>
<h3 data-id="heading-17">å±•æœ›</h3>
<ol>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œèƒ½å¤Ÿå…»æˆè®°å½•æ—¶é—´çš„ä¹ æƒ¯</p>
<ul>
<li>æ¯å‘¨è‡³å°‘æœ‰2å¤©èƒ½å¤Ÿè¯¦ç»†çš„è®°å½•å½“å¤©çš„æ—¶é—´ï¼Œä»¥30minä¸ºåšå°ç²’åº¦ï¼‰</li>
</ul>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œèƒ½å¤Ÿå…»æˆè®°å½•æ„Ÿå—çš„ä¹ æƒ¯</p>
<ul>
<li>æ¯å‘¨è‡³å°‘æœ‰2å¤©èƒ½å¤Ÿè®°å½•ä¸‹å½“å¤©çš„æ„Ÿå—ï¼ˆå¼€å¿ƒçš„ã€ç³Ÿå¿ƒçš„ã€çµæ„Ÿï¼‰</li>
</ul>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œé¼»ç‚èƒ½å¤Ÿæœ‰æ‰€æ”¹å–„ï¼ˆå…ˆå°è¯•è„±æ•æ²»ç–—ï¼‰</p>
<ul>
<li>å…ˆå°è¯•è„±æ•æ²»ç–—</li>
</ul>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œå‘éŸ³å’Œè¡¨è¾¾èƒ½åŠ›èƒ½å¤Ÿæœ‰æ‰€ç²¾è¿›</p>
<ul>
<li>å­¦ä¼šèƒ¸è…¹å¼å‘¼å¸æ³•</li>
<li>è¡¨è¾¾èƒ½åŠ›åœ¨æ²Ÿé€šä¸­ä½œä¸ºåŠ åˆ†é¡¹ï¼Œå¾—åˆ°æ­£åé¦ˆ</li>
</ul>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œåœ¨å·¥ä½œä¸Šç»§ç»­ä¿æŒç¨³å®šï¼Œä¿æŒå¯¹æ–°äº‹ç‰©çš„çƒ­æƒ…å’Œå¥½å¥‡å¿ƒ</p>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œä»»ç„¶åšæŒé”»ç‚¼ï¼Œç»´æŒä½“é‡65kgï¼Œç»§ç»­å®Œæˆ1 ~ 2åœºåŠé©¬ï¼Œç¾½æ¯›çƒæ°´å¹³è¾¾åˆ°ä¸šåŠ¡4çº§ï¼Œè‡ªç”±æ³³èƒ½å¤Ÿåœ¨45minå†…æ¸¸åˆ°2km</p>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œèƒ½å¤Ÿç»§ç»­ä¿æŒè¯»ä¹¦çš„ä¹ æƒ¯ï¼Œä¸€å¹´è‡³å°‘èƒ½å¤Ÿé˜…è¯»10æœ¬ä¹¦</p>
</li>
<li>
<p>å¸Œæœ›æ–°çš„ä¸€å¹´ï¼Œå¦‚æœå¹¸è¿çš„è¯ï¼Œèƒ½æ‰¾åˆ°æ–°çš„çƒ­çˆ±çš„ä¸œè¥¿ï¼ˆå°±åƒä»Šå¹´çš„ç¾½æ¯›çƒã€æ–‡æ˜ä¹‹æ—…ã€çŸ¥è¡Œå°é…’é¦†ï¼‰</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AOP ä¸“é¢˜]]></title>    <link>https://juejin.cn/post/7590929624743837746</link>    <guid>https://juejin.cn/post/7590929624743837746</guid>    <pubDate>2026-01-04T02:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590929624743837746" data-draft-id="7587368168621948934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AOP ä¸“é¢˜"/> <meta itemprop="keywords" content="Spring,Spring Boot,Java"/> <meta itemprop="datePublished" content="2026-01-04T02:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ªé‡Œçš„ç ´æ°´ç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AOP ä¸“é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ªé‡Œçš„ç ´æ°´ç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:16:27.000Z" title="Sun Jan 04 2026 02:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">AOP ä½¿ç”¨</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>AOP å®ç°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecordTimeAspect</span> {

    <span class="hljs-comment">// æˆ‘è¦ä»£ç†çš„è·¯å¾„ç±»ä¸­çš„æ–¹æ³•</span>
    <span class="hljs-meta">@Around("execution(* com.example.controller.*.*(..))")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">recordTime</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable {
        System.out.println(<span class="hljs-string">"è®°å½•æ—¶é—´"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-comment">// ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">proceed</span> <span class="hljs-operator">=</span> pjp.proceed();

        <span class="hljs-comment">// è·å–æ–¹æ³•ç­¾å</span>
        pjp.getSignature();

        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼š"</span> + (end - start));
        <span class="hljs-keyword">return</span> proceed;
    }

}

</code></pre>
<h2 data-id="heading-1">AOP çš„åŸç†</h2>
<ul>
<li>è¿æ¥ç‚¹ï¼šè¡¨ç¤ºJoinPoint è¢«AOPæ§åˆ¶çš„æ–¹æ³•ï¼ŒåŒ…å«æ–¹æ³•ä¿¡æ¯</li>
<li>é€šçŸ¥ï¼šAdvice è¡¨ç¤ºè¦å‡çº§çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯AOPä¸­å‡çº§çš„æ–¹æ³•</li>
<li>åˆ‡å…¥ç‚¹ï¼šPointCut è¡¨ç¤ºè¦åŒ¹é…å“ªäº›æ¡ä»¶</li>
<li>åˆ‡é¢ï¼šAspectï¼Œé€šçŸ¥+åˆ‡å…¥ç‚¹</li>
<li>ç›®æ ‡å¯¹è±¡ï¼šTarget é€šçŸ¥æ‰€åº”ç”¨çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸå§‹ç±»</li>
</ul>
<p>ç”¨Service æ‰“å°å‘½åï¼Œå¯ä»¥çœ‹å‡ºæ˜¯ä»£ç†å¯¹è±¡è¿˜æ˜¯åŸç±»ã€‚</p>
<pre><code class="hljs language-java" lang="java">helloService.getClass().getName() <span class="hljs-comment">// ä¸‹é¢è¾“å‡ºè¡¨ç¤ºæ˜¯ä»£ç†çš„ã€‚</span>
<span class="hljs-comment">// com.example.service.HelloService$$EnhancerBySpringCGLIB$$2a189639</span>
</code></pre>
<h2 data-id="heading-2">é€šçŸ¥</h2>
<p>æ ¹æ®é€šçŸ¥æ–¹æ³•æ‰§è¡Œæ—¶æœºçš„ä¸åŒï¼Œå°†é€šçŸ¥ç±»å‹åˆ†ä¸ºä»¥ä¸‹å¸¸è§çš„äº”ç±»ï¼š</p>
<ul>
<li>@Aroundï¼šç¯ç»•é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰ã€åéƒ½è¢«æ‰§è¡Œ</li>
<li>@Beforeï¼šå‰ç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰è¢«æ‰§è¡Œ</li>
<li>@After ï¼šåç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</li>
<li>@AfterReturningï¼š è¿”å›åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæœ‰å¼‚å¸¸ä¸ä¼šæ‰§è¡Œ</li>
<li>@AfterThrowing ï¼š å¼‚å¸¸åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸åæ‰§è¡Œ</li>
</ul>
<blockquote>
<p>@Aroundç¯ç»•é€šçŸ¥éœ€è¦è‡ªå·±è°ƒç”¨ ProceedingJoinPoint.proceed() æ¥è®©åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œå…¶ä»–é€šçŸ¥ä¸éœ€è¦è€ƒè™‘ç›®æ ‡æ–¹æ³•æ‰§è¡Œ<br/>
@Aroundç¯ç»•é€šçŸ¥æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¿…é¡»æŒ‡å®šä¸ºObjectï¼Œæ¥æ¥æ”¶åŸå§‹æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
</blockquote>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecordTimeAspect</span> {

    <span class="hljs-comment">// å®šä¹‰åˆ‡ç‚¹</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pt</span><span class="hljs-params">()</span> {
    }

    <span class="hljs-meta">@Before("pt()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œæ–¹æ³•ï¼š"</span> + joinPoint.getSignature().getName());
    }

    <span class="hljs-meta">@Around("pt()")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">recordTime</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable {
        System.out.println(<span class="hljs-string">"è®°å½•æ—¶é—´"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-comment">// ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">proceed</span> <span class="hljs-operator">=</span> pjp.proceed();

        <span class="hljs-comment">// è·å–æ–¹æ³•ç­¾å</span>
        pjp.getSignature();

        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(<span class="hljs-string">"æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼š"</span> + (end - start));
        <span class="hljs-keyword">return</span> proceed;
    }

    <span class="hljs-meta">@After("pt()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        System.out.println(<span class="hljs-string">"ç»“æŸæ‰§è¡Œæ–¹æ³•ï¼š"</span> + joinPoint.getSignature().getName());
    }
    <span class="hljs-comment">// ret æ–¹æ³•çš„è¿”å›å€¼</span>
    <span class="hljs-meta">@AfterReturning("pt()", returning = "ret")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturning</span><span class="hljs-params">(JoinPoint joinPoint, Object ret)</span> {
        System.out.println(<span class="hljs-string">"æ–¹æ³•æ­£å¸¸è¿”å›ï¼Œè¿”å›ç»“æœä¸ºï¼š"</span> + joinPoint.getSignature().getName());
    }

    <span class="hljs-meta">@AfterThrowing("pt()", throwing = "t")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowing</span><span class="hljs-params">(JoinPoint joinPoint, Throwable t)</span> {
        System.out.println(<span class="hljs-string">"æ–¹æ³•å¼‚å¸¸è¿”å›ï¼Œå¼‚å¸¸ç»“æœä¸ºï¼š"</span> + joinPoint.getSignature().getName());
    }

}
</code></pre>
<h2 data-id="heading-3">é€šçŸ¥é¡ºåº</h2>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•è¢«å¤šä¸ªåˆ‡é¢ï¼Œåˆ‡åˆ°äº†æ˜¯éƒ½ä¼šæ‰§è¡Œçš„ã€‚</p>
<p>é»˜è®¤é¡ºåºæŒ‰ç…§ç±»åçš„å­—æ¯æ’åºã€‚</p>
<p>ç”¨ @Order(æ•°å­—) åŠ åœ¨åˆ‡é¢ç±»ä¸Šæ¥æ§åˆ¶é¡ºåº</p>
<ul>
<li>ç›®æ ‡æ–¹æ³•å‰çš„é€šçŸ¥æ–¹æ³•ï¼šæ•°å­—å°çš„å…ˆæ‰§è¡Œ</li>
<li>ç›®æ ‡æ–¹æ³•åçš„é€šçŸ¥æ–¹æ³•ï¼šæ•°å­—å°çš„åæ‰§è¡Œ</li>
</ul>
<p>å¤§æ¦‚æµç¨‹æ˜¯ï¼Œç¯ç»•-&gt;æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå¦‚æœæœ‰å¤šä¸ªåˆ‡é¢ï¼Œç¬¬äºŒä¸ªåˆ‡é¢æ‰§è¡Œï¼Œç¯ç»•-&gt;æ–¹æ³•è¿è¡Œä¹‹å‰-&gt;æ–¹æ³•è¿è¡Œç»“æŸæˆ–è€…æ–¹æ³•æŠ¥é”™ -&gt;å›åˆ°ç¯ç»•...å¦‚æ­¤æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(3)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecordTimeAspect</span> {
</code></pre>
<h2 data-id="heading-4">åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h2>
<ul>
<li>ä»‹ç»ï¼šæè¿°åˆ‡å…¥ç‚¹æ–¹æ³•çš„ä¸€ç§è¡¨è¾¾å¼ã€‚</li>
<li>ä½œç”¨ï¼šç”¨æ¥å†³å®šé¡¹ç›®ä¸­çš„å“ªäº›æ–¹æ³•éœ€è¦åŠ å…¥é€šçŸ¥</li>
</ul>
<p>å¸¸è§å½¢å¼ï¼š</p>
<ul>
<li>execution(â€¦â€¦)ï¼šæ ¹æ®æ–¹æ³•çš„ç­¾åæ¥åŒ¹é…</li>
<li>@annotation(â€¦â€¦) ï¼šæ ¹æ®æ³¨è§£åŒ¹é…</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/105fe17e053747c594ab3126f653e013~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098829&amp;x-signature=Zo%2FU9IS%2BCY%2FSe1XOMKNzsLvuBsE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb4e0af19ff9459995231d693c7b1650~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768098829&amp;x-signature=aZfw7MhmsYXyWCClJ%2F8%2Fz%2BkZUDs%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨è§£æ–¹å¼</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Before("@annotation(com.ruoyi.common.annotation.DataScope)")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doBefore</span><span class="hljs-params">(JoinPoint point)</span> {

}
</code></pre>
<blockquote>
<p>æ³¨è§£çš„ç¬¬äºŒç§æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è·å–æ³¨è§£</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@DataScope(deptAlias = "dddd")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> {

<span class="hljs-comment">// åˆ‡é¢ç±»ä¸­</span>
<span class="hljs-meta">@DataScope(deptAlias = "dddd")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> {
</code></pre>
<blockquote>
<p>JoinPoint ç±»</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Before("@annotation(dataScope)")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">(JoinPoint joinPoint, DataScope dataScope)</span> {
    <span class="hljs-comment">// è·å–æ–¹æ³•å</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
    <span class="hljs-comment">// è·å–ç›®æ ‡å¯¹è±¡</span>
    <span class="hljs-type">Object</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> joinPoint.getTarget();
    <span class="hljs-comment">// è·å–ç›®æ ‡ç±»</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">name1</span> <span class="hljs-operator">=</span> target.getClass().getName();
    <span class="hljs-comment">// è·å–ç›®æ ‡æ–¹æ³•å‚æ•°</span>
    Object[] args = joinPoint.getArgs();
    <span class="hljs-comment">// å…¨é™å‘½åï¼ŒåŒ…å+ç±»å</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> signature.getDeclaringTypeName();
}
</code></pre>
<p>åœ¨Springä¸­ç”¨JoinPointæŠ½è±¡äº†è¿æ¥ç‚¹ï¼Œç”¨å®ƒå¯ä»¥è·å¾—æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç›®æ ‡ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ã€‚</p>
<ul>
<li>å¯¹äº @Around é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨  ProceedingJoinPoint</li>
<li>å¯¹äºå…¶å®ƒå››ç§é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨ JoinPoint ï¼Œå®ƒæ˜¯ ProceedingJoinPoint çš„çˆ¶ç±»å‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ä»0åˆ°1å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ã€‘03ï½œå†™ä¸€ä¸ªå¯è§£é‡Šçš„RAGè§„åˆ™æ£€ç´¢å™¨]]></title>    <link>https://juejin.cn/post/7590592594675695626</link>    <guid>https://juejin.cn/post/7590592594675695626</guid>    <pubDate>2026-01-03T15:43:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590592594675695626" data-draft-id="7590601860300881947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ä»0åˆ°1å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ã€‘03ï½œå†™ä¸€ä¸ªå¯è§£é‡Šçš„RAGè§„åˆ™æ£€ç´¢å™¨"/> <meta itemprop="keywords" content="åç«¯,AIGC"/> <meta itemprop="datePublished" content="2026-01-03T15:43:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æƒ³é—®é—®å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/2031553218095256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ä»0åˆ°1å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ã€‘03ï½œå†™ä¸€ä¸ªå¯è§£é‡Šçš„RAGè§„åˆ™æ£€ç´¢å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553218095256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æƒ³é—®é—®å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T15:43:07.000Z" title="Sat Jan 03 2026 15:43:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä» 0 åˆ° 1 å†™ä¸€ä¸ªâ€œå¯è§£é‡Šâ€çš„ RAG æ£€ç´¢å™¨ï¼šè§„åˆ™æ£€ç´¢ V1 â†’ V2ï¼ˆå«å¯è¿è¡Œä»£ç ï¼‰</h2>
<p>ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬å­¦ä¹ åˆ°äº†åŸºæœ¬çš„RagåŸç†ï¼Œç”¨æœ¬åœ°çš„ollamaå®ç°äº†ä¸€ä¸ªéå¸¸ç®€æ˜“ç‰ˆæœ¬çš„ragæµç¨‹ã€‚</p>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬ä¸»è¦æ¥å­¦ä¹ ä¸‹å·¥ç¨‹åŒ–çš„ä¼˜åŒ–ï¼Œç”¨æ¥ç»™å¤§æ¨¡å‹æ›´åŠ å‡†ç¡®çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼š <strong>æ¨¡å‹å†å¼ºï¼Œå¦‚æœæŸäº›çŸ¥è¯†ä¸åœ¨æ¨¡å‹è®­ç»ƒçš„èŒƒå›´ä¹‹å†…ï¼Œç”šè‡³åœ¨ç½‘ç»œä¸Šæœç´¢ä¸åˆ°å¾ˆå‡†ç¡®çš„ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼ä¸šå†…éƒ¨æœ‰å¾ˆå¤šæ–‡æ¡£å’Œä¿¡æ¯æ˜¯ç½‘ç»œä¸Šæ²¡æœ‰çš„ï¼Œé‚£ä¹ˆç›´æ¥é—®å¤§æ¨¡å‹ï¼Œè¾“å…¥ä¸Šä¸‹æ–‡ä¸å¯é ï¼Œè¾“å‡ºå°±å¾ˆéš¾ç¨³å®šã€‚</strong></p>
<p>è¿™å°±æ˜¯ RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åœ¨ AI åº”ç”¨å¼€å‘é‡Œæœ€å·¥ç¨‹åŒ–çš„ä»·å€¼ï¼š <strong>æŠŠæˆ‘è¯¥ç»™æ¨¡å‹ä»€ä¹ˆä¸Šä¸‹æ–‡è¿™ä»¶äº‹ï¼Œä»ç„å­¦å˜æˆå¯æ§çš„æ£€ç´¢ç³»ç»Ÿã€‚</strong></p>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬ç”¨ä¸€ä¸ªå®Œå…¨å¯è¿è¡Œçš„å°ä¾‹å­ï¼Œä¸“æ³¨è®²æ¸…æ¥šRAGé‡Œé¢è¿™ä¸ªRï¼ˆæ£€ç´¢ï¼‰çš„éƒ¨åˆ†ï¼š å¦‚ä½•åœ¨æ²¡æœ‰å‘é‡åº“ã€æ²¡æœ‰ embedding çš„æƒ…å†µä¸‹ï¼Œå…ˆå®ç°ä¸€ä¸ª <strong>å¯è§£é‡Šã€å¯æ§ã€å¯è¿­ä»£</strong> çš„â€œè§„åˆ™æ£€ç´¢å™¨â€ï¼Œå¹¶å±•ç¤ºä» V1 åˆ° V2 çš„æ¼”è¿›æ€è·¯ã€‚è™½ç„¶æ²¡æœ‰ç”¨åˆ°å“ªäº›é«˜çº§ç»„ä»¶ï¼Œä½†æ˜¯æ‰‹å†™çš„ä»£ç ä¸€æ­¥æ­¥è¿­ä»£ï¼Œå…¶å®æˆ‘ä»¬æ›´åŠ èƒ½æ˜ç™½å·¥ç¨‹åŒ–ä¸ºä»€ä¹ˆè¦åšè¿™äº›äº‹æƒ…ï¼Œä¸ºåé¢å¼•å…¥å‘é‡åº“ï¼Œåšæ··åˆæ£€ç´¢åšäº†é“ºå«ã€‚</p>
<p>æœ¬æ–‡ä»£ç å¯¹åº” examples/rag/chapter02/ ä¸‹ä¸‰ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>ex04_rag_retrieve_rule_v1.pyï¼šè§„åˆ™æ£€ç´¢ V1ï¼ˆåŸºç¡€å¯ç”¨ï¼‰</li>
<li>ex05_retrieve_result.pyï¼šV2 çš„ç»“æœç»“æ„ï¼ˆå¯è§£é‡Šæ€§ï¼‰</li>
<li>ex05_rag_retrieve_rule_v2.pyï¼šè§„åˆ™æ£€ç´¢ V2ï¼ˆæ‰“åˆ† + å‘½ä¸­è§„åˆ™ï¼‰</li>
</ul>
<h3 data-id="heading-1">1. è§„åˆ™æ£€ç´¢ï¼šå®ƒæ˜¯ä»€ä¹ˆï¼Ÿé€‚åˆä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ</h3>
<p>åœ¨ RAG é‡Œï¼Œâ€œæ£€ç´¢â€å¹¶ä¸åªæœ‰å‘é‡æ£€ç´¢ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥å…ˆä» <strong>è§„åˆ™æ£€ç´¢</strong> èµ·æ­¥ã€‚</p>
<h4 data-id="heading-2">1.1 è§„åˆ™æ£€ç´¢ vs å‘é‡æ£€ç´¢ï¼ˆæˆ‘ä»¬ç°åœ¨æ›´éœ€è¦å“ªä¸ªï¼Ÿï¼‰</h4>
<ul>
<li>
<p><strong>è§„åˆ™æ£€ç´¢</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šå¯è§£é‡Šã€å¯æ§ã€ä¸Šçº¿å¿«ã€æ— ä¾èµ–ï¼ˆä¸éœ€è¦å‘é‡åº“ / embeddingï¼‰</li>
<li>ç¼ºç‚¹ï¼šè¦†ç›–é¢æœ‰é™ï¼Œè§„åˆ™ç»´æŠ¤æˆæœ¬ä¼šä¸Šå‡</li>
<li>é€‚åˆï¼šå†…éƒ¨çŸ¥è¯†åº“æ—©æœŸã€æ–‡æ¡£ç»“æ„æ¸…æ™°ã€å…³é”®è¯/é¡¹ç›®ä»£å·æ˜æ˜¾ã€éœ€è¦å¼ºå¯æ§çš„åœºæ™¯</li>
</ul>
</li>
<li>
<p><strong>å‘é‡æ£€ç´¢</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šè¯­ä¹‰å¬å›å¼ºï¼Œå¯¹åŒä¹‰æ”¹å†™æ›´å‹å¥½</li>
<li>ç¼ºç‚¹ï¼šè§£é‡Šæ€§å¼±ï¼›éœ€è¦ embeddingã€å‘é‡åº“ï¼›è°ƒå‚ï¼ˆchunkã€topkã€é˜ˆå€¼ï¼‰æ›´â€œå·¥ç¨‹åŒ–â€</li>
<li>é€‚åˆï¼šçŸ¥è¯†é¢å¤§ã€è¡¨è¾¾å¤šæ ·ã€éœ€è¦æ›´å¼ºå¬å›çš„åœºæ™¯</li>
</ul>
</li>
</ul>
<p><strong>ä¸€ä¸ªå¾ˆå®ç”¨çš„è·¯çº¿</strong>ï¼š å…ˆç”¨è§„åˆ™æ£€ç´¢æŠŠç³»ç»Ÿè·‘èµ·æ¥ï¼ˆä¿è¯å¯æ§ + å¯è§£é‡Šï¼‰ï¼Œå†é€æ­¥å¼•å…¥å‘é‡æ£€ç´¢è¡¥å¬å›ï¼Œæœ€ç»ˆå½¢æˆ"æ··åˆæ£€ç´¢"ã€‚RAGé‡Œé¢çš„Rå°±æ˜¯åœ¨ç”¨å„ç§æ–¹å¼æ¥æé«˜æ£€ç´¢çš„è´¨é‡ï¼Œä¸€ä¸ªæ˜¯æ‰¾åˆ°æ›´å¤šå¯èƒ½çš„ä¿¡æ¯ï¼Œç¬¬äºŒä¸ªæ˜¯åœ¨å¯èƒ½çš„ä¿¡æ¯é‡Œé¢æ‰¾åˆ°æœ€ç›¸å…³çš„ä¸€äº›ä¿¡æ¯ã€‚ä¸‹é¢çš„å¤šä¸ªè§„åˆ™æ¥æ£€ç´¢å°±æ˜¯ä¸ºäº†æ‰¾åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼Œä¿è¯ä¸ä¼šæ¼æ‰æœ‰ç”¨çš„ä¿¡æ¯ï¼Œç„¶åé‡Œé¢çš„ç»™ä¿¡æ¯æ‰“åˆ†å°±æ˜¯ä¸ºäº†æ‰¾åˆ°æœ€ç›¸å…³æœ€åŒ¹é…çš„æ–‡æ®µã€‚</p>
<h4 data-id="heading-3">1.2 è§„åˆ™æ£€ç´¢ vs æœç´¢å¼•æ“ï¼ˆæŠ€æœ¯æ€è·¯å¾ˆç›¸ä¼¼ï¼‰</h4>
<p>æˆ‘ä»¬åœ¨ä¸¾ä¸€ä¸ªä¾‹å­å’Œæˆ‘ä»¬å¹³å¸¸ç”¨åˆ°éå¸¸å¤šçš„æµè§ˆå™¨æœç´¢ä¸€æ ·ï¼Œå¦‚æœä½ ç†Ÿæ‚‰æœç´¢å¼•æ“çš„å·¥ä½œåŸç†ï¼Œä¼šå‘ç°è§„åˆ™æ£€ç´¢çš„æ€è·¯å…¶å®å¾ˆç›¸ä¼¼ï¼š</p>
<ul>
<li><strong>æŸ¥è¯¢é¢„å¤„ç†</strong>ï¼šæœç´¢å¼•æ“ä¼šåˆ†è¯ã€å»åœç”¨è¯ã€æ‹¼å†™çº é”™ï¼›æˆ‘ä»¬çš„ normalize_query ä¹Ÿæ˜¯å»å™ªå£°è¯ã€æå–å…³é”®è¯</li>
<li><strong>å…³é”®è¯åŒ¹é…</strong>ï¼šæœç´¢å¼•æ“ç”¨å€’æ’ç´¢å¼•ï¼ˆå…³é”®è¯ â†’ æ–‡æ¡£åˆ—è¡¨ï¼‰ï¼›æˆ‘ä»¬ç›´æ¥åœ¨ page_content ä¸­åŒ¹é…å…³é”®è¯</li>
<li><strong>è¯„åˆ†æ’åº</strong>ï¼šæœç´¢å¼•æ“ç”¨ TF-IDFã€BM25 ç­‰ç»¼åˆè¯„åˆ†ï¼›æˆ‘ä»¬çš„ V2 ç”¨ score æœºåˆ¶ï¼ˆå†…å®¹å‘½ä¸­+3ã€é¡¹ç›®å+2 ç­‰ï¼‰</li>
<li><strong>è¿‡æ»¤æœºåˆ¶</strong>ï¼šæœç´¢å¼•æ“æŒ‰æ—¶é—´ã€ç±»å‹ã€ç«™ç‚¹è¿‡æ»¤ï¼›æˆ‘ä»¬æŒ‰ metadataï¼ˆé¡¹ç›®ã€ç±»å‹ã€æƒé™ï¼‰è¿‡æ»¤</li>
<li><strong>å¯è§£é‡Šæ€§</strong>ï¼šæœç´¢å¼•æ“ä¼šé«˜äº®åŒ¹é…è¯ï¼›æˆ‘ä»¬çš„ V2 ç”¨ hit_rules è®°å½•å‘½ä¸­åŸå› </li>
</ul>
<p><strong>æ ¸å¿ƒåŒºåˆ«</strong>ï¼š</p>
<ul>
<li>æœç´¢å¼•æ“é¢å‘å…¨ç½‘ï¼ˆäº¿çº§æ•°æ®ï¼‰ï¼Œç›®æ ‡æ˜¯"æ‰¾åˆ°ç›¸å…³ç½‘é¡µï¼Œç”¨æˆ·è‡ªå·±é˜…è¯»"</li>
<li>RAG è§„åˆ™æ£€ç´¢é¢å‘ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“ï¼ˆåƒåˆ°ä¸‡çº§ï¼‰ï¼Œç›®æ ‡æ˜¯"æ‰¾åˆ°ç²¾ç¡®æ–‡æ¡£ï¼Œç»™ LLM åšä¸Šä¸‹æ–‡"</li>
</ul>
<p>æ‰€ä»¥ RAG æ£€ç´¢å¯¹<strong>ç²¾ç¡®æ€§</strong>è¦æ±‚æ›´é«˜ï¼ˆå®å¯å°‘å¬å›ï¼Œä¹Ÿä¸èƒ½è¯¯å¯¼ LLMï¼‰ï¼Œè€Œæœç´¢å¼•æ“æ›´æ³¨é‡<strong>å¬å›ç‡</strong>ï¼ˆå®å¯å¤šå¬å›ï¼Œè®©ç”¨æˆ·è‡ªå·±ç­›é€‰ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. è¿™ä¸‰ä¸ªæ–‡ä»¶åœ¨åšä»€ä¹ˆï¼ˆå…ˆå»ºç«‹æ•´ä½“è§†è§’ï¼‰</h3>
<p>å®ƒä»¬åˆèµ·æ¥çš„ç›®æ ‡å¾ˆç®€å•ï¼š ç»™å®šç”¨æˆ· queryï¼Œä»ä¸€ç»„ Document é‡ŒæŒ‘å‡ºæœ€ç›¸å…³çš„ top_k æ¡ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ä¸ªæœ€å° RAG æ£€ç´¢æ¨¡å—ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a21ba0507fff4558975d332476dfc1cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5oOz6Zeu6Zeu5aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768059787&amp;x-signature=qOyi9v9lVXHCwQLRlN5xI0X%2F%2FeU%3D" alt="image-20260103233046682" loading="lazy"/></p>
<p>åœ¨ä»£ç é‡Œæˆ‘ä»¬ç”¨ langchain_core.documents.Document æ¥æ‰¿è½½æ–‡æ¡£å†…å®¹ä¸å…ƒæ•°æ®ï¼ˆpage_content + metadataï¼‰ï¼Œè€Œä¸æ˜¯è‡ªå·±åœ¨é€ ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸ºäº†ä»¥åæ— ç¼æ¥å…¥ LangChain çš„åç»­é“¾è·¯ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. V1ï¼šèƒ½è·‘èµ·æ¥çš„è§„åˆ™æ£€ç´¢ï¼ˆex04_rag_retrieve_rule_v1.pyï¼‰</h3>
<p>V1 çš„å…³é”®è¯ï¼šç®€å•ã€ç›´è§‚ã€å¯è¿è¡Œã€‚ å®ƒåšäº†ä¸¤ä»¶å…³é”®äº‹ï¼š</p>
<ol start="0">
<li>æŠŠ query åš"é™å™ª"ï¼Œå˜æˆé«˜ä¿¡æ¯å¯†åº¦å…³é”®è¯ï¼ˆnormalize_queryï¼‰ æ³¨ï¼šè¿™ä¸€æ­¥å…¶å®éå¸¸é‡è¦ï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªæ­¥éª¤å»æ‰ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨çº¯è§„åˆ™å»åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚åªç”¨äº†å…³é”®è¯ï¼Œç„¶åé—®é¢˜æ˜¯â€œä»€ä¹ˆæ˜¯è“ç²¾çµåè®®â€ï¼Œè¿™ä¸ªå°±åŒ¹é…ä¸å‡ºæ¥ã€‚æˆ–è€…ç”¨æˆ·çš„é—®é¢˜æœ‰å¾ˆå¤šçš„æ²¡ç”¨ä¿¡æ¯â€œä»Šå¤©æˆ‘åƒäº†ä¸‰ä¸ªå†°æ·‡æ·‹ï¼Œä¸¤ä¸ªæ°´æœï¼Œå‘Šè¯‰æˆ‘ä»€ä¹ˆæ˜¯è“ç²¾çµåè®®ï¼Ÿâ€ è¿™ä¹Ÿå¾ˆä»¤äººå¤´ç—›ï¼Œç”¨æˆ·å¸¦äº†å¾ˆå¤šæ²¡ç”¨çš„ä¿¡æ¯ï¼Œç”šè‡³æ¯”è¦æ£€ç´¢çš„ä¸œè¥¿è¿˜å¤šï¼Œè¿™ä¸ªåœ¨çœŸå®åœºæ™¯é‡Œé¢æ˜¯ææœ‰å¯èƒ½å‘ç”Ÿçš„ã€‚æ‰€ä»¥éœ€è¦åšé™å™ªï¼Œå»æ‰æ— ç”¨çš„ä¿¡æ¯ï¼ˆå°±æ˜¯å™ªå£°ï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæ‰€ä»¥åªåšäº†ç®€å•çš„è§„åˆ™ï¼Œå»æ‰"ä»€ä¹ˆæ˜¯ï¼Ÿ"ï¼Œâ€œè¯·ä»‹ç»â€ç­‰ç®€å•çš„è¯è¯­ï¼Œä½ åªè¦æ˜ç™½è¦æœ‰ä¸ªå¤„ç†çš„è¿‡ç¨‹å°±è¡Œï¼Œå…·ä½“çœŸæ­£çš„ç”Ÿäº§åœºæ™¯æ¯”è¿™ä¸ªå¤æ‚å¤ªå¤šã€‚</li>
</ol>

<ol start="2">
<li>æŒ‰ä¸€ç»„è§„åˆ™ç­›é€‰ Documentï¼Œå¹¶è¿”å› top_kï¼ˆretrieveï¼‰</li>
</ol>
<h4 data-id="heading-6">3.1 Query é™å™ªï¼šæŠŠè‡ªç„¶è¯­è¨€å˜æˆå…³é”®è¯</h4>
<p>V1 çš„ normalize_query ç”¨éå¸¸æœ´ç´ ä½†æœ‰æ•ˆçš„æ–¹æ³•ï¼š</p>
<ul>
<li>å»æ‰â€œä»€ä¹ˆæ˜¯/è¯·ä»‹ç»/å—/ï¼Ÿâ€ç­‰å£æ°´è¯</li>
<li>æŒ‰ç©ºæ ¼å’Œæ ‡ç‚¹åˆ‡åˆ†</li>
<li>å»æ‰è¿‡çŸ­çš„ token</li>
</ul>
<p>æ ¸å¿ƒç‰‡æ®µï¼ˆä¸æºç ä¸€è‡´ï¼Œåšäº†ç¼©çŸ­ä¾¿äºé˜…è¯»ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">normalize_query</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
 Â  Â q = query.lower().strip()
 Â  Â noise_patterns = [<span class="hljs-string">r"ä»€ä¹ˆæ˜¯"</span>, <span class="hljs-string">r"è¯·ä»‹ç»"</span>, <span class="hljs-string">r"ä»‹ç»ä¸€ä¸‹"</span>, <span class="hljs-string">r"æ˜¯ä»€ä¹ˆ"</span>, <span class="hljs-string">r"å¦‚ä½•"</span>, <span class="hljs-string">r"æ€ä¹ˆ"</span>, <span class="hljs-string">r"å—"</span>, <span class="hljs-string">r"?"</span>, <span class="hljs-string">r"ï¼Ÿ"</span>]
 Â  Â <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> noise_patterns:
 Â  Â  Â  Â q = re.sub(p, <span class="hljs-string">""</span>, q)
 Â  Â tokens = re.split(<span class="hljs-string">r"\s+|ï¼Œ|,|ã€‚|ï¼›|;"</span>, q)
 Â  Â tokens = [t.strip() <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tokens <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(t.strip()) &gt;= <span class="hljs-number">2</span>]
 Â  Â <span class="hljs-keyword">return</span> tokens
</code></pre>
<p>æˆ‘ä»¬ä¼šå‘ç°ï¼šè¿™ä¸€æ­¥ä¸"æ™ºèƒ½"ï¼Œä½†å®ƒæ˜¯ <strong>å·¥ç¨‹ä¸Šæœ€åˆ’ç®—çš„ç¬¬ä¸€æ­¥</strong>ã€‚ å› ä¸ºå®ƒæŠŠåç»­è§„åˆ™å‘½ä¸­ç‡æ˜¾è‘—æé«˜ï¼ŒåŒæ—¶å¯è§£é‡Šã€å¯è°ƒã€‚</p>
<h4 data-id="heading-7">3.2 V1 çš„äº”å±‚è§„åˆ™ï¼ˆä»å¼ºåˆ°å¼±ï¼‰</h4>
<p>V1 çš„ retrieve é‡Œï¼Œè§„åˆ™æ˜¯åˆ†å±‚çš„ï¼ˆéå¸¸é‡è¦ï¼‰ï¼š</p>
<ol start="0">
<li><strong>å¼ºè§„åˆ™çŸ­è·¯</strong>ï¼šé¡¹ç›®åç›´å‘½ä¸­ï¼ˆå¦‚ aurora-42ï¼‰å°±ç›´æ¥è¿”å›ï¼ˆä¿è¯"æˆ‘é—®é¡¹ç›®å°±ä¸€å®šæ‹¿åˆ°é¡¹ç›®æ–‡æ¡£"ï¼‰</li>
<li><strong>å…³é”®è¯å‘½ä¸­</strong>ï¼šä»»ä½•å…³é”®è¯å‡ºç°åœ¨æ­£æ–‡ï¼Œå°±æ”¶é›†ä¸ºå€™é€‰</li>
<li><strong>metadata è¿‡æ»¤</strong>ï¼šä¾‹å¦‚é—®åè®®,å°±åªä¿ç•™ doc_type == protocol</li>
<li><strong>å»é‡</strong></li>
<li><strong>TopK æˆªæ–­</strong></li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“æˆä¸€æ¡"å¯æ§ç®¡é“"ï¼Œæ¯ä¸€æ­¥éƒ½èƒ½è§£é‡Šã€‚</p>
<h4 data-id="heading-8">3.3 è¿è¡Œ V1</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python examples/rag/chapter02/ex04_rag_retrieve_rule_v1.py
</code></pre>
<p>æˆ‘ä»¬ä¼šçœ‹åˆ°æ¯ä¸ª query è¿”å›çš„ Document åˆ—è¡¨ã€‚ è¿™å°±æ˜¯æœ€å°å¯ç”¨çš„è§„åˆ™æ£€ç´¢å™¨ï¼šä¸èŠ±å“¨ï¼Œä½†èƒ½æŠŠæ£€ç´¢è¿™ä»¶äº‹è½åœ°ã€‚</p>
<hr/>
<h3 data-id="heading-9">4. V2ï¼šåŠ å…¥æ‰“åˆ†ä¸å¯è§£é‡Šæ€§ï¼ˆex05_retrieve_result.py + ex05_rag_retrieve_rule_v2.pyï¼‰</h3>
<p>V1 çš„é—®é¢˜æ˜¯ï¼š å‘½ä¸­äº†å°±æ˜¯å‘½ä¸­ï¼Œä½†â€œè°æ›´ç›¸å…³â€ç¼ºå°‘æ’åºä¾æ®ï¼›ä¹Ÿå¾ˆéš¾è§£é‡Šâ€œä¸ºä»€ä¹ˆå‘½ä¸­â€ã€‚è™½ç„¶åå¤æ‰§è¡Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä½ æ²¡æ³•è§£é‡Šï¼Œå“ªä¸€æ¡åº”è¯¥æ˜¯æ”¾åˆ°æœ€å‰é¢ï¼Œæœ€å¯èƒ½æ˜¯ç”¨æˆ·æƒ³é—®çš„ã€‚é‚£ä¹ˆå’±ä»¬å°±å‡çº§åˆ°V2ç‰ˆæœ¬ã€‚</p>
<p>V2 çš„å‡çº§ç›®æ ‡å¾ˆæ˜ç¡®ï¼š</p>
<ol start="0">
<li>æ¯ä¸ªå€™é€‰æ–‡æ¡£éƒ½æœ‰ä¸€ä¸ª <strong>score</strong></li>
<li>æ¯ä¸ªå€™é€‰æ–‡æ¡£è®°å½• <strong>å‘½ä¸­è§„åˆ™ hit_rules</strong>ï¼ˆè§£é‡Šæ€§ï¼‰</li>
<li>æœ€åæŒ‰ score æ’åºï¼Œå– top_k</li>
</ol>
<h4 data-id="heading-10">4.1 ç”¨æ•°æ®ç±»æ‰¿è½½â€œå¯è§£é‡Šç»“æœâ€</h4>
<p>ex05_retrieve_result.py å®šä¹‰äº†ä¸€ä¸ªéå¸¸å¹²å‡€çš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> langchain_core.documents <span class="hljs-keyword">import</span> Document
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>
â€‹
<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RetrieveResult</span>:
 Â  Â document: Document
 Â  Â score: <span class="hljs-built_in">int</span>
 Â  Â hit_rules: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]
</code></pre>
<p>è¿™ä¸ªç»“æ„ç‰¹åˆ«å…³é”®ï¼š å®ƒæŠŠæ£€ç´¢ç»“æœä» Document æœ¬ä½“é‡Œæ‹†å¼€ï¼Œé¿å…æŠŠè¯„åˆ†ä¸è§£é‡Šå¡è¿› metadataå˜å¾—æ··ä¹±ã€‚</p>
<h4 data-id="heading-11">4.2 V2 çš„æ‰“åˆ†è§„åˆ™ï¼ˆå·¥ç¨‹ä¸Šæœ€å¸¸ç”¨çš„å¥—è·¯ï¼‰</h4>
<p>V2 åšäº†ä¸‰ç±»è§„åˆ™ï¼Œå¹¶ç»™ä¸åŒæƒé‡ï¼š</p>
<ul>
<li><strong>R1ï¼šå†…å®¹å…³é”®è¯å‘½ä¸­</strong>ï¼ˆ+3ï¼‰</li>
<li><strong>R2ï¼šé¡¹ç›®åå‘½ä¸­</strong>ï¼ˆ+2ï¼‰</li>
<li><strong>R3ï¼šåè®®ç±»è¿‡æ»¤å‘½ä¸­</strong>ï¼ˆ+2ï¼‰</li>
</ul>
<p>åŒæ—¶æŠŠæ¯æ¬¡å‘½ä¸­çš„è§„åˆ™å†™è¿› hit_rulesï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>content_hit:è“ç²¾çµåè®®</li>
<li>project_hit:aurora-42</li>
<li>protocol_match</li>
</ul>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def retrieve(query: str, top_k: <span class="hljs-attr">int</span> = <span class="hljs-number">3</span>) -&gt; List[Document]:
 Â  Â <span class="hljs-attr">keywords</span> = normalize_query(query)
 Â  Â results: List<span class="hljs-section">[RetrieveResult]</span> = <span class="hljs-section">[]</span>
â€‹
 Â  Â for doc in DOCUMENTS:
 Â  Â  Â  Â <span class="hljs-attr">score</span> = <span class="hljs-number">0</span>
 Â  Â  Â  Â <span class="hljs-attr">hit_rules</span> = []
â€‹
 Â  Â  Â  Â <span class="hljs-attr">content_lower</span> = doc.page_content.lower()
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># ---------- R1ï¼šå†…å®¹å…³é”®è¯å‘½ä¸­ ----------</span>
 Â  Â  Â  Â for kw in keywords:
 Â  Â  Â  Â  Â  Â if kw in content_lower:
 Â  Â  Â  Â  Â  Â  Â  Â score += 3
 Â  Â  Â  Â  Â  Â  Â  Â hit_rules.append(f"content_hit:{kw}")
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># ---------- R2ï¼šé¡¹ç›®åå‘½ä¸­ ----------</span>
 Â  Â  Â  Â <span class="hljs-attr">project</span> = doc.metadata.get(<span class="hljs-string">"project"</span>, <span class="hljs-string">""</span>).lower()
 Â  Â  Â  Â for kw in keywords:
 Â  Â  Â  Â  Â  Â if kw in project:
 Â  Â  Â  Â  Â  Â  Â  Â score += 2
 Â  Â  Â  Â  Â  Â  Â  Â hit_rules.append(f"project_hit:{kw}")
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># ---------- R3ï¼šåè®®ç±»æ–‡æ¡£ ----------</span>
 Â  Â  Â  Â if ("åè®®" in query or "protocol" in query.lower()) \
 Â  Â  Â  Â  Â  and doc.metadata.get("doc_type") == "protocol":
 Â  Â  Â  Â  Â  Â score += 2
 Â  Â  Â  Â  Â  Â hit_rules.append("protocol_match")
â€‹
 Â  Â  Â  Â if score &gt; 0:
 Â  Â  Â  Â  Â  Â results.append(
 Â  Â  Â  Â  Â  Â  Â  Â RetrieveResult(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">document</span>=doc,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">score</span>=score,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">hit_rules</span>=hit_rules
 Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â   )
â€‹
 Â  Â <span class="hljs-comment"># ---------- æ’åº ----------</span>
 Â  Â results.sort(<span class="hljs-attr">key</span>=lambda x: x.score, reverse=<span class="hljs-literal">True</span>)
â€‹
 Â  Â <span class="hljs-comment"># ---------- DEBUGï¼ˆå¼ºçƒˆå»ºè®®æˆ‘ä»¬ä¿ç•™ï¼‰ ----------</span>
 Â  Â for r in results:
 Â  Â  Â  Â print(f"<span class="hljs-section">[score={r.score}]</span> <span class="hljs-attr">rules</span>={r.hit_rules}<span class="hljs-string">")
 Â  Â  Â  Â print(r.document.page_content)
 Â  Â  Â  Â print("</span>----<span class="hljs-string">")
â€‹
 Â  Â return [r.document for r in results[:top_k]]
</span></code></pre>
<h4 data-id="heading-12">4.3 ä¸ºä»€ä¹ˆ V2 æ›´â€œèƒ½ä¸Šçº¿â€ï¼Ÿ</h4>
<p>å› ä¸ºå®ƒè§£å†³äº† RAG æ£€ç´¢å·¥ç¨‹åŒ–çš„ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>æ’åºå¯æ§</strong>ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡æƒé‡è°ƒèŠ‚"æ›´ç›¸å…³"çš„å®šä¹‰</li>
<li><strong>è§£é‡Šå¯è¿½è¸ª</strong>ï¼šçº¿ä¸Šå‡ºç° badcaseï¼Œå¯ä»¥å¿«é€Ÿå®šä½è§„åˆ™ä¸æƒé‡</li>
</ul>
<p>æ­¤å¤–ï¼ŒV2 è¿˜ä¿ç•™äº†éå¸¸å»ºè®®æˆ‘ä»¬ä¿ç•™çš„ DEBUG è¾“å‡ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results:
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[score=<span class="hljs-subst">{r.score}</span>] rules=<span class="hljs-subst">{r.hit_rules}</span>"</span>)
</code></pre>
<h4 data-id="heading-13">4.4 è¿è¡Œ V2</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python examples/rag/chapter02/ex05_rag_retrieve_rule_v2.py
</code></pre>
<p>æˆ‘ä»¬ä¼šçœ‹åˆ°æ¯æ¡å€™é€‰æ–‡æ¡£çš„ score ä¸ hit_rulesï¼Œä»è€Œç›´è§‚çœ‹åˆ°"ä¸ºä»€ä¹ˆå®ƒæ’åœ¨å‰é¢"ã€‚</p>
<hr/>
<h3 data-id="heading-14">5. å±•ç¤ºå»ºè®®ï¼šç”Ÿäº§åœºæ™¯ä¸€èˆ¬æ€ä¹ˆå®šä¹‰è§„åˆ™ï¼Ÿ</h3>
<p>ä¸‹é¢ç»™ä¸€å¥—æ›´è´´è¿‘ç”Ÿäº§çš„è§„åˆ™å®šä¹‰æ–¹å¼ï¼ˆä¸è®²æ¦‚å¿µï¼Œç›´æ¥ç»™æ–¹æ³•ï¼‰ã€‚æ ¸å¿ƒåŸåˆ™ï¼š<strong>ä»å¼ºåˆ°å¼±</strong>ã€<strong>å¯è§£é‡Š</strong>ã€<strong>å¯å¼€å…³</strong>ã€<strong>å¯å›æ»š</strong>ã€‚</p>
<h4 data-id="heading-15">5.1 å…ˆå®šä¹‰å¼ºè§„åˆ™ï¼ˆå¿…é¡»å‘½ä¸­ã€å…è®¸çŸ­è·¯ï¼‰</h4>
<p>å¼ºè§„åˆ™é€šå¸¸æ¥è‡ªä¸šåŠ¡é‡Œçš„â€œå”¯ä¸€æ ‡è¯†â€ï¼Œå‘½ä¸­å°±ç›´æ¥è¿”å›ï¼ˆæˆ–å¼ºåŠ åˆ†ï¼‰ï¼š</p>
<ul>
<li><strong>ID/ç¼–å·ç±»</strong>ï¼šé¡¹ç›®ä»£å·ï¼ˆaurora-42ï¼‰ã€å·¥å•å·ã€åˆåŒå·ã€è®¾å¤‡ç¼–å·ã€äº§å“å‹å·</li>
<li><strong>ä¸“æœ‰åè¯ç±»</strong>ï¼šåè®®åã€ç³»ç»Ÿåã€æ¨¡å—åã€å†…éƒ¨ç¼©å†™</li>
<li><strong>å›ºå®šé—®æ³•ç±»</strong>ï¼šä¾‹å¦‚â€œæŸæŸé¡¹ç›®å¯åŠ¨æ—¶é—´â€â€œæŸæŸåè®®å®šä¹‰æ˜¯ä»€ä¹ˆâ€</li>
</ul>
<p>è½åœ°å»ºè®®ï¼š</p>
<ul>
<li><strong>å…ˆåšæŠ½å–</strong>ï¼šç”¨æ­£åˆ™/è¯å…¸æŠŠè¿™äº›æ ‡è¯†ä» query é‡ŒæŠ½å‡ºæ¥ï¼ˆç±»ä¼¼ V1 çš„ normalize_queryï¼Œä½†æ›´â€œä¸šåŠ¡åŒ–â€ï¼‰</li>
<li><strong>åšç´¢å¼•</strong>ï¼šæŠŠæ–‡æ¡£æŒ‰ project/doc_type/version/owner ç­‰ metadata å»ºç´¢å¼•ï¼Œå¼ºè§„åˆ™å‘½ä¸­ç›´æ¥ä»ç´¢å¼•å–å€™é€‰</li>
</ul>
<h4 data-id="heading-16">5.2 å†å®šä¹‰åŠ åˆ†è§„åˆ™ï¼ˆå†³å®šæ’åºï¼‰</h4>
<p>æŠŠâ€œç›¸å…³æ€§â€æ‹†æˆå¤šæ¡å¯åŠ æƒçš„ä¿¡å·ï¼Œå¹¶è®°å½•åˆ° hit_rulesï¼ˆç±»ä¼¼ V2 çš„åšæ³•ï¼‰ï¼š</p>
<ul>
<li><strong>å†…å®¹å‘½ä¸­</strong>ï¼šå…³é”®è¯å‡ºç°åœ¨ page_contentï¼ˆå¯æŒ‰è¯é¢‘ã€ä½ç½®ã€æ ‡é¢˜åŠ æƒï¼‰</li>
<li><strong>å­—æ®µå‘½ä¸­</strong>ï¼šå…³é”®è¯å‘½ä¸­ metadataï¼ˆä¾‹å¦‚ projectã€doc_typeã€tagsï¼‰</li>
<li><strong>æ„å›¾åŒ¹é…</strong>ï¼šquery å«â€œåè®®/æµç¨‹/æŠ¥é”™/éƒ¨ç½²â€ç­‰æ„å›¾è¯ â†’ åªç»™å¯¹åº”ç±»å‹æ–‡æ¡£åŠ åˆ†</li>
</ul>
<p>è½åœ°å»ºè®®ï¼š</p>
<ul>
<li><strong>æ‰€æœ‰åŠ åˆ†éƒ½è¦å¯è¿½è¸ª</strong>ï¼šåƒ content_hit:xxxã€project_hit:xxxã€protocol_match è¿™æ ·è®°å½•å‘½ä¸­åŸå› </li>
<li><strong>æƒé‡ç”¨é…ç½®ç®¡ç†</strong>ï¼šæŠŠ +3/+2 åšæˆå¯è°ƒå‚æ•°ï¼Œä¾¿äºçº¿ä¸Šå¿«é€Ÿè°ƒä¼˜</li>
</ul>
<h4 data-id="heading-17">5.3 æœ€åå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼ˆåšå®‰å…¨ä¸è¾¹ç•Œï¼‰</h4>
<p>è¿‡æ»¤è§„åˆ™ä¸€èˆ¬ç”¨äºæŠŠâ€œä¸è¯¥ç»™æ¨¡å‹çœ‹çš„â€æˆ–â€œæ˜æ˜¾ä¸ç›¸å…³çš„â€å‰”æ‰ï¼š</p>
<ul>
<li><strong>æƒé™è¿‡æ»¤</strong>ï¼šæŒ‰éƒ¨é—¨/è§’è‰²/ç§Ÿæˆ·è¿‡æ»¤ï¼ˆæœ€å¸¸è§ï¼‰</li>
<li><strong>ç‰ˆæœ¬è¿‡æ»¤</strong>ï¼šåªä¿ç•™æœ€æ–°ç‰ˆæœ¬æˆ–æŒ‡å®šç‰ˆæœ¬ï¼ˆé¿å…æ—§æ–‡æ¡£æ±¡æŸ“ï¼‰</li>
<li><strong>ç±»å‹è¿‡æ»¤</strong>ï¼šé—®"åè®®"åªä¿ç•™ doc_type == protocol</li>
</ul>
<p>è½åœ°å»ºè®®ï¼š</p>
<ul>
<li><strong>è¿‡æ»¤ä¼˜å…ˆçº§é«˜äºåŠ åˆ†</strong>ï¼šå…ˆè¿‡æ»¤å†æ’åºï¼Œé¿å…æ— æƒé™æ–‡æ¡£è¿›å…¥å€™é€‰é›†</li>
<li><strong>æ¯æ¡è§„åˆ™å¯ç‹¬ç«‹å¼€å…³</strong>ï¼šå‡ºé—®é¢˜å¯ä»¥å¿«é€Ÿå›æ»šï¼ˆçº¿ä¸Šéå¸¸å…³é”®ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-18">6. æ€»ç»“ï¼šä»è§„åˆ™å¼€å§‹ï¼ŒæŠŠ RAG åšæˆå·¥ç¨‹</h3>
<p>è¿™ç¯‡æˆ‘ä»¬ç”¨ chapter02 çš„ä¸‰ä¸ªæ–‡ä»¶ï¼Œå®ç°äº†ä¸€ä¸ªå¯è¿è¡Œ,å¯è§£é‡Š,å¯è¿­ä»£ çš„è§„åˆ™æ£€ç´¢å™¨ï¼Œå¹¶å±•ç¤ºäº† V1 â†’ V2 çš„æ¼”è¿›ï¼š</p>
<ul>
<li>V1ï¼šè§„åˆ™ç®¡é“ + ç®€å•å¯ç”¨</li>
<li>V2ï¼šå¼•å…¥ç»“æœç»“æ„ + æ‰“åˆ†æ’åº + å‘½ä¸­è§„åˆ™è§£é‡Š</li>
</ul>
<p>åç»­æˆ‘ä»¬å¯ä»¥ç»§ç»­å¾€å‰èµ°ä¸¤æ­¥ï¼Œå°±æ˜¯æˆ‘åé¢è¦å†™çš„æ•™ç¨‹ï¼š</p>
<ol start="0">
<li>ç”¨å‘é‡æ£€ç´¢è¡¥å¬å›ï¼ˆembedding + vector storeï¼‰</li>
<li>åšæ··åˆæ£€ç´¢ï¼ˆè§„åˆ™æ£€ç´¢åšå¼ºçº¦æŸï¼Œå‘é‡æ£€ç´¢åšå¬å›è¡¥å……ï¼‰</li>
</ol>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šçœŸæ­£æŠŠ"AI åº”ç”¨å¼€å‘"ä»è°ƒç”¨æ¨¡å‹ï¼Œèµ°å‘å¯æ§çš„ç³»ç»Ÿå·¥ç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ 2025 å¹´ 12 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥]]></title>    <link>https://juejin.cn/post/7591079707698315274</link>    <guid>https://juejin.cn/post/7591079707698315274</guid>    <pubDate>2026-01-04T02:38:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591079707698315274" data-draft-id="7590735421261774889" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ 2025 å¹´ 12 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥"/> <meta itemprop="keywords" content="GitHub,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T02:38:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç‚¹ä¸€æœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986187486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ 2025 å¹´ 12 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986187486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç‚¹ä¸€æœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:38:20.000Z" title="Sun Jan 04 2026 02:38:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿æ¥åˆ° <strong>2025 å¹´ 12 æœˆ <code>GitHub</code> çƒ­é—¨å¼€æºé¡¹ç›®æ’è¡Œæ¦œ</strong>ï¼æœ¬æœˆæ¦œå•ç»§ç»­èšç„¦ <code>AI Agent</code> ç”Ÿæ€çš„æ·±åº¦æ¼”è¿›ã€ç»ˆç«¯ä¼˜å…ˆçš„å¼€æºæ›¿ä»£ã€è¯­éŸ³ç”ŸæˆæŠ€æœ¯çš„å…¨é¢çˆ†å‘ï¼Œä»¥åŠé«˜æ€§èƒ½åŸºç¡€è®¾æ–½ä¸æ ‡å‡†åŒ–åä½œè§„èŒƒçš„å´›èµ·ã€‚è¿™åä¸ªé¡¹ç›®æ¶µç›–äº†ä»ç¼–ç ä»£ç†æŒä¹…è®°å¿†åˆ°å¯è§†åŒ– <code>Agent</code> æ„å»ºå¹³å°ã€ä» <code>Rust</code> é«˜æ€§èƒ½å­˜å‚¨åˆ°é¢†å…ˆå¼€æº <code>TTS</code> æ¨¡å‹ï¼Œæ¸…æ™°å±•ç°å‡ºå½“ä¸‹ä¸‰å¤§æ ¸å¿ƒè¶‹åŠ¿ï¼š</p>
<ul>
<li><strong><code>Agent</code> ç”Ÿæ€æˆç†ŸåŒ–</strong>ï¼šæŒä¹…è®°å¿†ã€å¯è§†åŒ–æ„å»ºã€æ ‡å‡†åŒ–æŒ‡å¯¼ä¸å¿«é€Ÿå¯åŠ¨æ¨¡æ¿å…¨é¢å¼€èŠ±</li>
<li><strong>ç»ˆç«¯ä¸å¼€æºæ›¿ä»£æµªæ½®</strong>ï¼šç»ˆç«¯ä¼˜å…ˆç¼–ç ä»£ç†ã€<code>AI</code> ä»£ç†ä¸“ç”¨è§„èŒƒå¼ºåŠ¿å´›èµ·</li>
<li><strong>å¤šæ¨¡æ€ä¸åŸºç¡€è®¾æ–½å‡çº§</strong>ï¼šè¯­éŸ³ç”Ÿæˆæ¨¡å‹é›†ä½“ <code>SOTA</code>ã€é«˜æ€§èƒ½å­˜å‚¨ä¸æœ¬åœ°åŒ–æ¡†æ¶å¹¶è¿›</li>
</ul>
<p>å®ƒä»¬ä¸å†æ˜¯æ¦‚å¿µéªŒè¯ï¼Œè€Œæ˜¯çœŸæ­£èƒ½ç›´æ¥è½åœ°ä¸Šçº¿çš„ç”Ÿäº§åŠ›å·¥å…·ã€‚å¿«æ¥ä¸€èµ·çœ‹çœ‹æœ¬æœˆåå¤§çƒ­é—¨ï¼</p>
<ol>
<li>
<h3 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthedotmack%2Fclaude-mem" target="_blank" title="https://github.com/thedotmack/claude-mem" ref="nofollow noopener noreferrer"><code>Claude-Mem</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>9.4K+</code></strong></p>
<p>ğŸ§  <strong><code>Claude Code</code> çš„æŒä¹…è®°å¿†æ’ä»¶</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c24a6940c0654da6a14d995db73add5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=RBA1FzfQOFEuBFzfVS0cv7qtovU%3D" alt="claude-men" loading="lazy"/></p>
<p><strong><code>Claude-Mem</code></strong> èƒ½è‡ªåŠ¨æ•æ‰ç¼–ç ä¼šè¯ä¸­ <code>Claude</code> çš„æ‰€æœ‰æ“ä½œï¼Œä½¿ç”¨ <code>AI</code>ï¼ˆåŸºäº <code>Claude agent-sdk</code>ï¼‰å‹ç¼©ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨åç»­ä¼šè¯ä¸­æ™ºèƒ½æ³¨å…¥ç›¸å…³è®°å¿†ï¼Œå®ç°çœŸæ­£çš„è·¨ä¼šè¯çŸ¥è¯†è¿ç»­æ€§ï¼Œå½»åº•è§£å†³ <code>Claude</code> ã€Œå¤±å¿†ã€çš„ç—›ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffbd56bfca0848d1829b6012ad978152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=l8LeyCJAicgekyZUn9IAV4w4i8A%3D" alt="cm-preview" loading="lazy"/></p>
<p>å®ƒé€šè¿‡ç”Ÿå‘½å‘¨æœŸé’©å­ã€åå° <code>worker</code> æœåŠ¡ã€<code>SQLite</code> å­˜å‚¨å’Œ <code>Chroma</code> å‘é‡æ•°æ®åº“ï¼Œå®ç°è¯­ä¹‰æ‘˜è¦ç”Ÿæˆä¸é«˜æ•ˆæ£€ç´¢ï¼Œæ”¯æŒæ¸è¿›å¼ä¸Šä¸‹æ–‡æ³¨å…¥ï¼Œç¡®ä¿ <code>token</code> ä½¿ç”¨æœ€ä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>æŒä¹…è®°å¿†</strong> ï¼šä¸Šä¸‹æ–‡è‡ªåŠ¨è·¨ä¼šè¯å­˜æ´»ï¼Œæ–°ä¼šè¯æ— éœ€æ‰‹åŠ¨æ¢å¤å†å²</li>
<li><strong>æ¸è¿›å¼æŠ«éœ²</strong> ï¼šåˆ†å±‚æ³¨å…¥è®°å¿†ï¼Œæ˜¾ç¤º <code>token</code> æˆæœ¬ï¼Œé¿å… <code>overload</code></li>
<li><strong>æŠ€èƒ½æœç´¢</strong> ï¼šå†…ç½® <code>mem-search</code>ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢é¡¹ç›®å†å²</li>
<li><strong><code>Web</code> æŸ¥çœ‹å™¨ <code>UI</code></strong> ï¼šå®æ—¶ç›‘æ§è®°å¿†æµ</li>
<li><strong>éšç§æ§åˆ¶</strong> ï¼šä½¿ç”¨ <code>&lt;private&gt;</code> æ ‡ç­¾æ’é™¤æ•æ„Ÿå†…å®¹ä¸å­˜å‚¨</li>
<li><strong>è‡ªåŠ¨è¿è¡Œ</strong> ï¼šå…¨ç¨‹åå°æ™ºèƒ½å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„</li>
</ul>
<p>ğŸ’¡ <strong><code>Claude-Mem</code></strong> é€‚åˆé‡åº¦ä½¿ç”¨ <code>Claude Code</code> å¼€å‘ä¸­å¤§å‹é¡¹ç›®çš„å·¥ç¨‹å¸ˆï¼Œèƒ½æ˜¾è‘—æå‡å¼€å‘è¿ç»­æ€§ã€èŠ‚çœ <code>token</code>ï¼Œå°¤å…¶åœ¨é•¿æœŸè¿­ä»£åœºæ™¯ä¸‹ä»·å€¼å·¨å¤§ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthedotmack%2Fclaude-mem" target="_blank" title="https://github.com/thedotmack/claude-mem" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2Fhello-agents" target="_blank" title="https://github.com/datawhalechina/hello-agents" ref="nofollow noopener noreferrer"><code>Hello-Agents</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>13.2K+</code></strong></p>
<p>ğŸ“š <strong><code>Datawhale</code> ç¤¾åŒºå‡ºå“çš„ä»é›¶æ„å»º <code>AI Native Agent</code> å¼€æºæ•™ç¨‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5438c2cf83ea4b22bde5653ef566b947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=kOXtZa2%2Fpd4BktKlnMA74fKPz2k%3D" alt="hello-agents" loading="lazy"/></p>
<p><strong><code>Hello-Agents</code></strong> æ˜¯ <code>Datawhale</code> æ¨å‡ºçš„ç³»ç»Ÿæ€§æ™ºèƒ½ä½“å­¦ä¹ é¡¹ç›®ï¼Œåœ¨ 2025 <code>Agent</code> å…ƒå¹´èƒŒæ™¯ä¸‹å¡«è¡¥äº†é‡å®è·µæ•™ç¨‹çš„ç©ºç™½ï¼Œå¸®åŠ©å¼€å‘è€…ä» <code>LLM</code> ä½¿ç”¨è€…è½¬å˜ä¸ºçœŸæ­£çš„æ™ºèƒ½ä½“ç³»ç»Ÿæ„å»ºè€…ã€‚</p>
<p>é¡¹ç›®æä¾›å®Œæ•´å­¦ä¹ è·¯å¾„ï¼Œæ¶µç›– <code>Agent</code> åŸºç¡€åŸç†ã€ç»å…¸èŒƒå¼ï¼ˆå¦‚ <code>ReAct</code>ï¼‰ã€ä½ä»£ç å¹³å°ä¸ä¸»æµæ¡†æ¶å®æˆ˜ã€è®°å¿†æ£€ç´¢ã€é€šä¿¡åè®®ã€<code>Agentic-RL</code> è®­ç»ƒã€æ€§èƒ½è¯„ä¼°ï¼Œä»¥åŠå¤šä¸ªçœŸå®ç»¼åˆæ¡ˆä¾‹ï¼Œå…¨éƒ¨å†…å®¹å¼€æºå…è´¹å¹¶æ”¯æŒç¤¾åŒºè´¡çŒ®ã€‚</p>
<ul>
<li><strong>ç†è®ºå®æˆ˜å¹¶é‡</strong> ï¼šä»æ ¸å¿ƒæ¦‚å¿µåˆ°è‡ªç ”æ¡†æ¶ <code>HelloAgents</code> çš„å®Œæ•´å®ç°</li>
<li><strong>å¤šè·¯å¾„å­¦ä¹ </strong> ï¼šè¦†ç›– <code>Coze/Dify</code> ç­‰ä½ä»£ç ã€<code>LangGraph/AutoGen</code> ç­‰æ¡†æ¶åŠä»é›¶æ„å»º</li>
<li><strong>é«˜çº§æŠ€æœ¯è¦†ç›–</strong> ï¼šè®°å¿†æ£€ç´¢ã€ä¸Šä¸‹æ–‡å·¥ç¨‹ã€<code>MCP/A2A</code> åè®®ã€<code>Agentic-RL</code> å…¨æµç¨‹</li>
<li><strong>çœŸå®æ¡ˆä¾‹é©±åŠ¨</strong> ï¼šæ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ã€æ·±åº¦ç ”ç©¶ <code>Agent</code>ã€èµ›åšå°é•‡ç­‰å®æˆ˜é¡¹ç›®</li>
<li><strong>ç¤¾åŒºå…±å»ºæ”¯æŒ</strong> ï¼š<code>Extra-Chapter</code> è´¡çŒ®ã€é¢è¯•é¢˜æ€»ç»“ã€<code>PDF</code> ä¸‹è½½ä¸æŒç»­æ›´æ–°</li>
</ul>
<p>ğŸ’¡ <strong><code>Hello-Agents</code></strong> é€‚åˆå…·å¤‡ <code>Python</code> åŸºç¡€ã€å¯¹ <code>LLM</code> æœ‰åˆæ­¥äº†è§£çš„ <code>AI</code> å¼€å‘è€…ã€å­¦ç”Ÿä¸è‡ªå­¦è€…ï¼Œå°¤å…¶åœ¨æ±‚èŒé¢è¯•ã€ä¸ªäººé¡¹ç›®æˆ–æ·±å…¥ <code>Agent</code> æŠ€æœ¯æ—¶ä»·å€¼å·¨å¤§ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2Fhello-agents" target="_blank" title="https://github.com/datawhalechina/hello-agents" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer"><code>RustFS</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>18.5K+</code></strong></p>
<p><strong>ğŸš€ ç”¨ <code>Rust</code> ç¼–å†™çš„ <code>S3</code> å…¼å®¹é«˜æ€§èƒ½åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e2b25084e954f88bee3de5c3a67b175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=pbh71ZZUFgbeMHmmJx1lY6kXOMw%3D" alt="RustFS" loading="lazy"/></p>
<p><strong><code>RustFS</code></strong> æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œç»“åˆ <code>MinIO</code> çš„ç®€æ˜“æ€§å’Œ <code>Rust</code> çš„å†…å­˜å®‰å…¨ä¸æè‡´æ€§èƒ½ï¼Œæä¾›å®Œæ•´çš„ <code>S3 API</code> å…¼å®¹æ€§ï¼Œæ”¯æŒä¸ <code>MinIO</code>ã€<code>Ceph</code> ç­‰å¹³å°çš„æ— ç¼è¿ç§»ä¸å…±å­˜ï¼Œå°¤å…¶é€‚åˆæ•°æ®æ¹–ã€<code>AI</code> å’Œå¤§æ•°æ®å·¥ä½œè´Ÿè½½ã€‚</p>
<p>å®ƒåœ¨å°å¯¹è±¡åœºæ™¯ä¸‹æ€§èƒ½çªå‡ºï¼ˆ4KB å¯¹è±¡è´Ÿè½½æ¯” <code>MinIO</code> å¿« 2.3 å€ï¼‰ï¼Œé‡‡ç”¨ <code>Apache 2.0</code> å¼€æºåè®®ã€æ— é¥æµ‹æ•°æ®ä¸Šä¼ ï¼Œç¡®ä¿åˆè§„æ€§ï¼ŒåŒæ—¶æ”¯æŒå•èŠ‚ç‚¹ä¸åˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆåˆ†å¸ƒå¼æ¨¡å¼æŒç»­å®Œå–„ä¸­ï¼‰ã€‚</p>
<ul>
<li><strong>æè‡´æ€§èƒ½</strong> ï¼š<code>Rust</code> å®ç°ï¼Œ<code>4KB</code> å°å¯¹è±¡åœºæ™¯ä¸‹ 2.3x å¿«äº <code>MinIO</code></li>
<li><strong>å®Œæ•´ <code>S3</code> å…¼å®¹</strong> ï¼šæ— ç¼æ›¿ä»£æˆ–è¿ç§» <code>MinIO/Ceph</code> ç­‰ç°æœ‰ç³»ç»Ÿ</li>
<li><strong>åˆ†å¸ƒå¼æ¶æ„</strong> ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ä¸å®¹é”™ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡å­˜å‚¨</li>
<li><strong><code>Apache 2.0</code> è®¸å¯</strong> ï¼šæ—  <code>AGPL</code> é™åˆ¶ï¼Œå®Œå…¨å¼€æºæ— é¥æµ‹</li>
<li><strong>æ•°æ®ä¿æŠ¤</strong> ï¼šå†…ç½® <code>Bitrot</code> ä¿æŠ¤ä¸ç‰ˆæœ¬æ§åˆ¶</li>
<li><strong>æ˜“éƒ¨ç½²ç®¡ç†</strong> ï¼šæä¾› <code>Helm</code> å›¾è¡¨ã€<code>Docker</code> å¤šæ¶æ„é•œåƒä¸ <code>Nix</code> æ”¯æŒ</li>
</ul>
<p>ğŸ’¡ <strong><code>RustFS</code></strong> é€‚åˆéœ€è¦é«˜æ€§èƒ½ <code>S3</code> å…¼å®¹å­˜å‚¨çš„ä¼ä¸šã€<code>AI</code>/å¤§æ•°æ®å›¢é˜Ÿï¼Œä»¥åŠè¿½æ±‚è®¸å¯è‡ªç”±ä¸éšç§åˆè§„çš„å¼€å‘è€…ï¼Œå°¤å…¶åœ¨è¾¹ç¼˜/<code>IoT</code> æˆ–å°å¯¹è±¡å¯†é›†åœºæ™¯ä¸‹ä¼˜åŠ¿æ˜æ˜¾ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsimstudioai%2Fsim" target="_blank" title="https://github.com/simstudioai/sim" ref="nofollow noopener noreferrer"><code>sim</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>24.6K+</code></strong></p>
<p>ğŸ¤– <strong>å¼€æºå¯è§†åŒ–å¹³å°ï¼Œç”¨äºæ„å»ºå’Œéƒ¨ç½² <code>AI Agent</code> å·¥ä½œæµ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed320e9b476d4c7192c0904b12148f49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=XH1VE3sp4BCbvESCtnD2Atb2k8E%3D" alt="sim" loading="lazy"/></p>
<p><strong><code>sim</code></strong> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼€æºå·¥å…·ï¼Œè®©å¼€å‘è€…é€šè¿‡æ‹–æ‹½å¼ç”»å¸ƒå¯è§†åŒ–è®¾è®¡ã€è¿æ¥å’Œè¿è¡Œ <code>AI Agent</code> å·¥ä½œæµï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€ <code>Copilot</code> è¾…åŠ©ç”ŸæˆèŠ‚ç‚¹ï¼Œå¸®åŠ©å¿«é€Ÿæ„å»ºå¤æ‚è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<p>å®ƒå†…ç½®å‘é‡æ•°æ®åº“æ”¯æŒæ–‡æ¡£ä¸Šä¼ ä¸ <code>RAG</code> é—®ç­”ï¼Œå®Œç¾å…¼å®¹æœ¬åœ°/è‡ªæ‰˜ç®¡æ¨¡å‹ï¼ˆå¦‚ <code>Ollama</code> å’Œ <code>vLLM</code>ï¼‰ï¼Œæä¾›å®Œæ•´è‡ªéƒ¨ç½²èƒ½åŠ›ï¼Œå½»åº•å®ç°éšç§å¯æ§çš„ <code>Agent</code> ç³»ç»Ÿå¼€å‘ä¸ç”Ÿäº§éƒ¨ç½²ã€‚</p>
<ul>
<li><strong>å¯è§†åŒ–ç”»å¸ƒ</strong> ï¼šæ‹–æ‹½è¿æ¥ <code>Agent</code>ã€å·¥å…·å’Œæ¨¡å—ï¼Œå¿«é€Ÿè®¾è®¡å¤æ‚å·¥ä½œæµ</li>
<li><strong><code>Copilot</code> è¾…åŠ©</strong> ï¼šè‡ªç„¶è¯­è¨€ç”ŸæˆèŠ‚ç‚¹ã€ä¿®å¤é”™è¯¯ã€è¿­ä»£ä¼˜åŒ–æµç¨‹</li>
<li><strong>å‘é‡æ•°æ®åº“é›†æˆ</strong> ï¼šä¸Šä¼ æ–‡æ¡£å®ç°å†…å®¹æ¥åœ°å¼ <code>RAG</code> æŸ¥è¯¢</li>
<li><strong>æœ¬åœ°æ¨¡å‹æ”¯æŒ</strong> ï¼šæ— ç¼å¯¹æ¥ <code>Ollama</code>ï¼ˆ<code>CPU/GPU</code>ï¼‰å’Œ <code>vLLM</code> è‡ªæ‰˜ç®¡æ¨ç†</li>
<li><strong>å®Œæ•´è‡ªéƒ¨ç½²</strong> ï¼š<code>Docker</code>ã€ä¸€é”® <code>NPM</code> æˆ–æ‰‹åŠ¨ <code>Bun/Node</code> éƒ¨ç½²ï¼Œæ— äº‘ä¾èµ–</li>
<li><strong>å®æ—¶ä¸åå°ä»»åŠ¡</strong> ï¼š<code>Socket.io</code> å®æ—¶äº¤äº’ + <code>Trigger.dev</code> åå°ä½œä¸š</li>
</ul>
<p>ğŸ’¡ <strong><code>sim</code></strong> é€‚åˆå¸Œæœ›å¿«é€ŸåŸå‹åŒ–ã€æµ‹è¯•å’Œç”Ÿäº§éƒ¨ç½² <code>AI Agent</code> å·¥ä½œæµçš„å¼€å‘è€…ä¸å›¢é˜Ÿï¼Œå°¤å…¶åœ¨éœ€è¦æœ¬åœ°åŒ–ã€éšç§ä¿æŠ¤æˆ–è‡ªå®šä¹‰ RAG åœºæ™¯ä¸‹è¡¨ç°å‡ºè‰²ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsimstudioai%2Fsim" target="_blank" title="https://github.com/simstudioai/sim" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsst%2Fopencode" target="_blank" title="https://github.com/sst/opencode" ref="nofollow noopener noreferrer"><code>OpenCode</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>43.6K+</code></strong></p>
<p>ğŸ¤– <strong>å¼€æºç»ˆç«¯ä¼˜å…ˆçš„ <code>AI</code> ç¼–ç ä»£ç†</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5de4a08ffe29424584e081d02746e31c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=rwh5tEfLQRGH7Kvod1TEZ94AOxk%3D" alt="OpenCode" loading="lazy"/></p>
<p><strong><code>OpenCode</code></strong> æ˜¯å®Œå…¨å¼€æºçš„ <code>AI</code> ç¼–ç ä»£ç†ï¼Œé‡‡ç”¨ç»ˆç«¯ç•Œé¢ï¼ˆ<code>TUI</code>ï¼‰è®¾è®¡ï¼Œæ”¯æŒå¤šæ¨¡å‹æä¾›å•†ï¼Œé€šè¿‡å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„å®ç°çµæ´»éƒ¨ç½²ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆå¤„ç†ä»£ç ç¼–å†™ã€åˆ†æä¸è§„åˆ’ä»»åŠ¡ã€‚</p>
<p>å®ƒæä¾›åŒä»£ç†æ¨¡å¼ï¼ˆ<code>build</code> å…¨æƒé™å¼€å‘ã€<code>plan</code> åªè¯»æ¢ç´¢ï¼‰ã€å†…ç½®é€šç”¨å­ä»£ç†å¤„ç†å¤æ‚ä»»åŠ¡ï¼Œå¹¶åŸç”Ÿæ”¯æŒ <code>LSP</code> åè®®ï¼Œå®šä½ä¸º <code>Claude Code</code> ç­‰é—­æºå·¥å…·çš„å¼ºå¤§å¼€æºæ›¿ä»£å“ã€‚</p>
<ul>
<li><strong>å®Œå…¨å¼€æºæ— ç»‘å®š</strong> ï¼šæ”¯æŒ <code>Claude</code>ã€<code>OpenAI</code>ã€<code>Google</code>ã€æœ¬åœ°æ¨¡å‹ç­‰å¤šç§æä¾›å•†</li>
<li><strong>åŒä»£ç†æ¨¡å¼</strong> ï¼š<code>build</code> ä»£ç†å…¨è®¿é—®å¼€å‘ï¼Œ<code>plan</code> ä»£ç†åªè¯»å®‰å…¨æ¢ç´¢</li>
<li><strong>å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„</strong> ï¼šæ”¯æŒè¿œç¨‹æ§åˆ¶ï¼Œæœ¬åœ°è¿è¡Œæ›´çµæ´»</li>
<li><strong>å†…ç½®é€šç”¨å­ä»£ç†</strong> ï¼š<code>@general</code> è°ƒç”¨å¤„ç†å¤šæ­¥éª¤å¤æ‚æœç´¢ä»»åŠ¡</li>
<li><strong>åŸç”Ÿ <code>LSP</code> æ”¯æŒ</strong> ï¼šå¼€ç®±å³ç”¨å¢å¼ºä»£ç è¡¥å…¨ä¸æ™ºèƒ½è¾…åŠ©</li>
<li><strong>å¤šå¹³å°éƒ¨ç½²</strong> ï¼š<code>CLI</code>ã€æ¡Œé¢ <code>App</code>ï¼ˆ<code>macOS/Windows/Linux</code>ï¼‰ã€å¤šç§åŒ…ç®¡ç†å™¨å®‰è£…</li>
</ul>
<p>ğŸ’¡ <strong><code>OpenCode</code></strong> é€‚åˆç»ˆç«¯é‡åº¦ç”¨æˆ·ã€<code>Neovim</code> çˆ±å¥½è€…ä»¥åŠéœ€è¦å¼€æºã€å¯è‡ªå®šä¹‰ <code>AI</code> ç¼–ç åŠ©æ‰‹çš„å¼€å‘è€…ï¼Œå°¤å…¶åœ¨å¤„ç†å¤§å‹æˆ–é™Œç”Ÿä»£ç åº“æ—¶è¡¨ç°å‡ºè‰²ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsst%2Fopencode" target="_blank" title="https://github.com/sst/opencode" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentsmd%2Fagents.md" target="_blank" title="https://github.com/agentsmd/agents.md" ref="nofollow noopener noreferrer"><code>AGENTS.md</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>13.5K+</code></strong></p>
<p>ğŸ“ <strong>ä¸“ä¸º <code>AI</code> ç¼–ç ä»£ç†è®¾è®¡çš„å¼€æºæŒ‡å¯¼æ–‡ä»¶æ ¼å¼</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e620f6dd35c4dc9a3c7beba60de0c27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=cU9mXICPkZuQ0gPAsh2SJ7M7cbw%3D" alt="AGENTS" loading="lazy"/></p>
<p><strong><code>AGENTS.md</code></strong> æå‡ºäº†ä¸€ç§ç®€å•å¼€æ”¾çš„æ ‡å‡†ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•æ”¾ç½®ä¸€ä¸ªåä¸º <code>AGENTS.md</code> çš„æ–‡ä»¶ï¼Œä¸“é—¨ä¸º <code>AI</code> ç¼–ç ä»£ç†ï¼ˆå¦‚ <code>Claude Code</code>ã€<code>OpenCode</code> ç­‰ï¼‰æä¾›ä¸Šä¸‹æ–‡ã€å¼€å‘æµç¨‹ã€æµ‹è¯•è§„èŒƒå’Œ PR è§„åˆ™ï¼Œå¸®åŠ©ä»£ç†å¿«é€Ÿç†è§£å¹¶é«˜æ•ˆè´¡çŒ®ä»£ç ã€‚</p>
<p>å®ƒå°†ä¼ ç»Ÿ <code>README</code> ä¸­çš„äººç±»é˜…è¯»éƒ¨åˆ†ä¸æœºå™¨å¯¼å‘çš„ç²¾ç¡®æŒ‡ä»¤åˆ†ç¦»ï¼Œé€šè¿‡å¯é¢„æµ‹çš„ä½ç½®å’Œç»“æ„åŒ–å†…å®¹ï¼Œæ˜¾è‘—é™ä½ <code>AI</code> ä»£ç†åœ¨é™Œç”Ÿä»£ç åº“ä¸­çš„æ‘©æ“¦ï¼Œç›®å‰å·²é…å¥—å®˜ç½‘ç¤ºä¾‹å’Œç¤¾åŒºè®¨è®ºï¼Œæ­£åœ¨æ¨åŠ¨æˆä¸ºè¡Œä¸šäº‹å®æ ‡å‡†ã€‚</p>
<ul>
<li><strong>ä¸“ç”¨ä»£ç† <code>README</code></strong> ï¼šç‹¬ç«‹äºäººç±» <code>README</code>ï¼Œä¸“ä¾› <code>AI</code> ä»£ç†è¯»å–ä¸Šä¸‹æ–‡å’ŒæŒ‡ä»¤</li>
<li><strong>æ ‡å‡†åŒ–ç»“æ„</strong> ï¼šæ¶µç›–å¼€å‘ç¯å¢ƒã€æµ‹è¯•æµç¨‹ã€PR è§„èŒƒç­‰å…³é”®ç¯èŠ‚</li>
<li><strong><code>Monorepo</code> å‹å¥½</strong> ï¼šå†…ç½® <code>pnpm/Turborepo/Vitest</code> ç­‰å¸¸è§å·¥å…·é“¾æŒ‡å¯¼</li>
<li><strong>å¼ºåˆ¶è´¨é‡é—¨æ§</strong> ï¼šæ˜ç¡®è¦æ±‚ <code>lint</code>ã€<code>typecheck</code> å’Œæµ‹è¯•é€šè¿‡åå†æäº¤</li>
<li><strong><code>PR</code> æ ‡é¢˜è§„èŒƒ</strong> ï¼šå¼ºåˆ¶å¸¦é¡¹ç›®èŒƒå›´çš„å‰ç¼€ï¼Œç¡®ä¿å˜æ›´æ¸…æ™°å¯æº¯æº</li>
<li><strong>ç¤¾åŒºé©±åŠ¨å¼€æº</strong> ï¼šå®Œå…¨å¼€æ”¾æ ¼å¼ï¼Œé…å¥—ç½‘ç«™æä¾›ç¤ºä¾‹</li>
</ul>
<p>ğŸ’¡ <strong><code>AGENTS.md</code></strong> é€‚åˆæ‰€æœ‰å¸Œæœ›ä¸ <code>AI</code> ç¼–ç ä»£ç†æ·±åº¦åä½œçš„å›¢é˜Ÿï¼Œå°¤å…¶åœ¨ <code>monorepo</code>ã€å¤§å‹ <code>TypeScript/React</code> é¡¹ç›®ä¸­ï¼Œèƒ½å¤§å¹…æå‡ä»£ç†è´¡çŒ®çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentsmd%2Fagents.md" target="_blank" title="https://github.com/agentsmd/agents.md" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-quickstarts" target="_blank" title="https://github.com/anthropics/claude-quickstarts" ref="nofollow noopener noreferrer"><code>Claude Quickstarts</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>13K+</code></strong></p>
<p>ğŸš€ <strong><code>Anthropic</code> å®˜æ–¹ <code>Claude API</code> å¿«é€Ÿå¯åŠ¨é¡¹ç›®åˆé›†</strong></p>
<p><strong><code>Claude Quickstarts</code></strong> æ˜¯ <code>Anthropic</code> å®˜æ–¹æ¨å‡ºçš„å¼€æºé¡¹ç›®é›†åˆï¼Œæä¾›å¤šä¸ªå¼€ç®±å³ç”¨çš„æ¨¡æ¿ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå¹¶éƒ¨ç½²åŸºäº <code>Claude API</code> çš„ç”Ÿäº§çº§åº”ç”¨ï¼Œæ¶µç›–ä»å®¢æœä»£ç†åˆ°è‡ªä¸»ç¼–ç çš„å¤šç§çœŸå®åœºæ™¯ã€‚</p>
<p>æ¯ä¸ª <code>Quickstart</code> éƒ½é…å¤‡å®Œæ•´ä»£ç ã€ä¾èµ–å’Œè¿è¡ŒæŒ‡å—ï¼Œæ”¯æŒæœ€æ–° <code>Claude</code> æ¨¡å‹ä¸å·¥å…·ï¼ˆå¦‚æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ç”µè„‘æ§åˆ¶ï¼‰ï¼Œä¾¿äºè‡ªå®šä¹‰æ‰©å±•ï¼Œå·²æˆä¸ºä½¿ç”¨ <code>Claude API</code> å¼€å‘è€…çš„é¦–é€‰èµ·ç‚¹ã€‚</p>
<ul>
<li><strong>å¤šåœºæ™¯æ¨¡æ¿</strong> ï¼šå®¢æœæ”¯æŒä»£ç†ã€é‡‘èæ•°æ®åˆ†æå¸ˆã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€ç”µè„‘æ§åˆ¶æ¼”ç¤ºã€è‡ªä¸»ç¼–ç ä»£ç†</li>
<li><strong>æœ€æ–°å·¥å…·æ”¯æŒ</strong> ï¼šå®Œæ•´å®ç° <code>browser_use</code> å’Œ <code>computer_use API</code>ï¼ŒåŒ…æ‹¬ç¼©æ”¾ã€åæ ‡æ“ä½œ</li>
<li><strong>åŒè¯­è¨€å®ç°</strong> ï¼š<code>Python</code> ä¸ <code>TypeScript/JavaScript</code> åŒç‰ˆæœ¬è¦†ç›–ä¸»æµåç«¯/å‰ç«¯</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong> ï¼šé›†æˆ <code>Agent SDK</code>ã€<code>Playwright</code>ã€äº¤äº’å¯è§†åŒ–ä¸æŒä¹…åŒ–è¿›åº¦</li>
<li><strong>æŒç»­æ›´æ–°</strong> ï¼šæœ€è¿‘æ–°å¢æµè§ˆå™¨æ¼”ç¤ºä¸ <code>Claude Haiku 4.5</code> æ”¯æŒ</li>
</ul>
<p>ğŸ’¡ <strong><code>Claude Quickstarts</code></strong> é€‚åˆæƒ³è¦å¿«é€ŸåŸå‹åŒ–æˆ–ç”Ÿäº§éƒ¨ç½² <code>Claude</code> åº”ç”¨çš„å¼€å‘è€…ï¼Œå°¤å…¶åœ¨æ¢ç´¢è®¡ç®—æœºä½¿ç”¨ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–æˆ–è‡ªä¸» <code>Agent</code> åœºæ™¯æ—¶ï¼Œèƒ½å¤§å¹…ç¼©çŸ­ä»é›¶åˆ°è½åœ°çš„å‘¨æœŸã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-quickstarts" target="_blank" title="https://github.com/anthropics/claude-quickstarts" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2FWeKnora" target="_blank" title="https://github.com/Tencent/WeKnora" ref="nofollow noopener noreferrer"><code>WeKnora</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>10.6K+</code></strong></p>
<p>ğŸ§  <strong>è…¾è®¯å¼€æºçš„ <code>LLM</code> é©±åŠ¨æ·±åº¦æ–‡æ¡£ç†è§£ä¸ <code>RAG</code> æ¡†æ¶</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ad57c02e01d4d48885233efc5d81eed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=Uww1fHsWhKovYjYV0nhL1UHZGCE%3D" alt="WeKnora" loading="lazy"/></p>
<p><strong><code>WeKnora</code></strong> æ˜¯è…¾è®¯æ¨å‡ºçš„å¼€æºæ¡†æ¶ï¼Œä¸“æ³¨äºå¤æ‚å¼‚æ„æ–‡æ¡£çš„æ·±åº¦ç†è§£ã€è¯­ä¹‰æ£€ç´¢ä¸ä¸Šä¸‹æ–‡æ„ŸçŸ¥é—®ç­”ï¼Œé‡‡ç”¨ <code>RAG</code> èŒƒå¼ç»“åˆå¤šæ¨¡æ€é¢„å¤„ç†ã€å‘é‡ç´¢å¼•ã€æ™ºèƒ½æ£€ç´¢å’Œå¤§æ¨¡å‹æ¨ç†ï¼Œæä¾›ä¼ä¸šçº§çŸ¥è¯†ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8521818b32a4136a399fed145fa10a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=l1YMZvJR73Isnq0rT6kuEvff9yw%3D" alt="WeKnora-architecture.png" loading="lazy"/>
å®ƒæ¨¡å—åŒ–æ¶æ„é«˜åº¦è§£è€¦ï¼Œæ”¯æŒæœ¬åœ°/äº‘ç«¯æ¨¡å‹æ¥å…¥ã€æ··åˆæ£€ç´¢ç­–ç•¥ä¸ <code>Agent</code> æ¨¡å¼æ‰©å±•ï¼Œå·²æˆä¸ºå¾®ä¿¡å¯¹è¯å¼€æ”¾å¹³å°çš„æ ¸å¿ƒæŠ€æœ¯æ¡†æ¶ï¼Œé€‚ç”¨äºéšç§æ•æ„Ÿä¸é«˜ç²¾åº¦æ–‡æ¡£åœºæ™¯ã€‚</p>
<ul>
<li><strong>æ·±åº¦æ–‡æ¡£è§£æ</strong> ï¼šç²¾å‡†æå– <code>PDF</code>ã€<code>Word</code>ã€å›¾åƒç­‰å¼‚æ„æ–‡æ¡£çš„ç»“æ„åŒ–è¯­ä¹‰å†…å®¹</li>
<li><strong>æ™ºèƒ½ <code>Agent</code> æ¨¡å¼</strong> ï¼š<code>ReAct Agent</code> æ”¯æŒå†…ç½®å·¥å…·ã€<code>MCP</code> æ‰©å±•ä¸ç½‘é¡µæœç´¢ï¼Œå¤šè½®åæ€ç”ŸæˆæŠ¥å‘Š</li>
<li><strong>é«˜æ•ˆæ··åˆæ£€ç´¢</strong> ï¼šç»“åˆå…³é”®è¯ã€å‘é‡ä¸çŸ¥è¯†å›¾è°±ï¼Œæ”¯æŒè·¨çŸ¥è¯†åº“æ£€ç´¢</li>
<li><strong>å¤šç±»å‹çŸ¥è¯†åº“</strong> ï¼šæ”¯æŒ <code>FAQ</code>/æ–‡æ¡£åº“ã€æ–‡ä»¶å¤¹/<code>URL</code> å¯¼å…¥ä¸æ ‡ç­¾ç®¡ç†</li>
<li><strong>çµæ´»æ‰©å±•</strong> ï¼šæ‰€æœ‰ç»„ä»¶è§£è€¦ï¼Œä¾¿äºè‡ªå®šä¹‰è§£æã€åµŒå…¥ä¸ç”Ÿæˆæµç¨‹</li>
<li><strong>æœ¬åœ°éšç§éƒ¨ç½²</strong> ï¼šå…¼å®¹ <code>Ollama</code> ç­‰æœ¬åœ°æ¨¡å‹ï¼Œæ— å¤–éƒ¨æ•°æ®æ³„éœ²é£é™©</li>
</ul>
<p>ğŸ’¡ <strong><code>WeKnora</code></strong> é€‚åˆä¼ä¸šçŸ¥è¯†ç®¡ç†ã€å­¦æœ¯ç ”ç©¶åˆ†æã€æŠ€æœ¯æ”¯æŒã€æ³•å¾‹åˆè§„å®¡æŸ¥ä¸åŒ»ç–—çŸ¥è¯†è¾…åŠ©ç­‰éœ€è¦é«˜ç²¾åº¦æ–‡æ¡£é—®ç­”ä¸æœ¬åœ°åŒ–éƒ¨ç½²çš„åœºæ™¯ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2FWeKnora" target="_blank" title="https://github.com/Tencent/WeKnora" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fresemble-ai%2Fchatterbox" target="_blank" title="https://github.com/resemble-ai/chatterbox" ref="nofollow noopener noreferrer"><code>Chatterbox</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>19.2K+</code></strong></p>
<p>ğŸ—£ï¸ <strong><code>Resemble AI</code> å¼€æºçš„æœ€å…ˆè¿›æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆ<code>TTS</code>ï¼‰æ¨¡å‹å®¶æ—</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f96d75294104ee7b5079258137834d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=tLVLDWA7jIw6z1yXibf0EEZrR%2Bc%3D" alt="Chatterbox-Turbo" loading="lazy"/></p>
<p><strong><code>Chatterbox</code></strong> æ˜¯ <code>Resemble AI</code> æ¨å‡ºçš„ä¸‰ä¸ªå¼€æº <code>TTS</code> æ¨¡å‹ç³»åˆ—ï¼ŒåŒ…æ‹¬ä½å»¶è¿Ÿçš„ <code>Chatterbox-Turbo</code>ï¼ˆ<code>350M</code> å‚æ•°ã€å•æ­¥ç”Ÿæˆï¼‰ã€æ”¯æŒ 23+ è¯­è¨€çš„å¤šè¯­è¨€ç‰ˆä»¥åŠåŸç‰ˆé«˜è¡¨ç°åŠ›æ¨¡å‹ï¼Œæä¾›é›¶æ ·æœ¬è¯­éŸ³å…‹éš†ã€æ‹Ÿå£°æ ‡ç­¾å’Œé«˜æ•ˆæ¨ç†èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28194cf9e8474a48b59d6d332c0b2602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768099100&amp;x-signature=Fh1DFpHZnEj45j1tAh3ggoAS%2Bf4%3D" alt="Chatterbox-test" loading="lazy"/></p>
<p>å®ƒå†…ç½®ç¥ç»æ°´å°ï¼ˆ<code>Perth</code>ï¼‰ç¡®ä¿è¾“å‡ºå¯è¿½æº¯ï¼Œæ”¯æŒå¤¸å¼ åº¦è°ƒèŠ‚ä¸å‰¯è¯­è¨€è¡¨è¾¾ï¼ˆå¦‚ <code>[laugh]</code>ã€<code>[cough]</code>ï¼‰ï¼Œåœ¨è¯­éŸ³è‡ªç„¶åº¦ã€å»¶è¿Ÿå’Œå¤šè¯­è¨€æ”¯æŒä¸Šè¾¾åˆ°å½“å‰å¼€æºé¢†å…ˆæ°´å¹³ï¼Œæˆä¸ºæ„å»ºè¯­éŸ³ä»£ç†å’Œå†…å®¹ç”Ÿæˆçš„é¦–é€‰ã€‚</p>
<ul>
<li><strong><code>Chatterbox-Turbo</code></strong> ï¼š<code>350M</code> å‚æ•°å•æ­¥ç”Ÿæˆï¼Œä¸“ä¸ºä½å»¶è¿Ÿè¯­éŸ³ä»£ç†è®¾è®¡</li>
<li><strong>å¤šè¯­è¨€é›¶æ ·æœ¬å…‹éš†</strong> ï¼š<code>500M</code> å¤šè¯­è¨€æ¨¡å‹æ”¯æŒ 23+ è¯­è¨€ä¸å‚è€ƒéŸ³é¢‘å³æ—¶å…‹éš†</li>
<li><strong>æ‹Ÿå£°æ ‡ç­¾æ”¯æŒ</strong> ï¼šåŸç”Ÿè§£æ <code>[laugh]</code>ã€<code>[cough]</code> ç­‰æ ‡ç­¾ï¼Œæå‡è¡¨è¾¾çœŸå®æ„Ÿ</li>
<li><strong>é›¶æ ·æœ¬è¯­éŸ³å…‹éš†</strong> ï¼šä»…éœ€å‚è€ƒéŸ³é¢‘å³å¯åˆæˆæŒ‡å®šå£°éŸ³</li>
<li><strong>å†…ç½®æ°´å°ä¿æŠ¤</strong> ï¼šæ‰€æœ‰è¾“å‡ºåµŒå…¥ <code>Perth</code> ä¸å¯æ„ŸçŸ¥æ°´å°ï¼Œä¾¿äºè¿½è¸ªä¸è´Ÿè´£ <code>AI</code></li>
<li><strong>é«˜æ•ˆæ¨ç†</strong> ï¼šæ›´ä½æ˜¾å­˜å ç”¨ï¼Œæ”¯æŒå¤¸å¼ åº¦ä¸ <code>CFG</code> è°ƒèŠ‚</li>
</ul>
<p>ğŸ’¡ <strong><code>Chatterbox</code></strong> é€‚åˆæ„å»ºå®æ—¶è¯­éŸ³ä»£ç†ã€æ¸¸æˆé…éŸ³ã€å¤šè¯­è¨€å†…å®¹æœ¬åœ°åŒ–ã€æœ‰å£°ä¹¦åˆ¶ä½œä»¥åŠéœ€è¦é«˜è‡ªç„¶åº¦ä¸è¡¨è¾¾åŠ›çš„ <code>TTS</code> åº”ç”¨å¼€å‘è€…ï¼Œå°¤å…¶åœ¨ä½å»¶è¿Ÿæˆ–éšç§æ•æ„Ÿåœºæ™¯ä¸‹ä¼˜åŠ¿çªå‡ºã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fresemble-ai%2Fchatterbox" target="_blank" title="https://github.com/resemble-ai/chatterbox" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
<li>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFunAudioLLM%2FCosyVoice" target="_blank" title="https://github.com/FunAudioLLM/CosyVoice" ref="nofollow noopener noreferrer"><code>CosyVoice</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>18.6K+</code></strong></p>
<p>ğŸ—£ï¸ <strong>å¤šè¯­è¨€å¤§æ¨¡å‹é©±åŠ¨çš„è¯­éŸ³ç”Ÿæˆæ¡†æ¶</strong></p>
<p><strong><code>CosyVoice</code></strong> æ˜¯ <code>FunAudioLLM</code> å›¢é˜Ÿæ¨å‡ºçš„å¼€æºå¤šè¯­è¨€æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆ<code>TTS</code>ï¼‰ç³»ç»Ÿï¼Œæœ€æ–° <code>Fun-CosyVoice 3.0</code> ç‰ˆæœ¬åœ¨å†…å®¹ä¸€è‡´æ€§ã€è¯´è¯äººç›¸ä¼¼åº¦å’ŒéŸµå¾‹è‡ªç„¶åº¦ä¸Šè¾¾åˆ° <code>SOTA</code>ï¼Œæ”¯æŒé›¶æ ·æœ¬å¤šè¯­è¨€/è·¨è¯­è¨€è¯­éŸ³å…‹éš†ä¸ä½å»¶è¿Ÿæµå¼åˆæˆã€‚</p>
<p>å®ƒè¦†ç›– 9 ç§ä¸»æµè¯­è¨€ï¼ˆä¸­ã€è‹±ã€æ—¥ã€éŸ©ã€å¾·ã€è¥¿ã€æ³•ã€æ„ã€ä¿„ï¼‰åŠ 18+ ç§ä¸­æ–‡æ–¹è¨€ï¼Œæ”¯æŒæŒ‡ä»¤æ§åˆ¶æƒ…ç»ªã€è¯­é€Ÿã€éŸ³é‡ç­‰ï¼Œæä¾›å®Œæ•´æ¨ç†ã€è®­ç»ƒä¸éƒ¨ç½²èƒ½åŠ›ï¼ˆåŒ…æ‹¬ <code>WebUI</code>ã€<code>Docker</code>ã€<code>TensorRT-LLM</code> åŠ é€Ÿï¼‰ï¼Œå·²æˆä¸ºå½“å‰å¼€æº <code>TTS</code> é¢†åŸŸé¢†å…ˆé€‰æ‹©ã€‚</p>
<ul>
<li><strong>é›¶æ ·æœ¬å¤š/è·¨è¯­è¨€å…‹éš†</strong> ï¼šä»…éœ€å‚è€ƒéŸ³é¢‘å³å¯åˆæˆç›®æ ‡å£°éŸ³ï¼Œæ”¯æŒå¤šè¯­è¨€æ— ç¼åˆ‡æ¢</li>
<li><strong>ä½å»¶è¿Ÿæµå¼åˆæˆ</strong> ï¼šåŒå‘æµå¼æ”¯æŒï¼Œæœ€ä½ <code>150ms</code> å»¶è¿Ÿï¼Œå®æ—¶äº¤äº’å‹å¥½</li>
<li><strong>æŒ‡ä»¤ç²¾ç»†æ§åˆ¶</strong> ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡å®šè¯­è¨€ã€æ–¹è¨€ã€æƒ…ç»ªã€è¯­é€Ÿä¸éŸ³é‡</li>
<li><strong>é«˜è‡ªç„¶åº¦ <code>SOTA</code></strong> ï¼š<code>Fun-CosyVoice 3.0</code> åœ¨ä¸€è‡´æ€§ã€ç›¸ä¼¼åº¦ä¸éŸµå¾‹ä¸Šå…¨é¢é¢†å…ˆ</li>
<li><strong>æ–‡æœ¬æ ‡å‡†åŒ–</strong> ï¼šå†…ç½®å¤„ç†æ•°å­—ã€ç¬¦å·ä¸æ‹¼éŸ³/éŸ³ç´ ï¼Œæ— éœ€é¢å¤–å‰ç«¯æ¨¡å—</li>
<li><strong>å®Œæ•´éƒ¨ç½²æ”¯æŒ</strong> ï¼š<code>WebUI</code>ã€<code>FastAPI/gRPC</code> æœåŠ¡ã€<code>TensorRT-LLM 4x</code> åŠ é€Ÿ</li>
</ul>
<p>ğŸ’¡ <strong><code>CosyVoice</code></strong> é€‚åˆæ„å»ºå®æ—¶è¯­éŸ³ä»£ç†ã€å¤šè¯­è¨€å†…å®¹ç”Ÿæˆã€æœ‰å£°ä¹¦ã€æ¸¸æˆé…éŸ³ä»¥åŠéœ€è¦é«˜è‡ªç„¶åº¦ä¸æœ¬åœ°åŒ–éƒ¨ç½²çš„è¯­éŸ³åº”ç”¨å¼€å‘è€…ï¼Œå°¤å…¶åœ¨å¤šè¯­è¨€ä¸æƒ…æ„Ÿè¡¨è¾¾åœºæ™¯ä¸‹è¡¨ç°çªå‡ºã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFunAudioLLM%2FCosyVoice" target="_blank" title="https://github.com/FunAudioLLM/CosyVoice" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
</li>
</ol>
<h3 data-id="heading-10">ç»“è®º</h3>
<p>2025 å¹´ 12 æœˆçš„æ¦œå•ï¼Œæ¸…æ™°å‹¾å‹’å‡ºå¼€æºç¤¾åŒºçš„ä¸‰å¤§æ–°ä¸»æ—‹å¾‹ï¼š</p>
<ul>
<li><strong><code>Agent</code> ç”Ÿæ€å…¨é¢æˆç†Ÿ</strong>ï¼šä»æŒä¹…è®°å¿†ã€å¯è§†åŒ–æ„å»ºåˆ°æ ‡å‡†åŒ–åä½œè§„èŒƒï¼Œ<code>Agent</code> å¼€å‘é—¨æ§›ä¸æ•ˆç‡åŒåŒé£è·ƒ</li>
<li><strong>ç»ˆç«¯ä¼˜å…ˆä¸å¼€æºæ›¿ä»£</strong>ï¼šç»ˆç«¯ <code>AI</code> ç¼–ç ä»£ç†ä¸ä¸“ç”¨æŒ‡å¯¼æ–‡ä»¶å¼ºåŠ¿å´›èµ·ï¼ŒæŒ‘æˆ˜é—­æºéœ¸æƒ</li>
<li><strong>å¤šæ¨¡æ€èƒ½åŠ›çˆ†å‘</strong>ï¼šè¯­éŸ³ç”Ÿæˆæ¨¡å‹é›†ä½“çªç ´ <code>SOTA</code>ï¼Œé«˜è‡ªç„¶åº¦ã€ä½å»¶è¿Ÿã€å¤šè¯­è¨€æ”¯æŒæˆä¸ºæ–°æ ‡é…</li>
</ul>
<p>è¿™äº›é¡¹ç›®æ­£æ¨åŠ¨ <code>AI</code> ä»äº‘ç«¯å®éªŒèµ°å‘æœ¬åœ°ç”Ÿäº§ã€ä»å•ç‚¹å·¥å…·èµ°å‘å®Œæ•´ç”Ÿæ€ã€‚æœªæ¥ï¼Œå·²åœ¨è¿™äº›ä»“åº“ä¸­æ‚„ç„¶å±•å¼€ã€‚</p>
<p>ğŸ“Œ å–œæ¬¢å°±å»ç‚¹ä¸ª <code>Star</code>ï¼Œæ¯ä¸€ä¸ª <code>Star</code> éƒ½æ˜¯å¯¹å¼€æºæœ€å¤§çš„æ”¯æŒï¼</p>
<p>ğŸ“¬ æ¬¢è¿æ”¶è—ã€è½¬å‘ï¼Œä¹Ÿæ¬¢è¿è¯„è®ºåŒºå®‰åˆ©ä½ å¿ƒç›®ä¸­çš„ 2026 å¹´ 1 æœˆé»‘é©¬é¡¹ç›®ï½</p>
<hr/>
<h3 data-id="heading-11">å¾€æœŸæ¨è</h3>
<p>å–œæ¬¢æœ¬æœŸçš„çƒ­é—¨é¡¹ç›®ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›å€¼å¾—ä¸€è¯»çš„å¾€æœŸç²¾å½©å†…å®¹ï¼š</p>
<ol>
<li><a href="https://juejin.cn/post/7434159897197133836" target="_blank" title="https://juejin.cn/post/7434159897197133836">ğŸš€ 2024å¹´11æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7434159897197133836" target="_blank" title="https://juejin.cn/post/7434159897197133836">ğŸš€ 2024å¹´12æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7461822837532213267" target="_blank" title="https://juejin.cn/post/7461822837532213267">ğŸš€ 2025å¹´01æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7475237484085346355" target="_blank" title="https://juejin.cn/post/7475237484085346355">ğŸš€ 2025å¹´02æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7486316823253565474" target="_blank" title="https://juejin.cn/post/7486316823253565474">ğŸš€ 2025å¹´03æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7503762078386700298" target="_blank" title="https://juejin.cn/post/7503762078386700298">ğŸš€ 2025å¹´04æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7508914438659735589" target="_blank" title="https://juejin.cn/post/7508914438659735589">ğŸš€ 2025å¹´05æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7525688196605722670" target="_blank" title="https://juejin.cn/post/7525688196605722670">ğŸš€ 2025å¹´06æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7533169614206861339" target="_blank" title="https://juejin.cn/post/7533169614206861339">ğŸš€ 2025å¹´07æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7543830033606246419" target="_blank" title="https://juejin.cn/post/7543830033606246419">ğŸš€ 2025å¹´08æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7555056825693634601" target="_blank" title="https://juejin.cn/post/7555056825693634601">ğŸš€ 2025å¹´09æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7567208390368198696" target="_blank" title="https://juejin.cn/post/7567208390368198696">ğŸš€ 2025å¹´10æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7579889969986502707" target="_blank" title="https://juejin.cn/post/7579889969986502707">ğŸš€ 2025å¹´11æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šè­¦çš„è‰ºæœ¯ï¼šä» node_exporter æŒ‡æ ‡åˆ°ç”Ÿäº§çº§è§„åˆ™]]></title>    <link>https://juejin.cn/post/7590330924002312255</link>    <guid>https://juejin.cn/post/7590330924002312255</guid>    <pubDate>2026-01-04T02:45:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590330924002312255" data-draft-id="7590283328177504299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šè­¦çš„è‰ºæœ¯ï¼šä» node_exporter æŒ‡æ ‡åˆ°ç”Ÿäº§çº§è§„åˆ™"/> <meta itemprop="keywords" content="åç«¯,ç›‘æ§,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-04T02:45:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šè­¦çš„è‰ºæœ¯ï¼šä» node_exporter æŒ‡æ ‡åˆ°ç”Ÿäº§çº§è§„åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:45:43.000Z" title="Sun Jan 04 2026 02:45:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‡Œæ™¨ 3 ç‚¹ï¼Œæ‰‹æœºéœ‡åŠ¨ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile">å‘Šè­¦ï¼šserver-01 CPU ä½¿ç”¨ç‡è¶…è¿‡ 80%
<span class="hljs-section">è§¦å‘æ—¶é—´ï¼š03:12:45</span>
æŒç»­æ—¶é•¿ï¼š2 åˆ†é’Ÿ
</code></pre>
<p>ä½ çå¼€æƒºå¿ªçš„çœ¼ç›ï¼Œç™»å½•æœåŠ¡å™¨æŸ¥çœ‹ï¼Œå‘ç°åªæ˜¯ Jenkins åœ¨è·‘å®šæ—¶ç¼–è¯‘ä»»åŠ¡ã€‚</p>
<p>è¿™å·²ç»æ˜¯æœ¬å‘¨ç¬¬ 12 æ¬¡è¯¯æŠ¥ã€‚</p>
<p>é—®é¢˜ä¸åœ¨ Prometheusï¼Œä¹Ÿä¸åœ¨ node_exporterï¼Œè€Œåœ¨<strong>å‘Šè­¦è§„åˆ™çš„è®¾è®¡</strong>ã€‚</p>
<hr/>
<p>åœ¨<a href="https://juejin.cn/post/7589481566424596534" target="_blank" title="https://juejin.cn/post/7589481566424596534">ã€Šä» node-exporter å­¦å¦‚ä½•å†™å‡ºå¯å¤ç”¨çš„ç›‘æ§æŒ‡æ ‡ã€‹</a>ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† node_exporter çš„è®¾è®¡å“²å­¦ï¼šæš´éœ²äº‹å®ï¼Œä¸æ˜¯è§‚ç‚¹ã€‚</p>
<ul>
<li>CPU æš´éœ²çš„æ˜¯ç´¯è®¡æ—¶é—´ï¼Œä¸æ˜¯ä½¿ç”¨ç‡</li>
<li>å†…å­˜æš´éœ²çš„æ˜¯å¤šä¸ª Gaugeï¼Œä¸æ˜¯ä¸€ä¸ª"ä½¿ç”¨ç‡"</li>
<li>ç£ç›˜å®¹é‡å’Œ IO åˆ†å¼€è®¾è®¡</li>
</ul>
<p>è¿™äº›"äº‹å®"å¾ˆå®Œæ•´ï¼Œä½†é—®é¢˜æ¥äº†ï¼š<strong>æœ‰äº†æŒ‡æ ‡ï¼Œæ€ä¹ˆå˜æˆå‘Šè­¦ï¼Ÿ</strong></p>
<p>è¿™ä¸æ˜¯ç®€å•è®¾ä¸ªé˜ˆå€¼å°±è¡Œã€‚ä½ çœŸçš„éœ€è¦åœ¨ CPU è¾¾åˆ° 80% æ—¶ç«‹å³å‘Šè­¦å—ï¼Ÿè¿˜æ˜¯åº”è¯¥ç­‰å®ƒæŒç»­ 10 åˆ†é’Ÿå†æ‰“æ‰°ä½ ï¼Ÿ</p>
<p>æœ¬æ–‡èšç„¦ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š**åŸºäº node_exporter çš„æ•°æ®ï¼Œå¦‚ä½•è®¾è®¡ä¸€å¥—ç”Ÿäº§çº§çš„è™šæ‹Ÿæœºå‘Šè­¦è§„åˆ™ï¼Ÿ</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦å‘Šè­¦è§„åˆ™çš„è®¾è®¡æ™ºæ…§</h2>
<h3 data-id="heading-1">1.1 Alertmanager çš„å±€é™</h3>
<p>å¾ˆå¤šäººè§‰å¾— Prometheus æœ‰ Alertmanagerï¼Œä¸ºä»€ä¹ˆè¿˜è¦è‡ªç ”å‘Šè­¦å¼•æ“ï¼Ÿ</p>
<p><strong>Alertmanager çš„ä¸‰ä¸ªç—›ç‚¹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Alertmanager çš„é…ç½®</span>
<span class="hljs-attr">route:</span>
  <span class="hljs-attr">group_by:</span> [<span class="hljs-string">'alertname'</span>]
  <span class="hljs-attr">group_wait:</span> <span class="hljs-string">30s</span>
  <span class="hljs-attr">group_interval:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">4h</span>
  <span class="hljs-attr">receiver:</span> <span class="hljs-string">'team-pager'</span>
</code></pre>

























<table><thead><tr><th>é—®é¢˜</th><th>è¡¨ç°</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>é…ç½®å¤æ‚</strong></td><td>YAML éš¾ç†è§£</td><td>è¿ç»´æˆæœ¬é«˜ï¼Œæ”¹è§„åˆ™è¦é‡å¯</td></tr><tr><td><strong>æ— çŠ¶æ€å¯è§</strong></td><td>ä¸çŸ¥é“å½“å‰æœ‰å“ªäº›å‘Šè­¦</td><td>æ— æ³•è¿½æº¯å‘Šè­¦å†å²</td></tr><tr><td><strong>éš¾ä»¥æ‰©å±•</strong></td><td>åŠ åŠŸèƒ½è¦æ”¹æºç </td><td>æ— æ³•èå…¥ä¸šåŠ¡é€»è¾‘</td></tr></tbody></table>
<p><strong>ä¸€ä¸ªçœŸå®åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">è¿ç»´ï¼š<span class="hljs-string">"CPU ä½¿ç”¨ç‡é«˜çš„å‘Šè­¦è§¦å‘äº†å¤šå°‘æ¬¡ï¼Ÿ"</span>
Alertmanagerï¼š<span class="hljs-string">"ä¸çŸ¥é“ï¼Œæˆ‘ä¸å­˜å†å²ã€‚"</span>

è¿ç»´ï¼š<span class="hljs-string">"è¿™ä¸ªå‘Šè­¦æŒç»­å¤šä¹…äº†ï¼Ÿ"</span>
Alertmanagerï¼š<span class="hljs-string">"ä¸çŸ¥é“ï¼Œæˆ‘åªç®¡é€šçŸ¥ã€‚"</span>

è¿ç»´ï¼š<span class="hljs-string">"èƒ½ä¸èƒ½åœ¨å‘å¸ƒçª—å£å±è”½å‘Šè­¦ï¼Ÿ"</span>
Alertmanagerï¼š<span class="hljs-string">"å¯ä»¥ï¼Œä½†è¦å†™å¤æ‚çš„ YAMLã€‚"</span>
</code></pre>
<p><strong>è‡ªç ”çš„ä»·å€¼ï¼š</strong></p>
<ul>
<li>Web UI ç®¡ç†è§„åˆ™ï¼Œä¸ç”¨æ”¹ YAML</li>
<li>æ•°æ®åº“å­˜å‚¨å†å²ï¼Œå¯ä»¥åˆ†æè¶‹åŠ¿</li>
<li>çµæ´»æ‰©å±•ï¼Œèå…¥ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å‘å¸ƒçª—å£è‡ªåŠ¨é™é»˜ï¼‰</li>
</ul>
<h3 data-id="heading-2">1.2 Google çš„ä¸¤ä¸ªæ–¹æ³•è®º</h3>
<p>Google SRE ç»™äº†æˆ‘ä»¬ä¸¤ä¸ªé»„é‡‘æ³•åˆ™ï¼š</p>
<p><strong>USE æ–¹æ³•ï¼ˆèµ„æºç›‘æ§ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[Utilization&lt;br/&gt;åˆ©ç”¨ç‡] --&gt; B[æå‰é¢„è­¦]
    C[Saturation&lt;br/&gt;é¥±å’Œåº¦] --&gt; D[ç¡®è®¤æ‹¥å¡]
    E[Errors&lt;br/&gt;é”™è¯¯] --&gt; F[ç¡®è®¤æ•…éšœ]
    
    style A fill:#fff4e1
    style C fill:#ffe1f5
    style E fill:#ffcccc
</code></pre>
<ul>
<li><strong>Utilization</strong>ï¼šèµ„æºç”¨äº†å¤šå°‘ï¼Ÿï¼ˆCPU 80% â†’ éœ€è¦å…³æ³¨ï¼‰</li>
<li><strong>Saturation</strong>ï¼šæ˜¯å¦æœ‰æ’é˜Ÿï¼Ÿï¼ˆIO é˜Ÿåˆ—é•¿ â†’ æ€§èƒ½ä¸‹é™ï¼‰</li>
<li><strong>Errors</strong>ï¼šæ˜¯å¦æœ‰é”™è¯¯ï¼Ÿï¼ˆç£ç›˜é”™è¯¯ â†’ ç¡¬ä»¶æ•…éšœï¼‰</li>
</ul>
<p><strong>å››ä¸ªé»„é‡‘ä¿¡å·ï¼ˆæœåŠ¡ç›‘æ§ï¼‰ï¼š</strong></p>
<p>è™½ç„¶è™šæ‹Ÿæœºä¸æ˜¯"æœåŠ¡"ï¼Œä½†å¯ä»¥æ˜ å°„ï¼š</p>
<ul>
<li><strong>Latency</strong>ï¼šIO å»¶è¿Ÿé«˜ â†’ å½±å“ä¸Šå±‚åº”ç”¨</li>
<li><strong>Traffic</strong>ï¼šç½‘ç»œæµé‡å¼‚å¸¸ â†’ å¯èƒ½è¢«æ”»å‡»</li>
<li><strong>Errors</strong>ï¼šç¡¬ä»¶é”™è¯¯ â†’ éœ€è¦ä»‹å…¥</li>
<li><strong>Saturation</strong>ï¼šèµ„æºé¥±å’Œ â†’ éœ€è¦æ‰©å®¹</li>
</ul>
<p><strong>å¯ç¤ºï¼šå‘Šè­¦ä¸æ˜¯ç®€å•è®¾é˜ˆå€¼ï¼Œè€Œæ˜¯è¦ç†è§£ç³»ç»Ÿåœ¨ä¸åŒé˜¶æ®µçš„è¡¨ç°ã€‚</strong></p>
<h3 data-id="heading-3">1.3 ä»æŒ‡æ ‡åˆ°å‘Šè­¦çš„æ ¸å¿ƒæŒ‘æˆ˜</h3>
<p>node_exporter ç»™äº†æˆ‘ä»¬"äº‹å®"ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">node_cpu_seconds_total{<span class="hljs-attr">mode</span>=<span class="hljs-string">"user"</span>} <span class="hljs-number">123456</span>   <span class="hljs-comment"># CPU ç´¯è®¡æ—¶é—´</span>
node_memory_MemAvailable_bytes 8388608000    <span class="hljs-comment"># å¯ç”¨å†…å­˜</span>
node_filesystem_avail_bytes 53687091200      <span class="hljs-comment"># ç£ç›˜å¯ç”¨ç©ºé—´</span>
</code></pre>
<p>ä½†è¿™äº›æ˜¯ Counter å’Œ Gaugeï¼Œæ€ä¹ˆå˜æˆå‘Šè­¦ï¼Ÿ</p>
<p><strong>ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</strong></p>
<ol>
<li><strong>é˜ˆå€¼æ€ä¹ˆå®šï¼Ÿ</strong> â€”â€” 80% åˆé€‚è¿˜æ˜¯ 90% åˆé€‚ï¼Ÿ</li>
<li><strong>æ€ä¹ˆè¿‡æ»¤æ¯›åˆºï¼Ÿ</strong> â€”â€” çŸ­æš‚å³°å€¼è¦ä¸è¦å‘Šè­¦ï¼Ÿ</li>
<li><strong>å¦‚ä½•æå‰é¢„è­¦ï¼Ÿ</strong> â€”â€” ç­‰åˆ°çœŸå‡ºé—®é¢˜æ‰å‘Šæ˜¯ä¸æ˜¯å¤ªæ™šäº†ï¼Ÿ</li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œå››ä¸ªç»´åº¦ï¼Œçœ‹çœ‹å¦‚ä½•è®¾è®¡å‘Šè­¦è§„åˆ™ã€‚</p>
<hr/>
<h2 data-id="heading-4">2. CPU å‘Šè­¦ï¼šä¸åªæ˜¯è®¾ä¸ª 80%</h2>
<h3 data-id="heading-5">2.1 é”™è¯¯ç¤ºä¾‹</h3>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ç¤ºä¾‹ï¼šCPU ä½¿ç”¨ç‡ &gt; 80% å°±å‘Šè­¦
(1 - avg(rate(node_cpu_seconds_total{mode="idle"}[5m]))) * 100 &gt; 80
</code></pre>
<p><strong>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">10:00 - CPU 85%ï¼ˆä»£ç ç¼–è¯‘ï¼Œæ­£å¸¸ï¼‰  â†’ å‘Šè­¦</span>
<span class="hljs-section">10:01 - CPU 60%ï¼ˆç¼–è¯‘ç»“æŸï¼‰        â†’ æ¢å¤</span>
<span class="hljs-section">10:05 - CPU 85%ï¼ˆå®šæ—¶ä»»åŠ¡ï¼Œæ­£å¸¸ï¼‰  â†’ å‘Šè­¦</span>
<span class="hljs-section">10:06 - CPU 50%                    â†’ æ¢å¤</span>

ä¸€å¤©æ”¶åˆ°å‡ åæ¡å‘Šè­¦ï¼Œéƒ½æ˜¯æ­£å¸¸çš„ä¸šåŠ¡æ³¢åŠ¨ã€‚
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>æ²¡æœ‰æ—¶é—´ç»´åº¦ï¼Œç¬æ—¶å³°å€¼ä¹Ÿå‘Šè­¦</li>
<li>80% çš„é˜ˆå€¼å¤ªä½ï¼Œæ­£å¸¸ç¹å¿™å°±ä¼šè§¦å‘</li>
<li>ä¸åŒºåˆ†"ä¸´æ—¶å¿™"å’Œ"æŒç»­å¿™"</li>
</ul>
<h3 data-id="heading-6">2.2 æ­£ç¡®ç¤ºä¾‹ 1ï¼šåŠ ä¸Šæ—¶é—´ç»´åº¦</h3>
<pre><code class="hljs language-promql" lang="promql"># æ­£ç¡®ç¤ºä¾‹ï¼šCPU æŒç»­ 10 åˆ†é’Ÿ &gt; 90%
(1 - avg(rate(node_cpu_seconds_total{mode="idle"}[5m])) by (instance)) * 100 &gt; 90
for: 10m
</code></pre>
<p><strong>æ”¹è¿›ç‚¹ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>[5m]</code></td><td>è¯„ä¼°çª—å£</td><td>å¹³æ»‘ 15 ç§’æŠ“å–é—´éš”çš„æŠ–åŠ¨</td></tr><tr><td><code>&gt; 90</code></td><td>é˜ˆå€¼æé«˜</td><td>ç•™ 10% ç¼“å†²ï¼Œé¿å…è¯¯æŠ¥</td></tr><tr><td><code>for: 10m</code></td><td>æŒç»­æ—¶é•¿</td><td>è¿‡æ»¤ä¸´æ—¶æ³¢åŠ¨ï¼ˆç¼–è¯‘ã€å¤‡ä»½ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[é¦–æ¬¡è¶…è¿‡ 90%] --&gt; B[è§‚å¯Ÿ 10 åˆ†é’Ÿ]
    B --&gt; C{æŒç»­è¶…è¿‡?}
    C --&gt;|æ˜¯| D[è§¦å‘å‘Šè­¦]
    C --&gt;|å¦| E[å–æ¶ˆ]
    
    style A fill:#fff4e1
    style D fill:#ffcccc
    style E fill:#ccffcc
</code></pre>
<p><strong>æ•ˆæœï¼š</strong></p>
<ul>
<li>çŸ­æš‚çš„ç¼–è¯‘ã€å¤‡ä»½ä¸ä¼šå‘Šè­¦</li>
<li>åªæœ‰çœŸæ­£æŒç»­ç¹å¿™æ‰å‘Šè­¦</li>
<li>è¯¯æŠ¥ç‡ä» 80% é™åˆ° &lt; 10%</li>
</ul>
<h3 data-id="heading-7">2.3 æ­£ç¡®ç¤ºä¾‹ 2ï¼šåŒºåˆ† CPU æ¨¡å¼</h3>
<p>æ•´æœº CPU å‘Šè¯‰ä½ "å¿™ä¸å¿™"ï¼Œä½†ä¸çŸ¥é“"ä¸ºä»€ä¹ˆå¿™"ã€‚</p>
<pre><code class="hljs language-promql" lang="promql"># ç”¨æˆ·æ€ CPU è¿‡é«˜ â†’ åº”ç”¨ä»£ç æ•ˆç‡é—®é¢˜
avg(rate(node_cpu_seconds_total{mode="user"}[5m])) by (instance) &gt; 0.8
for: 10m

# ç³»ç»Ÿæ€ CPU è¿‡é«˜ â†’ ç³»ç»Ÿè°ƒç”¨è¿‡å¤šï¼ˆç½‘ç»œ/ç£ç›˜ IOï¼‰
avg(rate(node_cpu_seconds_total{mode="system"}[5m])) by (instance) &gt; 0.3
for: 10m

# iowait è¿‡é«˜ â†’ ç£ç›˜ IO ç“¶é¢ˆ
avg(rate(node_cpu_seconds_total{mode="iowait"}[5m])) by (instance) &gt; 0.2
for: 5m
</code></pre>
<p><strong>ä»·å€¼ï¼šä¸åªçŸ¥é“"CPU é«˜"ï¼Œè¿˜çŸ¥é“"ä¸ºä»€ä¹ˆé«˜"ã€‚</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">åœºæ™¯ <span class="hljs-number">1</span>ï¼šæ•´æœº CPU <span class="hljs-number">90</span><span class="hljs-comment">%ï¼ŒåŒæ—¶ user é«˜</span>
â†’ è¿ç»´ï¼šåº”ç”¨ä»£ç æœ‰é—®é¢˜ï¼Œå»æ’æŸ¥ä¸šåŠ¡

åœºæ™¯ <span class="hljs-number">2</span>ï¼šæ•´æœº CPU <span class="hljs-number">90</span><span class="hljs-comment">%ï¼ŒåŒæ—¶ iowait é«˜</span>
â†’ è¿ç»´ï¼šç£ç›˜ IO æ…¢ï¼Œå»æ’æŸ¥ç£ç›˜

åœºæ™¯ <span class="hljs-number">3</span>ï¼šæ•´æœº CPU <span class="hljs-number">90</span><span class="hljs-comment">%ï¼ŒåŒæ—¶ system é«˜</span>
â†’ è¿ç»´ï¼šç³»ç»Ÿè°ƒç”¨å¤šï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜
</code></pre>
<p>è¿™å°±æ˜¯åŒºåˆ†æ¨¡å¼çš„ä»·å€¼ï¼šåŒæ ·æ˜¯ CPU 90%ï¼Œä½†é—®é¢˜çš„æ ¹å› å®Œå…¨ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¹Ÿä¸åŒã€‚</p>
<hr/>
<h2 data-id="heading-8">3. å†…å­˜å‘Šè­¦ï¼šLinux çš„å†…å­˜ä¸æ˜¯ä½ æƒ³çš„é‚£æ ·</h2>
<h3 data-id="heading-9">3.1 é”™è¯¯ç¤ºä¾‹</h3>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ç¤ºä¾‹ï¼šç”¨ MemFree è®¡ç®—ä½¿ç”¨ç‡
(1 - node_memory_MemFree_bytes / node_memory_MemTotal_bytes) * 100 &gt; 90
</code></pre>
<p><strong>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">16G å†…å­˜çš„æœåŠ¡å™¨ï¼š
<span class="hljs-section">MemTotal: 16G</span>
<span class="hljs-section">MemFree:  1G   (çœŸæ­£ç©ºé—²)</span>
<span class="hljs-section">Cached:   8G   (æ–‡ä»¶ç¼“å­˜ï¼Œå¯é‡Šæ”¾)</span>

é”™è¯¯è®¡ç®—ï¼šä½¿ç”¨ç‡ = (16 - 1) / 16 = 93.75%
â†’ å‘Šè­¦ï¼š<span class="hljs-string">"å†…å­˜ä¸è¶³ï¼"</span>
â†’ è¿ç»´ç™»å½•æŸ¥çœ‹
â†’ å‘ç° 8G æ˜¯ cacheï¼Œéšæ—¶å¯ä»¥é‡Šæ”¾
â†’ è¯¯æŠ¥ï¼
</code></pre>
<p><strong>é—®é¢˜ï¼šä¸ç†è§£ Linux å†…å­˜ç®¡ç†æœºåˆ¶ã€‚</strong></p>
<p>Linux ä¼šæŠŠç©ºé—²å†…å­˜ç”¨æ¥åš cacheï¼Œæå‡æ–‡ä»¶è¯»å–æ€§èƒ½ã€‚è¿™äº› cache åœ¨åº”ç”¨éœ€è¦å†…å­˜æ—¶ä¼šè‡ªåŠ¨é‡Šæ”¾ï¼Œä¸åº”è¯¥ç®—ä½œ"å·²ä½¿ç”¨"ã€‚</p>
<h3 data-id="heading-10">3.2 æ­£ç¡®ç¤ºä¾‹ 1ï¼šç”¨ MemAvailable</h3>
<pre><code class="hljs language-promql" lang="promql"># æ­£ç¡®ç¤ºä¾‹ï¼šç”¨ MemAvailable è®¡ç®—
(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100 &gt; 90
for: 5m
</code></pre>
<p><strong>MemAvailable æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">MemAvailable</span> = MemFree + å¯å›æ”¶çš„ Cache + å¯å›æ”¶çš„ Buffer
</code></pre>
<p>è¿™æ‰æ˜¯çœŸæ­£å¯ç”¨çš„å†…å­˜ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>node_memory_MemAvailable_bytes</code> åœ¨ node_exporter v0.16+ ç‰ˆæœ¬æ‰å¯ç”¨ã€‚å¦‚æœä½ çš„ç‰ˆæœ¬è¾ƒæ—§ï¼Œéœ€è¦å…ˆå‡çº§ã€‚</p>
</blockquote>
<p><strong>å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ï¼š16G å†…å­˜æœåŠ¡å™¨

MemFree:      1G
Cached:       8G (å¯å›æ”¶)
MemAvailable: 9G

ç”¨ MemFreeï¼š
ä½¿ç”¨ç‡ = (16 - 1) / <span class="hljs-attr">16</span> = <span class="hljs-number">93.75</span>%  â†’ è¯¯æŠ¥

ç”¨ MemAvailableï¼š
ä½¿ç”¨ç‡ = (16 - 9) / <span class="hljs-attr">16</span> = <span class="hljs-number">43.75</span>%  â†’ æ­£ç¡®
</code></pre>
<h3 data-id="heading-11">3.3 æ­£ç¡®ç¤ºä¾‹ 2ï¼šé¢„æµ‹æœªæ¥è€—å°½</h3>
<p>å½“å‰å¯ç”¨å†…å­˜å……è¶³ï¼Œä½†å¦‚æœæœ‰å†…å­˜æ³„æ¼ï¼Œè¿Ÿæ—©ä¼šè€—å°½ã€‚</p>
<pre><code class="hljs language-promql" lang="promql"># é¢„æµ‹ 4 å°æ—¶åå¯ç”¨å†…å­˜æ˜¯å¦è€—å°½
predict_linear(node_memory_MemAvailable_bytes[1h], 4*3600) &lt; 0
for: 10m
</code></pre>
<p><strong>predict_linear çš„åŸç†ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[è¿‡å» 1 å°æ—¶æ•°æ®] --&gt; B[çº¿æ€§å›å½’]
    B --&gt; C[é¢„æµ‹ 4 å°æ—¶å]
    C --&gt; D{&lt; 0?}
    D --&gt;|æ˜¯| E[å‘Šè­¦]
    
    style A fill:#e1f5ff
    style E fill:#ffcccc
</code></pre>
<p><strong>æ¡ˆä¾‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:00 - <span class="hljs-attr">MemAvailable</span> = <span class="hljs-number">10</span>G
10:30 - <span class="hljs-attr">MemAvailable</span> = <span class="hljs-number">8</span>G
11:00 - <span class="hljs-attr">MemAvailable</span> = <span class="hljs-number">6</span>G

æ¯å°æ—¶ä¸‹é™ 4G
â†’ é¢„æµ‹ 4 å°æ—¶åï¼š6G - <span class="hljs-attr">16G</span> = -<span class="hljs-number">10</span>G &lt; <span class="hljs-number">0</span>
â†’ è§¦å‘å‘Šè­¦ï¼š"é¢„è®¡ 4 å°æ—¶åå†…å­˜è€—å°½"
</code></pre>
<p><strong>ä»·å€¼ï¼šæå‰ 4 å°æ—¶å‘ç°é£é™©ï¼Œè€Œä¸æ˜¯ç­‰åˆ°çœŸçš„è€—å°½ã€‚</strong></p>
<p>è¿™å°±æ˜¯ <code>predict_linear()</code> çš„å¨åŠ›ï¼šä»"è¢«åŠ¨åº”å¯¹"å˜æˆ"ä¸»åŠ¨é¢„é˜²"ã€‚</p>
<hr/>
<h2 data-id="heading-12">4. ç£ç›˜å‘Šè­¦ï¼šå½“å‰å€¼å’Œæœªæ¥è¶‹åŠ¿</h2>
<h3 data-id="heading-13">4.1 é”™è¯¯ç¤ºä¾‹</h3>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ç¤ºä¾‹ï¼šç£ç›˜ä½¿ç”¨ç‡ &gt; 85% å°±å‘Šè­¦
(1 - node_filesystem_avail_bytes / node_filesystem_size_bytes) * 100 &gt; 85
</code></pre>
<p><strong>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">åœºæ™¯ <span class="hljs-number">1</span>ï¼šç£ç›˜ä½¿ç”¨ç‡ <span class="hljs-number">86</span><span class="hljs-comment">%ï¼Œä½†æ—¥å¿—å¢é•¿å¾ˆå¿«</span>
â†’ è§¦å‘å‘Šè­¦
â†’ è¿ç»´å»æ¸…ç†æ—¥å¿—
â†’ ä½† <span class="hljs-number">2</span> å°æ—¶åç£ç›˜æ»¡äº†
â†’ æœåŠ¡æŒ‚äº†

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º <span class="hljs-number">85</span><span class="hljs-comment">% çš„é˜ˆå€¼å¤ªæ™šäº†ï¼</span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>ä¸çŸ¥é“ç£ç›˜å¢é•¿é€Ÿåº¦</li>
<li>ç­‰åˆ° 85% å†å‘Šè­¦ï¼Œå¯èƒ½æ¥ä¸åŠå¤„ç†</li>
<li>æ²¡æœ‰è€ƒè™‘"æœªæ¥ä¼šæ€æ ·"</li>
</ul>
<h3 data-id="heading-14">4.2 æ­£ç¡®ç¤ºä¾‹ 1ï¼šé¢„æµ‹å¼å‘Šè­¦</h3>
<pre><code class="hljs language-promql" lang="promql"># åŸºäºè¿‡å» 6 å°æ—¶æ•°æ®ï¼Œé¢„æµ‹ 24 å°æ—¶åç£ç›˜æ˜¯å¦æ»¡
predict_linear(node_filesystem_avail_bytes[6h], 24*3600) &lt; 0
for: 1h
</code></pre>
<p><strong>ä»·å€¼ï¼š</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">åœºæ™¯ <span class="hljs-number">1</span>ï¼šç£ç›˜ä½¿ç”¨ç‡ <span class="hljs-number">82</span><span class="hljs-comment">%ï¼Œä½†å¢é•¿å¾ˆå¿«</span>
â†’ è§„åˆ™ <span class="hljs-number">1</span> å‘Šè­¦ï¼š<span class="hljs-string">"é¢„æµ‹ 24h åæ»¡"</span>
â†’ è¿ç»´ï¼šä¼˜å…ˆå¤„ç†ï¼Œæ˜å¤©å°±ä¼šæ»¡

åœºæ™¯ <span class="hljs-number">2</span>ï¼šç£ç›˜ä½¿ç”¨ç‡ <span class="hljs-number">82</span><span class="hljs-comment">%ï¼Œä½†å¢é•¿å¾ˆæ…¢</span>
â†’ è§„åˆ™ <span class="hljs-number">1</span> ä¸å‘Šè­¦ï¼šé¢„æµ‹ <span class="hljs-number">7</span> å¤©åæ‰æ»¡
â†’ è¿ç»´ï¼šä¸ç´§æ€¥ï¼Œæ’æœŸæ¸…ç†å³å¯
</code></pre>
<p><strong>åŒæ ·æ˜¯ 82%ï¼Œä½†å¤„ç†ä¼˜å…ˆçº§å®Œå…¨ä¸åŒã€‚</strong></p>
<h3 data-id="heading-15">4.3 æ­£ç¡®ç¤ºä¾‹ 2ï¼šå®¹é‡å’Œ IO åˆ†å¼€</h3>
<p>ç£ç›˜æœ‰ä¸¤ç±»é—®é¢˜ï¼š</p>
<ul>
<li><strong>å®¹é‡é—®é¢˜</strong>ï¼šå¿«æ»¡äº†</li>
<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šIO æ…¢äº†</li>
</ul>
<pre><code class="hljs language-promql" lang="promql"># å®¹é‡å‘Šè­¦ï¼šä½¿ç”¨ç‡ &gt; 90%
# æ³¨æ„ï¼šè¿‡æ»¤æ‰ä¸´æ—¶ç›®å½•å’Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
(1 - node_filesystem_avail_bytes{
    fstype=~"ext4|xfs",
    mountpoint!~"/tmp|/var/lib/docker|/boot"
  } / node_filesystem_size_bytes) * 100 &gt; 90
for: 10m

# æ€§èƒ½å‘Šè­¦ï¼šIO ä½¿ç”¨ç‡ &gt; 80%
rate(node_disk_io_time_seconds_total{device=~"sd.*|vd.*"}[5m]) &gt; 0.8
for: 10m

# æ€§èƒ½å‘Šè­¦ï¼šIO é˜Ÿåˆ—é•¿åº¦ &gt; 10
rate(node_disk_io_time_weighted_seconds_total{device=~"sd.*|vd.*"}[5m]) &gt; 10
for: 5m
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿‡æ»¤è·¯å¾„ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä¸éœ€è¦å‘Šè­¦çš„æŒ‚è½½ç‚¹ï¼š
<span class="hljs-deletion">- /tmpï¼šä¸´æ—¶ç›®å½•ï¼Œæ»¡äº†ä¹Ÿæ— æ‰€è°“</span>
<span class="hljs-deletion">- /var/lib/dockerï¼šå®¹å™¨å­˜å‚¨ï¼Œç”± Docker ç®¡ç†</span>
<span class="hljs-deletion">- /bootï¼šå¼•å¯¼åˆ†åŒºï¼Œé€šå¸¸å¾ˆå°ä¸”ä¸ä¼šå˜åŒ–</span>

åªå…³æ³¨ä¸šåŠ¡æ•°æ®ç›˜ï¼š
<span class="hljs-deletion">- /ï¼šæ ¹åˆ†åŒº</span>
<span class="hljs-deletion">- /dataï¼šæ•°æ®åˆ†åŒº</span>
<span class="hljs-deletion">- /homeï¼šç”¨æˆ·ç›®å½•</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦åˆ†å¼€ï¼Ÿ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">åœºæ™¯</span> <span class="hljs-number">1</span><span class="hljs-string">ï¼šç£ç›˜ä½¿ç”¨ç‡</span> <span class="hljs-number">50</span><span class="hljs-string">%ï¼Œä½†</span> <span class="hljs-string">IO</span> <span class="hljs-string">é˜Ÿåˆ—å¾ˆé•¿</span>
<span class="hljs-string">â†’</span> <span class="hljs-string">å®¹é‡å……è¶³ï¼Œä½†æ€§èƒ½å·®</span>
<span class="hljs-string">â†’</span> <span class="hljs-string">éœ€è¦ä¼˜åŒ–</span> <span class="hljs-string">IOï¼ˆæ¢</span> <span class="hljs-string">SSDã€å‡å°‘å°æ–‡ä»¶æ“ä½œï¼‰</span>

<span class="hljs-string">åœºæ™¯</span> <span class="hljs-number">2</span><span class="hljs-string">ï¼šç£ç›˜ä½¿ç”¨ç‡</span> <span class="hljs-number">95</span><span class="hljs-string">%ï¼Œä½†</span> <span class="hljs-string">IO</span> <span class="hljs-string">æ­£å¸¸</span>
<span class="hljs-string">â†’</span> <span class="hljs-string">å®¹é‡ä¸è¶³ï¼Œä½†æ€§èƒ½æ­£å¸¸</span>
<span class="hljs-string">â†’</span> <span class="hljs-string">éœ€è¦æ¸…ç†ç£ç›˜æˆ–æ‰©å®¹</span>

<span class="hljs-string">ä¸¤ç±»é—®é¢˜ï¼Œä¸¤ç§å¤„ç†æ–¹å¼ã€‚</span>

<span class="hljs-string">**è¿ç»´å£è¯€**ï¼šå®¹é‡çœ‹è¶‹åŠ¿ï¼Œæ€§èƒ½çœ‹é˜Ÿåˆ—ã€‚</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## 5. ç½‘ç»œå‘Šè­¦ï¼šæµé‡å’Œé”™è¯¯</span>

<span class="hljs-comment">### 5.1 é”™è¯¯ç¤ºä¾‹</span>

<span class="hljs-string">```promql</span>
<span class="hljs-comment"># é”™è¯¯ç¤ºä¾‹ï¼šç½‘ç»œæµé‡ &gt; 100MB/s å°±å‘Šè­¦</span>
<span class="hljs-string">rate(node_network_receive_bytes_total[5m])</span> <span class="hljs-string">/</span> <span class="hljs-number">1024</span> <span class="hljs-string">/</span> <span class="hljs-number">1024</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">100</span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>100MB/s å¯¹åƒå…†ç½‘å¡æ˜¯æ­£å¸¸çš„ï¼ˆ125MB/s æ»¡è½½ï¼‰</li>
<li>æ²¡æœ‰åŒºåˆ†"æµé‡å¤§"å’Œ"å¼‚å¸¸æµé‡"</li>
<li>æ²¡æœ‰è€ƒè™‘é”™è¯¯ç‡</li>
</ul>
<h3 data-id="heading-16">5.2 æ­£ç¡®ç¤ºä¾‹ï¼šæµé‡ + é”™è¯¯ç‡</h3>
<pre><code class="hljs language-promql" lang="promql"># ç½‘ç»œæµé‡è¶…è¿‡å¸¦å®½çš„ 80%
# æ³¨æ„ï¼šæ’é™¤å›ç¯æ¥å£å’Œè™šæ‹Ÿæ¥å£
rate(node_network_receive_bytes_total{
    device!~"lo|docker.*|veth.*|br-.*"
  }[5m]) / (node_network_speed_bytes * 0.8) &gt; 1
for: 5m

# ç½‘ç»œé”™è¯¯ç‡ &gt; 0.1%
rate(node_network_receive_errs_total{
    device!~"lo|docker.*|veth.*|br-.*"
  }[5m]) 
/ 
rate(node_network_receive_packets_total{
    device!~"lo|docker.*|veth.*|br-.*"
  }[5m]) &gt; 0.001
for: 5m
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿‡æ»¤æ¥å£ï¼Ÿ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä¸éœ€è¦ç›‘æ§çš„ç½‘ç»œæ¥å£ï¼š
<span class="hljs-bullet">-</span> loï¼šå›ç¯æ¥å£ï¼Œæœ¬åœ°é€šä¿¡
<span class="hljs-bullet">-</span> docker0, br-<span class="hljs-emphasis">*ï¼šDocker ç½‘æ¡¥
- veth*</span>ï¼šå®¹å™¨è™šæ‹Ÿç½‘å¡

åªç›‘æ§ç‰©ç†ç½‘å¡ï¼š
<span class="hljs-bullet">-</span> eth0, eth1ï¼šä¼ ç»Ÿå‘½å
<span class="hljs-bullet">-</span> ens<span class="hljs-emphasis">*, enp*</span>ï¼šsystemd å‘½å
<span class="hljs-bullet">-</span> bond<span class="hljs-emphasis">*ï¼šç½‘å¡ç»‘å®š
</span></code></pre>
<p><strong>æ”¹è¿›ç‚¹ï¼š</strong></p>
<ul>
<li>ç›¸å¯¹é˜ˆå€¼ï¼ˆå¸¦å®½çš„ 80%ï¼‰è€Œä¸æ˜¯ç»å¯¹å€¼</li>
<li>å…³æ³¨é”™è¯¯ç‡ï¼Œä¸åªæ˜¯æµé‡</li>
<li>é”™è¯¯ç‡ 0.1% å¾ˆå°ï¼Œä½†å¯èƒ½æ˜¯ç¡¬ä»¶é—®é¢˜çš„ä¿¡å·</li>
</ul>
<p><strong>åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs">åœºæ™¯ 1ï¼šæµé‡é«˜ï¼Œé”™è¯¯ç‡æ­£å¸¸
â†’ ä¸šåŠ¡æ­£å¸¸ç¹å¿™ï¼Œæ— éœ€å‘Šè­¦

åœºæ™¯ 2ï¼šæµé‡æ­£å¸¸ï¼Œé”™è¯¯ç‡é«˜
â†’ ç½‘å¡/äº¤æ¢æœºæœ‰é—®é¢˜ï¼Œéœ€è¦æ’æŸ¥ç¡¬ä»¶

åœºæ™¯ 3ï¼šæµé‡é«˜ï¼Œé”™è¯¯ç‡ä¹Ÿé«˜
â†’ å¯èƒ½æ˜¯ DDoS æ”»å‡»æˆ–ç½‘ç»œæ•…éšœ
</code></pre>
<hr/>
<h2 data-id="heading-17">6. å‘Šè­¦è§„åˆ™è®¾è®¡æ–¹æ³•è®º</h2>
<p>åŸºäºä¸Šé¢çš„æ¡ˆä¾‹ï¼Œå¯ä»¥æ€»ç»“å‡ºå‘Šè­¦è§„åˆ™è®¾è®¡çš„ä¸‰ä¸ªç»´åº¦ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    A[å‘Šè­¦è§„åˆ™è®¾è®¡] --&gt; B[æ—¶é—´ç»´åº¦]
    A --&gt; C[ä¸¥é‡ç¨‹åº¦]
    A --&gt; D[ä¸šåŠ¡ä¸Šä¸‹æ–‡]
    
    B --&gt; E[è¯„ä¼°çª—å£: 5m/15m&lt;br/&gt;å¹³æ»‘æŠ–åŠ¨]
    B --&gt; F[æŒç»­æ—¶é•¿: for 10m&lt;br/&gt;è¿‡æ»¤æ¯›åˆº]
    
    C --&gt; G[P0: æœåŠ¡ä¸å¯ç”¨&lt;br/&gt;ç«‹å³å¤„ç†]
    C --&gt; H[P1: æ€§èƒ½ä¸‹é™&lt;br/&gt;1å°æ—¶å†…]
    C --&gt; I[P2: èµ„æºç´§å¼ &lt;br/&gt;å½“å¤©å¤„ç†]
    
    D --&gt; J[åŒºåˆ†åœºæ™¯&lt;br/&gt;ç”Ÿäº§/æµ‹è¯•]
    D --&gt; K[å…³è”æŒ‡æ ‡&lt;br/&gt;å¤šç»´åº¦åˆ¤æ–­]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffcccc
    style D fill:#ccffcc
</code></pre>
<h3 data-id="heading-18">6.1 æ—¶é—´ç»´åº¦</h3>
<p><strong>è¯„ä¼°çª—å£ <code>[5m]</code>ï¼š</strong></p>
<ul>
<li>ä½œç”¨ï¼šå¹³æ»‘ 15 ç§’æŠ“å–é—´éš”çš„æŠ–åŠ¨</li>
<li>é€‰æ‹©ï¼šCPU/å†…å­˜ç”¨ 5mï¼Œç£ç›˜ç”¨ 6hï¼ˆå˜åŒ–æ…¢ï¼‰</li>
</ul>
<p><strong>æŒç»­æ—¶é•¿ <code>for: 10m</code>ï¼š</strong></p>
<ul>
<li>ä½œç”¨ï¼šè¿‡æ»¤çŸ­æš‚å³°å€¼</li>
<li>é€‰æ‹©ï¼šCPU ç”¨ 10mï¼Œç£ç›˜ç”¨ 1hï¼ˆä¸éœ€è¦é‚£ä¹ˆæ•æ„Ÿï¼‰</li>
</ul>
<h3 data-id="heading-19">6.2 ä¸¥é‡ç¨‹åº¦</h3>
<p><strong>ä¸‰ä¸ªçº§åˆ«ï¼š</strong></p>





























<table><thead><tr><th>çº§åˆ«</th><th>å«ä¹‰</th><th>å“åº”æ—¶é—´</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>P0</td><td>æœåŠ¡ä¸å¯ç”¨</td><td>ç«‹å³</td><td>ç£ç›˜æ»¡ã€OOM</td></tr><tr><td>P1</td><td>æ€§èƒ½ä¸‹é™</td><td>1 å°æ—¶å†…</td><td>CPU 95%ã€å†…å­˜ 95%</td></tr><tr><td>P2</td><td>èµ„æºç´§å¼ </td><td>å½“å¤©</td><td>CPU 85%ã€ç£ç›˜ 80%</td></tr></tbody></table>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li>P0 çš„ <code>for</code> æ›´çŸ­ï¼ˆ5mï¼‰ï¼Œä¸èƒ½ç­‰å¤ªä¹…</li>
<li>P2 çš„ <code>for</code> æ›´é•¿ï¼ˆ30mï¼‰ï¼Œé¿å…è¯¯æŠ¥</li>
</ul>
<h3 data-id="heading-20">6.3 ä¸šåŠ¡ä¸Šä¸‹æ–‡</h3>
<p><strong>åŒºåˆ†åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql"># ç”Ÿäº§ç¯å¢ƒ 90% å‘Šè­¦
cpu_usage{env="prod"} &gt; 0.9

# æµ‹è¯•ç¯å¢ƒ 95% å‘Šè­¦ï¼ˆæ›´å®½æ¾ï¼‰
cpu_usage{env="test"} &gt; 0.95
</code></pre>
<p><strong>å…³è”æŒ‡æ ‡ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql"># CPU é«˜ + iowait é«˜ â†’ å¯èƒ½æ˜¯ç£ç›˜æ…¢
cpu_usage &gt; 0.9 and cpu_iowait &gt; 0.2

# CPU é«˜ + ç½‘ç»œæµé‡é«˜ â†’ å¯èƒ½æ˜¯ç½‘ç»œå¤„ç†
cpu_usage &gt; 0.9 and network_traffic &gt; 100MB/s
</code></pre>
<p>è¿™å°±æ˜¯"å› åœ°åˆ¶å®œ"çš„ä»·å€¼ï¼šä¸åŒåœºæ™¯ç”¨ä¸åŒè§„åˆ™ï¼Œä¸èƒ½ä¸€åˆ€åˆ‡ã€‚</p>
<hr/>
<h2 data-id="heading-21">7. å¥½çš„å‘Šè­¦ç³»ç»Ÿåº”è¯¥è§£å†³ä»€ä¹ˆé—®é¢˜</h2>
<p>æœ‰äº†è§„åˆ™ï¼Œè¿˜éœ€è¦ä¸€ä¸ªå¼•æ“æ¥æ‰§è¡Œã€‚å¥½çš„å‘Šè­¦ç³»ç»Ÿåº”è¯¥è§£å†³è¿™äº›é—®é¢˜ï¼š</p>
<h3 data-id="heading-22">7.1 Fingerprintï¼šå‘Šè­¦å®ä¾‹çš„å”¯ä¸€æ ‡è¯†</h3>
<p>åŒä¸€ä¸ªè§„åˆ™å¯èƒ½å‘½ä¸­å¤šä¸ªå®ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">è§„åˆ™: CPU ä½¿ç”¨ç‡ &gt; 90%

å‘½ä¸­:
- {<span class="hljs-attr">instance</span>=<span class="hljs-string">"server-01"</span>, env=<span class="hljs-string">"prod"</span>} â†’ Fingerprint = <span class="hljs-string">"abc123"</span>
- {<span class="hljs-attr">instance</span>=<span class="hljs-string">"server-02"</span>, env=<span class="hljs-string">"prod"</span>} â†’ Fingerprint = <span class="hljs-string">"def456"</span>
</code></pre>
<p><strong>Fingerprint = hash(rule_id + labels)</strong></p>
<p>æ¯ä¸ª Fingerprint æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å‘Šè­¦ï¼Œéœ€è¦å•ç‹¬è¿½è¸ªï¼š</p>
<ul>
<li>ä»€ä¹ˆæ—¶å€™å¼€å§‹çš„ï¼Ÿ</li>
<li>è§¦å‘äº†å‡ æ¬¡ï¼Ÿ</li>
<li>ç°åœ¨çŠ¶æ€å¦‚ä½•ï¼Ÿ</li>
</ul>
<h3 data-id="heading-23">7.2 é˜²æŠ–åŠ¨ï¼šé¿å…å‘Šè­¦é£æš´</h3>
<p><strong>ä¸¤å±‚é˜²æŠ–ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[é¦–æ¬¡å‘½ä¸­] --&gt; B[pending&lt;br/&gt;è§‚å¯ŸæœŸ]
    B --&gt; C{æŒç»­ &gt;= for?}
    C --&gt;|æ˜¯| D[firing&lt;br/&gt;ç¡®è®¤å‘Šè­¦]
    C --&gt;|å¦| A
    D --&gt; E{5åˆ†é’Ÿå†…é‡å¤?}
    E --&gt;|æ˜¯| F[è·³è¿‡å¤„ç†]
    E --&gt;|å¦| G[å†™åº“/é€šçŸ¥]
    
    style B fill:#fff4e1
    style D fill:#ffcccc
    style F fill:#cccccc
    style G fill:#ccffcc
</code></pre>
<p><strong>ç¬¬ä¸€å±‚ï¼šfor_durationï¼ˆè§„åˆ™å±‚ï¼‰</strong></p>
<ul>
<li>æŒç»­ 10 åˆ†é’Ÿæ‰ä» pending è½¬ä¸º firing</li>
<li>è¿‡æ»¤çŸ­æš‚æ¯›åˆº</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šæ—¶é—´çª—å£å»é‡ï¼ˆæ¶ˆè´¹å±‚ï¼‰</strong></p>
<ul>
<li>5 åˆ†é’Ÿå†…åŒä¸€å‘Šè­¦åªå¤„ç†ä¸€æ¬¡</li>
<li>é¿å…é¢‘ç¹å†™åº“å’Œé€šçŸ¥</li>
</ul>
<h3 data-id="heading-24">7.3 å¯æ‰©å±•ï¼šæ’ä»¶åŒ–æ•°æ®æº</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[å‘Šè­¦å¼•æ“] --&gt; B[Prometheus&lt;br/&gt;æŒ‡æ ‡]
    A --&gt; C[æ—¥å¿—æ‰«æ&lt;br/&gt;å…³é”®å­—]
    A --&gt; D[SQL æŸ¥è¯¢&lt;br/&gt;æ•°æ®åº“]
    A --&gt; E[é»‘ç›’æ¢æµ‹&lt;br/&gt;HTTP/TCP]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#ffcccc
    style E fill:#ccffcc
</code></pre>
<p>ä¸åªæ˜¯ Prometheus æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥æ‰©å±•ï¼š</p>
<ul>
<li>æ—¥å¿—å…³é”®å­—ï¼ˆå¦‚"OutOfMemoryError"ï¼‰</li>
<li>SQL è§„åˆ™ï¼ˆå¦‚"è¶…æ—¶è®¢å• &gt; 100"ï¼‰</li>
<li>é»‘ç›’æ¢æµ‹ï¼ˆå¦‚"API 5xx é”™è¯¯"ï¼‰</li>
</ul>
<h3 data-id="heading-25">7.4 é™é»˜ç®¡ç†ï¼šè®¡åˆ’æ€§ç»´æŠ¤</h3>
<p><strong>åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">æ™šä¸Š <span class="hljs-number">22</span>:<span class="hljs-number">00</span>-<span class="hljs-number">23</span>:<span class="hljs-number">00</span> å‘å¸ƒæ–°ç‰ˆæœ¬
â†’ æœåŠ¡ä¼šé‡å¯
â†’ CPU ä¼šçŸ­æš‚ <span class="hljs-number">100</span><span class="hljs-comment">%</span>
â†’ ä¸åº”è¯¥å‘Šè­¦
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šæ—¶é—´çª—å£é™é»˜</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">é™é»˜è§„åˆ™:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">"å‘å¸ƒçª—å£"</span>
  <span class="hljs-attr">start:</span> <span class="hljs-string">"22:00"</span>
  <span class="hljs-attr">end:</span> <span class="hljs-string">"23:00"</span>
  <span class="hljs-attr">match:</span>
    <span class="hljs-attr">env:</span> <span class="hljs-string">"prod"</span>
    <span class="hljs-attr">service:</span> <span class="hljs-string">"api"</span>
</code></pre>
<p>åœ¨å‘å¸ƒçª—å£å†…ï¼ŒåŒ¹é…çš„å‘Šè­¦è‡ªåŠ¨é™é»˜ï¼Œä¸å‘é€šçŸ¥ã€‚</p>
<h3 data-id="heading-26">7.5 å‘Šè­¦å†å²ï¼šå¯è¿½æº¯å’Œåˆ†æ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å†å²å‘Šè­¦è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> history_alerts (
  fingerprint <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>),
  rule_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),
  start_at DATETIME,
  end_at DATETIME,
  duration <span class="hljs-type">INT</span>,
  trigger_count <span class="hljs-type">INT</span>
);
</code></pre>
<p><strong>ä»·å€¼ï¼š</strong></p>
<ul>
<li>æŸ¥çœ‹æŸå°æœåŠ¡å™¨è¿‡å»ä¸€å‘¨çš„å‘Šè­¦æ¬¡æ•°</li>
<li>åˆ†æå“ªäº›è§„åˆ™è¯¯æŠ¥ç‡é«˜</li>
<li>è®¡ç®—å¹³å‡æ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰</li>
</ul>
<p>å‘Šè­¦å†å²ä¸åªæ˜¯è®°å½•ï¼Œæ›´æ˜¯æŒç»­æ”¹è¿›çš„åŸºç¡€ã€‚æ²¡æœ‰æ•°æ®å°±æ²¡æœ‰ä¼˜åŒ–ï¼Œå¥½çš„ç³»ç»Ÿè¦èƒ½è‡ªæˆ‘è¿›åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-27">8. æ€»ç»“</h2>
<h3 data-id="heading-28">8.1 ä»æŒ‡æ ‡åˆ°å‘Šè­¦çš„æ ¸å¿ƒæ€æƒ³</h3>
<p><strong>ä¸æ˜¯ç®€å•è®¾é˜ˆå€¼ï¼Œè€Œæ˜¯ï¼š</strong></p>
<ol>
<li>
<p><strong>ç†è§£æŒ‡æ ‡çš„æœ¬è´¨</strong></p>
<ul>
<li>CPU æ˜¯ç´¯è®¡æ—¶é—´ï¼Œè¦ç”¨ rate() è½¬æˆä½¿ç”¨ç‡</li>
<li>å†…å­˜è¦ç”¨ MemAvailableï¼Œä¸æ˜¯ MemFree</li>
<li>ç£ç›˜è¦çœ‹è¶‹åŠ¿ï¼Œä¸åªçœ‹å½“å‰å€¼</li>
</ul>
</li>
<li>
<p><strong>åŠ ä¸Šæ—¶é—´ç»´åº¦</strong></p>
<ul>
<li>è¯„ä¼°çª—å£ <code>[5m]</code> å¹³æ»‘æŠ–åŠ¨</li>
<li>æŒç»­æ—¶é•¿ <code>for: 10m</code> è¿‡æ»¤æ¯›åˆº</li>
</ul>
</li>
<li>
<p><strong>è€ƒè™‘ä¸šåŠ¡ä¸Šä¸‹æ–‡</strong></p>
<ul>
<li>åŒºåˆ†ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒ</li>
<li>å…³è”å¤šä¸ªæŒ‡æ ‡ï¼ˆCPU + iowaitï¼‰</li>
<li>é¢„æµ‹æœªæ¥ï¼ˆpredict_linearï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-29">8.2 å¥½çš„å‘Šè­¦è§„åˆ™é•¿ä»€ä¹ˆæ ·</h3>






























<table><thead><tr><th>ç»´åº¦</th><th>åè§„åˆ™</th><th>å¥½è§„åˆ™</th></tr></thead><tbody><tr><td><strong>é˜ˆå€¼</strong></td><td>CPU &gt; 80%</td><td>CPU &gt; 90%ï¼Œfor: 10m</td></tr><tr><td><strong>æŒ‡æ ‡</strong></td><td>åªçœ‹ä¸€ä¸ªæŒ‡æ ‡</td><td>å…³è”å¤šä¸ªæŒ‡æ ‡</td></tr><tr><td><strong>æ—¶é—´</strong></td><td>åªçœ‹å½“å‰å€¼</td><td>çœ‹è¶‹åŠ¿ï¼ˆpredict_linearï¼‰</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡</strong></td><td>ä¸€åˆ€åˆ‡</td><td>åŒºåˆ†åœºæ™¯ï¼ˆç”Ÿäº§/æµ‹è¯•ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-30">8.3 å¥½çš„å‘Šè­¦ç³»ç»Ÿè§£å†³ä»€ä¹ˆé—®é¢˜</h3>
<p><strong>äº”ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>Fingerprint</strong> â€”â€” æ¯ä¸ªå‘Šè­¦å®ä¾‹æœ‰å”¯ä¸€æ ‡è¯†</li>
<li><strong>é˜²æŠ–åŠ¨</strong> â€”â€” ä¸¤å±‚è¿‡æ»¤ï¼ˆfor + æ—¶é—´çª—å£å»é‡ï¼‰</li>
<li><strong>å¯æ‰©å±•</strong> â€”â€” ä¸åªæ˜¯ Prometheusï¼Œè¿˜èƒ½æ¥å…¶ä»–æ•°æ®æº</li>
<li><strong>é™é»˜ç®¡ç†</strong> â€”â€” è®¡åˆ’æ€§ç»´æŠ¤ä¸å‘Šè­¦</li>
<li><strong>å†å²è¿½æº¯</strong> â€”â€” å¯åˆ†æã€å¯æ”¹è¿›</li>
</ol>
<h3 data-id="heading-31">8.4 ä¸‰ä¸ªæ ¸å¿ƒæ´å¯Ÿ</h3>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œè®°ä½è¿™ä¸‰ç‚¹å°±å¤Ÿäº†ï¼š</p>
<p><strong>1. å¥½çš„å‘Šè­¦è¦èƒ½å®šä½é—®é¢˜</strong></p>
<p>ä¸åªè¯´"CPU é«˜"ï¼Œè¿˜è¦è¯´"æ˜¯ user é«˜è¿˜æ˜¯ iowait é«˜"ã€‚ä¸åªå‘Šè¯‰ä½ æœ‰é—®é¢˜ï¼Œè¿˜è¦å‘Šè¯‰ä½ ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p><strong>2. å¥½çš„å‘Šè­¦è¦èƒ½é¢„æµ‹æœªæ¥</strong></p>
<p>ç”¨ <code>predict_linear()</code> æå‰ 4 å°æ—¶ã€24 å°æ—¶å‘ç°é£é™©ï¼Œè€Œä¸æ˜¯ç­‰åˆ°çœŸçš„å‡ºé—®é¢˜æ‰çŸ¥é“ã€‚ä»"è¢«åŠ¨åº”å¯¹"å˜æˆ"ä¸»åŠ¨é¢„é˜²"ã€‚</p>
<p><strong>3. å¥½çš„ç³»ç»Ÿè¦èƒ½è‡ªæˆ‘è¿›åŒ–</strong></p>
<p>è®°å½•å‘Šè­¦å†å²ï¼Œåˆ†æè¯¯æŠ¥ç‡ï¼ŒæŒç»­ä¼˜åŒ–è§„åˆ™ã€‚æ²¡æœ‰æ•°æ®å°±æ²¡æœ‰æ”¹è¿›ï¼Œæ²¡æœ‰å†å²å°±æ²¡æœ‰è¿›åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-32">é™„å½•ï¼šå‘Šè­¦è§„åˆ™è‡ªæŸ¥æ¸…å•</h2>
<p>åœ¨ä¸Šçº¿å‘Šè­¦è§„åˆ™å‰ï¼Œç”¨è¿™ä¸ªæ¸…å•æ£€æŸ¥ä¸€éï¼š</p>
<h3 data-id="heading-33">CPU å‘Šè­¦</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº† <code>rate()</code> è€Œä¸æ˜¯ç›´æ¥ç”¨ Counter å€¼ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é˜ˆå€¼æ˜¯å¦ &gt;= 90%ï¼ˆè€Œä¸æ˜¯ 80%ï¼‰ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦è®¾ç½®äº† <code>for: 10m</code> æŒç»­æ—¶é•¿ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åŒºåˆ†äº† user/system/iowait æ¨¡å¼ï¼Ÿ</li>
</ul>
<h3 data-id="heading-34">å†…å­˜å‘Šè­¦</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº† <code>MemAvailable</code> è€Œä¸æ˜¯ <code>MemFree</code>ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç‰ˆæœ¬æ˜¯å¦ &gt;= node_exporter v0.16ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº† <code>predict_linear()</code> é¢„æµ‹æœªæ¥ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> P0 å‘Šè­¦é˜ˆå€¼æ˜¯å¦ &gt;= 95%ï¼Ÿ</li>
</ul>
<h3 data-id="heading-35">ç£ç›˜å‘Šè­¦</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®¹é‡å‘Šè­¦æ˜¯å¦ä½¿ç”¨äº† <code>predict_linear()</code>ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦è¿‡æ»¤äº† <code>/tmp</code>ã€<code>/boot</code> ç­‰ä¸´æ—¶ç›®å½•ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åªç›‘æ§ <code>ext4</code> å’Œ <code>xfs</code> æ–‡ä»¶ç³»ç»Ÿï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åˆ†åˆ«è®¾ç½®äº†å®¹é‡å‘Šè­¦å’Œ IO å‘Šè­¦ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> IO å‘Šè­¦æ˜¯å¦è¿‡æ»¤äº†è®¾å¤‡ç±»å‹ï¼ˆå¦‚ <code>device=~"sd.*|vd.*"</code>ï¼‰ï¼Ÿ</li>
</ul>
<h3 data-id="heading-36">ç½‘ç»œå‘Šè­¦</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦è¿‡æ»¤äº† <code>lo</code>ã€<code>docker0</code>ã€<code>veth*</code> ç­‰è™šæ‹Ÿæ¥å£ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æµé‡å‘Šè­¦æ˜¯å¦ä½¿ç”¨äº†ç›¸å¯¹é˜ˆå€¼ï¼ˆå¸¦å®½çš„ 80%ï¼‰ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åŒæ—¶ç›‘æ§äº†æµé‡å’Œé”™è¯¯ç‡ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é”™è¯¯ç‡é˜ˆå€¼æ˜¯å¦è¶³å¤Ÿæ•æ„Ÿï¼ˆå¦‚ 0.1%ï¼‰ï¼Ÿ</li>
</ul>
<h3 data-id="heading-37">é€šç”¨æ£€æŸ¥</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ‰€æœ‰è§„åˆ™æ˜¯å¦éƒ½è®¾ç½®äº† <code>for</code> æŒç»­æ—¶é•¿ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> P0/P1/P2 çš„ä¸¥é‡çº§åˆ«æ˜¯å¦åˆç†ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦åŒºåˆ†äº†ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è§„åˆ™åç§°æ˜¯å¦æ¸…æ™°è¡¨è¾¾äº†å‘Šè­¦å†…å®¹ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æ·»åŠ äº† <code>annotations</code> æè¿°ï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-38">å¿«é€Ÿå‚è€ƒï¼šæ ¸å¿ƒè§„åˆ™é€ŸæŸ¥</h2>











































































<table><thead><tr><th>ç›‘æ§é¡¹</th><th>æ¨èè§„åˆ™</th><th>é˜ˆå€¼</th><th>for</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>CPU æ•´æœº</strong></td><td><code>(1 - avg(rate(node_cpu_seconds_total{mode="idle"}[5m]))) &gt; 0.9</code></td><td>90%</td><td>10m</td><td>åŸºç¡€å‘Šè­¦</td></tr><tr><td><strong>CPU iowait</strong></td><td><code>avg(rate(node_cpu_seconds_total{mode="iowait"}[5m])) &gt; 0.2</code></td><td>20%</td><td>5m</td><td>ç£ç›˜ç“¶é¢ˆ</td></tr><tr><td><strong>å†…å­˜å¯ç”¨</strong></td><td><code>(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) &gt; 0.9</code></td><td>90%</td><td>5m</td><td>åŸºç¡€å‘Šè­¦</td></tr><tr><td><strong>å†…å­˜é¢„æµ‹</strong></td><td><code>predict_linear(node_memory_MemAvailable_bytes[1h], 4*3600) &lt; 0</code></td><td>-</td><td>10m</td><td>æå‰é¢„è­¦</td></tr><tr><td><strong>ç£ç›˜å®¹é‡</strong></td><td><code>(1 - node_filesystem_avail_bytes / node_filesystem_size_bytes) &gt; 0.9</code></td><td>90%</td><td>10m</td><td>åŸºç¡€å‘Šè­¦</td></tr><tr><td><strong>ç£ç›˜é¢„æµ‹</strong></td><td><code>predict_linear(node_filesystem_avail_bytes[6h], 24*3600) &lt; 0</code></td><td>-</td><td>1h</td><td>æå‰é¢„è­¦</td></tr><tr><td><strong>ç£ç›˜ IO</strong></td><td><code>rate(node_disk_io_time_seconds_total[5m]) &gt; 0.8</code></td><td>80%</td><td>10m</td><td>æ€§èƒ½é—®é¢˜</td></tr><tr><td><strong>ç½‘ç»œæµé‡</strong></td><td><code>rate(node_network_receive_bytes_total[5m]) / node_network_speed_bytes &gt; 0.8</code></td><td>80%</td><td>5m</td><td>å¸¦å®½ç“¶é¢ˆ</td></tr><tr><td><strong>ç½‘ç»œé”™è¯¯</strong></td><td><code>rate(node_network_receive_errs_total[5m]) / rate(node_network_receive_packets_total[5m]) &gt; 0.001</code></td><td>0.1%</td><td>5m</td><td>ç¡¬ä»¶é—®é¢˜</td></tr></tbody></table>
<hr/>
<p><strong>ä» node_exporter çš„æŒ‡æ ‡ï¼Œåˆ°ç”Ÿäº§çº§çš„å‘Šè­¦è§„åˆ™ï¼Œæ ¸å¿ƒæ˜¯ä¸€å¥—è®¾è®¡æ€æƒ³ï¼š</strong></p>
<ul>
<li>ç†è§£æœ¬è´¨ï¼ˆæŒ‡æ ‡çš„å«ä¹‰ï¼‰</li>
<li>åŠ ä¸Šæ—¶é—´ï¼ˆè¯„ä¼°çª—å£ + æŒç»­æ—¶é•¿ï¼‰</li>
<li>ç»“åˆä¸Šä¸‹æ–‡ï¼ˆä¸šåŠ¡åœºæ™¯ + å…³è”æŒ‡æ ‡ï¼‰</li>
<li>æŒç»­è¿­ä»£ï¼ˆè¿½è¸ªå†å² + è´¨é‡æ”¹è¿›ï¼‰</li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ç¯‡æ“ä½œæ‰‹å†Œï¼Œè€Œæ˜¯ä¸€å¥—æ–¹æ³•è®ºã€‚æŒæ¡äº†è¿™å¥—æ€æƒ³ï¼Œä½ å°±èƒ½è®¾è®¡å‡ºé€‚åˆè‡ªå·±ä¸šåŠ¡çš„å‘Šè­¦è§„åˆ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rspack 1.7 å‘å¸ƒï¼šèšç„¦ç¨³å®šæ€§ï¼Œä¸‹ä¸€ç«™ 2.0]]></title>    <link>https://juejin.cn/post/7590684822726557736</link>    <guid>https://juejin.cn/post/7590684822726557736</guid>    <pubDate>2026-01-04T02:48:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590684822726557736" data-draft-id="7590597231708520483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rspack 1.7 å‘å¸ƒï¼šèšç„¦ç¨³å®šæ€§ï¼Œä¸‹ä¸€ç«™ 2.0"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-04T02:48:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WebInfra"/> <meta itemprop="url" content="https://juejin.cn/user/3368492743792695"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rspack 1.7 å‘å¸ƒï¼šèšç„¦ç¨³å®šæ€§ï¼Œä¸‹ä¸€ç«™ 2.0
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6930945479362478092/posts" data-v-d326b38e=""><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/498f2ad5f4cf43dd9093b71c5648f50f~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6930945479362478092/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="ByteDance Web Infra" class="title" data-v-d326b38e="">ByteDance Web Infra</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2026-01-04T02:48:04.000Z" title="Sun Jan 04 2026 02:48:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2026-01-04
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                12
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»8åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              å‰ç«¯ @å­—èŠ‚è·³åŠ¨  Web Infra
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed46d882c248414288065090059dfaac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2ViSW5mcmE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100229&amp;x-signature=HXGQdgrxwXnCvwVja%2Bk70rff%2BzA%3D" alt="Rspack 1.7" loading="lazy"/></p>
<p>æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Rspack 1.7 å·²æ­£å¼å‘å¸ƒï¼è¿™æ˜¯ Rspack 1.x çš„æœ€åä¸€ä¸ª minor ç‰ˆæœ¬ï¼Œä¸»è¦èšç„¦äºç°æœ‰åŠŸèƒ½çš„ç¨³å®šæ€§æ”¹è¿›ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¾ˆå¿«å¸¦æ¥ Rspack 2.0ã€‚</p>
<p>å€¼å¾—å…³æ³¨çš„å˜æ›´å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ–°ç‰¹æ€§
<ul>
<li>SWC æ’ä»¶å…¼å®¹æ€§æå‡</li>
<li>æ”¯æŒ Import Bytes</li>
<li>Lazy compilation</li>
<li>å®éªŒç‰¹æ€§ç¨³å®šåŒ–</li>
</ul>
</li>
<li>Rstack è¿›å±•
<ul>
<li>Rsbuild 1.7</li>
<li>Rsdoctor 1.4</li>
<li>Rslib 0.19</li>
<li>Rstest 0.7</li>
<li>Rspress 2.0 RC</li>
</ul>
</li>
</ul>
<h2 data-id="heading-0">æ–°ç‰¹æ€§</h2>
<h3 data-id="heading-1">SWC æ’ä»¶å…¼å®¹æ€§æå‡</h3>
<p>åœ¨è¿‡å»çš„ç‰ˆæœ¬ä¸­ï¼ŒSWC Wasm æ’ä»¶çš„å‡çº§æˆæœ¬ä¸€ç›´è¾ƒé«˜ã€‚è¿™æ˜¯ç”±äº SWC çš„ AST ç»“æ„ä¼šéšç€ç‰ˆæœ¬æ¼”è¿›å‘ç”Ÿå˜åŒ–ï¼Œå·²æœ‰æ’ä»¶åœ¨ SWC å‡çº§åå¯èƒ½æ— æ³•ç»§ç»­å·¥ä½œï¼Œæ’ä»¶ä½œè€…éœ€è¦è¿›è¡Œé€‚é…ï¼Œæ’ä»¶ä½¿ç”¨è€…ä¹Ÿéœ€è¦åŒæ­¥å‡çº§ä¾èµ–ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå½±å“äº†é¡¹ç›®çš„ç¨³å®šæ€§å’Œå‡çº§ä½“éªŒã€‚</p>
<p>ä¸ºç¼“è§£è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å‘ SWC ç¤¾åŒºè´¡çŒ®äº†ä¸€ç³»åˆ— <a href="https://link.juejin.cn?target=https%3A%2F%2Fswc.rs%2Fdocs%2Fplugin%2Fecmascript%2Fcompatibility" target="_blank" title="https://swc.rs/docs/plugin/ecmascript/compatibility" ref="nofollow noopener noreferrer">å…¼å®¹æ€§æ”¹è¿›</a>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä½¿ç”¨è‡ªæè¿°å¼çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rfc-editor.org%2Frfc%2Frfc8949.html" target="_blank" title="https://www.rfc-editor.org/rfc/rfc8949.html" ref="nofollow noopener noreferrer">cbor</a> åºåˆ—åŒ–æ–¹æ¡ˆï¼Œå–ä»£åŸå…ˆå¯¹ç‰ˆæœ¬æ•æ„Ÿçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Frkyv.org%2F" target="_blank" title="https://rkyv.org/" ref="nofollow noopener noreferrer">rkyv</a>ï¼Œä½¿ Wasm æ’ä»¶èƒ½æ›´å¥½åœ°é€‚åº” AST ç»“æ„çš„å˜æ›´</li>
<li>ä¸º AST ä¸­çš„æšä¸¾ç±»å‹å¼•å…¥ <code>Unknown</code> å˜ä½“ï¼Œä»è€Œåœ¨é‡åˆ°æ–°å­—æ®µæˆ–æ–°èŠ‚ç‚¹æ—¶æå‡å®¹é”™èƒ½åŠ›</li>
</ul>
<p>åœ¨ Rspack 1.7 ä¸­ï¼Œæˆ‘ä»¬å‡çº§äº†ä½¿ç”¨çš„ SWC ç‰ˆæœ¬å¹¶æ”¯æŒäº†ä¸Šè¿°æ–¹æ¡ˆã€‚åœ¨æ­¤ä¹‹åï¼Œå¤šæ•°åœºæ™¯ä¸‹ SWC çš„å‡çº§å°†ä¸ä¼šå½±å“åŸºäºæ—§ç‰ˆæœ¬ SWC æ„å»ºçš„æ’ä»¶çš„æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>ç›®å‰ï¼Œè¯¥æ–¹æ¡ˆå·²åœ¨å¤§éƒ¨åˆ†æµè¡Œçš„ SWC Wasm æ’ä»¶ä¸­å®Œæˆæ¥å…¥ã€‚å¦‚æœä½ æ˜¯ SWC Wasm æ’ä»¶ä½œè€…ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fswc.rs%2Fdocs%2Fplugin%2Fecmascript%2Fcompatibility%23make-your-plugin-compatible" target="_blank" title="https://swc.rs/docs/plugin/ecmascript/compatibility#make-your-plugin-compatible" ref="nofollow noopener noreferrer">å®˜æ–¹æŒ‡å—</a>ï¼Œæ¥å…¥è¯¥æ–¹æ¡ˆï¼Œä»¥é™ä½åç»­ç‰ˆæœ¬æ¼”è¿›ä¸­çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<h3 data-id="heading-2">æ”¯æŒ Import Bytes</h3>
<p>Rspack ç°å·²åŸç”Ÿæ”¯æŒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposal-import-bytes" target="_blank" title="https://github.com/tc39/proposal-import-bytes" ref="nofollow noopener noreferrer">Import Bytes</a> ææ¡ˆï¼Œå¯ä»¥å°†é™æ€èµ„æºä½œä¸º <code>Uint8Array</code> å¯¼å…¥ï¼Œå¹¶é€šè¿‡ <code>TextDecoder</code> è§£ç ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é™æ€å¯¼å…¥</span>
<span class="hljs-keyword">import</span> fileBytes <span class="hljs-keyword">from</span> <span class="hljs-string">'./file.bin'</span> <span class="hljs-keyword">with</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">'bytes'</span> };
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">const</span> text = decoder.<span class="hljs-title function_">decode</span>(fileBytes);

<span class="hljs-comment">// åŠ¨æ€å¯¼å…¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./file.bin'</span>, { <span class="hljs-attr">with</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'bytes'</span> } });
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">const</span> text = decoder.<span class="hljs-title function_">decode</span>(<span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>);
</code></pre>
<h3 data-id="heading-3">Lazy compilation</h3>
<p>åœ¨ Rspack 1.5 ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº† <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fguide%2Ffeatures%2Flazy-compilation" target="_blank" title="http://rspack.rs/zh/guide/features/lazy-compilation" ref="nofollow noopener noreferrer">Lazy Compilation</a> ç‰¹æ€§çš„ç¨³å®šåŒ–ï¼Œå¹¶åœ¨ Rsbuild ä¸­é»˜è®¤å¯¹åŠ¨æ€å¯¼å…¥çš„æ¨¡å—å¯ç”¨äº†æŒ‰éœ€ç¼–è¯‘ã€‚</p>
<p>ä» Rspack 1.7 å¼€å§‹ï¼ŒRspack CLI åœ¨æ„å»º web åº”ç”¨æ—¶ä¹Ÿå°†é»˜è®¤å¯¹åŠ¨æ€å¯¼å…¥çš„æ¨¡å—å¯ç”¨æŒ‰éœ€ç¼–è¯‘ã€‚è¿™ä¸€æ”¹è¿›å¯ä»¥å‡å°‘é¦–æ¬¡æ„å»ºçš„æ¨¡å—æ•°é‡ï¼Œä»è€ŒåŠ å¿«å¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨é€Ÿåº¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rspack.config.mjs</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// å½“å‰é»˜è®¤é…ç½®</span>
  <span class="hljs-attr">lazyCompilation</span>: {
    <span class="hljs-attr">imports</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">entries</span>: <span class="hljs-literal">false</span>,
  },
};
</code></pre>
<p>å¦‚æœä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä¾‹å¦‚éœ€è¦è°ƒè¯•å®Œæ•´æ„å»ºçš„äº§ç‰©ï¼Œæˆ–åˆ†æå®Œæ•´çš„æ¨¡å—å›¾ï¼Œå¯ä»¥é€šè¿‡å°† <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Flazy-compilation" target="_blank" title="http://rspack.rs/zh/config/lazy-compilation" ref="nofollow noopener noreferrer">lazyCompilation</a> è®¾ç½®ä¸º <code>false</code> æ¥æ˜¾å¼å…³é—­è¯¥åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-4">å®éªŒç‰¹æ€§ç¨³å®šåŒ–</h3>
<p>åœ¨ Rspack 1.7 ä¸­ï¼Œæˆ‘ä»¬ç¨³å®šåŒ–äº†å¤šé¡¹å®éªŒæ€§ç‰¹æ€§ã€‚ä»¥ä¸‹èƒ½åŠ›å·²å®Œæˆç”Ÿäº§éªŒè¯å¹¶è¿›å…¥ç¨³å®šé˜¶æ®µï¼Œç›¸å…³å®éªŒå¼€å…³ä¹Ÿéšä¹‹åºŸå¼ƒï¼Œæˆ–è°ƒæ•´ä¸ºé»˜è®¤è¡Œä¸ºï¼š</p>
<ul>
<li><strong>å¸¸é‡å†…è”ä¼˜åŒ–</strong>ï¼šè¯¥ä¼˜åŒ–å·²æ­£å¼ç¨³å®šï¼Œå¹¶åœ¨ç”Ÿäº§æ„å»ºä¸­é»˜è®¤å¯ç”¨ã€‚
<ul>
<li>åŸæœ‰çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Fdeprecated-options%23experimentsinlineconst" target="_blank" title="http://rspack.rs/zh/config/deprecated-options#experimentsinlineconst" ref="nofollow noopener noreferrer">experiments.inlineConst</a> é€‰é¡¹å·²åºŸå¼ƒ</li>
<li>å¦‚éœ€å…³é—­è¯¥è¡Œä¸ºï¼Œå¯é€šè¿‡ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Foptimization%23optimizationinlineexports" target="_blank" title="http://rspack.rs/zh/config/optimization#optimizationinlineexports" ref="nofollow noopener noreferrer">optimization.inlineExports</a> æ¥æ§åˆ¶</li>
</ul>
</li>
<li><strong>TypeScript enum å†…è”ä¼˜åŒ–</strong>ï¼šè¯¥ä¼˜åŒ–å·²æ­£å¼ç¨³å®šã€‚
<ul>
<li>åŸæœ‰çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Fdeprecated-options%23experimentsinlineenum" target="_blank" title="http://rspack.rs/zh/config/deprecated-options#experimentsinlineenum" ref="nofollow noopener noreferrer">experiments.inlineEnum</a> é€‰é¡¹å·²åºŸå¼ƒ</li>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fguide%2Ffeatures%2Fbuiltin-swc-loader%23collecttypescriptinfoexportedenum" target="_blank" title="http://rspack.rs/zh/guide/features/builtin-swc-loader#collecttypescriptinfoexportedenum" ref="nofollow noopener noreferrer">collectTypeScriptInfo.exportedEnum</a> æ§åˆ¶æ˜¯å¦æ”¶é›†å¯¼å‡ºçš„ <code>enum</code> ä¿¡æ¯</li>
<li>ä½¿ç”¨ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Foptimization%23optimizationinlineexports" target="_blank" title="http://rspack.rs/zh/config/optimization#optimizationinlineexports" ref="nofollow noopener noreferrer">optimization.inlineExports</a> æ¥æ§åˆ¶æ˜¯å¦å†…è” <code>enum</code></li>
</ul>
</li>
<li><strong>ç±»å‹é‡å¯¼å‡ºæ£€æŸ¥</strong>ï¼šè¯¥ä¼˜åŒ–å·²æ­£å¼ç¨³å®šã€‚
<ul>
<li>åŸæœ‰çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fconfig%2Fdeprecated-options%23experimentstypereexportspresence" target="_blank" title="http://rspack.rs/zh/config/deprecated-options#experimentstypereexportspresence" ref="nofollow noopener noreferrer">experiments.typeReexportsPresence</a> é€‰é¡¹å·²åºŸå¼ƒ</li>
</ul>
</li>
</ul>
<blockquote>
<p>å‚è€ƒ <a href="#%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97" title="#%E5%8D%87%E7%BA%A7%E6%8C%87%E5%8D%97">å‡çº§æŒ‡å—</a> äº†è§£å¦‚ä½•è°ƒæ•´ç›¸å…³é…ç½®ã€‚</p>
</blockquote>
<h2 data-id="heading-5">Rstack è¿›å±•</h2>
<h3 data-id="heading-6">Rsbuild 1.7</h3>
<h4 data-id="heading-7">Error overlay æ”¹è¿›</h4>
<p>Rsbuild çš„ error overlay ç°åœ¨æ”¯æŒæ˜¾ç¤º<strong>è¿è¡Œæ—¶é”™è¯¯</strong>ã€‚å½“åº”ç”¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œé”™è¯¯ä¼šç›´æ¥æ¸²æŸ“åˆ° overlay ä¸Šï¼Œå¸®åŠ©ä½ æ›´å¿«å‘ç°å¹¶å®šä½é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1cfbf1e4fd1c4029b52c213460dc60bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2ViSW5mcmE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100229&amp;x-signature=Ojf5PiN2Ido%2FEAtbPzdJFysHq9o%3D" alt="Rsbuild 1.7 Error Overlay" loading="lazy"/></p>
<p>è¯¥åŠŸèƒ½é»˜è®¤å…³é—­ï¼Œå¯é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsbuild.rs%2Fzh%2Fconfig%2Fdev%2Fclient%23overlayruntime" target="_blank" title="https://rsbuild.rs/zh/config/dev/client#overlayruntime" ref="nofollow noopener noreferrer">dev.client.overlay.runtime</a> é€‰é¡¹æŒ‰éœ€å¼€å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rsbuild.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">dev</span>: {
    <span class="hljs-attr">client</span>: {
      <span class="hljs-attr">overlay</span>: {
        <span class="hljs-attr">runtime</span>: <span class="hljs-literal">true</span>,
      },
    },
  },
};
</code></pre>
<h4 data-id="heading-8">äº§ç‰©ä½“ç§¯å¯¹æ¯”</h4>
<p>Rsbuild ç°åœ¨æ”¯æŒè¾“å‡ºäº§ç‰©ä½“ç§¯å¯¹æ¯”ï¼Œç”¨æ¥æŸ¥çœ‹æ„å»ºç»“æœæ˜¯å¦å‘ç”Ÿäº†ä½“ç§¯å˜åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c180bedf361246ada3b8253fe3d007cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2ViSW5mcmE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100229&amp;x-signature=V4ANgnAOucx4677Htqx02%2BRx4iE%3D" alt="Rsbuild 1.7 Print Size Diff" loading="lazy"/></p>
<p>å¼€å¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsbuild.rs%2Fzh%2Fconfig%2Fperformance%2Fprint-file-size%23diff" target="_blank" title="https://rsbuild.rs/zh/config/performance/print-file-size#diff" ref="nofollow noopener noreferrer">performance.printFileSize.diff</a> é€‰é¡¹åï¼ŒRsbuild æ„å»ºå®Œæˆæ—¶ä¼šè®°å½•ä¸€ä»½äº§ç‰©ä½“ç§¯å¿«ç…§ï¼Œåç»­æ„å»ºä¼šè‡ªåŠ¨ä¸ä¸Šä¸€æ¬¡ç»“æœå¯¹æ¯”ï¼Œå¹¶åœ¨æ—¥å¿—ä¸­ç›´æ¥å±•ç¤ºä½“ç§¯å˜åŒ–ã€‚ä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸ªæ–‡ä»¶æ˜¯å˜å¤§è¿˜æ˜¯å˜å°ï¼Œä»¥åŠæ•´ä½“ä½“ç§¯çš„å¢å‡æƒ…å†µï¼Œé€‚åˆåœ¨æ—¥å¸¸å¼€å‘å’Œæ€§èƒ½å›å½’ä¸­å¿«é€Ÿå‘ç°ä½“ç§¯å˜åŒ–ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rsbuild.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">performance</span>: {
    <span class="hljs-attr">printFileSize</span>: {
      <span class="hljs-attr">diff</span>: <span class="hljs-literal">true</span>,
    },
  },
};
</code></pre>
<h4 data-id="heading-9">create-rsbuild æ”¹è¿›</h4>
<p><code>create-rsbuild</code> ç°åœ¨åŒ…å«äº†æ›´å¤šå¼€ç®±å³ç”¨çš„å·¥å…·ã€‚</p>
<p>åœ¨åˆ›å»º Rsbuild é¡¹ç›®æ—¶ï¼Œä½ ç°åœ¨å¯ä»¥é€‰æ‹©è‡ªåŠ¨é›†æˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Frstest.rs%2F" target="_blank" title="https://rstest.rs/" ref="nofollow noopener noreferrer">Rstest</a> ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼Œæˆ–å¯ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstorybook.rsbuild.rs%2F" target="_blank" title="https://storybook.rsbuild.rs/" ref="nofollow noopener noreferrer">Storybook</a> ç”¨äº UI ç»„ä»¶çš„å¼€å‘ä¸è°ƒè¯•ã€‚ç›¸å…³ä¾èµ–å’Œé…ç½®éƒ½ä¼šåœ¨åˆå§‹åŒ–æ—¶ä¸€æ¬¡æ€§å®Œæˆï¼Œå‡å°‘é‡å¤çš„æ‰‹åŠ¨é…ç½®æˆæœ¬ã€‚</p>
<pre><code class="hljs language-text" lang="text">â—†  Select additional tools (Use &lt;space&gt; to select, &lt;enter&gt; to continue)
â”‚  â—¼ Rstest - testing
â”‚  â—» Biome - linting &amp; formatting
â”‚  â—» ESLint - linting
â”‚  â—» Prettier - formatting
â”‚  â—» Storybook - component development
â””
</code></pre>
<h3 data-id="heading-10">Rsdoctor 1.4</h3>
<h4 data-id="heading-11">æ–°çš„ Treemap è§†å›¾</h4>
<p>Rsdoctor 1.4 å¯¹åŸæœ‰çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsdoctor.rs%2Fzh%2Fguide%2Fusage%2Fbundle-size" target="_blank" title="https://rsdoctor.rs/zh/guide/usage/bundle-size" ref="nofollow noopener noreferrer">Treemap</a> è§†å›¾è¿›è¡Œäº†æ”¹è¿›ã€‚æ–°çš„äº¤äº’è®¾è®¡å¯ä»¥å¸®åŠ©ä½ æ›´ç›´è§‚åœ°åˆ†æ bundle çš„æ•´ä½“æ„æˆï¼Œä»¥åŠå„ç±»èµ„æºå’Œæ¨¡å—çš„ä½“ç§¯å æ¯”ã€‚</p>
<p>åœ¨è¯¥è§†å›¾ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æœç´¢å¿«é€Ÿå®šä½åˆ°å…·ä½“çš„æ¨¡å—æˆ–èµ„æºã€‚ç‚¹å‡»æŸä¸ªæ¨¡å—æˆ–èµ„æºåï¼Œè§†å›¾ä¼šè‡ªåŠ¨èšç„¦å¹¶æ”¾å¤§å¯¹åº”åŒºåŸŸã€‚åŒå‡»æ¨¡å—è¿˜å¯ä»¥å±•å¼€å…¶ä¾èµ–é“¾è·¯ï¼Œé€å±‚æŸ¥çœ‹æ¨¡å—ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œä»è€Œæ›´æ¸…æ™°åœ°åˆ†æä½“ç§¯æ¥æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1fceebd3afc46d0827dc1699d22aec2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2ViSW5mcmE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768100229&amp;x-signature=%2BNE1KzKL%2BYXQeFwj7RnlaR7T28M%3D" alt="Rsdoctor Treemap" loading="lazy"/></p>
<h3 data-id="heading-12">Rslib 0.19</h3>
<h4 data-id="heading-13">ESM äº§ç‰©ç¨³å®šåŒ–</h4>
<p>åœ¨æ­¤å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒRslib é€šè¿‡å®éªŒæ€§é…ç½® <a href="https://link.juejin.cn?target=https%3A%2F%2Frslib.rs%2Fzh%2Fconfig%2Flib%2Fexperiments%23experimentsadvancedesm" target="_blank" title="https://rslib.rs/zh/config/lib/experiments#experimentsadvancedesm" ref="nofollow noopener noreferrer">experiments.advancedEsm</a> æ¥å¯ç”¨ Rspack çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fplugins%2Frspack%2Fesm-library-plugin%23esmlibraryplugin" target="_blank" title="http://rspack.rs/zh/plugins/rspack/esm-library-plugin#esmlibraryplugin" ref="nofollow noopener noreferrer">æ–°ç‰ˆ ESM åº“äº§ç‰©</a>ï¼Œç”¨äºæå‡ ESM äº§ç‰©çš„æ•´ä½“è´¨é‡ã€‚ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„éªŒè¯ä¸æ‰“ç£¨ï¼Œè¯¥èƒ½åŠ›ç°å·²å®Œæˆç¨³å®šåŒ–ã€‚</p>
<p>è‡ª Rslib 0.19 èµ·ï¼ŒRslib çš„ bundle æ¨¡å¼å°†é»˜è®¤å¯ç”¨è¯¥ç‰¹æ€§ã€‚å¼€å‘è€…æ— éœ€è¿›è¡Œä»»ä½•é¢å¤–é…ç½®ï¼Œå³å¯ç›´æ¥è·å¾—å¯¹é™æ€åˆ†ææ›´å‹å¥½ã€å¹¶å®Œæ•´æ”¯æŒä»£ç åˆ†å‰²çš„ ESM äº§ç‰©ã€‚</p>
<h4 data-id="heading-14">JavaScript API</h4>
<p>Rslib 0.19 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Frslib.rs%2Fapi%2Fstart" target="_blank" title="https://rslib.rs/api/start" ref="nofollow noopener noreferrer">JavaScript API</a>ï¼Œä½¿å¼€å‘è€…å¯ä»¥åœ¨ JavaScript ä»£ç ä¸­ä»¥ç¼–ç¨‹æ–¹å¼ç›´æ¥è°ƒç”¨ Rslib çš„æ„å»ºèƒ½åŠ›ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createRslib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rslib/core'</span>;

<span class="hljs-comment">// åˆ›å»º Rslib å®ä¾‹</span>
<span class="hljs-keyword">const</span> rslib = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createRslib</span>();
<span class="hljs-comment">// æ„å»ºç”Ÿäº§ç¯å¢ƒè¾“å‡º</span>
<span class="hljs-keyword">await</span> rslib.<span class="hljs-title function_">build</span>();
</code></pre>
<blockquote>
<p>æ›´å¤šä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Frslib.rs%2Fapi%2Fjavascript-api%2Fcore" target="_blank" title="https://rslib.rs/api/javascript-api/core" ref="nofollow noopener noreferrer">API æ–‡æ¡£</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-15">Rstest 0.7</h3>
<h4 data-id="heading-16">é…ç½®é€‚é…å™¨</h4>
<p>Rstest 0.7 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Frstest.rs%2Fzh%2Fconfig%2Ftest%2Fextends" target="_blank" title="https://rstest.rs/zh/config/test/extends" ref="nofollow noopener noreferrer">extends</a> é€‰é¡¹å’Œé€‚é…å™¨æœºåˆ¶ï¼Œç”¨äºç›´æ¥å¤ç”¨ç°æœ‰çš„å·¥å…·æˆ–æ¡†æ¶é…ç½®ã€‚é€‚é…å™¨æ˜¯ä¸€ä¸ªé…ç½®è½¬æ¢å‡½æ•°ï¼Œå¯ä»¥å°†å…¶ä»–å·¥å…·çš„é…ç½®è½¬æ¢ä¸º Rstest çš„é…ç½®ï¼Œä»è€Œé™ä½ Rstest çš„é›†æˆæˆæœ¬ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä½¿ç”¨ Rslib çš„åº“é¡¹ç›®ä¸­ï¼Œé€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40rstest%2Fadapter-rslib" target="_blank" title="https://www.npmjs.com/package/@rstest/adapter-rslib" ref="nofollow noopener noreferrer">@rstest/adapter-rslib</a> é€‚é…å™¨ï¼Œä½ å¯ä»¥ç›´æ¥å¤ç”¨å·²æœ‰çš„ Rslib é…ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rstest.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rstest/core'</span>;
<span class="hljs-keyword">import</span> { withRslibConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rstest/adapter-rslib'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// è‡ªåŠ¨è¯»å– rslib.config.ts å¹¶è½¬æ¢ä¸º Rstest é…ç½®</span>
  <span class="hljs-attr">extends</span>: <span class="hljs-title function_">withRslibConfig</span>(),
  <span class="hljs-comment">// å…¶ä»–æµ‹è¯•é…ç½®</span>
  <span class="hljs-attr">coverage</span>: {
    <span class="hljs-comment">// ...</span>
  },
});
</code></pre>
<p>é€‚é…å™¨åˆ™è´Ÿè´£å°†ä¸åŒå·¥å…·çš„é…ç½®è½¬æ¢ä¸º Rstest çš„é…ç½®ï¼ˆå¦‚ <code>define</code>ã€<code>alias</code> ç­‰ï¼‰ï¼Œè€Œ <code>extends</code> åˆ™è´Ÿè´£å°†è½¬æ¢åçš„é…ç½®ä¸ Rstest çš„é…ç½®è¿›è¡Œåˆå¹¶ã€‚é€šè¿‡äºŒè€…çš„é…åˆï¼Œä»»ä½•åŸºäº Rspack çš„å·¥å…·æˆ–æ¡†æ¶ï¼Œéƒ½å¯ä»¥ä»¥æœ€å°æˆæœ¬ä¸ Rstest é›†æˆã€‚</p>
<p>ç›®å‰ <code>@rstest/adapter-rslib</code> é€‚é…å™¨å·²æ­£å¼å‘å¸ƒï¼Œåç»­æˆ‘ä»¬è¿˜å°†æ¨å‡ºæ›´å¤šé€‚é…å™¨ï¼Œä»¥å¯¹æ¥ Rstack çš„å„ä¸ªå·¥å…·ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Frstest.rs%2Fzh%2Fguide%2Fintegration%2Fadapters" target="_blank" title="https://rstest.rs/zh/guide/integration/adapters" ref="nofollow noopener noreferrer">Rstest - é€‚é…å™¨</a> æ¥ç¼–å†™è‡ªå®šä¹‰çš„é€‚é…å™¨ã€‚</p>
<h4 data-id="heading-17">æµ‹è¯•åé¦ˆä¼˜åŒ–</h4>
<p>Rstest é’ˆå¯¹æœ¬åœ°å¼€å‘ä¸è°ƒè¯•åœºæ™¯è¿›è¡Œäº†å¤šé¡¹ä½“éªŒä¼˜åŒ–ï¼Œè®©æµ‹è¯•åé¦ˆæ›´åŠ ç›´è§‚ï¼š</p>
<ul>
<li>
<p><strong>æ›´æ—©å‘ç°å¡ä½çš„æµ‹è¯•:</strong> Rstest ç°å·²æ”¯æŒåœ¨æœ¬åœ°è¿è¡Œæ—¶æ ‡è®°é•¿æ—¶é—´æœªå®Œæˆçš„æµ‹è¯•ç”¨ä¾‹ã€‚å½“æµ‹è¯•è¿‡ç¨‹å˜æ…¢æ—¶ï¼Œä½ å¯ä»¥ç›´æ¥çœ‹åˆ°æ˜¯å“ªä¸ªç”¨ä¾‹æ­£åœ¨æ‰§è¡Œã€å¯èƒ½å·²ç»å¡ä½ï¼Œè€Œä¸å†åªèƒ½ç›¯ç€ç»ˆç«¯ç­‰å¾…æ•´ä¸ªæµ‹è¯•è¶…æ—¶ç»“æŸã€‚</p>
</li>
<li>
<p><strong>æ›´æ¸…æ™°çš„è¶…æ—¶å¤±è´¥åé¦ˆ:</strong> å½“æµ‹è¯•å› è¶…æ—¶å¤±è´¥æ—¶ï¼ŒRstest ç°åœ¨ä¼šåœ¨é”™è¯¯ä¿¡æ¯ä¸­å±•ç¤ºå·²æ‰§è¡Œçš„æ–­è¨€æ•°é‡ã€‚è¿™èƒ½å¸®åŠ©ä½ å¿«é€Ÿåˆ¤æ–­æµ‹è¯•æ˜¯å¦å·²ç»éƒ¨åˆ†æ‰§è¡Œï¼Œæˆ–æ˜¯å¡åœ¨äº†æŸä¸ªå¼‚æ­¥é€»è¾‘ä¸­ï¼Œä»è€Œæ›´å¿«å®šä½é—®é¢˜ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">Rspress 2.0 RC</h3>
<h4 data-id="heading-19">SSG-MD ç‰¹æ€§</h4>
<p>åœ¨åŸºäº React åŠ¨æ€æ¸²æŸ“çš„å‰ç«¯æ¡†æ¶ä¸­ï¼Œå¾€å¾€å­˜åœ¨é™æ€ä¿¡æ¯éš¾ä»¥æå–çš„é—®é¢˜ï¼ŒRspress ä¹Ÿé‡åˆ°äº†ç›¸åŒçš„é—®é¢˜ã€‚Rspress å…è®¸ç”¨æˆ·é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.rspress.rs%2Fzh%2Fguide%2Fuse-mdx%2Fcomponents" target="_blank" title="https://v2.rspress.rs/zh/guide/use-mdx/components" ref="nofollow noopener noreferrer">MDX ç‰‡æ®µ</a>ã€React ç»„ä»¶ã€Hooks ä»¥åŠ TSX è·¯ç”±ç­‰åŠ¨æ€ç‰¹æ€§æ¥å¢å¼ºæ–‡æ¡£è¡¨ç°åŠ›ã€‚ä½†è¿™äº›åŠ¨æ€å†…å®¹åœ¨è½¬æ¢ä¸º Markdown æ–‡æœ¬æ—¶ä¼šé¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ç›´æ¥å°† MDX è¾“å…¥ç»™ AI ä¼šåŒ…å«å¤§é‡ä»£ç è¯­æ³•å™ªéŸ³ï¼Œå¹¶ä¸¢å¤± React ç»„ä»¶å†…å®¹</li>
<li>å°† SSG ç”Ÿæˆçš„ HTML è½¬ä¸º Markdown å¾€å¾€æ•ˆæœä¸ä½³ï¼Œä¿¡æ¯è´¨é‡éš¾ä»¥ä¿è¯</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRspress 2.0 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.rspress.rs%2Fzh%2Fguide%2Fbasic%2Fssg-md" target="_blank" title="https://v2.rspress.rs/zh/guide/basic/ssg-md" ref="nofollow noopener noreferrer">SSG-MD</a> ç‰¹æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„åŠŸèƒ½ï¼Œè§åçŸ¥æ„ï¼Œä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.rspress.rs%2Fzh%2Fguide%2Fbasic%2Fssg" target="_blank" title="https://v2.rspress.rs/zh/guide/basic/ssg" ref="nofollow noopener noreferrer">é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰</a> å”¯ä¸€çš„ä¸åŒåœ¨äºå®ƒå°†ä½ çš„é¡µé¢æ¸²æŸ“ä¸º Markdown æ–‡ä»¶ï¼Œè€Œé HTML æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fllmstxt.org%2F" target="_blank" title="https://llmstxt.org/" ref="nofollow noopener noreferrer">llms.txt</a> åŠ llms-full.txt ç›¸å…³æ–‡ä»¶ã€‚ç›¸æ¯”ä¸å°† HTML è½¬åŒ–ä¸º Markdown ç­‰ä¼ ç»Ÿæ–¹å¼ï¼ŒSSG-MD åœ¨æ¸²æŸ“æœŸé—´æ‹¥æœ‰æ›´å¥½çš„ä¿¡æ¯æºï¼Œæ¯”å¦‚ React è™šæ‹Ÿ DOMï¼Œå› æ­¤æ‹¥æœ‰æ›´å¥½çš„é™æ€ä¿¡æ¯è´¨é‡å’Œçµæ´»æ€§ã€‚</p>
<p>å¯ç”¨æ–¹å¼éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rspress.config.mjs</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rspress/core'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">llms</span>: <span class="hljs-literal">true</span>,
});
</code></pre>
<p>æ„å»ºåå°†ç”Ÿæˆå¦‚ä¸‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">doc_build
â”œâ”€â”€ llms.txt          <span class="hljs-comment"># æ‘˜è¦ç‰ˆï¼ŒåŒ…å«å…³é”®æ–‡æ¡£ç´¢å¼•</span>
â”œâ”€â”€ llms-full.txt     <span class="hljs-comment"># å®Œæ•´ç‰ˆï¼ŒåŒ…å«æ‰€æœ‰æ–‡æ¡£å†…å®¹</span>
â”œâ”€â”€ guide
â”‚   â””â”€â”€ start
â”‚       â””â”€â”€ introduction.md
â””â”€â”€ ...
</code></pre>
<p>å¯¹äºè‡ªå®šä¹‰ç»„ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥æ§åˆ¶å…¶åœ¨ SSG-MD æ¨¡å¼ä¸‹çš„æ¸²æŸ“è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Tab</span>(<span class="hljs-params">{ label }: { label: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">SSG_MD</span>) {
    <span class="hljs-comment">// SSG-MD æ¨¡å¼ä¸‹è¾“å‡ºçº¯æ–‡æœ¬æè¿°</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{`**Tab: ${label}**`}<span class="hljs-tag">&lt;/&gt;</span></span>;
  }
  <span class="hljs-comment">// æ­£å¸¸æ¸²æŸ“äº¤äº’å¼ç»„ä»¶</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"tab"</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>è¿™æ ·æ—¢ä¿è¯äº†æ–‡æ¡£çš„äº¤äº’ä½“éªŒï¼Œä¹Ÿèƒ½å¸®åŠ© AI ç†è§£ç»„ä»¶çš„è¯­ä¹‰ä¿¡æ¯ã€‚</p>
<blockquote>
<p>è¯¦è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.rspress.rs%2Fzh%2Fguide%2Fbasic%2Fssg-md" target="_blank" title="https://v2.rspress.rs/zh/guide/basic/ssg-md" ref="nofollow noopener noreferrer">SSG-MD ä½¿ç”¨æŒ‡å—</a></p>
</blockquote>
<h2 data-id="heading-20">å‡çº§æŒ‡å—</h2>
<h3 data-id="heading-21">å‡çº§ SWC æ’ä»¶</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† SWC Wasm æ’ä»¶ï¼ˆå¦‚ <code>@swc/plugin-emotion</code> ç­‰ï¼‰ï¼Œè¯·å‡çº§æ’ä»¶è‡³å…¼å®¹ <code>swc_core@54</code> åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™å¯èƒ½å› ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´æ„å»ºå¤±è´¥æˆ–è¿è¡Œå¼‚å¸¸ã€‚</p>
<blockquote>
<p>è¯¦æƒ…è¯·æŸ¥é˜…ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Ferrors%2Fswc-plugin-version" target="_blank" title="http://rspack.rs/zh/errors/swc-plugin-version" ref="nofollow noopener noreferrer">å¸¸è§é—®é¢˜ - SWC æ’ä»¶ç‰ˆæœ¬ä¸åŒ¹é…</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-22">ç§»é™¤åºŸå¼ƒé…ç½®</h3>
<ul>
<li>ä»¥ä¸‹å®éªŒæ€§é€‰é¡¹å·²åºŸå¼ƒï¼Œå¯ä»¥ç›´æ¥ç§»é™¤ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rspack.config.mjs</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// [!code --]</span>
  <span class="hljs-attr">experiments</span>: {
    <span class="hljs-comment">// [!code --]</span>
    <span class="hljs-attr">inlineConst</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// [!code --]</span>
    <span class="hljs-attr">inlineEnum</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// [!code --]</span>
    <span class="hljs-attr">typeReexportsPresence</span>: <span class="hljs-literal">true</span>,
  },
};
</code></pre>
<ul>
<li>è°ƒæ•´ <code>builtin:swc-loader</code> ä¸­çš„ <a href="https://link.juejin.cn?target=http%3A%2F%2Frspack.rs%2Fzh%2Fguide%2Ffeatures%2Fbuiltin-swc-loader%23collecttypescriptinfo" target="_blank" title="http://rspack.rs/zh/guide/features/builtin-swc-loader#collecttypescriptinfo" ref="nofollow noopener noreferrer">collectTypeScriptInfo</a> é€‰é¡¹ä½ç½®ï¼Œç§»é™¤ <code>rspackExperiments</code> å±‚çº§ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// rspack.config.mjs</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ts$/</span>,
        <span class="hljs-attr">loader</span>: <span class="hljs-string">'builtin:swc-loader'</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-comment">// [!code --]</span>
          <span class="hljs-attr">rspackExperiments</span>: {
            <span class="hljs-attr">collectTypeScriptInfo</span>: {
              <span class="hljs-attr">exportedEnum</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">typeExports</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-comment">// [!code --]</span>
          },
        },
      },
    ],
  },
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå¸®ä½ å½»åº•æ‰“é€š TypeScript æ³›å‹]]></title>    <link>https://juejin.cn/post/7590961898398744614</link>    <guid>https://juejin.cn/post/7590961898398744614</guid>    <pubDate>2026-01-04T02:51:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590961898398744614" data-draft-id="7591066233669664794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå¸®ä½ å½»åº•æ‰“é€š TypeScript æ³›å‹"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript"/> <meta itemprop="datePublished" content="2026-01-04T02:51:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå¸®ä½ å½»åº•æ‰“é€š TypeScript æ³›å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T02:51:38.000Z" title="Sun Jan 04 2026 02:51:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. æ ¸å¿ƒç—›ç‚¹ï¼šä¸¢å¤±çš„â€œèº«ä»½è¯â€</h3>
<p>åœ¨æ²¡æœ‰æ³›å‹ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³å†™ä¸€ä¸ªé€šç”¨çš„å‡½æ•°ï¼ˆæ¯”å¦‚è¿”å›ä½ ä¼ ç»™å®ƒçš„å€¼ï¼‰ï¼Œé€šå¸¸ä¼šé‡åˆ°ä¸¤ä¸ªæç«¯ï¼š</p>
<ul>
<li><strong>å†™æ­»ç±»å‹ï¼š</strong> åªèƒ½ä¼  <code>number</code>ï¼Œä¼  <code>string</code> å°±æŠ¥é”™ã€‚å¤ªæ­»æ¿ã€‚</li>
<li><strong>ä½¿ç”¨ <code>any</code>ï¼š</strong> ä»€ä¹ˆéƒ½èƒ½ä¼ ï¼Œä½†è¿›å»ä¹‹å <strong>â€œèº«ä»½è¯â€ä¸¢äº†</strong>ã€‚</li>
</ul>
<p><strong>ä¸¾ä¸ªâ€œä¸¢å¤±èº«ä»½è¯â€çš„ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// ä½¿ç”¨ anyï¼Œå°±åƒä¸€ä¸ªé»‘ç›’</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">heuristic</span>(<span class="hljs-params">val: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">any</span> {
  <span class="hljs-keyword">return</span> val;
}

<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">heuristic</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-comment">// ğŸš¨ é—®é¢˜æ¥äº†ï¼šTypeScript ç°åœ¨åªçŸ¥é“ result æ˜¯ any ç±»å‹ã€‚</span>
<span class="hljs-comment">// ä½ æ‰“ result. specifically... è¿™é‡Œçš„ä»£ç æç¤ºå…¨æ²¡äº†ï¼</span>
<span class="hljs-comment">// ç”šè‡³å†™ result.toFixed() ï¼ˆè¿™æ˜¯æ•°å­—çš„æ–¹æ³•ï¼‰å®ƒéƒ½ä¸æŠ¥é”™ï¼Œç›´åˆ°è¿è¡Œæ—¶å´©æºƒã€‚</span>
</code></pre>
<p><strong>æ³›å‹çš„çœŸæ­£ä½œç”¨ï¼š</strong> å®ƒæ˜¯ç”¨æ¥<strong>ä¿ä½ç±»å‹â€œèº«ä»½è¯â€çš„</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">2. æ€ç»´æ¨¡å‹ï¼šé€æ˜ç®¡é“ï¼ˆThe Transparent Tunnelï¼‰</h3>
<p>æŠŠæ³›å‹å‡½æ•°æƒ³è±¡æˆä¸€ä¸ª<strong>é€æ˜çš„ç®¡é“</strong>ï¼Œè€Œ <code>&lt;T&gt;</code> å°±æ˜¯ç®¡é“å…¥å£çš„ä¸€ä¸ª<strong>æ‰«æä»ª</strong>ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">function</span> tunnel&lt;T&gt;(<span class="hljs-attr">val</span>: T): T {
  <span class="hljs-keyword">return</span> val;
}
</code></pre>
<p>è¯·è·Ÿç€è¿™ä¸ªè¿‡ç¨‹èµ°ä¸€éï¼š</p>
<ol>
<li>å½“ä½ è°ƒç”¨ <code>tunnel("hello")</code> æ—¶ã€‚</li>
<li><strong>æ‰«æä»ª <code>&lt;T&gt;</code></strong> ç¬é—´å¯åŠ¨ï¼Œå®ƒæ•æ‰åˆ°äº† <code>"hello"</code> çš„ç±»å‹æ˜¯ <strong>String</strong>ã€‚</li>
<li>äºæ˜¯ï¼Œåœ¨è¿™ä¸ªç¬é—´ï¼Œå‡½æ•°å†…éƒ¨æ‰€æœ‰çš„ <code>T</code> è‡ªåŠ¨å˜æˆäº† <code>String</code>ã€‚</li>
<li><strong>æœ€å…³é”®çš„ä¸€æ­¥ï¼š</strong> å®ƒä¸ä»…å¤„ç†äº†æ•°æ®ï¼Œè¿˜æŠŠ <strong>String</strong> è¿™ä¸ªç±»å‹è´´åœ¨äº†è¿”å›å€¼ä¸Šã€‚</li>
</ol>
<p><strong>å¯¹æ¯”ä¸€ä¸‹ï¼š</strong></p>
<ul>
<li><strong>any (é»‘ç›’):</strong> è‹¹æœè¿›å» -&gt; é»‘ç›’å¤„ç† -&gt; åå‡ºä¸€ä¸ªâ€œä¸œè¥¿â€ï¼ˆå¯èƒ½æ˜¯è‹¹æœï¼Œä¹Ÿå¯èƒ½æ˜¯ç‚¸å¼¹ï¼‰ã€‚</li>
<li><strong>æ³›å‹ (é€æ˜ç®¡é“):</strong> è‹¹æœè¿›å» -&gt; <strong>T è®°å½•ä¸‹â€œè¿™æ˜¯è‹¹æœâ€</strong> -&gt; ç®¡é“å¤„ç† -&gt; åå‡ºä¸€ä¸ª<strong>å¸¦ç€â€œè‹¹æœâ€æ ‡ç­¾</strong>çš„è‹¹æœã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">3. ç°å®ç”Ÿæ´»ç±»æ¯”ï¼šä¸‡èƒ½USBæ¥å£ vs å®šåˆ¶æ’åº§</h3>
<p>ä¸ºäº†å½»åº•å¼„æ‡‚ï¼Œæˆ‘ä»¬ç”¨<strong>æ¥å£</strong>åšæ¯”å–»ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯ï¼šä½ éœ€è¦ç”Ÿäº§ä¸€ç§â€œä¸‡èƒ½åŒ…è£…ç›’â€</h4>
<p>æ–¹æ¡ˆ Aï¼ˆä¸ç”¨æ³›å‹ - ç±»ä¼¼äº anyï¼‰ï¼š</p>
<p>ä½ é€ äº†ä¸€ä¸ªå·¨å¤§çš„è¢‹å­ã€‚</p>
<ul>
<li>ç”¨æˆ·æ”¾å…¥ä¸€æ”¯å£çº¢ã€‚</li>
<li>æ‹¿å‡ºæ¥æ—¶ï¼Œç³»ç»Ÿåªæ ‡æ³¨è¿™æ˜¯â€œä¸€ä¸ªç‰©å“â€ã€‚</li>
<li>ç”¨æˆ·ç”šè‡³å¯èƒ½è¯•å›¾æŠŠè¿™ä¸ªâ€œç‰©å“â€å½“æˆæ±‰å ¡åƒæ‰ï¼Œå› ä¸ºç³»ç»Ÿæ²¡å‘Šè¯‰ä»–è¿™æ˜¯å£çº¢ã€‚</li>
</ul>
<p>æ–¹æ¡ˆ Bï¼ˆä½¿ç”¨æ³›å‹ï¼‰ï¼š</p>
<p>ä½ é€ äº†ä¸€ä¸ªæ™ºèƒ½æ¨¡å…·ã€‚</p>
<ul>
<li>å½“ç”¨æˆ·æŠŠâ€œå£çº¢â€æ”¾è¿›å»çš„é‚£ä¸€åˆ»ï¼Œæ¨¡å…·è‡ªåŠ¨å˜å½¢å¡ä½å£çº¢ï¼Œå¹¶æ‰“ä¸Šæ ‡ç­¾ï¼š <strong>â€œå†…å«ï¼šå£çº¢â€</strong> ã€‚</li>
<li>å½“ç”¨æˆ·æŠŠâ€œæ±‰å ¡â€æ”¾è¿›å»ï¼Œæ¨¡å…·è‡ªåŠ¨å˜å½¢å¡ä½æ±‰å ¡ï¼Œå¹¶æ‰“ä¸Šæ ‡ç­¾ï¼š <strong>â€œå†…å«ï¼šæ±‰å ¡â€</strong> ã€‚</li>
</ul>
<p><strong>ä»£ç æ˜ å°„ï¼š</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½ç›’å­ (Box)</span>
<span class="hljs-comment">// &lt;T&gt; æ˜¯è¿™ä¸€è½®ç”Ÿäº§çš„â€œç‰©å“ç±»å‹â€</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {
  <span class="hljs-attr">content</span>: T; <span class="hljs-comment">// å†…å®¹ç‰©å°±æ˜¯ T ç±»å‹</span>
}

<span class="hljs-comment">// åœºæ™¯ 1ï¼šè£…å£çº¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">lipstickBox</span>: <span class="hljs-title class_">Box</span>&lt;<span class="hljs-title class_">Lipstick</span>&gt; = { <span class="hljs-attr">content</span>: myLipstick };
<span class="hljs-comment">// âœ… TypeScript çŸ¥é“ï¼šlipstickBox.content æ˜¯å£çº¢ï¼Œä¸èƒ½åƒã€‚</span>

<span class="hljs-comment">// åœºæ™¯ 2ï¼šè£…æ±‰å ¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">burgerBox</span>: <span class="hljs-title class_">Box</span>&lt;<span class="hljs-title class_">Burger</span>&gt; = { <span class="hljs-attr">content</span>: myBurger };
<span class="hljs-comment">// âœ… TypeScript çŸ¥é“ï¼šburgerBox.content æ˜¯æ±‰å ¡ï¼Œå¯ä»¥åƒã€‚</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">4. å†æ¬¡å®¡è§†é‚£ä¸ªâ€œéš¾æ‡‚â€çš„è¯­æ³•</h3>
<p>ç°åœ¨å›å¤´çœ‹æœ€åŸºç¡€çš„è¯­æ³•ï¼Œæ˜¯ä¸æ˜¯æ¸…æ™°äº†ï¼Ÿ</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// è¿™é‡Œçš„ &lt;T&gt; æ˜¯ä¸€ä»½â€œå¥‘çº¦â€</span>
<span class="hljs-comment">// å®ƒåœ¨è¯´ï¼šå—¨ï¼Œè¿›æ¥çš„æ˜¯ä»€ä¹ˆç±»å‹ (å‚æ•° val: T)ï¼Œå‡ºå»çš„å¿…é¡»ä¹Ÿæ˜¯åŒä¸€ç§ç±»å‹ (è¿”å›å€¼: T)ï¼</span>
<span class="hljs-keyword">function</span> identify&lt;T&gt;(<span class="hljs-attr">val</span>: T): T {
    <span class="hljs-keyword">return</span> val;
}
</code></pre>
<ul>
<li><strong>T ä¸æ˜¯å€¼</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å ä½ç¬¦</strong>ã€‚</li>
<li>å®ƒçš„ä½œç”¨æ˜¯<strong>æ•è·</strong>ä½ è°ƒç”¨å‡½æ•°é‚£ä¸€åˆ»ä¼ å…¥çš„å…·ä½“ç±»å‹ï¼Œç„¶åæŠŠè¿™ä¸ªç±»å‹<strong>ä¼ é€’</strong>ç»™å‚æ•°å’Œè¿”å›å€¼ã€‚</li>
</ul>
<h3 data-id="heading-5">5. è¿›é˜¶ï¼šä¸ºä»€ä¹ˆè¦ç”¨ <code>extends</code> (æ³›å‹çº¦æŸ)ï¼Ÿ</h3>
<p>æœ‰æ—¶å€™ç®¡é“å¤ªå®½äº†ï¼Œæˆ‘ä»¬æƒ³é™åˆ¶ä¸€ä¸‹ã€‚</p>
<p><strong>æ¯”å–»ï¼š</strong> è¿™æ˜¯ä¸€ä¸ª<strong>å¾®æ³¢ç‚‰</strong>æ³›å‹ã€‚</p>
<ul>
<li>ä½ å¯ä»¥æ”¾æ±‰å ¡ã€æ”¾ç‰›å¥¶ï¼ˆT å¯ä»¥å˜ï¼‰ã€‚</li>
<li>ä½†ä½ <strong>ç»å¯¹ä¸èƒ½æ”¾é‡‘å±</strong>ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™ T åŠ ä¸ªè¿‡æ»¤å™¨ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// è¿™é‡Œçš„ extends è¡¨ç¤ºâ€œå¿…é¡»åŒ…å«â€</span>
<span class="hljs-comment">// T å¿…é¡»åŒ…å« .length å±æ€§ï¼Œå¦åˆ™å¾®æ³¢ç‚‰ä¸å·¥ä½œ</span>
<span class="hljs-keyword">function</span> logLength&lt;T <span class="hljs-keyword">extends</span> { <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-attr">arg</span>: T) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg.<span class="hljs-property">length</span>);
}

<span class="hljs-title function_">logLength</span>(<span class="hljs-string">"abc"</span>); <span class="hljs-comment">// âœ… å­—ç¬¦ä¸²æœ‰ length</span>
<span class="hljs-title function_">logLength</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]); <span class="hljs-comment">// âœ… æ•°ç»„æœ‰ length</span>
<span class="hljs-title function_">logLength</span>(<span class="hljs-number">100</span>);   <span class="hljs-comment">// âŒ æŠ¥é”™ï¼æ•°å­—æ²¡æœ‰ lengthï¼Œè¢«æ‹’ä¹‹é—¨å¤–</span>
</code></pre>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>ç°åœ¨è¯·è¿™æ ·è®°ä½å®ƒï¼š</p>
<p>æ³›å‹å°±æ˜¯ä¸€ç§â€œç±»å‹ä¼ å£°ç­’â€æˆ–è€…â€œç±»å‹å…³è”å™¨â€ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒç›®çš„åªæœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>çµæ´»ï¼š</strong> <code>any</code>ï¼Œå…è®¸ä½ ä¼ å…¥ä¸åŒç±»å‹ã€‚</li>
<li><strong>ä¸¥è°¨ï¼š</strong> å…·ä½“ç±»å‹ï¼Œ<strong>è®°ä½</strong>ä½ ä¼ äº†ä»€ä¹ˆï¼Œå¹¶åœ¨åç»­æ“ä½œä¸­<strong>é”æ­»</strong>è¿™ä¸ªå…³ç³»ï¼Œä¸è®©ç±»å‹ä¿¡æ¯ä¸¢å¤±ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Scrapyæ¡†æ¶æ•°æ®å­˜å‚¨å®Œå…¨æŒ‡å—ï¼ˆå®æ“ä¸ºä¸»ï¼Œæ˜“è½åœ°ï¼‰]]></title>    <link>https://juejin.cn/post/7590213554799067171</link>    <guid>https://juejin.cn/post/7590213554799067171</guid>    <pubDate>2026-01-03T14:33:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590213554799067171" data-draft-id="7590303618429403171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Scrapyæ¡†æ¶æ•°æ®å­˜å‚¨å®Œå…¨æŒ‡å—ï¼ˆå®æ“ä¸ºä¸»ï¼Œæ˜“è½åœ°ï¼‰"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-03T14:33:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥½æ±‰å­¦æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3704681342438299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Scrapyæ¡†æ¶æ•°æ®å­˜å‚¨å®Œå…¨æŒ‡å—ï¼ˆå®æ“ä¸ºä¸»ï¼Œæ˜“è½åœ°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3704681342438299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥½æ±‰å­¦æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T14:33:25.000Z" title="Sat Jan 03 2026 14:33:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³æŒæ¡Scrapyæ¡†æ¶çš„æ•°æ®å­˜å‚¨æ–¹æ³•ï¼Œæ ¸å¿ƒæ˜¯å›´ç»•<strong>Itemæ•°æ®æ¨¡å‹</strong>å’Œ**Pipelineï¼ˆæ•°æ®ç®¡é“ï¼‰**å±•å¼€â€”â€”Scrapyå°†çˆ¬å–åˆ°çš„æ•°æ®å…ˆå°è£…åˆ°Itemä¸­ï¼Œå†é€šè¿‡Pipelineç»Ÿä¸€å¤„ç†å­˜å‚¨ï¼Œæ”¯æŒæœ¬åœ°æ–‡ä»¶ã€å…³ç³»å‹æ•°æ®åº“ã€éå…³ç³»å‹æ•°æ®åº“ç­‰å¤šç§å­˜å‚¨æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†å®æ“æ•™ç¨‹ï¼Œæ— å†—ä½™ç†è®ºï¼Œå¯ç›´æ¥å¤åˆ»è¿è¡Œã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‰ç½®åŸºç¡€ï¼šæ•°æ®å­˜å‚¨çš„æ ¸å¿ƒæµç¨‹</h2>
<ol>
<li>å®šä¹‰<code>Item</code>ï¼šåœ¨<code>items.py</code>ä¸­å£°æ˜éœ€è¦å­˜å‚¨çš„å­—æ®µï¼Œè§„èŒƒæ•°æ®æ ¼å¼ï¼ˆé¿å…æ‚ä¹±æ•°æ®ï¼‰ï¼›</li>
<li>è§£ææ•°æ®å°è£…åˆ°<code>Item</code>ï¼šåœ¨çˆ¬è™«æ–‡ä»¶ä¸­ï¼Œå°†è§£æåˆ°çš„æ•°æ®å­˜å…¥è‡ªå®šä¹‰<code>Item</code>å¯¹è±¡å¹¶<code>yield</code>ï¼›</li>
<li>å¯ç”¨<code>Pipeline</code>ï¼šåœ¨<code>settings.py</code>ä¸­é…ç½®å¯ç”¨å¯¹åº”çš„ç®¡é“ï¼ˆè®¾ç½®ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼›</li>
<li>å®ç°å­˜å‚¨é€»è¾‘ï¼šåœ¨<code>pipelines.py</code>ä¸­ç¼–å†™å…·ä½“çš„å­˜å‚¨ä»£ç ï¼ˆæ–‡ä»¶/æ•°æ®åº“ç­‰ï¼‰ï¼›</li>
<li>è¿è¡Œçˆ¬è™«ï¼šè‡ªåŠ¨è§¦å‘Pipelineï¼Œå®Œæˆæ•°æ®å­˜å‚¨ã€‚</li>
</ol>
<h3 data-id="heading-1">å¿…å¤‡å‰ç½®å‡†å¤‡ï¼ˆå¿«é€Ÿæ­å»ºæµ‹è¯•ç¯å¢ƒï¼‰</h3>
<ol>
<li>å·²æœ‰Scrapyé¡¹ç›®ï¼ˆè‹¥æ— ï¼Œæ‰§è¡Œ<code>scrapy startproject data_storage_spider</code>åˆ›å»ºï¼‰ï¼›</li>
<li>ç®€å•çˆ¬è™«ç¤ºä¾‹ï¼ˆç”¨äºç”Ÿæˆæµ‹è¯•æ•°æ®ï¼Œåç»­æ‰€æœ‰å­˜å‚¨æ–¹å¼å‡åŸºäºæ­¤ï¼‰ï¼š</li>
</ol>
<ul>
<li>çˆ¬è™«æ–‡ä»¶<code>spiders/test_spider.py</code>ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> scrapy
<span class="hljs-keyword">from</span> data_storage_spider.items <span class="hljs-keyword">import</span> DataStorageSpiderItem

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestSpider</span>(scrapy.Spider):
    name = <span class="hljs-string">"test_spider"</span>
    <span class="hljs-comment"># æµ‹è¯•ç”¨é™æ€é¡µé¢ï¼Œæ— éœ€å¤„ç†åŠ¨æ€æ¸²æŸ“</span>
    start_urls = [<span class="hljs-string">"https://quotes.toscrape.com/"</span>]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):
        <span class="hljs-comment"># è§£æåè¨€æ•°æ®</span>
        quote_items = response.xpath(<span class="hljs-string">"//div[@class='quote']"</span>)
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> quote_items:
            <span class="hljs-comment"># å®ä¾‹åŒ–è‡ªå®šä¹‰Item</span>
            quote_data = DataStorageSpiderItem()
            <span class="hljs-comment"># å°è£…æ•°æ®ï¼ˆå­—æ®µä¸items.pyä¸­å®šä¹‰ä¸€è‡´ï¼‰</span>
            quote_data[<span class="hljs-string">'content'</span>] = item.xpath(<span class="hljs-string">".//span[@class='text']/text()"</span>).extract_first() <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
            quote_data[<span class="hljs-string">'author'</span>] = item.xpath(<span class="hljs-string">".//small[@class='author']/text()"</span>).extract_first() <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
            quote_data[<span class="hljs-string">'tags'</span>] = <span class="hljs-string">","</span>.join(item.xpath(<span class="hljs-string">".//div[@class='tags']/a/text()"</span>).extract()) <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
            
            <span class="hljs-comment"># æäº¤æ•°æ®åˆ°Pipelineï¼ˆæ ¸å¿ƒï¼šyield Itemå¯¹è±¡ï¼‰</span>
            <span class="hljs-keyword">yield</span> quote_data
</code></pre>
<ul>
<li>å®šä¹‰Item<code>items.py</code>ï¼š</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> scrapy

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataStorageSpiderItem</span>(scrapy.Item):
    <span class="hljs-comment"># å®šä¹‰éœ€è¦å­˜å‚¨çš„å­—æ®µï¼Œscrapy.Field()ä»…ç”¨äºæ ‡è®°ï¼Œæ— é¢å¤–é€»è¾‘</span>
    content = scrapy.Field()  <span class="hljs-comment"># åè¨€å†…å®¹</span>
    author = scrapy.Field()   <span class="hljs-comment"># ä½œè€…</span>
    tags = scrapy.Field()     <span class="hljs-comment"># æ ‡ç­¾ï¼ˆç”¨é€—å·æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿å­˜å‚¨ï¼‰</span>
</code></pre>
<h2 data-id="heading-2">äºŒã€æ–¹å¼1ï¼šæœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼ˆCSV/JSON/JSON Linesï¼Œæœ€å¸¸ç”¨ï¼‰</h2>
<p>æœ¬åœ°æ–‡ä»¶å­˜å‚¨æ— éœ€é¢å¤–å®‰è£…ä¾èµ–ï¼Œé€‚åˆå°è§„æ¨¡æ•°æ®ã€å¿«é€ŸéªŒè¯ç»“æœï¼ŒScrapyæä¾›ä¸¤ç§å®ç°æ–¹å¼ï¼š<strong>å†…ç½®å‘½ä»¤ç›´æ¥å¯¼å‡º</strong>ï¼ˆå¿«é€Ÿä¾¿æ·ï¼‰ã€<strong>Pipelineè‡ªå®šä¹‰å®ç°</strong>ï¼ˆçµæ´»å¯æ§ï¼Œæ”¯æŒå¤æ‚é€»è¾‘ï¼‰ã€‚</p>
<h3 data-id="heading-3">1. å¿«é€Ÿå®ç°ï¼šScrapyå†…ç½®å‘½ä»¤å¯¼å‡ºï¼ˆæ— éœ€ç¼–å†™Pipelineï¼‰</h3>
<p>ç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œçˆ¬è™«æ—¶ï¼Œé€šè¿‡<code>-o</code>å‚æ•°æŒ‡å®šæ–‡ä»¶è·¯å¾„å’Œæ ¼å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ï¼Œæ”¯æŒ<code>csv</code>ã€<code>json</code>ã€<code>jl</code>ï¼ˆJSON Linesï¼‰ä¸‰ç§å¸¸ç”¨æ ¼å¼ã€‚</p>
<h4 data-id="heading-4">ï¼ˆ1ï¼‰å¯¼å‡ºä¸ºCSVæ–‡ä»¶ï¼ˆæ¨èï¼Œæ˜“ç”¨äºExcelåˆ†æï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•åæ‰§è¡Œ</span>
scrapy crawl test_spider -o quotes.csv -s FEED_EXPORT_ENCODING=utf_8_sig
</code></pre>
<ul>
<li>å…³é”®å‚æ•°è¯´æ˜ï¼š
<ul>
<li><code>-o quotes.csv</code>ï¼šæŒ‡å®šå¯¼å‡ºä¸ºCSVæ–‡ä»¶ï¼Œæ–‡ä»¶å<code>quotes.csv</code>ï¼›</li>
<li><code>-s FEED_EXPORT_ENCODING=utf_8_sig</code>ï¼šè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ˆæ ¸å¿ƒå‚æ•°ï¼Œå¿…åŠ ï¼‰ï¼›</li>
</ul>
</li>
<li>ç»“æœï¼šé¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ<code>quotes.csv</code>ï¼Œå¯ç”¨Excelç›´æ¥æ‰“å¼€ï¼Œæ•°æ®æ ¼å¼è§„æ•´ã€‚</li>
</ul>
<h4 data-id="heading-5">ï¼ˆ2ï¼‰å¯¼å‡ºä¸ºJSONæ–‡ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash">scrapy crawl test_spider -o quotes.json -s FEED_EXPORT_ENCODING=utf_8_sig
</code></pre>
<ul>
<li>ç‰¹ç‚¹ï¼šæ•°æ®ä»¥æ•°ç»„æ ¼å¼å­˜å‚¨ï¼Œé€‚åˆåç»­JSONè§£æå¤„ç†ï¼Œç¼ºç‚¹æ˜¯å¤§æ–‡ä»¶åŠ è½½è€—æ—¶ä¹…ã€‚</li>
</ul>
<h4 data-id="heading-6">ï¼ˆ3ï¼‰å¯¼å‡ºä¸ºJSON Linesæ–‡ä»¶ï¼ˆæ¨èï¼Œå¤§æ–‡ä»¶å‹å¥½ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">scrapy crawl test_spider -o quotes.jl -s FEED_EXPORT_ENCODING=utf_8_sig
</code></pre>
<ul>
<li>ç‰¹ç‚¹ï¼šæ¯è¡Œä¸€æ¡JSONæ•°æ®ï¼Œæ— éœ€åŠ è½½æ•´ä¸ªæ–‡ä»¶å³å¯è§£æï¼Œé€‚åˆå¤§è§„æ¨¡æœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œå…¼å®¹æ€§æ›´å¼ºã€‚</li>
</ul>
<h3 data-id="heading-7">2. çµæ´»å®ç°ï¼šPipelineè‡ªå®šä¹‰æ–‡ä»¶å­˜å‚¨ï¼ˆæ”¯æŒå¤æ‚é€»è¾‘ï¼‰</h3>
<p>å†…ç½®å‘½ä»¤æ— æ³•æ»¡è¶³è‡ªå®šä¹‰éœ€æ±‚ï¼ˆå¦‚ï¼šæŒ‰æ—¥æœŸæ‹†åˆ†æ–‡ä»¶ã€è¿‡æ»¤æ— æ•ˆæ•°æ®ã€è¿½åŠ å†™å…¥ï¼‰ï¼Œæ­¤æ—¶éœ€é€šè¿‡Pipelineå®ç°ï¼Œä»¥CSVæ–‡ä»¶ä¸ºä¾‹ï¼ˆJSONæ ¼å¼åŒç†ï¼‰ã€‚</p>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰ç¼–å†™Pipelineå­˜å‚¨é€»è¾‘ï¼ˆ<code>pipelines.py</code>ï¼‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> csv
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CsvFileStoragePipeline</span>:
    <span class="hljs-string">"""è‡ªå®šä¹‰CSVæ–‡ä»¶å­˜å‚¨ç®¡é“"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 1. åˆå§‹åŒ–æ–‡ä»¶å¯¹è±¡å’ŒCSVå†™å…¥å™¨</span>
        self.file = <span class="hljs-literal">None</span>
        self.writer = <span class="hljs-literal">None</span>
        <span class="hljs-comment"># CSVæ–‡ä»¶è·¯å¾„å’Œè¡¨å¤´</span>
        self.csv_path = <span class="hljs-string">"custom_quotes.csv"</span>
        self.fieldnames = [<span class="hljs-string">"content"</span>, <span class="hljs-string">"author"</span>, <span class="hljs-string">"tags"</span>]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">open_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å¯åŠ¨æ—¶æ‰§è¡Œï¼ˆä»…æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œç”¨äºæ‰“å¼€æ–‡ä»¶ã€åˆå§‹åŒ–å†™å…¥å™¨"""</span>
        <span class="hljs-comment"># è¿½åŠ å†™å…¥æ¨¡å¼ï¼ˆaï¼‰ï¼šé¿å…è¦†ç›–å·²æœ‰æ•°æ®ï¼›newline=""ï¼šé¿å…CSVå‡ºç°ç©ºè¡Œ</span>
        self.file = <span class="hljs-built_in">open</span>(self.csv_path, <span class="hljs-string">"a"</span>, newline=<span class="hljs-string">""</span>, encoding=<span class="hljs-string">"utf_8_sig"</span>)
        <span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™å†™å…¥è¡¨å¤´</span>
        <span class="hljs-keyword">if</span> os.path.getsize(self.csv_path) == <span class="hljs-number">0</span>:
            self.writer = csv.DictWriter(self.file, fieldnames=self.fieldnames)
            self.writer.writeheader()
        <span class="hljs-keyword">else</span>:
            self.writer = csv.DictWriter(self.file, fieldnames=self.fieldnames)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_item</span>(<span class="hljs-params">self, item, spider</span>):
        <span class="hljs-string">"""æ ¸å¿ƒï¼šå¤„ç†æ¯ä¸ªItemæ•°æ®ï¼ˆçˆ¬è™«æäº¤ä¸€ä¸ªItemï¼Œæ‰§è¡Œä¸€æ¬¡ï¼‰"""</span>
        <span class="hljs-comment"># è¿‡æ»¤æ— æ•ˆæ•°æ®ï¼ˆè‡ªå®šä¹‰é€»è¾‘ï¼šæ’é™¤ç©ºå†…å®¹çš„è®°å½•ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item.get(<span class="hljs-string">"content"</span>) <span class="hljs-keyword">or</span> item.get(<span class="hljs-string">"content"</span>).strip() == <span class="hljs-string">""</span>:
            spider.logger.warning(<span class="hljs-string">"æ— æ•ˆæ•°æ®ï¼šå†…å®¹ä¸ºç©ºï¼Œè·³è¿‡å­˜å‚¨"</span>)
            <span class="hljs-keyword">return</span> item
        
        <span class="hljs-comment"># å°†Itemè½¬æ¢ä¸ºå­—å…¸ï¼Œå†™å…¥CSVæ–‡ä»¶</span>
        self.writer.writerow(<span class="hljs-built_in">dict</span>(item))
        spider.logger.info(<span class="hljs-string">f"æ•°æ®å·²å†™å…¥CSVï¼š<span class="hljs-subst">{item.get(<span class="hljs-string">'author'</span>)}</span> - <span class="hljs-subst">{item.get(<span class="hljs-string">'content'</span>)[:<span class="hljs-number">20</span>]}</span>..."</span>)
        <span class="hljs-keyword">return</span> item
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å…³é—­æ—¶æ‰§è¡Œï¼ˆä»…æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œç”¨äºå…³é—­æ–‡ä»¶ï¼Œé‡Šæ”¾èµ„æº"""</span>
        <span class="hljs-keyword">if</span> self.file:
            self.file.close()
            spider.logger.info(<span class="hljs-string">f"CSVæ–‡ä»¶å­˜å‚¨å®Œæˆï¼Œæ–‡ä»¶è·¯å¾„ï¼š<span class="hljs-subst">{self.csv_path}</span>"</span>)
</code></pre>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰å¯ç”¨Pipelineï¼ˆ<code>settings.py</code>ï¼‰</h4>
<p>æ‰¾åˆ°<code>ITEM_PIPELINES</code>é…ç½®ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶æ·»åŠ è‡ªå®šä¹‰ç®¡é“ï¼ˆä¼˜å…ˆçº§300ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python">ITEM_PIPELINES = {
   <span class="hljs-string">'data_storage_spider.pipelines.CsvFileStoragePipeline'</span>: <span class="hljs-number">300</span>,
}
</code></pre>
<h4 data-id="heading-10">ï¼ˆ3ï¼‰è¿è¡Œçˆ¬è™«éªŒè¯ç»“æœ</h4>
<pre><code class="hljs language-bash" lang="bash">scrapy crawl test_spider
</code></pre>
<ul>
<li>ç»“æœï¼šé¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ<code>custom_quotes.csv</code>ï¼Œæ— ä¸­æ–‡ä¹±ç ï¼Œå·²è¿‡æ»¤ç©ºå†…å®¹æ•°æ®ï¼Œæ”¯æŒè¿½åŠ å†™å…¥ï¼ˆé‡å¤è¿è¡Œçˆ¬è™«ï¼Œæ•°æ®ä¸ä¼šè¦†ç›–ï¼Œè€Œæ˜¯æ–°å¢åˆ°æ–‡ä»¶æœ«å°¾ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-11">ä¸‰ã€æ–¹å¼2ï¼šå…³ç³»å‹æ•°æ®åº“å­˜å‚¨ï¼ˆä»¥MySQLä¸ºä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒå¸¸ç”¨ï¼‰</h2>
<p>é€‚åˆå¤§è§„æ¨¡ç»“æ„åŒ–æ•°æ®å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®æŸ¥è¯¢ã€æ›´æ–°ã€å…³è”åˆ†æï¼Œæ ¸å¿ƒä¾èµ–<code>pymysql</code>åº“ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-12">1. å®‰è£…ä¾èµ–åº“</h3>
<pre><code class="hljs language-bash" lang="bash">pip install pymysql
</code></pre>
<h3 data-id="heading-13">2. æå‰åˆ›å»ºMySQLæ•°æ®åº“å’Œè¡¨</h3>
<ul>
<li>åˆ›å»ºæ•°æ®åº“<code>scrapy_data</code>ï¼ˆå­—ç¬¦é›†<code>utf8mb4</code>ï¼Œæ”¯æŒæ‰€æœ‰ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦ï¼‰ï¼›</li>
<li>åˆ›å»ºè¡¨<code>quotes</code>ï¼ˆå­—æ®µä¸Itemå¯¹åº”ï¼Œç»“æ„å¦‚ä¸‹ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> scrapy_data <span class="hljs-keyword">DEFAULT</span> <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

USE scrapy_data;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> quotes (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT COMMENT <span class="hljs-string">'è‡ªå¢ä¸»é”®'</span>,
    content TEXT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åè¨€å†…å®¹'</span>,
    author <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä½œè€…'</span>,
    tags <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span> COMMENT <span class="hljs-string">'æ ‡ç­¾'</span>,
    create_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'å­˜å‚¨æ—¶é—´'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'åè¨€æ•°æ®è¡¨'</span>;
</code></pre>
<h3 data-id="heading-14">3. ç¼–å†™MySQLå­˜å‚¨Pipelineï¼ˆ<code>pipelines.py</code>ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pymysql

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MysqlStoragePipeline</span>:
    <span class="hljs-string">"""MySQLæ•°æ®åº“å­˜å‚¨ç®¡é“"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆæ ¹æ®è‡ªèº«ç¯å¢ƒä¿®æ”¹ï¼‰</span>
        self.host = <span class="hljs-string">"localhost"</span>
        self.port = <span class="hljs-number">3306</span>
        self.user = <span class="hljs-string">"root"</span>
        self.password = <span class="hljs-string">"ä½ çš„MySQLå¯†ç "</span>
        self.db_name = <span class="hljs-string">"scrapy_data"</span>
        self.charset = <span class="hljs-string">"utf8mb4"</span>
        
        <span class="hljs-comment"># åˆå§‹åŒ–è¿æ¥å’Œæ¸¸æ ‡å¯¹è±¡</span>
        self.conn = <span class="hljs-literal">None</span>
        self.cursor = <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">open_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å¯åŠ¨æ—¶ï¼Œå»ºç«‹MySQLè¿æ¥"""</span>
        <span class="hljs-keyword">try</span>:
            self.conn = pymysql.connect(
                host=self.host,
                port=self.port,
                user=self.user,
                password=self.password,
                db=self.db_name,
                charset=self.charset
            )
            self.cursor = self.conn.cursor()
            spider.logger.info(<span class="hljs-string">"MySQLæ•°æ®åº“è¿æ¥æˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            spider.logger.error(<span class="hljs-string">f"MySQLæ•°æ®åº“è¿æ¥å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span> e
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_item</span>(<span class="hljs-params">self, item, spider</span>):
        <span class="hljs-string">"""æ ¸å¿ƒï¼šå°†Itemæ•°æ®æ’å…¥MySQLæ•°æ®åº“"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item.get(<span class="hljs-string">"content"</span>):
            <span class="hljs-keyword">return</span> item
        
        <span class="hljs-comment"># 1. å®šä¹‰SQLæ’å…¥è¯­å¥ï¼ˆä½¿ç”¨å ä½ç¬¦%sï¼Œé¿å…SQLæ³¨å…¥ï¼‰</span>
        insert_sql = <span class="hljs-string">"""
        INSERT INTO quotes (content, author, tags)
        VALUES (%s, %s, %s)
        """</span>
        
        <span class="hljs-comment"># 2. æå–Itemæ•°æ®ï¼Œç»„è£…ä¸ºå‚æ•°å…ƒç»„ï¼ˆä¸SQLå ä½ç¬¦é¡ºåºå¯¹åº”ï¼‰</span>
        item_data = (
            item.get(<span class="hljs-string">"content"</span>),
            item.get(<span class="hljs-string">"author"</span>),
            item.get(<span class="hljs-string">"tags"</span>)
        )
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 3. æ‰§è¡ŒSQLè¯­å¥</span>
            self.cursor.execute(insert_sql, item_data)
            <span class="hljs-comment"># 4. æäº¤äº‹åŠ¡ï¼ˆå…³é”®ï¼šä¸æäº¤åˆ™æ•°æ®ä¸ä¼šå†™å…¥æ•°æ®åº“ï¼‰</span>
            self.conn.commit()
            spider.logger.info(<span class="hljs-string">f"æ•°æ®å·²æ’å…¥MySQLï¼š<span class="hljs-subst">{item.get(<span class="hljs-string">'author'</span>)}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># 5. å‡ºé”™æ—¶å›æ»šäº‹åŠ¡ï¼Œé¿å…æ•°æ®æ··ä¹±</span>
            self.conn.rollback()
            spider.logger.error(<span class="hljs-string">f"æ•°æ®æ’å…¥MySQLå¤±è´¥ï¼š<span class="hljs-subst">{e}</span>ï¼Œæ•°æ®ï¼š<span class="hljs-subst">{item_data}</span>"</span>)
        
        <span class="hljs-keyword">return</span> item
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å…³é—­æ—¶ï¼Œå…³é—­æ¸¸æ ‡å’Œè¿æ¥"""</span>
        <span class="hljs-keyword">if</span> self.cursor:
            self.cursor.close()
        <span class="hljs-keyword">if</span> self.conn:
            self.conn.close()
        spider.logger.info(<span class="hljs-string">"MySQLæ•°æ®åº“è¿æ¥å·²å…³é—­"</span>)
</code></pre>
<h3 data-id="heading-15">4. å¯ç”¨MySQL Pipelineï¼ˆ<code>settings.py</code>ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">ITEM_PIPELINES = {
   <span class="hljs-comment"># å¯åŒæ—¶å¯ç”¨å¤šä¸ªPipelineï¼Œåˆ†åˆ«å­˜å‚¨ä¸ºCSVå’ŒMySQLï¼ˆä¼˜å…ˆçº§300&lt;400ï¼ŒCSVå…ˆæ‰§è¡Œï¼‰</span>
   <span class="hljs-string">'data_storage_spider.pipelines.CsvFileStoragePipeline'</span>: <span class="hljs-number">300</span>,
   <span class="hljs-string">'data_storage_spider.pipelines.MysqlStoragePipeline'</span>: <span class="hljs-number">400</span>,
}
</code></pre>
<h3 data-id="heading-16">5. è¿è¡Œçˆ¬è™«éªŒè¯ç»“æœ</h3>
<pre><code class="hljs language-bash" lang="bash">scrapy crawl test_spider
</code></pre>
<ul>
<li>éªŒè¯ï¼šç™»å½•MySQLï¼ŒæŸ¥è¯¢<code>scrapy_data.quotes</code>è¡¨ï¼Œå¯çœ‹åˆ°å·²æˆåŠŸæ’å…¥æ•°æ®ï¼Œæ— ä¹±ç ï¼Œå­—æ®µå¯¹åº”å®Œæ•´ã€‚</li>
</ul>
<h2 data-id="heading-17">å››ã€æ–¹å¼3ï¼šéå…³ç³»å‹æ•°æ®åº“å­˜å‚¨ï¼ˆä»¥MongoDBä¸ºä¾‹ï¼Œçµæ´»å­˜å‚¨éç»“æ„åŒ–æ•°æ®ï¼‰</h2>
<p>é€‚åˆå­˜å‚¨éç»“æ„åŒ–/åŠç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚å­—æ®µä¸å›ºå®šçš„çˆ¬å–æ•°æ®ï¼‰ï¼Œæ— éœ€æå‰å®šä¹‰è¡¨ç»“æ„ï¼Œæ ¸å¿ƒä¾èµ–<code>pymongo</code>åº“ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-18">1. å®‰è£…ä¾èµ–åº“</h3>
<pre><code class="hljs language-bash" lang="bash">pip install pymongo
</code></pre>
<h3 data-id="heading-19">2. æå‰å¯åŠ¨MongoDBæœåŠ¡</h3>
<ul>
<li>æœ¬åœ°MongoDBï¼šå¯åŠ¨<code>mongod</code>æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£27017ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“å’Œé›†åˆï¼Œæ’å…¥æ•°æ®æ—¶è‡ªåŠ¨åˆ›å»ºï¼‰ï¼›</li>
<li>è¿œç¨‹MongoDBï¼šå‡†å¤‡å¥½è¿æ¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€‚</li>
</ul>
<h3 data-id="heading-20">3. ç¼–å†™MongoDBå­˜å‚¨Pipelineï¼ˆ<code>pipelines.py</code>ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pymongo

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MongodbStoragePipeline</span>:
    <span class="hljs-string">"""MongoDBæ•°æ®åº“å­˜å‚¨ç®¡é“"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># MongoDBè¿æ¥é…ç½®ï¼ˆæœ¬åœ°æ— å¯†ç ï¼Œè¿œç¨‹éœ€æ·»åŠ usernameã€passwordã€authSourceï¼‰</span>
        self.host = <span class="hljs-string">"localhost"</span>
        self.port = <span class="hljs-number">27017</span>
        self.db_name = <span class="hljs-string">"scrapy_data"</span>
        self.collection_name = <span class="hljs-string">"quotes"</span>  <span class="hljs-comment"># é›†åˆï¼ˆç±»ä¼¼MySQLçš„è¡¨ï¼‰</span>
        
        <span class="hljs-comment"># åˆå§‹åŒ–æ•°æ®åº“è¿æ¥å’Œé›†åˆå¯¹è±¡</span>
        self.client = <span class="hljs-literal">None</span>
        self.db = <span class="hljs-literal">None</span>
        self.collection = <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">open_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å¯åŠ¨æ—¶ï¼Œå»ºç«‹MongoDBè¿æ¥"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># å»ºç«‹è¿æ¥ï¼ˆæœ¬åœ°æ— å¯†ç ï¼‰</span>
            self.client = pymongo.MongoClient(host=self.host, port=self.port)
            <span class="hljs-comment"># é€‰æ‹©æ•°æ®åº“ï¼ˆä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼‰</span>
            self.db = self.client[self.db_name]
            <span class="hljs-comment"># é€‰æ‹©é›†åˆï¼ˆä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼‰</span>
            self.collection = self.db[self.collection_name]
            spider.logger.info(<span class="hljs-string">"MongoDBæ•°æ®åº“è¿æ¥æˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            spider.logger.error(<span class="hljs-string">f"MongoDBæ•°æ®åº“è¿æ¥å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">raise</span> e
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_item</span>(<span class="hljs-params">self, item, spider</span>):
        <span class="hljs-string">"""æ ¸å¿ƒï¼šå°†Itemæ•°æ®æ’å…¥MongoDBï¼ˆè½¬æ¢ä¸ºå­—å…¸å³å¯ï¼‰"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item.get(<span class="hljs-string">"content"</span>):
            <span class="hljs-keyword">return</span> item
        
        <span class="hljs-comment"># 1. å°†Itemè½¬æ¢ä¸ºå­—å…¸ï¼ˆScrapy Itemå¯¹è±¡å¯ç›´æ¥å¼ºè½¬ä¸ºdictï¼‰</span>
        item_dict = <span class="hljs-built_in">dict</span>(item)
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># 2. æ’å…¥æ•°æ®ï¼ˆinsert_oneï¼šæ’å…¥å•æ¡æ•°æ®ï¼›insert_manyï¼šæ’å…¥å¤šæ¡æ•°æ®ï¼‰</span>
            self.collection.insert_one(item_dict)
            spider.logger.info(<span class="hljs-string">f"æ•°æ®å·²æ’å…¥MongoDBï¼š<span class="hljs-subst">{item_dict.get(<span class="hljs-string">'author'</span>)}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            spider.logger.error(<span class="hljs-string">f"æ•°æ®æ’å…¥MongoDBå¤±è´¥ï¼š<span class="hljs-subst">{e}</span>ï¼Œæ•°æ®ï¼š<span class="hljs-subst">{item_dict}</span>"</span>)
        
        <span class="hljs-keyword">return</span> item
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">close_spider</span>(<span class="hljs-params">self, spider</span>):
        <span class="hljs-string">"""çˆ¬è™«å…³é—­æ—¶ï¼Œå…³é—­MongoDBè¿æ¥"""</span>
        <span class="hljs-keyword">if</span> self.client:
            self.client.close()
            spider.logger.info(<span class="hljs-string">"MongoDBæ•°æ®åº“è¿æ¥å·²å…³é—­"</span>)
</code></pre>
<h3 data-id="heading-21">4. å¯ç”¨MongoDB Pipelineï¼ˆ<code>settings.py</code>ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">ITEM_PIPELINES = {
   <span class="hljs-string">'data_storage_spider.pipelines.CsvFileStoragePipeline'</span>: <span class="hljs-number">300</span>,
   <span class="hljs-string">'data_storage_spider.pipelines.MysqlStoragePipeline'</span>: <span class="hljs-number">400</span>,
   <span class="hljs-string">'data_storage_spider.pipelines.MongodbStoragePipeline'</span>: <span class="hljs-number">500</span>,
}
</code></pre>
<h3 data-id="heading-22">5. è¿è¡Œçˆ¬è™«éªŒè¯ç»“æœ</h3>
<pre><code class="hljs language-bash" lang="bash">scrapy crawl test_spider
</code></pre>
<ul>
<li>éªŒè¯ï¼šä½¿ç”¨<code>mongo</code>ç»ˆç«¯è¿æ¥ï¼Œæ‰§è¡Œ<code>use scrapy_data; db.quotes.find().pretty();</code>ï¼Œå¯çœ‹åˆ°å·²æˆåŠŸæ’å…¥æ•°æ®ï¼Œå­—æ®µå®Œæ•´ã€‚</li>
</ul>
<h2 data-id="heading-23">äº”ã€æ ¸å¿ƒæ³¨æ„äº‹é¡¹ä¸å®æ“æŠ€å·§</h2>
<ol>
<li><strong>Pipelineä¼˜å…ˆçº§</strong>ï¼š<code>ITEM_PIPELINES</code>ä¸­çš„æ•°å­—ï¼ˆ1-1000ï¼‰è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œå…ˆæ‰§è¡Œçš„Pipelineå¤„ç†åçš„Itemä¼šä¼ é€’ç»™åç»­Pipelineï¼›</li>
<li><strong>æ•°æ®å»é‡</strong>ï¼š
<ul>
<li>MySQLï¼šå¯ç»™<code>content</code>å­—æ®µæ·»åŠ å”¯ä¸€ç´¢å¼•ï¼ˆ<code>ALTER TABLE quotes ADD UNIQUE INDEX uk_content (content(255));</code>ï¼‰ï¼Œé¿å…é‡å¤æ’å…¥ï¼›</li>
<li>MongoDBï¼šä½¿ç”¨<code>update_one()</code>ï¼Œè®¾ç½®<code>upsert=True</code>ï¼ˆå­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥ï¼‰ï¼ŒåŸºäºå”¯ä¸€å­—æ®µå»é‡ï¼›</li>
</ul>
</li>
<li><strong>å¼‚å¸¸å¤„ç†ä¸äº‹åŠ¡</strong>ï¼š
<ul>
<li>æ•°æ®åº“æ“ä½œå¿…é¡»æ·»åŠ <code>try-except</code>ï¼Œé¿å…å•ä¸ªæ•°æ®æ’å…¥å¤±è´¥å¯¼è‡´æ•´ä¸ªçˆ¬è™«å´©æºƒï¼›</li>
<li>MySQLéœ€æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼ˆ<code>conn.commit()</code>ï¼‰ï¼Œå‡ºé”™æ—¶å›æ»šï¼ˆ<code>conn.rollback()</code>ï¼‰ï¼›MongoDBæ— éœ€æ‰‹åŠ¨æäº¤ï¼Œé»˜è®¤è‡ªåŠ¨å†™å…¥ï¼›</li>
</ul>
</li>
<li><strong>ä¸­æ–‡ä¹±ç </strong>ï¼š
<ul>
<li>æœ¬åœ°æ–‡ä»¶ï¼šå¿…é¡»ä½¿ç”¨<code>encoding="utf_8_sig"</code>ï¼ˆCSV/JSONï¼‰ï¼›</li>
<li>MySQLï¼šæ•°æ®åº“ã€è¡¨ã€å­—æ®µå‡ä½¿ç”¨<code>utf8mb4</code>å­—ç¬¦é›†ï¼›</li>
<li>MongoDBï¼šé»˜è®¤æ”¯æŒUTF-8ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼›</li>
</ul>
</li>
<li><strong>èµ„æºé‡Šæ”¾</strong>ï¼š<code>open_spider()</code>å»ºç«‹è¿æ¥ï¼Œ<code>close_spider()</code>å…³é—­è¿æ¥ï¼Œé¿å…èµ„æºæ³„éœ²ï¼ˆå°¤å…¶é•¿æœŸè¿è¡Œçš„åˆ†å¸ƒå¼çˆ¬è™«ï¼‰ï¼›</li>
<li><strong>å¤§è§„æ¨¡æ•°æ®ä¼˜åŒ–</strong>ï¼š
<ul>
<li>æœ¬åœ°æ–‡ä»¶ï¼šé¿å…ä¸€æ¬¡æ€§å†™å…¥å¤§æ–‡ä»¶ï¼Œå¯æŒ‰æ‰¹æ¬¡æ‹†åˆ†ï¼›</li>
<li>æ•°æ®åº“ï¼šä½¿ç”¨æ‰¹é‡æ’å…¥ï¼ˆMySQL<code>executemany()</code>ã€MongoDB<code>insert_many()</code>ï¼‰ï¼Œå‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSï¼šUser-Agentå¼€å‘æŒ‡å¯¼]]></title>    <link>https://juejin.cn/post/7590681158716407848</link>    <guid>https://juejin.cn/post/7590681158716407848</guid>    <pubDate>2026-01-04T01:35:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590681158716407848" data-draft-id="7590597231707979811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSï¼šUser-Agentå¼€å‘æŒ‡å¯¼"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-04T01:35:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChinaDragon"/> <meta itemprop="url" content="https://juejin.cn/user/3966693681410840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSï¼šUser-Agentå¼€å‘æŒ‡å¯¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693681410840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChinaDragon
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:35:05.000Z" title="Sun Jan 04 2026 01:35:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ç®€ä»‹</h3>
<blockquote>
<p>User-Agentï¼ˆç®€ç§°UAï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«è®¾å¤‡ç±»å‹ã€æ“ä½œç³»ç»ŸåŠç‰ˆæœ¬ç­‰å…³é”®ä¿¡æ¯ã€‚åœ¨Webå¼€å‘ä¸­ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä½¿æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«è¯·æ±‚çš„æ¥æºè®¾å¤‡åŠå…¶ç‰¹æ€§ï¼Œä»è€Œæ ¹æ®è¿™äº›ä¿¡æ¯æä¾›å®šåˆ¶åŒ–çš„å†…å®¹å’ŒæœåŠ¡ã€‚å¦‚æœé¡µé¢æ— æ³•æ­£ç¡®è¯†åˆ«UAï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šç§å¼‚å¸¸æƒ…å†µã€‚ä¾‹å¦‚ï¼Œä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„é¡µé¢å¸ƒå±€å¯èƒ½ä¼šåœ¨æ¡Œé¢è®¾å¤‡ä¸Šæ˜¾ç¤ºé”™ä¹±ï¼Œåä¹‹äº¦ç„¶ã€‚æ­¤å¤–ï¼ŒæŸäº›ç‰¹å®šçš„æµè§ˆå™¨åŠŸèƒ½æˆ–CSSæ ·å¼å¯èƒ½ä»…åœ¨ç‰¹å®šçš„æµè§ˆå™¨ç‰ˆæœ¬ä¸­å—æ”¯æŒï¼Œå¦‚æœé¡µé¢æ— æ³•æ ¹æ®UAå­—ç¬¦ä¸²åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ï¼Œå°±å¯èƒ½å¯¼è‡´æ¸²æŸ“é—®é¢˜æˆ–é€»è¾‘é”™è¯¯ã€‚</p>
</blockquote>
<h3 data-id="heading-1">äºŒã€é»˜è®¤User-Agentç»“æ„</h3>
<h4 data-id="heading-2">2.1 é»˜è®¤User-Agentå®šä¹‰</h4>
<pre><code class="hljs language-bash" lang="bash">Mozilla/5.0 ({DeviceType}; {OSName} {OSVersion}) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/{ChromeCompatibleVersion}.0.0.0 Safari/537.36  ArkWeb/{ArkWeb VersionCode} {DeviceCompat} {æ‰©å±•åŒº}
</code></pre>
<p><strong>ä¸¾ä¾‹è¯´æ˜</strong></p>
<pre><code class="hljs language-bash" lang="bash">Mozilla/5.0 (Phone; OpenHarmony 5.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36  ArkWeb/4.1.6.1 Mobile
</code></pre>
<p><strong>å­—æ®µè¯´æ˜</strong></p>





































<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td align="left">DeviceType</td><td align="left">å½“å‰çš„è®¾å¤‡ç±»å‹ã€‚å–å€¼èŒƒå›´ï¼š<br/>- Phoneï¼šæ‰‹æœºè®¾å¤‡<br/>- Tabletï¼šå¹³æ¿è®¾å¤‡<br/>- PCï¼š2in1è®¾å¤‡</td></tr><tr><td align="left">OSName</td><td align="left">åŸºç¡€æ“ä½œç³»ç»Ÿåç§°ã€‚<br/>é»˜è®¤å–å€¼ï¼šOpenHarmony</td></tr><tr><td align="left">OSVersion</td><td align="left">åŸºç¡€æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œä¸¤ä½æ•°å­—ï¼ŒM.Sã€‚<br/>é€šè¿‡ç³»ç»Ÿå‚æ•°const.ohos.fullnameè§£æç‰ˆæœ¬å·å¾—åˆ°ï¼Œå–ç‰ˆæœ¬å·éƒ¨åˆ†M.Så‰ä¸¤ä½ã€‚<br/>é»˜è®¤å–å€¼ï¼šä¾‹å¦‚5.0</td></tr><tr><td align="left">ChromeCompatibleVersion</td><td align="left">å…¼å®¹Chromeä¸»ç‰ˆæœ¬çš„ç‰ˆæœ¬å·ï¼Œä»114ç‰ˆæœ¬å¼€å§‹æ¼”è¿›ã€‚<br/>é»˜è®¤å–å€¼ï¼š114</td></tr><tr><td align="left">ArkWeb</td><td align="left">HarmonyOSç‰ˆæœ¬Webå†…æ ¸åç§°ã€‚<br/>é»˜è®¤å–å€¼ï¼šArkWeb<br/> ArkWeb VersionCode	<br/>ArkWebç‰ˆæœ¬å·ï¼Œæ ¼å¼a.b.c.dã€‚<br/>é»˜è®¤å–å€¼ï¼šä¾‹å¦‚4.1.6.1</td></tr><tr><td align="left">DeviceCompat</td><td align="left">å‰å‘å…¼å®¹å­—æ®µã€‚<br/> é»˜è®¤å–å€¼ï¼šMobile</td></tr><tr><td align="left">æ‰©å±•åŒº</td><td align="left">ä¸‰æ–¹åº”ç”¨å¯ä»¥æ‰©å±•çš„å­—æ®µã€‚ <br/> ä¸‰æ–¹åº”ç”¨ä½¿ç”¨ArkWebç»„ä»¶æ—¶ï¼Œå¯ä»¥åšUAæ‰©å±•ï¼Œä¾‹å¦‚åŠ å…¥APPç›¸å…³ä¿¡æ¯æ ‡è¯†ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>è¯´æ˜</strong></p>
<ul>
<li>å½“å‰é»˜è®¤User-Agentçš„ArkWebå­—æ®µå‰æœ‰ä¸¤ä¸ªç©ºæ ¼ã€‚</li>
<li>å½“å‰é€šè¿‡User-Agentä¸­æ˜¯å¦å«æœ‰"Mobile"å­—æ®µæ¥åˆ¤æ–­æ˜¯å¦å¼€å¯å‰ç«¯HTMLé¡µé¢ä¸­metaæ ‡ç­¾çš„viewportå±æ€§ã€‚å½“User-Agentä¸­ä¸å«æœ‰"Mobile"å­—æ®µæ—¶ï¼Œmetaæ ‡ç­¾ä¸­viewportå±æ€§é»˜è®¤å…³é—­ï¼Œæ­¤æ—¶å¯é€šè¿‡æ˜¾æ€§è®¾ç½®metaViewportå±æ€§ä¸ºtrueæ¥è¦†ç›–å…³é—­çŠ¶æ€ã€‚</li>
<li>å»ºè®®é€šè¿‡OpenHarmonyå…³é”®å­—è¯†åˆ«æ˜¯å¦æ˜¯HarmonyOSè®¾å¤‡ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡DeviceTypeè¯†åˆ«è®¾å¤‡ç±»å‹ç”¨äºä¸åŒè®¾å¤‡ä¸Šçš„é¡µé¢æ˜¾ç¤ºï¼ˆArkWebå…³é”®å­—è¡¨ç¤ºè®¾å¤‡ä½¿ç”¨çš„webå†…æ ¸ï¼ŒOpenHarmonyå…³é”®å­—è¡¨ç¤ºè®¾å¤‡ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤æ¨èé€šè¿‡OpenHarmonyå…³é”®å­—è¯†åˆ«æ˜¯å¦æ˜¯HarmonyOSè®¾å¤‡ï¼‰ã€‚</li>
<li>{DistributionOSName}å’Œ{DistributionOSVersion}å­—æ®µåœ¨API version 15ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æœªå¯ç”¨ï¼Œä»API version 15ç‰ˆæœ¬å¼€å§‹ä¸åœ¨é»˜è®¤User-Agentä¸­ä½“ç°ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-3">ä¸‰ã€è‡ªå®šä¹‰User-Agentç»“æ„</h3>
<blockquote>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡è°ƒç”¨getUserAgent()æ¥å£è·å–å½“å‰é»˜è®¤çš„ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰å­—ç¬¦ä¸²ã€‚è¿™ä¸€æ¥å£æä¾›çš„é»˜è®¤User-Agentä¿¡æ¯ä¸ºå¼€å‘è€…æä¾›äº†åŸºç¡€ï¼Œä½¿å¼€å‘è€…èƒ½å¤ŸåŸºäºè¿™ä¸ªé»˜è®¤ä¿¡æ¯è¿›è¡Œå®šåˆ¶æˆ–æ‰©å±•ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ç¤ºä¾‹æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71420fa5f35244979d079e52ced04b75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=DUg4OrnR7wjfoS7I7MMGKxE%2Bh9c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">
import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestUserAgent {
  @State message: string = <span class="hljs-string">'getUserAgent'</span>;
  controller: webview.WebviewController = new webview.WebviewController()

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({space: 20}) {
      Button(this.message)
        .<span class="hljs-built_in">id</span>(<span class="hljs-string">'TestUserAgentHelloWorld'</span>)
        .fontSize(<span class="hljs-variable">$r</span>(<span class="hljs-string">'app.float.page_text_font_20fp'</span>))
        .fontWeight(FontWeight.Bold)
        .onClick(() =&gt; {
          try {
            let userAgent = this.controller.getUserAgent();
            console.log("è·å– userAgent: " + userAgent);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Web({ src: 'www.baidu.com', controller: this.controller })
    }
    .height('<span class="hljs-number">100</span>%')
    .width('<span class="hljs-number">100</span>%')
  }
}
</code></pre>
<blockquote>
<p>ä»¥ä¸‹ç¤ºä¾‹é€šè¿‡ <strong>setCustomUserAgent()</strong> æ¥å£è®¾ç½®è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†ï¼Œä½†è¯·æ³¨æ„ï¼Œæ­¤æ“ä½œä¼šè¦†ç›–ç³»ç»Ÿçš„ç”¨æˆ·ä»£ç†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®å°†æ‰©å±•å­—æ®µè¿½åŠ åœ¨é»˜è®¤ç”¨æˆ·ä»£ç†çš„æœ«å°¾ï¼Œæ¯”å¦‚ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„å¼€å‘åœºæ™¯ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿé»˜è®¤ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²çš„æœ«å°¾è¿½åŠ ç‰¹å®šçš„APPæ ‡è¯†ï¼Œè¿™æ ·æ—¢èƒ½ä¿ç•™åŸæœ‰ç”¨æˆ·ä»£ç†ä¿¡æ¯ï¼Œåˆèƒ½å¢åŠ è‡ªå®šä¹‰çš„åº”ç”¨è¯†åˆ«ä¿¡æ¯ã€‚ <br/>
å½“Webç»„ä»¶srcè®¾ç½®äº†urlæ—¶ï¼Œå»ºè®®åœ¨<strong>onControllerAttached</strong>å›è°ƒäº‹ä»¶ä¸­è®¾ç½®User-Agentï¼Œè®¾ç½®æ–¹å¼è¯·å‚è€ƒç¤ºä¾‹ã€‚ä¸å»ºè®®å°†User-Agentè®¾ç½®åœ¨onLoadInterceptå›è°ƒäº‹ä»¶ä¸­ï¼Œä¼šæ¦‚ç‡æ€§å‡ºç°è®¾ç½®å¤±è´¥ã€‚å¦‚æœæœªåœ¨onControllerAttachedå›è°ƒäº‹ä»¶ä¸­è®¾ç½®User-Agentã€‚å†è°ƒç”¨setCustomUserAgentæ–¹æ³•æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°åŠ è½½çš„é¡µé¢ä¸å®é™…è®¾ç½®User-Agentä¸ç¬¦çš„å¼‚å¸¸ç°è±¡ã€‚ <br/>
å½“Webç»„ä»¶srcè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œå»ºè®®å…ˆè°ƒç”¨setCustomUserAgentæ–¹æ³•è®¾ç½®User-Agentï¼Œå†é€šè¿‡loadUrlåŠ è½½å…·ä½“é¡µé¢ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ç¤ºä¾‹æ•ˆæœå›¾</strong> <br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23cd7366741a43a7b418c27a3224231f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095305&amp;x-signature=RQ9Z0rczoOyRY1BH4Gv8OAJpkTk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">
import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

const TAG = <span class="hljs-string">"TestUserAgent"</span>
@Entry
@Component
struct TestUserAgent {
  @State message: string = <span class="hljs-string">'getUserAgent'</span>;
  controller: webview.WebviewController = new webview.WebviewController()
  // ä¸‰æ–¹åº”ç”¨ç›¸å…³ä¿¡æ¯æ ‡è¯†
  @State customUserAgent: string = <span class="hljs-string">' DemoApp è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†'</span>;

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({space: 20}) {
      Button(this.message)
        .<span class="hljs-built_in">id</span>(<span class="hljs-string">'TestUserAgentHelloWorld'</span>)
        .fontSize(<span class="hljs-variable">$r</span>(<span class="hljs-string">'app.float.page_text_font_20fp'</span>))
        .fontWeight(FontWeight.Bold)
        .onClick(() =&gt; {
          try {
            let userAgent = this.controller.getUserAgent();
            let customUserAgent = this.controller.getCustomUserAgent()
            console.log("è·å– userAgent: " + userAgent);
            console.log("è·å– customUserAgent: " + customUserAgent);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Web({ src: 'https://www.baidu.com/', controller: this.controller })
        .domStorageAccess(true)
        .onControllerAttached(() =&gt;{
          console.log("æ‰§è¡Œäº† onControllerAttached å›è°ƒ");
          try {
            let userAgent = this.controller.getUserAgent()+ this.customUserAgent
            this.controller.setCustomUserAgent(userAgent)
          }catch (error){
            console.error(TAG, `ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
    }
    .height('<span class="hljs-number">100</span>%')
    .width('<span class="hljs-number">100</span>%')
  }
}
</code></pre>
<blockquote>
<p>ä»<strong>API version 20</strong>å¼€å§‹ï¼Œå¯é€šè¿‡ <strong>setAppCustomUserAgent()</strong> æ¥å£è®¾ç½®åº”ç”¨çº§è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†ï¼Œæˆ–è€…é€šè¿‡ <strong>setUserAgentForHosts()</strong> å¯¹ç‰¹å®šç½‘ç«™è®¾ç½®åº”ç”¨çº§è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†ï¼Œè¦†ç›–ç³»ç»Ÿçš„ç”¨æˆ·ä»£ç†ï¼Œåº”ç”¨å†…æ‰€æœ‰Webç»„ä»¶ç”Ÿæ•ˆã€‚ <br/>
å»ºè®®åœ¨Webç»„ä»¶åˆ›å»ºå‰å…ˆè°ƒç”¨é™æ€æ¥å£getDefaultUserAgentè·å–é»˜è®¤çš„ç”¨æˆ·ä»£ç†ï¼ˆUser-Agentï¼‰å­—ç¬¦ä¸²ï¼Œç„¶åè°ƒç”¨setAppCustomUserAgentï¼ŒsetUserAgentForHostsæ–¹æ³•è®¾ç½®User-Agentï¼Œå†åˆ›å»ºæŒ‡å®šsrcçš„Webç»„ä»¶æˆ–é€šè¿‡loadUrlåŠ è½½å…·ä½“é¡µé¢ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">
import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestUserAgent2 {
  controller: webview.WebviewController = new webview.WebviewController();
  @State userAgent: string = <span class="hljs-string">''</span>;

  aboutToAppear(): void {
    try {
      webview.WebviewController.initializeWebEngine();
      <span class="hljs-built_in">let</span> defaultUserAgent = webview.WebviewController.getDefaultUserAgent();
      <span class="hljs-built_in">let</span> appUA = defaultUserAgent + <span class="hljs-string">" appUA "</span>;
      webview.WebviewController.setAppCustomUserAgent(appUA+<span class="hljs-string">" application"</span>);
      webview.WebviewController.setUserAgentForHosts(
        appUA + <span class="hljs-string">"specific_net"</span>,
        [
          <span class="hljs-string">"developer.huawei.com"</span>,
          <span class="hljs-string">"www.deepseek.com"</span>,
          <span class="hljs-string">"www.baidu.com"</span>
        ]
      );
    } catch (error) {
      console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
    }
  }

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({space: 20}) {
      Button(<span class="hljs-string">'getCustomUserAgent'</span>)
        .onClick(() =&gt; {
          try {
            this.userAgent = this.controller.getCustomUserAgent();
            console.log("é€šè¿‡getCustomUserAgent()æ¥å£è·å–è‡ªå®šä¹‰ç”¨æˆ·ä»£ç† userAgent: " + this.userAgent);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Web({ src: 'https://www.baidu.com', controller: this.controller })
    }
  }
}
</code></pre>
<blockquote>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡getCustomUserAgent()æ¥å£è·å–è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">
import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestUserAgent2 {
  controller: webview.WebviewController = new webview.WebviewController();
  @State userAgent: string = <span class="hljs-string">''</span>;

  aboutToAppear(): void {
    try {
      webview.WebviewController.initializeWebEngine();
      <span class="hljs-built_in">let</span> defaultUserAgent = webview.WebviewController.getDefaultUserAgent();
      <span class="hljs-built_in">let</span> appUA = defaultUserAgent + <span class="hljs-string">" appUA "</span>;
      webview.WebviewController.setAppCustomUserAgent(appUA+<span class="hljs-string">" application"</span>);
      webview.WebviewController.setUserAgentForHosts(
        appUA + <span class="hljs-string">"spefical_net"</span>,
        [
          <span class="hljs-string">"developer.huawei.com"</span>,
          <span class="hljs-string">"www.deepseek.com"</span>,
          <span class="hljs-string">"www.baidu.com"</span>
        ]
      );
    } catch (error) {
      console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
    }
  }

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({space: 20}) {
      Button(<span class="hljs-string">'getCustomUserAgent'</span>)
        .onClick(() =&gt; {
          try {
            this.userAgent = this.controller.getCustomUserAgent();
            console.log("é€šè¿‡getCustomUserAgent()æ¥å£è·å–è‡ªå®šä¹‰ç”¨æˆ·ä»£ç† userAgent: " + this.userAgent);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Web({ src: 'https://www.baidu.com', controller: this.controller })
    }
  }
}
</code></pre>
<h3 data-id="heading-4">å››ã€ç›¸å…³User-Agentæ¥å£ä¼˜å…ˆçº§</h3>






























<table><thead><tr><th align="left">æ¥å£åç§°</th><th align="left">ä¼˜å…ˆçº§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">setCustomUserAgent</td><td align="left">æœ€é«˜</td><td align="left">å¯¹è°ƒç”¨çš„Webç»„ä»¶ç”Ÿæ•ˆã€‚</td></tr><tr><td align="left">setUserAgentForHosts</td><td align="left">ä½äºsetCustomUserAgent</td><td align="left">å¯¹åº”ç”¨ä¸­æ‰€æœ‰Webç»„ä»¶è®¿é—®æŒ‡å®šç½‘ç«™ç”Ÿæ•ˆã€‚</td></tr><tr><td align="left">setAppCustomUserAgent</td><td align="left">ä½äºsetUserAgentForHosts</td><td align="left">å¯¹åº”ç”¨ä¸­æ‰€æœ‰Webç»„ä»¶ç”Ÿæ•ˆã€‚</td></tr><tr><td align="left">ArkWebé»˜è®¤UA</td><td align="left">æœ€ä½</td><td align="left">å¯¹åº”ç”¨ä¸­æ‰€æœ‰Webç»„ä»¶ç”Ÿæ•ˆï¼Œåªè¯»ï¼Œé€šè¿‡getDefaultUserAgentè·å–ã€‚</td></tr></tbody></table>
<h3 data-id="heading-5">äº”ã€å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-6">5.1 å¦‚ä½•é€šè¿‡User-Agentæ¥è¯†åˆ«HarmonyOSæ“ä½œç³»ç»Ÿä¸­ä¸åŒè®¾å¤‡</h4>
<blockquote>
<p>HarmonyOSè®¾å¤‡çš„è¯†åˆ«ä¸»è¦é€šè¿‡User-Agentä¸­çš„ç³»ç»Ÿã€ç³»ç»Ÿç‰ˆæœ¬å’Œè®¾å¤‡ç±»å‹ä¸‰ä¸ªç»´åº¦æ¥åˆ¤æ–­ã€‚å»ºè®®åŒæ—¶æ£€æŸ¥ç³»ç»Ÿã€ç³»ç»Ÿç‰ˆæœ¬å’Œè®¾å¤‡ç±»å‹ï¼Œä»¥ç¡®ä¿æ›´å‡†ç¡®çš„è®¾å¤‡è¯†åˆ«ã€‚</p>
</blockquote>
<h5 data-id="heading-7">5.1.1 ç³»ç»Ÿè¯†åˆ«</h5>
<blockquote>
<p>é€šè¿‡User-Agentä¸­çš„{OSName}å­—æ®µè¯†åˆ«HarmonyOSç³»ç»Ÿã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">const isHarmonyOS = () =&gt; /OpenHarmony/i.test(navigator.userAgent);   
</code></pre>
<h5 data-id="heading-8">5.1.2 ç³»ç»Ÿç‰ˆæœ¬è¯†åˆ«</h5>
<blockquote>
<p>é€šè¿‡User-Agentä¸­çš„{OSName}å’Œ{OSVersion}å­—æ®µè¯†åˆ«HarmonyOSç³»ç»ŸåŠç³»ç»Ÿç‰ˆæœ¬ã€‚æ ¼å¼ä¸ºï¼šOpenHarmony + ç‰ˆæœ¬å·ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">// æ£€æµ‹æ˜¯å¦æ˜¯HarmonyOSç³»ç»Ÿ
const matches = navigator.userAgent.match(/OpenHarmony (\d+\.?\d*)/);  
matches?.length &amp;&amp; Number(matches[1]) &gt; 0
// æ£€æµ‹æ˜¯å¦æ˜¯HarmonyOS NEXTç³»ç»Ÿ
const matches = navigator.userAgent.match(/OpenHarmony (\d+\.?\d*)/);  
matches?.length &amp;&amp; Number(matches[1]) &gt;= 5;   
</code></pre>
<h5 data-id="heading-9">5.1.3 è®¾å¤‡ç±»å‹è¯†åˆ«</h5>
<blockquote>
<p>é€šè¿‡deviceTypeå­—æ®µæ¥è¯†åˆ«ä¸åŒè®¾å¤‡ç±»å‹ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">// æ£€æµ‹æ˜¯å¦ä¸ºæ‰‹æœºè®¾å¤‡
const isPhone = () =&gt; /Phone/i.test(navigator.userAgent);

// æ£€æµ‹æ˜¯å¦ä¸ºå¹³æ¿è®¾å¤‡  
const isTablet = () =&gt; /Tablet/i.test(navigator.userAgent);

// æ£€æµ‹æ˜¯å¦ä¸º2in1è®¾å¤‡  
const is2in1 = () =&gt; /PC/i.test(navigator.userAgent);
</code></pre>
<h4 data-id="heading-10">5.2 å¦‚ä½•æ¨¡æ‹ŸHarmonyOSæ“ä½œç³»ç»Ÿçš„User-Agentè¿›è¡Œå‰ç«¯è°ƒè¯•</h4>
<blockquote>
<p>åœ¨Windows/Mac/Linuxç­‰æ“ä½œç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡Chrome/Edge/Firefoxç­‰æµè§ˆå™¨DevToolsæä¾›çš„User-Agentå¤å†™èƒ½åŠ›ï¼Œæ¨¡æ‹ŸHarmonyOS User-Agentã€‚</p>
</blockquote>
<h4 data-id="heading-11">5.3 å¦‚ä½•åœ¨HarmonyOSä¸­è‡ªå®šä¹‰User-Agentä»¥å®ç°H5å…¼å®¹æ€§</h4>
<blockquote>
<p>HarmonyOSæä¾›setCustomUserAgentæ¥å£ä»¥æ”¯æŒUser-Agentçš„è‡ªå®šä¹‰è®¾ç½®ã€‚ä¸ºé€‚é…ç§»åŠ¨ç«¯H5é¡µé¢é€šå¸¸ä¾èµ–çš„UAæ ‡è¯†æ£€æµ‹ï¼ˆå¦‚Mobileã€Androidç­‰ï¼‰ï¼Œå¹¶ç¡®ä¿ä¸è¦†ç›–ç³»ç»Ÿé»˜è®¤UAä¿¡æ¯ï¼Œæ¨èæŒ‰å¦‚ä¸‹æ–¹å¼æ“ä½œï¼šé¦–å…ˆé€šè¿‡setCustomUserAgent()æ¥å£è·å–ç³»ç»Ÿé»˜è®¤User-Agentå­—ç¬¦ä¸²ï¼Œéšåå°†H5å…¼å®¹æ‰€éœ€çš„è‡ªå®šä¹‰æ ‡è¯†å­—æ®µè¿½åŠ è‡³è¯¥å­—ç¬¦ä¸²æœ«å°¾ï¼Œæœ€åè°ƒç”¨setCustomUserAgentæ¥å£è®¾ç½®ä¿®æ”¹åçš„å®Œæ•´UAå­—ç¬¦ä¸²ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€æ Kotlin å†…è”å‡½æ•°ï¼šä¸inlineç›¸å…³çš„å…³é”®å­—]]></title>    <link>https://juejin.cn/post/7590957076630552622</link>    <guid>https://juejin.cn/post/7590957076630552622</guid>    <pubDate>2026-01-04T01:38:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590957076630552622" data-draft-id="7590929624743395378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€æ Kotlin å†…è”å‡½æ•°ï¼šä¸inlineç›¸å…³çš„å…³é”®å­—"/> <meta itemprop="keywords" content="Java,Android,Kotlin"/> <meta itemprop="datePublished" content="2026-01-04T01:38:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ„¤æ€’çš„ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/4125023358426190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€æ Kotlin å†…è”å‡½æ•°ï¼šä¸inlineç›¸å…³çš„å…³é”®å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023358426190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ„¤æ€’çš„ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:38:23.000Z" title="Sun Jan 04 2026 01:38:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬çŸ¥é“ <code>inline</code> å‡½æ•°çš„ä½œç”¨æ˜¯å¯ä»¥åœ¨è°ƒç”¨å¤„æ›¿æ¢ä¸ºå‡½æ•°ä½“å®ç°ï¼Œå¯ä»¥å‡å°‘å‡½æ•°è°ƒç”¨æ ˆçš„ä½¿ç”¨ï¼Œä»è€Œæå‡æ•ˆç‡ï¼Œæœ¬æ–‡ä¼šä¸€èµ·çœ‹çœ‹è·Ÿ <code>inline</code> ä¸€èµ·é…åˆä½¿ç”¨çš„å‡ ä¸ªå…³é”®å­—</p>
<h2 data-id="heading-0">0x00 inline + reified</h2>
<p>åœ¨Kotlinä¸­ç»å¸¸ä¼šçœ‹åˆ°ä¸€äº›å†…è”å‡½æ•°æ˜¯é…åˆ reified å…³é”®å­—ä½¿ç”¨</p>
<ul>
<li>ä¿ç•™è¿è¡Œæ—¶çš„ç±»å‹</li>
<li>åŸç†æ˜¯åœ¨è°ƒç”¨å¤„å°†èŒƒå‹æ›¿æ¢ä¸ºå®é™…ç±»å‹</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">checkType</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> T) { <span class="hljs-comment">// âŒ è¿™é‡Œä¼šç¼–è¯‘å‡ºé”™ï¼</span>
				println(<span class="hljs-string">"<span class="hljs-subst">${obj}</span> æ˜¯ <span class="hljs-subst">${T::class.simpleName}</span> ç±»å‹"</span>)
		}
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ·»åŠ  reified å…³é”®å­—ï¼ˆå¿…é¡»é…åˆ inline ä½¿ç”¨ï¼‰</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> <span class="hljs-title">checkType</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> T) { <span class="hljs-comment">// âœ… ç°åœ¨å¯ä»¥äº†ï¼</span>
        println(<span class="hljs-string">"<span class="hljs-subst">${obj}</span> æ˜¯ <span class="hljs-subst">${T::class.simpleName}</span> ç±»å‹"</span>)
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
checkType&lt;String&gt;(<span class="hljs-string">"Hello"</span>)  <span class="hljs-comment">// è¾“å‡ºï¼šHello æ˜¯ String ç±»å‹</span>
checkType&lt;<span class="hljs-built_in">Int</span>&gt;(<span class="hljs-string">"Text"</span>)      <span class="hljs-comment">// æ— è¾“å‡ºï¼Œç±»å‹ä¸åŒ¹é…</span>
</code></pre>
<h3 data-id="heading-1"><strong>ç®€åŒ–Activityå¯åŠ¨ï¼ˆæ— éœ€ä¼ é€’Classå‚æ•°ï¼‰</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ reified çš„ä¼˜é›…æ–¹å¼</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T : Activity&gt;</span> Context.<span class="hljs-title">startActivity</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, T::<span class="hljs-keyword">class</span>.java) <span class="hljs-comment">// ç›´æ¥è®¿é—®æ³›å‹ç±»å‹çš„Class</span>
    startActivity(intent)
}
<span class="hljs-comment">// è°ƒç”¨ - ç±»å‹æ¸…æ™°ï¼Œæ— éœ€::class.java</span>
startActivity&lt;DetailActivity&gt;()
</code></pre>
<h3 data-id="heading-2"><strong>Retrofit + reified ç®€åŒ–APIå“åº”å¤„ç†</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦ä¼ é€’Type</span>
apiService.getUser().enqueue(<span class="hljs-keyword">object</span> : Callback&lt;User&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>&lt;<span class="hljs-type">User</span>&gt;, response: <span class="hljs-type">Response</span>&lt;<span class="hljs-type">User</span>&gt;)</span></span> {
        <span class="hljs-comment">// å¤„ç†å“åº”</span>
    }
})

<span class="hljs-comment">// ä½¿ç”¨ reified çš„æ‰©å±•å‡½æ•°</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;<span class="hljs-keyword">reified</span> T&gt;</span> Call<span class="hljs-type">&lt;T&gt;</span>.<span class="hljs-title">enqueueSimplified</span><span class="hljs-params">(
    <span class="hljs-keyword">crossinline</span> onSuccess: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>,
    <span class="hljs-keyword">crossinline</span> onError: (<span class="hljs-type">Throwable</span>) -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    enqueue(<span class="hljs-keyword">object</span> : Callback&lt;T&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>&lt;<span class="hljs-type">T</span>&gt;, response: <span class="hljs-type">Response</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span> {
            <span class="hljs-keyword">if</span> (response.isSuccessful) {
                onSuccess(response.body()!!)
            }
        }
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>&lt;<span class="hljs-type">T</span>&gt;, t: <span class="hljs-type">Throwable</span>)</span></span> {
            onError(t)
        }
    })
}

<span class="hljs-comment">// è°ƒç”¨æ›´åŠ ç®€æ´</span>
apiService.getUser().enqueueSimplified(
    onSuccess = { user -&gt; showUser(user) },
    onError = { error -&gt; showError(error) }
)
</code></pre>
<h2 data-id="heading-3">0x01 <strong><code>noinline</code>ï¼šé˜»æ­¢å†…è”</strong></h2>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ<strong>å½“ä¸€ä¸ª Lambda å‚æ•°éœ€è¦è¢«</strong>å­˜å‚¨</strong>ã€<strong>ä¼ é€’</strong>ç»™å…¶ä»–éå†…è”å‡½æ•°ï¼Œæˆ–åœ¨<strong>éå†…è”ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨</strong>æ—¶ï¼Œå°±å¿…é¡»ä½¿ç”¨ <code>noinline</code>.</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¤ºä¾‹ï¼šéœ€è¦å­˜å‚¨ Lambda</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(
    <span class="hljs-keyword">crossinline</span> onStart: () -&gt; <span class="hljs-type">Unit</span>, <span class="hljs-comment">// è¿™ä¸ªä¼šè¢«å†…è”</span>
    <span class="hljs-keyword">noinline</span> onComplete: () -&gt; <span class="hljs-type">Unit</span>   <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šè¢«å†…è”</span>
)</span></span> {
    <span class="hljs-comment">// 1. onStart å¯ä»¥ç›´æ¥è°ƒç”¨ï¼ˆå†…è”ï¼‰</span>
    onStart()
    
    <span class="hljs-comment">// 2. onComplete éœ€è¦è¢«å­˜å‚¨æˆ–ä¼ é€’</span>
    <span class="hljs-keyword">val</span> completionCallback = onComplete  <span class="hljs-comment">// âœ… å¯ä»¥å­˜å‚¨ï¼Œå› ä¸ºå®ƒæ˜¯ noinline</span>
    runLater(completionCallback)         <span class="hljs-comment">// âœ… å¯ä»¥ä¼ é€’ç»™æ™®é€šå‡½æ•°</span>
    
    <span class="hljs-comment">// 3. å°è¯•å­˜å‚¨ onStart ä¼šæŠ¥é”™</span>
    <span class="hljs-comment">// val startCallback = onStart  // âŒ é”™è¯¯ï¼šä¸èƒ½å­˜å‚¨ crossinline lambda</span>
}

<span class="hljs-comment">// ä¸€ä¸ªæ™®é€šï¼ˆéå†…è”ï¼‰å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">runLater</span><span class="hljs-params">(callback: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-comment">// ç¨åæ‰§è¡Œ...</span>
}Â·
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>å˜ä¸ºæ™®é€šå‡½æ•°å¯¹è±¡ï¼Œæœ‰å†…å­˜å¼€é”€</li>
<li>å¯ä»¥ä¼ é€’ç»™å…¶ä»–éå†…è”å‡½æ•°</li>
<li>å¯ä»¥å­˜å‚¨åœ¨å˜é‡æˆ–å±æ€§ä¸­</li>
<li><strong>ä¸æ”¯æŒéå±€éƒ¨è¿”å›</strong>ï¼ˆå› ä¸ºå®ƒå·²ç»ä¸æ˜¯å†…è”çš„äº†ï¼‰</li>
</ul>
<h2 data-id="heading-4">0x02 <strong><code>crossinline</code>ï¼šç¦æ­¢éå±€éƒ¨è¿”å›</strong></h2>
<p><strong>ä½œç”¨</strong>ï¼šå…è®¸ Lambda è¢«å†…è”ï¼Œä½†<strong>ç¦æ­¢åœ¨ Lambda å†…éƒ¨ä½¿ç”¨éå±€éƒ¨è¿”å›</strong>ï¼ˆå³ç›´æ¥Â <code>return</code>ï¼‰ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong></p>
<p>å½“ Lambda å‚æ•°åœ¨å¦ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨æ—¶ï¼ˆå¦‚åµŒå¥—å‡½æ•°ã€å¦ä¸€ä¸ª Lambdaï¼‰ï¼Œç›´æ¥Â <code>return</code>Â ä¼šå˜å¾—è¯­ä¹‰æ¨¡ç³Šï¼Œå› æ­¤éœ€è¦ç¦æ­¢</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¤ºä¾‹ï¼šLambda åœ¨åµŒå¥—ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">runInBackground</span><span class="hljs-params">(<span class="hljs-keyword">crossinline</span> task: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-comment">// å°† task ä¼ é€’ç»™å¦ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡</span>
    Thread {
        task()  <span class="hljs-comment">// è¿™é‡Œ task æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸æ˜¯ä» runInBackground è¿”å›</span>
    }.start()
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testFunction</span><span class="hljs-params">()</span></span> {
    runInBackground {
        println(<span class="hljs-string">"åœ¨åå°æ‰§è¡Œ"</span>)
        <span class="hljs-comment">// return  // âŒ å¦‚æœå…è®¸ï¼Œè¿™ä¸ª return æ˜¯è¦ä» testFunction è¿”å›ï¼Œè¿˜æ˜¯ä» Lambda è¿”å›ï¼Ÿ</span>
        <span class="hljs-comment">// ç¼–è¯‘å™¨ç¦æ­¢è¿™ç§æ¨¡ç³Šçš„è¯­ä¹‰ï¼Œå¿…é¡»ä½¿ç”¨ï¼š</span>
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@runInBackground</span>  <span class="hljs-comment">// âœ… æ˜ç¡®è¡¨ç¤ºä» Lambda è¿”å›</span>
    }
    println(<span class="hljs-string">"è¿™è¡Œä¼šè¢«æ‰§è¡Œ"</span>)
}
</code></pre>
<p><strong>å…¸å‹åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Android ä¸­çš„ View.post å°±æ˜¯ä¸€ä¸ªå…¸å‹ä¾‹å­</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">post</span><span class="hljs-params">(<span class="hljs-keyword">crossinline</span> action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> runnable = Runnable { action() }  <span class="hljs-comment">// action åœ¨ Runnable ä¸­æ‰§è¡Œ</span>
    handler.post(runnable)
}

<span class="hljs-comment">// ä½¿ç”¨</span>
view.post {
    updateUI()
    <span class="hljs-comment">// ä¸èƒ½ç›´æ¥ returnï¼Œå¿…é¡»ç”¨ return@post</span>
    <span class="hljs-keyword">if</span> (condition) <span class="hljs-keyword">return</span><span class="hljs-symbol">@post</span>  <span class="hljs-comment">// âœ… å±€éƒ¨è¿”å›</span>
}
</code></pre>
<p><strong>åœºæ™¯ï¼šç»“åˆä½¿ç”¨å¤šä¸ªä¿®é¥°ç¬¦</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(
    <span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">noinline</span> validator: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Boolean</span>, <span class="hljs-comment">// éœ€è¦ä¼ é€’ç»™æ™®é€šå‡½æ•°</span>
    <span class="hljs-keyword">crossinline</span> onSuccess: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span>, <span class="hljs-comment">// åœ¨å›è°ƒä¸­æ‰§è¡Œï¼Œç¦æ­¢éå±€éƒ¨è¿”å›</span>
    onError: (<span class="hljs-type">Exception</span>) -&gt; <span class="hljs-type">Unit</span> <span class="hljs-comment">// é»˜è®¤å†…è”ï¼Œå…è®¸éå±€éƒ¨è¿”å›</span>
)</span></span> {
    <span class="hljs-comment">// validator è¢«ä¼ é€’ç»™æ™®é€šå‡½æ•°</span>
    <span class="hljs-keyword">if</span> (!validateInput(<span class="hljs-keyword">data</span>, validator)) {
        onError(IllegalArgumentException(<span class="hljs-string">"æ— æ•ˆæ•°æ®"</span>))
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// onSuccess åœ¨å¼‚æ­¥å›è°ƒä¸­æ‰§è¡Œ</span>
    doAsyncWork(<span class="hljs-keyword">data</span>) { result -&gt;
        onSuccess(result)  <span class="hljs-comment">// è¿™é‡Œç¦æ­¢éå±€éƒ¨è¿”å›</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">validateInput</span><span class="hljs-params">(input: <span class="hljs-type">String</span>, validator: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> validator(input)  <span class="hljs-comment">// æ™®é€šå‡½æ•°æ¥æ”¶ noinline lambda</span>
}
</code></pre>
<h2 data-id="heading-5">0x03 <strong>æ ¸å¿ƒæ€»ç»“</strong></h2>
<ol>
<li><strong><code>noinline</code>Â æ˜¯â€œåŠŸèƒ½å¼€å…³â€</strong>ï¼šå…³é—­å†…è”ï¼Œæ¢å–å­˜å‚¨/ä¼ é€’èƒ½åŠ›</li>
<li><strong><code>crossinline</code>Â æ˜¯â€œå®‰å…¨é™åˆ¶â€</strong>ï¼šä¿æŒå†…è”ï¼Œä½†ç¦æ­¢æ¨¡ç³Šçš„è¿”å›è¯­ä¹‰</li>
<li><strong>é»˜è®¤è¡Œä¸ºæ˜¯æœ€çµæ´»çš„</strong>ï¼šæ—¢å†…è”åˆå…è®¸éå±€éƒ¨è¿”å›ï¼Œä½†é™åˆ¶æœ€å¤š</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSï¼šç®¡ç†CookieåŠæ•°æ®å­˜å‚¨]]></title>    <link>https://juejin.cn/post/7590433626560905251</link>    <guid>https://juejin.cn/post/7590433626560905251</guid>    <pubDate>2026-01-04T01:39:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590433626560905251" data-draft-id="7590433626560839715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSï¼šç®¡ç†CookieåŠæ•°æ®å­˜å‚¨"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-04T01:39:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChinaDragon"/> <meta itemprop="url" content="https://juejin.cn/user/3966693681410840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSï¼šç®¡ç†CookieåŠæ•°æ®å­˜å‚¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693681410840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChinaDragon
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:39:54.000Z" title="Sun Jan 04 2026 01:39:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ æ¦‚è¿°</h3>
<blockquote>
<p>Cookieæ˜¯æœåŠ¡ç«¯å‘é€å®¢æˆ·ç«¯çš„æ•°æ®ã€‚å®¢æˆ·ç«¯æŒæœ‰Cookieï¼Œä¾¿äºæœåŠ¡ç«¯å¿«é€Ÿè¯†åˆ«èº«ä»½å’ŒçŠ¶æ€ã€‚ <br/>
å½“Cookieçš„SameSiteå±æ€§æœªæŒ‡å®šæ—¶ï¼Œé»˜è®¤å€¼ä¸ºSameSite=Laxã€‚è¿™ç§è®¾ç½®ä¸‹ï¼ŒCookieä»…åœ¨ç”¨æˆ·å¯¼èˆªåˆ°å…¶æºç«™ç‚¹æ—¶å‘é€ï¼Œä¸ä¼šåœ¨è·¨ç«™è¯·æ±‚ä¸­å‘é€ã€‚</p>
</blockquote>
<h3 data-id="heading-1">äºŒã€Cookieç®¡ç†</h3>
<blockquote>
<p>Webç»„ä»¶æä¾›WebCookieManagerç±»æ¥ç®¡ç†Cookieä¿¡æ¯ã€‚Cookieä¿¡æ¯å­˜å‚¨åœ¨åº”ç”¨æ²™ç®±è·¯å¾„ä¸‹/proc/{pid}/root/data/storage/el2/base/cache/web/Cookiesçš„æ–‡ä»¶ä¸­ã€‚ <br/>
ä¸‹é¢ä»¥configCookieSync()æ¥å£ä¸ºä¾‹ï¼Œä¸ºâ€œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.baidu.com%25E2%2580%259D%25E8%25AE%25BE%25E7%25BD%25AE%25E5%258D%2595%25E4%25B8%25AACookie%25E7%259A%2584%25E5%2580%25BC%25E2%2580%259Cvalue%3Dtest%25E2%2580%259D%25E3%2580%2582%25E5%2585%25B6%25E4%25BB%2596Cookie%25E7%259A%2584%25E7%259B%25B8%25E5%2585%25B3%25E5%258A%259F%25E8%2583%25BD%25E5%258F%258A%25E4%25BD%25BF%25E7%2594%25A8%25EF%25BC%258C%25E8%25AF%25B7%25E5%258F%2582%25E8%2580%2583WebCookieManager()%25E6%258E%25A5%25E5%258F%25A3%25E6%2596%2587%25E6%25A1%25A3%25E3%2580%2582" target="_blank" title="http://www.baidu.com%E2%80%9D%E8%AE%BE%E7%BD%AE%E5%8D%95%E4%B8%AACookie%E7%9A%84%E5%80%BC%E2%80%9Cvalue=test%E2%80%9D%E3%80%82%E5%85%B6%E4%BB%96Cookie%E7%9A%84%E7%9B%B8%E5%85%B3%E5%8A%9F%E8%83%BD%E5%8F%8A%E4%BD%BF%E7%94%A8%EF%BC%8C%E8%AF%B7%E5%8F%82%E8%80%83WebCookieManager()%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3%E3%80%82" ref="nofollow noopener noreferrer">www.baidu.comâ€è®¾ç½®å•ä¸ªCookieçš„å€¼â€œvalue=testâ€ã€‚å…¶ä»–Cookieçš„ç›¸å…³åŠŸèƒ½åŠä½¿ç”¨ï¼Œè¯·å‚è€ƒWebCookieManager()æ¥å£æ–‡æ¡£ã€‚</a></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">
 import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
 import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

 @Entry
 @Component
 struct TestCookie {
   controller: webview.WebviewController = new webview.WebviewController();

   <span class="hljs-function"><span class="hljs-title">build</span></span>() {
     <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
       Button(<span class="hljs-string">'configCookieSync'</span>)
         .onClick(() =&gt; {
           try {
             webview.WebCookieManager.configCookieSync('https://www.baidu.com', 'value=test123sa');
           } catch (error) {
             console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
           }
         })
       Web({ src: 'https://www.baidu.com', controller: this.controller })
     }
   }
 }
</code></pre>
<blockquote>
<p><strong>è¯´æ˜</strong>
Cookieæ¯30så‘¨æœŸæ€§ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£saveCookieAsyncè¿›è¡Œå¼ºåˆ¶è½ç›˜ï¼ˆPC/2in1å’ŒTabletè®¾å¤‡ä¸ä¼šæŒä¹…åŒ–session cookieï¼Œå³ä½¿è°ƒç”¨saveCookieAsyncï¼Œä¹Ÿä¸ä¼šå°†session cookieå†™å…¥ç£ç›˜ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ä¸‰ã€ç¼“å­˜ä¸å­˜å‚¨ç®¡ç†</h3>
<blockquote>
<p>åœ¨è®¿é—®ç½‘ç«™æ—¶ï¼Œç½‘ç»œèµ„æºè¯·æ±‚é€šå¸¸éœ€è¦è¾ƒé•¿çš„æ—¶é—´ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡Cacheå’ŒDom Storageç­‰æ‰‹æ®µå°†èµ„æºä¿å­˜åˆ°æœ¬åœ°ï¼Œä»¥æé«˜è®¿é—®åŒä¸€ç½‘ç«™çš„é€Ÿåº¦ã€‚</p>
</blockquote>
<h4 data-id="heading-3">3.1 Cache</h4>
<blockquote>
<p>ä½¿ç”¨ <strong>cacheMode()</strong> é…ç½®é¡µé¢èµ„æºçš„ç¼“å­˜æ¨¡å¼ï¼ŒWebç»„ä»¶ä¸ºå¼€å‘è€…æä¾›å››ç§ç¼“å­˜æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>Defaultï¼šä¼˜å…ˆä½¿ç”¨æœªè¿‡æœŸçš„ç¼“å­˜ã€‚å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ™ä»ç½‘ç»œè·å–ã€‚</li>
<li>Noneï¼šåŠ è½½èµ„æºä½¿ç”¨ç¼“å­˜ã€‚å¦‚æœç¼“å­˜ä¸­æ— è¯¥èµ„æºï¼Œåˆ™ä»ç½‘ç»œä¸­è·å–ã€‚</li>
<li>Onlineï¼šåŠ è½½èµ„æºä¸ä½¿ç”¨ç¼“å­˜ã€‚å…¨éƒ¨ä»ç½‘ç»œä¸­è·å–ã€‚</li>
<li>Onlyï¼šåªä»ç¼“å­˜ä¸­åŠ è½½èµ„æºã€‚</li>
</ul>
</blockquote>
<p><strong>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œç¼“å­˜è®¾ç½®ä¸ºNoneæ¨¡å¼ã€‚</strong></p>
<pre><code class="hljs language-bash" lang="bash">
 import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
 import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

 @Entry
 @Component
 struct TestCookie {
   controller: webview.WebviewController = new webview.WebviewController();
   @State mode: CacheMode = CacheMode.None;
   <span class="hljs-function"><span class="hljs-title">build</span></span>() {
     <span class="hljs-function"><span class="hljs-title">Column</span></span>() {
       Button(<span class="hljs-string">'configCookieSync'</span>)
         .onClick(() =&gt; {
           try {
             webview.WebCookieManager.configCookieSync('https://www.baidu.com', 'value=test123sa');
           } catch (error) {
             console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
           }
         })
       Web({ src: 'https://www.baidu.com', controller: this.controller })
         .cacheMode(this.mode)
     }
   }
 }

</code></pre>
<p><strong>ä¸ºäº†è·å–æœ€æ–°èµ„æºï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡removeCache()æ¥å£æ¸…é™¤å·²ç»ç¼“å­˜çš„èµ„æºï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestCookie {
  controller: webview.WebviewController = new webview.WebviewController();
  @State mode: CacheMode = CacheMode.None;

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 20 }) {
      Button(<span class="hljs-string">'configCookieSync'</span>)
        .onClick(() =&gt; {
          try {
            webview.WebCookieManager.configCookieSync('https://www.baidu.com', 'value=test123sa');
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Button('removeCache')
        .onClick(() =&gt; {
          try {
            // è®¾ç½®ä¸ºtrueæ—¶åŒæ—¶æ¸…é™¤romå’Œramä¸­çš„ç¼“å­˜ï¼Œè®¾ç½®ä¸ºfalseæ—¶åªæ¸…é™¤ramä¸­çš„ç¼“å­˜
            this.controller.removeCache(true);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })

      Web({ src: 'https://www.baidu.com', controller: this.controller })
        .cacheMode(this.mode)
    }
  }
}

</code></pre>
<h4 data-id="heading-4">3.2 Dom Storage</h4>
<blockquote>
<p>Dom StorageåŒ…å«äº†Session Storageå’ŒLocal Storageä¸¤ç±»ã€‚Session Storageä¸ºä¸´æ—¶æ•°æ®ï¼Œå…¶å­˜å‚¨ä¸é‡Šæ”¾è·Ÿéšä¼šè¯ç”Ÿå‘½å‘¨æœŸï¼›Local Storageä¸ºæŒä¹…åŒ–æ•°æ®ï¼Œä¿å­˜åœ¨åº”ç”¨ç›®å½•ä¸‹ã€‚ä¸¤è€…çš„æ•°æ®å‡é€šè¿‡Key-Valueçš„å½¢å¼å­˜å‚¨ï¼Œåœ¨è®¿é—®éœ€è¦å®¢æˆ·ç«¯å­˜å‚¨çš„é¡µé¢æ—¶ä½¿ç”¨ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡Webç»„ä»¶çš„å±æ€§æ¥å£domStorageAccess()è¿›è¡Œä½¿èƒ½é…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestCookie {
  controller: webview.WebviewController = new webview.WebviewController();
  @State mode: CacheMode = CacheMode.None;

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 20 }) {
      Button(<span class="hljs-string">'configCookieSync'</span>)
        .onClick(() =&gt; {
          try {
            webview.WebCookieManager.configCookieSync('https://www.baidu.com', 'value=test123sa');
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })
      Button('removeCache')
        .onClick(() =&gt; {
          try {
            // è®¾ç½®ä¸ºtrueæ—¶åŒæ—¶æ¸…é™¤romå’Œramä¸­çš„ç¼“å­˜ï¼Œè®¾ç½®ä¸ºfalseæ—¶åªæ¸…é™¤ramä¸­çš„ç¼“å­˜
            this.controller.removeCache(true);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })

      Web({ src: 'https://www.baidu.com', controller: this.controller })
        .cacheMode(this.mode)
        .domStorageAccess(true)
    }
  }
}

</code></pre>
<h3 data-id="heading-5">å››ã€è·å–æŒ‡å®šurlå¯¹åº”cookieçš„å€¼</h3>
<blockquote>
<p>fetchCookieSync
è·å–æŒ‡å®šurlå¯¹åº”cookieçš„å€¼ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">static fetchCookieSync(url: string, incognito?: boolean): string
</code></pre>
<blockquote>
<p><strong>è¯´æ˜</strong>
ç³»ç»Ÿä¼šè‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„cookieï¼Œå¯¹äºåŒåkeyçš„æ•°æ®ï¼Œæ–°æ•°æ®å°†ä¼šè¦†ç›–å‰ä¸€ä¸ªæ•°æ®ã€‚ <br/>
ä¸ºäº†è·å–å¯æ­£å¸¸ä½¿ç”¨çš„cookieå€¼ï¼ŒfetchCookieSyncéœ€ä¼ å…¥å®Œæ•´é“¾æ¥ã€‚ <br/>
fetchCookieSyncç”¨äºè·å–æ‰€æœ‰çš„cookieå€¼ï¼Œæ¯æ¡cookieå€¼ä¹‹é—´ä¼šé€šè¿‡"; "è¿›è¡Œåˆ†éš”ï¼Œä½†æ— æ³•å•ç‹¬è·å–æŸä¸€æ¡ç‰¹å®šçš„cookieå€¼ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ç³»ç»Ÿèƒ½åŠ›</strong>ï¼š SystemCapability.Web.Webview.Core</p>
</blockquote>
<p><strong>å‚æ•°</strong></p>























<table><thead><tr><th align="left">å‚æ•°å</th><th align="left">ç±»å‹</th><th align="left">å¿…å¡«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">string</td><td align="left">æ˜¯</td><td align="left">è¦è·å–çš„cookieæ‰€å±çš„urlï¼Œå»ºè®®ä½¿ç”¨å®Œæ•´çš„urlã€‚</td></tr><tr><td align="left">incognito</td><td align="left">boolean</td><td align="left">å¦</td><td align="left">trueè¡¨ç¤ºè·å–éšç§æ¨¡å¼ä¸‹webviewçš„å†…å­˜cookiesï¼Œfalseè¡¨ç¤ºæ­£å¸¸ééšç§æ¨¡å¼ä¸‹çš„cookiesã€‚<br/>é»˜è®¤å€¼ï¼šfalseã€‚</td></tr></tbody></table>
<p><strong>è¿”å›å€¼ï¼š</strong></p>













<table><thead><tr><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">string</td><td align="left">æŒ‡å®šurlå¯¹åº”çš„cookieçš„å€¼ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>ç¤ºä¾‹æ•ˆæœå›¾</strong> <br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17e1560d4ff840c78c1a1a30dcc464c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095606&amp;x-signature=dqHU%2FITycjvt81CyQvj8lqyCxdU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7df999876564b2f9407cc8112fec54a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hpbmFEcmFnb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095606&amp;x-signature=fPQ4yCIuoA86SQFP%2BXwquMzG5AI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">import { webview } from <span class="hljs-string">'@kit.ArkWeb'</span>;
import { BusinessError } from <span class="hljs-string">'@kit.BasicServicesKit'</span>;

@Entry
@Component
struct TestCookie {
  controller: webview.WebviewController = new webview.WebviewController();
  @State mode: CacheMode = CacheMode.None;

  <span class="hljs-function"><span class="hljs-title">build</span></span>() {
    Column({ space: 20 }) {
      Button(<span class="hljs-string">'configCookieSync'</span>)
        .onClick(() =&gt; {
          try {
            webview.WebCookieManager.configCookieSync('https://www.baidu.com', 'value=test123sa');
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })

      Button('fetchCookieSync')
        .onClick(() =&gt; {
          try {
            let value = webview.WebCookieManager.fetchCookieSync('https://www.baidu.com');
            console.info("è·å–æŒ‡å®šurlå¯¹åº”cookieçš„å€¼ fetchCookieSync cookie = " + value);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })

      Button('removeCache')
        .onClick(() =&gt; {
          try {
            // è®¾ç½®ä¸ºtrueæ—¶åŒæ—¶æ¸…é™¤romå’Œramä¸­çš„ç¼“å­˜ï¼Œè®¾ç½®ä¸ºfalseæ—¶åªæ¸…é™¤ramä¸­çš„ç¼“å­˜
            this.controller.removeCache(true);
          } catch (error) {
            console.error(`ErrorCode: <span class="hljs-variable">${(error as BusinessError).code}</span>,  Message: <span class="hljs-variable">${(error as BusinessError).message}</span>`);
          }
        })

      Web({ src: 'https://www.baidu.com', controller: this.controller })
        .cacheMode(this.mode)
        .domStorageAccess(true)
    }
  }
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# ä¸²å£é€šä¿¡ä¸å†è¸©å‘ï¼šä¸€æ¬¡å‘é€ã€åˆ†åŒ…æ¥æ”¶çš„é›¶ä¸¢å¤±å®æˆ˜ç§˜ç±]]></title>    <link>https://juejin.cn/post/7590403249560928271</link>    <guid>https://juejin.cn/post/7590403249560928271</guid>    <pubDate>2026-01-03T12:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590403249560928271" data-draft-id="7587261929383968820" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# ä¸²å£é€šä¿¡ä¸å†è¸©å‘ï¼šä¸€æ¬¡å‘é€ã€åˆ†åŒ…æ¥æ”¶çš„é›¶ä¸¢å¤±å®æˆ˜ç§˜ç±"/> <meta itemprop="keywords" content="åç«¯,C#,.NET"/> <meta itemprop="datePublished" content="2026-01-03T12:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç ç¼–åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1308876155395739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# ä¸²å£é€šä¿¡ä¸å†è¸©å‘ï¼šä¸€æ¬¡å‘é€ã€åˆ†åŒ…æ¥æ”¶çš„é›¶ä¸¢å¤±å®æˆ˜ç§˜ç±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1308876155395739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç ç¼–åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:21:39.000Z" title="Sat Jan 03 2026 12:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å·¥ä¸šæ§åˆ¶ã€ç‰©è”ç½‘è®¾å¤‡é€šä¿¡ä¸­ï¼Œæ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šå‘è®¾å¤‡å‘é€ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢æŒ‡ä»¤ï¼Œå´å‘ç°è¿”å›çš„æ•°æ®æ€»æ˜¯"åˆ†æ‰¹åˆ°è¾¾"ï¼Ÿæ˜æ˜åº”è¯¥æ”¶åˆ°å®Œæ•´çš„20å­—èŠ‚å“åº”ï¼Œå´åªèƒ½æ”¶åˆ°å‡ ä¸ªé›¶æ•£çš„æ•°æ®åŒ…ï¼Ÿ</p>
<p><strong>åˆ«æ€¥ï¼Œè¿™ä¸æ˜¯ä½ çš„ä»£ç æœ‰é—®é¢˜ï¼</strong></p>
<p>è¿™æ˜¯ä¸²å£é€šä¿¡ä¸­æœ€å¸¸è§çš„"åˆ†åŒ…æ¥æ”¶"ç°è±¡ã€‚è®¾å¤‡å¯èƒ½ä¸€æ¬¡å‘é€10å­—èŠ‚ï¼Œä¸‹ä¸€æ¬¡å‘é€å‰©ä½™çš„10å­—èŠ‚ï¼Œè€Œæˆ‘ä»¬çš„ç¨‹åºå´ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰ç®—æ¥æ”¶å®Œæˆã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥å½»åº•è§£å†³è¿™ä¸ªè®©æ— æ•° C# å¼€å‘å¤´ç–¼çš„é—®é¢˜ï¼</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆä¼šåˆ†åŒ…æ¥æ”¶ï¼Ÿ</h3>
<h4 data-id="heading-2">æ ¹æœ¬åŸå› </h4>
<p>ä¸²å£é€šä¿¡æ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œæ•°æ®ä¼ è¾“ä¼šå—åˆ°ä»¥ä¸‹å› ç´ å½±å“ï¼š</p>
<p><strong>ç¡¬ä»¶ç¼“å†²åŒºå¤§å°é™åˆ¶</strong></p>
<p><strong>è®¾å¤‡å¤„ç†é€Ÿåº¦å·®å¼‚</strong></p>
<p><strong>ç½‘ç»œå»¶è¿Ÿ</strong>ï¼ˆå¯¹äºä¸²å£è½¬ä»¥å¤ªç½‘è®¾å¤‡ï¼‰</p>
<p><strong>ç³»ç»Ÿè°ƒåº¦</strong></p>
<p>è¿™äº›å› ç´ å¯¼è‡´åŸæœ¬è¿ç»­çš„æ•°æ®æµè¢«æ“ä½œç³»ç»Ÿæˆ–ä¸­é—´è®¾å¤‡æ‹†åˆ†æˆå¤šä¸ªå°å—ï¼Œé€æ¬¡é€è¾¾åº”ç”¨ç¨‹åºã€‚</p>
<h4 data-id="heading-3">ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šåªèƒ½æ”¶åˆ°ç¬¬ä¸€åŒ…æ•°æ®</span>
serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
Thread.Sleep(<span class="hljs-number">100</span>); <span class="hljs-comment">// å›ºå®šç­‰å¾…æ—¶é—´</span>
<span class="hljs-built_in">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">1024</span>];
<span class="hljs-built_in">int</span> count = serialPort.Read(buffer, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span>); <span class="hljs-comment">// å¯èƒ½åªè¯»åˆ°éƒ¨åˆ†æ•°æ®</span>
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>
<p>å›ºå®šç­‰å¾…æ—¶é—´ä¸å¯é </p>
<p>æ— æ³•åˆ¤æ–­æ•°æ®æ˜¯å¦æ¥æ”¶å®Œæ•´</p>
<p>å®¹æ˜“ä¸¢å¤±åç»­æ•°æ®åŒ…</p>
<h3 data-id="heading-4">å››ç§çµæ´»æ¥æ”¶ç­–ç•¥</h3>
<p>ä¸ºåº”å¯¹ä¸åŒåº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä»¥ä¸‹å››ç§ç­–ç•¥ï¼š</p>
<h4 data-id="heading-5">æ–¹æ¡ˆä¸€ï¼šæ•°æ®é—´éš”è¶…æ—¶åˆ¤æ–­ï¼ˆâ­æ¨èï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸çŸ¥é“æ•°æ®é•¿åº¦ï¼Œä½†è®¾å¤‡å‘é€å®Œæ¯•åä¼šæœ‰æ˜æ˜¾æ—¶é—´é—´éš”ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithGapTimeout</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">int</span> gapTimeoutMs = <span class="hljs-number">100</span>, <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
{
    <span class="hljs-comment">// æ¸…ç©ºç¼“å†²åŒºå¹¶å¼€å§‹æ¥æ”¶</span>
    <span class="hljs-keyword">lock</span> (bufferLock)
    {
        receivedBuffer.Clear();
        isWaitingForResponse = <span class="hljs-literal">true</span>;
        lastReceiveTime = DateTime.Now;
    }
    <span class="hljs-comment">// å‘é€æŒ‡ä»¤</span>
    serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
    
    DateTime startTime = DateTime.Now;
    
    <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
    {
        Thread.Sleep(<span class="hljs-number">10</span>);
        
        <span class="hljs-keyword">lock</span> (bufferLock)
        {
            <span class="hljs-comment">// ğŸ”¥ å…³é”®é€»è¾‘ï¼šæœ‰æ•°æ®ä¸”é—´éš”è¶…æ—¶åˆ™è®¤ä¸ºæ¥æ”¶å®Œæˆ</span>
            <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span> &amp;&amp; 
                (DateTime.Now - lastReceiveTime).TotalMilliseconds &gt; gapTimeoutMs)
            {
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> receivedBuffer.ToArray();
            }
        }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<blockquote>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œè¿™ä¸ªèƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ–¹æ¡ˆäºŒï¼šç»“æŸç¬¦åˆ¤æ–­</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®ä»¥ç‰¹å®šå­—ç¬¦ç»“å°¾ï¼ˆå¦‚ <code>\r\n</code>ã€<code>\0</code> ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithEndMarker</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">byte</span>[] endMarker, <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
{
    <span class="hljs-comment">// ... å‘é€é€»è¾‘ç›¸åŒ ...</span>
    
    <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
    {
        <span class="hljs-keyword">lock</span> (bufferLock)
        {
            <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt;= endMarker.Length)
            {
                <span class="hljs-comment">// ğŸ”¥ æ£€æŸ¥ç¼“å†²åŒºæœ«å°¾æ˜¯å¦åŒ…å«ç»“æŸæ ‡è®°</span>
                <span class="hljs-built_in">bool</span> foundEndMarker = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; endMarker.Length; i++)
                {
                    <span class="hljs-keyword">if</span> (receivedBuffer[receivedBuffer.Count - endMarker.Length + i] != endMarker[i])
                    {
                        foundEndMarker = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
                
                <span class="hljs-keyword">if</span> (foundEndMarker)
                {
                    <span class="hljs-keyword">return</span> receivedBuffer.ToArray();
                }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-7">æ–¹æ¡ˆä¸‰ï¼šåè®®å¸§ç»“æ„åˆ¤æ–­</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®æœ‰å›ºå®šå¸§å¤´å’Œé•¿åº¦å­—æ®µï¼ˆå¦‚ Modbus åè®®ï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithFrameProtocol</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">byte</span> frameHeader, <span class="hljs-built_in">int</span> lengthFieldOffset, <span class="hljs-built_in">int</span> lengthFieldSize = <span class="hljs-number">1</span></span>)</span>
{
    <span class="hljs-comment">// ... å‘é€é€»è¾‘ ...</span>
    
    <span class="hljs-keyword">while</span> (<span class="hljs-comment">/* è¶…æ—¶æ£€æŸ¥ */</span>)
    {
        <span class="hljs-keyword">lock</span> (bufferLock)
        {
            <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; lengthFieldOffset + lengthFieldSize)
            {
                <span class="hljs-comment">// æ£€æŸ¥å¸§å¤´</span>
                <span class="hljs-keyword">if</span> (receivedBuffer[<span class="hljs-number">0</span>] == frameHeader)
                {
                    <span class="hljs-comment">// ğŸ”¥ ä»é•¿åº¦å­—æ®µè·å–æ•°æ®é•¿åº¦</span>
                    <span class="hljs-built_in">int</span> dataLength = lengthFieldSize == <span class="hljs-number">1</span> ? 
                        receivedBuffer[lengthFieldOffset] : 
                        (receivedBuffer[lengthFieldOffset] &lt;&lt; <span class="hljs-number">8</span>) | receivedBuffer[lengthFieldOffset + <span class="hljs-number">1</span>];
                    
                    <span class="hljs-built_in">int</span> expectedFrameLength = lengthFieldOffset + lengthFieldSize + dataLength;
                    
                    <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt;= expectedFrameLength)
                    {
                        <span class="hljs-keyword">return</span> receivedBuffer.Take(expectedFrameLength).ToArray();
                    }
                }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-8">æ–¹æ¡ˆå››ï¼šç»„åˆç­–ç•¥ï¼ˆâ­â­æ¨èï¼‰</h4>
<p><strong>æœ€çµæ´»çš„æ–¹æ¡ˆ</strong>ï¼ŒåŒæ—¶ä½¿ç”¨å¤šç§åˆ¤æ–­æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithCombinedStrategy</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command,
    <span class="hljs-built_in">int</span> gapTimeoutMs = <span class="hljs-number">100</span>,     // æ•°æ®é—´éš”è¶…æ—¶
    <span class="hljs-built_in">byte</span>[] endMarker = <span class="hljs-literal">null</span>,    // ç»“æŸæ ‡è®°  
    <span class="hljs-built_in">int</span>? maxLength = <span class="hljs-literal">null</span>,      // æœ€å¤§é•¿åº¦é™åˆ¶
    <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)       <span class="hljs-comment">// æ€»è¶…æ—¶æ—¶é—´</span></span>
{
    <span class="hljs-comment">// ... å‘é€é€»è¾‘ ...</span>
    
    <span class="hljs-keyword">while</span> (<span class="hljs-comment">/* æ€»è¶…æ—¶æ£€æŸ¥ */</span>)
    {
        <span class="hljs-keyword">lock</span> (bufferLock)
        {
            <span class="hljs-keyword">if</span> (receivedBuffer.Count == <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// ğŸ”¥ æ¡ä»¶1ï¼šè¾¾åˆ°æœ€å¤§é•¿åº¦é™åˆ¶</span>
            <span class="hljs-keyword">if</span> (maxLength.HasValue &amp;&amp; receivedBuffer.Count &gt;= maxLength.Value)
                <span class="hljs-keyword">return</span> receivedBuffer.ToArray();
            
            <span class="hljs-comment">// ğŸ”¥ æ¡ä»¶2ï¼šå‘ç°ç»“æŸæ ‡è®°</span>
            <span class="hljs-keyword">if</span> (endMarker != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-comment">/* æ£€æŸ¥ç»“æŸæ ‡è®°é€»è¾‘ */</span>)
                <span class="hljs-keyword">return</span> receivedBuffer.ToArray();
            
            <span class="hljs-comment">// ğŸ”¥ æ¡ä»¶3ï¼šæ•°æ®é—´éš”è¶…æ—¶</span>
            <span class="hljs-keyword">if</span> ((DateTime.Now - lastReceiveTime).TotalMilliseconds &gt; gapTimeoutMs)
                <span class="hljs-keyword">return</span> receivedBuffer.ToArray();
        }
    }
}
</code></pre>
<h3 data-id="heading-9">æ ¸å¿ƒæœºåˆ¶ï¼šæ•°æ®æ¥æ”¶äº‹ä»¶</h3>
<p>æ‰€æœ‰ç­–ç•¥éƒ½ä¾èµ–äºç»Ÿä¸€çš„æ•°æ®æ¥æ”¶äº‹ä»¶å¤„ç†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDataReceived</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, SerialDataReceivedEventArgs e</span>)</span>
{
    <span class="hljs-keyword">if</span> (!isWaitingForResponse) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-built_in">int</span> bytesToRead = serialPort.BytesToRead;
        <span class="hljs-keyword">if</span> (bytesToRead &gt; <span class="hljs-number">0</span>)
        {
            <span class="hljs-built_in">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[bytesToRead];
            <span class="hljs-built_in">int</span> bytesRead = serialPort.Read(buffer, <span class="hljs-number">0</span>, bytesToRead);
            <span class="hljs-keyword">lock</span> (bufferLock)
            {
                receivedBuffer.AddRange(buffer);
                lastReceiveTime = DateTime.Now; <span class="hljs-comment">// ğŸ”¥ æ›´æ–°æœ€åæ¥æ”¶æ—¶é—´</span>
                Console.WriteLine(<span class="hljs-string">$"æ”¶åˆ°æ•°æ®åŒ… (<span class="hljs-subst">{bytesRead}</span> å­—èŠ‚): <span class="hljs-subst">{BitConverter.ToString(buffer, <span class="hljs-number">0</span>, bytesRead)}</span>"</span>);
            }
        }
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        Console.WriteLine(<span class="hljs-string">$"æ•°æ®æ¥æ”¶å¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
    }
}
</code></pre>
<h3 data-id="heading-10">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.IO.Ports;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Text;
<span class="hljs-keyword">using</span> System.Threading.Tasks;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">AppFlexSerialPort</span>
{
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FlexibleSerialPort</span>
    {
        <span class="hljs-keyword">private</span> SerialPort serialPort;
        <span class="hljs-keyword">private</span> List&lt;<span class="hljs-built_in">byte</span>&gt; receivedBuffer;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">object</span> bufferLock = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>();
        <span class="hljs-keyword">private</span> Timer timeoutTimer;
        <span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> isWaitingForResponse = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">private</span> DateTime lastReceiveTime;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">int</span> dataGapTimeout = <span class="hljs-number">100</span>; <span class="hljs-comment">// æ•°æ®é—´éš”è¶…æ—¶æ—¶é—´(ms)</span>

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FlexibleSerialPort</span>()</span>
        {
            receivedBuffer = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">byte</span>&gt;();
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> åˆå§‹åŒ–ä¸²å£</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">InitializePort</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> portName = <span class="hljs-string">"COM1"</span>, <span class="hljs-built_in">int</span> baudRate = <span class="hljs-number">9600</span>,
            Parity parity = Parity.None, <span class="hljs-built_in">int</span> dataBits = <span class="hljs-number">8</span>, StopBits stopBits = StopBits.One</span>)</span>
        {
            <span class="hljs-keyword">try</span>
            {
                serialPort = <span class="hljs-keyword">new</span> SerialPort(portName, baudRate, parity, dataBits, stopBits);
                serialPort.ReadTimeout = <span class="hljs-number">1000</span>;
                serialPort.WriteTimeout = <span class="hljs-number">1000</span>;
                serialPort.DataReceived += OnDataReceived;
                serialPort.Open();
                Console.WriteLine(<span class="hljs-string">$"ä¸²å£ <span class="hljs-subst">{portName}</span> å·²æˆåŠŸæ‰“å¼€"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"ä¸²å£åˆå§‹åŒ–å¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ–¹æ¡ˆ1: åŸºäºæ•°æ®é—´éš”è¶…æ—¶åˆ¤æ–­æ¥æ”¶å®Œæˆ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> é€‚ç”¨äºï¼šä¸çŸ¥é“æ•°æ®é•¿åº¦ï¼Œä½†è®¾å¤‡å‘é€å®Œåä¼šæœ‰æ˜æ˜¾çš„æ—¶é—´é—´éš”</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithGapTimeout</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">int</span> gapTimeoutMs = <span class="hljs-number">100</span>, <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
        {
            <span class="hljs-keyword">if</span> (serialPort == <span class="hljs-literal">null</span> || !serialPort.IsOpen)
            {
                Console.WriteLine(<span class="hljs-string">"ä¸²å£æœªæ‰“å¼€"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">lock</span> (bufferLock)
            {
                receivedBuffer.Clear();
                isWaitingForResponse = <span class="hljs-literal">true</span>;
                lastReceiveTime = DateTime.Now;
            }
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-comment">// å‘é€æŸ¥è¯¢æŒ‡ä»¤</span>
                serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
                Console.WriteLine(<span class="hljs-string">$"å·²å‘é€æŸ¥è¯¢æŒ‡ä»¤: <span class="hljs-subst">{BitConverter.ToString(command)}</span>"</span>);
                DateTime startTime = DateTime.Now;
                DateTime lastCheckTime = DateTime.Now;
                <span class="hljs-built_in">int</span> lastBufferSize = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
                {
                    Thread.Sleep(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">lock</span> (bufferLock)
                    {
                        <span class="hljs-comment">// å¦‚æœæœ‰æ•°æ®ä¸”æ•°æ®é—´éš”è¶…è¿‡æŒ‡å®šæ—¶é—´ï¼Œè®¤ä¸ºæ¥æ”¶å®Œæˆ</span>
                        <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span> &amp;&amp;
                            (DateTime.Now - lastReceiveTime).TotalMilliseconds &gt; gapTimeoutMs)
                        {
                            isWaitingForResponse = <span class="hljs-literal">false</span>;
                            <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                            Console.WriteLine(<span class="hljs-string">$"åŸºäºé—´éš”è¶…æ—¶åˆ¤æ–­æ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                            <span class="hljs-keyword">return</span> result;
                        }
                    }
                }
                <span class="hljs-comment">// æœ€å¤§ç­‰å¾…æ—¶é—´è¶…æ—¶</span>
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">lock</span> (bufferLock)
                {
                    <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                        Console.WriteLine(<span class="hljs-string">$"æœ€å¤§ç­‰å¾…æ—¶é—´è¶…æ—¶ï¼Œæ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                        <span class="hljs-keyword">return</span> result;
                    }
                }
                Console.WriteLine(<span class="hljs-string">"æ¥æ”¶è¶…æ—¶ï¼Œæœªæ”¶åˆ°ä»»ä½•æ•°æ®"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"å‘é€æŒ‡ä»¤å¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>);
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ–¹æ¡ˆ2: åŸºäºç»“æŸç¬¦åˆ¤æ–­æ¥æ”¶å®Œæˆ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> é€‚ç”¨äºï¼šæ•°æ®ä»¥ç‰¹å®šå­—ç¬¦æˆ–å­—èŠ‚åºåˆ—ç»“å°¾</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithEndMarker</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">byte</span>[] endMarker, <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
        {
            <span class="hljs-keyword">if</span> (serialPort == <span class="hljs-literal">null</span> || !serialPort.IsOpen)
            {
                Console.WriteLine(<span class="hljs-string">"ä¸²å£æœªæ‰“å¼€"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">lock</span> (bufferLock)
            {
                receivedBuffer.Clear();
                isWaitingForResponse = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">try</span>
            {
                serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
                Console.WriteLine(<span class="hljs-string">$"å·²å‘é€æŸ¥è¯¢æŒ‡ä»¤: <span class="hljs-subst">{BitConverter.ToString(command)}</span>"</span>);
                DateTime startTime = DateTime.Now;
                <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
                {
                    Thread.Sleep(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">lock</span> (bufferLock)
                    {
                        <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt;= endMarker.Length)
                        {
                            <span class="hljs-comment">// æ£€æŸ¥ç¼“å†²åŒºæœ«å°¾æ˜¯å¦åŒ…å«ç»“æŸæ ‡è®°</span>
                            <span class="hljs-built_in">bool</span> foundEndMarker = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; endMarker.Length; i++)
                            {
                                <span class="hljs-keyword">if</span> (receivedBuffer[receivedBuffer.Count - endMarker.Length + i] != endMarker[i])
                                {
                                    foundEndMarker = <span class="hljs-literal">false</span>;
                                    <span class="hljs-keyword">break</span>;
                                }
                            }
                            <span class="hljs-keyword">if</span> (foundEndMarker)
                            {
                                isWaitingForResponse = <span class="hljs-literal">false</span>;
                                <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                                Console.WriteLine(<span class="hljs-string">$"å‘ç°ç»“æŸæ ‡è®°ï¼Œæ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                                <span class="hljs-keyword">return</span> result;
                            }
                        }
                    }
                }
                <span class="hljs-comment">// è¶…æ—¶å¤„ç†</span>
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">lock</span> (bufferLock)
                {
                    <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                        Console.WriteLine(<span class="hljs-string">$"ç­‰å¾…ç»“æŸæ ‡è®°è¶…æ—¶ï¼Œæ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                        <span class="hljs-keyword">return</span> result;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"å‘é€æŒ‡ä»¤å¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>);
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ–¹æ¡ˆ3: åŸºäºåè®®å¸§ç»“æ„åˆ¤æ–­æ¥æ”¶å®Œæˆ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> é€‚ç”¨äºï¼šæ•°æ®æœ‰å›ºå®šçš„å¸§å¤´å’Œé•¿åº¦å­—æ®µ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithFrameProtocol</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command, <span class="hljs-built_in">byte</span> frameHeader, <span class="hljs-built_in">int</span> lengthFieldOffset,
            <span class="hljs-built_in">int</span> lengthFieldSize = <span class="hljs-number">1</span>, <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
        {
            <span class="hljs-keyword">if</span> (serialPort == <span class="hljs-literal">null</span> || !serialPort.IsOpen)
            {
                Console.WriteLine(<span class="hljs-string">"ä¸²å£æœªæ‰“å¼€"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">lock</span> (bufferLock)
            {
                receivedBuffer.Clear();
                isWaitingForResponse = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">try</span>
            {
                serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
                Console.WriteLine(<span class="hljs-string">$"å·²å‘é€æŸ¥è¯¢æŒ‡ä»¤: <span class="hljs-subst">{BitConverter.ToString(command)}</span>"</span>);
                DateTime startTime = DateTime.Now;
                <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
                {
                    Thread.Sleep(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">lock</span> (bufferLock)
                    {
                        <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; lengthFieldOffset + lengthFieldSize)
                        {
                            <span class="hljs-comment">// æ£€æŸ¥å¸§å¤´</span>
                            <span class="hljs-keyword">if</span> (receivedBuffer[<span class="hljs-number">0</span>] == frameHeader)
                            {
                                <span class="hljs-comment">// è·å–æ•°æ®é•¿åº¦</span>
                                <span class="hljs-built_in">int</span> dataLength = <span class="hljs-number">0</span>;
                                <span class="hljs-keyword">if</span> (lengthFieldSize == <span class="hljs-number">1</span>)
                                {
                                    dataLength = receivedBuffer[lengthFieldOffset];
                                }
                                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lengthFieldSize == <span class="hljs-number">2</span>)
                                {
                                    dataLength = (receivedBuffer[lengthFieldOffset] &lt;&lt; <span class="hljs-number">8</span>) | receivedBuffer[lengthFieldOffset + <span class="hljs-number">1</span>];
                                }
                                <span class="hljs-built_in">int</span> expectedFrameLength = lengthFieldOffset + lengthFieldSize + dataLength;
                                <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt;= expectedFrameLength)
                                {
                                    isWaitingForResponse = <span class="hljs-literal">false</span>;
                                    <span class="hljs-built_in">byte</span>[] result = receivedBuffer.Take(expectedFrameLength).ToArray();
                                    Console.WriteLine(<span class="hljs-string">$"æ ¹æ®å¸§é•¿åº¦åˆ¤æ–­æ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                                    <span class="hljs-keyword">return</span> result;
                                }
                            }
                        }
                    }
                }
                <span class="hljs-comment">// è¶…æ—¶å¤„ç†</span>
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">lock</span> (bufferLock)
                {
                    <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                        Console.WriteLine(<span class="hljs-string">$"å¸§åè®®è§£æè¶…æ—¶ï¼Œæ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                        <span class="hljs-keyword">return</span> result;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"å‘é€æŒ‡ä»¤å¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>);
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ–¹æ¡ˆ4: ç»„åˆç­–ç•¥ - æœ€çµæ´»çš„æ–¹æ¡ˆ</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> åŒæ—¶ä½¿ç”¨å¤šç§åˆ¤æ–­æ¡ä»¶ï¼Œä»»ä¸€æ¡ä»¶æ»¡è¶³å°±ç»“æŸæ¥æ”¶</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">byte</span>[] <span class="hljs-title">SendQueryWithCombinedStrategy</span>(<span class="hljs-params"><span class="hljs-built_in">byte</span>[] command,
            <span class="hljs-built_in">int</span> gapTimeoutMs = <span class="hljs-number">100</span>,
            <span class="hljs-built_in">byte</span>[] endMarker = <span class="hljs-literal">null</span>,
            <span class="hljs-built_in">int</span>? maxLength = <span class="hljs-literal">null</span>,
            <span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span></span>)</span>
        {
            <span class="hljs-keyword">if</span> (serialPort == <span class="hljs-literal">null</span> || !serialPort.IsOpen)
            {
                Console.WriteLine(<span class="hljs-string">"ä¸²å£æœªæ‰“å¼€"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">lock</span> (bufferLock)
            {
                receivedBuffer.Clear();
                isWaitingForResponse = <span class="hljs-literal">true</span>;
                lastReceiveTime = DateTime.Now;
            }
            <span class="hljs-keyword">try</span>
            {
                serialPort.Write(command, <span class="hljs-number">0</span>, command.Length);
                Console.WriteLine(<span class="hljs-string">$"å·²å‘é€æŸ¥è¯¢æŒ‡ä»¤: <span class="hljs-subst">{BitConverter.ToString(command)}</span>"</span>);
                DateTime startTime = DateTime.Now;
                <span class="hljs-keyword">while</span> ((DateTime.Now - startTime).TotalMilliseconds &lt; maxWaitMs)
                {
                    Thread.Sleep(<span class="hljs-number">10</span>);
                    <span class="hljs-keyword">lock</span> (bufferLock)
                    {
                        <span class="hljs-keyword">if</span> (receivedBuffer.Count == <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;
                        <span class="hljs-comment">// æ¡ä»¶1: æ£€æŸ¥æœ€å¤§é•¿åº¦é™åˆ¶</span>
                        <span class="hljs-keyword">if</span> (maxLength.HasValue &amp;&amp; receivedBuffer.Count &gt;= maxLength.Value)
                        {
                            isWaitingForResponse = <span class="hljs-literal">false</span>;
                            <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                            Console.WriteLine(<span class="hljs-string">$"è¾¾åˆ°æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œæ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                            <span class="hljs-keyword">return</span> result;
                        }
                        <span class="hljs-comment">// æ¡ä»¶2: æ£€æŸ¥ç»“æŸæ ‡è®°</span>
                        <span class="hljs-keyword">if</span> (endMarker != <span class="hljs-literal">null</span> &amp;&amp; receivedBuffer.Count &gt;= endMarker.Length)
                        {
                            <span class="hljs-built_in">bool</span> foundEndMarker = <span class="hljs-literal">true</span>;
                            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; endMarker.Length; i++)
                            {
                                <span class="hljs-keyword">if</span> (receivedBuffer[receivedBuffer.Count - endMarker.Length + i] != endMarker[i])
                                {
                                    foundEndMarker = <span class="hljs-literal">false</span>;
                                    <span class="hljs-keyword">break</span>;
                                }
                            }
                            <span class="hljs-keyword">if</span> (foundEndMarker)
                            {
                                isWaitingForResponse = <span class="hljs-literal">false</span>;
                                <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                                Console.WriteLine(<span class="hljs-string">$"å‘ç°ç»“æŸæ ‡è®°ï¼Œæ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                                <span class="hljs-keyword">return</span> result;
                            }
                        }
                        <span class="hljs-comment">// æ¡ä»¶3: æ£€æŸ¥æ•°æ®é—´éš”è¶…æ—¶</span>
                        <span class="hljs-keyword">if</span> ((DateTime.Now - lastReceiveTime).TotalMilliseconds &gt; gapTimeoutMs)
                        {
                            isWaitingForResponse = <span class="hljs-literal">false</span>;
                            <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                            Console.WriteLine(<span class="hljs-string">$"æ•°æ®é—´éš”è¶…æ—¶ï¼Œæ¥æ”¶å®Œæˆï¼Œå…±æ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                            <span class="hljs-keyword">return</span> result;
                        }
                    }
                }
                <span class="hljs-comment">// æœ€å¤§ç­‰å¾…æ—¶é—´è¶…æ—¶</span>
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">lock</span> (bufferLock)
                {
                    <span class="hljs-keyword">if</span> (receivedBuffer.Count &gt; <span class="hljs-number">0</span>)
                    {
                        <span class="hljs-built_in">byte</span>[] result = receivedBuffer.ToArray();
                        Console.WriteLine(<span class="hljs-string">$"æœ€å¤§ç­‰å¾…æ—¶é—´è¶…æ—¶ï¼Œæ”¶åˆ° <span class="hljs-subst">{result.Length}</span> å­—èŠ‚"</span>);
                        <span class="hljs-keyword">return</span> result;
                    }
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"å‘é€æŒ‡ä»¤å¤±è´¥: <span class="hljs-subst">{ex.Message}</span>"</span>);
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ•°æ®æ¥æ”¶äº‹ä»¶å¤„ç†</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnDataReceived</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, SerialDataReceivedEventArgs e</span>)</span>
        {
            <span class="hljs-keyword">if</span> (!isWaitingForResponse) <span class="hljs-keyword">return</span>;
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-built_in">int</span> bytesToRead = serialPort.BytesToRead;
                <span class="hljs-keyword">if</span> (bytesToRead &gt; <span class="hljs-number">0</span>)
                {
                    <span class="hljs-built_in">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[bytesToRead];
                    <span class="hljs-built_in">int</span> bytesRead = serialPort.Read(buffer, <span class="hljs-number">0</span>, bytesToRead);
                    <span class="hljs-keyword">lock</span> (bufferLock)
                    {
                        receivedBuffer.AddRange(buffer);
                        lastReceiveTime = DateTime.Now; <span class="hljs-comment">// æ›´æ–°æœ€åæ¥æ”¶æ—¶é—´</span>
                        Console.WriteLine(<span class="hljs-string">$"æ”¶åˆ°æ•°æ®åŒ… (<span class="hljs-subst">{bytesRead}</span> å­—èŠ‚): <span class="hljs-subst">{BitConverter.ToString(buffer, <span class="hljs-number">0</span>, bytesRead)}</span>"</span>);
                        Console.WriteLine(<span class="hljs-string">$"å½“å‰ç¼“å†²åŒºæ€»è®¡: <span class="hljs-subst">{receivedBuffer.Count}</span> å­—èŠ‚"</span>);
                    }
                }
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"æ•°æ®æ¥æ”¶å¤„ç†å¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
            }
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å…³é—­ä¸²å£</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Close</span>()</span>
        {
            <span class="hljs-keyword">try</span>
            {
                isWaitingForResponse = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> (serialPort != <span class="hljs-literal">null</span> &amp;&amp; serialPort.IsOpen)
                {
                    serialPort.Close();
                    Console.WriteLine(<span class="hljs-string">"ä¸²å£å·²å…³é—­"</span>);
                }
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"å…³é—­ä¸²å£å¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span>[] <span class="hljs-title">GetAvailablePorts</span>()</span>
        {
            <span class="hljs-keyword">return</span> SerialPort.GetPortNames();
        }
    }
}
</code></pre>
<h3 data-id="heading-11">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">namespace</span> <span class="hljs-title">AppFlexSerialPort</span>
{
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
        {
            FlexibleSerialPort comm = <span class="hljs-keyword">new</span> FlexibleSerialPort();
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">if</span> (comm.InitializePort(<span class="hljs-string">"COM1"</span>, <span class="hljs-number">9600</span>))
                {
                    <span class="hljs-built_in">byte</span>[] queryCommand = { <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x84</span>, <span class="hljs-number">0x0A</span> };
                    Console.WriteLine(<span class="hljs-string">"=== æ–¹æ¡ˆ1: åŸºäºæ•°æ®é—´éš”åˆ¤æ–­ ==="</span>);
                    <span class="hljs-built_in">byte</span>[] response1 = comm.SendQueryWithGapTimeout(queryCommand, <span class="hljs-number">150</span>, <span class="hljs-number">3000</span>);
                    Thread.Sleep(<span class="hljs-number">1000</span>);
                    Console.WriteLine(<span class="hljs-string">"\n=== æ–¹æ¡ˆ2: åŸºäºç»“æŸç¬¦åˆ¤æ–­ ==="</span>);
                    <span class="hljs-built_in">byte</span>[] endMarker = { <span class="hljs-number">0x0D</span>, <span class="hljs-number">0x0A</span> }; <span class="hljs-comment">// CR LF</span>
                    <span class="hljs-built_in">byte</span>[] response2 = comm.SendQueryWithEndMarker(queryCommand, endMarker);
                    Thread.Sleep(<span class="hljs-number">1000</span>);
                    Console.WriteLine(<span class="hljs-string">"\n=== æ–¹æ¡ˆ3: åŸºäºåè®®å¸§ç»“æ„åˆ¤æ–­ ==="</span>);
                    <span class="hljs-built_in">byte</span>[] response3 = comm.SendQueryWithFrameProtocol(queryCommand, <span class="hljs-number">0x01</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>);
                    Thread.Sleep(<span class="hljs-number">1000</span>);
                    Console.WriteLine(<span class="hljs-string">"\n=== æ–¹æ¡ˆ4: ç»„åˆç­–ç•¥ ==="</span>);
                    <span class="hljs-built_in">byte</span>[] response4 = comm.SendQueryWithCombinedStrategy(
                        queryCommand,
                        gapTimeoutMs: <span class="hljs-number">100</span>,           <span class="hljs-comment">// æ•°æ®é—´éš”100ms</span>
                        endMarker: <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[] { <span class="hljs-number">0x0A</span> }, <span class="hljs-comment">// æˆ–è€…ä»¥LFç»“å°¾</span>
                        maxLength: <span class="hljs-number">50</span>,               <span class="hljs-comment">// æˆ–è€…æœ€å¤š50å­—èŠ‚</span>
                        maxWaitMs: <span class="hljs-number">3000</span>              <span class="hljs-comment">// æœ€å¤šç­‰å¾…3ç§’</span>
                    );
                }
                Console.WriteLine(<span class="hljs-string">"æŒ‰ä»»æ„é”®é€€å‡º..."</span>);
                Console.ReadKey();
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"ç¨‹åºå¼‚å¸¸: <span class="hljs-subst">{ex.Message}</span>"</span>);
            }
            <span class="hljs-keyword">finally</span>
            {
                comm.Close();
            }
        }
    }
}
</code></pre>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/D1DJjmDXQdnFmJFU5J5rlfxb5AhPOUuHwlNHbtd3ficlnibmicicobrAiba2qciaD3dwekVo4FZNsq0GREL2dfia4lRsQ/640?wx_fmt=png&amp;from=appmsg" alt="" title="null" loading="lazy"/></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/D1DJjmDXQdnFmJFU5J5rlfxb5AhPOUuHMsvyqeGaTfgknLgoDprObt1cODjBMggygP1yTC9ylaRK5etf3FO6qQ/640?wx_fmt=png&amp;from=appmsg" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–ä¸å®è·µ</h3>
<h4 data-id="heading-13">å…³é”®å‚æ•°è°ƒä¼˜</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// âœ… æ¨èé…ç½®</span>
<span class="hljs-built_in">int</span> gapTimeoutMs = <span class="hljs-number">100</span>;    <span class="hljs-comment">// 100-200msé€‚åˆå¤§å¤šæ•°è®¾å¤‡</span>
<span class="hljs-built_in">int</span> maxWaitMs = <span class="hljs-number">3000</span>;      <span class="hljs-comment">// æ€»è¶…æ—¶3ç§’ï¼Œé¿å…ç¨‹åºå¡æ­»</span>
Thread.Sleep(<span class="hljs-number">10</span>);          <span class="hljs-comment">// è½®è¯¢é—´éš”10msï¼Œå¹³è¡¡CPUå ç”¨å’Œå“åº”é€Ÿåº¦</span>
</code></pre>
<h4 data-id="heading-14">çº¿ç¨‹å®‰å…¨ä¿éšœ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">object</span> bufferLock = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>();
<span class="hljs-comment">// æ‰€æœ‰ç¼“å†²åŒºæ“ä½œéƒ½è¦åŠ é”</span>
<span class="hljs-keyword">lock</span> (bufferLock)
{
    receivedBuffer.Clear();
    receivedBuffer.AddRange(buffer);
    <span class="hljs-comment">// ... å…¶ä»–ç¼“å†²åŒºæ“ä½œ</span>
}
</code></pre>
<h4 data-id="heading-15">å¸¸è§æé†’</h4>
<p>1ã€å¿˜è®°æ¸…ç©ºç¼“å†²åŒºï¼šæ¯æ¬¡æŸ¥è¯¢å‰å¿…é¡» <code>receivedBuffer.Clear()</code></p>
<p>2ã€è¶…æ—¶æ—¶é—´è®¾ç½®ä¸å½“ï¼šé—´éš”è¶…æ—¶å¤ªçŸ­ä¼šæˆªæ–­æ•°æ®ï¼Œå¤ªé•¿ä¼šå½±å“å“åº”é€Ÿåº¦</p>
<p>3ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š<code>DataReceived</code> äº‹ä»¶åœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¿…é¡»åŠ é”ä¿æŠ¤</p>
<p>4ã€èµ„æºé‡Šæ”¾ï¼šç¨‹åºç»“æŸå‰è®°å¾—è°ƒç”¨ <code>Close()</code> æ–¹æ³•</p>
<h3 data-id="heading-16">é€‚ç”¨åœºæ™¯å¯¹æ¯”</h3>



































<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">é€‚ç”¨åœºæ™¯</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left">é—´éš”è¶…æ—¶</td><td align="left">é€šç”¨åœºæ™¯</td><td align="left">ç®€å•å¯é </td><td align="left">éœ€è¦è°ƒè¯•æœ€ä½³é—´éš”æ—¶é—´</td></tr><tr><td align="left">ç»“æŸç¬¦åˆ¤æ–­</td><td align="left">æ–‡æœ¬åè®®</td><td align="left">ç²¾ç¡®åˆ¤æ–­</td><td align="left">éœ€è¦æ˜ç¡®çš„ç»“æŸç¬¦</td></tr><tr><td align="left">å¸§ç»“æ„åˆ¤æ–­</td><td align="left">äºŒè¿›åˆ¶åè®®</td><td align="left">æœ€ç²¾ç¡®</td><td align="left">éœ€è¦äº†è§£åè®®ç»†èŠ‚</td></tr><tr><td align="left">ç»„åˆç­–ç•¥</td><td align="left">å¤æ‚åœºæ™¯</td><td align="left">æœ€çµæ´»</td><td align="left">ä»£ç ç¨å¤æ‚</td></tr></tbody></table>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>1ã€é€‰æ‹©åˆé€‚çš„ç­–ç•¥ï¼šå¯¹äº90%çš„åœºæ™¯ï¼Œ<strong>æ•°æ®é—´éš”è¶…æ—¶åˆ¤æ–­</strong>å°±è¶³å¤Ÿäº†</p>
<p>2ã€å‚æ•°è°ƒä¼˜å¾ˆé‡è¦ï¼š100-200ms çš„é—´éš”è¶…æ—¶æ˜¯ç»éªŒå€¼ï¼Œéœ€è¦æ ¹æ®å®é™…è®¾å¤‡è°ƒæ•´</p>
<p>3ã€ç»„åˆç­–ç•¥æ˜¯ç‹é“ï¼šå½“å•ä¸€ç­–ç•¥æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œç»„åˆç­–ç•¥æä¾›äº†æœ€å¤§çš„çµæ´»æ€§</p>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„å››ç§ç­–ç•¥ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“é€šä¿¡åè®®çµæ´»é€‰æ‹©æœ€é€‚åˆçš„æ¥æ”¶æ–¹å¼ï¼Œå½»åº•å‘Šåˆ«"åˆ†åŒ…æ¥æ”¶"å¸¦æ¥çš„å›°æ‰°ã€‚</p>
<h3 data-id="heading-18">å…³é”®è¯</h3>
<p>ä¸²å£é€šä¿¡ã€åˆ†åŒ…æ¥æ”¶ã€C#ã€SerialPortã€æ•°æ®é—´éš”è¶…æ—¶ã€ç»“æŸç¬¦åˆ¤æ–­ã€åè®®å¸§ç»“æ„ã€ç»„åˆç­–ç•¥ã€çº¿ç¨‹å®‰å…¨ã€å·¥ä¸šæ§åˆ¶</p>
<h3 data-id="heading-19">æœ€å</h3>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ†äº«çŸ¥è¯†çš„åŠ¨åŠ›ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŠ å…¥å¾®ä¿¡å…¬ä¼—å· <strong>[DotNetæŠ€æœ¯åŒ ]</strong> ç¤¾åŒºï¼Œä¸å…¶ä»–çƒ­çˆ±æŠ€æœ¯çš„åŒè¡Œä¸€èµ·äº¤æµå¿ƒå¾—ï¼Œå…±åŒæˆé•¿ï¼</p>
<p><strong>ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€å­¦ä¹ ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æ„å†…å­˜è¿·å®«ï¼šä¸²è”è™šæ‹Ÿåœ°å€ã€é¡µè¡¨ä¸å†…å­˜ä½¿ç”¨ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7590705425134305289</link>    <guid>https://juejin.cn/post/7590705425134305289</guid>    <pubDate>2026-01-03T12:48:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590705425134305289" data-draft-id="7590608345923239962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æ„å†…å­˜è¿·å®«ï¼šä¸²è”è™šæ‹Ÿåœ°å€ã€é¡µè¡¨ä¸å†…å­˜ä½¿ç”¨ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T12:48:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æ„å†…å­˜è¿·å®«ï¼šä¸²è”è™šæ‹Ÿåœ°å€ã€é¡µè¡¨ä¸å†…å­˜ä½¿ç”¨ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:48:55.000Z" title="Sat Jan 03 2026 12:48:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»‹ç»</h4>
<p>è¯´åˆ°å†…å­˜ï¼Œè¯»è€…ä¹‹å‰å¯èƒ½å¬è¯´è¿‡å¾ˆå¤šæ¦‚å¿µï¼Œæ¯”å¦‚è™šæ‹Ÿåœ°å€ï¼Œè™šæ‹Ÿå†…å­˜ï¼Œé¡µè¡¨ï¼Œå†…æ ¸ï¼Œç‰©ç†å†…å­˜ç®¡ç†ç­‰ï¼Œå„ä¸ªæ¦‚å¿µå¯èƒ½å¬ä¸Šå»éƒ½çŸ¥é“ï¼Œä½†æ˜¯å´å¾ˆå°‘æœ‰æ–‡ç« å°†è¿™äº›å†…å­˜ç›¸å…³çš„æ¦‚å¿µä¸²è”èµ·æ¥ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯é€šè¿‡å‡ ä¸ªä½¿ç”¨åœºæ™¯å°†è¿™äº›æ¦‚å¿µä¸²è”èµ·æ¥ï¼Œè®©è¯»è€…èƒ½æ›´æ¸…æ¥šçš„äº†è§£è¿™äº›æ¦‚å¿µçš„åŒæ—¶ï¼Œå¯¹å†…å­˜ä½¿ç”¨çš„æµç¨‹æœ‰ä¸ªæ•´ä½“ä¸Šçš„äº†è§£ã€‚ è®©æˆ‘ä»¬å¼€å§‹å§ï¼Œä¸€èµ·å»æ¢ç´¢ ç¨‹åºçš„ä¸€é¡µæ•°æ®æ˜¯å¦‚ä½•åœ¨è®¡ç®—æœºå†…å­˜ä¸­â€œå®‰å®¶è½æˆ·â€çš„ã€‚</p>
<h4 data-id="heading-1">ç‰©ç†å†…å­˜å’Œç‰©ç†åœ°å€</h4>
<p>æˆ‘ä»¬å…ˆä»ç‰©ç†å†…å­˜è¯´èµ·ï¼Œä»–æ˜¯ä¸€ä¸ªç‰©ç†ä»‹è´¨ï¼Œåœ¨é€šç”µçš„æƒ…å†µä¸‹å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œè€Œç‰©ç†åœ°å€å°±æ˜¯å†…å­˜çš„ä¸€ä¸ªåæ ‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªç‰©ç†åœ°å€å’Œä¸€ä¸ªé•¿åº¦æ¥è¯»å–å†…å­˜ä¸Šå¯¹åº”åŒºåŸŸå­˜å‚¨çš„æ•°æ®ã€‚ æˆ‘ä»¬ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œå°±ç»å¸¸éœ€è¦ä½¿ç”¨å†…å­˜æ¥å†™å…¥å’Œè¯»å–æ•°æ®ï¼Œæ¯”å¦‚a=0 å°±æ˜¯æŠŠaå˜é‡æ˜ å°„æˆäº†ä¸€ä¸ªç‰©ç†åœ°å€ï¼Œç„¶ååœ¨ç‰©ç†åœ°å€å¯¹åº”çš„å†…å­˜åŒºåŸŸä¸Šå†™ä¸Š0ï¼Œè¿™æ ·åœ¨è¯»å–aè¿™ä¸ªå˜é‡æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡açš„ç‰©ç†åœ°å€ä»å†…å­˜ä¸­æ‰¾åˆ°0è¿™ä¸ªæ•°æ®ï¼Œå°±è¯»å–åˆ°äº†å˜é‡çš„å€¼ã€‚</p>
<p>è¿™ä¸ªæ˜¯ç†æƒ³æƒ…å†µï¼Œä½†æ˜¯å®é™…ä¸Šæ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šåƒæ˜¯è¿™æ ·ç›´æ¥ä½¿ç”¨ç‰©ç†åœ°å€ï¼Œè€Œæ˜¯<strong>ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºè™šæ‹Ÿåœ°å€çš„æ–¹å¼å­˜å‚¨å˜é‡çš„åœ°å€ï¼Œç„¶åè¦è®¿é—®å˜é‡å€¼æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªè™šæ‹Ÿåœ°å€ï¼ŒåŠ ä¸Šä¸€ä¸ªç§°ä¸ºé¡µè¡¨çš„æ˜ å°„ç»“æ„ï¼Œè½¬æ¢æˆç‰©ç†åœ°å€</strong>ï¼Œç„¶åå†åˆ°å¯¹åº”çš„å†…å­˜åŒºåŸŸä¸­è·å–å˜é‡çš„å€¼ã€‚</p>
<h6 data-id="heading-2">ä½¿ç”¨ç‰©ç†åœ°å€çš„é—®é¢˜</h6>
<p>ä¸ºä»€ä¹ˆè¦ç‰¹æ„åŠ ä¸Šè¿™ä¸ªè½¬æ¢é€»è¾‘å‘¢ï¼Œç›´æ¥ä½¿ç”¨ç‰©ç†åœ°å€å­˜å‚¨ä¸è¡Œä¹ˆï¼Ÿ å…¶å®æ—©æœŸæ˜¯æœ‰ç›´æ¥ä½¿ç”¨ç‰©ç†å†…å­˜å­˜å‚¨æ•°æ®çš„æœºå™¨çš„ï¼Œä½†æ˜¯ä»–æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å®‰å…¨é—®é¢˜ï¼šè¿›ç¨‹æ²¡æœ‰éš”ç¦»ï¼Œç³»ç»Ÿå®‰å…¨æ€§å¤§ä¸ºä¸‹é™ï¼Œå› ä¸ºæ‰€æœ‰è¿›ç¨‹ä½¿ç”¨ä¸€ä¸ªç›¸åŒçš„â€œåœ°å€ç©ºé—´â€ï¼Œæœ‰å¯èƒ½æ¶æ„è¿›ç¨‹ä¼šè®¿é—®ä¸å±äºä»–çš„ç‰©ç†åœ°å€ï¼Œé€ æˆæƒé™é—®é¢˜ï¼Œæˆ–è€…ä¸å°å¿ƒè¦†ç›–äº†ä¸å±äºä»–çš„æ•°æ®ï¼Œç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿæ•°æ®ã€‚</li>
<li>å†…å­˜ç¢ç‰‡é—®é¢˜ï¼šæ¯”å¦‚ä¸€ä¸ªè¿›ç¨‹ç”³è¯·100Mçš„ç©ºé—´ï¼Œç”¨å®Œåé‡Šæ”¾äº†ï¼Œä½†æ˜¯è¿™å—å†…å­˜åœ°å€çš„å‰åå†…å­˜å—éƒ½è¢«ä½¿ç”¨äº†ï¼Œè¿™æ—¶å€™æœ‰ä¸ªè¿›ç¨‹ç”³è¯·120Mçš„è¿ç»­å†…å­˜ï¼Œè¿™100Må°±æ— æ³•è¢«ä½¿ç”¨ï¼Œå› ä¸ºä»–å‰åçš„å†…å­˜å·²ç»è¢«å ç”¨äº†ï¼Œè¿™å°±é€ æˆæ“ä½œç³»ç»Ÿä¸Šæœ‰å¾ˆå¤šå†…å­˜ç©ºæ´ï¼Œç©ºé—²çš„å†…å­˜æ€»é‡æ˜¯å¤Ÿç”¨çš„ï¼Œä½†æ˜¯æ— æ³•åˆ†é…ä¸€ä¸ªè¾ƒå¤§çš„è¿ç»­å†…å­˜ï¼Œè¿™å°±æ˜¯å†…å­˜ç¢ç‰‡ã€‚</li>
<li>æ˜“ç”¨æ€§é—®é¢˜ï¼šç¼–ç¨‹ä¸ç®¡ç†çš„å¤æ‚åº¦é«˜ï¼Œå› ä¸ºç¨‹åºå‘˜æˆ–è€…ç¼–è¯‘å™¨å¿…é¡»è‡ªå·±ç®¡ç†ç‰©ç†å†…å­˜ï¼Œæ¯æ¬¡ç¨‹åºå¯åŠ¨çš„å˜é‡å†…å­˜åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ã€‚</li>
<li>çµæ´»æ€§é—®é¢˜ï¼šå†…å­˜å…±äº«ä¸ç¨€ç–å­˜å‚¨ï¼Œå¾ˆéš¾å®ç°å†…å­˜å…±äº«ï¼Œæ¯”å¦‚å¾ˆå¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°æ ‡å‡†åº“ï¼ˆå¦‚libcï¼‰ï¼Œä½¿ç”¨ç‰©ç†å†…å­˜çš„è¯ï¼Œåªèƒ½æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç‰©ç†å†…å­˜ä¸­ä¿ç•™ä¸€ä»½ï¼Œé€ æˆæµªè´¹ã€‚</li>
</ol>
<h4 data-id="heading-3">è™šæ‹Ÿåœ°å€å’Œé¡µè¡¨</h4>
<p>é‚£ä¹ˆï¼Œè™šæ‹Ÿåœ°å€å’Œé¡µè¡¨æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„å‘¢ï¼Ÿé¦–å…ˆä»‹ç»ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œ<strong>è™šæ‹Ÿåœ°å€æ˜¯æ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰çš„ï¼Œä»0å¼€å§‹çš„è¿ç»­çš„å†…å­˜åœ°å€ç©ºé—´</strong>ï¼Œä¹‹æ‰€ä»¥ç§°ä¸ºè™šæ‹Ÿï¼Œæ˜¯å› ä¸ºç¨‹åºä½¿ç”¨è¿™ä¸ªåœ°å€è®¿é—®æ—¶ï¼Œå¹¶ä¸æ˜¯è®¿é—®è¿™ä¸ªåœ°å€å¯¹åº”çš„ç‰©ç†å†…å­˜ã€‚è€Œé¡µè¡¨ï¼Œåˆ™æ˜¯å°†è™šæ‹Ÿåœ°å€æ˜ å°„æˆä¸€ä¸ªç‰©ç†åœ°å€çš„æ•°æ®ç»“æ„ã€‚ <strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¡µè¡¨æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå› æ­¤é¡µè¡¨ä¹Ÿæ˜¯éœ€è¦å­˜åœ¨ç‰©ç†å†…å­˜ä¸Šçš„ï¼Œä¼šå ç”¨ä¸€å®šå†…å­˜ç©ºé—´</strong>ï¼Œä½ å¯ä»¥ç†è§£ä¸ºç±»ä¼¼ä¸€ä¸ªjavaä¸­çš„mapï¼Œè¾“å…¥è™šæ‹Ÿåœ°å€aï¼Œé€šè¿‡æŸ¥è¯¢é¡µè¡¨ï¼Œå¯ä»¥ä¸€æ­¥ä¸€æ­¥æ‰¾åˆ°aå¯¹åº”çš„ç‰©ç†åœ°å€bã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªéœ€è¦è¯´æ˜çš„æ˜¯<strong>é¡µ</strong>è¿™ä¸ªæ¦‚å¿µï¼Œæ“ä½œç³»ç»Ÿæ˜¯å°†å†…å­˜ä»¥4kå¤§å°ä¸ºä¸€ä¸ªæœ€å°åˆ†é…å•ä½ï¼Œæ¯æ¬¡è¿›ç¨‹ç”³è¯·å†…å­˜æ—¶ï¼Œå°±ä¼šåˆ†é…å¤šä¸ª4kå¤§å°çš„ç©ºé—²å†…å­˜é¡µç»™è¿›ç¨‹ã€‚æ¯”å¦‚è¿›ç¨‹ç”³è¯·15kçš„å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šç»™ä»–åˆ†é…4ä¸ª4kçš„å†…å­˜å—ï¼Œç„¶ååœ¨é¡µè¡¨ä¸­å¢åŠ å››ä¸ªé¡µè¡¨é¡¹ï¼Œå°†4ä¸ªå†…å­˜å—çš„è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°å®é™…çš„ç‰©ç†å†…å­˜åœ°å€ã€‚é¡µè¡¨é¡µè¡¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é¡µçš„æ˜ å°„è¡¨ã€‚</p>
<h6 data-id="heading-4">è™šæ‹Ÿåœ°å€çš„ä½¿ç”¨</h6>
<p>æœ‰äº†è™šæ‹Ÿåœ°å€åï¼Œ<strong>æ“ä½œç³»ç»Ÿåªä¼šè®©ç¨‹åºä½¿ç”¨è™šæ‹Ÿåœ°å€ï¼Œä»–ä¼šåœ¨è¿›ç¨‹å¯åŠ¨æ—¶ä¸ºæ¯ä¸ªè¿›ç¨‹ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„é¡µè¡¨</strong>ï¼Œä¹‹åä¸ç®¡ç¨‹åºè®¿é—®ä»€ä¹ˆåœ°å€ï¼Œæ“ä½œç³»ç»Ÿéƒ½ä¼šæŠŠè¿™ä¸ªåœ°å€å½“æˆè™šæ‹Ÿåœ°å€ï¼Œé€šè¿‡ç¨‹åºçš„é¡µè¡¨è¿›è¡Œè½¬æ¢æˆç‰©ç†åœ°å€ï¼Œç„¶åå†è¿›è¡Œè®¿é—®ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¿›ç¨‹è®¿é—®ä¸€ä¸ªåœ°å€ä¸ºaçš„è™šæ‹Ÿåœ°å€ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šå»è®¿é—®bè¿™ä¸ªç‰©ç†å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä¼šå»æŸ¥è¯¢é¡µè¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å†…å­˜bï¼Œç„¶åè®¿é—®båœ°å€ä¸­çš„å†…å­˜çš„æ•°æ®ã€‚è€Œä¸”è¿™ä¸ªbåœ°å€ä¸æ˜¯å›ºå®šçš„ï¼Œä»–æ˜¯éšæœºçš„ï¼Œæ˜¯åœ¨ç¨‹åºç”³è¯·aåœ°å€çš„å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿå–æŸ¥æ‰¾ç©ºé—²çš„å†…å­˜é¡µï¼Œç„¶åé…ç½®åˆ°é¡µè¡¨ä¸Šçš„ã€‚</p>
<h6 data-id="heading-5">è™šæ‹Ÿåœ°å€å’Œé¡µè¡¨çš„å¥½å¤„</h6>
<p>ä½¿ç”¨è™šæ‹Ÿåœ°å€å’Œé¡µè¡¨ä¸ºä»€ä¹ˆèƒ½è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼Ÿ</p>
<ol>
<li>å®‰å…¨é—®é¢˜ï¼šä½¿ç”¨è™šæ‹Ÿåœ°å€åï¼Œæ¯ä¸ªç¨‹åºè®¿é—®çš„åœ°å€éƒ½è¢«å½“åšè™šæ‹Ÿåœ°å€å¤„ç†ï¼Œç„¶åé€šè¿‡é¡µè¡¨è½¬æ¢æˆç‰©ç†åœ°å€ï¼Œè€Œé¡µè¡¨çš„æ•°æ®åªæœ‰æ“ä½œç³»ç»Ÿèƒ½ç®¡ç†ï¼Œè¿™æ ·åªè¦æ“ä½œç³»ç»Ÿåšå¥½å†…å­˜ç®¡ç†ï¼Œä¸è¦æŠŠåŒä¸€å—ç©ºé—²å†…å­˜åˆ†é…ä¸ªå¤šä¸ªè¿›ç¨‹ï¼Œå°±èƒ½ç¡®ä¿è¿›ç¨‹ä¹‹é—´çš„éš”ç¦»æ€§ï¼Œå³ä½¿æ¶æ„è¿›ç¨‹æƒ³è¦è®¿é—®ä¸€ä¸ªåˆ«çš„è¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†åœ°å€ï¼Œä»–çš„è®¿é—®åœ°å€ä¹Ÿä¼šè¢«å½“åšè™šæ‹Ÿåœ°å€å¤„ç†ï¼Œè®¿é—®åˆ°åˆ†é…ç»™ä»–çš„ä¸€ä¸ªä»–è‡ªå·±çš„ç©ºé—²å†…å­˜ä¸Šã€‚</li>
<li>å†…å­˜ç¢ç‰‡é—®é¢˜ï¼šåœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼Œè¿›ç¨‹ä»¥ä¸ºè‡ªå·±æ‹¥æœ‰ä¸€æ®µéå¸¸é•¿çš„è¿ç»­å†…å­˜ï¼Œæ¯”å¦‚ä»–è®¤ä¸ºè‡ªå·±æœ‰1Gçš„è¿ç»­ç©ºé—´ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡é¡µè¡¨å°†è¿™1Gç©ºé—´æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸­åˆ†æ•£çš„å†…å­˜å—ä¸Šï¼Œè¿™æ ·å°±èƒ½é€šè¿‡å¤ç”¨å°å—å†…å­˜é¿å…å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå› ä¸ºä»»ä½•ç©ºé—²çš„ç‰©ç†é¡µéƒ½èƒ½è¢«åˆ©ç”¨ï¼Œå¤§å¤§æé«˜äº†å†…å­˜åˆ©ç”¨ç‡</li>
<li>æ˜“ç”¨æ€§é—®é¢˜ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½ä»å›ºå®šçš„åœ°å€ï¼ˆå¦‚0x400000ï¼‰å¼€å§‹åŠ è½½ä»£ç ã€‚é“¾æ¥å™¨å’Œç¼–è¯‘å™¨å¯ä»¥æå‰ç¡®å®šå¾ˆå¤šåœ°å€ï¼Œç¼–ç¨‹æ¨¡å‹ç®€å•ç»Ÿä¸€ã€‚</li>
<li>çµæ´»æ€§é—®é¢˜ï¼šå…±äº«å†…å­˜å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œæ¯”å¦‚å¯¹äºä¸€äº›æ ‡å‡†åº“ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥å°†å…¶åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€ä»½ï¼Œç„¶ååœ¨å¯åŠ¨ç¨‹åºæ—¶ï¼Œå¦‚æœä»–ä»¬éœ€è¦æ ‡å‡†åº“çš„ä»£ç ï¼Œå°±å¯ä»¥åœ¨è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œè®©æ“ä½œç³»ç»Ÿå°†ä¸åŒè¿›ç¨‹çš„å­˜å‚¨æ ‡å‡†åº“ä»£ç çš„è™šæ‹Ÿåœ°å€é¡µè¡¨é¡¹æ˜ å°„åˆ°åŒä¸€ä¸ªç‰©ç†é¡µï¼Œè¿™æ ·ï¼Œç³»ç»Ÿçš„åŠ¨æ€é“¾æ¥åº“åªéœ€è¦åœ¨ç‰©ç†å†…å­˜ä¸­ä¿å­˜ä¸€ä»½ï¼Œæ‰€æœ‰è¿›ç¨‹å…±äº«ï¼ŒèŠ‚çœå¤§é‡å†…å­˜ã€‚</li>
</ol>
<h4 data-id="heading-6">å¤šçº§é¡µè¡¨</h4>
<p>ä¹‹å‰ä»‹ç»äº†ä½¿ç”¨é¡µè¡¨çš„åŸå› ï¼Œä½†æ˜¯å¦‚æœé¡µè¡¨çš„å®ç°åªæ˜¯å•çº¯çš„å°†ä¸€ä¸ªè™šæ‹Ÿåœ°å€æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªç‰©ç†åœ°å€ï¼Œè¿™ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºå•çº§é¡µè¡¨ï¼Œç›¸å½“äºæ¯ä¸ªè™šæ‹Ÿåœ°å€æ˜¯é¡µè¡¨è¿™ä¸ªmapçš„keyï¼Œå®ƒå¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œä¹Ÿå°±æ˜¯valueå¯ä»¥ä¸å­˜åœ¨ï¼Œä½†æ˜¯æ¯ä¸ªkeyå¿…é¡»å­˜åœ¨ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿå¿…é¡»ä¸ºæ¯ä¸€ä¸ªè™šæ‹Ÿåœ°å€ç”Ÿæˆä¸€ä¸ªé¡µè¡¨é¡¹ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€ä¸ªç¨‹åºçš„é¡µè¡¨é¡¹å¤ªå¤šã€‚ä¹‹å‰è¯´è¿‡ï¼Œé¡µè¡¨æ˜¯ä¸ªæ•°æ®ç»“æ„ï¼Œä»–æœ¬èº«ä¹Ÿæ˜¯å ç”¨ä¸€å®šå†…å­˜å¤§å°çš„ï¼Œé¡µè¡¨é¡¹å¤ªå¤šçš„è¯å°±ä¼šå ç”¨è¾ƒå¤§å†…å­˜ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ä¸‹ï¼Œå› ä¸ºlinuxç³»ç»Ÿæ˜¯ä»¥4kä¸ºæœ€å°çš„å†…å­˜åˆ†é…å•ä½ï¼Œå› æ­¤å•çº§é¡µè¡¨ä¸­çš„æ¯ä¸ªé¡µè¡¨é¡¹æŒ‡å‘çš„ä¹Ÿæ˜¯ä¸€ä¸ª4kçš„å†…å­˜ï¼Œæ‰€ä»¥<strong>ä¸€ä¸ªå•çº§é¡µè¡¨çš„æ€»é¡¹ç›®æ•°é‡æ˜¯ æœ€å¤§ç‰©ç†å†…å­˜å¤§å°(å­—èŠ‚) / (4*1024) å­—èŠ‚ï¼Œæ¯”æ‰€æœ‰åœ°å€çš„æ•°é‡è¦å°‘</strong> ã€‚ä¸¤ä¸ªè¿ç»­çš„é¡µè¡¨é¡¹ä¹‹é—´ç›¸éš”4kbï¼Œä¸æ˜¯æ¯ä¸ªå­—èŠ‚éƒ½æœ‰å¯¹åº”çš„é¡µè¡¨é¡¹ï¼Œè®¿é—®æ—¶æ‰¾çš„æ˜¯æ ¹æ®è™šæ‹Ÿåœ°å€è®¡ç®—å‡ºçš„ä»–æ‰€å±äºçš„é‚£ä¸ªé¡µçš„è™šæ‹Ÿåœ°å€ã€‚</p>
<h6 data-id="heading-7">å•çº§é¡µè¡¨å ç”¨çš„å†…å­˜</h6>
<p>å‡è®¾ä½¿ç”¨çš„æ˜¯ä¸€ä¸ª32ä½çš„æ“ä½œç³»ç»Ÿï¼š</p>
<ol>
<li>ä¸€ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€å…±æœ‰2^32=4Gï¼Œè¿™ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å¤§å†…å­˜ã€‚</li>
<li>æ¢ç®—æˆKBæ˜¯ï¼š 4 GB = 4 Ã— 1024 Ã— 1024 KB = 4,194,304 KB</li>
<li>è€Œä¸€ä¸ªç³»ç»Ÿçš„é¡µå¤§å°æ˜¯4KBï¼Œä¸ºäº†å­˜å‚¨ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰è™šæ‹Ÿåœ°å€ï¼Œéœ€è¦ 4,194,304/4 = 1,048,576 ä¸ªé¡µè¡¨é¡¹ã€‚</li>
<li>æ¯ä¸ªé¡µè¡¨é¡¹å ç”¨4å­—èŠ‚ï¼Œåˆ™ å…±éœ€è¦ 1,048,576*4/1024/1024=4M çš„ç©ºé—´ã€‚</li>
<li>å¦‚æœå¯åŠ¨100ä¸ªè¿›ç¨‹ï¼Œåˆ«çš„å†…å­˜ä¸ç®—ï¼Œé¡µè¡¨å ç”¨çš„å†…å­˜å°±è¾¾åˆ°äº†4*100 = 400M,å äº†ç³»ç»Ÿå†…å­˜çš„10%ï¼Œ</li>
</ol>
<p>é€šè¿‡è®¡ç®—å¯ä»¥çœ‹å‡ºï¼Œå•çº§é¡µè¡¨é€ æˆäº†æå¤§æµªè´¹ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹è¿›ç¨‹ä¸ä¼šä½¿ç”¨åˆ°é¡µè¡¨ä¸­å¤§éƒ¨åˆ†çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™4MBçš„é¡µè¡¨å¿…é¡»æ˜¯è¿ç»­çš„ç‰©ç†å†…å­˜ï¼Œéšç€ç³»ç»Ÿè¿è¡Œï¼Œåˆ†é…ä¸€å—è¿ç»­çš„4MBå†…å­˜ä¼šå˜å¾—éå¸¸å›°éš¾ã€‚</p>
<h6 data-id="heading-8">å¤šçº§é¡µè¡¨çš„ä¼˜åŠ¿</h6>
<p>é‚£ä¹ˆä½¿ç”¨å¤šçº§é¡µè¡¨æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿé¦–å…ˆä»‹ç»ä¸‹å¤šçº§é¡µè¡¨ï¼Œé¡¾åæ€ä¹‰ï¼Œä»–å°±æ˜¯é‡‡ç”¨äº†å¤šä¸ªå±‚çº§ï¼Œå½“å¯»æ‰¾ä¸€ä¸ªè™šæ‹Ÿåœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€æ—¶ï¼Œéœ€è¦ä¸€çº§ä¸€çº§çš„æŸ¥æ‰¾ï¼Œç»è¿‡å¤šæ¬¡æ˜ å°„åæ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†åœ°å€ã€‚å°±æ¯”å¦‚å­—å…¸ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªå­—æ—¶ï¼Œå…ˆæ‰¾é¦–å­—æ¯ï¼Œè¿™ä¸ªé¦–å­—æ¯å°±æ˜¯é¡¶çº§é¡µè¡¨ï¼Œæ‰¾åˆ°ååœ¨å­—æ¯ä¸­å†æ ¹æ®æ‹¼éŸ³é¡ºåºæ‰¾å¯¹åº”æ±‰å­—ï¼Œè¿™ä¸ªå°±æ˜¯ç¬¬äºŒçº§ï¼Œæœ€åå†æ˜¯æ ¹æ®æ‰¾åˆ°çš„é¡µæ•°ï¼Œå»å¯¹åº”é¡µæ•°æ‰¾åˆ°æ±‰å­—ï¼Œè¿™ä¸ªå°±æ˜¯é€šè¿‡ä¸‰çº§é¡µè¡¨æ‰¾åˆ°äº†ç‰©ç†åœ°å€ã€‚</p>
<p>linuxç³»ç»Ÿä¸­ä¸€èˆ¬é»˜è®¤ä½¿ç”¨å››çº§é¡µè¡¨ï¼Œä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å‡è®¾ä½¿ç”¨äºŒçº§åˆ—è¡¨æ¥çœ‹ä¸‹ä»–æ˜¯æ€ä¹ˆèŠ‚çº¦å†…å­˜çš„ï¼Œä»¥32ä½ç³»ç»Ÿä¸ºä¾‹ï¼š</p>
<ol>
<li>æˆ‘ä»¬å°†åœ°å€åˆ†ä¸º 10ä½ï¼ˆç¬¬1çº§ç´¢å¼•ï¼‰ + 10ä½ï¼ˆç¬¬2çº§ç´¢å¼•ï¼‰ + 12ä½ï¼ˆé¡µå†…åç§»ï¼‰</li>
<li>å‰10ä½å°±æ˜¯é¡¶çº§é¡µè¡¨ï¼Œä¸€å…±ç”¨äº† 2^10 = 1024 ä¸ªæ¡ç›®</li>
<li>é¡¶çº§é¡µè¡¨çš„å¤§å° = 1024 * 4å­—èŠ‚ = 4KBï¼ˆæ­£å¥½ä¸€é¡µï¼‰ã€‚</li>
</ol>
<p>é¡¶çº§é¡µè¡¨æ˜¯å¿…é¡»æœ‰çš„ï¼Œä½†æ˜¯äºŒçº§åˆ—è¡¨å¯ä»¥ç­‰ä½¿ç”¨åˆ°å†…å­˜æ—¶å†åˆ†é…ï¼Œå› æ­¤åœ¨ä¸€ä¸ªç¨‹åºå¯åŠ¨æ—¶ï¼Œåªéœ€è¦ç”¨åˆ°4kçš„é¡µè¡¨é¡¹ï¼Œè¿™å°±æ¯”ä¹‹å‰çš„4Mè¦å°çš„å¤šäº†ã€‚</p>
<h6 data-id="heading-9">å¤šçº§é¡µè¡¨å’Œå•çº§é¡µè¡¨çš„åŒºåˆ«</h6>
<p>æœ‰äººå¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆå¤šçº§é¡µè¡¨ä¸éœ€è¦æå‰å­˜å‚¨åé¢å‡ ä¸ªå±‚çº§çš„é¡µè¡¨ï¼Œè€Œå•çº§é¡µè¡¨å´éœ€è¦å­˜å‚¨æ‰€æœ‰é¡µè¡¨é¡¹å‘¢ï¼Ÿå› ä¸ºå•çº§é¡µè¡¨æ˜¯ç›´æ¥ç´¢å¼•ï¼Œè™šæ‹Ÿåœ°å€ç›´æ¥ä½œä¸ºç´¢å¼•ï¼Œå»ä¸€ä¸ªå·¨å¤§çš„ã€è¿ç»­çš„æ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œä¸ºäº†èƒ½å¤Ÿé€šè¿‡ç´¢å¼•ç›´æ¥å®šä½ï¼Œè¿™ä¸ªæ•°ç»„å¿…é¡»å®Œæ•´å­˜åœ¨ï¼Œæ‰€ä»¥å•çº§é¡µè¡¨ä¸èƒ½ç¼ºå°‘é¡µè¡¨é¡¹ã€‚</p>
<p>è€Œå¤šçº§é¡µè¡¨æ˜¯é—´æ¥ç´¢å¼•ï¼Œåªè¦ç¡®ä¿ç¬¬ä¸€çº§å­˜åœ¨ï¼Œç¬¬äºŒçº§å¯ä»¥åœ¨ä½ éœ€è¦ç”¨åˆ°æ—¶æ‰å»åŠ è½½ï¼Œè¿™æ˜¯ä¸€ç§â€œæ‡’åŠ è½½â€ç­–ç•¥ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç°åœ¨å¤šçº§é¡µè¡¨åªæœ‰é¡¶çº§é¡µè¡¨ï¼Œä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªæ•°æ®æ—¶ï¼Œè¾“å…¥æŒ‡å®šè™šæ‹Ÿåœ°å€å»å­˜æ•°æ®ï¼Œæ“ä½œç³»ç»Ÿæ ¹æ®è™šæ‹Ÿåœ°å€å»é¡¶çº§é¡µè¡¨è¿™ä¸ªç›®å½•æ‰¾åˆ°åœ°å€å¯¹åº”çš„äºŒçº§é¡µè¡¨åœ°å€æ—¶ï¼Œå‘ç°äºŒçº§é¡µè¡¨çš„åœ°å€ä¸å­˜åœ¨ï¼Œæ­¤æ—¶ä»–å°±å¯ä»¥åˆ†é…å†…å­˜ï¼Œç”Ÿæˆéœ€è¦è®¿é—®çš„è™šæ‹Ÿåœ°å€æ‰€åœ¨çš„äºŒçº§é¡µè¡¨çš„æ•°æ®ï¼Œå³ä¸€ä¸ª10ä½çš„äºŒçº§é¡µè¡¨ï¼Œæ­¤æ—¶åªæ˜¯å¤šäº†ä¸€ä¸ªäºŒçº§é¡µè¡¨ï¼Œå³2^10* 4å­—èŠ‚ = 4KBå¤§å°ã€‚</p>
<h4 data-id="heading-10">ç»“è¯­</h4>
<p>å¥½äº†ï¼Œå…ˆä»‹ç»åˆ°è¿™é‡Œï¼Œæœ¬ç‰‡æ–‡ç« ä¸»è¦è®²è§£äº†è™šæ‹Ÿåœ°å€å’Œé¡µè¡¨ç›¸å…³å†…å®¹ï¼Œåç»­å†…å®¹åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å‘ˆç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç™»å½•éªŒè¯å…¨æ”»ç•¥ï¼šä»ä¼šè¯æŠ€æœ¯åˆ° JWTï¼Œç»“åˆè¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨å®æˆ˜]]></title>    <link>https://juejin.cn/post/7590699877630574630</link>    <guid>https://juejin.cn/post/7590699877630574630</guid>    <pubDate>2026-01-03T13:13:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590699877630574630" data-draft-id="7590601860300587035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç™»å½•éªŒè¯å…¨æ”»ç•¥ï¼šä»ä¼šè¯æŠ€æœ¯åˆ° JWTï¼Œç»“åˆè¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T13:13:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ ¹æ ¹"/> <meta itemprop="url" content="https://juejin.cn/user/555679166786139"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç™»å½•éªŒè¯å…¨æ”»ç•¥ï¼šä»ä¼šè¯æŠ€æœ¯åˆ° JWTï¼Œç»“åˆè¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/555679166786139/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ ¹æ ¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:13:02.000Z" title="Sat Jan 03 2026 13:13:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Web åº”ç”¨ä¸­ï¼Œ<strong>ç™»å½•éªŒè¯</strong>æ˜¯ä¿éšœç³»ç»Ÿå®‰å…¨çš„ç¬¬ä¸€é“é˜²çº¿ â€”â€” åªæœ‰é€šè¿‡èº«ä»½è®¤è¯çš„ç”¨æˆ·ï¼Œæ‰èƒ½è®¿é—®ç³»ç»Ÿçš„æ ¸å¿ƒèµ„æºï¼ˆå¦‚å‘˜å·¥ç®¡ç†ã€éƒ¨é—¨æ•°æ®ã€ä¸ªäººä¸­å¿ƒç­‰ï¼‰ã€‚å®ç°ç™»å½•éªŒè¯çš„æ ¸å¿ƒæŠ€æœ¯åŒ…æ‹¬ â€œä¼šè¯ç®¡ç†â€ å’Œ â€œè¯·æ±‚æ‹¦æˆªâ€ï¼Œä»ä¼ ç»Ÿçš„ Session-Cookieï¼Œåˆ°å¦‚ä»Šæµè¡Œçš„ JWT ä»¤ç‰Œï¼Œå†é…åˆè¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰å®ç°å…¨å±€æ ¡éªŒï¼Œå½¢æˆäº†ä¸€å¥—å®Œæ•´çš„ç™»å½•éªŒè¯ä½“ç³»ã€‚æœ¬æ–‡å°†ä»¥ â€œåå°ç®¡ç†ç³»ç»Ÿâ€ ä¸ºåœºæ™¯ï¼Œå…¨é¢è®²è§£ç™»å½•éªŒè¯çš„å®ç°æ€è·¯ã€æ ¸å¿ƒæŠ€æœ¯åŠå®æˆ˜è½åœ°ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç™»å½•éªŒè¯çš„æ ¸å¿ƒè¯‰æ±‚ï¼šä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸ªæ²¡æœ‰ç™»å½•éªŒè¯çš„åå°ç³»ç»Ÿï¼šä»»ä½•äººéƒ½å¯ä»¥ç›´æ¥è®¿é—®<code>/emp/list</code>ï¼ˆå‘˜å·¥åˆ—è¡¨ï¼‰ã€<code>/dept/delete</code>ï¼ˆåˆ é™¤éƒ¨é—¨ï¼‰ç­‰æ ¸å¿ƒæ¥å£ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®æ³„éœ²ã€æ¶æ„ç¯¡æ”¹ç­‰ä¸¥é‡å®‰å…¨é—®é¢˜ã€‚</p>
<p>ç™»å½•éªŒè¯çš„æ ¸å¿ƒè¯‰æ±‚æœ‰ 3 ç‚¹ï¼š</p>
<ol>
<li><strong>èº«ä»½è®¤è¯</strong>ï¼šéªŒè¯ç”¨æˆ·è¾“å…¥çš„è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤ç”¨æˆ·èº«ä»½åˆæ³•æ€§ï¼›</li>
<li><strong>èº«ä»½ä¿æŒ</strong>ï¼šç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…æ— éœ€é‡å¤ç™»å½•ï¼Œå¯æ­£å¸¸è®¿é—®ç³»ç»Ÿèµ„æºï¼ˆä¼šè¯æŠ€æœ¯å®ç°ï¼‰ï¼›</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šæ‹¦æˆªæœªç™»å½•ç”¨æˆ·çš„éæ³•è¯·æ±‚ï¼Œæ‹’ç»å…¶è®¿é—®å—ä¿æŠ¤èµ„æºï¼ˆè¿‡æ»¤å™¨ / æ‹¦æˆªå™¨å®ç°ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä¼šè¯æŠ€æœ¯ï¼šå®ç°ç”¨æˆ·èº«ä»½ä¿æŒ</h2>
<p>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œå¦‚ä½•è®©ç³»ç»Ÿ â€œè®°ä½â€ ç”¨æˆ·èº«ä»½ï¼Ÿè¿™å°±éœ€è¦<strong>ä¼šè¯æŠ€æœ¯</strong>ï¼Œä¸»æµæ–¹æ¡ˆåˆ†ä¸ºä¸¤ç±»ï¼šä¼ ç»Ÿçš„<code>Session-Cookie</code>å’Œç°ä»£çš„<code>JWT</code>ï¼ˆJson Web Tokenï¼‰ã€‚</p>
<h4 data-id="heading-2">1. ä¼ ç»Ÿæ–¹æ¡ˆï¼šSession-Cookie ä¼šè¯ç®¡ç†</h4>
<h5 data-id="heading-3">æ ¸å¿ƒåŸç†</h5>
<p><code>Session-Cookie</code>æ˜¯åŸºäºæœåŠ¡å™¨ç«¯å­˜å‚¨çš„ä¼šè¯æ–¹æ¡ˆï¼Œæ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·æäº¤è´¦å·å¯†ç ç™»å½•ï¼ŒæœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåˆ›å»º<code>HttpSession</code>å¯¹è±¡ï¼ˆå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ· IDã€ç”¨æˆ·åï¼‰ï¼Œå¹¶ç”Ÿæˆå”¯ä¸€çš„<code>SessionId</code>ï¼›</li>
<li>æœåŠ¡å™¨å°†<code>SessionId</code>é€šè¿‡<code>Set-Cookie</code>å“åº”å¤´å†™å…¥å®¢æˆ·ç«¯æµè§ˆå™¨ï¼›</li>
<li>å®¢æˆ·ç«¯åç»­å‘èµ·è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æºå¸¦è¯¥<code>Cookie</code>ï¼ˆåŒ…å«<code>SessionId</code>ï¼‰åˆ°æœåŠ¡å™¨ï¼›</li>
<li>æœåŠ¡å™¨é€šè¿‡<code>SessionId</code>æŸ¥æ‰¾å¯¹åº”çš„<code>HttpSession</code>å¯¹è±¡ï¼Œç¡®è®¤ç”¨æˆ·èº«ä»½ï¼Œå®ç° â€œå…ç™»å½•â€ è®¿é—®ã€‚</li>
</ol>
<h5 data-id="heading-4">å®æˆ˜æ¼”ç¤ºï¼ˆJava Webï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç™»å½•æ¥å£ï¼šéªŒè¯è´¦å·å¯†ç ï¼Œåˆ›å»ºSession</span>
<span class="hljs-meta">@WebServlet("/login")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        req.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);
        resp.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);

        <span class="hljs-comment">// è·å–å‰ç«¯æäº¤çš„è´¦å·å¯†ç </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">"username"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">"password"</span>);

        <span class="hljs-comment">// æ¨¡æ‹Ÿè´¦å·å¯†ç éªŒè¯ï¼ˆå®é™…éœ€æŸ¥è¯¢æ•°æ®åº“ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"admin"</span>.equals(username) &amp;&amp; <span class="hljs-string">"123456"</span>.equals(password)) {
            <span class="hljs-comment">// ç™»å½•æˆåŠŸï¼šåˆ›å»ºSessionï¼Œå­˜å‚¨ç”¨æˆ·ä¿¡æ¯</span>
            <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();
            session.setAttribute(<span class="hljs-string">"loginUser"</span>, username); <span class="hljs-comment">// å­˜å‚¨ç”¨æˆ·å</span>
            session.setMaxInactiveInterval(<span class="hljs-number">3600</span>); <span class="hljs-comment">// è®¾ç½®Sessionè¿‡æœŸæ—¶é—´ï¼š1å°æ—¶ï¼ˆæ— æ“ä½œè¶…æ—¶ï¼‰</span>

            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":200,"</span>msg<span class="hljs-string">":"</span>ç™»å½•æˆåŠŸ<span class="hljs-string">"}"</span>);
        } <span class="hljs-keyword">else</span> {
            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":500,"</span>msg<span class="hljs-string">":"</span>è´¦å·æˆ–å¯†ç é”™è¯¯<span class="hljs-string">"}"</span>);
        }
    }
}

<span class="hljs-comment">// 2. æ ¸å¿ƒèµ„æºæ¥å£ï¼šé€šè¿‡SessionéªŒè¯ç”¨æˆ·èº«ä»½</span>
<span class="hljs-meta">@WebServlet("/emp/list")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmpListServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        resp.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);

        <span class="hljs-comment">// è·å–Sessionä¸­çš„ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession(<span class="hljs-literal">false</span>); <span class="hljs-comment">// falseï¼šä¸å­˜åœ¨åˆ™è¿”å›nullï¼Œä¸åˆ›å»ºæ–°Session</span>
        <span class="hljs-keyword">if</span> (session == <span class="hljs-literal">null</span> || session.getAttribute(<span class="hljs-string">"loginUser"</span>) == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æœªç™»å½•ï¼šè¿”å›æœªæˆæƒæç¤º</span>
            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":401,"</span>msg<span class="hljs-string">":"</span>è¯·å…ˆç™»å½•<span class="hljs-string">"}"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// å·²ç™»å½•ï¼šè¿”å›å‘˜å·¥åˆ—è¡¨æ•°æ®</span>
        resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":200,"</span>data<span class="hljs-string">":[{"</span>id<span class="hljs-string">":1,"</span>name<span class="hljs-string">":"</span>å¼ ä¸‰<span class="hljs-string">"},{"</span>id<span class="hljs-string">":2,"</span>name<span class="hljs-string">":"</span>æå››<span class="hljs-string">"}]}"</span>);
    }
}
</code></pre>
<h5 data-id="heading-5">Session-Cookie çš„ä¼˜ç¼ºç‚¹</h5>





















<table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>å®‰å…¨æ€§è¾ƒé«˜ï¼ˆç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸æ˜“è¢«ç¯¡æ”¹ï¼‰</td><td>æœåŠ¡å™¨å‹åŠ›å¤§ï¼ˆå¤§é‡ Session å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ / ç¼“å­˜ä¸­ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸å‹å¥½ï¼‰</td></tr><tr><td>æ”¯æŒä¼šè¯å¤±æ•ˆæ‰‹åŠ¨æ§åˆ¶ï¼ˆå¦‚ç”¨æˆ·é€€å‡ºç™»å½•ï¼Œç›´æ¥é”€æ¯ Sessionï¼‰</td><td>ä¸æ”¯æŒè·¨åŸŸï¼ˆCookie é»˜è®¤ä¸å…è®¸è·¨åŸŸæºå¸¦ï¼Œéœ€é¢å¤–é…ç½®ï¼‰</td></tr><tr><td>å®ç°ç®€å•ï¼Œæ— éœ€é¢å¤–ä¾èµ–</td><td>ä¸æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆSession å­˜å‚¨åœ¨å•ä¸ªæœåŠ¡å™¨ï¼Œé›†ç¾¤ç¯å¢ƒä¸‹éœ€åš Session å…±äº«ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-6">2. ç°ä»£æ–¹æ¡ˆï¼šJWT ä»¤ç‰Œè®¤è¯</h4>
<h5 data-id="heading-7">æ ¸å¿ƒåŸç†</h5>
<p>JWTï¼ˆJson Web Tokenï¼‰æ˜¯ä¸€ç§åŸºäº<strong>å®¢æˆ·ç«¯å­˜å‚¨</strong>çš„æ— çŠ¶æ€ä»¤ç‰Œæ–¹æ¡ˆï¼Œæ— éœ€æœåŠ¡å™¨å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œæ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·æäº¤è´¦å·å¯†ç ç™»å½•ï¼ŒæœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œæ ¹æ®ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ· IDã€ç”¨æˆ·åï¼‰å’Œå¯†é’¥ï¼Œç”Ÿæˆ JWT ä»¤ç‰Œï¼ˆåŒ…å«å¤´éƒ¨ã€è½½è·ã€ç­¾åä¸‰éƒ¨åˆ†ï¼‰ï¼›</li>
<li>æœåŠ¡å™¨å°† JWT ä»¤ç‰Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆå®¢æˆ·ç«¯å¯å­˜å‚¨åœ¨ LocalStorage/SessionStorage/Cookie ä¸­ï¼‰ï¼›</li>
<li>å®¢æˆ·ç«¯åç»­å‘èµ·è¯·æ±‚æ—¶ï¼Œé€šè¿‡è¯·æ±‚å¤´ï¼ˆå¦‚<code>Authorization: Bearer &lt;JWTä»¤ç‰Œ&gt;</code>ï¼‰æºå¸¦ä»¤ç‰Œåˆ°æœåŠ¡å™¨ï¼›</li>
<li>æœåŠ¡å™¨æ¥æ”¶ä»¤ç‰Œåï¼Œé€šè¿‡å¯†é’¥éªŒè¯ä»¤ç‰Œçš„åˆæ³•æ€§ï¼ˆæ˜¯å¦è¿‡æœŸã€æ˜¯å¦è¢«ç¯¡æ”¹ï¼‰ï¼ŒéªŒè¯é€šè¿‡åˆ™ç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚</li>
</ol>
<h5 data-id="heading-8">JWT ä»¤ç‰Œç»“æ„</h5>
<p>JWT ä»¤ç‰Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨<code>.</code>åˆ†éš”ï¼š</p>
<ol>
<li>
<p><strong>Headerï¼ˆå¤´éƒ¨ï¼‰</strong> ï¼šæŒ‡å®šä»¤ç‰Œç±»å‹ï¼ˆJWTï¼‰å’ŒåŠ å¯†ç®—æ³•ï¼ˆå¦‚ HS256ï¼‰ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"alg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HS256"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"typ"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JWT"</span><span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>Payloadï¼ˆè½½è·ï¼‰</strong> ï¼šå­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ· IDã€ç”¨æˆ·åï¼‰å’Œè¿‡æœŸæ—¶é—´ç­‰å…ƒæ•°æ®ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"exp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1735689600</span><span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>Signatureï¼ˆç­¾åï¼‰</strong> ï¼šæœåŠ¡å™¨ç”¨å¤´éƒ¨æŒ‡å®šçš„åŠ å¯†ç®—æ³•ï¼Œå°†å¤´éƒ¨ã€è½½è·å’Œå¯†é’¥è¿›è¡ŒåŠ å¯†ç”Ÿæˆçš„ç­¾åï¼Œç”¨äºéªŒè¯ä»¤ç‰Œæ˜¯å¦è¢«ç¯¡æ”¹ã€‚</p>
</li>
</ol>
<h5 data-id="heading-9">å®æˆ˜æ¼”ç¤ºï¼ˆJava + JJWT ä¾èµ–ï¼‰</h5>
<h6 data-id="heading-10">ï¼ˆ1ï¼‰å¼•å…¥ JJWT ä¾èµ–ï¼ˆMavenï¼‰</h6>
<p>JJWT æ˜¯ Java ç”Ÿæ€ä¸­å¸¸ç”¨çš„ JWT å·¥å…·åº“ï¼Œç®€åŒ– JWT çš„ç”Ÿæˆä¸éªŒè¯ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h6 data-id="heading-11">ï¼ˆ2ï¼‰JWT å·¥å…·ç±»</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;
<span class="hljs-keyword">import</span> io.jsonwebtoken.Jwts;
<span class="hljs-keyword">import</span> io.jsonwebtoken.security.Keys;
<span class="hljs-keyword">import</span> javax.crypto.SecretKey;
<span class="hljs-keyword">import</span> java.util.Date;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtils</span> {
    <span class="hljs-comment">// å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒéœ€é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸”ä¿è¯å®‰å…¨æ€§ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SECRET_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"my-secret-key-32bytes-long-12345678"</span>;
    <span class="hljs-comment">// ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼š1å°æ—¶ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">EXPIRE_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">3600</span> * <span class="hljs-number">1000L</span>;

    <span class="hljs-comment">// ç”ŸæˆJWTä»¤ç‰Œ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateToken</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-comment">// åˆ›å»ºå¯†é’¥ï¼ˆHS256ç®—æ³•è¦æ±‚å¯†é’¥é•¿åº¦è‡³å°‘32ä½ï¼‰</span>
        <span class="hljs-type">SecretKey</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> Keys.hmacShaKeyFor(SECRET_KEY.getBytes());
        <span class="hljs-comment">// æ„å»ºå¹¶ç”Ÿæˆä»¤ç‰Œ</span>
        <span class="hljs-keyword">return</span> Jwts.builder()
                .setSubject(username) <span class="hljs-comment">// è®¾ç½®ä¸»é¢˜ï¼ˆå­˜å‚¨ç”¨æˆ·åï¼‰</span>
                .setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()) <span class="hljs-comment">// è®¾ç½®ç­¾å‘æ—¶é—´</span>
                .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + EXPIRE_TIME)) <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span>
                .signWith(key) <span class="hljs-comment">// ä½¿ç”¨å¯†é’¥ç­¾å</span>
                .compact();
    }

    <span class="hljs-comment">// éªŒè¯JWTä»¤ç‰Œåˆæ³•æ€§ï¼Œå¹¶è·å–ä»¤ç‰Œä¸­çš„ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Claims <span class="hljs-title function_">verifyToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">SecretKey</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> Keys.hmacShaKeyFor(SECRET_KEY.getBytes());
            <span class="hljs-comment">// éªŒè¯ä»¤ç‰Œå¹¶è§£æè½½è·</span>
            <span class="hljs-keyword">return</span> Jwts.parserBuilder()
                    .setSigningKey(key)
                    .build()
                    .parseClaimsJws(token)
                    .getBody();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// ä»¤ç‰Œæ— æ•ˆï¼ˆè¿‡æœŸã€è¢«ç¯¡æ”¹ç­‰ï¼‰ï¼Œè¿”å›null</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }

    <span class="hljs-comment">// ä»ä»¤ç‰Œä¸­è·å–ç”¨æˆ·å</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getUsernameFromToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> verifyToken(token);
        <span class="hljs-keyword">return</span> claims == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : claims.getSubject();
    }
}
</code></pre>
<h6 data-id="heading-12">ï¼ˆ3ï¼‰JWT ç™»å½•ä¸éªŒè¯æ¥å£</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@WebServlet("/jwt/login")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtLoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        req.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);
        resp.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);

        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">"username"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">"password"</span>);

        <span class="hljs-comment">// æ¨¡æ‹Ÿè´¦å·å¯†ç éªŒè¯</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"admin"</span>.equals(username) &amp;&amp; <span class="hljs-string">"123456"</span>.equals(password)) {
            <span class="hljs-comment">// ç”ŸæˆJWTä»¤ç‰Œ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> JwtUtil.generateToken(username);
            <span class="hljs-comment">// è¿”å›ä»¤ç‰Œç»™å®¢æˆ·ç«¯</span>
            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":200,"</span>msg<span class="hljs-string">":"</span>ç™»å½•æˆåŠŸ<span class="hljs-string">","</span>data<span class="hljs-string">":"</span><span class="hljs-string">" + token + "</span><span class="hljs-string">"}"</span>);
            <span class="hljs-keyword">return</span>;
        }

        resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":500,"</span>msg<span class="hljs-string">":"</span>è´¦å·æˆ–å¯†ç é”™è¯¯<span class="hljs-string">"}"</span>);
    }
}

<span class="hljs-meta">@WebServlet("/jwt/emp/list")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtEmpListServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {
        resp.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);

        <span class="hljs-comment">// è·å–è¯·æ±‚å¤´ä¸­çš„JWTä»¤ç‰Œ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">authorization</span> <span class="hljs-operator">=</span> req.getHeader(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-keyword">if</span> (authorization == <span class="hljs-literal">null</span> || !authorization.startsWith(<span class="hljs-string">"Bearer "</span>)) {
            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":401,"</span>msg<span class="hljs-string">":"</span>è¯·å…ˆç™»å½•<span class="hljs-string">"}"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// æå–ä»¤ç‰Œï¼ˆå»é™¤"Bearer "å‰ç¼€ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> authorization.substring(<span class="hljs-number">7</span>);
        <span class="hljs-comment">// éªŒè¯ä»¤ç‰Œå¹¶è·å–ç”¨æˆ·å</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> JwtUtil.getUsernameFromToken(token);
        <span class="hljs-keyword">if</span> (username == <span class="hljs-literal">null</span>) {
            resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":401,"</span>msg<span class="hljs-string">":"</span>ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ<span class="hljs-string">"}"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// ä»¤ç‰Œæœ‰æ•ˆï¼šè¿”å›å‘˜å·¥åˆ—è¡¨</span>
        resp.getWriter().write(<span class="hljs-string">"{"</span>code<span class="hljs-string">":200,"</span>data<span class="hljs-string">":[{"</span>id<span class="hljs-string">":1,"</span>name<span class="hljs-string">":"</span>å¼ ä¸‰<span class="hljs-string">"},{"</span>id<span class="hljs-string">":2,"</span>name<span class="hljs-string">":"</span>æå››<span class="hljs-string">"}]}"</span>);
    }
}
</code></pre>
<h5 data-id="heading-13">JWT çš„ä¼˜ç¼ºç‚¹</h5>





















<table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æ— çŠ¶æ€ï¼ˆæœåŠ¡å™¨æ— éœ€å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œé™ä½æœåŠ¡å™¨å‹åŠ›ï¼‰</td><td>å®‰å…¨æ€§è¾ƒä½ï¼ˆä»¤ç‰Œå­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè‹¥æ³„éœ²å¯èƒ½è¢«æ¶æ„ä½¿ç”¨ï¼Œéœ€é…åˆ HTTPSï¼‰</td></tr><tr><td>æ”¯æŒè·¨åŸŸï¼ˆä»¤ç‰Œé€šè¿‡è¯·æ±‚å¤´æºå¸¦ï¼Œä¸å—è·¨åŸŸé™åˆ¶ï¼‰</td><td>ä»¤ç‰Œä¸€æ—¦ç”Ÿæˆï¼Œæ— æ³•ä¸»åŠ¨ä½œåºŸï¼ˆé™¤éè®¾ç½®çŸ­æœŸè¿‡æœŸï¼Œæˆ–ç»´æŠ¤é»‘åå•ï¼‰</td></tr><tr><td>æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆä»»æ„æœåŠ¡å™¨å‡å¯é€šè¿‡å¯†é’¥éªŒè¯ä»¤ç‰Œï¼Œæ— éœ€ Session å…±äº«ï¼‰</td><td>è½½è·éƒ¨åˆ† Base64 ç¼–ç ï¼ˆéåŠ å¯†ï¼‰ï¼Œæ•æ„Ÿä¿¡æ¯ä¸å¯ç›´æ¥å­˜å‚¨</td></tr></tbody></table>
<h2 data-id="heading-14">ä¸‰ã€è¯·æ±‚æ‹¦æˆªï¼šå®ç°å…¨å±€ç™»å½•éªŒè¯</h2>
<p>æ— è®ºæ˜¯ Session-Cookie è¿˜æ˜¯ JWTï¼Œè‹¥æ¯ä¸ªæ¥å£éƒ½å•ç‹¬ç¼–å†™èº«ä»½éªŒè¯é€»è¾‘ï¼Œä¼šé€ æˆä»£ç å†—ä½™ã€‚æ­¤æ—¶éœ€è¦ <strong>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰</strong> å’Œ <strong>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰</strong> å®ç°å…¨å±€è¯·æ±‚æ‹¦æˆªï¼Œç»Ÿä¸€å¤„ç†ç™»å½•éªŒè¯ã€‚</p>
<h4 data-id="heading-15">1. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼šServlet è§„èŒƒä¸­çš„å…¨å±€æ‹¦æˆª</h4>
<p>Filter æ˜¯ Java Servlet è§„èŒƒå®šä¹‰çš„ç»„ä»¶ï¼Œè¿è¡Œåœ¨ Servlet ä¹‹å‰ï¼Œå¯å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€æ‹¦æˆªå¤„ç†ï¼Œæ”¯æŒå¯¹æ‰€æœ‰ Web èµ„æºï¼ˆServletã€JSPã€é™æ€èµ„æºï¼‰è¿›è¡Œè¿‡æ»¤ã€‚</p>
<h5 data-id="heading-16">å®æˆ˜æ¼”ç¤ºï¼šJWT å…¨å±€éªŒè¯è¿‡æ»¤å™¨</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.tgt.filters;

<span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;
<span class="hljs-keyword">import</span> com.tgt.utils.JwtUtils;
<span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;
<span class="hljs-keyword">import</span> jakarta.servlet.*;
<span class="hljs-keyword">import</span> jakarta.servlet.annotation.WebFilter;
<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;

<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@WebFilter("/*")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {
        <span class="hljs-comment">//1.è·å–è¯·æ±‚urlã€‚</span>
        <span class="hljs-comment">// servletRequest.getRequestURI() è¿™ä¸ªapiæ˜¯å­æ¥å£HttpServletRequestæ‰æœ‰</span>
        <span class="hljs-comment">// å°†çˆ¶æ¥å£ ServletRequest è½¬æ¢ä¸º å­æ¥å£HttpServletRequest</span>
        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> (HttpServletRequest) servletRequest;
        <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> (HttpServletResponse) servletResponse;
        <span class="hljs-type">String</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> request.getRequestURI();

        <span class="hljs-comment">//2.åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œ</span>
        <span class="hljs-keyword">if</span> (uri.contains(<span class="hljs-string">"/login"</span>)){
            <span class="hljs-comment">//å¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œã€‚</span>
            filterChain.doFilter(request,response);

            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">//3.è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"token"</span>);

        <span class="hljs-comment">//4.åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå“åº”401ã€‚</span>
        <span class="hljs-keyword">if</span> (StrUtil.isEmpty(token)){
            response.setStatus(<span class="hljs-number">401</span>);

            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//5.è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œå“åº”401</span>
            <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> JwtUtils.parseJWT(token);<span class="hljs-comment">//å¦‚æœç¯¡æ”¹æˆ–è¿‡æœŸä¼šå‘ç”Ÿå¼‚å¸¸</span>
            
            <span class="hljs-comment">//6.æ”¾è¡Œã€‚</span>
            filterChain.doFilter(request,response);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç™»å½•æ ¡éªŒå¤±è´¥ï¼Œè§£ætokenå¤±è´¥ï¼š"</span>,e);

            <span class="hljs-comment">//è§£ætokenå¤±è´¥ è¿”å›401</span>
            response.setStatus(<span class="hljs-number">401</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-17">2. æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼šSpring æ¡†æ¶ä¸­çš„å…¨å±€æ‹¦æˆª</h4>
<p>Interceptor æ˜¯ Spring MVC æ¡†æ¶æä¾›çš„ç»„ä»¶ï¼Œè¿è¡Œåœ¨ Controller æ–¹æ³•æ‰§è¡Œå‰åï¼Œä»…å¯¹ Controller è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼ŒåŠŸèƒ½æ›´çµæ´»ï¼ˆæ”¯æŒ Spring å®¹å™¨ç®¡ç†ï¼Œå¯æ³¨å…¥ Service ç­‰ Beanï¼‰ã€‚</p>
<h5 data-id="heading-18">å®æˆ˜æ¼”ç¤ºï¼šSpring MVC JWT æ‹¦æˆªå™¨</h5>
<h6 data-id="heading-19">ï¼ˆ1ï¼‰ç¼–å†™ JWT æ‹¦æˆªå™¨</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;
<span class="hljs-keyword">import</span> com.tgt.utils.JwtUtils;
<span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;
<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;

<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInterceptors</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception {

        <span class="hljs-comment">//3.è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"token"</span>);

        <span class="hljs-comment">//4.åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå“åº”401ã€‚</span>
        <span class="hljs-keyword">if</span> (StrUtil.isEmpty(token)){
            response.setStatus(<span class="hljs-number">401</span>);

            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//5.è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œå“åº”401</span>
            <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> JwtUtils.parseJWT(token);<span class="hljs-comment">//å¦‚æœç¯¡æ”¹æˆ–è¿‡æœŸä¼šå‘ç”Ÿå¼‚å¸¸</span>

            <span class="hljs-type">Integer</span> <span class="hljs-variable">empId</span> <span class="hljs-operator">=</span> Integer.valueOf(claims.get(<span class="hljs-string">"empId"</span>).toString());

            log.info(<span class="hljs-string">"ç™»å½•æˆåŠŸï¼Œç”¨æˆ·idä¸ºï¼š{}"</span>,empId);

            <span class="hljs-comment">//6.æ”¾è¡Œã€‚</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç™»å½•æ ¡éªŒå¤±è´¥ï¼Œè§£ætokenå¤±è´¥ï¼š"</span>,e);

            <span class="hljs-comment">//è§£ætokenå¤±è´¥ è¿”å›401</span>
            response.setStatus(<span class="hljs-number">401</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h6 data-id="heading-20">ï¼ˆ2ï¼‰é…ç½®æ‹¦æˆªå™¨ï¼ˆSpring MVC é…ç½®ç±»ï¼‰</h6>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> LoginInterceptors loginInterceptors;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> {
        <span class="hljs-comment">//æ³¨å†Œæ‹¦æˆªå™¨å¹¶ç»‘å®šæ‹¦æˆªè·¯å¾„ï¼Œæ³¨æ„ æ˜¯ä¸¤ä¸ª*,ä»£è¡¨ä»»æ„è·¯å¾„</span>
        registry.addInterceptor(loginInterceptors)
                .addPathPatterns(<span class="hljs-string">"/**"</span>)
                .excludePathPatterns(<span class="hljs-string">"/login"</span>);
    }
}
</code></pre>
<h4 data-id="heading-21">3. è¿‡æ»¤å™¨ vs æ‹¦æˆªå™¨ï¼šæ ¸å¿ƒåŒºåˆ«</h4>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>è¿‡æ»¤å™¨ï¼ˆFilterï¼‰</th><th>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰</th></tr></thead><tbody><tr><td>æ‰€å±è§„èŒƒ</td><td>Servlet è§„èŒƒï¼ˆJava EE æ ‡å‡†ï¼‰</td><td>Spring MVC æ¡†æ¶è‡ªå®šä¹‰</td></tr><tr><td>æ‹¦æˆªèŒƒå›´</td><td>æ‰€æœ‰ Web èµ„æºï¼ˆServletã€JSPã€é™æ€èµ„æºï¼‰</td><td>ä»…æ‹¦æˆª Controller è¯·æ±‚</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>è¿è¡Œåœ¨ Servlet å®¹å™¨å±‚é¢ï¼Œæ—©äº Interceptor</td><td>è¿è¡Œåœ¨ Spring MVC å±‚é¢ï¼Œæ™šäº Filter</td></tr><tr><td>ä¾èµ–å®¹å™¨</td><td>ä¸ä¾èµ– Spring å®¹å™¨ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨</td><td>ä¾èµ– Spring å®¹å™¨ï¼Œå¯æ³¨å…¥ Beanï¼ˆService/Mapperï¼‰</td></tr><tr><td>æ‰§è¡Œæ¬¡æ•°</td><td>ä¸€æ¬¡è¯·æ±‚åªæ‰§è¡Œä¸€æ¬¡</td><td>è‹¥å­˜åœ¨è§†å›¾è½¬å‘ï¼Œä¼šæ‰§è¡Œå¤šæ¬¡</td></tr><tr><td>åŠŸèƒ½çµæ´»æ€§</td><td>åŠŸèƒ½å•ä¸€ï¼Œä»…æ”¯æŒè¯·æ±‚ / å“åº”æ‹¦æˆª</td><td>åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒå‰ç½®æ‹¦æˆªã€åç½®å¤„ç†ã€è§†å›¾æ¸²æŸ“åå¤„ç†</td></tr></tbody></table>
<h2 data-id="heading-22">å››ã€å®Œæ•´ç™»å½•éªŒè¯æµç¨‹ï¼ˆå®æˆ˜æ€»ç»“ï¼‰</h2>
<p>ä»¥ â€œJWT + æ‹¦æˆªå™¨â€ ä¸ºä¾‹ï¼Œå®Œæ•´çš„ç™»å½•éªŒè¯æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>ç”¨æˆ·ç™»å½•</strong>ï¼šå‰ç«¯æäº¤è´¦å·å¯†ç åˆ°<code>/jwt/login</code>æ¥å£ï¼Œåç«¯éªŒè¯é€šè¿‡åç”Ÿæˆ JWT ä»¤ç‰Œï¼Œè¿”å›ç»™å‰ç«¯ï¼›</p>
</li>
<li>
<p><strong>å‰ç«¯å­˜å‚¨ä»¤ç‰Œ</strong>ï¼šå‰ç«¯å°† JWT ä»¤ç‰Œå­˜å‚¨åœ¨ LocalStorage ä¸­ï¼›</p>
</li>
<li>
<p><strong>å‰ç«¯å‘èµ·è¯·æ±‚</strong>ï¼šå‰ç«¯åç»­è®¿é—®æ ¸å¿ƒæ¥å£ï¼ˆå¦‚<code>/emp/list</code>ï¼‰æ—¶ï¼Œé€šè¿‡<code>Authorization</code>è¯·æ±‚å¤´æºå¸¦ JWT ä»¤ç‰Œï¼›</p>
</li>
<li>
<p><strong>å…¨å±€æ‹¦æˆªéªŒè¯</strong>ï¼šåç«¯æ‹¦æˆªå™¨æ‹¦æˆªè¯·æ±‚ï¼Œæå–å¹¶éªŒè¯ JWT ä»¤ç‰Œï¼›</p>
</li>
<li>
<p><strong>è¯·æ±‚æ”¾è¡Œ / æ‹¦æˆª</strong>ï¼š</p>
<ul>
<li>ä»¤ç‰Œæœ‰æ•ˆï¼šæ”¾è¡Œè¯·æ±‚ï¼ŒController å¤„ç†ä¸šåŠ¡å¹¶è¿”å›æ•°æ®ï¼›</li>
<li>ä»¤ç‰Œæ— æ•ˆ / æœªæºå¸¦ï¼šæ‹¦æˆªè¯·æ±‚ï¼Œè¿”å› 401 æœªæˆæƒæç¤ºï¼Œå‰ç«¯è·³è½¬è‡³ç™»å½•é¡µã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-23">äº”ã€ç™»å½•éªŒè¯æœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>ä»¤ç‰Œå®‰å…¨å­˜å‚¨</strong>ï¼š</p>
<ul>
<li>JWT ä»¤ç‰Œä¼˜å…ˆå­˜å‚¨åœ¨<code>HttpOnly</code>Â Cookie ä¸­ï¼ˆé˜²æ­¢ XSS æ”»å‡»ï¼‰ï¼Œå…¶æ¬¡å­˜å‚¨åœ¨ LocalStorageï¼ˆéœ€åš XSS é˜²æŠ¤ï¼‰ï¼›</li>
<li>æ•æ„Ÿä¿¡æ¯ä¸å­˜å‚¨åœ¨ JWT è½½è·ä¸­ï¼ˆè½½è·ä»… Base64 ç¼–ç ï¼Œå¯è¢«è§£ç ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®åˆç†è¿‡æœŸæ—¶é—´</strong>ï¼š</p>
<ul>
<li>çŸ­æœŸä»¤ç‰Œï¼šè®¿é—®ä»¤ç‰Œï¼ˆAccess Tokenï¼‰è¿‡æœŸæ—¶é—´è®¾ä¸º 1 å°æ—¶ï¼Œå‡å°‘ä»¤ç‰Œæ³„éœ²é£é™©ï¼›</li>
<li>é•¿æœŸä»¤ç‰Œï¼šåˆ·æ–°ä»¤ç‰Œï¼ˆRefresh Tokenï¼‰è¿‡æœŸæ—¶é—´è®¾ä¸º 7 å¤©ï¼Œç”¨äºè¿‡æœŸåé‡æ–°è·å–è®¿é—®ä»¤ç‰Œï¼Œæ— éœ€ç”¨æˆ·é‡å¤ç™»å½•ã€‚</li>
</ul>
</li>
<li>
<p><strong>HTTPS ä¼ è¾“</strong>ï¼šæ‰€æœ‰è¯·æ±‚ï¼ˆå°¤å…¶æ˜¯ç™»å½•è¯·æ±‚å’Œæºå¸¦ä»¤ç‰Œçš„è¯·æ±‚ï¼‰ä½¿ç”¨ HTTPS åè®®ï¼Œé˜²æ­¢ä»¤ç‰Œè¢«ä¸­é—´äººåŠ«æŒã€‚</p>
</li>
<li>
<p><strong>é¿å…åŒ¿åè®¿é—®</strong>ï¼šé™¤ç™»å½•æ¥å£ã€é™æ€èµ„æºå¤–ï¼Œæ‰€æœ‰æ ¸å¿ƒæ¥å£å‡éœ€æ‹¦æˆªéªŒè¯ï¼Œç¦æ­¢åŒ¿åè®¿é—®ã€‚</p>
</li>
<li>
<p><strong>ä»¤ç‰Œé»‘åå•æœºåˆ¶</strong>ï¼šè‹¥ç”¨æˆ·é€€å‡ºç™»å½•ï¼ˆä»¤ç‰Œæœªè¿‡æœŸï¼‰ï¼Œåç«¯éœ€ç»´æŠ¤ JWT é»‘åå•ï¼Œæ‹¦æˆªå·²æ³¨é”€çš„ä»¤ç‰Œã€‚</p>
</li>
</ol>
<h2 data-id="heading-24">å…­ã€æ€»ç»“ä¸æ‹“å±•</h2>
<p>æœ¬æ–‡å…¨é¢è®²è§£äº†ç™»å½•éªŒè¯çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒåŒ…æ‹¬ Session-Cookieã€JWT ä¸¤ç§ä¼šè¯æ–¹æ¡ˆï¼Œä»¥åŠ Filterã€Interceptor ä¸¤ç§å…¨å±€æ‹¦æˆªæ–¹æ¡ˆï¼Œæ ¸å¿ƒè¦ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li><strong>ä¼šè¯æ–¹æ¡ˆé€‰æ‹©</strong>ï¼šä¼ ç»Ÿå•ä½“åº”ç”¨å¯ä½¿ç”¨ Session-Cookieï¼Œåˆ†å¸ƒå¼ / è·¨åŸŸåº”ç”¨ä¼˜å…ˆä½¿ç”¨ JWTï¼›</li>
<li><strong>æ‹¦æˆªæ–¹æ¡ˆé€‰æ‹©</strong>ï¼šç®€å•åœºæ™¯ç”¨ Filterï¼ŒSpring Boot/Spring MVC é¡¹ç›®ä¼˜å…ˆç”¨ Interceptorï¼ˆæ›´çµæ´»ï¼‰ï¼›</li>
<li><strong>å®‰å…¨æ ¸å¿ƒ</strong>ï¼šä»¤ç‰Œå­˜å‚¨éœ€é˜² XSSã€ä¼ è¾“éœ€ç”¨ HTTPSã€è¿‡æœŸæ—¶é—´éœ€åˆç†è®¾ç½®ï¼›</li>
<li><strong>ä»£ç è§„èŒƒ</strong>ï¼šå…¨å±€æ‹¦æˆªç»Ÿä¸€å¤„ç†ç™»å½•éªŒè¯ï¼Œé¿å…æ¥å£å†…é‡å¤ç¼–å†™éªŒè¯é€»è¾‘ã€‚</li>
</ol>
<h4 data-id="heading-25">æ‹“å±•æ–¹å‘ï¼š</h4>
<ul>
<li><strong>æƒé™ç»†åŒ–</strong>ï¼šåŸºäº RBAC æ¨¡å‹ï¼ˆè§’è‰² - æƒé™ - ç”¨æˆ·ï¼‰ï¼Œå®ç° â€œåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶â€ï¼ˆå¦‚ç®¡ç†å‘˜å¯åˆ é™¤éƒ¨é—¨ï¼Œæ™®é€šç”¨æˆ·ä»…å¯æŸ¥çœ‹ï¼‰ï¼›</li>
<li><strong>å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰</strong> ï¼šåŸºäº JWT æˆ– CAS åè®®ï¼Œå®ç°å¤šç³»ç»Ÿç»Ÿä¸€ç™»å½•ï¼ˆä¸€æ¬¡ç™»å½•ï¼Œå¤šç³»ç»Ÿå…ç™»ï¼‰ï¼›</li>
<li><strong>ä»¤ç‰Œåˆ·æ–°æœºåˆ¶</strong>ï¼šå®ç° Access Token è¿‡æœŸåï¼Œé€šè¿‡ Refresh Token è‡ªåŠ¨åˆ·æ–°ä»¤ç‰Œï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›</li>
<li><strong>é˜²æš´åŠ›ç ´è§£</strong>ï¼šç™»å½•æ¥å£æ·»åŠ éªŒè¯ç ã€é™æµæœºåˆ¶ï¼Œé˜²æ­¢æ¶æ„è´¦å·å¯†ç çˆ†ç ´ã€‚</li>
</ul>
<p>ç™»å½•éªŒè¯æ˜¯ Web ç³»ç»Ÿå®‰å…¨çš„åŸºçŸ³ï¼ŒæŒæ¡æœ¬æ–‡çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå¯æ­å»ºä¸€å¥—é«˜æ•ˆã€å®‰å…¨çš„ç™»å½•éªŒè¯ä½“ç³»ï¼Œä¸ºç³»ç»Ÿçš„ç¨³å®šè¿è¡Œæä¾›ä¿éšœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ShardingSphere-JDBC å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7590433626560266275</link>    <guid>https://juejin.cn/post/7590433626560266275</guid>    <pubDate>2026-01-03T13:36:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590433626560266275" data-draft-id="7590433626560167971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ShardingSphere-JDBC å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-03T13:36:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GKunLi"/> <meta itemprop="url" content="https://juejin.cn/user/430664725579725"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ShardingSphere-JDBC å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664725579725/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GKunLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:36:21.000Z" title="Sat Jan 03 2026 13:36:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#%E4%B8%80%E5%89%8D%E8%A8%80" title="#%E4%B8%80%E5%89%8D%E8%A8%80">ä¸€ã€å‰è¨€</a></li>
<li><a href="#%E4%BA%8C%E4%BB%80%E4%B9%88%E6%98%AFshardingsphere-jdbc" title="#%E4%BA%8C%E4%BB%80%E4%B9%88%E6%98%AFshardingsphere-jdbc">äºŒã€ä»€ä¹ˆæ˜¯ShardingSphere-JDBC</a></li>
<li><a href="#%E4%B8%89%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8" title="#%E4%B8%89%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8">ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨</a></li>
<li><a href="#%E5%9B%9B%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5" title="#%E5%9B%9B%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">å››ã€æ ¸å¿ƒæ¦‚å¿µ</a></li>
<li><a href="#%E4%BA%94%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B" title="#%E4%BA%94%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">äº”ã€å¿«é€Ÿå¼€å§‹</a></li>
<li><a href="#%E5%85%AD%E5%88%86%E7%89%87%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3" title="#%E5%85%AD%E5%88%86%E7%89%87%E7%AD%96%E7%95%A5%E8%AF%A6%E8%A7%A3">å…­ã€åˆ†ç‰‡ç­–ç•¥è¯¦è§£</a></li>
<li><a href="#%E4%B8%83%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7" title="#%E4%B8%83%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7">ä¸ƒã€é«˜çº§ç‰¹æ€§</a></li>
<li><a href="#%E5%85%AB%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E5%85%AB%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">å…«ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</a></li>
<li><a href="#%E4%B9%9D%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" title="#%E4%B9%9D%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">ä¹ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å‰è¨€</h2>
<p>éšç€ä¸šåŠ¡æ•°æ®é‡çš„å¢é•¿,å•åº“å•è¡¨é€æ¸æ— æ³•æ»¡è¶³é«˜å¹¶å‘ã€å¤§æ•°æ®é‡çš„éœ€æ±‚ã€‚åˆ†åº“åˆ†è¡¨æˆä¸ºè§£å†³è¿™ä¸€é—®é¢˜çš„æœ‰æ•ˆæ–¹æ¡ˆã€‚</p>
<p>ShardingSphereæ˜¯Apacheæ——ä¸‹çš„å¼€æºåˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶,æœ¬æ–‡æ¡£åŸºäºå®é™…é¡¹ç›®,è®²è§£ShardingSphere-JDBCçš„é…ç½®å’Œä½¿ç”¨æ–¹æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ä»€ä¹ˆæ˜¯ShardingSphere-JDBC</h2>
<p>ShardingSphere-JDBCæ˜¯Apache ShardingSphereçš„æ ¸å¿ƒäº§å“,å®šä½ä¸ºè½»é‡çº§Javaæ¡†æ¶,åœ¨JDBCå±‚æä¾›åˆ†åº“åˆ†è¡¨æœåŠ¡ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹:</strong></p>
<ul>
<li><strong>é€æ˜åŒ–</strong> - å¯¹ä¸šåŠ¡ä»£ç é›¶ä¾µå…¥,å°±åƒä½¿ç”¨æ™®é€šJDBCä¸€æ ·</li>
<li><strong>è½»é‡çº§</strong> - æ— éœ€é¢å¤–éƒ¨ç½²,ä»…ä½œä¸ºJDBCé©±åŠ¨å­˜åœ¨</li>
<li><strong>é…ç½®ç®€å•</strong> - é€šè¿‡YAMLé…ç½®å³å¯å®ç°åˆ†åº“åˆ†è¡¨</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯:</strong></p>
<ul>
<li>éœ€è¦åˆ†åº“åˆ†è¡¨çš„åº”ç”¨</li>
<li>åŸºäºMyBatisã€JPAç­‰ORMæ¡†æ¶çš„åº”ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨</h2>
<h3 data-id="heading-4">3.1 å•åº“å•è¡¨çš„ç“¶é¢ˆ</h3>
<p>å½“æ•°æ®é‡è¾¾åˆ°åƒä¸‡çº§æ—¶,ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜:</p>
<ol>
<li><strong>æ€§èƒ½ç“¶é¢ˆ</strong> - å•è¡¨æ•°æ®é‡å¤§,æŸ¥è¯¢å˜æ…¢</li>
<li><strong>å­˜å‚¨ç“¶é¢ˆ</strong> - ç£ç›˜IOæˆä¸ºç“¶é¢ˆ</li>
<li><strong>è¿æ¥é™åˆ¶</strong> - æ•°æ®åº“è¿æ¥æ•°ä¸è¶³</li>
</ol>
<h3 data-id="heading-5">3.2 åˆ†åº“åˆ†è¡¨çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>æå‡æ€§èƒ½</strong> - å•è¡¨æ•°æ®é‡å‡å°‘,æŸ¥è¯¢é€Ÿåº¦æå‡</li>
<li><strong>æé«˜å¹¶å‘</strong> - å¤šåº“åˆ†æ‹…è¯»å†™å‹åŠ›</li>
<li><strong>æ˜“äºæ‰©å±•</strong> - å¯ä»¥åŠ¨æ€å¢åŠ æ•°æ®æº</li>
</ol>
<hr/>
<h2 data-id="heading-6">å››ã€æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-7">4.1 é€»è¾‘è¡¨ä¸ç‰©ç†è¡¨</h3>
<p><strong>é€»è¾‘è¡¨</strong> - åº”ç”¨å±‚çœ‹åˆ°çš„è¡¨,æ¯”å¦‚<code>t_user</code></p>
<p><strong>ç‰©ç†è¡¨</strong> - å®é™…å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„è¡¨,æ¯”å¦‚<code>t_user_0</code>ã€<code>t_user_1</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">t_user:</span>  <span class="hljs-comment"># é€»è¾‘è¡¨</span>
  <span class="hljs-attr">actual-data-nodes:</span> <span class="hljs-string">ds$-&gt;{0..1}.t_user_$-&gt;{0..1}</span>  <span class="hljs-comment"># ç‰©ç†è¡¨</span>
</code></pre>
<h3 data-id="heading-8">4.2 åˆ†ç‰‡é”®</h3>
<p>å†³å®šæ•°æ®è·¯ç”±åˆ°å“ªä¸ªåˆ†ç‰‡çš„å­—æ®µ,å¿…é¡»åŒ…å«åœ¨SQLä¸­æ‰èƒ½æ­£ç¡®è·¯ç”±ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ­£ç¡®:åŒ…å«åˆ†ç‰‡é”®,ç²¾ç¡®è·¯ç”±</span>
SELECT * FROM t_user <span class="hljs-type">WHERE</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

<span class="hljs-comment">// é”™è¯¯:ä¸åŒ…å«åˆ†ç‰‡é”®,å…¨è·¯ç”±(æŸ¥è¯¢æ‰€æœ‰åˆ†ç‰‡)</span>
SELECT * FROM t_user <span class="hljs-type">WHERE</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">'zhangsan'</span>;
</code></pre>
<h3 data-id="heading-9">4.3 åˆ†ç‰‡ç®—æ³•</h3>
<p>ShardingSphereé€šè¿‡åˆ†ç‰‡ç®—æ³•å†³å®šæ•°æ®è·¯ç”±åˆ°å“ªä¸ªåˆ†ç‰‡ã€‚</p>




















<table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>INLINE</td><td>åŸºäºGroovyè¡¨è¾¾å¼çš„ç®€å•ç®—æ³•</td><td>ç®€å•çš„å–æ¨¡åˆ†ç‰‡</td></tr><tr><td>STANDARD</td><td>æ ‡å‡†åˆ†ç‰‡ç®—æ³•</td><td>éœ€è¦ç²¾ç¡®å’ŒèŒƒå›´æŸ¥è¯¢</td></tr></tbody></table>
<p><strong>æœ¬é¡¹ç›®ä½¿ç”¨INLINEç®—æ³•</strong>,é…ç½®ç®€å•,æ€§èƒ½ä¼˜ç§€ã€‚</p>
<h3 data-id="heading-10">4.4 ä¸»é”®ç”Ÿæˆå™¨</h3>
<p>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,éœ€è¦å…¨å±€å”¯ä¸€çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>















<table><thead><tr><th>ç”Ÿæˆå™¨ç±»å‹</th><th>è¯´æ˜</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>SNOWFLAKE</td><td>é›ªèŠ±ç®—æ³•</td><td>åˆ†å¸ƒå¼ã€é«˜æ€§èƒ½ã€è¶‹åŠ¿é€’å¢</td></tr></tbody></table>
<h3 data-id="heading-11">4.5 å¹¿æ’­è¡¨</h3>
<p>åœ¨æ‰€æœ‰æ•°æ®æºä¸­éƒ½å­˜åœ¨çš„è¡¨,æ•°æ®å®Œå…¨ä¸€è‡´ã€‚</p>
<p><strong>ç‰¹ç‚¹:</strong></p>
<ul>
<li>æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œä¼šåœ¨æ‰€æœ‰æ•°æ®æºæ‰§è¡Œ</li>
<li>æŸ¥è¯¢æ“ä½œåªåœ¨ä¸€ä¸ªæ•°æ®æºæ‰§è¡Œ</li>
<li>é€‚ç”¨äºå­—å…¸è¡¨ã€é…ç½®è¡¨ç­‰å°è¡¨</li>
</ul>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">broadcast-tables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">t_dict</span>
</code></pre>
<h3 data-id="heading-12">4.6 ç»‘å®šè¡¨</h3>
<p>å¤šä¸ªè¡¨ä½¿ç”¨ç›¸åŒçš„åˆ†ç‰‡é”®å’Œåˆ†ç‰‡ç®—æ³•,ç¡®ä¿å…³è”æ•°æ®åœ¨åŒä¸€åˆ†ç‰‡ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">binding-tables:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">t_order,t_order_item</span>
</code></pre>
<p><strong>ä¼˜åŠ¿:</strong></p>
<ul>
<li>é¿å…è·¨åº“JOIN</li>
<li>æé«˜æŸ¥è¯¢æ€§èƒ½</li>
<li>ç®€åŒ–äº‹åŠ¡å¤„ç†</li>
</ul>
<hr/>
<h2 data-id="heading-13">äº”ã€å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-14">5.1 æ·»åŠ ä¾èµ–</h3>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ShardingSphere-JDBCä¾èµ–:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ShardingSphere-JDBCæ ¸å¿ƒä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>shardingsphere-jdbc-core-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- MyBatis --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.38<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-15">5.2 é…ç½®æ•°æ®æº</h3>
<p>åœ¨<code>application.yml</code>ä¸­é…ç½®4ä¸ªæ•°æ®æº:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-attr">names:</span> <span class="hljs-string">ds0,ds1,ds2,ds3</span>
      
      <span class="hljs-attr">ds0:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/test_db1?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
          <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
          <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
          <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
      
      <span class="hljs-attr">ds1:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/test_db2?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
          <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
          <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
          <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
      
      <span class="hljs-attr">ds2:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/test_db3?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
          <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
          <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
          <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
      
      <span class="hljs-attr">ds3:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/test_db4?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
          <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
          <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
          <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜:</strong></p>
<ul>
<li><code>names</code> - å®šä¹‰æ‰€æœ‰æ•°æ®æºçš„åç§°</li>
<li><code>hikari</code> - HikariCPè¿æ¥æ± é…ç½®
<ul>
<li><code>minimum-idle</code> - æœ€å°ç©ºé—²è¿æ¥æ•°</li>
<li><code>maximum-pool-size</code> - æœ€å¤§è¿æ¥æ± å¤§å°</li>
<li><code>connection-timeout</code> - è¿æ¥è¶…æ—¶æ—¶é—´(æ¯«ç§’)</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">5.3 é…ç½®åˆ†ç‰‡è§„åˆ™</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">tables:</span>
          <span class="hljs-comment"># ç”¨æˆ·è¡¨é…ç½®</span>
          <span class="hljs-attr">t_user:</span>
            <span class="hljs-comment"># å®é™…æ•°æ®èŠ‚ç‚¹: ds0.t_user_0, ds0.t_user_1, ds1.t_user_0, ds1.t_user_1</span>
            <span class="hljs-attr">actual-data-nodes:</span> <span class="hljs-string">ds$-&gt;{0..1}.t_user_$-&gt;{0..1}</span>
            
            <span class="hljs-comment"># åˆ†åº“ç­–ç•¥</span>
            <span class="hljs-attr">database-strategy:</span>
              <span class="hljs-attr">standard:</span>
                <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
                <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">user-db-inline</span>
            
            <span class="hljs-comment"># åˆ†è¡¨ç­–ç•¥</span>
            <span class="hljs-attr">table-strategy:</span>
              <span class="hljs-attr">standard:</span>
                <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
                <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">user-table-inline</span>
            
            <span class="hljs-comment"># ä¸»é”®ç”Ÿæˆç­–ç•¥</span>
            <span class="hljs-attr">key-generate-strategy:</span>
              <span class="hljs-attr">column:</span> <span class="hljs-string">user_id</span>
              <span class="hljs-attr">key-generator-name:</span> <span class="hljs-string">snowflake</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜:</strong></p>
<ul>
<li><code>actual-data-nodes</code> - å®šä¹‰ç‰©ç†è¡¨çš„åˆ†å¸ƒ
<ul>
<li><code>ds$-&gt;{0..1}</code> - è¡¨ç¤ºds0å’Œds1ä¸¤ä¸ªæ•°æ®æº</li>
<li><code>t_user_$-&gt;{0..1}</code> - è¡¨ç¤ºt_user_0å’Œt_user_1ä¸¤ä¸ªè¡¨</li>
<li>ç»„åˆå: ds0.t_user_0, ds0.t_user_1, ds1.t_user_0, ds1.t_user_1</li>
</ul>
</li>
</ul>
<h3 data-id="heading-17">5.4 é…ç½®åˆ†ç‰‡ç®—æ³•</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">sharding-algorithms:</span>
          <span class="hljs-comment"># ç”¨æˆ·è¡¨åˆ†åº“ç®—æ³•</span>
          <span class="hljs-attr">user-db-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'ds$-&gt;{ (Math.abs(user_id.hashCode()) % 4).intdiv(2) }'</span>
          
          <span class="hljs-comment"># ç”¨æˆ·è¡¨åˆ†è¡¨ç®—æ³•</span>
          <span class="hljs-attr">user-table-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'t_user_$-&gt;{ Math.abs(user_id.hashCode()) % 2 }'</span>
</code></pre>
<p><strong>ç®—æ³•è¯´æ˜:</strong></p>
<ol>
<li>
<p><strong>åˆ†åº“ç®—æ³•</strong>: <code>ds$-&gt;{ (Math.abs(user_id.hashCode()) % 4).intdiv(2) }</code></p>
<ul>
<li>è®¡ç®—user_idçš„hashCodeå–ç»å¯¹å€¼</li>
<li>å¯¹4å–æ¨¡,å¾—åˆ°0ã€1ã€2ã€3</li>
<li>æ•´é™¤2,å¾—åˆ°0ã€1</li>
<li>æœ€ç»ˆè·¯ç”±åˆ°ds0æˆ–ds1</li>
</ul>
</li>
<li>
<p><strong>åˆ†è¡¨ç®—æ³•</strong>: <code>t_user_$-&gt;{ Math.abs(user_id.hashCode()) % 2 }</code></p>
<ul>
<li>è®¡ç®—user_idçš„hashCodeå–ç»å¯¹å€¼</li>
<li>å¯¹2å–æ¨¡,å¾—åˆ°0ã€1</li>
<li>æœ€ç»ˆè·¯ç”±åˆ°t_user_0æˆ–t_user_1</li>
</ul>
</li>
</ol>
<p><strong>æ•°æ®åˆ†å¸ƒç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">user_id</span> = <span class="hljs-number">100</span>
- åˆ†åº“: (100 % 4).intdiv(2) = 0 â†’ ds0
- åˆ†è¡¨: 100 % <span class="hljs-attr">2</span> = <span class="hljs-number">0</span> â†’ t_user_0
- æœ€ç»ˆè·¯ç”±: ds0.t_user_0
</code></pre>
<h3 data-id="heading-18">5.5 é…ç½®ä¸»é”®ç”Ÿæˆå™¨</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">key-generators:</span>
          <span class="hljs-attr">snowflake:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">SNOWFLAKE</span>
</code></pre>
<p><strong>é›ªèŠ±ç®—æ³•åŸç†:</strong></p>
<ul>
<li>1ä½ç¬¦å·ä½</li>
<li>41ä½æ—¶é—´æˆ³(æ¯«ç§’çº§)</li>
<li>10ä½æœºå™¨ID</li>
<li>12ä½åºåˆ—å·</li>
</ul>
<h3 data-id="heading-19">5.6 é…ç½®å¹¿æ’­è¡¨å’Œç»‘å®šè¡¨</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-comment"># ç»‘å®šè¡¨é…ç½®</span>
        <span class="hljs-attr">binding-tables:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">t_order,t_order_item</span>
        
        <span class="hljs-comment"># å¹¿æ’­è¡¨é…ç½®</span>
        <span class="hljs-attr">broadcast-tables:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">t_dict</span>
</code></pre>
<h3 data-id="heading-20">5.7 é…ç½®å±æ€§</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">props:</span>
      <span class="hljs-comment"># æ˜¾ç¤ºSQL(ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­)</span>
      <span class="hljs-attr">sql-show:</span> <span class="hljs-literal">true</span>
      <span class="hljs-comment"># å…è®¸æ²¡æœ‰åˆ†ç‰‡åˆ—çš„æ’å…¥é€šè¿‡ä¸»é”®ç”Ÿæˆå™¨</span>
      <span class="hljs-attr">check-table-metadata-enabled:</span> <span class="hljs-literal">false</span>
</code></pre>
<h3 data-id="heading-21">5.8 åˆ›å»ºå®ä½“ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ID(ä¸»é”®,ç”±ShardingSphereè‡ªåŠ¨ç”Ÿæˆ)
     */</span>
    <span class="hljs-keyword">private</span> Long userId;
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·å
     */</span>
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-comment">/**
     * é‚®ç®±
     */</span>
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">/**
     * å¹´é¾„
     */</span>
    <span class="hljs-keyword">private</span> Integer age;
    
    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime createdTime;
    
    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime updatedTime;
}
</code></pre>
<h3 data-id="heading-22">5.9 åˆ›å»ºMapperæ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.mapper;

<span class="hljs-keyword">import</span> com.example.demo.model.User;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.*;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {
    
    <span class="hljs-comment">/**
     * æ’å…¥ç”¨æˆ·
     * æ³¨æ„:ä¸åŒ…å«user_idå­—æ®µ,ç”±ShardingSphereè‡ªåŠ¨ç”Ÿæˆ
     */</span>
    <span class="hljs-meta">@Insert("INSERT INTO t_user (username, email, age) VALUES (#{username}, #{email}, #{age})")</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(User user)</span>;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæ›´æ–°ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@Update("UPDATE t_user SET username = #{username}, email = #{email}, age = #{age} WHERE user_id = #{userId}")</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">updateById</span><span class="hljs-params">(User user)</span>;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@Select("SELECT * FROM t_user WHERE user_id = #{userId}")</span>
    User <span class="hljs-title function_">selectById</span><span class="hljs-params">(Long userId)</span>;
    
    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
     * æ³¨æ„:æ­¤æŸ¥è¯¢ä¸åŒ…å«åˆ†ç‰‡é”®,ä¼šå¯¼è‡´å…¨è·¯ç”±
     */</span>
    <span class="hljs-meta">@Select("SELECT * FROM t_user WHERE username = #{username}")</span>
    User <span class="hljs-title function_">selectByUsername</span><span class="hljs-params">(String username)</span>;
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
     * æ³¨æ„:æ­¤æŸ¥è¯¢ä¸åŒ…å«åˆ†ç‰‡é”®,ä¼šå¯¼è‡´å…¨è·¯ç”±
     */</span>
    <span class="hljs-meta">@Select("SELECT * FROM t_user")</span>
    List&lt;User&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">/**
     * æ ¹æ®IDåˆ é™¤ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@Delete("DELETE FROM t_user WHERE user_id = #{userId}")</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(Long userId)</span>;
}
</code></pre>
<p><strong>é‡è¦è¯´æ˜:</strong></p>
<ul>
<li>INSERTè¯­å¥ä¸­ä¸åŒ…å«åˆ†ç‰‡é”®å­—æ®µ(user_id),ç”±ShardingSphereè‡ªåŠ¨ç”Ÿæˆ</li>
<li>æŸ¥è¯¢è¯­å¥æœ€å¥½åŒ…å«åˆ†ç‰‡é”®,å¦åˆ™ä¼šå¯¼è‡´å…¨è·¯ç”±,æ€§èƒ½è¾ƒå·®</li>
</ul>
<h3 data-id="heading-23">5.10 åˆ›å»ºControllerå±‚</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.controller;

<span class="hljs-keyword">import</span> com.example.demo.mapper.UserMapper;
<span class="hljs-keyword">import</span> com.example.demo.model.User;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.insert(user);
        <span class="hljs-keyword">return</span> result &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"User inserted successfully"</span> : <span class="hljs-string">"Failed to insert user"</span>;
    }
    
    <span class="hljs-meta">@PutMapping</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.updateById(user);
        <span class="hljs-keyword">return</span> result &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"User updated successfully"</span> : <span class="hljs-string">"Failed to update user"</span>;
    }
    
    <span class="hljs-meta">@GetMapping("/{userId}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">selectById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long userId)</span> {
        <span class="hljs-keyword">return</span> userMapper.selectById(userId);
    }
    
    <span class="hljs-meta">@GetMapping("/username/{username}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">selectByUsername</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String username)</span> {
        <span class="hljs-keyword">return</span> userMapper.selectByUsername(username);
    }
    
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> userMapper.selectAll();
    }
    
    <span class="hljs-meta">@DeleteMapping("/{userId}")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long userId)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.deleteById(userId);
        <span class="hljs-keyword">return</span> result &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"User deleted successfully"</span> : <span class="hljs-string">"Failed to delete user"</span>;
    }
}
</code></pre>
<h3 data-id="heading-24">5.11 åˆå§‹åŒ–æ•°æ®åº“</h3>
<p>æ‰§è¡ŒSQLè„šæœ¬åˆ›å»ºæ•°æ®åº“å’Œè¡¨:</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> test_db1 <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> test_db2 <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> t_user_0
(
    user_id      <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    username     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email        <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    age          <span class="hljs-type">INT</span>,
    created_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE <span class="hljs-operator">=</span> InnoDB
  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8mb4
  <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_unicode_ci;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> t_user_1
(
    user_id      <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    username     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email        <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    age          <span class="hljs-type">INT</span>,
    created_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE <span class="hljs-operator">=</span> InnoDB
  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8mb4
  <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_unicode_ci;
</code></pre>
<h3 data-id="heading-25">5.12 å¯åŠ¨é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash">mvn spring-boot:run
</code></pre>
<h3 data-id="heading-26">5.13 æµ‹è¯•API</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ’å…¥ç”¨æˆ·</span>
curl -X POST http://localhost:8080/users \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"username":"zhangsan","email":"zhangsan@example.com","age":25}'</span>

<span class="hljs-comment"># æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span>
curl http://localhost:8080/users/100

<span class="hljs-comment"># æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·</span>
curl http://localhost:8080/users/username/zhangsan

<span class="hljs-comment"># æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span>
curl http://localhost:8080/users

<span class="hljs-comment"># æ›´æ–°ç”¨æˆ·</span>
curl -X PUT http://localhost:8080/users \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"userId":100,"username":"lisi","email":"lisi@example.com","age":26}'</span>

<span class="hljs-comment"># åˆ é™¤ç”¨æˆ·</span>
curl -X DELETE http://localhost:8080/users/100
</code></pre>
<hr/>
<h2 data-id="heading-27">å…­ã€åˆ†ç‰‡ç­–ç•¥è¯¦è§£</h2>
<h3 data-id="heading-28">6.1 æ ‡å‡†åˆ†ç‰‡ç­–ç•¥</h3>
<p>æ ‡å‡†åˆ†ç‰‡ç­–ç•¥æ˜¯æœ€å¸¸ç”¨çš„åˆ†ç‰‡ç­–ç•¥,æ”¯æŒç²¾ç¡®åˆ†ç‰‡å’ŒèŒƒå›´æŸ¥è¯¢ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">t_user:</span>
  <span class="hljs-attr">actual-data-nodes:</span> <span class="hljs-string">ds$-&gt;{0..1}.t_user_$-&gt;{0..1}</span>
  <span class="hljs-attr">database-strategy:</span>
    <span class="hljs-attr">standard:</span>
      <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
      <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">user-db-inline</span>
  <span class="hljs-attr">table-strategy:</span>
    <span class="hljs-attr">standard:</span>
      <span class="hljs-attr">sharding-column:</span> <span class="hljs-string">user_id</span>
      <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">user-table-inline</span>
</code></pre>
<h3 data-id="heading-29">6.2 è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç®—æ³•</h3>
<p>è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç®—æ³•æ˜¯æœ€ç®€å•çš„åˆ†ç‰‡ç®—æ³•,ä½¿ç”¨Groovyè¡¨è¾¾å¼å®šä¹‰åˆ†ç‰‡è§„åˆ™ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">sharding-algorithms:</span>
          <span class="hljs-attr">user-db-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'ds$-&gt;{ (Math.abs(user_id.hashCode()) % 4).intdiv(2) }'</span>
          
          <span class="hljs-attr">user-table-inline:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'t_user_$-&gt;{ Math.abs(user_id.hashCode()) % 2 }'</span>
</code></pre>
<p><strong>å¸¸ç”¨è¡¨è¾¾å¼:</strong></p>






























<table><thead><tr><th>è¡¨è¾¾å¼</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>$-&gt;{column}</code></td><td>è·å–åˆ†ç‰‡åˆ—çš„å€¼</td><td><code>user_id</code></td></tr><tr><td><code>$-&gt;{column % n}</code></td><td>å–æ¨¡è¿ç®—</td><td><code>user_id % 2</code></td></tr><tr><td><code>$-&gt;{Math.abs(column.hashCode())}</code></td><td>å–ç»å¯¹å€¼</td><td><code>Math.abs(user_id.hashCode())</code></td></tr><tr><td><code>$-&gt;{column.intdiv(n)}</code></td><td>æ•´é™¤è¿ç®—</td><td><code>(user_id % 4).intdiv(2)</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹:</strong></p>
<ol>
<li><strong>ç®€å•å–æ¨¡</strong></li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'t_user_$-&gt;{user_id % 2}'</span>
</code></pre>
<ol start="2">
<li><strong>Hashå–æ¨¡</strong></li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'t_user_$-&gt;{Math.abs(user_id.hashCode()) % 2}'</span>
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li>è¡¨è¾¾å¼å¿…é¡»è¿”å›å­—ç¬¦ä¸²</li>
<li>è¡¨è¾¾å¼ä¸­çš„å˜é‡åå¿…é¡»ä¸åˆ†ç‰‡åˆ—åä¸€è‡´</li>
<li>å¤æ‚è¡¨è¾¾å¼å»ºè®®ä½¿ç”¨è‡ªå®šä¹‰ç®—æ³•</li>
</ul>
<h3 data-id="heading-30">6.3 æœ¬é¡¹ç›®åˆ†ç‰‡ç­–ç•¥æ€»ç»“</h3>
<p><strong>ç”¨æˆ·è¡¨ (t_user)</strong></p>
<ul>
<li>æ•°æ®æº: ds0, ds1 (å¯¹åº”æ•°æ®åº“ test_db1, test_db2)</li>
<li>åˆ†ç‰‡é”®: user_id</li>
<li>åˆ†åº“ç­–ç•¥: æŒ‰ user_id % 4 åæ•´é™¤2 (å¶æ•°åˆ†åˆ°ds0, å¥‡æ•°åˆ†åˆ°ds1)</li>
<li>åˆ†è¡¨ç­–ç•¥: æŒ‰ user_id % 2 åˆ†è¡¨</li>
<li>è¡¨ç»“æ„: ä¸¤ä¸ªæ•°æ®æºå…±åŒ…å« t_user_0 å’Œ t_user_1 å››ä¸ªåˆ†è¡¨</li>
</ul>
<p><strong>è®¢å•è¡¨ (t_order)</strong></p>
<ul>
<li>æ•°æ®æº: ds2, ds3 (å¯¹åº”æ•°æ®åº“ test_db3, test_db4)</li>
<li>åˆ†ç‰‡é”®: order_id</li>
<li>åˆ†åº“ç®—æ³•: æŒ‰ order_id % 2 æ˜ å°„åˆ° ds2, ds3</li>
<li>åˆ†è¡¨ç®—æ³•: æŒ‰ order_id % 4 åˆ†ç‰‡</li>
<li>è¡¨ç»“æ„: æ¯ä¸ªæ•°æ®æºåŒ…å« t_order_0 åˆ° t_order_3 å››ä¸ªåˆ†è¡¨</li>
</ul>
<p><strong>è®¢å•é¡¹è¡¨ (t_order_item)</strong></p>
<ul>
<li>æ•°æ®æº: ds2, ds3 (å¯¹åº”æ•°æ®åº“ test_db3, test_db4)</li>
<li>åˆ†ç‰‡é”®: order_id</li>
<li>ä¸è®¢å•è¡¨ä¸ºç»‘å®šè¡¨å…³ç³»</li>
</ul>
<p><strong>å¹¿æ’­è¡¨ (t_dict)</strong></p>
<ul>
<li>åœ¨æ‰€æœ‰æ•°æ®æºä¸­éƒ½å­˜åœ¨</li>
<li>æ•°æ®å®Œå…¨ä¸€è‡´</li>
</ul>
<hr/>
<h2 data-id="heading-31">ä¸ƒã€é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-32">7.1 Hintåˆ†ç‰‡ç­–ç•¥</h3>
<p>Hintåˆ†ç‰‡ç­–ç•¥é€šè¿‡HintæŒ‡å®šåˆ†ç‰‡ï¼Œé€‚ç”¨äºéœ€è¦å¼ºåˆ¶è·¯ç”±çš„åœºæ™¯ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯:</strong></p>
<ul>
<li>æ‰¹é‡æ“ä½œæ—¶æŒ‡å®šåˆ†ç‰‡æé«˜æ€§èƒ½</li>
<li>éœ€è¦å¼ºåˆ¶è·¯ç”±åˆ°ç‰¹å®šåˆ†ç‰‡çš„åœºæ™¯</li>
<li>æ•°æ®è¿ç§»åœºæ™¯</li>
</ul>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">tables:</span>
          <span class="hljs-attr">t_order:</span>
            <span class="hljs-attr">actual-data-nodes:</span> <span class="hljs-string">ds$-&gt;{2..3}.t_order_$-&gt;{0..3}</span>
            <span class="hljs-attr">table-strategy:</span>
              <span class="hljs-attr">hint:</span>
                <span class="hljs-attr">sharding-algorithm-name:</span> <span class="hljs-string">order-hint</span>
        
        <span class="hljs-attr">sharding-algorithms:</span>
          <span class="hljs-attr">order-hint:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">INLINE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">algorithm-expression:</span> <span class="hljs-string">'t_order_$-&gt;{value}'</span>
</code></pre>
<p><strong>ä½¿ç”¨Hintè·¯ç”±:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.controller;

<span class="hljs-keyword">import</span> com.example.demo.mapper.OrderMapper;
<span class="hljs-keyword">import</span> com.example.demo.model.Order;
<span class="hljs-keyword">import</span> org.apache.shardingsphere.infra.hint.HintManager;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨Hintå¼ºåˆ¶è·¯ç”±åˆ°æŒ‡å®šåˆ†ç‰‡æŸ¥è¯¢
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@param</span> tableIndex è¡¨ç´¢å¼•(0-3)
     * <span class="hljs-doctag">@return</span> è®¢å•å¯¹è±¡
     */</span>
    <span class="hljs-meta">@GetMapping("/hint/{orderId}/{tableIndex}")</span>
    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">selectByHint</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long orderId, <span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> tableIndex)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance()) {
            <span class="hljs-comment">// è®¾ç½®Hintå€¼ï¼ŒæŒ‡å®šè·¯ç”±åˆ°å“ªä¸ªåˆ†ç‰‡</span>
            hintManager.addTableShardingValue(<span class="hljs-string">"t_order"</span>, tableIndex);
            <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æŸ¥è¯¢ï¼ŒæŒ‡å®šå¤šä¸ªåˆ†ç‰‡
     * 
     * <span class="hljs-doctag">@param</span> tableIndices è¡¨ç´¢å¼•åˆ—è¡¨(0-3)
     * <span class="hljs-doctag">@return</span> è®¢å•åˆ—è¡¨
     */</span>
    <span class="hljs-meta">@GetMapping("/hint/batch/{tableIndices}")</span>
    <span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">batchSelectByHint</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> List&lt;Integer&gt; tableIndices)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance()) {
            <span class="hljs-comment">// è®¾ç½®å¤šä¸ªHintå€¼</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> tableIndex : tableIndices) {
                hintManager.addTableShardingValue(<span class="hljs-string">"t_order"</span>, tableIndex);
            }
            <span class="hljs-keyword">return</span> orderMapper.selectAll();
        }
    }
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li>HintManagerä½¿ç”¨åéœ€è¦å…³é—­ï¼Œå¯ä»¥ä½¿ç”¨try-with-resources</li>
<li>Hintåªåœ¨å½“å‰çº¿ç¨‹æœ‰æ•ˆ</li>
<li>Hintä¼˜å…ˆçº§é«˜äºå…¶ä»–åˆ†ç‰‡ç­–ç•¥</li>
</ul>
<h3 data-id="heading-33">7.2 è¯»å†™åˆ†ç¦»</h3>
<p>è¯»å†™åˆ†ç¦»æ˜¯æå‡ç³»ç»Ÿæ€§èƒ½çš„é‡è¦æ‰‹æ®µï¼Œå°†è¯»æ“ä½œåˆ†å‘åˆ°ä»åº“ï¼Œå†™æ“ä½œåœ¨ä¸»åº“æ‰§è¡Œã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-attr">names:</span> <span class="hljs-string">master,slave0,slave1</span>
      
      <span class="hljs-comment"># ä¸»åº“é…ç½®</span>
      <span class="hljs-attr">master:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/test_db?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      
      <span class="hljs-comment"># ä»åº“0é…ç½®</span>
      <span class="hljs-attr">slave0:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3307/test_db?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      
      <span class="hljs-comment"># ä»åº“1é…ç½®</span>
      <span class="hljs-attr">slave1:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
        <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3308/test_db?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</span>
        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
        <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
    
    <span class="hljs-attr">rules:</span>
      <span class="hljs-comment"># è¯»å†™åˆ†ç¦»è§„åˆ™</span>
      <span class="hljs-attr">readwrite-splitting:</span>
        <span class="hljs-attr">data-sources:</span>
          <span class="hljs-comment"># è¯»å†™åˆ†ç¦»æ•°æ®æºé…ç½®</span>
          <span class="hljs-attr">readwrite_ds:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">Static</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-comment"># å†™æ•°æ®æº</span>
              <span class="hljs-attr">write-data-source-name:</span> <span class="hljs-string">master</span>
              <span class="hljs-comment"># è¯»æ•°æ®æºåˆ—è¡¨</span>
              <span class="hljs-attr">read-data-source-names:</span> <span class="hljs-string">slave0,slave1</span>
              <span class="hljs-comment"># è´Ÿè½½å‡è¡¡ç®—æ³•</span>
              <span class="hljs-attr">load-balancer-name:</span> <span class="hljs-string">round_robin</span>
        
        <span class="hljs-comment"># è´Ÿè½½å‡è¡¡ç®—æ³•</span>
        <span class="hljs-attr">load-balancers:</span>
          <span class="hljs-attr">round_robin:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">ROUND_ROBIN</span>
          <span class="hljs-attr">random:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">RANDOM</span>
</code></pre>
<p><strong>è´Ÿè½½å‡è¡¡ç®—æ³•:</strong></p>




















<table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ROUND_ROBIN</td><td>è½®è¯¢</td><td>ä»åº“æ€§èƒ½ç›¸è¿‘</td></tr><tr><td>RANDOM</td><td>éšæœº</td><td>ä»åº“æ€§èƒ½ç›¸è¿‘</td></tr></tbody></table>
<p><strong>å¼ºåˆ¶è¯»ä¸»åº“:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.controller;

<span class="hljs-keyword">import</span> com.example.demo.mapper.UserMapper;
<span class="hljs-keyword">import</span> com.example.demo.model.User;
<span class="hljs-keyword">import</span> org.apache.shardingsphere.infra.hint.HintManager;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-comment">/**
     * å¼ºåˆ¶ä»ä¸»åº“è¯»å–æ•°æ®
     * ç”¨äºéœ€è¦è¯»å–æœ€æ–°æ•°æ®çš„åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç”¨æˆ·å¯¹è±¡
     */</span>
    <span class="hljs-meta">@GetMapping("/master/{userId}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">selectFromMaster</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long userId)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance()) {
            <span class="hljs-comment">// è®¾ç½®ä»ä¸»åº“è¯»å–</span>
            hintManager.setWriteRouteOnly();
            <span class="hljs-keyword">return</span> userMapper.selectById(userId);
        }
    }
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li>è¯»å†™åˆ†ç¦»ä¾èµ–MySQLä¸»ä»å¤åˆ¶</li>
<li>ä¸»ä»å¤åˆ¶æœ‰å»¶è¿Ÿï¼Œå¯èƒ½è¯»åˆ°æ—§æ•°æ®</li>
<li>éœ€è¦è¯»å–æœ€æ–°æ•°æ®æ—¶ï¼Œä½¿ç”¨Hintå¼ºåˆ¶è¯»ä¸»åº“</li>
<li>ç¡®ä¿ä»åº“æ•°æ®ä¸ä¸»åº“ä¸€è‡´</li>
</ul>
<h3 data-id="heading-34">7.3 æ•°æ®åŠ å¯†</h3>
<p>ShardingSphereæ”¯æŒæ•°æ®åŠ å¯†ï¼Œä¿æŠ¤æ•æ„Ÿæ•°æ®ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-comment"># åŠ å¯†è§„åˆ™</span>
      <span class="hljs-attr">encrypt:</span>
        <span class="hljs-attr">tables:</span>
          <span class="hljs-attr">t_user:</span>
            <span class="hljs-attr">columns:</span>
              <span class="hljs-comment"># é‚®ç®±åŠ å¯†é…ç½®</span>
              <span class="hljs-attr">email:</span>
                <span class="hljs-attr">cipher-column:</span> <span class="hljs-string">email_cipher</span>  <span class="hljs-comment"># åŠ å¯†åˆ—</span>
                <span class="hljs-attr">assisted-query-column:</span> <span class="hljs-string">email_assisted</span>  <span class="hljs-comment"># è¾…åŠ©æŸ¥è¯¢åˆ—</span>
                <span class="hljs-attr">encryptor-name:</span> <span class="hljs-string">aes_encryptor</span>  <span class="hljs-comment"># åŠ å¯†å™¨åç§°</span>
              <span class="hljs-comment"># æ‰‹æœºå·åŠ å¯†é…ç½®</span>
              <span class="hljs-attr">phone:</span>
                <span class="hljs-attr">cipher-column:</span> <span class="hljs-string">phone_cipher</span>
                <span class="hljs-attr">encryptor-name:</span> <span class="hljs-string">aes_encryptor</span>
        
        <span class="hljs-comment"># åŠ å¯†å™¨é…ç½®</span>
        <span class="hljs-attr">encryptors:</span>
          <span class="hljs-attr">aes_encryptor:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">AES</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">aes-key-value:</span> <span class="hljs-number">1234567890123456</span>  <span class="hljs-comment"># AESå¯†é’¥ï¼Œ16ä½</span>
</code></pre>
<p><strong>å®ä½“ç±»è°ƒæ•´:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.model;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    
    <span class="hljs-keyword">private</span> Long userId;
    <span class="hljs-keyword">private</span> String username;
    
    <span class="hljs-comment">/**
     * é‚®ç®±ï¼ˆé€»è¾‘åˆ—ï¼Œè‡ªåŠ¨åŠ å¯†ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> String email;
    
    <span class="hljs-comment">/**
     * æ‰‹æœºå·ï¼ˆé€»è¾‘åˆ—ï¼Œè‡ªåŠ¨åŠ å¯†ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> String phone;
    
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> LocalDateTime createdTime;
    <span class="hljs-keyword">private</span> LocalDateTime updatedTime;
}
</code></pre>
<p><strong>æ•°æ®åº“è¡¨ç»“æ„:</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> t_user_0
(
    user_id            <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    username           <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email_cipher       <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),  <span class="hljs-comment">-- åŠ å¯†åçš„é‚®ç®±</span>
    email_assisted     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),  <span class="hljs-comment">-- è¾…åŠ©æŸ¥è¯¢åˆ—</span>
    phone_cipher       <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),  <span class="hljs-comment">-- åŠ å¯†åçš„æ‰‹æœºå·</span>
    age                <span class="hljs-type">INT</span>,
    created_time       <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    updated_time       <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) ENGINE <span class="hljs-operator">=</span> InnoDB
  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8mb4
  <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_unicode_ci;
</code></pre>
<p><strong>åŠ å¯†ç®—æ³•ç±»å‹:</strong></p>




















<table><thead><tr><th>ç®—æ³•ç±»å‹</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>AES</td><td>AESåŠ å¯†</td><td>é€šç”¨åŠ å¯†</td></tr><tr><td>MD5</td><td>MD5åŠ å¯†</td><td>ä¸å¯é€†åŠ å¯†</td></tr></tbody></table>
<p><strong>æ³¨æ„äº‹é¡¹:</strong></p>
<ul>
<li>åŠ å¯†åæ— æ³•ç›´æ¥æŸ¥è¯¢ï¼Œéœ€è¦ä½¿ç”¨è¾…åŠ©æŸ¥è¯¢åˆ—</li>
<li>åŠ å¯†ä¼šå½±å“æ€§èƒ½ï¼Œè°¨æ…ä½¿ç”¨</li>
<li>å¯†é’¥éœ€è¦å®‰å…¨å­˜å‚¨ï¼Œå»ºè®®ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡</li>
</ul>
<h3 data-id="heading-35">7.4 åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆç­–ç•¥</h3>
<p>é™¤äº†Snowflakeç®—æ³•ï¼ŒShardingSphereè¿˜æ”¯æŒå…¶ä»–ä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">key-generators:</span>
          <span class="hljs-comment"># é›ªèŠ±ç®—æ³•</span>
          <span class="hljs-attr">snowflake:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">SNOWFLAKE</span>
            <span class="hljs-attr">props:</span>
              <span class="hljs-attr">max-vibration-offset:</span> <span class="hljs-number">1</span>  <span class="hljs-comment"># æœ€å¤§æŠ–åŠ¨åç§»é‡</span>
              <span class="hljs-attr">max-tolerate-time-difference-milliseconds:</span> <span class="hljs-number">10</span>  <span class="hljs-comment"># æœ€å¤§å®¹å¿æ—¶é—´å·®(æ¯«ç§’)</span>
</code></pre>
<p><strong>ä¸»é”®ç”Ÿæˆå™¨ç±»å‹:</strong></p>

























<table><thead><tr><th>ç”Ÿæˆå™¨ç±»å‹</th><th>è¯´æ˜</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>SNOWFLAKE</td><td>é›ªèŠ±ç®—æ³•</td><td>åˆ†å¸ƒå¼ã€é«˜æ€§èƒ½ã€è¶‹åŠ¿é€’å¢</td></tr><tr><td>UUID</td><td>UUID</td><td>æ— åºã€é•¿åº¦é•¿</td></tr><tr><td>NIL</td><td>ä¸ç”Ÿæˆä¸»é”®</td><td>éœ€è¦æ‰‹åŠ¨æŒ‡å®š</td></tr></tbody></table>
<p><strong>ä½¿ç”¨å»ºè®®:</strong></p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨Snowflakeç®—æ³•</li>
<li>æ€§èƒ½æ•æ„Ÿåœºæ™¯è€ƒè™‘è°ƒæ•´max-tolerate-time-difference-milliseconds</li>
<li>ç¡®ä¿ä¸»é”®å”¯ä¸€æ€§</li>
</ul>
<h3 data-id="heading-36">7.5 SQLè§£æä¸æ”¹å†™</h3>
<p>ShardingSphereæ”¯æŒSQLè§£æå’Œæ”¹å†™ï¼Œè¿™æ˜¯å…¶æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ã€‚</p>
<p><strong>åŠŸèƒ½è¯´æ˜:</strong></p>
<ol>
<li><strong>è‡ªåŠ¨è·¯ç”±</strong> - æ ¹æ®åˆ†ç‰‡é”®è‡ªåŠ¨è·¯ç”±åˆ°ç›®æ ‡åˆ†ç‰‡</li>
<li><strong>ç»“æœå½’å¹¶</strong> - åˆå¹¶å¤šä¸ªåˆ†ç‰‡çš„ç»“æœ</li>
<li><strong>SQLæ”¹å†™</strong> - ä¿®æ”¹SQLä»¥é€‚åº”åˆ†ç‰‡åœºæ™¯</li>
</ol>
<p><strong>ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå§‹SQL</span>
SELECT * FROM t_user <span class="hljs-type">WHERE</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>

<span class="hljs-comment">// æ”¹å†™åçš„SQLï¼ˆè·¯ç”±åˆ°ds0.t_user_0ï¼‰</span>
SELECT * FROM ds0.t_user_0 <span class="hljs-type">WHERE</span> <span class="hljs-variable">user_id</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>
</code></pre>
<p><strong>ä½¿ç”¨å»ºè®®:</strong></p>
<ul>
<li>ç†è§£SQLæ”¹å†™åŸç†ï¼Œä¼˜åŒ–SQLè¯­å¥</li>
<li>é¿å…å…¨è·¯ç”±æŸ¥è¯¢ï¼Œæ€§èƒ½è¾ƒå·®</li>
<li>ä½¿ç”¨ç»‘å®šè¡¨é¿å…è·¨åº“JOIN</li>
</ul>
<h3 data-id="heading-37">7.6 é…ç½®ä¸­å¿ƒ</h3>
<p>ShardingSphereæ”¯æŒé…ç½®ä¸­å¿ƒï¼Œå®ç°åŠ¨æ€é…ç½®ç®¡ç†ã€‚</p>
<p><strong>æ”¯æŒçš„é…ç½®ä¸­å¿ƒ:</strong></p>
<ul>
<li>Zookeeper</li>
<li>Nacos</li>
<li>Etcd</li>
<li>Apollo</li>
</ul>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">mode:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">Cluster</span>
      <span class="hljs-attr">repository:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">Zookeeper</span>
        <span class="hljs-attr">props:</span>
          <span class="hljs-attr">namespace:</span> <span class="hljs-string">sharding-sphere</span>
          <span class="hljs-attr">server-lists:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:2181</span>
          <span class="hljs-attr">retry-interval-milliseconds:</span> <span class="hljs-number">500</span>
          <span class="hljs-attr">max-retries:</span> <span class="hljs-number">3</span>
          <span class="hljs-attr">time-to-live-milliseconds:</span> <span class="hljs-number">5000</span>
</code></pre>
<p><strong>ä¼˜åŠ¿:</strong></p>
<ul>
<li>é…ç½®åŠ¨æ€æ›´æ–°ï¼Œæ— éœ€é‡å¯</li>
<li>é…ç½®é›†ä¸­ç®¡ç†</li>
<li>é…ç½®ç‰ˆæœ¬æ§åˆ¶</li>
</ul>
<p><strong>ä½¿ç”¨å»ºè®®:</strong></p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é…ç½®ä¸­å¿ƒ</li>
<li>é…ç½®å˜æ›´éœ€è¦ç°åº¦å‘å¸ƒ</li>
<li>é…ç½®éœ€è¦å¤‡ä»½</li>
</ul>
<hr/>
<h2 data-id="heading-38">å…«ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-39">7.1 é…ç½®ä¼˜åŒ–</h3>
<p><strong>æ•°æ®æºé…ç½®:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-attr">ds0:</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
          <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
          <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
          <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span>
</code></pre>
<p><strong>ShardingSphereé…ç½®:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">props:</span>
      <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå…³é—­SQLæ˜¾ç¤º</span>
      <span class="hljs-attr">sql-show:</span> <span class="hljs-literal">false</span>
      <span class="hljs-comment"># å…è®¸æ²¡æœ‰åˆ†ç‰‡åˆ—çš„æ’å…¥é€šè¿‡ä¸»é”®ç”Ÿæˆå™¨</span>
      <span class="hljs-attr">check-table-metadata-enabled:</span> <span class="hljs-literal">false</span>
      <span class="hljs-comment"># æ ¸å¿ƒæ‰§è¡Œçº¿ç¨‹æ± å¤§å°</span>
      <span class="hljs-attr">kernel-executor-size:</span> <span class="hljs-number">16</span>
</code></pre>
<h3 data-id="heading-40">7.2 æ€§èƒ½ä¼˜åŒ–</h3>
<p><strong>1. ä½¿ç”¨ç»‘å®šè¡¨</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">binding-tables:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">t_order,t_order_item</span>
</code></pre>
<p><strong>ä¼˜åŠ¿:</strong></p>
<ul>
<li>é¿å…è·¨åº“JOIN</li>
<li>æé«˜æŸ¥è¯¢æ€§èƒ½</li>
<li>ç®€åŒ–äº‹åŠ¡å¤„ç†</li>
</ul>
<p><strong>2. é¿å…å…¨è·¯ç”±</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨è:ä¸åŒ…å«åˆ†ç‰‡é”®,å…¨è·¯ç”±</span>
List&lt;User&gt; users = userMapper.selectAll();

<span class="hljs-comment">// æ¨è:åŒ…å«åˆ†ç‰‡é”®,ç²¾ç¡®è·¯ç”±</span>
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">100L</span>);
</code></pre>
<p><strong>3. åˆç†ä½¿ç”¨ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœ¨åˆ†ç‰‡é”®ä¸Šåˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_id <span class="hljs-keyword">ON</span> t_user(user_id);

<span class="hljs-comment">-- åœ¨å¸¸ç”¨æŸ¥è¯¢å­—æ®µä¸Šåˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_username <span class="hljs-keyword">ON</span> t_user(username);
</code></pre>
<h3 data-id="heading-41">7.3 ç›‘æ§å‘Šè­¦</h3>
<p><strong>ç›‘æ§æŒ‡æ ‡:</strong></p>
<ol>
<li>
<p><strong>æ•°æ®åº“æŒ‡æ ‡</strong></p>
<ul>
<li>è¿æ¥æ•°ä½¿ç”¨ç‡</li>
<li>æ…¢æŸ¥è¯¢æ•°é‡</li>
<li>é”ç­‰å¾…æ—¶é—´</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨æŒ‡æ ‡</strong></p>
<ul>
<li>SQLæ‰§è¡Œæ—¶é—´</li>
<li>SQLé”™è¯¯ç‡</li>
<li>åˆ†ç‰‡è·¯ç”±æ—¶é—´</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡æŒ‡æ ‡</strong></p>
<ul>
<li>è¯·æ±‚å“åº”æ—¶é—´</li>
<li>è¯·æ±‚æˆåŠŸç‡</li>
<li>è¯·æ±‚ååé‡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-42">7.4 å®‰å…¨åŠ å›º</h3>
<p><strong>1. SQLæ³¨å…¥é˜²æŠ¤</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨è:å­—ç¬¦ä¸²æ‹¼æ¥SQL</span>
<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM t_user WHERE username = '"</span> + username + <span class="hljs-string">"'"</span>;

<span class="hljs-comment">// æ¨è:ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span>
<span class="hljs-meta">@Select("SELECT * FROM t_user WHERE username = #{username}")</span>
User <span class="hljs-title function_">selectByUsername</span><span class="hljs-params">(String username)</span>;
</code></pre>
<p><strong>2. æƒé™æ§åˆ¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåªè¯»ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'readonly'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'password'</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> test_db.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'readonly'</span>@<span class="hljs-string">'%'</span>;

<span class="hljs-comment">-- åˆ›å»ºè¯»å†™ç”¨æˆ·</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'readwrite'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'password'</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span>, <span class="hljs-keyword">INSERT</span>, <span class="hljs-keyword">UPDATE</span>, <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> test_db.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'readwrite'</span>@<span class="hljs-string">'%'</span>;
</code></pre>
<h3 data-id="heading-43">7.5 è¿ç»´å»ºè®®</h3>
<p><strong>1. å®šæœŸå¤‡ä»½</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤‡ä»½æ•°æ®åº“</span>
mysqldump -h 127.0.0.1 -u root -p test_db1 &gt; test_db1_backup.sql

<span class="hljs-comment"># æ¢å¤æ•°æ®åº“</span>
mysql -h 127.0.0.1 -u root -p test_db1 &lt; test_db1_backup.sql
</code></pre>
<p><strong>2. å®šæœŸæ¸…ç†</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¸…ç†è¿‡æœŸæ•°æ®</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> t_user <span class="hljs-keyword">WHERE</span> created_time <span class="hljs-operator">&lt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">YEAR</span>);

<span class="hljs-comment">-- ä¼˜åŒ–è¡¨</span>
OPTIMIZE <span class="hljs-keyword">TABLE</span> t_user_0;
OPTIMIZE <span class="hljs-keyword">TABLE</span> t_user_1;
</code></pre>
<hr/>
<h2 data-id="heading-44">ä¹ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-45">9.1 åˆ†ç‰‡é”®è‡ªåŠ¨ç”Ÿæˆé—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> INSERTè¯­å¥ä¸åŒ…å«åˆ†ç‰‡é”®,å¯¼è‡´è·¯ç”±å¤±è´¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">props:</span>
      <span class="hljs-attr">check-table-metadata-enabled:</span> <span class="hljs-literal">false</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Insert("INSERT INTO t_user (username, email, age) VALUES (#{username}, #{email}, #{age})")</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(User user)</span>;
</code></pre>
<h3 data-id="heading-46">9.2 å…¨è·¯ç”±é—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> æŸ¥è¯¢ä¸åŒ…å«åˆ†ç‰‡é”®,å¯¼è‡´å…¨è·¯ç”±,æ€§èƒ½è¾ƒå·®ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨è:å…¨è·¯ç”±</span>
List&lt;User&gt; users = userMapper.selectAll();

<span class="hljs-comment">// æ¨è:ç²¾ç¡®è·¯ç”±</span>
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">100L</span>);
</code></pre>
<h3 data-id="heading-47">9.3 è·¨åº“JOINé—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> è·¨åº“JOINæ€§èƒ½è¾ƒå·®æˆ–æ— æ³•æ‰§è¡Œã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">binding-tables:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">t_order,t_order_item</span>
</code></pre>
<h3 data-id="heading-48">9.4 ä¸»é”®å†²çªé—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆå™¨é…ç½®é”™è¯¯,å¯¼è‡´ä¸»é”®å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-attr">sharding:</span>
        <span class="hljs-attr">key-generators:</span>
          <span class="hljs-attr">snowflake:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">SNOWFLAKE</span>
</code></pre>
<h3 data-id="heading-49">9.5 è¿æ¥æ± è€—å°½é—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> è¿æ¥æ± é…ç½®ä¸åˆç†,å¯¼è‡´è¿æ¥æ± è€—å°½ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">shardingsphere:</span>
    <span class="hljs-attr">datasource:</span>
      <span class="hljs-attr">ds0:</span>
        <span class="hljs-attr">hikari:</span>
          <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">50</span>
          <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
</code></pre>
<h3 data-id="heading-50">9.6 Hintåˆ†ç‰‡ä¸ç”Ÿæ•ˆé—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> ä½¿ç”¨HintManageræŒ‡å®šåˆ†ç‰‡åï¼ŒæŸ¥è¯¢ä»ç„¶è·¯ç”±åˆ°æ‰€æœ‰åˆ†ç‰‡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¡®ä¿ä½¿ç”¨try-with-resourcesæˆ–æ‰‹åŠ¨å…³é—­HintManager</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance()) {
    hintManager.addTableShardingValue(<span class="hljs-string">"t_order"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
}

<span class="hljs-comment">// æˆ–è€…æ‰‹åŠ¨å…³é—­</span>
<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance();
<span class="hljs-keyword">try</span> {
    hintManager.addTableShardingValue(<span class="hljs-string">"t_order"</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> orderMapper.selectById(orderId);
} <span class="hljs-keyword">finally</span> {
    hintManager.close();
}
</code></pre>
<h3 data-id="heading-51">9.7 è¯»å†™åˆ†ç¦»ä¸»ä»å»¶è¿Ÿé—®é¢˜</h3>
<p><strong>é—®é¢˜:</strong> è¯»å†™åˆ†ç¦»å¯¼è‡´ä¸»ä»å»¶è¿Ÿï¼Œè¯»å–åˆ°æ—§æ•°æ®ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼ºåˆ¶è¯»ä¸»åº“</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">HintManager</span> <span class="hljs-variable">hintManager</span> <span class="hljs-operator">=</span> HintManager.getInstance()) {
    hintManager.setWriteRouteOnly();
    <span class="hljs-keyword">return</span> userMapper.selectById(userId);
}
</code></pre>
<hr/>
<h2 data-id="heading-52">åã€æ€»ç»“</h2>
<p>ShardingSphere-JDBCæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶,æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†å…¶é…ç½®å’Œä½¿ç”¨æ–¹æ³•ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹:</strong></p>
<ol>
<li><strong>åˆ†ç‰‡é”®é€‰æ‹©</strong> - é€‰æ‹©é«˜é¢‘æŸ¥è¯¢å­—æ®µä½œä¸ºåˆ†ç‰‡é”®</li>
<li><strong>åˆ†ç‰‡ç®—æ³•</strong> - ä½¿ç”¨INLINEç®—æ³•,é…ç½®ç®€å•,æ€§èƒ½ä¼˜ç§€</li>
<li><strong>ç»‘å®šè¡¨</strong> - ä½¿ç”¨ç»‘å®šè¡¨é¿å…è·¨åº“JOIN</li>
<li><strong>ä¸»é”®ç”Ÿæˆ</strong> - ä½¿ç”¨Snowflakeç®—æ³•ä¿è¯å”¯ä¸€æ€§</li>
<li><strong>é¿å…å…¨è·¯ç”±</strong> - æŸ¥è¯¢è¯­å¥æœ€å¥½åŒ…å«åˆ†ç‰‡é”®</li>
</ol>
<p><strong>æœ€ä½³å®è·µ:</strong></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨INLINEç®—æ³•,æ€§èƒ½å¥½</li>
<li>é¿å…å…¨è·¯ç”±æŸ¥è¯¢,æ€§èƒ½å·®</li>
<li>ä½¿ç”¨ç»‘å®šè¡¨,é¿å…è·¨åº“æ“ä½œ</li>
<li>é…ç½®åˆç†çš„è¿æ¥æ± å¤§å°</li>
<li>ç”Ÿäº§ç¯å¢ƒå…³é—­sql-show</li>
<li>å®šæœŸå¤‡ä»½,é˜²æ­¢æ•°æ®ä¸¢å¤±</li>
</ol>
<p><strong>å‚è€ƒèµ„æ–™:</strong></p>
<ul>
<li>ShardingSphereå®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fshardingsphere.apache.org%2F" target="_blank" title="https://shardingsphere.apache.org/" ref="nofollow noopener noreferrer">shardingsphere.apache.org/</a></li>
<li>ShardingSphere GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fshardingsphere" target="_blank" title="https://github.com/apache/shardingsphere" ref="nofollow noopener noreferrer">github.com/apache/sharâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-202 sklearn å†³ç­–æ ‘å®æˆ˜ï¼šcriterionã€Graphviz å¯è§†åŒ–ä¸å‰ªæé˜²è¿‡æ‹Ÿåˆ]]></title>    <link>https://juejin.cn/post/7590957076630634542</link>    <guid>https://juejin.cn/post/7590957076630634542</guid>    <pubDate>2026-01-04T01:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590957076630634542" data-draft-id="7590849961727655963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-202 sklearn å†³ç­–æ ‘å®æˆ˜ï¼šcriterionã€Graphviz å¯è§†åŒ–ä¸å‰ªæé˜²è¿‡æ‹Ÿåˆ"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-04T01:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-202 sklearn å†³ç­–æ ‘å®æˆ˜ï¼šcriterionã€Graphviz å¯è§†åŒ–ä¸å‰ªæé˜²è¿‡æ‹Ÿåˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:46:35.000Z" title="Sun Jan 04 2026 01:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨ sklearn åœ¨ Wine æ•°æ®é›†ä¸Šè®­ç»ƒ DecisionTreeClassifierï¼Œå¹¶ç”¨ Graphviz å¯¼å‡ºå¯è§†åŒ–</li>
<li>ç»“è®ºï¼šcriterion å½±å“åˆ†è£‚åº¦é‡ï¼ˆgini/entropy/log_lossï¼‰ï¼Œrandom_state ä¸ splitter å†³å®šç¨³å®šæ€§ä¸éšæœºæ€§ï¼›å‰ªæé  max_depth/min_samples_leaf/ccp_alpha</li>
<li>äº§å‡ºï¼šå¯å¤ç°å®éªŒæµç¨‹ + export_graphviz å‚æ•°è¦ç‚¹ + ç¯å¢ƒç‰ˆæœ¬çŸ©é˜µ + å¸¸è§æŠ¥é”™å®šä½è¡¨</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1a497d33a634769af93d49f2a219467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=ccoxLVQotg6Js%2F9memyJJ0yNIv8%3D" alt="å¤§æ•°æ®-202 sklearn å†³ç­–æ ‘å®æˆ˜ï¼šcriterionã€Graphviz å¯è§†åŒ–ä¸å‰ªæé˜²è¿‡æ‹Ÿåˆ" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>





















<table><thead><tr><th>ç»„ä»¶</th><th>å·²éªŒè¯è¯´æ˜</th></tr></thead><tbody><tr><td>scikit-learn 1.8.0</td><td>PyPI å£°æ˜2025-12-10 å‘å¸ƒï¼›Requires: Python&gt;=3.11ï¼›DecisionTreeClassifier çš„ criterion æ”¯æŒ gini/entropy/log_loss <a href="https://link.juejin.cn?target=https%3A%2F%2Fscikit-learn.org%2Fstable%2Fmodules%2Fgenerated%2Fsklearn.tree.DecisionTreeClassifier.html" target="_blank" title="https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html" ref="nofollow noopener noreferrer">DecisionTreeClassifier APIå®˜æ–¹æ–‡æ¡£</a>ï¼›splitter æ”¯æŒ best/randomï¼›criterion è§ä¸Š <a href="https://link.juejin.cn?target=https%3A%2F%2Fscikit-learn.org%2Fstable%2Fmodules%2Fgenerated%2Fsklearn.tree.export_graphviz.html" target="_blank" title="https://scikit-learn.org/stable/modules/generated/sklearn.tree.export_graphviz.html" ref="nofollow noopener noreferrer">export_graphvizå®˜æ–¹æ–‡æ¡£</a> å¯¼å‡º DOTï¼›é…åˆ dot å‘½ä»¤å¯ç”Ÿæˆ PNG/SVG ç­‰</td></tr><tr><td>python-graphviz 0.21</td><td>PyPI å£°æ˜Requires: Python&gt;=3.9ï¼›æ¸²æŸ“ä»ä¾èµ–ç³»ç»Ÿ Graphvizï¼ˆdotï¼‰ä¸ PATH</td></tr><tr><td>ç³»ç»Ÿ Graphvizï¼ˆdotï¼‰</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgraphviz.org%2F" target="_blank" title="https://graphviz.org/" ref="nofollow noopener noreferrer">å®˜æ–¹ç«™ç‚¹</a>éœ€å•ç‹¬å®‰è£…ï¼ˆWindows/macOS/Linux æ–¹å¼ä¸åŒï¼‰</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a3faf0f5190427892ebb8a183e2ef78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=vGI%2F6Re1A6uwODN55fXCoNXpMPc%3D" alt="å¤§æ•°æ®-202 sklearn å†³ç­–æ ‘å®æˆ˜ï¼šcriterionã€Graphviz å¯è§†åŒ–ä¸å‰ªæé˜²è¿‡æ‹Ÿåˆ" loading="lazy"/></p>
<h2 data-id="heading-2">ä½¿ç”¨sklearnå®ç°å†³ç­–æ ‘</h2>
<h3 data-id="heading-3">å‚æ•°CRITERION</h3>
<p>criterion è¿™ä¸ªå‚æ•°ä½¿ç”¨æ¥å†³å®šä¸çº¯åº¦çš„è®¡ç®—æ–¹æ³•ï¼Œsklearnæä¾›äº†ä¸¤ç§é€‰æ‹©ï¼š</p>
<ul>
<li>è¾“å…¥ entropyï¼Œä½¿ç”¨ä¿¡æ¯ç†µï¼ˆEntropyï¼‰</li>
<li>è¾“å…¥ giniï¼Œä½¿ç”¨åŸºå°¼ç³»æ•°ï¼ˆGini Impurityï¼‰</li>
</ul>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼ŒåŸºå°¼ç³»æ•°å’Œä¿¡æ¯ç†µéƒ½æ˜¯å¸¸ç”¨çš„ä¸çº¯åº¦åº¦é‡æŒ‡æ ‡ï¼Œç”¨äºå†³ç­–æ ‘ç­‰ç®—æ³•çš„ç‰¹å¾é€‰æ‹©å’ŒèŠ‚ç‚¹åˆ’åˆ†ã€‚ä¸¤è€…è™½ç„¶è®¡ç®—æ–¹å¼å’Œæ•æ„Ÿæ€§ä¸åŒï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¾€å¾€èƒ½è¾¾åˆ°ç›¸ä¼¼çš„æ•ˆæœã€‚</p>
<p>ä¿¡æ¯ç†µçš„è®¡ç®—å…¬å¼ä¸ºï¼šH(X)=-Î£p(x)logâ‚‚p(x)ï¼Œå…¶ä¸­p(x)æ˜¯æŸä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ç”±äºæ¶‰åŠå¯¹æ•°è¿ç®—ï¼Œå…¶è®¡ç®—å¤æ‚åº¦æ¯”åŸºå°¼ç³»æ•°è¦é«˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŸºå°¼ç³»æ•°çš„è®¡ç®—å…¬å¼Gini=1-Î£p(x)Â²æ›´åŠ ç®€å•ç›´æ¥ï¼Œä¸éœ€è¦å¯¹æ•°è¿ç®—ï¼Œå› æ­¤è®¡ç®—é€Ÿåº¦æ›´å¿«ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œä¿¡æ¯ç†µå¯¹æ•°æ®ä¸çº¯åº¦çš„æƒ©ç½šæ›´å¼ºã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>å½“æŸä¸ªèŠ‚ç‚¹ä¸­ä¸¤ä¸ªç±»åˆ«çš„æ ·æœ¬æ¯”ä¾‹ä¸º7:3æ—¶ï¼š
<ul>
<li>åŸºå°¼ç³»æ•°=1-(0.7Â²+0.3Â²)=0.42</li>
<li>ä¿¡æ¯ç†µ=-(0.7<em>logâ‚‚0.7+0.3</em>logâ‚‚0.3)â‰ˆ0.88</li>
</ul>
</li>
<li>å½“æ¯”ä¾‹å˜ä¸º8:2æ—¶ï¼š
<ul>
<li>åŸºå°¼ç³»æ•°=0.32</li>
<li>ä¿¡æ¯ç†µâ‰ˆ0.72</li>
</ul>
</li>
</ul>
<p>è¿™ç§æ•æ„Ÿæ€§å·®å¼‚å¯¼è‡´ï¼š</p>
<ol>
<li>åœ¨é«˜ç»´æ•°æ®åœºæ™¯ä¸‹ï¼ˆå¦‚ç‰¹å¾æ•°è¶…è¿‡1000ï¼‰ï¼Œä¿¡æ¯ç†µå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆï¼Œå› ä¸ºå®ƒä¼šå€¾å‘äºé€‰æ‹©æ›´ç»†ç²’åº¦çš„åˆ’åˆ†æ–¹å¼ã€‚æ­¤æ—¶åŸºå°¼ç³»æ•°è¡¨ç°æ›´ç¨³å¥ã€‚</li>
<li>åœ¨å™ªå£°æ•°æ®è¾ƒå¤šæ—¶ï¼ˆå¦‚æ ‡ç­¾é”™è¯¯ç‡è¶…è¿‡10%ï¼‰ï¼ŒåŸºå°¼ç³»æ•°çš„æŠ—å¹²æ‰°èƒ½åŠ›æ›´å¼ºã€‚</li>
<li>å½“æ¨¡å‹æ¬ æ‹Ÿåˆæ—¶ï¼ˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†å‡†ç¡®ç‡éƒ½ä½äº60%ï¼‰ï¼Œä½¿ç”¨ä¿¡æ¯ç†µå¯èƒ½è·å¾—æ›´å¥½çš„æ•ˆæœï¼Œå› ä¸ºå®ƒèƒ½é©±åŠ¨æ¨¡å‹å­¦ä¹ æ›´ç²¾ç»†çš„å†³ç­–è¾¹ç•Œã€‚</li>
</ol>
<p>å®é™…åº”ç”¨å»ºè®®ï¼š</p>
<ul>
<li>å¯¹äºç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚è¡¨æ ¼æ•°æ®ï¼‰ï¼Œå¯ä»¥ä¼˜å…ˆå°è¯•åŸºå°¼ç³»æ•°</li>
<li>åœ¨è®¡ç®—èµ„æºå—é™çš„å®æ—¶ç³»ç»Ÿä¸­ï¼ŒåŸºå°¼ç³»æ•°æ˜¯æ›´å¥½çš„é€‰æ‹©</li>
<li>å½“æ•°æ®è´¨é‡è¾ƒé«˜ä¸”ç»´åº¦é€‚ä¸­æ—¶ï¼ˆå¦‚UCIæ•°æ®é›†ï¼‰ï¼Œå¯ä»¥æ¯”è¾ƒä¸¤ç§æŒ‡æ ‡çš„æ•ˆæœ</li>
<li>åœ¨é›†æˆå­¦ä¹ ä¸­ï¼ˆå¦‚éšæœºæ£®æ—ï¼‰ï¼Œä¸¤ç§æŒ‡æ ‡çš„å·®å¼‚é€šå¸¸ä¼šè¢«å¼±åŒ–</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›è§„å¾‹å¹¶éç»å¯¹ã€‚åœ¨å®è·µä¸­ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡äº¤å‰éªŒè¯æ¥æ¯”è¾ƒä¸¤ç§æŒ‡æ ‡åœ¨ç‰¹å®šæ•°æ®é›†ä¸Šçš„è¡¨ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c877d721cc34e0aaee7244d9fb7bb7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=i%2BVS3AWfS4ubVO5WK4DrUUA8r84%3D" alt="sklearnå®ç°å†³ç­–æ ‘" loading="lazy"/></p>
<h2 data-id="heading-4">åˆæ­¥å»ºæ¨¡</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥éœ€è¦çš„ç®—æ³•åº“å’Œæ¨¡å—</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
%matplotlib inline
<span class="hljs-keyword">from</span> sklearn <span class="hljs-keyword">import</span> tree
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_wine
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>]=[<span class="hljs-string">'Simhei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>]=<span class="hljs-literal">False</span>
</code></pre>
<p>åŠ è½½æ•°æ®</p>
<pre><code class="hljs language-python" lang="python">wine = load_wine()
wine.data.shape
wine.target
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381e98d5f85e435aac734029558a64c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=%2FoHbEPMLI1qmWJWEbwmeSyRmXsA%3D" alt="sklearnå®ç°å†³ç­–æ ‘" loading="lazy"/>
å¦‚æœæ˜¯ wine æ˜¯ä¸€å¼ è¡¨ï¼Œåº”è¯¥é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-python" lang="python">wine_pd=pd.concat([pd.DataFrame(wine.data),pd.DataFrame(wine.target)],axis=<span class="hljs-number">1</span>).head()
wine.feature_names.append(<span class="hljs-string">"result"</span>)
wine_pd.columns=wine.feature_names
wine_pd
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/726d5daf9e8e48619a44ece8002a8551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=q%2Fv0oSP1OqMOHpSWi4vwy1iA1QI%3D" alt="sklearnå®ç°å†³ç­–æ ‘" loading="lazy"/>
ç¼–å†™ä»£ç æŸ¥çœ‹å½¢çŠ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python">Xtrain, Xtest, Ytrain, ytest = train_test_split(wine.data,wine.target,test_size=<span class="hljs-number">0.3</span>,random_state=<span class="hljs-number">420</span>)
<span class="hljs-built_in">print</span>(Xtrain.shape)
<span class="hljs-built_in">print</span>(Xtest.shape)
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbe0eecd47b84fe3b71973d6721d2bde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=ULqI3sMUG%2BXt1kZ6IX6%2BayP49BU%3D" alt="sklearnå®ç°å†³ç­–æ ‘" loading="lazy"/></p>
<h2 data-id="heading-5">å»ºç«‹æ¨¡å‹</h2>
<pre><code class="hljs language-python" lang="python">clf = tree.DecisionTreeClassifier(criterion=<span class="hljs-string">"gini"</span>)
clf = clf.fit(Xtrain, Ytrain)
clf.score(Xtest, ytest) <span class="hljs-comment">#è¿”å›é¢„æµ‹çš„å‡†ç¡®åº¦</span>
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d78a27b69c24cc3a66fa96ed1424531~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=6ViGovnqiqD5Gisp%2F39EMjWvsK8%3D" alt="sklearnå®ç°å†³ç­–æ ‘ å»ºç«‹æ¨¡å‹" loading="lazy"/></p>
<h2 data-id="heading-6">ç”»å†³ç­–æ ‘</h2>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Graphviz æ¨¡å—å¯¼å‡ºå†³ç­–æ ‘æ¨¡å‹ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨ Graphviz ä¹‹å‰éœ€è¦è¿›è¡Œå®‰è£…ï¼Œè‹¥æ˜¯ä½¿ç”¨ä» pip å®‰è£…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">!pip install graphviz
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27cc0283bf334b5e90b3fdbca0f8db27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=WNkLu32Qw3DcpN%2Fgc90IqOW%2BJKM%3D" alt="å†³ç­–æ ‘" loading="lazy"/>
å¯¹å›¾æ¡ˆè¿›è¡Œç»˜åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> graphviz
<span class="hljs-keyword">from</span> sklearn <span class="hljs-keyword">import</span> tree


feature_name = [<span class="hljs-string">'é…’ç²¾'</span>,<span class="hljs-string">'è‹¹æœé…¸'</span>,<span class="hljs-string">'ç°'</span>,<span class="hljs-string">'ç°çš„ç¢±æ€§'</span>,<span class="hljs-string">'é•'</span>,<span class="hljs-string">'æ€»é…š'</span>,<span class="hljs-string">'ç±»é»„é…®'</span>,<span class="hljs-string">'éé»„çƒ·ç±»é…šç±»'</span>,<span class="hljs-string">'èŠ±é’ç´ '</span>,<span class="hljs-string">'é¢œè‰²å¼ºåº¦'</span>,<span class="hljs-string">'è‰²è°ƒ'</span>,<span class="hljs-string">'od280/od315 ç¨€é‡Šè‘¡è„é…’'</span>,<span class="hljs-string">'è„¯æ°¨é…¸'</span>]
dot_data = tree.export_graphviz(clf, out_file = <span class="hljs-literal">None</span>, feature_names= feature_name, class_names=[<span class="hljs-string">"ç´é…’"</span>,<span class="hljs-string">"é›ªè‰"</span>,<span class="hljs-string">"è´å°”æ‘©å¾·"</span>], filled=<span class="hljs-literal">True</span>, rounded=<span class="hljs-literal">True</span>)
graph = graphviz.Source(dot_data)
graph
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d15822b692f4e93a0208ea0718c2d58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=ArBePPfg%2Fa%2FeW6NQ3x5s2lazNE0%3D" alt="sklearnå®ç°å†³ç­–æ ‘" loading="lazy"/>
ç»˜åˆ¶çš„å›¾ç‰‡å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a0fec3f96bf4c54a0c17a5393f0753e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=TtfY6gv7uQS86OUzlJL8d81SB5w%3D" alt="sklearnå®ç°å†³ç­–æ ‘ ç»˜åˆ¶" loading="lazy"/></p>
<p>export_graphviz ç”Ÿæˆäº†ä¸€ä¸ª DOT æ ¼å¼çš„å†³ç­–æ ‘ï¼š</p>
<ul>
<li>feature_namesï¼šæ¯ä¸ªå±æ€§çš„åå­—</li>
<li>class_namesï¼šæ¯ä¸ªå› å˜é‡ç±»åˆ«çš„åå­—</li>
<li>labelï¼šæ˜¯å¦æ˜¾ç¤ºä¸çº¯åº¦ä¿¡æ¯çš„æ ‡ç­¾ï¼Œé»˜è®¤ä¸º all è¡¨éƒ½æ˜¾ç¤ºï¼Œå¯ä»¥æ˜¯rootæˆ– none</li>
<li>filledï¼šæ˜¯å¦ç»™æ¯ä¸ªèŠ‚ç‚¹çš„ä¸»åˆ†ç±»ç»˜åˆ¶ä¸åŒçš„é¢œè‰²ï¼Œé»˜è®¤ä¸º False</li>
<li>out_fileï¼šè¾“å‡ºçš„ dot æ–‡ä»¶çš„åå­—ï¼Œé»˜è®¤ä¸º Noneè¡¨ç¤ºä¸è¾“å‡ºæ–‡ä»¶ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰åå­—å¦‚â€œtree.dotâ€</li>
<li>roundedï¼šé»˜è®¤ä¸º Trueï¼Œè¡¨ç¤ºå¯¹æ¯ä¸ªèŠ‚ç‚¹çš„è¾¹æ¡†åŠ åœ†è§’ï¼Œä½¿ç”¨ Helvetica å­—ä½“</li>
</ul>
<h2 data-id="heading-7">é˜²æ­¢è¿‡æ‹Ÿåˆ</h2>
<p>åœ¨ä¸åŠ é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œä¸€é¢—å†³ç­–æ ‘ä¼šæŒç»­ç”Ÿé•¿ç›´åˆ°æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼š</p>
<ol>
<li>æ‰€æœ‰å¶èŠ‚ç‚¹çš„åŸºå°¼ç³»æ•°ï¼ˆGini impurityï¼‰æˆ–ä¿¡æ¯ç†µï¼ˆinformation entropyï¼‰ç­‰ä¸çº¯åº¦æŒ‡æ ‡è¾¾åˆ°æœ€ä¼˜ï¼ˆé€šå¸¸ä¸º0ï¼‰</li>
<li>æ²¡æœ‰æ›´å¤šçš„ç‰¹å¾å¯ç”¨äºè¿›ä¸€æ­¥åˆ†å‰²æ•°æ®</li>
<li>æ¯ä¸ªå¶èŠ‚ç‚¹ä»…åŒ…å«å•ä¸€ç±»åˆ«çš„æ ·æœ¬</li>
</ol>
<p>è¿™ç§ä¸åŠ é™åˆ¶çš„ç”Ÿé•¿æ–¹å¼å¾€å¾€ä¼šå¯¼è‡´ä¸¥é‡çš„è¿‡æ‹Ÿåˆé—®é¢˜ã€‚å…·ä½“è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>åœ¨è®­ç»ƒé›†ä¸Šå¯èƒ½è¾¾åˆ°100%çš„å‡†ç¡®ç‡</li>
<li>ä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°æ˜¾è‘—ä¸‹é™ï¼ˆå¦‚å‡†ç¡®ç‡éª¤é™20-30ä¸ªç™¾åˆ†ç‚¹ï¼‰</li>
</ul>
<p>é€ æˆè¿™ç§ç°è±¡çš„æ ¹æœ¬åŸå› åœ¨äºï¼š</p>
<ol>
<li>æ ·æœ¬åå·®é—®é¢˜ï¼šæˆ‘ä»¬æ”¶é›†çš„è®­ç»ƒæ•°æ®ä¸å¯èƒ½å®Œå…¨ä»£è¡¨æ•´ä½“æ•°æ®åˆ†å¸ƒï¼Œæ€»ä¼šå­˜åœ¨æŠ½æ ·åå·®</li>
<li>å™ªå£°æ•æ„Ÿé—®é¢˜ï¼šå½“å†³ç­–æ ‘è¿‡åº¦ç”Ÿé•¿æ—¶ï¼š
<ul>
<li>ä¼šæ•æ‰åˆ°è®­ç»ƒæ•°æ®ä¸­çš„éšæœºå™ªå£°ï¼ˆå¦‚5%çš„é”™è¯¯æ ‡æ³¨æ ·æœ¬ï¼‰</li>
<li>ä¸ºè¿™äº›å™ªå£°åˆ›å»ºç‰¹å®šçš„åˆ†è£‚è§„åˆ™ï¼ˆä¾‹å¦‚"å½“ç‰¹å¾X=3.14159æ—¶é¢„æµ‹ç±»åˆ«A"ï¼‰</li>
<li>å¯¼è‡´æ¨¡å‹æ³›åŒ–èƒ½åŠ›ä¸‹é™</li>
</ul>
</li>
</ol>
<p>å…¸å‹ç¤ºä¾‹ï¼š
åœ¨æˆ¿ä»·é¢„æµ‹ä»»åŠ¡ä¸­ï¼Œä¸€æ£µè¿‡æ‹Ÿåˆçš„å†³ç­–æ ‘å¯èƒ½ä¼šï¼š</p>
<ul>
<li>ä¸ºè®­ç»ƒé›†ä¸­æŸä¸ªå¼‚å¸¸ä½ä»·æ ·æœ¬ï¼ˆå¦‚è¾“å…¥é”™è¯¯çš„$1å…ƒæˆ¿ä»·ï¼‰åˆ›å»ºç‰¹æ®Šåˆ†æ”¯</li>
<li>åœ¨å®é™…é¢„æµ‹æ—¶ï¼Œé‡åˆ°ç±»ä¼¼ç‰¹å¾ç»„åˆçš„æˆ¿å±‹å°±ä¼šé”™è¯¯é¢„æµ‹æä½ä»·æ ¼</li>
</ul>
<p>è§£å†³æ–¹æ³•é€šå¸¸åŒ…æ‹¬ï¼š</p>
<ol>
<li>é¢„å‰ªæï¼ˆPre-pruningï¼‰ï¼š
<ul>
<li>è®¾ç½®æœ€å¤§æ·±åº¦ï¼ˆå¦‚max_depth=5ï¼‰</li>
<li>è®¾ç½®å¶èŠ‚ç‚¹æœ€å°æ ·æœ¬æ•°ï¼ˆå¦‚min_samples_leaf=10ï¼‰</li>
</ul>
</li>
<li>åå‰ªæï¼ˆPost-pruningï¼‰ï¼š
<ul>
<li>ä½¿ç”¨ä»£ä»·å¤æ‚åº¦å‰ªæï¼ˆCCPï¼‰</li>
<li>åŸºäºéªŒè¯é›†æ€§èƒ½è¿›è¡Œå‰ªæ</li>
</ul>
</li>
<li>é›†æˆæ–¹æ³•ï¼š
<ul>
<li>éšæœºæ£®æ—ï¼ˆé€šè¿‡å¤šæ£µæ ‘æŠ•ç¥¨é™ä½è¿‡æ‹Ÿåˆé£é™©ï¼‰</li>
<li>æ¢¯åº¦æå‡æ ‘ï¼ˆé€šè¿‡è¿­ä»£ä¼˜åŒ–å‡å°‘å•æ£µæ ‘çš„å½±å“ï¼‰</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#æˆ‘ä»¬çš„æ ‘å¯¹è®­ç»ƒé›†çš„æ‹Ÿåˆç¨‹åº¦å¦‚ä½•?</span>
score_train = clf.score(Xtrain, Ytrain)
score_train
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ac58d4df39d49f8be14ef1785a1437f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=c%2BU0GuDSw9lqiYpvNdkMgP%2BRPcY%3D" alt="sklearnå®ç°å†³ç­–æ ‘ é˜²æ­¢è¿‡æ‹Ÿåˆ" loading="lazy"/>
ä¸ºäº†è®©å†³ç­–æ ‘æœ‰æ›´å¥½çš„æ³›åŒ–æ€§ï¼Œæˆ‘ä»¬è¦å¯¹å†³ç­–æ ‘è¿›è¡Œå‰ªæã€‚å‰ªæç­–ç•¥å¯¹å†³ç­–æ ‘çš„å½±å“å·¨å¤§ï¼Œæ­£ç¡®çš„å‰ªæç­–ç•¥æ˜¯ä¼˜åŒ–å†³ç­–æ ‘ç®—æ³•çš„æ ¸å¿ƒã€‚</p>
<h2 data-id="heading-8">random_state</h2>
<p>å¦‚æœæˆ‘ä»¬æ”¹åŠ¨äº† random_stateï¼Œç”»å‡ºæ¥çš„æ¯ä¸€é¢—æ ‘éƒ½ä¸ä¸€æ ·ï¼Œå®ƒä¸ºä»€ä¹ˆä¸ç¨³å®šå‘¢ï¼Ÿå¦‚æœä½¿ç”¨å…¶ä»–æ•°æ®é›†ï¼Œå®ƒè¿˜ä¼šä¸ç¨³å®šå—ï¼Ÿ
æˆ‘ä»¬ä¹‹å‰æè¿‡ï¼Œæ— è®ºå†³ç­–æ ‘æ¨¡å‹å¦‚ä½•è¿›åŒ–ï¼Œåœ¨åˆ†æ”¯ä¸Šçš„æœ¬è´¨éƒ½è¿˜æ˜¯è¿½æ±‚æŸä¸ªä¸çº¯åº¦ç›¸å…³çš„æŒ‡æ ‡çš„ä¼˜åŒ–ï¼Œè€Œæ­£å¦‚æˆ‘ä»¬æåˆ°çš„ï¼Œä¸çº¯åº¦æ˜¯åŸºäºèŠ‚ç‚¹è®¡ç®—å‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå†³ç­–æ ‘åœ¨å»ºæ ‘æ—¶ï¼Œæ˜¯é ä¼˜åŒ–èŠ‚ç‚¹æ¥è¿½æ±‚ä¸€æ£µä¼˜åŒ–çš„æ ‘ï¼Œä½†æ˜¯æœ€ä¼˜çš„èŠ‚ç‚¹æ˜¯èƒ½å¤Ÿä¿è¯æœ€ä¼˜çš„æ ‘å—ï¼Ÿ</p>
<p>é›†æˆç®—æ³•è¢«ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šsklearn è¡¨ç¤ºï¼Œæ—¢ç„¶ä¸€æ£µæ ‘ä¸èƒ½ä¿è¯æœ€ä¼˜ï¼Œé‚£å°±å»ºæ›´å¤šä¸åŒçš„æ ‘ï¼Œç„¶åä»ä¸­å–æœ€å¥½çš„ã€‚æ€ä¹ˆæ ·ä»ä¸€ç»„æ•°æ®é›†ä¸­å»ºä¸åŒçš„æ ‘å‘¢ï¼Ÿåœ¨æ¯æ¬¡åˆ†æ”¯çš„æ—¶å€™ï¼Œä¸ä½¿ç”¨å…¨éƒ¨ç‰¹å¾ï¼Œè€Œæ˜¯éšæœºé€‰å–ä¸€éƒ¨åˆ†ç‰¹å¾ï¼Œä»ä¸­é€‰å–ä¸çº¯åº¦ç›¸å…³æŒ‡æ ‡æœ€ä¼˜çš„ä½œä¸ºåˆ†æ”¯ç”¨çš„èŠ‚ç‚¹ã€‚
è¿™æ ·ï¼Œæ¯æ¬¡ç”Ÿæˆçš„æ ‘å¶ä¸åŒäº†ã€‚</p>
<p>random_state ç”¨æ¥è®¾ç½®åˆ†æ”¯ä¸­çš„éšæœºæ¨¡å‹çš„å‚æ•°ï¼Œé»˜è®¤æ˜¯ Noneï¼Œåœ¨é«˜ç»´åº¦æ—¶éšæœºæ€§ä¼šè¡¨ç°æ›´æ˜æ˜¾ï¼Œä½ç»´åº¦çš„æ•°æ®éšæœºæ€§å‡ ä¹ä¸ä¼šæ˜¾ç°ã€‚è¾“å…¥ä»»æ„æ•´æ•°ï¼Œä¼šä¸€ç›´é•¿å‡ºåŒä¸€æ£µæ ‘ï¼Œè®©æ¨¡å‹ç¨³å®šä¸‹æ¥ã€‚</p>
<h2 data-id="heading-9">splitter</h2>
<p>splitter ä¹Ÿæ˜¯ç”¨æ¥æ§åˆ¶å†³ç­–æ ‘ä¸­éšæœºé€‰é¡¹çš„ï¼Œæœ‰ä¸¤ç§è¾“å…¥å€¼ï¼š</p>
<ul>
<li>è¾“å…¥ bestï¼Œå†³ç­–æ ‘åœ¨åˆ†æ”¯æ—¶è™½ç„¶éšæœºï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šä¼˜å…ˆé€‰æ‹©æ›´é‡è¦çš„ç‰¹å¾è¿›è¡Œåˆ†æ”¯ï¼ˆé‡è¦æ€§å¯ä»¥é€šè¿‡å±æ€§ feature_importance æŸ¥çœ‹ï¼‰</li>
<li>è¾“å…¥ randomï¼Œå†³ç­–æ ‘åœ¨åˆ†æ”¯æ—¶ä¼šæ›´åŠ éšæœºï¼Œæ ‘ä¼šå› ä¸ºå«æœ‰æ›´å¤šçš„ä¸å¿…è¦çš„ä¿¡æ¯è€Œæ›´æ·±æ›´å¤§ï¼Œå¹¶å› ä¸ºè¿™äº›ä¸å¿…è¦ä¿¡æ¯è€Œé™ä½å¯¹è®­ç»ƒé›†çš„æ‹Ÿåˆã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§é˜²æ­¢è¿‡æ‹Ÿåˆçš„æ–¹å¼ã€‚</li>
</ul>
<p>å½“ä½ é¢„æµ‹åˆ°ä½ çš„æ¨¡å‹ä¼šè¿‡æ‹Ÿåˆï¼Œç”¨è¿™ä¸¤ä¸ªå‚æ•°æ¥å¸®åŠ©ä½ é™ä½æ ‘å»ºæˆä¹‹åçš„è¿‡æ‹Ÿåˆçš„å¯èƒ½æ€§ï¼Œå½“ç„¶ï¼Œæ ‘ä¸€æ—¦å»ºæˆï¼Œæˆ‘ä»¬ä¾ç„¶æ˜¯ä½¿ç”¨å‰ªæå‚æ•°æ¥é˜²æ­¢æ‹Ÿåˆçš„ã€‚</p>
<pre><code class="hljs language-python" lang="python">clf = tree.DecisionTreeClassifier(criterion=<span class="hljs-string">"entropy"</span>,random_state=<span class="hljs-number">30</span>,splitter=<span class="hljs-string">"random"</span>)
clf = clf.fit(Xtrain, Ytrain)
score = clf.score(Xtest, ytest)
<span class="hljs-built_in">print</span>(score)
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>]=[<span class="hljs-string">'Simhei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>]=<span class="hljs-literal">False</span>
</code></pre>
<p>ä»£ç çš„æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31afe0d1e2194e20ae71bd34bee833d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768095995&amp;x-signature=rBzxInKP0xM75G1VUXKTds8dEA0%3D" alt="sklearnå®ç°å†³ç­–æ ‘ å†³ç­–æ ‘åˆ†æ”¯" loading="lazy"/></p>
<h2 data-id="heading-10">ç‰ˆæœ¬çŸ©é˜µ</h2>


















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>ModuleNotFoundError: No module named 'graphviz'</td><td>æœªå®‰è£… python-graphviz åŒ…</td><td><code>python -c "import graphviz"</code><br/><code>pip install graphviz</code></td></tr><tr><td>ExecutableNotFound: failed to execute 'dot' / æ¸²æŸ“ä¸ºç©º</td><td>åªè£…äº† python åŒ…ï¼Œæœªè£…ç³»ç»Ÿ Graphviz æˆ– PATH æœªé…</td><td><code>dot -V</code> æ˜¯å¦å¯ç”¨<br/>å®‰è£…ç³»ç»Ÿ Graphvizï¼Œå¹¶æŠŠ dot æ‰€åœ¨ç›®å½•åŠ å…¥ PATH</td></tr><tr><td>ValueError: Length of feature_names ...</td><td>feature_names æ•°é‡ä¸ X ç‰¹å¾åˆ—ä¸ä¸€è‡´</td><td>å¯¹æ¯” Xtrain.shape[1] ä¸ len(feature_name)<br/>ç»Ÿä¸€ç‰¹å¾æ•°ï¼›Wine ä¸º 13 ç»´æ—¶ feature_names ä¹Ÿåº”ä¸º 13</td></tr><tr><td>å›¾é‡Œç±»åˆ«å/è®¡æ•°é¡ºåºä¸å¯¹</td><td>class_names é¡ºåºä¸å†…éƒ¨ç±»åˆ«ç¼–ç ä¸ä¸€è‡´</td><td>æŸ¥çœ‹ tree å›¾é¦–èŠ‚ç‚¹ value=[...] é¡ºåº<br/>class_names æŒ‰ç±»åˆ«ç¼–ç å‡åºä¼ å…¥ï¼ˆå¦‚ 0/1/2 å¯¹åº”çš„åç§°é¡ºåºï¼‰</td></tr><tr><td>NameError: name 'Ytrain' is not defined</td><td>å˜é‡åå¤§å°å†™ä¸ä¸€è‡´/æ‹·è´æ—¶æ¼æ®µ</td><td>æœç´¢ Ytrain/ytrain<br/>ç»Ÿä¸€å‘½åï¼ˆè®­ç»ƒ/æµ‹è¯•æ ‡ç­¾ç”¨åŒä¸€é£æ ¼ï¼‰</td></tr><tr><td>SyntaxError å‡ºç°åœ¨ %matplotlib inline</td><td>è¯¥è¯­æ³•ä»…é€‚ç”¨äº Jupyter</td><td>è¿è¡Œç¯å¢ƒæ˜¯ .py / IDE è„šæœ¬<br/>è„šæœ¬ç¯å¢ƒç§»é™¤è¯¥é­”æ³•å‘½ä»¤</td></tr><tr><td>è®­ç»ƒé›† 1.0ã€æµ‹è¯•é›†æ˜æ˜¾ä¸‹é™</td><td>æ ‘æ— çº¦æŸç”Ÿé•¿å¯¼è‡´è¿‡æ‹Ÿåˆ</td><td>å¯¹æ¯” clf.score(Xtrain, Ytrain) vs clf.score(Xtest, ytest)<br/>åŠ  max_depth/min_samples_leaf/min_samples_splitï¼Œæˆ–ç”¨ ccp_alpha åšåå‰ªæ</td></tr><tr><td>InvalidParameterError: The 'criterion' parameter ...</td><td>sklearn ç‰ˆæœ¬å·®å¼‚æˆ–å‚æ•°æ‹¼å†™</td><td>sklearn.<strong>version</strong>ï¼›æ£€æŸ¥ criterion å€¼<br/>ç”¨å®˜æ–¹æ”¯æŒå€¼ï¼›æ–°ç‰ˆæœ¬æ”¯æŒ gini/entropy/log_loss</td></tr></tbody></table>
<h2 data-id="heading-11">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-12">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-13">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-14">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[useEffectè¯¦è§£]]></title>    <link>https://juejin.cn/post/7590303618429173795</link>    <guid>https://juejin.cn/post/7590303618429173795</guid>    <pubDate>2026-01-03T12:42:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590303618429173795" data-draft-id="7590433626560151587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="useEffectè¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-03T12:42:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†™ä»£ç çš„çš®ç­è‰‡"/> <meta itemprop="url" content="https://juejin.cn/user/4196178024218520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            useEffectè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4196178024218520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†™ä»£ç çš„çš®ç­è‰‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T12:42:55.000Z" title="Sat Jan 03 2026 12:42:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">React ä¸­ useEffect è¯¦è§£</h3>
<p><code>useEffect</code>Â æ˜¯ React Hooks ä¸­ç”¨äºå¤„ç†<strong>å‰¯ä½œç”¨</strong>çš„æ ¸å¿ƒ Hookï¼Œå®ƒæ›¿ä»£äº†ç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆ<code>componentDidMount</code>ã€<code>componentDidUpdate</code>ã€<code>componentWillUnmount</code>ï¼‰ï¼Œè®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿæ‰§è¡Œå¼‚æ­¥æ“ä½œã€ä¿®æ”¹ DOMã€è®¢é˜…äº‹ä»¶ã€æ¸…ç†èµ„æºç­‰å‰¯ä½œç”¨é€»è¾‘ã€‚è€Œä¸”ç°åœ¨å‡½æ•°ç»„ä»¶æ‰æ˜¯ä¸»æµï¼Œç±»ç»„ä»¶å¤šæ˜¯ä¸€äº›è€é¡¹ç›®</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šä»€ä¹ˆæ˜¯ â€œå‰¯ä½œç”¨â€ï¼Ÿ</h3>
<p>å‰¯ä½œç”¨ï¼ˆSide Effectï¼‰æ˜¯æŒ‡å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé™¤äº†è¿”å›å€¼ä¹‹å¤–å¯¹å¤–éƒ¨ç¯å¢ƒäº§ç”Ÿçš„å½±å“ï¼Œå¸¸è§åœºæ™¯ï¼š</p>
<ul>
<li>æ•°æ®è¯·æ±‚ï¼ˆAJAX/fetchï¼‰</li>
<li>DOM æ“ä½œï¼ˆä¿®æ”¹æ ·å¼ã€æ·»åŠ äº‹ä»¶ç›‘å¬ï¼‰</li>
<li>è®¢é˜… / å–æ¶ˆè®¢é˜…ï¼ˆå¦‚ WebSocketã€å®šæ—¶å™¨ï¼‰</li>
<li>æœ¬åœ°å­˜å‚¨ï¼ˆlocalStorage/sessionStorageï¼‰</li>
<li>æ‰‹åŠ¨ä¿®æ”¹ stateï¼ˆéœ€è°¨æ…ï¼‰</li>
</ul>
<h3 data-id="heading-2">äºŒã€åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åŸºç¡€ç”¨æ³•</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å‰¯ä½œç”¨é€»è¾‘ï¼ˆæ‰§è¡Œæ—¶æœºï¼šç»„ä»¶æŒ‚è½½/æ›´æ–°åï¼‰</span>
    
    <span class="hljs-comment">// å¯é€‰ï¼šæ¸…ç†å‡½æ•°ï¼ˆæ‰§è¡Œæ—¶æœºï¼šç»„ä»¶å¸è½½/ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ¸…ç†é€»è¾‘ï¼ˆå¦‚å–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ï¼‰</span>
    };
  }, [ä¾èµ–é¡¹æ•°ç»„]); <span class="hljs-comment">// å…³é”®ï¼šä¾èµ–é¡¹å†³å®šå‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœº</span>
}
</code></pre>
<h4 data-id="heading-3">è¯­æ³•æ‹†è§£ï¼š</h4>
<ol>
<li>
<p><strong>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå¿…é€‰ï¼‰</strong> ï¼šå‰¯ä½œç”¨å‡½æ•°</p>
<ul>
<li>å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰§è¡Œæ ¸å¿ƒçš„å‰¯ä½œç”¨é€»è¾‘ï¼›</li>
<li>å¯é€‰è¿”å›ä¸€ä¸ª<strong>æ¸…ç†å‡½æ•°</strong>ï¼ˆCleanup Functionï¼‰ï¼Œç”¨äºæ¸…é™¤å‰¯ä½œç”¨ï¼ˆå¦‚å–æ¶ˆå®šæ—¶å™¨ã€è§£ç»‘äº‹ä»¶ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰</strong> ï¼šä¾èµ–é¡¹æ•°ç»„</p>
<ul>
<li>æ§åˆ¶å‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœºï¼›</li>
<li>è‹¥çœç•¥ï¼šç»„ä»¶<strong>æ¯æ¬¡æ¸²æŸ“å</strong>éƒ½ä¼šæ‰§è¡Œå‰¯ä½œç”¨ï¼›</li>
<li>è‹¥ä¸ºç©ºæ•°ç»„Â <code>[]</code>ï¼šä»…åœ¨ç»„ä»¶<strong>æŒ‚è½½ï¼ˆmountï¼‰</strong> Â æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ¸…ç†å‡½æ•°åœ¨ç»„ä»¶<strong>å¸è½½ï¼ˆunmountï¼‰</strong> Â æ—¶æ‰§è¡Œï¼›</li>
<li>è‹¥åŒ…å«ä¾èµ–é¡¹ï¼ˆå¦‚Â <code>[count, data]</code>ï¼‰ï¼šä»…åœ¨ä¾èµ–é¡¹çš„å€¼<strong>å‘ç”Ÿå˜åŒ–</strong>æ—¶æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆæŒ‚è½½æ—¶æ‰§è¡Œç¬¬ä¸€æ¬¡ï¼Œåç»­ä»…ä¾èµ–é¡¹å˜åŒ–è§¦å‘ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-4">ä¸‰ã€æ‰§è¡Œæ—¶æœº</h3>
<p><code>useEffect</code>Â çš„æ‰§è¡Œæ—¶æœºæ˜¯<strong>ç»„ä»¶æ¸²æŸ“å®Œæˆå</strong>ï¼ˆæµè§ˆå™¨ç»˜åˆ¶ DOM ä¹‹åï¼‰ï¼Œå±äºå¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡æµè§ˆå™¨çš„æ¸²æŸ“ï¼Œè¿™ä¸€ç‚¹ä¸ç±»ç»„ä»¶çš„Â <code>componentDidMount</code>/<code>componentDidUpdate</code>Â ä¸€è‡´ã€‚</p>
<h4 data-id="heading-5">ä¸åŒä¾èµ–é¡¹çš„æ‰§è¡Œè¡Œä¸ºå¯¹æ¯”ï¼š</h4>






























<table><thead><tr><th>ä¾èµ–é¡¹å†™æ³•</th><th>æ‰§è¡Œæ—¶æœº</th><th>å¯¹åº”ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td>æ— ä¾èµ–é¡¹</td><td>æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åï¼ˆæŒ‚è½½ + æ¯æ¬¡æ›´æ–°ï¼‰</td><td>componentDidMount + componentDidUpdate</td></tr><tr><td>ç©ºæ•°ç»„Â <code>[]</code></td><td>ä»…æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</td><td>componentDidMount</td></tr><tr><td>å«ä¾èµ–é¡¹Â <code>[a, b]</code></td><td>æŒ‚è½½æ—¶æ‰§è¡Œ + ä¾èµ–é¡¹ a/b å˜åŒ–æ—¶æ‰§è¡Œ</td><td>è‡ªå®šä¹‰ componentDidUpdate</td></tr><tr><td>æ¸…ç†å‡½æ•°</td><td>å¸è½½æ—¶æ‰§è¡Œ + ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰æ‰§è¡Œ</td><td>componentWillUnmount</td></tr></tbody></table>
<h3 data-id="heading-6">å››ã€å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-7">åœºæ™¯ 1ï¼šä»…æŒ‚è½½æ—¶æ‰§è¡Œï¼ˆåˆå§‹åŒ–ï¼‰</h4>
<p>æ¯”å¦‚è¯·æ±‚åˆå§‹æ•°æ®ã€æ·»åŠ å…¨å±€äº‹ä»¶ç›‘å¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import { useEffect, useState } from 'react'<span class="hljs-comment">;</span>

function UserList() {
  const <span class="hljs-section">[users, setUsers]</span> = useState(<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  // ä»…æŒ‚è½½æ—¶è¯·æ±‚æ•°æ®ï¼ˆå¯¹åº” componentDidMountï¼‰
  useEffect(() =&gt; {
    const <span class="hljs-attr">fetchUsers</span> = async () =&gt; {
      const <span class="hljs-attr">res</span> = await fetch(<span class="hljs-string">'https://api.example.com/users'</span>)<span class="hljs-comment">;</span>
      const <span class="hljs-attr">data</span> = await res.json()<span class="hljs-comment">;</span>
      setUsers(data)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
    fetchUsers()<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">; // ç©ºä¾èµ–ï¼šä»…æ‰§è¡Œä¸€æ¬¡</span>

  return (
    &lt;ul&gt;
      {users.map(<span class="hljs-attr">user</span> =&gt; (
        &lt;li <span class="hljs-attr">key</span>={user.id}&gt;{user.name}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-8">åœºæ™¯ 2ï¼šä¾èµ–é¡¹å˜åŒ–æ—¶æ‰§è¡Œ</h4>
<p>æ¯”å¦‚æ ¹æ®è¾“å…¥å…³é”®è¯ç­›é€‰æ•°æ®ã€ç›‘å¬çŠ¶æ€å˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Search</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [keyword, setKeyword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [result, setResult] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-comment">// å…³é”®è¯å˜åŒ–æ—¶è¯·æ±‚æ•°æ®</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!keyword) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ— å…³é”®è¯æ—¶ä¸è¯·æ±‚</span>

    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/search?kw=<span class="hljs-subst">${keyword}</span>`</span>);
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
      <span class="hljs-title function_">setResult</span>(data);
    }, <span class="hljs-number">300</span>); <span class="hljs-comment">// é˜²æŠ–ï¼š300ms åè¯·æ±‚</span>

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šå–æ¶ˆå®šæ—¶å™¨ï¼ˆå…³é”®è¯å¿«é€Ÿå˜åŒ–æ—¶é¿å…æ— æ•ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer);
  }, [keyword]); <span class="hljs-comment">// ä¾èµ–ï¼šä»… keyword å˜åŒ–æ—¶æ‰§è¡Œ</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{keyword}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setKeyword(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{result.map(item =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-9">åœºæ™¯ 3ï¼šæ¸…ç†å‰¯ä½œç”¨ï¼ˆå¸è½½æ—¶ï¼‰</h4>
<p>æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨ã€å–æ¶ˆ WebSocket è®¢é˜…ã€è§£ç»‘äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Timer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æŒ‚è½½æ—¶å¯åŠ¨å®šæ—¶å™¨</span>
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šå¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
  }, []); <span class="hljs-comment">// ä»…æŒ‚è½½æ—¶æ‰§è¡Œ</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶æ§åˆ¶ Timer çš„æŒ‚è½½/å¸è½½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [show, setShow] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setShow(!show)}&gt;Toggle Timer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {show &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Timer</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-10">äº”ã€å…³é”®æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-11">1. ä¾èµ–é¡¹å¿…é¡»å®Œæ•´</h4>
<p>React ä¼šæ ¹æ®ä¾èµ–é¡¹æ•°ç»„çš„<strong>æµ…æ¯”è¾ƒ</strong>åˆ¤æ–­æ˜¯å¦æ‰§è¡Œå‰¯ä½œç”¨ï¼Œè‹¥ä¾èµ–é¡¹ç¼ºå¤±ï¼š</p>
<ul>
<li>å‰¯ä½œç”¨å¯èƒ½æ— æ³•è§¦å‘ï¼ˆä¾èµ–é¡¹å˜åŒ–ä½†æœªå£°æ˜ï¼‰ï¼›</li>
<li>æˆ–æ•è·åˆ°è¿‡æ—¶çš„ state/propï¼ˆé—­åŒ…é™·é˜±ï¼‰ã€‚</li>
</ul>
<p><strong>åä¾‹ï¼ˆé”™è¯¯ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">BadExample</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-comment">// ä¾èµ– countï¼Œä½†æœªå£°æ˜åœ¨æ•°ç»„ä¸­</span>
    const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
      console<span class="hljs-selector-class">.log</span>(count); <span class="hljs-comment">// å§‹ç»ˆæ‰“å° 0ï¼ˆé—­åŒ…æ•è·åˆå§‹å€¼ï¼‰</span>
    }, <span class="hljs-number">1000</span>);
    return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
  }, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// é”™è¯¯ï¼šç¼ºå¤± count ä¾èµ–</span>

  return &lt;<span class="hljs-selector-tag">button</span> onClick={() =&gt; <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>)}&gt;Click&lt;/<span class="hljs-selector-tag">button</span>&gt;;
}
</code></pre>
<p><strong>æ­£ä¾‹ï¼ˆæ­£ç¡®ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">GoodExample</span>() {
  const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
      console<span class="hljs-selector-class">.log</span>(count); <span class="hljs-comment">// æ­£ç¡®æ‰“å°æœ€æ–° count</span>
    }, <span class="hljs-number">1000</span>);
    return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
  }, <span class="hljs-selector-attr">[count]</span>); <span class="hljs-comment">// å£°æ˜ä¾èµ– count</span>

  return &lt;<span class="hljs-selector-tag">button</span> onClick={() =&gt; <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>)}&gt;Click&lt;/<span class="hljs-selector-tag">button</span>&gt;;
}
</code></pre>
<h4 data-id="heading-12">2. å‰¯ä½œç”¨å‡½æ•°ä¸èƒ½æ˜¯ async å‡½æ•°</h4>
<p><code>useEffect</code>Â çš„ç¬¬ä¸€ä¸ªå‚æ•°è‹¥è¿”å›æ¸…ç†å‡½æ•°ï¼Œåˆ™ä¸èƒ½ç›´æ¥ç”¨Â <code>async</code>ï¼ˆå› ä¸ºÂ <code>async</code>Â å‡½æ•°è¿”å› Promiseï¼Œè€Œéæ¸…ç†å‡½æ•°ï¼‰ã€‚</p>
<p><strong>åä¾‹ï¼ˆé”™è¯¯ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(async () =&gt; {
  const res = await <span class="hljs-built_in">fetch</span>('/api/data');
  <span class="hljs-comment">// ...</span>
}, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// é”™è¯¯ï¼šasync å‡½æ•°è¿”å› Promiseï¼Œæ— æ³•è¿”å›æ¸…ç†å‡½æ•°</span>
</code></pre>
<p><strong>æ­£ä¾‹ï¼ˆæ­£ç¡®ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">useEffect(() =&gt; {
  // å†…éƒ¨å®šä¹‰ async å‡½æ•°
  const <span class="hljs-attr">fetchData</span> = async () =&gt; {
    const <span class="hljs-attr">res</span> = await fetch(<span class="hljs-string">'/api/data'</span>)<span class="hljs-comment">;</span>
    // ...
  }<span class="hljs-comment">;</span>
  fetchData()<span class="hljs-comment">;</span>
}, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-13">3. é¿å…æ— é™å¾ªç¯</h4>
<p>è‹¥å‰¯ä½œç”¨ä¸­ä¿®æ”¹äº†ä¾èµ–é¡¹ï¼Œä¸”ä¾èµ–é¡¹æœªæ­£ç¡®æ§åˆ¶ï¼Œä¼šå¯¼è‡´æ— é™æ‰§è¡Œï¼š</p>
<p><strong>åä¾‹ï¼ˆé”™è¯¯ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">LoopExample</span>() {
  const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>({});

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-comment">// æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œä¾èµ–é¡¹æµ…æ¯”è¾ƒä¸º falseï¼Œè§¦å‘æ— é™æ‰§è¡Œ</span>
    <span class="hljs-built_in">setData</span>({ name: 'test' });
  }, <span class="hljs-selector-attr">[data]</span>); <span class="hljs-comment">// ä¾èµ– dataï¼Œä½†ä¿®æ”¹äº† data</span>

  return &lt;<span class="hljs-selector-tag">div</span>&gt;{data<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;;
}
</code></pre>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>é¿å…ä¿®æ”¹ä¾èµ–é¡¹ï¼Œæˆ–è°ƒæ•´ä¾èµ–é¡¹ï¼ˆå¦‚ä»…ä¾èµ–å¿…è¦å­—æ®µï¼‰ï¼›</li>
<li>è‹¥å¿…é¡»ä¿®æ”¹ï¼Œå¯ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆ<code>setData(prev =&gt; ({ ...prev, name: 'test' }))</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">4. æ¸…ç†å‡½æ•°çš„æ‰§è¡Œæ—¶æœº</h4>
<p>æ¸…ç†å‡½æ•°ä¸ä»…åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼Œè¿˜ä¼šåœ¨<strong>ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰</strong>æ‰§è¡Œï¼ˆæ¯”å¦‚ä¾èµ–é¡¹å˜åŒ–æ—¶ï¼‰ï¼Œç”¨äºæ¸…é™¤ä¸Šä¸€æ¬¡çš„å‰¯ä½œç”¨æ®‹ç•™ã€‚</p>
<h3 data-id="heading-15">å…­ã€ä¸ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å¯¹æ¯”</h3>

























<table><thead><tr><th>ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</th><th>useEffect å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>componentDidMount</td><td><code>useEffect(() =&gt; { ... }, [])</code></td></tr><tr><td>componentDidUpdate</td><td><code>useEffect(() =&gt; { ... }, [dep1, dep2])</code></td></tr><tr><td>componentWillUnmount</td><td><code>useEffect(() =&gt; { return () =&gt; { ... } }, [])</code></td></tr><tr><td>åˆå¹¶ä¸‰è€…</td><td><code>useEffect(() =&gt; { ... })</code>ï¼ˆæ— ä¾èµ–é¡¹ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p><code>useEffect</code>Â çš„æ ¸å¿ƒæ˜¯<strong>å£°æ˜å¼</strong>åœ°å¤„ç†å‰¯ä½œç”¨ï¼š</p>
<ol>
<li>é€šè¿‡ä¾èµ–é¡¹æ•°ç»„æ§åˆ¶æ‰§è¡Œæ—¶æœºï¼Œæ›¿ä»£ç±»ç»„ä»¶çš„å¤šä¸ªç”Ÿå‘½å‘¨æœŸï¼›</li>
<li>æ¸…ç†å‡½æ•°ç”¨äºæ¶ˆé™¤å‰¯ä½œç”¨çš„å‰¯ä½œç”¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰ï¼›</li>
<li>ä¾èµ–é¡¹å¿…é¡»å®Œæ•´ä¸”å‡†ç¡®ï¼Œé¿å…é—­åŒ…é™·é˜±å’Œæ— é™å¾ªç¯ï¼›</li>
<li>å¼‚æ­¥é€»è¾‘éœ€åœ¨å‰¯ä½œç”¨å‡½æ•°å†…éƒ¨å®šä¹‰Â <code>async</code>Â å‡½æ•°ï¼Œè€Œéç›´æ¥è¿”å› Promiseã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒé€ npmã€pnpmã€npxï¼šåŒºåˆ«ä¸å®æˆ˜ç”¨æ³•å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7590421489998168083</link>    <guid>https://juejin.cn/post/7590421489998168083</guid>    <pubDate>2026-01-03T13:03:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590421489998168083" data-draft-id="7590159073988804660" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒé€ npmã€pnpmã€npxï¼šåŒºåˆ«ä¸å®æˆ˜ç”¨æ³•å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-03T13:03:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Maxkim"/> <meta itemprop="url" content="https://juejin.cn/user/2768993424260451"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒé€ npmã€pnpmã€npxï¼šåŒºåˆ«ä¸å®æˆ˜ç”¨æ³•å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2768993424260451/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Maxkim
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:03:10.000Z" title="Sat Jan 03 2026 13:03:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>helloï¼Œå¤§å®¶æ–°å¹´å¿«ä¹å‘€ï¼Œæœ€è¿‘åœ¨å­¦ä¹ Vueæºç æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨Monorepoè¿›è¡ŒåŒ…ç®¡ç†ï¼Œç»“æœè¿ç”¨åˆ°äº†â€œnpx tsx --initâ€è¿™ä¸ªå‘½ä»¤ï¼Œäºæ˜¯æˆ‘å°±å¼€å§‹ç–‘æƒ‘ä¸ºä»€ä¹ˆæœ‰çš„å‘½ä»¤ç”¨Â <code>npm i</code>ï¼Œæœ‰çš„ç”¨Â <code>pnpm add</code>ï¼Œè¿˜æœ‰çš„è¦åŠ Â <code>npx</code>Â å‰ç¼€ï¼Ÿäºæ˜¯ä¾¿è‡ªå·±æ€»ç»“äº†å¦‚ä¸‹çš„å†…å®¹ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å…ˆç«‹æ ¸å¿ƒè®¤çŸ¥ï¼šä¸‰è€…ä¸æ˜¯åŒä¸€ç±»å·¥å…·</h2>
<p>å¾ˆå¤šäººä¼šæŠŠä¸‰è€…æ··ä¸ºä¸€è°ˆï¼Œå…¶å®å®ƒä»¬çš„å®šä½å¤©å·®åœ°åˆ«ï¼å…ˆçœ‹ä¸€å¼ è¡¨å¿«é€Ÿ get æ ¸å¿ƒåŒºåˆ«ï¼š</p>





























<table><thead><tr><th>å·¥å…·å</th><th>æ ¸å¿ƒå®šä½</th><th>æœ¬è´¨ / æ‰€å±å…³ç³»</th><th>æ ¸å¿ƒèŒè´£</th></tr></thead><tbody><tr><td><code>npm</code></td><td>Node.js å®˜æ–¹é»˜è®¤åŒ…ç®¡ç†å™¨</td><td>éš Node.js ä¸€åŒå®‰è£…ï¼Œå®˜æ–¹æ ‡é…</td><td>ç®¡ç†é¡¹ç›®ä¾èµ–ï¼ˆå®‰è£… / å¸è½½ / æ›´æ–° / å‘å¸ƒï¼‰</td></tr><tr><td><code>pnpm</code></td><td>é«˜æ€§èƒ½ç¬¬ä¸‰æ–¹æ›¿ä»£åŒ…ç®¡ç†å™¨</td><td>ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œéœ€æ‰‹åŠ¨å®‰è£…</td><td>åŒÂ <code>npm</code>Â æ ¸å¿ƒèŒè´£ï¼Œä¼˜åŒ–æ€§èƒ½ä¸ç£ç›˜å ç”¨</td></tr><tr><td><code>npx</code></td><td>Node åŒ…æ‰§è¡Œå·¥å…·</td><td>éšÂ <code>npm@5.2.0+</code>Â è‡ªå¸¦ï¼ŒéåŒ…ç®¡ç†å™¨</td><td>æ‰§è¡Œ Node åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸ç®¡ç†ä¾èµ–</td></tr></tbody></table>
<p>åˆ’é‡ç‚¹ï¼š<strong><code>npm</code>Â å’ŒÂ <code>pnpm</code>Â æ˜¯ã€ŒåŒ…ç®¡ç†å™¨ã€ï¼Œè´Ÿè´£ â€œå­˜æ”¾å’Œç®¡ç†ä¾èµ–â€ï¼›<code>npx</code>Â æ˜¯ã€Œæ‰§è¡Œå·¥å…·ã€ï¼Œè´Ÿè´£ â€œè¿è¡Œä¾èµ–åŒ…â€ï¼Œä¸‰è€…ä¸æ˜¯åŒä¸€ç»´åº¦çš„å·¥å…·ï¼</strong></p>
<h2 data-id="heading-1">äºŒã€é€ä¸ªæ‹†è§£ï¼šåŠŸèƒ½è¯¦è§£ + ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">1. npmï¼šå®˜æ–¹é»˜è®¤ï¼Œç¨³å­—å½“å¤´</h3>
<p><code>npm</code>ï¼ˆNode Package Managerï¼‰æ˜¯å‰ç«¯å¼€å‘è€…çš„å…¥é—¨æ ‡é…ï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å¸®æˆ‘ä»¬ç®¡ç†é¡¹ç›®çš„ä¾èµ–åŒ…ï¼Œæ˜¯ç”Ÿæ€æœ€æˆç†Ÿã€å…¼å®¹æ€§æœ€å¥½çš„åŒ…ç®¡ç†å™¨ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼‰</h4>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c010baccff48848f77f0df48865660~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050191&amp;x-signature=TkbcibVbk5%2Faq%2BC5dVT3u5CQC8M%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä¼˜ç‚¹ &amp; ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ‹‰æ»¡ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œå‡ ä¹æ”¯æŒæ‰€æœ‰ Node é¡¹ç›®ï¼Œæ–°æ‰‹å‹å¥½ã€‚</li>
<li>ç¼ºç‚¹ï¼šå®‰è£…é€Ÿåº¦æ…¢ï¼Œç£ç›˜å ç”¨é«˜ï¼ˆåµŒå¥—Â <code>node_modules</code>ï¼Œä¾èµ–é‡å¤æ‹·è´ï¼‰ï¼Œéƒ¨åˆ†åœºæ™¯ä¼šå‡ºç°ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜ï¼Œè¿˜å¯èƒ½äº§ç”Ÿå¹½çµä¾èµ–ã€‚</li>
</ul>
<h3 data-id="heading-5">2. pnpmï¼šæ€§èƒ½æ€ªå…½ï¼Œçœç©ºé—´ç¥å™¨</h3>
<p><code>pnpm</code>ï¼ˆPerformant npmï¼‰æ˜¯é’ˆå¯¹Â <code>npm</code>Â ç—›ç‚¹ä¼˜åŒ–çš„ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å™¨ï¼Œæ ¸å¿ƒåŠŸèƒ½å’ŒÂ <code>npm</code>Â ä¸€è‡´ï¼Œä½†åœ¨ã€Œé€Ÿåº¦ã€å’Œã€Œç£ç›˜å ç”¨ã€ä¸Šå®ç°äº†ç¢¾å‹çº§æå‡ã€‚è€Œè¿™ä¸€åˆ‡çš„ä¼˜åŠ¿ï¼Œéƒ½æºäºå®ƒçš„ã€Œå…¨å±€ç¼“å­˜ + ç¡¬é“¾æ¥ + è½¯é“¾æ¥ã€æœºåˆ¶ï¼ŒåŒæ—¶å®ƒè¿˜èƒ½æœç»å¹½çµä¾èµ–ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒä¼˜åŠ¿ï¼ˆåŒºåˆ«äº npm çš„å…³é”®ï¼‰</h4>
<ol>
<li><strong>å®‰è£…é€Ÿåº¦è¶…å¿«</strong>ï¼šæ¯”Â <code>npm</code>Â å¿« 2-5 å€ï¼Œå¤§å‹é¡¹ç›®ä¸­å·®è·æ›´æ˜æ˜¾ã€‚</li>
<li><strong>æè‡´çœç£ç›˜</strong>ï¼šé‡‡ç”¨ã€Œå…¨å±€ç¼“å­˜ + ç¡¬é“¾æ¥ / ç¬¦å·é“¾æ¥ã€æœºåˆ¶ï¼ŒåŒä¸€ä¸ªä¾èµ–çš„åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¨å±€åªå­˜å‚¨ 1 ä»½ï¼Œå¤šä¸ªé¡¹ç›®å…±äº«ã€‚æ¯”å¦‚ï¼š10 ä¸ªé¡¹ç›®éƒ½ä¾èµ–Â <code>react@18</code>ï¼Œ<code>npm</code>Â ä¼šæ‹·è´ 10 ä»½ï¼Œ<code>pnpm</code>Â åªå­˜ 1 ä»½ï¼Œå¤§å¹…èŠ‚çœç£ç›˜ç©ºé—´ã€‚</li>
<li><strong>æœç»å¹½çµä¾èµ–</strong>ï¼š<code>pnpm</code>Â çš„Â <code>node_modules</code>Â ç»“æ„æ›´ä¸¥è°¨ï¼Œåªæœ‰åœ¨Â <code>package.json</code>Â ä¸­å£°æ˜çš„ä¾èµ–æ‰èƒ½è¢«é¡¹ç›®ä½¿ç”¨ï¼Œé¿å…éšå¼ä¾èµ–é—®é¢˜ã€‚</li>
</ol>
<h4 data-id="heading-7">æ·±åº¦æ‹†è§£ï¼špnpm æ ¸å¿ƒæœºåˆ¶ï¼ˆå…¨å±€ç¼“å­˜ + ç¡¬é“¾æ¥ + è½¯é“¾æ¥ï¼‰</h4>
<p>åœ¨è®²è§£ä¹‹å‰ï¼Œå…ˆç»™å¤§å®¶ç”¨é€šä¿—çš„è¯­è¨€è§£é‡Šä¸¤ä¸ªæ¦‚å¿µï¼Œé¿å…æ™¦æ¶©éš¾æ‡‚ï¼š</p>
<ul>
<li><strong>ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰</strong> ï¼šå¯ä»¥ç†è§£ä¸ºã€Œæ–‡ä»¶çš„å‰¯æœ¬å¿«æ·æ–¹å¼ã€,è¿˜å¯ä»¥ç›´ç™½ç†è§£æˆåˆ›å»ºäº†ä¸€ä¸ªwordçš„å‰¯æœ¬ï¼Œå®ƒå’ŒåŸæ–‡ä»¶å…±äº«åŒä¸€ä»½ç£ç›˜æ•°æ®ã€‚æ¯”å¦‚ä½ æœ‰ä¸€ä¸ªæ–‡ä»¶Â <code>A.txt</code>ï¼Œç»™å®ƒåˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥Â <code>B.txt</code>ï¼Œä¿®æ”¹Â <code>A.txt</code>Â å†…å®¹ï¼Œ<code>B.txt</code>Â ä¹Ÿä¼šåŒæ­¥å˜åŒ–ï¼›åˆ é™¤Â <code>A.txt</code>ï¼Œ<code>B.txt</code>Â ä¾ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ˆå› ä¸ºå®ƒæŒ‡å‘çš„æ˜¯ç£ç›˜æ•°æ®ï¼Œä¸æ˜¯åŸæ–‡ä»¶æœ¬èº«ï¼‰ã€‚</li>
<li><strong>è½¯é“¾æ¥ï¼ˆSymbolic Linkï¼Œä¹Ÿå«ç¬¦å·é“¾æ¥ï¼‰</strong> ï¼šå¯ä»¥ç†è§£ä¸ºã€ŒWindows çš„å¿«æ·æ–¹å¼ / Mac çš„æ›¿èº«ã€ï¼Œå®ƒæœ¬èº«ä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œåªè®°å½•åŸæ–‡ä»¶çš„è·¯å¾„ã€‚æ¯”å¦‚ç»™Â <code>A.txt</code>Â åˆ›å»ºè½¯é“¾æ¥Â <code>C.txt</code>ï¼Œæ‰“å¼€Â <code>C.txt</code>Â å…¶å®æ˜¯é€šè¿‡è·¯å¾„æ‰¾åˆ°å¹¶æ‰“å¼€Â <code>A.txt</code>ï¼›å¦‚æœåˆ é™¤Â <code>A.txt</code>ï¼Œ<code>C.txt</code>Â å°±ä¼šå¤±æ•ˆã€‚</li>
<li><strong>å…¨å±€ç¼“å­˜</strong>ï¼š<code>pnpm</code>Â ä¼šåœ¨ä½ çš„ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„ç¼“å­˜ç›®å½•ï¼ˆWindowsï¼š<code>C:\Users&lt;ç”¨æˆ·å&gt;.pnpm-store</code>ï¼›Mac/Linuxï¼š<code>~/.pnpm-store</code>ï¼‰ï¼Œæ‰€æœ‰é€šè¿‡Â <code>pnpm</code>Â ä¸‹è½½çš„ä¾èµ–åŒ…ï¼Œéƒ½ä¼šå…ˆè§£å‹å¹¶å­˜å‚¨åˆ°è¿™ä¸ªå…¨å±€ç¼“å­˜ä¸­ï¼ŒåŒä¸€ä¸ªç‰ˆæœ¬çš„ä¾èµ–åªå­˜å‚¨ä¸€æ¬¡ã€‚</li>
</ul>
<p>å½“ä½ åœ¨é¡¹ç›®ä¸­ç”¨Â <code>pnpm add &lt;åŒ…å&gt;</code>Â å®‰è£…ä¾èµ–æ—¶ï¼Œ<code>pnpm</code>Â çš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>å…ˆæ£€æŸ¥å…¨å±€ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç‰ˆæœ¬çš„ä¾èµ–ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä» npm ä»“åº“ä¸‹è½½å¹¶å­˜å‚¨åˆ°å…¨å±€ç¼“å­˜ï¼›</li>
<li>åœ¨å…¨å±€ç¼“å­˜ä¸­ï¼Œç»™è¯¥ä¾èµ–çš„æ–‡ä»¶åˆ›å»ºã€Œç¡¬é“¾æ¥ã€åˆ°Â <code>pnpm</code>Â çš„è™šæ‹Ÿå­˜å‚¨ç›®å½•ï¼›</li>
<li>åœ¨é¡¹ç›®çš„Â <code>node_modules</code>Â ä¸­ï¼Œåˆ›å»ºã€Œè½¯é“¾æ¥ã€æŒ‡å‘è™šæ‹Ÿå­˜å‚¨ç›®å½•ä¸­çš„ä¾èµ–æ–‡ä»¶ï¼›</li>
<li>æœ€ç»ˆé¡¹ç›®çš„Â <code>node_modules</code>Â ä¸­ï¼Œåªæœ‰è½¯é“¾æ¥ï¼Œæ²¡æœ‰å®é™…æ‹·è´çš„ä¾èµ–æ–‡ä»¶ï¼Œå®ç°äº† â€œä¸€ä»½ç¼“å­˜ï¼Œå¤šé¡¹ç›®å…±äº«â€ã€‚</li>
</ol>
<p>é€šä¿—æ€»ç»“ï¼š<strong>å…¨å±€ç¼“å­˜æ˜¯ â€œä»“åº“â€ï¼Œç¡¬é“¾æ¥ä¿è¯ â€œä¸€ä»½æ•°æ®å¤šå¤„å¯ç”¨â€ï¼Œè½¯é“¾æ¥è´Ÿè´£ â€œé¡¹ç›®æ‰¾åˆ°ä¾èµ–â€ï¼Œä¸‰è€…ç»“åˆè®© pnpm æ—¢çœç©ºé—´åˆå¿«ã€‚</strong></p>
<h4 data-id="heading-8">æ·±åº¦æ‹†è§£ï¼šå¹½çµä¾èµ–ï¼ˆä¸ºä»€ä¹ˆ npm æœ‰ï¼Œpnpm æ²¡æœ‰ï¼Ÿï¼‰</h4>
<p>å…ˆæ˜ç¡®ï¼š<strong>å¹½çµä¾èµ–ï¼ˆPhantom Dependencyï¼‰å°±æ˜¯é¡¹ç›®ä¸­ä½¿ç”¨äº†æ²¡æœ‰åœ¨Â <code>package.json</code>Â ä¸­æ˜ç¡®å£°æ˜çš„ä¾èµ–ï¼Œä½†é¡¹ç›®ä¾ç„¶èƒ½æ­£å¸¸è¿è¡Œçš„ç°è±¡</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­å¸®ä½ ç†è§£ï¼š</p>
<ol>
<li>ä½ åœ¨é¡¹ç›®ä¸­ç”¨Â <code>npm i react</code>Â å®‰è£…äº†Â <code>react</code>ï¼Œè€ŒÂ <code>react</code>Â æœ¬èº«ä¾èµ–Â <code>react-dom</code>ï¼ˆè¿™æ˜¯Â <code>react</code>Â çš„ä¾èµ–ï¼Œä¸æ˜¯ä½ é¡¹ç›®çš„ç›´æ¥ä¾èµ–ï¼‰ï¼›</li>
<li>ç”±äºÂ <code>npm</code>Â ä¼šå°†æ‰€æœ‰ä¾èµ–ï¼ˆç›´æ¥ä¾èµ– + é—´æ¥ä¾èµ–ï¼‰æ‰å¹³åŒ–åˆ°Â <code>node_modules</code>Â æ ¹ç›®å½•ï¼Œæ‰€ä»¥ä½ åœ¨é¡¹ç›®ä¸­å³ä½¿æ²¡åœ¨Â <code>package.json</code>Â ä¸­å£°æ˜Â <code>react-dom</code>ï¼Œä¹Ÿèƒ½ç›´æ¥å¯¼å…¥å¹¶ä½¿ç”¨Â <code>react-dom</code>ï¼›</li>
<li>è¿™ç§æƒ…å†µå°±æ˜¯å¹½çµä¾èµ–ï¼šä½ æ²¡æ˜ç¡®å®‰è£…Â <code>react-dom</code>ï¼Œå´èƒ½ä½¿ç”¨å®ƒï¼Œçœ‹ä¼¼æ–¹ä¾¿ï¼Œå®åˆ™éšè—å·¨å¤§é£é™© â€”â€” å¦‚æœæŸå¤©Â <code>react</code>Â å‡çº§åä¸å†ä¾èµ–Â <code>react-dom</code>ï¼Œæˆ–è€…ä¾èµ–çš„Â <code>react-dom</code>Â ç‰ˆæœ¬å¤§å¹…å˜æ›´ï¼Œä½ çš„é¡¹ç›®å°±ä¼šçªç„¶æŠ¥é”™ï¼Œéš¾ä»¥æ’æŸ¥ã€‚</li>
</ol>
<p>è€ŒÂ <code>pnpm</code>Â ä¸ºä»€ä¹ˆèƒ½æœç»å¹½çµä¾èµ–ï¼Ÿå› ä¸ºÂ <code>pnpm</code>Â çš„Â <code>node_modules</code>Â ä¸æ˜¯æ‰å¹³åŒ–çš„ï¼Œé¡¹ç›®çš„Â 
<code>node_modules</code>Â æ ¹ç›®å½•ä¸‹ï¼Œåªæœ‰ä½ åœ¨Â <code>package.json</code>Â ä¸­æ˜ç¡®å£°æ˜çš„ç›´æ¥ä¾èµ–ï¼Œé—´æ¥ä¾èµ–ä¼šè¢«æ”¾åœ¨è™šæ‹Ÿå­˜å‚¨ç›®å½•ä¸­ï¼Œé¡¹ç›®æ— æ³•ç›´æ¥è®¿é—®æœªå£°æ˜çš„é—´æ¥ä¾èµ–ï¼Œè‡ªç„¶å°±æœç»äº†å¹½çµä¾èµ–ï¼Œè®©é¡¹ç›®ä¾èµ–æ›´ä¸¥è°¨ã€æ›´å¯æ§ã€‚</p>
<h4 data-id="heading-9">æ ¸å¿ƒåŠŸèƒ½ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼Œå‡ ä¹å…¼å®¹ npm å‘½ä»¤ï¼‰</h4>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a3d17e711a649b294f667c8f7393b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050191&amp;x-signature=O8n4Odc5s5Qh2Y7TSecJ66GVeJ8%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">ä¼˜ç‚¹ &amp; ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ã€çœç£ç›˜ã€æ— å¹½çµä¾èµ–ã€å®Œå…¨å…¼å®¹Â <code>npm</code>Â ç”Ÿæ€ï¼Œä¾èµ–ç®¡ç†æ›´ä¸¥è°¨ã€‚</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼ˆé Node è‡ªå¸¦ï¼‰ï¼Œæå°‘æ•°è€æ—§é¡¹ç›®å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ˆå‡ ä¹å¯ä»¥å¿½ç•¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-11">3. npxï¼šåŒ…æ‰§è¡Œå·¥å…·ï¼Œå‘Šåˆ«å…¨å±€å®‰è£…</h3>
<p><code>npx</code>Â æœ€å®¹æ˜“è¢«è¯¯è§£ä¸ºåŒ…ç®¡ç†å™¨ï¼Œä½†å®ƒ<strong>æ ¹æœ¬ä¸æ˜¯ç”¨æ¥ç®¡ç†ä¾èµ–çš„</strong>ï¼Œè€Œæ˜¯ç”¨æ¥ã€Œæ‰§è¡Œ Node åŒ…ã€çš„å·¥å…·ï¼Œè§£å†³äº†Â <code>npm</code>Â æ‰§è¡ŒåŒ…çš„ä¸¤å¤§ç—›ç‚¹ã€‚</p>
<h4 data-id="heading-12">è§£å†³çš„æ ¸å¿ƒç—›ç‚¹</h4>
<ol>
<li>ç—›ç‚¹ 1ï¼šå…¨å±€å®‰è£…åŒ…å®¹æ˜“å¯¼è‡´ç‰ˆæœ¬å†²çªï¼ˆæ¯”å¦‚ A é¡¹ç›®è¦Â <code>create-react-app@5</code>ï¼ŒB é¡¹ç›®è¦Â <code>create-react-app@4</code>ï¼‰ã€‚</li>
<li>ç—›ç‚¹ 2ï¼šæœ¬åœ°å®‰è£…çš„åŒ…ï¼Œæ— æ³•ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼ˆè·¯å¾„ä¸åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-13">æ ¸å¿ƒåŠŸèƒ½ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼Œé‡ç‚¹ï¼ï¼‰</h4>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bf9e7feb58c47ba9353c07d56a15f39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768050191&amp;x-signature=xpHjaKeUVp8SZoSzscjYINVFsxI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-14">æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li>æ— éœ€æ‰‹åŠ¨å®‰è£…åŒ…ï¼Œä¸´æ—¶ä¸‹è½½å³æ‰§è¡Œã€‚</li>
<li>ä¼˜å…ˆä½¿ç”¨æœ¬åœ°åŒ…ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚</li>
<li>æ— éœ€é…ç½®ç¯å¢ƒå˜é‡ï¼Œè‡ªåŠ¨è¯†åˆ«å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<h2 data-id="heading-15">ä¸‰ã€å®æˆ˜åœºæ™¯ï¼šè¯¥ç”¨è°ï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ</h2>
<p>çœ‹å®Œç†è®ºï¼Œæˆ‘ä»¬ç»“åˆå®é™…å¼€å‘åœºæ™¯ï¼Œæ˜ç¡®ä¸‰è€…çš„ä½¿ç”¨é€‰æ‹©ï¼š</p>








































<table><thead><tr><th>åœºæ™¯éœ€æ±‚</th><th>æ¨èå·¥å…·</th><th>å‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ–°æ‰‹å…¥é—¨ã€ä¼ ç»Ÿé¡¹ç›®å¼€å‘ï¼ˆè¿½æ±‚å…¼å®¹ï¼‰</td><td>npm</td><td><code>npm i react</code>ã€<code>npm run dev</code></td></tr><tr><td>å¤§å‹é¡¹ç›®ã€å¤šé¡¹ç›®å¼€å‘ï¼ˆè¿½æ±‚æ€§èƒ½ / çœç©ºé—´ / ä¸¥è°¨æ€§ï¼‰</td><td>pnpm</td><td><code>pnpm add react</code>ã€<code>pnpm dev</code></td></tr><tr><td>ä¸´æ—¶æ‰§è¡Œè„šæ‰‹æ¶ï¼ˆå¦‚ craã€viteï¼‰</td><td>npx</td><td><code>npx create-vite my-vite-app</code></td></tr><tr><td>ä¸´æ—¶è¿è¡Œ TS æ–‡ä»¶ã€æ ¼å¼åŒ–ä»£ç ç­‰</td><td>npx</td><td><code>npx tsx src/index.ts</code>ã€<code>npx prettier --write .</code></td></tr><tr><td>æ‰§è¡Œæœ¬åœ°å®‰è£…çš„åŒ…ï¼ˆé¿å…å…¨å±€ç‰ˆæœ¬å†²çªï¼‰</td><td>npx</td><td><code>npx tsc --init</code>ã€<code>npx webpack</code></td></tr><tr><td>å‘å¸ƒè‡ªå·±çš„ npm åŒ…</td><td>npm/pnpm</td><td><code>npm publish</code>ã€<code>pnpm publish</code></td></tr></tbody></table>
<h2 data-id="heading-16">å››ã€æ€»ç»“ï¼šæ ¸å¿ƒåŒºåˆ«ä¸€å¥è¯è®°ç‰¢</h2>
<ol>
<li><strong>èº«ä»½å·®å¼‚</strong>ï¼š<code>npm</code>ï¼ˆå®˜æ–¹åŒ…ç®¡ç†å™¨ï¼‰ã€<code>pnpm</code>ï¼ˆé«˜æ€§èƒ½åŒ…ç®¡ç†å™¨ï¼‰ã€<code>npx</code>ï¼ˆåŒ…æ‰§è¡Œå·¥å…·ï¼ŒéåŒ…ç®¡ç†å™¨ï¼‰ã€‚</li>
<li><strong>èŒè´£å·®å¼‚</strong>ï¼š<code>npm</code>/<code>pnpm</code>Â ç®¡ã€Œä¾èµ–çš„å®‰è£… / å¸è½½ / ç®¡ç†ã€ï¼Œ<code>npx</code>Â ç®¡ã€Œä¾èµ–çš„æ‰§è¡Œã€ã€‚</li>
<li><strong>æ ¸å¿ƒæœºåˆ¶å·®å¼‚</strong>ï¼š<code>pnpm</code>Â é ã€Œå…¨å±€ç¼“å­˜ + ç¡¬é“¾æ¥ + è½¯é“¾æ¥ã€å®ç°é«˜æ€§èƒ½å’Œçœç£ç›˜ï¼Œè¿˜èƒ½æœç»å¹½çµä¾èµ–ï¼›<code>npm</code>Â æ— æ­¤æœºåˆ¶ï¼Œå­˜åœ¨å¹½çµä¾èµ–é£é™©ã€‚</li>
<li><strong>æ€§èƒ½å·®å¼‚</strong>ï¼š<code>pnpm</code>Â &gt;Â <code>npm</code>ï¼ˆé€Ÿåº¦ã€ç£ç›˜å ç”¨å…¨æ–¹ä½é¢†å…ˆï¼‰ï¼Œ<code>npx</code>Â æ— æ­¤å¯¹æ¯”ç»´åº¦ã€‚</li>
<li><strong>ä½¿ç”¨å·®å¼‚</strong>ï¼šå…¼å®¹ä¼˜å…ˆç”¨Â <code>npm</code>ï¼Œæ€§èƒ½ / ä¸¥è°¨æ€§ä¼˜å…ˆç”¨Â <code>pnpm</code>ï¼Œä¸´æ—¶æ‰§è¡Œ / é¿å…ç‰ˆæœ¬å†²çªç”¨Â <code>npx</code>ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•å’Œæ„ä¹‰è¯¦è§£ï¼ˆç»“åˆæ¡ˆä¾‹ï¼‰]]></title>    <link>https://juejin.cn/post/7590601860300619803</link>    <guid>https://juejin.cn/post/7590601860300619803</guid>    <pubDate>2026-01-03T13:13:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590601860300619803" data-draft-id="7590699877630558246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•å’Œæ„ä¹‰è¯¦è§£ï¼ˆç»“åˆæ¡ˆä¾‹ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-03T13:13:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•å’Œæ„ä¹‰è¯¦è§£ï¼ˆç»“åˆæ¡ˆä¾‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:13:45.000Z" title="Sat Jan 03 2026 13:13:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•å’Œæ„ä¹‰è¯¦è§£ï¼ˆç»“åˆæ¡ˆä¾‹ï¼‰</h2>
<h5 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ Hooksï¼Ÿ</h5>
<p>è‡ªå®šä¹‰ Hooks æ˜¯ React ä¸­<strong>å¤ç”¨çŠ¶æ€é€»è¾‘</strong>çš„ä¸€ç§æœºåˆ¶ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªä»¥<code>use</code>å¼€å¤´çš„å‡½æ•°ï¼Œå†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksï¼ˆåŒ…æ‹¬å†…ç½® Hooks å¦‚<code>useState</code>ã€<code>useEffect</code>æˆ–å…¶ä»–è‡ªå®šä¹‰ Hooksï¼‰ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯å°†ç»„ä»¶ä¸­é‡å¤çš„çŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨å¤„ç†ç­‰é€»è¾‘æå–å‡ºæ¥ï¼Œå®ç°é€»è¾‘å¤ç”¨ï¼Œè®©ç»„ä»¶æ›´ä¸“æ³¨äº UI æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-2">äºŒã€æ¡ˆä¾‹è§£æï¼šè‡ªå®šä¹‰ Hooks çš„å®ç°ä¸ä½¿ç”¨</h5>
<h6 data-id="heading-3">1. æ¡ˆä¾‹ 1ï¼š<code>useMouse</code>â€”â€” å°è£…é¼ æ ‡ä½ç½®ç›‘å¬é€»è¾‘</h6>
<p><strong>åŠŸèƒ½</strong>ï¼šå®æ—¶è·å–é¼ æ ‡åœ¨é¡µé¢ä¸Šçš„åæ ‡ï¼Œå¹¶åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ¸…é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<h6 data-id="heading-4">ï¼ˆ1ï¼‰<code>useMouse</code>çš„å®ç°ï¼ˆ<code>useMouse.js</code>ï¼‰</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">// è‡ªå®šä¹‰Hookså¿…é¡»ä»¥useå¼€å¤´</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useMouse</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 1. ç”¨useStateä¿å­˜é¼ æ ‡åæ ‡çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// 2. ç”¨useEffectå¤„ç†å‰¯ä½œç”¨ï¼ˆæ·»åŠ /æ¸…é™¤é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°ï¼šæ›´æ–°é¼ æ ‡åæ ‡</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-title function_">setX</span>(event.<span class="hljs-property">pageX</span>); <span class="hljs-comment">// æ›´æ–°xåæ ‡</span>
      <span class="hljs-title function_">setY</span>(event.<span class="hljs-property">pageY</span>); <span class="hljs-comment">// æ›´æ–°yåæ ‡</span>
    };

    <span class="hljs-comment">// ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update);

    <span class="hljs-comment">// 3. æ¸…é™¤å‰¯ä½œç”¨ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update);
    };
  }, []); <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„ï¼šåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</span>

  <span class="hljs-comment">// 4. è¿”å›éœ€è¦æš´éœ²çš„çŠ¶æ€ï¼ˆé¼ æ ‡åæ ‡ï¼‰</span>
  <span class="hljs-keyword">return</span> { x, y };
}
</code></pre>
<p>ï¼ˆ2ï¼‰<code>useMouse</code>çš„ä½¿ç”¨ï¼ˆ<code>App.jsx</code>ä¸­çš„<code>MouseMove</code>ç»„ä»¶ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MouseMove</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç›´æ¥è°ƒç”¨è‡ªå®šä¹‰Hooksï¼Œè·å–é¼ æ ‡åæ ‡</span>
  <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>();
  
  <span class="hljs-keyword">return</span>(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      é¼ æ ‡ä½ç½®: {x} {y} {/* åªä¸“æ³¨äºUIæ¸²æŸ“ï¼Œæ— éœ€å…³å¿ƒäº‹ä»¶é€»è¾‘ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h6 data-id="heading-5">ï¼ˆ3ï¼‰é€»è¾‘è§£æ</h6>
<ul>
<li><strong>å¤ç”¨æ€§</strong>ï¼šå¦‚æœå…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è·å–é¼ æ ‡ä½ç½®ï¼Œç›´æ¥è°ƒç”¨<code>useMouse()</code>å³å¯ï¼Œæ— éœ€é‡å¤ç¼–å†™äº‹ä»¶ç»‘å®š / æ¸…é™¤é€»è¾‘ã€‚</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šç»„ä»¶ï¼ˆ<code>MouseMove</code>ï¼‰åªè´Ÿè´£æ¸²æŸ“ UIï¼Œé¼ æ ‡ç›‘å¬çš„ä¸šåŠ¡é€»è¾‘è¢«å°è£…åœ¨<code>useMouse</code>ä¸­ï¼Œä»£ç ç»“æ„æ›´æ¸…æ™°ã€‚</li>
<li><strong>é¿å…å†…å­˜æ³„æ¼</strong>ï¼šé€šè¿‡<code>useEffect</code>çš„è¿”å›å‡½æ•°æ¸…é™¤äº‹ä»¶ç›‘å¬ï¼Œç¡®ä¿ç»„ä»¶å¸è½½åä¸å†æ‰§è¡Œæ— ç”¨é€»è¾‘ã€‚</li>
</ul>
<h6 data-id="heading-6">2. æ¡ˆä¾‹ 2ï¼š<code>useTodos</code>â€”â€” å°è£…å¾…åŠäº‹é¡¹ç®¡ç†é€»è¾‘</h6>
<p><strong>åŠŸèƒ½</strong>ï¼šç®¡ç†å¾…åŠäº‹é¡¹çš„å¢ã€åˆ ã€æ”¹çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨åŒæ­¥åˆ°<code>localStorage</code>ï¼ˆåˆ·æ–°é¡µé¢åæ•°æ®ä¸ä¸¢å¤±ï¼‰ã€‚</p>
<h6 data-id="heading-7">ï¼ˆ1ï¼‰<code>useTodos</code>çš„å®ç°ï¼ˆ<code>useTodos.js</code>ï¼‰</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEY</span> = <span class="hljs-string">'todos'</span>; <span class="hljs-comment">// æœ¬åœ°å­˜å‚¨çš„keyï¼ˆä¾¿äºç»´æŠ¤ï¼‰</span>

<span class="hljs-comment">// ä»localStorageåŠ è½½å¾…åŠäº‹é¡¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadFromStorage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> storedTodos = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>);
  <span class="hljs-keyword">return</span> storedTodos ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(storedTodos) : [];
}

<span class="hljs-comment">// ä¿å­˜å¾…åŠäº‹é¡¹åˆ°localStorage</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveToStorage</span>(<span class="hljs-params">todos</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEY</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTodos</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 1. ç”¨useStateåˆå§‹åŒ–å¾…åŠäº‹é¡¹ï¼ˆä»æœ¬åœ°å­˜å‚¨åŠ è½½ï¼‰</span>
  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(loadFromStorage);

  <span class="hljs-comment">// 2. ç”¨useEffectåŒæ­¥æ•°æ®åˆ°localStorageï¼ˆtodoså˜åŒ–æ—¶è§¦å‘ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">saveToStorage</span>(todos);
  }, [todos]); <span class="hljs-comment">// ä¾èµ–todosï¼šåªæœ‰todoså˜åŒ–æ—¶æ‰æ‰§è¡Œ</span>

  <span class="hljs-comment">// 3. å®šä¹‰æ·»åŠ å¾…åŠäº‹é¡¹çš„æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>([
      ...todos,
      { <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> } <span class="hljs-comment">// ç”Ÿæˆæ–°çš„å¾…åŠé¡¹</span>
    ]);
  };

  <span class="hljs-comment">// 4. å®šä¹‰åˆ‡æ¢å¾…åŠäº‹é¡¹å®ŒæˆçŠ¶æ€çš„æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> 
      todo.<span class="hljs-property">id</span> === id ? { ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> } : todo
    ));
  };

  <span class="hljs-comment">// 5. å®šä¹‰åˆ é™¤å¾…åŠäº‹é¡¹çš„æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteTodo</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== id));
  };

  <span class="hljs-comment">// 6. è¿”å›çŠ¶æ€å’Œæ–¹æ³•ï¼ˆä¾›ç»„ä»¶ä½¿ç”¨ï¼‰</span>
  <span class="hljs-keyword">return</span> { todos, addTodo, toggleTodo, deleteTodo };
}
</code></pre>
<p>ï¼ˆ2ï¼‰<code>useTodos</code>çš„ä½¿ç”¨ï¼ˆ<code>App.jsx</code>ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useTodos } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useTodos.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoList.jsx'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TodoInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/TodoInput.jsx'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰Hooksï¼Œè·å–å¾…åŠäº‹é¡¹çš„çŠ¶æ€å’Œæ“ä½œæ–¹æ³•</span>
  <span class="hljs-keyword">const</span> { todos, addTodo, toggleTodo, deleteTodo } = <span class="hljs-title function_">useTodos</span>();

  <span class="hljs-keyword">return</span>(
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* ä¼ å…¥addTodoæ–¹æ³•ç»™è¾“å…¥ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">addTodo</span>=<span class="hljs-string">{addTodo}/</span>&gt;</span>
      {/* æ ¹æ®todosçŠ¶æ€æ¸²æŸ“åˆ—è¡¨æˆ–æç¤ºæ–‡æœ¬ */}
      {
        todos.length &gt; 0 ? (
          <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> 
            <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{deleteTodo}</span>
            <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{toggleTodo}</span>
            <span class="hljs-attr">todos</span>=<span class="hljs-string">{todos}</span>
          /&gt;</span>
        ) : (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æš‚æ— å¾…åŠäº‹é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        )
      }
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h6 data-id="heading-8">ï¼ˆ3ï¼‰é€»è¾‘è§£æ</h6>
<ul>
<li><strong>çŠ¶æ€å¤ç”¨</strong>ï¼šå¾…åŠäº‹é¡¹çš„åŠ è½½ã€ä¿å­˜ã€å¢åˆ æ”¹é€»è¾‘è¢«å®Œå…¨å°è£…ï¼Œä»»ä½•éœ€è¦å¾…åŠåŠŸèƒ½çš„ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡<code>useTodos</code>å¤ç”¨ã€‚</li>
<li><strong>ç®€åŒ–ç»„ä»¶</strong>ï¼š<code>App</code>ç»„ä»¶æ— éœ€å…³å¿ƒ<code>localStorage</code>æ“ä½œã€çŠ¶æ€æ›´æ–°ç»†èŠ‚ï¼Œåªéœ€è°ƒç”¨æ–¹æ³•å’Œæ¸²æŸ“ UIï¼Œä»£ç é‡å¤§å¹…å‡å°‘ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šæ‰€æœ‰ä¸å¾…åŠç›¸å…³çš„é€»è¾‘é›†ä¸­ç®¡ç†ï¼Œé¿å…å¤šå¤„é‡å¤ä»£ç å¯¼è‡´çš„ç»´æŠ¤é—®é¢˜ï¼ˆå¦‚ä¿®æ”¹å­˜å‚¨ key æ—¶åªéœ€æ”¹ä¸€å¤„ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-9">ä¸‰ã€è‡ªå®šä¹‰ Hooks çš„æ ¸å¿ƒæ„ä¹‰</h5>
<ol>
<li><strong>é€»è¾‘å¤ç”¨</strong>è§£å†³äº†ç±»ç»„ä»¶ä¸­ â€œæ··å…¥ï¼ˆmixinï¼‰â€ å¸¦æ¥çš„å‘½åå†²çªã€ä¾èµ–æ··ä¹±ç­‰é—®é¢˜ï¼Œé€šè¿‡å‡½æ•°è°ƒç”¨çš„æ–¹å¼ä¼˜é›…å¤ç”¨çŠ¶æ€é€»è¾‘ï¼ˆå¦‚<code>useMouse</code>å’Œ<code>useTodos</code>å¯åœ¨ä»»æ„ç»„ä»¶ä¸­é‡å¤ä½¿ç”¨ï¼‰ã€‚</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>å°†ç»„ä»¶ä¸­çš„ â€œä¸šåŠ¡é€»è¾‘â€ï¼ˆå¦‚äº‹ä»¶ç›‘å¬ã€æ•°æ®å­˜å‚¨ï¼‰ä¸ â€œUI æ¸²æŸ“â€ åˆ†ç¦»ï¼Œä½¿ç»„ä»¶æ›´ç®€æ´ï¼Œä¾¿äºé˜…è¯»å’Œç»´æŠ¤ï¼ˆç»„ä»¶åªå…³å¿ƒæ¸²æŸ“ï¼ŒHooks åªå…³å¿ƒé€»è¾‘ï¼‰ã€‚</li>
<li><strong>å¯æµ‹è¯•æ€§</strong>è‡ªå®šä¹‰ Hooks æ˜¯çº¯å‡½æ•°ï¼Œå¯ç‹¬ç«‹äºç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒéªŒè¯é€»è¾‘æ­£ç¡®æ€§ï¼ˆå¦‚æµ‹è¯•<code>useTodos</code>çš„<code>addTodo</code>æ–¹æ³•æ˜¯å¦æ­£ç¡®æ·»åŠ æ•°æ®ï¼‰ã€‚</li>
<li><strong>ä»£ç ä¸€è‡´æ€§</strong>å›¢é˜Ÿä¸­å¯é€šè¿‡è‡ªå®šä¹‰ Hooks ç»Ÿä¸€ä¸šåŠ¡é€»è¾‘çš„å®ç°æ–¹å¼ï¼ˆå¦‚æ‰€æœ‰æ•°æ®æŒä¹…åŒ–éƒ½ç”¨ç±»ä¼¼<code>useTodos</code>çš„æ¨¡å¼ï¼‰ï¼Œé™ä½åä½œæˆæœ¬ã€‚</li>
</ol>
<h5 data-id="heading-10">å››ã€è‡ªå®šä¹‰ Hooks çš„ä½¿ç”¨è§„èŒƒ</h5>
<ul>
<li>å¿…é¡»ä»¥<code>use</code>å¼€å¤´ï¼ˆå¦‚<code>useMouse</code>ã€<code>useTodos</code>ï¼‰ï¼ŒReact é€šè¿‡å‘½åè¯†åˆ« Hooksï¼Œç¡®ä¿ Hooks çš„è§„åˆ™ï¼ˆå¦‚åªèƒ½åœ¨é¡¶å±‚è°ƒç”¨ï¼‰è¢«éµå®ˆã€‚</li>
<li>å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksï¼ˆå†…ç½®æˆ–è‡ªå®šä¹‰ï¼‰ï¼Œä½†ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ã€å¾ªç¯ä¸­è°ƒç”¨ï¼ˆéœ€éµå¾ª React Hooks çš„è°ƒç”¨è§„åˆ™ï¼‰ã€‚</li>
<li>å¿…é¡»è¿”å›ç»„ä»¶éœ€è¦çš„çŠ¶æ€æˆ–æ–¹æ³•ï¼ˆé€šå¸¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œä¾¿äºè§£æ„ä½¿ç”¨ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡ä¸Šè¿°æ¡ˆä¾‹å¯ä»¥çœ‹å‡ºï¼Œè‡ªå®šä¹‰ Hooks æ˜¯ React ä¸­æå‡ä»£ç å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§çš„é‡è¦æ‰‹æ®µï¼Œå°¤å…¶åœ¨ä¸­å¤§å‹åº”ç”¨ä¸­èƒ½æ˜¾è‘—å‡å°‘é‡å¤ä»£ç ï¼Œè®©é€»è¾‘æ›´æ¸…æ™°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python æ•ˆç‡é£å‡æœ¯ï¼š3åŸºç¡€è¿›é˜¶å°å·¥å…·ï¼Œå°‘å†™ 100 è¡Œå¾ªç¯]]></title>    <link>https://juejin.cn/post/7590676494924103718</link>    <guid>https://juejin.cn/post/7590676494924103718</guid>    <pubDate>2026-01-03T13:55:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590676494924103718" data-draft-id="7590699877630656550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python æ•ˆç‡é£å‡æœ¯ï¼š3åŸºç¡€è¿›é˜¶å°å·¥å…·ï¼Œå°‘å†™ 100 è¡Œå¾ªç¯"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-03T13:55:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python æ•ˆç‡é£å‡æœ¯ï¼š3åŸºç¡€è¿›é˜¶å°å·¥å…·ï¼Œå°‘å†™ 100 è¡Œå¾ªç¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T13:55:10.000Z" title="Sat Jan 03 2026 13:55:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿˜åœ¨æ‰‹åŠ¨å†™å¾ªç¯å¤„ç†æ•°æ®ï¼ŸPython é‡Œè¿™å‡ ä¸ª â€œæ‡’äººç¥å™¨â€ï¼Œçœ‹ä¼¼åŸºç¡€å´èƒ½ç›´æ¥æ‹‰é«˜ä»£ç æ•ˆç‡ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’ä¸Šæ‰‹ï¼</p>
<h2 data-id="heading-0">1.Â <code>itertools</code>Â ï¼šå¾ªç¯å·æ‡’ç¥å™¨ï¼Œå°‘å†™ N è¡Œé‡å¤ä»£ç </h2>
<p>å¤„ç†è¿­ä»£å™¨æ—¶ï¼Œ<code>itertools</code>Â é‡Œçš„æ–¹æ³•èƒ½å¸®ä½ å®ç°å„ç§èŠ±å¼å¾ªç¯ï¼Œä¸ç”¨å†æ‰‹å†™åµŒå¥—é€»è¾‘ã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯Â <code>cycle</code>ï¼ˆæ— é™å¾ªç¯ï¼‰å’ŒÂ <code>chain</code>ï¼ˆæ‹¼æ¥è¿­ä»£å™¨ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> itertools

<span class="hljs-comment"># éœ€æ±‚1ï¼šå¾ªç¯éå†åˆ—è¡¨ï¼Œåˆ°æœ«å°¾åä»å¤´å†æ¥</span>
colors = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"green"</span>, <span class="hljs-string">"blue"</span>]
color_cycle = itertools.cycle(colors)

<span class="hljs-comment"># å–å‰5ä¸ªå…ƒç´ ï¼ˆæ¼”ç¤ºç”¨ï¼Œå®é™…å¯æ— é™å–ï¼‰</span>
<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(color_cycle))
<span class="hljs-comment"># è¾“å‡ºï¼šred green blue red green</span>

<span class="hljs-comment"># éœ€æ±‚2ï¼šæ‹¼æ¥å¤šä¸ªåˆ—è¡¨ï¼Œé¿å…åˆ›å»ºæ–°åˆ—è¡¨å ç”¨å†…å­˜</span>
list1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
list2 = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
combined = itertools.chain(list1, list2)

<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> combined:
    <span class="hljs-built_in">print</span>(num, end=<span class="hljs-string">" "</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š1 2 3 4 5 6</span>
</code></pre>
<h2 data-id="heading-1">2.Â <code>collections.defaultdict</code>Â ï¼šå­—å…¸åˆ†ç»„ä¸ç¿»è½¦ï¼Œå‘Šåˆ« KeyError</h2>
<p>ç”¨æ™®é€šå­—å…¸åˆ†ç»„æ—¶ï¼Œå¾—å…ˆåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ï¼Œè€ŒÂ <code>defaultdict</code>Â èƒ½ç›´æ¥æŒ‡å®šé»˜è®¤å€¼ç±»å‹ï¼Œåˆ†ç»„ä»£ç ä¸€æ­¥åˆ°ä½ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict

<span class="hljs-comment"># éœ€æ±‚ï¼šæŠŠå­¦ç”ŸæŒ‰æˆç»©ç­‰çº§åˆ†ç»„</span>
students = [
    (<span class="hljs-string">"å°æ˜"</span>, <span class="hljs-string">"A"</span>),
    (<span class="hljs-string">"å°çº¢"</span>, <span class="hljs-string">"B"</span>),
    (<span class="hljs-string">"å°åˆš"</span>, <span class="hljs-string">"A"</span>),
    (<span class="hljs-string">"å°ç¾"</span>, <span class="hljs-string">"B"</span>)
]

<span class="hljs-comment"># ä¼ ç»Ÿå­—å…¸å†™æ³•ï¼šç¹çä¸”æ˜“å‡ºé”™</span>
grade_dict = {}
<span class="hljs-keyword">for</span> name, grade <span class="hljs-keyword">in</span> students:
    <span class="hljs-keyword">if</span> grade <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> grade_dict:
        grade_dict[grade] = []
    grade_dict[grade].append(name)
<span class="hljs-built_in">print</span>(grade_dict)  <span class="hljs-comment"># {'A': ['å°æ˜', 'å°åˆš'], 'B': ['å°çº¢', 'å°ç¾']}</span>

<span class="hljs-comment"># defaultdict å†™æ³•ï¼šç®€æ´é«˜æ•ˆ</span>
default_grade = defaultdict(<span class="hljs-built_in">list</span>)
<span class="hljs-keyword">for</span> name, grade <span class="hljs-keyword">in</span> students:
    default_grade[grade].append(name)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">dict</span>(default_grade))  <span class="hljs-comment"># ç»“æœåŒä¸Š</span>
</code></pre>
<h2 data-id="heading-2">3.Â <code>enumerate</code>Â è¿›é˜¶ç”¨æ³•ï¼šè‡ªå®šä¹‰èµ·å§‹ç´¢å¼•ï¼Œå¾ªç¯æ›´çµæ´»</h2>
<p>åŸºç¡€çš„Â <code>enumerate</code>Â å¤§å®¶éƒ½ä¼šç”¨ï¼Œä½†è‡ªå®šä¹‰èµ·å§‹ç´¢å¼•è¿™ä¸ªå°ç»†èŠ‚ï¼Œèƒ½è®©å¾ªç¯ç»“æœæ›´è´´åˆå®é™…éœ€æ±‚ï¼Œä¸ç”¨å†æ‰‹åŠ¨Â <code>+1</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éœ€æ±‚ï¼šæ‰“å°å­¦ç”Ÿæ’åï¼Œä»1å¼€å§‹è®¡æ•°</span>
names = [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>]

<span class="hljs-comment"># åŸºç¡€ç”¨æ³•ï¼šé»˜è®¤ä»0å¼€å§‹</span>
<span class="hljs-keyword">for</span> idx, name <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(names):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{idx+<span class="hljs-number">1</span>}</span>åï¼š<span class="hljs-subst">{name}</span>"</span>)  <span class="hljs-comment"># æ‰‹åŠ¨+1ï¼Œéº»çƒ¦</span>

<span class="hljs-comment"># è¿›é˜¶ç”¨æ³•ï¼šæŒ‡å®šstartå‚æ•°ï¼Œç›´æ¥ä»1å¼€å§‹</span>
<span class="hljs-keyword">for</span> idx, name <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(names, start=<span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{idx}</span>åï¼š<span class="hljs-subst">{name}</span>"</span>)
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># ç¬¬1åï¼šå¼ ä¸‰</span>
<span class="hljs-comment"># ç¬¬2åï¼šæå››</span>
<span class="hljs-comment"># ç¬¬3åï¼šç‹äº”</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">å°æ€»ç»“</h3>
<ol>
<li><code>itertools</code>Â èƒ½ç®€åŒ–è¿­ä»£å™¨æ“ä½œï¼Œå‡å°‘é‡å¤å¾ªç¯ä»£ç ï¼›</li>
<li><code>defaultdict</code>Â æ˜¯å­—å…¸åˆ†ç»„çš„ â€œåˆ©å™¨â€ï¼Œé¿å…æ‰‹åŠ¨åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ï¼›</li>
<li><code>enumerate</code>Â æŒ‡å®šÂ <code>start</code>Â å‚æ•°ï¼Œèƒ½ç›´æ¥å¾—åˆ°ç¬¦åˆéœ€æ±‚çš„ç´¢å¼•ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monorepo å„åŒ…é—´æ­£ç¡®çš„é€šä¿¡æ–¹å¼]]></title>    <link>https://juejin.cn/post/7590608345923452954</link>    <guid>https://juejin.cn/post/7590608345923452954</guid>    <pubDate>2026-01-03T14:10:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590608345923452954" data-draft-id="7590676494924038182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monorepo å„åŒ…é—´æ­£ç¡®çš„é€šä¿¡æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-01-03T14:10:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨è¥¿å®‰æ”¾ç¾Šçš„ç‰›æ²¹æœ"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894233133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monorepo å„åŒ…é—´æ­£ç¡®çš„é€šä¿¡æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894233133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨è¥¿å®‰æ”¾ç¾Šçš„ç‰›æ²¹æœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T14:10:33.000Z" title="Sat Jan 03 2026 14:10:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>Monorepoï¼ˆMonolithic Repositoryï¼‰æŒ‡çš„æ˜¯æŠŠå¤šä¸ªåŒ…ï¼ˆé¡¹ç›®ï¼‰çš„ä»£ç ï¼Œç»Ÿä¸€æ”¾åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“é‡Œè¿›è¡Œç®¡ç†çš„ä¸€ç§ä»“åº“ç»„ç»‡æ–¹å¼ã€‚é€‚åˆå¤šä¸ªé¡¹ç›®å¼ºç›¸å…³ä¸”æœ‰å¤§é‡å…±äº«ä»£ç çš„ä¸­å¤§å‹é¡¹ç›®ã€‚ä½¿ç”¨ Monorepo ç®¡ç†é¡¹ç›®çš„å¥½å¤„éå¸¸æ˜æ˜¾ï¼Œå®ƒä¸ç”¨å‘ npm åŒ…ï¼Œä¸ç”¨æ¥å›åŒæ­¥ç‰ˆæœ¬ï¼Œæ”¹å®Œå…¬å…±åº“ï¼Œæ‰€æœ‰é¡¹ç›®ç«‹å³å¯ç”¨ï¼Œä½¿å¾—å…±äº«ä»£ç æ›´ç®€å•ã€‚
Monorepo æ˜¯å­˜æ”¾å¤šä¸ªåŒ…çš„ä»“åº“ï¼ŒåŒ…ä¹‹é—´çš„é€šä¿¡æ–¹å¼è‡³å…³é‡è¦ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ä¸€ä¸ªäº¤æ˜“é¡¹ç›®ä¸ºä¾‹ï¼Œä¸€æ­¥ä¸€æ­¥äº†è§£ Monorepo å„åŒ…é—´æ­£ç¡®çš„é€šä¿¡æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">äº¤æ˜“å¹³å°é¡¹ç›®ç®€è¿°</h2>
<p>è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªç»™ç”¨æˆ·æä¾›è‚¡ç¥¨äº¤æ˜“æœåŠ¡çš„å¹³å°ã€‚é¡¹ç›®åŒ…æ‹¬äº¤æ˜“ï¼ˆTradeï¼‰ã€èµ„äº§ï¼ˆPortfoliosï¼‰ã€è¡Œæƒ…ï¼ˆQuotesï¼‰ã€å¸‚åœºï¼ˆMarketï¼‰ç­‰æ¨¡å—ã€‚é¡¹ç›®è¿˜æœ‰æä¾›å…¬å…±æ–¹æ³•ã€UIã€æ•°æ®ç­‰å…¬å…±æ¨¡å—ã€‚</p>
<h2 data-id="heading-2">äº¤æ˜“å¹³å°å„åŒ…ä¹‹é—´çš„é€šä¿¡é—®é¢˜</h2>
<h3 data-id="heading-3">åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸åˆç†</h3>
<p>åŒ…ä¹‹é—´å‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œä¸šåŠ¡åŒ…ä¾èµ–ä¸šåŠ¡åŒ…ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">â”œâ”€â”€ <span class="hljs-meta">@repo</span>/shared â†â†’ <span class="hljs-meta">@repo</span>/trade (å¾ªç¯ä¾èµ–)
â”œâ”€â”€ <span class="hljs-meta">@repo</span>/account â†’ <span class="hljs-meta">@repo</span>/trade (ä¸åˆç†)
â”œâ”€â”€ <span class="hljs-meta">@repo</span>/quote â†’ <span class="hljs-meta">@repo</span>/trade (ä¸åˆç†)
â”œâ”€â”€ <span class="hljs-meta">@repo</span>/portfolios â†’ <span class="hljs-meta">@repo</span>/trade (ä¸åˆç†)
â””â”€â”€ ...
</code></pre>
<h3 data-id="heading-4">å°è£…æ€§ç ´åï¼šç›´æ¥è®¿é—®åŒ…å†…éƒ¨å®ç°</h3>
<p>ç›´æ¥å¯¼å…¥å…¶ä»–åŒ…çš„å†…éƒ¨è·¯å¾„</p>
<pre><code class="hljs language-ts" lang="ts">  <span class="hljs-comment">// packages/shared/utils/order.ts</span>
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/data'</span>;
  <span class="hljs-keyword">import</span> { canFillSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/utils'</span>;
  
  <span class="hljs-comment">// packages/shared/reports/modules/trade.ts</span>
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">ECondOrderVerifyParaKey</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@pkg/trade/data/sensors'</span>;
  <span class="hljs-keyword">import</span> { getIsEntrustType } <span class="hljs-keyword">from</span> <span class="hljs-string">'@pkg/trade/utils/type'</span>;
  <span class="hljs-keyword">import</span> { useIndexSession, useNightTradeSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/utils/hooks'</span>;
</code></pre>
<h3 data-id="heading-5">ç´§è€¦åˆï¼šç›´æ¥ä¾èµ–åº”ç”¨å±‚ stores</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">import</span> { useConfigStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/config'</span>;
<span class="hljs-keyword">import</span> { useMarketStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/market.ts'</span>;
<span class="hljs-keyword">import</span> { usePasswordStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/password'</span>;
<span class="hljs-keyword">import</span> { useTradeStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/trade'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>;

<span class="hljs-comment">// packages/trade/utils/verify.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EStatementType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/quote-statement.ts'</span>;

<span class="hljs-comment">// packages/portfolios/components/orders/index.vue</span>
<span class="hljs-keyword">import</span> { useMarketStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/market'</span>;
<span class="hljs-keyword">import</span> { useOrderStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/order'</span>;
</code></pre>
<h2 data-id="heading-6">é¡¹ç›®åŒ…é—´æ­£ç¡®é€šä¿¡æ–¹å¼</h2>
<h3 data-id="heading-7">ä¸€ã€ä¾èµ–å±‚æ¬¡åŸåˆ™</h3>
<h4 data-id="heading-8">1.1 ä¾èµ–å±‚æ¬¡ç»“æ„</h4>
<pre><code class="hljs language-ts" lang="ts">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         apps/web (åº”ç”¨å±‚)            â”‚
â”‚  ä¾èµ–æ‰€æœ‰ä¸šåŠ¡åŒ…ï¼Œè´Ÿè´£ç»„è£…å’Œè·¯ç”±      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸šåŠ¡åŒ… (<span class="hljs-title class_">Business</span>)        â”‚  â”‚   åŸºç¡€åŒ… (<span class="hljs-title class_">Foundation</span>)            â”‚
â”‚  - trade                   â”‚  â”‚  - shared (ä¸ä¾èµ–å…¶ä»–ä¸šåŠ¡åŒ…)     â”‚
â”‚  - account                 â”‚  â”‚  - data-center                  â”‚
â”‚  - quote                   â”‚  â”‚  - ui                            â”‚
â”‚  - portfolios              â”‚  â”‚                                  â”‚
â”‚  - company                 â”‚  â”‚                                  â”‚
â”‚  - market                  â”‚  â”‚                                  â”‚
â”‚  - ...                     â”‚  â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-9">1.2 ä¾èµ–è§„åˆ™</h4>
<h5 data-id="heading-10">âœ… å…è®¸çš„ä¾èµ–æ–¹å‘</h5>
<ol>
<li><strong>åº”ç”¨å±‚</strong> â†’ æ‰€æœ‰åŒ…</li>
<li><strong>ä¸šåŠ¡åŒ…</strong> â†’ åŸºç¡€åŒ…ï¼ˆshared, data-center, uiï¼‰</li>
<li><strong>åŸºç¡€åŒ…</strong> â†’ åªä¾èµ–æ›´åº•å±‚çš„åŸºç¡€åŒ…æˆ–å¤–éƒ¨åº“</li>
<li><strong>shared åŒ…</strong> â†’ ä¸ä¾èµ–ä»»ä½•ä¸šåŠ¡åŒ…</li>
</ol>
<h5 data-id="heading-11">âŒ ç¦æ­¢çš„ä¾èµ–æ–¹å‘</h5>
<ol>
<li><strong>åŸºç¡€åŒ…</strong> â†’ ä¸šåŠ¡åŒ…ï¼ˆå¦‚ shared â†’ tradeï¼‰</li>
<li><strong>ä¸šåŠ¡åŒ…</strong> â†’ ä¸šåŠ¡åŒ…ï¼ˆå¦‚ account â†’ tradeï¼‰</li>
<li><strong>å¾ªç¯ä¾èµ–</strong>ï¼ˆå¦‚ shared â†” tradeï¼‰</li>
</ol>
<h4 data-id="heading-12">1.3 ä¾èµ–å±‚æ¬¡ç¤ºä¾‹</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä¸šåŠ¡åŒ…ä¾èµ–åŸºç¡€åŒ…</span>
<span class="hljs-comment">// packages/trade/package.json</span>
{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"@repo/shared"</span>: <span class="hljs-string">"workspace: "</span> ,
 <span class="hljs-string">"@repo/data-center"</span> :  <span class="hljs-string">"workspace: "</span>,
    <span class="hljs-string">"@repo/ui"</span>: <span class="hljs-string">"workspace:*"</span>
  }
}

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šåŸºç¡€åŒ…ä¾èµ–ä¸šåŠ¡åŒ…</span>
<span class="hljs-comment">// packages/shared/package.json</span>
{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"@repo/trade"</span>: <span class="hljs-string">"workspace:*"</span>  <span class="hljs-comment">// âŒ ä¸åº”è¯¥ä¾èµ–ä¸šåŠ¡åŒ…</span>
  }
}
</code></pre>
<h3 data-id="heading-13">äºŒã€é€šä¿¡æ¨¡å¼</h3>
<h4 data-id="heading-14">2.1 äº‹ä»¶é€šä¿¡æ¨¡å¼ï¼ˆEvent Busï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>åŒ…é—´çš„æ¾è€¦åˆé€šä¿¡</li>
<li>ä¸€å¯¹å¤šçš„é€šçŸ¥åœºæ™¯</li>
<li>å¼‚æ­¥äº‹ä»¶é€šçŸ¥</li>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>å®šä¹‰äº‹ä»¶ç±»å‹ï¼ˆåœ¨ shared åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/events/index.ts</span>
<span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">'mitt'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EEventBusType</span> {
  <span class="hljs-variable constant_">ORDER_SUCCESS</span> = <span class="hljs-string">'orderSuccess'</span>,
  <span class="hljs-variable constant_">USER_LOGIN_SUCCESS</span> = <span class="hljs-string">'userLoginSuccess'</span>,
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TEvents</span> = {
  [<span class="hljs-title class_">EEventBusType</span>.<span class="hljs-property">ORDER_SUCCESS</span>]?: {
    <span class="hljs-attr">orderId</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">orderType</span>: <span class="hljs-built_in">string</span>;
  };
  [<span class="hljs-title class_">EEventBusType</span>.<span class="hljs-property">USER_LOGIN_SUCCESS</span>]?: <span class="hljs-built_in">unknown</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> eventBus = mitt&lt;<span class="hljs-title class_">TEvents</span>&gt;();
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> eventBus;
</code></pre>
<ol start="2">
<li>å‘é€äº‹ä»¶ï¼ˆåœ¨ trade åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/order/index.vue</span>
<span class="hljs-keyword">import</span> eventBus, { <span class="hljs-title class_">EEventBusType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/events'</span>;

<span class="hljs-comment">// ä¸‹å•æˆåŠŸåå‘é€äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleOrderSuccess</span> = (<span class="hljs-params"/>) =&gt; {
  eventBus.<span class="hljs-title function_">emit</span>(<span class="hljs-title class_">EEventBusType</span>.<span class="hljs-property">ORDER_SUCCESS</span>, {
    <span class="hljs-attr">orderId</span>: <span class="hljs-string">'123'</span>,
    <span class="hljs-attr">orderType</span>: <span class="hljs-string">'limit'</span>
  });
};
</code></pre>
<ol start="3">
<li>ç›‘å¬äº‹ä»¶ï¼ˆåœ¨ portfolios åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/portfolios/components/orders/index.vue</span>
<span class="hljs-keyword">import</span> eventBus, { <span class="hljs-title class_">EEventBusType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/events'</span>;
<span class="hljs-keyword">import</span> { onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">orderChangeCallBack</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-comment">// å¤„ç†è®¢å•å˜åŒ–</span>
  <span class="hljs-title function_">refreshOrderList</span>();
};

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">EEventBusType</span>.<span class="hljs-property">ORDER_SUCCESS</span>, orderChangeCallBack);
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-title class_">EEventBusType</span>.<span class="hljs-property">ORDER_SUCCESS</span>, orderChangeCallBack);
});
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>è§£è€¦ï¼šå‘é€è€…å’Œæ¥æ”¶è€…ä¸éœ€è¦ç›´æ¥ä¾èµ–</li>
<li>çµæ´»ï¼šå¯ä»¥åŠ¨æ€æ·»åŠ /ç§»é™¤ç›‘å¬å™¨</li>
<li>æ”¯æŒä¸€å¯¹å¤šé€šä¿¡</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>äº‹ä»¶ç±»å‹å®šä¹‰åº”åœ¨ shared åŒ…ä¸­ï¼Œç¡®ä¿ç±»å‹å®‰å…¨</li>
<li>åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li>äº‹ä»¶åç§°åº”æ¸…æ™°æ˜ç¡®ï¼Œé¿å…å‘½åå†²çª</li>
</ol>
<h4 data-id="heading-15">2.2 æœåŠ¡æ¨¡å¼ï¼ˆSingleton Serviceï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£</li>
<li>è·¨åŒ…å…±äº«æœåŠ¡å®ä¾‹</li>
<li>éœ€è¦å•ä¾‹æ¨¡å¼çš„æœåŠ¡</li>
<li/>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>å®šä¹‰æœåŠ¡ï¼ˆåœ¨ data-center åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/data-center/core/index.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Singleton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/utils/singleton'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataCenter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Singleton</span> {
  <span class="hljs-keyword">static</span> tag = <span class="hljs-string">'DataCenter'</span>;
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getStockInfo</span>(<span class="hljs-params">code: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">// è·å–è‚¡ç¥¨ä¿¡æ¯</span>
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getQuotes</span>(<span class="hljs-params">codes: <span class="hljs-built_in">string</span>[]</span>) {
    <span class="hljs-comment">// è·å–è¡Œæƒ…æ•°æ®</span>
  }
}

<span class="hljs-comment">// 2. å¯¼å‡ºæœåŠ¡</span>
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">DataCenter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./core'</span>;
</code></pre>
<ol start="2">
<li>ä½¿ç”¨æœåŠ¡ï¼ˆåœ¨ä»»ä½•åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/utils/stock.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DataCenter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/data-center'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getStockData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">code: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> dataCenter = <span class="hljs-title class_">DataCenter</span>.<span class="hljs-title function_">getInstance</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> dataCenter.<span class="hljs-title function_">getStockInfo</span>(code);
};
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>ç»Ÿä¸€æ¥å£ï¼šæ‰€æœ‰åŒ…é€šè¿‡ç›¸åŒçš„æ¥å£è®¿é—®æœåŠ¡</li>
<li>å•ä¾‹ä¿è¯ï¼šç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹</li>
<li>æ˜“äºæµ‹è¯•ï¼šå¯ä»¥ mock æœåŠ¡æ¥å£</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>
<p>æœåŠ¡æ¥å£åº”ç¨³å®šï¼Œé¿å…é¢‘ç¹å˜æ›´</p>
</li>
<li>
<p>æœåŠ¡åº”åœ¨ shared æˆ– data-center ç­‰åŸºç¡€åŒ…ä¸­</p>
</li>
<li>
<p>é¿å…åœ¨æœåŠ¡ä¸­ç›´æ¥ä¾èµ–ä¸šåŠ¡åŒ…</p>
</li>
</ol>
<h4 data-id="heading-16">2.3 å…±äº«ç±»å‹å’Œæ¥å£</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>åŒ…é—´ä¼ é€’æ•°æ®</li>
<li>å®šä¹‰å…¬å…±æ¥å£</li>
<li>ç±»å‹çº¦æŸ</li>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>å®šä¹‰å…±äº«ç±»å‹ï¼ˆåœ¨ shared åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/types/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IOrderForm</span> {
  <span class="hljs-attr">stockCode</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">stockName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">entrustType</span>: <span class="hljs-title class_">EEntrustType</span>;
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IMaxAvailableAsset</span> {
  <span class="hljs-attr">cashAvailable</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">marginAvailable</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<ol start="2">
<li>ä½¿ç”¨å…±äº«ç±»å‹ï¼ˆåœ¨ trade åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/order/index.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IOrderForm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/types/order'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">form</span>: <span class="hljs-title class_">IOrderForm</span> = {
  <span class="hljs-attr">stockCode</span>: <span class="hljs-string">'AAPL'</span>,
  <span class="hljs-attr">stockName</span>: <span class="hljs-string">'Apple Inc.'</span>,
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<ol start="3">
<li>ä½¿ç”¨å…±äº«ç±»å‹ï¼ˆåœ¨ portfolios åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/portfolios/components/orders/index.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IOrderForm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/types/order'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">displayOrder</span> = (<span class="hljs-params">order: IOrderForm</span>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨å…±äº«ç±»å‹</span>
};
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>ç±»å‹å®‰å…¨ï¼šTypeScript æä¾›ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥</li>
<li>ä¸€è‡´æ€§ï¼šç¡®ä¿æ•°æ®ç»“æ„ä¸€è‡´</li>
<li>å¯ç»´æŠ¤æ€§ï¼šç±»å‹å®šä¹‰é›†ä¸­ç®¡ç†</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>å…±äº«ç±»å‹åº”åœ¨ shared åŒ…ä¸­å®šä¹‰</li>
<li>é¿å…åœ¨ä¸šåŠ¡åŒ…ä¸­å®šä¹‰å…±äº«ç±»å‹</li>
<li>ç±»å‹å®šä¹‰åº”å‘åå…¼å®¹</li>
</ol>
<h4 data-id="heading-17">2.4 å…¬å…± API å¯¼å‡ºæ¨¡å¼</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>åŒ…éœ€è¦å¯¹å¤–æš´éœ²åŠŸèƒ½</li>
<li>éšè—å†…éƒ¨å®ç°ç»†èŠ‚</li>
<li>æä¾›ç¨³å®šçš„æ¥å£</li>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>å»ºç«‹å…¬å…± APIï¼ˆåœ¨ trade åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/index.ts</span>
<span class="hljs-comment">// å¯¼å‡ºå¸¸é‡</span>
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">EOrderVerify</span>, <span class="hljs-title class_">EOrderErrorCode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./data/constant'</span>;

<span class="hljs-comment">// å¯¼å‡ºå·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">export</span> { canFillSearch, getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;

<span class="hljs-comment">// å¯¼å‡ºç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IOrderForm</span>, <span class="hljs-title class_">IAttachedOrder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./types'</span>;

<span class="hljs-comment">// å¯¼å‡ºç»„ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">OrderPanel</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./order/index.vue'</span>;
</code></pre>
<ol start="2">
<li>ä½¿ç”¨å…¬å…±APIï¼ˆåœ¨å…¶ä»–åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡å…¬å…±APIå¯¼å…¥</span>
<span class="hljs-keyword">import</span> { getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade'</span>;

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥è®¿é—®å†…éƒ¨å®ç°</span>
<span class="hljs-keyword">import</span> { getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/utils'</span>;
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>å°è£…æ€§ï¼šéšè—å†…éƒ¨å®ç°</li>
<li>ç¨³å®šæ€§ï¼šå…¬å…±APIç›¸å¯¹ç¨³å®š</li>
<li>å¯ç»´æŠ¤æ€§ï¼šå†…éƒ¨é‡æ„ä¸å½±å“å¤–éƒ¨ä½¿ç”¨</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>
<p>æ¯ä¸ªåŒ…éƒ½åº”å»ºç«‹ index.ts ä½œä¸ºå…¬å…± API å…¥å£</p>
</li>
<li>
<p>åªå¯¼å‡ºéœ€è¦å¯¹å¤–æš´éœ²çš„åŠŸèƒ½</p>
</li>
<li>
<p>é¿å…å¯¼å‡ºå†…éƒ¨å®ç°ç»†èŠ‚</p>
</li>
</ol>
<h4 data-id="heading-18">2.5 ä¾èµ–æ³¨å…¥æ¨¡å¼</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>éœ€è¦è§£è€¦ stores ä¾èµ–</li>
<li>æé«˜å¯æµ‹è¯•æ€§</li>
<li>æ”¯æŒä¸åŒçš„å®ç°</li>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>å®šä¹‰æ¥å£ï¼ˆåœ¨ shared åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/interfaces/stores.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUserStore</span> {
  <span class="hljs-attr">logined</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">customerInfo</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">goLogin</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IConfigStore</span> {
  <span class="hljs-attr">urlsConfig</span>: {
    <span class="hljs-attr">acOpen</span>: <span class="hljs-built_in">string</span>;
  };
}
</code></pre>
<ol start="2">
<li>é€šè¿‡å‚æ•°æ³¨å…¥ï¼ˆåœ¨ shared åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IUserStore</span>, <span class="hljs-title class_">IConfigStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/interfaces/stores'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">preVerify</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">
  userStore: IUserStore,
  configStore: IConfigStore
</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">logined</span>) {
    userStore.<span class="hljs-title function_">goLogin</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-comment">// ...</span>
};
</code></pre>
<ol start="3">
<li>åœ¨åº”ç”¨å±‚æ³¨å…¥ä¾èµ–ï¼ˆåœ¨ apps/web ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// apps/web/src/views/trade/index.vue</span>
<span class="hljs-keyword">import</span> { preVerify } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/utils/order'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>;
<span class="hljs-keyword">import</span> { useConfigStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/config'</span>;

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();
<span class="hljs-keyword">const</span> configStore = <span class="hljs-title function_">useConfigStore</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePreVerify</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">preVerify</span>(userStore, configStore);
};
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>è§£è€¦ï¼šåŒ…ä¸ç›´æ¥ä¾èµ– stores</li>
<li>å¯æµ‹è¯•ï¼šå¯ä»¥è½»æ¾ mock ä¾èµ–</li>
<li>çµæ´»ï¼šæ”¯æŒä¸åŒçš„å®ç°</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>
<p>æ¥å£å®šä¹‰åº”åœ¨ shared åŒ…ä¸­</p>
</li>
<li>
<p>ä¾èµ–æ³¨å…¥ä¼šå¢åŠ è°ƒç”¨å¤æ‚åº¦</p>
</li>
<li>
<p>é€‚åˆå¤æ‚åœºæ™¯ï¼Œç®€å•åœºæ™¯å¯ç›´æ¥ä½¿ç”¨</p>
</li>
</ol>
<h4 data-id="heading-19">2.6 API Linker æ¨¡å¼</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ol>
<li>é€šè¿‡ URL å‚æ•°è°ƒç”¨ API</li>
<li>è·¨é¡µé¢é€šä¿¡</li>
<li>å¤–éƒ¨ç³»ç»Ÿé›†æˆ</li>
</ol>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ol>
<li>æ³¨å†Œ APIï¼ˆåœ¨ trade åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/utils/api-linker.ts</span>
<span class="hljs-keyword">import</span> apiLinker <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/app/router/api-linker'</span>;

apiLinker.<span class="hljs-title function_">registerLinkerApi</span>({
  <span class="hljs-attr">openTradePanel</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">params</span>: { <span class="hljs-attr">stockCode</span>: <span class="hljs-built_in">string</span> }) =&gt; {
    <span class="hljs-comment">// æ‰“å¼€äº¤æ˜“é¢æ¿</span>
  },
  <span class="hljs-attr">submitOrder</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">params</span>: <span class="hljs-title class_">IOrderForm</span>) =&gt; {
    <span class="hljs-comment">// æäº¤è®¢å•</span>
  }
});
</code></pre>
<ol start="2">
<li>åˆ›å»º API é“¾æ¥ï¼ˆåœ¨å…¶ä»–åŒ…ä¸­ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/company/components/stock-card/index.vue</span>
<span class="hljs-keyword">import</span> apiLinker <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/app/router/api-linker'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">openTrade</span> = (<span class="hljs-params">stockCode: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> url = apiLinker.<span class="hljs-title function_">createApiLink</span>(<span class="hljs-string">'/trade'</span>, {
    <span class="hljs-attr">apiNames</span>: [<span class="hljs-string">'openTradePanel'</span>],
    <span class="hljs-attr">apiOptions</span>: {
      <span class="hljs-attr">openTradePanel</span>: { stockCode }
    }
  });
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url);
};
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>è·¨é¡µé¢é€šä¿¡</li>
<li>æ”¯æŒå¤–éƒ¨ç³»ç»Ÿé›†æˆ</li>
<li>è§£è€¦é¡µé¢é—´ä¾èµ–</li>
</ol>
<h3 data-id="heading-20">ä¸‰ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">3.1 åŒ…å†…å¯¼å…¥è§„åˆ™</h4>
<h5 data-id="heading-22"><em>âœ… æ­£ç¡®ï¼šåŒ…å†…ä½¿ç”¨ç›¸å¯¹è·¯å¾„</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/utils/verify.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../data/constant'</span>;
<span class="hljs-keyword">import</span> { canFillSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common'</span>;
</code></pre>
<h5 data-id="heading-23"><em>âŒ é”™è¯¯ï¼šåŒ…å†…ä½¿ç”¨åŒ…åè·¯å¾„</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/data/constant'</span>;

<span class="hljs-comment">// è®¨è®ºï¼šæ˜¯å¦å¯ä»¥ä½¿ç”¨ @pkg/trade</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">' @pkg/trade/data/constant'</span>;
</code></pre>
<h5 data-id="heading-24"><em>âœ… æ­£ç¡®ï¼šè·¨åŒ…ä½¿ç”¨åŒ…åè·¯å¾„</em></h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// packages/account/index.vue</span>
<span class="hljs-keyword">import</span> { getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade'</span>;
<span class="hljs-keyword">import</span> { eventBus } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/events'</span>;
</code></pre>
<h4 data-id="heading-25">3.2 ç±»å‹å®šä¹‰è§„åˆ™</h4>
<h5 data-id="heading-26"><em>âœ… æ­£ç¡®ï¼šå…±äº«ç±»å‹åœ¨ shared åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/types/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IOrderForm</span> {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h5 data-id="heading-27"><em>âœ… æ­£ç¡®ï¼šä¸šåŠ¡ç‰¹å®šç±»å‹åœ¨ä¸šåŠ¡åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/types/condition.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IConditionOrder</span> {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-28">3.3 å¸¸é‡å®šä¹‰è§„åˆ™</h4>
<h5 data-id="heading-29"><em>âœ… æ­£ç¡®ï¼šé€šç”¨å¸¸é‡åœ¨ shared åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/constant/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EEntrustType</span> {
  <span class="hljs-variable constant_">LIMIT</span> = <span class="hljs-number">1</span>,
  <span class="hljs-variable constant_">MARKET</span> = <span class="hljs-number">2</span>,
}
</code></pre>
<h5 data-id="heading-30"><em>âœ… æ­£ç¡®ï¼šä¸šåŠ¡ç‰¹å®šå¸¸é‡åœ¨ä¸šåŠ¡åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/data/constant.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EOrderVerify</span> {
  <span class="hljs-variable constant_">NOT_LOGIN</span> = <span class="hljs-string">'not_login'</span>,
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-31">3.4 å·¥å…·å‡½æ•°è§„åˆ™</h4>
<h5 data-id="heading-32"><em>âœ… æ­£ç¡®ï¼šé€šç”¨å·¥å…·å‡½æ•°åœ¨ shared åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">isTrue</span> = (<span class="hljs-params">flag: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-comment">// é€šç”¨é€»è¾‘</span>
};
</code></pre>
<h5 data-id="heading-33"><em>âœ… æ­£ç¡®ï¼šä¸šåŠ¡ç‰¹å®šå·¥å…·å‡½æ•°åœ¨ä¸šåŠ¡åŒ…ä¸­</em></h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/utils/verify.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">verifyOrder</span> = (<span class="hljs-params">order: IOrderForm</span>) =&gt; {
  <span class="hljs-comment">// ä¸šåŠ¡ç‰¹å®šé€»è¾‘</span>
};
</code></pre>
<h3 data-id="heading-34">å››ã€é€šä¿¡æ¨¡å¼é€‰æ‹©æŒ‡å—</h3>








































<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨èæ¨¡å¼</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>é€šçŸ¥å…¶ä»–åŒ…æŸä¸ªäº‹ä»¶å‘ç”Ÿ</td><td>äº‹ä»¶é€šä¿¡</td><td>è®¢å•æˆåŠŸã€ç™»å½•æˆåŠŸ</td></tr><tr><td>è·å–å…±äº«æ•°æ®</td><td>æœåŠ¡æ¨¡å¼</td><td>è·å–è‚¡ç¥¨ä¿¡æ¯ã€è¡Œæƒ…æ•°æ®</td></tr><tr><td>ä¼ é€’æ•°æ®</td><td>å…±äº«ç±»å‹</td><td>è®¢å•è¡¨å•ã€ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td>è°ƒç”¨å…¶ä»–åŒ…åŠŸèƒ½</td><td>å…¬å…± API</td><td>å·¥å…·å‡½æ•°ã€ç»„ä»¶</td></tr><tr><td>éœ€è¦è§£è€¦ stores</td><td>ä¾èµ–æ³¨å…¥</td><td>éªŒè¯å‡½æ•°ã€å·¥å…·å‡½æ•°</td></tr><tr><td>è·¨é¡µé¢é€šä¿¡</td><td>API Linker</td><td>æ‰“å¼€äº¤æ˜“é¢æ¿</td></tr></tbody></table>
<h3 data-id="heading-35">äº”ã€é‡æ„å»ºè®®</h3>
<h4 data-id="heading-36">5.1 è§£å†³å¾ªç¯ä¾èµ–</h4>
<p><strong>æ­¥éª¤1ï¼šè¯†åˆ«å…±äº«å†…å®¹</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ‰¾å‡º shared åŒ…ä¸­ä½¿ç”¨çš„ trade åŒ…å†…å®¹</span>
<span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/data'</span>;  <span class="hljs-comment">// éœ€è¦ç§»åˆ°shared</span>
<span class="hljs-keyword">import</span> { canFillSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade/utils'</span>; <span class="hljs-comment">// éœ€è¦ç§»åˆ°shared</span>
</code></pre>
<p><strong>æ­¥éª¤2ï¼šè¿ç§»åˆ° shared åŒ…</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/constant/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EOrderVerify</span> {
  <span class="hljs-variable constant_">NOT_LOGIN</span> = <span class="hljs-string">'not_login'</span>,
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">canFillSearch</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-comment">// å®ç°é€»è¾‘</span>
};
</code></pre>
<p><strong>æ­¥éª¤3ï¼šæ›´æ–°å¼•ç”¨</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/utils/verify.ts</span>
<span class="hljs-comment">// ä» shared åŒ…å¯¼å…¥</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EOrderVerify</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/constant/order'</span>;
<span class="hljs-keyword">import</span> { canFillSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/utils/order'</span>;
</code></pre>
<p><strong>æ­¥éª¤4ï¼šç§»é™¤ä¾èµ–</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/package.json</span>
{
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-comment">// ç§»é™¤ "@repo/trade": "workspace:*"</span>
  }
</code></pre>
<h4 data-id="heading-37">5.2 å»ºç«‹å…¬å…± API</h4>
<p><strong>æ­¥éª¤1ï¼šåœ¨å„åŒ…çš„æ ¹ç›®å½•åˆ›å»º index.ts</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/trade/index.ts</span>
<span class="hljs-comment">// å¯¼å‡ºå¸¸é‡</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./data/constant'</span>;

<span class="hljs-comment">// å¯¼å‡ºå·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">export</span> { canFillSearch } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/verify'</span>;
<span class="hljs-keyword">export</span> { getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/config'</span>;

<span class="hljs-comment">// å¯¼å‡ºç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IOrderForm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./types'</span>;

<span class="hljs-comment">// å¯¼å‡ºç»„ä»¶ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">OrderPanel</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./order/index.vue'</span>;
</code></pre>
<p><strong>æ­¥éª¤2ï¼šæ›´æ–°å¼•ç”¨</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/account/index.vue ï¼ˆaccount åŒ…ï¼‰</span>
<span class="hljs-comment">// å…¶ä»–åŒ…é€šè¿‡ trade åŒ…çš„å…¬å…± API è®¿é—®</span>
<span class="hljs-keyword">import</span> { getOpenAccountUrl } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/trade'</span>;
</code></pre>
<h4 data-id="heading-38">5.3 è§£è€¦ stores ä¾èµ–</h4>
<p><strong>æ­¥éª¤1ï¼šå®šä¹‰æ¥å£</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/interfaces/stores.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUserStore</span> {
  <span class="hljs-attr">logined</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">customerInfo</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-attr">goLogin</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}
</code></pre>
<p><strong>æ­¥éª¤2ï¼šä¿®æ”¹å‡½æ•°ç­¾å</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// packages/shared/utils/order.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IUserStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/interfaces/stores'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">preVerify</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userStore: IUserStore</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">logined</span>) {
    userStore.<span class="hljs-title function_">goLogin</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
<span class="hljs-comment">// ... </span>
</code></pre>
<p><strong>æ­¥éª¤3ï¼šåœ¨åº”ç”¨å±‚æ³¨å…¥</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// apps/web/src/views/trade/index.vue</span>
<span class="hljs-keyword">import</span> { preVerify } <span class="hljs-keyword">from</span> <span class="hljs-string">'@repo/shared/utils/order'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>;

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();
<span class="hljs-keyword">await</span> <span class="hljs-title function_">preVerify</span>(userStore);
</code></pre>
<h3 data-id="heading-39">å…­ã€æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨æ·»åŠ æ–°çš„åŒ…é—´é€šä¿¡æ—¶ï¼Œè¯·æ£€æŸ¥ï¼š</p>
<ul>
<li>æ˜¯å¦éµå¾ªä¾èµ–å±‚æ¬¡åŸåˆ™ï¼Ÿ</li>
<li>æ˜¯å¦é¿å…äº†å¾ªç¯ä¾èµ–ï¼Ÿ</li>
<li>æ˜¯å¦ä½¿ç”¨äº†åˆé€‚çš„é€šä¿¡æ¨¡å¼ï¼Ÿ</li>
<li>å…±äº«ç±»å‹æ˜¯å¦åœ¨ shared åŒ…ä¸­ï¼Ÿ</li>
<li>æ˜¯å¦å»ºç«‹äº†å…¬å…± APIï¼Ÿ</li>
<li>æ˜¯å¦é¿å…äº†ç›´æ¥è®¿é—®å†…éƒ¨å®ç°ï¼Ÿ</li>
<li>æ˜¯å¦é¿å…äº†ç›´æ¥ä¾èµ– storesï¼Ÿ</li>
<li>äº‹ä»¶ç›‘å¬å™¨æ˜¯å¦åŠæ—¶æ¸…ç†ï¼Ÿ</li>
</ul>
<h3 data-id="heading-40">ä¸ƒã€æ€»ç»“</h3>
<p>æ­£ç¡®çš„åŒ…é—´é€šä¿¡åº”è¯¥æ˜¯ï¼š</p>
<ol>
<li>
<p><strong>éµå¾ªä¾èµ–å±‚æ¬¡</strong>ï¼šåŸºç¡€åŒ…ä¸ä¾èµ–ä¸šåŠ¡åŒ…</p>
</li>
<li>
<p><strong>ä½¿ç”¨åˆé€‚çš„é€šä¿¡æ¨¡å¼</strong>ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©äº‹ä»¶ã€æœåŠ¡ã€ç±»å‹ç­‰</p>
</li>
<li>
<p><strong>å»ºç«‹å…¬å…± API</strong>ï¼šé€šè¿‡ index.ts å¯¼å‡ºï¼Œéšè—å†…éƒ¨å®ç°</p>
</li>
<li>
<p><strong>å…±äº«ç±»å‹å’Œå¸¸é‡</strong>ï¼šåœ¨ shared åŒ…ä¸­å®šä¹‰</p>
</li>
<li>
<p><strong>è§£è€¦ stores</strong>ï¼šé€šè¿‡ä¾èµ–æ³¨å…¥æˆ–æ¥å£</p>
</li>
<li>
<p><strong>åŠæ—¶æ¸…ç†èµ„æº</strong>ï¼šäº‹ä»¶ç›‘å¬å™¨ç­‰</p>
</li>
</ol>
<p>éµå¾ªè¿™äº›åŸåˆ™ï¼Œå¯ä»¥ç¡®ä¿åŒ…é—´çš„æ¾è€¦åˆã€é«˜å†…èšï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é«˜æ–¯æ³¼æº…ã€‘ç ´è§£å¤§è§„æ¨¡3DGSè½åœ°å¡ç‚¹ï¼šé«˜æ•ˆæ•°æ®ç»„ç»‡è®©â€œæœ€åä¸€å…¬é‡Œâ€å˜å¦é€”]]></title>    <link>https://juejin.cn/post/7590597231708258339</link>    <guid>https://juejin.cn/post/7590597231708258339</guid>    <pubDate>2026-01-04T01:54:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590597231708258339" data-draft-id="7590292192989691944" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é«˜æ–¯æ³¼æº…ã€‘ç ´è§£å¤§è§„æ¨¡3DGSè½åœ°å¡ç‚¹ï¼šé«˜æ•ˆæ•°æ®ç»„ç»‡è®©â€œæœ€åä¸€å…¬é‡Œâ€å˜å¦é€”â€‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-04T01:54:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mapmost"/> <meta itemprop="url" content="https://juejin.cn/user/1679709496936343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é«˜æ–¯æ³¼æº…ã€‘ç ´è§£å¤§è§„æ¨¡3DGSè½åœ°å¡ç‚¹ï¼šé«˜æ•ˆæ•°æ®ç»„ç»‡è®©â€œæœ€åä¸€å…¬é‡Œâ€å˜å¦é€”â€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1679709496936343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mapmost
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-04T01:54:35.000Z" title="Sun Jan 04 2026 01:54:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»åˆ†åŒºè®­ç»ƒåˆ°æµå¼æœåŠ¡çš„æœ€åä¸€å…¬é‡Œ</h2>
<p>åœ¨3DGSä¸“æ ä¸‹çš„<a href="https://juejin.cn/post/7583892482599370767" target="_blank" title="https://juejin.cn/post/7583892482599370767">ã€ŠMapmoståˆ†åŒºè®­ç»ƒï¼š è®©å¤§åœºæ™¯3DGSçš„å»ºæ¨¡ä»æ­¤é«˜æ•ˆä¸”é«˜è´¨ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å‰–æäº†3DGSåœ¨åº”å¯¹å¤§åœ°ç†èŒƒå›´åœºæ™¯æ—¶æ‰€é¢ä¸´çš„æ˜¾å­˜ä¸è®­ç»ƒæ•ˆç‡æŒ‘æˆ˜ï¼Œå¹¶æå‡ºé€šè¿‡<strong>ç©ºé—´åˆ†æ²»ç­–ç•¥</strong>å®ç°å¯æ‰©å±•å»ºæ¨¡ã€‚</p>
<p>ç„¶è€Œï¼Œå»ºæ¨¡åªæ˜¯èµ·ç‚¹ï¼Œ<strong>é«˜æ•ˆä½¿ç”¨æ‰æ˜¯å…³é”®</strong>ã€‚å½“ç”¨æˆ·æœŸæœ›åœ¨Webæµè§ˆå™¨ä¸­æµç•…æ¢ç´¢è¿™äº›è¶…å¤§è§„æ¨¡åœºæ™¯æ—¶ï¼Œæ–°çš„éš¾é¢˜éšä¹‹è€Œæ¥ï¼š<strong>å¦‚ä½•è®©æ¶ˆè´¹çº§æ˜¾å¡ç”šè‡³ç§»åŠ¨è®¾å¤‡ï¼Œä¹Ÿèƒ½ä¸æ»‘æ¸²æŸ“è¿œè¶…æœ¬åœ°æ˜¾å­˜å®¹é‡çš„3DGSæ¨¡å‹ï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d399c7993b4bcfa81ee7a397d15256~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=y7dgBP%2FzJiNHSMn4FbttJkrS4K8%3D" alt="" loading="lazy"/></p>
<p><em>å¤§è§„æ¨¡3DGSæ¨¡å‹éœ€åœ¨Webç«¯æµç•…æ¸²æŸ“</em></p>
<p>è¿™ä¸€é—®é¢˜çš„ç­”æ¡ˆæŒ‡å‘<strong>æœåŠ¡åŒ–å‘å¸ƒ</strong>â€”â€”æœ¬è´¨ä¸Šæ˜¯ä¸€å¥—æ¶µç›–<strong>æ•°æ®ç»„ç»‡ã€ç½‘ç»œä¼ è¾“ä¸å®¢æˆ·ç«¯æ¸²æŸ“</strong>çš„å…¨é“¾è·¯ååŒä¼˜åŒ–ç³»ç»Ÿå·¥ç¨‹ã€‚</p>
<p>è€Œæœ¬æ–‡å°†èšç„¦å…¶ä¸­æœ€åŸºç¡€å´è‡³å…³é‡è¦çš„ç¯èŠ‚ï¼š<strong>æ•°æ®ä¾§çš„é«˜æ•ˆç»„ç»‡</strong>ã€‚å€Ÿé‰´å€¾æ–œæ‘„å½±æ¨¡å‹çš„å‘å±•è·¯å¾„ï¼Œæˆ‘ä»¬å°†å›´ç»•<strong>ç©ºé—´ç´¢å¼•æ„å»º</strong>ä¸<strong>å¤šç»†èŠ‚å±‚æ¬¡(LOD)åˆ’åˆ†</strong>ä¸¤å¤§æ ¸å¿ƒï¼Œæ¢è®¨é¢å‘å¤§è§„æ¨¡3DGSçš„æ•°æ®ç»“æ„è®¾è®¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d6f4a0eff134f8fa84498004a750cc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=qEtWcdJkbLS06Os753igTkXI3O0%3D" alt="" loading="lazy"/></p>
<p><em>ç©ºé—´ç½‘æ ¼æ„å»ºä¸ç»†èŠ‚å±‚çº§åˆ’åˆ†</em></p>
<h2 data-id="heading-1">åˆ†å—åŒ–ç©ºé—´ç´¢å¼•ï¼šå°†å…¨å±€åœºæ™¯æ‹†è§£ä¸ºâ€œæ•°æ®ç –å—â€</h2>
<h3 data-id="heading-2">01.åˆ†å—ç´¢å¼•çš„å…³é”®ç‰¹æ€§</h3>
<p>è¦å®ç°å¤§è§„æ¨¡3DGSåœºæ™¯çš„æœåŠ¡åŒ–å‘å¸ƒï¼Œæ„å‘³ç€æˆ‘ä»¬å¿…é¡»å°†ä¸€ä¸ªåŠ¨è¾„æ•°åGBçš„â€œåºç„¶å¤§ç‰©â€ï¼Œæ‹†è§£ä¸ºä¸€ç³»åˆ—<strong>ç©ºé—´æœ‰åºã€ç²’åº¦åˆç†ã€å¯ç‹¬ç«‹è°ƒåº¦</strong>çš„**â€œæ•°æ®ç –å—â€**ã€‚</p>
<p>è¿™ç§<strong>æ•°æ®åˆ†å—ç­–ç•¥</strong>çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯é€šè¿‡ç©ºé—´é€»è¾‘åˆ‡å‰²ï¼Œä½¿æ¯ä¸ªå•å…ƒå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>**å¤§å°å‡è¡¡ï¼š**ä¾¿äºç½‘ç»œä¼ è¾“ä¸å†…å­˜ç®¡ç†ï¼›</li>
<li>**è¯­ä¹‰å±€éƒ¨æ€§ï¼š**å•ä¸ªå—å†…åŒ…å«å®Œæ•´çš„å‡ ä½•ä¸å¤–è§‚ä¿¡æ¯ï¼›</li>
<li>**åµŒå…¥ç©ºé—´ç´¢å¼•ï¼š**æ¯ä¸ªå—å¯åŸºäºå±‚æ¬¡åŒ–ç´¢å¼•ç»“æ„å¿«é€ŸæŸ¥è¯¢ï¼›</li>
<li>**å¯ç‹¬ç«‹åŠ è½½ä¸å‰”é™¤ï¼š**æ”¯æŒæŒ‰éœ€æµå¼æ¸²æŸ“ã€‚</li>
</ul>
<p>å…¶ä»·å€¼ç›´æ¥å¯¹åº”ä¸‰å¤§å·¥ç¨‹ç—›ç‚¹ï¼š</p>
<ul>
<li>**çªç ´ç½‘ç»œç“¶é¢ˆï¼š**é¿å…ä¸€æ¬¡æ€§ä¼ è¾“GBçº§æ–‡ä»¶ï¼Œå®ç°â€œæ‰€è§å³æ‰€ä¼ â€ï¼›</li>
<li>**ç¼“è§£æ˜¾å­˜å‹åŠ›ï¼š**è¿è¡Œæ—¶ä»…é©»ç•™è§†åŸŸå†…æ•°æ®ï¼Œå†…å­˜å ç”¨é™ä½90%ä»¥ä¸Šï¼›</li>
<li>**æ¶ˆé™¤åŠ è½½å¡é¡¿ï¼š**å°å—å¹¶è¡Œé¢„åŠ è½½ï¼Œé¦–å±æ¸²æŸ“ä»åˆ†é’Ÿçº§ç¼©çŸ­è‡³ç§’çº§ã€‚</li>
</ul>
<h3 data-id="heading-3">02.ç°æœ‰ç©ºé—´æ•°æ®ç»„ç»‡èŒƒå¼</h3>
<p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨æ™ºæ…§åŸå¸‚ä¸é«˜ç²¾åœ°å›¾ç­‰éœ€æ±‚æ¨åŠ¨ä¸‹ï¼Œä¸šç•Œå·²å‘å±•å‡ºä¸¤ç±»æˆç†Ÿçš„ç©ºé—´æ•°æ®ç»„ç»‡èŒƒå¼ï¼š</p>
<ul>
<li>**å±€éƒ¨ç²¾ç»†åœºæ™¯ï¼š**ä»¥Cesium 3D Tilesä¸ºä»£è¡¨ï¼Œé€šè¿‡å››å‰æ ‘/å…«å‰æ ‘æ„å»ºå¸¦LODçš„tileæ ‘ï¼Œç»“åˆè§†é”¥å‰”é™¤ä¸å±å¹•ç©ºé—´è¯¯å·®(SSE)å®ç°é«˜æ•ˆè°ƒåº¦ï¼›</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30678ed313b84d689dd533fa1cc10a7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=UyJOYl%2BLBXcL2mqbINqDsndxTLg%3D" alt="" loading="lazy"/></p>
<p><em>3D Tilesç»“æ„æ ‘</em></p>
<ul>
<li>**å…¨çƒå°ºåº¦è¦†ç›–ï¼š**é‡‡ç”¨ å…¨çƒåœ°ç†ç“¦ç‰‡ä½“ç³»(å¦‚åŒ—æ–—ç½‘æ ¼ã€Google S2ã€Uber H3æˆ–OGCå…¨çƒç“¦ç‰‡è§„èŒƒ)ï¼Œå°†åœ°çƒè¡¨é¢åˆ’åˆ†ä¸ºå¤šå±‚çº§è§„åˆ™ç½‘æ ¼ï¼Œæ”¯æŒè·¨åŸå¸‚ç”šè‡³å…¨çƒèŒƒå›´çš„æ— ç¼ç´¢å¼•ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d85d4fff9ab44829da056eca4ab8b99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=mabI%2BgIbOfNZky3dlovAFHKWWfM%3D" alt="" loading="lazy"/></p>
<p><em>åŸºäºç“¦ç‰‡çš„åœ°å›¾ç»„ç»‡æ–¹å¼</em></p>
<p>è¿™äº›æ¡†æ¶çš„å…±åŒä¼˜åŠ¿åœ¨äº<strong>ä¸åº•å±‚å‡ ä½•è¡¨ç¤ºè§£è€¦</strong>ï¼šåªè¦å°†æ•°æ®æŒ‰ç©ºé—´åŒºåŸŸåˆ†å—ï¼Œå¹¶æä¾›å¯¹åº”çš„åŒ…å›´ä½“æˆ–åœ°ç†è¾¹ç•Œï¼Œæ— è®ºæ˜¯ä¸‰è§’ç½‘æ ¼ã€æ¿€å…‰ç‚¹äº‘ï¼Œè¿˜æ˜¯3DGSä¸­çš„é«˜æ–¯æ¤­çƒï¼Œå‡å¯æ¥å…¥ç»Ÿä¸€çš„ç´¢å¼•ä¸è°ƒåº¦ä½“ç³»ï¼Œä¸ºå¤§è§„æ¨¡3DGSçš„æµå¼æœåŠ¡å¥ å®šåŸºç¡€ã€‚</p>
<h2 data-id="heading-4">å¤šç»†èŠ‚å±‚æ¬¡ï¼šç»™æ¨¡å‹åš"æ™ºèƒ½ç˜¦èº«"ï¼Œè¿œè¿‘çš†å®œ</h2>
<h3 data-id="heading-5">01.åˆ†å¤šç»†èŠ‚å±‚æ¬¡æ„å»ºçš„å¿…è¦æ€§</h3>
<p>å¤šç»†èŠ‚å±‚æ¬¡(Level of Detail, LOD)çš„æ ¸å¿ƒæ€æƒ³æ˜¯ â€œè¿‘å¤„ç²¾ç»†ã€è¿œå¤„ç®€åŒ–â€ â€”â€”æ ¹æ®ç›¸æœºè·ç¦»ä¸è§†è§‰è´¡çŒ®åŠ¨æ€è°ƒæ•´æ¨¡å‹å¤æ‚åº¦ï¼Œé¿å…å°†å®è´µç®—åŠ›æµªè´¹åœ¨äººçœ¼æ— æ³•æ„ŸçŸ¥çš„ç»†èŠ‚ä¸Šã€‚</p>
<p>å¯¹äº3DGSè€Œè¨€ï¼Œè‹¥å…¨åœºæ™¯ç»Ÿä¸€ä½¿ç”¨æœ€é«˜ç²¾åº¦ï¼Œå°†é¢ä¸´ä¸¤å¤§å…³é”®æŒ‘æˆ˜ï¼š</p>
<ul>
<li>**è§†è§‰å†—ä½™ï¼š**è¿œå¤„é«˜æ–¯ç‚¹å¯†åº¦è¿‡é«˜ï¼Œä½†å•ä¸ªç‚¹åœ¨å±å¹•ä¸Šçš„è¦†ç›–ç‡æä½ï¼Œäººçœ¼éš¾ä»¥åˆ†è¾¨ï¼›</li>
<li>**è®¡ç®—æµªè´¹ï¼š**å¤§é‡è¿œç«¯é«˜æ–¯ä»å‚ä¸å…‰æ …åŒ–ï¼Œå´ä»…è´¡çŒ®é›¶æ˜Ÿåƒç´ ï¼Œä¸¥é‡æ‹–ç´¯æ¸²æŸ“å¸§ç‡ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæ„å»ºé«˜æ•ˆçš„LODä½“ç³»ï¼Œæˆä¸ºå¤§è§„æ¨¡3DGSæµå¼æœåŠ¡çš„å…³é”®ä¸€ç¯ã€‚</p>
<h3 data-id="heading-6">02.ç°æœ‰æŠ€æœ¯ç›˜ç‚¹ï¼šåˆå¹¶ä¸æŠ½ç¨€</h3>
<p><strong><em>1. é«˜æ–¯æ¤­çƒåˆå¹¶</em></strong></p>
<p>è¿™æ˜¯ç›®å‰è¾ƒä¸ºä¸»æµçš„å±‚æ¬¡åŒ–å‹ç¼©æ€è·¯ã€‚å…¶æ ¸å¿ƒæ˜¯å°†<strong>ç©ºé—´é‚»è¿‘ã€è§†è§‰ç›¸ä¼¼</strong>çš„ä¸€ç»„é«˜æ–¯æ¤­çƒï¼Œ<strong>èåˆä¸ºä¸€ä¸ªæ›´å…·ä»£è¡¨æ€§çš„ç»¼åˆæ¤­çƒ</strong>ï¼Œåœ¨è§†è§‰å½±å“å°½å¯èƒ½å°çš„å‰æä¸‹æ˜¾è‘—é™ä½æ•°æ®å¯†åº¦ã€‚</p>
<ul>
<li>
<p>**èåˆé€»è¾‘ï¼š**ä¸ä»…è€ƒè™‘ä½ç½®ã€å°ºå¯¸ï¼Œè¿˜å…¼é¡¾é¢œè‰²ã€åæ–¹å·®æ–¹å‘ä¸ä¸é€æ˜åº¦çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿åˆå¹¶åçš„æ¤­çƒèƒ½æœ‰æ•ˆâ€œä»£ç†â€åŸå§‹ç¾¤ä½“çš„è¾å°„è´¡çŒ®ï¼›</p>
</li>
<li>
<p><strong>ä¼˜åŠ¿ï¼š<strong>åˆå¹¶é€šè¿‡</strong>å‚æ•°é‡æ‹Ÿåˆ</strong>ï¼Œåœ¨å‡å°‘æ•°é‡çš„åŒæ—¶ä¿ç•™äº†åŒºåŸŸæ•´ä½“çš„å…‰åº¦ä¸å‡ ä½•ç‰¹å¾ï¼Œæ›´é€‚åˆå¤„ç†é«˜æ–¯å¯†é›†ã€çº¹ç†è¿ç»­çš„åŒºåŸŸã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/647f95b6a20e4da89b5c017595dfa9c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=aAIC8SAKP65A2n2XyI80hEFF9lo%3D" alt="" loading="lazy"/></p>
<p><em>é«˜æ–¯æ¤­çƒåˆå¹¶ç¤ºæ„å›¾ï¼ˆAHierarchical 3D Gaussian Representation for Real-Time Rendering of Very Large Datasetsï¼‰</em></p>
<p><strong><em>2. ç»“æ„åŒ–æŠ½ç¨€</em></strong></p>
<p>ä¸åŒäºâ€œä»¥åˆä»£ç®€â€çš„æ€è·¯ï¼Œç»“æ„åŒ–æŠ½ç¨€é‡‡ç”¨é‡è¦æ€§é©±åŠ¨çš„å‰ªæç­–ç•¥ï¼Œé€šè¿‡è¯„ä¼°æ¯ä¸ªé«˜æ–¯ç‚¹å¯¹æœ€ç»ˆå›¾åƒçš„è´¡çŒ®åº¦ï¼Œæœ‰é€‰æ‹©åœ°ç§»é™¤å†—ä½™é¡¹ã€‚</p>
<ul>
<li>**è¯„ä¼°æŒ‡æ ‡ï¼š**åŸºäºæ¢¯åº¦ã€é€æ˜åº¦ã€è§†è·è´¡çŒ®åº¦ç»™æ¯ä¸ªé«˜æ–¯ç‚¹è¯„åˆ†ï¼›</li>
<li>**åŠ¨æ€è£å‰ªï¼š**ç§»é™¤ä½åˆ†å†—ä½™ç‚¹ï¼Œä¿ç•™è§†è§‰å…³é”®ç‰¹å¾ï¼›</li>
<li>**ä¼˜åŠ¿ï¼š**åœ¨ç›¸åŒå‹ç¼©ç‡ä¸‹ï¼Œ<strong>ç»“æ„ä¿¡æ¯ä¿ç•™æ›´å®Œæ•´</strong>ï¼Œå»ºç­‘è¾¹ç¼˜æ›´æ¸…æ™°ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a7bb9950b444234bbf0c26e7bcd90ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=kSu4Nj7ozjZZOkmMq%2B94uYpgK54%3D" alt="" loading="lazy"/></p>
<p><em>é‡è¦æ€§é©±åŠ¨çš„3DGSå‰ªæç¤ºæ„å›¾ï¼ˆLightGaussian: Unbounded 3D Gaussian Compression with 15x Reduction and 200+ FPSï¼‰</em></p>
<h2 data-id="heading-7">Mapmosté«˜æ–¯æ³¼æº…å»ºæ¨¡å¹³å°ï¼šä¸€é”®å‘å¸ƒï¼Œé«˜æ•ˆæœåŠ¡</h2>
<p>åœ¨å¯ç¦»çº¿éƒ¨ç½²çš„<strong>Mapmosté«˜æ–¯æ³¼æº…å»ºæ¨¡å¹³å°</strong>ï¼Œè®©è¶…å¤§è§„æ¨¡3DGSåœºæ™¯çš„æœåŠ¡åŒ–å‘å¸ƒå˜å¾—å‰æ‰€æœªæœ‰çš„è½»æ¾â€”â€”åªéœ€ä¸€æ¬¡ç‚¹å‡»ï¼Œè®©ä¸“ä¸šçº§3Dåº”ç”¨è§¦æ‰‹å¯åŠã€‚</p>
<p>å¹³å°æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li>**ç»Ÿä¸€ç©ºé—´ç´¢å¼•ï¼š**åŸºäºåœ°ç†ä¸€è‡´çš„åˆ†å—ä½“ç³»ï¼Œæ”¯æŒè·¨åŒºåŸŸåœºæ™¯æ— ç¼é›†æˆï¼›</li>
<li>**è‡ªåŠ¨LODæ„å»ºï¼š**æ ¹æ®åœºæ™¯å†…å®¹æ™ºèƒ½ç”Ÿæˆå¤šçº§ç»†èŠ‚å±‚æ¬¡ï¼Œå…¼é¡¾è§†è§‰è´¨é‡ä¸è¿è¡Œæ•ˆç‡ï¼›</li>
<li>**å…¨é“¾è·¯ä¼˜åŒ–ï¼š**ä»ä¸Šä¼ ã€å¤„ç†åˆ°åœ¨çº¿æœåŠ¡ï¼Œå®ç°åˆ†é’Ÿçº§å‘å¸ƒä¸ç§’çº§åŠ è½½ã€‚</li>
</ul>
<p>æ— éœ€æ‰‹åŠ¨åˆ‡å—ã€è°ƒå‚æˆ–éƒ¨ç½²æœåŠ¡ï¼Œ<strong>Mapmost</strong>è®©è¶…å¤§è§„æ¨¡3DGSçœŸæ­£â€œå¼€ç®±å³ç”¨â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a73d80a888b45f5a548434460ecc569~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=9KszEbylBkQSA6eDIU70BnnqFg0%3D" alt="" loading="lazy"/></p>
<p><em>ç¦»çº¿ç‰ˆå»ºæ¨¡å¹³å°æœåŠ¡å‘å¸ƒå‚æ•°è®¾ç½®</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de6a5f2fee64f5db3d5031bf0b202dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=eBIKM3YbeXi9301eGITaSN4Hx1s%3D" alt="" loading="lazy"/></p>
<p><em>Mapmost SDK for WebGL 100kmÂ²å¤§åœ°ç†èŒƒå›´3DGSæ¨¡å‹æ¸²æŸ“</em></p>
<p>ç”³è¯·è¯•ç”¨ï¼Œè¯·è‡³<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mapmost.com%2F%23%2F" target="_blank" title="https://www.mapmost.com/#/" ref="nofollow noopener noreferrer">Mapmost</a>å®˜ç½‘è”ç³»å®¢æœ</p>
<p><strong>Mapmost 3DGS Builderåœ¨çº¿ä½“éªŒç‰ˆå·²ä¸Šçº¿~</strong></p>
<p><strong>æ¬¢è¿ä½“éªŒ:</strong> <a href="https://link.juejin.cn?target=studio.mapmost.com%2F3dgs" target="_blank" title="studio.mapmost.com/3dgs" ref="nofollow noopener noreferrer">studio.mapmost.com/3dgs</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c970b8d47c8346128320dded0559885c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFwbW9zdA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768096475&amp;x-signature=M59CL9OIH9Mz5%2FhNN5A9%2FGH01GI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ngè€ç‹—çš„Vue 3 å“åº”å¼ç³»ç»Ÿæºç åˆ†äº«]]></title>    <link>https://juejin.cn/post/7590654280900362283</link>    <guid>https://juejin.cn/post/7590654280900362283</guid>    <pubDate>2026-01-03T14:21:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7590654280900362283" data-draft-id="7590330924001345599" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ngè€ç‹—çš„Vue 3 å“åº”å¼ç³»ç»Ÿæºç åˆ†äº«"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-03T14:21:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TTt102207"/> <meta itemprop="url" content="https://juejin.cn/user/3843548383283469"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ngè€ç‹—çš„Vue 3 å“åº”å¼ç³»ç»Ÿæºç åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548383283469/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TTt102207
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-03T14:21:26.000Z" title="Sat Jan 03 2026 14:21:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Ngè€ç‹—çš„Vue 3 å“åº”å¼ç³»ç»Ÿç¬”è®°</h2>
<p>å“åº”å¼åº“ @vue/reactivity å­¦ä¹ è®°å½•</p>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<blockquote>
<p>ä½œä¸ºä¸€ä¸ªå¤šå¹´Angularåº”ç”¨çš„å¼€å‘è€…ï¼Œæåˆ°å“åº”å¼ï¼Œç¬¬ä¸€ååº”å°±æ˜¯Rxjsã€‚</p>
</blockquote>
<p>ç›¸æ¯”äºPromiseçš„å‘½ä»¤å¼ç¼–ç¨‹åˆ†æ•£çš„ä¿¡å·æºï¼Œ
Rxjsçš„å£°æ˜å¼å“åº”æ•°æ®æµï¼Œåœ¨ <strong>ç”¨æˆ·äº‹ä»¶å¤šæ ·ä¸”é¢‘ç¹çš„ç»„ä»¶</strong> ä¸­ï¼Œèƒ½æ›´ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥æ•°æ®æµï¼Œå¾€å¾€ <strong>ä¸€ä¸ªObservableå°±èƒ½å®Œæ•´çš„ä½“ç°æ•´ä¸ªæ•°æ®æµ</strong> ã€‚</p>
<blockquote>
<p>åˆè§Vue 3çš„å“åº”å¼ï¼Œæ˜¯ä¸€ç§æ—¢ç†Ÿæ‚‰æœ‰æ–°é²œçš„æ„Ÿè§‰ã€‚</p>
</blockquote>
<p>æˆ‘ä¸å†éœ€è¦å„ç§å„æ ·çš„<code>Observable</code>, <code>Subject</code>, <code>BehaviorSubject</code> æ¥è¡¨è¾¾æ•°æ®æµï¼Œ
è€Œæ˜¯é€šè¿‡ç®€å•çš„<code>ref</code>å’Œ<code>reactive</code>å°±èƒ½åˆ›å»ºå“åº”å¼æ•°æ®;
æˆ‘ä¹Ÿä¸éœ€è¦å»è®¢é˜…å’Œå–æ¶ˆè®¢é˜…æ•°æ®æµï¼Œ
Vue 3çš„å“åº”å¼ç³»ç»Ÿä¼š <strong>è‡ªåŠ¨è¿½è¸ªä¾èµ–</strong>ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°ã€‚</p>
<blockquote>
<p>å“åº”å¼äº¦æœ‰ä¸åŒ</p>
</blockquote>
<p>è¯šç„¶ï¼ŒRxjsæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å“åº”å¼ç¼–ç¨‹åº“ï¼Œé€‚ç”¨äºå¤æ‚çš„å¼‚æ­¥æ•°æ®æµå¤„ç†ï¼Œ
è€ŒVue 3çš„å“åº”å¼ç³»ç»Ÿæ›´ä¸“æ³¨äºUIå±‚çš„æ•°æ®ç»‘å®šå’ŒçŠ¶æ€ç®¡ç†ï¼Œ
åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæä¾›äº†æå…¶ä¾¿æ·å’Œé«˜æ•ˆçš„å“åº”å¼ç¼–ç¨‹ä½“éªŒã€‚</p>
<p>Ps: Angular 16ä¹Ÿå¼•å…¥äº†ç±»ä¼¼Vue 3çš„å“åº”å¼ç³»ç»Ÿï¼Œç§°ä¸ºSignalsã€‚</p>
<h3 data-id="heading-2">åŸºç¡€æ¦‚å¿µ</h3>
<blockquote>
<p>ref å’Œ reactive å¯¹æ¯” Observable</p>
</blockquote>
<p>reactivityä¸­æœ€é‡è¦çš„æ— ç–‘æ˜¯ <code>ref</code> å’Œ <code>reactive</code>ï¼Œ
ä»–ä»¬ç±»ä¼¼ <code>Rxjs</code> ä¸­çš„ <code>BehaviorSubject</code>,
ç”¨äºæ”¶é›†ä¸‹æ¸¸äº‹ä»¶ï¼Œå¹¶åœ¨æ›´æ–°æ—¶ <strong>å¹¿æ’­</strong> è®¢é˜…è€…ã€‚</p>
<p>è€Œ <code>effect</code>, <code>computed</code> åˆ™å®Œæˆäº†å“åº”å¼æ•°æ®æµçš„èœ•å˜ï¼Œ
<strong>è‡ªåŠ¨çš„ä¾èµ–æ”¶é›†å’Œè§¦å‘</strong>ï¼Œå½»åº•æ‘†è„±äº†æ‰‹åŠ¨è®¢é˜…å’Œå–æ¶ˆè®¢é˜…çš„ç¹çã€‚</p>
<p>ä»¥è‡ªåŠ¨åŠ æ³•ï¼Œä¸¾ä¸€ä¸ªæ —å­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/************* <span class="hljs-doctag">@vue</span>/reactivity ***************/</span>
<span class="hljs-keyword">import</span> { ref, reactive, computed, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/reactivity'</span>;
<span class="hljs-keyword">const</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> b = <span class="hljs-title function_">ref</span>(<span class="hljs-number">2</span>);
<span class="hljs-comment">// å“åº”å¼æ•°æ®æµ</span>
<span class="hljs-keyword">const</span> sum = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> a.<span class="hljs-property">value</span> + b.<span class="hljs-property">value</span>);
<span class="hljs-comment">// è§¦å‘</span>
a.<span class="hljs-property">value</span> = <span class="hljs-number">3</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sum.<span class="hljs-property">value</span>); <span class="hljs-comment">// 3 + 2 = 5</span>

<span class="hljs-comment">/************* Rxjs **************************/</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BehaviorSubject</span>, combineLatest } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;
<span class="hljs-keyword">import</span> { map } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/operators'</span>;
<span class="hljs-keyword">const</span> a$ = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BehaviorSubject</span>(<span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> b$ = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BehaviorSubject</span>(<span class="hljs-number">2</span>);
<span class="hljs-keyword">const</span> sum$ = <span class="hljs-title function_">combineLatest</span>([a$, b$]).<span class="hljs-title function_">pipe</span>(
  <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[a, b]</span>) =&gt;</span> a + b)
);

<span class="hljs-comment">// è§¦å‘</span>
a$.<span class="hljs-title function_">next</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">// ç‰¹åˆ«çš„æ•°æ®æµåªæœ‰åœ¨è®¢é˜…æ—¶, æ‰ä¼šè§¦å‘ä¸Šæ¸¸è®¡ç®—</span>
sum$.<span class="hljs-title function_">subscribe</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>); <span class="hljs-comment">// 3 + 2 = 5</span>
</code></pre>
<h3 data-id="heading-3">æºç é˜…è¯»</h3>
<p>å“åº”å¼ç³»ç»Ÿçš„æºç å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒéƒ¨åˆ†å¤§çº¦å‡ ç™¾è¡Œä»£ç ã€‚
ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>å“åº”å¼æ•°æ®åˆ›å»ºï¼š<code>ref</code>å’Œ<code>reactive</code>å‡½æ•°</li>
<li>ä¾èµ–æ”¶é›†å’Œè§¦å‘ï¼š<code>effect</code>å‡½æ•°</li>
<li>è®¡ç®—å±æ€§ï¼š<code>computed</code>å‡½æ•°</li>
<li>å“åº”å¼æ•°æ®çš„ä»£ç†å’Œæ‹¦æˆªï¼š<code>Proxy</code>å¯¹è±¡</li>
<li>å“åº”å¼æ•°æ®çš„åªè¯»å’Œæ·±åº¦å“åº”å¼ï¼š<code>readonly</code>å’Œ<code>shallowReactive</code>å‡½æ•°
...ç­‰ç­‰</li>
</ul>
<p>å…¶ä¸­ï¼Œä¾èµ–æ”¶é›†å’Œè§¦å‘æ˜¯å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒ</p>
<h4 data-id="heading-4">ä¸€ã€ä¾èµ–æ”¶é›†</h4>
<ul>
<li>çœ‹æ‡‚ <code>effect</code>ï¼Œå°±åŸºæœ¬äº†è§£ä¾èµ–æ”¶é›†çš„æ ¸å¿ƒåŸç†</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//  ä¾‹å¦‚ï¼š</span>
<span class="hljs-keyword">import</span> { effect, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/reactivity'</span>;
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count is: <span class="hljs-subst">${count.value}</span>`</span>);
});
</code></pre>
<p>åœ¨è¿™é‡Œå¦‚æœæŠŠ <code>.value</code> ä¸è¦çœ‹ä½œå­—æ®µçš„å–å€¼ï¼Œè€Œæ˜¯çœ‹æˆ <code>.subscribe(currentEffect)</code> æ–¹æ³•çš„è°ƒç”¨ï¼Œæ•´ä¸ªäº‹æƒ…å°±å˜å¾—å¾ˆæ¸…æ™°äº†ã€‚</p>
<p>æˆ‘åªéœ€è¦åœ¨ <code>effect</code> çš„å‡½æ•°ä¸­æ‰§è¡Œæ—¶ï¼Œ
æ·»åŠ ä¸€ä¸ª <strong>currentEffectçš„å…¨å±€å˜é‡</strong> ï¼Œä½œä¸ºä¸Šä¸‹æ–‡ï¼Œ
æ¯æ¬¡ <code>.subscribe()</code> çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªä¸Šä¸‹æ–‡æ·»åŠ åˆ°ä¾èµ–åˆ—è¡¨ä¸­, å°±å¾ˆæ–¹ä¾¿åœ°å®Œæˆäº†ä¾èµ–æ”¶é›†ã€‚</p>
<p><code>computed</code> å’Œ <code>watch</code> ä¹Ÿæ˜¯ç±»ä¼¼çš„åŸç†ã€‚</p>
<h4 data-id="heading-5">äºŒã€ä¾èµ–è§¦å‘</h4>
<p>ç”±äºå€¼æ›´æ–°çš„åœºæ™¯æ›´çµæ´»ï¼Œä¾èµ–è§¦å‘çš„è®¾è®¡ä¹Ÿå°±æ›´åŠ å¤æ‚äº›ã€‚</p>
<p>Vueä¸­æŒ‰ç…§ <code>åŸºæœ¬æ•°æ®ç±»å‹</code> å’Œ <code>å¯¹è±¡ç±»å‹</code> åˆ†åˆ«å¤„ç†ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Fblob%2Faac7e1898907445c8f89b22047a9bfcf0a6e91b8%2Fpackages%2Freactivity%2Fsrc%2Freactive.ts%23L421" target="_blank" title="https://github.com/vuejs/core/blob/aac7e1898907445c8f89b22047a9bfcf0a6e91b8/packages/reactivity/src/reactive.ts#L421" ref="nofollow noopener noreferrer">å‚è€ƒGitHub</a></p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹ï¼šç›´æ¥åœ¨ <code>.value</code> çš„ <code>setter</code> ä¸­è§¦å‘ä¾èµ– <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">å‚è€ƒRefImpl</a></li>
<li>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡ <code>Proxy</code> çš„ <code>set</code> æ‹¦æˆªå™¨è§¦å‘ä¾èµ–<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Fblob%2Faac7e1898907445c8f89b22047a9bfcf0a6e91b8%2Fpackages%2Freactivity%2Fsrc%2FbaseHandlers.ts%23L55" target="_blank" title="https://github.com/vuejs/core/blob/aac7e1898907445c8f89b22047a9bfcf0a6e91b8/packages/reactivity/src/baseHandlers.ts#L55" ref="nofollow noopener noreferrer">å‚è€ƒMutableReactiveHandler</a>ã€‚åµŒå¥—çš„å¯¹è±¡ä¼šåœ¨ <code>get</code> æ—¶é€’å½’åœ°è½¬æ¢ä¸ºå“åº”å¼å¯¹è±¡ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore%2Fblob%2Faac7e1898907445c8f89b22047a9bfcf0a6e91b8%2Fpackages%2Freactivity%2Fsrc%2FbaseHandlers.ts%23L126" target="_blank" title="https://github.com/vuejs/core/blob/aac7e1898907445c8f89b22047a9bfcf0a6e91b8/packages/reactivity/src/baseHandlers.ts#L126" ref="nofollow noopener noreferrer">å‚è€ƒBaseReactiveHandler</a></li>
</ul>
<p>å½“ç„¶ï¼Œéå¿…è¦çš„åœºæ™¯ä¸‹ï¼ŒVue ä¹Ÿæä¾›äº† <code>shallowReactive</code> å’Œ <code>shallowRef</code> æ¥åˆ›å»ºæµ…å“åº”å¼å¯¹è±¡ã€‚</p>
<h4 data-id="heading-6">ä¸‰ã€è®¡ç®—å±æ€§</h4>
<p>è®¡ç®—å±æ€§ <code>computed</code> çš„å®ç°ä¹Ÿå¾ˆå·§å¦™ã€‚
å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¸¦æœ‰ç¼“å­˜çš„ <code>effect</code>ã€‚
å½“è®¡ç®—å±æ€§çš„ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®¡ç®—å±æ€§ä¼šé‡æ–°è®¡ç®—å€¼ï¼Œ
ä½†åªæœ‰åœ¨è®¿é—®è®¡ç®—å±æ€§çš„å€¼æ—¶æ‰ä¼šè§¦å‘é‡æ–°è®¡ç®—ã€‚</p>
<p>è¿™ç‚¹å’ŒRxjsä¸­çš„ <code>shareReplay</code> æ“ä½œç¬¦æœ‰äº›ç±»ä¼¼ã€‚</p>
<h4 data-id="heading-7">å››ã€æ€»ç»“</h4>
<p>é€šè¿‡é˜…è¯» <code>Vue 3</code> å“åº”å¼ç³»ç»Ÿçš„æºç ï¼Œ
å¯¹å“åº”å¼ç¼–ç¨‹çš„æœ‰äº†æ–°çš„ç†è§£ã€‚</p>
<p>æ ¸å¿ƒçš„ä¾èµ–æ¸…å•é€šè¿‡æ•°ç»„ç®¡ç†ã€ ç›¸ä¼¼çš„è§¦å‘é€»è¾‘
å’Œå“åº”å¼æ•°æ®æµçš„ç†å¿µï¼Œç­‰ç­‰ä¿ç•™äº†å‘å¸ƒè®¢é˜…çš„ç¨³å®šè®¾è®¡ã€‚</p>
<p><code>Vue 3</code> çš„å“åº”å¼åº“ï¼Œä¸æ‹˜æ³¥äºåˆ»æ¿çš„è®¾è®¡æ¨¡å¼ï¼Œ
è€Œæ˜¯æ ¹æ®å®é™…éœ€æ±‚ï¼Œçµæ´»åœ°è®¾è®¡äº†å“åº”å¼æ•°æ®çš„åˆ›å»ºã€ä¾èµ–æ”¶é›†å’Œè§¦å‘æœºåˆ¶ï¼Œ
ä»è€Œå®ç°äº†é«˜æ•ˆä¸”æ˜“ç”¨çš„å“åº”å¼ç¼–ç¨‹ä½“éªŒã€‚</p>
<p>Vueå›¢é˜Ÿä¸­Anthony Fuåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fantfu.me%2Fposts%2Fwatch-with-reactivity" target="_blank" title="https://antfu.me/posts/watch-with-reactivity" ref="nofollow noopener noreferrer">è¿™ç¯‡æ–‡ç« </a>ä¸­å¯¹è®¾è®¡ç†å¿µæœ‰æ›´æ¸…æ™°çš„é˜è¿°ï¼Œæ¨èä¸€è¯»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>