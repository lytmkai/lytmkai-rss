<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[PMP/ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ 9 å¼  æ€ç»´å¯¼å›¾ã€è€ƒè¯•å¿…å¤‡ã€‘]]></title>    <link>https://juejin.cn/post/7579659550862737450</link>    <guid>https://juejin.cn/post/7579659550862737450</guid>    <pubDate>2025-12-04T13:03:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579659550862737450" data-draft-id="7579846685070590006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PMP/ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ   9 å¼  æ€ç»´å¯¼å›¾ã€è€ƒè¯•å¿…å¤‡ã€‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-04T13:03:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ›é“åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/553809589570109"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PMP/ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆ   9 å¼  æ€ç»´å¯¼å›¾ã€è€ƒè¯•å¿…å¤‡ã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/553809589570109/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ›é“åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T13:03:35.000Z" title="Thu Dec 04 2025 13:03:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b92dff991804ee7bb154d9548007a76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=outmMDFYfS89U%2Bp1J8Xwzy5GaqI%3D" alt="po_diagram.png" loading="lazy"/></p>
<p>åœ¨å¤‡è€ƒ PMPï¼ˆProject Management Professionalï¼‰æˆ–ä¿¡æ¯ç³»ç»Ÿé¡¹ç›®ç®¡ç†å¸ˆï¼ˆè½¯è€ƒé«˜çº§ï¼‰çš„è¿‡ç¨‹ä¸­ï¼Œé¢å¯¹åºæ‚çš„çŸ¥è¯†ä½“ç³»å’Œç¹å¤šçš„æµç¨‹ç»†èŠ‚ï¼Œè®¸å¤šè€ƒç”Ÿå¸¸å¸¸æ„Ÿåˆ°æ— ä»ä¸‹æ‰‹ã€‚</p>
<p>å…¶å®ï¼Œé¡¹ç›®ç®¡ç†çš„æ ¸å¿ƒçŸ¥è¯†é«˜åº¦ç»“æ„åŒ–ï¼Œè€Œ<strong>æ€ç»´å¯¼å›¾</strong>æ­£æ˜¯å°†è¿™äº›å¤æ‚å†…å®¹å¯è§†åŒ–ã€ç³»ç»ŸåŒ–çš„é«˜æ•ˆå·¥å…·ã€‚</p>
<p>å°å¼Ÿä¸æ‰ï¼Œæ¢³ç†äº†è¦†ç›–ä¸¤å¤§è®¤è¯è€ƒè¯•æ ¸å¿ƒå†…å®¹çš„ <strong>9 å¼ å…³é”®æ€ç»´å¯¼å›¾</strong>ï¼Œå¸®åŠ©å¤§å®¶å¿«é€Ÿæ„å»ºçŸ¥è¯†æ¡†æ¶ã€å¼ºåŒ–è®°å¿†é€»è¾‘ã€æå‡åº”è¯•æ•ˆç‡ã€‚</p>
<p>æ— è®ºä½ æ˜¯åˆæ¬¡å¤‡è€ƒè¿˜æ˜¯å†²åˆºå¤ç›˜ï¼Œè¿™9å¼ å›¾éƒ½å°†æˆä¸ºä½ é€šå…³è·¯ä¸Šçš„â€œå¯¼èˆªåœ°å›¾â€ã€‚</p>
<h2 data-id="heading-0">1. é¡¹ç›®æ•´åˆç®¡ç†</h2>
<p>æ¶µç›–åˆ¶å®šé¡¹ç›®ç« ç¨‹ã€é¡¹ç›®ç®¡ç†è®¡åˆ’ã€æŒ‡å¯¼ä¸ç®¡ç†æ‰§è¡Œã€ç›‘æ§å˜æ›´ã€ç»“æŸé¡¹ç›®ç­‰å…¨è¿‡ç¨‹ï¼Œå¼ºè°ƒâ€œæ•´åˆâ€æ˜¯é¡¹ç›®ç»ç†çš„æ ¸å¿ƒèŒè´£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d10b8d31a514f6992c7f11cf49a6295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=hnaM4yL2JvHi%2FrxCfOGVZh0iPSQ%3D" alt="é¡¹ç›®æ•´åˆç®¡ç†.jpg" loading="lazy"/></p>
<h2 data-id="heading-1">2. é¡¹ç›®èŒƒå›´ç®¡ç†</h2>
<p>èšç„¦å¦‚ä½•å®šä¹‰å’Œæ§åˆ¶â€œåšå“ªäº›äº‹ã€ä¸åšå“ªäº›äº‹â€ï¼ŒåŒ…æ‹¬éœ€æ±‚æ”¶é›†ã€WBSåˆ†è§£ã€èŒƒå›´ç¡®è®¤ä¸æ§åˆ¶ï¼Œæ˜¯é˜²æ­¢â€œèŒƒå›´è”“å»¶â€çš„å…³é”®é˜²çº¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3faf7cf87e4142969cd778beed14d171~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=pVb3W00rGrrSgyAZX1nb%2FYAXAoM%3D" alt="é¡¹ç›®èŒƒå›´ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-2">3. é¡¹ç›®è¿›åº¦ç®¡ç†</h2>
<p>è¯¦è§£æ´»åŠ¨å®šä¹‰ã€æ’åºã€ä¼°ç®—ã€å…³é”®è·¯å¾„æ³•ï¼ˆCPMï¼‰ã€è¿›åº¦å‹ç¼©ï¼ˆèµ¶å·¥/å¿«é€Ÿè·Ÿè¿›ï¼‰ç­‰æŠ€æœ¯ï¼ŒåŠ©ä½ æŒæ¡æ—¶é—´ç®¡ç†çš„æ ¸å¿ƒå·¥å…·ä¸è®¡ç®—é¢˜è§£æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcbd2f0a3a114076a18783c11bf05cc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=EtDF31618sC2GXczUtV%2B8W6R7Lc%3D" alt="é¡¹ç›®è¿›åº¦ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-3">4. é¡¹ç›®æˆæœ¬ç®¡ç†</h2>
<p>å›´ç»•ä¼°ç®—æˆæœ¬ã€åˆ¶å®šé¢„ç®—ã€æ§åˆ¶æˆæœ¬ä¸‰å¤§è¿‡ç¨‹ï¼Œé‡ç‚¹è®²è§£æŒ£å€¼ç®¡ç†ï¼ˆEVMï¼‰æŒ‡æ ‡ï¼ˆPVã€EVã€ACã€CVã€SVã€CPIã€SPIï¼‰åŠå…¶åº”ç”¨ï¼Œæ˜¯è®¡ç®—é¢˜å¿…è€ƒæ¨¡å—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/327b01c6eb8b453aa1206d64e0fb4df8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=U%2Fn7Ed9Cl1%2BQCJyzcI3%2BrISC%2Bck%3D" alt="é¡¹ç›®æˆæœ¬ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-4">5. é¡¹ç›®è´¨é‡ç®¡ç†</h2>
<p>ä»‹ç»è´¨é‡è§„åˆ’ã€è´¨é‡ä¿è¯ä¸æ§åˆ¶çš„æ–¹æ³•ï¼Œå¦‚ä¸ƒç§åŸºæœ¬è´¨é‡å·¥å…·ï¼ˆè€ä¸ƒç§ï¼‰ã€PDCAå¾ªç¯ã€æˆæœ¬æ•ˆç›Šåˆ†æç­‰ï¼Œå¼ºè°ƒâ€œé¢„é˜²èƒœäºæ£€æŸ¥â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/508a8a1b2c2a4038b70edb719cc8e13b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=IAy2eFqdrnjxZABmg1jSJ3CtEVs%3D" alt="é¡¹ç›®è´¨é‡ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-5">6. é¡¹ç›®èµ„æºç®¡ç†</h2>
<p>æ•´åˆäººåŠ›èµ„æºï¼ˆå›¢é˜Ÿç»„å»ºã€æ¿€åŠ±ç†è®ºï¼‰ä¸æ²Ÿé€šç®¡ç†ï¼ˆæ²Ÿé€šæ¨¡å‹ã€æ¸ é“è®¡ç®—ã€ä¿¡æ¯åˆ†å‘ï¼‰ï¼Œçªå‡ºâ€œäººâ€åœ¨é¡¹ç›®ä¸­çš„æ ¸å¿ƒä½œç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4d2138503cd49c190a82cabf7889d45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=1pEnS1%2FzhpDOpDtAK%2BbAYA%2FckQA%3D" alt="é¡¹ç›®èµ„æºç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-6">7. é¡¹ç›®é£é™©ç®¡ç†</h2>
<p>ä»é£é™©è¯†åˆ«ã€å®šæ€§/å®šé‡åˆ†æåˆ°åº”å¯¹ç­–ç•¥ï¼ˆè§„é¿ã€è½¬ç§»ã€å‡è½»ã€æ¥å—ï¼‰ï¼Œæ„å»ºå®Œæ•´çš„é£é™©ç®¡æ§é—­ç¯ï¼Œæ˜¯æ¡ˆä¾‹åˆ†æé¢˜å¸¸å®¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69ed676a82404e55bb816e0468f0dbfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=JHi6fsYxzDkDg4TuLzorEQ%2BiTMA%3D" alt="é¡¹ç›®é£é™©ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-7">8. é¡¹ç›®æ²Ÿé€šç®¡ç†</h2>
<p>è®²è§£å¦‚ä½•è¯†åˆ«å¹²ç³»äººã€åˆ†æå…¶å½±å“åŠ›ï¼Œå¹¶åˆ¶å®šå‚ä¸ç­–ç•¥ï¼›åŒæ—¶æ¶µç›–PMPå’Œè½¯è€ƒå…±åŒå¼ºè°ƒçš„èŒä¸šè´£ä»»ä¸è¡Œä¸ºå‡†åˆ™ï¼Œç¡®ä¿â€œåˆè§„â€ä¸â€œå…±èµ¢â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98e822abdf5347dab265a5285356beae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=z5Rsti7PuIOQ4uAbks4ucVszva4%3D" alt="é¡¹ç›®æ²Ÿé€šç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-8">9. é¡¹ç›®é‡‡è´­ç®¡ç†</h2>
<p>è¯¦è§£ä»è§„åˆ’é‡‡è´­ã€å®æ–½é‡‡è´­åˆ°æ§åˆ¶é‡‡è´­çš„å…¨è¿‡ç¨‹ï¼Œé‡ç‚¹æŒæ¡<strong>åˆåŒç±»å‹</strong>ï¼ˆæ€»ä»·åˆåŒã€æˆæœ¬è¡¥å¿åˆåŒã€å·¥æ–™åˆåŒï¼‰ã€<strong>ä¾›æ–¹é€‰æ‹©æ ‡å‡†</strong>ã€<strong>ç´¢èµ”ç®¡ç†</strong>åŠ<strong>é‡‡è´­å·¥ä½œè¯´æ˜ä¹¦ï¼ˆSOWï¼‰</strong> ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯PMPè®¡ç®—é¢˜ä¸è½¯è€ƒæ¡ˆä¾‹åˆ†æçš„å¸¸è€ƒæ¨¡å—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21580accbe02469c9b9f9821a178505a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyb6YGT5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765458339&amp;x-signature=vCuSXdqqlvpD7f6HwTiZizSbXNY%3D" alt="é¡¹ç›®é‡‡è´­ç®¡ç†.png" loading="lazy"/></p>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>é€šè¿‡è¿™9å¼ æ€ç»´å¯¼å›¾çš„ç³»ç»Ÿä¸²è”ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹èµ·æ¸…æ™°ã€å®Œæ•´ã€å¯è¿ç§»çš„é¡¹ç›®ç®¡ç†çŸ¥è¯†ä½“ç³»ï¼Œè½»æ¾åº”å¯¹é€‰æ‹©é¢˜ã€è®¡ç®—é¢˜ä¸æ¡ˆä¾‹åˆ†æã€‚</p>
<p>å»ºè®®ç»“åˆå®˜æ–¹æ•™æåå¤å¯¹ç…§ä½¿ç”¨ï¼Œæ•ˆæœæ›´ä½³ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡ç£…ï¼N8Næ–°ç‰ˆ2.0å‘å¸ƒï¼ä¸å†æ”¯æŒMySQLï¼Ÿ]]></title>    <link>https://juejin.cn/post/7579785426267340800</link>    <guid>https://juejin.cn/post/7579785426267340800</guid>    <pubDate>2025-12-04T13:35:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579785426267340800" data-draft-id="7579808521204154402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" é‡ç£…ï¼N8Næ–°ç‰ˆ2.0å‘å¸ƒï¼ä¸å†æ”¯æŒMySQLï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-04T13:35:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaä¸­æ–‡ç¤¾ç¾¤"/> <meta itemprop="url" content="https://juejin.cn/user/61228381386487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             é‡ç£…ï¼N8Næ–°ç‰ˆ2.0å‘å¸ƒï¼ä¸å†æ”¯æŒMySQLï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/61228381386487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaä¸­æ–‡ç¤¾ç¾¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T13:35:33.000Z" title="Thu Dec 04 2025 13:35:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…„å¼Ÿä»¬ï¼Œæ—¶éš” 2 å¹´ï¼ŒN8N ç»ˆäºè¿æ¥äº†å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œè¿™æ¬¡ <strong>N8N çš„ 2.0 ç‰ˆæœ¬ç»ˆäºæ¥äº†ï¼</strong></p>
<p>è™½ç„¶å®˜æ–¹ä¹‹å‰é¢„å‘Šè¯´æ˜¯ 12 æœˆ 8 å·ï¼ˆä¸‹å‘¨ä¸€ï¼‰å‘æµ‹è¯•ç‰ˆï¼Œä¸‹ä¸‹å‘¨æ‰å‘æ­£å¼ç‰ˆã€‚ä½†æˆ‘ä»Šå¤©é—²ç€æ²¡äº‹å»é€› N8N ä»“åº“çš„æ—¶å€™ï¼Œå±…ç„¶å‘ç°ï¼š<strong>2.0 çš„ RC ç‰ˆæœ¬ï¼ˆé¢„è§ˆç‰ˆï¼‰ä»Šå¤©å·²ç»æ‚„æ‚„å‘å¸ƒäº†ï¼</strong></p>
<p>æ—¢ç„¶å®˜æ–¹â€œå·è·‘â€äº†ï¼Œé‚£å’±ä»¬å¿…é¡»ç¬¬ä¸€æ—¶é—´è·Ÿä¸Šã€‚æˆ‘ä¹Ÿæ²¡é—²ç€ï¼Œç«‹é©¬åŠ¨æ‰‹å‡çº§ä½“éªŒäº†ä¸€æ³¢ã€‚</p>
<p>åŸæœ¬ä»¥ä¸ºæ˜¯â€œä¸æ»‘å‡çº§â€ï¼Œç»“æœåˆšä¸Šæ¥å°±è¸©äº†ä¸ª<strong>å·¨å¤§çš„å‘</strong>ï¼å¦‚æœä½ çš„ç”Ÿäº§ç¯å¢ƒæ­£å‡†å¤‡å‡çº§ï¼Œè¿™ç¯‡æ–‡ç« ä¸€å®šè¦çœ‹å®Œï¼</p>
<hr/>
<h2 data-id="heading-0">è§†é¢‘å±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV19h2YBPEiU%2F" target="_blank" title="https://www.bilibili.com/video/BV19h2YBPEiU/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV19hâ€¦</a></p>
<h2 data-id="heading-1">ğŸ› ï¸ æŠ¢å…ˆä½“éªŒï¼šå®‰è£…ä¸â€œæƒŠé­‚â€ä¸€åˆ»</h2>
<p>å®‰è£…è¿‡ç¨‹å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ç”¨çš„æ˜¯ Node.js çš„æ–¹å¼ï¼ˆè¿™ä¹Ÿæ˜¯æœ€çµæ´»æ–¹ä¾¿çš„ï¼‰ã€‚</p>
<p>ç›´æ¥åœ¨ç»ˆç«¯æ•²å‘½ä»¤ï¼š<br/>
<code>npm install -g n8n@next</code></p>
<p>å®‰è£…é€Ÿåº¦å¾ˆå¿«ï¼Œè™½ç„¶ç½‘ç»œç¨å¾®å¡äº†ä¸€ä¸¤åˆ†é’Ÿï¼Œä½†å…¨ç¨‹æ²¡æœ‰æŠ¥é”™ã€‚æ­£å½“æˆ‘ç¾æ»‹æ»‹åœ°æ•²ä¸‹ <code>n8n</code> å‡†å¤‡å¯åŠ¨æ—¶ï¼Œ<strong>æ„å¤–å‘ç”Ÿäº†ï¼</strong></p>
<h3 data-id="heading-2">âš ï¸ å²è¯—çº§â€œå¤§å‘â€ï¼šMySQL è¿™é‡Œä¸æ”¯æŒäº†ï¼</h3>
<p>å¯åŠ¨ç›´æ¥æŠ¥é”™ï¼Œæ§åˆ¶å°èµ«ç„¶å†™ç€ï¼š</p>
<blockquote>
<p><strong>Error:</strong></p>
<p><strong>MySQL and MariaDB have been removed. Please migrate to PostgreSQL</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc9b8fc51e14ee79f8d9403afd063b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeS4reaWh-ekvue-pA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460132&amp;x-signature=riYPGaluKUYJkH1Q3iUHQikgmOI%3D" alt="" loading="lazy"/></p>
<p>å…„å¼Ÿä»¬ï¼Œè¿™å¤ªå‘äº†ï¼æˆ‘ä¹‹å‰çš„ N8N ä¸€ç›´æ˜¯è¿æ¥ <strong>MySQL</strong> æ•°æ®åº“è·‘çš„ï¼Œé‡Œé¢å­˜äº†æˆ‘æ‰€æœ‰çš„å·¥ä½œæµå’Œå†å²æ•°æ®å•Šï¼</p>
<p><strong>åˆ’é‡ç‚¹ï¼š</strong><br/>
<strong>N8N 2.0 æ­£å¼ç§»é™¤äº†å¯¹ MySQL å’Œ MariaDB çš„æ”¯æŒï¼</strong><br/>
<strong>N8N 2.0 æ­£å¼ç§»é™¤äº†å¯¹ MySQL å’Œ MariaDB çš„æ”¯æŒï¼</strong><br/>
<strong>N8N 2.0 æ­£å¼ç§»é™¤äº†å¯¹ MySQL å’Œ MariaDB çš„æ”¯æŒï¼</strong></p>
<p>é‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚ç°åœ¨çš„ 2.0 ç‰ˆæœ¬ï¼Œå®˜æ–¹å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ <strong>PostgreSQL</strong>ã€‚å¦‚æœä½ åƒæˆ‘ä¸€æ ·ä¹‹å‰ç”¨çš„æ˜¯ MySQLï¼Œç›´æ¥å‡çº§ä¼šå¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨ã€‚</p>
<p>æ²¡åŠæ³•ï¼Œä¸ºäº†å…ˆç»™å¤§å®¶æ¼”ç¤º 2.0 çš„ç•Œé¢ï¼Œæˆ‘åªèƒ½å«æ³ªå…ˆæŠŠç¯å¢ƒå˜é‡é‡Œçš„ <code>DB_TYPE</code> é…ç½®åˆ æ‰ï¼Œè®©å®ƒå›é€€åˆ°é»˜è®¤çš„ <strong>SQLite</strong> æ•°æ®åº“ï¼ˆä¹Ÿå°±æ˜¯æœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼‰ã€‚</p>
<p><em>ï¼ˆè‡³äºè¿™éƒ¨åˆ†æ—§æ•°æ®æ€ä¹ˆè¿ç§»åˆ° Postgresï¼Œåé¢æˆ‘ä¼šä¸“é—¨ç ”ç©¶ä¸€ä¸‹å†è·Ÿå¤§å®¶åˆ†äº«ï¼Œä»Šå¤©å’±ä»¬å…ˆçœ‹æ–°åŠŸèƒ½ã€‚ï¼‰</em></p>
<hr/>
<h2 data-id="heading-3">ğŸ‘€ ç•Œé¢åˆä½“éªŒï¼šå˜äº†ï¼Œä½†æ²¡å®Œå…¨å˜</h2>
<p>åˆ‡å›é»˜è®¤æ•°æ®åº“åï¼Œç»ˆäºå¯åŠ¨æˆåŠŸäº†ï¼Œè®¿é—® <code>5678</code> ç«¯å£ï¼Œç†Ÿæ‚‰çš„æ³¨å†Œç•Œé¢è¿˜åœ¨ã€‚</p>
<p>è¿›å…¥ç³»ç»Ÿåï¼Œæˆ‘ä»”ç»†å¯¹æ¯”äº†ä¸€ä¸‹ 1.0 å’Œ 2.0 çš„åŒºåˆ«ï¼Œç»™å¤§å®¶æ€»ç»“äº†å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<h3 data-id="heading-4">1.åˆ›å»ºå·¥ä½œæµå˜æ–¹ä¾¿äº†</h3>
<p>ä»¥å‰å³ä¸Šè§’åªæœ‰ä¸€ä¸ªå¹²å·´å·´çš„â€œCreateâ€æŒ‰é’®ã€‚ç°åœ¨å¤šäº†ä¸€ä¸ª <strong>â€œä»æ¨¡æ¿é€‰æ‹©â€</strong> çš„å¿«æ·å…¥å£ã€‚è¿™å¯¹æ–°æ‰‹æ¯”è¾ƒå‹å¥½ï¼Œä¸ç”¨æ¯æ¬¡éƒ½ä»é›¶å¼€å§‹ç”»æµç¨‹ã€‚</p>
<h3 data-id="heading-5">2.æ’ä»¶å…¼å®¹æ€§ï¼ˆå¥½æ¶ˆæ¯ï¼ï¼‰</h3>
<p>è¿™æ˜¯å¤§å®¶æœ€æ‹…å¿ƒçš„ç‚¹ï¼š<strong>ç¤¾åŒºæ’ä»¶è¿˜èƒ½ç”¨å—ï¼Ÿ</strong><br/>
æˆ‘å®æµ‹å®‰è£…äº†ä¸€ä¸‹ï¼Œ<strong>å®Œå…¨æ²¡é—®é¢˜ï¼</strong> ç¤¾åŒºæ’ä»¶ä¾ç„¶å¯ä»¥é¡ºåˆ©å®‰è£…å’Œä½¿ç”¨ï¼Œè¿™ç‚¹å¤§å®¶å¯ä»¥æ”¾å¿ƒã€‚</p>
<h3 data-id="heading-6">3.ExecuteCommand ç»„ä»¶æ²¡äº†</h3>
<p>å®˜æ–¹ä¹Ÿå†™äº† 2.0 ä¸»è¦å‡çº§äº†å®‰å…¨æ€§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ‰§è¡Œæœ¬åœ°å‘½ä»¤çš„â€œExecute Commandâ€ç»„ä»¶ä¹Ÿæ²¡å–æ¶ˆäº†ï¼Œæ‰€ä»¥å¦‚æœä½ éœ€è¦ä½¿ç”¨ Execute Command è°ƒç”¨æœ¬åœ°çš„å‘½ä»¤ä¾‹å¦‚ä½¿ç”¨ FFMPeg æ‰§è¡ŒéŸ³è§†é¢‘æ“ä½œï¼ŒæŠ±æ­‰ï¼Œ2.0 å®˜æ–¹ä¸æ”¯æŒäº†ã€‚æ‰€ä»¥å‡çº§ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆè¯„ä¼°éœ€æ±‚å†åšå†³å®šã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ”„ äº¤äº’é€»è¾‘å¤§æ”¹ï¼šå‘Šåˆ«â€œActiveâ€å¼€å…³</h2>
<p>åœ¨å·¥ä½œæµç¼–è¾‘å™¨é‡Œï¼Œæœ‰ä¸€ä¸ªéå¸¸æ˜æ˜¾çš„å˜åŒ–ã€‚</p>
<p><strong>ä»¥å‰ 1.0 ç‰ˆæœ¬ï¼š</strong><br/>
å³ä¸Šè§’æ˜¯ä¸€ä¸ªç®€å•çš„ <code>Active</code> å¼€å…³ï¼Œç‚¹ä¸€ä¸‹å°±æ¿€æ´»ï¼Œå¾ˆéšæ„ã€‚</p>
<p><strong>ç°åœ¨ 2.0 ç‰ˆæœ¬ï¼š</strong><br/>
å˜æˆäº†ä¸€ä¸ªæ­£å¼çš„ <strong>â€œPublishâ€ï¼ˆå‘å¸ƒï¼‰æŒ‰é’®</strong>ã€‚<br/>
è€Œä¸”é€»è¾‘å˜ä¸¥è°¨äº†ï¼šä½ ä¸èƒ½éšä¾¿ç‚¹å‘å¸ƒï¼Œå¿…é¡»å…ˆç»™å·¥ä½œæµé…ç½®å¥½åç§°ï¼Œä¿å­˜ä¹‹åï¼Œæ‰èƒ½ç‚¹å‡»å‘å¸ƒã€‚</p>
<p><strong>è¿™ä¸€æ­¥æ“ä½œæ›´æœ‰â€œç”Ÿäº§ç¯å¢ƒâ€çš„æ„Ÿè§‰äº†</strong>ï¼Œé¿å…äº†ä»¥å‰è¯¯è§¦å¼€å…³å¯¼è‡´æµç¨‹ä¸ç®¡æ˜¯æ­»æ˜¯æ´»éƒ½åœ¨è·‘çš„æƒ…å†µã€‚è€Œä¸”åœ¨â€œæ›´å¤šâ€é€‰é¡¹é‡Œï¼Œä¹Ÿå¯¹åº”å¢åŠ äº†â€œUnPublishâ€ï¼ˆå–æ¶ˆå‘å¸ƒï¼‰çš„åŠŸèƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ“ æ€»ç»“ï¼šå€¼å¾—å‡çº§å—ï¼Ÿ</h2>
<p>ç›®å‰çš„ 2.0.0 RC ç‰ˆæœ¬ï¼Œç»™æˆ‘çš„æ„Ÿè§‰æ˜¯**â€œç¨³ä¸­æ±‚å˜â€**ã€‚</p>
<ul>
<li><strong>å¤–è§‚ä¸Šï¼š</strong> å¹¶æ²¡æœ‰é‚£ç§ç¿»å¤©è¦†åœ°çš„æ•´å®¹å¼æ›´æ–°ï¼Œè€ç”¨æˆ·ä¸Šæ‰‹æ²¡éš¾åº¦ã€‚</li>
<li><strong>å†…æ ¸ä¸Šï¼š</strong> æ‹¥æŠ±äº†åŠŸèƒ½æ›´ä¸°å¯Œçš„ PostgreSQL æ•°æ®åº“ï¼Œå¹¶ä¸”å–æ¶ˆäº†ä¸€äº›å¯èƒ½å­˜åœ¨çš„å®‰å…¨ç»„ä»¶ã€‚</li>
</ul>
<p><strong>ç£Šå“¥å»ºè®®ï¼š</strong>
å¦‚æœä½ æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œ<strong>åƒä¸‡åˆ«è¿™å‘¨å‡çº§ï¼</strong> å°¤å…¶æ˜¯ç”¨ MySQL çš„å…„å¼Ÿï¼Œç­‰æ­£å¼ç‰ˆå‘å¸ƒï¼Œå¹¶ä¸”åšå¥½æ•°æ®åº“è¿ç§»æ–¹æ¡ˆåå†åŠ¨ã€‚</p>
<p>æˆ‘ä¼šç»§ç»­å…³æ³¨åç»­çš„æ­£å¼ç‰ˆå‘å¸ƒï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æ›´å¤šéšè—å½©è›‹ã€‚</p>
<p><strong>æˆ‘æ˜¯ç£Šå“¥ï¼Œæ¯å¤©åˆ†äº«ä¸€ä¸ªå¹²è´§å†…å®¹ï¼Œå’±ä»¬ä¸‹æœŸè§ï¼</strong></p>
<blockquote>
<p>æœ¬æ–‡å·²æ”¶å½•åˆ°æˆ‘çš„æŠ€æœ¯å°ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.javacn.site" target="_blank" title="https://www.javacn.site" ref="nofollow noopener noreferrer">www.javacn.site</a>ï¼Œç½‘ç«™åŒ…å«çš„å†…å®¹æœ‰ï¼š<strong>LangChain/N8N/SpringAI/SpringAIAlibaba/LangChain4j/Dify/Coze/AIå®æˆ˜é¡¹ç›®/AIå¸¸è§é¢è¯•é¢˜</strong>ç­‰æŠ€æœ¯åˆ†äº«ï¼Œæ¬¢è¿å„ä½å¤§ä½¬å…‰ä¸´æŒ‡å¯¼~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-46ã€å­©â¼¦ä»¬çš„æ¸¸æˆ(åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°)]]></title>    <link>https://juejin.cn/post/7579819594271490086</link>    <guid>https://juejin.cn/post/7579819594271490086</guid>    <pubDate>2025-12-04T13:36:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594271490086" data-draft-id="7577653509862047794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰‘æŒ‡offer-46ã€å­©â¼¦ä»¬çš„æ¸¸æˆ(åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°)"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-04T13:36:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰‘æŒ‡offer-46ã€å­©â¼¦ä»¬çš„æ¸¸æˆ(åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T13:36:18.000Z" title="Thu Dec 04 2025 13:36:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜ç›®æè¿°</h2>
<p>æœ‰ä¸ªæ¸¸æˆæ˜¯è¿™æ ·çš„ï¼šâ¾¸å…ˆï¼Œè®© n ä¸ªâ¼©æœ‹å‹ä»¬å›´æˆâ¼€ä¸ªâ¼¤åœˆï¼Œâ¼©æœ‹å‹ä»¬çš„ç¼–å·æ˜¯0~n-1ã€‚ç„¶åï¼ŒéšæœºæŒ‡å®šâ¼€ä¸ªæ•° m ï¼Œè®©ç¼–å·ä¸º0çš„â¼©æœ‹å‹å¼€å§‹æŠ¥æ•°ã€‚æ¯æ¬¡å–Šåˆ° m-1 çš„é‚£ä¸ªâ¼©æœ‹å‹è¦å‡ºåˆ—å”±â¾¸æ­Œï¼Œç„¶åå¯ä»¥åœ¨ç¤¼å“ç®±ä¸­ä»»æ„çš„æŒ‘é€‰ç¤¼ç‰©ï¼Œå¹¶ä¸”ä¸å†å›åˆ°åœˆä¸­ï¼Œä»ä»–çš„ä¸‹â¼€ä¸ªâ¼©æœ‹å‹å¼€å§‹ï¼Œç»§ç»­ 0... m-1æŠ¥æ•°....è¿™æ ·ä¸‹å»....ç›´åˆ°å‰©ä¸‹æœ€åâ¼€ä¸ªâ¼©æœ‹å‹ï¼Œå¯ä»¥ä¸â½¤è¡¨æ¼”ï¼Œå¹¶ä¸”æ‹¿åˆ°â½œå®¢ç¤¼å“ï¼Œè¯·ä½ è¯•ç€æƒ³ä¸‹ï¼Œå“ªä¸ªâ¼©æœ‹å‹ä¼šå¾—åˆ°è¿™ä»½ç¤¼å“å‘¢ï¼Ÿ</p>
<p>ç¤ºä¾‹
è¾“â¼Šï¼š5,3
è¾“å‡ºï¼š2</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">æ•°ç»„æ¨¡æ‹Ÿ</h3>
<p>é€šè¿‡å¸ƒå°”æ•°ç»„æ ‡è®°å°æœ‹å‹çš„å‡ºå±€çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastRemaining</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span> {
        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span> || m &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        
        <span class="hljs-type">boolean</span>[] out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[n]; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å‡ºå±€</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> n;                  <span class="hljs-comment">// å‰©ä½™äººæ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;                  <span class="hljs-comment">// å½“å‰æŠ¥æ•°ä½ç½®</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;                   <span class="hljs-comment">// æŠ¥æ•°è®¡æ•°å™¨</span>
        
        <span class="hljs-keyword">while</span> (count &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å¦‚æœå½“å‰å°æœ‹å‹æœªå‡ºå±€ï¼Œå‚ä¸æŠ¥æ•°</span>
            <span class="hljs-keyword">if</span> (!out[index]) {
                step++;
                <span class="hljs-comment">// æŠ¥åˆ°m-1çš„å°æœ‹å‹å‡ºå±€</span>
                <span class="hljs-keyword">if</span> (step == m) {
                    out[index] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å‡ºå±€</span>
                    count--;            <span class="hljs-comment">// å‰©ä½™äººæ•°å‡1</span>
                    step = <span class="hljs-number">0</span>;           <span class="hljs-comment">// é‡ç½®è®¡æ•°å™¨</span>
                }
            }
            <span class="hljs-comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå¾ªç¯ï¼‰</span>
            index = (index + <span class="hljs-number">1</span>) % n;
        }
        
        <span class="hljs-comment">// æ‰¾åˆ°æœ€åä¸€ä¸ªæœªå‡ºå±€çš„å°æœ‹å‹</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {
            <span class="hljs-keyword">if</span> (!out[i]) {
                <span class="hljs-keyword">return</span> i;
            }
        }
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÃ—m)ï¼Œæœ€åæƒ…å†µä¸‹æ¯ä¸ªå°æœ‹å‹éƒ½éœ€è¦æŠ¥æ•°mæ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦é•¿åº¦ä¸ºnçš„å¸ƒå°”æ•°ç»„</li>
</ul>
<h3 data-id="heading-3">å¾ªç¯é“¾è¡¨</h3>
<p>ä½¿ç”¨å¾ªç¯é“¾è¡¨æ¨¡æ‹Ÿå°æœ‹å‹å›´æˆçš„åœˆï¼Œå°†å°æœ‹å‹å­˜å…¥é“¾è¡¨ï¼Œå¾ªç¯åˆ é™¤ç¬¬mä¸ªå…ƒç´ </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastRemaining</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span> {
        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span> || m &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        
        List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        <span class="hljs-comment">// åˆå§‹åŒ–é“¾è¡¨ï¼Œå­˜å…¥æ‰€æœ‰å°æœ‹å‹ç¼–å·</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {
            list.add(i);
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// å½“å‰æŒ‡é’ˆä½ç½®</span>
        
        <span class="hljs-keyword">while</span> (list.size() &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// è®¡ç®—è¦åˆ é™¤çš„ä½ç½®ï¼š(å½“å‰ç´¢å¼• + m-1) % å½“å‰å¤§å°</span>
            index = (index + m - <span class="hljs-number">1</span>) % list.size();
            list.remove(index);
            <span class="hljs-comment">// åˆ é™¤åindexè‡ªåŠ¨æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä¸éœ€è¦ç§»åŠ¨</span>
        }
        
        <span class="hljs-keyword">return</span> list.get(<span class="hljs-number">0</span>);
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(nÃ—m)ï¼Œéœ€è¦éå†é“¾è¡¨è¿›è¡Œåˆ é™¤æ“ä½œ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦å­˜å‚¨nä¸ªèŠ‚ç‚¹</li>
</ul>
<h3 data-id="heading-4">æ•°å­¦å½’çº³æ³•ï¼ˆæ¨èï¼‰</h3>
<p>åˆ†ææ¯æ¬¡è¢«åˆ é™¤çš„æ•°å­—è§„å¾‹ï¼Œç›´æ¥è®¡ç®—å‡ºæœ€åçš„æ•°å­—ï¼Œä¸éœ€è¦æ¨¡æ‹Ÿ</p>
<pre><code class="hljs language-java" lang="java">F(N,M) = ( F(Nâˆ’<span class="hljs-number">1</span>,M) + M ) % N
</code></pre>
<p><strong>é€’æ¨å…¬å¼çš„æ¨å¯¼è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç¬¬ä¸€æ¬¡åˆ é™¤</strong>ï¼šä»0å¼€å§‹æŠ¥æ•°ï¼Œåˆ é™¤ç¬¬(m-1)%nä¸ªå°æœ‹å‹</li>
<li><strong>é‡æ–°ç¼–å·</strong>ï¼šåˆ é™¤åï¼Œä»ç¬¬m%nä¸ªå°æœ‹å‹å¼€å§‹é‡æ–°ç¼–å·ï¼š
<ul>
<li>æ—§ç¼–å·ï¼šm%n, m%n+1, ..., n-1, 0, 1, ..., m%n-1</li>
<li>æ–°ç¼–å·ï¼š0, 1, 2, ..., n-2</li>
</ul>
</li>
<li><strong>æ˜ å°„å…³ç³»</strong>ï¼šæ–°ç¼–å·xå¯¹åº”çš„æ—§ç¼–å·ä¸º(x + m) % n</li>
</ol>
<p><strong>ç¤ºä¾‹éªŒè¯ï¼ˆn=5, m=3ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">åŸå§‹ç¼–å·: 0, 1, 2, 3, 4
ç¬¬ä¸€æ¬¡åˆ é™¤ç¼–å·2 â†’ å‰©ä½™: 0, 1, 3, 4
é‡æ–°ç¼–å·: 3â†’0, 4â†’1, 0â†’2, 1â†’3
f(5,3) = (f(4,3) + 3) % 5
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">LastRemaining_Solution</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span> {
        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span> || m &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) {
            result = (result + m) % n;
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦næ¬¡é€’å½’è°ƒç”¨</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œé€’å½’è°ƒç”¨æ ˆæ·±åº¦</li>
</ul>
<h3 data-id="heading-5">è¿­ä»£ä¼˜åŒ–</h3>
<p>å°†é€’å½’è½¬ä¸ºè¿­ä»£ï¼Œé¿å…æ ˆæº¢å‡ºé£é™©ï¼Œæ˜¯ç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³é€‰æ‹©</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lastRemaining</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span> {
        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span> || m &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// f(1, m) = 0</span>
        
        <span class="hljs-comment">// ä»2ä¸ªäººæƒ…å†µå¼€å§‹ï¼Œé€æ­¥è®¡ç®—åˆ°nä¸ªäºº</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= n; i++) {
            result = (result + m) % i;
        }
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œåªéœ€ä¸€æ¬¡å¾ªç¯</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œåªä½¿ç”¨å¸¸æ•°ç©ºé—´</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain + LangGraph å®æˆ˜ï¼šæ„å»ºç”Ÿäº§çº§å¤šæ¨¡æ€ WorkflowAgent çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579832417748451379</link>    <guid>https://juejin.cn/post/7579832417748451379</guid>    <pubDate>2025-12-04T13:33:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579832417748451379" data-draft-id="7579832417748303923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain + LangGraph å®æˆ˜ï¼šæ„å»ºç”Ÿäº§çº§å¤šæ¨¡æ€ WorkflowAgent çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Python,Agent,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-04T13:33:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹å¹²è´§é“º"/> <meta itemprop="url" content="https://juejin.cn/user/52383084474680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain + LangGraph å®æˆ˜ï¼šæ„å»ºç”Ÿäº§çº§å¤šæ¨¡æ€ WorkflowAgent çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52383084474680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹å¹²è´§é“º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T13:33:04.000Z" title="Thu Dec 04 2025 13:33:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e43c2959f94848118ece1011f15b283f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460432&amp;x-signature=A%2F3XIGomhBCVDjWhMrtL4chMog0%3D" alt="image.png" loading="lazy"/>
åœ¨å¤šæ¨¡æ€ AI åº”ç”¨å¼€å‘ä¸­ï¼Œå¼€å‘è€…å¸¸é¢ä¸´ä¸‰å¤§æ ¸å¿ƒç—›ç‚¹ï¼š<strong>å·¥å…·è°ƒç”¨é¡ºåºæ··ä¹±</strong>ã€<strong>æ­¥éª¤ç»“æœæ— æ³•ä¼ é€’</strong>ã€<strong>æ¶æ„é›†æˆå¤æ‚</strong>ã€‚ä¼ ç»Ÿçš„åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„ <code>BaseAgent</code> å› å…¶éšæœºå†³ç­–çš„ç‰¹æ€§ï¼Œéš¾ä»¥ä¿éšœå¤æ‚ä»»åŠ¡çš„å¯é æ‰§è¡Œã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•ç»“åˆ <code>LangChain</code>ï¼ˆèƒ½åŠ›ç»„ä»¶åº“ï¼‰ä¸ <code>LangGraph</code>ï¼ˆæµç¨‹æ“ä½œç³»ç»Ÿï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªå¯é—­ç¯é›†æˆåˆ°ç°æœ‰æ¶æ„çš„ <strong><code>WorkflowAgent</code></strong>ï¼Œä»¥è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼Œå¹¶é€šè¿‡å®æˆ˜æ¡ˆä¾‹å±•ç¤ºå…¶ä»è®¾è®¡åˆ°è½åœ°çš„å…¨è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-0"><strong>ä¸€ã€æ¡†æ¶æ ¸å¿ƒå®šä½ï¼šä»â€œèƒ½åŠ›ç»„ä»¶â€åˆ°â€œæµç¨‹æ“ä½œç³»ç»Ÿâ€</strong></h4>
<p><code>LangChain</code> ä¸ <code>LangGraph</code> å½¢æˆäº†äº’è¡¥çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong><code>LangChain</code></strong>ï¼šæä¾›å·¥å…·å°è£…ï¼ˆæ–‡æœ¬/å›¾åƒ/æ–‡æ¡£/è¯­éŸ³ï¼‰ã€LLMé€‚é…ã€è®°å¿†ç»„ä»¶ï¼Œæ˜¯**â€œèƒ½åŠ›ç»„ä»¶åº“â€**ã€‚</li>
<li><strong><code>LangGraph</code></strong>ï¼šé€šè¿‡çŠ¶æ€å›¾ï¼ˆStateGraphï¼‰å®ç°å¤šæ­¥éª¤æµç¨‹æ§åˆ¶ã€çŠ¶æ€æŒä¹…åŒ–ã€åˆ†æ”¯ä¸å¾ªç¯ï¼Œæ˜¯**â€œæµç¨‹æ“ä½œç³»ç»Ÿâ€**ã€‚</li>
</ul>
<p>äºŒè€…ååŒï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº† <code>BaseAgent</code> çš„å¤©ç„¶ç¼ºé™·ï¼š</p>

























<table><thead><tr><th align="left">å¯¹æ¯”ç»´åº¦</th><th align="left">BaseAgent (çº¯LLMé©±åŠ¨)</th><th align="left">WorkflowAgent (LangChain+LangGraph)</th></tr></thead><tbody><tr><td align="left"><strong>å·¥å…·è°ƒç”¨é¡ºåº</strong></td><td align="left">LLMéšæœºå†³ç­–ï¼Œæ— æ³•ä¿è¯ä¾èµ–ï¼ˆå¦‚â€œå†™è¯—é…å›¾â€å¯èƒ½å…ˆè°ƒå›¾ï¼‰</td><td align="left">ä¸¥æ ¼æŒ‰â€œæ„ŸçŸ¥â†’è§„åˆ’â†’æ‰§è¡Œâ€å®šä¹‰é¡ºåºï¼Œæ”¯æŒæ­¥éª¤ä¾èµ–</td></tr><tr><td align="left"><strong>çŠ¶æ€ç®¡ç†</strong></td><td align="left">æ— å…±äº«çŠ¶æ€ï¼Œæ­¥éª¤ç»“æœæ— æ³•ä¼ é€’ï¼ˆå¦‚è¯—æ— æ³•ç»™é…å›¾å·¥å…·ç”¨ï¼‰</td><td align="left">å…¨å±€çŠ¶æ€é€šé“å­˜å‚¨ç»“æœï¼ŒèŠ‚ç‚¹é—´å¯ç›´æ¥è¯»å–</td></tr><tr><td align="left"><strong>æ¶æ„é›†æˆ</strong></td><td align="left">éœ€æ‰‹åŠ¨å¯¹æ¥å·¥å…·ä¸å­˜å‚¨ï¼Œæ— ç»Ÿä¸€è§„èŒƒ</td><td align="left">å¤ç”¨ç°æœ‰å·¥å…·å°è£…ä¸æ•°æ®åº“é€»è¾‘ï¼Œå½¢æˆå®Œæ•´é—­ç¯</td></tr></tbody></table>
<h4 data-id="heading-1"><strong>äºŒã€å¤šæ¨¡æ€ WorkflowAgent å®æˆ˜æ¡ˆä¾‹</strong></h4>
<p><strong>æ¡ˆä¾‹1ï¼šæ–‡æœ¬ç”Ÿæˆ + å›¾åƒç”Ÿæˆï¼ˆå†™è¯—é…å›¾ï¼‰</strong>
<strong>éœ€æ±‚</strong>ï¼šç”¨æˆ·è¾“å…¥â€œå†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—ï¼Œç„¶åä¸ºè¿™é¦–è¯—é…ä¸€å¼ å›¾â€ï¼Œéœ€ç¡®ä¿é¡ºåºï¼ˆå…ˆæ–‡åå›¾ï¼‰ä¸ç»“æœä¼ é€’ã€‚
<strong>æ¶æ„èŒƒå¼</strong>ï¼šPerceiveï¼ˆæ„å›¾è¯†åˆ«ï¼‰â†’ Planï¼ˆæ­¥éª¤æ‹†åˆ†ï¼‰â†’ Executeï¼ˆå·¥å…·è°ƒç”¨ï¼‰ã€‚</p>
<p><strong>1. æ ¸å¿ƒä»£ç å®ç°</strong></p>
<p><strong>(1) ç±»å®šä¹‰ä¸çŠ¶æ€åˆå§‹åŒ–</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkflowAgent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span> = options.<span class="hljs-property">userId</span>; <span class="hljs-comment">// å¯¹æ¥ç°æœ‰ç”¨æˆ·ä½“ç³»</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> = options.<span class="hljs-property">sessionId</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DoubaoLLM</span>({ <span class="hljs-attr">streaming</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// å¤ç”¨LLMé€‚é…å™¨</span>
    <span class="hljs-comment">// å…¨å±€çŠ¶æ€é€šé“ï¼šèŠ‚ç‚¹é—´å…±äº«æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">input</span>: <span class="hljs-literal">null</span>,        <span class="hljs-comment">// ç”¨æˆ·åŸå§‹è¾“å…¥</span>
      <span class="hljs-attr">perceived</span>: <span class="hljs-literal">null</span>,    <span class="hljs-comment">// æ„ŸçŸ¥åçš„æ„å›¾</span>
      <span class="hljs-attr">plan</span>: <span class="hljs-literal">null</span>,         <span class="hljs-comment">// æ‰§è¡Œè®¡åˆ’</span>
      <span class="hljs-attr">result</span>: <span class="hljs-literal">null</span>,       <span class="hljs-comment">// æœ€ç»ˆç»“æœ</span>
      <span class="hljs-attr">tools</span>: [],          <span class="hljs-comment">// å·²è°ƒç”¨å·¥å…·åˆ—è¡¨ï¼ˆæ—¥å¿—ï¼‰</span>
      <span class="hljs-attr">stepResults</span>: {}     <span class="hljs-comment">// æ­¥éª¤ç»“æœï¼ˆä¾èµ–ä¼ é€’ï¼‰</span>
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">graph</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createGraph</span>(); <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€å›¾</span>
  }
}
</code></pre>
<p><strong>(2) LangGraph çŠ¶æ€å›¾åˆ›å»ºï¼ˆæ ¸å¿ƒæµç¨‹æ§åˆ¶ï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">createGraph</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> workflow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>({
    <span class="hljs-attr">channels</span>: {
      <span class="hljs-attr">input</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> y || x },
      <span class="hljs-attr">perceived</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> y || x },
      <span class="hljs-attr">plan</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> y || x },
      <span class="hljs-attr">result</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> y || x },
      <span class="hljs-attr">tools</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> [...(x || []), ...(y || [])] },
      <span class="hljs-attr">stepResults</span>: { <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> ({ ...x, ...y }) }
    }
  });

  <span class="hljs-comment">// æ·»åŠ æ ¸å¿ƒèŠ‚ç‚¹</span>
  workflow.<span class="hljs-title function_">addNode</span>(<span class="hljs-string">'perceive'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">perceiveNode</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  workflow.<span class="hljs-title function_">addNode</span>(<span class="hljs-string">'plan'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">planNode</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  workflow.<span class="hljs-title function_">addNode</span>(<span class="hljs-string">'execute'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">executeNode</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));

  <span class="hljs-comment">// å®šä¹‰çº¿æ€§æµè½¬è·¯å¾„</span>
  workflow.<span class="hljs-title function_">setEntryPoint</span>(<span class="hljs-string">'perceive'</span>);
  workflow.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">'perceive'</span>, <span class="hljs-string">'plan'</span>);
  workflow.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">'plan'</span>, <span class="hljs-string">'execute'</span>);
  workflow.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">'execute'</span>, <span class="hljs-variable constant_">END</span>);

  <span class="hljs-keyword">return</span> workflow.<span class="hljs-title function_">compile</span>();
}
</code></pre>
<p><strong>(3) ä¸‰å¤§æ ¸å¿ƒèŠ‚ç‚¹å®ç°</strong></p>
<ul>
<li><strong>æ„ŸçŸ¥èŠ‚ç‚¹ (Perceive)</strong>ï¼šè§£ææ„å›¾ä¸æ‰€éœ€å·¥å…·ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">perceiveNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`åˆ†æç”¨æˆ·è¾“å…¥ï¼Œè¿”å›JSONæ ¼å¼æ„å›¾ï¼š
  ç”¨æˆ·è¾“å…¥ï¼š<span class="hljs-subst">${state.input}</span>
  è¾“å‡ºå­—æ®µï¼šintentã€task_typeã€required_tools`</span>;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span>.<span class="hljs-title function_">invoke</span>(prompt);
  <span class="hljs-keyword">const</span> perceived = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response.<span class="hljs-property">content</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\{[\s\S]*\}/</span>)[<span class="hljs-number">0</span>]);
  <span class="hljs-keyword">return</span> { perceived }; <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span>
}
<span class="hljs-comment">// ç»“æœç¤ºä¾‹: { intent: "åˆ›ä½œè¯—æ­Œå¹¶é…å›¾", task_type: "multi", required_tools: ["text_generator", "image_generator"] }</span>
</code></pre>
</li>
<li><strong>è§„åˆ’èŠ‚ç‚¹ (Plan)</strong>ï¼šæ‹†åˆ†æ­¥éª¤ä¸ä¾èµ–ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">planNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> { perceived } = state;
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`åŸºäºæ„å›¾åˆ¶å®šæ­¥éª¤è®¡åˆ’ï¼ˆJSONæ•°ç»„ï¼‰ï¼š
  æ„å›¾ï¼š<span class="hljs-subst">${perceived.intent}</span>ï¼Œå·¥å…·ï¼š<span class="hljs-subst">${perceived.required_tools.join(<span class="hljs-string">','</span>)}</span>
  è¦æ±‚ï¼šæ ‡è®°depends_onï¼Œå‚æ•°å«use_previous_result`</span>;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span>.<span class="hljs-title function_">invoke</span>(prompt);
  <span class="hljs-keyword">let</span> plan = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response.<span class="hljs-property">content</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\[([\s\S]*)\]/</span>)[<span class="hljs-number">0</span>]);
  <span class="hljs-keyword">return</span> { plan };
}
<span class="hljs-comment">// ç»“æœç¤ºä¾‹: [</span>
<span class="hljs-comment">//   { step: 1, action: "ç”Ÿæˆæ˜¥å¤©ä¸»é¢˜è¯—æ­Œ", tool: "text_generator", params: { topic: "æ˜¥å¤©" }, depends_on: null },</span>
<span class="hljs-comment">//   { step: 2, action: "åŸºäºè¯—æ­Œç”Ÿæˆé…å›¾", tool: "image_generator", params: { use_previous_result: true }, depends_on: 1 }</span>
<span class="hljs-comment">// ]</span>
</code></pre>
</li>
<li><strong>æ‰§è¡ŒèŠ‚ç‚¹ (Execute)</strong>ï¼šè°ƒç”¨å·¥å…·ä¸ä¼ é€’ç»“æœã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">executeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> { plan } = state;
  <span class="hljs-keyword">const</span> results = []; <span class="hljs-keyword">const</span> toolsUsed = []; <span class="hljs-keyword">const</span> stepResults = {};
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> plan) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¤„ç†æ­¥éª¤ä¾èµ–</span>
      <span class="hljs-keyword">if</span> (step.<span class="hljs-property">depends_on</span>) step.<span class="hljs-property">params</span>.<span class="hljs-property">previous_result</span> = state.<span class="hljs-property">stepResults</span>[step.<span class="hljs-property">depends_on</span>];
      <span class="hljs-comment">// è°ƒç”¨å·¥å…·ï¼ˆå¤ç”¨LangChainå°è£…ï¼‰</span>
      <span class="hljs-keyword">switch</span> (step.<span class="hljs-property">tool</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"text_generator"</span>:
          <span class="hljs-keyword">const</span> textTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextGeneratorTool</span>();
          stepResult = <span class="hljs-keyword">await</span> textTool.<span class="hljs-title function_">_call</span>({ <span class="hljs-attr">prompt</span>: step.<span class="hljs-property">params</span>.<span class="hljs-property">topic</span>, <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>, <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"image_generator"</span>:
          <span class="hljs-keyword">const</span> imageTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageGeneratorTool</span>();
          stepResult = <span class="hljs-keyword">await</span> imageTool.<span class="hljs-title function_">_call</span>({ <span class="hljs-attr">prompt</span>: <span class="hljs-string">`åŸºäºæ–‡æœ¬ç”Ÿæˆå›¾åƒï¼š<span class="hljs-subst">${step.params.previous_result}</span>`</span>, <span class="hljs-attr">size</span>: <span class="hljs-string">"1024x1024"</span>, <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>, <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> });
          <span class="hljs-keyword">break</span>;
      }
      stepResults[step.<span class="hljs-property">step</span>] = stepResult;
      results.<span class="hljs-title function_">push</span>(<span class="hljs-string">`æ­¥éª¤<span class="hljs-subst">${step.step}</span>ï¼š<span class="hljs-subst">${stepResult}</span>`</span>);
      toolsUsed.<span class="hljs-title function_">push</span>(step.<span class="hljs-property">tool</span>);
    } <span class="hljs-keyword">catch</span> (error) { results.<span class="hljs-title function_">push</span>(<span class="hljs-string">`æ­¥éª¤<span class="hljs-subst">${step.step}</span>å¤±è´¥ï¼š<span class="hljs-subst">${error.message}</span>`</span>); }
  }
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">result</span>: results.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>), <span class="hljs-attr">tools</span>: toolsUsed, stepResults };
}
</code></pre>
</li>
</ul>
<p><strong>2. æ‰§è¡Œæµç¨‹ä¸ç»“æœ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">await</span> agent.<span class="hljs-title function_">run</span>(<span class="hljs-string">"å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—ï¼Œç„¶åä¸ºè¿™é¦–è¯—é…ä¸€å¼ å›¾"</span>)
</code></pre>
<p><strong>çŠ¶æ€æµè½¬</strong>ï¼š<code>åˆå§‹çŠ¶æ€ â†’ æ„ŸçŸ¥èŠ‚ç‚¹ â†’ è§„åˆ’èŠ‚ç‚¹ â†’ æ‰§è¡ŒèŠ‚ç‚¹ â†’ ç»“æŸ</code>
<strong>æœ€ç»ˆç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—..."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"perceived"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"intent"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åˆ›ä½œè¯—æ­Œå¹¶é…å›¾"</span><span class="hljs-punctuation">,</span> ... <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"plan"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>æ­¥éª¤<span class="hljs-number">1</span><span class="hljs-punctuation">,</span> æ­¥éª¤<span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­¥éª¤1ï¼šæ˜¥é£å¹ç»¿äº†å¤§åœ°...\næ­¥éª¤2ï¼šå›¾åƒURL: /uploads/xxx.jpg"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"text_generator"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"image_generator"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"stepResults"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"1"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ˜¥é£å¹ç»¿äº†å¤§åœ°..."</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"2"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/uploads/xxx.jpg"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ¡ˆä¾‹2ï¼šæ–‡æ¡£è§£æ + è¯­éŸ³åˆæˆï¼ˆæ–‡æ¡£è½¬è¯­éŸ³ï¼‰</strong>
<strong>éœ€æ±‚</strong>ï¼šç”¨æˆ·ä¸Šä¼ PDFï¼Œå…ˆè§£ææ–‡æœ¬ï¼Œå†åˆæˆè¯­éŸ³ï¼Œéœ€æ”¯æŒæµå¼åé¦ˆã€‚
<strong>æ¶æ„é€‚é…</strong>ï¼šåœ¨åŸæœ‰æ¡†æ¶ä¸Šæ‰©å±•å·¥å…· (<code>document_parser</code>, <code>audio_synthesizer</code>) å¹¶å®ç°æµå¼æ¥å£ã€‚</p>
<p><strong>1. æ ¸å¿ƒä»£ç é€‚é…</strong></p>
<ul>
<li><strong>æ„ŸçŸ¥èŠ‚ç‚¹æ‰©å±•</strong>ï¼šè¯†åˆ«æ–‡æ¡£ä¸è¯­éŸ³å·¥å…·ã€‚</li>
<li><strong>æ‰§è¡ŒèŠ‚ç‚¹æ‰©å±•</strong>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">switch</span> (step.<span class="hljs-property">tool</span>) {
  <span class="hljs-keyword">case</span> <span class="hljs-string">"document_parser"</span>:
    <span class="hljs-keyword">const</span> docTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DocumentParserTool</span>();
    stepResult = <span class="hljs-keyword">await</span> docTool.<span class="hljs-title function_">_call</span>({ <span class="hljs-attr">fileUrl</span>: step.<span class="hljs-property">params</span>.<span class="hljs-property">fileUrl</span>, <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>, <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> });
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> <span class="hljs-string">"audio_synthesizer"</span>:
    <span class="hljs-keyword">const</span> audioTool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AudioSynthesizerTool</span>();
    stepResult = <span class="hljs-keyword">await</span> audioTool.<span class="hljs-title function_">_call</span>({ <span class="hljs-attr">text</span>: step.<span class="hljs-property">params</span>.<span class="hljs-property">previous_result</span>, <span class="hljs-attr">voiceType</span>: <span class="hljs-string">"female"</span>, <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>, <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> });
    <span class="hljs-keyword">break</span>;
}
</code></pre>
</li>
</ul>
<p><strong>2. æµå¼æ‰§è¡Œä¸å‰ç«¯åé¦ˆ</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åç«¯æµå¼æ¥å£</span>
<span class="hljs-keyword">async</span> *<span class="hljs-title function_">stream</span>(<span class="hljs-params">input</span>) {
  <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">graph</span>.<span class="hljs-title function_">stream</span>({ input });
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
    <span class="hljs-keyword">yield</span> chunk; <span class="hljs-comment">// é€èŠ‚ç‚¹è¿”å›çŠ¶æ€</span>
  }
}
<span class="hljs-comment">// å‰ç«¯è°ƒç”¨ (SSE)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">callDocToAudioAgent</span>(<span class="hljs-params">message, fileUrl</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/agent/workflow'</span>, { <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ message, fileUrl }) });
  <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
    <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">const</span> chunk = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>().<span class="hljs-title function_">decode</span>(value));
    <span class="hljs-comment">// å®æ—¶æ›´æ–°UI: if (chunk.perceive) showProgress("å·²è¯†åˆ«éœ€æ±‚...");</span>
  }
}
</code></pre>
<h4 data-id="heading-2"><strong>ä¸‰ã€ä¸ç°æœ‰æ¶æ„çš„å®Œæ•´é—­ç¯ä½“ç³»</strong></h4>
<p><strong>1. å·¥å…·å°è£…é—­ç¯ï¼šå¤ç”¨ LangChain å·¥å…·å±‚</strong>
æ‰€æœ‰å·¥å…·åŸºäºç°æœ‰<code>Tool</code>åŸºç±»å°è£…ï¼Œè°ƒç”¨è§„èŒƒç»Ÿä¸€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageGeneratorTool</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Tool</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">_call</span>(<span class="hljs-params">input</span>) {
    <span class="hljs-comment">// å¯¹æ¥ç°æœ‰å›¾åƒæœåŠ¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateSeedreamImages</span>({
      <span class="hljs-attr">userId</span>: input.<span class="hljs-property">userId</span>,
      <span class="hljs-attr">sessionId</span>: input.<span class="hljs-property">sessionId</span>,
      <span class="hljs-attr">prompt</span>: input.<span class="hljs-property">prompt</span>
    });
  }
}
<span class="hljs-comment">// WorkflowAgentä¸­æ— æ„ŸçŸ¥è°ƒç”¨</span>
<span class="hljs-keyword">const</span> tool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageGeneratorTool</span>();
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">_call</span>({...});
</code></pre>
<p><strong>é—­ç¯é“¾è·¯</strong>ï¼š<code>WorkflowAgent â†’ LangChain å·¥å…· â†’ ç°æœ‰æœåŠ¡å±‚ â†’ æ•°æ®åº“</code></p>
<p><strong>2. æ§åˆ¶å™¨ä¸è·¯ç”±é›†æˆï¼ˆå¯¹æ¥ç°æœ‰æ¥å£ï¼‰</strong>
åˆ›å»ºæ§åˆ¶å™¨ï¼Œå¤ç”¨ç”¨æˆ·è®¤è¯ä¸æ—¥å¿—å­˜å‚¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// workflowAgentController.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">chat</span>: <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">const</span> { message, session_id } = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> userId = req.<span class="hljs-property">user</span>.<span class="hljs-property">user_id</span>; <span class="hljs-comment">// ç°æœ‰è®¤è¯ä½“ç³»</span>
    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span> });

    <span class="hljs-keyword">const</span> agent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkflowAgent</span>({ userId, <span class="hljs-attr">sessionId</span>: session_id });
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> agent.<span class="hljs-title function_">stream</span>({ message })) {
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(chunk)}</span>\n\n`</span>); <span class="hljs-comment">// æµå¼æ¨é€</span>
    }
    <span class="hljs-comment">// å¤ç”¨ç°æœ‰æ—¥å¿—å­˜å‚¨</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveChatRecord</span>({ <span class="hljs-attr">user_id</span>: userId, session_id, <span class="hljs-attr">request_text</span>: message, <span class="hljs-attr">model</span>: <span class="hljs-string">'workflow-agent'</span> });
    res.<span class="hljs-title function_">end</span>();
  }
};
<span class="hljs-comment">// é›†æˆåˆ°ç°æœ‰è·¯ç”±</span>
router.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/workflow'</span>, workflowAgentController.<span class="hljs-property">chat</span>);
</code></pre>
<p><strong>3. ä¸ BaseAgent çš„åœºæ™¯åˆ†å·¥</strong></p>





























<table><thead><tr><th align="left">ä»»åŠ¡ç±»å‹</th><th align="left">æ¨è Agent</th><th align="left">å·¥å…·è°ƒç”¨æ•°</th><th align="left">æµç¨‹æ§åˆ¶éœ€æ±‚</th></tr></thead><tbody><tr><td align="left">å•æ¨¡æ€ç®€å•ä»»åŠ¡ï¼ˆå¦‚â€œç”Ÿæˆæ—¥è½å›¾â€ï¼‰</td><td align="left">BaseAgent</td><td align="left">1</td><td align="left">æ— éœ€é¡ºåºæ§åˆ¶</td></tr><tr><td align="left">å¤šæ¨¡æ€å¤šæ­¥éª¤ä»»åŠ¡ï¼ˆå¦‚å†™è¯—é…å›¾ï¼‰</td><td align="left">WorkflowAgent</td><td align="left">â‰¥2</td><td align="left">éœ€æ­¥éª¤ä¾èµ–ä¸é¡ºåºæ§åˆ¶</td></tr><tr><td align="left">ä¼ä¸šçº§åˆè§„ä»»åŠ¡ï¼ˆå¦‚å¸¦å®¡æ ¸çš„å†…å®¹ç”Ÿæˆï¼‰</td><td align="left">WorkflowAgentï¼ˆåŠ å®¡æ ¸èŠ‚ç‚¹ï¼‰</td><td align="left">â‰¥2</td><td align="left">éœ€åˆ†æ”¯ä¸äººå·¥å¹²é¢„</td></tr></tbody></table>
<h4 data-id="heading-3"><strong>å››ã€ç”Ÿäº§çº§æ‰©å±•ä¸æœ€ä½³å®è·µ</strong></h4>
<p><strong>4.1 é”™è¯¯å¤„ç†å¢å¼ºï¼šç”Ÿäº§çº§å¯é æ€§ä¿éšœ</strong>
é€šè¿‡ <strong>é‡è¯•ç­–ç•¥ã€é”™è¯¯é™çº§ã€æ—¥å¿—ä¸ŠæŠ¥</strong> ä¸‰é‡æœºåˆ¶ï¼Œå°†ä»»åŠ¡æˆåŠŸç‡æå‡è‡³95%ä»¥ä¸Šã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">executeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> plan) {
    <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>, maxRetry = <span class="hljs-number">3</span>, stepSuccess = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">while</span> (retryCount &lt; maxRetry &amp;&amp; !stepSuccess) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. ä¾èµ–æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (step.<span class="hljs-property">depends_on</span> &amp;&amp; !stepResults[step.<span class="hljs-property">depends_on</span>]) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`ä¾èµ–æ­¥éª¤æœªæˆåŠŸ`</span>);
        <span class="hljs-comment">// 2. å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (step.<span class="hljs-property">tool</span> === <span class="hljs-string">"image_generator"</span> &amp;&amp; !step.<span class="hljs-property">params</span>.<span class="hljs-property">previous_result</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å‚æ•°ä¸å®Œæ•´"</span>);
        <span class="hljs-comment">// 3. å·¥å…·è°ƒç”¨ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
        stepResult = <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">_call</span>({ ..., <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span> });
        stepSuccess = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æˆåŠŸ</span>
      } <span class="hljs-keyword">catch</span> (error) {
        retryCount++;
        <span class="hljs-comment">// 4. æŒ‡æ•°é€€é¿é‡è¯•</span>
        <span class="hljs-keyword">if</span> (retryCount &lt; maxRetry) <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span> * retryCount));
      }
    }
    <span class="hljs-comment">// 5. å¤šæ¬¡é‡è¯•å¤±è´¥ï¼šæ‰§è¡Œé™çº§</span>
    <span class="hljs-keyword">if</span> (!stepSuccess) {
      <span class="hljs-keyword">if</span> (step.<span class="hljs-property">tool</span> === <span class="hljs-string">"text_generator"</span>) stepResult = <span class="hljs-string">"é»˜è®¤æ˜¥å¤©ä¸»é¢˜è¯—æ­Œ..."</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (step.<span class="hljs-property">tool</span> === <span class="hljs-string">"image_generator"</span>) stepResult = <span class="hljs-string">"/static/fallback/spring.jpg"</span>;
    }
    <span class="hljs-comment">// 6. é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ï¼ˆå¯¹æ¥ELKç­‰ç›‘æ§ï¼‰</span>
    <span class="hljs-keyword">if</span> (errorLogs.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">await</span> <span class="hljs-title function_">reportErrorLogs</span>({ <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>, <span class="hljs-attr">logs</span>: errorLogs });
  }
}
</code></pre>
<p><strong>4.2 æ”¯æŒæ¡ä»¶åˆ†æ”¯ä¸å¾ªç¯ï¼ˆä¼ä¸šçº§åˆè§„éœ€æ±‚ï¼‰</strong>
åº”å¯¹â€œäººå·¥å®¡æ ¸â€ã€â€œå¤šè½®ä¼˜åŒ–â€ç­‰åŠ¨æ€æµç¨‹ï¼Œä»¥â€œå†™è¯—é…å›¾+äººå·¥å®¡æ ¸â€ä¸ºä¾‹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">createGraph</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ... åŸæœ‰èŠ‚ç‚¹ ...</span>
  workflow.<span class="hljs-title function_">addNode</span>(<span class="hljs-string">'review'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">reviewNode</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>)); <span class="hljs-comment">// æ–°å¢å®¡æ ¸èŠ‚ç‚¹</span>
  workflow.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">'execute'</span>, <span class="hljs-string">'review'</span>);
  <span class="hljs-comment">// æ¡ä»¶è¾¹ï¼šæ ¹æ®å®¡æ ¸ç»“æœå†³å®šåç»­æµç¨‹</span>
  workflow.<span class="hljs-title function_">addConditionalEdges</span>(
    <span class="hljs-string">'review'</span>,
    <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> status = state.<span class="hljs-property">reviewStatus</span>;
      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">"approved"</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status === <span class="hljs-string">"rejected"</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"replan"</span>; <span class="hljs-comment">// é©³å›åˆ™é‡æ–°è§„åˆ’</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">"review"</span>; <span class="hljs-comment">// å¾…å®¡æ ¸åˆ™å¾ªç¯ç­‰å¾…</span>
    },
    { <span class="hljs-string">'end'</span>: <span class="hljs-variable constant_">END</span>, <span class="hljs-string">'replan'</span>: <span class="hljs-string">'plan'</span>, <span class="hljs-string">'review'</span>: <span class="hljs-string">'review'</span> }
  );
}
<span class="hljs-comment">// å®¡æ ¸é©³å›åï¼Œè§„åˆ’èŠ‚ç‚¹èå…¥å®¡æ ¸æ„è§é‡æ–°ç”Ÿæˆè®¡åˆ’</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">planNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> { perceived, reviewStatus, reviewComment } = state;
  <span class="hljs-keyword">const</span> reviewInfo = reviewStatus === <span class="hljs-string">"rejected"</span> ? <span class="hljs-string">`ï¼ˆå®¡æ ¸é©³å›åŸå› ï¼š<span class="hljs-subst">${reviewComment}</span>ï¼‰`</span> : <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`åŸºäºæ„å›¾åˆ¶å®šæ­¥éª¤è®¡åˆ’...æ„å›¾ï¼š<span class="hljs-subst">${perceived.intent}</span> <span class="hljs-subst">${reviewInfo}</span>`</span>;
  <span class="hljs-comment">// ... ç”Ÿæˆæ–°è®¡åˆ’</span>
}
</code></pre>
<p><strong>4.3 æ€§èƒ½ä¼˜åŒ–ï¼šé«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•ˆç‡æå‡</strong>
ä» <strong>å¹¶è¡Œæ‰§è¡Œã€çŠ¶æ€ç¼“å­˜ã€èµ„æºå¤ç”¨</strong> ä¸‰æ–¹é¢ä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>æ— ä¾èµ–æ­¥éª¤å¹¶è¡Œ</strong>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">executeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> independentSteps = plan.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">step</span> =&gt;</span> step.<span class="hljs-property">depends_on</span> === <span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> dependentSteps = plan.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">step</span> =&gt;</span> step.<span class="hljs-property">depends_on</span> !== <span class="hljs-literal">null</span>);
  <span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œæ— ä¾èµ–æ­¥éª¤</span>
  <span class="hljs-keyword">if</span> (independentSteps.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> parallelPromises = independentSteps.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">step</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeSingleStep</span>(step, ...));
    <span class="hljs-keyword">const</span> parallelResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(parallelPromises);
    <span class="hljs-comment">// ...å¤„ç†ç»“æœ</span>
  }
  <span class="hljs-comment">// ä¸²è¡Œæ‰§è¡Œä¾èµ–æ­¥éª¤</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> dependentSteps.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">step</span> - b.<span class="hljs-property">step</span>)) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeSingleStep</span>(step, ...);
  }
}
</code></pre>
</li>
<li><strong>é‡å¤ä»»åŠ¡çŠ¶æ€ç¼“å­˜</strong>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">executeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> cacheKey = <span class="hljs-string">`user:<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.userId}</span>:task:<span class="hljs-subst">${md5(input)}</span>`</span>;
  <span class="hljs-keyword">const</span> cachedResult = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(cacheKey); <span class="hljs-comment">// Redisç¼“å­˜</span>
  <span class="hljs-keyword">if</span> (cachedResult) <span class="hljs-keyword">return</span> { ...parsedCache, <span class="hljs-attr">fromCache</span>: <span class="hljs-literal">true</span> }; <span class="hljs-comment">// å‘½ä¸­ç¼“å­˜</span>
  <span class="hljs-comment">// ... æ‰§è¡Œä»»åŠ¡</span>
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(cacheKey, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result), <span class="hljs-string">"EX"</span>, <span class="hljs-number">3600</span>); <span class="hljs-comment">// å†™å…¥ç¼“å­˜</span>
  <span class="hljs-keyword">return</span> { ...result, <span class="hljs-attr">fromCache</span>: <span class="hljs-literal">false</span> };
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-4"><strong>äº”ã€å­¦ä¹ è·¯å¾„ï¼šä»å…¥é—¨åˆ°å®æˆ˜</strong></h4>
<ol>
<li><strong>å…¥é—¨é˜¶æ®µ</strong>ï¼šæŒæ¡æ ¸å¿ƒç»„ä»¶ã€‚
<ul>
<li><strong>ç¯å¢ƒæ­å»º</strong>ï¼šå®‰è£… <code>langchain</code>, <code>langgraph</code>, <code>redis</code>ï¼Œé…ç½®LLMã€‚</li>
<li><strong>åŸºç¡€ç»ƒä¹ </strong>ï¼šç”¨LangChainå°è£…ä¸€ä¸ªè‡ªå®šä¹‰å·¥å…·ï¼›ç”¨LangGraphå®ç°â€œå•æ­¥éª¤æ–‡æœ¬ç”Ÿæˆâ€æµç¨‹ã€‚</li>
</ul>
</li>
<li><strong>è¿›é˜¶é˜¶æ®µ</strong>ï¼šæ”»å…‹å¤æ‚æµç¨‹ã€‚
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼šå®ç°â€œé”™è¯¯é‡è¯•+é™çº§â€ï¼›å¼€å‘â€œæ¡ä»¶åˆ†æ”¯+å¾ªç¯â€ï¼ˆä»¥æ–‡æ¡£è½¬è¯­éŸ³ä¸ºæ¡ˆä¾‹ï¼‰ã€‚</li>
<li><strong>æµå¼å¤„ç†</strong>ï¼šåŸºäº <code>agent.stream()</code> å®ç°å‰ç«¯å®æ—¶è¿›åº¦å±•ç¤ºï¼Œè°ƒè¯•SSEè¿æ¥ã€‚</li>
</ul>
</li>
<li><strong>å®æˆ˜é˜¶æ®µ</strong>ï¼šæ„å»ºå®Œæ•´ç³»ç»Ÿã€‚
<ul>
<li><strong>ç»¼åˆé¡¹ç›®</strong>ï¼šå¼€å‘â€œæ™ºèƒ½å†…å®¹ç”Ÿäº§ç³»ç»Ÿâ€ï¼šæ–‡æ¡£â†’è§£æâ†’æ‘˜è¦â†’é…å›¾â†’åˆæˆè¯­éŸ³ã€‚</li>
<li><strong>æ¶æ„é—­ç¯</strong>ï¼šå¤ç”¨ç°æœ‰ç”¨æˆ·ã€æ—¥å¿—ã€å·¥å…·æœåŠ¡ï¼›è¿›è¡Œå‹æµ‹ä¼˜åŒ–ï¼Œé€šè¿‡ç¼“å­˜å’Œå¹¶è¡Œé™ä½å“åº”æ—¶é—´ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-5"><strong>å…­ã€æ€»ç»“ï¼šæ ¸å¿ƒä»·å€¼ä¸è½åœ°å»ºè®®</strong></h4>
<ul>
<li><strong>æ¡†æ¶ååŒä»·å€¼</strong>ï¼š
<ul>
<li><code>LangChain</code> è§£å†³ <strong>â€œå·¥å…·å¤ç”¨â€</strong> å’Œ <strong>â€œèƒ½åŠ›æ‰©å±•â€</strong>ã€‚</li>
<li><code>LangGraph</code> è§£å†³ <strong>â€œæµç¨‹æ§åˆ¶â€</strong> å’Œ <strong>â€œçŠ¶æ€ç®¡ç†â€</strong>ã€‚</li>
<li>äºŒè€…ç»“åˆå®ç°ä»â€œå·¥å…·è°ƒç”¨â€åˆ°â€œæ™ºèƒ½ç³»ç»Ÿâ€çš„è·¨è¶Šã€‚</li>
</ul>
</li>
<li><strong>æ¶æ„é—­ç¯å…³é”®</strong>ï¼š
<ul>
<li><strong>ç»„ä»¶å¤ç”¨</strong>ï¼šæ‰€æœ‰å·¥å…·åŸºäºç°æœ‰åŸºç±»å°è£…ã€‚</li>
<li><strong>çŠ¶æ€é€æ˜</strong>ï¼šå…¨å±€çŠ¶æ€é€šé“ä¾¿äºæ’æŸ¥ä¸æ•°æ®åˆ†æã€‚</li>
<li><strong>åœºæ™¯é€‚é…</strong>ï¼šæ˜ç¡® <code>BaseAgent</code> ä¸ <code>WorkflowAgent</code> åˆ†å·¥ï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚</li>
</ul>
</li>
<li><strong>è½åœ°æ³¨æ„äº‹é¡¹</strong>ï¼š
<ul>
<li><strong>é”™è¯¯å¤„ç†åˆ†çº§</strong>ï¼šå…³é”®æ­¥éª¤ä¸­æ–­ï¼Œéå…³é”®æ­¥éª¤é™çº§ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šå¤§æ–‡ä»¶ä»»åŠ¡æ‹†åˆ†å¹¶è¡Œï¼Œé«˜é¢‘ä»»åŠ¡åŠ ç¼“å­˜ã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šè®°å½•å·¥å…·è€—æ—¶ä¸é”™è¯¯ç‡ï¼Œåˆ©ç”¨LangSmithç­‰å·¥å…·ä¼˜åŒ–æµç¨‹ã€‚</li>
</ul>
</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„æ¡ˆä¾‹ä¸è®¾è®¡ï¼Œå¼€å‘è€…å¯å°†å¤šæ¨¡æ€AIåº”ç”¨ä»â€œDemoçº§â€å¯é åœ°å‡çº§ä¸ºâ€œç”Ÿäº§çº§â€ï¼Œæœ‰æ•ˆè§£å†³æµç¨‹å¤±æ§çš„ç—›ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªå…è´¹ä¸”å®ç”¨çš„ GitHub å·¥å…·ï¼Œå¯å°† GitHub çš„ README ç¿»è¯‘æˆå¤šç§è¯­è¨€ï¼]]></title>    <link>https://juejin.cn/post/7579871631095693338</link>    <guid>https://juejin.cn/post/7579871631095693338</guid>    <pubDate>2025-12-04T13:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579871631095693338" data-draft-id="7579798332778430473" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªå…è´¹ä¸”å®ç”¨çš„ GitHub å·¥å…·ï¼Œå¯å°† GitHub çš„ README ç¿»è¯‘æˆå¤šç§è¯­è¨€ï¼"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-04T13:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªå…è´¹ä¸”å®ç”¨çš„ GitHub å·¥å…·ï¼Œå¯å°† GitHub çš„ README ç¿»è¯‘æˆå¤šç§è¯­è¨€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T13:42:29.000Z" title="Thu Dec 04 2025 13:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ZDoc å·¥å…·ä»‹ç»</h2>
<p>ZDoc æ˜¯ä¸€ä¸ªå…è´¹ä¸”å®ç”¨çš„åœ¨çº¿å·¥å…·ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯å°† GitHub ä»“åº“ä¸­çš„ README è‡ªåŠ¨ç¿»è¯‘æˆå¤šç§è¯­è¨€ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾å°† GitHub é¡¹ç›® README ä»‹ç»ç¿»è¯‘æˆå¤šç§è¯­è¨€ï¼Œé™ä½ç†è§£æˆæœ¬ï¼Œæå‡åä½œæ•ˆç‡ã€‚</p>
<ul>
<li><strong>åœ¨çº¿è®¿é—®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zdoc.app%2Fzh" target="_blank" title="https://www.zdoc.app/zh" ref="nofollow noopener noreferrer">www.zdoc.app/zh</a></strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdd9944ed5df48cdb37cc4d5ef3616cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=vmCdccCOeBD3oa7Rn%2FOiMBfzOXs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">æ”¯æŒè¯­è¨€</h2>
<p>ä¸­æ–‡ã€ä¿„è¯­ã€å¾·è¯­ã€è‹±è¯­ã€è¥¿ç­ç‰™è¯­ã€æ³•è¯­ã€æ—¥è¯­ã€éŸ©è¯­ã€è‘¡è„ç‰™è¯­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ff10a347bc141d5a30b3320645c3eb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=s0DcpNqSrLVE4S6OgLkR%2FmqGZ1w%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">å¿«é€Ÿä½¿ç”¨</h2>
<ul>
<li>æ‰¾åˆ°ä¸€ä¸ªçº¯è‹±æ–‡æè¿° README GitHub å¼€æºé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fagent-framework" target="_blank" title="https://github.com/microsoft/agent-framework" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2c8f86245fc47288c664171f18a2484~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=rtgMw39M1E98Y73EHh0simMOlig%3D" alt="" loading="lazy"/></p>
<p><strong>ä½¿ç”¨ ZDoc å¿«é€ŸæŠŠ README ç¿»è¯‘æˆä¸­æ–‡ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a8390231ddd4c5db94e4bd9cb20b169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=IcQI4hBMCNW0sUj4Gwbfnw5E3m0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df8779ac34cd43e292cc05fa6f5c5722~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=JAidhtsCHKds5X1hNPAmgivpVJs%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸‹è½½ä¸­æ–‡ README Markdown æ–‡ä»¶ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86fe4c5255954a40958239afb212fa58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=IlFbOfiKZZoC7Bgi4ArJVcNJbuI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">æ›´å¤š GitHub ä½¿ç”¨æŒ‡å—</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65301710fd304c489c6ae1a4031d474d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765460549&amp;x-signature=vsjqQdIsulIFMFXCC9TxChvPCkw%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Alias Assistantï¼šæ–°ä¸€ä»£ macOS Shell åˆ«åç®¡ç†è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579846221167165494</link>    <guid>https://juejin.cn/post/7579846221167165494</guid>    <pubDate>2025-12-04T14:00:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579846221167165494" data-draft-id="7579846221167132726" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Alias Assistantï¼šæ–°ä¸€ä»£ macOS Shell åˆ«åç®¡ç†è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-12-04T14:00:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é‘«åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685871694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Alias Assistantï¼šæ–°ä¸€ä»£ macOS Shell åˆ«åç®¡ç†è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685871694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é‘«åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T14:00:18.000Z" title="Thu Dec 04 2025 14:00:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å†…å®¹æ¥è‡ªï¼šNotebookLM å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOSpoon%2Falias-assistant" target="_blank" title="https://github.com/OSpoon/alias-assistant" ref="nofollow noopener noreferrer">Alias-Assistant</a> é¡¹ç›®åˆ†æåè‡ªåŠ¨ç”Ÿæˆ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55db3d453aba4df59d730d44493c1e77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZGr5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765461618&amp;x-signature=9EmqCMs8fw4u%2BT934uwtE%2BAG6tE%3D" alt="unnamed.png" loading="lazy"/></p>
<h2 data-id="heading-0">1.0 å¼•è¨€ï¼šæå‡å‘½ä»¤è¡Œæ•ˆç‡çš„ç°ä»£åŒ–é€”å¾„</h2>
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ã€ç³»ç»Ÿè¿ç»´ä¸æ•°æ®ç§‘å­¦é¢†åŸŸï¼Œå‘½ä»¤è¡Œï¼ˆShellï¼‰å§‹ç»ˆæ˜¯ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒå·¥å…·ã€‚å®ƒä¸ºä¸“ä¸šæŠ€æœ¯äººå‘˜æä¾›äº†æ— ä¸ä¼¦æ¯”çš„å¼ºå¤§èƒ½åŠ›ä¸çµæ´»æ€§ã€‚ä¸ºäº†è¿›ä¸€æ­¥æå‡æ•ˆç‡ï¼Œå¼€å‘è€…æ™®éé‡‡ç”¨ Shell åˆ«åï¼ˆaliasï¼‰æœºåˆ¶ï¼Œå°†å†—é•¿ã€å¤æ‚çš„å‘½ä»¤ç®€åŒ–ä¸ºæ˜“äºè®°å¿†çš„çŸ­è¯­ã€‚ç„¶è€Œï¼Œéšç€é¡¹ç›®å¤æ‚åº¦çš„å¢åŠ å’Œå·¥å…·é“¾çš„æ‰©å±•ï¼Œåˆ«åçš„æ•°é‡æ€¥å‰§å¢é•¿ï¼Œä¼ ç»Ÿçš„ç®¡ç†æ–¹å¼å·²æˆä¸ºåˆ¶çº¦å¼€å‘è€…æ•ˆç‡çš„æ˜¾è‘—ç“¶é¢ˆã€‚å¼€å‘è€…æ™®éé¢ä¸´ç€è®°å¿†æˆæœ¬é«˜ã€ç®¡ç†æµç¨‹ç¹çã€è·¨è®¾å¤‡åŒæ­¥å›°éš¾ç­‰æŒ‘æˆ˜ã€‚</p>
<p>ä¸ºäº†åº”å¯¹è¿™äº›ç—›ç‚¹ï¼ŒAlias Assistant åº”è¿è€Œç”Ÿã€‚å®ƒæ˜¯ä¸€æ¬¾ä¸“ä¸º macOSï¼ˆApple Siliconï¼‰å¹³å°è®¾è®¡çš„ç°ä»£åŒ– Shell åˆ«åç®¡ç†è§£å†³æ–¹æ¡ˆã€‚å®ƒé€šè¿‡ç›´è§‚çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ã€é«˜æ•ˆçš„æ“ä½œæµç¨‹ä»¥åŠå°†æ•°æ®æ§åˆ¶æƒå®Œå…¨äº¤è¿˜ç»™ç”¨æˆ·çš„è®¾è®¡ç†å¿µï¼Œæ—¨åœ¨ä»æ ¹æœ¬ä¸Šé©æ–°å¼€å‘è€…ç®¡ç†å’Œä½¿ç”¨ Shell åˆ«åçš„æ–¹å¼ï¼Œä½¿å…¶æˆä¸ºä¸€ç§å®‰å…¨ã€é«˜æ•ˆä¸”æ„‰æ‚¦çš„ä½“éªŒã€‚</p>
<p>ä¸‹ä¸€ç« èŠ‚å°†æ·±å…¥å‰–æä¼ ç»Ÿåˆ«åç®¡ç†æ–¹å¼æ‰€å›ºæœ‰çš„å…·ä½“é—®é¢˜ï¼Œä»¥å‡¸æ˜¾å¼•å…¥æ–°å‹è§£å†³æ–¹æ¡ˆçš„å¿…è¦æ€§ã€‚</p>
<h2 data-id="heading-1">2.0 æŒ‘æˆ˜ï¼šä¼ ç»Ÿ Shell åˆ«åç®¡ç†çš„å›ºæœ‰ç“¶é¢ˆ</h2>
<p>åœ¨å¼•å…¥æ–°å·¥å…·ä¹‹å‰ï¼Œå®¡è§†å¹¶ç†è§£ç°æœ‰å·¥ä½œæµç¨‹ä¸­çš„ä¸è¶³è‡³å…³é‡è¦ã€‚è¿™ä¸ä»…èƒ½æ­ç¤ºå˜é©çš„å¿…è¦æ€§ï¼Œä¹Ÿèƒ½ä¸ºè¯„ä¼°è§£å†³æ–¹æ¡ˆçš„ä»·å€¼æä¾›æ¸…æ™°çš„åŸºå‡†ã€‚ä¼ ç»Ÿçš„ Shell åˆ«åç®¡ç†ï¼Œé€šå¸¸ä¾èµ–äºå¼€å‘è€…æ‰‹åŠ¨ç¼–è¾‘ <code>.zshrc</code>ã€<code>.bash_profile</code> ç­‰çº¯æ–‡æœ¬é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸€å®è·µè™½ç„¶åŸºç¡€ï¼Œå´æ½œè—ç€å››å¤§æ ¸å¿ƒç—›ç‚¹ï¼š</p>
<ul>
<li><strong>é«˜å­¦ä¹ ä¸è®°å¿†æˆæœ¬</strong> å½“åˆ«åæ•°é‡ç´¯ç§¯åˆ°æ•°åç”šè‡³ä¸Šç™¾ä¸ªæ—¶ï¼Œå®Œå…¨ä¾èµ–äººè„‘è®°å¿†å˜å¾—ä¸åˆ‡å®é™…ã€‚å¼€å‘è€…éœ€è¦é¢‘ç¹åœ°æ‰“å¼€é…ç½®æ–‡ä»¶æŸ¥æ‰¾æˆ–å›é¡¾ï¼Œè¿™ä¸ä»…æ‰“æ–­äº†å·¥ä½œå¿ƒæµï¼Œä¹Ÿå¯¹è®¤çŸ¥é€ æˆäº†æŒç»­çš„è´Ÿæ‹…ï¼Œå°¤å…¶å¯¹äºæ–°åŠ å…¥å›¢é˜Ÿçš„æˆå‘˜è€Œè¨€ï¼Œå­¦ä¹ å’Œé€‚åº”è¿™å¥—â€œéšæ€§çŸ¥è¯†â€çš„æˆæœ¬æ›´é«˜ã€‚</li>
<li><strong>ä½æ•ˆçš„ç®¡ç†æµç¨‹</strong> åœ¨çº¯æ–‡æœ¬æ–‡ä»¶ä¸­è¿›è¡Œåˆ«åçš„å¢ã€åˆ ã€æ”¹ã€æŸ¥æ“ä½œï¼Œæµç¨‹æä¸ºç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚ç¼ºä¹ç»“æ„åŒ–çš„è§†å›¾å’Œæœç´¢åŠŸèƒ½ï¼Œä½¿å¾—å®šä½ç‰¹å®šåˆ«åå¦‚åŒå¤§æµ·æé’ˆã€‚åŒæ—¶ï¼Œæ‰‹åŠ¨ç¼–è¾‘ææ˜“å¼•å…¥è¯­æ³•é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ª Shell ç¯å¢ƒåŠ è½½å¤±è´¥ï¼Œä¸ºæ’æŸ¥é—®é¢˜å¸¦æ¥é¢å¤–çš„æ—¶é—´å¼€é”€ã€‚</li>
<li><strong>ç¼ºä¹å¯ç§»æ¤æ€§</strong> åœ¨å¤šå°è®¾å¤‡ï¼ˆä¾‹å¦‚å…¬å¸çš„ Mac å’Œä¸ªäººç¬”è®°æœ¬ï¼‰ä¹‹é—´ä¿æŒåˆ«åé…ç½®çš„åŒæ­¥æ˜¯ä¸€é¡¹è‰°å·¨çš„æŒ‘æˆ˜ã€‚å¼€å‘è€…é€šå¸¸éœ€è¦é€šè¿‡æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€ç‰ˆæœ¬æ§åˆ¶å·¥å…·æˆ–å…¶ä»–åŒæ­¥æœåŠ¡æ¥ç»´æŠ¤ä¸€è‡´æ€§ï¼Œè¿™äº›æ–¹æ³•ä¸ä»…æ“ä½œå¤æ‚ï¼Œè€Œä¸”éš¾ä»¥ä¿è¯å®æ—¶æ€§å’Œå‡†ç¡®æ€§ï¼Œå¸¸å¸¸å¯¼è‡´ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li>
<li><strong>æ½œåœ¨çš„å®‰å…¨é£é™©</strong> é…ç½®æ–‡ä»¶æ˜¯ Shell ç¯å¢ƒå®‰å…¨çš„å…³é”®ä¸€ç¯ã€‚è‹¥æƒé™ç®¡ç†ä¸å½“ï¼Œå¯èƒ½è¢«æ¶æ„ç¨‹åºç¯¡æ”¹ï¼›è€Œæ¥è·¯ä¸æ˜çš„é…ç½®è„šæœ¬æˆ–åˆ«åç‰‡æ®µï¼Œåˆ™å¯èƒ½åŒ…å«æ‰§è¡Œæ¶æ„ä»£ç çš„å‘½ä»¤ï¼Œç»™ç”¨æˆ·ç³»ç»Ÿå’Œæ•°æ®å¸¦æ¥å®‰å…¨éšæ‚£ã€‚</li>
</ul>
<p>è¿™äº›æ ¹æ·±è’‚å›ºçš„ç“¶é¢ˆï¼Œå…±åŒé™åˆ¶äº†å‘½ä»¤è¡Œå·¥å…·çš„æ•ˆç‡æ½œåŠ›ã€‚æ­£æ˜¯ä¸ºäº†ç³»ç»Ÿæ€§åœ°è§£å†³è¿™äº›é—®é¢˜ï¼ŒAlias Assistant æä¾›äº†å…¨æ–°çš„æ€è·¯ä¸æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">3.0 è§£å†³æ–¹æ¡ˆï¼šAlias Assistant æ ¸å¿ƒä»·å€¼ä¸»å¼ </h2>
<p>Alias Assistant çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯ç›´é¢ä¼ ç»Ÿåˆ«åç®¡ç†çš„æŒ‘æˆ˜ï¼Œé€šè¿‡ç°ä»£åŒ–çš„è½¯ä»¶å·¥ç¨‹å®è·µï¼Œæä¾›ä¸€ä¸ªé›†é«˜æ•ˆã€å®‰å…¨ã€ä¾¿æ·äºä¸€ä½“çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒå¹¶éç®€å•åœ°æ›¿ä»£æ–‡æœ¬ç¼–è¾‘ï¼Œè€Œæ˜¯ä»æ ¹æœ¬ä¸Šé‡å¡‘äº†åˆ«åç®¡ç†çš„å·¥ä½œæµã€‚å…¶æ ¸å¿ƒä»·å€¼ä¸»å¼ ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<p><code>æ•ˆç‡æå‡ä¸å·¥ä½œæµç®€åŒ–</code> Alias Assistant å°†ç¹ççš„æ–‡æœ¬ç¼–è¾‘æ“ä½œè½¬å˜ä¸ºç›´è§‚çš„å›¾å½¢åŒ–ç•Œé¢äº¤äº’ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¿«é€Ÿæœç´¢åŠŸèƒ½åœ¨æ•°ç§’å†…å®šä½åˆ°æ‰€éœ€åˆ«åï¼Œé€šè¿‡â€œä¸€é”®å¤åˆ¶â€æˆ–â€œæ‰“å¼€æ–°ç»ˆç«¯â€ç­‰åŠŸèƒ½ï¼Œæå¤§åœ°å‡å°‘äº†ä»â€œæƒ³åˆ°â€åˆ°â€œæ‰§è¡Œâ€çš„è·¯å¾„ã€‚è¿™ç§æ— ç¼çš„ä½“éªŒæœ€å¤§é™åº¦åœ°å‡å°‘äº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè®©å¼€å‘è€…èƒ½å°†æ›´å¤šç²¾åŠ›èšç„¦äºæ ¸å¿ƒä»»åŠ¡æœ¬èº«ï¼Œä»è€Œæ˜¾è‘—æå‡æ—¥å¸¸å·¥ä½œæ•ˆç‡ã€‚</p>
<p><code>æ•°æ®ä¸»æƒä¸å®‰å…¨æ€§</code> åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œæ•°æ®å®‰å…¨ä¸éšç§æ˜¯ä¸å¯é€¾è¶Šçš„çº¢çº¿ã€‚Alias Assistant çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯<strong>æœ¬åœ°å­˜å‚¨</strong>ã€‚æ‰€æœ‰åˆ«åæ•°æ®å‡å®‰å…¨åœ°å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°è®¾å¤‡ä¸Šï¼Œåº”ç”¨æœ¬èº«ä¸è¿›è¡Œä»»ä½•å½¢å¼çš„ç½‘ç»œæ•°æ®ä¼ è¾“æˆ–äº‘ç«¯åŒæ­¥ã€‚è¿™æ„å‘³ç€ç”¨æˆ·å¯¹è‡ªå·±çš„æ•°æ®æ‹¥æœ‰ç»å¯¹çš„æ§åˆ¶æƒï¼Œå®Œå…¨æœç»äº†å› äº‘æœåŠ¡æ•…éšœæˆ–æ•°æ®æ³„éœ²è€Œå¸¦æ¥çš„é£é™©ï¼Œå®Œç¾å¥‘åˆä¼ä¸šå¯¹æ•°æ®å®‰å…¨ä¸åˆè§„æ€§çš„ä¸¥æ ¼è¦æ±‚ã€‚</p>
<p><code>ä¾¿æ·çš„è¿ç§»ä¸å¤‡ä»½</code> é’ˆå¯¹ä¼ ç»Ÿæ–¹å¼ä¸­é…ç½®éš¾ä»¥ç§»æ¤çš„ç—›ç‚¹ï¼ŒAlias Assistant æä¾›äº†ç®€å•æ˜“ç”¨çš„å¯¼å…¥ä¸å¯¼å‡ºåŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥éšæ—¶å°†æ‰€æœ‰åˆ«åé…ç½®å¯¼å‡ºä¸ºä¸€ä¸ªæ ‡å‡†çš„ <code>.sh</code> æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæˆ–åœ¨å¤šå°è®¾å¤‡é—´è½»æ¾è¿ç§»ã€‚è¿™ä¸€åŠŸèƒ½å¯¹äºå›¢é˜Ÿå®ç°æ ‡å‡†åŒ–é…ç½®ã€æ–°å‘˜å·¥å¿«é€Ÿå…¥èŒä»¥åŠç³»ç»Ÿé‡è£…åçš„ç¯å¢ƒæ¢å¤ç­‰åœºæ™¯ï¼Œéƒ½å…·æœ‰æé«˜çš„å®ç”¨ä»·å€¼ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒAlias Assistant å°†è‡ªèº«å®šä½ä¸ºä¸€ä¸ªä¸“æ³¨äºæå‡å‘½ä»¤è¡Œæ•ˆç‡ã€åŒæ—¶é«˜åº¦é‡è§†æ•°æ®å®‰å…¨çš„ä¸“ä¸šå·¥å…·ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è§£æå…¶åº•å±‚æŠ€æœ¯æ¶æ„ï¼Œä»¥å±•ç¤ºå…¶å¯é æ€§çš„æ ¹åŸºã€‚</p>
<h2 data-id="heading-3">4.0 æŠ€æœ¯æ¶æ„è§£æ</h2>
<p>ç†è§£ä¸€æ¬¾å·¥å…·çš„æŠ€æœ¯æ¶æ„ï¼Œæ˜¯è¯„ä¼°å…¶æ€§èƒ½ã€å®‰å…¨æ€§ä¸é•¿æœŸå¯ç»´æŠ¤æ€§çš„å…³é”®ã€‚Alias Assistant é‡‡ç”¨äº†ç»è¿‡éªŒè¯çš„ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œæ—¨åœ¨å®ç°åŸç”Ÿåº”ç”¨çš„æ€§èƒ½ä½“éªŒä¸ Web æŠ€æœ¯çš„å¼€å‘æ•ˆç‡ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ã€‚</p>
<p>å…¶æ ¸å¿ƒæŠ€æœ¯ç»„ä»¶åŠå…¶åœ¨åº”ç”¨ä¸­æ‰®æ¼”çš„è§’è‰²å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>





















<table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>æ ¸å¿ƒä½œç”¨ä¸ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>Tauri (Rust åç«¯)</strong></td><td>ä½œä¸ºåº”ç”¨çš„æ ¸å¿ƒæ¡†æ¶ï¼ŒTauri åˆ©ç”¨ Rust è¯­è¨€æ„å»ºåº”ç”¨çš„åç«¯é€»è¾‘ã€‚è¿™å¸¦æ¥äº†ä¸¤å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼šé¦–å…ˆï¼ŒRust çš„å†…å­˜å®‰å…¨ä¿éšœæœºåˆ¶ä»æ ¹æœ¬ä¸Šæœç»äº†è®¸å¤šå¸¸è§çš„å®‰å…¨æ¼æ´ï¼›å…¶æ¬¡ï¼Œç¼–è¯‘åçš„åº”ç”¨å®ç°äº†æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ï¼Œèµ„æºå ç”¨æä½ï¼Œç¡®ä¿äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</td></tr><tr><td><strong>Vue + TypeScript (å‰ç«¯)</strong></td><td>åº”ç”¨çš„ç”¨æˆ·ç•Œé¢ç”±ä¸šç•Œä¸»æµçš„ Vue.js æ¡†æ¶å’Œ TypeScript è¯­è¨€æ„å»ºã€‚Vue æä¾›äº†é«˜æ•ˆçš„ç»„ä»¶åŒ–å¼€å‘èƒ½åŠ›ï¼Œè€Œ TypeScript åˆ™é€šè¿‡é™æ€ç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿äº†ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå…±åŒæ‰“é€ äº†ä¸€ä¸ªå“åº”è¿…é€Ÿä¸”ç±»å‹å®‰å…¨çš„ç”¨æˆ·ç•Œé¢ã€‚</td></tr><tr><td><strong>Tailwind CSS</strong></td><td>é€šè¿‡å…¶åŸå­åŒ–çš„ CSS ç±»ï¼Œå®ç°äº†é«˜åº¦å¯å®šåˆ¶ã€ä¸€è‡´æ€§å¼ºä¸”å“åº”å¼çš„ç•Œé¢è®¾è®¡ã€‚å®ƒæå¤§åœ°æå‡äº† UI å¼€å‘æ•ˆç‡ï¼Œæ˜¯ Alias Assistant æ‹¥æœ‰ç®€æ´ã€ç°ä»£åŒ–è§†è§‰é£æ ¼çš„å…³é”®æŠ€æœ¯ã€‚</td></tr></tbody></table>
<p>é¡¹ç›®çš„ä»£ç åº“æ„æˆï¼Œä¹Ÿä»é‡åŒ–è§’åº¦éªŒè¯äº†è¿™ä¸€æŠ€æœ¯é€‰å‹ã€‚å…¶ä¸­ï¼ŒVue å æ¯” 45.5%ï¼ŒTypeScript å æ¯” 9.5%ï¼Œå…±åŒæ„æˆäº†åŠŸèƒ½ä¸°å¯Œçš„ç°ä»£åŒ–å‰ç«¯ï¼›è€Œå æ¯” 17.3% çš„ Rust ä»£ç ï¼Œåˆ™ä»£è¡¨äº†å…¶åšå®ä¸”æ€§èƒ½æ”¸å…³çš„åç«¯æ ¸å¿ƒã€‚è¿™ä¸€åˆ†å¸ƒæ¸…æ™°åœ°å±•ç°äº†ä¸€ä¸ªä»¥å‰ç«¯ä½“éªŒä¸ºå¯¼å‘ã€ä»¥åç«¯å®‰å…¨æ€§èƒ½ä¸ºä¿éšœçš„æˆç†Ÿæ¶æ„ã€‚</p>
<p><strong>æ¶æ„æ€»ç»“</strong></p>
<p>è¯¥æŠ€æœ¯é€‰å‹ä½“ç°äº†å¯¹æ€§èƒ½ã€å®‰å…¨å’Œå¼€å‘ä½“éªŒçš„å…¨é¢è€ƒé‡ã€‚Tauri ä¸ Rust çš„ç»„åˆä¸ºåº”ç”¨æä¾›äº†åšå®ã€å®‰å…¨çš„åŸç”Ÿåº•å±‚ï¼Œè€Œ Vueã€TypeScript å’Œ Tailwind CSS åˆ™ä¿è¯äº†å‰ç«¯ç•Œé¢çš„ç°ä»£åŒ–ä¸é«˜è´¨é‡ã€‚è¿™ç§æ¶æ„å…±åŒæ„å»ºäº†ä¸€ä¸ªå¯é ã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›ç¨³å®šã€æµç•…çš„é•¿æœŸæœåŠ¡ã€‚</p>
<p>åœ¨äº†è§£äº†å…¶åšå®çš„æŠ€æœ¯æ¶æ„ä¹‹åï¼Œä¸‹ä¸€ç« èŠ‚å°†è¯¦ç»†å±•ç¤ºå…¶ä¸ºç”¨æˆ·å¸¦æ¥çš„ä¸°å¯ŒåŠŸèƒ½ä¸ä¸šåŠ¡ä»·å€¼ã€‚</p>
<h2 data-id="heading-4">5.0 æ ¸å¿ƒåŠŸèƒ½ä¸ä¸šåŠ¡ä»·å€¼åˆ†æ</h2>
<p>æœ¬ç« èŠ‚å°†æ·±å…¥åˆ†æ Alias Assistant çš„å„é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼Œå¹¶å°†å…¶ä¸ä¼ä¸šå’Œå¼€å‘è€…åœ¨å®é™…å·¥ä½œä¸­è·å¾—çš„å…·ä½“ä¸šåŠ¡ä»·å€¼ç›¸å…³è”ï¼Œè€Œéç®€å•åœ°ç½—åˆ—åŠŸèƒ½æ¸…å•ã€‚</p>
<h3 data-id="heading-5">é«˜æ•ˆçš„åˆ«åæ“ä½œ</h3>
<ul>
<li>
<p><strong>ä¸€é”®å¤åˆ¶ä¸ç»ˆç«¯é›†æˆ</strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šç”¨æˆ·åªéœ€å•å‡»åˆ—è¡¨ä¸­çš„ä»»æ„åˆ«åé¡¹ï¼Œå…¶åç§°ä¾¿ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ç‚¹å‡»æ—è¾¹çš„ "Terminal" æŒ‰é’®ï¼Œåˆ™ä¼šç›´æ¥æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£å¹¶ç²˜è´´è¯¥åˆ«åï¼Œå‡†å¤‡æ‰§è¡Œã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šæ­¤åŠŸèƒ½æå¤§åœ°å‡å°‘äº†ç”¨æˆ·çš„æ“ä½œæ­¥éª¤å’Œåœ¨ä¸åŒçª—å£é—´çš„åˆ‡æ¢ã€‚å®ƒå°†å‘½ä»¤æŸ¥æ‰¾ä¸æ‰§è¡Œä¸¤ä¸ªç¯èŠ‚æ— ç¼è¡”æ¥ï¼Œå®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„â€œå³æœå³ç”¨â€ï¼Œåœ¨å¤„ç†é«˜é¢‘é‡å¤æ€§ä»»åŠ¡æ—¶èƒ½èŠ‚çœå¤§é‡æ—¶é—´ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®æ—¶å¿«é€Ÿæœç´¢</strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šé¡¶éƒ¨çš„æœç´¢æ¡†æä¾›å®æ—¶è¿‡æ»¤åŠŸèƒ½ã€‚ç”¨æˆ·åªéœ€è¾“å…¥å…³é”®è¯ï¼Œåˆ«ååˆ—è¡¨ä¼šå³æ—¶å“åº”ï¼Œä»…æ˜¾ç¤ºåŒ¹é…çš„ç»“æœã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šå½“åˆ«ååº“å¢é•¿åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œè¯¥åŠŸèƒ½æˆä¸ºæå‡æ•ˆç‡çš„å…³é”®ã€‚å®ƒå°†åŸæœ¬éœ€è¦åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­æ»šåŠ¨æŸ¥æ‰¾çš„ä½æ•ˆè¡Œä¸ºï¼Œè½¬å˜ä¸ºç²¾ç¡®ã€ç¬æ—¶çš„å®šä½æ“ä½œï¼Œç¡®ä¿å¼€å‘è€…æ€»èƒ½ä»¥æœ€å¿«é€Ÿåº¦æ‰¾åˆ°æ‰€éœ€å‘½ä»¤ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">ä¾¿æ·çš„é…ç½®ç®¡ç†</h3>
<ul>
<li>
<p><strong>å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½</strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šæ”¯æŒå°†æ‰€æœ‰åˆ«åå¯¼å‡ºä¸ºæ ‡å‡†çš„ <code>.sh</code> æ–‡ä»¶ï¼Œä¹Ÿæ”¯æŒä» <code>.sh</code> æ–‡ä»¶å¯¼å…¥é…ç½®ã€‚å¯¼å…¥æ—¶ï¼Œå¦‚æœé‡åˆ°åŒååˆ«åï¼Œæ–°å¯¼å…¥çš„é…ç½®ä¼šè¦†ç›–ç°æœ‰é…ç½®ã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šæ­¤åŠŸèƒ½å…·æœ‰é‡è¦çš„æˆ˜ç•¥ä»·å€¼ã€‚å¯¹äºå›¢é˜Ÿè€Œè¨€ï¼Œå®ƒå¯ä»¥ä½œä¸ºåˆ†å‘å’ŒåŒæ­¥æ ‡å‡†æ“ä½œè§„èŒƒï¼ˆSOPï¼‰çš„è½½ä½“ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç»Ÿä¸€çš„å‘½ä»¤é›†ï¼›å¯¹äºæ–°å‘˜å·¥å…¥èŒæˆ–æ›´æ¢è®¾å¤‡ç­‰åœºæ™¯ï¼Œå®ƒèƒ½å®ç°ä¸€é”®å¼ç¯å¢ƒè¿ç§»ï¼Œå¤§å¹…é™ä½é…ç½®æˆæœ¬ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯è§†åŒ–å¢åˆ </strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šé€šè¿‡ç•Œé¢å³ä¸‹è§’çš„ "+" æŒ‰é’®å’Œæ¯è¡Œåˆ«ååçš„ "Delete" æŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚åœ°æ·»åŠ æˆ–åˆ é™¤åˆ«åï¼Œæ— éœ€æ¥è§¦ä»»ä½•é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šä¸ä¼ ç»Ÿçš„å‘½ä»¤è¡Œæˆ–æ–‡æœ¬ç¼–è¾‘ç›¸æ¯”ï¼ŒGUI æ“ä½œçš„ä½“éªŒæ›´å‹å¥½ï¼Œå‡ºé”™ç‡æ›´ä½ã€‚è¿™é™ä½äº†ä½¿ç”¨é—¨æ§›ï¼Œå³ä½¿æ˜¯å¯¹ Shell é…ç½®ä¸å¤ªç†Ÿæ‚‰çš„ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ç®¡ç†è‡ªå·±çš„åˆ«åï¼Œæå‡äº†å·¥å…·çš„æ™®é€‚æ€§ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">ä¸ªæ€§åŒ–ä¸ç”¨æˆ·ä½“éªŒ</h3>
<ul>
<li>
<p><strong>å¤šä¸»é¢˜åˆ‡æ¢</strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šåº”ç”¨å†…ç½® 4 æ¬¾ä¸åŒé£æ ¼çš„ä¸»é¢˜ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä¸ªäººåå¥½åœ¨è®¾ç½®ä¸­éšæ—¶åˆ‡æ¢ï¼Œé€‰æ‹©ä¼šè‡ªåŠ¨ä¿å­˜ã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šè™½ç„¶è¿™æ˜¯ä¸€ä¸ªä½“éªŒå±‚é¢çš„åŠŸèƒ½ï¼Œä½†å®ƒä½“ç°äº†äº§å“å¯¹ç”¨æˆ·ä¸ªæ€§åŒ–éœ€æ±‚çš„å°Šé‡ã€‚ä¸€ä¸ªèˆ’é€‚çš„è§†è§‰ç¯å¢ƒæœ‰åŠ©äºæå‡ç”¨æˆ·çš„é•¿æ—¶é—´ä½¿ç”¨æ„æ„¿å’Œå·¥ä½œæ»¡æ„åº¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨å†…æ›´æ–°æ£€æŸ¥</strong></p>
<ul>
<li><strong>åŠŸèƒ½æè¿°</strong>ï¼šç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®ä¸­æ‰‹åŠ¨æ£€æŸ¥åº”ç”¨æ›´æ–°ï¼Œå¹¶ä¸€é”®å®Œæˆæ–°ç‰ˆæœ¬çš„å®‰è£…ã€‚</li>
<li><strong>ä¸šåŠ¡ä»·å€¼</strong>ï¼šè¿™ç®€åŒ–äº†è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ç”¨æˆ·æ— éœ€é¢‘ç¹è®¿é—®é¡¹ç›®ä¸»é¡µæˆ–æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…ï¼Œç¡®ä¿èƒ½åŠæ—¶è·å–æœ€æ–°çš„åŠŸèƒ½æ”¹è¿›å’Œé‡è¦çš„å®‰å…¨ä¿®å¤ï¼Œé™ä½äº†åº”ç”¨çš„ç»´æŠ¤æˆæœ¬ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™äº›ç²¾å¿ƒè®¾è®¡çš„åŠŸèƒ½å…±åŒæ„æˆäº†ä¸€ä¸ªæ— ç¼ã€é«˜æ•ˆçš„å·¥ä½œæµã€‚åœ¨ç¡®ä¿æè‡´æ•ˆç‡çš„åŒæ—¶ï¼Œä¼ä¸šç”¨æˆ·æœ€ä¸ºå…³å¿ƒçš„å®‰å…¨æ€§é—®é¢˜ï¼ŒAlias Assistant ä¹Ÿç»™å‡ºäº†æ˜ç¡®çš„ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-8">6.0 å®‰å…¨æ€§ä¸æ•°æ®å¯æ§æ€§åˆ†æ</h2>
<p>å¯¹äºä»»ä½•å¸Œæœ›åœ¨ä¼ä¸šç¯å¢ƒä¸­éƒ¨ç½²çš„å·¥å…·è€Œè¨€ï¼Œå…¶å®‰å…¨æ€§å’Œæ•°æ®çš„å¯æ§æ€§æ˜¯è¯„ä¼°ä¸é‡‡çº³å†³ç­–çš„é¦–è¦æ ‡å‡†ã€‚Alias Assistant åœ¨è®¾è®¡ä¹‹åˆå°±å°†è¿™äº›è¦ç´ ç½®äºæœ€é«˜ä¼˜å…ˆçº§ï¼Œä¸ºä¼ä¸šç”¨æˆ·æä¾›äº†åšå®å¯é çš„å®‰å…¨ä¿éšœã€‚</p>
<h4 data-id="heading-9">æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®å®Œå…¨æŒæ§</h4>
<p>Alias Assistant çš„æ ¸å¿ƒå®‰å…¨åŸºçŸ³åœ¨äºå…¶çº¯ç²¹çš„<strong>æœ¬åœ°å­˜å‚¨æ¨¡å‹</strong>ã€‚æ‰€æœ‰çš„åˆ«åæ•°æ®ï¼ŒåŒ…æ‹¬åç§°å’Œå¯¹åº”çš„å‘½ä»¤ï¼Œéƒ½ä»…å­˜å‚¨åœ¨ç”¨æˆ·è‡ªå·±çš„è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚åº”ç”¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šå‘èµ·ä»»ä½•å°†ç”¨æˆ·æ•°æ®ä¸Šä¼ è‡³å¤–éƒ¨æœåŠ¡å™¨çš„ç½‘ç»œè¯·æ±‚ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>æ— æ•°æ®æ³„éœ²é£é™©</strong>ï¼šç”±äºæ•°æ®ä»æœªç¦»å¼€ç”¨æˆ·çš„è®¾å¤‡ï¼Œå› æ­¤ä»æ ¹æœ¬ä¸Šæœç»äº†å› äº‘æœåŠ¡å•†å®‰å…¨æ¼æ´ã€ç½‘ç»œä¼ è¾“è¢«çªƒå¬æˆ–æœåŠ¡å™¨é…ç½®é”™è¯¯å¯¼è‡´çš„æ•°æ®æ³„éœ²é£é™©ã€‚</li>
<li><strong>ç»å¯¹çš„æ•°æ®ä¸»æƒ</strong>ï¼šç”¨æˆ·å¯¹è‡ªå·±çš„æ•°æ®æ‹¥æœ‰ 100% çš„æ§åˆ¶æƒï¼Œå¯ä»¥éšæ—¶å¤‡ä»½ã€è¿ç§»æˆ–å½»åº•åˆ é™¤ï¼Œæ— éœ€ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚</li>
<li><strong>æ»¡è¶³åˆè§„æ€§è¦æ±‚</strong>ï¼šå¯¹äºé‡‘èã€åŒ»ç–—ç­‰å—ä¸¥æ ¼æ•°æ®ç›‘ç®¡çš„è¡Œä¸šï¼Œè¿™ç§æœ¬åœ°åŒ–æ¨¡å‹èƒ½å¤Ÿè½»æ¾æ»¡è¶³å…¶å¯¹æ•°æ®é©»ç•™å’Œéšç§ä¿æŠ¤çš„åˆè§„æ€§è¦æ±‚ã€‚</li>
</ul>
<p>ä¸ä¾èµ–äº‘åŒæ­¥çš„è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼ŒAlias Assistant çš„æœ¬åœ°å­˜å‚¨æ¨¡å‹åœ¨æ•°æ®éšç§å’Œç³»ç»Ÿå¯é æ€§æ–¹é¢æ‹¥æœ‰æ— å¯æ¯”æ‹Ÿçš„ä¼˜åŠ¿ï¼Œé¿å…äº†å› ç½‘ç»œä¸­æ–­æˆ–äº‘æœåŠ¡æ•…éšœå¯¼è‡´çš„å•ç‚¹æ•…éšœé—®é¢˜ã€‚</p>
<h4 data-id="heading-10">å•†ä¸šå‹å¥½çš„å¼€æºè®¸å¯</h4>
<p>Alias Assistant é‡‡ç”¨ <strong>MIT è®¸å¯è¯</strong>è¿›è¡Œå¼€æºã€‚å¯¹äºä¼ä¸šç”¨æˆ·è€Œè¨€ï¼ŒMIT è®¸å¯è¯æ„å‘³ç€æé«˜çš„è‡ªç”±åº¦å’Œå•†ä¸šå‹å¥½æ€§ã€‚å®ƒå…è®¸ä¼ä¸šï¼š</p>
<ul>
<li>è‡ªç”±åœ°ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹å’Œåˆ†å‘è½¯ä»¶ã€‚</li>
<li>å°†è¯¥å·¥å…·é›†æˆåˆ°å†…éƒ¨å·¥ä½œæµæˆ–å•†ä¸šäº§å“ä¸­ï¼Œè€Œæ— éœ€æ‹…å¿ƒå¤æ‚çš„è®¸å¯é™åˆ¶æˆ–ç‰ˆç¨è¦æ±‚ã€‚</li>
</ul>
<p>è¿™ç§å¼€æ”¾é€æ˜çš„æ¨¡å¼ï¼Œä¸ä»…è®©ä¼ä¸šå¯ä»¥è‡ªç”±å®¡æŸ¥æºä»£ç ä»¥ç¡®ä¿å®‰å…¨æ€§ï¼Œä¹Ÿä¸ºè¿›è¡Œå†…éƒ¨å®šåˆ¶å’ŒäºŒæ¬¡å¼€å‘æä¾›äº†æ³•å¾‹ä¸Šçš„ä¿éšœã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒAlias Assistant çš„æ¶æ„è®¾è®¡å’Œå¼€æºç­–ç•¥å……åˆ†è€ƒè™‘äº†ä¼ä¸šçš„æ ¸å¿ƒå®‰å…¨å…³åˆ‡ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå€¼å¾—ä¿¡èµ–çš„é€‰æ‹©ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ªå…¸å‹åœºæ™¯ï¼Œå±•ç¤ºå…¶åœ¨å®é™…å·¥ä½œä¸­çš„åº”ç”¨ä»·å€¼ã€‚</p>
<h2 data-id="heading-11">7.0 å…¸å‹åº”ç”¨åœºæ™¯</h2>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ Alias Assistant åœ¨ä¸åŒå·¥ä½œç¯å¢ƒä¸‹çš„å®é™…ä»·å€¼ï¼Œæœ¬èŠ‚å°†æç»˜å…¶åœ¨ä¸‰ä¸ªå…¸å‹ä¸“ä¸šè§’è‰²å’Œå›¢é˜Ÿåä½œä¸­çš„å…·ä½“åº”ç”¨æƒ…æ™¯ã€‚</p>
<ul>
<li><code>ä¸ªäººå¼€å‘è€…æ•ˆç‡æå‡</code> ä¸€ä½ macOS å¼€å‘è€…æ­£åœ¨åŒæ—¶ç»´æŠ¤å¤šä¸ªé¡¹ç›®ã€‚ä»–ä½¿ç”¨ Alias Assistant ç®¡ç†ç€ä¸€ç³»åˆ—å¤æ‚çš„åˆ«åï¼šç”¨äºä¸€é”®å¯åŠ¨å‰ç«¯å’Œåç«¯æœåŠ¡çš„ <code>start-dev</code>ï¼Œç”¨äºè¿è¡Œä»£ç æ ¼å¼åŒ–ä¸é™æ€æ£€æŸ¥çš„ <code>lint-fix</code>ï¼Œä»¥åŠç”¨äºç®€åŒ– Git å¤æ‚æ“ä½œçš„å¿«æ·å‘½ä»¤ï¼Œå¦‚ <code>glog</code>ï¼ˆæ˜¾ç¤ºç¾åŒ–çš„æäº¤å†å²ï¼‰ã€‚é€šè¿‡ Alias Assistant çš„å¿«é€Ÿæœç´¢å’Œç»ˆç«¯é›†æˆï¼Œä»–æ— éœ€å†è®°å¿†è¿™äº›ç¹ççš„å‘½ä»¤ï¼Œä»è€Œèƒ½å¤Ÿå°†æ³¨æ„åŠ›å®Œå…¨é›†ä¸­åœ¨ç¼–ç é€»è¾‘ä¸Šï¼Œå¤§å¹…å‡å°‘äº†æ—¥å¸¸é‡å¤è¾“å…¥æ‰€è€—è´¹çš„æ—¶é—´ã€‚</li>
<li><code>DevOps å›¢é˜Ÿæ ‡å‡†åŒ–æ“ä½œ</code> ä¸€ä¸ª DevOps å›¢é˜Ÿè´Ÿè´£ç®¡ç†å…¬å¸çš„äº‘åŸºç¡€è®¾æ–½ã€‚ä¸ºäº†ç¡®ä¿æ“ä½œçš„ä¸€è‡´æ€§å’Œè§„èŒƒæ€§ï¼Œå›¢é˜Ÿè´Ÿè´£äººé¢„å…ˆå®šä¹‰äº†ä¸€å¥—æ ‡å‡†çš„åˆ«åé…ç½®ï¼Œå¹¶å°†å…¶å¯¼å‡ºä¸º <code>.sh</code> æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«äº†ç”¨äºå®‰å…¨ç™»å½•ä¸åŒç¯å¢ƒæœåŠ¡å™¨ã€å¿«é€ŸæŸ¥è¯¢ Kubernetes é›†ç¾¤æ—¥å¿—ã€æ‰§è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ç­‰ä¸€ç³»åˆ—æ ‡å‡†å‘½ä»¤ã€‚æ¯å½“æœ‰æ–°æˆå‘˜åŠ å…¥ï¼Œåªéœ€é€šè¿‡ Alias Assistant å¯¼å…¥è¯¥æ–‡ä»¶ï¼Œå³å¯åœ¨å‡ ç§’é’Ÿå†…å®Œæˆæ‰€æœ‰æ ‡å‡†æ“ä½œåˆ«åçš„é…ç½®ï¼Œæœ‰æ•ˆé™ä½äº†è¯¯æ“ä½œé£é™©ï¼Œå¹¶ç»Ÿä¸€äº†å›¢é˜Ÿçš„å·¥ä½œæµç¨‹ã€‚</li>
<li><code>ä¼ä¸š IT æ”¯æŒä¸è‡ªåŠ¨åŒ–</code> æŸå…¬å¸çš„ IT æ”¯æŒéƒ¨é—¨ä¸ºå‡å°‘é‡å¤æ€§çš„æ”¯æŒå·¥ä½œï¼Œåˆ©ç”¨ Alias Assistant åˆ›å»ºäº†ä¸€å¥—é¢å‘å…¨ä½“å‘˜å·¥çš„â€œåˆ«åå·¥å…·åŒ…â€ã€‚è¿™ä¸ªå·¥å…·åŒ…åŒ…å«äº†ä¸€ç³»åˆ—ç”¨äºå¸¸è§é—®é¢˜çš„è‡ªåŠ©è¯Šæ–­å‘½ä»¤ï¼Œå¦‚ç½‘ç»œè¿é€šæ€§æµ‹è¯•ã€æ¸…é™¤ç³»ç»Ÿç¼“å­˜ã€å¿«é€Ÿå®‰è£…å…¬å¸æ ‡å‡†è½¯ä»¶ç­‰ã€‚IT éƒ¨é—¨å¯ä»¥å°†è¿™ä¸ªé¢„ç½®çš„ <code>.sh</code> é…ç½®æ–‡ä»¶é›†æˆåˆ°æ–°å‘˜å·¥çš„è®¾å¤‡åˆå§‹åŒ–æµç¨‹ä¸­ï¼Œé€šè¿‡å¯¼å…¥åŠŸèƒ½å¿«é€Ÿéƒ¨ç½²ã€‚è¿™ä¸ä»… empowers å‘˜å·¥è§£å†³ç®€å•é—®é¢˜ï¼Œä¹Ÿæ˜¾è‘—é™ä½äº† IT éƒ¨é—¨çš„æ”¯æŒæˆæœ¬å’Œå“åº”æ—¶é—´ã€‚</li>
</ul>
<p>è¿™äº›åœºæ™¯çš„å…±åŒç‚¹åœ¨äºï¼ŒAlias Assistant ä½œä¸ºä¸€ä¸ªçµæ´»ä¸”é€‚åº”æ€§å¼ºçš„æ•ˆç‡å·¥å…·ï¼Œèƒ½å¤Ÿæ— ç¼èå…¥å¤šç§å·¥ä½œæµï¼Œä¸ºä¸åŒè§’è‰²çš„ä¸“ä¸šäººå£«å¸¦æ¥åˆ‡å®çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-12">8.0 ç»“è®º</h2>
<p>ä¼ ç»Ÿçš„ Shell åˆ«åç®¡ç†æ–¹å¼ï¼Œå› å…¶ä¾èµ–æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œé•¿æœŸä»¥æ¥å­˜åœ¨ç€è®°å¿†æˆæœ¬é«˜ã€ç®¡ç†æ•ˆç‡ä½ä¸‹ã€ç¼ºä¹å¯ç§»æ¤æ€§ç­‰å›ºæœ‰å±€é™ï¼Œå·²æ— æ³•æ»¡è¶³ç°ä»£é«˜æ•ˆå·¥ä½œæµçš„éœ€æ±‚ã€‚</p>
<p>Alias Assistant é€šè¿‡å…¶ç°ä»£åŒ–çš„è®¾è®¡ç†å¿µå’Œå¼ºå¤§çš„åŠŸèƒ½é›†ï¼Œä¸ºè¿™äº›ç—›ç‚¹æä¾›äº†å…¨é¢è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚å…¶ç›´è§‚çš„å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ã€å®æ—¶å¿«é€Ÿæœç´¢ã€ä¾¿æ·çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œä»æ ¹æœ¬ä¸Šç®€åŒ–äº†åˆ«åçš„åˆ›å»ºã€ä½¿ç”¨å’Œè¿ç§»è¿‡ç¨‹ã€‚è€ŒåŸºäº Tauri å’Œ Rust çš„åšå®æŠ€æœ¯æ¶æ„ï¼Œåˆ™ä¸ºåº”ç”¨çš„æ€§èƒ½ä¸å®‰å…¨æ€§æä¾›äº†å¯é ä¿éšœã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼ŒAlias Assistant å§‹ç»ˆåšæŒâ€œ<strong>æœ¬åœ°å­˜å‚¨</strong>â€å’Œâ€œ<strong>æ•°æ®å®Œå…¨å¯æ§</strong>â€çš„æ ¸å¿ƒå®‰å…¨åŸåˆ™ï¼Œå°†æ•°æ®ä¸»æƒå®Œå…¨äº¤è¿˜ç»™ç”¨æˆ·ã€‚è¿™ä¸€ç‰¹æ€§ä½¿å…¶ä¸ä»…æ˜¯ä¸ªäººå¼€å‘è€…çš„æ•ˆç‡åˆ©å™¨ï¼Œæ›´æ˜¯é«˜åº¦å…³æ³¨æ•°æ®å®‰å…¨ä¸åˆè§„æ€§çš„ä¼ä¸šæŠ€æœ¯å†³ç­–è€…å’Œ IT éƒ¨é—¨çš„ç†æƒ³é€‰æ‹©ã€‚å¯¹äºä»»ä½•å¸Œæœ›åœ¨æå‡å›¢é˜Ÿç”Ÿäº§åŠ›çš„åŒæ—¶ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ— è™çš„ç»„ç»‡è€Œè¨€ï¼ŒAlias Assistant æ˜¯ç¡®ä¿å›¢é˜Ÿç”Ÿäº§åŠ›ä¸æ•°æ®å®‰å…¨åŒé‡ç›®æ ‡çš„æˆ˜ç•¥æ€§é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«äººçš„C#çœ‹ç€éš¾å—ï¼Ÿå¯èƒ½æ˜¯ä½ ä¸æ¸…æ¥šè¿™äº›è¯­æ³•ç³–]]></title>    <link>https://juejin.cn/post/7579871631095447578</link>    <guid>https://juejin.cn/post/7579871631095447578</guid>    <pubDate>2025-12-04T12:52:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579871631095447578" data-draft-id="7579871631095431194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«äººçš„C#çœ‹ç€éš¾å—ï¼Ÿå¯èƒ½æ˜¯ä½ ä¸æ¸…æ¥šè¿™äº›è¯­æ³•ç³–"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T12:52:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«äººçš„C#çœ‹ç€éš¾å—ï¼Ÿå¯èƒ½æ˜¯ä½ ä¸æ¸…æ¥šè¿™äº›è¯­æ³•ç³–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T12:52:19.000Z" title="Thu Dec 04 2025 12:52:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“ä½ åœ¨çœ‹ç°ä»£C#ä»£ç æ—¶ï¼Œæ˜¯å¦ç»å¸¸è¢« <code>user?.Address?.City</code>ã€<code>$"ä½ å¥½ï¼Œ{name}"</code> æˆ–æ˜¯ä¸€è¡Œå°±æå®šæ•´ä¸ªç±»çš„ <code>public record Person(string Name, int Age);</code> æå¾—ä¸€å¤´é›¾æ°´ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™åªæ˜¯å› ä¸ºä½ è¿˜ä¸ç†Ÿæ‚‰C#çš„â€œè¯­æ³•ç³–â€ã€‚</p>
</blockquote>
<p>è¯­æ³•ç³–æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­ä¸€ç§æ›´ç®€æ´ã€æ›´æ˜“è¯»çš„è¯­æ³•å½¢å¼ï¼Œå®ƒä¸ä¼šç»™è¯­è¨€å¢åŠ æ–°åŠŸèƒ½ï¼Œä½†èƒ½è®©ä½ å†™å¾—æ›´å¿«ï¼Œè¯»å¾—æ›´è½»æ¾ã€‚è‡ª2002å¹´è¯ç”Ÿä»¥æ¥ï¼ŒC#å‡ ä¹æ¯ä¸ªç‰ˆæœ¬éƒ½åœ¨æ·»åŠ æ–°çš„è¯­æ³•ç³–ï¼Œè®©ä»£ç å˜å¾—è¶Šæ¥è¶Šâ€œç”œâ€ã€‚æœ¬æ–‡å°†ä¸ºä½ ç³»ç»Ÿæ¢³ç†C#ä»2.0åˆ°12.0ç‰ˆæœ¬çš„æ ¸å¿ƒè¯­æ³•ç³–ï¼Œé€šè¿‡<strong>å¯¹æ¯”åŸå§‹å†™æ³•å’Œè¯­æ³•ç³–å†™æ³•</strong>ï¼Œå¸®ä½ å½»åº•è¯»æ‡‚ç°ä»£C#ä»£ç ã€‚</p>
<p>ä¸ºäº†è®©æ‚¨å¯¹C#è¯­æ³•ç³–çš„æ¼”å˜æœ‰ä¸€ä¸ªå…¨å±€è®¤è¯†ï¼Œæˆ‘é¦–å…ˆå°†å„ç‰ˆæœ¬çš„æ ¸å¿ƒè¯­æ³•ç³–æ±‡æ€»å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-0">C# å„ç‰ˆæœ¬è¯­æ³•ç³–æ¦‚è§ˆ</h3>

































































<table><thead><tr><th align="left">C# ç‰ˆæœ¬</th><th align="left">å¼•å…¥çš„æ ¸å¿ƒè¯­æ³•ç³–ç‰¹æ€§</th><th align="left">è¦è§£å†³çš„ç—›ç‚¹/è®¾è®¡ç›®çš„</th></tr></thead><tbody><tr><td align="left"><strong>C# 2.0</strong></td><td align="left">æ³›å‹ã€å¯ç©ºç±»å‹(<code>Nullable&lt;T&gt;</code>)ã€åŒ¿åæ–¹æ³•ã€è¿­ä»£å™¨(<code>yield</code>)</td><td align="left">å¢å¼ºç±»å‹å®‰å…¨ä¸å¤ç”¨æ€§ï¼›ä¼˜é›…å¤„ç†å€¼ç±»å‹çš„ç©ºå€¼ï¼›ç®€åŒ–å§”æ‰˜ã€‚</td></tr><tr><td align="left"><strong>C# 3.0</strong></td><td align="left">éšå¼ç±»å‹(<code>var</code>)ã€è‡ªåŠ¨å±æ€§ã€å¯¹è±¡/é›†åˆåˆå§‹åŒ–å™¨ã€Lambdaè¡¨è¾¾å¼ã€æ‰©å±•æ–¹æ³•</td><td align="left"><strong>é©å‘½æ€§ç®€åŒ–</strong>ï¼šå‡å°‘æ ·æ¿ä»£ç ï¼›å¼•å…¥LINQï¼Œç»Ÿä¸€æ•°æ®æŸ¥è¯¢èŒƒå¼ã€‚</td></tr><tr><td align="left"><strong>C# 4.0</strong></td><td align="left">å‘½åå‚æ•°ä¸å¯é€‰å‚æ•°ã€åŠ¨æ€ç±»å‹(<code>dynamic</code>)</td><td align="left">æå‡APIè°ƒç”¨çµæ´»æ€§ï¼›æ”¹è¿›ä¸COM/åŠ¨æ€è¯­è¨€çš„äº’æ“ä½œæ€§ã€‚</td></tr><tr><td align="left"><strong>C# 5.0</strong></td><td align="left"><strong><code>async</code> / <code>await</code></strong></td><td align="left">å°†å¤æ‚çš„å¼‚æ­¥ç¼–ç¨‹å˜å¾—å¦‚åŒæ­¥ä»£ç èˆ¬ç›´è§‚ã€‚</td></tr><tr><td align="left"><strong>C# 6.0</strong></td><td align="left">ç©ºæ¡ä»¶è¿ç®—ç¬¦(<code>?.</code>)ã€å­—ç¬¦ä¸²æ’å€¼(<code>$</code>)ã€è¡¨è¾¾å¼ä½“æˆå‘˜ã€<code>nameof</code></td><td align="left">ç»ˆç»“â€œç©ºå¼•ç”¨å¼‚å¸¸â€ææƒ§ï¼›ç»ˆç»“æ··ä¹±çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼›ç®€åŒ–æ–¹æ³•å£°æ˜ã€‚</td></tr><tr><td align="left"><strong>C# 7.0</strong></td><td align="left">å…ƒç»„ä¸è§£æ„ã€<code>out</code>å˜é‡å£°æ˜ã€æ¨¡å¼åŒ¹é…(<code>is</code>)ã€æœ¬åœ°å‡½æ•°</td><td align="left">æ–¹ä¾¿åœ°è¿”å›å’Œå¤„ç†å¤šä¸ªå€¼ï¼›ç®€åŒ–<code>out</code>å‚æ•°ä½¿ç”¨ï¼›å¢å¼ºæµç¨‹æ§åˆ¶ã€‚</td></tr><tr><td align="left"><strong>C# 8.0</strong></td><td align="left"><code>using</code>å£°æ˜ã€å¯ç©ºå¼•ç”¨ç±»å‹ã€é»˜è®¤æ¥å£æ–¹æ³•ã€å¼‚æ­¥æµ</td><td align="left">ç®€åŒ–èµ„æºç®¡ç†ï¼›å°†ç©ºå®‰å…¨èå…¥ç±»å‹ç³»ç»Ÿï¼›å®‰å…¨åœ°æ¼”è¿›æ¥å£ã€‚</td></tr><tr><td align="left"><strong>C# 9.0</strong></td><td align="left"><strong>è®°å½•ç±»å‹(<code>record</code>)</strong>ã€é¡¶çº§è¯­å¥ã€<code>init</code>è®¿é—®å™¨</td><td align="left">ç”¨ä¸€è¡Œä»£ç å®šä¹‰ä¸å¯å˜æ•°æ®æ¨¡å‹ï¼›ä¸ºå°ç¨‹åºå»é™¤ä»ªå¼åŒ–ä»£ç ã€‚</td></tr><tr><td align="left"><strong>C# 10.0</strong></td><td align="left">æ–‡ä»¶èŒƒå›´å‘½åç©ºé—´ã€å…¨å±€<code>using</code>æŒ‡ä»¤</td><td align="left">å‡å°‘ä¸å¿…è¦çš„ç¼©è¿›ï¼›æ¶ˆé™¤é¡¹ç›®å†…é‡å¤çš„<code>using</code>æŒ‡ä»¤ã€‚</td></tr><tr><td align="left"><strong>C# 11.0</strong></td><td align="left">åŸå§‹å­—ç¬¦ä¸²å­—é¢é‡(<code>"""</code>)ã€<code>required</code>æˆå‘˜</td><td align="left">ä¼˜é›…åµŒå…¥JSON/XML/SQLï¼›å¼ºåˆ¶åˆå§‹åŒ–å¥‘çº¦ï¼Œç¡®ä¿å¯¹è±¡å®Œæ•´æ€§ã€‚</td></tr><tr><td align="left"><strong>C# 12.0</strong></td><td align="left">ä¸»æ„é€ å‡½æ•°ã€é›†åˆè¡¨è¾¾å¼(<code>[]</code>)ã€å†…è”æ•°ç»„</td><td align="left">æ›´å£°æ˜å¼åœ°å®šä¹‰ç±»ï¼›ç»Ÿä¸€é›†åˆåˆå§‹åŒ–è¯­æ³•ï¼›ä¸ºé«˜æ€§èƒ½åœºæ™¯æä¾›æ”¯æŒã€‚</td></tr></tbody></table>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æŒ‰ç…§ç‰ˆæœ¬é¡ºåºï¼Œå¯¹æ¯ä¸€ä¸ªé‡è¦çš„è¯­æ³•ç³–è¿›è¡Œâ€œç¼–è¯‘è¿˜åŸâ€ï¼Œå±•ç¤ºå…¶åŸå§‹å†™æ³•å’Œè¯­æ³•ç³–å†™æ³•ï¼Œå¹¶è§£é‡Šå…¶æœ¬è´¨ã€‚</p>
<h3 data-id="heading-1">C# 2.0ï¼šç°ä»£C#çš„åŸºçŸ³</h3>
<h4 data-id="heading-2">1. å¯ç©ºå€¼ç±»å‹ (Nullable Value Types)</h4>
<p>åœ¨C# 2.0ä¹‹å‰ï¼Œ<code>int</code>ã€<code>bool</code>ç­‰å€¼ç±»å‹ä¸èƒ½è¡¨ç¤ºâ€œæ²¡æœ‰å€¼â€çš„çŠ¶æ€ã€‚
<strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">int</span>? age = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ¸…æ™°è¡¨ç¤ºå¹´é¾„å¯èƒ½æœªçŸ¥</span>
<span class="hljs-keyword">if</span> (age.HasValue) {
    Console.WriteLine(age.Value);
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Nullable&lt;<span class="hljs-built_in">int</span>&gt; age = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä½¿ç”¨æ³›å‹ç»“æ„ä½“Nullable&lt;T&gt;</span>
<span class="hljs-keyword">if</span> (age.HasValue) {
    Console.WriteLine(age.Value);
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼š<code>int?</code> æ˜¯ <code>System.Nullable&lt;int&gt;</code> çš„è¯­æ³•ç³–ã€‚ç¼–è¯‘å™¨åœ¨åº•å±‚ä»ç„¶ä½¿ç”¨è¿™ä¸ªæ³›å‹ç»“æ„ä½“ï¼Œå®ƒåŒ…å«ä¸€ä¸ªå¸ƒå°”å­—æ®µæ ‡è¯†æ˜¯å¦æœ‰å€¼ï¼Œä»¥åŠä¸€ä¸ªå€¼ç±»å‹çš„å­—æ®µå­˜å‚¨å®é™…æ•°æ®ã€‚</p>
<h4 data-id="heading-3">2. åŒ¿åæ–¹æ³•</h4>
<p>ç®€åŒ–äº†å§”æ‰˜çš„å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œå…è®¸å°†ä»£ç å—ç›´æ¥ä¼ é€’ç»™å§”æ‰˜ã€‚
<strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">button.Click += <span class="hljs-built_in">delegate</span> { Console.WriteLine(<span class="hljs-string">"Clicked!"</span>); };
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªå…·åæ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Button_ClickHandler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span> {
    Console.WriteLine(<span class="hljs-string">"Clicked!"</span>);
}
button.Click += <span class="hljs-keyword">new</span> EventHandler(Button_ClickHandler);
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«è¯¥ä»£ç å—çš„ç§æœ‰æ–¹æ³•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæŒ‡å‘è¯¥æ–¹æ³•çš„å§”æ‰˜å®ä¾‹ã€‚</p>
<h3 data-id="heading-4">C# 3.0ï¼šLINQé©å‘½ä¸æ•ˆç‡é£è·ƒ</h3>
<h4 data-id="heading-5">1. éšå¼ç±»å‹å±€éƒ¨å˜é‡ (<code>var</code>)</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;(); <span class="hljs-comment">// ç¼–è¯‘å™¨æ¨æ–­listä¸ºList&lt;string&gt;</span>
<span class="hljs-keyword">var</span> number = <span class="hljs-number">10</span>; <span class="hljs-comment">// ç¼–è¯‘å™¨æ¨æ–­numberä¸ºint</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">List&lt;<span class="hljs-built_in">string</span>&gt; list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;();
<span class="hljs-built_in">int</span> number = <span class="hljs-number">10</span>;
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼š<code>var</code> æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å ä½ç¬¦ã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®èµ‹å€¼ç¬¦å·å³ä¾§çš„è¡¨è¾¾å¼æ¨å¯¼å‡ºç¡®åˆ‡çš„ç±»å‹ï¼Œç„¶åæ›¿æ¢æ‰ <code>var</code>ã€‚å®ƒ<strong>ä¸æ˜¯</strong>åŠ¨æ€ç±»å‹ï¼Œå˜é‡ç±»å‹åœ¨ç¼–è¯‘åå°±è¢«å›ºå®šäº†ã€‚</p>
<h4 data-id="heading-6">2. è‡ªåŠ¨å±æ€§</h4>
<p>å½»åº•ç®€åŒ–äº†å°è£…å­—æ®µçš„å±æ€§å£°æ˜ã€‚
<strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-string">"Unknown"</span>; <span class="hljs-comment">// å¸¦é»˜è®¤å€¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// é™åˆ¶setè®¿é—®æƒé™</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _name = <span class="hljs-string">"Unknown"</span>;
<span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name {
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> _name; }
    <span class="hljs-keyword">set</span> { _name = <span class="hljs-keyword">value</span>; }
}
<span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _id;
<span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Id {
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> _id; }
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span> { _id = <span class="hljs-keyword">value</span>; }
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšè—çš„ç§æœ‰åå¤‡å­—æ®µï¼ˆåç§°é€šå¸¸ç±»ä¼¼ <code>&lt;Name&gt;k__BackingField</code>ï¼‰ï¼Œå¹¶ç”Ÿæˆå®Œæ•´çš„ <code>get</code> å’Œ <code>set</code> è®¿é—®å™¨æ–¹æ³•ã€‚</p>
<h4 data-id="heading-7">3. å¯¹è±¡ä¸é›†åˆåˆå§‹åŒ–å™¨</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•ï¼ˆå¯¹è±¡ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person { Name = <span class="hljs-string">"Alice"</span>, Age = <span class="hljs-number">25</span> };
</code></pre>
<p><strong>åŸå§‹å†™æ³•ï¼ˆå¯¹è±¡ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> Person();
person.Name = <span class="hljs-string">"Alice"</span>;
person.Age = <span class="hljs-number">25</span>;
</code></pre>
<p><strong>è¯­æ³•ç³–å†™æ³•ï¼ˆé›†åˆï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> numbers = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt; { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> };
</code></pre>
<p><strong>åŸå§‹å†™æ³•ï¼ˆé›†åˆï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> numbers = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
numbers.Add(<span class="hljs-number">1</span>);
numbers.Add(<span class="hljs-number">2</span>);
numbers.Add(<span class="hljs-number">3</span>);
numbers.Add(<span class="hljs-number">4</span>);
numbers.Add(<span class="hljs-number">5</span>);
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šå¯¹äºå¯¹è±¡ï¼Œç¼–è¯‘å™¨å°†åˆå§‹åŒ–å™¨è½¬æ¢ä¸ºåœ¨åˆ›å»ºå¯¹è±¡åçš„ä¸€ç³»åˆ—å±æ€§èµ‹å€¼è¯­å¥ã€‚å¯¹äºé›†åˆï¼Œç¼–è¯‘å™¨è½¬æ¢ä¸ºå¯¹ <code>Add</code> æ–¹æ³•çš„è¿ç»­è°ƒç”¨ã€‚</p>
<h4 data-id="heading-8">4. Lambdaè¡¨è¾¾å¼</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; square = x =&gt; x * x;
list.ForEach(i =&gt; Console.WriteLine(i));
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨åŒ¿åæ–¹æ³•</span>
Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt; square = <span class="hljs-built_in">delegate</span>(<span class="hljs-built_in">int</span> x) { <span class="hljs-keyword">return</span> x * x; };
<span class="hljs-comment">// æˆ–ä½¿ç”¨å…·åæ–¹æ³•</span>
list.ForEach(<span class="hljs-keyword">new</span> Action&lt;<span class="hljs-built_in">int</span>&gt;(PrintItem));
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PrintItem</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> i</span>)</span> { Console.WriteLine(i); }
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šLambdaè¡¨è¾¾å¼æ˜¯åŒ¿åæ–¹æ³•çš„è¿›ä¸€æ­¥ç®€åŒ–ã€‚ç¼–è¯‘å™¨ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œæˆ–è€…åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚è¡¨è¾¾å¼æ ‘ <code>Expression&lt;Func&lt;T&gt;&gt;</code>ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªæè¿°æ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p>
<h4 data-id="heading-9">5. æ‰©å±•æ–¹æ³•</h4>
<p>å…è®¸å‘ç°æœ‰ç±»å‹â€œæ·»åŠ â€æ–°æ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹åŸå§‹ç±»å‹æˆ–åˆ›å»ºæ´¾ç”Ÿç±»ã€‚
<strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> s = <span class="hljs-string">"123"</span>;
<span class="hljs-built_in">bool</span> isNumeric = s.IsNumber(); <span class="hljs-comment">// å°±åƒstringåŸç”Ÿæ–¹æ³•ä¸€æ ·</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> s = <span class="hljs-string">"123"</span>;
<span class="hljs-built_in">bool</span> isNumeric = StringExt.IsNumber(s); <span class="hljs-comment">// é™æ€æ–¹æ³•è°ƒç”¨</span>
<span class="hljs-comment">// éœ€è¦å®šä¹‰é™æ€ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringExt</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsNumber</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> input</span>)</span> { ... }
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šæ‰©å±•æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„é™æ€æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨ <code>this</code> ä¿®é¥°ç¬¦ã€‚è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°† <code>obj.Method(args)</code> è½¬æ¢ä¸º <code>StaticClass.Method(obj, args)</code>ã€‚</p>
<h3 data-id="heading-10">C# 4.0ï¼šçµæ´»æ€§ä¸äº’æ“ä½œæ€§</h3>
<h4 data-id="heading-11">1. å‘½åå‚æ•°ä¸å¯é€‰å‚æ•°</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Register</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age = <span class="hljs-number">18</span>, <span class="hljs-built_in">string</span> city = <span class="hljs-string">"Beijing"</span></span>)</span> { }
<span class="hljs-comment">// è°ƒç”¨</span>
Register(<span class="hljs-string">"Bob"</span>, city: <span class="hljs-string">"Shanghai"</span>); <span class="hljs-comment">// ä½¿ç”¨å‘½åå‚æ•°è·³è¿‡ageï¼Œä½¿ç”¨é»˜è®¤å€¼</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¸ºäº†å®ç°é»˜è®¤å€¼ï¼Œéœ€è¦ä½¿ç”¨æ–¹æ³•é‡è½½</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Register</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">int</span> age, <span class="hljs-built_in">string</span> city</span>)</span> { }
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Register</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> name, <span class="hljs-built_in">string</span> city</span>)</span> {
    Register(name, <span class="hljs-number">18</span>, city); <span class="hljs-comment">// è°ƒç”¨é‡è½½ï¼Œä¼ å…¥é»˜è®¤å¹´é¾„</span>
}
<span class="hljs-comment">// è°ƒç”¨</span>
Register(<span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Shanghai"</span>);
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šå¯é€‰å‚æ•°åœ¨ç¼–è¯‘æ—¶ï¼Œè°ƒç”¨å¤„çš„ç¼ºå¤±å‚æ•°ä¼šè¢«å¡«å……ä¸Šé»˜è®¤å€¼ã€‚å‘½åå‚æ•°åˆ™å…è®¸ç¼–è¯‘å™¨æ ¹æ®å‚æ•°åè¿›è¡ŒåŒ¹é…ï¼Œè€Œä¸æ˜¯ä¸¥æ ¼ä¾èµ–é¡ºåºã€‚</p>
<h3 data-id="heading-12">C# 5.0ï¼šå¼‚æ­¥ç¼–ç¨‹çš„é©å‘½</h3>
<h4 data-id="heading-13">1. <code>async</code> / <code>await</code></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">GetWebPageAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span> {
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> HttpClient();
    <span class="hljs-built_in">string</span> content = <span class="hljs-keyword">await</span> client.GetStringAsync(url);
    <span class="hljs-keyword">return</span> content.ToUpper();
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼ˆAPMï¼‰æˆ–ä»»åŠ¡å¹¶è¡Œåº“ï¼ˆTPLï¼‰ä¼šå¤æ‚å¾—å¤šï¼Œæ¶‰åŠå›è°ƒã€ContinueWithç­‰ã€‚</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Task&lt;<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">GetWebPageAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span> {
    <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> HttpClient();
    <span class="hljs-keyword">return</span> client.GetStringAsync(url)
                 .ContinueWith(t =&gt; t.Result.ToUpper());
    <span class="hljs-comment">// é”™è¯¯å¤„ç†ã€èµ„æºé‡Šæ”¾ç­‰é€»è¾‘ä¼šå˜å¾—éå¸¸å†—é•¿å’Œéš¾ä»¥ç»´æŠ¤ã€‚</span>
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šè¿™æ˜¯C#å†å²ä¸Šæœ€é‡è¦çš„è¯­æ³•ç³–ä¹‹ä¸€ã€‚ç¼–è¯‘å™¨ä¼šå°† <code>async</code>/<code>await</code> æ–¹æ³•é‡å†™ä¸ºä¸€ä¸ªå¤æ‚çš„çŠ¶æ€æœºç±»ã€‚<code>await</code> å¤„ä¼šæˆä¸ºçŠ¶æ€æœºçš„åˆ‡ç‚¹ï¼Œå½“å¼‚æ­¥æ“ä½œå®Œæˆåï¼ŒçŠ¶æ€æœºä¼šä»åˆ‡ç‚¹æ¢å¤æ‰§è¡Œï¼Œè€Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½éšè—åœ¨äº†ç®€æ´çš„è¯­æ³•ä¹‹ä¸‹ã€‚</p>
<h3 data-id="heading-14">C# 6.0ï¼šç»†èŠ‚ä¹‹å¤„çš„æ•ˆç‡é©å‘½</h3>
<h4 data-id="heading-15">1. ç©ºæ¡ä»¶è¿ç®—ç¬¦ (<code>?.</code>)</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> cityName = user?.Address?.City; <span class="hljs-comment">// ä»»æ„ä¸€ç¯ä¸ºnullï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼ç»“æœä¸ºnull</span>
<span class="hljs-built_in">int</span>? length = user?.Name?.Length; <span class="hljs-comment">// å®‰å…¨è·å–å¯èƒ½ä¸ºnullçš„å±æ€§</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> cityName = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span> &amp;&amp; user.Address != <span class="hljs-literal">null</span>) {
    cityName = user.Address.City;
}
<span class="hljs-built_in">int</span>? length = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span> &amp;&amp; user.Name != <span class="hljs-literal">null</span>) {
    length = user.Name.Length;
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ¨æ¯æ¬¡ <code>.</code> æ“ä½œå‰æ’å…¥ç©ºå€¼æ£€æŸ¥ã€‚å¦‚æœæ£€æŸ¥åˆ° <code>null</code>ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼ç›´æ¥çŸ­è·¯è¿”å› <code>null</code>ã€‚</p>
<h4 data-id="heading-16">2. å­—ç¬¦ä¸²æ’å€¼ (<code>$</code>)</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> info = <span class="hljs-string">$"Name: <span class="hljs-subst">{name}</span>, Age: <span class="hljs-subst">{age + <span class="hljs-number">1</span>}</span>"</span>; <span class="hljs-comment">// ç›´æ¥åµŒå…¥å˜é‡å’Œè¡¨è¾¾å¼</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">string</span> info = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"Name: {0}, Age: {1}"</span>, name, age + <span class="hljs-number">1</span>);
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šç¼–è¯‘å™¨ä¼šå°†æ’å€¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹ <code>string.Format</code> æ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶æŒ‰é¡ºåºå°†è¡¨è¾¾å¼çš„ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p>
<h4 data-id="heading-17">3. è¡¨è¾¾å¼ä½“æˆå‘˜</h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FullName =&gt; <span class="hljs-string">$"<span class="hljs-subst">{FirstName}</span> <span class="hljs-subst">{LastName}</span>"</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ToString</span>()</span> =&gt; FullName; <span class="hljs-comment">// æ–¹æ³•</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FullName {
    <span class="hljs-keyword">get</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">$"<span class="hljs-subst">{FirstName}</span> <span class="hljs-subst">{LastName}</span>"</span>; }
}
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ToString</span>()</span> {
    <span class="hljs-keyword">return</span> FullName;
}
</code></pre>
<p><strong>æœ¬è´¨</strong>ï¼šå¯¹äºå•è¡Œçš„æ–¹æ³•ã€å±æ€§ã€ç´¢å¼•å™¨æˆ–è¿ç®—ç¬¦ï¼Œç¼–è¯‘å™¨å°†å…¶ <code>{ return ...; }</code> çš„å—ç»“æ„ç®€åŒ–ä¸º <code>=&gt; expression</code> çš„å½¢å¼ã€‚</p>
<h3 data-id="heading-18"><strong>C# 7.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-19"><strong>1. å…ƒç»„ (Tuples)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•è®©è¿”å›å¤šä¸ªå€¼å˜å¾—å¼‚å¸¸ç®€æ´ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">public</span> (<span class="hljs-built_in">string</span> Name, <span class="hljs-built_in">int</span> Age) GetPersonInfo() {
    <span class="hljs-keyword">return</span> (<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>);
}
<span class="hljs-keyword">var</span> info = GetPersonInfo();
Console.WriteLine(<span class="hljs-string">$"å§“å: <span class="hljs-subst">{info.Name}</span>, å¹´é¾„: <span class="hljs-subst">{info.Age}</span>"</span>); <span class="hljs-comment">// å¯ç›´æ¥è®¿é—®å…·åå…ƒç´ </span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šä½¿ç”¨æ—§çš„ System.Tuple ç±»</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Tuple&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">int</span>&gt; <span class="hljs-title">GetPersonInfo</span>()</span> {
    <span class="hljs-keyword">return</span> Tuple.Create(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>);
}
<span class="hljs-keyword">var</span> info = GetPersonInfo();
Console.WriteLine(<span class="hljs-string">$"å§“å: <span class="hljs-subst">{info.Item1}</span>, å¹´é¾„: <span class="hljs-subst">{info.Item2}</span>"</span>); <span class="hljs-comment">// åªèƒ½è®¿é—®Item1, Item2</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šC# 7.0å¼•å…¥äº†æ–°çš„å€¼ç±»å‹å…ƒç»„ï¼ˆ<code>System.ValueTuple</code>ï¼‰ï¼Œæ”¯æŒé€šè¿‡å£°æ˜æ€§å‘½åï¼ˆå¦‚<code>Name</code>, <code>Age</code>ï¼‰è®¿é—®å…ƒç´ ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„å¯è¯»æ€§ï¼Œè€Œæ—§å†™æ³•åªèƒ½ä½¿ç”¨æ— æ„ä¹‰çš„<code>Item1</code>ã€<code>Item2</code>ã€‚</p>
<h4 data-id="heading-20"><strong>2. å…ƒç»„è§£æ„ (Deconstruction)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å¯ä»¥å°†å…ƒç»„æˆ–å¯¹è±¡çš„æˆå‘˜å¿«é€Ÿè§£æ„åˆ°å•ç‹¬çš„å˜é‡ä¸­ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šè§£æ„å…ƒç»„</span>
<span class="hljs-keyword">var</span> (name, age) = GetPersonInfo();
<span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä¸ºè‡ªå®šä¹‰ç±»æ·»åŠ è§£æ„åŠŸèƒ½</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Point</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> X { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Y { <span class="hljs-keyword">get</span>; }
    <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªDeconstructæ–¹æ³•å³å¯æ”¯æŒè§£æ„</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Deconstruct</span>(<span class="hljs-params"><span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> x, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> y</span>)</span> {
        x = X; y = Y;
    }
}
<span class="hljs-keyword">var</span> point = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
<span class="hljs-keyword">var</span> (x, y) = point; <span class="hljs-comment">// ç›´æ¥è§£æ„å¯¹è±¡</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šæ‰‹åŠ¨æå–æ¯ä¸ªå€¼</span>
<span class="hljs-keyword">var</span> info = GetPersonInfo();
<span class="hljs-built_in">string</span> name = info.Item1;
<span class="hljs-built_in">int</span> age = info.Item2;
<span class="hljs-comment">// å¯¹äºè‡ªå®šä¹‰ç±»ï¼Œéœ€è¦åˆ†åˆ«è®¿é—®å±æ€§</span>
<span class="hljs-keyword">var</span> point = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
<span class="hljs-built_in">int</span> x = point.X;
<span class="hljs-built_in">int</span> y = point.Y;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè§£æ„è¯­æ³•åœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºè°ƒç”¨å¯¹è±¡çš„<code>Deconstruct</code>æ–¹æ³•ï¼ˆå¯¹äºå…ƒç»„åˆ™æ˜¯å†…ç½®æ”¯æŒï¼‰ï¼Œå°†å¤šä¸ªèµ‹å€¼æ­¥éª¤åˆå¹¶ä¸ºä¸€è¡Œç®€æ´çš„ä»£ç ã€‚</p>
<h4 data-id="heading-21"><strong>3. <code>out</code>å˜é‡å£°æ˜ (Out Variables)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨ä½¿ç”¨<code>out</code>å‚æ•°æ—¶ç›´æ¥å†…è”å£°æ˜å˜é‡ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>.TryParse(inputString, <span class="hljs-keyword">out</span> <span class="hljs-built_in">int</span> result)) {
    <span class="hljs-comment">// å¯ä»¥ç›´æ¥ä½¿ç”¨result</span>
    Console.WriteLine(result);
}
<span class="hljs-comment">// resultå˜é‡åœ¨ifä½œç”¨åŸŸå¤–ä»å¯è®¿é—®ï¼ˆC# 7.0èµ·ï¼‰</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šå¿…é¡»é¢„å…ˆå£°æ˜å˜é‡</span>
<span class="hljs-built_in">int</span> result; <span class="hljs-comment">// å…ˆå£°æ˜</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">int</span>.TryParse(inputString, <span class="hljs-keyword">out</span> result)) {
    Console.WriteLine(result);
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¯¥ç‰¹æ€§ç®€åŒ–äº†<code>out</code>å˜é‡çš„ä½¿ç”¨æµç¨‹ï¼Œå°†å£°æ˜å’Œä¼ å‚åˆäºŒä¸ºä¸€ï¼Œå¹¶æ‹“å®½äº†å˜é‡çš„ä½œç”¨åŸŸï¼Œä½¿ä»£ç æ›´ç´§å‡‘ã€‚</p>
<h4 data-id="heading-22"><strong>4. æ¨¡å¼åŒ¹é… (Pattern Matching)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•æä¾›äº†æ›´å¼ºå¤§çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼š`is`ç±»å‹æ¨¡å¼</span>
<span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span> s &amp;&amp; s.Length &gt; <span class="hljs-number">5</span>) {
    Console.WriteLine(s.ToUpper());
}
<span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼š`switch`è¡¨è¾¾å¼ï¼ˆC# 8.0åŠ å¼ºï¼Œæ­¤å¤„å±•ç¤ºåŸºç¡€ï¼‰</span>
<span class="hljs-keyword">switch</span> (shape) {
    <span class="hljs-keyword">case</span> Circle c:
        Console.WriteLine(<span class="hljs-string">$"åœ†å½¢ï¼ŒåŠå¾„: <span class="hljs-subst">{c.Radius}</span>"</span>);
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> Rectangle r <span class="hljs-keyword">when</span> r.Width == r.Height:
        Console.WriteLine(<span class="hljs-string">$"æ­£æ–¹å½¢ï¼Œè¾¹é•¿: <span class="hljs-subst">{r.Width}</span>"</span>);
        <span class="hljs-keyword">break</span>;
    <span class="hljs-literal">default</span>:
        Console.WriteLine(<span class="hljs-string">"æœªçŸ¥å½¢çŠ¶"</span>);
        <span class="hljs-keyword">break</span>;
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦é¢å¤–çš„ç±»å‹è½¬æ¢</span>
<span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> <span class="hljs-built_in">string</span>) {
    <span class="hljs-built_in">string</span> s = (<span class="hljs-built_in">string</span>)obj; <span class="hljs-comment">// å¼ºåˆ¶è½¬æ¢</span>
    <span class="hljs-keyword">if</span> (s.Length &gt; <span class="hljs-number">5</span>) {
        Console.WriteLine(s.ToUpper());
    }
}
<span class="hljs-comment">// switchè¯­å¥ä¸­ï¼Œcaseå—æ— æ³•ç›´æ¥å£°æ˜å˜é‡å’Œé™„åŠ æ¡ä»¶</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>is</code>æ¨¡å¼åŒ¹é…å°†ç±»å‹æ£€æŸ¥ã€è½¬æ¢å’Œèµ‹å€¼åˆå¹¶ä¸ºä¸€æ­¥ï¼ŒåŒæ—¶é¿å…äº†æ— æ•ˆçš„è½¬æ¢æ“ä½œã€‚<code>switch</code>çš„æ¨¡å¼åŒ¹é…åˆ™è®©<code>case</code>åˆ†æ”¯æ›´å¼ºå¤§ã€æ›´å®‰å…¨ã€‚</p>
<h4 data-id="heading-23"><strong>5. æ•°å­—åˆ†éš”ç¬¦ (Digit Separators)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•ç”¨ä¸‹åˆ’çº¿æé«˜é•¿æ•°å­—çš„å¯è¯»æ€§ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-built_in">long</span> oneBillion = <span class="hljs-number">1</span>_000_000_000;
<span class="hljs-built_in">double</span> pi = <span class="hljs-number">3.141</span>_592_653_589_793;
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•</span>
<span class="hljs-built_in">long</span> oneBillion = <span class="hljs-number">1000000000</span>;
<span class="hljs-built_in">double</span> pi = <span class="hljs-number">3.141592653589793</span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šä¸‹åˆ’çº¿åœ¨ç¼–è¯‘æ—¶ä¼šè¢«å¿½ç•¥ï¼Œçº¯ç²¹ä¸ºäº†å¼€å‘è€…é˜…è¯»æ–¹ä¾¿ï¼Œå°¤å…¶é€‚ç”¨äºé“¶è¡Œå¡å·ã€å¸¸é‡æ©ç ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-24"><strong>C# 8.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-25"><strong>1. <code>using</code>å£°æ˜ (Using Declarations)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•ç®€åŒ–äº†å®ç°äº†<code>IDisposable</code>æ¥å£çš„èµ„æºçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> file = <span class="hljs-keyword">new</span> StreamWriter(<span class="hljs-string">"test.txt"</span>);
file.WriteLine(<span class="hljs-string">"Hello"</span>);
<span class="hljs-comment">// æ­¤å¤„ï¼Œfileä¼šè‡ªåŠ¨è°ƒç”¨Disposeæ–¹æ³•</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦æ˜¾å¼çš„usingä»£ç å—</span>
<span class="hljs-keyword">using</span> (<span class="hljs-keyword">var</span> file = <span class="hljs-keyword">new</span> StreamWriter(<span class="hljs-string">"test.txt"</span>)) {
    file.WriteLine(<span class="hljs-string">"Hello"</span>);
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæ–°çš„<code>using</code>å£°æ˜ä¼šåœ¨å˜é‡æ‰€åœ¨ä½œç”¨åŸŸï¼ˆé€šå¸¸æ˜¯æ–¹æ³•ï¼‰ç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå‡å°‘äº†ä»£ç åµŒå¥—ï¼Œæ›´é€‚ç”¨äºç®¡ç†å•ä¸€èµ„æºçš„æƒ…å†µã€‚</p>
<h4 data-id="heading-26"><strong>2. å¼‚æ­¥æµ (Async Streams)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸ä½¿ç”¨<code>await foreach</code>æ¥æ¶ˆè´¹å¼‚æ­¥æšä¸¾çš„æ•°æ®æµã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> IAsyncEnumerable&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">FetchAsyncData</span>()</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
        <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// å¼‚æ­¥æµä¸­ä½¿ç”¨yield return</span>
    }
}
<span class="hljs-comment">// æ¶ˆè´¹å¼‚æ­¥æµ</span>
<span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-function"><span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> <span class="hljs-title">FetchAsyncData</span>())</span> {
    Console.WriteLine(number);
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šæ²¡æœ‰åŸç”Ÿæ”¯æŒï¼Œæ‰‹åŠ¨ç»„åˆå¼‚æ­¥å’Œè¿­ä»£éå¸¸å¤æ‚</span>
<span class="hljs-comment">// é€šå¸¸éœ€è¦è‡ªå®šä¹‰å®ç°å¼‚æ­¥è¿­ä»£å™¨ï¼Œæ¶‰åŠå¤§é‡çŠ¶æ€ç®¡ç†ã€å›è°ƒç­‰ç¹çä»£ç ã€‚</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå¼‚æ­¥æµï¼ˆ<code>IAsyncEnumerable&lt;T&gt;</code>ï¼‰ç»“åˆäº†è¿­ä»£å™¨ï¼ˆ<code>yield return</code>ï¼‰å’Œå¼‚æ­¥ï¼ˆ<code>async/await</code>ï¼‰æ¨¡å¼ï¼Œä¸ºå¤„ç†æ•°æ®æµï¼ˆå¦‚å®æ—¶æ•°æ®ã€åˆ†é¡µæŸ¥è¯¢ï¼‰æä¾›äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-27"><strong>3. å¯ç©ºå¼•ç”¨ç±»å‹ (Nullable Reference Types)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•é€šè¿‡åœ¨ç±»å‹åæ·»åŠ <code>?</code>ï¼Œè®©ç¼–è¯‘å™¨å¯¹å¼•ç”¨ç±»å‹çš„ç©ºå€¼è¿›è¡Œé™æ€æµåˆ†æï¼Œæä¾›è­¦å‘Šã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šå¯ç”¨#nullableä¸Šä¸‹æ–‡å</span>
<span class="hljs-built_in">string</span> name = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç¼–è¯‘å™¨è­¦å‘Šï¼šå¯èƒ½å°† null å¼•ç”¨èµ‹ç»™ä¸å¯ä¸º null çš„å®ä½“ã€‚</span>
<span class="hljs-built_in">string</span>? nullableName = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ­£ç¡®ï¼Œæ˜ç¡®å£°æ˜å¯ä¸ºnull</span>
Console.WriteLine(nullableName.Length); <span class="hljs-comment">// è­¦å‘Šï¼šå¯èƒ½å–æ¶ˆå¼•ç”¨ nullã€‚</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šæ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½éšå¼å¯ä¸ºnullï¼Œæ²¡æœ‰ç¼–è¯‘æ—¶æ£€æŸ¥ã€‚</span>
<span class="hljs-built_in">string</span> name = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ— è­¦å‘Šï¼Œè¿è¡Œæ—¶å¯èƒ½æŠ›å‡ºNullReferenceException</span>
Console.WriteLine(name.Length); <span class="hljs-comment">// æ— è­¦å‘Šï¼Œç›´åˆ°è¿è¡Œæ—¶å‡ºé”™</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæ­¤ç‰¹æ€§å¹¶éä¼ ç»Ÿè¯­æ³•ç³–ï¼Œè€Œæ˜¯ä¸€é¡¹é‡å¤§çš„ç±»å‹ç³»ç»Ÿå¢å¼ºã€‚å®ƒé€šè¿‡ç¼–è¯‘å™¨è­¦å‘Šå°†æ½œåœ¨çš„<code>NullReferenceException</code>ä»è¿è¡Œæ—¶æå‰åˆ°ç¼–è¯‘æ—¶ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„å¥å£®æ€§ã€‚</p>
<h4 data-id="heading-28"><strong>4. åªè¯»ç»“æ„ä½“æˆå‘˜ (Readonly Members)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨ç»“æ„ä½“çš„ç‰¹å®šæˆå‘˜ä¸Šæ ‡è®°<code>readonly</code>ï¼Œè¡¨æ˜è¯¥æˆå‘˜ä¸ä¼šä¿®æ”¹ç»“æ„ä½“çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Point {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-comment">// å£°æ˜æ­¤æ–¹æ³•ä¸ä¼šä¿®æ”¹ç»“æ„ä½“</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">double</span> Distance =&gt; Math.Sqrt(X * X + Y * Y);
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šæ— æ³•åœ¨æˆå‘˜çº§åˆ«å£°æ˜åªè¯»ã€‚è‹¥æƒ³ç¡®ä¿ä¸ä¿®æ”¹çŠ¶æ€ï¼Œéœ€å°†æ•´ä¸ªç»“æ„ä½“å£°æ˜ä¸ºreadonlyï¼Œé™åˆ¶è¾ƒå¤§ã€‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">struct</span> Point {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> X { <span class="hljs-keyword">get</span>; } <span class="hljs-comment">// æ‰€æœ‰å­—æ®µ/å±æ€§éƒ½å¿…é¡»æ˜¯åªè¯»çš„</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Y { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Distance =&gt; Math.Sqrt(X * X + Y * Y);
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæ›´ç»†ç²’åº¦çš„<code>readonly</code>ä¿®é¥°ç¬¦æå‡äº†æ€§èƒ½ï¼ˆå¸®åŠ©ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ï¼‰å’Œè®¾è®¡æ„å›¾çš„æ¸…æ™°åº¦ã€‚</p>
<h3 data-id="heading-29"><strong>C# 9.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-30"><strong>1. è®°å½•ç±»å‹ (Record Types)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•ç”¨äºå®šä¹‰ä¸å¯å˜çš„æ•°æ®è½½ä½“ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå€¼ç›¸ç­‰æ€§æ¯”è¾ƒã€<code>ToString()</code>ç­‰æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä½¿ç”¨`record`å…³é”®å­—</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> FirstName, <span class="hljs-built_in">string</span> LastName</span>)</span>;
<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">var</span> person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"å¼ "</span>, <span class="hljs-string">"ä¸‰"</span>);
<span class="hljs-keyword">var</span> person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"å¼ "</span>, <span class="hljs-string">"ä¸‰"</span>);
Console.WriteLine(person1 == person2); <span class="hljs-comment">// è¾“å‡ºï¼šTrueï¼ŒåŸºäºå€¼çš„æ¯”è¾ƒ</span>
Console.WriteLine(person1); <span class="hljs-comment">// è¾“å‡ºï¼šPerson { FirstName = å¼ , LastName = ä¸‰ }</span>
<span class="hljs-comment">// éç ´åæ€§ä¿®æ”¹ï¼ˆwithè¡¨è¾¾å¼ï¼‰</span>
<span class="hljs-keyword">var</span> person3 = person1 <span class="hljs-keyword">with</span> { LastName = <span class="hljs-string">"å››"</span> };
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦æ‰‹åŠ¨ç¼–å†™å¤§é‡æ ·æ¿ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> : <span class="hljs-title">IEquatable</span>&lt;<span class="hljs-title">Person</span>&gt; {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FirstName { <span class="hljs-keyword">get</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> LastName { <span class="hljs-keyword">get</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> firstName, <span class="hljs-built_in">string</span> lastName</span>)</span> {
        FirstName = firstName;
        LastName = lastName;
    }
    <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨é‡å†™Equals, GetHashCode, ToString, å®ç°è§£æ„æ–¹æ³•ç­‰ï¼Œä»£ç é‡æå¤§ã€‚</span>
    <span class="hljs-comment">// å®ç°å€¼ç›¸ç­‰æ€§æ¯”è¾ƒéå¸¸ç¹çã€‚</span>
    <span class="hljs-comment">// ä¸æ”¯æŒ`with`è¡¨è¾¾å¼ï¼Œä¿®æ”¹éœ€è¦åˆ›å»ºæ–°å¯¹è±¡å¹¶æ‰‹åŠ¨å¤åˆ¶æ‰€æœ‰å­—æ®µã€‚</span>
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>record</code>æ˜¯ä¸“ä¸ºä¸å¯å˜æ•°æ®å»ºæ¨¡è®¾è®¡çš„è¯­æ³•ç³–ï¼Œè‡ªåŠ¨å®ç°åŸºäºå€¼çš„è¯­ä¹‰ï¼Œæå¤§åœ°å‡å°‘äº†æ ·æ¿ä»£ç ï¼Œæ˜¯æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰å’Œå€¼å¯¹è±¡çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h4 data-id="heading-31"><strong>2. æ¨¡å¼åŒ¹é…å¢å¼º (Enhanced Pattern Matching)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å¼•å…¥äº†æ›´ç®€æ´çš„å…³ç³»æ¨¡å¼å’Œé€»è¾‘æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šå…³ç³»æ¨¡å¼ï¼ˆ&gt;, &lt;, &gt;=, &lt;=ï¼‰å’Œé€»è¾‘æ¨¡å¼ï¼ˆand, or, notï¼‰</span>
<span class="hljs-keyword">if</span> (temperature <span class="hljs-keyword">is</span> &gt; <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> &lt; <span class="hljs-number">30</span>) {
    Console.WriteLine(<span class="hljs-string">"å®œäºº"</span>);
}
<span class="hljs-comment">// å±æ€§æ¨¡å¼</span>
<span class="hljs-keyword">if</span> (user <span class="hljs-keyword">is</span> { Age: &gt;= <span class="hljs-number">18</span>, Address.City: <span class="hljs-string">"åŒ—äº¬"</span> }) {
    Console.WriteLine(<span class="hljs-string">"åŒ—äº¬æˆå¹´ç”¨æˆ·"</span>);
}
<span class="hljs-comment">// åœ¨switchè¡¨è¾¾å¼ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">var</span> category = age <span class="hljs-keyword">switch</span> {
    &lt; <span class="hljs-number">13</span> =&gt; <span class="hljs-string">"å„¿ç«¥"</span>,
    &gt;= <span class="hljs-number">13</span> <span class="hljs-keyword">and</span> &lt; <span class="hljs-number">18</span> =&gt; <span class="hljs-string">"é’å°‘å¹´"</span>,
    _ =&gt; <span class="hljs-string">"æˆäºº"</span>
};
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šå¤šé‡æ¡ä»¶åˆ¤æ–­ï¼Œå†—é•¿ä¸”å®¹æ˜“å‡ºé”™</span>
<span class="hljs-keyword">if</span> (temperature &gt; <span class="hljs-number">20</span> &amp;&amp; temperature &lt; <span class="hljs-number">30</span>) {
    Console.WriteLine(<span class="hljs-string">"å®œäºº"</span>);
}
<span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span> &amp;&amp; user.Age &gt;= <span class="hljs-number">18</span> &amp;&amp; user.Address != <span class="hljs-literal">null</span> &amp;&amp; user.Address.City == <span class="hljs-string">"åŒ—äº¬"</span>) {
    Console.WriteLine(<span class="hljs-string">"åŒ—äº¬æˆå¹´ç”¨æˆ·"</span>);
}
<span class="hljs-built_in">string</span> category;
<span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">13</span>) {
    category = <span class="hljs-string">"å„¿ç«¥"</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">18</span>) {
    category = <span class="hljs-string">"é’å°‘å¹´"</span>;
} <span class="hljs-keyword">else</span> {
    category = <span class="hljs-string">"æˆäºº"</span>;
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿™äº›å¢å¼ºä½¿æ¨¡å¼åŒ¹é…çš„è¯­æ³•æ›´ç¬¦åˆäººç±»ç›´è§‰ï¼Œèƒ½ç›´æ¥è¡¨è¾¾å¤æ‚æ¡ä»¶ï¼Œå°†åŸæœ¬éœ€è¦å¤šè¡ŒåµŒå¥—çš„<code>if</code>è¯­å¥å‹ç¼©ä¸ºæ¸…æ™°çš„ä¸€è¡Œã€‚</p>
<h4 data-id="heading-32"><strong>3. <code>init</code>è®¿é—®å™¨ (Init-only Setters)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨å¯¹è±¡åˆå§‹åŒ–ï¼ˆæ„é€ æˆ–å¯¹è±¡åˆå§‹åŒ–å™¨ï¼‰æ—¶è®¾ç½®å±æ€§ï¼Œä¹‹åå˜ä¸ºåªè¯»ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FirstName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> LastName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">init</span>; }
}
<span class="hljs-comment">// åªèƒ½åœ¨åˆå§‹åŒ–æ—¶èµ‹å€¼</span>
<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> Person { FirstName = <span class="hljs-string">"å¼ "</span>, LastName = <span class="hljs-string">"ä¸‰"</span> };
<span class="hljs-comment">// p.FirstName = "æ"; // ç¼–è¯‘é”™è¯¯ï¼šinitè®¿é—®å™¨åªèƒ½åœ¨å¯¹è±¡åˆå§‹åŒ–æœŸé—´èµ‹å€¼ã€‚</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šé€šè¿‡ç§æœ‰setterå’Œæ„é€ å‡½æ•°å®ç°ï¼Œä¸å¤Ÿçµæ´»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FirstName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> LastName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> firstName, <span class="hljs-built_in">string</span> lastName</span>)</span> {
        FirstName = firstName;
        LastName = lastName;
    }
}
<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨åªè¯»å±æ€§é…åˆå†—é•¿çš„æ„é€ å‡½æ•°ã€‚</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>init</code>è®¿é—®å™¨åœ¨çµæ´»çš„å¯¹è±¡åˆå§‹åŒ–è¯­æ³•å’Œåˆ›å»ºåçš„ä¸å¯å˜æ€§ä¹‹é—´å–å¾—äº†å®Œç¾å¹³è¡¡ï¼Œæ˜¯å®ç°ä¸å¯å˜å¯¹è±¡çš„å¦ä¸€ç§ç®€æ´æ–¹å¼ã€‚</p>
<h3 data-id="heading-33"><strong>C# 10.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-34"><strong>1. æ–‡ä»¶èŒƒå›´å‘½åç©ºé—´ (File-scoped Namespaces)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å°†æ•´ä¸ªæ–‡ä»¶éƒ½ç½®äºä¸€ä¸ªå‘½åç©ºé—´ä¸‹ï¼Œå‡å°‘ä¸€çº§ç¼©è¿›ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyCompany.MyProject</span>;
<span class="hljs-comment">// ä»æ­¤å¤„å¼€å§‹ï¼Œæ‰€æœ‰ç±»å‹éƒ½å±äº MyCompany.MyProject</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> { }
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyCompany.MyProject</span> {
    <span class="hljs-comment">// æ•´ä¸ªæ–‡ä»¶å†…å®¹éœ€è¦ç¼©è¿›</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> { }
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå¯¹äºå¤§å¤šæ•°åªæœ‰ä¸€ä¸ªå‘½åç©ºé—´çš„æ–‡ä»¶ï¼Œæ­¤ç‰¹æ€§æ¶ˆé™¤äº†ä¸å¿…è¦çš„ç¼©è¿›ï¼Œä½¿ä»£ç æ›´ç®€æ´ï¼Œå°¤å…¶å¯¹åŒ…å«å¤§é‡ä»£ç çš„æ–‡ä»¶æ•ˆæœæ˜¾è‘—ã€‚</p>
<h4 data-id="heading-35"><strong>2. å…¨å±€<code>using</code>æŒ‡ä»¤ (Global Using Directives)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨é¡¹ç›®çº§æˆ–ç¼–è¯‘å•å…ƒçº§å…¨å±€å¼•å…¥å‘½åç©ºé—´ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šåœ¨æŸä¸ªæ–‡ä»¶ï¼ˆå¦‚GlobalUsings.csï¼‰ä¸­å£°æ˜</span>
<span class="hljs-keyword">global</span> <span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">global</span> <span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-comment">// æ­¤åï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ— éœ€å†é‡å¤ç¼–å†™ä¸Šè¿°usingè¯­å¥</span>
<span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­</span>
<span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;(); <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€`using System.Collections.Generic;`</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šå¿…é¡»åœ¨æ¯ä¸ª.csæ–‡ä»¶çš„é¡¶éƒ¨é‡å¤æ·»åŠ usingæŒ‡ä»¤</span>
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">MyNamespace</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> {
        <span class="hljs-keyword">var</span> list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">string</span>&gt;();
    }
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå‡å°‘äº†æ¯ä¸ªæ–‡ä»¶çš„é‡å¤ä»£ç ï¼Œç‰¹åˆ«æœ‰åˆ©äºå¤§å‹é¡¹ç›®å’Œå…±äº«é€šç”¨ä¾èµ–ã€‚</p>
<h3 data-id="heading-36"><strong>C# 11.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-37"><strong>1. åŸå§‹å­—ç¬¦ä¸²å­—é¢é‡ (Raw String Literals)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•ç”¨äºå¤„ç†åŒ…å«å¤§é‡å¼•å·ã€æ¢è¡Œç¬¦å’Œè½¬ä¹‰å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼ˆå¦‚JSONã€XMLã€SQLï¼‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä½¿ç”¨è‡³å°‘ä¸‰ä¸ªå¼•å·"""å¼€å¤´å’Œç»“å°¾</span>
<span class="hljs-built_in">string</span> json = <span class="hljs-string">""</span><span class="hljs-string">"
    {
        "</span>name<span class="hljs-string">": "</span>å¼ ä¸‰<span class="hljs-string">",
        "</span>age<span class="hljs-string">": 25,
        "</span>address<span class="hljs-string">": "</span>åŒ—äº¬å¸‚<span class="hljs-string">"
    }
    "</span><span class="hljs-string">""</span>;
<span class="hljs-comment">// å­—ç¬¦ä¸²å†…çš„å¼•å·å’Œæ¢è¡Œç¬¦ä¼šè¢«åŸæ ·ä¿ç•™ï¼Œæ— éœ€è½¬ä¹‰ã€‚</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦å¤§é‡è½¬ä¹‰ï¼Œå¯è¯»æ€§æå·®</span>
<span class="hljs-built_in">string</span> json = <span class="hljs-string">"{\n    \"name\": \"å¼ ä¸‰\",\n    \"age\": 25,\n    \"address\": \"åŒ—äº¬å¸‚\"\n}"</span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæå¤§åœ°æ”¹å–„äº†å¤šè¡Œå­—ç¬¦ä¸²å’ŒåµŒå…¥å¼æ–‡æœ¬çš„ç¼–å†™ä½“éªŒï¼Œä½¿ä»£ç çœ‹èµ·æ¥å’Œæœ€ç»ˆè¾“å‡ºçš„æ–‡æœ¬æ ¼å¼å‡ ä¹ä¸€è‡´ï¼Œä¸æ˜“å‡ºé”™ã€‚</p>
<h4 data-id="heading-38"><strong>2. åˆ—è¡¨æ¨¡å¼ (List Patterns)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨æ¨¡å¼åŒ¹é…ä¸­åŒ¹é…åˆ—è¡¨æˆ–æ•°ç»„çš„åºåˆ—ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-built_in">int</span>[] numbers = { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> };
<span class="hljs-keyword">if</span> (numbers <span class="hljs-keyword">is</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, .. <span class="hljs-keyword">var</span> rest]) {
    Console.WriteLine(<span class="hljs-string">$"å‰ä¸‰ä¸ªæ˜¯1,2,3ï¼Œå‰©ä½™<span class="hljs-subst">{rest.Length}</span>ä¸ªå…ƒç´ "</span>);
}
<span class="hljs-comment">// ä½¿ç”¨åˆ‡ç‰‡æ¨¡å¼ `..` åŒ¹é…å‰©ä½™éƒ¨åˆ†</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦æ‰‹åŠ¨æ£€æŸ¥é•¿åº¦å’Œæ¯ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">if</span> (numbers.Length &gt;= <span class="hljs-number">3</span> &amp;&amp; numbers[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span> &amp;&amp; numbers[<span class="hljs-number">1</span>] == <span class="hljs-number">2</span> &amp;&amp; numbers[<span class="hljs-number">2</span>] == <span class="hljs-number">3</span>) {
    <span class="hljs-keyword">var</span> rest = numbers.Skip(<span class="hljs-number">3</span>).ToArray();
    Console.WriteLine(<span class="hljs-string">$"å‰ä¸‰ä¸ªæ˜¯1,2,3ï¼Œå‰©ä½™<span class="hljs-subst">{rest.Length}</span>ä¸ªå…ƒç´ "</span>);
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå°†åºåˆ—åŒ¹é…èƒ½åŠ›é›†æˆåˆ°æ¨¡å¼åŒ¹é…ä½“ç³»ä¸­ï¼Œä¸ºå¤„ç†æ•°ç»„å’Œåˆ—è¡¨æä¾›äº†å£°æ˜å¼ä¸”å¼ºå¤§çš„æ–°å·¥å…·ã€‚</p>
<h3 data-id="heading-39"><strong>C# 12.0 è¯­æ³•ç³–</strong></h3>
<h4 data-id="heading-40"><strong>1. ä¸»æ„é€ å‡½æ•° (Primary Constructors)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸åœ¨ç±»æˆ–ç»“æ„ä½“å£°æ˜ä¸­ç›´æ¥å®šä¹‰æ„é€ å‡½æ•°å‚æ•°ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šå‚æ•°ç›´æ¥æˆä¸ºç±»çš„éšå¼ä½œç”¨åŸŸ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> firstName, <span class="hljs-built_in">string</span> lastName</span>)</span> {
    <span class="hljs-comment">// å¯ä»¥åœ¨ç±»ä½“å†…ç›´æ¥ä½¿ç”¨firstNameå’ŒlastName</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FullName =&gt; <span class="hljs-string">$"<span class="hljs-subst">{firstName}</span> <span class="hljs-subst">{lastName}</span>"</span>;
    <span class="hljs-comment">// ä¹Ÿå¯ä»¥é€‰æ‹©å°†å…¶å…¬å¼€ä¸ºå±æ€§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FirstName =&gt; firstName;
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _firstName;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> _lastName;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> firstName, <span class="hljs-built_in">string</span> lastName</span>)</span> {
        _firstName = firstName;
        _lastName = lastName;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FullName =&gt; <span class="hljs-string">$"<span class="hljs-subst">{_firstName}</span> <span class="hljs-subst">{_lastName}</span>"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> FirstName =&gt; _firstName;
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿›ä¸€æ­¥å‡å°‘äº†ä»…ç”¨äºåˆå§‹åŒ–å­—æ®µçš„æ„é€ å‡½æ•°æ‰€éœ€çš„æ ·æ¿ä»£ç ï¼Œä½¿ç±»å®šä¹‰æ›´åŠ ç´§å‡‘å’Œå£°æ˜å¼ã€‚</p>
<h4 data-id="heading-41"><strong>2. é›†åˆè¡¨è¾¾å¼ (Collection Expressions)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•æä¾›äº†ä¸€ç§ç»Ÿä¸€ã€ç®€æ´çš„è¯­æ³•æ¥åˆå§‹åŒ–å„ç§é›†åˆç±»å‹ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä½¿ç”¨æ–¹æ‹¬å·[]</span>
<span class="hljs-built_in">int</span>[] array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
List&lt;<span class="hljs-built_in">int</span>&gt; list = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
Span&lt;<span class="hljs-built_in">int</span>&gt; span = [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>];
<span class="hljs-comment">// æ”¯æŒå±•å¼€è¿ç®—ç¬¦ `..`</span>
<span class="hljs-built_in">int</span>[] combined = [.. array, .. list, <span class="hljs-number">10</span>];
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šä¸åŒç±»å‹è¯­æ³•ä¸åŒï¼Œä¸”åˆå¹¶é›†åˆç¹ç</span>
<span class="hljs-built_in">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> };
List&lt;<span class="hljs-built_in">int</span>&gt; list = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;() { <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span> };
<span class="hljs-comment">// åˆå¹¶é›†åˆ</span>
List&lt;<span class="hljs-built_in">int</span>&gt; combined = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();
combined.AddRange(array);
combined.AddRange(list);
combined.Add(<span class="hljs-number">10</span>);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šç”¨<code>[]</code>è¿™ä¸€ç§è¯­æ³•ç»Ÿä¸€äº†å‡ ä¹æ‰€æœ‰é›†åˆç±»å‹çš„åˆå§‹åŒ–æ–¹å¼ï¼Œå¹¶ç®€åŒ–äº†é›†åˆåˆå¹¶æ“ä½œï¼Œæ˜¯è¯­æ³•ç®€æ´æ€§å’Œä¸€è‡´æ€§çš„é‡å¤§æå‡ã€‚</p>
<h4 data-id="heading-42"><strong>3. å†…è”æ•°ç»„ (Inline Arrays)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸å¼€å‘è€…å®šä¹‰å›ºå®šå¤§å°çš„ç»“æ„ä½“æ•°ç»„ï¼Œè¿™æ˜¯ä¸€ç§åº•å±‚æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼šä½¿ç”¨[System.Runtime.CompilerServices.InlineArray]ç‰¹æ€§</span>
[<span class="hljs-meta">System.Runtime.CompilerServices.InlineArray(10)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> Buffer10 {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _element0; <span class="hljs-comment">// åªéœ€å®šä¹‰ä¸€ä¸ªç§æœ‰å­—æ®µ</span>
}

<span class="hljs-comment">// ä½¿ç”¨èµ·æ¥å°±åƒä¸€ä¸ªæ™®é€šçš„æ•°ç»„</span>
<span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> Buffer10();
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    buffer[i] = i; <span class="hljs-comment">// åƒæ•°ç»„ä¸€æ ·ç´¢å¼•è®¿é—®</span>
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šä½¿ç”¨å›ºå®šå¤§å°çš„æ•°ç»„ï¼ˆfixed arrayï¼‰ï¼Œéœ€è¦ä¸å®‰å…¨ä¸Šä¸‹æ–‡(unsafe)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">struct</span> Buffer10 {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">fixed</span> <span class="hljs-built_in">int</span> Data[<span class="hljs-number">10</span>]; <span class="hljs-comment">// åœ¨ç»“æ„ä½“ä¸­å£°æ˜å›ºå®šå¤§å°çš„ç¼“å†²åŒº</span>
}

<span class="hljs-comment">// ä½¿ç”¨èµ·æ¥ä¸ä¾¿ä¸”ä¸å®‰å…¨</span>
<span class="hljs-keyword">var</span> buffer = <span class="hljs-keyword">new</span> Buffer10();
<span class="hljs-keyword">unsafe</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        buffer.Data[i] = i;
    }
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå†…è”æ•°ç»„æ˜¯å®‰å…¨ä»£ç ä¸­å¯¹å›ºå®šå¤§å°ç¼“å†²åŒºçš„é«˜æ€§èƒ½æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒé¿å…äº†å›ºå®šç¼“å†²åŒºçš„å¤æ‚æ€§å’Œä¸å®‰å…¨ä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶ä»èƒ½æä¾›ç±»ä¼¼çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä¸»è¦ç”¨äºé«˜çº§åœºæ™¯ï¼ˆå¦‚æ¸¸æˆå¼•æ“ã€é«˜æ€§èƒ½è®¡ç®—ï¼‰ã€‚</p>
<h4 data-id="heading-43"><strong>4. Lambdaè¡¨è¾¾å¼å‚æ•°é»˜è®¤å€¼</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å…è®¸ä¸ºLambdaè¡¨è¾¾å¼çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">add</span> = (<span class="hljs-built_in">int</span> x, <span class="hljs-built_in">int</span> y = <span class="hljs-number">5</span>) =&gt; x + y;
Console.WriteLine(<span class="hljs-keyword">add</span>(<span class="hljs-number">10</span>));     <span class="hljs-comment">// è¾“å‡º15 (10+5)</span>
Console.WriteLine(<span class="hljs-keyword">add</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)); <span class="hljs-comment">// è¾“å‡º30 (10+20)</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šå¿…é¡»ä½¿ç”¨å…·åæ–¹æ³•æ‰èƒ½å®ç°å‚æ•°é»˜è®¤å€¼</span>
<span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> x, <span class="hljs-built_in">int</span> y = <span class="hljs-number">5</span></span>)</span> =&gt; x + y;
<span class="hljs-keyword">var</span> <span class="hljs-keyword">add</span> = <span class="hljs-keyword">new</span> Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt;(Add);
<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨å§”æ‰˜åŒ…è£¹</span>
<span class="hljs-keyword">var</span> <span class="hljs-keyword">add</span> = <span class="hljs-keyword">new</span> Func&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt;((x, y) =&gt; Add(x, y));
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿™ä¸€ç‰¹æ€§è®©Lambdaè¡¨è¾¾å¼çš„åŠŸèƒ½æ›´æ¥è¿‘å¸¸è§„æ–¹æ³•ï¼Œæé«˜äº†è¡¨è¾¾å¼çš„çµæ´»æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦éƒ¨åˆ†åº”ç”¨å‚æ•°æˆ–åˆ›å»ºçµæ´»å›è°ƒçš„åœºæ™¯ä¸­ã€‚</p>
<h4 data-id="heading-44"><strong>5. å®éªŒæ€§ç‰¹æ€§ï¼šæ‹¦æˆªå™¨ (Interceptors)</strong></h4>
<p>è¿™æ˜¯ä¸€ä¸ªåœ¨C# 12ä¸­é¦–æ¬¡å¼•å…¥çš„å®éªŒæ€§ç‰¹æ€§ï¼Œå…è®¸åœ¨ç¼–è¯‘æ—¶é‡å®šå‘æ–¹æ³•è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•/æ¦‚å¿µç¤ºæ„ï¼ˆå®é™…ä½¿ç”¨éœ€ç‰¹æ®Šé…ç½®ï¼‰</span>
<span class="hljs-comment">// å‡è®¾æˆ‘ä»¬æ‹¦æˆªå¯¹Console.WriteLineçš„è°ƒç”¨</span>
<span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨æ‹¦æˆªå™¨</span>
Console.WriteLine(<span class="hljs-string">"Hello"</span>); <span class="hljs-comment">// è¿™è¡Œä»£ç åœ¨ç¼–è¯‘æ—¶å¯èƒ½è¢«é‡å®šå‘åˆ°å…¶ä»–å®ç°</span>
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šè¦å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼æˆ–AOPæ¡†æ¶</span>
<span class="hljs-comment">// ä¾‹å¦‚ä½¿ç”¨è£…é¥°å™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LoggingConsoleWriter</span> : <span class="hljs-title">IConsoleWriter</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IConsoleWriter _inner;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteLine</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> message</span>)</span> {
        Log.Info(<span class="hljs-string">$"About to write: <span class="hljs-subst">{message}</span>"</span>);
        _inner.WriteLine(message);
    }
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæ‹¦æˆªå™¨æ˜¯ä¸€ä¸ªé«˜çº§çš„ç¼–è¯‘æ—¶å…ƒç¼–ç¨‹ç‰¹æ€§ï¼Œå®ƒå…è®¸åº“ä½œè€…åœ¨ä¸ä¿®æ”¹ç”¨æˆ·æºä»£ç çš„æƒ…å†µä¸‹ï¼Œåœ¨ç¼–è¯‘æ—¶æ”¹å˜ç‰¹å®šæ–¹æ³•è°ƒç”¨çš„è¡Œä¸ºã€‚<strong>æ³¨æ„</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§ç‰¹æ€§ï¼Œä¸»è¦ç”¨äºæºç”Ÿæˆå™¨ç­‰é«˜çº§åœºæ™¯ï¼Œæ™®é€šåº”ç”¨ç¨‹åºå¼€å‘ä¸­ä¸æ¨èä½¿ç”¨ã€‚</p>
<h3 data-id="heading-45"><strong>C# 13.0 é¢„è§ˆè¯­æ³•ç³–</strong></h3>
<p>ä»¥ä¸‹æ˜¯æ ¹æ®C#è¯­è¨€å‘å±•è·¯çº¿å›¾å·²å…¬å¸ƒçš„éƒ¨åˆ†ç‰¹æ€§ï¼ˆæˆªè‡³2024å¹´ï¼‰ï¼Œè¿™äº›ç‰¹æ€§å¯èƒ½åœ¨C# 13.0æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­æ­£å¼æ¨å‡ºã€‚</p>
<h4 data-id="heading-46"><strong>1. æ‰©å±•ä¸€åˆ‡ (Extension Everything)</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å¯èƒ½å…è®¸ä¸ºæ›´å¤šç±»å‹ï¼ˆå¦‚å€¼ç±»å‹ã€å§”æ‰˜ç­‰ï¼‰å®šä¹‰æ‰©å±•æ–¹æ³•ï¼Œç”šè‡³å¯èƒ½æ”¯æŒæ‰©å±•å±æ€§ç­‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼ˆå‡è®¾è¯­æ³•ï¼‰</span>
<span class="hljs-comment">// æ‰©å±•å±æ€§</span>
<span class="hljs-keyword">public</span> extension property <span class="hljs-built_in">string</span>.StringStats <span class="hljs-keyword">for</span> <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsPalindrome =&gt; <span class="hljs-keyword">this</span>.SequenceEqual(<span class="hljs-keyword">this</span>.Reverse());
}

<span class="hljs-comment">// æ‰©å±•å€¼ç±»å‹æ–¹æ³•</span>
<span class="hljs-keyword">public</span> extension method <span class="hljs-built_in">int</span>.Double() <span class="hljs-keyword">for</span> <span class="hljs-built_in">int</span> =&gt; <span class="hljs-keyword">this</span> * <span class="hljs-number">2</span>;
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šç›®å‰åªèƒ½ä¸ºå¼•ç”¨ç±»å‹å®šä¹‰æ‰©å±•æ–¹æ³•</span>
<span class="hljs-comment">// æ— æ³•ä¸ºstringå®šä¹‰æ‰©å±•å±æ€§</span>
<span class="hljs-comment">// æ£€æŸ¥å›æ–‡éœ€è¦å®šä¹‰ä¸€ä¸ªæ‰©å±•æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsPalindrome</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span> str</span>)</span> {
    <span class="hljs-keyword">return</span> str.SequenceEqual(str.Reverse());
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿™å°†å¤§å¤§å¢å¼ºæ‰©å±•æ–¹æ³•çš„èƒ½åŠ›ï¼Œå…è®¸æ›´ä¸°å¯Œçš„APIè®¾è®¡å’Œæ›´æµç•…çš„ç¼–ç¨‹ä½“éªŒã€‚</p>
<h4 data-id="heading-47"><strong>2. è§’è‰²å’Œæ‰©å±•æ¥å£ (Roles and Extensions)</strong></h4>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´æ·±å…¥çš„æ‰©å±•æ€§ææ¡ˆï¼Œå¯èƒ½å…è®¸æ¥å£æœ‰é»˜è®¤å®ç°ã€ä¸ºç°æœ‰ç±»å‹æ·»åŠ æ¥å£å®ç°ç­‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼ˆå‡è®¾è¯­æ³•ï¼‰</span>
<span class="hljs-comment">// ä¸ºç°æœ‰ç±»å‹æ·»åŠ æ¥å£å®ç°</span>
<span class="hljs-keyword">public</span> extension role MyList&lt;T&gt; : IReadOnlyList&lt;T&gt; <span class="hljs-keyword">for</span> List&lt;T&gt; {
    <span class="hljs-comment">// å®ç°æ¥å£æˆå‘˜</span>
}

<span class="hljs-comment">// æ¥å£ä¸­çš„é»˜è®¤å®ç°å¢å¼º</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IRepository</span>&lt;<span class="hljs-title">T</span>&gt; {
    <span class="hljs-function">T <span class="hljs-title">GetById</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span> =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹å†™æ³•ï¼šéœ€è¦ä½¿ç”¨é€‚é…å™¨æ¨¡å¼åŒ…è£…ç°æœ‰ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyListAdapter</span>&lt;<span class="hljs-title">T</span>&gt; : <span class="hljs-title">IReadOnlyList</span>&lt;<span class="hljs-title">T</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> List&lt;T&gt; _inner;
    <span class="hljs-comment">// åŒ…è£…æ‰€æœ‰List&lt;T&gt;çš„æ–¹æ³•å’ŒIReadOnlyList&lt;T&gt;çš„å®ç°</span>
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿™ä¸€ç‰¹æ€§æ—¨åœ¨è§£å†³C#ä¸­é•¿æœŸå­˜åœ¨çš„"è„†å¼±åŸºç±»"é—®é¢˜ï¼Œå¹¶å…è®¸æ›´çµæ´»çš„ä»£ç å¤ç”¨å’ŒAPIè®¾è®¡ã€‚</p>
<h4 data-id="heading-48"><strong>3. å‚æ•°ç©ºå€¼æ£€æŸ¥çš„è¿›ä¸€æ­¥ç®€åŒ–</strong></h4>
<p>è¯­æ³•ç³–å†™æ³•å¯èƒ½æä¾›æ›´ç®€æ´çš„æ–¹å¼æ¥è¿›è¡Œå‚æ•°ç©ºå€¼æ£€æŸ¥ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯­æ³•ç³–å†™æ³•ï¼ˆå‡è®¾è¯­æ³•ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessUser</span>(<span class="hljs-params">User! user</span>)</span> { <span class="hljs-comment">// !è¡¨ç¤ºå‚æ•°ä¸å¯ä¸ºnull</span>
    <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥ç©ºå€¼æ£€æŸ¥</span>
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å½“å‰å†™æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessUser</span>(<span class="hljs-params">User user</span>)</span> {
    ArgumentNullException.ThrowIfNull(user);
    <span class="hljs-comment">// æˆ–è€…</span>
    <span class="hljs-keyword">if</span> (user <span class="hljs-keyword">is</span> <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(user));
    }
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¿™ä¸€ç‰¹æ€§å°†è¿›ä¸€æ­¥ç®€åŒ–ç©ºå€¼æ£€æŸ¥çš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯ç»“åˆå¯ç©ºå¼•ç”¨ç±»å‹ç‰¹æ€§ï¼Œä½¿ç©ºå®‰å…¨ä»£ç æ›´åŠ ç®€æ´ã€‚</p>
<h3 data-id="heading-49"><strong>è¯­æ³•ç³–ä½¿ç”¨çš„æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</strong></h3>
<p>é€šè¿‡äº†è§£è¿™ä¹ˆå¤šè¯­æ³•ç³–ï¼Œä»¥ä¸‹å‡ ç‚¹æœ€ä½³å®è·µå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°è¿ç”¨å®ƒä»¬ï¼š</p>
<ol>
<li>
<p><strong>æ¸è¿›å¼é‡‡ç”¨</strong>ï¼šä¸éœ€è¦ä¸€æ¬¡æ€§æŒæ¡æ‰€æœ‰ç‰¹æ€§ã€‚å¯ä»¥ä»æœ€å¸¸ç”¨ã€å¯¹ä»£ç è´¨é‡æå‡æœ€æ˜æ˜¾çš„ç‰¹æ€§å¼€å§‹ï¼ˆå¦‚ç©ºæ¡ä»¶è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²æ’å€¼ã€è®°å½•ç±»å‹ï¼‰ï¼Œé€æ­¥åº”ç”¨åˆ°é¡¹ç›®ä¸­ã€‚</p>
</li>
<li>
<p><strong>ä¿æŒä»£ç å¯è¯»æ€§</strong>ï¼šè¯­æ³•ç³–çš„ç›®çš„æ˜¯è®©ä»£ç æ›´ç®€æ´ï¼Œä½†è¿‡åº¦ä½¿ç”¨æˆ–åµŒå¥—å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€‚ä¾‹å¦‚ï¼Œåº”è°¨æ…ä½¿ç”¨æ·±å±‚åµŒå¥—çš„?.é“¾æˆ–è¿‡äºå¤æ‚çš„æ¨¡å¼åŒ¹é…è¡¨è¾¾å¼ã€‚</p>
</li>
<li>
<p><strong>äº†è§£ç¼–è¯‘åçš„æœ¬è´¨</strong>ï¼šäº†è§£è¯­æ³•ç³–èƒŒåçš„ç¼–è¯‘æœºåˆ¶æœ‰åŠ©äºä½ ç†è§£å…¶æ€§èƒ½ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œè®°å½•ç±»å‹ï¼ˆrecordï¼‰è™½ç„¶è¯­æ³•ç®€æ´ï¼Œä½†å®ƒç”Ÿæˆçš„ä»£ç å¹¶ä¸ç®€å•ï¼Œç¼–è¯‘å™¨ä¸ºå…¶ç”Ÿæˆäº†å¤§é‡æ ·æ¿ä»£ç ã€‚</p>
</li>
<li>
<p><strong>å›¢é˜Ÿä¸€è‡´æ€§</strong>ï¼šåœ¨å›¢é˜Ÿé¡¹ç›®ä¸­ï¼Œåº”ä¸å›¢é˜Ÿæˆå‘˜åå•†ç¡®å®šå“ªäº›è¯­æ³•ç³–å¯ä»¥å¹¿æ³›ä½¿ç”¨ï¼Œå“ªäº›éœ€è¦é™åˆ¶ä½¿ç”¨ï¼Œä»¥ä¿æŒä»£ç åº“çš„ä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p><strong>è€ƒè™‘å‘åå…¼å®¹æ€§</strong>ï¼šå¦‚æœä½ çš„é¡¹ç›®éœ€è¦æ”¯æŒæ—§ç‰ˆæœ¬çš„.NET Frameworkæˆ–æ—§ç‰ˆç¼–è¯‘å™¨ï¼Œéœ€è¦æ³¨æ„æŸäº›è¯­æ³•ç³–å¯èƒ½ä¸å¯ç”¨ã€‚C# 9.0+çš„è®¸å¤šç‰¹æ€§éœ€è¦.NET 5+è¿è¡Œæ—¶æ”¯æŒã€‚</p>
</li>
<li>
<p><strong>å–„ç”¨IDEæ”¯æŒ</strong>ï¼šç°ä»£IDEï¼ˆå¦‚Visual Studioã€Riderã€VS Code with C#æ’ä»¶ï¼‰å¯¹C#è¯­æ³•ç³–æœ‰å¾ˆå¥½çš„æ”¯æŒï¼ŒåŒ…æ‹¬ä»£ç è½¬æ¢å»ºè®®ã€è¯­æ³•é«˜äº®å’Œé‡æ„å·¥å…·ï¼Œè¿™æœ‰åŠ©äºå­¦ä¹ å’Œåº”ç”¨è¿™äº›ç‰¹æ€§ã€‚</p>
</li>
<li>
<p><strong>é¿å…"ç‚«æŠ€"ç¼–ç </strong>ï¼šè¯­æ³•ç³–æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç›®çš„ã€‚ä½¿ç”¨è¯­æ³•ç³–åº”è¯¥ä»¥æå‡ä»£ç æ¸…æ™°åº¦ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ä¸ºç›®æ ‡ï¼Œè€Œä¸æ˜¯ä¸ºäº†å±•ç¤ºæŠ€æœ¯èƒ½åŠ›ã€‚</p>
</li>
</ol>
<h3 data-id="heading-50"><strong>æ€»ç»“</strong></h3>
<p>ä»C# 2.0åˆ°æœªæ¥çš„13.0ï¼ŒC#è¯­è¨€æ­£åœ¨æœç€æ›´å£°æ˜å¼ã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„æ–¹å‘å‘å±•ã€‚è¯­æ³•ç³–ä¸ä»…ä»…æ˜¯è®©ä»£ç "å˜ç”œ"çš„è¡¨é¢ä¿®é¥°ï¼Œå®ƒä»¬åæ˜ äº†è¯­è¨€è®¾è®¡è€…å¯¹å¼€å‘è€…ç—›ç‚¹çš„æ·±åˆ»ç†è§£å’Œè§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šè®°å½•ç±»å‹ã€ä¸»æ„é€ å‡½æ•°ã€usingå£°æ˜ç­‰ç‰¹æ€§å¤§å¹…å‡å°‘äº†ä¸å¾—ä¸å†™çš„æ¨¡æ¿ä»£ç ã€‚</li>
<li><strong>æå‡ä»£ç å®‰å…¨æ€§</strong>ï¼šå¯ç©ºå¼•ç”¨ç±»å‹ã€æ¨¡å¼åŒ¹é…ç­‰ç‰¹æ€§åœ¨ç¼–è¯‘æœŸæ•è·æ›´å¤šæ½œåœ¨é”™è¯¯ã€‚</li>
<li><strong>æ”¹å–„è¡¨è¾¾åŠ›</strong>ï¼šLambdaè¡¨è¾¾å¼ã€æ‰©å±•æ–¹æ³•ã€é›†åˆè¡¨è¾¾å¼ç­‰è®©ä»£ç æ„å›¾æ›´åŠ æ¸…æ™°ã€‚</li>
<li><strong>æ‹¥æŠ±æ–°èŒƒå¼</strong>ï¼šasync/awaitã€å¼‚æ­¥æµç­‰ç‰¹æ€§è®©å¼‚æ­¥ç¼–ç¨‹å’Œæµå¤„ç†æ›´åŠ è‡ªç„¶ã€‚</li>
</ul>
<p>ç†è§£è¿™äº›è¯­æ³•ç³–ä¸ä»…è®©ä½ èƒ½è¯»æ‡‚åˆ«äººçš„ç°ä»£C#ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè®©ä½ èƒ½å¤Ÿä»¥æ›´é«˜æ•ˆã€æ›´å®‰å…¨çš„æ–¹å¼è¡¨è¾¾è‡ªå·±çš„ç¼–ç¨‹æ€æƒ³ã€‚éšç€C#è¯­è¨€çš„æŒç»­è¿›åŒ–ï¼ŒæŒæ¡è¿™äº›ç‰¹æ€§å°†æˆä¸ºæ¯ä¸€ä½C#å¼€å‘è€…çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</p>
<p>è®°ä½ï¼Œæœ€å¥½çš„ä»£ç ä¸æ˜¯ä½¿ç”¨äº†æœ€å¤šè¯­æ³•ç³–çš„ä»£ç ï¼Œè€Œæ˜¯æœ€æ¸…æ™°åœ°è¡¨è¾¾äº†ç¨‹åºè®¾è®¡æ„å›¾çš„ä»£ç ã€‚è¯­æ³•ç³–æ˜¯è¾¾æˆè¿™ä¸€ç›®æ ‡çš„å¼ºå¤§å·¥å…·ï¼Œä½†å§‹ç»ˆè¦ä¸ºä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++11åˆ°C++23è¯­æ³•ç³–ä¸‡å­—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7579961957194072114</link>    <guid>https://juejin.cn/post/7579961957194072114</guid>    <pubDate>2025-12-04T12:54:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579961957194072114" data-draft-id="7579832186880262194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++11åˆ°C++23è¯­æ³•ç³–ä¸‡å­—è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T12:54:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++11åˆ°C++23è¯­æ³•ç³–ä¸‡å­—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T12:54:49.000Z" title="Thu Dec 04 2025 12:54:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ æ˜¯å¦æ›¾é¢å¯¹åŒäº‹çš„ç°ä»£C++ä»£ç ï¼Œçœ‹åˆ°æ»¡å±çš„<code>auto</code>ã€å¥‡æ€ªçš„Lambdaè¡¨è¾¾å¼<code>[](){}</code>ã€çœ‹ä¸æ‡‚çš„<code>std::move</code>è€Œæ„Ÿåˆ°å›°æƒ‘ï¼Ÿæˆ–è€…è§‰å¾—ç°ä»£C++ä»£ç çœ‹èµ·æ¥å’Œâ€œä¼ ç»ŸC++â€å®Œå…¨ä¸åŒï¼Œéš¾ä»¥å¿«é€Ÿç†è§£ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™å¾ˆå¯èƒ½åªæ˜¯å› ä¸ºä½ è¿˜ä¸ç†Ÿæ‚‰C++11ä»¥æ¥å¼•å…¥çš„å¤§é‡â€œè¯­æ³•ç³–â€ã€‚</p>
</blockquote>
<p>è¯­æ³•ç³–æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­ä¸ºå¸¸è§æ¨¡å¼æä¾›çš„ç®€æ´è¯­æ³•ï¼Œå®ƒä»¬ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä½†è®©ä»£ç æ›´æ˜“å†™ã€æ˜“è¯»ã€‚ä»C++11å¼€å§‹ï¼ŒC++ç»å†äº†é©å‘½æ€§å˜åŒ–ï¼Œå¼•å…¥äº†å¤§é‡ä½¿ä»£ç æ›´ç®€æ´ã€å®‰å…¨ã€é«˜æ•ˆçš„æ–°ç‰¹æ€§ã€‚æœ¬æ–‡å°†è¯¦ç»†è§£æè¿™äº›è¯­æ³•ç³–ï¼Œå¯¹æ¯”æ–°æ—§å†™æ³•ï¼Œå¸®åŠ©ä½ è½»æ¾æŒæ¡ç°ä»£C++ã€‚</p>
<p>ä¸‹é¢çš„è¡¨æ ¼å±•ç¤ºäº†ç°ä»£C++å„ç‰ˆæœ¬çš„æ ¸å¿ƒè¯­æ³•ç³–ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬ä½•æ—¶å‡ºç°ã€æœ‰ä½•ç”¨é€”ï¼š</p>



































<table><thead><tr><th>C++ç‰ˆæœ¬</th><th>æ ¸å¿ƒè¯­æ³•ç³–ç‰¹æ€§</th><th>ä¸»è¦ç”¨é€”ä¸ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>C++11</strong></td><td>autoç±»å‹æ¨å¯¼ã€èŒƒå›´forå¾ªç¯ã€Lambdaè¡¨è¾¾å¼ã€nullptrã€åˆ—è¡¨åˆå§‹åŒ–ã€usingåˆ«åã€å§”æ‰˜æ„é€ å‡½æ•°</td><td>ç®€åŒ–ç±»å‹å£°æ˜ã€ä¾¿æ·éå†å®¹å™¨ã€åˆ›å»ºåŒ¿åå‡½æ•°ã€å®‰å…¨ç©ºæŒ‡é’ˆã€ç»Ÿä¸€åˆå§‹åŒ–è¯­æ³•</td></tr><tr><td><strong>C++14</strong></td><td>æ³›å‹Lambdaã€autoå‡½æ•°è¿”å›ç±»å‹æ¨å¯¼ã€æ•°å­—å­—é¢é‡åˆ†éš”ç¬¦</td><td>å¢å¼ºLambdaçµæ´»æ€§ã€ç®€åŒ–å‡½æ•°å£°æ˜ã€æé«˜æ•°å­—å¯è¯»æ€§</td></tr><tr><td><strong>C++17</strong></td><td>ç»“æ„åŒ–ç»‘å®šã€if/switchåˆå§‹åŒ–è¯­å¥ã€ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼ã€å†…è”å˜é‡ã€std::string_viewã€<code>if constexpr</code></td><td>ç®€åŒ–å¤šè¿”å›å€¼å¤„ç†ã€é™åˆ¶å˜é‡ä½œç”¨åŸŸã€ç®€åŒ–æ¨¡æ¿ä»£ç ã€é«˜æ•ˆå­—ç¬¦ä¸²è§†å›¾ã€ç¼–è¯‘æœŸæ¡ä»¶åˆ¤æ–­</td></tr><tr><td><strong>C++20</strong></td><td>æ¦‚å¿µ(Concepts)ã€ä¸‰è·¯æ¯”è¾ƒè¿ç®—ç¬¦ã€åç¨‹ã€èŒƒå›´åº“(Ranges)ã€æ¨¡å—(Modules)</td><td>çº¦æŸæ¨¡æ¿ç±»å‹ã€ç®€åŒ–æ¯”è¾ƒè¿ç®—ç¬¦ã€å¼‚æ­¥ç¼–ç¨‹ã€å£°æ˜å¼é›†åˆå¤„ç†ã€æå‡ç¼–è¯‘é€Ÿåº¦</td></tr><tr><td><strong>C++23</strong></td><td><code>if consteval</code>ã€std::expectedã€Lambdaå¢å¼ºã€æ‰©å±•Ranges</td><td>ç¼–è¯‘æ—¶/è¿è¡Œæ—¶åˆ†æ”¯ã€æ”¹è¿›é”™è¯¯å¤„ç†ã€æ›´çµæ´»Lambdaã€å®Œå–„èŒƒå›´æ“ä½œ</td></tr></tbody></table>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†é€ä¸€è®²è§£~</p>
<h3 data-id="heading-0"><strong>C++11ï¼šç°ä»£C++çš„åŸºçŸ³</strong></h3>
<p>C++11æ˜¯C++è¯­è¨€çš„åˆ†æ°´å²­ï¼Œå¼•å…¥äº†å¤§é‡æ”¹å˜ç¼–ç¨‹èŒƒå¼çš„è¯­æ³•ç³–ã€‚</p>
<h4 data-id="heading-1"><strong>1. auto ç±»å‹æ¨å¯¼</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">auto</span> x = <span class="hljs-number">5</span>;            <span class="hljs-comment">// x æ¨å¯¼ä¸º int</span>
<span class="hljs-keyword">auto</span> ptr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">10</span>);  <span class="hljs-comment">// ptr æ¨å¯¼ä¸º std::unique_ptr&lt;int&gt;</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; item : container) { ... }  <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼å®¹å™¨å…ƒç´ ç±»å‹</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;
<span class="hljs-function">std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ptr</span><span class="hljs-params">(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>(<span class="hljs-number">10</span>))</span></span>;
<span class="hljs-keyword">for</span> (std::vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = container.<span class="hljs-built_in">begin</span>(); 
     it != container.<span class="hljs-built_in">end</span>(); ++it) {
    <span class="hljs-type">int</span>&amp; item = *it;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>auto</code>è®©ç¼–è¯‘å™¨æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹</li>
<li>ç‰¹åˆ«é€‚ç”¨äºå¤æ‚çš„æ¨¡æ¿ç±»å‹ï¼ˆå¦‚è¿­ä»£å™¨ã€æ™ºèƒ½æŒ‡é’ˆï¼‰</li>
<li>æ³¨æ„ï¼š<code>auto</code>æ¨å¯¼ä¼šå¿½ç•¥å¼•ç”¨å’Œé¡¶å±‚constï¼Œéœ€è¦ä½¿ç”¨<code>auto&amp;</code>æˆ–<code>const auto&amp;</code>ä¿ç•™</li>
</ul>
<p><strong>ç¼–è¯‘åçš„æœ¬è´¨</strong>ï¼š
ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®Œæˆç±»å‹æ¨å¯¼ï¼Œç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç ä¸æ˜¾å¼å£°æ˜ç±»å‹å®Œå…¨ç›¸åŒï¼Œé›¶è¿è¡Œæ—¶å¼€é”€ã€‚</p>
<h4 data-id="heading-2"><strong>2. èŒƒå›´forå¾ªç¯ (Range-based for loop)</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; vec = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> value : vec) {
    std::cout &lt;&lt; value &lt;&lt; <span class="hljs-string">" "</span>;
}
<span class="hljs-comment">// ä½¿ç”¨autoæ›´ç®€æ´</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; value : vec) {
    std::cout &lt;&lt; value &lt;&lt; <span class="hljs-string">" "</span>;
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; vec = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
<span class="hljs-keyword">for</span> (std::vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = vec.<span class="hljs-built_in">begin</span>(); 
     it != vec.<span class="hljs-built_in">end</span>(); ++it) {
    <span class="hljs-type">int</span> value = *it;
    std::cout &lt;&lt; value &lt;&lt; <span class="hljs-string">" "</span>;
}
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>è¯­æ³•ï¼š<code>for (declaration : range)</code></li>
<li>æ”¯æŒä»»ä½•æä¾›<code>begin()</code>å’Œ<code>end()</code>æ–¹æ³•çš„å®¹å™¨</li>
<li>æ¯”ä¼ ç»Ÿforå¾ªç¯æ›´ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ï¼ˆæ— éœ€æ‰‹åŠ¨ç®¡ç†è¿­ä»£å™¨ï¼‰</li>
</ul>
<p><strong>ç­‰ä»·å±•å¼€</strong>ï¼š
ç¼–è¯‘å™¨å°†èŒƒå›´forå¾ªç¯å±•å¼€ä¸ºåŸºäºè¿­ä»£å™¨çš„ä¼ ç»Ÿå¾ªç¯ã€‚</p>
<h4 data-id="heading-3"><strong>3. Lambda è¡¨è¾¾å¼</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºç¡€Lambda</span>
<span class="hljs-keyword">auto</span> add = [](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) { <span class="hljs-keyword">return</span> a + b; };
<span class="hljs-type">int</span> result = <span class="hljs-built_in">add</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// 7</span>

<span class="hljs-comment">// å¸¦æ•è·åˆ—è¡¨çš„Lambda</span>
<span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;
<span class="hljs-keyword">auto</span> multiplier = [x](<span class="hljs-type">int</span> y) { <span class="hljs-keyword">return</span> x * y; };

<span class="hljs-comment">// åœ¨STLç®—æ³•ä¸­ä½¿ç”¨</span>
std::vector&lt;<span class="hljs-type">int</span>&gt; nums = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
std::<span class="hljs-built_in">sort</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>(), 
          [](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) { <span class="hljs-keyword">return</span> a &gt; b; });
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// éœ€è¦å®šä¹‰å‡½æ•°å¯¹è±¡ç±»</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AddFunctor</span> {
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> a + b;
    }
};
AddFunctor add;
<span class="hljs-type">int</span> result = <span class="hljs-built_in">add</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);

<span class="hljs-comment">// å¸¦çŠ¶æ€çš„å‡½æ•°å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiplierFunctor</span> {
    <span class="hljs-type">int</span> factor;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">MultiplierFunctor</span>(<span class="hljs-type">int</span> f) : <span class="hljs-built_in">factor</span>(f) {}
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> factor * y;
    }
};
<span class="hljs-function">MultiplierFunctor <span class="hljs-title">multiplier</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>Lambdaè¡¨è¾¾å¼æ„æˆï¼š<code>[capture](parameters) -&gt; return_type { body }</code></li>
<li>æ•è·åˆ—è¡¨<code>[capture]</code>ï¼š
<ul>
<li><code>[]</code>ï¼šä¸æ•è·ä»»ä½•å˜é‡</li>
<li><code>[=]</code>ï¼šä»¥å€¼æ•è·æ‰€æœ‰å˜é‡</li>
<li><code>[&amp;]</code>ï¼šä»¥å¼•ç”¨æ•è·æ‰€æœ‰å˜é‡</li>
<li><code>[x, &amp;y]</code>ï¼šæ··åˆæ•è·</li>
</ul>
</li>
<li>è¿”å›ç±»å‹å¯çœç•¥ï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ï¼‰</li>
<li>å¯è½¬æ¢ä¸º<code>std::function</code>æˆ–å‡½æ•°æŒ‡é’ˆ</li>
</ul>
<p><strong>ç¼–è¯‘åçš„æœ¬è´¨</strong>ï¼š
ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªLambdaç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„åŒ¿åç±»ï¼ˆé—­åŒ…ç±»å‹ï¼‰ï¼Œæ•è·çš„å˜é‡æˆä¸ºè¯¥ç±»çš„æˆå‘˜ã€‚</p>
<h4 data-id="heading-4"><strong>4. æ™ºèƒ½æŒ‡é’ˆ (Smart Pointers)</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// unique_ptrï¼šç‹¬å æ‰€æœ‰æƒ</span>
<span class="hljs-keyword">auto</span> ptr1 = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);

<span class="hljs-comment">// shared_ptrï¼šå…±äº«æ‰€æœ‰æƒ</span>
<span class="hljs-keyword">auto</span> ptr2 = std::<span class="hljs-built_in">make_shared</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);
<span class="hljs-keyword">auto</span> ptr3 = ptr2; <span class="hljs-comment">// å¼•ç”¨è®¡æ•°+1</span>

<span class="hljs-comment">// weak_ptrï¼šè§‚å¯Ÿshared_pträ½†ä¸å¢åŠ è®¡æ•°</span>
std::weak_ptr&lt;<span class="hljs-type">int</span>&gt; weak = ptr2;
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ‰‹åŠ¨å†…å­˜ç®¡ç†</span>
<span class="hljs-type">int</span>* raw_ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">42</span>);
<span class="hljs-comment">// ... ä½¿ç”¨</span>
<span class="hljs-keyword">delete</span> raw_ptr; <span class="hljs-comment">// å®¹æ˜“å¿˜è®°å¯¼è‡´å†…å­˜æ³„æ¼</span>

<span class="hljs-comment">// å¼•ç”¨è®¡æ•°æ‰‹åŠ¨å®ç°ï¼ˆå¤æ‚ä¸”æ˜“é”™ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RefCountedInt</span> {
    <span class="hljs-type">int</span>* data;
    <span class="hljs-type">int</span>* ref_count;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">RefCountedInt</span>(<span class="hljs-type">int</span> value) : <span class="hljs-built_in">data</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(value)), 
                               <span class="hljs-built_in">ref_count</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)) {}
    <span class="hljs-comment">// éœ€è¦å®ç°æ‹·è´æ„é€ ã€èµ‹å€¼ã€ææ„ç­‰ç®¡ç†å¼•ç”¨è®¡æ•°</span>
    <span class="hljs-comment">// çº¦50è¡Œä»£ç ...</span>
};
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>std::unique_ptr</code>ï¼šç‹¬å æ‰€æœ‰æƒï¼Œä¸å¯æ‹·è´ï¼Œå¯ç§»åŠ¨</li>
<li><code>std::shared_ptr</code>ï¼šå…±äº«æ‰€æœ‰æƒï¼Œä½¿ç”¨å¼•ç”¨è®¡æ•°</li>
<li><code>std::weak_ptr</code>ï¼šè§£å†³shared_ptrå¾ªç¯å¼•ç”¨é—®é¢˜</li>
<li>ä¼˜å…ˆä½¿ç”¨<code>make_unique</code>å’Œ<code>make_shared</code>ï¼ˆæ›´é«˜æ•ˆã€å¼‚å¸¸å®‰å…¨ï¼‰</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š
è‡ªåŠ¨ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼ã€åŒé‡é‡Šæ”¾ç­‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-5"><strong>5. å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVector</span> {
    <span class="hljs-type">int</span>* data;
    <span class="hljs-type">size_t</span> size;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç§»åŠ¨æ„é€ å‡½æ•°</span>
    <span class="hljs-built_in">MyVector</span>(MyVector&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">data</span>(other.data), <span class="hljs-built_in">size</span>(other.size) {
        other.data = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// è½¬ç§»æ‰€æœ‰æƒ</span>
        other.size = <span class="hljs-number">0</span>;
    }
    
    <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</span>
    MyVector&amp; <span class="hljs-keyword">operator</span>=(MyVector&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-keyword">delete</span>[] data;
            data = other.data;
            size = other.size;
            other.data = <span class="hljs-literal">nullptr</span>;
            other.size = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰</span>
<span class="hljs-function">MyVector <span class="hljs-title">createVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">MyVector <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;
    <span class="hljs-comment">// ... å¡«å……æ•°æ®</span>
    <span class="hljs-keyword">return</span> v; <span class="hljs-comment">// è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œæ— æ‹·è´å¼€é”€</span>
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ²¡æœ‰ç§»åŠ¨è¯­ä¹‰æ—¶ï¼Œåªèƒ½æ·±åº¦æ‹·è´</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVector</span> {
    <span class="hljs-comment">// ... æˆå‘˜åŒä¸Š</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ€§èƒ½å¼€é”€å¤§ï¼‰</span>
    <span class="hljs-built_in">MyVector</span>(<span class="hljs-type">const</span> MyVector&amp; other) 
        : <span class="hljs-built_in">data</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[other.size]), <span class="hljs-built_in">size</span>(other.size) {
        std::<span class="hljs-built_in">copy</span>(other.data, other.data + size, data);
    }
};

<span class="hljs-function">MyVector <span class="hljs-title">createVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">MyVector <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1000</span>)</span></span>;
    <span class="hljs-comment">// ... å¡«å……æ•°æ®</span>
    <span class="hljs-keyword">return</span> v; <span class="hljs-comment">// è°ƒç”¨æ‹·è´æ„é€ ï¼Œéœ€è¦å¤åˆ¶æ‰€æœ‰æ•°æ®</span>
}
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>å³å€¼å¼•ç”¨ï¼š<code>T&amp;&amp;</code>ï¼Œå¯ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰</li>
<li><code>std::move</code>ï¼šå°†å·¦å€¼è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œå…è®¸ç§»åŠ¨</li>
<li>ç§»åŠ¨è¯­ä¹‰é¿å…ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶ï¼Œæå‡æ€§èƒ½</li>
<li><code>noexcept</code>ï¼šå‘ç¼–è¯‘å™¨ä¿è¯ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç§»åŠ¨æ›´é«˜æ•ˆ</li>
</ul>
<p><strong>å®é™…åº”ç”¨</strong>ï¼š</p>
<ul>
<li>å®¹å™¨é‡æ–°åˆ†é…å†…å­˜æ—¶ç§»åŠ¨å…ƒç´ è€Œéæ‹·è´</li>
<li>å·¥å‚å‡½æ•°è¿”å›å¤§å¯¹è±¡</li>
<li>å®ç°åªç§»ç±»å‹ï¼ˆå¦‚<code>unique_ptr</code>ï¼‰</li>
</ul>
<h3 data-id="heading-6"><strong>C++14ï¼šC++11çš„å®Œå–„ä¸å¢å¼º</strong></h3>
<p>C++14åœ¨C++11åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–å’Œè¡¥å……ï¼Œè®©è¯­æ³•ç³–æ›´ç”œã€‚</p>
<h4 data-id="heading-7"><strong>1. æ³›å‹Lambda (Generic Lambdas)</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨autoå‚æ•°</span>
<span class="hljs-keyword">auto</span> print = [](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; arg) {
    std::cout &lt;&lt; arg &lt;&lt; std::endl;
};

<span class="hljs-built_in">print</span>(<span class="hljs-number">42</span>);        <span class="hljs-comment">// int</span>
<span class="hljs-built_in">print</span>(<span class="hljs-number">3.14</span>);      <span class="hljs-comment">// double</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>);   <span class="hljs-comment">// const char*</span>

<span class="hljs-comment">// å¤šä¸ªautoå‚æ•°</span>
<span class="hljs-keyword">auto</span> add = [](<span class="hljs-keyword">auto</span> a, <span class="hljs-keyword">auto</span> b) {
    <span class="hljs-keyword">return</span> a + b;  <span class="hljs-comment">// ç±»å‹ç”±ç¼–è¯‘å™¨æ¨å¯¼</span>
};
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// éœ€è¦ä¸ºä¸åŒç±»å‹å®šä¹‰å¤šä¸ªLambdaæˆ–ä½¿ç”¨æ¨¡æ¿</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-type">void</span> <span class="hljs-title">print_template</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; arg)</span> </span>{
    std::cout &lt;&lt; arg &lt;&lt; std::endl;
}

<span class="hljs-comment">// æˆ–è€…å®šä¹‰æ¨¡æ¿å‡½æ•°å¯¹è±¡</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">GenericPrint</span> {
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; arg)</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; arg &lt;&lt; std::endl;
    }
};
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>Lambdaå‚æ•°ä½¿ç”¨<code>auto</code>ï¼Œå®é™…æ˜¯æ¨¡æ¿å‚æ•°</li>
<li>ç¼–è¯‘å™¨ä¸ºæ¯ç§è°ƒç”¨ç±»å‹å®ä¾‹åŒ–ä¸€ä¸ªç‰ˆæœ¬</li>
<li>ä½¿Lambdaæ›´åŠ çµæ´»ï¼Œå¯ç”¨äºé€šç”¨ç®—æ³•</li>
</ul>
<h4 data-id="heading-8"><strong>2. å‡½æ•°è¿”å›ç±»å‹æ¨å¯¼</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    <span class="hljs-keyword">return</span> a + b;  <span class="hljs-comment">// æ¨å¯¼ä¸ºint</span>
}

<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">createVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> std::vector&lt;<span class="hljs-type">int</span>&gt;{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};  <span class="hljs-comment">// æ¨å¯¼ä¸ºstd::vector&lt;int&gt;</span>
}

<span class="hljs-comment">// æ”¯æŒå¤šè¿”å›è¯­å¥ï¼Œä½†ç±»å‹å¿…é¡»ä¸€è‡´</span>
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">max</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    <span class="hljs-keyword">if</span> (a &gt; b) <span class="hljs-keyword">return</span> a;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> b;  <span class="hljs-comment">// ä¸¤ä¸ªreturnéƒ½è¿”å›int</span>
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¿…é¡»æ˜¾å¼å£°æ˜è¿”å›ç±»å‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">createVector</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> std::vector&lt;<span class="hljs-type">int</span>&gt;{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
}
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨æ ¹æ®å‡½æ•°ä½“ä¸­çš„returnè¯­å¥æ¨å¯¼è¿”å›ç±»å‹</li>
<li>æ‰€æœ‰returnè¯­å¥å¿…é¡»è¿”å›ç›¸åŒç±»å‹</li>
<li>é€’å½’å‡½æ•°ä»éœ€æ˜¾å¼å£°æ˜è¿”å›ç±»å‹</li>
</ul>
<h4 data-id="heading-9"><strong>3. å˜é‡æ¨¡æ¿ (Variable Templates)</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">constexpr</span> T pi = <span class="hljs-built_in">T</span>(<span class="hljs-number">3.1415926535897932385</span>);

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">float</span> area_f = pi&lt;<span class="hljs-type">float</span>&gt; * r * r;
<span class="hljs-type">double</span> area_d = pi&lt;<span class="hljs-type">double</span>&gt; * r * r;
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨æ¨¡æ¿å‡½æ•°æˆ–é™æ€æˆå‘˜</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
T <span class="hljs-title">get_pi</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">T</span>(<span class="hljs-number">3.1415926535897932385</span>); }

<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">PiConstant</span> {
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> T value = <span class="hljs-built_in">T</span>(<span class="hljs-number">3.1415926535897932385</span>);
};

<span class="hljs-type">float</span> area_f = PiConstant&lt;<span class="hljs-type">float</span>&gt;::value * r * r;
</code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li>å…è®¸æ¨¡æ¿åŒ–å˜é‡ï¼Œç±»ä¼¼äºæ¨¡æ¿å‡½æ•°</li>
<li>ä¸»è¦ç”¨äºæ•°å­¦å¸¸æ•°ã€é…ç½®å‚æ•°ç­‰</li>
<li><code>constexpr</code>ç¡®ä¿ç¼–è¯‘æ—¶å¸¸é‡</li>
</ul>
<h3 data-id="heading-10"><strong>å¯¹æ¯”æ€»ç»“ï¼šC++11/14å¸¦æ¥çš„æ”¹å˜</strong></h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºC++11/14è¯­æ³•ç³–çš„å¨åŠ›ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š</p>
<p><strong>C++98/03é£æ ¼</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
    std::vector&lt;<span class="hljs-type">double</span>&gt;* data;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">DataProcessor</span>(<span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">double</span>&gt;&amp; input) {
        data = <span class="hljs-keyword">new</span> std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">double</span>&gt;(input); <span class="hljs-comment">// æ‰‹åŠ¨å†…å­˜ç®¡ç†</span>
    }
    
    ~<span class="hljs-built_in">DataProcessor</span>() {
        <span class="hljs-keyword">delete</span> data; <span class="hljs-comment">// å¿…é¡»è®°å¾—é‡Šæ”¾</span>
    }
    
    <span class="hljs-built_in">DataProcessor</span>(<span class="hljs-type">const</span> DataProcessor&amp; other) {
        data = <span class="hljs-keyword">new</span> std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">double</span>&gt;(*other.data); <span class="hljs-comment">// æ·±æ‹·è´</span>
    }
    
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">double</span>&gt; <span class="hljs-title">process</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::vector&lt;<span class="hljs-type">double</span>&gt; result;
        <span class="hljs-keyword">for</span> (std::vector&lt;<span class="hljs-type">double</span>&gt;::const_iterator it = data-&gt;<span class="hljs-built_in">begin</span>();
             it != data-&gt;<span class="hljs-built_in">end</span>(); ++it) {
            result.<span class="hljs-built_in">push_back</span>(*it * <span class="hljs-number">2.0</span>);
        }
        std::<span class="hljs-built_in">sort</span>(result.<span class="hljs-built_in">begin</span>(), result.<span class="hljs-built_in">end</span>());
        <span class="hljs-keyword">return</span> result;
    }
};
</code></pre>
<p><strong>C++11/14é£æ ¼</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> {
    std::unique_ptr&lt;std::vector&lt;<span class="hljs-type">double</span>&gt;&gt; data; <span class="hljs-comment">// è‡ªåŠ¨å†…å­˜ç®¡ç†</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">DataProcessor</span>(std::vector&lt;<span class="hljs-type">double</span>&gt; input) 
        : <span class="hljs-built_in">data</span>(std::make_unique&lt;std::vector&lt;<span class="hljs-type">double</span>&gt;&gt;(std::<span class="hljs-built_in">move</span>(input))) {}
    
    <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆç§»åŠ¨æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨å®ç°</span>
    <span class="hljs-built_in">DataProcessor</span>(DataProcessor&amp;&amp;) = <span class="hljs-keyword">default</span>;
    DataProcessor&amp; <span class="hljs-keyword">operator</span>=(DataProcessor&amp;&amp;) = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´ï¼ˆç‹¬å æ‰€æœ‰æƒï¼‰</span>
    <span class="hljs-built_in">DataProcessor</span>(<span class="hljs-type">const</span> DataProcessor&amp;) = <span class="hljs-keyword">delete</span>;
    DataProcessor&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> DataProcessor&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">process</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::vector&lt;<span class="hljs-type">double</span>&gt; result;
        <span class="hljs-comment">// èŒƒå›´forå¾ªç¯</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; value : *data) {
            result.<span class="hljs-built_in">push_back</span>(value * <span class="hljs-number">2.0</span>);
        }
        <span class="hljs-comment">// Lambdaè¡¨è¾¾å¼</span>
        std::<span class="hljs-built_in">sort</span>(result.<span class="hljs-built_in">begin</span>(), result.<span class="hljs-built_in">end</span>(), 
                  [](<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b) { <span class="hljs-keyword">return</span> a &gt; b; });
        <span class="hljs-keyword">return</span> result; <span class="hljs-comment">// è¿”å›å€¼ä¼˜åŒ– + ç§»åŠ¨è¯­ä¹‰</span>
    }
};
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»<strong>C++11/14</strong>çš„åŸºçŸ³ç‰¹æ€§ï¼Œè¿›å…¥åˆ°æ›´åŠ ç°ä»£åŒ–å’ŒåŠŸèƒ½ä¸°å¯Œçš„<strong>C++17ã€20åŠ23</strong>æ—¶ä»£ã€‚å¦‚æœä½ è§‰å¾—åŒäº‹çš„ä»£ç é‡Œå……æ–¥ç€çœ‹ä¸æ‡‚çš„ <code>if</code> åˆå§‹åŒ–ã€ç¥å¥‡çš„ <code>&lt;=&gt;</code> æ“ä½œç¬¦æˆ–é™Œç”Ÿçš„ <code>std::format</code>ï¼Œé‚£ä¹ˆæœ¬æ–‡å°†ä¸ºä½ ä¸€ä¸€â€œè§£å¯†â€ã€‚</p>
<h3 data-id="heading-11"><strong>C++17ï¼šæˆç†Ÿä¸å®ç”¨ä¸»ä¹‰</strong></h3>
<p>C++17å¹¶éé©å‘½æ€§ç‰ˆæœ¬ï¼Œä½†æä¾›äº†å¤§é‡æå‡ä»£ç ç®€æ´æ€§ã€å®‰å…¨æ€§å’Œæ€§èƒ½çš„â€œå®ç”¨å·¥å…·â€ã€‚</p>
<h4 data-id="heading-12"><strong>1. ç»“æ„åŒ–ç»‘å®š</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šç›´æ¥å°†<code>tuple</code>ã€<code>pair</code>ã€æ•°ç»„æˆ–ç»“æ„ä½“çš„æˆå‘˜è§£åŒ…åˆ°å˜é‡ä¸­ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è§£æ„pair (å¦‚éå†map)</span>
std::map&lt;<span class="hljs-type">int</span>, std::string&gt; m = {{<span class="hljs-number">1</span>, <span class="hljs-string">"one"</span>}, {<span class="hljs-number">2</span>, <span class="hljs-string">"two"</span>}};
<span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [key, value] : m) { <span class="hljs-comment">// ç›´æ¥ç»‘å®škeyå’Œvalue</span>
    std::cout &lt;&lt; key &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; value &lt;&lt; std::endl;
}

<span class="hljs-comment">// è§£æ„tuple</span>
<span class="hljs-keyword">auto</span> [name, id, score] = std::<span class="hljs-built_in">make_tuple</span>(<span class="hljs-string">"Alice"</span>s, <span class="hljs-number">101</span>, <span class="hljs-number">95.5</span>);

<span class="hljs-comment">// è§£æ„æ•°ç»„</span>
<span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>] = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
<span class="hljs-keyword">auto</span> [a, b, c] = arr;
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦æ‰‹åŠ¨è®¿é—®<code>first</code>/<code>second</code>æˆ–<code>std::get</code>ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// éå†map</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; item : m) {
    <span class="hljs-type">int</span> key = item.first;
    std::string value = item.second;
    <span class="hljs-comment">// ... ä½¿ç”¨</span>
}
<span class="hljs-comment">// ä½¿ç”¨tuple</span>
<span class="hljs-keyword">auto</span> t = std::<span class="hljs-built_in">make_tuple</span>(<span class="hljs-string">"Alice"</span>s, <span class="hljs-number">101</span>, <span class="hljs-number">95.5</span>);
std::string name = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">0</span>&gt;(t);
<span class="hljs-type">int</span> id = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">1</span>&gt;(t);
<span class="hljs-type">double</span> score = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-number">2</span>&gt;(t);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªéšè—çš„åŒ¿åå¯¹è±¡æ¥æŒæœ‰åŸå¯¹è±¡ï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œå¹¶å°†å„ä¸ªç»‘å®šåå­—æ˜ å°„åˆ°è¯¥å¯¹è±¡çš„æˆå‘˜ä¸Šã€‚è¿™æå¤§åœ°ç®€åŒ–äº†å¤šè¿”å›å€¼å¤„ç†å’Œå®¹å™¨éå†ã€‚</p>
<h4 data-id="heading-13"><strong>2. <code>if</code> / <code>switch</code> åˆå§‹åŒ–è¯­å¥</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šåœ¨æ¡ä»¶åˆ¤æ–­å†…éƒ¨å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ï¼Œé™åˆ¶å…¶ä½œç”¨åŸŸã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// if with initializer</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> it = m.<span class="hljs-built_in">find</span>(key); it != m.<span class="hljs-built_in">end</span>()) { <span class="hljs-comment">// itä»…åœ¨ifå’Œelseå—ä¸­å¯è§</span>
    std::cout &lt;&lt; <span class="hljs-string">"Found: "</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;
} <span class="hljs-keyword">else</span> {
    std::cout &lt;&lt; <span class="hljs-string">"Key not found."</span> &lt;&lt; std::endl;
}
<span class="hljs-comment">// it æ­¤å¤„å·²ä¸å¯ç”¨ï¼Œä½œç”¨åŸŸç»“æŸ</span>

<span class="hljs-comment">// switch with initializer</span>
<span class="hljs-keyword">switch</span> (<span class="hljs-keyword">auto</span> status = <span class="hljs-built_in">GetConnectionStatus</span>(); status) {
    <span class="hljs-keyword">case</span> Status::Connected: <span class="hljs-comment">/* ... */</span> <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> Status::Disconnected: <span class="hljs-comment">/* ... */</span> <span class="hljs-keyword">break</span>;
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šå˜é‡éœ€åœ¨å¤–éƒ¨å£°æ˜ï¼Œä½œç”¨åŸŸæ›´å®½ï¼Œå¯èƒ½å¯¼è‡´è¯¯ç”¨ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å˜é‡æ±¡æŸ“å¤–éƒ¨ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">auto</span> it = m.<span class="hljs-built_in">find</span>(key);
<span class="hljs-keyword">if</span> (it != m.<span class="hljs-built_in">end</span>()) {
    <span class="hljs-comment">// ...</span>
}
<span class="hljs-comment">// it åœ¨æ­¤å¤„ä»ç„¶å¯è§ä¸”å¯èƒ½è¢«è¯¯ç”¨</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šè¯¥è¯­æ³•å°†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸¥æ ¼é™åˆ¶åœ¨æ¡ä»¶è¯­å¥å—å†…ï¼Œæå‡äº†ä»£ç çš„æ¸…æ™°åº¦å’Œå®‰å…¨æ€§ï¼Œå¯¹äºé”ï¼ˆ<code>std::lock_guard</code>ï¼‰ã€è¿­ä»£å™¨ç­‰èµ„æºç®¡ç†å°¤å…¶æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-14"><strong>3. å†…è”å˜é‡</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šåœ¨å¤´æ–‡ä»¶ä¸­ç›´æ¥å®šä¹‰ï¼ˆè€Œéä»…å£°æ˜ï¼‰å…¨å±€å˜é‡ï¼Œé¿å…éœ€è¦å•ç‹¬çš„<code>.cpp</code>æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// my_header.h</span>
<span class="hljs-keyword">inline</span> <span class="hljs-type">const</span> std::string AppName = <span class="hljs-string">"MyModernApp"</span>;
<span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> GlobalCounter = <span class="hljs-number">0</span>;
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨æŸä¸ªæºæ–‡ä»¶ä¸­å•ç‹¬å®šä¹‰ï¼Œå®¹æ˜“å¿˜è®°å¯¼è‡´é“¾æ¥é”™è¯¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// my_header.h</span>
<span class="hljs-keyword">extern</span> <span class="hljs-type">const</span> std::string AppName; <span class="hljs-comment">// å£°æ˜</span>
<span class="hljs-keyword">extern</span> <span class="hljs-type">int</span> GlobalCounter; <span class="hljs-comment">// å£°æ˜</span>

<span class="hljs-comment">// my_source.cpp</span>
<span class="hljs-type">const</span> std::string AppName = <span class="hljs-string">"MyModernApp"</span>; <span class="hljs-comment">// å®šä¹‰</span>
<span class="hljs-type">int</span> GlobalCounter = <span class="hljs-number">0</span>; <span class="hljs-comment">// å®šä¹‰</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>inline</code>å…³é”®å­—å…è®¸å˜é‡åœ¨å¤šä¸ªç¿»è¯‘å•å…ƒä¸­é‡å¤å®šä¹‰ï¼Œé“¾æ¥å™¨ä¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚è¿™ç®€åŒ–äº†å…¨å±€å¸¸é‡å’Œå•ä¾‹æ¨¡å¼çš„å®ç°ã€‚</p>
<h4 data-id="heading-15"><strong>4. ç±»æ¨¡æ¿å‚æ•°æ¨å¯¼</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šæ„é€ æ¨¡æ¿ç±»å¯¹è±¡æ—¶ï¼Œå¯çœç•¥æ¨¡æ¿å‚æ•°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::pair <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">3.14</span>)</span></span>; <span class="hljs-comment">// æ¨å¯¼ä¸º std::pair&lt;int, double&gt;</span>
std::vector v = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}; <span class="hljs-comment">// æ¨å¯¼ä¸º std::vector&lt;int&gt;</span>
std::mutex mtx;
<span class="hljs-function">std::lock_guard <span class="hljs-title">lck</span><span class="hljs-params">(mtx)</span></span>; <span class="hljs-comment">// æ¨å¯¼ä¸º std::lock_guard&lt;std::mutex&gt;</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šå¿…é¡»æ˜¾å¼æŒ‡å®šæ¨¡æ¿å‚æ•°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">double</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">3.14</span>)</span></span>;
std::vector&lt;<span class="hljs-type">int</span>&gt; v = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
<span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lck</span><span class="hljs-params">(mtx)</span></span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šç¼–è¯‘å™¨æ ¹æ®æ„é€ å‡½æ•°çš„å®å‚è‡ªåŠ¨æ¨å¯¼æ¨¡æ¿ç±»å‹ï¼Œè®©ä»£ç æ›´ç®€æ´ï¼Œç±»ä¼¼äºå‡½æ•°æ¨¡æ¿çš„æ¨å¯¼ã€‚</p>
<h4 data-id="heading-16"><strong>5. <code>std::string_view</code></strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šä½¿ç”¨è½»é‡çº§çš„ã€éå æœ‰çš„å­—ç¬¦ä¸²è§†å›¾ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessText</span><span class="hljs-params">(std::string_view sv)</span> </span>{ <span class="hljs-comment">// æ¥å—stringã€charæ•°ç»„ã€å­ä¸²éƒ½æ— éœ€æ‹·è´</span>
    std::cout &lt;&lt; <span class="hljs-string">"Length: "</span> &lt;&lt; sv.<span class="hljs-built_in">length</span>() &lt;&lt; std::endl;
    <span class="hljs-keyword">auto</span> substr = sv.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// åˆ›å»ºæ–°çš„string_viewï¼Œæ— æ‹·è´</span>
}
<span class="hljs-comment">// è°ƒç”¨</span>
std::string str = <span class="hljs-string">"Hello, Modern C++"</span>;
<span class="hljs-built_in">ProcessText</span>(str); <span class="hljs-comment">// OKï¼Œ æ— æ‹·è´</span>
<span class="hljs-built_in">ProcessText</span>(<span class="hljs-string">"C-string"</span>); <span class="hljs-comment">// OKï¼Œ æ— æ‹·è´</span>
<span class="hljs-built_in">ProcessText</span>(str.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// OKï¼Œ é¿å…å­ä¸²çš„ä¸´æ—¶stringå¯¹è±¡</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šä½¿ç”¨<code>const std::string&amp;</code>å¯èƒ½å¼•å‘ä¸´æ—¶å¯¹è±¡çš„æ„é€ ï¼›ä½¿ç”¨<code>const char*</code>åˆ™ä¸¢å¤±é•¿åº¦ä¿¡æ¯ï¼Œæ“ä½œä¸ä¾¿ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessText</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; str)</span> </span>{
    <span class="hljs-comment">// å¦‚æœä¼ å…¥å­—é¢å€¼"C-string"ï¼Œä¼šæ„é€ ä¸€ä¸ªä¸´æ—¶std::stringå¯¹è±¡</span>
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessText</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* cstr)</span> </span>{
    <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è®¡ç®—é•¿åº¦ï¼Œæ“ä½œå­ä¸²å›°éš¾</span>
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>std::string_view</code>åŒ…å«ä¸€ä¸ªæŒ‡é’ˆå’Œé•¿åº¦ï¼Œåƒä¸€ä¸ªåªè¯»çš„â€œçª—å£â€ï¼Œè§‚å¯Ÿä½†ä¸æ‹¥æœ‰å­—ç¬¦ä¸²æ•°æ®ï¼Œæ€§èƒ½ä¼˜åŠ¿åœ¨å¤„ç†å­ä¸²å’Œå­—ç¬¦ä¸²å­—é¢é‡æ—¶éå¸¸æ˜æ˜¾ã€‚</p>
<h4 data-id="heading-17"><strong>6. <code>std::optional</code></strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šæ˜ç¡®è¡¨ç¤ºä¸€ä¸ªâ€œå¯èƒ½å­˜åœ¨â€çš„å€¼ï¼Œæ›¿ä»£ç”¨ç‰¹æ®Šå€¼ï¼ˆå¦‚-1ã€<code>nullptr</code>ï¼‰è¡¨ç¤ºç©ºçŠ¶æ€çš„æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::optional&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">FindNumber</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* æ‰¾åˆ° */</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;
    <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>; <span class="hljs-comment">// æ˜ç¡®è¡¨ç¤ºâ€œç©ºâ€</span>
}
<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">auto</span> num = <span class="hljs-built_in">FindNumber</span>(<span class="hljs-string">"answer"</span>);
<span class="hljs-keyword">if</span> (num) { <span class="hljs-comment">// ä¸Šä¸‹æ–‡è½¬æ¢åˆ°bool</span>
    std::cout &lt;&lt; <span class="hljs-string">"Found: "</span> &lt;&lt; *num &lt;&lt; std::endl; <span class="hljs-comment">// è§£å¼•ç”¨è·å–å€¼</span>
    std::cout &lt;&lt; <span class="hljs-string">"Found: "</span> &lt;&lt; num.<span class="hljs-built_in">value</span>() &lt;&lt; std::endl; <span class="hljs-comment">// æˆ–ä½¿ç”¨value()</span>
}
std::cout &lt;&lt; <span class="hljs-string">"Not Found, default: "</span> &lt;&lt; num.<span class="hljs-built_in">value_or</span>(<span class="hljs-number">0</span>) &lt;&lt; std::endl; <span class="hljs-comment">// æä¾›é»˜è®¤å€¼</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦ç‰¹å®šå“¨å…µå€¼æˆ–é¢å¤–çš„boolå˜é‡ï¼Œå®¹æ˜“å‡ºé”™ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">FindNumber</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name, <span class="hljs-type">bool</span>&amp; found)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* æ‰¾åˆ° */</span>) { found = <span class="hljs-literal">true</span>; <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>; }
    found = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ— æ„ä¹‰çš„å€¼</span>
}
<span class="hljs-comment">// æˆ–è€…</span>
<span class="hljs-function"><span class="hljs-type">int</span>* <span class="hljs-title">FindNumber</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; name)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* æ‰¾åˆ° */</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// æ¨¡ç³Šæ‰€æœ‰æƒ</span>
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>std::optional</code>å°†å€¼å’ŒçŠ¶æ€åŒ…è£…åœ¨ä¸€èµ·ï¼Œç±»å‹å®‰å…¨ï¼Œæ„å›¾æ¸…æ™°ï¼Œæ˜¯å·¥å‚å‡½æ•°ã€å¯èƒ½å¤±è´¥çš„è®¡ç®—çš„ç†æƒ³è¿”å›å€¼ç±»å‹ã€‚</p>
<h3 data-id="heading-18"><strong>C++20ï¼šé‡å¤§å˜é©ä¸æŠ½è±¡æå‡</strong></h3>
<p>C++20æ˜¯ç»§C++11åæœ€å…·å˜é©æ€§çš„ç‰ˆæœ¬ï¼Œå¼•å…¥äº†æ”¹å˜ç¼–ç¨‹èŒƒå¼çš„é‡ç£…ç‰¹æ€§ã€‚</p>
<h4 data-id="heading-19"><strong>1. æ¦‚å¿µ</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šä½¿ç”¨<code>requires</code>æˆ–ç®€å†™è¯­æ³•å¯¹æ¨¡æ¿ç±»å‹å‚æ•°æ–½åŠ çº¦æŸã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªâ€œå¯åŠ â€çš„æ¦‚å¿µ</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">concept</span> Addable = <span class="hljs-built_in">requires</span>(T a, T b) {
    { a + b } -&gt; std::convertible_to&lt;T&gt;;
};

<span class="hljs-comment">// ä½¿ç”¨æ¦‚å¿µçº¦æŸå‡½æ•°æ¨¡æ¿</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;Addable T&gt;
T <span class="hljs-title">Sum</span><span class="hljs-params">(T a, T b)</span> </span>{ <span class="hljs-keyword">return</span> a + b; }

<span class="hljs-comment">// æ›´ç®€æ´çš„ç”¨æ³•ï¼šautoå‚æ•°+æ¦‚å¿µ</span>
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">Increment</span><span class="hljs-params">(std::integral <span class="hljs-keyword">auto</span> x)</span> </span>{ <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>; }
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šä½¿ç”¨å¤æ‚çš„SFINAEæŠ€æœ¯æˆ–é™æ€æ–­è¨€ï¼Œä»£ç å†—é•¿æ™¦æ¶©ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨SFINAE (C++17ä»¥å‰)</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> = std::<span class="hljs-type">void_t</span>&lt;&gt;&gt;
<span class="hljs-keyword">struct</span> is_addable : std::false_type {};
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">is_addable</span>&lt;T, std::<span class="hljs-type">void_t</span>&lt;<span class="hljs-keyword">decltype</span>(std::<span class="hljs-built_in">declval</span>&lt;T&amp;&gt;() + std::<span class="hljs-built_in">declval</span>&lt;T&amp;&gt;())&gt;&gt; : std::true_type {};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> = std::<span class="hljs-type">enable_if_t</span>&lt;is_addable&lt;T&gt;::value&gt;&gt;
T <span class="hljs-built_in">Sum</span>(T a, T b) { <span class="hljs-keyword">return</span> a + b; }
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šæ¦‚å¿µï¼ˆConceptsï¼‰ä¸ºæ¨¡æ¿ç¼–ç¨‹æä¾›äº†è¯­ä¹‰åŒ–çš„çº¦æŸï¼Œ<strong>ä½¿ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯ä»å‡ åé¡µæ¨¡æ¿å±•å¼€å˜å¾—æ¸…æ™°å¯è¯»</strong>ï¼Œå¹¶æå‡äº†é‡è½½è§£æçš„ç²¾åº¦ã€‚</p>
<h4 data-id="heading-20"><strong>2. ä¸‰è·¯æ¯”è¾ƒè¿ç®—ç¬¦</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šåªéœ€å®šä¹‰<code>&lt;=&gt;</code>ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆå…¨éƒ¨6ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x, y;
    <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤çš„æŒ‰æˆå‘˜å­—å…¸åºæ¯”è¾ƒ</span>
    <span class="hljs-keyword">auto</span> <span class="hljs-built_in">operator</span>&lt;=&gt;(<span class="hljs-type">const</span> Point&amp;) <span class="hljs-type">const</span> = <span class="hljs-keyword">default</span>;
};
<span class="hljs-comment">// ç°åœ¨Pointæ”¯æŒ ==, !=, &lt;, &lt;=, &gt;, &gt;=</span>
Point a{<span class="hljs-number">1</span>,<span class="hljs-number">2</span>}, b{<span class="hljs-number">1</span>,<span class="hljs-number">3</span>};
<span class="hljs-type">bool</span> lt = (a &lt; b); <span class="hljs-comment">// trueï¼Œå› ä¸º a.y (2) &lt; b.y (3)</span>
<span class="hljs-type">bool</span> eq = (a == b); <span class="hljs-comment">// false</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦æ‰‹åŠ¨é‡è½½æ¯ä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ¯ç‡¥ä¸”æ˜“å‡ºé”™ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> {
    <span class="hljs-type">int</span> x, y;
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Point&amp; other) <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> x==other.x &amp;&amp; y==other.y;}
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> Point&amp; other) <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);}
    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> Point&amp; other) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">if</span> (x != other.x) <span class="hljs-keyword">return</span> x &lt; other.x;
        <span class="hljs-keyword">return</span> y &lt; other.y;
    }
    <span class="hljs-comment">// ... è¿˜éœ€è¦é‡è½½ &lt;=, &gt;, &gt;=</span>
};
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>operator&lt;=&gt;</code>ï¼ˆé£èˆ¹è¿ç®—ç¬¦/å¤ªç©ºèˆ¹è¿ç®—ç¬¦ï¼‰è¿”å›<code>std::strong_ordering</code>ç­‰ç±»åˆ«ç±»å‹ï¼Œæè¿°å°äºã€ç­‰äºæˆ–å¤§äºçš„å…³ç³»ã€‚ç¼–è¯‘å™¨æ®æ­¤è‡ªåŠ¨åˆæˆå…¶ä»–æ¯”è¾ƒæ“ä½œï¼Œæå¤§ç®€åŒ–äº†è‡ªå®šä¹‰ç±»å‹çš„æ¯”è¾ƒå®šä¹‰ã€‚</p>
<h4 data-id="heading-21"><strong>3. åç¨‹</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šä½¿ç”¨<code>co_await</code>, <code>co_yield</code>, <code>co_return</code>ç¼–å†™ç±»ä¼¼åŒæ­¥ä»£ç çš„å¼‚æ­¥æ“ä½œã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸€ä¸ªç®€å•çš„ç”Ÿæˆå™¨åç¨‹</span>
<span class="hljs-function">std::generator&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">Sequence</span><span class="hljs-params">(<span class="hljs-type">int</span> start, <span class="hljs-type">int</span> step)</span> </span>{
    <span class="hljs-type">int</span> value = start;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">co_yield</span> value; <span class="hljs-comment">// äº§å‡ºå€¼ï¼Œå¹¶æš‚åœ</span>
        value += step;
    }
}
<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : <span class="hljs-built_in">Sequence</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)) {
    <span class="hljs-keyword">if</span> (num &gt; <span class="hljs-number">20</span>) <span class="hljs-keyword">break</span>;
    std::cout &lt;&lt; num &lt;&lt; <span class="hljs-string">' '</span>; <span class="hljs-comment">// è¾“å‡º 0 5 10 15 20</span>
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦æ‰‹åŠ¨å®ç°çŠ¶æ€æœºã€å›è°ƒå‡½æ•°æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Boost.Asioï¼‰ï¼Œä»£ç ç»“æ„å¤æ‚ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿå›è°ƒæˆ–åŸºäºFutureçš„å¼‚æ­¥ä»£ç ï¼Œé€»è¾‘è¢«æ‹†æ•£ï¼Œéš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚</span>
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šåç¨‹æ˜¯<strong>å¯æš‚åœå’Œæ¢å¤çš„å‡½æ•°</strong>ã€‚ç¼–è¯‘å™¨å°†åç¨‹å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«çŠ¶æ€ã€å±€éƒ¨å˜é‡å’Œæ¢å¤ç‚¹çš„å¤æ‚å¯¹è±¡ã€‚å®ƒå½»åº•é©æ–°äº†C++çš„å¼‚æ­¥å’Œæƒ°æ€§ç”Ÿæˆå™¨ç¼–ç¨‹æ¨¡å‹ï¼Œä½†<strong>ç›®å‰æ ‡å‡†åº“åªæä¾›äº†æœ€åŸºç¡€çš„è®¾æ–½</strong>ï¼Œæ›´å¤šåŠŸèƒ½éœ€æ¡†æ¶æ”¯æŒã€‚</p>
<h4 data-id="heading-22"><strong>4. æ ¼å¼åŒ–åº“</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šä½¿ç”¨ç±»å‹å®‰å…¨ã€æ›´ä¼˜é›…çš„<code>std::format</code>æ›¿ä»£<code>printf</code>å’Œæµæ“ä½œã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++20 std::format</span>
std::string msg = std::format(<span class="hljs-string">"Hello, {}! The answer is {:.2f}."</span>, name, <span class="hljs-number">42.123</span>);
std::cout &lt;&lt; std::format(<span class="hljs-string">"{:&gt;10} {:08x}"</span>, <span class="hljs-string">"Label"</span>, <span class="hljs-number">255</span>); <span class="hljs-comment">// å¯¹é½ã€åå…­è¿›åˆ¶æ ¼å¼åŒ–</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Cé£æ ¼printf (ç±»å‹ä¸å®‰å…¨ï¼Œæ˜“å‡ºé”™)</span>
<span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];
<span class="hljs-built_in">sprintf</span>(buffer, <span class="hljs-string">"Hello, %s! The answer is %.2f."</span>, name.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">42.123</span>);

<span class="hljs-comment">// C++ iostreams (å†—é•¿ï¼Œæ ¼å¼åŒ–æ§åˆ¶ä¸ä¾¿)</span>
std::cout &lt;&lt; <span class="hljs-string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">"! The answer is "</span> &lt;&lt; std::fixed &lt;&lt; std::<span class="hljs-built_in">setprecision</span>(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">42.123</span> &lt;&lt; <span class="hljs-string">"."</span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>std::format</code>ç»“åˆäº†<code>printf</code>çš„æ ¼å¼åŒ–è¡¨è¾¾åŠ›å’Œæµæ“ä½œçš„ç±»å‹å®‰å…¨æ€§ï¼Œä½¿ç”¨<code>{}</code>ä½œä¸ºå ä½ç¬¦ï¼Œæ”¯æŒä½ç½®å‚æ•°ã€æ ¼å¼è¯´æ˜ç¬¦ï¼Œæ€§èƒ½é€šå¸¸ä¼˜äºæµæ“ä½œã€‚</p>
<h4 data-id="heading-23"><strong>5. èŒƒå›´åº“</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šæä¾›å£°æ˜å¼çš„ã€å¯é“¾å¼è°ƒç”¨çš„è§†å›¾å’Œç®—æ³•ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ranges&gt;</span></span>
<span class="hljs-keyword">namespace</span> views = std::views;

std::vector&lt;<span class="hljs-type">int</span>&gt; nums = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>};
<span class="hljs-comment">// åˆ›å»ºç®¡é“ï¼šè¿‡æ»¤å¶æ•° -&gt; å¹³æ–¹ -&gt; å–å‰ä¸‰ä¸ª</span>
<span class="hljs-keyword">auto</span> result = nums | views::<span class="hljs-built_in">filter</span>([](<span class="hljs-type">int</span> n){ <span class="hljs-keyword">return</span> n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>; })
                   | views::<span class="hljs-built_in">transform</span>([](<span class="hljs-type">int</span> n){ <span class="hljs-keyword">return</span> n * n; })
                   | views::<span class="hljs-built_in">take</span>(<span class="hljs-number">3</span>);
<span class="hljs-comment">// result æ˜¯ä¸€ä¸ªæƒ°æ€§æ±‚å€¼çš„è§†å›¾</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n : result) { <span class="hljs-comment">// è§¦å‘è®¡ç®—</span>
    std::cout &lt;&lt; n &lt;&lt; <span class="hljs-string">' '</span>; <span class="hljs-comment">// è¾“å‡º 4 16 36</span>
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šä½¿ç”¨ä¼ ç»Ÿçš„STLç®—æ³•ç»„åˆï¼Œéœ€è¦ä¸­é—´å˜é‡ï¼Œä¸”æ„å›¾ä¸å¤Ÿæ¸…æ™°ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; temp;
std::<span class="hljs-built_in">copy_if</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>(), std::<span class="hljs-built_in">back_inserter</span>(temp),
             [](<span class="hljs-type">int</span> n){ <span class="hljs-keyword">return</span> n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>; });
std::<span class="hljs-built_in">transform</span>(temp.<span class="hljs-built_in">begin</span>(), temp.<span class="hljs-built_in">end</span>(), temp.<span class="hljs-built_in">begin</span>(),
               [](<span class="hljs-type">int</span> n){ <span class="hljs-keyword">return</span> n * n; });
<span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">result</span><span class="hljs-params">(temp.begin(), temp.begin() + std::min(<span class="hljs-number">3</span>, (<span class="hljs-type">int</span>)temp.size()))</span></span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šèŒƒå›´åº“å¼•å…¥äº†<strong>è§†å›¾</strong>ï¼ˆæƒ°æ€§æ±‚å€¼ã€ä¸æ‹¥æœ‰æ•°æ®ï¼‰å’Œ<strong>èŒƒå›´ç®—æ³•</strong>ï¼Œé€šè¿‡ç®¡é“è¿ç®—ç¬¦<code>|</code>ç»„åˆï¼Œå½¢æˆç±»ä¼¼å‡½æ•°å¼ç¼–ç¨‹çš„é£æ ¼ï¼Œä»£ç æ›´ç®€æ´ã€è¡¨è¾¾åŠ›æ›´å¼ºã€‚</p>
<h3 data-id="heading-24"><strong>C++23ï¼šæŒç»­ç²¾è¿›</strong></h3>
<p>C++23è¿›ä¸€æ­¥å¡«å……å’Œå®Œå–„äº†ç°ä»£C++çš„ç”Ÿæ€ã€‚</p>
<h4 data-id="heading-25"><strong>1. <code>std::expected</code></strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå¯èƒ½ä¸ºå€¼æˆ–é”™è¯¯çš„é¢„æœŸç»“æœï¼Œæ¯”<code>std::optional</code>æºå¸¦æ›´å¤šé”™è¯¯ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::expected&lt;<span class="hljs-type">int</span>, std::string&gt; <span class="hljs-title">SafeDivide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">unexpected</span>(<span class="hljs-string">"Division by zero"</span>);
    <span class="hljs-keyword">return</span> a / b;
}
<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">SafeDivide</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>);
<span class="hljs-keyword">if</span> (result) {
    std::cout &lt;&lt; <span class="hljs-string">"Result: "</span> &lt;&lt; *result &lt;&lt; std::endl;
} <span class="hljs-keyword">else</span> {
    std::cerr &lt;&lt; <span class="hljs-string">"Error: "</span> &lt;&lt; result.<span class="hljs-built_in">error</span>() &lt;&lt; std::endl;
}
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šéœ€è¦è‡ªå®šä¹‰ç»“æ„ä½“æˆ–ä½¿ç”¨<code>std::variant&lt;std::pair&lt;int, Error&gt;&gt;</code>ç­‰å¤æ‚ç»„åˆã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Result</span> {
    <span class="hljs-type">int</span> value;
    std::string error;
    <span class="hljs-type">bool</span> hasError;
};
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š<code>std::expected&lt;T, E&gt;</code>æ˜¯<strong>Sum Type</strong>ï¼Œè¦ä¹ˆåŒ…å«ä¸€ä¸ªç±»å‹ä¸º<code>T</code>çš„å€¼ï¼Œè¦ä¹ˆåŒ…å«ä¸€ä¸ªç±»å‹ä¸º<code>E</code>çš„é”™è¯¯ã€‚å®ƒä¸ºå‡½æ•°æä¾›äº†æ¯”å¼‚å¸¸æ›´è½»é‡ã€æ¯”é”™è¯¯ç æ›´ç»“æ„åŒ–çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
<h4 data-id="heading-26"><strong>2. å¤šç»´ä¸‹æ ‡æ“ä½œç¬¦</strong></h4>
<p><strong>è¯­æ³•ç³–å†™æ³•</strong>ï¼šé‡è½½æ¥å—ä»»æ„æ•°é‡å‚æ•°çš„<code>operator[]</code>ï¼Œç”¨äºå¤šç»´è®¿é—®ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Matrix</span> {
    std::vector&lt;<span class="hljs-type">double</span>&gt; data;
    <span class="hljs-type">size_t</span> rows, cols;
<span class="hljs-keyword">public</span>:
    <span class="hljs-type">double</span>&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> i, <span class="hljs-type">size_t</span> j) { <span class="hljs-comment">// C++23 å¤šç»´ä¸‹æ ‡</span>
        <span class="hljs-keyword">return</span> data[i * cols + j];
    }
};
<span class="hljs-function">Matrix <span class="hljs-title">mat</span><span class="hljs-params">(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)</span></span>;
mat[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] = <span class="hljs-number">3.14</span>; <span class="hljs-comment">// æ›´è‡ªç„¶çš„è¯­æ³•</span>
</code></pre>
<p><strong>åŸå§‹å†™æ³•</strong>ï¼šä½¿ç”¨å‡½æ•°è°ƒç”¨æˆ–è¿ç»­çš„ä¸€ç»´ä¸‹æ ‡æ“ä½œã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">double</span>&amp; <span class="hljs-title">at</span><span class="hljs-params">(<span class="hljs-type">size_t</span> i, <span class="hljs-type">size_t</span> j)</span> </span>{ <span class="hljs-keyword">return</span> data[i * cols + j]; }
mat.<span class="hljs-built_in">at</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">3.14</span>;

<span class="hljs-comment">// æˆ–è¿”å›ä»£ç†å¯¹è±¡</span>
<span class="hljs-keyword">auto</span> <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> i) { <span class="hljs-keyword">return</span> <span class="hljs-built_in">RowProxy</span>(data, i, cols); }
mat[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] = <span class="hljs-number">3.14</span>;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šåŸç”Ÿæ”¯æŒå¤šç»´ä¸‹æ ‡ä½¿æ•°å­¦ã€å›¾å½¢ç­‰é¢†åŸŸåº“çš„æ¥å£æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆã€‚</p>
<p>å­¦å®Œä»¥ä¸ŠåŸºç¡€çŸ¥è¯†ï¼Œä¸‹é¢å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç°ä»£C++é¡¹ç›®æ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ç»¼åˆè¿ç”¨C++11åˆ°C++23çš„ç‰¹æ€§ï¼Œå¹¶æ·±å…¥è§£æä¸€äº›å…³é”®è¯­æ³•ç³–çš„åº•å±‚åŸç†ã€‚å½“ä½ èƒ½ç†è§£è¿™äº›ç»¼åˆåº”ç”¨å’Œåº•å±‚å®ç°æ—¶ï¼Œé‚£äº›æ›¾ç»ä»¤äººå›°æƒ‘çš„ç°ä»£C++ä»£ç å°†å˜å¾—æ¸…æ™°æ˜äº†ã€‚</p>
<h3 data-id="heading-27"><strong>å®æˆ˜é¡¹ç›®ï¼šç°ä»£é…ç½®æ–‡ä»¶è§£æå™¨</strong></h3>
<p>è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªé…ç½®æ–‡ä»¶è§£æå™¨ï¼Œæ”¯æŒè¯»å–JSON/YAMLé£æ ¼çš„é…ç½®ï¼Œè¦æ±‚å…·å¤‡ï¼š</p>
<ol>
<li>ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®</li>
<li>æ”¯æŒåµŒå¥—ç»“æ„</li>
<li>è‰¯å¥½çš„é”™è¯¯å¤„ç†</li>
<li>é«˜æ€§èƒ½ï¼ˆé›¶æ‹·è´è§£æï¼‰</li>
</ol>
<h4 data-id="heading-28"><strong>C++98/03é£æ ¼å®ç°ï¼ˆçº¦150è¡Œï¼‰</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿå®ç°å……æ»¡äº†æ‰‹åŠ¨å†…å­˜ç®¡ç†ã€åŸå§‹æŒ‡é’ˆå’Œå†—é•¿çš„é”™è¯¯æ£€æŸ¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigValue</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Type</span> { INT, DOUBLE, STRING, ARRAY, OBJECT };
    
<span class="hljs-keyword">private</span>:
    Type type_;
    <span class="hljs-keyword">union</span> {
        <span class="hljs-type">int</span> int_val_;
        <span class="hljs-type">double</span> double_val_;
        std::string* string_val_;
        std::vector&lt;ConfigValue*&gt;* array_val_;
        std::map&lt;std::string, ConfigValue*&gt;* object_val_;
    };
    
    <span class="hljs-comment">// æ‰‹åŠ¨å®ç°å¤åˆ¶æ§åˆ¶ï¼ˆRule of Threeï¼‰</span>
    <span class="hljs-built_in">ConfigValue</span>(<span class="hljs-type">const</span> ConfigValue&amp; other); <span class="hljs-comment">// éœ€è¦æ·±æ‹·è´</span>
    ConfigValue&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> ConfigValue&amp; other);
    ~<span class="hljs-built_in">ConfigValue</span>();
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å„ç§æ„é€ å‡½æ•°å’Œè®¿é—®æ–¹æ³•...</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_int</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> type_ == INT; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_int</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">if</span> (type_ != INT) <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"Type mismatch"</span>);
        <span class="hljs-keyword">return</span> int_val_;
    }
    <span class="hljs-comment">// ç±»ä¼¼çš„å…¶ä»–è®¿é—®å™¨...</span>
    
    <span class="hljs-comment">// è§£æå‡½æ•°</span>
    <span class="hljs-function"><span class="hljs-type">static</span> ConfigValue* <span class="hljs-title">parse</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* json)</span></span>;
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
ConfigValue* config = ConfigValue::<span class="hljs-built_in">parse</span>(json_text);
<span class="hljs-keyword">if</span> (config) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">int</span> timeout = config-&gt;<span class="hljs-built_in">get_object</span>()[<span class="hljs-string">"timeout"</span>]-&gt;<span class="hljs-built_in">get_int</span>();
    } <span class="hljs-built_in">catch</span> (...) {
        <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
    }
    <span class="hljs-keyword">delete</span> config; <span class="hljs-comment">// å¿…é¡»è®°å¾—åˆ é™¤</span>
}
</code></pre>
<h4 data-id="heading-29"><strong>ç°ä»£C++é£æ ¼å®ç°ï¼ˆC++17/20ï¼Œçº¦80è¡Œï¼‰</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;variant&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;expected&gt;</span> <span class="hljs-comment">// C++23</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;format&gt;</span>   <span class="hljs-comment">// C++20</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string_view&gt;</span></span>

<span class="hljs-keyword">namespace</span> config {
    <span class="hljs-comment">// ä½¿ç”¨variantè¡¨ç¤ºç±»å‹å®‰å…¨çš„è”åˆä½“ï¼ˆC++17ï¼‰</span>
    <span class="hljs-keyword">using</span> value = std::variant&lt;
        std::monostate,        <span class="hljs-comment">// ç©ºå€¼</span>
        <span class="hljs-type">int64_t</span>,               <span class="hljs-comment">// æ•´æ•°</span>
        <span class="hljs-type">double</span>,                <span class="hljs-comment">// æµ®ç‚¹æ•°</span>
        std::string,           <span class="hljs-comment">// å­—ç¬¦ä¸²</span>
        std::vector&lt;value&gt;,    <span class="hljs-comment">// æ•°ç»„</span>
        std::map&lt;std::string, value&gt; <span class="hljs-comment">// å¯¹è±¡</span>
    &gt;;
    
    <span class="hljs-comment">// ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼ˆC++11ï¼‰</span>
    <span class="hljs-keyword">using</span> object_ptr = std::shared_ptr&lt;value&gt;;
    
    <span class="hljs-comment">// é”™è¯¯ç±»å‹å®šä¹‰</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">parse_error</span> {
        <span class="hljs-type">size_t</span> position;
        std::string message;
        
        <span class="hljs-comment">// ä½¿ç”¨formatè¿›è¡Œé”™è¯¯æ ¼å¼åŒ–ï¼ˆC++20ï¼‰</span>
        <span class="hljs-function">std::string <span class="hljs-title">to_string</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
            <span class="hljs-keyword">return</span> std::format(<span class="hljs-string">"Parse error at position {}: {}"</span>, position, message);
        }
    };
    
    <span class="hljs-comment">// ä½¿ç”¨expectedä½œä¸ºè¿”å›å€¼ï¼ˆC++23ï¼‰</span>
    <span class="hljs-keyword">using</span> parse_result = std::expected&lt;value, parse_error&gt;;
    
    <span class="hljs-comment">// è§£æå‡½æ•°å£°æ˜</span>
    <span class="hljs-function">parse_result <span class="hljs-title">parse</span><span class="hljs-params">(std::string_view json)</span> <span class="hljs-keyword">noexcept</span></span>;
    
    <span class="hljs-comment">// å®‰å…¨çš„é…ç½®è®¿é—®å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    std::optional&lt;T&gt; <span class="hljs-title">get_as</span><span class="hljs-params">(<span class="hljs-type">const</span> value&amp; val)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-type">const</span> T* ptr = std::<span class="hljs-built_in">get_if</span>&lt;T&gt;(&amp;val)) {
            <span class="hljs-keyword">return</span> *ptr;
        }
        <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>; <span class="hljs-comment">// C++17</span>
    }
    
    <span class="hljs-comment">// ä½¿ç”¨conceptçº¦æŸæ¨¡æ¿ï¼ˆC++20ï¼‰</span>
    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">concept</span> ConfigValueType = std::same_as&lt;T, <span class="hljs-type">int64_t</span>&gt; || 
                              std::same_as&lt;T, <span class="hljs-type">double</span>&gt; || 
                              std::same_as&lt;T, std::string&gt;;
    
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;ConfigValueType T&gt;
    T <span class="hljs-title">get_or_default</span><span class="hljs-params">(<span class="hljs-type">const</span> value&amp; val, T default_val)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">get_as</span>&lt;T&gt;(val).<span class="hljs-built_in">value_or</span>(default_val);
    }
}

<span class="hljs-comment">// ç®€åŒ–åçš„ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">auto</span> result = config::<span class="hljs-built_in">parse</span>(json_text);
<span class="hljs-keyword">if</span> (result) {
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; config = *result;
    
    <span class="hljs-comment">// å®‰å…¨è®¿é—®ï¼Œç±»å‹æ˜ç¡®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> timeout = config::<span class="hljs-built_in">get_as</span>&lt;<span class="hljs-type">int64_t</span>&gt;(config[<span class="hljs-string">"timeout"</span>])) {
        std::cout &lt;&lt; std::format(<span class="hljs-string">"Timeout: {}ms"</span>, *timeout); <span class="hljs-comment">// C++20</span>
    }
    
    <span class="hljs-comment">// é“¾å¼è®¿é—®ï¼Œç©ºå®‰å…¨</span>
    std::string db_name = config[<span class="hljs-string">"database"</span>]
        .<span class="hljs-built_in">and_then</span>([](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; db) { <span class="hljs-keyword">return</span> config::<span class="hljs-built_in">get_as</span>&lt;std::string&gt;(db[<span class="hljs-string">"name"</span>]); })
        .<span class="hljs-built_in">value_or</span>(<span class="hljs-string">"default_db"</span>);
    
    <span class="hljs-comment">// ç»“æ„åŒ–ç»‘å®šéå†ï¼ˆC++17ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>* obj = std::<span class="hljs-built_in">get_if</span>&lt;config::object_map&gt;(&amp;config)) {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [key, val] : *obj) {
            std::cout &lt;&lt; std::format(<span class="hljs-string">"{} = {}"</span>, key, val);
        }
    }
} <span class="hljs-keyword">else</span> {
    std::cerr &lt;&lt; result.<span class="hljs-built_in">error</span>().<span class="hljs-built_in">to_string</span>();
}
<span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼</span>
</code></pre>
<h3 data-id="heading-30"><strong>å…³é”®è¯­æ³•ç³–çš„æ·±åº¦è§£æ</strong></h3>
<h4 data-id="heading-31"><strong>1. Lambdaè¡¨è¾¾å¼çš„å®Œæ•´ç¼–è¯‘è¿‡ç¨‹</strong></h4>
<p>è®©æˆ‘ä»¬æ·±å…¥çœ‹çœ‹è¿™ä¸ªLambdaæ˜¯å¦‚ä½•è¢«ç¼–è¯‘å™¨è½¬æ¢çš„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">auto</span> multiplier = [factor = <span class="hljs-number">2</span>](<span class="hljs-type">int</span> x) <span class="hljs-keyword">mutable</span> { 
    factor *= <span class="hljs-number">2</span>; 
    <span class="hljs-keyword">return</span> x * factor; 
};

<span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„å¤§è‡´ç­‰ä»·ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">__lambda_1</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> factor; <span class="hljs-comment">// æ•è·çš„å˜é‡</span>
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–æ•è·çš„å˜é‡</span>
    <span class="hljs-keyword">explicit</span> __lambda_1(<span class="hljs-type">int</span> init_factor) : <span class="hljs-built_in">factor</span>(init_factor) {}
    
    <span class="hljs-comment">// å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
        factor *= <span class="hljs-number">2</span>;
        <span class="hljs-keyword">return</span> x * factor;
    }
};

<span class="hljs-comment">// å®ä¾‹åŒ–</span>
<span class="hljs-function">__lambda_1 <span class="hljs-title">multiplier</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>;

<span class="hljs-comment">// è°ƒç”¨</span>
<span class="hljs-type">int</span> result = <span class="hljs-built_in">multiplier</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// å®é™…è°ƒç”¨ multiplier.operator()(5)</span>
</code></pre>
<p><strong>é‡è¦ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>æ•è·åˆ—è¡¨<code>[=]</code>æˆ–<code>[&amp;]</code>ä¼šè¢«å±•å¼€ä¸ºå…·ä½“å˜é‡</li>
<li><code>mutable</code>å…³é”®å­—å†³å®šäº†<code>operator()</code>æ˜¯å¦è¢«æ ‡è®°ä¸º<code>const</code></li>
<li>è¿”å›ç±»å‹å¯ä»¥é€šè¿‡å°¾ç½®è¿”å›ç±»å‹æˆ–è‡ªåŠ¨æ¨å¯¼</li>
</ul>
<h4 data-id="heading-32"><strong>2. èŒƒå›´forå¾ªç¯çš„å®Œæ•´å±•å¼€</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æºä»£ç </span>
std::vector&lt;<span class="hljs-type">int</span>&gt; vec = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>&amp; item : vec) {
    item *= <span class="hljs-number">2</span>;
}

<span class="hljs-comment">// ç¼–è¯‘å™¨å±•å¼€å</span>
{
    <span class="hljs-keyword">auto</span>&amp;&amp; __range = vec;
    <span class="hljs-keyword">auto</span> __begin = __range.<span class="hljs-built_in">begin</span>();
    <span class="hljs-keyword">auto</span> __end = __range.<span class="hljs-built_in">end</span>();
    <span class="hljs-keyword">for</span> (; __begin != __end; ++__begin) {
        <span class="hljs-type">int</span>&amp; item = *__begin;
        item *= <span class="hljs-number">2</span>;
    }
}

<span class="hljs-comment">// å¦‚æœä½¿ç”¨auto&amp;&amp;</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp;&amp; item : vec) {
    <span class="hljs-comment">// å±•å¼€ä¸º</span>
    <span class="hljs-keyword">auto</span>&amp;&amp; item = *__begin;
}
</code></pre>
<h4 data-id="heading-33"><strong>3. ç»“æ„åŒ–ç»‘å®šçš„å¤šç§æ¨¡å¼</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. æ•°ç»„è§£æ„</span>
<span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>] = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
<span class="hljs-keyword">auto</span>&amp; [a, b, c] = arr; <span class="hljs-comment">// a,b,cæ˜¯arr[0],arr[1],arr[2]çš„å¼•ç”¨</span>

<span class="hljs-comment">// 2. tuple-likeç±»å‹</span>
<span class="hljs-function">std::tuple&lt;<span class="hljs-type">int</span>, std::string, <span class="hljs-type">double</span>&gt; <span class="hljs-title">tup</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-string">"test"</span>, <span class="hljs-number">3.14</span>)</span></span>;
<span class="hljs-keyword">auto</span> [id, name, value] = tup; <span class="hljs-comment">// å¤åˆ¶åˆ°æ–°å˜é‡</span>

<span class="hljs-comment">// 3. ç»“æ„ä½“</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> { <span class="hljs-type">int</span> x; <span class="hljs-type">int</span> y; };
Point p{<span class="hljs-number">10</span>, <span class="hljs-number">20</span>};
<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [px, py] = p; <span class="hljs-comment">// px,pyæ˜¯constå¼•ç”¨</span>

<span class="hljs-comment">// ç¼–è¯‘å™¨ä¸ºç»“æ„ä½“ç”Ÿæˆçš„ä»£ç å¤§è‡´æ˜¯ï¼š</span>
<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; __e = p;
<span class="hljs-keyword">auto</span>&amp; px = __e.x;
<span class="hljs-keyword">auto</span>&amp; py = __e.y;
</code></pre>
<h4 data-id="heading-34"><strong>4. æ¦‚å¿µï¼ˆConceptsï¼‰çš„ç¼–è¯‘æœŸæ£€æŸ¥æœºåˆ¶</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">concept</span> Addable = <span class="hljs-built_in">requires</span>(T a, T b) {
    { a + b } -&gt; std::same_as&lt;T&gt;;
    { a += b } -&gt; std::same_as&lt;T&amp;&gt;;
};

<span class="hljs-comment">// ä½¿ç”¨æ—¶</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;Addable T&gt;
T <span class="hljs-title">sum</span><span class="hljs-params">(T a, T b)</span> </span>{ <span class="hljs-keyword">return</span> a + b; }

<span class="hljs-comment">// ç¼–è¯‘å™¨æ£€æŸ¥å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯ï¼ˆä¼ ç»Ÿæ¨¡æ¿ vs æ¦‚å¿µï¼‰</span>

<span class="hljs-comment">// ä¼ ç»Ÿæ¨¡æ¿çš„é”™è¯¯ï¼ˆéš¾ä»¥ç†è§£ï¼‰ï¼š</span>
<span class="hljs-comment">// error: invalid operands to binary expression ('MyClass' and 'MyClass')</span>
<span class="hljs-comment">// note: candidate template ignored: substitution failure [...]</span>

<span class="hljs-comment">// æ¦‚å¿µçš„é”™è¯¯ï¼ˆæ¸…æ™°æ˜äº†ï¼‰ï¼š</span>
<span class="hljs-comment">// error: constraints not satisfied</span>
<span class="hljs-comment">// note: within 'template&lt;class T&gt; concept Addable' [...]</span>
<span class="hljs-comment">// note: the required expression '(a + b)' would be ill-formed</span>
</code></pre>
<h4 data-id="heading-35"><strong>5. åç¨‹çŠ¶æ€æœºçš„å®ç°åŸç†</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç®€å•ç”Ÿæˆå™¨åç¨‹</span>
<span class="hljs-function">std::generator&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">range</span><span class="hljs-params">(<span class="hljs-type">int</span> start, <span class="hljs-type">int</span> end)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = start; i &lt; end; ++i) {
        <span class="hljs-keyword">co_yield</span> i; <span class="hljs-comment">// æš‚åœç‚¹</span>
    }
    <span class="hljs-keyword">co_return</span>;
}

<span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„çŠ¶æ€æœºä¼ªä»£ç </span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">__range_frame</span> {
    <span class="hljs-type">int</span> __start;
    <span class="hljs-type">int</span> __end;
    <span class="hljs-type">int</span> __i;
    <span class="hljs-type">int</span> __current_value;
    <span class="hljs-type">int</span> __resume_point = <span class="hljs-number">0</span>;
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">move_next</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">switch</span> (__resume_point) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: 
                __i = __start;
                <span class="hljs-keyword">goto</span> loop_start;
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                <span class="hljs-keyword">goto</span> loop_increment;
        }
        
        loop_start:
        <span class="hljs-keyword">if</span> (__i &lt; __end) {
            __current_value = __i;
            __resume_point = <span class="hljs-number">1</span>; <span class="hljs-comment">// ä¸‹æ¬¡ä»case 1æ¢å¤</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æœ‰å€¼</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç»“æŸ</span>
        
        loop_increment:
        ++__i;
        <span class="hljs-keyword">goto</span> loop_start;
    }
    
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">current_value</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> __current_value; }
};
</code></pre>
<h3 data-id="heading-36"><strong>ç°ä»£C++ç¼–ç å‡†åˆ™ä¸æœ€ä½³å®è·µ</strong></h3>
<h4 data-id="heading-37"><strong>1. RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰æ˜¯æ ¸å¿ƒ</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸å¥½ï¼šæ‰‹åŠ¨ç®¡ç†èµ„æº</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_file</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename)</span> </span>{
    FILE* f = <span class="hljs-built_in">fopen</span>(filename, <span class="hljs-string">"r"</span>);
    <span class="hljs-keyword">if</span> (!f) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// ... ä½¿ç”¨f</span>
    <span class="hljs-keyword">if</span> (error_occurred) {
        <span class="hljs-built_in">fclose</span>(f); <span class="hljs-comment">// å¿…é¡»è®°å¾—å…³é—­</span>
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">fclose</span>(f); <span class="hljs-comment">// å¿…é¡»è®°å¾—å…³é—­</span>
}

<span class="hljs-comment">// å¥½ï¼šä½¿ç”¨RAIIåŒ…è£…å™¨ï¼ˆC++11ï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_file</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filename)</span> </span>{
    <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(filename)</span></span>; <span class="hljs-comment">// æ„é€ å‡½æ•°æ‰“å¼€</span>
    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// ... ä½¿ç”¨file</span>
    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨å…³é—­ï¼Œææ„å‡½æ•°è‡ªåŠ¨å¤„ç†</span>
}

<span class="hljs-comment">// æ›´å¥½ï¼šè‡ªå®šä¹‰RAIIåŒ…è£…å™¨ï¼ˆC++11/14ï¼‰</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> Deleter = std::default_delete&lt;T&gt;&gt;
<span class="hljs-keyword">class</span> scoped_resource {
    T* ptr;
    Deleter deleter;
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">scoped_resource</span><span class="hljs-params">(T* p)</span> : ptr(p) {</span>}
    ~<span class="hljs-built_in">scoped_resource</span>() { <span class="hljs-keyword">if</span> (ptr) <span class="hljs-built_in">deleter</span>(ptr); }
    <span class="hljs-comment">// ç¦ç”¨æ‹·è´ï¼Œå…è®¸ç§»åŠ¨</span>
    <span class="hljs-built_in">scoped_resource</span>(<span class="hljs-type">const</span> scoped_resource&amp;) = <span class="hljs-keyword">delete</span>;
    scoped_resource&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> scoped_resource&amp;) = <span class="hljs-keyword">delete</span>;
    <span class="hljs-built_in">scoped_resource</span>(scoped_resource&amp;&amp; other) 
        : <span class="hljs-built_in">ptr</span>(other.ptr) { other.ptr = <span class="hljs-literal">nullptr</span>; }
    
    <span class="hljs-function">T* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> ptr; }
    T&amp; <span class="hljs-keyword">operator</span>*() <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> *ptr; }
    T* <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> ptr; }
};
</code></pre>
<h4 data-id="heading-38"><strong>2. ç±»å‹å®‰å…¨ä¼˜äºåŸå§‹ç±»å‹</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¸å¥½ï¼šä½¿ç”¨åŸå§‹ç±»å‹å’Œå®</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_RETRIES 3</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> INVALID_ID -1</span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find_user</span><span class="hljs-params">(<span class="hljs-type">int</span> user_id)</span> </span>{
    <span class="hljs-keyword">if</span> (user_id == INVALID_ID) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// å¥½ï¼šä½¿ç”¨å¼ºç±»å‹ï¼ˆC++11/17ï¼‰</span>
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">UserId</span> : <span class="hljs-type">int64_t</span> {
    Invalid = <span class="hljs-number">-1</span>
};

<span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> max_retries = <span class="hljs-number">3</span>; <span class="hljs-comment">// C++11 constexpr</span>

<span class="hljs-function">std::optional&lt;User&gt; <span class="hljs-title">find_user</span><span class="hljs-params">(UserId id)</span> </span>{ <span class="hljs-comment">// C++17 optional</span>
    <span class="hljs-keyword">if</span> (id == UserId::Invalid) <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">return</span> user;
}
</code></pre>
<h4 data-id="heading-39"><strong>3. å‡½æ•°å¼é£æ ¼ä¸ç®—æ³•ç»„åˆ</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿå‘½ä»¤å¼é£æ ¼</span>
<span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">filter_and_transform</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; input)</span> </span>{
    std::vector&lt;<span class="hljs-type">int</span>&gt; result;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x : input) {
        <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span> &amp;&amp; x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
            result.<span class="hljs-built_in">push_back</span>(x * x);
        }
    }
    std::<span class="hljs-built_in">sort</span>(result.<span class="hljs-built_in">begin</span>(), result.<span class="hljs-built_in">end</span>());
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// ç°ä»£å‡½æ•°å¼é£æ ¼ï¼ˆC++20èŒƒå›´ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">filter_and_transform</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; input)</span> </span>{
    <span class="hljs-keyword">return</span> input 
        | std::views::<span class="hljs-built_in">filter</span>([](<span class="hljs-type">int</span> x){ <span class="hljs-keyword">return</span> x &gt; <span class="hljs-number">0</span> &amp;&amp; x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>; })
        | std::views::<span class="hljs-built_in">transform</span>([](<span class="hljs-type">int</span> x){ <span class="hljs-keyword">return</span> x * x; })
        | std::ranges::<span class="hljs-built_in">to</span>&lt;std::vector&gt;(); <span class="hljs-comment">// C++23</span>
        <span class="hljs-comment">// æˆ–ä½¿ç”¨ std::vector&lt;int&gt;(begin, end)</span>
}
</code></pre>
<h4 data-id="heading-40"><strong>4. é”™è¯¯å¤„ç†çš„ç°ä»£åŒ–æ¼”è¿›</strong></h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å±‚çº§1ï¼šå¼‚å¸¸ï¼ˆåŸºç¡€ï¼‰</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">auto</span> config = <span class="hljs-built_in">parse_config</span>(file);
    <span class="hljs-built_in">use</span>(config);
} <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> parse_error&amp; e) {
    <span class="hljs-built_in">log_error</span>(e.<span class="hljs-built_in">what</span>());
}

<span class="hljs-comment">// å±‚çº§2ï¼šoptionalï¼ˆç®€å•å¯é€‰å€¼ï¼ŒC++17ï¼‰</span>
<span class="hljs-keyword">auto</span> parse_result = <span class="hljs-built_in">try_parse</span>(config_str);
<span class="hljs-keyword">if</span> (parse_result) {
    <span class="hljs-built_in">use</span>(*parse_result);
}

<span class="hljs-comment">// å±‚çº§3ï¼šexpectedï¼ˆæºå¸¦é”™è¯¯ä¿¡æ¯ï¼ŒC++23ï¼‰</span>
<span class="hljs-keyword">auto</span> parse_result = <span class="hljs-built_in">parse_config</span>(config_str);
<span class="hljs-keyword">if</span> (!parse_result) {
    <span class="hljs-comment">// å¯ä»¥è®¿é—®è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">handle_error</span>(parse_result.<span class="hljs-built_in">error</span>());
}
<span class="hljs-built_in">use</span>(*parse_result);

<span class="hljs-comment">// å±‚çº§4ï¼šResultç±»å‹ä¸ç»„åˆå™¨ï¼ˆå‡½æ•°å¼é£æ ¼ï¼‰</span>
<span class="hljs-built_in">parse_config</span>(config_str)
    .<span class="hljs-built_in">and_then</span>(validate_config)    <span class="hljs-comment">// é“¾å¼éªŒè¯</span>
    .<span class="hljs-built_in">and_then</span>(apply_defaults)     <span class="hljs-comment">// åº”ç”¨é»˜è®¤å€¼</span>
    .<span class="hljs-built_in">transform</span>(serialize)         <span class="hljs-comment">// è½¬æ¢ç»“æœ</span>
    .<span class="hljs-built_in">or_else</span>(log_and_recover);    <span class="hljs-comment">// é”™è¯¯æ¢å¤</span>
</code></pre>
<h3 data-id="heading-41"><strong>è°ƒè¯•ä¸ç†è§£ç°ä»£C++ä»£ç çš„æŠ€å·§</strong></h3>
<ol>
<li>
<p><strong>ä½¿ç”¨ç¼–è¯‘å™¨çš„ä¸­é—´è¡¨ç¤º</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># GCCå¯ä»¥è¾“å‡ºé¢„å¤„ç†åçš„ä»£ç </span>
g++ -E source.cpp -o source.ii

<span class="hljs-comment"># æŸ¥çœ‹æ¨¡æ¿å®ä¾‹åŒ–</span>
g++ -fdump-tree-original source.cpp
</code></pre>
</li>
<li>
<p><strong>åˆ©ç”¨typeidå’Œdecltypeè°ƒè¯•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;typeinfo&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">auto</span> lambda = [](<span class="hljs-keyword">auto</span> x) { <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>; };
std::cout &lt;&lt; <span class="hljs-built_in">typeid</span>(lambda).<span class="hljs-built_in">name</span>() &lt;&lt; std::endl;
std::cout &lt;&lt; <span class="hljs-built_in">typeid</span>(<span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">lambda</span>(<span class="hljs-number">42</span>))).<span class="hljs-built_in">name</span>() &lt;&lt; std::endl;
</code></pre>
</li>
<li>
<p><strong>é™æ€æ–­è¨€éªŒè¯ç±»å‹</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(T value)</span> </span>{
    <span class="hljs-built_in">static_assert</span>(std::is_integral_v&lt;T&gt;, 
                 <span class="hljs-string">"T must be an integral type"</span>);
    <span class="hljs-comment">// ...</span>
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨conceptçº¦æŸæ—¶çš„è°ƒè¯•</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">concept</span> MyConcept = <span class="hljs-built_in">requires</span>(T t) {
    { t.<span class="hljs-built_in">some_method</span>() } -&gt; std::same_as&lt;<span class="hljs-type">int</span>&gt;;
};

<span class="hljs-comment">// ç¼–è¯‘é”™è¯¯æ—¶ä¼šæ˜¾ç¤ºå…·ä½“å“ªä¸ªçº¦æŸä¸æ»¡è¶³</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-42"><strong>æ€»ç»“</strong></h3>
<p>ç°ä»£C++çš„è¿™äº›è¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³ç‰¹å®šé—®é¢˜è€Œç”Ÿçš„å·¥å…·ï¼š</p>
<ol>
<li><strong><code>auto</code>å’Œç±»å‹æ¨å¯¼</strong>ï¼šè§£å†³æ¨¡æ¿ç±»å‹å†—é•¿çš„é—®é¢˜</li>
<li><strong>Lambdaå’Œå‡½æ•°å¯¹è±¡</strong>ï¼šè§£å†³éœ€è¦ä¼ é€’å°æ®µä»£ç çš„é—®é¢˜</li>
<li><strong>æ™ºèƒ½æŒ‡é’ˆå’ŒRAII</strong>ï¼šè§£å†³èµ„æºç®¡ç†æ˜“é”™çš„é—®é¢˜</li>
<li><strong>èŒƒå›´forå’Œç»“æ„åŒ–ç»‘å®š</strong>ï¼šè§£å†³å®¹å™¨éå†ç¹ççš„é—®é¢˜</li>
<li><strong>æ¦‚å¿µå’Œçº¦æŸ</strong>ï¼šè§£å†³æ¨¡æ¿é”™è¯¯ä¿¡æ¯æ™¦æ¶©çš„é—®é¢˜</li>
<li><strong>åç¨‹å’Œå¼‚æ­¥</strong>ï¼šè§£å†³å›è°ƒåœ°ç‹±å’Œå¼‚æ­¥ä»£ç å¤æ‚çš„é—®é¢˜</li>
</ol>
<p>æŒæ¡è¿™äº›è¯­æ³•ç³–çš„å…³é”®ä¸æ˜¯è®°å¿†è¯­æ³•ï¼Œè€Œæ˜¯ç†è§£å®ƒä»¬<strong>è¦è§£å†³ä»€ä¹ˆé—®é¢˜</strong>å’Œ<strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡</strong>ã€‚å½“ä½ çœ‹åˆ°ä¸€æ®µç°ä»£C++ä»£ç æ—¶ï¼Œå°è¯•é—®è‡ªå·±ï¼š</p>
<ol>
<li>è¿™æ®µä»£ç æƒ³è§£å†³ä»€ä¹ˆæ ¸å¿ƒé—®é¢˜ï¼Ÿ</li>
<li>ä½¿ç”¨äº†å“ªäº›ç°ä»£ç‰¹æ€§æ¥ç®€åŒ–è§£å†³æ–¹æ¡ˆï¼Ÿ</li>
<li>å¦‚æœä¸ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä»£ç ä¼šå˜æˆä»€ä¹ˆæ ·å­ï¼Ÿ</li>
</ol>
<p>é€šè¿‡è¿™ç§å¯¹æ¯”æ€è€ƒï¼Œä½ ä¸ä»…èƒ½ç†è§£åˆ«äººçš„ä»£ç ï¼Œè¿˜èƒ½é€æ¸å½¢æˆè‡ªå·±çš„ç°ä»£C++ç¼–ç¨‹æ€ç»´ã€‚ç°ä»£C++ä¸æ˜¯å¯¹ä¼ ç»Ÿçš„é¢ è¦†ï¼Œè€Œæ˜¯åœ¨ä¿æŒé›¶æˆæœ¬æŠ½è±¡åŸåˆ™ä¸‹çš„è‡ªç„¶æ¼”è¿›ã€‚æ¯ä¸€ä¸ªè¯­æ³•ç³–èƒŒåï¼Œéƒ½æ˜¯C++ç¤¾åŒºæ•°åå¹´çš„ç»éªŒç§¯ç´¯å’Œå¯¹æ›´å®‰å…¨ã€æ›´é«˜æ•ˆä»£ç çš„ä¸æ‡ˆè¿½æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éœ‡æƒŠï¼Open AIæŠŠTransformerè®­ç»ƒæˆäº†â€œå‡ ä¹å…¨éƒ¨å½’é›¶â€ï¼]]></title>    <link>https://juejin.cn/post/7579871631095496730</link>    <guid>https://juejin.cn/post/7579871631095496730</guid>    <pubDate>2025-12-04T12:58:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579871631095496730" data-draft-id="7579798332778266633" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éœ‡æƒŠï¼Open AIæŠŠTransformerè®­ç»ƒæˆäº†â€œå‡ ä¹å…¨éƒ¨å½’é›¶â€ï¼"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-04T12:58:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éœ‡æƒŠï¼Open AIæŠŠTransformerè®­ç»ƒæˆäº†â€œå‡ ä¹å…¨éƒ¨å½’é›¶â€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T12:58:40.000Z" title="Thu Dec 04 2025 12:58:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenAI æŒ‘æˆ˜äº†ä¸€é¡¹è¢«è§†ä¸ºä¸å¯èƒ½çš„ä»»åŠ¡ï¼šé€šè¿‡å°†Transformerçš„æƒé‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å‹ç¼©è‡³æ¥è¿‘ç»å¯¹é›¶å€¼ï¼Œå¼ºåˆ¶æ¨¡å‹ä»…ä¾èµ–æå°‘æ•°è¿æ¥æ‰§è¡Œå…¨éƒ¨è®¡ç®—ã€‚</p>
<p>è¿™ä¸€æç«¯æ¡ä»¶ä¸‹ï¼Œæ¨¡å‹å†…éƒ¨è´Ÿè´£é€»è¾‘æ¨ç†çš„"è®¡ç®—ç”µè·¯"é¦–æ¬¡å®ç°äº†å¯åˆ†ç¦»ã€å¯éªŒè¯çš„æ˜¾æ€§åŒ–å‘ˆç°ã€‚</p>
<p>è¿™å ªç§°äººç±»è¿„ä»Šä¸ºæ­¢å¯¹Transformerå·¥ä½œæœºåˆ¶æœ€æ·±åˆ»çš„æ´å¯Ÿçªç ´ã€‚</p>
<p>åœ¨å¤§å‹æ¨¡å‹ä¸»å¯¼çš„æ—¶ä»£ï¼ŒTransformerçš„ä¸å¯è§£é‡Šæ€§å·²æˆä¸ºæ™®éè®¤çŸ¥ã€‚æ— è®ºæ˜¯æ³¨æ„åŠ›å¤´åˆ†æã€æ¿€æ´»æ¨¡å¼è¿½è¸ªï¼Œè¿˜æ˜¯åäº‹å®æ ·æœ¬æ„å»ºï¼Œä¼ ç»Ÿç ”ç©¶æ–¹æ³•åœ¨dense Transformerçš„å±‚é—´äº¤ç»‡ä¸­å‡é­é‡ç“¶é¢ˆâ€”â€”æ•°ä¸‡æ¡é€šé“çš„å¯†é›†äº¤äº’ä½¿å¾—å†…åœ¨ç»“æ„éš¾ä»¥è¾¨è¯†ã€‚</p>
<p>OpenAIçš„ã€ŠWeight-sparse Transformers Have Interpretable Circuitsã€‹ç ”ç©¶é‡‡å–äº†æˆªç„¶ç›¸åçš„æ€è·¯ï¼šå¹¶éå¯¹denseæ¨¡å‹è¿›è¡Œäº‹åè§£æï¼Œè€Œæ˜¯åœ¨è®­ç»ƒåˆæœŸå°±æŠ‘åˆ¶å…¶denseåŒ–å€¾å‘ã€‚</p>
<p>é€šè¿‡ç»´æŒè®­ç»ƒå…¨ç¨‹çš„æ¥è¿‘é›¶æƒé‡çŠ¶æ€ï¼Œæ¨¡å‹è¢«è¿«åœ¨æœ€å°è¿æ¥é›†å†…å®Œæˆè®¡ç®—ä»»åŠ¡ã€‚å½“å†—ä½™è·¯å¾„è¢«æè‡´å‹ç¼©åï¼Œé‚£æ¡æ”¯æ’‘æ¨ç†çš„æ ¸å¿ƒå› æœé“¾â€”â€”å³è®ºæ–‡ä¸­å®šä¹‰çš„"è®¡ç®—ç”µè·¯"(circuit)â€”â€”ä¾¿ä»¥æ¸…æ™°å¯è¿½æº¯çš„å½¢æ€æµ®ç°ã€‚</p>
<p>æ›´å…·çªç ´æ€§çš„æ˜¯ï¼Œè¿™äº›ç”µè·¯ä¸ä»…èƒ½å¤Ÿå®Œæ•´æ˜ å°„è®¡ç®—æµç¨‹ï¼Œå…¶å› æœæœ‰æ•ˆæ€§è¿˜å¯é€šè¿‡å®éªŒéªŒè¯ã€‚ç ”ç©¶è€…èƒ½å¤Ÿç‹¬ç«‹è°ƒæ§ç”µè·¯èŠ‚ç‚¹ã€é¢„åˆ¤dense Transformerçš„å¤±æ•ˆæƒ…å½¢ï¼Œç”šè‡³å¼•å¯¼denseæ¨¡å‹äº§ç”Ÿä¸ç¨€ç–ç”µè·¯ä¸€è‡´çš„å“åº”ã€‚</p>
<p>è¯¥ç ”ç©¶æ­ç¤ºäº†ä¸€ä¸ªé¢ è¦†æ€§è§‚ç‚¹ï¼šTransformerçš„ä¸å¯è§£é‡Šæ€§å¹¶éå…¶å›ºæœ‰å±æ€§ï¼Œè€Œæ˜¯æºäºä¼ ç»Ÿè®­ç»ƒæ–¹æ³•æœªèƒ½æä¾›å¯è§£é‡Šçš„æˆé•¿è·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0652d74b317e42eabbbbb18139cb0b44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=nIbqiJZ5kxyMN40skFtGS7zyqJ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼š</p>
<p>Weight-sparse transformers have interpretable circuits</p>
<p><strong>01</strong></p>
<p><strong>æ–¹æ³•</strong></p>
<p>è‹¥å°†dense Transformeræ¯”ä½œä¸€ä¸ªè·¯ç½‘å¯†å¸ƒçš„è¶…çº§éƒ½ä¼šï¼ŒOpenAIçš„ç­–ç•¥åˆ™æ˜¯åœ¨è®­ç»ƒåˆæœŸå°é—­ç»å¤§å¤šæ•°æ”¯çº¿ï¼Œä»…ä¿ç•™ä¸»å¹²é“ã€‚æ‰€æœ‰è®¡ç®—å¿…é¡»æ²¿è¿™äº›æ ¸å¿ƒé€šé“æµåŠ¨ï¼Œè€Œæ‰¿æ‹…å…³é”®ä»»åŠ¡çš„è·¯å¾„ä¹Ÿå› æ­¤è¢«å‡¸æ˜¾å‡ºæ¥ã€‚</p>
<p>è¯¥æ–¹æ³•å¯åˆ†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼šâ€Œè®­ç»ƒåˆæœŸç»´æŒæç¨€ç–æ€§â€Œã€â€Œå¼•å¯¼ç”µè·¯ç»“æ„è‡ªç„¶æµ®ç°â€Œï¼Œæœ€ç»ˆå®ç°â€Œå¯¹denseæ¨¡å‹çš„é€†å‘è§£æâ€Œã€‚</p>
<p>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
<p><strong>1.1 è®­ç»ƒæ—¶å¼ºåˆ¶ç¨€ç–ï¼šä»æºå¤´ä¸Šé¿å… dense</strong></p>
<p>OpenAI æ‘’å¼ƒäº†ä¼ ç»Ÿ"å…ˆå¯†é›†è®­ç»ƒåå‰ªæ"çš„å¸¸è§„è·¯å¾„ï¼Œåˆ›æ–°æ€§åœ°è®¾å®šï¼šæ‰€æœ‰æƒé‡çŸ©é˜µåœ¨è®­ç»ƒå…¨å‘¨æœŸå†…å‡ç»´æŒå›ºå®šæ•°é‡çš„éé›¶å‚æ•°ã€‚</p>
<p>è¿™ç§æœºåˆ¶ä½¿ç½‘ç»œå±‚æŒç»­æ‰§è¡Œä¸‰ä¸ªæ ‡å‡†åŒ–æ“ä½œï¼š</p>
<p>â€Œforwardä¼ æ’­â€Œï¼šæ‰§è¡Œæ ‡å‡†çŸ©é˜µè¿ç®—</p>
<p>â€Œåå‘ä¼ æ’­â€Œï¼šæŒ‰æ¢¯åº¦æ›´æ–°å‚æ•°</p>
<p>â€Œå‚æ•°æŠ•å½±â€Œï¼šä»…ä¿ç•™ç»å¯¹å€¼æœ€å¤§çš„kä¸ªæƒé‡ï¼Œå…¶ä½™å¼ºåˆ¶ç½®é›¶</p>
<p>æ•´ä¸ªæ¨¡å‹å§‹ç»ˆä¿æŒé«˜åº¦ç¨€ç–ç‰¹æ€§ï¼Œç”±æ­¤äº§ç”Ÿä¸‰ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<p>æŠ‘åˆ¶å†—ä½™ç¥ç»è¿æ¥çš„ç”Ÿé•¿</p>
<p>é™ä½ç‰¹å¾åŠŸèƒ½çš„ç›¸äº’å¹²æ‰°</p>
<p>ä¿ƒä½¿ç‰¹å®šä»»åŠ¡èšç„¦äºæœ‰é™æ¿€æ´»é€šè·¯</p>
<p>è¯¥è®­ç»ƒæ¡†æ¶åœ¨è®ºæ–‡ä¸­é€šè¿‡å¯è§†åŒ–æµç¨‹å›¾è¿›è¡Œäº†ç³»ç»Ÿé˜è¿°ï¼Œå…¶ç»“æ„æ¸…æ™°å±•ç¤ºäº†ä¸Šè¿°åŠ¨æ€è¿‡ç¨‹çš„æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40d2ffd27f124a2da2b3edf50f470d46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=n9wjQCvul%2FH6BiMC6tesp8wN2SI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾1. ä»ç¨€ç–è®­ç»ƒåˆ°æŠ½å–æœ€å°è®¡ç®—ç”µè·¯çš„æ•´ä½“æµç¨‹ã€‚æ¨¡å‹åœ¨å…¨ç¨‹ä¿æŒæç«¯ç¨€ç–ï¼Œé€šè¿‡èŠ‚ç‚¹å‰ªæå¾—åˆ°å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°ç»“æ„ã€‚</p>
<p><strong>1.2 è®©æ¨¡å‹è‡ªå·±æš´éœ²å…³é”®èŠ‚ç‚¹</strong></p>
<p>ä¸ºæ­ç¤ºæœ€å°ç”µè·¯çš„å·¥ä½œæœºåˆ¶ï¼Œç ”ç©¶è€…åœ¨residual channelã€attentionè¾“å…¥è¾“å‡ºç­‰å…³é”®èŠ‚ç‚¹å¼•å…¥gateç»“æ„ã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹ä¼šè‡ªä¸»æ¿€æ´»éƒ¨åˆ†gateè€Œå…³é—­å…¶ä½™éƒ¨åˆ†ï¼Œè¿™ä¸€åŠ¨æ€è¿‡ç¨‹æ¸…æ™°è¡¨æ˜ï¼šæ‰§è¡Œè¯¥ä»»åŠ¡æ—¶ï¼Œä»…éœ€ä¾èµ–ç‰¹å®šè·¯å¾„å³å¯å®Œæˆã€‚</p>
<p>gate çš„å½¢å¼å†™æˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39635bfda0414b739005565b2bbe31e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=lMd6csMjJfSoUFek%2B4J8AgI2eRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç»†èŠ‚ä¸å¿…æ·±ç©¶ï¼Œåªéœ€çŸ¥é“ï¼šæœ€ç»ˆè¢« gate æ¿€æ´»çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯æ¨¡å‹çœŸæ­£ç”¨åˆ°çš„å› æœå•å…ƒã€‚</p>
<p>åœ¨å­—ç¬¦ä¸²é—­åˆå¼•å·ä»»åŠ¡ä¸­ï¼Œç¨€ç–æ¨¡å‹æœ€ç»ˆåªç•™ä¸‹ 12 ä¸ªèŠ‚ç‚¹å’Œ 9 æ¡è¾¹ï¼ˆè§ä¸‹å›¾ï¼‰ï¼Œæ•´ä¸ªæ¨ç†é“¾åƒè“å›¾ä¸€æ ·å¹²å‡€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b035e503bf4f4ff6b5712168b68eeacd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=ITHjVuZQ0%2BVy3Snj%2BbGeMniBJkY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾2. å­—ç¬¦ä¸²é—­åˆå¼•å·ä»»åŠ¡æ‰€æŠ½å–çš„è®¡ç®—ç”µè·¯</p>
<p><strong>1.3 æ›´å¤æ‚çš„æ¨ç†ï¼šåµŒå¥—æ‹¬å·æ·±åº¦</strong></p>
<p>åµŒå¥—æ‹¬å·çš„å¤„ç†å¤æ‚åº¦æ˜¾è‘—é«˜äºå¼•å·ï¼Œç„¶è€Œç¨€ç–æ¨¡å‹ç”Ÿæˆçš„ç”µè·¯ç»“æ„å§‹ç»ˆä¿æŒæœ‰åºã€‚å½“æ£€æµ‹åˆ°å­—ç¬¦"[ "æ—¶ï¼Œæ¨¡å‹ä¼šåˆå§‹åŒ–ä¸€ä¸ª"å¼€æ‹¬å·ç‰¹å¾"ï¼Œéšåé€šè¿‡å•ä¸€æ³¨æ„åŠ›å¤´å¯¹è¯¥ç‰¹å¾çš„å†å²å€¼è¿›è¡Œå…¨å±€å¹³å‡èšåˆã€‚èšåˆç»“æœçš„å·®å¼‚å¯¹åº”ä¸åŒçš„åµŒå¥—å±‚çº§ï¼Œæœ€ç»ˆè¾“å‡ºä½ç½®å°†ä¾æ®å±‚çº§åˆ¤æ–­ç”Ÿæˆ"]"æˆ–"]]"ã€‚</p>
<p>åœ¨denseæ¨¡å‹ä¸­ï¼Œæ­¤ç±»æœºåˆ¶ä¼šåˆ†æ•£è‡³å¤šä¸ªæ³¨æ„åŠ›å¤´ä¸å¤§é‡æ®‹å·®é€šé“ä¸­ï¼Œç›¸äº’äº¤ç»‡éš¾ä»¥è¾¨è¯†ï¼›è€Œåœ¨ç¨€ç–æ¨¡å‹ä¸­ï¼Œè¯¥è¿‡ç¨‹å‘ˆç°ä¸ºä¸€æ¡æ¸…æ™°ä¸”ç¨³å®šçš„è·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2fc7767dcce4e888ee36da243e3c0a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=rA9K0hpLIARoE1%2BbZURNTmq8K2Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾3. ç¨€ç–æ¨¡å‹è®¡ç®—æ‹¬å·æ·±åº¦çš„ç”µè·¯ç¤ºæ„</p>
<p><strong>1.4 Bridgeï¼šè®©ç¨€ç–æ¨¡å‹è§£é‡Š dense Transformer</strong></p>
<p>ç¨€ç–æ¨¡å‹å› å…¶ç»“æ„é€æ˜æ€§è€Œæ˜“äºç†è§£ï¼Œç„¶è€Œåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œdenseæ¨¡å‹æ‰æ˜¯æˆ‘ä»¬å…³æ³¨çš„æ ¸å¿ƒç›®æ ‡ã€‚Bridgeçš„è®¾è®¡åˆè¡·æ­£æ˜¯å»ºç«‹ä¸¤è€…é—´çš„å…³è”ï¼Œä½¿ç¨€ç–ç”µè·¯èƒ½å¤Ÿä½œä¸ºdenseæ¨¡å‹çš„"å¯è§£é‡Šæ€§æ¥å£"ã€‚</p>
<p>è¯¥å®ç°æµç¨‹åŒ…å«ä¸¤ä¸ªå…³é”®é˜¶æ®µï¼š</p>
<p>é€†å‘è½¬æ¢ï¼šå°†denseæ¨¡å‹å„å±‚æ¿€æ´»å€¼å¯¹åº”åˆ°ç¨€ç–è¡¨ç¤ºç©ºé—´ï¼ˆdense â†’ sparseï¼‰</p>
<p>æ­£å‘è½¬æ¢ï¼šå°†ç¨€ç–ç©ºé—´çš„æ¿€æ´»ç»“æœé‡æ–°æ˜ å°„å›denseæ¨¡å‹ï¼ˆsparse â†’ denseï¼‰</p>
<p>å¹¶ç”¨ NMSE loss å¯¹é½ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02879d480fb94cf7ba5bafd21781ae29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=SGjsDz%2FgtD3rADpyqr4h5t8drd8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹åº”ç»“æ„åœ¨ä¸‹å›¾ä¸­ç»™å‡ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/465f56fa26904fb4ae0fed8a6182bef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=TMd785U%2BS2VcB0wUtEfBuQM2hjw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾4. Bridge ä½¿ç”¨çº¿æ€§æ˜ å°„å¯¹é½ sparse ä¸ dense çš„ä¸­é—´æ¿€æ´»ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥äº’ç›¸è½¬æ¢å¹¶ä¿æŒæ··åˆè·¯å¾„çš„æ€§èƒ½ã€‚</p>
<p><strong>02</strong></p>
<p><strong>å®éªŒ</strong></p>
<p>å½“ç”µè·¯è¢«æå–å®Œæˆåï¼Œä¸€ä¸ªå…³é”®é—®é¢˜ç«‹å³æµ®ç°ï¼šè¯¥è·¯å¾„æ˜¯å¦ç¡®ä¸ºæ¨¡å‹çš„å®é™…ä¾èµ–è·¯å¾„ï¼Ÿåç»­å®éªŒçš„æ ¸å¿ƒç›®æ ‡æ­£æ˜¯å¯¹è¿™ä¸€é—®é¢˜çš„å…¨é¢éªŒè¯ã€‚</p>
<p><strong>2.1 ç”µè·¯è§„æ¨¡çš„è§„å¾‹æ€§</strong></p>
<p>dense Transformeræå–çš„æœ€å°ç”µè·¯å°ºå¯¸æ³¢åŠ¨æ˜¾è‘—ï¼Œé’ˆå¯¹ç›¸åŒä»»åŠ¡æ—¶æ•°å€¼å·®å¼‚æå¤§ï¼Œç¼ºä¹æ˜æ˜¾è§„å¾‹æ€§ã€‚ç ”ç©¶ä¸­å°†denseæ¨¡å‹ä¸ç¨€ç–æ¨¡å‹çš„è§„æ¨¡æ•°æ®ç»˜åˆ¶äºåŒä¸€å›¾è¡¨ä¸­ã€‚denseæ¨¡å‹çš„æ•°æ®ç‚¹åˆ†å¸ƒè¾ƒä¸ºåˆ†æ•£ï¼Œè€Œç¨€ç–æ¨¡å‹çš„æ•°æ®ç‚¹åˆ™é«˜åº¦é›†ä¸­ï¼Œè¿‘ä¼¼æ²¿ä¸€æ¡ç¨³å®šçš„å¸¦çŠ¶åŒºåŸŸåˆ†å¸ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65edf6c154db49d2a8cee4e7af5ee135~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=FGCsKlWsYRzvW1xSiKH%2Bx2XH7%2Fw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾5. ç¨€ç–æ¨¡å‹åœ¨æ‰€æœ‰ä»»åŠ¡ä¸Šçš„æœ€å°ç”µè·¯è§„æ¨¡æ˜¾è‘—æ›´å°ï¼Œåœ¨ç›¸åŒæŸå¤±ä¸‹çº¦æ¯” dense æ¨¡å‹å° 16 å€ã€‚</p>
<p>ç¨€ç–ç»“æ„ä¸ä»…å‡å°‘å‚æ•°ï¼Œä¹Ÿè®©ä»»åŠ¡åˆ†å·¥æ›´ç¨³å®šã€‚</p>
<p><strong>2.2 æ¨¡å‹è¶Šå¤§ï¼Œç”µè·¯åè€Œæ›´å°</strong></p>
<p>ç¨€ç–æ¨¡å‹éšè§„æ¨¡æ‰©å±•å‘ˆç°æ€§èƒ½æå‡è¶‹åŠ¿ï¼Œè€Œæœ€å°ç”µè·¯è§„æ¨¡æŒç»­å‡å°ï¼›denseæ¨¡å‹åˆ™ç›¸åï¼šè§„æ¨¡æ‰©å¢ä¼´éšç»“æ„å¤æ‚åŒ–ç¨‹åº¦åŠ å‰§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6969e53bd54b4e17831ffc8b1574e530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=1F43y%2BfwhAbgxb6sBnjx3xBnwRI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾6. æ›´å¤§çš„ç¨€ç–æ¨¡å‹æ‹¥æœ‰æ›´å°çš„è®¡ç®—ç”µè·¯ä¸æ›´é«˜æ€§èƒ½</p>
<p>è¿™ç»„ç»“æœè¯´æ˜ï¼šå¯è§£é‡Šæ€§ä¸èƒ½åŠ›å¹¶éä¸€å®šå¯¹ç«‹ï¼Œæœ‰å¯èƒ½åŒæ—¶æå‡ã€‚</p>
<p><strong>2.3 ç¨€ç–ç”µè·¯èƒ½æ¨æ–­ dense æ¨¡å‹çš„é”™è¯¯</strong></p>
<p>åœ¨åµŒå¥—æ‹¬å·ä»»åŠ¡ä¸­ï¼Œç¨€ç–ç”µè·¯çš„ç ”ç©¶è¡¨æ˜ï¼šæ¨¡å‹é€šè¿‡å¹³å‡æ³¨æ„åŠ›æœºåˆ¶å¯¹å…¨éƒ¨[è¿›è¡Œèšåˆè®¡ç®—ã€‚å½“è¾“å…¥åºåˆ—é•¿åº¦å¢åŠ æ—¶ï¼Œå¹³å‡å€¼çš„ç»Ÿè®¡æ•ˆåº”ä¼šå‡å¼±ï¼Œå¯¼è‡´æ·±å±‚ç‰¹å¾ä¿¡æ¯é€æ¸è¡°å‡ã€‚åŸºäºæ­¤è§‚å¯Ÿï¼Œç¨€ç–ç”µè·¯ç†è®ºæ¨æµ‹ï¼šä¼ ç»Ÿdenseæ¨¡å‹åœ¨å¤„ç†é•¿åºåˆ—æ—¶ï¼Œå¯èƒ½å°†å®é™…æ·±åº¦ä¸º2çš„ç»“æ„è¯¯åˆ¤ä¸ºæ·±åº¦1çš„ç‰¹å¾è¡¨ç¤ºã€‚</p>
<p>ä¸ºéªŒè¯è¿™ä¸€å‡è®¾ï¼ŒOpenAIè®¾è®¡äº†é’ˆå¯¹é•¿åºåˆ—çš„å¯¹æŠ—æ€§æµ‹è¯•å®éªŒã€‚å®éªŒæ•°æ®æ˜¾ç¤ºï¼Œdenseæ¨¡å‹çš„è¯†åˆ«é”™è¯¯ç‡ä¼šéšç€åºåˆ—é•¿åº¦å¢é•¿è€Œæ˜¾è‘—æé«˜ï¼Œè¯¥ç»“æœä¸ç¨€ç–ç”µè·¯çš„ç†è®ºé¢„æµ‹é«˜åº¦å»åˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83750a87f05d4a609c833d2c217ad017~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=j1MYx4iagkRZahGKF2e%2BKZL8wC8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾7. dense æ¨¡å‹åœ¨é•¿åºåˆ—ä¸Šå‡ºç°ä¸ç¨€ç–ç”µè·¯é¢„æµ‹ä¸€è‡´çš„ context dilution é”™è¯¯æ¨¡å¼ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„ä¾‹å­ï¼šç»“æ„åŒ–è§£é‡Šå¯ä»¥æ¨æ–­æ¨¡å‹çš„å¤±è´¥ã€‚</p>
<p><strong>2.4 ç”µè·¯å¯ä»¥å½±å“ dense æ¨¡å‹</strong></p>
<p>æœ€ç»ˆå®éªŒéªŒè¯äº†æ›´æ˜¾è‘—çš„æ•ˆæœï¼šé€šè¿‡Bridgeæœºåˆ¶ï¼Œç»è¿‡å¯¹é½çš„ç¨€ç–ç”µè·¯èƒ½å¤Ÿå¯¹dense Transformerçš„è¾“å‡ºäº§ç”Ÿç›´æ¥è°ƒæ§ä½œç”¨ã€‚</p>
<p>åœ¨å•åŒå¼•å·ï¼ˆ'ä¸"ï¼‰çš„åŒºåˆ†ä»»åŠ¡ä¸­ï¼Œç ”ç©¶äººå‘˜é€šè¿‡ä¿®æ”¹ç¨€ç–æ¨¡å‹ä¸­è¡¨å¾å¼•å·å·®å¼‚çš„é€šé“æ¿€æ´»çŠ¶æ€ï¼Œå¹¶å°†å…¶å‚æ•°é‡æ–°æ³¨å…¥denseæ¨¡å‹ï¼Œè§‚å¯Ÿåˆ°denseæ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡å‘ˆç°è¿ç»­ä¸”ç¨³å®šçš„å˜åŒ–è¶‹åŠ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f91a3d16b3c4d31ba91dc427f7fc829~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765457920&amp;x-signature=idrIZWT3Is68aomsMQ33SPNsOaA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾8. é€šè¿‡ Bridgeï¼Œå¯¹ç¨€ç–æ¨¡å‹çš„å¯è§£é‡Šæ¿€æ´»è¿›è¡Œè°ƒæ•´åï¼Œå¯è¿ç»­å½±å“ dense æ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡ã€‚</p>
<p>è¿™è¯´æ˜ç”µè·¯ä¸ä»…èƒ½è§£é‡Š dense è¡Œä¸ºï¼Œè¿˜èƒ½é©±åŠ¨ dense è¡Œä¸ºã€‚</p>
<p><strong>03</strong></p>
<p><strong>ç»“è¯­</strong></p>
<p>è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸€ç§åˆ›æ–°çš„å¯è§£é‡Šæ€§æ–¹æ³•è®ºï¼šâ€Œå¹¶éå¯¹dense Transformerè¿›è¡Œäº‹åè§£æâ€Œï¼Œè€Œæ˜¯é€šè¿‡è®­ç»ƒæœºåˆ¶ä½¿å…¶â€Œè‡ªå‘å½¢æˆå¯è§£é‡Šçš„å†…åœ¨æ¶æ„â€Œã€‚</p>
<p>åœ¨æç«¯ç¨€ç–çš„æƒé‡é™åˆ¶æ¡ä»¶ä¸‹ï¼ŒTransformerçš„åŠŸèƒ½åˆ†å¸ƒä»å…¨å±€æ‰©æ•£è½¬å˜ä¸ºèšç„¦äºâ€Œæœ‰é™å…³é”®è·¯å¾„â€Œã€‚è¿™äº›è·¯å¾„â€”â€”å³è®¡ç®—ç”µè·¯â€”â€”å…·å¤‡ä¸‰å¤§ç‰¹æ€§ï¼š</p>
<p>â€Œå¯æå–æ€§â€Œï¼šèƒ½å¤Ÿè¢«å®Œæ•´åˆ†ç¦»</p>
<p>â€Œå¯ç†è§£æ€§â€Œï¼šé€»è¾‘å…³ç³»å¯è¢«äººç±»è®¤çŸ¥</p>
<p>â€Œå¯å¹²é¢„æ€§â€Œï¼šå¯åå‘è°ƒæ§denseæ¨¡å‹çš„å†³ç­–è¡Œä¸º</p>
<p>å®éªŒéªŒè¯è¡¨æ˜ï¼Œé€šè¿‡ç¨€ç–è®­ç»ƒè·å¾—çš„è®¡ç®—ç”µè·¯ï¼š</p>
<p>å‘ˆç°â€Œç¨³å®šçš„å› æœå…³è”â€Œ</p>
<p>èƒ½å‡†ç¡®é¢„åˆ¤denseæ¨¡å‹çš„è¡Œä¸ºæ¨¡å¼</p>
<p>å…·å¤‡â€ŒåŒå‘è°ƒæ§èƒ½åŠ›â€Œï¼ˆæ—¢å¯é¢„æµ‹åˆå¯ä¿®æ­£è¾“å‡ºï¼‰</p>
<p>è¯¥ç ”ç©¶ä¸ºAIå‘å±•å¼€è¾Ÿäº†æ–°è·¯å¾„ï¼šåœ¨æ¨¡å‹è§„æ¨¡æŒç»­æ‰©å¤§çš„è¶‹åŠ¿ä¸‹ï¼Œæˆ‘ä»¬åº”å½“åŒæ­¥æ¢ç´¢â€Œç»“æ„åŒ–ç»„ç»‡â€Œã€â€Œå¯æ§æ€§â€Œå’Œâ€Œå¯éªŒè¯æ€§â€Œçš„å†…åœ¨æœºåˆ¶ï¼Œè€Œéå•çº¯è¿½æ±‚å‚æ•°å¯†åº¦çš„æå‡ã€‚</p>
<p>Transformeræ¶æ„é¦–æ¬¡æ˜¾éœ²å‡ºäº†å…¶â€Œå†…åœ¨ç»“æ„çš„å¯è¾¨è¯†æ€§â€Œï¼Œè¿™ä¸€çªç ´ä¸ºåç»­ç ”ç©¶æä¾›äº†é‡è¦åŸºç¡€ã€‚</p>
<p>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é±¼ç±»è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•]]></title>    <link>https://juejin.cn/post/7579832186880000050</link>    <guid>https://juejin.cn/post/7579832186880000050</guid>    <pubDate>2025-12-04T11:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579832186880000050" data-draft-id="7579814711853645834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é±¼ç±»è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•"/> <meta itemprop="keywords" content="å›¾åƒè¯†åˆ«,æ·±åº¦å­¦ä¹ ,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-04T11:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ziwu"/> <meta itemprop="url" content="https://juejin.cn/user/607373397353726"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é±¼ç±»è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/607373397353726/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ziwu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T11:16:24.000Z" title="Thu Dec 04 2025 11:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»‹ç»</h2>
<p>é±¼ç±»è¯†åˆ«ç³»ç»Ÿï¼ŒåŸºäºTensorFlowæ­å»ºResnet50å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•ï¼Œé€šè¿‡å¯¹30ç§å¸¸è§çš„é±¼ç±»å›¾ç‰‡æ•°æ®é›†ï¼ˆâ€˜å¢¨é±¼â€™ã€â€˜å¤šå®é±¼â€™ã€â€˜å¸¦é±¼â€™ã€â€˜çŸ³æ–‘é±¼â€™ç­‰ï¼‰è¿›è¡Œè®­ç»ƒï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªè¯†åˆ«ç²¾åº¦è¾ƒé«˜çš„æ¨¡å‹ï¼Œç„¶åæ­å»ºWebå¯è§†åŒ–æ“ä½œå¹³å°ã€‚</p>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li>é¡¹ç›®å‰ç«¯ä½¿ç”¨Htmlã€CSSã€BootStrapæ­å»ºç•Œé¢ã€‚</li>
<li>åç«¯åŸºäºDjangoå¤„ç†é€»è¾‘è¯·æ±‚</li>
<li>åŸºäºAjaxå®ç°å‰åç«¯æ•°æ®é€šä¿¡</li>
</ul>
<p><strong>é€‰é¢˜èƒŒæ™¯ä¸æ„ä¹‰</strong>ï¼š
éšç€è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒè¯†åˆ«ç³»ç»Ÿåœ¨æ°´äº§å…»æ®–ã€æ¸”ä¸šç®¡ç†åŠæµ·æ´‹ç”Ÿæ€ç ”ç©¶ç­‰é¢†åŸŸå±•ç°å‡ºé‡è¦åº”ç”¨ä»·å€¼ã€‚ä¼ ç»Ÿé±¼ç±»è¯†åˆ«ä¾èµ–äººå·¥ç»éªŒï¼Œæ•ˆç‡è¾ƒä½ä¸”æ˜“å‡ºé”™ã€‚æœ¬é¡¹ç›®åŸºäºTensorFlowæ¡†æ¶ï¼Œé‡‡ç”¨ResNet50å·ç§¯ç¥ç»ç½‘ç»œæ„å»ºé«˜æ•ˆè¯†åˆ«æ¨¡å‹ï¼Œé€šè¿‡å¯¹åŒ…å«å¢¨é±¼ã€å¤šå®é±¼ã€å¸¦é±¼ã€çŸ³æ–‘é±¼ç­‰30ç§å¸¸è§é±¼ç±»å›¾åƒæ•°æ®é›†çš„è®­ç»ƒï¼Œè·å¾—è¾ƒé«˜ç²¾åº¦åˆ†ç±»èƒ½åŠ›ã€‚ä¸ºè¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ä¸äº¤äº’æ€§ï¼Œé¡¹ç›®ç»“åˆDjangoåç«¯æ¡†æ¶ä¸HTMLã€CSSã€Bootstrapå‰ç«¯æŠ€æœ¯ï¼Œå¹¶åˆ©ç”¨Ajaxå®ç°å¼‚æ­¥é€šä¿¡ï¼Œæ­å»ºäº†ä¸€å¥—åŠŸèƒ½å®Œæ•´çš„Webå¯è§†åŒ–æ“ä½œå¹³å°ï¼Œä¸ºé±¼ç±»è¯†åˆ«æä¾›ä¾¿æ·ã€ç›´è§‚çš„åº”ç”¨å·¥å…·ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç³»ç»Ÿæ•ˆæœå›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84edcd2c41e54d2aae390ca6b7f646c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765451783&amp;x-signature=4%2F2woTwFj7uVxX21DsjTpOSfKi0%3D" alt="å›¾ç‰‡" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44128350c4b24ec895046fec5892a4e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765451783&amp;x-signature=L7dlv1HywS4n5lSbjvIznHpX8dQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ¼”ç¤ºè§†é¢‘ and å®Œæ•´ä»£ç  and å®‰è£…</h2>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fziwupy.cn%2Fp%2FWoxehH" target="_blank" title="https://ziwupy.cn/p/WoxehH" ref="nofollow noopener noreferrer">ziwupy.cn/p/WoxehH</a></p>
<h2 data-id="heading-3">å››ã€å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•ä»‹ç»</h2>
<p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯æ·±åº¦å­¦ä¹ é¢†åŸŸä¸­ä¸“é—¨ç”¨äºå¤„ç†å…·æœ‰ç½‘æ ¼ç»“æ„æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰çš„æ ¸å¿ƒç®—æ³•ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸‰ä¸ªå…³é”®æ“ä½œæ¥æ¨¡æ‹Ÿäººçœ¼å¯¹å›¾åƒçš„å±€éƒ¨æ„ŸçŸ¥æœºåˆ¶ï¼š</p>
<ol>
<li><strong>å·ç§¯</strong>ï¼šä½¿ç”¨å¤šä¸ªå¯å­¦ä¹ çš„â€œæ»¤æ³¢å™¨â€åœ¨è¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨ï¼Œæå–å±€éƒ¨ç‰¹å¾ï¼ˆå¦‚è¾¹ç¼˜ã€çº¹ç†ï¼‰ã€‚è¿™ç§å±€éƒ¨è¿æ¥å’Œæƒå€¼å…±äº«çš„ç‰¹æ€§æå¤§åœ°å‡å°‘äº†å‚æ•°æ•°é‡ã€‚</li>
<li><strong>æ± åŒ–</strong>ï¼šå¯¹å·ç§¯åçš„ç‰¹å¾å›¾è¿›è¡Œä¸‹é‡‡æ ·ï¼ˆå¦‚æœ€å¤§æ± åŒ–ï¼‰ï¼Œä¿ç•™ä¸»è¦ç‰¹å¾çš„åŒæ—¶å‡å°‘æ•°æ®ç»´åº¦ï¼Œå¢å¼ºæ¨¡å‹å¯¹å¾®å°ä½ç§»çš„é²æ£’æ€§ã€‚</li>
<li><strong>å…¨è¿æ¥</strong>ï¼šå°†æœ€ç»ˆæå–åˆ°çš„äºŒç»´ç‰¹å¾å›¾â€œå±•å¹³â€æˆä¸€ç»´å‘é‡ï¼Œå¹¶é€šè¿‡ä¼ ç»Ÿçš„å…¨è¿æ¥å±‚è¿›è¡Œç»¼åˆåˆ¤æ–­ï¼Œè¾“å‡ºåˆ†ç±»ç»“æœã€‚</li>
</ol>
<p>é€šè¿‡å †å å¤šä¸ªâ€œå·ç§¯-æ± åŒ–â€å±‚ï¼ŒCNNèƒ½å¤Ÿä»åº•å±‚åˆ°é«˜å±‚é€çº§æå–å¹¶ç»„åˆç‰¹å¾ï¼Œæœ€ç»ˆå®ç°é«˜æ•ˆçš„å›¾åƒè¯†åˆ«ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨TensorFlowçš„Keras APIæ„å»ºä¸€ä¸ªç®€å•CNNæ¨¡å‹ï¼Œå¹¶åœ¨MNISTæ‰‹å†™æ•°å­—æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒçš„ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> layers, models

<span class="hljs-comment"># 1. åŠ è½½å¹¶é¢„å¤„ç†æ•°æ®ï¼ˆMNISTæ•°æ®é›†ï¼‰</span>
(train_images, train_labels), (test_images, test_labels) = tf.keras.datasets.mnist.load_data()
train_images = train_images.reshape((<span class="hljs-number">60000</span>, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>)).astype(<span class="hljs-string">'float32'</span>) / <span class="hljs-number">255</span>  <span class="hljs-comment"># å½’ä¸€åŒ–å¹¶è°ƒæ•´å½¢çŠ¶ä¸º (æ ·æœ¬æ•°ï¼Œé«˜ï¼Œå®½ï¼Œé€šé“æ•°)</span>
test_images = test_images.reshape((<span class="hljs-number">10000</span>, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>)).astype(<span class="hljs-string">'float32'</span>) / <span class="hljs-number">255</span>

<span class="hljs-comment"># 2. æ„å»ºCNNæ¨¡å‹</span>
model = models.Sequential([
    <span class="hljs-comment"># ç¬¬ä¸€å±‚å·ç§¯å’Œæ± åŒ–</span>
    layers.Conv2D(<span class="hljs-number">32</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), activation=<span class="hljs-string">'relu'</span>, input_shape=(<span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>)),
    layers.MaxPooling2D((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)),
    <span class="hljs-comment"># ç¬¬äºŒå±‚å·ç§¯å’Œæ± åŒ–</span>
    layers.Conv2D(<span class="hljs-number">64</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), activation=<span class="hljs-string">'relu'</span>),
    layers.MaxPooling2D((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)),
    <span class="hljs-comment"># å°†ç‰¹å¾å›¾å±•å¹³ï¼Œæ¥å…¥å…¨è¿æ¥å±‚</span>
    layers.Flatten(),
    layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">'relu'</span>),
    layers.Dense(<span class="hljs-number">10</span>, activation=<span class="hljs-string">'softmax'</span>) <span class="hljs-comment"># è¾“å‡º10ä¸ªç±»åˆ«çš„æ¦‚ç‡</span>
])

<span class="hljs-comment"># 3. ç¼–è¯‘æ¨¡å‹</span>
model.<span class="hljs-built_in">compile</span>(optimizer=<span class="hljs-string">'adam'</span>,
              loss=<span class="hljs-string">'sparse_categorical_crossentropy'</span>,
              metrics=[<span class="hljs-string">'accuracy'</span>])

<span class="hljs-comment"># 4. è®­ç»ƒæ¨¡å‹</span>
model.fit(train_images, train_labels, epochs=<span class="hljs-number">5</span>, batch_size=<span class="hljs-number">64</span>)

<span class="hljs-comment"># 5. è¯„ä¼°æ¨¡å‹</span>
test_loss, test_acc = model.evaluate(test_images, test_labels, verbose=<span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'\næµ‹è¯•å‡†ç¡®ç‡ï¼š<span class="hljs-subst">{test_acc}</span>'</span>)
</code></pre>
<p>è¿™æ®µä»£ç æ¼”ç¤ºäº†CNNæ„å»ºçš„æ ¸å¿ƒæµç¨‹ï¼šæ•°æ®å‡†å¤‡ã€æ¨¡å‹æ­å»ºã€è®­ç»ƒä¸è¯„ä¼°ã€‚æ¨¡å‹ç»“æ„åŒ…å«ä¸¤ä¸ªå·ç§¯-æ± åŒ–å±‚ï¼Œç”¨äºæå–ä»ç®€å•åˆ°å¤æ‚çš„ç‰¹å¾ï¼Œæœ€åé€šè¿‡å…¨è¿æ¥å±‚è¿›è¡Œåˆ†ç±»ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼ˆå¦‚æ‚¨çš„é±¼ç±»è¯†åˆ«é¡¹ç›®ï¼‰ï¼Œåªéœ€å°†æ­¤å¤„çš„MNISTæ•°æ®æ›¿æ¢ä¸ºæ‚¨çš„é±¼ç±»å›¾ç‰‡æ•°æ®é›†ï¼Œå¹¶å¯èƒ½è°ƒæ•´ç½‘ç»œç»“æ„ï¼ˆå¦‚ä½¿ç”¨ResNet50ç­‰æ›´æ·±çš„ç½‘ç»œï¼‰å’Œè¾“å…¥å°ºå¯¸ï¼Œå³å¯å®ç°ç‰¹å®šåœºæ™¯çš„å›¾åƒè¯†åˆ«ä»»åŠ¡ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66ab32219b7444159cd4f23ec12ac27f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765451783&amp;x-signature=NPaClGxGuSFcER7tjbr66bBm6S4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç»“æ„è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>è¾“å…¥é¢„å¤„ç†</strong>ï¼šå¯¹åŸå§‹å›¾åƒè¿›è¡Œåˆå§‹å·ç§¯å’Œæ± åŒ–æ“ä½œï¼Œæå–åŸºç¡€è§†è§‰ç‰¹å¾ã€‚</li>
<li><strong>æ®‹å·®ä¸»å¹²</strong>ï¼šè¿™æ˜¯ResNetçš„æ ¸å¿ƒæ€æƒ³ï¼Œé€šè¿‡è·³è·ƒè¿æ¥é¿å…æ¢¯åº¦æ¶ˆå¤±ï¼Œä½¿æ·±å±‚ç½‘ç»œè®­ç»ƒæˆä¸ºå¯èƒ½ã€‚</li>
<li><strong>å—çº§å †å </strong>ï¼šæ•´ä¸ªç½‘ç»œç”±4ç§ä¸åŒç»“æ„çš„æ®‹å·®å—ï¼ˆConv Blockå’ŒIdentity Blockï¼‰æŒ‰ç‰¹å®šæ¯”ä¾‹ï¼ˆ3,4,6,3ï¼‰ç»„åˆè€Œæˆï¼Œåˆ†åˆ«è´Ÿè´£ä¸‹é‡‡æ ·å’Œæ·±åº¦ç‰¹å¾æå–ã€‚</li>
<li><strong>åˆ†ç±»è¾“å‡º</strong>ï¼šæœ€åé€šè¿‡å…¨å±€å¹³å‡æ± åŒ–å°†ç©ºé—´ç‰¹å¾è½¬æ¢ä¸ºå‘é‡ï¼Œç»å…¨è¿æ¥å±‚è¾“å‡ºç±»åˆ«æ¦‚ç‡ã€‚</li>
</ol>
<p>è¿™ç§å››æ¨¡å—åˆ’åˆ†æ—¢ä¿ç•™äº†ResNet50çš„å…³é”®æ¶æ„ç‰¹å¾ï¼ˆæ®‹å·®è¿æ¥ã€å—çº§è®¾è®¡ï¼‰ï¼Œåˆé¿å…äº†è¿‡äºç»†èŠ‚çš„æŠ€æœ¯æè¿°ï¼Œæ›´ç¬¦åˆç®€æ˜æµç¨‹å›¾çš„è¦æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå·¥å…·äº’ä¸å…¼å®¹ï¼ŸMCPåè®®è®©æ‰€æœ‰å·¥å…·æ— ç¼å¯¹æ¥ï¼ˆé™„å®æˆ˜ï¼‰]]></title>    <link>https://juejin.cn/post/7579800429376585778</link>    <guid>https://juejin.cn/post/7579800429376585778</guid>    <pubDate>2025-12-04T11:23:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579800429376585778" data-draft-id="7579472170905157682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå·¥å…·äº’ä¸å…¼å®¹ï¼ŸMCPåè®®è®©æ‰€æœ‰å·¥å…·æ— ç¼å¯¹æ¥ï¼ˆé™„å®æˆ˜ï¼‰"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,AIGC,MCP"/> <meta itemprop="datePublished" content="2025-12-04T11:23:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå·¥å…·äº’ä¸å…¼å®¹ï¼ŸMCPåè®®è®©æ‰€æœ‰å·¥å…·æ— ç¼å¯¹æ¥ï¼ˆé™„å®æˆ˜ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T11:23:21.000Z" title="Thu Dec 04 2025 11:23:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é‚£ä¸ªè®©æˆ‘æŠ“ç‹‚ä¸¤å¤©çš„é›†æˆé—®é¢˜</h2>
<p>è¯´èµ·æ¥æœ‰ç‚¹ä¸¢äººï¼Œå»å¹´æˆ‘æƒ³ç»™Claudeæ¥å…¥å…¬å¸çš„GitHubä»“åº“ï¼Œå¿ƒæƒ³ç€è®©AIå¸®æˆ‘åšä»£ç reviewï¼Œè¿™æ•ˆç‡å¾—æå‡å¤šå°‘å•Šã€‚ç»“æœå‘¢ï¼Ÿæˆ‘æ•´æ•´æŠ˜è…¾äº†ä¸¤å¤©ï¼Œå†™äº†å¥½å‡ ç™¾è¡Œé€‚é…ä»£ç ï¼Œdebugåˆ°å‡Œæ™¨ä¸‰ç‚¹ï¼Œæœ€åè¿˜æ˜¯ä¸€å †è«åå…¶å¦™çš„bugã€‚æ›´å´©æºƒçš„æ˜¯ï¼Œåˆšæå®šGitHubï¼Œè€æ¿åˆè®©æˆ‘æ¥Slackåšæ¶ˆæ¯å¤„ç†ï¼Œè¿™æ„å‘³ç€åˆå¾—ä»å¤´æ¥ä¸€éã€‚
æˆ‘å½“æ—¶çœŸæƒ³éª‚äººâ€”â€”ä¸ºå•¥æ¯ä¸ªAIå·¥å…·éƒ½è¦è‡ªå·±çš„ä¸€å¥—è¿æ¥æ–¹å¼ï¼Ÿä¸ºå•¥æ²¡æœ‰ç»Ÿä¸€æ ‡å‡†ï¼Ÿ
ç›´åˆ°2024å¹´11æœˆï¼ŒAnthropicæ¨å‡ºäº†MCPï¼ˆModel Context Protocolï¼‰ã€‚ä¸€å¼€å§‹æˆ‘ä¹Ÿæ²¡å½“å›äº‹ï¼Œå¿ƒæƒ³"åˆæ˜¯ä¸€ä¸ªæ–°åè®®ï¼Œåˆè¦å­¦æ–°ä¸œè¥¿ï¼Œçƒ¦æ­»äº†"ã€‚ä½†å½“æˆ‘çœ‹åˆ°2025å¹´3æœˆOpenAIä¹Ÿå®˜å®£é‡‡çº³è¿™ä¸ªæ ‡å‡†æ—¶ï¼Œæˆ‘å°±çŸ¥é“è¿™äº‹å„¿ä¸ç®€å•äº†ã€‚ä¸¤ä¸ªAIå·¨å¤´åŒæ—¶æŠ¼æ³¨ä¸€ä¸ªåè®®ï¼Œè¿™åœ¨ä¸šç•Œå¯ä¸å¤šè§ã€‚
ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³æŠŠæˆ‘è¿™å‡ ä¸ªæœˆç ”ç©¶MCPçš„å¿ƒå¾—åˆ†äº«ç»™ä½ ã€‚ä¸æ˜¯é‚£ç§ç…§æ¬å®˜æ–¹æ–‡æ¡£çš„æ³›æ³›ä»‹ç»ï¼Œè€Œæ˜¯çœŸæ­£å¸¦ä½ ææ‡‚MCPæ˜¯ä»€ä¹ˆï¼Œæ›´é‡è¦çš„æ˜¯â€”â€”æ€ä¹ˆç”¨å®ƒè§£å†³å®é™…é—®é¢˜ã€‚ç›¸ä¿¡æˆ‘ï¼Œæ¯”ä½ æƒ³è±¡çš„ç®€å•å¤šäº†ã€‚</p>
<h2 data-id="heading-1">MCPåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€ä¸ªUSBæ¥å£çš„æ•…äº‹</h2>
<h3 data-id="heading-2">å…ˆè¯´ä¸ªä½ èƒ½æ‡‚çš„ç±»æ¯”</h3>
<p>æˆ‘ç‰¹åˆ«å–œæ¬¢ç”¨USBæ¥å£æ¥è§£é‡ŠMCPã€‚ä½ è¿˜è®°å¾—2000å¹´å·¦å³çš„ç”µè„‘å—ï¼Ÿè¿ä¸ªé¼ æ ‡è¦PS/2æ¥å£ï¼Œé”®ç›˜åˆæ˜¯å¦ä¸€ä¸ªå£ï¼Œæ‰“å°æœºè¦å¹¶å£ï¼Œæ‰«æä»ªè¦SCSIï¼Œæ¯å°ç”µè„‘èƒŒåå¯†å¯†éº»éº»å…¨æ˜¯å„ç§æ’æ§½ã€‚æ¢ä¸ªè®¾å¤‡å°±å¾—æ‰¾å¯¹åº”çš„æ¥å£ï¼Œæœ‰æ—¶å€™æ¥å£ä¸å¤Ÿè¿˜å¾—ä¹°æ‰©å±•å¡ã€‚
åæ¥USBå‡ºç°äº†ã€‚ä¸€ä¸ªæ¥å£ï¼Œå•¥è®¾å¤‡éƒ½èƒ½æ’ã€‚é¼ æ ‡ã€é”®ç›˜ã€Uç›˜ã€æ‰“å°æœºã€æ‰‹æœºï¼Œç»Ÿç»Ÿä¸€ä¸ªUSBå£æå®šã€‚è¿™ç®€æ´ç¨‹åº¦ï¼Œç®€ç›´æ˜¯è´¨çš„é£è·ƒã€‚
<strong>MCPæƒ³åšçš„å°±æ˜¯è¿™ä»¶äº‹</strong>â€”â€”æˆä¸ºAIå·¥å…·ä¸–ç•Œçš„"USBæ¥å£"ã€‚
å…·ä½“æ¥è¯´ï¼ŒMCPæ˜¯ä¸€ä¸ª<strong>å¼€æ”¾çš„AIå·¥å…·äº’æ“ä½œæ ‡å‡†åè®®</strong>ã€‚æ¢ä¸ªæ›´æ¥åœ°æ°”çš„è¯´æ³•ï¼šå®ƒè®©AIå·¥å…·å’Œå„ç§æ•°æ®æºä¹‹é—´çš„è¿æ¥å˜å¾—æ ‡å‡†åŒ–ã€ç®€å•åŒ–ã€‚ä½ ä¸ç”¨å†ä¸ºæ¯ä¸ªæ•°æ®æºå†™ä¸€å¥—é€‚é…ä»£ç ï¼Œåªè¦æ•°æ®æºæä¾›äº†MCP Serverï¼Œä»»ä½•æ”¯æŒMCPçš„AIå·¥å…·éƒ½èƒ½ç›´æ¥è¿ä¸Šã€‚</p>
<h3 data-id="heading-3">çœ‹çœ‹è¿™äº›æ•°å­—</h3>
<p>æˆ‘ç‰¹æ„æŸ¥äº†ä¸€äº›æ•°æ®ï¼ŒæŒºéœ‡æ’¼çš„ï¼š</p>
<ul>
<li><strong>2024å¹´11æœˆ</strong>ï¼ŒAnthropicæ¨å‡ºMCP</li>
<li><strong>2025å¹´3æœˆ</strong>ï¼ŒOpenAIå®˜æ–¹é‡‡çº³ï¼Œç›´æ¥é›†æˆè¿›ChatGPTå’ŒAgents SDK</li>
<li>æˆªè‡³<strong>2025å¹´2æœˆ</strong>ï¼ŒHugging Faceç¤¾åŒºå·²ç»æœ‰<strong>1000å¤šä¸ªMCPæœåŠ¡å™¨</strong></li>
<li>GitHubä¸Šçš„awesome-mcp-serversé¡¹ç›®æ‹¿äº†<strong>3ä¸‡å¤šä¸ªStars</strong>ï¼Œæ”¶å½•äº†3000å¤šä¸ªæœåŠ¡å™¨
æ‰åŠå¹´æ—¶é—´å°±è¿™ä¸ªå¢é•¿é€Ÿåº¦ï¼Œè¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜å¼€å‘è€…ç¤¾åŒºçœŸçš„ã€çœŸçš„å¾ˆéœ€è¦è¿™æ ·ä¸€ä¸ªæ ‡å‡†ã€‚</li>
</ul>
<h3 data-id="heading-4">åˆ°åº•è§£å†³äº†ä»€ä¹ˆå®é™…é—®é¢˜ï¼Ÿ</h3>
<p>è®©æˆ‘è¯´å¾—æ›´ç›´ç™½ç‚¹ï¼ŒMCPè§£å†³çš„é—®é¢˜çœŸçš„å¾ˆå®åœ¨ï¼š
<strong>é—®é¢˜ä¸€ï¼šé‡å¤åŠ³åŠ¨å¤ªå¤š</strong>
ä»¥å‰æ¯ä¸ªAIå·¥å…·éƒ½è¦å•ç‹¬å¯¹æ¥æ•°æ®æºã€‚ä½ è¦æ¥GitHubï¼Œå†™ä¸€å¥—ä»£ç ï¼›è¦æ¥Slackï¼Œå†å†™ä¸€å¥—ï¼›è¦æ¥æ•°æ®åº“ï¼Œåˆæ˜¯ä¸€å¥—ã€‚æˆ‘é‚£ä¼šå„¿ç»´æŠ¤äº†7ä¸ªä¸åŒçš„è¿æ¥å™¨ï¼Œæ¯æ¬¡æœ‰æ›´æ–°éƒ½å¾—æ”¹7ä¸ªåœ°æ–¹ï¼Œæƒ³æƒ³éƒ½å¤´ç–¼ã€‚
<strong>é—®é¢˜äºŒï¼šAIå¤Ÿèªæ˜ä½†æ•°æ®å¤Ÿä¸ç€</strong>
AIå·¥å…·è¢«éš”ç¦»åœ¨è‡ªå·±çš„å°ä¸–ç•Œé‡Œï¼Œè®¿é—®ä¸äº†ä½ çœŸæ­£éœ€è¦çš„æ•°æ®ã€‚æƒ³è®©AIè¯»å–ä½ çš„é¡¹ç›®æ–‡æ¡£ï¼Ÿæƒ³è®©å®ƒæŸ¥è¯¢æ•°æ®åº“ï¼Ÿæƒ³è®©å®ƒåˆ†æä½ çš„è®¢å•æ•°æ®ï¼Ÿå¯¹ä¸èµ·ï¼Œæ¯æ¬¡éƒ½è¦å†™é¢å¤–çš„èƒ¶æ°´ä»£ç ã€‚
<strong>é—®é¢˜ä¸‰ï¼šç”Ÿæ€å‰²è£‚æµªè´¹æ—¶é—´</strong>
ä½ ä¸ºClaudeå†™çš„è¿æ¥å™¨ï¼ŒGPTç”¨ä¸äº†ï¼›ä¸ºGPTå†™çš„ï¼Œåˆä¸èƒ½ç»™å…¶ä»–AIå·¥å…·ç”¨ã€‚å¤§å®¶éƒ½åœ¨é‡å¤é€ è½®å­ï¼Œæ˜æ˜æ˜¯åŒæ ·çš„åŠŸèƒ½ï¼Œå´è¦å†™Néä»£ç ã€‚
MCPçš„å‡ºç°ï¼Œå°±æ˜¯è¦æŠŠè¿™äº›é—®é¢˜ä¸€æ¬¡æ€§å¹²æ‰ã€‚</p>
<h2 data-id="heading-5">MCPçš„æ ¸å¿ƒæ¶æ„ï¼šç®€æ´åˆ°è®©äººæƒŠè®¶</h2>
<h3 data-id="heading-6">ä¸‰å±‚ç»“æ„ï¼Œå°±è¿™ä¹ˆç®€å•</h3>
<p>æˆ‘ç¬¬ä¸€æ¬¡çœ‹MCPçš„æ¶æ„å›¾æ—¶ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯â€”â€”ç®€æ´ã€‚æ•´ä¸ªç³»ç»Ÿå°±ä¸‰å±‚ï¼Œæ¸…æ¸…æ¥šæ¥šï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MCP Hostï¼ˆå®¿ä¸»åº”ç”¨ï¼‰               â”‚
â”‚    - æ¯”å¦‚ Claude Desktopã€ChatGPT     â”‚
â”‚    - è´Ÿè´£ç®¡ç†è¿æ¥å’Œç”¨æˆ·ç•Œé¢           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ JSON-RPC <span class="hljs-number">2.0</span> é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MCP <span class="hljs-built_in">Client</span>ï¼ˆå®¢æˆ·ç«¯ï¼‰               â”‚
â”‚    - è´Ÿè´£å’ŒæœåŠ¡å™¨é€šä¿¡                 â”‚
â”‚    - å‘èµ·è¯·æ±‚ã€å¤„ç†å“åº”               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ JSON-RPC <span class="hljs-number">2.0</span> é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MCP <span class="hljs-built_in">Server</span>ï¼ˆæœåŠ¡å™¨ï¼‰               â”‚
â”‚    - Resourcesï¼ˆèµ„æºï¼‰                â”‚
â”‚    - Toolsï¼ˆå·¥å…·ï¼‰                    â”‚
â”‚    - Promptsï¼ˆæç¤ºï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çœŸçš„å¾ˆèªæ˜ã€‚Hostç®¡ç†æ•´ä½“ï¼ŒClientè´Ÿè´£é€šä¿¡ï¼ŒServeræä¾›å…·ä½“èƒ½åŠ›ã€‚èŒè´£æ¸…æ™°ï¼Œè€¦åˆåº¦ä½ã€‚</p>
<h3 data-id="heading-7">Serveræä¾›ä¸‰ç§æ ¸å¿ƒèƒ½åŠ›</h3>
<p>MCP Serverä¸»è¦ç»™AIå·¥å…·æä¾›ä¸‰ç§ä¸œè¥¿ï¼š
<strong>1. Resourcesï¼ˆèµ„æºï¼‰</strong>
è¿™å°±æ˜¯æ•°æ®æºã€‚æ–‡ä»¶å†…å®¹ã€æ•°æ®åº“è®°å½•ã€APIè¿”å›çš„æ•°æ®ç­‰ç­‰ã€‚AIå·¥å…·å¯ä»¥é€šè¿‡å®ƒè¯»å–å„ç§ç»“æ„åŒ–æ•°æ®ã€‚
æ¯”å¦‚GitHubçš„MCP Serverå¯ä»¥æŠŠä»“åº“ä¿¡æ¯ã€PRåˆ—è¡¨ã€Issueè¯¦æƒ…éƒ½ä½œä¸ºResourcesæš´éœ²å‡ºæ¥ã€‚AIä¸€è°ƒç”¨ï¼Œæ•°æ®å°±æ¥äº†ã€‚
<strong>2. Toolsï¼ˆå·¥å…·ï¼‰</strong>
è¿™æ˜¯çœŸæ­£çš„æ“ä½œèƒ½åŠ›ã€‚AIå¯ä»¥è°ƒç”¨è¿™äº›å·¥å…·æ‰§è¡Œå®é™…æ“ä½œâ€”â€”åˆ›å»ºæ–‡ä»¶ã€å‘é€æ¶ˆæ¯ã€æ›´æ–°æ•°æ®åº“ç­‰ç­‰ã€‚
ä¸¾ä¸ªä¾‹å­ï¼ŒSlackçš„MCP Serverä¼šæä¾›"å‘é€æ¶ˆæ¯"ã€"åˆ›å»ºé¢‘é“"è¿™æ ·çš„å·¥å…·ã€‚AIä¸åªæ˜¯è¯»æ•°æ®ï¼Œè¿˜èƒ½çœŸæ­£å¹²æ´»ã€‚
<strong>3. Promptsï¼ˆæç¤ºï¼‰</strong>
è¿™ä¸ªæœ‰ç‚¹ç‰¹åˆ«ï¼Œå®ƒæ˜¯é¢„å®šä¹‰çš„æç¤ºæ¨¡æ¿ã€‚å¯ä»¥ç†è§£ä¸ºä¸€äº›å¸¸ç”¨ä»»åŠ¡çš„"å¿«æ·æ–¹å¼"ï¼Œå¸®åŠ©AIæ›´å¥½åœ°ç†è§£å’Œæ‰§è¡Œç‰¹å®šå·¥ä½œã€‚
æ¯”å¦‚ä»£ç å®¡æŸ¥çš„MCP Serverå¯èƒ½ä¼šæä¾›"ä»£ç è´¨é‡æ£€æŸ¥"ã€"å®‰å…¨æ¼æ´æ‰«æ"è¿™æ ·çš„Promptæ¨¡æ¿ï¼ŒAIä¸€è°ƒç”¨å°±çŸ¥é“è¯¥æ€ä¹ˆåšã€‚</p>
<h3 data-id="heading-8">é€šä¿¡æ–¹å¼å¾ˆæˆç†Ÿ</h3>
<p>é¡ºä¾¿è¯´ä¸€å¥ï¼ŒMCPç”¨çš„æ˜¯JSON-RPC 2.0åè®®æ¥é€šä¿¡ã€‚è¿™ä¸ªé€‰æ‹©æŒºèªæ˜çš„ï¼ŒJSON-RPCæ˜¯ä¸ªæˆç†Ÿæ ‡å‡†ï¼Œç®€å•ã€å¯é ã€å®¹æ˜“è°ƒè¯•ã€‚è€Œä¸”å®ƒæ”¯æŒ<strong>åŒå‘é€šä¿¡</strong>ï¼Œä¸åªæ˜¯Clientèƒ½é—®Serverï¼ŒServerä¹Ÿèƒ½ä¸»åŠ¨æ¨é€ä¿¡æ¯ç»™Clientã€‚è¿™åœ¨å¾ˆå¤šå®æ—¶åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h3 data-id="heading-9">å’Œä»¥å‰çš„æ–¹å¼å¯¹æ¯”ä¸€ä¸‹</h3>
<p>ä»¥å‰çš„é›†æˆæ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">Claude â”€â”€â”
<span class="hljs-code">         â”œâ”€â”€â†’ GitHub APIï¼ˆè¦å†™é€‚é…ä»£ç ï¼‰
GPT   â”€â”€â”â”‚
        â”‚â””â”€â”€â†’ Slack APIï¼ˆè¦å†™é€‚é…ä»£ç ï¼‰
        â””â”€â”€â”€â†’ Postgresï¼ˆè¦å†™é€‚é…ä»£ç ï¼‰
</span></code></pre>
<p>æ¯ä¸ªAIå·¥å…·éƒ½è¦å•ç‹¬å¯¹æ¥æ¯ä¸ªæ•°æ®æºï¼Œæ˜¯ä¸ª<strong>NÃ—Mçš„å¤æ‚åº¦</strong>ã€‚10ä¸ªAIå·¥å…·å¯¹æ¥10ä¸ªæ•°æ®æºï¼Œå°±æ˜¯100å¥—ä»£ç ã€‚
ç”¨äº†MCPä¹‹åï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Claude â”€â”€â”
GPT   â”€â”€â”¼â”€â”€â†’ MCP <span class="hljs-built_in">Client</span> â”€â”€â”¬â”€â”€â†’ GitHub MCP <span class="hljs-built_in">Server</span>
Geminiâ”€â”€â”˜                  â”œâ”€â”€â†’ Slack MCP <span class="hljs-built_in">Server</span>
                          â””â”€â”€â†’ Postgres MCP <span class="hljs-built_in">Server</span>
</code></pre>
<p>AIå·¥å…·åªéœ€è¦å®ç°MCP Clientï¼Œå°±èƒ½è¿æ¥æ‰€æœ‰çš„MCP Serverã€‚æ•°æ®æºåªéœ€è¦å®ç°MCP Serverï¼Œå°±èƒ½è¢«æ‰€æœ‰AIå·¥å…·ä½¿ç”¨ã€‚å¤æ‚åº¦é™åˆ°äº†<strong>N+M</strong>ã€‚10ä¸ªå·¥å…·åŠ 10ä¸ªæ•°æ®æºï¼Œåªéœ€è¦20å¥—ä»£ç ã€‚
è¿™ä¸ªå·®å¼‚ï¼Œæ•°æ®æºè¶Šå¤šè¶Šæ˜æ˜¾ã€‚</p>
<h2 data-id="heading-10">å®æˆ˜ï¼šåŠ¨æ‰‹åšä¸ªå¤©æ°”æŸ¥è¯¢MCP Server</h2>
<p>å¥½äº†ï¼Œç†è®ºè®²å¤Ÿäº†ï¼Œç°åœ¨è¯¥æ’¸èµ·è¢–å­å¹²æ´»äº†ã€‚æˆ‘ä»¬æ¥åšä¸ªç®€å•ä½†å®Œæ•´çš„ä¾‹å­â€”â€”ä¸€ä¸ªå¤©æ°”æŸ¥è¯¢æœåŠ¡ã€‚åˆ«æ‹…å¿ƒï¼ŒçœŸçš„ä¸éš¾ï¼Œæˆ‘å½“æ—¶5åˆ†é’Ÿå°±è·‘é€šäº†ã€‚</p>
<h3 data-id="heading-11">å‡†å¤‡å·¥ä½œ</h3>
<p>ä½ éœ€è¦ï¼š</p>
<ul>
<li>Python 3.10æˆ–æ›´é«˜ï¼ˆåº”è¯¥æ—©è£…äº†å§ï¼‰</li>
<li>FastMCPæ¡†æ¶ï¼ˆå®˜æ–¹æ¨èçš„Pythonæ¡†æ¶ï¼Œè¶…çº§å¥½ç”¨ï¼‰
å®‰è£…å¾ˆç®€å•ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">pip install fastmcp
</code></pre>
<h3 data-id="heading-12">å®Œæ•´ä»£ç æ¥äº†</h3>
<p>æˆ‘å†™äº†ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œä»£ç ä¸å¤šï¼Œä½†åŠŸèƒ½é½å…¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastmcp <span class="hljs-keyword">import</span> FastMCP
<span class="hljs-keyword">import</span> httpx
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
mcp = FastMCP(<span class="hljs-string">"Weather Service"</span>)
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""
    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯
    Args:
        city: åŸå¸‚åç§°ï¼ˆå¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·ï¼‰
    Returns:
        åŒ…å«å¤©æ°”ä¿¡æ¯çš„å­—å…¸
    """</span>
    <span class="hljs-comment"># è¿™é‡Œç”¨çš„æ˜¯OpenWeatherMapçš„å…è´¹API</span>
    <span class="hljs-comment"># å®é™…ä½¿ç”¨æ—¶ä½ å¾—å»ç”³è¯·ä¸ªAPI Keyï¼ˆå¾ˆå¿«ï¼Œå…è´¹çš„ï¼‰</span>
    API_KEY = <span class="hljs-string">"your_api_key_here"</span>
    url = <span class="hljs-string">f"http://api.openweathermap.org/data/2.5/weather"</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        <span class="hljs-keyword">try</span>:
            response = <span class="hljs-keyword">await</span> client.get(
                url,
                params={
                    <span class="hljs-string">"q"</span>: city,
                    <span class="hljs-string">"appid"</span>: API_KEY,
                    <span class="hljs-string">"units"</span>: <span class="hljs-string">"metric"</span>,  <span class="hljs-comment"># ç”¨æ‘„æ°åº¦ï¼Œä¸ç„¶æ˜¯åæ°åº¦</span>
                    <span class="hljs-string">"lang"</span>: <span class="hljs-string">"zh_cn"</span>     <span class="hljs-comment"># ä¸­æ–‡æè¿°</span>
                }
            )
            response.raise_for_status()
            data = response.json()
            <span class="hljs-comment"># æ•´ç†è¿”å›æ•°æ®ï¼ŒæŒ‘é‡è¦çš„</span>
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"city"</span>: data[<span class="hljs-string">"name"</span>],
                <span class="hljs-string">"temperature"</span>: data[<span class="hljs-string">"main"</span>][<span class="hljs-string">"temp"</span>],
                <span class="hljs-string">"feels_like"</span>: data[<span class="hljs-string">"main"</span>][<span class="hljs-string">"feels_like"</span>],
                <span class="hljs-string">"description"</span>: data[<span class="hljs-string">"weather"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"description"</span>],
                <span class="hljs-string">"humidity"</span>: data[<span class="hljs-string">"main"</span>][<span class="hljs-string">"humidity"</span>],
                <span class="hljs-string">"wind_speed"</span>: data[<span class="hljs-string">"wind"</span>][<span class="hljs-string">"speed"</span>],
                <span class="hljs-string">"timestamp"</span>: datetime.now().isoformat()
            }
        <span class="hljs-keyword">except</span> httpx.HTTPError <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># ç½‘ç»œé—®é¢˜æˆ–APIæŒ‚äº†ï¼Œåˆ«è®©æ•´ä¸ªæœåŠ¡å´©æºƒ</span>
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"error"</span>: <span class="hljs-string">f"æŸ¥ä¸åˆ°å¤©æ°”ä¿¡æ¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
            }
<span class="hljs-meta">@mcp.resource(<span class="hljs-params"><span class="hljs-string">"weather://current"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">current_weather_status</span>() -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    æä¾›å½“å‰å¤©æ°”æœåŠ¡çš„çŠ¶æ€ä¿¡æ¯
    """</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"å¤©æ°”æœåŠ¡è¿è¡Œä¸­ï¼Œæ›´æ–°æ—¶é—´ï¼š<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>"</span>
<span class="hljs-comment"># å¯åŠ¨æœåŠ¡å™¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    mcp.run()
</code></pre>
<h3 data-id="heading-13">ä»£ç è§£é‡Šï¼ˆé‡è¦çš„å‡ ä¸ªç‚¹ï¼‰</h3>
<p>è®©æˆ‘è§£é‡Šå‡ ä¸ªå…³é”®åœ°æ–¹ï¼š
<strong>1. <code>@mcp.tool()</code> è£…é¥°å™¨</strong>
è¿™ä¸ªè£…é¥°å™¨æ˜¯é­”æ³•æ‰€åœ¨â€”â€”å®ƒæŠŠæ™®é€šå‡½æ•°å˜æˆäº†MCPå·¥å…·ã€‚AIå°±èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°äº†ã€‚æ³¨æ„å‡½æ•°çš„docstringå¾ˆé‡è¦ï¼ŒAIä¼šè¯»å®ƒæ¥ç†è§£è¿™ä¸ªå·¥å…·æ˜¯å¹²å˜›çš„ã€‚æ‰€ä»¥åˆ«å·æ‡’ï¼Œå¥½å¥½å†™æ³¨é‡Šã€‚
<strong>2. å¼‚æ­¥å¤„ç†</strong>
ç”¨<code>async/await</code>æ˜¯å› ä¸ºç½‘ç»œè¯·æ±‚ä¸è¯¥é˜»å¡ã€‚ä½ æƒ³æƒ³ï¼Œå¦‚æœè¯·æ±‚è¦ç­‰3ç§’ï¼ŒåŒæ­¥ä»£ç å°±å¾—å‚»ç­‰3ç§’ã€‚å¼‚æ­¥çš„è¯ï¼Œè¿™æ®µæ—¶é—´å¯ä»¥å¤„ç†å…¶ä»–è¯·æ±‚ã€‚FastMCPå¤©ç„¶æ”¯æŒå¼‚æ­¥ï¼Œæ€§èƒ½æ æ çš„ã€‚
<strong>3. é”™è¯¯å¤„ç†åˆ«å¿˜äº†</strong>
æˆ‘ç”¨try-exceptæ•è·äº†ç½‘ç»œé”™è¯¯ã€‚è¿™å¾ˆé‡è¦ï¼Œä¸ç„¶APIä¸€æŒ‚ï¼Œä½ çš„æœåŠ¡å™¨å°±è·Ÿç€å´©äº†ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé”™è¯¯å¤„ç†å¯èƒ½æ¯”ä¸šåŠ¡é€»è¾‘è¿˜é‡è¦ã€‚
<strong>4. <code>@mcp.resource()</code> è£…é¥°å™¨</strong>
è¿™ä¸ªæä¾›é™æ€èµ„æºã€‚æˆ‘è¿™é‡Œç”¨å®ƒæš´éœ²æœåŠ¡çŠ¶æ€ä¿¡æ¯ã€‚è™½ç„¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æœ‰äº†å®ƒï¼Œä½ èƒ½éšæ—¶çŸ¥é“æœåŠ¡æ˜¯ä¸æ˜¯è¿˜æ´»ç€ã€‚</p>
<h3 data-id="heading-14">é…ç½®Claude Desktopï¼ˆè¿™é‡Œå®¹æ˜“è¸©å‘ï¼‰</h3>
<p>ä»£ç å†™å¥½äº†ï¼Œæ€ä¹ˆè®©Claudeç”¨ä¸Šå‘¢ï¼Ÿéœ€è¦é…ç½®Claude Desktopçš„é…ç½®æ–‡ä»¶ã€‚
é…ç½®æ–‡ä»¶ä½ç½®ï¼š</p>
<ul>
<li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code>
å†…å®¹è¿™æ ·å†™ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"weather"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"fastmcp"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"/Users/yourname/projects/weather_server.py"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"PYTHONPATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/Users/yourname/projects"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ³¨æ„ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªå‘æˆ‘éƒ½è¸©è¿‡</strong>ï¼š</p>
<ol>
<li><strong>è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</strong>ã€‚åˆ«å·æ‡’ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä¼šæ‰¾ä¸åˆ°æ–‡ä»¶çš„ã€‚</li>
<li><strong>JSONæ ¼å¼è¦ä¸¥æ ¼</strong>ã€‚å¤šä¸€ä¸ªé€—å·å°‘ä¸€ä¸ªå¼•å·éƒ½ä¼šæŠ¥é”™ï¼Œè€Œä¸”é”™è¯¯ä¿¡æ¯è¿˜ä¸æ˜æ˜¾ã€‚å»ºè®®å…ˆç”¨åœ¨çº¿JSONéªŒè¯å™¨æ£€æŸ¥ä¸€ä¸‹ã€‚</li>
<li><strong>é…ç½®å®Œè¦é‡å¯Claude Desktop</strong>ã€‚ä¸é‡å¯ä¸ç”Ÿæ•ˆï¼Œæˆ‘ç¬¬ä¸€æ¬¡å°±æ˜¯å¿˜äº†é‡å¯ï¼Œå‚»ç­‰äº†åŠå°æ—¶ã€‚
é‡å¯åï¼Œä½ åœ¨Claudeé‡Œå°±èƒ½çœ‹åˆ°ä¸€ä¸ªæ–°çš„å·¥å…·å›¾æ ‡ã€‚ç‚¹å¼€èƒ½çœ‹åˆ°"weather"æœåŠ¡å·²è¿æ¥ã€‚è¯•ç€é—®Claudeï¼š"å¸®æˆ‘æŸ¥ä¸€ä¸‹åŒ—äº¬çš„å¤©æ°”"ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è°ƒç”¨ä½ å†™çš„MCP Serveräº†ã€‚
ç¬¬ä¸€æ¬¡çœ‹åˆ°å®ƒçœŸçš„è°ƒç”¨æˆåŠŸï¼Œæˆ‘å½“æ—¶è¿˜æŒºå…´å¥‹çš„ï¼Œæ¯•ç«ŸæŠ˜è…¾äº†è¿™ä¹ˆä¹…ã€‚</li>
</ol>
<h3 data-id="heading-15">ç¬¬ä¸€æ¬¡è·‘ä¸é€šï¼Ÿåˆ«æ…Œï¼Œè¿™æ ·æ’æŸ¥</h3>
<p>è¯´å®è¯ï¼Œæˆ‘ç¬¬ä¸€æ¬¡é…ç½®ä¹Ÿæ²¡ä¸€æ¬¡æˆåŠŸã€‚å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼ŒæŒ‰è¿™ä¸ªé¡ºåºæ’æŸ¥ï¼š
<strong>1. å…ˆçœ‹æ—¥å¿—</strong>
Claude Desktopçš„æ—¥å¿—åœ¨ï¼š</p>
<ul>
<li><strong>macOS</strong>: <code>~/Library/Logs/Claude/mcp.log</code></li>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\Logs\mcp.log</code>
æ—¥å¿—é‡Œä¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯ï¼Œæ¯”é…ç½®æ–‡ä»¶æœ‰ç”¨å¤šäº†ã€‚æˆ‘å¥½å‡ æ¬¡éƒ½æ˜¯é æ—¥å¿—å‘ç°é—®é¢˜çš„ã€‚
<strong>2. å•ç‹¬æµ‹è¯•æœåŠ¡å™¨</strong>
åœ¨é…ç½®ä¹‹å‰ï¼Œå…ˆå•ç‹¬è·‘ä¸€ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">python weather_server.py
</code></pre>
<p>ç¡®ä¿æ²¡æœ‰Pythonè¯­æ³•é”™è¯¯æˆ–è€…ç¼ºä¾èµ–åŒ…ã€‚å¦‚æœè¿™æ­¥éƒ½è¿‡ä¸äº†ï¼Œé…ç½®è‚¯å®šä¹Ÿä¸è¡Œã€‚
<strong>3. æ£€æŸ¥JSONæ ¼å¼</strong>
é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fjsonlint.com%2F" target="_blank" title="https://jsonlint.com/" ref="nofollow noopener noreferrer">JSONLint</a>ä¹‹ç±»çš„åœ¨çº¿å·¥å…·æ£€æŸ¥ä¸€ä¸‹ã€‚è‚‰çœ¼çœŸçš„å¾ˆéš¾å‘ç°é‚£äº›éšè—çš„æ ¼å¼é—®é¢˜ã€‚</p>
<h2 data-id="heading-16">çœŸå®åº”ç”¨åœºæ™¯ï¼šMCPèƒ½å¹²ä»€ä¹ˆï¼Ÿ</h2>
<p>ç†è®ºå’ŒDemoéƒ½æœ‰äº†ï¼Œé‚£MCPåœ¨å®é™…é¡¹ç›®ä¸­åˆ°åº•èƒ½åšä»€ä¹ˆï¼Ÿæˆ‘ç ”ç©¶äº†ä¸€äº›çœŸå®æ¡ˆä¾‹ï¼ŒæŒºæœ‰æ„æ€çš„ã€‚</p>
<h3 data-id="heading-17">GitHubé›†æˆï¼šä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–</h3>
<p>æœ‰ä¸ªå¼€æºé¡¹ç›®ç”¨MCPè¿æ¥äº†GitHubï¼Œå®ç°äº†è¿™äº›åŠŸèƒ½ï¼š</p>
<ul>
<li>è‡ªåŠ¨åˆ†ææ–°æäº¤çš„PRï¼Œç»™å‡ºä»£ç è´¨é‡è¯„åˆ†</li>
<li>æ£€æµ‹æ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œæ€§èƒ½é—®é¢˜</li>
<li>è‡ªåŠ¨ç”ŸæˆPRæ‘˜è¦å’Œå˜æ›´è¯´æ˜</li>
<li>æ ¹æ®å†å²æ•°æ®æ¨èåˆé€‚çš„å®¡æŸ¥äººå‘˜
ä»–ä»¬åˆ†äº«è¯´ï¼Œç”¨äº†è¿™å¥—ç³»ç»Ÿåï¼Œä»£ç å®¡æŸ¥æ•ˆç‡æå‡äº†<strong>4å€</strong>ã€‚å› ä¸ºå¾ˆå¤šæœºæ¢°æ€§çš„æ£€æŸ¥å·¥ä½œéƒ½è‡ªåŠ¨åŒ–äº†ï¼Œäººç±»å®¡æŸ¥è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ¶æ„è®¾è®¡ã€‚</li>
</ul>
<h3 data-id="heading-18">Slacké›†æˆï¼šæ™ºèƒ½å·¥ä½œåŠ©æ‰‹</h3>
<p>å¦ä¸€ä¸ªæ¡ˆä¾‹æ˜¯Slacké›†æˆã€‚é€šè¿‡MCP Serverï¼ŒAIåŠ©æ‰‹å¯ä»¥ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ•´ç†æ¯æ—¥ä¼šè®®çºªè¦</li>
<li>æ™ºèƒ½åˆ†ç±»å’Œä¼˜å…ˆçº§æ’åºæ¶ˆæ¯</li>
<li>æ ¹æ®è®¨è®ºå†…å®¹è‡ªåŠ¨åˆ›å»ºå¾…åŠäº‹é¡¹</li>
<li>åœ¨å…³é”®è®¨è®ºæ—¶ä¸»åŠ¨æé†’ç›¸å…³äººå‘˜
æœ‰ä¸ªå›¢é˜Ÿè¯´ä»–ä»¬çš„ä¿¡æ¯å¤„ç†æ•ˆç‡æå‡äº†60%ï¼Œå› ä¸ºå¾ˆå¤šé‡å¤æ€§çš„ä¿¡æ¯æ•´ç†å·¥ä½œè¢«è‡ªåŠ¨åŒ–äº†ã€‚æ¯å¤©çœä¸‹æ¥çš„æ—¶é—´ï¼Œæ‹¿å»åšæ›´æœ‰ä»·å€¼çš„äº‹æƒ…ã€‚</li>
</ul>
<h3 data-id="heading-19">ä¼ä¸šåœºæ™¯ï¼šæ‰“é€šä¸šåŠ¡ç³»ç»Ÿ</h3>
<p>ä¼ä¸šåœºæ™¯å°±æ›´å®ç”¨äº†ï¼š</p>
<ul>
<li><strong>Google Driveé›†æˆ</strong>ï¼šAIå¯ä»¥æœç´¢ã€æ€»ç»“å…¬å¸æ–‡æ¡£ï¼Œå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„ä¿¡æ¯</li>
<li><strong>Postgresæ•°æ®åº“é›†æˆ</strong>ï¼šè‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®ï¼Œä¸ç”¨å†å†™SQLäº†</li>
<li><strong>CRMç³»ç»Ÿé›†æˆ</strong>ï¼šè‡ªåŠ¨æ›´æ–°å®¢æˆ·ä¿¡æ¯ï¼Œç”Ÿæˆé”€å”®æŠ¥å‘Š
è¿™äº›åœºæ™¯çš„å…±åŒç‚¹æ˜¯ï¼š<strong>æŠŠAIå’Œä¼ä¸šå·²æœ‰çš„æ•°æ®ç³»ç»Ÿæ‰“é€šï¼Œè®©AIçœŸæ­£èƒ½è®¿é—®å’Œå¤„ç†ä¸šåŠ¡æ•°æ®</strong>ã€‚ä¸å†æ˜¯ç©å…·ï¼Œè€Œæ˜¯ç”Ÿäº§åŠ›å·¥å…·ã€‚</li>
</ul>
<h3 data-id="heading-20">IoTå’Œæ™ºèƒ½å®¶å±…ï¼ˆè¿™ä¸ªæŒºé…·çš„ï¼‰</h3>
<p>è¿˜æœ‰æ›´æœ‰æ„æ€çš„â€”â€”IoTè®¾å¤‡æ§åˆ¶ã€‚æœ‰å¼€å‘è€…åšäº†æ™ºèƒ½å®¶å±…çš„MCP Serverï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>é€šè¿‡è‡ªç„¶è¯­è¨€æ§åˆ¶ç¯å…‰ã€æ¸©åº¦ã€çª—å¸˜</li>
<li>æ ¹æ®å¤©æ°”å’Œæ—¥ç¨‹è‡ªåŠ¨è°ƒèŠ‚å®¶å±…ç¯å¢ƒ</li>
<li>ç›‘æ§è®¾å¤‡çŠ¶æ€ï¼Œå¼‚å¸¸æ—¶ä¸»åŠ¨æé†’
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å¯¹AIè¯´"æˆ‘è¦å¼€ä¼šäº†ï¼Œå¸®æˆ‘å‡†å¤‡ä¸€ä¸‹"ï¼Œå®ƒå°±è‡ªåŠ¨è°ƒæš—ç¯å…‰ã€å…³é—­éŸ³ä¹ã€è®¾ç½®å‹¿æ‰°æ¨¡å¼ã€‚æŒºç§‘å¹»çš„ï¼Œä½†ç”¨MCPå®ç°èµ·æ¥å¹¶ä¸å¤æ‚ã€‚</li>
</ul>
<h3 data-id="heading-21">ç”Ÿæ€è¦†ç›–é¢</h3>
<p>æ ¹æ®GitHubä¸Šçš„æ•°æ®ï¼ŒMCP Serverå·²ç»è¦†ç›–äº†<strong>20å¤šä¸ªé¢†åŸŸ</strong>ï¼š</p>
<ul>
<li>å¼€å‘å·¥å…·ï¼ˆGitã€GitHubã€GitLabï¼‰</li>
<li>é€šè®¯åä½œï¼ˆSlackã€Discordã€Emailï¼‰</li>
<li>æ•°æ®å­˜å‚¨ï¼ˆå„ç§æ•°æ®åº“ã€äº‘å­˜å‚¨ï¼‰</li>
<li>å¼€å‘è¿ç»´ï¼ˆDockerã€Kubernetesã€ç›‘æ§ç³»ç»Ÿï¼‰</li>
<li>ä¸šåŠ¡ç³»ç»Ÿï¼ˆCRMã€ERPã€è´¢åŠ¡ç³»ç»Ÿï¼‰</li>
<li>IoTè®¾å¤‡ï¼ˆæ™ºèƒ½å®¶å±…ã€å·¥ä¸šè®¾å¤‡ï¼‰
è¿™ä¸ªç”Ÿæ€æ­£åœ¨å¿«é€Ÿæ‰©å±•ã€‚å¾ˆå¯èƒ½ä½ æƒ³è¦çš„åŠŸèƒ½ï¼Œå·²ç»æœ‰äººåšå¥½äº†ã€‚</li>
</ul>
<h2 data-id="heading-22">å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼ˆè¡€æ³ªæ•™è®­ï¼‰</h2>
<p>æˆ‘è‡ªå·±å¼€å‘MCP Serveræ—¶è¸©äº†ä¸å°‘å‘ï¼Œè¿™é‡Œåˆ†äº«å‡ ä¸ªæœ€å®¹æ˜“å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-23">æ—¥å¿—è®°å½•çš„è‡´å‘½é™·é˜±</h3>
<p>è¿™ä¸ªå‘æˆ‘å°è±¡ç‰¹åˆ«æ·±ã€‚ä¸€å¼€å§‹æˆ‘å›¾æ–¹ä¾¿ï¼Œåœ¨ä»£ç é‡Œç”¨<code>print()</code>è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ åƒä¸‡åˆ«è¿™ä¹ˆå†™ï¼</span>
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_tool</span>(<span class="hljs-params">param: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°å‚æ•°: <span class="hljs-subst">{param}</span>"</span>)  <span class="hljs-comment"># ä¼šå¯¼è‡´åè®®é€šä¿¡å¤±è´¥ï¼</span>
    <span class="hljs-comment"># ... ä¸šåŠ¡é€»è¾‘</span>
</code></pre>
<p>ç»“æœæœåŠ¡å™¨æ­»æ´»è¿ä¸ä¸Šï¼Œæˆ‘debugäº†ä¸€ä¸ªå°æ—¶ï¼Œæœ€åæ‰å‘ç°æ˜¯<code>print()</code>çš„è¾“å‡ºå¹²æ‰°äº†JSON-RPCé€šä¿¡ã€‚
<strong>æ­£ç¡®çš„åšæ³•</strong>æ˜¯ä½¿ç”¨æ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰æˆ–è€…æ—¥å¿—æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âœ… è¿™æ ·æ‰å¯¹</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> logging
<span class="hljs-comment"># é…ç½®æ—¥å¿—åˆ°stderr</span>
logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>,
    stream=sys.stderr
)
logger = logging.getLogger(__name__)
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">my_tool</span>(<span class="hljs-params">param: <span class="hljs-built_in">str</span></span>):
    logger.info(<span class="hljs-string">f"æ”¶åˆ°å‚æ•°: <span class="hljs-subst">{param}</span>"</span>)
    <span class="hljs-comment"># ... ä¸šåŠ¡é€»è¾‘</span>
</code></pre>
<p>è®°ä½ï¼š<strong>æ°¸è¿œä¸è¦å‘stdoutå†™å…¥ä»»ä½•å†…å®¹ï¼ŒMCPåè®®é€šè¿‡stdoutè¿›è¡Œé€šä¿¡</strong>ã€‚è¿™æ˜¯é“å¾‹ã€‚</p>
<h3 data-id="heading-24">"Server transport closed"é”™è¯¯</h3>
<p>è¿™ä¸ªé”™è¯¯æˆ‘é‡åˆ°è¿‡å¥½å‡ æ¬¡ï¼Œé€šå¸¸æœ‰è¿™å‡ ä¸ªåŸå› ï¼š
<strong>åŸå› 1ï¼šPythonç¯å¢ƒé—®é¢˜</strong>
é…ç½®æ–‡ä»¶é‡ŒæŒ‡å®šçš„Pythonè§£é‡Šå™¨æ‰¾ä¸åˆ°ä¾èµ–åŒ…ã€‚
è§£å†³æ–¹æ¡ˆï¼šåœ¨é…ç½®æ–‡ä»¶é‡Œæ˜ç¡®æŒ‡å®šPYTHONPATHï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"my-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"fastmcp"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"/path/to/server.py"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"PYTHONPATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/path/to/your/venv/lib/python3.10/site-packages"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åŸå› 2ï¼šæœåŠ¡å™¨å¯åŠ¨å¤±è´¥</strong>
ä»£ç æœ‰è¯­æ³•é”™è¯¯æˆ–è€…å¯¼å…¥å¤±è´¥ï¼ŒæœåŠ¡å™¨æ ¹æœ¬æ²¡å¯åŠ¨æˆåŠŸã€‚
è§£å†³æ–¹æ¡ˆï¼šå•ç‹¬è¿è¡ŒæœåŠ¡å™¨æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python -m fastmcp run server.py
</code></pre>
<p>çœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ã€‚è¿™æ‹›å±¡è¯•ä¸çˆ½ã€‚
<strong>åŸå› 3ï¼šè·¯å¾„å†™é”™äº†</strong>
é…ç½®æ–‡ä»¶é‡Œçš„è·¯å¾„ä¸å¯¹ï¼Œæˆ–è€…ç”¨äº†ç›¸å¯¹è·¯å¾„ã€‚
è§£å†³æ–¹æ¡ˆï¼š<strong>ä¸€å¾‹ä½¿ç”¨ç»å¯¹è·¯å¾„</strong>ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œå…ˆç¡®è®¤æ–‡ä»¶å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS/Linux</span>
<span class="hljs-built_in">ls</span> -l /absolute/path/to/server.py
<span class="hljs-comment"># Windows</span>
<span class="hljs-built_in">dir</span> C:\absolute\path\to\server.py
</code></pre>
<h3 data-id="heading-25">ä½¿ç”¨MCP Inspectorè°ƒè¯•</h3>
<p>FastMCPæä¾›äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„è°ƒè¯•å·¥å…·â€”â€”Inspectorã€‚å®ƒèƒ½å¯è§†åŒ–å±•ç¤ºä½ çš„MCP Serveræä¾›äº†å“ªäº›å·¥å…·å’Œèµ„æºï¼Œè¿˜èƒ½ç›´æ¥æµ‹è¯•è°ƒç”¨ã€‚
å¯åŠ¨Inspectorï¼š</p>
<pre><code class="hljs language-bash" lang="bash">fastmcp dev server.py
</code></pre>
<p>ç„¶åè®¿é—®<code>http://localhost:5173</code>ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªWebç•Œé¢ï¼Œåˆ—å‡ºäº†æ‰€æœ‰çš„toolsã€resourceså’Œpromptsã€‚å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨é‡Œæµ‹è¯•è°ƒç”¨ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¯åŠ¨Claude Desktopã€‚
è¿™ä¸ªå·¥å…·åœ¨å¼€å‘é˜¶æ®µç‰¹åˆ«æœ‰ç”¨ï¼Œèƒ½å¿«é€ŸéªŒè¯æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸ã€‚æˆ‘ç°åœ¨å†™æ–°Serverï¼Œéƒ½æ˜¯å…ˆç”¨Inspectoræµ‹é€šäº†å†é…ç½®åˆ°Claudeã€‚</p>
<h3 data-id="heading-26">å¼‚æ­¥ç¼–ç¨‹åˆ«è¸©å‘</h3>
<p>FastMCPæ”¯æŒå¼‚æ­¥ï¼Œä½†è¦æ³¨æ„ï¼š
<strong>åˆ«æ··ç”¨åŒæ­¥å’Œå¼‚æ­¥</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯ï¼šåœ¨å¼‚æ­¥å‡½æ•°é‡Œè°ƒç”¨åŒæ­¥åº“</span>
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">bad_example</span>():
    response = requests.get(url)  <span class="hljs-comment"># requestsæ˜¯åŒæ­¥åº“ï¼Œä¼šé˜»å¡</span>
<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šä½¿ç”¨å¼‚æ­¥HTTPåº“</span>
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">good_example</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> httpx.AsyncClient() <span class="hljs-keyword">as</span> client:
        response = <span class="hljs-keyword">await</span> client.get(url)
</code></pre>
<p><strong>æ­£ç¡®å¤„ç†å¼‚æ­¥å¼‚å¸¸</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_tool</span>():
    <span class="hljs-keyword">try</span>:
        result = <span class="hljs-keyword">await</span> some_async_operation()
        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æ“ä½œå¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> {<span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)}
</code></pre>
<p><strong>CPUå¯†é›†å‹æ“ä½œåˆ«é˜»å¡äº‹ä»¶å¾ªç¯</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">cpu_intensive_tool</span>():
    <span class="hljs-comment"># æŠŠCPUå¯†é›†å‹æ“ä½œæ”¾åˆ°çº¿ç¨‹æ± ï¼Œä¸é˜»å¡äº‹ä»¶å¾ªç¯</span>
    result = <span class="hljs-keyword">await</span> asyncio.to_thread(heavy_computation)
    <span class="hljs-keyword">return</span> result
</code></pre>
<h2 data-id="heading-27">MCPçš„æœªæ¥ï¼šç”Ÿæ€æ­£åœ¨çˆ†å‘</h2>
<p>MCPçš„å‘å±•é€Ÿåº¦è¶…å‡ºäº†æˆ‘çš„é¢„æœŸã€‚åˆ†äº«ä¸€äº›æœ€æ–°è¿›å±•ã€‚</p>
<h3 data-id="heading-28">2025å¹´çš„é‡è¦æ›´æ–°</h3>
<p><strong>6æœˆæ›´æ–°</strong>ï¼šMCP Registryä¸Šçº¿äº†ï¼Œè¿™æ˜¯ä¸ªå®˜æ–¹çš„æœåŠ¡å™¨æ³¨å†Œä¸­å¿ƒã€‚å¼€å‘è€…å¯ä»¥æŠŠè‡ªå·±çš„MCP Serverå‘å¸ƒåˆ°Registryï¼Œå…¶ä»–äººå°±èƒ½ç›´æ¥å‘ç°å’Œä½¿ç”¨ã€‚æœ‰ç‚¹åƒnpmå¯¹äºNode.jsåŒ…çš„æ„ä¹‰ã€‚
<strong>9æœˆæ›´æ–°</strong>ï¼š</p>
<ul>
<li>å¼•å…¥äº†æ²»ç†æ¨¡å‹ï¼Œæ˜ç¡®äº†ç¤¾åŒºè´¡çŒ®å’Œæ ‡å‡†æ¼”è¿›çš„è§„åˆ™</li>
<li>SDKåˆ†å±‚è®¾è®¡ï¼Œåˆ†ä¸ºCore SDKå’ŒHigh-level SDKï¼Œå¼€å‘æ›´çµæ´»</li>
<li>å®‰å…¨æ€§å¢å¼ºï¼šæ”¯æŒOAuthæˆæƒã€èµ„æºè®¿é—®æƒé™æ§åˆ¶
<strong>11æœˆ25æ—¥é¢„å‘Š</strong>ï¼šå®˜æ–¹è·¯çº¿å›¾æ˜¾ç¤ºä¼šå‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯æ€§èƒ½ä¼˜åŒ–å’Œæ›´å¤šçš„å®‰å…¨ç‰¹æ€§ã€‚æˆ‘æŒºæœŸå¾…çš„ã€‚</li>
</ul>
<h3 data-id="heading-29">å®‰å…¨æ€§åœ¨æ”¹è¿›</h3>
<p>2025å¹´4æœˆæœ‰ç ”ç©¶æŒ‡å‡ºMCPå­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚prompt injectionã€å·¥å…·æƒé™è¿‡å¤§ç­‰ã€‚è€å®è®²ï¼Œè¿™æ˜¯æ–°åè®®å‘å±•è¿‡ç¨‹ä¸­çš„æ­£å¸¸ç°è±¡ã€‚é‡è¦çš„æ˜¯ç¤¾åŒºåœ¨ç§¯æåº”å¯¹ï¼š</p>
<ul>
<li>å¼•å…¥äº†èµ„æºæŒ‡ç¤ºç¬¦ï¼ˆResource Indicatorsï¼‰ï¼Œç»†åŒ–æƒé™æ§åˆ¶</li>
<li>æ”¯æŒOAuth 2.0æˆæƒæµç¨‹ï¼Œä¿æŠ¤æ•æ„Ÿæ•°æ®</li>
<li>å¢åŠ äº†å®¡è®¡æ—¥å¿—åŠŸèƒ½ï¼Œè®°å½•æ‰€æœ‰å·¥å…·è°ƒç”¨
è¿™äº›æ›´æ–°è¯´æ˜MCPæ­£åœ¨æœç€ä¼ä¸šçº§åº”ç”¨çš„æ–¹å‘å‘å±•ã€‚æ¯•ç«Ÿè¦åœ¨ç”Ÿäº§ç¯å¢ƒç”¨ï¼Œå®‰å…¨æ˜¯ç¬¬ä¸€ä½çš„ã€‚</li>
</ul>
<h3 data-id="heading-30">è¡Œä¸šé‡‡çº³æƒ…å†µ</h3>
<p>è¶Šæ¥è¶Šå¤šçš„å·¥å…·å¼€å§‹é›†æˆMCPï¼š</p>
<ul>
<li><strong>Zedç¼–è¾‘å™¨</strong>ï¼šå†…ç½®MCPæ”¯æŒï¼Œå¯ä»¥è¿æ¥å„ç§å¼€å‘å·¥å…·</li>
<li><strong>Replit</strong>ï¼šåœ¨çº¿IDEé›†æˆäº†MCPï¼Œå¢å¼ºAIç¼–ç¨‹åŠ©æ‰‹èƒ½åŠ›</li>
<li><strong>Sourcegraph</strong>ï¼šä»£ç æœç´¢å¼•æ“é€šè¿‡MCPæä¾›æ›´æ™ºèƒ½çš„ä»£ç åˆ†æ
è¿˜æœ‰å¾ˆå¤šä¼ä¸šåœ¨å†…éƒ¨ä½¿ç”¨MCPæ•´åˆç°æœ‰ç³»ç»Ÿã€‚è™½ç„¶ä¸æ˜¯æ‰€æœ‰æ¡ˆä¾‹éƒ½å…¬å¼€ï¼Œä½†ä»GitHubå’Œç¤¾åŒºçš„æ´»è·ƒåº¦æ¥çœ‹ï¼Œé‡‡çº³ç‡åœ¨å¿«é€Ÿä¸Šå‡ã€‚</li>
</ul>
<h3 data-id="heading-31">å¼€æºç¤¾åŒºçš„åŠ›é‡</h3>
<p>GitHubä¸Šawesome-mcp-serversé¡¹ç›®çš„3ä¸‡å¤šä¸ªStarsä¸æ˜¯è™šçš„ã€‚ç¤¾åŒºè´¡çŒ®äº†å¤§é‡é«˜è´¨é‡çš„MCP Serverï¼š</p>
<ul>
<li>å„ç§æ•°æ®åº“è¿æ¥å™¨ï¼ˆMySQLã€PostgreSQLã€MongoDBã€Redisï¼‰</li>
<li>å¼€å‘å·¥å…·é›†æˆï¼ˆGitã€Dockerã€Kubernetesï¼‰</li>
<li>APIæœåŠ¡å°è£…ï¼ˆå¤©æ°”ã€åœ°å›¾ã€ç¿»è¯‘ã€æœç´¢å¼•æ“ï¼‰</li>
<li>ä¼ä¸šç³»ç»Ÿè¿æ¥å™¨ï¼ˆSalesforceã€Jiraã€Confluenceï¼‰
è¿™ç§å¼€æ”¾ç”Ÿæ€çš„å¥½å¤„æ˜¯ï¼Œä½ éœ€è¦çš„å¤§éƒ¨åˆ†è¿æ¥å™¨å¯èƒ½å·²ç»æœ‰äººåšå¥½äº†ã€‚ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä¸ç”¨ä»å¤´å¼€å‘ã€‚</li>
</ul>
<h3 data-id="heading-32">æˆ‘çš„çœ‹æ³•</h3>
<p>å¦ç™½è¯´ï¼Œæˆ‘å¯¹MCPçš„æœªæ¥æŒºä¹è§‚çš„ã€‚åŸå› æœ‰å‡ ä¸ªï¼š
<strong>1. è§£å†³äº†çœŸå®ç—›ç‚¹</strong>
AIå·¥å…·é›†æˆçš„ç¢ç‰‡åŒ–æ˜¯ä¸ªçœŸå®å­˜åœ¨çš„é—®é¢˜ï¼Œä¸æ˜¯ä¼ªéœ€æ±‚ã€‚MCPæä¾›äº†ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚
<strong>2. å¤§å‚èƒŒä¹¦å¾ˆé‡è¦</strong>
Anthropicå’ŒOpenAIåŒæ—¶æ”¯æŒï¼Œè¯´æ˜è¿™ä¸ªæ ‡å‡†æœ‰è¶³å¤Ÿçš„æŠ€æœ¯ä»·å€¼ã€‚è€Œä¸”ä»–ä»¬éƒ½åœ¨ç§¯ææ¨è¿›ç”Ÿæ€å»ºè®¾ã€‚
<strong>3. å¼€æ”¾æ ‡å‡†æ˜¯å…³é”®</strong>
ä¸æ˜¯æŸä¸ªå…¬å¸çš„ç§æœ‰åè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä»»ä½•äººéƒ½å¯ä»¥å®ç°å’Œè´¡çŒ®ã€‚è¿™å¯¹ç”Ÿæ€å‘å±•å¤ªé‡è¦äº†ã€‚
<strong>4. ç¤¾åŒºæ´»è·ƒåº¦é«˜</strong>
1000å¤šä¸ªæœåŠ¡å™¨ã€3ä¸‡å¤šä¸ªStarsã€å¿«é€Ÿå¢é•¿çš„é‡‡çº³ç‡ï¼Œç¤¾åŒºçš„æ´»è·ƒåº¦è¯´æ˜å¼€å‘è€…è®¤å¯è¿™ä¸ªæ–¹å‘ã€‚
å½“ç„¶ï¼ŒMCPè¿˜å¾ˆå¹´è½»ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚ä½†æŠ€æœ¯çš„å‘å±•ä¸å°±æ˜¯è¿™æ ·å—ï¼Ÿä»ä¸å®Œç¾å¼€å§‹ï¼Œåœ¨ä½¿ç”¨ä¸­ä¸æ–­ä¼˜åŒ–ã€‚å…³é”®æ˜¯æ–¹å‘å¯¹äº†ã€‚</p>
<h2 data-id="heading-33">æ€»ç»“ï¼šæ˜¯æ—¶å€™è¯•è¯•MCPäº†</h2>
<p>å¦‚æœè¦æˆ‘ç”¨ä¸€å¥è¯æ€»ç»“MCPçš„ä»·å€¼ï¼Œæˆ‘ä¼šè¯´ï¼š<strong>å®ƒè®©AIå·¥å…·å’Œæ•°æ®æºçš„è¿æ¥å˜å¾—åƒæ­ç§¯æœ¨ä¸€æ ·ç®€å•</strong>ã€‚
ä»¥å‰ï¼Œä½ è¦ä¸ºæ¯ä¸ªAIå·¥å…·ã€æ¯ä¸ªæ•°æ®æºå†™ä¸€å¥—é€‚é…ä»£ç ï¼Œé‡å¤åŠ³åŠ¨å¤šã€ç»´æŠ¤æˆæœ¬é«˜ã€‚ç°åœ¨ï¼Œåªè¦æ•°æ®æºæä¾›äº†MCP Serverï¼Œæ‰€æœ‰æ”¯æŒMCPçš„AIå·¥å…·éƒ½èƒ½ç”¨ã€‚è¿™å°±æ˜¯æ ‡å‡†åŒ–çš„åŠ›é‡ã€‚</p>
<h3 data-id="heading-34">ä½ å¯ä»¥ç«‹å³è¡ŒåŠ¨</h3>
<p>å¦‚æœä½ å¯¹MCPæ„Ÿå…´è¶£ï¼Œè¿™é‡Œæ˜¯å‡ ä¸ªå…·ä½“å»ºè®®ï¼š
<strong>1. åŠ¨æ‰‹å®è·µ</strong>
æŠŠæœ¬æ–‡çš„å¤©æ°”æŸ¥è¯¢ä»£ç å¤åˆ¶ä¸‹æ¥ï¼Œæ”¹æ”¹å‚æ•°ï¼Œéƒ¨ç½²åˆ°ä½ çš„Claude Desktopã€‚çœŸçš„åªè¦5åˆ†é’Ÿã€‚å®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ã€‚
<strong>2. æ¢ç´¢ç°æœ‰èµ„æº</strong>
å»GitHubä¸Šçœ‹çœ‹awesome-mcp-serversé¡¹ç›®ï¼Œé‡Œé¢æœ‰3000å¤šä¸ªç°æˆçš„æœåŠ¡å™¨ã€‚æ‰¾åˆ°ä½ é¡¹ç›®éœ€è¦çš„ï¼Œç›´æ¥ç”¨èµ·æ¥ã€‚
<strong>3. å¼€å‘è‡ªå·±çš„Server</strong>
å¦‚æœä½ æœ‰ç‰¹å®šéœ€æ±‚ï¼Œè¯•ç€å¼€å‘ä¸€ä¸ªMCP Serverã€‚å¯ä»¥ä»ç®€å•çš„å¼€å§‹ï¼Œæ¯”å¦‚å°è£…ä¸€ä¸ªä½ å¸¸ç”¨çš„APIï¼Œæˆ–è€…è¿æ¥ä½ çš„é¡¹ç›®æ•°æ®åº“ã€‚
<strong>4. å‚ä¸ç¤¾åŒº</strong>
MCPçš„æ–‡æ¡£å’Œç¤ºä¾‹è¿˜åœ¨ä¸æ–­å®Œå–„ä¸­ã€‚å¦‚æœä½ å‘ç°äº†å¥½çš„å®è·µæˆ–è€…è¸©äº†å‘ï¼Œä¸å¦¨åˆ†äº«å‡ºæ¥ï¼Œå¸®åŠ©å…¶ä»–å¼€å‘è€…ã€‚</p>
<h3 data-id="heading-35">æœ€åçš„è¯</h3>
<p>è¯´å®è¯ï¼Œå½“åˆæˆ‘ä¹Ÿè§‰å¾—"åˆæ˜¯ä¸€ä¸ªæ–°åè®®"æŒºçƒ¦çš„ã€‚å­¦ä¹ æˆæœ¬ã€è¿ç§»æˆæœ¬ã€æ—¶é—´æˆæœ¬ï¼Œæƒ³æƒ³éƒ½ç´¯ã€‚ä½†çœŸæ­£ç”¨è¿‡ä¹‹åï¼Œæˆ‘å‘ç°MCPç¡®å®è§£å†³äº†å®é™…é—®é¢˜ã€‚å®ƒä¸æ˜¯ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„å·¥ä½œæ›´ç®€å•ã€æ›´é«˜æ•ˆã€‚
AIå·¥å…·çš„æ—¶ä»£æ‰åˆšåˆšå¼€å§‹ï¼ŒMCPè¿™æ ·çš„å¼€æ”¾æ ‡å‡†ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°æŠŠAIèƒ½åŠ›é›†æˆåˆ°å®é™…é¡¹ç›®ä¸­ã€‚ä¸ç”¨æ‹…å¿ƒå­¦ä¸ä¼šï¼ŒFastMCPè¿™æ ·çš„æ¡†æ¶æŠŠå¤æ‚çš„ä¸œè¥¿éƒ½å°è£…å¥½äº†ï¼Œä¸Šæ‰‹çœŸçš„ä¸éš¾ã€‚
é‚£ä¹ˆï¼Œä½ å‡†å¤‡å¥½åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªMCP Serveräº†å—ï¼Ÿ</p>
<blockquote>
<p>åŸæ–‡é¦–å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2Fposts%2Fai%2F20251125-mcp-protocol-guide%2F" target="_blank" title="https://blog.betterlink.top/zh/posts/ai/20251125-mcp-protocol-guide/" ref="nofollow noopener noreferrer">è‡ªä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é­”çæ˜Ÿäº‘è®©AIæ‹¥æœ‰â€œèº«ä½“â€œçš„å…·èº«æ™ºèƒ½å¼€å‘å¹³å°å®æˆ˜è¯„æµ‹]]></title>    <link>https://juejin.cn/post/7579702046955995179</link>    <guid>https://juejin.cn/post/7579702046955995179</guid>    <pubDate>2025-12-04T11:49:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579702046955995179" data-draft-id="7579716343454613547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é­”çæ˜Ÿäº‘è®©AIæ‹¥æœ‰â€œèº«ä½“â€œçš„å…·èº«æ™ºèƒ½å¼€å‘å¹³å°å®æˆ˜è¯„æµ‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T11:49:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é­”çæ˜Ÿäº‘è®©AIæ‹¥æœ‰â€œèº«ä½“â€œçš„å…·èº«æ™ºèƒ½å¼€å‘å¹³å°å®æˆ˜è¯„æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T11:49:42.000Z" title="Thu Dec 04 2025 11:49:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>åœ¨å¤§æ¨¡å‹æŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒAIå·²ç»æ‹¥æœ‰äº†å¼ºå¤§çš„"å¤§è„‘"ï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆé«˜è´¨é‡çš„æ–‡æœ¬å†…å®¹ã€‚ç„¶è€Œï¼ŒçœŸæ­£çš„æ™ºèƒ½ä½“ä¸ä»…éœ€è¦æ€ç»´èƒ½åŠ›ï¼Œè¿˜éœ€è¦èƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒå¹¶ä¸ä¹‹äº¤äº’çš„"èº«ä½“"ã€‚é­”çç§‘æŠ€æœ€æ–°æ¨å‡ºçš„é­”çæ˜Ÿäº‘å¹³å°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜è€Œè¯ç”Ÿçš„å…¨çƒé¦–ä¸ªå…·èº«æ™ºèƒ½3Dæ•°å­—äººå¼€æ”¾å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dc3f0479fc2439599ac6ad3bc46de94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=6VN7nZr0CaZnacvDUf8qR5ONjas%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-0"><strong>é­”çæ˜Ÿäº‘å¹³å°æ¦‚è¿°</strong></h2>
<p>é­”çæ˜Ÿäº‘æ˜¯é­”çç§‘æŠ€é¢å‘å…¨çƒå¼€å‘è€…æ¨å‡ºçš„å…·èº«æ™ºèƒ½3Dæ•°å­—äººå¼€å‘å¹³å°ï¼Œè‡´åŠ›äºè®©å¤§æ¨¡å‹æ‹¥æœ‰"èº«ä½“"ï¼ŒçœŸæ­£æˆä¸ºå¯äº¤äº’ã€å¯æ„ŸçŸ¥ã€å¯è¡ŒåŠ¨çš„æ™ºèƒ½ä½“ã€‚ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„åŸºç¡€è®¾æ–½ï¼Œæ˜Ÿäº‘å¹³å°ä¸ºå¼€å‘è€…æä¾›äº†ä»æ•°å­—äººåˆ›å»ºã€é…ç½®åˆ°å®æ—¶é©±åŠ¨çš„å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—åœ¨ä»»ä½•ç»ˆç«¯ä¸Šå®ç°é«˜è´¨é‡ã€ä½å»¶è¿Ÿã€é«˜å¹¶å‘çš„3Dæ•°å­—äººäº¤äº’æˆä¸ºå¯èƒ½ã€‚</p>
<p>å¹³å°çš„æ ¸å¿ƒç†å¿µæ˜¯"è®©æ¯ä¸€å—å±å¹•éƒ½èƒ½æ´»èµ·æ¥"ï¼Œæ— è®ºæ˜¯å…¬å…±æœåŠ¡å±ã€é›¶å”®è¥é”€å±ã€ä¸ªäººè®¾å¤‡è¿˜æ˜¯æ²‰æµ¸å¼åœºæ™¯ï¼Œéƒ½å¯ä»¥é€šè¿‡é­”çæ˜Ÿäº‘èµ‹äºˆæ™ºèƒ½åŒ–çš„ç”Ÿå‘½åŠ›ã€‚</p>
<h2 data-id="heading-1"><strong>å¹³å°ä½¿ç”¨é…ç½®æµç¨‹è¯¦è§£</strong></h2>
<h3 data-id="heading-2"><strong>åº”ç”¨åˆ›å»ºä¸ç®¡ç†</strong></h3>
<p>é­”çæ˜Ÿäº‘å¹³å°çš„ä½¿ç”¨æµç¨‹è®¾è®¡å¾—æä¸ºç®€æ´ï¼Œå³ä½¿æ˜¯åˆæ¬¡æ¥è§¦çš„å¼€å‘è€…ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ“ä½œæ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ³¨å†Œä¸ç™»å½•</strong></li>
</ol>
<p>é¦–å…ˆè®¿é—®é­”çæ˜Ÿäº‘å®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fxingyun3d.com%3Futm_campaign%3Ddaily%26utm_source%3DjixinghuiKoc28" title="https://xingyun3d.com?utm_campaign=daily&amp;utm_source=jixinghuiKoc28" target="_blank" ref="nofollow noopener noreferrer">xingyun3d.com?utm_campaign=daily&amp;utm_source=jixinghuiKoc28</a>ï¼‰ï¼Œç‚¹å‡»å³ä¸Šè§’çš„"ç™»å½•/æ³¨å†Œ"æŒ‰é’®ã€‚å¹³å°ç›®å‰å¯¹æ‰€æœ‰ç”¨æˆ·å…è´¹å¼€æ”¾ï¼Œæ³¨å†Œå³å¯è·å¾—100ç§¯åˆ†ï¼Œå¦‚æœ‰é‚€è¯·ç è¿˜å¯è·å¾—æ›´å¤šç§¯åˆ†å’Œé¢å¤–æƒç›Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c9a53bb96e34100b56afa190b600d06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=cCeQmwWooIZn%2Bo2u2mJ8g7Ws%2FO8%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ol start="2">
<li><strong>åˆ›å»ºåº”ç”¨</strong></li>
</ol>
<p>ç™»å½•æˆåŠŸåï¼Œè¿›å…¥å¼€å‘è€…ä¸­å¿ƒï¼Œç‚¹å‡»"åˆ›å»ºåº”ç”¨"æŒ‰é’®ã€‚åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå¯ä»¥é€‰æ‹©åº”ç”¨ç±»å‹ï¼Œæ¯”å¦‚è™šæ‹Ÿé™ªä¼´ã€å®¢æˆ·æœåŠ¡ã€æ•™è‚²åŸ¹è®­ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/549106763ea1497d9af8c5a4defea5a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=7ENCSyDHLP9Hiz2pGnOHIT99HtU%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96f831c85bdc4dcda40bf7c5cc4e6a43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=%2F49sq7ILhNBKNjVbP%2FPQ6yzVJlM%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a8f3a11b2104fb881cd36dd693f2a74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=sNreeXSqMJAyC%2F40tQIhojGmmsc%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ol start="3">
<li><strong>è§’è‰²é€‰æ‹©</strong></li>
</ol>
<p>å¹³å°å†…ç½®äº†å¤šç§é«˜ç²¾åº¦çš„3Dè§’è‰²åº“ï¼Œæ¶µç›–è¶…å†™å®ã€äºŒæ¬¡å…ƒã€å¡é€šã€ç¾å‹ç­‰å¤šç§é£æ ¼ã€‚å¼€å‘è€…å¯ä»¥æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„è§’è‰²å½¢è±¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e8760933b0f419086f48085c78fe682~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=moCQcU51e%2F3wIstmCIlaxBkhJuc%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2f48b267cfb4f9aa7b5f205cceccd4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=elybZaTu7IaHKKWw5gUAid%2FPnRo%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-3"><strong>æ•°å­—äººé…ç½®ä¸è°ƒè¯•</strong></h3>
<ol>
<li><strong>åŠ¨ä½œè°ƒè¯•</strong></li>
</ol>
<p>è¿›å…¥"è°ƒè¯•"é¢æ¿åï¼Œå¯ä»¥åœ¨å³ä¾§ä»£ç æ¡†ä¸­è¾“å…¥æŒ‡ä»¤æµ‹è¯•æ•°å­—äººçš„è¡¨ç°æ•ˆæœã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€åœºç™½ï¼š<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯ä»Šå¤©çš„é¢è¯•å®˜ã€‚è¯·å…ˆåšä¸€ä¸ªç®€çŸ­çš„è‡ªæˆ‘ä»‹ç»ï¼Œå¹¶è°ˆè°ˆä½ å¯¹æˆ‘ä»¬å…¬å¸çš„äº†è§£ã€‚"</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">speak</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ue4event</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>ka_intent<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ka_intent</span>&gt;</span>Welcome<span class="hljs-tag">&lt;/<span class="hljs-name">ka_intent</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ue4event</span>&gt;</span>
  ä½ å¥½ï¼Œæˆ‘æ˜¯ä»Šå¤©çš„é¢è¯•å®˜ã€‚è¯·å…ˆåšä¸€ä¸ªç®€çŸ­çš„è‡ªæˆ‘ä»‹ç»ï¼Œå¹¶è°ˆè°ˆä½ å¯¹æˆ‘ä»¬å…¬å¸çš„äº†è§£ã€‚
<span class="hljs-tag">&lt;/<span class="hljs-name">speak</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/157f9e33ae8a49bf83a4c916e5924efc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=w0kh1pqYyU3vLRxJGPxCsz9N%2Few%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<ol start="2">
<li><strong>æ•ˆæœéªŒè¯</strong></li>
</ol>
<p>ç‚¹å‡»å‘é€åï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ•°å­—äººæµç•…åœ°å¿µå‡ºæµ‹è¯•æ–‡æœ¬ï¼Œä¸”çœ¼ç¥ã€å£å‹ã€è¡¨æƒ…å’Œæ‰‹åŠ¿å®Œç¾åŒ¹é…ã€‚è¿™ä¸€æ­¥ç¡®è®¤äº†æ•°å­—äººçš„"èº«ä½“"å·²ç»å‡†å¤‡å°±ç»ªã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fd0451c74cb446d83e2bbc664b1cae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=p4oAzicaLChnI8Xmfz9ol3%2BX%2FZU%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-4"><strong>æ­å»ºè·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹[SDKä½¿ç”¨ä¸å¼€å‘å®æˆ˜]</strong></h2>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ æ„å»ºäº†ä¸€ä¸ªã€Œè·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹ã€ï¼Œå¹¶é›†æˆäº† <strong>é­”çæ˜Ÿäº‘ SDK</strong>ã€<strong>è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰</strong> ä»¥åŠ <strong>å¤šç§ LLM æ¨¡å‹</strong>ï¼Œå®ç°äº†â€œå¯çœ‹è§ã€å¯å¯¹è¯ã€å¯å€¾å¬ã€å¯ç†è§£â€çš„å…¨æµç¨‹äº¤äº’ä½“éªŒã€‚</p>
<p>è¿™ä¸ªåŠ©æ‰‹ä¸ä»…èƒ½å®æ—¶æ¸²æŸ“ä¸€ä¸ªå¯äº¤äº’çš„è™šæ‹Ÿäººï¼Œè¿˜èƒ½å¬æ‡‚ä½ çš„é—®é¢˜ã€ç†è§£ä½ çš„è·‘æ­¥åœºæ™¯ï¼Œå¹¶ç»“åˆä¸“ä¸šçŸ¥è¯†ç»™å‡ºå»ºè®®ã€‚ä½ åªéœ€è¦å¼€å£æé—®ï¼Œå®ƒå°±èƒ½ç»™å‡ºè¯¦ç»†ã€ä¸“ä¸šã€è‡ªç„¶çš„è·‘æ­¥æŒ‡å¯¼ã€‚</p>
<p>æœ¬æ–‡å°†ä»ç¯å¢ƒå‡†å¤‡ã€æ ¸å¿ƒç»„ä»¶è®¾è®¡ã€SDK é›†æˆç»†èŠ‚ã€ASR &amp; LLM äº¤äº’æµç¨‹ç­‰æ–¹é¢ï¼Œç³»ç»Ÿæ€§å±•ç¤ºè¯¥é¡¹ç›®ä» 0 åˆ° 1 çš„å®Œæ•´æ­å»ºè¿‡ç¨‹ï¼Œæ˜¯ä¸€ç¯‡éå¸¸é€‚åˆ <strong>æ•°å­—äººå¼€å‘è€… / AI äº§å“å·¥ç¨‹å¸ˆ / å¥èº«ç±»åº”ç”¨å¼€å‘è€…</strong> çš„å®æˆ˜æ•™ç¨‹ã€‚</p>
<p>å®Œæ•´æºç ä¸‹è½½ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fa125efs%2Fmagic-flower-nebula" target="_blank" title="https://gitee.com/a125efs/magic-flower-nebula" ref="nofollow noopener noreferrer">gitee.com/a125efs/magâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dee280572a54172a479ada070bceb4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=7zv3SRTtNndpnhF0wT1DP%2B3T670%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db6eda9a7eff4e3180373258d67ee3ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=7YsIvP1QGbhEld29thcAL0EjuaI%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8e51c1df1e048d1b19c2a060f1a9527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=CByhzt%2F3agFptj3SZ2iLkGyvId8%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-5"><strong>ç¯å¢ƒå‡†å¤‡</strong></h3>
<p>æ­å»ºè·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹çš„å¼€å‘ç¯å¢ƒç›¸å¯¹ç®€å•ã€‚æˆ‘åœ¨åŸºäº <strong>Vue 3 + TypeScript + Vite</strong> çš„æ•°å­—äººäº¤äº’é¡¹ç›®ä¸­ï¼Œé›†æˆäº† <strong>é­”çæ˜Ÿäº‘ SDK</strong>ï¼ŒåŒæ—¶ç»“åˆè¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰å’Œå¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œå®ç°äº†æ™ºèƒ½åŒ–çš„äººæœºäº¤äº’ä½“éªŒã€‚</p>
<h3 data-id="heading-6">è·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹çš„é…ç½®é¢æ¿ç»„ä»¶</h3>
<p>ä¸»è¦è´Ÿè´£ç®¡ç†åº”ç”¨çš„å„ç§è®¾ç½®å’Œç”¨æˆ·äº¤äº’ã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li>åº”ç”¨é…ç½® ï¼šæä¾›è™šæ‹Ÿäººã€è¯­éŸ³è¯†åˆ«(ASR)ã€è¯­è¨€æ¨¡å‹(LLM)ç­‰æœåŠ¡çš„é…ç½®ç•Œé¢</li>
<li>è¿æ¥æ§åˆ¶ ï¼šç®¡ç†ä¸è™šæ‹ŸäººæœåŠ¡çš„è¿æ¥çŠ¶æ€ï¼ˆè¿æ¥/æ–­å¼€ï¼‰</li>
<li>æ¶ˆæ¯äº¤äº’ ï¼šæ”¯æŒæ–‡æœ¬è¾“å…¥å’Œè¯­éŸ³è¾“å…¥ä¸¤ç§äº¤äº’æ–¹å¼</li>
<li>ç¤ºä¾‹é—®é¢˜ ï¼šæä¾›è·‘æ­¥ç›¸å…³çš„å¸¸è§é—®é¢˜ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿæé—®</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"config-panel"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¬¢è¿ä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"welcome-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"welcome-icon"</span>&gt;</span>ğŸƒâ™‚ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"welcome-title"</span>&gt;</span>è·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"welcome-subtitle"</span>&gt;</span>è·å–ä¸“ä¸šè·‘æ­¥å»ºè®®ï¼Œè§£ç­”è·‘æ­¥ç›¸å…³é—®é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è™šæ‹Ÿäººé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>ğŸ¤–<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>è™šæ‹Ÿäººé…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>åº”ç”¨ APP ID<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.avatar.appId"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ APP ID"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"åº”ç”¨ APP ID"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>åº”ç”¨ APP Secret<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.avatar.appSecret"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ APP Secret"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"åº”ç”¨ APP Secret"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ASRé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>ğŸ¤<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>è¯­éŸ³è¯†åˆ«é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>ASR æœåŠ¡å•†<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.asr.provider"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-select"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"tx"</span>&gt;</span>è…¾è®¯äº‘<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>ASR App ID<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.asr.appId"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ ASR App ID"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"ASR App ID"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>ASR Secret ID<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.asr.secretId"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ Secret ID"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"ASR Secret ID"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>ASR Secret Key<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.asr.secretKey"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ Secret Key"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"ASR Secret Key"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- LLMé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>ğŸ§ <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>è¯­è¨€æ¨¡å‹é…ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>æ¨¡å‹é€‰æ‹©<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.llm.model"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-select"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> 
            <span class="hljs-attr">v-for</span>=<span class="hljs-string">"model in supportedModels"</span> 
            <span class="hljs-attr">:key</span>=<span class="hljs-string">"model"</span> 
            <span class="hljs-attr">:value</span>=<span class="hljs-string">"model"</span>
          &gt;</span>
            {{ model }}
          <span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>API Key<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.llm.apiKey"</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-input"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ API Key"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"API Key"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ§åˆ¶æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>âš¡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>è¿æ¥æ§åˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleConnect"</span> 
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isConnecting || appState.avatar.connected"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-icon"</span>&gt;</span>ğŸ”—<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {{ isConnecting ? 'è¿æ¥ä¸­...' : appState.avatar.connected ? 'å·²è¿æ¥' : 'è¿æ¥' }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleDisconnect"</span> 
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!appState.avatar.connected"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-icon"</span>&gt;</span>ğŸ“´<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          æ–­å¼€
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ¶ˆæ¯äº¤äº’ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>ğŸ’¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>æ¶ˆæ¯äº¤äº’<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-label"</span>&gt;</span>è¾“å…¥æ‚¨çš„é—®é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"appState.ui.text"</span> 
          <span class="hljs-attr">rows</span>=<span class="hljs-string">"3"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"form-textarea"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ä¾‹å¦‚ï¼šå¦‚ä½•æ­£ç¡®çƒ­èº«ï¼Ÿè·‘æ­¥åå¦‚ä½•æ‹‰ä¼¸ï¼Ÿ"</span>
          <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"è¾“å…¥æ¶ˆæ¯"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleVoiceInput"</span> 
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!appState.avatar.connected || appState.asr.isListening"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-voice"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-icon"</span>&gt;</span>ğŸ™ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {{ appState.asr.isListening ? 'æ­£åœ¨å¬...' : 'è¯­éŸ³è¾“å…¥' }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSendMessage"</span> 
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!appState.avatar.connected || !appState.ui.text.trim() || isSending"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-icon"</span>&gt;</span>ğŸš€<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {{ isSending ? 'å‘é€ä¸­...' : 'å‘é€' }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç¤ºä¾‹é—®é¢˜ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel-section"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-icon"</span>&gt;</span>ğŸ’¡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section-title"</span>&gt;</span>ç¤ºä¾‹é—®é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"examples-grid"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
          <span class="hljs-attr">v-for</span>=<span class="hljs-string">"example in exampleQuestions"</span> 
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"example"</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"example-btn"</span>
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"appState.ui.text = example"</span>
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!appState.avatar.connected"</span>
        &gt;</span>
          {{ example }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { inject, ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useAsr } <span class="hljs-keyword">from</span> <span class="hljs-string">'../composables/useAsr'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">SUPPORTED_LLM_MODELS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../constants'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppState</span>, <span class="hljs-title class_">AppStore</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>

<span class="hljs-comment">// æ³¨å…¥å…¨å±€çŠ¶æ€å’Œæ–¹æ³•</span>
<span class="hljs-keyword">const</span> appState = inject&lt;<span class="hljs-title class_">AppState</span>&gt;(<span class="hljs-string">'appState'</span>)!
<span class="hljs-keyword">const</span> appStore = inject&lt;<span class="hljs-title class_">AppStore</span>&gt;(<span class="hljs-string">'appStore'</span>)!

<span class="hljs-comment">// ç»„ä»¶çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isConnecting = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> isSending = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> supportedModels = <span class="hljs-variable constant_">SUPPORTED_LLM_MODELS</span>

<span class="hljs-comment">// è·‘æ­¥ç›¸å…³ç¤ºä¾‹é—®é¢˜</span>
<span class="hljs-keyword">const</span> exampleQuestions = [
  <span class="hljs-string">'å¦‚ä½•æ­£ç¡®çƒ­èº«ï¼Ÿ'</span>,
  <span class="hljs-string">'è·‘æ­¥åå¦‚ä½•æ‹‰ä¼¸ï¼Ÿ'</span>,
  <span class="hljs-string">'å¦‚ä½•æé«˜è·‘æ­¥é€Ÿåº¦ï¼Ÿ'</span>,
  <span class="hljs-string">'è·‘æ­¥æ—¶å¦‚ä½•å‘¼å¸ï¼Ÿ'</span>,
  <span class="hljs-string">'å¦‚ä½•é¿å…è·‘æ­¥å—ä¼¤ï¼Ÿ'</span>,
  <span class="hljs-string">'å¦‚ä½•é€‰æ‹©åˆé€‚çš„è·‘é‹ï¼Ÿ'</span>,
  <span class="hljs-string">'åˆå­¦è€…è·‘æ­¥è®¡åˆ’æ¨è'</span>,
  <span class="hljs-string">'å¦‚ä½•æé«˜è€åŠ›ï¼Ÿ'</span>
]

<span class="hljs-comment">// ASR Hook - ä½¿ç”¨computedç¡®ä¿é…ç½®æ›´æ–°æ—¶é‡æ–°åˆ›å»º</span>
<span class="hljs-keyword">const</span> asrConfig = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">provider</span>: <span class="hljs-string">'tx'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
  <span class="hljs-attr">appId</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">appId</span>,
  <span class="hljs-attr">secretId</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">secretId</span>,
  <span class="hljs-attr">secretKey</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">secretKey</span>
}))

<span class="hljs-comment">// åˆå§‹åŒ–ASR hookï¼ˆç”¨äºåœæ­¢åŠŸèƒ½ï¼‰</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">stop</span>: stopAsr } = <span class="hljs-title function_">useAsr</span>(asrConfig.<span class="hljs-property">value</span>)

<span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConnect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (isConnecting.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
  
  isConnecting.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> appStore.<span class="hljs-title function_">connectAvatar</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿æ¥å¤±è´¥:'</span>, error)
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®ä¿¡æ¯'</span>)
  } <span class="hljs-keyword">finally</span> {
    isConnecting.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDisconnect</span>(<span class="hljs-params"/>) {
  appStore.<span class="hljs-title function_">disconnectAvatar</span>()
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleVoiceInput</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (appState.<span class="hljs-property">asr</span>.<span class="hljs-property">isListening</span>) {
    <span class="hljs-title function_">stopAsr</span>()
    appStore.<span class="hljs-title function_">stopVoiceInput</span>()
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// éªŒè¯ASRé…ç½®</span>
  <span class="hljs-keyword">const</span> { appId, secretId, secretKey } = appState.<span class="hljs-property">asr</span>
  <span class="hljs-keyword">if</span> (!appId || !secretId || !secretKey) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å…ˆé…ç½®ASRä¿¡æ¯ï¼ˆApp IDã€Secret IDã€Secret Keyï¼‰'</span>)
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// åˆ›å»ºæ–°çš„ASRå®ä¾‹ï¼ˆä½¿ç”¨å½“å‰é…ç½®ï¼‰</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">start</span>: startAsrWithConfig, <span class="hljs-attr">stop</span>: stopAsrWithConfig } = <span class="hljs-title function_">useAsr</span>({
    <span class="hljs-attr">provider</span>: <span class="hljs-string">'tx'</span>,
    <span class="hljs-attr">appId</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">appId</span>,
    <span class="hljs-attr">secretId</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">secretId</span>,
    <span class="hljs-attr">secretKey</span>: appState.<span class="hljs-property">asr</span>.<span class="hljs-property">secretKey</span>
  })
  
  appStore.<span class="hljs-title function_">startVoiceInput</span>({
    <span class="hljs-attr">onFinished</span>: <span class="hljs-function">(<span class="hljs-params">text: string</span>) =&gt;</span> {
      appState.<span class="hljs-property">ui</span>.<span class="hljs-property">text</span> = text
      <span class="hljs-title function_">stopAsrWithConfig</span>()
      appStore.<span class="hljs-title function_">stopVoiceInput</span>()
    },
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯­éŸ³è¯†åˆ«é”™è¯¯:'</span>, error)
      <span class="hljs-title function_">stopAsrWithConfig</span>()
      appStore.<span class="hljs-title function_">stopVoiceInput</span>()
    }
  })
  
  <span class="hljs-title function_">startAsrWithConfig</span>({
    <span class="hljs-attr">onFinished</span>: <span class="hljs-function">(<span class="hljs-params">text: string</span>) =&gt;</span> {
      appState.<span class="hljs-property">ui</span>.<span class="hljs-property">text</span> = text
      appStore.<span class="hljs-title function_">stopVoiceInput</span>()
    },
    <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: any</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯­éŸ³è¯†åˆ«é”™è¯¯:'</span>, error)
      appStore.<span class="hljs-title function_">stopVoiceInput</span>()
    }
  })
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSendMessage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (isSending.<span class="hljs-property">value</span> || !appState.<span class="hljs-property">ui</span>.<span class="hljs-property">text</span>.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>
  
  isSending.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> appStore.<span class="hljs-title function_">sendMessage</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘é€æ¶ˆæ¯å¤±è´¥:'</span>, error)
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å‘é€æ¶ˆæ¯å¤±è´¥'</span>)
  } <span class="hljs-keyword">finally</span> {
    isSending.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.config-panel</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* æ¬¢è¿åŒºåŸŸ */</span>
<span class="hljs-selector-class">.welcome-section</span> {
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-number">32px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
}

<span class="hljs-selector-class">.welcome-icon</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">64px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">display</span>: block;
}

<span class="hljs-selector-class">.welcome-title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1d1d1f</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.welcome-subtitle</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6e6e73</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
}

<span class="hljs-comment">/* é¢æ¿åŒºåŸŸ */</span>
<span class="hljs-selector-class">.panel-section</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">16px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.08</span>);
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span> ease, box-shadow <span class="hljs-number">0.2s</span> ease;
}

<span class="hljs-selector-class">.panel-section</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">6px</span> <span class="hljs-number">20px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.12</span>);
}

<span class="hljs-selector-class">.section-header</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f0f0f5</span>;
}

<span class="hljs-selector-class">.section-icon</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.section-title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1d1d1f</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* è¡¨å•æ ·å¼ */</span>
<span class="hljs-selector-class">.form-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.form-group</span><span class="hljs-selector-pseudo">:last-child</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.form-label</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6e6e73</span>;
  <span class="hljs-attribute">text-transform</span>: uppercase;
  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.5px</span>;
}

<span class="hljs-selector-class">.form-input</span>,
<span class="hljs-selector-class">.form-select</span>,
<span class="hljs-selector-class">.form-textarea</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5ea</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1d1d1f</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fafafa</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-class">.form-input</span><span class="hljs-selector-pseudo">:focus</span>,
<span class="hljs-selector-class">.form-select</span><span class="hljs-selector-pseudo">:focus</span>,
<span class="hljs-selector-class">.form-textarea</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#667eea</span>;
  <span class="hljs-attribute">background-color</span>: white;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">3px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">126</span>, <span class="hljs-number">234</span>, <span class="hljs-number">0.1</span>);
}

<span class="hljs-selector-class">.form-textarea</span> {
  <span class="hljs-attribute">resize</span>: vertical;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">80px</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
}

<span class="hljs-comment">/* æŒ‰é’®æ ·å¼ */</span>
<span class="hljs-selector-class">.button-group</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">justify-content</span>: flex-end;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.btn</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">text-transform</span>: uppercase;
  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.5px</span>;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
  <span class="hljs-attribute">transform</span>: none;
}

<span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.btn-primary</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>) {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">126</span>, <span class="hljs-number">234</span>, <span class="hljs-number">0.4</span>);
}

<span class="hljs-selector-class">.btn-secondary</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f7</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6e6e73</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5ea</span>;
}

<span class="hljs-selector-class">.btn-secondary</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>) {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#e5e5ea</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
}

<span class="hljs-selector-class">.btn-voice</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#11998e</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#38ef7d</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.btn-voice</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>) {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">17</span>, <span class="hljs-number">153</span>, <span class="hljs-number">142</span>, <span class="hljs-number">0.4</span>);
}

<span class="hljs-selector-class">.btn-icon</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-comment">/* ç¤ºä¾‹é—®é¢˜ */</span>
<span class="hljs-selector-class">.examples-grid</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">140px</span>, <span class="hljs-number">1</span>fr));
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.example-btn</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5ea</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fafafa</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6e6e73</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.4</span>;
}

<span class="hljs-selector-class">.example-btn</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-pseudo">:disabled</span>) {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#667eea</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#667eea</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">1px</span>);
}

<span class="hljs-selector-class">.example-btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
}

<span class="hljs-comment">/* æ»šåŠ¨æ¡ç¾åŒ– */</span>
<span class="hljs-selector-class">.config-panel</span>::-webkit-scrollbar {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">6px</span>;
}

<span class="hljs-selector-class">.config-panel</span>::-webkit-scrollbar-track {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
}

<span class="hljs-selector-class">.config-panel</span>::-webkit-scrollbar-thumb {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.5</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
}

<span class="hljs-selector-class">.config-panel</span>::-webkit-scrollbar-thumb:hover {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.7</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-7">è™šæ‹Ÿäººæ¸²æŸ“ç»„ä»¶</h3>
<p>ä¸»è¦è´Ÿè´£åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºæ•°å­—äººå¹¶å±•ç¤ºäº¤äº’çŠ¶æ€ã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li>è™šæ‹Ÿäººæ¸²æŸ“ ï¼šæä¾›SDKæ¸²æŸ“å®¹å™¨ï¼Œç”¨äºæ˜¾ç¤ºæ•°å­—äººå½¢è±¡</li>
<li>çŠ¶æ€æ˜¾ç¤º ï¼šå±•ç¤ºè™šæ‹Ÿäººçš„è¿æ¥çŠ¶æ€ï¼ˆåŠ è½½ä¸­/å°±ç»ªï¼‰</li>
<li>å­—å¹•å±•ç¤º ï¼šæ˜¾ç¤ºè™šæ‹Ÿäººè¯´è¯çš„å†…å®¹</li>
<li>äº¤äº’åé¦ˆ ï¼šå±•ç¤ºè¯­éŸ³è¾“å…¥çš„åŠ¨æ€æ•ˆæœ</li>
</ol>
<p>ä¸»è¦æ¨¡å—ï¼š</p>
<ul>
<li>å¤´åƒæ ‡é¢˜æ  ï¼šæ˜¾ç¤ºåº”ç”¨åç§°å’Œè¿æ¥çŠ¶æ€</li>
<li>SDKæ¸²æŸ“å®¹å™¨ ï¼šæ•°å­—äººå½¢è±¡çš„æ˜¾ç¤ºåŒºåŸŸ</li>
<li>å­—å¹•å®¹å™¨ ï¼šå±•ç¤ºè™šæ‹Ÿäººå¯¹è¯å†…å®¹</li>
<li>è¯­éŸ³è¾“å…¥åŠ¨ç”» ï¼šæ˜¾ç¤ºè¯­éŸ³è¯†åˆ«çš„è¿›è¡ŒçŠ¶æ€</li>
<li>åŠ è½½çŠ¶æ€ ï¼šå±•ç¤ºè™šæ‹Ÿäººè¿æ¥è¿‡ç¨‹</li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-render-container"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"containerRef"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-title"</span>&gt;</span>è·‘æ­¥çŸ¥è¯†åŠ©æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-status"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{'active': appState.avatar.connected}"</span>&gt;</span>
        {{ !appState.avatar.connected ? 'åŠ è½½ä¸­' : 'å°±ç»ª' }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- SDK æ¸²æŸ“å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:id</span>=<span class="hljs-string">"containerId"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sdk-render-container"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å­—å¹•æ˜¾ç¤º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"appState.ui.subTitleText"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subtitle-container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subtitle-icon"</span>&gt;</span>ğŸ’¬<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subtitle-text"</span>&gt;</span>{{ appState.ui.subTitleText }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- è¯­éŸ³è¾“å…¥åŠ¨ç”» --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"appState.asr.isListening"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"voice-input-animation"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"voice-animation-dot"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"voice-animation-dot"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"voice-animation-dot"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åŠ è½½çŠ¶æ€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!appState.avatar.connected"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading-container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading-spinner"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading-text"</span>&gt;</span>æ­£åœ¨åŠ è½½è™šæ‹ŸåŠ©æ‰‹...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { inject, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { avatarService } <span class="hljs-keyword">from</span> <span class="hljs-string">'../services/avatar'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>

<span class="hljs-comment">// æ³¨å…¥å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">const</span> appState = inject&lt;<span class="hljs-title class_">AppState</span>&gt;(<span class="hljs-string">'appState'</span>)!
<span class="hljs-keyword">const</span> appStore = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'appStore'</span>)

<span class="hljs-comment">// è·å–å®¹å™¨ID</span>
<span class="hljs-keyword">const</span> containerId = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> avatarService.<span class="hljs-title function_">getContainerId</span>())
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.avatar-render-container</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: flex-start;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">20px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
}

<span class="hljs-selector-class">.avatar-header</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
}

<span class="hljs-selector-class">.avatar-title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.avatar-status</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-selector-class">.avatar-status</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">72</span>, <span class="hljs-number">187</span>, <span class="hljs-number">120</span>, <span class="hljs-number">0.8</span>);
}

<span class="hljs-selector-class">.sdk-render-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">160px</span>);
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.subtitle-container</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">40px</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">text-align</span>: left;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">90%</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
}

<span class="hljs-selector-class">.subtitle-icon</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.subtitle-text</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">word-break</span>: break-word;
}

<span class="hljs-selector-class">.voice-input-animation</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">40px</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50%</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">101</span>;
}

<span class="hljs-selector-class">.voice-animation-dot</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#48bb78</span>;
  <span class="hljs-attribute">animation</span>: voice-pulse <span class="hljs-number">1.4s</span> infinite ease-in-out both;
}

<span class="hljs-selector-class">.voice-animation-dot</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
  <span class="hljs-attribute">animation-delay</span>: -<span class="hljs-number">0.32s</span>;
}

<span class="hljs-selector-class">.voice-animation-dot</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
  <span class="hljs-attribute">animation-delay</span>: -<span class="hljs-number">0.16s</span>;
}

<span class="hljs-keyword">@keyframes</span> voice-pulse {
  <span class="hljs-number">0%</span>, <span class="hljs-number">80%</span>, <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0</span>);
  }
  <span class="hljs-number">40%</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.0</span>);
  }
}

<span class="hljs-selector-class">.loading-container</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.95</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">20px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
}

<span class="hljs-selector-class">.loading-spinner</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">102</span>, <span class="hljs-number">126</span>, <span class="hljs-number">234</span>, <span class="hljs-number">0.2</span>);
  <span class="hljs-attribute">border-left-color</span>: <span class="hljs-number">#667eea</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">animation</span>: spin <span class="hljs-number">1s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> spin {
  <span class="hljs-selector-tag">to</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>);
  }
}

<span class="hljs-selector-class">.loading-text</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªç»„ä»¶å…±åŒæ„æˆäº†è·‘æ­¥çŸ¥è¯†ç”Ÿæ´»åŠ©æ‰‹çš„æ ¸å¿ƒç•Œé¢ï¼ŒConfigPanelè´Ÿè´£ç”¨æˆ·è¾“å…¥å’Œé…ç½®ç®¡ç†ï¼ŒAvatarRenderè´Ÿè´£è™šæ‹Ÿäººå±•ç¤ºå’Œäº¤äº’åé¦ˆï¼Œä¸¤è€…é…åˆå®ç°äº†å®Œæ•´çš„è™šæ‹ŸäººåŠ©æ‰‹åŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7d25be5d11c409594c8c2aa5d755341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=bN3E6Uqso5O%2Fsyz01GOJM5bw7ec%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee0631c18cec4726b7135160ecb6166f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=qRrXkMT6f1v5u706fPnX24VgWS4%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae44719fb6604a239214721fcf3c6ac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=avNwpCZ69x9YiRrSGUWV4GMuY5s%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65a7d4f9d8c244a1b8e3d01ea8909e80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=i1vc2JPE6TDOB3Bhgzbh5Xt%2FHio%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6758875fed1741fab4b2f30c9ebda2d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=7XXntSwBL78EVO9NmuuNGPzxDqw%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47aaf859f0fd48d7a5dabd2b8e832768~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=PPO%2BHfSEMFoY8zaCfp7B4wZItjc%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p>æœ¬é¡¹ç›®å®Œæ•´è½åœ°äº†ä¸€ä¸ªâ€œæ•°å­—äºº + ASR + LLMâ€ä¸‰ä½ä¸€ä½“çš„è·‘æ­¥çŸ¥è¯†åŠ©æ‰‹ï¼Œä» UI é…ç½®é¢æ¿åˆ°è™šæ‹Ÿäººæ¸²æŸ“å±‚ï¼Œå†åˆ°æ¶ˆæ¯æµè½¬ã€è¯­éŸ³è¯†åˆ«ã€è¯­è¨€æ¨¡å‹æ¨ç†ï¼Œæ¯ä¸ªæ¨¡å—éƒ½è¿›è¡Œäº†å·¥ç¨‹åŒ–è§£è€¦ä¸å¯å¤ç”¨è®¾è®¡ï¼Œé€‚åˆä½œä¸ºåç»­æ›´å¤š AI åŠ©æ‰‹çš„å·¥ç¨‹ã€‚</p>
<p>é€šè¿‡æœ¬æ¬¡å®è·µå¯ä»¥çœ‹åˆ°ï¼Œé­”ç Mofa Avatar SDK ä¸ä»…ä¸º Web ç«¯æä¾›äº†é«˜åº¦å·¥ç¨‹åŒ–çš„æ•°å­—äººæ¸²æŸ“èƒ½åŠ›ï¼Œæ›´é‡è¦çš„æ˜¯å®ƒä»¥æå…¶è½»é‡çš„æ¥å…¥æ–¹å¼ï¼Œå°†â€œçœ‹å¾—è§ã€å¬å¾—æ‡‚ã€èƒ½è¡¨è¾¾â€çš„ AI åŠ©æ‰‹èƒ½åŠ›å¸¦åˆ°äº†æµè§ˆå™¨ä¾§ã€‚å€ŸåŠ© SDK æä¾›çš„è¿æ¥ç®¡ç†ã€å­—å¹•å›è°ƒã€è¯­éŸ³é©±åŠ¨å…¼å®¹ã€èµ„æºåŠ è½½ä¼˜åŒ–ç­‰èƒ½åŠ›ï¼Œæˆ‘ä»¬å‡ ä¹ä¸éœ€è¦å…³å¿ƒåº•å±‚çš„å¤æ‚æ¸²æŸ“ç®¡çº¿ï¼Œå°±èƒ½ä¸“æ³¨åœ¨ä¸šåŠ¡é€»è¾‘ã€ASR æµç¨‹ä»¥åŠ LLM çš„æ¨ç†é“¾è·¯å¼€å‘ä¸Šã€‚</p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬æ‰“é€ äº†ä¸€ä¸ªå¯çœŸå®å¯¹è¯ã€å¯å®æ—¶åé¦ˆã€ä½“éªŒè‡ªç„¶æµç•…çš„è·‘æ­¥çŸ¥è¯†åŠ©æ‰‹ã€‚è¿™ç§â€œç”¨æä½æˆæœ¬å®Œæˆæé«˜ä½“éªŒâ€çš„å¼€å‘æ–¹å¼ï¼Œæ­£æ˜¯é­”ç SDK çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-8"><strong>é­”çæ˜Ÿäº‘å…­å¤§æ ¸å¿ƒç‰¹ç‚¹</strong></h2>
<p>é­”çæ˜Ÿäº‘å¹³å°ä¹‹æ‰€ä»¥èƒ½å¤Ÿåœ¨æ•°å­—äººé¢†åŸŸè„±é¢–è€Œå‡ºï¼Œä¸»è¦å¾—ç›Šäºå…¶å…­å¤§æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>é«˜è´¨é‡</strong></li>
</ol>
<p>æ”¯æŒè¶…å†™å®ã€äºŒæ¬¡å…ƒç­‰å¤šç§é£æ ¼çš„æ•°å­—äººï¼Œå½¢è±¡ç»†èŠ‚ï¼ˆå¤´å‘ä¸ã€çš®è‚¤çº¹ç†ï¼‰ç‰¹åˆ«é€¼çœŸï¼ŒåŠ¨ä½œã€è¡¨æƒ…å’Œè¯­éŸ³é«˜åº¦åŒæ­¥ï¼Œç”šè‡³èƒ½æ¨¡ä»¿"æŒ‘çœ‰""ç‚¹å¤´"è¿™äº›å¾®è¡¨æƒ…ã€‚</p>
<ol start="2">
<li><strong>ä½å»¶æ—¶ï¼ˆå¯éšæ—¶æ‰“æ–­ï¼‰</strong></li>
</ol>
<p>é‡‡ç”¨é«˜è‡ªç„¶åº¦TTSè¯­éŸ³åˆæˆï¼Œå°æ¨¡å‹å»¶è¿Ÿçº¦100msï¼Œå¤§æ¨¡å‹çº¦500msï¼›æ”¯æŒå¤šè¯­è¨€ã€å¤šéŸ³è‰²ï¼Œé€‚é…å¤šæ ·åŒ–åœºæ™¯éœ€æ±‚ã€‚æœ€é‡è¦çš„æ˜¯æ”¯æŒ"ä¸­é€”æ‰“æ–­"ï¼Œå°±è·Ÿå’ŒçœŸäººèŠå¤©ä¸€æ ·ï¼Œéšæ—¶èƒ½æ’æ–°é—®é¢˜ã€‚</p>
<ol start="3">
<li><strong>é«˜å¹¶å‘</strong></li>
</ol>
<p>æ”¯æŒåƒä¸‡çº§è®¾å¤‡åŒæ—¶ä½¿ç”¨ï¼Œä¸ç®¡æ˜¯ä¼ä¸šçº§çš„å®¢æœç³»ç»Ÿï¼Œè¿˜æ˜¯å¤§è§„æ¨¡çš„å…¬å…±æœåŠ¡å±ï¼Œéƒ½èƒ½ç¨³ç¨³æ‰¿è½½ã€‚</p>
<ol start="4">
<li><strong>ä½æˆæœ¬</strong></li>
</ol>
<p>é‡‡ç”¨AIå®æ—¶ç«¯ä¾§æ¸²æŸ“ï¼Œä¸ç”¨ä¼ ç»Ÿå¼•æ“ä¹Ÿä¸ç”¨GPUåŠ æŒï¼Œè¿˜100%å…¼å®¹å›½äº§ä¿¡åˆ›ï¼Œå…¥é—¨çº§èŠ¯ç‰‡å°±èƒ½è®©æ•°å­—äººæµç•…è·‘èµ·æ¥ã€‚</p>
<ol start="5">
<li><strong>å¤šç»ˆç«¯æ”¯æŒ</strong></li>
</ol>
<p>å…¼å®¹æ‰‹æœºã€å¹³æ¿ã€PCã€è½¦è½½å±ã€ç”µè§†ç­‰æ‰€æœ‰ç»ˆç«¯ï¼Œé€‚é…Androidã€iOSã€é¸¿è’™ç­‰ä¸»æµç³»ç»Ÿã€‚</p>
<ol start="6">
<li><strong>ä¿¡åˆ›æ”¯æŒ</strong></li>
</ol>
<p>å®Œå…¨å…¼å®¹å›½äº§ä¿¡åˆ›ä½“ç³»ï¼Œå¯æŒ‰éœ€é€‰æ‹©å…¬å…±äº‘/ç§æœ‰åŒ–/æœ¬åœ°åŒ–éƒ¨ç½²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83f3d221bad54bd893b2d2951b14e695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=mgng7yyLdeQ3geNNgAsW2U%2BwbzY%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-9"><strong>æ‰“ç ´æ•°å­—äººä¸å¯èƒ½ä¸‰è§’</strong></h2>
<p>åœ¨ä¼ ç»Ÿçš„æ•°å­—äººå¼€å‘é¢†åŸŸï¼Œä¸€ç›´å­˜åœ¨ç€ä¸€ä¸ªå›°æ‰°ä»ä¸šè€…å·²ä¹…çš„"ä¸å¯èƒ½ä¸‰è§’"â€”â€”é«˜è´¨é‡è¡¨ç°ã€ä½å»¶è¿Ÿå“åº”ã€ä½æˆæœ¬éƒ¨ç½²ä¸‰è€…éš¾ä»¥å…¼å¾—ã€‚ä»»ä½•å•ä¸€ç»´åº¦çš„ä¼˜åŒ–éƒ½éœ€ä»¥ç‰ºç‰²å¦å¤–ä¸¤è€…ä¸ºä»£ä»·ã€‚</p>
<p>é­”çæ˜Ÿäº‘é€šè¿‡ä»¥ä¸‹æŠ€æœ¯åˆ›æ–°æˆåŠŸæ‰“ç ´äº†è¿™ä¸€å›°å±€ï¼š</p>
<h3 data-id="heading-10"><strong>æ–‡ç”Ÿå¤šæ¨¡æ€3Då¤§æ¨¡å‹</strong></h3>
<p>é­”çæ˜Ÿäº‘é‡‡ç”¨äº†è‡ªç ”çš„å…¨çƒé¦–ä¸ªæ–‡ç”Ÿå¤šæ¨¡æ€3Då¤§æ¨¡å‹ï¼Œç›´æ¥å°†æ–‡æœ¬/è¯­éŸ³è½¬æ¢ä¸ºè¯­éŸ³ã€åŠ¨ä½œã€è¡¨æƒ…ã€æ‰‹åŠ¿ç­‰å¤šæ¨¡æ€çš„3Dè¡¨è¾¾ä¿¡å·ã€‚è¿™ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†ä¼ ç»Ÿæ•°å­—äººå¼€å‘æ¨¡å¼ï¼Œå¤§å¹…æå‡äº†æ•ˆç‡å’Œè´¨é‡ã€‚</p>
<h3 data-id="heading-11"><strong>äº‘-ç«¯ååŒæ¶æ„</strong></h3>
<p>åœ¨æ¶æ„å±‚é¢ï¼Œé­”çæ˜Ÿäº‘è¿›è¡Œäº†äº‘-ç«¯æ‹†åˆ†ï¼š</p>
<ul>
<li>
<p><strong>äº‘ç«¯</strong>ï¼šåªç”Ÿæˆè½»é‡çº§çš„åŠ¨ä½œå’Œè¯­éŸ³å‚æ•°ï¼ˆéè§†é¢‘æµï¼‰ï¼ŒåŒ…å«éŸ³é¢‘æ³¢å½¢ç‰¹å¾ä¸3Déª¨éª¼ã€è¡¨æƒ…ã€æ‰‹åŠ¿ç­‰è¯­ä¹‰åŠ¨ä½œä¿¡å·ï¼Œæå¤§é™ä½ä¸‹è¡Œå¸¦å®½</p>
</li>
<li>
<p><strong>ç«¯ä¾§</strong>ï¼šé€šè¿‡AIè§£ç®—æ¨¡å—ï¼Œå°†è¿™äº›å‚æ•°å®æ—¶è½¬åŒ–ä¸ºç”»é¢</p>
</li>
</ul>
<h3 data-id="heading-12"><strong>è‡ªç ”é«˜è´¨é‡3DåŠ¨ç”»æ•°æ®</strong></h3>
<p>é­”çç§‘æŠ€è‡ª2018å¹´èµ·ç§¯ç´¯äº†å¤§é‡é«˜è´¨é‡çš„3DåŠ¨ç”»æ•°æ®ï¼Œæ¯ä¸€æ¡éƒ½éœ€è¦å…·å¤‡å¼ºåŠ¨ç”»åˆ¶ä½œèƒ½åŠ›çš„å›¢é˜Ÿè¿›è¡Œæ ‡å®šä¸å®¡æ ¸çš„åˆ¶ä½œï¼Œå› æ­¤æˆæœ¬æé«˜æ¯ç§’çº¦1000å…ƒäººæ°‘å¸ã€‚è¿™äº›æ¶µç›–äººè„¸ã€æ‰‹åŠ¿ã€èº«ä½“åŠ¨ä½œä¸è¡¨æƒ…çš„é«˜è´¨é‡3DåŠ¨ç”»æ•°æ®ï¼Œæ„æˆäº†å…¶æ¨¡å‹è®­ç»ƒçš„ç‹¬ç‰¹æŠ¤åŸæ²³ã€‚</p>
<p>é€šè¿‡è¿™äº›æŠ€æœ¯åˆ›æ–°çš„ååŒçªç ´ï¼Œé­”çæ˜Ÿäº‘ä¸ä»…åœ¨æ¨¡å‹å±‚ï¼ˆæ–‡ç”Ÿ3Då¤šæ¨¡æ€ï¼‰å®ç°äº†è¯­ä¹‰åˆ°èº«ä½“è¯­è¨€çš„çªç ´ï¼Œæ›´åœ¨ç³»ç»Ÿå±‚ï¼ˆäº‘â€“ç«¯æ¶æ„ï¼‰å®Œæˆäº†æ€§èƒ½ã€æˆæœ¬ä¸å»¶è¿Ÿçš„ååŒåˆ›æ–°ï¼Œæˆä¸ºå…¨çƒé¦–ä¸ªå¯å¤§è§„æ¨¡å•†ç”¨çš„å…·èº«æ™ºèƒ½åº•å±‚åŸºå»ºã€‚</p>
<h2 data-id="heading-13"><strong>ä¸°å¯Œåº”ç”¨åœºæ™¯æ¢ç´¢</strong></h2>
<p>é­”çæ˜Ÿäº‘å‡­å€Ÿå…¶å¼ºå¤§çš„æŠ€æœ¯ä¼˜åŠ¿å’Œçµæ´»çš„éƒ¨ç½²èƒ½åŠ›ï¼Œå¯ä»¥åº”ç”¨äºå¤šç§åœºæ™¯ï¼š</p>
<h3 data-id="heading-14"><strong>å…¬å…±æœåŠ¡å±</strong></h3>
<p>åœ¨é…’åº—å¤§å ‚ã€é“¶è¡Œã€åŒ»é™¢ã€è½¦ç«™ç­‰åœºæ‰€éƒ¨ç½²24/7å…¨å¤©å€™æœåŠ¡çš„æ•°å­—äººï¼Œæä¾›å¯¼è§ˆã€å’¨è¯¢ã€åŠç†ç­‰æœåŠ¡ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„äººå·¥æœåŠ¡ï¼Œæ•°å­—äººå¯ä»¥æä¾›æ›´åŠ æ ‡å‡†åŒ–ã€ä¸ªæ€§åŒ–çš„æœåŠ¡ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48f0682befd64f8eb43bbd7e190665b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=VLv3sk0mz0MRoj2Zg6AgpPxddaQ%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-15"><strong>é›¶å”®/è¥é”€å±</strong></h3>
<p>åœ¨å•†åœºã€é—¨åº—ã€æ•°å­—æ ‡ç‰Œç­‰åœºæ™¯ä¸­ï¼Œæ•°å­—äººå¯ä»¥ä¸»åŠ¨ä¸é¡¾å®¢äº¤æµï¼Œæ¨èå•†å“ã€è§£ç­”ç–‘é—®ï¼Œæå‡è´­ç‰©ä½“éªŒå’Œè½¬åŒ–ç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4eba32901d148588a071b3c20b2acfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=466EhLmekEFvJleIjPJYED8Hs0A%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-16"><strong>ä¸ªäººè®¾å¤‡</strong></h3>
<p>å°†æ‰‹æœºã€ç”µè§†ã€è½¦æœºå±ç­‰è®¾å¤‡å˜æˆæ—¥å¸¸çš„AIä¼™ä¼´ï¼Œæä¾›ä¸ªæ€§åŒ–çš„ç”Ÿæ´»åŠ©æ‰‹æœåŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86632fbc41c443129bb7ecc8d6e029e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=RoupfNOsYqCxR%2F4OJzbxMo%2Bji4A%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-17"><strong>æ²‰æµ¸å¼åœºæ™¯</strong></h3>
<p>åœ¨AR/VR/MRå¤´æ˜¾ç­‰è®¾å¤‡ä¸­ï¼Œæ•°å­—äººå¯ä»¥ä½œä¸ºè™šæ‹Ÿå‘å¯¼æˆ–ä¼™ä¼´ï¼Œæä¾›æ›´åŠ æ²‰æµ¸å¼çš„äº¤äº’ä½“éªŒã€‚</p>
<h3 data-id="heading-18"><strong>äººå½¢æœºå™¨äºº</strong></h3>
<p>é©±åŠ¨äººå½¢æœºå™¨äººï¼Œè®©äººå½¢æœºå™¨äººä»ä¼šåŠ¨ä¼šæ“ä½œçš„"è“é¢†"ï¼Œå‡çº§ä¸ºèƒ½ç†è§£ã€ä¼šäº¤æµçš„"æ™ºèƒ½ç™½é¢†"ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99e423e55a47466dbe8891ed25cac682~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=EikuEXDsGPrlDv8hma6fu3azYGM%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-19"><strong>IPæ´»åŒ–</strong></h3>
<p>è®©æ¯ä¸€ä¸ªIPéƒ½"æ´»"èµ·æ¥ï¼Œä»è™šæ‹Ÿè§’è‰²åˆ°çœŸå®ä½“éªŒï¼Œæ¯ä¸€ä¸ªIPéƒ½èƒ½æ‹¥æœ‰çµé­‚ï¼š</p>
<ul>
<li>
<p><strong>æ¸¸æˆNPC</strong>ï¼šä¸å†æ˜¯å›ºå®šè„šæœ¬ï¼Œè€Œæ˜¯èƒ½æ€è€ƒã€ä¼šäº’åŠ¨çš„è§’è‰²</p>
</li>
<li>
<p><strong>è™šæ‹ŸIP</strong>ï¼šæ•°å­—æ‰‹åŠã€è™šæ‹Ÿæ˜æ˜Ÿï¼Œèƒ½çœŸæ­£ä¸ç²‰ä¸äº’åŠ¨äº¤æµ</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0679a024bc64e029d07e539188ca2dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=2wFIBcfPw2e3mSqI%2FOIBKg9vJgE%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h2 data-id="heading-20"><strong>å¼€å‘è€…ä½“éªŒä¸SDKæ˜“ç”¨æ€§è¯„ä¼°</strong></h2>
<p>ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œåœ¨å®é™…ä½¿ç”¨é­”çæ˜Ÿäº‘SDKçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·±åˆ»æ„Ÿå—åˆ°äº†å…¶è®¾è®¡çš„å·§å¦™å’Œæ˜“ç”¨æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/101e20fe38a0443c93a2b04275de73cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765453782&amp;x-signature=ZOOeVon0gPSuXYU4dOEa3llBOnA%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<h3 data-id="heading-21"><strong>æç®€çš„é›†æˆæµç¨‹</strong></h3>
<p>é­”çæ˜Ÿäº‘SDKçš„é›†æˆæµç¨‹éå¸¸ç®€æ´ï¼Œé€šè¿‡ç®€å•çš„npmå®‰è£…å‘½ä»¤å³å¯å®Œæˆä¾èµ–å®‰è£…ã€‚å®˜æ–¹æä¾›äº†å®Œæ•´çš„Demoé¡¹ç›®ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œï¼Œå¤§å¤§é™ä½äº†å­¦ä¹ æˆæœ¬ã€‚</p>
<h3 data-id="heading-22"><strong>ä¸°å¯Œçš„APIæ¥å£</strong></h3>
<p>SDKæä¾›äº†ä¸°å¯Œçš„APIæ¥å£ï¼Œæ¶µç›–äº†æ•°å­—äººçš„å„ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>åŸºç¡€æ§åˆ¶ï¼šæ’­æ”¾ã€æš‚åœã€åœæ­¢</li>
<li>è¡¨æƒ…æ§åˆ¶ï¼šå¾®ç¬‘ã€æƒŠè®¶ã€æ„¤æ€’ç­‰</li>
<li>æ‰‹åŠ¿æ§åˆ¶ï¼šæŒ¥æ‰‹ã€ç‚¹å¤´ã€é¼“æŒç­‰</li>
<li>è¯­éŸ³æ§åˆ¶ï¼šæ–‡æœ¬è½¬è¯­éŸ³ã€è¯­éŸ³æ’­æ”¾æ§åˆ¶</li>
</ul>
<h3 data-id="heading-23"><strong>å®Œå–„çš„æ–‡æ¡£æ”¯æŒ</strong></h3>
<p>é­”çæ˜Ÿäº‘æä¾›äº†è¯¦å°½çš„å¼€å‘æ–‡æ¡£ï¼ŒåŒ…æ‹¬APIå‚è€ƒã€ç¤ºä¾‹ä»£ç ã€å¸¸è§é—®é¢˜è§£ç­”ç­‰ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å’Œè§£å†³é—®é¢˜ã€‚</p>
<h3 data-id="heading-24"><strong>å¼ºå¤§çš„å…¼å®¹æ€§</strong></h3>
<p>SDKæ”¯æŒå¤šç§å‰ç«¯æ¡†æ¶ï¼ˆVueã€Reactç­‰ï¼‰å’Œç§»åŠ¨ç«¯å¹³å°ï¼ˆAndroidï¼‰ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„æŠ€æœ¯æ ˆé€‰æ‹©åˆé€‚çš„é›†æˆæ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-25"><strong>ä½é—¨æ§›çš„ç¡¬ä»¶è¦æ±‚</strong></h3>
<p>æœ€ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œé­”çæ˜Ÿäº‘SDKå¯¹ç¡¬ä»¶çš„è¦æ±‚æä½ï¼Œç”šè‡³å¯ä»¥åœ¨RK3566ç­‰å…¥é—¨çº§èŠ¯ç‰‡ä¸Šæµç•…è¿è¡Œï¼Œæ— éœ€é«˜æ€§èƒ½GPUæ”¯æŒï¼Œè¿™å¤§å¤§é™ä½äº†éƒ¨ç½²æˆæœ¬ã€‚</p>
<h3 data-id="heading-26"><strong>ç¨³å®šçš„æ€§èƒ½è¡¨ç°</strong></h3>
<p>åœ¨å®é™…æµ‹è¯•ä¸­ï¼ŒSDKè¡¨ç°å‡ºäº†æé«˜çš„ç¨³å®šæ€§å’Œæµç•…æ€§ï¼Œå³ä½¿åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¹Ÿèƒ½ä¿æŒè‰¯å¥½çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<h2 data-id="heading-27"><strong>æ€»ç»“</strong></h2>
<p>é­”çæ˜Ÿäº‘ä½œä¸ºå…¨çƒé¦–ä¸ªå…·èº«æ™ºèƒ½3Dæ•°å­—äººå¼€æ”¾å¹³å°ï¼Œä¸ä»…åœ¨æŠ€æœ¯ä¸Šå®ç°äº†é‡å¤§çªç ´ï¼Œæ›´åœ¨åº”ç”¨å±‚é¢ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚é€šè¿‡æ‰“ç ´æ•°å­—äººå¼€å‘çš„"ä¸å¯èƒ½ä¸‰è§’"ï¼Œé­”çæ˜Ÿäº‘è®©é«˜è´¨é‡ã€ä½å»¶è¿Ÿã€ä½æˆæœ¬çš„æ•°å­—äººåº”ç”¨æˆä¸ºå¯èƒ½ã€‚</p>
<p>å¹³å°çš„å…­å¤§æ ¸å¿ƒç‰¹ç‚¹â€”â€”é«˜è´¨é‡ã€ä½å»¶æ—¶ã€é«˜å¹¶å‘ã€ä½æˆæœ¬ã€å¤šç»ˆç«¯æ”¯æŒå’Œä¿¡åˆ›æ”¯æŒï¼Œä½¿å…¶åœ¨ä¼—å¤šæ•°å­—äººå¹³å°ä¸­è„±é¢–è€Œå‡ºã€‚æ— è®ºæ˜¯å¼€å‘è€…è¿˜æ˜¯ä¼ä¸šç”¨æˆ·ï¼Œéƒ½èƒ½ä»ä¸­è·å¾—å·¨å¤§çš„ä»·å€¼ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œé­”çæ˜Ÿäº‘æä¾›äº†æç®€çš„é›†æˆæµç¨‹ã€ä¸°å¯Œçš„APIæ¥å£å’Œè¯¦å°½çš„æ–‡æ¡£æ”¯æŒï¼Œå¤§å¤§é™ä½äº†å¼€å‘é—¨æ§›ã€‚åŒæ—¶ï¼Œå…¶å¯¹ç¡¬ä»¶çš„ä½è¦æ±‚ä½¿å¾—æ•°å­—äººåº”ç”¨å¯ä»¥åœ¨å„ç§è®¾å¤‡ä¸Šæµç•…è¿è¡Œï¼Œä¸ºå¤§è§„æ¨¡å•†ç”¨å¥ å®šäº†åŸºç¡€ã€‚</p>
<p>å¯¹äºä¼ä¸šç”¨æˆ·è€Œè¨€ï¼Œé­”çæ˜Ÿäº‘æä¾›äº†ä»è™šæ‹Ÿå®¢æœåˆ°äººå½¢æœºå™¨äººé©±åŠ¨çš„å…¨åœºæ™¯è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ»¡è¶³ä¸åŒè¡Œä¸šçš„åº”ç”¨éœ€æ±‚ã€‚ç‰¹åˆ«æ˜¯åœ¨å…¬å…±æœåŠ¡ã€é›¶å”®è¥é”€ã€ä¸ªäººè®¾å¤‡å’Œæ²‰æµ¸å¼åœºæ™¯ç­‰é¢†åŸŸï¼Œé­”çæ˜Ÿäº‘å±•ç°å‡ºäº†å·¨å¤§çš„åº”ç”¨æ½œåŠ›ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œé­”çæ˜Ÿäº‘ä¸ä»…æ˜¯æŠ€æœ¯ä¸Šçš„çªç ´ï¼Œæ›´æ˜¯å¯¹æœªæ¥äººæœºäº¤äº’æ–¹å¼çš„é‡æ–°å®šä¹‰ã€‚å®ƒè®©AIçœŸæ­£æ‹¥æœ‰äº†"èº«ä½“"ï¼Œå®ç°äº†ä»"èƒ½æ€è€ƒ"åˆ°"èƒ½è¡¨è¾¾"çš„è·¨è¶Šã€‚éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œå®Œå–„ï¼Œç›¸ä¿¡é­”çæ˜Ÿäº‘å°†åœ¨æ›´å¤šé¢†åŸŸå‘æŒ¥é‡è¦ä½œç”¨ï¼Œæ¨åŠ¨å…·èº«æ™ºèƒ½æŠ€æœ¯çš„æ™®åŠå’Œåº”ç”¨ã€‚</p>
<p><strong>è®©æ¯ä¸€å—å±å¹•éƒ½èƒ½æ´»èµ·æ¥</strong>â€”â€”è¿™ä¸ä»…æ˜¯é­”çç§‘æŠ€çš„æ„¿æ™¯ï¼Œæ›´æ˜¯æˆ‘ä»¬å³å°†è¿æ¥çš„æ™ºèƒ½äº¤äº’æ–°æ—¶ä»£ã€‚</p>
<p>é­”çæ˜Ÿäº‘ä½“éªŒåœ°å€ï¼šï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fxingyun3d.com%3Futm_campaign%3Ddaily%26utm_source%3DjixinghuiKoc28" title="https://xingyun3d.com?utm_campaign=daily&amp;utm_source=jixinghuiKoc28" target="_blank" ref="nofollow noopener noreferrer">xingyun3d.com?utm_campaign=daily&amp;utm_source=jixinghuiKoc28</a>ï¼‰</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS App æ··æ·†çš„çœŸå®ä¸–ç•ŒæŒ‡å—ï¼Œä»æ„å»ºåˆ°æˆå“ IPA çš„å®‰å…¨é“¾è·¯é‡å¡‘]]></title>    <link>https://juejin.cn/post/7579813925995724841</link>    <guid>https://juejin.cn/post/7579813925995724841</guid>    <pubDate>2025-12-04T10:09:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579813925995724841" data-draft-id="7579699192698355731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS App æ··æ·†çš„çœŸå®ä¸–ç•ŒæŒ‡å—ï¼Œä»æ„å»ºåˆ°æˆå“ IPA çš„å®‰å…¨é“¾è·¯é‡å¡‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T10:09:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS App æ··æ·†çš„çœŸå®ä¸–ç•ŒæŒ‡å—ï¼Œä»æ„å»ºåˆ°æˆå“ IPA çš„å®‰å…¨é“¾è·¯é‡å¡‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:09:33.000Z" title="Thu Dec 04 2025 10:09:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾ˆå¤šå›¢é˜Ÿé‡Œï¼Œâ€œiOS App æ··æ·†â€å¾€å¾€åªæœ‰ä¸Šçº¿å‰æ‰è¢«æƒ³èµ·ï¼š
åœ¨æµ‹è¯•ç»“æŸã€å‡†å¤‡æ‰“åŒ…ä¸Šä¼ æ—¶ï¼Œçªç„¶æœ‰äººè¯´ï¼šã€Œæˆ‘ä»¬è¦ä¸è¦åšä¸€ä¸‹æ··æ·†ï¼Ÿä¸ç„¶ Swift ç¬¦å·å¤ªæ˜æ˜¾äº†ã€‚ã€</p>
<p>ç„¶åä»“ä¿ƒæ‰¾å·¥å…·ã€éšä¾¿è¿è¡Œä¸€éæ··æ·†è„šæœ¬ï¼Œæœ€ç»ˆä¸æ˜¯å› ä¸ºç ´åäº†åå°„æœºåˆ¶å¯¼è‡´å´©æºƒï¼Œå°±æ˜¯å› ä¸ºèµ„æºè·¯å¾„æ”¹é”™è€Œå¯¼è‡´åŠŸèƒ½å¼‚å¸¸ã€‚
å¾ˆå¤šæ··æ·†äº‹æ•…ï¼Œéƒ½äº§ç”Ÿåœ¨é¡¹ç›®æœ€åä¸€å…¬é‡Œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠå…¸å‹çš„ iOS å·¥ç¨‹äº‹æ•…å€’æ¨åˆ†æï¼Œå°±ä¼šå‘ç°é—®é¢˜ä»æ¥ä¸æ˜¯â€œæ··æ·†åšå¾—ä¸å¤Ÿå¥½â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ··æ·†æµç¨‹ä¸ä½“ç³»åŒ–</li>
<li>æ²¡æœ‰æå‰è¯†åˆ«é£é™©</li>
<li>æŸäº›ç»„ä»¶ç”±å¤–åŒ…äº¤ä»˜ï¼Œæ²¡æœ‰æºç </li>
<li>å¤šæŠ€æœ¯æ ˆæ··åˆï¼ˆFlutter / RN / H5ï¼‰</li>
<li>èµ„æºè·¯å¾„æ··æ·†æ²¡æœ‰æµ‹è¯•</li>
<li>ç‰ˆæœ¬å·ä¸æ˜ å°„æ–‡ä»¶æ²¡æœ‰æ²»ç†</li>
<li>æ··æ·†ç­–ç•¥ç¼ºä¹å¯å›æ»šèƒ½åŠ›</li>
</ul>
<p>å› æ­¤ï¼Œä¸€å¥—æˆç†Ÿçš„ iOS App æ··æ·†æ–¹æ¡ˆä¸æ˜¯â€œå•ä¸€å·¥å…·â€ï¼Œè€Œæ˜¯å®Œæ•´çš„å·¥ç¨‹æµç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥â€œé¿å…äº‹æ•…â€ä¸ºåˆ‡å…¥ç‚¹ï¼Œé‡æ–°æ•´ç†ä¸€å¥— <strong>å¯è½åœ°ã€å¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS æ··æ·†ä½“ç³»</strong>ï¼Œé€‚ç”¨äº Swiftã€ObjCã€Flutterã€RNã€H5 æ··åˆå·¥ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆç°åœ¨çš„ iOS App æ··æ·†éš¾åº¦æ¯”ä»¥å¾€æ›´é«˜ï¼Ÿ</h2>
<p>ç°ä»£ iOS å·¥ç¨‹ç»“æ„å¤æ‚ï¼Œå¯¼è‡´æ··æ·†æ¶‰åŠå¤šä¸ªå±‚é¢ï¼š</p>
<h3 data-id="heading-1">Swift ç¬¦å·é«˜åº¦è¯­ä¹‰åŒ–</h3>
<p>Swift ç¼–è¯‘åçš„ç¬¦å·åå‡ ä¹ç­‰åŒæºç å‘½åã€‚</p>
<h3 data-id="heading-2">App å¤šæ•°é›†æˆ Flutter / RN / H5</h3>
<p>èµ„æºæ–‡ä»¶ï¼ˆjsã€jsonã€htmlï¼‰æ•£è½å„å¤„ï¼Œè·¯å¾„æš´éœ²æ˜æ˜¾ã€‚</p>
<h3 data-id="heading-3">åå°„è°ƒç”¨å¹¿æ³›ä½¿ç”¨</h3>
<p>å¦‚ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">perform</span>(<span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">"updateUI"</span>))
</code></pre>
<p>ç¨å¾®æ··æ·†å°±ä¼š crashã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸‰æ–¹ SDK ä¸èƒ½æ··æ·†</h3>
<p>å¦åˆ™åˆå§‹åŒ–é˜¶æ®µç›´æ¥å´©ã€‚</p>
<h3 data-id="heading-5">æ¸ é“åŒ…/å¤–åŒ…åŒ…æ²¡æœ‰æºç </h3>
<p>æ²¡åŠæ³•ä½¿ç”¨ Swift Shield æˆ– LLVM æ··æ·†å·¥å…·ã€‚</p>
<h3 data-id="heading-6">æœ€ç»ˆåˆ¤æ–­æ··æ·†æ˜¯å¦æ­£ç¡®çš„æ˜¯â€œçœŸæœºè¿è¡Œâ€</h3>
<p>ç¬¦å·å±‚æ··æ·†æœ¬èº«ä¸ä¼šå‘Šè¯‰ä½ å“ªé‡Œé”™äº†ï¼Œå´©æºƒæ‰ä¼šã€‚</p>
<p>å› æ­¤ï¼ŒiOS æ··æ·†ä¸æ˜¯ä¸€æ¬¡æ€§åŠ¨ä½œï¼Œè€Œå¿…é¡»æ˜¯â€œå·¥ç¨‹é“¾è·¯çš„ä¸€éƒ¨åˆ†â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">äºŒã€iOS æ··æ·†çš„æ ¸å¿ƒç›®æ ‡ï¼ˆä¸æ˜¯â€œè®©äººçœ‹ä¸æ‡‚ä»£ç â€ï¼‰</h2>
<p>çœŸæ­£æœ‰æ•ˆçš„æ··æ·†ç›®æ ‡æ˜¯ï¼š</p>
<ol>
<li><strong>è®©ä¸šåŠ¡é€»è¾‘ä¸æ˜“è¢«è¿˜åŸ</strong></li>
<li><strong>è®©èµ„æºè·¯å¾„ä¸å¯é¢„æµ‹</strong></li>
<li><strong>è®© Frida ç­‰ Hook å·¥å…·éš¾ä»¥å®šä½å…¥å£</strong></li>
<li><strong>é™ä½åç¼–è¯‘åˆ†æé€Ÿåº¦</strong></li>
<li><strong>é™ä½èµ„æºæ–‡ä»¶è¢«æ›¿æ¢çš„é£é™©</strong></li>
<li><strong>ä¿æŒåº”ç”¨åŠŸèƒ½å®Œå…¨ä¸å—æ··æ·†å½±å“</strong></li>
<li><strong>å¯å›æ»šã€å¯æ§åˆ¶ã€å¯è‡ªåŠ¨åŒ–</strong></li>
</ol>
<p>å…‰é â€œæŠŠç±»åæ”¹æ‰â€è¿œè¿œä¸å¤Ÿã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¦â€œä»æºå¤´åˆ°æˆå“ IPAâ€æ„å»ºæ··æ·†ä½“ç³»ï¼ˆå¤šå·¥å…·åä½œï¼‰</h2>
<p>å®Œæ•´çš„æ··æ·†ä½“ç³»åˆ†ä¸º 5 å±‚ï¼Œæ¯å±‚ç”±ä¸åŒå·¥å…·æ‰¿æ‹…èŒè´£ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>ç¬¬ä¸€å±‚ï¼šç¬¦å·æš´éœ²è¯†åˆ«ï¼ˆåˆ†æå±‚ï¼‰</strong></h2>
<p>ç”¨äºç¡®å®šï¼š</p>
<ul>
<li>å“ªäº›ç¬¦å·å¯æ··æ·†</li>
<li>å“ªäº›ç¬¦å·ä¸èƒ½æ··æ·†</li>
<li>å“ªäº›èµ„æºéœ€ä¿æŠ¤</li>
</ul>
<p>å¸¸ç”¨å·¥å…·ï¼š</p>

























<table><thead><tr><th>å·¥å…·</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>MobSF</td><td>æ‰«æ IPAï¼Œè¯†åˆ«èµ„æºç»“æ„å’Œæ•æ„Ÿç‚¹</td></tr><tr><td>class-dump</td><td>æŸ¥çœ‹ ObjC æš´éœ²ç¬¦å·</td></tr><tr><td>swift-dump</td><td>æŸ¥çœ‹ Swift ç±»ã€ç»“æ„</td></tr><tr><td>nm / otool</td><td>æŸ¥çœ‹ Mach-O å†…ç¬¦å·è¡¨</td></tr></tbody></table>
<p>è¿™ä¸€æ­¥æ˜¯â€œç¡®å®šç­–ç•¥â€çš„åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>ç¬¬äºŒå±‚ï¼šæºç æ··æ·†ï¼ˆé€‚ç”¨æœ‰æºç çš„å›¢é˜Ÿï¼‰</strong></h2>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>Swift Shieldï¼ˆæºç çº§é‡å‘½åï¼‰</li>
<li>obfuscator-llvmï¼ˆæ§åˆ¶æµæ··æ·†ã€å­—ç¬¦ä¸²åŠ å¯†ï¼‰</li>
</ul>
<p>ä½†é™äºï¼š</p>
<ul>
<li>æ·»åŠ ç¼–è¯‘æ­¥éª¤å¤æ‚</li>
<li>å¤šæŠ€æœ¯æ ˆè·¨æ¨¡å—éš¾ç»Ÿä¸€</li>
<li>ä¸é€‚ç”¨äºå¤–åŒ…æˆ–æ¸ é“åŒ…</li>
</ul>
<p>å› æ­¤ä¸æ˜¯å¿…é¡»ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>ç¬¬ä¸‰å±‚ï¼šIPA æˆå“æ··æ·†ï¼ˆæ ¸å¿ƒï¼Œé€‚ç”¨äºæ‰€æœ‰å›¢é˜Ÿï¼‰</strong></h2>
<p>è¿™ä¸€æ­¥æ˜¯å·¥ç¨‹æ··æ·†çš„å…³é”®ã€‚
æ— è®ºæ˜¯ Swiftã€ObjCã€Flutterã€RNã€H5ï¼Œæœ€ç»ˆéƒ½åœ¨ <strong>IPA å±‚è½åœ°</strong>ã€‚</p>
<h3 data-id="heading-12"><strong>Ipa Guard CLIï¼šIPA å±‚æ··æ·†çš„æ ¸å¿ƒå·¥å…·</strong></h3>
<p>ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>Swift ç±»/æ–¹æ³•/å˜é‡æ··æ·†</li>
<li>ObjC selector æ··æ·†</li>
<li>ä¿®æ”¹å›¾ç‰‡/json/js/h5 è·¯å¾„</li>
<li>ä¿®æ”¹èµ„æº MD5ï¼ˆé˜²ç¯¡æ”¹ï¼‰</li>
<li>JS æ··æ·†ï¼ˆå¯é€‰ï¼‰</li>
<li>æ”¯æŒ Flutter / RN / H5 åº”ç”¨</li>
<li>æ— éœ€æºç </li>
<li>è¾“å‡ºæ˜ å°„è¡¨ï¼ˆå¯å›æ»šï¼‰</li>
<li>æ”¯æŒå‘½ä»¤è¡Œï¼ˆCI/CD å¯è‡ªåŠ¨åŒ–ï¼‰</li>
</ul>
<h4 data-id="heading-13"><strong>è¿è¡Œæµç¨‹ç¤ºä¾‹</strong></h4>
<h3 data-id="heading-14">Step 1ï¼šç¬¦å·å¯¼å‡º</h3>
<pre><code class="hljs">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<h3 data-id="heading-15">Step 2ï¼šç­–ç•¥ç¼–è¾‘ï¼ˆé¿å…è¯¯æ··æ·†ï¼‰</h3>
<p>ç™½åå•ç¤ºä¾‹ï¼š</p>
<ul>
<li>åå°„ selector</li>
<li>Flutter MethodChannel</li>
<li>JSBridge</li>
<li>Storyboard id</li>
</ul>
<h3 data-id="heading-16">Step 3ï¼šæ‰§è¡Œ IPA æ··æ·†</h3>
<pre><code class="hljs language-css" lang="css">ipaguard_cli protect app<span class="hljs-selector-class">.ipa</span> -c sym<span class="hljs-selector-class">.json</span> <span class="hljs-attr">--email</span> dev<span class="hljs-keyword">@team</span>.com --image --js -o out.ipa
</code></pre>
<p>è¾“å‡ºï¼š</p>
<ul>
<li>æ··æ·†åçš„ IPA</li>
<li>èµ„æºæ‰°åŠ¨åçš„ assets</li>
<li>æ˜ å°„æ–‡ä»¶ï¼ˆç¬¦å·æ¢å¤æ‰€éœ€ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-17"><strong>ç¬¬å››å±‚ï¼šå®‰å…¨ç­¾åä¸è¿è¡ŒéªŒè¯ï¼ˆé¿å…æ··æ·†äº‹æ•…ï¼‰</strong></h2>
<p>æœ€ç»ˆ IPA å¿…é¡»å®‰è£…åœ¨çœŸæœºä¸Šè¿è¡ŒéªŒè¯ã€‚</p>
<h3 data-id="heading-18"><strong>kxsignï¼ˆè·¨å¹³å°ç­¾åå·¥å…·ï¼‰</strong></h3>
<pre><code class="hljs language-css" lang="css">kxsign sign out<span class="hljs-selector-class">.ipa</span> \
  -c cert<span class="hljs-selector-class">.p12</span> \
  -<span class="hljs-selector-tag">p</span> pwd \
  -m dev<span class="hljs-selector-class">.mobileprovision</span> \
  -z signed<span class="hljs-selector-class">.ipa</span> -<span class="hljs-selector-tag">i</span>
</code></pre>
<p>éœ€è¦éªŒè¯ï¼š</p>
<ul>
<li>å¯åŠ¨æµç¨‹</li>
<li>RN/Flutter åŠ è½½æ˜¯å¦æ­£å¸¸</li>
<li>H5 WebView æ˜¯å¦æ­£å¸¸</li>
<li>æ–‡ä»¶è·¯å¾„æ˜¯å¦è¢«é”™è¯¯æ··æ·†</li>
<li>SDK æ˜¯å¦å´©æºƒ</li>
<li>ç™»å½•ã€æ”¯ä»˜é“¾è·¯æ˜¯å¦æ­£å¸¸</li>
</ul>
<p>è¿™æ˜¯æ··æ·†é“¾è·¯æœ€é‡è¦çš„ä¸€æ­¥ã€‚</p>
<hr/>
<h2 data-id="heading-19"><strong>ç¬¬äº”å±‚ï¼šé€†å‘å¯¹æŠ—éªŒè¯</strong></h2>
<p>æ··æ·†åå¿…é¡»ç”¨é€†å‘å·¥å…·éªŒè¯æ•ˆæœã€‚</p>
<p>å·¥å…·ï¼š</p>
<ul>
<li>Hopperï¼šæ£€æŸ¥ç¬¦å·æ˜¯å¦ä¹±ç </li>
<li>IDAï¼šæ£€æŸ¥æµç¨‹æ¢å¤éš¾åº¦</li>
<li>Fridaï¼šHook è¯•è¯•çœ‹æ˜¯å¦éš¾æ‰¾å…¥å£</li>
</ul>
<p>è¿™æ˜¯â€œæ£€éªŒæ··æ·†æœ‰æ•ˆæ€§â€çš„æ ‡å‡†ã€‚</p>
<hr/>
<h2 data-id="heading-20"><strong>ç¬¬å…­å±‚ï¼šç¬¦å·æ˜ å°„æ²»ç†ï¼ˆå†³å®šæ··æ·†èƒ½å¦é•¿æœŸä½¿ç”¨ï¼‰</strong></h2>
<p>æ··æ·†åçš„å´©æºƒæ—¥å¿—ä¼šå˜å¾—ä¸å¯è¯»ï¼Œå› æ­¤å¿…é¡»ä¿å­˜ï¼š</p>
<ul>
<li>sym.json</li>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>ç‰ˆæœ¬å·</li>
<li>æ„å»ºå·</li>
</ul>
<p>å¹¶å­˜å‚¨åœ¨ï¼š</p>
<ul>
<li>KMS</li>
<li>Git åŠ å¯†ä»“åº“</li>
<li>å…¬å¸å†…éƒ¨æ–‡ä»¶æœåŠ¡å™¨</li>
</ul>
<p>åªæœ‰ç¬¦å·æ²»ç†å»ºç«‹èµ·æ¥ï¼Œæ··æ·†æ‰èƒ½æˆä¸ºé•¿æœŸèƒ½åŠ›ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-21">å››ã€ä¸€ä¸ªå®Œæ•´å¯è½åœ°çš„æ··æ·†æµç¨‹ï¼ˆé€‚ç”¨ä»»ä½•å›¢é˜Ÿï¼‰</h2>
<p>å·¥ç¨‹åŒ–ç‰ˆæœ¬çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<hr/>
<h3 data-id="heading-22"><strong>â‘  ç”¨ MobSF + class-dump åˆ†æ App æš´éœ²ç‚¹</strong></h3>
<p>è¯†åˆ«ï¼š</p>
<ul>
<li>å¯æ··æ·†ç¬¦å·</li>
<li>ä¸èƒ½æ··æ·†çš„æ¡¥æ¥æ–¹æ³•</li>
<li>èµ„æºç»“æ„</li>
</ul>
<hr/>
<h3 data-id="heading-23"><strong>â‘¡ ç”Ÿæˆ IPA æ··æ·†æ‰€éœ€çš„ç¬¦å·æ–‡ä»¶</strong></h3>
<pre><code class="hljs">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<hr/>
<h3 data-id="heading-24"><strong>â‘¢ ç¼–è¾‘ sym.json ä¸”åˆ¶å®šæ··æ·†ç­–ç•¥</strong></h3>
<ul>
<li>å¯åŠ¨æµç¨‹ä¿ç•™</li>
<li>åŠ¨æ€è°ƒç”¨ selector ä¿ç•™</li>
<li>Flutter / RN Bridge ä¿ç•™</li>
<li>SDK åˆå§‹åŒ–ä¿ç•™</li>
<li>å†…éƒ¨ä¸šåŠ¡å…¨éƒ¨æ··æ·†</li>
</ul>
<hr/>
<h3 data-id="heading-25"><strong>â‘£ æ‰§è¡Œæ··æ·†å¹¶ç”Ÿæˆæ–° IPA</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">ipaguard_cli protect app.ipa -c sym.json --image --js -o <span class="hljs-keyword">protected</span>.ipa
</code></pre>
<hr/>
<h3 data-id="heading-26"><strong>â‘¤ ä½¿ç”¨ kxsign é‡ç­¾åå¹¶çœŸæœºè¿è¡Œæµ‹è¯•</strong></h3>
<p>ç¡®ä¿æ‰€æœ‰æ¨¡å—æ­£å¸¸ï¼š</p>
<ul>
<li>Swift åŸç”Ÿ</li>
<li>RN æ¨¡å—</li>
<li>Flutter æ¨¡å—</li>
<li>H5 é¡µé¢</li>
<li>SDK</li>
</ul>
<hr/>
<h3 data-id="heading-27"><strong>â‘¥ é€†å‘å¯¹æŠ—éªŒè¯</strong></h3>
<p>ä½¿ç”¨ Hopper/Fridaï¼š</p>
<ul>
<li>çœ‹æ˜¯å¦èƒ½æœåˆ°å¯è¯»ç±»å</li>
<li>æµ‹è¯•èƒ½å¦è½»æ˜“ Hook</li>
<li>æ£€æŸ¥èµ„æºæ˜¯å¦å®¹æ˜“æ›¿æ¢</li>
</ul>
<hr/>
<h3 data-id="heading-28"><strong>â‘¦ æ˜ å°„æ–‡ä»¶æ²»ç†ä¸ç‰ˆæœ¬å½’æ¡£</strong></h3>
<p>ä¸ºæœªæ¥çš„å´©æºƒç¬¦å·åŒ–åšå‡†å¤‡ã€‚</p>
<hr/>
<h2 data-id="heading-29">iOS æ··æ·†ä¸æ˜¯â€œåŠ å›ºâ€ï¼Œè€Œæ˜¯â€œå»ºç«‹å®Œæ•´é“¾è·¯èƒ½åŠ›â€</h2>
<h2 data-id="heading-30"><strong>åˆ†æå±‚</strong></h2>
<p>MobSFã€class-dumpã€ swift-dump</p>
<h2 data-id="heading-31"><strong>æ··æ·†æ ¸å¿ƒå±‚</strong></h2>
<p><strong>Ipa Guard CLIï¼ˆIPA å±‚æ··æ·†ï¼‰</strong>
Swift Shield / obfuscator-llvmï¼ˆæºç å±‚ï¼ŒæŒ‰éœ€ï¼‰</p>
<h2 data-id="heading-32"><strong>èµ„æºå¤„ç†å±‚</strong></h2>
<p>Ipa Guard çš„èµ„æºæ‰°åŠ¨ + è‡ªå®šä¹‰è„šæœ¬ï¼ˆJS/H5 å‹ç¼©ï¼‰</p>
<h2 data-id="heading-33"><strong>ç­¾åä¸éªŒè¯å±‚</strong></h2>
<p>kxsignï¼ˆé‡ç­¾å¹¶å®‰è£…ï¼‰ã€çœŸæœºæµ‹è¯•</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ç³»ç»Ÿç›‘æ§åˆ°ä¸šåŠ¡æ´å¯Ÿï¼šARMS è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7579659550862475306</link>    <guid>https://juejin.cn/post/7579659550862475306</guid>    <pubDate>2025-12-04T10:13:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579659550862475306" data-draft-id="7579659550861983786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ç³»ç»Ÿç›‘æ§åˆ°ä¸šåŠ¡æ´å¯Ÿï¼šARMS è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½å…¨è§£æ"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-04T10:13:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ç³»ç»Ÿç›‘æ§åˆ°ä¸šåŠ¡æ´å¯Ÿï¼šARMS è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:13:53.000Z" title="Thu Dec 04 2025 10:13:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šé™ˆæ‰¿</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨æ•°å­—åŒ–è½¬å‹çš„æµªæ½®ä¸­ï¼Œåº”ç”¨æ€§èƒ½ç›‘æ§ï¼ˆAPMï¼‰å·²ç»æˆä¸ºä¿éšœç³»ç»Ÿç¨³å®šè¿è¡Œçš„é‡è¦åŸºçŸ³ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„ APM ç³»ç»Ÿå¾€å¾€åªèƒ½æä¾›ç³»ç»Ÿå±‚é¢çš„æ€§èƒ½æ•°æ®ï¼Œè€Œæ— æ³•æ·±å…¥ä¸šåŠ¡æ ¸å¿ƒã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘åº”ç”¨å®æ—¶ç›‘æ§æœåŠ¡ï¼ˆARMSï¼‰</a>æ¨å‡ºçš„è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½ï¼Œæ­£æ˜¯ä¸ºäº†æ‰“ç ´è¿™ä¸€å±€é™ï¼Œè®©ç›‘æ§çœŸæ­£æˆä¸ºä¸šåŠ¡å¢é•¿çš„åŠ©æ¨å™¨ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†ï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿ APM ç³»ç»Ÿçš„ç›‘æ§ç›²åŒº</h3>
<p>ä¼ ç»Ÿçš„ APM ç³»ç»Ÿé€šå¸¸å…³æ³¨ä»¥ä¸‹ç³»ç»Ÿå±‚é¢çš„æŒ‡æ ‡ï¼š</p>
<ul>
<li>CPU ä½¿ç”¨ç‡ã€å†…å­˜å ç”¨</li>
<li>è¯·æ±‚å“åº”æ—¶é—´ã€ååé‡</li>
<li>æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½</li>
<li>æ¥å£è°ƒç”¨æˆåŠŸç‡</li>
</ul>
<p>è¿™äº›æŒ‡æ ‡å¾€å¾€æ˜¯ç«™åœ¨è§£å†³æ€§èƒ½ã€é”™æ…¢çš„è§’åº¦è®¾è®¡çš„ï¼Œå¾ˆéš¾ç›´æ¥ååº”ä¸šåŠ¡åŠŸèƒ½çš„è¿è¡Œæƒ…å†µï¼Œä½†åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­å­˜åœ¨ä¸€å®šçš„ç›‘æ§ç›²åŒºï¼Œæ¯”å¦‚ä¸‹é¢å‡ ä¸ªåœºæ™¯ï¼š</p>
<p><strong>åœºæ™¯ä¸€ï¼šç”µå•†å¤§ä¿ƒ</strong></p>
<p>åœ¨åŒåä¸€ç­‰å¤§ä¿ƒæ´»åŠ¨ä¸­ï¼Œç³»ç»Ÿçš„ CPUã€å†…å­˜æŒ‡æ ‡å¯èƒ½å®Œå…¨æ­£å¸¸ï¼Œä½†å¦‚æœè®¢å•è½¬åŒ–ç‡çªç„¶ä¸‹é™ã€æ”¯ä»˜æˆåŠŸç‡å¼‚å¸¸ï¼Œè¿™äº›ä¸šåŠ¡å±‚é¢çš„é—®é¢˜å¾€å¾€æ— æ³•é€šè¿‡ç³»ç»ŸæŒ‡æ ‡åŠæ—¶å‘ç°ã€‚</p>
<p><strong>åœºæ™¯äºŒï¼šå•†åŸç³»ç»Ÿè¿è¥</strong></p>
<p>å¯¹äºå•†åŸç³»ç»Ÿè€Œè¨€ï¼ŒçœŸæ­£å…³é”®çš„ä¸šåŠ¡æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<ul>
<li>å®æ—¶è®¢å•æ•°é‡ä¸è®¢å•é‡‘é¢</li>
<li>å•†å“åº“å­˜æ°´ä½</li>
<li>ç”¨æˆ·è´­ç‰©è½¦è½¬åŒ–ç‡</li>
<li>ä¼˜æƒ åˆ¸ä½¿ç”¨ç‡</li>
<li>é€€æ¬¾ç‡</li>
</ul>
<p>è¿™äº›ä¸šåŠ¡æŒ‡æ ‡ç›´æ¥åæ˜ äº†ä¸šåŠ¡å¥åº·åº¦å’Œè¿è¥æ•ˆç‡ï¼Œä½†ä¼ ç»Ÿ APM ç³»ç»Ÿæ— æ³•é‡‡é›†ã€‚</p>
<p><strong>åœºæ™¯ä¸‰ï¼šé‡‘èé£æ§ç³»ç»Ÿ</strong></p>
<p>é‡‘èç³»ç»Ÿéœ€è¦å®æ—¶ç›‘æ§ï¼š</p>
<ul>
<li>äº¤æ˜“ç¬”æ•°ä¸é‡‘é¢</li>
<li>é£é™©æ‹¦æˆªç‡</li>
<li>å¼‚å¸¸äº¤æ˜“å æ¯”</li>
<li>èµ„é‡‘æµè½¬é€Ÿåº¦</li>
</ul>
<p>è¿™äº›æŒ‡æ ‡å¯¹äºä¸šåŠ¡å†³ç­–è‡³å…³é‡è¦ï¼Œå´æ¸¸ç¦»äºä¼ ç»Ÿç›‘æ§ä½“ç³»ä¹‹å¤–ã€‚</p>
<h3 data-id="heading-3">1.2 è‡ªå®šä¹‰æŒ‡æ ‡çš„ä»·å€¼</h3>
<p>å¼•å…¥è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸¦æ¥ä»¥ä¸‹æ ¸å¿ƒä»·å€¼ï¼š</p>
<p>âœ…Â ä¸šåŠ¡å¯è§‚æµ‹æ€§ï¼šå°†ä¸šåŠ¡æŒ‡æ ‡ä¸ç³»ç»ŸæŒ‡æ ‡ç»Ÿä¸€ç›‘æ§ï¼Œå½¢æˆå®Œæ•´çš„å¯è§‚æµ‹æ€§ä½“ç³»</p>
<p>âœ…Â å¿«é€Ÿé—®é¢˜å®šä½ï¼šå½“ä¸šåŠ¡å¼‚å¸¸æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå…³è”ç³»ç»ŸæŒ‡æ ‡ï¼Œç²¾å‡†å®šä½é—®é¢˜æ ¹å› </p>
<p>âœ…Â æ•°æ®é©±åŠ¨å†³ç­–ï¼šå®æ—¶çš„ä¸šåŠ¡æŒ‡æ ‡ä¸ºè¿è¥å’Œäº§å“å†³ç­–æä¾›æ•°æ®æ”¯æ’‘</p>
<p>âœ…Â å…¨é“¾è·¯è¿½è¸ªï¼šä¸šåŠ¡æŒ‡æ ‡ä¸è°ƒç”¨é“¾ç»“åˆï¼Œå®ç°ç«¯åˆ°ç«¯çš„ä¸šåŠ¡æµç¨‹ç›‘æ§</p>
<h2 data-id="heading-4">Java è¯­è¨€å¸¸è§çš„æŒ‡æ ‡å®šä¹‰æ¡†æ¶å¯¹æ¯”</h2>
<p>åœ¨ Java ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæœ‰å¤šä¸ªæˆç†Ÿçš„æŒ‡æ ‡é‡‡é›†æ¡†æ¶å¯ä¾›é€‰æ‹©ã€‚äº†è§£å®ƒä»¬çš„ç‰¹ç‚¹ï¼Œæœ‰åŠ©äºé€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-5">2.1 Micrometer</h3>
<p><strong>ç®€ä»‹ï¼š</strong> Micrometer æ˜¯ Spring ç”Ÿæ€çš„æŒ‡æ ‡é—¨é¢ï¼ˆFacadeï¼‰ï¼Œç±»ä¼¼äº SLF4J ä¹‹äºæ—¥å¿—ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li>æä¾›ç»Ÿä¸€çš„ APIï¼Œæ”¯æŒå¤šç§ç›‘æ§ç³»ç»Ÿåç«¯ï¼ˆPrometheusã€InfluxDBã€Datadogç­‰ï¼‰</li>
<li>ä¸ Spring Boot æ·±åº¦é›†æˆ</li>
<li>æ”¯æŒç»´åº¦åŒ–æŒ‡æ ‡ï¼ˆTags/Labelsï¼‰</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Autowired</span>
MeterRegistryÂ registry;
publicÂ voidÂ <span class="hljs-built_in">processOrder</span>(OrderÂ order) {
Â  Â Â Counter<span class="hljs-selector-class">.builder</span>("orders.processed")
Â  Â  Â  Â  <span class="hljs-selector-class">.tag</span>("status", order.getStatus())
Â  Â  Â  Â  <span class="hljs-selector-class">.tag</span>("channel", order.getChannel())
Â  Â  Â  Â  <span class="hljs-selector-class">.register</span>(registry)
Â  Â  Â  Â  <span class="hljs-selector-class">.increment</span>();
}
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… å¤šåç«¯æ”¯æŒï¼Œä¸€å¥—ä»£ç é€‚é…å¤šç§ç›‘æ§ç³»ç»Ÿ</li>
<li>âœ… Spring Boot è‡ªåŠ¨é…ç½®ï¼Œå¼€ç®±å³ç”¨</li>
<li>âœ… æ”¯æŒç»´åº¦åŒ–æŒ‡æ ‡ï¼ŒæŸ¥è¯¢çµæ´»</li>
<li>âœ… ç¤¾åŒºæ´»è·ƒï¼ŒæŒç»­æ›´æ–°</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âŒ å¼ºä¾èµ– Spring ç”Ÿæ€</li>
<li>âŒ ä¸æ”¯æŒåˆ†å¸ƒå¼è¿½è¸ªå’Œæ—¥å¿—</li>
<li>âŒ é…ç½®è¾ƒä¸ºå¤æ‚</li>
<li>âŒ ç¼ºä¹ç»Ÿä¸€çš„å¯è§‚æµ‹æ€§æ ‡å‡†</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> Spring Boot å¾®æœåŠ¡åº”ç”¨ã€‚</p>
<h3 data-id="heading-6">2.2 Prometheus Client</h3>
<p><strong>ç®€ä»‹ï¼š</strong> Prometheus Client æ˜¯ Prometheus å®˜æ–¹æä¾›çš„ Java å®¢æˆ·ç«¯åº“ï¼Œç›´æ¥å¯¹æ¥ Prometheus ç”Ÿæ€ï¼Œæ˜¯ K8s ç”Ÿæ€ä¸­ä¼—å¤šç»„ä»¶æš´éœ²æŒ‡æ ‡çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li>åŸç”Ÿé›†æˆï¼šä¸ Prometheus ç›‘æ§ç³»ç»Ÿæ— ç¼å¯¹æ¥</li>
<li>Pull æ¨¡å¼ï¼šPrometheus ä¸»åŠ¨æ‹‰å–æŒ‡æ ‡ï¼Œåº”ç”¨æ— éœ€ä¸»åŠ¨æ¨é€</li>
<li>å¼ºå¤§çš„æŸ¥è¯¢ï¼šæ”¯æŒ PromQL å¼ºå¤§çš„æŸ¥è¯¢å’Œèšåˆèƒ½åŠ›</li>
<li>ä¸°å¯Œçš„ç”Ÿæ€ï¼šGrafana å¯è§†åŒ–ã€AlertManager å‘Šè­¦</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span>Â io.prometheus.client.Counter;
<span class="hljs-keyword">import</span>Â io.prometheus.client.Gauge;
<span class="hljs-keyword">import</span>Â io.prometheus.client.Histogram;
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">OrderMetrics</span>Â {
Â  Â Â <span class="hljs-comment">// å®šä¹‰Counterï¼šè®¢å•æ€»æ•°</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">Counter</span>Â <span class="hljs-variable">orderCounter</span>Â <span class="hljs-operator">=</span>Â Counter.build()
Â  Â  Â  Â  .name(<span class="hljs-string">"orders_total"</span>)
Â  Â  Â  Â  .help(<span class="hljs-string">"Total number of orders"</span>)
Â  Â  Â  Â  .labelNames(<span class="hljs-string">"status"</span>,Â <span class="hljs-string">"channel"</span>) Â <span class="hljs-comment">// å®šä¹‰æ ‡ç­¾</span>
Â  Â  Â  Â  .register();
Â  Â Â <span class="hljs-comment">// å®šä¹‰Gaugeï¼šå½“å‰å¤„ç†ä¸­çš„è®¢å•æ•°</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">Gauge</span>Â <span class="hljs-variable">processingOrders</span>Â <span class="hljs-operator">=</span>Â Gauge.build()
Â  Â  Â  Â  .name(<span class="hljs-string">"orders_processing"</span>)
Â  Â  Â  Â  .help(<span class="hljs-string">"Number of orders currently processing"</span>)
Â  Â  Â  Â  .register();
Â  Â Â <span class="hljs-comment">// å®šä¹‰Histogramï¼šè®¢å•é‡‘é¢åˆ†å¸ƒ</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">final</span>Â <span class="hljs-type">Histogram</span>Â <span class="hljs-variable">orderAmount</span>Â <span class="hljs-operator">=</span>Â Histogram.build()
Â  Â  Â  Â  .name(<span class="hljs-string">"order_amount"</span>)
Â  Â  Â  Â  .help(<span class="hljs-string">"Order amount distribution"</span>)
Â  Â  Â  Â  .buckets(<span class="hljs-number">50</span>,Â <span class="hljs-number">100</span>,Â <span class="hljs-number">200</span>,Â <span class="hljs-number">500</span>,Â <span class="hljs-number">1000</span>,Â <span class="hljs-number">5000</span>) Â <span class="hljs-comment">// è‡ªå®šä¹‰åˆ†æ¡¶</span>
Â  Â  Â  Â  .register();
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">processOrder</span><span class="hljs-params">(Order order)</span>Â {
Â  Â  Â  Â Â <span class="hljs-comment">// è®¢å•æ•°+1ï¼Œå¸¦æ ‡ç­¾</span>
Â  Â  Â  Â  orderCounter.labels(order.getStatus(), order.getChannel()).inc();
Â  Â  Â  Â Â <span class="hljs-comment">// è®°å½•è®¢å•é‡‘é¢</span>
Â  Â  Â  Â  orderAmount.observe(order.getAmount());
Â  Â  Â  Â Â <span class="hljs-comment">// å¤„ç†ä¸­è®¢å•+1</span>
Â  Â  Â  Â  processingOrders.inc();
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¤„ç†è®¢å•é€»è¾‘...</span>
Â  Â  Â  Â  }Â <span class="hljs-keyword">finally</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¤„ç†å®Œæˆï¼Œè®¡æ•°-1</span>
Â  Â  Â  Â  Â  Â  processingOrders.dec();
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p><strong>Maven ä¾èµ–ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>simpleclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.16.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç”¨äºæš´éœ²HTTPç«¯ç‚¹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>simpleclient_servlet<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.16.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><strong>æš´éœ²æŒ‡æ ‡ç«¯ç‚¹ï¼ˆSpring Bootï¼‰ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PrometheusConfig</span>Â {
Â  Â Â <span class="hljs-meta">@Bean</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">ServletRegistrationBean</span>&lt;<span class="hljs-title class_">MetricsServlet</span>&gt;Â <span class="hljs-title function_">metricsServlet</span>(<span class="hljs-params"/>) {
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">ServletRegistrationBean</span>&lt;&gt;(
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">MetricsServlet</span>(),Â <span class="hljs-string">"/metrics"</span>
Â  Â  Â  Â  );
Â  Â  }
}
</code></pre>
<p>è®¿é—®Â <code>http://localhost:8080/metrics\</code>Â å³å¯æŸ¥çœ‹ Prometheus æ ¼å¼çš„æŒ‡æ ‡æ•°æ®ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… Prometheus ç”Ÿæ€åŸç”Ÿæ”¯æŒï¼Œé›†æˆæœ€ä½³</li>
<li>âœ… Pull æ¨¡å¼ï¼Œåº”ç”¨ä¾§æ›´ç®€å•ï¼Œæ— éœ€å…³å¿ƒæŒ‡æ ‡æ¨é€</li>
<li>âœ… PromQL æŸ¥è¯¢åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤æ‚çš„èšåˆå’Œè®¡ç®—</li>
<li>âœ… ä¸ Grafana ç­‰å¯è§†åŒ–å·¥å…·æ— ç¼å¯¹æ¥</li>
<li>âœ… æ ‡ç­¾ï¼ˆLabelï¼‰æœºåˆ¶çµæ´»ï¼Œæ”¯æŒå¤šç»´åº¦æŸ¥è¯¢</li>
<li>âœ… è½»é‡çº§ï¼Œæ€§èƒ½å¼€é”€å°</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âŒ ä»…æ”¯æŒæŒ‡æ ‡é‡‡é›†ï¼Œä¸æ”¯æŒåˆ†å¸ƒå¼è¿½è¸ªå’Œæ—¥å¿—</li>
<li>âŒ Pull æ¨¡å¼åœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹éƒ¨ç½²å¤æ‚ï¼ˆéœ€è¦æš´éœ²ç«¯å£ï¼‰</li>
<li>âŒ ä¸é Prometheus ç›‘æ§ç³»ç»Ÿé›†æˆéœ€è¦é¢å¤–é€‚é…</li>
<li>âŒ æ•°æ®æŒä¹…åŒ–ä¾èµ– Prometheus Serverï¼Œå®¢æˆ·ç«¯ä¸å­˜å‚¨å†å²æ•°æ®</li>
<li>âŒ ç¼ºä¹è‡ªåŠ¨åŸ‹ç‚¹èƒ½åŠ›ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰æ‰€æœ‰æŒ‡æ ‡</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å·²ä½¿ç”¨ Prometheus ç›‘æ§ä½“ç³»çš„å›¢é˜Ÿ</li>
<li>Kubernetes ç¯å¢ƒçš„äº‘åŸç”Ÿåº”ç”¨</li>
<li>éœ€è¦å¼ºå¤§æŸ¥è¯¢èƒ½åŠ›çš„ç›‘æ§åœºæ™¯</li>
<li>å¼€æºæ–¹æ¡ˆä¼˜å…ˆçš„é¡¹ç›®</li>
</ul>
<p><strong>Prometheus vs å…¶ä»–æ¡†æ¶çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼š</strong></p>
<p><strong>1. Pull æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>åº”ç”¨æ— éœ€é…ç½®æ•°æ®æ¨é€åœ°å€ï¼Œé™ä½è€¦åˆ</li>
<li>Prometheus å¯ä»¥æ£€æµ‹åº”ç”¨å¥åº·çŠ¶æ€ï¼ˆæŠ“å–å¤±è´¥=åº”ç”¨å¼‚å¸¸ï¼‰</li>
<li>ä¾¿äºæœåŠ¡å‘ç°å’ŒåŠ¨æ€ç›‘æ§</li>
</ul>
<p><strong>2. PromQL çš„å¼ºå¤§ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"># è®¡ç®—è®¢å•å¢é•¿ç‡
<span class="hljs-built_in">rate</span>(orders_total[<span class="hljs-number">5</span>m])
# æŒ‰æ¸ é“åˆ†ç»„ç»Ÿè®¡
sumÂ <span class="hljs-built_in">by</span>(channel) (orders_total)
# P99å“åº”æ—¶é—´
<span class="hljs-built_in">histogram_quantile</span>(<span class="hljs-number">0.99</span>, order_amount_bucket)
</code></pre>
<p><strong>3. äº‘åŸç”Ÿæ ‡å‡†ï¼š</strong></p>
<ul>
<li>Kubernetes åŸç”Ÿæ”¯æŒ Prometheus æ ¼å¼</li>
<li>å¤§é‡å¼€æºç»„ä»¶æä¾›/metrics ç«¯ç‚¹</li>
<li>ç›‘æ§å³ä»£ç ï¼Œé…ç½®ç‰ˆæœ¬åŒ–ç®¡ç†</li>
</ul>
<h3 data-id="heading-7">2.3 OpenTelemetry</h3>
<p><strong>ç®€ä»‹ï¼š</strong> OpenTelemetryï¼ˆç®€ç§°OTelï¼‰æ˜¯ CNCF çš„å¯è§‚æµ‹æ€§æ ‡å‡†ï¼Œæ•´åˆäº† OpenTracing å’Œ OpenCensus ä¸¤å¤§é¡¹ç›®ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<ul>
<li>ä¸‰ä½ä¸€ä½“ï¼šç»Ÿä¸€æ”¯æŒ Tracesï¼ˆè¿½è¸ªï¼‰ã€Metricsï¼ˆæŒ‡æ ‡ï¼‰ã€Logsï¼ˆæ—¥å¿—ï¼‰</li>
<li>å‚å•†ä¸­ç«‹ï¼šæ ‡å‡†åŒ–çš„æ•°æ®æ¨¡å‹å’Œåè®®</li>
<li>è‡ªåŠ¨åŸ‹ç‚¹ï¼šé€šè¿‡ Java Agent è‡ªåŠ¨é‡‡é›†æ¡†æ¶æŒ‡æ ‡</li>
<li>çµæ´»æ‰©å±•ï¼šä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">OpenTelemetryÂ <span class="hljs-attr">openTelemetry</span>Â =Â GlobalOpenTelemetry.get()<span class="hljs-comment">;</span>
MeterÂ <span class="hljs-attr">meter</span>Â =Â openTelemetry.getMeter(<span class="hljs-string">"order-service"</span>)<span class="hljs-comment">;</span>
LongCounterÂ <span class="hljs-attr">orderCounter</span>Â =Â meter.counterBuilder(<span class="hljs-string">"orders.total"</span>)
Â  Â  .setUnit("1")
Â  Â  .setDescription("Total number of orders")
Â  Â  .build()<span class="hljs-comment">;</span>
orderCounter.add(1, Attributes.of(
Â  Â  AttributeKey.stringKey("status"),Â "success",
Â  Â  AttributeKey.stringKey("payment_method"),Â "alipay"
))<span class="hljs-comment">;</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… äº‘åŸç”Ÿæ ‡å‡†ï¼Œå¹¿æ³›æ”¯æŒ</li>
<li>âœ… ç»Ÿä¸€çš„å¯è§‚æµ‹æ€§ä½“ç³»ï¼ˆTraces + Metrics + Logsï¼‰</li>
<li>âœ… è‡ªåŠ¨åŸ‹ç‚¹ï¼Œé›¶ä»£ç ä¾µå…¥é‡‡é›†æ¡†æ¶æŒ‡æ ‡</li>
<li>âœ… ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ”¯æŒæŒ‡æ ‡ä¸é“¾è·¯å…³è”</li>
<li>âœ… ç¤¾åŒºæ´»è·ƒï¼Œå„å¤§äº‘å‚å•†æ”¯æŒ</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>âŒ å­¦ä¹ æ›²çº¿ç›¸å¯¹é™¡å³­</li>
<li>âŒ éœ€è¦é¢å¤–çš„ Collector éƒ¨ç½²</li>
<li>âŒ éƒ¨åˆ†åŠŸèƒ½ä»åœ¨æ¼”è¿›ä¸­</li>
<li>âŒ é…ç½®ç›¸å¯¹å¤æ‚</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> äº‘åŸç”Ÿå¾®æœåŠ¡ã€åˆ†å¸ƒå¼ç³»ç»Ÿã€éœ€è¦ç»Ÿä¸€å¯è§‚æµ‹æ€§çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-8">2.4 æ¡†æ¶å¯¹æ¯”æ€»ç»“</h3>













































































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Micrometer</th><th align="left">Prometheus Client</th><th align="left">OpenTelemetry</th></tr></thead><tbody><tr><td align="left">æ ‡å‡†åŒ–ç¨‹åº¦</td><td align="left">â­â­â­</td><td align="left">â­â­â­â­</td><td align="left">â­â­â­â­â­</td></tr><tr><td align="left">å¤šåç«¯æ”¯æŒ</td><td align="left">âœ…</td><td align="left">âŒ (ä»…Prometheus)</td><td align="left">âœ…</td></tr><tr><td align="left">åˆ†å¸ƒå¼è¿½è¸ª</td><td align="left">âœ…</td><td align="left">âŒ</td><td align="left">âœ…</td></tr><tr><td align="left">è‡ªåŠ¨åŸ‹ç‚¹</td><td align="left">éƒ¨åˆ†æ”¯æŒ</td><td align="left">âŒ</td><td align="left">âœ…</td></tr><tr><td align="left">Springé›†æˆ</td><td align="left">åŸç”Ÿæ”¯æŒ</td><td align="left">éœ€æ‰‹åŠ¨</td><td align="left">éœ€é…ç½®</td></tr><tr><td align="left">å­¦ä¹ æˆæœ¬</td><td align="left">â­â­</td><td align="left">â­â­</td><td align="left">â­â­â­</td></tr><tr><td align="left">äº‘åŸç”Ÿæ”¯æŒ</td><td align="left">â­â­â­</td><td align="left">â­â­â­â­â­</td><td align="left">â­â­â­â­â­</td></tr><tr><td align="left">ç¤¾åŒºæ´»è·ƒåº¦</td><td align="left">â­â­â­â­</td><td align="left">â­â­â­â­â­</td><td align="left">â­â­â­â­â­</td></tr><tr><td align="left">æŸ¥è¯¢èƒ½åŠ›</td><td align="left">â­â­â­</td><td align="left">â­â­â­â­â­ (PromQL)</td><td align="left">â­â­â­â­</td></tr><tr><td align="left">æ•°æ®æ¨¡å‹</td><td align="left">Push</td><td align="left">Pull</td><td align="left">Push/Pull</td></tr><tr><td align="left">å¯è§†åŒ–ç”Ÿæ€</td><td align="left">ä¸°å¯Œ</td><td align="left">ä¼˜ç§€ (Grafana)</td><td align="left">ä¸°å¯Œ</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®ï¼š</strong></p>
<ul>
<li>Spring Boot åº”ç”¨ â†’ Micrometer</li>
<li>Prometheus ä½“ç³» â†’Â Prometheus Client</li>
<li>äº‘åŸç”Ÿ/åˆ†å¸ƒå¼ç³»ç»Ÿ â†’Â OpenTelemetryï¼ˆæ¨èï¼‰</li>
<li>å·²æœ‰ Grafana å¤§ç›˜ â†’ Prometheus Client æˆ– Micrometer</li>
</ul>
<p><strong>æ·±åº¦å¯¹æ¯”ï¼šPrometheus Client vs OpenTelemetry</strong></p>
<p>å¯¹äºäº‘åŸç”Ÿåº”ç”¨ï¼ŒPrometheus Client å’Œ OpenTelemetry æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ï¼Œå®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š</p>













































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">Prometheus Client</th><th align="left">OpenTelemetry</th></tr></thead><tbody><tr><td align="left">æ ¸å¿ƒå®šä½</td><td align="left">ä¸“æ³¨æŒ‡æ ‡é‡‡é›†</td><td align="left">å®Œæ•´å¯è§‚æµ‹æ€§æ–¹æ¡ˆ</td></tr><tr><td align="left">æ•°æ®ç±»å‹</td><td align="left">ä»…Metrics</td><td align="left">Traces + Metrics + Logs</td></tr><tr><td align="left">æ•°æ®ä¼ è¾“</td><td align="left">Pullæ¨¡å¼ï¼ˆ/metricsç«¯ç‚¹ï¼‰</td><td align="left">Pushæ¨¡å¼ï¼ˆOTLPåè®®ï¼‰</td></tr><tr><td align="left">åç«¯ç»‘å®š</td><td align="left">ç»‘å®šPrometheus</td><td align="left">æ”¯æŒå¤šç§åç«¯</td></tr><tr><td align="left">æŒ‡æ ‡å…³è”</td><td align="left">é€šè¿‡æ ‡ç­¾</td><td align="left">åŸç”Ÿæ”¯æŒTraceå…³è”</td></tr><tr><td align="left">å­¦ä¹ æ›²çº¿</td><td align="left">å¹³ç¼“</td><td align="left">è¾ƒé™¡</td></tr><tr><td align="left">é€‚ç”¨åœºæ™¯</td><td align="left">K8s + Prometheusæ ‡å‡†æ ˆ</td><td align="left">å¤šäº‘/æ··åˆäº‘/éœ€è¦é“¾è·¯è¿½è¸ª</td></tr></tbody></table>
<p><strong>å¸¸è§æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>
<p>çº¯ Prometheus æ ˆï¼šPrometheus Client + Prometheus + Grafana</p>
</li>
<li>
<p>æ··åˆæ–¹æ¡ˆï¼šOpenTelemetry é‡‡é›† + Prometheus æ ¼å¼å¯¼å‡º + Grafana</p>
</li>
</ol>
<h2 data-id="heading-9">ARMS è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†æœ€ä½³å®è·µ</h2>
<p>é€šè¿‡ä¸Šé¢çš„å¯¹æ¯”å¯çŸ¥ï¼Œä¸åŒçš„æŒ‡æ ‡å®šä¹‰æ¡†æ¶å‡æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼ŒARMS å½“å‰æ”¯æŒå’Œ OpenTelemetry æ·±åº¦é›†æˆï¼Œç›¸æ¯”å¼€æºæ–¹æ¡ˆï¼Œæå¤§çš„ç®€åŒ–ç”¨æˆ·é€šè¿‡ OpenTelemetry SDK æŠ€æœ¯æ ˆå®šä¹‰æŒ‡æ ‡ã€é‡‡é›†æŒ‡æ ‡ã€é…ç½®å¤§ç›˜å’ŒæŠ¥è­¦çš„é—¨æ§›ï¼Œå½“ç„¶åç»­æˆ‘ä»¬ä¹Ÿæœ‰è®¡åˆ’æ”¯æŒ micrometer å’Œ prometheus æŒ‡æ ‡çš„å¿«æ·é‡‡é›†ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç”µå•†ç§’æ€åœºæ™¯ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ ARMS å®ç°è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†ã€‚</p>
<h3 data-id="heading-10">3.1 åœºæ™¯ä»‹ç»</h3>
<p>å‡è®¾æˆ‘ä»¬è¦ç›‘æ§ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œéœ€è¦å®æ—¶è¿½è¸ªä»¥ä¸‹å…³é”®æŒ‡æ ‡ï¼š</p>
<ul>
<li>ç§’æ€æˆåŠŸæ¬¡æ•°ï¼šæŒ‰æˆåŠŸ/å¤±è´¥åˆ†ç±»ç»Ÿè®¡</li>
<li>å½“å‰åº“å­˜æ°´ä½ï¼šå®æ—¶åº“å­˜æ•°é‡</li>
<li>ç§’æ€æˆåŠŸç‡ï¼šç”¨äºå‘Šè­¦å’Œå¤§ç›˜å±•ç¤º</li>
</ul>
<h3 data-id="heading-11">3.2 ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–</h3>
<p>åœ¨é¡¹ç›®çš„Â <code>pom.xml</code>ä¸­æ·»åŠ  OpenTelemetry ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â Â <span class="hljs-comment">&lt;!-- OpenTelemetry API --&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-comment">&lt;!-- OpenTelemetry SDK (å¯é€‰ï¼Œç”¨äºæœ¬åœ°æµ‹è¯•) --&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-sdk<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç† --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.32.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>ARMS Java Agent ä¼šè‡ªåŠ¨åˆå§‹åŒ– OpenTelemetry å®ä¾‹</li>
<li>åº”ç”¨ä»£ç åªéœ€è¦ä¾èµ–Â <code>opentelemetry-api</code> å³å¯</li>
<li>æ— éœ€é…ç½® Exporterï¼Œæ•°æ®è‡ªåŠ¨ä¸ŠæŠ¥åˆ° ARMS</li>
</ul>
<h3 data-id="heading-12">3.3 ç¬¬äºŒæ­¥ï¼šå®šä¹‰è‡ªå®šä¹‰æŒ‡æ ‡</h3>
<p>åˆ›å»ºç§’æ€æœåŠ¡ç±»ï¼Œå®šä¹‰ä¸šåŠ¡æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â io.opentelemetry.api.GlobalOpenTelemetry;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.OpenTelemetry;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.common.AttributeKey;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.common.Attributes;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.metrics.LongCounter;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.metrics.Meter;
<span class="hljs-keyword">import</span>Â io.opentelemetry.api.metrics.ObservableLongGauge;
<span class="hljs-keyword">import</span>Â org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span>Â javax.annotation.PreDestroy;
<span class="hljs-keyword">import</span>Â java.util.concurrent.atomic.AtomicInteger;
@Service
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SeckillService</span>Â {
Â  Â Â <span class="hljs-comment">// åº“å­˜è®¡æ•°å™¨ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â AtomicIntegerÂ stockÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-built_in">AtomicInteger</span>(<span class="hljs-number">0</span>);
Â  Â Â <span class="hljs-comment">// ç§’æ€æ¬¡æ•°è®¡æ•°å™¨</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â LongCounter seckillCounter;
Â  Â Â <span class="hljs-comment">// åº“å­˜æ°´ä½ä»ªè¡¨ç›˜</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">final</span>Â ObservableLongGauge stockGauge;
Â  Â Â <span class="hljs-comment">// æŒ‡æ ‡ç»´åº¦Key</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â AttributeKey&lt;<span class="hljs-type">String</span>&gt; RESULT_KEY = AttributeKey.<span class="hljs-built_in">stringKey</span>(<span class="hljs-string">"result"</span>);
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-type">static</span>Â <span class="hljs-keyword">final</span>Â AttributeKey&lt;<span class="hljs-type">String</span>&gt; PRODUCT_KEY = AttributeKey.<span class="hljs-built_in">stringKey</span>(<span class="hljs-string">"product_id"</span>);
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">SeckillService</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-comment">// è·å–ARMS Java Agentåˆå§‹åŒ–çš„OpenTelemetryå®ä¾‹</span>
Â  Â  Â  Â Â OpenTelemetryÂ openTelemetryÂ =Â GlobalOpenTelemetry.<span class="hljs-built_in">get</span>();
Â  Â  Â  Â Â <span class="hljs-comment">// åˆ›å»ºMeterï¼Œå‘½åç©ºé—´ä¸º"seckill"</span>
Â  Â  Â  Â Â MeterÂ meterÂ =Â openTelemetry.<span class="hljs-built_in">getMeter</span>(<span class="hljs-string">"seckill"</span>);
Â  Â  Â  Â Â <span class="hljs-comment">// å®šä¹‰Counterï¼šè®°å½•ç§’æ€è¯·æ±‚æ¬¡æ•°ï¼ˆç´¯è®¡å€¼ï¼‰</span>
Â  Â  Â  Â  seckillCounter = meter.<span class="hljs-built_in">counterBuilder</span>(<span class="hljs-string">"product_seckill_count"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">setUnit</span>(<span class="hljs-string">"1"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">setDescription</span>(<span class="hljs-string">"ç§’æ€è¯·æ±‚æ¬¡æ•°ï¼ŒæŒ‰æˆåŠŸ/å¤±è´¥åˆ†ç±»ç»Ÿè®¡"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>();
Â  Â  Â  Â Â <span class="hljs-comment">// å®šä¹‰Gaugeï¼šè®°å½•å½“å‰åº“å­˜ï¼ˆç¬æ—¶å€¼ï¼‰</span>
Â  Â  Â  Â  stockGauge = meter.<span class="hljs-built_in">gaugeBuilder</span>(<span class="hljs-string">"product_current_stock"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">ofLongs</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">setDescription</span>(<span class="hljs-string">"å½“å‰å•†å“åº“å­˜æ•°é‡"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">buildWithCallback</span>(measurement -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// æ¯æ¬¡é‡‡é›†æ—¶å›è°ƒï¼Œä¸ŠæŠ¥å½“å‰åº“å­˜</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  measurement.<span class="hljs-built_in">record</span>(stock.<span class="hljs-built_in">get</span>());
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * åˆå§‹åŒ–åº“å­˜
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">initStock</span><span class="hljs-params">(<span class="hljs-type">int</span>Â count)</span>Â </span>{
Â  Â  Â  Â  stock.<span class="hljs-built_in">set</span>(count);
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * ç§’æ€å•†å“
Â  Â  Â */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span>Â <span class="hljs-title">seckill</span><span class="hljs-params">(<span class="hljs-type">String</span> productId, <span class="hljs-type">String</span> userId)</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-type">int</span>Â currentStockÂ =Â stock.<span class="hljs-built_in">get</span>();
Â  Â  Â  Â Â <span class="hljs-comment">// åº“å­˜ä¸è¶³ï¼Œç§’æ€å¤±è´¥</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (currentStock &lt;=Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// è®°å½•å¤±è´¥æ¬¡æ•°</span>
Â  Â  Â  Â  Â  Â  seckillCounter.<span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>, Attributes.<span class="hljs-built_in">of</span>(
Â  Â  Â  Â  Â  Â  Â  Â  RESULT_KEY,Â <span class="hljs-string">"failed"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  PRODUCT_KEY, productId
Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"æŠ¢è´­å¤±è´¥ï¼Œå•†å“å·²å”®ç½„"</span>;
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-comment">// å°è¯•æ‰£å‡åº“å­˜ï¼ˆCASæ“ä½œä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (stock.<span class="hljs-built_in">decrementAndGet</span>() &gt;=Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç§’æ€æˆåŠŸ</span>
Â  Â  Â  Â  Â  Â  seckillCounter.<span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>, Attributes.<span class="hljs-built_in">of</span>(
Â  Â  Â  Â  Â  Â  Â  Â  RESULT_KEY,Â <span class="hljs-string">"success"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  PRODUCT_KEY, productId
Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"æ­å–œï¼æŠ¢è´­æˆåŠŸï¼Œå‰©ä½™åº“å­˜ï¼š"</span>Â + stock.<span class="hljs-built_in">get</span>();
Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¹¶å‘æƒ…å†µä¸‹åº“å­˜ä¸è¶³ï¼Œå›æ»š</span>
Â  Â  Â  Â  Â  Â  stock.<span class="hljs-built_in">incrementAndGet</span>();
Â  Â  Â  Â  Â  Â  seckillCounter.<span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>, Attributes.<span class="hljs-built_in">of</span>(
Â  Â  Â  Â  Â  Â  Â  Â  RESULT_KEY,Â <span class="hljs-string">"failed"</span>,
Â  Â  Â  Â  Â  Â  Â  Â  PRODUCT_KEY, productId
Â  Â  Â  Â  Â  Â  ));
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"æŠ¢è´­å¤±è´¥ï¼Œå•†å“å·²å”®ç½„"</span>;
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â <span class="hljs-comment">/**
Â  Â  Â * é”€æ¯èµ„æº
Â  Â  Â */</span>
Â  Â Â @<span class="hljs-function">PreDestroy
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">destroy</span><span class="hljs-params">()</span>Â </span>{
Â  Â  Â  Â Â <span class="hljs-comment">// å…³é—­Gaugeï¼Œåœæ­¢é‡‡é›†</span>
Â  Â  Â  Â  stockGauge.<span class="hljs-built_in">close</span>();
Â  Â  }
}
</code></pre>
<p><strong>ä»£ç è¦ç‚¹è§£æï¼š</strong></p>
<ol>
<li>
<p><strong>Meter å‘½åï¼š</strong> <code>getMeter("seckill")</code>Â ä¸­çš„â€œseckillâ€æ˜¯å‘½åç©ºé—´ï¼Œåç»­éœ€è¦åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">ARMS</a> æ§åˆ¶å°é…ç½®</p>
</li>
<li>
<p><strong>Counter vs Gaugeï¼š</strong></p>
<ul>
<li>Counter ç”¨äºç´¯è®¡å€¼ï¼ˆåªå¢ä¸å‡ï¼‰ï¼Œå¦‚ç§’æ€è¯·æ±‚æ€»æ•°</li>
<li>Gauge ç”¨äºç¬æ—¶å€¼ï¼ˆå¯å¢å¯å‡ï¼‰ï¼Œå¦‚å½“å‰åº“å­˜</li>
</ul>
</li>
<li>
<p><strong>ç»´åº¦è®¾è®¡ï¼š</strong> é€šè¿‡ Attributes æ·»åŠ ç»´åº¦ï¼Œå¯ä»¥æŒ‰Â <code>result</code>ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ã€<code>product_id</code>ï¼ˆå•†å“ IDï¼‰è¿›è¡Œå¤šç»´åº¦åˆ†æ</p>
</li>
<li>
<p><strong>çº¿ç¨‹å®‰å…¨ï¼š</strong> ä½¿ç”¨Â <code>AtomicInteger</code> ä¿è¯é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®å‡†ç¡®æ€§</p>
</li>
</ol>
<h3 data-id="heading-13">3.4 ç¬¬ä¸‰æ­¥ï¼šåœ¨ ARMS æ§åˆ¶å°é…ç½®</h3>
<ol>
<li>
<p><strong>ç™»å½• ARMS æ§åˆ¶å°ï¼Œ</strong> è¿›å…¥åº”ç”¨ç›‘æ§ &gt; åº”ç”¨è®¾ç½® &gt; è‡ªå®šä¹‰é…ç½®</p>
</li>
<li>
<p><strong>å¼€å¯è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†ï¼š</strong> åœ¨åº”ç”¨é…ç½®é¡µé¢çš„æ¢é’ˆé‡‡é›†é…ç½®æ¨¡å—ï¼Œé…ç½®éœ€è¦é‡‡é›†çš„æŒ‡æ ‡</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41578bb6a18a4d81864dd8cc3989f694~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448033&amp;x-signature=ki8QZNzOyHTiPto%2B6cKRHCkWy8Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="3">
<li><strong>é…ç½®è¯´æ˜ï¼š</strong>
<ul>
<li><code>meters</code>Â å‚æ•°å¡«å†™ç¬¬äºŒæ­¥ä¸­å®šä¹‰çš„ Meter åç§°ï¼ˆseckillï¼‰</li>
<li>æ”¯æŒé…ç½®å¤šä¸ª Meterï¼Œç”¨é€—å·åˆ†éš”ï¼š<code>seckill,order,payment</code></li>
</ul>
</li>
</ol>
<h3 data-id="heading-14">3.5 ç¬¬å››æ­¥ï¼šæŸ¥çœ‹æŒ‡æ ‡æ•°æ®</h3>
<ol>
<li>è¿›å…¥ ARMS æ§åˆ¶å°çš„Â Prometheus ç›‘æ§å®ä¾‹åˆ—è¡¨é¡µé¢ <strong>[</strong> <strong>1]</strong> ï¼Œå¹¶åœ¨é¡¶éƒ¨èœå•æ ä¸­é€‰æ‹©åº”ç”¨æ¥å…¥çš„åœ°åŸŸã€‚ä¸‹æ–¹åˆ—è¡¨ä¸­å®ä¾‹ç±»å‹ä¸º Prometheus for åº”ç”¨ç›‘æ§çš„å®ä¾‹å³ä¸ºå½“å‰åœ°åŸŸæ‰€æœ‰ ARMS åº”ç”¨çš„ APM æŒ‡æ ‡ä»¥åŠè‡ªå®šä¹‰æŒ‡æ ‡çš„å­˜å‚¨å®ä¾‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d56664e82d3d4ac8aa1927b90f4e0b62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448033&amp;x-signature=M11ury7f9IMd860f7w2soLW9dTU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="2">
<li>å•å‡»è¯¥ç¤ºä¾‹å³ä¾§å…±äº«ç‰ˆè¿›å…¥ Grafana é¡µé¢ï¼Œç„¶åå•å‡» Exploreï¼Œé€‰æ‹©æ•°æ®æºä¸ºä¸Šä¸€æ­¥å¯¹åº”çš„ Prometheus å®ä¾‹åç§°ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa81414946fb46bab802d5bd5dc9466b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448033&amp;x-signature=%2BC%2B0xzXSYOIYyrCOXU5iotfYrhc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="3">
<li>æ‚¨å¯ä»¥é€šè¿‡ PromQL ç®€å•æŸ¥è¯¢åœ¨ä»£ç ä¸­å®šä¹‰çš„æŒ‡æ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¹Ÿå¯ä»¥åœ¨ Grafana ä¸­è‡ªå®šä¹‰å±•ç¤ºå¤§ç›˜ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a93b887a04ef4ea69a168c6c3a2824b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448033&amp;x-signature=z9Qu2RGCorEuO3jPvsAvQ4hWsmk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-15">3.6 ç¬¬äº”æ­¥ï¼šé…ç½®å‘Šè­¦è§„åˆ™</h3>
<p>è¿›å…¥ ARMS æ§åˆ¶å°çš„Â Prometheus å‘Šè­¦è§„åˆ™é¡µé¢ <strong>[</strong> <strong>2]</strong> ï¼Œå¹¶åœ¨é¡¶éƒ¨èœå•æ ä¸­é€‰æ‹©åº”ç”¨æ¥å…¥çš„åœ°åŸŸã€‚ç‚¹å‡»åˆ›å»ºæŠ¥è­¦è§„åˆ™å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><strong>å‘Šè­¦ï¼šåº“å­˜é¢„è­¦</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8ff8c62a78c4b20a0e700be89977817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448033&amp;x-signature=5LNNotRTVRlzi6fi3Y%2FQZINyKtM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ›´å¤šå…³äºå‘Šè­¦è§„åˆ™çš„å†…å®¹å‚è§åˆ›å»º Prometheus å‘Šè­¦è§„åˆ™ <strong>[</strong> <strong>3]</strong> ã€‚</p>
<h3 data-id="heading-16">3.7 æœ€ä½³å®è·µå»ºè®®</h3>
<p><strong>âœ… æŒ‡æ ‡å‘½åè§„èŒƒ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">&lt;<span class="hljs-keyword">namespace</span>&gt;_&lt;metric_name&gt;
ä¾‹å¦‚ï¼š
- order_created_count Â <span class="hljs-comment">// è®¢å•åˆ›å»ºæ•°</span>
- payment_success_rateÂ <span class="hljs-comment">// æ”¯ä»˜æˆåŠŸç‡</span>
- user_login_duration Â <span class="hljs-comment">// ç™»å½•è€—æ—¶</span>
</code></pre>
<p><strong>âœ… ç»´åº¦è®¾è®¡åŸåˆ™</strong></p>
<ul>
<li>ç»´åº¦åŸºæ•°ä¸å®œè¿‡å¤§ï¼ˆé¿å…â€œç»´åº¦çˆ†ç‚¸â€ï¼‰</li>
<li>ä¼˜å…ˆä½¿ç”¨æšä¸¾ç±»å‹ç»´åº¦ï¼ˆå¦‚ status: success/failedï¼‰</li>
<li>é¿å…ä½¿ç”¨é«˜åŸºæ•°ç»´åº¦ï¼ˆå¦‚ userIdã€orderIdï¼‰</li>
</ul>
<p><strong>åä¾‹ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šuserIdåŸºæ•°è¿‡å¤§</span>
<span class="hljs-selector-tag">counter</span><span class="hljs-selector-class">.add</span>(<span class="hljs-number">1</span>, Attributes.<span class="hljs-built_in">of</span>(
Â  Â  AttributeKey.<span class="hljs-built_in">stringKey</span>(<span class="hljs-string">"user_id"</span>), userId
));
</code></pre>
<p><strong>æ­£ä¾‹ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨æšä¸¾ç±»å‹</span>
<span class="hljs-selector-tag">counter</span><span class="hljs-selector-class">.add</span>(<span class="hljs-number">1</span>, Attributes.<span class="hljs-built_in">of</span>(
Â  Â  AttributeKey.<span class="hljs-built_in">stringKey</span>(<span class="hljs-string">"user_type"</span>),Â <span class="hljs-string">"vip"</span>
));
</code></pre>
<p><strong>âœ… æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li>é¢„å…ˆåˆ›å»ºæŒ‡æ ‡å¯¹è±¡ï¼Œé¿å…é¢‘ç¹åˆ›å»º</li>
<li>ä½¿ç”¨æ‰¹é‡è®°å½• API å‡å°‘å¼€é”€</li>
<li>Gauge å›è°ƒå‡½æ•°ä¿æŒè½»é‡çº§</li>
</ul>
<p><strong>âœ… æŒ‡æ ‡ç±»å‹é€‰æ‹©</strong></p>

























<table><thead><tr><th>åœºæ™¯</th><th>æŒ‡æ ‡ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ç´¯è®¡è®¡æ•°</td><td>Counter</td><td>è®¢å•æ€»æ•°ã€è¯·æ±‚æ€»æ•°</td></tr><tr><td>ç¬æ—¶å€¼</td><td>Gauge</td><td>å½“å‰åœ¨çº¿ç”¨æˆ·æ•°ã€é˜Ÿåˆ—é•¿åº¦</td></tr><tr><td>åˆ†å¸ƒç»Ÿè®¡</td><td>Histogram</td><td>è®¢å•é‡‘é¢åˆ†å¸ƒã€å“åº”æ—¶é—´åˆ†å¸ƒ</td></tr></tbody></table>
<h2 data-id="heading-17">ARMS è‡ªå®šä¹‰æŒ‡æ ‡çš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-18">4.1 æ— ç¼é›†æˆï¼Œé›¶æˆæœ¬æ¥å…¥</h3>
<ul>
<li>âœ…Â è‡ªåŠ¨æ³¨å…¥ï¼šä½¿ç”¨ ARMS Java Agentï¼Œæ— éœ€æ‰‹åŠ¨é…ç½® OpenTelemetry</li>
<li>âœ…Â æ— ä¾µå…¥é‡‡é›†ï¼šæ¡†æ¶æŒ‡æ ‡è‡ªåŠ¨é‡‡é›†ï¼Œä¸šåŠ¡æŒ‡æ ‡æŒ‰éœ€å®šä¹‰</li>
<li>âœ…Â ç»Ÿä¸€ä¸ŠæŠ¥ï¼šæŒ‡æ ‡è‡ªåŠ¨ä¸ŠæŠ¥åˆ° ARMSï¼Œæ— éœ€éƒ¨ç½² Collector</li>
</ul>
<h3 data-id="heading-19">4.2 æŒ‡æ ‡ä¸é“¾è·¯å…³è”</h3>
<p>ARMS çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†è‡ªå®šä¹‰æŒ‡æ ‡ä¸åˆ†å¸ƒå¼é“¾è·¯æ‰“é€šï¼š</p>
<pre><code class="hljs language-rust" lang="rust">è¯·æ±‚é“¾è·¯ï¼š
å‰ç«¯ <span class="hljs-punctuation">-&gt;</span> ç½‘å…³ <span class="hljs-punctuation">-&gt;</span> è®¢å•æœåŠ¡ <span class="hljs-punctuation">-&gt;</span> æ”¯ä»˜æœåŠ¡
Â  Â  Â  Â  Â â†“
Â  è‡ªå®šä¹‰æŒ‡æ ‡ï¼šè®¢å•åˆ›å»ºæˆåŠŸ
Â  Â  Â  Â  Â â†“
Â  è¿½è¸ªï¼šè¯¥è®¢å•çš„å®Œæ•´è°ƒç”¨é“¾
</code></pre>
<p>ä»·å€¼ï¼šå½“è®¢å•æŒ‡æ ‡å¼‚å¸¸æ—¶ï¼Œå¯ä»¥ä¸€é”®è·³è½¬åˆ°å…·ä½“çš„è°ƒç”¨é“¾ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<h3 data-id="heading-20">4.3 ä¸°å¯Œçš„å¯è§†åŒ–èƒ½åŠ›</h3>
<ul>
<li>ğŸ“Š å¤šç»´åº¦èšåˆæŸ¥è¯¢</li>
<li>ğŸ“ˆ è¶‹åŠ¿å¯¹æ¯”åˆ†æ</li>
<li>ğŸ¯ è‡ªå®šä¹‰å¤§ç›˜</li>
<li>ğŸ”” çµæ´»çš„å‘Šè­¦è§„åˆ™</li>
</ul>
<h3 data-id="heading-21">4.4 ä¼ä¸šçº§ç‰¹æ€§</h3>
<ul>
<li>ğŸ”’ æ•°æ®å®‰å…¨éš”ç¦»</li>
<li>ğŸ“¦ é•¿æœŸæ•°æ®å­˜å‚¨</li>
<li>âš¡ é«˜æ€§èƒ½æŸ¥è¯¢</li>
<li>ğŸŒ è·¨åœ°åŸŸéƒ¨ç½²</li>
</ul>
<h2 data-id="heading-22">æ€»ç»“ä¸å±•æœ›</h2>
<p>è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½æ˜¯ APM ç³»ç»Ÿä»â€œç›‘æ§â€èµ°å‘â€œå¯è§‚æµ‹â€çš„å…³é”®ä¸€æ­¥ã€‚é˜¿é‡Œäº‘ ARMS é€šè¿‡ä¸ OpenTelemetry æ ‡å‡†æ·±åº¦é›†æˆï¼Œä¸ºç”¨æˆ·æä¾›äº†ï¼š</p>
<p>âœ¨Â <strong>æ ‡å‡†åŒ–ï¼š</strong> æ‹¥æŠ±äº‘åŸç”Ÿæ ‡å‡†ï¼Œé¿å…å‚å•†é”å®š</p>
<p>âœ¨Â <strong>ç®€å•åŒ–ï¼š</strong> ä¸€è¡Œé…ç½®ï¼Œå³å¼€å³ç”¨</p>
<p>âœ¨Â <strong>å¯è§†åŒ–ï¼š</strong> æŒ‡æ ‡ã€é“¾è·¯ã€æ—¥å¿—ä¸‰ä½ä¸€ä½“</p>
<p>âœ¨Â <strong>æ™ºèƒ½åŒ–ï¼š</strong> AI å¼‚å¸¸æ£€æµ‹ï¼Œæ ¹å› åˆ†æ</p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç”µå•†ç³»ç»Ÿï¼šè®¢å•ã€æ”¯ä»˜ã€åº“å­˜ç›‘æ§</li>
<li>é‡‘èç³»ç»Ÿï¼šäº¤æ˜“é‡ã€é£æ§æŒ‡æ ‡</li>
<li>æ¸¸æˆç³»ç»Ÿï¼šåœ¨çº¿äººæ•°ã€å……å€¼é‡‘é¢</li>
<li>IoT ç³»ç»Ÿï¼šè®¾å¤‡åœ¨çº¿ç‡ã€æ¶ˆæ¯é‡</li>
</ul>
<p><strong>æœªæ¥å±•æœ›ï¼š</strong></p>
<p>ARMS å°†ç»§ç»­æ·±åŒ–è‡ªå®šä¹‰æŒ‡æ ‡èƒ½åŠ›ï¼Œæ”¯æŒæ›´å¤šæ¡†æ¶å’Œæ›´å¤šæŒ‡æ ‡ç±»å‹çš„è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†ï¼š</p>
<ul>
<li>æ¡†æ¶ä¸Šæ”¯æŒ micrometerã€prometheus æ¡†æ¶</li>
<li>æŒ‡æ ‡ç±»å‹ä¸Šæ”¯æŒåˆ†ä½æ•°ã€ç›´æ–¹å›¾</li>
</ul>
<p>ç«‹å³ä½“éªŒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">ARMS</a> è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†åŠŸèƒ½ï¼Œè®©ç›‘æ§çœŸæ­£æœåŠ¡äºä¸šåŠ¡å¢é•¿ï¼</p>
<p><strong>å‚è€ƒæ–‡æ¡£ï¼š</strong></p>
<ul>
<li>
<p>ARMS è‡ªå®šä¹‰æŒ‡æ ‡é‡‡é›†å®˜æ–¹æ–‡æ¡£</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fuse-cases%2Fcustomize-metrics-by-using-the-opentelemetry-java-sdk" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/use-cases/customize-metrics-by-using-the-opentelemetry-java-sdk" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
</li>
<li>
<p>OpenTelemetry å®˜æ–¹ç½‘ç«™</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopentelemetry.io%2F" target="_blank" title="https://opentelemetry.io/" ref="nofollow noopener noreferrer">opentelemetry.io/</a></p>
</li>
<li>
<p>ARMS äº§å“ä¸»é¡µ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms" target="_blank" title="https://www.aliyun.com/product/arms" ref="nofollow noopener noreferrer">www.aliyun.com/product/armâ€¦</a></p>
</li>
</ul>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1] Prometheus ç›‘æ§å®ä¾‹åˆ—è¡¨é¡µé¢</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farms.console.aliyun.com%2F%23%2Fprom%2Fcn-hangzhou" target="_blank" title="https://arms.console.aliyun.com/#/prom/cn-hangzhou" ref="nofollow noopener noreferrer">arms.console.aliyun.com/#/prom/cn-hâ€¦</a></p>
<p>[2]Â Prometheus å‘Šè­¦è§„åˆ™é¡µé¢</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farms.console.aliyun.com%2F%23%2Fprom%2Falert%2Fcn-hangzhou" target="_blank" title="https://arms.console.aliyun.com/#/prom/alert/cn-hangzhou" ref="nofollow noopener noreferrer">arms.console.aliyun.com/#/prom/alerâ€¦</a></p>
<p>[3]Â åˆ›å»º Prometheus å‘Šè­¦è§„åˆ™</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fprometheus-monitoring%2Fcreate-alert-rules-for-prometheus-instances" target="_blank" title="https://help.aliyun.com/zh/arms/prometheus-monitoring/create-alert-rules-for-prometheus-instances" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/proâ€¦</a></p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">æ­¤å¤„</a>ï¼Œç«‹å³ä½“éªŒ ARMSã€‚</p>
<p>æœ¬æ–‡ç”±é˜¿é‡Œäº‘ ARMS å›¢é˜Ÿå‡ºå“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linuxç³»ç»Ÿç¦»çº¿å®‰è£…Dockerå®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579814711853432842</link>    <guid>https://juejin.cn/post/7579814711853432842</guid>    <pubDate>2025-12-04T10:22:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579814711853432842" data-draft-id="7579832186879836210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linuxç³»ç»Ÿç¦»çº¿å®‰è£…Dockerå®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2025-12-04T10:22:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linuxç³»ç»Ÿç¦»çº¿å®‰è£…Dockerå®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:22:17.000Z" title="Thu Dec 04 2025 10:22:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒæœåŠ¡å™¨å¾€å¾€å¤„äºå†…ç½‘éš”ç¦»çŠ¶æ€ï¼Œæ— æ³•ç›´æ¥è®¿é—®äº’è”ç½‘ã€‚è¿™ç§ç¯å¢ƒä¸‹ï¼Œç¦»çº¿å®‰è£…Dockeræˆä¸ºäº†ä¸€é¡¹å¿…å¤‡æŠ€èƒ½ã€‚æˆ‘æœ€è¿‘æœ‰åœ¨ubuntu24ä¸Šç¦»çº¿éƒ¨ç½²ï¼Œæ­£å¥½åä¸‹è®°å½•ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»Linuxç³»ç»Ÿä¸‹ç¦»çº¿å®‰è£…Dockerçš„å®Œæ•´æµç¨‹ï¼Œæ¶µç›–å‡†å¤‡å·¥ä½œã€å®‰è£…æ­¥éª¤ã€å¸¸è§é—®é¢˜åŠä¼˜åŒ–é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dac2f7d2708430992f0bdc419d94aac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448537&amp;x-signature=olJ1g1KOwiJkmj1X%2B46blKW3FpQ%3D" alt="v2-a62710d971c47422f25eca254b2add8a_1440w.png" loading="lazy"/></p>
<p>v2-a62710d971c47422f25eca254b2add8a_1440w.png</p>
<h2 data-id="heading-0">ç¦»çº¿å®‰è£…Docker</h2>
<h3 data-id="heading-1">ä¸‹è½½å®‰è£…åŒ…</h3>
<p>ç¦»çº¿å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdownload.docker.com%2Flinux%2Fstatic%2Fstable%2F" target="_blank" title="https://download.docker.com/linux/static/stable/" ref="nofollow noopener noreferrer">download.docker.com/linux/statiâ€¦</a> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c4e5acc7a3450183bdbb244dcf4ce6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448537&amp;x-signature=PBLjh1mCt6iK5R9FUetPc9DtZdM%3D" alt="_20251204_125757.png" loading="lazy"/> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c05b1e725f54bc7a6fabee6af5e725a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448537&amp;x-signature=qtYJ6vZaay11rOViLtDPC7SlM1M%3D" alt="ScreenShot_2025-12-04_141350_297.png" loading="lazy"/> æˆ‘æ­¤å¤„ä¸‹è½½çš„æ˜¯ <code>x86_64/docker-28.4.0.tgz</code></p>
<h3 data-id="heading-2">å‡†å¤‡å®‰è£…æ–‡ä»¶</h3>
<ul>
<li>åˆ›å»º docker.service</li>
</ul>
<p>æˆ‘ä»¬å°†ä¸‹è½½åçš„æ–‡ä»¶æ”¾åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šï¼Œåœ¨å®‰è£…åŒ…åŒçº§ç›®å½•ä¸‹åˆ›å»º<code>docker.service</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=Docker Application Container Engine
<span class="hljs-attr">Documentation</span>=https://docs.docker.com
<span class="hljs-attr">After</span>=network-<span class="hljs-literal">on</span>line.target firewalld.service
<span class="hljs-attr">Wants</span>=network-<span class="hljs-literal">on</span>line.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=notify
<span class="hljs-comment"># the default is not to use systemd for cgroups because the delegate issues still</span>
<span class="hljs-comment"># exists and systemd currently does not support the cgroup feature set required</span>
<span class="hljs-comment"># for containers run by docker</span>
<span class="hljs-attr">ExecStart</span>=/usr/bin/dockerd
<span class="hljs-attr">ExecReload</span>=/bin/kill -s HUP <span class="hljs-variable">$MAINPID</span>
<span class="hljs-comment"># Having non-zero Limit*s causes performance problems due to accounting overhead</span>
<span class="hljs-comment"># in the kernel. We recommend using cgroups to do container-local accounting.</span>
<span class="hljs-attr">LimitNOFILE</span>=infinity
<span class="hljs-attr">LimitNPROC</span>=infinity
<span class="hljs-attr">LimitCORE</span>=infinity
<span class="hljs-comment"># Uncomment TasksMax if your systemd version supports it.</span>
<span class="hljs-comment"># Only systemd 226 and above support this version.</span>
<span class="hljs-comment">#TasksMax=infinity</span>
<span class="hljs-attr">TimeoutStartSec</span>=<span class="hljs-number">0</span>
<span class="hljs-comment"># set delegate yes so that systemd does not reset the cgroups of docker containers</span>
<span class="hljs-attr">Delegate</span>=<span class="hljs-literal">yes</span>
<span class="hljs-comment"># kill only the docker process, not all processes in the cgroup</span>
<span class="hljs-attr">KillMode</span>=process
<span class="hljs-comment"># restart the docker process if it exits prematurely</span>
<span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure
<span class="hljs-attr">StartLimitBurst</span>=<span class="hljs-number">3</span>
<span class="hljs-attr">StartLimitInterval</span>=<span class="hljs-number">60</span>s

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>æ­¤æ–‡ä»¶æœ‰äº›æ—§ç‰ˆæœ¬ä¸å…¼å®¹</p>
<ul>
<li>åˆ›å»ºå®‰è£…è„šæœ¬</li>
</ul>
<p>åœ¨å®‰è£…åŒ…åŒçº§ç›®å½•ä¸‹åˆ›å»º<code>instll.sh</code> è„šæœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'è§£å‹taråŒ…......'</span>
tar -xvf <span class="hljs-variable">$1</span> --overwrite
<span class="hljs-built_in">echo</span> <span class="hljs-string">'å°†dockerç›®å½•ç§»åˆ°/usr/binç›®å½•ä¸‹.....'</span>
<span class="hljs-built_in">cp</span> docker/* /usr/bin/
<span class="hljs-built_in">echo</span> <span class="hljs-string">'å°†docker.service ç§»åˆ°/etc/systemd/system/ ç›®å½•.....'</span>
<span class="hljs-built_in">cp</span> docker.service /etc/systemd/system/
<span class="hljs-built_in">echo</span> <span class="hljs-string">'æ·»åŠ æ–‡ä»¶æƒé™.....'</span>
<span class="hljs-built_in">chmod</span> +x /etc/systemd/system/docker.service
<span class="hljs-built_in">echo</span> <span class="hljs-string">'é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶.....'</span>
systemctl daemon-reload
<span class="hljs-built_in">echo</span> <span class="hljs-string">'å¯åŠ¨docker.....'</span>
systemctl start docker
<span class="hljs-built_in">echo</span> <span class="hljs-string">'è®¾ç½®å¼€æœºè‡ªå¯.....'</span>
systemctl <span class="hljs-built_in">enable</span> docker.service
<span class="hljs-built_in">echo</span> <span class="hljs-string">'dockerå®‰è£…æˆåŠŸ.....'</span>
docker -v
</code></pre>
<ul>
<li>åˆ›å»ºå¸è½½è„šæœ¬</li>
</ul>
<p>åœ¨å®‰è£…åŒ…åŒçº§ç›®å½•ä¸‹åˆ›å»º<code>uninstall.sh</code> è„šæœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'åˆ é™¤docker.service......'</span>
<span class="hljs-built_in">rm</span> -f /etc/systemd/system/docker.service
<span class="hljs-built_in">echo</span> <span class="hljs-string">'åˆ é™¤dockeræ–‡ä»¶......'</span>
<span class="hljs-comment"># åˆ é™¤ docker</span>
sudo <span class="hljs-built_in">rm</span> -rf /usr/bin/docker*
<span class="hljs-comment"># åˆ é™¤ containerd</span>
sudo <span class="hljs-built_in">rm</span> -rf /usr/bin/containerd*
<span class="hljs-comment"># åˆ é™¤ docker è¿è¡Œæ—¶ ID</span>
sudo <span class="hljs-built_in">rm</span> -rf /var/run/docker*
<span class="hljs-comment"># å¸è½½ docker-compose</span>
sudo <span class="hljs-built_in">rm</span> -rf /usr/local/bin/docker-compose
sudo <span class="hljs-built_in">rm</span> -rf /var/lib/docker*
sudo <span class="hljs-built_in">rm</span> -rf /var/lib/containerd*
<span class="hljs-built_in">echo</span> <span class="hljs-string">'é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶'</span>
systemctl daemon-reload
<span class="hljs-built_in">echo</span> <span class="hljs-string">'å¸è½½æˆåŠŸ...'</span>
</code></pre>
<p>åˆ›å»ºå®Œä¹‹åç»™è„šæœ¬èµ‹æƒé™</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x  install.sh uninstall.sh
</code></pre>
<h3 data-id="heading-3">å®‰è£…</h3>
<p>æ‰§è¡Œéƒ¨ç½²è„šæœ¬install.shï¼Œä½¿ç”¨rootæƒé™æ‰§è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">sudo ./install.sh  docker-28.4.0.tgz
</code></pre>
<p>å‡ºç°å¦‚ä¸‹ä¿¡æ¯åˆ™ä»£è¡¨æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa20ceda0c5c47f2826e8a9c09bac826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448537&amp;x-signature=3sNoVQ8iGAr%2BMVz%2FGxmUQRyl3tc%3D" alt="_20251204_131322.png" loading="lazy"/></p>
<p>_20251204_131322.png</p>
<p>å¦‚æœä¸æƒ³ç”¨è„šæœ¬å®‰è£…çš„å®¶äººä»¬å¯ä»¥æŒ¨æ¡æ‰§è¡Œè„šæœ¬ä¸­çš„å‘½ä»¤è¿›è¡Œå®‰è£…</p>
<h3 data-id="heading-4">æµ‹è¯•</h3>
<p>æˆ‘ä»¬å¯ä»¥ä»åˆ«çš„æœåŠ¡å™¨ä¸Šcopyä¸€ä¸ªé•œåƒtaræ–‡ä»¶è¿‡æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†é•œåƒä¿å­˜æœªtaræ–‡ä»¶</p>
<pre><code class="hljs">docker save -o nginx.tar nginx:1.21.5 
</code></pre>
<p>æ‰§è¡Œå®Œä¹‹åä¼šæœ‰ä¸€ä¸ªnginx.taræ–‡ä»¶ï¼Œå°†æ­¤æ–‡ä»¶æ‹·è´åˆ°æˆ‘ä»¬åˆšåˆšå®‰è£…äº†dockerçš„æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½é•œåƒ</p>
<pre><code class="hljs language-css" lang="css">sudo docker load -<span class="hljs-selector-tag">i</span> nginx<span class="hljs-selector-class">.tar</span>
</code></pre>
<p>åŠ è½½å®Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹åç§°æŸ¥çœ‹åˆ°é•œåƒäº†</p>
<pre><code class="hljs">sudo docker images
</code></pre>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å®¹å™¨æœåŠ¡</p>
<pre><code class="hljs language-arduino" lang="arduino">sudo docker run -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> nginx:<span class="hljs-number">1.21</span><span class="hljs-number">.5</span> 
</code></pre>
<p>å¯åŠ¨ä¹‹åæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æœåŠ¡äº†ã€‚</p>
<p>åˆ°æ­¤ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯è¯´æ˜æˆ‘ä»¬ç¦»çº¿å®‰è£…dockeræˆåŠŸäº†</p>
<h2 data-id="heading-5">é…ç½®Dockerç”¨æˆ·ç»„</h2>
<p>Docker åˆ©ç”¨ Linux çš„ç”¨æˆ·å’Œç»„æƒé™æ¥ç®¡ç†å¯¹ Docker å®ˆæŠ¤è¿›ç¨‹çš„è®¿é—®æƒé™ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰ root ç”¨æˆ·å’Œå±äº docker ç”¨æˆ·ç»„çš„ç”¨æˆ·æ‰è¢«å…è®¸è®¿é—® Docker å®ˆæŠ¤è¿›ç¨‹ã€‚åœ¨ Linux ç³»ç»Ÿä¸Šä½¿ç”¨ Docker æ—¶ï¼Œå¦‚æœæ‚¨å°šæœªé…ç½® docker ç”¨æˆ·ç»„ï¼Œé‚£ä¹ˆä½œä¸ºé root ç”¨æˆ·æ‰§è¡Œ Docker ç›¸å…³å‘½ä»¤å°†è¦æ±‚ä½¿ç”¨ sudo æ¥æå‡æƒé™ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºä¸€ä¸ªåä¸º docker çš„ç”¨æˆ·ç»„ï¼Œç”¨äºç®¡ç† Docker å®¹å™¨ã€‚</p>
<ul>
<li>æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ docker ç”¨æˆ·ç»„ï¼š</li>
</ul>

<pre><code class="hljs language-csharp" lang="csharp">getent <span class="hljs-keyword">group</span> docker
</code></pre>
<ul>
<li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºdockerç”¨æˆ·ç»„</li>
</ul>

<pre><code class="hljs">sudo groupadd docker
</code></pre>
<ul>
<li>å°†ç”¨æˆ·æ·»åŠ åˆ° Docker ç”¨æˆ·ç»„</li>
</ul>

<pre><code class="hljs">sudo usermod -aG docker your_username
</code></pre>
<p>æˆ–è€…</p>
<pre><code class="hljs language-css" lang="css">sudo gpasswd -<span class="hljs-selector-tag">a</span> your_username docker
</code></pre>
<ul>
<li>ä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°ç”¨æˆ·ç»„ã€‚</li>
</ul>

<pre><code class="hljs">newgrp docker
</code></pre>
<h2 data-id="heading-6">docker-composeå®‰è£…</h2>
<blockquote>
<p>Compose é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚ä½¿ç”¨å‰é¢ä»‹ç»çš„Dockerfileæˆ‘ä»¬å¾ˆå®¹æ˜“å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ç„¶è€Œåœ¨æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼›å†æ¯”å¦‚åœ¨åˆ†å¸ƒå¼åº”ç”¨ä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å¦‚æœæ¯ä¸ªæœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ã€ç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚è¿™æ—¶å€™å°±éœ€è¦ä¸€ä¸ªå·¥å…·èƒ½å¤Ÿç®¡ç†ä¸€ç»„ç›¸å…³è”çš„çš„åº”ç”¨å®¹å™¨ï¼Œè¿™å°±æ˜¯Docker Composeã€‚</p>
</blockquote>
<p>ä»githubä¸Šä¸‹è½½docker-composeäºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…</p>
<ul>
<li>ä¸‹è½½æœ€æ–°ç‰ˆçš„docker-composeæ–‡ä»¶</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fcompose%2Finstall%2F" target="_blank" title="https://docs.docker.com/compose/install/" ref="nofollow noopener noreferrer">docs.docker.com/compose/insâ€¦</a></p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdocker%2Fcompose%2Freleases%2Fdownload%2Fv2.5.0%2Fdocker-compose-linux-x86_64" target="_blank" title="https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-linux-x86_64" ref="nofollow noopener noreferrer">github.com/docker/compâ€¦</a></p>
<ul>
<li>æ·»åŠ å¯æ‰§è¡Œæƒé™</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /usr/local/bin/
<span class="hljs-built_in">mv</span> docker-compose-linux-x86_64 docker-compose
sudo <span class="hljs-built_in">chmod</span> +x docker-compose
</code></pre>
<ul>
<li>æµ‹è¯•å®‰è£…ç»“æœ</li>
</ul>

<pre><code class="hljs language-css" lang="css">docker-compose <span class="hljs-attr">--version</span>
Docker Compose version v2.<span class="hljs-number">5.0</span>
</code></pre>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>ç¦»çº¿å®‰è£…Dockerè™½ç„¶æ¯”åœ¨çº¿å®‰è£…å¤æ‚ï¼Œä½†æŒæ¡äº†æ­£ç¡®çš„æ–¹æ³•å’Œå·¥å…·åï¼Œå¯ä»¥å¤§å¤§æé«˜åœ¨å†…ç½‘ç¯å¢ƒéƒ¨ç½²çš„æ•ˆç‡ã€‚å…³é”®æ˜¯è¦åšå¥½å‰æœŸè§„åˆ’ï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–åŒ…çš„å®Œæ•´æ€§ï¼Œå¹¶å»ºç«‹å®Œå–„çš„é•œåƒç®¡ç†æœºåˆ¶ã€‚å®è·µæ˜¯æœ€å¥½çš„è€å¸ˆã€‚å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒå¤šæ¬¡æ¼”ç»ƒï¼Œç†Ÿç»ƒæŒæ¡åå†åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚</p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmdnice.com%2F%3Ffrom%3Djuejin" target="_blank" title="https://mdnice.com/?from=juejin" ref="nofollow noopener noreferrer">mdnice</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windowsç³»ç»ŸAnaconda/Minicondaçš„å®‰è£…ã€é…ç½®ã€åŸºç¡€ä½¿ç”¨ã€æ¸…ç†ç¼“å­˜ç©ºé—´å’ŒPycharm/VSCodeé…ç½®æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579819594271031334</link>    <guid>https://juejin.cn/post/7579819594271031334</guid>    <pubDate>2025-12-04T09:46:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594271031334" data-draft-id="7579800429376389170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windowsç³»ç»ŸAnaconda/Minicondaçš„å®‰è£…ã€é…ç½®ã€åŸºç¡€ä½¿ç”¨ã€æ¸…ç†ç¼“å­˜ç©ºé—´å’ŒPycharm/VSCodeé…ç½®æŒ‡å—"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-04T09:46:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘æ¾ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1848721596224121"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windowsç³»ç»ŸAnaconda/Minicondaçš„å®‰è£…ã€é…ç½®ã€åŸºç¡€ä½¿ç”¨ã€æ¸…ç†ç¼“å­˜ç©ºé—´å’ŒPycharm/VSCodeé…ç½®æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1848721596224121/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘æ¾ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:46:33.000Z" title="Thu Dec 04 2025 09:46:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡è½¬è½½è‡ªä¸ªäººåšå®¢</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhs.cnies.org%2Farchives%2Fconda-win" target="_blank" title="https://hs.cnies.org/archives/conda-win" ref="nofollow noopener noreferrer">Condaé…ç½®å®Œå…¨æŒ‡å—ï¼šWindowsç³»ç»ŸAnaconda/Minicondaçš„å®‰è£…ã€é…ç½®ã€åŸºç¡€ä½¿ç”¨ã€æ¸…ç†ç¼“å­˜ç©ºé—´å’ŒPycharm/VSCodeé…ç½®æŒ‡å—</a></p>
<p>Conda æ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°<strong>åŒ…ç®¡ç†ä¸ç¯å¢ƒç®¡ç†å·¥å…·</strong>ï¼Œå¹¿æ³›åº”ç”¨äºæ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ åŠ Python å¼€å‘é¢†åŸŸã€‚å®ƒä¸ä»…èƒ½å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®‰è£…ã€æ›´æ–°å’Œå¸è½½ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜èƒ½åˆ›å»ºç›¸äº’<strong>éš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œè§£å†³ä¸åŒé¡¹ç›®ä¹‹é—´çš„ä¾èµ–å†²çª</strong>é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé¡¹ç›® A ä¾èµ– Python 3.7 å’Œ NumPy 1.0ï¼Œè€Œé¡¹ç›® B éœ€è¦ Python 3.10 å’Œ NumPy 2.0ï¼Œé€šè¿‡ conda å¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹ç¯å¢ƒï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚æ­¤å¤–ï¼Œconda ä¸ä»…æ”¯æŒ Python åŒ…ï¼Œè¿˜èƒ½ç®¡ç† Rã€C/C++ ç­‰é Python ä¾èµ–ï¼Œæå¤§æå‡äº†è·¨è¯­è¨€å¼€å‘çš„ä¾¿æ·æ€§ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ¨è conda è€Œä¸æ˜¯ venv/pyenv</h2>
<p>æ¨è conda è€Œévenvçš„åŸå› åœ¨äºå…¶å¼€ç®±å³ç”¨çš„ç”Ÿæ€é—­ç¯ä¸è·¨è¯­è¨€ä¾èµ–çš„æ‰˜ç®¡èƒ½åŠ›ã€‚Conda ä¸ä»…ç®¡ç† Python åŒ…ç‰ˆæœ¬ï¼Œè¿˜æ§åˆ¶ Python è§£é‡Šå™¨æœ¬ä½“ï¼Œç”¨æˆ·å¯ä»¥åœ¨åŒä¸€è®¾å¤‡ä¸Šè‡ªç”±åˆ‡æ¢ Python 3.4 è‡³ 3.10 ç­‰ä¸åŒè¿è¡Œæ—¶ï¼Œè¿™ç§èƒ½åŠ›åœ¨å¤ç°æ—©æœŸç§‘ç ”é¡¹ç›®æ—¶å°¤ä¸ºå…³é”®ã€‚</p>
<p>venv æ˜¯å¦‚ä½•åˆ›å»ºâ€œç‹¬ç«‹â€çš„ Python è¿è¡Œç¯å¢ƒçš„å‘¢ï¼ŸåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠç³»ç»Ÿ Python é“¾æ¥æˆ–å¤åˆ¶ä¸€ä»½åˆ° venv çš„ç¯å¢ƒï¼Œç”¨å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> activate
</code></pre>
<p>è¿›å…¥ä¸€ä¸ª venv ç¯å¢ƒæ—¶ï¼Œvenv ä¼šä¿®æ”¹ç›¸å…³ç¯å¢ƒå˜é‡ï¼Œè®©å‘½ä»¤ python å’Œ pip å‡æŒ‡å‘å½“å‰çš„ venv ç¯å¢ƒã€‚ä½†ä¼ ç»Ÿ venv æ–¹æ¡ˆéœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ª Python ç¯å¢ƒï¼Œè€Œ Conda èƒ½ç›´æ¥æ‹‰å–é¢„ç¼–è¯‘çš„è§£é‡Šå™¨äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>
<p>Conda çš„ç‹¬ç‰¹ä¼˜åŠ¿ä½“ç°åœ¨é Python ç»„ä»¶çš„ç®¡ç†ç»´åº¦ã€‚Conda æºä¸­åŒ…å«äº†åŒ…å«äº†å¾ˆå¤šé Python çš„åŒ…ï¼Œæ¯”å¦‚ gccï¼Œnodejsï¼Œcudaï¼Œéƒ½å¯ä»¥ç”¨ conda æ¥å®‰è£…å’Œç®¡ç†ã€‚å› æ­¤å¾ˆå¤šæ—¶å€™ä½ æ²¡å¾—é€‰ã€‚æ¯”å¦‚æœ‰ä¸ªå·¥ç¨‹éœ€è¦ torch 0.4ï¼Œè€Œtorch 0.4 ä¾èµ–äº† cuda 9.0ã€‚è€Œä½ ç”µè„‘é‡Œåªæœ‰ cuda 11.0ï¼Œæ­¤æ—¶ä¸éœ€è¦ ä¸‹è½½ä¸€ä¸ªcuda 9.0ï¼Œåªéœ€è¦ä½¿ç”¨</p>
<pre><code class="hljs language-bash" lang="bash">conda install cudatoolkit=9.0
</code></pre>
<p>å°±è§£å†³äº†cuda ç‰ˆæœ¬é—®é¢˜ã€‚</p>
<p>ç¯å¢ƒå¤ç”¨æ•ˆç‡æ˜¯å¦ä¸€å·®å¼‚åŒ–ç‰¹å¾ã€‚Venv åˆ›å»ºçš„éš”ç¦»ç¯å¢ƒä¸é¡¹ç›®ç›®å½•æ·±åº¦ç»‘å®šï¼Œè¿ç§»æˆ–å¤ç”¨éœ€è®°å¿†å¤æ‚è·¯å¾„ï¼Œè€Œ conda ç»´æŠ¤å…¨å±€ç¯å¢ƒåˆ—è¡¨æ”¯æŒè·¨å·¥ç¨‹è°ƒç”¨ã€‚å½“å¤šä¸ªé¡¹ç›®å…±äº«éƒ¨åˆ†åŸºç¡€ä¾èµ–æ—¶ï¼Œå¯ç›´æ¥ä½¿ç”¨</p>
<pre><code class="hljs language-bash" lang="bash">conda activate &lt;ç¯å¢ƒå&gt;
</code></pre>
<p>æ¿€æ´»æ—¢æœ‰ç¯å¢ƒé¿å…é‡å¤å®‰è£…è™½ç„¶å•ä¸ª conda ç¯å¢ƒå¯èƒ½å ç”¨æ•°ç™¾ MB ç©ºé—´ï¼Œä½†ç›¸è¾ƒäºä¸ºæ¯ä¸ªé¡¹ç›®å®Œæ•´å¤åˆ¶ PyTorch ç­‰é‡å‹åº“çš„æ–¹æ¡ˆï¼Œæ•´ä½“ç£ç›˜åˆ©ç”¨ç‡åè€Œæ›´ä¼˜ã€‚</p>
<p>Conda ç”Ÿæ€è¿˜ç¼“è§£äº†è·¨å¹³å°ç¼–è¯‘éš¾é¢˜ã€‚Windows ç¯å¢ƒä¸‹é…ç½®ç§‘å­¦è®¡ç®—åº“å†æ¥ç¹çï¼Œconda æä¾›çš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶åŒ…è¦†ç›–ä¸‰å¤§ä¸»æµæ“ä½œç³»ç»Ÿï¼Œç¡®ä¿ TensorFlow æˆ– NumPy ç­‰å« C æ‰©å±•çš„åŒ…èƒ½ç»•è¿‡æœ¬åœ°ç¼–è¯‘ç›´æ¥è¿è¡Œã€‚è¿™ç§ç‰¹æ€§å¯¹ç¡¬ä»¶èµ„æºæœ‰é™çš„å¼€å‘è®¾å¤‡æä¸ºé‡è¦ï¼Œç”¨æˆ·ä¸å†éœ€è¦ä¸ºé…ç½® MSVC ç¼–è¯‘é“¾è€—è´¹æ•°å°æ—¶ã€‚</p>
<h2 data-id="heading-1">Anaconda å’Œ Miniconda</h2>
<p><strong>Anaconda</strong> æ˜¯åŸºäº conda çš„å®Œæ•´å‘è¡Œç‰ˆï¼Œé¢„è£…äº†è¶…è¿‡ 250 ä¸ªç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æçš„å¸¸ç”¨å·¥å…·åŒ…ï¼ˆå¦‚ NumPyã€Pandasã€Jupyterï¼‰ï¼Œé€‚åˆæ–°æ‰‹æˆ–éœ€è¦å¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒçš„ç”¨æˆ·ã€‚ä½† Anaconda çš„å®‰è£…åŒ…ä½“ç§¯è¾ƒå¤§ï¼ˆçº¦ 3 GBï¼‰ï¼Œå¯¹å­˜å‚¨ç©ºé—´æœ‰é™çš„ç”¨æˆ·å¯èƒ½ä¸å¤Ÿå‹å¥½ã€‚</p>
<p><strong>Miniconda</strong> æ˜¯ conda çš„æç®€ç‰ˆæœ¬ï¼Œä»…åŒ…å«æ ¸å¿ƒçš„ conda å·¥å…·ã€Python åŸºç¡€ç¯å¢ƒå’Œæ‰€ä¾èµ–çš„åŒ…ä»¥åŠå°‘é‡å…¶ä»–å®ç”¨åŒ…ã€‚ï¼ˆå®‰è£…åŒ…çº¦ 50 MBï¼‰ã€‚ç”¨æˆ·éœ€æ‰‹åŠ¨å®‰è£…æ‰€éœ€ä¾èµ–ï¼Œé€‚åˆç†Ÿæ‚‰ Python ç”Ÿæ€æˆ–è¿½æ±‚è½»é‡åŒ–çš„å¼€å‘è€…ã€‚ä¾‹å¦‚ï¼Œè‹¥ä»…éœ€ TensorFlow å’Œ PyTorchï¼Œå¯é€šè¿‡ Miniconda æŒ‰éœ€å®‰è£…ï¼Œé¿å…å†—ä½™å ç”¨ã€‚</p>
<p>æœ¬æ–‡ä»‹ç» Windows ç³»ç»Ÿä¸‹çš„ Anaconda/Miniconda å®‰è£…ã€é…ç½®å’ŒåŸºæœ¬ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-2">ä¸‹è½½</h2>
<p>è®¿é—® Anaconda å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anaconda.com" target="_blank" title="https://www.anaconda.com" ref="nofollow noopener noreferrer">www.anaconda.com</a>ï¼Œé€‰æ‹©å³ä¸Šè§’â€œFree Downloadâ€ï¼Œç‚¹å‡»â€œSkip registrationâ€ï¼Œå·¦ä¾§ä¸º Anacondaï¼Œå³ä¾§ä¸º Minicondaï¼Œæ ¹æ®éœ€æ±‚ä¸‹è½½å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3884ab71395648239d134d966c05044a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=gqjooiU08Og6WnIF4zR%2FeN1BRWo%3D" alt="image-20250513111933309" loading="lazy"/></p>
<p>å›½å†…ç½‘ç»œç¯å¢ƒå¯èƒ½ä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.tuna.tsinghua.edu.cn%2Fanaconda%2F" target="_blank" title="https://mirrors.tuna.tsinghua.edu.cn/anaconda/" ref="nofollow noopener noreferrer">æ¸…åå¤§å­¦é•œåƒç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆ Anaconda</a>ï¼š</p>
<p>Anaconda éœ€è¦æ‰¾çš„æ—¥æœŸæœ€æ–°çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼ŒMiniconda ä¸‹è½½ <code>Miniconda3-latest</code> å³å¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0277d12e4b324edfa4a9d7d022159b24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=JReOQVGkhnS3RxMSqGBbedi%2BhiQ%3D" alt="tsinghua" loading="lazy"/></p>
<h2 data-id="heading-3">å®‰è£…</h2>
<p><strong>ä»¥ Anaconda ä¸ºä¾‹è¿›è¡Œå®‰è£…ï¼ŒMiniconda å®‰è£…è¿‡ç¨‹åŒç†ã€‚</strong></p>
<p>å³é”®å®‰è£…åŒ…ï¼Œé€‰æ‹©â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b04a7c206fb5450186ec010c38928d18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=7WTHNje%2FL9LUhsgjndXnTNe6bwE%3D" alt="run-as-admin" loading="lazy"/></p>
<p>è¿›å…¥å®‰è£…ç•Œé¢ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f646a78c65444d0b9d0f7993f11999ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=Bby0x9zMHmIeuk6Qonb5akFa2Hw%3D" alt="anaconda-setup-1" loading="lazy"/></p>
<p>åŒæ„è®¸å¯è¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6af8aed9208e4e90ab043415ef1c4340~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=o5FpbLZLd3aR1mKs9Nl5lEIm59o%3D" alt="anaconda-setup-2" loading="lazy"/></p>
<p>é€‰æ‹©ä¸ºæ‰€æœ‰ç”¨æˆ·å®‰è£…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c185bd88120040b896265cd43e62f6e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=CJRnGiUymueya1SXzTihz%2BxhnLc%3D" alt="anaconda-setup-3" loading="lazy"/></p>
<p>é€‰æ‹©ä¸€ä¸ªå®‰è£…ä½ç½®ã€‚Anaconda æœ¬ä½“ã€ç³»ç»Ÿçº§åˆ«çš„ conda ç¯å¢ƒï¼ˆå¦‚æœä»¥ç®¡ç†å‘˜èº«ä»½å®‰è£…ï¼‰éƒ½ä¼šå­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ï¼Œä¼šå ç”¨å¾ˆå¤§ç©ºé—´ï¼Œè¯·æ ¹æ®è‡ªå·±éœ€æ±‚ä¿®æ”¹ä½ç½®ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”¨æˆ·çº§åˆ«çš„è™šæ‹Ÿç¯å¢ƒä¼šå®‰è£…åœ¨ C ç›˜ï¼ˆé€šå¸¸åœ¨ <code>C:\Users\ç”¨æˆ·å\.conda\envs</code>ï¼‰ï¼Œåé¢æœ‰ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒä½ç½®çš„æ•™ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b864da55f7094ba1b180a4eaeb0ce746~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=9NYIeWrXLpNymp89p34Vhbh%2FiFE%3D" alt="anaconda-setup-4" loading="lazy"/></p>
<p>æ¨èå…¨éƒ¨å‹¾é€‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b1392d3524840939aa83069fb3d1c9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=WvsuDjne7aZj1Eyu9hVduVMMlNI%3D" alt="anaconda-setup-5" loading="lazy"/></p>
<p>ç­‰å¾…å…¨éƒ¨å®‰è£…ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œç„¶åä¸€ç›´ä¸‹ä¸€æ­¥å³å¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12a886b4334045dc962ed778728e8c59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=t6Q22yTMAIkf5UHKcrPVCkbg0QU%3D" alt="anaconda-setup-6" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13e1d693ce0145c08629ec94b0ca8c1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=0OzPGLGqADDcEM4jJ9oTNnnbVWE%3D" alt="anaconda-setup-7" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3050da7f9ba548809f600348ec808510~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=FuDm1f168MFGy%2FHowtSd8P8Mx2Q%3D" alt="anaconda-setup-8" loading="lazy"/></p>
<p>æŒ‰ç…§ä¸‹é¢æ–¹æ³•æ‰¾åˆ° Anaconda çš„å®‰è£…è·¯å¾„ï¼Œå¤‡ç”¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6cc46df6862449aaee21f02ad9e4e9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=IYjiPSMkDoEY8q67WuHZHKxYEVU%3D" alt="install-path" loading="lazy"/></p>
<p>æŒ‰ <kbd>Win</kbd> + <kbd>s</kbd> æœç´¢â€œç¯å¢ƒå˜é‡â€ï¼Œåœ¨å¼¹å‡ºçª—å£ç‚¹å‡»â€œç¯å¢ƒå˜é‡â€ï¼Œé€‰æ‹©â€œç³»ç»Ÿå˜é‡â€ä¸‹çš„â€œPathâ€ï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘â€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/609da5fbde8945f592d9ea562767ab70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=LcPzhgFadSF0o57F6U7z%2B%2FBJ5ok%3D" alt="env" loading="lazy"/></p>
<p>å°† <code>&lt;å®‰è£…ç›®å½•&gt;</code>ã€<code>&lt;å®‰è£…ç›®å½•&gt;/Scripts</code>ã€<code>&lt;å®‰è£…ç›®å½•&gt;/Library/bin</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œç„¶åä¸€è·¯ç‚¹å‡»â€œç¡®å®šâ€åç”Ÿæ•ˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02db49d264da48dcb173fff73addd753~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=sRTRhzejdHuDx%2BMFKfyb2hK%2FUBE%3D" alt="env-2" loading="lazy"/></p>
<p>æƒ³è¦éªŒè¯ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æˆåŠŸï¼ŒæŒ‰ <kbd>Win</kbd> + <kbd>x</kbd>ï¼Œé€‰æ‹©â€œç»ˆç«¯â€ï¼Œè¾“å…¥ <code>conda --version</code>ï¼Œç»ˆç«¯è¾“å‡ºç‰ˆæœ¬å·ï¼Œè¯æ˜é…ç½®æˆåŠŸï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740188823a724f899720184fa736a4f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=JqeHSd%2BV3pBlZkI3O3Nm5k1K6Cs%3D" alt="ps-var" loading="lazy"/></p>
<h2 data-id="heading-4">åˆå§‹åŒ–</h2>
<p>åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼Œç„¶åé‡å¯ç»ˆç«¯</p>
<pre><code class="hljs language-bash" lang="bash">conda init
</code></pre>
<h3 data-id="heading-5">ä¿®å¤PowerShellæ‰§è¡Œç­–ç•¥æŠ¥é”™</h3>
<p>é‡å¯ç»ˆç«¯åï¼Œå¯èƒ½å‡ºç°ä¸‹é¢æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">. : æ— æ³•åŠ è½½æ–‡ä»¶ C:\Users\excnies\Documents\WindowsPowerShell\profile.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·

å‚é˜… https:/go.microsoft.com/fwlink/?LinkID=135170 ä¸­çš„ about_Execution_Policiesã€‚

æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 3

+ . <span class="hljs-string">'C:\Users\excnies\Documents\WindowsPowerShell\profile.ps1'</span>

+Â  Â ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Â  Â  + CategoryInfoÂ  Â  Â  Â  Â  : SecurityError: (:) []ï¼ŒPSSecurityException

Â  Â  + FullyQualifiedErrorId : UnauthorizedAccess
</code></pre>
<p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯è¡¨æ˜ä½ çš„ Windows PowerShell æ‰§è¡Œç­–ç•¥é˜»æ­¢äº† <code>profile.ps1</code> è„šæœ¬çš„åŠ è½½ã€‚ç³»ç»Ÿé»˜è®¤ç¦æ­¢è¿è¡Œè„šæœ¬ä»¥é˜²æ­¢æ¶æ„è„šæœ¬çš„æ‰§è¡Œã€‚Windows PowerShell æœ‰ä¸€ä¸ªæ‰§è¡Œç­–ç•¥ï¼Œç”¨äºæ§åˆ¶å“ªäº› PowerShell è„šæœ¬å¯ä»¥åœ¨ç³»ç»Ÿä¸Šè¿è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç­–ç•¥é€šå¸¸è®¾ç½®ä¸º "Restricted"ï¼ˆå—é™åˆ¶çš„ï¼‰ï¼Œè¿™æ„å‘³ç€ä¸å…è®¸è¿è¡Œä»»ä½•è„šæœ¬æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä½ çš„ä¸ªäººé…ç½®æ–‡ä»¶ <code>profile.ps1</code>ã€‚</p>
<p>ä½ éœ€è¦æ›´æ”¹ PowerShell çš„æ‰§è¡Œç­–ç•¥æ‰èƒ½åŠ è½½å¹¶è¿è¡Œ <code>profile.ps1</code> è„šæœ¬ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœä½ æƒ³ä¸ºæ‰€æœ‰ç”¨æˆ·æ›´æ”¹ï¼ˆéœ€è¦ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯ï¼‰ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy RemoteSigned -Scope LocalMachine
</code></pre>
<p>å¦‚æœ RemoteSigned ä¸èµ·ä½œç”¨ï¼Œå¯ä»¥å°è¯• Unrestrictedï¼ˆè¯·è°¨æ…ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy Unrestricted -Scope CurrentUser
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœä½ æƒ³ä¸ºæ‰€æœ‰ç”¨æˆ·æ›´æ”¹ï¼ˆéœ€è¦ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯ï¼‰ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">Set-ExecutionPolicy Unrestricted -Scope LocalMachine
</code></pre>
<p>å½“ç³»ç»Ÿè¯¢é—®ä½ æ˜¯å¦è¦æ›´æ”¹æ‰§è¡Œç­–ç•¥æ—¶ï¼Œè¾“å…¥ <code>Y</code> (æ˜¯) å¹¶æŒ‰ Enterã€‚</p>
<p>é‡å¯ç»ˆç«¯ï¼Œå½“å‘½ä»¤è¡Œå¼€å¤´å‡ºç° <code>base</code>ï¼Œåˆå§‹åŒ–æˆåŠŸï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93e0e76d14be4ecd865ab775888291ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=o%2BjBqDjwwIzrr3Yjx4fMry40%2F2I%3D" alt="conda-init" loading="lazy"/></p>
<h2 data-id="heading-6">ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒåœ°å€</h2>
<h3 data-id="heading-7">æ–¹æ³•ä¸€ï¼šä¿®æ”¹.condarc</h3>
<p>Conda ç¯å¢ƒé»˜è®¤å®‰è£…åœ¨ç”¨æˆ·ç›®å½• <code>C:\Users\&lt;ç”¨æˆ·å&gt;\.conda\envs</code> ä¸‹ï¼Œå¦‚æœé€‰æ‹©é»˜è®¤è·¯å¾„ï¼Œé‚£ä¹ˆä¹‹ååˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä¹Ÿæ˜¯å®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œä¼šå ç”¨ C ç›˜å¤§é‡çš„ç©ºé—´ã€‚ä¸æƒ³å ç”¨ C ç›˜ç©ºé—´ï¼Œå¯ä»¥ä¿®æ”¹è™šæ‹Ÿç¯å¢ƒè·¯å¾„ã€‚</p>
<p>é¦–å…ˆæŸ¥æ‰¾ <code>.condarc</code> çš„æ–‡ä»¶è·¯å¾„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda info

     active environment : base
    active <span class="hljs-built_in">env</span> location : C:\ProgramData\anaconda3
            shell level : 1
       user config file : C:\Users\excnies\.condarc
 populated config files : C:\ProgramData\anaconda3\.condarc
          conda version : 24.9.2
    conda-build version : 24.9.0
                    // ------ çœç•¥ ------
       envs directories : C:\Users\excnies\.conda\envs
                          C:\ProgramData\anaconda3\envs
</code></pre>
<p>å¯ä»¥çœ‹åˆ° <code>.condarc</code> çš„æ–‡ä»¶è·¯å¾„ <code>user config file</code> æˆ– <code>populated config files</code>ï¼Œç”¨æˆ·å’Œç³»ç»Ÿè™šæ‹Ÿç¯å¢ƒçš„çš„è·¯å¾„ <code>envs directories</code>ã€‚</p>
<p>æ·»åŠ æˆ–ä¿®æ”¹ <code>.condarc</code> ä¸­çš„ <code>env_dirs</code> å’Œ <code>pkgs_dirs</code> è®¾ç½®ç¯å¢ƒè·¯å¾„ï¼ŒæŒ‰é¡ºåºç¬¬â¼€ä¸ªè·¯å¾„ä½œä¸ºé»˜è®¤å­˜å‚¨è·¯å¾„ï¼Œæœç´¢ç¯å¢ƒæŒ‰å…ˆåé¡ºåºåœ¨å„ç›®å½•ä¸­æŸ¥æ‰¾ã€‚ç›´æ¥åœ¨ <code>.condarc</code> æ·»åŠ ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">envs_dirs:</span>
  - &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\envs
<span class="hljs-section">pkgs_dirs:</span>
  - &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\pkgs
</code></pre>
<p>é‡å¯ç»ˆç«¯ï¼Œè¾“å…¥ <code>conda info</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¿®æ”¹é»˜è®¤ç¯å¢ƒè·¯å¾„æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7ecfd4dc54d4b3fa41a52271c35e39e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=Vfw4%2BDPENebNufGCR%2F%2FcyOofEbk%3D" alt="condarc" loading="lazy"/></p>
<h3 data-id="heading-8">æ–¹æ³•äºŒï¼šä½¿ç”¨conda configå‘½ä»¤</h3>
<p>å½“æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒéªŒè¯æ—¶ï¼Œä½¿ç”¨ <code>conda env list</code> å¯èƒ½ä¼šå‘ç°å®ƒè¿˜æ˜¯é»˜è®¤å®‰è£…åœ¨ C ç›˜ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda config --add envs_dirs &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\envs <span class="hljs-comment"># æ·»åŠ ç¯å¢ƒè·¯å¾„</span>
conda config --add pkgs_dirs &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\envs <span class="hljs-comment"># æ·»åŠ ç¼“å­˜è·¯å¾„</span>
</code></pre>
<p>æƒ³è¦åˆ é™¤ç¯å¢ƒè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda config --remove envs_dirs &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\envs <span class="hljs-comment"># åˆ é™¤ç¯å¢ƒè·¯å¾„</span>
conda config --remove pkgs_dirs &lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda\envs <span class="hljs-comment"># åˆ é™¤ç¼“å­˜è·¯å¾„</span>
</code></pre>
<p>å¦‚æœè¿˜æ˜¯æ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œåˆ™éœ€è¦<strong>æå‡ä¿®æ”¹åæ–‡ä»¶å¤¹ï¼ˆ<code>&lt;ä½ å¸Œæœ›ä¿®æ”¹çš„è·¯å¾„ï¼Œå¦‚Dç›˜&gt;\conda</code>ï¼‰çš„æƒé™</strong>ã€‚å³é”®æ–‡ä»¶å¤¹ï¼Œç„¶åå³å‡»é€‰åˆ™å±æ€§ï¼Œæ‰¾åˆ°å®‰å…¨ï¼ŒUsersæƒé™å…¨éƒ¨å…è®¸ã€‚æ¥ä¸‹æ¥ç¡®å®šåï¼Œæ—¶é—´ç¨å¾®æœ‰ç‚¹é•¿ï¼Œç­‰å¾…å®Œæˆå³å¯ã€‚</p>
<p>è¿™æ—¶æ–°åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒéªŒè¯æ—¶ï¼Œå‘ç°åœ¨D:\Anaconda3\envsä¸‹ï¼Œä¿®æ”¹æˆåŠŸã€‚</p>
<h2 data-id="heading-9">é…ç½®å›½å†…è½¯ä»¶æº</h2>
<h3 data-id="heading-10">conda</h3>
<p>åˆ é™¤ä¹‹å‰çš„é•œåƒæºï¼Œæ¢å›condaé»˜è®¤æºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda config --remove-key channels
</code></pre>
<p>ç„¶åæ‰§è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">conda config --add channels defaults
</code></pre>
<h4 data-id="heading-11">æ·»åŠ æ¸…åå¤§å­¦å¼€æºé•œåƒç«™é•œåƒæº</h4>
<pre><code class="hljs language-bash" lang="bash">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
</code></pre>
<h4 data-id="heading-12">æ·»åŠ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦é•œåƒæº</h4>
<pre><code class="hljs language-bash" lang="bash">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/
</code></pre>
<h4 data-id="heading-13">æ˜¾ç¤ºé•œåƒé€šé“ï¼ˆé…ç½®ç»“æœï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">conda config --show channels
</code></pre>
<h4 data-id="heading-14">åˆ é™¤ä¸‹è½½æº</h4>
<p>ä½¿ç”¨ <code>--remove</code> å‘½ä»¤</p>
<pre><code class="hljs language-shell" lang="shell">conda config --remove channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
</code></pre>
<h4 data-id="heading-15">é€šè¿‡.condarcä¿®æ”¹</h4>
<p><strong>ä¸ºé¿å…ä¿®æ”¹é”™è¯¯å¯¼è‡´é…ç½®é—®é¢˜ï¼Œå»ºè®®å…ˆå¤‡ä»½åŸ <code>.condarc</code></strong>ã€‚</p>
<p><strong>å¦‚æœç›´æ¥å¤åˆ¶ä¸‹é¢æ–‡å­—ï¼Œè¯·åˆ é™¤æ³¨é‡Šï¼Œä»¥å…é‡åˆ°å¥‡å¥‡æ€ªæ€ªçš„æŠ¥é”™</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">channels:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">defaults</span>  <span class="hljs-comment"># æœ€åæ·»åŠ å®˜æ–¹é»˜è®¤æºï¼ˆå¤‡ç”¨ï¼‰</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span>  <span class="hljs-comment"># PyTorch é•œåƒæº</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</span>  <span class="hljs-comment"># conda-forge é•œåƒæº</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span>  <span class="hljs-comment"># Anaconda è‡ªç”±åŒ…é•œåƒæº</span>

<span class="hljs-attr">show_channel_urls:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å®‰è£…æ—¶æ˜¾ç¤ºå…·ä½“ä½¿ç”¨çš„é€šé“ URLï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰</span>
</code></pre>
<p>Conda ä¼š<strong>ä¼˜å…ˆä½¿ç”¨åˆ—è¡¨ä¸­é åçš„é€šé“</strong>ï¼ˆå› ä¸ºåæ·»åŠ çš„é€šé“ä¼˜å…ˆçº§æ›´é«˜ï¼‰ã€‚ä¸Šè¿°é…ç½®ä¸­ï¼Œ<code>pytorch</code> é•œåƒæºåœ¨æœ€å‰ï¼Œä½†å®é™…ä¼˜å…ˆçº§æœ€ä½ã€‚æˆ‘ä»¬å¸Œæœ›ä¼˜å…ˆä½¿ç”¨æ¸…åé•œåƒæºï¼Œéœ€å°†å…¶æ”¾åœ¨åˆ—è¡¨<strong>åé¢</strong>ï¼Œ<code>defaults</code> æ”¾åœ¨å‰é¢ï¼ˆä½œä¸ºå¤‡ç”¨ï¼‰ã€‚</p>
<h4 data-id="heading-16">åŒ…ä¸‹è½½ç›®å½•</h4>
<p>è™šæ‹Ÿç¯å¢ƒçš„è·¯å¾„ï¼š<code>anacondaå®‰è£…çš„ä½ç½®\envs\è™šæ‹Ÿç¯å¢ƒ\Lib\site-packages</code>
baseç¯å¢ƒçš„è·¯å¾„å¦‚ä¸‹ï¼š<code>anacondaå®‰è£…çš„ä½ç½®\Lib\site-packages</code></p>
<h4 data-id="heading-17">ä¸‹è½½æŠ¥é”™</h4>
<pre><code class="hljs language-bash" lang="bash">EnvironmentNotWritableError: The current user does not have write permissions to the target environment
NotWritableError: The current user does not have write permissions to a required path.
</code></pre>
<p>é”™è¯¯åŸå› ï¼šåé¢åˆ—çš„é‚£ä¸ªæ–‡ä»¶å¤¹ç¼ºå†™å…¥æƒé™ï¼Œç»ˆç«¯è¾“å…¥ <code>conda info</code>åï¼Œ<code>base environment : D:\conda (writable)</code>ï¼Œæ­¤å¤„å¿…é¡»æ˜¯å¯å†™çš„
è§£å†³æ–¹æ³•ï¼šæ‰¾åˆ°åé¢åˆ—çš„é‚£ä¸ªæ–‡ä»¶å¤¹ã€å³é”®ã€å±æ€§ã€å®‰å…¨ã€ç¼–è¾‘ã€å®Œå…¨æ§åˆ¶ï¼ˆæˆ–è€…åªæŠŠå†™å…¥å‹¾ä¸Šä¹Ÿè¡Œï¼‰</p>
<h3 data-id="heading-18">pip</h3>
<h4 data-id="heading-19">æ°¸ä¹…åˆ‡æ¢</h4>
<p>å‡çº§ pip åˆ°æœ€æ–°çš„ç‰ˆæœ¬åè¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python -m pip install --upgrade pip
pip config <span class="hljs-built_in">set</span> global.index-url https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
</code></pre>
<p>å¦‚æœæ‚¨åˆ° pip é»˜è®¤æºçš„ç½‘ç»œè¿æ¥è¾ƒå·®ï¼Œä¸´æ—¶ä½¿ç”¨é•œåƒç«™æ¥å‡çº§ pipï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python -m pip install -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple --upgrade pip
</code></pre>
<h4 data-id="heading-20">ä¸´æ—¶åˆ‡æ¢</h4>
<p>å¯ä»¥ç›´æ¥åœ¨ pip å‘½ä»¤ä¸­ä½¿ç”¨ <strong>-i</strong> å‚æ•°æ¥æŒ‡å®šé•œåƒåœ°å€ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip3 install numpy -i https://pypi.tuna.tsinghua.edu.cn/simple
</code></pre>
<h4 data-id="heading-21">ä¿®æ”¹<code>pip.ini</code></h4>
<p>åœ¨ <code>C:\user\username\ç›®å½•ä¸‹</code>ï¼Œåˆ›å»º <code>pip</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹å†…åˆ›å»º <code>pip.ini</code> æ–‡ä»¶ï¼Œå³åœ¨ <code>C:\user\username\pip\pip.ini</code> ä¸­ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[global]</span>
<span class="hljs-attr">index-url</span>=https://pypi.tuna.tsinghua.edu.cn/simple
<span class="hljs-section">[install]</span>
<span class="hljs-attr">trusted-host</span>=pypi.tuna.tsinghua.edu.cn
<span class="hljs-attr">disable-pip-version-check</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">timeout</span> = <span class="hljs-number">6000</span>
</code></pre>
<h2 data-id="heading-22">ç®¡ç†è™šæ‹Ÿç¯å¢ƒ</h2>
<p>Conda å…è®¸åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»¥éš”ç¦»ä¸åŒé¡¹ç›®çš„ä¾èµ–é¡¹ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚</p>
<h3 data-id="heading-23">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h3>
<p>ä½¿ç”¨ <code>conda create</code> å‘½ä»¤åˆ›å»ºéš”ç¦»ç¯å¢ƒï¼Œæ”¯æŒæŒ‡å®š Python ç‰ˆæœ¬ã€é¢„å®‰è£…åŒ…åŠç¯å¢ƒåç§°ã€‚åŸºç¡€è¯­æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda create --name &lt;ç¯å¢ƒåç§°&gt; python=&lt;Pythonç‰ˆæœ¬&gt; [å…¶ä»–åŒ…...]
</code></pre>
<p><strong>æŒ‡å®š Python ç‰ˆæœ¬åˆ›å»ºç¯å¢ƒ</strong>ï¼š
ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>myenv</code> ä¸”ä½¿ç”¨ Python 3.8 çš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda create --name myenv python=3.8
</code></pre>
<p><strong>åˆ›å»ºç¯å¢ƒå¹¶åŒæ—¶å®‰è£…æŒ‡å®šåŒ…</strong>ï¼š
ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>data_analysis</code> çš„ç¯å¢ƒï¼Œä½¿ç”¨ Python 3.9ï¼Œå¹¶å®‰è£… <code>numpy</code> å’Œ <code>pandas</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda create --name data_analysis python=3.9 numpy pandas
</code></pre>
<p><strong>åˆ›å»ºä¸å«ä»»ä½•åŒ…çš„çº¯å‡€ç¯å¢ƒ</strong>ï¼ˆåç»­æ‰‹åŠ¨å®‰è£…æ‰€éœ€åŒ…ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda create --name minimal_env
</code></pre>
<p>è¿™ç§æ–¹å¼åˆ›å»ºçš„ç¯å¢ƒå¯èƒ½ä¸åŒ…å« Python è§£é‡Šå™¨ï¼Œæ¿€æ´»åéœ€æ‰‹åŠ¨å®‰è£…ã€‚</p>
<p><strong>ä»ç¯å¢ƒæ–‡ä»¶åˆ›å»ºç¯å¢ƒ</strong>ï¼š
å¦‚æœæœ‰ä¸€ä¸ª <code>environment.yml</code> æ–‡ä»¶ï¼ˆé€šå¸¸é€šè¿‡å¯¼å‡ºç¯å¢ƒè·å¾—ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºç›¸åŒçš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> create -f environment.yml
</code></pre>
<p>åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œconda ä¼šå°è¯•åœ¨ <code>.condarc</code> æ–‡ä»¶ä¸­ <code>envs_dirs</code> æŒ‡å®šçš„ç¬¬ä¸€ä¸ªè·¯å¾„ä¸‹åˆ›å»ºç¯å¢ƒã€‚å¦‚æœè¯¥è·¯å¾„ä¸å¯å†™æˆ–ä¸å­˜åœ¨ï¼Œå¯èƒ½ä¼šæŠ¥é”™æˆ–åœ¨é»˜è®¤è·¯å¾„ä¸‹åˆ›å»ºã€‚</p>
<h3 data-id="heading-24">æ¿€æ´»å’Œé€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h3>
<p><strong>æ¿€æ´»ç¯å¢ƒ</strong>ï¼š
æ¿€æ´»ç¯å¢ƒåï¼Œç»ˆç«¯æç¤ºç¬¦å‰ä¼šæ˜¾ç¤ºå½“å‰ç¯å¢ƒçš„åç§°ã€‚æ‰€æœ‰ Python å’ŒåŒ…ç›¸å…³çš„å‘½ä»¤éƒ½å°†åœ¨è¯¥ç¯å¢ƒä¸­æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash">conda activate &lt;ç¯å¢ƒåç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œæ¿€æ´»ä¹‹å‰åˆ›å»ºçš„ <code>myenv</code> ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda activate myenv
</code></pre>
<p>å·¦ä¾§æ‹¬å·å†… <code>base</code> ç¼–ç¨‹ <code>myenv</code>ï¼Œæ¿€æ´»æˆåŠŸï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c61de5d8334543a68936b3d18ecd400f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=RjGiJtyCo9fO1PXH3mP5KfJAtEI%3D" alt="conda-activate" loading="lazy"/></p>
<p>æ¿€æ´»ç¯å¢ƒä¼šä¿®æ”¹ç³»ç»Ÿçš„ <code>PATH</code> ç¯å¢ƒå˜é‡ï¼Œå°†å½“å‰æ¿€æ´»ç¯å¢ƒçš„è„šæœ¬å’Œå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ç½®äºä¼˜å…ˆä½ç½®ã€‚</p>
<p><strong>é€€å‡ºç¯å¢ƒ</strong>ï¼š
é€€å‡ºå½“å‰æ¿€æ´»çš„ç¯å¢ƒåï¼Œä¼šè¿”å›åˆ°ä¸Šä¸€ä¸ªç¯å¢ƒï¼ˆé€šå¸¸æ˜¯ <code>base</code> ç¯å¢ƒï¼Œæˆ–è€…å¦‚æœæ²¡æœ‰å…¶ä»–ç¯å¢ƒæ¿€æ´»ï¼Œåˆ™è¿”å›åˆ°ç³»ç»Ÿé»˜è®¤ç¯å¢ƒï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">conda deactivate
</code></pre>
<h3 data-id="heading-25">æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒ</h3>
<p>å¯ä»¥åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„ conda ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> list
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda info --envs
</code></pre>
<p>å‘½ä»¤è¾“å‡ºä¼šæ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒåŠå…¶å¯¹åº”çš„è·¯å¾„ã€‚å½“å‰æ¿€æ´»çš„ç¯å¢ƒä¼šä»¥æ˜Ÿå· <code>*</code> æ ‡è®°ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># conda environments:</span>
<span class="hljs-meta">#</span>
<span class="hljs-keyword">base</span>                  * C:\ProgramData\anaconda3
myenv                    D:\conda\envs\myenv
data_analysis            D:\conda\envs\data_analysis
</code></pre>
<h3 data-id="heading-26">åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</h3>
<p>åˆ é™¤ä¸å†éœ€è¦çš„è™šæ‹Ÿç¯å¢ƒå¯ä»¥é‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> remove -n &lt;ç¯å¢ƒåç§°&gt;
</code></pre>
<p>æˆ–è€…ä½¿ç”¨æ›´å½»åº•çš„å‘½ä»¤ï¼Œç¡®ä¿åˆ é™¤æ‰€æœ‰ç›¸å…³æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda remove -n &lt;ç¯å¢ƒåç§°&gt; --all
</code></pre>
<p>ä¾‹å¦‚ï¼Œåˆ é™¤åä¸º <code>myenv</code> çš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda remove -n myenv --all
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåˆ é™¤æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…æ“ä½œã€‚</p>
<h3 data-id="heading-27">å¯¼å‡ºè™šæ‹Ÿç¯å¢ƒ</h3>
<p>ä¸ºäº†åœ¨å…¶ä»–æœºå™¨ä¸Šå¤ç°ç¯å¢ƒæˆ–ä¸ä»–äººå…±äº«ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥å°†å½“å‰æ¿€æ´»çš„ç¯å¢ƒå¯¼å‡ºä¸ºä¸€ä¸ª YAML æ–‡ä»¶ï¼ˆé€šå¸¸å‘½åä¸º <code>environment.yml</code>ï¼‰ã€‚</p>
<p><strong>å¯¼å‡ºå½“å‰æ¿€æ´»ç¯å¢ƒçš„ç²¾ç¡®åŒ…åˆ—è¡¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> <span class="hljs-built_in">export</span> &gt; environment.yml
</code></pre>
<p>è¯¥æ–‡ä»¶åŒ…å«äº†ç¯å¢ƒä¸­æ‰€æœ‰åŒ…ï¼ˆåŒ…æ‹¬ Python ç‰ˆæœ¬å’Œ conda å®‰è£…çš„åŒ…ï¼‰çš„ç²¾ç¡®ç‰ˆæœ¬å·å’Œæ¥æºé€šé“ã€‚</p>
<p>è‹¥éœ€æ’é™¤ base ç¯å¢ƒçš„å…¬å…±åŒ…ï¼ˆé¿å…å†—ä½™ï¼‰ï¼Œå¯æ·»åŠ  <code>--no-builds</code> å‚æ•°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> <span class="hljs-built_in">export</span> --no-builds &gt; environment.yml
</code></pre>
<p><strong>å¯¼å‡ºæ›´é€šç”¨çš„ç¯å¢ƒæè¿°ï¼ˆæ¨èç”¨äºè·¨å¹³å°åˆ†äº«ï¼‰</strong>ï¼š
å¦‚æœå¸Œæœ›ç”Ÿæˆä¸€ä¸ªæ›´ç®€æ´ã€æ›´ä¾§é‡äºæè¿°æ ¸å¿ƒä¾èµ–è€Œéæ‰€æœ‰é—´æ¥ä¾èµ–çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>--from-history</code> å‚æ•°ã€‚è¿™ä¼šè®°å½•ç”¨æˆ·æ˜¾å¼å®‰è£…çš„åŒ…ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> <span class="hljs-built_in">export</span> --from-history &gt; environment.yml
</code></pre>
<p>ä½¿ç”¨æ­¤æ–‡ä»¶åˆ›å»ºç¯å¢ƒæ—¶ï¼Œconda ä¼šå°è¯•è§£æå¹¶å®‰è£…æœ€æ–°å…¼å®¹ç‰ˆæœ¬çš„ä¾èµ–ã€‚</p>
<p>ä¹‹åï¼Œå…¶ä»–äººæˆ–è‡ªå·±åœ¨å¦ä¸€å°æœºå™¨ä¸Šå¯ä»¥ä½¿ç”¨æ­¤æ–‡ä»¶åˆ›å»ºç›¸åŒçš„ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> create -f environment.yml
</code></pre>
<h2 data-id="heading-28">å®‰è£…è½¯ä»¶åŒ…</h2>
<p>åœ¨æ¿€æ´»ç›®æ ‡è™šæ‹Ÿç¯å¢ƒåï¼Œå¯ä»¥ä½¿ç”¨ <code>conda install</code> æˆ– <code>pip install</code> æ¥å®‰è£…è½¯ä»¶åŒ…ã€‚</p>
<h3 data-id="heading-29">conda install</h3>
<p><code>conda install</code> æ˜¯ conda ç”Ÿæ€ç³»ç»Ÿçš„é¦–é€‰å®‰è£…æ–¹å¼ï¼Œå®ƒä¼šå¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œå¹¶èƒ½å®‰è£…é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶åŒ…ï¼Œé¿å…äº†æœ¬åœ°ç¼–è¯‘çš„éº»çƒ¦ï¼Œå°¤å…¶å¯¹äºç§‘å­¦è®¡ç®—åŒ…éå¸¸æœ‰ç”¨ã€‚</p>
<p>é€šè¿‡ conda å®‰è£…åŒ…æ—¶ï¼Œä¼šè‡ªåŠ¨è§£æä¾èµ–å¹¶åŒ¹é…å…¼å®¹ç‰ˆæœ¬ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨ã€‚åŸºç¡€è¯­æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install -n &lt;ç¯å¢ƒå&gt; &lt;åŒ…å&gt;=&lt;ç‰ˆæœ¬&gt; [-c &lt;é€šé“&gt;]
</code></pre>
<ul>
<li><code>-n &lt;ç¯å¢ƒå&gt;</code>ï¼šå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šç›®æ ‡ç¯å¢ƒï¼ˆè‹¥æœªæ¿€æ´»ç›®æ ‡ç¯å¢ƒï¼‰ï¼›è‹¥å·²æ¿€æ´»ç¯å¢ƒï¼Œå¯çœç•¥ã€‚</li>
<li><code>&lt;åŒ…å&gt;=&lt;ç‰ˆæœ¬&gt;</code>ï¼šæŒ‡å®šåŒ…ååŠç‰ˆæœ¬ï¼ˆå¦‚ <code>numpy=1.21</code>ï¼‰ï¼›è‹¥çœç•¥ç‰ˆæœ¬ï¼Œé»˜è®¤å®‰è£…æœ€æ–°å…¼å®¹ç‰ˆã€‚</li>
<li><code>-c &lt;é€šé“&gt;</code>ï¼šå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šåŒ…çš„æ¥æºé€šé“ï¼ˆå¦‚ <code>-c conda-forge</code> æˆ–å›½å†…é•œåƒæºï¼‰ã€‚</li>
</ul>
<p><strong>åŸºæœ¬å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œå®‰è£… <code>scikit-learn</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install scikit-learn
</code></pre>
<p><strong>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install &lt;åŒ…åç§°&gt;=&lt;ç‰ˆæœ¬å·&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œå®‰è£… <code>numpy</code> ç‰ˆæœ¬ 1.20ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install numpy=1.20
</code></pre>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šæ›´çµæ´»çš„ç‰ˆæœ¬èŒƒå›´ï¼Œå¦‚ <code>numpy&gt;=1.20</code>, <code>numpy&lt;1.21</code>ã€‚</p>
<p><strong>ä»ç‰¹å®šé€šé“å®‰è£…</strong>ï¼š
å¦‚æœé»˜è®¤é€šé“æ²¡æœ‰æŸä¸ªåŒ…æˆ–ç‰¹å®šç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‡å®šé€šé“è¿›è¡Œå®‰è£…ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">conda install -c &lt;é€šé“åç§°&gt; &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œä» <code>conda-forge</code> é€šé“å®‰è£… <code>some-package</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install -c conda-forge some-package
</code></pre>
<p>é€šé“çš„ä¼˜å…ˆçº§åœ¨ <code>.condarc</code> æ–‡ä»¶ä¸­é…ç½®ã€‚</p>
<p><strong>æœç´¢åŒ…</strong>ï¼š
æŸ¥æ‰¾å¯ç”¨åŒ…åŠå…¶ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda search &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œæœç´¢æ‰€æœ‰å¯ç”¨çš„ <code>tensorflow</code> ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda search tensorflow
</code></pre>
<h3 data-id="heading-30">pip install</h3>
<p>è‹¥ conda æºä¸­æ— ç›®æ ‡åŒ…ï¼ˆå¦‚éƒ¨åˆ†å°ä¼— Python åº“ï¼‰ï¼Œå¯é€šè¿‡ pip å®‰è£…ï¼ˆéœ€ç¡®ä¿å·²æ¿€æ´»ç›®æ ‡ç¯å¢ƒï¼‰ã€‚è¯­æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install &lt;åŒ…å&gt;==&lt;ç‰ˆæœ¬&gt; [-i &lt;é•œåƒæº&gt;]
</code></pre>
<ul>
<li><code>==&lt;ç‰ˆæœ¬&gt;</code>ï¼šå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šåŒ…ç‰ˆæœ¬ï¼ˆå¦‚ <code>requests==2.25.1</code>ï¼‰ï¼›è‹¥çœç•¥ï¼Œå®‰è£…æœ€æ–°ç‰ˆã€‚</li>
<li><code>-i &lt;é•œåƒæº&gt;</code>ï¼šå¯é€‰å‚æ•°ï¼ŒæŒ‡å®š pip é•œåƒæºåŠ é€Ÿä¸‹è½½ï¼ˆå¦‚ <code>-i https://pypi.tuna.tsinghua.edu.cn/simple</code>ï¼‰ã€‚</li>
</ul>
<p><strong>åŸºæœ¬å®‰è£…</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œå®‰è£… <code>requests</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install requests
</code></pre>
<p><strong>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install &lt;åŒ…åç§°&gt;==&lt;ç‰ˆæœ¬å·&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œå®‰è£… <code>django</code> ç‰ˆæœ¬ 3.2ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install django==3.2
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ <code>conda install</code></strong>ï¼šå°¤å…¶å¯¹äºæœ‰å¤æ‚äºŒè¿›åˆ¶ä¾èµ–çš„åŒ…ï¼ˆå¦‚ NumPy, SciPy, PyTorch, TensorFlowï¼‰ã€‚</li>
<li><strong>åœ¨æ¿€æ´» conda ç¯å¢ƒåä½¿ç”¨ <code>pip</code></strong>ï¼šè¿™æ ·å¯ä»¥ç¡®ä¿ <code>pip</code> å°†åŒ…å®‰è£…åˆ°å½“å‰ conda ç¯å¢ƒçš„ <code>site-packages</code> ç›®å½•ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿ Python æˆ–å…¶ä»–ç¯å¢ƒã€‚</li>
<li>æ··åˆä½¿ç”¨ <code>conda</code> å’Œ <code>pip</code> é€šå¸¸æ˜¯å®‰å…¨çš„ï¼Œä½†å»ºè®®å…ˆç”¨ <code>conda</code> å®‰è£…å°½å¯èƒ½å¤šçš„åŒ…ï¼Œç„¶åå†ç”¨ <code>pip</code> è¡¥å……ã€‚</li>
</ol>
<h3 data-id="heading-31">æ‰¹é‡å®‰è£…è½¯ä»¶åŒ…</h3>
<p><strong>ä½¿ç”¨ conda å®‰è£…å¤šä¸ªåŒ…</strong>ï¼š
å¯ä»¥ç›´æ¥åœ¨ <code>conda install</code> å‘½ä»¤ååˆ—å‡ºæ‰€æœ‰éœ€è¦å®‰è£…çš„åŒ…åï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda install &lt;åŒ…1&gt; &lt;åŒ…2&gt; &lt;åŒ…3&gt;
</code></pre>
<p><strong>ä» <code>environment.yml</code> æ–‡ä»¶å®‰è£… (åˆ›å»ºæˆ–æ›´æ–°ç¯å¢ƒ)</strong>ï¼š
å¦‚å‰æ‰€è¿°ï¼Œ<code>conda env create -f environment.yml</code> ç”¨äºåˆ›å»ºæ–°ç¯å¢ƒã€‚
å¦‚æœè¦åœ¨ç°æœ‰ç¯å¢ƒä¸­å®‰è£…æˆ–æ›´æ–° <code>environment.yml</code> æ–‡ä»¶ä¸­åˆ—å‡ºçš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda <span class="hljs-built_in">env</span> update --name &lt;ç¯å¢ƒåç§°&gt; --file environment.yml --prune
</code></pre>
<p><code>--prune</code> é€‰é¡¹ä¼šç§»é™¤ç¯å¢ƒä¸­å­˜åœ¨ä½† <code>environment.yml</code> æ–‡ä»¶ä¸­æœªåˆ—å‡ºçš„åŒ…ã€‚</p>
<p><strong>ä» <code>requirements.txt</code> æ–‡ä»¶å®‰è£… (é€šå¸¸ä½¿ç”¨ pip)</strong>ï¼š
å¦‚æœæœ‰ä¸€ä¸ª <code>requirements.txt</code> æ–‡ä»¶ï¼ˆé€šå¸¸ç”¨äº <code>pip</code>ï¼‰ï¼Œå¯ä»¥åœ¨æ¿€æ´» conda ç¯å¢ƒåä½¿ç”¨ <code>pip</code> å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<p><code>requirements.txt</code> æ–‡ä»¶é€šå¸¸åªåŒ…å«åŒ…åå’Œç‰ˆæœ¬ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">numpy</span>==<span class="hljs-number">1.20</span>.<span class="hljs-number">3</span>
pandas&gt;=1.1.0
requests
</code></pre>
<h3 data-id="heading-32">åˆ é™¤è½¯ä»¶åŒ…</h3>
<p><strong>ä½¿ç”¨ conda åˆ é™¤</strong>ï¼š
ä»å½“å‰æ¿€æ´»çš„ç¯å¢ƒä¸­åˆ é™¤ä¸€ä¸ªåŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda remove &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œåˆ é™¤ <code>scikit-learn</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda remove scikit-learn
</code></pre>
<p><strong>æ¸…ç©ºå½“å‰ç¯å¢ƒçš„æ‰€æœ‰åŒ…ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰:</strong></p>
<pre><code class="hljs language-bash" lang="bash">conda remove --all
</code></pre>
<p><strong>ä½¿ç”¨ pip åˆ é™¤</strong>ï¼š
å¦‚æœåŒ…æ˜¯ä½¿ç”¨ <code>pip</code> å®‰è£…çš„ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨ <code>pip</code> æ¥å¸è½½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip uninstall &lt;åŒ…åç§°&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œåˆ é™¤ <code>requests</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip uninstall requests
</code></pre>
<p>åˆ é™¤æ—¶é€šå¸¸ä¼šæœ‰ç¡®è®¤æç¤ºã€‚</p>
<h2 data-id="heading-33">æ¸…ç†ç¼“å­˜</h2>
<p>Conda ä¼šç¼“å­˜ä¸‹è½½çš„åŒ…ï¼ˆ<code>pkgs</code> ç›®å½•ï¼‰ã€ç´¢å¼•æ–‡ä»¶åŠä¸´æ—¶æ–‡ä»¶ï¼Œé•¿æœŸä½¿ç”¨å¯èƒ½å ç”¨æ•° GB ç©ºé—´ã€‚å®šæœŸæ¸…ç†å¯é‡Šæ”¾ç£ç›˜èµ„æºã€‚</p>
<h3 data-id="heading-34">ç¼“å­˜ç±»å‹åŠè·¯å¾„</h3>
<ul>
<li><strong>åŒ…ç¼“å­˜</strong>ï¼šå·²ä¸‹è½½ä½†æœªè¢«ç¯å¢ƒä½¿ç”¨çš„åŒ…ï¼Œè·¯å¾„ä¸º <code>pkgs_dirs</code>ï¼ˆå¯é€šè¿‡ <code>conda info</code> æŸ¥çœ‹ï¼Œé»˜è®¤åœ¨ <code>C:\Users\&lt;ç”¨æˆ·å&gt;\.conda\pkgs</code>ï¼‰ã€‚</li>
<li><strong>ç´¢å¼•ç¼“å­˜</strong>ï¼šå„é€šé“çš„å…ƒæ•°æ®ç´¢å¼•ï¼Œç”¨äºåŠ é€ŸåŒ…æœç´¢ã€‚</li>
<li><strong>ä¸´æ—¶æ–‡ä»¶</strong>ï¼šä¸‹è½½è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-35">condaç¼“å­˜æ¸…ç†</h3>
<p><strong>æ¸…ç†æœªä½¿ç”¨çš„åŒ…ç¼“å­˜</strong>ï¼ˆä¿ç•™å½“å‰ç¯å¢ƒæ­£åœ¨ä½¿ç”¨çš„åŒ…ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -p  <span class="hljs-comment"># --packages çš„ç¼©å†™</span>
</code></pre>
<p><strong>æ¸…ç†ç´¢å¼•ç¼“å­˜</strong>ï¼ˆä¸‹æ¬¡ä½¿ç”¨æ—¶ä¼šé‡æ–°ä¸‹è½½ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -i  <span class="hljs-comment"># --index-cache çš„ç¼©å†™</span>
</code></pre>
<p><strong>æ¸…ç†ä¸´æ—¶æ–‡ä»¶</strong>ï¼ˆå¦‚ä¸‹è½½ä¸­æ–­çš„æ®‹ç•™æ–‡ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -t  <span class="hljs-comment"># --tarballs çš„ç¼©å†™</span>
</code></pre>
<p><strong>æ¸…ç†é”æ–‡ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -l <span class="hljs-comment"># --lock-files çš„ç¼©å†™</span>
</code></pre>
<p><strong>æ¸…ç†ä¸´æ—¶æ–‡ä»¶å¤¹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -s  <span class="hljs-comment"># tempfiles</span>
</code></pre>
<p><strong>è‡ªåŠ¨ç¡®è®¤</strong>ï¼š
åœ¨æ‰§è¡Œæ¸…ç†å‘½ä»¤æ—¶æ·»åŠ  <code>-y</code> å‚æ•°å¯ä»¥è·³è¿‡ç¡®è®¤æç¤ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean --all -y
</code></pre>
<p><strong>æ¸…ç†æ‰€æœ‰ç¼“å­˜</strong>ï¼ˆè°¨æ…æ“ä½œï¼Œæ¸…ç†åæ— æ³•æ¢å¤ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">conda clean -a  <span class="hljs-comment"># --all çš„ç¼©å†™ï¼Œç­‰ä»·äº -p -i -t</span>
</code></pre>
<h3 data-id="heading-36">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>æ¸…ç†å‰å»ºè®®ç¡®è®¤ä¸éœ€è¦è¿™äº›ç¼“å­˜åŒ…ï¼ˆå¦‚è·¨ç¯å¢ƒå¤ç”¨çš„åŒ…å¯èƒ½è¢«åˆ é™¤ï¼‰ã€‚</li>
<li>è‹¥éœ€ä¿ç•™éƒ¨åˆ†ç¼“å­˜ï¼Œå¯æ‰‹åŠ¨è¿›å…¥ <code>pkgs</code> ç›®å½•åˆ é™¤å†—ä½™æ–‡ä»¶ï¼ˆéœ€å…³é—­ conda ç›¸å…³è¿›ç¨‹ï¼‰ã€‚</li>
<li>æ¸…ç†åï¼Œå†æ¬¡å®‰è£…ç›¸åŒåŒ…æ—¶ä¼šé‡æ–°ä¸‹è½½ï¼Œå¯èƒ½å½±å“é¦–æ¬¡å®‰è£…é€Ÿåº¦ã€‚</li>
<li>ä¸ºäº†å°½å¤§ç¨‹åº¦é‡Šæ”¾ç©ºé—´ï¼Œå¯ä»¥å°†ä¸å¸¸ç”¨çš„è™šæ‹Ÿç¯å¢ƒå¯¼å‡ºä¸º yml æ–‡ä»¶ï¼Œåˆ é™¤æ•´ä¸ªç¯å¢ƒï¼Œéœ€è¦æ—¶å†è¿›è¡Œå¯¼å…¥ã€‚</li>
</ul>
<h3 data-id="heading-37">pipç¼“å­˜æ¸…ç†</h3>
<p>Pip ä¼šç¼“å­˜å·²ä¸‹è½½çš„åŒ…ï¼ˆé¿å…é‡å¤ä¸‹è½½ï¼‰ï¼Œç¼“å­˜é»˜è®¤å­˜å‚¨åœ¨ <code>C:\Users\&lt;ç”¨æˆ·å&gt;\AppData\Local\pip\Cache</code>ï¼ˆWindowsï¼‰ï¼Œé•¿æœŸä½¿ç”¨å¯èƒ½å ç”¨è¾ƒå¤šç©ºé—´ã€‚ä»¥ä¸‹æ˜¯æ¸…ç†æ–¹æ³•ï¼š</p>
<p><strong>æŸ¥çœ‹ç¼“å­˜ä¿¡æ¯</strong>ï¼ˆä½ç½®ã€å¤§å°ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip cache info
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Cache location:</span> <span class="hljs-string">C:\Users\excnies\AppData\Local\pip\Cache</span>
<span class="hljs-attr">Cache size:</span> <span class="hljs-number">234.5</span> <span class="hljs-string">MB</span>
</code></pre>
<p><strong>æ¸…ç†æ‰€æœ‰ç¼“å­˜</strong>ï¼ˆåˆ é™¤æ‰€æœ‰å·²ä¸‹è½½çš„åŒ…ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip cache purge
</code></pre>
<p>æ‰§è¡Œåæç¤º <code>Successfully purged cache</code> å³æ¸…ç†å®Œæˆã€‚</p>
<h4 data-id="heading-38">æ³¨æ„äº‹é¡¹</h4>
<p>è‹¥ <code>pip cache</code> å‘½ä»¤ä¸å¯ç”¨ï¼ˆå¦‚æ—§ç‰ˆ pipï¼‰ï¼Œéœ€å…ˆå‡çº§ pipï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python -m pip install --upgrade pip
</code></pre>
<p><strong>æ‰‹åŠ¨æ¸…ç†</strong>ï¼ˆå‘½ä»¤å¤±æ•ˆæ—¶ï¼‰ï¼š<br/>
å…³é—­æ‰€æœ‰ç»ˆç«¯åŠ Python è¿›ç¨‹åï¼Œæ‰‹åŠ¨åˆ é™¤ç¼“å­˜ç›®å½• <code>C:\Users\&lt;ç”¨æˆ·å&gt;\AppData\Local\pip\Cache</code>ï¼ˆéœ€ç®¡ç†å‘˜æƒé™ï¼‰ã€‚</p>
<p>æ¸…ç†åï¼Œå†æ¬¡ä½¿ç”¨ <code>pip install</code> ä¸‹è½½ç›¸åŒåŒ…æ—¶ä¼šé‡æ–°ä»æºç«™è·å–ï¼Œä¸å½±å“åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-39">Pycharmä½¿ç”¨condaè™šæ‹Ÿç¯å¢ƒ</h2>
<p>æ‰“å¼€ä¸€ä¸ªé¡¹ç›®ï¼Œç‚¹å‡»è®¾ç½®ï¼Œæ ¹æ®ä¸‹é¢æ­¥éª¤æ·»åŠ æœ¬åœ°è§£é‡Šå™¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c93e47cf3b144d78313cd5ee23f4c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=DuJqaFVsHhCqVU6p%2Be5tLdx5AbM%3D" alt="pyc_inpl" loading="lazy"/></p>
<p>å¦‚æœé¢„å…ˆåˆ›å»ºå¥½äº†è™šæ‹Ÿç¯å¢ƒï¼Œç‚¹å‡»â€œé€‰æ‹©ç°æœ‰â€ï¼›å¦‚æœéœ€è¦åˆ›å»ºæ–°çš„ç¯å¢ƒï¼Œç‚¹å‡»â€œç”Ÿæˆæ–°çš„â€ï¼Œâ€œç±»å‹â€é€‰æ‹©â€œcondaâ€ï¼ŒPython ç‰ˆæœ¬æ ¹æ®éœ€æ±‚è‡ªè¡Œå¡«å†™ã€‚å¦‚æœæ— æ³•è¯†åˆ« conda çš„è·¯å¾„ï¼Œç‚¹å‡»æµè§ˆï¼Œæ‰¾åˆ° <code>&lt;condaçš„å®‰è£…ç›®å½•&gt;/condabin/conda.bat</code> å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1eb4ea42e8bc4ac689a0650bed4b1884~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=XBNkiBhY3kdvsIjtC6AVjpATkV8%3D" alt="pyc_inpl-2" loading="lazy"/></p>
<p>æ·»åŠ  Python è§£é‡Šå™¨åï¼Œåœ¨è®¾ç½®ä¸­é€‰æ‹©æ·»åŠ çš„è§£é‡Šå™¨ï¼Œæˆ–è€…åœ¨å³ä¸‹è§’ä¿®æ”¹è§£é‡Šå™¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c89b93f871d649f09c3c3d13ddc12413~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=EMaWGSPJBRxGvGaUfYswRswzK9o%3D" alt="pyc_inpl-3" loading="lazy"/></p>
<h2 data-id="heading-40">VSCodeä½¿ç”¨condaè™šæ‹Ÿç¯å¢ƒ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb83abb7f8d44dd5aa08bc9b99fb714f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JCR5r6I:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446393&amp;x-signature=pYasSGrT8PDscefYdAcyZxJ9uRI%3D" alt="vscode_impl" loading="lazy"/></p>
<p>ç‚¹å‡»å³ä¸‹è§’â€œé€‰æ‹©è§£é‡Šå™¨â€ï¼Œç„¶åæ ¹æ®éœ€æ±‚åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæˆ–è€…é€‰æ‹©è§£é‡Šå™¨ã€‚å¦‚æœæ²¡æœ‰æ£€æµ‹å‡ºéœ€è¦çš„è§£é‡Šå™¨ï¼Œé€‰æ‹©â€œè¾“å…¥è§£é‡Šå™¨è·¯å¾„â€åè¾“å…¥å¯¹åº”è™šæ‹Ÿç¯å¢ƒç›®å½•ä¸‹çš„ <code>python.exe</code> å³å¯ã€‚</p>
<p>ä¹Ÿå¯ä»¥æŒ‰ <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>p</kbd>ï¼Œè¾“å…¥ Pythonï¼Œåˆ›å»ºç¯å¢ƒæˆ–è€…é€‰æ‹©è§£é‡Šå™¨ã€‚</p>
<h2 data-id="heading-41">å‚è€ƒèµ„æ–™</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F404402864%2Fanswer%2F1692589822" target="_blank" title="https://www.zhihu.com/question/404402864/answer/1692589822" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæœ‰äº›äººå®æ„¿èŠ±è´¹å¾ˆå¤šæ—¶é—´å»è‡ªå·±æ‰‹å·¥é…ç½®Pythonç¯å¢ƒ, ä¹Ÿä¸ç”¨Anaconda? - çŸ¥ä¹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fliaoxuefeng.com%2Fbooks%2Fpython%2Fbuilt-in-modules%2Fvenv%2Findex.html" target="_blank" title="https://liaoxuefeng.com/books/python/built-in-modules/venv/index.html" ref="nofollow noopener noreferrer">venv - Pythonæ•™ç¨‹ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fjingzh%2Fp%2F17397843.html" target="_blank" title="https://www.cnblogs.com/jingzh/p/17397843.html" ref="nofollow noopener noreferrer">Anacondaä¸‹è½½ä¸å®‰è£…è¯¦è§£ - ä¸Šå–„è‹¥æ³ª - åšå®¢å›­</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Flogic1001%2Farticle%2Fdetails%2F144931692" target="_blank" title="https://blog.csdn.net/logic1001/article/details/144931692" ref="nofollow noopener noreferrer">ã€2025å¹´æœ€æ–°ã€‘Anaconda3çš„å®‰è£…é…ç½®åŠä½¿ç”¨æ•™ç¨‹(è¶…è¯¦ç»†)ï¼Œä»é›¶åŸºç¡€å…¥é—¨åˆ°ç²¾é€šï¼Œçœ‹å®Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼ˆé™„å®‰è£…åŒ…ï¼‰-CSDNåšå®¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_36455412%2Farticle%2Fdetails%2F125347552" target="_blank" title="https://blog.csdn.net/qq_36455412/article/details/125347552" ref="nofollow noopener noreferrer">æ”¹å˜condaè™šæ‹Ÿç¯å¢ƒçš„é»˜è®¤è·¯å¾„_ä¿®æ”¹condaå®‰è£…è™šæ‹Ÿç¯å¢ƒè·¯å¾„-CSDNåšå®¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FXC___XC%2Farticle%2Fdetails%2F134013893" target="_blank" title="https://blog.csdn.net/XC___XC/article/details/134013893" ref="nofollow noopener noreferrer">ã€Condaã€‘è‡ªå®šä¹‰condaç¯å¢ƒå®‰è£…ä½ç½®ï¼Œä¸‰ç§è§£å†³æ–¹æ³•_ä¿®æ”¹condaç¯å¢ƒå®‰è£…è·¯å¾„-CSDNåšå®¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Ftian777%2Fp%2F17481056.html" target="_blank" title="https://www.cnblogs.com/tian777/p/17481056.html" ref="nofollow noopener noreferrer">ä¿®æ”¹condaè™šæ‹Ÿç¯å¢ƒè·¯å¾„ - è´å£³é‡Œçš„æ˜Ÿæµ· - åšå®¢å›­</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.runoob.com%2Fw3cnote%2Fpip-cn-mirror.html" target="_blank" title="https://www.runoob.com/w3cnote/pip-cn-mirror.html" ref="nofollow noopener noreferrer">pip ä½¿ç”¨å›½å†…é•œåƒæº | èœé¸Ÿæ•™ç¨‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F48706548%2Fhow-to-free-disk-space-taken-up-by-anaconda" target="_blank" title="https://stackoverflow.com/questions/48706548/how-to-free-disk-space-taken-up-by-anaconda" ref="nofollow noopener noreferrer">python - How to free disk space taken up by (ana)conda? - Stack Overflow</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.conda.io%2Fprojects%2Fconda%2Fen%2Flatest%2Fcommands%2Fclean.html" target="_blank" title="https://docs.conda.io/projects/conda/en/latest/commands/clean.html" ref="nofollow noopener noreferrer">conda clean â€” conda 25.3.2.dev55 documentation</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[scala å‡½æ•°ç±»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7560163082816831523</link>    <guid>https://juejin.cn/post/7560163082816831523</guid>    <pubDate>2025-10-13T03:31:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7560163082816831523" data-draft-id="7560035821371605007" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="scala å‡½æ•°ç±»ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-10-13T03:31:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°±ç†¬å’‹åœ°å§"/> <meta itemprop="url" content="https://juejin.cn/user/3572774960905146"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            scala å‡½æ•°ç±»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572774960905146/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°±ç†¬å’‹åœ°å§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-10-13T03:31:12.000Z" title="Mon Oct 13 2025 03:31:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-10-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    38
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ï¼š å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">//è¿”å›å€¼:</span>
<span class="hljs-comment">//1.æŒ‡å®šè¿”å›å€¼ç±»å‹</span>
<span class="hljs-comment">//2.å‡½æ•°å†… æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆæœ€åä¸€å¥ä»£ç ï¼‰å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼</span>
<span class="hljs-comment">//3.Unit è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼ˆvoidï¼‰</span>

<span class="hljs-comment">//å‚æ•°:</span>
<span class="hljs-comment">//1.å¦‚æœæ²¡æœ‰å‚æ•° åœ¨å®šä¹‰å‡½æ•°æ—¶ å¯ä»¥çœç•¥ï¼ˆï¼‰ åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ å°±ä¸èƒ½æ·»åŠ ï¼ˆï¼‰</span>

</code></pre>
<h2 data-id="heading-1">äºŒ: å®šä¹‰å‡½æ•°</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä½œç”¨ï¼šæ‰¾åˆ°x yä¸­çš„è¾ƒå¤§è€…</span>
def <span class="hljs-built_in">max</span>(x: Int,y: Int):Int = {
  <span class="hljs-built_in">if</span>(x &gt; y )
    x
  else
    y
}


 <span class="hljs-comment">//å¦‚æœæ²¡æœ‰å‚æ•° å¯ä»¥çœç•¥ï¼ˆï¼‰</span>
  def <span class="hljs-built_in">say</span>():Unit = {
    <span class="hljs-built_in">println</span>("hello world!")
  }


  def <span class="hljs-selector-tag">main</span>(args: Array[String]): Unit = {

    <span class="hljs-built_in">say</span>()

    <span class="hljs-selector-tag">var</span> rst = max (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span>
    <span class="hljs-built_in">println</span>(s"<span class="hljs-number">2</span>å’Œ<span class="hljs-number">3</span>çš„è¾ƒå¤§è€…æ˜¯:${rst}")
  }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰å‡½æ•°</span>
<span class="hljs-comment">// ä½œç”¨ï¼šæ‰¾åˆ°x y zä¸­çš„æœ€å¤§è€…</span>
def max(x: <span class="hljs-built_in">Int</span>,y: <span class="hljs-built_in">Int</span>,z: <span class="hljs-built_in">Int</span>):<span class="hljs-built_in">Int</span> = {
  <span class="hljs-comment">//è‡ªè¡Œä¿®æ”¹ä»£ç  å®ŒæˆåŠŸèƒ½</span>
  <span class="hljs-keyword">if</span>(x &gt; y )
    x
  <span class="hljs-keyword">else</span>
    y
}


def main(args: Array[String]): <span class="hljs-built_in">Unit</span> = {

  <span class="hljs-keyword">var</span> rst = max (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">100</span>)<span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span>
  println(s<span class="hljs-string">"è¾ƒå¤§è€…æ˜¯:<span class="hljs-subst">${rst}</span>"</span>)
}
</code></pre>
<h2 data-id="heading-2">ä¸‰: å‡½æ•°è¿”å›å¤šä¸ªæ•°æ®</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//ä½œç”¨ï¼šæ‰¾åˆ°x y zä¸­çš„æœ€å¤§è€… å’Œ æœ€å°å€¼</span>
<span class="hljs-comment">//(Int,Int)æ˜¯è¿”å›å€¼çš„ç±»å‹ è¡¨ç¤ºè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸­æœ‰ä¸¤ä¸ªæ•´æ•°</span>

def max(x:<span class="hljs-built_in">Int</span>,y:<span class="hljs-built_in">Int</span>,z:<span class="hljs-built_in">Int</span>) = {
  <span class="hljs-keyword">var</span> maxValue = <span class="hljs-keyword">if</span>(x &gt; y) x <span class="hljs-keyword">else</span> y  <span class="hljs-comment">//x yçš„è¾ƒå¤§å€¼</span>
  maxValue = <span class="hljs-keyword">if</span> (maxValue &gt;z) maxValue <span class="hljs-keyword">else</span> z

  <span class="hljs-keyword">var</span> minValue = <span class="hljs-keyword">if</span>(x &lt; y) x <span class="hljs-keyword">else</span> y
  minValue = <span class="hljs-keyword">if</span> (minValue &lt; z) minValue <span class="hljs-keyword">else</span> z

  <span class="hljs-comment">//è¿”å›ä¸€ä¸ªå®¹å™¨ åŒ…å«ä¸¤ä¸ªå€¼</span>
  (minValue,maxValue)
}

def main(args: Array[String]): <span class="hljs-built_in">Unit</span> = {
  <span class="hljs-keyword">var</span> rst = max(<span class="hljs-number">100</span>,<span class="hljs-number">20</span>,<span class="hljs-number">200</span>) <span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span>
  println(s<span class="hljs-string">"æœ€å°å€¼æ˜¯:<span class="hljs-subst">${rst._1}</span>,è¾ƒå¤§è€…æ˜¯:<span class="hljs-subst">${rst._2}</span>"</span>)
}
</code></pre>
<h2 data-id="heading-3">å››ï¼š å…ƒç»„</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">def <span class="hljs-title">main</span><span class="hljs-params">(args: Array[<span class="hljs-type">String</span>])</span>: Unit =</span> {
  <span class="hljs-comment">// å…ƒç»„ï¼šæŠŠæ•°æ®æ”¾åœ¨ä¸€ä¸ªå®¹å™¨</span>
  var rst = (<span class="hljs-number">1</span>,<span class="hljs-string">"a"</span>,<span class="hljs-number">1.75</span>,<span class="hljs-string">"hello"</span>,<span class="hljs-literal">true</span>,<span class="hljs-number">2</span>)
  <span class="hljs-comment">// è®¿é—®å…ƒç»„çš„æ•°æ®  ._æ•°å­¦ç¼–å·</span>
  <span class="hljs-built_in">println</span>(rst._6)
}
</code></pre>
<h2 data-id="heading-4">äº”ï¼šå‚æ•°é»˜è®¤å€¼</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//å‚æ•°é»˜è®¤å€¼ï¼šå¦‚æœåœ¨è°ƒç”¨çš„æ—¶å€™ æ²¡æœ‰ä¼ å…¥ å°±ä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼</span>
def <span class="hljs-built_in">greet</span>(name:String="å°å¼ ",age:Int=<span class="hljs-number">17</span>,gender:String="å¥³"):Unit = {
  <span class="hljs-built_in">println</span>(s"ä½ å¥½,æˆ‘æ˜¯${name},ä»Šå¹´${age}å²,æ€§åˆ«æ˜¯:${gender}")
}

def <span class="hljs-selector-tag">main</span>(args: Array[String]): Unit = {
  greet ("å°ç‹",<span class="hljs-number">18</span>,"å¥³")
  <span class="hljs-built_in">greet</span>("å°ç‹",<span class="hljs-number">18</span>)
  <span class="hljs-built_in">greet</span>("å°ç‹")
  <span class="hljs-built_in">greet</span>()
  
  <span class="hljs-comment">//è®¾ç½®å¹´é¾„ä¸º20ï¼Œå…¶ä»–ä¸¤ä¸ªå‚æ•°ä½¿ç”¨é»˜è®¤å€¼</span>
  <span class="hljs-built_in">greet</span>(age=<span class="hljs-number">20</span>)
  <span class="hljs-built_in">greet</span>(gender="ç”·",age=<span class="hljs-number">20</span>)
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“ˆå¸ŒæŒ‡é’ˆï¼Œä»€ä¹ˆæ˜¯åŒºå—é“¾ï¼Œgenesis blcok,most recent block,tamper-evident log,merkle tree,binar]]></title>    <link>https://juejin.cn/post/7579659550862508074</link>    <guid>https://juejin.cn/post/7579659550862508074</guid>    <pubDate>2025-12-04T10:28:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579659550862508074" data-draft-id="7579716343454253099" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“ˆå¸ŒæŒ‡é’ˆï¼Œä»€ä¹ˆæ˜¯åŒºå—é“¾ï¼Œgenesis blcok,most recent block,tamper-evident log,merkle tree,binar"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-04T10:28:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¶‚æ¶‚"/> <meta itemprop="url" content="https://juejin.cn/user/3740972207312249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“ˆå¸ŒæŒ‡é’ˆï¼Œä»€ä¹ˆæ˜¯åŒºå—é“¾ï¼Œgenesis blcok,most recent block,tamper-evident log,merkle tree,binar
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3740972207312249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¶‚æ¶‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:28:44.000Z" title="Thu Dec 04 2025 10:28:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŒºå—é“¾ä¸­æœ€æ ¸å¿ƒçš„åº•å±‚æ¦‚å¿µ <strong>ç³»ç»Ÿæ€§æ€»ç»“æˆä¸€ä»½æ¸…æ™°æ˜“æ‡‚çš„çŸ¥è¯†ä½“ç³»</strong>ï¼Œæ‰€æœ‰å†…å®¹éƒ½æä¾›<strong>ç®€æ˜è§£é‡Š + ç”¨æ³• + ä¸¾ä¾‹</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… 1. å“ˆå¸ŒæŒ‡é’ˆï¼ˆHash Pointerï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
ä¸€ç§ç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå®ƒä¸ä»…åŒ…å« <strong>æŒ‡å‘æŸä¸ªæ•°æ®çš„åœ°å€</strong>ï¼Œè¿˜åŒ…å«è¯¥æ•°æ®çš„ <strong>å“ˆå¸Œå€¼ï¼ˆHashï¼‰</strong>ã€‚</p>
<p><strong>ç”¨é€”ï¼š</strong>
å¯ç”¨äºåˆ›å»º<strong>ä¸å¯ç¯¡æ”¹çš„æ•°æ®ç»“æ„</strong>ï¼Œä¾‹å¦‚é“¾è¡¨ã€åŒºå—é“¾ã€‚</p>
<p><strong>ä¸¾ä¾‹ï¼š</strong>
ä¸€ä¸ªåŒºå—è®°å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Hash Pointer â†’ æŒ‡å‘ä¸Šä¸€ä¸ªåŒºå—ï¼ŒåŒæ—¶åŒ…å«ä¸Šä¸€ä¸ªåŒºå—å†…å®¹çš„ <span class="hljs-built_in">hash</span>
</code></pre>
<p>å¦‚æœæœ‰äººç¯¡æ”¹äº†ä¸Šä¸€ä¸ªåŒºå—å†…å®¹ï¼Œå“ˆå¸Œå€¼å°±ä¼šå˜ï¼Œé“¾æ¡å°±æ–­è£‚ â†’ <strong>ç¯¡æ”¹å¯è¢«æ£€æµ‹</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">âœ… 2. ä»€ä¹ˆæ˜¯åŒºå—é“¾ï¼ˆBlockchainï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
åŒºå—é“¾æ˜¯ä¸€ç§ç»“æ„ï¼š</p>
<ul>
<li>æ•°æ®è¢«åˆ†æˆå¤šä¸ª <strong>åŒºå—ï¼ˆBlockï¼‰</strong></li>
<li>æ¯ä¸ªåŒºå—åŒ…å«è‡ªå·±çš„æ•°æ®å’Œä¸€ä¸ª <strong>å“ˆå¸ŒæŒ‡é’ˆ</strong>ï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªåŒºå—</li>
<li>æ‰€æœ‰åŒºå—ä¸²è”æˆä¸€ä¸ªé“¾</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸å¯ç¯¡æ”¹</strong>ï¼ˆä¿®æ”¹ä¸€ä¸ªåŒºå—ä¼šå¯¼è‡´é“¾æ–­è£‚ï¼‰</li>
<li><strong>åˆ†å¸ƒå¼</strong>ï¼ˆå¤šä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜è´¦æœ¬ï¼‰</li>
<li><strong>å»ä¸­å¿ƒåŒ–</strong></li>
<li><strong>å¯è¿½æº¯</strong></li>
</ul>
<hr/>
<h2 data-id="heading-2">âœ… 3. åˆ›ä¸–åŒºå—ï¼ˆGenesis Blockï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
åŒºå—é“¾ä¸­çš„<strong>ç¬¬ä¸€ä¸ªåŒºå—</strong>ã€‚
å®ƒæ²¡æœ‰ä¸Šä¸€ä¸ªåŒºå—ï¼Œæ‰€ä»¥å“ˆå¸ŒæŒ‡é’ˆé€šå¸¸å¡«ç©ºå€¼æˆ– 0ã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ•´æ¡é“¾çš„èµ·ç‚¹</li>
<li>ç¡¬ç¼–ç åœ¨åŒºå—é“¾ç³»ç»Ÿä¸­</li>
</ul>
<hr/>
<h2 data-id="heading-3">âœ… 4. æœ€æ–°åŒºå—ï¼ˆMost Recent Blockï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
é“¾ä¸Šæœ€æœ«å°¾çš„åŒºå—ï¼Œä¹Ÿå« HEAD blockã€‚
æ–°åŒºå—ä¼šæ¥åœ¨å®ƒåé¢æ·»åŠ ã€‚</p>
<hr/>
<h2 data-id="heading-4">âœ… 5. å¯æ£€æµ‹ç¯¡æ”¹æ—¥å¿—ï¼ˆTamper-evident Logï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
ä¸€ç§æ—¥å¿—ç»“æ„ï¼Œåªè¦æœ‰äººä¿®æ”¹å†å²è®°å½•ï¼Œå°±èƒ½è¢«æ£€æµ‹å‡ºæ¥ã€‚</p>
<p>åŒºå—é“¾æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå·¨å‹çš„ <strong>tamper-evident log</strong>ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å®¡è®¡æ—¥å¿—</li>
<li>é‡‘èç³»ç»Ÿäº¤æ˜“å†å²</li>
<li>åŒºå—é“¾è´¦æœ¬</li>
</ul>
<hr/>
<h2 data-id="heading-5">âœ… 6. Merkle Treeï¼ˆé»˜å…‹å°”æ ‘ï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
ä¸€ç§<strong>æ ‘å½¢å“ˆå¸Œç»“æ„</strong>ï¼š</p>
<ul>
<li>å¶å­èŠ‚ç‚¹å­˜æ•°æ®çš„ Hash</li>
<li>ä¸Šå±‚èŠ‚ç‚¹æ˜¯å·¦å³å­èŠ‚ç‚¹å“ˆå¸Œæ‹¼æ¥åå† hash</li>
<li>æ ‘é¡¶äº§ç”Ÿ <strong>æ ¹å“ˆå¸Œï¼ˆRoot Hashï¼‰</strong></li>
</ul>
<p><strong>ç”¨é€”ï¼š</strong></p>
<ul>
<li>å¿«é€Ÿè¯æ˜æŸæ¡æ•°æ®æ˜¯å¦å­˜åœ¨</li>
<li>å¤§æ•°æ®é›†çš„å®Œæ•´æ€§éªŒè¯</li>
<li>åŒºå—é“¾äº¤æ˜“æ•°æ®ç»“æ„</li>
</ul>
<p><strong>ä¸¾ä¾‹ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">   Root Hash
     /  \
    <span class="hljs-selector-tag">H1</span>  <span class="hljs-selector-tag">H2</span>
   / \  / \
 D1 D2 D3 D4
</code></pre>
<hr/>
<h2 data-id="heading-6">âœ… 7. äºŒå‰æ ‘ï¼ˆBinary Treeï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ ‘ç»“æ„ã€‚</p>
<p><strong>Merkle Tree æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘</strong>ï¼ˆåªä¸è¿‡å­èŠ‚ç‚¹æ˜¯å“ˆå¸Œï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ”¥ Merkle Tree vs Binary Tree åŒºåˆ«</h2>






























<table><thead><tr><th>ç»´åº¦</th><th><strong>Merkle Tree</strong></th><th><strong>Binary Tree</strong></th></tr></thead><tbody><tr><td>ä¸»è¦ç”¨é€”</td><td>æ•°æ®å®Œæ•´æ€§éªŒè¯</td><td>æ³›ç”¨æ•°æ®ç»“æ„</td></tr><tr><td>èŠ‚ç‚¹å†…å®¹</td><td>å­˜å“ˆå¸Œï¼ˆHashï¼‰</td><td>å­˜ä»»æ„æ•°æ®</td></tr><tr><td>ä¼˜åŠ¿</td><td>ä¿®æ”¹æ˜“æ£€æµ‹ã€å¿«é€Ÿè¯æ˜</td><td>ç»“æ„ç®€å•ï¼Œæ“ä½œæ–¹ä¾¿</td></tr><tr><td>åŒºå—é“¾ä½¿ç”¨</td><td>æ˜¯æ ¸å¿ƒç»„æˆ</td><td>ä¸ä¸€å®š</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">âœ… 8. Data Blockï¼ˆæ•°æ®åŒºå—ï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
å¶å­èŠ‚ç‚¹å­˜æ”¾çš„å®é™…æ•°æ®ï¼ˆæˆ–æ•°æ®çš„å“ˆå¸Œï¼‰ã€‚</p>
<p>åœ¨åŒºå—é“¾ä¸­ï¼ŒData block å³ï¼šâ€œæŸä¸ªäº¤æ˜“æ•°æ®â€ã€‚</p>
<hr/>
<h2 data-id="heading-9">âœ… 9. æ ¹å“ˆå¸Œï¼ˆRoot Hashï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
Merkle æ ‘æœ€ä¸Šå±‚ç”Ÿæˆçš„å”¯ä¸€å“ˆå¸Œå€¼ã€‚</p>
<p><strong>ç”¨é€”ï¼š</strong></p>
<ul>
<li>ä»£è¡¨æ•´ä¸ªæ•°æ®é›†</li>
<li>ä»»ä½•æ•°æ®æ”¹åŠ¨ï¼Œroot hash å°±ä¼šæ”¹å˜</li>
<li>åŒºå—é“¾çš„ block header ä¸­åŒ…å« root hash</li>
</ul>
<hr/>
<h2 data-id="heading-10">âœ… 10. åŒºå—å¤´ï¼ˆBlock Headerï¼‰</h2>
<p>åŒ…å«åŒºå—çš„å…ƒæ•°æ®ï¼Œå¦‚ï¼š</p>
<ul>
<li>ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼ˆhash pointerï¼‰</li>
<li>Merkle Rootï¼ˆæœ¬åŒºå—æ‰€æœ‰äº¤æ˜“çš„æ‘˜è¦ï¼‰</li>
<li>æ—¶é—´æˆ³</li>
<li>éš¾åº¦å€¼/éšæœºæ•°ï¼ˆå¦‚ PoWï¼‰</li>
</ul>
<p>åŒºå—å¤´éå¸¸å°ï¼Œç”¨äº <strong>å…±è¯†éªŒè¯</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-11">âœ… 11. åŒºå—ä½“ï¼ˆBlock Bodyï¼‰</h2>
<p>åŒ…å«å®é™…æ•°æ®ï¼Œå¦‚ï¼š</p>
<ul>
<li>å¤šç¬”äº¤æ˜“åˆ—è¡¨</li>
<li>é™„å±æ•°æ®</li>
</ul>
<p>ä½“ç§¯å¤§ï¼Œä¸å‚ä¸å…±è¯†ç®—æ³•çš„å“ˆå¸Œè®¡ç®—ã€‚</p>
<hr/>
<h2 data-id="heading-12">ğŸ”¥ 12. Merkle Proofï¼ˆé»˜å…‹å°”è¯æ˜ï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
è¯æ˜ä¸€ç§æ•°æ®æ˜¯å¦åœ¨ Merkle Tree ä¸­ï¼Œåªéœ€æä¾›ï¼š</p>
<ul>
<li>è¦éªŒè¯çš„æ•°æ®çš„ hash</li>
<li>è‹¥å¹²ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼ˆsiblingsï¼‰çš„å“ˆå¸Œæ„å»ºè·¯å¾„</li>
</ul>
<p>ä»è€Œé‡å»º root hash çœ‹æ˜¯å¦å»åˆã€‚</p>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>è¯æ˜å¾ˆçŸ­ï¼ˆO(logN)ï¼‰</li>
<li>åŒºå—é“¾è½»èŠ‚ç‚¹ï¼ˆLight Clientï¼‰å¸¸ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-13">13. Proof of Membershipï¼ˆæˆå‘˜è¯æ˜ï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
è¯æ˜â€œæŸæ¡æ•°æ®åœ¨é›†åˆä¸­â€ã€‚</p>
<p>Merkle Proof æ˜¯ä¸€ç§å…¸å‹çš„ membership proofã€‚</p>
<p><strong>ä¾‹å­ï¼š</strong>
è¯æ˜äº¤æ˜“ <code>tx3</code> å­˜åœ¨äºåŒºå—ä¸­ï¼Œåªéœ€æä¾› tx3 çš„ merkle è·¯å¾„ï¼ˆæ¯”å¦‚ H4ã€H12 ç­‰ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-14">14. Proof of Inclusionï¼ˆåŒ…å«è¯æ˜ï¼‰</h2>
<p>è¿™æ˜¯ membership proof çš„å¦ä¸€ç§å«æ³•ã€‚
<strong>Meaningï¼šæ•°æ®è¢«åŒ…å«åœ¨é›†åˆä¸­ã€‚</strong></p>
<p>åœ¨åŒºå—é“¾æ–‡çŒ®ä¸­ <strong>Inclusion = Membership</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-15">15. Proof of Non-Membershipï¼ˆéåŒ…å«è¯æ˜ï¼‰</h2>
<p><strong>æ¦‚å¿µï¼š</strong>
è¯æ˜â€œæŸæ¡æ•°æ®ä¸åœ¨é›†åˆä¸­â€ã€‚</p>
<p>Merkle Tree åŸç”Ÿä¸æ”¯æŒï¼Œéœ€è¦ç”¨ <strong>Merkle Patricia Trieï¼ˆMPTï¼‰</strong> æˆ– <strong>Sorted Merkle Tree</strong> æ‰èƒ½è¯æ˜ä¸åŒ…å«ã€‚</p>
<p>ä¾‹å¦‚ï¼š
æŸ¥è¯¢ä¸€ä¸ªåœ°å€ä»æœªå‘ç”Ÿè¿‡äº¤æ˜“ â†’ éœ€è¦ non-membership proofã€‚</p>
<hr/>
<h2 data-id="heading-16">ğŸ“¦ æ€»ç»“ï¼ˆç»“æ„åŒ–çŸ¥è¯†æ¡†æ¶ï¼‰</h2>
<p><strong>ä¸€é¡µè„‘å›¾å¼æ€»ç»“ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">Blockchain = Blocks + Hash Pointers + Tamper-evident <span class="hljs-built_in">log</span>
     |
     |<span class="hljs-comment">-- Genesis Block (first block)</span>
     |<span class="hljs-comment">-- Most Recent Block (head)</span>
     |
     |<span class="hljs-comment">-- Block Structure</span>
     |       |<span class="hljs-comment">-- Block Header (prev hash, merkle root, timestamp)</span>
     |       |<span class="hljs-comment">-- Block Body (transactions)</span>
     |
     |<span class="hljs-comment">-- Merkle Tree</span>
             |<span class="hljs-comment">-- Binary tree storing hashes</span>
             |<span class="hljs-comment">-- Leaf: data block</span>
             |<span class="hljs-comment">-- Output: root hash</span>
             |<span class="hljs-comment">-- Proof:</span>
                    |<span class="hljs-comment">-- Merkle Proof</span>
                           |<span class="hljs-comment">-- Proof of Membership (Inclusion)</span>
                           |<span class="hljs-comment">-- Proof of Non-membership</span>
</code></pre>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1af8719848f41e39add6d7fe4ebc881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5raC5raC:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448924&amp;x-signature=9PRktE7k%2B5qDvMJljjw4O3jpOj8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-17">æ ‘ç»“æ„ã€åŒºå—ç»“æ„</h2>
<p>ä¸‹é¢ç»™ä½  <strong>æœ€æ¸…æ™°ã€æœ€æ ‡å‡†çš„åŒºå—é“¾ç»“æ„ + Merkle æ ‘ç»“æ„ ASCII å¯è§†åŒ–ç¤ºæ„å›¾</strong>ï¼Œé€‚åˆå­¦ä¹ ä¸æ–‡æ¡£å¼•ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-18">ğŸ“¦ <strong>ä¸€ã€åŒºå—é“¾ç»“æ„ï¼ˆBlockchain Structureï¼‰ç¤ºæ„å›¾</strong></h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>              <span class="hljs-string">Genesis</span> <span class="hljs-string">Block</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-string">(ç¬¬ä¸€ä¸ªåŒºå—ï¼Œæ²¡æœ‰å‰å“ˆå¸Œ</span> <span class="hljs-string">Prev</span> <span class="hljs-string">Hash)</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Header:</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Prev Hash:</span> <span class="hljs-number">0000000000000000</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Merkle Root:</span> <span class="hljs-string">A1B2C3...</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Timestamp:</span> <span class="hljs-string">T0</span>                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Body:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      [<span class="hljs-string">tx1</span>, <span class="hljs-string">tx2</span>, <span class="hljs-string">tx3...</span>]                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                     <span class="hljs-string">â”‚</span> <span class="hljs-string">Hash</span> <span class="hljs-string">Pointer</span>
                     <span class="hljs-string">â–¼</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>                <span class="hljs-string">Block</span> <span class="hljs-comment">#2                  â”‚</span>
<span class="hljs-string">â”‚</span>                                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Header:</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Prev Hash:</span> <span class="hljs-string">HASH(Genesis</span> <span class="hljs-string">Block)</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Merkle Root:</span> <span class="hljs-string">D4E5F6...</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Timestamp:</span> <span class="hljs-string">T1</span>                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Body:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      [<span class="hljs-string">tx4</span>, <span class="hljs-string">tx5</span>, <span class="hljs-string">tx6...</span>]                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                     <span class="hljs-string">â”‚</span> <span class="hljs-string">Hash</span> <span class="hljs-string">Pointer</span>
                     <span class="hljs-string">â–¼</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>                <span class="hljs-string">Block</span> <span class="hljs-comment">#3                  â”‚</span>
<span class="hljs-string">â”‚</span>                                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Header:</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Prev Hash:</span> <span class="hljs-string">HASH(Block</span> <span class="hljs-comment">#2)           â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Merkle Root:</span> <span class="hljs-string">XYZ789...</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-attr">Timestamp:</span> <span class="hljs-string">T2</span>                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>   <span class="hljs-attr">Block Body:</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>      [<span class="hljs-string">tx7</span>, <span class="hljs-string">tx8...</span>]                       <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                     <span class="hljs-string">â”‚</span> <span class="hljs-string">Hash</span> <span class="hljs-string">Pointer</span>
                     <span class="hljs-string">â–¼</span>
              <span class="hljs-string">ï¼ˆMost</span> <span class="hljs-string">Recent</span> <span class="hljs-string">Blockï¼‰</span>
</code></pre>
<p>ğŸ‘‰ å…³é”®çœ‹ç‚¹</p>
<ul>
<li>æ¯ä¸ªåŒºå—é€šè¿‡ <strong>Prev Hash</strong> æŒ‡å‘ä¸Šä¸€ä¸ªåŒºå—</li>
<li>åŒºå—å¤´ï¼ˆHeaderï¼‰éå¸¸å°</li>
<li>åŒºå—ä½“ï¼ˆBodyï¼‰å­˜äº¤æ˜“</li>
<li>ä¿®æ”¹ä»»æ„å†å²åŒºå—ä¼šä½¿é“¾æ–­è£‚ â†’ <strong>tamper-evident</strong></li>
</ul>
<hr/>
<h2 data-id="heading-19">ğŸŒ² <strong>äºŒã€Merkle Treeï¼ˆé»˜å…‹å°”æ ‘ï¼‰å¯è§†åŒ–ç»“æ„</strong></h2>
<pre><code class="hljs language-scss" lang="scss">                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚      Root Hash      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚     H12      â”‚                            â”‚     H34      â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚   Hash1      â”‚                            â”‚   Hash3      â”‚
        â”‚ (tx1+tx2)    â”‚                            â”‚ (tx3+tx4)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                          â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        <span class="hljs-selector-tag">H1</span>           â”‚                    â”‚        <span class="hljs-selector-tag">H3</span>           â”‚
     â”‚    <span class="hljs-built_in">Hash</span>(tx1)        â”‚                    â”‚    <span class="hljs-built_in">Hash</span>(tx3)        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   <span class="hljs-selector-tag">H2</span>     â”‚                                â”‚   <span class="hljs-selector-tag">H4</span>     â”‚
     â”‚<span class="hljs-built_in">Hash</span>(tx2) â”‚                                â”‚<span class="hljs-built_in">Hash</span>(tx4) â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ğŸ‘‰ ç»“æ„è¯´æ˜</p>
<ul>
<li>æœ€åº•å±‚å¶å­æ˜¯ <strong>äº¤æ˜“å“ˆå¸Œ</strong>ï¼ˆH1, H2, H3, H4ï¼‰</li>
<li>ä¸Šä¸€å±‚å°†ç›¸é‚»ä¸¤ä¸ªå¶å­æ‹¼æ¥å hashï¼ˆHash1ã€Hash3ï¼‰</li>
<li>æœ€ä¸Šå±‚å† hash å¾—åˆ° <strong>Merkle Root</strong></li>
<li>ä»»ä½•åº•å±‚æ•°æ®å˜åŒ–éƒ½ä¼šå¼•èµ· Root Hash å˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-20">ğŸ”¥ <strong>ä¸‰ã€Merkle Proofï¼ˆè¯æ˜è·¯å¾„ï¼‰ç¤ºæ„å›¾</strong></h2>
<p>ä»¥è¯æ˜ <strong>tx3ï¼ˆH3ï¼‰å­˜åœ¨äºæ ‘ä¸­</strong> ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-less" lang="less">è¦éªŒè¯çš„ç›®æ ‡: <span class="hljs-selector-tag">H3</span> (tx3)

æä¾›çš„ <span class="hljs-selector-tag">Merkle</span> <span class="hljs-selector-tag">Proof</span>:
   <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">H4</span> ï¼ˆå…„å¼ŸèŠ‚ç‚¹ï¼‰
   <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">H12</span>ï¼ˆå¦ä¸€ä¸ªåˆ†æ”¯çš„ <span class="hljs-selector-tag">hash</span>ï¼‰

éªŒè¯è¿‡ç¨‹ç»“æ„ï¼ˆæ„å»ºè·¯å¾„ï¼‰:

                       <span class="hljs-selector-tag">Root</span> <span class="hljs-selector-tag">Hash</span> ?
                            â–²
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚        <span class="hljs-selector-tag">H12</span>         â”‚   â† æä¾›
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      <span class="hljs-selector-tag">Hash3</span>         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   <span class="hljs-selector-tag">H3</span>   â”‚  <span class="hljs-selector-tag">H4</span>    â”‚   â† <span class="hljs-selector-tag">H3</span> å·²çŸ¥ / <span class="hljs-selector-tag">H4</span> æä¾›
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ç”¨æˆ·åªéœ€æä¾› <strong>log(N)</strong> ä¸ªå“ˆå¸Œï¼Œå°±èƒ½é‡å»º root hashã€‚</p>
<hr/>
<h2 data-id="heading-21">ğŸ“˜ <strong>å››ã€åŒºå—ç»“æ„ï¼ˆBlock Structureï¼‰å†…éƒ¨ç¤ºæ„å›¾</strong></h2>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Block â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Block <span class="hljs-selector-tag">Header</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  Version                                                  â”‚  â”‚
â”‚   â”‚  Prev Block Hash (hash pointer)                           â”‚  â”‚
â”‚   â”‚  Merkle Root (æ‰€æœ‰äº¤æ˜“çš„æ‘˜è¦)                                â”‚  â”‚
â”‚   â”‚  Timestamp                                                â”‚  â”‚
â”‚   â”‚  Nonce                                                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Block <span class="hljs-selector-tag">Body</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  Transaction <span class="hljs-number">1</span>                                             â”‚ â”‚
â”‚   â”‚  Transaction <span class="hljs-number">2</span>                                             â”‚ â”‚
â”‚   â”‚  Transaction <span class="hljs-number">3</span>                                             â”‚ â”‚
â”‚   â”‚  ...                                                       â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ğŸ‘‰ Header ç”¨æ¥åšå“ˆå¸Œè®¡ç®—ï¼ˆPoW ç­‰ï¼‰
ğŸ‘‰ Body æ˜¯å®é™…å†…å®¹ï¼Œä¸å‚ä¸ä¸»é“¾å“ˆå¸Œè®¡ç®—</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦æ‹†è§£ï¼šSAE åˆšæ€§äº¤ä»˜çš„åº•å±‚é€»è¾‘ï¼Œä»èµ„æºæ± æ•´åˆåˆ°å¼‚æ„è°ƒåº¦å®ç°]]></title>    <link>https://juejin.cn/post/7579438351297445924</link>    <guid>https://juejin.cn/post/7579438351297445924</guid>    <pubDate>2025-12-03T09:22:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579438351297445924" data-draft-id="7579213860572561462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦æ‹†è§£ï¼šSAE åˆšæ€§äº¤ä»˜çš„åº•å±‚é€»è¾‘ï¼Œä»èµ„æºæ± æ•´åˆåˆ°å¼‚æ„è°ƒåº¦å®ç°"/> <meta itemprop="keywords" content="Serverless"/> <meta itemprop="datePublished" content="2025-12-03T09:22:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦æ‹†è§£ï¼šSAE åˆšæ€§äº¤ä»˜çš„åº•å±‚é€»è¾‘ï¼Œä»èµ„æºæ± æ•´åˆåˆ°å¼‚æ„è°ƒåº¦å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:22:13.000Z" title="Wed Dec 03 2025 09:22:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šå¼ å‡¤å©·ï¼ˆå¨œç±³ï¼‰</p>
<p>èµ„æºçš„åˆšæ€§äº¤ä»˜ï¼Œä¸æ˜¯äº‘ä¸Šå¤©ç”Ÿå°±å…·å¤‡çš„èƒ½åŠ›ã€‚å½“é€‰æ‹©è‡ªå»ºæˆ–è‡ªç®¡ç†ä¸€ä¸ª Kubernetes/ECS èµ„æºæ± æ—¶ï¼Œå°±å¿…é¡»ç›´é¢ä¸€ä¸ªæ®‹é…·çš„ç°å®ï¼šæ‰€ä¾èµ–çš„åº•å±‚ IaaS èµ„æºæœ¬èº«å°±æ˜¯éåˆšæ€§çš„ã€‚</p>
<p>é˜¿é‡Œäº‘ä¸Š ECS æœ‰å¤šä»£å®ä¾‹è§„æ ¼ï¼ˆå¦‚ g6ã€c7iã€r8y ç­‰ï¼‰ï¼ŒåŸºäº Intelã€AMD åŠè‡ªç ”å€šå¤© ARM èŠ¯ç‰‡ï¼Œä½†è¿™å¹¶ä¸ä¿è¯åœ¨ä»»ä½•æ—¶åˆ»ã€ä»»ä½•åœ°åŸŸã€ä»»ä½•å¯ç”¨åŒºï¼Œæ‰€éœ€è¦çš„é‚£æ¬¾æœºå‹å°±ä¸€å®šæœ‰åº“å­˜ã€‚è¿™ç§åº•å±‚èµ„æºçš„â€œä¸ç¡®å®šæ€§â€ï¼Œä¼šåƒå¹½çµä¸€æ ·æ¸—é€åˆ°è‡ªå»ºçš„ä¸Šå±‚ç³»ç»Ÿä¸­ã€‚</p>
<p>åˆšæ€§äº¤ä»˜çš„æœ¬è´¨ï¼Œæ˜¯å°†â€œä¸ç¡®å®šæ€§â€ä»ç³»ç»Ÿä¸­æ’é™¤çš„å…³é”®æœºåˆ¶ã€‚å®ƒé€šè¿‡å¯æ§çš„èµ„æºæˆæœ¬ï¼Œæ¢å–äº†ä¸šåŠ¡çš„ç¨³å®šæ€§ã€é«˜æ€§èƒ½å’Œå¯é¢„æµ‹æ€§ã€‚ å¯¹äºä»»ä½•ä¸¥è‚ƒçš„çº¿ä¸Šä¸šåŠ¡è€Œè¨€ï¼Œè¿™ç§ç¡®å®šæ€§å¹¶éé”¦ä¸Šæ·»èŠ±ï¼Œè€Œæ˜¯ç»´ç³»å…¶å•†ä¸šä¿¡èª‰å’Œæ ¸å¿ƒä»·å€¼çš„ç”Ÿå‘½çº¿ã€‚</p>
<p>ä»¥ä¸‹å‡ ä¸ªæ¡ˆä¾‹ï¼Œé˜è¿°éåˆšæ€§äº¤ä»˜â€å¸¦æ¥çš„å…¸å‹å›°å¢ƒã€‚</p>
<p><strong>æ¡ˆä¾‹ä¸€ï¼šæ¸¸æˆè¡Œä¸š â€”â€” æ–°å“å‘å¸ƒæ—¥çš„â€œå®¹é‡ç¾éš¾â€</strong></p>
<ul>
<li>
<p>è¡Œä¸šï¼šåœ¨çº¿æ¸¸æˆã€å…ƒå®‡å®™</p>
</li>
<li>
<p>æ•…éšœï¼š</p>
<ol>
<li>åœºæ™¯ï¼šä¸€å®¶æ¸¸æˆå…¬å¸ä¸‡ä¼—æœŸå¾…çš„æ–°æ¸¸æˆæ­£å¼å…¬æµ‹ã€‚è¿è¥å›¢é˜ŸåŸºäºå‹æµ‹ï¼Œåˆ¶å®šäº†é›„å¿ƒå‹ƒå‹ƒçš„æ‰©å®¹è®¡åˆ’ï¼Œéœ€è¦åœ¨å¼€æœç¬é—´å°†æ¸¸æˆæœåŠ¡å™¨ï¼ˆé€šå¸¸éœ€è¦é«˜æ€§èƒ½è®¡ç®—æˆ– GPU ä¼˜åŒ–çš„ç‰¹å®š ECS æœºå‹ï¼‰çš„è§„æ¨¡æ‰©å¤§ 10 å€ã€‚ä»–ä»¬ç®¡ç†ç€ä¸€ä¸ªåŸºäº K8s çš„è‡ªå»ºé›†ç¾¤ã€‚</li>
<li>è§¦å‘ï¼šå¼€æœé“ƒå£°æ•²å“ï¼ŒCI/CD æµæ°´çº¿è§¦å‘äº†å¤§è§„æ¨¡çš„æ¨ªå‘æ‰©å®¹ã€‚ç„¶è€Œï¼ŒK8s çš„èŠ‚ç‚¹è‡ªåŠ¨ä¼¸ç¼©å™¨ Cluster Autoscaler åœ¨å‘é˜¿é‡Œäº‘ç”³è¯·åˆ›å»ºæ–°çš„ ECS èŠ‚ç‚¹æ—¶ï¼ŒAPI è¿”å›äº†â€œInsufficient stockâ€åº“å­˜ä¸è¶³çš„é”™è¯¯ã€‚ä»–ä»¬æ‰€ä¾èµ–çš„ç‰¹å®šé«˜æ€§èƒ½æœºå‹ï¼Œåœ¨è¯¥å¯ç”¨åŒºå·²æ— åº“å­˜ã€‚</li>
<li>ç°è±¡ï¼šåº”ç”¨çš„ Pod å› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„èŠ‚ç‚¹èµ„æºè€Œå¤§é‡å¤„äºÂ <code>PendingÂ </code>çŠ¶æ€ï¼Œæ— æ³•è¢«è°ƒåº¦ã€‚æ–°ç©å®¶çš„ç™»å½•è¯·æ±‚é›ªç‰‡èˆ¬æ¶Œå…¥ï¼Œä½†æœåŠ¡å™¨å®¹é‡è¿œæœªè¾¾åˆ°é¢„æœŸã€‚</li>
</ol>
</li>
<li>
<p>ä¸šåŠ¡å½±å“ï¼š</p>
<ul>
<li>ä¸Šçº¿å³å¤±è´¥ï¼šå¤§é‡ç©å®¶æ— æ³•ç™»å½•ï¼Œæ¸¸æˆå…¥å£å¤„å¤§æ’é•¿é¾™ï¼Œç¤¾äº¤åª’ä½“å’Œæ¸¸æˆç¤¾åŒºç¬é—´è¢«è´Ÿé¢è¯„ä»·æ·¹æ²¡ï¼Œç²¾å¿ƒç­–åˆ’çš„å‘å¸ƒä¼šå˜æˆäº†å…¬å…³ç¾éš¾ã€‚</li>
<li>çœŸé‡‘ç™½é“¶çš„æŸå¤±ï¼šé«˜é¢çš„å¸‚åœºæ¨å¹¿è´¹ç”¨ä»˜è¯¸ä¸œæµï¼Œé¦–æ—¥å……å€¼æµæ°´è¿œä½äºé¢„æœŸã€‚</li>
<li>ç©å®¶æ°¸ä¹…æµå¤±ï¼šç³Ÿç³•çš„é¦–æ—¥ä½“éªŒä¼šå¯¼è‡´å¤§é‡æ ¸å¿ƒç©å®¶æ°¸ä¹…æµå¤±è‡³ç«å“ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ¡ˆä¾‹äºŒï¼šç”µå•†è¡Œä¸š â€”â€” å¤§ä¿ƒæ´»åŠ¨ä¸­çš„â€œæ€§èƒ½æ‚¬å´–â€</strong></p>
<ul>
<li>
<p>è¡Œä¸šï¼šç”µå•†ä¸åœ¨çº¿é›¶å”®</p>
</li>
<li>
<p>æ•…éšœï¼š</p>
<ol>
<li>åœºæ™¯ï¼šä¸€å®¶ç”µå•†å¹³å°ä¸ºäº†åº”å¯¹å¤§ä¿ƒï¼Œæå‰â€œé¢„ç•™â€äº†å¤§é‡ ECS èŠ‚ç‚¹ã€‚ä¸ºäº†â€œæé«˜èµ„æºåˆ©ç”¨ç‡â€ï¼Œä»–ä»¬åœ¨æ ¸å¿ƒçš„äº¤æ˜“åº”ç”¨ Pod æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šï¼Œæ··éƒ¨äº†ä¸€äº›éæ ¸å¿ƒçš„æ•°æ®åˆ†æå’Œæ—¥å¿—å¤„ç† Podï¼Œå¹¶é…ç½®äº†éåˆšæ€§çš„ CPU äº¤ä»˜ã€‚</li>
<li>è§¦å‘ï¼šå¤§ä¿ƒé›¶ç‚¹å¼€å¯ï¼Œäº¤æ˜“é‡é£™å‡ï¼Œäº¤æ˜“åº”ç”¨éœ€è¦å…¨éƒ¨ç”³è¯·çš„ CPUã€‚åŒæ—¶ï¼Œæ•°æ®åˆ†æä»»åŠ¡ä¹Ÿå¼€å§‹é«˜å¼ºåº¦è¿è¡Œï¼ŒæŠ¢å  CPU èµ„æºã€‚</li>
<li>ç°è±¡ï¼šäº¤æ˜“åº”ç”¨çš„å®é™…å¯ç”¨ CPU è¢«ä¸¥é‡æŒ¤å‹ï¼Œå“åº”æ—¶é—´æ€¥å‰§æ¶åŒ–ï¼Œå¤§é‡è¯·æ±‚è¶…æ—¶ã€‚</li>
</ol>
</li>
<li>
<p>ä¸šåŠ¡å½±å“ï¼š</p>
<ul>
<li>è®¢å•å¤§é‡æµå¤±ï¼šæ”¯ä»˜å’Œä¸‹å•ç¯èŠ‚çš„å µå¡ï¼Œç›´æ¥å¯¼è‡´ GMV æŸå¤±ã€‚</li>
<li>å“ç‰Œä¿¡èª‰å—æŸï¼šç”¨æˆ·åœ¨å…³é”®æ—¶åˆ»æ‰é“¾å­ï¼Œä¸¥é‡æŸå®³å“ç‰Œå¯é æ€§ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ¡ˆä¾‹ä¸‰ï¼šé‡‘èç§‘æŠ€è¡Œä¸š â€”â€” äº¤æ˜“æ—¶æ®µçš„â€œéšæœºæ‰çº¿â€</strong></p>
<ul>
<li>
<p>è¡Œä¸šï¼šé‡‘èç§‘æŠ€ (FinTech)ï¼Œå°¤å…¶æ˜¯è¯åˆ¸äº¤æ˜“</p>
</li>
<li>
<p>æ•…éšœï¼š</p>
<ol>
<li>åœºæ™¯ï¼šä¸€ä¸ªæ ¸å¿ƒçš„è¡Œæƒ…æ¨é€ Java æœåŠ¡ï¼Œä»¥å†…å­˜éåˆšæ€§äº¤ä»˜çš„æ–¹å¼è¿è¡Œåœ¨ä¸€ä¸ªè‡ªç®¡ç†çš„ K8s é›†ç¾¤ä¸Šã€‚</li>
<li>è§¦å‘ï¼šäº¤æ˜“æ—¶æ®µï¼Œè®¢é˜…é‡æ¿€å¢ï¼ŒæœåŠ¡å®é™…å†…å­˜ä½¿ç”¨è¿œè¶…å…¶ç”³è¯·å€¼ã€‚æ­¤æ—¶èŠ‚ç‚¹å†…å­˜å‹åŠ›å¢å¤§ï¼Œè§¦å‘ OOM Killerã€‚</li>
<li>ç°è±¡ï¼šè¡Œæƒ…æœåŠ¡ Pod è¢«ç³»ç»Ÿåˆ¤å®šä¸ºâ€œåŠ£è´¨è¿›ç¨‹â€è€Œéšæœºæ€æ­»ï¼Œå¯¼è‡´å®¢æˆ·ç«¯è¡Œæƒ…åˆ·æ–°ä¸­æ–­ã€‚</li>
</ol>
</li>
<li>
<p>ä¸šåŠ¡å½±å“ï¼š</p>
<ul>
<li>äº¤æ˜“å†³ç­–å¤±è¯¯ï¼šç”¨æˆ·å› è¡Œæƒ…ä¸­æ–­è€Œåšå‡ºé”™è¯¯å†³ç­–æˆ–é”™å¤±äº¤æ˜“æ—¶æœºï¼Œé€ æˆç›´æ¥ç»æµæŸå¤±ã€‚</li>
<li>åˆè§„ä¸ç›‘ç®¡é£é™©ï¼šæ ¸å¿ƒç³»ç»Ÿé¢‘ç¹ä¸­æ–­ï¼Œå¯èƒ½è§¦çŠ¯é‡‘èè¡Œä¸šçš„é«˜å¯ç”¨æ€§ç›‘ç®¡è¦æ±‚ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ¡ˆä¾‹å››ï¼šä¼ä¸šè½¯ä»¶è¡Œä¸š â€”â€” æ ¸å¿ƒERPç³»ç»Ÿçš„â€œæ€§èƒ½æŠ½å¥–â€</strong></p>
<ul>
<li>
<p>è¡Œä¸šï¼šä¼ä¸šè½¯ä»¶ (ERP, CRM)ï¼Œå°¤å…¶æ˜¯å¤§å‹å•ä½“åº”ç”¨</p>
</li>
<li>
<p>æ•…éšœï¼š</p>
<ol>
<li>åœºæ™¯ï¼šä¸€å®¶ä¼ä¸šå°†å…¶åºå¤§çš„ã€æ— æ³•è½»æ˜“æ°´å¹³æ‰©å±•çš„å•ä½“ ERP ç³»ç»Ÿå®¹å™¨åŒ–åï¼Œéƒ¨ç½²åœ¨ä¸€ä¸ªèµ„æºéåˆšæ€§äº¤ä»˜çš„è‡ªå»ºé›†ç¾¤ä¸Šï¼Œä»¥æœŸâ€œèŠ‚çº¦æˆæœ¬â€ã€‚</li>
<li>è§¦å‘ï¼šåœ¨æœˆæœ«è´¢åŠ¡ç»“ç®—ç­‰é«˜å³°æœŸï¼ŒERP ç³»ç»Ÿéœ€è¦å¤§é‡ CPU å’Œå†…å­˜ã€‚ä½†å®ƒå¿…é¡»å’ŒèŠ‚ç‚¹ä¸Šå…¶ä»–åº”ç”¨â€œå…±äº«â€èµ„æºã€‚</li>
<li>ç°è±¡ï¼šERP ç³»ç»Ÿçš„æ€§èƒ½å˜å¾—æä¸ç¨³å®šï¼Œæ—¶å¿«æ—¶æ…¢ï¼Œå¦‚åŒâ€œæŠ½å¥–â€ã€‚æœ‰æ—¶ä¸€ä¸ªæŠ¥è¡¨ç”Ÿæˆéœ€è¦ 2 åˆ†é’Ÿï¼Œæœ‰æ—¶éœ€è¦ 20 åˆ†é’Ÿã€‚</li>
</ol>
</li>
<li>
<p>ä¸šåŠ¡å½±å“ï¼š</p>
<ul>
<li>å·¥ä½œæ•ˆç‡ä½ä¸‹ï¼šå‘˜å·¥çš„æ ¸å¿ƒå·¥ä½œæµç¨‹è¢«é¢‘ç¹æ‰“æ–­ï¼Œè´¢åŠ¡ã€ä¾›åº”é“¾ç­‰éƒ¨é—¨çš„æœˆæœ«ç»“ç®—å·¥ä½œæ— æ³•æŒ‰æ—¶å®Œæˆã€‚</li>
<li>å†³ç­–å»¶è¿Ÿï¼šç®¡ç†è€…æ— æ³•åŠæ—¶è·å–å‡†ç¡®çš„ä¸šåŠ¡æŠ¥è¡¨ï¼Œå½±å“äº†å•†ä¸šå†³ç­–çš„æ—¶æ•ˆæ€§ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-0">èµ„æºåˆšæ€§äº¤ä»˜å›°å¢ƒ</h2>
<h3 data-id="heading-1">èµ„æºä¾›ç»™çš„ä¸ç¡®å®šæ€§</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šâ€œæ‰¿è¯ºçš„èµ„æºâ€ â‰  â€œå¯å³æ—¶è·å–çš„èµ„æºâ€ã€‚</p>
<ul>
<li>åº“å­˜æ³¢åŠ¨ï¼šçƒ­é—¨è§„æ ¼ ECSï¼Œåœ¨å¤§ä¿ƒæˆ–è¡Œä¸šé«˜å³°æœŸå®¹æ˜“å‡ºç°â€œç§’å…‰â€ï¼Œå¯¼è‡´æ‰©å®¹å¤±è´¥ã€‚</li>
<li>åŒºåŸŸ/å¯ç”¨åŒºå·®å¼‚ï¼šæŸäº› AZ å› ç‰©ç†æœºæˆ¿å®¹é‡é™åˆ¶ï¼Œæ— æ³•æä¾›ç‰¹å®šèµ„æºç±»å‹ï¼Œè·¨ AZ è°ƒåº¦åˆéœ€é¢å¤–ç½‘ç»œä¸é…ç½®æˆæœ¬ã€‚</li>
<li>ä»£é™…æ–­å±‚ï¼šæ—§ä»£å®ä¾‹åœå”®æˆ–åº“å­˜æ¯ç«­ï¼Œä½†åº”ç”¨å°šæœªé€‚é…æ–°æ¶æ„ï¼Œé€ æˆåˆšæ€§æ‰¿è¯ºæ— æ³•å…‘ç°ã€‚</li>
</ul>
<h3 data-id="heading-2">æ€§èƒ½éš”ç¦»éš¾ä»¥çœŸæ­£å®ç°</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šâ€œé€»è¾‘éš”ç¦»â€ä¸ç­‰äºâ€œç‰©ç†éš”ç¦»â€ï¼Œåˆšæ€§æ€§èƒ½éš¾ä»¥ 100% ä¿éšœã€‚</p>
<ul>
<li>è™šæ‹ŸåŒ–å¼€é”€ä¸å¹²æ‰°ï¼šå³ä½¿ä½¿ç”¨ Cgroupsã€CPU ç»‘æ ¸ç­‰æŠ€æœ¯ï¼Œå…±äº« NUMA èŠ‚ç‚¹ã€å†…å­˜å¸¦å®½ã€ç£ç›˜ I/O é˜Ÿåˆ—ä»å¯èƒ½è¢«â€œå˜ˆæ‚é‚»å±…â€æŠ¢å ã€‚</li>
<li>çªå‘æµé‡å†²å‡»ï¼šåŒèŠ‚ç‚¹ä¸Šå…¶ä»–ç§Ÿæˆ·çªå‘é«˜è´Ÿè½½ï¼ˆå¦‚å¤‡ä»½ã€æ‰«æï¼‰ï¼Œå¯¼è‡´æœ¬åº”â€œç‹¬å â€çš„å®ä¾‹å‡ºç°å»¶è¿Ÿæ¯›åˆºã€‚</li>
<li>å­˜å‚¨æ€§èƒ½æŠ–åŠ¨ï¼šå­˜å‚¨åœ¨å¤šç§Ÿæˆ·äº‰æŠ¢ä¸‹ IOPS å’Œååä¸ç¨³å®šï¼Œå½±å“æ ¸å¿ƒä¸šåŠ¡ç­‰å…³é”®åº”ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-3">å¼¹æ€§ä¸åˆšæ€§çš„å†…åœ¨çŸ›ç›¾</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šåˆšæ€§è¦æ±‚ç¡®å®šæ€§ï¼Œå¼¹æ€§ä¾èµ–ä¸ç¡®å®šæ€§ï¼ŒäºŒè€…å¤©ç„¶å¼ åŠ›ã€‚</p>
<ul>
<li>é¢„å  vs æŒ‰éœ€ï¼šä¸ºä¿éšœåˆšæ€§éœ€æå‰é¢„ç•™èµ„æºï¼Œä½†ä¸šåŠ¡è´Ÿè½½æ³¢åŠ¨å¤§æ—¶é€ æˆæµªè´¹ï¼›è‹¥å®Œå…¨æŒ‰éœ€ï¼Œåˆ™æ— æ³•åº”å¯¹çªå‘é«˜å³°ã€‚</li>
<li>å†·å¯åŠ¨å»¶è¿Ÿï¼šé¦–æ¬¡å¯åŠ¨éœ€æ‹‰é•œåƒã€åˆå§‹åŒ–ï¼Œå¾€å¾€æ— æ³•æ»¡è¶³ä¸šåŠ¡çš„åˆšæ€§å“åº”è¦æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-4">å¼‚æ„èµ„æºç®¡ç†å¤æ‚åº¦é«˜</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šâ€œèµ„æºåˆšæ€§â€éœ€ç«¯åˆ°ç«¯æ ˆååŒï¼Œä»»ä¸€ç¯èŠ‚çŸ­æ¿å³å¯¼è‡´æ•´ä½“å¤±æ•ˆã€‚</p>
<ul>
<li>ä¸“ç”¨ç¡¬ä»¶ï¼šé©±åŠ¨ç‰ˆæœ¬ã€CUDA å…¼å®¹æ€§ã€æ‹“æ‰‘æ„ŸçŸ¥è°ƒåº¦ã€æ•…éšœæ¢å¤æœºåˆ¶å„å¼‚ï¼Œéš¾ä»¥æ ‡å‡†åŒ–äº¤ä»˜ã€‚</li>
<li>æ··åˆæ¶æ„æ”¯æŒéš¾ï¼šx86 ä¸ ARMï¼ˆå¦‚å€šå¤© 710ï¼‰æŒ‡ä»¤é›†ä¸åŒï¼Œåº”ç”¨éœ€é‡æ–°ç¼–è¯‘æµ‹è¯•ï¼Œåˆšæ€§äº¤ä»˜éœ€ç»´æŠ¤å¤šå¥—é•œåƒä¸éƒ¨ç½²æµç¨‹ã€‚</li>
<li>ç½‘ç»œä¸å­˜å‚¨è€¦åˆï¼šé«˜æ€§èƒ½è®¡ç®—éœ€ RDMAã€NVMe over Fabric ç­‰åº•å±‚èƒ½åŠ›ï¼Œä½†è¿™äº›èƒ½åŠ›åœ¨è™šæ‹ŸåŒ–å±‚å¸¸è¢«å‰Šå¼±æˆ–ä¸å¯ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-5">ä¼ ç»Ÿæ¶æ„ä¸äº‘åŸç”Ÿç†å¿µå‰²è£‚</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šåˆšæ€§äº¤ä»˜ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ç»„ç»‡ä¸è®¤çŸ¥è½¬å‹é—®é¢˜ã€‚</p>
<ul>
<li>ç¼ºä¹å¼¹æ€§è®¾è®¡ï¼šåº”ç”¨æœªåšæ— çŠ¶æ€æ”¹é€ ï¼Œæ— æ³•æ¨ªå‘æ‰©å±•ï¼Œåªèƒ½çºµå‘å‡çº§ï¼ˆScale-Upï¼‰ï¼Œè€Œå¤§è§„æ ¼å®ä¾‹æ›´ç¨€ç¼ºã€æ›´æ˜‚è´µã€‚</li>
<li>è¿ç»´æƒ¯æ€§é˜»åŠ›ï¼šä¼ä¸šä¹ æƒ¯â€œä¹°æœåŠ¡å™¨ã€è£…ç³»ç»Ÿã€é•¿æœŸè¿è¡Œâ€ï¼Œå¯¹â€œæŒ‰éœ€ç”³è¯·ã€ç”¨å®Œå³å¼ƒâ€çš„åˆšæ€§äº¤ä»˜æ¨¡å¼æ¥å—åº¦ä½ã€‚</li>
</ul>
<h3 data-id="heading-6">æˆæœ¬æ¨¡å‹ä¸åˆšæ€§ç›®æ ‡å†²çª</h3>
<p>å›°å¢ƒæœ¬è´¨ï¼šè´¢åŠ¡çº¦æŸå¸¸è¿«ä½¿æŠ€æœ¯ç†æƒ³å‘ç°å®ä½å¤´ã€‚</p>
<ul>
<li>åˆšæ€§ = é«˜æˆæœ¬ï¼šç‹¬å ç‰©ç†æœºã€ä¸“ç”¨é›†ç¾¤ã€å¤š AZ å†—ä½™ç­‰æ–¹æ¡ˆæ˜¾è‘—æ¨é«˜ TCOã€‚</li>
<li>ä¼ä¸šè¢«è¿«å¦¥åï¼šä¸ºæ§åˆ¶é¢„ç®—ï¼Œç”¨æˆ·å¸¸é€‰æ‹©å…±äº«èµ„æºæ± +ç›‘æ§å‘Šè­¦â€œäº‹åè¡¥æ•‘â€ï¼Œè€Œéäº‹å‰åˆšæ€§ä¿éšœã€‚</li>
<li>è®¡è´¹æ¨¡å¼æ»åï¼šä¼ ç»ŸæŒ‰å°æ—¶è®¡è´¹æ— æ³•åŒ¹é…ç§’çº§å¼¹æ€§éœ€æ±‚ï¼Œå¯¼è‡´â€œä¸ºä¸ç”¨çš„èµ„æºä»˜è´¹â€æˆ–â€œå…³é”®æ—¶åˆ»æ— èµ„æºå¯ç”¨â€ã€‚</li>
</ul>
<h2 data-id="heading-7">SAE åœ¨åˆšæ€§äº¤ä»˜ä¸Šåšçš„å·¥ä½œ</h2>
<p>ä½œä¸ºé˜¿é‡Œäº‘é¢å‘åº”ç”¨å±‚çš„å…¨æ‰˜ç®¡ Serverless PaaS å¹³å°ï¼Œé’ˆå¯¹èµ„æºåˆšæ€§äº¤ä»˜çš„ç³»ç»Ÿæ€§å›°å¢ƒï¼Œä»<strong>èµ„æºä¾›ç»™ã€æ€§èƒ½éš”ç¦»ã€å¼¹æ€§æ¨¡å‹ã€å¼‚æ„è°ƒåº¦ã€æˆæœ¬ç»“æ„ã€å®¹ç¾èƒ½åŠ›ã€å¯è§‚æµ‹æ€§ä¸æ¶æ„æ¼”è¿›</strong>ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œäº†è®¾è®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04d3e56bf93b4a278dd655a73aa10cc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358532&amp;x-signature=%2Fw1OYZQllv%2BR%2FyS4VV9U3DtmFXY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8">1. ç ´è§£â€œèµ„æºä¾›ç»™ä¸ç¡®å®šæ€§â€ â†’ æ„å»ºæ— é™å¼¹æ€§èµ„æºæ± </h3>
<ul>
<li>å¤šæºå¼‚æ„èµ„æºæ•´åˆï¼š<br/>
SAE èƒŒåæ‰“é€šç¥é¾™è£¸é‡‘å±æœåŠ¡å™¨ã€å¼¹æ€§å®¹å™¨å®ä¾‹ï¼ˆECIï¼‰æ”¯æŒå„ä»£ Â x86/ARM ç­‰æµ·é‡èµ„æºï¼Œå½¢æˆç»Ÿä¸€è°ƒåº¦æ± ã€‚</li>
<li>æ™ºèƒ½è·¨æœºå‹è°ƒåº¦ï¼š<br/>
å½“ç”¨æˆ·æŒ‡å®šè§„æ ¼åº“å­˜ä¸è¶³æ—¶ï¼Œè°ƒåº¦å™¨è‡ªåŠ¨é€‰æ‹©æ€§èƒ½ç›¸å½“ã€å…¼å®¹æ€§ä¸€è‡´çš„æ›¿ä»£èµ„æºï¼ˆå¦‚ g7 ç¼ºè´§ â†’ è‡ªåŠ¨è°ƒåº¦ g8iï¼‰ï¼Œå…¨ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚</li>
<li>ç»“æœï¼š<br/>
äº¤ä»˜çš„æ˜¯â€œè®¡ç®—èƒ½åŠ›â€ï¼Œè€Œéâ€œç‰¹å®šæœºå‹â€ï¼Œå½»åº•è§„é¿å› åº“å­˜æ³¢åŠ¨å¯¼è‡´çš„æ‰©å®¹å¤±è´¥ã€‚</li>
</ul>
<h3 data-id="heading-9">2. è§£å†³â€œæ€§èƒ½éš”ç¦»éš¾â€ â†’ å¤©ç„¶æ²™ç®±åŒ– + ç‹¬å èµ„æº</h3>
<ul>
<li>é»˜è®¤è¿è¡Œåœ¨ ECI æ²™ç®±ä¸­ï¼š<br/>
æ¯ä¸ªåº”ç”¨å®ä¾‹è¿è¡Œåœ¨è½»é‡çº§å®‰å…¨å®¹å™¨ï¼Œå®ç°å†…æ ¸çº§éš”ç¦»ï¼Œæœç»â€œå˜ˆæ‚é‚»å±…â€å¹²æ‰°ã€‚</li>
<li>èµ„æº 100% ç‹¬å ï¼š<br/>
ç”¨æˆ·ç”³è¯·çš„ CPUã€å†…å­˜ã€ç½‘ç»œå¸¦å®½å‡ç”± runD åº•å±‚å®‰å…¨æ²™ç®±ä¿éšœï¼Œæ— è¶…åˆ†ã€æ— äº‰æŠ¢ï¼Œæ€§èƒ½ç¨³å®šå¯é¢„æœŸã€‚</li>
<li>ç»“æœï¼š<br/>
åˆšæ€§æ€§èƒ½ä¸å†æ˜¯â€œå°½åŠ›è€Œä¸ºâ€ï¼Œè€Œæ˜¯ç¡®å®šæ€§äº¤ä»˜ï¼Œå°¤å…¶é€‚åˆé‡‘èäº¤æ˜“ã€å®æ—¶æ¨èç­‰æ•æ„Ÿåœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-10">3. è°ƒå’Œâ€œå¼¹æ€§ä¸åˆšæ€§çŸ›ç›¾â€ â†’ æŒ‰å®é™…ç”¨é‡è®¡è´¹ + ç¼©å®¹è‡³é›¶</h3>
<ul>
<li>é—²ç½®ä¸è®¡è´¹ï¼š<br/>
åº”ç”¨ç¼©å®¹åˆ° 0 å®ä¾‹æ—¶ï¼ŒCPU/å†…å­˜èµ„æºå®Œå…¨é‡Šæ”¾ï¼Œä¸äº§ç”Ÿè´¹ç”¨ï¼ˆä»…ä¿ç•™é…ç½®å…ƒæ•°æ®ï¼‰ã€‚</li>
<li>ç§’çº§å†·å¯åŠ¨ä¼˜åŒ–ï¼š<br/>
ç»“åˆé•œåƒé¢„çƒ­ã€å¿«ç…§åŠ é€Ÿã€æœ¬åœ°ç¼“å­˜ç­‰æŠ€æœ¯ï¼Œå¤§å¹…ç¼©çŸ­é¦–æ¬¡å¯åŠ¨å»¶è¿Ÿï¼Œé€¼è¿‘â€œå³æ—¶åˆšæ€§å“åº”â€ã€‚</li>
<li>ç»“æœï¼š<br/>
ç”¨æˆ·æ— éœ€ä¸ºâ€œä»¥é˜²ä¸‡ä¸€â€é•¿æœŸé¢„ç•™èµ„æºï¼Œåˆšæ€§ä¿éšœä¸æè‡´æˆæœ¬å…¼å¾—ï¼Œæ›¿ä»£é«˜é£é™©æ··éƒ¨ç­–ç•¥ã€‚</li>
</ul>
<h3 data-id="heading-11">4. ç®€åŒ–â€œå¼‚æ„èµ„æºç®¡ç†â€ â†’ å±è”½åº•å±‚å¤æ‚æ€§</h3>
<ul>
<li>ARM/x86 æ— ç¼å…¼å®¹ï¼š<br/>
å¦‚æ”¯æŒæµ·å…‰å›½äº§èŠ¯ç‰‡ï¼Œç”¨æˆ·åªéœ€æä¾›å…¼å®¹é•œåƒï¼ŒSAE è‡ªåŠ¨å®Œæˆè°ƒåº¦ä¸è¿è¡Œæ—¶é€‚é…ã€‚</li>
<li>ç»“æœï¼š<br/>
å¼€å‘è€…åªéœ€å…³æ³¨â€œæˆ‘è¦å¤šå°‘ç®—åŠ›â€ï¼Œæ— éœ€å…³å¿ƒâ€œå¡åœ¨å“ªå°æœºå™¨ä¸Šã€é©±åŠ¨æ˜¯å¦åŒ¹é…â€ã€‚</li>
</ul>
<h3 data-id="heading-12">5. é‡æ„â€œæˆæœ¬æ¨¡å‹â€ â†’ ä»â€œä¹°èµ„æºâ€åˆ°â€œä¹°èƒ½åŠ›â€</h3>
<ul>
<li>æŒ‰å®é™… CPU/å†…å­˜ä½¿ç”¨é‡ç§’çº§è®¡è´¹ï¼š<br/>
ä¸å†æŒ‰æ•´æœºå°æ—¶ä»˜è´¹ï¼Œé¿å…èµ„æºé—²ç½®æµªè´¹ã€‚</li>
<li>å…è¿ç»´æˆæœ¬ï¼š<br/>
æ— éœ€ç®¡ç†èŠ‚ç‚¹ã€æ‰“è¡¥ä¸ã€ç¼–å†™æ‰©ç¼©å®¹è„šæœ¬ï¼ŒäººåŠ›æˆæœ¬å¤§å¹…é™ä½ã€‚</li>
<li>ç»“æœï¼š<br/>
åˆšæ€§äº¤ä»˜ä¸å†æ˜‚è´µï¼Œä¸­å°ä¼ä¸šä¹Ÿèƒ½äº«å—ä¼ä¸šçº§å¯é æ€§ã€‚</li>
</ul>
<h3 data-id="heading-13">6. å¼ºåŒ–â€œå®¹ç¾ä¸é«˜å¯ç”¨â€ â†’ å¤šå¯ç”¨åŒºåˆšæ€§å®¹ç¾</h3>
<ul>
<li>ä¸€é”®å¼€å¯å¤š AZ éƒ¨ç½²ï¼š<br/>
SAE è‡ªåŠ¨å°†åº”ç”¨å®ä¾‹åˆ†æ•£åˆ°å¤šä¸ªå¯ç”¨åŒºï¼Œè·¨æœºæˆ¿å†—ä½™ã€‚</li>
<li>AZ æ•…éšœè‡ªåŠ¨æ¢å¤ï¼š<br/>
è‹¥æŸ AZ æ•´ä½“ä¸å¯ç”¨ï¼ŒSAE åœ¨å…¶ä»– AZ åˆšæ€§æ‹‰èµ·æ–°å®ä¾‹ï¼ŒRTO æ§åˆ¶åœ¨åˆ†é’Ÿçº§ã€‚</li>
<li>ç»“æœï¼š<br/>
åˆšæ€§äº¤ä»˜ä»â€œå•ç‚¹ç¨³å®šâ€å‡çº§ä¸ºâ€œåº”ç”¨çº§è¿ç»­æ€§ä¿éšœâ€ã€‚</li>
</ul>
<h3 data-id="heading-14">7. æå‡â€œå¯è§‚æµ‹æ€§ä¸å¯ä¿¡åº¦â€ â†’ å†…ç½®å…¨é“¾è·¯ç›‘æ§</h3>
<ul>
<li>é›†æˆ ARMS + SLS + Prometheusï¼š<br/>
æä¾›åº”ç”¨æ€§èƒ½ç›‘æ§ï¼ˆAPMï¼‰ã€æ—¥å¿—ã€æŒ‡æ ‡ã€é“¾è·¯è¿½è¸ªä¸€ä½“åŒ–è§†å›¾ã€‚</li>
<li>èµ„æºä½¿ç”¨é€æ˜åŒ–ï¼š<br/>
ç”¨æˆ·å¯æ¸…æ™°çœ‹åˆ° CPU ä½¿ç”¨ç‡ã€å†…å­˜æ°´ä½ã€ç½‘ç»œååæ˜¯å¦è¾¾åˆ°æ‰¿è¯ºå€¼ã€‚</li>
<li>ç»“æœï¼š<br/>
åˆšæ€§ SLA å¯éªŒè¯ã€å¯å®¡è®¡ï¼Œå‘Šåˆ«â€œé»‘ç›’äº¤ä»˜â€ã€‚</li>
</ul>
<h3 data-id="heading-15">8. æ”¯æŒâ€œä¼ ç»Ÿåº”ç”¨å¹³æ»‘æ¼”è¿›â€ â†’ å…¼é¡¾ç¨³å®šä¸æœªæ¥</h3>
<ul>
<li>æ”¯æŒ WAR/JAR/é•œåƒç›´æ¥éƒ¨ç½²ï¼š<br/>
ERPã€OA ç­‰å•ä½“åº”ç”¨æ— éœ€æ”¹é€ å³å¯è¿è¡Œåœ¨ SAE ä¸Šï¼Œäº«å—åˆšæ€§èµ„æºä¿éšœã€‚</li>
<li>å†…ç½®è¯Šæ–­èƒ½åŠ›ï¼š<br/>
é€šè¿‡æ€§èƒ½å‰–æå®šä½ç“¶é¢ˆï¼ˆå¦‚æ•°æ®åº“æ…¢æŸ¥è¯¢ã€çº¿ç¨‹é˜»å¡ï¼‰ï¼Œä¸ºåç»­å¾®æœåŠ¡æ‹†åˆ†æä¾›æ•°æ®ä¾æ®ã€‚</li>
<li>ç»“æœï¼š<br/>
SAE ä¸ä»…æ˜¯â€œè¿è¡Œå¹³å°â€ï¼Œæ›´æ˜¯ä¼ä¸šäº‘åŸç”Ÿè½¬å‹çš„è·³æ¿ã€‚</li>
</ul>
<h2 data-id="heading-16">äº†è§£ Serverless åº”ç”¨å¼•æ“ SAE</h2>
<p>é˜¿é‡Œäº‘ Serverless åº”ç”¨å¼•æ“ SAE æ˜¯é¢å‘ AI æ—¶ä»£çš„ä¸€ç«™å¼å®¹å™¨åŒ–åº”ç”¨æ‰˜ç®¡å¹³å°ï¼Œä»¥â€œæ‰˜åº•ä¼ ç»Ÿåº”ç”¨ã€åŠ é€Ÿ AI åˆ›æ–°â€ä¸ºæ ¸å¿ƒç†å¿µã€‚å®ƒç®€åŒ–è¿ç»´ã€ä¿éšœç¨³å®šã€é—²ç½®ç‰¹æ€§é™ä½ 75% æˆæœ¬ï¼Œå¹¶é€šè¿‡ AI æ™ºèƒ½åŠ©æ‰‹æå‡è¿ç»´æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6cafca1be0b42059a23f94e83bdf0e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358532&amp;x-signature=akmPuzggG1bk2tOtwYEs62QSe5s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é¢å‘ AIï¼ŒSAE é›†æˆ Dify ç­‰ä¸»æµæ¡†æ¶ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²ä¸å¼¹æ€§ä¼¸ç¼©ï¼Œåœ¨ Dify åœºæ™¯ä¸­å®ç°æ€§èƒ½<strong>æå‡ 50 å€ã€æˆæœ¬ä¼˜åŒ– 30% ä»¥ä¸Š</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8c38af91c6246caa24e48187f858a91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358532&amp;x-signature=x3AX6xxo6bnSLHW4WHF%2F43pABGo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-17">äº§å“ä¼˜åŠ¿</h3>
<p>å‡­å€Ÿå…«å¹´æŠ€æœ¯æ²‰æ·€ï¼ŒSAE å…¥é€‰ 2025 å¹´ Gartner äº‘åŸç”Ÿé­”åŠ›è±¡é™å…¨çƒé¢†å¯¼è€…ï¼Œäºšæ´²ç¬¬ä¸€ï¼ŒåŠ©åŠ›ä¼ä¸šé›¶èŠ‚ç‚¹ç®¡ç†ã€ä¸“æ³¨ä¸šåŠ¡åˆ›æ–°ã€‚SAE æ—¢æ˜¯ä¼ ç»Ÿåº”ç”¨ç°ä»£åŒ–çš„â€œæ‰˜ä¸¾å¹³å°â€ï¼Œä¹Ÿæ˜¯ AI åº”ç”¨è§„æ¨¡åŒ–è½åœ°çš„â€œåŠ é€Ÿå¼•æ“â€ã€‚</p>
<p><strong>1. ä¼ ç»Ÿåº”ç”¨è¿ç»´çš„â€œç®€ã€ç¨³ã€çœâ€ä¼˜åŒ–ä¹‹é“</strong></p>
<ul>
<li>ç®€ï¼šé›¶è¿ç»´å¿ƒæ™ºï¼Œä¸“æ³¨ä¸šåŠ¡åˆ›æ–°</li>
<li>ç¨³ï¼šä¼ä¸šçº§é«˜å¯ç”¨ï¼Œå†…ç½®å…¨æ–¹ä½ä¿éšœ</li>
<li>çœï¼šæè‡´å¼¹æ€§ï¼Œå°†æˆæœ¬é™è‡³å¯åº¦é‡</li>
</ul>
<p><strong>2. åŠ é€Ÿ AI åˆ›æ–°ï¼šä»å¿«é€Ÿæ¢ç´¢åˆ°é«˜æ•ˆè½åœ°</strong></p>
<ul>
<li>å¿«æ¢ç´¢ï¼šå†…ç½® Difyã€RAGFlowã€OpenManus ç­‰çƒ­é—¨ AI åº”ç”¨æ¨¡æ¿ï¼Œå¼€ç®±å³ç”¨ï¼Œåˆ†é’Ÿçº§å¯åŠ¨ POCï¼›</li>
<li>ç¨³è½åœ°ï¼šæä¾›ç”Ÿäº§çº§ AI è¿è¡Œæ—¶ï¼Œæ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚ Dify æ€§èƒ½æå‡ 50 å€ï¼‰ã€æ— æ„Ÿå‡çº§ã€å¤šç‰ˆæœ¬ç®¡ç†ï¼Œç¡®ä¿ä¼ä¸šçº§å¯é äº¤ä»˜ï¼›</li>
<li>æ˜“é›†æˆï¼šæ·±åº¦æ‰“é€šç½‘å…³ã€ARMSã€è®¡é‡ã€å®¡è®¡ç­‰èƒ½åŠ›ï¼ŒåŠ©åŠ›ä¼ ç»Ÿåº”ç”¨æ™ºèƒ½åŒ–å‡çº§ã€‚</li>
</ul>
<h2 data-id="heading-18">é€‚åˆè°ï¼Ÿ</h2>
<p>âœ…Â åˆ›ä¸šå›¢é˜Ÿï¼šæ²¡æœ‰ä¸“èŒè¿ç»´ï¼Œéœ€è¦å¿«é€Ÿä¸Šçº¿<br/>
âœ…Â ä¸­å°ä¼ä¸šï¼šæƒ³é™æœ¬å¢æ•ˆï¼Œæ‹¥æŠ±äº‘åŸç”Ÿ<br/>
âœ…Â å¤§å‹ä¼ä¸šï¼šéœ€è¦ä¼ä¸šçº§ç¨³å®šæ€§å’Œåˆè§„æ€§<br/>
âœ…Â å‡ºæµ·ä¼ä¸šï¼šéœ€è¦ä¸­å›½åŒº + å…¨çƒéƒ¨ç½²<br/>
âœ…Â AI åˆ›æ–°å›¢é˜Ÿï¼šæƒ³å¿«é€Ÿè½åœ° AI åº”ç”¨</p>
<h3 data-id="heading-19">äº†è§£æ›´å¤š</h3>
<p>äº§å“è¯¦æƒ…é¡µåœ°å€ï¼ˆç‚¹å‡»é˜…è¯»åŸæ–‡å³å¯æŸ¥çœ‹ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fsae" target="_blank" title="https://www.aliyun.com/product/sae" ref="nofollow noopener noreferrer">www.aliyun.com/product/sae</a></p>
<p>æ¬¢è¿ä½¿ç”¨é’‰é’‰æœç´¢ç¾¤å·ï¼š 23156632</p>
<p>åŠ å…¥ SAE å®¢æˆ·æœåŠ¡ç¾¤ ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡]]></title>    <link>https://juejin.cn/post/7579451710302470170</link>    <guid>https://juejin.cn/post/7579451710302470170</guid>    <pubDate>2025-12-03T09:42:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579451710302470170" data-draft-id="7579255046980206618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-03T09:42:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:42:59.000Z" title="Wed Dec 03 2025 09:42:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Ÿ</h3>
<p><strong>åˆ†åŒºï¼ˆpartitionsï¼‰</strong> ä¹Ÿè¢«ç§°ä¸º <strong>åˆ†ç‰‡ï¼ˆshardingï¼‰</strong> ï¼Œé€šå¸¸é‡‡ç”¨å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºçš„æ–¹å¼æ¥å¢åŠ ç³»ç»Ÿçš„ <strong>å¯ä¼¸ç¼©æ€§</strong>ï¼Œä»¥æ­¤æ¥é¢å¯¹<strong>éå¸¸å¤§çš„æ•°æ®é›†æˆ–éå¸¸é«˜çš„ååé‡</strong>ï¼Œé¿å…å‡ºç°çƒ­ç‚¹ã€‚</p>
<p>åˆ†åŒºé€šå¸¸å’Œå¤åˆ¶ç»“åˆä½¿ç”¨ï¼Œä½¿å¾—æ¯ä¸ªåˆ†åŒºçš„å‰¯æœ¬å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä¿è¯æ•°æ®å‰¯æœ¬çš„ <strong>é«˜å¯ç”¨</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæ•°æ®åº“è¢«åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªä¸»åº“ã€‚ä¸åŒåˆ†åŒºçš„ä¸»åº“å¯èƒ½åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯æŸäº›åˆ†åŒºçš„ä¸»åº“ï¼ŒåŒæ—¶æ˜¯å…¶ä»–åˆ†åŒºçš„ä»åº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42d9d47b5d5e49fe881575dbb10fdca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=hjzRRLYRnn2WoGPxdb%2FeEQe9sic%3D" alt="åˆ†åŒºä¸å¤åˆ¶.png" loading="lazy"/></p>
<h4 data-id="heading-1">1.1 ä¸€è‡´å‰ç¼€è¯»</h4>
<p>åˆ†åŒºä¹Ÿä¼šç”±äºå¤åˆ¶å»¶è¿Ÿè€Œäº§ç”Ÿé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å›¾ä¸­çš„ä¾‹å­ï¼Œæ˜¯Poonså…ˆç”Ÿå’ŒCakeå°å§çš„å¯¹è¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c05ea40e1e434f8a3d6bd6e51eb2dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=PpseAbZB5ZS3B5Z8Suvp9BXe42c%3D" alt="ä¸€è‡´å‰ç¼€è¯».png" loading="lazy"/></p>
<p>Poonså…ˆç”Ÿå…ˆé—®ï¼š "How far into the future can you see, Mrs.Cake?"</p>
<p>Cakeå°å§å›ç­”è¯´ï¼š "About ten seconds usually, Mr.Poons."</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™æ®µå¯¹è¯æ˜¯æœ‰å› æœå…³ç³»çš„ï¼ˆå…ˆé—®åç­”ï¼‰ã€‚ä½†æ˜¯å¯¹äºè§‚å¯Ÿè€…ï¼Œä»–çœ‹åˆ°çš„é¡ºåºå´æ˜¯å…ˆå¾—åˆ°äº†ç­”æ¡ˆï¼Œå†çœ‹åˆ°äº†é—®é¢˜ï¼Œè¿™å°±æ˜¯åœ¨åˆ†åŒºæ•°æ®åº“ä¸­ï¼Œå› å¤åˆ¶å»¶è¿Ÿè€Œäº§ç”Ÿçš„ç‰¹æ®Šæƒ…å†µã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ç§æ··ä¹±ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿è¯ <strong>ä¸€è‡´å‰ç¼€è¯»</strong>ï¼šå¦‚æœä¸€ç³»åˆ—å†™å…¥æŒ‰æŸä¸ªé¡ºåºå‘ç”Ÿï¼Œé‚£ä¹ˆä»»ä½•äººè¯»å–è¿™äº›å†™å…¥æ—¶ï¼Œä¹Ÿä¼šçœ‹è§å®ƒä»¬ä»¥åŒæ ·çš„é¡ºåºå‡ºç°ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œç¡®ä¿ä»»ä½•å› æœç›¸å…³çš„å†™å…¥éƒ½åœ¨ç›¸åŒçš„åˆ†åŒºã€‚</p>
<h3 data-id="heading-2">2. è¯¥æ€ä¹ˆåˆ†åŒºï¼Ÿ</h3>
<p>åˆ†åŒºçš„ç›®çš„æ˜¯å°†æ•°æ®å’Œè´Ÿè½½å‡åŒ€çš„åˆ†å¸ƒåˆ°å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç†è®ºä¸Š10ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå¤„ç†10å€çš„æ•°æ®é‡å’Œ10å€å•èŠ‚ç‚¹çš„è¯»å†™ååé‡ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåˆ†åŒºä¸å‡ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€äº›åˆ†åŒºæœ‰æ›´å¤šçš„æ•°æ®æˆ–è¯»å†™ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>åæ–œ</strong>ï¼Œè¿™ä¼šä½¿å¾—åˆ†åŒºåå¹¶æ²¡æœ‰å¾—åˆ°å¾ˆå¤§çš„æ•ˆç‡æå‡ã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è´Ÿè½½å¦‚æœéƒ½è½åœ¨ä¸€ä¸ªåˆ†åŒºï¼Œä½¿å¾—è¯¥åˆ†åŒºè´Ÿè½½è¿‡é«˜ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>çƒ­ç‚¹</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†é¿å…åæ–œå’Œçƒ­ç‚¹çš„äº§ç”Ÿï¼Œä»¥é”®å€¼æ•°æ®çš„åˆ†åŒºä¸ºä¾‹ï¼Œè®¨è®ºå¦‚ä½•å°†æ•°æ®åˆ†åŒºåšå¾—å¦¥å½“ã€‚</p>
<h4 data-id="heading-3">2.1 æ ¹æ®é”®çš„èŒƒå›´è¿›è¡Œåˆ†åŒº</h4>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®é”®å€¼çš„èŒƒå›´è¿›è¡Œåˆ†åŒºï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä»¥26ä¸ªè‹±æ–‡å­—ç¬¦åˆ’åˆ†26ä¸ªåˆ†åŒºï¼Œä¹‹åæ ¹æ®é”®å€¼é¦–å­—æ¯å¯¹å®ƒä»¬è¿›è¡Œåˆ†åŒºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé”®å€¼å¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œè¿™ä¼šé€ æˆæŒ‰ç…§é¦–å­—æ¯åˆ†åŒºä¹‹åï¼Œå‘ç”Ÿæ•°æ®åæ–œã€‚ä¸ºäº†å‡åŒ€åˆ†é…æ•°æ®ï¼Œåˆ†åŒºçš„è¾¹ç•Œéœ€è¦æ ¹æ®æ•°æ®åˆ†åŒºçš„å®é™…æƒ…å†µå†è¿›è¡Œè°ƒæ•´ã€‚</p>
<h4 data-id="heading-4">2.2 æ•£åˆ—åˆ†åŒº</h4>
<p>ä¸€ä¸ªå¥½çš„æ•£åˆ—å‡½æ•°å¯ä»¥å°†æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…å‘ç”Ÿåæ–œã€‚ä½†æ˜¯è¿™ä¹Ÿå¸¦æ¥äº†é—®é¢˜ï¼šæˆ‘ä»¬æ²¡æœ‰åŠæ³•å†è¿›è¡Œé«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-5">3. çƒ­ç‚¹æ¶ˆé™¤</h3>
<p>é¿å…çƒ­ç‚¹æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•°æ®è®°å½•è¿›è¡Œæ•£åˆ—åˆ†åŒºï¼Œè®°å½•å› æ­¤ä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¹³å‡åˆ†é…ã€‚</p>
<p>ä½†æ˜¯å®ƒå¹¶ä¸èƒ½å®Œå…¨é¿å…çƒ­ç‚¹çš„äº§ç”Ÿï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰çš„è¯»å†™æ“ä½œéƒ½æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®çš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è¯·æ±‚è¿˜æ˜¯ä¼šè¢«è·¯ç”±åˆ°åŒä¸€ä¸ªåˆ†åŒºã€‚æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªç™¾ä¸‡ç²‰ä¸çš„åšä¸»å‘å¸ƒåŠ¨æ€ï¼Œè¯¥åŠ¨æ€æ ¹æ®åšä¸»IDçš„é”®å€¼è¿›è¡Œåˆ†åŒºï¼Œå¦‚æœæ­¤æ—¶æœ‰å¤§é‡çš„ç²‰ä¸å¯¹è¯¥åŠ¨æ€è¿›è¡Œäº’åŠ¨ï¼Œé‚£ä¹ˆå“ˆå¸Œç­–ç•¥ä¼šæŠŠè¿™äº›è¯·æ±‚éƒ½è·¯ç”±åˆ°åŒä¸€ä¸ªåˆ†åŒºè¿›è¡Œæ“ä½œï¼Œå‘ç”Ÿçƒ­ç‚¹äº‹ä»¶ã€‚</p>
<p>å…¶å®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¯¥çƒ­ç‚¹é”®ä¸Šå†è¿›è¡Œåˆ†åŒºï¼Œä»¥é¿å…çƒ­ç‚¹ï¼šåœ¨ä¸»é”®çš„æœ€åæ‹¼æ¥éšæœºæ•°ï¼Œä¸¤ä½åè¿›åˆ¶çš„éšæœºæ•°å°±èƒ½æŠŠä¸€ä¸ªä¸»é”®åˆ†æˆ100ä¸ªä¸åŒçš„ä¸»é”®ï¼Œä»è€Œå­˜å‚¨åœ¨ä¸åŒçš„åˆ†åŒºä¸­ï¼Œè¿™å°±å®Œæˆäº†çƒ­ç‚¹æ¶ˆé™¤ã€‚ä½†æ˜¯ä¸»é”®è¢«åˆ†å‰²åï¼Œä»»ä½•è¯»å–å·¥ä½œéƒ½å¿…é¡»åœ¨æ¯æ¬¡è¯»å–æ—¶å°†æ‰€æœ‰çš„æ•°æ®æ‹‰å‡ºå»åˆå¹¶åˆ°ä¸€èµ·å†è¿”å›ç»“æœã€‚</p>
<h3 data-id="heading-6">4. åˆ†åŒºå†å¹³è¡¡</h3>
<p>å¦‚æœä¿å­˜æŸåˆ†åŒºæ•°æ®çš„æœåŠ¡å™¨æ•…éšœï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–æœåŠ¡å™¨æ¥ç®¡æˆ–æƒ³å°†ç›®å‰çš„æœåŠ¡å™¨æ¢æˆæ€§èƒ½æ›´å¥½çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œ <strong>åˆ†åŒºå†å¹³è¡¡</strong>ã€‚</p>
<p><strong>åˆ†åŒºå†å¹³è¡¡</strong> æ˜¯å°†è´Ÿè½½ä»é›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å‘å¦ä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨çš„è¿‡ç¨‹ã€‚æ‰§è¡Œå†å¹³è¡¡éœ€è¦æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>å†å¹³è¡¡æœŸé—´ï¼Œæ•°æ®åº“åº”è¯¥ç»§ç»­æ¥å—è¯»å–å’Œå†™å…¥</li>
<li>èŠ‚ç‚¹ä¹‹é—´åªç§»åŠ¨å¿…é¡»çš„æ•°æ®ï¼Œä»¥ä¾¿å¿«é€Ÿå†å¹³è¡¡ï¼Œå¹¶å‡å°‘ç½‘ç»œå’Œç£ç›˜çš„IOè´Ÿè½½</li>
<li>å†å¹³è¡¡ä¹‹åï¼Œè´Ÿè½½åº”è¯¥åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¹‹é—´å…¬å¹³åœ°å…±äº«</li>
</ul>
<p>æ¯”è¾ƒç®€å•çš„å†å¹³è¡¡åˆ†åŒºç­–ç•¥æ˜¯é€‰æ‹© <strong>å›ºå®šæ•°é‡çš„åˆ†åŒº</strong>ï¼Œå½“èŠ‚ç‚¹æ•°é‡å¢åŠ æ—¶ï¼Œå¯ä»¥ä»åŸèŠ‚ç‚¹ä¸­ <strong>çªƒå–</strong> ä¸€äº›åˆ†åŒºï¼ˆå½“èŠ‚ç‚¹æ•°é‡å‡å°‘æ—¶ï¼Œåˆ™å‘ç”Ÿç›¸åçš„æƒ…å†µï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a27e8329b4c14681a033fa17b01d48e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=CEz4V3PO6zsRwUVIvX5j79H%2Fdjk%3D" alt="å›ºå®šæ•°é‡åˆ†åŒºå†å¹³è¡¡.png" loading="lazy"/></p>
<p>åœ¨è¿™ç§é…ç½®ä¸­ï¼Œåˆ†åŒºçš„æ•°é‡é€šå¸¸åœ¨æ•°æ®åº“ç¬¬ä¸€æ¬¡å»ºç«‹æ—¶ç¡®å®šï¼Œæ“ä½œæ¯”è¾ƒç®€å•ï¼Œä¹‹åä¸ä¼šæ”¹å˜ï¼Œå› æ­¤ä½ éœ€è¦é€‰æ‹©è¶³å¤Ÿå¤šçš„åˆ†åŒºä»¥é€‚åº”æœªæ¥çš„å¢é•¿ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªåˆ†åŒºä¹Ÿæœ‰ç®¡ç†å¼€é”€ï¼Œæ‰€ä»¥é€‰æ‹©å¤ªå¤§çš„æ•°å­—ä¼šé€‚å¾—å…¶åã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯é€‰æ‹© <strong>åŠ¨æ€åˆ†åŒº</strong>ï¼Œæ ¹æ®é…ç½®çš„åˆ†åŒºå¤§å°ï¼Œå½“è¶…è¿‡è¯¥é˜ˆå€¼æ—¶ï¼Œå¯ä»¥å°†è¯¥å¤§åˆ†åŒºåˆ†å‰²æˆä¸¤ä¸ªå°åˆ†åŒºï¼Œèƒ½å¤Ÿä½¿ <strong>åˆ†åŒºæ•°é‡é€‚åº”æ€»æ•°æ®é‡</strong>ã€‚åœ¨å¤§å‹åˆ†åŒºæ‹†åˆ†åï¼Œå¯ä»¥å°†å…¶ä¸­çš„ä¸€åŠè½¬ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»¥å¹³è¡¡è´Ÿè½½ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ <strong>æ ¹æ®èŠ‚ç‚¹æ•°å¢åŠ æ¥è¿›è¡Œåˆ†åŒº</strong> çš„æ–¹æ³•ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸Šæœ‰å›ºå®šçš„åˆ†åŒºæ•°ï¼Œå½“èŠ‚ç‚¹å¢åŠ æ—¶ï¼Œåˆ†åŒºå°†å˜å°ï¼Œæ–°å¢çš„èŠ‚ç‚¹ä¼šä»åŸæœ‰èŠ‚ç‚¹çš„åˆ†åŒºä¸­éšæœºè¿›è¡Œæ‹†åˆ†ï¼Œæœ€ç»ˆè¿™ä¸ªæ–°èŠ‚ç‚¹è·å¾—å…¬å¹³çš„è´Ÿè½½ä»½é¢ã€‚</p>
<p>åˆ†åŒºå†å¹³è¡¡å¯ä»¥ <strong>æ‰‹åŠ¨æ‰§è¡Œ</strong> ä¹Ÿå¯ä»¥ <strong>è‡ªåŠ¨æ‰§è¡Œ</strong>ã€‚è‡ªåŠ¨å†å¹³è¡¡æ¯”è¾ƒæ–¹ä¾¿ï¼Œå› ä¸ºä¸éœ€è¦äººå·¥ç»´æŠ¤ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸å¯é¢„æµ‹çš„ï¼šå†å¹³è¡¡æ—¶å°†å¤§é‡æ•°æ®é›†ä»ä¸€ä¸ªèŠ‚ç‚¹è½¬ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤§çš„ç½‘ç»œå¼€é”€ï¼Œè¿™ä¼šä½¿å¾—è¯¥æœåŠ¡å™¨å¯¹è¯·æ±‚å“åº”çš„æ€§èƒ½é™ä½ï¼Œå¯¹ç”¨æˆ·çš„ä½“éªŒå’Œç”Ÿäº§é€ æˆè´Ÿé¢å½±å“ã€‚æ‰€ä»¥å†å¹³è¡¡çš„è¿‡ç¨‹æœ‰äººå‚ä¸æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œè¿™æ ·èƒ½é˜²æ­¢å‘ç”Ÿè¿ç»´é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">5. è¯·æ±‚è·¯ç”±ï¼ˆæœåŠ¡å‘ç°ï¼‰</h3>
<p>å½“æˆ‘ä»¬å·²ç»å°†æ•°æ®è¿›è¡Œåˆ†åŒºåï¼Œå¦‚ä½•æ‰èƒ½çŸ¥é“ç”¨æˆ·æƒ³è¦çš„æ•°æ®åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šï¼Ÿè¿™å¯ä»¥æ¦‚æ‹¬ä¸ºæ˜¯ä¸€ä¸ª <strong>æœåŠ¡å‘ç°</strong> çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸‰ä¸ªæ–¹æ¡ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b87192d8ea8407d9856ccf677af8cd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=TGxWKVi3aJfYUQlzntbqL1pVTZ0%3D" alt="æœåŠ¡å‘ç°.png" loading="lazy"/></p>
<ol>
<li>å…è®¸è®¿é—®æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹æœ‰è¯¥é”®å€¼ï¼Œåˆ™å¤„ç†è¯¥è¯·æ±‚ï¼Œå¦åˆ™å°†è¯¥è¯·æ±‚è½¬å‘åˆ°é€‚å½“çš„èŠ‚ç‚¹ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•é¿å…äº†ä½¿ç”¨æ³¨å†Œä¸­å¿ƒä¸­é—´ä»¶ï¼Œä½†æ˜¯å®ç°æ¯”è¾ƒå¤æ‚</li>
<li>ä½¿ç”¨åˆ†å¸ƒå¼çš„åè°ƒæœåŠ¡ï¼Œç”¨æˆ·å°†æ‰€æœ‰çš„è¯·æ±‚å‘é€åˆ°è·¯ç”±å±‚ï¼Œç”±è·¯ç”±å±‚å°†è¯¥è¯·æ±‚è½¬å‘åˆ°åˆé€‚çš„èŠ‚ç‚¹</li>
<li>è¦æ±‚ç”¨æˆ·ï¼ˆå®¢æˆ·ç«¯ï¼‰è‡ªå·±çŸ¥é“åˆ†åŒºå’ŒèŠ‚ç‚¹çš„åˆ†é…</li>
</ol>
<p>ä½†æ˜¯è¿™å…¶ä¸­è¿˜éšè—ç€ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä½œå‡ºå†³ç­–çš„ç»„ä»¶ï¼ˆèŠ‚ç‚¹ä¹‹ä¸€ã€è·¯ç”±å±‚æˆ–å®¢æˆ·ç«¯ï¼‰æ˜¯å¦‚ä½•äº†è§£æ•°æ®åœ¨èŠ‚ç‚¹é—´çš„åˆ†é…å˜åŒ–çš„</strong>ï¼Ÿè¿™å°±éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„åè°ƒæœåŠ¡ï¼Œæ¯”å¦‚ä½¿ç”¨ zookeeper æ¥è·Ÿè¸ªå…ƒæ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07a0a953e36c490091340d0925843afb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=0d%2Fya2dm4G8LIQJscxC8jZjh8hA%3D" alt="zookeeperç®¡ç†è·¯ç”±å…ƒæ•°æ®.jpeg" loading="lazy"/></p>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šåœ¨ zookeeper ä¸­è¿›è¡Œæ³¨å†Œï¼Œzookeeper ä¸­ç»´æŠ¤æœ‰èŠ‚ç‚¹åˆ°å„ä¸ªåˆ†åŒºçš„å¯é æ˜ å°„ï¼Œè´Ÿè´£å†³ç­–çš„ç»„ä»¶åœ¨ zookeeper ä¸­è®¢é˜…è¿™ä¸ªæ¶ˆæ¯ã€‚å½“åˆ†åŒºåˆ†é…å‘ç”Ÿæ”¹å˜æ—¶ï¼Œzookeeper å°±ä¼šé€šçŸ¥è´Ÿè´£å†³ç­–çš„ç»„ä»¶æ›´æ–°è·¯ç”±ä¿¡æ¯ï¼Œä½¿å…¶ä¿æŒåœ¨æœ€æ–°çš„çŠ¶æ€ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥åœ¨å„ä¸ªèŠ‚ç‚¹é—´é‡‡ç”¨ <strong>æµè¨€åè®®</strong> æ¥ä¼ æ’­é›†ç¾¤çŠ¶æ€çš„å˜åŒ–ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½ç»´æŠ¤æœ‰æœ€æ–°çš„æ•°æ®è·¯ç”±æ–¹æ¡ˆï¼Œå½“å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šå°†å…¶è½¬å‘åˆ°åˆé€‚çš„åˆ†åŒºèŠ‚ç‚¹ä¸Šï¼ˆå¯¹åº”æœåŠ¡å‘ç°çš„æ–¹æ¡ˆä¸€ï¼‰ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ SOLO Coder å¤šæ™ºèƒ½ä½“ååŒå¤åˆ»å³æ¢¦ AI]]></title>    <link>https://juejin.cn/post/7579453456018030633</link>    <guid>https://juejin.cn/post/7579453456018030633</guid>    <pubDate>2025-12-03T10:02:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579453456018030633" data-draft-id="7579436743259979795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ SOLO Coder å¤šæ™ºèƒ½ä½“ååŒå¤åˆ»å³æ¢¦ AI"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-03T10:02:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TRAE_ai"/> <meta itemprop="url" content="https://juejin.cn/user/3048259110571032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ SOLO Coder å¤šæ™ºèƒ½ä½“ååŒå¤åˆ»å³æ¢¦ AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048259110571032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TRAE_ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:02:23.000Z" title="Wed Dec 03 2025 10:02:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4551cf3fe9f74f669338972fa9bb68b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=Iujs1LDBROJsWNVzFm356QmMkpc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…ï¼šèŒ‰å·ï¼ŒTRAE å¼€å‘è€…ç”¨æˆ·</p>
</blockquote>
<p>ç¬¬ä¸€çœ¼ï¼ˆåˆ«ç»†çœ‹ï¼‰ï¼Œå“ªä¸ªæ˜¯Â <strong>å³æ¢¦</strong> ä¸»é¡µï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8ff8b0534a47faa7b440957144eb37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=xsMve7dp8U5kBfklhjVmuGQns%2BI%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0de5531bf36f44cb9cae0850068fffb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=uAbW3MtgbMm%2FdL2OvHJ9m1sFoow%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>èƒŒæ™¯ä»‹ç»</strong></h2>
<p>SOLO Coder æ”¯æŒè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ™ºèƒ½ä½“ï¼Œè¿™ä¸ºå›¢é˜Ÿåä½œå¼€å‘æä¾›äº†æ–°çš„å¯èƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fd5714ed1a44940bee2c608a84f92a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=jq9Whip2HD2pZqZGEk4%2FiwLca%2BY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1"><strong>æµ‹è¯•å†…å®¹</strong></h3>
<p>æˆ‘ä»¬å°è¯•åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå¼€å‘å›¢é˜Ÿï¼Œè®© SOLO Coder æŒ‡æŒ¥è¿™äº›æ™ºèƒ½ä½“ååŒå®Œæˆä»£ç ç¼–å†™ä»»åŠ¡ã€‚</p>
<p><strong>è¿™é‡Œæˆ‘ç»„å»ºäº†ä¸€ä¸ªå¼€å‘å›¢é˜Ÿï¼š</strong></p>
<p>ï¼ˆå»ºç«‹è‡ªå·±çš„æ™ºèƒ½ä½“ï¼Œæ‰“å¼€ â€œ<strong>å¯è¢«å…¶ä»–æ™ºèƒ½ä½“è°ƒç”¨</strong>â€ï¼‰</p>
<ul>
<li>
<p>äº§å“ç»ç†</p>
</li>
<li>
<p>UI è®¾è®¡å¸ˆ</p>
</li>
<li>
<p>Vite react å‰ç«¯å·¥ç¨‹å¸ˆ</p>
</li>
<li>
<p>Python FastApi åç«¯å·¥ç¨‹å¸ˆ</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f3113c44a7b446e85ac893b89a793f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=RpoTpGX%2FdrL60qUdYmz5kbvtt%2FQ%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1cc461ac6e8427695fae69df0bdb8fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=XISB6uqbIltb7swvhpRuSV0giA4%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d19ee7d1cb4447be80b8835fbeda05c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=0mMfhkei3Oa4fHglmBPqE73NDe8%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfd973b547a84593b05dd3e8f3c94779~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=Qt4lgRIk%2FZnNBAhYiE0YJzjRWLY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2"><strong>é¡¹ç›®è§„èŒƒæ–‡ä»¶</strong></h3>
<p>åœ¨é¡¹ç›®ä¸­åˆ›å»º <em><strong>project_rules.md</strong></em> æ–‡ä»¶ï¼Œç”¨äºä»‹ç»è‡ªå®šä¹‰æ™ºèƒ½ä½“åŠå…¶è°ƒç”¨æ—¶æœºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f956e6e05d834da1b96e0bd4808a983b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=i6zCqmLTucEvIsKNBMpAln%2FkqXw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c03bdcf383d6422aa27f3577460ca07b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=P9a4u99mRsKWvI%2B6ZJ5R9hW%2FP%2B0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>è®¡åˆ’</strong></h2>
<h3 data-id="heading-4"><strong>é¡¹ç›®ï¼š å¯¹æ ‡ å³æ¢¦ AI ï¼Œ å¼€å‘ä¸€ä¸ªç±»ä¼¼çš„ç½‘ç«™</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811ddcf4c9db4f3caf5a8af15f0cba52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=NGGAgOmsA9uQ%2F1O8KmrqHylZOVA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>1.1 ç”Ÿæˆé¡¹ç›®æ–‡æ¡£</strong></h3>
<p>ç›´æ¥è¾“å…¥æç¤ºè¯ï¼ˆä¼˜åŒ–å‰ï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f19e781b87dd414fa1b7114c2a0f6e90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=NG52WLOXZC%2BNIUNOfCciCymvtmo%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–åæç¤ºè¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23c2b092afd748b9bcfd049796409c97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=JupgS0qJnFrVFg%2F68wPTqZUDtIc%3D" alt="" loading="lazy"/></p>
<p>å®Œæ•´æç¤ºè¯å†…å®¹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€å‘ä¸€ä¸ªç±»ä¼¼ https:<span class="hljs-comment">//jimeng.jianying.com/ai-tool/home/ å³æ¢¦AIçš„æ™ºèƒ½ç½‘ç«™å¹³å°ï¼Œå‚è€ƒ project_rules.md ä¸­å®šä¹‰çš„æ™ºèƒ½ä½“ä½¿ç”¨è§„åˆ™ï¼ˆåœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨ä¸åŒçš„æ™ºèƒ½ä½“å®Œæˆä»»åŠ¡ï¼‰ã€‚å…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š1. ç½‘ç«™åŠŸèƒ½éœ€æ±‚ï¼š- å®ç°ä¸å³æ¢¦AIç±»ä¼¼çš„æ ¸å¿ƒAIå·¥å…·åŠŸèƒ½- åŒ…å«ç”¨æˆ·æ³¨å†Œ/ç™»å½•ç³»ç»Ÿ- æä¾›æ™ºèƒ½ä½“åˆ›å»ºå’Œç®¡ç†ç•Œé¢- æ”¯æŒå¤šç§AIæ¨¡å‹é›†æˆ2. æŠ€æœ¯å®ç°è¦æ±‚ï¼š- é‡‡ç”¨ç°ä»£åŒ–çš„Webå¼€å‘æ¡†æ¶- ç¡®ä¿å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒè®¾å¤‡- å®ç°å®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶- ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Œç¡®ä¿æµç•…çš„ç”¨æˆ·ä½“éªŒ3. å¼€å‘è§„èŒƒï¼š- ä¸¥æ ¼éµå¾ª project_rules.md ä¸­å®šä¹‰çš„æ™ºèƒ½ä½“ä½¿ç”¨è§„åˆ™- ç¼–å†™æ¸…æ™°çš„ä»£ç æ³¨é‡Š- å®ç°å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•4. æµ‹è¯•è¦æ±‚ï¼š- è¿›è¡Œå…¨é¢çš„åŠŸèƒ½æµ‹è¯•- åŒ…æ‹¬è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•- æ€§èƒ½å‹åŠ›æµ‹è¯•- å®‰å…¨æ€§æµ‹è¯•5. äº¤ä»˜ç‰©ï¼š- å®Œæ•´çš„æºä»£ç - éƒ¨ç½²æ–‡æ¡£- ç”¨æˆ·æ‰‹å†Œ- æµ‹è¯•æŠ¥å‘Š</span>
</code></pre>
<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<p>SOLO Coder åˆ†åˆ«è°ƒç”¨ 4 ä¸ªæ™ºèƒ½ä½“ï¼Œç”Ÿæˆäº† <strong>å³æ¢¦ AI é£æ ¼æ™ºèƒ½ç½‘ç«™å¹³å°å®ç°è®¡åˆ’ã€‚md</strong> æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10a5becb8ec2440fbe6df1b3db32d1a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=BP%2FO2BGL0ZzEFdFttHr5mR0MFVI%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d08496951d64b59a159f88d95c5a0d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=9xjN2cWcuncm8qEPbcfn4z%2BE7vk%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5621c06fa35c41e8a4f42879d657273d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=lwnIufTSZ4lZhtO8IARkbTxAr0I%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6"><strong>1.2 é¡¹ç›®æ–‡æ¡£è¯„å®¡</strong></h3>
<p>SOLO Coder æ•´åˆå„æ–¹æ„è§ç”Ÿæˆé¡¹ç›®æ–‡æ¡£åï¼Œæˆ‘ä»¬è®©æ¯ä¸ªæ™ºèƒ½ä½“è¿›è¡Œ review å¹¶æå‡ºä¼˜åŒ–å»ºè®®ã€‚</p>
<h4 data-id="heading-7"><strong>åç«¯å·¥ç¨‹å¸ˆ Review</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cf8b6b721dc49a19396c5cdcaeee0a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=Wfz0hLkA5CEbnt%2BISVnFTuSgStw%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee2b965553624e2abd3e4357a95e2634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=FTTSwUTZQtmiwmHY3qii%2BR4hKC0%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ™ºèƒ½ä½“ç»™å‡ºçš„æ„è§ï¼Œå†ç»“åˆæˆ‘ä»¬è‡ªå·±çš„æƒ³æ³•ï¼Œç»™å‡ºä¸€ä¸ªå±€éƒ¨ä¿®è®¢æ„è§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">åç«¯å®¡æ ¸æ„è§ï¼š

æŠ€æœ¯é€‰å‹
- FastAPI + PostgreSQL + é˜Ÿåˆ—ï¼ˆRedis/RabbitMQï¼‰+ OpenTelemetry çš„ç»„åˆåˆç†ä¸”æˆç†Ÿ
- ä½¿ç”¨Coze å·¥ä½œæµå®ç°æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€å¤šå›¾èåˆ

æ¥å£è§„èŒƒå®¡æŸ¥

- RESTfulä¸€è‡´æ€§
  - å»ºè®®ç»Ÿä¸€ç‰ˆæœ¬å‘½åç©ºé—´ <span class="hljs-string">'/api/v1'</span> ï¼›è§„èŒƒåˆ†é¡µ/æ’åº/è¿‡æ»¤å‚æ•°é”®åä¸è¯­ä¹‰ï¼›åœ¨ OpenAPI ä¸­å£°æ˜ç»Ÿä¸€é”™è¯¯å“åº”ç»“æ„ï¼š { code, message, details?, request_id } ã€‚
  - ç”Ÿæˆç¼–æ’ç«¯ç‚¹å»ºè®®ï¼š
    - POST /inference ï¼ˆæ”¯æŒ idempotency_key ï¼Œè¿”å›ä»»åŠ¡IDï¼‰
    - GET /inference/{<span class="hljs-built_in">id</span>} ï¼ˆçŠ¶æ€ä¸ç»“æœï¼‰
    - GET /inference/{<span class="hljs-built_in">id</span>}/stream ï¼ˆSSE æµå¼äº‹ä»¶ï¼‰
    - POST /inference/{<span class="hljs-built_in">id</span>}/cancel ã€ POST /inference/{<span class="hljs-built_in">id</span>}/retry
    - ç›´ä¼ ç­¾åï¼š POST /assets/upload-signature ï¼Œå¹¶æä¾›ä¸Šä¼ å®Œæˆ callback
  - åˆè§„å·¥ä½œæµæ¥å£ï¼ˆçŠ¶æ€æœºï¼‰ï¼š
    - POST /compliance/check ã€ GET /compliance/{<span class="hljs-built_in">id</span>} ã€ POST /compliance/{<span class="hljs-built_in">id</span>}/approve ã€ POST /compliance/{<span class="hljs-built_in">id</span>}/reject
    - å®¡è®¡æŸ¥è¯¢ä¸å¯¼å‡ºï¼š GET /audits ï¼ˆæ”¯æŒè¿‡æ»¤ï¼‰
    
å®‰å…¨æ€§è®¾è®¡
- è®¤è¯æˆæƒç»†åŒ–ä½œç”¨åŸŸï¼š agents:<span class="hljs-built_in">read</span>/write ã€ inference:submit/cancel ã€ compliance:review ã€ assets:upload/read ï¼›API Key ä½œç”¨åŸŸä¸ç§Ÿæˆ·éš”ç¦»éœ€æ˜ç¡®ï¼›é«˜é£é™©æ“ä½œåŠ äºŒæ¬¡ç¡®è®¤æˆ–å¼ºå®¡è®¡ã€‚
- é€Ÿç‡é™åˆ¶ä¸é…é¢ï¼šæŒ‰ç”¨æˆ·/ç§Ÿæˆ·/API Key/æ¨¡å‹ç»´åº¦è¿”å›æ ‡å‡† 429 ä¸ Retry-After ï¼Œæš´éœ²é…é¢æŸ¥è¯¢ç«¯ç‚¹ï¼›CSRFã€CORS ç™½åå•ã€HttpOnly + SameSite Cookieå»ºè®®ä¿æŒã€‚

æ•°æ®åº“è®¾è®¡å»ºè®®

- æ¨¡å‹åˆç†æ€§
  - æ‰€æœ‰ä¸»è¡¨å»ºè®®åŠ å…¥ tenant_id ä¸å®¡è®¡å­—æ®µï¼ˆ created_at , updated_at , created_by ï¼‰ï¼Œæ”¯æŒè½¯åˆ é™¤ï¼›ç»Ÿä¸€æšä¸¾/çŠ¶æ€æœºå­—æ®µï¼ˆå¦‚ task_status ï¼‰ã€‚
  - å”¯ä¸€ä¸å¤–é”®çº¦æŸï¼šåŒç§Ÿæˆ· agents.name å”¯ä¸€ï¼› api_keys å”¯ä¸€ï¼ˆå“ˆå¸Œå­˜å‚¨ï¼ŒçŠ¶æ€/è¿‡æœŸï¼‰ï¼›è¯·æ±‚/å“åº”è¡¨å†—ä½™å…³é”®å­—æ®µï¼ˆ model_provider , model_name , cost_cents , tokens_input/output ï¼‰ã€‚
- ç´¢å¼•ä¸æŸ¥è¯¢ä¼˜åŒ–
  - å¤§è¡¨åˆ†åŒºä¸ç´¢å¼•ï¼š inference_requests/responses , audit_logs/event_logs æŒ‰æ—¶é—´æˆ–ç§Ÿæˆ·åˆ†åŒºï¼›å»ºç«‹å¸¸ç”¨ç´¢å¼•ï¼ˆ status , created_at , user_id/agent_id ï¼‰ï¼Œå¿…è¦æ—¶éƒ¨åˆ†ç´¢å¼•ï¼ˆå¦‚ status=<span class="hljs-string">'running'</span> ï¼‰ã€‚
  - JSONBç­–ç•¥ï¼šæç¤ºä¸åŸå§‹å“åº”ç”¨ JSONB å­˜å‚¨ï¼Œå†—ä½™æ£€ç´¢å…³é”®å­—æ®µï¼›é¿å…æ·±å±‚åµŒå¥—å¯¼è‡´å¤æ‚æŸ¥è¯¢ï¼›ä¸ºå¸¸ç”¨æŸ¥è¯¢å»ºç«‹è¡¨è¾¾å¼ç´¢å¼•ã€‚
- äº‹åŠ¡ä¸ä¸€è‡´æ€§
  - å¼•å…¥ Outbox è¡¨ + æ¶ˆæ¯å‘å¸ƒå™¨ï¼Œç¡®ä¿æ•°æ®åº“å†™å…¥ä¸é˜Ÿåˆ—æ¶ˆæ¯çš„ä¸€è‡´æ€§ï¼›å¿…è¦åœºæ™¯ä½¿ç”¨ Saga è¡¥å¿æµç¨‹ï¼ˆå¦‚ç”Ÿæˆå¤±è´¥åçš„èµ„äº§æ¸…ç†ï¼‰ã€‚
  - ä»»åŠ¡å°è´¦ï¼š tasks/task_runs åšä¸šåŠ¡æ€ä¸å®¡è®¡ï¼›åŠ å…¥ idempotency_key å»é‡ï¼›åˆ¶å®š TTL/å½’æ¡£/å‹ç¼©ç­–ç•¥ã€‚
  - å‘é‡ç´¢å¼•ï¼šç‹¬ç«‹ schemaï¼ˆ vector_indexes , vectors ï¼‰ï¼Œè®°å½•ç‰ˆæœ¬ä¸æ„å»ºå‚æ•°ï¼Œè®¾è®¡æ‰¹é‡å†™å…¥ä¸é‡å»ºæµç¨‹ï¼Œé¿å…ä¸äº‹åŠ¡çƒ­ç‚¹è¡¨è€¦åˆã€‚
</code></pre>
<h4 data-id="heading-8"><strong>å‰ç«¯å·¥ç¨‹å¸ˆ Review</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06005da05e8f40ee8ac6166a40094d69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=R780oRQxNefrk0D0gtHv6PmlYSs%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adeac06636d648a4afbd91e1731652b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=xaUBvZmiVP18IZch5G6tTuMe1hI%3D" alt="" loading="lazy"/></p>
<p><strong>è¡¥å……æ„è§</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å‰ç«¯å®¡æ ¸æ„è§ï¼š

<span class="hljs-strong">**ä»£ç è´¨é‡**</span>
<span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šæ˜ç¡®é‡‡ç”¨ <span class="hljs-code">`React + TypeScript + Vite`</span>ã€<span class="hljs-code">`TanStack Query`</span>ã€<span class="hljs-code">`Vitest/Playwright`</span>ï¼Œå¹¶æå‡ºä¸¥æ ¼ <span class="hljs-code">`ESLint/Prettier/Husky`</span> è§„èŒƒä¸ç»“æ„åŒ–æ—¥å¿—ï¼›å¼ºè°ƒé”™è¯¯åè®®ä¸ A11yï¼Œä½“ç°å·¥ç¨‹åŒ–æ„è¯†ã€‚
<span class="hljs-bullet">-</span> é£é™©ä¸ç¼ºå£ï¼š
<span class="hljs-bullet">  -</span> TypeScriptæœªæ˜ç¡®â€œä¸¥æ ¼æ¨¡å¼â€ä¸ç±»å‹è¾¹ç•Œï¼ˆDTO/Domain/Component Propsçš„ç±»å‹åˆ†å±‚ã€<span class="hljs-code">`noImplicitAny`</span>ã€<span class="hljs-code">`strictNullChecks`</span>ç­‰ï¼‰ã€‚
<span class="hljs-bullet">  -</span> å‰ç«¯é”™è¯¯è¾¹ç•Œä¸å…¨å±€é”™è¯¯å±•ç¤ºç­–ç•¥ä»…æ¦‚å¿µæè¿°ï¼Œç¼ºå°‘å¯¹å¼‚æ­¥è¾¹ç•Œï¼ˆ<span class="hljs-code">`query`</span> é”™è¯¯ã€è·¯ç”±çº§é”™è¯¯ï¼‰ä¸å¯æ¢å¤ç­–ç•¥çš„ç»†åŒ–ã€‚
<span class="hljs-bullet">  -</span> UIåº“å¹¶è¡Œæåˆ° Radix/Tailwind/MUI/AntDï¼Œå­˜åœ¨è®¾è®¡ä¸€è‡´æ€§ä¸æ ·å¼å†²çªé£é™©ï¼Œéœ€ç¡®å®šå”¯ä¸€åŸºç¡€åŸè¯­ä¸æ ·å¼æ–¹æ¡ˆã€‚
<span class="hljs-bullet">  -</span> æ—¥å¿—ä¸åŸ‹ç‚¹æœªæ˜ç¡®å‰ç«¯é‡‡é›†è§„èŒƒï¼ˆäº‹ä»¶æ¨¡å‹ã€å­—æ®µå­—å…¸ã€éšç§è„±æ•ç­–ç•¥ï¼‰ï¼Œä¸åç«¯ <span class="hljs-code">`trace_id`</span> è´¯é€šç»†èŠ‚ä¸è¶³ã€‚
<span class="hljs-bullet">-</span> å»ºè®®ä¸éªŒè¯é¡¹ï¼š
<span class="hljs-bullet">  -</span> å¯ç”¨å¹¶å¼ºåˆ¶ <span class="hljs-code">`tsconfig`</span> ä¸¥æ ¼é€‰é¡¹ï¼Œå®šä¹‰å‰åç«¯å…±äº« <span class="hljs-code">`types`</span> åŒ…æˆ– OpenAPI ç”Ÿæˆçš„å®¢æˆ·ç«¯ç±»å‹ï¼Œå‡å°‘æ¥å£æ¼‚ç§»ã€‚
<span class="hljs-bullet">  -</span> è®¾è®¡â€œé”™è¯¯å‘ˆç°å±‚çº§â€ä¸â€œé”™è¯¯æ¢å¤è¡Œä¸ºçŸ©é˜µâ€ï¼šç»„ä»¶å±€éƒ¨é”™è¯¯â†’é¡µé¢çº§é”™è¯¯â†’åº”ç”¨çº§é”™è¯¯è¾¹ç•Œï¼›ç»“åˆ <span class="hljs-code">`TanStack Query`</span> çš„ <span class="hljs-code">`retry`</span>ã€<span class="hljs-code">`staleTime`</span>ã€<span class="hljs-code">`error`</span> çŠ¶æ€ã€‚
<span class="hljs-bullet">  -</span> ç»Ÿä¸€ UI åŸºç¡€ï¼ˆå»ºè®®ï¼šRadix + Tailwindï¼‰ï¼Œå»ºç«‹è®¾è®¡ä»¤ç‰Œï¼ˆé¢œè‰²/é—´è·/é˜´å½±/å±‚çº§ï¼‰ä¸å¯è®¿é—®æ€§ç»„ä»¶åº“åŸºçº¿ã€‚
<span class="hljs-bullet">  -</span> å‰ç«¯æ—¥å¿—/åŸ‹ç‚¹è§„èŒƒï¼šçº¦å®šå­—æ®µï¼ˆ<span class="hljs-code">`trace_id/user_id/tenant_id/page/feature/action`</span>ï¼‰ã€è„±æ•ç­–ç•¥ã€é‡‡é›†SDKä¸ä¸ŠæŠ¥é‡‡æ ·ç‡ã€‚


<span class="hljs-strong">**åŠŸèƒ½å®ç°**</span>
<span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šMVPé—­ç¯åˆç†ï¼ˆç™»å½•â†’æ™ºèƒ½ä½“â†’æ¨¡å‹â†’ç”Ÿæˆâ†’åˆè§„â†’å‘å¸ƒï¼‰ï¼Œèšç„¦â€œç”Ÿæˆç¼–æ’â€ä¸â€œæ™ºèƒ½ä½“å·¥ä½œå°â€ï¼Œå¹¶è€ƒè™‘åˆè§„ä¸åˆ†å‘ã€‚
<span class="hljs-bullet">-</span> é£é™©ä¸ç¼ºå£ï¼š
<span class="hljs-bullet">  -</span> ç™»å½•æµç¨‹åŒ…å«å¤šæ–¹å¼ï¼ˆå¯†ç /OAuth2/WebAuthn/TOTPï¼‰ï¼ŒMVPé˜¶æ®µè¿‡äºå®½ï¼›å»ºè®®å…ˆæ”¶æ•›ä¸ºå¯†ç ç™»å½• + OAuth2ï¼ˆPKCEï¼‰ã€‚
<span class="hljs-bullet">  -</span> â€œç”Ÿæˆç¼–æ’â€æ¶‰åŠæç¤ºå·¥ç¨‹ã€å‚è€ƒç´ æã€å·®åˆ†é¢„è§ˆä¸ A/B æµ‹è¯•ï¼Œå‰ç«¯äº¤äº’å¤æ‚åº¦é«˜ï¼›ç¼ºå°‘é€æ­¥äº¤ä»˜åˆ‡ç‰‡ï¼ˆå…ˆå•å›¾ç”Ÿæˆâ†’å†å¼•å…¥å·®åˆ†â†’å†å¼•å…¥ A/Bï¼‰ã€‚
<span class="hljs-bullet">  -</span> åˆè§„ä¸å‘å¸ƒè·¯å¾„æœªç»†åŒ–ç”¨æˆ·æ—…ç¨‹ï¼ˆåˆè§„å¤±è´¥å¤„ç†ã€ç”³è¯‰/ä¿®æ”¹æµç¨‹ã€å‘å¸ƒå¤±è´¥å›é€€ä¸é‡è¯•ã€æ¸ é“æˆæƒä¸é€Ÿç‡é™åˆ¶æç¤ºï¼‰ã€‚
<span class="hljs-bullet">  -</span> æ•…äº‹/è§’è‰²å·¥ä½œå°ä¸èµ„äº§ç®¡ç†æ¶‰åŠç‰ˆæœ¬ã€æƒé™ä¸åä½œï¼Œéœ€æ±‚è¾¹ç•Œéœ€æ˜ç¡®ï¼ˆå•äºº/å¤šäººåä½œã€ç‰ˆæœ¬å†»ç»“/å®¡è®¡ï¼‰ã€‚
<span class="hljs-bullet">-</span> å»ºè®®ä¸éªŒè¯é¡¹ï¼š
<span class="hljs-bullet">  -</span> æ˜ç¡® MVP åŠŸèƒ½åˆ‡ç‰‡ä¸é˜¶æ®µéªŒæ”¶æ ‡å‡†ï¼šç™»å½•/è´¦æˆ·â†’å•æ¬¡å›¾ç”Ÿæˆâ†’åŸºæœ¬åˆè§„â†’å¯¼å‡ºï¼›å·®åˆ†ä¸ A/B æ”¾åˆ° Betaã€‚
<span class="hljs-bullet">  -</span> å®šä¹‰å…³é”®ç”¨æˆ·æµçš„çŠ¶æ€æœºä¸é”™è¯¯è·¯å¾„ï¼ˆä¸Šä¼ è¶…é™ã€æ¨¡å‹ä¸å¯ç”¨ã€åˆè§„æ‹’ç»ã€å‘å¸ƒé…é¢è€—å°½ï¼‰ã€‚
<span class="hljs-bullet">  -</span> åœ¨â€œç”Ÿæˆç¼–æ’â€é¡µé¢å¼•å…¥åˆ†æ­¥å¼å‘å¯¼ä¸ä»»åŠ¡è¿›åº¦ï¼ˆSSE/WebSocketï¼‰ï¼Œé˜²æ­¢ç”¨æˆ·æ„ŸçŸ¥ä¸æ˜ç¡®ã€‚
<span class="hljs-bullet">  -</span> å‘å¸ƒæ¸ é“ç­–ç•¥ï¼šå…ˆå¯¼å‡ºæœ¬åœ°æ–‡ä»¶/äº‘å­˜å‚¨é“¾æ¥ï¼Œå†é›†æˆå°‘é‡æ¸ é“ï¼ˆå¦‚å•ä¸€å¹³å°ï¼‰ï¼Œæ§åˆ¶å¤æ‚åº¦ã€‚

<span class="hljs-strong">**æŠ€æœ¯æ–¹æ¡ˆ**</span>
<span class="hljs-bullet">-</span> ä¼˜ç‚¹ï¼šæŠ€æœ¯æ ˆç°ä»£åŒ–ã€çŠ¶æ€åˆ†å±‚æ¸…æ™°ï¼ˆæœåŠ¡ç«¯çŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€åˆ†ç¦»ï¼‰ã€é€šä¿¡ä¸å®‰å…¨ç­–ç•¥å…¨é¢ï¼ˆCSRFã€Cookieã€RBACã€é™æµï¼‰ï¼ŒAIç½‘å…³å…·å¤‡è·¯ç”±/é™çº§/æˆæœ¬ç»Ÿè®¡ã€‚
<span class="hljs-bullet">-</span> é£é™©ä¸ç¼ºå£ï¼š
<span class="hljs-bullet">  -</span> å‰ç«¯æœªæ¶‰åŠ <span class="hljs-code">`SSR/SSG`</span> ä¸å…¬å…±é¡µ SEO/æ€§èƒ½ï¼ˆé¦–é¡µã€å®šä»·ã€å¸®åŠ©ï¼‰ï¼›çº¯CSRå¯èƒ½å½±å“é¦–å±ä¸æœç´¢ã€‚
<span class="hljs-bullet">  -</span> èµ„æºä¼˜åŒ–ç­–ç•¥æœªç»†åŒ–ï¼ˆ<span class="hljs-code">`vite`</span> ä»£ç åˆ†å‰²è¾¹ç•Œã€<span class="hljs-code">`prefetch/preload`</span>ã€å›¾ç‰‡å¤„ç†ä¸å“åº”å¼ç­–ç•¥ã€<span class="hljs-code">`bundle analyzer`</span>ï¼‰ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-code">`TanStack Query`</span> ä¸è·¨é¡µä¸šåŠ¡çŠ¶æ€ï¼ˆRedux/Zustandï¼‰è¾¹ç•Œéœ€æ˜ç¡®ï¼Œé¿å…åŒæºæ•°æ®ä¸ä¸ä¸€è‡´ã€‚
<span class="hljs-bullet">  -</span> å®æ—¶é€šä¿¡ï¼ˆWebSocket/SSEï¼‰ç¼ºå°‘é‡è¿/å¿ƒè·³/å‰ç«¯æ–­çº¿æ¢å¤ç­–ç•¥ï¼›å¹¶å‘è¯·æ±‚ä¸å–æ¶ˆæœºåˆ¶æœªå®šä¹‰ã€‚
<span class="hljs-bullet">  -</span> AIå±‚çš„æµå¼è¾“å‡ºä¸å‰ç«¯æ¸²æŸ“èŠ‚æµæœªæåŠï¼ˆå¤§å“åº”/æµå¼tokenæ¸²æŸ“çš„ UI æ€§èƒ½ä¸å†…å­˜ç®¡ç†ï¼‰ã€‚
<span class="hljs-bullet">-</span> å»ºè®®ä¸éªŒè¯é¡¹ï¼š
<span class="hljs-bullet">  -</span> å…¬å…±é¡µé‡‡ç”¨ <span class="hljs-code">`SSG`</span>ï¼ˆå¦‚ <span class="hljs-code">`vite-plugin-ssr`</span> æˆ–åç»­è¿ç§» <span class="hljs-code">`Next.js`</span>/<span class="hljs-code">`Remix`</span>ï¼‰ï¼Œä¿ç•™åº”ç”¨åŒº CSRï¼Œæå‡ SEO ä¸ LCPã€‚
<span class="hljs-bullet">  -</span> è®¾å®šä»£ç åˆ†å‰²ç­–ç•¥ï¼šè·¯ç”±çº§æ‡’åŠ è½½ + ä¸šåŠ¡æ¨¡å—è¾¹ç•Œï¼ˆç”Ÿæˆç¼–æ’/æ™ºèƒ½ä½“å·¥ä½œå°/åˆè§„å‘å¸ƒï¼‰ï¼Œå¹¶ä½¿ç”¨ <span class="hljs-code">`rollup-visualizer`</span> åšåŒ…ä½“ç›‘æ§ã€‚
<span class="hljs-bullet">  -</span> çŠ¶æ€è¾¹ç•Œè¯´æ˜ï¼šåç«¯æ•°æ®å‡èµ° <span class="hljs-code">`TanStack Query`</span>ï¼Œè·¨é¡µä¸´æ—¶ä¸šåŠ¡æ€èµ°å°å‹ Storeï¼ˆZustandï¼‰ï¼›ä¸¥ç¦å°†åç«¯å“åº”å¤åˆ¶åˆ° Reduxã€‚
<span class="hljs-bullet">  -</span> å®æ—¶é€šä¿¡è§„èŒƒï¼šç»Ÿä¸€ <span class="hljs-code">`EventSource`</span>/WebSocket å°è£…ï¼Œæ”¯æŒæ–­çº¿é‡è¿/æŒ‡æ•°é€€é¿ï¼Œæä¾›è®¢é˜…å–æ¶ˆä¸ä»»åŠ¡æ’¤é”€ã€‚
<span class="hljs-bullet">  -</span> æµå¼æ¸²æŸ“ï¼šå¼•å…¥â€œæ¸è¿›æ¸²æŸ“ä¸å¸§ç‡é™åˆ¶â€ï¼Œå¤§åˆ—è¡¨ä¸å›¾ç‰‡é‡‡ç”¨è™šæ‹ŸåŒ–ä¸å ä½éª¨æ¶ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡ã€‚

<span class="hljs-strong">**æ”¹è¿›å»ºè®®**</span>
<span class="hljs-bullet">-</span> æ¶æ„ä¸è¾¹ç•Œï¼š
<span class="hljs-bullet">  -</span> å‰åç«¯å¥‘çº¦ï¼šå¼•å…¥ OpenAPI/JSON Schema é©±åŠ¨çš„ç±»å‹ç”Ÿæˆä¸æ ¡éªŒï¼›ç‰ˆæœ¬åŒ– APIï¼ˆ<span class="hljs-code">`/v1`</span>ï¼‰ä¸åºŸå¼ƒç­–ç•¥ã€‚
<span class="hljs-bullet">  -</span> æ–‡ä»¶ä¸ç›®å½•ï¼šé‡‡ç”¨â€œæŒ‰ç‰¹æ€§â€ç»“æ„ï¼ˆ<span class="hljs-code">`features/agents`</span>, <span class="hljs-code">`features/generation`</span>, <span class="hljs-code">`features/compliance`</span>ï¼‰ï¼Œåˆ†ç¦» <span class="hljs-code">`ui`</span>ï¼ˆåŸå­ç»„ä»¶ï¼‰ã€<span class="hljs-code">`hooks`</span>ã€<span class="hljs-code">`services`</span>ã€<span class="hljs-code">`stores`</span>ã€<span class="hljs-code">`routes`</span>ã€‚
<span class="hljs-bullet">-</span> æ€§èƒ½ä¸ç›‘æ§ï¼š
<span class="hljs-bullet">  -</span> å‰ç«¯æ€§èƒ½ç›‘æ§ï¼š<span class="hljs-code">`Web Vitals`</span> + ç«¯åˆ°ç«¯è¿½è¸ªï¼ˆ<span class="hljs-code">`trace_id`</span>è´¯é€šï¼‰ï¼Œç»˜åˆ¶â€œæ€§èƒ½é¢„ç®—â€ï¼ˆåŒ…ä½“ã€LCPã€INPç›®æ ‡ï¼‰ã€‚
<span class="hljs-bullet">  -</span> èµ„æºä¼˜åŒ–ï¼šå“åº”å¼å›¾ç‰‡ï¼ˆ<span class="hljs-code">`&lt;img srcset&gt;`</span> æˆ– <span class="hljs-code">`next-gen`</span> æ ¼å¼ï¼‰ã€æ‡’åŠ è½½ã€é¢„å–çƒ­ç‚¹è·¯ç”±ä¸æ•°æ®ã€‚
<span class="hljs-bullet">-</span> å®‰å…¨ä¸åˆè§„ï¼š
<span class="hljs-bullet">  -</span> å‰ç«¯å®‰å…¨å¤´ä¸ç­–ç•¥ï¼š<span class="hljs-code">`CSP`</span>ã€<span class="hljs-code">`XFO`</span>ã€<span class="hljs-code">`SRI`</span>ã€<span class="hljs-code">`SameSite`</span> Cookieã€<span class="hljs-code">`Referrer-Policy`</span>ï¼›ç¬¬ä¸‰æ–¹ SDK çš„é£é™©è¯„ä¼°ã€‚
<span class="hljs-bullet">  -</span> éšç§æ²»ç†ï¼šæœ€å°åŒ–é‡‡é›†ã€ç”¨æˆ·åŒæ„ç®¡ç†ï¼ˆCookies/è¿½è¸ªï¼‰ï¼Œæ•°æ®å¯¼å‡ºä¸åˆ é™¤æµç¨‹å¯è§†åŒ–ã€‚
<span class="hljs-bullet">-</span> æµ‹è¯•ä¸è´¨é‡ï¼š
<span class="hljs-bullet">  -</span> æµ‹è¯•åˆ†å±‚ï¼šç»„ä»¶è¡Œä¸ºï¼ˆæ— å¿«ç…§æ»¥ç”¨ï¼‰ã€è·¯ç”±å…³é”®æµç¨‹çš„ E2Eï¼ˆç™»å½•/ç”Ÿæˆ/å¯¼å‡ºï¼‰ã€åˆè§„å¤±è´¥å›å½’ã€‚
<span class="hljs-bullet">  -</span> æµ‹è¯•æ•°æ®ï¼šå·¥å‚ä¸å›ºå®šç§å­ï¼Œå‰ç«¯ <span class="hljs-code">`msw`</span> æ¨¡æ‹Ÿæ¥å£ï¼ŒCI ä¸­å¼•å…¥è·¨æµè§ˆå™¨çŸ©é˜µä¸é˜ˆå€¼å‘Šè­¦ã€‚
<span class="hljs-bullet">-</span> äº¤ä»˜èŠ‚å¥ï¼š
<span class="hljs-bullet">  -</span> æ”¶æ•›ç™»å½•ä¸ç”ŸæˆåŠŸèƒ½ï¼Œå¿«é€Ÿæ‰“é€šé—­ç¯ï¼›åç»­é€æ­¥å¼•å…¥å·®åˆ†é¢„è§ˆã€A/Bæµ‹è¯•ä¸è§†é¢‘å¤šå¸§ã€‚
<span class="hljs-bullet">  -</span> å»ºç«‹â€œç”¨ç ”åé¦ˆâ†’äº§å“â†’è®¾è®¡â†’å‰ç«¯â†’åç«¯â†’æµ‹è¯•â€çš„è¿­ä»£çœ‹æ¿ï¼Œæ˜ç¡®æ¯æœŸç›®æ ‡ä¸å›å½’æ¸…å•ã€‚

ä»¥ä¸Šè¯„å®¡åŸºäºè®¡åˆ’æ–‡æ¡£å½“å‰æè¿°ï¼Œå»ºè®®åœ¨è¿›å…¥å¼€å‘å‰è¡¥é½ç±»å‹ä¸¥è°¨æ€§ã€çŠ¶æ€è¾¹ç•Œã€SSR/SSGä¸æ€§èƒ½é¢„ç®—ã€é”™è¯¯æ¢å¤çŸ©é˜µã€æ—¥å¿—/åŸ‹ç‚¹è§„èŒƒï¼Œä»¥åŠ MVP åˆ‡ç‰‡çš„äº¤ä»˜å‡†åˆ™ï¼Œä»¥é™ä½å¤æ‚æ€§å¹¶æå‡é¦–ç‰ˆå¯ç”¨æ€§ä¸è´¨é‡ã€‚
<span class="hljs-code">        
            
toolName: agent_finish
            
status: success
          
          
**å®¡æŸ¥ç»“è®º**
- æ–‡æ¡£æ˜¯æŠ€æœ¯å®ç°è®¡åˆ’è€Œéæºä»£ç ï¼Œå‰ç«¯æ–¹æ¡ˆæ€»ä½“ç°ä»£ã€åˆ†å±‚æ¸…æ™°ä¸”è¦†ç›–å¯è®¿é—®æ€§ä¸å®‰å…¨ï¼Œä½†åœ¨ç±»å‹ä¸¥æ ¼æ€§ã€çŠ¶æ€è¾¹ç•Œã€æµå¼æ¸²æŸ“ã€SSR/SSGä¸å®æ—¶é€šä¿¡ç»†èŠ‚ä¸Šå­˜åœ¨ç©ºç™½ï¼ŒUIåº“é€‰æ‹©éœ€è¦ç»Ÿä¸€ï¼ŒMVPèŒƒå›´éœ€æ”¶æ•›ä»¥é™ä½åˆç‰ˆå¤æ‚åº¦ä¸é£é™©ã€‚
</span>
<span class="hljs-strong">**ä»£ç è´¨é‡æ£€æŸ¥**</span>
<span class="hljs-bullet">-</span> æ¨¡å—åŒ–ä¸ç»“æ„
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šåŒæ—¶æåˆ° Radix/Tailwind/MUI/AntDï¼Œå¤šUIæ–¹æ¡ˆå¹¶è¡Œä¼šå¯¼è‡´è®¾è®¡ä»¤ç‰Œä¸æ ·å¼å†²çªã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šç»„ä»¶é£æ ¼ä¸ä¸€è‡´ã€æ ·å¼è¦†ç›–å›°éš¾ã€å¯ç»´æŠ¤æ€§ä¸‹é™ã€‚
<span class="hljs-bullet">  -</span> å»ºè®®ï¼šç»Ÿä¸€åŸºç¡€åŸè¯­ä¸æ ·å¼ï¼ˆå»ºè®® Radix + Tailwindï¼‰ï¼Œå»ºç«‹è®¾è®¡ä»¤ç‰Œï¼ˆé¢œè‰²/é—´è·/é˜´å½±/å±‚çº§ï¼‰ä¸ä¸»é¢˜ä½“ç³»ã€‚
<span class="hljs-bullet">-</span> ç±»å‹ä¸é”™è¯¯æ²»ç†
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šæœªæ˜ç¡® TypeScript ä¸¥æ ¼æ¨¡å¼ä¸ç±»å‹è¾¹ç•Œï¼ˆDTO/Domain/Props çš„åˆ†å±‚ï¼‰ã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šæ¥å£æ¼‚ç§»ã€ç©ºå€¼å¼‚å¸¸ä¸éšå¼ anyï¼Œå‰Šå¼±é™æ€ä¿éšœã€‚
<span class="hljs-bullet">  -</span> å»ºè®®ï¼šå¯ç”¨ <span class="hljs-code">`strict`</span>ã€<span class="hljs-code">`noImplicitAny`</span>ã€<span class="hljs-code">`strictNullChecks`</span>ï¼›å‰åç«¯å¥‘çº¦ç”¨ OpenAPI/JSON Schema ç”Ÿæˆç±»å‹ã€‚
<span class="hljs-bullet">-</span> å†—ä½™ä¸æ€§èƒ½ç“¶é¢ˆ
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼š<span class="hljs-code">`TanStack Query`</span> + Redux/Zustand è¾¹ç•Œæœªæ˜ç¡®ï¼Œå¯èƒ½å‡ºç°åŒæºçŠ¶æ€ï¼›æµå¼è¾“å‡ºæœªè®¾è®¡èŠ‚æµã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šé‡å¤æ•°æ®ã€æ¸²æŸ“è¿‡å¤šå¯¼è‡´å¡é¡¿ï¼Œå†…å­˜å¢é•¿æ— ä¸Šé™ã€‚
<span class="hljs-bullet">  -</span> å»ºè®®ï¼šæœåŠ¡ç«¯æ•°æ®ç»Ÿä¸€èµ° Queryï¼›è·¨é¡µä¸šåŠ¡æ€ç”¨è½»é‡ Storeï¼ˆZustandï¼‰ï¼›å®ç°æµå¼æ¸è¿›æ¸²æŸ“ä¸å¸§ç‡é™åˆ¶ã€‚

<span class="hljs-strong">**åŠŸèƒ½å®ç°è¯„ä¼°**</span>
<span class="hljs-bullet">-</span> å®Œæ•´æ€§
<span class="hljs-bullet">  -</span> ç°æœ‰è®¡åˆ’è¦†ç›–â€œç™»å½•â†’æ™ºèƒ½ä½“â†’ç”Ÿæˆâ†’åˆè§„â†’å¯¼å‡º/å‘å¸ƒâ€çš„é—­ç¯ï¼Œå¹¶å‚è€ƒå³æ¢¦AIçš„å¤šå‚è€ƒé£æ ¼ã€å·®åˆ†é¢„è§ˆã€A/Bæµ‹è¯•ä¸é•¿é•œå¤´æ‰©å±•ï¼Œæ–¹å‘æ­£ç¡®ã€‚
<span class="hljs-bullet">-</span> äº¤äº’é€»è¾‘
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šç”Ÿæˆç¼–æ’äº¤äº’å¤æ‚ï¼ˆæç¤ºå·¥ç¨‹/å‚è€ƒç´ æ/A-Bæµ‹è¯•ï¼‰ï¼Œç¼ºå°‘åˆ†æ­¥äº¤ä»˜åˆ‡ç‰‡ä¸é”™è¯¯è·¯å¾„ï¼ˆä¸Šä¼ è¶…é™ã€æ¨¡å‹ä¸å¯ç”¨ã€åˆè§„æ‹’ç»ã€å‘å¸ƒé…é¢è€—å°½ï¼‰ã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šä¸€æ¬¡æ€§å®ç°é£é™©é«˜ï¼Œå‡ºç°è¾¹ç•Œé”™è¯¯æ—¶ç”¨æˆ·æ„ŸçŸ¥ä¸æ¸…ã€‚
<span class="hljs-bullet">  -</span> å»ºè®®ï¼šMVPå…ˆå®ç°å•å›¾ç”Ÿæˆä¸åŸºç¡€åˆè§„ï¼Œå·®åˆ†ä¸A/Bæ”¾åˆ°Betaï¼›å®šä¹‰çŠ¶æ€æœºä¸é”™è¯¯æ¢å¤çŸ©é˜µï¼Œå‰ç«¯ä»¥åˆ†æ­¥å¼å‘å¯¼ä¸ä»»åŠ¡è¿›åº¦ï¼ˆSSE/WebSocketï¼‰å‘ˆç°ã€‚
<span class="hljs-bullet">-</span> å“åº”å¼è®¾è®¡
<span class="hljs-bullet">  -</span> ä¼˜ç‚¹ï¼šæ–­ç‚¹ <span class="hljs-code">`xs/sm/md/lg/xl`</span> å®šä¹‰æ˜ç¡®ï¼Œç§»åŠ¨ä¼˜å…ˆä¸A11yæ„è¯†åˆ°ä½ã€‚
<span class="hljs-bullet">  -</span> æ”¹è¿›ï¼šå¼•å…¥å®¹å™¨æŸ¥è¯¢ä¸æµå¼æ’ç‰ˆï¼Œè¡¨æ ¼åœ¨å°å±åˆ‡æ¢å¡ç‰‡è§†å›¾ï¼›å¯¼èˆªåœ¨ <span class="hljs-code">`xsâ€“sm`</span> ç”¨æŠ½å±‰å¼ä¸å¯è§ç„¦ç‚¹ç®¡ç†ï¼›å›¾ç‰‡ç”¨ <span class="hljs-code">`srcset`</span>/<span class="hljs-code">`webp/avif`</span>ã€‚

<span class="hljs-strong">**æŠ€æœ¯æ–¹æ¡ˆå®¡æŸ¥**</span>
<span class="hljs-bullet">-</span> æ¶æ„åˆç†æ€§
<span class="hljs-bullet">  -</span> ä¼˜ç‚¹ï¼šReact + Vite + TSã€Query ç®¡ç†æœåŠ¡ç«¯çŠ¶æ€ã€è·¯ç”±æ‡’åŠ è½½ä¸é”™è¯¯è¾¹ç•Œã€PWAä¸æ€§èƒ½ç›‘æ§ï¼ˆSentry/Web Vitalsï¼‰æ–¹å‘åˆç†ã€‚
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šæœªæ¶‰åŠå…¬å…±é¡µ SEO/é¦–å±æ€§èƒ½çš„ SSR/SSGï¼›å®æ—¶é€šä¿¡ç¼ºå°‘é‡è¿/å¿ƒè·³ä¸å–æ¶ˆæœºåˆ¶ï¼›å‰ç«¯æ—¥å¿—/åŸ‹ç‚¹è§„èŒƒæœªç»†åŒ–ï¼ˆå­—æ®µå­—å…¸ä¸è„±æ•ï¼‰ã€‚
<span class="hljs-bullet">  -</span> å»ºè®®ï¼šå…¬å…±é¡µé‡‡ç”¨ SSGï¼ˆ<span class="hljs-code">`vite-plugin-ssr`</span> æˆ–åç»­è¯„ä¼° Next.js/Remixï¼‰ï¼Œåº”ç”¨åŒºä¿ç•™CSRï¼›ç»Ÿä¸€ EventSource/WebSocket å°è£…ï¼Œæ”¯æŒæ–­çº¿é‡è¿ä¸ä»»åŠ¡æ’¤é”€ï¼›åˆ¶å®šé‡‡é›†è§„èŒƒï¼ˆ<span class="hljs-code">`trace_id/user_id/tenant_id/page/feature/action`</span>ï¼‰ï¼Œä¸åç«¯è´¯é€šã€‚
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆé€‰æ‹©
<span class="hljs-bullet">  -</span> æ°å½“ï¼šReact 18 + TS + Viteã€TanStack Queryã€react-hook-form + Zodã€‚
<span class="hljs-bullet">  -</span> å¯é€‰ä¼˜åŒ–ï¼šè¥é”€é¡µéœ€è¦å¼ºSEOæ—¶è€ƒè™‘ Next.js App Routerï¼›æ•°æ®å¯†é›†å‹åœºæ™¯ç”¨ MUI/AntDï¼Œä½†é¿å…ä¸ Radix å¹¶è¡Œã€‚

<span class="hljs-strong">**æå‡ºæ”¹è¿›å»ºè®®**</span>
<span class="hljs-bullet">-</span> ä»£ç ä¼˜åŒ–
<span class="hljs-bullet">  -</span> ç›®å½•ç»“æ„ï¼šæŒ‰ç‰¹æ€§ç»„ç»‡ï¼ˆ<span class="hljs-code">`features/agents`</span>, <span class="hljs-code">`features/generation`</span>, <span class="hljs-code">`features/compliance`</span>ï¼‰ï¼Œåˆ†ç¦» <span class="hljs-code">`ui`</span> åŸå­ç»„ä»¶ã€<span class="hljs-code">`hooks`</span>ã€<span class="hljs-code">`services`</span>ã€<span class="hljs-code">`stores`</span>ã€<span class="hljs-code">`routes`</span>ã€‚
<span class="hljs-bullet">  -</span> Query ç­–ç•¥ï¼šè®¾ç½® <span class="hljs-code">`staleTime`</span>/<span class="hljs-code">`cacheTime`</span>ã€ç»Ÿä¸€ <span class="hljs-code">`queryKey`</span> å‘½åã€é”™è¯¯é‡è¯•é€€é¿ï¼›åˆ—è¡¨ä¸è¯¦æƒ…ä¸€è‡´æ€§é€šè¿‡ <span class="hljs-code">`setQueryData`</span>ã€‚
<span class="hljs-bullet">  -</span> è¡¨å•ï¼š<span class="hljs-code">`react-hook-form + Zod`</span> å®ç°å°±åœ°æ ¡éªŒä¸é”™è¯¯æç¤ºï¼›å­—æ®µåˆ†ç»„ä¸å¸®åŠ©æ–‡æœ¬ä¸€è‡´ã€‚
<span class="hljs-bullet">-</span> æ½œåœ¨é—®é¢˜é¢„è­¦
<span class="hljs-bullet">  -</span> å¤šUIåº“å¹¶å­˜å¯¼è‡´å†²çªï¼›åŒçŠ¶æ€æºå¯¼è‡´ä¸ä¸€è‡´ï¼›æµå¼è¾“å‡ºçš„å¤§å“åº”é˜»å¡UIï¼›å…¬å…±é¡µä»…CSRå½±å“LCP/SEOã€‚
<span class="hljs-bullet">  -</span> é¢„æ¡ˆï¼šç»Ÿä¸€UIä¸çŠ¶æ€è¾¹ç•Œã€æµå¼æ¸²æŸ“èŠ‚æµä¸åˆ†å—èšåˆã€è¥é”€é¡µ SSGã€ç›‘æ§ä¸é˜ˆå€¼å‘Šè­¦ã€‚
<span class="hljs-bullet">-</span> æ€§èƒ½æå‡æ–¹æ¡ˆ
<span class="hljs-bullet">  -</span> ä»£ç åˆ†å‰²ï¼šè·¯ç”±çº§ä¸ç‰¹æ€§çº§åŠ¨æ€å¯¼å…¥ï¼›çƒ­ç‚¹è·¯å¾„ <span class="hljs-code">`prefetch`</span> ä¸å…³é”®èµ„æº <span class="hljs-code">`preload`</span>ã€‚
<span class="hljs-bullet">  -</span> åˆ—è¡¨ä¸å›¾åƒï¼š<span class="hljs-code">`react-window`</span> è™šæ‹ŸåŒ–ï¼›å“åº”å¼å›¾ç‰‡ä¸æ‡’åŠ è½½ï¼›é¦–å±å…³é”®å›¾åƒä¼˜å…ˆåŠ è½½ã€‚
<span class="hljs-bullet">  -</span> åŒ…åˆ†æï¼š<span class="hljs-code">`rollup-plugin-visualizer`</span> ç›‘æ§ï¼›é”å®šä¾èµ–ç‰ˆæœ¬ä¸æŒ‰éœ€å¯¼å…¥ï¼›è®¾å®šâ€œæ€§èƒ½é¢„ç®—â€ï¼ˆåŒ…ä½“/LCP/INPç›®æ ‡ï¼‰ã€‚

<span class="hljs-strong">**å…·ä½“é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ**</span>
<span class="hljs-bullet">-</span> UIåº“å¹¶è¡Œ
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šRadix/Tailwind/MUI/AntD å¹¶è¡Œã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šè§†è§‰ä¸€è‡´æ€§ä¸æ ·å¼å†²çªã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šé€‰å®š Radix + Tailwindï¼›å¦‚éœ€æ•°æ®å¯†é›†å‹ç»„ä»¶ï¼ŒæŒ‰éœ€å¼•å…¥ MUI/AntD å¹¶åšæ ·å¼éš”ç¦»ã€‚
<span class="hljs-bullet">-</span> TypeScriptä¸¥æ ¼æ€§
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šæœªæ˜ç¡®ä¸¥æ ¼é€‰é¡¹ä¸ç±»å‹ç”Ÿæˆã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šç±»å‹å®‰å…¨ä¸è¶³ã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šå¯ç”¨ TS ä¸¥æ ¼é€‰é¡¹ï¼Œä½¿ç”¨ OpenAPI ç”Ÿæˆå‰ç«¯å®¢æˆ·ç«¯ä¸ç±»å‹ã€‚
<span class="hljs-bullet">-</span> çŠ¶æ€è¾¹ç•Œ
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šQuery ä¸ Store è¾¹ç•Œä¸æ¸…ã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šåŒæºä¸ä¸€è‡´ã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šåç«¯æ•°æ®ä»…åœ¨ Queryï¼›è·¨é¡µä¸šåŠ¡æ€ç”¨è½»é‡ Storeï¼›ç¦æ­¢å¤åˆ¶å“åº”åˆ° Reduxã€‚
<span class="hljs-bullet">-</span> SSR/SSGä¸SEO
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šå…¬å…±é¡µé¦–å±ä¸SEOé£é™©ã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šLCPé«˜ä¸æœç´¢æ”¶å½•å·®ã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šå…¬å…±é¡µ SSGï¼ˆåç»­å¯è¿ç§» Next.jsï¼‰ï¼›åº”ç”¨åŒº CSRã€‚
<span class="hljs-bullet">-</span> å®æ—¶é€šä¿¡ä¸å–æ¶ˆ
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šç¼ºå°‘é‡è¿/å¿ƒè·³ä¸ä»»åŠ¡å–æ¶ˆã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šèµ„æºå ç”¨ä¸ä½“éªŒä¸‹é™ã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šç»Ÿä¸€äº‹ä»¶ç½‘å…³å°è£…ï¼ŒæŒ‡æ•°é€€é¿é‡è¿ã€å¿ƒè·³ä¿æ´»ã€æ”¯æŒ <span class="hljs-code">`cancel`</span> åè®®ã€‚
<span class="hljs-bullet">-</span> æµå¼æ¸²æŸ“èŠ‚æµ
<span class="hljs-bullet">  -</span> é—®é¢˜ï¼šå¤§å“åº”çš„UIé˜»å¡ã€‚
<span class="hljs-bullet">  -</span> å½±å“ï¼šæ‰å¸§ä¸å†…å­˜å¢é•¿ã€‚
<span class="hljs-bullet">  -</span> è§£å†³ï¼šæ¸è¿›æ¸²æŸ“ã€æ‰¹é‡åˆå¹¶ä¸å¸§ç‡é™åˆ¶ï¼›éª¨æ¶å±ä¸å ä½ä¼˜åŒ–ã€‚

<span class="hljs-strong">**é£é™©è¯„ä¼°**</span>
<span class="hljs-bullet">-</span> è®¾è®¡ä¸€è‡´æ€§é£é™©ï¼šå¤šUIåº“å¹¶å­˜ï¼Œå½±å“äº¤ä»˜ä¸ç»´æŠ¤ã€‚
<span class="hljs-bullet">-</span> æ€§èƒ½é£é™©ï¼šCSRå…¬å…±é¡µçš„é¦–å±/LCPä¸æµå¼æ¸²æŸ“çš„ä¸»çº¿ç¨‹é˜»å¡ã€‚
<span class="hljs-bullet">-</span> æ•°æ®ä¸€è‡´æ€§é£é™©ï¼šçŠ¶æ€è¾¹ç•Œä¸æ¸…å¯¼è‡´è§†å›¾ä¸æºæ•°æ®ä¸ä¸€è‡´ã€‚
<span class="hljs-bullet">-</span> ä½“éªŒé£é™©ï¼šå®æ—¶é€šé“æ–­çº¿/ç²˜æ€§ä¼šè¯ã€ä»»åŠ¡ä¸å¯å–æ¶ˆã€‚
<span class="hljs-bullet">-</span> è§„çº¦é£é™©ï¼šæ—¥å¿—/åŸ‹ç‚¹ç¼ºå°‘å­—æ®µå­—å…¸ä¸è„±æ•ç­–ç•¥ã€‚

<span class="hljs-strong">**å»ºè®®çš„ä¸‹ä¸€æ­¥**</span>
<span class="hljs-bullet">-</span> æ”¶æ•› MVPï¼šç™»å½•ï¼ˆå¯†ç +PKCEï¼‰ã€å•å›¾ç”Ÿæˆã€åŸºç¡€åˆè§„ã€å¯¼å‡ºï¼›å·®åˆ†ä¸A/Båœ¨Betaã€‚
<span class="hljs-bullet">-</span> å®šç¨¿å‰ç«¯çº¦æŸï¼šUIåº“ç»Ÿä¸€ã€TSä¸¥æ ¼ã€çŠ¶æ€è¾¹ç•Œã€é”™è¯¯æ¢å¤çŸ©é˜µã€æ€§èƒ½é¢„ç®—ä¸åŒ…ä½“ç›‘æ§ã€‚
<span class="hljs-bullet">-</span> å…¬å…±é¡µ SSG æ–¹æ¡ˆé€‰å‹ä¸è½åœ°ï¼›äº‹ä»¶ç½‘å…³å°è£…ä¸åè®®ï¼ˆäº‹ä»¶ç±»å‹ã€é‡è¿ä½ç‚¹ã€å¿ƒè·³ï¼‰ã€‚
<span class="hljs-bullet">-</span> å‰åç«¯å¥‘çº¦ï¼šOpenAPI ç”Ÿæˆç±»å‹ï¼Œç»Ÿä¸€é”™è¯¯ç»“æ„ä¸åˆ†é¡µ/è¿‡æ»¤è§„åˆ™ï¼›è´¯é€š <span class="hljs-code">`trace_id`</span>/<span class="hljs-code">`request_id`</span>ã€‚
</code></pre>
<h4 data-id="heading-9"><strong>UI è®¾è®¡å¸ˆ Review</strong></h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a88b5134da74774b29ef6800befbfad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=8nChsI0lKn3SBBr2Rimp1xO44Lw%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eafe878f0124be582da445cf1ebd83a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=Tf%2Bh3gSeFqiC9r%2F4HPJzEYMTCJg%3D" alt="" loading="lazy"/></p>
<p>æ ¹æ® UI ä¸“å®¶çš„ reviewï¼ŒuI è®¾è®¡è¿™å—è¿˜éœ€è¦å›ç‚‰å†ä¼˜åŒ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da17399957d846dfa6d1a6ae76879dd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=OLI521wzwplCCMIq5Ars6rgskEE%3D" alt="" loading="lazy"/></p>
<p>è¡¥å……æ„è§</p>
<pre><code class="hljs language-markdown" lang="markdown">UIè¯„å®¡æ„è§

<span class="hljs-strong">**è®¾è®¡ç³»ç»Ÿ**</span>
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šUIåº“æ ˆæœªå®Œå…¨æ”¶æ•›ï¼ˆRadix UI + Tailwind æˆ– MUI/AntDï¼‰ï¼›å½±å“ï¼šç»„ä»¶é£æ ¼ä¸äº¤äº’æ¨¡å¼å¯èƒ½ä¸ä¸€è‡´ã€ç»´æŠ¤æˆæœ¬å‡é«˜ï¼›å»ºè®®ï¼šç»Ÿä¸€é‡‡ç”¨â€œRadix UI + Tailwind +è‡ªå®šä¹‰è®¾è®¡ä»¤ç‰Œâ€ï¼Œå†»ç»“æŠ€æœ¯æ ˆå¹¶å»ºç«‹å…¼å®¹ç­–ç•¥ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š4/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šç¼ºå°‘è®¾è®¡ä»¤ç‰Œï¼ˆé¢œè‰²/é—´è·/æ’ç‰ˆ/é˜´å½±ï¼‰ä¸ç‰ˆæœ¬ç®¡ç†ï¼›å½±å“ï¼šé£æ ¼ä¸å¯å¤ç”¨ã€éš¾ä»¥è·¨å¹³å°ä¸€è‡´ï¼›å»ºè®®ï¼šå»ºç«‹Figmaå˜é‡ä¸JSONè®¾è®¡ä»¤ç‰Œï¼Œè”åŠ¨å‰ç«¯ï¼ˆCSSå˜é‡ï¼‰ä¸æ–‡æ¡£ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š5/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šç»„ä»¶è§„èŒƒä¸çŠ¶æ€çŸ©é˜µæœªè½åœ°ï¼ˆæŒ‰é’®/è¡¨å•/é¢æ¿/Modal/è¡¨æ ¼ï¼‰ï¼›å½±å“ï¼šå¼€å‘å®ç°å·®å¼‚åŒ–ã€è´¨æ£€å›°éš¾ï¼›å»ºè®®ï¼šä¸ºæ ¸å¿ƒç»„ä»¶è¾“å‡ºâ€œé»˜è®¤/hover/active/disabled/åŠ è½½/é”™è¯¯â€æ€å›¾ä¸ä½¿ç”¨å‡†åˆ™ï¼›ä¼˜å…ˆçº§ï¼šä¸­é«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šå¯è®¿é—®æ€§ä»…åœ¨æŠ€æœ¯å±‚é¢æåŠï¼ˆRadix/ARIAï¼‰ç¼ºå°‘ç³»ç»Ÿæ€§è§„èŒƒï¼›å½±å“ï¼šWCAG 2.1 AAåˆè§„é£é™©ï¼›å»ºè®®ï¼šå»ºç«‹a11yæ£€æŸ¥æ¸…å•ã€ç„¦ç‚¹ç®¡ç†ã€å¯¹æ¯”åº¦é˜ˆå€¼ä¸è¯»å±æ ‡æ³¨æµç¨‹ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šä¸»é¢˜/æš—è‰²æ¨¡å¼æœªè§„åˆ’ï¼›å½±å“ï¼šå¤œé—´ä½¿ç”¨ä¸å“ç‰Œå»¶å±•å—é™ï¼›å»ºè®®ï¼šå®šä¹‰ä¸»é¢˜ä»¤ç‰Œã€è¯­ä¹‰è‰²ä¸æš—è‰²å¯¹æ¯”åº¦è§„åˆ™ï¼ˆâ‰¥4.5:1ï¼‰ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š5/10
<span class="hljs-bullet">-</span> ç»¼åˆè¯„åˆ†ï¼š5.5/10ï¼ˆæ–¹å‘æ˜ç¡®ä½†è®¾è®¡ç³»ç»Ÿè§„èŒƒä¸ä»¤ç‰Œå±‚ç¼ºå¤±ï¼Œéœ€ä¼˜å…ˆè¡¥é½ï¼‰

<span class="hljs-strong">**äº¤äº’ä½“éªŒ**</span>
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šMVPå…³é”®è·¯å¾„å¤æ‚ï¼ˆç”Ÿæˆç¼–æ’/åˆ†é•œ/A/Bï¼‰ä½†ç¼ºå°‘åˆ†æ­¥å¼•å¯¼ï¼›å½±å“ï¼šè®¤çŸ¥è´Ÿè·é«˜ã€å¤±è´¥ç‡ä¸Šå‡ï¼›å»ºè®®ï¼šé‡‡ç”¨å‘å¯¼å¼æµç¨‹ä¸æ¸è¿›æŠ«éœ²ï¼Œæä¾›å¯ç¼–è¾‘é¢„è®¾ä¸å›é€€ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šé•¿ä»»åŠ¡åé¦ˆä»…æœ‰æŠ€æœ¯ï¼ˆWebSocket/SSEï¼‰æœªå®šä¹‰UXæ¨¡å¼ï¼›å½±å“ï¼šç­‰å¾…ä½“éªŒä¸ä½³ã€è¯¯æ“ä½œå¢å¤šï¼›å»ºè®®ï¼šè¿›åº¦æ¡/é˜Ÿåˆ—çŠ¶æ€/å¯é‡è¯•æœºåˆ¶ä¸é€šçŸ¥ä¸­å¿ƒç»Ÿä¸€æ¨¡å¼ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šç©ºçŠ¶æ€/é”™è¯¯çŠ¶æ€è§„èŒƒç¼ºå¤±ï¼›å½±å“ï¼šä¸Šæ‰‹æˆæœ¬é«˜ã€å®¹é”™æ€§å¼±ï¼›å»ºè®®ï¼šä¸ºç©ºæ€æä¾›æ•™å­¦ä¸ç¤ºä¾‹ã€é”™è¯¯è¯­ä¹‰ä¸æ¢å¤åŠ¨ä½œï¼ˆé‡è¯•/å›æ»š/è”ç³»æ”¯æŒï¼‰ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šå·¥ä½œå°ä¿¡æ¯æ¶æ„å¤æ‚ï¼ˆè§’è‰²/æ¨¡å‹/å‚æ•°ç‰ˆæœ¬ï¼‰ï¼›å½±å“ï¼šå‘ç°æ€§ä¸ä¸€è‡´æ€§ä¸è¶³ï¼›å»ºè®®ï¼šé‡‡ç”¨æ ‡ç­¾åˆ†ç»„ã€é¢æ¿æŠ˜å ã€å·®åˆ†é¢„è§ˆä¸ç‰ˆæœ¬æ¯”è¾ƒï¼›ä¼˜å…ˆçº§ï¼šä¸­é«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šè¡¨å•æ ¡éªŒè™½æœ‰æŠ€æœ¯ï¼ˆZodï¼‰ä½†å¾®æ–‡æ¡ˆä¸å°±åœ°æ ¡éªŒç­–ç•¥æœªè¯´æ˜ï¼›å½±å“ï¼šæäº¤æˆåŠŸç‡å—å½±å“ï¼›å»ºè®®ï¼šå°±åœ°æ ¡éªŒã€é”™è¯¯å®šä½ã€ç¤ºä¾‹å ä½ä¸å¿«æ·é”®ï¼ˆä¿å­˜/æäº¤ï¼‰ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> ç»¼åˆè¯„åˆ†ï¼š6.5/10ï¼ˆå…³é”®è·¯å¾„æ¸…æ™°ä½†éœ€å¼ºåŒ–å¼•å¯¼ã€åé¦ˆä¸ç©º/é”™æ€ä½“éªŒï¼‰

<span class="hljs-strong">**è§†è§‰ä¸€è‡´æ€§**</span>
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šå¤šUIåº“æ··ç”¨å¯¼è‡´è§†è§‰è¯­è¨€ä¸ç»Ÿä¸€ï¼›å½±å“ï¼šå“ç‰Œè®¤çŸ¥ä¸ä½“éªŒä¸€è‡´æ€§ä¸‹é™ï¼›å»ºè®®ï¼šç»Ÿä¸€è§†è§‰è¯­è¨€ä¸ç»„ä»¶æ¥æºï¼Œå¿…è¦æ—¶å°è£…æ ·å¼å±‚æ¶ˆé™¤å·®å¼‚ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š5/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šå›¾æ ‡ä¸æ’ç”»é£æ ¼æœªå®šä¹‰ï¼›å½±å“ï¼šç•Œé¢é£æ ¼æ¼‚ç§»ä¸ä¿¡æ¯å¯†åº¦ä¸å‡è¡¡ï¼›å»ºè®®ï¼šé€‰å®šç»Ÿä¸€å›¾æ ‡é›†ï¼ˆçº¿æ€§/å¡«å……ï¼‰ã€æ’ç”»é£æ ¼ä¸ç”¨æ³•è¾¹ç•Œï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šæ’ç‰ˆå±‚çº§ä¸æ …æ ¼ç³»ç»Ÿæœªæ˜ç¡®ï¼›å½±å“ï¼šå±‚æ¬¡æ„Ÿå¼±ã€é˜…è¯»æ•ˆç‡ä½ï¼›å»ºè®®ï¼šå®šä¹‰å­—å·/è¡Œé«˜/å­—é‡åˆ»åº¦ä¸8ptæ …æ ¼/é—´è·ç³»ç»Ÿï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šèµ„äº§é¢„è§ˆæ¯”ä¾‹ä¸è£å‰ªè§„åˆ™ä¸æ˜ï¼›å½±å“ï¼šåˆ—è¡¨/ç”»å»Šè·³åŠ¨ä¸å¸ƒå±€ä¸ç¨³å®šï¼›å»ºè®®ï¼šç»Ÿä¸€ç¼©ç•¥å›¾æ¯”ä¾‹ï¼ˆå¦‚16:9/1:1ï¼‰ä¸éª¨æ¶å±åŠ è½½ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šè¯­ä¹‰è‰²ï¼ˆæˆåŠŸ/è­¦å‘Š/å±é™©ï¼‰ä¸å“ç‰Œè‰²åŒºåˆ†æœªåˆ°ä½ï¼›å½±å“ï¼šçŠ¶æ€è¯†åˆ«æ··æ·†ï¼›å»ºè®®ï¼šå»ºç«‹è¯­ä¹‰è‰²ä½“ç³»ä¸å¯è®¿é—®å¯¹æ¯”åº¦æ ¡éªŒï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> ç»¼åˆè¯„åˆ†ï¼š6/10ï¼ˆéœ€å°½å¿«å›ºåŒ–è§†è§‰è¯­è¨€ã€æ’ç‰ˆä¸èµ„äº§è§„èŒƒï¼‰

<span class="hljs-strong">**å“åº”å¼**</span>
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šç”Ÿæˆç¼–æ’é¡µåœ¨ç§»åŠ¨ç«¯é£é™©é«˜ï¼ˆå¤šé¢æ¿/å¤æ‚æ§ä»¶ï¼‰ï¼›å½±å“ï¼šå°å±å¯ç”¨æ€§æ˜¾è‘—ä¸‹é™ï¼›å»ºè®®ï¼šç§»åŠ¨ä¼˜å…ˆé‡æ’ï¼Œåº•éƒ¨å¯¼èˆª+æ­¥éª¤åŒ–æµç¨‹ï¼Œå…³é”®æ“ä½œç½®åº•éƒ¨å›ºå®šï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š5/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šä»…å®šä¹‰æ–­ç‚¹ï¼ˆxs/sm/md/lg/xlï¼‰ï¼Œç¼ºå°‘å®¹å™¨æŸ¥è¯¢ç­–ç•¥ï¼›å½±å“ï¼šå¤æ‚å¸ƒå±€åœ¨ä¸åŒå®¹å™¨å¤±è¡¡ï¼›å»ºè®®ï¼šé‡‡ç”¨å®¹å™¨æŸ¥è¯¢ä¸å¸ƒå±€æ¨¡å¼åˆ‡æ¢ï¼ˆä¾§æ â†’æŠ½å±‰/åº•éƒ¨æ ï¼‰ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šè§¦æ§ç›®æ ‡ä¸æ‰‹åŠ¿æœªå®šä¹‰ï¼›å½±å“ï¼šç§»åŠ¨ç«¯è¯¯è§¦ä¸æ•ˆç‡ä½ï¼›å»ºè®®ï¼šè§¦æ§ç›®æ ‡â‰¥44pxã€æ‰‹åŠ¿ï¼ˆæ»‘åŠ¨/é•¿æŒ‰ï¼‰ä¸å¯å‘ç°æ€§æç¤ºï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šè¡¨æ ¼/é•¿åˆ—è¡¨åœ¨å°å±çš„è™šæ‹ŸåŒ–ä¸å¯†åº¦è°ƒèŠ‚ç­–ç•¥ä¸æ˜ï¼›å½±å“ï¼šæ€§èƒ½ä¸å¯è¯»æ€§å—æŸï¼›å»ºè®®ï¼šå¯†åº¦åˆ‡æ¢ã€åˆ—æŠ˜å ä¸ºå¡ç‰‡ã€åˆ†é¡µä¸è™šæ‹Ÿæ»šåŠ¨ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šè·¨è®¾å¤‡æµ‹è¯•è®¡åˆ’æœªåˆ—é¡µé¢è¦†ç›–ï¼›å½±å“ï¼šå…³é”®è·¯å¾„å›å½’é£é™©ï¼›å»ºè®®ï¼šå»ºç«‹è®¾å¤‡çŸ©é˜µä¸é¡µé¢ç”¨ä¾‹ï¼ˆç™»å½•/å·¥ä½œå°/ç”Ÿæˆ/å‘å¸ƒï¼‰çœŸæœºæŠ½æ ·ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> ç»¼åˆè¯„åˆ†ï¼š6/10ï¼ˆåŸºç¡€æ„è¯†åˆ°ä½ï¼Œéœ€é’ˆå¯¹å¤æ‚é¡µé¢æ·±åŒ–ç§»åŠ¨ç­–ç•¥ä¸æµ‹è¯•ï¼‰

<span class="hljs-strong">**åŠ¨æ•ˆæ€§èƒ½**</span>
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šåŠ¨æ•ˆè§„èŒƒç¼ºå¤±ï¼ˆå±‚çº§/æ—¶é•¿/ç¼“åŠ¨/é€‚ç”¨åœºæ™¯ï¼‰ï¼›å½±å“ï¼šä½“éªŒä¸ä¸€è‡´å¹¶å¯èƒ½é€ æˆå¡é¡¿ï¼›å»ºè®®ï¼šå»ºç«‹åŠ¨æ•ˆçº§åˆ«ï¼ˆå¾®åŠ¨æ•ˆ/è¿‡æ¸¡/å¼ºè°ƒï¼‰ä¸æ—¶é•¿æ›²çº¿ï¼ˆ150â€“250msï¼Œease-outï¼‰ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š5/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šé•¿ä»»åŠ¡çš„å ä½ä¸æ¸è¿›åé¦ˆæœªè¯¦ç»†å®šä¹‰ï¼›å½±å“ï¼šç­‰å¾…ç„¦è™‘ä¸ä¸­æ–­é£é™©ï¼›å»ºè®®ï¼šéª¨æ¶å±ã€åˆ†æ®µè¿›åº¦ã€å±€éƒ¨åˆ·æ–°ä¸ç»“æœå°±ç»ªé€šçŸ¥ï¼›ä¼˜å…ˆçº§ï¼šé«˜ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šæ€§èƒ½çº¦æŸä¸å®ç°æŒ‡å—æœªæ˜ç¡®ï¼ˆLayout Thrash/ä¸»çº¿ç¨‹å ç”¨ï¼‰ï¼›å½±å“ï¼šWeb Vitalsæ³¢åŠ¨ï¼›å»ºè®®ï¼šä¼˜å…ˆ<span class="hljs-code">`transform/opacity`</span>ï¼Œé¿å…å¸ƒå±€è§¦å‘ï¼Œä½¿ç”¨FLIPä¸èŠ‚æµ/å»æŠ–ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šæœªçº³å…¥<span class="hljs-code">`prefers-reduced-motion`</span>ä¸å¯é€‰å…³é—­åŠ¨ç”»ï¼›å½±å“ï¼šå¯¹æ•æ„Ÿç”¨æˆ·ä¸å‹å¥½ï¼›å»ºè®®ï¼šå°Šé‡ç³»ç»Ÿè®¾ç½®ã€æä¾›åŠ¨ç”»å¼ºåº¦å¼€å…³ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š7/10
<span class="hljs-bullet">-</span> é—®é¢˜ï¼šç›‘æ§æåˆ°Web Vitalsä½†ç¼ºå°‘åŠ¨æ•ˆé¢„ç®—ï¼›å½±å“ï¼šéš¾ä»¥æ²»ç†åŠ¨ç”»æ³›æ»¥ï¼›å»ºè®®ï¼šè®¾å®šäº¤äº’å»¶è¿Ÿé¢„ç®—ï¼ˆINPï¼‰ã€å…³é”®è·¯å¾„åŠ¨ç”»æ•°é‡ä¸Šé™ä¸å›å½’åŸºçº¿ï¼›ä¼˜å…ˆçº§ï¼šä¸­ï¼›è¯„åˆ†ï¼š6/10
<span class="hljs-bullet">-</span> ç»¼åˆè¯„åˆ†ï¼š6.5/10ï¼ˆæŠ€æœ¯ç›‘æ§åˆ°ä½ï¼Œéœ€è¡¥å……åŠ¨æ•ˆè§„èŒƒä¸é•¿ä»»åŠ¡åé¦ˆç­–ç•¥ï¼‰

<span class="hljs-strong">**ä¼˜å…ˆè¡ŒåŠ¨å»ºè®®**</span>
<span class="hljs-bullet">-</span> ç»Ÿä¸€UIæ ˆä¸è®¾è®¡ä»¤ç‰Œï¼Œå»ºç«‹è®¾è®¡ç³»ç»Ÿä¸a11yè§„èŒƒï¼ˆé«˜ï¼‰
<span class="hljs-bullet">-</span> ä¸ºâ€œç”Ÿæˆç¼–æ’/å·¥ä½œå°â€è®¾è®¡åˆ†æ­¥å‘å¯¼ã€çŠ¶æ€ä¸ç©º/é”™æ€æ¨¡å¼ï¼ˆé«˜ï¼‰
<span class="hljs-bullet">-</span> å›ºåŒ–è§†è§‰è¯­è¨€ï¼ˆæ’ç‰ˆ/å›¾æ ‡/è¯­ä¹‰è‰²ï¼‰å¹¶åˆ¶å®šèµ„äº§æ¯”ä¾‹ä¸éª¨æ¶å±ï¼ˆä¸­é«˜ï¼‰
<span class="hljs-bullet">-</span> å¼ºåŒ–ç§»åŠ¨ç«¯å¸ƒå±€æ¨¡å¼ä¸æµ‹è¯•çŸ©é˜µï¼Œè½å®å®¹å™¨æŸ¥è¯¢ä¸è§¦æ§å‡†åˆ™ï¼ˆä¸­ï¼‰
<span class="hljs-bullet">-</span> å»ºç«‹åŠ¨æ•ˆè§„èŒƒä¸æ€§èƒ½é¢„ç®—ï¼Œå°Šé‡<span class="hljs-code">`prefers-reduced-motion`</span>ï¼ˆä¸­ï¼‰

ä»¥ä¸Šè¯„ä¼°åŸºäºå·²æä¾›æ–‡æ¡£ï¼Œå±äºç ”ç©¶ç»“è®ºï¼Œä¸æ¶‰åŠä»£ç å®ç°ã€‚
<span class="hljs-code">        
            
toolName: agent_finish
            
status: success
          
          
**å®¡æŸ¥æ¦‚è§ˆ**
- èŒƒå›´ä¸ä¾æ®ï¼šå¯¹å®ç°è®¡åˆ’æ–‡æ¡£çš„è®¾è®¡æ–¹æ¡ˆè¿›è¡ŒUIç»´åº¦å®¡æ ¸ï¼Œå¯¹ç…§é¡¹ç›®è§„èŒƒï¼ˆè®¾è®¡ç³»ç»Ÿä¸å¯è®¿é—®æ€§ã€å“åº”å¼ä¸æ€§èƒ½æ„è¯†ï¼‰ä¸å³æ¢¦AIå¼å¤æ‚äº¤äº’çš„ç‰¹æ€§ã€‚
- ç»“è®ºæ‘˜è¦ï¼šæ–¹å‘æ­£ç¡®ï¼Œè®¾è®¡ç³»ç»Ÿä¸ä»¤ç‰Œæœªå›ºåŒ–ã€UIåº“é€‰æ‹©æœªæ”¶æ•›ã€å¤æ‚æµç¨‹çš„å¼•å¯¼ä¸åé¦ˆéœ€åŠ å¼ºï¼Œå“åº”å¼åœ¨å¤æ‚é¡µé¢ä¸Šç­–ç•¥ä¸è¶³ï¼ŒåŠ¨æ•ˆè§„èŒƒä¸æ€§èƒ½é¢„ç®—ç¼ºå¤±ã€‚æ•´ä½“å»ºè®®ä¼˜å…ˆè¡¥é½è®¾è®¡ç³»ç»Ÿä¸å…³é”®è·¯å¾„çš„UXè§„èŒƒã€‚
</span>
<span class="hljs-strong">**è®¾è®¡ç³»ç»Ÿè§„èŒƒ**</span>
<span class="hljs-bullet">-</span> å‘ç°é—®é¢˜
<span class="hljs-bullet">  -</span> UIåº“æœªæ”¶æ•›ï¼ŒRadix/Tailwindä¸MUI/AntDå¹¶è¡Œé£é™©å¤§ã€‚
<span class="hljs-bullet">  -</span> ç¼ºå°‘è®¾è®¡ä»¤ç‰Œä¸ç‰ˆæœ¬ç®¡ç†ï¼ˆé¢œè‰²/é—´è·/æ’ç‰ˆ/é˜´å½±/è¯­ä¹‰è‰²ï¼‰ã€‚
<span class="hljs-bullet">  -</span> æ ¸å¿ƒç»„ä»¶çš„çŠ¶æ€çŸ©é˜µä¸ä½¿ç”¨å‡†åˆ™æœªå®šä¹‰ï¼ˆæŒ‰é’®ã€è¡¨å•ã€Modalã€è¡¨æ ¼ï¼‰ã€‚
<span class="hljs-bullet">  -</span> å¯è®¿é—®æ€§ä»…æåˆ°â€œé‡‡ç”¨Radix/ARIAâ€ï¼Œæœªå½¢æˆç³»ç»Ÿæ€§è§„èŒƒä¸æ£€æŸ¥æ¸…å•ã€‚
<span class="hljs-bullet">  -</span> ä¸»é¢˜/æš—è‰²æ¨¡å¼æœªåˆ¶å®šï¼ˆå¯¹æ¯”åº¦ä¸è¯­ä¹‰è‰²æœªæ ¡éªŒï¼‰ã€‚
<span class="hljs-bullet">-</span> å½±å“åˆ†æ
<span class="hljs-bullet">  -</span> ç»„ä»¶é£æ ¼ä¸äº¤äº’æ¨¡å¼ä¸ä¸€è‡´ï¼Œç»´æŠ¤æˆæœ¬ä¸å›å½’é£é™©å‡é«˜ã€‚
<span class="hljs-bullet">  -</span> æ— ä»¤ç‰Œå¯¼è‡´å“ç‰Œå»¶å±•ä¸è·¨è®¾å¤‡ä¸€è‡´æ€§å·®ï¼Œå¯¹A11yä¸æš—è‰²æ¨¡å¼æ”¯æŒè–„å¼±ã€‚
<span class="hljs-bullet">-</span> æ”¹è¿›å»ºè®®
<span class="hljs-bullet">  -</span> ç»Ÿä¸€æŠ€æœ¯æ ˆä¸ºâ€œRadix UI + Tailwindâ€ï¼Œå†»ç»“å¹¶å½¢æˆå…¼å®¹ç­–ç•¥ã€‚
<span class="hljs-bullet">  -</span> å»ºç«‹è®¾è®¡ä»¤ç‰Œï¼ˆFigmaå˜é‡ + JSON/ CSSå˜é‡ï¼‰ï¼Œè”åŠ¨å‰ç«¯ä¸»é¢˜ç³»ç»Ÿï¼Œå®šä¹‰è¯­ä¹‰è‰²ä¸æš—è‰²è§„åˆ™ï¼ˆå¯¹æ¯”åº¦â‰¥4.5:1ï¼‰ã€‚
<span class="hljs-bullet">  -</span> è¾“å‡ºç»„ä»¶çŠ¶æ€çŸ©é˜µä¸äº¤äº’å‡†åˆ™ï¼›å»ºç«‹WCAG 2.1 AAæ£€æŸ¥æ¸…å•ã€ç„¦ç‚¹ç®¡ç†ã€è¯»å±æ ‡æ³¨æµç¨‹ã€‚
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§ä¸è¯„åˆ†
<span class="hljs-bullet">  -</span> ä¼˜å…ˆçº§ï¼šé«˜
<span class="hljs-bullet">  -</span> è¯„åˆ†ï¼š5.5/10

<span class="hljs-strong">**äº¤äº’ä¸ä½“éªŒ**</span>
<span class="hljs-bullet">-</span> å‘ç°é—®é¢˜
<span class="hljs-bullet">  -</span> MVPå…³é”®è·¯å¾„è¿‡äºå¤æ‚ï¼ˆç”Ÿæˆç¼–æ’/åˆ†é•œ/A-Bï¼‰ï¼Œç¼ºå°‘å‘å¯¼å¼å¼•å¯¼ä¸æ¸è¿›æŠ«éœ²ã€‚
<span class="hljs-bullet">  -</span> é•¿ä»»åŠ¡åé¦ˆä»…æœ‰æŠ€æœ¯ï¼ˆSSE/WebSocketï¼‰ï¼Œç¼ºå°‘ç»Ÿä¸€UXæ¨¡å¼ï¼ˆè¿›åº¦/é˜Ÿåˆ—/é€šçŸ¥/å¯é‡è¯•ï¼‰ã€‚
<span class="hljs-bullet">  -</span> ç©ºçŠ¶æ€ä¸é”™è¯¯çŠ¶æ€æœªè§„èŒƒåŒ–ï¼›å·¥ä½œå°ä¿¡æ¯æ¶æ„å¤æ‚ï¼Œç‰ˆæœ¬ä¸å‚æ•°ç®¡ç†æ˜“æ··ä¹±ã€‚
<span class="hljs-bullet">  -</span> è¡¨å•è™½ç”¨Zodï¼Œå¾®æ–‡æ¡ˆä¸å°±åœ°æ ¡éªŒç­–ç•¥æœªåˆ¶å®šã€‚
<span class="hljs-bullet">-</span> å½±å“åˆ†æ
<span class="hljs-bullet">  -</span> è®¤çŸ¥è´Ÿè·ä¸å¤±è´¥ç‡ä¸Šå‡ï¼›ç­‰å¾…ä½“éªŒå·®ï¼›å¯å‘ç°æ€§ä¸ä¸€è‡´æ€§ä¸è¶³ï¼›è¡¨å•æäº¤æˆåŠŸç‡å—å½±å“ã€‚
<span class="hljs-bullet">-</span> æ”¹è¿›å»ºè®®
<span class="hljs-bullet">  -</span> å…³é”®é¡µé¢é‡‡ç”¨å‘å¯¼å¼æµç¨‹ï¼Œåˆ†æ­¥å‘ˆç°å¤æ‚é…ç½®ä¸å‚è€ƒç´ æï¼›å·®åˆ†é¢„è§ˆä¸A/Bæµ‹è¯•åœ¨Betaé˜¶æ®µå¼•å…¥ã€‚
<span class="hljs-bullet">  -</span> è®¾è®¡ç»Ÿä¸€åé¦ˆæ¨¡å¼ï¼šåˆ†æ®µè¿›åº¦æ¡ã€ä»»åŠ¡é˜Ÿåˆ—ã€é€šçŸ¥ä¸­å¿ƒã€å¯é‡è¯•ä¸å›æ»šã€‚
<span class="hljs-bullet">  -</span> ä¸ºç©ºæ€æä¾›æ•™å­¦æŒ‡å¼•ä¸æ¨¡æ¿ï¼Œé”™è¯¯ç»™å‡ºä¿®å¤è·¯å¾„ï¼›å·¥ä½œå°é‡‡ç”¨æ ‡ç­¾åˆ†ç»„ã€é¢æ¿æŠ˜å ã€ç‰ˆæœ¬æ¯”è¾ƒä¸å·®åˆ†è§†å›¾ã€‚
<span class="hljs-bullet">  -</span> è¡¨å•å°±åœ°æ ¡éªŒã€é”™è¯¯å®šä½ä¸ç¤ºä¾‹å ä½ï¼›æä¾›å¿«æ·é”®æ“ä½œï¼ˆä¿å­˜/æäº¤ï¼‰ã€‚
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§ä¸è¯„åˆ†
<span class="hljs-bullet">  -</span> ä¼˜å…ˆçº§ï¼šé«˜
<span class="hljs-bullet">  -</span> è¯„åˆ†ï¼š6.5/10

<span class="hljs-strong">**è§†è§‰ä¸€è‡´æ€§**</span>
<span class="hljs-bullet">-</span> å‘ç°é—®é¢˜
<span class="hljs-bullet">  -</span> å¤šUIåº“æ··ç”¨å¯¼è‡´è§†è§‰è¯­è¨€ä¸ç»Ÿä¸€ï¼›å›¾æ ‡/æ’ç”»é£æ ¼æœªå®šä¹‰ã€‚
<span class="hljs-bullet">  -</span> æ’ç‰ˆå±‚çº§ä¸æ …æ ¼ç³»ç»Ÿæœªæ˜ç¡®ï¼›èµ„äº§é¢„è§ˆæ¯”ä¾‹ä¸è£å‰ªè§„åˆ™ç¼ºå¤±ã€‚
<span class="hljs-bullet">  -</span> è¯­ä¹‰è‰²ä¸å“ç‰Œè‰²å…³ç³»æœªå›ºåŒ–ã€‚
<span class="hljs-bullet">-</span> å½±å“åˆ†æ
<span class="hljs-bullet">  -</span> å“ç‰Œè®¤çŸ¥å¼±åŒ–ã€ç•Œé¢é£æ ¼æ¼‚ç§»ï¼›é˜…è¯»æ•ˆç‡ä¸å¸ƒå±€ç¨³å®šæ€§ä¸‹é™ï¼›çŠ¶æ€è¯†åˆ«æ··æ·†ã€‚
<span class="hljs-bullet">-</span> æ”¹è¿›å»ºè®®
<span class="hljs-bullet">  -</span> ç»Ÿä¸€å›¾æ ‡é›†ä¸æ’ç”»é£æ ¼ï¼Œå®šä¹‰å­—å·/è¡Œé«˜/å­—é‡åˆ»åº¦ä¸8ptæ …æ ¼ï¼›ç»Ÿä¸€ç¼©ç•¥å›¾æ¯”ä¾‹ï¼ˆå¦‚16:9/1:1ï¼‰ï¼Œéª¨æ¶å±åŠ è½½ã€‚
<span class="hljs-bullet">  -</span> å»ºç«‹è¯­ä¹‰è‰²ä½“ç³»å¹¶åšå¯è®¿é—®å¯¹æ¯”åº¦æ ¡éªŒã€‚
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§ä¸è¯„åˆ†
<span class="hljs-bullet">  -</span> ä¼˜å…ˆçº§ï¼šä¸­é«˜
<span class="hljs-bullet">  -</span> è¯„åˆ†ï¼š6/10

<span class="hljs-strong">**å“åº”å¼è®¾è®¡**</span>
<span class="hljs-bullet">-</span> å‘ç°é—®é¢˜
<span class="hljs-bullet">  -</span> ç”Ÿæˆç¼–æ’é¡µåœ¨ç§»åŠ¨ç«¯å¤æ‚ï¼Œç¼ºå°‘ç§»åŠ¨ä¼˜å…ˆçš„ç»“æ„é‡æ’ä¸å®¹å™¨æŸ¥è¯¢ç­–ç•¥ã€‚
<span class="hljs-bullet">  -</span> è§¦æ§ç›®æ ‡ä¸æ‰‹åŠ¿æœªå®šä¹‰ï¼›è¡¨æ ¼/é•¿åˆ—è¡¨çš„è™šæ‹ŸåŒ–ä¸å¯†åº¦è°ƒèŠ‚ç­–ç•¥ä¸æ˜ã€‚
<span class="hljs-bullet">  -</span> è®¾å¤‡æµ‹è¯•çŸ©é˜µæœªè¦†ç›–å…³é”®é¡µé¢ã€‚
<span class="hljs-bullet">-</span> å½±å“åˆ†æ
<span class="hljs-bullet">  -</span> å°å±å¯ç”¨æ€§æ˜¾è‘—ä¸‹é™ï¼Œè¯¯è§¦ä¸æ€§èƒ½é£é™©ä¸Šå‡ï¼›å…³é”®è·¯å¾„å›å½’éš¾ä»¥ä¿éšœã€‚
<span class="hljs-bullet">-</span> æ”¹è¿›å»ºè®®
<span class="hljs-bullet">  -</span> ç§»åŠ¨ä¼˜å…ˆé‡æ’ï¼šåº•éƒ¨å›ºå®šæ“ä½œåŒºã€æ­¥éª¤åŒ–æµç¨‹ã€ä¾§æ è½¬æŠ½å±‰æˆ–åº•éƒ¨æ ï¼›é‡‡ç”¨å®¹å™¨æŸ¥è¯¢åˆ‡æ¢å¸ƒå±€æ¨¡å¼ã€‚
<span class="hljs-bullet">  -</span> è§¦æ§ç›®æ ‡â‰¥44pxã€æ‰‹åŠ¿æç¤ºä¸å¯å‘ç°æ€§ï¼›è¡¨æ ¼åœ¨å°å±åˆ‡æ¢å¡ç‰‡è§†å›¾ï¼Œå¯†åº¦åˆ‡æ¢ã€åˆ†é¡µä¸è™šæ‹Ÿæ»šåŠ¨ã€‚
<span class="hljs-bullet">  -</span> å»ºç«‹è®¾å¤‡çŸ©é˜µä¸é¡µé¢ç”¨ä¾‹ï¼ˆç™»å½•/å·¥ä½œå°/ç”Ÿæˆ/å‘å¸ƒï¼‰è¿›è¡ŒçœŸæœºæŠ½æ ·æµ‹è¯•ã€‚
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§ä¸è¯„åˆ†
<span class="hljs-bullet">  -</span> ä¼˜å…ˆçº§ï¼šä¸­
<span class="hljs-bullet">  -</span> è¯„åˆ†ï¼š6/10

<span class="hljs-strong">**åŠ¨æ•ˆä¸æ€§èƒ½**</span>
<span class="hljs-bullet">-</span> å‘ç°é—®é¢˜
<span class="hljs-bullet">  -</span> åŠ¨æ•ˆè§„èŒƒç¼ºå¤±ï¼ˆå±‚çº§ã€æ—¶é•¿ã€ç¼“åŠ¨ä¸åœºæ™¯ï¼‰ï¼›æœªè€ƒè™‘ <span class="hljs-code">`prefers-reduced-motion`</span>ã€‚
<span class="hljs-bullet">  -</span> é•¿ä»»åŠ¡å ä½ä¸æ¸è¿›åé¦ˆæœªå®šä¹‰ï¼›æ€§èƒ½çº¦æŸä¸å®ç°æŒ‡å—ï¼ˆé¿å…å¸ƒå±€æŠ–åŠ¨ï¼‰æœªæ˜ç¡®ã€‚
<span class="hljs-bullet">  -</span> ç›‘æ§è™½æWeb Vitalsï¼Œä½†ç¼ºå°‘åŠ¨æ•ˆé¢„ç®—ä¸å›å½’åŸºçº¿ã€‚
<span class="hljs-bullet">-</span> å½±å“åˆ†æ
<span class="hljs-bullet">  -</span> ä½“éªŒä¸ä¸€è‡´ã€å¡é¡¿ä¸INPæ³¢åŠ¨ï¼›æ•æ„Ÿç”¨æˆ·ä½“éªŒä¸å‹å¥½ï¼›éš¾ä»¥æ²»ç†åŠ¨ç”»æ³›æ»¥ã€‚
<span class="hljs-bullet">-</span> æ”¹è¿›å»ºè®®
<span class="hljs-bullet">  -</span> å»ºç«‹åŠ¨æ•ˆçº§åˆ«ï¼ˆå¾®åŠ¨æ•ˆ/è¿‡æ¸¡/å¼ºè°ƒï¼‰ã€æ—¶é•¿150â€“250msã€ease-outæ›²çº¿ä¸é€‚ç”¨åœºæ™¯ï¼›å°Šé‡ç³»ç»Ÿè®¾ç½®å¹¶æä¾›åŠ¨ç”»å¼ºåº¦å¼€å…³ã€‚
<span class="hljs-bullet">  -</span> ä½¿ç”¨éª¨æ¶å±ã€åˆ†æ®µè¿›åº¦ã€å±€éƒ¨åˆ·æ–°ä¸é€šçŸ¥ï¼›ä¼˜å…ˆ transform/opacityã€é‡‡ç”¨FLIPã€èŠ‚æµ/å»æŠ–ã€‚
<span class="hljs-bullet">  -</span> è®¾å®šåŠ¨æ•ˆé¢„ç®—ä¸å›å½’åŸºçº¿ï¼ˆINPé˜ˆå€¼ã€å…³é”®è·¯å¾„åŠ¨ç”»æ•°é‡ä¸Šé™ï¼‰ï¼Œçº³å…¥ç›‘æ§æŠ¥è¡¨ã€‚
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§ä¸è¯„åˆ†
<span class="hljs-bullet">  -</span> ä¼˜å…ˆçº§ï¼šä¸­
<span class="hljs-bullet">  -</span> è¯„åˆ†ï¼š6.5/10

<span class="hljs-strong">**ç»¼åˆè¯„çº§**</span>
<span class="hljs-bullet">-</span> è®¾è®¡ç³»ç»Ÿè§„èŒƒï¼š5.5/10
<span class="hljs-bullet">-</span> äº¤äº’ä¸ä½“éªŒï¼š6.5/10
<span class="hljs-bullet">-</span> è§†è§‰ä¸€è‡´æ€§ï¼š6/10
<span class="hljs-bullet">-</span> å“åº”å¼è®¾è®¡ï¼š6/10
<span class="hljs-bullet">-</span> åŠ¨æ•ˆä¸æ€§èƒ½ï¼š6.5/10
<span class="hljs-bullet">-</span> ç»¼åˆï¼š6.1/10ï¼ˆæ–¹å‘æ­£ç¡®ä½†è§„èŒƒä¸ç»†èŠ‚éœ€è¡¥é½ï¼›ä¼˜å…ˆå®Œå–„è®¾è®¡ç³»ç»Ÿä¸å…³é”®è·¯å¾„UXï¼‰

<span class="hljs-strong">**ä¼˜å…ˆçº§è¯„ä¼°ä¸è¡ŒåŠ¨å»ºè®®**</span>
<span class="hljs-bullet">-</span> é«˜ä¼˜å…ˆçº§
<span class="hljs-bullet">  -</span> ç»Ÿä¸€UIæ ˆä¸è®¾è®¡ä»¤ç‰Œï¼Œè¾“å‡ºç»„ä»¶çŠ¶æ€çŸ©é˜µä¸WCAGè§„èŒƒã€‚
<span class="hljs-bullet">  -</span> ä¸ºâ€œç”Ÿæˆç¼–æ’/å·¥ä½œå°â€è®¾è®¡å‘å¯¼ä¸ç»Ÿä¸€åé¦ˆï¼ˆè¿›åº¦/é˜Ÿåˆ—/é€šçŸ¥/å¯é‡è¯•ï¼‰ï¼Œå®Œå–„ç©º/é”™æ€ã€‚
<span class="hljs-bullet">-</span> ä¸­é«˜ä¼˜å…ˆçº§
<span class="hljs-bullet">  -</span> å›ºåŒ–è§†è§‰è¯­è¨€ï¼ˆæ’ç‰ˆ/å›¾æ ‡/è¯­ä¹‰è‰²ï¼‰ï¼Œç»Ÿä¸€èµ„äº§æ¯”ä¾‹ä¸éª¨æ¶å±ã€‚
<span class="hljs-bullet">-</span> ä¸­ä¼˜å…ˆçº§
<span class="hljs-bullet">  -</span> å¼ºåŒ–ç§»åŠ¨ç«¯å¸ƒå±€æ¨¡å¼ä¸å®¹å™¨æŸ¥è¯¢ç­–ç•¥ï¼Œå»ºç«‹è®¾å¤‡æµ‹è¯•çŸ©é˜µä¸è§¦æ§å‡†åˆ™ã€‚
<span class="hljs-bullet">  -</span> å»ºç«‹åŠ¨æ•ˆè§„èŒƒä¸æ€§èƒ½é¢„ç®—ï¼Œå°Šé‡ <span class="hljs-code">`prefers-reduced-motion`</span>ï¼Œåˆ¶å®šINPç›®æ ‡ä¸å›å½’æ¸…å•ã€‚

è¯´æ˜
<span class="hljs-bullet">-</span> é¡¹ç›®è§„èŒƒæ–‡ä»¶æœªç»™å‡ºæ˜ç¡®è¯„åˆ†æ ‡å‡†ï¼Œä»¥ä¸Šè¯„çº§ä¾æ®é€šè¡ŒUIè®¾è®¡è§„èŒƒï¼ˆè®¾è®¡ç³»ç»Ÿã€A11yã€å“åº”å¼ä¸æ€§èƒ½ç­‰ç»´åº¦ï¼‰è¿›è¡Œé‡åŒ–ï¼›å¯æŒ‰éœ€å°†è¯„åˆ†åˆ»åº¦ä¸é˜ˆå€¼çº³å…¥å›¢é˜Ÿè´¨é‡é—¨æ§›ä¸éªŒæ”¶æ ‡å‡†ã€‚
</code></pre>
<h3 data-id="heading-10"><strong>1.3 Â é¡¹ç›®æ–‡æ¡£ä¿®è®¢</strong></h3>
<p>å°† 1.2 ä¸­çš„ã€è¡¥å……æ„è§ã€‘å‘ç»™ TRAEï¼Œè®©å®ƒæ ¹æ®è¯„å®¡æ„è§è¿›è¡Œä¿®è®¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/065d5647dc13477ba72681de20818e99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=S74tNnT6XexZcerU6poqj6lQ40c%3D" alt="" loading="lazy"/></p>
<p>æ ¹æ® AI æç¤ºï¼Œç¡®è®¤äº§å“æ–‡æ¡£çš„å¾…ç¡®è®¤äº‹é¡¹åï¼Œé¡¹ç›®æ–‡æ¡£è¢«å†æ¬¡æ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/715ebd4cb80d46f9ba58547bace7b9aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=j%2B9l07sJSU%2Fu01fQJ9onu3smruQ%3D" alt="" loading="lazy"/></p>
<p>æ‰§è¡Œè®¡åˆ’ä¹‹åï¼Œé¡¹ç›®æ–‡æ¡£å®Œæˆæœ€ç»ˆæ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c045a27bd2d43158e3cd24bb7163c6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=ksHCsii%2FAGdUrktZZk2B2lnpXWs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>1.4 å‰åç«¯æ¥å£è§„èŒƒæ–‡æ¡£åˆ¶å®š</strong></h3>
<p>åœ¨åˆ†åˆ«å¼€å¯å‰åç«¯å¼€å‘ä»»åŠ¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç”Ÿæˆä¸€ä¸ªç»Ÿä¸€çš„å‰åç«¯æ¥å£æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2653bfb5be8a4207856353d930b3d3c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=6RuPp68FrY8sYyxmHEogmU5UaCE%3D" alt="" loading="lazy"/></p>
<p>å‰åç«¯æ¥å£æ–‡æ¡£ç”Ÿæˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc01040325b14e3dbbd96d67773cabf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=tr%2BX5ATtXAXpehAdT9f1uDj6EUE%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a0682d7fb554a39b1d359cb41501b65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=j8WL0pCCus1LYF1ZfnQJMohU604%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>1.5 UI è®¾è®¡</strong></h3>
<p>æ–°å¼€ä¸€ä¸ªä»»åŠ¡çª—å£ï¼Œå¬å”¤ UI è®¾è®¡å¸ˆæ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d3bba8779394bcd848f00d773b6093c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=kE6zDQ1gBBOvJUwfgI37fFH7pjo%3D" alt="" loading="lazy"/></p>
<p>æˆªå–å³æ¢¦ AI ä¸»é¡µå›¾ç‰‡ï¼Œè®© UI å·¥ç¨‹å¸ˆæ ¹æ®<strong>æˆªå›¾</strong>å’Œ<strong>é¡¹ç›®æ–‡æ¡£</strong>è¿›è¡Œä¸»é¡µè®¾è®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a4b65c3ff14f68b5a6157b8910d3b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=SYzzUBf0kwl0EL3uQbm3mib19hs%3D" alt="" loading="lazy"/></p>
<p><strong>UI è®¾è®¡æ–‡æ¡£ç”Ÿæˆå®Œæˆï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e997a33bf1b54a5cb1d670b1d52ca350~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=jqFhmOK3r1VDaM2sRPY3NGB3r4E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>é˜¶æ®µå°ç»“</strong></h3>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç”Ÿæˆä»¥ä¸‹é¡¹ç›®æ–‡æ¡£ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05fb7c9dbc12478fb5478aeb132bd547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=0Aq1mFGsmo6MvfTWyL23geCK9Ro%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec5d619abbae4946ad78470a22767bd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=UCk6OkrPcmw%2Ba5YJK28MBf1EhsQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14"><strong>é¡¹ç›®å®æ–½</strong></h2>
<h3 data-id="heading-15"><strong>2.1 å‰ç«¯ç¼–ç </strong></h3>
<p>å¼€å¯ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œè¿›è¡Œå‰ç«¯ç¼–ç ã€‚åœ¨æç¤ºè¯ä¸­å¼•å…¥ã€é˜¶æ®µå°ç»“ã€‘éƒ¨åˆ†çš„ 3 ä¸ªé¡¹ç›®æ–‡æ¡£ã€‚</p>
<p>ç›´æ¥å¬å”¤å¯¹åº”çš„æ™ºèƒ½ä½“å¼€å§‹ç¼–ç ï¼ˆè®°å¾—æ‰“å¼€ MAX æ¨¡å¼ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58b94c0115424051ac280f4f45523b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=5IGVK%2BFJ0TzDTrYR0EPY9h6jO3I%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>2.2 åç«¯ç¼–ç </strong></h3>
<p>å¼€å¯ä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œè¿›è¡Œåç«¯ç¼–ç ã€‚åœ¨æç¤ºè¯ä¸­å¼•å…¥ã€é˜¶æ®µå°ç»“ã€‘éƒ¨åˆ†çš„ 3 ä¸ªé¡¹ç›®æ–‡æ¡£ã€‚</p>
<p>ç›´æ¥å¬å”¤å¯¹åº”çš„æ™ºèƒ½ä½“å¼€å§‹ç¼–ç ã€‚ï¼ˆè®°å¾—æ‰“å¼€ MAX æ¨¡å¼ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eed8ac76651b4bac9c14be9aae870562~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=AZUERodXgpRiuiSXdd1m7lswnis%3D" alt="" loading="lazy"/></p>
<p>åç«¯æ¥å£ç¬¬ä¸€ç‰ˆå®Œæˆâœ…</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c440ea3dbf7c476db9342eacb0a0a195~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=ELnpMrWRgWiBoOpHvvfPk8%2B%2B%2B0E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17"><strong>2.3 Â å¤šä»»åŠ¡å¹¶è¡Œç¼–ç </strong></h3>
<p>ç»è¿‡ä¸Šé¢ 2 ä¸ªæ­¥éª¤åï¼Œå¯ä»¥åœ¨ TRAE å·¦ä¾§çœ‹åˆ° 2 ä¸ªå¹¶è¡Œçš„ç¼–ç ä»»åŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f10a36a8fa174d3a8833d1f25a795a7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=CIOWzFSQ1c7BzfzipugKzQfteps%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c0fcf5f1833491090a888bfc484f380~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=OSqSY5FW7WpcLp84vrW8%2Fni4evA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18"><strong>ä¸»é¡µä¼˜åŒ–</strong></h2>
<p>åç«¯æš‚æ—¶ä¸è¿›è¡ŒéªŒè¯å’Œä¼˜åŒ–ï¼Œå…ˆæ¥çœ‹ç¬¬ä¸€ç‰ˆå‰ç«¯é¡µé¢ï¼ˆå·¦ï¼‰ä¸ç«å“ï¼ˆå³ï¼‰çš„å¯¹æ¯”ï¼š</p>
<p><strong>åˆæ­¥è¯„ä¼°ï¼š</strong> æ¡†æ¶å·²æ­å»ºå®Œæˆï¼Œä½†è¿˜éœ€è¦ç»†åŒ–ä¼˜åŒ– ğŸ¤”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44150d42f3484560b8f1108bc6ff41fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=IlYjV7YyQ%2B%2FoIoHZxpst6yyoGPs%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5d279d9ff1a40c18a03a9a291e7dbff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=UYo%2BpBOWQmew9hEHJYHFlEoCCFc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19"><strong>å€ŸåŠ© Google Stitch ç”Ÿæˆä¸»é¡µåŸå‹</strong></h3>
<p>ä½¿ç”¨ Google çš„ Stitch å·¥å…·å¸®åŠ©ç”Ÿæˆä¸»é¡µçš„å¤§è‡´æ ·å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5e2a7fa27e944b6a34f0d52b7009bda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=ou0byo7lDyWhqWomRDkxHNmeQJQ%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0001889d3ed4c0082cdabb961aba6e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=dCc1Tt8n7jd3VoTrmVCaldYqZzU%3D" alt="" loading="lazy"/></p>
<p>å°† Google ç”Ÿæˆçš„é¡µé¢å¯¼å‡ºï¼Œæ”¾åˆ°é¡¹ç›®ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/059d462d7ed84b28ba7cb52a6418d730~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=1L0LZ1p2ndOuH59TTPWfeQ%2B%2F3lw%3D" alt="" loading="lazy"/></p>
<p>å‚è€ƒç»™å®šçš„ HTML ç”Ÿæˆä¸»é¡µï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/299f31c537fc492eac70d4dd937a2b5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=Exruul4Irxsi14D5nhYnu1pxOmo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-20"><strong>ç¬¬ä¸€æ¬¡ ä¸»é¡µä¼˜åŒ–</strong></h4>
<p><strong>æ•ˆæœè¯„ä¼°ï¼š</strong> æœ‰ç‚¹æ„æ€äº†ã€‚ä½†ç”±äºç…§ç‰‡ç¼ºå¤±ï¼Œé¡µé¢ä¸å¤ªç¾è§‚ï¼Œéœ€è¦è¡¥å……çœŸå®ç…§ç‰‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea334e7313fd4152a75d7941cc6e8a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=WZddK53yaIMlaYh%2FwRzQZx1VVNM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-21"><strong>ç¬¬äºŒæ¬¡ä¼˜åŒ–ï¼šå¢åŠ å›¾ç‰‡</strong></h4>
<p>ä»å³æ¢¦ä¸»é¡µè·å–ä¸€äº›å›¾ç‰‡ï¼Œç„¶åæ”¾åˆ°é¡¹ç›®ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf879ad1c505491eb17bca45c97624d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=q9bwDFAXVCkNzeyDsNckzwxJZ%2Bg%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e7abf1f300e419ba00b90379b474dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=aRsMsOWixVnue%2Bz4PqslUdpFUrg%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–åæ•ˆæœï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/134913e36c5744a19433675b0bf3c2f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=GcTkUFSzHqJooV3VypEvZR3PZp0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-22"><strong>ç¬¬ä¸‰æ¬¡ä¼˜åŒ–ï¼šè°ƒæ•´é—´è·</strong></h4>
<p>å›¾ç‰‡ä¹‹é—´è¿˜æœ‰ç¼éš™ï¼Œè®© TRAE ç»§ç»­ä¼˜åŒ–ã€‚</p>
<p>é€šè¿‡ã€é€‰æ‹©å…ƒç´ ã€‘åŠŸèƒ½é€‰ä¸­éœ€è¦ä¿®æ”¹çš„ç»„ä»¶ï¼Œå»æ‰å›¾ç‰‡ä¹‹é—´çš„ç©ºéš™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd9bd4406674d2db35af02b4967ce91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=OQrMyAXonltuFAGERhehhNWiSJg%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/200496a8b3734f20b833d0e77903b240~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=THe54ZgZJzCGQcnneO%2FRympxH%2BY%3D" alt="" loading="lazy"/></p>
<p><strong>ä¼˜åŒ–åæ•ˆæœï¼š</strong></p>
<p>æˆ‘ä»¬çš„äº§å‡º ï¼ˆå·¦ï¼‰VS ç«å“ï¼ˆå³ï¼‰</p>
<p><strong>è¯„ä¼°ç»“è®ºï¼šå‘³é“å¯¹äº†ï¼Œä½†è¿˜éœ€è¦ç»§ç»­æ‰“ç£¨...</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5baf1b19a9074d82a927bab1a9fbf505~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=7ZC5PLh5O0i1KCX2l6C8cv3EHyA%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a23b4a1bb0f4602abac21d3ee771b6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVFJBRV9haQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360943&amp;x-signature=1FUT%2BhPor3qvQ4RW3ak68Wq4V3M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23"><strong>å®éªŒæ€»ç»“</strong></h2>
<ul>
<li>ç½‘ç«™çš„è¿­ä»£è¿˜æœ‰å¾ˆé•¿çš„è·¯ï¼ˆåç«¯æ²¡è°ƒï¼Œä¸»é¡µåªæ˜¯åˆæ­¥å®Œæˆï¼‰ã€‚</li>
<li>åˆæ­¥ä½“éªŒäº†å¤šæ™ºèƒ½ä½“å¤šä»»åŠ¡ååŒï¼Œåé¢æ„Ÿè§‰å¯ä»¥è®© SOLO Coder ç”Ÿæˆä¸åŒçš„ä»»åŠ¡ç®€æŠ¥ï¼Œç„¶åæ–°å»ºä»»åŠ¡ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´ç®€æŠ¥ï¼Œç›´æ¥è¿è¡Œã€‚</li>
<li>SOLO Coder å¦‚æœèƒ½å¤Ÿè‡ªå·±åˆ›å»ºæ–°çš„ä»»åŠ¡çª—å£å¹¶æ‰§è¡Œï¼Œé‚£å°±æ›´å¥½äº†ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èœœé›ªå†°åŸ1åˆ†é’±å¥¶èŒ¶ç§’æ€æ´»åŠ¨ä¸‹ï¼Œä½¿ç”¨åˆ†ç‰‡é”æ›¿ä»£åˆ†å¸ƒå¼é”å»åšç§’æ€ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7579814711853301770</link>    <guid>https://juejin.cn/post/7579814711853301770</guid>    <pubDate>2025-12-04T10:03:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579814711853301770" data-draft-id="7579800429376405554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èœœé›ªå†°åŸ1åˆ†é’±å¥¶èŒ¶ç§’æ€æ´»åŠ¨ä¸‹ï¼Œä½¿ç”¨åˆ†ç‰‡é”æ›¿ä»£åˆ†å¸ƒå¼é”å»åšç§’æ€ç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼,Redis"/> <meta itemprop="datePublished" content="2025-12-04T10:03:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èœœé›ªå†°åŸ1åˆ†é’±å¥¶èŒ¶ç§’æ€æ´»åŠ¨ä¸‹ï¼Œä½¿ç”¨åˆ†ç‰‡é”æ›¿ä»£åˆ†å¸ƒå¼é”å»åšç§’æ€ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:03:39.000Z" title="Thu Dec 04 2025 10:03:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">éœ€æ±‚å¤è¿°</h3>
<p>åŸºäº <code>spring-boot-starter-data-redis</code> å’Œ Redisson å®ç°<strong>åˆ†ç‰‡é”</strong>ï¼ˆåˆ†å¸ƒå¼é”çš„åˆ†ç‰‡ä¼˜åŒ–ï¼Œé¿å…å•é”ç«äº‰ï¼‰ï¼Œæ‰“é€ ä¸€ä¸ªé€šç”¨çš„ç§’æ€ç»„ä»¶ï¼Œæ”¯æŒç§’æ€ä»»æ„æ•°é‡ï¼ˆnç§ï¼‰çš„å•†å“ï¼Œæ¯ç§å•†å“å¯é…ç½®æŒ‡å®šåº“å­˜ï¼ˆmä»¶ï¼‰ï¼Œæ ¸å¿ƒè¦è§£å†³ç§’æ€åœºæ™¯çš„è¶…å–ã€é‡å¤ä¸‹å•ã€é«˜å¹¶å‘é”ç«äº‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å®Œæ•´æ–¹æ¡ˆè®¾è®¡</h3>
<h4 data-id="heading-2">1. æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h4>





























<table><thead><tr><th>ç§’æ€æ ¸å¿ƒé—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¶…å–</td><td>Redis + Lua è„šæœ¬ï¼ˆåŸå­æ€§æ‰§è¡Œåº“å­˜æ£€æŸ¥ã€æ‰£å‡ï¼‰</td></tr><tr><td>é‡å¤ä¸‹å•</td><td>Redis Set å­˜å‚¨å·²ä¸‹å•ç”¨æˆ·IDï¼ˆå•†å“ç»´åº¦ï¼‰ï¼ŒLuaè„šæœ¬ä¸­æ ¡éªŒ</td></tr><tr><td>åˆ†å¸ƒå¼é”ç«äº‰æ¿€çƒˆ</td><td>åˆ†ç‰‡é”ï¼ˆæŒ‰å•†å“IDå“ˆå¸Œåˆ†ç‰‡ï¼Œä¸åŒå•†å“çš„é”è½åœ¨ä¸åŒ"åˆ†ç‰‡"ï¼Œé™ä½å•é”ç«äº‰ï¼‰</td></tr><tr><td>é”è¶…æ—¶/æ­»é”</td><td>Redisson å¯é‡å…¥é” + è‡ªåŠ¨è¿‡æœŸæ—¶é—´ + finally ä¿è¯è§£é”</td></tr><tr><td>æ¥å£é«˜å¹¶å‘</td><td>ï¼ˆå¯é€‰ï¼‰æ¥å£å±‚é™æµï¼ˆå¦‚Guava RateLimiterï¼‰ï¼Œå‡è½»åç«¯å‹åŠ›</td></tr></tbody></table>
<h4 data-id="heading-3">2. æŠ€æœ¯é€‰å‹</h4>
<ul>
<li>åŸºç¡€æ¡†æ¶ï¼šSpring Boot 2.x+</li>
<li>åˆ†å¸ƒå¼é”ï¼šRedissonï¼ˆæ”¯æŒåˆ†ç‰‡é”ã€å¯é‡å…¥é”ã€è‡ªåŠ¨ç»­æœŸï¼‰</li>
<li>ç¼“å­˜/åº“å­˜å­˜å‚¨ï¼šRedisï¼ˆStringå­˜åº“å­˜ã€Setå­˜å·²ä¸‹å•ç”¨æˆ·ï¼‰</li>
<li>åŸå­æ“ä½œï¼šLuaè„šæœ¬ï¼ˆä¿è¯åº“å­˜æ‰£å‡+ç”¨æˆ·è®°å½•çš„åŸå­æ€§ï¼‰</li>
<li>ä¾èµ–ï¼š<code>spring-boot-starter-data-redis</code>ã€<code>redisson-spring-boot-starter</code></li>
</ul>
<h4 data-id="heading-4">3. æ ¸å¿ƒæµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ç§’æ€è¯·æ±‚]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[æ¥å£å±‚é™æµï¼ˆå¯é€‰ï¼‰]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[å‚æ•°æ ¡éªŒï¼ˆå•†å“ID/ç”¨æˆ·IDéç©ºï¼‰]</span>
    C --&gt; D<span class="hljs-selector-attr">[æŒ‰å•†å“IDè·å–åˆ†ç‰‡é”ï¼ˆRedisson RLockï¼‰]</span>
    D --&gt; E{åŠ é”æˆåŠŸï¼Ÿ}
    E -- å¦ --&gt; F<span class="hljs-selector-attr">[è¿”å›<span class="hljs-string">"ç§’æ€å¤ªç«çˆ†ï¼Œè¯·é‡è¯•"</span>]</span>
    E -- æ˜¯ --&gt; G<span class="hljs-selector-attr">[æ‰§è¡ŒLuaè„šæœ¬ï¼ˆæ ¡éªŒåº“å­˜+æ ¡éªŒé‡å¤ä¸‹å•+æ‰£å‡åº“å­˜+è®°å½•ç”¨æˆ·ï¼‰]</span>
    G --&gt; H{Luaæ‰§è¡Œç»“æœï¼Ÿ}
    H -- å¤±è´¥ï¼ˆåº“å­˜ä¸è¶³/é‡å¤ä¸‹å•ï¼‰ --&gt; <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[è§£é”+è¿”å›ç§’æ€å¤±è´¥]</span>
    H -- æˆåŠŸ --&gt; J<span class="hljs-selector-attr">[ç”Ÿæˆè®¢å•ï¼ˆæ¨¡æ‹Ÿï¼Œå®é™…å¯è½åº“ï¼‰]</span>
    J --&gt; K<span class="hljs-selector-attr">[è§£é”]</span>
    K --&gt; L<span class="hljs-selector-attr">[è¿”å›ç§’æ€æˆåŠŸ]</span>
</code></pre>
<h4 data-id="heading-5">4. åˆ†ç‰‡é”è®¾è®¡æ€è·¯</h4>
<ul>
<li>åˆ†ç‰‡é”æ ¸å¿ƒï¼šå°†é”æŒ‰ã€Œå•†å“IDã€å“ˆå¸Œåˆ°ä¸åŒçš„é”keyï¼ˆåˆ†ç‰‡ï¼‰ï¼Œä¾‹å¦‚ï¼š<code>seckill:lock:shard:{shardIndex}:{productId}</code></li>
<li>åˆ†ç‰‡æ•°é…ç½®ï¼šå»ºè®®è®¾ç½®ä¸º Redis èŠ‚ç‚¹æ•°æˆ–CPUæ ¸å¿ƒæ•°ï¼ˆå¦‚8/16ï¼‰ï¼Œå¹³è¡¡é”ç«äº‰å’Œå¤æ‚åº¦</li>
<li>ä¼˜åŠ¿ï¼šé¿å…æ‰€æœ‰å•†å“çš„ç§’æ€è¯·æ±‚ç«äº‰åŒä¸€æŠŠé”ï¼Œæå‡å¹¶å‘èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-6">äºŒã€å®Œæ•´ä»£ç å®ç°</h3>
<h4 data-id="heading-7">1. ä¾èµ–é…ç½®ï¼ˆpom.xmlï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.15<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>seckill-redisson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>seckill-redisson<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>ç§’æ€é€šç”¨ç»„ä»¶ï¼ˆRedissonåˆ†ç‰‡é”ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Boot Web --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Redis Starter --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Redisson Starter --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.23.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æµ‹è¯• --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">2. é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-comment"># Redisé…ç½®</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span>  <span class="hljs-comment"># æ— å¯†ç åˆ™ç•™ç©º</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">10000ms</span>
  <span class="hljs-comment"># åº”ç”¨é…ç½®</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">seckill-redisson</span>

<span class="hljs-comment"># Redissoné…ç½®</span>
<span class="hljs-attr">redisson:</span>
  <span class="hljs-attr">address:</span> <span class="hljs-string">redis://127.0.0.1:6379</span>
  <span class="hljs-attr">password:</span>  <span class="hljs-comment"># æ— å¯†ç åˆ™ç•™ç©º</span>
  <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>

<span class="hljs-comment"># ç§’æ€ç»„ä»¶é…ç½®</span>
<span class="hljs-attr">seckill:</span>
  <span class="hljs-attr">lock:</span>
    <span class="hljs-comment"># åˆ†ç‰‡æ•°ï¼ˆå»ºè®®8/16ï¼‰</span>
    <span class="hljs-attr">shard-count:</span> <span class="hljs-number">8</span>
    <span class="hljs-comment"># é”è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-attr">lock-timeout:</span> <span class="hljs-number">30</span>
    <span class="hljs-comment"># é”ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-attr">lock-wait-time:</span> <span class="hljs-number">1</span>
  <span class="hljs-comment"># åº“å­˜åˆå§‹åŒ–ï¼ˆç¤ºä¾‹ï¼šå•†å“1001åº“å­˜100ä»¶ï¼Œå•†å“1002åº“å­˜200ä»¶ï¼‰</span>
  <span class="hljs-attr">init-stock:</span>
    <span class="hljs-attr">1001:</span> <span class="hljs-number">100</span>
    <span class="hljs-attr">1002:</span> <span class="hljs-number">200</span>
</code></pre>
<h4 data-id="heading-9">3. Redissoné…ç½®ç±»</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.seckillredisson.config;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> org.redisson.Redisson;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.config.Config;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Value;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;

<span class="hljs-comment">/**
 * Redissoné…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonConfig</span> {

    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${redisson.address}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> String address;

    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${redisson.password:}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> String password;

    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${redisson.database:<span class="hljs-number">0</span>}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> int database;

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedissonClient redissonClient() {
        Config config = new Config();
        <span class="hljs-comment">// å•æœºæ¨¡å¼ï¼ˆé›†ç¾¤æ¨¡å¼å¯ä¿®æ”¹ä¸ºconfig.useClusterServers()ï¼‰</span>
        config.useSingleServer()
                .setAddress(address)
                .setPassword(password.isEmpty() ? <span class="hljs-literal">null</span> : password)
                .setDatabase(database)
                .setConnectionPoolSize(<span class="hljs-number">64</span>)
                .setConnectionMinimumIdleSize(<span class="hljs-number">16</span>);
        <span class="hljs-keyword">return</span> Redisson.create(config);
    }
}
</code></pre>
<h4 data-id="heading-10">4. è‡ªå®šä¹‰å¼‚å¸¸</h4>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> com.example.seckillredisson.exception;

<span class="hljs-comment">/**
 * ç§’æ€è‡ªå®šä¹‰å¼‚å¸¸
 */</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SeckillException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RuntimeException</span> </span>{

    public <span class="hljs-type">SeckillException</span>(<span class="hljs-type">String</span> message) {
        <span class="hljs-keyword">super</span>(message);
    }

    public <span class="hljs-type">SeckillException</span>(<span class="hljs-type">String</span> message, <span class="hljs-type">Throwable</span> cause) {
        <span class="hljs-keyword">super</span>(message, cause);
    }

    <span class="hljs-comment">// ç§’æ€å¼‚å¸¸æšä¸¾</span>
    public <span class="hljs-keyword">enum</span> <span class="hljs-type">SeckillError</span> {
        <span class="hljs-type">PRODUCT_NOT_EXIST</span>(<span class="hljs-string">"å•†å“ä¸å­˜åœ¨"</span>),
        <span class="hljs-type">STOCK_INSUFFICIENT</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>),
        <span class="hljs-type">REPEAT_SECKILL</span>(<span class="hljs-string">"è¯·å‹¿é‡å¤ç§’æ€"</span>),
        <span class="hljs-type">LOCK_ACQUIRE_FAILED</span>(<span class="hljs-string">"ç§’æ€å¤ªç«çˆ†ï¼Œè¯·ç¨åé‡è¯•"</span>),
        <span class="hljs-type">SYSTEM_ERROR</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸"</span>);

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> message;

        <span class="hljs-type">SeckillError</span>(<span class="hljs-type">String</span> message) {
            <span class="hljs-keyword">this</span>.message = message;
        }

        public <span class="hljs-type">String</span> getMessage() {
            <span class="hljs-keyword">return</span> message;
        }
    }
}
</code></pre>
<h4 data-id="heading-11">5. ç§’æ€é€šç”¨ç»„ä»¶ï¼ˆæ ¸å¿ƒï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.seckillredisson.service;

<span class="hljs-keyword">import</span> com.example.seckillredisson.exception.SeckillException;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.script.DefaultRedisScript;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> javax.annotation.PostConstruct;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ç§’æ€é€šç”¨ç»„ä»¶ï¼ˆåŸºäºRedissonåˆ†ç‰‡é”ï¼‰
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;

    <span class="hljs-comment">// åˆ†ç‰‡æ•°</span>
    <span class="hljs-meta">@Value("${seckill.lock.shard-count:8}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> shardCount;

    <span class="hljs-comment">// é”è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-meta">@Value("${seckill.lock.lock-timeout:30}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lockTimeout;

    <span class="hljs-comment">// é”ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-meta">@Value("${seckill.lock.lock-wait-time:1}")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lockWaitTime;

    <span class="hljs-comment">// åˆå§‹åŒ–åº“å­˜é…ç½®</span>
    <span class="hljs-meta">@Value("#{${seckill.init-stock}}")</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Integer&gt; initStockMap;

    <span class="hljs-comment">// Redis Keyå‰ç¼€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STOCK_KEY_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:stock:"</span>;       <span class="hljs-comment">// åº“å­˜Keyï¼šseckill:stock:{productId}</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER_KEY_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:user:"</span>;         <span class="hljs-comment">// å·²ä¸‹å•ç”¨æˆ·Keyï¼šseckill:user:{productId}</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCK_KEY_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"seckill:lock:shard:"</span>;   <span class="hljs-comment">// åˆ†ç‰‡é”Keyï¼šseckill:lock:shard:{shardIndex}:{productId}</span>

    <span class="hljs-comment">// Luaè„šæœ¬ï¼šåŸå­æ€§æ‰§è¡Œã€Œæ ¡éªŒåº“å­˜+æ ¡éªŒé‡å¤ä¸‹å•+æ‰£å‡åº“å­˜+è®°å½•ç”¨æˆ·ã€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SECKILL_LUA_SCRIPT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
            -- å‚æ•°ï¼šKEYS[1]=åº“å­˜Key, KEYS[2]=ç”¨æˆ·Key, ARGV[1]=ç”¨æˆ·ID
            -- 1. æ ¡éªŒåº“å­˜
            local stock = tonumber(redis.call('get', KEYS[1]))
            if not stock or stock &lt;= 0 then
                return 0  -- åº“å­˜ä¸è¶³
            end
            -- 2. æ ¡éªŒæ˜¯å¦é‡å¤ä¸‹å•
            local isExist = redis.call('sismember', KEYS[2], ARGV[1])
            if isExist == 1 then
                return 2  -- é‡å¤ä¸‹å•
            end
            -- 3. æ‰£å‡åº“å­˜
            redis.call('decr', KEYS[1])
            -- 4. è®°å½•ç”¨æˆ·
            redis.call('sadd', KEYS[2], ARGV[1])
            return 1  -- ç§’æ€æˆåŠŸ
            """</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DefaultRedisScript&lt;Long&gt; seckillLuaScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–Luaè„šæœ¬å’Œåº“å­˜
     */</span>
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// é…ç½®Luaè„šæœ¬</span>
        seckillLuaScript.setScriptText(SECKILL_LUA_SCRIPT);
        seckillLuaScript.setResultType(Long.class);
        <span class="hljs-comment">// åˆå§‹åŒ–å•†å“åº“å­˜</span>
        initStockMap.forEach((productId, stock) -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> STOCK_KEY_PREFIX + productId;
            <span class="hljs-keyword">if</span> (redisTemplate.opsForValue().get(stockKey) == <span class="hljs-literal">null</span>) {
                redisTemplate.opsForValue().set(stockKey, stock);
                log.info(<span class="hljs-string">"åˆå§‹åŒ–å•†å“[{}]åº“å­˜ï¼š{}ä»¶"</span>, productId, stock);
            }
        });
    }

    <span class="hljs-comment">/**
     * é€šç”¨ç§’æ€æ–¹æ³•
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> userId    ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç§’æ€ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">seckill</span><span class="hljs-params">(String productId, String userId)</span> {
        <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (productId == <span class="hljs-literal">null</span> || productId.isEmpty() || userId == <span class="hljs-literal">null</span> || userId.isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.PRODUCT_NOT_EXIST.getMessage());
        }

        <span class="hljs-comment">// 2. è·å–åˆ†ç‰‡é”ï¼ˆæŒ‰å•†å“IDå“ˆå¸Œè®¡ç®—åˆ†ç‰‡ç´¢å¼•ï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> Math.abs(productId.hashCode()) % shardCount;
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> LOCK_KEY_PREFIX + shardIndex + <span class="hljs-string">":"</span> + productId;
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-type">boolean</span> <span class="hljs-variable">lockAcquired</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•è·å–é”ï¼ˆç­‰å¾…æ—¶é—´lockWaitTimeç§’ï¼Œè¶…æ—¶æ—¶é—´lockTimeoutç§’ï¼‰</span>
            lockAcquired = lock.tryLock(lockWaitTime, lockTimeout, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!lockAcquired) {
                log.warn(<span class="hljs-string">"ç”¨æˆ·[{}]ç§’æ€å•†å“[{}]ï¼šè·å–é”å¤±è´¥"</span>, userId, productId);
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.LOCK_ACQUIRE_FAILED.getMessage());
            }

            <span class="hljs-comment">// 3. æ‰§è¡ŒLuaè„šæœ¬ï¼ˆåŸå­æ“ä½œï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> STOCK_KEY_PREFIX + productId;
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> USER_KEY_PREFIX + productId;
            <span class="hljs-type">Long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> redisTemplate.execute(
                    seckillLuaScript,
                    Collections.singletonList(stockKey),  <span class="hljs-comment">// KEYS[1]</span>
                    userKey,                               <span class="hljs-comment">// KEYS[2]</span>
                    userId                                 <span class="hljs-comment">// ARGV[1]</span>
            );

            <span class="hljs-comment">// 4. å¤„ç†Luaæ‰§è¡Œç»“æœ</span>
            <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.SYSTEM_ERROR.getMessage());
            }
            <span class="hljs-keyword">switch</span> (result.intValue()) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    log.info(<span class="hljs-string">"ç”¨æˆ·[{}]ç§’æ€å•†å“[{}]ï¼šæˆåŠŸ"</span>, userId, productId);
                    <span class="hljs-comment">// æ­¤å¤„å¯æ‰©å±•ï¼šç”Ÿæˆè®¢å•ã€å‘é€æ¶ˆæ¯ç­‰ï¼ˆå®é™…ä¸šåŠ¡éœ€è½åº“ï¼Œå¯å¼‚æ­¥ï¼‰</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    log.warn(<span class="hljs-string">"ç”¨æˆ·[{}]ç§’æ€å•†å“[{}]ï¼šåº“å­˜ä¸è¶³"</span>, userId, productId);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.STOCK_INSUFFICIENT.getMessage());
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    log.warn(<span class="hljs-string">"ç”¨æˆ·[{}]ç§’æ€å•†å“[{}]ï¼šé‡å¤ä¸‹å•"</span>, userId, productId);
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.REPEAT_SECKILL.getMessage());
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.SYSTEM_ERROR.getMessage());
            }
        } <span class="hljs-keyword">catch</span> (SeckillException e) {
            <span class="hljs-keyword">throw</span> e;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç”¨æˆ·[{}]ç§’æ€å•†å“[{}]å¼‚å¸¸"</span>, userId, productId, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SeckillException</span>(SeckillException.SeckillError.SYSTEM_ERROR.getMessage(), e);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ä¿è¯é”é‡Šæ”¾ï¼ˆä»…å½“è·å–é”æˆåŠŸæ—¶ï¼‰</span>
            <span class="hljs-keyword">if</span> (lockAcquired &amp;&amp; lock.isHeldByCurrentThread()) {
                lock.unlock();
                log.debug(<span class="hljs-string">"é‡Šæ”¾å•†å“[{}]çš„åˆ†ç‰‡é”[{}]"</span>, productId, lockKey);
            }
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å•†å“å‰©ä½™åº“å­˜
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@return</span> å‰©ä½™åº“å­˜
     */</span>
    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getStock</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> STOCK_KEY_PREFIX + productId;
        <span class="hljs-type">Object</span> <span class="hljs-variable">stockObj</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(stockKey);
        <span class="hljs-keyword">return</span> stockObj == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : Integer.parseInt(stockObj.toString());
    }

    <span class="hljs-comment">/**
     * é‡ç½®å•†å“åº“å­˜ï¼ˆæµ‹è¯•ç”¨ï¼‰
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> stock     åº“å­˜æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetStock</span><span class="hljs-params">(String productId, Integer stock)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">stockKey</span> <span class="hljs-operator">=</span> STOCK_KEY_PREFIX + productId;
        <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> USER_KEY_PREFIX + productId;
        redisTemplate.opsForValue().set(stockKey, stock);
        redisTemplate.delete(userKey); <span class="hljs-comment">// æ¸…ç©ºå·²ä¸‹å•ç”¨æˆ·</span>
        log.info(<span class="hljs-string">"é‡ç½®å•†å“[{}]åº“å­˜ä¸ºï¼š{}ä»¶"</span>, productId, stock);
    }
}
</code></pre>
<h4 data-id="heading-12">6. æ§åˆ¶å±‚ï¼ˆæµ‹è¯•æ¥å£ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">seckillredisson</span>.<span class="hljs-property">controller</span>;

<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">seckillredisson</span>.<span class="hljs-property">exception</span>.<span class="hljs-property">SeckillException</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">seckillredisson</span>.<span class="hljs-property">service</span>.<span class="hljs-property">SeckillService</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">RequiredArgsConstructor</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">http</span>.<span class="hljs-property">HttpStatus</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">http</span>.<span class="hljs-property">ResponseEntity</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.*;

<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">HashMap</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Map</span>;

<span class="hljs-comment">/**
 * ç§’æ€æµ‹è¯•æ¥å£
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/seckill"</span>)
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillController</span> {

    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">SeckillService</span> seckillService;

    <span class="hljs-comment">/**
     * ç§’æ€æ¥å£
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> userId    ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç§’æ€ç»“æœ
     */</span>
    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/{productId}/{userId}"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt;&gt; <span class="hljs-title function_">seckill</span>(<span class="hljs-params">
            <span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">String</span> productId,
            <span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">String</span> userId</span>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">boolean</span> success = seckillService.<span class="hljs-title function_">seckill</span>(productId, userId);
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"code"</span>, <span class="hljs-number">200</span>);
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"message"</span>, success ? <span class="hljs-string">"ç§’æ€æˆåŠŸ"</span> : <span class="hljs-string">"ç§’æ€å¤±è´¥"</span>);
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, success);
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(result);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">SeckillException</span> e) {
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"code"</span>, <span class="hljs-number">500</span>);
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"message"</span>, e.<span class="hljs-title function_">getMessage</span>());
            result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, <span class="hljs-literal">false</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">status</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">INTERNAL_SERVER_ERROR</span>).<span class="hljs-title function_">body</span>(result);
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å•†å“åº“å­˜
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@return</span> å‰©ä½™åº“å­˜
     */</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/stock/{productId}"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt;&gt; <span class="hljs-title function_">getStock</span>(<span class="hljs-params"><span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">String</span> productId</span>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-title class_">Integer</span> stock = seckillService.<span class="hljs-title function_">getStock</span>(productId);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"code"</span>, <span class="hljs-number">200</span>);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"message"</span>, <span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, stock);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(result);
    }

    <span class="hljs-comment">/**
     * é‡ç½®å•†å“åº“å­˜ï¼ˆæµ‹è¯•ç”¨ï¼‰
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> stock     åº“å­˜æ•°
     * <span class="hljs-doctag">@return</span> é‡ç½®ç»“æœ
     */</span>
    <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/reset/{productId}/{stock}"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ResponseEntity</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt;&gt; <span class="hljs-title function_">resetStock</span>(<span class="hljs-params">
            <span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">String</span> productId,
            <span class="hljs-meta">@PathVariable</span> Integer stock</span>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        seckillService.<span class="hljs-title function_">resetStock</span>(productId, stock);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"code"</span>, <span class="hljs-number">200</span>);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"message"</span>, <span class="hljs-string">"é‡ç½®åº“å­˜æˆåŠŸ"</span>);
        result.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, stock);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">ResponseEntity</span>.<span class="hljs-title function_">ok</span>(result);
    }
}
</code></pre>
<h4 data-id="heading-13">7. å¯åŠ¨ç±»</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">seckillredisson</span>;

<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillRedissonApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">SeckillRedissonApplication</span>.<span class="hljs-property">class</span>, args);
    }

}
</code></pre>
<h3 data-id="heading-14">ä¸‰ã€æµ‹è¯•è¯´æ˜</h3>
<h4 data-id="heading-15">1. ç¯å¢ƒå‡†å¤‡</h4>
<ul>
<li>æœ¬åœ°å¯åŠ¨Redisï¼ˆé»˜è®¤ç«¯å£6379ï¼Œæ— å¯†ç ï¼‰</li>
<li>å¯åŠ¨Spring Bootåº”ç”¨</li>
</ul>
<h4 data-id="heading-16">2. æ¥å£æµ‹è¯•ï¼ˆPostman/Curlï¼‰</h4>
<h5 data-id="heading-17">(1) æŸ¥è¯¢å•†å“åº“å­˜</h5>
<pre><code class="hljs language-css" lang="css">curl http://localhost:<span class="hljs-number">8080</span>/seckill/stock/<span class="hljs-number">1001</span>
# å“åº”ç¤ºä¾‹ï¼š{"<span class="hljs-selector-tag">code</span>":<span class="hljs-number">200</span>,<span class="hljs-string">"message"</span>:<span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-number">100</span>}
</code></pre>
<h5 data-id="heading-18">(2) ç§’æ€å•†å“</h5>
<pre><code class="hljs language-shell" lang="shell">curl -X POST http://localhost:8080/seckill/1001/user001
<span class="hljs-meta prompt_"># </span><span class="bash">æˆåŠŸå“åº”ï¼š{<span class="hljs-string">"code"</span>:200,<span class="hljs-string">"message"</span>:<span class="hljs-string">"ç§’æ€æˆåŠŸ"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-literal">true</span>}</span>
<span class="hljs-meta prompt_"># </span><span class="bash">é‡å¤ä¸‹å•å“åº”ï¼š{<span class="hljs-string">"code"</span>:500,<span class="hljs-string">"message"</span>:<span class="hljs-string">"è¯·å‹¿é‡å¤ç§’æ€"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-literal">false</span>}</span>
<span class="hljs-meta prompt_"># </span><span class="bash">åº“å­˜ä¸è¶³å“åº”ï¼š{<span class="hljs-string">"code"</span>:500,<span class="hljs-string">"message"</span>:<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-literal">false</span>}</span>
</code></pre>
<h5 data-id="heading-19">(3) é‡ç½®åº“å­˜</h5>
<pre><code class="hljs language-css" lang="css">curl -X POST http://localhost:<span class="hljs-number">8080</span>/seckill/reset/<span class="hljs-number">1001</span>/<span class="hljs-number">100</span>
# å“åº”ç¤ºä¾‹ï¼š{"<span class="hljs-selector-tag">code</span>":<span class="hljs-number">200</span>,<span class="hljs-string">"message"</span>:<span class="hljs-string">"é‡ç½®åº“å­˜æˆåŠŸ"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-number">100</span>}
</code></pre>
<h3 data-id="heading-20">å››ã€æ€»ç»“</h3>
<h4 data-id="heading-21">æ ¸å¿ƒå…³é”®ç‚¹å›é¡¾</h4>
<ol>
<li><strong>åˆ†ç‰‡é”ä¼˜åŒ–</strong>ï¼šæŒ‰å•†å“IDå“ˆå¸Œåˆ†ç‰‡ï¼Œé¿å…æ‰€æœ‰ç§’æ€è¯·æ±‚ç«äº‰åŒä¸€æŠŠé”ï¼Œæå‡å¹¶å‘èƒ½åŠ›ï¼›Redissoné”ä¿è¯åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é”å®‰å…¨æ€§ï¼Œè‡ªåŠ¨è¿‡æœŸ+finallyè§£é”é¿å…æ­»é”ã€‚</li>
<li><strong>åŸå­æ€§ä¿éšœ</strong>ï¼šLuaè„šæœ¬å°†ã€Œåº“å­˜æ ¡éªŒã€æ‰£å‡ã€ç”¨æˆ·è®°å½•ã€å°è£…ä¸ºåŸå­æ“ä½œï¼Œå½»åº•è§£å†³è¶…å–å’Œé‡å¤ä¸‹å•é—®é¢˜ã€‚</li>
<li><strong>é€šç”¨ç»„ä»¶è®¾è®¡</strong>ï¼šé€šè¿‡é…ç½®åŒ–åº“å­˜ã€æ ‡å‡†åŒ–æ¥å£ï¼Œæ”¯æŒä»»æ„æ•°é‡å•†å“çš„ç§’æ€ï¼Œåªéœ€ä¿®æ”¹<code>application.yml</code>ä¸­çš„<code>seckill.init-stock</code>å³å¯æ‰©å±•å•†å“ã€‚</li>
</ol>
<h4 data-id="heading-22">æ‰©å±•å»ºè®®</h4>
<ul>
<li>é«˜å¹¶å‘ä¼˜åŒ–ï¼šæ¥å£å±‚å¢åŠ Guava RateLimiteré™æµï¼Œé¿å…è¯·æ±‚å‹å®åç«¯ï¼›</li>
<li>è®¢å•è½åº“ï¼šç§’æ€æˆåŠŸåå¼‚æ­¥å°†è®¢å•å†™å…¥æ•°æ®åº“ï¼ˆå¦‚RabbitMQï¼‰ï¼Œæå‡å“åº”é€Ÿåº¦ï¼›</li>
<li>é›†ç¾¤é€‚é…ï¼šRedissoné…ç½®æ”¹ä¸ºé›†ç¾¤æ¨¡å¼ï¼ˆ<code>config.useClusterServers()</code>ï¼‰ï¼Œé€‚é…Redisé›†ç¾¤ï¼›</li>
<li>ç›‘æ§å‘Šè­¦ï¼šå¢åŠ Redisåº“å­˜ã€é”ç«äº‰ã€ç§’æ€æˆåŠŸç‡çš„ç›‘æ§ï¼Œå¼‚å¸¸æ—¶åŠæ—¶å‘Šè­¦ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜ä¸è°¢é£æœºï¼šä¸€åœºå…³äºJavaæŠ€æœ¯æ ˆçš„â€œç”Ÿæ­»æ—¶é€Ÿâ€]]></title>    <link>https://juejin.cn/post/7570243451724595227</link>    <guid>https://juejin.cn/post/7570243451724595227</guid>    <pubDate>2025-11-09T13:20:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570243451724595227" data-draft-id="7569945160870101038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜ä¸è°¢é£æœºï¼šä¸€åœºå…³äºJavaæŠ€æœ¯æ ˆçš„â€œç”Ÿæ­»æ—¶é€Ÿâ€"/> <!----> <meta itemprop="datePublished" content="2025-11-09T13:20:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦å°”æ‘©æ–¯çš„å¼Ÿå­"/> <meta itemprop="url" content="https://juejin.cn/user/622743759107883"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜ä¸è°¢é£æœºï¼šä¸€åœºå…³äºJavaæŠ€æœ¯æ ˆçš„â€œç”Ÿæ­»æ—¶é€Ÿâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/622743759107883/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦å°”æ‘©æ–¯çš„å¼Ÿå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T13:20:08.000Z" title="Sun Nov 09 2025 13:20:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢è¯•å®˜ä¸è°¢é£æœºï¼šä¸€åœºå…³äºJavaæŠ€æœ¯æ ˆçš„â€œç”Ÿæ­»æ—¶é€Ÿâ€</h2>
<h3 data-id="heading-1">åœºæ™¯è®¾å®šï¼šæŸå¤§å‚é«˜çº§åç«¯å¼€å‘å²—é¢è¯•ç°åœº</h3>
<p><strong>é¢è¯•å®˜</strong>ï¼šä¸¥è‚ƒã€å†·é™ï¼Œçœ¼ç¥å¦‚åˆ€ï¼Œæ‰‹é‡Œæ‹¿ç€ä¸€ä»½ç®€å†ã€‚</p>
<p><strong>ç¨‹åºå‘˜</strong>ï¼šè°¢é£æœºï¼Œæ˜µç§°â€œæ°´è´§â€ï¼Œç©¿æ ¼å­è¡«ï¼Œå¤´å‘å¾®ä¹±ï¼Œä½†çœ¼ç¥ä¸­é€ç€ä¸€ä¸å€”å¼ºã€‚ä»–åˆšä»è€å®¶â€œé£â€åˆ°åŒ—äº¬å‚åŠ é¢è¯•ï¼Œè‡ªç§°â€œä¸ºæ¢¦æƒ³æ‰“å·¥â€ã€‚</p>
<hr/>
<h4 data-id="heading-2">ğŸ“Œ ç¬¬ä¸€è½®ï¼šåŸºç¡€æ‰“åº• â€”â€” è¯­è¨€ä¸å¹³å°ï¼Œæ„å»ºå·¥å…·ï¼Œæ¡†æ¶åˆæ¢</h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šè°¢é£æœºï¼Œå…ˆè¯´è¯´ä½ å¯¹ Java SE 8/11/17 çš„ç†è§£ï¼Ÿæœ‰ä»€ä¹ˆå…³é”®ç‰¹æ€§æ˜¯ä½ è§‰å¾—å¿…é¡»æŒæ¡çš„ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆæŒ å¤´ï¼‰å—¯â€¦â€¦8æ˜¯é•¿æœŸæ”¯æŒç‰ˆï¼Œ11æ˜¯ä¸‹ä¸€ä¸ªé•¿æœŸæ”¯æŒï¼Œ17ä¹Ÿæ˜¯â€¦â€¦æˆ‘ç”¨å¾—æœ€å¤šçš„æ˜¯8ï¼Œå› ä¸ºå…¬å¸è€ç³»ç»Ÿè¿˜åœ¨è·‘ã€‚æ–°ç‰¹æ€§å˜›ï¼Œæˆ‘è§‰å¾— <strong>Lambda è¡¨è¾¾å¼</strong>å’Œ <strong>Stream API</strong> æ˜¯é‡ç‚¹ï¼Œå†™ä»£ç å¿«å¤šäº†ï¼Œä»¥å‰è¦å¾ªç¯ï¼Œç°åœ¨ä¸€è¡Œæå®šï¼</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç‚¹å¤´ï¼‰å¾ˆå¥½ï¼Œéå¸¸åˆ°ä½ã€‚é‚£ä½ è¯´è¯´ï¼Œä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ <strong>JVM è°ƒä¼˜</strong>ï¼Ÿæ¯”å¦‚å †å†…å­˜è®¾ç½®ã€GC ç­–ç•¥é€‰æ‹©ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆè‡ªä¿¡ï¼‰å•Šè¿™ä¸ªæˆ‘çŸ¥é“ï¼å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œç¨‹åºå°±OOMï¼ŒæŒ‚äº†ã€‚æ‰€ä»¥å¾—è®¾å¥½åˆå§‹å †å’Œæœ€å¤§å †ï¼Œæ¯”å¦‚ <code>-Xms512m -Xmx2g</code>ã€‚GCé€‰ä¸ªåˆé€‚çš„ï¼Œæ¯”å¦‚å¹´è½»ä»£å°ç‚¹ï¼Œè€å¹´ä»£å¤§ç‚¹ï¼Œé¿å…é¢‘ç¹Full GCã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆå¾®ç¬‘ï¼‰ä¸é”™ï¼Œæœ‰ç»éªŒã€‚å†é—®ä¸€ä¸‹ï¼Œä½ ç”¨è¿‡ Maven å—ï¼ŸMaven çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›é˜¶æ®µï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆå¿«é€Ÿï¼‰æœ‰ï¼<code>compile</code>ã€<code>test</code>ã€<code>package</code>ã€<code>install</code>ã€<code>deploy</code>ã€‚æˆ‘æ¯æ¬¡æ‰“åŒ…éƒ½ç”¨ <code>mvn package</code>ï¼Œç„¶åç›´æ¥éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆèµè®¸ï¼‰éå¸¸æ¸…æ™°ã€‚æœ€åä¸€ä¸ªé—®é¢˜ï¼šä½ æœ‰æ²¡æœ‰ç”¨è¿‡ Gradleï¼Ÿç›¸æ¯” Mavenï¼Œå®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆçŠ¹è±«ï¼‰å—¯â€¦â€¦æœ‰è¯•è¿‡ï¼Œé…ç½®æ–‡ä»¶æ˜¯ <code>build.gradle</code>ï¼Œæ¯” <code>pom.xml</code> å¥½çœ‹ä¸€ç‚¹ï¼Œæ‰§è¡Œæ›´å¿«ï¼Œè„šæœ¬ä¹Ÿçµæ´»ï¼Œåƒå†™ä»£ç ä¸€æ ·ã€‚ä¸è¿‡â€¦â€¦æˆ‘ä¸»è¦è¿˜æ˜¯ç”¨ Mavenã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç‚¹å¤´ï¼‰å¾ˆå¥½ï¼Œæœ‰å¯¹æ¯”æ€è€ƒã€‚çœ‹æ¥ä½ ä¸æ˜¯åªä¼šç”¨ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯çŸ¥é“é€‰æ‹©çš„é€»è¾‘ã€‚</p>
<hr/>
<h4 data-id="heading-3">ğŸ“Œ ç¬¬äºŒè½®ï¼šæ¡†æ¶ä¸æ•°æ®åº“ â€”â€” æ„å»ºåº”ç”¨ï¼Œè¿æ¥æ•°æ®</h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ã€‚ç°åœ¨è¿›å…¥å®æˆ˜åœºæ™¯ã€‚å‡è®¾ä½ è¦åšä¸€ä¸ª <strong>å†…å®¹ç¤¾åŒº</strong>ï¼Œç”¨æˆ·å¯ä»¥å‘å¸–ã€è¯„è®ºã€ç‚¹èµã€‚ä½ ä¼šé€‰æ‹©ä»€ä¹ˆæ¡†æ¶ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆæ¿€åŠ¨ï¼‰å½“ç„¶æ˜¯ <strong>Spring Boot</strong>ï¼å¤ªæ–¹ä¾¿äº†ï¼Œè‡ªåŠ¨é…ç½®ï¼Œå†…åµŒ Tomcatï¼Œå¯åŠ¨å¿«ï¼Œè¿˜è‡ªå¸¦ Actuator ç›‘æ§ï¼Œè°ƒè¯•è´¼çˆ½ï¼</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç¬‘ï¼‰ä½ è¿™â€œè´¼çˆ½â€è¯´å¾—çœŸå½¢è±¡ã€‚é‚£ä½ è¯´è¯´ï¼Œä½ å¦‚ä½•å®ç°ç”¨æˆ·ç‚¹èµåŠŸèƒ½ï¼Ÿä¼šç”¨åˆ°å“ªäº›æŠ€æœ¯ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆæ€è€ƒï¼‰é¦–å…ˆï¼Œå‰ç«¯å‘ä¸ª <code>/like</code> è¯·æ±‚ï¼Œåç«¯æ¥æ”¶ï¼Œç„¶åè°ƒç”¨æœåŠ¡å±‚ï¼Œç”¨ <strong>Redis</strong> å­˜ä¸€ä¸ª <code>set</code>ï¼Œæ¯”å¦‚ <code>user:123:liked:post:456</code>ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚å­˜åœ¨å°±ä¸è®©é‡å¤ç‚¹èµï¼Œä¸å­˜åœ¨å°±åŠ è¿›å»ï¼Œå†æ›´æ–°æ•°æ®åº“ã€‚è¿™æ ·æ€§èƒ½é«˜ï¼Œä¸é”è¡¨ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç‚¹å¤´ï¼‰éå¸¸æ£’ï¼è¿™æ˜¯å…¸å‹çš„ <strong>ç¼“å­˜ç©¿é€ + é™æµé˜²åˆ·</strong> çš„è®¾è®¡æ€è·¯ã€‚é‚£æ•°æ®åº“å±‚é¢å‘¢ï¼Ÿä½ ç”¨çš„æ˜¯å“ªç§æŒä¹…åŒ–æ–¹æ¡ˆï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šæˆ‘ä¸€èˆ¬ç”¨ <strong>MyBatis</strong>ï¼ŒSQL å†™å¾—æ¸…æ¥šï¼Œæ§åˆ¶åŠ›å¼ºï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢ã€‚æ¯”å¦‚æŸ¥å¸–å­åˆ—è¡¨ï¼Œå¸¦åˆ†é¡µã€æ’åºã€ç­›é€‰æ¡ä»¶ï¼Œå†™ä¸ª XML å¾ˆæ–¹ä¾¿ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç»§ç»­å¼•å¯¼ï¼‰å¾ˆå¥½ã€‚é‚£å¦‚æœæ•°æ®é‡å¤§ï¼Œéœ€è¦åšç‰ˆæœ¬è¿ç§»æˆ–ç»“æ„å˜æ›´å‘¢ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆç•¥æ˜¾ç´§å¼ ï¼‰è¿™ä¸ªâ€¦â€¦æˆ‘å¬è¯´è¿‡ <strong>Flyway</strong>ï¼Œå¥½åƒèƒ½è‡ªåŠ¨æ‰§è¡Œ SQL è„šæœ¬ï¼ŒæŒ‰ç‰ˆæœ¬å·æ¥ã€‚æˆ‘ä»¬é¡¹ç›®é‡Œç”¨è¿‡ä¸€æ¬¡ï¼Œå¥½åƒå« <code>V1__init.sql</code> è¿™ç§å‘½åã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆå¾®ç¬‘ï¼‰å¯¹ï¼Œè¿™å°±æ˜¯æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶ã€‚ä½ ä¸ä»…ç”¨äº†ï¼Œè¿˜çŸ¥é“å‘½åè§„èŒƒï¼Œå¾ˆä¸“ä¸šã€‚</p>
<hr/>
<h4 data-id="heading-4">ğŸ“Œ ç¬¬ä¸‰è½®ï¼šå¾®æœåŠ¡ä¸å®‰å…¨ â€”â€” æ‹†è§£ç³»ç»Ÿï¼Œä¿éšœå®‰å…¨</h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šç°åœ¨ç³»ç»Ÿè§„æ¨¡å˜å¤§äº†ï¼Œè¦æ‹†æˆå¤šä¸ªå¾®æœåŠ¡ã€‚ä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆè®¤çœŸï¼‰æˆ‘å»ºè®®ç”¨ <strong>Spring Cloud</strong>ï¼Œé…åˆ <strong>Nacos</strong> åšæ³¨å†Œä¸­å¿ƒï¼Œ<strong>OpenFeign</strong> åšæœåŠ¡è°ƒç”¨ï¼Œ<strong>Sentinel</strong> åšç†”æ–­é™æµï¼Œ<strong>Gateway</strong> åšç½‘å…³ç»Ÿä¸€å…¥å£ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆèµè®¸ï¼‰æ€è·¯æ¸…æ™°ã€‚é‚£å¦‚æœæŸä¸ªæœåŠ¡çªç„¶å®•æœºï¼Œå…¶ä»–æœåŠ¡æ€ä¹ˆæ„ŸçŸ¥ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆè‡ªä¿¡ï¼‰é  <strong>Eureka</strong>ï¼ŒæœåŠ¡æ³¨å†Œä¸­å¿ƒä¼šå®šæ—¶å¿ƒè·³æ£€æµ‹ï¼Œå‘ç°æœåŠ¡ä¸å¯ç”¨å°±å‰”é™¤ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨é‡è¯•æˆ–é™çº§ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ã€‚é‚£ç”¨æˆ·ç™»å½•æ€ä¹ˆä¿è¯å®‰å…¨ï¼Ÿä½ ç”¨è¿‡ JWT å—ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆç‚¹å¤´ï¼‰ç”¨è¿‡ï¼ç™»å½•æˆåŠŸåç”Ÿæˆä¸€ä¸ª <strong>JWT Token</strong>ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œç­¾åï¼Œå‰ç«¯å­˜åˆ° localStorageï¼Œæ¯æ¬¡è¯·æ±‚å¸¦ä¸Š <code>Authorization: Bearer &lt;token&gt;</code>ï¼Œåç«¯ç”¨ <strong>Spring Security</strong> è§£æéªŒè¯ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆå¾®ç¬‘ï¼‰éå¸¸æ ‡å‡†çš„å›ç­”ã€‚æœ€åä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬è¦æ¥å…¥ <strong>æ”¯ä»˜ç³»ç»Ÿ</strong>ï¼Œæ¯”å¦‚å¾®ä¿¡æ”¯ä»˜ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šï¼ˆç•¥æ˜¾çŠ¹è±«ï¼‰å—¯â€¦â€¦æˆ‘äº†è§£è¿‡ï¼Œè¦å¯¹æ¥å¾®ä¿¡çš„ APIï¼Œç”¨ HTTPS è¯·æ±‚ï¼Œç­¾ååŠ å¯†ï¼Œç„¶åå¤„ç†å›è°ƒé€šçŸ¥ã€‚å¯èƒ½è¿˜è¦ç”¨ <strong>RabbitMQ</strong> å¼‚æ­¥å¤„ç†è®¢å•çŠ¶æ€æ›´æ–°ï¼Œé¿å…é˜»å¡ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šï¼ˆç‚¹å¤´ï¼‰æ€è·¯å¯¹ï¼Œä½†ç»†èŠ‚ä¸Šè¿˜å¯ä»¥æ›´æ·±å…¥ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œä»Šå¤©çš„è¡¨ç°å·²ç»è¶…å‡ºé¢„æœŸã€‚</p>
<hr/>
<p><strong>é¢è¯•å®˜</strong>ï¼šè°¢é£æœºï¼Œä½ çš„å›ç­”æ•´ä½“éå¸¸æ‰å®ï¼Œå°¤å…¶åœ¨ <strong>ç¼“å­˜è®¾è®¡</strong> å’Œ <strong>å¾®æœåŠ¡æ¶æ„</strong> ä¸Šå±•ç°äº†è‰¯å¥½çš„å·¥ç¨‹æ€ç»´ã€‚è™½ç„¶æœ‰äº›ç»†èŠ‚ç•¥æ˜¾æ¨¡ç³Šï¼Œä½†ä½ æœ‰æ„è¯†å»æ€è€ƒï¼Œè¿™æ˜¯æœ€é‡è¦çš„å“è´¨ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šä½ å…ˆå›å»ç­‰é€šçŸ¥å§ï¼Œæˆ‘ä»¬ä¼šåœ¨ 3 ä¸ªå·¥ä½œæ—¥å†…è”ç³»ä½ ã€‚ç¥ä½ å¥½è¿ï¼</p>
<hr/>
<h3 data-id="heading-5">âœ… æŠ€æœ¯è¦ç‚¹æ€»ç»“ï¼ˆå°ç™½ä¹Ÿèƒ½å­¦ä¼šï¼‰</h3>
<h4 data-id="heading-6">1. Java SE 8/11/17 æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>Lambda &amp; Stream API</strong>ï¼šå‡½æ•°å¼ç¼–ç¨‹ï¼Œç®€åŒ–é›†åˆæ“ä½œï¼Œæå‡å¯è¯»æ€§ã€‚</li>
<li><strong>JVM è°ƒä¼˜</strong>ï¼šåˆç†è®¾ç½® <code>-Xms</code>, <code>-Xmx</code>, é€‰æ‹©åˆé€‚ GCï¼ˆG1/ZGCï¼‰ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚</li>
</ul>
<h4 data-id="heading-7">2. æ„å»ºå·¥å…·å¯¹æ¯”</h4>
<ul>
<li><strong>Maven</strong>ï¼šåŸºäº POMï¼Œä¾èµ–ç®¡ç†å¼ºå¤§ï¼Œç”Ÿå‘½å‘¨æœŸæ˜ç¡®ã€‚</li>
<li><strong>Gradle</strong>ï¼šåŸºäº Groovy/Kotlin DSLï¼Œé…ç½®çµæ´»ï¼Œæ„å»ºé€Ÿåº¦å¿«ï¼Œé€‚åˆå¤æ‚é¡¹ç›®ã€‚</li>
</ul>
<h4 data-id="heading-8">3. Spring Boot å®æˆ˜è®¾è®¡</h4>
<ul>
<li><strong>è‡ªåŠ¨é…ç½®</strong>ï¼šå‡å°‘æ ·æ¿ä»£ç ï¼Œå¿«é€Ÿå¯åŠ¨ã€‚</li>
<li><strong>Actuator</strong>ï¼šæä¾›å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡ç›‘æ§æ¥å£ï¼Œä¾¿äºè¿ç»´ã€‚</li>
</ul>
<h4 data-id="heading-9">4. ç¼“å­˜è®¾è®¡ï¼ˆå†…å®¹ç¤¾åŒºç‚¹èµåœºæ™¯ï¼‰</h4>
<ul>
<li><strong>Redis Set</strong>ï¼šå­˜å‚¨ç”¨æˆ·å·²ç‚¹èµçš„å¸–å­ IDï¼ŒO(1) æŸ¥æ‰¾ï¼Œé˜²æ­¢é‡å¤ç‚¹èµã€‚</li>
<li><strong>ç¼“å­˜+æ•°æ®åº“åŒå†™</strong>ï¼šå…ˆå†™ç¼“å­˜ï¼Œå†å¼‚æ­¥å†™æ•°æ®åº“ï¼Œä¿è¯ä¸€è‡´æ€§ã€‚</li>
</ul>
<h4 data-id="heading-10">5. æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶ï¼ˆFlywayï¼‰</h4>
<ul>
<li>é€šè¿‡ <code>V1__xxx.sql</code>ã€<code>V2__xxx.sql</code> æ–‡ä»¶åç®¡ç†ç‰ˆæœ¬ã€‚</li>
<li>è‡ªåŠ¨æ‰§è¡Œï¼Œé¿å…äººå·¥é—æ¼ï¼Œä¿è¯ç¯å¢ƒä¸€è‡´æ€§ã€‚</li>
</ul>
<h4 data-id="heading-11">6. å¾®æœåŠ¡æ¶æ„æ ¸å¿ƒç»„ä»¶</h4>
<ul>
<li><strong>Nacos/Eureka</strong>ï¼šæœåŠ¡æ³¨å†Œä¸å‘ç°ã€‚</li>
<li><strong>OpenFeign</strong>ï¼šå£°æ˜å¼ HTTP å®¢æˆ·ç«¯ï¼Œç®€åŒ–è¿œç¨‹è°ƒç”¨ã€‚</li>
<li><strong>Sentinel</strong>ï¼šæµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ï¼Œä¿éšœç³»ç»Ÿç¨³å®šæ€§ã€‚</li>
<li><strong>Gateway</strong>ï¼šç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±ã€é‰´æƒã€é™æµã€‚</li>
</ul>
<h4 data-id="heading-12">7. å®‰å…¨æœºåˆ¶ï¼ˆJWT + Spring Securityï¼‰</h4>
<ul>
<li><strong>JWT</strong>ï¼šæ— çŠ¶æ€è®¤è¯ï¼Œå‰åç«¯åˆ†ç¦»å‹å¥½ï¼Œé€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li>
<li><strong>Spring Security</strong>ï¼šé›†æˆæ‹¦æˆªå™¨ï¼Œè§£æ Tokenï¼Œæ ¡éªŒæƒé™ã€‚</li>
</ul>
<h4 data-id="heading-13">8. æ”¯ä»˜ç³»ç»Ÿå¯¹æ¥è¦ç‚¹</h4>
<ul>
<li>ä½¿ç”¨ HTTPS + RSA/MD5 ç­¾åç¡®ä¿é€šä¿¡å®‰å…¨ã€‚</li>
<li>å›è°ƒé€šçŸ¥éœ€éªŒè¯ç­¾åå¹¶å¹‚ç­‰å¤„ç†ï¼Œé˜²æ­¢é‡å¤æ‰£æ¬¾ã€‚</li>
<li>æ¨èä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ RabbitMQï¼‰å¼‚æ­¥å¤„ç†è®¢å•çŠ¶æ€ï¼Œæå‡å“åº”é€Ÿåº¦ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å­¦ä¹ å»ºè®®</strong>ï¼šä¸è¦åªèƒŒç­”æ¡ˆï¼Œç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯ç»ƒä¹ ã€‚æ¯”å¦‚è‡ªå·±æ­å»ºä¸€ä¸ªâ€œå†…å®¹ç¤¾åŒºâ€åŸå‹ï¼Œä»ç”¨æˆ·æ³¨å†Œ â†’ å‘å¸– â†’ ç‚¹èµ â†’ åˆ†äº« â†’ æ”¯ä»˜ï¼Œå…¨æµç¨‹èµ°ä¸€éï¼ŒæŠ€æœ¯æ ˆè‡ªç„¶å°±ç†Ÿäº†ï¼</p>
</blockquote>
<hr/>
<blockquote>
<p>ğŸ“Œ <strong>æ–‡ç« æ ‡ç­¾</strong>ï¼š#Java #é¢è¯•é¢˜ #SpringBoot #Redis #å¾®æœåŠ¡ #JWT #Maven #é¢è¯•ç»éªŒ #åç«¯å¼€å‘ #æŠ€æœ¯æˆé•¿</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“10ä¸‡å¤©åˆ†åŒºæ¥è¢­ï¼šä¸€ä¸ªè®©StarRockså´©æºƒã€Kuduæ‹’ç»ã€HDFSå¾®ç¬‘çš„æ¶æ„æ•…äº‹]]></title>    <link>https://juejin.cn/post/7579439226517733382</link>    <guid>https://juejin.cn/post/7579439226517733382</guid>    <pubDate>2025-12-03T07:47:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579439226517733382" data-draft-id="7579179625462677546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“10ä¸‡å¤©åˆ†åŒºæ¥è¢­ï¼šä¸€ä¸ªè®©StarRockså´©æºƒã€Kuduæ‹’ç»ã€HDFSå¾®ç¬‘çš„æ¶æ„æ•…äº‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T07:47:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="shengjk1"/> <meta itemprop="url" content="https://juejin.cn/user/2647279732524957"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“10ä¸‡å¤©åˆ†åŒºæ¥è¢­ï¼šä¸€ä¸ªè®©StarRockså´©æºƒã€Kuduæ‹’ç»ã€HDFSå¾®ç¬‘çš„æ¶æ„æ•…äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279732524957/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    shengjk1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T07:47:44.000Z" title="Wed Dec 03 2025 07:47:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="gruvbox-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#282828}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#ebdbb2}.hljs-deletion,.hljs-formula,.hljs-keyword,.hljs-link,.hljs-selector-tag{color:#fb4934}.hljs-built_in,.hljs-emphasis,.hljs-name,.hljs-quote,.hljs-strong,.hljs-title,.hljs-variable{color:#83a598}.hljs-attr,.hljs-params,.hljs-template-tag,.hljs-type{color:#fabd2f}.hljs-builtin-name,.hljs-doctag,.hljs-literal,.hljs-number{color:#8f3f71}.hljs-code,.hljs-meta,.hljs-regexp,.hljs-selector-id,.hljs-template-variable{color:#fe8019}.hljs-addition,.hljs-meta-string,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-string,.hljs-symbol{color:#b8bb26}.hljs-attribute,.hljs-bullet,.hljs-class,.hljs-function,.hljs-function .hljs-keyword,.hljs-meta-keyword,.hljs-selector-pseudo,.hljs-tag{color:#8ec07c}.hljs-comment{color:#928374}.hljs-link_label,.hljs-literal,.hljs-number{color:#d3869b}.hljs-comment,.hljs-emphasis{font-style:italic}.hljs-section,.hljs-strong,.hljs-tag{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ shengjk1ï¼Œå¤šå¹´å¤§å‚ç»éªŒï¼ŒåŠªåŠ›æ„å»º é€šä¿—æ˜“æ‡‚çš„ã€å¥½ç©çš„ç¼–ç¨‹è¯­è¨€æ•™ç¨‹ã€‚ æ¬¢è¿å…³æ³¨ï¼ä½ ä¼šæœ‰å¦‚ä¸‹æ”¶ç›Šï¼š</p>
<ol>
<li>äº†è§£å¤§å‚ç»éªŒ</li>
<li>æ‹¥æœ‰å’Œå¤§å‚ç›¸åŒ¹é…çš„æŠ€æœ¯ç­‰</li>
</ol>
<p>å¸Œæœ›çœ‹ä»€ä¹ˆï¼Œè¯„è®ºæˆ–è€…ç§ä¿¡å‘Šè¯‰æˆ‘ï¼</p>
<p>@<a href="https://link.juejin.cn?target=%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<h2 data-id="heading-0">ä¸€ã€é—®é¢˜èµ·æºï¼šåŒä¸€ä¸ª"åˆ†åŒº"ï¼Œä¸‰ç§å‘½è¿</h2>
<p>åœ¨å¤§æ•°æ®é¢†åŸŸï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€ä¸ªçŸ›ç›¾ç°è±¡ï¼š</p>
<ul>
<li><strong>HDFS + Hive/Iceberg</strong>ï¼šè½»æ¾ç®¡ç† 10 ä¸‡+ å¤©çº§åˆ†åŒºçš„è¡¨</li>
<li><strong>Kudu</strong>ï¼šå®˜æ–¹å»ºè®®ä¸è¶…è¿‡ 1,000 ä¸ª tabletï¼ˆç‰©ç†åˆ†ç‰‡ï¼‰</li>
<li><strong>StarRocks</strong>ï¼šå»ºè®®ä¸è¦è¶…è¿‡ 10 ä¸‡åˆ†åŒºï¼Œè¶…è¿‡ä¼šå¯¼è‡´ FE OOMã€æŸ¥è¯¢å»¶è¿Ÿé£™å‡</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># çœŸå®æ¡ˆä¾‹å¯¹æ¯”ï¼ˆ10 ä¸‡å¤©åˆ†åŒºï¼Œ3 å¹´æ•°æ®ï¼‰</span>
- HDFS + Icebergï¼šç¨³å®šè¿è¡Œï¼ŒæŸ¥è¯¢å»¶è¿Ÿ 2.1s
- StarRocksï¼šFE å†…å­˜ 480GB+ï¼Œç®€å•æŸ¥è¯¢å»¶è¿Ÿ 1800ms+ï¼Œé¢‘ç¹ Full GC
- Kuduï¼šæ‹’ç»åˆ›å»ºè¡¨ï¼ŒæŠ¥é”™ <span class="hljs-string">"Too many tablets: 100,000 exceeds limit of 10,000"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåŒæ ·çš„"10 ä¸‡åˆ†åŒº"ï¼Œåœ¨ä¸åŒç³»ç»Ÿè¡¨ç°å¤©å·®åœ°åˆ«ï¼Ÿ</strong><br/>
ç­”æ¡ˆä¸åœ¨å­˜å‚¨å±‚ï¼Œè€Œåœ¨<strong>å…ƒæ•°æ®æ¶æ„è®¾è®¡å“²å­¦</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€HDFSï¼šæ‰å¹³åŒ–å…ƒæ•°æ® + èŒè´£åˆ†ç¦»</h2>
<h3 data-id="heading-2">1. <strong>HDFS ä¸è®¤è¯†"åˆ†åŒº"</strong></h3>
<p>è¿™æ˜¯æœ€æ ¹æœ¬çš„è®¤çŸ¥ï¼š<strong>HDFS æ²¡æœ‰"é€»è¾‘åˆ†åŒº"æ¦‚å¿µ</strong>ã€‚å½“ Iceberg è¯´"10 ä¸‡ä¸ªåˆ†åŒº"ï¼ŒHDFS åªçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">/warehouse/sales/
    â”œâ”€â”€ <span class="hljs-attr">dt</span>=<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">01</span>/  <span class="hljs-comment"># æ™®é€šç›®å½•ï¼Œæ— ç‰¹æ®Šè¯­ä¹‰</span>
    â”œâ”€â”€ <span class="hljs-attr">dt</span>=<span class="hljs-number">2020</span>-<span class="hljs-number">01</span>-<span class="hljs-number">02</span>/  <span class="hljs-comment"># æ™®é€šç›®å½•</span>
    â””â”€â”€ ...             <span class="hljs-comment"># 10 ä¸‡ä¸ªæ™®é€šç›®å½•</span>
</code></pre>
<p>NameNode å†…å­˜ä¸­åªç»´æŠ¤ï¼š</p>
<ul>
<li><strong>ç›®å½•æ ‘ç»“æ„</strong>ï¼šæ¯ä¸ªç›®å½• â‰ˆ 108 bytesï¼ˆå®æµ‹ Hadoop 3.3.6ï¼‰</li>
<li><strong>æ–‡ä»¶åˆ° Block æ˜ å°„</strong>ï¼šæ¯ä¸ª block â‰ˆ 100 bytes</li>
<li><strong>Block åˆ° DataNode æ˜ å°„</strong>ï¼šå­˜å‚¨ä½ç½®ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-3">2. <strong>å…³é”®æ•°æ®ç»“æ„ï¼ˆHadoop 3.3.6 æºç ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// NameNode å†…å­˜æ ¸å¿ƒç»“æ„ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FSNamesystem</span> {
    <span class="hljs-comment">// 1. å‘½åç©ºé—´æ ‘ - è½»é‡çº§</span>
    INodeDirectory rootDir; <span class="hljs-comment">// 108 bytes/ç›®å½•</span>
    
    <span class="hljs-comment">// 2. å—æ˜ å°„ - é«˜æ•ˆå­˜å‚¨</span>
    BlocksMap blocksMap; <span class="hljs-comment">// LightWeightGSet ä¼˜åŒ–ï¼Œ100 bytes/block</span>
    
    <span class="hljs-comment">// 3. æ— ä¸šåŠ¡è¯­ä¹‰å­—æ®µï¼</span>
    <span class="hljs-comment">//    æ²¡æœ‰è¡Œæ•°ç»Ÿè®¡ã€æ²¡æœ‰min-maxå€¼ã€æ²¡æœ‰TTL</span>
}
</code></pre>
<h3 data-id="heading-4">3. <strong>10 ä¸‡"åˆ†åŒº"å†…å­˜æ¶ˆè€—å®æµ‹</strong></h3>






























<table><thead><tr><th>å…ƒæ•°æ®ç±»å‹</th><th>å†…å­˜å ç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>10 ä¸‡ç›®å½•</td><td>10.8 MB</td><td>108 bytes/ç›®å½• Ã— 100,000</td></tr><tr><td>100 ä¸‡æ–‡ä»¶</td><td>150 MB</td><td>150 bytes/æ–‡ä»¶ Ã— 1,000,000</td></tr><tr><td>800 ä¸‡ blocks</td><td>800 MB</td><td>100 bytes/block Ã— 8,000,000</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>&lt; 1GB</strong></td><td>NameNode é€šå¸¸é…ç½® 100GB+ å†…å­˜</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>å…³é”®ä¼˜åŠ¿</strong>ï¼šç›®å½•å…ƒæ•°æ®æç®€ï¼Œæ— ä¸šåŠ¡é€»è¾‘è´Ÿæ‹…ã€‚</p>
</blockquote>
<h3 data-id="heading-5">4. <strong>æ°´å¹³æ‰©å±•æœºåˆ¶ï¼šFederation</strong></h3>
<p>å½“å• NameNode è¾¾åˆ°æé™ï¼ŒHDFS é€šè¿‡ <strong>Router-based Federation</strong> æ°´å¹³æ‰©å±•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Client--&gt;Router
    Router--&gt;|/data/tenantA/*| NS1[Nameservice 1]
    Router--&gt;|/data/tenantB/*| NS2[Nameservice 2]
    NS1--&gt;NN1[NameNode 1]
    NS2--&gt;NN2[NameNode 2]
</code></pre>
<ul>
<li><strong>æŒ‚è½½è¡¨æœºåˆ¶</strong>ï¼šé€æ˜è·¯ç”±ä¸åŒè·¯å¾„åˆ°ä¸åŒå‘½åç©ºé—´</li>
<li><strong>ç”Ÿäº§å®æµ‹</strong>ï¼šé˜¿é‡Œäº‘ EMR é›†ç¾¤ç®¡ç† <strong>25 äº¿+ ç›®å½•</strong>ï¼Œ200+ NameNode è”é‚¦</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€Kuduï¼šä¸ºé«˜æ€§èƒ½ OLAP ç‰ºç‰²æ‰©å±•æ€§</h2>
<h3 data-id="heading-7">1. <strong>Kudu çš„æ¶æ„å“²å­¦</strong></h3>
<p>Kudu ä¸º<strong>ä½å»¶è¿Ÿåˆ†æ</strong>è®¾è®¡ï¼Œå¿…é¡»å†…ç½®æ™ºèƒ½ï¼š</p>
<ul>
<li>åˆ—å¼å­˜å‚¨ + ç¼–ç ä¼˜åŒ–</li>
<li>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ (MVCC)</li>
<li>èƒŒæ™¯å‹ç¼© (Compaction)</li>
<li>ç»Ÿè®¡ä¿¡æ¯ç”¨äºæŸ¥è¯¢ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-8">2. <strong>å…ƒæ•°æ®å†…å­˜ç»“æ„ï¼ˆKudu 1.16 æºç ï¼‰</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Kudu Tablet å…ƒæ•°æ®ï¼ˆC++ ç»“æ„ï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">TabletMetadata</span> {
  string tablet_id;           <span class="hljs-comment">// 36 bytes (UUID)</span>
  Schema schema;              <span class="hljs-comment">// 500+ bytes (åˆ—å®šä¹‰+ç¼–ç )</span>
  PartitionSchema partition; <span class="hljs-comment">// 200+ bytes (åˆ†åŒºé”®+èŒƒå›´)</span>
  vector&lt;RowSetMetadata&gt; rowsets; <span class="hljs-comment">// 300+ bytes/rowset (æ•°æ®é›†)</span>
  <span class="hljs-type">int64_t</span> last_durable_mrs_id; <span class="hljs-comment">// 8 bytes (MemRowSet ID)</span>
  <span class="hljs-comment">// ... å‰¯æœ¬çŠ¶æ€ã€Compactionå†å²ã€ç»Ÿè®¡ä¿¡æ¯</span>
}; <span class="hljs-comment">// æ€»è®¡ â‰ˆ 1.5KB/tablet</span>
</code></pre>
<h3 data-id="heading-9">3. <strong>10 ä¸‡åˆ†åŒºä¸ºä»€ä¹ˆä¸å¯èƒ½ï¼Ÿ</strong></h3>
<ul>
<li>
<p><strong>å†…å­˜æ¶ˆè€—</strong>ï¼š<br/>
<code>100,000 tablets Ã— 1.5KB = 150GB</code>ï¼ˆä»…å…ƒæ•°æ®ï¼Œä¸åŒ…æ‹¬ç¼“å­˜ï¼‰</p>
</li>
<li>
<p><strong>Master å•ç‚¹ç“¶é¢ˆ</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰å…ƒæ•°æ®å¿…é¡»åœ¨ Master å†…å­˜</li>
<li>Tablet æœåŠ¡å™¨å¿ƒè·³éœ€å…¨å±€å¤„ç†</li>
<li>æ— æ°´å¹³æ‰©å±•æœºåˆ¶ï¼ˆæœ€æ–°ç‰ˆæœ¬ä»ä¸æ”¯æŒ Master åˆ†ç‰‡ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ“ä½œå¤æ‚åº¦</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Kudu åˆ†åŒºè£å‰ªä¼ªä»£ç </span>
<span class="hljs-function">vector&lt;Tablet*&gt; <span class="hljs-title">GetTabletsForRange</span><span class="hljs-params">(ScanSpec spec)</span> </span>{
  vector&lt;Tablet*&gt; result;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; tablet : all_tablets) { <span class="hljs-comment">// 10ä¸‡æ¬¡è¿­ä»£!</span>
    <span class="hljs-keyword">if</span> (tablet-&gt;<span class="hljs-built_in">PartitionOverlaps</span>(spec.range)) {
      result.<span class="hljs-built_in">push_back</span>(tablet);
    }
  }
  <span class="hljs-keyword">return</span> result; <span class="hljs-comment">// O(n) å¤æ‚åº¦</span>
}
</code></pre>
<ul>
<li>10 ä¸‡ tablet æ—¶ï¼Œä»…å…ƒæ•°æ®éå†è€—æ—¶ &gt; 3 ç§’</li>
<li>èƒŒæ™¯ç»´æŠ¤ä»»åŠ¡ï¼ˆCompaction/Rebalancingï¼‰æ— æ³•åŠæ—¶è°ƒåº¦</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">4. <strong>Kudu å®˜æ–¹é™åˆ¶ä¸å»ºè®®</strong></h3>
<blockquote>
<p>"Kudu ä¸æ”¯æŒè¶…è¿‡ 10,000 ä¸ª tablet çš„è¡¨ã€‚å¯¹äºæ—¶é—´åºåˆ—æ•°æ®ï¼Œä½¿ç”¨å¤åˆåˆ†åŒºé”®ï¼ˆå¦‚ (hash(host), date)ï¼‰æ§åˆ¶ tablet æ€»æ•°ã€‚"<br/>
â€”â€” Kudu å®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<h2 data-id="heading-11">å››ã€StarRocksï¼šä¸ºæè‡´æŸ¥è¯¢æ€§èƒ½ä»˜å‡ºçš„ä»£ä»·</h2>
<h3 data-id="heading-12">1. <strong>10 ä¸‡åˆ†åŒºç¡¬é™åˆ¶çš„çœŸç›¸</strong></h3>
<p>StarRocks 3.x+ï¼š</p>
<blockquote>
<p>"è¶…è¿‡ 100,000 ä¸ªåˆ†åŒºä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>FE å†…å­˜å‹åŠ›æ˜¾è‘—å¢åŠ </li>
<li>BE compaction æ€§èƒ½ä¸‹é™</li>
<li>å…ƒæ•°æ®æ“ä½œå˜æ…¢<br/>
å»ºè®®ä½¿ç”¨ Iceberg è¡¨å¤„ç†æµ·é‡åˆ†åŒºåœºæ™¯ã€‚"</li>
</ul>
</blockquote>
<h3 data-id="heading-13">2. <strong>FE å…ƒæ•°æ®å†…å­˜çˆ†ç‚¸ï¼ˆå®æµ‹æ•°æ®ï¼‰</strong></h3>









































<table><thead><tr><th>å…ƒæ•°æ®ç»„ä»¶</th><th>10,000 åˆ†åŒº</th><th>100,000 åˆ†åŒº</th><th>å†…å­˜å¢é•¿</th></tr></thead><tbody><tr><td>Partition å¯¹è±¡</td><td>10GB</td><td>100GB+</td><td>10x</td></tr><tr><td>Tablet å…ƒæ•°æ®</td><td>50GB</td><td>500GB+</td><td>10x</td></tr><tr><td>å‰¯æœ¬çŠ¶æ€</td><td>20GB</td><td>200GB+</td><td>10x</td></tr><tr><td>ç»Ÿè®¡ä¿¡æ¯ç¼“å­˜</td><td>15GB</td><td>150GB+</td><td>10x</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>95GB</strong></td><td><strong>950GB+</strong></td><td><strong>10x</strong></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®è§‚å¯Ÿ</strong>ï¼šå†…å­˜æ¶ˆè€—éšåˆ†åŒºæ•°<strong>çº¿æ€§å¢é•¿</strong>ï¼Œä½† JVM å †å†…å­˜æœ‰ç‰©ç†ä¸Šé™ã€‚</p>
</blockquote>
<h3 data-id="heading-14">3. <strong>æŸ¥è¯¢ä¼˜åŒ–å™¨ç“¶é¢ˆï¼ˆæºç çº§åˆ†æï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// StarRocks 3.1 åˆ†åŒºè£å‰ªæ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">public</span> List&lt;PartitionKey&gt; <span class="hljs-title function_">prunePartitions</span><span class="hljs-params">(
        OlapTable table, 
        PartitionInfo partitionInfo,
        Expr whereClause)</span> {
    
    List&lt;PartitionKey&gt; candidates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (Partition partition : table.getPartitions()) { <span class="hljs-comment">// 10ä¸‡æ¬¡è¿­ä»£!</span>
        <span class="hljs-comment">// 1. ååºåˆ—åŒ–ç»Ÿè®¡ä¿¡æ¯ (è¡Œæ•°/min-max)</span>
        <span class="hljs-type">PartitionStatistic</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> loadStatistics(partition.getId());
        
        <span class="hljs-comment">// 2. è¡¨è¾¾å¼é‡å†™ä¸è¯„ä¼°</span>
        <span class="hljs-keyword">if</span> (evalPredicate(whereClause, stat)) {
            candidates.add(partition.getPartitionKey());
        }
    }
    <span class="hljs-keyword">return</span> candidates; <span class="hljs-comment">// O(n) å¤æ‚åº¦</span>
}
</code></pre>
<ul>
<li><strong>10 ä¸‡åˆ†åŒºçœŸå®ä»£ä»·</strong>ï¼š
<ul>
<li>ç®€å•æŸ¥è¯¢ï¼ˆ<code>SELECT * WHERE dt='2024-12-01'</code>ï¼‰ï¼šå…ƒæ•°æ®é˜¶æ®µè€—æ—¶ 1.8-2.3 ç§’</li>
<li>CPU æ¶ˆè€—ï¼šå•æŸ¥è¯¢å ç”¨ 40% coreï¼ˆä»…å…ƒæ•°æ®å¤„ç†ï¼‰</li>
<li>GC å‹åŠ›ï¼šæ¯ 5 åˆ†é’Ÿä¸€æ¬¡ Full GCï¼Œæš‚åœæ—¶é—´ 8-12 ç§’</li>
</ul>
</li>
</ul>
<h3 data-id="heading-15">4. <strong>Tablet è°ƒåº¦ç¾éš¾</strong></h3>
<p>10 ä¸‡åˆ†åŒº Ã— 10 åˆ†æ¡¶ Ã— 3 å‰¯æœ¬ = <strong>300 ä¸‡ tablet</strong>ï¼š</p>
<ul>
<li><strong>å¿ƒè·³é£æš´</strong>ï¼š300 ä¸‡ tablet çŠ¶æ€ / 5 ç§’ = 60 ä¸‡æ¬¡/ç§’çš„å¿ƒè·³å¤„ç†</li>
<li><strong>ç½‘ç»œå¸¦å®½</strong>ï¼šä»…å¿ƒè·³å…ƒæ•°æ®æ¶ˆè€— 1.2 Gbpsï¼ˆåƒå…†ç½‘ç»œé¥±å’Œï¼‰</li>
<li><strong>Compaction é¥¥é¥¿</strong>ï¼šè°ƒåº¦å™¨æ— æ³•åŠæ—¶å¤„ç†æ‰€æœ‰ tablet çš„ Compaction è¯·æ±‚</li>
</ul>
<h2 data-id="heading-16">äº”ã€æ¶æ„å¯¹æ¯”ï¼šä¸ºä»€ä¹ˆå·®å¼‚å¦‚æ­¤å·¨å¤§ï¼Ÿ</h2>
<h3 data-id="heading-17">1. <strong>å…ƒæ•°æ®è´£ä»»è¾¹ç•Œ</strong></h3>

























<table><thead><tr><th>ç³»ç»Ÿ</th><th>å…ƒæ•°æ®è´£ä»»èŒƒå›´</th><th>ä¸šåŠ¡è¯­ä¹‰è´Ÿæ‹…</th></tr></thead><tbody><tr><td><strong>HDFS</strong></td><td>ä»…æ–‡ä»¶ç³»ç»ŸåŸºç¡€è¯­ä¹‰ï¼ˆç›®å½•+blockæ˜ å°„ï¼‰</td><td>æ— </td></tr><tr><td><strong>Kudu</strong></td><td>å­˜å‚¨å¼•æ“ + äº‹åŠ¡ + æŸ¥è¯¢ä¼˜åŒ–</td><td>é«˜</td></tr><tr><td><strong>StarRocks</strong></td><td>å…¨å±€æŸ¥è¯¢ä¼˜åŒ– + å‰¯æœ¬è°ƒåº¦ + äº‹åŠ¡ç®¡ç†</td><td>æé«˜</td></tr></tbody></table>
<h3 data-id="heading-18">2. <strong>å†…å­˜æ¨¡å‹å¯¹æ¯”ï¼ˆ10 ä¸‡"åˆ†åŒº"ï¼‰</strong></h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    HDFS["HDFS 10ä¸‡ç›®å½•&lt;br/&gt;å†…å­˜ï¼š10.8 MB&lt;br/&gt;æ“ä½œï¼šO(1) ç›®å½•åˆ›å»º"] 
    Kudu["Kudu 10ä¸‡tablet&lt;br/&gt;å†…å­˜ï¼š150GB+&lt;br/&gt;æ“ä½œï¼šO(n) å…¨å±€æ‰«æ"]
    StarRocks["StarRocks 10ä¸‡åˆ†åŒº&lt;br/&gt;å†…å­˜ï¼š950GB+&lt;br/&gt;æ“ä½œï¼šO(nÂ²) ä¼˜åŒ–å™¨+è°ƒåº¦"]
</code></pre>
<h3 data-id="heading-19">3. <strong>æ‰©å±•æœºåˆ¶æœ¬è´¨å·®å¼‚</strong></h3>





























<table><thead><tr><th>ç³»ç»Ÿ</th><th>æ‰©å±•æ–¹å¼</th><th>ç“¶é¢ˆç‚¹</th><th>ç†è®ºä¸Šé™</th></tr></thead><tbody><tr><td><strong>HDFS</strong></td><td>æ°´å¹³æ‰©å±•</td><td>Router å¸¦å®½</td><td>100 äº¿+ ç›®å½•</td></tr><tr><td><strong>Kudu</strong></td><td>å‚ç›´æ‰©å±•</td><td>Master å†…å­˜</td><td>10,000 tablet</td></tr><tr><td><strong>StarRocks</strong></td><td>å‚ç›´æ‰©å±•</td><td>FE JVM å †</td><td>100,000 åˆ†åŒº</td></tr></tbody></table>
<h2 data-id="heading-20">å…­ã€çœŸå®åœºæ™¯æµ‹è¯•ï¼š10 ä¸‡å¤©åˆ†åŒºè¡¨</h2>
<h3 data-id="heading-21">1. <strong>æµ‹è¯•ç¯å¢ƒ</strong></h3>
<ul>
<li>æ•°æ®ï¼š10 ä¸‡å¤©åˆ†åŒºï¼Œæ¯å¤© 100MB Parquetï¼Œæ€»è®¡ 9.5TB</li>
<li>é›†ç¾¤ï¼š20 èŠ‚ç‚¹ï¼Œ128GB RAM/èŠ‚ç‚¹ï¼Œ10GbE ç½‘ç»œ</li>
</ul>
<h3 data-id="heading-22">2. <strong>æ€§èƒ½å¯¹æ¯”</strong></h3>









































<table><thead><tr><th>æ“ä½œ</th><th>HDFS + Iceberg</th><th>Kudu</th><th>StarRocks</th></tr></thead><tbody><tr><td><strong>è¡¨åˆ›å»ºæ—¶é—´</strong></td><td>8.2 ç§’</td><td>å¤±è´¥ (è¶…é™)</td><td>47 åˆ†é’Ÿ</td></tr><tr><td><strong>å•å¤©æŸ¥è¯¢å»¶è¿Ÿ</strong></td><td>2.1 ç§’</td><td>-</td><td>1850 æ¯«ç§’</td></tr><tr><td><strong>å…¨è¡¨å…ƒæ•°æ®åŠ è½½</strong></td><td>0.3 ç§’</td><td>-</td><td>28 ç§’ (OOM)</td></tr><tr><td><strong>FE/Master å†…å­˜</strong></td><td>12GB</td><td>98GB (å¤±è´¥)</td><td>487GB</td></tr><tr><td><strong>å†™å…¥åå</strong></td><td>120 MB/s</td><td>-</td><td>15 MB/s</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®å‘ç°</strong>ï¼šStarRocks èƒ½å‹‰å¼ºè¿è¡Œä½†ä»£ä»·å·¨å¤§ï¼›Kudu ç›´æ¥æ‹’ç»ï¼›HDFS+Iceberg è½»æ¾å¤„ç†ã€‚</p>
</blockquote>
<h2 data-id="heading-23">ä¸ƒã€æœ€ä½³å®è·µï¼šå¦‚ä½•ä¸ºæµ·é‡åˆ†åŒºé€‰æ‹©æ¶æ„</h2>
<h3 data-id="heading-24">1. <strong>å…·ä½“å»ºè®®</strong></h3>
<ul>
<li><strong>HDFS + Iceberg é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li>æ—¶åºæ•°æ®ï¼ˆIoT/æ—¥å¿—ï¼‰å¤©/å°æ—¶çº§åˆ†åŒº</li>
<li>å†å²æ•°æ®å½’æ¡£ï¼ˆ10 å¹´+ï¼‰</li>
<li>å†™å¤šè¯»å°‘ï¼Œæˆ–è¯»å»¶è¿Ÿè¦æ±‚ä¸é«˜ï¼ˆ&gt;1 ç§’ï¼‰</li>
</ul>
</li>
<li><strong>StarRocks é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li>äº¤äº’å¼åˆ†æï¼ˆå»¶è¿Ÿ &lt; 1 ç§’ï¼‰</li>
<li>åˆ†åŒºæ•° &lt; 1,000 çš„ä¸šåŠ¡</li>
<li>é«˜é¢‘æ›´æ–°ï¼ˆä¸»é”®æ¨¡å‹ï¼‰</li>
</ul>
</li>
<li><strong>é¿å…çš„åæ¨¡å¼</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">/* åæ¨¡å¼ï¼šStarRocks å¤©åˆ†åŒº 10 å¹´æ•°æ® */</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> events (
  event_time DATETIME,
  user_id <span class="hljs-type">BIGINT</span>,
  ...
) <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span>(event_time) (  <span class="hljs-comment">-- 3650+ åˆ†åŒºï¼</span>
  <span class="hljs-keyword">START</span> ("2014-01-01") <span class="hljs-keyword">END</span> ("2024-01-01") <span class="hljs-keyword">EVERY</span> (<span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>)
);

<span class="hljs-comment">/* æ­£ç¡®æ¨¡å¼ï¼šIceberg on HDFS */</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> iceberg.db.events (
  event_time <span class="hljs-type">TIMESTAMP</span>,
  user_id <span class="hljs-type">BIGINT</span>,
  ...
) 
PARTITIONED <span class="hljs-keyword">BY</span> (days(event_time))  <span class="hljs-comment">-- Iceberg åŠ¨æ€åˆ†åŒº</span>
LOCATION <span class="hljs-string">'hdfs:///warehouse/events'</span>;
</code></pre>
</li>
</ul>
<h2 data-id="heading-25">å…«ã€ç»“è®ºï¼šæ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰å–èˆ</h2>
<h3 data-id="heading-26">1. <strong>æ¶æ„å“²å­¦æ€»ç»“</strong></h3>
<ul>
<li>
<p><strong>HDFS</strong>ï¼š</p>
<blockquote>
<p>"ä¸“æ³¨åšå¥½ä¸€ä»¶äº‹ï¼šæ— é™æ‰©å±•çš„å—å­˜å‚¨ã€‚ä¸šåŠ¡é€»è¾‘ç•™ç»™ä¸Šå±‚ã€‚"</p>
</blockquote>
</li>
<li>
<p><strong>Kudu/StarRocks</strong>ï¼š</p>
<blockquote>
<p>"ä¸ºæŸ¥è¯¢æ€§èƒ½ç‰ºç‰²æ‰©å±•æ€§ï¼šå°†æ™ºèƒ½å†…ç½®åˆ°å­˜å‚¨å¼•æ“ï¼Œæ¢å–äºšç§’çº§å“åº”ã€‚"</p>
</blockquote>
</li>
</ul>
<h3 data-id="heading-27">2. <strong>æœªæ¥è¶‹åŠ¿</strong></h3>
<ul>
<li><strong>HDFS</strong>ï¼šç»§ç»­ä¼˜åŒ– Federationï¼Œæ”¯æŒå…ƒæ•°æ®å†·çƒ­åˆ†ç¦»</li>
<li><strong>Kudu</strong>ï¼šç¤¾åŒºè®¨è®º Master åˆ†ç‰‡æ–¹æ¡ˆï¼ˆä½†é¢ä¸´ä¸€è‡´æ€§æŒ‘æˆ˜ï¼‰</li>
<li><strong>StarRocks</strong>ï¼š3.0+ æ”¯æŒ External Table ç›´è¯» Icebergï¼Œæ··åˆæ¶æ„æˆä¸»æµ</li>
</ul>
<h3 data-id="heading-28">3. <strong>ç»ˆæå»ºè®®</strong></h3>
<blockquote>
<p><strong>ä¸è¦é—®"å“ªä¸ªç³»ç»Ÿæ›´å¥½"ï¼Œè€Œè¦é—®ï¼š<br/>
"æˆ‘çš„ä¸šåŠ¡åœºæ™¯éœ€è¦ä»€ä¹ˆæƒè¡¡ï¼Ÿ"</strong></p>
<ul>
<li>éœ€è¦ <strong>æ— é™æ‰©å±•</strong>ï¼Ÿ â†’ HDFS + Iceberg</li>
<li>éœ€è¦ <strong>æè‡´æŸ¥è¯¢æ€§èƒ½</strong>ï¼Ÿ â†’ StarRocks (æ§åˆ¶åˆ†åŒºæ•°)</li>
<li>éœ€è¦ <strong>ä¸¤è€…</strong>ï¼Ÿ â†’ å†·çƒ­åˆ†å±‚æ¶æ„</li>
</ul>
<p>ç†è§£å„å±‚çš„<strong>ç²¾ç¡®èŒè´£è¾¹ç•Œ</strong>ï¼Œæ˜¯è®¾è®¡å¥å£®å¤§æ•°æ®ç³»ç»Ÿçš„æ ¸å¿ƒã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ScaleSlider ç»„ä»¶å®ç°]]></title>    <link>https://juejin.cn/post/7579716343454187563</link>    <guid>https://juejin.cn/post/7579716343454187563</guid>    <pubDate>2025-12-04T10:01:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579716343454187563" data-draft-id="7579659550862426154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ScaleSlider ç»„ä»¶å®ç°"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-04T10:01:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Syron"/> <meta itemprop="url" content="https://juejin.cn/user/2796746682930365"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ScaleSlider ç»„ä»¶å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2796746682930365/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Syron
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:01:34.000Z" title="Thu Dec 04 2025 10:01:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éœ€æ±‚åˆ†æ</h2>
<h3 data-id="heading-1">åŠŸèƒ½éœ€æ±‚</h3>
<ul>
<li>âœ… æ”¯æŒçºµå‘å’Œæ¨ªå‘ä¸¤ç§æ–¹å‘</li>
<li>âœ… æ˜¾ç¤ºåˆ»åº¦çº¿ï¼ˆä¸»åˆ»åº¦å’Œæ¬¡åˆ»åº¦ï¼‰</li>
<li>âœ… å®æ—¶æ˜¾ç¤ºå½“å‰å€¼ï¼ˆå¸¦å•ä½ï¼‰</li>
<li>âœ… ç®­å¤´æŒ‡å‘æ»‘å—ä½ç½®</li>
<li>âœ… å€¼æ˜¾ç¤ºæ¡†è·Ÿéšæ»‘å—ç§»åŠ¨</li>
<li>âœ… æ”¯æŒé¼ æ ‡æ‹–æ‹½å’Œç‚¹å‡»è·³è½¬</li>
<li>âœ… å—æ§å’Œéå—æ§æ¨¡å¼</li>
<li>âœ… ç¦ç”¨çŠ¶æ€æ”¯æŒ</li>
</ul>
<h3 data-id="heading-2">äº¤äº’éœ€æ±‚</h3>
<ul>
<li>âœ… ç‚¹å‡»è½¨é“è·³è½¬åˆ°ç›®æ ‡ä½ç½®</li>
<li>âœ… æ‹–æ‹½æ»‘å—å¹³æ»‘ç§»åŠ¨</li>
<li>âœ… å€¼å®æ—¶æ›´æ–°</li>
<li>âœ… è¿‡æ¸¡åŠ¨ç”»ï¼ˆç‚¹å‡»æ—¶å¹³æ»‘ï¼Œæ‹–æ‹½æ—¶å³æ—¶ï¼‰</li>
<li>âœ… æ‚¬åœæ•ˆæœ</li>
</ul>
<h3 data-id="heading-3">è§†è§‰éœ€æ±‚</h3>
<pre><code class="hljs language-css" lang="css">css
çºµå‘å¸ƒå±€ï¼š
  åˆ»åº¦    è½¨é“    ç®­å¤´+å€¼
  â•â•â•     â•‘      â† <span class="hljs-selector-attr">[1.60mm]</span>
  â•â•â•     â—      
  â•â•â•     â•‘      
  
æ¨ªå‘å¸ƒå±€ï¼š
  åˆ»åº¦   â•â•â• â•â• â•â•â•
  è½¨é“   â—â•â•â•â•â•
  ç®­å¤´      â†‘
  å€¼      <span class="hljs-selector-attr">[50%]</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">è®¾è®¡æ€è·¯</h2>
<h3 data-id="heading-5">1. ç»„ä»¶ç»“æ„è®¾è®¡</h3>
<h4 data-id="heading-6">åˆå§‹æ–¹æ¡ˆï¼ˆV1ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml">typescript
<span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ValueDisplay</span> /&gt;</span>  // å·¦ä¾§/ä¸Šæ–¹
  <span class="hljs-tag">&lt;<span class="hljs-name">SliderWrap</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Scales</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Track</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">SliderWrap</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>âŒ å€¼æ˜¾ç¤ºä½ç½®å›ºå®šï¼Œä¸è·Ÿéšæ»‘å—</li>
<li>âŒ å¸ƒå±€ä¸å¤Ÿçµæ´»</li>
</ul>
<h4 data-id="heading-7">æ”¹è¿›æ–¹æ¡ˆï¼ˆV2ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml">typescript
<span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ValueDisplay</span> /&gt;</span>  // åœ¨å¦ä¸€ä¾§
  <span class="hljs-tag">&lt;<span class="hljs-name">SliderWrap</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Scales</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Track</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ValueWrapper</span> /&gt;</span>  // è·Ÿéšæ»‘å—
  <span class="hljs-tag">&lt;/<span class="hljs-name">SliderWrap</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>âŒ ValueWrapper åµŒå¥—è¿‡æ·±</li>
<li>âŒ é¼ æ ‡äº‹ä»¶å¤æ‚ï¼Œå®¹æ˜“è¯¯è§¦å‘</li>
</ul>
<h4 data-id="heading-8">æœ€ç»ˆæ–¹æ¡ˆï¼ˆV3 - CSS Gridï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
&lt;<span class="hljs-title class_">Container</span>&gt; <span class="hljs-comment">// Grid å¸ƒå±€</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ScalesContainer</span> /&gt;</span></span>    <span class="hljs-comment">// ç‹¬ç«‹åŒºåŸŸ</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TrackContainer</span> /&gt;</span></span>     <span class="hljs-comment">// ç‹¬ç«‹åŒºåŸŸ</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ValueContainer</span> /&gt;</span></span>     <span class="hljs-comment">// ç‹¬ç«‹åŒºåŸŸ</span>
&lt;/<span class="hljs-title class_">Container</span>&gt;
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… ä¸‰ä¸ªåŒºåŸŸå®Œå…¨ç‹¬ç«‹</li>
<li>âœ… é¼ æ ‡äº‹ä»¶ç²¾ç¡®éš”ç¦»</li>
<li>âœ… å®šä½æ¸…æ™°ç®€å•</li>
</ul>
<hr/>
<h3 data-id="heading-9">2. å¸ƒå±€æ–¹æ¡ˆå¯¹æ¯”</h3>
<h4 data-id="heading-10">æ–¹æ¡ˆ Aï¼šFlexbox + Padding</h4>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-selector-class">.sliderWrap</span> {
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* ä¸ºå€¼æ˜¾ç¤ºé¢„ç•™ç©ºé—´ */</span>
}

<span class="hljs-selector-class">.valueWrapper</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">90px</span>);
}
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>âŒ padding åŒºåŸŸä»ä¼šæ•è·é¼ æ ‡äº‹ä»¶</li>
<li>âŒ å®šä½å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™</li>
</ul>
<h4 data-id="heading-11">æ–¹æ¡ˆ Bï¼šCSS Gridï¼ˆæœ€ç»ˆé€‰æ‹©ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino">css
.container {
  display: grid;
  grid-<span class="hljs-keyword">template</span>-columns: <span class="hljs-keyword">auto</span> <span class="hljs-number">8</span>px <span class="hljs-keyword">auto</span>; <span class="hljs-comment">/* çºµå‘ */</span>
  grid-<span class="hljs-keyword">template</span>-rows: <span class="hljs-keyword">auto</span> <span class="hljs-number">8</span>px <span class="hljs-keyword">auto</span>;    <span class="hljs-comment">/* æ¨ªå‘ */</span>
}
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… æ¯ä¸ªåŒºåŸŸç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°</li>
<li>âœ… å®½åº¦/é«˜åº¦è‡ªåŠ¨è®¡ç®—</li>
<li>âœ… å“åº”å¼å‹å¥½</li>
</ul>
<hr/>
<h2 data-id="heading-12">å®ç°è¿‡ç¨‹</h2>
<h3 data-id="heading-13">é˜¶æ®µ 1ï¼šåŸºç¡€æ»‘åŠ¨æ¡ï¼ˆV1ï¼‰</h3>
<h4 data-id="heading-14">ä»£ç å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ScaleSlider</span>(<span class="hljs-params">{ orientation = <span class="hljs-string">'vertical'</span>, ...props }</span>) {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(defaultValue)
  <span class="hljs-keyword">const</span> trackRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e: React.MouseEvent</span>) =&gt; {
    <span class="hljs-comment">// è®¡ç®—ç‚¹å‡»ä½ç½®</span>
    <span class="hljs-keyword">const</span> rect = trackRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">getBoundingClientRect</span>()
    <span class="hljs-keyword">const</span> percent = orientation === <span class="hljs-string">'vertical'</span>
      ? (rect.<span class="hljs-property">bottom</span> - e.<span class="hljs-property">clientY</span>) / rect.<span class="hljs-property">height</span>
      : (e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span>) / rect.<span class="hljs-property">width</span>
    
    <span class="hljs-keyword">const</span> newValue = min + percent * (max - min)
    <span class="hljs-title function_">setValue</span>(newValue)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{trackRef}</span> <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{handleMouseDown}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fill"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> `${<span class="hljs-attr">percentage</span>}%` }} /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"thumb"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> `${<span class="hljs-attr">percentage</span>}%` }} /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-15">å®ç°æ•ˆæœ</h4>
<ul>
<li>âœ… ç‚¹å‡»è·³è½¬</li>
<li>âœ… åŸºç¡€æ‹–æ‹½</li>
<li>âŒ æ²¡æœ‰åˆ»åº¦</li>
<li>âŒ æ²¡æœ‰å€¼æ˜¾ç¤º</li>
</ul>
<hr/>
<h3 data-id="heading-16">é˜¶æ®µ 2ï¼šæ·»åŠ åˆ»åº¦å’Œå€¼æ˜¾ç¤ºï¼ˆV2ï¼‰</h3>
<h4 data-id="heading-17">ä»£ç å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-comment">// ç”Ÿæˆåˆ»åº¦</span>
<span class="hljs-keyword">const</span> scales = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: scaleCount + <span class="hljs-number">1</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">position</span>: (i / scaleCount) * <span class="hljs-number">100</span>,
  <span class="hljs-attr">isMain</span>: i % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>,
}))

<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.container}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.valueDisplay}</span>&gt;</span>
      {formatValue(value)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.sliderWrap}</span>&gt;</span>
      {/* åˆ»åº¦ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.scales}</span>&gt;</span>
        {scales.map((scale, i) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.scale}</span> 
               <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> `${<span class="hljs-attr">scale.position</span>}%` }} /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      {/* è½¨é“ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{trackRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.track}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.fill}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.thumb}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
</code></pre>
<h4 data-id="heading-18">CSS å®ç°</h4>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row; <span class="hljs-comment">/* çºµå‘ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">12px</span>;
}

<span class="hljs-selector-class">.scales</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">right</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> + <span class="hljs-number">4px</span>);
}

<span class="hljs-selector-class">.scale</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">bottom</span>: X%;
}
</code></pre>
<h4 data-id="heading-19">å®ç°æ•ˆæœ</h4>
<ul>
<li>âœ… åˆ»åº¦æ˜¾ç¤ºæ­£ç¡®</li>
<li>âœ… å€¼æ˜¾ç¤ºåœ¨å·¦ä¾§</li>
<li>âŒ å€¼ä¸è·Ÿéšæ»‘å—</li>
<li>âŒ æ²¡æœ‰ç®­å¤´æŒ‡ç¤º</li>
</ul>
<hr/>
<h3 data-id="heading-20">é˜¶æ®µ 3ï¼šå€¼æ˜¾ç¤ºè·Ÿéšæ»‘å—ï¼ˆV3ï¼‰</h3>
<h4 data-id="heading-21">ä»£ç æ”¹è¿›</h4>
<pre><code class="hljs language-xml" lang="xml">typescript
// å°† valueWrapper ç§»åˆ° sliderWrap å†…éƒ¨
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.sliderWrap}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.scales}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{trackRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.track}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  {/* å€¼æ˜¾ç¤ºè·Ÿéšæ»‘å— */}
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.valueWrapper}</span> 
       <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">bottom:</span> `<span class="hljs-attr">calc</span>(${<span class="hljs-attr">percentage</span>}% <span class="hljs-attr">-</span> <span class="hljs-attr">0.5rem</span>)` }}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">svg</span>&gt;</span>ç®­å¤´<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.valueDisplay}</span>&gt;</span>
      {formatValue(value)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-22">CSS å®šä½</h4>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-selector-class">.sliderWrap</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* ä¸ºå€¼æ˜¾ç¤ºé¢„ç•™ç©ºé—´ */</span>
}

<span class="hljs-selector-class">.valueWrapper</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">90px</span>);
  <span class="hljs-attribute">bottom</span>: <span class="hljs-built_in">calc</span>(X% - <span class="hljs-number">0.5rem</span>); <span class="hljs-comment">/* è·Ÿéšæ»‘å— */</span>
}
</code></pre>
<h4 data-id="heading-23">å®ç°æ•ˆæœ</h4>
<ul>
<li>âœ… å€¼è·Ÿéšæ»‘å—ä½ç½®</li>
<li>âœ… ç®­å¤´æŒ‡å‘æ»‘å—</li>
<li>âŒÂ <strong>å‡ºç°ä¸¥é‡ Bug</strong></li>
</ul>
<hr/>
<h2 data-id="heading-24">é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-25">âŒ é—®é¢˜ 1ï¼šçºµå‘æ»‘å—é¼ æ ‡äº‹ä»¶å¼‚å¸¸</h3>
<h4 data-id="heading-26">é—®é¢˜æè¿°</h4>
<pre><code class="hljs">ç°è±¡ï¼šé¼ æ ‡åœ¨çºµå‘æ»‘å—é™„è¿‘ç§»åŠ¨ï¼ˆä¸ç‚¹å‡»ï¼‰ï¼Œæ»‘å—ä¹Ÿä¼šè·Ÿéšç§»åŠ¨
å½±å“ï¼šç»„ä»¶å®Œå…¨æ— æ³•ä½¿ç”¨ï¼Œäº¤äº’ä½“éªŒæå·®
è§¦å‘æ¡ä»¶ï¼šåªåœ¨çºµå‘å¸ƒå±€å‡ºç°ï¼Œæ¨ªå‘å¸ƒå±€æ­£å¸¸
</code></pre>
<h4 data-id="heading-27">é—®é¢˜æ’æŸ¥</h4>
<p><strong>Step 1ï¼šæ£€æŸ¥äº‹ä»¶ç»‘å®š</strong></p>
<pre><code class="hljs language-ini" lang="ini">typescript
// âœ… äº‹ä»¶ç»‘å®šæ­£ç¡®
&lt;div <span class="hljs-attr">ref</span>={trackRef} <span class="hljs-literal">on</span>MouseDown={handleMouseDown}&gt;
</code></pre>
<p><strong>Step 2ï¼šæ£€æŸ¥æ‹–æ‹½é€»è¾‘</strong></p>
<pre><code class="hljs language-scss" lang="scss">typescript
<span class="hljs-built_in">useEffect</span>(() =&gt; {
  const handleMouseMove = (e: MouseEvent) =&gt; {
    if (isDraggingRef.current) { <span class="hljs-comment">// âœ… æœ‰æ‹–æ‹½çŠ¶æ€åˆ¤æ–­</span>
      <span class="hljs-built_in">updateValue</span>(e.clientX, e.clientY)
    }
  }
  <span class="hljs-comment">// ...</span>
}, <span class="hljs-selector-attr">[]</span>)
</code></pre>
<p><strong>Step 3ï¼šæ£€æŸ¥ DOM ç»“æ„</strong></p>
<pre><code class="hljs language-xml" lang="xml">html
<span class="hljs-comment">&lt;!-- âŒ å‘ç°é—®é¢˜ï¼švalueWrapper åµŒå¥—åœ¨ sliderWrap å†… --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sliderWrap"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding-right: 100px"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"track"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"valueWrapper"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- å¯èƒ½æ•è·äº‹ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>Step 4ï¼šæ£€æŸ¥ CSS å¸ƒå±€</strong></p>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* âŒ å‘ç°é—®é¢˜ï¼špadding å¯¼è‡´å¯äº¤äº’åŒºåŸŸè¿‡å¤§ */</span>
<span class="hljs-selector-class">.sliderWrap</span> {
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* è¿™ä¸ªåŒºåŸŸå¯èƒ½æ•è·äº‹ä»¶ */</span>
}
</code></pre>
<p><strong>Step 5ï¼šæ·»åŠ è°ƒè¯•ä»£ç </strong></p>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e: React.MouseEvent</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MouseDown triggered'</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Target:'</span>, e.<span class="hljs-property">target</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CurrentTarget:'</span>, e.<span class="hljs-property">currentTarget</span>)
}

<span class="hljs-comment">// å‘ç°ï¼šæœ‰æ—¶ e.target ä¸æ˜¯ track å…ƒç´ </span>
</code></pre>
<h4 data-id="heading-28">æ ¹æœ¬åŸå› åˆ†æ</h4>
<pre><code class="hljs language-scss" lang="scss">scss
é—®é¢˜ <span class="hljs-number">1</span>ï¼šDOM åµŒå¥—å±‚çº§è¿‡æ·±
Container
â””â”€â”€ sliderWrap (padding-right: <span class="hljs-number">100px</span>)
    â”œâ”€â”€ scales
    â”œâ”€â”€ track â† åº”è¯¥åªæœ‰è¿™é‡Œå“åº”
    â””â”€â”€ valueWrapper â† åµŒå¥—åœ¨å†…éƒ¨ï¼Œå¯èƒ½å¹²æ‰°äº‹ä»¶

é—®é¢˜ <span class="hljs-number">2</span>ï¼šå¯äº¤äº’åŒºåŸŸä¸æ˜ç¡®
â•â•â•  â•‘                 <span class="hljs-selector-attr">[å€¼]</span>
     â””â”€â”€ track (<span class="hljs-number">8px</span>)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          <span class="hljs-attribute">padding</span> (<span class="hljs-number">100px</span>)
         â†‘ è¿™ä¸ªåŒºåŸŸå¯èƒ½è¯¯è§¦å‘

é—®é¢˜ <span class="hljs-number">3</span>ï¼š<span class="hljs-attribute">pointer-events</span> æ§åˆ¶ä¸ç²¾ç¡®
<span class="hljs-selector-class">.sliderWrap</span> { }           <span class="hljs-comment">// æ²¡æœ‰ç¦ç”¨</span>
<span class="hljs-selector-class">.track</span> { }                <span class="hljs-comment">// å“åº”äº‹ä»¶</span>
<span class="hljs-selector-class">.valueWrapper</span> { }         <span class="hljs-comment">// æ²¡æœ‰æ˜ç¡®ç¦ç”¨</span>
</code></pre>
<hr/>
<h3 data-id="heading-29">âœ… è§£å†³æ–¹æ¡ˆæ¼”è¿›</h3>
<h4 data-id="heading-30">æ–¹æ¡ˆ 1ï¼šæ·»åŠ  pointer-eventsï¼ˆå¤±è´¥ï¼‰</h4>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-selector-class">.sliderWrap</span> {
  <span class="hljs-attribute">pointer-events</span>: none;
}

<span class="hljs-selector-class">.track</span> {
  <span class="hljs-attribute">pointer-events</span>: auto;
}

<span class="hljs-selector-class">.valueWrapper</span> {
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<p><strong>ç»“æœï¼š</strong></p>
<ul>
<li>âŒ ä»ç„¶æœ‰é—®é¢˜</li>
<li>âŒ åŸå› ï¼švalueWrapper ä»åœ¨ sliderWrap å†…éƒ¨</li>
</ul>
<h4 data-id="heading-31">æ–¹æ¡ˆ 2ï¼šè°ƒæ•´ DOM ç»“æ„ï¼ˆéƒ¨åˆ†æˆåŠŸï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml">typescript
<span class="hljs-tag">&lt;<span class="hljs-name">Container</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.sliderWrap}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Scales</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Track</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.valueWrapper}</span>&gt;</span> {/* ç§»åˆ°å¤–éƒ¨ */}
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
</code></pre>
<p><strong>ç»“æœï¼š</strong></p>
<ul>
<li>âœ… å‡å°‘äº†è¯¯è§¦å‘</li>
<li>âŒ ä»æœ‰è¾¹ç¼˜æƒ…å†µ</li>
<li>âŒ å®šä½å¤æ‚</li>
</ul>
<h4 data-id="heading-32">æ–¹æ¡ˆ 3ï¼šCSS Grid é‡æ„ï¼ˆæœ€ç»ˆæˆåŠŸï¼‰</h4>
<p><strong>æ ¸å¿ƒæ€è·¯ï¼šä¸‰ä¸ªåŒºåŸŸå®Œå…¨ç‹¬ç«‹</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">typescript
&lt;<span class="hljs-title class_">Container</span>&gt; <span class="hljs-comment">// Grid å¸ƒå±€</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ScalesContainer</span> /&gt;</span></span>    <span class="hljs-comment">// åŒºåŸŸ 1ï¼šåˆ»åº¦ï¼ˆä¸å¯äº¤äº’ï¼‰</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TrackContainer</span> /&gt;</span></span>     <span class="hljs-comment">// åŒºåŸŸ 2ï¼šè½¨é“ï¼ˆå”¯ä¸€å¯äº¤äº’ï¼‰</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ValueContainer</span> /&gt;</span></span>     <span class="hljs-comment">// åŒºåŸŸ 3ï¼šå€¼æ˜¾ç¤ºï¼ˆä¸å¯äº¤äº’ï¼‰</span>
&lt;/<span class="hljs-title class_">Container</span>&gt;
</code></pre>
<p><strong>CSS Grid é…ç½®</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">css
.container {
  display: grid;
  position: relative;
}

<span class="hljs-comment">/* çºµå‘ï¼šä¸‰åˆ—å¸ƒå±€ */</span>
.vertical {
  grid-<span class="hljs-keyword">template</span>-columns: <span class="hljs-keyword">auto</span> <span class="hljs-number">8</span>px <span class="hljs-keyword">auto</span>;
  <span class="hljs-comment">/* åˆ»åº¦(auto) | è½¨é“(8px) | å€¼æ˜¾ç¤º(auto) */</span>
}

<span class="hljs-comment">/* æ¨ªå‘ï¼šä¸‰è¡Œå¸ƒå±€ */</span>
.horizontal {
  grid-<span class="hljs-keyword">template</span>-rows: <span class="hljs-keyword">auto</span> <span class="hljs-number">8</span>px <span class="hljs-keyword">auto</span>;
  <span class="hljs-comment">/* åˆ»åº¦(auto) | è½¨é“(8px) | å€¼æ˜¾ç¤º(auto) */</span>
}
</code></pre>
<p><strong>ç²¾ç¡®æ§åˆ¶äº¤äº’åŒºåŸŸ</strong></p>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* âœ… åªæœ‰è½¨é“å“åº”é¼ æ ‡ */</span>
<span class="hljs-selector-class">.trackContainer</span> {
  <span class="hljs-attribute">pointer-events</span>: auto;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">8px</span>;  <span class="hljs-comment">/* çºµå‘ */</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>; <span class="hljs-comment">/* æ¨ªå‘ */</span>
}

<span class="hljs-comment">/* âŒ å…¶ä»–åŒºåŸŸä¸å“åº” */</span>
<span class="hljs-selector-class">.scalesContainer</span>,
<span class="hljs-selector-class">.valueContainer</span>,
<span class="hljs-selector-class">.thumb</span>,
<span class="hljs-selector-class">.fill</span> {
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<p><strong>è§†è§‰å¯¹æ¯”</strong></p>
<pre><code class="hljs language-scss" lang="scss">scss
ä¿®æ­£å‰ï¼ˆæœ‰é—®é¢˜ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sliderWrap (å¯èƒ½è¯¯è§¦)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚è½¨é“â”‚  â”‚ å€¼æ˜¾ç¤º    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  <span class="hljs-number">8px</span>      <span class="hljs-attribute">padding</span> <span class="hljs-number">100px</span>        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¿®æ­£åï¼ˆæ­£ç¡®ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ»åº¦  â”‚è½¨é“â”‚  å€¼æ˜¾ç¤º   â”‚
â”‚(no)  â”‚YESâ”‚  (no)    â”‚
â”‚      â”‚<span class="hljs-number">8px</span>â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-33">âŒ é—®é¢˜ 2ï¼šå€¼æ˜¾ç¤ºå®šä½å¤æ‚</h3>
<h4 data-id="heading-34">é—®é¢˜æè¿°</h4>
<pre><code class="hljs">éœ€æ±‚ï¼šå€¼æ˜¾ç¤ºæ¡†è¦è·Ÿéšæ»‘å—ä½ç½®
éš¾ç‚¹ï¼šåŒæ—¶è¦ä¿æŒåœ¨å›ºå®šåŒºåŸŸå†…
</code></pre>
<h4 data-id="heading-35">è§£å†³æ–¹æ¡ˆï¼šåŒå±‚å®šä½</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-comment">// å¤–å±‚å®¹å™¨ï¼šè·Ÿéšæ»‘å—ä½ç½®</span>
&lt;div className={styles.<span class="hljs-property">valueContainer</span>} 
     style={{ <span class="hljs-attr">bottom</span>: <span class="hljs-string">`<span class="hljs-subst">${percentage}</span>%`</span> }}&gt;
  
  <span class="hljs-comment">// å†…å±‚å†…å®¹ï¼šåœ¨å®¹å™¨ä¸­å±…ä¸­</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.valueContent}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Arrow</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ValueDisplay</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* å¤–å±‚ï¼šè·Ÿéšæ»‘å— */</span>
<span class="hljs-selector-class">.valueContainer</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">bottom</span>: X%; <span class="hljs-comment">/* åŠ¨æ€å€¼ */</span>
}

<span class="hljs-comment">/* å†…å±‚ï¼šå±…ä¸­å¯¹é½ */</span>
<span class="hljs-selector-class">.valueContent</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">50%</span>); <span class="hljs-comment">/* å‚ç›´å±…ä¸­ */</span>
}
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”</strong></p>
<pre><code class="hljs language-css" lang="css">css
å•å±‚å®šä½ï¼ˆå¤æ‚ï¼‰ï¼š
<span class="hljs-selector-class">.valueWrapper</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-number">90px</span>);        // æ¨ªå‘å›ºå®š
  <span class="hljs-attribute">bottom</span>: <span class="hljs-built_in">calc</span>(X% - <span class="hljs-number">0.5rem</span>);      // çºµå‘è·Ÿéš
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">50%</span>);     // å±…ä¸­
}

åŒå±‚å®šä½ï¼ˆæ¸…æ™°ï¼‰ï¼š
<span class="hljs-selector-class">.valueContainer</span> {
  <span class="hljs-attribute">bottom</span>: X%;  // è·Ÿéšæ»‘å—
}
<span class="hljs-selector-class">.valueContent</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(<span class="hljs-number">50%</span>);  // å±…ä¸­
}
</code></pre>
<hr/>
<h3 data-id="heading-36">âŒ é—®é¢˜ 3ï¼šæ‹–æ‹½æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-37">é—®é¢˜æè¿°</h4>
<pre><code class="hljs language-css" lang="css">css
ç°è±¡ï¼šæ‹–æ‹½æ—¶æœ‰è½»å¾®å»¶è¿Ÿæˆ–å¡é¡¿
åŸå› ï¼šCSS <span class="hljs-attribute">transition</span> åœ¨æ‹–æ‹½æ—¶ä¸åº”è¯¥ç”Ÿæ•ˆ
</code></pre>
<h4 data-id="heading-38">è§£å†³æ–¹æ¡ˆï¼šåŠ¨æ€ç¦ç”¨è¿‡æ¸¡</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-keyword">const</span> [isDragging, setIsDragging] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

<span class="hljs-keyword">const</span> fillClasses = <span class="hljs-string">`<span class="hljs-subst">${styles.fill}</span> <span class="hljs-subst">${
  isDragging ? styles.fillNoDrag : <span class="hljs-string">''</span>
}</span>`</span>
</code></pre>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-selector-class">.fill</span> {
  <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.15s</span> ease, width <span class="hljs-number">0.15s</span> ease;
}

<span class="hljs-comment">/* æ‹–æ‹½æ—¶ç¦ç”¨è¿‡æ¸¡ */</span>
<span class="hljs-selector-class">.fillNoDrag</span> {
  <span class="hljs-attribute">transition</span>: none <span class="hljs-meta">!important</span>;
}

<span class="hljs-selector-class">.container</span><span class="hljs-selector-pseudo">:active</span> <span class="hljs-selector-class">.valueContainer</span> {
  <span class="hljs-attribute">transition</span>: none <span class="hljs-meta">!important</span>;
}
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”</strong></p>
<pre><code class="hljs language-ini" lang="ini">ini
ç‚¹å‡»è·³è½¬ï¼ˆå¹³æ»‘ï¼‰ï¼š
æ—¶é—´ 0ms:    â—  <span class="hljs-section">[50%]</span>
æ—¶é—´ 75ms:      â—  <span class="hljs-section">[60%]</span>  â† å¹³æ»‘è¿‡æ¸¡
æ—¶é—´ 150ms:        â—  <span class="hljs-section">[70%]</span>

æ‹–æ‹½ç§»åŠ¨ï¼ˆå³æ—¶ï¼‰ï¼š
æ—¶é—´ 0ms:    â—  <span class="hljs-section">[50%]</span>
æ—¶é—´ 1ms:        â—  <span class="hljs-section">[70%]</span>  â† ç«‹å³è·Ÿéš
</code></pre>
<hr/>
<h2 data-id="heading-39">æœ€ç»ˆæ¶æ„</h2>
<h3 data-id="heading-40">1. ç»„ä»¶ç»“æ„</h3>
<pre><code class="hljs language-arduino" lang="arduino">arduino
ScaleSlider
â”œâ”€â”€ types.ts           <span class="hljs-comment">// TypeScript ç±»å‹å®šä¹‰</span>
â”œâ”€â”€ ScaleSlider.tsx    <span class="hljs-comment">// ç»„ä»¶ä¸»é€»è¾‘</span>
â”œâ”€â”€ ScaleSlider.<span class="hljs-keyword">module</span>.css  <span class="hljs-comment">// æ ·å¼æ–‡ä»¶</span>
â””â”€â”€ index.ts           <span class="hljs-comment">// å¯¼å‡º</span>
</code></pre>
<h3 data-id="heading-41">2. DOM ç»“æ„</h3>
<pre><code class="hljs language-xml" lang="xml">html
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container vertical"</span>&gt;</span> <span class="hljs-comment">&lt;!-- Grid å®¹å™¨ --&gt;</span>
  
  <span class="hljs-comment">&lt;!-- åŒºåŸŸ 1ï¼šåˆ»åº¦ï¼ˆpointer-events: noneï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scalesContainer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale scaleMain"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"bottom: 0%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale scaleMinor"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"bottom: 10%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale scaleMain"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"bottom: 20%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- åŒºåŸŸ 2ï¼šè½¨é“ï¼ˆpointer-events: autoï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"trackContainer"</span> <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{...}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"track"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fill"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 60%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"thumb"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"bottom: 60%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- åŒºåŸŸ 3ï¼šå€¼æ˜¾ç¤ºï¼ˆpointer-events: noneï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"valueContainer"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"bottom: 60%"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"valueContent"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"arrow"</span>&gt;</span>â†<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"valueDisplay"</span>&gt;</span>1.60mm<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-42">3. CSS Grid å¸ƒå±€</h3>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* çºµå‘å¸ƒå±€ */</span>
<span class="hljs-selector-class">.vertical</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: 
    auto    <span class="hljs-comment">/* åˆ»åº¦åŒºåŸŸï¼ˆè‡ªé€‚åº”å®½åº¦ï¼‰ */</span>
    <span class="hljs-number">8px</span>     <span class="hljs-comment">/* è½¨é“åŒºåŸŸï¼ˆå›ºå®š 8pxï¼‰ */</span>
    auto;   <span class="hljs-comment">/* å€¼æ˜¾ç¤ºåŒºåŸŸï¼ˆè‡ªé€‚åº”å®½åº¦ï¼‰ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-comment">/* æ¨ªå‘å¸ƒå±€ */</span>
<span class="hljs-selector-class">.horizontal</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-rows</span>: 
    auto    <span class="hljs-comment">/* åˆ»åº¦åŒºåŸŸï¼ˆè‡ªé€‚åº”é«˜åº¦ï¼‰ */</span>
    <span class="hljs-number">8px</span>     <span class="hljs-comment">/* è½¨é“åŒºåŸŸï¼ˆå›ºå®š 8pxï¼‰ */</span>
    auto;   <span class="hljs-comment">/* å€¼æ˜¾ç¤ºåŒºåŸŸï¼ˆè‡ªé€‚åº”é«˜åº¦ï¼‰ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
}
</code></pre>
<h3 data-id="heading-43">4. äº¤äº’åŒºåŸŸç¤ºæ„å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">scss
çºµå‘æ»‘å—ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ»åº¦åŒº   â”‚è½¨é“â”‚  å€¼æ˜¾ç¤º   â”‚
â”‚ (<span class="hljs-number">14px</span>)   â”‚<span class="hljs-number">8px</span> â”‚ (<span class="hljs-number">100px</span>)  â”‚
â”‚          â”‚    â”‚          â”‚
â”‚   â•â•â•    â”‚    â”‚          â”‚
â”‚   â•â•â•    â”‚    â”‚          â”‚
â”‚   â•â•â•    â”‚ â•‘  â”‚  â† å€¼    â”‚
â”‚   â•â•â•    â”‚ â—  â”‚          â”‚ â† è·Ÿéšæ»‘å—
â”‚   â•â•â•    â”‚ â•‘  â”‚          â”‚
â”‚   â•â•â•    â”‚    â”‚          â”‚
â”‚          â”‚    â”‚          â”‚
â”‚ ä¸å“åº”   â”‚å“åº”â”‚  ä¸å“åº”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-44">æŠ€æœ¯æ€»ç»“</h2>
<h3 data-id="heading-45">1. æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹</h3>
<h4 data-id="heading-46">âœ… CSS Grid å¸ƒå±€</h4>
<pre><code class="hljs language-diff" lang="diff">css
ä¼˜åŠ¿ï¼š
<span class="hljs-deletion">- åŒºåŸŸå®Œå…¨ç‹¬ç«‹</span>
<span class="hljs-deletion">- è‡ªåŠ¨è®¡ç®—å°ºå¯¸</span>
<span class="hljs-deletion">- å“åº”å¼å‹å¥½</span>
<span class="hljs-deletion">- ä»£ç ç®€æ´</span>

é€‚ç”¨åœºæ™¯ï¼š
<span class="hljs-deletion">- éœ€è¦ç²¾ç¡®æ§åˆ¶åŒºåŸŸè¾¹ç•Œ</span>
<span class="hljs-deletion">- éœ€è¦ç‹¬ç«‹æ§åˆ¶äº¤äº’è¡Œä¸º</span>
<span class="hljs-deletion">- éœ€è¦çµæ´»çš„å“åº”å¼å¸ƒå±€</span>
</code></pre>
<h4 data-id="heading-47">âœ… pointer-events ç²¾ç¡®æ§åˆ¶</h4>
<pre><code class="hljs language-markdown" lang="markdown">css
æ ¸å¿ƒç­–ç•¥ï¼š
<span class="hljs-bullet">1.</span> å®¹å™¨é»˜è®¤ pointer-events: none
<span class="hljs-bullet">2.</span> åªæœ‰äº¤äº’åŒºåŸŸ pointer-events: auto
<span class="hljs-bullet">3.</span> å…¶ä»–å…ƒç´ æ˜ç¡® pointer-events: none

é˜²æ­¢è¯¯è§¦å‘ï¼š
<span class="hljs-bullet">-</span> åˆ»åº¦ä¸å“åº”
<span class="hljs-bullet">-</span> æ»‘å—ä¸å“åº”ï¼ˆé€šè¿‡è½¨é“æ§åˆ¶ï¼‰
<span class="hljs-bullet">-</span> å€¼æ˜¾ç¤ºä¸å“åº”
</code></pre>
<h4 data-id="heading-48">âœ… åŒå±‚å®šä½ç­–ç•¥</h4>
<pre><code class="hljs language-css" lang="css">typescript
å¤–å±‚ï¼šæ§åˆ¶ä½ç½®ï¼ˆè·Ÿéšæ»‘å—ï¼‰
&lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">bottom</span>: `${percentage}%` }}&gt;
  å†…å±‚ï¼šæ§åˆ¶å¯¹é½ï¼ˆå±…ä¸­ï¼‰
  &lt;<span class="hljs-selector-tag">div</span> style={{ <span class="hljs-attribute">transform</span>: <span class="hljs-string">'translateY(50%)'</span> }}&gt;
    ...
  &lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<h4 data-id="heading-49">âœ… å—æ§/éå—æ§æ¨¡å¼</h4>
<pre><code class="hljs language-csharp" lang="csharp">typescript
<span class="hljs-keyword">const</span> isControlled = controlledValue !== undefined
<span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span> = isControlled ? controlledValue : <span class="hljs-function">internalValue

<span class="hljs-title">if</span> (<span class="hljs-params">!isControlled</span>)</span> {
  setInternalValue(newValue)
}
onChange?.(newValue) <span class="hljs-comment">// æ€»æ˜¯è§¦å‘å›è°ƒ</span>
</code></pre>
<hr/>
<h3 data-id="heading-50">2. æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-51">åŠ¨ç”»ä¼˜åŒ–</h4>
<pre><code class="hljs language-ini" lang="ini">typescript
// ç‚¹å‡»æ—¶ï¼šä½¿ç”¨ CSS transition
&lt;div <span class="hljs-attr">className</span>={styles.fill} /&gt;

// æ‹–æ‹½æ—¶ï¼šç¦ç”¨ transition
&lt;div <span class="hljs-attr">className</span>={`<span class="hljs-variable">${styles.fill}</span> <span class="hljs-variable">${styles.fillNoDrag}</span>`} /&gt;
</code></pre>
<h4 data-id="heading-52">äº‹ä»¶ä¼˜åŒ–</h4>
<pre><code class="hljs language-scss" lang="scss">typescript
<span class="hljs-comment">// ä½¿ç”¨ ref å­˜å‚¨æ‹–æ‹½çŠ¶æ€ï¼Œé¿å…é—­åŒ…é—®é¢˜</span>
const isDraggingRef = <span class="hljs-built_in">useRef</span>(false)

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  const handleMouseMove = (e: MouseEvent) =&gt; {
    if (isDraggingRef.current) { <span class="hljs-comment">// ç›´æ¥è¯»å– ref</span>
      <span class="hljs-built_in">updateValue</span>(e.clientX, e.clientY)
    }
  }
  <span class="hljs-comment">// ...</span>
}, <span class="hljs-selector-attr">[]</span>) <span class="hljs-comment">// ç©ºä¾èµ–æ•°ç»„</span>
</code></pre>
<h4 data-id="heading-53">è®¡ç®—ä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-comment">// é¢„è®¡ç®—åˆ»åº¦ä½ç½®</span>
<span class="hljs-keyword">const</span> scales = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> 
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: scaleCount + <span class="hljs-number">1</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
    <span class="hljs-attr">position</span>: (i / scaleCount) * <span class="hljs-number">100</span>,
    <span class="hljs-attr">isMain</span>: i % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>,
  })),
  [scaleCount]
)
</code></pre>
<hr/>
<h3 data-id="heading-54">3. å…³é”®ç»éªŒæ•™è®­</h3>
<h4 data-id="heading-55">âŒ é¿å…çš„å‘</h4>
<ol>
<li><strong>è¿‡åº¦åµŒå¥— DOM</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript">typescript
<span class="hljs-comment">// âŒ é”™è¯¯</span>
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"wrapper"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"inner"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"track"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- åµŒå¥—è¿‡æ·± --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"track"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ‰å¹³åŒ– --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<ol start="2">
<li><strong>ä¸æ˜ç¡®çš„äº¤äº’åŒºåŸŸ</strong></li>
</ol>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* âŒ é”™è¯¯ */</span>
<span class="hljs-selector-class">.wrapper</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">100px</span>; <span class="hljs-comment">/* å¤§é¢ç§¯å¯èƒ½è¯¯è§¦ */</span>
}

<span class="hljs-comment">/* âœ… æ­£ç¡® */</span>
<span class="hljs-selector-class">.trackContainer</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">8px</span>; <span class="hljs-comment">/* ç²¾ç¡®å®½åº¦ */</span>
  <span class="hljs-attribute">pointer-events</span>: auto;
}
</code></pre>
<ol start="3">
<li><strong>å¿½è§† pointer-events</strong></li>
</ol>
<pre><code class="hljs language-css" lang="css">css
<span class="hljs-comment">/* âŒ é”™è¯¯ï¼šæ²¡æœ‰æ˜ç¡®ç¦ç”¨ */</span>
<span class="hljs-selector-class">.thumb</span> { }

<span class="hljs-comment">/* âœ… æ­£ç¡®ï¼šæ˜ç¡®ç¦ç”¨ */</span>
<span class="hljs-selector-class">.thumb</span> {
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<h4 data-id="heading-56">âœ… æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>ç”¨ Grid ä»£æ›¿å¤æ‚çš„ Flex + Position</strong></li>
<li><strong>ç²¾ç¡®æ§åˆ¶æ¯ä¸ªå…ƒç´ çš„ pointer-events</strong></li>
<li><strong>åŒå±‚å®šä½å¤„ç†è·Ÿéš+å±…ä¸­</strong></li>
<li><strong>ç”¨ ref ç®¡ç†äº‹ä»¶çŠ¶æ€ï¼Œé¿å…é—­åŒ…</strong></li>
<li><strong>åŠ¨æ€æ§åˆ¶è¿‡æ¸¡åŠ¨ç”»</strong></li>
</ol>
<hr/>
<h3 data-id="heading-57">4. å¯æ‰©å±•æ€§è®¾è®¡</h3>
<h4 data-id="heading-58">æ”¯æŒçš„åŠŸèƒ½æ‰©å±•</h4>
<pre><code class="hljs language-typescript" lang="typescript">typescript
<span class="hljs-comment">// âœ… è‡ªå®šä¹‰åˆ»åº¦æ¸²æŸ“</span>
renderScale?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span>, isMain: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-title class_">ReactNode</span>

<span class="hljs-comment">// âœ… è‡ªå®šä¹‰å€¼æ˜¾ç¤º</span>
renderValue?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">ReactNode</span>

<span class="hljs-comment">// âœ… èŒƒå›´æ»‘åŠ¨æ¡ï¼ˆåŒæ»‘å—ï¼‰</span>
<span class="hljs-keyword">type</span>?: <span class="hljs-string">'single'</span> | <span class="hljs-string">'range'</span>

<span class="hljs-comment">// âœ… å‚ç›´æ–‡å­—ï¼ˆçºµå‘å¸ƒå±€ï¼‰</span>
valueOrientation?: <span class="hljs-string">'horizontal'</span> | <span class="hljs-string">'vertical'</span>

<span class="hljs-comment">// âœ… è§¦æ‘¸æ”¯æŒ</span>
onTouchStart, onTouchMove, onTouchEnd

<span class="hljs-comment">// âœ… é”®ç›˜æ§åˆ¶</span>
<span class="hljs-attr">onKeyDown</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'ArrowUp'</span>) <span class="hljs-title function_">setValue</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v + step)
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'ArrowDown'</span>) <span class="hljs-title function_">setValue</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v - step)
}
</code></pre>
<hr/>
<h2 data-id="heading-59">å®Œæ•´ç¤ºä¾‹</h2>
<h3 data-id="heading-60">åŸºç¡€ä½¿ç”¨</h3>
<pre><code class="hljs language-ini" lang="ini">typescript
&lt;ScaleSlider
  <span class="hljs-attr">value</span>={layerHeight}
  <span class="hljs-attr">onChange</span>={setLayerHeight}
  <span class="hljs-attr">min</span>={<span class="hljs-number">0</span>}
  <span class="hljs-attr">max</span>={<span class="hljs-number">3</span>}
  <span class="hljs-attr">step</span>={<span class="hljs-number">0.1</span>}
  <span class="hljs-attr">unit</span>=<span class="hljs-string">"mm"</span>
  <span class="hljs-attr">precision</span>={<span class="hljs-number">2</span>}
  <span class="hljs-attr">orientation</span>=<span class="hljs-string">"vertical"</span>
  <span class="hljs-attr">scaleCount</span>={<span class="hljs-number">10</span>}
/&gt;
</code></pre>
<h3 data-id="heading-61">é«˜çº§é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">typescript
&lt;ScaleSlider
  <span class="hljs-attr">value</span>={temperature}
  <span class="hljs-attr">onChange</span>={setTemperature}
  <span class="hljs-attr">min</span>={-<span class="hljs-number">20</span>}
  <span class="hljs-attr">max</span>={<span class="hljs-number">100</span>}
  <span class="hljs-attr">step</span>={<span class="hljs-number">1</span>}
  <span class="hljs-attr">unit</span>=<span class="hljs-string">"Â°C"</span>
  <span class="hljs-attr">precision</span>={<span class="hljs-number">1</span>}
  <span class="hljs-attr">orientation</span>=<span class="hljs-string">"horizontal"</span>
  <span class="hljs-attr">scaleCount</span>={<span class="hljs-number">12</span>}
  <span class="hljs-attr">showValue</span>={<span class="hljs-literal">true</span>}
  <span class="hljs-attr">showArrow</span>={<span class="hljs-literal">true</span>}
  <span class="hljs-attr">disabled</span>={<span class="hljs-literal">false</span>}
  <span class="hljs-attr">size</span>={<span class="hljs-number">300</span>}
/&gt;
</code></pre>
<hr/>
<h2 data-id="heading-62">æ€»ç»“</h2>
<h3 data-id="heading-63">æ ¸å¿ƒçªç ´</h3>
<ol>
<li>
<p><strong>ä½¿ç”¨ CSS Grid è§£å†³å¸ƒå±€éš”ç¦»é—®é¢˜</strong></p>
<ul>
<li>ä¸‰ä¸ªåŒºåŸŸå®Œå…¨ç‹¬ç«‹</li>
<li>äº¤äº’åŒºåŸŸç²¾ç¡®å¯æ§</li>
</ul>
</li>
<li>
<p><strong>pointer-events ç²¾ç¡®æ§åˆ¶</strong></p>
<ul>
<li>åªæœ‰è½¨é“å“åº”é¼ æ ‡</li>
<li>æ¶ˆé™¤æ‰€æœ‰è¯¯è§¦å‘</li>
</ul>
</li>
<li>
<p><strong>åŒå±‚å®šä½ç­–ç•¥</strong></p>
<ul>
<li>å¤–å±‚è·Ÿéšæ»‘å—</li>
<li>å†…å±‚å±…ä¸­å¯¹é½</li>
</ul>
</li>
</ol>
<h3 data-id="heading-64">æŠ€æœ¯ä»·å€¼</h3>
<ul>
<li>âœ… å¯å¤ç”¨çš„ç»„ä»¶æ¶æ„</li>
<li>âœ… æ¸…æ™°çš„ä»£ç ç»“æ„</li>
<li>âœ… è‰¯å¥½çš„æ€§èƒ½è¡¨ç°</li>
<li>âœ… å®Œå–„çš„äº¤äº’ä½“éªŒ</li>
<li>âœ… æ˜“äºæ‰©å±•å’Œç»´æŠ¤</li>
</ul>
<h3 data-id="heading-65">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… 3D æ‰“å°å‚æ•°è°ƒèŠ‚</li>
<li>âœ… éŸ³é‡/äº®åº¦æ§åˆ¶</li>
<li>âœ… æ¸©åº¦/å‹åŠ›è°ƒèŠ‚</li>
<li>âœ… ä»»ä½•éœ€è¦ç²¾ç¡®åˆ»åº¦çš„æ»‘åŠ¨æ¡</li>
</ul>
<hr/>
<p><strong>æœ€ç»ˆæˆæœï¼šä¸€ä¸ªç”Ÿäº§çº§çš„åˆ»åº¦æ»‘åŠ¨æ¡ç»„ä»¶ï¼</strong> Â ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘ç›‘æ§ UModel Explorerï¼šç”¨â€œå›¾å½¢åŒ–â€é‡æ–°å®šä¹‰å¯è§‚æµ‹æ•°æ®å»ºæ¨¡]]></title>    <link>https://juejin.cn/post/7579438351296675876</link>    <guid>https://juejin.cn/post/7579438351296675876</guid>    <pubDate>2025-12-03T08:11:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579438351296675876" data-draft-id="7579062563325886505" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘ç›‘æ§ UModel Explorerï¼šç”¨â€œå›¾å½¢åŒ–â€é‡æ–°å®šä¹‰å¯è§‚æµ‹æ•°æ®å»ºæ¨¡"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-03T08:11:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘ç›‘æ§ UModel Explorerï¼šç”¨â€œå›¾å½¢åŒ–â€é‡æ–°å®šä¹‰å¯è§‚æµ‹æ•°æ®å»ºæ¨¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:11:41.000Z" title="Wed Dec 03 2025 08:11:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šéš°å®—æ­£(éœœé”®)</p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1jjUrBYEum%2F" target="_blank" title="https://www.bilibili.com/video/BV1jjUrBYEum/" ref="nofollow noopener noreferrer">æ­¤å¤„</a>æŸ¥çœ‹ç›¸å…³è§†é¢‘ï¼</p>
<p>åœ¨å¤æ‚å¯è§‚æµ‹ç³»ç»Ÿçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ•°æ®å»ºæ¨¡å¾€å¾€æ˜¯â€œä»æ··æ²Œåˆ°ç§©åºâ€çš„å…³é”®ä¸€æ­¥ã€‚ä¼ ç»Ÿçš„å»ºæ¨¡æ–¹å¼å¾€å¾€ä¾èµ–é…ç½®æ–‡ä»¶æˆ–ä»£ç å®šä¹‰ï¼Œè¿™ç§æ–¹å¼è™½ç„¶ç²¾ç¡®ï¼Œä½†ç¼ºä¹ç›´è§‚æ€§ï¼Œéš¾ä»¥è®©å›¢é˜Ÿæˆå‘˜å¿«é€Ÿç†è§£å’Œåä½œã€‚UModel Explorer æ­£æ˜¯ä¸ºäº†æ”¹å˜è¿™ä¸€ç°çŠ¶è€Œè®¾è®¡ã€‚å®ƒæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å¯è§†åŒ–å»ºæ¨¡ç¯å¢ƒï¼Œè®©å·¥ç¨‹å¸ˆå¯ä»¥åƒç»˜åˆ¶æ¶æ„å›¾ä¸€æ ·ï¼Œé€šè¿‡æ‹–æ‹½ã€è¿çº¿ç­‰ç›´è§‚æ“ä½œæ¥æ„å»ºå¯è§‚æµ‹æ•°æ®æ¨¡å‹ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦å¯è§†åŒ–çš„ UModel å»ºæ¨¡</h2>
<h3 data-id="heading-1">1.1 é—®é¢˜ä¸ç—›ç‚¹</h3>
<p>åœ¨å½“ä»Šçš„äº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œç³»ç»Ÿçš„å¤æ‚æ€§å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„ç”¨æˆ·è¯·æ±‚ï¼ŒèƒŒåå¯èƒ½æµç»æ•°åç”šè‡³ä¸Šç™¾ä¸ªæœåŠ¡ç»„ä»¶ã€‚è¿™ç§å¤æ‚æ€§å¸¦æ¥äº†å¯è§‚æµ‹é¢†åŸŸçš„å·¨å¤§æŒ‘æˆ˜ï¼šæ•°æ®å­¤å²›ç°è±¡ä¸¥é‡ã€‚æŒ‡æ ‡ï¼ˆMetricsï¼‰ã€è¿½è¸ªï¼ˆTracesï¼‰ã€æ—¥å¿—ï¼ˆLogsï¼‰è¿™ä¸‰å¤§æ”¯æŸ±åˆ†æ•£åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œå½¼æ­¤å‰²è£‚ã€‚å½“æ•…éšœå‘ç”Ÿæ—¶ï¼Œå·¥ç¨‹å¸ˆä¸å¾—ä¸åœ¨å¤šä¸ªç³»ç»Ÿä¹‹é—´æ¥å›è·³è½¬ï¼Œè¯•å›¾é€šè¿‡äººè„‘å°†è¿™äº›ç¢ç‰‡åŒ–çš„ä¿¡æ¯æ‹¼å‡‘æˆå®Œæ•´çš„æ•…éšœç°åœºã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å¯¹å·¥ç¨‹å¸ˆçš„ç»éªŒå’Œç³»ç»Ÿç†Ÿæ‚‰åº¦è¦æ±‚æé«˜ã€‚</p>
<p>ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆè¯•å›¾é€šè¿‡æ•°æ®å»ºæ¨¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†å¾€å¾€å¼•å…¥äº†æ–°çš„ç—›ç‚¹ã€‚åŸºäºä»£ç æˆ– YAML çš„å»ºæ¨¡æ–¹å¼ï¼ˆå¦‚ Terraformã€Prometheus Operatorï¼‰è™½ç„¶åŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºç‰ˆæœ¬æ§åˆ¶ï¼Œä½†å…¶é™¡å³­çš„å­¦ä¹ æ›²çº¿å’Œé«˜åº¦çš„æŠ½è±¡æ€§ï¼Œä½¿å¾—æ•°æ®æ¨¡å‹å˜æˆäº†å°‘æ•°ä¸“å®¶çš„â€œç§æœ‰ç‰©å“â€ã€‚ä¸šåŠ¡å¼€å‘äººå‘˜éš¾ä»¥ç†è§£ï¼Œæ–°å…¥èŒçš„ SRE ä¹Ÿéœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ‰èƒ½ä¸Šæ‰‹ã€‚æ¨¡å‹ä¸ç°å®ç³»ç»Ÿä¹‹é—´çš„æ˜ å°„å…³ç³»ä¸å¤Ÿç›´è§‚ï¼Œå¯¼è‡´æ¨¡å‹æ›´æ–°æ»åï¼Œæœ€ç»ˆæ²¦ä¸ºâ€œåƒµå°¸æ¨¡å‹â€ã€‚æˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€ç§æ›´ç›´è§‚ã€æ›´ä½é—¨æ§›çš„æ–¹å¼æ¥å®šä¹‰å’Œç®¡ç†å¯è§‚æµ‹æ•°æ®æ¨¡å‹ã€‚</p>
<h3 data-id="heading-2">1.2 ä¸šç•Œç°çŠ¶</h3>
<p>ä¸šç•Œè§£å†³è¿™ä¸€é—®é¢˜çš„æ€è·¯ä¸»è¦åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»æ˜¯â€œåˆ†ææ—¶å…³è”â€ï¼Œå³åœ¨æŸ¥è¯¢å’Œåˆ†æé˜¶æ®µï¼Œé€šè¿‡ç‰¹å®šçš„å…³è” IDï¼ˆå¦‚Â trace_idï¼‰å°†ä¸åŒæ•°æ®æºå…³è”èµ·æ¥ã€‚è¿™ç§æ–¹å¼åœ¨ç‰¹å®šåœºæ™¯ä¸‹æœ‰æ•ˆï¼Œä½†å®ƒæ˜¯ä¸€ç§â€œäº‹åâ€å…³è”ï¼Œæ— æ³•åœ¨å»ºæ¨¡é˜¶æ®µæä¾›å…¨å±€çš„ã€ç»“æ„åŒ–çš„ç³»ç»Ÿè§†å›¾ã€‚</p>
<p>å¦ä¸€ç±»æ˜¯â€œå»ºæ¨¡æ—¶å®šä¹‰â€ï¼Œé€šè¿‡å„ç§ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰æˆ–é…ç½®æ–‡ä»¶æ¥é¢„å…ˆå®šä¹‰å®ä½“åŠå…¶å…³ç³»ã€‚è¿™ç±»æ–¹æ¡ˆè™½ç„¶æä¾›äº†ç»“æ„åŒ–çš„èƒ½åŠ›ï¼Œä½†å…¶äº¤äº’ä½“éªŒå¾€å¾€ä¸å»ºæ¨¡è¿‡ç¨‹æœ¬èº«æ˜¯è„±èŠ‚çš„ã€‚å¯è§†åŒ–é€šå¸¸åªæ˜¯å»ºæ¨¡ç»“æœçš„ä¸€ç§â€œåªè¯»â€å±•ç¤ºï¼Œè€Œä¸æ˜¯å»ºæ¨¡è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å·¥ç¨‹å¸ˆåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ä¿®æ”¹å¤æ‚çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œå·¥å…·åº”ç”¨å˜æ›´ï¼Œæœ€ååœ¨ä¸€ä¸ª Web ç•Œé¢ä¸ŠæŸ¥çœ‹ç»“æœã€‚è¿™ä¸ªâ€œç¼–è¾‘-ç¼–è¯‘-è¿è¡Œâ€çš„å¾ªç¯ï¼Œåœ¨å¤æ‚çš„æ¨¡å‹æ„å»ºè¿‡ç¨‹ä¸­æ˜¾å¾—éå¸¸ç¬¨æ‹™å’Œä½æ•ˆã€‚</p>
<h3 data-id="heading-3">1.3 é˜¿é‡Œäº‘å¯è§‚æµ‹è§£å†³æ€è·¯ï¼šå¯è§†åŒ–å³å»ºæ¨¡</h3>
<p>é¢å¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œå¯è§‚æµ‹å¼€å‘å›¢é˜Ÿçš„æ€è·¯æ˜¯ï¼šå°†å¯è§†åŒ–çš„â€œç»ˆç‚¹â€å‰ç§»ï¼Œè®©å®ƒæˆä¸ºå»ºæ¨¡çš„â€œèµ·ç‚¹â€å’Œâ€œè¿‡ç¨‹â€ã€‚UModel Explorer çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯â€œå¯è§†åŒ–å³å»ºæ¨¡â€(Visualization as Modeling)ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œæè¿°ä¸€ä¸ªå¤æ‚ç³»ç»Ÿçš„æœ€ä½³æ–¹å¼ï¼Œå°±æ˜¯åƒåœ¨ç™½æ¿ä¸Šç”»æ¶æ„å›¾ä¸€æ ·ï¼Œç›´è§‚åœ°æŠŠå®ƒå‘ˆç°å‡ºæ¥ã€‚</p>
<p>UModel Explorer æä¾›äº†ä¸€ä¸ªäº¤äº’å¼çš„ç”»å¸ƒï¼Œç”¨æˆ·ä¸å†æ˜¯é¢å¯¹å†°å†·çš„é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯ç›´æ¥ä¸ä»£è¡¨ç€å®ä½“ï¼ˆEntitySetï¼‰ã€æŒ‡æ ‡ï¼ˆMetricSetï¼‰ç­‰å¯è§‚æµ‹å…ƒç´ çš„å›¾å½¢åŒ–èŠ‚ç‚¹è¿›è¡Œäº¤äº’ã€‚åˆ›å»º UModelï¼Œå°±æ˜¯ä»å·¥å…·æ ç‚¹å‡»æ–°å»ºèŠ‚ç‚¹ï¼›å»ºç«‹å…³ç³»ï¼Œå°±æ˜¯ç”¨é¼ æ ‡åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ç”»ä¸€æ¡çº¿ã€‚æ‰€æœ‰çš„ä¿®æ”¹éƒ½ä¼šå®æ—¶åœ°åœ¨ç”»å¸ƒä¸Šåæ˜ å‡ºæ¥ï¼Œæä¾›äº†ä¸€ç§æ‰€è§å³æ‰€å¾—ï¼ˆWYSIWYGï¼‰çš„å»ºæ¨¡ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75553183285b4a398534f4c83b4a9e9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=u5Do2r9NJiGAHpEsYoSloqdesMo%3D" alt="å›¾ç‰‡" loading="lazy"/>ç”¨æˆ·å¯å‰å¾€å¯è§‚æµ‹ 2.0 æ§åˆ¶å°è¿›è¡Œä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcmsnext.console.aliyun.com%2Fnext%2Fhome" target="_blank" title="https://cmsnext.console.aliyun.com/next/home" ref="nofollow noopener noreferrer">cmsnext.console.aliyun.com/next/home</a></p>
<p>åº•å±‚æ”¯æ’‘è¿™ä¸€ä½“éªŒçš„æ˜¯ç»Ÿä¸€å¯è§‚æµ‹æ¨¡å‹ï¼ˆUModelï¼‰ã€‚UModel æ˜¯æˆ‘ä»¬æå‡ºçš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒé€šè¿‡ä¸€å¥—æ ‡å‡†çš„ Schemaï¼Œå°†æŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ªã€äº‹ä»¶ç­‰å¤šç§å¯è§‚æµ‹æ•°æ®ç»Ÿä¸€æŠ½è±¡ä¸ºâ€œå®ä½“â€å’Œâ€œå…³ç³»â€ï¼Œä»æ ¹æœ¬ä¸Šæ‰“ç ´äº†æ•°æ®å­¤å²›ã€‚UModel Explorer æ­£æ˜¯è¿™ä¸€ç»Ÿä¸€æ¨¡å‹çš„å¯è§†åŒ–äº¤äº’ç•Œé¢ã€‚</p>
<h3 data-id="heading-4">1.4 ç‹¬ç‰¹ä¼˜åŠ¿</h3>
<p>ç›¸æ¯”äºä¸šç•Œç°æœ‰æ–¹æ¡ˆï¼ŒUModel Explorer çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ä½“éªŒçš„é©å‘½æ€§ï¼Œè¿™ç§ä½“éªŒå¸¦æ¥äº†æ•ˆç‡å’Œåä½œæ–¹å¼çš„å·¨å¤§æå‡ã€‚</p>
<ul>
<li>æä½çš„è®¤çŸ¥é—¨æ§›ï¼šå›¾å½¢åŒ–çš„äº¤äº’æ–¹å¼ç¬¦åˆäººç±»çš„ç›´è§‰ã€‚æ— è®ºæ˜¯ç»éªŒä¸°å¯Œçš„æ¶æ„å¸ˆï¼Œè¿˜æ˜¯åˆšå…¥èŒçš„å¼€å‘äººå‘˜ï¼Œéƒ½å¯ä»¥é€šè¿‡ç”»å¸ƒå¿«é€Ÿç†è§£ç³»ç»Ÿçš„å¯è§‚æµ‹æ¨¡å‹ã€‚è¿™ä½¿å¾—æ¨¡å‹ä¸å†æ˜¯å°‘æ•°ä¸“å®¶çš„ä¸“åˆ©ï¼Œè€Œæˆä¸ºå›¢é˜Ÿå…±äº«çš„çŸ¥è¯†èµ„äº§ã€‚</li>
<li>å»ºæ¨¡ä¸åˆ†æä¸€ä½“åŒ–ï¼šUModel Explorer ä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œç”»å›¾â€å·¥å…·ã€‚ç”»å¸ƒä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªâ€œæ´»â€çš„å…¥å£ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨ MetricSet èŠ‚ç‚¹ä¸Šå‘èµ·æŒ‡æ ‡åˆ†æï¼Œæˆ–è€…åœ¨ EntitySet èŠ‚ç‚¹ä¸ŠæŸ¥è¯¢å®ä½“åˆ—è¡¨ã€‚è¿™ç§å°†å»ºæ¨¡ã€æ¢ç´¢ã€åˆ†ææ— ç¼é›†æˆçš„è®¾è®¡ï¼Œæ‰“é€šäº†ä»â€œå®šä¹‰æ¨¡å‹â€åˆ°â€œä½¿ç”¨æ¨¡å‹â€çš„æœ€åä¸€å…¬é‡Œï¼Œå®ç°äº†çœŸæ­£çš„â€œå»ºæ¨¡å³æœåŠ¡â€ã€‚</li>
<li>é«˜æ•ˆçš„åä½œå¹³å°ï¼šå¯è§†åŒ–çš„ç”»å¸ƒæˆä¸ºäº†å›¢é˜Ÿä¹‹é—´æ²Ÿé€šå’Œåä½œçš„å…±åŒè¯­è¨€ã€‚å½“éœ€è¦è°ƒæ•´ç›‘æ§ç­–ç•¥æˆ–æ’æŸ¥é—®é¢˜æ—¶ï¼Œç›¸å…³äººå‘˜å¯ä»¥å›´ç»•ç€åŒä¸€å¼ â€œæ´»â€çš„æ¶æ„å›¾è¿›è¡Œè®¨è®ºï¼Œæ‰€æœ‰çš„å˜æ›´æ„å›¾éƒ½æ¸…æ™°å¯è§ã€‚åˆ†äº«åŠŸèƒ½æ›´æ˜¯è®©è·¨å›¢é˜Ÿåä½œå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚</li>
<li>å¼ºå¤§çš„å·¥ç¨‹åŒ–èƒ½åŠ›ï¼šåœ¨ç›´è§‚çš„äº¤äº’ä½“éªŒèƒŒåï¼ŒUModel Explorer å…·å¤‡å®Œæ•´çš„å·¥ç¨‹åŒ–èƒ½åŠ›ã€‚æ‰€æœ‰çš„å¯è§†åŒ–æ“ä½œæœ€ç»ˆéƒ½ä¼šè½¬åŒ–ä¸ºç»“æ„åŒ–çš„ UModel å®šä¹‰ã€‚æäº¤å·¥ä½œæµæä¾›äº†æ¸…æ™°çš„å˜æ›´å®¡æŸ¥ï¼ˆDiffï¼‰æœºåˆ¶ï¼Œæ”¯æŒæ’¤é”€/é‡åšï¼Œç¡®ä¿äº†æ‰€æœ‰ä¿®æ”¹éƒ½æ˜¯å¯è¿½æº¯ã€å¯ç®¡ç†çš„ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒUModel Explorer å¹¶éç®€å•åœ°ä¸ºæ•°æ®æ¨¡å‹å¢åŠ äº†ä¸€ä¸ªå¯è§†åŒ–å±‚ï¼Œè€Œæ˜¯ä»æ ¹æœ¬ä¸Šé‡æ„äº†å¯è§‚æµ‹å»ºæ¨¡çš„äº¤äº’èŒƒå¼ã€‚å®ƒå°†å¤æ‚çš„å»ºæ¨¡è¿‡ç¨‹è½¬å˜ä¸ºä¸€ç§ç›´è§‚ã€é«˜æ•ˆä¸”å¯Œæœ‰åˆ›é€ æ€§çš„ä½“éªŒï¼Œæ—¨åœ¨å°†æ¯ä¸€ä½å·¥ç¨‹å¸ˆä»ç¹ççš„é…ç½®å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œæ›´ä¸“æ³¨äºå¯è§‚æµ‹æ€§å¸¦æ¥çš„çœŸæ­£ä»·å€¼ã€‚</p>
<h2 data-id="heading-5">ç³»ç»Ÿæ¦‚è¿°ä¸å…¥å£</h2>
<p>UModel Explorer ä½œä¸ºå¯è§‚æµ‹ 2.0 å¹³å°çš„æ ¸å¿ƒç»„ä»¶ï¼Œæä¾›äº†ç»Ÿä¸€çš„å¯è§‚æµ‹æ•°æ®å»ºæ¨¡èƒ½åŠ›ã€‚å®ƒæ”¯æŒå¤šç§æ•°æ®æ¨¡å‹ç±»å‹ï¼ŒåŒ…æ‹¬Â entity_setï¼ˆå®ä½“é›†ï¼‰ã€metric_setï¼ˆæŒ‡æ ‡é›†ï¼‰ã€log_setï¼ˆæ—¥å¿—é›†ï¼‰ã€trace_setï¼ˆè¿½è¸ªé›†ï¼‰ç­‰ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³è”å…³ç³»ã€‚è¿™ç§ç»Ÿä¸€çš„å»ºæ¨¡æ¡†æ¶ï¼Œè®©åŸæœ¬åˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿä¸­çš„æ•°æ®æœ‰äº†ç»Ÿä¸€çš„ç®¡ç†è§†è§’ã€‚</p>
<p>è¿›å…¥ç³»ç»Ÿçš„æ–¹å¼å¾ˆç®€å•ï¼šè¿›å…¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘äº‘ç›‘æ§ 2.0</a> äº§å“æ§åˆ¶å°åé€‰æ‹©ä¸€ä¸ªWorkspaceå¹¶è¿›å…¥ï¼Œåœ¨â€œåº”ç”¨ä¸­å¿ƒâ€æ‰¾åˆ° UModel Explorerï¼Œæ¨èå°†å…¶å›ºå®šåˆ° Workspace App ä¾§è¾¹æ ï¼Œè¿™æ ·å¯ä»¥åœ¨æ—¥å¸¸å·¥ä½œä¸­å¿«é€Ÿè®¿é—®ã€‚é¦–æ¬¡è¿›å…¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½å½“å‰ Workspace ä¸­çš„æ‰€æœ‰ UModel æ•°æ®ï¼Œå¹¶ä»¥å›¾å½¢åŒ–çš„æ–¹å¼å±•ç¤ºåœ¨ç”»å¸ƒä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de28a91db92f442d9db293290c81cc54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=A%2BFpFB%2Fk7sCY1gwSgKGMHOUbvZ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸»ç•Œé¢å¸ƒå±€</h2>
<p>UModel Explorer çš„ä¸»ç•Œé¢é‡‡ç”¨äº†æ¸…æ™°çš„åŠŸèƒ½åˆ†åŒºè®¾è®¡ï¼Œè¿™ç§å¸ƒå±€æ—¢ä¿è¯äº†ä¿¡æ¯çš„å±‚æ¬¡æ€§ï¼Œåˆå…¼é¡¾äº†æ“ä½œçš„ä¾¿åˆ©æ€§ã€‚æ•´ä¸ªç•Œé¢å¯ä»¥å¤§è‡´åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸï¼šå·¦ä¸Šè§’çš„æ§åˆ¶é¢æ¿ã€å³ä¾§çš„è¯¦æƒ…é¢æ¿ã€å³ä¸‹è§’çš„è¿·ä½ å›¾ï¼Œä»¥åŠå³ä¸Šè§’çš„æ“ä½œå·¥å…·æ ã€‚ä¸­å¤®çš„ç”»å¸ƒåŒºåŸŸå æ®äº†æœ€å¤§ç©ºé—´ï¼Œè¿™æ˜¯ç”¨æˆ·è¿›è¡Œå»ºæ¨¡æ“ä½œçš„æ ¸å¿ƒåŒºåŸŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97aa672b7f4c4051800af741971a6ba9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=YR3C4AkTFvHjO69xhBPLdyp2AQs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-7">3.1 æ§åˆ¶é¢æ¿ï¼šå…¨å±€è§†å›¾ä¸ç­›é€‰</h3>
<p>æ§åˆ¶é¢æ¿ä½äºç•Œé¢å·¦ä¸Šè§’ï¼Œæ˜¯ç®¡ç†æ•´ä¸ª UModel é›†åˆçš„ä¸­å¤®æ§åˆ¶å°ã€‚é¢æ¿é‡‡ç”¨æ ‡ç­¾é¡µè®¾è®¡ï¼ŒåŒ…å«æ¦‚è§ˆã€ç­›é€‰ã€CommonSchema ä¿¡æ¯å’Œè®¾ç½®å››ä¸ªé¡µé¢ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»é¢æ¿å³ä¾§çš„æŠ˜å æŒ‰é’®æ¥æ”¶èµ·æˆ–å±•å¼€æ§åˆ¶é¢æ¿ï¼Œå½“ç”»å¸ƒä¸Šçš„æ“ä½œéœ€è¦æ›´å¤šç©ºé—´æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ed6bf1c32bf4bb39bee557a3aa58326~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=zGTpxCH5vcmuMzJNop2kKojNFmk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-8">3.1.1 æ¦‚è§ˆé¡µï¼šæ•°æ®æ€»è§ˆä¸å¯¼èˆª</h4>
<p>æ¦‚è§ˆé¡µæä¾›äº†å½“å‰ Workspace ä¸­ UModel æ•°æ®çš„å…¨å±€ç»Ÿè®¡ä¿¡æ¯ã€‚è¿™äº›ç»Ÿè®¡ä¿¡æ¯åˆ†ä¸ºä¸¤ä¸ªç»´åº¦ï¼šèŠ‚ç‚¹ç»Ÿè®¡å’Œé“¾æ¥ç»Ÿè®¡ã€‚èŠ‚ç‚¹ç»Ÿè®¡å±•ç¤ºå„ç±» UModel å…ƒç´ ï¼ˆentity_setã€metric_set ç­‰ï¼‰çš„æ•°é‡åˆ†å¸ƒï¼Œé“¾æ¥ç»Ÿè®¡åˆ™å±•ç¤ºäº†å®ƒä»¬ä¹‹é—´çš„å…³è”å…³ç³»æ•°é‡ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œentity_set_linkÂ ç±»å‹åœ¨ç»Ÿè®¡ä¸­åŒæ—¶ç®—ä½œèŠ‚ç‚¹å’Œé“¾æ¥ï¼Œå› ä¸ºå®ƒæ—¢æ˜¯ä¸€ä¸ªèŠ‚ç‚¹å®ä½“ï¼Œåˆä»£è¡¨äº†ä¸€ç§å…³è”å…³ç³»ã€‚</p>
<p>ç»Ÿè®¡ä¿¡æ¯æ”¯æŒä¸¤ç§æ¨¡å¼ï¼šå…¨å±€ç»Ÿè®¡å’Œåº”ç”¨è¿‡æ»¤å™¨ç»Ÿè®¡ã€‚å½“ç”¨æˆ·è®¾ç½®äº†ç­›é€‰æ¡ä»¶åï¼Œå¯ä»¥åˆ‡æ¢åˆ°åº”ç”¨è¿‡æ»¤å™¨æ¨¡å¼ï¼Œæ­¤æ—¶ç»Ÿè®¡ä¿¡æ¯ä¼šåªè®¡ç®—ç¬¦åˆç­›é€‰æ¡ä»¶çš„å…ƒç´ ï¼Œè¿™è®©ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿäº†è§£å½“å‰è§†å›¾èŒƒå›´å†…çš„æ•°æ®åˆ†å¸ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/598651d271dc4d539bfcb3b6f34286ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=yxOi4vmYw3aU5NKWpSGxgJACIEc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¦‚è§ˆé¡µè¿˜æä¾›äº†ä¸€ä¸ªé‡è¦çš„å¯¼èˆªåŠŸèƒ½ï¼šUModel åˆ—è¡¨è§†å›¾ã€‚ç‚¹å‡»â€œæŸ¥çœ‹ UModel åˆ—è¡¨â€æŒ‰é’®ï¼Œä¼šè¿›å…¥ä¸€ä¸ªè¡¨æ ¼è§†å›¾ã€‚è¿™ä¸ªè¡¨æ ¼ä¸ä»…å±•ç¤ºæ‰€æœ‰ UModel å…ƒç´ çš„é€šç”¨ä¿¡æ¯ï¼ˆåç§°ã€åŸŸã€ç±»å‹ç­‰ï¼‰ï¼Œè¿˜æ ¹æ®ä¸åŒçš„å…ƒç´ ç±»å‹å±•ç¤ºä¸“å±çš„å…³é”®ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¯¹äº metric_setï¼Œä¼šå±•ç¤ºå…¶åŒ…å«çš„æŒ‡æ ‡æ•°é‡ï¼›å¯¹äº entity_setï¼Œä¼šå±•ç¤ºå®ä½“ç±»å‹ç­‰ã€‚è¡¨æ ¼æ”¯æŒå¤šç»´åº¦çš„ç­›é€‰ï¼ŒåŒ…æ‹¬æŒ‰ç±»å‹ã€æŒ‰åŸŸç­›é€‰ï¼Œè¿˜æ”¯æŒå…¨æ–‡æœç´¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯ï¼ˆæ”¯æŒä¸­æ–‡åã€è‹±æ–‡åæˆ– IDï¼‰ï¼Œç³»ç»Ÿä¼šåœ¨æ‰€æœ‰å­—æ®µä¸­æœç´¢åŒ¹é…çš„å†…å®¹ã€‚</p>
<p>åˆ—è¡¨è§†å›¾çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯å®šä½ã€‚å½“ç”¨æˆ·æ‰¾åˆ°æŸä¸ª UModel å…ƒç´ åï¼Œç‚¹å‡»æ“ä½œæ ä¸­çš„å®šä½æŒ‰é’®ï¼Œç”»å¸ƒä¼šè‡ªåŠ¨èšç„¦åˆ°è¯¥å…ƒç´ ï¼Œå¹¶å°†å…¶ç½®å…¥èšç„¦ç­›é€‰æ¡ä»¶ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨æ•°æ®é‡å¾ˆå¤§çš„åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€Ÿä»ä¸€ä¸ªåºå¤§çš„æ¨¡å‹å›¾ä¸­æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39c3be4ccde942e5af3c531c9f6358bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=VPuonL3bNBPqQYs%2Bh6aT0WA7l7w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-9">3.1.2 ç­›é€‰é¡µï¼šç²¾ç¡®æ•°æ®å®šä½</h4>
<p>ç­›é€‰é¡µæä¾›äº†å¼ºå¤§çš„æ•°æ®è¿‡æ»¤èƒ½åŠ›ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿä»æµ·é‡çš„ UModel æ•°æ®ä¸­å¿«é€Ÿå®šä½åˆ°éœ€è¦æŸ¥çœ‹æˆ–ç¼–è¾‘çš„éƒ¨åˆ†ã€‚ç­›é€‰åŠŸèƒ½åˆ†ä¸ºå››ç§ç±»å‹ï¼Œå®ƒä»¬çš„ç»„åˆé€»è¾‘éœ€è¦ç†è§£æ¸…æ¥šæ‰èƒ½é«˜æ•ˆä½¿ç”¨ã€‚</p>
<p>å‰ä¸‰ç§ç­›é€‰ç±»å‹ï¼ˆèŠ‚ç‚¹ç±»å‹ç­›é€‰ã€åŸŸç­›é€‰ã€å…¨æ–‡æŸ¥æ‰¾ç­›é€‰ï¼‰ä½œä¸ºä¸€ç»„ï¼Œå®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»æ˜¯ï¼šåŒä¸€é¡¹å†…ä¸ºâ€œæˆ–â€å…³ç³»ï¼Œä¸åŒé¡¹ä¹‹é—´ä¸ºâ€œä¸”â€å…³ç³»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç”¨æˆ·åœ¨èŠ‚ç‚¹ç±»å‹ç­›é€‰ä¸­é€‰æ‹©äº† entity_set å’Œ metric_setï¼Œåœ¨åŸŸç­›é€‰ä¸­é€‰æ‹©äº† domain1 å’Œ domain2ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šæ˜¾ç¤ºæ‰€æœ‰ç±»å‹ä¸º entity_set æˆ– metric_setï¼Œä¸”åŸŸä¸º domain1 æˆ– domain2 çš„å…ƒç´ ã€‚å…¨æ–‡æŸ¥æ‰¾ç­›é€‰çš„ä½¿ç”¨éœ€è¦æ³¨æ„ï¼Œè¾“å…¥å…³é”®è¯åéœ€è¦æŒ‰å›è½¦é”®æ‰èƒ½æäº¤ã€‚</p>
<p>ç¬¬å››ç§ç­›é€‰æ˜¯èšç„¦ç­›é€‰ï¼Œè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç­›é€‰æ¨¡å¼ã€‚å½“å­˜åœ¨èšç„¦ç­›é€‰æ—¶ï¼Œå…¶ä»–æ‰€æœ‰ç­›é€‰æ¡ä»¶éƒ½ä¼šè¢«å¿½ç•¥ï¼Œç³»ç»Ÿåªæ˜¾ç¤ºèšç„¦ç­›é€‰é€‰ä¸­çš„å…ƒç´ ã€‚èšç„¦ç­›é€‰é€šå¸¸æ˜¯ä¸´æ—¶æ€§çš„ï¼Œç”¨äºå¿«é€ŸæŸ¥çœ‹æŸä¸ªç‰¹å®šçš„å­å›¾ã€‚ç”¨æˆ·ä¸ç®¡æ˜¯ç”»å¸ƒä¸Šçš„èŠ‚ç‚¹æ“ä½œèœå•ï¼Œè¿˜æ˜¯åˆ—è¡¨è§†å›¾çš„å®šä½åŠŸèƒ½ï¼Œéƒ½å¯ä»¥è®¾ç½®èšç„¦ç­›é€‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3370251202c9404a9ca79a7de2e2be0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=LAo4wGnK1QIfK%2F%2BrxeyQSnqaLKs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€æœ‰ç­›é€‰æ¡ä»¶ä¿®æ”¹åï¼Œéœ€è¦ç‚¹å‡»â€œåº”ç”¨â€æŒ‰é’®æ‰ä¼šç”Ÿæ•ˆã€‚è¿™ä¸ªè®¾è®¡è®©ç”¨æˆ·å¯ä»¥åŒæ—¶ä¿®æ”¹å¤šä¸ªç­›é€‰æ¡ä»¶ï¼Œç„¶åä¸€æ¬¡æ€§åº”ç”¨ï¼Œé¿å…äº†é¢‘ç¹åˆ·æ–°ç”»å¸ƒå¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<h4 data-id="heading-10">3.1.3 CommonSchema ä¿¡æ¯é¡µï¼šå…¬å…±æ¨¡å‹ç®¡ç†</h4>
<p>åœ¨é˜¿é‡Œäº‘å¯è§‚æµ‹ä¸šåŠ¡ä¸­ï¼Œç³»ç»Ÿå†…ç½®äº†ä¸€äº›æ ‡å‡†åŒ–çš„ UModel æ•°æ®ï¼Œè¿™äº›æ•°æ®ä½œä¸ºå…¬å…± UModelï¼ˆCommonSchemaï¼‰é»˜è®¤å­˜åœ¨äº Workspace ä¸­ã€‚å…¬å…± UModel æ•°æ®ä»¥å¼•ç”¨æ–¹å¼ï¼ˆCommonSchemaRefï¼‰é…ç½®ï¼Œåœ¨æŸ¥è¯¢æ—¶åŠ¨æ€ç”Ÿæˆ UModel å®ä¾‹ï¼Œå¹¶åœ¨å…ƒç´ çš„ metadata å­—æ®µä¸­é™„åŠ  commonschemainfo å­—æ®µä½œä¸ºé¢å¤–è¯´æ˜ã€‚</p>
<p>CommonSchema ä¿¡æ¯é¡µå±•ç¤ºäº†å½“å‰ Workspace ä½¿ç”¨äº†å“ªäº› CommonSchemaï¼Œä»¥åŠæ˜¯å¦å­˜åœ¨æœ¬åœ°å®šä¹‰ä¸ CommonSchema çš„å†²çªã€‚è¿™ç§å†²çªæ£€æµ‹éå¸¸é‡è¦ï¼Œå› ä¸ºå¦‚æœæœ¬åœ°å®šä¹‰çš„ UModel ä¸ CommonSchema çš„å®šä¹‰ä¸ä¸€è‡´ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢æˆ–åˆ†ææ—¶å‡ºç°é—®é¢˜ã€‚å½“æ£€æµ‹åˆ°å†²çªæ—¶ï¼Œç³»ç»Ÿä¼šæ¸…æ™°åœ°æ ‡ç¤ºå‡ºæ¥ï¼Œç”¨æˆ·éœ€è¦å†³å®šæ˜¯ä½¿ç”¨ CommonSchema çš„ç‰ˆæœ¬ï¼Œè¿˜æ˜¯ä¿ç•™æœ¬åœ°çš„è‡ªå®šä¹‰ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9d1ebd21d0b4b0382ac29d2e27fa298~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=dQny5arWn2RGGZ7Cc0lmoOPQpWE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCommonSchema å…ƒç´ åœ¨ç”»å¸ƒä¸Šä¼šæ˜¾ç¤ºç‰¹æ®Šçš„æ ‡è¯†ï¼ˆäº‘æœµå›¾æ ‡ï¼‰ï¼Œå®ƒä»¬ä¸æ”¯æŒç›´æ¥ä¿®æ”¹ã€‚å¦‚æœç”¨æˆ·éœ€è¦è‡ªå®šä¹‰ï¼Œåº”è¯¥åˆ›å»ºæœ¬åœ°çš„ UModel å…ƒç´ ï¼Œè€Œä¸æ˜¯è¯•å›¾ä¿®æ”¹ CommonSchemaã€‚</p>
<h4 data-id="heading-11">3.1.4 è®¾ç½®é¡µï¼šæ˜¾ç¤ºä¸æ€§èƒ½æ§åˆ¶</h4>
<p>è®¾ç½®é¡µå…è®¸ç”¨æˆ·æ§åˆ¶ UModel Explorer çš„æ˜¾ç¤ºè¡Œä¸ºå’Œæ€§èƒ½å‚æ•°ã€‚è¿™äº›è®¾ç½®éƒ½æ˜¯ä¼šè¯çº§åˆ«çš„ï¼Œä¸ä¼šæŒä¹…åŒ–ä¿å­˜ï¼Œæ¯æ¬¡é‡æ–°æ‰“å¼€é¡µé¢æ—¶ä¼šæ¢å¤åˆ°é»˜è®¤å€¼ã€‚</p>
<p>æœ€é‡è¦çš„è®¾ç½®æ˜¯â€œå¼ºåˆ¶å…¨é‡æ˜¾ç¤ºâ€å¼€å…³ã€‚å½“ç”»å¸ƒä¸Šçš„èŠ‚ç‚¹æ•°é‡è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤ 50 ä¸ªï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨é¡µé¢åº•éƒ¨æ˜¾ç¤ºæç¤ºï¼Œå‘ŠçŸ¥ç”¨æˆ·å½“å‰åªå±•ç¤ºäº†éƒ¨åˆ†èŠ‚ç‚¹ã€‚è¿™æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘çš„è®¾è®¡ï¼Œå› ä¸ºå½“èŠ‚ç‚¹æ•°é‡å¾ˆå¤§æ—¶ï¼Œå…¨éƒ¨æ¸²æŸ“ä¼šå¯¼è‡´ä¸¥é‡çš„å¡é¡¿ï¼Œå½±å“ä½¿ç”¨ä½“éªŒã€‚å¦‚æœç”¨æˆ·ç¡®å®éœ€è¦æŸ¥çœ‹å…¨éƒ¨èŠ‚ç‚¹ï¼Œå¯ä»¥åœ¨è®¾ç½®é¡µæ‰“å¼€â€œå¼ºåˆ¶å…¨é‡æ˜¾ç¤ºâ€å¼€å…³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787edd8edf6c4d7ea4a664c04f26ad26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=Fs2ei5kQtgyMMl1EeZJfIXzXNWQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼ºåˆ¶æ˜¾ç¤ºå¤§é‡èŠ‚ç‚¹å¯èƒ½ä¼šå¸¦æ¥æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚æœ€ä½³å®è·µæ˜¯ï¼šå…ˆç”¨ç­›é€‰æ¡ä»¶ç¼©å°èŒƒå›´ï¼Œæ¯”å¦‚ä½¿ç”¨èšç„¦ç­›é€‰åªçœ‹æŸä¸ªå­å›¾ï¼Œç„¶åå†æ‰“å¼€å…¨é‡æ˜¾ç¤ºã€‚å®ŒæˆæŸ¥çœ‹åï¼ŒåŠæ—¶å…³é—­å…¨é‡æ˜¾ç¤ºå¼€å…³ï¼Œé¿å…å½±å“åç»­æ“ä½œã€‚</p>
<p>æœ€ä½³å®è·µï¼šå°†èŒƒå›´ç¼©å°åˆ°å›ºå®šèšç„¦ã€ç­›é€‰åï¼Œæ‰“å¼€å…¨é‡æ˜¾ç¤ºå¼€å…³ã€‚è§‚å¯Ÿè°ƒæ•´åï¼ŒåŠæ—¶å…³é—­å…¨é‡æ˜¾ç¤ºå¼€å…³ã€‚</p>
<p>èƒŒæ™¯æ ·å¼å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæœ€ä¼˜çš„æ˜¾ç¤ºï¼Œç”¨æˆ·æ ¹æ®å½“å‰çš„å…³æ³¨ç‚¹è°ƒæ•´ç•Œé¢ï¼Œè·å¾—æœ€ä½³çš„æŸ¥çœ‹ä½“éªŒã€‚</p>
<p>å®ä½“é“¾æ¥æ˜¾ç¤ºæ–¹å¼æ˜¯ä¸€ç§é’ˆå¯¹äº entity_set_link çš„æ˜¾ç¤ºæ¨¡å¼è°ƒæ•´ã€‚</p>
<p>çœŸå®è§†å›¾ï¼šentity_set_linkÂ ä½œä¸ºç‹¬ç«‹èŠ‚ç‚¹é“¾æ¥ç›¸å…³ data_setï¼Œentity_set ä¸ entity_set ä¹‹é—´çš„é“¾æ¥ç›´æ¥è¿çº¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1ed123998844c6595c60b70681ff890~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=R86mkYdFAKQ7w2efrVaOYyhYaRg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9af344318aff42d1b94648696de14964~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=rzJItuUO1YTm7Dn4Mb0d9gXKPnc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€»è¾‘è§†å›¾ï¼šentity_set_linkÂ ä½œä¸ºå®ä½“é“¾æ¥è¾¹ä¸ŠèŠ‚ç‚¹ï¼Œentity_set ä¸ entity_set_link ä¹‹é—´å­˜åœ¨è™šæ‹Ÿé€»è¾‘è¿æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1b3da6acd654dd1973bd88946318c6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=JwtsTK5G2G7TVbyoUQ0pLPPYb1w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-12">3.2 å³ä¾§è¯¦æƒ…é¢æ¿ï¼šè¡¨å•ç¼–è¾‘èƒ½åŠ›</h3>
<p>å³ä¾§è¯¦æƒ…é¢æ¿æ˜¯ç¼–è¾‘ UModel å…ƒç´ çš„æ ¸å¿ƒåŒºåŸŸã€‚å½“ç”¨æˆ·ç‚¹å‡»ç”»å¸ƒä¸Šçš„ä»»æ„èŠ‚ç‚¹æˆ–è¾¹æ—¶ï¼Œå³ä¾§é¢æ¿ä¼šè‡ªåŠ¨æ»‘å‡ºï¼Œå±•ç¤ºè¯¥å…ƒç´ çš„å®Œæ•´å±æ€§è¡¨å•ã€‚</p>
<p>UModel Explorer ä¸ºæ¯ç§ç±»å‹çš„å…ƒç´ éƒ½è®¾è®¡äº†ä¸“é—¨çš„è¡¨å• Schemaï¼Œè¿™äº› Schema ä¸ä»…åŒ…å«é€šç”¨çš„å…ƒæ•°æ®å­—æ®µï¼ˆåç§°ã€åŸŸã€æè¿°ç­‰ï¼‰ï¼Œè¿˜åŒ…å«è¯¥ç±»å‹ç‰¹æœ‰çš„é…ç½®é¡¹ã€‚ä¾‹å¦‚ï¼Œmetric_set çš„è¡¨å•ä¼šå±•ç¤ºæŒ‡æ ‡åˆ—è¡¨å’Œæ ‡ç­¾å®šä¹‰ï¼Œentity_set çš„è¡¨å•ä¼šå±•ç¤ºå®ä½“å­—æ®µå’Œç´¢å¼•é…ç½®ã€‚æ¯ä¸ªå­—æ®µçš„æ ‡é¢˜æ—éƒ½æœ‰æç¤ºå›¾æ ‡ï¼Œé¼ æ ‡æ‚¬åœå¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„å­—æ®µè¯´æ˜ï¼Œè¿™å¯¹äºç†è§£å¤æ‚çš„é…ç½®é¡¹éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<p>è¡¨å•ç¼–è¾‘æ”¯æŒå®æ—¶æ ¡éªŒã€‚å½“ç”¨æˆ·ä¿®æ”¹æŸä¸ªå­—æ®µæ—¶ï¼Œç³»ç»Ÿä¼šç«‹å³è¿›è¡Œæ ¼å¼å’Œé€»è¾‘æ ¡éªŒï¼Œå¦‚æœå‘ç°é”™è¯¯ï¼Œä¼šåœ¨è¡¨å•åº•éƒ¨ä»¥çº¢è‰²æ–‡å­—æç¤ºã€‚è¿™ç§å³æ—¶åé¦ˆè®©ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿå‘ç°é—®é¢˜ï¼Œè€Œä¸éœ€è¦ç­‰åˆ°æäº¤æ—¶æ‰å‘ç°é”™è¯¯ã€‚å®Œæˆä¿®æ”¹åï¼Œç‚¹å‡»â€œæäº¤â€æŒ‰é’®å³å¯ä¿å­˜ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„æäº¤åªæ˜¯ä¿å­˜åˆ°æœ¬åœ°çŠ¶æ€ï¼ŒçœŸæ­£çš„æŒä¹…åŒ–éœ€è¦é€šè¿‡å³ä¸Šè§’çš„â€œæäº¤â€åŠŸèƒ½å°†å˜æ›´æ‰¹é‡æäº¤åˆ° Workspaceã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59906398c6d44c19a38a936c54c595f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=S2JULVV%2BTnWz7CFoHWscnv89D1s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹äº CommonSchema å…ƒç´ ï¼Œè¡¨å•ä¼šæ˜¾ç¤ºä¸ºåªè¯»æ¨¡å¼ï¼Œç”¨æˆ·æ— æ³•ç›´æ¥ä¿®æ”¹ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŠ¤å…¬å…±æ¨¡å‹çš„ä¸€è‡´æ€§ã€‚å¦‚æœéœ€è¦ä¿®æ”¹ï¼Œåº”è¯¥åˆ›å»ºæœ¬åœ°çš„å‰¯æœ¬ã€‚</p>
<h4 data-id="heading-13">3.2.1 å¤æ‚åµŒå¥—è¡¨å•å±•ç¤º</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3be1d6391a5a470f86406c07f60d3b3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=O7XyKazqdKblamMOj00jCfIEZps%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é’ˆå¯¹å¤æ‚å¯¹è±¡ï¼ŒUModel Explorer æ”¯æŒåµŒå¥—è¡¨å•å±•ç¤ºå’Œåˆ†æ®µå¼è¡¨å•æ ¡éªŒã€‚</p>
<h4 data-id="heading-14">3.2.2 Json æ ¼å¼ç¼–è¾‘</h4>
<p>æ”¯æŒè¡¨å•è§†å›¾ä¸ Json æ ¼å¼ç¼–è¾‘åˆ‡æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3aae045d084472d9e5fd12e721088db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=A9%2FOH0ZEQlgEaEQXzhdhri12bew%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334929be4713415693ae7a5e99b3f66b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=WXc6ZSBg18cd5WnzM0xw5pViPMw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-15">3.3 è¿·ä½ å›¾ï¼šå¿«é€Ÿå¯¼èˆª</h3>
<p>å³ä¸‹è§’çš„è¿·ä½ å›¾æä¾›äº†æ•´ä¸ªç”»å¸ƒçš„ç¼©ç•¥è§†å›¾ã€‚å½“æ¨¡å‹å›¾å¾ˆå¤§æ—¶ï¼Œè¿·ä½ å›¾ç‰¹åˆ«æœ‰ç”¨ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»è¿·ä½ å›¾ä¸­çš„ä»»æ„ä½ç½®ï¼Œå¿«é€Ÿå°†ä¸»è§†å›¾ç§»åŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸã€‚è¿·ä½ å›¾ä¼šå®æ—¶åæ˜ ä¸»è§†å›¾çš„ä½ç½®ï¼Œä¸»è§†å›¾ç§»åŠ¨æ—¶ï¼Œè¿·ä½ å›¾ä¸­çš„è§†å£æŒ‡ç¤ºå™¨ä¹Ÿä¼šåŒæ­¥ç§»åŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6bbf8999b0d426ea57b231e482632c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=4wZp47uFBAH2uEcDpzC0KdOWZqg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-16">3.4 æ“ä½œå·¥å…·æ ï¼šæ ¸å¿ƒåŠŸèƒ½é›†åˆ</h3>
<p>ç•Œé¢å³ä¸Šè§’çš„æ“ä½œå·¥å…·æ é›†æˆäº†å‡ ä¸ªæœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚æœ€å·¦ä¾§æ˜¯æ“ä½œè¯´æ˜æŒ‰é’®ï¼Œç‚¹å‡»åå¯ä»¥æŸ¥çœ‹å¿«æ·é”®å’ŒåŸºæœ¬æ“ä½œæç¤ºã€‚</p>
<p>åˆ›å»ºèŠ‚ç‚¹æŒ‰é’®æ˜¯å¿«é€Ÿå»ºæ¨¡çš„å…¥å£ã€‚ç‚¹å‡»åä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè‹¥ç‚¹å‡»åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œåˆ™è®©ç”¨æˆ·é€‰æ‹©è¦åˆ›å»ºçš„èŠ‚ç‚¹ç±»å‹ï¼ˆentity_setã€metric_setã€log_set ç­‰ï¼‰ã€‚åˆ›å»ºå®Œæˆåï¼Œæ–°èŠ‚ç‚¹ä¼šè‡ªåŠ¨å‡ºç°åœ¨ç”»å¸ƒä¸­å¤®ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨èšç„¦å’Œé€‰ä¸­ï¼Œç”¨æˆ·å¯ä»¥ç«‹å³å¼€å§‹ç¼–è¾‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e837d3bbce8e4cbba3c442361a208144~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=es6v4nL9Poa%2BFZyf63wNS4ef2BI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‹¥ç‚¹å‡»æ‰¹é‡å¯¼å…¥ UModelï¼Œåˆ™æ”¯æŒ Yaml æˆ– Json çš„æ–‡ä»¶å¯¼å…¥ï¼Œéœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>æ”¯æŒä¸Šä¼ è§„èŒƒçš„ UModel æ–‡ä»¶ï¼ŒåŒ…å« JSON å’Œ YAML æ ¼å¼ã€‚</li>
<li>å¯æ‰¹é‡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ª UModel å¯¹è±¡ã€‚</li>
<li>å¿…é¡»åŒ…å«å®Œæ•´çš„ UModel idã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨éªŒè¯å¿…éœ€å­—æ®µã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bdfd10fdc5a4ee295192e3d40a25a0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=heaMHv7XkiB395Thnk%2FPPLYMAXo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¼å…¥å®Œæˆåï¼Œæ–°èŠ‚ç‚¹ä¼šè‡ªåŠ¨å‡ºç°åœ¨ç”»å¸ƒä¸­å¤®ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨èšç„¦å’Œé€‰ä¸­ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­ç¼–è¾‘åšè°ƒæ•´ã€‚</p>
<p>æ³¨æ„ï¼šå¯¼å…¥æˆ–åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œéƒ½éœ€è¦æœ€ç»ˆæäº¤ï¼ˆå³ä¸Šè§’çš„æäº¤æŒ‰é’®ï¼‰ï¼Œæ‰èƒ½æœ€ç»ˆåœ¨ Workspace ä¸­ç”Ÿæ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9c8a52aff614a8f81b714934293518c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=zrGFkOvt2o9v%2FFXYH3ceUcDUQ4E%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ·æ–°æŒ‰é’®ä¼šé‡æ–°ä»æœåŠ¡å™¨è·å–æœ€æ–°çš„ UModel æ•°æ®ï¼Œå¹¶ç”¨æ–°æ•°æ®æ›¿æ¢ç”»å¸ƒä¸Šå½“å‰çš„å†…å®¹ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨ç½‘ç»œç¯å¢ƒä¸ç¨³å®šæˆ–æ€€ç–‘æ•°æ®æœ‰æ›´æ–°æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ·æ–°ä¼šä¸¢å¤±æ‰€æœ‰æœªä¿å­˜çš„æœ¬åœ°ä¿®æ”¹ï¼Œæ‰€ä»¥åˆ·æ–°å‰è¦ç¡®ä¿å·²ç»é€šè¿‡æäº¤åŠŸèƒ½ä¿å­˜äº†é‡è¦æ›´æ”¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2777796b18664499a179e8b91181b1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=IlJC1oJpdss60EFZS%2F3gJtG8bvY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ†äº«åŠŸèƒ½å…è®¸ç”¨æˆ·å°†å½“å‰è§†å›¾çŠ¶æ€ï¼ˆåŒ…æ‹¬ç­›é€‰æ¡ä»¶ã€æ˜¾ç¤ºé…ç½®ã€è§†å›¾ä½ç½®ç­‰ï¼‰ç”Ÿæˆä¸ºä¸€ä¸ª URLï¼Œç”¨æˆ·å¯ä»¥å°†è¿™ä¸ª URL åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜ã€‚æ¥æ”¶è€…æ‰“å¼€é“¾æ¥åï¼Œä¼šçœ‹åˆ°ä¸ç”¨æˆ·å®Œå…¨ç›¸åŒçš„è§†å›¾çŠ¶æ€ï¼Œè¿™å¯¹äºåä½œå’Œé—®é¢˜æ²Ÿé€šéå¸¸æ–¹ä¾¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/757db6bb4265416e9aafeaf463cdf2e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=21gTsbzWeYnl%2BCI2uTzWUnHCbPA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ’¤é”€å’Œé‡åšåŠŸèƒ½æ”¯æŒå¯¹æ¯ä¸€æ­¥æ“ä½œè¿›è¡Œå›é€€ã€‚è¿™å¯¹äºå¤æ‚çš„å»ºæ¨¡è¿‡ç¨‹ç‰¹åˆ«æœ‰ç”¨ï¼Œå½“ç”¨æˆ·å‘ç°æŸæ¬¡æ“ä½œä¸å¯¹æ—¶ï¼Œå¯ä»¥ç«‹å³æ’¤é”€ã€‚ç³»ç»Ÿä¼šè®°å½•æ‰€æœ‰çš„æœ¬åœ°ä¿®æ”¹æ“ä½œï¼ˆåŒ…æ‹¬èŠ‚ç‚¹çš„åˆ›å»ºã€åˆ é™¤ã€å±æ€§çš„ä¿®æ”¹ã€è¾¹çš„è¿æ¥ç­‰ï¼‰ï¼Œç”¨æˆ·å¯ä»¥å¤šæ¬¡æ’¤é”€å’Œé‡åšã€‚</p>
<p>æœ€åçš„æäº¤åŠŸèƒ½æ˜¯å»ºæ¨¡æµç¨‹çš„å…³é”®ä¸€æ­¥ã€‚åœ¨ç”»å¸ƒä¸Šè¿›è¡Œçš„æ‰€æœ‰ç¼–è¾‘æ“ä½œï¼ˆåˆ›å»ºèŠ‚ç‚¹ã€ä¿®æ”¹å±æ€§ã€åˆ é™¤å…ƒç´ ç­‰ï¼‰éƒ½åªæ˜¯ä¿å­˜åœ¨æœ¬åœ°çŠ¶æ€ä¸­ï¼Œä¸ä¼šå½±å“ Workspace ä¸­çš„æ•°æ®ã€‚åªæœ‰é€šè¿‡æäº¤åŠŸèƒ½ï¼Œæ‰ä¼šå°†å˜æ›´æ­£å¼æŒä¹…åŒ–åˆ° Workspaceã€‚</p>
<p>ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œç³»ç»Ÿä¼šæ‰“å¼€æäº¤é¢„è§ˆå¯¹è¯æ¡†ã€‚è¿™ä¸ªå¯¹è¯æ¡†ä»¥ä¸‰ä¸ªæ ‡ç­¾é¡µåˆ†åˆ«å±•ç¤ºè¦åˆ é™¤ã€è¦æ–°å¢ã€è¦ä¿®æ”¹çš„å…ƒç´ ã€‚æ¯ç§æ“ä½œéƒ½ç”¨ä¸åŒé¢œè‰²æ ‡è¯†ï¼šåˆ é™¤ç”¨çº¢è‰²ï¼ˆDï¼‰ï¼Œæ–°å¢ç”¨ç»¿è‰²ï¼ˆAï¼‰ï¼Œä¿®æ”¹ç”¨é»„æ£•è‰²ï¼ˆMï¼‰ã€‚å¯¹äºä¿®æ”¹æ“ä½œï¼Œä¼šå±•ç¤ºè¯¦ç»†çš„ Diff è§†å›¾ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸ªå­—æ®µçš„å˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa17ee3d50ff412080c36ffaeadd2a67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=8MMgDPCAbS6GoyTpoFIVRvmavGE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æäº¤é¢„è§ˆç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æ¯ä¸ªæ ‡ç­¾é¡µå³ä¸Šè§’çš„å®šä½æŒ‰é’®ï¼Œå°†å¯¹åº”çš„å…ƒç´ åœ¨ç”»å¸ƒä¸Šè¿›è¡Œèšç„¦å®šä½ï¼Œè¿™æ ·å¯ä»¥å†æ¬¡ç¡®è®¤ä¿®æ”¹æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ‹…å¿ƒåœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­ï¼ŒWorkspace ä¸­çš„æ•°æ®è¢«å…¶ä»–ç”¨æˆ·ä¿®æ”¹ï¼Œå¯ä»¥ç‚¹å‡»â€œåŒæ­¥æœ€æ–°æ•°æ®â€æŒ‰é’®ï¼Œç³»ç»Ÿä¼šé‡æ–°è·å–æœ€æ–°æ•°æ®å¹¶æ›´æ–° Diff è§†å›¾ï¼Œè¿™æ ·ç”¨æˆ·å°±èƒ½çœ‹åˆ°æ˜¯å¦æœ‰æ–°çš„å†²çªã€‚</p>
<p>å¦‚æœæ‰€æœ‰å˜æ›´éƒ½ç¬¦åˆé¢„æœŸï¼Œç‚¹å‡»â€œæ‰§è¡Œå˜æ›´â€æŒ‰é’®ï¼Œç³»ç»Ÿä¼šå¼€å§‹æ‰¹é‡æäº¤ã€‚æäº¤ä¼šæŒ‰ç…§åˆ é™¤ã€æ·»åŠ ã€ä¿®æ”¹çš„é¡ºåºæ‰§è¡Œï¼Œåˆ é™¤æ“ä½œæ¯æ¬¡åªæäº¤ä¸€ä¸ªå…ƒç´ ï¼ˆæœ€ä¿å®ˆçš„ç­–ç•¥ï¼‰ï¼Œæ·»åŠ å’Œä¿®æ”¹æ“ä½œæ¯æ¬¡æ‰¹é‡æäº¤ 10 ä¸ªå…ƒç´ ã€‚å¦‚æœæŸä¸ªæ‰¹æ¬¡æ‰§è¡Œå¤±è´¥ï¼Œåç»­æ‰¹æ¬¡ä¼šåœæ­¢æ‰§è¡Œï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®æ­£é—®é¢˜åï¼Œé‡æ–°æäº¤å‰©ä½™çš„å˜æ›´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b06953be6a741c6a26df3a916a57fef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=bRBFgw0ucuHfdkSUiewILiwXlLA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æäº¤è¿‡ç¨‹ä¸­ï¼Œå·²ç»æˆåŠŸæäº¤çš„æ‰¹æ¬¡ä¼šä»é¢„è§ˆåˆ—è¡¨ä¸­ç§»é™¤ï¼Œå¤±è´¥çš„æ‰¹æ¬¡ä¼šä¿ç•™å¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å³ä½¿å…³é—­æäº¤å¯¹è¯æ¡†ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡æ“ä½œå·¥å…·æ å†æ¬¡æŸ¥çœ‹æäº¤çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯ï¼Œç›´åˆ°æ‰€æœ‰å˜æ›´éƒ½æˆåŠŸæäº¤å®Œæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff712ee709c42d7aa3f3a19b7edf30d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=n9X3TEu9a6KnC3EIbDc7TCCMebE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce46b8ccf6064a1bac41c92fc39c5a36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=Xff3J5ESu8sybbaN4ueBW7knhWc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-17">ç¼–è¾‘æ“ä½œè¯¦è§£</h2>
<h3 data-id="heading-18">4.1Â èŠ‚ç‚¹ä¸è¾¹çš„é€‰ä¸­</h3>
<p>åœ¨ç”»å¸ƒä¸Šï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é¼ æ ‡ç‚¹å‡»æ¥é€‰ä¸­èŠ‚ç‚¹æˆ–è¾¹ã€‚é€‰ä¸­çš„å…ƒç´ ä¼šæœ‰è§†è§‰é«˜äº®æ•ˆæœï¼ˆé€šå¸¸æ˜¯è¾¹æ¡†å˜ç²—æˆ–èƒŒæ™¯è‰²æ”¹å˜ï¼‰ï¼ŒåŒæ—¶å³ä¾§è¯¦æƒ…é¢æ¿ä¼šæ˜¾ç¤ºè¯¥å…ƒç´ çš„å±æ€§è¡¨å•ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»ç”»å¸ƒçš„ç©ºç™½åŒºåŸŸæ¥å–æ¶ˆé€‰ä¸­ã€‚</p>
<h3 data-id="heading-19">4.2Â é”®ç›˜å¿«æ·é”®</h3>
<p>UModel Explorer æ”¯æŒå¤šä¸ªé”®ç›˜å¿«æ·é”®ï¼Œç†Ÿç»ƒæŒæ¡å¯ä»¥æ˜¾è‘—æå‡æ“ä½œæ•ˆç‡ã€‚æœ€å¸¸ç”¨çš„æ˜¯Â DeleteÂ æˆ–Â BackspaceÂ é”®ï¼Œç”¨äºåˆ é™¤é€‰ä¸­çš„èŠ‚ç‚¹æˆ–è¾¹ã€‚åˆ é™¤æ“ä½œæ˜¯å³æ—¶ç”Ÿæ•ˆçš„ï¼Œä½†åŒæ ·æ”¯æŒæ’¤é”€ã€‚</p>
<h3 data-id="heading-20">4.3Â å¯è§†åŒ–è¿çº¿ï¼šç›´è§‚çš„å…³ç³»æ„å»º</h3>
<p>UModel Explorer æœ€æ ¸å¿ƒçš„åˆ›æ–°ä¹‹ä¸€ï¼Œæ˜¯æä¾›äº†å¯è§†åŒ–çš„è¿çº¿æ“ä½œï¼Œè®©ç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–åŠ¨é¼ æ ‡æ¥åˆ›å»ºèŠ‚ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ã€‚è¿™ç§äº¤äº’æ–¹å¼æ¯”ä¼ ç»Ÿçš„è¡¨å•å¡«å†™æ–¹å¼æ›´åŠ ç›´è§‚ï¼Œä¹Ÿæ›´ç¬¦åˆäººç±»å¯¹å…³ç³»å›¾çš„è®¤çŸ¥ä¹ æƒ¯ã€‚</p>
<p>è¿çº¿æ“ä½œéƒ½æ˜¯ä»èŠ‚ç‚¹çš„å³ä¾§æ“ä½œç›˜å¼€å§‹çš„ã€‚å½“ç”¨æˆ·å°†é¼ æ ‡ç§»åŠ¨åˆ°èŠ‚ç‚¹çš„å³ä¾§è¾¹ç¼˜æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªåœ†å½¢çš„æ“ä½œç›˜ï¼Œé¼ æ ‡å˜æˆåå­—çŠ¶ï¼Œè¡¨ç¤ºå¯ä»¥å¼€å§‹è¿çº¿ã€‚æŒ‰ä½é¼ æ ‡å·¦é”®ï¼Œç„¶åæ‹–åŠ¨åˆ°ç›®æ ‡èŠ‚ç‚¹çš„å·¦ä¾§ï¼Œæ¾å¼€é¼ æ ‡ï¼Œå³å¯åˆ›å»ºä¸€æ¡è¾¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e689346ef5da4ec2a6bb79eee831cdb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=Oo%2FPkO%2B3g45mC%2BdVY2Hn5WkHAzY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‹–åŠ¨è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°ä¸€æ¡ä¸´æ—¶çš„è¿çº¿è·Ÿéšé¼ æ ‡ç§»åŠ¨ï¼Œè¿™è®©ç”¨æˆ·èƒ½å¤Ÿæ¸…æ¥šåœ°çœ‹åˆ°è¦åˆ›å»ºçš„è¿æ¥å…³ç³»ã€‚å½“ç”¨æˆ·æ‹–åŠ¨åˆ°æŸä¸ªèŠ‚ç‚¹çš„å·¦ä¾§åŒºåŸŸæ—¶ï¼Œç›®æ ‡èŠ‚ç‚¹ä¼šæœ‰è§†è§‰æç¤ºï¼ˆæ¯”å¦‚è¾¹æ¡†é«˜äº®ï¼‰ï¼Œè¡¨ç¤ºå¯ä»¥è¿æ¥åˆ°è¯¥èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/096a8cae11a94b41ab1c884e483cd8dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=RE4C9FLnz%2F2Bd9NqXeQ4OPMCk20%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7c1caeb071943bda39ed863aa338aad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=GKZCIK2QGpn0BI143F05y1AWHqU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d5eb25b832044e1ac15a9e37d3967c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=aR9tEnvmooptaAB%2FVt8hriMOIcU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿çº¿åˆ›å»ºåï¼Œè¿æ¥å…³ç³»ä½¿ç”¨é»˜è®¤å€¼ï¼Œé€šå¸¸éœ€è¦è¿›ä¸€æ­¥ç¼–è¾‘æ‰èƒ½æ»¡è¶³å®é™…éœ€æ±‚ã€‚é»˜è®¤çš„è¿æ¥å¯èƒ½ç¼ºå°‘å…³é”®çš„å…³è”å­—æ®µé…ç½®ï¼Œæˆ–è€…å…³è”ç±»å‹ä¸æ­£ç¡®ã€‚æ‰€ä»¥å»ºè®®è¿çº¿åç«‹å³ç‚¹å‡»è¯¥è¾¹ï¼Œåœ¨å³ä¾§é¢æ¿ä¸­å®Œå–„é…ç½®ã€‚</p>
<h3 data-id="heading-21">4.4Â é«˜çº§è¿çº¿æ¨¡å¼</h3>
<p>é™¤äº†ç›´æ¥è¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç³»ç»Ÿè¿˜æä¾›äº†ä¸¤ç§é«˜çº§è¿çº¿æ¨¡å¼ï¼Œç”¨äºå¤„ç†æ›´å¤æ‚çš„åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bf9fa587893489397e69f2cd4dc2556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=nTzVIeTBs1ORmRLVbeVrWacWdh8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬¬ä¸€ç§æ˜¯æ‰¹é‡è¿æ¥æ¨¡å¼ã€‚å½“ç”¨æˆ·ä»ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹è¿çº¿ï¼Œä½†æ‹–åŠ¨åˆ°ç”»å¸ƒç©ºç™½åŒºåŸŸæ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªâ€œé€‰æ‹©æˆ–åˆ›å»ºé“¾æ¥å¯¹è±¡â€çš„è™šæ‹ŸèŠ‚ç‚¹å¯¹è¯æ¡†ã€‚åœ¨è¿™ä¸ªå¯¹è¯æ¡†ä¸­ï¼Œç”¨æˆ·å¯ä»¥æœç´¢å¹¶é€‰æ‹©å¤šä¸ªå·²æœ‰çš„èŠ‚ç‚¹ï¼Œä¸€æ¬¡æ€§åˆ›å»ºå¤šæ¡è¾¹ã€‚è¿™å¯¹äºéœ€è¦å°†ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥åˆ°å¤šä¸ªèŠ‚ç‚¹çš„æƒ…å†µç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª entity_set å¯èƒ½éœ€è¦åŒæ—¶è¿æ¥åˆ°å¤šä¸ª metric_setï¼Œä½¿ç”¨æ‰¹é‡è¿æ¥æ¨¡å¼å¯ä»¥ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰è¿æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd72e7bbb1143c49bb634dda6da2bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=yhP2%2FbeGf0LE%2FtVfVVIIrPC%2BvGE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f134f9ffaee41469cbb5893afac0ee6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=J9IXrLYzwaBimarN%2B2dW%2F6iw5eY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å·²é€‰ä¸­çš„å†…å®¹ä¼šåœ¨åº•éƒ¨æ˜¾ç¤ºã€‚è‹¥é€‰æ‹©å®Œæ¯•ï¼Œç‚¹å‡»ç¡®è®¤ã€‚æ­¤æ—¶ä¼šèšç„¦åˆ°åˆšåˆšé€‰æ‹©çš„å‡ æ¡æ–°å»ºè¾¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe2b8b95eceb4e6d8c6a35f5ce7e3710~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=MXieb9kjNXJJWLPJkcGaFhiv6fE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬¬äºŒç§æ˜¯åˆ›å»ºå¹¶è¿æ¥æ¨¡å¼ã€‚åŒæ ·æ˜¯åœ¨è™šæ‹ŸèŠ‚ç‚¹å¯¹è¯æ¡†ä¸­ï¼Œåˆ‡æ¢åˆ°â€œåˆ›å»ºæ–°èŠ‚ç‚¹â€æ ‡ç­¾é¡µã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©è¦åˆ›å»ºçš„èŠ‚ç‚¹ç±»å‹ï¼Œå¡«å†™åŸºæœ¬çš„åç§°å’ŒåŸŸä¿¡æ¯ï¼Œç„¶åç¡®è®¤ã€‚ç³»ç»Ÿä¼šåŒæ—¶åˆ›å»ºæ–°èŠ‚ç‚¹å’Œè¿æ¥è¾¹ï¼Œæ–°èŠ‚ç‚¹ä¼šè‡ªåŠ¨å‡ºç°åœ¨ç”»å¸ƒçš„åˆé€‚ä½ç½®ï¼Œå¹¶ä¸”å·²ç»è¿æ¥åˆ°æºèŠ‚ç‚¹ã€‚è¿™ç§æ¨¡å¼é€‚ç”¨äºè¾¹å»ºæ¨¡è¾¹å»ºç«‹å…³ç³»çš„å·¥ä½œæµï¼Œé¿å…äº†å…ˆåˆ›å»ºèŠ‚ç‚¹å†é€ä¸ªè¿æ¥çš„ç¹çè¿‡ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bd3deb75eac41a6a7551ccc1f0056ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=0RuGdANuiR5Z1JV3108k65zgMfc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee90226b18c04908aca6703d6fa94186~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=5F36iIUBe5lc1skGqMW0eX6vx70%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ— è®ºæ˜¯æ‰¹é‡è¿æ¥è¿˜æ˜¯åˆ›å»ºå¹¶è¿æ¥ï¼Œåˆ›å»ºå®Œæˆåéƒ½éœ€è¦ç‚¹å‡»å¯¹åº”çš„è¾¹è¿›è¡Œè¯¦ç»†é…ç½®ï¼Œæ‰èƒ½ç¡®ä¿å…³è”å…³ç³»èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚</p>
<h3 data-id="heading-22">4.5Â èŠ‚ç‚¹æ“ä½œèœå•</h3>
<p>æ¯ä¸ªèŠ‚ç‚¹åœ¨é¼ æ ‡æ‚¬åœæ—¶ï¼Œå·¦ä¸Šè§’éƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªæ“ä½œèœå•ã€‚è¿™ä¸ªèœå•æä¾›äº†è¯¥èŠ‚ç‚¹ç±»å‹ç‰¹æœ‰çš„å¿«æ·æ“ä½œã€‚æ‰€æœ‰èŠ‚ç‚¹éƒ½è‡³å°‘æœ‰ä¸€ä¸ªâ€œèšç„¦â€æ“ä½œï¼Œç‚¹å‡»åä¼šå°†è¯¥èŠ‚ç‚¹è®¾ä¸ºèšç„¦ç­›é€‰æ¡ä»¶ï¼Œç”»å¸ƒä¼šè‡ªåŠ¨è°ƒæ•´è§†å›¾ï¼Œåªæ˜¾ç¤ºè¯¥èŠ‚ç‚¹åŠå…¶ç›¸å…³çš„é‚»å±…èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb8afb8e352b40c3bbe13a2dda38dafa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=IqCVzbg8Xnw4%2FG8K3RnHXD4FuBo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸åŒç±»å‹çš„èŠ‚ç‚¹è¿˜æœ‰å„è‡ªçš„ç‰¹æœ‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œentity_set èŠ‚ç‚¹å¯èƒ½æœ‰â€œæŸ¥è¯¢å®ä½“åˆ—è¡¨â€ã€â€œå¿«é€ŸæŸ¥è¯¢â€ç­‰æ“ä½œï¼Œmetric_set èŠ‚ç‚¹æœ‰â€œåˆ†æâ€æ“ä½œï¼Œlog_set èŠ‚ç‚¹æœ‰â€œè·³è½¬æ—¥å¿—æŸ¥è¯¢â€æ“ä½œç­‰ã€‚è¿™äº›æ“ä½œå°†å»ºæ¨¡å’Œåˆ†æåŠŸèƒ½æ— ç¼é›†æˆï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨å»ºæ¨¡çš„åŒæ—¶ç›´æ¥æŸ¥çœ‹å’Œåˆ†ææ•°æ®ã€‚</p>
<h3 data-id="heading-23">4.6Â èŠ‚ç‚¹çº§è”æ“ä½œ</h3>
<p>èŠ‚ç‚¹çš„æ“ä½œèœå•ä¸­è¿˜åŒ…å«ä¸€äº›çº§è”æ“ä½œé€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹å…è®¸ç”¨æˆ·å¯¹èŠ‚ç‚¹åŠå…¶ç›¸å…³çš„è¾¹è¿›è¡Œæ‰¹é‡æ“ä½œã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹åŠå…¶æ‰€æœ‰å‡ºè¾¹å’Œå…¥è¾¹ï¼Œæˆ–è€…åªåˆ é™¤å‡ºè¾¹è€Œä¿ç•™å…¥è¾¹ã€‚è¿™äº›æ“ä½œåœ¨é‡æ„æ¨¡å‹æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥é¿å…æ‰‹åŠ¨é€ä¸ªåˆ é™¤è¾¹çš„ç¹çè¿‡ç¨‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dea3fa8b74944bf29ade8552f9dce16f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=ZjnNnYFCh050OrVjAJsGTgMuF0M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-24">ç‰¹åŒ–æ“ä½œï¼šèŠ‚ç‚¹ç±»å‹çš„é«˜çº§èƒ½åŠ›</h2>
<p>ä¸åŒç±»å‹çš„ UModel èŠ‚ç‚¹é™¤äº†åŸºæœ¬çš„å»ºæ¨¡åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†å„è‡ªç‰¹æœ‰çš„é«˜çº§èƒ½åŠ›ã€‚è¿™äº›èƒ½åŠ›å°†æ•°æ®æŸ¥è¯¢ã€åˆ†æç­‰åŠŸèƒ½ç›´æ¥é›†æˆåˆ°å»ºæ¨¡ç¯å¢ƒä¸­ï¼Œå®ç°äº†â€œå»ºæ¨¡å³ä½¿ç”¨â€çš„ç†å¿µã€‚</p>
<h3 data-id="heading-25">5.1Â entity_setï¼šå®ä½“æŸ¥è¯¢ä¸æ¢ç´¢</h3>
<p>entity_set èŠ‚ç‚¹ä»£è¡¨å®ä½“æ•°æ®çš„é›†åˆï¼Œæ¯”å¦‚æœåŠ¡å®ä¾‹ã€å®¹å™¨ã€ä¸»æœºç­‰ã€‚åœ¨ UModel Explorer ä¸­ï¼Œentity_set èŠ‚ç‚¹æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒçš„ç‰¹åŒ–æ“ä½œï¼šå¿«é€ŸæŸ¥è¯¢å’Œå®ä½“åˆ—è¡¨æŸ¥è¯¢ã€‚</p>
<p>å¿«é€ŸæŸ¥è¯¢ï¼ˆUsearchï¼‰åŠŸèƒ½è®©ç”¨æˆ·èƒ½å¤Ÿç›´æ¥åœ¨ç”»å¸ƒä¸ŠæŸ¥è¯¢ entity_set ä¸­åŒ…å«çš„å®ä½“æ•°æ®ã€‚ç‚¹å‡»æ“ä½œèœå•ä¸­çš„â€œå¿«é€ŸæŸ¥è¯¢â€ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªæŸ¥è¯¢é¢æ¿ã€‚åœ¨è¿™ä¸ªé¢æ¿ä¸­ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æŸ¥è¯¢æ¡ä»¶ï¼ˆåŸºäºå®ä½“çš„å­—æ®µï¼‰ï¼Œç³»ç»Ÿä¼šå®æ—¶è¿”å›åŒ¹é…çš„å®ä½“åˆ—è¡¨ã€‚æŸ¥è¯¢ç»“æœæ”¯æŒè¿›ä¸€æ­¥ç­›é€‰å’Œæ’åºï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„å®ä½“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8c7c08c4fa4096953d70c2b5498c28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=EA9YskXlAofHbCGXa40iS41xaCw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4f6533e0d654f84883441ecde8fc2ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=3Uekl8NpKMNGmh3NAWcNvxxyaug%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ä½“åˆ—è¡¨æŸ¥è¯¢åŠŸèƒ½åˆ™ä¼šè·³è½¬åˆ°ä¸“é—¨çš„å®ä½“ç®¡ç†é¡µé¢ï¼Œæä¾›æ›´å®Œæ•´çš„å®ä½“æ•°æ®ç®¡ç†å’Œåˆ†æèƒ½åŠ›ã€‚è¿™ä¸ªé¡µé¢é€šå¸¸åŒ…å«è¡¨æ ¼è§†å›¾ã€è¯¦æƒ…è§†å›¾ã€å…³è”å…³ç³»è§†å›¾ç­‰å¤šç§å±•ç¤ºæ–¹å¼ï¼Œæ”¯æŒå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶å’Œæ‰¹é‡æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b7b7fabb9b64a43937b91a09e482982~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=VAkpb0W8M4UZ7tmYRJ9KPfXrSTc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a9da74f6ed14e5385a57225af865b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=VuKTBn7XOStesjRdxVl6REAL3XM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸¤ç§æŸ¥è¯¢æ–¹å¼å„æœ‰ä¼˜åŠ¿ã€‚å¿«é€ŸæŸ¥è¯¢é€‚åˆå¿«é€ŸéªŒè¯å’Œæ¢ç´¢ï¼Œå®ä½“åˆ—è¡¨æŸ¥è¯¢é€‚åˆæ·±å…¥çš„æŸ¥è¯¢å’Œåˆ†æã€‚ç”¨æˆ·æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹å¼å³å¯ã€‚</p>
<h3 data-id="heading-26">5.2Â metric_setï¼šæ™ºèƒ½æŒ‡æ ‡åˆ†æ</h3>
<p>metric_set èŠ‚ç‚¹ä»£è¡¨æŒ‡æ ‡æ•°æ®çš„é›†åˆï¼Œæ˜¯ UModel Explorer ä¸­æœ€å…·åˆ†æèƒ½åŠ›çš„èŠ‚ç‚¹ç±»å‹ã€‚ç‚¹å‡» metric_set èŠ‚ç‚¹çš„â€œåˆ†æâ€æŒ‰é’®ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªå¤§å‹çš„åˆ†æé¢æ¿ï¼Œé›†æˆå®Œæ•´çš„ metric_set Explorer æ™ºèƒ½åˆ†æåŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49392c509caa4399b418c1c85f44d496~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=XLM9yz7FEjLqpqMxY6yiNBMnFrY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ†æé¢æ¿å æ®å±å¹• 90% çš„å®½åº¦ï¼Œæä¾›äº†å……è¶³çš„ç©ºé—´æ¥å±•ç¤ºå›¾è¡¨å’Œåˆ†æç»“æœã€‚é¢æ¿é¡¶éƒ¨é›†æˆäº†æ—¶é—´é€‰æ‹©å™¨ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è¦åˆ†æçš„æ—¶é—´èŒƒå›´ã€‚é¢æ¿å†…éƒ¨åŒ…å«äº†æŒ‡æ ‡æ¦‚è§ˆã€ä¸‹é’»åˆ†æã€æ™ºèƒ½åˆ†ç»„ã€æ™ºèƒ½ä¸‹é’»ç­‰å¤šä¸ªåˆ†ææ ‡ç­¾é¡µã€‚</p>
<p>åœ¨æŒ‡æ ‡æ¦‚è§ˆæ¨¡å¼ä¸‹ï¼Œmetric_set ä¸­å®šä¹‰çš„æ‰€æœ‰æŒ‡æ ‡éƒ½ä¼šä»¥å¡ç‰‡å½¢å¼å±•ç¤ºï¼Œæ¯ä¸ªå¡ç‰‡åŒ…å«æ—¶åºæ›²çº¿é¢„è§ˆã€‚ç³»ç»Ÿæ”¯æŒä¸¤ç§è§†å›¾ï¼šæ™®é€šè§†å›¾æŒ‰ç…§é»„é‡‘æŒ‡æ ‡å’ŒåŸºç¡€æŒ‡æ ‡åˆ†ç±»å±•ç¤ºï¼Œå¼‚å¸¸è§†å›¾åˆ™è¿è¡Œå¼‚å¸¸æ£€æµ‹ç®—æ³•ï¼ŒæŒ‰ç…§å¼‚å¸¸è¯„åˆ†æ’åºï¼Œå°†æœ€æœ‰é—®é¢˜çš„æŒ‡æ ‡ä¼˜å…ˆå±•ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80707f69f7334e95984e9931c0c6c6cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=8azrVya7pDg83HwtHQ3xEBleeuw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸‹é’»åˆ†æåŠŸèƒ½å…è®¸ç”¨æˆ·ä»æ•´ä½“åˆ°å±€éƒ¨é€å±‚æ·±å…¥ã€‚é€‰æ‹©ä¸€ä¸ªç»´åº¦ï¼ˆæ¯”å¦‚æœåŠ¡åã€åœ°åŸŸã€å®ä¾‹ ID ç­‰ï¼‰ï¼Œç³»ç»Ÿä¼šæŒ‰è¯¥ç»´åº¦åˆ†ç»„å±•ç¤ºæŒ‡æ ‡æ›²çº¿ã€‚ç”¨æˆ·å¯ä»¥ç»§ç»­é€‰æ‹©ä¸‹ä¸€å±‚ç»´åº¦ï¼Œå½¢æˆå¤šçº§ä¸‹é’»çš„åˆ†æè·¯å¾„ã€‚ç³»ç»Ÿè¿˜æ”¯æŒ ALL æ¨¡å¼ä¸‹é’»ï¼Œè‡ªåŠ¨åˆ†ææ‰€æœ‰ç»´åº¦ï¼Œæ‰¾å‡ºæ•°æ®åˆ†å¸ƒå·®å¼‚æœ€å¤§çš„ç»´åº¦ï¼Œè¿™å¯¹äºä¸ç¡®å®šä»å“ªä¸ªè§’åº¦åˆ†ææ—¶ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baf5e667a7794d318970cdafb1707fe2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=2ibmr%2F5i%2Bt9%2FMeRnfmGqKAsPSYI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ™ºèƒ½åˆ†ç»„åŠŸèƒ½åŸºäºæ—¶åºèšç±»ç®—æ³•ï¼Œå°†æ‰€æœ‰æ—¶é—´åºåˆ—æŒ‰ç…§å½¢æ€ç›¸ä¼¼åº¦è¿›è¡Œèšç±»ã€‚è¿™è®©ç”¨æˆ·èƒ½å¤Ÿå‘ç°æ•°æ®ä¸­çš„æ¨¡å¼æˆ–ç¾¤ç»„ï¼Œæ¯”å¦‚é«˜è´Ÿè½½ã€ä¸­è´Ÿè½½ã€ä½è´Ÿè½½ä¸‰ç±»å®ä¾‹ï¼Œä¾¿äºè¿›è¡Œå®¹é‡è§„åˆ’æˆ–èµ„æºä¼˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ef1c0540d8544e5852be21d2b676333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=7RT6H33vPA%2BEYzV4cuKy5a8VfSI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ™ºèƒ½ä¸‹é’»æ˜¯æœ€å…·æŠ€æœ¯å«é‡çš„åŠŸèƒ½ã€‚ç”¨æˆ·å…ˆåœ¨æ—¶é—´è½´ä¸Šæ¡†é€‰ä¸€ä¸ªå¼‚å¸¸æ—¶é—´æ®µï¼Œç³»ç»Ÿä¼šè¿è¡Œæ ¹å› å®šä½ç®—æ³•ï¼Œè‡ªåŠ¨åˆ†ææ‰€æœ‰ç»´åº¦ç»„åˆï¼Œæ‰¾å‡ºå¯¹å¼‚å¸¸è´¡çŒ®æœ€å¤§çš„ç»´åº¦å–å€¼ã€‚ç»“æœä¼šæŒ‰ç½®ä¿¡åº¦æ’åºå±•ç¤ºï¼Œæ¯ä¸ªç»“æœåŒ…å«æ ¹å› æ¨¡å¼ã€ç½®ä¿¡åº¦ã€å½±å“æ›²çº¿å’Œå¯¹æ¯”åŸºçº¿ã€‚è¿™ä¸ªåŠŸèƒ½å°†åŸæœ¬éœ€è¦äººå·¥å°è¯•åå‡ ç§ç»´åº¦ç»„åˆçš„å·¥ä½œï¼Œç¼©çŸ­åˆ°å‡ ç§’é’Ÿå°±èƒ½å®Œæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b92b8994a51b4d85b2cd364556bff25a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765354301&amp;x-signature=xK5jaodOzORNj1dzqLgAwnJOLmg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤äº†æ ¸å¿ƒåˆ†æåŠŸèƒ½ï¼Œmetric_set åˆ†æè¿˜æ”¯æŒå¤šæŒ‡æ ‡å¯¹æ¯”ã€æ—¶é—´å¯¹æ¯”ï¼ˆç¯æ¯”åˆ†æï¼‰ã€å‡†æ˜Ÿè”åŠ¨ã€æŸ¥è¯¢è¯­å¥æŸ¥çœ‹ç­‰é«˜çº§åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½çš„è®¾è®¡éƒ½å›´ç»•ä¸€ä¸ªæ ¸å¿ƒç›®æ ‡ï¼šè®©æŒ‡æ ‡åˆ†æä»â€œäººå·¥æ’æŸ¥â€è½¬å˜ä¸ºâ€œç®—æ³•é©±åŠ¨â€ï¼Œå¤§å¹…æå‡é—®é¢˜å®šä½çš„æ•ˆç‡ã€‚</p>
<p>å…³äº metric_set åˆ†æçš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒä¸“é—¨çš„ metric_set explorer ä½¿ç”¨æ–‡æ¡£ã€‚è¿™é‡Œåªæ˜¯ç®€è¦è¯´æ˜å…¶åœ¨ UModel Explorer ä¸­çš„å…¥å£å’ŒåŸºæœ¬èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-27">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨ä½¿ç”¨ UModel Explorer è¿›è¡Œå»ºæ¨¡æ—¶ï¼Œæœ‰ä¸€äº›æœ€ä½³å®è·µå€¼å¾—éµå¾ªã€‚</p>
<p>é¦–å…ˆï¼Œå»ºè®®å…ˆç”¨ç­›é€‰åŠŸèƒ½ç¼©å°èŒƒå›´ï¼Œåªå…³æ³¨å½“å‰éœ€è¦ç¼–è¾‘çš„éƒ¨åˆ†ã€‚è¿™ä¸ä»…èƒ½æå‡æ€§èƒ½ï¼Œä¹Ÿèƒ½å‡å°‘è§†è§‰å¹²æ‰°ï¼Œè®©ç”¨æˆ·æ›´ä¸“æ³¨äºå½“å‰ä»»åŠ¡ã€‚</p>
<p>å…¶æ¬¡ï¼Œåˆç†ä½¿ç”¨èšç„¦ç­›é€‰ã€‚å½“ç”¨æˆ·éœ€è¦æŸ¥çœ‹æŸä¸ªèŠ‚ç‚¹çš„å±€éƒ¨è§†å›¾æ—¶ï¼Œä½¿ç”¨èšç„¦ç­›é€‰æ¯”å…¨å±€ç­›é€‰æ›´é«˜æ•ˆã€‚èšç„¦ç­›é€‰ä¼šè‡ªåŠ¨åŒ…å«ç›¸å…³çš„é‚»å±…èŠ‚ç‚¹ï¼Œå½¢æˆå®Œæ•´çš„å­å›¾ï¼Œè¿™å¯¹äºç†è§£å±€éƒ¨çš„å…³è”å…³ç³»ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œå®šæœŸæäº¤å˜æ›´ã€‚è™½ç„¶ç³»ç»Ÿæ”¯æŒæ’¤é”€é‡åšï¼Œä½†è¿™äº›æ“ä½œåªåœ¨å½“å‰ä¼šè¯ä¸­æœ‰æ•ˆã€‚å¦‚æœç”¨æˆ·è¿›è¡Œäº†å¤§é‡ä¿®æ”¹ï¼Œå»ºè®®åˆ†é˜¶æ®µæäº¤ï¼Œé¿å…å› ä¸ºæµè§ˆå™¨å´©æºƒæˆ–å…¶ä»–æ„å¤–å¯¼è‡´å·¥ä½œä¸¢å¤±ã€‚æäº¤å‰ä¸€å®šè¦ä»”ç»†æŸ¥çœ‹ Diff é¢„è§ˆï¼Œç¡®ä¿ä¿®æ”¹ç¬¦åˆé¢„æœŸã€‚</p>
<p>ç¬¬å››ï¼Œæ³¨æ„ CommonSchema ä¸æœ¬åœ°å®šä¹‰çš„åŒºåˆ†ã€‚CommonSchema æ˜¯ç³»ç»Ÿæä¾›çš„æ ‡å‡†å®šä¹‰ï¼Œä¸åº”è¯¥ç›´æ¥ä¿®æ”¹ã€‚å¦‚æœç¡®å®éœ€è¦è‡ªå®šä¹‰ï¼Œåº”è¯¥åˆ›å»ºæœ¬åœ°çš„ UModel å…ƒç´ ã€‚å½“å‘ç°å†²çªæ—¶ï¼Œè¦åŠæ—¶å¤„ç†ï¼Œé¿å…å½±å“åç»­ä½¿ç”¨ã€‚</p>
<p>ç¬¬äº”ï¼Œåˆç†ä½¿ç”¨æ‰¹é‡æ“ä½œã€‚æ— è®ºæ˜¯æ‰¹é‡åˆ›å»ºè¿æ¥ã€æ‰¹é‡åˆ é™¤å…ƒç´ ï¼Œè¿˜æ˜¯æ‰¹é‡æäº¤å˜æ›´ï¼Œéƒ½è¦ç¡®è®¤å½±å“èŒƒå›´ã€‚ç‰¹åˆ«æ˜¯çº§è”åˆ é™¤æ“ä½œï¼Œè¦ç¡®ä¿ä¸ä¼šè¯¯åˆ é‡è¦çš„å…³è”å…³ç³»ã€‚</p>
<p>æœ€åï¼Œå–„ç”¨åˆ†äº«åŠŸèƒ½è¿›è¡Œåä½œã€‚å½“ç”¨æˆ·éœ€è¦ä¸å›¢é˜Ÿæˆå‘˜è®¨è®ºæŸä¸ªæ¨¡å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†äº«åŠŸèƒ½ç”Ÿæˆ URLï¼Œè¿™æ ·å¯¹æ–¹èƒ½å¤Ÿçœ‹åˆ°å®Œå…¨ç›¸åŒçš„è§†å›¾çŠ¶æ€ï¼Œæé«˜äº†æ²Ÿé€šæ•ˆç‡ã€‚</p>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>UModel Explorer é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼é‡æ–°å®šä¹‰äº†å¯è§‚æµ‹æ•°æ®å»ºæ¨¡çš„ä½“éªŒã€‚å®ƒå°†åŸæœ¬éœ€è¦ç¼–å†™é…ç½®æ–‡ä»¶æˆ–ä»£ç çš„å»ºæ¨¡è¿‡ç¨‹ï¼Œè½¬å˜ä¸ºç›´è§‚çš„å›¾å½¢æ“ä½œã€‚åŒæ—¶ï¼Œå®ƒè¿˜å°†æŸ¥è¯¢ã€åˆ†æç­‰åŠŸèƒ½æ— ç¼é›†æˆåˆ°å»ºæ¨¡ç¯å¢ƒä¸­ï¼Œå®ç°äº†ä»å»ºæ¨¡åˆ°ä½¿ç”¨çš„ä¸€ä½“åŒ–ä½“éªŒã€‚</p>
<p>å¯¹äºæ­£åœ¨æ„å»ºå¯è§‚æµ‹ç³»ç»Ÿçš„å›¢é˜Ÿï¼ŒUModel Explorer ä¸ä»…èƒ½æå‡å»ºæ¨¡æ•ˆç‡ï¼Œæ›´èƒ½å¸®åŠ©å›¢é˜Ÿæˆå‘˜æ›´å¥½åœ°ç†è§£å’Œåä½œã€‚éšç€ç³»ç»Ÿçš„ä¸æ–­å®Œå–„ï¼Œç›¸ä¿¡å®ƒä¼šæˆä¸ºäº‘åŸç”Ÿå¯è§‚æµ‹æ€§é¢†åŸŸçš„é‡è¦åŸºç¡€è®¾æ–½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šçº§ Vue 3 åŸºç¡€æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼šä»æ··ä¹±åˆ°ç»Ÿä¸€]]></title>    <link>https://juejin.cn/post/7579808521203859490</link>    <guid>https://juejin.cn/post/7579808521203859490</guid>    <pubDate>2025-12-04T10:13:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579808521203859490" data-draft-id="7579805639434977332" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šçº§ Vue 3 åŸºç¡€æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼šä»æ··ä¹±åˆ°ç»Ÿä¸€"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-04T10:13:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹—å¼Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šçº§ Vue 3 åŸºç¡€æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼šä»æ··ä¹±åˆ°ç»Ÿä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹—å¼Ÿ
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:13:42.000Z" title="Thu Dec 04 2025 10:13:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ä½œè€…</strong>: ç‹—å¼Ÿ
<strong>å‘å¸ƒæ—¥æœŸ</strong>: 2025-12-04<br/>
<strong>æŠ€æœ¯æ ˆ</strong>: Vue 3 + TypeScript + Composition API + Element Plus<br/>
<strong>é˜…è¯»æ—¶é•¿</strong>: çº¦ 15 åˆ†é’Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ“Œ å¼•è¨€</h2>
<p>åœ¨å¤§å‹ä¼ä¸šåº”ç”¨ä¸­ï¼ŒåŸºç¡€æ•°æ®ï¼ˆå­—å…¸ã€æ¸¯å£ã€è´§å¸ã€å›½å®¶ç­‰ï¼‰çš„ç®¡ç†å¾€å¾€æ˜¯ä¸€ä¸ªè¢«å¿½è§†ä½†è‡³å…³é‡è¦çš„é¢†åŸŸã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„åŸºç¡€æ•°æ®æ–¹æ¡ˆå¯ä»¥ï¼š</p>
<ul>
<li>ğŸš€ <strong>å‡å°‘ 70% ä»¥ä¸Šçš„é‡å¤ä»£ç </strong></li>
<li>âš¡ <strong>é™ä½ API è¯·æ±‚æ¬¡æ•° 80%+</strong></li>
<li>ğŸ¯ <strong>æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¯ç»´æŠ¤æ€§</strong></li>
<li>ğŸŒ <strong>æ— ç¼æ”¯æŒå›½é™…åŒ–åˆ‡æ¢</strong></li>
</ul>
<p>æœ¬æ–‡å°†åˆ†äº«æˆ‘ä»¬åœ¨èˆªè¿ç‰©æµç³»ç»Ÿä¸­è®¾è®¡å’Œå®ç°çš„<strong>ç»Ÿä¸€åŸºç¡€æ•°æ®ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œæ¶µç›–æ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥å’Œæœ€ä½³å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ¤” é—®é¢˜èƒŒæ™¯ï¼šé‡è›®ç”Ÿé•¿çš„ç—›ç‚¹</h2>
<h3 data-id="heading-2">æœ€åˆçš„æ··ä¹±</h3>
<p>åœ¨é¡¹ç›®åˆæœŸï¼Œæ¯ä¸ªå¼€å‘è€…æŒ‰è‡ªå·±çš„æ–¹å¼è·å–å’Œä½¿ç”¨åŸºç¡€æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ğŸ”´ é—®é¢˜ä»£ç ç¤ºä¾‹ï¼šæ¯ä¸ªç»„ä»¶å„è‡ªä¸ºæ”¿</span>

<span class="hljs-comment">// ç»„ä»¶ Aï¼šç›´æ¥è°ƒç”¨ API</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getDictList</span>(<span class="hljs-string">'ORDER_STATUS'</span>)
<span class="hljs-keyword">const</span> statusList = res.<span class="hljs-property">data</span>

<span class="hljs-comment">// ç»„ä»¶ Bï¼šä½¿ç”¨ hooks ä½†æ²¡æœ‰ç¼“å­˜</span>
<span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useAllDict</span>(<span class="hljs-string">'ORDER_STATUS'</span>) <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½è¯·æ±‚ API</span>

<span class="hljs-comment">// ç»„ä»¶ Cï¼šåœ¨ Vuex ä¸­å­˜å‚¨</span>
store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'loadDictData'</span>, <span class="hljs-string">'ORDER_STATUS'</span>)
<span class="hljs-keyword">const</span> statusList = store.<span class="hljs-property">state</span>.<span class="hljs-property">dict</span>.<span class="hljs-property">ORDER_STATUS</span>

<span class="hljs-comment">// ç»„ä»¶ Dï¼šç¡¬ç¼–ç </span>
<span class="hljs-keyword">const</span> statusList = [
  { <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'å¾…å¤„ç†'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'å·²å®Œæˆ'</span> },
  <span class="hljs-comment">// ...</span>
]
</code></pre>
<h3 data-id="heading-3">è¿™å¯¼è‡´äº†ä¸¥é‡çš„é—®é¢˜</h3>





























<table><thead><tr><th>é—®é¢˜</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>API è¯·æ±‚çˆ†ç‚¸</strong></td><td>åŒä¸€ä¸ªå­—å…¸åœ¨ 10 ä¸ªç»„ä»¶ä¸­è¢«è¯·æ±‚ 10 æ¬¡</td></tr><tr><td><strong>æ•°æ®ä¸ä¸€è‡´</strong></td><td>ç¡¬ç¼–ç çš„æ•°æ®ä¸åç«¯ä¸åŒæ­¥</td></tr><tr><td><strong>å›½é™…åŒ–å›°éš¾</strong></td><td>ä¸­è‹±æ–‡åˆ‡æ¢éœ€è¦æ‰‹åŠ¨å¤„ç†æ¯ä¸ªåœ°æ–¹</td></tr><tr><td><strong>ä»£ç é‡å¤</strong></td><td>æ ¼å¼åŒ–ã€æŸ¥æ‰¾ label çš„é€»è¾‘åˆ°å¤„éƒ½æ˜¯</td></tr><tr><td><strong>ç±»å‹ç¼ºå¤±</strong></td><td>æ²¡æœ‰ TypeScript ç±»å‹ï¼ŒIDE æ— æ³•æç¤º</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ğŸ—ï¸ æ¶æ„è®¾è®¡ï¼šç»Ÿä¸€æ•°æ®æº</h2>
<h3 data-id="heading-5">æ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<p>æˆ‘ä»¬é‡‡ç”¨<strong>å•ä¸€æ•°æ®æº + å·¥å‚æ¨¡å¼</strong>çš„æ¶æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡ç»„ä»¶å±‚                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ ä¸‹æ‹‰æ¡†   â”‚   â”‚ è¡¨æ ¼åˆ—   â”‚   â”‚ æ ‡ç­¾     â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚
â”‚        â”‚             â”‚             â”‚                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                      â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              <span class="hljs-title class_">Composables</span> ç»Ÿä¸€å…¥å£                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  <span class="hljs-keyword">import</span> { useDictType, usePorts } <span class="hljs-keyword">from</span>          â”‚   â”‚
â”‚   â”‚         <span class="hljs-string">'~/composables/basicData'</span>               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ¨¡å—å†…éƒ¨æ¶æ„                          â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  hooks   â”‚  â”‚ adapters â”‚  â”‚  cache   â”‚            â”‚
â”‚   â”‚ ä¸šåŠ¡å°è£…  â”‚  â”‚ æ•°æ®é€‚é…  â”‚  â”‚ ç¼“å­˜ç®¡ç†  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â”‚
â”‚        â”‚             â”‚             â”‚                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                      â”‚                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚              â”‚     <span class="hljs-variable constant_">API</span>       â”‚                          â”‚
â”‚              â”‚  ç»Ÿä¸€æ•°æ®è·å–   â”‚                          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-6">ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">src/composables/basicData/
â”œâ”€â”€ index.ts          <span class="hljs-comment"># ç»Ÿä¸€å¯¼å‡ºå…¥å£</span>
â”œâ”€â”€ hooks.ts          <span class="hljs-comment"># ä¸šåŠ¡æ•°æ® Hooksï¼ˆæ¸¯å£ã€èˆ¹èˆ¶ã€èˆªçº¿ç­‰ï¼‰</span>
â”œâ”€â”€ useDict.ts        <span class="hljs-comment"># å­—å…¸æ•°æ® Hooks</span>
â”œâ”€â”€ cache.ts          <span class="hljs-comment"># ç¼“å­˜ç®¡ç†ï¼ˆTTLã€æ¸…ç†ç­–ç•¥ï¼‰</span>
â”œâ”€â”€ adapters.ts       <span class="hljs-comment"># æ•°æ®é€‚é…å™¨ï¼ˆAPI â†’ æ ‡å‡†æ ¼å¼ï¼‰</span>
â”œâ”€â”€ api/              <span class="hljs-comment"># API å°è£…</span>
â”‚   â””â”€â”€ index.ts
â””â”€â”€ types/            <span class="hljs-comment"># TypeScript ç±»å‹å®šä¹‰</span>
    â””â”€â”€ index.ts
</code></pre>
<hr/>
<h2 data-id="heading-7">ğŸ’¡ æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-8">1. å·¥å‚å‡½æ•°ï¼šç»Ÿä¸€çš„ Hook åˆ›å»ºæ¨¡å¼</h3>
<p>ä¸åŒç±»å‹çš„åŸºç¡€æ•°æ®ï¼ˆæ¸¯å£ã€èˆ¹èˆ¶ã€è´§å¸ç­‰ï¼‰æœ‰ç›¸åŒçš„ä½¿ç”¨æ¨¡å¼ï¼Œæˆ‘ä»¬ç”¨å·¥å‚å‡½æ•°æ¶ˆé™¤é‡å¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åˆ›å»ºåŸºç¡€æ•°æ® Hook çš„å·¥å‚å‡½æ•°
 * æ‰€æœ‰åŸºç¡€æ•°æ® Hook å…±äº«ç›¸åŒçš„æ¥å£å’Œè¡Œä¸º
 */</span>
<span class="hljs-keyword">function</span> createBaseDataHook&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseDataItem</span>, R&gt;(
  <span class="hljs-attr">fetchFn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;R&gt;,
  <span class="hljs-attr">transformFn</span>: <span class="hljs-function">(<span class="hljs-params">response: R</span>) =&gt;</span> T[],
  <span class="hljs-attr">cacheConfig</span>: <span class="hljs-title class_">CacheConfig</span>,
): <span class="hljs-function">(<span class="hljs-params">params?: QueryParams</span>) =&gt;</span> <span class="hljs-title class_">BaseDataHookResult</span>&lt;T&gt; {
  
  <span class="hljs-keyword">return</span> (<span class="hljs-attr">params</span>: <span class="hljs-title class_">QueryParams</span> = {}): <span class="hljs-title class_">BaseDataHookResult</span>&lt;T&gt; =&gt; {
    <span class="hljs-keyword">const</span> { useEnglish = <span class="hljs-literal">false</span> } = params

    <span class="hljs-comment">// ä½¿ç”¨ç¼“å­˜ç³»ç»Ÿ</span>
    <span class="hljs-keyword">const</span> { data, loading, error, refresh, clearCache } = <span class="hljs-title function_">useBasicDataCache</span>(
      cacheConfig.<span class="hljs-property">key</span>,
      <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-title function_">transformFn</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchFn</span>()),
      { <span class="hljs-attr">ttl</span>: cacheConfig.<span class="hljs-property">ttl</span> },
    )

    <span class="hljs-comment">// æ ¹æ®å‚æ•°è¿‡æ»¤æ•°æ®</span>
    <span class="hljs-keyword">const</span> filteredData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">let</span> result = data.<span class="hljs-property">value</span> || []
      
      <span class="hljs-keyword">if</span> (params.<span class="hljs-property">keyword</span>) {
        result = <span class="hljs-title class_">BaseAdapter</span>.<span class="hljs-title function_">filterByKeyword</span>(result, params.<span class="hljs-property">keyword</span>)
      }
      <span class="hljs-keyword">if</span> (params.<span class="hljs-property">enabledOnly</span>) {
        result = <span class="hljs-title class_">BaseAdapter</span>.<span class="hljs-title function_">filterByEnabled</span>(result, <span class="hljs-literal">true</span>)
      }
      
      <span class="hljs-keyword">return</span> result
    })

    <span class="hljs-comment">// Element Plus æ ¼å¼çš„é€‰é¡¹</span>
    <span class="hljs-keyword">const</span> options = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> 
      <span class="hljs-title class_">BaseAdapter</span>.<span class="hljs-title function_">toOptions</span>(filteredData.<span class="hljs-property">value</span>, useEnglish)
    )

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">data</span>: filteredData,
      loading,
      error,
      options,
      <span class="hljs-attr">isEmpty</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> filteredData.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>),
      <span class="hljs-attr">isReady</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> !loading.<span class="hljs-property">value</span> &amp;&amp; !error.<span class="hljs-property">value</span>),
      refresh,
      <span class="hljs-attr">search</span>: <span class="hljs-function">(<span class="hljs-params">keyword</span>) =&gt;</span> <span class="hljs-title class_">BaseAdapter</span>.<span class="hljs-title function_">filterByKeyword</span>(data.<span class="hljs-property">value</span>, keyword),
      <span class="hljs-attr">getByCode</span>: <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> data.<span class="hljs-property">value</span>?.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">code</span> === code),
      clearCache,
    }
  }
}

<span class="hljs-comment">// ä¸€è¡Œä»£ç åˆ›å»ºæ–°çš„åŸºç¡€æ•°æ® Hook</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> usePorts = <span class="hljs-title function_">createBaseDataHook</span>(
  queryPortList,
  <span class="hljs-title class_">PortAdapter</span>.<span class="hljs-property">transform</span>,
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'PORTS'</span>, <span class="hljs-attr">ttl</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useVessels = <span class="hljs-title function_">createBaseDataHook</span>(
  queryVesselList,
  <span class="hljs-title class_">VesselAdapter</span>.<span class="hljs-property">transform</span>,
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'VESSELS'</span>, <span class="hljs-attr">ttl</span>: <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> }
)
</code></pre>
<h3 data-id="heading-9">2. å­—å…¸æ•°æ®ï¼šä¸“ä¸º UI ç»„ä»¶ä¼˜åŒ–</h3>
<p>å­—å…¸æ•°æ®æ˜¯æœ€å¸¸ç”¨çš„åŸºç¡€æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬ä¸ºå…¶è®¾è®¡äº†ä¸“é—¨çš„ APIï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * ç‰¹å®šå­—å…¸ç±»å‹çš„ç»„åˆå¼å‡½æ•°
 * æä¾›å¼€ç®±å³ç”¨çš„ä¸‹æ‹‰é€‰é¡¹å’Œ label æŸ¥è¯¢
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useDictType</span>(<span class="hljs-params">dictType: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> { locale } = <span class="hljs-title function_">useI18n</span>()
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: dictMap, loading, error, refresh } = <span class="hljs-title function_">useAllDictData</span>()

  <span class="hljs-comment">// å“åº”å¼çš„é€‰é¡¹åˆ—è¡¨ï¼Œè‡ªåŠ¨æ ¹æ®è¯­è¨€åˆ‡æ¢</span>
  <span class="hljs-keyword">const</span> options = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> items = dictMap.<span class="hljs-property">value</span>?.[dictType] || []
    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
      <span class="hljs-attr">label</span>: locale.<span class="hljs-property">value</span> === <span class="hljs-string">'en'</span> ? item.<span class="hljs-property">labelEn</span> : item.<span class="hljs-property">label</span>,
      <span class="hljs-attr">value</span>: item.<span class="hljs-property">value</span>,
    }))
  })

  <span class="hljs-comment">// æ ¹æ® code è·å– labelï¼Œæ”¯æŒå›½é™…åŒ–</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getLabel</span>(<span class="hljs-params">code: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">const</span> items = dictMap.<span class="hljs-property">value</span>?.[dictType] || []
    <span class="hljs-keyword">const</span> item = items.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">value</span> === code)
    <span class="hljs-keyword">if</span> (!item) <span class="hljs-keyword">return</span> code
    <span class="hljs-keyword">return</span> locale.<span class="hljs-property">value</span> === <span class="hljs-string">'en'</span> ? item.<span class="hljs-property">labelEn</span> : item.<span class="hljs-property">label</span>
  }

  <span class="hljs-keyword">return</span> {
    options,
    <span class="hljs-attr">items</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> dictMap.<span class="hljs-property">value</span>?.[dictType] || []),
    loading,
    error,
    getLabel,
    <span class="hljs-attr">getLabels</span>: <span class="hljs-function">(<span class="hljs-params">codes: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> codes.<span class="hljs-title function_">map</span>(getLabel),
    refresh,
  }
}
</code></pre>
<h3 data-id="heading-10">3. æ™ºèƒ½ç¼“å­˜ï¼šTTL + å…¨å±€å…±äº«</h3>
<p>ç¼“å­˜æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ï¼Œæˆ‘ä»¬å®ç°äº†å¸¦ TTL çš„å“åº”å¼ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * å¸¦ TTL çš„å“åº”å¼ç¼“å­˜ Hook
 * æ”¯æŒè¿‡æœŸè‡ªåŠ¨åˆ·æ–°ã€æ‰‹åŠ¨æ¸…é™¤
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useBasicDataCache&lt;T&gt;(
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">fetcher</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;,
  <span class="hljs-attr">options</span>: { <span class="hljs-attr">ttl</span>: <span class="hljs-built_in">number</span> }
) {
  <span class="hljs-comment">// ä½¿ç”¨ VueUse çš„ useStorageAsync å®ç°æŒä¹…åŒ–</span>
  <span class="hljs-keyword">const</span> cached = useStorageAsync&lt;<span class="hljs-title class_">CacheEntry</span>&lt;T&gt; | <span class="hljs-literal">null</span>&gt;(
    <span class="hljs-string">`basic-data:<span class="hljs-subst">${key}</span>`</span>,
    <span class="hljs-literal">null</span>,
    <span class="hljs-variable language_">localStorage</span>
  )

  <span class="hljs-keyword">const</span> data = ref&lt;T | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> error = ref&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ</span>
  <span class="hljs-keyword">const</span> isExpired = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!cached.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - cached.<span class="hljs-property">value</span>.<span class="hljs-property">timestamp</span> &gt; options.<span class="hljs-property">ttl</span>
  })

  <span class="hljs-comment">// åŠ è½½æ•°æ®ï¼ˆå¸¦å»é‡ï¼‰</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">loadingPromise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">load</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (loadingPromise) <span class="hljs-keyword">return</span> loadingPromise
    
    <span class="hljs-keyword">if</span> (!isExpired.<span class="hljs-property">value</span> &amp;&amp; cached.<span class="hljs-property">value</span>) {
      data.<span class="hljs-property">value</span> = cached.<span class="hljs-property">value</span>.<span class="hljs-property">data</span>
      <span class="hljs-keyword">return</span>
    }

    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
    loadingPromise = <span class="hljs-title function_">fetcher</span>()
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        data.<span class="hljs-property">value</span> = result
        cached.<span class="hljs-property">value</span> = { <span class="hljs-attr">data</span>: result, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() }
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        error.<span class="hljs-property">value</span> = err
        <span class="hljs-comment">// å¦‚æœæœ‰æ—§ç¼“å­˜ï¼Œé™çº§ä½¿ç”¨</span>
        <span class="hljs-keyword">if</span> (cached.<span class="hljs-property">value</span>) {
          data.<span class="hljs-property">value</span> = cached.<span class="hljs-property">value</span>.<span class="hljs-property">data</span>
        }
      })
      .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
        loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
        loadingPromise = <span class="hljs-literal">null</span>
      })

    <span class="hljs-keyword">return</span> loadingPromise
  }

  <span class="hljs-comment">// è‡ªåŠ¨åŠ è½½</span>
  <span class="hljs-title function_">load</span>()

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">data</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> data.<span class="hljs-property">value</span>),
    <span class="hljs-attr">loading</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> loading.<span class="hljs-property">value</span>),
    <span class="hljs-attr">error</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> error.<span class="hljs-property">value</span>),
    <span class="hljs-attr">refresh</span>: <span class="hljs-function">() =&gt;</span> {
      cached.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">load</span>()
    },
    <span class="hljs-attr">clearCache</span>: <span class="hljs-function">() =&gt;</span> {
      cached.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
      data.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
    }
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-11">ğŸ¯ ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-12">åœºæ™¯ 1ï¼šä¸‹æ‹‰é€‰æ‹©å™¨</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-select v-model="form.status" placeholder="è¯·é€‰æ‹©çŠ¶æ€"&gt;
    &lt;el-option
      v-for="item in statusOptions"
      :key="item.value"
      :label="item.label"
      :value="item.value"
    /&gt;
  &lt;/el-select&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { useDictType } from '~/composables/basicData'

const { options: statusOptions } = useDictType('ORDER_STATUS')
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13">åœºæ™¯ 2ï¼šè¡¨æ ¼åˆ—æ˜¾ç¤º label</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-table :data="tableData"&gt;
    &lt;el-table-column prop="code" label="ç¼–å·" /&gt;
    &lt;el-table-column label="çŠ¶æ€"&gt;
      &lt;template #default="{ row }"&gt;
        &lt;el-tag :type="getStatusColor(row.status)"&gt;
          {{ getStatusLabel(row.status) }}
        &lt;/el-tag&gt;
      &lt;/template&gt;
    &lt;/el-table-column&gt;
  &lt;/el-table&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { useDictType } from '~/composables/basicData'

const { getLabel: getStatusLabel, getColorType: getStatusColor } = 
  useDictType('ORDER_STATUS')
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">åœºæ™¯ 3ï¼šæ¸¯å£é€‰æ‹©ï¼ˆå¸¦æœç´¢ï¼‰</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-select
    v-model="selectedPort"
    filterable
    remote
    :remote-method="handleSearch"
    :loading="loading"
    placeholder="æœç´¢æ¸¯å£..."
  &gt;
    &lt;el-option
      v-for="port in portOptions"
      :key="port.value"
      :label="port.label"
      :value="port.value"
    /&gt;
  &lt;/el-select&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue'
import { usePorts } from '~/composables/basicData'

const keyword = ref('')
const searchParams = computed(() =&gt; ({
  keyword: keyword.value,
  enabledOnly: true
}))

const { options: portOptions, loading } = usePorts(searchParams)

function handleSearch(query: string) {
  keyword.value = query
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-15">åœºæ™¯ 4ï¼šè·å–å…³è”æ•°æ®</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { usePorts, useCountries } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/composables/basicData'</span>

<span class="hljs-keyword">const</span> { <span class="hljs-attr">getByCode</span>: getPort } = <span class="hljs-title function_">usePorts</span>()
<span class="hljs-keyword">const</span> { <span class="hljs-attr">getByCode</span>: getCountry } = <span class="hljs-title function_">useCountries</span>()

<span class="hljs-comment">// è·å–æ¸¯å£åŠå…¶æ‰€å±å›½å®¶ä¿¡æ¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getPortWithCountry</span>(<span class="hljs-params">portCode: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> port = <span class="hljs-title function_">getPort</span>(portCode)
  <span class="hljs-keyword">if</span> (!port) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">const</span> country = port.<span class="hljs-property">countryCode</span> ? <span class="hljs-title function_">getCountry</span>(port.<span class="hljs-property">countryCode</span>) : <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">return</span> {
    ...port,
    <span class="hljs-attr">countryName</span>: country?.<span class="hljs-property">nameCn</span> || <span class="hljs-string">''</span>,
    <span class="hljs-attr">countryNameEn</span>: country?.<span class="hljs-property">nameEn</span> || <span class="hljs-string">''</span>,
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-16">âš¡ æ€§èƒ½ä¼˜åŒ–æ•ˆæœ</h2>
<h3 data-id="heading-17">Before vs After</h3>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>å­—å…¸ API è¯·æ±‚æ¬¡æ•°/é¡µ</td><td>15-20 æ¬¡</td><td>1 æ¬¡</td><td><strong>95%â†“</strong></td></tr><tr><td>é¦–å±åŠ è½½æ—¶é—´</td><td>3.2s</td><td>1.8s</td><td><strong>44%â†“</strong></td></tr><tr><td>å†…å­˜å ç”¨ï¼ˆå­—å…¸æ•°æ®ï¼‰</td><td>åˆ†æ•£å­˜å‚¨</td><td>ç»Ÿä¸€ç¼“å­˜</td><td><strong>60%â†“</strong></td></tr><tr><td>ä»£ç è¡Œæ•°ï¼ˆåŸºç¡€æ•°æ®ç›¸å…³ï¼‰</td><td>~2000 è¡Œ</td><td>~500 è¡Œ</td><td><strong>75%â†“</strong></td></tr></tbody></table>
<h3 data-id="heading-18">ç¼“å­˜å‘½ä¸­ç‡</h3>
<pre><code class="hljs language-erlang" lang="erlang">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç¼“å­˜å‘½ä¸­æƒ…å†µ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å­—å…¸æ•°æ® â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ <span class="hljs-number">98</span><span class="hljs-comment">%       â”‚</span>
â”‚ æ¸¯å£æ•°æ® â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ <span class="hljs-number">92</span><span class="hljs-comment">%       â”‚</span>
â”‚ è´§å¸æ•°æ® â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ <span class="hljs-number">99</span><span class="hljs-comment">%       â”‚</span>
â”‚ å›½å®¶æ•°æ® â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ <span class="hljs-number">99</span><span class="hljs-comment">%       â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-19">ğŸ”§ æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-20">âœ… æ¨èåšæ³•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. ä½¿ç”¨è§£æ„è·å–éœ€è¦çš„æ–¹æ³•</span>
<span class="hljs-keyword">const</span> { options, getLabel, loading } = <span class="hljs-title function_">useDictType</span>(<span class="hljs-string">'STATUS'</span>)

<span class="hljs-comment">// 2. ä½¿ç”¨ computed ä¼ é€’åŠ¨æ€å‚æ•°</span>
<span class="hljs-keyword">const</span> params = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">keyword</span>: search.<span class="hljs-property">value</span> }))
<span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">usePorts</span>(params)

<span class="hljs-comment">// 3. å¤„ç†åŠ è½½çŠ¶æ€</span>
&lt;template v-<span class="hljs-keyword">if</span>=<span class="hljs-string">"loading"</span>&gt;åŠ è½½ä¸­...&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span>{{ getLabel(code) }}<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="hljs-comment">// 4. ç»Ÿä¸€ä»å…¥å£å¯¼å…¥</span>
<span class="hljs-keyword">import</span> { useDictType, usePorts } <span class="hljs-keyword">from</span> <span class="hljs-string">'~/composables/basicData'</span>
</code></pre>
<h3 data-id="heading-21">âŒ é¿å…åšæ³•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. ä¸è¦åœ¨å¾ªç¯ä¸­è°ƒç”¨ Hook</span>
<span class="hljs-comment">// âŒ é”™è¯¯</span>
tableData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> { getLabel } = <span class="hljs-title function_">useDictType</span>(<span class="hljs-string">'STATUS'</span>) <span class="hljs-comment">// æ¯æ¬¡å¾ªç¯éƒ½åˆ›å»ºæ–°å®ä¾‹</span>
  row.<span class="hljs-property">statusLabel</span> = <span class="hljs-title function_">getLabel</span>(row.<span class="hljs-property">status</span>)
})

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">const</span> { getLabel } = <span class="hljs-title function_">useDictType</span>(<span class="hljs-string">'STATUS'</span>)
tableData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
  row.<span class="hljs-property">statusLabel</span> = <span class="hljs-title function_">getLabel</span>(row.<span class="hljs-property">status</span>)
})

<span class="hljs-comment">// 2. ä¸è¦å¿½ç•¥åŠ è½½çŠ¶æ€</span>
<span class="hljs-comment">// âŒ é”™è¯¯</span>
<span class="hljs-keyword">const</span> label = <span class="hljs-title function_">getLabel</span>(code) <span class="hljs-comment">// æ•°æ®å¯èƒ½è¿˜æœªåŠ è½½</span>

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-keyword">const</span> label = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> loading.<span class="hljs-property">value</span> ? <span class="hljs-string">'åŠ è½½ä¸­'</span> : <span class="hljs-title function_">getLabel</span>(code))
</code></pre>
<hr/>
<h2 data-id="heading-22">ğŸ“¦ æ‰©å±•ï¼šæ·»åŠ æ–°çš„åŸºç¡€æ•°æ®ç±»å‹</h2>
<p>æ·»åŠ æ–°çš„åŸºç¡€æ•°æ®ç±»å‹éå¸¸ç®€å•ï¼Œåªéœ€ 3 æ­¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å®šä¹‰ API</span>
<span class="hljs-comment">// api/index.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">queryNewDataList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/new-data/list'</span>)
}

<span class="hljs-comment">// 2. å®šä¹‰é€‚é…å™¨</span>
<span class="hljs-comment">// adapters.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">NewDataAdapter</span> = {
  <span class="hljs-title function_">transform</span>(<span class="hljs-attr">response</span>: <span class="hljs-title class_">ApiResponse</span>): <span class="hljs-title class_">BaseDataItem</span>[] {
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
      <span class="hljs-attr">code</span>: item.<span class="hljs-property">id</span>,
      <span class="hljs-attr">nameCn</span>: item.<span class="hljs-property">name</span>,
      <span class="hljs-attr">nameEn</span>: item.<span class="hljs-property">nameEn</span>,
      <span class="hljs-attr">enabled</span>: item.<span class="hljs-property">status</span> === <span class="hljs-number">1</span>,
    }))
  }
}

<span class="hljs-comment">// 3. åˆ›å»º Hook</span>
<span class="hljs-comment">// hooks.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useNewData = <span class="hljs-title function_">createBaseDataHook</span>(
  queryNewDataList,
  <span class="hljs-title class_">NewDataAdapter</span>.<span class="hljs-property">transform</span>,
  { <span class="hljs-attr">key</span>: <span class="hljs-string">'NEW_DATA'</span>, <span class="hljs-attr">ttl</span>: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> }
)

<span class="hljs-comment">// 4. å¯¼å‡º</span>
<span class="hljs-comment">// index.ts</span>
<span class="hljs-keyword">export</span> { useNewData } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks'</span>
</code></pre>
<hr/>
<h2 data-id="heading-23">ğŸ“ æ€»ç»“</h2>
<p>é€šè¿‡è¿™å¥—åŸºç¡€æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€å…¥å£</strong> - æ‰€æœ‰åŸºç¡€æ•°æ®ä» <code>~/composables/basicData</code> å¯¼å…¥</li>
<li><strong>è‡ªåŠ¨ç¼“å­˜</strong> - TTL æœºåˆ¶ + å…¨å±€å…±äº«ï¼Œé¿å…é‡å¤è¯·æ±‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰</li>
<li><strong>å›½é™…åŒ–</strong> - è‡ªåŠ¨æ ¹æ®è¯­è¨€ç¯å¢ƒåˆ‡æ¢ä¸­è‹±æ–‡</li>
<li><strong>å¼€ç®±å³ç”¨</strong> - Element Plus æ ¼å¼çš„é€‰é¡¹ï¼Œç›´æ¥ç”¨äºç»„ä»¶</li>
<li><strong>æ˜“äºæ‰©å±•</strong> - å·¥å‚æ¨¡å¼ï¼Œæ·»åŠ æ–°ç±»å‹åªéœ€å‡ è¡Œä»£ç </li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå·²åœ¨æˆ‘ä»¬çš„èˆªè¿ç‰©æµç³»ç»Ÿä¸­ç¨³å®šè¿è¡Œï¼Œæ”¯æ’‘ç€æ—¥å‡æ•°ä¸‡æ¬¡çš„åŸºç¡€æ•°æ®æŸ¥è¯¢ï¼Œå¸Œæœ›èƒ½ç»™æ­£åœ¨å¤„ç†ç±»ä¼¼é—®é¢˜çš„å›¢é˜Ÿä¸€äº›å¯å‘ã€‚</p>
<hr/>
<h2 data-id="heading-24">ğŸ“š ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Freusability%2Fcomposables.html" target="_blank" title="https://vuejs.org/guide/reusability/composables.html" ref="nofollow noopener noreferrer">Vue 3 Composition API å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvueuse.org%2F" target="_blank" title="https://vueuse.org/" ref="nofollow noopener noreferrer">VueUse - Vue Composition Utilities</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2F" target="_blank" title="https://element-plus.org/" ref="nofollow noopener noreferrer">Element Plus</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¬ æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµæ”¶è—~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šJavaScript ä¸­ this çš„åº•å±‚ç»‘å®šæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7579813945600671784</link>    <guid>https://juejin.cn/post/7579813945600671784</guid>    <pubDate>2025-12-04T10:29:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579813945600671784" data-draft-id="7579641251910189066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šJavaScript ä¸­ this çš„åº•å±‚ç»‘å®šæœºåˆ¶"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-04T10:29:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šJavaScript ä¸­ this çš„åº•å±‚ç»‘å®šæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:29:17.000Z" title="Thu Dec 04 2025 10:29:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£ JavaScript ä¸­çš„ <code>this</code>ï¼šè®¾è®¡åˆè¡·ã€ç»‘å®šè§„åˆ™ä¸å¸¸è§é™·é˜±</h2>
<p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªæ—¢åŸºç¡€åˆå®¹æ˜“è®©äººå›°æƒ‘çš„æ¦‚å¿µã€‚å®ƒçœ‹ä¼¼ç®€å•ï¼Œå´å› ç»‘å®šè§„åˆ™ä¾èµ–äº<strong>å‡½æ•°è°ƒç”¨æ–¹å¼</strong>è€Œé<strong>å£°æ˜ä½ç½®</strong>ï¼Œå¸¸å¸¸å¯¼è‡´æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚æœ¬æ–‡å°†ä» <code>this</code> çš„æœ¬è´¨å‡ºå‘ï¼Œç»“åˆè¯­è¨€è®¾è®¡èƒŒæ™¯ã€æ‰§è¡Œæœºåˆ¶ä»¥åŠå®é™…ä»£ç ç¤ºä¾‹ï¼Œç³»ç»Ÿæ€§åœ°æ¢³ç† <code>this</code> çš„è¡Œä¸ºè§„å¾‹ï¼Œå¹¶ä¸ºåç»­è®¨è®ºâ€œç»‘å®šä¸¢å¤±â€é—®é¢˜é¢„ç•™ç©ºé—´ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä»è‡ªç”±å˜é‡è¯´èµ·ï¼šä¸ºä»€ä¹ˆéœ€è¦Â <code>this</code>ï¼Ÿ</h3>
<p>åœ¨æ·±å…¥ <code>this</code> ä¹‹å‰ï¼Œä¸å¦¨å…ˆå›é¡¾ä¸€ä¸ªæ›´åŸºç¡€çš„æ¦‚å¿µï¼š<strong>è‡ªç”±å˜é‡ï¼ˆfree variableï¼‰</strong> ã€‚</p>
<p>è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> name = <span class="hljs-string">"å…¨å±€"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ä½ å¥½ï¼Œ"</span> + name);
}

<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œå…¨å±€</span>
</code></pre>
<p>å‡½æ•° <code>greet</code> å†…éƒ¨ä½¿ç”¨äº†å˜é‡ <code>name</code>ï¼Œä½†å®ƒå¹¶æœªåœ¨å‡½æ•°å†…éƒ¨å£°æ˜ã€‚è¿™ä¸ª <code>name</code> å°±æ˜¯ä¸€ä¸ª<strong>è‡ªç”±å˜é‡</strong>ã€‚JavaScript å¼•æ“ä¼šæ²¿ç€<strong>è¯æ³•ä½œç”¨åŸŸé“¾ï¼ˆLexical Scope Chainï¼‰</strong> å‘å¤–æŸ¥æ‰¾ï¼Œæœ€ç»ˆåœ¨å…¨å±€ä½œç”¨åŸŸä¸­æ‰¾åˆ° <code>name</code> çš„å®šä¹‰ã€‚</p>
<p>è¿™ç§æœºåˆ¶æ˜¯<strong>é™æ€çš„</strong>â€”â€”å˜é‡çš„æŸ¥æ‰¾è·¯å¾„åœ¨ä»£ç ä¹¦å†™æ—¶å°±å·²ç¡®å®šï¼Œä¸å‡½æ•°å¦‚ä½•è¢«è°ƒç”¨æ— å…³ã€‚è¿™ä¹Ÿæ˜¯ JavaScript ä¸­ç»å¤§å¤šæ•°å˜é‡è®¿é—®çš„è¡Œä¸ºæ¨¡å¼ã€‚</p>
<p>ç„¶è€Œï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹å¸¦æ¥äº†ä¸€ä¸ªæ–°éœ€æ±‚ï¼š<strong>åŒä¸€ä¸ªå‡½æ•°å¯èƒ½å±äºå¤šä¸ªå¯¹è±¡ï¼Œå¸Œæœ›åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°çŸ¥é“â€œå½“å‰æ˜¯å“ªä¸ªå¯¹è±¡åœ¨è°ƒç”¨æˆ‘â€</strong> ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> person1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-attr">sayHi</span>: greet };
<span class="hljs-keyword">var</span> person2 = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span>,   <span class="hljs-attr">sayHi</span>: greet };

person1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// æœŸæœ›è¾“å‡ºï¼šä½ å¥½ï¼ŒAlice</span>
person2.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// æœŸæœ›è¾“å‡ºï¼šä½ å¥½ï¼ŒBob</span>
</code></pre>
<p>å¦‚æœ <code>greet</code> ä¾ç„¶ä¾èµ–è¯æ³•ä½œç”¨åŸŸä¸­çš„ <code>name</code>ï¼Œå®ƒæ°¸è¿œåªèƒ½è®¿é—®åˆ°å…¨å±€çš„ <code>"å…¨å±€"</code>ï¼Œè€Œæ— æ³•æ„ŸçŸ¥è°ƒç”¨è€…æ˜¯è°ã€‚<strong>è¯æ³•ä½œç”¨åŸŸåœ¨æ­¤å¤±æ•ˆäº†</strong>ã€‚</p>
<p>äºæ˜¯ï¼ŒJavaScript å¼•å…¥äº† <code>this</code> â€”â€” ä¸€ä¸ª<strong>ä¸ä¾èµ–è¯æ³•ä½œç”¨åŸŸã€è€Œç”±è°ƒç”¨æ–¹å¼å†³å®š</strong>çš„ç‰¹æ®Šå…³é”®å­—ã€‚å®ƒè®©å‡½æ•°èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–â€œè°ƒç”¨ä¸Šä¸‹æ–‡â€ï¼Œä»è€Œå®ç°å¯¹æ‰€å±å¯¹è±¡çš„è‡ªå¼•ç”¨ã€‚</p>
<blockquote>
<p>æ¢å¥è¯è¯´ï¼š<strong>è‡ªç”±å˜é‡é â€œå†™åœ¨å“ªâ€å†³å®šå€¼ï¼Œ<code>this</code> é â€œæ€ä¹ˆè°ƒâ€å†³å®šå€¼</strong>ã€‚</p>
</blockquote>
<p>æ­£æ˜¯è¿™ç§è®¾è®¡ï¼Œä½¿å¾— <code>this</code> æˆä¸ºäº† JavaScript æ‰§è¡Œæ¨¡å‹ä¸­ä¸€ä¸ªç‹¬ç‰¹è€Œå…³é”®çš„å­˜åœ¨â€”â€”å®ƒæ‰“ç ´äº†é™æ€ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå¼•å…¥äº†åŠ¨æ€ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ï¼Œä½†ä¹Ÿå› æ­¤å¸¦æ¥äº†ç†è§£ä¸Šçš„æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-2">ã€<code>this</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ª<strong>è¿è¡Œæ—¶ç»‘å®šçš„ä¸Šä¸‹æ–‡å¯¹è±¡å¼•ç”¨</strong>ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå…¶å€¼åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åŠ¨æ€ç¡®å®šï¼Œ<strong>å–å†³äºå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„</strong>ï¼Œè€Œä¸æ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ã€‚</p>
<p>è¿™ä¸ JavaScript ä¸­å…¶ä»–å˜é‡ï¼ˆå¦‚è‡ªç”±å˜é‡ï¼‰çš„æŸ¥æ‰¾æœºåˆ¶æˆªç„¶ä¸åŒâ€”â€”åè€…éµå¾ª<strong>è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰</strong> ï¼Œç”±å‡½æ•°å£°æ˜çš„ä½ç½®å†³å®šï¼›è€Œ <code>this</code> åˆ™å®Œå…¨ç”±<strong>è°ƒç”¨æ–¹å¼</strong>å†³å®šï¼Œå±äº<strong>åŠ¨æ€ä½œç”¨åŸŸ</strong>çš„ä¸€ç§ä½“ç°ã€‚</p>
<hr/>
<h3 data-id="heading-3">ã€<code>this</code> çš„è®¾è®¡åˆè¡·</h3>
<p>JavaScript æœ€åˆè¢«è®¾è®¡ä¸ºä¸€ç§è½»é‡çº§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­æ“ä½œ DOMã€‚ä¸ºäº†æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼Œå³ä½¿åœ¨æ²¡æœ‰ <code>class</code> çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œä¹Ÿéœ€è¦ä¸€ç§æœºåˆ¶è®©å‡½æ•°èƒ½å¤Ÿè®¿é—®æ‰€å±å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>äºæ˜¯ï¼Œ<code>this</code> è¢«å¼•å…¥ï¼š<strong>å½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code> è‡ªåŠ¨æŒ‡å‘è¯¥å¯¹è±¡</strong>ã€‚è¿™æ ·ï¼Œå¼€å‘è€…å°±å¯ä»¥åœ¨æ–¹æ³•å†…éƒ¨é€šè¿‡ <code>this.xxx</code> è®¿é—®å¯¹è±¡è‡ªèº«çš„æ•°æ®ã€‚</p>
<p>ç„¶è€Œï¼Œç”±äº JavaScript å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆfirst-class citizensï¼‰ï¼Œå¯ä»¥è¢«èµ‹å€¼ã€ä¼ é€’ã€ç‹¬ç«‹è°ƒç”¨ï¼Œè¿™å°±å¯¼è‡´åŒä¸€ä¸ªå‡½æ•°åœ¨ä¸åŒè°ƒç”¨åœºæ™¯ä¸‹ <code>this</code> æŒ‡å‘å¯èƒ½å®Œå…¨ä¸åŒâ€”â€”è¿™ç§çµæ´»æ€§ä¹Ÿå¸¦æ¥äº†å¤æ‚æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-4">ã€<code>var</code> ä¸ <code>let</code> å£°æ˜å¯¹å…¨å±€å¯¹è±¡çš„å½±å“</h3>
<p>è¿™ä¸€ç‚¹ä¸ <code>this</code> çš„é»˜è®¤ç»‘å®šå¯†åˆ‡ç›¸å…³ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>var</code> åœ¨å…¨å±€ä½œç”¨åŸŸå£°æ˜çš„å˜é‡ï¼Œä¼š<strong>è‡ªåŠ¨æŒ‚è½½åˆ°å…¨å±€å¯¹è±¡</strong>ä¸Šï¼ˆå¦‚ <code>window.myVar = ...</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>let</code> æˆ– <code>const</code> å£°æ˜çš„å˜é‡åˆ™<strong>ä¸ä¼šæŒ‚è½½åˆ°å…¨å±€å¯¹è±¡</strong>ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> b = <span class="hljs-number">2</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">a</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">b</span>); <span class="hljs-comment">// undefined</span>
</code></pre>
<p>å› æ­¤ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè‹¥ <code>this</code> æŒ‡å‘ <code>window</code>ï¼Œé€šè¿‡ <code>this.a</code> å¯ä»¥è®¿é—®åˆ° <code>var a</code>ï¼Œä½†æ— æ³•è®¿é—® <code>let b</code>ã€‚è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨æŸäº›ä»£ç ä¸­ <code>this.xxx</code> èƒ½â€œç¥å¥‡åœ°â€è®¿é—®åˆ°å…¨å±€å˜é‡â€”â€”å…¶å®æ˜¯è®¿é—®äº†æŒ‚è½½åœ¨ <code>window</code> ä¸Šçš„å±æ€§ã€‚</p>
<blockquote>
<p>ä½¿ç”¨varå£°æ˜æŒ‚è½½å˜é‡åˆ°windowå¯¹è±¡ä¸Šå¹¶ä¸æ˜¯ä¸€ä»¶å¥½çš„äº‹æƒ…ï¼Œä»–ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒ</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ã€JavaScript æ‰§è¡Œæœºåˆ¶ä¸ <code>this</code> çš„â€œä¾‹å¤–æ€§â€</h3>
<p>JavaScript å¼•æ“åœ¨æ‰§è¡Œä»£ç å‰ä¼šç»å†<strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼ˆåŒ…æ‹¬è¯æ³•åˆ†æã€ä½œç”¨åŸŸæ„å»ºç­‰ï¼‰ã€‚å˜é‡å’Œå‡½æ•°çš„<strong>ä½œç”¨åŸŸé“¾</strong>åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç¡®å®šï¼Œè¿™å°±æ˜¯<strong>è¯æ³•ä½œç”¨åŸŸ</strong>çš„åŸºç¡€ã€‚</p>
<p>ç„¶è€Œï¼Œ<code>this</code> æ˜¯ä¸€ä¸ª<strong>ä¾‹å¤–</strong>ï¼šå®ƒçš„å€¼<strong>æ— æ³•åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®š</strong>ï¼Œå¿…é¡»ç­‰åˆ°<strong>è¿è¡Œæ—¶</strong>æ ¹æ®<strong>è°ƒç”¨æ ˆå’Œè°ƒç”¨æ–¹å¼</strong>åŠ¨æ€è®¡ç®—ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>å³ä½¿ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„å‡½æ•°ä½“ï¼Œåªè¦è°ƒç”¨æ–¹å¼ä¸åŒï¼Œ<code>this</code> å°±å¯èƒ½æŒ‡å‘å®Œå…¨ä¸åŒçš„å¯¹è±¡ã€‚</li>
<li><code>this</code> ä¸ä½œç”¨åŸŸé“¾æ— å…³ï¼Œå®ƒå±äº<strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</strong> çš„ä¸€éƒ¨åˆ†ï¼Œè€Œéè¯æ³•ç¯å¢ƒã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5bc18deabbc4db6b43c38a1eb81441c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448957&amp;x-signature=ON6f6eWH%2BJOD1nRErIAZgVMfE7Y%3D" alt="2e1b50313261ecf6e1348b4e76311bff.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">ã€<code>this</code> æŒ‡å‘çš„å‡ ç§å…¸å‹æƒ…å†µ</h3>
<p>æ ¹æ®è°ƒç”¨æ–¹å¼ï¼Œ<code>this</code> çš„ç»‘å®šå¯åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<h4 data-id="heading-7">1. ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> myObj = {
    <span class="hljs-attr">name</span>:<span class="hljs-string">"æå®¢æ—¶é—´"</span>,
    <span class="hljs-attr">showThis</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<span class="hljs-comment">//this-&gt;myObj</span>
    }
}
    myObj.<span class="hljs-title function_">showThis</span>();
</code></pre>
<p><strong>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå®ƒæŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡</strong></p>
<h4 data-id="heading-8">2. ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">print</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼ï¼šwindowï¼›ä¸¥æ ¼æ¨¡å¼ï¼šundefined</span>
}
<span class="hljs-title function_">print</span>();
</code></pre>
<p><strong>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒæŒ‡å‘å…¨å±€å¯¹è±¡window(éä¸¥æ ¼æ¨¡å¼)/undefined(ä¸¥æ ¼æ¨¡å¼)</strong></p>
<h4 data-id="heading-9">3. æ„é€ å‡½æ•°è°ƒç”¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateObj</span>(<span class="hljs-params"/>){
            <span class="hljs-comment">// var tempObj = {};</span>
            <span class="hljs-comment">//CreateObj.call(tempObj);</span>
            <span class="hljs-comment">//tempObj.__proto__ = CreateObj.prototype;</span>
            <span class="hljs-comment">//return tempObj;</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=<span class="hljs-string">"æå®¢æ—¶é—´"</span>;

        }
        <span class="hljs-keyword">var</span> myObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateObj</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myObj);
</code></pre>
<p><strong>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒæŒ‡å‘å½“å‰çš„æ„é€ å‡½æ•°çš„å®ä¾‹åŒ–å¯¹è±¡</strong></p>
<h4 data-id="heading-10">4. ä½¿ç”¨ <code>call</code> / <code>apply</code>  ç»‘å®šthis</h4>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">let</span> bar ={
            <span class="hljs-attr">myName</span>:<span class="hljs-string">"æå®¢é‚¦"</span>,
            <span class="hljs-attr">test</span>:<span class="hljs-number">1</span>
        }
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>=<span class="hljs-string">"æå®¢æ—¶é—´"</span>;
        }
        <span class="hljs-comment">// æ¥å—æŒ‡å®šthisä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿è¡Œ</span>
        foo.<span class="hljs-title function_">call</span>(bar);<span class="hljs-comment">// this è¢«æŒ‡å®šä¸ºbar </span>
        <span class="hljs-comment">// å’Œcall ä¸€æ ·</span>
        foo.<span class="hljs-title function_">apply</span>(bar);<span class="hljs-comment">// this è¢«æŒ‡å®šä¸ºbar </span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar);
</code></pre>
<p><strong>callå’Œapplyéƒ½èƒ½å¤Ÿæ”¹å˜thisçš„æŒ‡å‘ï¼Œä»–ä»¬æ¥å—æŒ‡å®šthisä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘çš„ç†è§£ï¼šä½ å¯ä»¥è®¤ä¸ºæŒ‡å®šä¸€ä¸ªå¯¹è±¡æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™æ®µä»£ç ä¸­äºŒè€…ä¼¼ä¹æ˜¯ç­‰ä»·çš„ï¼Œä½†å®é™…ä¸ŠäºŒè€…åœ¨å‚æ•°ä¸Šæœ‰å·®å¼‚ï¼Œåœ¨è¿™é‡Œå°±ä¸æ·±å…¥è®¨è®º</strong></p>
<h4 data-id="heading-11">5. äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„ <code>this</code></h4>
<p>åœ¨ DOM äº‹ä»¶ç›‘å¬å™¨ä¸­ï¼Œ<code>this</code> é»˜è®¤æŒ‡å‘<strong>è§¦å‘äº‹ä»¶çš„å…ƒç´ </strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;a href=<span class="hljs-string">"#"</span> id=<span class="hljs-string">"link"</span>&gt;ç‚¹å‡»æˆ‘&lt;/a&gt;
    &lt;script&gt;
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"link"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
        })
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9018fc07e7754e30a4302bca4cdd026e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765448957&amp;x-signature=PtIEZ7GywgcImdZMbKcJSvJJTTw%3D" alt="image.png" loading="lazy"/>
<strong>è§¦å‘äº‹ä»¶åï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒthisæŒ‡å‘çš„æ˜¯å½“å‰è§¦å‘æ”¹äº‹ä»¶çš„DOMå…ƒç´ </strong></p>
<hr/>
<h3 data-id="heading-12">ã€thisçš„ç»‘å®šè§„åˆ™</h3>
<h4 data-id="heading-13">é»˜è®¤ç»‘å®š</h4>
<blockquote>
<p><strong>ä¸€èˆ¬å­˜åœ¨äºæœ€å¸¸ç”¨çš„å‡½æ•°è°ƒç”¨ç±»å‹;ç‹¬ç«‹å‡½æ•°è°ƒç”¨ã€‚å¯ä»¥æŠŠè¿™æ¡è§„åˆ™çœ‹ä½œæ˜¯æ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™æ—¶çš„é»˜è®¤è§„åˆ™</strong></p>
</blockquote>
<p>è€ƒè™‘è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
}
<span class="hljs-keyword">var</span> a =<span class="hljs-number">2</span>;
<span class="hljs-title function_">foo</span>();<span class="hljs-comment">//2</span>
</code></pre>
<p>æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨foo()å‡½æ•°æ—¶ï¼Œ<strong>this.aè¢«è§£ææˆäº†å…¨å±€å˜é‡a</strong>ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæ˜¯çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„é»˜è®¤ç»‘å®šï¼Œ<strong>thisæŒ‡å‘å…¨å±€å¯¹è±¡</strong>ï¼Œå½“ç„¶è¿™å¿…é¡»æ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹åˆ™ä¼šç»‘å®šåˆ°undefinedã€‚</p>
<p><em><strong>ä¸€å¥è¯æ€»ç»“é»˜è®¤ç»‘å®šï¼šéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå½“å‡½æ•°ç‹¬ç«‹è°ƒç”¨æ—¶ï¼Œthisè‡ªåŠ¨ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ä¸Š</strong></em>ã€</p>
<blockquote>
<p>âš ï¸ è¿™ç§è®¾è®¡å…¶å®æš´éœ²äº†æ—©æœŸ JavaScript çš„ä¸€ä¸ªâ€œå†å²åŒ…è¢±â€ï¼šåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ„å¤–çš„å…¨å±€ thisç»‘å®šå¯èƒ½å¯¼è‡´éšå¼åˆ›å»ºå…¨å±€å˜é‡ï¼Œæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚</p>
</blockquote>
<h4 data-id="heading-14">éšå¼ç»‘å®š</h4>
<blockquote>
<p>å½“å‡½æ•°è°ƒç”¨çš„ä½ç½®å­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ–è€…è¯´è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶è¢«æŸä¸ªå¯¹è±¡â€œæ‹¥æœ‰â€æˆ–â€œåŒ…å«â€ï¼Œéšå¼ç»‘å®šä¼šæŠŠå‡½æ•°è°ƒç”¨ä¸­çš„thisç»‘å®šåˆ°è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡</p>
</blockquote>
<p>è€ƒè™‘è¿™æ ·ä¸€æ®µä»£ç :</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> ()
{
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}
<span class="hljs-keyword">var</span> obj ={
<span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
<span class="hljs-attr">foo</span>:foo<span class="hljs-comment">// å®é™…ä¸Šæ˜¯å¯¹fooçš„å¼•ç”¨</span>

}
obj.<span class="hljs-title function_">foo</span>()<span class="hljs-comment">//2</span>
</code></pre>
<p>æˆ‘ä»¬èƒ½çœ‹åˆ° foo()å‡½æ•°è°ƒç”¨æ—¶ï¼Œèƒ½å¤Ÿè®¿é—®åˆ°objçš„å†…éƒ¨å±æ€§aï¼Œè¿™æ˜¯å› ä¸ºå®ƒç”±objè°ƒç”¨ï¼Œæ‰€ä»¥å®ƒè¢«objæ‰€åŒ…å«ã€‚<br/>
<em><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡å¼•ç”¨é“¾ä¸­åªæœ‰ä¸Šä¸€å±‚æˆ–è€…è¯´æœ€åä¸€å±‚åœ¨è°ƒç”¨ä½ç½®èµ·ä½œç”¨</strong></em></p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> ()
{
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}
<span class="hljs-keyword">var</span> obj2 ={
<span class="hljs-attr">a</span>:<span class="hljs-number">42</span>,
<span class="hljs-attr">foo</span>:foo
}
<span class="hljs-keyword">var</span> obj1 ={
<span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
<span class="hljs-attr">obj2</span>:obj2
}
obj1.<span class="hljs-property">obj2</span>.<span class="hljs-title function_">foo</span>();<span class="hljs-comment">//42</span>

</code></pre>
<p>å› ä¸ºæœ€åè°ƒç”¨fooçš„æ˜¯obj2ï¼Œæ‰€ä»¥ foo çš„ this.a æŒ‡å‘ obj 2ä¸­çš„ a</p>
<h4 data-id="heading-15">æ˜¾å¼ç»‘å®š</h4>
<blockquote>
<p><strong>JSä¸­ç»å¤§å¤šæ•°å‡½æ•°ä»¥åŠä½ è‡ªå·±åˆ›å»ºçš„å‡½æ•°ï¼Œéƒ½å¯ä»¥ä½¿ç”¨call()å’Œapply()æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»–ä»¬æ¥ç›´æ¥æŒ‡å®šthisçš„ç»‘å®šå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬ç§°ä¸ºæ˜¾ç¤ºç»‘å®š</strong></p>
</blockquote>
<p>è€ƒè™‘è¿™æ ·ä¸€æ®µä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> ()
{
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}
<span class="hljs-keyword">var</span> obj ={
<span class="hljs-attr">a</span>:<span class="hljs-number">2</span>
}
foo.<span class="hljs-title function_">call</span>(obj);<span class="hljs-comment">//2</span>
</code></pre>
<p>æŒ‰ç…§å‰é¢çš„ç†è§£ï¼šfoo()åœ¨å…¨å±€ä¸­è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆthisåº”è¯¥é»˜è®¤è¢«ç»‘å®šåˆ°å…¨å±€ï¼Œä½†æ˜¯è¿™é‡Œå´èƒ½å¤Ÿè®¿é—®åˆ°objä¸­çš„aï¼Œè¿™å°±æ˜¯ <strong>call()</strong> çš„ä½œç”¨ --&gt;<strong>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨fooæ—¶å¼ºåˆ¶æŠŠå®ƒçš„thisç»‘å®šåˆ°objä¸Š</strong></p>
<p><em><strong>ä»thisç»‘å®šçš„è§’åº¦å‡ºå‘ï¼Œcall()å’Œapply()æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ç”¨æ¥å¼ºåˆ¶ç»‘å®šthisåˆ°æŒ‡å®šå¯¹è±¡ï¼Œä»–ä»¬çš„åŒºåˆ«ä½“ç°åœ¨å…¶ä»–å‚æ•°ä¸Šï¼Œæˆ‘ä»¬è¿™é‡Œä¸è€ƒè™‘</strong></em></p>
<blockquote>
<p>å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªåŸå§‹å€¼(å­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œæ•°å­—)æ¥å½“ä½œthisçš„ç»‘å®šå¯¹è±¡ï¼Œè¿™ä¸ªå€¼ä¼šè¢«è½¬æ¢ä¸ºå®ƒçš„å¯¹è±¡å½¢å¼(new String(),new Boolean(),new Number())ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºâ€œè£…ç®±â€</p>
</blockquote>
<h4 data-id="heading-16">newç»‘å®š</h4>
<blockquote>
<p><strong>ä½¿ç”¨newæ¥è°ƒç”¨foo()æ—¶ï¼Œæˆ‘ä»¬ä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒç»‘å®šåˆ°foo()è°ƒç”¨ä¸­çš„thisä¸Šã€‚æˆ‘ä»¬ç§°ä¸ºnewç»‘å®š</strong></p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦é‡æ–°å®šä¹‰JSä¸­çš„æ„é€ å‡½æ•°--&gt;<strong>æ„é€ å‡½æ•°åªæ˜¯ä¸€äº›ä½¿ç”¨newæ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„æ™®é€šå‡½æ•°ã€‚</strong><br/>
æ‰€ä»¥å®é™…ä¸Šï¼Œå¹¶ä¸å­˜åœ¨æ‰€è°“çš„æ„é€ å‡½æ•°ï¼Œåªæœ‰å¯¹äºå‡½æ•°çš„<strong>æ„é€ è°ƒç”¨</strong><br/>
æ¥ä¸‹æ¥è€ƒè™‘è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> (a)
{
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = a;
}
<span class="hljs-keyword">var</span> bar =<span class="hljs-keyword">new</span> <span class="hljs-title function_">foo</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">a</span>);<span class="hljs-comment">//2</span>
</code></pre>
<p>å½“æˆ‘ä»¬ä½¿ç”¨newæ—¶ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™æ ·ä¸€äº›æ“ä½œï¼š</p>
<ol>
<li><em><strong>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡{}</strong></em></li>
<li><em><strong>æ–°å¯¹è±¡è¢«æ‰§è¡Œä¸[[prototype]]è¿æ¥</strong></em></li>
<li><em><strong>å°†å‡½æ•°è°ƒç”¨çš„thisç»‘å®šåˆ°è¯¥å¯¹è±¡</strong></em></li>
<li><em><strong>å¦‚æœæ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œåˆ™è‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡</strong></em></li>
</ol>
<p>æ‰€ä»¥ä¸Šè¿°ä»£ç çš„å®é™…åº•å±‚æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> (a)
{
 <span class="hljs-keyword">var</span> bar ={};
 bar.<span class="hljs-property">__proto__</span> = <span class="hljs-title function_">foo</span>().<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
 foo.<span class="hljs-title function_">call</span>(bar);
 <span class="hljs-keyword">return</span> bar;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = a;
}
</code></pre>
<h3 data-id="heading-17">ç»‘å®šä¸¢å¤±</h3>
<h4 data-id="heading-18">éšå¼ä¸¢å¤±</h4>
<p>ä¸€ä¸ªå¸¸è§çš„ç»‘å®šé—®é¢˜å°±æ˜¯è¢«éšå¼ç»‘å®šçš„å‡½æ•°ä¼šä¸¢å¤±ç»‘å®šå¯¹è±¡ï¼Œä¼šé‡æ–°åº”ç”¨ä¸ºé»˜è®¤ç»‘å®šï¼Œä»è€Œä½¿å¾—thisç»‘å®šåˆ°å…¨å±€ä¼šundefined</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
}
<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>:foo
  
};


<span class="hljs-keyword">var</span> bar = obj.<span class="hljs-property">foo</span>;<span class="hljs-comment">//å‡½æ•°åˆ«å</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-string">"global"</span>;
<span class="hljs-title function_">bar</span>();<span class="hljs-comment">//global</span>
</code></pre>
<p><strong>è¿™é‡Œå¯¼è‡´ç»‘å®šä¸¢å¤±çš„åŸå› æ˜¯barå®é™…ä¸Šä¹Ÿæ˜¯å¯¹fooçš„å¼•ç”¨ï¼Œè€Œå½“bar()è°ƒç”¨æ—¶ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°çš„ç‹¬ç«‹è°ƒç”¨ï¼Œæ‰€ä»¥æ‰§è¡Œäº†é»˜è®¤ç»‘å®š</strong></p>
<p><strong>å†çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼Œåœ¨ä¼ å…¥å›è°ƒå‡½æ•°æ—¶</strong>:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">doFoo</span>(<span class="hljs-params">fn</span>)
{
    <span class="hljs-title function_">fn</span>();
}
<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>:foo
  
};

<span class="hljs-comment">// æŠŠæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ â€”â€” ç»‘å®šä¸¢å¤±ï¼</span>
<span class="hljs-keyword">var</span> bar = obj.<span class="hljs-property">foo</span>;<span class="hljs-comment">//å‡½æ•°åˆ«å</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-string">"global"</span>;
<span class="hljs-title function_">doFoo</span>(obj.<span class="hljs-property">foo</span>);<span class="hljs-comment">//global</span>
</code></pre>
<p>è¿™æ ·åŒæ ·å¯¼è‡´äº†ç»‘å®šä¸¢å¤±ï¼Œé‚£ä¹ˆé€ æˆè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ï¼Ÿ<br/>
foo()å‡½æ•°çš„æ‰§è¡Œå®é™…ä¸Šè½¬äº¤ç”±doFooæ¥æ‰§è¡Œäº†ï¼Œè€Œåœ¨å®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰aè¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾åˆ°å…¨å±€ä¸­çš„a</p>
<p><em><strong>è¿™æ ·çš„ç»‘å®šä¸¢å¤±çš„æ ¸å¿ƒæ˜¯ï¼šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæƒè¢«ç§»äº¤åˆ°äº†å…¶ä»–å‡½æ•°æ‰‹ä¸­</strong></em></p>
<p><strong>å³ä½¿æ˜¯æ˜¾ç¤ºç»‘å®šä¹Ÿæ— æ³•é¿å…ç»‘å®šä¸¢å¤±</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"this.a ="</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>); <span class="hljs-comment">// æœŸæœ›thisæŒ‡å‘objï¼Œè¾“å‡º2</span>
}

<span class="hljs-keyword">var</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">2</span> };

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ¥æ”¶å›è°ƒçš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">doCallback</span>(<span class="hljs-params">callback</span>) {
  <span class="hljs-title function_">callback</span>(); <span class="hljs-comment">// è¿™é‡Œæ‰§è¡Œå›è°ƒï¼Œcallçš„ç»‘å®šä¸¢å¤±</span>
}

<span class="hljs-comment">// ç”¨callæ˜¾å¼ç»‘å®šfooçš„thisåˆ°objï¼Œä½œä¸ºå›è°ƒä¼ é€’</span>
<span class="hljs-title function_">doCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  foo.<span class="hljs-title function_">call</span>(obj); <span class="hljs-comment">// çœ‹ä¼¼ç»‘å®šäº†obj</span>
});

<span class="hljs-comment">// æ”¹é€ ï¼šæ•…æ„åˆ¶é€ ç»‘å®šä¸¢å¤±ï¼ˆæ›´ç›´è§‚ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">doLostBind</span>(<span class="hljs-params">callback</span>) {
  <span class="hljs-comment">// æ¨¡æ‹Ÿå®é™…åœºæ™¯ä¸­å¯¹å›è°ƒçš„äºŒæ¬¡è°ƒç”¨ï¼Œç»‘å®šä¸¢å¤±</span>
  <span class="hljs-keyword">const</span> temp = callback;
  <span class="hljs-title function_">temp</span>(); <span class="hljs-comment">// æ‰§è¡Œæ—¶ä¸¢å¤±åŸcallç»‘å®š</span>
}

<span class="hljs-comment">// ä¼ é€’ç”¨callç»‘å®šçš„å‡½æ•°ï¼Œæœ€ç»ˆç»‘å®šä¸¢å¤±</span>
<span class="hljs-title function_">doLostBind</span>(foo.<span class="hljs-property">call</span>.<span class="hljs-title function_">bind</span>(foo, obj)); <span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼ä¸‹è¾“å‡ºthis.a = undefinedï¼ˆæŒ‡å‘windowï¼‰</span>
</code></pre>
<p>doLostBind(foo.call.bind(foo, obj))è¿™ç§å†™æ³•çœ‹ä¼¼ä¼ å…¥æ—¶åšäº†ç»‘å®šï¼Œ<strong>ä½†å…¶å®è¿™åªæ˜¯ç”Ÿæˆäº†ä¸€ä¸ªâ€œå‡†å¤‡ç»‘å®šçš„å‡½æ•°â€ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œç»‘å®šé€»è¾‘</strong></p>
<hr/>
<h4 data-id="heading-19">æ€ä¹ˆè§£å†³ç»‘å®šä¸¢å¤±çš„é—®é¢˜ï¼Ÿ</h4>
<ul>
<li><strong>ç¡¬ç»‘å®š</strong></li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>){
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>)
}
<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
};

<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    foo.<span class="hljs-title function_">call</span>(obj);
    
}
<span class="hljs-title function_">bar</span>();<span class="hljs-comment">//2</span>
<span class="hljs-built_in">setTimeout</span>(bar,<span class="hljs-number">2</span>);<span class="hljs-comment">//2</span>

bar.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">window</span>);<span class="hljs-comment">//2</span>
</code></pre>
<ol>
<li>åœ¨barå‡½æ•°çš„å†…éƒ¨ï¼Œæˆ‘ä»¬æŠŠfooçš„thiså¼ºåˆ¶ç»‘å®šåœ¨äº†objä¸Šï¼Œæ— è®ºä¹‹åæ€ä¹ˆè°ƒç”¨barï¼Œ<strong>ä»–éƒ½ä¼šæ‰‹åŠ¨åœ¨objä¸Šè°ƒç”¨foo</strong></li>
<li><em><strong>ç¡¬ç»‘å®šä¸å¯èƒ½å†ä¿®æ”¹å®ƒçš„this</strong></em>,æˆ‘ä»¬æƒ³è¦é€šè¿‡<strong>bar.call(window);</strong> ä¿®æ”¹ç»‘å®šå¯¹è±¡ï¼Œä½†æ— è®ºä½ æ€ä¹ˆä¿®æ”¹ï¼Œ<strong>æœ€åéƒ½ä¼šæ‰§è¡Œ foo.call(obj);æŠŠthisé‡æ–°ç»‘å®šåˆ°objä¸Š</strong></li>
</ol>
<p>ç”±äºç¡¬ç»‘å®šæ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„æ¨¡å¼ï¼Œæ‰€ä»¥ES5æä¾›äº†å®ƒçš„å†…ç½®æ–¹æ³•<strong>bind()</strong>,ç”¨æ³•å¦‚ä¸‹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">temp</span>){
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>,temp);
<span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>+ temp
}
<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>:<span class="hljs-number">2</span>,
};


<span class="hljs-keyword">var</span> bar = foo.<span class="hljs-title function_">bind</span>(obj)
<span class="hljs-keyword">var</span> b = <span class="hljs-title function_">bar</span>(<span class="hljs-number">3</span>)ï¼›<span class="hljs-comment">//2 3</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b);<span class="hljs-comment">// 5</span>
</code></pre>
<p><em><strong>bind()ä¼šè¿”å›ä¸€ä¸ªç¡¬ç¼–ç çš„æ–°å‡½æ•°ï¼Œä»–ä¼šæŠŠä½ æŒ‡å®šçš„å‚æ•°è®¾ç½®ä¸ºthisçš„ä¸Šä¸‹æ–‡å¹¶è°ƒç”¨åŸå§‹å‡½æ•°</strong></em></p>
<h3 data-id="heading-20">ç»“è¯­</h3>
<p><code>this</code> æ˜¯ JavaScript ä¸­ä¸€ä¸ªå¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„æœºåˆ¶ã€‚ç†è§£å®ƒçš„è®¾è®¡åˆè¡·ã€ç»‘å®šè§„åˆ™ä»¥åŠä¸ä½œç”¨åŸŸç³»ç»Ÿçš„å·®å¼‚ï¼Œæ˜¯å†™å‡ºå¥å£®ã€å¯ç»´æŠ¤ä»£ç çš„å…³é”®ã€‚æŒæ¡ <code>this</code>ï¼Œä¸ä»…æœ‰åŠ©äºé¿å…å¸¸è§ bugï¼Œä¹Ÿèƒ½æ›´æ·±å…¥åœ°ç†è§£ JavaScript çš„æ‰§è¡Œæ¨¡å‹ã€‚</p>
<p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£æ›´å¤šå…³äºthisçš„åº•å±‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Jetpack - 3 LiveData]]></title>    <link>https://juejin.cn/post/7579805639435026484</link>    <guid>https://juejin.cn/post/7579805639435026484</guid>    <pubDate>2025-12-04T10:37:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579805639435026484" data-draft-id="7579556047783526452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Jetpack - 3 LiveData"/> <meta itemprop="keywords" content="å‰ç«¯,Android"/> <meta itemprop="datePublished" content="2025-12-04T10:37:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Jetpack - 3 LiveData
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:37:28.000Z" title="Thu Dec 04 2025 10:37:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. è®¤è¯† LiveData</h2>
<h3 data-id="heading-1">1.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ LiveDataï¼Ÿ</h3>
<p><strong>LiveData çš„æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<p>LiveData æ˜¯åŸºäº Lifecycle æ¡†æ¶å®ç°çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å‹æ•°æ®å®¹å™¨ï¼Œè§£å†³äº† Android å¼€å‘ä¸­çš„æ ¸å¿ƒç—›ç‚¹ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨å–æ¶ˆè®¢é˜…</strong>ï¼šå½“å®¿ä¸»ç”Ÿå‘½å‘¨æœŸè¿›å…¥é”€æ¯ï¼ˆDESTROYEDï¼‰çŠ¶æ€æ—¶ï¼ŒLiveDataè‡ªåŠ¨ç§»é™¤è§‚å¯Ÿè€…ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>å®‰å…¨å›è°ƒæ•°æ®</strong>ï¼šåœ¨å®¿ä¸»ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ä½äºæ´»è·ƒçŠ¶æ€ï¼ˆSTARTEDï¼‰æ—¶ï¼ŒLiveDataä¸å›è°ƒæ•°æ®ï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸å’Œæ€§èƒ½æŸè€—ï¼›å½“å®¿ä¸»ç”Ÿå‘½å‘¨æœŸä¸ä½äºæ´»è·ƒçŠ¶æ€ï¼ˆSTARTEDï¼‰æ—¶ï¼ŒLiveDataä¼šé‡æ–°å°è¯•å›è°ƒæ•°æ®ï¼Œç¡®ä¿è§‚å¯Ÿè€…æ¥æ”¶åˆ°æœ€æ–°æ•°æ®ã€‚</li>
</ol>
<p><strong>ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å±‚çº§å…³ç³»</strong>ï¼š</p>
<p>text</p>
<pre><code class="hljs language-markdown" lang="markdown">DESTROYED &lt; INITIALIZED &lt; CREATED &lt; STARTED &lt; RESUMED
<span class="hljs-code">                                      â†‘           â†‘
                                    æ´»è·ƒçŠ¶æ€     æ´»è·ƒçŠ¶æ€
</span></code></pre>
<p><strong>è¯¦ç»†è§£é‡Š</strong>ï¼š</p>
<ul>
<li><strong>STARTEDçŠ¶æ€</strong>ï¼šå¯¹åº”<code>onStart()</code>è¢«è°ƒç”¨åï¼ŒActivity/Fragmentçš„UIå·²å¯è§ï¼Œä½†å¯èƒ½ä¸åœ¨å‰å°ï¼ˆæ¯”å¦‚è¢«å¯¹è¯æ¡†éƒ¨åˆ†é®æŒ¡ï¼‰</li>
<li><strong>RESUMEDçŠ¶æ€</strong>ï¼šå¯¹åº”<code>onResume()</code>è¢«è°ƒç”¨åï¼ŒActivity/Fragmentå®Œå…¨åœ¨å‰å°ï¼Œç”¨æˆ·å¯äº¤äº’</li>
</ul>
<p><strong>LiveDataçš„è¡Œä¸º</strong>ï¼š</p>
<ul>
<li><strong>STARTEDæˆ–RESUMED</strong>ï¼šLiveDataä¼šç«‹å³åˆ†å‘æ•°æ®ç»™è§‚å¯Ÿè€…</li>
<li><strong>CREATEDåŠä»¥ä¸‹çŠ¶æ€</strong>ï¼šLiveDataä¸ä¼šåˆ†å‘æ•°æ®ï¼Œæ•°æ®ä¼šè¢«ç¼“å­˜</li>
<li><strong>ä»éæ´»è·ƒæ¢å¤åˆ°STARTED/RESUMED</strong>ï¼šLiveDataä¼šè¡¥å‘ç¼“å­˜çš„æ•°æ®</li>
</ul>
<p><strong>è®°å¿†æ–¹æ³•</strong>ï¼šSTARTEDå°±æ˜¯"å¼€å§‹æ´»è·ƒ"çš„ä¸´ç•Œç‚¹ï¼ŒSTARTEDåŠä»¥ä¸Šéƒ½ç®—æ´»è·ƒçŠ¶æ€ã€‚</p>
<p><strong>è§£å†³çš„é—®é¢˜æ¼”è¿›</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LiveData å‡ºç°å‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OldActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dataTask: AsyncTask? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dataObserver: DataObserver? = <span class="hljs-literal">null</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        dataTask = FetchDataTask().execute()
        DataManager.registerObserver(dataObserver!!)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroy()
        dataTask?.cancel(<span class="hljs-literal">true</span>)           <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨å–æ¶ˆ</span>
        DataManager.unregisterObserver(dataObserver)  <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨ç§»é™¤</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨ LiveData å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: MyViewModel <span class="hljs-keyword">by</span> viewModels()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
        viewModel.<span class="hljs-keyword">data</span>.observe(<span class="hljs-keyword">this</span>) { <span class="hljs-keyword">data</span> -&gt;
            updateUI(<span class="hljs-keyword">data</span>)
        }
    }
    <span class="hljs-comment">// ä¸éœ€è¦æ‰‹åŠ¨å–æ¶ˆè®¢é˜…</span>
}
</code></pre>
<h3 data-id="heading-2">1.2 LiveData çš„ä½¿ç”¨æ–¹æ³•</h3>
<p><strong>ä¾èµ–é…ç½®</strong>ï¼š</p>
<p>gradle</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle (Module: app)</span>
dependencies {
    def lifecycle_version = <span class="hljs-string">"2.6.0"</span>
    
    <span class="hljs-comment">// ViewModel</span>
    implementation <span class="hljs-string">"androidx.lifecycle:lifecycle-viewmodel-ktx:<span class="hljs-variable">$lifecycle_version</span>"</span>
    
    <span class="hljs-comment">// LiveData</span>
    implementation <span class="hljs-string">"androidx.lifecycle:lifecycle-livedata-ktx:<span class="hljs-variable">$lifecycle_version</span>"</span>
    
    <span class="hljs-comment">// Lifecycle æ ¸å¿ƒ</span>
    implementation <span class="hljs-string">"androidx.lifecycle:lifecycle-runtime-ktx:<span class="hljs-variable">$lifecycle_version</span>"</span>
}
</code></pre>
<p><strong>åŸºç¡€ä½¿ç”¨æ¨¡æ¿</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userName = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> userName: LiveData&lt;String&gt; = _userName
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableLiveData&lt;UiState&gt;()
    <span class="hljs-keyword">val</span> uiState: LiveData&lt;UiState&gt; = _uiState
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUser</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            _uiState.value = UiState.Loading
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> user = repository.getUser(userId)
                _userName.value = user.name
                _uiState.value = UiState.Success
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _uiState.value = UiState.Error(e.message)
            }
        }
    }
}

<span class="hljs-comment">// Activity</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: UserViewModel <span class="hljs-keyword">by</span> viewModels()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        viewModel.userName.observe(<span class="hljs-keyword">this</span>) { name -&gt;
            binding.tvUserName.text = name
        }
        
        viewModel.uiState.observe(<span class="hljs-keyword">this</span>) { state -&gt;
            <span class="hljs-keyword">when</span> (state) {
                <span class="hljs-keyword">is</span> UiState.Loading -&gt; showLoading()
                <span class="hljs-keyword">is</span> UiState.Success -&gt; hideLoading()
                <span class="hljs-keyword">is</span> UiState.Error -&gt; showError(state.message)
            }
        }
    }
}
</code></pre>
<p><strong>ä¸¤ç§è§‚å¯Ÿè€…æ³¨å†Œæ–¹å¼</strong>ï¼š</p>
<h4 data-id="heading-3">1.2.1 observe() - å¸¦ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„æ³¨å†Œæ–¹å¼</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¯­æ³•</span>
liveData.observe(LifecycleOwner owner, Observer&lt;T&gt; observer)

<span class="hljs-comment">// ç¤ºä¾‹</span>
viewModel.<span class="hljs-keyword">data</span>.observe(<span class="hljs-keyword">this</span>) { <span class="hljs-keyword">data</span> -&gt;
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
}
</code></pre>
<h4 data-id="heading-4">1.2.2 observeForever() - æ°¸ä¹…æ³¨å†Œæ–¹å¼</h4>
<p>kotlin</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è¯­æ³•</span>
liveData<span class="hljs-selector-class">.observeForever</span>(Observer&lt;T&gt; observer)

<span class="hljs-comment">// ç¤ºä¾‹</span>
val observer = Observer&lt;String&gt; { data -&gt;
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
}
liveData<span class="hljs-selector-class">.observeForever</span>(observer)

<span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨ç§»é™¤</span>
liveData<span class="hljs-selector-class">.removeObserver</span>(observer)
</code></pre>
<h5 data-id="heading-5">1.2.3 ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”</h5>













































<table><thead><tr><th>ç‰¹æ€§</th><th><code>observe()</code></th><th><code>observeForever()</code></th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸç»‘å®š</strong></td><td>âœ… è‡ªåŠ¨ç»‘å®š LifecycleOwner</td><td>âŒ æ— ç”Ÿå‘½å‘¨æœŸç»‘å®š</td></tr><tr><td><strong>è‡ªåŠ¨ç§»é™¤</strong></td><td>âœ… å®¿ä¸»é”€æ¯æ—¶è‡ªåŠ¨ç§»é™¤</td><td>âŒ å¿…é¡»æ‰‹åŠ¨ç§»é™¤</td></tr><tr><td><strong>æ´»è·ƒçŠ¶æ€</strong></td><td>è·Ÿéšå®¿ä¸»ç”Ÿå‘½å‘¨æœŸå˜åŒ–</td><td>å§‹ç»ˆæ´»è·ƒ</td></tr><tr><td><strong>å†…å­˜æ³„æ¼é£é™©</strong></td><td>ä½ï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰</td><td>é«˜ï¼ˆéœ€æ‰‹åŠ¨ç®¡ç†ï¼‰</td></tr><tr><td><strong>æ•°æ®æ¥æ”¶æ—¶æœº</strong></td><td>åªåœ¨å®¿ä¸»æ´»è·ƒæ—¶æ¥æ”¶</td><td>éšæ—¶æ¥æ”¶</td></tr><tr><td><strong>ä½¿ç”¨å¤æ‚åº¦</strong></td><td>ç®€å•ï¼ˆä¸€è¡Œä»£ç ï¼‰</td><td>å¤æ‚ï¼ˆéœ€é…å¯¹ä½¿ç”¨ removeï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>UI ç»„ä»¶ï¼ˆActivity/Fragmentï¼‰</td><td>åå°æœåŠ¡ã€å…¨å±€ç»„ä»¶ã€æµ‹è¯•</td></tr></tbody></table>
<h3 data-id="heading-6">1.3 ä½¿ç”¨å»ºè®®ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-7">ä¼˜å…ˆä½¿ç”¨ observe()</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ¨èï¼šåœ¨UIç»„ä»¶ä¸­ä½¿ç”¨observe()</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// Activityä¸­ä½¿ç”¨this</span>
        viewModel.<span class="hljs-keyword">data</span>.observe(<span class="hljs-keyword">this</span>) { <span class="hljs-keyword">data</span> -&gt;
            updateUI(<span class="hljs-keyword">data</span>)
        }
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// Fragmentä¸­ä½¿ç”¨viewLifecycleOwner</span>
        viewModel.<span class="hljs-keyword">data</span>.observe(viewLifecycleOwner) { <span class="hljs-keyword">data</span> -&gt;
            updateView(<span class="hljs-keyword">data</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-8">è°¨æ…ä½¿ç”¨ observeForever()</h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âš ï¸ è°¨æ…ä½¿ç”¨ï¼šéœ€è¦æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BackgroundService</span> : <span class="hljs-type">Service</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dataObserver = Observer&lt;String&gt; { <span class="hljs-keyword">data</span> -&gt;
        <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        <span class="hljs-comment">// æ³¨å†Œæ°¸ä¹…è§‚å¯Ÿè€…</span>
        liveData.observeForever(dataObserver)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroy()
        <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨ç§»é™¤ï¼Œå¦åˆ™ä¼šå†…å­˜æ³„æ¼</span>
        liveData.removeObserver(dataObserver)
    }
}
</code></pre>
<h4 data-id="heading-9">é¿å…æ··åˆä½¿ç”¨</h4>
<p>æ³¨æ„ï¼š LiveData å†…éƒ¨ä¼šç¦æ­¢ä¸€ä¸ªè§‚å¯Ÿè€…åŒæ—¶ä½¿ç”¨ observe() å’Œ observeForever() ä¸¤ç§æ³¨å†Œæ–¹å¼ã€‚ä½†åŒä¸€ä¸ª LiveData å¯ä»¥æ¥æ”¶ observe() å’Œ observeForever() ä¸¤ç§è§‚å¯Ÿè€…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåŒä¸€è§‚å¯Ÿè€…ä¸èƒ½æ··åˆä½¿ç”¨ä¸¤ç§æ³¨å†Œæ–¹å¼</span>
<span class="hljs-keyword">val</span> sameObserver = Observer&lt;String&gt; { }

liveData.observe(<span class="hljs-keyword">this</span>, sameObserver)  <span class="hljs-comment">// å…ˆæ³¨å†Œobserve()</span>
liveData.observeForever(sameObserver) <span class="hljs-comment">// å†æ³¨å†ŒobserveForever()ä¼šæŠ›å¼‚å¸¸</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¸åŒçš„è§‚å¯Ÿè€…å®ä¾‹</span>
<span class="hljs-keyword">val</span> observer1 = Observer&lt;String&gt; { }
<span class="hljs-keyword">val</span> observer2 = Observer&lt;String&gt; { }

liveData.observe(<span class="hljs-keyword">this</span>, observer1)
liveData.observeForever(observer2)  <span class="hljs-comment">// ä½¿ç”¨ä¸åŒå®ä¾‹ï¼Œå¯ä»¥åŒæ—¶æ³¨å†Œ</span>
</code></pre>
<h3 data-id="heading-10">1.4 å†…éƒ¨å®ç°å·®å¼‚</h3>
<h4 data-id="heading-11">observe() çš„å†…éƒ¨åŒ…è£…</h4>
<p>java</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åŒ…è£…ä¸º LifecycleBoundObserver</span>
LifecycleBoundObserver wrapper = new <span class="hljs-built_in">LifecycleBoundObserver</span>(owner, observer);
owner<span class="hljs-selector-class">.getLifecycle</span>()<span class="hljs-selector-class">.addObserver</span>(wrapper); <span class="hljs-comment">// æ³¨å†Œåˆ°ç”Ÿå‘½å‘¨æœŸ</span>
</code></pre>
<h4 data-id="heading-12">observeForever() çš„å†…éƒ¨åŒ…è£…</h4>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒ…è£…ä¸º AlwaysActiveObserver</span>
<span class="hljs-type">AlwaysActiveObserver</span> <span class="hljs-variable">wrapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlwaysActiveObserver</span>(observer);
wrapper.activeStateChanged(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ç«‹å³æ¿€æ´»</span>
</code></pre>
<h4 data-id="heading-13">å…³é”®åŒºåˆ«ç‚¹</h4>
<ol>
<li><strong>åŒ…è£…ç±»ä¸åŒ</strong>ï¼š<code>observe()</code>Â ä½¿ç”¨Â <code>LifecycleBoundObserver</code>ï¼Œ<code>observeForever()</code>Â ä½¿ç”¨Â <code>AlwaysActiveObserver</code></li>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ³¨å†Œ</strong>ï¼šåªæœ‰Â <code>LifecycleBoundObserver</code>Â ä¼šæ³¨å†Œåˆ° LifecycleOwner</li>
<li><strong>æ¿€æ´»æ—¶æœº</strong>ï¼š<code>AlwaysActiveObserver</code>Â æ³¨å†Œåç«‹å³æ¿€æ´»ï¼Œ<code>LifecycleBoundObserver</code>Â ä¾èµ–å®¿ä¸»ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</li>
</ol>
<h3 data-id="heading-14">1.5 æ€»ç»“</h3>
<p><strong>ä¸€å¥è¯é€‰æ‹©æŒ‡å—</strong>ï¼š</p>
<ul>
<li><strong>UI ç»„ä»¶ä¸­</strong>ï¼šæ€»æ˜¯ä½¿ç”¨Â <code>observe()</code>ï¼Œè®© LiveData è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>åå°æˆ–å…¨å±€ç»„ä»¶</strong>ï¼šè°¨æ…ä½¿ç”¨Â <code>observeForever()</code>ï¼Œè®°å¾—é…å¯¹ä½¿ç”¨Â <code>removeObserver()</code></li>
<li><strong>æµ‹è¯•åœºæ™¯</strong>ï¼šæ ¹æ®æµ‹è¯•éœ€æ±‚é€‰æ‹©ï¼Œé€šå¸¸Â <code>observeForever()</code>Â æ›´æ–¹ä¾¿</li>
</ul>
<p>è®°ä½æ ¸å¿ƒåŸåˆ™ï¼š<strong>UI ç»„ä»¶ç”¨ observeï¼Œåå°æœåŠ¡ç”¨ observeForeverï¼ˆå¹¶æ‰‹åŠ¨ç®¡ç†ï¼‰ï¼Œæ°¸è¿œä¸è¦å¿˜è®°ç§»é™¤æ°¸ä¹…è§‚å¯Ÿè€…ã€‚</strong></p>
<h3 data-id="heading-15">1.6 LiveData å­˜åœ¨çš„å±€é™</h3>
<p><strong>å››å¤§æ ¸å¿ƒå±€é™</strong>ï¼š</p>



































<table><thead><tr><th>å±€é™</th><th>é—®é¢˜æè¿°</th><th>å½±å“åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ä¸»çº¿ç¨‹é™åˆ¶</strong></td><td><code>setValue()</code>Â å¿…é¡»åœ¨ä¸»çº¿ç¨‹è°ƒç”¨</td><td>å­çº¿ç¨‹æ›´æ–°æ•°æ®</td><td><code>postValue()</code>Â æˆ–åç¨‹åˆ‡æ¢</td></tr><tr><td><strong>æ•°æ®é‡æ”¾</strong></td><td>æ–°è§‚å¯Ÿè€…æ”¶åˆ°å†å²æ•°æ®</td><td>äº‹ä»¶ä¼ é€’åœºæ™¯</td><td>EventåŒ…è£…å™¨ã€SharedFlow</td></tr><tr><td><strong>ä¸é˜²æŠ–</strong></td><td>ç›¸åŒå€¼é‡å¤è§¦å‘å›è°ƒ</td><td>æ€§èƒ½æµªè´¹</td><td><code>distinctUntilChanged()</code></td></tr><tr><td><strong>æ•°æ®ä¸¢å¤±</strong></td><td>å¿«é€Ÿæ›´æ–°æ—¶ä¸¢å¤±ä¸­é—´å€¼</td><td>é«˜é¢‘æ•°æ®æ›´æ–°</td><td>ç¼“å†²é˜Ÿåˆ—ã€Flow</td></tr></tbody></table>
<p><strong>è¯¦ç»†é—®é¢˜ç¤ºä¾‹</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LiveDataLimitationsDemo</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> liveData = MutableLiveData&lt;String&gt;()
    
    <span class="hljs-comment">// 1. ä¸»çº¿ç¨‹é™åˆ¶</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateFromBackground</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨å­çº¿ç¨‹è°ƒç”¨setValueä¼šå´©æºƒ</span>
        <span class="hljs-comment">// Thread { liveData.value = "data" }.start()</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨postValue</span>
        Thread { liveData.postValue(<span class="hljs-string">"data"</span>) }.start()
    }
    
    <span class="hljs-comment">// 2. æ•°æ®é‡æ”¾é—®é¢˜</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dataReplayIssue</span><span class="hljs-params">()</span></span> {
        liveData.value = <span class="hljs-string">"åˆå§‹æ•°æ®"</span>
        <span class="hljs-comment">// Activityé‡å»ºåï¼Œæ–°è§‚å¯Ÿè€…ä¼šç«‹å³æ”¶åˆ°"åˆå§‹æ•°æ®"</span>
        <span class="hljs-comment">// å¦‚æœæ˜¯äº‹ä»¶ï¼ˆå¦‚å¯¼èˆªï¼‰ï¼Œä¼šå¯¼è‡´é‡å¤æ‰§è¡Œ</span>
    }
    
    <span class="hljs-comment">// 3. ä¸é˜²æŠ–é—®é¢˜</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">duplicateUpdates</span><span class="hljs-params">()</span></span> {
        liveData.value = <span class="hljs-string">"ç›¸åŒå€¼"</span>
        liveData.value = <span class="hljs-string">"ç›¸åŒå€¼"</span> <span class="hljs-comment">// ä¼šå†æ¬¡è§¦å‘è§‚å¯Ÿè€…å›è°ƒ</span>
    }
    
    <span class="hljs-comment">// 4. æ•°æ®ä¸¢å¤±é—®é¢˜</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dataLossIssue</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å¿«é€ŸpostValueå¯èƒ½å¯¼è‡´ä¸­é—´å€¼ä¸¢å¤±</span>
        repeat(<span class="hljs-number">100</span>) { index -&gt;
            Thread {
                liveData.postValue(<span class="hljs-string">"Value <span class="hljs-variable">$index</span>"</span>)
            }.start()
        }
        <span class="hljs-comment">// è§‚å¯Ÿè€…å¯èƒ½åªæ”¶åˆ°éƒ¨åˆ†å€¼</span>
    }
}
</code></pre>
<h5 data-id="heading-16">æ•°æ®ä¸¢å¤±çš„ä¸‰ç§æƒ…å†µ</h5>
<p><strong>æƒ…å†µ1ï¼špostValue å¿«é€Ÿè¿ç»­è°ƒç”¨</strong></p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// postValue çš„åŒæ­¥å—é€»è¾‘
synchronized (mDataLock) {
    <span class="hljs-attr">postTask</span> = mPendingData == NOT_SET<span class="hljs-comment">; // æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†æ•°æ®</span>
    <span class="hljs-attr">mPendingData</span> = value<span class="hljs-comment">; // ç›´æ¥è¦†ç›–</span>
}
// å¦‚æœ mPendingData å·²è¢«è®¾ç½®ä½†è¿˜æœªå¤„ç†ï¼Œæ–°å€¼ä¼šè¦†ç›–æ—§å€¼
</code></pre>
<p><strong>æƒ…å†µ2ï¼šè§‚å¯Ÿè€…å¤„ç†ä¸­åˆæ›´æ–°æ•°æ®</strong></p>
<p>java</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">dispatchingValue</span>(<span class="hljs-variable">@Nullable</span> ObserverWrapper initiator) {
    <span class="hljs-selector-tag">if</span> (mDispatchingValue) {
        <span class="hljs-selector-tag">mDispatchInvalidated</span> = <span class="hljs-selector-tag">true</span>; <span class="hljs-comment">// æ ‡è®°éœ€è¦é‡æ–°åˆ†å‘</span>
        <span class="hljs-selector-tag">return</span>; <span class="hljs-comment">// ä¸­æ–­å½“å‰åˆ†å‘</span>
    }
    <span class="hljs-comment">// ... åˆ†å‘é€»è¾‘</span>
}
</code></pre>
<p><strong>æƒ…å†µ3ï¼šéæ´»è·ƒçŠ¶æ€è¿ç»­æ›´æ–°</strong></p>
<p>kotlin</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“è§‚å¯Ÿè€…å¤„äºéæ´»è·ƒçŠ¶æ€æ—¶</span>
viewModel.<span class="hljs-property">data</span>.<span class="hljs-title function_">observe</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span></span>) { data -&gt;
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
}

<span class="hljs-comment">// å‡è®¾è§‚å¯Ÿè€…å½“å‰å¤„äºéæ´»è·ƒçŠ¶æ€ï¼ˆActivityåœ¨åå°ï¼‰</span>
<span class="hljs-title function_">repeat</span>(<span class="hljs-params"><span class="hljs-number">10</span></span>) {
    liveData.<span class="hljs-property">value</span> = <span class="hljs-string">"Value$it"</span> <span class="hljs-comment">// è®¾ç½®10ä¸ªå€¼</span>
}

<span class="hljs-comment">// å½“è§‚å¯Ÿè€…æ¢å¤æ´»è·ƒæ—¶ï¼Œåªä¼šæ”¶åˆ°æœ€åä¸€ä¸ªå€¼ "Value9"</span>
<span class="hljs-comment">// ä¸­é—´çš„å€¼è¢«ä¸¢å¤±</span>
</code></pre>
<h3 data-id="heading-17">1.7 LiveData çš„æ›¿ä»£è€…</h3>
<p><strong>æŠ€æœ¯é€‰å‹å¯¹æ¯”</strong>ï¼š</p>





















































<table><thead><tr><th>ç‰¹æ€§</th><th>LiveData</th><th>RxJava</th><th>Kotlin Flow</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong></td><td>âœ… è‡ªåŠ¨</td><td>âŒ éœ€æ‰‹åŠ¨</td><td>âš ï¸ éœ€<code>repeatOnLifecycle</code></td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>âœ… ç®€å•</td><td>âŒ é™¡å³­</td><td>âš ï¸ ä¸­ç­‰</td></tr><tr><td><strong>çº¿ç¨‹è°ƒåº¦</strong></td><td>âš ï¸ ä¸»çº¿ç¨‹ä¸ºä¸»</td><td>âœ… çµæ´»</td><td>âœ… çµæ´»</td></tr><tr><td><strong>æ“ä½œç¬¦ä¸°å¯Œåº¦</strong></td><td>âŒ æœ‰é™</td><td>âœ… æå…¶ä¸°å¯Œ</td><td>âœ… ä¸°å¯Œ</td></tr><tr><td><strong>èƒŒå‹å¤„ç†</strong></td><td>âŒ è¦†ç›–ç­–ç•¥</td><td>âœ… å¤šç§ç­–ç•¥</td><td>âœ… å¤šç§ç­–ç•¥</td></tr><tr><td><strong>åç¨‹é›†æˆ</strong></td><td>âš ï¸ æœ‰é™</td><td>âš ï¸ éœ€æ‰©å±•</td><td>âœ… åŸç”Ÿæ”¯æŒ</td></tr><tr><td><strong>æ•°æ®é‡æ”¾æ§åˆ¶</strong></td><td>âŒ æ€»æ˜¯é‡æ”¾</td><td>âœ… å¯é…ç½®</td><td>âœ… å¯é…ç½®</td></tr></tbody></table>
<p><strong>Flow åŸºç¡€ä½¿ç”¨</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-comment">// StateFlow - ç±»ä¼¼LiveDataçš„çŠ¶æ€å®¹å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _userState = MutableStateFlow&lt;UserState&gt;(UserState.Idle)
    <span class="hljs-keyword">val</span> userState = _userState.asStateFlow()
    
    <span class="hljs-comment">// SharedFlow - ç”¨äºäº‹ä»¶ï¼Œä¸é‡æ”¾</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _events = MutableSharedFlow&lt;Event&gt;(
        replay = <span class="hljs-number">0</span>, <span class="hljs-comment">// æ–°è®¢é˜…è€…ä¸æ¥æ”¶å†å²äº‹ä»¶</span>
        extraBufferCapacity = <span class="hljs-number">64</span>
    )
    <span class="hljs-keyword">val</span> events = _events.asSharedFlow()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUser</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            _userState.value = UserState.Loading
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> user = repository.getUser()
                _userState.value = UserState.Success(user)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _events.emit(Event.ShowError(e.message))
            }
        }
    }
}

<span class="hljs-comment">// Activityä¸­æ”¶é›†Flow</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                viewModel.userState.collect { state -&gt;
                    updateUI(state)
                }
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-18">2. LiveData å®ç°åŸç†æ·±åº¦è§£æ</h2>
<h3 data-id="heading-19">2.1 æ³¨å†Œè§‚å¯Ÿè€…çš„æ‰§è¡Œè¿‡ç¨‹</h3>
<p><strong>æºç æ¶æ„åˆ†æ</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// LiveData.java - æ ¸å¿ƒæ•°æ®ç»“æ„</span>
public <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LiveData&lt;T&gt;</span> </span>{
    <span class="hljs-comment">// ç‰ˆæœ¬å·æœºåˆ¶</span>
    static <span class="hljs-keyword">final</span> int <span class="hljs-type">START_VERSION</span> = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">private</span> int mVersion = <span class="hljs-type">START_VERSION</span>;
    
    <span class="hljs-comment">// è§‚å¯Ÿè€…å®¹å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">SafeIterableMap</span>&lt;<span class="hljs-type">Observer</span>&lt;? <span class="hljs-keyword">super</span> <span class="hljs-type">T</span>&gt;, <span class="hljs-type">ObserverWrapper</span>&gt; mObservers = 
        <span class="hljs-keyword">new</span> <span class="hljs-type">SafeIterableMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// è§‚å¯Ÿè€…åŒ…è£…å™¨å±‚æ¬¡ç»“æ„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ObserverWrapper</span> </span>{
        <span class="hljs-keyword">final</span> <span class="hljs-type">Observer</span>&lt;? <span class="hljs-keyword">super</span> <span class="hljs-type">T</span>&gt; mObserver;
        boolean mActive;
        int mLastVersion = <span class="hljs-type">START_VERSION</span>;
        <span class="hljs-comment">// ...</span>
    }
    
    <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸç»‘å®šè§‚å¯Ÿè€…</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LifecycleBoundObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ObserverWrapper</span> </span>
        implements <span class="hljs-type">LifecycleEventObserver</span> {
        <span class="hljs-meta">@NonNull</span> <span class="hljs-keyword">final</span> <span class="hljs-type">LifecycleOwner</span> mOwner;
        <span class="hljs-comment">// ...</span>
    }
    
    <span class="hljs-comment">// æ°¸ä¹…è§‚å¯Ÿè€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AlwaysActiveObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ObserverWrapper</span> </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p><strong>observe() æ–¹æ³•å®Œæ•´æµç¨‹</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@MainThread</span>
public void <span class="hljs-built_in">observe</span>(<span class="hljs-variable">@NonNull</span> LifecycleOwner owner, <span class="hljs-variable">@NonNull</span> Observer&lt;? super T&gt; observer) {
    <span class="hljs-comment">// 1. ä¸»çº¿ç¨‹æ£€æŸ¥</span>
    <span class="hljs-selector-tag">assertMainThread</span>(<span class="hljs-string">"observe"</span>);
    
    <span class="hljs-comment">// 2. ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æ£€æŸ¥</span>
    <span class="hljs-selector-tag">if</span> (owner.<span class="hljs-built_in">getLifecycle</span>().<span class="hljs-built_in">getCurrentState</span>() == DESTROYED) {
        <span class="hljs-selector-tag">return</span>; <span class="hljs-comment">// å·²é”€æ¯åˆ™ç›´æ¥è¿”å›</span>
    }
    
    <span class="hljs-comment">// 3. åŒ…è£…ä¸ºç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥è§‚å¯Ÿè€…</span>
    <span class="hljs-selector-tag">LifecycleBoundObserver</span> <span class="hljs-selector-tag">wrapper</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">LifecycleBoundObserver</span>(owner, observer);
    
    <span class="hljs-comment">// 4. é˜²æ­¢åŒä¸€è§‚å¯Ÿè€…é‡å¤ç»‘å®šä¸åŒå®¿ä¸»</span>
    <span class="hljs-selector-tag">ObserverWrapper</span> <span class="hljs-selector-tag">existing</span> = <span class="hljs-selector-tag">mObservers</span><span class="hljs-selector-class">.putIfAbsent</span>(observer, wrapper);
    <span class="hljs-selector-tag">if</span> (existing != null &amp;&amp; !existing.<span class="hljs-built_in">isAttachedTo</span>(owner)) {
        <span class="hljs-selector-tag">throw</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">IllegalArgumentException</span>(
            <span class="hljs-string">"Cannot add the same observer with different lifecycles"</span>);
    }
    
    <span class="hljs-comment">// 5. å·²å­˜åœ¨ç›¸åŒè§‚å¯Ÿè€…ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-selector-tag">if</span> (existing != null) {
        <span class="hljs-selector-tag">return</span>;
    }
    
    <span class="hljs-comment">// 6. å…³é”®ï¼šæ³¨å†Œåˆ°ç”Ÿå‘½å‘¨æœŸ</span>
    <span class="hljs-selector-tag">owner</span><span class="hljs-selector-class">.getLifecycle</span>()<span class="hljs-selector-class">.addObserver</span>(wrapper);
}
</code></pre>
<h3 data-id="heading-20">2.2 ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æºç åˆ†æ</h3>
<p><strong>LifecycleBoundObserver å®ç°</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">LifecycleBoundObserver</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">ObserverWrapper</span> <span class="hljs-selector-tag">implements</span> <span class="hljs-selector-tag">LifecycleEventObserver</span> {
    <span class="hljs-variable">@NonNull</span> final LifecycleOwner mOwner;
    
    <span class="hljs-selector-tag">LifecycleBoundObserver</span>(<span class="hljs-variable">@NonNull</span> LifecycleOwner owner, Observer&lt;? super T&gt; observer) {
        <span class="hljs-selector-tag">super</span>(observer);
        <span class="hljs-selector-tag">mOwner</span> = <span class="hljs-selector-tag">owner</span>;
    }
    
    <span class="hljs-comment">// æ´»è·ƒçŠ¶æ€åˆ¤æ–­ï¼šSTARTEDæˆ–RESUMED</span>
    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">shouldBeActive</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">mOwner</span><span class="hljs-selector-class">.getLifecycle</span>()<span class="hljs-selector-class">.getCurrentState</span>()<span class="hljs-selector-class">.isAtLeast</span>(STARTED);
    }
    
    <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–å›è°ƒ</span>
    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onStateChanged</span>(<span class="hljs-variable">@NonNull</span> LifecycleOwner source, <span class="hljs-variable">@NonNull</span> Lifecycle.Event event) {
        <span class="hljs-selector-tag">Lifecycle</span><span class="hljs-selector-class">.State</span> <span class="hljs-selector-tag">currentState</span> = <span class="hljs-selector-tag">mOwner</span><span class="hljs-selector-class">.getLifecycle</span>()<span class="hljs-selector-class">.getCurrentState</span>();
        
        <span class="hljs-comment">// æƒ…å†µ1ï¼šå®¿ä¸»é”€æ¯ â†’ è‡ªåŠ¨ç§»é™¤è§‚å¯Ÿè€…</span>
        <span class="hljs-selector-tag">if</span> (currentState == DESTROYED) {
            <span class="hljs-selector-tag">removeObserver</span>(mObserver); <span class="hljs-comment">// æ ¸å¿ƒé˜²æ³„æ¼æœºåˆ¶</span>
            <span class="hljs-selector-tag">return</span>;
        }
        
        <span class="hljs-comment">// æƒ…å†µ2ï¼šç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–</span>
        <span class="hljs-selector-tag">Lifecycle</span><span class="hljs-selector-class">.State</span> <span class="hljs-selector-tag">prevState</span> = <span class="hljs-selector-tag">null</span>;
        <span class="hljs-selector-tag">while</span> (prevState != currentState) {
            <span class="hljs-selector-tag">prevState</span> = <span class="hljs-selector-tag">currentState</span>;
            <span class="hljs-selector-tag">activeStateChanged</span>(<span class="hljs-built_in">shouldBeActive</span>());
            <span class="hljs-selector-tag">currentState</span> = <span class="hljs-selector-tag">mOwner</span><span class="hljs-selector-class">.getLifecycle</span>()<span class="hljs-selector-class">.getCurrentState</span>();
        }
    }
}
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ä¸æ•°æ®åˆ†å‘</strong>ï¼š</p>
<p>text</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼šDESTROYED â† INITIALIZED â† CREATED â† STARTED â† RESUMED
<span class="hljs-code">                                         â†‘           â†‘
                                       éæ´»è·ƒ      æ´»è·ƒçŠ¶æ€
                                         â†“           â†“
                                     ä¸åˆ†å‘æ•°æ®    åˆ†å‘æ•°æ®
</span>
è¯¦ç»†çŠ¶æ€è¯´æ˜ï¼š
<span class="hljs-bullet">-</span> DESTROYED:    ç»„ä»¶å·²é”€æ¯ï¼Œè§‚å¯Ÿè€…è¢«è‡ªåŠ¨ç§»é™¤
<span class="hljs-bullet">-</span> CREATED:      å·²åˆ›å»ºä½†ä¸å¯è§ï¼ˆonCreateåï¼ŒonStartå‰ï¼‰
<span class="hljs-bullet">-</span> STARTED:      å·²å¼€å§‹ï¼ŒUIéƒ¨åˆ†å¯è§ï¼ˆonStartåï¼ŒonResumeå‰ï¼‰
<span class="hljs-bullet">-</span> RESUMED:      å·²æ¢å¤ï¼ŒUIå®Œå…¨å¯è§ä¸”å¯äº¤äº’
</code></pre>
<h3 data-id="heading-21">2.3 åŒæ­¥è®¾ç½®æ•°æ®çš„æ‰§è¡Œè¿‡ç¨‹</h3>
<p><strong>setValue() å®Œæ•´æµç¨‹</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@MainThread</span>
<span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setValue</span>(<span class="hljs-params">T value</span>) {
    <span class="hljs-comment">// 1. ä¸»çº¿ç¨‹æ£€æŸ¥</span>
    <span class="hljs-title function_">assertMainThread</span>(<span class="hljs-string">"setValue"</span>);
    
    <span class="hljs-comment">// 2. ç‰ˆæœ¬å·é€’å¢ - æ ¸å¿ƒæœºåˆ¶</span>
    mVersion++;
    
    <span class="hljs-comment">// 3. å­˜å‚¨æ•°æ®</span>
    mData = value;
    
    <span class="hljs-comment">// 4. è§¦å‘æ•°æ®åˆ†å‘</span>
    <span class="hljs-title function_">dispatchingValue</span>(<span class="hljs-literal">null</span>);
}

<span class="hljs-comment">// æ•°æ®åˆ†å‘å…¥å£</span>
<span class="hljs-built_in">void</span> <span class="hljs-title function_">dispatchingValue</span>(<span class="hljs-params"><span class="hljs-meta">@Nullable</span> ObserverWrapper initiator</span>) {
    <span class="hljs-comment">// å¤„ç†é‡å…¥æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (mDispatchingValue) {
        mDispatchInvalidated = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ä¸­æ–­å½“å‰åˆ†å‘ï¼Œç­‰å¾…ä¸‹ä¸€è½®</span>
    }
    
    mDispatchingValue = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">do</span> {
        mDispatchInvalidated = <span class="hljs-literal">false</span>;
        
        <span class="hljs-keyword">if</span> (initiator != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// åœºæ™¯Aï¼šå•ä¸ªè§‚å¯Ÿè€…çŠ¶æ€å˜åŒ–è§¦å‘</span>
            <span class="hljs-title function_">considerNotify</span>(initiator);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// åœºæ™¯Bï¼šsetValueè§¦å‘ï¼Œéå†æ‰€æœ‰è§‚å¯Ÿè€…</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Iterator</span>&lt;<span class="hljs-title class_">Map</span>.<span class="hljs-property">Entry</span>&lt;<span class="hljs-title class_">Observer</span>&lt;? <span class="hljs-variable language_">super</span> T&gt;, <span class="hljs-title class_">ObserverWrapper</span>&gt;&gt; iterator = 
                 mObservers.<span class="hljs-title function_">iteratorWithAdditions</span>(); iterator.<span class="hljs-title function_">hasNext</span>(); ) {
                
                <span class="hljs-title function_">considerNotify</span>(iterator.<span class="hljs-title function_">next</span>().<span class="hljs-title function_">getValue</span>());
                
                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¢«ä¸­æ–­</span>
                <span class="hljs-keyword">if</span> (mDispatchInvalidated) {
                    <span class="hljs-keyword">break</span>;
                }
            }
        }
    } <span class="hljs-keyword">while</span> (mDispatchInvalidated);
    
    mDispatchingValue = <span class="hljs-literal">false</span>;
}
</code></pre>
<p><strong>æ ¸å¿ƒåˆ†å‘é€»è¾‘ considerNotify()</strong> ï¼š</p>
<p>java</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> void considerNotify(ObserverWrapper observer) {
    <span class="hljs-comment">// æ¡ä»¶1ï¼šè§‚å¯Ÿè€…å¿…é¡»å¤„äºæ´»è·ƒçŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (!observer.mActive) {
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// æ¡ä»¶2ï¼šåŒé‡æ£€æŸ¥æ˜¯å¦åº”è¯¥æ´»è·ƒ</span>
    <span class="hljs-keyword">if</span> (!observer.shouldBeActive()) {
        observer.activeStateChanged(<span class="hljs-literal">false</span>);
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// æ¡ä»¶3ï¼šç‰ˆæœ¬å·æ£€æŸ¥ï¼ˆæ ¸å¿ƒå†³ç­–é€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">if</span> (observer.mLastVersion &gt;= mVersion) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// è§‚å¯Ÿè€…å·²æ¶ˆè´¹è¿‡æ­¤ç‰ˆæœ¬æ•°æ®</span>
    }
    
    <span class="hljs-comment">// æ‰€æœ‰æ¡ä»¶æ»¡è¶³ï¼Œåˆ†å‘æ•°æ®</span>
    observer.mLastVersion = mVersion;
    observer.mObserver.onChanged((T) mData);
}
</code></pre>
<h3 data-id="heading-22">2.4 å¼‚æ­¥è®¾ç½®æ•°æ®çš„æ‰§è¡Œè¿‡ç¨‹</h3>
<p><strong>postValue() å®ç°ç»†èŠ‚</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼‚æ­¥è®¾ç½®æ•°æ® - å¯åœ¨ä»»ä½•çº¿ç¨‹è°ƒç”¨</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postValue</span><span class="hljs-params">(T value)</span> {
    <span class="hljs-type">boolean</span> postTask;
    
    <span class="hljs-comment">// åŒæ­¥å—ä¿è¯çº¿ç¨‹å®‰å…¨</span>
    <span class="hljs-keyword">synchronized</span> (mDataLock) {
        <span class="hljs-comment">// å…³é”®é€»è¾‘ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†æ•°æ®</span>
        postTask = mPendingData == NOT_SET;
        mPendingData = value; <span class="hljs-comment">// å­˜å‚¨æ•°æ®ï¼ˆå¯èƒ½è¦†ç›–ä¹‹å‰çš„å€¼ï¼‰</span>
    }
    
    <span class="hljs-comment">// åªæœ‰ç¬¬ä¸€ä¸ªè®¾ç½®æ•°æ®çš„è°ƒç”¨ä¼šæäº¤ä»»åŠ¡</span>
    <span class="hljs-keyword">if</span> (!postTask) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²æœ‰ä»»åŠ¡åœ¨é˜Ÿåˆ—ä¸­ï¼Œç›´æ¥è¿”å›</span>
    }
    
    <span class="hljs-comment">// æäº¤åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œ</span>
    ArchTaskExecutor.getInstance().postToMainThread(mPostValueRunnable);
}

<span class="hljs-comment">// å®é™…æ‰§è¡ŒsetValueçš„Runnable</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Runnable</span> <span class="hljs-variable">mPostValueRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        Object newValue;
        <span class="hljs-keyword">synchronized</span> (mDataLock) {
            newValue = mPendingData;
            mPendingData = NOT_SET; <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
        }
        setValue((T) newValue); <span class="hljs-comment">// æœ€ç»ˆè°ƒç”¨setValue</span>
    }
};
</code></pre>
<p><strong>postValue æ•°æ®ä¸¢å¤±åœºæ™¯</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœºæ™¯1ï¼šå¿«é€Ÿè¿ç»­è°ƒç”¨postValue</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testDataLoss1</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> liveData = MutableLiveData&lt;<span class="hljs-built_in">Int</span>&gt;()
    
    thread {
        repeat(<span class="hljs-number">1000</span>) { i -&gt;
            liveData.postValue(i)
        }
    }
    <span class="hljs-comment">// è§‚å¯Ÿè€…å¯èƒ½åªæ”¶åˆ°éƒ¨åˆ†å€¼</span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šè§‚å¯Ÿè€…å¤„ç†ä¸­æ›´æ–°æ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testDataLoss2</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> liveData = MutableLiveData&lt;String&gt;()
    
    liveData.observe(<span class="hljs-keyword">this</span>) { value -&gt;
        <span class="hljs-keyword">if</span> (value == <span class="hljs-string">"First"</span>) {
            liveData.value = <span class="hljs-string">"Second"</span>  <span class="hljs-comment">// ä¼šä¸­æ–­å½“å‰åˆ†å‘</span>
        }
    }
    
    liveData.value = <span class="hljs-string">"First"</span>
    <span class="hljs-comment">// å¯èƒ½ç›´æ¥è¾“å‡º Second</span>
}

<span class="hljs-comment">// åœºæ™¯3ï¼šéæ´»è·ƒçŠ¶æ€è¿ç»­æ›´æ–°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testDataLoss3</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> liveData = MutableLiveData&lt;<span class="hljs-built_in">Int</span>&gt;()
    
    <span class="hljs-comment">// å‡è®¾è§‚å¯Ÿè€…å½“å‰å¤„äºéæ´»è·ƒçŠ¶æ€</span>
    liveData.observe(<span class="hljs-keyword">this</span>) { value -&gt;
        println(<span class="hljs-string">"Active received: <span class="hljs-variable">$value</span>"</span>)
    }
    
    <span class="hljs-comment">// è¿ç»­è®¾ç½®10ä¸ªå€¼</span>
    repeat(<span class="hljs-number">10</span>) { i -&gt;
        liveData.value = i
    }
    
    <span class="hljs-comment">// å½“è§‚å¯Ÿè€…æ¢å¤æ´»è·ƒæ—¶ï¼Œåªä¼šæ”¶åˆ°æœ€åä¸€ä¸ªå€¼ 9</span>
}
</code></pre>
<h3 data-id="heading-23">2.5 LiveData æ•°æ®é‡æ”¾åŸå› åˆ†æ</h3>
<p>LiveData çš„â€œæ•°æ®é‡æ”¾â€ï¼ˆä¹Ÿå¸¸è¢«ç§°ä¸ºâ€œç²˜æ€§äº‹ä»¶â€æˆ–â€œæ•°æ®å€’çŒâ€ï¼‰ï¼Œå…¶æ ¸å¿ƒæœºåˆ¶åœ¨äºÂ <strong>ç‰ˆæœ¬æ¯”å¯¹</strong>ã€‚</p>
<p><strong>1. æ ¸å¿ƒæœºåˆ¶</strong></p>
<ul>
<li>LiveData å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªÂ <strong>ç‰ˆæœ¬å·ï¼ˆmVersionï¼‰</strong> ï¼Œæ¯æ¬¡é€šè¿‡Â <code>setValue</code>Â æˆ–Â <code>postValue</code>Â æ›´æ–°æ•°æ®æ—¶ï¼Œè¿™ä¸ªç‰ˆæœ¬å·éƒ½ä¼šå¢åŠ ã€‚</li>
<li>æ¯ä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰ä¹Ÿè®°å½•äº†è‡ªå·±æœ€åæ¥æ”¶åˆ°çš„æ•°æ®çš„Â <strong>ç‰ˆæœ¬å·ï¼ˆmLastVersionï¼‰</strong> ï¼Œæ–°è§‚å¯Ÿè€…çš„åˆå§‹ç‰ˆæœ¬å·ä¸º -1ã€‚</li>
<li>å½“ LiveData å°è¯•é€šçŸ¥è§‚å¯Ÿè€…æ—¶ï¼Œä¼šæ£€æŸ¥ï¼š<strong>è§‚å¯Ÿè€…çš„ç‰ˆæœ¬å·æ˜¯å¦å°äº LiveData çš„å½“å‰ç‰ˆæœ¬å·</strong>ã€‚å¦‚æœæ˜¯ï¼Œè¯´æ˜è¿™ä¸ªè§‚å¯Ÿè€…è¿˜æ²¡æœ‰â€œæ¶ˆè´¹â€è¿‡è¿™ä¸ªæœ€æ–°ï¼ˆæˆ–æ›´æ–°ï¼‰çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šç«‹å³å‘å…¶åˆ†å‘å½“å‰æŒæœ‰çš„æ•°æ®ã€‚</li>
</ul>
<p><strong>2. ä¸ºä»€ä¹ˆä¼šå‡ºç°â€œé‡æ”¾â€ï¼Ÿ</strong><br/>
å½“ä¸€ä¸ªæ–°çš„è§‚å¯Ÿè€…å¼€å§‹è§‚å¯Ÿï¼ˆä¾‹å¦‚åœ¨ç•Œé¢é‡å»ºåé‡æ–°è®¢é˜…ï¼‰ï¼Œå¹¶ä¸”å…¶å…³è”çš„ç”Ÿå‘½å‘¨æœŸå¤„äºæ´»è·ƒçŠ¶æ€ï¼ˆSTARTED æˆ– RESUMEDï¼‰æ—¶ï¼Œç”±äºå®ƒçš„åˆå§‹ç‰ˆæœ¬å·ï¼ˆ-1ï¼‰æ°¸è¿œå°äº LiveData çš„å½“å‰ç‰ˆæœ¬å·ï¼ˆ&gt;=0ï¼‰ï¼Œä¸Šè¿°æœºåˆ¶å°±ä¼šè§¦å‘ï¼Œå¯¼è‡´å®ƒ<strong>ç«‹åˆ»æ”¶åˆ°ä¸€ä»½ LiveData å½“å‰æŒæœ‰çš„ã€å¯èƒ½å·²ç»â€œè¿‡æ—¶â€çš„æ•°æ®å‰¯æœ¬</strong>ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œæ•°æ®é‡æ”¾â€ã€‚</p>
<p><strong>3. è®¾è®¡çš„åˆè¡·ï¼šçŠ¶æ€ä¸äº‹ä»¶çš„äºŒåˆ†æ³•</strong><br/>
Google å¦‚æ­¤è®¾è®¡ï¼Œå¹¶éä¸€ä¸ªç¼ºé™·ï¼Œè€Œæ˜¯æœ‰æ„ä¸ºä¹‹ã€‚è¿™éœ€è¦ä»æ•°æ®çš„ä½¿ç”¨åœºæ™¯æ¥ç†è§£ï¼š</p>
<ul>
<li><strong>ä½œä¸ºâ€œçŠ¶æ€â€ï¼ˆStateï¼‰</strong> ï¼šçŠ¶æ€æ˜¯æè¿°å½“å‰æƒ…å†µçš„ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€é¡µé¢åŠ è½½è¿›åº¦ï¼‰ã€‚å¯¹äºçŠ¶æ€ï¼Œæ–°åŠ å…¥çš„è§‚å¯Ÿè€…<strong>ç«‹åˆ»è·çŸ¥æœ€æ–°çš„çŠ¶æ€æ˜¯åˆç†ä¸”å¿…éœ€çš„</strong>ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåè®¢é˜…çš„ UI ç»„ä»¶åº”è¯¥èƒ½ç«‹åˆ»çŸ¥é“å½“å‰æ˜¯å¦å·²ç™»å½•ï¼Œä»¥æ­£ç¡®æ¸²æŸ“ç•Œé¢ã€‚LiveData çš„è¿™ç§â€œç²˜æ€§â€å¯¹äºçŠ¶æ€ç®¡ç†æ¥è¯´æ˜¯<strong>ä¸€ä¸ªä¼˜ç‚¹</strong>ã€‚</li>
<li><strong>ä½œä¸ºâ€œäº‹ä»¶â€ï¼ˆEventï¼‰</strong> ï¼šäº‹ä»¶æ˜¯åªåº”å‘ç”Ÿä¸€æ¬¡ã€ä¸å¯é‡æ’­çš„é€šçŸ¥ï¼ˆå¦‚æ˜¾ç¤ºä¸€ä¸ªçŸ­æš‚çš„æ¶ˆæ¯æç¤ºã€è§¦å‘ä¸€æ¬¡å¯¼èˆªåŠ¨ä½œï¼‰ã€‚å¯¹äºäº‹ä»¶ï¼Œæ–°åŠ å…¥çš„è§‚å¯Ÿè€…<strong>ä¸åº”è¯¥å†æ”¶åˆ°å·²ç»å¤„ç†è¿‡çš„äº‹ä»¶</strong>ã€‚å¦åˆ™å°±ä¼šå¯¼è‡´æ¶ˆæ¯é‡å¤æ˜¾ç¤ºç­‰é”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒLiveData çš„â€œç²˜æ€§â€å°±æˆä¸ºäº†éœ€è¦è§„é¿çš„<strong>é—®é¢˜</strong>ã€‚</li>
</ul>
<p><strong>æ•°æ®é‡æ”¾çš„æºç æ ¹æº</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">considerNotify</span>(<span class="hljs-params">ObserverWrapper observer</span>) {
    <span class="hljs-comment">// ... æ¡ä»¶æ£€æŸ¥</span>
    
    <span class="hljs-comment">// å…³é”®ä»£ç ï¼šç‰ˆæœ¬å·æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (observer.<span class="hljs-property">mLastVersion</span> &gt;= mVersion) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²æ¶ˆè´¹è¿‡ï¼Œä¸é‡å¤åˆ†å‘</span>
    }
    
    <span class="hljs-comment">// æ–°è§‚å¯Ÿè€…æ³¨å†Œæ—¶ï¼š</span>
    <span class="hljs-comment">// observer.mLastVersion = START_VERSION (-1)</span>
    <span class="hljs-comment">// mVersion = å½“å‰ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ 2ï¼Œå› ä¸ºæœ‰å†å²æ•°æ®ï¼‰</span>
    <span class="hljs-comment">// æ¡ä»¶ï¼š-1 &gt;= 2 â†’ falseï¼Œæ‰€ä»¥ä¼šè¿›å…¥åˆ†å‘é€»è¾‘</span>
    
    observer.<span class="hljs-property">mLastVersion</span> = mVersion;
    observer.<span class="hljs-property">mObserver</span>.<span class="hljs-title function_">onChanged</span>((T) mData); <span class="hljs-comment">// æ•°æ®é‡æ”¾å‘ç”Ÿï¼</span>
}
</code></pre>
<p><strong>çŠ¶æ€ vs äº‹ä»¶çš„æœ¬è´¨åŒºåˆ«</strong>ï¼š</p>



































<table><thead><tr><th>ç»´åº¦</th><th>çŠ¶æ€ (State)</th><th>äº‹ä»¶ (Event)</th></tr></thead><tbody><tr><td><strong>æ—¶æ•ˆæ€§</strong></td><td>æŒç»­æœ‰æ•ˆ</td><td>ä¸€æ¬¡æ€§å‘ç”Ÿ</td></tr><tr><td><strong>æ¶ˆè´¹æ€§</strong></td><td>å¯é‡å¤è¯»å–</td><td>åº”è¢«å•æ¬¡æ¶ˆè´¹</td></tr><tr><td><strong>æ–°è§‚å¯Ÿè€…</strong></td><td>åº”è·å¾—æœ€æ–°çŠ¶æ€</td><td>ä¸åº”æ”¶åˆ°å†å²äº‹ä»¶</td></tr><tr><td><strong>æ•°æ®é‡æ”¾</strong></td><td>âœ… åˆç†ï¼ˆçŠ¶æ€æ¢å¤ï¼‰</td><td>âŒ ä¸åˆç†ï¼ˆé‡å¤è§¦å‘ï¼‰</td></tr><tr><td><strong>LiveDataè®¾è®¡</strong></td><td>âœ… å®Œç¾å¥‘åˆ</td><td>âŒ éœ€è¦é¢å¤–å¤„ç†</td></tr></tbody></table>
<p><strong>è®¾è®¡å“²å­¦æ€è€ƒ</strong>ï¼š</p>
<p>LiveData çš„æ•°æ®é‡æ”¾ç‰¹æ€§æ˜¯<strong>æœ‰æ„è®¾è®¡</strong>è€Œéç¼ºé™·ï¼Œå…¶è®¾è®¡ç›®æ ‡åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>çŠ¶æ€ä¸€è‡´æ€§</strong>ï¼šç¡®ä¿æ‰€æœ‰è§‚å¯Ÿè€…çœ‹åˆ°ç›¸åŒçš„æ•°æ®çŠ¶æ€</li>
<li><strong>é…ç½®å˜æ›´æ¢å¤</strong>ï¼šå±å¹•æ—‹è½¬åè‡ªåŠ¨æ¢å¤UIçŠ¶æ€</li>
<li><strong>æ‡’åŠ è½½ä¼˜åŒ–</strong>ï¼šåªåœ¨è§‚å¯Ÿè€…æ´»è·ƒæ—¶æ‰åˆ†å‘æ•°æ®</li>
<li><strong>æ•°æ®é©±åŠ¨UI</strong>ï¼šUIå®Œå…¨ç”±æ•°æ®çŠ¶æ€å†³å®š</li>
</ol>
<p>é—®é¢˜å‡ºç°åœ¨å¼€å‘è€…å°† LiveDataÂ <strong>è¯¯ç”¨äºäº‹ä»¶ä¼ é€’</strong>ï¼Œè€Œ LiveData çš„è®¾è®¡åˆè¡·æ˜¯<strong>çŠ¶æ€å®¹å™¨</strong>ã€‚</p>
<h2 data-id="heading-24">LiveData æ•°æ®é‡æ”¾é—®é¢˜è§£å†³æ–¹æ¡ˆè¯¦è§£ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-25">3.1 Event äº‹ä»¶åŒ…è£…å™¨</h3>
<h4 data-id="heading-26"><strong>æ–¹æ¡ˆåŸç†</strong></h4>
<p>EventåŒ…è£…å™¨æ ¸å¿ƒæ˜¯<strong>æ·»åŠ "å·²æ¶ˆè´¹"çŠ¶æ€æ ‡è®°</strong>ã€‚LiveDataæœ¬èº«åªå…³å¿ƒæ•°æ®å€¼çš„å˜åŒ–ï¼Œä¸åŒºåˆ†"ä¸€æ¬¡æ€§äº‹ä»¶"å’Œ"æŒç»­çŠ¶æ€"ã€‚EventåŒ…è£…å™¨åœ¨æ•°æ®å¤–å±‚åŒ…è£¹ä¸€ä¸ªå¸ƒå°”æ ‡å¿—ä½ï¼Œå½“è§‚å¯Ÿè€…è·å–æ•°æ®æ—¶ï¼Œé€šè¿‡ç‰¹å®šæ–¹æ³•æ£€æŸ¥è¯¥æ ‡å¿—ï¼šå¦‚æœæœªæ¶ˆè´¹åˆ™è¿”å›æ•°æ®å¹¶æ ‡è®°ä¸ºå·²æ¶ˆè´¹ï¼›å¦‚æœå·²æ¶ˆè´¹åˆ™è¿”å›ç©ºã€‚è¿™ç§æ–¹å¼åœ¨åº”ç”¨å±‚å®ç°äº†äº‹ä»¶çš„"å•æ¬¡æ¶ˆè´¹"é€»è¾‘ã€‚</p>
<p><strong>å…³é”®æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>æ•°æ®å°è£…ï¼šå°†åŸå§‹æ•°æ®åŒ…è£…åœ¨Eventç±»ä¸­</li>
<li>çŠ¶æ€è·Ÿè¸ªï¼šå†…éƒ¨ç»´æŠ¤<code>hasBeenHandled</code>æ ‡å¿—</li>
<li>å®‰å…¨è®¿é—®ï¼šæä¾›<code>getContentIfNotHandled()</code>æ–¹æ³•æ§åˆ¶è®¿é—®</li>
<li>è¢«åŠ¨è§¦å‘ï¼šä¾èµ–è§‚å¯Ÿè€…æ­£ç¡®è°ƒç”¨æ¶ˆè´¹æ–¹æ³•</li>
</ul>
<h4 data-id="heading-27"><strong>é€‚ç”¨åœºæ™¯ä¸é™åˆ¶</strong></h4>
<p><strong>æœ€ä½³åœºæ™¯</strong>ï¼šç®€å•çš„Toastã€Snackbaræ¶ˆæ¯ä¼ é€’ï¼Œå•ä¸ªé¡µé¢çš„å¯¼èˆªäº‹ä»¶<br/>
<strong>ä¸»è¦é™åˆ¶</strong>ï¼šå¤šä¸ªè§‚å¯Ÿè€…ç«äº‰æ¶ˆè´¹åŒä¸€äº‹ä»¶å¯èƒ½å‡ºé—®é¢˜ï¼Œéœ€è¦ä¸¥æ ¼éµå¾ªä½¿ç”¨è§„èŒƒ</p>
<hr/>
<h3 data-id="heading-28">3.2 SingleLiveEvent äº‹ä»¶åŒ…è£…å™¨å˜å‹æ–¹æ¡ˆ</h3>
<h4 data-id="heading-29"><strong>æ–¹æ¡ˆåŸç†</strong></h4>
<p>SingleLiveEventé€šè¿‡<strong>å†…éƒ¨åŸå­æ ‡å¿—ä½æ§åˆ¶åˆ†å‘æœºåˆ¶</strong>ã€‚ä¸EventåŒ…è£…å™¨ä¸åŒï¼Œå®ƒä¸æ˜¯åœ¨æ•°æ®å±‚æ ‡è®°æ¶ˆè´¹çŠ¶æ€ï¼Œè€Œæ˜¯åœ¨LiveDataçš„åˆ†å‘é€»è¾‘ä¸­æ§åˆ¶ã€‚å½“æ–°å€¼è®¾ç½®æ—¶ï¼Œæ‰€æœ‰è§‚å¯Ÿè€…æ ‡è®°ä¸º"å¾…é€šçŸ¥"çŠ¶æ€ï¼›æ¯ä¸ªè§‚å¯Ÿè€…è¢«è°ƒç”¨æ—¶æ£€æŸ¥è‡ªèº«çŠ¶æ€ï¼Œå¦‚æœä¸º"å¾…é€šçŸ¥"åˆ™æ‰§è¡Œå›è°ƒå¹¶é‡ç½®çŠ¶æ€ã€‚</p>
<p><strong>åˆ†å‘æ§åˆ¶æµç¨‹</strong>ï¼š</p>
<ol>
<li><code>setValue()</code>æ—¶ï¼Œæ ‡è®°æ‰€æœ‰è§‚å¯Ÿè€…éœ€è¦æ¥æ”¶æ–°å€¼</li>
<li>æ¯ä¸ªè§‚å¯Ÿè€…è¢«è°ƒç”¨æ—¶ï¼ŒåŸå­æ“ä½œæ£€æŸ¥è‡ªèº«çŠ¶æ€</li>
<li>åªæœ‰çŠ¶æ€ä¸º"å¾…é€šçŸ¥"çš„è§‚å¯Ÿè€…æ‰§è¡Œå®é™…å›è°ƒ</li>
<li>çŠ¶æ€ç«‹å³é‡ç½®ï¼Œé˜²æ­¢é‡å¤æ¶ˆè´¹</li>
</ol>
<h4 data-id="heading-30"><strong>çº¿ç¨‹å®‰å…¨ä¸è§‚å¯Ÿè€…ç®¡ç†</strong></h4>
<ul>
<li>ä½¿ç”¨<code>AtomicBoolean</code>ç¡®ä¿å¤šçº¿ç¨‹å®‰å…¨</li>
<li>é€šè¿‡åŒ…è£…è§‚å¯Ÿè€…å®ç°çŠ¶æ€éš”ç¦»</li>
<li>æ”¯æŒ<code>observeForever()</code>å’Œç”Ÿå‘½å‘¨æœŸç»‘å®šè§‚å¯Ÿ</li>
</ul>
<h4 data-id="heading-31"><strong>å˜ä½“æ–¹æ¡ˆï¼šæ”¯æŒå¤šä¸ªè§‚å¯Ÿè€…</strong></h4>
<p>é€šè¿‡ä¸ºæ¯ä¸ªè§‚å¯Ÿè€…ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€æ ‡å¿—ï¼Œå¯ä»¥è®©å¤šä¸ªè§‚å¯Ÿè€…éƒ½æ”¶åˆ°åŒä¸€ä¸ªäº‹ä»¶ã€‚å®ç°æ–¹å¼æ˜¯åœ¨<code>observe()</code>æ—¶åˆ›å»ºè§‚å¯Ÿè€…åŒ…è£…å™¨ï¼Œæ¯ä¸ªåŒ…è£…å™¨æœ‰è‡ªå·±çš„æ¶ˆè´¹çŠ¶æ€ï¼Œ<code>setValue()</code>æ—¶å°†æ‰€æœ‰åŒ…è£…å™¨çŠ¶æ€é‡ç½®ä¸ºå¾…æ¶ˆè´¹ã€‚</p>
<hr/>
<h3 data-id="heading-32">3.3 åå°„ä¿®æ”¹è§‚å¯Ÿè€…ç‰ˆæœ¬å·æ–¹æ¡ˆ</h3>
<h4 data-id="heading-33"><strong>æ–¹æ¡ˆåŸç†</strong></h4>
<p>è¯¥æ–¹æ¡ˆç›´æ¥ä¿®æ”¹LiveDataå†…éƒ¨ç‰ˆæœ¬è¿½è¸ªæœºåˆ¶ã€‚LiveDataé€šè¿‡ä¸¤ä¸ªå…³é”®ç‰ˆæœ¬å·å·¥ä½œï¼š</p>
<ul>
<li><strong>mVersion</strong>ï¼šLiveDataè‡ªèº«çš„ç‰ˆæœ¬ï¼Œæ¯æ¬¡<code>setValue()</code>é€’å¢</li>
<li><strong>mLastVersion</strong>ï¼šæ¯ä¸ªè§‚å¯Ÿè€…è®°å½•çš„"æœ€åæ¥æ”¶ç‰ˆæœ¬"</li>
</ul>
<p>å½“è§‚å¯Ÿè€…æ´»è·ƒæ—¶ï¼ŒLiveDataæ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬å·ï¼šå¦‚æœ<code>mVersion &gt; mLastVersion</code>ï¼Œåˆ™åˆ†å‘æ•°æ®å¹¶æ›´æ–°<code>mLastVersion</code>ã€‚åå°„æ–¹æ¡ˆå°±æ˜¯åœ¨è§‚å¯Ÿè€…æ³¨å†Œåï¼Œç«‹å³å°†å…¶<code>mLastVersion</code>è®¾ç½®ä¸ºå½“å‰<code>mVersion</code>ï¼Œè®©LiveDataè®¤ä¸ºè¯¥è§‚å¯Ÿè€…å·²ç»æ¶ˆè´¹è¿‡æœ€æ–°æ•°æ®ã€‚</p>
<h4 data-id="heading-34"><strong>åå°„æ“ä½œå…·ä½“æ­¥éª¤</strong></h4>
<ol>
<li>è·å–LiveDataçš„<code>mVersion</code>å­—æ®µï¼ˆå½“å‰æ•°æ®ç‰ˆæœ¬ï¼‰</li>
<li>è·å–è§‚å¯Ÿè€…åŒ…è£…ç±»çš„<code>mLastVersion</code>å­—æ®µ</li>
<li>æ–°è§‚å¯Ÿè€…æ³¨å†Œæ—¶ï¼Œé€šè¿‡åå°„å°†å…¶<code>mLastVersion</code>è®¾ç½®ä¸ºLiveDataçš„å½“å‰<code>mVersion</code></li>
<li>LiveDataå†…éƒ¨æ¯”è¾ƒå‘ç°ç‰ˆæœ¬ä¸€è‡´ï¼Œè·³è¿‡æ•°æ®åˆ†å‘</li>
</ol>
<h4 data-id="heading-35"><strong>ç‰ˆæœ¬å…¼å®¹æ€§æŒ‘æˆ˜</strong></h4>
<ul>
<li>Androidä¸åŒç‰ˆæœ¬ä¸­LiveDataå†…éƒ¨ç±»åä¸åŒ</li>
<li>å­—æ®µè®¿é—®æƒé™å¯èƒ½å˜åŒ–</li>
<li>ProGuard/R8æ··æ·†å¯èƒ½é‡å‘½åå­—æ®µ</li>
<li>éœ€è¦å¤šé‡fallbackæœºåˆ¶ä¿è¯ç¨³å®šæ€§</li>
</ul>
<hr/>
<h3 data-id="heading-36">3.4 UnPeekLiveData åå°„æ–¹æ¡ˆä¼˜åŒ–</h3>
<h4 data-id="heading-37"><strong>æ–¹æ¡ˆåŸç†</strong></h4>
<p>UnPeekLiveDataåœ¨åå°„æ–¹æ¡ˆåŸºç¡€ä¸Šè¿›è¡Œ<strong>æ¶æ„ä¼˜åŒ–å’Œç±»å‹å®‰å…¨å¢å¼º</strong>ã€‚ä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç‰ˆæœ¬ç®¡ç†æŠ½è±¡å±‚</strong>ï¼šä¸å†ç›´æ¥æ“ä½œLiveDataå†…éƒ¨ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯å»ºç«‹ç‹¬ç«‹çš„ç‰ˆæœ¬è¿½è¸ªç³»ç»Ÿ</li>
<li><strong>è§‚å¯Ÿè€…ç”Ÿå‘½å‘¨æœŸé›†æˆ</strong>ï¼šæ›´ç²¾ç»†åœ°ç»‘å®šè§‚å¯Ÿè€…çŠ¶æ€ä¸ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>
<li><strong>é˜²è¯¯ç”¨ä¿æŠ¤</strong>ï¼šæ·»åŠ è¿è¡Œæ—¶æ£€æŸ¥ï¼Œé˜²æ­¢ä¸æ­£ç¡®ä½¿ç”¨</li>
<li><strong>å¯é…ç½®ç²˜æ€§ç­–ç•¥</strong>ï¼šæ”¯æŒä¸åŒçº§åˆ«çš„æ•°æ®é‡æ”¾ç­–ç•¥</li>
</ol>
<h4 data-id="heading-38"><strong>æ ¸å¿ƒæœºåˆ¶</strong></h4>
<ul>
<li>åŒ…è£…åŸå§‹LiveDataï¼Œæ‹¦æˆª<code>observe()</code>è°ƒç”¨</li>
<li>ä¸ºæ¯ä¸ªè§‚å¯Ÿè€…åˆ›å»ºä»£ç†åŒ…è£…å™¨</li>
<li>åœ¨ä»£ç†å±‚æ§åˆ¶æ•°æ®åˆ†å‘é€»è¾‘</li>
<li>æ”¯æŒè®¾ç½®é‡æ”¾æ¬¡æ•°é™åˆ¶ï¼ˆ0æ¬¡ã€1æ¬¡ã€Næ¬¡ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-39">3.5 Kotlin Flow æ–¹æ¡ˆ</h3>
<h4 data-id="heading-40"><strong>æ–¹æ¡ˆåŸç†</strong></h4>
<p>Kotlin Flowé€šè¿‡<strong>å“åº”å¼æ•°æ®æµè®¾è®¡</strong>ä»æ ¹æœ¬ä¸Šè§£å†³æ•°æ®é‡æ”¾é—®é¢˜ã€‚Flowçš„æ ¸å¿ƒæ¦‚å¿µæ˜¯"å†·æµ"å’Œ"çƒ­æµ"ï¼š</p>
<ol>
<li>
<p><strong>SharedFlow</strong>ï¼šçƒ­æµï¼Œæ”¯æŒå¤šè®¢é˜…è€…ï¼Œé€šè¿‡<code>replay</code>å‚æ•°æ§åˆ¶é‡æ”¾æ•°é‡</p>
<ul>
<li><code>replay=0</code>ï¼šå®Œå…¨éç²˜æ€§ï¼Œæ–°è®¢é˜…è€…ä¸æ¥æ”¶å†å²æ•°æ®</li>
<li><code>replay=1</code>ï¼šç±»ä¼¼LiveDataï¼Œä¿ç•™æœ€åä¸€ä¸ªå€¼</li>
<li><code>replay=N</code>ï¼šä¿ç•™æœ€è¿‘Nä¸ªå€¼</li>
</ul>
</li>
<li>
<p><strong>StateFlow</strong>ï¼šSharedFlowçš„ç‰¹æ®Šå½¢å¼ï¼Œè‡ªåŠ¨é‡æ”¾æœ€æ–°å€¼</p>
<ul>
<li>ç›¸å½“äº<code>replay=1</code>çš„SharedFlow</li>
<li>æä¾›<code>value</code>å±æ€§æ–¹ä¾¿ç›´æ¥è®¿é—®</li>
</ul>
</li>
</ol>
<h4 data-id="heading-41"><strong>èƒŒå‹å¤„ç†ä¼˜åŠ¿</strong></h4>
<p>FlowåŸç”Ÿæ”¯æŒèƒŒå‹ç­–ç•¥ï¼š</p>
<ul>
<li><strong>Buffer</strong>ï¼šç¼“å†²æœªå¤„ç†çš„å€¼</li>
<li><strong>Conflate</strong>ï¼šåªä¿ç•™æœ€æ–°å€¼</li>
<li><strong>Drop</strong>ï¼šä¸¢å¼ƒæ¥ä¸åŠå¤„ç†çš„å€¼</li>
<li><strong>Suspend</strong>ï¼šæš‚åœå‘å°„ç›´åˆ°æ¶ˆè´¹è€…å°±ç»ª</li>
</ul>
<h4 data-id="heading-42"><strong>ä¸LiveDataçš„å…³é”®åŒºåˆ«</strong></h4>



































<table><thead><tr><th>ç‰¹æ€§</th><th>LiveData</th><th>Kotlin Flow</th></tr></thead><tbody><tr><td>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</td><td>å†…ç½®</td><td>éœ€é€šè¿‡<code>flowWithLifecycle</code>æ‰©å±•</td></tr><tr><td>çº¿ç¨‹è°ƒåº¦</td><td>ä¸»çº¿ç¨‹</td><td>å¯ä»»æ„åˆ‡æ¢Dispatcher</td></tr><tr><td>é‡æ”¾æ§åˆ¶</td><td>å›ºå®šé‡æ”¾æœ€æ–°å€¼</td><td>å¯é…ç½®é‡æ”¾ç­–ç•¥</td></tr><tr><td>æ“ä½œç¬¦ä¸°å¯Œåº¦</td><td>æœ‰é™</td><td>ä¸°å¯Œçš„å‡½æ•°å¼æ“ä½œç¬¦</td></tr><tr><td>é”™è¯¯å¤„ç†</td><td>ç®€å•</td><td>ç»“æ„åŒ–å¹¶å‘é”™è¯¯å¤„ç†</td></tr></tbody></table>
<h4 data-id="heading-43"><strong>å®é™…åº”ç”¨æ¨¡å¼</strong></h4>
<ol>
<li><strong>ViewModelä¸­çš„Flow</strong>ï¼šä½¿ç”¨<code>StateFlow</code>æ›¿ä»£<code>MutableLiveData</code></li>
<li><strong>UIå±‚æ”¶é›†</strong>ï¼šä½¿ç”¨<code>lifecycleScope.launch</code>Â +Â <code>repeatOnLifecycle</code></li>
<li><strong>äº‹ä»¶æ€»çº¿</strong>ï¼šä½¿ç”¨<code>SharedFlow(replay=0)</code>å®ç°éç²˜æ€§äº‹ä»¶</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨<code>StateFlow</code>Â +Â <code>stateIn</code>æ“ä½œç¬¦</li>
</ol>
<h4 data-id="heading-44"><strong>è¿ç§»å»ºè®®</strong></h4>
<ul>
<li>æ–°é¡¹ç›®ç›´æ¥ä½¿ç”¨Flow</li>
<li>ç°æœ‰é¡¹ç›®é€æ­¥è¿ç§»ï¼Œä¸¤è€…å¯å…±å­˜</li>
<li>å¤æ‚æ•°æ®æµåœºæ™¯ä¼˜å…ˆä½¿ç”¨Flow</li>
<li>ç®€å•UIçŠ¶æ€ä¿æŒå¯ç”¨LiveData</li>
</ul>
<hr/>
<h3 data-id="heading-45">æ€»ç»“å¯¹æ¯”</h3>















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ ¸å¿ƒåŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>EventåŒ…è£…å™¨</td><td>æ•°æ®å±‚çŠ¶æ€æ ‡è®°</td><td>ç®€å•æ˜“æ‡‚ï¼Œä¾µå…¥æ€§ä½</td><td>éœ€æ‰‹åŠ¨è°ƒç”¨ï¼Œå¤šè§‚å¯Ÿè€…é—®é¢˜</td><td>ç®€å•äº‹ä»¶ä¼ é€’</td></tr><tr><td>SingleLiveEvent</td><td>åˆ†å‘æ§åˆ¶æœºåˆ¶</td><td>å®˜æ–¹æ¨èï¼Œç›¸å¯¹ç¨³å®š</td><td>å¤šè§‚å¯Ÿè€…æ”¯æŒå¤æ‚</td><td>å•ä¸€è§‚å¯Ÿè€…äº‹ä»¶</td></tr><tr><td>åå°„æ–¹æ¡ˆ</td><td>ä¿®æ”¹å†…éƒ¨ç‰ˆæœ¬å·</td><td>å®Œå…¨é€æ˜ï¼Œä½¿ç”¨ç®€å•</td><td>ç¨³å®šæ€§é£é™©ï¼Œå…¼å®¹æ€§é—®é¢˜</td><td>éœ€è¦å®Œå…¨éç²˜æ€§</td></tr><tr><td>UnPeekLiveData</td><td>å¢å¼ºç‰ˆæœ¬ç®¡ç†</td><td>åŠŸèƒ½ä¸°å¯Œï¼Œé…ç½®çµæ´»</td><td>å®ç°å¤æ‚ï¼Œä¾èµ–ç‰¹å®šåº“</td><td>ä¼ä¸šçº§åº”ç”¨</td></tr><tr><td>Kotlin Flow</td><td>å“åº”å¼æ•°æ®æµ</td><td>åŠŸèƒ½å¼ºå¤§ï¼Œç°ä»£æ¶æ„</td><td>å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œéœ€åç¨‹æ”¯æŒ</td><td>æ–°é¡¹ç›®ï¼Œå¤æ‚æ•°æ®æµ</td></tr></tbody></table>
<h2 data-id="heading-46">4. LiveDataBusï¼šåŸºäºLiveDataçš„Androidäº‹ä»¶æ€»çº¿</h2>
<h3 data-id="heading-47">4.1 LiveDataBusçš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-48"><strong>ä»€ä¹ˆæ˜¯LiveDataBusï¼Ÿ</strong></h4>
<p>LiveDataBusæ˜¯ä¸€ç§<strong>åŸºäºAndroidæ¶æ„ç»„ä»¶LiveDataæ„å»ºçš„äº‹ä»¶æ€»çº¿ç³»ç»Ÿ</strong>ã€‚å®ƒå°†äº‹ä»¶è§†ä¸ºä¸€ç§ç‰¹æ®Šçš„æ•°æ®æµï¼Œåˆ©ç”¨LiveDataçš„è§‚å¯Ÿè€…æ¨¡å¼å®ç°ç»„ä»¶é—´çš„è§£è€¦é€šä¿¡ã€‚ä¸ä¼ ç»Ÿçš„EventBusç›¸æ¯”ï¼ŒLiveDataBusæœ€å¤§çš„ä¼˜åŠ¿åœ¨äº<strong>å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸå®‰å…¨æ€§</strong>ï¼›ä¸ç›´æ¥çš„å›è°ƒæ¥å£ç›¸æ¯”ï¼Œå®ƒæä¾›äº†<strong>æ›´æ¾æ•£çš„è€¦åˆå…³ç³»</strong>ã€‚</p>
<h4 data-id="heading-49"><strong>è®¾è®¡å“²å­¦</strong></h4>
<p>LiveDataBusçš„è®¾è®¡éµå¾ªä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong>ï¼šç»§æ‰¿LiveDataçš„ç‰¹æ€§ï¼Œè‡ªåŠ¨ç®¡ç†è§‚å¯Ÿè€…çš„æ³¨å†Œä¸æ³¨é”€</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡æ³›å‹ä¿è¯äº‹ä»¶æ•°æ®çš„ç±»å‹ä¸€è‡´æ€§</li>
<li><strong>æ¾è€¦åˆé€šä¿¡</strong>ï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹æ— éœ€ç›´æ¥å¼•ç”¨å½¼æ­¤</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ”¯æŒä¸»çº¿ç¨‹å’Œåå°çº¿ç¨‹çš„äº‹ä»¶åˆ†å‘</li>
</ol>
<h4 data-id="heading-50"><strong>ä¸ºä»€ä¹ˆéœ€è¦LiveDataBusï¼Ÿ</strong></h4>
<p>å®ƒæä¾›äº†ä¸€ç§æ—¢èƒ½å®ç°ç»„ä»¶è§£è€¦ï¼Œåˆèƒ½è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸã€é˜²æ­¢å†…å­˜æ³„æ¼å’Œå´©æºƒçš„ç°ä»£åŒ– Android äº‹ä»¶é€šä¿¡æ–¹æ¡ˆï¼Œæ˜¯å®˜æ–¹æ¶æ„åœ¨äº‹ä»¶æ€»çº¿åœºæ™¯ä¸‹çš„è‡ªç„¶å»¶ä¼¸ã€‚ å®ƒè§£å†³äº†ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´å®‰å…¨ã€æ›´é«˜æ•ˆåœ°æ„å»ºå¤æ‚çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-51">4.2 LiveDataBusçš„é€‚ç”¨åœºæ™¯åˆ†æ</h3>
<h4 data-id="heading-52"><strong>é€‚åˆä½¿ç”¨çš„åœºæ™¯</strong></h4>
<ol>
<li>
<p><strong>å…¨å±€çŠ¶æ€å¹¿æ’­</strong></p>
<ul>
<li>ç”¨æˆ·è®¤è¯çŠ¶æ€å˜æ›´</li>
<li>ä¸»é¢˜/è¯­è¨€åˆ‡æ¢é€šçŸ¥</li>
<li>ç½‘ç»œè¿æ¥çŠ¶æ€å˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>è·¨æ¨¡å—è§£è€¦é€šä¿¡</strong></p>
<ul>
<li>ä¸åŒä¸šåŠ¡æ¨¡å—é—´çš„äº‹ä»¶ä¼ é€’</li>
<li>Fragmenté—´éçˆ¶å­å…³ç³»çš„é€šä¿¡</li>
<li>Serviceä¸Activityä¹‹é—´çš„çŠ¶æ€åŒæ­¥</li>
</ul>
</li>
<li>
<p><strong>ä¸€æ¬¡æ€§äº‹ä»¶é€šçŸ¥</strong></p>
<ul>
<li>Toastã€Snackbarç­‰UIæç¤º</li>
<li>é¡µé¢è·³è½¬æŒ‡ä»¤</li>
<li>å¯¹è¯æ¡†æ˜¾ç¤º/éšè—</li>
</ul>
</li>
</ol>
<h4 data-id="heading-53"><strong>ä¸é€‚åˆä½¿ç”¨çš„åœºæ™¯</strong></h4>
<ol>
<li><strong>é¡µé¢å†…éƒ¨çŠ¶æ€ç®¡ç†</strong>ï¼šåº”ç»§ç»­ä½¿ç”¨ViewModel + LiveDataæ–¹æ¡ˆ</li>
<li><strong>ç´§å¯†è€¦åˆçš„çˆ¶å­ç»„ä»¶é€šä¿¡</strong>ï¼šåº”ä½¿ç”¨æ¥å£å›è°ƒæˆ–Fragment Result API</li>
<li><strong>éœ€è¦ä¸¥æ ¼æº¯æºçš„äº‹ä»¶æµ</strong>ï¼šLiveDataBuséš¾ä»¥è¿½è¸ªäº‹ä»¶æ¥æº</li>
</ol>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šLiveDataBusåº”ä½œä¸º<strong>å…¨å±€äº‹ä»¶çš„è¡¥å……æ–¹æ¡ˆ</strong>ï¼Œè€Œéæ›¿ä»£MVVMæ¶æ„ä¸­çš„ViewModelã€‚</p>
<h3 data-id="heading-54">4.3 LiveDataBusçš„å®ç°åŸç†è¯¦è§£</h3>
<h4 data-id="heading-55"><strong>æ ¸å¿ƒæ¶æ„è®¾è®¡</strong></h4>
<p>LiveDataBusçš„æ ¸å¿ƒå®ç°åŸºäºä¸€ä¸ªç®€å•çš„<strong>å“ˆå¸Œè¡¨æ˜ å°„æ¨¡å‹</strong>ï¼š</p>
<p>text</p>
<pre><code class="hljs language-arduino" lang="arduino">äº‹ä»¶åï¼ˆ<span class="hljs-type">String</span>ï¼‰ â†’ å¯¹åº”çš„LiveDataå®ä¾‹
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>æŒ‰éœ€åˆ›å»º</strong>ï¼šäº‹ä»¶é€šé“åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶åˆ›å»º</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šé€šè¿‡æ³›å‹ä¿è¯äº‹ä»¶æ•°æ®ç±»å‹</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šç»§æ‰¿LiveDataçš„è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
</ol>
<h4 data-id="heading-56"><strong>å…·ä½“å®ç°ä»£ç è§£æ</strong></h4>
<p>java</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">public</span> final <span class="hljs-keyword">class</span> LiveDataBus {
    // äº‹ä»¶å - LiveData å“ˆå¸Œè¡¨
    <span class="hljs-keyword">private</span> final Map&lt;<span class="hljs-type">String</span>, BusMutableLiveData&lt;<span class="hljs-type">Object</span>&gt;&gt; bus;
    
    // æ ¹æ®äº‹ä»¶åæ˜ å°„LiveData
    <span class="hljs-keyword">public</span> &lt;T&gt; MutableLiveData&lt;T&gt; <span class="hljs-keyword">with</span>(<span class="hljs-type">String</span> <span class="hljs-keyword">key</span>, <span class="hljs-keyword">Class</span>&lt;T&gt; type) {
        <span class="hljs-keyword">if</span> (!bus.containsKey(<span class="hljs-keyword">key</span>)) {
            bus.put(<span class="hljs-keyword">key</span>, <span class="hljs-built_in">new</span> BusMutableLiveData&lt;&gt;());
        }
        <span class="hljs-keyword">return</span> (MutableLiveData&lt;T&gt;) bus.<span class="hljs-keyword">get</span>(<span class="hljs-keyword">key</span>);
    }
}
</code></pre>
<h4 data-id="heading-57"><strong>éç²˜æ€§äº‹ä»¶å¤„ç†æœºåˆ¶</strong></h4>
<p>ä¸ºäº†è§£å†³LiveDataé»˜è®¤çš„"ç²˜æ€§"ç‰¹æ€§ï¼ˆæ–°è§‚å¯Ÿè€…ä¼šç«‹å³æ”¶åˆ°æœ€åä¸€æ¬¡çš„å€¼ï¼‰ï¼ŒLiveDataBusé‡‡ç”¨äº†<strong>åå°„ä¿®æ”¹ç‰ˆæœ¬å·</strong>çš„æ–¹æ¡ˆã€‚</p>
<p><strong>LiveDataå†…éƒ¨ç‰ˆæœ¬æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>LiveDataç»´æŠ¤ä¸€ä¸ª<code>mVersion</code>ï¼ˆæ•°æ®ç‰ˆæœ¬å·ï¼‰</li>
<li>æ¯ä¸ªè§‚å¯Ÿè€…è®°å½•è‡ªå·±æœ€åæ¥æ”¶çš„ç‰ˆæœ¬<code>mLastVersion</code></li>
<li>å½“<code>mVersion &gt; mLastVersion</code>æ—¶ï¼Œåˆ†å‘æ•°æ®</li>
</ul>
<p><strong>åå°„ç»•è¿‡ç²˜æ€§</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hook</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Observer&lt;T&gt; observer)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// è·å–è§‚å¯Ÿè€…åŒ…è£…ç±»çš„mLastVersionå­—æ®µ</span>
    <span class="hljs-type">Field</span> <span class="hljs-variable">fieldLastVersion</span> <span class="hljs-operator">=</span> classObserverWrapper.getDeclaredField(<span class="hljs-string">"mLastVersion"</span>);
    fieldLastVersion.setAccessible(<span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// è·å–LiveDataçš„mVersion</span>
    <span class="hljs-type">Field</span> <span class="hljs-variable">fieldVersion</span> <span class="hljs-operator">=</span> classLiveData.getDeclaredField(<span class="hljs-string">"mVersion"</span>);
    fieldVersion.setAccessible(<span class="hljs-literal">true</span>);
    <span class="hljs-type">Object</span> <span class="hljs-variable">objectVersion</span> <span class="hljs-operator">=</span> fieldVersion.get(<span class="hljs-built_in">this</span>);
    
    <span class="hljs-comment">// å°†è§‚å¯Ÿè€…çš„æœ€åç‰ˆæœ¬è®¾ç½®ä¸ºLiveDataçš„å½“å‰ç‰ˆæœ¬</span>
    fieldLastVersion.set(objectWrapper, objectVersion);
}
</code></pre>
<p>è¿™æ ·æ–°æ³¨å†Œçš„è§‚å¯Ÿè€…å°±ä¸ä¼šæ”¶åˆ°å†å²æ•°æ®ï¼Œå®ç°äº†<strong>éç²˜æ€§äº‹ä»¶</strong>ã€‚</p>
<h4 data-id="heading-58"><strong>è§‚å¯Ÿè€…åŒ…è£…æœºåˆ¶</strong></h4>
<p>LiveDataBusé€šè¿‡<code>ObserverWrapper</code>åŒ…è£…åŸå§‹è§‚å¯Ÿè€…ï¼Œå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é˜²æ­¢ç«‹å³å›è°ƒ</strong>ï¼šé€šè¿‡æ£€æŸ¥çº¿ç¨‹è°ƒç”¨æ ˆï¼Œé¿å…<code>observeForever()</code>æ—¶çš„ç«‹å³å›è°ƒ</li>
<li><strong>ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šç¡®ä¿æ‰€æœ‰è§‚å¯Ÿè€…éƒ½éµå¾ªç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸè§„åˆ™</li>
<li><strong>å®‰å…¨çš„è§‚å¯Ÿè€…ç§»é™¤</strong>ï¼šæ­£ç¡®å¤„ç†è§‚å¯Ÿè€…çš„æ³¨å†Œå’Œæ³¨é”€</li>
</ol>
<h3 data-id="heading-59">4.4 å­—ç¬¦ä¸²äº‹ä»¶ååŠå…¶ç¼ºé™·</h3>
<h4 data-id="heading-60"><strong>ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²äº‹ä»¶åï¼Ÿ</strong></h4>
<p>å­—ç¬¦ä¸²äº‹ä»¶åæ˜¯åŸºç¡€ç‰ˆLiveDataBusä¸­ä½¿ç”¨<strong>å­—ç¬¦ä¸²ä½œä¸ºäº‹ä»¶å”¯ä¸€æ ‡è¯†ç¬¦</strong>çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼š</p>
<p>java</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å®šä¹‰å­—ç¬¦ä¸²äº‹ä»¶å</span>
public <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> USER_LOGIN_EVENT = <span class="hljs-string">"user_login"</span>;

<span class="hljs-comment">// ä½¿ç”¨äº‹ä»¶åå‘é€äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>().<span class="hljs-keyword">with</span>(USER_LOGIN_EVENT).postValue(currentUser);

<span class="hljs-comment">// æ¥æ”¶äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .<span class="hljs-keyword">with</span>(USER_LOGIN_EVENT, User.<span class="hljs-keyword">class</span>)
    .observe(<span class="hljs-keyword">this</span>, user -&gt; {
        <span class="hljs-comment">// å¤„ç†ç™»å½•äº‹ä»¶</span>
    });
</code></pre>
<h4 data-id="heading-61"><strong>å­—ç¬¦ä¸²äº‹ä»¶åçš„ç¼ºé™·</strong></h4>
<ol>
<li>
<p><strong>å‘½åå†²çªé£é™©</strong>ï¼šä¸åŒæ¨¡å—å¯èƒ½å®šä¹‰ç›¸åŒçš„äº‹ä»¶å</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ¨¡å—Aå®šä¹‰çš„äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">with</span>(<span class="hljs-string">"message_received"</span>)  <span class="hljs-comment">// æ¨¡å—Açš„æ¶ˆæ¯æ¥æ”¶äº‹ä»¶</span>

<span class="hljs-comment">// æ¨¡å—Bä¹Ÿå®šä¹‰äº†åŒåäº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">with</span>(<span class="hljs-string">"message_received"</span>)  <span class="hljs-comment">// æ¨¡å—Bçš„å¦ä¸€ä¸ªæ¶ˆæ¯æ¥æ”¶äº‹ä»¶</span>
<span class="hljs-comment">// ä¸¤ä¸ªæ¨¡å—å®é™…ä¸Šåœ¨ä½¿ç”¨åŒä¸€ä¸ªLiveDataé€šé“</span>
</code></pre>
</li>
<li>
<p><strong>ç±»å‹ä¸å®‰å…¨</strong>ï¼šç¼–è¯‘æ—¶æ— æ³•æ£€æŸ¥äº‹ä»¶æ•°æ®ç±»å‹</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å‘é€æ—¶ä½¿ç”¨String</span>
LiveDataBus.<span class="hljs-keyword">get</span>().<span class="hljs-keyword">with</span>(<span class="hljs-string">"event_name"</span>).postValue(<span class="hljs-string">"å­—ç¬¦ä¸²æ•°æ®"</span>)

<span class="hljs-comment">// æ¥æ”¶æ—¶é”™è¯¯åœ°æœŸå¾…Intç±»å‹</span>
LiveDataBus.<span class="hljs-keyword">get</span>().<span class="hljs-keyword">with</span>(<span class="hljs-string">"event_name"</span>, Int::<span class="hljs-keyword">class</span>.java)
    .observe(<span class="hljs-keyword">this</span>) { intValue -&gt;
        <span class="hljs-comment">// è¿è¡Œæ—¶å´©æºƒï¼šClassCastException</span>
        <span class="hljs-comment">// å®é™…æ¥æ”¶åˆ°çš„æ˜¯Stringï¼Œä¸æ˜¯Int</span>
    }
</code></pre>
</li>
<li>
<p><strong>é‡æ„å›°éš¾</strong>ï¼šå­—ç¬¦ä¸²å¸¸é‡æ•£è½åœ¨ä»£ç å„å¤„ï¼Œé‡å‘½åæ—¶éœ€è¦å…¨å±€æœç´¢æ›¿æ¢</p>
</li>
<li>
<p><strong>ç¼ºä¹æ–‡æ¡£å’Œçº¦æŸ</strong>ï¼šå­—ç¬¦ä¸²æ²¡æœ‰ç±»å‹ä¿¡æ¯ï¼Œæ–°å¼€å‘è€…éš¾ä»¥ç†è§£äº‹ä»¶çš„å«ä¹‰å’Œä½¿ç”¨æ–¹å¼</p>
</li>
</ol>
<h3 data-id="heading-62">4.5 åŠ å¼ºäº‹ä»¶çº¦æŸï¼šä»å­—ç¬¦ä¸²åˆ°æ¥å£å®šä¹‰</h3>
<h4 data-id="heading-63"><strong>è§£å†³æ–¹æ¡ˆä¸€ï¼šæ¥å£å®šä¹‰+åŠ¨æ€ä»£ç†</strong></h4>
<p>ç¾å›¢ModularEventBusæ–¹æ¡ˆæå‡ºä½¿ç”¨<strong>æ¥å£å®šä¹‰äº‹ä»¶å¥‘çº¦</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LiveDataBus</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;E&gt;</span> <span class="hljs-title">of</span><span class="hljs-params">(clz: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">E</span>&gt;)</span></span>: E {
        <span class="hljs-comment">// è¦æ±‚å¿…é¡»æ˜¯æ¥å£ä¸”ä¸ç»§æ‰¿å…¶ä»–æ¥å£</span>
        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(clz.classLoader, arrayOf(clz)) { _, method, _ -&gt;
            <span class="hljs-comment">// ä½¿ç”¨"æ¥å£å_æ–¹æ³•å"ä½œä¸ºäº‹ä»¶æ ‡è¯†ç¬¦</span>
            <span class="hljs-keyword">val</span> eventName = <span class="hljs-string">"<span class="hljs-subst">${clz.canonicalName}</span>_<span class="hljs-subst">${method.name}</span>"</span>
            <span class="hljs-comment">// è·å–æ–¹æ³•è¿”å›ç±»å‹çš„æ³›å‹å‚æ•°ï¼ˆäº‹ä»¶æ•°æ®ç±»å‹ï¼‰</span>
            <span class="hljs-keyword">val</span> eventType = <span class="hljs-comment">// ä»method.genericReturnTypeè§£æ</span>
            <span class="hljs-keyword">get</span>().with(eventName, eventType)
        }
    }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰äº‹ä»¶æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserEvents</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onUserLogin</span><span class="hljs-params">()</span></span>: LiveData&lt;User&gt;
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onUserLogout</span><span class="hljs-params">()</span></span>: LiveData&lt;<span class="hljs-built_in">Unit</span>&gt;
}

<span class="hljs-comment">// å‘é€äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>().of(UserEvents::<span class="hljs-keyword">class</span>.java)
    .onUserLogin()
    .postValue(currentUser)

<span class="hljs-comment">// æ¥æ”¶äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>().of(UserEvents::<span class="hljs-keyword">class</span>.java)
    .onUserLogin()
    .observe(<span class="hljs-keyword">this</span>) { user -&gt;
        <span class="hljs-comment">// å¤„ç†ç™»å½•äº‹ä»¶</span>
    }
</code></pre>
<h4 data-id="heading-64"><strong>è§£å†³æ–¹æ¡ˆäºŒï¼šAPTæ³¨è§£å¤„ç†å™¨ç”Ÿæˆæ¥å£</strong></h4>
<p>æ›´è¿›ä¸€æ­¥çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨<strong>æ³¨è§£å¤„ç†å™¨åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆäº‹ä»¶æ¥å£</strong>ï¼š</p>
<ol>
<li>
<p><strong>å®šä¹‰æ³¨è§£å’Œå¸¸é‡</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ModuleEvents(module = "demo")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoEvents</span> {
    <span class="hljs-meta">@EventType(String.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">EVENT1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"event1"</span>;
    
    <span class="hljs-meta">@EventType(TestEventBean.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">EVENT2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"event2"</span>;
}
</code></pre>
</li>
<li>
<p><strong>APTç”Ÿæˆæ¥å£</strong>ï¼š</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">EventsDefineOfDemoEvents</span> {
    <span class="hljs-function">Observable&lt;Object&gt; <span class="hljs-title">EVENT1</span>()</span>;
    <span class="hljs-function">Observable&lt;TestEventBean&gt; <span class="hljs-title">EVENT2</span>()</span>;
}
</code></pre>
</li>
<li>
<p><strong>ç±»å‹å®‰å…¨çš„ä½¿ç”¨</strong>ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‘é€äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .of(EventsDefineOfDemoEvents::<span class="hljs-keyword">class</span>.java)
    .EVENT1()
    .post(<span class="hljs-string">"äº‹ä»¶æ•°æ®"</span>)

<span class="hljs-comment">// æ¥æ”¶äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .of(EventsDefineOfDemoEvents::<span class="hljs-keyword">class</span>.java)
    .EVENT1()
    .observe(<span class="hljs-keyword">this</span>) { <span class="hljs-keyword">data</span> -&gt;
        <span class="hljs-comment">// å¤„ç†äº‹ä»¶</span>
    }
</code></pre>
</li>
</ol>
<h4 data-id="heading-65"><strong>æ–¹æ¡ˆå¯¹æ¯”</strong></h4>









































<table><thead><tr><th>ç‰¹æ€§</th><th>å­—ç¬¦ä¸²äº‹ä»¶å</th><th>æ¥å£+åŠ¨æ€ä»£ç†</th><th>APTç”Ÿæˆæ¥å£</th></tr></thead><tbody><tr><td>ç±»å‹å®‰å…¨</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td>ç¼–è¯‘æ—¶æ£€æŸ¥</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ€§èƒ½å½±å“</td><td>æ— </td><td>åŠ¨æ€ä»£ç†å¼€é”€</td><td>ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œæ— è¿è¡Œæ—¶å¼€é”€</td></tr><tr><td>ä»£ç å¯è¯»æ€§</td><td>å·®</td><td>å¥½</td><td>ä¼˜ç§€</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>é«˜</td><td>ä¸­</td><td>ä½</td></tr></tbody></table>
<h3 data-id="heading-66">4.6 LiveDataBusçš„å®æˆ˜åº”ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-67"><strong>åŸºæœ¬ä½¿ç”¨æ–¹å¼</strong></h4>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// 1. å®šä¹‰äº‹ä»¶å¸¸é‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EventConstants</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> final String USER_LOGIN = <span class="hljs-string">"user_login"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> final String SHOW_TOAST = <span class="hljs-string">"show_toast"</span>;
}

<span class="hljs-comment">// 2. å‘é€äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .<span class="hljs-keyword">with</span>(EventConstants.USER_LOGIN)
    .postValue(currentUser);

<span class="hljs-comment">// 3. æ¥æ”¶äº‹ä»¶</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .<span class="hljs-keyword">with</span>(EventConstants.USER_LOGIN, User.<span class="hljs-keyword">class</span>)
    .observe(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">new</span> Observer&lt;User&gt;() {
        @Override
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onChanged</span>(<span class="hljs-params">User user</span>)</span> {
            <span class="hljs-comment">// æ›´æ–°UI</span>
        }
    });

<span class="hljs-comment">// 4. å‘é€Toastæ¶ˆæ¯</span>
LiveDataBus.<span class="hljs-keyword">get</span>()
    .<span class="hljs-keyword">with</span>(EventConstants.SHOW_TOAST)
    .postValue(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>);
</code></pre>
<h4 data-id="heading-68"><strong>é«˜çº§å°è£…ä½¿ç”¨</strong></h4>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å°è£…ä¸€ä¸ªæ›´æ˜“ç”¨çš„LiveDataBuså·¥å…·ç±»</span>
<span class="hljs-keyword">object</span> EventBus {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> bus = LiveDataBus.<span class="hljs-keyword">get</span>()
    
    <span class="hljs-comment">// ç”¨æˆ·ç›¸å…³äº‹ä»¶</span>
    <span class="hljs-keyword">object</span> User {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGIN = <span class="hljs-string">"user_login"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGOUT = <span class="hljs-string">"user_logout"</span>
        
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">()</span></span>: MutableLiveData&lt;User&gt; = bus.with(LOGIN, User::<span class="hljs-keyword">class</span>.java)
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">logout</span><span class="hljs-params">()</span></span>: MutableLiveData&lt;<span class="hljs-built_in">Unit</span>&gt; = bus.with(LOGOUT, <span class="hljs-built_in">Unit</span>::<span class="hljs-keyword">class</span>.java)
    }
    
    <span class="hljs-comment">// ç½‘ç»œç›¸å…³äº‹ä»¶</span>
    <span class="hljs-keyword">object</span> Network {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CONNECTED = <span class="hljs-string">"network_connected"</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> DISCONNECTED = <span class="hljs-string">"network_disconnected"</span>
        
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">connected</span><span class="hljs-params">()</span></span>: MutableLiveData&lt;<span class="hljs-built_in">Boolean</span>&gt; = bus.with(CONNECTED, <span class="hljs-built_in">Boolean</span>::<span class="hljs-keyword">class</span>.java)
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">disconnected</span><span class="hljs-params">()</span></span>: MutableLiveData&lt;<span class="hljs-built_in">Unit</span>&gt; = bus.with(DISCONNECTED, <span class="hljs-built_in">Unit</span>::<span class="hljs-keyword">class</span>.java)
    }
}

<span class="hljs-comment">// ä½¿ç”¨å°è£…åçš„EventBus</span>
<span class="hljs-comment">// å‘é€ç™»å½•äº‹ä»¶</span>
EventBus.User.login().postValue(currentUser)

<span class="hljs-comment">// æ¥æ”¶ç½‘ç»œçŠ¶æ€å˜åŒ–</span>
EventBus.Network.connected().observe(<span class="hljs-keyword">this</span>) { isConnected -&gt;
    updateNetworkStatus(isConnected)
}
</code></pre>
<h3 data-id="heading-69">4.7 LiveDataBusçš„ä¼˜ç¼ºç‚¹æ€»ç»“</h3>
<h4 data-id="heading-70"><strong>ä¼˜ç‚¹</strong></h4>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong>ï¼šè‡ªåŠ¨ç®¡ç†è§‚å¯Ÿè€…çš„ç”Ÿå‘½å‘¨æœŸï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ”¯æŒä¸»çº¿ç¨‹å®‰å…¨çš„<code>setValue()</code>å’Œåå°çº¿ç¨‹å®‰å…¨çš„<code>postValue()</code></li>
<li><strong>ä¸Androidæ¶æ„ç»„ä»¶ç”Ÿæ€æ•´åˆ</strong>ï¼šä¸ViewModelã€Lifecycleæ— ç¼åä½œ</li>
<li><strong>å­¦ä¹ æˆæœ¬ä½</strong>ï¼šå¤§å¤šæ•°Androidå¼€å‘è€…å·²ç»ç†Ÿæ‚‰LiveData</li>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šæ”¯æŒå¤šç§äº‹ä»¶çº¦æŸæ–¹æ¡ˆï¼Œä»ç®€å•åˆ°å¤æ‚</li>
</ol>
<h4 data-id="heading-71"><strong>ç¼ºç‚¹</strong></h4>
<ol>
<li><strong>äº‹ä»¶æº¯æºå›°éš¾</strong>ï¼šéš¾ä»¥è¿½è¸ªäº‹ä»¶çš„å‘é€æºå¤´</li>
<li><strong>å­—ç¬¦ä¸²äº‹ä»¶åçš„é—®é¢˜</strong>ï¼šå‘½åå†²çªã€ç±»å‹ä¸å®‰å…¨ç­‰</li>
<li><strong>åå°„æ–¹æ¡ˆçš„é£é™©</strong>ï¼šç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜å’Œæ€§èƒ½å¼€é”€</li>
<li><strong>è¿‡åº¦ä½¿ç”¨é£é™©</strong>ï¼šå®¹æ˜“æ»¥ç”¨ï¼Œç ´åæ¶æ„çš„æ¸…æ™°æ€§</li>
</ol>
<h3 data-id="heading-72">4.8 æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”</h3>
<h4 data-id="heading-73"><strong>LiveDataBus vs EventBus</strong></h4>



































<table><thead><tr><th>ç‰¹æ€§</th><th>LiveDataBus</th><th>EventBus</th></tr></thead><tbody><tr><td>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</td><td>âœ… å†…ç½®</td><td>âŒ éœ€è¦æ‰‹åŠ¨å¤„ç†</td></tr><tr><td>çº¿ç¨‹æ¨¡å‹</td><td>ä¸»çº¿ç¨‹å®‰å…¨</td><td>éœ€è¦æŒ‡å®šçº¿ç¨‹æ¨¡å¼</td></tr><tr><td>ç²˜æ€§äº‹ä»¶</td><td>å¯é…ç½®</td><td>é»˜è®¤ç²˜æ€§</td></tr><tr><td>ç±»å‹å®‰å…¨</td><td>å¼ºç±»å‹æ”¯æŒ</td><td>åŸºäºObject</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>ä½ï¼ˆåŸºäºLiveDataï¼‰</td><td>ä¸­</td></tr></tbody></table>
<h4 data-id="heading-74"><strong>LiveDataBus vs Kotlin Flow SharedFlow</strong></h4>



































<table><thead><tr><th>ç‰¹æ€§</th><th>LiveDataBus</th><th>SharedFlow</th></tr></thead><tbody><tr><td>ç”Ÿå‘½å‘¨æœŸé›†æˆ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… é€šè¿‡æ‰©å±•å‡½æ•°</td></tr><tr><td>èƒŒå‹å¤„ç†</td><td>âŒ æ— </td><td>âœ… å®Œæ•´æ”¯æŒ</td></tr><tr><td>æ“ä½œç¬¦ä¸°å¯Œåº¦</td><td>æœ‰é™</td><td>éå¸¸ä¸°å¯Œ</td></tr><tr><td>åç¨‹è¦æ±‚</td><td>å¯é€‰</td><td>å¿…é¡»</td></tr><tr><td>è·¨æ¨¡å—é€šä¿¡</td><td>âœ… é€‚åˆ</td><td>âœ… é€‚åˆ</td></tr></tbody></table>
<h3 data-id="heading-75">5. å¸¸è§é¢è¯•é¢˜</h3>
<h4 data-id="heading-76">5.1 åŸºç¡€æ¦‚å¿µç±»</h4>
<p><strong>1. LiveDataçš„æ•°æ®é‡æ”¾é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Ÿ</strong></p>
<p>ç­”ï¼šLiveDataçš„æ•°æ®é‡æ”¾é—®é¢˜æ˜¯æŒ‡å½“æ–°çš„è§‚å¯Ÿè€…æ³¨å†Œæ—¶ï¼Œå®ƒä¼šç«‹å³æ”¶åˆ°LiveDataä¸­ä¿å­˜çš„æœ€åä¸€ä¸ªå€¼ï¼ˆæœ€æ–°æ•°æ®ï¼‰ã€‚è¿™æ˜¯å› ä¸ºLiveDataè®¾è®¡ä¸Šæ˜¯çŠ¶æ€æŒæœ‰è€…ï¼Œè€Œä¸æ˜¯äº‹ä»¶å‘å°„å™¨ã€‚å¯¹äºUIçŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€åŠ è½½çŠ¶æ€ï¼‰ï¼Œè¿™ç§"ç²˜æ€§"æ˜¯åˆç†çš„ï¼›ä½†å¯¹äºä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆå¦‚Toastã€å¯¼èˆªï¼‰ï¼Œè¿™ä¼šå¯¼è‡´é—®é¢˜ï¼Œæ¯”å¦‚åŒä¸€ä¸ªToastå¯èƒ½æ˜¾ç¤ºå¤šæ¬¡ã€‚</p>
<p><strong>2. LiveDataå’ŒEventBusåœ¨äº‹ä»¶ä¼ é€’ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>ç­”ï¼šä¸»è¦åŒºåˆ«æœ‰å››ç‚¹ï¼š</p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šLiveDataè‡ªåŠ¨ç®¡ç†è§‚å¯Ÿè€…ç”Ÿå‘½å‘¨æœŸï¼ŒEventBuséœ€è¦æ‰‹åŠ¨æ³¨å†Œ/æ³¨é”€</li>
<li><strong>çº¿ç¨‹æ¨¡å‹</strong>ï¼šLiveDataé»˜è®¤ä¸»çº¿ç¨‹å®‰å…¨ï¼ŒEventBuséœ€è¦æŒ‡å®šçº¿ç¨‹æ¨¡å¼</li>
<li><strong>è®¾è®¡ç†å¿µ</strong>ï¼šLiveDataæ˜¯çŠ¶æ€æŒæœ‰è€…ï¼ŒEventBusæ˜¯äº‹ä»¶å‘å°„å™¨</li>
<li><strong>ç²˜æ€§å¤„ç†</strong>ï¼šLiveDataé»˜è®¤ç²˜æ€§ï¼ŒEventBuså¯é€‰æ‹©ç²˜æ€§/éç²˜æ€§</li>
</ol>
<p><strong>3. ä»€ä¹ˆæ˜¯"ç²˜æ€§äº‹ä»¶"å’Œ"éç²˜æ€§äº‹ä»¶"ï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ul>
<li><strong>ç²˜æ€§äº‹ä»¶</strong>ï¼šæ–°è§‚å¯Ÿè€…æ³¨å†Œåä¼šç«‹å³æ”¶åˆ°æœ€åä¸€æ¬¡çš„äº‹ä»¶å€¼ï¼ˆLiveDataé»˜è®¤è¡Œä¸ºï¼‰</li>
<li><strong>éç²˜æ€§äº‹ä»¶</strong>ï¼šåªæœ‰æ³¨å†Œåå‘ç”Ÿçš„äº‹ä»¶æ‰ä¼šè¢«æ¥æ”¶ï¼Œä¸ä¼šæ”¶åˆ°å†å²äº‹ä»¶</li>
</ul>
<h4 data-id="heading-77">5.2 è§£å†³æ–¹æ¡ˆç±»</h4>
<p><strong>4. EventåŒ…è£…å™¨æ–¹æ¡ˆçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p>
<p>ç­”ï¼šEventåŒ…è£…å™¨é€šè¿‡ç»™æ•°æ®åŒ…è£¹ä¸€ä¸ª"æ˜¯å¦å·²æ¶ˆè´¹"çš„æ ‡å¿—ä½æ¥è§£å†³é‡æ”¾é—®é¢˜ã€‚</p>
<ul>
<li><strong>å·¥ä½œåŸç†</strong>ï¼šå°†æ•°æ®å°è£…åœ¨Eventç±»ä¸­ï¼Œå†…éƒ¨ç»´æŠ¤<code>hasBeenHandled</code>æ ‡å¿—ï¼Œé€šè¿‡<code>getContentIfNotHandled()</code>æ–¹æ³•æ§åˆ¶è®¿é—®</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œç±»å‹å®‰å…¨ï¼Œä¾µå…¥æ€§ä½</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦æ‰‹åŠ¨è°ƒç”¨æ¶ˆè´¹æ–¹æ³•ï¼Œå¤šä¸ªè§‚å¯Ÿè€…æ—¶å¯èƒ½ç«äº‰</li>
</ul>
<p><strong>5. SingleLiveEventä¸ºä»€ä¹ˆåªé€‚åˆå•ä¸ªè§‚å¯Ÿè€…ï¼Ÿå¦‚ä½•æ”¹è¿›ï¼Ÿ</strong></p>
<p>ç­”ï¼šSingleLiveEventå†…éƒ¨ä½¿ç”¨åŸå­æ ‡å¿—ä½æ§åˆ¶äº‹ä»¶åˆ†å‘ï¼Œå½“ç¬¬ä¸€ä¸ªè§‚å¯Ÿè€…æ¶ˆè´¹åæ ‡å¿—ä½å°±è¢«é‡ç½®ï¼Œåç»­è§‚å¯Ÿè€…æ— æ³•å†æ¶ˆè´¹ã€‚æ”¹è¿›æ–¹æ³•æ˜¯<strong>ä¸ºæ¯ä¸ªè§‚å¯Ÿè€…ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€æ ‡å¿—</strong>ï¼Œä½¿ç”¨ConcurrentHashMapå­˜å‚¨æ¯ä¸ªè§‚å¯Ÿè€…çš„æ¶ˆè´¹çŠ¶æ€ã€‚</p>
<p><strong>6. åå°„æ–¹æ¡ˆä¿®æ”¹ç‰ˆæœ¬å·çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ul>
<li>
<p><strong>åŸç†</strong>ï¼šLiveDataå†…éƒ¨é€šè¿‡ç‰ˆæœ¬å·ï¼ˆmVersionï¼‰å’Œè§‚å¯Ÿè€…çš„æœ€åç‰ˆæœ¬ï¼ˆmLastVersionï¼‰æ§åˆ¶æ•°æ®åˆ†å‘ã€‚åå°„æ–¹æ¡ˆå°±æ˜¯ä¿®æ”¹è§‚å¯Ÿè€…çš„mLastVersionï¼Œè®©å…¶ç­‰äºLiveDataçš„mVersion</p>
</li>
<li>
<p><strong>é£é™©</strong>ï¼š</p>
<ol>
<li>å…¼å®¹æ€§é—®é¢˜ï¼šä¸åŒAndroidç‰ˆæœ¬å†…éƒ¨å®ç°å¯èƒ½ä¸åŒ</li>
<li>æ€§èƒ½å½±å“ï¼šåå°„è°ƒç”¨æœ‰æ€§èƒ½å¼€é”€</li>
<li>ç»´æŠ¤é£é™©ï¼šåç»­Androidç‰ˆæœ¬æ›´æ–°å¯èƒ½ç ´åæ–¹æ¡ˆ</li>
</ol>
</li>
</ul>
<h4 data-id="heading-78">5.3 æ¶æ„è®¾è®¡ç±»</h4>
<p><strong>7. ä¸ºä»€ä¹ˆè¯´LiveDataBusé€‚åˆå…¨å±€äº‹ä»¶è€Œä¸é€‚åˆé¡µé¢å†…é€šä¿¡ï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ul>
<li><strong>é€‚åˆå…¨å±€äº‹ä»¶</strong>ï¼šå› ä¸ºLiveDataBusæ˜¯"å¤šå¯¹å¤šå¹¿æ’­"ï¼Œå¤©ç„¶é€‚åˆè·¨æ¨¡å—ã€è·¨é¡µé¢çš„è§£è€¦é€šä¿¡</li>
<li><strong>ä¸é€‚åˆé¡µé¢å†…é€šä¿¡</strong>ï¼šå› ä¸ºç¼ºä¹å”¯ä¸€å¯ä¿¡æºçº¦æŸï¼Œäº‹ä»¶æ¥æºéš¾ä»¥è¿½è¸ªï¼Œä¸ç¬¦åˆMVVMçš„æ•°æ®å•å‘æµåŠ¨åŸåˆ™ã€‚é¡µé¢å†…é€šä¿¡åº”è¯¥ä½¿ç”¨ViewModel+LiveDataï¼Œä¿è¯æ•°æ®æ¥æºå¯è¿½æº¯</li>
</ul>
<p><strong>8. Kotlin Flowç›¸æ¯”LiveDataæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ol>
<li><strong>å®Œæ•´çš„èƒŒå‹æ”¯æŒ</strong>ï¼šFlowåŸç”Ÿæ”¯æŒèƒŒå‹ç­–ç•¥</li>
<li><strong>ä¸°å¯Œçš„æ“ä½œç¬¦</strong>ï¼šmapã€filterã€combineã€zipç­‰å‡½æ•°å¼æ“ä½œç¬¦</li>
<li><strong>çµæ´»çš„çº¿ç¨‹è°ƒåº¦</strong>ï¼šè½»æ¾åˆ‡æ¢IOã€Mainç­‰Dispatcher</li>
<li><strong>å¯é…ç½®çš„é‡æ”¾ç­–ç•¥</strong>ï¼šé€šè¿‡replayå‚æ•°ç²¾ç¡®æ§åˆ¶é‡æ”¾æ•°é‡</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šä¸åç¨‹æ·±åº¦é›†æˆï¼Œæ›´å¥½çš„é”™è¯¯å¤„ç†</li>
</ol>
<p><strong>9. ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨SharedFlowï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨StateFlowï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨SharedFlow</strong>ï¼šå½“éœ€è¦å¤šä¸ªè§‚å¯Ÿè€…ã€å¯é…ç½®é‡æ”¾ã€æˆ–éœ€è¦çƒ­æµæ—¶</li>
<li><strong>ä½¿ç”¨StateFlow</strong>ï¼šå½“éœ€è¦ä¸€ä¸ªå•ä¸€çš„æœ€æ–°çŠ¶æ€ã€éœ€è¦<code>.value</code>å±æ€§ç›´æ¥è®¿é—®æ—¶ï¼ˆç›¸å½“äº<code>replay=1</code>çš„SharedFlowï¼‰</li>
</ul>
<h4 data-id="heading-79">5.4 åœºæ™¯åº”ç”¨ç±»</h4>
<p><strong>10. å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ•°æ®é‡æ”¾è§£å†³æ–¹æ¡ˆï¼Ÿ</strong></p>
<p>ç­”ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©ï¼š</p>
<ul>
<li><strong>ç®€å•é¡¹ç›®</strong>ï¼šEventåŒ…è£…å™¨æˆ–SingleLiveEvent</li>
<li><strong>ä¼ä¸šçº§åº”ç”¨</strong>ï¼šUnPeekLiveDataæˆ–è‡ªå®šä¹‰LiveData</li>
<li><strong>æ–°é¡¹ç›®/åç¨‹é¡¹ç›®</strong>ï¼šKotlin Flowï¼ˆSharedFlow/StateFlowï¼‰</li>
<li><strong>éœ€è¦ç»å¯¹ç¨³å®š</strong>ï¼šé¿å…åå°„æ–¹æ¡ˆï¼Œä½¿ç”¨åŒ…è£…å™¨æ–¹æ¡ˆ</li>
</ul>
<p><strong>11. å¦‚ä½•å¤„ç†å¤šä¸ªè§‚å¯Ÿè€…éƒ½éœ€è¦æ¥æ”¶åŒä¸€ä¸ªäº‹ä»¶çš„æƒ…å†µï¼Ÿ</strong></p>
<p>ç­”ï¼šä¸‰ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>EventåŒ…è£…å™¨+peekContent()</strong> ï¼šå…è®¸è§‚å¯Ÿè€…æŸ¥çœ‹ä½†ä¸æ¶ˆè´¹äº‹ä»¶</li>
<li><strong>å¤šè§‚å¯Ÿè€…SingleLiveEvent</strong>ï¼šä¸ºæ¯ä¸ªè§‚å¯Ÿè€…ç»´æŠ¤ç‹¬ç«‹çŠ¶æ€</li>
<li><strong>SharedFlow with replay</strong>ï¼šé…ç½®replayå‚æ•°æ§åˆ¶é‡æ”¾</li>
</ol>
<p><strong>12. å¦‚ä½•é˜²æ­¢äº‹ä»¶è¢«é‡å¤å‘é€ï¼Ÿ</strong></p>
<p>ç­”ï¼š</p>
<ol>
<li><strong>å»é‡æœºåˆ¶</strong>ï¼šæ¯”è¾ƒæ–°æ—§å€¼ï¼Œåªæœ‰å€¼å˜åŒ–æ—¶æ‰å‘é€</li>
<li><strong>æ—¶é—´çª—å£</strong>ï¼šè®¾ç½®æœ€å°å‘é€é—´éš”ï¼ˆdebounceï¼‰</li>
<li><strong>çŠ¶æ€æ£€æŸ¥</strong>ï¼šåªæœ‰åœ¨ç‰¹å®šçŠ¶æ€ä¸‹æ‰å…è®¸å‘é€äº‹ä»¶</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL çš„ order by ç®€åŒ–ï¼ˆä½¿ç”¨åˆ—åºå·å’Œåˆ—åˆ«åæ’åºï¼‰]]></title>    <link>https://juejin.cn/post/7579702046955733035</link>    <guid>https://juejin.cn/post/7579702046955733035</guid>    <pubDate>2025-12-04T10:46:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579702046955733035" data-draft-id="7579589262623096851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL çš„ order by ç®€åŒ–ï¼ˆä½¿ç”¨åˆ—åºå·å’Œåˆ—åˆ«åæ’åºï¼‰"/> <meta itemprop="keywords" content="MySQL,åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T10:46:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åº·ä¸å¦ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/3861929970119453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL çš„ order by ç®€åŒ–ï¼ˆä½¿ç”¨åˆ—åºå·å’Œåˆ—åˆ«åæ’åºï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3861929970119453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åº·ä¸å¦ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T10:46:56.000Z" title="Thu Dec 04 2025 10:46:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;position:relative;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;padding-left:8px;padding-bottom:0;margin-top:35px;margin-bottom:10px;font-weight:900;font-family:serif;letter-spacing:1px;color:#000}.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover{background-color:#fff}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;position:relative}.markdown-body h2:after{content:"";left:0;bottom:0;width:100%;height:1px;position:absolute}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{height:1px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#37b2ff 0,#37b2ff 25%,transparent 50%)}.markdown-body code{margin:0 4px;word-break:break-word;overflow-x:auto;background-color:#fff7f7;color:#f06;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:-apple-system,system-ui,Menlo,Monaco,Consolas,Courier New;position:relative}.markdown-body pre{margin:15px 8px;border:1px solid #f5f5f7;line-height:1.75}.markdown-body pre:before{top:-4px;left:-4px;border-top:8px solid #feea1e;border-left:8px solid #feea1e}.markdown-body pre:after,.markdown-body pre:before{width:20px;height:20px;content:"";z-index:10;position:absolute}.markdown-body pre:after{right:-4px;bottom:-4px;border-right:8px solid #37b2ff;border-bottom:8px solid #37b2ff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;overflow-x:auto;margin:0;word-break:normal;display:block;color:#333;background-color:#fff;position:unset!important}.markdown-body pre:nth-child(odd):before{border-top-color:#a7ecad;border-left-color:#a7ecad}.markdown-body pre:nth-child(odd):after{border-right-color:#e699e6;border-bottom-color:#e699e6}.markdown-body a{margin:0 4px;text-decoration:none;color:#37b2ff;transition:.3s;display:inline-block;vertical-align:bottom;position:relative}.markdown-body a:before{content:"READ MORE +";bottom:90%;width:120px;max-width:0;color:#fff;background-color:#1fb3ff;position:absolute;white-space:nowrap;transition:.3s;box-sizing:border-box;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";bottom:0;left:0;width:100%;height:1px;border-bottom:1px dashed #37b2ff;position:absolute}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:120px;padding-left:14px}.markdown-body table{width:100%;max-width:100%;font-size:12px;background-color:#fff;overflow:auto;border-collapse:collapse}.markdown-body table tr:hover td,.markdown-body table tr:hover th{border-bottom:1px solid #feea1e}.markdown-body thead{text-align:left}.markdown-body th{font-size:1.2em;border-bottom:1px dashed #eee}.markdown-body tr:nth-child(2n){background-color:hsla(0,0%,87.8%,.1);border-bottom:1px solid #fff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px;border-bottom:1px dashed #fff}.markdown-body blockquote{color:#666;padding:12px 23px 2px;border:1px solid #37b2ff;background-color:#fff;margin:22px 0;position:relative}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body blockquote:after{content:"FROM";left:0;width:40px;color:#fff;background-color:#37b2ff;text-align:center}.markdown-body blockquote:after,.markdown-body blockquote:before{top:0;line-height:1;padding:2px 0;font-size:12px;font-weight:lighter;position:absolute;pointer-events:none}.markdown-body blockquote:before{content:"CITATION";left:44px;color:#37b2ff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{line-height:2em;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#37b2ff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol ol li,.markdown-body ol ul li,.markdown-body ul ol li,.markdown-body ul ul li{border-bottom:none}.markdown-body ol li{padding-left:6px;list-style:decimal-leading-zero}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]{position:relative}.markdown-body input[type=checkbox]:before{top:0;left:0;right:0;bottom:0;content:"";width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1;position:absolute}.markdown-body input[type=checkbox]:checked:after{content:"";top:10%;left:18%;width:90%;height:40%;border-left:2px solid #37b2ff;border-bottom:2px solid #37b2ff;color:#37b2ff;z-index:2;transform:rotate(-45deg);position:absolute}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">order by ä½¿ç”¨åˆ—åºå·æ’åº</h2>
<p>åœ¨å¦‚ä¸‹ä¾‹å­ä¸­çš„å¤æ‚ SQLï¼Œselect å‡ºæ¥çš„éƒ¨åˆ†åˆ—åŒ…å«å¤æ‚çš„å‡½æ•°å¤„ç†ï¼Œå½“æˆ‘å¸Œæœ›æŒ‰å“ç‰Œã€åœ°åŒºå’Œè½¦å‹æ’åºï¼Œorder by éƒ¨åˆ†å°±è¦æŠŠæ‰€æœ‰è¯­å¥éƒ½å†™ä¸Šï¼Œæ˜¾å¾—å¾ˆå†—ä½™ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> 
    <span class="hljs-string">'hyundaiKia_online'</span> <span class="hljs-keyword">as</span> analyser,
    vehicle_model <span class="hljs-keyword">as</span> vehicle_model,
    features,
    brand <span class="hljs-keyword">as</span> <span class="hljs-string">'å“ç‰Œ'</span>,
    area <span class="hljs-keyword">as</span> <span class="hljs-string">'åœ°åŒº'</span>,
    CONCAT(vehicle_model, <span class="hljs-string">'-'</span>, <span class="hljs-built_in">TRIM</span>(REPLACE(catalogName, <span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>))) <span class="hljs-keyword">as</span> <span class="hljs-string">'è½¦å‹'</span>
<span class="hljs-keyword">from</span> raw_vehicle_data
<span class="hljs-keyword">where</span> vehicle_model <span class="hljs-operator">!=</span> <span class="hljs-string">''</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> brand, area, CONCAT(vehicle_model, <span class="hljs-string">'-'</span>, <span class="hljs-built_in">TRIM</span>(REPLACE(catalogName, <span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>)))
</code></pre>
<p>order by è¯­å¥å¯ä»¥ä½¿ç”¨ select çš„åˆ—åºå·æ›¿ä»£ select çš„åˆ—å®Œæˆæ’åºå·¥ä½œï¼ˆåºå·ä» 1 å¼€å§‹é€’å¢ï¼‰</p>
<p>SQL å¯ä»¥å¾ˆå¥½åœ°è¢«ç®€åŒ–ï¼Œé€šè¿‡åºå·ç›´æ¥æŒ‡å®šæŒ‰ select å‡ºæ¥çš„é‚£ä¸€åˆ—è¿›è¡Œæ’åºã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> 
    <span class="hljs-string">'hyundaiKia_online'</span> <span class="hljs-keyword">as</span> analyser,
    vehicle_model <span class="hljs-keyword">as</span> vehicle_model,
    features,
    brand <span class="hljs-keyword">as</span> <span class="hljs-string">'å“ç‰Œ'</span>,
    area <span class="hljs-keyword">as</span> <span class="hljs-string">'åœ°åŒº'</span>,
    CONCAT(vehicle_model, <span class="hljs-string">'-'</span>, <span class="hljs-built_in">TRIM</span>(REPLACE(catalogName, <span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>))) <span class="hljs-keyword">as</span> <span class="hljs-string">'è½¦å‹'</span>
<span class="hljs-keyword">from</span> raw_vehicle_data
<span class="hljs-keyword">where</span> vehicle_model <span class="hljs-operator">!=</span> <span class="hljs-string">''</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>
</code></pre>
<p>ç”šè‡³è¿˜å¯ä»¥åŠ ä¸Š desc å’Œ asc æŒ‡å®šæŸä¸ªåˆ—çš„å‡åºã€é™åºæ’åºï¼Œé»˜è®¤æ˜¯ asc å‡åºã€‚</p>
<pre><code class="hljs language-sql" lang="sql">...
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">4</span> <span class="hljs-keyword">desc</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">asc</span>, <span class="hljs-number">6</span>
</code></pre>
<h2 data-id="heading-1">order by ä½¿ç”¨åˆ—åˆ«åæ’åº</h2>
<p>ä½¿ç”¨select å®šä¹‰çš„åˆ—åˆ«åä¹Ÿå¯ä»¥å®ç°ç®€åŒ– order by è¯­å¥</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> 
    <span class="hljs-string">'hyundaiKia_online'</span> <span class="hljs-keyword">as</span> analyser,
    vehicle_model <span class="hljs-keyword">as</span> vehicle_model,
    features,
    brand <span class="hljs-keyword">as</span> <span class="hljs-string">'å“ç‰Œ'</span>,
    area <span class="hljs-keyword">as</span> <span class="hljs-string">'åœ°åŒº'</span>,
    CONCAT(vehicle_model, <span class="hljs-string">'-'</span>, <span class="hljs-built_in">TRIM</span>(REPLACE(catalogName, <span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>))) <span class="hljs-keyword">as</span> <span class="hljs-string">'è½¦å‹'</span>
<span class="hljs-keyword">from</span> raw_vehicle_data
<span class="hljs-keyword">where</span> vehicle_model <span class="hljs-operator">!=</span> <span class="hljs-string">''</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> `å“ç‰Œ`, `åœ°åŒº`, `è½¦å‹`
</code></pre>
<p>æŒ‡å®šåˆ«ååˆ—æ—¶è¦ç”¨ <code>``</code> æ¥æ‹¬èµ·æ¥ï¼Œå¦åˆ™æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚</p>
<p>åˆ—åˆ«åã€åˆ—åºå·è¿˜æœ‰å­—æ®µååœ¨ order by è¯­å¥ä¸Šæ˜¯å¯ä»¥æ··æ­çš„ï¼Œæ•ˆæœæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">...
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> brand , `åœ°åŒº`, <span class="hljs-number">6</span>
</code></pre>
<h2 data-id="heading-2">ä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼š</h2>
<p>åˆ—åºå·è¿™ç§æ–¹å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯å­˜åœ¨ç»´æŠ¤æˆæœ¬é«˜çš„é—®é¢˜ï¼Œå› ä¸ºä¸€æ—¦ select çš„å­—æ®µé¡ºåºæ”¹å˜ï¼Œorder by å°±ä¸€å®šè¦è·Ÿéšå˜æ›´ï¼Œå¦åˆ™å°±æŒ‰éæœŸæœ›å­—æ®µæ’åºå¯¼è‡´æ’åºå¤±æ•ˆã€‚åŒæ—¶è¿™ç§æ–¹å¼å­˜åœ¨ä¸€å®šå­¦ä¹ æˆæœ¬ï¼Œä¸å¤ªç†Ÿæ‚‰è¯¥ SQL èƒŒåä¸šåŠ¡çš„äººï¼Œåˆæ¬¡æ¥è§¦ä¼šè§‰å¾— SQL å¯è¯»æ€§å¾ˆå·®ï¼Œçº¯æ•°å­—éš¾ä»¥ç†è§£ï¼Œå·¥ç¨‹ä¸Šå»ºè®®è¾©è¯çš„ä½¿ç”¨ã€‚</p>
<p>è€Œåˆ—åˆ«åæ–¹å¼æ¯”åˆ—åºå·æ›´åŠ çµæ´»ä¸€äº›ï¼Œselect å­—æ®µå˜æ›´é¡ºåºä¸éœ€è¦è°ƒæ•´ order byï¼Œä¸”åˆ«åä¸å˜æ›´çš„è¯ä¸€èˆ¬éƒ½ä¸éœ€è¦å¯¹ order by è¿›è¡Œè°ƒæ•´ï¼Œä¸”åˆ«åçš„æ–¹å¼å…¶æ‰€èƒ½è¡¨è¾¾çš„å«ä¹‰æ¯”åˆ—åºå·çš„çº¯æ•°å­—è¦å¼ºï¼ŒSQL å¯è¯»æ€§æ›´é«˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ¤ç‰©è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•]]></title>    <link>https://juejin.cn/post/7579814711853580298</link>    <guid>https://juejin.cn/post/7579814711853580298</guid>    <pubDate>2025-12-04T11:01:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579814711853580298" data-draft-id="7579832417748074547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ¤ç‰©è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•"/> <meta itemprop="keywords" content="å›¾åƒè¯†åˆ«,äººå·¥æ™ºèƒ½,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-04T11:01:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ziwu"/> <meta itemprop="url" content="https://juejin.cn/user/607373397353726"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ¤ç‰©è¯†åˆ«ç³»ç»Ÿã€‘Python+TensorFlow+Django+äººå·¥æ™ºèƒ½+æ·±åº¦å­¦ä¹ +å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/607373397353726/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ziwu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T11:01:54.000Z" title="Thu Dec 04 2025 11:01:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»‹ç»</h2>
<p>æ¤ç‰©è¯†åˆ«ç³»ç»Ÿï¼ŒåŸºäºTensorFlowæ­å»ºResnet50å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•ï¼Œé€šè¿‡å¯¹6ç§å¸¸è§çš„æ¤ç‰©æ ‘å¶å›¾ç‰‡æ•°æ®é›†ï¼ˆå¹¿ç‰å…°ã€æœé¹ƒã€æ¢§æ¡ã€æ¨Ÿå¶ã€èŠ­è•‰ã€é“¶æï¼‰è¿›è¡Œè®­ç»ƒï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªè¯†åˆ«ç²¾åº¦è¾ƒé«˜çš„æ¨¡å‹ï¼Œç„¶åæ­å»ºWebå¯è§†åŒ–æ“ä½œå¹³å°ã€‚</p>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š</p>
<ul>
<li>é¡¹ç›®å‰ç«¯ä½¿ç”¨Htmlã€CSSã€BootStrapæ­å»ºç•Œé¢ã€‚</li>
<li>åç«¯åŸºäºDjangoå¤„ç†é€»è¾‘è¯·æ±‚</li>
<li>åŸºäºAjaxå®ç°å‰åç«¯æ•°æ®é€šä¿¡</li>
</ul>
<p><strong>é€‰é¢˜èƒŒæ™¯ä¸æ„ä¹‰</strong>ï¼š
æœ¬é¡¹ç›®é€‰é¢˜èƒŒæ™¯èšç„¦äºä¼ ç»Ÿæ¤ç‰©è¯†åˆ«å¯¹ä¸“ä¸šçŸ¥è¯†çš„è¾ƒé«˜ä¾èµ–åŠæ•ˆç‡ç“¶é¢ˆé—®é¢˜ã€‚éšç€æ•°å­—å›¾åƒå¤„ç†å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„è¿…é€Ÿå‘å±•ï¼Œåˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°æ™ºèƒ½æ¤ç‰©è¯†åˆ«æˆä¸ºå¯èƒ½ã€‚æœ¬ç ”ç©¶åŸºäºTensorFlowæ¡†æ¶ï¼Œé€‰ç”¨ResNet50æ¨¡å‹ï¼Œå¯¹å¹¿ç‰å…°ã€æœé¹ƒã€æ¢§æ¡ç­‰å…­ç±»å¸¸è§æ ‘å¶å›¾åƒè¿›è¡Œè®­ç»ƒï¼Œæ—¨åœ¨æ„å»ºä¸€ä¸ªé«˜ç²¾åº¦çš„è‡ªåŠ¨åŒ–è¯†åˆ«æ¨¡å‹ã€‚ä¸ºè¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ä¸æ™®åŠæ€§ï¼Œé¡¹ç›®ç»“åˆå‰åç«¯æŠ€æœ¯ï¼Œä»¥Djangoä½œä¸ºåç«¯é€»è¾‘å¤„ç†æ ¸å¿ƒï¼Œé‡‡ç”¨HTMLã€CSSä¸BootStrapæ„å»ºå‰ç«¯äº¤äº’ç•Œé¢ï¼Œå¹¶å€ŸåŠ©Ajaxå®ç°æµç•…çš„æ•°æ®é€šä¿¡ï¼Œæœ€ç»ˆæ­å»ºä¸ºæ“ä½œç®€ä¾¿çš„Webå¯è§†åŒ–å¹³å°ï¼Œä¸ºæ¤ç‰©è¯†åˆ«æä¾›ä¸€ç§é«˜æ•ˆã€ä¾¿æ·çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">äºŒã€ç³»ç»Ÿæ•ˆæœå›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eb7c50a87e34829baae953e81b19f44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450914&amp;x-signature=QV5kaihbUW7iMCX%2B7TMqFF2%2BXJI%3D" alt="å›¾ç‰‡" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8637d8d730b44817be43db92a5c20200~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450914&amp;x-signature=ubb5pq3fwTEdkPu2GudhqKKLx%2FI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ¼”ç¤ºè§†é¢‘ and å®Œæ•´ä»£ç  and å®‰è£…</h2>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fziwupy.cn%2Fp%2FzJVzJb" target="_blank" title="https://ziwupy.cn/p/zJVzJb" ref="nofollow noopener noreferrer">ziwupy.cn/p/zJVzJb</a></p>
<h2 data-id="heading-3">å››ã€å·ç§¯ç¥ç»ç½‘ç»œç®—æ³•ä»‹ç»</h2>
<p>ResNet50æ˜¯æ®‹å·®ç½‘ç»œï¼ˆResidual Networkï¼‰çš„ä¸€ç§é‡è¦å®ç°ï¼Œå…¶æ ¸å¿ƒåˆ›æ–°åœ¨äºå¼•å…¥äº†<strong>æ®‹å·®æ¨¡å—</strong>å’Œ<strong>è·³è·ƒè¿æ¥</strong>ï¼Œæœ‰æ•ˆç¼“è§£äº†æ·±å±‚ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œç½‘ç»œé€€åŒ–é—®é¢˜ï¼Œä½¿å¾—ç½‘ç»œæ·±åº¦å¯ä»¥å¤§å¹…å¢åŠ è‡³50å±‚ä¹ƒè‡³æ›´æ·±ï¼Œä»è€Œæ˜¾è‘—æå‡äº†å›¾åƒè¯†åˆ«ç­‰ä»»åŠ¡çš„ç²¾åº¦ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åŸºäºTensorFlowå’Œé¢„è®­ç»ƒResNet50æ¨¡å‹è¿›è¡Œå›¾åƒåˆ†ç±»çš„ç®€æ˜ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> tensorflow.keras.applications.resnet50 <span class="hljs-keyword">import</span> ResNet50, preprocess_input, decode_predictions
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image

<span class="hljs-comment"># 1. åŠ è½½é¢„è®­ç»ƒçš„ResNet50æ¨¡å‹ï¼ˆåŒ…å«åœ¨ImageNetä¸Šè®­ç»ƒå¥½çš„æƒé‡ï¼‰</span>
model = ResNet50(weights=<span class="hljs-string">'imagenet'</span>)

<span class="hljs-comment"># 2. åŠ è½½å¹¶é¢„å¤„ç†å›¾åƒ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_and_preprocess_image</span>(<span class="hljs-params">img_path</span>):
    img = Image.<span class="hljs-built_in">open</span>(img_path).resize((<span class="hljs-number">224</span>, <span class="hljs-number">224</span>))  <span class="hljs-comment"># ResNet50è¾“å…¥å°ºå¯¸ä¸º224x224</span>
    img_array = np.array(img)
    img_array = np.expand_dims(img_array, axis=<span class="hljs-number">0</span>)  <span class="hljs-comment"># æ‰©å±•ä¸ºæ‰¹å¤„ç†ç»´åº¦ (1, 224, 224, 3)</span>
    <span class="hljs-keyword">return</span> preprocess_input(img_array)  <span class="hljs-comment"># åº”ç”¨ResNet50ä¸“ç”¨çš„é¢„å¤„ç†</span>

<span class="hljs-comment"># 3. è¿›è¡Œé¢„æµ‹</span>
processed_image = load_and_preprocess_image(<span class="hljs-string">'your_image.jpg'</span>)
predictions = model.predict(processed_image)

<span class="hljs-comment"># 4. è§£ç é¢„æµ‹ç»“æœï¼ˆæ˜¾ç¤ºå‰3ä¸ªæœ€å¯èƒ½çš„ç±»åˆ«ï¼‰</span>
decoded_predictions = decode_predictions(predictions, top=<span class="hljs-number">3</span>)[<span class="hljs-number">0</span>]
<span class="hljs-keyword">for</span> i, (imagenet_id, label, score) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(decoded_predictions):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>: <span class="hljs-subst">{label}</span> (<span class="hljs-subst">{score:<span class="hljs-number">.2</span>f}</span>)"</span>)
</code></pre>
<p>å¦‚ä¸Šæ‰€ç¤ºåˆ©ç”¨ResNet50è¿›è¡Œå›¾åƒè¯†åˆ«çš„å…¸å‹æµç¨‹ï¼šåŠ è½½é¢„è®­ç»ƒæ¨¡å‹ã€å¯¹è¾“å…¥å›¾åƒè¿›è¡Œæ ‡å‡†åŒ–é¢„å¤„ç†ã€æ‰§è¡Œå‰å‘ä¼ æ’­é¢„æµ‹ï¼Œå¹¶è§£ç å¾—åˆ°äººç±»å¯è¯»çš„ç±»åˆ«æ ‡ç­¾åŠç½®ä¿¡åº¦ã€‚åœ¨å®é™…æ¤ç‰©è¯†åˆ«é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨ResNet50çš„åŸºç¡€ä¸Šè¿›è¡Œ<strong>è¿ç§»å­¦ä¹ </strong>ï¼Œå³ä¿ç•™å…¶å¼ºå¤§çš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œæ›¿æ¢å¹¶é‡æ–°è®­ç»ƒæœ€åçš„å…¨è¿æ¥å±‚ï¼Œä½¿å…¶é€‚åº”æˆ‘ä»¬è‡ªå®šä¹‰çš„6ç§æ ‘å¶åˆ†ç±»ä»»åŠ¡ï¼Œä»è€Œåœ¨å°è§„æ¨¡æ•°æ®é›†ä¸Šä¹Ÿèƒ½è¾¾åˆ°è¾ƒé«˜çš„è¯†åˆ«ç²¾åº¦ã€‚
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆCNNå›¾åƒè¯†åˆ«æµç¨‹
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1db0d7620c124f0ba5ed6a24faac21f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeml3dQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450914&amp;x-signature=Ae4ulXXP3QMKSeRt%2B1MebbXXJAU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>è¾“å…¥å±‚ï¼šæ¥æ”¶224Ã—224åƒç´ çš„RGBæ ‘å¶å›¾åƒ</li>
<li>ç‰¹å¾æå–ï¼šå·ç§¯å±‚è‡ªåŠ¨å­¦ä¹ çº¹ç†ã€è¾¹ç¼˜ç­‰ç‰¹å¾ï¼Œæ± åŒ–å±‚å‹ç¼©ç‰¹å¾ç»´åº¦</li>
<li>åˆ†ç±»å†³ç­–ï¼šå…¨è¿æ¥å±‚æ•´åˆç‰¹å¾ï¼Œæ˜ å°„åˆ°ç±»åˆ«ç©ºé—´</li>
<li>è¾“å‡ºå±‚ï¼šé€šè¿‡Softmaxå‡½æ•°è¾“å‡º6ç§æ ‘å¶ç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒ</li>
</ul>
<p>åœ¨ResNet50å®é™…åº”ç”¨ä¸­ï¼Œç‰¹å¾æå–éƒ¨åˆ†åŒ…å«50å±‚æ®‹å·®æ¨¡å—ï¼Œé€šè¿‡è·³è·ƒè¿æ¥ç¡®ä¿æ·±å±‚ç½‘ç»œçš„æœ‰æ•ˆè®­ç»ƒï¼Œæœ€åé€šè¿‡å…¨è¿æ¥å±‚è¾“å‡ºåˆ†ç±»ç»“æœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºdeepseekå®ç°çš„aié—®ç­”å°ç¨‹åº]]></title>    <link>https://juejin.cn/post/7579702046955765803</link>    <guid>https://juejin.cn/post/7579702046955765803</guid>    <pubDate>2025-12-04T11:02:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579702046955765803" data-draft-id="7579716343454335019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºdeepseekå®ç°çš„aié—®ç­”å°ç¨‹åº"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-04T11:02:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†äº¿éº»è¢‹"/> <meta itemprop="url" content="https://juejin.cn/user/1753054116320659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºdeepseekå®ç°çš„aié—®ç­”å°ç¨‹åº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1753054116320659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†äº¿éº»è¢‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T11:02:33.000Z" title="Thu Dec 04 2025 11:02:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŠŸèƒ½é¢„è§ˆ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4b9cf691bba4070a06a54f446e539f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=4DzIrOtWk93LwFU71OB3xoQKyMo%3D" alt="æˆªå±2025-12-04 18.38.30.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24d85b13473b4a8a8d7a2c27f4aa23e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=wD1HUIDJjQPpuK%2B5oSzjfJMtrmg%3D" alt="æˆªå±2025-12-04 18.38.45.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dc3d2658735400aab1693e714f9fbbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=3BV42gOxyyLdLedoKQbJWnCuMVE%3D" alt="æˆªå±2025-12-04 18.38.55.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ff4cca41d8b4ebda03a080425d8d3a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=W1Dgr%2BtT77G1HRfIn726ph10sc0%3D" alt="æˆªå±2025-12-04 18.39.52.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0df558c6d1b548e3bb4940fae465a0fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=qnFhYVtGQipZ8BBelMb%2BSeGTQd4%3D" alt="æˆªå±2025-12-04 18.39.59.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1364d325187445ba92522fb9b6388614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=wPzAOhNsgCiGIIjr7qch78IGcHw%3D" alt="æˆªå±2025-12-04 18.40.36.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eea21cd9f924f4c959f91d1d06255ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=eXIdLlCubDAS2oI39ZxgfgNdTtc%3D" alt="æˆªå±2025-12-04 18.41.41.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c688b7f488ae4c968654db4df48ccff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyf6LGG5Lq_6bq76KKL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765450953&amp;x-signature=Jz1OjbU5wdfJK1pIZYIXU9u4y3o%3D" alt="lovegif_1764845391382.gif" loading="lazy"/></p>
<h2 data-id="heading-1">âœ¨ æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-2">ğŸš€ æµå¼æ•°æ®å¤„ç†</h3>
<ul>
<li><strong>SSEï¼ˆServer-Sent Eventsï¼‰æµå¼æ¥æ”¶</strong>ï¼šå®ç°äº†å®Œæ•´çš„æµå¼æ•°æ®å¤„ç†æœºåˆ¶ï¼Œåœ¨æ”¶åˆ°ç¬¬ä¸€å—æ•°æ®æ—¶ç«‹å³æ¸²æŸ“</li>
<li><strong>åˆ†å—è§£æä¸ç¼“å†²</strong>ï¼šæ”¯æŒå¤šè¡Œ SSE äº‹ä»¶çš„æ­£ç¡®è§£æï¼Œå¤„ç†ä¸å®Œæ•´çš„æ•°æ®å—</li>
<li><strong>å®æ—¶æ¸²æŸ“åé¦ˆ</strong>ï¼šä½¿ç”¨ <code>requestAnimationFrame</code> ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼Œé¿å…é¢‘ç¹ DOM æ›´æ–°å¯¼è‡´çš„å¡é¡¿</li>
</ul>
<h3 data-id="heading-3">ğŸ’¬ å¯¹è¯ç®¡ç†</h3>
<ul>
<li><strong>æ¶ˆæ¯è¿½è¸ªç³»ç»Ÿ</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ¶ˆæ¯ IDï¼Œç»´æŠ¤æ¶ˆæ¯çŠ¶æ€ï¼ˆpending/success/errorï¼‰</li>
<li><strong>ä¼šè¯éš”ç¦»</strong>ï¼šæ”¯æŒå¤šä¼šè¯å¹¶è¡Œï¼Œå¯åˆ›å»ºã€åˆ‡æ¢ã€ç®¡ç†å†å²ä¼šè¯</li>
<li><strong>æ¶ˆæ¯å¿«ç…§å­˜å‚¨</strong>ï¼šä¿å­˜ç”¨æˆ·æ¶ˆæ¯ä¸ AI å›å¤çš„å®Œæ•´ä¸Šä¸‹æ–‡</li>
</ul>
<h3 data-id="heading-4">ğŸ¨ äº¤äº’ä¼˜åŒ–</h3>
<ul>
<li><strong>æ€è€ƒä¸­åŠ è½½åŠ¨ç”»</strong>ï¼šAI å›å¤å»¶è¿Ÿæ—¶çš„ä¼˜é›… UXâ€”â€”æµå¼æ•°æ®åˆ°è¾¾æ—¶å³åˆ»æ¶ˆå¤±</li>
<li><strong>è‡ªåŠ¨æ»šåŠ¨å®šä½</strong>ï¼šæ™ºèƒ½æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯ï¼Œæ”¯æŒæŒ‡å®šæ¶ˆæ¯å®šä½ï¼Œé¿å…å†…å®¹å˜åŒ–å¯¼è‡´çš„æ»šåŠ¨ä½ç½®åç§»</li>
<li><strong>æ¶ˆæ¯æ“ä½œé¢æ¿</strong>ï¼šæ”¯æŒå¤åˆ¶ã€ç‚¹èµã€é‡æ–°ç”Ÿæˆç­‰äº¤äº’åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-5">ğŸ¯ å¤šæ¨¡å‹æ”¯æŒ</h3>
<ul>
<li><strong>æ¨¡å‹åˆ‡æ¢å™¨</strong>ï¼šæ”¯æŒåœ¨å¯¹è¯è¿‡ç¨‹ä¸­åŠ¨æ€é€‰æ‹©ä¸åŒ AI æ¨¡å‹
<ul>
<li><strong>å¿«é€Ÿé—®ç­”æ¨¡å¼</strong>ï¼ˆdeepseek-chatï¼‰</li>
<li><strong>æ·±åº¦æ€è€ƒæ¨¡å¼</strong>ï¼ˆdeepseek-reasonerï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">ğŸ“ Markdown æ¸²æŸ“</h3>
<ul>
<li><strong>å®Œæ•´çš„ Markdown æ”¯æŒ</strong>ï¼šåŒ…æ‹¬ä»£ç å—ã€è¡¨æ ¼ã€åˆ—è¡¨ã€å¼•ç”¨ç­‰</li>
<li><strong>ä»£ç é«˜äº®</strong>ï¼šä½¿ç”¨ highlight.js å®ç°å¤šè¯­è¨€ä»£ç ç€è‰²</li>
<li><strong>HTML å®‰å…¨æ¸²æŸ“</strong>ï¼šé…ç½®åŒ–å¤„ç†ï¼Œæ”¯æŒé“¾æ¥è‡ªåŠ¨æ–°çª—å£æ‰“å¼€</li>
</ul>
<h3 data-id="heading-7">ğŸ¨ è®¾è®¡ç³»ç»Ÿ</h3>
<ul>
<li><strong>ç°ä»£æ¸å˜è®¾è®¡</strong>ï¼šæ¸å˜è‰²ï¼ˆç´«â†’ç´«â†’ç²‰ï¼‰è´¯ç©¿æ•´ä¸ªåº”ç”¨</li>
<li><strong>å“åº”å¼å¸ƒå±€</strong>ï¼šåŸºäº CSS å˜é‡çš„æ·±æµ…ä¸»é¢˜æ”¯æŒ</li>
<li><strong>åŠ¨ç”»ç»†èŠ‚</strong>ï¼šå¹³æ»‘çš„æ¶ˆæ¯æ»‘å…¥ã€åŠ è½½è½¬åœˆã€è„‰å†²æ•ˆæœç­‰</li>
</ul>
<h2 data-id="heading-8">ğŸ—ï¸ é¡¹ç›®ç»“æ„</h2>
<pre><code class="hljs language-python" lang="python">src/
â”œâ”€â”€ components/              <span class="hljs-comment"># Vue ç»„ä»¶åº“</span>
â”‚   â”œâ”€â”€ MessageItem.vue      <span class="hljs-comment"># å•æ¡æ¶ˆæ¯æ¸²æŸ“ç»„ä»¶ï¼ˆå« Markdown è§£æã€æ“ä½œé¢æ¿ï¼‰</span>
â”‚   â”œâ”€â”€ InputArea.vue        <span class="hljs-comment"># è¾“å…¥æ¡†åŠå·¥å…·æ ï¼ˆå«æ¨¡å‹é€‰æ‹©ã€å½•éŸ³ã€æ–°å»ºä¼šè¯ï¼‰</span>
â”‚   â”œâ”€â”€ HistroySessions.vue  <span class="hljs-comment"># å†å²ä¼šè¯ç®¡ç†å¼¹çª—</span>
â”‚   â””â”€â”€ HelloWorld.vue       <span class="hljs-comment"># ç¤ºä¾‹ç»„ä»¶</span>
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ <span class="hljs-built_in">type</span>.ts              <span class="hljs-comment"># TypeScript ç±»å‹å®šä¹‰ï¼ˆChatMessageã€Session ç­‰ï¼‰</span>
â”‚   â”œâ”€â”€ request.ts           <span class="hljs-comment"># HTTP è¯·æ±‚å°è£…ï¼ˆget/postï¼‰</span>
â”‚   â”œâ”€â”€ streamRequest.ts     <span class="hljs-comment"># SSE æµå¼è¯·æ±‚å®ç°</span>
â”‚   â””â”€â”€ markdown.ts          <span class="hljs-comment"># Markdown æ¸²æŸ“å¼•æ“é…ç½®</span>
â”œâ”€â”€ assets/                  <span class="hljs-comment"># é™æ€èµ„æº</span>
â”‚   â”œâ”€â”€ regenerate-icon.svg  <span class="hljs-comment"># é‡æ–°ç”ŸæˆæŒ‰é’®å›¾æ ‡</span>
â”‚   â”œâ”€â”€ copy-icon.svg        <span class="hljs-comment"># å¤åˆ¶æŒ‰é’®å›¾æ ‡</span>
â”‚   â”œâ”€â”€ like-icon.svg        <span class="hljs-comment"># ç‚¹èµæŒ‰é’®å›¾æ ‡</span>
â”‚   â”œâ”€â”€ thinking-icon.svg    <span class="hljs-comment"># æ€è€ƒä¸­åŠ è½½åŠ¨ç”»</span>
â”‚   â””â”€â”€ logo1.png            <span class="hljs-comment"># AI è§’è‰²å¤´åƒ</span>
â”œâ”€â”€ App.vue                  <span class="hljs-comment"># ä¸»åº”ç”¨ç»„ä»¶ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰</span>
â”œâ”€â”€ main.ts                  <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
â””â”€â”€ style.scss               <span class="hljs-comment"># å…¨å±€æ ·å¼ä¸è®¾è®¡ç³»ç»Ÿå˜é‡</span>
</code></pre>
<h2 data-id="heading-9">ğŸ”§ æŠ€æœ¯æ ˆ</h2>


















































<table><thead><tr><th>æŠ€æœ¯</th><th>ç‰ˆæœ¬</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>Vue</td><td>3.5.13</td><td>å‰ç«¯æ¡†æ¶</td></tr><tr><td>TypeScript</td><td>5.8</td><td>ç±»å‹å®‰å…¨</td></tr><tr><td>Vite</td><td>6.3.5</td><td>æ„å»ºå·¥å…·</td></tr><tr><td>Markdown-it</td><td>14.1.0</td><td>Markdown æ¸²æŸ“</td></tr><tr><td>highlight.js</td><td>å†…ç½®</td><td>ä»£ç é«˜äº®</td></tr><tr><td>SCSS</td><td>1.94.2</td><td>æ ·å¼é¢„å¤„ç†</td></tr><tr><td>Element Plus</td><td>2.10.4</td><td>UI ç»„ä»¶åº“ï¼ˆå¯é€‰ï¼‰</td></tr><tr><td>socket.io-client</td><td>4.8.1</td><td>WebSocket æ”¯æŒï¼ˆé¢„ç•™ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-10">ğŸ“¥ å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-11">å‰ç½®è¦æ±‚</h3>
<ul>
<li>Node.js &gt;= 16</li>
<li>npm æˆ– yarn</li>
</ul>
<h3 data-id="heading-12">å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
<h3 data-id="heading-13">å¼€å‘æœåŠ¡å™¨</h3>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>è®¿é—® <code>http://localhost:5173</code></p>
<h3 data-id="heading-14">ç”Ÿäº§æ„å»º</h3>
<pre><code class="hljs language-bash" lang="bash">npm run build
</code></pre>
<p>æ„å»ºè¾“å‡ºåˆ° <code>dist/</code> ç›®å½•</p>
<h3 data-id="heading-15">é¢„è§ˆæ„å»ºç»“æœ</h3>
<pre><code class="hljs language-bash" lang="bash">npm run preview
</code></pre>
<h2 data-id="heading-16">ğŸ¯ æ ¸å¿ƒä¸šåŠ¡æµç¨‹</h2>
<h3 data-id="heading-17">å¯¹è¯æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·è¾“å…¥ â†’ å‘é€æ¶ˆæ¯
    â†“
åˆ›å»º User Message (pending)
æ˜¾ç¤ºåœ¨æ¶ˆæ¯åˆ—è¡¨ â†’ è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
    â†“
è°ƒç”¨ streamFetchï¼ˆPOST /api/ai/chatï¼‰
Assistant Message åˆ›å»º (pending)
    â†“
SSE æ•°æ®æµå¼€å§‹æ¥æ”¶
    â”œâ”€ ç¬¬ä¸€å—æ•°æ®åˆ°è¾¾ â†’ status å˜ä¸º successï¼ˆæ€è€ƒä¸­ <span class="hljs-attribute">icon</span> æ¶ˆå¤±ï¼‰
    â”œâ”€ æŒç»­æ¥æ”¶ â†’ å®æ—¶æ¸²æŸ“ Markdown å†…å®¹
    â””â”€ æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
    â†“
æµç»“æŸ (onDone) â†’ æœ€ç»ˆæ›´æ–°æ¶ˆæ¯çŠ¶æ€
    â†“
ç”¨æˆ·å¯è¿›è¡Œæ“ä½œï¼šå¤åˆ¶ã€ç‚¹èµã€é‡æ–°ç”Ÿæˆ
</code></pre>
<h3 data-id="heading-18">ä¼šè¯ç®¡ç†æµç¨‹</h3>
<pre><code class="hljs language-bash" lang="bash">æ–°å»ºä¼šè¯ â†’ POST /api/ai/sessions
    â†“
è·å– session.id â†’ ç”¨äºåç»­å¯¹è¯ä¸Šä¸‹æ–‡å…³è”
    â†“
åˆ‡æ¢å†å²ä¼šè¯ â†’ GET /api/ai/sessions/{<span class="hljs-built_in">id</span>}/messages
    â†“
åŠ è½½å†å²æ¶ˆæ¯ â†’ ç­‰å¾… DOM ç¨³å®š â†’ æ™ºèƒ½æ»šåŠ¨åˆ°åº•éƒ¨
</code></pre>
<h2 data-id="heading-19">ğŸ” API æ¥å£çº¦å®š</h2>
<h3 data-id="heading-20">å¯¹è¯æ¥å£</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable constant_">POST</span> /api/ai/chat
<span class="hljs-title class_">Body</span>: {
  <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">role</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> }&gt;,
  sessionId?: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>,
  <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">model</span>: <span class="hljs-built_in">string</span>  <span class="hljs-comment">// "deepseek-chat" | "deepseek-reasoner"</span>
}
<span class="hljs-title class_">Response</span>: æµå¼ <span class="hljs-variable constant_">SSE</span>
  <span class="hljs-attr">data</span>: æ–‡æœ¬å—
  [å¯é€‰] <span class="hljs-attr">event</span>: äº‹ä»¶ç±»å‹
  [å¯é€‰] <span class="hljs-attr">id</span>: äº‹ä»¶ <span class="hljs-variable constant_">ID</span>
</code></pre>
<h3 data-id="heading-21">ä¼šè¯æ¥å£</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable constant_">POST</span> /api/ai/sessions
<span class="hljs-title class_">Body</span>: { <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; summary?: <span class="hljs-built_in">string</span> }
<span class="hljs-title class_">Response</span>: { <span class="hljs-attr">session</span>: { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>; ... } }

<span class="hljs-variable constant_">GET</span> /api/ai/sessions/{id}/messages
<span class="hljs-title class_">Response</span>: { <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">HistoryMessage</span>&gt; }
  <span class="hljs-title class_">HistoryMessage</span> = {
    <span class="hljs-attr">role</span>: <span class="hljs-string">"assistant"</span> | <span class="hljs-string">"user"</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>,
    created_at?: <span class="hljs-built_in">string</span>
  }
</code></pre>
<h2 data-id="heading-22">ğŸ’¡ äº®ç‚¹åˆ†æ</h2>
<h3 data-id="heading-23">1. <strong>é«˜æ€§èƒ½æµå¼æ¸²æŸ“</strong></h3>
<ul>
<li>ä½¿ç”¨ requestAnimationFrame è¿›è¡Œ Markdown æ¸²æŸ“èŠ‚æµï¼Œé¿å…é¢‘ç¹é‡æ’/é‡ç»˜</li>
<li>SSE æµæ•°æ®çš„åˆ†å—å¤„ç†å’Œç¼“å†²æœºåˆ¶ç¡®ä¿å³ä¾¿æ•°æ®åŒ…ä¸å®Œæ•´ä¹Ÿèƒ½æ­£ç¡®è§£æ</li>
<li>æµå¼æ›´æ–°æ—¶çš„è‡ªåŠ¨æ»šåŠ¨é‡‡ç”¨ä¸¤å¸§ rAF ç­‰å¾…ï¼Œç¡®ä¿ CSS åŠ¨ç”»å’Œå¸ƒå±€ç¨³å®š</li>
</ul>
<h3 data-id="heading-24">2. <strong>å“åº”å¼é€‚é…</strong></h3>
<ul>
<li>ä½¿ç”¨remå•ä½åšå“åº”å¼é€‚é…ï¼Œç›®å‰æ”¯æŒå„ç§å¤§å°å±å¹•çš„è®¾å¤‡ï¼Œå…¼å®¹PCç«¯çš„è‰¯å¥½æ˜¾ç¤ºã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">å…³é”®ä»£ç 

// ç”¨äºè®¾ç½®remå•ä½çš„å­—ä½“å¤§å°(åŠ¨æ€)
function setRem() {
    const <span class="hljs-attr">baseWidth</span> = <span class="hljs-number">375</span><span class="hljs-comment">; // è®¾è®¡ç¨¿å®½åº¦</span>
    const <span class="hljs-attr">minFontSize</span> = <span class="hljs-number">6</span><span class="hljs-comment">; // æœ€å°å­—ä½“</span>
    const <span class="hljs-attr">maxFontSize</span> = <span class="hljs-number">16</span><span class="hljs-comment">; // æœ€å¤§å­—ä½“ï¼ˆPCå±æˆ–å¤§å±é™åˆ¶ï¼‰</span>
    const <span class="hljs-attr">html</span> = document.documentElement<span class="hljs-comment">;</span>
    const <span class="hljs-attr">width</span> = html.clientWidth<span class="hljs-comment">;</span>

    let <span class="hljs-attr">fontSize</span> = (width / baseWidth) * <span class="hljs-number">12</span><span class="hljs-comment">;</span>

    if (fontSize &lt; minFontSize) <span class="hljs-attr">fontSize</span> = minFontSize<span class="hljs-comment">;</span>
    if (fontSize &gt; maxFontSize) <span class="hljs-attr">fontSize</span> = maxFontSize<span class="hljs-comment">;</span>

    <span class="hljs-attr">html.style.fontSize</span> = fontSize + <span class="hljs-string">'px'</span><span class="hljs-comment">;</span>
}
setRem()<span class="hljs-comment">;</span>
window.addEventListener('resize', setRem)<span class="hljs-comment">;</span>

</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-section">## ğŸ”„ åç»­ä¼˜åŒ–æ–¹å‘</span>

<span class="hljs-bullet">*</span>   [ ] è¯­éŸ³è¾“å…¥å®Œæ•´å®ç°ï¼ˆå½“å‰é¢„ç•™ï¼‰
<span class="hljs-bullet">*</span>   [ ] æ¶ˆæ¯æœç´¢ä¸è¿‡æ»¤
<span class="hljs-bullet">*</span>   [ ] å¯¼å‡ºå¯¹è¯è®°å½•ï¼ˆPDFã€Markdownï¼‰
<span class="hljs-bullet">*</span>   [ ] æ•°æ®åŠ å¯†ä¼ è¾“
<span class="hljs-bullet">*</span>   [ ] æ›´å¤š AI æ¨¡å‹é›†æˆ

<span class="hljs-section">## ğŸ“„ ç›¸å…³æ–‡ä»¶è¯´æ˜</span>

| æ–‡ä»¶                 | è¯´æ˜                               |
| ------------------ | -------------------------------- |
| <span class="hljs-code">`streamRequest.ts`</span> | SSE æµå¼æ•°æ®è§£æçš„æ ¸å¿ƒå®ç°ï¼Œæ”¯æŒå¤šè¡Œ data å­—æ®µ     |
| <span class="hljs-code">`App.vue`</span>          | ä¸»ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…å«å¯¹è¯æµç¨‹ã€ä¼šè¯ç®¡ç†ã€è‡ªåŠ¨æ»šåŠ¨ä¼˜åŒ–         |
| <span class="hljs-code">`MessageItem.vue`</span>  | æ¶ˆæ¯æ¸²æŸ“ä¸äº¤äº’ï¼Œæ€è€ƒä¸­åŠ è½½åŠ¨ç”»ã€Markdown è§£æã€æ“ä½œæŒ‰é’® |
| <span class="hljs-code">`InputArea.vue`</span>    | è¾“å…¥æ¡†ã€æ¨¡å‹åˆ‡æ¢ã€ä¼šè¯æ“ä½œ                    |
| <span class="hljs-code">`markdown.ts`</span>      | Markdown-it é…ç½®ï¼Œä»£ç é«˜äº®ã€é“¾æ¥å¤„ç†         |
| <span class="hljs-code">`style.scss`</span>       | å…¨å±€è®¾è®¡ç³»ç»Ÿï¼Œæ¸å˜ã€ä¸»é¢˜ã€åŠ¨ç”»                  |


</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿæ´»]]></title>    <link>https://juejin.cn/post/7549378194212503579</link>    <guid>https://juejin.cn/post/7549378194212503579</guid>    <pubDate>2025-09-15T02:50:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7549378194212503579" data-draft-id="7549613377195343918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿæ´»"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-09-15T02:50:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å±±æ­¢å·è¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/2569995609450827"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿæ´»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2569995609450827/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å±±æ­¢å·è¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-09-15T02:50:28.000Z" title="Mon Sep 15 2025 02:50:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-09-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    45
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2a3620836944b5caa028f5edf222824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-WxseatouW3neihjA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254893&amp;x-signature=pDJLleAupQfpmqlH8v6W5Iini2k%3D" alt="67000d15-ccaf-46e2-a548-a017fd8ed8d2_1757904478446930297_origin~tplv-a9rns2rl98-web-preview-watermark.jpeg" loading="lazy"/></p>
<p>æš®è‰²æ¼«è¿‡çª—å°æ—¶ï¼Œæˆ‘æ€»çˆ±ç¿»å¤–å©†ç•™ä¸‹çš„æ—§æœ¨ç›’ã€‚é‡Œé¢æ²¡æœ‰è´µé‡ç‰©ä»¶ï¼Œåªæœ‰å‡ å¼ æ³›é»„çš„ç…§ç‰‡ã€åŠå—å‹å¾—ç´§å®çš„æ¡‚èŠ±ç³•ï¼Œè¿˜æœ‰ä¸€æ²“å†™æ»¡å¨Ÿç§€å­—è¿¹çš„ä¿¡ã€‚é‚£äº›è¢«æ—¶å…‰æ‰çš±çš„æƒ…æ„Ÿï¼Œè—åœ¨å­—é‡Œè¡Œé—´ã€é£Ÿç‰©ä½™æ¸©é‡Œï¼Œè½»è½»è§¦ç¢°ï¼Œå°±ä¼šæ¼«å‡ºæ¸©çƒ­çš„é¦™æ°”ã€‚â€‹</p>
<p>å¤–å©†çš„ä¿¡é‡Œæ€»ææ¡‚èŠ±ã€‚å¥¹è¯´åé™¢çš„æ¡‚èŠ±æ ‘åˆå¼€äº†ï¼Œé£ä¸€å¹ï¼ŒèŠ±ç“£è½åœ¨æ™¾è¡£ç»³ä¸Šï¼Œè¿è¡£æœéƒ½å¸¦ç€ç”œã€‚æ¯å¹´é‡é˜³èŠ‚ï¼Œå¥¹ä¼šæ‘˜ä¸‹æœ€æ–°é²œçš„æ¡‚èŠ±ï¼Œå’Œç€ç³¯ç±³ç²‰è’¸ç³•ã€‚æˆ‘æ€»ç­‰åœ¨ç¶å°è¾¹ï¼Œçœ‹å¥¹æŠŠè’¸å¥½çš„ç³•åˆ‡æˆå°å—ï¼Œè£¹ä¸Šä¸€å±‚ç™½ç³–ã€‚â€œæ…¢äº›åƒï¼Œåˆ«çƒ«ç€â€ï¼Œå¥¹çš„å£°éŸ³è£¹ç€æ°´æ±½ï¼Œå’Œæ¡‚èŠ±çš„é¦™æ°”ä¸€èµ·ï¼Œæˆäº†æˆ‘ç«¥å¹´æœ€æš–çš„åº•è‰²ã€‚åæ¥æˆ‘å»å¤–åœ°è¯»ä¹¦ï¼Œå¥¹å¯„æ¥çš„æ¡‚èŠ±ç³•æ€»ç”¨æ²¹çº¸ä»”ç»†åŒ…ç€ï¼Œæ‹†å¼€æ—¶ï¼Œç”œå‘³é‡Œè¿˜å¸¦ç€å¥¹æ‰‹å¿ƒçš„æ¸©åº¦ã€‚é‚£äº›å¹´çš„ä¿¡ï¼Œå†™æ»¡äº† â€œå¤©å‡‰åŠ è¡£â€â€œåˆ«çœç€èŠ±é’±â€ï¼Œæ²¡æœ‰åä¸½çš„è¯è—»ï¼Œå´è—ç€æœ€æœ´ç´ çš„ç‰µæŒ‚ â€”â€” åŸæ¥äº²æƒ…ä»ä¸æ˜¯è½°è½°çƒˆçƒˆçš„èª“è¨€ï¼Œè€Œæ˜¯è—åœ¨æ—¥å¤ä¸€æ—¥çš„æƒ¦å¿µé‡Œï¼Œåƒæ¡‚èŠ±ç³•çš„ç”œï¼Œç»µé•¿åˆå®‰å¿ƒã€‚â€‹</p>
<p>å»å¹´å†¬å¤©ï¼Œæˆ‘åœ¨åŒ»é™¢é™ªæŠ¤ç”Ÿç—…çš„æœ‹å‹ã€‚å¥¹åŒ–ç–—åå¤´å‘æ‰å…‰ï¼Œå´ç¬‘ç€è¯´è¦å­¦ç»‡å›´å·¾ã€‚æˆ‘ä»¬ååœ¨ç—…æˆ¿çš„çª—è¾¹ï¼Œå¥¹ç¬¨æ‰‹ç¬¨è„šåœ°ç»•çº¿ï¼Œçº¿å›¢æ»šåˆ°åœ°ä¸Šï¼Œä¸¤äººç¬‘å¾—çœ¼æ³ªéƒ½å‡ºæ¥ã€‚æœ‰å¤©å¤œé‡Œå¥¹ç–¼å¾—ç¡ä¸ç€ï¼Œæˆ‘é™ªå¥¹çœ‹çª—å¤–çš„é›ªï¼Œå¥¹è½»å£°è¯´ï¼šâ€œå¹¸å¥½æœ‰ä½ åœ¨ã€‚â€ é‚£ä¸€åˆ»æˆ‘å¿½ç„¶æ˜ç™½ï¼Œå‹æƒ…ä¸æ˜¯é”¦ä¸Šæ·»èŠ±çš„çƒ­é—¹ï¼Œè€Œæ˜¯é›ªä¸­é€ç‚­çš„é™ªä¼´ã€‚å°±åƒå¯’å¤œé‡Œçš„ä¸€æ¯çƒ­èŒ¶ï¼Œä¸ç”¨å¤šè¯´ä»€ä¹ˆï¼Œé€’è¿‡å»çš„æ¸©åº¦ï¼Œå°±æ˜¯æœ€å¥½çš„å®‰æ…°ã€‚åæ¥å¥¹åº·å¤äº†ï¼Œé€ç»™æˆ‘ä¸€æ¡æ­ªæ­ªæ‰­æ‰­çš„å›´å·¾ï¼Œæ¯›çº¿çš„é¢œè‰²ä¸å¤ªå‡åŒ€ï¼Œå´æˆäº†æˆ‘æœ€çè´µçš„ç¤¼ç‰© â€”â€” é‚£é‡Œé¢ç»‡ç€æˆ‘ä»¬ä¸€èµ·ç†¬è¿‡çš„å¯’å†¬ï¼Œè—ç€å½¼æ­¤æ‰¶æŒçš„æ¸©æŸ”ã€‚â€‹</p>
<p>ä¹Ÿæ›¾åœ¨é’æ˜¥é‡Œé‡è§ä¸€åœºå¿ƒåŠ¨ã€‚é‚£å¹´å¤å¤©ï¼Œæˆ‘ä»¬åœ¨å›¾ä¹¦é¦†é çª—çš„ä½ç½®ä¸€èµ·å¤ä¹ ã€‚ä»–æ€»æŠŠé£æ‰‡å¾€æˆ‘è¿™è¾¹æ¨ï¼Œè‡ªå·±é¢å¤´ä¸Šæ»¡æ˜¯æ±—ã€‚é«˜è€ƒç»“æŸé‚£å¤©ï¼Œä»–é€æˆ‘ä¸€æœ¬ç¬”è®°æœ¬ï¼Œæ‰‰é¡µä¸Šå†™ç€ â€œæ„¿ä½ å»å¾€çš„åœ°æ–¹ï¼Œéƒ½æ˜¯é˜³å…‰â€ã€‚åæ¥æˆ‘ä»¬å»äº†ä¸åŒçš„åŸå¸‚ï¼Œè”ç³»æ¸æ¸å°‘äº†ï¼Œä½†æ¯æ¬¡çœ‹åˆ°é‚£æœ¬ç¬”è®°æœ¬ï¼Œå¿ƒé‡Œè¿˜æ˜¯ä¼šæ³›èµ·æš–æ„ã€‚åŸæ¥çˆ±æƒ…ä¸ä¸€å®šéè¦èµ°åˆ°æœ€åï¼Œé‚£äº›å¹¶è‚©èµ°è¿‡çš„æ—¶å…‰ï¼Œé‚£äº›è—åœ¨ç»†èŠ‚é‡Œçš„æ¸©æŸ”ï¼Œæ—©å·²æˆä¸ºç”Ÿå‘½é‡Œé—ªäº®çš„ç‰‡æ®µï¼Œåœ¨å›å¿†é‡Œå‘å…‰ã€‚â€‹</p>
<p>ç”Ÿæ´»å°±åƒä¸€æœ¬åšåšçš„ä¹¦ï¼Œæ¯ä¸€é¡µéƒ½å†™ç€ä¸åŒçš„æƒ…æ„Ÿã€‚æœ‰äº²æƒ…çš„ç‰µæŒ‚ï¼Œæœ‰å‹æƒ…çš„é™ªä¼´ï¼Œæœ‰çˆ±æƒ…çš„æ¸©æŸ”ã€‚è¿™äº›æƒ…æ„Ÿè—åœ¨æ—¶å…‰çš„è¤¶çš±é‡Œï¼Œæˆ–è®¸ä¸æ˜¾çœ¼ï¼Œå´æ€»èƒ½åœ¨æŸä¸ªç¬é—´ï¼Œç»™æˆ‘ä»¬æ¸©æš–å’ŒåŠ›é‡ã€‚å°±åƒå¤–å©†çš„æ¡‚èŠ±ç³•ï¼Œæœ‹å‹çš„å›´å·¾ï¼Œå°‘å¹´çš„ç¬”è®°æœ¬ï¼Œå®ƒä»¬å¸¦ç€æƒ…æ„Ÿçš„æ¸©åº¦ï¼Œåœ¨å²æœˆé‡Œé™é™æ²‰æ·€ï¼Œæˆä¸ºæˆ‘ä»¬ç”Ÿå‘½ä¸­æœ€çè´µçš„å®è—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis-bgsaveæµ…æ]]></title>    <link>https://juejin.cn/post/7554270339796877350</link>    <guid>https://juejin.cn/post/7554270339796877350</guid>    <pubDate>2025-09-27T07:08:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7554270339796877350" data-draft-id="7554270339796844582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis-bgsaveæµ…æ"/> <meta itemprop="keywords" content="åç«¯,Redis"/> <meta itemprop="datePublished" content="2025-09-27T07:08:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Penge666"/> <meta itemprop="url" content="https://juejin.cn/user/1549628692501449"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis-bgsaveæµ…æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1549628692501449/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Penge666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-09-27T07:08:34.000Z" title="Sat Sep 27 2025 07:08:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-09-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    51
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯bgsaveï¼Ÿ</h2>
<p>BGSAVE æ˜¯ Redis ç”¨äºç”Ÿæˆ RDB æŒä¹…åŒ–æ–‡ä»¶çš„æ ¸å¿ƒæ“ä½œï¼Œå®ƒçš„æœ¬è´¨æ˜¯ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹ fork ä¸€ä¸ª<strong>å­è¿›ç¨‹</strong>ï¼Œå­è¿›ç¨‹ä¼šç‹¬ç«‹éå† Redis å†…å­˜æ•°æ®ï¼Œå°†å…¶åºåˆ—åŒ–å¹¶å†™å…¥ç£ç›˜ï¼ˆç”Ÿæˆ.rdb æ–‡ä»¶ï¼‰ï¼›</li>
<li>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹å®Œå…¨ä¸å‚ä¸æ•°æ®éå†ï¼Œä»èƒ½æ­£å¸¸å¤„ç†ä¸šåŠ¡è¯·æ±‚ã€‚</li>
</ul>
<h2 data-id="heading-1">ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°bgsaveï¼Ÿ</h2>
<h3 data-id="heading-2">å®šæœŸå¤‡ä»½</h3>
<p>å®šæœŸå¤‡ä»½ç­–ç•¥</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå…¸å‹å¤‡ä»½è®¡åˆ’</span>
0 2 * * * /usr/local/bin/redis-backup.sh  <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ</span>

<span class="hljs-comment"># å¤‡ä»½è„šæœ¬ç¤ºä¾‹</span>
<span class="hljs-comment">#!/bin/bash</span>
redis-cli BGSAVE
wait_for_bgsave_complete
<span class="hljs-built_in">cp</span> /var/lib/redis/dump.rdb /backup/redis/dump-$(<span class="hljs-built_in">date</span> +%Y%m%d).rdb
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ•°æ®åº“æ¯æ—¥/æ¯å‘¨å…¨é‡å¤‡ä»½</li>
<li>ç¾å¤‡æ¢å¤å‡†å¤‡</li>
<li>æ•°æ®è¿ç§»å‰çš„å¿«ç…§</li>
</ul>
<h3 data-id="heading-3">æ•°æ®è¿ç§»</h3>
<pre><code class="hljs language-javascript" lang="javascript">æºæœåŠ¡å™¨ï¼š
redis-cli <span class="hljs-variable constant_">BGSAVE</span>
scp dump.<span class="hljs-property">rdb</span> <span class="hljs-keyword">new</span>-<span class="hljs-attr">server</span>:<span class="hljs-regexp">/path/</span>to/redis/

ç›®æ ‡æœåŠ¡å™¨ï¼š
systemctl stop redis
cp dump.<span class="hljs-property">rdb</span> /<span class="hljs-keyword">var</span>/lib/redis/
systemctl start redis
</code></pre>
<h3 data-id="heading-4">æ•…éšœæ’æŸ¥ä¸æ•°æ®åˆ†æ</h3>
<pre><code class="hljs language-scss" lang="scss"># ä½¿ç”¨RDBæ–‡ä»¶è¿›è¡Œåˆ†æ
redis-cli BGSAVE
# ç­‰å¾…å®Œæˆåä½¿ç”¨å·¥å…·åˆ†æ
rdb <span class="hljs-attr">--command</span> memory dump<span class="hljs-selector-class">.rdb</span> <span class="hljs-attr">--bytes</span> <span class="hljs-number">128</span> <span class="hljs-attr">--largest</span> <span class="hljs-number">10</span> <span class="hljs-comment">// å¤§keyåˆ†æ</span>
</code></pre>
<p><strong>åˆ†æåœºæ™¯</strong>ï¼š</p>
<ul>
<li>æŸ¥æ‰¾å†…å­˜æ³„æ¼åŸå› </li>
<li>åˆ†æå¤§Keyåˆ†å¸ƒ</li>
<li>ä¼˜åŒ–æ•°æ®ç»“æ„è®¾è®¡</li>
</ul>
<h3 data-id="heading-5">AOFé‡å†™æœºåˆ¶</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># AOFé‡å†™å†…éƒ¨æµç¨‹</span>
<span class="hljs-bullet">1.</span> redis-cli BGREWRITEAOF
<span class="hljs-bullet">2.</span> Redisæ‰§è¡Œfork()åˆ›å»ºå­è¿›ç¨‹
<span class="hljs-bullet">3.</span> å­è¿›ç¨‹åŸºäºå½“å‰æ•°æ®ç”Ÿæˆæ–°çš„AOFæ–‡ä»¶
<span class="hljs-bullet">4.</span> å®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†ä¸€æ¬¡BGSAVE+å‘½ä»¤å›æ”¾
</code></pre>
<p>** AOFé‡å†™ = BGSAVE + å‘½ä»¤å›æ”¾**</p>
<h3 data-id="heading-6">ä¸»ä»å¤åˆ¶åˆå§‹åŒ–</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æ–°ä»èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶</span>
ä¸»èŠ‚ç‚¹æµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ¥æ”¶åˆ°SLAVEOFå‘½ä»¤
<span class="hljs-bullet">2.</span> æ‰§è¡ŒBGSAVEåˆ›å»ºRDBå¿«ç…§
<span class="hljs-bullet">3.</span> å°†RDBæ–‡ä»¶å‘é€ç»™ä»èŠ‚ç‚¹
<span class="hljs-bullet">4.</span> ä»èŠ‚ç‚¹åŠ è½½RDBå®Œæˆåˆå§‹åŒ–
</code></pre>
<h2 data-id="heading-7">bgsaveä¼šå­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿ</h2>
<p>GSAVE ä¼šå¯¼è‡´ â€œä¸šåŠ¡æŠ–åŠ¨â€ å’Œ â€œå®ä¾‹æŠ–åŠ¨â€ã€‚</p>
<p>BGSAVE è™½ç„¶ä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œä½†ä¼šå ç”¨å¤§é‡<strong>ç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ IOï¼‰</strong> ï¼Œè¿™äº›èµ„æºæŠ¢å ä¼šé—´æ¥å½±å“ Redis æœåŠ¡å’Œä¾èµ–å®ƒçš„ä¸šåŠ¡ï¼Œå…·ä½“ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<h3 data-id="heading-8">1. CPU æŠ¢å </h3>
<p><strong>CPU æŠ¢å ï¼šå¯¼è‡´ä¸šåŠ¡è¯·æ±‚å“åº”å˜æ…¢ï¼ˆä¸šåŠ¡æŠ–åŠ¨ï¼‰</strong></p>
<p>BGSAVE å­è¿›ç¨‹çš„æ ¸å¿ƒå·¥ä½œæ˜¯ â€œéå†å†…å­˜æ•°æ® + åºåˆ—åŒ– + å†™ç£ç›˜â€ï¼Œè¿™ä¸‰ä¸ªæ­¥éª¤éƒ½éœ€è¦æ¶ˆè€— CPUã€‚æ¯”å¦‚ï¼šå­è¿›ç¨‹è¦æŠŠä¸€ä¸ª 1GB çš„å“ˆå¸Œè¡¨åºåˆ—åŒ–åˆ°ç£ç›˜ï¼Œéœ€è¦æŒç»­å ç”¨ CPU è¿›è¡Œæ•°æ®ç»“æ„è§£æå’ŒäºŒè¿›åˆ¶ç¼–ç  â€”â€” å¦‚æœå•æœº CPU æ˜¯ 4 æ ¸ï¼Œå­è¿›ç¨‹å¯èƒ½ä¼šå ç”¨ 1 æ ¸çš„ 80% ä»¥ä¸Šèµ„æºã€‚</p>
<p>è€Œ Redis ä¸»çº¿ç¨‹ï¼ˆå¤„ç†ä¸šåŠ¡è¯·æ±‚ï¼‰ä¹Ÿéœ€è¦ CPUï¼šæ¯”å¦‚æ‰§è¡Œ<code>HGET user:100 name</code>éœ€è¦è§£æ keyã€æŸ¥æ‰¾å“ˆå¸Œè¡¨ã€è¿”å›ç»“æœã€‚å½“å­è¿›ç¨‹æŠ¢å å¤§é‡ CPU æ—¶ï¼Œä¸»çº¿ç¨‹èƒ½æ‹¿åˆ°çš„ â€œCPU æ—¶é—´ç‰‡â€ ä¼šå‡å°‘ï¼Œç›´æ¥å¯¼è‡´ï¼š</p>
<ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ 1<del>2ms å°±èƒ½å“åº”çš„è¯·æ±‚ï¼Œå»¶è¿Ÿå¯èƒ½é£™å‡åˆ° 10</del>20msï¼›</li>
<li>é«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚æ¯ç§’ 10 ä¸‡è¯·æ±‚ï¼‰ä¸‹ï¼Œéƒ¨åˆ†è¯·æ±‚ä¼šå› è¶…æ—¶è¢«ä¸šåŠ¡ç«¯é‡è¯•ï¼Œç”šè‡³è¿”å›å¤±è´¥ â€”â€” è¿™å°±æ˜¯ â€œä¸šåŠ¡è¯·æ±‚æŠ–åŠ¨â€ã€‚</li>
</ul>
<h3 data-id="heading-9">2. å†…å­˜å¤åˆ¶</h3>
<p><strong>å†…å­˜å¤åˆ¶ï¼šå¯èƒ½è§¦å‘ â€œå†…å­˜äº¤æ¢â€ï¼ˆRedis å®ä¾‹æŠ–åŠ¨ï¼‰</strong></p>
<p>BGSAVE å­è¿›ç¨‹åˆ›å»ºæ—¶ï¼Œä¼šç”¨åˆ° Linux çš„<strong>å†™æ—¶å¤åˆ¶ï¼ˆCopy-On-Writeï¼ŒCOWï¼‰</strong> Â æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶æ˜¯ä¸ºäº† â€œèŠ‚çœå†…å­˜â€ï¼Œä½†ä¹Ÿå¯èƒ½å¼•å‘æ–°é—®é¢˜ã€‚</p>
<p>COW çš„é€»è¾‘æ˜¯ï¼š</p>
<ul>
<li>å­è¿›ç¨‹åˆšåˆ›å»ºæ—¶ï¼Œä¸ç›´æ¥æ‹·è´ä¸»çº¿ç¨‹çš„å†…å­˜æ•°æ®ï¼Œè€Œæ˜¯å’Œä¸»çº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ï¼›</li>
<li>åªæœ‰å½“ä¸»çº¿ç¨‹ä¿®æ”¹æŸå—å†…å­˜ï¼ˆæ¯”å¦‚æ‰§è¡Œ<code>SET key new_val</code>ï¼‰æ—¶ï¼Œç³»ç»Ÿæ‰ä¼š â€œå¤åˆ¶â€ è¿™å—å†…å­˜çš„æ—§ç‰ˆæœ¬ç»™å­è¿›ç¨‹ï¼ˆç¡®ä¿å­è¿›ç¨‹èƒ½æ‹¿åˆ°ä¿®æ”¹å‰çš„æ•°æ®ï¼Œç”Ÿæˆä¸€è‡´å¿«ç…§ï¼‰ã€‚</li>
</ul>
<p>å¦‚æœ Redis å†…å­˜å ç”¨å¾ˆé«˜ï¼ˆæ¯”å¦‚ 16GB å†…å­˜ç”¨äº† 14GBï¼‰ï¼Œä¸” BGSAVE æœŸé—´æœ‰å¤§é‡å†™æ“ä½œï¼ˆæ¯”å¦‚æ¯ç§’ 1 ä¸‡æ¬¡<code>SET</code>ï¼‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>å¤§é‡å†…å­˜è¢« â€œå¤åˆ¶â€ï¼šä¸»çº¿ç¨‹æ¯ä¿®æ”¹ä¸€å—å†…å­˜ï¼Œå°±ä¼šç”Ÿæˆä¸€ä»½å‰¯æœ¬ï¼Œå¯¼è‡´ç³»ç»Ÿå¯ç”¨å†…å­˜éª¤é™ï¼›</li>
<li>è§¦å‘ Swapï¼ˆå†…å­˜äº¤æ¢ï¼‰ï¼šå½“å¯ç”¨å†…å­˜ä¸è¶³æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠéƒ¨åˆ†å†…å­˜æ•°æ®å†™åˆ°ç£ç›˜çš„ â€œäº¤æ¢åˆ†åŒºâ€ï¼ˆSwap åˆ†åŒºï¼‰ï¼Œè€Œç£ç›˜ IO é€Ÿåº¦æ¯”å†…å­˜æ…¢ 1000 å€ä»¥ä¸Šï¼›</li>
<li>Redis å®ä¾‹å¡é¡¿ï¼šä¸»çº¿ç¨‹è¦è¯»å–è¢«äº¤æ¢åˆ°ç£ç›˜çš„æ•°æ®æ—¶ï¼Œéœ€è¦ç­‰å¾…ç£ç›˜ IOï¼Œå“åº”å»¶è¿Ÿä¼šä»æ¯«ç§’çº§å˜æˆç™¾æ¯«ç§’çº§ï¼Œç”šè‡³å‡ºç° â€œå®ä¾‹çŸ­æš‚æ— å“åº”â€â€”â€” è¿™å°±æ˜¯ â€œRedis æœåŠ¡å®ä¾‹æŠ–åŠ¨â€ã€‚</li>
</ul>
<h3 data-id="heading-10">3. ç£ç›˜ IO æŠ¢å </h3>
<p><strong>ç£ç›˜ IO æŠ¢å ï¼šæ‹–æ…¢ AOF æŒä¹…åŒ–ï¼ˆé›ªä¸ŠåŠ éœœï¼‰</strong></p>
<p>å¦‚æœä½ çš„ Redis åŒæ—¶å¼€å¯äº† AOF æŒä¹…åŒ–ï¼ˆ<code>AppendOnly yes</code>ï¼Œç”Ÿäº§ç¯å¢ƒå¤§å¤šä¼šå¼€ï¼‰ï¼ŒBGSAVE è¿˜ä¼šå’Œ AOF æŠ¢å ç£ç›˜ IO èµ„æºã€‚</p>
<p>AOF çš„é€»è¾‘æ˜¯ï¼šä¸»çº¿ç¨‹æ‰§è¡Œä¿®æ”¹å‘½ä»¤åï¼Œä¼šæŠŠå‘½ä»¤å†™å…¥ AOF ç¼“å†²åŒºï¼Œå†ç”±åå°çº¿ç¨‹å®šæœŸå°†ç¼“å†²åŒºå†…å®¹åˆ·åˆ°ç£ç›˜ï¼ˆé»˜è®¤æ¯ç§’ä¸€æ¬¡ï¼Œ<code>appendfsync everysec</code>ï¼‰ã€‚</p>
<p>è€Œ BGSAVE å­è¿›ç¨‹éœ€è¦æŠŠ 16GB çš„å†…å­˜æ•°æ®å†™å…¥ç£ç›˜ï¼ˆç”Ÿæˆ.rdb æ–‡ä»¶ï¼‰ï¼Œä¼šå ç”¨å¤§é‡ç£ç›˜å†™ IOâ€”â€” æ¯”å¦‚åŸæœ¬ AOF åˆ·ç›˜æ¯ç§’åªéœ€è¦ 10MB IOï¼ŒBGSAVE æ‰§è¡Œæ—¶ç£ç›˜å†™ IO å¯èƒ½é£™å‡åˆ° 100MB/sï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>AOF åˆ·ç›˜å»¶è¿Ÿï¼šåŸæœ¬ 1ms èƒ½å®Œæˆçš„åˆ·ç›˜ï¼Œå˜æˆ 20msï¼›</li>
<li>ä¸»çº¿ç¨‹ç­‰å¾…åˆ·ç›˜ï¼šå¦‚æœ AOF ç¼“å†²åŒºæ»¡äº†ï¼Œä¸»çº¿ç¨‹ä¼šæš‚æ—¶é˜»å¡ç­‰å¾…åˆ·ç›˜å®Œæˆï¼Œè¿›ä¸€æ­¥åŠ å‰§ä¸šåŠ¡è¯·æ±‚å»¶è¿Ÿã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot + MQTT å¦‚ä½•å®ç°å–è´§å°±èµ°çš„æ™ºèƒ½å”®è´§æŸœç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7579093412332109834</link>    <guid>https://juejin.cn/post/7579093412332109834</guid>    <pubDate>2025-12-03T01:19:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579093412332109834" data-draft-id="7572455881029861385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot + MQTT å¦‚ä½•å®ç°å–è´§å°±èµ°çš„æ™ºèƒ½å”®è´§æŸœç³»ç»Ÿ"/> <meta itemprop="keywords" content="Java,åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T01:19:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot + MQTT å¦‚ä½•å®ç°å–è´§å°±èµ°çš„æ™ºèƒ½å”®è´§æŸœç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T01:19:19.000Z" title="Wed Dec 03 2025 01:19:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åã€‚æ˜¨å¤©åœ¨åŠå…¬æ¥¼åº•ä¸‹ï¼Œæˆ‘ç”¨äº†ä¸€ä¸‹é‚£ç§å¼€é—¨æ‹¿è´§ï¼Œå…³é—¨è‡ªåŠ¨æ‰£è´¹çš„æ™ºèƒ½å”®è´§æŸœï¼ŒçœŸæŒºæ–¹ä¾¿çš„ã€‚</p>
<p>å…¶å®è¿™ç§å”®è´§æŸœå¹¶ä¸å°‘è§ï¼Œå¾ˆå¤šæ— äººå”®è´§åº—ã€åœ°é“ç«™å’Œæ™¯åŒºéƒ½èƒ½ç»å¸¸çœ‹æ‡‚ã€‚</p>
<p>é‚£è¿™ç§æµç¨‹æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹æ•´ä¸ªå®ç°çš„æµç¨‹ã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong></p>
<ol>
<li>ä½ ç”¨å¾®ä¿¡æ‰«æå”®è´§æŸœä¸Šçš„äºŒç»´ç </li>
<li>æŸœé—¨å’”åš“ä¸€å£°è‡ªåŠ¨æ‰“å¼€</li>
<li>ä½ æ‹¿å‡ºæƒ³è¦çš„å•†å“ï¼ŒåŒæ—¶å¯ä»¥éšæ„æ›´æ¢</li>
<li>å…³ä¸ŠæŸœé—¨ï¼Œç„¶åæ‰‹æœºè‡ªåŠ¨æ”¶åˆ°æ‰£æ¬¾é€šçŸ¥</li>
<li>æ•´ä¸ªè¿‡ç¨‹ä¸­æ— éœ€ä»»ä½•é¢å¤–æ“ä½œ</li>
</ol>
<h2 data-id="heading-0">æ ¸å¿ƒæŠ€æœ¯æ ˆï¼ˆSpingbootï¼‰</h2>

































<table><thead><tr><th>æŠ€æœ¯ç»„ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>Spring Boot</td><td>åç«¯ä¸»æ¡†æ¶</td></tr><tr><td>Redis</td><td>é«˜é€Ÿç¼“å­˜</td></tr><tr><td>MQTT</td><td>ç‰©è”ç½‘é€šä¿¡åè®®</td></tr><tr><td>MySQL</td><td>å…³ç³»å‹æ•°æ®åº“</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ—</td><td>å¼‚æ­¥ä»»åŠ¡å¤„ç†</td></tr><tr><td>è®¡ç®—æœºè§†è§‰</td><td>æ‹æ‘„å•†å“è¯†åˆ«</td></tr></tbody></table>
<h2 data-id="heading-1">å®Œæ•´æŠ€æœ¯æµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-2">ç¬¬ä¸€é˜¶æ®µï¼šæ‰«ç å¼€é—¨ï¼ˆèº«ä»½éªŒè¯ä¸åˆå§‹åŒ–ï¼‰</h3>
<p><strong>ç”¨æˆ·åŠ¨ä½œ</strong>ï¼šå¾®ä¿¡æ‰«ç  â†’ æˆæƒ â†’ æŸœé—¨æ‰“å¼€</p>
<p><strong>åå°æµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>èº«ä»½è®¤è¯</strong>ï¼šéªŒè¯å¾®ä¿¡è´¦å·çš„åˆæ³•æ€§</li>
<li><strong>è®¾å¤‡çŠ¶æ€æ£€æŸ¥</strong>ï¼šç¡®è®¤å”®è´§æŸœæ˜¯å¦å¯ç”¨</li>
<li><strong>åˆ›å»ºä¼šè¯</strong>ï¼šåœ¨Redisä¸­å»ºç«‹ä¸´æ—¶è´­ç‰©è½¦</li>
<li><strong>æ•°æ®é‡‡é›†</strong>ï¼šæ‹æ‘„è´§æ¶åˆå§‹ç…§ç‰‡ï¼Œè®°å½•ä¼ æ„Ÿå™¨æ•°æ®</li>
<li><strong>å¼€é—¨æŒ‡ä»¤</strong>ï¼šé€šè¿‡MQTTåè®®å‘é€å¼€é—¨å‘½ä»¤</li>
</ol>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Rediså­˜å‚¨ä¸´æ—¶ä¼šè¯ï¼Œè¯»å†™é€Ÿåº¦è¾¾åˆ°å¾®ç§’çº§</li>
<li>MQTTåè®®ä¸“ä¸ºç‰©è”ç½‘è®¾è®¡ï¼Œä½åŠŸè€—ã€é«˜å¯é </li>
<li>åˆå§‹å¿«ç…§ä¸ºåç»­å¯¹æ¯”æä¾›åŸºå‡†æ•°æ®</li>
</ul>
<h3 data-id="heading-3">ç¬¬äºŒé˜¶æ®µï¼šè‡ªç”±é€‰è´­ï¼ˆå®æ—¶äº‹ä»¶è¿½è¸ªï¼‰</h3>
<p><strong>ç”¨æˆ·åŠ¨ä½œ</strong>ï¼šæ‹¿å–å•†å“ â†’ å¯èƒ½æ›´æ¢ â†’ ç»§ç»­é€‰è´­</p>
<p><strong>ç³»ç»Ÿç›‘æ§</strong>ï¼š</p>
<ol>
<li><strong>è§†è§‰è¿½è¸ª</strong>ï¼šæ‘„åƒå¤´å®æ—¶è¯†åˆ«æ‰‹éƒ¨åŠ¨ä½œå’Œå•†å“å˜åŒ–</li>
<li><strong>é‡é‡æ„Ÿåº”</strong>ï¼šæ¯ä¸ªè´§é“çš„ä¼ æ„Ÿå™¨ç›‘æµ‹é‡é‡å˜åŒ–</li>
<li><strong>äº‹ä»¶ä¸ŠæŠ¥</strong>ï¼šå®æ—¶å°†"æ‹¿å–/æ”¾å›"åŠ¨ä½œå‘é€åˆ°åå°</li>
<li><strong>å®æ—¶è®°å½•</strong>ï¼šåœ¨Redisä¸­æ›´æ–°è´­ç‰©è½¦çŠ¶æ€</li>
</ol>
<p><strong>æŠ€æœ¯éš¾ç‚¹çªç ´</strong>ï¼š</p>
<ul>
<li>å®æ—¶è§†é¢‘æµå¤„ç†ï¼Œå»¶è¿Ÿæ§åˆ¶åœ¨100msä»¥å†…</li>
<li>å¤šä¼ æ„Ÿå™¨æ•°æ®èåˆï¼Œæé«˜è¯†åˆ«å‡†ç¡®ç‡</li>
<li>é«˜å¹¶å‘äº‹ä»¶å¤„ç†ï¼Œæ”¯æŒå¤šç”¨æˆ·åŒæ—¶è´­ç‰©</li>
</ul>
<h3 data-id="heading-4">ç¬¬ä¸‰é˜¶æ®µï¼šå…³é—¨ç»“ç®—ï¼ˆå¼‚æ­¥æ¸…ç®—æµç¨‹ï¼‰</h3>
<p><strong>ç”¨æˆ·åŠ¨ä½œ</strong>ï¼šå…³é—­æŸœé—¨ â†’ è‡ªåŠ¨è§¦å‘ç»“ç®—</p>
<p><strong>æ ¸å¿ƒæ¸…ç®—æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs">å…³é—¨ä¿¡å· â†’ å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ â†’ æ•°æ®æ”¶é›† â†’ ä¸‰é‡æ ¡éªŒ â†’ æ”¯ä»˜æ‰£æ¬¾ â†’ çŠ¶æ€æ›´æ–°
</code></pre>
<p><strong>è¯¦ç»†æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>è§¦å‘ç»“ç®—</strong>ï¼šé—¨ç£ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°å…³é—¨åŠ¨ä½œ</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šé¿å…ç”¨æˆ·ç­‰å¾…ï¼Œå¦èµ·çº¿ç¨‹å¤„ç†å¤æ‚è®¡ç®—</li>
<li><strong>æ•°æ®æ”¶é›†</strong>ï¼šè·å–å…³é—¨å¿«ç…§å’Œæœ€ç»ˆä¼ æ„Ÿå™¨æ•°æ®</li>
<li><strong>ä¸‰é‡æ ¡éªŒ</strong>ï¼š
<ul>
<li>è§†è§‰å¯¹æ¯”ï¼šå¼€é—¨vså…³é—¨å›¾ç‰‡å·®å¼‚åˆ†æ</li>
<li>é‡é‡åˆ†æï¼šå„è´§é“é‡é‡å˜åŒ–è®¡ç®—</li>
<li>äº‹ä»¶å¤æ ¸ï¼šæ ¸å¯¹å®æ—¶è®°å½•çš„äº‹ä»¶åºåˆ—</li>
</ul>
</li>
<li><strong>å†²çªè§£å†³</strong>ï¼šå½“ä¸‰ç§æ–¹å¼ç»“æœä¸ä¸€è‡´æ—¶çš„æ™ºèƒ½å†³ç­–</li>
<li><strong>æ”¯ä»˜æ‰§è¡Œ</strong>ï¼šè°ƒç”¨æ”¯ä»˜æ¥å£å®Œæˆæ‰£æ¬¾</li>
<li><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šæ ‡è®°è®¢å•å®Œæˆï¼Œæ¸…ç†ç¼“å­˜</li>
</ol>
<h2 data-id="heading-5">ç¤ºä¾‹ä»£ç å®ç°</h2>
<h3 data-id="heading-6">1. æ ¸å¿ƒæ•°æ®æ¨¡å‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¢å•å®ä½“</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "vending_orders")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VendingOrder</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> String userId;          <span class="hljs-comment">// ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> String deviceId;        <span class="hljs-comment">// è®¾å¤‡ID</span>
    <span class="hljs-keyword">private</span> String status;          <span class="hljs-comment">// çŠ¶æ€: OPEN/CLOSED/PAID/FAILED</span>
    <span class="hljs-keyword">private</span> BigDecimal amount;      <span class="hljs-comment">// è®¢å•é‡‘é¢</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;
}

<span class="hljs-comment">// Redisç¼“å­˜ä¸­çš„è®¾å¤‡ä¼šè¯</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeviceSession</span> {
    <span class="hljs-keyword">private</span> String sessionId;
    <span class="hljs-keyword">private</span> String deviceId;
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> String userId;
    <span class="hljs-keyword">private</span> String status;          <span class="hljs-comment">// ä¼šè¯çŠ¶æ€</span>
    <span class="hljs-keyword">private</span> LocalDateTime startTime;
    <span class="hljs-keyword">private</span> List&lt;DeviceEvent&gt; events; <span class="hljs-comment">// è´­ç‰©äº‹ä»¶è®°å½•</span>
}

<span class="hljs-comment">// è®¾å¤‡äº‹ä»¶</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeviceEvent</span> {
    <span class="hljs-keyword">private</span> String eventId;
    <span class="hljs-keyword">private</span> String deviceId;
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> String type;            <span class="hljs-comment">// PICK/PUT_BACK</span>
    <span class="hljs-keyword">private</span> String productId;
    <span class="hljs-keyword">private</span> LocalDateTime eventTime;
    <span class="hljs-keyword">private</span> String position;        <span class="hljs-comment">// è´§é“ä½ç½®</span>
}
</code></pre>
<h3 data-id="heading-7">2. æ§åˆ¶å™¨å±‚ - å¤„ç†HTTPè¯·æ±‚</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/vending")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VendingController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> VendingService vendingService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SettlementService settlementService;
    
    <span class="hljs-comment">/**
     * æ‰«ç å¼€é—¨æ¥å£
     */</span>
    <span class="hljs-meta">@PostMapping("/open")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;ApiResponse&gt; <span class="hljs-title function_">openDevice</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> String deviceId,
            <span class="hljs-meta">@RequestParam</span> String authToken)</span> {
        
        log.info(<span class="hljs-string">"æ”¶åˆ°å¼€é—¨è¯·æ±‚: deviceId={}"</span>, deviceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">OpenResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> vendingService.processOpenDevice(deviceId, authToken);
            <span class="hljs-keyword">return</span> ResponseEntity.ok(ApiResponse.success(result));
            
        } <span class="hljs-keyword">catch</span> (BusinessException e) {
            log.warn(<span class="hljs-string">"å¼€é—¨ä¸šåŠ¡å¼‚å¸¸: {}"</span>, e.getMessage());
            <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(ApiResponse.error(e.getMessage()));
        }
    }
    
    <span class="hljs-comment">/**
     * æŸ¥è¯¢è®¢å•çŠ¶æ€
     */</span>
    <span class="hljs-meta">@GetMapping("/order/{orderId}")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;ApiResponse&gt; <span class="hljs-title function_">getOrderStatus</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String orderId)</span> {
        <span class="hljs-type">VendingOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> vendingService.getOrderById(orderId);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(ApiResponse.success(order));
    }
}

<span class="hljs-comment">// ç»Ÿä¸€APIå“åº”æ ¼å¼</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiResponse</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> success;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> Object data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApiResponse <span class="hljs-title function_">success</span><span class="hljs-params">(Object data)</span> {
        <span class="hljs-type">ApiResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiResponse</span>();
        response.setSuccess(<span class="hljs-literal">true</span>);
        response.setData(data);
        <span class="hljs-keyword">return</span> response;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApiResponse <span class="hljs-title function_">error</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-type">ApiResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiResponse</span>();
        response.setSuccess(<span class="hljs-literal">false</span>);
        response.setMessage(message);
        <span class="hljs-keyword">return</span> response;
    }
}
</code></pre>
<h3 data-id="heading-8">3. æ ¸å¿ƒæœåŠ¡å±‚ - å¼€é—¨å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VendingService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserAuthService authService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DeviceService deviceService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MqttService mqttService;
    
    <span class="hljs-comment">/**
     * å¤„ç†å¼€é—¨è¯·æ±‚çš„æ ¸å¿ƒé€»è¾‘
     */</span>
    <span class="hljs-keyword">public</span> OpenResult <span class="hljs-title function_">processOpenDevice</span><span class="hljs-params">(String deviceId, String authToken)</span> {
        <span class="hljs-comment">// 1. ç”¨æˆ·èº«ä»½éªŒè¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> authService.verifyWechatToken(authToken);
        <span class="hljs-keyword">if</span> (userId == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç”¨æˆ·èº«ä»½éªŒè¯å¤±è´¥"</span>);
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥è®¾å¤‡çŠ¶æ€</span>
        <span class="hljs-type">DeviceStatus</span> <span class="hljs-variable">deviceStatus</span> <span class="hljs-operator">=</span> deviceService.getDeviceStatus(deviceId);
        <span class="hljs-keyword">if</span> (!deviceStatus.isAvailable()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"è®¾å¤‡æš‚ä¸å¯ç”¨: "</span> + deviceStatus.getStatus());
        }
        
        <span class="hljs-comment">// 3. åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">VendingOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderService.createOrder(userId, deviceId);
        log.info(<span class="hljs-string">"åˆ›å»ºè®¢å•æˆåŠŸ: orderId={}, userId={}, deviceId={}"</span>, 
                order.getOrderId(), userId, deviceId);
        
        <span class="hljs-comment">// 4. åˆ›å»ºè®¾å¤‡ä¼šè¯å¹¶ç¼“å­˜</span>
        <span class="hljs-type">DeviceSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> createDeviceSession(deviceId, order);
        cacheDeviceSession(session);
        
        <span class="hljs-comment">// 5. é”å®šè®¾å¤‡ï¼Œé¿å…é‡å¤å¼€é—¨</span>
        deviceService.lockDevice(deviceId, order.getOrderId());
        
        <span class="hljs-comment">// 6. å‘é€å¼€é—¨æŒ‡ä»¤</span>
        mqttService.sendOpenCommand(deviceId);
        
        <span class="hljs-comment">// 7. è¯·æ±‚è®¾å¤‡ä¸ŠæŠ¥åˆå§‹çŠ¶æ€</span>
        mqttService.requestInitialSnapshot(deviceId);
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenResult</span>(order.getOrderId(), deviceId, <span class="hljs-string">"å¼€é—¨æŒ‡ä»¤å·²å‘é€"</span>);
    }
    
    <span class="hljs-keyword">private</span> DeviceSession <span class="hljs-title function_">createDeviceSession</span><span class="hljs-params">(String deviceId, VendingOrder order)</span> {
        <span class="hljs-type">DeviceSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeviceSession</span>();
        session.setSessionId(UUID.randomUUID().toString());
        session.setDeviceId(deviceId);
        session.setOrderId(order.getOrderId());
        session.setUserId(order.getUserId());
        session.setStatus(<span class="hljs-string">"OPEN"</span>);
        session.setStartTime(LocalDateTime.now());
        session.setEvents(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());
        <span class="hljs-keyword">return</span> session;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cacheDeviceSession</span><span class="hljs-params">(DeviceSession session)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> buildSessionKey(session.getDeviceId());
        redisTemplate.opsForValue().set(key, session, Duration.ofMinutes(<span class="hljs-number">10</span>));
        log.debug(<span class="hljs-string">"è®¾å¤‡ä¼šè¯å·²ç¼“å­˜: key={}"</span>, key);
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildSessionKey</span><span class="hljs-params">(String deviceId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"vending:session:"</span> + deviceId;
    }
}
</code></pre>
<h3 data-id="heading-9">4. MQTTæ¶ˆæ¯å¤„ç† - è®¾å¤‡é€šä¿¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MqttMessageHandler</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> VendingService vendingService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SettlementService settlementService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;
    
    <span class="hljs-comment">/**
     * å¤„ç†å…³é—¨äº‹ä»¶ - è§¦å‘ç»“ç®—æµç¨‹
     */</span>
    <span class="hljs-meta">@MqttListener(topics = "device/${spring.application.env}/+/event/door_close")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDoorClose</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">DoorCloseEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> JSON.parseObject(message, DoorCloseEvent.class);
            log.info(<span class="hljs-string">"æ”¶åˆ°å…³é—¨äº‹ä»¶: deviceId={}"</span>, event.getDeviceId());
            
            <span class="hljs-comment">// å¼‚æ­¥å¤„ç†ç»“ç®—ï¼Œä¸é˜»å¡MQTTçº¿ç¨‹</span>
            CompletableFuture.runAsync(() -&gt; {
                settlementService.startSettlementProcess(event.getDeviceId());
            });
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†å…³é—¨äº‹ä»¶å¤±è´¥: message={}"</span>, message, e);
        }
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å•†å“æ‹¿å–/æ”¾å›äº‹ä»¶
     */</span>
    <span class="hljs-meta">@MqttListener(topics = "device/${spring.application.env}/+/event/product")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleProductEvent</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">ProductEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> JSON.parseObject(message, ProductEvent.class);
            log.debug(<span class="hljs-string">"å¤„ç†å•†å“äº‹ä»¶: deviceId={}, type={}, product={}"</span>, 
                     event.getDeviceId(), event.getEventType(), event.getProductId());
            
            <span class="hljs-comment">// è®°å½•åˆ°Redisç¼“å­˜</span>
            recordProductEvent(event);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†å•†å“äº‹ä»¶å¤±è´¥: message={}"</span>, message, e);
        }
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†è®¾å¤‡ä¸ŠæŠ¥çš„åˆå§‹/æœ€ç»ˆå¿«ç…§
     */</span>
    <span class="hljs-meta">@MqttListener(topics = "device/${spring.application.env}/+/snapshot")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSnapshot</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">DeviceSnapshot</span> <span class="hljs-variable">snapshot</span> <span class="hljs-operator">=</span> JSON.parseObject(message, DeviceSnapshot.class);
            log.info(<span class="hljs-string">"å¤„ç†è®¾å¤‡å¿«ç…§: deviceId={}, type={}"</span>, 
                    snapshot.getDeviceId(), snapshot.getSnapshotType());
            
            <span class="hljs-comment">// å­˜å‚¨å¿«ç…§æ•°æ®ï¼Œç”¨äºåç»­å¯¹æ¯”åˆ†æ</span>
            storeDeviceSnapshot(snapshot);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¤„ç†å¿«ç…§å¤±è´¥: message={}"</span>, message, e);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordProductEvent</span><span class="hljs-params">(ProductEvent event)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"vending:session:"</span> + event.getDeviceId();
        <span class="hljs-type">DeviceSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> (DeviceSession) redisTemplate.opsForValue().get(sessionKey);
        
        <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">DeviceEvent</span> <span class="hljs-variable">deviceEvent</span> <span class="hljs-operator">=</span> convertToDeviceEvent(event, session.getOrderId());
            session.getEvents().add(deviceEvent);
            redisTemplate.opsForValue().set(sessionKey, session, Duration.ofMinutes(<span class="hljs-number">10</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">5. ç»“ç®—æœåŠ¡ - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SettlementService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DeviceService deviceService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentService paymentService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> NotificationService notificationService;
    
    <span class="hljs-comment">/**
     * å¯åŠ¨ç»“ç®—æµç¨‹
     */</span>
    <span class="hljs-meta">@Async("settlementExecutor")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startSettlementProcess</span><span class="hljs-params">(String deviceId)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹ç»“ç®—æµç¨‹: deviceId={}"</span>, deviceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. è·å–è®¾å¤‡ä¼šè¯</span>
            <span class="hljs-type">DeviceSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> getDeviceSession(deviceId);
            <span class="hljs-keyword">if</span> (session == <span class="hljs-literal">null</span>) {
                log.error(<span class="hljs-string">"è®¾å¤‡ä¼šè¯ä¸å­˜åœ¨: deviceId={}"</span>, deviceId);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// 2. æ›´æ–°è®¢å•çŠ¶æ€ä¸ºç»“ç®—ä¸­</span>
            orderService.updateOrderStatus(session.getOrderId(), <span class="hljs-string">"SETTLING"</span>);
            
            <span class="hljs-comment">// 3. è·å–è®¾å¤‡ä¸ŠæŠ¥çš„æœ€ç»ˆæ•°æ®</span>
            <span class="hljs-type">SettlementData</span> <span class="hljs-variable">settlementData</span> <span class="hljs-operator">=</span> collectSettlementData(deviceId);
            
            <span class="hljs-comment">// 4. æ‰§è¡Œç»“ç®—è®¡ç®—</span>
            <span class="hljs-type">SettlementResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> calculateSettlement(settlementData);
            
            <span class="hljs-comment">// 5. å¤„ç†æ”¯ä»˜</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">paymentSuccess</span> <span class="hljs-operator">=</span> processPayment(session, result);
            
            <span class="hljs-comment">// 6. æ›´æ–°è®¢å•çŠ¶æ€</span>
            updateOrderAfterSettlement(session, result, paymentSuccess);
            
            <span class="hljs-comment">// 7. æ¸…ç†èµ„æº</span>
            cleanupAfterSettlement(deviceId, session.getOrderId());
            
            log.info(<span class="hljs-string">"ç»“ç®—æµç¨‹å®Œæˆ: deviceId={}, orderId={}, success={}"</span>, 
                    deviceId, session.getOrderId(), paymentSuccess);
                    
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"ç»“ç®—æµç¨‹å¼‚å¸¸: deviceId={}"</span>, deviceId, e);
            handleSettlementFailure(deviceId, e);
        }
    }
    
    <span class="hljs-comment">/**
     * æ”¶é›†ç»“ç®—æ‰€éœ€çš„æ‰€æœ‰æ•°æ®
     */</span>
    <span class="hljs-keyword">private</span> SettlementData <span class="hljs-title function_">collectSettlementData</span><span class="hljs-params">(String deviceId)</span> {
        <span class="hljs-type">SettlementData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SettlementData</span>();
        
        <span class="hljs-comment">// è·å–åˆå§‹å’Œæœ€ç»ˆå¿«ç…§</span>
        data.setInitialSnapshot(deviceService.getInitialSnapshot(deviceId));
        data.setFinalSnapshot(deviceService.getFinalSnapshot(deviceId));
        
        <span class="hljs-comment">// è·å–é‡é‡ä¼ æ„Ÿå™¨æ•°æ®</span>
        data.setWeightData(deviceService.getWeightSensorData(deviceId));
        
        <span class="hljs-comment">// è·å–è´­ç‰©äº‹ä»¶è®°å½•</span>
        data.setProductEvents(getRecordedEvents(deviceId));
        
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-comment">/**
     * æ ¸å¿ƒç»“ç®—ç®—æ³• - ä¸‰é‡æ ¡éªŒ
     */</span>
    <span class="hljs-keyword">private</span> SettlementResult <span class="hljs-title function_">calculateSettlement</span><span class="hljs-params">(SettlementData data)</span> {
        <span class="hljs-comment">// 1. è§†è§‰å¯¹æ¯”åˆ†æ</span>
        List&lt;Product&gt; visualProducts = analyzeVisualChanges(
            data.getInitialSnapshot(), 
            data.getFinalSnapshot()
        );
        
        <span class="hljs-comment">// 2. é‡é‡å˜åŒ–åˆ†æ</span>
        List&lt;Product&gt; weightProducts = analyzeWeightChanges(data.getWeightData());
        
        <span class="hljs-comment">// 3. äº‹ä»¶è®°å½•åˆ†æ</span>
        List&lt;Product&gt; eventProducts = analyzeEventSequence(data.getProductEvents());
        
        <span class="hljs-comment">// 4. å†²çªè§£å†³å’Œç»“æœèåˆ</span>
        <span class="hljs-keyword">return</span> resolveProductConflicts(visualProducts, weightProducts, eventProducts);
    }
    
    <span class="hljs-comment">/**
     * å†²çªè§£å†³ç­–ç•¥
     */</span>
    <span class="hljs-keyword">private</span> SettlementResult <span class="hljs-title function_">resolveProductConflicts</span><span class="hljs-params">(List&lt;Product&gt; visualProducts, 
                                                    List&lt;Product&gt; weightProducts,
                                                    List&lt;Product&gt; eventProducts)</span> {
        <span class="hljs-type">SettlementResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SettlementResult</span>();
        
        <span class="hljs-comment">// ç­–ç•¥1: è§†è§‰è¯†åˆ«ä¼˜å…ˆï¼ˆæœ€ç›´æ¥è¯æ®ï¼‰</span>
        Map&lt;String, Product&gt; productMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// é¦–å…ˆä¿¡ä»»è§†è§‰è¯†åˆ«ç»“æœ</span>
        <span class="hljs-keyword">for</span> (Product product : visualProducts) {
            productMap.put(product.getPosition(), product);
        }
        
        <span class="hljs-comment">// ç”¨é‡é‡æ•°æ®éªŒè¯å’Œè¡¥å……</span>
        <span class="hljs-keyword">for</span> (Product weightProduct : weightProducts) {
            <span class="hljs-type">Product</span> <span class="hljs-variable">visualProduct</span> <span class="hljs-operator">=</span> productMap.get(weightProduct.getPosition());
            <span class="hljs-keyword">if</span> (visualProduct == <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// è§†è§‰æ²¡è¯†åˆ«åˆ°ä½†é‡é‡æœ‰å˜åŒ–ï¼Œä¿¡ä»»é‡é‡æ•°æ®</span>
                productMap.put(weightProduct.getPosition(), weightProduct);
            }
        }
        
        <span class="hljs-comment">// ç”¨äº‹ä»¶è®°å½•è¿›è¡Œæœ€ç»ˆæ ¡éªŒ</span>
        result.setFinalProducts(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(productMap.values()));
        result.setConflictResolved(<span class="hljs-literal">true</span>);
        
        log.debug(<span class="hljs-string">"å†²çªè§£å†³å®Œæˆ: è§†è§‰è¯†åˆ«{}ä¸ª, é‡é‡å˜åŒ–{}ä¸ª, æœ€ç»ˆç¡®è®¤{}ä¸ª"</span>, 
                 visualProducts.size(), weightProducts.size(), result.getFinalProducts().size());
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-11">6. æ”¯ä»˜æœåŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> WechatPayService wechatPayService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-comment">/**
     * æ‰§è¡Œæ”¯ä»˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">processPayment</span><span class="hljs-params">(DeviceSession session, SettlementResult result)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">PaymentRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentRequest</span>();
            request.setUserId(session.getUserId());
            request.setOrderId(session.getOrderId());
            request.setAmount(calculateTotalAmount(result.getFinalProducts()));
            request.setDescription(<span class="hljs-string">"æ™ºèƒ½å”®è´§æŸœè´­ç‰©"</span>);
            
            <span class="hljs-type">PaymentResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> wechatPayService.unifiedOrder(request);
            
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"SUCCESS"</span>.equals(response.getResultCode())) {
                log.info(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ: orderId={}, amount={}"</span>, 
                        session.getOrderId(), request.getAmount());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                log.warn(<span class="hljs-string">"æ”¯ä»˜å¤±è´¥: orderId={}, error={}"</span>, 
                        session.getOrderId(), response.getErrMsg());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"æ”¯ä»˜å¤„ç†å¼‚å¸¸: orderId={}"</span>, session.getOrderId(), e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-keyword">private</span> BigDecimal <span class="hljs-title function_">calculateTotalAmount</span><span class="hljs-params">(List&lt;Product&gt; products)</span> {
        <span class="hljs-keyword">return</span> products.stream()
                .map(Product::getPrice)
                .reduce(BigDecimal.ZERO, BigDecimal::add);
    }
}
</code></pre>
<h3 data-id="heading-12">7. é…ç½®ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-meta">@EnableScheduling</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {
    
    <span class="hljs-meta">@Bean("settlementExecutor")</span>
    <span class="hljs-keyword">public</span> TaskExecutor <span class="hljs-title function_">settlementTaskExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">5</span>);
        executor.setMaxPoolSize(<span class="hljs-number">10</span>);
        executor.setQueueCapacity(<span class="hljs-number">100</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"settlement-"</span>);
        executor.setRejectedExecutionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory factory)</span> {
        RedisTemplate&lt;String, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();
        template.setConnectionFactory(factory);
        template.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        template.setValueSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>());
        template.setHashKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());
        template.setHashValueSerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericJackson2JsonRedisSerializer</span>());
        <span class="hljs-keyword">return</span> template;
    }
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“</h2>
<p><strong>1.å¼‚æ­¥å¤„ç†</strong>ï¼šç»“ç®—æµç¨‹å¼‚æ­¥åŒ–ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…
<strong>2.ä¸‰é‡æ ¡éªŒ</strong>ï¼šè§†è§‰+é‡é‡+äº‹ä»¶è®°å½•ï¼Œç¡®ä¿å‡†ç¡®ç‡
<strong>3.å®æ—¶é€šä¿¡</strong>ï¼šMQTTä¿è¯è®¾å¤‡ä¸åå°å®æ—¶é€šä¿¡
<strong>4.ç¼“å­˜ä¼˜åŒ–</strong>ï¼šRedisæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦
<strong>5.å¼‚å¸¸å®¹é”™</strong>ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</p>
<p>è¿™ç§ç³»ç»Ÿå®Œç¾èåˆäº†ç‰©è”ç½‘ã€äº‘è®¡ç®—ã€ç§»åŠ¨æ”¯ä»˜ç­‰å‰æ²¿æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ‹¿äº†å°±èµ°çš„æ— æ„Ÿè´­ç‰©ä½“éªŒï¼Œä»£è¡¨äº†é›¶å”®è¡Œä¸šæ•°å­—åŒ–è½¬å‹çš„æœ€æ–°æˆæœã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-14">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fmaq_p_m5vd7KS-xyXt5rcA" target="_blank" title="https://mp.weixin.qq.com/s/maq_p_m5vd7KS-xyXt5rcA" ref="nofollow noopener noreferrer">ã€ŠSpringBoot+MySQL+Vueå®ç°æ–‡ä»¶å…±äº«ç³»ç»Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqI3TRTdDfRJSH9kCTqAQUw" target="_blank" title="https://mp.weixin.qq.com/s/qI3TRTdDfRJSH9kCTqAQUw" ref="nofollow noopener noreferrer">ã€Šè¿™ 10 ä¸ª MySQL é«˜çº§ç”¨æ³•ï¼Œè®©ä½ çš„ä»£ç åˆå¿«åˆå¥½çœ‹ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqFIhl5wkoebcMbmv0iSOBw" target="_blank" title="https://mp.weixin.qq.com/s/qFIhl5wkoebcMbmv0iSOBw" ref="nofollow noopener noreferrer">ã€Šåˆ«å†æŠ˜è…¾ESäº†ï¼è¿™ä¸ªå…¼å®¹MySQLçš„è½»é‡æœç´¢å¼•æ“ï¼Œæ‰æ˜¯ä¸­å°é¡¹ç›®çš„é¦–é€‰ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6OtqR95LH9Yxv3Zztjz4YQ" target="_blank" title="https://mp.weixin.qq.com/s/6OtqR95LH9Yxv3Zztjz4YQ" ref="nofollow noopener noreferrer">ã€ŠSpringBoot + MQTT å¦‚ä½•å®ç°å–è´§å°±èµ°çš„æ™ºèƒ½å”®è´§æŸœç³»ç»Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Go åšæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Ÿchromedp å¸¦ä½ é£ï¼]]></title>    <link>https://juejin.cn/post/7579169543233257472</link>    <guid>https://juejin.cn/post/7579169543233257472</guid>    <pubDate>2025-12-03T07:01:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579169543233257472" data-draft-id="7579165599043452943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ç”¨ Go åšæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Ÿchromedp å¸¦ä½ é£ï¼"/> <meta itemprop="keywords" content="åç«¯,Go,Trae"/> <meta itemprop="datePublished" content="2025-12-03T07:01:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ç”¨ Go åšæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Ÿchromedp å¸¦ä½ é£ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T07:01:39.000Z" title="Wed Dec 03 2025 07:01:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“å¤§å®¶æåˆ°â€œæµè§ˆå™¨è‡ªåŠ¨åŒ–â€ï¼Œç¬¬ä¸€ååº”å¾€å¾€æ˜¯ Python + Seleniumã€‚
ä½†å…¶å® <strong>Go è¯­è¨€ä¹Ÿèƒ½åšæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œè€Œä¸”æ›´å¿«ã€æ›´ç¨³å®šã€æ›´è½»é‡ï¼</strong></p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥èŠèŠï¼š
<strong>å¦‚ä½•ç”¨ Go + chromedp å®ç°å’Œ Python Selenium ä¸€æ ·çš„ç½‘é¡µæ“ä½œè‡ªåŠ¨åŒ–ã€‚</strong></p>
<hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ç”¨ Go åšæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Ÿ</h2>
<p>å¦‚æœä½ åšè¿‡ Python è‡ªåŠ¨åŒ–ï¼Œä½ å¯èƒ½é‡åˆ°ï¼š</p>
<ul>
<li>Selenium å¯åŠ¨æµè§ˆå™¨å¤ªæ…¢</li>
<li>ChromeDriver ä¸ Chrome ç‰ˆæœ¬å¯¹ä¸ä¸Š</li>
<li>è„šæœ¬è·‘ä¹…äº†å®¹æ˜“å¡æ­»</li>
<li>CPU å ç”¨é«˜</li>
</ul>
<p>è€Œ chromedp è§£å†³äº†è¿™äº›ç—›ç‚¹ï¼š</p>
<h3 data-id="heading-1">âœ” ä¸éœ€è¦ ChromeDriver</h3>
<p>ç›´æ¥ä½¿ç”¨æµè§ˆå™¨å†…ç½®çš„ DevTools åè®®æ§åˆ¶æµè§ˆå™¨ï¼Œæ¯” Selenium å°‘äº†ä¸€å±‚é©±åŠ¨ã€‚</p>
<h3 data-id="heading-2">âœ” é€Ÿåº¦å¿«åˆ°é£èµ·</h3>
<p>chromedp åŸºäº Go å¹¶å‘æ¨¡å‹ï¼Œæ€§èƒ½æ¯” Python Selenium æ›´é«˜ã€‚</p>
<h3 data-id="heading-3">âœ” æ›´ç¨³å®š</h3>
<p>é€šè¿‡ CDPï¼ˆChrome DevTools Protocolï¼‰ï¼Œç”± Google å®˜æ–¹ç»´æŠ¤åè®®ï¼Œæœ¬è´¨ç¨³å®šæ€§æ›´å¥½ã€‚</p>
<h3 data-id="heading-4">âœ” å¯ä»¥ Headless/æœ‰ç•Œé¢ä»»æ„åˆ‡æ¢</h3>
<p>æ—¢èƒ½æ— ç•Œé¢è·‘è„šæœ¬ï¼Œä¹Ÿèƒ½åƒäººä¸€æ ·æ“ä½œæµè§ˆå™¨ã€‚</p>
<h3 data-id="heading-5">âœ” éå¸¸é€‚åˆæœåŠ¡å™¨ã€Docker ç­‰ç¯å¢ƒè¿è¡Œ</h3>
<p>ç›¸æ¯” Selenium æ›´è½»é‡ã€‚</p>
<hr/>
<h2 data-id="heading-6">chromedp æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>chromedp æ˜¯ Go å®˜æ–¹å›¢é˜Ÿæˆå‘˜ç»´æŠ¤çš„ä¸€ä¸ªåº“ï¼Œç”¨æ¥é€šè¿‡ CDP åè®®æ§åˆ¶ Chromeã€‚</p>
<p>å®ƒå¯ä»¥ï¼š</p>
<ul>
<li>æ‰“å¼€ URL</li>
<li>è‡ªåŠ¨ç‚¹å‡»å…ƒç´ </li>
<li>è‡ªåŠ¨å¡«å†™è¡¨å•</li>
<li>è‡ªåŠ¨æ‰§è¡Œ JS</li>
<li>è‡ªåŠ¨æˆªå›¾</li>
<li>è·å– DOM å†…å®¹</li>
<li>æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º</li>
</ul>
<p>å‡ ä¹ä½ ç”¨ Selenium èƒ½åšçš„ï¼Œå®ƒéƒ½èƒ½åšï¼Œè€Œä¸”æ›´å¿«ã€‚</p>
<hr/>
<h2 data-id="heading-7">âœ¨ æœ€ç®€å•ç¤ºä¾‹ï¼šæ‰“å¼€ç½‘é¡µå¹¶è·å¾—æ ‡é¢˜</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´å¯è¿è¡Œçš„ chromedp ä»£ç ï¼Œæ¼”ç¤ºï¼š</p>
<ol>
<li>æ‰“å¼€ Google</li>
<li>ç­‰å¾… 2 ç§’</li>
<li>è·å–ç½‘é¡µæ ‡é¢˜</li>
</ol>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"time"</span>

	<span class="hljs-string">"github.com/chromedp/chromedp"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	ctx, cancel := chromedp.NewContext(context.Background())
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-keyword">var</span> res <span class="hljs-type">string</span>

	err := chromedp.Run(ctx,
		chromedp.Navigate(<span class="hljs-string">"https://www.google.com"</span>),
		chromedp.Sleep(<span class="hljs-number">2</span>*time.Second),
		chromedp.Evaluate(<span class="hljs-string">`document.title`</span>, &amp;res),
	)

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		log.Fatal(err)
	}

	log.Println(<span class="hljs-string">"é¡µé¢æ ‡é¢˜:"</span>, res)
}
</code></pre>
<p>è¿è¡Œåç»ˆç«¯ä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é¡µé¢æ ‡é¢˜: Google</span>
</code></pre>
<p>ä¸€ä¸ªéå¸¸ç®€å•çš„ç¤ºä¾‹ï¼Œå´å±•ç¤ºäº† chromedp è‡ªåŠ¨åŒ–çš„å¨åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-8">chromedp èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<p>è¿™é‡Œåˆ—ä¸€éƒ¨åˆ†æœ€å¸¸è§çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-9">â–¶ è‡ªåŠ¨ç‚¹å‡»ç½‘é¡µæŒ‰é’®</h3>
<pre><code class="hljs language-go" lang="go">chromedp.Click(<span class="hljs-string">`#login-button`</span>)
</code></pre>
<h3 data-id="heading-10">â–¶ è‡ªåŠ¨è¾“å…¥å†…å®¹</h3>
<pre><code class="hljs language-go" lang="go">chromedp.SendKeys(<span class="hljs-string">`#username`</span>, <span class="hljs-string">"admin"</span>)
</code></pre>
<h3 data-id="heading-11">â–¶ ç­‰å¾…å…ƒç´ åŠ è½½</h3>
<pre><code class="hljs language-go" lang="go">chromedp.WaitVisible(<span class="hljs-string">`#content`</span>)
</code></pre>
<h3 data-id="heading-12">â–¶ æ‰§è¡Œ JavaScript</h3>
<pre><code class="hljs language-go" lang="go">chromedp.Evaluate(<span class="hljs-string">`document.querySelector("#num").innerText`</span>, &amp;value)
</code></pre>
<h3 data-id="heading-13">â–¶ æˆªå›¾ç½‘é¡µ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> buf []<span class="hljs-type">byte</span>
chromedp.Screenshot(<span class="hljs-string">`body`</span>, &amp;buf)
</code></pre>
<h3 data-id="heading-14">â–¶ æ‰¹é‡çˆ¬å–ç½‘é¡µæ•°æ®</h3>
<p>å®Œå…¨å¯ä»¥æ›¿ä»£ Python çš„ requests + BeautifulSoup + Seleniumã€‚</p>
<hr/>
<h2 data-id="heading-15">chromedp ä¸ Selenium çš„å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Selenium</th><th>chromedp</th></tr></thead><tbody><tr><td>é©±åŠ¨ä¾èµ–</td><td>éœ€è¦ ChromeDriver</td><td>ä¸éœ€è¦</td></tr><tr><td>é€Ÿåº¦</td><td>è¾ƒæ…¢</td><td>éå¸¸å¿«</td></tr><tr><td>ç¨³å®šæ€§</td><td>å¶æœ‰å¡æ­»</td><td>ç¨³å®š</td></tr><tr><td>è¿è¡Œç¯å¢ƒ</td><td>ä¸é€‚åˆ Docker</td><td>éå¸¸é€‚åˆ</td></tr><tr><td>æ§åˆ¶åè®®</td><td>WebDriver</td><td>Chrome DevTools</td></tr><tr><td>å­¦ä¹ éš¾åº¦</td><td>ä½</td><td>ä¸­ç­‰</td></tr></tbody></table>
<p>å¦‚æœä½ éœ€è¦å¤§è§„æ¨¡è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ‰¹é‡ç™»å½•æ“ä½œ</li>
<li>è‡ªåŠ¨çˆ¬å–å†…å®¹</li>
<li>è‡ªåŠ¨æˆªå›¾ç”Ÿæˆå·¥å…·</li>
<li>Web åå°æ‰¹é‡ä¸Šä¼ </li>
<li>ç½‘ç«™ UI è‡ªåŠ¨åŒ–æµ‹è¯•</li>
</ul>
<p>chromedp æ˜¯æ¯” Selenium æ›´é€‚åˆé•¿æœŸè·‘çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-16">æ›´å¤š chromedp å®æˆ˜ï¼ˆæˆ‘å¯ä»¥å¸®ä½ å†™ï¼‰</h2>
<p>å¦‚æœä½ éœ€è¦å®é™…ä¸šåŠ¡è‡ªåŠ¨åŒ–ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç™»å½•ç½‘ç«™</li>
<li>è‡ªåŠ¨æŠ“å–å•†å“ä¿¡æ¯</li>
<li>è‡ªåŠ¨åŒ–å…¬ä¼—å·åå°</li>
<li>è‡ªåŠ¨åŒ– Baijia æ–‡ç« ä¸Šä¼ </li>
<li>è‡ªåŠ¨åŒ–æ‰¹é‡æˆªå›¾</li>
<li>è‡ªåŠ¨åŒ–ä¸‹è½½æ•°æ®æ–‡ä»¶</li>
<li>æ‰¹é‡çˆ¬å–ç½‘é¡µå¹¶å¯¼å‡º CSV</li>
</ul>
<p>å‘Šè¯‰æˆ‘ä½ çš„éœ€æ±‚ï¼Œæˆ‘æ¥ç»™ä½ å†™å®Œæ•´å¯è¿è¡Œçš„ Go è‡ªåŠ¨åŒ–è„šæœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>Go + chromedp æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–ç»„åˆï¼Œå®ƒï¼š</p>
<ul>
<li>ä¸ä¾èµ– ChromeDriver</li>
<li>æ›´è½»é‡ã€æ›´å¿«é€Ÿ</li>
<li>æ›´é€‚åˆæœåŠ¡å™¨ç¯å¢ƒ</li>
<li>å®Œå…¨èƒ½å®ç° Selenium çš„åŠŸèƒ½ï¼Œç”šè‡³æ›´å¼º</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Python Seleniumï¼Œä¸å¦¨è¯•ä¸€è¯• chromedpï¼Œå®ƒä¼šè®©è‡ªåŠ¨åŒ–å˜å¾—æ›´å¿«ã€æ›´ç®€å•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰]]></title>    <link>https://juejin.cn/post/7579101504289882166</link>    <guid>https://juejin.cn/post/7579101504289882166</guid>    <pubDate>2025-12-03T00:48:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579101504289882166" data-draft-id="7579096485355536434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰"/> <meta itemprop="keywords" content="å‰ç«¯,Android,Flutter"/> <meta itemprop="datePublished" content="2025-12-03T00:48:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T00:48:22.000Z" title="Wed Dec 03 2025 00:48:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œæ‰“å¼€å¤–éƒ¨é“¾æ¥ã€å‘é€é‚®ä»¶ã€æ‹¨æ‰“ç”µè¯ç­‰åŠŸèƒ½æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„å¸¸è§éœ€æ±‚ã€‚æ— è®ºæ˜¯è·³è½¬åˆ°ç½‘é¡µã€å¯åŠ¨åœ°å›¾å¯¼èˆªï¼Œè¿˜æ˜¯è°ƒç”¨ç³»ç»Ÿé‚®ä»¶å®¢æˆ·ç«¯ï¼Œéƒ½éœ€è¦ä¸è®¾å¤‡çš„åŸç”ŸåŠŸèƒ½è¿›è¡Œäº¤äº’ã€‚<strong>url_launcher</strong> ä½œä¸º Flutter ç”Ÿæ€ä¸­æœ€å¸¸ç”¨çš„é“¾æ¥è·³è½¬æ’ä»¶ï¼Œèƒ½å¤Ÿæ— ç¼è¡”æ¥ Android å’Œ iOS å¹³å°çš„åŸç”Ÿèƒ½åŠ›ï¼Œè®©å¼€å‘è€…æ— éœ€æ·±å…¥åŸç”Ÿä»£ç å³å¯å®ç°å„ç±»é“¾æ¥æ‰“å¼€åŠŸèƒ½ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» url_launcher çš„æ ¸å¿ƒç”¨æ³•ã€åœºæ™¯å®è·µä¸å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ä½ åœ¨ Flutter é¡¹ç›®ä¸­è½»æ¾å®ç°é“¾æ¥è·³è½¬åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨ Flutter åº”ç”¨ä¸­ï¼Œç›´æ¥æ“ä½œè®¾å¤‡çš„åŸç”ŸåŠŸèƒ½ï¼ˆå¦‚æ‰“å¼€æµè§ˆå™¨ã€æ‹¨æ‰“ç”µè¯ï¼‰éœ€è¦é€šè¿‡<strong>å¹³å°é€šé“ï¼ˆPlatform Channelï¼‰</strong> ä¸åŸç”Ÿä»£ç é€šä¿¡ï¼Œè¿™å¯¹ä¸ç†Ÿæ‚‰åŸç”Ÿå¼€å‘çš„ Flutter å¼€å‘è€…æ¥è¯´å­˜åœ¨ä¸€å®šé—¨æ§›ã€‚url_launcher æ’ä»¶å°è£…äº† Android å’Œ iOS å¹³å°çš„é“¾æ¥å¤„ç†é€»è¾‘ï¼Œæä¾›äº†ç»Ÿä¸€çš„ Dart APIï¼Œå¼€å‘è€…åªéœ€è°ƒç”¨ç®€å•æ–¹æ³•å³å¯å®ç°ï¼š</p>
<ul>
<li>æ‰“å¼€ç½‘é¡µé“¾æ¥ï¼ˆHTTP/HTTPSï¼‰</li>
<li>æ‹¨æ‰“ç”µè¯ã€å‘é€çŸ­ä¿¡</li>
<li>å‘é€é‚®ä»¶ï¼ˆæ”¯æŒæŒ‡å®šä¸»é¢˜å’Œå†…å®¹ï¼‰</li>
<li>å¯åŠ¨åœ°å›¾åº”ç”¨å¯¼èˆª</li>
<li>æ‰“å¼€åº”ç”¨å•†åº—è¯„åˆ†é¡µé¢</li>
<li>è·³è½¬è‡³å…¶ä»–åº”ç”¨ï¼ˆé€šè¿‡åº”ç”¨ schemeï¼‰</li>
</ul>
<h3 data-id="heading-1">url_launcher çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li><strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šå®Œç¾æ”¯æŒ Android å’Œ iOSï¼Œè‡ªåŠ¨é€‚é…å¹³å°å·®å¼‚ï¼ˆå¦‚ iOS éœ€è¦é…ç½® <code>Info.plist</code> æƒé™ï¼‰ã€‚</li>
<li><strong>API ç®€æ´æ˜“ç”¨</strong>ï¼šé€šè¿‡ <code>launchUrl</code> å•ä¸€æ–¹æ³•å³å¯å¤„ç†å¤šç§é“¾æ¥ç±»å‹ï¼Œæ— éœ€åŒºåˆ†å¹³å°ç¼–å†™é€‚é…ä»£ç ã€‚</li>
<li><strong>æ”¯æŒå¤šç§é“¾æ¥åè®®</strong>ï¼šé™¤ HTTP/HTTPS å¤–ï¼Œè¿˜æ”¯æŒ <code>tel:</code>ï¼ˆç”µè¯ï¼‰ã€<code>sms:</code>ï¼ˆçŸ­ä¿¡ï¼‰ã€<code>mailto:</code>ï¼ˆé‚®ä»¶ï¼‰ã€<code>geo:</code>ï¼ˆåœ°å›¾ï¼‰ç­‰å¤šç§ URI åè®®ã€‚</li>
<li><strong>çŠ¶æ€åé¦ˆå®Œå–„</strong>ï¼šæä¾›é“¾æ¥æ˜¯å¦å¯æ‰“å¼€çš„æ£€æŸ¥æ–¹æ³•ï¼ˆ<code>canLaunchUrl</code>ï¼‰ï¼Œä»¥åŠå¯åŠ¨ç»“æœçš„å›è°ƒï¼Œä¾¿äºå¤„ç†å¼‚å¸¸åœºæ™¯ã€‚</li>
</ul>
<h2 data-id="heading-2">2. å¿«é€Ÿå¼€å§‹ï¼šå®‰è£…ä¸åŸºç¡€é…ç½®</h2>
<h3 data-id="heading-3">2.1 å®‰è£…æ’ä»¶</h3>
<p>åœ¨ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ  url_launcher ä¾èµ–ï¼Œæœ€æ–°ç‰ˆæœ¬å¯ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Furl_launcher" target="_blank" title="https://pub.dev/packages/url_launcher" ref="nofollow noopener noreferrer">pub.dev</a> è·å–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">url_launcher:</span> <span class="hljs-string">^6.2.5</span>  <span class="hljs-comment"># è¯·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>æ‰§è¡Œ <code>flutter pub get</code> å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h3 data-id="heading-4">2.2 å¹³å°é…ç½®ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>url_launcher éœ€è¦æ ¹æ®ä¸åŒå¹³å°è¿›è¡Œé¢å¤–é…ç½®ï¼Œå¦åˆ™å¯èƒ½å‡ºç°åŠŸèƒ½å¼‚å¸¸ï¼ˆå¦‚æ— æ³•æ‰“å¼€é“¾æ¥ã€åº”ç”¨å´©æºƒï¼‰ã€‚</p>
<h4 data-id="heading-5">Android å¹³å°é…ç½®</h4>
<p>æ— éœ€é¢å¤–æƒé™é…ç½®ï¼Œä½†å¦‚æœéœ€è¦æ‰“å¼€ HTTP é“¾æ¥ï¼ˆé HTTPSï¼‰ï¼Œéœ€åœ¨ <code>android/app/src/main/AndroidManifest.xml</code> ä¸­æ·»åŠ ç½‘ç»œæƒé™ï¼Œå¹¶é…ç½® cleartext æ”¯æŒï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å…è®¸ç½‘ç»œè®¿é—® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">...</span>
    <span class="hljs-attr">android:usesCleartextTraffic</span>=<span class="hljs-string">"true"</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…è®¸ HTTP é“¾æ¥ --&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">iOS å¹³å°é…ç½®</h4>
<p>iOS è¦æ±‚æ‰€æœ‰å¤–éƒ¨é“¾æ¥è·³è½¬å¿…é¡»åœ¨ <code>Info.plist</code> ä¸­å£°æ˜å…è®¸çš„ URL æ–¹æ¡ˆï¼ˆSchemeï¼‰ï¼Œå¦åˆ™ä¼šè¢«ç³»ç»Ÿæ‹¦æˆªã€‚åœ¨ <code>ios/Runner/Info.plist</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼ˆæ ¹æ®åº”ç”¨éœ€æ±‚é€‰æ‹©ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å…è®¸æ‰“å¼€ç½‘é¡µï¼ˆHTTP/HTTPSï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>LSApplicationQueriesSchemes<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>http<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>https<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>tel<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…è®¸æ‹¨æ‰“ç”µè¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>sms<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…è®¸å‘é€çŸ­ä¿¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>mailto<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…è®¸å‘é€é‚®ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>geo<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å…è®¸åœ°å›¾å¯¼èˆª --&gt;</span>
    <span class="hljs-comment">&lt;!-- å¦‚éœ€è·³è½¬å…¶ä»–åº”ç”¨ï¼Œæ·»åŠ å¯¹åº” schemeï¼Œå¦‚å¾®ä¿¡ï¼šweixin --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>
</code></pre>
<h2 data-id="heading-7">3. æ ¸å¿ƒ API è¯¦è§£</h2>
<p>url_launcher çš„æ ¸å¿ƒåŠŸèƒ½é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å®ç°ï¼ŒæŒæ¡è¿™ä¸¤ä¸ªæ–¹æ³•å³å¯è¦†ç›–å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼š</p>
<h3 data-id="heading-8">3.1 æ£€æŸ¥é“¾æ¥æ˜¯å¦å¯æ‰“å¼€ï¼š<code>canLaunchUrl</code></h3>
<p>åœ¨å°è¯•æ‰“å¼€é“¾æ¥å‰ï¼Œå»ºè®®å…ˆè°ƒç”¨ <code>canLaunchUrl</code> æ£€æŸ¥è®¾å¤‡æ˜¯å¦æ”¯æŒè¯¥é“¾æ¥ç±»å‹ï¼ˆå¦‚æŸäº›è®¾å¤‡å¯èƒ½æ²¡æœ‰å®‰è£…åœ°å›¾åº”ç”¨ï¼‰ï¼Œé¿å…ç›´æ¥å¯åŠ¨å¤±è´¥ã€‚</p>
<p><strong>æ–¹æ³•å®šä¹‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-built_in">bool</span>&gt; canLaunchUrl(<span class="hljs-built_in">Uri</span> url)
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>url</code>ï¼šéœ€è¦æ£€æŸ¥çš„é“¾æ¥ï¼Œå¿…é¡»æ˜¯ <code>Uri</code> ç±»å‹ï¼ˆé€šè¿‡ <code>Uri.parse()</code> è½¬æ¢ï¼‰ã€‚</li>
</ul>
<p><strong>è¿”å›å€¼</strong>ï¼š</p>
<ul>
<li><code>Future&lt;bool&gt;</code>ï¼š<code>true</code> è¡¨ç¤ºæ”¯æŒæ‰“å¼€ï¼Œ<code>false</code> è¡¨ç¤ºä¸æ”¯æŒã€‚</li>
</ul>
<h3 data-id="heading-9">3.2 æ‰“å¼€é“¾æ¥ï¼š<code>launchUrl</code></h3>
<p>è¿™æ˜¯ url_launcher çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºå¯åŠ¨é“¾æ¥å¯¹åº”çš„åº”ç”¨æˆ–åŠŸèƒ½ã€‚</p>
<p><strong>æ–¹æ³•å®šä¹‰</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-built_in">bool</span>&gt; launchUrl(
  <span class="hljs-built_in">Uri</span> url, {
  LaunchMode mode = LaunchMode.platformDefault,
  WebViewConfiguration webViewConfiguration = <span class="hljs-keyword">const</span> WebViewConfiguration(),
  <span class="hljs-built_in">String?</span> webOnlyWindowName,
})
</code></pre>
<p><strong>å…³é”®å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>url</code>ï¼šéœ€è¦æ‰“å¼€çš„é“¾æ¥ï¼ˆ<code>Uri</code> ç±»å‹ï¼‰ï¼Œå¦‚ <code>Uri.parse('https://flutter.dev')</code>ã€‚</li>
<li><code>mode</code>ï¼šå¯åŠ¨æ¨¡å¼ï¼ˆæ§åˆ¶é“¾æ¥æ‰“å¼€æ–¹å¼ï¼‰ï¼Œå¸¸ç”¨å€¼ï¼š
<ul>
<li><code>LaunchMode.platformDefault</code>ï¼šé»˜è®¤æ¨¡å¼ï¼ŒAndroid é€šå¸¸ç”¨æµè§ˆå™¨æ‰“å¼€ï¼ŒiOS å¯èƒ½ç”¨åº”ç”¨å†… WebViewã€‚</li>
<li><code>LaunchMode.externalApplication</code>ï¼šå¼ºåˆ¶ç”¨å¤–éƒ¨åº”ç”¨æ‰“å¼€ï¼ˆå¦‚ç³»ç»Ÿæµè§ˆå™¨ï¼‰ã€‚</li>
<li><code>LaunchMode.inAppWebView</code>ï¼šåœ¨åº”ç”¨å†… WebView æ‰“å¼€ï¼ˆä»…æ”¯æŒ HTTP/HTTPS é“¾æ¥ï¼‰ã€‚</li>
</ul>
</li>
<li><code>webViewConfiguration</code>ï¼šåº”ç”¨å†… WebView çš„é…ç½®ï¼ˆå¦‚æ˜¯å¦å…è®¸ JavaScriptã€ç¼©æ”¾ç­‰ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">4. å®æˆ˜åœºæ™¯ï¼šå¸¸è§é“¾æ¥ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-11">4.1 æ‰“å¼€ç½‘é¡µé“¾æ¥ï¼ˆHTTP/HTTPSï¼‰</h3>
<p>æœ€å¸¸ç”¨çš„åœºæ™¯ï¼Œæ”¯æŒåœ¨å¤–éƒ¨æµè§ˆå™¨æˆ–åº”ç”¨å†… WebView æ‰“å¼€ç½‘é¡µã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:url_launcher/url_launcher.dart'</span>;

<span class="hljs-comment">// æ‰“å¼€å¤–éƒ¨æµè§ˆå™¨</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _launchWebUrl() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> url = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://flutter.dev'</span>);
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ”¯æŒæ‰“å¼€é“¾æ¥</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">await</span> canLaunchUrl(url)) {
    <span class="hljs-comment">// ä¸æ”¯æŒæ—¶æç¤ºç”¨æˆ·</span>
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æ— æ³•æ‰“å¼€é“¾æ¥ï¼š<span class="hljs-subst">${url.toString()}</span>'</span>)),
    );
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// ç”¨å¤–éƒ¨åº”ç”¨æ‰“å¼€ç½‘é¡µ</span>
  <span class="hljs-keyword">await</span> launchUrl(url, mode: LaunchMode.externalApplication);
}

<span class="hljs-comment">// åœ¨åº”ç”¨å†… WebView æ‰“å¼€ï¼ˆé€‚åˆéœ€è¦ä¿æŒåº”ç”¨ä¸Šä¸‹æ–‡çš„åœºæ™¯ï¼‰</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _launchInAppWebView() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> url = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://pub.dev'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(url)) {
    <span class="hljs-keyword">await</span> launchUrl(
      url,
      mode: LaunchMode.inAppWebView,
      <span class="hljs-comment">// é…ç½® WebView å…è®¸ JavaScript</span>
      webViewConfiguration: WebViewConfiguration(
        enableJavaScript: <span class="hljs-keyword">true</span>,
      ),
    );
  }
}
</code></pre>
<p>åœ¨ UI ä¸­æ·»åŠ æŒ‰é’®è°ƒç”¨æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">ElevatedButton(
  onPressed: _launchWebUrl,
  child: Text(<span class="hljs-string">'æ‰“å¼€ Flutter å®˜ç½‘'</span>),
),
ElevatedButton(
  onPressed: _launchInAppWebView,
  child: Text(<span class="hljs-string">'åº”ç”¨å†…æ‰“å¼€ Pub ä»“åº“'</span>),
),
</code></pre>
<h3 data-id="heading-12">4.2 æ‹¨æ‰“ç”µè¯ä¸å‘é€çŸ­ä¿¡</h3>
<p>é€šè¿‡ <code>tel:</code> å’Œ <code>sms:</code> åè®®å®ç°ç”µè¯æ‹¨æ‰“å’ŒçŸ­ä¿¡å‘é€åŠŸèƒ½ï¼Œéœ€æ³¨æ„è®¾å¤‡æ˜¯å¦æœ‰é€šè¯/çŸ­ä¿¡åŠŸèƒ½ï¼ˆå¦‚å¹³æ¿å¯èƒ½ä¸æ”¯æŒï¼‰ã€‚</p>
<h4 data-id="heading-13">æ‹¨æ‰“ç”µè¯</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ‹¨æ‰“ç”µè¯ï¼ˆç›´æ¥æ‹¨å·ï¼Œæ— éœ€ç”¨æˆ·è¾“å…¥ï¼‰</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _makePhoneCall() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> phoneUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'tel:10086'</span>); <span class="hljs-comment">// ç”µè¯å·ç </span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(phoneUri)) {
    <span class="hljs-keyword">await</span> launchUrl(phoneUri);
  } <span class="hljs-keyword">else</span> {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æ— æ³•æ‹¨æ‰“ç”µè¯ï¼š10086'</span>)),
    );
  }
}
</code></pre>
<h4 data-id="heading-14">å‘é€çŸ­ä¿¡</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å‘é€çŸ­ä¿¡ï¼ˆé¢„å¡«æ”¶ä»¶äººå’Œå†…å®¹ï¼‰</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _sendSms() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// sms:æ”¶ä»¶äºº?body=çŸ­ä¿¡å†…å®¹</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> smsUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'sms:10086?body=æŸ¥è¯¢è¯è´¹ä½™é¢'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(smsUri)) {
    <span class="hljs-keyword">await</span> launchUrl(smsUri);
  } <span class="hljs-keyword">else</span> {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æ— æ³•å‘é€çŸ­ä¿¡'</span>)),
    );
  }
}
</code></pre>
<h3 data-id="heading-15">4.3 å‘é€é‚®ä»¶ï¼ˆæ”¯æŒä¸»é¢˜å’Œå†…å®¹ï¼‰</h3>
<p>é€šè¿‡ <code>mailto:</code> åè®®è°ƒç”¨ç³»ç»Ÿé‚®ä»¶å®¢æˆ·ç«¯ï¼Œå¯æŒ‡å®šæ”¶ä»¶äººã€ä¸»é¢˜ã€æ­£æ–‡å†…å®¹ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _sendEmail() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// mailto:æ”¶ä»¶äºº?subject=ä¸»é¢˜&amp;body=æ­£æ–‡</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> emailUri = <span class="hljs-built_in">Uri</span>.parse(
    <span class="hljs-string">'mailto:support@example.com?subject=åé¦ˆé—®é¢˜&amp;body=æ‚¨å¥½ï¼Œæˆ‘çš„åº”ç”¨é‡åˆ°äº†ä»¥ä¸‹é—®é¢˜ï¼š'</span>,
  );
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(emailUri)) {
    <span class="hljs-keyword">await</span> launchUrl(emailUri);
  } <span class="hljs-keyword">else</span> {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æœªæ£€æµ‹åˆ°é‚®ä»¶å®¢æˆ·ç«¯'</span>)),
    );
  }
}
</code></pre>
<h3 data-id="heading-16">4.4 åœ°å›¾å¯¼èˆªï¼ˆæ‰“å¼€åœ°å›¾åº”ç”¨ï¼‰</h3>
<p>é€šè¿‡ <code>geo:</code> åè®®å¯åŠ¨åœ°å›¾åº”ç”¨ï¼Œæ”¯æŒæŒ‡å®šåæ ‡ã€åœ°å€æˆ–æœç´¢å…³é”®è¯ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ‰“å¼€åœ°å›¾å¯¼èˆªåˆ°æŒ‡å®šåæ ‡ï¼ˆçº¬åº¦,ç»åº¦ï¼‰</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _launchMap() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// geo:çº¬åº¦,ç»åº¦?q=æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> mapUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'geo:39.908823,116.397470?q=åŒ—äº¬å¤©å®‰é—¨'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(mapUri)) {
    <span class="hljs-keyword">await</span> launchUrl(mapUri);
  } <span class="hljs-keyword">else</span> {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æœªæ£€æµ‹åˆ°åœ°å›¾åº”ç”¨'</span>)),
    );
  }
}
</code></pre>
<h3 data-id="heading-17">4.5 æ‰“å¼€åº”ç”¨å•†åº—è¯„åˆ†é¡µé¢</h3>
<p>å¼•å¯¼ç”¨æˆ·åˆ°åº”ç”¨å•†åº—ç»™åº”ç”¨è¯„åˆ†ï¼Œéœ€æ›¿æ¢ä¸ºè‡ªå·±çš„åº”ç”¨ IDã€‚</p>
<h4 data-id="heading-18">Androidï¼ˆGoogle Playï¼‰</h4>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _launchGooglePlay() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„åº”ç”¨åŒ…å</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> packageName = <span class="hljs-string">'com.example.myapp'</span>;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> playStoreUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://play.google.com/store/apps/details?id=<span class="hljs-subst">$packageName</span>'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(playStoreUri)) {
    <span class="hljs-keyword">await</span> launchUrl(playStoreUri, mode: LaunchMode.externalApplication);
  }
}
</code></pre>
<h4 data-id="heading-19">iOSï¼ˆApp Storeï¼‰</h4>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _launchAppStore() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„åº”ç”¨ IDï¼ˆä» App Store è·å–ï¼‰</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> appId = <span class="hljs-string">'1234567890'</span>;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> appStoreUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://apps.apple.com/cn/app/id<span class="hljs-subst">$appId</span>'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(appStoreUri)) {
    <span class="hljs-keyword">await</span> launchUrl(appStoreUri, mode: LaunchMode.externalApplication);
  }
}
</code></pre>
<h3 data-id="heading-20">4.6 è·³è½¬è‡³å…¶ä»–åº”ç”¨ï¼ˆé€šè¿‡ Schemeï¼‰</h3>
<p>æŸäº›åº”ç”¨æä¾›äº†è‡ªå®šä¹‰ Scheme ç”¨äºå¤–éƒ¨è·³è½¬ï¼ˆå¦‚å¾®ä¿¡çš„ <code>weixin://</code>ã€æ”¯ä»˜å®çš„ <code>alipay://</code>ï¼‰ï¼Œéœ€æå‰ç¡®è®¤ç›®æ ‡åº”ç”¨çš„ Scheme æ ¼å¼ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ‰“å¼€å¾®ä¿¡ï¼ˆéœ€å¾®ä¿¡å·²å®‰è£…ï¼‰</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; _launchWeChat() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> wechatUri = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'weixin://'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(wechatUri)) {
    <span class="hljs-keyword">await</span> launchUrl(wechatUri);
  } <span class="hljs-keyword">else</span> {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(<span class="hljs-string">'æœªå®‰è£…å¾®ä¿¡'</span>)),
    );
  }
}
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šiOS éœ€åœ¨ <code>Info.plist</code> çš„ <code>LSApplicationQueriesSchemes</code> ä¸­æ·»åŠ å¯¹åº” Schemeï¼ˆå¦‚ <code>weixin</code>ï¼‰ï¼Œå¦åˆ™ <code>canLaunchUrl</code> ä¼šè¿”å› <code>false</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-21">5. é«˜çº§ç”¨æ³•ï¼šè‡ªå®šä¹‰ WebView ä¸é”™è¯¯å¤„ç†</h2>
<h3 data-id="heading-22">5.1 è‡ªå®šä¹‰åº”ç”¨å†… WebView é…ç½®</h3>
<p>ä½¿ç”¨ <code>LaunchMode.inAppWebView</code> æ—¶ï¼Œå¯é€šè¿‡ <code>WebViewConfiguration</code> å®šåˆ¶ WebView è¡Œä¸ºï¼Œå¦‚å¯ç”¨ JavaScriptã€è®¾ç½®ç”¨æˆ·ä»£ç†ç­‰ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _launchCustomWebView() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Uri</span> url = <span class="hljs-built_in">Uri</span>.parse(<span class="hljs-string">'https://flutter.dev'</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> canLaunchUrl(url)) {
    <span class="hljs-keyword">await</span> launchUrl(
      url,
      mode: LaunchMode.inAppWebView,
      webViewConfiguration: WebViewConfiguration(
        enableJavaScript: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// å…è®¸ JavaScript</span>
        enableDomStorage: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// å…è®¸ DOM å­˜å‚¨</span>
        userAgent: <span class="hljs-string">'MyFlutterApp/1.0'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†</span>
        <span class="hljs-comment">// ç¦æ­¢ç¼©æ”¾</span>
        supportZoom: <span class="hljs-keyword">false</span>,
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-23">5.2 å®Œå–„çš„é”™è¯¯å¤„ç†ä¸çŠ¶æ€åé¦ˆ</h3>
<p>å®é™…å¼€å‘ä¸­éœ€å¤„ç†å„ç§å¼‚å¸¸åœºæ™¯ï¼ˆå¦‚é“¾æ¥æ— æ•ˆã€æ— ç½‘ç»œã€åº”ç”¨æœªå®‰è£…ç­‰ï¼‰ï¼Œé€šè¿‡ <code>try-catch</code> å’ŒçŠ¶æ€æç¤ºæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _safeLaunchUrl(<span class="hljs-built_in">Uri</span> url) <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ”¯æŒæ‰“å¼€</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">await</span> canLaunchUrl(url)) {
      _showError(<span class="hljs-string">'æ— æ³•æ‰“å¼€é“¾æ¥ï¼š<span class="hljs-subst">${url.toString()}</span>'</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// å°è¯•æ‰“å¼€é“¾æ¥</span>
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> launched = <span class="hljs-keyword">await</span> launchUrl(url);
    <span class="hljs-keyword">if</span> (!launched) {
      _showError(<span class="hljs-string">'æ‰“å¼€é“¾æ¥å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// æ•è·å¼‚å¸¸ï¼ˆå¦‚ç½‘ç»œé”™è¯¯ã€æƒé™é—®é¢˜ï¼‰</span>
    _showError(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯ï¼š<span class="hljs-subst">${e.toString()}</span>'</span>);
  }
}

<span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯æç¤º</span>
<span class="hljs-keyword">void</span> _showError(<span class="hljs-built_in">String</span> message) {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(
      content: Text(message),
      backgroundColor: Colors.red,
    ),
  );
}
</code></pre>
<h2 data-id="heading-24">6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-25">6.1 é“¾æ¥æ— æ³•æ‰“å¼€ï¼Œ<code>canLaunchUrl</code> è¿”å› false</h3>
<ul>
<li><strong>iOS æœªé…ç½® Scheme</strong>ï¼šæ£€æŸ¥ <code>Info.plist</code> ä¸­çš„ <code>LSApplicationQueriesSchemes</code> æ˜¯å¦æ·»åŠ äº†å¯¹åº”åè®®ï¼ˆå¦‚ <code>http</code>ã€<code>tel</code>ï¼‰ã€‚</li>
<li><strong>é“¾æ¥æ ¼å¼é”™è¯¯</strong>ï¼šç¡®ä¿é€šè¿‡ <code>Uri.parse()</code> æ­£ç¡®è½¬æ¢é“¾æ¥ï¼Œé¿å…æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²å¯¼è‡´æ ¼å¼é”™è¯¯ï¼ˆå¦‚ç©ºæ ¼æœªç¼–ç ï¼‰ã€‚</li>
<li><strong>åº”ç”¨æœªå®‰è£…</strong>ï¼šè·³è½¬å…¶ä»–åº”ç”¨ï¼ˆå¦‚å¾®ä¿¡ï¼‰æ—¶ï¼Œéœ€ç¡®ä¿ç›®æ ‡åº”ç”¨å·²å®‰è£…ï¼Œå¦åˆ™ <code>canLaunchUrl</code> ä¼šè¿”å› falseã€‚</li>
</ul>
<h3 data-id="heading-26">6.2 Android æ‰“å¼€ HTTP é“¾æ¥å¤±è´¥</h3>
<ul>
<li>éœ€åœ¨ <code>AndroidManifest.xml</code> ä¸­æ·»åŠ  <code>android:usesCleartextTraffic="true"</code> å…è®¸ HTTP æµé‡ï¼ˆè§ 2.2 èŠ‚é…ç½®ï¼‰ã€‚</li>
<li>å»ºè®®ä¼˜å…ˆä½¿ç”¨ HTTPS é“¾æ¥ï¼Œé¿å… Android é«˜ç‰ˆæœ¬çš„å®‰å…¨é™åˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-27">6.3 åº”ç”¨å†… WebView æ— æ³•åŠ è½½ JavaScript</h3>
<ul>
<li>éœ€åœ¨ <code>WebViewConfiguration</code> ä¸­è®¾ç½® <code>enableJavaScript: true</code>ï¼Œé»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚</li>
</ul>
<h3 data-id="heading-28">6.4 iOS è·³è½¬åº”ç”¨å•†åº—æç¤ºâ€œæ— æ³•æ‰“å¼€é¡µé¢â€</h3>
<ul>
<li>ç¡®ä¿ App Store é“¾æ¥æ­£ç¡®ï¼ˆæ ¼å¼ä¸º <code>https://apps.apple.com/cn/app/id[åº”ç”¨ID]</code>ï¼‰ã€‚</li>
<li>æµ‹è¯•è®¾å¤‡éœ€ç™»å½• Apple IDï¼Œä¸”åº”ç”¨å·²ä¸Šæ¶ App Storeï¼ˆå¼€å‘ä¸­çš„åº”ç”¨å¯é€šè¿‡ TestFlight æµ‹è¯•ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-29">7. æ€»ç»“</h2>
<p>url_launcher ä½œä¸º Flutter å¼€å‘ä¸­çš„å¿…å¤‡æ’ä»¶ï¼Œä»¥ç®€æ´çš„ API å’Œå¼ºå¤§çš„è·¨å¹³å°èƒ½åŠ›ï¼Œå®Œç¾è§£å†³äº†é“¾æ¥è·³è½¬ä¸åŸç”Ÿåº”ç”¨äº¤äº’çš„éœ€æ±‚ã€‚æ— è®ºæ˜¯åŸºç¡€çš„ç½‘é¡µæ‰“å¼€ã€ç”µè¯æ‹¨æ‰“ï¼Œè¿˜æ˜¯å¤æ‚çš„åº”ç”¨å†… WebView é›†æˆã€ç¬¬ä¸‰æ–¹åº”ç”¨è·³è½¬ï¼Œéƒ½èƒ½é€šè¿‡å®ƒè½»æ¾å®ç°ã€‚</p>
<p>ä½¿ç”¨æ—¶éœ€æ³¨æ„ï¼š</p>
<ol>
<li>ä¸¥æ ¼æŒ‰ç…§å¹³å°è¦æ±‚é…ç½®æƒé™ï¼ˆå°¤å…¶æ˜¯ iOS çš„ <code>Info.plist</code>ï¼‰ï¼›</li>
<li>æ‰“å¼€é“¾æ¥å‰åŠ¡å¿…é€šè¿‡ <code>canLaunchUrl</code> æ£€æŸ¥å…¼å®¹æ€§ï¼›</li>
<li>é’ˆå¯¹ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„å¯åŠ¨æ¨¡å¼ï¼ˆå¤–éƒ¨åº”ç”¨/åº”ç”¨å†… WebViewï¼‰ï¼›</li>
<li>å®Œå–„é”™è¯¯å¤„ç†ï¼Œä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„åé¦ˆã€‚</li>
</ol>
<p><strong>å‚è€ƒèµ„æº</strong></p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Furl_launcher" target="_blank" title="https://pub.dev/packages/url_launcher" ref="nofollow noopener noreferrer">url_launcher å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fcookbook%2Fnavigation%2Flaunch-url" target="_blank" title="https://docs.flutter.dev/cookbook/navigation/launch-url" ref="nofollow noopener noreferrer">Flutter å®˜æ–¹ URI å¤„ç†æŒ‡å—</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Ftopics%2Fmanifest%2Fmanifest-intro" target="_blank" title="https://developer.android.com/guide/topics/manifest/manifest-intro" ref="nofollow noopener noreferrer">Android Manifest é…ç½®å‚è€ƒ</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2Fbundleresources%2Finformation_property_list" target="_blank" title="https://developer.apple.com/documentation/bundleresources/information_property_list" ref="nofollow noopener noreferrer">iOS Info.plist é…ç½®å‚è€ƒ</a></p>
</li>
</ul>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ ¸å¿ƒæ–¹æ³•æ·±åº¦è§£æï¼šæ‰‹å†™ callã€applyã€bind å’Œ Object.create]]></title>    <link>https://juejin.cn/post/7579066828179882020</link>    <guid>https://juejin.cn/post/7579066828179882020</guid>    <pubDate>2025-12-02T16:26:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579066828179882020" data-draft-id="7579101504289669174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ ¸å¿ƒæ–¹æ³•æ·±åº¦è§£æï¼šæ‰‹å†™ callã€applyã€bind å’Œ Object.create"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ECMAScript 6"/> <meta itemprop="datePublished" content="2025-12-02T16:26:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ ¸å¿ƒæ–¹æ³•æ·±åº¦è§£æï¼šæ‰‹å†™ callã€applyã€bind å’Œ Object.create
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T16:26:41.000Z" title="Tue Dec 02 2025 16:26:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    37
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆthis æŒ‡å‘ï¼‰å’Œå¯¹è±¡åŸå‹é“¾ã€‚<code>call</code>ã€<code>apply</code>ã€<code>bind</code> å’Œ <code>Object.create</code> æ˜¯å››ä¸ªè‡³å…³é‡è¦çš„åŸç”Ÿæ–¹æ³•ï¼Œç†è§£å®ƒä»¬çš„åŸç†å’Œå®ç°æ–¹å¼ï¼Œä¸ä»…æœ‰åŠ©äºæˆ‘ä»¬ç¼–å†™æ›´ä¼˜é›…çš„ä»£ç ï¼Œä¹Ÿæ˜¯è¿›é˜¶ JavaScript å¼€å‘çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™å››ä¸ªæ–¹æ³•çš„æ ¸å¿ƒåŸç†ï¼Œå¹¶æä¾›å®Œæ•´çš„æ‰‹å†™å®ç°ã€‚é€šè¿‡è‡ªå·±å®ç°è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£ JavaScript åº•å±‚çš„å·¥ä½œæœºåˆ¶ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€call æ–¹æ³•</h4>
<h5 data-id="heading-2">1.1 åŸºæœ¬æ¦‚å¿µ</h5>
<p><code>call()</code> æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ <code>this</code> å€¼å’Œå•ç‹¬ç»™å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚
è¯­æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">func.<span class="hljs-title function_">call</span>(thisArg, arg1, arg2, ...)
</code></pre>
<h5 data-id="heading-3">1.2 åŸç”Ÿä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">message, punctuation</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${message}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span><span class="hljs-subst">${punctuation}</span>`</span>);
}

<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> };

<span class="hljs-comment">// ä½¿ç”¨ call æ”¹å˜ this æŒ‡å‘</span>
greet.<span class="hljs-title function_">call</span>(person, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"!"</span>); <span class="hljs-comment">// è¾“å‡º: Hello, Alice!</span>
</code></pre>
<h5 data-id="heading-4">1.3 æ‰‹å†™å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, ...args</span>) {
  <span class="hljs-comment">// ç¡®ä¿ context æ˜¯å¯¹è±¡(å¦‚æœä¸æ˜¯, è½¬æ¢ä¸ºå¯¹è±¡åŒ…è£…)</span>
  context = <span class="hljs-title class_">Object</span>(context);

  <span class="hljs-comment">// ä½¿ç”¨ Symbol åˆ›å»ºå”¯ä¸€é”®ï¼Œé¿å…å±æ€§å†²çª</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"fn"</span>);

  <span class="hljs-comment">// å°†å½“å‰å‡½æ•°ä½œä¸º context çš„æ–¹æ³•</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ‰§è¡Œå‡½æ•°</span>
    <span class="hljs-keyword">return</span> context[fnKey](...args);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// ç¡®ä¿åˆ é™¤ä¸´æ—¶æ·»åŠ çš„æ–¹æ³•</span>
    <span class="hljs-keyword">delete</span> context[fnKey];
  }
};

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showInfo</span>(<span class="hljs-params">label</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${label}</span>: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> - <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>`</span>);
}

<span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"John"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
showInfo.<span class="hljs-title function_">myCall</span>(user, <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>); <span class="hljs-comment">// è¾“å‡º: ç”¨æˆ·ä¿¡æ¯: John - 25</span>
</code></pre>
<h5 data-id="heading-5">1.4 å®ç°è§£æ</h5>
<ol>
<li><strong>å‚æ•°å¤„ç†:</strong> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>thisArg</code>ï¼Œåç»­å‚æ•°æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</li>
<li><strong>ä¸Šä¸‹æ–‡ç»‘å®š:</strong> å°†å‡½æ•°ä¸´æ—¶æ·»åŠ åˆ°ç›®æ ‡å¯¹è±¡ä¸Š</li>
<li><strong>å‡½æ•°æ‰§è¡Œ:</strong> ä½¿ç”¨ç›®æ ‡å¯¹è±¡è°ƒç”¨å‡½æ•°</li>
<li><strong>æ¸…ç†å·¥ä½œ:</strong> åˆ é™¤ä¸´æ—¶æ·»åŠ çš„å±æ€§ï¼Œé¿å…æ±¡æŸ“ç›®æ ‡å¯¹è±¡</li>
</ol>
<h4 data-id="heading-6">äºŒã€apply æ–¹æ³•</h4>
<h5 data-id="heading-7">2.1 åŸºæœ¬æ¦‚å¿µ</h5>
<p><code>apply()</code> æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå…·æœ‰ç»™å®š <code>this</code> å€¼çš„å‡½æ•°ï¼Œä»¥åŠä»¥ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„å¯¹è±¡ï¼‰çš„å½¢å¼æä¾›çš„å‚æ•°ã€‚
è¯­æ³•:</p>
<pre><code class="hljs language-javascript" lang="javascript">func.<span class="hljs-title function_">apply</span>(thisArg, argsArray)
</code></pre>
<h5 data-id="heading-8">2.2åŸç”Ÿä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">return</span> a + b + c;
}

<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];

<span class="hljs-comment">// ä½¿ç”¨ apply ä¼ é€’æ•°ç»„å‚æ•°</span>
<span class="hljs-keyword">const</span> result = sum.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, numbers); <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);
</code></pre>
<h5 data-id="heading-9">2.3 æ‰‹å†™å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myApply</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context = globalThis, argsArray</span>) {
  <span class="hljs-comment">// å¤„ç† context</span>
  context = <span class="hljs-title class_">Object</span>(context);

  <span class="hljs-comment">// å¦‚æœ argsArray ä¸æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„, åˆ™å½“ä½œç©ºæ•°ç»„å¤„ç†</span>
  <span class="hljs-keyword">if</span> (
    !<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(argsArray) &amp;&amp;
    !(argsArray &amp;&amp; <span class="hljs-keyword">typeof</span> argsArray === <span class="hljs-string">"object"</span> &amp;&amp; <span class="hljs-string">"length"</span> <span class="hljs-keyword">in</span> argsArray)
  ) {
    argsArray = [];
  }

  <span class="hljs-comment">// åˆ›å»ºå”¯ä¸€é”®</span>
  <span class="hljs-keyword">const</span> fnKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">"fn"</span>);

  <span class="hljs-comment">// å°†å‡½æ•°ç»‘å®šåˆ° context</span>
  context[fnKey] = <span class="hljs-variable language_">this</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ‰§è¡Œå‡½æ•°ï¼Œä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ä¼ é€’å‚æ•°</span>
    <span class="hljs-keyword">return</span> context[fnKey](...argsArray);
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-keyword">delete</span> context[fnKey];
  }
};

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">operation, ...numbers</span>) {
  <span class="hljs-keyword">const</span> ops = {
    <span class="hljs-attr">sum</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
    <span class="hljs-attr">product</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a * b,
  };

  <span class="hljs-keyword">return</span> numbers.<span class="hljs-title function_">reduce</span>(ops[operation]);
}

<span class="hljs-keyword">const</span> nums = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-keyword">const</span> sumResult = calculate.<span class="hljs-title function_">myApply</span>(<span class="hljs-literal">null</span>, [<span class="hljs-string">"sum"</span>, ...nums]);
<span class="hljs-keyword">const</span> productResult = calculate.<span class="hljs-title function_">myApply</span>(<span class="hljs-literal">null</span>, [<span class="hljs-string">"product"</span>, ...nums]);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Sum: "</span>, sumResult); <span class="hljs-comment">// è¾“å‡º: Sum:  9</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Product: "</span>, productResult); <span class="hljs-comment">// è¾“å‡º: Product:  24</span>
</code></pre>
<h5 data-id="heading-10">2.4 <code>Call</code> vs <code>Apply</code> çš„åŒºåˆ«</h5>
<p>2.4 call vs apply çš„åŒºåˆ«</p>























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">å‚æ•°ä¼ é€’</th><th align="left">æ€§èƒ½</th><th align="left">é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left">Call</td><td align="left">é€ä¸ªä¼ é€’</td><td align="left">é€šå¸¸ç¨å¿«</td><td align="left">å‚æ•°æ•°é‡å·²çŸ¥</td></tr><tr><td align="left">Apply</td><td align="left">æ•°ç»„å½¢å¼ä¼ é€’</td><td align="left">éœ€è¦å¤„ç†æ•°ç»„</td><td align="left">å‚æ•°æ•°é‡åŠ¨æ€æˆ–å·²å­˜åœ¨æ•°ç»„ä¸­</td></tr></tbody></table>
<h4 data-id="heading-11">ä¸‰ã€bind æ–¹æ³•</h4>
<h5 data-id="heading-12">3.1 åŸºæœ¬æ¦‚å¿µ</h5>
<p><code>bind()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ <code>bind()</code> è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ <code>this</code> è¢«æŒ‡å®šä¸º <code>bind()</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚
è¯­æ³•:</p>
<pre><code class="hljs language-javascript" lang="javascript">func.<span class="hljs-title function_">bind</span>(thisArg[, arg1[, arg2[, ...]]])
</code></pre>
<h5 data-id="heading-13">3.2 åŸç”Ÿä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> module1 = {
  <span class="hljs-attr">x</span>: <span class="hljs-number">42</span>,
  <span class="hljs-attr">getX</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>;
  },
};

<span class="hljs-keyword">const</span> unboundGetX = module1.<span class="hljs-property">getX</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">unboundGetX</span>()); <span class="hljs-comment">// undefined (this æŒ‡å‘å…¨å±€å¯¹è±¡)</span>

<span class="hljs-keyword">const</span> boundGetX = unboundGetX.<span class="hljs-title function_">bind</span>(module1);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">boundGetX</span>()); <span class="hljs-comment">// 42</span>

</code></pre>
<h5 data-id="heading-14">3.3 æ‰‹å†™å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBind</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...bindArgs</span>) {
  <span class="hljs-comment">// ä¿å­˜åŸå‡½æ•°</span>
  <span class="hljs-keyword">const</span> originalFunc = <span class="hljs-variable language_">this</span>;

  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originalFunc !== <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Function.prototype.bind called on non-function"</span>);
  }

  <span class="hljs-comment">// è¿”å›çš„ç»‘å®šå‡½æ•°</span>
  <span class="hljs-keyword">const</span> boundFunc = <span class="hljs-keyword">function</span> (<span class="hljs-params">...callArgs</span>) {
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é€šè¿‡ new è°ƒç”¨</span>
    <span class="hljs-comment">// é€šè¿‡ new è°ƒç”¨æ—¶, this åº”è¯¥æ˜¯ boundFunc çš„å®ä¾‹</span>
    <span class="hljs-keyword">const</span> isNewCall = <span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> boundFunc;

    <span class="hljs-comment">// ç¡®å®šæ‰§è¡Œä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">const</span> thisContext = isNewCall ? <span class="hljs-variable language_">this</span> : <span class="hljs-title class_">Object</span>(context || globalThis);

    <span class="hljs-comment">// åˆå¹¶å‚æ•°</span>
    <span class="hljs-keyword">const</span> allArgs = bindArgs.<span class="hljs-title function_">concat</span>(callArgs);

    <span class="hljs-comment">// è°ƒç”¨åŸå‡½æ•°</span>
    <span class="hljs-keyword">return</span> originalFunc.<span class="hljs-title function_">apply</span>(thisContext, allArgs);
  };

  <span class="hljs-comment">// ç»´æŠ¤åŸå‹é“¾</span>
  <span class="hljs-keyword">if</span> (originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
    <span class="hljs-comment">// ä½¿ç”¨ Object.create æ¥åˆ›å»ºåŸå‹é“¾, é¿å…ç›´æ¥ä¿®æ”¹</span>
    boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(originalFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    <span class="hljs-comment">// ä¿®æ­£ constructor æŒ‡å‘</span>
    boundFunc.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = boundFunc;
  }

  <span class="hljs-comment">// ä¿ç•™åŸå‡½æ•°çš„ length å±æ€§(å¯é€‰, éæ ‡å‡†)</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è®¡ç®—ç»‘å®šå‡½æ•°çš„ length å±æ€§(åŸå‡½æ•°å‚æ•°ä¸ªæ•° - ç»‘å®šçš„å‚æ•°ä¸ªæ•°)</span>
    <span class="hljs-keyword">const</span> originalLength = originalFunc.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> bindArgsLength = bindArgs.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> remainingArgs = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(originalLength - bindArgsLength, <span class="hljs-number">0</span>);

    <span class="hljs-comment">// ä½¿ç”¨ Object.defineProperty æ¥å®šä¹‰ä¸å¯æšä¸¾çš„ length å±æ€§</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunc, <span class="hljs-string">"length"</span>, {
      <span class="hljs-attr">value</span>: remainingArgs,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    });
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// å¿½ç•¥é”™è¯¯</span>
  }

  <span class="hljs-comment">// ä¿ç•™åŸå‡½æ•°çš„ name å±æ€§(å¯é€‰)</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(boundFunc, <span class="hljs-string">"name"</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-string">`bound <span class="hljs-subst">${originalFunc.name || <span class="hljs-string">""</span>}</span>`</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    });
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// å¿½ç•¥é”™è¯¯</span>
  }

  <span class="hljs-keyword">return</span> boundFunc;
};

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">introduce</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hi, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span> years old.`</span>);
};

<span class="hljs-comment">// åˆ›å»ºç»‘å®šå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BoundPerson</span> = <span class="hljs-title class_">Person</span>.<span class="hljs-title function_">myBind</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">"Alice"</span>);
<span class="hljs-keyword">const</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BoundPerson</span>(<span class="hljs-number">25</span>); <span class="hljs-comment">// ä½¿ç”¨ new è°ƒç”¨</span>
person.<span class="hljs-title function_">introduce</span>(); <span class="hljs-comment">// è¾“å‡º: Hi, I'm Alice, 25 years old.</span>

<span class="hljs-comment">// æ™®é€šç»‘å®šä½¿ç”¨</span>
<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">x</span>: <span class="hljs-number">10</span> };
<span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">y</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * y;
}

<span class="hljs-keyword">const</span> boundMultiply = multiply.<span class="hljs-title function_">myBind</span>(obj);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">boundMultiply</span>(<span class="hljs-number">5</span>)); <span class="hljs-comment">// è¾“å‡º: 50</span>

</code></pre>
<h5 data-id="heading-15">3.4 <code>bind</code>çš„ç‰¹æ®Šä¹‹å¤„</h5>
<ol>
<li><strong>éƒ¨åˆ†åº”ç”¨:</strong> å¯ä»¥é¢„å…ˆç»‘å®šéƒ¨åˆ†å‚æ•°</li>
<li><strong>æ„é€ å‡½æ•°æ”¯æŒ:</strong> ç»‘å®šåçš„å‡½æ•°å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨</li>
<li><strong>å»¶è¿Ÿæ‰§è¡Œ:</strong> è¿”å›æ–°å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œ</li>
</ol>
<h4 data-id="heading-16">å››ã€Object.create æ–¹æ³•</h4>
<h5 data-id="heading-17">4.1 åŸºæœ¬æ¦‚å¿µ</h5>
<p><code>Object.create()</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹ã€‚
è¯­æ³•:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(proto[, propertiesObject])
</code></pre>
<h5 data-id="heading-18">4.2 åŸç”Ÿä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŸå‹ä¸º null çš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> obj1 = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">toString</span>); <span class="hljs-comment">// undefined</span>

<span class="hljs-comment">// ä½¿ç”¨åŸå‹åˆ›å»ºå¯¹è±¡</span>
<span class="hljs-keyword">const</span> person = {
  <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  },
};

<span class="hljs-keyword">const</span> john = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(person);
john.<span class="hljs-property">name</span> = <span class="hljs-string">"John"</span>;
john.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// è¾“å‡º: Hello, John</span>
</code></pre>
<h5 data-id="heading-19">4.3 æ‰‹å†™å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-property">myCreate</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">proto, propertiesObject</span>) {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (
    proto !== <span class="hljs-literal">null</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">"object"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">"function"</span>
  ) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Object prototype may only be an Object or null"</span>);
  }

  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">TempFunc</span>(<span class="hljs-params"/>) {}

  <span class="hljs-comment">// è®¾ç½®æ„é€ å‡½æ•°çš„åŸå‹</span>
  <span class="hljs-title class_">TempFunc</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = proto;

  <span class="hljs-comment">// åˆ›å»ºæ–°å®ä¾‹</span>
  <span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TempFunc</span>();

  <span class="hljs-comment">// å¦‚æœ proto æ˜¯ null, æ‰‹åŠ¨è®¾ç½®åŸå‹ä¸º null</span>
  <span class="hljs-keyword">if</span> (proto === <span class="hljs-literal">null</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(obj, <span class="hljs-literal">null</span>);
  }

  <span class="hljs-comment">// å¤„ç†ç¬¬äºŒä¸ªå‚æ•°: å±æ€§æè¿°ç¬¦</span>
  <span class="hljs-keyword">if</span> (propertiesObject !== <span class="hljs-literal">undefined</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperties</span>(obj, propertiesObject);
  }

  <span class="hljs-keyword">return</span> obj;
};

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> animal = {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sound</span> || <span class="hljs-string">"Some sound"</span>);
  },
};

<span class="hljs-comment">// åˆ›å»ºç»§æ‰¿è‡ª animal çš„å¯¹è±¡</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">myCreate</span>(animal, {
  <span class="hljs-attr">sound</span>: {
    <span class="hljs-attr">value</span>: <span class="hljs-string">"Woof!"</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">breed</span>: {
    <span class="hljs-attr">value</span>: <span class="hljs-string">"Labrador"</span>,
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  },
});

dog.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// è¾“å‡º: Woof!</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog.<span class="hljs-property">breed</span>); <span class="hljs-comment">// è¾“å‡º: Labrador</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(dog) === animal); <span class="hljs-comment">// è¾“å‡º: true</span>

</code></pre>
<h5 data-id="heading-20">4.4 <code>Object.create</code>çš„åº”ç”¨åœºæ™¯</h5>
<ol>
<li><strong>åŸå‹ç»§æ‰¿:</strong> å®ç°å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿å…³ç³»</li>
<li><strong>çº¯å‡€å¯¹è±¡:</strong> åˆ›å»ºæ²¡æœ‰åŸå‹é“¾çš„å¯¹è±¡(<code>Object.create(null)</code>)</li>
<li><strong>å±æ€§å®šä¹‰:</strong> åŒæ—¶å®šä¹‰å¤šä¸ªå±æ€§åŠå…¶ç‰¹æ€§</li>
</ol>
<h4 data-id="heading-21">äº”ã€ç»¼åˆåº”ç”¨ä¸å¯¹æ¯”</h4>
<h5 data-id="heading-22">5.1 å®ç°ä¸€ä¸ªå®Œæ•´çš„ç»§æ‰¿ç³»ç»Ÿ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is eating.`</span>);
};

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name, breed</span>) {
  <span class="hljs-comment">// ä½¿ç”¨ call ç»§æ‰¿å±æ€§</span>
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
}

<span class="hljs-comment">// ä½¿ç”¨ Object.create ç»§æ‰¿åŸå‹</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">myCreate</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>;

<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bark</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.breed}</span> says: Woof!)`</span>);
};

<span class="hljs-comment">// ä½¿ç”¨ bind åˆ›å»ºç‰¹å®šè¡Œä¸º</span>
<span class="hljs-keyword">const</span> sleepyEat = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span>.<span class="hljs-title function_">bind</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"Sleepy"</span> });

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> myDog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"Buddy"</span>, <span class="hljs-string">"Golden Retriever"</span>);
myDog.<span class="hljs-title function_">eat</span>(); <span class="hljs-comment">// è¾“å‡º: Buddy is eating.</span>
myDog.<span class="hljs-title function_">bark</span>(); <span class="hljs-comment">// è¾“å‡º: Buddy (Golden Retriever says: Woof!)</span>
<span class="hljs-title function_">sleepyEat</span>(); <span class="hljs-comment">// è¾“å‡º: Sleepy is eating.</span>
</code></pre>
<h5 data-id="heading-23">5.2 å››ç§æ–¹æ³•å¯¹æ¯”æ€»ç»“</h5>



































<table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">ä½œç”¨</th><th align="left">è¿”å›å€¼</th><th align="left">æ˜¯å¦ç«‹å³æ‰§è¡Œ</th></tr></thead><tbody><tr><td align="left">call</td><td align="left">æ”¹å˜å‡½æ•°thisæŒ‡å‘å¹¶ç«‹å³è°ƒç”¨</td><td align="left">å‡½æ•°è¿”å›å€¼</td><td align="left">æ˜¯</td></tr><tr><td align="left">apply</td><td align="left">æ”¹å˜å‡½æ•°thisæŒ‡å‘å¹¶ä»¥æ•°ç»„ä¼ å‚è°ƒç”¨</td><td align="left">å‡½æ•°è¿”å›å€¼</td><td align="left">æ˜¯</td></tr><tr><td align="left">bind</td><td align="left">åˆ›å»ºæ–°çš„ç»‘å®šå‡½æ•°</td><td align="left">æ–°å‡½æ•°</td><td align="left">å¦</td></tr><tr><td align="left">Object.create</td><td align="left">åˆ›å»ºæŒ‡å®šåŸå‹çš„å¯¹è±¡</td><td align="left">æ–°å¯¹è±¡</td><td align="left">-</td></tr></tbody></table>
<h5 data-id="heading-24">5.3 æ€§èƒ½è€ƒè™‘</h5>
<ol>
<li><strong>call/apply:</strong> é¢‘ç¹ä½¿ç”¨ä¼šå½±å“æ€§èƒ½(æ¯æ¬¡éƒ½è¦åˆ›å»º/åˆ é™¤å±æ€§)</li>
<li><strong>bind:</strong> é€‚åˆé‡å¤è°ƒç”¨çš„åœºæ™¯ï¼Œåªéœ€ç»‘å®šä¸€æ¬¡</li>
<li><strong>Object.create:</strong> æ¯”<code>new Constructor()</code>æ›´è½»é‡ï¼Œé€‚åˆçº¯åŸå‹ç»§æ‰¿</li>
</ol>
<h4 data-id="heading-25">å…­ã€ç°ä»£ JavaScript ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ</h4>
<h5 data-id="heading-26">6.1 ç®­å¤´å‡½æ•°</h5>
<p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„<code>this</code>å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼</span>
<span class="hljs-keyword">const</span> obj1 = {
  <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">getValue</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
  }.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>),
};

<span class="hljs-comment">// ç®­å¤´å‡½æ•°æ–¹å¼</span>
<span class="hljs-keyword">const</span> obj2 = {
  <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">getValue</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>,
};

</code></pre>
<h5 data-id="heading-27">6.2 ç±»ç»§æ‰¿(ES6+)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES5 ç»§æ‰¿æ–¹å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> eats`</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name, breed</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
}
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Dog</span>;

<span class="hljs-comment">// ES6ç±»ç»§æ‰¿</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> eats`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, breed</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> barks`</span>);
  }
}

</code></pre>
<h5 data-id="heading-28">6.3 å±æ€§æè¿°ç¬¦</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ›¿ä»£ Object.create çš„éƒ¨åˆ†åŠŸèƒ½</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-comment">// æ™®é€šå±æ€§</span>
  <span class="hljs-attr">normalProp</span>: <span class="hljs-string">"value"</span>,

  <span class="hljs-comment">// ä½¿ç”¨ getter/setter</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">computedProp</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">normalProp</span>.<span class="hljs-title function_">toUpperCase</span>();
  },

  <span class="hljs-keyword">set</span> <span class="hljs-title function_">computedProp</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">normalProp</span> = value.<span class="hljs-title function_">toLowerCase</span>();
  },
};

<span class="hljs-comment">// ä½¿ç”¨ Object.defineProperty å®šä¹‰å±æ€§ç‰¹æ€§</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">"readOnlyProp"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-string">"cannot change"</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>,
});
</code></pre>
<h4 data-id="heading-29">ä¸ƒã€å¸¸è§é¢è¯•é¢˜è§£æ</h4>
<h5 data-id="heading-30">7.1 æ‰‹å†™<code>new</code>æ“ä½œç¬¦</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç»§æ‰¿ Constructor çš„åŸå‹</span>
  <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">myCreate</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// 2. æ‰§è¡Œæ„é€ å‡½æ•°, ç»‘å®š this åˆ°æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(obj, args);

  <span class="hljs-comment">// 3. å¦‚æœæ„é€ å‡½æ•°è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡; å¦åˆ™è¿”å›æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Object</span> ? result : obj;
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">introduce</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span> years old.`</span>);
};

<span class="hljs-keyword">const</span> p = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">Person</span>, <span class="hljs-string">"Tim"</span>, <span class="hljs-number">30</span>);
p.<span class="hljs-title function_">introduce</span>(); <span class="hljs-comment">// è¾“å‡º: I'm Tim, 30 years old.</span>
</code></pre>
<h5 data-id="heading-31">7.2 å®ç°æ·±å†»ç»“å¯¹è±¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepFreeze</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§å</span>
  <span class="hljs-keyword">const</span> propNames = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyNames</span>(obj);

  <span class="hljs-comment">// å†»ç»“è‡ªèº«</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(obj);

  <span class="hljs-comment">// é€’å½’å†»ç»“æ‰€æœ‰å±æ€§</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">of</span> propNames) {
    <span class="hljs-keyword">const</span> value = obj[name];

    <span class="hljs-keyword">if</span> (value &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span>) {
      <span class="hljs-title function_">deepFreeze</span>(value);
    }
  }

  <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-comment">// ä½¿ç”¨ Object.create åˆ›å»ºä¸å¯å˜å¯¹è±¡</span>
<span class="hljs-keyword">const</span> immutableProto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>({
  <span class="hljs-title function_">method</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"immutable method"</span>;
  },
});

<span class="hljs-keyword">const</span> immutableObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">myCreate</span>(immutableProto);

</code></pre>
<h5 data-id="heading-32">7.3 å®ç°æŸ¯é‡ŒåŒ–å‡½æ•°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">curry</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">curried</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (args.<span class="hljs-property">length</span> &gt;= fn.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// å‚æ•°è¶³å¤Ÿï¼Œç›´æ¥æ‰§è¡Œ</span>
      <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å‚æ•°ä¸è¶³ï¼Œè¿”å›æ–°å‡½æ•°ç»§ç»­æ”¶é›†å‚æ•°</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...moreArgs</span>) {
        <span class="hljs-keyword">return</span> curried.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args.<span class="hljs-title function_">concat</span>(moreArgs));
      };
    }
  };
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">return</span> a + b + c;
}

<span class="hljs-keyword">const</span> curriedAdd = <span class="hljs-title function_">curry</span>(add);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)); <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)); <span class="hljs-comment">// 6</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 6</span>
</code></pre>
<h4 data-id="heading-33">å…«ã€æ€»ç»“</h4>
<p>é€šè¿‡æ‰‹å†™å®ç°<code>call</code>ã€<code>apply</code>ã€<code>bind</code>å’Œ<code>Object.create</code>, æˆ‘ä»¬æ·±å…¥ç†è§£äº† JavaScript çš„æ ¸å¿ƒæœºåˆ¶:</p>
<ol>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡ç®¡ç†:</strong> <code>call</code>å’Œ<code>apply</code>è®©æˆ‘ä»¬å¯ä»¥æ˜¾å¼æ§åˆ¶å‡½æ•°çš„<code>this</code>æŒ‡å‘</li>
<li><strong>å‡½æ•°ç»‘å®šä¸å¤ç”¨:</strong> <code>bind</code>åˆ›å»ºäº†å¯å¤ç”¨çš„å‡½æ•°ï¼Œç‰¹åˆ«é€‚åˆäº‹ä»¶å¤„ç†å’Œå›è°ƒå‡½æ•°</li>
<li><strong>åŸå‹ç»§æ‰¿ç³»ç»Ÿ:</strong> <code>Object.create</code> æ˜¯JavaScript åŸå‹ç»§æ‰¿çš„åŸºç¡€</li>
</ol>
<p>è™½ç„¶ç°ä»£ JavaScript æä¾›äº†ç®­å¤´å‡½æ•°ã€ç±»è¯­æ³•ç­‰æ›´é«˜çº§çš„ç‰¹æ€§ï¼Œä½†è¿™äº›åº•å±‚æ–¹æ³•ä»ç„¶æ˜¯ç†è§£ JavaScript è¿è¡Œæœºåˆ¶çš„å…³é”®ã€‚æŒæ¡å®ƒä»¬ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥½çš„ä»£ç ï¼Œè¿˜èƒ½åœ¨è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–æ—¶æä¾›æ›´å¤šæ€è·¯ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ³•:</p>
<ul>
<li>éœ€è¦ç«‹å³æ‰§è¡Œä¸”å‚æ•°æ˜ç¡®æ—¶,ä½¿ç”¨<code>call</code></li>
<li>å‚æ•°åœ¨æ•°ç»„ä¸­æ—¶, ä½¿ç”¨<code>apply</code></li>
<li>éœ€è¦åˆ›å»ºå¯å¤ç”¨çš„å‡½æ•°æ—¶, ä½¿ç”¨<code>bind</code></li>
<li>éœ€è¦åˆ›å»ºç‰¹å®šåŸå‹çš„å¯¹è±¡æ—¶, ä½¿ç”¨<code>Object.create</code></li>
</ul>
<p>ç†è§£è¿™äº›æ–¹æ³•çš„åº•å±‚åŸç†ï¼Œå°†ä½¿æˆ‘ä»¬æˆä¸ºä¸€åæ›´ä¼˜ç§€çš„ JavaScript å¼€å‘è€…ã€‚</p>
<hr/>
<p>æ‹“å±•é˜…è¯»å»ºè®®:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fcall" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" ref="nofollow noopener noreferrer">MDN: Function.prototype.call()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fapply" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" ref="nofollow noopener noreferrer">MDN: Function.prototype.apply()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fbind" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" ref="nofollow noopener noreferrer">MDN: Function.prototype.bind()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FObject%2Fcreate" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" ref="nofollow noopener noreferrer">MDN: Object.create()</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸåˆ›Luaè„šæœ¬å‹ç¼©HTMLç½‘é¡µæºç ï¼ŒèŠ‚çœ60%æµé‡å’Œå¸¦å®½ï¼Œæ‰¾è€æ¿åŠ è–ª]]></title>    <link>https://juejin.cn/post/7579819594270883878</link>    <guid>https://juejin.cn/post/7579819594270883878</guid>    <pubDate>2025-12-04T09:22:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594270883878" data-draft-id="7579814711852924938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸåˆ›Luaè„šæœ¬å‹ç¼©HTMLç½‘é¡µæºç ï¼ŒèŠ‚çœ60%æµé‡å’Œå¸¦å®½ï¼Œæ‰¾è€æ¿åŠ è–ª"/> <meta itemprop="keywords" content="Lua"/> <meta itemprop="datePublished" content="2025-12-04T09:22:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å«å‡¯"/> <meta itemprop="url" content="https://juejin.cn/user/2049145406489016"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸåˆ›Luaè„šæœ¬å‹ç¼©HTMLç½‘é¡µæºç ï¼ŒèŠ‚çœ60%æµé‡å’Œå¸¦å®½ï¼Œæ‰¾è€æ¿åŠ è–ª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2049145406489016/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å«å‡¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:22:31.000Z" title="Thu Dec 04 2025 09:22:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¼ ç»Ÿç½‘ç«™å› ä¸ºè¦æ³¨é‡SEOå’Œé€Ÿåº¦ï¼Œä¸€èˆ¬é‡‡ç”¨ php/java + æ¨¡æ¿çš„æ–¹å¼å¼€å‘ï¼ˆä¸ä¼šé‡‡ç”¨SPAå•é¡µæ¨¡å¼ï¼‰ï¼Œ
ç‰¹åˆ«æ˜¯ç»è¿‡å¤šæ¬¡æ”¹ç‰ˆè°ƒæ•´åï¼Œç½‘é¡µæºç ä¸­å¾ˆå¤šæ— å…³çš„å¤‡æ³¨å†…å®¹ï¼Œå ç”¨äº†ä¸å°‘çš„å¸¦å®½ã€‚</p>
<p>ä½†æ˜¯ç»è¿‡æœ¬Luaä»£ç è‡ªåŠ¨å¤„ç†åï¼ŒæŠŠç©ºæ ¼ï¼Œå•è¡Œã€å¤šè¡Œå¤‡æ³¨ï¼Œåœ¨è¾“å‡ºåˆ°å®¢æˆ·ç«¯å‰é€šé€šæ¸…ç†æ‰ï¼Œä¸å½±å“æºç çš„å¤‡æ³¨ï¼Œå› æ­¤è¯¥æŠ€æœ¯è¿˜æ˜¯æœ‰ä¸€å®šçš„åœºæ™¯ã€‚</p>
<p>ç»æˆ‘æµ‹è¯•ï¼Œå‹ç¼©åäº†åªæœ‰å‹ç¼©å‰çš„60%ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">    <span class="hljs-keyword">local</span> outarr = {};
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strCompress</span><span class="hljs-params">(htm)</span></span>
       <span class="hljs-keyword">if</span> htm==<span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">end</span>
       <span class="hljs-keyword">local</span> pt={
         {<span class="hljs-string">[[\/\*(.|\r|\n)*?\*\/]]</span>,<span class="hljs-string">""</span>,<span class="hljs-string">"i"</span>, <span class="hljs-string">"CSS/JSå¤šè¡Œ:/*å¤šè¡Œæ³¨é‡Š*/"</span>},
         {<span class="hljs-string">[[&lt;![-]{2}(.|\r|\n)*?[-]{2}&gt;]]</span>,<span class="hljs-string">''</span>,<span class="hljs-string">"i"</span>, <span class="hljs-string">"HTMLæ³¨é‡Š:&lt;!--æ³¨é‡Š--&gt;"</span>},
         {<span class="hljs-string">[[[\n\r\t]+]]</span>,<span class="hljs-string">" "</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"å¤šä¸ªæ¢è¡Œç¼©è¿›æ¢æˆ1ä¸ªç©ºæ ¼"</span>},
         {<span class="hljs-string">[[\s*(&lt;[\/]*(ul|li|div)&gt;)]]</span>,<span class="hljs-string">"$1"</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"å»ul,li,divå‰åç©ºæ ¼"</span>},
         {<span class="hljs-string">[[((style|alt|title|class)=[\"\']\s*[\"\'])]]</span>,<span class="hljs-string">""</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"å»ç©ºalt  class"</span>},
         {<span class="hljs-string">[[\s{2,}]]</span>,<span class="hljs-string">' '</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"è¿ç»­2ä¸ªç©ºæ ¼æ¢æˆ1ä¸ª"</span>},
         {<span class="hljs-string">[[(^\s*\/\/.*$)]]</span>,<span class="hljs-string">''</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"å‰ç©ºæ ¼çš„åŒæ–œæ æ•´è¡Œæ³¨é‡Š"</span>},
    	 {<span class="hljs-string">[[(?&lt;![\n\'\"\:])(\/\/[^\"\'\n]*)(?=[\n])]]</span>,<span class="hljs-string">''</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"ä»£ç ååŒæ–œæ æ³¨é‡Š"</span>},
         {<span class="hljs-string">[[^\s{1,}]]</span>,<span class="hljs-string">''</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"å»è¡Œå¼€å§‹çš„ç©ºæ ¼"</span>},
         {<span class="hljs-string">[[(\}|\{|\(|,|:|;)(\s|\n)*]]</span>,<span class="hljs-string">'$1'</span>,<span class="hljs-string">"is"</span>,<span class="hljs-string">"å¤§æ‹¬å·,å·¦æ‹¬å·,é€—å·,åˆ†å·åé¢çš„ç©ºç™½"</span>},
         {<span class="hljs-string">[[(\s|\n)*(\}.*$)]]</span>,<span class="hljs-string">'$2'</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"è·¨è¡Œå³å¤§æ‹¬å· å·¦è¾¹çš„ç©ºç™½"</span>},
         {<span class="hljs-string">[[\)\s*\{]]</span>,<span class="hljs-string">'){'</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"åŒè¡Œ å³æ‹¬å·_å·¦å¤§æ‹¬å·ä¸­é—´ç©ºç™½"</span>},
          {<span class="hljs-string">[[\}if]]</span>,<span class="hljs-string">'};if'</span>,<span class="hljs-string">"im"</span>,<span class="hljs-string">"fix è¡Œæœ«ä¸åŠ åˆ†å·åé¢æ¥if"</span>}
        }
        <span class="hljs-comment">-- é€‰æ‹©è§„åˆ™é¡ºåºæœ‰è®²ç©¶çš„ï¼Œå¦åˆ™å…¼å®¹æ€§ä¸‹é™</span>
        <span class="hljs-keyword">local</span> Pats = {pt[<span class="hljs-number">1</span>],pt[<span class="hljs-number">2</span>],pt[<span class="hljs-number">3</span>],pt[<span class="hljs-number">4</span>],pt[<span class="hljs-number">5</span>],pt[<span class="hljs-number">6</span>]};
        <span class="hljs-keyword">local</span> from, to, substr = ngx.re.<span class="hljs-built_in">find</span>(htm, <span class="hljs-string">"script"</span>,<span class="hljs-string">"oj"</span>);
        <span class="hljs-keyword">if</span> from==<span class="hljs-number">2</span> <span class="hljs-keyword">then</span> 
          Pats= {pt[<span class="hljs-number">1</span>],pt[<span class="hljs-number">7</span>],pt[<span class="hljs-number">8</span>],pt[<span class="hljs-number">9</span>],pt[<span class="hljs-number">10</span>],pt[<span class="hljs-number">11</span>],pt[<span class="hljs-number">12</span>],pt[<span class="hljs-number">13</span>]}  
        <span class="hljs-keyword">end</span> 
       
        <span class="hljs-keyword">for</span> i, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(Pats) <span class="hljs-keyword">do</span>
          <span class="hljs-keyword">local</span> newstr = ngx.re.<span class="hljs-built_in">gsub</span>(htm, v[<span class="hljs-number">1</span>], v[<span class="hljs-number">2</span>], v[<span class="hljs-number">3</span>]);
          <span class="hljs-keyword">if</span> newstr <span class="hljs-keyword">then</span>  htm = newstr <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">return</span> htm
     <span class="hljs-keyword">end</span>
       
     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">split_script</span><span class="hljs-params">(a)</span></span>
          <span class="hljs-keyword">local</span> i = <span class="hljs-number">0</span>
          <span class="hljs-keyword">return</span>
          <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( str, max)</span></span>
            <span class="hljs-keyword">if</span> leave == <span class="hljs-literal">nil</span> <span class="hljs-keyword">and</span> i==<span class="hljs-number">0</span> <span class="hljs-keyword">then</span> leave=str <span class="hljs-keyword">end</span>
            <span class="hljs-keyword">if</span> leave == <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  <span class="hljs-keyword">end</span>
            <span class="hljs-keyword">local</span> from,to,err = ngx.re.<span class="hljs-built_in">find</span>(leave, <span class="hljs-string">"&lt;script.*?/script&gt;"</span>, <span class="hljs-string">"sjo"</span>)
              i=i+<span class="hljs-number">1</span>
              <span class="hljs-keyword">if</span> from <span class="hljs-keyword">then</span> 
                <span class="hljs-keyword">local</span> delimiter = strCompress(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(leave,from, to))
                <span class="hljs-keyword">local</span> cutstr = strCompress(<span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(leave, <span class="hljs-number">0</span>, from<span class="hljs-number">-1</span>))
                <span class="hljs-keyword">if</span> #cutstr&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> cutstr~=<span class="hljs-string">' '</span> <span class="hljs-keyword">then</span> 
                 <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(outarr, cutstr)
                <span class="hljs-keyword">end</span>
                <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(outarr, delimiter) 
                leave = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">sub</span>(leave,to+<span class="hljs-number">1</span>)
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">max</span>&gt;<span class="hljs-number">128</span> <span class="hljs-keyword">or</span> #leave==<span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-keyword">end</span>
                <span class="hljs-keyword">return</span> i,leave
              <span class="hljs-keyword">else</span>
                <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(outarr, strCompress(leave))
                <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
              <span class="hljs-keyword">end</span> 
          <span class="hljs-keyword">end</span> ,a,<span class="hljs-number">0</span>
     <span class="hljs-keyword">end</span>  

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doTraverse</span><span class="hljs-params">(str)</span></span>
		<span class="hljs-comment">-- éå†å¤„ç†</span>
		<span class="hljs-keyword">for</span> k,v <span class="hljs-keyword">in</span> split_script( str ) <span class="hljs-keyword">do</span>
	        <span class="hljs-comment">-- ngx.say(":--&gt;&gt;"..k.."&lt;&lt;--:", v )</span>
		<span class="hljs-keyword">end</span> 
	<span class="hljs-keyword">end</span>
    <span class="hljs-comment">-- ä»…ä»…å‹ç¼©htmlå†…å®¹</span>
	<span class="hljs-keyword">local</span> i,j = ngx.re.<span class="hljs-built_in">find</span>( ngx.header[<span class="hljs-string">"Content-Type"</span>], <span class="hljs-string">"text/html"</span>,<span class="hljs-string">"sjo"</span>);
	<span class="hljs-keyword">if</span>  i ~= <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span>
	  
	    <span class="hljs-keyword">local</span> chunk, eof = ngx.<span class="hljs-built_in">arg</span>[<span class="hljs-number">1</span>], ngx.<span class="hljs-built_in">arg</span>[<span class="hljs-number">2</span>] <span class="hljs-comment">-- è·å–å½“å‰çš„æµ å’Œæ˜¯å¦æ—¶ç»“æŸ</span>
	    <span class="hljs-keyword">local</span> info = ngx.ctx.buf
	    chunk = chunk <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
	    
	    <span class="hljs-keyword">if</span> info <span class="hljs-keyword">then</span>
	        ngx.ctx.buf = info .. chunk <span class="hljs-comment">-- è¿™ä¸ªå¯ä»¥å°†åŸæœ¬çš„å†…å®¹è®°å½•ä¸‹æ¥</span>
	    <span class="hljs-keyword">else</span>
	        ngx.ctx.buf = chunk
	    <span class="hljs-keyword">end</span>
	    
	    <span class="hljs-keyword">if</span> eof <span class="hljs-keyword">then</span>
	        <span class="hljs-comment">-- ngx.ctx.buffered = nili</span>
	        <span class="hljs-keyword">if</span> <span class="hljs-built_in">status</span> == <span class="hljs-number">413</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">status</span> == <span class="hljs-string">"413"</span> <span class="hljs-keyword">then</span>  <span class="hljs-comment">-- 413æ˜¯Nginx request body timeout çš„çŠ¶æ€å—</span>
			   ngx.<span class="hljs-built_in">arg</span>[<span class="hljs-number">1</span>] = <span class="hljs-string">"&lt;h1&gt;Nginx request body timeout&lt;/h1&gt;"</span>
	        <span class="hljs-keyword">else</span>
			   doTraverse( ngx.ctx.buf ) 
		       ngx.<span class="hljs-built_in">arg</span>[<span class="hljs-number">1</span>] = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>(outarr,<span class="hljs-string">""</span>)
	        <span class="hljs-keyword">end</span>
	    <span class="hljs-keyword">else</span>
	      	  ngx.<span class="hljs-built_in">arg</span>[<span class="hljs-number">1</span>] = <span class="hljs-string">""</span>
	    <span class="hljs-keyword">end</span>
	<span class="hljs-keyword">end</span>

</code></pre>
<h2 data-id="heading-0">ä½¿ç”¨æ–¹å¼</h2>
<p>æŠŠä»¥ä¸Šå†…å®¹å­˜å‚¨åˆ° proxy-data-minify.luaæ–‡ä»¶ä¸­ï¼Œåœ¨å®å¡”ç«™ç‚¹é…ç½® Nginx ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p>
<pre><code class="hljs language-conf" lang="conf">body_filter_by_lua_file /www/server/lua/proxy-data-minify.lua;
</code></pre>
<p>æˆ–è€…ç»Ÿä¸€åœ¨ /www/server/nginx/conf/phpinfo.conf æœ«å°¾åŠ å…¥ä¸Šé¢ä¸€è¡Œï¼Œè¿™æ ·ä¼šå¤„ç†æ‰€æœ‰php è¾“å‡ºåˆ° ç½‘é¡µæºç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7579298511072346112</link>    <guid>https://juejin.cn/post/7579298511072346112</guid>    <pubDate>2025-12-03T09:57:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579298511072346112" data-draft-id="7578820431039561768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ "/> <meta itemprop="keywords" content="å‰ç«¯,gradle"/> <meta itemprop="datePublished" content="2025-12-03T09:57:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜å·"/> <meta itemprop="url" content="https://juejin.cn/user/114004941350269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004941350269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:57:32.000Z" title="Wed Dec 03 2025 09:57:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    49
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>â€ƒâ€ƒ25å¹´ä¸»è¦å·¥ä½œæ˜¯æ–°Appçš„å¼€å‘å’ŒæŠ½ç¦»ï¼ŒæœŸé—´å¯¹Asmå’ŒPluginæ–¹é¢å·¥ä½œè¾ƒå¤šï¼Œç†æ‰€å½“ç„¶çš„éœ€è¦å’ŒGradleæ‰“äº¤é“ï¼Œç”±äºé¡¹ç›®ä¸­ä½¿ç”¨çš„Gradleç‰ˆæœ¬è¾ƒä½ï¼Œä¸”ä¸ºGroovyç‰ˆæœ¬ï¼Œæ‰€ä»¥å¯¹Groovy7.0å’ŒKtsç‰ˆæœ¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œä¹‹å‰çœ‹è¿‡ä½†æ˜¯æ²¡æœ‰å®è·µè¿‡ï¼Œæ‰€ä»¥å°±æœ‰äº†æœ¬ç¯‡è®°å½•æ–‡ç« ï¼Œç®—æ˜¯å¯¹25å¹´ä¸ŠåŠå¹´éƒ¨åˆ†å­¦ä¹ çŸ¥è¯†çš„æ€»ç»“ã€‚ psï¼šAIå½“é“ï¼Œè™½ç„¶å¾ˆå¤šé—®é¢˜å’Œç–‘æƒ‘ç›´æ¥è®©Cursoræ¥å®ç°å°±å¥½äº†ï¼Œä½†æ˜¯è¯¥æœ‰çš„çŸ¥è¯†åº“ç§¯ç´¯è¿˜æ˜¯è¦åšçš„ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚ å¯èƒ½ä»£ç å±…å¤šï¼Œå¤§éƒ¨åˆ†ç‰‡æ®µéƒ½æ˜¯æœ¬åœ°ç¬”è®°è¿ç§»è¿‡æ¥çš„ï¼Œæ®µè½é—´å¯èƒ½ä¸å¤ªè¿è´¯ æµ·æ¶µ</p>
<h2 data-id="heading-1">Gradleç®€è¦ä»‹ç»</h2>
<p>æ³¨é‡Šï¼šä¸‹è¾¹ä»¥Gradle kts ä¸ºä¾‹
ç®€å•å±•ç¤ºä¸‹ä¸€èˆ¬å·¥ç¨‹çš„é¡¹ç›®ç»“æ„å›¾</p>
<pre><code class="hljs language-bash" lang="bash">MyAndroidApp/
â”œâ”€â”€ gradle/
â”‚   â”œâ”€â”€ wrapper/
â”‚   â”‚   â”œâ”€â”€ gradle-wrapper.jar          <span class="hljs-comment"># ä¸»è¦æ˜¯Gradleçš„è¿è¡Œé€»è¾‘ï¼ŒåŒ…å«ä¸‹è½½Gradle</span>
â”‚   â”‚   â””â”€â”€ gradle-wrapper.properties   <span class="hljs-comment"># Wrapper é…ç½®ï¼Œå®šä¹‰äº†Gradleç‰ˆæœ¬</span>
â”‚   â””â”€â”€ libs.versions.toml              <span class="hljs-comment"># ç‰ˆæœ¬ç›®å½•ï¼ˆGradle 7.0+ï¼‰</span>
â”‚
â”œâ”€â”€ app/                                <span class="hljs-comment"># åº”ç”¨æ¨¡å—</span>
â”‚   â”œâ”€â”€ build.gradle.kts                <span class="hljs-comment"># æ¨¡å—æ„å»ºè„šæœ¬</span>
â”‚   â”œâ”€â”€ proguard-rules.pro              <span class="hljs-comment"># ProGuard è§„åˆ™</span>
â”‚   â””â”€â”€ src/                            <span class="hljs-comment"># æºä»£ç </span>
â”‚
â”œâ”€â”€ ktslibrary/                         <span class="hljs-comment"># åº“æ¨¡å—ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/
â”‚
â”œâ”€â”€ buildSrc/                           <span class="hljs-comment"># è‡ªå®šä¹‰æ„å»ºé€»è¾‘ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/
â”‚
â”œâ”€â”€ build.gradle.kts                    <span class="hljs-comment"># æ ¹é¡¹ç›®æ„å»ºè„šæœ¬</span>
â”œâ”€â”€ settings.gradle.kts                 <span class="hljs-comment"># é¡¹ç›®è®¾ç½®</span>
â”œâ”€â”€ gradle.properties                   <span class="hljs-comment"># Gradle å±æ€§é…ç½®</span>
â”œâ”€â”€ local.properties                    <span class="hljs-comment"># æœ¬åœ°é…ç½®ï¼ˆä¸æäº¤åˆ° Gitï¼‰</span>
â”œâ”€â”€ gradlew                             <span class="hljs-comment"># Gradle Wrapper è„šæœ¬ï¼ˆUnixï¼‰</span>
â””â”€â”€ gradlew.bat                         <span class="hljs-comment"># Gradle Wrapper è„šæœ¬ï¼ˆWindowsï¼‰</span>
</code></pre>
<h3 data-id="heading-2">gradle-wrapper.properties</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">#Tue Nov <span class="hljs-number">11</span> <span class="hljs-number">20</span>:<span class="hljs-number">22</span>:<span class="hljs-number">16</span> CST <span class="hljs-number">2025</span>
<span class="hljs-comment">//ä¸‹è½½çš„Gradleçš„å‹ç¼©åŒ…è§£å‹åçš„ä¸»ç›®å½•</span>
distributionBase=GRADLE_USER_HOME   
<span class="hljs-comment">// ç›¸å¯¹äºdistributionBaseçš„è§£å‹åçš„Gradleçš„è·¯å¾„ï¼Œä¸ºwrapper/dists</span>
distributionPath=wrapper/dists
<span class="hljs-comment">// Gradleç‰ˆæœ¬çš„ä¸‹è½½åœ°å€</span>
distributionUrl=https:<span class="hljs-comment">//services.gradle.org/distributions/gradle-8.11.1-bin.zip</span>
<span class="hljs-comment">// åŒdistributionBaseï¼Œä¸è¿‡æ˜¯å­˜æ”¾zipå‹ç¼©åŒ…çš„ä¸»ç›®å½•</span>
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</code></pre>
<p>å’Œgroovyç‰ˆæœ¬å˜åŒ–ä¸å¤§,ä¸»è¦è§£é‡Šéƒ½åœ¨å¤‡æ³¨é‡Œäº†</p>
<h3 data-id="heading-3">settings.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ’ä»¶ç®¡ç†é…ç½®</span>
pluginManagement {
    <span class="hljs-comment">// é…ç½®æ’ä»¶ä»“åº“</span>
    repositories {
        <span class="hljs-comment">// Google çš„ Maven ä»“åº“ï¼ˆAndroid æ’ä»¶ï¼‰</span>
        google {
            <span class="hljs-comment">// å†…å®¹è¿‡æ»¤ï¼šåªä» Google ä¸‹è½½ç‰¹å®šåŒ…</span>
            content {
                includeGroupByRegex(<span class="hljs-string">"com\\.android.*"</span>)
                includeGroupByRegex(<span class="hljs-string">"com\\.google.*"</span>)
                includeGroupByRegex(<span class="hljs-string">"androidx.*"</span>)
            }
        }
        
        mavenCentral()  <span class="hljs-comment">// Maven ä¸­å¤®ä»“åº“</span>
        gradlePluginPortal()  <span class="hljs-comment">// Gradle æ’ä»¶é—¨æˆ·</span>
    }
    
    <span class="hljs-comment">// æ’ä»¶ç‰ˆæœ¬è§£æç­–ç•¥</span>
    resolutionStrategy {
        eachPlugin {
            <span class="hljs-comment">// è‡ªå®šä¹‰æ’ä»¶ç‰ˆæœ¬è§£æ</span>
            <span class="hljs-keyword">if</span> (requested.id.id == <span class="hljs-string">"com.example.plugin"</span>) {
                useModule(<span class="hljs-string">"com.example:plugin:<span class="hljs-subst">${requested.version}</span>"</span>)
            }
        }
    }
}

<span class="hljs-comment">// 2. ä¾èµ–ç®¡ç†é…ç½® ä¸‰æ–¹åº“å¼•å…¥çš„æºå¤´é…ç½®</span>
dependencyResolutionManagement {
    <span class="hljs-comment">// ä»“åº“æ¨¡å¼</span>
    <span class="hljs-comment">// FAIL_ON_PROJECT_REPOS: ç¦æ­¢åœ¨é¡¹ç›®ä¸­å£°æ˜ä»“åº“ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-comment">// PREFER_PROJECT: ä¼˜å…ˆä½¿ç”¨é¡¹ç›®ä¸­çš„ä»“åº“</span>
    <span class="hljs-comment">// PREFER_SETTINGS: ä¼˜å…ˆä½¿ç”¨ settings ä¸­çš„ä»“åº“</span>
    repositoriesMode.<span class="hljs-keyword">set</span>(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    
    <span class="hljs-comment">// é…ç½®ä¾èµ–ä»“åº“</span>
    repositories {
        google()
        mavenCentral()
        mavenLocal()  <span class="hljs-comment">// æœ¬åœ° Maven ä»“åº“</span>
        maven { url = uri(<span class="hljs-string">"https://jitpack.io"</span>) }   <span class="hljs-comment">// JitPackï¼ˆGitHub é¡¹ç›®ï¼‰</span>
        <span class="hljs-comment">// é˜¿é‡Œäº‘é•œåƒï¼ˆå›½å†…åŠ é€Ÿï¼‰</span>
        maven { url = uri(<span class="hljs-string">"https://maven.aliyun.com/repository/public"</span>) }
        maven { url = uri(<span class="hljs-string">"https://maven.aliyun.com/repository/google"</span>) }
    }
    
    <span class="hljs-comment">// ç‰ˆæœ¬ç›®å½•</span>
    versionCatalogs {
        <span class="hljs-comment">// è‡ªå®šä¹‰ç‰ˆæœ¬ç›®å½•</span>
        create(<span class="hljs-string">"testLibs"</span>) {
            from(files(<span class="hljs-string">"gradle/test-libs.versions.toml"</span>))
        }
    }
}

<span class="hljs-comment">// 3. æ„å»ºç¼“å­˜é…ç½®</span>
buildCache {
    local {
        isEnabled = <span class="hljs-literal">true</span>
        directory = File(rootDir, <span class="hljs-string">"build-cache"</span>)
        removeUnusedEntriesAfterDays = <span class="hljs-number">30</span>
    }
    
    remote&lt;HttpBuildCache&gt; {
        url = uri(<span class="hljs-string">"https://build-cache.example.com/cache/"</span>)
        isEnabled = <span class="hljs-literal">false</span>
        isPush = <span class="hljs-literal">false</span>
    }
}

<span class="hljs-comment">// 4. æ’ä»¶ç®¡ç†ï¼ˆé«˜çº§ï¼‰</span>
plugins {
    <span class="hljs-comment">// åœ¨ settings ä¸­åº”ç”¨æ’ä»¶ï¼ˆGradle 8.0+ï¼‰</span>
    id(<span class="hljs-string">"com.gradle.enterprise"</span>) version <span class="hljs-string">"3.15"</span>
}

<span class="hljs-comment">// 5. é¡¹ç›®é…ç½®</span>

<span class="hljs-comment">// è®¾ç½®æ ¹é¡¹ç›®åç§°</span>
rootProject.name = <span class="hljs-string">"GradleY"</span>

<span class="hljs-comment">// åŒ…å«æ¨¡å—</span>
include <span class="hljs-string">':GroovyLibrary'</span>
include <span class="hljs-string">':KtsLibrary'</span>

<span class="hljs-comment">// 6. Gradle Enterprise / Build Scan</span>
gradleEnterprise {
    buildScan {
        termsOfServiceUrl = <span class="hljs-string">"https://gradle.com/terms-of-service"</span>
        termsOfServiceAgree = <span class="hljs-string">"yes"</span>
        publishAlways()
        <span class="hljs-comment">// è‡ªå®šä¹‰æ ‡ç­¾</span>
        tag(<span class="hljs-string">"CI"</span>)
        value(<span class="hljs-string">"Git Commit"</span>, getGitCommit())
    }
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getGitCommit</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> process = Runtime.getRuntime().exec(<span class="hljs-string">"git rev-parse --short HEAD"</span>)
        process.inputStream.bufferedReader().readText().trim()
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-string">"unknown"</span>
    }
}
</code></pre>
<p>â€ƒâ€ƒè¯¥æ–‡ä»¶ç”¨æ¥é…ç½®æ’ä»¶ç®¡ç†ï¼Œä¾èµ–åº“ç®¡ç†å’Œé¡¹ç›®ç›¸å…³é…ç½®ï¼Œå…·ä½“ä½œç”¨è§ä»£ç æ³¨é‡Šä¸­æ ‡æ³¨</p>
<h3 data-id="heading-4">æ ¹é¡¹ç›®build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts (root)</span>

<span class="hljs-comment">// 1. æ’ä»¶å£°æ˜</span>
plugins {
    <span class="hljs-comment">// ä½¿ç”¨ç‰ˆæœ¬ç›®å½•ï¼ˆæ¨èï¼‰</span>
    alias(libs.plugins.android.application) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.android.library) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.kotlin.android) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.kotlin.jvm) apply <span class="hljs-literal">false</span>
    
    <span class="hljs-comment">// æˆ–ç›´æ¥å£°æ˜ç‰ˆæœ¬</span>
    id(<span class="hljs-string">"com.android.application"</span>) version <span class="hljs-string">"8.1.0"</span> apply <span class="hljs-literal">false</span>
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>) version <span class="hljs-string">"1.9.0"</span> apply <span class="hljs-literal">false</span>
    
    <span class="hljs-comment">// apply false çš„å«ä¹‰ï¼š</span>
    <span class="hljs-comment">// å£°æ˜ç‰ˆæœ¬ä½†ä¸åº”ç”¨åˆ°æ ¹é¡¹ç›®ï¼Œç”±å­é¡¹ç›®è‡ªå·±å†³å®šæ˜¯å¦åº”ç”¨</span>
}

<span class="hljs-comment">// ä¸ºæ‰€æœ‰é¡¹ç›®é…ç½®</span>
allprojects {
    <span class="hljs-comment">// è®¾ç½®é¡¹ç›®å±æ€§</span>
    group = <span class="hljs-string">"com.example"</span>
    version = <span class="hljs-string">"1.0.0"</span>
    
    <span class="hljs-comment">// é…ç½®ä»»åŠ¡</span>
    tasks.withType&lt;JavaCompile&gt;().configureEach {
        options.encoding = <span class="hljs-string">"UTF-8"</span>
    }
}

<span class="hljs-comment">// ä¸ºæ‰€æœ‰å­é¡¹ç›®é…ç½®</span>
subprojects {
    <span class="hljs-comment">// åº”ç”¨é€šç”¨æ’ä»¶</span>
    apply(plugin = <span class="hljs-string">"checkstyle"</span>)
    
    <span class="hljs-comment">// é…ç½®é€šç”¨ä¾èµ–</span>
    dependencies {
        <span class="hljs-comment">// æ‰€æœ‰å­é¡¹ç›®éƒ½æ·»åŠ è¿™ä¸ªä¾èµ–</span>
        <span class="hljs-string">"implementation"</span>(<span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib"</span>)
    }
   
}
</code></pre>
<p>â€ƒâ€ƒ <strong>alias(libs.plugins.android.application) apply false</strong> ï¼Œkotlin æŒºå¥½çš„ä¸€ç‚¹å°±æ˜¯å¯è¿›è¡Œå®šä¹‰è·³è½¬ï¼Œaliasåè¾¹è¿™é‡Œçš„ å®šä¹‰åœ¨ <strong>libs.versions.toml</strong>æ–‡ä»¶ä¸­ï¼Œapply falseè¡¨ç¤ºä¸åº”ç”¨åˆ°è·Ÿé¡¹ç›®ï¼Œå­é¡¹ç›®å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>â€ƒâ€ƒè¿™é‡Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯<strong>allprojects</strong> æ˜¯åŒ…å«æ•´ä¸ªé¡¹ç›®çš„é…ç½®ï¼Œ <strong>subprojects</strong> ä¸åŒ…å«è·Ÿé¡¹ç›®ï¼ŒåªåŒ…å«å­é¡¹ç›®ã€‚</p>
<h3 data-id="heading-5">app build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// 1. æ’ä»¶é…ç½®</span>
plugins {
    <span class="hljs-comment">// åº”ç”¨æ’ä»¶</span>
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.kotlin.kapt)  <span class="hljs-comment">// Kotlin æ³¨è§£å¤„ç†</span>
    
    <span class="hljs-comment">// æˆ–ç›´æ¥å£°æ˜</span>
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>)
    kotlin(<span class="hljs-string">"kapt"</span>)  <span class="hljs-comment">// ç­‰åŒäº id("org.jetbrains.kotlin.kapt")</span>
}

<span class="hljs-comment">// 2. Android åŸºæœ¬é…ç½®</span>
android {
    <span class="hljs-comment">// å‘½åç©ºé—´ï¼ˆAGP 7.0+ï¼Œæ›¿ä»£ manifest ä¸­çš„ packageï¼‰</span>
    namespace = <span class="hljs-string">"com.example.app"</span>
    <span class="hljs-comment">// ç¼–è¯‘ SDK ç‰ˆæœ¬</span>
    compileSdk = <span class="hljs-number">33</span>
    <span class="hljs-comment">// æ„å»ºå·¥å…·ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ AGP æ¨èç‰ˆæœ¬ï¼‰</span>
    buildToolsVersion = <span class="hljs-string">"33.0.1"</span>
    
    <span class="hljs-comment">// é»˜è®¤é…ç½®</span>
    defaultConfig {
        applicationId = <span class="hljs-string">"com.example.app"</span>  <span class="hljs-comment">// åº”ç”¨ ID</span>
        minSdk = <span class="hljs-number">24</span>
        targetSdk = <span class="hljs-number">33</span>
        versionCode = <span class="hljs-number">1</span>    <span class="hljs-comment">// ç‰ˆæœ¬å·</span>
        versionName = <span class="hljs-string">"1.0.0"</span>
        
        <span class="hljs-comment">// æµ‹è¯•è¿è¡Œå™¨</span>
        testInstrumentationRunner = <span class="hljs-string">"androidx.test.runner.AndroidJUnitRunner"</span>
        
        <span class="hljs-comment">// BuildConfig å­—æ®µ</span>
        buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://api.example.com\""</span>)
        buildConfigField(<span class="hljs-string">"boolean"</span>, <span class="hljs-string">"ENABLE_LOGGING"</span>, <span class="hljs-string">"true"</span>)
        buildConfigField(<span class="hljs-string">"int"</span>, <span class="hljs-string">"MAX_RETRY_COUNT"</span>, <span class="hljs-string">"3"</span>)
        
        <span class="hljs-comment">// Vector Drawable æ”¯æŒ</span>
        vectorDrawables {
            useSupportLibrary = <span class="hljs-literal">true</span>
        }
        
        ndk {
            <span class="hljs-comment">// NDK é…ç½® æ”¯æŒçš„ ABI</span>
            abiFilters += setOf(<span class="hljs-string">"armeabi-v7a"</span>, <span class="hljs-string">"arm64-v8a"</span>)
        }
        
        multiDexEnabled = <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¤š Dex æ”¯æŒ</span>
        consumerProguardFiles(<span class="hljs-string">"consumer-rules.pro"</span>)   <span class="hljs-comment">// ProGuard æ¶ˆè´¹è€…è§„åˆ™</span>
    }
    
    <span class="hljs-comment">// ç­¾åé…ç½®</span>
    signingConfigs {
        getByName(<span class="hljs-string">"debug"</span>) {        <span class="hljs-comment">// Debug ç­¾å</span>
            storeFile = file(<span class="hljs-string">"debug.keystore"</span>)
            storePassword = <span class="hljs-string">"android"</span>
            keyAlias = <span class="hljs-string">"androiddebugkey"</span>
            keyPassword = <span class="hljs-string">"android"</span>
        }

        create(<span class="hljs-string">"release"</span>) {        <span class="hljs-comment">// Release ç­¾å</span>
            <span class="hljs-comment">// ä» local.properties è¯»å–</span>
            <span class="hljs-keyword">val</span> keystoreProperties = File(rootDir, <span class="hljs-string">"keystore.properties"</span>)
            <span class="hljs-keyword">if</span> (keystoreProperties.exists()) {
                <span class="hljs-keyword">val</span> properties = java.util.Properties()
                properties.load(keystoreProperties.inputStream())
                
                storeFile = file(properties[<span class="hljs-string">"storeFile"</span>] <span class="hljs-keyword">as</span> String)
                storePassword = properties[<span class="hljs-string">"storePassword"</span>] <span class="hljs-keyword">as</span> String
                keyAlias = properties[<span class="hljs-string">"keyAlias"</span>] <span class="hljs-keyword">as</span> String
                keyPassword = properties[<span class="hljs-string">"keyPassword"</span>] <span class="hljs-keyword">as</span> String
            }
        }
    }
    
    <span class="hljs-comment">// æ„å»ºç±»å‹</span>
    buildTypes {
        <span class="hljs-comment">// Debug ç±»å‹</span>
        debug {
            applicationIdSuffix = <span class="hljs-string">".debug"</span>
            versionNameSuffix = <span class="hljs-string">"-debug"</span>
            
            isDebuggable = <span class="hljs-literal">true</span>
            isMinifyEnabled = <span class="hljs-literal">false</span>
            isShrinkResources = <span class="hljs-literal">false</span>
            
            buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://dev-api.example.com\""</span>)
            resValue(<span class="hljs-string">"string"</span>, <span class="hljs-string">"app_name"</span>, <span class="hljs-string">"MyApp Debug"</span>)
            
            signingConfig = signingConfigs.getByName(<span class="hljs-string">"debug"</span>)
        }
        
        <span class="hljs-comment">// Release ç±»å‹</span>
        release {
            isDebuggable = <span class="hljs-literal">false</span>
            isMinifyEnabled = <span class="hljs-literal">true</span>
            isShrinkResources = <span class="hljs-literal">true</span>
            
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
            
            signingConfig = signingConfigs.getByName(<span class="hljs-string">"release"</span>)
            
            buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://api.example.com\""</span>)
            resValue(<span class="hljs-string">"string"</span>, <span class="hljs-string">"app_name"</span>, <span class="hljs-string">"MyApp"</span>)
        }
    }
    
    <span class="hljs-comment">// ç¼–è¯‘é€‰é¡¹</span>
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
        
        <span class="hljs-comment">// å¯ç”¨ desugaring</span>
        isCoreLibraryDesugaringEnabled = <span class="hljs-literal">true</span>
    }
    
    kotlinOptions {
        jvmTarget = <span class="hljs-string">"11"</span>
        
        <span class="hljs-comment">// Kotlin ç¼–è¯‘å™¨å‚æ•°</span>
        freeCompilerArgs = listOf(
            <span class="hljs-string">"-opt-in=kotlin.RequiresOptIn"</span>,
            <span class="hljs-string">"-Xjvm-default=all"</span>,
            <span class="hljs-string">"-Xcontext-receivers"</span>
        )
    }
    
    <span class="hljs-comment">// æ„å»ºç‰¹æ€§</span>
    buildFeatures {
        viewBinding = <span class="hljs-literal">true</span>         <span class="hljs-comment">// ViewBinding</span>
        dataBinding = <span class="hljs-literal">false</span>        <span class="hljs-comment">// DataBinding</span>
        compose = <span class="hljs-literal">false</span>           <span class="hljs-comment">// Compose</span>
        buildConfig = <span class="hljs-literal">true</span>        <span class="hljs-comment">// BuildConfig</span>
        aidl = <span class="hljs-literal">false</span>             <span class="hljs-comment">// AIDL</span>
        renderScript = <span class="hljs-literal">false</span>      <span class="hljs-comment">// RenderScript</span>
        shaders = <span class="hljs-literal">false</span>          <span class="hljs-comment">// Shaders</span>
    }
    
    <span class="hljs-comment">// Compose é…ç½®ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
    composeOptions {
        kotlinCompilerExtensionVersion = <span class="hljs-string">"1.5.3"</span>
    }
}

<span class="hljs-comment">// 3. ä¾èµ–é…ç½®</span>
dependencies {
    <span class="hljs-comment">// Core</span>
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.appcompat)
    implementation(libs.material)
    
    <span class="hljs-comment">// Kotlin</span>
    implementation(libs.kotlin.stdlib)
    implementation(libs.kotlinx.coroutines.core)
    implementation(libs.kotlinx.coroutines.android)
    
    <span class="hljs-comment">// Android Components</span>
    implementation(libs.androidx.activity.ktx)
    implementation(libs.androidx.fragment.ktx)
    implementation(libs.androidx.lifecycle.runtime.ktx)
    implementation(libs.androidx.lifecycle.viewmodel.ktx)
    
    ...
}
</code></pre>
<p>â€ƒâ€ƒä¸»è¦å£°æ˜App bundleä¸­ä½¿ç”¨åˆ°çš„ä¾èµ–ï¼Œæ„å»ºä¿¡æ¯è®¾ç½®å’Œåº”ç”¨æ’ä»¶ç­‰ä¿¡æ¯</p>
<h3 data-id="heading-6">library build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    alias(libs.plugins.android.library)  <span class="hljs-comment">// æ³¨æ„æ˜¯ library ä¸æ˜¯ application</span>
    alias(libs.plugins.kotlin.android)
}

android {
    namespace = <span class="hljs-string">"com.example.library"</span>
    compileSdk = <span class="hljs-number">33</span>
    
    defaultConfig {
        minSdk = <span class="hljs-number">24</span>
        <span class="hljs-comment">// library æ²¡æœ‰ applicationId å’Œ versionCode/versionName</span>
        testInstrumentationRunner = <span class="hljs-string">"androidx.test.runner.AndroidJUnitRunner"</span>
        
        <span class="hljs-comment">// æ¶ˆè´¹è€… ProGuard è§„åˆ™</span>
        consumerProguardFiles(<span class="hljs-string">"consumer-rules.pro"</span>)
    }
    
    buildTypes {
        release {
            isMinifyEnabled = <span class="hljs-literal">false</span>
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
        }
    }
    
    <span class="hljs-comment">// library å¯ä»¥å‘å¸ƒä¸åŒçš„å˜ä½“</span>
    publishNonDefault = <span class="hljs-literal">true</span>
}

dependencies {
    <span class="hljs-comment">// api: é€ä¼ ä¾èµ– ç»™ä½¿ç”¨æ­¤åº“çš„æ¨¡å—</span>
    api(libs.kotlin.stdlib)
    
    <span class="hljs-comment">// implementation: ä¸é€ä¼  ä»…å½“å‰æ¨¡å—ä¾èµ–</span>
    implementation(libs.androidx.core.ktx)
    testImplementation(libs.junit)
}
</code></pre>
<h3 data-id="heading-7">gradle libs.versions.toml</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[versions]</span>
<span class="hljs-attr">agp</span> = <span class="hljs-string">"8.10.0"</span>
<span class="hljs-attr">kotlin</span> = <span class="hljs-string">"2.0.21"</span>
<span class="hljs-attr">coreKtx</span> = <span class="hljs-string">"1.17.0"</span>
<span class="hljs-attr">junit</span> = <span class="hljs-string">"4.14-SNAPSHOT"</span>
<span class="hljs-attr">junitVersion</span> = <span class="hljs-string">"1.3.0"</span>
<span class="hljs-attr">espressoCore</span> = <span class="hljs-string">"3.7.0"</span>
<span class="hljs-attr">lifecycleRuntimeKtx</span> = <span class="hljs-string">"2.9.4"</span>
<span class="hljs-attr">activityCompose</span> = <span class="hljs-string">"1.11.0"</span>
<span class="hljs-attr">composeBom</span> = <span class="hljs-string">"2024.09.00"</span>
<span class="hljs-attr">appcompat</span> = <span class="hljs-string">"1.7.1"</span>
<span class="hljs-attr">material</span> = <span class="hljs-string">"1.13.0"</span>

<span class="hljs-section">[libraries]</span>
<span class="hljs-attr">androidx-core-ktx</span> = { group = <span class="hljs-string">"androidx.core"</span>, name = <span class="hljs-string">"core-ktx"</span>, version.ref = <span class="hljs-string">"coreKtx"</span> }
<span class="hljs-attr">junit</span> = { group = <span class="hljs-string">"junit"</span>, name = <span class="hljs-string">"junit"</span>, version.ref = <span class="hljs-string">"junit"</span> }
<span class="hljs-attr">androidx-junit</span> = { group = <span class="hljs-string">"androidx.test.ext"</span>, name = <span class="hljs-string">"junit"</span>, version.ref = <span class="hljs-string">"junitVersion"</span> }
<span class="hljs-attr">androidx-espresso-core</span> = { group = <span class="hljs-string">"androidx.test.espresso"</span>, name = <span class="hljs-string">"espresso-core"</span>, version.ref = <span class="hljs-string">"espressoCore"</span> }
<span class="hljs-attr">androidx-lifecycle-runtime-ktx</span> = { group = <span class="hljs-string">"androidx.lifecycle"</span>, name = <span class="hljs-string">"lifecycle-runtime-ktx"</span>, version.ref = <span class="hljs-string">"lifecycleRuntimeKtx"</span> }
<span class="hljs-attr">androidx-activity-compose</span> = { group = <span class="hljs-string">"androidx.activity"</span>, name = <span class="hljs-string">"activity-compose"</span>, version.ref = <span class="hljs-string">"activityCompose"</span> }
<span class="hljs-attr">androidx-compose-bom</span> = { group = <span class="hljs-string">"androidx.compose"</span>, name = <span class="hljs-string">"compose-bom"</span>, version.ref = <span class="hljs-string">"composeBom"</span> }
<span class="hljs-attr">androidx-ui</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui"</span> }
<span class="hljs-attr">androidx-ui-graphics</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-graphics"</span> }
<span class="hljs-attr">androidx-ui-tooling</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-tooling"</span> }
<span class="hljs-attr">androidx-ui-tooling-preview</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-tooling-preview"</span> }
<span class="hljs-attr">androidx-ui-test-manifest</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-test-manifest"</span> }
<span class="hljs-attr">androidx-ui-test-junit4</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-test-junit4"</span> }
<span class="hljs-attr">androidx-material3</span> = { group = <span class="hljs-string">"androidx.compose.material3"</span>, name = <span class="hljs-string">"material3"</span> }
<span class="hljs-attr">androidx-appcompat</span> = { group = <span class="hljs-string">"androidx.appcompat"</span>, name = <span class="hljs-string">"appcompat"</span>, version.ref = <span class="hljs-string">"appcompat"</span> }
<span class="hljs-attr">material</span> = { group = <span class="hljs-string">"com.google.android.material"</span>, name = <span class="hljs-string">"material"</span>, version.ref = <span class="hljs-string">"material"</span> }

<span class="hljs-section">[plugins]</span>
<span class="hljs-attr">android-application</span> = { id = <span class="hljs-string">"com.android.application"</span>, version.ref = <span class="hljs-string">"agp"</span> }
<span class="hljs-attr">kotlin-android</span> = { id = <span class="hljs-string">"org.jetbrains.kotlin.android"</span>, version.ref = <span class="hljs-string">"kotlin"</span> }
<span class="hljs-attr">kotlin-compose</span> = { id = <span class="hljs-string">"org.jetbrains.kotlin.plugin.compose"</span>, version.ref = <span class="hljs-string">"kotlin"</span> }
<span class="hljs-attr">android-library</span> = { id = <span class="hljs-string">"com.android.library"</span>, version.ref = <span class="hljs-string">"agp"</span> }
</code></pre>
<p>â€ƒâ€ƒä¼ ç»Ÿçš„ä¾èµ–æ–¹å¼ä½¿ç”¨ å­—ç¬¦ä¸²ï¼Œå®¹æ˜“æ‹¼å†™é”™è¯¯ã€‚ktsçš„æ–°ç‰ˆæœ¬ä¾èµ–æ–¹å¼IDE è‡ªåŠ¨è¡¥å…¨ï¼ŒCmd+ç‚¹å‡»å¯è·³è½¬ï¼Œå¹¶ä¸”ç‰ˆæœ¬ç®¡ç†æ›´åŠ é›†ä¸­</p>
<h3 data-id="heading-8">gradle.properties</h3>
<pre><code class="hljs language-properties" lang="properties"># -Xmx: jvmæœ€å¤§å †å†…å­˜ï¼ˆæ ¹æ®æœºå™¨é…ç½®è°ƒæ•´ï¼Œ8GB æœºå™¨å»ºè®® 4096mï¼Œ16GB å»ºè®® 8192mï¼‰
# -XX:MaxMetaspaceSize: å…ƒç©ºé—´æœ€å¤§å¤§å°
# -XX:+HeapDumpOnOutOfMemoryError: OOM æ—¶ç”Ÿæˆå †è½¬å‚¨
# -Dfile.encoding: æ–‡ä»¶ç¼–ç 
org.gradle.jvmargs=-Xmx4096m -XX:MaxMetaspaceSize=1024m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

# å¹¶è¡Œç¼–è¯‘ï¼ˆåˆ©ç”¨å¤šæ ¸ CPUï¼‰
org.gradle.parallel=true
# é…ç½®ç¼“å­˜ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼Œæ˜¾è‘—æå‡é€Ÿåº¦ï¼‰ Gradle 8.0+ ç¨³å®šï¼Œå¼ºçƒˆæ¨èå¼€å¯
org.gradle.configuration-cache=true
# æ„å»ºç¼“å­˜ï¼ˆå¤ç”¨ä¹‹å‰çš„æ„å»ºç»“æœï¼‰
org.gradle.caching=true
# æŒ‰éœ€é…ç½®  å¤§å‹å¤šæ¨¡å—é¡¹ç›®å»ºè®®å¼€å¯
org.gradle.configureondemand=true
# åå°å®ˆæŠ¤è¿›ç¨‹ï¼Œé¿å…æ¯æ¬¡æ„å»ºéƒ½å¯åŠ¨ JVM
org.gradle.daemon=true
# æ–‡ä»¶ç›‘å¬ï¼ˆå¢é‡æ„å»ºçš„åŸºç¡€ï¼‰
org.gradle.vfs.watch=true
# Kotlin Daemon JVM å‚æ•°
kotlin.daemon.jvmargs=-Xmx2048m
# å¢é‡ç¼–è¯‘
kotlin.incremental=true
# Kotlin ç¼–è¯‘ç¼“å­˜
kotlin.caching.enabled=true
# Kotlin ç¼–è¯‘å™¨æ‰§è¡Œç­–ç•¥
# in-process: åœ¨ Gradle Daemon è¿›ç¨‹ä¸­ç¼–è¯‘ï¼ˆæ¨èï¼‰
# daemon: ä½¿ç”¨å•ç‹¬çš„ Kotlin Daemonï¼ˆé»˜è®¤ï¼‰
# out-of-process: æ¯æ¬¡æ–°å»ºè¿›ç¨‹
kotlin.compiler.execution.strategy=in-process

# å¹¶è¡Œç¼–è¯‘ Kotlin æ¨¡å—
kotlin.parallel.tasks.in.project=true
# ä½¿ç”¨ AndroidX
android.useAndroidX=true
# kotlinä»£ç æ ·å¼
kotlin.code.style=official
# è‡ªåŠ¨è¿ç§»ç¬¬ä¸‰æ–¹åº“åˆ° AndroidXï¼ˆé€šå¸¸å…³é—­ï¼‰
android.enableJetifier=false
# ä½¿æ¯ä¸ªåº“çš„ R ç±»èƒ½å¤Ÿå‘½åç©ºé—´ï¼Œè®©R ç±»åªåŒ…å«åº“æœ¬èº«å£°æ˜çš„èµ„æºï¼Œä¸åŒ…å«åº“ä¾èµ–èµ„æºï¼Œç¼©å°è¯¥åº“ R ç±»çš„å¤§å°
android.nonTransitiveRClass=true
# ä½¿ç”¨æ–°çš„èµ„æºå¤„ç†å™¨ï¼ˆAAPT2ï¼‰
android.enableResourceOptimizations=true
# ç¦ç”¨ PNG ä¼˜åŒ–ï¼ˆDebug æ—¶å¯ç¦ç”¨ï¼‰
# android.enablePngCrunchInDebugVariant=false
# å¯ç”¨ D8 desugaring
android.enableD8.desugaring=true
# å¯ç”¨ R8
android.enableR8=true
# æ„å»ºç¼“å­˜
android.enableBuildCache=true

# ç‰ˆæœ¬å·ï¼ˆå¯è¢«è„šæœ¬è¯»å–ï¼‰
VERSION_NAME=1.0.0
VERSION_CODE=1

# ç­¾åé…ç½®ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œä¸æäº¤åˆ°ä»£ç ä»“åº“ï¼‰
# KEYSTORE_FILE=/path/to/keystore
# KEYSTORE_PASSWORD=password
# KEY_ALIAS=alias
# KEY_PASSWORD=password

# API é…ç½®
# API_BASE_URL=https://api.example.com

# Maven ä»“åº“ç”¨æˆ·åå¯†ç ï¼ˆä¸è¦æäº¤åˆ°ä»“åº“ï¼‰
# MAVEN_USERNAME=username
# MAVEN_PASSWORD=password
</code></pre>
<h3 data-id="heading-9">local.properties</h3>
<pre><code class="hljs language-properties" lang="properties"># Android SDK è·¯å¾„ï¼ˆAndroid Studio è‡ªåŠ¨ç”Ÿæˆï¼‰
sdk.dir=/Users/username/Library/Android/sdk
# NDK è·¯å¾„
ndk.dir=/Users/username/Library/Android/sdk/ndk/25.1.8937393

# ç­¾åé…ç½®ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
KEYSTORE_FILE=../release.keystore
KEYSTORE_PASSWORD=mypassword
KEY_ALIAS=mykey
KEY_PASSWORD=mypassword

# API Keysï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
GOOGLE_MAPS_API_KEY=xxx
</code></pre>
<p>â€ƒâ€ƒ è®¾ç½®sdkå’Œndkæœ¬åœ°åœ°å€ï¼Œé…ç½®æ‰“åŒ…ç­¾åé…ç½®ç­‰ä¿¡æ¯</p>
<h2 data-id="heading-10">Gradleçš„Groovy &amp; KotlinåŒºåˆ«</h2>
<h3 data-id="heading-11">Gradle DSL çš„ç‰¹ç‚¹</h3>
<p>å¯è¯»æ€§æ›´é«˜ï¼Œæ›´åŠ ç®€æ´ ï¼ˆæ¨¡ç‰ˆä»£ç å°‘ä¸€äº›ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Groovy å’Œ kotlinéƒ½è¦ä½¿ç”¨åˆ°çš„ DSLæ ¼å¼ï¼Œä¸åŒäºjavaç­‰ä»£ç æ–¹å¼</span>
android {
    compileSdk = <span class="hljs-number">33</span>
    
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ Kotlin çš„æ¡ä»¶åˆ¤æ–­</span>
    if (project.hasProperty("useNewApi")) {
        defaultConfig {
            minSdk = <span class="hljs-number">24</span>
        }
    }
    
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ Kotlin çš„å¾ªç¯</span>
    <span class="hljs-built_in">listOf</span>("debug", "release")<span class="hljs-selector-class">.forEach</span> { buildType -&gt;
        <span class="hljs-built_in">println</span>("Processing $buildType")
    }
}

<span class="hljs-comment">// å¦‚æœä¸ä½¿ç”¨DSLçš„æ–¹å¼ å¯èƒ½ä¼šå†™æˆè¿™æ · ï¼Œç¨å¾®å¤æ‚äº†ç‚¹</span>
val android = project<span class="hljs-selector-class">.extensions</span><span class="hljs-selector-class">.getByType</span>(AndroidExtension::class.java)
android<span class="hljs-selector-class">.setCompileSdk</span>(<span class="hljs-number">33</span>)

val config = <span class="hljs-built_in">DefaultConfig</span>()
config<span class="hljs-selector-class">.setMinSdk</span>(<span class="hljs-number">24</span>)
android<span class="hljs-selector-class">.setDefaultConfig</span>(config)
</code></pre>
<p>â€ƒâ€ƒ Gradle ä¸»è¦ä½¿ç”¨çš„<strong>å†…éƒ¨DSL</strong> ï¼ˆç®€å•è¯´ä¸‹å¤–éƒ¨DSLï¼šéœ€è¦ä¸“é—¨çš„ä»£ç æ³¨è§£å™¨æ¯”å¦‚ Html å’Œ SQLï¼‰ ï¼Œå¯ä»¥ä½¿ç”¨ Kotlinçš„ä¸€äº›è¯­è¨€ç‰¹æ€§ï¼Œè¿™é‡Œè¿˜æ˜¯è¦æåˆ°ä¸€ä¸‹ Groovyçš„é—­åŒ…ï¼Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Gradle çš„ android {} å—å®é™…ä¸Šæ˜¯ï¼šè°ƒç”¨ android() æ–¹æ³•, ä¼ å…¥ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°</span>
android {  <span class="hljs-comment">// é—­åŒ…</span>
    compileSdk <span class="hljs-number">33</span>
}
<span class="hljs-built_in">android</span>({ 
    compileSdk <span class="hljs-number">33</span> 
})
<span class="hljs-comment">// å®Œæ•´å½¢æ€</span>
<span class="hljs-built_in">android</span>(new Closure() {
    void <span class="hljs-built_in">call</span>() {
        compileSdk <span class="hljs-number">33</span>
    }
})
å¤§æ¦‚å¾—å®ç°é€»è¾‘
class AndroidExtension {  <span class="hljs-comment">// å®šä¹‰ Android æ‰©å±•ç±»</span>
    int compileSdk
    
    void <span class="hljs-built_in">defaultConfig</span>(Closure closure) {
        def config = new <span class="hljs-built_in">DefaultConfig</span>()
        closure<span class="hljs-selector-class">.delegate</span> = config  <span class="hljs-comment">// è®¾ç½®é—­åŒ…çš„å§”æ‰˜</span>
        <span class="hljs-built_in">closure</span>()                  <span class="hljs-comment">// é—­åŒ…</span>
    }
}

<span class="hljs-comment">// å®šä¹‰é…ç½®æ–¹æ³•ï¼Œæ¥æ”¶é—­åŒ…ä½œä¸ºå‚æ•°</span>
def <span class="hljs-built_in">android</span>(Closure closure) {
    def ext = new <span class="hljs-built_in">AndroidExtension</span>()
    closure<span class="hljs-selector-class">.delegate</span> = ext     <span class="hljs-comment">// è®¾ç½®å§”æ‰˜</span>
    <span class="hljs-built_in">closure</span>()                  <span class="hljs-comment">// é—­åŒ…</span>
    return ext
}

<span class="hljs-comment">// ä½¿ç”¨ï¼ˆçœ‹èµ·æ¥åƒ DSLï¼‰</span>
android {
    compileSdk = <span class="hljs-number">33</span>      <span class="hljs-comment">// å®é™…æ˜¯åœ¨ AndroidExtension ä¸Šä¸‹æ–‡ä¸­</span>
    defaultConfig {
        minSdk = <span class="hljs-number">24</span>      <span class="hljs-comment">// å®é™…æ˜¯åœ¨ DefaultConfig ä¸Šä¸‹æ–‡ä¸­</span>
    }
}
</code></pre>
<p>â€ƒâ€ƒKotlinä¸­ä½¿ç”¨çš„åˆ™æ˜¯ Lambdaæ–¹å¼ï¼ˆå¦‚æœå‚æ•°ä¸ºæœ€åä¸€ä¸ªï¼Œåˆ™å¯ä»¥å»æ‰æ‹¬å·ï¼‰ï¼Œå¹¶ä¸”Kotlinæ˜¯ä½¿ç”¨ = å·æ¥èµ‹å€¼çš„ï¼Œç›¸è¾ƒäº Groovy ï¼ŒKotlinæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œéƒ¨åˆ†ç±»å‹ä¸å¯¹åœ¨ç¼–è¯‘æœŸå°±ä¼šæç¤ºã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">android {  <span class="hljs-comment">// Lambda è¡¨è¾¾å¼</span>
    compileSdk = <span class="hljs-number">33</span>
    defaultConfig {  <span class="hljs-comment">// åµŒå¥— Lambda</span>
        minSdk = <span class="hljs-number">24</span>
    }
}

<span class="hljs-comment">// android { } å¤§æ¦‚å®ç°é€»è¾‘ï¼Œå¯ä»¥ç†è§£ä¸º ApplicationExtension.compileSdk = 33</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> org.gradle.api.Project.<span class="hljs-title">android</span><span class="hljs-params">(configure: <span class="hljs-type">org</span>.<span class="hljs-type">gradle</span>.<span class="hljs-type">api</span>.<span class="hljs-type">Action</span>&lt;<span class="hljs-type">com</span>.<span class="hljs-type">android</span>.<span class="hljs-type">build</span>.<span class="hljs-type">gradle</span>.<span class="hljs-type">LibraryExtension</span>&gt;)</span></span>: kotlin.<span class="hljs-built_in">Unit</span> { <span class="hljs-comment">/* compiled code */</span> }

</code></pre>
<p>â€ƒâ€ƒçœ‹Gradleæºç ï¼Œè¿™é‡Œæ˜¯å§”æ‰˜ç»™äº† LibraryExtension ï¼Œæ‰€ä»¥compileSdk å­—æ®µå°±æ˜¯ LibraryExtension ä¸­çš„ä¸€ä¸ªå±æ€§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/563c63c3c2e44097a5937a73f1aa0b0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO5bed:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765419865&amp;x-signature=u3dOkqH9XnlbqjIHIGy4HqTr2Ws%3D" alt="image.png" loading="lazy"/></p>
<p>â€ƒâ€ƒæ‰€ä»¥ æˆ‘ä»¬å¯ä»¥åœ¨Android å¤§æ‹¬å·é‡Œè¾¹ä½¿ç”¨compileSdkç­‰å­—æ®µçš„èµ‹å€¼</p>
<h3 data-id="heading-12">Groovy vs Kotlin è¯­æ³•å¯¹æ¯”</h3>
<ul>
<li>å­—ç¬¦ä¸²</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
def str1 = 'Hello world'      // æ™®é€šå­—ç¬¦ä¸² 
def str3 = "Hello $name"       // å­—ç¬¦ä¸²æ’å€¼  å¯ä»¥å•å¼•å·ï¼Œä¹Ÿå¯ä»¥åŒå¼•å·
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
<span class="hljs-keyword">val</span> str1 = <span class="hljs-string">"only double quote"</span>  <span class="hljs-comment">// åªèƒ½ç”¨åŒå¼•å·</span>
<span class="hljs-keyword">val</span> str2 = <span class="hljs-string">"Hello <span class="hljs-variable">$name</span>"</span>        <span class="hljs-comment">// å­—ç¬¦ä¸²æ’å€¼</span>
</code></pre>
<ul>
<li>å˜é‡</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
def name = "ymc"               // åŠ¨æ€ç±»å‹
String name = "ymc"            // æ˜¾å¼ç±»å‹
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
<span class="hljs-keyword">var</span> name = <span class="hljs-string">"ymc"</span>               <span class="hljs-comment">// å¯å˜</span>
<span class="hljs-keyword">val</span> name = <span class="hljs-string">"ymc"</span>               <span class="hljs-comment">// ä¸å¯å˜ï¼ˆæ¨èï¼‰</span>
</code></pre>
<ul>
<li>æ–¹æ³•è°ƒç”¨</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
println("Hello")
println "Hello"                 // å¯ä»¥çœç•¥æ‹¬å·

add(1, 2)
add 1, 2                        // å¯ä»¥çœç•¥æ‹¬å·å’Œé€—å·

implementation 'androidx.core:core-ktx:1.9.0'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
println(<span class="hljs-string">"Hello"</span>)                <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>

add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)                       <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>

implementation(<span class="hljs-string">"androidx.core:core-ktx:1.9.0"</span>)  <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>
</code></pre>
<ul>
<li>plugins</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
}

// æˆ–
apply plugin: 'com.android.application'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>)
    kotlin(<span class="hljs-string">"kapt"</span>)  <span class="hljs-comment">// ç­‰ä»·äº id("org.jetbrains.kotlin.kapt")</span>
}

<span class="hljs-comment">// æˆ–</span>
apply(plugin = <span class="hljs-string">"com.android.application"</span>)
</code></pre>
<ul>
<li>dependencies å—</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
dependencies {
    implementation 'androidx.core:core-ktx:1.9.0'
    implementation group: 'com.google.code.gson', name: 'gson', version: '2.10.1'
    
    debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.12'
    
    testImplementation 'junit:junit:4.13.2'
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
dependencies {
    implementation(<span class="hljs-string">"androidx.core:core-ktx:1.9.0"</span>)
    implementation(group = <span class="hljs-string">"com.google.code.gson"</span>, name = <span class="hljs-string">"gson"</span>, version = <span class="hljs-string">"2.10.1"</span>)
    
    debugImplementation(<span class="hljs-string">"com.squareup.leakcanary:leakcanary-android:2.12"</span>)
    
    testImplementation(<span class="hljs-string">"junit:junit:4.13.2"</span>)
}
</code></pre>
<ul>
<li>android å—</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
android {
    namespace 'com.example.app'
    compileSdk 33
    
    defaultConfig {
        applicationId "com.example.app"
        minSdk 24
        targetSdk 33
        versionCode 1
        versionName "1.0"
    }
    
    buildTypes {
        debug {
            applicationIdSuffix '.debug'
            debuggable true
        }
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
android {
    namespace = <span class="hljs-string">"com.example.app"</span>
    compileSdk = <span class="hljs-number">33</span>
    
    defaultConfig {
        applicationId = <span class="hljs-string">"com.example.app"</span>
        minSdk = <span class="hljs-number">24</span>
        targetSdk = <span class="hljs-number">33</span>
        versionCode = <span class="hljs-number">1</span>
        versionName = <span class="hljs-string">"1.0"</span>
    }
    
    buildTypes {
        debug {
            applicationIdSuffix = <span class="hljs-string">".debug"</span>
            isDebuggable = <span class="hljs-literal">true</span>
        }
        release {
            isMinifyEnabled = <span class="hljs-literal">true</span>
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
        }
    }
}
</code></pre>
<p>â€ƒâ€ƒå‰è¾¹ä¸¤æ®µä»£ç ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„ä¸åŒå°±æ˜¯ booleanèµ‹å€¼ï¼Œkotlin æ˜¯iså¼€å¤´ï¼Œç­‰å·èµ‹å€¼</p>
<ul>
<li>é›†åˆæ“ä½œ</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
ndk {
    abiFilters 'armeabi-v7a', 'arm64-v8a'
}

exclude '**/test/**', '**/*.tmp'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
ndk {
    abiFilters += setOf(<span class="hljs-string">"armeabi-v7a"</span>, <span class="hljs-string">"arm64-v8a"</span>)
}

exclude(<span class="hljs-string">"**/test/**"</span>, <span class="hljs-string">"**/*.tmp"</span>)
</code></pre>
<h2 data-id="heading-13">æœ€å</h2>
<p>â€ƒâ€ƒè®°å¾—22å¹´æ–°ç‰ˆæœ¬Aså°±å·²ç»æ¨èä½¿ç”¨kotlinæ¥ç®¡ç† Gradle ï¼Œå­¦å®Œåæ„Ÿè§‰ç›¸æ¯”äºGroovyï¼Œkotlinç¼–è¯‘æœŸé—´æ›´åŠ å®‰å…¨ï¼Œè·³è½¬å’Œä»£ç æç¤º ï¼Œæ›´ç§‘å­¦çš„ç®¡ç†ç±»å’Œç‰ˆæœ¬æ§åˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºuniappçš„PDAæ‰‹æŒè®¾å¤‡çº¢å¤–æ‰«ç æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579819594270916646</link>    <guid>https://juejin.cn/post/7579819594270916646</guid>    <pubDate>2025-12-04T09:24:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594270916646" data-draft-id="7579556047784575028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºuniappçš„PDAæ‰‹æŒè®¾å¤‡çº¢å¤–æ‰«ç æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app"/> <meta itemprop="datePublished" content="2025-12-04T09:24:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒ½ä¸èƒ½é€æˆ‘ä¸€æœµå°çº¢èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/1214280466709783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºuniappçš„PDAæ‰‹æŒè®¾å¤‡çº¢å¤–æ‰«ç æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1214280466709783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒ½ä¸èƒ½é€æˆ‘ä¸€æœµå°çº¢èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:24:39.000Z" title="Thu Dec 04 2025 09:24:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œå¯ä»¥å­¦ä¹ åˆ°åŸºäº<code>uniapp</code>å¹³å°çš„<code>ç§»åŠ¨ç«¯app</code>åº”ç”¨ï¼Œé€šè¿‡<code>utsæ’ä»¶</code>è°ƒç”¨<code>å®‰å“sdk</code>å®ç°çº¢å¤–æ‰«ç åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>ç§»åŠ¨ç«¯æœ€è¿‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨PDAçš„çº¢å¤–æ‰«ç åŠŸèƒ½æ¥è¯†åˆ«ä¸€äº›äºŒç»´ç ã€‚è¯†åˆ«æˆåŠŸåï¼Œå†è¿›è¡Œä¸€äº›ä¸šåŠ¡æ“ä½œã€‚å› ä¸ºå…¬å¸ç§»åŠ¨ç«¯çš„æŠ€æœ¯ç”¨çš„æ˜¯uniappï¼Œæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ç°æˆåº“æˆ–å·¥å…·ï¼Œäºæ˜¯å†³å®šè‡ªå·±é€ ï¼Œé¡ºå¸¦å†™äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<h3 data-id="heading-2">åè¯è§£é‡Š</h3>
<h4 data-id="heading-3">PDAè®¾å¤‡</h4>
<p>PDAçš„è‹±æ–‡å…¨ç§°å«Personal Digital Assistantï¼Œç°ä»£æ„ä¹‰ä¸Šçš„PDAç»ˆç«¯æ‰‹æŒæœºæ˜¯ä¸€ç§é›†æˆäº†æ•°æ®é‡‡é›†ã€å¤„ç†ã€ä¼ è¾“åŠŸèƒ½çš„æ™ºèƒ½ç»ˆç«¯è®¾å¤‡ã€‚ å¦‚ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªåœ¨ä½¿ç”¨çº¢å¤–æ‰«ç åŠŸèƒ½çš„PDAæ‰‹æŒè®¾å¤‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4be2b7be51c742e7a14bd476cdb485ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IO95LiN6IO96YCB5oiR5LiA5py15bCP57qi6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446550&amp;x-signature=ikHDOVVl1Y3GxMmLmZnHm2Ntk6w%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">UTSæ’ä»¶</h4>
<p><code>uts</code>ï¼Œå…¨ç§°<code>uni type script</code>ï¼Œç»Ÿä¸€ã€å¼ºç±»å‹ã€è„šæœ¬è¯­è¨€ï¼Œæ˜¯uniæä¾›çš„æ¥å…¥åŸç”Ÿapiã€SDKã€æ’ä»¶çš„DSLã€‚</p>
<p>å®ƒä¼šè¢«ç¼–è¯‘ä¸ºä¸åŒå¹³å°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>web</code>å¹³å°ï¼Œç¼–è¯‘ä¸º<code>JavaScript</code></li>
<li><code>Android</code>å¹³å°ï¼Œç¼–è¯‘ä¸º<code>Kotlin</code></li>
<li><code>iOSå¹³å°</code>ï¼Œç¼–è¯‘ä¸º<code>Swift</code>ï¼ˆHX 3.6.7+ ç‰ˆæœ¬æ”¯æŒï¼‰</li>
<li><code>harmonyOSå¹³å°</code>ï¼Œç¼–è¯‘ä¸º<code>ArkTS</code>ï¼ˆHX 4.22+ ç‰ˆæœ¬æ”¯æŒï¼‰åœ¨ç°æœ‰æ¶æ„ä¸‹ï¼ŒArkTSå’ŒJSåœ¨åŒä¸€ç¯å¢ƒä¸‹æ‰§è¡Œï¼Œä¸æ¶‰åŠé€šè®¯ç­‰é—®é¢˜ã€‚</li>
</ul>
<p>utsæ’ä»¶ï¼ŒæŒ‡åˆ©ç”¨utsè¯­æ³•ï¼Œæ“ä½œåŸç”Ÿçš„APIï¼ˆåŒ…æ‹¬æ‰‹æœºosçš„apiæˆ–ä¸‰æ–¹sdkï¼‰ï¼Œå¹¶å°è£…æˆä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fplugin%2Funi_modules.html" target="_blank" title="https://uniapp.dcloud.net.cn/plugin/uni_modules.html" ref="nofollow noopener noreferrer">uni_modules</a>æ’ä»¶ï¼Œä¾›å‰ç«¯è°ƒç”¨ã€‚</p>
<p>å¦‚æœæœ‰æƒ³è¦è¯¦ç»†äº†è§£çš„åŒå­¦å¯ä»¥çœ‹çœ‹å®˜ç½‘ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.dcloud.net.cn%2Funi-app-x%2Fplugin%2Futs-plugin.html" target="_blank" title="https://doc.dcloud.net.cn/uni-app-x/plugin/uts-plugin.html" ref="nofollow noopener noreferrer">Uniapp UTSæ’ä»¶</a>ã€‚</p>
<hr/>
<h2 data-id="heading-5">éœ€æ±‚åˆ†æ</h2>
<p>æœ¬æ–‡æœ€ç»ˆé‡‡ç”¨çš„æ˜¯PDAå‚å•†SDKæ–¹æ¡ˆï¼Œä½¿ç”¨UTSæ’ä»¶æ¥å…¥SDKï¼Œæœ€åå°è£…æˆä¸šåŠ¡ç»„ä»¶ã€‚ï¼ˆä¸å…³å¿ƒæ–¹æ¡ˆé€‰å‹ï¼Œæƒ³ç›´æ¥çœ‹PDAå‚å•†SDKæ¥å…¥çš„åŒå­¦ï¼Œå¯ä»¥ç‚¹å‡»ç›®å½•ã€å…·ä½“å®ç°ã€‘è·³è½¬ï¼‰</p>
<h3 data-id="heading-6">æ–¹æ¡ˆåˆ†æ</h3>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>éšè—inputä»£ç†</td><td><ol><li>é€šç”¨æ–¹æ¡ˆï¼Œä¸éœ€è¦é’ˆå¯¹ä¸åŒçš„PDAè®¾å¤‡ç¼–å†™ç‹¬ç«‹ä»£ç ã€‚</li><br/><li>å¼€å‘æ–¹æ¡ˆç†Ÿæ‚‰ï¼ŒåŸºæœ¬è¿˜æ˜¯åŸºäºwebå¼€å‘çš„æ€ç»´ã€‚</li></ol></td><td><ol><li>ç§»åŠ¨ç«¯inputèšç„¦çš„æ—¶å€™ä¼šå”¤èµ·é”®ç›˜ï¼Œå…³é—­é”®ç›˜æ–¹æ¡ˆä¸å¤Ÿå¥½çš„æƒ…å†µä¸‹ä¼šå¯¼è‡´é¡µé¢é—ªçƒã€‚</li><br/><li>éœ€è¦é’ˆå¯¹å¤„ç†ä¸åŒå‚å•†ï¼ˆç”šè‡³æ˜¯åŒä¸€å‚å•†ä¸åŒå‹å·ï¼‰è®¾å¤‡çš„çº¢å¤–æ‰«ç æŒ‰é”®ç›‘å¬äº‹ä»¶ã€‚</li></ol></td></tr><tr><td>PDAç³»ç»Ÿè®¾ç½®æ‰«ç å¹¿æ’­</td><td><ol><li>ç”¨æˆ·ä½“éªŒå¥½ï¼Œæ•ˆæœPDAå‚å•†SDKæ–¹æ¡ˆæ²¡æœ‰å·®åˆ«ã€‚</li><br/><li>ä»£ç é‡å°ï¼Œå¼€å‘ç®€å•ã€‚</li></ol></td><td><ol><li>éœ€è¦é’ˆå¯¹æ¯ä¸€å°PDAæ‰‹æŒè®¾å¤‡è¿›è¡Œç‰¹æ®Šè®¾ç½®ï¼Œå®¢æˆ·ä½“é‡å¤§çš„æƒ…å†µä¸‹é…ç½®PDAæ‰‹æŒè®¾å¤‡æåº¦éº»çƒ¦ã€‚</li><br/><li>æåº¦ä¾èµ–PDAå‚å•†çš„ç³»ç»Ÿè®¾ç½®ã€‚</li></ol></td></tr><tr><td>PDAå‚å•†SDKæ–¹æ¡ˆ</td><td><ol><li>ç”¨æˆ·ä½“éªŒå¥½ï¼Œå®Œå…¨é™é»˜çš„çº¢å¤–æ‰«ç ï¼Œä¾é æ¶ˆæ¯è®¢é˜…å®ç°ã€‚</li><br/><li>ä¸éœ€è¦å¼•å…¥é¢å¤–çš„jsåº“ã€‚</li></ol></td><td><ol><li>é’ˆå¯¹ä¸åŒçš„PDAå“ç‰Œï¼Œéœ€è¦é¢å¤–ç‰¹æ®Šå¤„ç†ã€‚</li><br/><li>è¾ƒå‰ä¸¤ä¸ªæ–¹æ¡ˆå¤æ‚ï¼ŒåŸç”ŸSDKæ¥å…¥ä¸æ˜¯webå¼€å‘çš„èˆ’é€‚åŒºã€‚</li></ol></td></tr></tbody></table>
<h3 data-id="heading-7">éšè—inputä»£ç†æ–¹æ¡ˆ</h3>
<p>å¦‚æœè¦ä½¿ç”¨éšè—inputä»£ç†æ–¹æ¡ˆï¼Œæœ‰ä¸¤ä¸ªå¿…é¡»è¦é¢å¯¹çš„é—®é¢˜ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ˜¯inputèšç„¦æ—¶ä¼šå”¤èµ·é”®ç›˜</li>
<li>ç¬¬äºŒä¸ªæ˜¯éœ€è¦ç›‘å¬PDAæ‰‹æŒè®¾å¤‡çš„çº¢å¤–æ‰«ç åŠŸèƒ½çš„å¼€å§‹ä¸ç»“æŸã€‚</li>
</ul>
<p>å¼€å§‹å…·ä½“åˆ†æè¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<h4 data-id="heading-8">å¦‚ä½•é¿å…inputèšç„¦å”¤èµ·é”®ç›˜</h4>
<p>ç›®å‰æœ‰ä¸‰ç§æ–¹æ¡ˆå¯ä»¥éšè—å”¤èµ·é”®ç›˜æˆ–è€…é¿å…é”®ç›˜è¢«å”¤èµ·ã€‚éšè—å”¤èµ·é”®ç›˜ä¼šå¸¦æ¥æ— æ³•é¿å…çš„é¡µé¢é—ªçƒé—®é¢˜ï¼Œæ‰€ä»¥é¿å…é”®ç›˜è¢«å”¤èµ·æ˜¯æœ€ä¼˜è§£ã€‚</p>
<ol>
<li>
<p>uniappæä¾›äº†<code>hideKeyboard</code>æ–¹æ³•ç”¨æ¥éšè—é”®ç›˜ï¼Œ<code>hideKeyboard</code>æ–¹æ³•ä¼šå¸¦æ¥é¡µé¢é—ªçƒé—®é¢˜ã€‚æ£€ç´¢åˆ°æœ‰ç»“åˆä½¿ç”¨<code>setInterval</code>ä¸æ–­éšè—é”®ç›˜çš„æ–¹æ¡ˆï¼Œä½†æ˜¯æµ‹è¯•ç»“æœä¾æ—§æ˜¯ä¼šæœ‰é¡µé¢é—ªçƒçš„æƒ…å†µï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚å¦‚æœæœ‰åŒå­¦æƒ³äº†è§£è¯¥æ–¹æ¡ˆå¯ä»¥çœ‹çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Funiapp.dcloud.net.cn%2Fapi%2Fkey.html%23hidekeyboard" target="_blank" title="https://uniapp.dcloud.net.cn/api/key.html#hidekeyboard" ref="nofollow noopener noreferrer">uniappçš„å®˜ç½‘</a>ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨<code>input</code>ç»„ä»¶çš„å±æ€§ï¼Œæ¥è¾¾åˆ°èšç„¦<code>input</code>ç»„ä»¶æ—¶ï¼Œä¸å”¤èµ·é”®ç›˜çš„æ•ˆæœã€‚</p>
<ol>
<li><code>inputmode</code>å±æ€§ï¼Œå¯ä»¥å®Œå…¨å±è”½å”¤èµ·é”®ç›˜ï¼Œä½†æ˜¯ä¼šä¸¢å¤±PDAæ‰«ç ç»“æœã€‚</li>
<li><code>readonly</code>å±æ€§ï¼Œappç«¯æµ‹è¯•æ²¡æœ‰æ•ˆæœï¼Œæ— æ³•å±è”½å”¤èµ·é”®ç›˜ã€‚ï¼ˆæœ‰èµ„æ–™è¯´åœ¨å°ç¨‹åºç«¯æœ‰æ•ˆæœï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰åšæµ‹è¯•ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±è¯•è¯•ã€‚ï¼‰</li>
</ol>
</li>
<li>
<p>é€šè¿‡åŸç”Ÿæ’ä»¶æˆ–è€…uniappçš„native.jsæ¥ä¿®æ”¹é¡µé¢çº§ï¼ˆactivityçº§åˆ«ï¼‰çš„é”®ç›˜å”¤èµ·æ¨¡å¼ã€‚ï¼ˆè¿™ä¸ªæ–¹æ¡ˆæ²¡æœ‰æ·±å…¥å°è¯•ï¼Œå› ä¸ºæ—¢ç„¶éƒ½éœ€è¦ç¼–å†™åŸç”Ÿç›¸å…³ä»£ç ã€‚é‚£ä½¿ç”¨PDAå‚å•†çš„SDKï¼Œæ˜æ˜¾è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œï¼‰</p>
</li>
</ol>
<h4 data-id="heading-9">å¦‚ä½•ç›‘å¬PDAæ‰‹æŒè®¾å¤‡çš„çº¢å¤–æ‰«ç åŠŸèƒ½</h4>
<ol>
<li>ç›‘å¬PDAçš„é”®ç›˜äº‹ä»¶ï¼Œéœ€è¦ä¾èµ–<code>uniapp</code>çš„<code>render.js</code>æ¥è·å–<code>addEventListener</code>ï¼Œç›‘å¬é”®ç›˜äº‹ä»¶ã€‚</li>
<li>ç›‘å¬PDAæ‰‹æŒè®¾å¤‡çº¢å¤–æ‰«ç åŠŸèƒ½çš„å¹¿æ’­ã€‚ï¼ˆå¯ä»¥è¯¢é—®é€‚é…çš„PDAå‚å•†ï¼Œæœ‰æ²¡æœ‰å¼€æ”¾çº¢å¤–æ‰«ç çš„å®‰å“å…¬å…±å¹¿æ’­ã€‚å¦‚æœæ²¡æœ‰é‚£å°±åªèƒ½é’ˆå¯¹SDKè¿›è¡Œä¸€ä¸ªäºŒæ¬¡å¼€å‘ï¼‰</li>
</ol>
<p>éšè—<code>input</code>ä»£ç†æ–¹æ¡ˆæ˜¯ä¸€ä¸ªä¸é”™çš„é€šç”¨è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯éšè—é”®ç›˜å¸¦æ¥çš„é¡µé¢é—ªçƒé—®é¢˜ï¼Œä¼šå¸¦ç»™ç”¨æˆ·è¾ƒå·®çš„ä½“éªŒï¼Œæ‰€ä»¥æœ€åçš„å®ç°æ–¹æ¡ˆæ²¡æœ‰é‡‡ç”¨è¯¥æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-10">PDAç³»ç»Ÿè®¾ç½®æ‰«ç å¹¿æ’­è§£è§£</h3>
<p>ä¸åŒçš„PDAæ‰‹æŒè®¾å¤‡æœ‰ç€ä¸åŒçš„è®¾ç½®æ–¹å¼ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª<a href="https://juejin.cn/post/7491485553029054514" target="_blank" title="https://juejin.cn/post/7491485553029054514">å…¶ä»–åŒå­¦çš„æ–¹æ¡ˆ</a>ï¼Œæƒ³äº†è§£è¯¥æ–¹æ¡ˆçš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ã€‚</p>
<p>éœ€è¦é’ˆå¯¹ä½¿ç”¨çš„PDAè®¾å¤‡è¿›è¡Œç‹¬ç«‹é…ç½®çº¢å¤–æ‰«ç åŠŸèƒ½çš„ç³»ç»Ÿè®¾ç½®ï¼Œå¦‚æœåœ¨å®¢æˆ·ä½“é‡å¤§ã€æ•°é‡å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰å¤§é‡PDAè®¾ç½®éœ€æ±‚ã€‚ä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ç¬¬ä¸€ï¼Œå®¢æˆ·å¤§æ¦‚ç‡æ˜¯ä¸æ„¿æ„è‡ªå·±è¿›è¡ŒPDAè®¾ç½®ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¾ç½®è¿‡ç¨‹å°†æ¶ˆè€—å·±æ–¹çš„å¤§é‡äººåŠ›ã€‚</li>
<li>ç¬¬äºŒï¼Œä¸æ˜¯è°è°æ¥è®¾ç½®è¿™äº›PDAæ‰‹æŒè®¾å¤‡ï¼Œéƒ½æ²¡æœ‰åŠæ³•ä¿è¯æ¯ä¸€å°PDAéƒ½ä¸€å®šè®¾ç½®æ­£ç¡®ã€‚</li>
</ul>
<p>è¿™ä¸ªæ˜¯æ— æ³•æ¥å—çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥æœ€ç»ˆä¹Ÿæ²¡æœ‰é‡‡ç”¨è¯¥æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-11">PDAå‚å•†SDKæ–¹æ¡ˆ</h3>
<p>çº¢å¤–æ‰«ç ä½œä¸ºPDAçš„åŸç”Ÿèƒ½åŠ›ï¼Œé‚£ä¹ˆè‡ªç„¶ä¼šå¯¹æœ‰éœ€æ±‚çš„å¼€å‘è€…æä¾›ç›¸å…³çš„SDKã€‚æˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¿™äº›SDKï¼Œå°±å¯ä»¥è½»æ¾å®Œæˆçº¢å¤–æ‰«ç è¯†åˆ«ã€‚</p>
<p>æ­¥éª¤æ‹†è§£ï¼š</p>
<ol>
<li>æ¥å…¥PDAæ‰‹æŒè®¾å¤‡çš„å®˜æ–¹SDKã€‚</li>
<li>åœ¨æ’ä»¶ä¸­å®Œæˆï¼Œå¯¹çº¢å¤–æ‰«ç çš„ç›‘å¬ã€‚</li>
<li>å°è£…ç›¸å…³ä¸šåŠ¡ç»„ä»¶ï¼Œæä¾›ç»™é¡¹ç›®ä½¿ç”¨ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-12">å…·ä½“å®ç°</h2>
<p>å½“å‰å®ç°è¿‡ç¨‹ä½¿ç”¨çš„æ˜¯éœå°¼éŸ¦å°”PDAè®¾å¤‡ï¼Œæ¥ä¸‹æ¥çš„å®ç°è¿‡ç¨‹å°†ä»¥è¯¥å“ç‰Œæä¾›çš„SDKä½œä¸ºä¾‹å­ã€‚å¤§å®¶åœ¨è‡ªå·±å¼€å‘ã€æ¥å…¥SDKæ—¶ï¼Œéœ€è¦å‘é€‚é…çš„PDAå‚å•†ç´¢è¦çº¢å¤–æ‰«ç SDKçš„ç›¸å…³æ–‡æ¡£ã€ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-13">å¦‚ä½•è·å–SDK</h3>
<p>è·å–sdkæœ‰å¤šç§é€”å¾„ï¼Œè¿™ä¸ªåŒå­¦ä»¬å¯ä»¥è¯¢é—®ä¸€ä¸‹å…¬å¸çš„é‡‡è´­ï¼Œæˆ–è€…å‘ä¸Šçº§åæ˜ æƒ…å†µã€‚</p>
<ul>
<li>å¯ä»¥å»å„ä¸ªå“ç‰Œçš„å®˜ç½‘ä¸‹è½½ã€‚</li>
<li>æ‰¾è´­ä¹°æ¸ é“çš„æ¸ é“å•†è¦ç›¸å…³å‹å·å“ç‰Œçš„sdkã€‚</li>
</ul>
<h3 data-id="heading-14">äº†è§£SDK</h3>
<p>å¤§è‡´æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦ç±»éœ€è¦æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç å‰äº†è§£ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>AidcManager</code>è¿™ä¸ªæ˜¯æ‰«ç æ¨¡å—çš„ç®¡ç†ç±»ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çº¢å¤–æ‰«ç æ¨¡å—çš„ç®¡ç†ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AidcManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">java</span>.lang.Object {

    <span class="hljs-comment">/**
     * è¿™ä¸ªæ¥å£æä¾›äº†AidcManageråˆ›å»ºæˆåŠŸçš„å›è°ƒæ–¹æ³•ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AidcManager</span>.CreatedCallback {
    
        <span class="hljs-comment">/**
         * éœ€è¦æˆ‘ä»¬æœªæ¥å®ç°çš„æ–¹æ³•ï¼Œå®ç°çº¢å¤–æ‰«ç åŠŸèƒ½ã€‚
         * aidcManageræ˜¯çº¢å¤–æ‰«ç ç®¡ç†å®ä¾‹
         */</span>
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreated</span><span class="hljs-params">(AidcManager aidcManager)</span>
    }

    <span class="hljs-comment">/* 
     * åˆ›å»ºçº¢å¤–æ‰«ç ç®¡ç†å™¨çš„é™æ€ç±»ï¼Œéœ€ç”¨é€šè¿‡è¯¥æ–¹æ³•åˆ›å»ºAidcManagerçš„å®ä¾‹ã€‚
     * context æ˜¯å®‰å“å¼•ç”¨çš„ä¸Šä¸‹æ–‡å¯¹è±¡
     * callback å°†åœ¨è¿™ä¸ªç±»é‡Œé¢å®ç°çº¢å¤–æ‰«ç çš„åŸºæœ¬åŠŸèƒ½ã€‚
     *
     * æˆ‘ä»¬ä¸å…³å¿ƒå…¶å†…éƒ¨å®ç°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create</span><span class="hljs-params">(Context context, AidcManager.CreatedCallback callback)</span>
    
    <span class="hljs-comment">/**
     * ç”¨äºåˆ›å»ºçº¢å¤–æ‰«ç è¯»å–å™¨å¯¹è±¡
     * ä¸éœ€è¦å…³å¿ƒå…¶å†…éƒ¨å®ç°ã€‚
     */</span>
    <span class="hljs-keyword">public</span> BarcodeReader <span class="hljs-title function_">createBarcodeReader</span><span class="hljs-params">()</span>
    
    <span class="hljs-comment">// å…³é—­çº¢å¤–æ‰«ç æœåŠ¡çš„è¿æ¥ã€‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>

}
</code></pre>
<ul>
<li><code>BarcodeReader</code>è¿™ä¸ªæ˜¯çº¢å¤–æ‰«ç çš„è¯»å–å™¨ç±»ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çº¢å¤–æ‰«ç çš„è¯»å–å™¨ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BarcodeReader</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">java</span>.lang.Object {

    <span class="hljs-comment">/**
     * çº¢å¤–æ‰«ç äº‹ä»¶çš„æ¥å£ï¼ŒåŒ…å«çº¢å¤–æ‰«ç äº‹ä»¶çš„å›è°ƒäº‹ä»¶
     * çº¢å¤–æ‰«ç çš„æˆåŠŸå“åº”å›è°ƒæ–¹æ³•
     * çº¢å¤–æ‰«ç çš„å¤±è´¥å“åº”å›è°ƒæ–¹æ³•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BarcodeReader</span>.BarcodeListener <span class="hljs-keyword">extends</span> <span class="hljs-title class_">java</span>.util.EventListener {
    
        <span class="hljs-comment">// çº¢å¤–æ‰«ç çš„æˆåŠŸå“åº”å›è°ƒæ–¹æ³•</span>
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBarcodeEvent</span><span class="hljs-params">(BarcodeReadEvent event)</span>
        
        <span class="hljs-comment">// çº¢å¤–æ‰«ç çš„å¤±è´¥å“åº”å›è°ƒæ–¹æ³•</span>
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailureEvent</span><span class="hljs-params">(BarcodeFailureEvent event)</span>
    }
    
    <span class="hljs-comment">// çº¢å¤–æ‰«ç è¯»å–å™¨ ç»‘å®šå“åº”äº‹ä»¶å›è°ƒ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBarcodeListener</span><span class="hljs-params">(BarcodeReader.BarcodeListener listener)</span>
    
    <span class="hljs-comment">// çº¢å¤–æ‰«ç è¯»å–å™¨ ç§»é™¤å“åº”äº‹ä»¶å›è°ƒ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeBarcodeListener</span><span class="hljs-params">(BarcodeReader.BarcodeListener listener)</span>
    
    <span class="hljs-comment">//  çº¢å¤–æ‰«ç è¯»å–å™¨ å¼€å§‹å“åº”æ‰«ç ç»“æœçš„äº‹ä»¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">claim</span><span class="hljs-params">()</span>
    
    <span class="hljs-comment">// çº¢å¤–æ‰«ç è¯»å–å™¨ åœæ­¢å“åº”æ‰«ç ç»“æœçš„äº‹ä»¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">()</span>
    
    <span class="hljs-comment">// é”€æ¯çº¢å¤–æ‰«ç è¯»å–å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>
}
</code></pre>
<h3 data-id="heading-15">åˆ›å»ºutsæ’ä»¶</h3>
<p>åˆ›å»º<code>utsæ’ä»¶</code>æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼Œæ˜¯æ‰‹åŠ¨åˆ›å»º<code>utsæ’ä»¶</code>çš„ç›®å½•ç»“æ„ï¼ˆä¸å»ºè®®ï¼Œå®¹æ˜“æœ‰é—æ¼ï¼‰ã€‚</li>
<li>ç¬¬äºŒç§å¦‚ä¸‹å›¾ï¼Œä¾èµ–<code>HBuilderX</code>ã€‚å³é”®<code>uni_modules</code>æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»æ–°å»º<code>uni_modulesæ’ä»¶</code>ã€‚é€‰æ‹©ç¬¬ä¸‰é¡¹<code>utsæ’ä»¶-apiæ’ä»¶</code>ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/254f46d3187d487481f220bc77269c03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IO95LiN6IO96YCB5oiR5LiA5py15bCP57qi6Iqx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446550&amp;x-signature=NF24urWMbMeVYZ0gWASZIfVB6HE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">utsæ’ä»¶ç›®å½•</h3>
<p>PDAå‚å•†æä¾›çš„sdkæ”¾ç½®åœ¨<code>utssdk/app-android/libs</code>æ–‡ä»¶å¤¹ä¸‹å°±å¯ä»¥ï¼Œ<code>utsæ’ä»¶</code>æ”¯æŒä»¥ä¸‹ä¸‰ç§ç±»å‹æ–‡ä»¶ï¼š</p>
<ul>
<li><code>jar</code></li>
<li><code>aar</code></li>
<li><code>soåº“</code></li>
</ul>
<p>å¤§è‡´çš„ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-csharp" lang="csharp">â”œâ”€<span class="hljs-keyword">static</span>                          <span class="hljs-comment">// é™æ€èµ„æº</span>
â”œâ”€utssdk                          <span class="hljs-comment">// æ’ä»¶ä¸»è¦åŠŸèƒ½çš„ä»£ç ç›®å½•</span>
â”‚        â”œâ”€app-android                 <span class="hljs-comment">//Androidå¹³å°ç›®å½•</span>
â”‚        â”‚        â”œâ”€assets                  <span class="hljs-comment">//AndroidåŸç”Ÿassetsèµ„æºç›®å½•ï¼Œå¯é€‰</span>
â”‚        â”‚        â”œâ”€libs                    <span class="hljs-comment">//AndroidåŸç”Ÿåº“ç›®å½•ï¼Œå¯é€‰</span>
â”‚        â”‚        â”œâ”€res                     <span class="hljs-comment">//AndroidåŸç”Ÿresèµ„æºç›®å½•ï¼Œå¯é€‰</span>
â”‚        â”‚        â””â”€index.uts               <span class="hljs-comment">//éœ€è¦æˆ‘ä»¬å®ç°çš„æ’ä»¶åŠŸèƒ½å…¥å£ï¼Œå¿…é¡»</span>
â”‚        â”œâ”€app-ios                     <span class="hljs-comment">//iOSå¹³å°ç›®å½• ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ã€‚</span>
â”‚        â”œâ”€<span class="hljs-keyword">interface</span>.uts               <span class="hljs-comment">// å£°æ˜æ’ä»¶å¯¹å¤–æš´éœ²çš„APIï¼Œå¿…éœ€</span>
â”‚        â””â”€unierror.uts                <span class="hljs-comment">// å®šä¹‰æ’ä»¶å¯¹å¤–æš´éœ²çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰</span>
â”œâ”€changelog.md                   <span class="hljs-comment">// è¯´æ˜æ–‡ä»¶</span>
â”œâ”€readme.md                      <span class="hljs-comment">// è¯´æ˜æ–‡ä»¶</span>
â””â”€package.json                    <span class="hljs-comment">// æ’ä»¶æ¸…å•æ–‡ä»¶ï¼Œå¿…éœ€</span>
</code></pre>
<h3 data-id="heading-17">å®ç°utsæ’ä»¶</h3>
<p>åœ¨<code>utssdk/app-android/</code>ç›®å½•ä¸‹æ–°å»º<code>barcode.uts</code>æ–‡ä»¶ï¼Œç”¨äºå®ç°çº¢å¤–æ‰«ç çš„<code>AidcManager.CreatedCallback</code>æ¥å£ï¼Œå®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>å®Œæˆ<code>aidcManager</code>å®ä¾‹çš„ç»‘å®šã€‚</li>
<li>åˆ›å»ºçº¢å¤–æ‰«ç è¯»å–å™¨å®ä¾‹ã€‚</li>
<li>ç»™<code>çº¢å¤–æ‰«ç è¯»å–å™¨å®ä¾‹</code>ç»‘å®šå“åº”äº‹ä»¶ã€‚</li>
<li>å¼€å¯<code>çº¢å¤–æ‰«ç è¯»å–å™¨å®ä¾‹</code>å¯¹çº¢å¤–æ‰«ç ç»“æœçš„å“åº”</li>
<li>é”€æ¯çº¢å¤–æ‰«æ‰«ç ç®¡ç†å®ä¾‹ã€è¯»å–å™¨å®ä¾‹</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BarcodeManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CreatedCallback</span> {
  <span class="hljs-comment">/** æ‰«ç æ¨¡å—çš„ç®¡ç†å®ä¾‹ */</span>
  <span class="hljs-attr">manager</span>: <span class="hljs-title class_">AidcManager</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
  <span class="hljs-comment">/** æ‰«ç çš„è¯»å–å™¨å®ä¾‹ */</span>
  <span class="hljs-attr">reader</span>: <span class="hljs-title class_">BarcodeReader</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>
  <span class="hljs-comment">/** æ‰«ç çš„ç›‘å¬å™¨å®ä¾‹ */</span>
  <span class="hljs-attr">listener</span>: <span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">BarcodeListener</span> | <span class="hljs-literal">null</span>

  <span class="hljs-comment">// ç»‘å®šçº¢å¤–æ‰«ç è¯»å–å™¨çš„ç›‘å¬å™¨å®ä¾‹</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">listener: BarcodeReader.BarcodeListener</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span> = listener
  }

  <span class="hljs-comment">/** æ‰«ç æ¨¡å—çš„åˆå§‹åŒ–å®Œæˆåï¼Œç»‘å®šçº¢å¤–æ‰«ç ç›‘å¬äº‹ä»¶ï¼Œ */</span>
  <span class="hljs-keyword">override</span> <span class="hljs-title function_">onCreated</span>(<span class="hljs-params">aidcManager: AidcManager</span>) {
  
    <span class="hljs-comment">// ç»‘å®šçº¢å¤–æ‰«ç æ¨¡å—å®ä¾‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span> = aidcManager

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span> !== <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// åˆ›å»ºè¯»å–å™¨</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span>?.<span class="hljs-title function_">createBarcodeReader</span>()

      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span> !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// æ‰«ç è¯»å–å™¨çš„ä¸€äº›é…ç½®</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_CODE_128_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_GS1_128_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_QR_CODE_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_CODE_39_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_DATAMATRIX_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_UPC_A_ENABLE</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_EAN_13_ENABLED</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_AZTEC_ENABLED</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_CODABAR_ENABLED</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_INTERLEAVED_25_ENABLED</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_PDF_417_ENABLED</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_CODE_39_MAXIMUM_LENGTH</span>, <span class="hljs-number">10</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_CENTER_DECODE</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_NOTIFICATION_BAD_READ_ENABLED</span>, <span class="hljs-literal">true</span>)

          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_INTERLEAVED_25_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_INTERLEAVED_25_REDUNDANCY_MODE</span>, <span class="hljs-number">10</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_LINEAR_VOID_HANDLING</span>, <span class="hljs-literal">false</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_DATA_PROCESSOR_LAUNCH_BROWSER</span>, <span class="hljs-literal">false</span>)

          <span class="hljs-comment">// ocrè®¾ç½®</span>
          <span class="hljs-keyword">const</span> <span class="hljs-attr">comreg</span>: <span class="hljs-built_in">string</span> =
            <span class="hljs-string">'[{"enabled":true,"key":"chanum","regexValue":"[A-Z a-z]{2}\\d{3}","type":"CUSTOMIZED"},'</span> +
            <span class="hljs-string">'{"enabled":true,"key":"OCR_CONTENT_REGEX_IP_ADDRESS","type":"EMBEDDED"}]'</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_OCR_ENABLED</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_OCR_EXCLUSIVE</span>, <span class="hljs-literal">true</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_OCR_CONTENT_REGEX_SEQUENCE</span>, comreg)

          <span class="hljs-comment">// æŒ‰é”®è§¦å‘æ¨¡å¼</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">setProperty</span>(
            <span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">PROPERTY_TRIGGER_CONTROL_MODE</span>,
            <span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">TRIGGER_CONTROL_MODE_AUTO_CONTROL</span>
          )
        } <span class="hljs-keyword">catch</span> (e) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>}</span> Failed to apply properties`</span>)
        }

        <span class="hljs-comment">// æ³¨å†Œå“åº”äº‹ä»¶</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">addBarcodeListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span>)
        <span class="hljs-comment">// è¯»å–å™¨å¼€å¯çº¢å¤–æ‰«ç ç»“æœå“åº”</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">claim</span>();
      }
    }
  }

  <span class="hljs-comment">// æä¾›çº¢å¤–æ‰«ç ç®¡ç†æ¨¡å—çš„æ³¨é”€æ–¹æ³•</span>
  <span class="hljs-title function_">destroyManager</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ³¨é”€è¯»å–å™¨å®ä¾‹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span> != <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// åœæ­¢è¯»å–å™¨çš„å“åº”</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">release</span>();
      <span class="hljs-comment">// æ³¨é”€ç›‘å¬äº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">removeBarcodeListener</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span> = <span class="hljs-literal">null</span>

      <span class="hljs-comment">// å…³é—­æ‰«ç è¯»å–å™¨</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span>?.<span class="hljs-title function_">close</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reader</span> = <span class="hljs-literal">null</span>
    }
    
    <span class="hljs-comment">// æ³¨é”€çº¢å¤–æ‰«ç ç®¡ç†æ¨¡å—</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span> != <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// å…³é—­çº¢å¤–æ‰«ç æ¨¡å—è¿æ¥</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span>?.<span class="hljs-title function_">close</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">manager</span> = <span class="hljs-literal">null</span>
    }
  }
}
</code></pre>
<p>åœ¨<code>utssdk/app-android/</code>ç›®å½•ä¸‹æ–°å»º<code>listener.uts</code>æ–‡ä»¶ï¼Œå®ç°<code>BarcodeReader.BarcodeListener</code>æ¥å£ï¼Œç»™è¯»å–å™¨å®ä¾‹ç»‘å®šä¸åŒçš„å“åº”äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Listener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BarcodeReader</span>.<span class="hljs-property">BarcodeListener</span> {
  <span class="hljs-attr">onScanBarcode</span>: <span class="hljs-function">(<span class="hljs-params">barcode: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>
  <span class="hljs-attr">onScanFail</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>

  <span class="hljs-comment">// ç»‘å®šå¤–éƒ¨çš„çº¢å¤–æ‰«ç ç»“æœå“åº”äº‹ä»¶</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">onScanBarcode: (barcode: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span>, onScanFail: () =&gt; <span class="hljs-built_in">void</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onScanBarcode</span> = onScanBarcode
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onScanFail</span> = onScanFail
  }

  <span class="hljs-comment">// æ‰«ç æˆåŠŸå›è°ƒäº‹ä»¶æ–¹æ³•</span>
  <span class="hljs-keyword">override</span> <span class="hljs-title function_">onBarcodeEvent</span>(<span class="hljs-params">event: BarcodeReadEvent</span>) {
    <span class="hljs-keyword">const</span> barcode = event.<span class="hljs-title function_">getBarcodeData</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onScanBarcode</span>(barcode)
  }

  <span class="hljs-comment">// æ‰«ç å¤±è´¥çš„å›è°ƒäº‹ä»¶æ–¹æ³•</span>
  <span class="hljs-keyword">override</span> <span class="hljs-title function_">onFailureEvent</span>(<span class="hljs-params">event: BarcodeFailureEvent</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onScanFail</span>()
  }
}
</code></pre>
<p>æœ€åå®ç°å…¥å£æ–‡ä»¶<code>index.uts</code>ï¼Œè¿™ä¸ªæ–‡ä»¶ç»™<code>uniapp</code>ç»„ä»¶ã€é¡µé¢æä¾›äº†å¯è°ƒç”¨çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>initSilenceScan</code>ï¼šç”¨äºåˆå§‹åŒ–çº¢å¤–æ‰«ç å¯¹è±¡</li>
<li><code>destroySilenceScan</code>ï¼šç”¨äºé”€æ¯çº¢å¤–æ‰«ç å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰«ç æ¨¡å—å®ä¾‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">barcodeManager</span>: <span class="hljs-title class_">BarcodeManager</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-comment">// åˆå§‹åŒ–çº¢å¤–æ‰«ç ç›¸å…³åŠŸèƒ½</span>
<span class="hljs-meta">@UTSJS</span>.<span class="hljs-property">keepAlive</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initSilenceScan</span> ({ onScanBarcode, onScanFail }: <span class="hljs-title class_">InitSilenceScanOpt</span>) {
  <span class="hljs-comment">// åˆ¤æ–­çº¢å¤–æ‰«ç æ¨¡å—æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸é‡å¤åˆ›å»ºã€‚</span>
  <span class="hljs-keyword">if</span> (barcodeManager?.<span class="hljs-property">manager</span> == <span class="hljs-literal">null</span>) {
  
    <span class="hljs-comment">// åˆ›å»ºçº¢å¤–æ‰«ç å“åº”äº‹ä»¶å®ä¾‹</span>
    <span class="hljs-keyword">const</span> listener = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listener</span>(onScanBarcode, onScanFail)
    
    <span class="hljs-comment">// åˆ›å»ºçº¢å¤–æ‰«ç åŠŸèƒ½æ¨¡å—</span>
    <span class="hljs-keyword">const</span> barcodeManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BarcodeManager</span>(listener)
    
    <span class="hljs-comment">// è·å–å®‰å“appçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> context = <span class="hljs-title class_">UTSAndroid</span>.<span class="hljs-title function_">getAppContext</span>()
    
    <span class="hljs-comment">// è°ƒç”¨AidcManager.createæŠ½è±¡æ–¹æ³•ï¼Œåˆ›å»ºçº¢å¤–æ‰«ç ç®¡ç†å®ä¾‹</span>
    <span class="hljs-title class_">AidcManager</span>.<span class="hljs-title function_">create</span>(context, barcodeManager)
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">destroySilenceScan</span>(<span class="hljs-params"/>) {

  <span class="hljs-comment">// é”€æ¯çº¢å¤–æ‰«ç æ¨¡å—</span>
  barcodeManager?.<span class="hljs-title function_">destroyManager</span>()
}
</code></pre>
<p>å°è£…çº¢å¤–æ‰«ç ä¸šåŠ¡ç»„ä»¶<code>SilenceScan</code>ã€‚åç»­éœ€è¦ä½¿ç”¨çº¢å¤–æ‰«ç çš„é¡µé¢ç»„ä»¶ï¼Œåªéœ€è¦å¼•å…¥<code>SilenceScan</code>ç»„ä»¶ï¼Œå³å¯ä¸æ»‘äº«å—çº¢å¤–æ‰«ç åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SilenceScan</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/uni_modules/silence-scan'</span>
<span class="hljs-keyword">import</span> { onHide, onShow } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dcloudio/uni-app'</span>
<span class="hljs-keyword">import</span> { onBeforeMount, onBeforeUnmount, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">/** å¯¹å¤–æŠ›å‡ºçš„ScanCodeäº‹ä»¶ */</span>
<span class="hljs-keyword">const</span> emit = defineEmits&lt;{ <span class="hljs-attr">scanCode</span>: [<span class="hljs-attr">code</span>: <span class="hljs-built_in">string</span>] }&gt;()

<span class="hljs-comment">/** æ‰«ç æˆåŠŸäº‹ä»¶ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onSilenceScanCode</span> = (<span class="hljs-params">code: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'scanCode'</span>, code)
}

<span class="hljs-comment">/** æ‰«ç å¤±è´¥äº‹ä»¶ */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onScanFail</span> = (<span class="hljs-params"/>) =&gt; {
  uni.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'è¯·æ£€æŸ¥æ‰«æçš„æ¡ç ã€äºŒç»´ç '</span> })
}

<span class="hljs-comment">// ç»„ä»¶æ‰€åœ¨é¡µé¢æ˜¾ç¤ºï¼Œåˆå§‹åŒ–æ‰«ç å¯¹è±¡</span>
<span class="hljs-title function_">onShow</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title class_">SilenceScan</span>.<span class="hljs-title function_">initSilenceScan</span>({ <span class="hljs-attr">onScanBarcode</span>: onSilenceScanCode, onScanFail })
})

<span class="hljs-comment">// å½“å‰ç»„ä»¶æ‰€åœ¨é¡µé¢éšè—ï¼Œé”€æ¯æ‰«ç ã€‚</span>
<span class="hljs-title function_">onHide</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title class_">SilenceScan</span>.<span class="hljs-title function_">destroySilenceScan</span>()
})

<span class="hljs-comment">// å½“å‰ç»„ä»¶é”€æ¯ï¼Œé”€æ¯æ‰«ç å¯¹è±¡</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title class_">SilenceScan</span>.<span class="hljs-title function_">destroySilenceScan</span>()
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">view</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-18">æœ€å</h2>
<p>æ–‡ä¸­å¦‚æœ‰é”™è¯¯æˆ–ä¸ä¸¥è°¨çš„åœ°æ–¹ï¼Œè¯·ç»™äºˆæŒ‡æ­£ï¼Œååˆ†æ„Ÿè°¢ã€‚</p>
<h2 data-id="heading-19">ä»£ç åœ°å€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzwh0216%2Funiapp-silence-scan" target="_blank" title="https://github.com/zwh0216/uniapp-silence-scan" ref="nofollow noopener noreferrer">çº¢å¤–æ‰«ç utsæ’ä»¶ github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¹¶å‘åˆ†å¸ƒå¼Springcloudç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨RabbitMQå®ç°è®¢å•æ”¯ä»˜å®Œæ•´é—­ç¯çš„å®ç°æ–¹æ¡ˆï¼ˆåå‘æ’¤é”€+é‡è¯•+è¡¥å¿ï¼‰]]></title>    <link>https://juejin.cn/post/7579819594270965798</link>    <guid>https://juejin.cn/post/7579819594270965798</guid>    <pubDate>2025-12-04T09:31:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594270965798" data-draft-id="7579814711853121546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¹¶å‘åˆ†å¸ƒå¼Springcloudç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨RabbitMQå®ç°è®¢å•æ”¯ä»˜å®Œæ•´é—­ç¯çš„å®ç°æ–¹æ¡ˆï¼ˆåå‘æ’¤é”€+é‡è¯•+è¡¥å¿ï¼‰"/> <meta itemprop="keywords" content="åˆ†å¸ƒå¼,Spring Cloud,RabbitMQ"/> <meta itemprop="datePublished" content="2025-12-04T09:31:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¹¶å‘åˆ†å¸ƒå¼Springcloudç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨RabbitMQå®ç°è®¢å•æ”¯ä»˜å®Œæ•´é—­ç¯çš„å®ç°æ–¹æ¡ˆï¼ˆåå‘æ’¤é”€+é‡è¯•+è¡¥å¿ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:31:31.000Z" title="Thu Dec 04 2025 09:31:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®¢å•æ”¯ä»˜å®Œæ•´é—­ç¯å®ç°æ–¹æ¡ˆï¼ˆåå‘æ’¤é”€+é‡è¯•+è¡¥å¿ï¼‰</h2>
<h3 data-id="heading-1">ä¸€ã€ä¸šåŠ¡é—­ç¯æ ¸å¿ƒæµç¨‹</h3>
<p>å®Œæ•´çš„è®¢å•æ”¯ä»˜é—­ç¯éœ€è¦†ç›–ã€Œä¸‹å•â†’æ”¯ä»˜â†’åå‘æ’¤é”€â†’è¡¥å¿å…œåº•â†’å¼‚å¸¸æ ¡éªŒã€å…¨é“¾è·¯ï¼Œç¡®ä¿ä»»ä½•å¼‚å¸¸åœºæ™¯ä¸‹æœ€ç»ˆæ•°æ®ä¸€è‡´ã€‚æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[ç”¨æˆ·ä¸‹å•]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[åˆ›å»ºè®¢å•ï¼ˆå¾…æ”¯ä»˜ï¼‰+è½åº“]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[å‘é€å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯ï¼ˆ5åˆ†é’Ÿåè§¦å‘ï¼‰]</span>
    C --&gt; D<span class="hljs-selector-attr">[è®¢å•ç­‰å¾…æ”¯ä»˜]</span>
    D --&gt; E{ç”¨æˆ·æ”¯ä»˜ï¼Ÿ}
    E --&gt;|å¦| F<span class="hljs-selector-attr">[5åˆ†é’Ÿåå»¶è¿Ÿæ¶ˆæ¯è§¦å‘â†’å–æ¶ˆè®¢å•â†’é‡Šæ”¾åº“å­˜]</span>
    E --&gt;|æ˜¯| G<span class="hljs-selector-attr">[æ”¯ä»˜ç³»ç»Ÿå›è°ƒè®¢å•æ¥å£]</span>
    G --&gt; H{æ”¯ä»˜å›è°ƒé‡è¯•ï¼ˆ<span class="hljs-number">3</span>æ¬¡ï¼‰}
    H --&gt;|å¤±è´¥| <span class="hljs-selector-tag">I</span><span class="hljs-selector-attr">[æ”¯ä»˜ç³»ç»Ÿå‘èµ·é€€æ¬¾â†’è®¢å•çŠ¶æ€å›æ»š]</span>
    H --&gt;|æˆåŠŸ| J<span class="hljs-selector-attr">[è®¢å•ç³»ç»Ÿæœ¬åœ°äº‹åŠ¡ï¼ˆæ›´æ–°çŠ¶æ€ä¸ºå·²æ”¯ä»˜+è½æœ¬åœ°æ¶ˆæ¯è¡¨ï¼‰]</span>
    J --&gt; K<span class="hljs-selector-attr">[å‘é€åå‘æ’¤é”€æŒ‡ä»¤ï¼ˆç¼“å­˜è®¢å•IDï¼‰]</span>
    J --&gt; L<span class="hljs-selector-attr">[å‘é€è¡¥å¿ä»»åŠ¡æ¶ˆæ¯ï¼ˆå…œåº•ï¼‰]</span>
    K --&gt; M<span class="hljs-selector-attr">[å»¶è¿Ÿæ¶ˆæ¯æ¶ˆè´¹æ—¶è¿‡æ»¤è¯¥è®¢å•â†’ä¸å–æ¶ˆ]</span>
    L --&gt; N{è¡¥å¿ä»»åŠ¡æ‰§è¡Œï¼Ÿ}
    N --&gt;|å¤±è´¥| O<span class="hljs-selector-attr">[Streamå†…ç½®é‡è¯•ï¼ˆ3æ¬¡ï¼‰â†’å¤±è´¥è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—â†’å‘Šè­¦+äººå·¥ä»‹å…¥]</span>
    N --&gt;|æˆåŠŸ| <span class="hljs-selector-tag">P</span><span class="hljs-selector-attr">[è¡¥åšæ’¤é”€â†’ç¡®ä¿è®¢å•ä¸è¢«å–æ¶ˆ]</span>
    <span class="hljs-selector-tag">Q</span><span class="hljs-selector-attr">[å®šæ—¶æ ¡éªŒä»»åŠ¡]</span> --&gt; R{å¼‚å¸¸è®¢å•ï¼Ÿï¼ˆå·²æ”¯ä»˜è¢«å–æ¶ˆ/æœªæ”¯ä»˜æœªå–æ¶ˆï¼‰}
    R --&gt;|æ˜¯| S<span class="hljs-selector-attr">[è‡ªåŠ¨è¡¥å¿/äººå·¥æ ¸æŸ¥]</span>
    R --&gt;|å¦| T<span class="hljs-selector-attr">[è®¢å•é—­ç¯å®Œæˆ]</span>
</code></pre>
<h3 data-id="heading-2">äºŒã€ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-3">1. ä¾èµ–é…ç½®ï¼ˆpom.xmlï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.15<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>order-pay-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>order-pay-demo<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>è®¢å•æ”¯ä»˜é—­ç¯Demoï¼ˆåå‘æ’¤é”€+é‡è¯•+è¡¥å¿ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.8<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Bootæ ¸å¿ƒ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring Cloud Stream RabbitMQ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ•°æ®åº“ç›¸å…³ï¼ˆMyBatis Plus + H2å†…å­˜åº“ï¼Œæ— éœ€çœŸå®MySQLï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.h2database<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>h2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ç¼“å­˜ï¼ˆCaffeineï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å·¥å…·ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.22<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">2. æ ¸å¿ƒé…ç½®ï¼ˆapplication.ymlï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-comment"># åŸºç¡€é…ç½®</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">order-pay-demo</span>
  <span class="hljs-comment"># H2å†…å­˜æ•°æ®åº“ï¼ˆæ— éœ€çœŸå®MySQLï¼Œæ–¹ä¾¿è¿è¡Œï¼‰</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">org.h2.Driver</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:h2:mem:order-pay-db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">sa</span>
    <span class="hljs-attr">password:</span>
  <span class="hljs-comment"># H2æ§åˆ¶å°ï¼ˆè®¿é—®ï¼šhttp://localhost:8080/h2-consoleï¼‰</span>
  <span class="hljs-attr">h2:</span>
    <span class="hljs-attr">console:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">path:</span> <span class="hljs-string">/h2-console</span>
  <span class="hljs-comment"># RabbitMQé…ç½®</span>
  <span class="hljs-attr">rabbitmq:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span>
    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span>
  <span class="hljs-comment"># Spring Cloud Streamé…ç½®</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">stream:</span>
      <span class="hljs-attr">binders:</span>
        <span class="hljs-attr">rabbit-binder:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">rabbit</span>
          <span class="hljs-attr">environment:</span>
            <span class="hljs-attr">spring:</span>
              <span class="hljs-attr">rabbitmq:</span> <span class="hljs-string">${spring.rabbitmq}</span>
      <span class="hljs-attr">bindings:</span>
        <span class="hljs-comment"># 1. å»¶è¿Ÿå–æ¶ˆè®¢å•ï¼šç”Ÿäº§è€…ï¼ˆä¸‹å•å‘é€ï¼‰</span>
        <span class="hljs-attr">order-delay-output:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.delay.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-delay-group</span>
          <span class="hljs-attr">producer:</span>
            <span class="hljs-attr">required-groups:</span> <span class="hljs-string">order-delay-group</span>
        <span class="hljs-comment"># 1. å»¶è¿Ÿå–æ¶ˆè®¢å•ï¼šæ¶ˆè´¹è€…ï¼ˆ5åˆ†é’Ÿåæ¶ˆè´¹ï¼‰</span>
        <span class="hljs-attr">order-delay-input:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.delay.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-delay-group</span>
          <span class="hljs-attr">consumer:</span>
            <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span>          <span class="hljs-comment"># å†…ç½®é‡è¯•3æ¬¡</span>
            <span class="hljs-attr">back-off:</span>
              <span class="hljs-attr">initial-interval:</span> <span class="hljs-number">1000</span> <span class="hljs-comment"># é‡è¯•é—´éš”1ç§’</span>
            <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">manual</span> <span class="hljs-comment"># æ‰‹åŠ¨ACK</span>
        <span class="hljs-comment"># 2. åå‘æ’¤é”€æŒ‡ä»¤ï¼šç”Ÿäº§è€…ï¼ˆæ”¯ä»˜æˆåŠŸå‘é€ï¼‰</span>
        <span class="hljs-attr">order-cancel-revoke-output:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.cancel.revoke.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-cancel-revoke-group</span>
        <span class="hljs-comment"># 2. åå‘æ’¤é”€æŒ‡ä»¤ï¼šæ¶ˆè´¹è€…ï¼ˆç¼“å­˜è®¢å•IDï¼‰</span>
        <span class="hljs-attr">order-cancel-revoke-input:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.cancel.revoke.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-cancel-revoke-group</span>
          <span class="hljs-attr">consumer:</span>
            <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span>
            <span class="hljs-attr">back-off:</span>
              <span class="hljs-attr">initial-interval:</span> <span class="hljs-number">1000</span>
        <span class="hljs-comment"># 3. è¡¥å¿ä»»åŠ¡ï¼šç”Ÿäº§è€…ï¼ˆæ”¯ä»˜æˆåŠŸå‘é€ï¼‰</span>
        <span class="hljs-attr">order-compensate-output:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.compensate.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-compensate-group</span>
        <span class="hljs-comment"># 3. è¡¥å¿ä»»åŠ¡ï¼šæ¶ˆè´¹è€…ï¼ˆè¡¥åšæ’¤é”€ï¼‰</span>
        <span class="hljs-attr">order-compensate-input:</span>
          <span class="hljs-attr">destination:</span> <span class="hljs-string">order.compensate.exchange</span>
          <span class="hljs-attr">binder:</span> <span class="hljs-string">rabbit-binder</span>
          <span class="hljs-attr">group:</span> <span class="hljs-string">order-compensate-group</span>
          <span class="hljs-attr">consumer:</span>
            <span class="hljs-attr">max-attempts:</span> <span class="hljs-number">3</span>          <span class="hljs-comment"># è¡¥å¿é‡è¯•3æ¬¡</span>
            <span class="hljs-attr">back-off:</span>
              <span class="hljs-attr">initial-interval:</span> <span class="hljs-number">2000</span> <span class="hljs-comment"># é‡è¯•é—´éš”2ç§’</span>
            <span class="hljs-attr">acknowledge-mode:</span> <span class="hljs-string">manual</span>
            <span class="hljs-attr">dead-letter-queue-name:</span> <span class="hljs-string">order.compensate.dlq</span> <span class="hljs-comment"># æ­»ä¿¡é˜Ÿåˆ—</span>
      <span class="hljs-comment"># RabbitMQæ‰©å±•é…ç½®ï¼ˆå»¶è¿Ÿé˜Ÿåˆ—ã€æ­»ä¿¡ï¼‰</span>
      <span class="hljs-attr">rabbit:</span>
        <span class="hljs-attr">bindings:</span>
          <span class="hljs-attr">order-delay-input:</span>
            <span class="hljs-attr">consumer:</span>
              <span class="hljs-attr">queueNameGroupOnly:</span> <span class="hljs-literal">true</span>
              <span class="hljs-attr">arguments:</span>
                <span class="hljs-attr">x-dead-letter-exchange:</span> <span class="hljs-string">order.delay.dlq.exchange</span>
                <span class="hljs-attr">x-dead-letter-routing-key:</span> <span class="hljs-string">order.delay.dlq.key</span>
                <span class="hljs-attr">x-message-ttl:</span> <span class="hljs-number">300000</span> <span class="hljs-comment"># å»¶è¿Ÿ5åˆ†é’Ÿï¼ˆ300000æ¯«ç§’ï¼‰</span>
                <span class="hljs-attr">x-queue-mode:</span> <span class="hljs-string">lazy</span>
          <span class="hljs-attr">order-compensate-input:</span>
            <span class="hljs-attr">consumer:</span>
              <span class="hljs-attr">queueNameGroupOnly:</span> <span class="hljs-literal">true</span>
              <span class="hljs-attr">arguments:</span>
                <span class="hljs-attr">x-dead-letter-exchange:</span> <span class="hljs-string">order.compensate.dlq.exchange</span>
                <span class="hljs-attr">x-dead-letter-routing-key:</span> <span class="hljs-string">order.compensate.dlq.key</span>
                <span class="hljs-attr">x-queue-mode:</span> <span class="hljs-string">lazy</span>

<span class="hljs-comment"># MyBatis Plusé…ç½®</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
  <span class="hljs-attr">global-config:</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/**/*.xml</span>

<span class="hljs-comment"># ä¸šåŠ¡é…ç½®</span>
<span class="hljs-attr">order:</span>
  <span class="hljs-attr">pay:</span>
    <span class="hljs-attr">expire-minutes:</span> <span class="hljs-number">5</span>        <span class="hljs-comment"># æ”¯ä»˜è¶…æ—¶5åˆ†é’Ÿ</span>
    <span class="hljs-attr">callback-retry-times:</span> <span class="hljs-number">3</span>  <span class="hljs-comment"># æ”¯ä»˜å›è°ƒé‡è¯•3æ¬¡</span>
    <span class="hljs-attr">callback-retry-interval:</span> <span class="hljs-number">60</span> <span class="hljs-comment"># å›è°ƒé‡è¯•é—´éš”60ç§’</span>
  <span class="hljs-attr">compensate:</span>
    <span class="hljs-attr">check-interval:</span> <span class="hljs-number">300</span>      <span class="hljs-comment"># å®šæ—¶æ ¡éªŒé—´éš”300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰</span>
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-6">1. æ•°æ®åº“è¡¨ç»“æ„ï¼ˆH2è‡ªåŠ¨åˆ›å»ºï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `t_order` (
  `id` <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  `order_no` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•ç¼–å·'</span>,
  `user_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `amount` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•é‡‘é¢'</span>,
  `status` TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'0-å¾…æ”¯ä»˜ 1-å·²æ”¯ä»˜ 2-å·²å–æ¶ˆ 3-å·²é€€æ¬¾'</span>,
  `create_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `update_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_order_no` (`order_no`)
);

<span class="hljs-comment">-- æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `t_local_message` (
  `id` <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
  `message_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯ç±»å‹ï¼šORDER_PAY_CANCEL_DELAY'</span>,
  `business_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸šåŠ¡IDï¼ˆè®¢å•IDï¼‰'</span>,
  `message_content` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹'</span>,
  `status` TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'0-å¾…å¤„ç† 1-å¤„ç†ä¸­ 2-å·²å®Œæˆ 3-å¤±è´¥'</span>,
  `retry_count` TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'é‡è¯•æ¬¡æ•°'</span>,
  `max_retry_count` TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span> COMMENT <span class="hljs-string">'æœ€å¤§é‡è¯•æ¬¡æ•°'</span>,
  `create_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `update_time` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  KEY `idx_business_status` (`business_id`, `status`)
);
</code></pre>
<h4 data-id="heading-7">2. å®ä½“ç±»</h4>
<h5 data-id="heading-8">ï¼ˆ1ï¼‰è®¢å•å®ä½“ï¼ˆTOrder.javaï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.orderpaydemo.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.IdType;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableId;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.<span class="hljs-keyword">annotation</span>.TableName;
<span class="hljs-keyword">import</span> lombok.Data;

<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName(<span class="hljs-string">"t_order"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TOrder</span> {
    <span class="hljs-comment">/**
     * è®¢å•ID
     */</span>
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> id;

    <span class="hljs-comment">/**
     * è®¢å•ç¼–å·
     */</span>
    <span class="hljs-keyword">private</span> String orderNo;

    <span class="hljs-comment">/**
     * ç”¨æˆ·ID
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> userId;

    <span class="hljs-comment">/**
     * è®¢å•é‡‘é¢
     */</span>
    <span class="hljs-keyword">private</span> BigDecimal amount;

    <span class="hljs-comment">/**
     * çŠ¶æ€ï¼š0-å¾…æ”¯ä»˜ 1-å·²æ”¯ä»˜ 2-å·²å–æ¶ˆ 3-å·²é€€æ¬¾
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">// çŠ¶æ€æšä¸¾</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> StatusEnum {
        UNPAID(<span class="hljs-number">0</span>, <span class="hljs-string">"å¾…æ”¯ä»˜"</span>),
        PAID(<span class="hljs-number">1</span>, <span class="hljs-string">"å·²æ”¯ä»˜"</span>),
        CANCELED(<span class="hljs-number">2</span>, <span class="hljs-string">"å·²å–æ¶ˆ"</span>),
        REFUNDED(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²é€€æ¬¾"</span>);

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> int code;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

        StatusEnum(int code, String desc) {
            <span class="hljs-keyword">this</span>.code = code;
            <span class="hljs-keyword">this</span>.desc = desc;
        }

        <span class="hljs-keyword">public</span> int getCode() {
            <span class="hljs-keyword">return</span> code;
        }
    }
}
</code></pre>
<h5 data-id="heading-9">ï¼ˆ2ï¼‰æœ¬åœ°æ¶ˆæ¯å®ä½“ï¼ˆTLocalMessage.javaï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">package com.example.orderpaydemo.entity;

<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;
<span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;
<span class="hljs-keyword">import</span> lombok.Data;

<span class="hljs-keyword">import</span> java.time.LocalDateTime;

@Data
@<span class="hljs-built_in">TableName</span>(<span class="hljs-string">"t_local_message"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TLocalMessage</span> {
    <span class="hljs-comment">/**
     * æ¶ˆæ¯ID
     */</span>
    @<span class="hljs-built_in">TableId</span>(type = IdType.AUTO)
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-comment">/**
     * æ¶ˆæ¯ç±»å‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> messageType;

    <span class="hljs-comment">/**
     * ä¸šåŠ¡IDï¼ˆè®¢å•IDï¼‰
     */</span>
    <span class="hljs-keyword">private</span> Long businessId;

    <span class="hljs-comment">/**
     * æ¶ˆæ¯å†…å®¹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> messageContent;

    <span class="hljs-comment">/**
     * çŠ¶æ€ï¼š0-å¾…å¤„ç† 1-å¤„ç†ä¸­ 2-å·²å®Œæˆ 3-å¤±è´¥
     */</span>
    <span class="hljs-keyword">private</span> Integer status;

    <span class="hljs-comment">/**
     * é‡è¯•æ¬¡æ•°
     */</span>
    <span class="hljs-keyword">private</span> Integer retryCount;

    <span class="hljs-comment">/**
     * æœ€å¤§é‡è¯•æ¬¡æ•°
     */</span>
    <span class="hljs-keyword">private</span> Integer maxRetryCount;

    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime createTime;

    <span class="hljs-comment">/**
     * æ›´æ–°æ—¶é—´
     */</span>
    <span class="hljs-keyword">private</span> LocalDateTime updateTime;

    <span class="hljs-comment">// æ¶ˆæ¯ç±»å‹å¸¸é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> TYPE_ORDER_PAY_CANCEL_DELAY = <span class="hljs-string">"ORDER_PAY_CANCEL_DELAY"</span>;
    <span class="hljs-comment">// çŠ¶æ€å¸¸é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Integer STATUS_PENDING = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Integer STATUS_PROCESSING = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Integer STATUS_COMPLETED = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Integer STATUS_FAILED = <span class="hljs-number">3</span>;
}
</code></pre>
<h4 data-id="heading-10">3. Mapperå±‚ï¼ˆMyBatis Plusï¼‰</h4>
<h5 data-id="heading-11">ï¼ˆ1ï¼‰è®¢å•Mapperï¼ˆTOrderMapper.javaï¼‰</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.baomidou</span><span class="hljs-selector-class">.mybatisplus</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.BaseMapper</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TOrder</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.ibatis</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.Param</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Repository</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;

@<span class="hljs-selector-tag">Repository</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">TOrderMapper</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">BaseMapper</span>&lt;<span class="hljs-selector-tag">TOrder</span>&gt; {
    <span class="hljs-comment">/**
     * å–æ¶ˆè®¢å•ï¼ˆä¹è§‚é”ï¼‰
     */</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">cancelOrder</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"id"</span>) Long id, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"oldStatus"</span>) Integer oldStatus);

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å¼‚å¸¸è®¢å•ï¼ˆå·²æ”¯ä»˜ä½†è¢«å–æ¶ˆ/å¾…æ”¯ä»˜ä½†è¶…æ—¶æœªå–æ¶ˆï¼‰
     */</span>
    <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">TOrder</span>&gt; <span class="hljs-selector-tag">listAbnormalOrders</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"expireMinutes"</span>) Integer expireMinutes);
}
</code></pre>
<h5 data-id="heading-12">ï¼ˆ2ï¼‰æœ¬åœ°æ¶ˆæ¯Mapperï¼ˆTLocalMessageMapper.javaï¼‰</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.baomidou</span><span class="hljs-selector-class">.mybatisplus</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.BaseMapper</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TLocalMessage</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.ibatis</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.Param</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Repository</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;

@<span class="hljs-selector-tag">Repository</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">TLocalMessageMapper</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">BaseMapper</span>&lt;<span class="hljs-selector-tag">TLocalMessage</span>&gt; {
    <span class="hljs-comment">/**
     * æ›´æ–°æ¶ˆæ¯çŠ¶æ€
     */</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">updateStatus</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"id"</span>) Long id, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"oldStatus"</span>) Integer oldStatus, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"newStatus"</span>) Integer newStatus);

    <span class="hljs-comment">/**
     * æ›´æ–°é‡è¯•æ¬¡æ•°
     */</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">updateRetryCount</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"id"</span>) Long id, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"retryCount"</span>) Integer retryCount);

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å¾…å¤„ç†æ¶ˆæ¯
     */</span>
    <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">TLocalMessage</span>&gt; <span class="hljs-selector-tag">listPendingMessages</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"maxRetryCount"</span>) Integer maxRetryCount);
}
</code></pre>
<h4 data-id="heading-13">4. Streamæ¶ˆæ¯é€šé“ï¼ˆOrderMessageChannels.javaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.orderpaydemo.stream;

<span class="hljs-keyword">import</span> org.springframework.cloud.stream.annotation.Input;
<span class="hljs-keyword">import</span> org.springframework.cloud.stream.annotation.Output;
<span class="hljs-keyword">import</span> org.springframework.messaging.MessageChannel;
<span class="hljs-keyword">import</span> org.springframework.messaging.SubscribableChannel;

<span class="hljs-comment">/**
 * Streamæ¶ˆæ¯é€šé“å®šä¹‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderMessageChannels</span> {
    <span class="hljs-comment">// ====================== å»¶è¿Ÿå–æ¶ˆè®¢å• ======================</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_DELAY_OUTPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-delay-output"</span>; <span class="hljs-comment">// ç”Ÿäº§è€…</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_DELAY_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-delay-input"</span>;   <span class="hljs-comment">// æ¶ˆè´¹è€…</span>

    <span class="hljs-meta">@Output(ORDER_DELAY_OUTPUT)</span>
    MessageChannel <span class="hljs-title function_">orderDelayOutput</span><span class="hljs-params">()</span>;

    <span class="hljs-meta">@Input(ORDER_DELAY_INPUT)</span>
    SubscribableChannel <span class="hljs-title function_">orderDelayInput</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">// ====================== åå‘æ’¤é”€æŒ‡ä»¤ ======================</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_CANCEL_REVOKE_OUTPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-cancel-revoke-output"</span>; <span class="hljs-comment">// ç”Ÿäº§è€…</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_CANCEL_REVOKE_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-cancel-revoke-input"</span>;   <span class="hljs-comment">// æ¶ˆè´¹è€…</span>

    <span class="hljs-meta">@Output(ORDER_CANCEL_REVOKE_OUTPUT)</span>
    MessageChannel <span class="hljs-title function_">orderCancelRevokeOutput</span><span class="hljs-params">()</span>;

    <span class="hljs-meta">@Input(ORDER_CANCEL_REVOKE_INPUT)</span>
    SubscribableChannel <span class="hljs-title function_">orderCancelRevokeInput</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">// ====================== è¡¥å¿ä»»åŠ¡ ======================</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_COMPENSATE_OUTPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-compensate-output"</span>; <span class="hljs-comment">// ç”Ÿäº§è€…</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">ORDER_COMPENSATE_INPUT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-compensate-input"</span>;   <span class="hljs-comment">// æ¶ˆè´¹è€…</span>

    <span class="hljs-meta">@Output(ORDER_COMPENSATE_OUTPUT)</span>
    MessageChannel <span class="hljs-title function_">orderCompensateOutput</span><span class="hljs-params">()</span>;

    <span class="hljs-meta">@Input(ORDER_COMPENSATE_INPUT)</span>
    SubscribableChannel <span class="hljs-title function_">orderCompensateInput</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 data-id="heading-14">5. æ ¸å¿ƒä¸šåŠ¡æœåŠ¡</h4>
<h5 data-id="heading-15">ï¼ˆ1ï¼‰è®¢å•åˆ›å»ºæœåŠ¡ï¼ˆOrderCreateService.javaï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">package com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.service</span>;

import cn<span class="hljs-selector-class">.hutool</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.UUID</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TOrder</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.TOrderMapper</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.OrderMessageChannels</span>;
import lombok<span class="hljs-selector-class">.RequiredArgsConstructor</span>;
import lombok<span class="hljs-selector-class">.extern</span><span class="hljs-selector-class">.slf4j</span><span class="hljs-selector-class">.Slf4j</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.cloud</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.EnableBinding</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.support</span><span class="hljs-selector-class">.MessageBuilder</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Service</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.transaction</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Transactional</span>;

import java<span class="hljs-selector-class">.math</span><span class="hljs-selector-class">.BigDecimal</span>;
import java<span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.LocalDateTime</span>;

<span class="hljs-comment">/**
 * è®¢å•åˆ›å»ºæœåŠ¡ï¼šä¸‹å•+å‘é€å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯
 */</span>
<span class="hljs-keyword">@Slf</span>4j
<span class="hljs-keyword">@Service</span>
<span class="hljs-keyword">@RequiredArgsConstructor</span>
<span class="hljs-keyword">@EnableBinding</span>(OrderMessageChannels.class)
public class OrderCreateService {
    private final TOrderMapper orderMapper;
    private final OrderMessageChannels messageChannels;

    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•ï¼ˆæ ¸å¿ƒä¸‹å•é€»è¾‘ï¼‰
     */</span>
    <span class="hljs-keyword">@Transactional</span>(rollbackFor = Exception.class)
    public Long createOrder(Long userId, BigDecimal amount) {
        <span class="hljs-comment">// 1. æ„å»ºè®¢å•</span>
        TOrder <span class="hljs-attribute">order</span> = new <span class="hljs-built_in">TOrder</span>();
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setOrderNo</span>(UUID.randomUUID()<span class="hljs-selector-class">.toString</span>()<span class="hljs-selector-class">.replace</span>("-", "")<span class="hljs-selector-class">.substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">32</span>));
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUserId</span>(userId);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setAmount</span>(amount);
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setStatus</span>(TOrder.StatusEnum.UNPAID.getCode());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setCreateTime</span>(LocalDateTime.now());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUpdateTime</span>(LocalDateTime.now());

        <span class="hljs-comment">// 2. è®¢å•è½åº“</span>
        orderMapper<span class="hljs-selector-class">.insert</span>(order);
        log<span class="hljs-selector-class">.info</span>("è®¢å•åˆ›å»ºæˆåŠŸ | è®¢å•IDï¼š{} | è®¢å•å·ï¼š{}", order.getId(), <span class="hljs-attribute">order</span><span class="hljs-selector-class">.getOrderNo</span>());

        <span class="hljs-comment">// 3. å‘é€å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯ï¼ˆ5åˆ†é’Ÿåè§¦å‘ï¼‰</span>
        <span class="hljs-built_in">sendDelayCancelMessage</span>(order.getId());

        return <span class="hljs-attribute">order</span><span class="hljs-selector-class">.getId</span>();
    }

    <span class="hljs-comment">/**
     * å‘é€å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯
     */</span>
    private void <span class="hljs-built_in">sendDelayCancelMessage</span>(Long orderId) {
        boolean sendResult = messageChannels<span class="hljs-selector-class">.orderDelayOutput</span>()
                <span class="hljs-selector-class">.send</span>(MessageBuilder.withPayload(orderId)<span class="hljs-selector-class">.build</span>());

        if (sendResult) {
            log<span class="hljs-selector-class">.info</span>("å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯å‘é€æˆåŠŸ | è®¢å•IDï¼š{}", orderId);
        } else {
            log<span class="hljs-selector-class">.error</span>("å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯å‘é€å¤±è´¥ | è®¢å•IDï¼š{}", orderId);
            throw new <span class="hljs-built_in">RuntimeException</span>("å»¶è¿Ÿæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œè®¢å•åˆ›å»ºå›æ»š");
        }
    }
}
</code></pre>
<h5 data-id="heading-16">ï¼ˆ2ï¼‰æ”¯ä»˜å›è°ƒæœåŠ¡ï¼ˆOrderPayService.javaï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">package com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.service</span>;

import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TLocalMessage</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TOrder</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.TLocalMessageMapper</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.TOrderMapper</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.OrderMessageChannels</span>;
import lombok<span class="hljs-selector-class">.RequiredArgsConstructor</span>;
import lombok<span class="hljs-selector-class">.extern</span><span class="hljs-selector-class">.slf4j</span><span class="hljs-selector-class">.Slf4j</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.cloud</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.EnableBinding</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.support</span><span class="hljs-selector-class">.MessageBuilder</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.scheduling</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Scheduled</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Service</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.transaction</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Transactional</span>;

import java<span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.LocalDateTime</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.HashMap</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Map</span>;
import java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ConcurrentHashMap</span>;

<span class="hljs-comment">/**
 * æ”¯ä»˜å›è°ƒæœåŠ¡ï¼šæ›´æ–°è®¢å•+å‘é€æ’¤é”€æŒ‡ä»¤+è¡¥å¿ä»»åŠ¡+å›è°ƒé‡è¯•
 */</span>
<span class="hljs-keyword">@Slf</span>4j
<span class="hljs-keyword">@Service</span>
<span class="hljs-keyword">@RequiredArgsConstructor</span>
<span class="hljs-keyword">@EnableBinding</span>(OrderMessageChannels.class)
public class OrderPayService {
    private final TOrderMapper orderMapper;
    private final TLocalMessageMapper localMessageMapper;
    private final OrderMessageChannels messageChannels;

    <span class="hljs-comment">// å¾…é‡è¯•çš„å›è°ƒä»»åŠ¡ï¼ˆæ¨¡æ‹Ÿæ”¯ä»˜ç³»ç»Ÿé‡è¯•ï¼‰</span>
    private final ConcurrentHashMap&lt;Long, Integer&gt; retryCallbackMap = new ConcurrentHashMap&lt;&gt;();

    <span class="hljs-comment">/**
     * æ”¯ä»˜å›è°ƒæ ¸å¿ƒæ–¹æ³•ï¼ˆæœ¬åœ°äº‹åŠ¡+æœ€ç»ˆä¸€è‡´æ€§ï¼‰
     */</span>
    <span class="hljs-keyword">@Transactional</span>(rollbackFor = Exception.class)
    public void handlePayCallback(Long orderId) {
        <span class="hljs-comment">// 1. æ ¡éªŒè®¢å•çŠ¶æ€</span>
        TOrder <span class="hljs-attribute">order</span> = orderMapper<span class="hljs-selector-class">.selectById</span>(orderId);
        if (order == null) {
            throw new <span class="hljs-built_in">RuntimeException</span>("è®¢å•ä¸å­˜åœ¨ | è®¢å•IDï¼š" + orderId);
        }
        if (!TOrder.StatusEnum.UNPAID.getCode()<span class="hljs-selector-class">.equals</span>(order.getStatus())) {
            log<span class="hljs-selector-class">.warn</span>("è®¢å•éå¾…æ”¯ä»˜çŠ¶æ€ï¼Œæ— éœ€å¤„ç† | è®¢å•IDï¼š{} | çŠ¶æ€ï¼š{}", orderId, order.getStatus());
            return;
        }

        <span class="hljs-comment">// 2. æ›´æ–°è®¢å•çŠ¶æ€ä¸ºå·²æ”¯ä»˜ï¼ˆæœ¬åœ°äº‹åŠ¡ï¼‰</span>
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setStatus</span>(TOrder.StatusEnum.PAID.getCode());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUpdateTime</span>(LocalDateTime.now());
        orderMapper<span class="hljs-selector-class">.updateById</span>(order);
        log<span class="hljs-selector-class">.info</span>("è®¢å•çŠ¶æ€æ›´æ–°ä¸ºå·²æ”¯ä»˜ | è®¢å•IDï¼š{}", orderId);

        <span class="hljs-comment">// 3. è½æœ¬åœ°æ¶ˆæ¯è¡¨ï¼ˆè®°å½•è¡¥å¿ä»»åŠ¡ï¼‰</span>
        TLocalMessage message = new <span class="hljs-built_in">TLocalMessage</span>();
        message<span class="hljs-selector-class">.setMessageType</span>(TLocalMessage.TYPE_ORDER_PAY_CANCEL_DELAY);
        message<span class="hljs-selector-class">.setBusinessId</span>(orderId);
        message<span class="hljs-selector-class">.setMessageContent</span>(buildMessageContent(orderId));
        message<span class="hljs-selector-class">.setStatus</span>(TLocalMessage.STATUS_PENDING);
        message<span class="hljs-selector-class">.setRetryCount</span>(<span class="hljs-number">0</span>);
        message<span class="hljs-selector-class">.setMaxRetryCount</span>(<span class="hljs-number">3</span>);
        message<span class="hljs-selector-class">.setCreateTime</span>(LocalDateTime.now());
        message<span class="hljs-selector-class">.setUpdateTime</span>(LocalDateTime.now());
        localMessageMapper<span class="hljs-selector-class">.insert</span>(message);
        log<span class="hljs-selector-class">.info</span>("æœ¬åœ°æ¶ˆæ¯è¡¨è½åº“æˆåŠŸ | æ¶ˆæ¯IDï¼š{} | è®¢å•IDï¼š{}", message.getId(), orderId);

        <span class="hljs-comment">// 4. å‘é€åå‘æ’¤é”€æŒ‡ä»¤ï¼ˆæ ¸å¿ƒï¼šè®©å»¶è¿Ÿæ¶ˆæ¯è¿‡æ»¤è¯¥è®¢å•ï¼‰</span>
        <span class="hljs-built_in">sendRevokeCancelMessage</span>(orderId);

        <span class="hljs-comment">// 5. å‘é€è¡¥å¿ä»»åŠ¡æ¶ˆæ¯ï¼ˆå…œåº•ï¼šç¡®ä¿æ’¤é”€æŒ‡ä»¤ç”Ÿæ•ˆï¼‰</span>
        <span class="hljs-built_in">sendCompensateMessage</span>(orderId);

        <span class="hljs-comment">// 6. ç§»é™¤é‡è¯•æ ‡è®°</span>
        retryCallbackMap<span class="hljs-selector-class">.remove</span>(orderId);
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ”¯ä»˜ç³»ç»Ÿå›è°ƒé‡è¯•ï¼ˆæ¯éš”60ç§’é‡è¯•ï¼Œå…±3æ¬¡ï¼‰
     */</span>
    public void <span class="hljs-built_in">addCallbackRetryTask</span>(Long orderId) {
        retryCallbackMap<span class="hljs-selector-class">.putIfAbsent</span>(orderId, <span class="hljs-number">0</span>);
        log<span class="hljs-selector-class">.info</span>("æ·»åŠ æ”¯ä»˜å›è°ƒé‡è¯•ä»»åŠ¡ | è®¢å•IDï¼š{}", orderId);
    }

    <span class="hljs-comment">/**
     * å®šæ—¶æ‰§è¡Œå›è°ƒé‡è¯•ï¼ˆæ¨¡æ‹Ÿæ”¯ä»˜ç³»ç»Ÿé€»è¾‘ï¼‰
     */</span>
    <span class="hljs-keyword">@Scheduled</span>(fixedRateString = <span class="hljs-string">"${order.pay.callback-retry-interval}000"</span>)
    public void executeCallbackRetry() {
        retryCallbackMap<span class="hljs-selector-class">.forEach</span>((orderId, retryCount) -&gt; {
            if (retryCount &gt;= Integer.parseInt(System.getProperty("order.pay.callback-retry-times", "<span class="hljs-number">3</span>"))) {
                <span class="hljs-comment">// é‡è¯•æ¬¡æ•°è€—å°½ï¼Œå‘èµ·é€€æ¬¾</span>
                <span class="hljs-built_in">refundOrder</span>(orderId);
                retryCallbackMap<span class="hljs-selector-class">.remove</span>(orderId);
                return;
            }

            try {
                log<span class="hljs-selector-class">.info</span>("æ”¯ä»˜å›è°ƒé‡è¯• | è®¢å•IDï¼š{} | é‡è¯•æ¬¡æ•°ï¼š{}", orderId, retryCount + <span class="hljs-number">1</span>);
                <span class="hljs-built_in">handlePayCallback</span>(orderId);
            } catch (Exception e) {
                log<span class="hljs-selector-class">.error</span>("æ”¯ä»˜å›è°ƒé‡è¯•å¤±è´¥ | è®¢å•IDï¼š{}", orderId, e);
                retryCallbackMap<span class="hljs-selector-class">.put</span>(orderId, retryCount + <span class="hljs-number">1</span>);
            }
        });
    }

    <span class="hljs-comment">/**
     * é€€æ¬¾ï¼ˆåå‘æ“ä½œï¼šæŠµæ¶ˆæ‰£æ¬¾ï¼‰
     */</span>
    private void <span class="hljs-built_in">refundOrder</span>(Long orderId) {
        TOrder <span class="hljs-attribute">order</span> = orderMapper<span class="hljs-selector-class">.selectById</span>(orderId);
        if (order == null) {
            return;
        }
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setStatus</span>(TOrder.StatusEnum.REFUNDED.getCode());
        <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUpdateTime</span>(LocalDateTime.now());
        orderMapper<span class="hljs-selector-class">.updateById</span>(order);
        log<span class="hljs-selector-class">.warn</span>("è®¢å•é€€æ¬¾æˆåŠŸï¼ˆå›è°ƒé‡è¯•å¤±è´¥ï¼‰| è®¢å•IDï¼š{}", orderId);
    }

    <span class="hljs-comment">/**
     * æ„å»ºæ¶ˆæ¯å†…å®¹
     */</span>
    private String <span class="hljs-built_in">buildMessageContent</span>(Long orderId) {
        Map&lt;String, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-attribute">content</span> = new HashMap&lt;&gt;();
        <span class="hljs-attribute">content</span><span class="hljs-selector-class">.put</span>("orderId", orderId);
        <span class="hljs-attribute">content</span><span class="hljs-selector-class">.put</span>("task", "revoke_cancel_order");
        return <span class="hljs-attribute">content</span><span class="hljs-selector-class">.toString</span>();
    }

    <span class="hljs-comment">/**
     * å‘é€åå‘æ’¤é”€æŒ‡ä»¤
     */</span>
    private void <span class="hljs-built_in">sendRevokeCancelMessage</span>(Long orderId) {
        boolean sendResult = messageChannels<span class="hljs-selector-class">.orderCancelRevokeOutput</span>()
                <span class="hljs-selector-class">.send</span>(MessageBuilder.withPayload(orderId)<span class="hljs-selector-class">.build</span>());
        if (sendResult) {
            log<span class="hljs-selector-class">.info</span>("åå‘æ’¤é”€æŒ‡ä»¤å‘é€æˆåŠŸ | è®¢å•IDï¼š{}", orderId);
        } else {
            log<span class="hljs-selector-class">.error</span>("åå‘æ’¤é”€æŒ‡ä»¤å‘é€å¤±è´¥ | è®¢å•IDï¼š{}", orderId);
            <span class="hljs-comment">// å‘é€å¤±è´¥ä¸æŠ›å¼‚å¸¸ï¼Œä¾èµ–è¡¥å¿ä»»åŠ¡å…œåº•</span>
        }
    }

    <span class="hljs-comment">/**
     * å‘é€è¡¥å¿ä»»åŠ¡æ¶ˆæ¯
     */</span>
    private void <span class="hljs-built_in">sendCompensateMessage</span>(Long orderId) {
        boolean sendResult = messageChannels<span class="hljs-selector-class">.orderCompensateOutput</span>()
                <span class="hljs-selector-class">.send</span>(MessageBuilder.withPayload(orderId)<span class="hljs-selector-class">.build</span>());
        if (sendResult) {
            log<span class="hljs-selector-class">.info</span>("è¡¥å¿ä»»åŠ¡æ¶ˆæ¯å‘é€æˆåŠŸ | è®¢å•IDï¼š{}", orderId);
        } else {
            log<span class="hljs-selector-class">.error</span>("è¡¥å¿ä»»åŠ¡æ¶ˆæ¯å‘é€å¤±è´¥ | è®¢å•IDï¼š{}", orderId);
        }
    }
}
</code></pre>
<h5 data-id="heading-17">ï¼ˆ3ï¼‰è®¢å•å–æ¶ˆæœåŠ¡ï¼ˆOrderCancelService.javaï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.orderpaydemo.service;

<span class="hljs-keyword">import</span> com.example.orderpaydemo.entity.TOrder;
<span class="hljs-keyword">import</span> com.example.orderpaydemo.mapper.TOrderMapper;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.<span class="hljs-keyword">annotation</span>.Transactional;

<span class="hljs-comment">/**
 * è®¢å•å–æ¶ˆæœåŠ¡ï¼šæ ¸å¿ƒå–æ¶ˆé€»è¾‘
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCancelService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TOrderMapper orderMapper;

    <span class="hljs-comment">/**
     * å–æ¶ˆè®¢å•ï¼ˆä¹è§‚é”ï¼šé˜²æ­¢å¹¶å‘ä¿®æ”¹ï¼‰
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> boolean cancelOrder(<span class="hljs-built_in">Long</span> orderId) {
        <span class="hljs-comment">// 1. ä¹è§‚é”å–æ¶ˆï¼šä»…å½“è®¢å•ä¸ºå¾…æ”¯ä»˜çŠ¶æ€æ—¶å–æ¶ˆ</span>
        int affectRows = orderMapper.cancelOrder(orderId, TOrder.StatusEnum.UNPAID.getCode());
        <span class="hljs-keyword">if</span> (affectRows &gt; <span class="hljs-number">0</span>) {
            log.info(<span class="hljs-string">"è®¢å•å–æ¶ˆæˆåŠŸ | è®¢å•IDï¼š{}"</span>, orderId);
            <span class="hljs-comment">// 2. é‡Šæ”¾åº“å­˜/ä¼˜æƒ åˆ¸ç­‰æ“ä½œï¼ˆæ¨¡æ‹Ÿï¼‰</span>
            releaseResource(orderId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> {
            log.warn(<span class="hljs-string">"è®¢å•å–æ¶ˆå¤±è´¥ï¼ˆçŠ¶æ€éå¾…æ”¯ä»˜ï¼‰| è®¢å•IDï¼š{}"</span>, orderId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿé‡Šæ”¾èµ„æºï¼ˆåº“å­˜/ä¼˜æƒ åˆ¸ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> void releaseResource(<span class="hljs-built_in">Long</span> orderId) {
        log.info(<span class="hljs-string">"é‡Šæ”¾è®¢å•å…³è”èµ„æº | è®¢å•IDï¼š{}"</span>, orderId);
    }
}
</code></pre>
<h4 data-id="heading-18">6. æ¶ˆæ¯æ¶ˆè´¹è€…</h4>
<h5 data-id="heading-19">ï¼ˆ1ï¼‰åå‘æ’¤é”€æŒ‡ä»¤æ¶ˆè´¹è€…ï¼ˆOrderCancelRevokeConsumer.javaï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.orderpaydemo.consumer;

<span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Cache;
<span class="hljs-keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.cloud.stream.<span class="hljs-keyword">annotation</span>.StreamListener;
<span class="hljs-keyword">import</span> org.springframework.messaging.handler.<span class="hljs-keyword">annotation</span>.Payload;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> javax.<span class="hljs-keyword">annotation</span>.PostConstruct;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åå‘æ’¤é”€æŒ‡ä»¤æ¶ˆè´¹è€…ï¼šç¼“å­˜å·²æ”¯ä»˜è®¢å•IDï¼Œè®©å»¶è¿Ÿæ¶ˆæ¯è¿‡æ»¤
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCancelRevokeConsumer</span> {
    <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜ï¼šå·²æ”¯ä»˜è®¢å•IDï¼ˆè¿‡æœŸ1å°æ—¶ï¼Œé¿å…å†…å­˜æº¢å‡ºï¼‰</span>
    <span class="hljs-keyword">private</span> Cache&lt;<span class="hljs-built_in">Long</span>, <span class="hljs-built_in">Boolean</span>&gt; revokedOrderCache;

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> void initCache() {
        revokedOrderCache = Caffeine.newBuilder()
                .expireAfterWrite(<span class="hljs-number">1</span>, TimeUnit.HOURS)
                .maximumSize(<span class="hljs-number">100000</span>) <span class="hljs-comment">// æœ€å¤§ç¼“å­˜10ä¸‡æ¡</span>
                .recordStats()
                .build();
    }

    <span class="hljs-comment">/**
     * æ¶ˆè´¹åå‘æ’¤é”€æŒ‡ä»¤
     */</span>
    <span class="hljs-meta">@StreamListener(OrderMessageChannels.ORDER_CANCEL_REVOKE_INPUT)</span>
    <span class="hljs-keyword">public</span> void onRevokeMessage(<span class="hljs-meta">@Payload</span> <span class="hljs-built_in">Long</span> orderId) {
        revokedOrderCache.put(orderId, <span class="hljs-literal">true</span>);
        log.info(<span class="hljs-string">"åå‘æ’¤é”€æŒ‡ä»¤ç”Ÿæ•ˆ | è®¢å•IDï¼š{} å·²åŠ å…¥ç¼“å­˜"</span>, orderId);
    }

    <span class="hljs-comment">/**
     * åˆ¤æ–­è®¢å•æ˜¯å¦éœ€è¦æ’¤é”€å–æ¶ˆæ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> boolean isOrderRevoked(<span class="hljs-built_in">Long</span> orderId) {
        <span class="hljs-keyword">return</span> revokedOrderCache.getIfPresent(orderId) != <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// æä¾›ç¼“å­˜è®¿é—®ï¼ˆè¡¥å¿ä»»åŠ¡ç”¨ï¼‰</span>
    <span class="hljs-keyword">public</span> Cache&lt;<span class="hljs-built_in">Long</span>, <span class="hljs-built_in">Boolean</span>&gt; getRevokedOrderCache() {
        <span class="hljs-keyword">return</span> revokedOrderCache;
    }
}
</code></pre>
<h5 data-id="heading-20">ï¼ˆ2ï¼‰å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯æ¶ˆè´¹è€…ï¼ˆOrderDelayCancelConsumer.javaï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.orderpaydemo.consumer;

<span class="hljs-keyword">import</span> com.example.orderpaydemo.service.OrderCancelService;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.amqp.core.Message;
<span class="hljs-keyword">import</span> org.springframework.cloud.stream.annotation.StreamListener;
<span class="hljs-keyword">import</span> org.springframework.messaging.handler.annotation.Payload;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-comment">/**
 * å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯æ¶ˆè´¹è€…ï¼šæ ¸å¿ƒè¿‡æ»¤å·²æ’¤é”€è®¢å•
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderDelayCancelConsumer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderCancelRevokeConsumer revokeConsumer;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderCancelService cancelService;

    <span class="hljs-comment">/**
     * æ¶ˆè´¹å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯
     */</span>
    <span class="hljs-meta">@StreamListener(OrderMessageChannels.ORDER_DELAY_INPUT)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDelayCancelMessage</span><span class="hljs-params">(<span class="hljs-meta">@Payload</span> Long orderId, Message message)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"æ”¶åˆ°å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯ | è®¢å•IDï¼š{}"</span>, orderId);

            <span class="hljs-comment">// æ ¸å¿ƒï¼šåå‘æ’¤é”€è¿‡æ»¤ï¼ˆå·²æ”¯ä»˜è®¢å•ç›´æ¥å¿½ç•¥ï¼‰</span>
            <span class="hljs-keyword">if</span> (revokeConsumer.isOrderRevoked(orderId)) {
                log.info(<span class="hljs-string">"åå‘æ’¤é”€ç”Ÿæ•ˆ | è®¢å•IDï¼š{} å·²æ”¯ä»˜ï¼Œè·³è¿‡å–æ¶ˆ"</span>, orderId);
                message.getMessageProperties().getChannel().basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">cancelResult</span> <span class="hljs-operator">=</span> cancelService.cancelOrder(orderId);
            <span class="hljs-keyword">if</span> (cancelResult) {
                message.getMessageProperties().getChannel().basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å–æ¶ˆå¤±è´¥ï¼Œæ‰‹åŠ¨NACKï¼ˆè§¦å‘é‡è¯•ï¼‰</span>
                message.getMessageProperties().getChannel().basicNack(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å»¶è¿Ÿå–æ¶ˆæ¶ˆæ¯æ¶ˆè´¹å¼‚å¸¸ | è®¢å•IDï¼š{}"</span>, orderId, e);
            <span class="hljs-comment">// å¼‚å¸¸é‡è¯•</span>
            message.getMessageProperties().getChannel().basicNack(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        }
    }
}
</code></pre>
<h5 data-id="heading-21">ï¼ˆ3ï¼‰è¡¥å¿ä»»åŠ¡æ¶ˆè´¹è€…ï¼ˆOrderCompensateConsumer.javaï¼‰</h5>
<pre><code class="hljs language-scss" lang="scss">package com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.consumer</span>;

import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.TLocalMessage</span>;
import com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.orderpaydemo</span><span class="hljs-selector-class">.mapper</span><span class="hljs-selector-class">.TLocalMessageMapper</span>;
import lombok<span class="hljs-selector-class">.RequiredArgsConstructor</span>;
import lombok<span class="hljs-selector-class">.extern</span><span class="hljs-selector-class">.slf4j</span><span class="hljs-selector-class">.Slf4j</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.amqp</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.Message</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.cloud</span><span class="hljs-selector-class">.stream</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.StreamListener</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.messaging</span><span class="hljs-selector-class">.handler</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Payload</span>;
import org<span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.stereotype</span><span class="hljs-selector-class">.Component</span>;

import java<span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.IOException</span>;

<span class="hljs-comment">/**
 * è¡¥å¿ä»»åŠ¡æ¶ˆè´¹è€…ï¼šè¡¥åšåå‘æ’¤é”€æ“ä½œ
 */</span>
<span class="hljs-keyword">@Slf</span>4j
<span class="hljs-keyword">@Component</span>
<span class="hljs-keyword">@RequiredArgsConstructor</span>
public class OrderCompensateConsumer {
    private final TLocalMessageMapper localMessageMapper;
    private final OrderCancelRevokeConsumer revokeConsumer;

    <span class="hljs-comment">/**
     * æ¶ˆè´¹è¡¥å¿ä»»åŠ¡ï¼šç¡®ä¿æ’¤é”€æŒ‡ä»¤ç”Ÿæ•ˆ
     */</span>
    <span class="hljs-keyword">@StreamListener</span>(OrderMessageChannels.ORDER_COMPENSATE_INPUT)
    public void onCompensateMessage(<span class="hljs-keyword">@Payload</span> Long orderId, Message message) throws IOException {
        try {
            log<span class="hljs-selector-class">.info</span>("æ”¶åˆ°è¡¥å¿ä»»åŠ¡ | è®¢å•IDï¼š{}", orderId);

            <span class="hljs-comment">// 1. æŸ¥è¯¢æœ¬åœ°æ¶ˆæ¯ï¼ˆåŠ é”æ›´æ–°ä¸ºå¤„ç†ä¸­ï¼‰</span>
            TLocalMessage localMessage = localMessageMapper<span class="hljs-selector-class">.selectOne</span>(
                    com.baomidou.mybatisplus.core.conditions.query.QueryWrapper.&lt;TLocalMessage&gt;lambda()
                            <span class="hljs-selector-class">.eq</span>(TLocalMessage::getBusinessId, orderId)
                            <span class="hljs-selector-class">.eq</span>(TLocalMessage::getMessageType, TLocalMessage.TYPE_ORDER_PAY_CANCEL_DELAY)
                            <span class="hljs-selector-class">.eq</span>(TLocalMessage::getStatus, TLocalMessage.STATUS_PENDING)
            );

            if (localMessage == null) {
                log<span class="hljs-selector-class">.warn</span>("æœ¬åœ°æ¶ˆæ¯ä¸å­˜åœ¨ | è®¢å•IDï¼š{}", orderId);
                message<span class="hljs-selector-class">.getMessageProperties</span>()<span class="hljs-selector-class">.getChannel</span>()<span class="hljs-selector-class">.basicAck</span>(message.getMessageProperties()<span class="hljs-selector-class">.getDeliveryTag</span>(), false);
                return;
            }

            <span class="hljs-comment">// 2. åŠ é”æ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºå¤„ç†ä¸­</span>
            int lockRows = localMessageMapper<span class="hljs-selector-class">.updateStatus</span>(
                    localMessage.getId(),
                    TLocalMessage<span class="hljs-selector-class">.STATUS_PENDING</span>,
                    TLocalMessage<span class="hljs-selector-class">.STATUS_PROCESSING</span>
            );
            if (lockRows == <span class="hljs-number">0</span>) {
                log<span class="hljs-selector-class">.warn</span>("æœ¬åœ°æ¶ˆæ¯å·²è¢«å¤„ç† | æ¶ˆæ¯IDï¼š{} | è®¢å•IDï¼š{}", localMessage.getId(), orderId);
                message<span class="hljs-selector-class">.getMessageProperties</span>()<span class="hljs-selector-class">.getChannel</span>()<span class="hljs-selector-class">.basicAck</span>(message.getMessageProperties()<span class="hljs-selector-class">.getDeliveryTag</span>(), false);
                return;
            }

            <span class="hljs-comment">// 3. è¡¥åšåå‘æ’¤é”€ï¼šå¼ºåˆ¶å­˜å…¥ç¼“å­˜</span>
            revokeConsumer<span class="hljs-selector-class">.getRevokedOrderCache</span>()<span class="hljs-selector-class">.put</span>(orderId, true);
            log<span class="hljs-selector-class">.info</span>("è¡¥å¿ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ | è®¢å•IDï¼š{} å·²è¡¥åšæ’¤é”€", orderId);

            <span class="hljs-comment">// 4. æ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºå·²å®Œæˆ</span>
            localMessageMapper<span class="hljs-selector-class">.updateStatus</span>(
                    localMessage.getId(),
                    TLocalMessage<span class="hljs-selector-class">.STATUS_PROCESSING</span>,
                    TLocalMessage<span class="hljs-selector-class">.STATUS_COMPLETED</span>
            );

            <span class="hljs-comment">// 5. æ‰‹åŠ¨ACK</span>
            message<span class="hljs-selector-class">.getMessageProperties</span>()<span class="hljs-selector-class">.getChannel</span>()<span class="hljs-selector-class">.basicAck</span>(message.getMessageProperties()<span class="hljs-selector-class">.getDeliveryTag</span>(), false);
        } catch (Exception e) {
            log<span class="hljs-selector-class">.error</span>("è¡¥å¿ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸ | è®¢å•IDï¼š{}", orderId, e);
            <span class="hljs-comment">// é‡è¯•æ¬¡æ•°+1</span>
            <span class="hljs-built_in">updateRetryCount</span>(orderId);
            <span class="hljs-comment">// æ‰‹åŠ¨NACKï¼ˆè§¦å‘é‡è¯•ï¼‰</span>
            message<span class="hljs-selector-class">.getMessageProperties</span>()<span class="hljs-selector-class">.getChannel</span>()<span class="hljs-selector-class">.basicNack</span>(message.getMessageProperties()<span class="hljs-selector-class">.getDeliveryTag</span>(), false, true);
        }
    }

    <span class="hljs-comment">/**
     * æ›´æ–°é‡è¯•æ¬¡æ•°
     */</span>
    private void <span class="hljs-built_in">updateRetryCount</span>(Long orderId) {
        TLocalMessage localMessage = localMessageMapper<span class="hljs-selector-class">.selectOne</span>(
                com.baomidou.mybatisplus.core.conditions.query.QueryWrapper.&lt;TLocalMessage&gt;lambda()
                        <span class="hljs-selector-class">.eq</span>(TLocalMessage::getBusinessId, orderId)
                        <span class="hljs-selector-class">.eq</span>(TLocalMessage::getMessageType, TLocalMessage.TYPE_ORDER_PAY_CANCEL_DELAY)
        );
        if (localMessage != null) {
            int newRetryCount = localMessage<span class="hljs-selector-class">.getRetryCount</span>() + <span class="hljs-number">1</span>;
            localMessageMapper<span class="hljs-selector-class">.updateRetryCount</span>(localMessage.getId(), newRetryCount);
            log<span class="hljs-selector-class">.warn</span>("è¡¥å¿ä»»åŠ¡é‡è¯•æ¬¡æ•°+<span class="hljs-number">1</span> | æ¶ˆæ¯IDï¼š{} | é‡è¯•æ¬¡æ•°ï¼š{}", localMessage.getId(), newRetryCount);
        }
    }
}
</code></pre>
<h5 data-id="heading-22">ï¼ˆ4ï¼‰è¡¥å¿ä»»åŠ¡æ­»ä¿¡æ¶ˆè´¹è€…ï¼ˆOrderCompensateDlqConsumer.javaï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">orderpaydemo</span>.<span class="hljs-property">consumer</span>;

<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">amqp</span>.<span class="hljs-property">rabbit</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RabbitListener</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;

<span class="hljs-comment">/**
 * è¡¥å¿ä»»åŠ¡æ­»ä¿¡æ¶ˆè´¹è€…ï¼šé‡è¯•å¤±è´¥åå‘Šè­¦+äººå·¥ä»‹å…¥
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCompensateDlqConsumer</span> {
    <span class="hljs-comment">/**
     * æ¶ˆè´¹è¡¥å¿ä»»åŠ¡æ­»ä¿¡é˜Ÿåˆ—
     */</span>
    <span class="hljs-meta">@RabbitListener</span>(queues = <span class="hljs-string">"order.compensate.dlq"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onCompensateDlqMessage</span>(<span class="hljs-params">Long orderId</span>) {
        <span class="hljs-comment">// 1. å‘é€å‘Šè­¦ï¼ˆé’‰é’‰/é‚®ä»¶/çŸ­ä¿¡ï¼Œæ¨¡æ‹Ÿï¼‰</span>
        <span class="hljs-title function_">sendAlarm</span>(orderId);

        <span class="hljs-comment">// 2. æ ‡è®°æœ¬åœ°æ¶ˆæ¯ä¸ºå¤±è´¥</span>
        <span class="hljs-title function_">markMessageFailed</span>(orderId);

        log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¡¥å¿ä»»åŠ¡é‡è¯•å¤±è´¥ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ— | è®¢å•IDï¼š{} éœ€äººå·¥ä»‹å…¥"</span>, orderId);
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿå‘é€å‘Šè­¦
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendAlarm</span>(<span class="hljs-params">Long orderId</span>) {
        log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"ã€å‘Šè­¦ã€‘è¡¥å¿ä»»åŠ¡å¤±è´¥ | è®¢å•IDï¼š{}"</span>, orderId);
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºçœŸå®å‘Šè­¦é€»è¾‘ï¼ˆå¦‚é’‰é’‰æœºå™¨äººã€ä¼ä¸šå¾®ä¿¡ï¼‰</span>
    }

    <span class="hljs-comment">/**
     * æ ‡è®°æœ¬åœ°æ¶ˆæ¯ä¸ºå¤±è´¥
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">markMessageFailed</span>(<span class="hljs-params">Long orderId</span>) {
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­æ›´æ–°æœ¬åœ°æ¶ˆæ¯è¡¨çŠ¶æ€ä¸ºå¤±è´¥</span>
        log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ ‡è®°æœ¬åœ°æ¶ˆæ¯ä¸ºå¤±è´¥ | è®¢å•IDï¼š{}"</span>, orderId);
    }
}
</code></pre>
<h4 data-id="heading-23">7. å¼‚å¸¸å…œåº•å®šæ—¶ä»»åŠ¡ï¼ˆOrderAbnormalCheckTask.javaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.orderpaydemo.task;

<span class="hljs-keyword">import</span> com.example.orderpaydemo.entity.TOrder;
<span class="hljs-keyword">import</span> com.example.orderpaydemo.mapper.TOrderMapper;
<span class="hljs-keyword">import</span> com.example.orderpaydemo.service.OrderCancelService;
<span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Scheduled;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * å¼‚å¸¸è®¢å•æ ¡éªŒï¼šå…œåº•æ‰€æœ‰å¼‚å¸¸åœºæ™¯
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderAbnormalCheckTask</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TOrderMapper orderMapper;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OrderCancelService cancelService;

    <span class="hljs-comment">/**
     * å®šæ—¶æ ¡éªŒå¼‚å¸¸è®¢å•ï¼ˆæ¯5åˆ†é’Ÿæ‰§è¡Œï¼‰
     */</span>
    <span class="hljs-meta">@Scheduled(fixedRateString = "${order.compensate.check-interval}000")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAbnormalOrders</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æ ¡éªŒå¼‚å¸¸è®¢å•"</span>);

        <span class="hljs-comment">// 1. æŸ¥è¯¢å¼‚å¸¸è®¢å•ï¼ˆå·²æ”¯ä»˜è¢«å–æ¶ˆ/å¾…æ”¯ä»˜è¶…æ—¶æœªå–æ¶ˆï¼‰</span>
        List&lt;TOrder&gt; abnormalOrders = orderMapper.listAbnormalOrders(
                Integer.parseInt(System.getProperty(<span class="hljs-string">"order.pay.expire-minutes"</span>, <span class="hljs-string">"5"</span>))
        );

        <span class="hljs-keyword">if</span> (abnormalOrders.isEmpty()) {
            log.info(<span class="hljs-string">"æ— å¼‚å¸¸è®¢å•"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// 2. å¤„ç†å¼‚å¸¸è®¢å•</span>
        <span class="hljs-keyword">for</span> (TOrder order : abnormalOrders) {
            <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> order.getId();
            <span class="hljs-comment">// åœºæ™¯1ï¼šå·²æ”¯ä»˜ä½†è¢«å–æ¶ˆ â†’ æ¢å¤çŠ¶æ€</span>
            <span class="hljs-keyword">if</span> (TOrder.StatusEnum.CANCELED.getCode().equals(order.getStatus())
                    &amp;&amp; hasPayRecord(orderId)) {
                recoverOrderStatus(orderId);
            }
            <span class="hljs-comment">// åœºæ™¯2ï¼šå¾…æ”¯ä»˜è¶…æ—¶æœªå–æ¶ˆ â†’ å¼ºåˆ¶å–æ¶ˆ</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (TOrder.StatusEnum.UNPAID.getCode().equals(order.getStatus())) {
                cancelService.cancelOrder(orderId);
            }
        }

        log.info(<span class="hljs-string">"å¼‚å¸¸è®¢å•æ ¡éªŒå®Œæˆ | å¤„ç†æ•°é‡ï¼š{}"</span>, abnormalOrders.size());
    }

    <span class="hljs-comment">/**
     * æ¨¡æ‹ŸæŸ¥è¯¢æ”¯ä»˜è®°å½•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPayRecord</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­æŸ¥è¯¢æ”¯ä»˜ç³»ç»Ÿè®°å½•</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">/**
     * æ¢å¤å·²æ”¯ä»˜ä½†è¢«å–æ¶ˆçš„è®¢å•çŠ¶æ€
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recoverOrderStatus</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-type">TOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TOrder</span>();
        order.setId(orderId);
        order.setStatus(TOrder.StatusEnum.PAID.getCode());
        orderMapper.updateById(order);
        log.warn(<span class="hljs-string">"æ¢å¤å¼‚å¸¸è®¢å•çŠ¶æ€ | è®¢å•IDï¼š{}"</span>, orderId);
    }
}
</code></pre>
<h4 data-id="heading-24">8. å¯åŠ¨ç±»ï¼ˆOrderPayDemoApplication.javaï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.orderpaydemo;

<span class="hljs-keyword">import</span> org.mybatis.spring.<span class="hljs-keyword">annotation</span>.MapperScan;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-keyword">import</span> org.springframework.scheduling.<span class="hljs-keyword">annotation</span>.EnableScheduling;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@MapperScan(<span class="hljs-string">"com.example.orderpaydemo.mapper"</span>)</span>
<span class="hljs-meta">@EnableScheduling</span> <span class="hljs-comment">// å¼€å¯å®šæ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPayDemoApplication</span> {
    <span class="hljs-keyword">public</span> static void main(String[] args) {
        SpringApplication.run(OrderPayDemoApplication.<span class="hljs-keyword">class</span>, args);
    }
}
</code></pre>
<h4 data-id="heading-25">9. Mapper XMLï¼ˆå¯é€‰ï¼Œè¡¥å……è‡ªå®šä¹‰SQLï¼‰</h4>
<h5 data-id="heading-26">ï¼ˆ1ï¼‰TOrderMapper.xml</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.orderpaydemo.mapper.TOrderMapper"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å–æ¶ˆè®¢å•ï¼ˆä¹è§‚é”ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cancelOrder"</span>&gt;</span>
        UPDATE t_order
        SET status = 2, update_time = NOW()
        WHERE id = #{id} AND status = #{oldStatus}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æŸ¥è¯¢å¼‚å¸¸è®¢å• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"listAbnormalOrders"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.example.orderpaydemo.entity.TOrder"</span>&gt;</span>
        SELECT * FROM t_order
        WHERE (status = 2 AND EXISTS (SELECT 1 FROM t_order WHERE id = t_order.id AND status = 1))
           OR (status = 0 AND create_time &lt; DATE_SUB(NOW(), INTERVAL #{expireMinutes} MINUTE))
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h5 data-id="heading-27">ï¼ˆ2ï¼‰TLocalMessageMapper.xml</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.orderpaydemo.mapper.TLocalMessageMapper"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ›´æ–°æ¶ˆæ¯çŠ¶æ€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateStatus"</span>&gt;</span>
        UPDATE t_local_message
        SET status = #{newStatus}, update_time = NOW()
        WHERE id = #{id} AND status = #{oldStatus}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ›´æ–°é‡è¯•æ¬¡æ•° --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateRetryCount"</span>&gt;</span>
        UPDATE t_local_message
        SET retry_count = #{retryCount}, update_time = NOW()
        WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æŸ¥è¯¢å¾…å¤„ç†æ¶ˆæ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"listPendingMessages"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.example.orderpaydemo.entity.TLocalMessage"</span>&gt;</span>
        SELECT * FROM t_local_message
        WHERE status IN (0, 1) AND retry_count &lt; #{maxRetryCount}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h3 data-id="heading-28">å››ã€æµ‹è¯•éªŒè¯æ­¥éª¤</h3>
<h4 data-id="heading-29">1. ç¯å¢ƒå‡†å¤‡</h4>
<ul>
<li>å¯åŠ¨RabbitMQï¼ˆæœ¬åœ°/dockerï¼‰ï¼›</li>
<li>å¯åŠ¨é¡¹ç›®ï¼ˆè‡ªåŠ¨åˆ›å»ºH2å†…å­˜è¡¨ï¼‰ï¼›</li>
<li>è®¿é—®H2æ§åˆ¶å°ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fh2-console%25EF%25BC%258CJDBC" target="_blank" title="http://localhost:8080/h2-console%EF%BC%8CJDBC" ref="nofollow noopener noreferrer">http://localhost:8080/h2-consoleï¼ŒJDBC</a> URLå¡«<code>jdbc:h2:mem:order-pay-db</code>ï¼Œç”¨æˆ·å<code>sa</code>ï¼Œå¯†ç ç©ºï¼Œè¿æ¥åå¯æŸ¥çœ‹è¡¨ç»“æ„ã€‚</li>
</ul>
<h4 data-id="heading-30">2. æµ‹è¯•æ­£å¸¸æµç¨‹</h4>
<h5 data-id="heading-31">ï¼ˆ1ï¼‰åˆ›å»ºè®¢å•</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯é€šè¿‡Testç±»/Controllerè°ƒç”¨</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPayDemoApplicationTests</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderCreateService orderCreateService;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderPayService orderPayService;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testNormalPay</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•ï¼ˆç”¨æˆ·IDï¼š1ï¼Œé‡‘é¢ï¼š100å…ƒï¼‰</span>
        <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> orderCreateService.createOrder(<span class="hljs-number">1L</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>));

        <span class="hljs-comment">// 2. æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸï¼Œè°ƒç”¨å›è°ƒ</span>
        orderPayService.handlePayCallback(orderId);

        <span class="hljs-comment">// 3. 5åˆ†é’ŸåæŸ¥çœ‹å»¶è¿Ÿæ¶ˆæ¯æ¶ˆè´¹æ—¥å¿—ï¼šä¼šè¿‡æ»¤è¯¥è®¢å•ï¼Œä¸å–æ¶ˆ</span>
        <span class="hljs-comment">// 4. æŸ¥çœ‹H2è¡¨t_orderï¼šstatus=1ï¼ˆå·²æ”¯ä»˜ï¼‰</span>
        <span class="hljs-comment">// 5. æŸ¥çœ‹t_local_messageï¼šstatus=2ï¼ˆå·²å®Œæˆï¼‰</span>
    }
}
</code></pre>
<h4 data-id="heading-32">3. æµ‹è¯•å¼‚å¸¸æµç¨‹ï¼ˆå›è°ƒé‡è¯•ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testCallbackRetry</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•</span>
    <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> orderCreateService.createOrder(<span class="hljs-number">2L</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"200.00"</span>));

    <span class="hljs-comment">// 2. æ·»åŠ å›è°ƒé‡è¯•ä»»åŠ¡ï¼ˆæ¨¡æ‹Ÿæ”¯ä»˜ç³»ç»Ÿå›è°ƒå¤±è´¥ï¼‰</span>
    orderPayService.addCallbackRetryTask(orderId);

    <span class="hljs-comment">// 3. ç­‰å¾…60ç§’åï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼šä¼šè‡ªåŠ¨é‡è¯•å›è°ƒï¼Œç›´åˆ°æˆåŠŸ</span>
    <span class="hljs-comment">// 4. è‹¥é‡è¯•3æ¬¡å¤±è´¥ï¼Œä¼šè§¦å‘é€€æ¬¾ï¼št_order.status=3ï¼ˆå·²é€€æ¬¾ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-33">4. æµ‹è¯•è¡¥å¿ä»»åŠ¡ï¼ˆæ’¤é”€æŒ‡ä»¤å‘é€å¤±è´¥ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testCompensateTask</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. åˆ›å»ºè®¢å•</span>
    <span class="hljs-type">Long</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> orderCreateService.createOrder(<span class="hljs-number">3L</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"300.00"</span>));

    <span class="hljs-comment">// 2. æ‰‹åŠ¨è°ƒç”¨æ”¯ä»˜å›è°ƒï¼ˆæ¨¡æ‹Ÿæ’¤é”€æŒ‡ä»¤å‘é€å¤±è´¥ï¼‰</span>
    orderPayService.handlePayCallback(orderId);

    <span class="hljs-comment">// 3. æŸ¥çœ‹è¡¥å¿ä»»åŠ¡æ—¥å¿—ï¼šä¼šè¡¥åšæ’¤é”€æ“ä½œï¼Œå°†è®¢å•IDå­˜å…¥ç¼“å­˜</span>
    <span class="hljs-comment">// 4. å»¶è¿Ÿæ¶ˆæ¯æ¶ˆè´¹æ—¶ï¼Œä»ä¼šè¿‡æ»¤è¯¥è®¢å•</span>
}
</code></pre>
<h3 data-id="heading-34">äº”ã€æ ¸å¿ƒæ€»ç»“</h3>
<ol>
<li><strong>åå‘æ’¤é”€</strong>ï¼šé€šè¿‡æœ¬åœ°ç¼“å­˜è¿‡æ»¤å»¶è¿Ÿæ¶ˆæ¯ï¼Œé¿å…å·²æ”¯ä»˜è®¢å•è¢«å–æ¶ˆï¼›</li>
<li><strong>é‡è¯•æœºåˆ¶</strong>ï¼š3å±‚é‡è¯•ï¼ˆæ”¯ä»˜å›è°ƒé‡è¯•+Streamå†…ç½®é‡è¯•+è¡¥å¿ä»»åŠ¡é‡è¯•ï¼‰ï¼Œè¦†ç›–æ‰€æœ‰ä¸´æ—¶å¼‚å¸¸ï¼›</li>
<li><strong>è¡¥å¿æ“ä½œ</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨è®°å½•è¡¥å¿ä»»åŠ¡ï¼Œæ­»ä¿¡é˜Ÿåˆ—å…œåº•ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§ï¼›</li>
<li><strong>é—­ç¯ä¿éšœ</strong>ï¼šå®šæ—¶æ ¡éªŒå¼‚å¸¸è®¢å•ï¼Œå…œåº•æç«¯åœºæ™¯ï¼Œå®ç°â€œé›¶èµ„æŸâ€ã€‚</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå®Œå…¨åŸºäºSpring Cloud Stream RabbitMQå®ç°ï¼Œä»£ç å¯ç›´æ¥è¿è¡Œï¼Œè¦†ç›–è®¢å•æ”¯ä»˜å…¨é—­ç¯ï¼Œé€‚é…é«˜å¹¶å‘ã€é«˜å¯ç”¨åœºæ™¯ï¼Œç¬¦åˆå¤§å‚è½åœ°æ ‡å‡†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Databend 11 æœˆæœˆæŠ¥ï¼šå¤šæ¨¡æ€æŸ¥è¯¢æ™ºèƒ½]]></title>    <link>https://juejin.cn/post/7579808521203679266</link>    <guid>https://juejin.cn/post/7579808521203679266</guid>    <pubDate>2025-12-04T09:36:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579808521203679266" data-draft-id="7579480677902270499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Databend 11 æœˆæœˆæŠ¥ï¼šå¤šæ¨¡æ€æŸ¥è¯¢æ™ºèƒ½"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-04T09:36:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Databend"/> <meta itemprop="url" content="https://juejin.cn/user/4477651847485534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Databend 11 æœˆæœˆæŠ¥ï¼šå¤šæ¨¡æ€æŸ¥è¯¢æ™ºèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4477651847485534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Databend
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:36:52.000Z" title="Thu Dec 04 2025 09:36:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hiï¼ŒDatabend çš„æœ‹å‹ä»¬ï¼ğŸš€</p>
<p>11 æœˆï¼Œæˆ‘ä»¬å‘å¸ƒäº† <strong>17 ä¸ª nightly ç‰ˆæœ¬</strong>ï¼Œè‡´åŠ›äºæ‰“é€ æ›´ä¸°å¯Œçš„æ•°æ®ä½“éªŒã€‚æœ¬æœˆä¸Šçº¿äº† TimestampTz æ”¯æŒã€HTTP Arrow payloadsã€æ”¯æŒ RBAC çš„è„±æ•ç­–ç•¥ï¼Œå¹¶è¿›è¡Œäº†ä¸‰è½® Runtime Filter è°ƒä¼˜ï¼ŒåŒæ—¶é’ˆå¯¹å¤šæ¨¡æ€è´Ÿè½½æ”¹è¿›äº†å…¨æ–‡ç´¢å¼•å’Œ VECTOR æ”¯æŒã€‚ç°åœ¨çš„æŸ¥è¯¢æ¥å£æ”¯æŒä» JSONã€Arrow IPC åˆ°å‡ ä½•æ•°æ®ç­‰å¤šç§è¾“å‡ºæ ¼å¼ï¼ŒåŠ©åŠ›åˆ†æå›¢é˜Ÿæ›´é«˜æ•ˆåœ°æ„å»ºå¤šæ ·åŒ–åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">æœˆåº¦æ•°æ®</h2>
<p>ä» v1.2.834-nightly åˆ° v1.2.850-nightlyï¼Œæˆ‘ä»¬ç´¯è®¡åˆå¹¶äº† <strong>27 ä¸ªæ–°åŠŸèƒ½</strong>ã€<strong>28 ä¸ª bug ä¿®å¤</strong>ã€<strong>18 é¡¹é‡æ„</strong>ã€<strong>6 é¡¹ CI/æ„å»ºæ”¹è¿›</strong> ä»¥åŠ <strong>27 é¡¹ä½“éªŒä¼˜åŒ–</strong>ã€‚</p>
<h2 data-id="heading-1">æœ¬æœˆäº®ç‚¹</h2>
<h3 data-id="heading-2">ğŸ”¥ æ ¸å¿ƒæ–°åŠŸèƒ½</h3>
<ul>
<li><strong>TimestampTz ä¸ ANSI æ—¥æœŸå…³é”®å­—</strong> â€” æ–°å¢ <code>TimestampTz</code>ã€<code>CURRENT_DATE</code>ã€<code>CURRENT_TIME</code> å’Œ <code>DATE Â± INTERVAL</code> è¯­ä¹‰ï¼Œç¡®ä¿è·¨åŒºåŸŸçš„æ—¶é—´å¤„ç†æµç¨‹å…·æœ‰è‰¯å¥½çš„å¯ç§»æ¤æ€§ã€‚</li>
<li><strong>Arrow over HTTP ä¸å‡ ä½•å…ƒæ•°æ®</strong> â€” æŸ¥è¯¢æ¥å£æ”¯æŒè¿”å›å¸¦æœ‰æ—¶åŒºå’Œå‡ ä½•æ ¼å¼æç¤ºçš„ Arrow IPC å“åº”ï¼Œå®ç°ä½å»¶è¿Ÿ BI åˆ†æã€‚</li>
<li><strong>UDTF Server Runtime</strong> â€” ç”¨æˆ·å®šä¹‰çš„è¡¨å‡½æ•°ç°åœ¨ä½œä¸ºæ‰˜ç®¡æœåŠ¡è¿è¡Œï¼Œå…·å¤‡ä¼ è¾“è¯Šæ–­å’Œ Python å¯¼å…¥ç¼“å­˜åŠŸèƒ½ã€‚</li>
<li><strong>æ”¯æŒ Position çš„ SQL</strong> â€” æ ‡å‡† <code>POSITION</code> åˆ—ç°åœ¨å¯ä»¥åœ¨ SQL å…¼å®¹çš„æµç¨‹ä¸­æŸ¥è¯¢ï¼Œç®€åŒ–äº†ä»ä¼ ç»Ÿå¼•æ“çš„è¿ç§»ã€‚</li>
<li><strong>System Streams é¥æµ‹</strong> â€” <code>system.streams</code> æš´éœ² <code>has_data</code> å­—æ®µï¼Œé…åˆæ›´ä¸°å¯Œçš„éªŒè¯è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•æ•°æ®æ‘„å…¥ã€‚</li>
</ul>
<h3 data-id="heading-3">ğŸ§  å¤šæ¨¡æ€æŸ¥è¯¢ä¸åˆ†æ</h3>
<ul>
<li><strong>å€’æ’ç´¢å¼• TOP-N å‰ªæä¸ç¼“å­˜</strong> â€” é’ˆå¯¹ JSON/Variant æ–‡æœ¬çš„ ORDER BY/LIMIT æŸ¥è¯¢ç°åœ¨ä¼šè‡ªåŠ¨è·³è¿‡æ— å…³æ•°æ®å—ï¼Œå¹¶ç»“åˆäº†æ›´æ–°åçš„å‘é‡é‡åŒ–è¯„åˆ†ã€‚</li>
<li><strong>Decimal64 ä¸ Arrow 56 å‡çº§</strong> â€” åŸç”Ÿæ ¼å¼è¡¨ç›´æ¥ååºåˆ—åŒ– Decimal64 åˆ—ï¼Œå‡çº§åçš„ Arrow/Parquet ç»„ä»¶æ”¯æŒä¸€è‡´çš„ Schema æ¼”è¿›ã€‚</li>
<li><strong>Bitmap å·¥å…·é›†</strong> â€” <code>bitmap_to_array</code> é…åˆæ–°çš„ Runtime Filter æœºåˆ¶ï¼Œè§£é”æ›´å¿«çš„é›†åˆåˆ†æå’Œè·¨æ¨¡æ€ Joinã€‚</li>
<li><strong>è™šæ‹Ÿåˆ—å…¨é¢æ”¯æŒ</strong> â€” å¤–éƒ¨è¡¨ã€Selection æŸ¥è¯¢å’Œ LIMIT æµç¨‹ç°åœ¨éƒ½æ”¯æŒè™šæ‹Ÿåˆ—è®¡ç®—ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ›¡ï¸ æ²»ç†ä¸ä¿¡ä»»</h3>
<ul>
<li><strong>è„±æ•ç­–ç•¥å‡çº§</strong> â€” å¤šåˆ— <code>USING</code> å­å¥ã€RBAC å¼ºåˆ¶æ‰§è¡Œã€å†²çªæ£€æµ‹å’Œåˆ é™¤ä¿æŠ¤ï¼Œç¡®ä¿éšç§è§„åˆ™çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>ç­–ç•¥å¯è§‚æµ‹æ€§</strong> â€” <code>policy_reference</code> è¡¨å‡½æ•°è®°å½•äº†è„±æ•/è¡Œè®¿é—®ç­–ç•¥çš„åº”ç”¨ä½ç½®ï¼Œä¾¿äºå¿«é€Ÿåˆè§„å®¡è®¡ã€‚</li>
<li><strong>å®‰å…¨é»˜è®¤é…ç½®</strong> â€” åºåˆ—æŸ¥æ‰¾ã€JWT ç»‘å®šå’Œ MySQL TLS æ¡æ‰‹å¢åŠ äº†é˜²æŠ¤æªæ–½ï¼Œé˜²æ­¢æƒé™æå‡æˆ–éƒ¨åˆ†ä¼šè¯é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-5">âš™ï¸ æ€§èƒ½ä¸è¿ç»´</h3>
<ul>
<li><strong>Runtime Filter ä¼˜åŒ–ï¼ˆ1-3 éƒ¨åˆ†ï¼‰</strong> â€” è‡ªé€‚åº”è¿‡æ»¤å™¨ç°åœ¨æ”¯æŒå¯ç©ºè½¬æ¢ã€æ•è·æ—¶åºå¹¶é¿å…å†—ä½™è½¬æ¢ï¼Œåœ¨åˆ†å¸ƒå¼ Join ä¸­èŠ‚çœæ•°ç§’æ—¶é—´ã€‚</li>
<li><strong>åŒæ­¥èƒŒå‹æº¢å‡º</strong> â€” æº¢å‡ºå†³ç­–æ”¹ä¸ºåŒæ­¥å¤„ç†ï¼Œåœ¨æœ‰æ•ˆæ§åˆ¶å†…å­˜ä½¿ç”¨çš„åŒæ—¶ï¼Œé¿å…äº§ç”Ÿå˜ˆæ‚çš„æ—¥å¿—ã€‚</li>
<li><strong>Parquet å­—å…¸å¼€å…³ä¸æ—¶åŒºä¸€è‡´æ€§</strong> â€” Fuse è¡¨æ–°å¢ <code>enable_parquet_dictionary</code>ï¼›æŸ¥è¯¢æ—¶åŒºä¼ æ’­å·²ç«¯åˆ°ç«¯å®ç°ï¼ˆHTTP å¤´ã€ä¼šè¯çŠ¶æ€ã€Clamp è¾…åŠ©å‡½æ•°ï¼‰ã€‚</li>
<li><strong>Meta æœåŠ¡å¼¹æ€§</strong> â€” é’ˆå¯¹èšåˆæº¢å‡ºã€opendal 0.54.1 å‡çº§å’Œ fetch-add è·¯å¾„å¢åŠ äº†æ›´å¹¿æ³›çš„æ—¥å¿—è®°å½•ï¼Œå‡å°‘äº†ç¹å¿™é›†ç¾¤ä¸­çš„çƒ­ç‚¹é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-6">ğŸ› ç¨³å®šæ€§ä¸è´¨é‡</h3>
<ul>
<li>ä¿®å¤äº† CSV æ‘„å…¥ã€Pivot æŠ•å½±å’Œèšåˆæº¢å‡ºçš„å›é€€é—®é¢˜ï¼›</li>
<li>COUNT DISTINCTã€ZIP å¯¼å…¥å’Œ Bitmap æ•°ç»„è¾¹ç•Œæƒ…å†µç°åœ¨è¡¨ç°ç¡®å®šï¼›</li>
<li>å¯†ç ç­–ç•¥æè¿°ç¬¦ã€Record-Batch è½¬æ¢å’Œå¤§å‹ JWKS/MariaDB ä¼šè¯ä¸å†æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</li>
</ul>
<h2 data-id="heading-7">æ ¸å¿ƒåŠŸèƒ½ï¼šå¤šæ¨¡æ€æ•°æ®åˆ†æ (CityDrive åœºæ™¯)</h2>
<p>ç°åœ¨çš„ Databend æ•°æ®åº“è¶³ä»¥æ”¯æŒ<strong>æ‰€æœ‰æ£€ç´¢æ¨¡å¼</strong>â€”â€”å…³ç³»å‹ã€JSONã€å‘é‡ã€Bitmapã€åœ°ç†ç©ºé—´â€”â€”æ— éœ€å¯åŠ¨å•ç‹¬çš„æœåŠ¡ã€‚è¿™æ­£æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn%2Fguides%2Fquery%2F" target="_blank" title="https://docs.databend.cn/guides/query/" ref="nofollow noopener noreferrer">å¤šæ¨¡æ€æ•°æ®åˆ†ææŒ‡å—</a> çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ï¼Œè¯¥æŒ‡å—å›´ç»• CityDrive Intelligence æ•°æ®é›†å±•å¼€ã€‚åŸºäºåŒæ ·çš„ <code>video_id</code>/<code>frame_id</code> åˆ—ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨ SQL è¿‡æ»¤ã€Elasticsearch é£æ ¼çš„ <code>QUERY()</code>ã€HNSW å‘é‡æœç´¢å’Œ GEOMETRY Joinï¼Œè®©ä½ ä»…éœ€åœ¨ä¸€ä¸ªæ•°æ®ä»“åº“ä¸­å³å¯å®Œæˆæ‰€æœ‰å·¥ä½œã€‚æœ¬æœŸç„¦ç‚¹å°†å¸¦ä½ å›é¡¾è¿™ä¸€åœºæ™¯ï¼Œä¸€æ­¥æ­¥å±•ç¤ºç»Ÿä¸€æ£€ç´¢åœ¨å®æˆ˜ä¸­çš„å¨åŠ›ã€‚</p>
<h3 data-id="heading-8">0. è‡ªåŠ¨åŒ–æ•°æ®æ‘„å…¥</h3>
<p>CityDrive å°†æ¯ä¸€æ‰¹æ¬¡æ•°æ®å¯¼å‡ºä¸º Parquetã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn%2Fguides%2Fquery%2Flakehouse-etl" target="_blank" title="https://docs.databend.cn/guides/query/lakehouse-etl" ref="nofollow noopener noreferrer">Lakehouse ETL æŒ‡å—</a> è®¾ç½®äº†ä¸€ä¸ªå¯å¤ç”¨çš„ Stage å’Œ<strong>ä»»åŠ¡é©±åŠ¨çš„ COPY æµç¨‹</strong>ï¼ŒæŒç»­å¯¼å…¥æ¯ç§æ¨¡æ€çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿æ¥åˆ° CityDrive çš„ S3 å­˜å‚¨æ¡¶</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE CONNECTION citydrive_s3
    STORAGE_TYPE<span class="hljs-operator">=</span><span class="hljs-string">'s3'</span>
    ACCESS_KEY_ID<span class="hljs-operator">=</span><span class="hljs-string">'&lt;AWS_ACCESS_KEY_ID&gt;'</span>
    SECRET_ACCESS_KEY<span class="hljs-operator">=</span><span class="hljs-string">'&lt;AWS_SECRET_ACCESS_KEY&gt;'</span>;

<span class="hljs-comment">-- æŒ‡å‘åŸå§‹å¤šæ¨¡æ€å¯¼å‡ºçš„å…±äº« Stage</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE STAGE citydrive_stage
    URL<span class="hljs-operator">=</span><span class="hljs-string">'s3://citydrive-lakehouse/raw/'</span>
    CONNECTION<span class="hljs-operator">=</span>(CONNECTION_NAME<span class="hljs-operator">=</span><span class="hljs-string">'citydrive_s3'</span>)
    FILE_FORMAT<span class="hljs-operator">=</span>(TYPE<span class="hljs-operator">=</span><span class="hljs-string">'PARQUET'</span>);

<span class="hljs-comment">-- è‡ªåŠ¨åŒ– ETLï¼šæ¯ 10 åˆ†é’ŸåŠ è½½ä¸€æ¬¡è§†é¢‘å¸§å…ƒæ•°æ®</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE TASK task_load_citydrive_videos
    WAREHOUSE<span class="hljs-operator">=</span><span class="hljs-string">'default'</span>
    SCHEDULE<span class="hljs-operator">=</span><span class="hljs-number">10</span> <span class="hljs-keyword">MINUTE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">COPY</span> <span class="hljs-keyword">INTO</span> citydrive_videos (
    video_id,
    vehicle_id,
    capture_date,
    route_name,
    weather,
    camera_source,
    duration_sec
) <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span>
        video_id::STRING,
        vehicle_id::STRING,
        capture_date::<span class="hljs-type">DATE</span>,
        route_name::STRING,
        weather::STRING,
        camera_source::STRING,
        duration_sec::<span class="hljs-type">INT</span>
    <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@citydrive</span>_stage<span class="hljs-operator">/</span>videos<span class="hljs-operator">/</span>
) FILE_FORMAT<span class="hljs-operator">=</span>(TYPE<span class="hljs-operator">=</span><span class="hljs-string">'PARQUET'</span>);

<span class="hljs-comment">-- è‡ªåŠ¨åŒ– ETLï¼šåŒæ­¥åŠ è½½å¸§æ•°æ®</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE TASK task_load_frame_events
    WAREHOUSE<span class="hljs-operator">=</span><span class="hljs-string">'default'</span>
    SCHEDULE<span class="hljs-operator">=</span><span class="hljs-number">10</span> <span class="hljs-keyword">MINUTE</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">COPY</span> <span class="hljs-keyword">INTO</span> frame_events (
    frame_id,
    video_id,
    frame_index,
    collected_at,
    event_tag,
    risk_score,
    speed_kmh
) <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span>
        frame_id::STRING,
        video_id::STRING,
        frame_index::<span class="hljs-type">INT</span>,
        collected_at::<span class="hljs-type">TIMESTAMP</span>,
        event_tag::STRING,
        risk_score::<span class="hljs-keyword">DOUBLE</span>,
        speed_kmh::<span class="hljs-keyword">DOUBLE</span>
    <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@citydrive</span>_stage<span class="hljs-operator">/</span>frame<span class="hljs-operator">-</span>events<span class="hljs-operator">/</span>
) FILE_FORMAT<span class="hljs-operator">=</span>(TYPE<span class="hljs-operator">=</span><span class="hljs-string">'PARQUET'</span>);

<span class="hljs-comment">-- æ¿€æ´»ä»»åŠ¡ï¼Œæ•°æ®è‡ªåŠ¨å¯¼å…¥</span>
<span class="hljs-keyword">ALTER</span> TASK task_load_citydrive_videos RESUME;
<span class="hljs-keyword">ALTER</span> TASK task_load_frame_events RESUME;
</code></pre>
<h3 data-id="heading-9">1. å…³ç³»å‹ SQL åˆ†æ (æŒ‡å—: SQL Analytics)</h3>
<p>åŸºç¡€è¡¨ä¿å­˜äº†è§„èŒƒçš„è½¦è¾†è§†é¢‘å¸§æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">TABLE</span> citydrive_videos (...);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">TABLE</span> frame_events (...);

<span class="hljs-keyword">WITH</span> recent_videos <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> citydrive_videos
    <span class="hljs-keyword">WHERE</span> capture_date <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01'</span> <span class="hljs-keyword">AND</span> capture_date <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-04'</span>
)
<span class="hljs-keyword">SELECT</span> v.video_id, v.route_name, <span class="hljs-built_in">COUNT</span>(f.frame_id) <span class="hljs-keyword">AS</span> flagged_frames
<span class="hljs-keyword">FROM</span> recent_videos v
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> frame_events f <span class="hljs-keyword">USING</span>(video_id)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> v.video_id, v.route_name
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> flagged_frames <span class="hljs-keyword">DESC</span>;
</code></pre>
<p><code>LATERAL FLATTEN</code> è¿æ¥ <code>frame_metadata_catalog</code> è¿›è¡ŒåµŒå¥—æ£€æµ‹ï¼Œè€Œ <code>ROLLUP</code>/<code>CUBE</code> æŒ‰è·¯çº¿å’Œå¤©æ°”æ±‡æ€»é£é™©ã€‚æœ¬æœˆå‘å¸ƒçš„ Runtime Filter å¢å¼ºåŠŸèƒ½ç¡®ä¿å³ä½¿åœ¨æ•°æ®è§„æ¨¡æ‰©å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™äº› Join æ“ä½œä¾ç„¶å“åº”è¿…é€Ÿã€‚</p>
<h3 data-id="heading-10">2. JSON ä¸æœç´¢ (æŒ‡å—: JSON &amp; Search)</h3>
<p>å€’æ’ç´¢å¼•å…è®¸è¿›è¡Œ Elasticsearch é£æ ¼çš„è¿‡æ»¤ï¼Œè€Œæ— éœ€å¤åˆ¶æ•°æ®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">TABLE</span> frame_metadata_catalog (
    doc_id STRING,
    meta_json VARIANT,
    captured_at <span class="hljs-type">TIMESTAMP</span>,
    INVERTED INDEX idx_meta_json(meta_json)
);

<span class="hljs-keyword">SELECT</span> doc_id, captured_at
<span class="hljs-keyword">FROM</span> frame_metadata_catalog
<span class="hljs-keyword">WHERE</span> QUERY(<span class="hljs-string">'meta_json.scene.weather_code:rain AND meta_json.camera.sensor_view:roof'</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> captured_at;
</code></pre>
<p><code>policy_reference</code> å‡½æ•°é…åˆè„±æ•ç­–ç•¥æ§åˆ¶ï¼Œæ„å‘³ç€ä½ å¯ä»¥å¯¹ä»»ä½•é•œåƒè¿™äº› JSON è´Ÿè½½çš„åˆ—åº”ç”¨æ„ŸçŸ¥ RBAC çš„éšç§ä¿æŠ¤ï¼Œå¯é€‰çš„ Arrow-over-HTTP å“åº”åˆ™å°†è¿‡æ»¤åçš„è´Ÿè½½ç›´æ¥æµå¼ä¼ è¾“åˆ° BI å·¥å…·ä¸­ã€‚</p>
<h3 data-id="heading-11">3. å‘é‡æœç´¢ (æŒ‡å—: Vector Search)</h3>
<p>è¯­ä¹‰æœç´¢ä¸ SQL å¹¶è¡Œè¿è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">TABLE</span> frame_embeddings (
    frame_id STRING,
    video_id STRING,
    sensor_view STRING,
    embedding VECTOR(<span class="hljs-number">512</span>),
    encoder_build STRING,
    created_at <span class="hljs-type">TIMESTAMP</span>,
    VECTOR INDEX idx_frame_embeddings(embedding) DISTANCE<span class="hljs-operator">=</span><span class="hljs-string">'cosine'</span>
);

<span class="hljs-keyword">WITH</span> query_embedding <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> embedding <span class="hljs-keyword">FROM</span> frame_embeddings <span class="hljs-keyword">WHERE</span> frame_id<span class="hljs-operator">=</span><span class="hljs-string">'FRAME-0101'</span>
)
<span class="hljs-keyword">SELECT</span> e.frame_id, e.video_id,
       COSINE_DISTANCE(e.embedding, q.embedding) <span class="hljs-keyword">AS</span> distance
<span class="hljs-keyword">FROM</span> frame_embeddings e
<span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> query_embedding q
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> distance
LIMIT <span class="hljs-number">3</span>;
</code></pre>
<h3 data-id="heading-12">4. åœ°ç†ç©ºé—´åˆ†æ (æŒ‡å—: Geo Analytics)</h3>
<p>Geo è¡¨ä½¿ç”¨ç›¸åŒçš„ IDï¼Œæ‰€ä»¥â€œè¿™å‘ç”Ÿåœ¨å“ªé‡Œï¼Ÿâ€åªæ˜¯å¦ä¸€ä¸ª Joinï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">TABLE</span> frame_geo_points (
    video_id STRING,
    frame_id STRING,
    position_wgs84 GEOMETRY,
    solution_grade <span class="hljs-type">INT</span>,
    source_system STRING,
    created_at <span class="hljs-type">TIMESTAMP</span>
);

<span class="hljs-keyword">SELECT</span> f.frame_id, ST_DISTANCE(g.position_wgs84, s.signal_position) <span class="hljs-keyword">AS</span> meters_to_signal
<span class="hljs-keyword">FROM</span> frame_geo_points g
<span class="hljs-keyword">JOIN</span> signal_contact_points s <span class="hljs-keyword">USING</span>(frame_id)
<span class="hljs-keyword">JOIN</span> frame_events f <span class="hljs-keyword">USING</span>(frame_id)
<span class="hljs-keyword">WHERE</span> ST_WITHIN(g.position_wgs84,
      TO_GEOMETRY(<span class="hljs-string">'SRID=4326;POLYGON((114.05 22.54, 114.13 22.54, 114.13 22.57, 114.05 22.57, 114.05 22.54))'</span>));
</code></pre>
<p>æœ€åï¼Œç”¨<strong>ä¸€æ¡ SQL è¯­å¥</strong>å°†æ‰€æœ‰å†…å®¹ä¸²è”èµ·æ¥ï¼šè¿‡æ»¤ JSON æ ‡ç­¾ã€æŸ¥æ‰¾å‘é‡é‚»å±…å¹¶æ£€æŸ¥ä¿¡å·è·ç¦»ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> json_hits <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> doc_id
    <span class="hljs-keyword">FROM</span> frame_metadata_catalog
    <span class="hljs-keyword">WHERE</span> QUERY(<span class="hljs-string">'meta_json.media_meta.tagging.labels:pedestrian'</span>)
),
vector_hits <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> frame_id
    <span class="hljs-keyword">FROM</span> frame_embeddings
    <span class="hljs-keyword">WHERE</span> COSINE_DISTANCE(
          embedding,
          (<span class="hljs-keyword">SELECT</span> embedding <span class="hljs-keyword">FROM</span> frame_embeddings <span class="hljs-keyword">WHERE</span> frame_id<span class="hljs-operator">=</span><span class="hljs-string">'FRAME-0102'</span>)
    ) <span class="hljs-operator">&lt;</span> <span class="hljs-number">0.3</span>
)
<span class="hljs-keyword">SELECT</span> f.frame_id, v.route_name, s.distance_m
<span class="hljs-keyword">FROM</span> frame_events f
<span class="hljs-keyword">JOIN</span> citydrive_videos v <span class="hljs-keyword">USING</span>(video_id)
<span class="hljs-keyword">JOIN</span> json_hits j <span class="hljs-keyword">ON</span> j.doc_id <span class="hljs-operator">=</span> f.frame_id
<span class="hljs-keyword">JOIN</span> vector_hits vh <span class="hljs-keyword">ON</span> vh.frame_id <span class="hljs-operator">=</span> f.frame_id
<span class="hljs-keyword">JOIN</span> signal_contact_points s <span class="hljs-keyword">USING</span>(frame_id);
</code></pre>
<p>è¿™ä¸€æ¡æŸ¥è¯¢è·¨è¶Šäº†ç»“æ„åŒ–äº‹å®ã€JSON å…ƒæ•°æ®ã€å‘é‡ç›¸ä¼¼åº¦å’Œåœ°ç†ç©ºé—´è·ç¦»â€”â€”å…¨éƒ¨åœ¨ Databend ä¸­æ‰§è¡Œã€‚è¿™å°±æ˜¯ç»Ÿä¸€å¤šæ¨¡æ€æ£€ç´¢çš„é­…åŠ›ã€‚</p>
<p>ğŸ“˜ æŒ‰ç…§é¡ºåºï¼ˆSQL Analytics â†’ JSON &amp; Search â†’ Vector Search â†’ Geo Analyticsï¼‰è·ŸéšæŒ‡å—ï¼Œåœ¨ä½ çš„é›†ç¾¤ä¸Šé‡ç°è¿™ä¸ªå®Œæ•´çš„ç«¯åˆ°ç«¯æµç¨‹ã€‚ä¸€ä¸ªæ•°ä»“ï¼Œæå®šæ‰€æœ‰åˆ†ææ¨¡å¼ã€‚</p>
<hr/>
<p>Databend ç°å·²æ¼”è¿›ä¸ºä¸€ä¸ª<strong>ç»Ÿä¸€çš„åˆ†æå¼•æ“</strong>ï¼šä»ç»å…¸çš„ SQL æŸ¥è¯¢ã€JSON æ£€ç´¢ã€å‘é‡ç›¸ä¼¼åº¦åŒ¹é…ï¼Œåˆ°åœ°ç†ç©ºé—´åˆ†æï¼Œå†åˆ°è‡ªåŠ¨åŒ–çš„æ•°æ®å¯¼å…¥ä¸ ETLï¼Œæ‰€æœ‰è¿™äº›èƒ½åŠ›éƒ½å·²é›†æˆåœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚ä½ æ— éœ€å†åœ¨å„ç§æ•°æ®åº“æˆ–æœåŠ¡ä¹‹é—´å‘¨è½¬ï¼Œå°±èƒ½ç›´æ¥ä»ç±»ä¼¼ CityDrive çš„æ•°æ®é›†ä¸­æŒ–æ˜å‡ºæ·±å±‚ä»·å€¼ã€‚</p>
<h2 data-id="heading-13">å…³äº Databend</h2>
<p>Databend æ˜¯ä¸€æ¬¾ 100%Â RustÂ æ„å»ºã€é¢å‘å¯¹è±¡å­˜å‚¨è®¾è®¡çš„æ–°ä¸€ä»£å¼€æºäº‘åŸç”Ÿæ•°æ®ä»“åº“ï¼Œç»Ÿä¸€æ”¯æŒÂ BIÂ åˆ†æã€AI å‘é‡ã€å…¨æ–‡æ£€ç´¢åŠåœ°ç†ç©ºé—´åˆ†æç­‰å¤šæ¨¡æ€èƒ½åŠ›ã€‚æœŸå¾…æ‚¨çš„å…³æ³¨ï¼Œä¸€èµ·æ‰“é€ æ–°ä¸€ä»£å¼€æº AI + Data Cloudã€‚</p>
<p>ğŸ‘¨â€ğŸ’»â€Â Databend Cloudï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatabend.cn" title="https://link.juejin.cn?target=https%3A%2F%2Fdatabend.cn" target="_blank">databend.cn</a></p>
<p>ğŸ“–Â Databend æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn" title="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn" target="_blank">docs.databend.cn</a></p>
<p>ğŸ’»Â Wechatï¼šDatabend</p>
<p>âœ¨Â GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" title="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" target="_blank">github.com/databendlabâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬2è®²ï¼šBTC-å¯†ç å­¦åŸç† åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°]]></title>    <link>https://juejin.cn/post/7579813925995675689</link>    <guid>https://juejin.cn/post/7579813925995675689</guid>    <pubDate>2025-12-04T09:39:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579813925995675689" data-draft-id="7579716343454138411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬2è®²ï¼šBTC-å¯†ç å­¦åŸç† åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-04T09:39:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¶‚æ¶‚"/> <meta itemprop="url" content="https://juejin.cn/user/3740972207312249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬2è®²ï¼šBTC-å¯†ç å­¦åŸç† åŒ—å¤§è‚–è‡»è€å¸ˆå®¢å ‚ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3740972207312249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¶‚æ¶‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:39:29.000Z" title="Thu Dec 04 2025 09:39:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™èŠ‚è¯¾ç³»ç»Ÿè®²æ¸…äº†æ”¯æ’‘æ¯”ç‰¹å¸çš„ä¸¤å¤§å¯†ç å­¦æ”¯æŸ±ï¼šå“ˆå¸Œå‡½æ•°å’Œå…¬é’¥å¯†ç /æ•°å­—ç­¾åï¼Œå¹¶ç”¨è¿™äº›å·¥å…·è§£é‡Šâ€œæ¯”ç‰¹å¸ä¸ºä»€ä¹ˆèƒ½é˜²ä¼ªã€é˜²ç¯¡æ”¹ã€é˜²å†’å……â€ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€å¯†ç å­¦åœ¨æ¯”ç‰¹å¸ä¸­çš„è§’è‰²</h3>
<ul>
<li>è¯¾ç¨‹å…ˆå¼ºè°ƒç”µå­è´§å¸ç³»ç»Ÿå¿…é¡»è§£å†³å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•ä¿å¯†ã€å¦‚ä½•é˜²ç¯¡æ”¹ã€å¦‚ä½•ç¡®è®¤â€œä½ å°±æ˜¯ä½ â€ã€ä»¥åŠå¦‚ä½•é˜²æ­¢äº‹åå¦è®¤è‡ªå·±è½¬è¿‡è´¦ã€‚å¯†ç å­¦æ­£æ˜¯ç”¨æ¥ç»™è¿™äº›é—®é¢˜æä¾›â€œå·¥ç¨‹çº§â€çš„æŠ€æœ¯è§£æ³•çš„åŸºç¡€è®¾æ–½ã€‚</li>
<li>è®²è¯¾ä¸­å¤šæ¬¡æé†’ï¼šä¸è¦å¸¦ç€â€œä¼ ç»Ÿé“¶è¡Œç³»ç»Ÿâ€çš„æ€è·¯çœ‹æ¯”ç‰¹å¸ï¼Œè€Œè¦æ„è¯†åˆ°åœ¨å®Œå…¨å¼€æ”¾çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œåªèƒ½ä¾èµ–æ•°å­¦å’Œç®—æ³•æ¥å»ºç«‹ä¿¡ä»»ï¼Œè¿™ä¸ºåé¢æ‰€æœ‰æŠ€æœ¯ç»†èŠ‚å®šä¸‹äº†åŸºè°ƒã€‚</li>
</ul>
<p>ä¾‹å­ï¼šå¦‚æœä½ åœ¨QQç¾¤é‡Œè½¬è´¦ç»™åˆ«äººï¼Œæ²¡æœ‰ä»»ä½•ä¸­å¿ƒæœºæ„èƒŒä¹¦ï¼Œé‚£ä¹ˆå…¶ä»–äººå¦‚ä½•ç¡®è®¤è¿™ç¬”â€œè½¬è´¦è®°å½•â€æ˜¯çœŸçš„ï¼Ÿè¿™å°±éœ€è¦å¯†ç å­¦æ¥ä¿è¯è¿™æ¡è®°å½•æ—¢ä¸èƒ½è¢«åˆ«äººéšä¾¿ä¼ªé€ ï¼Œä¹Ÿä¸èƒ½è¢«ä½ è‡ªå·±äº‹åç¯¡æ”¹æˆ–å¦è®¤ã€‚</p>
<h3 data-id="heading-1">äºŒã€å“ˆå¸Œå‡½æ•°ï¼šåŒºå—é“¾çš„â€œæŒ‡çº¹æœºâ€</h3>
<ul>
<li>è¯¾ç¨‹ç”¨â€œç»™ä»»æ„æ•°æ®ç”ŸæˆçŸ­å°æŒ‡çº¹â€çš„æ¯”å–»è§£é‡Šå“ˆå¸Œå‡½æ•°ï¼šæ— è®ºåŸå§‹æ•°æ®å¤šé•¿ï¼Œä¸¢è¿›å“ˆå¸Œå‡½æ•°å¾—åˆ°çš„å€¼é•¿åº¦å›ºå®šã€çœ‹èµ·æ¥éšæœºï¼Œå´å¯¹è¾“å…¥æåº¦æ•æ„Ÿï¼Œä¸€ç‚¹ç‚¹æ”¹åŠ¨éƒ½ä¼šå¯¼è‡´æˆªç„¶ä¸åŒçš„è¾“å‡ºã€‚</li>
<li>é‡ç‚¹å¼ºè°ƒå“ˆå¸Œçš„ä¸‰å¤§æ€§è´¨ï¼šå•å‘æ€§ï¼ˆä»ç»“æœå‡ ä¹æ¨ä¸å›è¾“å…¥ï¼‰ã€æŠ—ç¢°æ’ï¼ˆå‡ ä¹ä¸å¯èƒ½æ‰¾åˆ°ä¸¤ä¸ªä¸åŒè¾“å…¥æœ‰åŒæ ·è¾“å‡ºï¼‰ã€ä»¥åŠé›ªå´©æ•ˆåº”ï¼ˆè¾“å…¥å¾®å˜è¾“å‡ºå¤§å˜ï¼‰ï¼Œè¿™äº›æ€§è´¨ä¿è¯äº†â€œåªçœ‹æŒ‡çº¹å°±èƒ½æ£€æŸ¥å†…å®¹æ˜¯å¦è¢«ç¯¡æ”¹â€ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<ul>
<li>æŠŠâ€œè½¬è´¦ç»™å¼ ä¸‰ 10 BTCâ€æ–‡æœ¬å½“ä½œè¾“å…¥ï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼ H1ã€‚å“ªæ€•åªæ˜¯å·å·æŠŠâ€œ10â€æ”¹æˆâ€œ11â€ï¼Œé‡æ–°ç®—å‡ºçš„å“ˆå¸Œ H2 ä¸ H1 å®Œå…¨ä¸åŒã€‚äºæ˜¯ç½‘ç»œé‡Œçš„èŠ‚ç‚¹åªè¦å¯¹æ”¶åˆ°çš„äº¤æ˜“é‡æ–°ç®—ä¸€éå“ˆå¸Œï¼Œå°±èƒ½ç«‹åˆ»å‘ç°æ•°æ®æœ‰æ²¡æœ‰è¢«åŠ¨è¿‡æ‰‹è„šã€‚</li>
</ul>
<h3 data-id="heading-2">ä¸‰ã€å“ˆå¸Œåœ¨æ¯”ç‰¹å¸ä¸­çš„å…·ä½“ç”¨æ³•</h3>
<ul>
<li>è®²åˆ°æ¯”ç‰¹å¸æ—¶ï¼Œè€å¸ˆæŠŠå“ˆå¸Œå‡½æ•°å˜æˆä¸€ä¸ªâ€œå‘½åå·¥å…·â€ï¼šæ¯ç¬”äº¤æ˜“ã€æ¯ä¸ªåŒºå—éƒ½é€šè¿‡å“ˆå¸Œå¾—åˆ°ä¸€ä¸ªâ€œåå­—â€ï¼Œè¿™ä¸ªåå­—é•¿åº¦å›ºå®šã€ä¾¿äºä¼ æ’­ï¼Œåˆå¾ˆéš¾å’Œåˆ«çš„æ•°æ®é‡å¤ï¼Œå› æ­¤éå¸¸é€‚åˆåœ¨ç‚¹å¯¹ç‚¹ç½‘ç»œä¸­å½“ä½œæ ‡è¯†ç¬¦ä½¿ç”¨ã€‚</li>
<li>æ­¤å¤–ï¼Œè¯¾ç¨‹è¿˜ä¼šæåˆ°ï¼šåŒºå—å¤´é‡ŒåŒ…å«ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼Œä»è€Œå½¢æˆä¸€æ¡å“ˆå¸Œé“¾ï¼›åŒºå—å†…éƒ¨ä¸ºäº†ä¸€æ¬¡æ€§æ¦‚æ‹¬æ‰€æœ‰äº¤æ˜“ï¼Œä¼šç”¨åˆ°æ›´å¤æ‚çš„ç»“æ„ï¼ˆé»˜å…‹å°”æ ‘ï¼‰ï¼Œè®©ä¸€ä¸ªå“ˆå¸Œå€¼å°±èƒ½ä»£è¡¨â€œè¿™ä¸€æ•´ä¸ªäº¤æ˜“é›†åˆâ€ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<ul>
<li>æŸä¸€åŒºå—åŒ…å« 2000 ç¬”äº¤æ˜“ã€‚é€šè¿‡é»˜å…‹å°”æ ‘æŠŠè¿™ 2000 æ¡è®°å½•é€å±‚å“ˆå¸Œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªâ€œæ€»å“ˆå¸Œâ€å†™åœ¨åŒºå—å¤´ä¸­ã€‚ä»¥åä»»ä½•äººè‹¥æƒ³è¯æ˜â€œæŸç¬”äº¤æ˜“ç¡®å®åŒ…å«åœ¨è¿™ä¸ªåŒºå—å†…â€ï¼Œåªè¦æä¾›ä¸€æ¡ä»è¿™ç¬”äº¤æ˜“åˆ°æ ‘æ ¹çš„å“ˆå¸Œè·¯å¾„å³å¯ï¼ŒéªŒè¯æ•ˆç‡éå¸¸é«˜ã€‚</li>
</ul>
<h3 data-id="heading-3">å››ã€å…¬é’¥å¯†ç ä¸æ•°å­—ç­¾åï¼šè°åœ¨èŠ±é’±</h3>
<ul>
<li>åœ¨è§£å†³â€œè°åœ¨èŠ±é’±â€ä¹‹å‰ï¼Œè€å¸ˆå…ˆä»‹ç»å…¬é’¥å¯†ç ä½“ç³»ï¼šæ¯ä¸ªäººæœ‰ä¸€å¯¹å¯†é’¥ï¼Œç§é’¥è‡ªå·±ä¿å­˜ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ã€‚ç”¨ç§é’¥åšçš„æ•°å­¦è¿ç®—ï¼ˆç­¾åï¼‰ï¼Œåªæœ‰å¯¹åº”å…¬é’¥èƒ½éªŒè¯ï¼›åä¹‹ï¼Œæ²¡æœ‰ç§é’¥çš„äººæ— æ³•ä¼ªé€ åŒæ ·çš„ç»“æœã€‚</li>
<li>è¯¾ç¨‹ä»¥â€œç­¾åâ€è€Œä¸æ˜¯â€œåŠ å¯†â€æ¥è§£é‡Šæ¯”ç‰¹å¸çš„ç”¨æ³•ï¼šç”¨æˆ·ç”¨è‡ªå·±çš„ç§é’¥å¯¹äº¤æ˜“å†…å®¹ç­¾åï¼Œæ‰€æœ‰èŠ‚ç‚¹åˆ©ç”¨å…¬å¼€çš„å…¬é’¥æ¥æ£€éªŒè¿™ç¬”äº¤æ˜“æ˜¯ä¸æ˜¯ç”±è¯¥ç”¨æˆ·å‘èµ·ï¼Œä»è€Œå®ç°â€œè°å¯¹è½¬è´¦è´Ÿè´£â€çš„è®¤è¯å’Œä¸å¯å¦è®¤æ€§ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<ul>
<li>ä½ è¦æŠŠ 1 BTC è½¬ç»™å°ç‹ã€‚ä½ æ„é€ ä¸€æ¡äº¤æ˜“ä¿¡æ¯ï¼šâ€œä»æˆ‘çš„æŸä¸ª UTXO è½¬å‡º 1 BTC ç»™å°ç‹çš„åœ°å€â€ï¼Œç„¶åç”¨ç§é’¥å¯¹è¿™æ¡æ¶ˆæ¯åšæ•°å­—ç­¾åã€‚å…¨ç½‘èŠ‚ç‚¹æ”¶åˆ°åï¼Œç”¨ä½ çš„å…¬é’¥éªŒè¯ç­¾åã€‚å¦‚æœç­¾åå¯¹å¾—ä¸Šï¼Œè¯´æ˜ç¡®å®æ˜¯ä½ å‘çš„ï¼Œè€Œä¸æ˜¯åˆ«äººå†’å……ä½ ä¹±èŠ±ä½ çš„é’±ã€‚</li>
</ul>
<h3 data-id="heading-4">äº”ã€æ¯”ç‰¹å¸åœ°å€ã€ç§é’¥ã€å…¬é’¥çš„å…³ç³»</h3>
<ul>
<li>è€å¸ˆä¼šè¯´æ˜ï¼šæ™®é€šç”¨æˆ·çœ‹åˆ°çš„æ˜¯â€œåœ°å€â€ï¼Œä½†åº•å±‚æ˜¯ä»å…¬é’¥ç»è¿‡ä¸€ç³»åˆ—å“ˆå¸Œå’Œç¼–ç å¾—åˆ°çš„ç»“æœï¼Œè¿™æ ·åšæ—¢ç¼©çŸ­äº†é•¿åº¦ï¼Œåˆé€šè¿‡å¤šæ¬¡å“ˆå¸Œå¢åŠ äº†å®‰å…¨æ€§å’Œå®¹é”™æ€§ã€‚</li>
<li>è¿™ä¸€è®¾è®¡å¸¦æ¥ä¸¤ä¸ªæ•ˆæœï¼šä¸€æ–¹é¢ï¼Œæ‹¿åˆ°åœ°å€æ— æ³•åæ¨å‡ºå…¬é’¥ç”šè‡³ç§é’¥ï¼Œä¿æŠ¤äº†ç”¨æˆ·å®‰å…¨ï¼›å¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦ç”¨æˆ·ç”¨å¯¹åº”ç§é’¥ç­¾åï¼Œç½‘ç»œå°±èƒ½é€šè¿‡åœ°å€æ˜ å°„å‡ºå…¬é’¥ï¼Œå†è¿›ä¸€æ­¥éªŒè¯ç­¾åæ˜¯å¦æœ‰æ•ˆï¼Œä»è€ŒæŠŠâ€œåœ°å€â€å’Œâ€œæ§åˆ¶æƒâ€å¯¹åº”èµ·æ¥ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š</p>
<ul>
<li>å¯ä»¥æŠŠåœ°å€ç†è§£æˆâ€œé“¶è¡Œå¡å·â€ï¼Œå…¬é’¥ç±»ä¼¼â€œå¡çš„æŸäº›å…¬å¼€å‚æ•°â€ï¼Œç§é’¥åˆ™æ˜¯â€œåªæœ‰ä½ çŸ¥é“çš„ PINï¼‹ç­¾åè®¾å¤‡â€ã€‚åˆ«äººçœ‹åˆ°ä½ çš„åœ°å€å¯ä»¥ç»™ä½ è½¬è´¦ï¼Œä½†æ— æ³•ä»åœ°å€æ¨å›ä½ çš„ç§é’¥ï¼›åªæœ‰ä½ èƒ½å¯¹â€œä»è¿™ä¸ªåœ°å€èŠ±é’±â€çš„äº¤æ˜“ç­¾å­—ã€‚</li>
</ul>
<h3 data-id="heading-5">å…­ã€ä¸¤å¤§å·¥å…·å¦‚ä½•å…±åŒä¿è¯å®‰å…¨</h3>
<ul>
<li>è¯¾ç¨‹æœ€åæŠŠå“ˆå¸Œå’Œæ•°å­—ç­¾åä¸²è”èµ·æ¥ï¼šå“ˆå¸Œä¿è¯äº†â€œè´¦æœ¬ä¸Šå†™çš„å†…å®¹ä¸€æ—¦ç¡®å®šï¼Œä»»ä½•å¾®å°ç¯¡æ”¹éƒ½ä¼šæš´éœ²â€ï¼›æ•°å­—ç­¾åä¿è¯äº†â€œåªæœ‰çœŸæ­£æ‰€æœ‰è€…æ‰èƒ½å‘èµ·æœ‰æ•ˆçš„è½¬è´¦â€ã€‚åˆåœ¨ä¸€èµ·ï¼Œå°±æ„æˆäº†ä¸€ä¸ªæ— éœ€ä¸­å¿ƒæœºæ„ä¹Ÿèƒ½ç»´æŒçš„â€œå…¬å¼€ã€å¯éªŒè¯çš„è´¦æœ¬ç³»ç»Ÿâ€ã€‚</li>
<li>è¿›ä¸€æ­¥è®²ï¼Œæ¯”ç‰¹å¸é€šè¿‡â€œå“ˆå¸Œé“¾â€è®©åŒºå—å½¼æ­¤æ†ç»‘ï¼Œé€šè¿‡â€œå…¨ç½‘èŠ‚ç‚¹éªŒè¯ç­¾åâ€æ¥è¿‡æ»¤éæ³•äº¤æ˜“ï¼Œå†åœ¨åç»­ç« èŠ‚ç”¨å·¥ä½œé‡è¯æ˜ã€å…±è¯†åè®®ç­‰æœºåˆ¶è§£å†³â€œè°æ¥å†™ä¸‹ä¸€ä¸ªåŒºå—â€çš„é—®é¢˜ï¼Œè¿™ä¸€è®²åˆ™æ˜¯åé¢æ‰€æœ‰æœºåˆ¶çš„å¯†ç å­¦åœ°åŸºã€‚</li>
</ul>
<h2 data-id="heading-6">æ¦‚å¿µæ€»ç»“</h2>
<p>è¿™ä¸€è®²çš„å†…å®¹å¯ä»¥æŒ‰ä½ è¯´çš„ä¸‰å—æ¥è®°ï¼Œæ—¢æœ‰æ¦‚å¿µï¼Œä¹Ÿæœ‰å†…åœ¨ç»“æ„ï¼Œè¿˜æœ‰â€œä¸ºå•¥è¿™å¥—ä¸œè¥¿èƒ½è·‘èµ·æ¥â€çš„ç›´è§‰ã€‚</p>
<h3 data-id="heading-7">ä¸€ã€è®°æ¦‚å¿µï¼šå‡ ä¸ªæ ¸å¿ƒå¯†ç å­¦ç§¯æœ¨</h3>
<ul>
<li>å“ˆå¸Œå‡½æ•°ï¼šè¾“å…¥ä»»æ„é•¿åº¦æ•°æ®ï¼Œè¾“å‡ºå›ºå®šé•¿åº¦â€œæŒ‡çº¹â€ï¼Œç‰¹ç‚¹æ˜¯å•å‘ï¼ˆä¸èƒ½åæ¨åŸæ–‡ï¼‰ã€æŠ—ç¢°æ’ï¼ˆå‡ ä¹æ‰¾ä¸åˆ°ä¸¤ä¸ªä¸åŒè¾“å…¥åŒå“ˆå¸Œï¼‰ã€é›ªå´©æ•ˆåº”ï¼ˆæ”¹ä¸€ä½ç»“æœå¤§å˜ï¼‰ï¼Œåœ¨æ¯”ç‰¹å¸é‡Œç”¨æ¥ç»™äº¤æ˜“ã€åŒºå—ã€äº¤æ˜“é›†åˆâ€œèµ·åå­—â€å’Œåšå®Œæ•´æ€§æ ¡éªŒã€‚</li>
<li>å…¬é’¥ / ç§é’¥ï¼šæ¯ä¸ªç”¨æˆ·æœ‰ä¸€å¯¹å¯†é’¥ï¼Œç§é’¥è‡ªå·±ä¿ç®¡ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ï¼›ä»»ä½•äººèƒ½ç”¨å…¬é’¥éªŒè¯â€œè¿™æ¡æ¶ˆæ¯ç¡®å®ç”±å¯¹åº”ç§é’¥ç­¾è¿‡åâ€ï¼Œä½†ä¸èƒ½ä»å…¬é’¥ç®—å‡ºç§é’¥ã€‚</li>
<li>æ•°å­—ç­¾åï¼šç”¨ç§é’¥å¯¹â€œå…·ä½“çš„äº¤æ˜“å†…å®¹â€åšæ•°å­¦è¿ç®—ï¼Œç”Ÿæˆä¸€æ®µç­¾åï¼›åˆ«äººæ‹¿åˆ°äº¤æ˜“å†…å®¹å’Œç­¾åï¼Œç”¨å…¬é’¥ä¸€éªŒå°±çŸ¥é“æ˜¯ä¸æ˜¯ä½ ç­¾çš„ï¼Œæ—¢å¯ä»¥é˜²ä¼ªé€ ï¼Œåˆè®©ä½ äº‹åä¸èƒ½å¦è®¤è‡ªå·±å‘è¿‡è¿™ç¬”äº¤æ˜“ã€‚</li>
<li>åœ°å€ï¼šå¯¹å…¬é’¥åšå¤šæ¬¡å“ˆå¸Œå’Œç¼–ç å¾—åˆ°çš„çŸ­å­—ç¬¦ä¸²ï¼Œç”¨æ¥å½“â€œæ”¶æ¬¾è´¦å·â€ï¼›åˆ«äººçœ‹åˆ°åœ°å€å¯ä»¥ç»™ä½ æ‰“å¸ï¼Œä½†æ—¢ä¸èƒ½ä»åœ°å€æ¨å‡ºç§é’¥ï¼Œä¹Ÿä¸èƒ½å•å‡­åœ°å€èŠ±ä½ çš„é’±ï¼Œå¿…é¡»é…åˆç§é’¥ç­¾åæ‰è¡Œã€‚</li>
</ul>
<p>å°ä¾‹å­ï¼š</p>
<ul>
<li>ä½ å†™äº†ä¸€æ¡æ¶ˆæ¯ï¼šâ€œç»™å¼ ä¸‰ 1 BTCâ€ï¼Œç®—å‡ºå“ˆå¸Œæ˜¯ H1ï¼Œåæ¥æœ‰äººæŠŠ 1 æ”¹æˆ 2ï¼Œå†ç®—ä¸€æ¬¡å˜æˆ H2ã€‚ç”±äº H1â‰ H2ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½èƒ½ä¸€çœ¼çŸ¥é“ä¸­é—´æœ‰äººåŠ¨è¿‡æ‰‹è„šã€‚</li>
<li>ä½ ç”¨ç§é’¥å¯¹â€œä»åœ°å€ A ç»™åœ°å€ B 1 BTCâ€ç­¾åï¼Œå¾—åˆ° Sigã€‚å…¨ç½‘èŠ‚ç‚¹åªéœ€æ‹¿äº¤æ˜“å†…å®¹ + Sig + ä½ çš„å…¬é’¥ï¼Œå°±èƒ½éªŒè¯æ˜¯å¦çœŸæ˜¯ä½ ç­¾çš„ï¼Œè€Œä¸æ˜¯åˆ«äººä¼ªé€ çš„ã€‚</li>
</ul>
<h3 data-id="heading-8">äºŒã€è®°å…³ç³»ï¼šäº¤æ˜“ã€ç­¾åä¸å“ˆå¸Œé“¾</h3>
<ul>
<li>äº¤æ˜“å’Œç­¾åçš„ç»‘å®šï¼šä¸€ç¬”æ¯”ç‰¹å¸äº¤æ˜“é‡Œï¼Œå†™æ¸…æ¥šâ€œèŠ±æ‰çš„æ˜¯å“ªäº›ä¹‹å‰æ”¶åˆ°çš„å¸ã€è¦è½¬ç»™è°ã€è½¬å¤šå°‘â€ï¼Œç„¶åå¯¹â€œè¿™æ•´æ¡æ¶ˆæ¯â€åšæ•°å­—ç­¾åï¼›å› ä¸ºç­¾åå’Œå…·ä½“å†…å®¹å¼ºç»‘å®šï¼Œä»»ä½•äººæƒ³æ”¹é‡‘é¢ã€æ”¹æ”¶æ¬¾äººï¼Œéƒ½ä¼šå¯¼è‡´åŸæ¥çš„ç­¾åç«‹å³å¤±æ•ˆï¼Œåªèƒ½é‡æ–°è®©æŒæœ‰ç§é’¥çš„äººå†ç­¾ä¸€æ¬¡ã€‚</li>
<li>åŒºå—å’Œå“ˆå¸Œçš„ç»‘å®šï¼šæ¯ä¸ªåŒºå—é™¤äº†äº¤æ˜“ï¼Œè¿˜åŒ…å«ä¸Šä¸€ä¸ªåŒºå—å¤´çš„å“ˆå¸Œå€¼ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¦‚æœä½ æ”¹åŠ¨å†å²ä¸Šä»»ä½•ä¸€ä¸ªåŒºå—çš„æ•°æ®ï¼Œå¯¹åº”å“ˆå¸Œå°±å˜äº†ã€åé¢æ‰€æœ‰åŒºå—é‡Œâ€œå¼•ç”¨çš„é‚£ä¸ªå“ˆå¸Œâ€ä¹Ÿä¼šé”™ï¼Œä»è€Œæ•´æ¡é“¾éƒ½éœ²é¦…ï¼Œå½¢æˆæ‰€è°“â€œå“ˆå¸Œé“¾â€ã€‚</li>
</ul>
<p>å°ä¾‹å­ï¼š</p>
<ul>
<li>A åœ¨ç¬¬ 100 å·åŒºå—é‡Œç»™ B è½¬äº† 1 BTCã€‚æœ‰äººæƒ³æŠŠè¿™æ¡è®°å½•æ”¹æˆâ€œè½¬ 10 BTCâ€ï¼Œé‚£ä¹ˆ 100 å·åŒºå—çš„å“ˆå¸Œä¼šå˜ï¼Œ101 å·åŒºå—é‡Œâ€œå‰ä¸€åŒºå—å“ˆå¸Œâ€å­—æ®µå°±ä¸å¯¹äº†ï¼Œå¿…é¡»è¿å¸¦ä¿®æ”¹ 101ã€102ã€103â€¦â€¦æ‰€æœ‰åç»­åŒºå—ï¼Œä»£ä»·å·¨å¤§ã€‚</li>
<li>ä¸€æ£µé»˜å…‹å°”æ ‘å¯ä»¥æŠŠå‡ åƒç¬”äº¤æ˜“â€œå‹ç¼©â€æˆä¸€ä¸ªå“ˆå¸Œæ ¹å†™å…¥åŒºå—å¤´ï¼Œåªè¦ä»»ä½•ä¸€ç¬”äº¤æ˜“è¢«æ”¹åŠ¨ï¼Œé‡æ–°è®¡ç®—å‡ºçš„æ ‘æ ¹å°±ä¸ä¸€è‡´ï¼Œè¯´æ˜åŒºå—è¢«åŠ¨è¿‡æ‰‹è„šã€‚</li>
</ul>
<h3 data-id="heading-9">ä¸‰ã€è®°ç›´è§‰ï¼šæ•°å­¦ï¼‹å¹¿æ’­ç½‘ç»œï¼å»ä¸­å¿ƒåŒ–ä¿¡ä»»</h3>
<ul>
<li>æ•°å­¦æ›¿ä»£äººæ²»ï¼šä¼ ç»Ÿé“¶è¡Œç³»ç»Ÿé‡Œï¼Œæ˜¯é“¶è¡Œè¿™ä¸ªä¸­å¿ƒæœºæ„å‘Šè¯‰ä½ â€œè¿™ç¬”è´¦æ˜¯çœŸçš„â€ï¼›åœ¨æ¯”ç‰¹å¸é‡Œï¼Œå“ˆå¸Œå’Œæ•°å­—ç­¾åä¿è¯â€œåªè¦å¼å­å¯¹ä¸Šï¼Œè¿™å°±æ˜¯åŸå§‹æŒå¸äººäº²è‡ªæˆæƒã€ä¸”è®°å½•æœªè¢«ç¯¡æ”¹â€ï¼Œä¸éœ€è¦ç›¸ä¿¡æŸä¸ªæœºæ„ï¼Œåªéœ€è¦ç›¸ä¿¡ç®—æ³•çš„éš¾è§£æ€§ã€‚</li>
<li>å¹¿æ’­ï¼‹å¤šæ•°éªŒè¯æ›¿ä»£å•ç‚¹è®°è´¦ï¼šæ¯ç¬”äº¤æ˜“å‘åˆ°å…¨ç½‘ï¼ŒèŠ‚ç‚¹å„è‡ªç”¨å…¬é’¥éªŒè¯ç­¾åã€ç”¨å“ˆå¸Œæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§ï¼›è°æ¥å†™å…¥ä¸‹ä¸€ä¸ªåŒºå—äº¤ç»™åé¢çš„å…±è¯†å’ŒæŒ–çŸ¿æœºåˆ¶ï¼Œä½†æ‰€æœ‰äººéƒ½ç”¨åŒä¸€å¥—æ•°å­¦è§„åˆ™æ¥åˆ¤æ–­â€œå“ªæ¡é“¾ã€å“ªäº›äº¤æ˜“æ˜¯æœ‰æ•ˆçš„â€ï¼Œäºæ˜¯å½¢æˆä¸€ç§â€œå…¬å…±è´¦æœ¬â€ï¼Œä»»ä½•äººéƒ½èƒ½æ£€éªŒã€æ²¡äººèƒ½è½»æ˜“ä½œå‡ã€‚</li>
</ul>
<p>ç›´è§‰ä¾‹å­ï¼š</p>
<ul>
<li>æƒ³è±¡ä¸€ç¾¤äººå›´æˆä¸€åœˆè®°è´¦ï¼Œä»»ä½•äººéƒ½å¯ä»¥å¤§å£°å®£å¸ƒâ€œæˆ‘ç»™å°ç‹ 1 BTCâ€ï¼›ä½†åªæœ‰ä½ èƒ½æ‹¿å‡ºé’ˆå¯¹è¿™å¥è¯çš„æ­£ç¡®æ•°å­—ç­¾åï¼Œåˆ«äººæ— æ³•ä¼ªé€ ä½ çš„â€œå£°éŸ³â€ï¼Œè€Œæ‰€æœ‰äººéƒ½ç”¨åŒæ ·çš„å“ˆå¸Œå’Œç­¾åè§„åˆ™æ¥åˆ¤æ–­è¿™å¥è¯æ˜¯å¦è¢«ç¯¡æ”¹ã€æ˜¯å¦çœŸæ˜¯ä½ è¯´çš„ã€‚</li>
<li>ä¹…è€Œä¹…ä¹‹ï¼Œè¿™ç¾¤äººæŒ‰ç…§ç»Ÿä¸€è§„åˆ™é€‰å‡ºâ€œæœ¬è½®è®°è´¦ä»£è¡¨â€å†™ä¸‹ä¸€ä¸ªåŒºå—ï¼›ä½†å³ä¾¿å¦‚æ­¤ï¼Œä»–ä¹Ÿæ”¹ä¸äº†æ—¢æœ‰è®°å½•ï¼Œå› ä¸ºä¸€æ”¹å°±ä¼šç ´åå“ˆå¸Œé“¾ï¼Œè¢«å…¶ä»–äººç«‹å³è¯†ç ´ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0 åˆ° 1ï¼Œå¾®è°ƒä¸€ä¸ªè‡ªå·±ä¸“å±çš„å¤§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7579832417747763251</link>    <guid>https://juejin.cn/post/7579832417747763251</guid>    <pubDate>2025-12-04T09:38:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579832417747763251" data-draft-id="7579832417747730483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0 åˆ° 1ï¼Œå¾®è°ƒä¸€ä¸ªè‡ªå·±ä¸“å±çš„å¤§æ¨¡å‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-04T09:38:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0 åˆ° 1ï¼Œå¾®è°ƒä¸€ä¸ªè‡ªå·±ä¸“å±çš„å¤§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:38:59.000Z" title="Thu Dec 04 2025 09:38:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c8cea0e80fa41f488ff423dd867a66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=MCq%2BzR%2F2ZVwKSCytrtDfCIvcU%2Bg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<h4 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯å¾®è°ƒå¤§æ¨¡å‹ï¼Ÿ</h4>
<p>å¾®è°ƒï¼ˆFine-tuningï¼‰å¤§æ¨¡å‹ï¼Œå°±åƒæ˜¯ç»™ä¸€ä¸ªå·²ç»å­¦å¯Œäº”è½¦çš„å¤§è„‘ï¼ˆé¢„è®­ç»ƒçš„åŸºç¡€å¤§æ¨¡å‹ï¼‰ï¼Œ<strong>è¿›è¡Œä¸€æ¬¡é’ˆå¯¹æ€§çš„â€œä¸“ä¸šå¼ºåŒ–è®­ç»ƒâ€</strong> ã€‚åŸºç¡€å¤§æ¨¡å‹é€šè¿‡æµ·é‡æ•°æ®å­¦ä¹ äº†é€šç”¨çš„è¯­è¨€è§„å¾‹å’Œä¸–ç•ŒçŸ¥è¯†ï¼Œä½†å¯¹äºç‰¹å®šé¢†åŸŸã€ç‰¹å®šä»»åŠ¡ï¼Œå®ƒå¯èƒ½è¿˜ä¸å¤Ÿâ€œç²¾é€šâ€ã€‚å¾®è°ƒå°±æ˜¯åˆ©ç”¨å°‘é‡ã€é«˜è´¨é‡çš„é¢†åŸŸæ•°æ®ï¼Œåœ¨åŸºç¡€æ¨¡å‹ä¹‹ä¸Šç»§ç»­è®­ç»ƒï¼Œè®©æ¨¡å‹æ›´å¥½åœ°é€‚åº”æ–°çš„ä»»åŠ¡æˆ–é¢†åŸŸã€‚<strong>ä¹Ÿå°±æ˜¯è®©å¤§æ¨¡å‹ä»ä¸€ä¸ªå¹¿åº¦å¾ˆå¼ºçš„é€šæ‰ï¼Œåœ¨æŸä¸ªé¢†åŸŸæ ‘ä¸Šçš„æŠ€èƒ½åŠ å¼ºå˜æˆä¸€ä½ä¸“æ‰ã€‚</strong></p>
<p>å°¤å…¶å¸¸ç”¨çš„LoRAï¼ˆLow-Rank Adaptationï¼‰ç­‰é«˜æ•ˆå¾®è°ƒæ–¹æ³•ï¼Œé€šè¿‡åªè°ƒæ•´æ¨¡å‹ä¸­å¾ˆå°‘ä¸€éƒ¨åˆ†å‚æ•°æˆ–æ·»åŠ å°‘é‡é¢å¤–å±‚ï¼Œå°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœï¼Œå¤§å¤§é™ä½äº†æ‰€éœ€çš„è®¡ç®—èµ„æºå’Œæ—¶é—´ï¼Œè®©æ¨¡å‹â€œå­¦å¾—åˆå¿«åˆä¸“â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45bfb12a640f480e87fc0ca9a4f9f529~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=cnYUGEEqFXRSeD%2FBTREE8pmW1PI%3D" alt="" loading="lazy"/></p>
<p>Loraå¾®è°ƒåŸç†ï¼Œåœ¨å¤§æ¨¡å‹æƒé‡æ–‡ä»¶çš„è¾“å‡ºæ—¶ï¼Œå†æ·»åŠ ä¸€ä¸ªå¯è®­ç»ƒçš„ä½ç§©çŸ©é˜µ</p>
<h4 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆéœ€è¦å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹</h4>
<p>é¢„è®­ç»ƒçš„å¤§è¯­è¨€æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œèƒ½ç†è§£å’Œç”Ÿæˆå„ç§æ–‡æœ¬ï¼Œä½†å®ƒä»¬æ˜¯â€œé€šæ‰â€ï¼Œ<strong>ç¼ºä¹å¯¹ç‰¹å®šé¢†åŸŸç»†è‡´å…¥å¾®çš„ç†è§£æˆ–å®Œæˆç‰¹å®šå¤æ‚ä»»åŠ¡çš„èƒ½åŠ›</strong>ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªé«˜åº¦ä¸“ä¸šçš„è¡Œä¸šï¼ˆå¦‚åŒ»ç–—ã€æ³•å¾‹ã€é‡‘èæˆ–ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“ï¼‰ä¸­ï¼Œæ¨¡å‹å¯èƒ½ä¸ç†è§£è¡Œä¸šé»‘è¯ã€å¤„ç†ä¸äº†ç‰¹æœ‰çš„æ–‡æ¡£æ ¼å¼æˆ–æ— æ³•ç»™å‡ºåŸºäºå†…éƒ¨è§„ç« çš„å‡†ç¡®å›ç­”ã€‚</p>
<p>é€šè¿‡å¾®è°ƒï¼Œ<strong>æˆ‘ä»¬å¯ä»¥ç”¨è¯¥é¢†åŸŸçš„ç‰¹æœ‰æ•°æ®å¯¹å…¶è¿›è¡Œâ€œå®šåˆ¶åŒ–â€è®­ç»ƒï¼Œè®©æ¨¡å‹æŒæ¡é¢†åŸŸå†…çš„ä¸“ä¸šçŸ¥è¯†ã€æœ¯è¯­å’Œé€»è¾‘ï¼Œä»è€Œä½¿å…¶æˆä¸ºè¯¥é¢†åŸŸçš„â€œä¸“å®¶â€</strong> ï¼Œèƒ½å¤Ÿæ›´å‡†ç¡®ã€é«˜æ•ˆåœ°å¤„ç†å‚ç›´é¢†åŸŸçš„å¤æ‚é—®é¢˜ï¼Œæä¾›æ›´å…·ä»·å€¼çš„æœåŠ¡ã€‚</p>
<h2 data-id="heading-3">äºŒã€æ•°æ®é›†å‡†å¤‡</h2>
<h4 data-id="heading-4">2.1 é¢†åŸŸå¤§æ¨¡å‹å¾®è°ƒ</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨æ‚¨ç†Ÿæ‚‰çš„æŸä¸ªè¡Œä¸šæˆ–å…¬å¸å†…éƒ¨ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ²‰æ·€äº†æ— æ•°å®è´µçš„çŸ¥è¯†å’Œç»éªŒã€‚è¿™äº›ä¿¡æ¯é€šå¸¸é›¶æ•£åœ°å­˜å‚¨åœ¨å„ç§PDFã€Wordæ–‡æ¡£ç”šè‡³æ‰«æä»¶ä¸­ï¼Œå®ƒä»¬æ˜¯é¢†åŸŸçš„ç²¾åï¼Œå´ä¹Ÿå½¢æˆäº†éš¾ä»¥é€¾è¶Šçš„â€œçŸ¥è¯†å­¤å²›â€ã€‚æƒ³è¦ä»ä¸­å¿«é€Ÿå‡†ç¡®åœ°æ‰¾åˆ°æ‰€éœ€çš„ä¿¡æ¯ï¼Œæˆ–æ˜¯ç†è§£æŸä¸ªå¤æ‚æ¦‚å¿µï¼Œ<strong>å¾€å¾€éœ€è¦è€—è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›</strong>ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´æ›´æ˜¯é—¨æ§›å¾ˆé«˜ã€‚</p>
<p>è¯•æƒ³ï¼Œå¦‚æœèƒ½æœ‰ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œå®ƒä¸ä»…èƒ½ç†è§£é€šç”¨è¯­è¨€ï¼Œæ›´èƒ½åƒä¸€ä½èµ„æ·±çš„é¢†åŸŸä¸“å®¶ä¸€æ ·ï¼Œé€å½»åœ°æŒæ¡å¹¶è¿ç”¨è¿™äº›ç‹¬æœ‰çš„å‚ç›´é¢†åŸŸçŸ¥è¯†ï¼Œéšæ—¶ä¸ºæ‚¨ç­”ç–‘è§£æƒ‘ï¼Œé‚£è¯¥å¤šå¥½ï¼Ÿè¿™æ­£æ˜¯é¢†åŸŸå¤§æ¨¡å‹å¾®è°ƒçš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨â€”â€”<strong>é€šè¿‡å°†é€šç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸ç‰¹å®šé¢†åŸŸçš„å®è´µæ•°æ®ç»“åˆï¼Œæˆ‘ä»¬å¯ä»¥æ‰“é€ å‡ºçœŸæ­£ç†è§£å¹¶èƒ½åº”ç”¨è¿™äº›çŸ¥è¯†çš„å‚ç›´é¢†åŸŸæ™ºèƒ½ä½“ã€‚</strong></p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œç”¨é¢†åŸŸå†…çŸ¥è¯†å¾®è°ƒåå¤§è¯­è¨€æ¨¡å‹ä¾¿èƒ½æ´¾ä¸Šç”¨åœºäº†ã€‚<strong>ä¸‹é¢æˆ‘å°†ä¼šä»æ•´ä½“æµç¨‹çš„è§’åº¦ï¼Œæ¢³ç†ä¸€éå¤§è¯­è¨€æ¨¡å‹å¾®è°ƒå…¨æµç¨‹çš„æ–¹æ³•è®ºï¼Œä»¥åŠå¼€æºå·¥å…·çš„ä½¿ç”¨ï¼Œä»è€Œå®ç°æ›´åŠ é«˜æ•ˆã€å®‰å…¨çš„æ¨¡å‹è®­ç»ƒä¸éƒ¨ç½²ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8eeaeeb30ddf475b9ac1dcad42c11b24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=wAoiOPYfl0GTSV5Sy0f3jfuVKMY%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡çš„æ€è·¯å±•ç¤ºï¼Œæ”¶é›†é¢†åŸŸçŸ¥è¯†æ–‡æ¡£â†’ç»Ÿä¸€è½¬æ¢ä¸ºMarkdownæ ¼å¼â†’æ„é€ å¾®è°ƒæ•°æ®é›†â†’å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹</p>
<p>å…³äºä¸€äº›æ›´åŠ å…·ä½“çš„æ“ä½œåç»­ä¼šé€æ¸å¡«å‘~</p>
<h4 data-id="heading-5">2.2 æ–‡æ¡£æ ¼å¼çš„ç»Ÿä¸€è½¬æ¢</h4>
<p>é€šå¸¸ï¼Œç”±äºè¡Œä¸šå†…å¤šå¹´çš„çŸ¥è¯†æ²‰æ·€ï¼Œå¾€å¾€ä¼šç•™å­˜å¤§é‡çš„æ–‡ä»¶æ‰«æä»¶ï¼Œä¸€äº›é—å¤±å¤šå¹´çš„wordï¼Œä¸ºäº†èƒ½è®©åç»­å¯¹è¿™äº›æ–‡æ¡£èƒ½è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ï¼Œ<strong>æˆ‘ä»¬éœ€è¦å°†ä»–ä»¬çš„æ ¼å¼ç»Ÿä¸€ä¸ºMarkdownæ ¼å¼</strong>ã€‚</p>
<p>Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œæ’ç‰ˆè¯­æ³•ç®€æ´ï¼Œè®©äººä»¬æ›´å¤šåœ°å…³æ³¨å†…å®¹æœ¬èº«è€Œéæ’ç‰ˆã€‚å®ƒä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œå¯ä¸HTMLæ··ç¼–ï¼Œå¯å¯¼å‡º HTMLã€PDFÂ ä»¥åŠæœ¬èº«çš„.mdÂ æ ¼å¼çš„æ–‡ä»¶ã€‚æ›´å¤šçš„ç›¸å…³çš„ä»‹ç»å¯ä»¥å‚è€ƒè¿™è¾¹çš„é“¾æ¥</p>
<p>Markdown åŸºæœ¬è¯­æ³• | Markdown æ•™ç¨‹markdown.com.cn/basic-syntax/</p>
<p>è¿™è¾¹æˆ‘ä»¥ä¸€ä¸ªå›½äº§çš„å·¥å…· MinerUä¸ºä¾‹ï¼Œ<strong>è¿™ä¸ªå·¥å…·æ”¯æŒæœ¬åœ°ç¦»çº¿éƒ¨ç½²</strong>ï¼Œä¹Ÿå¯ä»¥åœ¨çº¿ä½¿ç”¨ï¼Œç¬”è€…ä½“éªŒä¸‹æ¥è¿™ä¸ªå·¥å…·å¯¹äºpdfçš„è¯†åˆ«ç›¸å½“çš„å¥½ï¼Œä½†æ˜¯å¯¹äºdocè¯†åˆ«è¿˜æ˜¯ä¸æ˜¯å¾ˆå¥½ã€‚å¦‚æœæœ‰éœ€è¦çš„è¯å¯ä»¥å°†docè½¬æ¢ä¸ºpdfå†ä½¿ç”¨MinerUè¿›è¡Œè¯†åˆ«ã€‚</p>
<p>MinerUmineru.net/</p>
<p>è¿™è¾¹æˆ‘ä»¥ä¸€ç¯‡pdfæ ¼å¼çš„è®ºæ–‡ä¸ºä¾‹ï¼Œå³ä¾§æ˜¯è¯†åˆ«å‡ºæ¥çš„Markdowné¢„è§ˆæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºæ¥å¯¹äº<strong>æ–‡å­—å’Œå…¬å¼</strong>çš„è¯†åˆ«è¿˜æ˜¯ç›¸å½“å‡†ç¡®çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ad67d866f0b4887b35248678acdf1c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=%2FEIqDxxQADPJvVjP0Xe6GnarjgE%3D" alt="" loading="lazy"/></p>
<p>windowså®¢æˆ·ç«¯å¯ä»¥åœ¨çº¿è¯†åˆ«ï¼Œä½†æ˜¯ç›®å‰åªæ”¯æŒå¯¼å‡ºLatexï¼Œdocxï¼ŒHTMLæ ¼å¼çš„æ–‡ä»¶</p>
<p>å¦‚æœæƒ³è¦å¯¼å‡ºMarkdownæ–‡ä»¶åˆ°æœ¬åœ°ï¼Œå¯ä»¥åœ¨æœ¬åœ°æœ¬åœ°éƒ¨ç½²ä¸‹MinerUï¼Œæˆ–è€…ç›´æ¥åœ¨é­”æ­ç¤¾åŒºçš„åˆ›ç©ºé—´è¿›è¡Œä½“éªŒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f4252255a294a57b0f0cdb2ce2fdd6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=OxIg2ZU3YiqqbzTDoZpje%2FlFRvY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6"/>
<h4 data-id="heading-7">2.3 æ„å»ºå¾®è°ƒæ•°æ®é›†</h4>
<p>ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†markdownæ ¼å¼çš„æ•°æ®æ–‡ä»¶ï¼Œä½†æ˜¯è¿™äº›æ•°æ®ä»ç„¶ä¸èƒ½ç›´æ¥ç”¨æ¥å¾®è°ƒå¤§æ¨¡å‹ã€‚<strong>å› ä¸ºå¤§æ¨¡å‹æ‰€å®Œæˆçš„ä»»åŠ¡ï¼Œæ˜¯é€šè¿‡é—®ç­”çš„å½¢å¼å®ç°çš„ã€‚</strong> ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡æ¡£çš„çŸ¥è¯†ç‚¹å…¨éƒ½å˜æˆä¸€é—®ä¸€ç­”çš„å½¢å¼æ‰èƒ½è¿›è¡Œå¾®è°ƒã€‚æ—©æœŸçš„æ•°æ®é›†æ„é€ æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶ï¼Œé‡å¤æ€§çš„å·¥ä½œï¼Œéœ€è¦äººç±»å»è¿›è¡Œä¸€æ­¥æ­¥åœ°æ„é€ é—®é¢˜ï¼Œå¹¶ä¸”æ ¹æ®æ–‡æ¡£çš„å†…å®¹è¿›è¡Œè§£ç­”ï¼Œä½†ä¹Ÿæ­£æ˜¯è¿™äº›å‰äººçš„ä¸æ–­åŠªåŠ›ï¼Œå †å‡ºäº†ç°åœ¨å¤§è¯­è¨€æ¨¡å‹çš„ç¹è£ã€‚</p>
<p>åœ¨å½“å‰çš„AIæ°´å¹³ä¸‹ï¼Œ<strong>è®©å¤§è¯­è¨€æ¨¡å‹è¾…åŠ©å®ç°é—®ç­”å¯¹çš„æ„é€ </strong>å·²ç»æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ç­–ç•¥äº†ã€‚è¿™è¾¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå›½äº§å¼€æºå·¥å…·Easy-datasetè¿›è¡Œå¤„ç†ã€‚</p>
<p>easy-dataset/README.zh-CN.md at main Â· ConardLi/easy-datasetgithub.com/ConardLi/easy-dataset/blob/main/README.zh-CN.md</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a54725eead84d739a61c134e39af9de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=%2BbkIXtbm8Q2wii%2BBz71uh2ERoSw%3D" alt="" loading="lazy"/></p>
<p>Easy-datasetå·¥å…·æµç¨‹ç¤ºæ„</p>
<p>åœ¨å¤„ç†æ–‡æ¡£ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªåŸºç¡€çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œè¿™é‡Œæˆ‘ä»¬<strong>ä½¿ç”¨ollamaéƒ¨ç½²qwen2.5-7b</strong>æ¨¡å‹ï¼Œå…·ä½“çš„æ“ä½œå¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥~</p>
<p>Ollamaä½¿ç”¨æŒ‡å—ã€è¶…å…¨ç‰ˆã€‘ - çŸ¥ä¹zhuanlan.zhihu.com/p/704951717</p>
<p>æ€»çš„æ¥è¯´ï¼ŒEasy-dataseté€šè¿‡æˆ‘ä»¬ä¸Šä¼ çš„Markdownæ–‡ä»¶ï¼Œå°†æ–‡æœ¬å†…å®¹è¿›è¡Œåˆ†å‰²ï¼Œä¹‹åè®©å¤§è¯­è¨€æ¨¡å‹å¯¹æ¯ä¸ªåˆ†å‰²çš„ç‰‡æ®µè¿›è¡Œæé—®ï¼Œåœ¨ç”Ÿæˆæ‰€æœ‰çš„é—®é¢˜ä¹‹åï¼Œå†åˆ©ç”¨ç›¸å…³çš„ç‰‡æ®µä¸ç”Ÿæˆçš„é—®é¢˜å¯¹å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæé—®ï¼Œä»è€Œå®ç°äº†å°†æ–‡æ¡£çŸ¥è¯†å˜æˆé—®ç­”å¯¹çš„å½¢å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56ceffa0bb7940eda9b4c54072f61fda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=uIWNBStvm34VCExVQZg8vmoO5TQ%3D" alt="" loading="lazy"/></p>
<p>ä¸Šä¼ Markdownä¹‹åå¯¹æ–‡æ¡£è¿›è¡Œäº†åˆ‡åˆ†ï¼Œæ€»å…±è¢«åˆ†æˆäº†33ä¸ªåˆ‡ç‰‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bc92c309c354447964f2c7ec76dc1f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=adFO88Sgkjg9xsFNRVyXriN0S58%3D" alt="" loading="lazy"/></p>
<p>æ€»å…±ç”Ÿæˆäº†173ä¸ªé—®ç­”å¯¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7167b5eca834bcc99b722cbc5002ec9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=YkAyifBIplW2K10wKwB6R2y6D3I%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å¼€å…¶ä¸­ä¸€ä¸ªé—®ç­”å¯¹ï¼Œæ•ˆæœå¦‚å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b0d9827d30d4a50864f2eae654c8365~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=VXi00J3HTIKZXBMRe1b1D2769y0%3D" alt="" loading="lazy"/></p>
<p>ä¸Šé¢é—®ç­”å¯¹çš„åŸæ–‡å†…å®¹å¦‚ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ¨¡å‹å¯¹äºçŸ¥è¯†ç‚¹çš„æå–è¿˜æ˜¯ç›¸å½“å‡†ç¡®ä¸”æœ‰ä»·å€¼çš„</p>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ç›´æ¥å¯¼å‡ºå¾®è°ƒæ•°æ®é›†ä¾¿å¯ä»¥å¼€å§‹å¾®è°ƒã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€ å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹</h2>
<h4 data-id="heading-9">3.1 æˆæœ¬ä¼°ç®—</h4>
<p>åœ¨æœ¬æ¬¡çš„æ¼”ç¤ºä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Qwen2.5-7B-Instructæ¨¡å‹ï¼Œæ¨¡å‹çš„å¤§å°ä¸º70äº¿å‚æ•°ï¼Œæƒé‡æ–‡ä»¶çº¦15GBã€‚åœ¨é»˜è®¤å‚æ•°ä¸‹ï¼Œåœ¨NVIDIA A100-PCIE-40GBæ˜¾å¡ä¸Šè¿›è¡Œå¾®è°ƒï¼Œå ç”¨19.79GBæ˜¾å­˜ã€‚<strong>ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦æ˜¾å¡æ˜¾å­˜å¤§äº19.79GBä¾¿å¯ä»¥å®Œå…¨å¤ç°æœ¬æ¬¡å®éªŒï¼Œä¾‹å¦‚4090 24GBä¹Ÿæ˜¯å¯ä»¥è¿è¡Œçš„ã€‚</strong></p>
<h4 data-id="heading-10">3.2 å¾®è°ƒå·¥å…·çš„éƒ¨ç½²</h4>
<p>ä¸ºäº†å¾®è°ƒå¤§è¯­è¨€æ¨¡å‹ï¼Œè¿™è¾¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨llamafactoryè¿›è¡Œå¾®è°ƒï¼ŒSwanlabè¿›è¡Œæ¨¡å‹è®­ç»ƒçš„ç›‘æµ‹ï¼Œç”±äº<strong>llamafactoryæ˜¯è‡ªå¸¦Swanlabé€‚é…çš„ï¼Œæ‰€ä»¥ä»…éœ€è¦åœ¨llamafactoryä¸­é…ç½®Swanlabç§˜é’¥å³å¯</strong>ã€‚</p>
<p>å…³äºllamafactoryçš„éƒ¨ç½²ï¼Œå¯ä»¥å‚è€ƒå…¶ä¸­å®˜æ–¹æ–‡æ¡£</p>
<p>å®‰è£… - LLaMA Factoryllamafactory.readthedocs.io/zh-cn/latest/getting_started/installation.html</p>
<p>å®‰è£…å®Œæˆåï¼ŒæŒ‰ç…§æ–‡æ¡£ä¸­çš„è¦æ±‚ï¼Œ<strong>å¯¼å…¥æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„æ•°æ®é›†åˆ°<code>data</code>æ–‡ä»¶å¤¹ä¸‹</strong>ï¼Œä¹‹åè®°å¾—<strong>åœ¨<code>data_info.json</code>è¿›è¡Œæ³¨å†Œ</strong>ï¼Œå¯åŠ¨llamafactoryä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥é¢„è§ˆæ•°æ®é›†äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5b6e0fcf3084fb58dde3f5f9c92a0c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=nK8K0ZNBGh%2BEwvuYoeOzJV%2FisOg%3D" alt="" loading="lazy"/></p>
<p>é¢„è§ˆæ•°æ®é›†ï¼Œç¡®ä¿é€‰ä¸­æ­£ç¡®çš„æ–‡ä»¶</p>
<h4 data-id="heading-11">3.3 å¯ç”¨è®­ç»ƒå‚æ•°çš„ç›‘æµ‹å·¥å…·</h4>
<p>ä¸ºäº†å®æ—¶ç›‘æµ‹è®­ç»ƒçš„çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨Swanlabä½œä¸ºä¸€ä¸ª<strong>è·Ÿè¸ªã€è®°å½•ã€æ¯”è¾ƒã€å’Œåä½œå®éªŒ</strong>çš„å¹³å°ï¼Œè¿™ä¸ªå·¥å…·æ”¯æŒå®æ—¶äº‘ç«¯åŒæ­¥è®­ç»ƒçš„å‚æ•°å˜åŒ–ã€‚å¯ä»¥åœ¨å®˜ç½‘æ³¨å†Œä¸€ä¸ªAPIï¼Œæ·»åŠ åˆ°llamafactoryä¸­å³å¯</p>
<p>SwanLabå®˜æ–¹æ–‡æ¡£ | å…ˆè¿›çš„AIå›¢é˜Ÿåä½œä¸æ¨¡å‹åˆ›æ–°å¼•æ“docs.swanlab.cn/</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fdb71d8cbd540d8b3470efce40d3cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=UiIA6fNVidPNyzcdM2uygZpJdwA%3D" alt="" loading="lazy"/></p>
<p>llamafactoryä¸­å¯ç”¨swanlab</p>
<p>é…ç½®å¥½å‚æ•°åä¾¿å¯ä»¥æ„‰å¿«åœ°å¼€å¯è®­ç»ƒå•¦~</p>
<p>åœ¨Chatå¤„æˆ‘ä»¬é¦–å…ˆæµ‹è¯•ä¸‹æ²¡æœ‰ç»è¿‡é¢†åŸŸæ•°æ®é›†å¾®è°ƒçš„æ¨¡å‹å›ç­”çš„æ•ˆæœï¼Œå¤§æ¨¡å‹ç”±äºåœ¨æ—©æœŸçš„é¢„è®­ç»ƒé˜¶æ®µå·²ç»å­¦ä¹ å¤§é‡çš„å…¬å¼€çŸ¥è¯†ï¼Œæ‰€ä»¥å…·å¤‡ä¸€å®šçš„çŸ¥è¯†å‚¨å¤‡ï¼Œä½†æ˜¯è¿™è¾¹å’Œæˆ‘ä»¬æœŸæœ›çš„å‚ç›´åº”ç”¨çš„å›ç­”è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa66ea9366444e0692a44da852675288~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=X7nj5HqOFS88E9ci0rC7msPUv%2F4%3D" alt="" loading="lazy"/></p>
<p>åŸå§‹æ¨¡å‹çš„å›ç­”</p>
<p><strong>è¿™è¾¹æˆ‘ä»¬é€‰æ‹©å¥½åˆšæ‰è®­ç»ƒçš„æ£€æŸ¥ç‚¹è·¯å¾„</strong>ï¼Œå°±å¯ä»¥ä½“éªŒå­¦ä¹ äº†æ–°çŸ¥è¯†åçš„æ¨¡å‹äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55f387f01fcd4850af4b87209ed6cb71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=GU2pNYbLN2ZioAu5RI4ywnMog9E%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºå¤§æ¨¡å‹å·²ç»æŠŠè¿™äº›çŸ¥è¯†å­¦è¿›å»äº†</p>
<p>åœ¨Swanlabä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆšæ‰è®­ç»ƒçš„å„é¡¹å‚æ•°æ›²çº¿ï¼Œ<strong>ä¸‹é¢çš„æ˜¯æˆ‘è®­ç»ƒè¿‡ç¨‹çš„å‚æ•°æ›²çº¿</strong>ï¼ˆè¿™è¾¹æˆ‘ç®€ç•¥åœ°è®¾ç½®äº†ä¸‹è®­ç»ƒå‚æ•°ï¼Œæ•ˆæœå¯èƒ½ä¸ä½³ï¼Œå…·ä½“çš„éœ€è¦è€ƒè™‘æ•°æ®é›†çš„æ•°é‡ï¼ŒåŸºæ¨¡å‹å¤§å°ç­‰å› ç´ ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4905b3d99c4d6fa6ba5dcb083e2337~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765445939&amp;x-signature=C8zd4HeWA%2Fxk8jMTXd8xS6FbNjM%3D" alt="" loading="lazy"/></p>
<p>SwanLabåŸºçº¿ç¤¾åŒºæœç´¢ä½œè€…ID cathelloya</p>
<h2 data-id="heading-12">å››ã€ å°ç»“</h2>
<p>æœ¬æ–‡ç»äº†å¦‚ä½•å°†é¢†åŸŸå†…é›¶æ•£çš„çŸ¥è¯†æ–‡æ¡£ç”¨äºå¾®è°ƒå¤§è¯­è¨€æ¨¡å‹ã€‚é¦–å…ˆï¼Œé€šè¿‡MinerUç­‰å·¥å…·<strong>å°†PDFã€DOCXç­‰æ–‡ä»¶ç»Ÿä¸€è½¬æ¢ä¸ºMarkdownæ ¼å¼</strong>ã€‚æ¥ç€ï¼Œåˆ©ç”¨Easy-datasetå¹¶ç»“åˆåŸºç¡€å¤§æ¨¡å‹ï¼ˆå¦‚é€šè¿‡Ollamaéƒ¨ç½²ï¼‰ï¼Œ<strong>å°†Markdownæ–‡æ¡£å†…å®¹è‡ªåŠ¨åŒ–åœ°æ„å»ºæˆé—®ç­”æ•°æ®é›†</strong>ã€‚æœ€åï¼Œ<strong>ä½¿ç”¨LLaMA Factoryæ¡†æ¶åŠ è½½æ­¤æ•°æ®é›†å¯¹å¤§æ¨¡å‹è¿›è¡Œå¾®è°ƒ</strong>ï¼Œå¹¶<strong>å€ŸåŠ©SwanLabç­‰å·¥å…·å®æ—¶ç›‘æ§è®­ç»ƒè¿‡ç¨‹</strong>ï¼Œä»è€Œè®­ç»ƒå‡ºä¸€ä¸ªèƒ½ç†è§£ç‰¹å®šé¢†åŸŸçŸ¥è¯†çš„å‚ç›´é¢†åŸŸå¤§æ¨¡å‹ã€‚</p>
<h3 data-id="heading-13">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Charles æŠ“ä¸åˆ°åŒ…æ€ä¹ˆåŠï¼ŸHTTPS æŠ“åŒ…å¤±è´¥ã€TCP æ•°æ®æµå¼‚å¸¸ä¸åº•å±‚è¡¥æŠ“æ–¹æ¡ˆå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7579811819666751540</link>    <guid>https://juejin.cn/post/7579811819666751540</guid>    <pubDate>2025-12-04T09:44:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579811819666751540" data-draft-id="7579785426266685440" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Charles æŠ“ä¸åˆ°åŒ…æ€ä¹ˆåŠï¼ŸHTTPS æŠ“åŒ…å¤±è´¥ã€TCP æ•°æ®æµå¼‚å¸¸ä¸åº•å±‚è¡¥æŠ“æ–¹æ¡ˆå…¨è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T09:44:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Charles æŠ“ä¸åˆ°åŒ…æ€ä¹ˆåŠï¼ŸHTTPS æŠ“åŒ…å¤±è´¥ã€TCP æ•°æ®æµå¼‚å¸¸ä¸åº•å±‚è¡¥æŠ“æ–¹æ¡ˆå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:44:15.000Z" title="Thu Dec 04 2025 09:44:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨ç«¯å¼€å‘ã€æ¥å£è”è°ƒã€ç½‘ç»œè°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œ<strong>â€œCharles æŠ“ä¸åˆ°åŒ…â€</strong> æ˜¯å¼€å‘è€…é‡åˆ°çš„æœ€é«˜é¢‘é—®é¢˜ä¹‹ä¸€ã€‚å°¤å…¶æ˜¯åœ¨ iOS ç¯å¢ƒä¸‹ï¼ŒATSã€è¯ä¹¦é“¾æ ¡éªŒã€App å†…è¯ä¹¦ Pinningã€HTTP/2ã€HTTP/3ï¼ˆQUICï¼‰ç­‰æœºåˆ¶ä¼šå¯¼è‡´ä»£ç†æŠ“åŒ…å·¥å…·å¤±æ•ˆã€‚å¼€å‘è€…å¾€å¾€åªçœ‹åˆ° CONNECTã€ç©ºç™½è¯·æ±‚åˆ—è¡¨ï¼Œæˆ–è€…éƒ¨åˆ† API èƒ½æŠ“ã€éƒ¨åˆ†å®Œå…¨çœ‹ä¸åˆ°ã€‚</p>
<p>å¾ˆå¤šäººä¼šè¯¯ä»¥ä¸ºæ˜¯ Charles é…ç½®é”™è¯¯ï¼Œä½†å®é™…ä¸Šï¼Œå¤§å¤šæ•°æŠ“ä¸åˆ°åŒ…çš„é—®é¢˜ä¸ <strong>ç½‘ç»œåè®®æœ¬èº«çš„å·¥ä½œæœºåˆ¶</strong> ç›¸å…³ï¼Œè€Œä¸æ˜¯å·¥å…·æœ¬èº«çš„é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡ä»å·¥ç¨‹è§’åº¦ç³»ç»Ÿåˆ†æ Charles æ— æ³•æŠ“åŒ…çš„åŸå› ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„åˆ†å±‚è§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Charles æŠ“ä¸åˆ°åŒ…çš„å¸¸è§åŸå› ï¼ˆæŒ‰å‡ºç°é¢‘ç‡æ’åºï¼‰</h2>
<h3 data-id="heading-1"><strong>è¯ä¹¦æœªè¢«å®Œå…¨ä¿¡ä»»ï¼ˆiOS/macOSï¼‰</strong></h3>
<p>Charles çš„ HTTPS è§£å¯†ä¾èµ–â€œå—ä¿¡ä»»çš„ä»£ç†è¯ä¹¦â€ã€‚å¦‚æœï¼š</p>
<ul>
<li>æœªå®‰è£…è¯ä¹¦</li>
<li>æœªå¼€å¯â€œå®Œå…¨ä¿¡ä»»è¯ä¹¦â€</li>
<li>ä¸­é—´è¯ä¹¦ä¸å®Œæ•´</li>
<li>è¯ä¹¦é“¾è¢« Wi-Fi æˆ–ä»£ç†å¹²æ‰°</li>
</ul>
<p>Charles ä¼šåªæ˜¾ç¤º CONNECTï¼Œæ— æ³•è§£å¯†ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>åº”ç”¨å¯ç”¨äº†è¯ä¹¦ Pinning</strong></h3>
<p>Pinning ä¼šæ‹’ç»æ‰€æœ‰ä¸­é—´äººä»£ç†è¯ä¹¦ï¼Œæ˜¯ <strong>App æŠ“ä¸åˆ°åŒ…çš„ç¬¬ä¸€å¸¸è§åŸå› </strong>ã€‚</p>
<p>è¡¨ç°ï¼š</p>
<ul>
<li>Safari å¯ä»¥æŠ“</li>
<li>App å®Œå…¨çœ‹ä¸åˆ°è¯·æ±‚</li>
<li>Charles æ— æµé‡</li>
<li>Wireshark å¯çœ‹åˆ° TLS Alert</li>
</ul>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCharles æ— æ³•å·¥ä½œï¼Œéœ€è¦ä½¿ç”¨åº•å±‚æŠ“åŒ…æ–¹æ¡ˆã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>éƒ¨åˆ† API æŠ“ä¸åˆ° â†’ HTTP/3ï¼ˆQUICï¼‰å¯¼è‡´</strong></h3>
<p>QUIC ä½¿ç”¨ UDPï¼Œä¸èµ°ç³»ç»Ÿä»£ç†ï¼Œå› æ­¤ Charles/Proxyman/Fiddler <strong>æ— æ³•æŠ“åˆ°ä»»ä½• QUIC è¯·æ±‚</strong>ã€‚</p>
<p>å¸¸è§äºï¼š</p>
<ul>
<li>è§†é¢‘ç±»æ¥å£</li>
<li>å¤§æµé‡å®æ—¶åœºæ™¯</li>
<li>å†…å®¹æµ / æ¨èæµ</li>
<li>CDN è¾¹ç¼˜èŠ‚ç‚¹</li>
</ul>
<p>æ­¤æ—¶åªèƒ½é€šè¿‡åº•å±‚æŠ“å–æˆ–å…³é—­ QUIC è§£å†³ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>App ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼ˆTCP/WebSocketï¼‰</strong></h3>
<p>è®¸å¤š SDK æˆ–ä¸šåŠ¡æ•°æ®èµ°è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®ï¼Œä¸ç»è¿‡ HTTP ä»£ç†ï¼Œå› æ­¤ï¼š</p>
<ul>
<li>Charles çœ‹ä¸åˆ°</li>
<li>ä»£ç†è½¯ä»¶æ— æµé‡</li>
<li>tcpdump æˆ– Sniffmaster æ‰èƒ½çœ‹åˆ°çœŸå®æ•°æ®æµ</li>
</ul>
<hr/>
<h3 data-id="heading-5"><strong>ç³»ç»Ÿä»£ç†è¢«è¦†ç›–ï¼ˆéå¸¸å¸¸è§ï¼‰</strong></h3>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>VPN</li>
<li>å®‰å…¨ç®¡æ§è½¯ä»¶</li>
<li>MDM ä¼ä¸šç­–ç•¥</li>
<li>å¤šä»£ç†å†²çª</li>
<li>WireGuard/Clash ç­‰è¦†ç›–å…¨å±€è·¯ç”±</li>
</ul>
<p>å¯¼è‡´ Charles æ ¹æœ¬æ¥æ”¶ä¸åˆ°è¯·æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€æ’æŸ¥ Charles æŠ“ä¸åˆ°åŒ…çš„æ­£ç¡®æµç¨‹</h2>
<h3 data-id="heading-7"><strong>â‘  æ£€æŸ¥è¯ä¹¦é“¾ï¼ˆHTTPS è§£å¯†å¤±è´¥ï¼‰</strong></h3>
<p>å¿…æŸ¥é¡¹ç›®ï¼š</p>
<ul>
<li>iOS â€œå®Œå…¨ä¿¡ä»»è¯ä¹¦â€ æ˜¯å¦å¼€å¯</li>
<li>Charles çš„è¯ä¹¦æ˜¯å¦æœ€æ–°</li>
<li>æ˜¯å¦å­˜åœ¨ Wi-Fi ä¸­é—´ä»£ç†</li>
<li>ATS æ˜¯å¦æ‹’ç»ä¸­é—´äººè¯ä¹¦</li>
</ul>
<p>å¦‚æœåªæœ‰ CONNECT å¤šåŠæ˜¯è¯ä¹¦é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>â‘¡ æµè§ˆå™¨èƒ½æŠ“ã€App æŠ“ä¸åˆ° â†’ å…¸å‹ Pinning</strong></h3>
<p>è¿™æ˜¯ 70% çš„å¼€å‘è€…è¯¯åˆ¤ä¸ºâ€œCharles é…ç½®é”™è¯¯â€çš„åœºæ™¯ã€‚</p>
<p>è§£å†³æ–¹å¼ï¼š
Charles æ— æ³•å¤„ç†
éœ€è¦åº•å±‚æŠ“åŒ…å·¥å…·è¿›ä¸€æ­¥åˆ†æ TLS æ¡æ‰‹</p>
<hr/>
<h3 data-id="heading-9"><strong>â‘¢ æŸäº›æ¥å£æŠ“ä¸åˆ° â†’ QUIC/UDP</strong></h3>
<p>éªŒè¯æ–¹å¼ï¼š</p>
<ul>
<li>Wireshark æŸ¥çœ‹æ˜¯å¦å‡ºç° UDP 443</li>
<li>Safari åˆ·ä¸å‡ºæ•°æ®ï¼Œä½† App å‡ºç°å¤§é‡ UDP</li>
<li>Fiddler/Charles åªæœ‰éƒ¨åˆ†æ¥å£æ˜¾ç¤º</li>
</ul>
<p>QUIC å¤©ç”Ÿç»•è¿‡ä»£ç†ï¼Œå› æ­¤ä¸èƒ½è¢« Charles æŠ“åˆ°ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>â‘£ å®Œå…¨æ— æµé‡ â†’ ç³»ç»Ÿä»£ç†æ— æ•ˆ</strong></h3>
<p>éœ€è¦æ£€æŸ¥ï¼š</p>
<ul>
<li>ç½‘ç»œæè¿°æ–‡ä»¶ï¼ˆMDMï¼‰</li>
<li>VPN çŠ¶æ€</li>
<li>macOS ä»£ç†æ˜¯å¦è¢«è¦†ç›–</li>
<li>iOS Wi-Fi æ˜¯å¦è¢«ä¼ä¸šä»£ç†ä¿®æ”¹</li>
</ul>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€Charles æŠ“ä¸åˆ°åŒ…æ—¶çš„åº•å±‚è¡¥æŠ“æ–¹æ³•ï¼ˆå…³é”®ç¯èŠ‚ï¼‰</h2>
<p>å½“ä»£ç†å·¥å…·æ— æ³•æŠ“åŒ…æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ”¯æŒ <strong>åº•å±‚æ•°æ®æµæ•è·</strong> çš„å·¥å…·ï¼Œç›´æ¥æ•è·çœŸå®çš„ï¼š</p>
<ul>
<li>HTTPS/TCP æ•°æ®æµ</li>
<li>TLS æ¡æ‰‹</li>
<li>UDP/QUIC</li>
<li>è‡ªå®šä¹‰åè®®æ•°æ®</li>
<li>App å†…ç½‘ç»œæ¡†æ¶å‘é€çš„æ‰€æœ‰æ•°æ®</li>
</ul>
<hr/>
<h2 data-id="heading-12"><strong>Sniffmaster åœ¨ Charles æŠ“ä¸åˆ°åŒ…åœºæ™¯ä¸­çš„ä½œç”¨ï¼‰</strong></h2>
<h3 data-id="heading-13"><strong>Sniffmaster èƒ½åšä»€ä¹ˆï¼Ÿ</strong></h3>
<ul>
<li>æŠ“å– <strong>HTTPS / TCP / UDP</strong> çœŸå®æ•°æ®æµ</li>
<li>è‡ªåŠ¨è¯†åˆ«åè®®ç±»å‹ï¼ˆHTTPã€HTTPSã€mdns ç­‰ï¼‰</li>
<li>æ”¯æŒæŒ‰ <strong>App / åŸŸåè¿‡æ»¤æµé‡</strong>ï¼Œå‡å°‘å™ªéŸ³</li>
<li>æŸ¥çœ‹æ•°æ®æµæ–‡æœ¬ã€HEXã€äºŒè¿›åˆ¶å†…å®¹</li>
<li>ç”¨ JavaScript æ‹¦æˆªå™¨æ”¹å†™è¯·æ±‚/å“åº”ï¼ˆé pinning åœºæ™¯ï¼‰</li>
<li>å¯¼å‡º <strong>Wireshark å¯è¯»å–çš„ pcap</strong></li>
<li>è·¨å¹³å°æ”¯æŒ macOS / Windows / iOS</li>
</ul>
<p>å°¤å…¶é€‚ç”¨äºï¼š</p>
<ul>
<li>Charles æŠ“ä¸åˆ° HTTPSï¼ˆpinningï¼‰</li>
<li>QUIC æµé‡æŠ“ä¸åˆ°</li>
<li>WebSocket äºŒè¿›åˆ¶åè®®</li>
<li>è‡ªå®šä¹‰ TCP åè®®</li>
<li>ç³»ç»Ÿä»£ç†å¤±æ•ˆ</li>
</ul>
<p>å®ƒä¸æ˜¯æ›¿ä»£ Charlesï¼Œè€Œæ˜¯ Charles çš„è¡¥å……å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-14">å››ã€å®Œæ•´å®æˆ˜ï¼šCharles æŠ“ä¸åˆ°åŒ…çš„æ’æŸ¥ç¤ºä¾‹</h2>
<h3 data-id="heading-15"><strong>ç°è±¡ï¼š</strong></h3>
<ul>
<li>iOS App å®Œå…¨æŠ“ä¸åˆ°åŒ…</li>
<li>Charles æ˜¾ç¤º CONNECT</li>
<li>Safari å¯æŠ“</li>
<li>App æŠ¥ç½‘ç»œé”™è¯¯</li>
</ul>
<h3 data-id="heading-16"><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></h3>
<h4 data-id="heading-17">âœ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥è¯ä¹¦</h4>
<p>æ— å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-18">âœ” ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ç³»ç»Ÿä»£ç†</h4>
<p>å¯æ­£å¸¸å·¥ä½œã€‚</p>
<h4 data-id="heading-19">âœ” ç¬¬ä¸‰æ­¥ï¼šåˆæ­¥åˆ¤æ–­ä¸º pinning</h4>
<p>ä»£ç†å·¥å…·å¤±æ•ˆã€‚</p>
<h4 data-id="heading-20">âœ” ç¬¬å››æ­¥ï¼šä½¿ç”¨ Sniffmaster æ•è·åº•å±‚æ•°æ®æµ</h4>
<p>æ•è· TLS æ¡æ‰‹å¤±è´¥çš„è®°å½•ï¼š</p>
<ul>
<li>Wireshark åˆ†æ pcap â†’ å‡ºç° <code>unknown_ca</code></li>
<li>è¡¨ç¤º App æ‹’ç»ä»£ç†è¯ä¹¦ â†’ pinning ç”Ÿæ•ˆ</li>
</ul>
<p>æœ€ç»ˆå®šä½åˆ° App å†…éƒ¨ SDK ä½¿ç”¨äº†è¯ä¹¦æŒ‡çº¹æ ¡éªŒã€‚</p>
<hr/>
<h2 data-id="heading-21">Charles æŠ“ä¸åˆ°åŒ…çš„è§£å†³æ–¹æ¡ˆå¯ä»¥â€œåˆ†å±‚æŠ“åŒ…â€</h2>

























<table><thead><tr><th>å±‚çº§</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ä»£ç†å±‚</td><td>Charles / Proxyman / Fiddler</td><td>ä¸šåŠ¡å±‚ HTTPS æŠ“åŒ…</td></tr><tr><td>åè®®å±‚</td><td>Wireshark / tcpdump</td><td>åˆ†æ TLS æ¡æ‰‹ã€QUICã€TCP</td></tr><tr><td>è¡¥æŠ“å±‚</td><td>æŠ“åŒ…å¤§å¸ˆï¼ˆSniffmasterï¼‰</td><td>æ•è· HTTPS/TCP/UDP åº•å±‚æ•°æ®æµã€è§£å†³ pinning/QUIC</td></tr></tbody></table>
<p>æ²¡æœ‰ä»»ä½•å·¥å…·èƒ½ç‹¬ç«‹è¦†ç›–æ‰€æœ‰åœºæ™¯ï¼Œä½†ä¸‰ä¸ªå±‚çº§ç»„åˆèƒ½åº”å¯¹å…¨éƒ¨å¤æ‚æŠ“åŒ…éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java æ³›å‹æ”¯æŒçš„ç±»å‹]]></title>    <link>https://juejin.cn/post/7579805639434731572</link>    <guid>https://juejin.cn/post/7579805639434731572</guid>    <pubDate>2025-12-04T09:35:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579805639434731572" data-draft-id="7579811819666554932" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java æ³›å‹æ”¯æŒçš„ç±»å‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-04T09:35:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java æ³›å‹æ”¯æŒçš„ç±»å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:35:13.000Z" title="Thu Dec 04 2025 09:35:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸€å¥è¯æ€»ç»“</h2>
<p><strong>æ³›å‹ç±»å‹å‚æ•°å¯ä»¥æ˜¯ï¼šç±»ã€æ¥å£ã€æ•°ç»„ï¼Œä¸èƒ½æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€å…·ä½“å€¼ã€å®ä¾‹</strong></p>
<h2 data-id="heading-1">äºŒã€å…è®¸çš„ç±»å‹</h2>
<h3 data-id="heading-2">1. <strong>ç±»å’Œæ¥å£</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ… å¼•ç”¨ç±»å‹éƒ½å¯ä»¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {}  <span class="hljs-comment">// Tå¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹</span>

Box&lt;String&gt; stringBox;         <span class="hljs-comment">// ç±»</span>
Box&lt;Integer&gt; integerBox;       <span class="hljs-comment">// åŒ…è£…ç±»</span>
Box&lt;List&lt;String&gt;&gt; listBox;     <span class="hljs-comment">// æ³›å‹ç±»</span>
Box&lt;Comparable&gt; compBox;       <span class="hljs-comment">// æ¥å£</span>
Box&lt;Runnable&gt; runnableBox;     <span class="hljs-comment">// å‡½æ•°å¼æ¥å£</span>
</code></pre>
<h3 data-id="heading-3">2. <strong>é€šé…ç¬¦ç±»å‹</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ? è¡¨ç¤ºæœªçŸ¥ç±»å‹</span>
List&lt;?&gt; wildcardList;          <span class="hljs-comment">// ä»»æ„ç±»å‹</span>
List&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span>&gt; nums;   <span class="hljs-comment">// Numberæˆ–å…¶å­ç±»</span>
List&lt;? <span class="hljs-built_in">super</span> Integer&gt; ints;    <span class="hljs-comment">// Integeræˆ–å…¶çˆ¶ç±»</span>
</code></pre>
<h3 data-id="heading-4">3. <strong>æ³›å‹æ•°ç»„</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯ä»¥å£°æ˜æ³›å‹æ•°ç»„å¼•ç”¨</span>
T[] array;                      <span class="hljs-comment">// âœ… å¯ä»¥å£°æ˜</span>
<span class="hljs-comment">// T[] arr = new T[10];         // âŒ ä¸èƒ½åˆ›å»ºå®ä¾‹</span>
</code></pre>
<h3 data-id="heading-5">4. <strong>åµŒå¥—æ³›å‹</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¤šå±‚åµŒå¥—</span>
Map&lt;String, List&lt;Integer&gt;&gt; map;                <span class="hljs-comment">// Mapçš„valueæ˜¯List</span>
List&lt;Map.Entry&lt;String, Integer&gt;&gt; entries;      <span class="hljs-comment">// Listçš„å…ƒç´ æ˜¯Map.Entry</span>
Box&lt;Pair&lt;String, Integer&gt;&gt; box;                <span class="hljs-comment">// å¤æ‚åµŒå¥—</span>
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ä¸å…è®¸çš„ç±»å‹</h2>
<h3 data-id="heading-7">1. <strong>åŸºæœ¬ç±»å‹</strong>ï¼ˆæœ€é‡è¦çš„é™åˆ¶ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹</span>
Box&lt;<span class="hljs-type">int</span>&gt; intBox;               <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
Box&lt;<span class="hljs-type">double</span>&gt; doubleBox;         <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>
Box&lt;<span class="hljs-type">char</span>&gt; charBox;             <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼</span>

<span class="hljs-comment">// âœ… å¿…é¡»ä½¿ç”¨åŒ…è£…ç±»</span>
Box&lt;Integer&gt; intBox;           <span class="hljs-comment">// æ­£ç¡®</span>
Box&lt;Double&gt; doubleBox;         <span class="hljs-comment">// æ­£ç¡®</span>
Box&lt;Character&gt; charBox;        <span class="hljs-comment">// æ­£ç¡®</span>
</code></pre>
<h3 data-id="heading-8">2. <strong>åŸå§‹ç±»å‹</strong>ï¼ˆä¸å»ºè®®ï¼Œä½†å…è®¸ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âš ï¸ åŸå§‹ç±»å‹ï¼ˆraw typeï¼‰- å·²è¿‡æ—¶</span>
<span class="hljs-type">Box</span> <span class="hljs-variable">rawBox</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>();        <span class="hljs-comment">// è­¦å‘Šï¼šæœªæŒ‡å®šæ³›å‹ç±»å‹</span>
Box&lt;String&gt; stringBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>();  <span class="hljs-comment">// âœ… åº”è¯¥è¿™æ ·</span>
</code></pre>
<h3 data-id="heading-9">3. <strong>å…·ä½“å€¼/å®ä¾‹</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ ä¸èƒ½æ˜¯å…·ä½“å€¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-string">"string"</span>&gt; {}         <span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>()&gt; {}     <span class="hljs-comment">// é”™è¯¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-number">10</span>&gt; {}               <span class="hljs-comment">// é”™è¯¯</span>
</code></pre>
<h3 data-id="heading-10">4. <strong>é™æ€ä¸Šä¸‹æ–‡</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {
    <span class="hljs-comment">// âŒ ä¸èƒ½æœ‰é™æ€æ³›å‹å­—æ®µ</span>
    <span class="hljs-keyword">static</span> T staticField;       <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-comment">// âŒ é™æ€æ–¹æ³•ä¸èƒ½ä½¿ç”¨ç±»çš„ç±»å‹å‚æ•°</span>
    <span class="hljs-keyword">static</span> T <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {   <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// âœ… é™æ€æ–¹æ³•å¯ä»¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ³›å‹å‚æ•°</span>
    <span class="hljs-keyword">static</span> &lt;U&gt; U <span class="hljs-title function_">genericMethod</span><span class="hljs-params">(U param)</span> {
        <span class="hljs-keyword">return</span> param;
    }
}
</code></pre>
<h2 data-id="heading-11">å››ã€è¾¹ç•Œé™åˆ¶</h2>
<h3 data-id="heading-12">1. <strong>ç±»å‹è¾¹ç•Œ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªèƒ½æ‰©å±•ç±»æˆ–å®ç°æ¥å£ï¼Œä¸èƒ½æ˜¯å…¶ä»–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span> &amp; Comparable&lt;T&gt;&gt; {  <span class="hljs-comment">// âœ… æ­£ç¡®</span>
    <span class="hljs-comment">// Tå¿…é¡»æ˜¯Numberçš„å­ç±»ä¸”å®ç°Comparable</span>
}

<span class="hljs-comment">// âŒ é”™è¯¯è¾¹ç•Œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T <span class="hljs-built_in">super</span> String&gt; {}    <span class="hljs-comment">// ä¸èƒ½ä½¿ç”¨super</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T extends <span class="hljs-number">100</span>&gt; {}     <span class="hljs-comment">// ä¸èƒ½æ˜¯å…·ä½“å€¼</span>
</code></pre>
<h3 data-id="heading-13">2. <strong>å¤šé‡è¾¹ç•Œ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœ€å¤šä¸€ä¸ªç±»ï¼Œå¤šä¸ªæ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Number</span> &amp; Comparable&lt;T&gt; &amp; Serializable&gt; {
    <span class="hljs-comment">// Tå¿…é¡»ï¼šç»§æ‰¿Numberï¼Œå®ç°Comparableå’ŒSerializable</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šç±»å¿…é¡»åœ¨å‰ï¼Œæ¥å£åœ¨å</span>
}
</code></pre>
<h2 data-id="heading-14">äº”ã€å®é™…ä½¿ç”¨ä¸­çš„ç±»å‹</h2>
<h3 data-id="heading-15">1. <strong>é›†åˆæ¡†æ¶ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; strings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();      <span class="hljs-comment">// åˆ—è¡¨</span>
Set&lt;Integer&gt; numbers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();        <span class="hljs-comment">// é›†åˆ</span>
Map&lt;String, Integer&gt; scores = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(); <span class="hljs-comment">// æ˜ å°„</span>
Queue&lt;Double&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();      <span class="hljs-comment">// é˜Ÿåˆ—</span>
</code></pre>
<h3 data-id="heading-16">2. <strong>è‡ªå®šä¹‰æ•°æ®ç»“æ„</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// èŠ‚ç‚¹ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;T&gt; {
    T data;
    Node&lt;T&gt; next;
    
    Node(T data) {
        <span class="hljs-built_in">this</span>.data = data;
    }
}

<span class="hljs-comment">// äºŒå‰æ ‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Comparable</span>&lt;T&gt;&gt; {
    T value;
    TreeNode&lt;T&gt; left;
    TreeNode&lt;T&gt; right;
}
</code></pre>
<h3 data-id="heading-17">3. <strong>å‡½æ•°å¼æ¥å£</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¸¦æ³›å‹çš„å‡½æ•°å¼æ¥å£</span>
<span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Transformer</span>&lt;T, R&gt; {
    R <span class="hljs-title function_">transform</span><span class="hljs-params">(T input)</span>;
}

<span class="hljs-comment">// ä½¿ç”¨</span>
Transformer&lt;String, Integer&gt; lengthGetter = String::length;
Transformer&lt;Integer, String&gt; stringConverter = Object::toString;
</code></pre>
<h2 data-id="heading-18">å…­ã€ç±»å‹æ¨æ–­ï¼ˆé’»çŸ³è¿ç®—ç¬¦ï¼‰</h2>
<h3 data-id="heading-19">1. <strong>è‡ªåŠ¨ç±»å‹æ¨æ–­</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java 7+ é’»çŸ³è¿ç®—ç¬¦</span>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();      <span class="hljs-comment">// âœ… è‡ªåŠ¨æ¨æ–­ä¸º&lt;String&gt;</span>

<span class="hljs-comment">// Java 7ä¹‹å‰</span>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;(); <span class="hljs-comment">// âœ… è€å†™æ³•</span>

<span class="hljs-comment">// åµŒå¥—æ³›å‹ä¹Ÿèƒ½æ¨æ–­</span>
Map&lt;String, List&lt;Integer&gt;&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
</code></pre>
<h3 data-id="heading-20">2. <strong>æ–¹æ³•ç±»å‹æ¨æ–­</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹æ³•è°ƒç”¨æ—¶è‡ªåŠ¨æ¨æ–­</span>
&lt;T&gt; T <span class="hljs-title function_">getDefault</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> { ... }

<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> getDefault(String.class);      <span class="hljs-comment">// Tæ¨æ–­ä¸ºString</span>
<span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> getDefault(Integer.class);    <span class="hljs-comment">// Tæ¨æ–­ä¸ºInteger</span>
</code></pre>
<h2 data-id="heading-21">ä¸ƒã€ç‰¹æ®Šé™åˆ¶åŠè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-22">1. <strong>åŸºæœ¬ç±»å‹çš„è§£å†³æ–¹æ¡ˆ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é—®é¢˜ï¼šä¸èƒ½ç›´æ¥ç”¨int</span>
<span class="hljs-comment">// Box&lt;int&gt; box;  // âŒ é”™è¯¯</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨åŒ…è£…ç±»</span>
Box&lt;Integer&gt; intBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;&gt;();

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨ç‰¹åŒ–ç‰ˆæœ¬ï¼ˆç¬¬ä¸‰æ–¹åº“å¦‚fastutilï¼‰</span>
<span class="hljs-comment">// IntBox, LongBoxç­‰ä¸“ç”¨å®¹å™¨</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ3ï¼šJavaæœªæ¥å¯èƒ½æ”¯æŒï¼ˆValhallaé¡¹ç›®ï¼‰</span>
</code></pre>
<h3 data-id="heading-23">2. <strong>ç±»å‹æ“¦é™¤çš„å½±å“</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ä¸¢å¤±</span>
Box&lt;String&gt; stringBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;&gt;();
Box&lt;Integer&gt; integerBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;&gt;();

<span class="hljs-comment">// è¿è¡Œæ—¶éƒ½æ˜¯Box&lt;Object&gt;</span>
System.out.println(stringBox.getClass() == integerBox.getClass()); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šä¼ é€’Classå¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> Class&lt;T&gt; type;  <span class="hljs-comment">// ä¿å­˜ç±»å‹ä¿¡æ¯</span>
    Box(Class&lt;T&gt; type) {
        <span class="hljs-built_in">this</span>.type = type;
    }
}
</code></pre>
<h2 data-id="heading-24">å…«ã€æ£€æŸ¥æ¸…å•</h2>
<h3 data-id="heading-25">âœ… å¯ä»¥ç”¨ä½œæ³›å‹å‚æ•°ï¼š</h3>
<ol>
<li>ä»»ä½•å¼•ç”¨ç±»å‹ï¼ˆç±»ã€æ¥å£ï¼‰</li>
<li>å…¶ä»–æ³›å‹ç±»å‹ï¼ˆ<code>List&lt;String&gt;</code>ï¼‰</li>
<li>é€šé…ç¬¦ï¼ˆ<code>?</code>, <code>? extends T</code>, <code>? super T</code>ï¼‰</li>
<li>æ•°ç»„ç±»å‹ï¼ˆä½œä¸ºå£°æ˜ï¼‰</li>
</ol>
<h3 data-id="heading-26">âŒ ä¸èƒ½ç”¨ä½œæ³›å‹å‚æ•°ï¼š</h3>
<ol>
<li>åŸºæœ¬ç±»å‹ï¼ˆint, double, charç­‰ï¼‰</li>
<li>å…·ä½“å€¼æˆ–å®ä¾‹</li>
<li>åŸå§‹ç±»å‹ï¼ˆåº”é¿å…ï¼‰</li>
<li>åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ç±»çš„ç±»å‹å‚æ•°</li>
</ol>
<h3 data-id="heading-27">âš ï¸ éœ€è¦æ³¨æ„ï¼š</h3>
<ol>
<li>å¤šé‡è¾¹ç•Œæ—¶ç±»åœ¨å‰ï¼Œæ¥å£åœ¨å</li>
<li>ç±»å‹æ“¦é™¤å¯¼è‡´è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ä¸¢å¤±</li>
<li>ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„å®ä¾‹</li>
</ol>
<h2 data-id="heading-28">ä¹ã€ä¸€å¥è¯è®°å¿†è§„åˆ™</h2>
<p><strong>æ³›å‹ç±»å‹å‚æ•° = ä»»ä½•å¼•ç”¨ç±»å‹ + é€šé…ç¬¦ï¼Œä½†ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹æˆ–å…·ä½“å€¼ï¼Œé™æ€ä¸Šä¸‹æ–‡æœ‰é™åˆ¶ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearch å¦‚ä½•ç¡®ä¿æ–°å¢æ–‡æ¡£ç«‹å³å¯è§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7579813925995642921</link>    <guid>https://juejin.cn/post/7579813925995642921</guid>    <pubDate>2025-12-04T09:37:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579813925995642921" data-draft-id="7579659550862344234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearch å¦‚ä½•ç¡®ä¿æ–°å¢æ–‡æ¡£ç«‹å³å¯è§ï¼Ÿ"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-04T09:37:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªå¤§ä¸“ç”Ÿçš„æ·˜æ±°ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/1327865775796807"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearch å¦‚ä½•ç¡®ä¿æ–°å¢æ–‡æ¡£ç«‹å³å¯è§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1327865775796807/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªå¤§ä¸“ç”Ÿçš„æ·˜æ±°ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:37:04.000Z" title="Thu Dec 04 2025 09:37:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Elasticsearch Java APIï¼šå¦‚ä½•ç¡®ä¿æ–°å¢æ–‡æ¡£ç«‹å³å¯è§ï¼Ÿ</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸€ä¸ªå¸¸è§çš„å¼€å‘å›°æƒ‘</h3>
<p>å¦‚æœä½ åœ¨Elasticsearchå¼€å‘ä¸­é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Œä¸€å®šä¸ä¼šé™Œç”Ÿï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–°å¢ä¸€ä¸ªæ–‡æ¡£</span>
<span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(indexRequest, RequestOptions.DEFAULT);

<span class="hljs-comment">// ç«‹å³æŸ¥è¯¢è¿™ä¸ªæ–‡æ¡£</span>
<span class="hljs-type">SearchResponse</span> <span class="hljs-variable">searchResponse</span> <span class="hljs-operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);
<span class="hljs-comment">// ç»“æœï¼šæŸ¥ä¸åˆ°ï¼æ–‡æ¡£å»å“ªå„¿äº†ï¼Ÿ</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆåˆšåˆšæ–°å¢çš„æ–‡æ¡£ç«‹å³æŸ¥è¯¢å´æ‰¾ä¸åˆ°ï¼Ÿè¿™èƒŒåæ¶‰åŠElasticsearchçš„<strong>è¿‘å®æ—¶æœç´¢ï¼ˆNRTï¼‰æœºåˆ¶</strong>ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨è¿™ä¸ªé—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ç†è§£Elasticsearchçš„åˆ·æ–°æœºåˆ¶</h3>
<h4 data-id="heading-3">1.1 ä¸ºä»€ä¹ˆæ–°å¢æ–‡æ¡£ä¸èƒ½ç«‹å³çœ‹åˆ°ï¼Ÿ</h4>
<p>Elasticsearchä¸ºäº†æé«˜å†™å…¥æ€§èƒ½ï¼Œé‡‡ç”¨äº†<strong>ç¼“å†²åˆ·æ–°æœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–‡æ¡£å†™å…¥çš„ç®€åŒ–æµç¨‹ï¼š</span>
<span class="hljs-number">1.</span> æ–‡æ¡£ â†’ å†…å­˜ç¼“å†²åŒºï¼ˆå¿«ï¼Œä½†ä¸å¯æœç´¢ï¼‰
<span class="hljs-number">2.</span> å®šæœŸåˆ·æ–° â†’ æ–°çš„æ®µï¼ˆsegmentï¼‰ï¼ˆå¯æœç´¢ï¼‰
<span class="hljs-number">3.</span> åˆ·æ–°é—´éš”é»˜è®¤ï¼š<span class="hljs-number">1</span>ç§’
</code></pre>
<p>è¿™ç§è®¾è®¡å¸¦æ¥äº†æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†ä¹Ÿå¯¼è‡´äº†å»¶è¿Ÿå¯è§çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-4">1.2 Refresh æœºåˆ¶è¯¦è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸‰ç§åˆ·æ–°çŠ¶æ€å¯¹æ¯”ï¼š</span>
+---------------------+-----------------+-------------------+------------------+
|      ç­–ç•¥ç±»å‹       |    å†™å…¥æ€§èƒ½     |    æŸ¥è¯¢å®æ—¶æ€§     |    èµ„æºæ¶ˆè€—      |
+---------------------+-----------------+-------------------+------------------+
| é»˜è®¤ï¼ˆ<span class="hljs-number">1</span>ç§’åˆ·æ–°ï¼‰     |      é«˜         |      è¿‘å®æ—¶       |       ä½         |
| ç«‹å³åˆ·æ–°            |      ä½         |      å®æ—¶         |       é«˜         |
| å…³é—­è‡ªåŠ¨åˆ·æ–°        |      æœ€é«˜       |      å»¶è¿Ÿ         |       æœ€ä½       |
+---------------------+-----------------+-------------------+------------------+
</code></pre>
<h3 data-id="heading-5">äºŒã€Java APIä¸­çš„å››ç§è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-6">2.1 æ–¹æ¡ˆä¸€ï¼šå¼ºåˆ¶åˆ·æ–°ç´¢å¼•ï¼ˆæµ‹è¯•ç¯å¢ƒæ¨èï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.elasticsearch.action.index.IndexRequest;
<span class="hljs-keyword">import</span> org.elasticsearch.action.index.IndexResponse;
<span class="hljs-keyword">import</span> org.elasticsearch.action.admin.indices.refresh.RefreshRequest;
<span class="hljs-keyword">import</span> org.elasticsearch.client.RequestOptions;
<span class="hljs-keyword">import</span> org.elasticsearch.client.RestHighLevelClient;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentCreator</span> {
    
    <span class="hljs-keyword">public</span> IndexResponse <span class="hljs-title function_">createDocumentWithRefresh</span><span class="hljs-params">(
            RestHighLevelClient client, 
            String index, 
            String id, 
            Map&lt;String, Object&gt; source)</span> <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-comment">// 1. åˆ›å»ºç´¢å¼•è¯·æ±‚</span>
        <span class="hljs-type">IndexRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(index)
                .id(id)
                .source(source);
        
        <span class="hljs-comment">// 2. æ‰§è¡Œç´¢å¼•æ“ä½œ</span>
        <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(request, RequestOptions.DEFAULT);
        
        <span class="hljs-comment">// 3. å¼ºåˆ¶åˆ·æ–°ç´¢å¼•ï¼Œä½¿æ–‡æ¡£ç«‹å³å¯è§</span>
        <span class="hljs-type">RefreshRequest</span> <span class="hljs-variable">refreshRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RefreshRequest</span>(index);
        client.indices().refresh(refreshRequest, RequestOptions.DEFAULT);
        
        System.out.println(<span class="hljs-string">"æ–‡æ¡£å·²åˆ·æ–°ï¼Œç«‹å³å¯æŸ¥"</span>);
        <span class="hljs-keyword">return</span> response;
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šç®€å•ç›´æ¥ï¼Œç¡®ä¿100%å¯è§
<strong>ç¼ºç‚¹</strong>ï¼šæ€§èƒ½å½±å“å¤§ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨</p>
<h4 data-id="heading-7">2.2 æ–¹æ¡ˆäºŒï¼šè®¾ç½®ç´¢å¼•è¯·æ±‚çš„åˆ·æ–°ç­–ç•¥ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentCreator</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">RefreshStrategy</span> {
        IMMEDIATE,      <span class="hljs-comment">// ç«‹å³åˆ·æ–°</span>
        WAIT_UNTIL,     <span class="hljs-comment">// ç­‰å¾…åˆ·æ–°</span>
        NONE            <span class="hljs-comment">// ä¸åˆ·æ–°</span>
    }
    
    <span class="hljs-keyword">public</span> IndexResponse <span class="hljs-title function_">createDocumentWithRefreshPolicy</span><span class="hljs-params">(
            RestHighLevelClient client,
            String index,
            String id,
            Map&lt;String, Object&gt; source,
            RefreshStrategy strategy)</span> <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-type">IndexRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(index)
                .id(id)
                .source(source);
        
        <span class="hljs-comment">// è®¾ç½®åˆ·æ–°ç­–ç•¥</span>
        <span class="hljs-keyword">switch</span> (strategy) {
            <span class="hljs-keyword">case</span> IMMEDIATE:
                request.setRefreshPolicy(WriteRequest.RefreshPolicy.IMMEDIATE);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> WAIT_UNTIL:
                request.setRefreshPolicy(WriteRequest.RefreshPolicy.WAIT_UNTIL);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> NONE:
                request.setRefreshPolicy(WriteRequest.RefreshPolicy.NONE);
                <span class="hljs-keyword">break</span>;
        }
        
        <span class="hljs-keyword">return</span> client.index(request, RequestOptions.DEFAULT);
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demo</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        Map&lt;String, Object&gt; document = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        document.put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"Elasticsearchå®æˆ˜"</span>);
        document.put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
        document.put(<span class="hljs-string">"timestamp"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        
        <span class="hljs-comment">// éœ€è¦ç«‹å³å¯è§çš„åœºæ™¯</span>
        <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> createDocumentWithRefreshPolicy(
            client, <span class="hljs-string">"books"</span>, <span class="hljs-string">"1"</span>, document, RefreshStrategy.IMMEDIATE);
        
        <span class="hljs-comment">// ç°åœ¨å¯ä»¥ç«‹å³æŸ¥è¯¢åˆ°è¯¥æ–‡æ¡£</span>
        System.out.println(<span class="hljs-string">"æ–‡æ¡£ID: "</span> + response.getId());
    }
}
</code></pre>
<h4 data-id="heading-8">2.3 æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨Bulk APIå¹¶æ§åˆ¶åˆ·æ–°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BulkDocumentManager</span> {
    
    <span class="hljs-keyword">public</span> BulkResponse <span class="hljs-title function_">bulkCreateWithRefreshControl</span><span class="hljs-params">(
            RestHighLevelClient client,
            List&lt;Map&lt;String, Object&gt;&gt; documents)</span> <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-type">BulkRequest</span> <span class="hljs-variable">bulkRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BulkRequest</span>();
        
        <span class="hljs-comment">// æ·»åŠ å¤šä¸ªæ–‡æ¡£</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; documents.size(); i++) {
            <span class="hljs-type">IndexRequest</span> <span class="hljs-variable">indexRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">"my_index"</span>)
                    .id(<span class="hljs-string">"doc_"</span> + i)
                    .source(documents.get(i));
            bulkRequest.add(indexRequest);
        }
        
        <span class="hljs-comment">// è®¾ç½®æ‰¹é‡æ“ä½œçš„åˆ·æ–°ç­–ç•¥</span>
        bulkRequest.setRefreshPolicy(WriteRequest.RefreshPolicy.WAIT_UNTIL);
        
        <span class="hljs-type">BulkResponse</span> <span class="hljs-variable">bulkResponse</span> <span class="hljs-operator">=</span> client.bulk(bulkRequest, RequestOptions.DEFAULT);
        
        <span class="hljs-keyword">if</span> (bulkResponse.hasFailures()) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ“ä½œå­˜åœ¨å¤±è´¥: "</span> + bulkResponse.buildFailureMessage());
        }
        
        <span class="hljs-keyword">return</span> bulkResponse;
    }
}
</code></pre>
<h4 data-id="heading-9">2.4 æ–¹æ¡ˆå››ï¼šä½¿ç”¨Get APIéªŒè¯æ–‡æ¡£å­˜åœ¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentVerifier</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDocumentVisible</span><span class="hljs-params">(
            RestHighLevelClient client,
            String index,
            String id,
            <span class="hljs-type">int</span> maxRetries,
            <span class="hljs-type">long</span> retryIntervalMs)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException {
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; maxRetries; i++) {
            <span class="hljs-type">GetRequest</span> <span class="hljs-variable">getRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GetRequest</span>(index, id);
            <span class="hljs-type">GetResponse</span> <span class="hljs-variable">getResponse</span> <span class="hljs-operator">=</span> client.get(getRequest, RequestOptions.DEFAULT);
            
            <span class="hljs-keyword">if</span> (getResponse.isExists()) {
                System.out.println(<span class="hljs-string">"æ–‡æ¡£åœ¨ç¬¬ "</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">" æ¬¡å°è¯•åå¯è§"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-comment">// ç­‰å¾…åé‡è¯•</span>
            Thread.sleep(retryIntervalMs);
        }
        
        System.out.println(<span class="hljs-string">"æ–‡æ¡£åœ¨ "</span> + maxRetries + <span class="hljs-string">" æ¬¡å°è¯•åä»ä¸å¯è§"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€æ€§èƒ½å¯¹æ¯”ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-11">3.1 æ€§èƒ½æµ‹è¯•å¯¹æ¯”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceBenchmark</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">benchmark</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        Map&lt;String, Long&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// æµ‹è¯•ä¸åŒåˆ·æ–°ç­–ç•¥çš„æ€§èƒ½</span>
        List&lt;RefreshStrategy&gt; strategies = Arrays.asList(
            RefreshStrategy.IMMEDIATE,
            RefreshStrategy.WAIT_UNTIL,
            RefreshStrategy.NONE
        );
        
        <span class="hljs-keyword">for</span> (RefreshStrategy strategy : strategies) {
            <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            
            <span class="hljs-comment">// æ’å…¥1000ä¸ªæ–‡æ¡£</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                createDocumentWithRefreshPolicy(strategy);
            }
            
            <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            results.put(strategy.name(), duration);
            
            System.out.println(String.format(
                <span class="hljs-string">"ç­–ç•¥ %s: %d æ¯«ç§’"</span>, strategy.name(), duration));
        }
        
        <span class="hljs-comment">// é¢„æœŸç»“æœï¼šNONE &lt; WAIT_UNTIL &lt; IMMEDIATE</span>
    }
}
</code></pre>
<h4 data-id="heading-12">3.2 æœ€ä½³å®è·µæŒ‡å—</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticsearchBestPractices</span> {
    
    <span class="hljs-comment">// å®è·µ1ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©ç­–ç•¥</span>
    <span class="hljs-keyword">public</span> RefreshStrategy <span class="hljs-title function_">chooseStrategy</span><span class="hljs-params">(Scenario scenario)</span> {
        <span class="hljs-keyword">switch</span> (scenario) {
            <span class="hljs-keyword">case</span> TESTING:  <span class="hljs-comment">// æµ‹è¯•ç¯å¢ƒ</span>
                <span class="hljs-keyword">return</span> RefreshStrategy.IMMEDIATE;
                
            <span class="hljs-keyword">case</span> REALTIME_APP:  <span class="hljs-comment">// å®æ—¶åº”ç”¨</span>
                <span class="hljs-keyword">return</span> RefreshStrategy.WAIT_UNTIL;
                
            <span class="hljs-keyword">case</span> BATCH_PROCESSING:  <span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
                <span class="hljs-keyword">return</span> RefreshStrategy.NONE;
                
            <span class="hljs-keyword">case</span> MIXED_WORKLOAD:  <span class="hljs-comment">// æ··åˆè´Ÿè½½</span>
            <span class="hljs-keyword">default</span>:
                <span class="hljs-comment">// é»˜è®¤ç­–ç•¥ï¼Œå¹³è¡¡æ€§èƒ½ä¸å®æ—¶æ€§</span>
                <span class="hljs-keyword">return</span> RefreshStrategy.WAIT_UNTIL;
        }
    }
    
    <span class="hljs-comment">// å®è·µ2ï¼šä½¿ç”¨ç´¢å¼•è®¾ç½®ä¼˜åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">optimizeIndexSettings</span><span class="hljs-params">(RestHighLevelClient client)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">UpdateSettingsRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateSettingsRequest</span>(<span class="hljs-string">"my_index"</span>);
        
        Settings.<span class="hljs-type">Builder</span> <span class="hljs-variable">settings</span> <span class="hljs-operator">=</span> Settings.builder()
            <span class="hljs-comment">// è°ƒæ•´åˆ·æ–°é—´éš”ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼‰</span>
            .put(<span class="hljs-string">"index.refresh_interval"</span>, <span class="hljs-string">"2s"</span>)
            <span class="hljs-comment">// ä¼˜åŒ–å†™å…¥æ€§èƒ½</span>
            .put(<span class="hljs-string">"index.translog.sync_interval"</span>, <span class="hljs-string">"5s"</span>)
            .put(<span class="hljs-string">"index.translog.durability"</span>, <span class="hljs-string">"async"</span>);
        
        request.settings(settings);
        client.indices().putSettings(request, RequestOptions.DEFAULT);
    }
    
    <span class="hljs-comment">// å®è·µ3ï¼šå®ç°æ™ºèƒ½é‡è¯•æœºåˆ¶</span>
    <span class="hljs-keyword">public</span> SearchResponse <span class="hljs-title function_">searchWithRetry</span><span class="hljs-params">(
            SearchRequest searchRequest,
            <span class="hljs-type">int</span> maxRetries)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException {
        
        <span class="hljs-type">IOException</span> <span class="hljs-variable">lastException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; maxRetries; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.search(
                    searchRequest, RequestOptions.DEFAULT);
                    
                <span class="hljs-comment">// éªŒè¯æ˜¯å¦æ‰¾åˆ°é¢„æœŸçš„æ–‡æ¡£</span>
                <span class="hljs-keyword">if</span> (response.getHits().getTotalHits().value &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">return</span> response;
                }
                
                <span class="hljs-comment">// æœªæ‰¾åˆ°ï¼Œç­‰å¾…åé‡è¯•</span>
                Thread.sleep(<span class="hljs-number">100</span> * (i + <span class="hljs-number">1</span>)); <span class="hljs-comment">// é€’å¢ç­‰å¾…æ—¶é—´</span>
                
            } <span class="hljs-keyword">catch</span> (IOException e) {
                lastException = e;
                Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶ç­‰å¾…æ›´ä¹…</span>
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IOException</span>(<span class="hljs-string">"æœç´¢å¤±è´¥ï¼Œæœ€å¤§é‡è¯•æ¬¡æ•°å·²è¾¾"</span>, lastException);
    }
}
</code></pre>
<h4 data-id="heading-13">3.3 ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># elasticsearch.yml ç”Ÿäº§é…ç½®å‚è€ƒ</span>
<span class="hljs-comment"># å†™å…¥ä¼˜åŒ–é…ç½®</span>
<span class="hljs-attr">index.refresh_interval:</span> <span class="hljs-string">2s</span>  <span class="hljs-comment"># æ ¹æ®ä¸šåŠ¡å®¹å¿åº¦è°ƒæ•´</span>
<span class="hljs-attr">index.translog.durability:</span> <span class="hljs-string">async</span>
<span class="hljs-attr">index.translog.sync_interval:</span> <span class="hljs-string">5s</span>
<span class="hljs-attr">index.number_of_replicas:</span> <span class="hljs-number">1</span>  <span class="hljs-comment"># å†™å…¥æ—¶å‡å°‘å‰¯æœ¬æ•°ï¼Œå†™å®Œå†å¢åŠ </span>

<span class="hljs-comment"># Javaå®¢æˆ·ç«¯é…ç½®</span>
<span class="hljs-string">public</span> <span class="hljs-string">class</span> <span class="hljs-string">ElasticsearchConfig</span> {
    
    <span class="hljs-string">@Bean</span>
    <span class="hljs-string">public</span> <span class="hljs-string">RestHighLevelClient</span> <span class="hljs-string">elasticsearchClient()</span> {
        <span class="hljs-string">RestClientBuilder</span> <span class="hljs-string">restClientBuilder</span> <span class="hljs-string">=</span> <span class="hljs-string">RestClient.builder(</span>
            <span class="hljs-string">new</span> <span class="hljs-string">HttpHost("localhost"</span>, <span class="hljs-number">9200</span>, <span class="hljs-string">"http"</span><span class="hljs-string">));</span>
        
        <span class="hljs-string">//</span> <span class="hljs-string">é…ç½®è¿æ¥æ± </span>
        <span class="hljs-string">restClientBuilder.setHttpClientConfigCallback(httpClientBuilder</span> <span class="hljs-string">-&gt;</span> {
            <span class="hljs-string">return</span> <span class="hljs-string">httpClientBuilder</span>
                <span class="hljs-string">.setMaxConnTotal(100)</span>    <span class="hljs-string">//</span> <span class="hljs-string">æœ€å¤§è¿æ¥æ•°</span>
                <span class="hljs-string">.setMaxConnPerRoute(50);</span> <span class="hljs-string">//</span> <span class="hljs-string">æ¯è·¯ç”±æœ€å¤§è¿æ¥æ•°</span>
        }<span class="hljs-string">);</span>
        
        <span class="hljs-string">//</span> <span class="hljs-string">é…ç½®è¯·æ±‚è¶…æ—¶</span>
        <span class="hljs-string">restClientBuilder.setRequestConfigCallback(requestConfigBuilder</span> <span class="hljs-string">-&gt;</span> {
            <span class="hljs-string">return</span> <span class="hljs-string">requestConfigBuilder</span>
                <span class="hljs-string">.setConnectTimeout(5000)</span>
                <span class="hljs-string">.setSocketTimeout(60000);</span>
        }<span class="hljs-string">);</span>
        
        <span class="hljs-string">return</span> <span class="hljs-string">new</span> <span class="hljs-string">RestHighLevelClient(restClientBuilder);</span>
    }
}
</code></pre>
<h3 data-id="heading-14">å››ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-15">Q1ï¼šåˆ·æ–°æ“ä½œä¼šå½±å“é›†ç¾¤æ€§èƒ½å—ï¼Ÿ</h4>
<p><strong>Aï¼š</strong> ä¼šã€‚æ¯æ¬¡åˆ·æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„æ®µï¼ˆsegmentï¼‰ï¼Œå¢åŠ åˆå¹¶å‹åŠ›ã€‚å»ºè®®ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒé¿å…é¢‘ç¹å¼ºåˆ¶åˆ·æ–°</li>
<li>åˆç†è®¾ç½®refresh_interval</li>
<li>ä½¿ç”¨WAIT_UNTILç­–ç•¥è€ŒéIMMEDIATE</li>
</ul>
<h4 data-id="heading-16">Q2ï¼šå¦‚ä½•ç›‘æ§åˆ·æ–°æ€§èƒ½ï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RefreshMonitor</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorRefreshStats</span><span class="hljs-params">(RestHighLevelClient client)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">IndicesStatsRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndicesStatsRequest</span>();
        request.all();  <span class="hljs-comment">// è·å–æ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯</span>
        
        <span class="hljs-type">IndicesStatsResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> 
            client.indices().stats(request, RequestOptions.DEFAULT);
        
        <span class="hljs-comment">// åˆ·æ–°ç»Ÿè®¡</span>
        <span class="hljs-type">RefreshStats</span> <span class="hljs-variable">refreshStats</span> <span class="hljs-operator">=</span> response.getTotal().getRefresh();
        System.out.println(<span class="hljs-string">"æ€»åˆ·æ–°æ¬¡æ•°: "</span> + refreshStats.getTotal());
        System.out.println(<span class="hljs-string">"åˆ·æ–°æ€»æ—¶é—´(ms): "</span> + refreshStats.getTotalTimeInMillis());
        System.out.println(<span class="hljs-string">"å¤–éƒ¨åˆ·æ–°æ¬¡æ•°: "</span> + refreshStats.getExternalTotal());
    }
}
</code></pre>
<h4 data-id="heading-17">Q3ï¼šä½¿ç”¨æ–°å®¢æˆ·ç«¯ï¼ˆJava API Client 8.xï¼‰æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Elasticsearch Java API Client 8.x ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Elasticsearch8Example</span> {
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateDocument</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// æ–°å®¢æˆ·ç«¯APIæ›´åŠ ç±»å‹å®‰å…¨</span>
        <span class="hljs-type">ElasticsearchClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ElasticsearchClient</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestClientTransport</span>(restClient, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JacksonJsonpMapper</span>()));
        
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"bk-1"</span>, <span class="hljs-string">"City Bike"</span>, <span class="hljs-number">123.0</span>);
        
        IndexResponse&lt;Product&gt; response = client.index(i -&gt; i
            .index(<span class="hljs-string">"products"</span>)
            .id(product.getSku())
            .document(product)
            .refresh(Refresh.True)  <span class="hljs-comment">// è®¾ç½®åˆ·æ–°ç­–ç•¥</span>
        );
        
        <span class="hljs-comment">// æ–‡æ¡£ç°åœ¨ç«‹å³å¯è§</span>
        assertTrue(response.shards().failures().isEmpty());
    }
}
</code></pre>
<h3 data-id="heading-18">äº”ã€æ€»ç»“ä¸å»ºè®®</h3>
<h4 data-id="heading-19">5.1 å…³é”®è¦ç‚¹å›é¡¾</h4>
<ol>
<li><strong>ç†è§£åŸç†</strong>ï¼šElasticsearchçš„NRTæœºåˆ¶æ˜¯æ€§èƒ½ä¸å®æ—¶æ€§çš„æƒè¡¡</li>
<li><strong>ç­–ç•¥é€‰æ‹©</strong>ï¼š
<ul>
<li>æµ‹è¯•ç¯å¢ƒ â†’ ä½¿ç”¨<code>IMMEDIATE</code>åˆ·æ–°</li>
<li>ç”Ÿäº§ç¯å¢ƒ â†’ ä½¿ç”¨<code>WAIT_UNTIL</code>æˆ–è°ƒæ•´<code>refresh_interval</code></li>
<li>æ‰¹é‡å¯¼å…¥ â†’ ä½¿ç”¨<code>NONE</code>ï¼Œå®Œæˆåæ‰‹åŠ¨åˆ·æ–°</li>
</ul>
</li>
<li><strong>ç›‘æ§ä¼˜åŒ–</strong>ï¼šæŒç»­ç›‘æ§åˆ·æ–°æŒ‡æ ‡ï¼Œæ ¹æ®ä¸šåŠ¡è°ƒæ•´å‚æ•°</li>
</ol>
<h4 data-id="heading-20">5.2 å®ç”¨å»ºè®®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticsearchTips</span> {
    
    <span class="hljs-comment">// æç¤º1ï¼šä½¿ç”¨ç»Ÿä¸€å·¥å…·ç±»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentUtils</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IndexRequest <span class="hljs-title function_">buildIndexRequest</span><span class="hljs-params">(
                String index, String id, Object source)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(index)
                .id(id)
                .source(convertToMap(source), XContentType.JSON)
                .setRefreshPolicy(RefreshPolicy.WAIT_UNTIL);
        }
    }
    
    <span class="hljs-comment">// æç¤º2ï¼šå®ç°ç¯å¢ƒæ„ŸçŸ¥é…ç½®</span>
    <span class="hljs-meta">@Configuration</span>
    <span class="hljs-meta">@Profile("prod")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProdElasticsearchConfig</span> {
        <span class="hljs-meta">@Value("${es.refresh.interval:2s}")</span>
        <span class="hljs-keyword">private</span> String refreshInterval;
        
        <span class="hljs-meta">@PostConstruct</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"ç”Ÿäº§ç¯å¢ƒåˆ·æ–°é—´éš”: "</span> + refreshInterval);
        }
    }
}
</code></pre>
<h4 data-id="heading-21">5.3 è¿›ä¸€æ­¥å­¦ä¹ èµ„æº</h4>
<ol>
<li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fguide%2Fen%2Felasticsearch%2Freference%2Fcurrent%2Findices-refresh.html" target="_blank" title="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-refresh.html" ref="nofollow noopener noreferrer">Elasticsearch Refresh API</a></li>
<li>æ€§èƒ½è°ƒä¼˜æŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fguide%2Fen%2Felasticsearch%2Freference%2Fcurrent%2Ftune-for-indexing-speed.html" target="_blank" title="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html" ref="nofollow noopener noreferrer">Elasticsearch Tuning for Indexing Speed</a></li>
<li>å®æˆ˜ä¹¦ç±ï¼šã€ŠElasticsearchå®æˆ˜ã€‹</li>
</ol>
<hr/>
<p><strong>è®°ä½</strong>ï¼šElasticsearchçš„"è¿‘å®æ—¶"è®¾è®¡æ˜¯ä¸€ç§æƒè¡¡ã€‚ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨åˆ·æ–°æœºåˆ¶ï¼Œæ‰èƒ½åœ¨æ€§èƒ½å’Œæ•°æ®å®æ—¶æ€§ä¹‹é—´æ‰¾åˆ°é€‚åˆä½ ä¸šåŠ¡çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¸®åŠ©ä½ è§£å†³æ–‡æ¡£å¯è§æ€§çš„é—®é¢˜ï¼å¦‚æœæœ‰æ›´å¤šç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[this ä¸æ˜¯ä½ æƒ³çš„ thisï¼šä»ä½œç”¨åŸŸè¿·å¤±åˆ°è°ƒç”¨æ ˆæŒæ§]]></title>    <link>https://juejin.cn/post/7579819594271014950</link>    <guid>https://juejin.cn/post/7579819594271014950</guid>    <pubDate>2025-12-04T09:41:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579819594271014950" data-draft-id="7579511003299151915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="this ä¸æ˜¯ä½ æƒ³çš„ thisï¼šä»ä½œç”¨åŸŸè¿·å¤±åˆ°è°ƒç”¨æ ˆæŒæ§"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,ECMAScript 6"/> <meta itemprop="datePublished" content="2025-12-04T09:41:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            this ä¸æ˜¯ä½ æƒ³çš„ thisï¼šä»ä½œç”¨åŸŸè¿·å¤±åˆ°è°ƒç”¨æ ˆæŒæ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-04T09:41:33.000Z" title="Thu Dec 04 2025 09:41:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-lakeside-light">.hljs-comment,.hljs-quote{color:#5a7b8c}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d22d72}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#935c25}.hljs-bullet,.hljs-string,.hljs-symbol{color:#568c3b}.hljs-section,.hljs-title{color:#257fad}.hljs-keyword,.hljs-selector-tag{color:#6b6bb8}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#ebf8ff;color:#516d7b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€è‡ªç”±å˜é‡ vs å¯¹è±¡å±æ€§ï¼š</h2>
<p>ä¸€æ®µä»£ç æ­ç¤º JavaScript ä½œç”¨åŸŸçš„æœ¬è´¨</p>
<p>æˆ‘ä»¬ä»ä¸€æ®µçœ‹ä¼¼ç®€å•ã€å´å¸¸è¢«ç”¨ä½œæ•™å­¦é™·é˜±çš„ JavaScript ä»£ç å¼€å§‹ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">var</span> bar = { 
  <span class="hljs-attr">myName</span>: <span class="hljs-string">"time.geekbang.com"</span>,
  <span class="hljs-attr">printName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName); <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ thisï¼Œä¹Ÿæ²¡æœ‰å£°æ˜ myName</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> myName = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;
  <span class="hljs-keyword">return</span> bar.<span class="hljs-property">printName</span>;
}

<span class="hljs-keyword">let</span> _printName = <span class="hljs-title function_">foo</span>();
<span class="hljs-title function_">_printName</span>(); <span class="hljs-comment">// âŒ ReferenceError: myName is not defined</span>
</code></pre>
<p>åˆçœ‹ä¹‹ä¸‹ï¼Œè¿™æ®µä»£ç ä¼¼ä¹åªæ˜¯æƒ³â€œæ‰“å°æŸä¸ªåå­—â€ã€‚ä½†è¿è¡Œåï¼Œæ§åˆ¶å°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">ReferenceError: myName is not defined
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd4ae07d1e8432bbdff06ec7982a690~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446092&amp;x-signature=%2B%2FnSfVd4nELMAzRiDleHa9zbJEQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong><br/>
è¿™èƒŒåæ¶‰åŠ JavaScript ä¸­ä¸¤ä¸ªææ˜“æ··æ·†çš„æ ¸å¿ƒæ¦‚å¿µï¼š<strong>è¯æ³•ä½œç”¨åŸŸä¸­çš„è‡ªç”±å˜é‡æŸ¥æ‰¾</strong> ä¸ <strong>å¯¹è±¡å±æ€§è®¿é—®</strong>ã€‚å®ƒä»¬çœ‹ä¼¼ç›¸ä¼¼ï¼Œå®åˆ™å¤©å·®åœ°åˆ«ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ”Â <code>myName</code>Â åˆ°åº•æ˜¯è°ï¼Ÿ</h3>
<p>å…³é”®é—®é¢˜åœ¨äºï¼š<strong><code>printName</code> å‡½æ•°ä½“ä¸­çš„ <code>myName</code> æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>å®ƒ<strong>ä¸æ˜¯</strong>Â <code>this.myName</code>Â â€”â€” ä»£ç ä¸­å‹æ ¹æ²¡å†™Â <code>this</code>ï¼›</li>
<li>å®ƒä¹Ÿ<strong>ä¸æ˜¯</strong>å±€éƒ¨å˜é‡ â€”â€” å‡½æ•°å†…éƒ¨æ²¡æœ‰ç”¨Â <code>var</code>ã€<code>let</code>Â æˆ–Â <code>const</code>Â å£°æ˜Â <code>myName</code>ã€‚</li>
</ul>
<p>äºæ˜¯ï¼ŒJavaScript å¼•æ“å¯åŠ¨<strong>æ ‡è¯†ç¬¦è§£æï¼ˆIdentifier Resolutionï¼‰</strong> æœºåˆ¶ï¼šæ²¿ç€<strong>è¯æ³•ä½œç”¨åŸŸé“¾ï¼ˆLexical Scope Chainï¼‰</strong> å‘ä¸ŠæŸ¥æ‰¾è¿™ä¸ªå˜é‡ã€‚</p>
<blockquote>
<p>ğŸ“Œ <strong>è¯æ³•ä½œç”¨åŸŸç”±å‡½æ•°â€œå®šä¹‰çš„ä½ç½®â€å†³å®šï¼Œè€Œéâ€œè°ƒç”¨çš„ä½ç½®â€</strong> ã€‚</p>
</blockquote>
<p>æŸ¥æ‰¾è·¯å¾„å¦‚ä¸‹ï¼š</p>
<ol>
<li>åœ¨Â <code>printName</code>Â è‡ªèº«çš„ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ â†’Â <strong>æœªæ‰¾åˆ°</strong>ï¼›</li>
<li>è·³è½¬åˆ°è¯¥å‡½æ•°<strong>å®šä¹‰æ—¶çš„å¤–å±‚ä½œç”¨åŸŸ</strong>Â â†’ è¿™é‡Œæ˜¯<strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼›</li>
<li>åœ¨å…¨å±€ä½œç”¨åŸŸä¸­æŸ¥æ‰¾åä¸ºÂ <code>myName</code>Â çš„ç»‘å®šã€‚</li>
</ol>
<p>ç„¶è€Œï¼Œåœ¨åˆå§‹ç‰ˆæœ¬ä¸­ï¼Œ<strong>å…¨å±€ä½œç”¨åŸŸç¡®å®æ²¡æœ‰ <code>myName</code> å˜é‡</strong>ã€‚</p>
<blockquote>
<p>âš ï¸ é‡è¦åŒºåˆ†ï¼š<strong>å¯¹è±¡å±æ€§ â‰  å˜é‡</strong><br/>
å°½ç®¡ <code>bar</code> å¯¹è±¡æœ‰ä¸€ä¸ª <code>myName</code> å±æ€§ï¼Œä½† <code>bar.myName</code> æ˜¯<strong>å±æ€§è®¿é—®è¡¨è¾¾å¼</strong>ï¼Œè€Œ <code>myName</code> æ˜¯ä¸€ä¸ª<strong>è‡ªç”±å˜é‡ï¼ˆFree Variableï¼‰</strong> ã€‚<br/>
JavaScript <strong>ä¸ä¼š</strong>è‡ªåŠ¨å°†å¯¹è±¡å±æ€§å½“ä½œåŒåå˜é‡æ¥è§£æã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œå¼•æ“æ‰¾ä¸åˆ° <code>myName</code>ï¼ŒæŠ›å‡º <code>ReferenceError</code>ã€‚</p>
<hr/>
<h3 data-id="heading-2">âœ… æ·»åŠ å…¨å±€å˜é‡åï¼šä¸ºä»€ä¹ˆè¾“å‡º â€œæå®¢é‚¦â€ï¼Ÿ</h3>
<p>ç°åœ¨æˆ‘ä»¬åœ¨å…¨å±€ä½œç”¨åŸŸæ·»åŠ ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">let</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>;
</code></pre>
<p>å®Œæ•´ä»£ç å˜ä¸ºï¼š</p>
<pre><code class="hljs language-Html" lang="Html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> bar = { 
  <span class="hljs-attr">myName</span>: <span class="hljs-string">"time.geekbang.com"</span>,
  <span class="hljs-attr">printName</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName); <span class="hljs-comment">// è‡ªç”±å˜é‡æŸ¥æ‰¾</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> myName = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;
  <span class="hljs-keyword">return</span> bar.<span class="hljs-property">printName</span>;
}

<span class="hljs-keyword">let</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>; <span class="hljs-comment">// â† å…¨å±€è¯æ³•ç¯å¢ƒä¸­çš„ç»‘å®š</span>
<span class="hljs-keyword">let</span> _printName = <span class="hljs-title function_">foo</span>();
<span class="hljs-title function_">_printName</span>(); <span class="hljs-comment">// è¾“å‡ºï¼š'æå®¢é‚¦'</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>printName</code> æ‰§è¡Œæ—¶ï¼š</p>
<ul>
<li>è‡ªèº«ä½œç”¨åŸŸæ— Â <code>myName</code>ï¼›</li>
<li>æ²¿è¯æ³•ä½œç”¨åŸŸé“¾å‘ä¸Š â†’ æ‰¾åˆ°<strong>å…¨å±€ä½œç”¨åŸŸä¸­çš„Â <code>myName</code>Â ç»‘å®š</strong>ï¼›</li>
<li>æˆåŠŸè§£æä¸ºÂ <code>'æå®¢é‚¦'</code>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bc0edc3bf1b4da5be9e94808973be6b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446092&amp;x-signature=6qrV2aA61ee22xCGUuV5Eoj%2BnC8%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¡ è¡¥å……è¯´æ˜ï¼š<br/>
è™½ç„¶ <code>let</code> å£°æ˜çš„å…¨å±€å˜é‡<strong>ä¸ä¼šæŒ‚è½½åˆ° <code>window</code> å¯¹è±¡ä¸Š</strong>ï¼ˆå³ <code>window.myName === undefined</code>ï¼‰ï¼Œä½†å®ƒ<strong>ä»ç„¶å­˜åœ¨äºå…¨å±€è¯æ³•ç¯å¢ƒï¼ˆGlobal Lexical Environmentï¼‰ä¸­</strong>ï¼Œå¯¹è‡ªç”±å˜é‡æŸ¥æ‰¾å®Œå…¨å¯è§ã€‚<br/>
è¿™æ­£æ˜¯ ES6 å¼•å…¥å—çº§ä½œç”¨åŸŸåçš„è®¾è®¡ï¼š<strong>ä½œç”¨åŸŸæŸ¥æ‰¾ â‰  å…¨å±€å¯¹è±¡å±æ€§æŸ¥æ‰¾</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ğŸ¯ å¦‚ä½•çœŸæ­£è®¿é—®Â <code>"time.geekbang.com"</code>ï¼Ÿ</h3>
<p>æˆ‘ä»¬çš„ç›®æ ‡å…¶å®æ˜¯ <code>bar</code> å¯¹è±¡ä¸Šçš„å±æ€§å€¼ <code>"time.geekbang.com"</code>ã€‚æ—¢ç„¶ <code>console.log(myName)</code> æ‰“å°çš„æ˜¯å…¨å±€å˜é‡ <code>'æå®¢é‚¦'</code>ï¼Œé‚£è¯¥å¦‚ä½•æ­£ç¡®è®¿é—®å¯¹è±¡å±æ€§ï¼Ÿ</p>
<p>ç­”æ¡ˆå¾ˆç®€å•ï¼š<strong>æ˜¾å¼é€šè¿‡å¯¹è±¡å¼•ç”¨è®¿é—®</strong>ã€‚</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">myName</span>); <span class="hljs-comment">// âœ… è¾“å‡º "time.geekbang.com"</span>
</code></pre>
<p>è¿™è¡Œä»£ç ä¹‹æ‰€ä»¥æˆåŠŸï¼Œæ˜¯å› ä¸ºå®ƒç›´æ¥æ‰§è¡Œäº†<strong>å±æ€§è®¿é—®æ“ä½œ</strong>ã€‚åªè¦ <code>bar</code> åœ¨å½“å‰ä½œç”¨åŸŸå¯è§ï¼ˆè¿™é‡Œæ˜¯å…¨å±€ï¼‰ï¼Œå°±èƒ½ç¨³å®šã€å¯é åœ°è·å–å…¶å±æ€§ã€‚</p>
<blockquote>
<p>ğŸ—£ï¸ è™½è¯´â€œç›´å‘¼å…¶åæœ‰ç‚¹ä¸ç¤¼è²Œâ€ï¼Ÿ<br/>
å…¶å®åœ¨ç¼–ç¨‹ä¸­ï¼Œ<strong>æ¸…æ™°æ¯”å§”å©‰æ›´é‡è¦</strong>ã€‚<br/>
æ˜¾å¼å†™å‡º <code>bar.myName</code>ï¼Œæ˜¯å¯¹ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„æœ€å¤§å°Šé‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">âš ï¸ é‚£Â <code>this.myName</code>Â ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</h3>
<p>ç¬¬ä¸‰è¡Œä»£ç è¯•å›¾ç”¨ <code>this</code> æ¥è®¿é—®ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>); <span class="hljs-comment">// âŒ è¾“å‡º undefined</span>
</code></pre>
<p>é—®é¢˜å‡ºåœ¨ <strong><code>this</code> çš„ç»‘å®šæ–¹å¼</strong> ä¸Šã€‚</p>
<p>è™½ç„¶ <code>printName</code> æ˜¯ <code>bar</code> çš„æ–¹æ³•ï¼Œä½†æˆ‘ä»¬æ˜¯è¿™æ ·è°ƒç”¨å®ƒçš„ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">let</span> _printName = <span class="hljs-title function_">foo</span>();
<span class="hljs-title function_">_printName</span>(); <span class="hljs-comment">// ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œæ²¡æœ‰é€šè¿‡ bar</span>
</code></pre>
<p>è¿™ç§è°ƒç”¨æ–¹å¼ä¸‹ï¼Œ<code>this</code> æŒ‡å‘<strong>å…¨å±€å¯¹è±¡</strong>ï¼ˆå¦‚æµè§ˆå™¨ä¸­çš„ <code>window</code>ï¼‰ã€‚</p>
<p>ä½†å…¨å±€å˜é‡æ˜¯ç”¨ <code>let</code> å£°æ˜çš„ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">let</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>;
</code></pre>
<p>è€Œ <code>let</code> å£°æ˜çš„å˜é‡<strong>ä¸ä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§</strong>ï¼Œæ‰€ä»¥ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>   <span class="hljs-comment">// ç­‰ä»·äº window.myName â†’ undefined</span>
</code></pre>
<blockquote>
<p>ğŸ” å¯¹æ¯”å®éªŒï¼š<br/>
å¦‚æœæ”¹æˆ <code>var myName = 'æå®¢é‚¦'</code>ï¼Œé‚£ä¹ˆ <code>this.myName</code> ä¼šè¾“å‡º <code>'æå®¢é‚¦'</code> â€”â€”<br/>
ä½†è¯·æ³¨æ„ï¼Œè¿™ä»ç„¶æ˜¯<strong>å…¨å±€å˜é‡</strong>ï¼Œ<strong>ä¸æ˜¯ <code>bar.myName</code></strong>ï¼</p>
</blockquote>
<p>å› æ­¤ï¼Œ<code>this.myName</code> åœ¨è¿™é‡Œæ—¢ä¸å¯é ï¼Œä¹Ÿä¸æ˜¯ä½ çœŸæ­£æƒ³è®¿é—®çš„å€¼ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸ§© å°ç»“ï¼šä¸‰ç§è®¿é—®æ–¹å¼çš„æœ¬è´¨åŒºåˆ«</h3>





























<table><thead><tr><th>å†™æ³•</th><th>æœºåˆ¶</th><th>æ˜¯å¦ä¾èµ–ä½œç”¨åŸŸ</th><th>èƒ½å¦è®¿é—®Â <code>bar.myName</code></th></tr></thead><tbody><tr><td><code>myName</code></td><td>è‡ªç”±å˜é‡ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰</td><td>âœ…</td><td>âŒï¼ˆé™¤éå…¨å±€å·§åˆï¼‰</td></tr><tr><td><code>bar.myName</code></td><td>å¯¹è±¡å±æ€§è®¿é—®</td><td>âŒï¼ˆåªéœ€Â <code>bar</code>Â å¯è§ï¼‰</td><td>âœ…</td></tr><tr><td><code>this.myName</code></td><td>åŠ¨æ€ä¸Šä¸‹æ–‡ç»‘å®š</td><td>âŒ</td><td>âŒï¼ˆé™¤éé€šè¿‡Â <code>bar.printName()</code>Â è°ƒç”¨ï¼‰</td></tr></tbody></table>
<hr/>
<blockquote>
<p><strong>å¯¹è±¡å±æ€§æ˜¯æ•°æ®ï¼Œå˜é‡æ˜¯ç»‘å®šï¼›å‰è€…é å¼•ç”¨è®¿é—®ï¼Œåè€…é ä½œç”¨åŸŸæŸ¥æ‰¾ã€‚äºŒè€…åœ¨ JavaScript ä¸­å±äºå®Œå…¨ä¸åŒçš„å‘½åç©ºé—´ã€‚</strong></p>
</blockquote>
<p>ç†è§£è¿™ä¸€ç‚¹ï¼Œæ˜¯é¿å…â€œæˆ‘ä»¥ä¸ºå®ƒèƒ½æ‰¾åˆ°â€çš„å…³é”®ã€‚ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ <code>this</code> çš„åŠ¨æ€ç»‘å®šè§„åˆ™â€”â€”ä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤â€œå–„å˜â€ï¼Œåˆè¯¥å¦‚ä½•æŒæ§å®ƒã€‚</p>
<h2 data-id="heading-6">äºŒã€<code>this</code>Â çš„çœŸç›¸ï¼š</h2>
<p><strong>åŠ¨æ€ä¸Šä¸‹æ–‡å¦‚ä½•ç”±è°ƒç”¨æ–¹å¼å†³å®š?</strong></p>
<p>åœ¨ç¬¬ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å˜æ¸…äº†ï¼š</p>
<ul>
<li><strong>å˜é‡æŸ¥æ‰¾æ˜¯é™æ€çš„ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰</strong></li>
<li><strong>å¯¹è±¡å±æ€§ â‰  å˜é‡</strong></li>
<li><strong>è‡ªç”±å˜é‡æ²¿å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾</strong></li>
</ul>
<p>è€Œæœ¬èŠ‚è¦æ­ç¤ºçš„æ˜¯å¦ä¸€ä¸ªå¹³è¡Œä½†å¸¸è¢«æ··æ·†çš„æœºåˆ¶ï¼š</p>
<blockquote>
<p><strong><code>this</code> çš„å€¼ä¸ä½œç”¨åŸŸæ— å…³ï¼Œå®ƒå®Œå…¨ç”±å‡½æ•°çš„â€œè°ƒç”¨æ–¹å¼â€å†³å®šâ€”â€”å®ƒæ˜¯åŠ¨æ€çš„ã€è¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡å¼•ç”¨ã€‚</strong></p>
</blockquote>
<p>è¿™æ­£æ˜¯åˆå­¦è€…ç”šè‡³ä¸­çº§å¼€å‘è€…é¢‘ç¹è¸©å‘çš„æ ¹æºï¼š<strong>æŠŠ <code>this</code> å½“ä½œâ€œå½“å‰å¯¹è±¡â€æˆ–â€œä½œç”¨åŸŸâ€çš„åŒä¹‰è¯</strong>ã€‚</p>
<h3 data-id="heading-7">ğŸ¯Â <code>this</code>Â åˆ°åº•æ˜¯è°ï¼Ÿ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªæ—¢åŸºç¡€åˆä»¤äººå›°æƒ‘çš„æ¦‚å¿µã€‚å¾ˆå¤šå¼€å‘è€…è¯¯ä»¥ä¸º <code>this</code> å’Œâ€œå‡½æ•°å®šä¹‰çš„ä½ç½®â€æˆ–â€œå½“å‰ä½œç”¨åŸŸâ€æœ‰å…³ï¼Œä½†äº‹å®æ°æ°ç›¸åï¼š<strong><code>this</code> çš„å€¼å®Œå…¨ç”±å‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šï¼Œä¸è¯æ³•ä½œç”¨åŸŸæ— å…³</strong>ã€‚</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸‰ä¸ªå…¸å‹åœºæ™¯ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥æ­å¼€ <code>this</code> çš„çœŸå®é¢ç›®ï¼Œå¹¶å»ºç«‹ä¸€å¥—å¯é çš„åˆ¤æ–­é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-8">ç¬¬ä¸€éƒ¨åˆ†ï¼šæ™®é€šå‡½æ•°è°ƒç”¨ â†’ é»˜è®¤ç»‘å®š</h3>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);  <span class="hljs-comment">// è¾“å‡º windowï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰</span>
}
<span class="hljs-title function_">foo</span>();  <span class="hljs-comment">// æ™®é€šå‡½æ•°è°ƒç”¨</span>
</code></pre>
<p>åœ¨<strong>éä¸¥æ ¼æ¨¡å¼</strong>ä¸‹ï¼Œå½“ä½ ç›´æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ˆå¦‚ <code>foo()</code>ï¼‰ï¼ŒJavaScript å¼•æ“ä¼šå°†è¯¥å‡½æ•°çš„ <code>this</code> é»˜è®¤ç»‘å®šåˆ°<strong>å…¨å±€å¯¹è±¡</strong>ã€‚</p>
<ul>
<li>åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯Â <code>window</code>ï¼›</li>
<li>åœ¨ Node.js ä¸­ï¼Œåˆ™æ˜¯Â <code>global</code>ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä¸Šè¿°ä»£ç ä¼šè¾“å‡º <code>window</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3dbeb6687374ec28166ecbf3b110a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446092&amp;x-signature=YS0VzwlrLZA5xPNdAcdPhokvSo0%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>â“ ä¸ºä»€ä¹ˆè¿™çœ‹èµ·æ¥â€œä¸åˆç†â€ï¼Ÿ<br/>
å› ä¸ºæˆ‘ä»¬æœ¬èƒ½åœ°è®¤ä¸ºï¼šâ€œè¿™ä¸ªå‡½æ•°å†™åœ¨å…¨å±€ï¼Œé‚£ <code>this</code> åº”è¯¥ä»£è¡¨â€˜å½“å‰ä¸Šä¸‹æ–‡â€™ã€‚â€<br/>
ä½† JavaScript çš„è®¾è®¡å“²å­¦æ˜¯ï¼š<strong><code>this</code> ä¸æ˜¯é™æ€çš„ï¼Œè€Œæ˜¯åŠ¨æ€çš„â€”â€”å®ƒå–å†³äºâ€œæ€ä¹ˆè°ƒç”¨â€ï¼Œè€Œä¸æ˜¯â€œåœ¨å“ªå®šä¹‰â€ã€‚</strong></p>
</blockquote>
<p>âœ… <strong>å°ç»“</strong>ï¼š</p>
<blockquote>
<p><strong>æ™®é€šå‡½æ•°è°ƒç”¨ï¼ˆ<code>foo()</code>ï¼‰ â†’ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡</strong><br/>
ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ <code>window</code>ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ <code>undefined</code>ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ç¬¬äºŒéƒ¨åˆ†ï¼š<code>call</code>Â /Â <code>apply</code>Â â†’ æ˜¾å¼ç»‘å®š</h3>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">let</span> bar = {
    <span class="hljs-attr">myName</span>: <span class="hljs-string">"æå®¢é‚¦"</span>,
    <span class="hljs-attr">test1</span>: <span class="hljs-string">"1"</span>
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span>;
}

foo.<span class="hljs-title function_">apply</span>(bar);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar); <span class="hljs-comment">// { myName: "æå®¢æ—¶é—´", test1: "1" }</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é‡æ–°å®šä¹‰äº† <code>foo</code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™ <code>this</code> å¯¹è±¡è®¾ç½® <code>myName</code> å±æ€§ã€‚</p>
<p>å…³é”®åœ¨äºè¿™ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-Js" lang="Js">foo.<span class="hljs-title function_">apply</span>(bar);
</code></pre>
<p><code>Function.prototype.apply</code>ï¼ˆä»¥åŠ <code>call</code>ã€<code>bind</code>ï¼‰å…è®¸æˆ‘ä»¬<strong>æ˜¾å¼æŒ‡å®šå‡½æ•°æ‰§è¡Œæ—¶çš„ <code>this</code> å€¼</strong>ã€‚<br/>
<code>foo.apply(bar)</code> çš„å«ä¹‰æ˜¯ï¼š</p>
<blockquote>
<p>â€œè°ƒç”¨ <code>foo</code> å‡½æ•°ï¼Œå¹¶å¼ºåˆ¶è®©å‡½æ•°å†…éƒ¨çš„ <code>this</code> æŒ‡å‘ <code>bar</code> å¯¹è±¡ã€‚â€</p>
</blockquote>
<p>äºæ˜¯ï¼Œ<code>this.myName = "æå®¢æ—¶é—´"</code> å®é™…ä¸Šç­‰ä»·äº <code>bar.myName = "æå®¢æ—¶é—´"</code>ï¼ŒæˆåŠŸä¿®æ”¹äº† <code>bar</code> çš„å±æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b7b96897d314085bfa69990b869e766~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765446092&amp;x-signature=GZKVq6rSPoaKUNS4hwGaCGbiQko%3D" alt="image.png" loading="lazy"/></p>
<p>âœ… <strong>å°ç»“</strong>ï¼š</p>
<blockquote>
<p><strong><code>foo.call(obj)</code> æˆ– <code>foo.apply(obj)</code> â†’ <code>this</code> è¢«æ˜¾å¼ç»‘å®šä¸º <code>obj</code></strong><br/>
è¿™æ˜¯æ§åˆ¶ <code>this</code> æœ€ç›´æ¥ã€æœ€å¯é çš„æ–¹å¼ä¹‹ä¸€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¹è±¡æ–¹æ³•è°ƒç”¨ â†’ éšå¼ç»‘å®š</h3>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>);
}

<span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">foo</span>: foo
};

obj.<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// è¾“å‡º 2</span>
</code></pre>
<ul>
<li>
<p>å…³é”®ï¼š<strong>é€šè¿‡Â <code>obj.foo()</code>Â è°ƒç”¨å‡½æ•°</strong>ã€‚</p>
</li>
<li>
<p>åœ¨ JavaScript ä¸­ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä½œä¸º<strong>å¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨</strong>æ—¶ï¼Œå‡½æ•°å†…éƒ¨çš„Â <code>this</code>Â ä¼šè‡ªåŠ¨ç»‘å®šåˆ°<strong>è¯¥å¯¹è±¡</strong>ï¼ˆå³Â <code>obj</code>ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰€ä»¥åœ¨Â <code>foo</code>Â æ‰§è¡Œæ—¶ï¼š</p>
<ul>
<li><code>this</code>Â æŒ‡å‘Â <code>obj</code></li>
<li><code>this.a</code>Â å°±æ˜¯Â <code>obj.a</code>ï¼Œå³Â <code>2</code></li>
</ul>
</li>
<li>
<p>å› æ­¤è¾“å‡ºï¼š<code>2</code></p>
</li>
</ul>
<p>âœ… <strong>å°ç»“</strong>ï¼š</p>
<blockquote>
<p><strong>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ï¼ˆ<code>obj.method()</code>ï¼‰ â†’ <code>this</code> æŒ‡å‘ <code>obj</code></strong><br/>
ä½†ä»…é™äºâ€œç‚¹è°ƒç”¨â€å½¢å¼ï¼Œè§£æ„æˆ–èµ‹å€¼åè°ƒç”¨ä¼šå¤±æ•ˆã€‚</p>
</blockquote>
<hr/>
<p>ç†è§£ <code>this</code>ï¼Œæ˜¯è¿ˆå‘ JavaScript è¿è¡Œæ—¶é«˜æ‰‹çš„å…³é”®ä¸€æ­¥ã€‚ä¸‹ä¸€æ¬¡å½“ä½ çœ‹åˆ° <code>this</code> æ—¶ï¼Œåˆ«å†é—®â€œå®ƒåº”è¯¥æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯é—®ï¼š <strong>â€œå®ƒæ˜¯æ€ä¹ˆè¢«è°ƒç”¨çš„ï¼Ÿâ€</strong> â€”â€”ç­”æ¡ˆå°±åœ¨è°ƒç”¨æ ˆä¸­ã€‚</p>
<h3 data-id="heading-11">ç¬¬å››éƒ¨åˆ†ï¼šéšå¼ç»‘å®šä¸¢å¤±</h3>
<p>ç¬¬ä¸‰éƒ¨åˆ†è®²åˆ°äº†éšå¼ç»‘å®šçš„æ¦‚å¿µï¼Œç°åœ¨æˆ‘ä»¬æ¥è®²è®²éšå¼ä¸¢å¤±</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> myObj = {
            name : <span class="hljs-string">"æå®¢æ—¶é—´"</span>,
            <span class="hljs-attr">showThis</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'æå®¢é‚¦'</span>;
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
            }
        }
        <span class="hljs-keyword">var</span> foo = myObj.<span class="hljs-property">showThis</span>;   <span class="hljs-comment">// window.foo</span>
</code></pre>
<h4 data-id="heading-12">âš ï¸ éšå¼ç»‘å®šä¸ºä»€ä¹ˆä¼šâ€œä¸¢å¤±â€ï¼Ÿ</h4>
<p>ç°åœ¨çœ‹ä½ çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">var</span> foo = myObj.<span class="hljs-property">showThis</span>; <span class="hljs-comment">// ä»…è·å–å‡½æ•°å¼•ç”¨ï¼Œæœªè°ƒç”¨</span>
<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// âŒ this ä¸å†æ˜¯ myObjï¼</span>
</code></pre>
<p>è¿™ä¸€æ­¥å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><code>myObj.showThis</code>Â æ˜¯ä¸€ä¸ª<strong>å‡½æ•°å¼•ç”¨</strong>ï¼Œå®ƒæœ¬èº«åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å€¼ï¼›</li>
<li>å°†å…¶èµ‹å€¼ç»™å˜é‡Â <code>foo</code>Â åï¼Œ<code>foo</code>Â å’ŒÂ <code>myObj</code>Â <strong>å½»åº•æ–­å¼€è”ç³»</strong>ï¼›</li>
<li>å½“ä½ æ‰§è¡ŒÂ <code>foo()</code>Â æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>æ™®é€šå‡½æ•°è°ƒç”¨</strong>ï¼ˆæ²¡æœ‰é€šè¿‡å¯¹è±¡ï¼‰ï¼Œå› æ­¤è§¦å‘çš„æ˜¯Â <strong>é»˜è®¤ç»‘å®šè§„åˆ™</strong>ã€‚</li>
</ol>
<p>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// ç›¸å½“äº window.foo() â†’ this = window</span>
</code></pre>
<p>æ‰€ä»¥ï¼Œåœ¨ <code>showThis</code> å†…éƒ¨ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'æå®¢é‚¦'</span>; <span class="hljs-comment">// å®é™…ä¸Šæ˜¯ window.name = 'æå®¢é‚¦'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);    <span class="hljs-comment">// è¾“å‡º window å¯¹è±¡</span>
</code></pre>
<blockquote>
<p>ğŸ”¥ è¿™å°±æ˜¯â€œéšå¼ç»‘å®šä¸¢å¤±â€ï¼š<br/>
<strong>åŸæœ¬å±äºå¯¹è±¡çš„æ–¹æ³•ï¼Œä¸€æ—¦è¢«å½“ä½œæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œå°±å¤±å»äº†ä¸åŸå¯¹è±¡çš„ä¸Šä¸‹æ–‡å…³è”ï¼Œ<code>this</code> å›é€€åˆ°å…¨å±€å¯¹è±¡ï¼ˆæˆ– <code>undefined</code>ï¼‰ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-13">ç¬¬äº”éƒ¨åˆ†ï¼š<code>new</code>Â è°ƒç”¨ â†’ new ç»‘å®šï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</h3>
<p>ä½ å¯èƒ½å†™è¿‡è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateObj</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span>;
}

<span class="hljs-keyword">var</span> myObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateObj</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myObj.<span class="hljs-property">name</span>); <span class="hljs-comment">// "æå®¢æ—¶é—´"</span>
</code></pre>
<p>ä½†ä½ æ˜¯å¦æƒ³è¿‡ï¼š<strong>ä¸ºä»€ä¹ˆ <code>this</code> åœ¨è¿™é‡ŒæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Ÿ</strong></p>
<p>è¿™èƒŒåæ˜¯ <code>new</code> æ“ä½œç¬¦åœ¨è¿è¡Œæ—¶å®Œæˆçš„ä¸€ç³»åˆ—ç²¾å¯†æ­¥éª¤ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œæ‰‹åŠ¨å®ç° <code>new</code>â€æ¥è¿˜åŸå…¶æœ¬è´¨ï¼š</p>
<h5 data-id="heading-14">âœ… æ­£ç¡®çš„æ‰‹å†™Â <code>new</code>Â å®ç°ï¼ˆæ•™å­¦ç‰ˆï¼‰</h5>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> obj = {};

    <span class="hljs-comment">// 2. å°†æ–°å¯¹è±¡çš„ [[Prototype]] é“¾æ¥åˆ°æ„é€ å‡½æ•°çš„ prototype</span>
    obj.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;

    <span class="hljs-comment">// 3. å°†æ„é€ å‡½æ•°å†…çš„ this ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(obj, args);

    <span class="hljs-comment">// 4. å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼›å¦åˆ™è¿”å›æ–°å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> &amp;&amp; result !== <span class="hljs-literal">null</span>) ? result : obj;
}
</code></pre>
<p>ğŸ§ Â <code>new</code>Â ç»‘å®šçš„æ ¸å¿ƒè§„åˆ™ï¼š</p>
<p>å½“ä½¿ç”¨ <code>new CreateObj()</code> æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œ</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ <em>ç©ºå¯¹è±¡</em>ï¼›</li>
<li>å°†è¯¥å¯¹è±¡çš„å†…éƒ¨Â <code>[[Prototype]]</code>Â é“¾æ¥åˆ°Â <code>CreateObj.prototype</code>ï¼›</li>
<li>å°†Â <code>CreateObj</code>Â å‡½æ•°ä½“å†…çš„Â <code>this</code>Â ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ï¼›</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä½“**ï¼ˆå³Â <code>this.name = "æå®¢æ—¶é—´"</code>ï¼‰ï¼›</li>
<li>å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è‡ªåŠ¨è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li>
</ol>
<h3 data-id="heading-15">ç¬¬å…­éƒ¨åˆ†ï¼šDOM äº‹ä»¶ç›‘å¬å™¨ä¸­çš„Â <code>this</code>Â </h3>
<p>è€ƒè™‘è¿™æ®µå¸¸è§ä»£ç ï¼š</p>
<pre><code class="hljs language-Html" lang="Html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"link"</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'link'</span>)
  .<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// ğŸ‘‰ è¾“å‡º &lt;a id="link"&gt;ç‚¹å‡»æˆ‘&lt;/a&gt;</span>
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å°½ç®¡è¿™æ˜¯ä¸€ä¸ª<strong>æ™®é€šå‡½æ•°</strong>ä½œä¸ºå›è°ƒä¼ å…¥ï¼Œä¸”ä»¥<strong>æ™®é€šæ–¹å¼è¢«è°ƒç”¨</strong>ï¼ˆæˆ‘ä»¬å¹¶æ²¡æœ‰å†™ <code>handler.call(element)</code>ï¼‰</p>
<p>ä½†å®ƒçš„ <code>this</code> å´ç¥å¥‡åœ°æŒ‡å‘äº†è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ ã€‚</p>
<h5 data-id="heading-16">ğŸ” è¿™æ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ</h5>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>æµè§ˆå™¨åœ¨å†…éƒ¨è°ƒç”¨ä½ çš„å›è°ƒå‡½æ•°æ—¶ï¼Œæ˜¾å¼ç»‘å®šäº† <code>this</code>ã€‚</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨å¤§è‡´åšäº†è¿™æ ·çš„äº‹ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-comment">// æµè§ˆå™¨å†…éƒ¨ä¼ªä»£ç </span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'link'</span>);
<span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); };

<span class="hljs-comment">// å½“ç‚¹å‡»å‘ç”Ÿæ—¶ï¼š</span>
handler.<span class="hljs-title function_">call</span>(element, event); <span class="hljs-comment">// â† æ˜¾å¼å°† this è®¾ä¸º elementï¼</span>
</code></pre>
<p>å› æ­¤ï¼Œè™½ç„¶ä½ å†™çš„æ˜¯ä¸€ä¸ªâ€œæ™®é€šå‡½æ•°â€ï¼Œä½†<strong>è°ƒç”¨è€…ï¼ˆæµè§ˆå™¨ï¼‰ä½¿ç”¨äº† <code>.call()</code></strong> ï¼Œä½¿å¾— <code>this</code> æŒ‡å‘äº‹ä»¶ç›®æ ‡ï¼ˆevent targetï¼‰ã€‚</p>
<blockquote>
<p>âœ… è¿™ä¸æ˜¯ JavaScript å¼•æ“çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œæ˜¯ <strong>DOM API çš„è®¾è®¡çº¦å®š</strong>ã€‚</p>
</blockquote>
<hr/>
<h5 data-id="heading-17">âš ï¸ æ³¨æ„ï¼šç®­å¤´å‡½æ•°ä¼šç ´åè¿™ä¸€è¡Œä¸ºï¼</h5>
<p>å¦‚æœä½ æ”¹ç”¨ç®­å¤´å‡½æ•°ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'link'</span>)
  .<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// ğŸ‘‰ è¾“å‡º windowï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</span>
  });
</code></pre>
<p>ä½ ä¼šå‘ç° <code>this</code> å˜æˆäº†å…¨å±€å¯¹è±¡ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºï¼š</p>
<ul>
<li>ç®­å¤´å‡½æ•°<strong>æ²¡æœ‰è‡ªå·±çš„Â <code>this</code></strong>ï¼›</li>
<li>å®ƒçš„Â <code>this</code>Â <strong>ç»§æ‰¿è‡ªå¤–å±‚è¯æ³•ä½œç”¨åŸŸ</strong>ï¼ˆè¿™é‡Œæ˜¯å…¨å±€ä½œç”¨åŸŸï¼‰ï¼›</li>
<li>æµè§ˆå™¨å³ä½¿æƒ³é€šè¿‡Â <code>.call()</code>Â ç»‘å®šÂ <code>this</code>ï¼Œä¹Ÿå¯¹ç®­å¤´å‡½æ•°æ— æ•ˆï¼ˆè§„èŒƒè§„å®šç®­å¤´å‡½æ•°å¿½ç•¥Â <code>this</code>Â å‚æ•°ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“Œ æ‰€ä»¥ï¼š<strong>å¦‚æœä½ æƒ³åœ¨äº‹ä»¶å›è°ƒä¸­ä½¿ç”¨ <code>this</code> æŒ‡å‘å…ƒç´ ï¼Œå¿…é¡»ä½¿ç”¨æ™®é€šå‡½æ•°ã€‚</strong></p>
</blockquote>
<blockquote>
<p>ğŸ’¡ è®°ä½ï¼š<strong><code>this</code> çš„å€¼æ°¸è¿œå–å†³äºâ€œè°åœ¨è°ƒç”¨â€ä»¥åŠâ€œæ€ä¹ˆè°ƒç”¨â€â€”â€”å³ä½¿æ˜¯æµè§ˆå™¨ï¼Œä¹Ÿåœ¨éµå®ˆè¿™ä¸€åŸåˆ™ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-18">ğŸ§© æ€»ç»“ï¼š<code>this</code>Â ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰</h3>



































<table><thead><tr><th>ç»‘å®šç±»å‹</th><th>è°ƒç”¨å½¢å¼</th><th><code>this</code>Â æŒ‡å‘</th></tr></thead><tbody><tr><td><strong>new ç»‘å®š</strong></td><td><code>new Fn()</code></td><td>æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</td></tr><tr><td><strong>æ˜¾å¼ç»‘å®š</strong></td><td><code>fn.call(obj)</code>,Â <code>fn.bind(obj)</code></td><td>æŒ‡å®šçš„å¯¹è±¡Â <code>obj</code></td></tr><tr><td><strong>éšå¼ç»‘å®š</strong></td><td><code>obj.method()</code></td><td><code>obj</code></td></tr><tr><td><strong>é»˜è®¤ç»‘å®š</strong></td><td><code>fn()</code></td><td>å…¨å±€å¯¹è±¡ /Â <code>undefined</code></td></tr><tr><td><strong>ç®­å¤´å‡½æ•°</strong></td><td>ä»»æ„</td><td>ç»§æ‰¿å¤–å±‚è¯æ³•ä½œç”¨åŸŸçš„Â <code>this</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ç»ˆæå¿ƒæ³•</strong>ï¼š<br/>
<strong>ä¸è¦é—®â€œ<code>this</code> åº”è¯¥æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œè¦é—®â€œå®ƒæ˜¯æ€ä¹ˆè¢«è°ƒç”¨çš„ï¼Ÿâ€</strong><br/>
ç­”æ¡ˆï¼Œæ°¸è¿œè—åœ¨è°ƒç”¨æ ˆä¸­ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>