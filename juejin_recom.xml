<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ç»™ä½ çš„Idaæ’ä¸Šç¿…è†€]]></title>    <link>https://juejin.cn/post/7585206349748092980</link>    <guid>https://juejin.cn/post/7585206349748092980</guid>    <pubDate>2025-12-19T06:42:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585206349748092980" data-draft-id="7585180150250930191" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™ä½ çš„Idaæ’ä¸Šç¿…è†€"/> <meta itemprop="keywords" content="å®‰å…¨,é€†å‘"/> <meta itemprop="datePublished" content="2025-12-19T06:42:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‹é£å®‰å…¨"/> <meta itemprop="url" content="https://juejin.cn/user/3148642844684638"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™ä½ çš„Idaæ’ä¸Šç¿…è†€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148642844684638/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‹é£å®‰å…¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:42:53.000Z" title="Fri Dec 19 2025 06:42:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç›®æ ‡</h2>
<p>â€œå°xåŒå­¦ï¼ŒæŠŠ0x1011218f çš„å‡½æ•°ä¸­çš„èŠ±æŒ‡ä»¤å»é™¤æ‰â€ã€‚</p>
<p>æœ€è¿‘é£å“¥å·²ç»é™·å…¥åˆ°AIä¸­æ— æ³•è‡ªæ‹”ï¼Œæ„Ÿè§‰ä»¥åå¤æ³•åˆ†æéƒ½å¿«è¦æˆéé—äº†ï¼Œä»¥åçš„æ ‡é¢˜éƒ½å¾—æ˜¯"ä¼ æ‰¿ä¸‰åå¹´ï¼Œå¤æ³•çº¯æ‰‹å·¥å»èŠ±æŒ‡ä»¤ï¼Œå®šä½å…³é”®ç®—æ³•"ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ­¥éª¤</h2>
<h3 data-id="heading-2">ä½ çš„Ida Pythonåœ¨å“ªé‡Œï¼Ÿ</h3>
<p>é¦–å…ˆä½ å¾—çŸ¥é“ä½ çš„ida pythonæ˜¯è°ï¼Ÿ åœ¨å“ªé‡Œï¼Ÿ</p>
<p>åŸåˆ™ä¸€ï¼Œä¸è¦ç”¨ç³»ç»Ÿçš„pythonï¼Œä¸ç„¶ä½ ä¹±ä¸ƒå…«ç³Ÿè£…ä¸€å †åŒ…ï¼ŒæŠŠç³»ç»Ÿçš„pythonå¹²åäº†ï¼Œå°±åºŸäº†ï¼Œæœ€å¥½åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œè¿™ä¸ªpythonåªç»™idaç”¨</p>
<p>/Applications/IDA Professional 9.1.app/Contents/MacOS</p>
<p>ç›®å½•ä¸‹é¢æ‰¾åˆ° idapyswitch</p>
<pre><code class="hljs language-bash" lang="bash">fenfei@fenfei-Mac-Studio MacOS % ./idapyswitch 
The following Python installations were found:
    <span class="hljs-comment">#0: 3.13.0 ('') (/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/Python)</span>
    <span class="hljs-comment">#1: 3.12.0 ('') (/opt/homebrew/Cellar/python@3.12/3.12.10/Frameworks/Python.framework/Versions/3.12/Python)</span>
    <span class="hljs-comment">#2: 3.11.0 ('') (/opt/homebrew/Cellar/python@3.11/3.11.12/Frameworks/Python.framework/Versions/3.11/Python)</span>
    <span class="hljs-comment">#3: 3.10.0 ('') (/opt/homebrew/Cellar/python@3.10/3.10.17/Frameworks/Python.framework/Versions/3.10/Python)</span>
    <span class="hljs-comment">#4: 3.9.0 ('') (/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/Python3)</span>
    <span class="hljs-comment">#5: 3.9.0 ('') (/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.9/Python3)</span>
Please pick a number between 0 and 5 (default: 0)
</code></pre>
<p>å¯ä»¥çœ‹åˆ° æˆ‘ç°åœ¨ida ç”¨çš„æ˜¯ py3.13</p>
<p>ç„¶åä½¿ç”¨ conda è£…ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åé‡Œé¢ä¹Ÿè£…python3.13</p>
<pre><code class="hljs language-bash" lang="bash">conda create -n ida_env python=3.13
</code></pre>
<p>ä¿®æ”¹
/Applications/IDA Professional 9.1.app/Contents/MacOS/python/init.py</p>
<p>å¢åŠ ä¸€è¡Œ
sys.path.append("/opt/miniconda3/envs/ida_env/lib/python3.13/site-packages")</p>
<p>æ­å–œä½ ï¼Œä»æ­¤ä»¥åä½ çš„ida pythonå°±ä¸“æ¬¾ä¸“ç”¨äº†</p>
<p><strong>ğŸ’¡ TIP</strong><br/>
ä»ida  File -&gt; Script command... æ‰§è¡Œ
import sys
print(sys.path)</p>
<p>å¯ä»¥ç¡®è®¤ä¸€ä¸‹ä½ çš„é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œ</p>
<h3 data-id="heading-3">æ’ä¸Šç¿…è†€</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmrexodia%2Fida-pro-mcp" target="_blank" title="https://github.com/mrexodia/ida-pro-mcp" ref="nofollow noopener noreferrer">github.com/mrexodia/idâ€¦</a></p>
<p>mcpæ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªå¾—é—®ai</p>
<p>MCP ä¸€èˆ¬æŒ‡çš„æ˜¯ Model Context Protocolï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰ã€‚</p>
<p>ä¸€å¥è¯ç‰ˆç†è§£ï¼ˆå…ˆçœ‹è¿™ä¸ªï¼‰</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">MCP</span> = ç»™ AI è§„å®šçš„ä¸€å¥—â€œæ’ä»¶ / å¤–æŒ‚æ¥å£æ ‡å‡†â€
</code></pre>
<p>å°±åƒï¼š</p>
<ul>
<li>USB æ˜¯ç¡¬ä»¶æ¥å£æ ‡å‡†</li>
<li>HTTP æ˜¯ç½‘ç»œæ¥å£æ ‡å‡†</li>
<li>MCP æ˜¯ AI è°ƒç”¨å¤–éƒ¨èƒ½åŠ›çš„æ¥å£æ ‡å‡†</li>
</ul>
<p>å…¶å®ä½ å°±ç†è§£æˆï¼Œida mcp å¯ä»¥è®©AI ide ç›´æ¥æ“ä½œä½ çš„ida</p>
<p>æˆ‘ä»¬å¼€å§‹å®‰è£… ida mcp</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥idaä¸“ç”¨pyç¯å¢ƒ</span>
conda activate ida_env
pip uninstall ida-pro-mcp
pip install https://github.com/mrexodia/ida-pro-mcp/archive/refs/heads/main.zip
ida-pro-mcp --install
</code></pre>
<p>okäº†ï¼Œ å®‰è£…å®Œæ¯•ï¼Œ æ‰“å¼€ ida ï¼Œæ‰¾ä¸ªæ ·æœ¬åç¼–è¯‘ï¼Œç„¶å Edit -&gt; Plugins -&gt; MCP</p>
<pre><code class="hljs language-bash" lang="bash">[MCP] Server started:
  Streamable HTTP: http://127.0.0.1:13337/mcp
  SSE: http://127.0.0.1:13337/sse
  Config: http://127.0.0.1:13337/config.html
</code></pre>
<p>è¿™å°±æ˜¯å¯åŠ¨æˆåŠŸï¼Œ</p>
<p><strong>ğŸ’¡ TIP</strong><br/>
æœ‰æ—¶å€™ç«¯å£ä¼šæ˜¯  13338 ,æ ¹æ®å®é™…æƒ…å†µé…ç½® AI IDE</p>
<h3 data-id="heading-4">é…ç½®AI IDE</h3>
<p>æ‰“å¼€ä½ å¸¸ç”¨çš„ AI IDEï¼Œ åŒ…æ‹¬ä¸é™äº Cursor / CodeGeeX / Trae / Codebuddy</p>
<p>é…ç½® MCP</p>
<pre><code class="hljs language-bash" lang="bash">{<span class="hljs-string">"mcpServers"</span>:{<span class="hljs-string">"ida"</span>:{<span class="hljs-string">"transport"</span>:<span class="hljs-string">"sse"</span>,<span class="hljs-string">"url"</span>:<span class="hljs-string">"http://127.0.0.1:13337/sse"</span>,<span class="hljs-string">"alwaysAllow"</span>:[<span class="hljs-string">"idb_meta"</span>,<span class="hljs-string">"list_funcs"</span>,<span class="hljs-string">"disasm"</span>,<span class="hljs-string">"decompile"</span>,<span class="hljs-string">"lookup_funcs"</span>,<span class="hljs-string">"analyze_funcs"</span>,<span class="hljs-string">"get_bytes"</span>]}}}
</code></pre>
<p>å‡ºæ¥è¿™ä¸ªæ•ˆæœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ebe25d8097e436f9efee081bd5e185d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWL6aOe5a6J5YWo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766731373&amp;x-signature=PBKSNAWMURJJalZbO6fSe2R5uHw%3D" alt="idamcp" loading="lazy"/></p>
<p>å¯ä»¥å¼€å§‹äº†</p>
<pre><code class="hljs language-bash" lang="bash">
ä»ida mcpä¸­ï¼Œè¯·æŠŠ 0x101159B88 å‡½æ•°çš„èŠ±æŒ‡ä»¤å»æ‰

ä»ida mcpä¸­ï¼Œè¯·å¸®æˆ‘åˆ†æä¸€ä¸‹ xid æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Œ ç”Ÿæˆfrida hook è„šæœ¬ è·Ÿè¸ªä¸€ä¸‹ã€‚

</code></pre>
<p>å—¯ çœŸé¦™</p>
<h2 data-id="heading-5">ä¸‰ã€æ€»ç»“</h2>
<p>æ„Ÿè§‰aiè¿›æ­¥äº†ï¼Œä»¥å‰çº¢æä¸€æ—¶çš„ AI Prompt æ²¡é‚£ä¹ˆé‡è¦äº†ï¼Œåæ­£æˆ‘è¯´çš„ AI åŸºæœ¬éƒ½èƒ½å¬æ‡‚ã€‚</p>
<p>å¤æ³•çº¯æ‰‹å·¥è¿˜æœ‰æ²¡æœ‰æ„ä¹‰ï¼Ÿ æœ‰ä¸ªç½‘å‹è¯´è¿‡ <strong>ä½ ä¸ä¼šçš„åˆ«æŒ‡æœ› ai ä¼šï¼Œä½ èƒ½ç”¨ ai æå‡ºæ¥æ˜¯å› ä¸ºä½ ä¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/165a3aa8d9264f9391111cfa154b70c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWL6aOe5a6J5YWo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766731373&amp;x-signature=oqmeVu%2B5R1N0uZymREVFEH4eFzI%3D" alt="ffshow" loading="lazy"/>
<strong>æ’ä¸Šç¿…è†€çš„äººæ˜¯å¤©ä½¿ï¼Œæ’ä¸Šç¿…è†€çš„è€é¼ æ˜¯è™è </strong></p>
<p><strong>ğŸ’¡ TIP</strong><br/>
: æœ¬æ–‡çš„ç›®çš„åªæœ‰ä¸€ä¸ªå°±æ˜¯å­¦ä¹ æ›´å¤šçš„é€†å‘æŠ€å·§å’Œæ€è·¯ï¼Œå¦‚æœæœ‰äººåˆ©ç”¨æœ¬æ–‡æŠ€æœ¯å»è¿›è¡Œéæ³•å•†ä¸šè·å–åˆ©ç›Šå¸¦æ¥çš„æ³•å¾‹è´£ä»»éƒ½æ˜¯æ“ä½œè€…è‡ªå·±æ‰¿æ‹…ï¼Œå’Œæœ¬æ–‡ä»¥åŠä½œè€…æ²¡å…³ç³».</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ç¨‹åºå´©æºƒæ—¶å†…å­˜æ³„æ¼çš„çœŸç›¸]]></title>    <link>https://juejin.cn/post/7585022810180550719</link>    <guid>https://juejin.cn/post/7585022810180550719</guid>    <pubDate>2025-12-18T11:29:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585022810180550719" data-draft-id="7585031571889700907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ç¨‹åºå´©æºƒæ—¶å†…å­˜æ³„æ¼çš„çœŸç›¸"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-18T11:29:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ç¨‹åºå´©æºƒæ—¶å†…å­˜æ³„æ¼çš„çœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T11:29:12.000Z" title="Thu Dec 18 2025 11:29:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„C++ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­çªç„¶å´©æºƒäº†â€”â€”å¯èƒ½æ˜¯æ®µé”™è¯¯ã€é™¤é›¶å¼‚å¸¸ï¼Œæˆ–æ˜¯æŸä¸ªæœªå¤„ç†çš„å¼‚å¸¸ã€‚ç¨‹åºç”³è¯·çš„å¤§é‡å †å†…å­˜è¿˜æœªæ¥å¾—åŠé‡Šæ”¾ã€‚ä½œä¸ºä¸€åè´Ÿè´£ä»»çš„ç¨‹åºå‘˜ï¼Œä½ ä¸ç¦è¦é—®ï¼šè¿™äº›å†…å­˜ç®—æ³„æ¼äº†å—ï¼Ÿå®ƒä»¬è¿˜èƒ½è¢«ç³»ç»Ÿå›æ”¶é‡ç”¨å—ï¼Ÿæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Ÿ</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨ï¼Œå¹¶æä¾›ä¸€å¥—å®Œæ•´çš„é˜²æŠ¤ç­–ç•¥ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šå´©æºƒæ—¶çš„å†…å­˜å¤„ç†</h2>
<h3 data-id="heading-1">è™šæ‹Ÿå†…å­˜ç³»ç»Ÿçš„åŸºæœ¬åŸç†</h3>
<p>ç°ä»£æ“ä½œç³»ç»Ÿä½¿ç”¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚å½“ç¨‹åºåˆ†é…å†…å­˜æ—¶ï¼Œå®é™…å‘ç”Ÿçš„æ˜¯è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†é¡µçš„æ˜ å°„ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph "è¿›ç¨‹Açš„è§†è§’"
        A1[ä»£ç æ®µ]
        A2[æ•°æ®æ®µ]
        A3[å †æ®µ - åˆ†é…çš„å†…å­˜]
        A4[æ ˆæ®µ]
        A5[å…±äº«åº“]
    end
    
    subgraph "è¿›ç¨‹Bçš„è§†è§’"
        B1[ä»£ç æ®µ]
        B2[æ•°æ®æ®µ]
        B3[å †æ®µ]
        B4[æ ˆæ®µ]
        B5[å…±äº«åº“]
    end
    
    subgraph "æ“ä½œç³»ç»Ÿå†…æ ¸"
        MMU[å†…å­˜ç®¡ç†å•å…ƒ MMU]
        PT[é¡µè¡¨ Page Tables]
    end
    
    subgraph "ç‰©ç†å†…å­˜"
        P1[é¡µæ¡† 1]
        P2[é¡µæ¡† 2]
        P3[é¡µæ¡† 3]
        P4[é¡µæ¡† 4]
        P5[é¡µæ¡† 5]
    end
    
    A3 --&gt; MMU
    B3 --&gt; MMU
    MMU --&gt; PT
    PT --&gt; P3
    PT --&gt; P5
</code></pre>
<p><strong>ä¸Šå›¾å±•ç¤ºäº†å…³é”®æ¦‚å¿µ</strong>ï¼šæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œé€šè¿‡MMUå’Œé¡µè¡¨æ˜ å°„åˆ°ç‰©ç†å†…å­˜ã€‚å½“è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿåªéœ€è¦æ¸…é™¤é¡µè¡¨é¡¹ï¼Œç‰©ç†é¡µå°±å¯ä»¥è¢«é‡ç”¨ã€‚</p>
<h3 data-id="heading-2">æ“ä½œç³»ç»Ÿè§†è§’ï¼šå†…å­˜ç®¡ç†çš„åŒé‡æ ‡å‡†</h3>
<p><strong>ä»ç¨‹åºå‘˜çš„è§’åº¦çœ‹</strong>ï¼Œè¿™æ— ç–‘æ˜¯å†…å­˜æ³„æ¼â€”â€”ç¨‹åºæœªèƒ½éµå¾ª"è°ç”³è¯·è°é‡Šæ”¾"çš„åŸºæœ¬åŸåˆ™ã€‚ä½†åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œæƒ…å†µåˆ™å®Œå…¨ä¸åŒã€‚</p>
<p>ç°ä»£æ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å½“è¿›ç¨‹å´©æºƒæ—¶ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šæ‰§è¡Œä»¥ä¸‹æ¸…ç†æ“ä½œï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä¼ªä»£ç é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">terminate_process</span><span class="hljs-params">(Process* proc)</span> </span>{
    <span class="hljs-comment">// 1. é‡Šæ”¾æ‰€æœ‰ç”¨æˆ·æ€å †å†…å­˜</span>
    <span class="hljs-built_in">release_user_heap_memory</span>(proc-&gt;heap);
    
    <span class="hljs-comment">// 2. é‡Šæ”¾è™šæ‹Ÿåœ°å€ç©ºé—´</span>
    <span class="hljs-built_in">free_page_tables</span>(proc-&gt;page_tables);
    
    <span class="hljs-comment">// 3. é‡Šæ”¾å…¶ä»–ç³»ç»Ÿèµ„æº</span>
    <span class="hljs-built_in">close_all_handles</span>(proc-&gt;handles);
    <span class="hljs-built_in">release_locks</span>(proc-&gt;locks);
    
    <span class="hljs-comment">// 4. ä»è¿›ç¨‹è¡¨ä¸­ç§»é™¤</span>
    <span class="hljs-built_in">remove_from_process_table</span>(proc);
}
</code></pre>
<h3 data-id="heading-3">å†…å­˜å›æ”¶çš„æ—¶é—´çº¿</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡æ—¶é—´çº¿ç†è§£å†…å­˜çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">timeline
    title å†…å­˜ç”Ÿå‘½å‘¨æœŸä¸å´©æºƒå½±å“
    section æ­£å¸¸æµç¨‹
        ç¨‹åºå¯åŠ¨ : è¿›ç¨‹åˆ›å»ºè™šæ‹Ÿåœ°å€ç©ºé—´
        å†…å­˜ç”³è¯· : new/mallocè°ƒç”¨ç³»ç»ŸAPI
        å†…å­˜ä½¿ç”¨ : è¯»å†™æ“ä½œ
        å†…å­˜é‡Šæ”¾ : delete/freeå½’è¿˜å†…å­˜
        ç¨‹åºé€€å‡º : ç³»ç»Ÿå›æ”¶å‰©ä½™èµ„æº
    
    section å´©æºƒæµç¨‹
        ç¨‹åºå¯åŠ¨ : è¿›ç¨‹åˆ›å»ºè™šæ‹Ÿåœ°å€ç©ºé—´
        å†…å­˜ç”³è¯· : new/mallocè°ƒç”¨ç³»ç»ŸAPI
        å†…å­˜ä½¿ç”¨ : è¯»å†™æ“ä½œ
        å‘ç”Ÿå´©æºƒ : æ®µé”™è¯¯/é™¤é›¶ç­‰
        ç³»ç»Ÿæ¥ç®¡ : å†…æ ¸ç»ˆæ­¢è¿›ç¨‹
        å¼ºåˆ¶å›æ”¶ : é‡Šæ”¾æ‰€æœ‰è¿›ç¨‹èµ„æº
</code></pre>
<h3 data-id="heading-4">ä¸åŒç±»å‹èµ„æºçš„è¡Œä¸ºå·®å¼‚</h3>
<p>å¹¶éæ‰€æœ‰èµ„æºåœ¨å´©æºƒæ—¶çš„è¡¨ç°éƒ½ç›¸åŒï¼š</p>















































<table><thead><tr><th>èµ„æºç±»å‹</th><th>å´©æºƒåæ˜¯å¦è‡ªåŠ¨é‡Šæ”¾</th><th>æ½œåœ¨é£é™©</th><th>æ¸…ç†æœºåˆ¶</th></tr></thead><tbody><tr><td>æ™®é€šå †å†…å­˜</td><td>âœ… æ˜¯</td><td>æ— </td><td>æ“ä½œç³»ç»Ÿè‡ªåŠ¨å›æ”¶</td></tr><tr><td>å†…å­˜æ˜ å°„æ–‡ä»¶</td><td>âœ… æ˜¯</td><td>æ–‡ä»¶å¯èƒ½å¤„äºä¸ä¸€è‡´çŠ¶æ€</td><td>ç³»ç»Ÿå–æ¶ˆæ˜ å°„</td></tr><tr><td>å…±äº«å†…å­˜</td><td>âŒ å¦</td><td>æŒä¹…åŒ–å­˜åœ¨ç›´åˆ°æ˜¾å¼åˆ é™¤</td><td>éœ€è¦shm_unlink</td></tr><tr><td>æ–‡ä»¶å¥æŸ„</td><td>âœ… æ˜¯</td><td>å¯èƒ½å»¶è¿Ÿå…³é—­</td><td>å†…æ ¸å¼ºåˆ¶å…³é—­</td></tr><tr><td>äº’æ–¥é”/ä¿¡å·é‡</td><td>âš ï¸ éƒ¨åˆ†</td><td>å¯èƒ½ä¿æŒé”å®šçŠ¶æ€</td><td>å–å†³äºç³»ç»Ÿå®ç°</td></tr><tr><td>ç½‘ç»œè¿æ¥</td><td>âœ… æ˜¯</td><td>TCPè¿æ¥ä¼šè¶…æ—¶å…³é—­</td><td>å‘é€RSTåŒ…</td></tr></tbody></table>
<h2 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šå´©æºƒæ³„æ¼çš„å®é™…å½±å“</h2>
<h3 data-id="heading-6">çŸ­æœŸå½±å“ vs é•¿æœŸå½±å“</h3>
<p><strong>çŸ­æœŸå½±å“ï¼ˆè¿›ç¨‹å­˜æ´»æ—¶ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">leaking_function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span>* memory_block1 = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">100</span>];  <span class="hljs-comment">// æ³„æ¼ç‚¹1</span>
    <span class="hljs-keyword">if</span> (some_condition) {
        <span class="hljs-type">int</span>* memory_block2 = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">200</span>];  <span class="hljs-comment">// æ³„æ¼ç‚¹2</span>
        <span class="hljs-built_in">crash_here</span>();  <span class="hljs-comment">// åœ¨æ­¤å¤„å´©æºƒ</span>
        <span class="hljs-keyword">delete</span>[] memory_block2;  <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
    }
    <span class="hljs-keyword">delete</span>[] memory_block1;  <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
}

<span class="hljs-comment">// æ­¤æ—¶å†…å­˜ä»åœ¨è¿›ç¨‹çš„å †ä¸­ï¼Œæ— æ³•è¢«åŒä¸€è¿›ç¨‹çš„å…¶ä»–éƒ¨åˆ†é‡ç”¨</span>
</code></pre>
<p><strong>é•¿æœŸå½±å“ï¼ˆè¿›ç¨‹ç»ˆæ­¢åï¼‰ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¨‹åºAå´©æºƒå</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">program_A</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">char</span>* big_memory = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">100</span>];  <span class="hljs-comment">// 100MB</span>
    <span class="hljs-built_in">cause_segfault</span>();  <span class="hljs-comment">// å´©æºƒ</span>
}

<span class="hljs-comment">// ç¨‹åºBå¯ä»¥å®‰å…¨ä½¿ç”¨è¿™äº›å†…å­˜</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">program_B</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ“ä½œç³»ç»Ÿå·²å°†ç¨‹åºAçš„å†…å­˜æ ‡è®°ä¸ºå¯ç”¨</span>
    <span class="hljs-comment">// æ–°çš„åˆ†é…è¯·æ±‚å¯èƒ½é‡ç”¨è¿™äº›ç‰©ç†é¡µ</span>
    <span class="hljs-type">char</span>* reused_memory = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">50</span>];
}
</code></pre>
<h3 data-id="heading-7">éšè—çš„å±é™©ï¼šèµ„æºæ³„æ¼çš„è¿é”ååº”</h3>
<p>å°½ç®¡æ“ä½œç³»ç»Ÿä¼šå›æ”¶å†…å­˜ï¼Œä½†æŸäº›èµ„æºæ³„æ¼å¯èƒ½å¯¼è‡´æ›´ä¸¥é‡çš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ–‡ä»¶ç³»ç»Ÿé”æ³„æ¼</strong></li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_file</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">std::ofstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">"critical.lock"</span>, std::ios::binary)</span></span>;
    file.<span class="hljs-built_in">write</span>(<span class="hljs-string">"LOCKED"</span>, <span class="hljs-number">6</span>);
    file.<span class="hljs-built_in">flush</span>();
    
    <span class="hljs-comment">// å¦‚æœåœ¨è¿™é‡Œå´©æºƒï¼Œæ–‡ä»¶å¯èƒ½ä¿æŒæ‰“å¼€çŠ¶æ€</span>
    <span class="hljs-comment">// å…¶ä»–è¿›ç¨‹æ— æ³•è®¿é—®è¯¥æ–‡ä»¶</span>
    <span class="hljs-built_in">risky_operation</span>();
    
    <span class="hljs-comment">// æ­£å¸¸å…³é—­</span>
    file.<span class="hljs-built_in">close</span>();
    std::<span class="hljs-built_in">remove</span>(<span class="hljs-string">"critical.lock"</span>);
}
</code></pre>
<ol start="2">
<li><strong>æ•°æ®åº“äº‹åŠ¡æœªæäº¤</strong></li>
</ol>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update_database</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">begin_transaction</span>();
    <span class="hljs-built_in">execute_query</span>(<span class="hljs-string">"UPDATE accounts SET balance = balance - 100 WHERE id = 1"</span>);
    
    <span class="hljs-comment">// å´©æºƒï¼äº‹åŠ¡æœªæäº¤ä¹Ÿæœªå›æ»š</span>
    <span class="hljs-built_in">crash_somehow</span>();
    
    <span class="hljs-comment">// æ•°æ®åº“å¯èƒ½ä¿æŒé”å®šçŠ¶æ€</span>
    <span class="hljs-built_in">commit_transaction</span>();  <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
}
</code></pre>
<h2 data-id="heading-8">ç¬¬ä¸‰éƒ¨åˆ†ï¼šé˜²æŠ¤ç­–ç•¥çš„å¤šå±‚é˜²å¾¡ä½“ç³»</h2>
<h3 data-id="heading-9">ç¬¬ä¸€å±‚ï¼šRAIIâ€”â€”C++çš„å†…å­˜å®‰å…¨åŸºçŸ³</h3>
<p><strong>Resource Acquisition Is Initializationï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰</strong> æ˜¯C++é˜²æ­¢èµ„æºæ³„æ¼çš„æ ¹æœ¬èŒƒå¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿå±é™©æ–¹å¼</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">risky_operation</span><span class="hljs-params">()</span> </span>{
    Resource* res1 = <span class="hljs-built_in">acquire_resource</span>();
    Resource* res2 = <span class="hljs-built_in">acquire_resource</span>();  <span class="hljs-comment">// å¯èƒ½æŠ›å‡ºå¼‚å¸¸</span>
    
    <span class="hljs-comment">// å¦‚æœä¸Šé¢æŠ›å‡ºå¼‚å¸¸ï¼Œres1å°±æ³„æ¼äº†</span>
    <span class="hljs-built_in">use_resources</span>(res1, res2);
    
    <span class="hljs-built_in">release_resource</span>(res1);
    <span class="hljs-built_in">release_resource</span>(res2);  <span class="hljs-comment">// å¯èƒ½æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
}

<span class="hljs-comment">// RAIIå®‰å…¨æ–¹å¼</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">safe_operation</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç«‹å³è·å¾—æ‰€æœ‰æƒ</span>
    <span class="hljs-keyword">auto</span> res1 = std::<span class="hljs-built_in">unique_ptr</span>&lt;Resource&gt;(<span class="hljs-built_in">acquire_resource</span>());
    <span class="hljs-keyword">auto</span> res2 = std::<span class="hljs-built_in">unique_ptr</span>&lt;Resource&gt;(<span class="hljs-built_in">acquire_resource</span>());
    
    <span class="hljs-comment">// å³ä½¿æŠ›å‡ºå¼‚å¸¸ï¼Œæ ˆå±•å¼€æ—¶ä¹Ÿä¼šè°ƒç”¨ææ„å‡½æ•°</span>
    <span class="hljs-built_in">use_resources</span>(res1.<span class="hljs-built_in">get</span>(), res2.<span class="hljs-built_in">get</span>());
    
    <span class="hljs-comment">// ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼</span>
}
</code></pre>
<h3 data-id="heading-10">ç¬¬äºŒå±‚ï¼šæ™ºèƒ½æŒ‡é’ˆçš„æ˜æ™ºé€‰æ‹©</h3>
<p>é’ˆå¯¹ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„æ™ºèƒ½æŒ‡é’ˆï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ç‹¬å æ‰€æœ‰æƒï¼Œæ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸ</span>
    std::unique_ptr&lt;DatabaseConnection&gt; db_conn;
    
    <span class="hljs-comment">// å…±äº«æ‰€æœ‰æƒï¼Œå¤šä¸ªç»„ä»¶ä½¿ç”¨</span>
    std::shared_ptr&lt;Configuration&gt; config;
    
    <span class="hljs-comment">// è§‚å¯Ÿè€…ï¼Œä¸æ‹¥æœ‰æ‰€æœ‰æƒ</span>
    std::weak_ptr&lt;Cache&gt; cache_ref;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Application</span>() {
        <span class="hljs-comment">// å·¥å‚å‡½æ•°ç¡®ä¿å¼‚å¸¸å®‰å…¨</span>
        db_conn = Database::<span class="hljs-built_in">create_connection</span>();
        config = std::<span class="hljs-built_in">make_shared</span>&lt;Configuration&gt;();
        
        <span class="hljs-comment">// å³ä½¿æ„é€ å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå·²åˆ†é…çš„èµ„æºä¹Ÿä¼šè‡ªåŠ¨é‡Šæ”¾</span>
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process_data</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// å±€éƒ¨æ™ºèƒ½æŒ‡é’ˆ</span>
        <span class="hljs-keyword">auto</span> buffer = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">char</span>[]&gt;(BUFFER_SIZE);
        
        <span class="hljs-comment">// å°†æ‰€æœ‰æƒä¼ é€’ç»™å‡½æ•°</span>
        <span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">transform_data</span>(std::<span class="hljs-built_in">move</span>(buffer));
        
        <span class="hljs-comment">// bufferç°åœ¨ä¸ºç©ºï¼Œresultæ‹¥æœ‰å†…å­˜æ‰€æœ‰æƒ</span>
        <span class="hljs-comment">// å¦‚æœè¿™é‡Œå´©æºƒï¼Œresultçš„ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨</span>
    }
};
</code></pre>
<h3 data-id="heading-11">ç¬¬ä¸‰å±‚ï¼šå¼‚å¸¸å®‰å…¨çš„ä»£ç è®¾è®¡</h3>
<p>éµå¾ªå¼‚å¸¸å®‰å…¨çš„åŸºæœ¬ä¿è¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionSafeResourceManager</span> {
    std::vector&lt;std::unique_ptr&lt;Resource&gt;&gt; resources;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// åŸºæœ¬ä¿è¯ï¼šå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¯¹è±¡å¤„äºæœ‰æ•ˆçŠ¶æ€</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add_resource</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">auto</span> new_res = std::<span class="hljs-built_in">make_unique</span>&lt;Resource&gt;();
        
        <span class="hljs-comment">// å…ˆå®Œæˆæ‰€æœ‰å¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
        new_res-&gt;<span class="hljs-built_in">initialize</span>();
        
        <span class="hljs-comment">// åªæœ‰è¿™æ—¶æ‰ä¿®æ”¹çŠ¶æ€</span>
        resources.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">move</span>(new_res));
    }
    
    <span class="hljs-comment">// å¼ºä¿è¯ï¼šè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå®Œå…¨å›æ»š</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">transactional_update</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºæ‰€æœ‰æ–°èµ„æº</span>
        <span class="hljs-keyword">auto</span> new_res1 = std::<span class="hljs-built_in">make_unique</span>&lt;Resource&gt;();
        <span class="hljs-keyword">auto</span> new_res2 = std::<span class="hljs-built_in">make_unique</span>&lt;Resource&gt;();
        
        new_res1-&gt;<span class="hljs-built_in">initialize</span>();
        new_res2-&gt;<span class="hljs-built_in">initialize</span>();
        
        <span class="hljs-comment">// å‡†å¤‡å›æ»šç‚¹</span>
        <span class="hljs-keyword">auto</span> old_resources = std::<span class="hljs-built_in">move</span>(resources);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ›¿æ¢èµ„æº</span>
            resources.<span class="hljs-built_in">clear</span>();
            resources.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">move</span>(new_res1));
            resources.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">move</span>(new_res2));
            
            <span class="hljs-comment">// æäº¤ï¼Œå¦‚æœå¤±è´¥åˆ™catchä¸­æ¢å¤</span>
        } <span class="hljs-built_in">catch</span> (...) {
            <span class="hljs-comment">// æ¢å¤æ—§çŠ¶æ€</span>
            resources = std::<span class="hljs-built_in">move</span>(old_resources);
            <span class="hljs-keyword">throw</span>;
        }
    }
};
</code></pre>
<h3 data-id="heading-12">ç¬¬å››å±‚ï¼šä¿¡å·å¤„ç†ä¸ä¼˜é›…ç»ˆæ­¢</h3>
<p>æ•è·è‡´å‘½ä¿¡å·è¿›è¡Œæ¸…ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;csignal&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EmergencyCleanup</span> {
    <span class="hljs-type">static</span> std::vector&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; cleanup_handlers;
    <span class="hljs-type">static</span> <span class="hljs-type">bool</span> cleanup_done;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">register_handler</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>()&gt; handler)</span> </span>{
        cleanup_handlers.<span class="hljs-built_in">push_back</span>(handler);
    }
    
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">emergency_cleanup</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (cleanup_done) <span class="hljs-keyword">return</span>;
        cleanup_done = <span class="hljs-literal">true</span>;
        
        std::cerr &lt;&lt; <span class="hljs-string">"\n=== æ‰§è¡Œç´§æ€¥æ¸…ç† ==="</span> &lt;&lt; std::endl;
        
        <span class="hljs-comment">// é€†åºæ¸…ç†ï¼ˆåè¿›å…ˆå‡ºï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = cleanup_handlers.<span class="hljs-built_in">rbegin</span>(); 
             it != cleanup_handlers.<span class="hljs-built_in">rend</span>(); ++it) {
            <span class="hljs-keyword">try</span> {
                (*it)();
            } <span class="hljs-built_in">catch</span> (...) {
                <span class="hljs-comment">// å¿½ç•¥æ¸…ç†è¿‡ç¨‹ä¸­çš„å¼‚å¸¸</span>
            }
        }
        
        std::cerr &lt;&lt; <span class="hljs-string">"=== æ¸…ç†å®Œæˆ ==="</span> &lt;&lt; std::endl;
    }
    
    <span class="hljs-comment">// RAIIåŒ…è£…å™¨ï¼Œè‡ªåŠ¨æ³¨å†Œ</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopedHandler</span> {
        std::function&lt;<span class="hljs-type">void</span>()&gt; handler;
    <span class="hljs-keyword">public</span>:
        <span class="hljs-built_in">ScopedHandler</span>(std::function&lt;<span class="hljs-built_in">void</span>()&gt; h) : <span class="hljs-built_in">handler</span>(h) {
            <span class="hljs-built_in">register_handler</span>(h);
        }
        
        ~<span class="hljs-built_in">ScopedHandler</span>() {
            <span class="hljs-comment">// æ­£å¸¸é€€å‡ºæ—¶ä¹Ÿéœ€è¦æ¸…ç†</span>
            <span class="hljs-keyword">if</span> (!cleanup_done) {
                <span class="hljs-keyword">try</span> { <span class="hljs-built_in">handler</span>(); } <span class="hljs-built_in">catch</span> (...) {}
            }
        }
    };
};

<span class="hljs-comment">// ä¿¡å·å¤„ç†å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">signal_handler</span><span class="hljs-params">(<span class="hljs-type">int</span> sig)</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* signal_name = <span class="hljs-literal">nullptr</span>;
    
    <span class="hljs-keyword">switch</span>(sig) {
        <span class="hljs-keyword">case</span> SIGSEGV: signal_name = <span class="hljs-string">"SIGSEGV (æ®µé”™è¯¯)"</span>; <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> SIGFPE: signal_name = <span class="hljs-string">"SIGFPE (ç®—æœ¯å¼‚å¸¸)"</span>; <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> SIGILL: signal_name = <span class="hljs-string">"SIGILL (éæ³•æŒ‡ä»¤)"</span>; <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> SIGABRT: signal_name = <span class="hljs-string">"SIGABRT (ç¨‹åºä¸­æ­¢)"</span>; <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>: signal_name = <span class="hljs-string">"æœªçŸ¥ä¿¡å·"</span>; <span class="hljs-keyword">break</span>;
    }
    
    std::cerr &lt;&lt; <span class="hljs-string">"\nâš ï¸  æ¥æ”¶åˆ°ä¿¡å·: "</span> &lt;&lt; signal_name 
              &lt;&lt; <span class="hljs-string">" ("</span> &lt;&lt; sig &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; std::endl;
    
    <span class="hljs-comment">// æ‰§è¡Œç´§æ€¥æ¸…ç†</span>
    EmergencyCleanup::<span class="hljs-built_in">emergency_cleanup</span>();
    
    <span class="hljs-comment">// æ¢å¤é»˜è®¤å¤„ç†å¹¶é‡æ–°æŠ›å‡º</span>
    <span class="hljs-built_in">signal</span>(sig, SIG_DFL);
    <span class="hljs-built_in">raise</span>(sig);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup_signal_handlers</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">signal</span>(SIGSEGV, signal_handler);
    <span class="hljs-built_in">signal</span>(SIGFPE, signal_handler);
    <span class="hljs-built_in">signal</span>(SIGILL, signal_handler);
    <span class="hljs-built_in">signal</span>(SIGABRT, signal_handler);
    <span class="hljs-comment">// æ³¨æ„ï¼šSIGKILLå’ŒSIGSTOPä¸èƒ½è¢«æ•è·</span>
}
</code></pre>
<h3 data-id="heading-13">ç¬¬äº”å±‚ï¼šè¿›ç¨‹éš”ç¦»ä¸æ²™ç®±æ¨¡å¼</h3>
<p>å°†å¯èƒ½å´©æºƒçš„ä»£ç éš”ç¦»åˆ°å­è¿›ç¨‹ä¸­ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">IsolatedProcess</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Func&gt;
    <span class="hljs-type">static</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">run</span><span class="hljs-params">(Func&amp;&amp; func)</span> -&gt; std::optional&lt;<span class="hljs-title">decltype</span><span class="hljs-params">(func())</span>&gt; </span>{
        <span class="hljs-comment">// åˆ›å»ºç®¡é“ç”¨äºç»“æœé€šä¿¡</span>
        <span class="hljs-type">int</span> pipefd[<span class="hljs-number">2</span>];
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">pipe</span>(pipefd) == <span class="hljs-number">-1</span>) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"åˆ›å»ºç®¡é“å¤±è´¥"</span>);
        }
        
        <span class="hljs-type">pid_t</span> pid = fork();
        
        <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {  <span class="hljs-comment">// å­è¿›ç¨‹</span>
            <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// å…³é—­è¯»ç«¯</span>
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">func</span>();
                
                <span class="hljs-comment">// åºåˆ—åŒ–ç»“æœ</span>
                std::ostringstream oss;
                <span class="hljs-comment">// è¿™é‡Œéœ€è¦æ ¹æ®å®é™…ç±»å‹å®ç°åºåˆ—åŒ–</span>
                <span class="hljs-comment">// write_result_to_stream(oss, result);</span>
                
                std::string serialized = oss.<span class="hljs-built_in">str</span>();
                <span class="hljs-type">size_t</span> size = serialized.<span class="hljs-built_in">size</span>();
                
                <span class="hljs-comment">// å‘é€ç»“æœå¤§å°</span>
                <span class="hljs-built_in">write</span>(pipefd[<span class="hljs-number">1</span>], &amp;size, <span class="hljs-built_in">sizeof</span>(size));
                <span class="hljs-comment">// å‘é€ç»“æœæ•°æ®</span>
                <span class="hljs-built_in">write</span>(pipefd[<span class="hljs-number">1</span>], serialized.<span class="hljs-built_in">data</span>(), size);
                
                <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">1</span>]);
                _exit(<span class="hljs-number">0</span>);  <span class="hljs-comment">// ä½¿ç”¨_exité¿å…atexitå¤„ç†</span>
                
            } <span class="hljs-built_in">catch</span> (...) {
                <span class="hljs-comment">// å­è¿›ç¨‹ä¸­çš„å¼‚å¸¸ï¼Œé€šè¿‡ç‰¹æ®Šå€¼è¡¨ç¤º</span>
                <span class="hljs-type">size_t</span> error_marker = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(<span class="hljs-number">-1</span>);
                <span class="hljs-built_in">write</span>(pipefd[<span class="hljs-number">1</span>], &amp;error_marker, <span class="hljs-built_in">sizeof</span>(error_marker));
                <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">1</span>]);
                _exit(<span class="hljs-number">1</span>);
            }
            
        } <span class="hljs-keyword">else</span> {  <span class="hljs-comment">// çˆ¶è¿›ç¨‹</span>
            <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">1</span>]);  <span class="hljs-comment">// å…³é—­å†™ç«¯</span>
            
            <span class="hljs-type">int</span> status;
            <span class="hljs-built_in">waitpid</span>(pid, &amp;status, <span class="hljs-number">0</span>);
            
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">WIFEXITED</span>(status) &amp;&amp; <span class="hljs-built_in">WEXITSTATUS</span>(status) == <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// è¯»å–ç»“æœ</span>
                <span class="hljs-type">size_t</span> result_size;
                <span class="hljs-built_in">read</span>(pipefd[<span class="hljs-number">0</span>], &amp;result_size, <span class="hljs-built_in">sizeof</span>(result_size));
                
                <span class="hljs-keyword">if</span> (result_size != <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">size_t</span>&gt;(<span class="hljs-number">-1</span>)) {
                    <span class="hljs-function">std::string <span class="hljs-title">serialized</span><span class="hljs-params">(result_size, <span class="hljs-string">'\0'</span>)</span></span>;
                    <span class="hljs-built_in">read</span>(pipefd[<span class="hljs-number">0</span>], serialized.<span class="hljs-built_in">data</span>(), result_size);
                    <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">0</span>]);
                    
                    <span class="hljs-comment">// ååºåˆ—åŒ–ç»“æœ</span>
                    <span class="hljs-comment">// return deserialize_result(serialized);</span>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">0</span>]);
                    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"å­è¿›ç¨‹æ‰§è¡Œå¤±è´¥"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">close</span>(pipefd[<span class="hljs-number">0</span>]);
                std::cerr &lt;&lt; <span class="hljs-string">"å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢"</span> &lt;&lt; std::endl;
                <span class="hljs-comment">// çˆ¶è¿›ç¨‹èµ„æºå®‰å…¨ï¼Œå¯ä»¥ç»§ç»­è¿è¡Œ</span>
            }
        }
        
        <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main_program</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// çˆ¶è¿›ç¨‹ä¿æŒå®‰å…¨</span>
    std::unique_ptr&lt;MainResource&gt; main_res = <span class="hljs-built_in">acquire_main_resource</span>();
    
    <span class="hljs-comment">// å±é™©æ“ä½œåœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œ</span>
    <span class="hljs-keyword">auto</span> result = IsolatedProcess::<span class="hljs-built_in">run</span>([]() {
        std::unique_ptr&lt;DangerousResource&gt; danger = <span class="hljs-built_in">create_dangerous_resource</span>();
        <span class="hljs-keyword">return</span> danger-&gt;<span class="hljs-built_in">risky_operation</span>();  <span class="hljs-comment">// å¯èƒ½å´©æºƒ</span>
    });
    
    <span class="hljs-comment">// å³ä½¿å­è¿›ç¨‹å´©æºƒï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œ</span>
    <span class="hljs-keyword">if</span> (result) {
        <span class="hljs-built_in">process_result</span>(*result);
    }
}
</code></pre>
<h3 data-id="heading-14">ç¬¬å…­å±‚ï¼šé˜²å¾¡æ€§ç¼–ç¨‹ä¸æ£€æŸ¥æœºåˆ¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cassert&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DefensiveProgrammer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Container&gt;
    <span class="hljs-type">static</span> <span class="hljs-keyword">typename</span> Container::reference <span class="hljs-title">safe_access</span><span class="hljs-params">(
        Container&amp; container, 
        <span class="hljs-type">size_t</span> index,
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* context = <span class="hljs-literal">nullptr</span>)</span> </span>{
        
        <span class="hljs-keyword">if</span> (index &gt;= container.<span class="hljs-built_in">size</span>()) {
            std::string msg = <span class="hljs-string">"ç´¢å¼•è¶Šç•Œ: "</span>;
            msg += std::<span class="hljs-built_in">to_string</span>(index);
            msg += <span class="hljs-string">" &gt;= "</span>;
            msg += std::<span class="hljs-built_in">to_string</span>(container.<span class="hljs-built_in">size</span>());
            <span class="hljs-keyword">if</span> (context) {
                msg += <span class="hljs-string">" (åœ¨ "</span>;
                msg += context;
                msg += <span class="hljs-string">" ä¸­)"</span>;
            }
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(msg);  <span class="hljs-comment">// æŠ›å‡ºå¼‚å¸¸è€Œéå´©æºƒ</span>
        }
        
        <span class="hljs-keyword">return</span> container[index];
    }
    
    <span class="hljs-comment">// ç©ºæŒ‡é’ˆæ£€æŸ¥</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-type">static</span> T* <span class="hljs-title">check_not_null</span><span class="hljs-params">(T* ptr, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name = <span class="hljs-literal">nullptr</span>)</span> </span>{
        <span class="hljs-keyword">if</span> (ptr == <span class="hljs-literal">nullptr</span>) {
            std::string msg = <span class="hljs-string">"ç©ºæŒ‡é’ˆè®¿é—®"</span>;
            <span class="hljs-keyword">if</span> (name) {
                msg += <span class="hljs-string">": "</span>;
                msg += name;
            }
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(msg);
        }
        <span class="hljs-keyword">return</span> ptr;
    }
    
    <span class="hljs-comment">// èµ„æºä½¿ç”¨æ£€æŸ¥ç‚¹</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Checkpoint</span> {
        <span class="hljs-type">size_t</span> initial_memory_usage;
        std::vector&lt;std::string&gt; warnings;
        
    <span class="hljs-keyword">public</span>:
        <span class="hljs-built_in">Checkpoint</span>() {
            <span class="hljs-comment">// è®°å½•åˆå§‹çŠ¶æ€</span>
            <span class="hljs-comment">// initial_memory_usage = get_current_memory_usage();</span>
        }
        
        ~<span class="hljs-built_in">Checkpoint</span>() {
            <span class="hljs-comment">// æ£€æŸ¥èµ„æºæ³„æ¼</span>
            <span class="hljs-comment">// size_t current = get_current_memory_usage();</span>
            <span class="hljs-comment">// if (current &gt; initial_memory_usage + THRESHOLD) {</span>
            <span class="hljs-comment">//     log_warning("æ½œåœ¨çš„å†…å­˜æ³„æ¼");</span>
            <span class="hljs-comment">// }</span>
            
            <span class="hljs-keyword">if</span> (!warnings.<span class="hljs-built_in">empty</span>()) {
                std::cerr &lt;&lt; <span class="hljs-string">"æ£€æŸ¥ç‚¹è­¦å‘Š:"</span> &lt;&lt; std::endl;
                <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; w : warnings) {
                    std::cerr &lt;&lt; <span class="hljs-string">"  - "</span> &lt;&lt; w &lt;&lt; std::endl;
                }
            }
        }
        
        <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add_warning</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; warning)</span> </span>{
            warnings.<span class="hljs-built_in">push_back</span>(warning);
        }
    };
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">defensive_function</span><span class="hljs-params">()</span> </span>{
    DefensiveProgrammer::Checkpoint checkpoint;
    
    <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">data</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>;
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å®‰å…¨è®¿é—®</span>
        <span class="hljs-type">int</span> value = DefensiveProgrammer::<span class="hljs-built_in">safe_access</span>(data, <span class="hljs-number">150</span>, <span class="hljs-string">"defensive_function"</span>);
        <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œåˆ°è¿™é‡Œ</span>
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cerr &lt;&lt; <span class="hljs-string">"æ•è·å¼‚å¸¸: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
        <span class="hljs-comment">// ä¼˜é›…å¤„ç†ï¼Œè€Œä¸æ˜¯å´©æºƒ</span>
        checkpoint.<span class="hljs-built_in">add_warning</span>(e.<span class="hljs-built_in">what</span>());
    }
}
</code></pre>
<h2 data-id="heading-15">ç¬¬å››éƒ¨åˆ†ï¼šå®æˆ˜æ¶æ„è®¾è®¡æ¨¡å¼</h2>
<h3 data-id="heading-16">æ¨¡å¼1ï¼šäº‹åŠ¡æ€§èµ„æºç®¡ç†</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Resource&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionalResource</span> {
    std::unique_ptr&lt;Resource&gt; current;
    std::unique_ptr&lt;Resource&gt; backup;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Args&gt;
    <span class="hljs-type">void</span> <span class="hljs-title">begin_transaction</span><span class="hljs-params">(Args&amp;&amp;... args)</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºæ–°èµ„æºä½†ä¸ç«‹å³ç”Ÿæ•ˆ</span>
        backup = std::<span class="hljs-built_in">move</span>(current);
        current = std::<span class="hljs-built_in">make_unique</span>&lt;Resource&gt;(std::forward&lt;Args&gt;(args)...);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">commit</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// æäº¤äº‹åŠ¡ï¼Œä¸¢å¼ƒå¤‡ä»½</span>
        backup.<span class="hljs-built_in">reset</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">rollback</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// å›æ»šåˆ°ä¹‹å‰çš„çŠ¶æ€</span>
        current = std::<span class="hljs-built_in">move</span>(backup);
    }
    
    <span class="hljs-function">Resource&amp; <span class="hljs-title">get</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (!current) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">"æ²¡æœ‰æ´»åŠ¨çš„èµ„æº"</span>);
        }
        <span class="hljs-keyword">return</span> *current;
    }
    
    <span class="hljs-comment">// ç¡®ä¿å³ä½¿å´©æºƒï¼Œèµ„æºä¹Ÿèƒ½è¢«æ¸…ç†</span>
    ~<span class="hljs-built_in">TransactionalResource</span>() {
        <span class="hljs-comment">// æ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨æ¸…ç†</span>
    }
};
</code></pre>
<h3 data-id="heading-17">æ¨¡å¼2ï¼šèµ„æºæ‰€æœ‰æƒä¼ é€’é“¾</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OwnershipChain</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> {
        std::unique_ptr&lt;<span class="hljs-type">void</span>, <span class="hljs-built_in">void</span>(*)(<span class="hljs-type">void</span>*)&gt; resource;
        std::unique_ptr&lt;Node&gt; next;
        
        <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> Deleter&gt;
        <span class="hljs-title">Node</span><span class="hljs-params">(T* ptr, Deleter d)</span> 
            : resource(ptr, [d](void* p) {</span> <span class="hljs-built_in">d</span>(<span class="hljs-built_in">static_cast</span>&lt;T*&gt;(p)); }) {}
    };
    
    std::unique_ptr&lt;Node&gt; head;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> Deleter&gt;
    <span class="hljs-type">void</span> <span class="hljs-title">acquire</span><span class="hljs-params">(T* resource, Deleter deleter)</span> </span>{
        <span class="hljs-keyword">auto</span> new_node = std::<span class="hljs-built_in">make_unique</span>&lt;Node&gt;(resource, deleter);
        new_node-&gt;next = std::<span class="hljs-built_in">move</span>(head);
        head = std::<span class="hljs-built_in">move</span>(new_node);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">release_all</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// é€†åºé‡Šæ”¾æ‰€æœ‰èµ„æº</span>
        <span class="hljs-keyword">while</span> (head) {
            head = std::<span class="hljs-built_in">move</span>(head-&gt;next);
        }
    }
    
    ~<span class="hljs-built_in">OwnershipChain</span>() {
        <span class="hljs-built_in">release_all</span>();
    }
    
    <span class="hljs-comment">// é˜²æ­¢æ‹·è´</span>
    <span class="hljs-built_in">OwnershipChain</span>(<span class="hljs-type">const</span> OwnershipChain&amp;) = <span class="hljs-keyword">delete</span>;
    OwnershipChain&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> OwnershipChain&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// å…è®¸ç§»åŠ¨</span>
    <span class="hljs-built_in">OwnershipChain</span>(OwnershipChain&amp;&amp;) = <span class="hljs-keyword">default</span>;
    OwnershipChain&amp; <span class="hljs-keyword">operator</span>=(OwnershipChain&amp;&amp;) = <span class="hljs-keyword">default</span>;
};
</code></pre>
<h2 data-id="heading-18">ç¬¬äº”éƒ¨åˆ†ï¼šå·¥å…·é“¾æ”¯æŒ</h2>
<h3 data-id="heading-19">é™æ€åˆ†æå·¥å…·é…ç½®</h3>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txtä¸­çš„é…ç½®ç¤ºä¾‹
if(CMAKE_CXX_COMPILER_ID MATCHES "Clang|GNU")
    # å¯ç”¨æ‰€æœ‰è­¦å‘Š
    add_compile_options(-Wall -Wextra -Wpedantic)
    
    # å†…å­˜ç›¸å…³è­¦å‘Š
    add_compile_options(-Wmemory-leak)
    add_compile_options(-Wdelete-non-virtual-dtor)
    
    # å¼€å¯é™æ€åˆ†æ
    if(CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
        add_compile_options(-fsanitize=address)
        add_compile_options(-fsanitize=leak)
        add_compile_options(-fsanitize=undefined)
    endif()
endif()

# ä½¿ç”¨Clang-Tidy
find_program(CLANG_TIDY_EXE NAMES "clang-tidy")
if(CLANG_TIDY_EXE)
    set(CMAKE_CXX_CLANG_TIDY 
        "${CLANG_TIDY_EXE};-checks=*;-warnings-as-errors=*")
endif()
</code></pre>
<h3 data-id="heading-20">åŠ¨æ€åˆ†æè„šæœ¬</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># memory_check.sh</span>

<span class="hljs-comment"># ä½¿ç”¨Valgrindæ£€æŸ¥å†…å­˜æ³„æ¼</span>
valgrind --tool=memcheck \
         --leak-check=full \
         --show-leak-kinds=all \
         --track-origins=<span class="hljs-built_in">yes</span> \
         --verbose \
         --log-file=valgrind-out.txt \
         ./my_program

<span class="hljs-comment"># ä½¿ç”¨AddressSanitizer</span>
<span class="hljs-built_in">export</span> ASAN_OPTIONS=<span class="hljs-string">"detect_leaks=1:halt_on_error=0"</span>
./my_program_asan

<span class="hljs-comment"># ç”Ÿæˆå†…å­˜åˆ†ææŠ¥å‘Š</span>
heaptrack ./my_program
heaptrack_print heaptrack.my_program.*.gz &gt; memory_report.txt
</code></pre>
<h2 data-id="heading-21">ç»“è®º</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap
  root(é˜²å¾¡æ€§ç¼–ç¨‹æœ€ä½³å®è·µ)
    
    è¾“å…¥éªŒè¯
      å‚æ•°æ£€æŸ¥
        "éªŒè¯æ‰€æœ‰å‡½æ•°å‚æ•°"
        "æ£€æŸ¥nullæŒ‡é’ˆ"
        "éªŒè¯æ•°å€¼èŒƒå›´"
      æ•°æ®éªŒè¯
        "éªŒè¯è¾“å…¥æ•°æ®æ ¼å¼"
        "æ£€æŸ¥æ•°æ®å®Œæ•´æ€§"
        "æ¶ˆæ¯’ç”¨æˆ·è¾“å…¥"
    
    å†…å­˜å®‰å…¨
      åˆ†é…å®‰å…¨
        "æ£€æŸ¥åˆ†é…å¤§å°"
        "éªŒè¯åˆ†é…ç»“æœ"
        "å¤„ç†åˆ†é…å¤±è´¥"
      è®¿é—®å®‰å…¨
        "è¾¹ç•Œæ£€æŸ¥"
        "ç±»å‹å®‰å…¨"
        "å¯¹é½æ£€æŸ¥"
      é‡Šæ”¾å®‰å…¨
        "é¿å…åŒé‡é‡Šæ”¾"
        "è·Ÿè¸ªæ‰€æœ‰æƒ"
        "ä½¿ç”¨RAII"
    
    å¼‚å¸¸å®‰å…¨
      åŸºæœ¬ä¿è¯
        "ç¡®ä¿ä¸æ³„æ¼èµ„æº"
        "ä¿æŒå¯¹è±¡æœ‰æ•ˆæ€§"
        "å…è®¸çŠ¶æ€æ”¹å˜"
      å¼ºä¿è¯
        "æäº¤æˆ–å›æ»š"
        "äº‹åŠ¡æ€§æ“ä½œ"
        "å¼‚å¸¸ä¸­ç«‹"
      ä¸æŠ›ä¿è¯
        "å…³é”®æ“ä½œä¸æŠ›å¼‚å¸¸"
        "ä½¿ç”¨noexcept"
        "ç®€åŒ–é”™è¯¯å¤„ç†"
    
    çŠ¶æ€ç®¡ç†
      å‰ç½®æ¡ä»¶
        "éªŒè¯æ“ä½œå‰æ"
        "æ£€æŸ¥å¯¹è±¡çŠ¶æ€"
        "éªŒè¯ç¯å¢ƒæ¡ä»¶"
      åç½®æ¡ä»¶
        "éªŒè¯æ“ä½œç»“æœ"
        "æ£€æŸ¥ä¸å˜é‡"
        "ç¡®ä¿çŠ¶æ€ä¸€è‡´"
      ä¸å˜å¼
        "ç»´æŠ¤ç±»ä¸å˜é‡"
        "éªŒè¯æ•°æ®å®Œæ•´æ€§"
        "æ£€æŸ¥é€»è¾‘çº¦æŸ"
    
    èµ„æºç®¡ç†
      è·å–å³åˆå§‹åŒ–
        "RAIIæ¨¡å¼"
        "æ„é€ å‡½æ•°ä¸­è·å–"
        "ææ„å‡½æ•°ä¸­é‡Šæ”¾"
      æ‰€æœ‰æƒæ˜ç¡®
        "æ˜ç¡®èµ„æºæ‰€æœ‰æƒ"
        "ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ"
        "é¿å…å…±äº«æ‰€æœ‰æƒ"
      ç”Ÿå‘½å‘¨æœŸç®¡ç†
        "æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ"
        "ä½¿ç”¨ä½œç”¨åŸŸç®¡ç†"
        "åŠæ—¶é‡Šæ”¾èµ„æº"
</code></pre>
<p>é€šè¿‡æœ¬æ–‡çš„æ¢è®¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹å…³é”®ç»“è®ºï¼š</p>
<ol>
<li>
<p><strong>æ“ä½œç³»ç»Ÿä¼šå›æ”¶å´©æºƒè¿›ç¨‹çš„å†…å­˜</strong>ï¼Œä½†è¿™ä¸åº”æˆä¸ºä»£ç è´¨é‡ä½ä¸‹çš„å€Ÿå£ã€‚</p>
</li>
<li>
<p><strong>RAIIæ˜¯C++å†…å­˜å®‰å…¨çš„åŸºçŸ³</strong>ï¼Œåº”æˆä¸ºæ¯ä¸ªC++ç¨‹åºå‘˜çš„æœ¬èƒ½æ€ç»´æ–¹å¼ã€‚</p>
</li>
<li>
<p><strong>å¤šå±‚é˜²å¾¡ç­–ç•¥</strong>æ¯”å•ä¸€æ–¹æ¡ˆæ›´æœ‰æ•ˆï¼š</p>
<ul>
<li>ç¬¬ä¸€å±‚ï¼šRAIIå’Œæ™ºèƒ½æŒ‡é’ˆ</li>
<li>ç¬¬äºŒå±‚ï¼šå¼‚å¸¸å®‰å…¨è®¾è®¡</li>
<li>ç¬¬ä¸‰å±‚ï¼šä¿¡å·å¤„ç†å’Œä¼˜é›…ç»ˆæ­¢</li>
<li>ç¬¬å››å±‚ï¼šè¿›ç¨‹éš”ç¦»å’Œæ²™ç®±</li>
<li>ç¬¬äº”å±‚ï¼šé˜²å¾¡æ€§ç¼–ç¨‹</li>
</ul>
</li>
<li>
<p><strong>å·¥å…·é“¾çš„æ°å½“ä½¿ç”¨</strong>å¯ä»¥æå‰å‘ç°æ½œåœ¨é—®é¢˜ã€‚</p>
</li>
</ol>
<p>æœ€ç»ˆï¼Œé˜²æ­¢å´©æºƒå¯¼è‡´çš„å†…å­˜æ³„æ¼ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯å·¥ç¨‹ discipline çš„ä½“ç°ã€‚ä¼˜ç§€çš„C++ç¨‹åºå‘˜åº”è¯¥ï¼š</p>
<ul>
<li>é»˜è®¤ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆè€Œéè£¸æŒ‡é’ˆ</li>
<li>ä¼˜å…ˆé€‰æ‹©æ ˆå¯¹è±¡è€Œéå †å¯¹è±¡</li>
<li>ä¸ºæ‰€æœ‰èµ„æºç¼–å†™RAIIåŒ…è£…å™¨</li>
<li>è®¾è®¡å¼‚å¸¸å®‰å…¨çš„æ¥å£</li>
<li>ä½¿ç”¨é™æ€å’ŒåŠ¨æ€åˆ†æå·¥å…·</li>
</ul>
<p>è®°ä½ï¼šæ“ä½œç³»ç»Ÿä¼šä¸ºä½ çš„å´©æºƒ"å…œåº•"ï¼Œä½†è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯èƒ½è®©ä½ çš„ç¨‹åºæ›´åŠ å¥å£®ã€å¯ç»´æŠ¤ã€‚åœ¨èµ„æºç®¡ç†å’Œå†…å­˜å®‰å…¨æ–¹é¢ï¼Œæ°¸è¿œä¸è¦ä¾èµ–æ“ä½œç³»ç»Ÿçš„æ¸…ç†æœºåˆ¶ï¼Œè€Œæ˜¯è¦ç¡®ä¿ä½ çš„ä»£ç åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ­£ç¡®ç®¡ç†è‡ªå·±çš„èµ„æºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ]]></title>    <link>https://juejin.cn/post/7584730804515291179</link>    <guid>https://juejin.cn/post/7584730804515291179</guid>    <pubDate>2025-12-18T04:07:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584730804515291179" data-draft-id="7584730804515258411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ"/> <meta itemprop="keywords" content="MyBatis,Spring Boot,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-18T04:07:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jaising666"/> <meta itemprop="url" content="https://juejin.cn/user/2418581311850301"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mybatis Plus ä¸»é”®ç”Ÿæˆå™¨å®ç°æ€è·¯åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581311850301/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jaising666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:07:05.000Z" title="Thu Dec 18 2025 04:07:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬çœ‹åˆ°äº† <a href="https://juejin.cn/post/7510053996137611300" target="_blank" title="https://juejin.cn/post/7510053996137611300">Mybatis æ‹¦æˆªå™¨åœ¨å¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„ä½¿ç”¨</a>ï¼Œè¿™æ¬¡ç»§ç»­çœ‹ä¸‹åœ¨ä¸»é”®ç”Ÿæˆåœºæ™¯ä¸‹çš„åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜</h2>
<p>åœ¨ä½¿ç”¨ MyBatis-Plus å¼€å‘æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ <code>@TableId(type = IdType.AUTO)</code> æ³¨è§£æ¥å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆã€‚è¿™ç§æ–¹å¼ä¾èµ–æ•°æ®åº“çš„è‡ªå¢ç‰¹æ€§ï¼Œåœ¨ MySQL ç­‰ä¸»æµæ•°æ®åº“ä¸Šè¿è¡Œè‰¯å¥½ã€‚</p>
<p>ç„¶è€Œï¼Œå½“é¡¹ç›®è¿ç§»åˆ° OpenGauss æ•°æ®åº“æ—¶ï¼Œé‡åˆ°äº†å…¼å®¹æ€§é—®é¢˜ï¼š</p>
<ul>
<li><strong>é—®é¢˜ç°è±¡</strong>ï¼šINSERT æ“ä½œæ—¶ ID å­—æ®µä¸º NULLï¼Œå¯¼è‡´æ’å…¥å¤±è´¥</li>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼šOpenGauss ä½¿ç”¨ PostgreSQL çš„åºåˆ—ï¼ˆSequenceï¼‰æœºåˆ¶ï¼Œè€Œéè‡ªå¢å­—æ®µ</li>
<li><strong>æŠ€æœ¯é™åˆ¶</strong>ï¼šOpenGauss é©±åŠ¨å¯¹ MyBatis-Plus çš„ <code>IdType.AUTO</code> æ”¯æŒä¸å®Œå–„</li>
</ul>
<h3 data-id="heading-1">æ•°æ®åº“ä¸»é”®ç”Ÿæˆæœºåˆ¶å¯¹æ¯”</h3>
<h4 data-id="heading-2">MySQL è‡ªå¢ä¸»é”® (AUTO_INCREMENT)</h4>
<p>MySQL ä½¿ç”¨ <code>AUTO_INCREMENT</code> å±æ€§å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MySQL è¡¨ç»“æ„</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);

<span class="hljs-comment">-- æ’å…¥æ—¶æ— éœ€æŒ‡å®šID</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>);
<span class="hljs-comment">-- MySQL è‡ªåŠ¨ç”Ÿæˆ id = 1</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åœ¨è¡¨ç»“æ„ä¸­å®šä¹‰è‡ªå¢å±æ€§</li>
<li>INSERT æ—¶å¯ä»¥çœç•¥ä¸»é”®å­—æ®µ</li>
<li>æ•°æ®åº“å¼•æ“è‡ªåŠ¨åˆ†é…é€’å¢çš„IDå€¼</li>
<li>MyBatis-Plus çš„ <code>IdType.AUTO</code> ç›´æ¥æ”¯æŒ</li>
</ul>
<h4 data-id="heading-3">PostgreSQL/OpenGauss åºåˆ—æœºåˆ¶ (SEQUENCE)</h4>
<p>PostgreSQL ç³»åˆ—æ•°æ®åº“ä½¿ç”¨åºåˆ—å¯¹è±¡ç”Ÿæˆä¸»é”®ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE user_id_seq <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span> INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- åˆ›å»ºè¡¨ï¼ˆä¸ä½¿ç”¨AUTO_INCREMENTï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> nextval(<span class="hljs-string">'user_id_seq'</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)
);

<span class="hljs-comment">-- æ’å…¥æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤å€¼</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>);

<span class="hljs-comment">-- æ’å…¥æ–¹å¼2ï¼šæ˜¾å¼è°ƒç”¨åºåˆ—</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (id, name) <span class="hljs-keyword">VALUES</span> (nextval(<span class="hljs-string">'user_id_seq'</span>), <span class="hljs-string">'æå››'</span>);
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åºåˆ—æ˜¯ç‹¬ç«‹çš„æ•°æ®åº“å¯¹è±¡ï¼Œä¸è¡¨åˆ†ç¦»</li>
<li>éœ€è¦æ˜¾å¼è°ƒç”¨ <code>nextval()</code> å‡½æ•°è·å–ä¸‹ä¸€ä¸ªå€¼</li>
<li>æ”¯æŒæ›´çµæ´»çš„é…ç½®ï¼ˆèµ·å§‹å€¼ã€æ­¥é•¿ã€ç¼“å­˜ç­‰ï¼‰</li>
<li>å¯ä»¥è¢«å¤šä¸ªè¡¨å…±äº«</li>
</ul>
<h4 data-id="heading-4">MyBatis-Plus å…¼å®¹æ€§é—®é¢˜</h4>
<p>MyBatis-Plus çš„ <code>IdType.AUTO</code> è®¾è®¡ä¸»è¦é’ˆå¯¹ MySQL çš„è‡ªå¢æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBatis-Plus æœŸæœ›çš„è¡Œä¸º</span>
<span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
<span class="hljs-keyword">private</span> Long id;

<span class="hljs-comment">// ç”Ÿæˆçš„ INSERT SQLï¼ˆMySQLï¼‰</span>
INSERT INTO <span class="hljs-title function_">user</span> <span class="hljs-params">(name)</span> VALUES (?)
<span class="hljs-comment">// MySQL è‡ªåŠ¨å¡«å…… id å­—æ®µ</span>

<span class="hljs-comment">// åœ¨ PostgreSQL/OpenGauss ä¸­çš„é—®é¢˜</span>
INSERT INTO <span class="hljs-title function_">user</span> <span class="hljs-params">(name)</span> VALUES (?)
<span class="hljs-comment">// æ²¡æœ‰è°ƒç”¨ nextval()ï¼Œid å­—æ®µä¸º NULLï¼Œè¿åä¸»é”®çº¦æŸ</span>
</code></pre>
<p><strong>å¤±æ•ˆåŸå› ï¼š</strong></p>
<ol>
<li><strong>SQL ç”Ÿæˆå·®å¼‚</strong>ï¼šMyBatis-Plus ç”Ÿæˆçš„ INSERT è¯­å¥ä¸åŒ…å«åºåˆ—è°ƒç”¨</li>
<li><strong>é©±åŠ¨æ”¯æŒä¸è¶³</strong>ï¼šOpenGauss é©±åŠ¨æ— æ³•è‡ªåŠ¨è¯†åˆ«å¹¶è°ƒç”¨å¯¹åº”çš„åºåˆ—</li>
<li><strong>æ¡†æ¶å‡è®¾</strong>ï¼šMyBatis-Plus å‡è®¾æ•°æ®åº“ä¼šè‡ªåŠ¨å¤„ç†ä¸»é”®ç”Ÿæˆï¼Œä½† PostgreSQL éœ€è¦æ˜¾å¼æ“ä½œ</li>
</ol>
<p>ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¡¹ç›®é‡‡ç”¨äº†è‡ªå®šä¹‰ MyBatis æ‹¦æˆªå™¨çš„æ–¹æ¡ˆï¼Œåœ¨ INSERT æ“ä½œå‰è‡ªåŠ¨ä»æ•°æ®åº“åºåˆ—è·å– ID å€¼ã€‚</p>
<h2 data-id="heading-5">äºŒã€MyBatis æ‹¦æˆªå™¨æœºåˆ¶</h2>
<h3 data-id="heading-6">æ‹¦æˆªå™¨å·¥ä½œåŸç†</h3>
<p>MyBatis æä¾›äº†æ’ä»¶ï¼ˆPluginï¼‰æœºåˆ¶ï¼Œå…è®¸åœ¨ SQL æ‰§è¡Œçš„å…³é”®èŠ‚ç‚¹è¿›è¡Œæ‹¦æˆªå’Œå¢å¼ºã€‚æ‹¦æˆªå™¨åŸºäº JDK åŠ¨æ€ä»£ç†å®ç°ï¼Œå¯ä»¥æ‹¦æˆªä»¥ä¸‹å››ç§å¯¹è±¡çš„æ–¹æ³•ï¼š</p>






























<table><thead><tr><th>æ‹¦æˆªå¯¹è±¡</th><th>ä½œç”¨</th><th>å¸¸è§æ‹¦æˆªæ–¹æ³•</th></tr></thead><tbody><tr><td>Executor</td><td>SQL æ‰§è¡Œå™¨</td><td>update, query, commit, rollback</td></tr><tr><td>StatementHandler</td><td>SQL è¯­å¥å¤„ç†å™¨</td><td>prepare, parameterize, batch, update, query</td></tr><tr><td>ParameterHandler</td><td>å‚æ•°å¤„ç†å™¨</td><td>getParameterObject, setParameters</td></tr><tr><td>ResultSetHandler</td><td>ç»“æœé›†å¤„ç†å™¨</td><td>handleResultSets, handleOutputParameters</td></tr></tbody></table>
<h3 data-id="heading-7">æ‹¦æˆªå™¨æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as Application
    participant MyBatis
    participant Interceptor
    participant Executor
    participant DB as Database
    
    App-&gt;&gt;MyBatis: Execute Mapper method
    MyBatis-&gt;&gt;Interceptor: Call intercept()
    Interceptor-&gt;&gt;Interceptor: Pre-processing
    Interceptor-&gt;&gt;Executor: invocation.proceed()
    Executor-&gt;&gt;DB: Execute SQL
    DB--&gt;&gt;Executor: Return result
    Executor--&gt;&gt;Interceptor: Return result
    Interceptor-&gt;&gt;Interceptor: Post-processing
    Interceptor--&gt;&gt;MyBatis: Return final result
    MyBatis--&gt;&gt;App: Return result
</code></pre>
<h3 data-id="heading-8">æ‹¦æˆªå™¨æ¥å£å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-comment">// æ‹¦æˆªç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œ</span>
    Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable;
    
    <span class="hljs-comment">// ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†</span>
    Object <span class="hljs-title function_">plugin</span><span class="hljs-params">(Object target)</span>;
    
    <span class="hljs-comment">// è®¾ç½®æ‹¦æˆªå™¨å±æ€§</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span>;
}
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€ID ä¸»é”®ç”Ÿæˆæ‹¦æˆªå™¨å®ç°</h2>
<h3 data-id="heading-10">æ•´ä½“æ¶æ„</h3>
<p>é¡¹ç›®ä¸­çš„ ID ä¸»é”®ç”Ÿæˆæ–¹æ¡ˆç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[INSERT Operation] --&gt; B[AutoIdGeneratorInterceptor]
    B --&gt; C{Check @TableId}
    C --&gt;|type=AUTO| D{ID is null?}
    C --&gt;|Other types| E[Skip processing]
    D --&gt;|Yes| F[PostgresSequenceGenerator]
    D --&gt;|No| E
    F --&gt; G[Get table name]
    G --&gt; H[Build sequence name]
    H --&gt; I[Execute SELECT nextval]
    I --&gt; J[Set ID field value]
    J --&gt; K[Continue INSERT]
    E --&gt; K
</code></pre>
<h3 data-id="heading-11">ç»„ä»¶ 1ï¼šAutoIdGeneratorInterceptor</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ‹¦æˆªæ‰€æœ‰ INSERT æ“ä½œ</li>
<li>æ£€æŸ¥å®ä½“ç±»çš„ <code>@TableId</code> æ³¨è§£é…ç½®</li>
<li>ä¸º <code>IdType.AUTO</code> ç±»å‹ä¸”å€¼ä¸º null çš„å­—æ®µç”Ÿæˆ ID</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class, method = "update", args = {MappedStatement.class, Object.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AutoIdGeneratorInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        <span class="hljs-type">Object</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> invocation.getArgs()[<span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// åªå¤„ç†INSERTæ“ä½œ</span>
        <span class="hljs-keyword">if</span> (SqlCommandType.INSERT.equals(ms.getSqlCommandType())) {
            <span class="hljs-comment">// åå°„æ£€æŸ¥@TableId(type=AUTO)å­—æ®µï¼Œå¦‚æœä¸ºnullè°ƒç”¨PostgresSequenceGeneratorçš„nextIdç”ŸæˆID</span>
            processEntity(parameter);
        }
        
        <span class="hljs-keyword">return</span> invocation.proceed();
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ‹¦æˆª Executor.update æ–¹æ³•</strong>ï¼šINSERT/UPDATE/DELETE éƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œé€šè¿‡ <code>SqlCommandType</code> åŒºåˆ†æ“ä½œç±»å‹</li>
<li><strong>åå°„è®¿é—®å­—æ®µ</strong>ï¼šä½¿ç”¨ <code>field.setAccessible(true)</code> è®¿é—®ç§æœ‰å­—æ®µ</li>
<li><strong>æ³¨è§£æ£€æŸ¥</strong>ï¼šåªå¤„ç† <code>@TableId(type = IdType.AUTO)</code> æ ‡æ³¨çš„å­—æ®µ</li>
<li><strong>ç©ºå€¼åˆ¤æ–­</strong>ï¼šä»…åœ¨ ID ä¸º null æ—¶ç”Ÿæˆï¼Œé¿å…è¦†ç›–å·²æœ‰å€¼</li>
</ol>
<h3 data-id="heading-12">ç»„ä»¶ 2ï¼šPostgresSequenceGenerator</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>æ ¹æ®å®ä½“ç±»ç¡®å®šæ•°æ®åº“è¡¨å</li>
<li>æŒ‰çº¦å®šæ„é€ åºåˆ—åï¼ˆ<code>{table_name}_id_seq</code>ï¼‰</li>
<li>æ‰§è¡Œ SQL è·å–åºåˆ—çš„ä¸‹ä¸€ä¸ªå€¼</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostgresSequenceGenerator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IKeyGenerator</span> {
    
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">nextId</span><span class="hljs-params">(Object entity)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> getTableName(entity);
        <span class="hljs-type">String</span> <span class="hljs-variable">sequenceName</span> <span class="hljs-operator">=</span> tableName + <span class="hljs-string">"_id_seq"</span>;
        
        <span class="hljs-comment">// OpenGaussè¦æ±‚nextval()å‚æ•°ä¸ºå¸¸é‡ï¼Œä¸èƒ½ä½¿ç”¨PreparedStatement</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT nextval('"</span> + sequenceName + <span class="hljs-string">"')"</span>;
        
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection();
             <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();
             <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(sql)) {
            <span class="hljs-keyword">return</span> rs.next() ? rs.getLong(<span class="hljs-number">1</span>) : <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to generate ID from sequence"</span>, e);
        }
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>è¡¨åè·å–ç­–ç•¥</strong>ï¼šä¼˜å…ˆä½¿ç”¨ <code>@TableName</code> æ³¨è§£ï¼Œå¦åˆ™æ ¹æ®ç±»åè½¬æ¢</li>
<li><strong>SQL æ³¨å…¥é˜²æŠ¤</strong>ï¼šåºåˆ—åå¿…é¡»åŒ¹é… <code>^[a-zA-Z0-9_]+$</code> æ­£åˆ™è¡¨è¾¾å¼</li>
<li><strong>OpenGauss å…¼å®¹æ€§</strong>ï¼šä½¿ç”¨ <code>Statement</code> è€Œé <code>PreparedStatement</code>ï¼Œå› ä¸º OpenGauss è¦æ±‚ <code>nextval()</code> å‚æ•°ä¸ºå¸¸é‡</li>
</ol>
<h4 data-id="heading-13">åºåˆ—æœºåˆ¶æ·±å…¥è§£æ</h4>
<p><strong>åºåˆ—çš„åˆ›å»ºä¸ç®¡ç†ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—ï¼ˆOpenGaussï¼‰</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE xxx_id_seq
    <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>          <span class="hljs-comment">-- èµ·å§‹å€¼</span>
    INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>        <span class="hljs-comment">-- æ­¥é•¿</span>
    MINVALUE <span class="hljs-number">1</span>           <span class="hljs-comment">-- æœ€å°å€¼</span>
    MAXVALUE <span class="hljs-number">9223372036854775807</span>  <span class="hljs-comment">-- æœ€å¤§å€¼ï¼ˆBIGINTæœ€å¤§å€¼ï¼‰</span>
    CACHE <span class="hljs-number">1</span>              <span class="hljs-comment">-- ç¼“å­˜å¤§å°</span>
    <span class="hljs-keyword">NO</span> <span class="hljs-keyword">CYCLE</span>;            <span class="hljs-comment">-- ä¸å¾ªç¯</span>

<span class="hljs-comment">-- æŸ¥çœ‹åºåˆ—ä¿¡æ¯</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.sequences 
<span class="hljs-keyword">WHERE</span> sequence_name <span class="hljs-operator">=</span> <span class="hljs-string">'xxx_id_seq'</span>;

<span class="hljs-comment">-- è·å–åºåˆ—å½“å‰å€¼ï¼ˆä¸æ¶ˆè€—ï¼‰</span>
<span class="hljs-keyword">SELECT</span> currval(<span class="hljs-string">'xxx_id_seq'</span>);

<span class="hljs-comment">-- è·å–åºåˆ—ä¸‹ä¸€ä¸ªå€¼ï¼ˆæ¶ˆè€—ä¸€ä¸ªå€¼ï¼‰</span>
<span class="hljs-keyword">SELECT</span> nextval(<span class="hljs-string">'xxx_id_seq'</span>);

<span class="hljs-comment">-- è®¾ç½®åºåˆ—å½“å‰å€¼</span>
<span class="hljs-keyword">SELECT</span> setval(<span class="hljs-string">'xxx_id_seq'</span>, <span class="hljs-number">1000</span>);
</code></pre>
<p><strong>åºåˆ— vs è‡ªå¢å­—æ®µå¯¹æ¯”ï¼š</strong></p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>PostgreSQL åºåˆ—</th><th>MySQL è‡ªå¢</th></tr></thead><tbody><tr><td>ç‹¬ç«‹æ€§</td><td>ç‹¬ç«‹å¯¹è±¡ï¼Œå¯è¢«å¤šè¡¨å…±äº«</td><td>ç»‘å®šåˆ°ç‰¹å®šè¡¨çš„ç‰¹å®šåˆ—</td></tr><tr><td>çµæ´»æ€§</td><td>æ”¯æŒå¤æ‚é…ç½®ï¼ˆæ­¥é•¿ã€ç¼“å­˜ç­‰ï¼‰</td><td>é…ç½®é€‰é¡¹æœ‰é™</td></tr><tr><td>æ€§èƒ½</td><td>å¯é…ç½®ç¼“å­˜æå‡æ€§èƒ½</td><td>æ•°æ®åº“å¼•æ“ä¼˜åŒ–</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>åºåˆ—å€¼ä¸ä¼šå› äº‹åŠ¡å›æ»šè€Œå›æ”¶</td><td>è‡ªå¢å€¼å¯èƒ½å› å›æ»šäº§ç”Ÿé—´éš™</td></tr><tr><td>è·¨è¡¨ä½¿ç”¨</td><td>ä¸€ä¸ªåºåˆ—å¯ä¾›å¤šä¸ªè¡¨ä½¿ç”¨</td><td>æ¯ä¸ªè¡¨ç‹¬ç«‹çš„è‡ªå¢è®¡æ•°å™¨</td></tr><tr><td>é‡ç½®æ“ä½œ</td><td>å¯ä»¥éšæ—¶é‡ç½®åºåˆ—å€¼</td><td>éœ€è¦ ALTER TABLE æ“ä½œ</td></tr></tbody></table>
<p><strong>OpenGauss ç‰¹æ®Šé™åˆ¶ï¼š</strong></p>
<p>OpenGauss å¯¹åºåˆ—æ“ä½œæœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¿™ä¹Ÿæ˜¯ MyBatis-Plus å…¼å®¹æ€§é—®é¢˜çš„æ ¹æºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šOpenGauss ä¸æ”¯æŒå‚æ•°åŒ–çš„ nextval()</span>
<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"SELECT nextval(?)"</span>);
ps.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"user_id_seq"</span>);

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡</span>
<span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();
<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-string">"SELECT nextval('user_id_seq')"</span>);
</code></pre>
<p>è¿™ä¸ªé™åˆ¶è¦æ±‚æˆ‘ä»¬ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨ SQL ä¸­ç¡¬ç¼–ç åºåˆ—å</li>
<li>éœ€è¦ä¸¥æ ¼éªŒè¯åºåˆ—åé˜²æ­¢ SQL æ³¨å…¥</li>
<li>æ— æ³•ä½¿ç”¨ MyBatis çš„å‚æ•°ç»‘å®šæœºåˆ¶</li>
</ul>
<h3 data-id="heading-14">ç»„ä»¶ 3ï¼šMybatisPlusConfig</h3>
<p><strong>æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li>åœ¨ Spring å®¹å™¨åˆå§‹åŒ–åæ³¨å†Œæ‹¦æˆªå™¨</li>
<li>æ”¯æŒå¤šæ•°æ®æºåœºæ™¯ï¼Œä¸ºæ¯ä¸ª <code>SqlSessionFactory</code> æ³¨å†Œæ‹¦æˆªå™¨</li>
</ul>
<p><strong>æ ¸å¿ƒå®ç°ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¸ºæ‰€æœ‰SqlSessionFactoryæ³¨å†Œæ‹¦æˆªå™¨</span>
        <span class="hljs-keyword">for</span> (SqlSessionFactory factory : sqlSessionFactoryList) {
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> factory.getConfiguration();
            <span class="hljs-keyword">if</span> (!config.getInterceptors().contains(autoIdGeneratorInterceptor)) {
                config.addInterceptor(autoIdGeneratorInterceptor);
            }
        }
    }
}
</code></pre>
<p><strong>å…³é”®æŠ€æœ¯ç‚¹ï¼š</strong></p>
<ol>
<li><strong>@PostConstruct æ—¶æœº</strong>ï¼šç¡®ä¿åœ¨ Spring å®¹å™¨åˆå§‹åŒ–åã€åº”ç”¨å¯åŠ¨å‰æ³¨å†Œæ‹¦æˆªå™¨</li>
<li><strong>å¤šæ•°æ®æºæ”¯æŒ</strong>ï¼šéå†æ‰€æœ‰ <code>SqlSessionFactory</code> å®ä¾‹ï¼Œé€ä¸€æ³¨å†Œ</li>
<li><strong>é‡å¤æ³¨å†Œæ£€æŸ¥</strong>ï¼šé¿å…åŒä¸€ä¸ªæ‹¦æˆªå™¨è¢«é‡å¤æ³¨å†Œ</li>
<li><strong>æ³¨å…¥ List</strong>ï¼šSpring ä¼šè‡ªåŠ¨æ³¨å…¥æ‰€æœ‰ <code>SqlSessionFactory</code> ç±»å‹çš„ Bean</li>
</ol>
<h2 data-id="heading-15">å››ã€ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-16">å®ä½“ç±»é…ç½®</h3>
<p>ä½¿ç”¨æ ‡å‡†çš„ MyBatis-Plus æ³¨è§£å³å¯ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName("xxx")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">xxx</span> {
    
    <span class="hljs-meta">@TableId(type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
}
</code></pre>
<h3 data-id="heading-17">æ•°æ®åº“åºåˆ—åˆ›å»º</h3>
<p>ç¡®ä¿æ•°æ®åº“ä¸­å­˜åœ¨å¯¹åº”çš„åºåˆ—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºåºåˆ—ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> xxx_id_seq
    <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>
    INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">NO</span> MINVALUE
    <span class="hljs-keyword">NO</span> MAXVALUE
    CACHE <span class="hljs-number">1</span>;

<span class="hljs-comment">-- è®¾ç½®åºåˆ—çš„å½“å‰å€¼ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-keyword">SELECT</span> setval(<span class="hljs-string">'xxx_id_seq'</span>, <span class="hljs-number">1000</span>, <span class="hljs-literal">false</span>);
</code></pre>
<h3 data-id="heading-18">Mapper æ¥å£</h3>
<p>æ— éœ€ç‰¹æ®Šå¤„ç†ï¼Œä½¿ç”¨æ ‡å‡†çš„ MyBatis-Plus æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">xxxMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;xxx&gt; {
    <span class="hljs-comment">// ç»§æ‰¿BaseMapperå³å¯ï¼Œæ— éœ€é¢å¤–é…ç½®</span>
}
</code></pre>
<h3 data-id="heading-19">Service å±‚è°ƒç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCategory</span><span class="hljs-params">(String categoryName)</span> {
    <span class="hljs-type">xxx</span> <span class="hljs-variable">category</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">xxx</span>();
    category.setCategoryName(categoryName);
    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨è®¾ç½®IDï¼Œæ‹¦æˆªå™¨ä¼šè‡ªåŠ¨ç”Ÿæˆ</span>
    
    categoryMapper.insert(category);
    <span class="hljs-comment">// æ’å…¥åï¼Œcategory.getId() å·²ç»æœ‰å€¼</span>
}
</code></pre>
<h2 data-id="heading-20">äº”ã€æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 data-id="heading-21">ä¸»é”®ç”Ÿæˆæ–¹æ¡ˆå¯¹æ¯”</h3>






















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜åŠ¿</th><th>åŠ£åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ•°æ®åº“è‡ªå¢</td><td>AUTO_INCREMENT</td><td>ç®€å•ï¼Œæ€§èƒ½å¥½</td><td>åˆ†å¸ƒå¼é—®é¢˜ï¼Œè¿ç§»å›°éš¾</td><td>å•æœºMySQLåº”ç”¨</td></tr><tr><td>MyBatis-Plus AUTO</td><td>@TableId(type=AUTO)</td><td>é…ç½®ç®€å•ï¼Œæ¡†æ¶æ”¯æŒ</td><td>æ•°æ®åº“å…¼å®¹æ€§é—®é¢˜</td><td>æ ‡å‡†MySQL/PostgreSQL</td></tr><tr><td>è‡ªå®šä¹‰æ‹¦æˆªå™¨</td><td>Interceptor + Sequence</td><td>å®Œå…¨æ§åˆ¶ï¼Œå…¼å®¹æ€§å¥½</td><td>å®ç°å¤æ‚ï¼Œéœ€ç»´æŠ¤</td><td>ç‰¹æ®Šæ•°æ®åº“ã€å¤æ‚è§„åˆ™</td></tr><tr><td>UUID</td><td>UUID.randomUUID()</td><td>å…¨å±€å”¯ä¸€ï¼Œæ— ä¾èµ–</td><td>å­˜å‚¨ç©ºé—´å¤§ï¼Œæ— åº</td><td>åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>é›ªèŠ±ç®—æ³•</td><td>Snowflake</td><td>é«˜æ€§èƒ½ï¼Œè¶‹åŠ¿é€’å¢</td><td>ä¾èµ–æ—¶é’Ÿï¼Œé…ç½®å¤æ‚</td><td>é«˜å¹¶å‘åˆ†å¸ƒå¼ç³»ç»Ÿ</td></tr><tr><td>Redisè‡ªå¢</td><td>INCRå‘½ä»¤</td><td>é«˜æ€§èƒ½ï¼Œé›†ä¸­ç®¡ç†</td><td>ä¾èµ–Redisï¼Œå•ç‚¹é—®é¢˜</td><td>ä¸­å°è§„æ¨¡åˆ†å¸ƒå¼</td></tr></tbody></table>
<h3 data-id="heading-22">æ‹¦æˆªå™¨æ–¹æ¡ˆ vs MyBatis-Plus åŸç”Ÿæ–¹æ¡ˆ</h3>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>è‡ªå®šä¹‰æ‹¦æˆªå™¨</th><th>MyBatis-Plus åŸç”Ÿ</th></tr></thead><tbody><tr><td>æ•°æ®åº“å…¼å®¹æ€§</td><td>âœ… æ”¯æŒ OpenGauss ç­‰é­”æ”¹æ•°æ®åº“</td><td>âš ï¸ éƒ¨åˆ†æ•°æ®åº“ä¸æ”¯æŒ</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>âš ï¸ éœ€è¦ç¼–å†™æ‹¦æˆªå™¨ä»£ç </td><td>âœ… é…ç½®å³å¯ä½¿ç”¨</td></tr><tr><td>çµæ´»æ€§</td><td>âœ… å¯è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘</td><td>âŒ ä¾èµ–æ¡†æ¶å®ç°</td></tr><tr><td>æ€§èƒ½å¼€é”€</td><td>âš ï¸ æ¯æ¬¡INSERTé¢å¤–æŸ¥è¯¢åºåˆ—</td><td>âœ… æ•°æ®åº“åŸç”Ÿæ”¯æŒ</td></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>âš ï¸ éœ€è¦ç»´æŠ¤æ‹¦æˆªå™¨ä»£ç </td><td>âœ… æ¡†æ¶ç»Ÿä¸€ç»´æŠ¤</td></tr><tr><td>è°ƒè¯•éš¾åº¦</td><td>âš ï¸ éœ€è¦ç†è§£æ‹¦æˆªå™¨æœºåˆ¶</td><td>âœ… é—®é¢˜è¾ƒå°‘</td></tr></tbody></table>
<h2 data-id="heading-23">å…­ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">1. SQL æ³¨å…¥é˜²æŠ¤</h3>
<p>åºåˆ—åå¿…é¡»è¿›è¡Œä¸¥æ ¼éªŒè¯ï¼š<code>sequenceName.matches("^[a-zA-Z0-9_]+$")</code>ï¼Œé¿å…ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥ã€‚</p>
<h3 data-id="heading-25">2. æ€§èƒ½è€ƒè™‘</h3>
<p>æ¯æ¬¡ INSERT éƒ½ä¼šé¢å¤–æ‰§è¡Œä¸€æ¬¡åºåˆ—æŸ¥è¯¢ï¼Œé«˜å¹¶å‘åœºæ™¯éœ€è¦ï¼š</p>
<ul>
<li>ä½¿ç”¨é«˜æ€§èƒ½è¿æ¥æ± ï¼ˆHikariCPï¼‰</li>
<li>è€ƒè™‘æ‰¹é‡è·å–åºåˆ—å€¼å¹¶ç¼“å­˜</li>
<li>ç›‘æ§åºåˆ—æŸ¥è¯¢çš„å“åº”æ—¶é—´</li>
</ul>
<h3 data-id="heading-26">3. äº‹åŠ¡ä¸€è‡´æ€§</h3>
<p>åºåˆ—ç”Ÿæˆåœ¨ INSERT äº‹åŠ¡å¤–æ‰§è¡Œï¼Œäº‹åŠ¡å›æ»šæ—¶åºåˆ—å€¼ä¼šè¢«æ¶ˆè€—ï¼Œå¯¼è‡´åºåˆ—ä¸è¿ç»­ã€‚è¿™æ˜¯åºåˆ—æœºåˆ¶çš„æ­£å¸¸è¡Œä¸ºï¼Œä¸å½±å“æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-27">4. å¤šæ•°æ®æºåœºæ™¯</h3>
<p>æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰ SqlSessionFactory æ³¨å†Œï¼Œéœ€ç¡®ä¿æ¯ä¸ªæ•°æ®æºçš„è¡¨éƒ½æœ‰å¯¹åº”çš„åºåˆ—ã€‚</p>
<h3 data-id="heading-28">5. åºåˆ—å‘½åçº¦å®š</h3>
<p>ç»Ÿä¸€ä½¿ç”¨ <code>{table_name}_id_seq</code> æ ¼å¼ï¼Œå¦‚ <code>xxx_id_seq</code>ã€‚</p>
<h2 data-id="heading-29">ä¸ƒã€å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-30">é—®é¢˜ 1ï¼šID ä»ç„¶ä¸º NULL</h3>
<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
<ol>
<li>æ‹¦æˆªå™¨æœªæ­£ç¡®æ³¨å†Œ</li>
<li>å®ä½“ç±»æ³¨è§£é…ç½®é”™è¯¯</li>
<li>æ•°æ®åº“åºåˆ—ä¸å­˜åœ¨</li>
</ol>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥æ‹¦æˆªå™¨æ˜¯å¦æ³¨å†Œï¼šæŸ¥çœ‹ Configuration.getInterceptors() åˆ—è¡¨</li>
<li>æ£€æŸ¥å®ä½“ç±»æ³¨è§£ï¼šç¡®ä¿ <code>@TableId(type = IdType.AUTO)</code></li>
<li>æ£€æŸ¥æ•°æ®åº“åºåˆ—ï¼š<code>SELECT * FROM information_schema.sequences WHERE sequence_name = 'table_id_seq'</code></li>
</ol>
<h3 data-id="heading-31">é—®é¢˜ 2ï¼šåºåˆ—ä¸å­˜åœ¨é”™è¯¯</h3>
<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ERROR:</span> relation <span class="hljs-string">"xxx_id_seq"</span> does <span class="hljs-built_in">not</span> exist
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç¼ºå¤±çš„åºåˆ—</span>
<span class="hljs-keyword">CREATE</span> SEQUENCE xxx_id_seq <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æˆ–è€…æ‰¹é‡åˆ›å»ºæ‰€æœ‰è¡¨çš„åºåˆ—</span>
DO $$
<span class="hljs-keyword">DECLARE</span>
    r RECORD;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">FOR</span> r <span class="hljs-keyword">IN</span> <span class="hljs-keyword">SELECT</span> tablename <span class="hljs-keyword">FROM</span> pg_tables <span class="hljs-keyword">WHERE</span> schemaname <span class="hljs-operator">=</span> <span class="hljs-string">'public'</span>
    LOOP
        <span class="hljs-keyword">EXECUTE</span> format(<span class="hljs-string">'CREATE SEQUENCE IF NOT EXISTS %I_id_seq'</span>, r.tablename);
    <span class="hljs-keyword">END</span> LOOP;
<span class="hljs-keyword">END</span> $$;
</code></pre>
<h3 data-id="heading-32">é—®é¢˜ 3ï¼šæ€§èƒ½ä¸‹é™</h3>
<p><strong>ç°è±¡ï¼š</strong> INSERT æ“ä½œå˜æ…¢</p>
<p><strong>åˆ†æï¼š</strong></p>
<ul>
<li>æ¯æ¬¡ INSERT é¢å¤–æ‰§è¡Œä¸€æ¬¡åºåˆ—æŸ¥è¯¢</li>
<li>æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸å½“</li>
<li>åºåˆ—ç¼“å­˜è®¾ç½®è¿‡å°</li>
</ul>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>å¢åŠ åºåˆ—ç¼“å­˜ï¼š<code>ALTER SEQUENCE table_id_seq CACHE 100</code></li>
<li>ä¼˜åŒ–è¿æ¥æ± é…ç½®ï¼šè°ƒæ•´ HikariCP çš„ maximum-pool-size å’Œ minimum-idle</li>
<li>è€ƒè™‘æ‰¹é‡è·å–åºåˆ—å€¼å¹¶ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“äº¤äº’</li>
</ol>
<h2 data-id="heading-33">å…«ã€æ€»ç»“</h2>
<p>è‡ªå®šä¹‰ MyBatis æ‹¦æˆªå™¨å®ç°ä¸»é”®è‡ªåŠ¨ç”Ÿæˆæ˜¯ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š</p>
<ol>
<li><strong>æ•°æ®åº“å…¼å®¹æ€§é—®é¢˜</strong>ï¼šå¦‚ OpenGaussã€è¾¾æ¢¦ç­‰å›½äº§æ•°æ®åº“</li>
<li><strong>å¤æ‚ ID ç”Ÿæˆè§„åˆ™</strong>ï¼šéœ€è¦è‡ªå®šä¹‰ç”Ÿæˆé€»è¾‘çš„åœºæ™¯</li>
<li><strong>æ¡†æ¶é™åˆ¶</strong>ï¼šMyBatis-Plus åŸç”Ÿæ–¹æ¡ˆæ— æ³•æ»¡è¶³éœ€æ±‚</li>
</ol>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… å®Œå…¨æ§åˆ¶ ID ç”Ÿæˆé€»è¾‘</li>
<li>âœ… è‰¯å¥½çš„æ•°æ®åº“å…¼å®¹æ€§</li>
<li>âœ… å¯¹ä¸šåŠ¡ä»£ç é€æ˜ï¼Œæ— ä¾µå…¥</li>
</ul>
<p><strong>éœ€è¦æ³¨æ„ï¼š</strong></p>
<ul>
<li>âš ï¸ å®ç°å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜</li>
<li>âš ï¸ æ€§èƒ½å¼€é”€éœ€è¦è¯„ä¼°</li>
<li>âš ï¸ éœ€è¦ç†è§£ MyBatis æ‹¦æˆªå™¨æœºåˆ¶</li>
</ul>
<p>é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°ï¼Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯ä»¥æˆä¸ºè§£å†³ç‰¹å®šåœºæ™¯é—®é¢˜çš„æœ‰æ•ˆå·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“ç ´ IK åˆ†è¯â€œæ¶æ„é™·é˜±â€â€”â€”é˜¿é‡Œäº‘ ES Serverless ç´¢å¼•çº§è¯å…¸çš„å®Œç¾çƒ­æ›´æ–°å®è·µ]]></title>    <link>https://juejin.cn/post/7585024562216239144</link>    <guid>https://juejin.cn/post/7585024562216239144</guid>    <pubDate>2025-12-18T10:41:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585024562216239144" data-draft-id="7584997357445529640" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“ç ´ IK åˆ†è¯â€œæ¶æ„é™·é˜±â€â€”â€”é˜¿é‡Œäº‘ ES Serverless ç´¢å¼•çº§è¯å…¸çš„å®Œç¾çƒ­æ›´æ–°å®è·µ"/> <meta itemprop="keywords" content="æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2025-12-18T10:41:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“ç ´ IK åˆ†è¯â€œæ¶æ„é™·é˜±â€â€”â€”é˜¿é‡Œäº‘ ES Serverless ç´¢å¼•çº§è¯å…¸çš„å®Œç¾çƒ­æ›´æ–°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T10:41:52.000Z" title="Thu Dec 18 2025 10:41:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åšè¿‡ Elasticsearch ä¸­æ–‡æœç´¢ç ”å‘çš„åŒå­¦ä¸­ï¼ŒIK åˆ†è¯å™¨å‡ ä¹æ˜¯æ ‡é…ã€‚å®ƒç®€å•ã€é«˜æ•ˆï¼Œè¦†ç›–äº†å¤§å¤šæ•°ä¸­æ–‡ä¸šåŠ¡åœºæ™¯ï¼Œè¢«å¹¿æ³›ç”¨äºç”µå•†ã€èµ„è®¯ã€ç¤¾åŒºç­‰æœç´¢ç³»ç»Ÿã€‚ç„¶è€Œï¼Œåœ¨ä¸€äº›ä¸šåŠ¡åœºæ™¯ä¸­ï¼ŒIK åˆ†è¯å™¨å¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„çº¿ä¸Šäº‹æ•…ï¼Œå°¤å…¶æ˜¯åœ¨å¤§ä¿ƒã€çƒ­è¯é«˜å³°ç­‰å¯¹æœç´¢ç¨³å®šæ€§è¦æ±‚æé«˜çš„æ—¶æœŸã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªçœŸå®äº‹æ•…çš„å¤ç›˜ï¼Œè§£æå¼€æº IK åˆ†è¯å™¨æ¶æ„è®¾è®¡ä¸­çš„ä¸è¶³ï¼Œå¹¶ä»‹ç»é˜¿é‡Œäº‘ ES Serverless å¦‚ä½•é€šè¿‡â€œç´¢å¼•çº§è¯å…¸â€èƒ½åŠ›ï¼Œå½»åº•è§£å†³çƒ­æ›´æ–°å¼•å‘çš„æœç´¢é”™é…é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€äº‹æ•…å¤ç›˜ï¼šä¸€æ¬¡å¸¸è§„æ“ä½œï¼Œå¼•å‘ P0 äº‹æ•…</h2>
<h3 data-id="heading-1">èƒŒæ™¯</h3>
<p>æŸç”µå•†å¹³å°å¤§ä¿ƒå‰å¤•ï¼Œè¿è¥å‘ç°ç½‘ç»œçƒ­æ¢— â€œå“ˆåŸºç±³â€ï¼ˆæŒ‡ä»£çŒ«å’ª/å® ç‰©ï¼‰çš„æœç´¢é‡é£™å‡ã€‚ç”±äº IK é»˜è®¤è¯å…¸ä¸­æ²¡æœ‰è¯¥è¯ï¼ŒæŸ¥è¯¢æ—¶ä¼šè¢«åˆ‡åˆ†ä¸º [å“ˆ, åŸº, ç±³] â€”â€”å¯¼è‡´å¬å›äº†å¤§é‡æ— å…³å•†å“ï¼Œè½¬åŒ–æä½ã€‚è¿è¥ç«‹å³æå‡ºéœ€æ±‚ï¼šå¿…é¡»è®©â€œå“ˆåŸºç±³â€ç²¾ç¡®åŒ¹é…ç›¸å…³å•†å“ã€‚</p>
<h3 data-id="heading-2">æ“ä½œè¿‡ç¨‹</h3>
<p>â€œæ ‡å‡†â€çš„å˜æ›´ï¼š</p>
<ul>
<li>
<p>åœ¨å·²æœ‰è¯å…¸ä¸­æ–°å¢è¯ç»„â€œå“ˆåŸºç±³â€ï¼Œå¹¶è§¦å‘äº†é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹çš„çƒ­æ›´æ–°ã€‚</p>
</li>
<li>
<p>_analyze æ¥å£éªŒè¯é€šè¿‡ï¼šå“ˆåŸºç±³ å·²è¢«æ­£ç¡®è¯†åˆ«ä¸ºä¸€ä¸ªå®Œæ•´ Termã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">äº‹æ•…å‘ç”Ÿ</h3>
<p>ç„¶è€Œï¼Œå°±åœ¨è¯å…¸çƒ­æ›´æ–°å®Œæˆçš„é‚£ä¸€ç¬é—´ï¼Œçº¿ä¸Šçš„å®æ—¶æœç´¢å´©äº†</p>
<ul>
<li>
<p>æ–°æ•°æ®ï¼ˆæ­£å¸¸ï¼‰ï¼š åˆšåˆšä¸Šæ¶çš„â€œå“ˆåŸºç±³â€å•†å“èƒ½æœåˆ°ã€‚</p>
</li>
<li>
<p>æ—§æ•°æ®ï¼ˆæ¶ˆå¤±ï¼‰ï¼šä¹‹å‰å†™å…¥çš„æ‰€æœ‰åŒ…å«â€œå“ˆåŸºç±³â€æè¿°çš„å­˜é‡å•†å“ï¼Œå…¨éƒ¨æœä¸åˆ°äº†ï¼</p>
</li>
</ul>
<p>åŸå› å´æ‰‘æœ”è¿·ç¦»â€”â€”æ²¡æœ‰æ”¹åŠ¨ç´¢å¼•ï¼Œå´ç¬é—´å¯¼è‡´å­˜é‡æ•°æ®å…¨éƒ¨å¤±æ•ˆã€‚</p>
<p>**ç»“æœï¼š**æœ¬æ¥æƒ³æå‡ç”¨æˆ·ä½“éªŒï¼Œç»“æœæœç´¢æŒ‚äº†ï¼ŒGMV è·Œäº†ï¼Œä¸€æ¬¡å¸¸è§„ä¼˜åŒ–æ¼”å˜æˆäº† P0 çº§çº¿ä¸Šäº‹æ•…ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/95/954cf36bf961711d6f68a306830c061b.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">äºŒã€æ·±åº¦è§£æï¼šIKè¯å…¸çƒ­æ›´æ–°çš„â€œæ—¶ç©ºé”™ä¹±â€</h2>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿè¿™å¹¶é ES çš„ Bugï¼Œè€Œæ˜¯ å¼€æº IK æ’ä»¶çš„è®¾è®¡æœºåˆ¶ ä¸ å€’æ’ç´¢å¼•ç‰¹æ€§ ä¹‹é—´çš„ä¸€æ¬¡æ­£é¢ç¢°æ’ã€‚</p>
<h3 data-id="heading-5">æ ¸å¿ƒå†²çªï¼šåŠ¨æ€è¯å…¸ vs é™æ€ç´¢å¼•</h3>
<ul>
<li>IK æ’ä»¶çš„â€œå…¨å±€å•ä¾‹â€æœºåˆ¶ï¼ˆThe Global Singletonï¼‰ï¼š</li>
</ul>
<p>IK åˆ†è¯å™¨é‡‡ç”¨å…¨å±€å…±äº«è¯å…¸çš„å®ç°ç­–ç•¥ã€‚è¿™æ„å‘³ç€ï¼Œä¸€æ—¦è§¦å‘çƒ­æ›´æ–°ï¼Œæ•´ä¸ªé›†ç¾¤ä¸Šæ‰€æœ‰ä½¿ç”¨ IK çš„ç´¢å¼•ï¼ˆæ— è®ºæ–°æ—§ï¼‰éƒ½ä¼šç«‹å³ã€å¼ºåˆ¶ä½¿ç”¨æ–°è¯å…¸è¿›è¡ŒæŸ¥è¯¢åˆ†è¯ã€‚è¿™æ˜¯ä¸€ä¸ªâ€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„æ“ä½œã€‚</p>
<ul>
<li>ES ç´¢å¼•çš„â€œä¸å¯å˜â€ç‰¹æ€§ï¼ˆThe Immutable Indexï¼‰ï¼š</li>
</ul>
<p>å½“å†™å…¥æ–‡æ¡£æ—¶ï¼Œå…¶å­—æ®µå†…å®¹ç»è¿‡åˆ†è¯åï¼Œç”Ÿæˆçš„ Term è¢«å†™å…¥å€’æ’ç´¢å¼•ã€‚æ•°æ®ä¸€æ—¦å†™å…¥ï¼Œç”Ÿæˆçš„å€’æ’ç´¢å¼•ï¼ˆTermï¼‰å°±è¢«â€œå›ºåŒ–â€äº†ã€‚</p>
<p>è¿™å°±æ˜¯å†²çªçš„æ ¹æºï¼š ä½ ä¸ºäº†â€œæœªæ¥â€çš„æ•°æ®ï¼ˆæ–°çƒ­è¯ï¼‰æ›´æ–°äº†å…¨å±€è¯å…¸ï¼Œå´æ— æ„ä¸­ç ´åäº†â€œè¿‡å»â€æ•°æ®çš„æŸ¥è¯¢åŒ¹é…é€»è¾‘ã€‚</p>
<h3 data-id="heading-6">é”™ä½å›¾è§£ï¼šæ‹¿ç€æ–°åœ°å›¾æ‰¾æ—§åœ°å€</h3>
<p>è®©æˆ‘ä»¬æ¸…æ™°åœ°æ¢³ç†ä¸‹äº‹æ•…å‘ç”Ÿçš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>
<p>çƒ­æ›´æ–°å‰ï¼ˆæ—§è¯å…¸ï¼‰ï¼š â€œå“ˆåŸºç±³â€è¢«åˆ‡åˆ†ä¸º [å“ˆ, åŸº, ç±³] ä¸‰ä¸ªå•å­—å­˜å…¥å€’æ’ç´¢å¼•ã€‚</p>
</li>
<li>
<p>çƒ­æ›´æ–°åï¼ˆæ–°è¯å…¸ï¼‰ï¼š å½“â€œå“ˆåŸºç±³â€è¢«åŠ å…¥åˆ°è¯å…¸åï¼Œæœç´¢è¯â€œå“ˆåŸºç±³â€è¢«è§£æä¸ºæ•´ä½“ Term [å“ˆåŸºç±³]ã€‚</p>
</li>
</ul>
<p><strong>ç»“æœï¼š</strong></p>
<p>æ‹¿ç€æ–° Term å“ˆåŸºç±³ å»æ‰¾æ—§ç´¢å¼•é‡Œçš„å•å­— å“ˆã€åŸºã€ç±³ å®Œå…¨åŒ¹é…ä¸ä¸Šï¼è¿™å°±åƒæ˜¯â€œæ—¶ç©ºé”™ä¹±â€ï¼šä½ æ‹¿ç€ä»Šå¤©çš„æ–°åœ°å›¾ï¼ˆæ–°è¯å…¸ï¼‰ï¼Œå»å¯¼èˆªæ˜¨å¤©çš„æ—§åŸå¸‚ï¼ˆæ—§ç´¢å¼•ï¼‰ï¼Œè·¯æ—©å°±å˜äº†ï¼Œå½“ç„¶æ‰¾ä¸åˆ°ç›®çš„åœ°ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/8a/8a3d5ee507c7cd5dc922760c900f443c.webp" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ä¸‰ã€ä¼ ç»Ÿè§£æ³•ï¼šä¸‰ç§â€œç»­å‘½â€æ–¹æ¡ˆ</h2>
<p>åœ¨æœç´¢ç³»ç»Ÿé‡Œï¼Œè¯å…¸ç‰ˆæœ¬é”™é…æ˜¯ä¸€ç±»é«˜é¢‘ä¸”æ£˜æ‰‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>
<p>ä¸€æ—¦æ–°è¯å…¸ä¸Šçº¿ï¼Œè€Œç´¢å¼•é‡Œçš„æ•°æ®ä»æ˜¯æŒ‰æ—§åˆ†è¯è§„åˆ™å»ºç«‹ï¼Œæœç´¢ä¾¿å¯èƒ½éé¢„æœŸçš„å¼‚å¸¸ã€‚</p>
</li>
<li>
<p>å¯¹ç”¨æˆ·è€Œè¨€ï¼Œè¡¨ç°æ˜¯è€æ•°æ®åŒ¹é…ç»“æœå¼‚å¸¸ï¼Œä¹‹å‰å¯ä»¥æœç´¢åˆ°çš„æ•°æ®å…¨éƒ¨â€œæ¶ˆå¤±â€äº†ã€‚</p>
</li>
<li>
<p>å¯¹è¿ç»´è€Œè¨€ï¼Œè¦ä¿è¯ æ–°è¯å…¸é…ç½® ä¸ ç´¢å¼•æ•°æ®åˆ†è¯ç»“æœ åŒæ­¥ï¼Œéœ€è¦åœ¨â€œæ€§èƒ½ã€ä½“éªŒã€æˆæœ¬â€ä¹‹é—´åšè‰°éš¾å¹³è¡¡ã€‚</p>
</li>
</ul>
<p>ä¸ºç¼“è§£è¿™ä¸€é—®é¢˜ï¼Œä¸šå†…å¸¸ç”¨ä¸‰ç§æ–¹æ¡ˆæ¥ç»™ä¸šåŠ¡â€œç»­å‘½â€â€”â€”å³åœ¨ä¸å½»åº•åœæœºçš„æƒ…å†µä¸‹ï¼Œå°½é‡è®©æ–°è¯ç”Ÿæ•ˆå¹¶ç»´æŒçº¿ä¸ŠæŸ¥è¯¢ç¨³å®šã€‚</p>
<p>ä¸‰ç§å¸¸ç”¨æ–¹æ¡ˆè¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://static001.geekbang.org/infoq/76/76e10fb814964f244208b6dd4fe75343.png" alt="" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œè¿™äº›æ–¹æ¡ˆæ— ä¸€èƒ½å¤ŸåŒæ—¶åšåˆ°ï¼š</p>
<ul>
<li>
<p>æ— æ„Ÿçƒ­æ›´æ–°ï¼šè®©ç”¨æˆ·å®Œå…¨å¯Ÿè§‰ä¸åˆ°åå°åˆ‡æ¢è¿‡ç¨‹</p>
</li>
<li>
<p>ç²¾å‡†åŒ¹é…æ–°è¯ï¼šæ–°çƒ­è¯å³åˆ»å‘½ä¸­ï¼Œä¸å—æ—§åˆ†è¯å½±å“</p>
</li>
<li>
<p>ä¸å½±å“å­˜é‡æ•°æ®æœç´¢ï¼šè€æ•°æ®æœç´¢ç»“æœä¿æŒç¨³å®šæ— åå·®</p>
</li>
</ul>
<p>æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€ç§æ—¢èƒ½è®©è¯å…¸ç‰ˆæœ¬ä¸æ•°æ®ç‰ˆæœ¬å®Œç¾å¯¹é½ï¼Œåˆä¸ä¼šç‰ºç‰²çº¿ä¸Šå¯ç”¨æ€§çš„å…¨æ–°è§£æ³•ã€‚</p>
<h2 data-id="heading-8">å››ã€é˜¿é‡Œäº‘ ES Serverless ç ´å±€ï¼šç´¢å¼•çº§è¯å…¸éš”ç¦»</h2>
<p>æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³å¼€æº IK æ’ä»¶çš„â€œå…¨å±€å•ä¾‹â€è¯å…¸æœºåˆ¶å¯¼è‡´çš„å†²çªï¼Œé˜¿é‡Œäº‘ ES Serverless é€šè¿‡åœ¨å†…æ ¸å±‚é¢çš„æ”¹é€ ï¼Œæ¨å‡º â€œé›†ç¾¤-ç´¢å¼•-åˆ†è¯å™¨â€ä¸‰çº§è¯å…¸é…ç½®ä½“ç³»ï¼š</p>
<h3 data-id="heading-9">å¤šçº§è¯å…¸ä½“ç³»è®¾è®¡</h3>
<p>è¯¥ä½“ç³»å°†è¯å…¸çš„æ§åˆ¶æƒä»â€œé›†ç¾¤/èŠ‚ç‚¹çº§â€ä¸‹æ”¾ï¼Œå…è®¸åœ¨ä¸åŒå±‚çº§è¿›è¡Œç²¾ç»†åŒ–é…ç½®ï¼Œå¹¶éµå¾ªæ˜ç¡®çš„ä¼˜å…ˆçº§è§„åˆ™ï¼šåˆ†è¯å™¨çº§åˆ« &gt; ç´¢å¼•çº§åˆ« &gt; é›†ç¾¤ï¼ˆç§Ÿæˆ·ï¼‰çº§åˆ«ã€‚</p>
<ul>
<li>
<p>é›†ç¾¤çº§ï¼ˆCluster-levelï¼‰ï¼šç”±ç®¡æ§å¹³å°ç»Ÿä¸€ä¸‹å‘åŸºç¡€è¯å…¸ï¼Œä¿éšœå…¨é›†ç¾¤ï¼ˆç§Ÿæˆ·ï¼‰åŸºç¡€è¯æ±‡ä¸€è‡´æ€§ï¼Œä¼˜å…ˆçº§æœ€ä½ã€‚</p>
</li>
<li>
<p>ç´¢å¼•çº§ï¼ˆIndex-levelï¼‰ï¼šä¸ºæ¯ä¸ªç´¢å¼•ç»‘å®šä¸“å±æ‰©å±•è¯å…¸å’Œåœç”¨è¯å…¸ï¼Œç²¾å‡†è§£å†³â€œæ—¶ç©ºé”™ä½â€é—®é¢˜çš„å…³é”®ã€‚</p>
</li>
<li>
<p>åˆ†è¯å™¨çº§ï¼ˆAnalyzer-levelï¼‰ï¼šä¸ºç´¢å¼•å†…çš„æŸä¸ªè‡ªå®šä¹‰åˆ†è¯å™¨é…ç½®ä¸“ç”¨è¯å…¸ï¼Œæ»¡è¶³ç‰¹å®šå­—æ®µçš„ç‰¹æ®Šåˆ†è¯éœ€æ±‚ï¼Œä¼˜å…ˆçº§æœ€é«˜ã€‚</p>
</li>
</ul>
<p>å…¸å‹åœºæ™¯ç¤ºä¾‹ï¼šå¯¹ å®æ—¶æ–°å¢çƒ­è¯ åœºæ™¯ï¼Œâ€œç´¢å¼•çº§åˆ«è¯å…¸â€èƒ½åŠ›æä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä¸ºä¸åŒç´¢å¼•ç»‘å®šä¸åŒç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p>product_v1 â†’ dict_v1</p>
</li>
<li>
<p>product_v2 â†’ dict_v2</p>
</li>
</ul>
<p>å®ƒä»¬å¯åœ¨åŒä¸€é›†ç¾¤å†…äº’ä¸å¹²æ‰°ã€å¹¶è¡Œå­˜åœ¨ï¼Œè®©æ–°æ—§ç‰ˆæœ¬è¯å…¸åŒæ—¶åœ¨çº¿ï¼Œå½»åº•è§£å†³â€œæ–°æ—§ä¸å…¼å®¹â€çš„æ—¶ç©ºé”™ä¹±é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">çƒ­æ›´æ–°æ— æ„Ÿæµç¨‹</h3>
<p>ä»¥â€œå“ˆåŸºç±³â€ä¸ºä¾‹ï¼š</p>
<ul>
<li>
<p>Step 1 éš”ç¦»è¿è¡Œ</p>
</li>
<li>
<p>product_v1ï¼ˆç»‘å®šåˆ«åproduct_aliasï¼‰ ä»ç”¨æ—§è¯å…¸ dict_v1ã€‚</p>
</li>
<li>
<p>çº¿ä¸Šç”¨æˆ·æŸ¥è¯¢ä¸å—å½±å“ï¼Œå­˜é‡æ•°æ®ç…§å¸¸åŒ¹é…ã€‚</p>
</li>
<li>
<p>Step 2 æ„å»ºæ–°ç´¢å¼•</p>
</li>
<li>
<p>æ–°å»º product_v2 å¹¶ç»‘å®šå«â€œå“ˆåŸºç±³â€çš„ dict_v2ã€‚</p>
</li>
<li>
<p>ç”¨ç¦»çº¿é“¾è·¯æˆ– _reindex å°†æ•°æ®å†™å…¥æ–°ç´¢å¼•ã€‚</p>
</li>
<li>
<p>å»ºè®®ï¼š</p>
</li>
</ul>
<p>å¯¹äºå¤§è§„æ¨¡ä¸šåŠ¡ï¼Œå»ºè®®ç›´æ¥å¤ç”¨ T+1 ç¦»çº¿é“¾è·¯ï¼ˆå¦‚ DTS/ODPS/Flinkï¼‰ï¼Œå°†æ•°æ®é‡æ–°çŒå…¥ product_v2ã€‚è¿™æ˜¯æœ€æ ‡å‡†ã€æœ€é«˜æ•ˆçš„åšæ³•ã€‚</p>
<ul>
<li>
<p>Step 3 åŸå­åˆ‡æ¢æµé‡</p>
</li>
<li>
<p>æ•°æ®è¿½å¹³åï¼Œå°†product_v2 ç»‘å®šåˆ° product_alias ï¼ŒåŒæ—¶ä¸‹æ‰product_v1ï¼Œå®ç°æµé‡çš„åŸå­åˆ‡æ¢ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">æ•ˆæœ</h3>
<p>é€šè¿‡è¿™ä¸€å¥— å¤šçº§è¯å…¸ + æµé‡åŸå­åˆ‡æ¢ çš„ç»„åˆæ‹³ï¼Œæˆ‘ä»¬å®ç°äº† è¯å…¸ç‰ˆæœ¬ä¸æ•°æ®ç‰ˆæœ¬çš„å®Œç¾å¯¹é½ï¼š</p>
<ul>
<li>é›¶ä¸­æ–­ï¼š</li>
</ul>
<p>æ›´æ–°å…¨ç¨‹ç”¨æˆ·æ— æ„Ÿï¼Œæ•´ä¸ªæ›´æ–°å’Œåˆ‡æ¢è¿‡ç¨‹å¯¹çº¿ä¸Šç”¨æˆ·å®Œå…¨é€æ˜ï¼Œæ²¡æœ‰æœåŠ¡ä¸­æ–­æˆ–æŸ¥è¯¢å¤±è´¥çš„çª—å£ã€‚</p>
<ul>
<li>ç²¾å‡†åŒ¹é…ï¼š</li>
</ul>
<p>æµé‡åˆ‡æ¢åï¼Œæ–°è¯å³åˆ»ç”Ÿæ•ˆï¼Œæ–°æ—§æ•°æ®æŸ¥è¯¢é€»è¾‘å¯¹é½ï¼Œæœç´¢â€œå“ˆåŸºç±³â€ç«‹åˆ»ç²¾å‡†å‘½ä¸­ï¼Œä¸”æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰ä»»ä½•â€œæŸ¥è¯¢æ–­å±‚â€æˆ–â€œæœåŠ¡é—ªæ–­â€ã€‚</p>
<ul>
<li>å¼¹æ€§æ”¯æŒï¼š</li>
</ul>
<p>ç»“åˆ Serverless çš„è‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œåº”å¯¹å¤§ä¿ƒç®—åŠ›å³°å€¼ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/c8/c8d79eb50eeb0bcd214e2b192070e78d.webp" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">é¢å¤–ä¼˜åŠ¿ï¼šå†…æ ¸ä¼˜åŒ–çš„éšæ€§æ”¶ç›Š</h3>
<p>é™¤äº†ç´¢å¼•çº§è¯å…¸ï¼ŒServerless ç‰ˆæœ¬è¿˜å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p>é¿å…è¯å…¸è„‘è£‚ï¼šä¿è¯é›†ç¾¤å†…èŠ‚ç‚¹è¯å…¸ç»Ÿä¸€ã€‚</p>
</li>
<li>
<p>æ— æ„Ÿå‡çº§ï¼šåŒæ­¥å¼€æº IK ä¸åŸç”Ÿ ES æ–°ç‰¹æ€§ã€‚è¿™äº›èƒ½åŠ›è®©ä½ çš„çƒ­è¯æ›´æ–°ä»ä¸€ä»¶â€œé«˜é£é™©è¿ç»´æ“ä½œâ€ï¼Œå˜æˆç¨³å®šã€å®‰å…¨çš„æ—¥å¸¸æ“ä½œã€‚</p>
</li>
</ul>
<h2 data-id="heading-13">äº”ã€é™„å½•</h2>
<h3 data-id="heading-14">â€œä¼‘å…‹ç–—æ³•â€æ›´æ–°æŒ‡å—</h3>
<p>å‡è®¾çº¿ä¸Šçš„ç´¢å¼•æ˜¯ product_v1ã€‚</p>
<p><strong>a. å‡†å¤‡é˜¶æ®µï¼šæ›´æ–°è¯å…¸å¹¶éªŒè¯è¯å…¸æ˜¯å¦ç”Ÿæ•ˆ</strong></p>
<p>â…°. æ›´æ–° IK è¿œç¨‹è¯å…¸ï¼ŒåŠ å…¥è¯ç»„â€œå“ˆåŸºç±³â€ã€‚</p>
<p>â…±. ç­‰å¾…è¯å…¸åŠ è½½å®Œæˆï¼Œå¹¶æµ‹è¯•æ–°è¯ç»„æ˜¯å¦ç”Ÿæ•ˆã€‚</p>
<p><strong>b. æ‰§è¡Œé˜¶æ®µï¼šç´¢å¼•æ•°æ®æ›´æ–°</strong></p>
<p>â…°. é€‰æ‹©ä¸šåŠ¡ä½å³°æœŸï¼ˆå¦‚å‡Œæ™¨ï¼‰ï¼Œè°ƒç”¨ _update_by_query APIï¼Œå¯¹ç´¢å¼•ä¸­å…¨éƒ¨æ•°æ®è¿›è¡Œæ›´æ–°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">POST /product_v1/_update_by_query?<span class="hljs-attr">refresh</span>=<span class="hljs-literal">true</span>&amp;conflicts=proceed

<span class="hljs-comment"># å¦‚æœä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€</span>
GET /_tasks?<span class="hljs-attr">detailed</span>=<span class="hljs-literal">true</span>&amp;actions=*update_by_query*
</code></pre>
<p><strong>c. éªŒè¯é˜¶æ®µï¼šéªŒè¯åˆ†è¯æ˜¯å¦ç”Ÿæ•ˆ</strong></p>
<p>â…°. å¾… <code>_update_by_query</code> ä»»åŠ¡å®Œæˆåï¼Œå¯ä»¥é€šè¿‡<code>termvectors</code>æ¥æŸ¥çœ‹å®é™…ç´¢å¼•çš„è¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">GET /product_v1/_termvectors/{<span class="hljs-built_in">id</span>}
</code></pre>
<h3 data-id="heading-15">ä¼ ç»Ÿæ–¹æ¡ˆâ€œæ‰“è¡¥ä¸â€å®æ“æŒ‡</h3>
<p>ä¸ºâ€œå“ˆåŸºç±³â€ç´§æ€¥ä¸Šçº¿åŒä¹‰è¯è¡¥ä¸</p>
<p><strong>a. å‡†å¤‡é˜¶æ®µï¼šåœ¨è¯å…¸ä¸­æ–°å¢â€œå“ˆåŸºç±³â€ï¼Œå®šä¹‰å¸¦åŒä¹‰è¯çš„æŸ¥è¯¢åˆ†è¯å™¨</strong></p>
<p>â…°. é€šè¿‡ <code>PUT /_settings</code> APIï¼ŒåŠ å…¥ <code>synonym_graph</code> è¿‡æ»¤å™¨å’Œä½¿ç”¨å®ƒçš„æ–°åˆ†è¯å™¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PUT /product_v1/_settings
{
  <span class="hljs-string">"analysis"</span>: {
    <span class="hljs-string">"filter"</span>: {
      <span class="hljs-string">"my_synonym_graph"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"synonym_graph"</span>,
        <span class="hljs-string">"synonyms"</span>: [
          // æ ¸å¿ƒè§„åˆ™ï¼šå°†æ–°è¯æ˜ å°„å›æ—§çš„åˆ‡åˆ†ç»“æœ
          <span class="hljs-string">"å“ˆåŸºç±³, å“ˆ åŸº ç±³"</span>
        ]
      }
    },
    <span class="hljs-string">"analyzer"</span>: {
      <span class="hljs-string">"my_search_analyzer"</span>: {
        <span class="hljs-string">"tokenizer"</span>: <span class="hljs-string">"ik_smart"</span>,
        <span class="hljs-string">"filter"</span>: [ <span class="hljs-string">"my_synonym_graph"</span> ]
      }
    }
  }
}
</code></pre>
<p><strong>b. åº”ç”¨é˜¶æ®µï¼šå°†åŒä¹‰è¯è§„åˆ™åº”ç”¨åˆ°ç´¢å¼•å­—æ®µï¼Œå¹¶æ›´æ–° Mapping</strong></p>
<p>â…°. æœ€åï¼Œæ›´æ–°å­—æ®µçš„ <code>mapping</code>ï¼ŒæŒ‡å®šåœ¨æŸ¥è¯¢æ—¶ä½¿ç”¨æˆ‘ä»¬æ–°å®šä¹‰çš„ <code>my_search_analyzer</code>ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /product_v1/_mapping
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ik_max_word"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å†™å…¥æ—¶ä¿æŒåŸæ ·ï¼Œåˆ†è¯ä¸º[å“ˆ,åŸº,ç±³]</span>
      <span class="hljs-attr">"search_analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my_search_analyzer"</span> <span class="hljs-comment">// æŸ¥è¯¢æ—¶åº”ç”¨åŒä¹‰è¯è¡¥ä¸</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>c. æ•ˆæœ</strong>ï¼šå®Œæˆä»¥ä¸Šæ“ä½œåï¼Œæœç´¢â€œå“ˆåŸºç±³â€å°±èƒ½åŒ¹é…åˆ°åŒ…å« <code>å“ˆ</code> <code>åŸº</code> <code>ç±³</code> çš„æ—§æ–‡æ¡£äº†ã€‚</p>
<h3 data-id="heading-16">Serverless é…ç½®å®æ“</h3>
<p><strong>å‰æ</strong>ï¼šå·²ç»åœ¨ Serverless æ§åˆ¶å°ä¸Šä¼ è¯å…¸ï¼Œè¯å…¸IDæ ‡è¯†ä¸º <code>dict_v1</code> å’Œ <code>dict_v2</code></p>
<h4 data-id="heading-17">Step 1ï¼š çº¿ä¸ŠæœåŠ¡ç¨³å®šè¿è¡Œ</h4>
<p>åœ¨åˆ›å»ºç´¢å¼• <code>product_v``1</code> æ—¶ï¼Œä¸ºå…¶æŒ‡å®šè¯å…¸ <code>dict_v1</code>ï¼ˆå¦‚åœ¨åˆ›å»ºç´¢å¼•æ—¶æœªæŒ‡å®šè¯å…¸ï¼Œä¹Ÿå¯ä»¥é€šè¿‡PUT {index}/_settings REST APIé…ç½®ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">PUT /product_v1
{
  <span class="hljs-string">"settings"</span>: {
    <span class="hljs-string">"number_of_shards"</span>: 5,
    <span class="hljs-string">"number_of_replicas"</span>: 1,
    <span class="hljs-string">"ik.extra_dict_ids"</span>: <span class="hljs-string">"dict-v1"</span>
  },
  <span class="hljs-string">"mappings"</span>: {
    <span class="hljs-string">"properties"</span>: {
      <span class="hljs-string">"content"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>,
        <span class="hljs-string">"search_analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>
      }
    }
  }
}

æˆ–

PUT /product_v1/_settings
{
  <span class="hljs-string">"index"</span>:{
     <span class="hljs-string">"ik.extra_dict_ids"</span>: <span class="hljs-string">"dict-v1"</span>
  }
}
</code></pre>
<p>å°†åˆ«å <code>product_alias</code> æŒ‡å‘ç´¢å¼• <code>product_v1</code></p>
<pre><code class="hljs language-bash" lang="bash">POST /_aliases
{
  <span class="hljs-string">"actions"</span>: [
    { <span class="hljs-string">"add"</span>:    { <span class="hljs-string">"index"</span>: <span class="hljs-string">"product_v1"</span>, <span class="hljs-string">"alias"</span>: <span class="hljs-string">"product_alias"</span>, <span class="hljs-string">"is_write_index"</span>: <span class="hljs-literal">true</span> } }
  ]
}
</code></pre>
<p>æ‰¹é‡å†™å…¥æ•°æ®</p>
<pre><code class="hljs language-css" lang="css">PUT product_alias/_bulk
{"index": {"_id": <span class="hljs-number">1</span>}}
{"<span class="hljs-attribute">content</span>": <span class="hljs-string">"å“ˆé›·å½—æ˜Ÿ"</span>}
{"index": {"_id": <span class="hljs-number">2</span>}}
{"<span class="hljs-attribute">content</span>": <span class="hljs-string">"åŸºç¡€ç‰ˆæœ¬äººå·¥æ™ºèƒ½"</span>}
{"index": {"_id": <span class="hljs-number">3</span>}}
{"<span class="hljs-attribute">content</span>": <span class="hljs-string">"ç±³æ˜¯ä¸€ç§é£Ÿç‰©"</span>}
{"index": {"_id": <span class="hljs-number">5</span>}}
{"<span class="hljs-attribute">content</span>": <span class="hljs-string">"å“ˆåŸºç±³æ˜¯çŒ«å’ª"</span>}
</code></pre>
<p><code>product_v1</code> å°†ä½¿ç”¨è¯å…¸ <code>dict_v1</code> è¿è¡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash">GET product_alias/_search
{
  <span class="hljs-string">"query"</span>: {
    <span class="hljs-string">"match"</span>: {
      <span class="hljs-string">"content"</span>: <span class="hljs-string">"å“ˆåŸºç±³"</span>
    }
  }
}
</code></pre>
<p><img src="https://static001.geekbang.org/infoq/28/2853b14c8fba08b1a2d96bdbc5c52b2c.png" alt="" loading="lazy"/></p>
<h4 data-id="heading-18">Step 2ï¼š å®‰å…¨ã€æ— æ„Ÿçš„å¼•å…¥æ–°è¯å…¸</h4>
<p>åˆ›å»ºåŒ…å«â€œå“ˆåŸºç±³â€è¯ç»„çš„æ–°è¯å…¸ <code>dict_v2</code>ï¼Œæ–°å»ºç´¢å¼• <code>product_v2</code>ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šæ–°è¯å…¸</p>
<pre><code class="hljs language-css" lang="css">PUT product_v2
{
  "settings": {
    "number_of_shards": <span class="hljs-number">5</span>,
    <span class="hljs-string">"number_of_replicas"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"ik.extra_dict_ids"</span>: <span class="hljs-string">"dict-v2"</span>
  },
  "mappings": {
    "properties": {
      "<span class="hljs-attribute">content</span>": {
        "type": <span class="hljs-string">"text"</span>,
        <span class="hljs-string">"analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>,
        <span class="hljs-string">"search_analyzer"</span>: <span class="hljs-string">"ik_max_word"</span>
      }
    }
  }
}
</code></pre>
<p>é€šè¿‡ API <code>_reindex</code> å°† <code>product_v1</code> ç´¢å¼•ä¸­çš„æ•°æ®æ›´æ–°åˆ° <code>product_v2</code> ä¸­ã€‚</p>
<pre><code class="hljs language-json" lang="json">POST _reindex
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"product_v1"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dest"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"product_v2"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åå°†åˆ«å <code>product_alias</code> æŒ‡å‘ç´¢å¼• <code>product_v2</code></p>
<pre><code class="hljs language-bash" lang="bash">POST /_aliases
{
  <span class="hljs-string">"actions"</span>: [
    { <span class="hljs-string">"remove"</span>:    { <span class="hljs-string">"index"</span>: <span class="hljs-string">"product_v1"</span>, <span class="hljs-string">"alias"</span>: <span class="hljs-string">"product_alias"</span> } },
    { <span class="hljs-string">"add"</span>:    { <span class="hljs-string">"index"</span>: <span class="hljs-string">"product_v2"</span>, <span class="hljs-string">"alias"</span>: <span class="hljs-string">"product_alias"</span>, <span class="hljs-string">"is_write_index"</span>: <span class="hljs-literal">true</span> } }
  ]
}
</code></pre>
<p>ç”±äº <code>products_v2</code> å·²ç»ç»‘å®šäº†æ–°è¯å…¸ï¼Œæ‰€æœ‰æ–°å†™å…¥çš„æ•°æ®éƒ½ä¼šæ­£ç¡®åœ°å°†â€œå“ˆåŸºç±³â€ç´¢å¼•ä¸ºä¸€ä¸ªå®Œæ•´çš„ Termã€‚</p>
<p>æ­¤æ—¶æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://static001.geekbang.org/infoq/b3/b32137a217b1b1892db1d455acaececa.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">å…­ã€ç»“å°¾</h2>
<p>å¼€æº IK åˆ†è¯å™¨çš„èŠ‚ç‚¹çº§å…¨å±€è¯å…¸æœºåˆ¶ï¼Œåœ¨åŠ¨æ€çƒ­æ›´æ–°åœºæ™¯ä¸‹ï¼Œä¸ ES çš„é™æ€å€’æ’ç´¢å¼•å¤©ç„¶å†²çªã€‚ä¼ ç»Ÿè§£æ³•è¦ä¹ˆç‰ºç‰²ä¸šåŠ¡è¿ç»­æ€§ï¼Œè¦ä¹ˆå¢åŠ è¿ç»´æˆæœ¬ã€‚</p>
<p>é˜¿é‡Œäº‘ ES Serverless é€šè¿‡ â€œç´¢å¼•çº§è¯å…¸â€ æ¶æ„ï¼Œå½»åº•æ¶ˆé™¤äº†è¿™ä¸€å†²çªï¼Œå®ç°ï¼š</p>
<ul>
<li>
<p>æ–°æ—§æ•°æ®ç‰ˆæœ¬çš„æ— ç¼å…¼å®¹</p>
</li>
<li>
<p>çƒ­æ›´æ–°è¿‡ç¨‹çš„å…¨ç¨‹é€æ˜</p>
</li>
<li>
<p>é›†ç¾¤èµ„æºçš„æœ€å¤§åŒ–åˆ©ç”¨</p>
</li>
</ul>
<p><strong>å‘Šåˆ«â€œé…ç½®åœ°ç‹±â€ï¼Œå›å½’ä¸šåŠ¡ä»·å€¼ï¼ä¸å†è®©ä¸€æ¬¡ç®€å•çš„çƒ­è¯æ›´æ–°ï¼Œå˜æˆçº¿ä¸Šäº‹æ•…ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„]]></title>    <link>https://juejin.cn/post/7584817405227843625</link>    <guid>https://juejin.cn/post/7584817405227843625</guid>    <pubDate>2025-12-18T06:19:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584817405227843625" data-draft-id="7584724634173898815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„"/> <meta itemprop="keywords" content="å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-18T06:19:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/2159881542179624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6000å­—æŠ€æœ¯å‘æ‹†è§£ â€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–æ¢ç´¢è§†é¢‘å¤„ç†æ–°è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2159881542179624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­—èŠ‚è·³åŠ¨æ•°æ®å¹³å°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:19:07.000Z" title="Thu Dec 18 2025 06:19:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>å›½å†…å…·èº«æ™ºèƒ½é¢†åŸŸåˆè¿æ¥é‡ç£…æ¶ˆæ¯ã€‚</p>
<p>12æœˆ18æ—¥ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€æ­£å¼äº®ç›¸ï¼Œä½œä¸ºè¡Œä¸šçº§â€œå…·èº«è¶…çº§å¤§è„‘â€ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€å°†ä»¥å…¨æ–°ç ”å‘èŒƒå¼ã€å…¨æ–°æ•°æ®é‡‡é›†èŒƒå¼ï¼Œä»¥åŠæ€§èƒ½é¢†å…ˆå…¨çƒçš„â€œå¼€æ‚Ÿâ€ä¸–ç•Œæ¨¡å‹3.0ï¼ˆKairos 3.0ï¼‰ï¼Œç²¾å‡†å‰–æå¹¶å“åº”å½“å‰é˜¶æ®µè¡Œä¸šåœ¨æŠ€æœ¯çªç ´å’Œå•†ä¸šè½åœ°çš„åŒé‡è¯‰æ±‚ï¼Œå°†å‰æ²¿æŠ€æœ¯è½¬åŒ–ä¸ºå¯è½åœ°ã€å¯å¤ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>åŒæ­¥å‘å¸ƒçš„è¿˜æœ‰â€œå…·èº«è¶…çº§å¤§è„‘æ¨¡ç»„A1â€ï¼Œé€šè¿‡æ­è½½é¦–åˆ›çº¯è§†è§‰æ— å›¾ç«¯åˆ°ç«¯VLAå…·èº«æ™ºèƒ½æ¨¡å‹ï¼Œè®©å…·èº«æ™ºèƒ½æ‘†è„±äº†é¢„å…ˆåœ°å›¾é‡‡é›†çš„ä¾èµ–ï¼Œèƒ½å¤Ÿå¿«é€Ÿé€‚åº”å¤æ‚çš„é™Œç”Ÿç¯å¢ƒâ€”â€”åŸºäºè¿™é¡¹èƒ½åŠ›ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€å°†ä¸å›½å†…é¢†å…ˆçš„æ™ºèƒ½ä¼ä¸šè¾¾æˆæˆ˜ç•¥åˆä½œï¼Œåœ¨å®‰é˜²ã€å·¡æ£€ç­‰å·¥ä¸šåœºæ™¯ç‡å…ˆéƒ¨ç½²æœºå™¨ç‹—ã€‚</p>
<p>â€œå¤§æ™“æœºå™¨äººâ€å°†å‰æ²¿é«˜æ–°æŠ€æœ¯è½¬åŒ–ä¸ºå¯è¢«ä¼ä¸šã€è¡Œä¸šå¿«é€Ÿè½åœ°ä¸”æ˜“äº å¤ç”¨çš„é€šç”¨èƒ½åŠ›ï¼ŒåŠ©åŠ›ä¼ä¸šã€è¡Œä¸šåœ¨AIæ—¶ä»£æŒç»­ç¹è£ã€‚</p>
<p>åŒæ—¶ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€ä¹Ÿä»¥ç§¯ææ€åº¦æ‹¥æŠ±è¡Œä¸šåˆä½œï¼Œä¸ç«å±±å¼•æ“å¼€å±•è”åˆæ¢ç´¢ï¼Œè¿›ä¸€æ­¥æå‡åœ¨å¤§æ¨¡å‹é¢†åŸŸçš„åˆ›æ–°åŠ›ï¼šå¦‚ç»“åˆäº†ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆçš„å¼€æ‚Ÿä¸–ç•Œæ¨¡å‹3.0ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³ä¼ ç»Ÿå•æœºå¤šè„šæœ¬æ¨¡å¼çš„é“¾è·¯åˆ†æ•£ã€I/Oè´Ÿè½½é‡ã€èµ„æºåˆ©ç”¨ç‡ä½ã€ç¨³å®šæ€§å·®ã€æ‰©å±•ä¸è¶³ç­‰é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†æ ¸å¿ƒæ¢è®¨â€œå¤§æ™“æœºå™¨äººâ€ä¸ç«å±±å¼•æ“ï¼Œèšç„¦åƒä¸‡å°æ—¶çº§çš„è§†é¢‘æ•°æ®å¤„ç†åœºæ™¯ï¼Œå¦‚ä½•é€šè¿‡å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆä¸­çš„LAS AIæ•°æ®æ¹–äº§å“ï¼Œè·‘é€šæœ€ä½³å®è·µå…¨é“¾è·¯ï¼Œå®ç°å¼€å‘æŠ•å…¥ä¾§å’Œèµ„æºåˆ©ç”¨ä¾§çš„åŒé‡ææ•ˆã€‚</p>
<h2 data-id="heading-1">èƒŒæ™¯</h2>
<p>å›¾ç‰‡éšç€å…·èº«æ™ºèƒ½çš„è¿›ä¸€æ­¥å‘å±•ï¼Œè§†é¢‘æ•°æ®æ­£åœ¨è¿›å…¥â€œåƒä¸‡å°æ—¶â€æ—¶ä»£ï¼Œè€Œæ•°æ®å¤„ç†è§„æ¨¡çš„å˜å¤§å¸¦æ¥æ˜¯å¤„ç†æ¡†æ¶çš„å‡çº§ã€‚</p>
<p>ä»¥å…·èº«æ™ºèƒ½æœºå™¨ç‹—çš„å·¥ä¸šå·¡æ£€åœºæ™¯ä¸ºä¾‹ï¼Œä¸€å°æœºå™¨ç‹—é€šå¸¸æ­è½½å¤šè·¯å…¨æ™¯æ‘„åƒå¤´ä¸æ·±åº¦ç›¸æœºï¼Œåœ¨æŒç»­æ‰§è¡Œå·¡æ£€ä»»åŠ¡æ—¶ï¼Œå•å¤©äº§ç”Ÿçš„è§†é¢‘æ•°æ®é‡å³å¯è¾¾åˆ°æ•°ç™¾GBã€‚åœ¨è§„æ¨¡åŒ–éƒ¨ç½²æœºå™¨ç‹—é›†ç¾¤çš„èƒŒæ™¯ä¸‹ï¼Œæ¯æœˆç§¯ç´¯çš„è§†é¢‘æ•°æ®ç”šè‡³èƒ½çªç ´åƒä¸‡å°æ—¶ã€‚</p>
<p>é¢å¯¹å¦‚æ­¤æµ·é‡çš„æ•°æ®ï¼Œä¼ ç»Ÿå•æœºã€è„šæœ¬å¼çš„å¤„ç†æµç¨‹å·²ç»éš¾ä»¥ä¸ºç»§ï¼Œåƒä¸‡å°æ—¶è§†é¢‘ä¸æ˜¯â€œå¤šåŠ å‡ å°æœºå™¨â€å°±èƒ½å¤„ç†å¥½çš„é—®é¢˜ã€‚</p>
<p>é‚£å¦‚ä½•åœ¨ä¿è¯ç¨³å®šæ€§ã€å¯æ‰©å±•æ€§çš„å‰æä¸‹ï¼Œé«˜æ•ˆå¤„ç†åƒä¸‡å°æ—¶çš„è§†é¢‘æ•°æ®ï¼Ÿåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ†äº«å¦‚ä½•åˆ©ç”¨Daft@ç«å±±å¼•æ“AIæ•°æ®æ¹–-Las æ­å»ºå¤§è§„æ¨¡çš„åˆ†å¸ƒå¼è§†é¢‘å¤„ç† Pipelineã€‚</p>
<h2 data-id="heading-2">LAS AI æ•°æ®æ¹–</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a13de838537345e8a119016abd802ca4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=oQDuahdIvfJ3GTARMqBrWIfaTnw%3D" alt="" loading="lazy"/></p>
<p>LAS AI æ•°æ®æ¹–äº§å“æ˜¯ç«å±±å¼•æ“ä¸ºä¼ä¸šé€‚åº”AI Agentæ—¶ä»£æ¨å‡ºçš„æ–°ä¸€ä»£å¤šæ¨¡æ€åœºæ™¯è§£å†³æ–¹æ¡ˆï¼Œå­µåŒ–äºå­—èŠ‚è·³åŠ¨å¤§æ¨¡å‹è®­ç»ƒåœºæ™¯ï¼Œé¢å‘å¤šæ¨¡æ€æ•°æ®åœºæ™¯ï¼Œæä¾›æ¹–å­˜å‚¨ã€æ¹–ç®¡ç†ã€æ¹–è®¡ç®—ä¸‰å¤§èƒ½åŠ›ã€é€šè¿‡â€œæ¹–å­˜å‚¨Lance+æ¹–è®¡ç®—Daftâ€ä¸ºæ ¸å¿ƒè¦ç´ ï¼Œé’ˆå¯¹æ€§è§£å†³è§†é¢‘ã€å›¾ç‰‡ç­‰éç»“æ„åŒ–æ•°æ®å¤„ç†çš„ç—›ç‚¹ã€‚</p>
<h2 data-id="heading-3">ä¸šåŠ¡åœºæ™¯</h2>
<p>ä»¥å…¸å‹ã€å…·èº«åœºæ™¯ã€‘çš„è§†é¢‘å¤„ç†é“¾è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b0fe63550a4583823c361532de176c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=xTQI8YXcpjG%2B5qjSyYSuxJz2%2FN4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€æ¡å…¸å‹çš„å¤šé˜¶æ®µè§†é¢‘ ETL å¤„ç†é“¾è·¯ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ä¼´éšç€å¼‚æ„èµ„æºä½¿ç”¨ã€I/O å‹åŠ›ä¸æ•°æ®ä¾èµ–ã€‚</p>
<h2 data-id="heading-4">æ¶æ„å‡çº§</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f6d755010174863829e00222c79bfec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=%2BREZKg%2F0EPO0NVx3eK3lIShrIhg%3D" alt="" loading="lazy"/></p>
<p>å‡çº§å‰åçš„æ”¶ç›Šå¯¹æ¯”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38654ee2964b4516b635c79911cccae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=ei9hhtUYrYhDS%2FpX1EMfYUFU%2BH4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å®ç°ç»†èŠ‚</h2>
<p>å›¾ç‰‡åœ¨å†å²æ–¹æ¡ˆä¸­ï¼Œå•æœºå¤šè„šæœ¬é€šè¿‡ä¸­é—´æ–‡ä»¶è¡”æ¥çš„æ–¹å¼ï¼Œç“¶é¢ˆæ˜æ˜¾ï¼š</p>
<p>é“¾è·¯åˆ†æ•£ï¼šåˆ†é•œã€è§†é¢‘è§£ç &amp;æŠ½å¸§ã€è¿‡æ»¤ã€captionç”Ÿäº§ç­‰æ­¥éª¤å¾€å¾€ç”±ä¸åŒè„šæœ¬å®ç°ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</p>
<p>I/O è´Ÿè½½æ²‰é‡ï¼šæ¯ä¸ªæ­¥éª¤éƒ½å¯èƒ½äº§ç”Ÿå¤§é‡ä¸­é—´æ–‡ä»¶ï¼ˆä¸´æ—¶è§†é¢‘ã€å¸§å›¾åƒã€æ—¥å¿—ç­‰ï¼‰ï¼Œç£ç›˜ä¸ç½‘ç»œç»å¸¸æˆä¸ºç“¶é¢ˆ</p>
<p>èµ„æºåˆ©ç”¨ç‡å·®ï¼šè„šæœ¬é€šå¸¸æ˜¯å•è§†é¢‘ä¸²è¡Œå¤„ç†ï¼Œå¾ˆéš¾å……åˆ†åˆ©ç”¨å¤šæ ¸æˆ–å¤šæœºèµ„æºï¼Œæ›´æ— æ³•çµæ´»æŒ‰éœ€åˆ†é…èµ„æº</p>
<p>ç¨³å®šæ€§å·®ï¼šæ­¥éª¤ä¹‹é—´ç¼ºä¹æ˜ç¡®çš„ä¾èµ–ç®¡ç†æœºåˆ¶ï¼Œä¸€æ—¦æŸä¸€ç¯å‡ºç°å¼‚å¸¸ï¼Œæ•´ä¸ª Pipeline å¯èƒ½æ— æ³•æ¢å¤</p>
<p>éš¾ä»¥æ‰©å±•ï¼šå½“æ•°æ®è§„æ¨¡ä»â€œå‡ ç™¾å°æ—¶â€çªç„¶å¢é•¿åˆ°â€œå‡ ä¸‡ã€å‡ åä¸‡å°æ—¶â€æ—¶ï¼Œé“¾è·¯é€šå¸¸è¦è¢«â€œæ¨å€’é‡æ¥â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01e76700163a4d0e8702b22f44ee8412~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=puL3ERdA4u3Vdcy%2FJN7v7ORQrRk%3D" alt="" loading="lazy"/></p>
<p>è€Œæˆ‘ä»¬åŸºäºLAS AIæ•°æ®æ¹–äº§å“ä¸­å†…ç½®çš„è®¡ç®—æ¡†æ¶Daftï¼Œå°†æ•´ä¸ªæµç¨‹ç»Ÿä¸€æŠ½è±¡ä¸ºä¸€æ¡ DataFrame è®¡ç®—é“¾è·¯ï¼Œé…åˆ Ray ç­‰æ‰§è¡Œåç«¯å®ç° æ‰¹é‡å¹¶è¡Œã€èµ„æºå……åˆ†åˆ©ç”¨çš„æ‰§è¡Œæ–¹å¼ï¼Œæ—¢ä¿ç•™äº† Python å†™æ³•çš„çµæ´»æ€§ï¼Œåˆå…¼é¡¾äº†å·¥ç¨‹ä¸Šçš„å¯æ‰©å±•æ€§ã€‚</p>
<ul>
<li>ä»TOSè¯»å–åƒä¸‡å°æ—¶çš„è§†é¢‘æ•°æ®</li>
<li>ä½¿ç”¨PySceneDetectåšåœºæ™¯æ£€æµ‹ï¼Œå†ä½¿ç”¨FFmpegåšè§†é¢‘åˆ†å‰²ï¼Œå¾—åˆ°åˆ†é•œåè§†é¢‘ç‰‡æ®µ</li>
<li>å¯¹æ¯ä¸ªè§†é¢‘ç‰‡æ®µåšè§£ç å’ŒæŠ½å¸§ï¼Œå¾—åˆ°å¯ä»¥ç›´æ¥è¾“å…¥æ¨¡å‹çš„clipæ•°æ®</li>
<li>è°ƒç”¨æ¨¡å‹å¯¹è§†é¢‘åšæ¨¡ç³Šåº¦ã€ç¾å­¦ç­‰æ‰“åˆ†ï¼Œè¿‡æ»¤ä¸ç¬¦åˆæ¡ä»¶çš„è§†é¢‘</li>
<li>å¯¹è¿‡æ»¤åçš„è§†é¢‘ï¼Œè°ƒç”¨VLMç”ŸæˆCaption</li>
</ul>
<h2 data-id="heading-6">å‡†å¤‡å·¥ä½œ</h2>
<p>å®‰è£…ä¾èµ–åŒ…</p>
<pre><code class="hljs language-arduino" lang="arduino">pip install <span class="hljs-string">"daft[ray]"</span> scenedetect torch torchvision ray PIL transformers vllm qwen_vl_utils
</code></pre>
<h2 data-id="heading-7">æ­¥éª¤1ï¼šè§†é¢‘åˆ†é•œ</h2>
<h3 data-id="heading-8">åœºæ™¯æ£€æµ‹</h3>
<p>åœ¨å…·èº«æ™ºèƒ½æœºå™¨ç‹—çš„å·¥ä¸šå·¡æ£€åœºæ™¯ä¸­ï¼ŒåŸå§‹è§†é¢‘é€šå¸¸æ˜¯é•¿æ—¶é—´è¿ç»­å½•åˆ¶çš„ï¼Œå…¶ä¸­åŒ…å«å¤§é‡è¯­ä¹‰ä¸åŒçš„ç‰‡æ®µï¼šä¾‹å¦‚æ£€æŸ¥ç®¡é“é˜€é—¨çŠ¶æ€ã€ç»è¿‡è½¦é—´èµ°å»Šã€ä¸Šä¸‹æ¥¼æ¢¯ã€è¯†åˆ«è®¾å¤‡æŒ‡ç¤ºç¯å¼‚å¸¸ã€é‡åˆ°åœ°é¢éšœç¢ç‰©ï¼ˆå¦‚å·¥å…·ç®±ï¼‰ã€é€šè¿‡ç‹­çª„é€šé“ç­‰ã€‚</p>
<p>ä¸ºäº†è®©åç»­çš„æŠ½å¸§ã€æ»¤æ³¢ã€Caption ç­‰å¤„ç†æ›´åŠ å‡†ç¡®å’Œé«˜æ•ˆï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹è§†é¢‘è¿›è¡Œ åœºæ™¯æ£€æµ‹ï¼ˆShot Detectionï¼‰ï¼Œå°†é•¿è§†é¢‘åˆ’åˆ†æˆè‹¥å¹²è¯­ä¹‰ç›¸å¯¹å®Œæ•´çš„åˆ†é•œç‰‡æ®µã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ PySceneDetect å¯¹è§†é¢‘å†…å®¹å˜åŒ–è¿›è¡Œæ£€æµ‹ï¼Œå®ƒé€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥åˆ¤æ–­åœºæ™¯åˆ‡æ¢çš„ä½ç½®ï¼š</p>
<p>äº®åº¦ç›´æ–¹å›¾å˜æ¢</p>
<p>é€å¸§å†…å®¹å·®å¼‚ï¼ˆContent Differenceï¼‰</p>
<p>é˜ˆå€¼è·³å˜ï¼ˆThreshold Detectorï¼‰</p>
<p>é€šè¿‡è¯†åˆ«è¿™äº›è¾¹ç•Œï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†åŸå§‹è§†é¢‘ç²¾å‡†åˆ‡å‰²æˆå¤šä¸ªåˆ†é•œï¼ˆSceneï¼‰ã€‚æ¯ä¸ªåˆ†é•œéƒ½æ›´çŸ­ã€æ›´ç‹¬ç«‹ï¼Œä¹Ÿæ›´é€‚åˆä½œä¸ºåç»­æ¨¡å‹çš„è¾“å…¥å•å…ƒã€‚</p>
<pre><code class="hljs language-scss" lang="scss">def <span class="hljs-built_in">detect_scenes</span>(self, video_path):
    # æ£€æµ‹åœºæ™¯
    video = <span class="hljs-built_in">open_video</span>(video_path)
    scene_manager.<span class="hljs-built_in">detect_scenes</span>(video)
    scenes = []
    for start, end in scene_manager.<span class="hljs-built_in">get_scene_list</span>():
        scenes.<span class="hljs-built_in">append</span>((start.<span class="hljs-built_in">get_seconds</span>(), end.<span class="hljs-built_in">get_seconds</span>())
    return scenes
</code></pre>
<h3 data-id="heading-9">è¿‡æ»¤è¿‡çŸ­ç‰‡æ®µ</h3>
<p>åœ¨å®Œæˆåœºæ™¯æ£€æµ‹åï¼Œæˆ‘ä»¬ä¼šå¯¹æ£€æµ‹åˆ°çš„åˆ†é•œè¿›è¡Œä¸€æ¬¡è´¨é‡è¿‡æ»¤ï¼Œä¸¢å¼ƒæ—¶é•¿ä¸è¶³ 4 ç§’çš„ç‰‡æ®µã€‚ ä¹‹æ‰€ä»¥è¿›è¡Œè¿™ä¸€æ­¥ï¼Œæ˜¯å› ä¸ºè¿‡çŸ­çš„åœºæ™¯å¾€å¾€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å†…å®¹ä¸ç¨³å®šï¼šå¯èƒ½æ˜¯ç¬æ—¶æ›å…‰å˜åŒ–ã€æŠ–åŠ¨ã€çŸ­æš‚é®æŒ¡å¯¼è‡´çš„è¯¯æ£€</li>
<li>è¯­ä¹‰ä¸å®Œæ•´ï¼šä¸è¶³ä»¥å½¢æˆä¸€ä¸ªå¯ç†è§£çš„è§†é¢‘è¯­ä¹‰å•å…ƒ</li>
<li>æ¨¡å‹è¾“å…¥è´¨é‡å·®ï¼šæŠ½å¸§æ•°é‡ä¸è¶³ä¼šå½±å“æ¨¡ç³Šåº¦åˆ¤å®šã€ç¾å­¦è¯„ä¼°ã€Caption æ•ˆæœ</li>
<li>ä¼šé™ä½ Pipeline ååï¼šå¤§é‡çŸ­åœºæ™¯ä¼šå¯¼è‡´é¢‘ç¹çš„è§£ç ä¸ FFmpeg è°ƒç”¨ï¼Œåè€Œå¢åŠ  overhead</li>
</ul>
<p>å› æ­¤ï¼ŒåŸºäºç»éªŒä¸å®éªŒï¼Œæˆ‘ä»¬é€‰æ‹©å°† æ—¶é•¿å°äº 4 ç§’çš„åœºæ™¯è¿‡æ»¤æ‰ï¼Œåªä¿ç•™å…·æœ‰å®Œæ•´è¯­ä¹‰ä¸è¶³å¤Ÿå¸§æ•°çš„æœ‰æ•ˆç‰‡æ®µï¼Œä½¿åç»­å¤„ç†æ›´åŠ ç¨³å®šã€å¯æ§ï¼Œä¹Ÿèƒ½æ˜¾è‘—æå‡æ¨¡å‹æ¨ç†è´¨é‡ã€‚</p>
<h3 data-id="heading-10">åœºæ™¯åˆ‡åˆ†</h3>
<p>åœ¨å®Œæˆ PySceneDetect çš„åœºæ™¯æ£€æµ‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ¯ä¸ªåˆ†é•œçš„èµ·æ­¢æ—¶é—´ï¼ˆtimecodeï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦æ ¹æ®è¿™äº›æ—¶é—´æ®µå°†åŸå§‹è§†é¢‘æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„ clipã€‚</p>
<p>è¿™ä¸€æ­¥æˆ‘ä»¬ä½¿ç”¨ FFmpeg è¿›è¡Œåˆ‡åˆ†ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ï¼š</p>
<ul>
<li>åˆ‡åˆ†ç²¾å‡†ï¼šå¯æŒ‰ç²¾ç¡®æ—¶é—´æˆ³ï¼ˆ-ss / -toï¼‰æˆªå–ç‰‡æ®µ</li>
<li>æ— æŸå¤„ç†ï¼šé€šè¿‡ -c:v copy ç›´æ¥æ‹·è´è§†é¢‘æµï¼Œæ— éœ€é‡æ–°ç¼–ç </li>
<li>é€Ÿåº¦æå¿«ï¼šI/O é€Ÿåº¦è¿œå¤§äºç¼–ç é€Ÿåº¦ï¼Œå‡ ä¹å¯ä»¥çº¿æ€§æ‰©å±•åˆ°å¤šè¿›ç¨‹</li>
<li>ç¨³å®šå¯é ï¼šFFmpeg å¯¹å„ç§ç¼–ç æ ¼å¼ï¼ˆH264/H265/MPEG4ï¼‰å…¼å®¹æ€§æœ€å¥½</li>
</ul>
<p>åˆ‡åˆ†åçš„æ¯ä¸ª clip éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è§†é¢‘æ–‡ä»¶ï¼Œå…·æœ‰æ¸…æ™°çš„è¯­ä¹‰è¾¹ç•Œï¼Œä¹Ÿæˆä¸ºåç»­â€œè§£ç æŠ½å¸§ â†’ è´¨é‡è¿‡æ»¤ â†’ Captionâ€çš„åŸºç¡€è¾“å…¥å•å…ƒã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_split_and_save_scene</span>(<span class="hljs-params">self, scene, video_path, output_dir</span>):
    cmd = [
        <span class="hljs-string">"ffmpeg"</span>,
        <span class="hljs-string">"-loglevel"</span>, <span class="hljs-string">"error"</span>,
        <span class="hljs-string">"-ss"</span>, <span class="hljs-built_in">str</span>(start_sec),
        <span class="hljs-string">"-to"</span>, <span class="hljs-built_in">str</span>(end_sec),
        <span class="hljs-string">"-i"</span>, video_path,
        <span class="hljs-string">"-c"</span>, <span class="hljs-string">"copy"</span>,
        clip_path
    ]
    
    <span class="hljs-keyword">return</span> clip_path
</code></pre>
<h3 data-id="heading-11">Daft Explode å¢å¤§å¹¶å‘ç²’åº¦</h3>
<p>ä¸€ä¸ªé•¿è§†é¢‘åœ¨ç»è¿‡åœºæ™¯æ£€æµ‹åå¾€å¾€ä¼šè¢«åˆ‡åˆ†æˆå¤šä¸ªåœºæ™¯ç‰‡æ®µã€‚ä¸ºæå‡æ•´ä½“ååä¸èµ„æºåˆ©ç”¨ç‡ï¼Œæˆ‘ä»¬å°†â€œåœºæ™¯æ£€æµ‹â€å’Œâ€œè§†é¢‘åˆ‡åˆ†â€æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ UDFã€‚</p>
<p>åœ¨åœºæ™¯æ£€æµ‹é˜¶æ®µï¼Œæˆ‘ä»¬å°†åŸå§‹çš„è§†é¢‘çº§æ•°æ®å±•å¼€ä¸ºåœºæ™¯ç‰‡æ®µçº§çš„æ•°æ®ï¼Œä½¿æ¯ä¸ªåœºæ™¯ç‰‡æ®µéƒ½æˆä¸ºç‹¬ç«‹çš„æ•°æ®è¡Œã€‚éšåï¼Œå€ŸåŠ© Daft çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å’Œå¹¶å‘æ‰§è¡Œèƒ½åŠ›ï¼Œå®ç°å¤§è§„æ¨¡çš„å¹¶è¡Œè§†é¢‘åˆ‡åˆ†æ“ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b782d950721c42ee9f2cd10c0098567f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=I0SKmHDS9qIfAbAyHkebNEbISoA%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2223947b6e944e19a6480978a3740c5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=Lisns0lFpbbwUFJx7%2BAi54xtTnw%3D" alt="" loading="lazy"/></p>
<p>å›¾ç‰‡è¿™ç§è®¾è®¡èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„å¹¶è¡Œèƒ½åŠ›ï¼Œæ˜¾è‘—æå‡é•¿è§†é¢‘å¤„ç†æ•ˆç‡ï¼ŒåŒæ—¶é¿å…å› ä¸ªåˆ«è¶…é•¿è§†é¢‘å¯¼è‡´çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä»è€Œç¡®ä¿æ•´ä½“ä½œä¸šåœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šä¹Ÿèƒ½ä¿æŒç¨³å®šçš„å¤„ç†æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.float64(<span class="hljs-params"/>)</span>)</span>)</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SceneDetectionUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init</span>(<span class="hljs-params">self, min_duration=<span class="hljs-number">4</span></span>):
        self.min_duration = min_duration

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, video_path_series</span>):
        results = []
        video_paths = video_path_series.to_pylist()
        <span class="hljs-keyword">for</span> video_path <span class="hljs-keyword">in</span> video_paths:
            scenes = self.detect_scenes(video_path)
            scenes = self.filter_scenes(scenes, self.min_duration)
            results.append(scenes)
        <span class="hljs-keyword">return</span> results
</code></pre>

<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.string(<span class="hljs-params"/>)</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoSplitUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, output_dir: <span class="hljs-built_in">str</span></span>):
        self.output_dir = output_dir
        os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, video_path_series, scene_series</span>):
        results = []
        <span class="hljs-keyword">for</span> video_path, scene <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(video_path_series.to_pylist(), scene_series.to_pylist()):
            <span class="hljs-comment"># é•œå¤´åˆ‡åˆ†</span>
            clip_path = self._split_and_save_scene(video_path, scene, self.output_dir)
            results.append(clip_path)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-12">æ­¥éª¤2:è§†é¢‘æ»¤æ³¢</h2>
<p>åœ¨å®Œæˆè§†é¢‘åˆ†é•œä¹‹åï¼Œæˆ‘ä»¬å·²ç»å°†é•¿æ—¶é—´è¿ç»­å½•åˆ¶çš„è§†é¢‘æ‹†åˆ†ä¸ºç»“æ„æ›´æ¸…æ™°ã€è¯­ä¹‰æ›´åŠ ç‹¬ç«‹çš„ clipã€‚ç„¶è€Œï¼Œå…·èº«åœºæ™¯ä¸­æµ·é‡çš„åŸå§‹è§†é¢‘ä»ç„¶å­˜åœ¨å¤§é‡æ— æ•ˆæˆ–è´¨é‡è¾ƒå·®çš„ç‰‡æ®µï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ¨¡ç³ŠæŠ–åŠ¨å¯¼è‡´çš„ä¸å¯ç”¨ç”»é¢</li>
<li>å¼ºå…‰/é€†å…‰é€ æˆçš„è¿‡æ›ã€æ¬ æ›</li>
<li>æ— ä¸»ä½“çš„ç©ºæ™¯ï¼ˆç©ºè¡çš„è½¦é—´èµ°å»Šã€æ— äººå€¼å®ˆçš„è®¾å¤‡å¾…æœºåŒºåŸŸã€æœªæ”¾ç½®ä»»ä½•ç‰©å“çš„ç©ºæ—·ä»“åº“é€šé“ï¼‰</li>
<li>ç”»è´¨æä½ã€å™ªç‚¹ä¸¥é‡çš„ç‰‡æ®µ</li>
<li>åœºæ™¯è¿‡æš—æˆ–å®Œå…¨é»‘å±</li>
</ul>
<p>å¦‚æœå°†è¿™äº›ä½è´¨é‡æ•°æ®ç›´æ¥é€å…¥åç»­æ¨¡å‹ï¼ˆä¾‹å¦‚ Captionã€åœºæ™¯ç†è§£æˆ–è®­ç»ƒæ•°æ®é›†ï¼‰ï¼Œä¸ä»…ä¼šæµªè´¹å¤§é‡ GPU èµ„æºï¼Œä¹Ÿä¼šå½±å“æ¨¡å‹è¡¨ç°ã€‚å› æ­¤ï¼Œåœ¨å¤§è§„æ¨¡è§†é¢‘å¤„ç† Pipeline ä¸­ï¼Œâ€œè§†é¢‘æ»¤æ³¢â€æ˜¯ç¡®ä¿æ•°æ®è´¨é‡çš„å…³é”®æ­¥éª¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c87f1f5f4b46e1adf38233b223ac9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=5hCJAYWbJXoDTbp4tm4UaV27lZA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">å›¾ç‰‡è§£ç æŠ½å¸§</h3>
<p>åœ¨å¯¹è§†é¢‘è¾“å…¥æ¨¡å‹è¿›è¡Œæ¨ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†è§†é¢‘å†…å®¹ä»å‹ç¼©ç¼–ç æ ¼å¼è½¬æ¢ä¸ºå¯ä¾›æ¨¡å‹å¤„ç†çš„å›¾ç‰‡å¸§ã€‚ è¿™ä¸€æ­¥ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šè§£ç ï¼ˆDecodeï¼‰å’ŒæŠ½å¸§ï¼ˆSamplingï¼‰ï¼Œæ˜¯æ•´ä¸ªè§†é¢‘å¤„ç†æœ€å…³é”®çš„åŸºç¡€æ“ä½œã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.struct(<span class="hljs-params">{
    <span class="hljs-string">"clip_path"</span>: daft.DataType.string(<span class="hljs-params"/>),
    <span class="hljs-string">"frame_paths"</span>: daft.DataType.<span class="hljs-built_in">list</span>(<span class="hljs-params">daft.DataType.string(<span class="hljs-params"/>)</span>)
}</span>), num_cpus=<span class="hljs-number">10</span>, concurrency=<span class="hljs-number">100</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameSamplerUDF</span>:
    <span class="hljs-string">"""
    å¸§é‡‡æ ·UDF, ä»è§†é¢‘clipä¸­é‡‡æ ·å¸§å¹¶ä¿å­˜
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, max_frames: <span class="hljs-built_in">int</span> = <span class="hljs-number">8</span>, output_dir: <span class="hljs-built_in">str</span> = <span class="hljs-string">"./frames"</span></span>):
        self.max_frames = max_frames
        self.output_dir = output_dir
        os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, clip_path_series</span>):
        results = []
        <span class="hljs-keyword">for</span> clip_path <span class="hljs-keyword">in</span> clip_path_series.to_pylist():
            <span class="hljs-comment"># é‡‡æ ·å¸§</span>
            frame_paths = self._sample_frames(clip_path)
            results.append({<span class="hljs-string">"clip_path"</span>: clip_path,<span class="hljs-string">"frame_paths"</span>: frame_paths})
        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-14">è§†é¢‘æ‰“åˆ†&amp;è¿‡æ»¤</h3>
<p>åœ¨å®Œæˆâ€œè§£ç æŠ½å¸§â€åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° clip çš„ä¸€ç³»åˆ—ä»£è¡¨æ€§å¸§ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦åˆ©ç”¨æ¨¡å‹å¯¹è¿™äº›å¸§è¿›è¡Œè´¨é‡è¯„ä¼°ï¼Œä»¥åˆ¤æ–­è¯¥è§†é¢‘ç‰‡æ®µæ˜¯å¦å€¼å¾—è¿›å…¥åç»­é«˜æˆæœ¬çš„ Caption æˆ–è®­ç»ƒæ•°æ®æ„å»ºé˜¶æ®µã€‚</p>
<p>è¿™ä¸€ç¯èŠ‚å°±æ˜¯ è§†é¢‘æ»¤æ³¢çš„æ ¸å¿ƒ â€”â€” åŸºäºæ¨¡å‹çš„è´¨é‡è¯„åˆ†ï¼ˆScoringï¼‰ä¸è¿‡æ»¤ï¼ˆFilteringï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.struct(<span class="hljs-params">{<span class="hljs-string">"clip_path"</span>: daft.DataType.string(<span class="hljs-params"/>), <span class="hljs-string">"passed"</span>: daft.DataType.<span class="hljs-built_in">bool</span>(<span class="hljs-params"/>), <span class="hljs-string">"scores"</span>: daft.DataType.python(<span class="hljs-params"/>)}</span>), num_gpus=<span class="hljs-number">0.2</span>, num_cpus=<span class="hljs-number">10</span>, concurrency=<span class="hljs-number">200</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FrameFilterUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, target_size: <span class="hljs-built_in">tuple</span> = (<span class="hljs-params"><span class="hljs-number">320</span>, <span class="hljs-number">320</span></span>), threshold: <span class="hljs-built_in">float</span> = <span class="hljs-number">100.0</span></span>):
        ...
        <span class="hljs-comment"># åŠ è½½æ¨¡å‹</span>
        self.model = self._load_model()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, frames_data_series</span>):
        results = []
        <span class="hljs-keyword">for</span> frames_data <span class="hljs-keyword">in</span> frames_data_series.to_pylist():
            result = self._score_predict(frame_data)
            results.append(result)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-15">æ­¥éª¤3ï¼šè§†é¢‘ç†è§£&amp;Caption</h2>
<p>å›¾ç‰‡åœ¨ç»å†ã€Œåˆ†é•œ â†’ è§£ç æŠ½å¸§ â†’ è´¨é‡è¿‡æ»¤ã€ä¹‹åï¼Œæˆ‘ä»¬æœ€ç»ˆä¿ç•™ä¸‹æ¥çš„ clip éƒ½æ˜¯ è¯­ä¹‰ç¨³å®šã€ç”»è´¨åˆæ ¼ã€å¯è¯»æ€§å¼ºçš„é«˜è´¨é‡è§†é¢‘ç‰‡æ®µã€‚è¿™äº›ç‰‡æ®µå°†è¿›å…¥æ•´ä¸ª Pipeline çš„ç¬¬ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼šè§†é¢‘ç†è§£ä¸ Caption ç”Ÿæˆã€‚</p>
<p>Caption ç”Ÿæˆçš„ç›®æ ‡ï¼Œæ˜¯è®©æ¨¡å‹èƒ½å¤Ÿè‡ªåŠ¨ä¸ºæ¯ä¸ªè§†é¢‘ç‰‡æ®µç”Ÿæˆä¸€æ®µè‡ªç„¶è¯­è¨€æè¿°ï¼Œä½¿è§†é¢‘ä»â€œæœªç»“æ„åŒ–è§†è§‰æ•°æ®â€å˜æˆâ€œå¯æ£€ç´¢ã€å¯ç´¢å¼•ã€å¯è®­ç»ƒçš„è¯­ä¹‰æ•°æ®â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd6c45bcf95942e68a85a70b1d609d1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=eXRqQedeD%2BcRhXgw9RL%2F9g42h%2B0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">Captionå¼ºåŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> daft

<span class="hljs-meta">@daft.udf(<span class="hljs-params">return_dtype=daft.DataType.string(<span class="hljs-params"/>), num_gpus=<span class="hljs-number">1</span>, num_cpus=<span class="hljs-number">20</span>, concurrency=<span class="hljs-number">800</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoCaptionUDF</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model_path</span>):
        self.model = self._load_caption_model(model_path)
        self.prompt = <span class="hljs-string">"""åŸºäºä¸Šè¿°ç†è§£ï¼Œç”¨ä¸€æ®µç®€æ´è‡ªç„¶çš„è¯­è¨€æè¿°å½“å‰è§†é¢‘åœºæ™¯ã€‚ä¸è¦åŠ å…¥æ— æ³•ä»è§†é¢‘åˆ¤æ–­çš„å†…å®¹ã€‚è¯·å…ˆç†è§£è§†é¢‘ç‰‡æ®µçš„å…·èº«æ™ºèƒ½å·¡æ£€åœºæ™¯ï¼Œå†ç”Ÿæˆä¸€æ®µå®¢è§‚å‡†ç¡®çš„è¯´æ˜ã€‚åˆ†æå†…å®¹åŒ…æ‹¬ï¼š
  - ç¯å¢ƒç±»å‹ä¸ç»“æ„ï¼ˆå¦‚è½¦é—´/ä»“åº“/ç®¡é“åŒºã€ç©ºé—´ç»“æ„æ˜¯å¦ä¸ºç‹­çª„é€šé“/æ¥¼æ¢¯ã€è®¾æ–½å¸ƒå±€ï¼‰
  - å‘¨å›´å¯¹è±¡ï¼ˆè®¾å¤‡ã€éšœç¢ç‰©ã€ç¯å¢ƒå…ƒç´ ï¼‰çš„ç›¸å¯¹ä½ç½®å’ŒçŠ¶æ€ï¼ˆå¦‚é˜€é—¨å¼€å…³çŠ¶æ€ã€æŒ‡ç¤ºç¯é¢œè‰²ã€åœ°é¢æ‚ç‰©ä½ç½®ï¼‰
  - å…³é”®æ ‡è¯†ä¸å¼‚å¸¸ï¼ˆå¦‚è®¾å¤‡çŠ¶æ€æ ‡è¯†ã€å®‰å…¨è­¦ç¤ºæ ‡è¯†ã€è®¾æ–½å¼‚å¸¸æƒ…å†µï¼‰
  - ç¯å¢ƒæ¡ä»¶ï¼ˆå…‰ç…§ã€åœ°é¢çŠ¶å†µã€ç©ºé—´çº¦æŸï¼‰
  - é‡è¦åŠ¨æ€å˜åŒ–æˆ–æ½œåœ¨é£é™©ï¼ˆå¦‚è®¾å¤‡çŠ¶æ€å˜åŒ–ã€æ–°å‡ºç°çš„éšœç¢ç‰©ã€æœºå™¨ç‹—è‡ªèº«å§¿æ€å˜åŒ–ï¼‰
åŸºäºä¸Šè¿°ç†è§£ï¼Œç”¨ä¸€æ®µç®€æ´è‡ªç„¶çš„è¯­è¨€æè¿°å½“å‰è§†é¢‘åœºæ™¯ã€‚ä¸è¦åŠ å…¥æ— æ³•ä»è§†é¢‘åˆ¤æ–­çš„å†…å®¹ã€‚"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, frames_data_series</span>):
        frames_data_list = frames_data_series.to_pylist()

        <span class="hljs-keyword">for</span> frame_data <span class="hljs-keyword">in</span> frames_data_list:
            <span class="hljs-comment"># ç”Ÿæˆæè¿°</span>
            caption = self._generate_caption(frame_data)
            results.append(caption)
        <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-17">æ­¥éª¤4ï¼šDaftçš„Pipelineæµå¼è°ƒåº¦</h2>
<p>å›¾ç‰‡åœ¨å‰é¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼ˆåˆ†é•œã€æ»¤æ³¢ã€Captionï¼‰ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ‹†è§£äº†åƒä¸‡å°æ—¶è§†é¢‘å¤„ç†çš„ä¸‰ä¸ªå…³é”®èƒ½åŠ›ã€‚ä½†çœŸæ­£è®©æ•´ä¸ªç³»ç»Ÿå…·å¤‡â€œå·¥ç¨‹è½åœ°èƒ½åŠ›â€çš„ï¼Œæ˜¯æœ€åä¸€æ­¥ â€”â€” é€šè¿‡ Daft on Ray å°†æ‰€æœ‰æ­¥éª¤ä¸²è”æˆä¸€æ¡é«˜ååã€å¯æ‰©å±•çš„æµå¼å¤„ç† Pipelineã€‚</p>
<ul>
<li>åˆå§‹åŒ–Ray Cluster</li>
<li>é…ç½® Daft ä½¿ç”¨ Ray ä½œä¸ºæ‰§è¡Œå¼•æ“</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">import daft

def main():
    """å®Œæ•´è§†é¢‘å¤„ç†Pipeline"""  
    daft.context.set_runner_ray()
    
    <span class="hljs-comment"># ä»TOSæ‰«æ.mp4è§†é¢‘æ–‡ä»¶</span>
    <span class="hljs-attr">io_config</span> = IOConfig(s3=S3Config(...))
    <span class="hljs-attr">s3_path</span> = <span class="hljs-string">"s3://bucket/test_path/**/*.mp4"</span>
    <span class="hljs-attr">output_s3_path</span> = <span class="hljs-string">"s3://bucket/output/parquet/"</span>
    <span class="hljs-attr">df</span> = daft.from_glob_path(s3_path, io_config=io_config).select(<span class="hljs-string">'path'</span>).with_column_renamed(<span class="hljs-string">'path'</span>, <span class="hljs-string">'video_path'</span>)
    <span class="hljs-comment"># æ­¥éª¤1: åœºæ™¯æ£€æµ‹</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"scene_list"</span>, scene_detect_udf(col(<span class="hljs-string">"video_path"</span>)))
    <span class="hljs-comment"># å°†æ•°æ®ä»è§†é¢‘ç»´åº¦å±•å¼€åˆ°é•œå¤´ç»´åº¦</span>
    <span class="hljs-attr">df</span> = df.explode(col(<span class="hljs-string">"scene_list"</span>))
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"clip_path"</span>, video_split_udf(col(<span class="hljs-string">"video_path"</span>), col(<span class="hljs-string">"scene_list"</span>))) <span class="hljs-comment"># æ­¥éª¤2ï¼šè§†é¢‘åˆ‡åˆ†</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"frames"</span>, frame_sampler_udf(col(<span class="hljs-string">"clip_path"</span>))) <span class="hljs-comment"># æ­¥éª¤3: å¸§é‡‡æ ·</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"filtered"</span>, frame_filter_udf(col(<span class="hljs-string">"frames"</span>))) <span class="hljs-comment"># æ­¥éª¤4: è§†é¢‘æ»¤æ³¢</span>
    <span class="hljs-attr">df</span> = df.with_column(<span class="hljs-string">"caption"</span>, caption_udf(col(<span class="hljs-string">'frames'</span>))) <span class="hljs-comment"># æ­¥éª¤5: è§†é¢‘æè¿°ç”Ÿæˆ</span>
    <span class="hljs-comment"># ç»“æœä¿å­˜åˆ°parquetï¼Œä¸Šä¼ åˆ°TOS</span>
    df.write_parquet(output_s3_path, <span class="hljs-attr">io_config</span>=io_config)
</code></pre>
<h2 data-id="heading-18">æ­¥éª¤5ï¼šGPUä»»åŠ¡çš„Checkpoint</h2>
<p>å›¾ç‰‡åœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼è§†é¢‘å¤„ç†åœºæ™¯ä¸­ï¼Œå•æ¬¡ Pipeline è¿è¡Œå¾€å¾€æŒç»­æ•°å¤©ç”šè‡³æ•°å‘¨ï¼›é“¾è·¯ä¸­åŒ…å«å¤§é‡ GPU æ¨ç†ã€è§†é¢‘è§£ç ä¸åˆ†å¸ƒå¼å†™å…¥æ“ä½œï¼Œè¿è¡Œæ—¶é—´æœ¬èº«å³å…·æœ‰ é•¿å‘¨æœŸã€é˜¶æ®µæ€§ç´¯ç§¯ çš„ç‰¹ç‚¹ã€‚åŒæ—¶ï¼Œå·¥ç¨‹ä¸­ä¸å¯é¿å…ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>è¿è¡Œæ—¶é—´è¿‡é•¿ï¼Œéœ€è¦äººå·¥â€œæš‚åœ / æ ¡å‡† / è°ƒå‚â€</li>
<li>ä¸­é€”éœ€è¦è¿›è¡Œé›†ç¾¤æ‰©å®¹ / ç¼©å®¹ / å‡çº§</li>
<li>æ¨¡å‹ç‰ˆæœ¬å˜æ›´ï¼Œéœ€è¦ä»æŸä¸ª stage é‡æ–°å¼€å§‹</li>
<li>è°ƒåº¦ç­–ç•¥éœ€è¦åŠ¨æ€è°ƒæ•´ï¼ˆbatch sizeã€å¹¶è¡Œåº¦ã€concurrencyï¼‰</li>
<li>èµ„æºæˆæœ¬è¿‡é«˜ï¼Œéœ€è¦ä¸­æ–­ä»¥åˆ‡æ¢åˆ°ä½å³°æ—¶æ®µè¿è¡Œ</li>
</ul>
<p>å› æ­¤ï¼Œè¯¥ç³»ç»Ÿçš„ Pipeline å¿…é¡»å…·å¤‡ å¯æ§ä¸­æ–­ â†’ å¯æ¢å¤æ‰§è¡Œ çš„èƒ½åŠ›ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åŸºäºParquet append-only è®¾è®¡äº†Checkpoint æœºåˆ¶ï¼Œå¹¶åœ¨æ¯ä¸ªé˜¶æ®µå¯åŠ¨æ—¶é€šè¿‡ Anti Join è‡ªåŠ¨è¿‡æ»¤å·²å®Œæˆä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">def <span class="hljs-title">generate_resume_result_daft</span>(<span class="hljs-params">input_df, processed_df, join_key</span>):
    <span class="hljs-keyword">if</span> processed_df <span class="hljs-keyword">is</span> None:
        <span class="hljs-keyword">return</span> input_df
    
    <span class="hljs-keyword">if</span> join_key <span class="hljs-keyword">is</span> None:
        <span class="hljs-keyword">return</span> input_df
    
    processed_df</span> = processed_df.<span class="hljs-keyword">select</span>(join_key).distinct()
    filtered_df = input_df.<span class="hljs-keyword">join</span>(processed_df, <span class="hljs-keyword">on</span>=join_key, how=<span class="hljs-string">'anti'</span>)
    <span class="hljs-keyword">return</span> filtered_df
</code></pre>
<h2 data-id="heading-19">Daftä¼˜åŒ–å®è·µ</h2>
<h3 data-id="heading-20">å®è·µ1ï¼šCPUä½¿ç”¨è¶…100%çš„æƒ…å†µï¼ŒDaftä¸ºä½•è¿˜èƒ½åŠ é€Ÿ</h3>
<p>å‰æœŸåœ¨ä½¿ç”¨è§†é¢‘åˆ†é•œåœºæ™¯ä¸­CPUåˆ©ç”¨ç‡å·²ç»åˆ°äº†100%ï¼Œä½†æ˜¯é›†æˆäº†Daftä¹‹åç«¯åˆ°ç«¯çš„å¤„ç†ä¾ç„¶æ”¶è·äº†20%çš„æ”¶ç›Šã€‚</p>
<p>è¿™é‡Œä¸»è¦çš„åŸå› æ˜¯ OMP_NUM_THREADS ç¯å¢ƒå˜é‡çš„éš”ç¦»å¸¦æ¥çš„å½±å“</p>
<p>åœ¨å¤„ç†æˆ–è€…æ¨ç†è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°Pytorch æˆ–è€…Numpyçš„åº“ï¼Œå†…ç½®ä¼šç”¨OMP_NUM_THREADSæ¥æ§åˆ¶çº¿ç¨‹æ± çš„å¤§å°ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºæ§åˆ¶è¯¥ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šåˆ©ç”¨èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰çš„coresï¼Œä¼šå¸¦æ¥èµ„æºäº‰æŠ¢ï¼Œå¸¦æ¥çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬æ¯”è¾ƒé«˜</p>
<p>æ‰€ä»¥è¿™é‡Œè®¾ç½®çš„num_cpusçš„ä¸ºä¸€ä¸ªåˆç†å€¼å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦</p>
<p>å¦‚æœ actor å†…éƒ¨ä½¿ç”¨å¤šçº¿ç¨‹åº“ï¼ˆå¦‚ numpyã€PyTorchï¼‰ï¼šé…ç½® num_cpus=30 ä¼šè®©è¿™äº›åº“ä½¿ç”¨æ›´å¤šçº¿ç¨‹ï¼ˆOMP_NUM_THREADS=30ï¼‰ï¼Œå¯èƒ½æé«˜å•ä¸ª actor çš„æ€§èƒ½ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´çº¿ç¨‹ç«äº‰ã€‚</p>
<p>å¦‚æœ actor æ˜¯å•çº¿ç¨‹æˆ– I/O å¯†é›†å‹ï¼šé…ç½® num_cpus=1 æˆ– num_cpus=10 å¯¹å®é™…æ€§èƒ½å½±å“ä¸å¤§ï¼Œä½† num_cpus=1 å¯ä»¥è®©æ›´å¤š actor å¹¶å‘è¿è¡Œï¼Œæé«˜æ•´ä½“ååé‡ã€‚</p>
<h3 data-id="heading-21">å®è·µ2ï¼šè§†é¢‘ç±»å‹å¦‚ä½•èƒ½å¤Ÿåšåˆ°ZeroCopy</h3>
<p>Daftä½¿ç”¨çš„Arrowç±»å‹ä½œä¸ºç®—å­é—´çš„ä¼ é€’å½¢å¼ï¼ŒArrowå¯ä»¥å®ç°ZeroCopyèƒ½åŠ›ï¼Œå‡å°‘æ•°æ®åœ¨ä¸åŒç®—å­ä¹‹é—´çš„ä¼ é€’æˆæœ¬ï¼Œä½†æ˜¯Arrowåªæ˜¯æ”¯æŒå›ºå®šç±»å‹çš„Typeï¼Œå¦‚æœæ˜¯ä¸€ä¸ªPythonçš„å¤æ‚ç±»å‹è¿˜æ˜¯éœ€è¦é¢ä¸´ç€æ‹·è´ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°†è§†é¢‘çš„æ•°æ®å†…å®¹è½¬æ¢ä¸ºäº†Tensorç±»å‹ï¼ŒTensorç±»å‹æ˜¯åŸç”Ÿå¯æ”¯æŒçš„Arrowç±»å‹ï¼ˆå‰ææ˜¯sizeæ¯”è¾ƒå°çš„è§†é¢‘æˆ–è€…å›¾ç‰‡ï¼‰</p>
<p>Noteï¼šè¿™é‡Œæœ‰ä¸ªTradeoffï¼Œå¦‚æœæ˜¯æ¯”è¾ƒå°è§†é¢‘ï¼Œå¦‚æœæƒ³è¾¾æˆåŒä¸€ä¸ªè§†é¢‘ä¼šåŒæ—¶è¢«å¤šä¸ªæ•°æ®æµç®—å­å¤„ç†ï¼Œåˆ™éœ€è¦è¢«æ˜¾ç¤ºçš„æ‹·è´åˆ°ä¸åŒçš„ç®—å­ä¸­ï¼Œå°½é‡å¢å¤§å¤„ç†å¹¶å‘ï¼Œ å¦‚æœæ˜¯å¤§è§†é¢‘ï¼Œåˆ™å°½é‡å°†ç®—å­Fusionï¼Œç„¶åå‡å°‘è§†é¢‘çš„å¤šæ¬¡æ‹·è´</p>
<h3 data-id="heading-22">å®è·µ3ï¼šåœ¨Daftåœºæ™¯ä¸­å¦‚ä½•å¢å¤§åå</h3>
<p>Daftæ‰§è¡Œä¾§åœ¨ç®—å­é—´ä¼ é€’æ•°æ®æ—¶æ”¯æŒæœ‰åºå’Œæ— åºä¸¤ç§</p>
<p>æ— åºæ›´æœ‰åˆ©äºé«˜ååçš„åœºæ™¯ï¼Œä¾‹å¦‚æ•°æ®å¤„ç†åŒæ—¶å†™å›æŸä¸ªæ•°æ®æºä¸­ã€‚</p>
<p>æœ‰åºåˆ™ä¼šå‘ç”Ÿåœ¨showè¿™ç§å°æ•°æ®é‡æ•°æ®æ¢æŸ¥çš„ åœºæ™¯ä»¥åŠæœ¬èº«ç®—å­è¦æ±‚æœ‰åºçš„åœºæ™¯ä¾‹å¦‚ TopNï¼ŒOrderç­‰ç®—å­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9434178ad9a4495d97504f9a6b2715a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=gyqKCQmpogQm4wSv5bvt9oy36C0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-23">å®è·µ4ï¼šè§†é¢‘åˆ†é•œæ­¥éª¤çš„åˆ†å¸ƒå¼åŠ é€Ÿ</h3>
<p>åœ¨åƒä¸‡å°æ—¶è§†é¢‘å¤„ç†ä¸­ï¼Œåˆ†é•œï¼ˆåœºæ™¯åˆ‡åˆ†ï¼‰ æ˜¯éå¸¸å…³é”®çš„å‰ç½®æ­¥éª¤ï¼Œä¼šç›´æ¥å½±å“åç»­è§£ç ã€æŠ½å¸§ã€è¿‡æ»¤ã€Caption çš„å¤„ç†æˆæœ¬ã€‚ä¸€ä¸ªé•¿è§†é¢‘å¾€å¾€æœ‰å¤šä¸ªåœºæ™¯ï¼Œéœ€è¦åˆ‡åˆ†ä¸ºå¤šä¸ªè§†é¢‘ç‰‡æ®µï¼Œå•è¿›ç¨‹ä¸²è¡Œå¤„ç†ä¼šæˆä¸ºæ•´ä¸ª Pipeline çš„ç¬¬ä¸€é“æ€§èƒ½ç“¶é¢ˆã€‚åœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹ï¼Œå¤„ç†é€Ÿåº¦ä¼šè¿…é€Ÿè·Œå…¥ä¸å¯æ¥å—çš„èŒƒå›´ã€‚</p>
<p>ä¸ºæå‡æ•´ä½“ååï¼Œæˆ‘ä»¬å°†åˆ†é•œæµç¨‹æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå¹¶é€šè¿‡ æ•°æ®æ‰“æ•£ï¼ˆDaftçš„explodeå‡½æ•°ï¼‰+ åˆ†å¸ƒå¼å¹¶å‘ å®ç°åŠ é€Ÿï¼š</p>
<p>åœ¨åœºæ™¯æ£€æµ‹é˜¶æ®µï¼Œæˆ‘ä»¬å°†åŸå§‹çš„è§†é¢‘çº§æ•°æ®å±•å¼€ä¸ºåœºæ™¯ç‰‡æ®µçº§çš„æ•°æ®ï¼Œä½¿æ¯ä¸ªåœºæ™¯ç‰‡æ®µéƒ½æˆä¸ºç‹¬ç«‹çš„æ•°æ®è¡Œ</p>
<p>éšåï¼Œå€ŸåŠ© Daft çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å’Œå¹¶å‘æ‰§è¡Œèƒ½åŠ›ï¼Œå®ç°å¤§è§„æ¨¡çš„å¹¶è¡Œè§†é¢‘åˆ‡åˆ†æ“ä½œ</p>
<p>è¿™ç§æ¨¡å¼å°†å¤„ç†ç²’åº¦ä»â€œè§†é¢‘çº§â€æå‡åˆ°â€œåœºæ™¯çº§â€ï¼Œæœ‰æ•ˆæ¶ˆé™¤é•¿è§†é¢‘å¸¦æ¥çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä½¿åˆ‡åˆ†ååé‡éšå¯ç”¨ CPU æ ¸æ•°è¿‘ä¼¼çº¿æ€§å¢é•¿ï¼Œå¤§å¹…æå‡æ•´ä½“è§†é¢‘å¤„ç† Pipeline çš„æ€§èƒ½ä¸ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-24">å®è·µ5ï¼šåŸºäºDaftè§£è€¦è§£ç /æŠ½å¸§ä¸ GPU æ¨ç†ï¼Œæ„å»ºå¼‚æ­¥æµæ°´çº¿æå‡GPUä½¿ç”¨ç‡</h3>
<p>åœ¨å¤§è§„æ¨¡è§†é¢‘å¤„ç†ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„æ€§èƒ½ç“¶é¢ˆæ¥è‡ªäº è§£ç /æŠ½å¸§ä¸ GPU æ¨ç†å¼ºè€¦åˆã€‚</p>
<p>å¦‚æœæŒ‰ç…§ä¼ ç»Ÿæ–¹å¼æ‰§è¡Œï¼š</p>
<ul>
<li>è§£ç ä¸€æ®µè§†é¢‘</li>
<li>æŠ½å¸§</li>
<li>æŠŠå¸§é€å…¥ GPU åšæ¨¡å‹æ¨ç†</li>
<li>å†è¿”å› CPU ç­‰ä¸‹ä¸€æ®µè§£ç </li>
</ul>
<p>è¿™å°†å¯¼è‡´ GPU å¾ˆé•¿æ—¶é—´å¤„äºâ€œç­‰å¾… CPU å‡†å¤‡æ•°æ®â€çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŒç»­æ¨ç†ã€‚ åœ¨åƒä¸‡å°æ—¶è§†é¢‘è§„æ¨¡ä¸‹ï¼Œè¿™ç§ä¸²è¡Œæ–¹å¼ä¼šè®© GPU å®é™…åˆ©ç”¨ç‡è·Œåˆ° 20%â€“40%ï¼Œæå¤§æµªè´¹ç®—åŠ›èµ„æºã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å°†è§£ç /æŠ½å¸§çš„ä»»åŠ¡å•ç‹¬æŠ½æˆä¸€ä¸ªUDFï¼Œä¸ä¸‹æ¸¸çš„æ»¤æ³¢å’ŒCaptionç”Ÿæˆçš„GPUæ¨ç†ä»»åŠ¡è§£è€¦å¼€ï¼Œé€šè¿‡Daftçš„æµå¼è°ƒåº¦èƒ½åŠ›ï¼Œæ¶ˆé™¤äº†ä¸²è¡Œåœºæ™¯ä¸‹ IO/CPUå¤„ç† ä¸ GPUæ¨ç† çš„ç­‰å¾…å…³ç³»ï¼Œä½¿å¾—GPUç®—å­èƒ½å¤Ÿæºæºä¸æ–­çš„è·å–æ•°æ®è¿›è¡Œæ¨ç†ã€‚</p>
<h2 data-id="heading-25">æœ€ç»ˆæ•ˆæœ</h2>
<p>å›¾ç‰‡ç»è¿‡ä»¥ä¸Šä¼˜åŒ–ï¼ŒCPUå’ŒGPUçš„èµ„æºä½¿ç”¨ç‡éƒ½æœ‰æ˜¾è‘—æå‡</p>
<p>CPU åˆ©ç”¨ç‡æ˜¾è‘—æå‡ï¼šç”±åŸå…ˆçš„ 40%~60% æ³¢åŠ¨çŠ¶æ€æå‡è‡³ ç¨³å®šæ»¡è½½ï¼ˆ100%ï¼‰è¿è¡Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ee6f4a2f98241e0b89d8165a1d98a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=Ft3QI8wiaAnG3zoq2aU2snR7GkM%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58a68dae633d4df3be14f3a8093f732f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=3hU0TwbZ2UR4tnqbYJLbPYdruEE%3D" alt="" loading="lazy"/></p>
<p>GPU åˆ©ç”¨ç‡æ˜¾è‘—æå‡ï¼šç”±åŸå…ˆå› ç­‰å¾… I/O è€Œé•¿æœŸå¤„äºä½è´Ÿè½½çŠ¶æ€ï¼Œæå‡è‡³ ç¨³å®š 90%+ çš„é«˜åˆ©ç”¨ç‡åŒºé—´</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1aae8bc9e5f4451ac52833634a90e96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=dn9dp7dBrYKXWgS0K8BJ1PMExgA%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb558c6cc0d44275a81b1822f92108fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2X6IqC6Lez5Yqo5pWw5o2u5bmz5Y-w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766643547&amp;x-signature=jZy7uqQQjxFV3ZLQosFMlJK6ajI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>å›¾ç‰‡å›¾ç‰‡åœ¨æœ¬æ¬¡åˆä½œä¸­ï¼Œâ€œå¤§æ™“æœºå™¨äººâ€ä¾æ‰˜ä¸“ä¸šæŠ€æœ¯æ²‰æ·€ï¼Œä¸“æ³¨äºä¸–ç•Œæ¨¡å‹å·¥å…·é“¾çš„æ„å»ºä¸åº”ç”¨ï¼Œå…¶æŠ€æœ¯èŒƒå›´æ¶µç›–ç‰©ç†AIæ•°æ®é—­ç¯ã€ç”Ÿæˆå¼ä¸–ç•Œå¼•æ“åŠé—­ç¯ä»¿çœŸç­‰ç­‰ï¼›ç«å±±å¼•æ“å¤šæ¨¡æ€æ•°æ®æ¹–è§£å†³æ–¹æ¡ˆåˆ™åŸºäºLAS AIæ•°æ®æ¹–äº§å“ï¼Œå……åˆ†å‘æŒ¥åœ¨å¤šæ¨¡æ€æ•°æ®é¢„å¤„ç†é¢†åŸŸçš„ä¼˜åŠ¿ï¼Œä¸ºâ€œå¤§æ™“æœºå™¨äººâ€çš„æ•´ä¸ªç ”å‘ä½“ç³»æ„å»ºäº†åšå®çš„æŠ€æœ¯åŸºåº§ã€‚</p>
<p>é€šè¿‡â€œäº‘+æ¨¡å‹â€çš„æ·±åº¦ååŒï¼Œâ€œå¤§æ™“æœºå™¨äººâ€æºæ‰‹ç«å±±å¼•æ“å·²ç»è·‘é€šä¼ ç»Ÿè„šæœ¬å¼å¤„ç†åœ¨æ‰©å±•æ€§ã€ç¨³å®šæ€§ã€ååä¸Šçš„æ”»å…‹è·¯å¾„ï¼Œä¸ºä¼ä¸šå’Œè¡Œä¸šå¸¦æ¥é¢å‘æµ·é‡è§†é¢‘æ•°æ®çš„â€œé€šç”¨åŸºç¡€è®¾æ–½â€è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©åŒ…æ‹¬å…·èº«æ™ºèƒ½ã€æ™ºèƒ½é©¾é©¶ç­‰åœ¨å†…çš„å¤šä¸ªæ¶‰åŠè§†é¢‘å¤„ç†çš„æŠ€æœ¯é¢†åŸŸï¼Œå®ç°ç ”å‘å’Œèµ„æºåŒé‡ææ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäºŒï¼‰ï¼šè®¤è¯†MCPä»¥åŠé…ç½®config.toml]]></title>    <link>https://juejin.cn/post/7585019819192270858</link>    <guid>https://juejin.cn/post/7585019819192270858</guid>    <pubDate>2025-12-18T08:48:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585019819192270858" data-draft-id="7584758215701250086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäºŒï¼‰ï¼šè®¤è¯†MCPä»¥åŠé…ç½®config.toml"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-18T08:48:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TimeFine"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123802615"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäºŒï¼‰ï¼šè®¤è¯†MCPä»¥åŠé…ç½®config.toml
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123802615/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TimeFine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T08:48:09.000Z" title="Thu Dec 18 2025 08:48:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    39
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡çš„å‡†å¤‡å·¥ä½œåšå¥½åè¿˜ä¸èƒ½å¼€å§‹å¹²æ´»ï¼Œéœ€è¦åšä¸€äº›é…ç½®å·¥ä½œã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è®¤è¯†MCP</h2>
<p>ä¸‹é¢ä»‹ç»çš„éƒ½æ˜¯ä¼šç”¨åˆ°çš„MCPã€‚è¿™äº›MCPéƒ½æ˜¯é…ç½®åˆ°config.tomlæ–‡ä»¶ï¼Œåé¢ä¼šç»™å‡ºã€‚</p>
<h3 data-id="heading-1">1ã€sequential-thinkingï¼ˆç»“æ„åŒ–æ¨ç†/åˆ†æ­¥æ€è€ƒ MCPï¼‰</h3>
<p><strong>Sequential Thinking MCP</strong> æ˜¯ä¸€ç§ä¸º AI æä¾› <em>é€æ­¥ç»“æ„åŒ–åˆ†æå’Œåˆ†è§£æ€è·¯</em> çš„æœåŠ¡ã€‚å®ƒä¸æ˜¯ç®€å•è¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯å¸®åŠ©æ¨¡å‹ï¼š</p>
<ul>
<li>æŠŠå¤æ‚ä»»åŠ¡åˆ†æˆå¤šä¸ª <em>æ€è€ƒæ­¥éª¤</em>**</li>
<li>æŒ‰é¡ºåºæ¨è¿›ã€æ£€æŸ¥å’Œä¿®æ­£æ¯ä¸€æ­¥çš„è¾“å‡º</li>
<li>æ”¯æŒ <em>æ€ç»´åˆ†æ”¯</em>ï¼ˆexploreâ€¯alternative strategiesï¼‰</li>
<li>æä¾›å¯è§£é‡Šçš„ <em>ä¸­é—´æ€è€ƒçŠ¶æ€</em> å’Œ <strong>åæ€èƒ½åŠ›</strong></li>
</ul>
<p>è¿™ç§ MCP ç‰¹åˆ«é€‚åˆè§£å†³éœ€è¦è§„åˆ’ã€è®¾è®¡ã€ç­–ç•¥æ¨æ•²ç­‰åœºæ™¯ï¼Œæ¯”å¦‚ï¼š</p>
<p>âœ” å¤æ‚éœ€æ±‚æ‹†è§£</p>
<p>âœ” ç³»ç»Ÿè®¾è®¡åˆ†æ</p>
<p>âœ” æœ‰å¤šä¸ªå¯èƒ½æ–¹æ¡ˆä¸”éœ€è¦æ¯”è¾ƒä¼˜åŒ–</p>
<p>âœ” è‡ªæˆ‘ä¿®æ­£å’Œæ·±åº¦æ¢ç´¢çš„ä»»åŠ¡</p>
<p>å®ƒå¼¥è¡¥äº†ä¼ ç»Ÿ LLM ä¸€æ¬¡æ€§è¾“å‡ºçš„å±€é™ï¼Œè®©æ€è€ƒè¿‡ç¨‹æ˜¾å¼åŒ–ï¼Œæœ‰åŠ©äºé™ä½é”™è¯¯æ¦‚ç‡å’Œæé«˜å¯é æ€§ã€‚</p>
<p><strong>è¿™ä¸ªMCPä¸éœ€è¦æ˜¾ç¤ºè°ƒç”¨ã€‚</strong></p>
<p>(ğŸ‘†ğŸ»AIå†™çš„ï¼Œæˆ‘æ€»ç»“çš„æ²¡è¿™ä¹ˆå¥½)</p>
<h3 data-id="heading-2">2ã€context7ï¼ˆå®æ—¶æ–‡æ¡£/ä»£ç ç¤ºä¾‹æ£€ç´¢ MCPï¼‰</h3>
<p>Context7 MCP çš„æ ¸å¿ƒç›®æ ‡æ˜¯è®© AI è·å¾— æœ€æ–°ã€æœ€å‡†ç¡®ã€ä¸åº“ç‰ˆæœ¬åŒ¹é… çš„å®˜æ–¹æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ul>
<li>åœ¨å®é™…ç¼–ç æ—¶åŠ¨æ€æ£€ç´¢å®˜æ–¹æ–‡æ¡£ã€‚</li>
<li>é¿å… LLM å› è®­ç»ƒæ•°æ®æ»åè€Œç”Ÿæˆè¿‡æ—¶/é”™è¯¯çš„ API è°ƒç”¨</li>
<li>å‡å°‘æ‰€è°“çš„ â€œå¹»è§‰ä»£ç â€</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼Œå®ƒç»™å¤§è¯­è¨€æ¨¡å‹è£…ä¸Šäº†ä¸€å‰¯ å®æ—¶æ–‡æ¡£çœ¼é•œï¼Œè®©æ¨¡å‹åœ¨ç”Ÿæˆä»£ç æ—¶èƒ½å¤Ÿï¼š</p>
<ul>
<li>è·å–æœ€æ–°å‘å¸ƒç‰ˆæœ¬çš„åº“æ–‡æ¡£</li>
<li>æŸ¥è¯¢å‡½æ•°ç­¾åå’Œå‚æ•°è¯´æ˜</li>
<li>æ‹¿åˆ°çœŸå®å¯ç”¨ç¤ºä¾‹ä»£ç </li>
</ul>
<p>è¿™å¯¹ AI ç¼–ç¨‹åŠ©æ‰‹éå¸¸é‡è¦ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç”Ÿæˆä»£ç çš„æ­£ç¡®ç‡å’Œå¯è¿è¡Œæ€§ã€‚</p>
<p>(ğŸ‘†ğŸ»AIå†™çš„ï¼Œæˆ‘æ€»ç»“çš„æ²¡è¿™ä¹ˆå¥½)</p>
<p>ä½¿ç”¨æ–¹æ³•å°±æ˜¯åœ¨æç¤ºè¯æœ€ååŠ ä¸Š<code>use context7</code>ã€‚ä¾‹å¦‚ï¼šAWS MQTTçš„è¿æ¥æ–¹å¼ï¼Ÿuse context7</p>
<p>åœ¨ä½¿ç”¨context7çš„æ—¶å€™ï¼Œå¦‚æœgithubä¸Šé¢æœ‰ä¸€äº›ä¸å¤ªå‡ºåçš„é¡¹ç›®ï¼Œä½ å¸Œæœ›context7ä¹Ÿæ”¯æŒå®ƒï¼Œéå¸¸ç®€å•ï¼š</p>
<p>1.å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fcontext7.com%2F" target="_blank" title="https://context7.com/" ref="nofollow noopener noreferrer">Context7 - Up-to-date documentation for LLMs and A...</a>å®˜ç½‘ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç»¿è‰²Add &gt;Docs</p>
<p>2.åœ¨github urlè¾“å…¥æ¡†é‡Œé¢å¡«å…¥githubåœ°å€</p>
<p>3.ç­‰å¾…context7åç«¯è§£æå®Œæ¯•ï¼Œå³å¯åœ¨mcpé‡Œé¢äº«å—é¡¹ç›®çš„æ–‡æ¡£å’Œä½¿ç”¨æ¡ˆä¾‹è¯¦è§£ã€‚</p>
<p><strong>è¿™ä¸ªMCPé™¤äº†æ˜¾ç¤ºè°ƒç”¨ï¼Œæœ€å¥½é…åˆskillï¼ˆä¸‹ä¸€ç¯‡ä¼šè®²åˆ°ï¼‰æ¥ä½¿ç”¨ã€‚</strong></p>
<h3 data-id="heading-3">3ã€serenaï¼ˆè¯­ä¹‰ä»£ç æ£€ç´¢ &amp; ç²¾å‡†ç¼–è¾‘ MCPï¼‰</h3>
<p>Serena MCP æ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´å¼ºã€æ›´åƒ IDE å·¥å…·çš„ MCP æœåŠ¡å™¨ï¼Œå®ç°äº† è¯­ä¹‰çº§ä»£ç æœç´¢ä¸ç¼–è¾‘èƒ½åŠ›ï¼š</p>
<p>å®ƒä¸ä»…ä»…æ˜¯æä¾›æ–‡æ¡£ã€è¿˜èƒ½å¤Ÿï¼š</p>
<ul>
<li>å¯¹ä»£ç è¿›è¡Œ è¯­ä¹‰çº§æ£€ç´¢ï¼ˆä¸æ˜¯ç®€å•å…³é”®è¯æœç´¢ï¼‰</li>
<li>ç†è§£é¡¹ç›®ä¸­ç¬¦å·ã€å‡½æ•°å®šä¹‰ã€å¼•ç”¨å…³ç³»</li>
<li>è¯†åˆ«å˜é‡ã€ç±»å‹å’Œä¾èµ–ç»“æ„</li>
<li>æä¾›ç±»ä¼¼ IDE çš„ ä»£ç å¯¼èˆªã€å¼•ç”¨æŸ¥æ‰¾ã€é‡æ„å»ºè®®</li>
<li>ç»“åˆ LLM æä¾›æ›´ç²¾ç¡®çš„ä»£ç ä¿®æ”¹å’Œè¡¥ä¸ç”Ÿæˆ</li>
</ul>
<p>å®ƒå¯è§†ä¸ºè®©å®¢æˆ·ç«¯ï¼ˆå¦‚ Codex CLIã€Claude Desktopã€Cursor ç­‰ï¼‰å˜å¾—åƒä¸€ä¸ªæœ‰ IDE èƒ½åŠ›çš„ä¼™ä¼´ï¼Œè€Œä¸æ˜¯å•çº¯è¯­è¨€æ¨¡å‹ã€‚Serena çš„ MCP è¾“å‡ºæ›´æ¥è¿‘ ä»£ç ç†è§£ + ç¼–è¾‘ è€Œä¸ä»…æ˜¯æ–‡æœ¬/æ–‡æ¡£æŸ¥è¯¢ã€‚</p>
<p>âš  æ³¨æ„ï¼šSerena éœ€è¦ uvx å·¥å…·ï¼ˆç°ä»£ Python åŒ…ç®¡ç†å™¨ï¼‰æ¥å¯åŠ¨ï¼Œå¹¶ä¸”é…ç½®å’Œä¾èµ–ç›¸å¯¹æ¯”å‰ä¸¤ä¸ªæ›´å¤æ‚ä¸€äº›ã€‚</p>
<p>(ğŸ‘†ğŸ»AIå†™çš„ï¼Œæˆ‘æ€»ç»“çš„æ²¡è¿™ä¹ˆå¥½)</p>
<p>å»ºè®®åœ¨<code>AGENTS.md</code>æ–‡ä»¶çš„æœ€å‰é¢åŠ å…¥ä¸€å¥è¯æ˜¾ç¤ºå¼€å¯Serenaï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">## æ˜¾ç¤ºæ¿€æ´»Serena MCP
- IMPORTANT: If `serena.activate_project` has not been called <span class="hljs-keyword">in</span> the context, then call it once first.
</code></pre>
<p>å¦å¤–å¼€å¯Serenaåï¼Œé¡¹ç›®çš„æ ¹ç›®å½•ä¼šå¤šä¸€ä¸ª<code>.serena</code>çš„æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬å»ºè®®åŠ å…¥gitå¿½ç•¥æ–‡ä»¶ã€‚</p>
<h2 data-id="heading-4">äºŒã€è®¤è¯†config.tomlæ–‡ä»¶</h2>
<p><code>config.toml</code>æ–‡ä»¶å…¶å®å°±æ˜¯Codexçš„é…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€æ–¹å¼(Mac)å°±æ˜¯æœç´¢<code>~/.codex/config.toml</code>æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶æ‰“å¼€å³å¯ã€‚ä¸‹é¢ä»‹ç»ä¸€äº›éœ€è¦æ·»åŠ çš„é…ç½®ï¼š</p>
<h3 data-id="heading-5">1ã€æ‰“å¼€codexè”ç½‘èƒ½åŠ›</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">[features]
# è®©codexæœ‰è”ç½‘æŸ¥è¯¢èƒ½åŠ›
web_search_request = <span class="hljs-literal">true</span>
</code></pre>
<h3 data-id="heading-6">2ã€æ‰“å¼€skillsèƒ½åŠ›</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">[features]
# æ‰“å¼€skillsèƒ½åŠ›
skills = <span class="hljs-literal">true</span>
</code></pre>
<h3 data-id="heading-7">3ã€å…¶ä»–</h3>
<p>å…¶ä»–ä¾‹å¦‚æ²™ç®±æ¨¡å¼ï¼ŒæŒ‡å®šæ¨¡å‹ç­‰ï¼Œå› äººè€Œå¼‚ï¼Œå»ºè®®æœ‰è¿™äº›éœ€æ±‚çš„æ—¶å€™é—®AIå§ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€é…ç½®MCPå’Œconfig.tomlæ–‡ä»¶</h2>
<p>MCPå°±æ˜¯é…ç½®åœ¨config.tomlæ–‡ä»¶ä¸­çš„ï¼Œä¸‹é¢æ˜¯ä¸€ä»½config.tomlæ–‡ä»¶ä¾›å‚è€ƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">model = <span class="hljs-string">"gpt-5.1-codex-max"</span>
model_reasoning_effort = <span class="hljs-string">"high"</span>

# é¡¶å±‚å…¨å±€é»˜è®¤ï¼šåªè¯» + ä»ä¸å‡çº§
sandbox_mode    = <span class="hljs-string">"read-only"</span>
approval_policy = <span class="hljs-string">"never"</span>
trust_level = <span class="hljs-string">"untrusted"</span>


[features]
# è®©codexæœ‰è”ç½‘æŸ¥è¯¢èƒ½åŠ›
web_search_request = <span class="hljs-literal">true</span>
# æ‰“å¼€skillsèƒ½åŠ›
skills = <span class="hljs-literal">true</span>


[projects.<span class="hljs-string">"/Users/river"</span>]


[projects.<span class="hljs-string">"å…·ä½“é¡¹ç›®æ ¹è·¯å¾„ã€‚cd è¿›æ ¹ç›®å½•å¼€å¯codexå°±ä¼šç”Ÿæˆ"</span>]
# å¦‚æœä½ æƒ³è®©è¿™ä¸ªé¡¹ç›®ä¹Ÿç»§æ‰¿åªè¯»ï¼Œå°±ä¸è¦åœ¨è¿™é‡ŒæŠŠ trust_level æ”¹æˆ trustedï¼Œæ”¹æˆtrusted codexå¯ä»¥ä¿®æ”¹ä½ çš„é¡¹ç›®æ–‡ä»¶ï¼Œä¸‹é¢è¢«æ³¨é‡Šæ‰äº†
# trust_level = <span class="hljs-string">"trusted"</span>


# Figma MCP
[mcp_servers.figma_local]
url = <span class="hljs-string">"http://127.0.0.1:3845/mcp"</span>
startup_timeout_sec = <span class="hljs-number">20</span>
tool_timeout_sec = <span class="hljs-number">60</span>

# sequential-thinking MCP
[mcp_servers.sequential-thinking]
command = <span class="hljs-string">"npx"</span>
args = [<span class="hljs-string">"-y"</span>, <span class="hljs-string">"@modelcontextprotocol/server-sequential-thinking"</span>]
startup_timeout_ms = <span class="hljs-number">20000</span>

# context7 MCP
[mcp_servers.context7]
command = <span class="hljs-string">"npx"</span>
args = [<span class="hljs-string">"-y"</span>, <span class="hljs-string">"@upstash/context7-mcp"</span>]
startup_timeout_ms = <span class="hljs-number">20000</span>

# serena MCP
[mcp_servers.serena]
command = <span class="hljs-string">"uvx"</span>
args = [<span class="hljs-string">"--from"</span>, <span class="hljs-string">"git+https://github.com/oraios/serena"</span>,
        <span class="hljs-string">"serena"</span>, <span class="hljs-string">"start-mcp-server"</span>, <span class="hljs-string">"--context"</span>, <span class="hljs-string">"codex"</span>]
startup_timeout_ms = <span class="hljs-number">20000</span>

        
</code></pre>
<p>AIæ€ä¹ˆç”¨ï¼Œæ€ä¹ˆæ”¾æƒçœ‹ä¸ªäººï¼Œæ¯”å¦‚ä½ åªæƒ³è®©å®ƒåªè¯»ï¼Œè¿™æ ·æ²¡æœ‰é£é™©ï¼Œä½†ä¹Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šé™åˆ¶äº†AIçš„èƒ½åŠ›ï¼Œå¦‚æœå…è®¸AIå†™çš„è¯ï¼Œè¯·åœ¨gitç‰ˆæœ¬ç®¡ç†ä¸­å¥½å¥½å®¡æŸ¥AIä¿®æ”¹åçš„ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tauri (20)â€”â€”ä¸ºä»€ä¹ˆ NSPanel çª—å£ä¸èƒ½ç”¨å®˜æ–¹ API å…¨å±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7585006378533453866</link>    <guid>https://juejin.cn/post/7585006378533453866</guid>    <pubDate>2025-12-18T11:45:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585006378533453866" data-draft-id="7585006378533437482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tauri (20)â€”â€”ä¸ºä»€ä¹ˆ NSPanel çª—å£ä¸èƒ½ç”¨å®˜æ–¹ API å…¨å±ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,APP,macOS"/> <meta itemprop="datePublished" content="2025-12-18T11:45:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tauri (20)â€”â€”ä¸ºä»€ä¹ˆ NSPanel çª—å£ä¸èƒ½ç”¨å®˜æ–¹ API å…¨å±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T11:45:27.000Z" title="Thu Dec 18 2025 11:45:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åŸºäº Electron æˆ– Tauri å¼€å‘ macOS æ¡Œé¢åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€ç§ç‰¹æ®Šçš„çª—å£ç±»å‹ï¼š<code>NSPanel</code>ã€‚å®ƒé€šå¸¸ç”¨äº spotlight æœç´¢æ ã€æ‚¬æµ®å·¥å…·æ¡ç­‰åœºæ™¯ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬æƒ³ç»™è¿™ç§â€œå°çª—å£â€åŠ ä¸Šå…¨å±èƒ½åŠ›ï¼ˆæ¯”å¦‚ç©æ¸¸æˆã€çœ‹å¤§å›¾ï¼‰æ—¶ï¼Œå¾€å¾€ä¼šæ’ä¸Šä¸€å µå¢™ï¼š<strong>å®˜æ–¹çš„å…¨å± API å¯¹ <code>NSPanel</code> å¹¶ä¸å‹å¥½ï¼Œç”šè‡³ç›´æ¥å¤±æ•ˆã€‚</strong></p>
<h2 data-id="heading-0">é¡¹ç›®èƒŒæ™¯ï¼šCoco AI</h2>
<p>æˆ‘ä»¬åœ¨æ„å»º <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcoco.rs%2Fen" target="_blank" title="https://coco.rs/en" ref="nofollow noopener noreferrer">Coco AI</a></strong> â€”â€” è¿™æ¬¾é›†æˆäº†ç»Ÿä¸€æœç´¢ã€åä½œä¸ AI åŠ©æ‰‹çš„è·¨å¹³å°æ¡Œé¢ç”Ÿäº§åŠ›å·¥å…·æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚</p>
<p>Coco AI å¼ºå¤§çš„<strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcoco.rs%2Fen%2Fintegration%2Fextensions" target="_blank" title="https://coco.rs/en/integration/extensions" ref="nofollow noopener noreferrer">Extensions</a>ï¼‰å…è®¸ç”¨æˆ·åœ¨åº”ç”¨å†…ç›´æ¥è¿è¡Œå„ç§å·¥å…·ï¼ˆå¦‚å°æ¸¸æˆã€å¯è§†åŒ–å›¾è¡¨ã€Web åº”ç”¨ç­‰ï¼‰ã€‚ä¸ºäº†ä¿æŒè½»é‡å’Œéšæ‰‹å³ç”¨çš„ä½“éªŒï¼ŒCoco é»˜è®¤ä½¿ç”¨ç±»ä¼¼äº Spotlight çš„æ‚¬æµ®çª—ï¼ˆ<code>NSPanel</code>ï¼‰å±•ç¤ºã€‚ä½†å½“ç”¨æˆ·æƒ³è¦æ²‰æµ¸å¼åœ°ä½¿ç”¨æ’ä»¶ï¼ˆæ¯”å¦‚ç©ä¸ªå°æ¸¸æˆï¼‰æ—¶ï¼Œé»˜è®¤çš„å°çª—å£å°±æ˜¾å¾—å±€ä¿ƒäº†ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å®ç°çš„æ•ˆæœæ˜¯ï¼š<strong>å¹³æ—¶å¬ä¹‹å³æ¥æŒ¥ä¹‹å³å»ï¼Œéœ€è¦æ—¶ä¸€é”®å˜èº«å…¨å±å·¥ä½œå°ã€‚</strong></p>
<p>ç„¶è€Œï¼Œå®˜æ–¹çš„çª—å£ API åœ¨ <code>NSPanel</code> ä¸Šå´é¢‘é¢‘â€œç¿»è½¦â€ã€‚ä»Šå¤©å°±æ¥å¤ç›˜ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank" title="https://github.com/infinilabs/coco-app" ref="nofollow noopener noreferrer">Coco App</a></strong> ä¸­è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<h2 data-id="heading-1">åº”ç”¨åœºæ™¯ï¼šä¸€ä¸ªåµŒå…¥å¼å°æ¸¸æˆçª—å£</h2>
<p>å‡è®¾æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªç±»ä¼¼äº Spotlight çš„å¯åŠ¨å™¨ï¼Œå¹³æ—¶å®ƒæ˜¯ä¸€ä¸ªæ‚¬æµ®åœ¨å±å¹•ä¸­å¤®çš„å°æ¡†ã€‚ä½†æˆ‘ä»¬å…è®¸ç”¨æˆ·é€šè¿‡æ’ä»¶ç³»ç»ŸåŠ è½½ä¸€ä¸ªç½‘é¡µï¼ˆæ¯”å¦‚ HTML5 æ¸¸æˆï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5914df02df0415aab4b30f57d30d747~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5aSc5a-75pm05aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766663126&amp;x-signature=pTynOxy0q0Y7x5ruvhRu6hup%2BHE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>éœ€æ±‚å¾ˆç›´æ¥ï¼š</strong></p>
<ol>
<li>é»˜è®¤çª—å£å¤§å°å›ºå®šï¼ˆå¦‚ 1200x900ï¼‰ã€‚</li>
<li>ç”¨æˆ·ç‚¹å‡»â€œå…¨å±â€æŒ‰é’®ï¼Œçª—å£ç¬é—´é“ºæ»¡å½“å‰å±å¹•ã€‚</li>
<li>å†æ¬¡ç‚¹å‡»ï¼Œæ¢å¤åŸçŠ¶ã€‚</li>
</ol>
<p><strong>æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li><strong>Tauri</strong> (Rust + WebView)</li>
<li><strong>Frontend</strong>: React + TypeScript</li>
<li><strong>Window Type</strong>: <code>NSPanel</code> (macOS)</li>
</ul>
<h2 data-id="heading-2">é‡åˆ°çš„å‘ï¼šNSPanel ä¸ <code>setFullscreen</code> çš„çˆ±æ¨æƒ…ä»‡</h2>
<p>åœ¨æ™®é€šçš„ <code>NSWindow</code> ä¸­ï¼Œè°ƒç”¨ Tauri çš„ <code>window.setFullscreen(true)</code> æˆ– Electron çš„ <code>setFullScreen(true)</code>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Spaceï¼ŒæŠŠçª—å£å¹³é“ºè¿›å»ï¼Œéå¸¸ä¼˜é›…ã€‚</p>
<p>ä½† Coco AI ä¸ºäº†è¿½æ±‚â€œæè‡´çš„å¿«é€Ÿå¯åŠ¨ä¸æ— æ„Ÿäº¤äº’â€ï¼Œä½¿ç”¨äº† <code>NSPanel</code> å¹¶è®¾ç½®äº†è¾ƒé«˜çš„çª—å£å±‚çº§ã€‚å½“æˆ‘ä»¬è¯•å›¾å¯¹å®ƒè°ƒç”¨æ ‡å‡†å…¨å± API æ—¶ï¼š</p>
<ol>
<li><strong>ç³»ç»ŸåŠ¨ç”»å†²çª</strong>ï¼šç”±äºæ²¡æœ‰æ ‡å‡†æ ‡é¢˜æ ï¼Œç³»ç»Ÿå…¨å±åŠ¨ç”»å¯èƒ½ä¼šå¯¼è‡´çª—å£æ¶ˆå¤±ã€é—ªçƒç”šè‡³é”™ä½ã€‚</li>
<li><strong>å¤šå±æ”¯æŒå™©æ¢¦</strong>ï¼šç”¨æˆ·åœ¨å‰¯å±å”¤èµ· Coco AIï¼Œç‚¹å‡»å…¨å±ï¼Œç»“æœçª—å£ç›´æ¥é£å›äº†ä¸»å±ã€‚</li>
<li><strong>çŠ¶æ€ä¸å¯é€†</strong>ï¼šé€€å‡ºå…¨å±åï¼Œçª—å£ç„¦ç‚¹å’Œå±‚çº§å¯èƒ½å›ä¸åˆ°åŸæ¥çš„çŠ¶æ€ï¼Œæ‰“æ–­äº†ç”¨æˆ·çš„å¿ƒæµã€‚</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼Œå®˜æ–¹ API æ˜¯ç»™ <strong>â€œæ ‡å‡†åº”ç”¨çª—å£â€</strong> è®¾è®¡çš„ï¼Œå¹¶ä¸é€‚é…æˆ‘ä»¬è¿™ç§ <strong>â€œçµåŠ¨æŒ‚ä»¶â€</strong>ã€‚</p>
<h2 data-id="heading-3">è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ¥ç®¡çª—å£å¸ƒå±€</h2>
<p>æ—¢ç„¶ç³»ç»Ÿ API ä¸æ‡‚æˆ‘ä»¬çš„å¿ƒï¼Œæˆ‘ä»¬å°±è‡ªå·±åŠ¨æ‰‹ï¼Œâ€œä¼ªé€ â€ä¸€ä¸ªå…¨å±æ•ˆæœã€‚é€šè¿‡ <strong>â€œæ‰‹åŠ¨è®¡ç®— + é€»è¾‘åæ ‡è½¬æ¢â€</strong> æ¥ä¼˜é›…è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-4">æ ¸å¿ƒåŸç†</h3>
<ol>
<li><strong>ç²¾å‡†å®šä½</strong>ï¼šè·å–å½“å‰é¼ æ ‡æ‰€åœ¨çš„æ˜¾ç¤ºå™¨ï¼ˆMonitorï¼‰ï¼Œç¡®ä¿â€œåœ¨å“ªé‡Œå”¤èµ·ï¼Œå°±åœ¨å“ªé‡Œå…¨å±â€ã€‚</li>
<li><strong>åæ ‡ç³»è½¬æ¢</strong>ï¼šmacOS ä½¿ç”¨é€»è¾‘åƒç´ ï¼ˆLogical Pixelï¼‰ï¼Œè€Œåº•å±‚å±å¹•ä¿¡æ¯å¾€å¾€æ˜¯ç‰©ç†åƒç´ ï¼ˆPhysical Pixelï¼‰ï¼Œå¿…é¡»é€šè¿‡ <code>scaleFactor</code> è¿›è¡Œè½¬æ¢ï¼Œå¦åˆ™çª—å£ä¼šå·¨å¤§æ— æ¯”æˆ–åªæœ‰å››åˆ†ä¹‹ä¸€å¤§ã€‚</li>
<li><strong>æš´åŠ›ç¾å­¦</strong>ï¼šç›´æ¥ä¿®æ”¹çª—å£çš„ <code>x, y, width, height</code>ï¼Œä½¿å…¶å®Œç¾è¦†ç›–ç›®æ ‡å±å¹•çš„ Boundsã€‚</li>
<li><strong>çŠ¶æ€å¿«ç…§</strong>ï¼šåœ¨å˜èº«å‰ï¼Œè®°ä½åŸæ¥çš„ä½ç½®å’Œå¤§å°ï¼Œä»¥ä¾¿éšæ—¶ç¼©å›é‚£ä¸ªç†Ÿæ‚‰çš„â€œå°æ¡†æ¡†â€ã€‚</li>
</ol>
<h3 data-id="heading-5">Coco AI çš„å®ç°ä»£ç </h3>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨ <code>ViewExtension.tsx</code> ä¸­çš„æ ¸å¿ƒå®ç°é€»è¾‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> applyFullscreen = <span class="hljs-title function_">useCallback</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">next</span>: <span class="hljs-built_in">boolean</span>) =&gt; {
    <span class="hljs-keyword">if</span> (next) {
      <span class="hljs-comment">// 1. çŠ¶æ€å¿«ç…§ï¼šä¿å­˜å½“å‰ä½ç½®ã€å¤§å°ã€æ˜¯å¦å¯è°ƒæ•´</span>
      <span class="hljs-keyword">const</span> size = <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">getWindowSize</span>();
      <span class="hljs-keyword">const</span> resizable = <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">isWindowResizable</span>();
      <span class="hljs-keyword">const</span> pos = <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">getWindowPosition</span>();
      
      fullscreenPrevRef.<span class="hljs-property">current</span> = {
        <span class="hljs-attr">width</span>: size.<span class="hljs-property">width</span>,
        <span class="hljs-attr">height</span>: size.<span class="hljs-property">height</span>,
        resizable,
        <span class="hljs-attr">x</span>: pos.<span class="hljs-property">x</span>,
        <span class="hljs-attr">y</span>: pos.<span class="hljs-property">y</span>,
      };

      <span class="hljs-comment">// 2. é’ˆå¯¹ macOS + Tauri (NSPanel) çš„ç‰¹æ®Šå¤„ç†</span>
      <span class="hljs-keyword">if</span> (isMac &amp;&amp; isTauri) {
        <span class="hljs-comment">// å…³é”®æ­¥ï¼šè·å–é¼ æ ‡æ‰€åœ¨çš„å±å¹•ï¼Œå®ç°â€œåŸä½å…¨å±â€</span>
        <span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">getMonitorFromCursor</span>();

        <span class="hljs-keyword">if</span> (!monitor) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-variable language_">window</span> = <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">getCurrentWebviewWindow</span>();
        <span class="hljs-keyword">const</span> factor = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scaleFactor</span>();

        <span class="hljs-comment">// 3. åæ ‡è½¬æ¢ï¼šç‰©ç†åƒç´  -&gt; é€»è¾‘åƒç´ </span>
        <span class="hljs-keyword">const</span> { size, position } = monitor;
        <span class="hljs-keyword">const</span> { width, height } = size.<span class="hljs-title function_">toLogical</span>(factor);
        <span class="hljs-keyword">const</span> { x, y } = position.<span class="hljs-title function_">toLogical</span>(factor);

        <span class="hljs-comment">// 4. æ‰‹åŠ¨é“ºæ»¡å±å¹•</span>
        <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowSize</span>(width, height);
        <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowPosition</span>(x, y);
        <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowResizable</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å…¨å±æ¨¡å¼ä¸‹é€šå¸¸å…è®¸è°ƒæ•´</span>
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">recomputeScale</span>(); <span class="hljs-comment">// è°ƒæ•´å†…éƒ¨ Web å†…å®¹çš„ç¼©æ”¾æ¯”ä¾‹</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å…¶ä»–å¹³å°ä½¿ç”¨æ ‡å‡† API å³å¯</span>
        <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowFullscreen</span>(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">recomputeScale</span>();
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// 5. é€€å‡ºå…¨å±ï¼šæ¢å¤å¦‚åˆ</span>
      <span class="hljs-keyword">if</span> (!isMac) {
        <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowFullscreen</span>(<span class="hljs-literal">false</span>);
      }
      <span class="hljs-comment">// ä»é…ç½®æˆ–é»˜è®¤å€¼æ¢å¤å¤§å°</span>
      <span class="hljs-keyword">const</span> nextWidth = ui?.<span class="hljs-property">width</span> ?? <span class="hljs-variable constant_">DEFAULT_VIEW_WIDTH</span>;
      <span class="hljs-keyword">const</span> nextHeight = ui?.<span class="hljs-property">height</span> ?? <span class="hljs-variable constant_">DEFAULT_VIEW_HEIGHT</span>;
      
      <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowSize</span>(nextWidth, nextHeight);
      <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">setWindowResizable</span>(ui?.<span class="hljs-property">resizable</span> ?? <span class="hljs-literal">true</span>);
      
      <span class="hljs-comment">// å…³é”®æ­¥ï¼šå±…ä¸­å›åŸæ¥çš„å±å¹•</span>
      <span class="hljs-keyword">await</span> platformAdapter.<span class="hljs-title function_">centerOnCurrentMonitor</span>();
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">recomputeScale</span>();
      
      <span class="hljs-comment">// 6. ç„¦ç‚¹ä¿®å¤ï¼ˆé˜²æ­¢æ“ä½œä¸­æ–­ï¼‰</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
      }, <span class="hljs-number">0</span>);
    }
  },
  [ui, recomputeScale]
);
</code></pre>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™æ ·åšä½“éªŒæ›´å¥½ï¼Ÿ</h3>
<ul>
<li><strong>ç¬æ—¶å“åº”</strong>ï¼šæ²¡æœ‰äº†ç³»ç»Ÿå…¨å±åŠ¨ç”»çš„æ‹–æ³¥å¸¦æ°´ï¼Œç‚¹å‡»å³å…¨å±ã€‚</li>
<li><strong>å¤šå±å‹å¥½</strong>ï¼šå®Œç¾æ”¯æŒå¤šæ˜¾ç¤ºå™¨ç¯å¢ƒï¼Œä¸å†å‘ç”Ÿâ€œçª—å£ç¬ç§»â€çš„çµå¼‚äº‹ä»¶ã€‚</li>
<li><strong>UI è‡ªç”±åº¦</strong>ï¼šä¿ç•™äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„ UI æ§ä»¶ï¼Œä¸å—ç³»ç»Ÿæ ‡é¢˜æ çš„å¹²æ‰°ã€‚</li>
</ul>
<h2 data-id="heading-7">å°ç»“</h2>
<p>åœ¨å¼€å‘ <strong>Coco AI</strong> çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å§‹ç»ˆåšæŒ <strong>â€œä¸å› ä¸ºæŠ€æœ¯é™åˆ¶è€Œå¦¥åç”¨æˆ·ä½“éªŒâ€</strong> ã€‚è™½ç„¶æ‰‹åŠ¨ç®¡ç†çª—å£çŠ¶æ€æ¯”è°ƒç”¨ä¸€ä¸ª API éº»çƒ¦å¾—å¤šï¼Œä½†ä¸ºäº†è®©ç”¨æˆ·åœ¨ä½¿ç”¨æ’ä»¶æ—¶èƒ½æœ‰ä¸æ»‘çš„ä½“éªŒï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ã€‚</p>
<p>å¦‚æœä½ å¯¹æˆ‘ä»¬çš„æŠ€æœ¯æ ˆï¼ˆRust + Tauri + Reactï¼‰æ„Ÿå…´è¶£ï¼Œæˆ–è€…æƒ³ä½“éªŒä¸€ä¸‹è¿™ä¸ªâ€œæ—¢èƒ½å°å·§æ‚¬æµ®ï¼Œåˆèƒ½å…¨å±æ²‰æµ¸â€çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæ¬¢è¿è®¿é—®æˆ‘ä»¬çš„ GitHub ä»“åº“å’Œå®˜ç½‘ï¼š</p>
<ul>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank" title="https://github.com/infinilabs/coco-app" ref="nofollow noopener noreferrer">github.com/infinilabs/â€¦</a></li>
<li><strong>Website</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fcoco.rs%2F" target="_blank" title="https://coco.rs/" ref="nofollow noopener noreferrer">coco.rs/en</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[node_modules å¤ªèƒ–ï¼Ÿç”¨ Node.js åŸç”ŸåŠŸèƒ½ç»™ä¾èµ–åšä¸€æ¬¡å¤§æ‰«é™¤]]></title>    <link>https://juejin.cn/post/7584807992032002090</link>    <guid>https://juejin.cn/post/7584807992032002090</guid>    <pubDate>2025-12-18T10:18:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584807992032002090" data-draft-id="7584807992031985706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="node_modules å¤ªèƒ–ï¼Ÿç”¨ Node.js åŸç”ŸåŠŸèƒ½ç»™ä¾èµ–åšä¸€æ¬¡å¤§æ‰«é™¤"/> <meta itemprop="keywords" content="Node.js,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-18T10:18:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            node_modules å¤ªèƒ–ï¼Ÿç”¨ Node.js åŸç”ŸåŠŸèƒ½ç»™ä¾èµ–åšä¸€æ¬¡å¤§æ‰«é™¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T10:18:57.000Z" title="Thu Dec 18 2025 10:18:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">node_modules å¤ªèƒ–ï¼Ÿç”¨ Node.js åŸç”ŸåŠŸèƒ½ç»™ä¾èµ–åšä¸€æ¬¡å¤§æ‰«é™¤</h2>
<p>å†™ Node.js é¡¹ç›®çš„æ—¶å€™ï¼Œ<code>package.json</code> é‡Œçš„ä¾èµ–åˆ—è¡¨æ˜¯ä¸æ˜¯è¶Šæ¥è¶Šé•¿ï¼Ÿ</p>
<p>è£…ä¸ª <code>node-fetch</code> å‘è¯·æ±‚ï¼Œè£…ä¸ª <code>uuid</code> ç”Ÿæˆ IDï¼Œè£…ä¸ª <code>dotenv</code> è¯»ç¯å¢ƒå˜é‡ï¼Œè£…ä¸ª <code>chalk</code> è¾“å‡ºå½©è‰²æ—¥å¿—â€¦â€¦æ¯ä¸ªåŒ…éƒ½ä¸å¤§ï¼Œä½†åŠ èµ·æ¥å°±æ˜¯ä¸€å †ã€‚</p>
<p>é—®é¢˜æ˜¯ï¼š</p>
<ul>
<li>ä¾èµ–å¤šäº†ï¼Œä¾›åº”é“¾é£é™©å°±å¤§äº†ï¼ˆè¿˜è®°å¾— left-pad äº‹ä»¶å—ï¼Ÿï¼‰</li>
<li><code>node_modules</code> è¶Šæ¥è¶Šè‡ƒè‚¿</li>
<li>ç‰ˆæœ¬å†²çªå’Œå…¼å®¹æ€§é—®é¢˜æ—¶ä¸æ—¶å†’å‡ºæ¥</li>
</ul>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒNode.js è¿™å‡ å¹´ä¸€ç›´åœ¨æŠŠå¸¸ç”¨åŠŸèƒ½æ”¶ç¼–è¿›æ ¸å¿ƒæ¨¡å—ã€‚å¾ˆå¤šä»¥å‰å¿…é¡»è£…åŒ…æ‰èƒ½ç”¨çš„ä¸œè¥¿ï¼Œç°åœ¨åŸç”Ÿå°±æœ‰äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ•´ç†äº† 15 ä¸ªå¯ä»¥è¢« Node.js åŸç”ŸåŠŸèƒ½æ›¿ä»£çš„ npm åŒ…ï¼ŒæŒ‰ä½¿ç”¨é¢‘ç‡æ’åºï¼Œçœ‹çœ‹å“ªäº›ä¾èµ–å¯ä»¥ä»ä½ çš„é¡¹ç›®é‡Œåˆ æ‰ã€‚</p>
<h3 data-id="heading-1">1. <code>fetch()</code> æ›¿ä»£ <code>node-fetch</code></h3>
<p>è¿™ä¸ªåº”è¯¥æ˜¯ç”¨å¾—æœ€å¤šçš„äº†ã€‚</p>
<p>ä»¥å‰ Node.js æ²¡æœ‰ <code>fetch</code>ï¼Œæƒ³å‘ HTTP è¯·æ±‚è¦ä¹ˆç”¨ <code>http</code> æ¨¡å—è‡ªå·±å°è£…ï¼Œè¦ä¹ˆè£… <code>node-fetch</code>ã€‚ç°åœ¨ä¸ç”¨äº†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js 18+ åŸç”Ÿæ”¯æŒ</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.github.com/repos/nodejs/node'</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">stargazers_count</span>);
</code></pre>
<ul>
<li>v17.5.0 å®éªŒæ€§å¼•å…¥</li>
<li>v18.0.0 ç¨³å®š</li>
</ul>
<p>API å’Œæµè§ˆå™¨çš„ <code>fetch</code> ä¸€æ ·ï¼Œä»£ç å¯ä»¥å‰åç«¯é€šç”¨ã€‚</p>
<h3 data-id="heading-2">2. <code>crypto.randomUUID()</code> æ›¿ä»£ <code>uuid</code></h3>
<p>ç”Ÿæˆ UUID æ˜¯ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œä»¥å‰éƒ½ç”¨ <code>uuid</code> åŒ…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> { v4 <span class="hljs-keyword">as</span> uuidv4 } <span class="hljs-keyword">from</span> <span class="hljs-string">'uuid'</span>;
<span class="hljs-keyword">const</span> id = <span class="hljs-title function_">uuidv4</span>();

<span class="hljs-comment">// ç°åœ¨ï¼ˆNode.js 14.17.0+ï¼‰</span>
<span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:crypto'</span>;
<span class="hljs-keyword">const</span> id = <span class="hljs-title function_">randomUUID</span>();
<span class="hljs-comment">// è¾“å‡ºç±»ä¼¼ï¼š'1b9d6bcd-bbfd-4b2d-9b5d-ab8dfbbd4bed'</span>
</code></pre>
<p>å°‘è£…ä¸€ä¸ªåŒ…ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒ <code>uuid</code> çš„ç‰ˆæœ¬å…¼å®¹é—®é¢˜ã€‚</p>
<h3 data-id="heading-3">3. <code>--env-file</code> æ›¿ä»£ <code>dotenv</code></h3>
<p>è¯» <code>.env</code> æ–‡ä»¶æ˜¯å‡ ä¹æ¯ä¸ªé¡¹ç›®éƒ½è¦åšçš„äº‹ï¼Œä»¥å‰å¿…é¡»è£… <code>dotenv</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">API_KEY</span>);
</code></pre>
<p>ç°åœ¨å¯ä»¥ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Node.js 20.10.0+</span>
node --env-file=.<span class="hljs-built_in">env</span> app.js
</code></pre>
<p>ä¸ç”¨å†™ä»»ä½•ä»£ç ï¼Œç¯å¢ƒå˜é‡ç›´æ¥åŠ è½½åˆ° <code>process.env</code>ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>--env-file</code> åŠŸèƒ½æ¯” <code>dotenv</code> ç®€å•ï¼Œä¸æ”¯æŒå˜é‡å±•å¼€ï¼ˆ<code>${VAR}</code>ï¼‰å’Œå¤šè¡Œå€¼ã€‚å¦‚æœä½ çš„ <code>.env</code> æ–‡ä»¶æ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½è¿˜æ˜¯å¾—ç”¨ <code>dotenv</code>ã€‚</p>
<h3 data-id="heading-4">4. <code>fs.rm({ recursive: true })</code> æ›¿ä»£ <code>rimraf</code></h3>
<p>åˆ é™¤ç›®å½•åŠå…¶æ‰€æœ‰å†…å®¹ï¼Œä»¥å‰ç”¨ <code>rimraf</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> rimraf <span class="hljs-keyword">from</span> <span class="hljs-string">'rimraf'</span>;
rimraf.<span class="hljs-title function_">sync</span>(<span class="hljs-string">'dist'</span>);

<span class="hljs-comment">// ç°åœ¨ï¼ˆNode.js 12.10.0+ï¼‰</span>
<span class="hljs-keyword">import</span> { rm } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs/promises'</span>;
<span class="hljs-keyword">await</span> <span class="hljs-title function_">rm</span>(<span class="hljs-string">'dist'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> });
</code></pre>
<p><code>force: true</code> è¡¨ç¤ºç›®å½•ä¸å­˜åœ¨æ—¶ä¸æŠ¥é”™ï¼Œå’Œ <code>rm -rf</code> è¡Œä¸ºä¸€è‡´ã€‚</p>
<h3 data-id="heading-5">5. <code>fs.mkdir({ recursive: true })</code> æ›¿ä»£ <code>mkdirp</code></h3>
<p>åˆ›å»ºåµŒå¥—ç›®å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> mkdirp <span class="hljs-keyword">from</span> <span class="hljs-string">'mkdirp'</span>;
mkdirp.<span class="hljs-title function_">sync</span>(<span class="hljs-string">'path/to/nested/dir'</span>);

<span class="hljs-comment">// ç°åœ¨ï¼ˆNode.js 10.12.0+ï¼‰</span>
<span class="hljs-keyword">import</span> { mkdir } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs/promises'</span>;
<span class="hljs-keyword">await</span> <span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'path/to/nested/dir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
</code></pre>
<p>è¿™ä¸ªåŠŸèƒ½åŠ å¾—æ¯”è¾ƒæ—©ï¼Œå¾ˆå¤šé¡¹ç›®å¯èƒ½å·²ç»åœ¨ç”¨äº†ã€‚</p>
<h3 data-id="heading-6">6. <code>node:test</code> æ›¿ä»£æµ‹è¯•æ¡†æ¶</h3>
<p>Node.js ç°åœ¨æœ‰å†…ç½®çš„æµ‹è¯•æ¨¡å—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// test.js</span>
<span class="hljs-keyword">import</span> { test } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:test'</span>;
<span class="hljs-keyword">import</span> assert <span class="hljs-keyword">from</span> <span class="hljs-string">'node:assert'</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">'åŠ æ³•æµ‹è¯•'</span>, <span class="hljs-function">() =&gt;</span> {
  assert.<span class="hljs-title function_">strictEqual</span>(<span class="hljs-number">1</span> + <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
});

<span class="hljs-title function_">test</span>(<span class="hljs-string">'å¼‚æ­¥æµ‹è¯•'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>);
  assert.<span class="hljs-title function_">strictEqual</span>(result, <span class="hljs-number">42</span>);
});
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node --<span class="hljs-built_in">test</span>
</code></pre>
<ul>
<li>v18.0.0 å®éªŒæ€§å¼•å…¥</li>
<li>v20.0.0 ç¨³å®š</li>
</ul>
<p>å¯¹äºæ¨¡å—çº§åˆ«çš„å•å…ƒæµ‹è¯•å¤Ÿç”¨äº†ã€‚ä½†å¦‚æœæ˜¯å¤§å‹åº”ç”¨ï¼Œéœ€è¦ mockã€è¦†ç›–ç‡æŠ¥å‘Šã€å¹¶è¡Œæ‰§è¡Œç­‰åŠŸèƒ½ï¼ŒJest æˆ– Vitest è¿˜æ˜¯æ›´åˆé€‚ã€‚</p>
<h3 data-id="heading-7">7. <code>util.styleText()</code> æ›¿ä»£ <code>chalk</code></h3>
<p>ç»ˆç«¯å½©è‰²è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> chalk <span class="hljs-keyword">from</span> <span class="hljs-string">'chalk'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">red</span>(<span class="hljs-string">'Error!'</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-property">green</span>.<span class="hljs-title function_">bold</span>(<span class="hljs-string">'Success!'</span>));

<span class="hljs-comment">// ç°åœ¨ï¼ˆNode.js 20.12.0+ï¼Œv22.17.0 ç¨³å®šï¼‰</span>
<span class="hljs-keyword">import</span> { styleText } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:util'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">styleText</span>(<span class="hljs-string">'red'</span>, <span class="hljs-string">'Error!'</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">styleText</span>([<span class="hljs-string">'green'</span>, <span class="hljs-string">'bold'</span>], <span class="hljs-string">'Success!'</span>));
</code></pre>
<p>æ”¯æŒçš„æ ·å¼åŒ…æ‹¬ï¼š<code>red</code>ã€<code>green</code>ã€<code>yellow</code>ã€<code>blue</code>ã€<code>bold</code>ã€<code>italic</code>ã€<code>underline</code> ç­‰ã€‚</p>
<h3 data-id="heading-8">8. <code>util.stripVTControlCharacters()</code> æ›¿ä»£ <code>strip-ansi</code></h3>
<p>å»é™¤ ANSI è½¬ä¹‰å­—ç¬¦ï¼ˆå½©è‰²è¾“å‡ºçš„æ§åˆ¶ç ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { stripVTControlCharacters } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:util'</span>;

<span class="hljs-keyword">const</span> colored = <span class="hljs-string">'\x1b[31mError\x1b[0m'</span>;
<span class="hljs-keyword">const</span> plain = <span class="hljs-title function_">stripVTControlCharacters</span>(colored);
<span class="hljs-comment">// plain === 'Error'</span>
</code></pre>
<p>åœ¨å†™æ—¥å¿—åˆ°æ–‡ä»¶æˆ–è€…åšå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶å¾ˆæœ‰ç”¨ã€‚</p>
<h3 data-id="heading-9">9. <code>fs.glob()</code> æ›¿ä»£ <code>glob</code></h3>
<p>æ–‡ä»¶åŒ¹é…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»¥å‰</span>
<span class="hljs-keyword">import</span> { glob } <span class="hljs-keyword">from</span> <span class="hljs-string">'glob'</span>;
<span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> <span class="hljs-title function_">glob</span>(<span class="hljs-string">'**/*.js'</span>);

<span class="hljs-comment">// ç°åœ¨ï¼ˆNode.js 22.0.0+ï¼‰</span>
<span class="hljs-keyword">import</span> { glob } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs/promises'</span>;
<span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> <span class="hljs-title function_">glob</span>(<span class="hljs-string">'**/*.js'</span>);
</code></pre>
<p>API åŸºæœ¬ä¸€è‡´ï¼Œè¿ç§»æˆæœ¬å¾ˆä½ã€‚</p>
<h3 data-id="heading-10">10. <code>atob</code> / <code>btoa</code> æ›¿ä»£ Base64 polyfill</h3>
<p>Base64 ç¼–è§£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js 20+ å…¨å±€å¯ç”¨</span>
<span class="hljs-keyword">const</span> encoded = <span class="hljs-title function_">btoa</span>(<span class="hljs-string">'hello world'</span>);
<span class="hljs-comment">// 'aGVsbG8gd29ybGQ='</span>

<span class="hljs-keyword">const</span> decoded = <span class="hljs-title function_">atob</span>(encoded);
<span class="hljs-comment">// 'hello world'</span>
</code></pre>
<p>å’Œæµè§ˆå™¨ API ä¸€è‡´ï¼Œå†™åŒæ„ä»£ç æ›´æ–¹ä¾¿äº†ã€‚</p>
<h3 data-id="heading-11">11. <code>WebSocket</code> æ›¿ä»£ <code>ws</code>ï¼ˆå®¢æˆ·ç«¯åœºæ™¯ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js 21.0.0+ï¼ˆå®éªŒæ€§ï¼‰</span>
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'wss://echo.websocket.org'</span>);

ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">() =&gt;</span> {
  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Hello'</span>);
});

ws.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received:'</span>, event.<span class="hljs-property">data</span>);
});
</code></pre>
<p>ç›®å‰è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œè€Œä¸”åªé€‚åˆå®¢æˆ·ç«¯åœºæ™¯ã€‚å†™ WebSocket æœåŠ¡ç«¯ï¼Œ<code>ws</code> åŒ…è¿˜æ˜¯æ ‡å‡†é€‰æ‹©ã€‚</p>
<h3 data-id="heading-12">12. <code>node:sqlite</code> æ›¿ä»£ <code>sqlite3</code> / <code>better-sqlite3</code></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®éªŒæ€§åŠŸèƒ½</span>
<span class="hljs-keyword">import</span> { open } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:sqlite'</span>;

<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">await</span> <span class="hljs-title function_">open</span>(<span class="hljs-string">':memory:'</span>);
<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">exec</span>(<span class="hljs-string">'CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)'</span>);
<span class="hljs-keyword">await</span> db.<span class="hljs-title function_">run</span>(<span class="hljs-string">'INSERT INTO users (name) VALUES (?)'</span>, <span class="hljs-string">'Alice'</span>);
<span class="hljs-keyword">const</span> row = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">get</span>(<span class="hljs-string">'SELECT * FROM users WHERE id = ?'</span>, <span class="hljs-number">1</span>);
</code></pre>
<p>æœ€å¤§çš„å¥½å¤„æ˜¯ä¸ç”¨ç¼–è¯‘åŸç”Ÿæ¨¡å—äº†ã€‚<code>sqlite3</code> å’Œ <code>better-sqlite3</code> éƒ½éœ€è¦ node-gyp ç¼–è¯‘ï¼Œåœ¨æŸäº›ç¯å¢ƒä¸‹ä¼šé‡åˆ°å„ç§é—®é¢˜ã€‚</p>
<p>ç›®å‰è¿˜æ˜¯å®éªŒæ€§çš„ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®è§‚æœ›ã€‚</p>
<h3 data-id="heading-13">13. <code>EventTarget</code> æ›¿ä»£ <code>event-target-shim</code></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js 15.0.0+ å…¨å±€å¯ç”¨</span>
<span class="hljs-keyword">const</span> target = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventTarget</span>();

target.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">detail</span>);
});

target.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'message'</span>, { <span class="hljs-attr">detail</span>: <span class="hljs-string">'hello'</span> }));
</code></pre>
<p>å’Œæµè§ˆå™¨ API ä¸€è‡´ã€‚</p>
<h3 data-id="heading-14">14. <code>URLPattern</code> æ›¿ä»£ <code>url-pattern</code></h3>
<p>è·¯ç”±åŒ¹é…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.js 20.0.0+ï¼ˆå®éªŒæ€§ï¼‰</span>
<span class="hljs-keyword">const</span> pattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/users/:id'</span> });

<span class="hljs-keyword">const</span> result = pattern.<span class="hljs-title function_">exec</span>(<span class="hljs-string">'https://example.com/users/123'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">pathname</span>.<span class="hljs-property">groups</span>.<span class="hljs-property">id</span>); <span class="hljs-comment">// '123'</span>
</code></pre>
<p>å¯¹äºç®€å•çš„è·¯ç”±åŒ¹é…åœºæ™¯å¤Ÿç”¨ï¼Œä½†ç›®å‰è¿˜æ˜¯å®éªŒæ€§çš„ã€‚</p>
<h3 data-id="heading-15">15. <code>--experimental-strip-types</code> è¿è¡Œ TypeScript</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Node.js 21.0.0+ï¼ˆå®éªŒæ€§ï¼‰</span>
node --experimental-strip-types app.ts
</code></pre>
<p>è¿™ä¸ªåŠŸèƒ½åªæ˜¯å»æ‰ç±»å‹æ³¨è§£ï¼Œä¸åšç±»å‹æ£€æŸ¥ï¼Œä¹Ÿä¸æ”¯æŒä¸€äº› TypeScript ç‰¹æœ‰çš„è¯­æ³•ï¼ˆå¦‚ <code>enum</code>ã€<code>namespace</code>ï¼‰ã€‚</p>
<p>é€‚åˆå¿«é€Ÿè¿è¡Œ <code>.ts</code> æ–‡ä»¶åšåŸå‹æˆ–æµ‹è¯•ï¼Œä½†ä¸èƒ½æ›¿ä»£å®Œæ•´çš„ TypeScript å·¥å…·é“¾ã€‚</p>
<h3 data-id="heading-16">å“ªäº›å¯ä»¥ç›´æ¥ç”¨ï¼Œå“ªäº›å†ç­‰ç­‰ï¼Ÿ</h3>






































































<table><thead><tr><th>åŠŸèƒ½</th><th>çŠ¶æ€</th><th>å»ºè®®</th></tr></thead><tbody><tr><td><code>fetch()</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>crypto.randomUUID()</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>--env-file</code></td><td>å®éªŒæ€§</td><td>ç®€å•åœºæ™¯å¯ç”¨</td></tr><tr><td><code>fs.rm/mkdir</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>node:test</code></td><td>ç¨³å®š</td><td>æ¨¡å—æµ‹è¯•å¯ç”¨</td></tr><tr><td><code>util.styleText()</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>fs.glob()</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>atob/btoa</code></td><td>ç¨³å®š</td><td>ç›´æ¥ç”¨</td></tr><tr><td><code>WebSocket</code></td><td>å®éªŒæ€§</td><td>å®¢æˆ·ç«¯å¯ç”¨</td></tr><tr><td><code>node:sqlite</code></td><td>å®éªŒæ€§</td><td>è§‚æœ›</td></tr><tr><td><code>URLPattern</code></td><td>å®éªŒæ€§</td><td>è§‚æœ›</td></tr><tr><td>TypeScript æ”¯æŒ</td><td>å®éªŒæ€§</td><td>åŸå‹/æµ‹è¯•å¯ç”¨</td></tr></tbody></table>
<h3 data-id="heading-17">è¿ç§»å»ºè®®</h3>
<ol>
<li>
<p><strong>å…ˆæŸ¥ç‰ˆæœ¬</strong>ï¼šç¡®è®¤ä½ çš„ Node.js ç‰ˆæœ¬æ”¯æŒè¿™äº›åŠŸèƒ½ã€‚<code>node -v</code> çœ‹ä¸€ä¸‹ã€‚</p>
</li>
<li>
<p><strong>æ¸è¿›å¼è¿ç§»</strong>ï¼šä¸ç”¨ä¸€æ¬¡å…¨æ¢ï¼Œå“ªä¸ªåŒ…ç”¨å¾—å¤šã€é—®é¢˜å¤šï¼Œå…ˆæ¢å“ªä¸ªã€‚</p>
</li>
<li>
<p><strong>å®éªŒæ€§åŠŸèƒ½è°¨æ…ä½¿ç”¨</strong>ï¼šæ ‡è®°ä¸ºå®éªŒæ€§çš„åŠŸèƒ½ï¼ŒAPI å¯èƒ½ä¼šå˜ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚</p>
</li>
<li>
<p><strong>ä¿ç•™å¤æ‚åœºæ™¯çš„åŒ…</strong>ï¼šå¦‚æœä½ éœ€è¦ <code>dotenv</code> çš„å˜é‡å±•å¼€ã€<code>chalk</code> çš„é“¾å¼è°ƒç”¨ã€Jest çš„å®Œæ•´æµ‹è¯•èƒ½åŠ›ï¼Œç»§ç»­ç”¨åŒ…ä¹Ÿæ²¡é—®é¢˜ã€‚åŸç”ŸåŠŸèƒ½æ˜¯å¤šäº†ä¸ªé€‰æ‹©ï¼Œä¸æ˜¯å¿…é¡»æ›¿æ¢ã€‚</p>
</li>
</ol>
<p>ä¾èµ–å°‘äº†ï¼Œé¡¹ç›®å°±å¹²å‡€äº†ã€‚ä¾›åº”é“¾å®‰å…¨ã€å¯åŠ¨é€Ÿåº¦ã€ç»´æŠ¤æˆæœ¬ï¼Œéƒ½èƒ½å—ç›Šã€‚</p>
<h3 data-id="heading-18">å‚è€ƒ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodesource.com%2Fblog%2Fnodejs-features-replacing-npm-packages" target="_blank" title="https://nodesource.com/blog/nodejs-features-replacing-npm-packages" ref="nofollow noopener noreferrer">nodesource.com/blog/nodejsâ€¦</a></li>
</ul>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)]]></title>    <link>https://juejin.cn/post/7584861353804070948</link>    <guid>https://juejin.cn/post/7584861353804070948</guid>    <pubDate>2025-12-18T07:42:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584861353804070948" data-draft-id="7584759201073102889" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)"/> <meta itemprop="keywords" content="å‰ç«¯,WebSocket,axios"/> <meta itemprop="datePublished" content="2025-12-18T07:42:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(1)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T07:42:40.000Z" title="Thu Dec 18 2025 07:42:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œç½‘ç»œè¯·æ±‚æ˜¯å®ç°å‰åç«¯æ•°æ®äº¤äº’çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä»åŸºç¡€çš„XMLHttpRequeståˆ°ç°ä»£çš„Fetch APIï¼Œå†åˆ°åŠŸèƒ½ä¸°å¯Œçš„WebSocketï¼Œæµè§ˆå™¨æä¾›äº†å¤šç§ç½‘ç»œé€šä¿¡æœºåˆ¶ã€‚æœ¬æ–‡å°†å…¨é¢æ·±å…¥æ¢è®¨æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ç›¸å…³çš„APIï¼Œæä¾›é«˜çº§å°è£…æ–¹æ¡ˆï¼Œå¹¶æ¶µç›–å®é™…å¼€å‘ä¸­çš„å„ç§å¤æ‚åœºæ™¯ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€ç°ä»£ç½‘ç»œè¯·æ±‚APIæ¦‚è§ˆ</h4>
<h5 data-id="heading-2">1.1 ä»XMLHttpRequeståˆ°Fetch API</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkAPIEvolution</span> {
  <span class="hljs-comment">// ä¼ ç»Ÿçš„XMLHttpRequestå®ç°</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">xhrRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
      <span class="hljs-keyword">const</span> {
        method = <span class="hljs-string">'GET'</span>,
        headers = {},
        data = <span class="hljs-literal">null</span>,
        timeout = <span class="hljs-number">0</span>,
        responseType = <span class="hljs-string">''</span>
      } = options;
      
      xhr.<span class="hljs-title function_">open</span>(method, url, <span class="hljs-literal">true</span>);
      
      <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(headers).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        xhr.<span class="hljs-title function_">setRequestHeader</span>(key, value);
      });
      
      <span class="hljs-comment">// è®¾ç½®å“åº”ç±»å‹</span>
      <span class="hljs-keyword">if</span> (responseType) {
        xhr.<span class="hljs-property">responseType</span> = responseType;
      }
      
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      xhr.<span class="hljs-property">timeout</span> = timeout;
      
      <span class="hljs-comment">// äº‹ä»¶å¤„ç†</span>
      xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
          <span class="hljs-keyword">let</span> response;
          
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">responseType</span> === <span class="hljs-string">'json'</span>) {
              response = xhr.<span class="hljs-property">response</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">responseType</span> === <span class="hljs-string">'blob'</span>) {
              response = xhr.<span class="hljs-property">response</span>;
            } <span class="hljs-keyword">else</span> {
              response = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
            }
          } <span class="hljs-keyword">catch</span> (e) {
            response = xhr.<span class="hljs-property">responseText</span>;
          }
          
          <span class="hljs-title function_">resolve</span>({
            <span class="hljs-attr">data</span>: response,
            <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>,
            <span class="hljs-attr">statusText</span>: xhr.<span class="hljs-property">statusText</span>,
            <span class="hljs-attr">headers</span>: xhr.<span class="hljs-title function_">getAllResponseHeaders</span>()
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${xhr.status}</span>: <span class="hljs-subst">${xhr.statusText}</span>`</span>));
        }
      };
      
      xhr.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Network error'</span>));
      };
      
      xhr.<span class="hljs-property">ontimeout</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Request timeout'</span>));
      };
      
      xhr.<span class="hljs-property">onprogress</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">lengthComputable</span>) {
          <span class="hljs-keyword">const</span> percentComplete = (event.<span class="hljs-property">loaded</span> / event.<span class="hljs-property">total</span>) * <span class="hljs-number">100</span>;
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Upload progress: <span class="hljs-subst">${percentComplete.toFixed(<span class="hljs-number">2</span>)}</span>%`</span>);
        }
      };
      
      xhr.<span class="hljs-title function_">send</span>(data);
    });
  }
  
  <span class="hljs-comment">// Fetch APIåŸºç¡€å®ç°</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      method = <span class="hljs-string">'GET'</span>,
      headers = {},
      body = <span class="hljs-literal">null</span>,
      timeout = <span class="hljs-number">30000</span>,
      credentials = <span class="hljs-string">'same-origin'</span>,
      mode = <span class="hljs-string">'cors'</span>,
      cache = <span class="hljs-string">'default'</span>,
      redirect = <span class="hljs-string">'follow'</span>,
      referrer = <span class="hljs-string">'client'</span>
    } = options;
    
    <span class="hljs-comment">// åˆ›å»ºAbortControllerç”¨äºè¶…æ—¶æ§åˆ¶</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>();
    }, timeout);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, {
        method,
        headers,
        body,
        credentials,
        mode,
        cache,
        redirect,
        referrer,
        signal
      });
      
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-comment">// æ£€æŸ¥å“åº”çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span>);
      }
      
      <span class="hljs-comment">// æ ¹æ®Content-Typeè§£æå“åº”</span>
      <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
      <span class="hljs-keyword">let</span> data;
      
      <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'multipart/form-data'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">formData</span>();
      } <span class="hljs-keyword">else</span> {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
      }
      
      <span class="hljs-keyword">return</span> {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>,
        response
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Request timeout'</span>);
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// æ€§èƒ½å¯¹æ¯”</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">performanceComparison</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> testUrl = <span class="hljs-string">'https://jsonplaceholder.typicode.com/posts/1'</span>;
    <span class="hljs-keyword">const</span> iterations = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">const</span> results = {
      <span class="hljs-attr">xhr</span>: { <span class="hljs-attr">times</span>: [], <span class="hljs-attr">avg</span>: <span class="hljs-number">0</span> },
      <span class="hljs-attr">fetch</span>: { <span class="hljs-attr">times</span>: [], <span class="hljs-attr">avg</span>: <span class="hljs-number">0</span> }
    };
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Starting performance comparison...'</span>);
    
    <span class="hljs-comment">// æµ‹è¯•XHR</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
      <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">xhrRequest</span>(testUrl);
      <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
      results.<span class="hljs-property">xhr</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">push</span>(end - start);
    }
    
    <span class="hljs-comment">// æµ‹è¯•Fetch</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
      <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchRequest</span>(testUrl);
      <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
      results.<span class="hljs-property">fetch</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">push</span>(end - start);
    }
    
    <span class="hljs-comment">// è®¡ç®—å¹³å‡å€¼</span>
    results.<span class="hljs-property">xhr</span>.<span class="hljs-property">avg</span> = results.<span class="hljs-property">xhr</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / iterations;
    results.<span class="hljs-property">fetch</span>.<span class="hljs-property">avg</span> = results.<span class="hljs-property">fetch</span>.<span class="hljs-property">times</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>) / iterations;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Performance results:'</span>, results);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`XHR average: <span class="hljs-subst">${results.xhr.avg.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Fetch average: <span class="hljs-subst">${results.fetch.avg.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    
    <span class="hljs-keyword">return</span> results;
  }
}
</code></pre>
<h5 data-id="heading-3">1.2 Fetch APIçš„å±€é™æ€§åŠè§£å†³æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FetchLimitations</span> {
  <span class="hljs-comment">// å¤„ç†Fetchä¸æ”¯æŒçš„ç‰¹æ€§</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getFetchPolyfills</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> polyfills = {};
    
    <span class="hljs-comment">// 1. è¿›åº¦ç›‘æ§</span>
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'upload'</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(<span class="hljs-string">''</span>))) {
      polyfills.<span class="hljs-property">progress</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
        <span class="hljs-keyword">const</span> { onProgress, ...fetchOptions } = options;
        
        <span class="hljs-comment">// ä½¿ç”¨XHRæ¥è·å–è¿›åº¦</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
          
          xhr.<span class="hljs-title function_">open</span>(options.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>, url);
          
          <span class="hljs-comment">// è®¾ç½®è¯·æ±‚å¤´</span>
          <span class="hljs-keyword">if</span> (options.<span class="hljs-property">headers</span>) {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(options.<span class="hljs-property">headers</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
              xhr.<span class="hljs-title function_">setRequestHeader</span>(key, value);
            });
          }
          
          <span class="hljs-comment">// è¿›åº¦äº‹ä»¶</span>
          <span class="hljs-keyword">if</span> (onProgress) {
            xhr.<span class="hljs-property">upload</span>.<span class="hljs-property">onprogress</span> = onProgress;
            xhr.<span class="hljs-property">onprogress</span> = onProgress;
          }
          
          xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
            <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) {
              <span class="hljs-keyword">let</span> data;
              
              <span class="hljs-keyword">try</span> {
                data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>);
              } <span class="hljs-keyword">catch</span> {
                data = xhr.<span class="hljs-property">responseText</span>;
              }
              
              <span class="hljs-title function_">resolve</span>({
                data,
                <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>,
                <span class="hljs-attr">statusText</span>: xhr.<span class="hljs-property">statusText</span>
              });
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${xhr.status}</span>`</span>));
            }
          };
          
          xhr.<span class="hljs-property">onerror</span> = reject;
          xhr.<span class="hljs-property">ontimeout</span> = reject;
          
          xhr.<span class="hljs-title function_">send</span>(options.<span class="hljs-property">body</span>);
        });
      };
    }
    
    <span class="hljs-comment">// 2. è¶…æ—¶å¤„ç†</span>
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'timeout'</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(<span class="hljs-string">''</span>))) {
      polyfills.<span class="hljs-property">timeout</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
        <span class="hljs-keyword">const</span> { timeout = <span class="hljs-number">30000</span>, ...fetchOptions } = options;
        <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
        <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>(), timeout);
        
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, { ...fetchOptions, <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> })
          .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeoutId));
      };
    }
    
    <span class="hljs-comment">// 3. è¯·æ±‚å–æ¶ˆ</span>
    polyfills.<span class="hljs-property">cancelable</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">url, options = {}</span>) {
      <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
      <span class="hljs-keyword">const</span> promise = <span class="hljs-title function_">fetch</span>(url, { ...options, <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });
      
      <span class="hljs-keyword">return</span> {
        promise,
        <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>()
      };
    };
    
    <span class="hljs-keyword">return</span> polyfills;
  }
  
  <span class="hljs-comment">// å¤„ç†æµå¼å“åº”</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleStreamResponse</span>(<span class="hljs-params">url, onChunk, onComplete</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);
      <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
      <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
      <span class="hljs-keyword">let</span> result = <span class="hljs-string">''</span>;
      
      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
        
        <span class="hljs-keyword">if</span> (done) {
          <span class="hljs-keyword">if</span> (onComplete) <span class="hljs-title function_">onComplete</span>(result);
          <span class="hljs-keyword">break</span>;
        }
        
        <span class="hljs-comment">// å¤„ç†chunk</span>
        <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
        result += chunk;
        
        <span class="hljs-keyword">if</span> (onChunk) <span class="hljs-title function_">onChunk</span>(chunk, result);
      }
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// å¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ </span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">uploadLargeFile</span>(<span class="hljs-params">url, file, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// 1MB chunks</span>
      onProgress,
      onComplete,
      onError
    } = options;
    
    <span class="hljs-comment">// åˆ›å»ºFormData</span>
    <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, file);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileName'</span>, file.<span class="hljs-property">name</span>);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileSize'</span>, file.<span class="hljs-property">size</span>);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunkSize'</span>, chunkSize);
    formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'totalChunks'</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize));
    
    <span class="hljs-comment">// å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼Œä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ </span>
    <span class="hljs-keyword">if</span> (file.<span class="hljs-property">size</span> &gt; chunkSize) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">uploadInChunks</span>(url, file, {
        chunkSize,
        onProgress,
        onComplete,
        onError
      });
    }
    
    <span class="hljs-comment">// æ™®é€šä¸Šä¼ </span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">body</span>: formData
    });
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">uploadInChunks</span>(<span class="hljs-params">url, file, options</span>) {
    <span class="hljs-keyword">const</span> {
      chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,
      onProgress,
      onComplete,
      onError
    } = options;
    
    <span class="hljs-keyword">const</span> totalChunks = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(file.<span class="hljs-property">size</span> / chunkSize);
    <span class="hljs-keyword">const</span> fileId = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>)}</span>`</span>;
    <span class="hljs-keyword">let</span> uploadedChunks = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// ä¸Šä¼ æ¯ä¸ªåˆ†ç‰‡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> chunkIndex = <span class="hljs-number">0</span>; chunkIndex &lt; totalChunks; chunkIndex++) {
      <span class="hljs-keyword">const</span> start = chunkIndex * chunkSize;
      <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, file.<span class="hljs-property">size</span>);
      <span class="hljs-keyword">const</span> chunk = file.<span class="hljs-title function_">slice</span>(start, end);
      
      <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileId'</span>, fileId);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunk'</span>, chunk);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'chunkIndex'</span>, chunkIndex);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'totalChunks'</span>, totalChunks);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileName'</span>, file.<span class="hljs-property">name</span>);
      formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'fileSize'</span>, file.<span class="hljs-property">size</span>);
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/chunk`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">body</span>: formData
        });
        
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Chunk <span class="hljs-subst">${chunkIndex}</span> upload failed`</span>);
        }
        
        uploadedChunks++;
        
        <span class="hljs-comment">// æŠ¥å‘Šè¿›åº¦</span>
        <span class="hljs-keyword">if</span> (onProgress) {
          <span class="hljs-keyword">const</span> progress = (uploadedChunks / totalChunks) * <span class="hljs-number">100</span>;
          <span class="hljs-title function_">onProgress</span>(progress, chunkIndex, totalChunks);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">if</span> (onError) <span class="hljs-title function_">onError</span>(error, chunkIndex);
        <span class="hljs-keyword">throw</span> error;
      }
    }
    
    <span class="hljs-comment">// æ‰€æœ‰åˆ†ç‰‡ä¸Šä¼ å®Œæˆï¼Œåˆå¹¶æ–‡ä»¶</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/merge`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          fileId,
          <span class="hljs-attr">fileName</span>: file.<span class="hljs-property">name</span>,
          totalChunks
        })
      });
      
      <span class="hljs-keyword">if</span> (onComplete) <span class="hljs-title function_">onComplete</span>(response);
      <span class="hljs-keyword">return</span> response;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (onError) <span class="hljs-title function_">onError</span>(error);
      <span class="hljs-keyword">throw</span> error;
    }
  }
}
</code></pre>
<h4 data-id="heading-4">äºŒã€å¢å¼ºå‹Fetchå°è£…</h4>
<h5 data-id="heading-5">2.1 å®Œæ•´çš„HTTPå®¢æˆ·ç«¯å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">baseURL = <span class="hljs-string">''</span>, defaultOptions = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseURL</span> = baseURL;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span> = {
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        ...defaultOptions.<span class="hljs-property">headers</span>
      },
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>,
      <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
      ...defaultOptions
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span> = {
      <span class="hljs-attr">request</span>: [],
      <span class="hljs-attr">response</span>: [],
      <span class="hljs-attr">error</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryConfig</span> = {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">retryDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">retryOn</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>]
    };
    
    <span class="hljs-comment">// åˆå§‹åŒ–è¯·æ±‚é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxConcurrent</span> = <span class="hljs-number">6</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ·»åŠ é»˜è®¤æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addDefaultInterceptors</span>();
  }
  
  <span class="hljs-title function_">addDefaultInterceptors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ è®¤è¯token</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-keyword">async</span> (config) =&gt; {
        <span class="hljs-comment">// ä»localStorageæˆ–cookieè·å–token</span>
        <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'auth_token'</span>) || 
                      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCookie</span>(<span class="hljs-string">'auth_token'</span>);
        
        <span class="hljs-keyword">if</span> (token) {
          config.<span class="hljs-property">headers</span> = {
            ...config.<span class="hljs-property">headers</span>,
            <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>
          };
        }
        
        <span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">method</span>?.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">'get'</span>) {
          <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(config.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
          url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'_t'</span>, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
          config.<span class="hljs-property">url</span> = url.<span class="hljs-title function_">toString</span>();
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç†é€šç”¨é”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-keyword">async</span> (error) =&gt; {
        <span class="hljs-comment">// å¤„ç†è®¤è¯å¤±è´¥</span>
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
          <span class="hljs-comment">// åˆ·æ–°tokenæˆ–è·³è½¬åˆ°ç™»å½•é¡µ</span>
          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleUnauthorized</span>();
        }
        
        <span class="hljs-comment">// å¤„ç†æœåŠ¡å™¨é”™è¯¯</span>
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Server error:'</span>, error);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-comment">// æ ¸å¿ƒè¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> requestId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRequestId</span>(url, options);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²æœ‰ç›¸åŒçš„è¯·æ±‚åœ¨å¤„ç†ä¸­</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">has</span>(requestId)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">get</span>(requestId);
    }
    
    <span class="hljs-comment">// åˆå¹¶é…ç½®</span>
    <span class="hljs-keyword">const</span> config = {
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseURL</span> ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.baseURL}</span><span class="hljs-subst">${url}</span>`</span> : url,
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span>,
      ...options
    };
    
    <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">let</span> processedConfig = config;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>) {
      processedConfig = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(processedConfig);
    }
    
    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚Promise</span>
    <span class="hljs-keyword">const</span> requestPromise = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeRequest</span>(processedConfig, requestId);
    
    <span class="hljs-comment">// å­˜å‚¨pendingè¯·æ±‚</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">set</span>(requestId, requestPromise);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> requestPromise;
      
      <span class="hljs-comment">// æ‰§è¡Œå“åº”æ‹¦æˆªå™¨</span>
      <span class="hljs-keyword">let</span> processedResponse = response;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>) {
        processedResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(processedResponse);
      }
      
      <span class="hljs-keyword">return</span> processedResponse;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ‰§è¡Œé”™è¯¯æ‹¦æˆªå™¨</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> interceptor <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">error</span>) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">interceptor</span>(error, processedConfig);
      }
      
      <span class="hljs-keyword">throw</span> error;
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-comment">// æ¸…ç†pendingè¯·æ±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">delete</span>(requestId);
    }
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeRequest</span>(<span class="hljs-params">config, requestId</span>) {
    <span class="hljs-keyword">const</span> {
      url,
      method = <span class="hljs-string">'GET'</span>,
      headers,
      body,
      timeout,
      signal,
      <span class="hljs-attr">cache</span>: cacheOption,
      ...restOptions
    } = config;
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">'GET'</span> &amp;&amp; cacheOption) {
      <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFromCache</span>(url, cacheOption);
      <span class="hljs-keyword">if</span> (cached) {
        <span class="hljs-keyword">return</span> cached;
      }
    }
    
    <span class="hljs-comment">// åˆ›å»ºAbortControllerç”¨äºè¶…æ—¶æ§åˆ¶</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> abortSignal = signal || controller.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
    <span class="hljs-keyword">const</span> timeoutId = timeout ? <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>();
    }, timeout) : <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> fetchOptions = {
        method,
        headers,
        <span class="hljs-attr">signal</span>: abortSignal,
        ...restOptions
      };
      
      <span class="hljs-comment">// å¤„ç†è¯·æ±‚ä½“</span>
      <span class="hljs-keyword">if</span> (body) {
        <span class="hljs-keyword">if</span> (body <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">FormData</span> || body <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">URLSearchParams</span>) {
          fetchOptions.<span class="hljs-property">body</span> = body;
          <span class="hljs-comment">// FormDataä¼šè‡ªå·±è®¾ç½®Content-Type</span>
          <span class="hljs-keyword">if</span> (fetchOptions.<span class="hljs-property">headers</span> &amp;&amp; fetchOptions.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>]) {
            <span class="hljs-keyword">delete</span> fetchOptions.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>];
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> body === <span class="hljs-string">'object'</span>) {
          fetchOptions.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(body);
        } <span class="hljs-keyword">else</span> {
          fetchOptions.<span class="hljs-property">body</span> = body;
        }
      }
      
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, fetchOptions);
      
      <span class="hljs-comment">// æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">if</span> (timeoutId) <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-comment">// è§£æå“åº”</span>
      <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
      <span class="hljs-keyword">let</span> data;
      
      <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'multipart/form-data'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">formData</span>();
      } <span class="hljs-keyword">else</span> {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
      }
      
      <span class="hljs-keyword">const</span> result = {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>,
        config,
        requestId
      };
      
      <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
      <span class="hljs-keyword">if</span> (method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">'GET'</span> &amp;&amp; cacheOption &amp;&amp; response.<span class="hljs-property">ok</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setCache</span>(url, result, cacheOption);
      }
      
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(response, data, config);
      }
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// æ¸…é™¤è¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">if</span> (timeoutId) <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'Request timeout'</span>, config);
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// åˆ›å»ºé”™è¯¯å¯¹è±¡</span>
  <span class="hljs-title function_">createError</span>(<span class="hljs-params">response, data, config</span>) {
    <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
      response ? <span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>: <span class="hljs-subst">${response.statusText}</span>`</span> : <span class="hljs-string">'Network Error'</span>
    );
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(error, {
      config,
      <span class="hljs-attr">response</span>: response ? {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>
      } : <span class="hljs-literal">null</span>,
      <span class="hljs-attr">isHttpError</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-keyword">return</span> error;
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚ID</span>
  <span class="hljs-title function_">generateRequestId</span>(<span class="hljs-params">url, options</span>) {
    <span class="hljs-keyword">const</span> { method = <span class="hljs-string">'GET'</span>, body } = options;
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> bodyHash = body ? <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashString</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(body)) : <span class="hljs-string">''</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${method}</span>_<span class="hljs-subst">${url}</span>_<span class="hljs-subst">${bodyHash}</span>_<span class="hljs-subst">${timestamp}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç®€å•çš„å­—ç¬¦ä¸²å“ˆå¸Œ</span>
  <span class="hljs-title function_">hashString</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> char = str.<span class="hljs-title function_">charCodeAt</span>(i);
      hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;
      hash = hash &amp; hash;
    }
    <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>);
  }
  
  <span class="hljs-comment">// HTTPæ–¹æ³•å¿«æ·æ–¹å¼</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span> });
  }
  
  <span class="hljs-title function_">post</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">put</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">patch</span>(<span class="hljs-params">url, data, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'PATCH'</span>, <span class="hljs-attr">body</span>: data });
  }
  
  <span class="hljs-title function_">delete</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span> });
  }
  
  <span class="hljs-title function_">head</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'HEAD'</span> });
  }
  
  <span class="hljs-title function_">options</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(url, { ...options, <span class="hljs-attr">method</span>: <span class="hljs-string">'OPTIONS'</span> });
  }
  
  <span class="hljs-comment">// æ‹¦æˆªå™¨ç®¡ç†</span>
  interceptors = {
    <span class="hljs-attr">request</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>(handler);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-attr">response</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>({ onFulfilled, onRejected });
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> 
            h.<span class="hljs-property">onFulfilled</span> === onFulfilled &amp;&amp; h.<span class="hljs-property">onRejected</span> === onRejected
          );
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> 
          h.<span class="hljs-property">onFulfilled</span> === handler.<span class="hljs-property">onFulfilled</span> &amp;&amp; 
          h.<span class="hljs-property">onRejected</span> === handler.<span class="hljs-property">onRejected</span>
        );
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    },
    <span class="hljs-attr">error</span>: {
      <span class="hljs-attr">handlers</span>: [],
      <span class="hljs-title function_">use</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>(handler);
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
          <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        };
      },
      <span class="hljs-title function_">eject</span>(<span class="hljs-params">handler</span>) {
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">indexOf</span>(handler);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    }
  };
  
  <span class="hljs-comment">// ç¼“å­˜ç®¡ç†</span>
  <span class="hljs-title function_">getFromCache</span>(<span class="hljs-params">url, cacheOption</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">has</span>(url)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(url);
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
    <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'no-cache'</span> || 
        (cached.<span class="hljs-property">expiry</span> &amp;&amp; cached.<span class="hljs-property">expiry</span> &lt; now)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">return</span> cached.<span class="hljs-property">data</span>;
  }
  
  <span class="hljs-title function_">setCache</span>(<span class="hljs-params">url, data, cacheOption</span>) {
    <span class="hljs-keyword">let</span> expiry = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> cacheOption === <span class="hljs-string">'number'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + cacheOption; <span class="hljs-comment">// æ¯«ç§’</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'short'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + (<span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cacheOption === <span class="hljs-string">'long'</span>) {
      expiry = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1å°æ—¶</span>
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(url, { data, expiry });
    
    <span class="hljs-comment">// æ¸…ç†è¿‡æœŸç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupCache</span>();
  }
  
  <span class="hljs-title function_">cleanupCache</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [url, cached] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (cached.<span class="hljs-property">expiry</span> &amp;&amp; cached.<span class="hljs-property">expiry</span> &lt; now) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
      }
    }
  }
  
  <span class="hljs-comment">// æ¸…é™¤ç¼“å­˜</span>
  <span class="hljs-title function_">clearCache</span>(<span class="hljs-params">url = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (url) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(url);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">clear</span>();
    }
  }
  
  <span class="hljs-comment">// ä»cookieè·å–å€¼</span>
  <span class="hljs-title function_">getCookie</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">const</span> match = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">match</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">'(^| )'</span> + name + <span class="hljs-string">'=([^;]+)'</span>));
    <span class="hljs-keyword">return</span> match ? <span class="hljs-built_in">decodeURIComponent</span>(match[<span class="hljs-number">2</span>]) : <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-comment">// å¤„ç†æœªæˆæƒ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleUnauthorized</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å°è¯•åˆ·æ–°token</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> refreshToken = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refresh_token'</span>);
      <span class="hljs-keyword">if</span> (refreshToken) {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/refresh'</span>, {
          <span class="hljs-attr">refresh_token</span>: refreshToken
        });
        
        <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">access_token</span>) {
          <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'auth_token'</span>, response.<span class="hljs-property">data</span>.<span class="hljs-property">access_token</span>);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œæ¸…é™¤æœ¬åœ°è®¤è¯ä¿¡æ¯</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'auth_token'</span>);
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'refresh_token'</span>);
      
      <span class="hljs-comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ‰¹é‡è¯·æ±‚</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">all</span>(<span class="hljs-params">requests</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(requests);
  }
  
  <span class="hljs-comment">// è¯·æ±‚å¹¶å‘æ§åˆ¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">spread</span>(<span class="hljs-params">requests, maxConcurrent = <span class="hljs-variable language_">this</span>.maxConcurrent</span>) {
    <span class="hljs-keyword">const</span> results = [];
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (index &gt;= requests.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-keyword">const</span> currentIndex = index++;
      <span class="hljs-keyword">const</span> request = requests[currentIndex];
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
        results[currentIndex] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'fulfilled'</span>, <span class="hljs-attr">value</span>: result };
      } <span class="hljs-keyword">catch</span> (error) {
        results[currentIndex] = { <span class="hljs-attr">status</span>: <span class="hljs-string">'rejected'</span>, <span class="hljs-attr">reason</span>: error };
      }
      
      <span class="hljs-comment">// é€’å½’æ‰§è¡Œä¸‹ä¸€ä¸ª</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">runNext</span>();
    };
    
    <span class="hljs-comment">// åˆ›å»ºå¹¶å‘æ‰§è¡Œå™¨</span>
    <span class="hljs-keyword">const</span> concurrentPromises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(maxConcurrent, requests.<span class="hljs-property">length</span>); i++) {
      concurrentPromises.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">runNext</span>());
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(concurrentPromises);
    <span class="hljs-keyword">return</span> results;
  }
}
</code></pre>
<h5 data-id="heading-6">2.2 è¯·æ±‚æ‹¦æˆªå™¨çš„é«˜çº§å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedInterceptor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">httpClient</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span> = httpClient;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAdvancedInterceptors</span>();
  }
  
  <span class="hljs-title function_">setupAdvancedInterceptors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. è¯·æ±‚èŠ‚æµ/é˜²æŠ–æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addThrottleInterceptor</span>();
    
    <span class="hljs-comment">// 2. è¯·æ±‚åˆå¹¶æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addBatchInterceptor</span>();
    
    <span class="hljs-comment">// 3. è¯·æ±‚é‡è¯•æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addRetryInterceptor</span>();
    
    <span class="hljs-comment">// 4. è¯·æ±‚ç¼“å­˜æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addCacheInterceptor</span>();
    
    <span class="hljs-comment">// 5. è¯·æ±‚æ—¥å¿—æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addLoggingInterceptor</span>();
    
    <span class="hljs-comment">// 6. æ€§èƒ½ç›‘æ§æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addPerformanceInterceptor</span>();
  }
  
  <span class="hljs-title function_">addThrottleInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> requestTimestamps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">const</span> requestQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-keyword">async</span> (config) =&gt; {
        <span class="hljs-keyword">const</span> { throttle = <span class="hljs-literal">false</span>, debounce = <span class="hljs-literal">false</span>, delay = <span class="hljs-number">1000</span> } = config;
        
        <span class="hljs-keyword">if</span> (!throttle &amp;&amp; !debounce) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-keyword">const</span> requestKey = <span class="hljs-string">`<span class="hljs-subst">${config.method}</span>_<span class="hljs-subst">${config.url}</span>`</span>;
        
        <span class="hljs-comment">// èŠ‚æµå¤„ç†</span>
        <span class="hljs-keyword">if</span> (throttle) {
          <span class="hljs-keyword">const</span> lastRequestTime = requestTimestamps.<span class="hljs-title function_">get</span>(requestKey) || <span class="hljs-number">0</span>;
          <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
          
          <span class="hljs-keyword">if</span> (now - lastRequestTime &lt; delay) {
            <span class="hljs-comment">// ä»åœ¨èŠ‚æµæœŸå†…ï¼Œå»¶è¿Ÿè¯·æ±‚</span>
            <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
              <span class="hljs-built_in">setTimeout</span>(resolve, delay - (now - lastRequestTime));
            });
          }
          
          requestTimestamps.<span class="hljs-title function_">set</span>(requestKey, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
        }
        
        <span class="hljs-comment">// é˜²æŠ–å¤„ç†</span>
        <span class="hljs-keyword">if</span> (debounce) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
            <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
            <span class="hljs-keyword">if</span> (requestQueue.<span class="hljs-title function_">has</span>(requestKey)) {
              <span class="hljs-built_in">clearTimeout</span>(requestQueue.<span class="hljs-title function_">get</span>(requestKey));
            }
            
            <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
            <span class="hljs-keyword">const</span> timerId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              requestQueue.<span class="hljs-title function_">delete</span>(requestKey);
              <span class="hljs-title function_">resolve</span>(config);
            }, delay);
            
            requestQueue.<span class="hljs-title function_">set</span>(requestKey, timerId);
          });
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
  }
  
  <span class="hljs-title function_">addBatchInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> batchRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BATCH_DELAY</span> = <span class="hljs-number">100</span>; <span class="hljs-comment">// 100msæ‰¹å¤„ç†çª—å£</span>
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { batch = <span class="hljs-literal">false</span>, batchKey } = config;
        
        <span class="hljs-keyword">if</span> (!batch) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-keyword">const</span> key = batchKey || config.<span class="hljs-property">url</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>];
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (!batchRequests.<span class="hljs-title function_">has</span>(key)) {
            batchRequests.<span class="hljs-title function_">set</span>(key, {
              <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">requests</span>: []
            });
          }
          
          <span class="hljs-keyword">const</span> batchInfo = batchRequests.<span class="hljs-title function_">get</span>(key);
          batchInfo.<span class="hljs-property">requests</span>.<span class="hljs-title function_">push</span>({ config, resolve });
          
          <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
          <span class="hljs-keyword">if</span> (batchInfo.<span class="hljs-property">timer</span>) {
            <span class="hljs-built_in">clearTimeout</span>(batchInfo.<span class="hljs-property">timer</span>);
          }
          
          <span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
          batchInfo.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
            <span class="hljs-keyword">const</span> requests = batchInfo.<span class="hljs-property">requests</span>;
            batchRequests.<span class="hljs-title function_">delete</span>(key);
            
            <span class="hljs-comment">// åˆå¹¶è¯·æ±‚</span>
            <span class="hljs-keyword">const</span> mergedConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeBatchRequests</span>(requests);
            <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">request</span>(mergedConfig.<span class="hljs-property">url</span>, mergedConfig);
            
            <span class="hljs-comment">// åˆ†å‘å“åº”</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">distributeBatchResponse</span>(requests, response);
          }, <span class="hljs-variable constant_">BATCH_DELAY</span>);
        });
      }
    );
  }
  
  <span class="hljs-title function_">mergeBatchRequests</span>(<span class="hljs-params">requests</span>) {
    <span class="hljs-comment">// ç®€å•ç¤ºä¾‹ï¼šåˆå¹¶GETè¯·æ±‚å‚æ•°</span>
    <span class="hljs-keyword">const</span> firstConfig = requests[<span class="hljs-number">0</span>].<span class="hljs-property">config</span>;
    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(firstConfig.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
    
    <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰è¯·æ±‚çš„å‚æ•°</span>
    <span class="hljs-keyword">const</span> allParams = [];
    requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ config }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> requestUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(config.<span class="hljs-property">url</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">origin</span>);
      <span class="hljs-keyword">const</span> params = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(requestUrl.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">entries</span>());
      allParams.<span class="hljs-title function_">push</span>(params);
    });
    
    <span class="hljs-comment">// è®¾ç½®æ‰¹å¤„ç†å‚æ•°</span>
    url.<span class="hljs-property">searchParams</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'batch'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(allParams));
    
    <span class="hljs-keyword">return</span> {
      ...firstConfig,
      <span class="hljs-attr">url</span>: url.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">batch</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// é˜²æ­¢é€’å½’</span>
    };
  }
  
  <span class="hljs-title function_">distributeBatchResponse</span>(<span class="hljs-params">requests, batchResponse</span>) {
    <span class="hljs-comment">// è¿™é‡Œéœ€è¦æ ¹æ®å®é™…APIçš„æ‰¹å¤„ç†å“åº”æ ¼å¼æ¥åˆ†å‘</span>
    <span class="hljs-comment">// å‡è®¾APIè¿”å›æ•°ç»„ï¼Œé¡ºåºå¯¹åº”è¯·æ±‚é¡ºåº</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(batchResponse.<span class="hljs-property">data</span>)) {
      requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ resolve }, index</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> individualResponse = {
          ...batchResponse,
          <span class="hljs-attr">data</span>: batchResponse.<span class="hljs-property">data</span>[index]
        };
        <span class="hljs-title function_">resolve</span>(individualResponse);
      });
    }
  }
  
  <span class="hljs-title function_">addRetryInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-keyword">async</span> (error) =&gt; {
        <span class="hljs-keyword">const</span> config = error.<span class="hljs-property">config</span> || {};
        <span class="hljs-keyword">const</span> { retry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">retryConfig</span>, __retryCount = <span class="hljs-number">0</span> } = config;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åº”è¯¥é‡è¯•</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldRetry</span>(error, retry, __retryCount)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
        }
        
        <span class="hljs-comment">// å¢åŠ é‡è¯•è®¡æ•°</span>
        config.<span class="hljs-property">__retryCount</span> = __retryCount + <span class="hljs-number">1</span>;
        
        <span class="hljs-comment">// è®¡ç®—å»¶è¿Ÿæ—¶é—´ï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
        <span class="hljs-keyword">const</span> delay = retry.<span class="hljs-property">retryDelay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, __retryCount);
        
        <span class="hljs-comment">// ç­‰å¾…å»¶è¿Ÿæ—¶é—´</span>
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
        
        <span class="hljs-comment">// é‡è¯•è¯·æ±‚</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">request</span>(config.<span class="hljs-property">url</span>, config);
      }
    );
  }
  
  <span class="hljs-title function_">shouldRetry</span>(<span class="hljs-params">error, retryConfig, retryCount</span>) {
    <span class="hljs-comment">// æ£€æŸ¥æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (retryCount &gt;= retryConfig.<span class="hljs-property">maxRetries</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯ç±»å‹</span>
    <span class="hljs-keyword">if</span> (!error.<span class="hljs-property">response</span>) {
      <span class="hljs-comment">// ç½‘ç»œé”™è¯¯åº”è¯¥é‡è¯•</span>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€ç </span>
    <span class="hljs-keyword">const</span> status = error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>;
    <span class="hljs-keyword">return</span> retryConfig.<span class="hljs-property">retryOn</span>.<span class="hljs-title function_">includes</span>(status);
  }
  
  <span class="hljs-title function_">addCacheInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> { cache = <span class="hljs-literal">false</span>, forceRefresh = <span class="hljs-literal">false</span> } = config;
        
        <span class="hljs-keyword">if</span> (!cache || forceRefresh) <span class="hljs-keyword">return</span> config;
        
        <span class="hljs-comment">// æ£€æŸ¥å†…å­˜ç¼“å­˜</span>
        <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-title function_">getFromCache</span>(config.<span class="hljs-property">url</span>, cache);
        <span class="hljs-keyword">if</span> (cached) {
          <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”ï¼Œä¸å†å‘é€è¯·æ±‚</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>({
            config,
            <span class="hljs-attr">response</span>: cached,
            <span class="hljs-attr">isCacheHit</span>: <span class="hljs-literal">true</span>
          });
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å¤„ç†ç¼“å­˜å‘½ä¸­</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response,
      <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isCacheHit</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(error.<span class="hljs-property">response</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-title function_">addLoggingInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¯·æ±‚æ—¥å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`ğŸŒ Request: <span class="hljs-subst">${config.method}</span> <span class="hljs-subst">${config.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Config:'</span>, config);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³</span>
        config.<span class="hljs-property">__startTime</span> = performance.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-comment">// å“åº”æ—¥å¿—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> duration = performance.<span class="hljs-title function_">now</span>() - response.<span class="hljs-property">config</span>.<span class="hljs-property">__startTime</span>;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`âœ… Response: <span class="hljs-subst">${response.status}</span> <span class="hljs-subst">${response.config.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, response);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Duration: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// å‘é€æ€§èƒ½æ•°æ®åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendMetrics</span>({
          <span class="hljs-attr">url</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">url</span>,
          <span class="hljs-attr">method</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">method</span>,
          <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
          duration,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-keyword">return</span> response;
      },
      <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> duration = error.<span class="hljs-property">config</span> ? 
          performance.<span class="hljs-title function_">now</span>() - error.<span class="hljs-property">config</span>.<span class="hljs-property">__startTime</span> : <span class="hljs-number">0</span>;
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">`âŒ Error: <span class="hljs-subst">${error.config?.url}</span>`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Error:'</span>, error);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Duration: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
        
        <span class="hljs-comment">// å‘é€é”™è¯¯æ•°æ®åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendErrorMetrics</span>({
          <span class="hljs-attr">url</span>: error.<span class="hljs-property">config</span>?.<span class="hljs-property">url</span>,
          <span class="hljs-attr">method</span>: error.<span class="hljs-property">config</span>?.<span class="hljs-property">method</span>,
          <span class="hljs-attr">status</span>: error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span>,
          duration,
          <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    );
  }
  
  <span class="hljs-title function_">addPerformanceInterceptor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> performanceData = [];
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_PERFORMANCE_ENTRIES</span> = <span class="hljs-number">100</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-comment">// ä½¿ç”¨Performance APIæ ‡è®°è¯·æ±‚å¼€å§‹</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-property">mark</span>) {
          <span class="hljs-keyword">const</span> markName = <span class="hljs-string">`request_start_<span class="hljs-subst">${config.url.replace(/[^a-z0-<span class="hljs-number">9</span>]/gi, <span class="hljs-string">'_'</span>)}</span>`</span>;
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">mark</span>(markName);
          config.<span class="hljs-property">__performanceMark</span> = markName;
        }
        
        <span class="hljs-keyword">return</span> config;
      }
    );
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpClient</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
      <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-comment">// æµ‹é‡è¯·æ±‚æ€§èƒ½</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span> &amp;&amp; response.<span class="hljs-property">config</span>.<span class="hljs-property">__performanceMark</span>) {
          <span class="hljs-keyword">const</span> markName = response.<span class="hljs-property">config</span>.<span class="hljs-property">__performanceMark</span>;
          <span class="hljs-keyword">const</span> measureName = <span class="hljs-string">`request_<span class="hljs-subst">${response.config.url.replace(/[^a-z0-<span class="hljs-number">9</span>]/gi, <span class="hljs-string">'_'</span>)}</span>`</span>;
          
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">mark</span>(<span class="hljs-string">`<span class="hljs-subst">${markName}</span>_end`</span>);
          <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">measure</span>(
            measureName,
            markName,
            <span class="hljs-string">`<span class="hljs-subst">${markName}</span>_end`</span>
          );
          
          <span class="hljs-comment">// è·å–æµ‹é‡ç»“æœ</span>
          <span class="hljs-keyword">const</span> measures = <span class="hljs-variable language_">window</span>.<span class="hljs-property">performance</span>.<span class="hljs-title function_">getEntriesByName</span>(measureName);
          <span class="hljs-keyword">if</span> (measures.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">const</span> measure = measures[<span class="hljs-number">0</span>];
            
            performanceData.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">url</span>: response.<span class="hljs-property">config</span>.<span class="hljs-property">url</span>,
              <span class="hljs-attr">duration</span>: measure.<span class="hljs-property">duration</span>,
              <span class="hljs-attr">startTime</span>: measure.<span class="hljs-property">startTime</span>,
              <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
            });
            
            <span class="hljs-comment">// é™åˆ¶æ•°æ®å¤§å°</span>
            <span class="hljs-keyword">if</span> (performanceData.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_PERFORMANCE_ENTRIES</span>) {
              performanceData.<span class="hljs-title function_">shift</span>();
            }
          }
        }
        
        <span class="hljs-keyword">return</span> response;
      }
    );
  }
  
  <span class="hljs-title function_">sendMetrics</span>(<span class="hljs-params">metric</span>) {
    <span class="hljs-comment">// å‘é€åˆ°ç›‘æ§ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼šGoogle Analyticsï¼Œè‡ªå»ºç›‘æ§ç­‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">gtag</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">gtag</span>(<span class="hljs-string">'event'</span>, <span class="hljs-string">'request_completed'</span>, metric);
    }
    
    <span class="hljs-comment">// æˆ–è€…å‘é€åˆ°åç«¯</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">sendBeacon</span>) {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(metric)], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span> });
      navigator.<span class="hljs-title function_">sendBeacon</span>(<span class="hljs-string">'/api/metrics'</span>, data);
    }
  }
  
  <span class="hljs-title function_">sendErrorMetrics</span>(<span class="hljs-params">errorMetric</span>) {
    <span class="hljs-comment">// å‘é€é”™è¯¯ç›‘æ§</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">Rollbar</span>) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">Rollbar</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'HTTP Request Error'</span>, errorMetric);
    }
    
    <span class="hljs-comment">// å‘é€åˆ°åç«¯</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">sendBeacon</span>) {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(errorMetric)], { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span> });
      navigator.<span class="hljs-title function_">sendBeacon</span>(<span class="hljs-string">'/api/errors'</span>, data);
    }
  }
  
  <span class="hljs-comment">// è·å–æ€§èƒ½æŠ¥å‘Š</span>
  <span class="hljs-title function_">getPerformanceReport</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> totalRequests = performanceData.<span class="hljs-property">length</span>;
    
    <span class="hljs-keyword">if</span> (totalRequests === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">averageDuration</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">totalRequests</span>: <span class="hljs-number">0</span> };
    }
    
    <span class="hljs-keyword">const</span> totalDuration = performanceData.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, entry</span>) =&gt;</span> sum + entry.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> averageDuration = totalDuration / totalRequests;
    
    <span class="hljs-comment">// æŒ‰URLåˆ†ç»„</span>
    <span class="hljs-keyword">const</span> urlStats = {};
    performanceData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (!urlStats[entry.<span class="hljs-property">url</span>]) {
        urlStats[entry.<span class="hljs-property">url</span>] = {
          <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">totalDuration</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">durations</span>: []
        };
      }
      
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">count</span>++;
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">totalDuration</span> += entry.<span class="hljs-property">duration</span>;
      urlStats[entry.<span class="hljs-property">url</span>].<span class="hljs-property">durations</span>.<span class="hljs-title function_">push</span>(entry.<span class="hljs-property">duration</span>);
    });
    
    <span class="hljs-comment">// è®¡ç®—æ¯ä¸ªURLçš„å¹³å‡å€¼</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(urlStats).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> stats = urlStats[url];
      stats.<span class="hljs-property">averageDuration</span> = stats.<span class="hljs-property">totalDuration</span> / stats.<span class="hljs-property">count</span>;
      
      <span class="hljs-comment">// è®¡ç®—p95</span>
      stats.<span class="hljs-property">durations</span>.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);
      <span class="hljs-keyword">const</span> p95Index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(stats.<span class="hljs-property">durations</span>.<span class="hljs-property">length</span> * <span class="hljs-number">0.95</span>);
      stats.<span class="hljs-property">p95</span> = stats.<span class="hljs-property">durations</span>[p95Index];
    });
    
    <span class="hljs-keyword">return</span> {
      totalRequests,
      averageDuration,
      urlStats,
      <span class="hljs-attr">recentRequests</span>: performanceData.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">10</span>)
    };
  }
}
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€è¯·æ±‚å–æ¶ˆä¸å¹¶å‘æ§åˆ¶</h4>
<h5 data-id="heading-8">3.1 é«˜çº§è¯·æ±‚å–æ¶ˆæœºåˆ¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestCancellation</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelSources</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-comment">// åˆ›å»ºå–æ¶ˆä»¤ç‰Œ</span>
  <span class="hljs-title function_">createCancelToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> source = {
      <span class="hljs-attr">token</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">cancel</span>: <span class="hljs-literal">null</span>
    };
    
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      source.<span class="hljs-property">cancel</span> = <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(reason || <span class="hljs-string">'Request cancelled'</span>));
      };
    });
    
    source.<span class="hljs-property">token</span> = token;
    <span class="hljs-keyword">const</span> tokenId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateTokenId</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelSources</span>.<span class="hljs-title function_">set</span>(tokenId, source);
    
    <span class="hljs-keyword">return</span> {
      token,
      <span class="hljs-attr">cancel</span>: source.<span class="hljs-property">cancel</span>,
      tokenId
    };
  }
  
  <span class="hljs-comment">// ä¸ºè¯·æ±‚æ·»åŠ å–æ¶ˆæ”¯æŒ</span>
  <span class="hljs-title function_">withCancellation</span>(<span class="hljs-params">requestPromise, cancelToken, requestId</span>) {
    <span class="hljs-keyword">if</span> (!cancelToken) <span class="hljs-keyword">return</span> requestPromise;
    
    <span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> signal = abortController.<span class="hljs-property">signal</span>;
    
    <span class="hljs-comment">// åŒ…è£…è¯·æ±‚ä»¥æ”¯æŒå–æ¶ˆ</span>
    <span class="hljs-keyword">const</span> wrappedPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([
      requestPromise,
      cancelToken.<span class="hljs-title function_">then</span>(
        <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled by token'</span>))),
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
        signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request aborted'</span>));
        });
      })
    ]);
    
    <span class="hljs-comment">// å­˜å‚¨å–æ¶ˆæ§åˆ¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">set</span>(requestId, abortController);
    
    <span class="hljs-comment">// æ¸…ç†å‡½æ•°</span>
    wrappedPromise.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">delete</span>(requestId);
    });
    
    <span class="hljs-keyword">return</span> wrappedPromise;
  }
  
  <span class="hljs-comment">// å–æ¶ˆç‰¹å®šè¯·æ±‚</span>
  <span class="hljs-title function_">cancelRequest</span>(<span class="hljs-params">requestId, reason</span>) {
    <span class="hljs-keyword">const</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">get</span>(requestId);
    <span class="hljs-keyword">if</span> (controller) {
      controller.<span class="hljs-title function_">abort</span>(reason);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">delete</span>(requestId);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// å–æ¶ˆä¸€ç»„è¯·æ±‚</span>
  <span class="hljs-title function_">cancelGroup</span>(<span class="hljs-params">groupId, reason</span>) {
    <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
    <span class="hljs-keyword">if</span> (!group) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    group.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">requestId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(requestId, reason);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-comment">// å–æ¶ˆæ‰€æœ‰è¯·æ±‚</span>
  <span class="hljs-title function_">cancelAll</span>(<span class="hljs-params">reason</span>) {
    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelTokens</span>.<span class="hljs-title function_">keys</span>()).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">requestId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(requestId, reason);
    });
    
    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">keys</span>()).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">groupId</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelGroup</span>(groupId, reason);
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-comment">// å°†è¯·æ±‚æ·»åŠ åˆ°ç»„</span>
  <span class="hljs-title function_">addToGroup</span>(<span class="hljs-params">requestId, groupId</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">has</span>(groupId)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">set</span>(groupId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId).<span class="hljs-title function_">add</span>(requestId);
    
    <span class="hljs-comment">// è¿”å›ç§»é™¤å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
      <span class="hljs-keyword">if</span> (group) {
        group.<span class="hljs-title function_">delete</span>(requestId);
        <span class="hljs-keyword">if</span> (group.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
        }
      }
    };
  }
  
  <span class="hljs-comment">// ç”Ÿæˆä»¤ç‰ŒID</span>
  <span class="hljs-title function_">generateTokenId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`token_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// åˆ›å»ºç«é€Ÿè¯·æ±‚ï¼ˆç¬¬ä¸€ä¸ªæˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ï¼‰</span>
  <span class="hljs-title function_">createRace</span>(<span class="hljs-params">requests, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      cancelPrevious = <span class="hljs-literal">true</span>,
      groupId = <span class="hljs-string">`race_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>
    } = options;
    
    <span class="hljs-comment">// å¦‚æœå–æ¶ˆä¹‹å‰çš„è¯·æ±‚</span>
    <span class="hljs-keyword">if</span> (cancelPrevious) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelGroup</span>(groupId, <span class="hljs-string">'Superseded by new request'</span>);
    }
    
    <span class="hljs-keyword">const</span> racePromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>(requests);
    
    <span class="hljs-comment">// ä¸ºæ¯ä¸ªè¯·æ±‚æ·»åŠ åˆ°ç»„</span>
    requests.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">request, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> requestId = <span class="hljs-string">`<span class="hljs-subst">${groupId}</span>_<span class="hljs-subst">${index}</span>`</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addToGroup</span>(requestId, groupId);
      
      <span class="hljs-comment">// è¯·æ±‚å®Œæˆåä»ç»„ä¸­ç§»é™¤</span>
      request.<span class="hljs-title function_">then</span>(
        <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeFromGroup</span>(requestId, groupId),
        <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeFromGroup</span>(requestId, groupId)
      );
    });
    
    <span class="hljs-keyword">return</span> racePromise;
  }
  
  <span class="hljs-comment">// ä»ç»„ä¸­ç§»é™¤è¯·æ±‚</span>
  <span class="hljs-title function_">removeFromGroup</span>(<span class="hljs-params">requestId, groupId</span>) {
    <span class="hljs-keyword">const</span> group = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">get</span>(groupId);
    <span class="hljs-keyword">if</span> (group) {
      group.<span class="hljs-title function_">delete</span>(requestId);
      <span class="hljs-keyword">if</span> (group.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestGroups</span>.<span class="hljs-title function_">delete</span>(groupId);
      }
    }
  }
  
  <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚æ± </span>
  <span class="hljs-title function_">createRequestPool</span>(<span class="hljs-params">maxConcurrent = <span class="hljs-number">5</span></span>) {
    <span class="hljs-keyword">const</span> queue = [];
    <span class="hljs-keyword">let</span> activeCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">runNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (activeCount &gt;= maxConcurrent || queue.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>;
      }
      
      activeCount++;
      <span class="hljs-keyword">const</span> { request, resolve, reject } = queue.<span class="hljs-title function_">shift</span>();
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
        <span class="hljs-title function_">resolve</span>(result);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">reject</span>(error);
      } <span class="hljs-keyword">finally</span> {
        activeCount--;
        <span class="hljs-title function_">runNext</span>();
      }
    };
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">enqueue</span> = (<span class="hljs-params">request</span>) =&gt; {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        queue.<span class="hljs-title function_">push</span>({ request, resolve, reject });
        <span class="hljs-title function_">runNext</span>();
      });
    };
    
    <span class="hljs-keyword">return</span> {
      enqueue,
      <span class="hljs-attr">getQueueSize</span>: <span class="hljs-function">() =&gt;</span> queue.<span class="hljs-property">length</span>,
      <span class="hljs-attr">getActiveCount</span>: <span class="hljs-function">() =&gt;</span> activeCount
    };
  }
  
  <span class="hljs-comment">// æ‰¹é‡è¯·æ±‚çš„å¹¶å‘æ§åˆ¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">batchWithConcurrency</span>(<span class="hljs-params">requests, concurrency = <span class="hljs-number">3</span></span>) {
    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(requests.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">let</span> currentIndex = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (currentIndex &gt;= requests.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-keyword">const</span> index = currentIndex++;
      <span class="hljs-keyword">const</span> request = requests[index];
      
      <span class="hljs-keyword">try</span> {
        results[index] = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        results[index] = error;
      }
      
      <span class="hljs-comment">// æ‰§è¡Œä¸‹ä¸€ä¸ª</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">executeNext</span>();
    };
    
    <span class="hljs-comment">// åˆ›å»ºå¹¶å‘çš„æ‰§è¡Œå™¨</span>
    <span class="hljs-keyword">const</span> concurrentPromises = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(concurrency, requests.<span class="hljs-property">length</span>); i++) {
      concurrentPromises.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">executeNext</span>());
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(concurrentPromises);
    <span class="hljs-keyword">return</span> results;
  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰å–æ¶ˆé”™è¯¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestCancellationError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message = <span class="hljs-string">'Request cancelled'</span></span>) {
    <span class="hljs-variable language_">super</span>(message);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'RequestCancellationError'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isCancelled</span> = <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CancellationExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cancellation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellation</span>();
    
    <span class="hljs-comment">// åˆ›å»ºå–æ¶ˆä»¤ç‰Œ</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">token</span>: cancelToken, cancel } = cancellation.<span class="hljs-title function_">createCancelToken</span>();
    
    <span class="hljs-comment">// åˆ›å»ºè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> request1 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data1'</span>);
    <span class="hljs-keyword">const</span> request2 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data2'</span>);
    
    <span class="hljs-comment">// åŒ…è£…è¯·æ±‚ä»¥æ”¯æŒå–æ¶ˆ</span>
    <span class="hljs-keyword">const</span> cancellableRequest1 = cancellation.<span class="hljs-title function_">withCancellation</span>(
      request1,
      cancelToken,
      <span class="hljs-string">'request_1'</span>
    );
    
    <span class="hljs-keyword">const</span> cancellableRequest2 = cancellation.<span class="hljs-title function_">withCancellation</span>(
      request2,
      cancelToken,
      <span class="hljs-string">'request_2'</span>
    );
    
    <span class="hljs-comment">// å°†è¯·æ±‚æ·»åŠ åˆ°ç»„</span>
    cancellation.<span class="hljs-title function_">addToGroup</span>(<span class="hljs-string">'request_1'</span>, <span class="hljs-string">'data_fetch_group'</span>);
    cancellation.<span class="hljs-title function_">addToGroup</span>(<span class="hljs-string">'request_2'</span>, <span class="hljs-string">'data_fetch_group'</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿ3ç§’åå–æ¶ˆæ‰€æœ‰è¯·æ±‚</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      cancellation.<span class="hljs-title function_">cancelGroup</span>(<span class="hljs-string">'data_fetch_group'</span>, <span class="hljs-string">'User cancelled'</span>);
    }, <span class="hljs-number">3000</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
        cancellableRequest1,
        cancellableRequest2
      ]);
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Requests completed:'</span>, results);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isCancelled</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Requests were cancelled:'</span>, error.<span class="hljs-property">message</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Request failed:'</span>, error);
      }
    }
    
    <span class="hljs-comment">// ä½¿ç”¨è¯·æ±‚æ± </span>
    <span class="hljs-keyword">const</span> pool = cancellation.<span class="hljs-title function_">createRequestPool</span>(<span class="hljs-number">2</span>);
    
    <span class="hljs-keyword">const</span> requests = [
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/1'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/2'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/3'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/4'</span>),
      <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/item/5'</span>)
    ];
    
    <span class="hljs-keyword">const</span> poolResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
      requests.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> pool.<span class="hljs-title function_">enqueue</span>(request))
    );
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Pool results:'</span>, poolResults);
  }
}
</code></pre>
<h5 data-id="heading-9">3.2 æ™ºèƒ½è¯·æ±‚è°ƒåº¦å™¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentRequestScheduler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">maxConcurrent</span>: <span class="hljs-number">6</span>,
      <span class="hljs-attr">priorityLevels</span>: [<span class="hljs-string">'high'</span>, <span class="hljs-string">'normal'</span>, <span class="hljs-string">'low'</span>],
      <span class="hljs-attr">retryEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">cacheEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">offlineQueueEnabled</span>: <span class="hljs-literal">true</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span> = {
      <span class="hljs-attr">high</span>: [],
      <span class="hljs-attr">normal</span>: [],
      <span class="hljs-attr">low</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = navigator.<span class="hljs-property">onLine</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ç½‘ç»œçŠ¶æ€</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'online'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processOfflineQueue</span>();
    });
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'offline'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> = <span class="hljs-literal">false</span>;
    });
    
    <span class="hljs-comment">// å¯åŠ¨è°ƒåº¦å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startScheduler</span>();
    
    <span class="hljs-comment">// åˆå§‹åŒ–é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initRetryStrategies</span>();
  }
  
  <span class="hljs-title function_">startScheduler</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueues</span>();
    }, <span class="hljs-number">100</span>); <span class="hljs-comment">// æ¯100mså¤„ç†ä¸€æ¬¡é˜Ÿåˆ—</span>
  }
  
  <span class="hljs-title function_">initRetryStrategies</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é»˜è®¤é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'default'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">10000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'ECONNABORTED'</span>, <span class="hljs-string">'ETIMEDOUT'</span>, <span class="hljs-string">'NETWORK_ERROR'</span>]
    });
    
    <span class="hljs-comment">// å…³é”®è¯·æ±‚çš„é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'critical'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">1.5</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">408</span>, <span class="hljs-number">429</span>, <span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>, <span class="hljs-number">502</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'ECONNABORTED'</span>, <span class="hljs-string">'ETIMEDOUT'</span>, <span class="hljs-string">'NETWORK_ERROR'</span>]
    });
    
    <span class="hljs-comment">// éå…³é”®è¯·æ±‚çš„é‡è¯•ç­–ç•¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'non-critical'</span>, {
      <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">baseDelay</span>: <span class="hljs-number">2000</span>,
      <span class="hljs-attr">maxDelay</span>: <span class="hljs-number">5000</span>,
      <span class="hljs-attr">backoffMultiplier</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">retryableStatuses</span>: [<span class="hljs-number">500</span>, <span class="hljs-number">502</span>, <span class="hljs-number">503</span>, <span class="hljs-number">504</span>],
      <span class="hljs-attr">retryableErrors</span>: [<span class="hljs-string">'NETWORK_ERROR'</span>]
    });
  }
  
  <span class="hljs-comment">// è°ƒåº¦è¯·æ±‚</span>
  <span class="hljs-title function_">schedule</span>(<span class="hljs-params">request, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      priority = <span class="hljs-string">'normal'</span>,
      retryStrategy = <span class="hljs-string">'default'</span>,
      cacheKey = <span class="hljs-literal">null</span>,
      offlineFallback = <span class="hljs-literal">false</span>,
      timeout = <span class="hljs-number">30000</span>,
      group = <span class="hljs-literal">null</span>
    } = options;
    
    <span class="hljs-keyword">const</span> requestId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRequestId</span>(request, options);
    <span class="hljs-keyword">const</span> requestInfo = {
      <span class="hljs-attr">id</span>: requestId,
      request,
      options,
      priority,
      retryStrategy,
      cacheKey,
      offlineFallback,
      timeout,
      group,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
      <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">scheduledAt</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>
    };
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">cacheEnabled</span> &amp;&amp; cacheKey) {
      <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">get</span>(cacheKey);
      <span class="hljs-keyword">if</span> (cached &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isCacheExpired</span>(cached)) {
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cached'</span>;
        requestInfo.<span class="hljs-property">result</span> = cached.<span class="hljs-property">data</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(cached.<span class="hljs-property">data</span>);
      }
    }
    
    <span class="hljs-comment">// æ·»åŠ åˆ°ç›¸åº”ä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority].<span class="hljs-title function_">push</span>(requestInfo);
    
    <span class="hljs-comment">// å¦‚æœæ˜¯ç¦»çº¿çŠ¶æ€ä¸”å¯ç”¨äº†ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">offlineQueueEnabled</span> &amp;&amp; offlineFallback) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">push</span>(requestInfo);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Offline - request queued'</span>));
    }
    
    <span class="hljs-comment">// è¿”å›Promise</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      requestInfo.<span class="hljs-property">resolve</span> = resolve;
      requestInfo.<span class="hljs-property">reject</span> = reject;
      
      <span class="hljs-comment">// è®°å½•è¯·æ±‚ç»Ÿè®¡</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordRequestStat</span>(requestInfo);
    });
  }
  
  <span class="hljs-comment">// å¤„ç†é˜Ÿåˆ—</span>
  <span class="hljs-title function_">processQueues</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²æ§½ä½</span>
    <span class="hljs-keyword">const</span> availableSlots = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxConcurrent</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-property">size</span>;
    <span class="hljs-keyword">if</span> (availableSlots &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// æŒ‰ä¼˜å…ˆçº§å¤„ç†é˜Ÿåˆ—</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> priority <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">priorityLevels</span>) {
      <span class="hljs-keyword">const</span> queue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority];
      
      <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; availableSlots &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> requestInfo = queue.<span class="hljs-title function_">shift</span>();
        
        <span class="hljs-comment">// è·³è¿‡å·²å–æ¶ˆçš„è¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">status</span> === <span class="hljs-string">'cancelled'</span>) <span class="hljs-keyword">continue</span>;
        
        <span class="hljs-comment">// æ ‡è®°ä¸ºè°ƒåº¦ä¸­</span>
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'scheduled'</span>;
        requestInfo.<span class="hljs-property">scheduledAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeRequest</span>(requestInfo);
      }
    }
  }
  
  <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeRequest</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-title function_">add</span>(requestInfo.<span class="hljs-property">id</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      <span class="hljs-keyword">const</span> timeoutPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Request timeout after <span class="hljs-subst">${requestInfo.timeout}</span>ms`</span>));
        }, requestInfo.<span class="hljs-property">timeout</span>);
      });
      
      <span class="hljs-comment">// æ‰§è¡Œè¯·æ±‚</span>
      <span class="hljs-keyword">const</span> requestPromise = requestInfo.<span class="hljs-title function_">request</span>();
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([requestPromise, timeoutPromise]);
      
      <span class="hljs-comment">// è¯·æ±‚æˆåŠŸ</span>
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'completed'</span>;
      requestInfo.<span class="hljs-property">completedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      requestInfo.<span class="hljs-property">result</span> = result;
      
      <span class="hljs-comment">// ç¼“å­˜ç»“æœ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">cacheEnabled</span> &amp;&amp; requestInfo.<span class="hljs-property">cacheKey</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">set</span>(requestInfo.<span class="hljs-property">cacheKey</span>, {
          <span class="hljs-attr">data</span>: result,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
          <span class="hljs-attr">ttl</span>: requestInfo.<span class="hljs-property">options</span>.<span class="hljs-property">cacheTTL</span> || <span class="hljs-number">300000</span> <span class="hljs-comment">// é»˜è®¤5åˆ†é’Ÿ</span>
        });
      }
      
      <span class="hljs-comment">// è§£æPromise</span>
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">resolve</span>) {
        requestInfo.<span class="hljs-title function_">resolve</span>(result);
      }
      
      <span class="hljs-comment">// æ¸…ç†</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupRequest</span>(requestInfo);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRequestError</span>(requestInfo, error);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-title function_">delete</span>(requestInfo.<span class="hljs-property">id</span>);
    }
  }
  
  <span class="hljs-comment">// å¤„ç†è¯·æ±‚é”™è¯¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleRequestError</span>(<span class="hljs-params">requestInfo, error</span>) {
    requestInfo.<span class="hljs-property">lastError</span> = error;
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">retryEnabled</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldRetry</span>(requestInfo, error)) {
      requestInfo.<span class="hljs-property">retryCount</span>++;
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'retrying'</span>;
      
      <span class="hljs-comment">// è®¡ç®—é‡è¯•å»¶è¿Ÿ</span>
      <span class="hljs-keyword">const</span> delay = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateRetryDelay</span>(requestInfo);
      
      <span class="hljs-comment">// å»¶è¿Ÿåé‡æ–°åŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[requestInfo.<span class="hljs-property">priority</span>].<span class="hljs-title function_">push</span>(requestInfo);
      }, delay);
      
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// é‡è¯•æ¬¡æ•°ç”¨å®Œæˆ–ä¸éœ€è¦é‡è¯•</span>
    requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
    requestInfo.<span class="hljs-property">completedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    
    <span class="hljs-comment">// å¦‚æœæ˜¯ç¦»çº¿ç›¸å…³é”™è¯¯ï¼ŒåŠ å…¥ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> &amp;&amp; requestInfo.<span class="hljs-property">offlineFallback</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">push</span>(requestInfo);
    }
    
    <span class="hljs-comment">// æ‹’ç»Promise</span>
    <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
      requestInfo.<span class="hljs-title function_">reject</span>(error);
    }
    
    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupRequest</span>(requestInfo);
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦é‡è¯•</span>
  <span class="hljs-title function_">shouldRetry</span>(<span class="hljs-params">requestInfo, error</span>) {
    <span class="hljs-keyword">const</span> strategy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">retryStrategy</span>) || 
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'default'</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">retryCount</span> &gt;= strategy.<span class="hljs-property">maxRetries</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯ç±»å‹</span>
    <span class="hljs-keyword">const</span> errorType = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getErrorType</span>(error);
    
    <span class="hljs-keyword">if</span> (strategy.<span class="hljs-property">retryableErrors</span>.<span class="hljs-title function_">includes</span>(errorType)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥HTTPçŠ¶æ€ç </span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
      <span class="hljs-keyword">return</span> strategy.<span class="hljs-property">retryableStatuses</span>.<span class="hljs-title function_">includes</span>(error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// è®¡ç®—é‡è¯•å»¶è¿Ÿï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
  <span class="hljs-title function_">calculateRetryDelay</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">const</span> strategy = <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">retryStrategy</span>) || 
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retryStrategies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'default'</span>);
    
    <span class="hljs-keyword">const</span> baseDelay = strategy.<span class="hljs-property">baseDelay</span>;
    <span class="hljs-keyword">const</span> multiplier = strategy.<span class="hljs-property">backoffMultiplier</span>;
    <span class="hljs-keyword">const</span> maxDelay = strategy.<span class="hljs-property">maxDelay</span>;
    
    <span class="hljs-keyword">const</span> delay = baseDelay * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(multiplier, requestInfo.<span class="hljs-property">retryCount</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ·»åŠ éšæœºæŠ–åŠ¨ï¼ˆé˜²æ­¢æƒŠç¾¤æ•ˆåº”ï¼‰</span>
    <span class="hljs-keyword">const</span> jitter = delay * <span class="hljs-number">0.1</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(delay + jitter, maxDelay);
  }
  
  <span class="hljs-comment">// å¤„ç†ç¦»çº¿é˜Ÿåˆ—</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processOfflineQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Processing <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.offlineQueue.length}</span> queued offline requests`</span>);
    
    <span class="hljs-comment">// å¤åˆ¶é˜Ÿåˆ—å¹¶æ¸…ç©ºåŸé˜Ÿåˆ—</span>
    <span class="hljs-keyword">const</span> queueToProcess = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span> = [];
    
    <span class="hljs-comment">// å¤„ç†é˜Ÿåˆ—ä¸­çš„è¯·æ±‚</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> requestInfo <span class="hljs-keyword">of</span> queueToProcess) {
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'pending'</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[requestInfo.<span class="hljs-property">priority</span>].<span class="hljs-title function_">push</span>(requestInfo);
    }
  }
  
  <span class="hljs-comment">// æ¸…ç†è¯·æ±‚</span>
  <span class="hljs-title function_">cleanupRequest</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-comment">// æ›´æ–°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateRequestStats</span>(requestInfo);
    
    <span class="hljs-comment">// ä»ç»Ÿè®¡ä¸­ç§»é™¤æ—§è®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupOldStats</span>();
  }
  
  <span class="hljs-comment">// è®°å½•è¯·æ±‚ç»Ÿè®¡</span>
  <span class="hljs-title function_">recordRequestStat</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">has</span>(requestInfo.<span class="hljs-property">id</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">set</span>(requestInfo.<span class="hljs-property">id</span>, {
        <span class="hljs-attr">id</span>: requestInfo.<span class="hljs-property">id</span>,
        <span class="hljs-attr">priority</span>: requestInfo.<span class="hljs-property">priority</span>,
        <span class="hljs-attr">createdAt</span>: requestInfo.<span class="hljs-property">createdAt</span>,
        <span class="hljs-attr">completedAt</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
        <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">group</span>: requestInfo.<span class="hljs-property">group</span>
      });
    }
  }
  
  <span class="hljs-comment">// æ›´æ–°è¯·æ±‚ç»Ÿè®¡</span>
  <span class="hljs-title function_">updateRequestStats</span>(<span class="hljs-params">requestInfo</span>) {
    <span class="hljs-keyword">const</span> stat = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">get</span>(requestInfo.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">if</span> (stat) {
      stat.<span class="hljs-property">status</span> = requestInfo.<span class="hljs-property">status</span>;
      stat.<span class="hljs-property">retryCount</span> = requestInfo.<span class="hljs-property">retryCount</span>;
      stat.<span class="hljs-property">completedAt</span> = requestInfo.<span class="hljs-property">completedAt</span>;
      
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">completedAt</span> &amp;&amp; requestInfo.<span class="hljs-property">createdAt</span>) {
        stat.<span class="hljs-property">duration</span> = requestInfo.<span class="hljs-property">completedAt</span> - requestInfo.<span class="hljs-property">createdAt</span>;
      }
    }
  }
  
  <span class="hljs-comment">// æ¸…ç†æ—§ç»Ÿè®¡</span>
  <span class="hljs-title function_">cleanupOldStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> oneHourAgo = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - (<span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [id, stat] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">if</span> (stat.<span class="hljs-property">createdAt</span> &lt; oneHourAgo) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">delete</span>(id);
      }
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚ID</span>
  <span class="hljs-title function_">generateRequestId</span>(<span class="hljs-params">request, options</span>) {
    <span class="hljs-keyword">const</span> requestString = request.<span class="hljs-title function_">toString</span>();
    <span class="hljs-keyword">const</span> optionsString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(options);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`req_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.hashString(requestString + optionsString)}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç®€å•çš„å“ˆå¸Œå‡½æ•°</span>
  <span class="hljs-title function_">hashString</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> char = str.<span class="hljs-title function_">charCodeAt</span>(i);
      hash = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + char;
      hash = hash &amp; hash;
    }
    <span class="hljs-keyword">return</span> hash.<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>);
  }
  
  <span class="hljs-comment">// è·å–é”™è¯¯ç±»å‹</span>
  <span class="hljs-title function_">getErrorType</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span>) <span class="hljs-keyword">return</span> error.<span class="hljs-property">code</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span>) <span class="hljs-keyword">return</span> error.<span class="hljs-property">name</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span> &amp;&amp; error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'timeout'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'ETIMEDOUT'</span>;
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span> &amp;&amp; error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'network'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'NETWORK_ERROR'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'UNKNOWN_ERROR'</span>;
  }
  
  <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ</span>
  <span class="hljs-title function_">isCacheExpired</span>(<span class="hljs-params">cacheEntry</span>) {
    <span class="hljs-keyword">if</span> (!cacheEntry.<span class="hljs-property">ttl</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; cacheEntry.<span class="hljs-property">timestamp</span> + cacheEntry.<span class="hljs-property">ttl</span>;
  }
  
  <span class="hljs-comment">// è·å–è°ƒåº¦å™¨çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>)
      .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, queue</span>) =&gt;</span> sum + queue.<span class="hljs-property">length</span>, <span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">const</span> stats = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestStats</span>.<span class="hljs-title function_">values</span>());
    
    <span class="hljs-keyword">const</span> successCount = stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">status</span> === <span class="hljs-string">'completed'</span>).<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> failedCount = stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">status</span> === <span class="hljs-string">'failed'</span>).<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> retryCount = stats.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, s</span>) =&gt;</span> sum + s.<span class="hljs-property">retryCount</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> avgDuration = stats
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">duration</span>)
      .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, s</span>) =&gt;</span> sum + s.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>) / 
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>, stats.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">duration</span>).<span class="hljs-property">length</span>);
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isOnline</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOnline</span>,
      <span class="hljs-attr">activeRequests</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeRequests</span>.<span class="hljs-property">size</span>,
      pendingRequests,
      <span class="hljs-attr">offlineQueue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">cacheSize</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">totalProcessed</span>: stats.<span class="hljs-property">length</span>,
      <span class="hljs-attr">successRate</span>: stats.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? (successCount / stats.<span class="hljs-property">length</span>) * <span class="hljs-number">100</span> : <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageRetries</span>: stats.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? (retryCount / stats.<span class="hljs-property">length</span>) : <span class="hljs-number">0</span>,
      <span class="hljs-attr">averageDuration</span>: avgDuration,
      <span class="hljs-attr">queueSizes</span>: {
        <span class="hljs-attr">high</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">high</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">normal</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">normal</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">low</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>.<span class="hljs-property">low</span>.<span class="hljs-property">length</span>
      }
    };
  }
  
  <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚</span>
  <span class="hljs-title function_">cancelRequest</span>(<span class="hljs-params">requestId</span>) {
    <span class="hljs-comment">// æŸ¥æ‰¾å¹¶æ ‡è®°è¯·æ±‚ä¸ºå–æ¶ˆçŠ¶æ€</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> priority <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">priorityLevels</span>) {
      <span class="hljs-keyword">const</span> queue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queues</span>[priority];
      <span class="hljs-keyword">const</span> index = queue.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">id</span> === requestId);
      
      <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">const</span> requestInfo = queue[index];
        requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cancelled'</span>;
        
        <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
          requestInfo.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled'</span>));
        }
        
        queue.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }
    
    <span class="hljs-comment">// æ£€æŸ¥ç¦»çº¿é˜Ÿåˆ—</span>
    <span class="hljs-keyword">const</span> offlineIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">req</span> =&gt;</span> req.<span class="hljs-property">id</span> === requestId);
    <span class="hljs-keyword">if</span> (offlineIndex !== -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> requestInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>[offlineIndex];
      requestInfo.<span class="hljs-property">status</span> = <span class="hljs-string">'cancelled'</span>;
      
      <span class="hljs-keyword">if</span> (requestInfo.<span class="hljs-property">reject</span>) {
        requestInfo.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestCancellationError</span>(<span class="hljs-string">'Request cancelled'</span>));
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">offlineQueue</span>.<span class="hljs-title function_">splice</span>(offlineIndex, <span class="hljs-number">1</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ¸…ç©ºç¼“å­˜</span>
  <span class="hljs-title function_">clearCache</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestCache</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SchedulerExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntelligentRequestScheduler</span>({
      <span class="hljs-attr">maxConcurrent</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">priorityLevels</span>: [<span class="hljs-string">'high'</span>, <span class="hljs-string">'normal'</span>, <span class="hljs-string">'low'</span>]
    });
    
    <span class="hljs-comment">// åˆ›å»ºä¸€äº›è¯·æ±‚å‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">createRequest</span> = (<span class="hljs-params">id, delay = <span class="hljs-number">1000</span></span>) =&gt; <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Starting request <span class="hljs-subst">${id}</span>`</span>);
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, delay));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Completed request <span class="hljs-subst">${id}</span>`</span>);
      <span class="hljs-keyword">return</span> { id, <span class="hljs-attr">data</span>: <span class="hljs-string">`Result from request <span class="hljs-subst">${id}</span>`</span> };
    };
    
    <span class="hljs-comment">// è°ƒåº¦ä¸åŒä¼˜å…ˆçº§çš„è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> requests = [
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'high_1'</span>, <span class="hljs-number">500</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'high'</span>,
        <span class="hljs-attr">retryStrategy</span>: <span class="hljs-string">'critical'</span>,
        <span class="hljs-attr">cacheKey</span>: <span class="hljs-string">'request_high_1'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'normal_1'</span>, <span class="hljs-number">1000</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'normal'</span>,
        <span class="hljs-attr">cacheKey</span>: <span class="hljs-string">'request_normal_1'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'low_1'</span>, <span class="hljs-number">1500</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'low'</span>,
        <span class="hljs-attr">retryStrategy</span>: <span class="hljs-string">'non-critical'</span>
      }),
      
      scheduler.<span class="hljs-title function_">schedule</span>(<span class="hljs-title function_">createRequest</span>(<span class="hljs-string">'high_2'</span>, <span class="hljs-number">200</span>), {
        <span class="hljs-attr">priority</span>: <span class="hljs-string">'high'</span>,
        <span class="hljs-attr">offlineFallback</span>: <span class="hljs-literal">true</span>
      })
    ];
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(requests);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'All requests completed:'</span>, results);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Some requests failed:'</span>, error);
    }
    
    <span class="hljs-comment">// è·å–è°ƒåº¦å™¨çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> status = scheduler.<span class="hljs-title function_">getStatus</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Scheduler status:'</span>, status);
    
    <span class="hljs-keyword">return</span> scheduler;
  }
}
</code></pre>
<h4 data-id="heading-10">å››ã€WebSocketé«˜çº§å°è£…</h4>
<h5 data-id="heading-11">4.1 å®Œæ•´çš„WebSocketå®¢æˆ·ç«¯</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">protocols</span>: [],
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">reconnectDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">heartbeatInterval</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">autoConnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">binaryType</span>: <span class="hljs-string">'blob'</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// äº‹ä»¶ç±»å‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span> = {
      <span class="hljs-attr">OPEN</span>: <span class="hljs-string">'open'</span>,
      <span class="hljs-attr">CLOSE</span>: <span class="hljs-string">'close'</span>,
      <span class="hljs-attr">MESSAGE</span>: <span class="hljs-string">'message'</span>,
      <span class="hljs-attr">ERROR</span>: <span class="hljs-string">'error'</span>,
      <span class="hljs-attr">RECONNECT</span>: <span class="hljs-string">'reconnect'</span>,
      <span class="hljs-attr">HEARTBEAT</span>: <span class="hljs-string">'heartbeat'</span>
    };
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">autoConnect</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }
  }
  
  <span class="hljs-comment">// è¿æ¥WebSocket</span>
  <span class="hljs-title function_">connect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'WebSocket is already connected or connecting'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">protocols</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">binaryType</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span>;
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupEventListeners</span>();
      
      <span class="hljs-comment">// è®¾ç½®è¿æ¥è¶…æ—¶</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'WebSocket connection timeout'</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Connection timeout'</span>));
        }
      }, <span class="hljs-number">10000</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(error);
    }
  }
  
  <span class="hljs-comment">// è®¾ç½®äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">setupEventListeners</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateConnectionId</span>();
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`WebSocket connected: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.url}</span>`</span>);
      
      <span class="hljs-comment">// è§¦å‘openäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">OPEN</span>, {
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
        event
      });
      
      <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æ£€æµ‹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">heartbeatEnabled</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startHeartbeat</span>();
      }
      
      <span class="hljs-comment">// å‘é€é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushMessageQueue</span>();
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onclose</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`WebSocket closed: <span class="hljs-subst">${event.code}</span> <span class="hljs-subst">${event.reason}</span>`</span>);
      
      <span class="hljs-comment">// è§¦å‘closeäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">CLOSE</span>, {
        <span class="hljs-attr">code</span>: event.<span class="hljs-property">code</span>,
        <span class="hljs-attr">reason</span>: event.<span class="hljs-property">reason</span>,
        <span class="hljs-attr">wasClean</span>: event.<span class="hljs-property">wasClean</span>,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>
      });
      
      <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopHeartbeat</span>();
      
      <span class="hljs-comment">// å°è¯•é‡è¿</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnect</span> &amp;&amp; !event.<span class="hljs-property">wasClean</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>();
      }
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-comment">// å¤„ç†å¿ƒè·³å“åº”</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isHeartbeatMessage</span>(event.<span class="hljs-property">data</span>)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">HEARTBEAT</span>, { <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è§¦å‘messageäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">MESSAGE</span>, {
        <span class="hljs-attr">data</span>: event.<span class="hljs-property">data</span>,
        <span class="hljs-attr">origin</span>: event.<span class="hljs-property">origin</span>,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      });
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket error:'</span>, event);
      
      <span class="hljs-comment">// è§¦å‘erroräº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">ERROR</span>, {
        <span class="hljs-attr">error</span>: event,
        <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>
      });
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket error'</span>));
    };
  }
  
  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  <span class="hljs-title function_">send</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      queueIfNotConnected = <span class="hljs-literal">true</span>,
      retry = <span class="hljs-literal">false</span>,
      maxRetries = <span class="hljs-number">3</span>,
      retryDelay = <span class="hljs-number">1000</span>
    } = options;
    
    <span class="hljs-comment">// å¦‚æœæœªè¿æ¥ä¸”å…è®¸æ’é˜Ÿ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> &amp;&amp; queueIfNotConnected) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">push</span>({ data, options, <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket not connected, message queued'</span>));
    }
    
    <span class="hljs-comment">// å¦‚æœæœªè¿æ¥ä¸”ä¸å…è®¸æ’é˜Ÿ</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> &amp;&amp; !queueIfNotConnected) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'WebSocket not connected'</span>));
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(data);
        <span class="hljs-title function_">resolve</span>();
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">if</span> (retry &amp;&amp; (options.<span class="hljs-property">retryCount</span> || <span class="hljs-number">0</span>) &lt; maxRetries) {
          <span class="hljs-keyword">const</span> retryCount = (options.<span class="hljs-property">retryCount</span> || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
          
          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(data, { ...options, retryCount })
              .<span class="hljs-title function_">then</span>(resolve)
              .<span class="hljs-title function_">catch</span>(reject);
          }, retryDelay);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">reject</span>(error);
        }
      }
    });
  }
  
  <span class="hljs-comment">// å‘é€JSONæ¶ˆæ¯</span>
  <span class="hljs-title function_">sendJson</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> jsonString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(jsonString, options);
  }
  
  <span class="hljs-comment">// å‘é€å¸¦è¯·æ±‚-å“åº”æ¨¡å¼çš„æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendWithResponse</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      timeout = <span class="hljs-number">30000</span>,
      responseType = <span class="hljs-string">'json'</span>
    } = options;
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„æ¶ˆæ¯ID</span>
      <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>();
      
      <span class="hljs-comment">// åˆ›å»ºè¶…æ—¶å®šæ—¶å™¨</span>
      <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(messageId);
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Response timeout'</span>));
      }, timeout);
      
      <span class="hljs-comment">// ç›‘å¬ç‰¹å®šæ¶ˆæ¯IDçš„å“åº”</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">once</span>(messageId, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        
        <span class="hljs-comment">// æ ¹æ®ç±»å‹è§£æå“åº”</span>
        <span class="hljs-keyword">let</span> parsedResponse;
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">if</span> (responseType === <span class="hljs-string">'json'</span>) {
            parsedResponse = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response.<span class="hljs-property">data</span>);
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (responseType === <span class="hljs-string">'text'</span>) {
            parsedResponse = response.<span class="hljs-property">data</span>;
          } <span class="hljs-keyword">else</span> {
            parsedResponse = response.<span class="hljs-property">data</span>;
          }
          
          <span class="hljs-title function_">resolve</span>(parsedResponse);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to parse response: <span class="hljs-subst">${error.message}</span>`</span>));
        }
      });
      
      <span class="hljs-comment">// å‘é€æ¶ˆæ¯ï¼ˆåŒ…å«æ¶ˆæ¯IDï¼‰</span>
      <span class="hljs-keyword">const</span> message = {
        <span class="hljs-attr">id</span>: messageId,
        data,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(message).<span class="hljs-title function_">catch</span>(reject);
    });
  }
  
  <span class="hljs-comment">// å‘é€RPCè°ƒç”¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">method, params, options = {}</span>) {
    <span class="hljs-keyword">const</span> rpcRequest = {
      <span class="hljs-attr">jsonrpc</span>: <span class="hljs-string">'2.0'</span>,
      method,
      params,
      <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>()
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendWithResponse</span>(rpcRequest, options);
  }
  
  <span class="hljs-comment">// å‘é€äºŒè¿›åˆ¶æ•°æ®</span>
  <span class="hljs-title function_">sendBinary</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">let</span> binaryData;
    
    <span class="hljs-keyword">if</span> (data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {
      binaryData = data;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Blob</span>) {
      binaryData = data;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">ArrayBuffer</span>.<span class="hljs-title function_">isView</span>(data)) {
      binaryData = data.<span class="hljs-property">buffer</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unsupported binary data type'</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(binaryData, options);
  }
  
  <span class="hljs-comment">// å¤„ç†è¿æ¥é”™è¯¯</span>
  <span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket connection error:'</span>, error);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnect</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attemptReconnect</span>();
    }
  }
  
  <span class="hljs-comment">// å°è¯•é‡è¿</span>
  <span class="hljs-title function_">attemptReconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Max reconnection attempts reached'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>++;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Attempting to reconnect (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.reconnectAttempts}</span>/<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.options.maxReconnectAttempts}</span>)...`</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">EVENTS</span>.<span class="hljs-property">RECONNECT</span>, {
      <span class="hljs-attr">attempt</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>,
      <span class="hljs-attr">maxAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>
    });
    
    <span class="hljs-comment">// è®¡ç®—é‡è¿å»¶è¿Ÿï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span>
    <span class="hljs-keyword">const</span> delay = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">reconnectDelay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ·»åŠ éšæœºæŠ–åŠ¨</span>
    <span class="hljs-keyword">const</span> jitter = delay * <span class="hljs-number">0.1</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>();
    }, delay + jitter);
  }
  
  <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æ£€æµ‹</span>
  <span class="hljs-title function_">startHeartbeat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'__HEARTBEAT__'</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Heartbeat failed:'</span>, error);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleConnectionError</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Heartbeat failed'</span>));
        });
      }
    }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">heartbeatInterval</span>);
  }
  
  <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
  <span class="hljs-title function_">stopHeartbeat</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>) {
      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-literal">null</span>;
    }
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯å¿ƒè·³æ¶ˆæ¯</span>
  <span class="hljs-title function_">isHeartbeatMessage</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> data === <span class="hljs-string">'__HEARTBEAT__'</span> || data === <span class="hljs-string">'__HEARTBEAT_RESPONSE__'</span>;
  }
  
  <span class="hljs-comment">// æ¸…ç©ºæ¶ˆæ¯é˜Ÿåˆ—</span>
  <span class="hljs-title function_">flushMessageQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> { data, options, retryCount } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">shift</span>();
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(data, { ...options, retryCount }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to send queued message:'</span>, error);
      });
    }
  }
  
  <span class="hljs-comment">// æ–­å¼€è¿æ¥</span>
  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params">code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-comment">// æ¸…é™¤é‡è¿å®šæ—¶å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span>) {
      <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectTimeout</span> = <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">// åœæ­¢å¿ƒè·³æ£€æµ‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopHeartbeat</span>();
    
    <span class="hljs-comment">// å…³é—­WebSocket</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">close</span>(code, reason);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(event, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">add</span>(listener);
    
    <span class="hljs-comment">// è¿”å›å–æ¶ˆç›‘å¬çš„å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, listener);
  }
  
  <span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">once</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onceListener</span> = (<span class="hljs-params">...args</span>) =&gt; {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, onceListener);
      <span class="hljs-title function_">listener</span>(...args);
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(event, onceListener);
  }
  
  <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">delete</span>(listener);
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(event);
      }
    }
  }
  
  <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">listener</span>(data);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for "<span class="hljs-subst">${event}</span>":`</span>, error);
        }
      });
    }
    
    <span class="hljs-comment">// è§¦å‘é€šé…ç¬¦ç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(<span class="hljs-string">'*'</span>)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-title function_">listener</span>(event, data);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error in wildcard event listener:'</span>, error);
        }
      });
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¿æ¥ID</span>
  <span class="hljs-title function_">generateConnectionId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`conn_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯ID</span>
  <span class="hljs-title function_">generateMessageId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`msg_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>;
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span>,
      <span class="hljs-attr">isConnected</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span>,
      <span class="hljs-attr">isConnecting</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnecting</span>,
      <span class="hljs-attr">connectionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectionId</span>,
      <span class="hljs-attr">reconnectAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">maxReconnectAttempts</span>,
      <span class="hljs-attr">queuedMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">binaryType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span>
    };
  }
  
  <span class="hljs-comment">// è®¾ç½®äºŒè¿›åˆ¶ç±»å‹</span>
  <span class="hljs-title function_">setBinaryType</span>(<span class="hljs-params">binaryType</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">binaryType</span> = binaryType;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-property">binaryType</span> = binaryType;
    }
  }
}

<span class="hljs-comment">// WebSocketç®¡ç†ç±»ï¼ˆå¤šè¿æ¥ç®¡ç†ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span> = {
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">reconnectDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">heartbeatInterval</span>: <span class="hljs-number">30000</span>
    };
  }
  
  <span class="hljs-comment">// åˆ›å»ºè¿æ¥</span>
  <span class="hljs-title function_">createConnection</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> connectionId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateConnectionId</span>(url);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">has</span>(connectionId)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Connection already exists: <span class="hljs-subst">${connectionId}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
    }
    
    <span class="hljs-keyword">const</span> mergedOptions = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultOptions</span>, ...options };
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketClient</span>(url, mergedOptions);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">set</span>(connectionId, client);
    
    <span class="hljs-comment">// ç›‘å¬è¿æ¥å…³é—­äº‹ä»¶ä»¥æ¸…ç†</span>
    client.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œæ¸…ç†æ“ä½œ</span>
    });
    
    <span class="hljs-keyword">return</span> client;
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥</span>
  <span class="hljs-title function_">getConnection</span>(<span class="hljs-params">connectionId</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
  }
  
  <span class="hljs-comment">// å…³é—­è¿æ¥</span>
  <span class="hljs-title function_">closeConnection</span>(<span class="hljs-params">connectionId, code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-keyword">const</span> client = <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">get</span>(connectionId);
    
    <span class="hljs-keyword">if</span> (client) {
      client.<span class="hljs-title function_">disconnect</span>(code, reason);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">delete</span>(connectionId);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// å…³é—­æ‰€æœ‰è¿æ¥</span>
  <span class="hljs-title function_">closeAllConnections</span>(<span class="hljs-params">code = <span class="hljs-number">1000</span>, reason = <span class="hljs-string">'Normal closure'</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client, connectionId</span>) =&gt;</span> {
      client.<span class="hljs-title function_">disconnect</span>(code, reason);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">clear</span>();
  }
  
  <span class="hljs-comment">// å¹¿æ’­æ¶ˆæ¯åˆ°æ‰€æœ‰è¿æ¥</span>
  <span class="hljs-title function_">broadcast</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> promises = [];
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (client.<span class="hljs-property">isConnected</span>) {
        promises.<span class="hljs-title function_">push</span>(client.<span class="hljs-title function_">send</span>(data, options));
      }
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(promises);
  }
  
  <span class="hljs-comment">// ç”Ÿæˆè¿æ¥ID</span>
  <span class="hljs-title function_">generateConnectionId</span>(<span class="hljs-params">url</span>) {
    <span class="hljs-keyword">const</span> urlObj = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(url);
    <span class="hljs-keyword">const</span> host = urlObj.<span class="hljs-property">host</span>;
    <span class="hljs-keyword">const</span> path = urlObj.<span class="hljs-property">pathname</span>;
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${host}</span><span class="hljs-subst">${path}</span>`</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[^a-z0-9]/gi</span>, <span class="hljs-string">'_'</span>);
  }
  
  <span class="hljs-comment">// è·å–è¿æ¥çŠ¶æ€</span>
  <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> status = {
      <span class="hljs-attr">totalConnections</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">connectedConnections</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">connectingConnections</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">connections</span>: []
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connections</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">client, connectionId</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> clientStatus = client.<span class="hljs-title function_">getStatus</span>();
      
      <span class="hljs-keyword">if</span> (clientStatus.<span class="hljs-property">isConnected</span>) {
        status.<span class="hljs-property">connectedConnections</span>++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (clientStatus.<span class="hljs-property">isConnecting</span>) {
        status.<span class="hljs-property">connectingConnections</span>++;
      }
      
      status.<span class="hljs-property">connections</span>.<span class="hljs-title function_">push</span>({
        connectionId,
        ...clientStatus
      });
    });
    
    <span class="hljs-keyword">return</span> status;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºWebSocketå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">const</span> wsClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketClient</span>(<span class="hljs-string">'wss://echo.websocket.org'</span>, {
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxReconnectAttempts</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">heartbeatEnabled</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span>
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket opened:'</span>, event.<span class="hljs-property">connectionId</span>);
      
      <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
      wsClient.<span class="hljs-title function_">sendJson</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'greeting'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello WebSocket!'</span> });
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received message:'</span>, event.<span class="hljs-property">data</span>);
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket closed:'</span>, event.<span class="hljs-property">code</span>, event.<span class="hljs-property">reason</span>);
    });
    
    wsClient.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'WebSocket error:'</span>, event.<span class="hljs-property">error</span>);
    });
    
    <span class="hljs-comment">// å‘é€è¯·æ±‚-å“åº”æ¨¡å¼çš„æ¶ˆæ¯</span>
    wsClient.<span class="hljs-title function_">sendWithResponse</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, response))
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Request failed:'</span>, error));
    
    <span class="hljs-comment">// è·å–çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> status = wsClient.<span class="hljs-title function_">getStatus</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebSocket status:'</span>, status);
    
    <span class="hljs-keyword">return</span> wsClient;
  }
}
</code></pre>
<h5 data-id="heading-12">4.2 WebSocketé‡è¿ä¸æ¶ˆæ¯å¯é æ€§</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReliableWebSocket</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WebSocketClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-keyword">const</span> defaultOptions = {
      <span class="hljs-attr">messageRetention</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">maxMessageQueueSize</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">messageExpiry</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 5åˆ†é’Ÿ</span>
      <span class="hljs-attr">deliveryGuarantee</span>: <span class="hljs-string">'at-least-once'</span>, <span class="hljs-comment">// 'at-most-once', 'at-least-once', 'exactly-once'</span>
      <span class="hljs-attr">requireAcknowledgement</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">acknowledgementTimeout</span>: <span class="hljs-number">5000</span>,
      ...options
    };
    
    <span class="hljs-variable language_">super</span>(url, defaultOptions);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯ç¡®è®¤ç›‘å¬</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAcknowledgementListener</span>();
  }
  
  <span class="hljs-comment">// å‘é€å¯é æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendReliable</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> {
      requireAcknowledgement = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">requireAcknowledgement</span>,
      acknowledgementTimeout = <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">acknowledgementTimeout</span>,
      maxRetries = <span class="hljs-number">3</span>,
      retryDelay = <span class="hljs-number">1000</span>
    } = options;
    
    <span class="hljs-comment">// ç”Ÿæˆæ¶ˆæ¯IDå’Œåºåˆ—å·</span>
    <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>();
    <span class="hljs-keyword">const</span> sequenceNumber = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span>++;
    
    <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> message = {
      <span class="hljs-attr">id</span>: messageId,
      <span class="hljs-attr">seq</span>: sequenceNumber,
      data,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">retryCount</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>
    };
    
    <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œæ·»åŠ åˆ°å¾…å¤„ç†æ¶ˆæ¯åˆ—è¡¨</span>
    <span class="hljs-keyword">if</span> (requireAcknowledgement) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">set</span>(messageId, message);
      
      <span class="hljs-comment">// è®¾ç½®ç¡®è®¤è¶…æ—¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setAcknowledgementTimeout</span>(messageId, acknowledgementTimeout);
    }
    
    <span class="hljs-comment">// å°è£…å‘é€çš„æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> wrappedMessage = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
      <span class="hljs-attr">reliable</span>: requireAcknowledgement,
      messageId,
      sequenceNumber,
      data
    };
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage);
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'sent'</span>;
      
      <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œç­‰å¾…ç¡®è®¤</span>
      <span class="hljs-keyword">if</span> (requireAcknowledgement) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">waitForAcknowledgement</span>(messageId, acknowledgementTimeout);
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'sent'</span> });
    } <span class="hljs-keyword">catch</span> (error) {
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
      message.<span class="hljs-property">error</span> = error;
      
      <span class="hljs-comment">// é‡è¯•é€»è¾‘</span>
      <span class="hljs-keyword">if</span> (maxRetries &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">retrySendReliable</span>(message, {
          maxRetries,
          retryDelay,
          requireAcknowledgement
        });
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-comment">// ç­‰å¾…æ¶ˆæ¯ç¡®è®¤</span>
  <span class="hljs-title function_">waitForAcknowledgement</span>(<span class="hljs-params">messageId, timeout</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²ç»ç¡®è®¤</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">has</span>(messageId)) {
        <span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'acknowledged'</span> });
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
      <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
        
        <span class="hljs-keyword">if</span> (message) {
          message.<span class="hljs-property">status</span> = <span class="hljs-string">'timeout'</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
        }
        
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Acknowledgement timeout for message <span class="hljs-subst">${messageId}</span>`</span>));
      }, timeout);
      
      <span class="hljs-comment">// ç›‘å¬ç¡®è®¤äº‹ä»¶</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">acknowledgementListener</span> = (<span class="hljs-params">ack</span>) =&gt; {
        <span class="hljs-keyword">if</span> (ack.<span class="hljs-property">messageId</span> === messageId) {
          <span class="hljs-built_in">clearTimeout</span>(timeoutId);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'acknowledgement'</span>, acknowledgementListener);
          <span class="hljs-title function_">resolve</span>({ messageId, <span class="hljs-attr">status</span>: <span class="hljs-string">'acknowledged'</span> });
        }
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement'</span>, acknowledgementListener);
    });
  }
  
  <span class="hljs-comment">// é‡è¯•å‘é€å¯é æ¶ˆæ¯</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">retrySendReliable</span>(<span class="hljs-params">message, options</span>) {
    <span class="hljs-keyword">const</span> {
      maxRetries,
      retryDelay,
      requireAcknowledgement
    } = options;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">1</span>; attempt &lt;= maxRetries; attempt++) {
      message.<span class="hljs-property">retryCount</span> = attempt;
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'retrying'</span>;
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Retrying message <span class="hljs-subst">${message.id}</span> (attempt <span class="hljs-subst">${attempt}</span>/<span class="hljs-subst">${maxRetries}</span>)`</span>);
      
      <span class="hljs-comment">// ç­‰å¾…é‡è¯•å»¶è¿Ÿ</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, retryDelay * attempt));
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> wrappedMessage = {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
          <span class="hljs-attr">reliable</span>: requireAcknowledgement,
          <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>,
          <span class="hljs-attr">sequenceNumber</span>: message.<span class="hljs-property">seq</span>,
          <span class="hljs-attr">data</span>: message.<span class="hljs-property">data</span>,
          <span class="hljs-attr">retry</span>: attempt
        };
        
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage);
        message.<span class="hljs-property">status</span> = <span class="hljs-string">'sent'</span>;
        
        <span class="hljs-comment">// å¦‚æœéœ€è¦ç¡®è®¤ï¼Œç­‰å¾…ç¡®è®¤</span>
        <span class="hljs-keyword">if</span> (requireAcknowledgement) {
          <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">waitForAcknowledgement</span>(
            message.<span class="hljs-property">id</span>,
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">acknowledgementTimeout</span>
          );
          
          <span class="hljs-keyword">return</span> result;
        }
        
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">'sent'</span> };
      } <span class="hljs-keyword">catch</span> (error) {
        message.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
        message.<span class="hljs-property">error</span> = error;
        
        <span class="hljs-keyword">if</span> (attempt === maxRetries) {
          <span class="hljs-keyword">throw</span> error;
        }
      }
    }
    
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to send message after <span class="hljs-subst">${maxRetries}</span> retries`</span>);
  }
  
  <span class="hljs-comment">// è®¾ç½®ç¡®è®¤è¶…æ—¶</span>
  <span class="hljs-title function_">setAcknowledgementTimeout</span>(<span class="hljs-params">messageId, timeout</span>) {
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
      
      <span class="hljs-keyword">if</span> (message &amp;&amp; message.<span class="hljs-property">status</span> !== <span class="hljs-string">'acknowledged'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Acknowledgement timeout for message <span class="hljs-subst">${messageId}</span>`</span>);
        
        <span class="hljs-comment">// è§¦å‘è¶…æ—¶äº‹ä»¶</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acknowledgement_timeout'</span>, {
          messageId,
          message,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">delete</span>(messageId);
    }, timeout);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">set</span>(messageId, timeoutId);
  }
  
  <span class="hljs-comment">// æ¸…ç†ç¡®è®¤è¶…æ—¶</span>
  <span class="hljs-title function_">clearAcknowledgementTimeout</span>(<span class="hljs-params">messageId</span>) {
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">get</span>(messageId);
    
    <span class="hljs-keyword">if</span> (timeoutId) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">delete</span>(messageId);
    }
  }
  
  <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯ç¡®è®¤ç›‘å¬å™¨</span>
  <span class="hljs-title function_">setupAcknowledgementListener</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘å¬ç¡®è®¤æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> message = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
        
        <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'acknowledgement'</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleAcknowledgement</span>(message);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'data'</span> &amp;&amp; message.<span class="hljs-property">reliable</span>) {
          <span class="hljs-comment">// æ”¶åˆ°å¯é æ¶ˆæ¯ï¼Œå‘é€ç¡®è®¤</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendAcknowledgement</span>(message.<span class="hljs-property">messageId</span>, message.<span class="hljs-property">sequenceNumber</span>);
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// ä¸æ˜¯JSONæ¶ˆæ¯ï¼Œå¿½ç•¥</span>
      }
    });
    
    <span class="hljs-comment">// ç›‘å¬è¿æ¥æ‰“å¼€äº‹ä»¶ï¼Œé‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'open'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resendUnacknowledgedMessages</span>();
    });
  }
  
  <span class="hljs-comment">// å¤„ç†ç¡®è®¤æ¶ˆæ¯</span>
  <span class="hljs-title function_">handleAcknowledgement</span>(<span class="hljs-params">ackMessage</span>) {
    <span class="hljs-keyword">const</span> { messageId, sequenceNumber } = ackMessage;
    
    <span class="hljs-comment">// æ¸…ç†ç¡®è®¤è¶…æ—¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAcknowledgementTimeout</span>(messageId);
    
    <span class="hljs-comment">// æ›´æ–°æœ€åç¡®è®¤çš„åºåˆ—å·</span>
    <span class="hljs-keyword">if</span> (sequenceNumber &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span> = sequenceNumber;
    }
    
    <span class="hljs-comment">// ä»å¾…å¤„ç†æ¶ˆæ¯ä¸­ç§»é™¤</span>
    <span class="hljs-keyword">const</span> message = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">get</span>(messageId);
    <span class="hljs-keyword">if</span> (message) {
      message.<span class="hljs-property">status</span> = <span class="hljs-string">'acknowledged'</span>;
      message.<span class="hljs-property">acknowledgedAt</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
    }
    
    <span class="hljs-comment">// æ·»åŠ åˆ°å·²ç¡®è®¤æ¶ˆæ¯é›†åˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">add</span>(messageId);
    
    <span class="hljs-comment">// è§¦å‘ç¡®è®¤äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'acknowledgement'</span>, {
      messageId,
      sequenceNumber,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      message
    });
    
    <span class="hljs-comment">// æ¸…ç†è¿‡æœŸçš„å·²ç¡®è®¤æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanupAcknowledgedMessages</span>();
  }
  
  <span class="hljs-comment">// å‘é€ç¡®è®¤æ¶ˆæ¯</span>
  <span class="hljs-title function_">sendAcknowledgement</span>(<span class="hljs-params">messageId, sequenceNumber</span>) {
    <span class="hljs-keyword">const</span> ackMessage = {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'acknowledgement'</span>,
      messageId,
      sequenceNumber,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(ackMessage).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Failed to send acknowledgement:'</span>, error);
    });
  }
  
  <span class="hljs-comment">// é‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">resendUnacknowledgedMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> unacknowledged = [];
    
    <span class="hljs-comment">// æ”¶é›†æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">message, messageId</span>) =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦è¿‡æœŸ</span>
      <span class="hljs-keyword">if</span> (now - message.<span class="hljs-property">timestamp</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">messageExpiry</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Message <span class="hljs-subst">${messageId}</span> expired, removing`</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">delete</span>(messageId);
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAcknowledgementTimeout</span>(messageId);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦éœ€è¦é‡å‘</span>
      <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'sent'</span> || message.<span class="hljs-property">status</span> === <span class="hljs-string">'pending'</span>) {
        unacknowledged.<span class="hljs-title function_">push</span>(message);
      }
    });
    
    <span class="hljs-comment">// é‡æ–°å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯</span>
    unacknowledged.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Resending unacknowledged message <span class="hljs-subst">${message.id}</span>`</span>);
      
      <span class="hljs-keyword">const</span> wrappedMessage = {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'data'</span>,
        <span class="hljs-attr">reliable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">messageId</span>: message.<span class="hljs-property">id</span>,
        <span class="hljs-attr">sequenceNumber</span>: message.<span class="hljs-property">seq</span>,
        <span class="hljs-attr">data</span>: message.<span class="hljs-property">data</span>,
        <span class="hljs-attr">resent</span>: <span class="hljs-literal">true</span>
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendJson</span>(wrappedMessage).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Failed to resend message <span class="hljs-subst">${message.id}</span>:`</span>, error);
      });
    });
  }
  
  <span class="hljs-comment">// æ¸…ç†å·²ç¡®è®¤çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">cleanupAcknowledgedMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> maxSize = <span class="hljs-number">1000</span>; <span class="hljs-comment">// æœ€å¤šä¿ç•™1000ä¸ªå·²ç¡®è®¤æ¶ˆæ¯</span>
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-property">size</span> &gt; maxSize) {
      <span class="hljs-comment">// è½¬æ¢ä¸ºæ•°ç»„ï¼Œæ’åºï¼Œåˆ é™¤æœ€æ—§çš„</span>
      <span class="hljs-keyword">const</span> sorted = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>)
        .<span class="hljs-title function_">slice</span>(-maxSize);
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(sorted);
    }
  }
  
  <span class="hljs-comment">// è¦†ç›–çˆ¶ç±»çš„sendæ–¹æ³•ï¼Œæ·»åŠ å¯é æ€§æ”¯æŒ</span>
  <span class="hljs-title function_">send</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> { reliable = <span class="hljs-literal">false</span>, ...sendOptions } = options;
    
    <span class="hljs-keyword">if</span> (reliable) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendReliable</span>(data, sendOptions);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">send</span>(data, sendOptions);
  }
  
  <span class="hljs-comment">// è¦†ç›–çˆ¶ç±»çš„sendJsonæ–¹æ³•</span>
  <span class="hljs-title function_">sendJson</span>(<span class="hljs-params">data, options = {}</span>) {
    <span class="hljs-keyword">const</span> { reliable = <span class="hljs-literal">false</span>, ...sendOptions } = options;
    
    <span class="hljs-keyword">if</span> (reliable) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendReliable</span>(data, sendOptions);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sendJson</span>(data, sendOptions);
  }
  
  <span class="hljs-comment">// è·å–å¯é æ¶ˆæ¯ç»Ÿè®¡</span>
  <span class="hljs-title function_">getReliabilityStats</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">let</span> pendingCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> acknowledgedCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> failedCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> expiredCount = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (now - message.<span class="hljs-property">timestamp</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">messageExpiry</span>) {
        expiredCount++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'acknowledged'</span>) {
        acknowledgedCount++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">status</span> === <span class="hljs-string">'failed'</span>) {
        failedCount++;
      } <span class="hljs-keyword">else</span> {
        pendingCount++;
      }
    });
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">pendingMessages</span>: pendingCount,
      <span class="hljs-attr">acknowledgedMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-property">size</span>,
      <span class="hljs-attr">failedMessages</span>: failedCount,
      <span class="hljs-attr">expiredMessages</span>: expiredCount,
      <span class="hljs-attr">totalSentMessages</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageSequence</span>,
      <span class="hljs-attr">lastAcknowledgedSequence</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAcknowledgedSequence</span>,
      <span class="hljs-attr">messageQueueSize</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">acknowledgementTimeouts</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-property">size</span>
    };
  }
  
  <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å¾…å¤„ç†æ¶ˆæ¯</span>
  <span class="hljs-title function_">cleanupAllMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingMessages</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgedMessages</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
    
    <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰è¶…æ—¶å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">timeoutId</span> =&gt;</span> {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acknowledgementTimeouts</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReliableWebSocketExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">demonstrate</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºå¯é WebSocketå®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">const</span> reliableWs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReliableWebSocket</span>(<span class="hljs-string">'wss://echo.websocket.org'</span>, {
      <span class="hljs-attr">requireAcknowledgement</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">acknowledgementTimeout</span>: <span class="hljs-number">3000</span>,
      <span class="hljs-attr">messageExpiry</span>: <span class="hljs-number">60000</span>, <span class="hljs-comment">// 1åˆ†é’Ÿ</span>
      <span class="hljs-attr">reconnect</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-comment">// ç›‘å¬ç¡®è®¤äº‹ä»¶</span>
    reliableWs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement'</span>, <span class="hljs-function">(<span class="hljs-params">ack</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Message acknowledged:'</span>, ack.<span class="hljs-property">messageId</span>);
    });
    
    reliableWs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acknowledgement_timeout'</span>, <span class="hljs-function">(<span class="hljs-params">timeout</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Acknowledgement timeout:'</span>, timeout.<span class="hljs-property">messageId</span>);
    });
    
    <span class="hljs-comment">// å‘é€å¯é æ¶ˆæ¯</span>
    reliableWs.<span class="hljs-title function_">sendReliable</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'test'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'Hello reliable WebSocket!'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Reliable message sent and acknowledged:'</span>, result);
      })
      .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to send reliable message:'</span>, error);
      });
    
    <span class="hljs-comment">// è·å–å¯é æ€§ç»Ÿè®¡</span>
    <span class="hljs-keyword">const</span> stats = reliableWs.<span class="hljs-title function_">getReliabilityStats</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Reliability stats:'</span>, stats);
    
    <span class="hljs-keyword">return</span> reliableWs;
  }
}
</code></pre>
<p>ç»§ç»­é˜…è¯» <a href="https://juejin.cn/post/7584807992031051818" target="_blank" title="https://juejin.cn/post/7584807992031051818"># æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ APIï¼šå…¨é¢è§£æä¸é«˜çº§å°è£…(2)</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨è¿ç§»ä¸­å­¦ä¹  React 18ï¼šä¸€ä»½æ¥è‡ª React 17 çš„å‡çº§é—®é¢˜æ¸…å•]]></title>    <link>https://juejin.cn/post/7584742635502305307</link>    <guid>https://juejin.cn/post/7584742635502305307</guid>    <pubDate>2025-12-18T04:01:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584742635502305307" data-draft-id="7584725529876070450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨è¿ç§»ä¸­å­¦ä¹  React 18ï¼šä¸€ä»½æ¥è‡ª React 17 çš„å‡çº§é—®é¢˜æ¸…å•"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-18T04:01:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•²ä»£ç çš„å½­äºæ™"/> <meta itemprop="url" content="https://juejin.cn/user/553809592465277"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨è¿ç§»ä¸­å­¦ä¹  React 18ï¼šä¸€ä»½æ¥è‡ª React 17 çš„å‡çº§é—®é¢˜æ¸…å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/553809592465277/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•²ä»£ç çš„å½­äºæ™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T04:01:12.000Z" title="Thu Dec 18 2025 04:01:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    29
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘å¯¹å…¬å¸çš„é¡¹ç›®åšäº†ä»React17åˆ°React18çš„å‡çº§ï¼Œæœ¬æ–‡è®°å½•ä¸‹å‡çº§åˆ°React18æœ‰å“ªäº›é‡è¦æˆ–ä¸å¸¸è¢«æ³¨æ„çš„å˜åŠ¨ç‚¹ã€‚</p>
<h2 data-id="heading-1">TypeScriptç±»å‹å˜åŠ¨</h2>
<h3 data-id="heading-2">1. FC ä¸­ä¸å†æœ‰ children ç±»å‹</h3>
<p>åŸå…ˆï¼š</p>
<pre><code class="hljs language-js" lang="js">interface modalContentProps {
  id?: string;
  [<span class="hljs-attr">key</span>: string]: string | <span class="hljs-title class_">ReactNode</span>;
}
</code></pre>
<p>ç°åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js">interface modalContentProps {
  id?: string;
  children?: <span class="hljs-title class_">ReactNode</span>; <span class="hljs-comment">//éœ€æ‰‹åŠ¨æŒ‡å®šchildren</span>
  [<span class="hljs-attr">key</span>: string]: string | <span class="hljs-title class_">ReactNode</span>;
}
</code></pre>
<h3 data-id="heading-3">2. FC ä¸­ä¸å†åŒ…å« ref çš„ç±»å‹å®šä¹‰</h3>
<p>åŸå…ˆï¼š</p>
<pre><code class="hljs language-js" lang="js">interface <span class="hljs-title class_">Props</span> {
  <span class="hljs-attr">ref</span>: <span class="hljs-title class_">ForwardedRef</span>&lt;any&gt;;
  <span class="hljs-attr">line</span>: number;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Single</span>: <span class="hljs-variable constant_">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">{ line }, ref</span>) =&gt;</span> {})
</code></pre>
<p>ç°åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js">interface <span class="hljs-title class_">Props</span> {
  <span class="hljs-attr">line</span>: number;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Single</span> = forwardRef&lt;<span class="hljs-title class_">ForwardedRef</span>&lt;any&gt;, <span class="hljs-title class_">Props</span>&gt;(<span class="hljs-function">(<span class="hljs-params">{ line }, ref</span>) =&gt;</span> {});
</code></pre>
<h3 data-id="heading-4">3. React.Key æ–°å¢ bigint ç±»å‹</h3>
<p>åŸå…ˆReact.keyçš„ç±»å‹ä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js">string | number
</code></pre>
<p>ç°åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js">string | number | bigint
</code></pre>
<h3 data-id="heading-5">4. ReactNode ç±»å‹ç§»é™¤äº†å¯¹ DOM Element çš„ç›´æ¥æ”¯æŒ</h3>
<p>åŸå…ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âœ… React 17 ä¸­ï¼ŒElement å¯ä»¥èµ‹å€¼ç»™ ReactNode</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">element</span>: <span class="hljs-title class_">Element</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-attr">reactNode</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> = element; <span class="hljs-comment">// âœ… ç¼–è¯‘é€šè¿‡</span>
</code></pre>
<p>ç°åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ React 18 ä¸­ï¼ŒElement ä¸èƒ½èµ‹å€¼ç»™ ReactNode</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">element</span>: <span class="hljs-title class_">Element</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-attr">reactNode</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> = element; <span class="hljs-comment">// âŒ ç±»å‹é”™è¯¯</span>
</code></pre>
<h2 data-id="heading-6">è¡Œä¸ºå˜åŠ¨</h2>
<h3 data-id="heading-7">1. å¹¶å‘æ¨¡å¼ä¸åŒæ­¥æ¨¡å¼</h3>
<p>ä½¿ç”¨æ–°çš„API createRoot å¼€å¯å¹¶å‘æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;

<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<p>åœ¨React 18ä¸­ï¼Œä¾æ—§å¯ä»¥ä½¿ç”¨åŒæ­¥æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
</code></pre>
<h3 data-id="heading-8">2. defaultPropså±æ€§ä¼šå‘Šè­¦æç¤º</h3>
<p>åŸå…ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">SingleTagModal</span>.<span class="hljs-property">defaultProps</span> = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'æ ‡ç­¾'</span>,
};
</code></pre>
<p>ç°åœ¨ä½¿ç”¨é»˜è®¤å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">SingleTagModal</span> = <span class="hljs-function">(<span class="hljs-params">{ title = <span class="hljs-string">'æ ‡ç­¾'</span> }</span>) =&gt;</span>{}
</code></pre>
<h3 data-id="heading-9">3. @testing-library/react-hookså¼ƒç”¨ï¼Œåˆå¹¶åˆ°@testing-library/react</h3>
<p>@testing-library/reactä»13ç‰ˆæœ¬å¼€å§‹æ”¯æŒReact18çš„å¹¶å‘æ¨¡å¼ï¼Œæ­¤æ—¶@testing-library/react-hooks çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸»è¦æ˜¯ renderHookï¼‰å·²å†…ç½®åˆ°@testing-library/reactä»13ä¸­</p>
<p>åŸå…ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { renderHook } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react-hooks'</span>
</code></pre>
<p>ç°åœ¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { renderHook } <span class="hljs-keyword">from</span> <span class="hljs-string">'@testing-library/react'</span>
</code></pre>
<h3 data-id="heading-10">4. è‡ªåŠ¨æ‰¹å¤„ç†</h3>
<p>React 17åŒæ­¥æ¨¡å¼ï¼šåœ¨Reactåˆæˆäº‹ä»¶ä¸­ï¼ŒsetState çš„æ›´æ–°ä¼šè¢«æ‰¹å¤„ç†ã€‚åœ¨JSåŸç”Ÿäº‹ä»¶ã€å®ä»»åŠ¡ã€å¾®ä»»åŠ¡çš„æƒ…å†µä¸‹ï¼ŒsetState çš„æ›´æ–°ä¸ä¼šè¢«æ‰¹å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//åŒæ­¥æ¨¡å¼</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c + <span class="hljs-number">1</span>);
  <span class="hljs-title function_">setFlag</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> !f);
  <span class="hljs-comment">// React ä¼šæ¸²æŸ“ä¸¤æ¬¡ï¼Œæ¯æ¬¡æ›´æ–°ä¸€ä¸ªçŠ¶æ€ï¼ˆæ²¡æœ‰æ‰¹å¤„ç†ï¼‰</span>
}, <span class="hljs-number">1000</span>);
</code></pre>
<p>React 18å¼€å¯å¹¶å‘æ¨¡å¼åï¼Œæ‰€æœ‰çš„æ›´æ–°éƒ½ä¼šè‡ªåŠ¨æ‰¹é‡å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å¹¶å‘æ¨¡å¼</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c + <span class="hljs-number">1</span>);
  <span class="hljs-title function_">setFlag</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> !f);
  <span class="hljs-comment">// æœ€ç»ˆï¼ŒReact å°†ä»…ä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ï¼ˆæ‰¹å¤„ç†ï¼‰</span>
}, <span class="hljs-number">1000</span>);
</code></pre>
<p>ç¤ºä¾‹ï¼šæ¯”è¾ƒå¸¸ç”¨çš„ahooksçš„useRequestï¼Œå¸¸å¸¸åœ¨onSuccesså›è°ƒä¸­å¤„ç†è¯·æ±‚æˆåŠŸåçš„è¡Œä¸º</p>
<p>useRequestéƒ¨åˆ†æºä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¯·æ±‚ä¹‹å‰ï¼Œå°†loadingç½®ä¸ºtrue</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>,
  params,
  ...state,
});

<span class="hljs-comment">// å¤„ç†è¯·æ±‚</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> servicePromise;

<span class="hljs-comment">//è¯·æ±‚ç»“æŸï¼Œå°†loadingç½®ä¸ºfalse</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({
  <span class="hljs-attr">data</span>: res,
  <span class="hljs-attr">error</span>: <span class="hljs-literal">undefined</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
});

<span class="hljs-comment">//æ‰§è¡ŒonSuccess</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">onSuccess</span>?.(res, params);
</code></pre>
<p>awaitåé¢çš„ä»»åŠ¡ä¸ºå¾®ä»»åŠ¡ï¼Œå› æ­¤åŒæ­¥æ¨¡å¼ä¸å¹¶å‘æ¨¡å¼çš„æ‰§è¡Œç»“æœä¸ä¸€æ ·</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">import</span> { useRequest } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
    }, <span class="hljs-number">1000</span>);
  });
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [flag, setFlag] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> { loading } = <span class="hljs-title function_">useRequest</span>(getData, {
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
      <span class="hljs-title function_">setFlag</span>(!flag);
    },
  });

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸²æŸ“'</span>, count, flag, loading);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> {loading ? 'loading' : count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
}
</code></pre>
<p>åŒæ­¥æ¨¡å¼ä¸‹æ‰“å°ç»“æœï¼šloadingç½®ä¸ºfalseåï¼Œåˆåˆ†åˆ«æ¸²æŸ“äº†ä¸¤æ¬¡ï¼Œåˆ†åˆ«å°†countç½®ä¸º1å’Œflagç½®ä¸ºtrue</p>
<pre><code class="hljs language-js" lang="js">æ¸²æŸ“ <span class="hljs-number">0</span> <span class="hljs-literal">false</span> <span class="hljs-literal">true</span>
æ¸²æŸ“ <span class="hljs-number">0</span> <span class="hljs-literal">false</span> <span class="hljs-literal">true</span>
æ¸²æŸ“ <span class="hljs-number">0</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>
æ¸²æŸ“ <span class="hljs-number">1</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span>
æ¸²æŸ“ <span class="hljs-number">1</span> <span class="hljs-literal">true</span> <span class="hljs-literal">false</span>
</code></pre>
<p>å¹¶å‘æ¨¡å¼ä¸‹æ‰“å°ç»“æœï¼šloadingç½®ä¸ºfalseï¼Œä¸countï¼Œflagçš„æ›´æ–°æ˜¯ä¸€èµ·çš„</p>
<pre><code class="hljs language-js" lang="js">æ¸²æŸ“ <span class="hljs-number">0</span> <span class="hljs-literal">false</span> <span class="hljs-literal">true</span>
æ¸²æŸ“ <span class="hljs-number">0</span> <span class="hljs-literal">false</span> <span class="hljs-literal">true</span>
æ¸²æŸ“ <span class="hljs-number">1</span> <span class="hljs-literal">true</span> <span class="hljs-literal">false</span>
</code></pre>
<p><strong><code>è‡ªåŠ¨æ‰¹å¤„ç†æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å˜åŠ¨ç‚¹ï¼Œå¾ˆå¤šå‡çº§ä¹‹åå¸¦æ¥çš„ä¸šåŠ¡bugï¼Œéƒ½æ˜¯è¯¥åŸå› å¯¼è‡´</code></strong></p>
<h3 data-id="heading-11">5. SuspenseÂ å†…çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p><strong>åœ¨å‡½æ•°ç»„ä»¶ä¸­çš„è¡¨ç°</strong></p>
<p>åŒæ­¥æ¨¡å¼ï¼šå½“ä¸€ä¸ªæ ‘é‡æ–°æŒ‚èµ·å¹¶æ¢å¤æ—¶ï¼Œä¸ä¼šè§¦å‘ä»»ä½•ç”Ÿå‘½å‘¨æœŸé’©å­</p>
<p>å¹¶å‘æ¨¡å¼ï¼šå½“ä¸€ä¸ªæ ‘é‡æ–°æŒ‚èµ·æ—¶ï¼Œè§¦å‘useLayoutEffectçš„cleanupï¼Œé‡æ–°æ¢å¤æ—¶ï¼Œè§¦å‘useLayoutEffect</p>
<p><strong>åœ¨ç±»ç»„ä»¶ä¸­çš„è¡¨ç°</strong></p>
<p>åŒæ­¥æ¨¡å¼ï¼šå½“ä¸€ä¸ªæ ‘é‡æ–°æŒ‚èµ·æ—¶ï¼Œä¸ä¼šè§¦å‘ä»»ä½•ç”Ÿå‘½å‘¨æœŸé’©å­ï¼›é‡æ–°æ¢å¤æ—¶ï¼Œè§¦å‘componentDidUpdate</p>
<p>å¹¶å‘æ¨¡å¼ï¼šå½“ä¸€ä¸ªæ ‘é‡æ–°æŒ‚èµ·æ—¶ï¼Œè§¦å‘componentWillUnmountï¼Œé‡æ–°æ¢å¤æ—¶ï¼Œè§¦å‘componentDidMount</p>
<p>å¯¹äºä½¿ç”¨<code>react-activation</code>å®ç°KeepAliveåŠŸèƒ½çš„é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å˜åŠ¨ç‚¹ï¼Œ<code>react-activation</code>æœ¬è´¨æ˜¯å€ŸåŠ©Suspenseå®ç°ç»„ä»¶çš„å†»ç»“ã€‚åœ¨React 18çš„å¹¶å‘æ¨¡å¼ä¸‹ï¼Œè¯¥åº“æ˜¯æœ‰bugçš„ã€‚</p>
<p>å› ä¸ºcomponentWillUnmountè¢«è§¦å‘ï¼Œå¯¼è‡´å­KeepAliveç»„ä»¶è¢«è¯¯åˆ ï¼Œå¯é€šè¿‡è°ƒæ•´ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼è§£å†³è¯¥bugã€‚è¿˜æœ‰ä¸ªé—®é¢˜å°±æ˜¯useLayoutEffectè§¦å‘æœºåˆ¶è°ƒæ•´ï¼Œè€Œantd4çš„åŠ¨ç”»æ•ˆæœæ˜¯åœ¨useLayoutEffectè§¦å‘ï¼Œä¼šæœ‰æŠ–åŠ¨ç­‰bugçš„å‘ç”Ÿï¼Œå¯æ”¹å†™<code>rc-motion</code>åº“ã€‚</p>
<h2 data-id="heading-12">æ–°å¢çš„APIä¸Hook</h2>
<h3 data-id="heading-13">1. flushSync</h3>
<ol>
<li>é€€å‡ºæ‰¹é‡æ›´æ–°</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { flushSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [count1, setCount1] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [count2, setCount2] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ›´æ–°'</span>)
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
        flushSync(() =&gt; {
          setCount1(count =&gt; count + 1);
        });
        // ç¬¬ä¸€æ¬¡æ›´æ–°
        flushSync(() =&gt; {
          setCount2(count =&gt; count + 1);
        });
        // ç¬¬äºŒæ¬¡æ›´æ–°
      }}
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>count1ï¼š {count1}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>count2ï¼š {count2}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>æç¤ºï¼šflushSync å‡½æ•°å†…éƒ¨çš„å¤šä¸ª setState ä»ç„¶ä¸ºæ‰¹é‡æ›´æ–°ï¼Œè¿™æ ·å¯ä»¥ç²¾å‡†æ§åˆ¶å“ªäº›ä¸éœ€è¦çš„æ‰¹é‡æ›´æ–°ã€‚</p>
<ol start="2">
<li>flushSync ç¡®ä¿äº†åœ¨ä¸‹ä¸€è¡Œä»£ç è¿è¡Œæ—¶ï¼ŒReact å·²ç»æ›´æ–°äº† DOM</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);

   <span class="hljs-comment">//æ‰“å°å€¼ä¸º0ï¼Œå› ä¸ºæ­¤æ—¶DOMè¿˜æœªæ›´æ–°</span>
   <span class="hljs-comment">//å¦‚æœä½¿ç”¨flushSyncåŒ…è£¹setCountï¼Œæ‰“å°ç»“æœå°†å˜ä¸º1</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ref'</span>, ref.<span class="hljs-property">current</span>.<span class="hljs-property">innerHTML</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>
      {count}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>å½“é‡åˆ°React17ä¸­æ²¡æœ‰ï¼Œä½†åœ¨18ä¸­å‡ºç°çš„éš¾ä»¥è§£å†³çš„é—®é¢˜æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨flushSyncï¼Œè€ŒésetTimeout</p>
<h3 data-id="heading-14">2. startTransition</h3>
<p>å¯ä»¥è®©ä½ åœ¨ä¸é˜»å¡ UI çš„æƒ…å†µä¸‹æ›´æ–° state</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { startTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// ç´§æ€¥æ›´æ–°: æ˜¾ç¤ºè¾“å…¥çš„å†…å®¹</span>
<span class="hljs-title function_">setInputValue</span>(input);

<span class="hljs-comment">// å°†ä»»ä½•å†…éƒ¨çš„çŠ¶æ€æ›´æ–°éƒ½æ ‡è®°ä¸ºè¿‡æ¸¡æ›´æ–°</span>
<span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// è¿‡æ¸¡æ›´æ–°: å±•ç¤ºç»“æœ</span>
  <span class="hljs-title function_">setSearchQuery</span>(input);
});
</code></pre>
<h3 data-id="heading-15">3. useTransition</h3>
<p>å¯ä»¥è®©ä½ åœ¨ä¸é˜»å¡ UI çš„æƒ…å†µä¸‹æ›´æ–° stateï¼Œæ¯”startTransitionå¤šä¸ªPendingçŠ¶æ€</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [ isPending , startTransition ] = useTransition ()
</code></pre>
<h3 data-id="heading-16">4. useDeferredValue</h3>
<p>è®©å¼€å‘è€…å»¶è¿Ÿæ›´æ–°UIçš„æŸäº›éƒ¨åˆ†ã€‚å¯ä»¥å»¶è¿Ÿæ¸²æŸ“ä¸ç´§æ€¥çš„éƒ¨åˆ†ï¼Œç±»ä¼¼äºé˜²æŠ–ä½†æ²¡æœ‰å›ºå®šçš„å»¶è¿Ÿæ—¶é—´ã€‚</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">const</span> deferredValue = <span class="hljs-title function_">useDeferredValue</span>(value);
</code></pre>
<h3 data-id="heading-17">5. useId</h3>
<p>æ”¯æŒåŒä¸€ä¸ªç»„ä»¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç”Ÿæˆç›¸åŒçš„å”¯ä¸€çš„ IDï¼Œé¿å… hydration çš„ä¸å…¼å®¹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> id = <span class="hljs-title function_">useId</span>()
</code></pre>
<h3 data-id="heading-18">6. useSyncExternalStore</h3>
<p>ç”¨äºè®¢é˜…å¤–éƒ¨æ•°æ®æºçš„å˜åŒ–ï¼Œå¹¶ç¡®ä¿Reactç»„ä»¶èƒ½å¤ŸåŒæ­¥åœ°å“åº”è¿™äº›å˜åŒ–ã€‚å¤§éƒ¨åˆ†æƒ…æ™¯æ˜¯ç”¨æ¥å¤„ç†Reduxã€MobXç­‰å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“çš„æ•°æ®è®¢é˜…ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> snapshot = <span class="hljs-title function_">useSyncExternalStore</span>(subscribe, getSnapshot, getServerSnapshot?)
</code></pre>
<h3 data-id="heading-19">7. useInsertionEffect</h3>
<p>useInsertionEffectæ˜¯ä¸€ä¸ªä¸“ä¸ºCSS-in-JSåº“çš„å¼€å‘è€…æ‰“é€ çš„é’©å­ï¼Œæ¯”useLayoutEffectæ‰§è¡Œæ—¶æœºæ›´æ—©ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">useInsertionEffect</span>(setup, deps?)
</code></pre>
<h2 data-id="heading-20">ç»“å°¾</h2>
<p>å¦‚æœè¿˜æœ‰å…¶ä»–æ¯”è¾ƒé‡è¦çš„å˜åŠ¨ç‚¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼ï¼ï¼</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Fblog%2F2022%2F03%2F29%2Freact-v18" target="_blank" title="https://zh-hans.react.dev/blog/2022/03/29/react-v18" ref="nofollow noopener noreferrer">zh-hans.react.dev/blog/2022/0â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Fblog%2F2022%2F03%2F08%2Freact-18-upgrade-guide" target="_blank" title="https://zh-hans.react.dev/blog/2022/03/08/react-18-upgrade-guide" ref="nofollow noopener noreferrer">zh-hans.react.dev/blog/2022/0â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tauri (21ï¼‰â€”â€”çª—å£ç¼©æ”¾åçš„â€å¤±ç„¦æƒŠé­‚â€ï¼Œæ¸¸æˆæ§åˆ¶æƒä¸¢å¤±äº†]]></title>    <link>https://juejin.cn/post/7585006378533486634</link>    <guid>https://juejin.cn/post/7585006378533486634</guid>    <pubDate>2025-12-18T12:01:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585006378533486634" data-draft-id="7585034139661860883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tauri (21ï¼‰â€”â€”çª—å£ç¼©æ”¾åçš„â€å¤±ç„¦æƒŠé­‚â€ï¼Œæ¸¸æˆæ§åˆ¶æƒä¸¢å¤±äº†"/> <meta itemprop="keywords" content="å‰ç«¯,APP,macOS"/> <meta itemprop="datePublished" content="2025-12-18T12:01:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tauri (21ï¼‰â€”â€”çª—å£ç¼©æ”¾åçš„â€å¤±ç„¦æƒŠé­‚â€ï¼Œæ¸¸æˆæ§åˆ¶æƒä¸¢å¤±äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T12:01:47.000Z" title="Thu Dec 18 2025 12:01:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†äº«äº†å¦‚ä½•åœ¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank" title="https://github.com/infinilabs/coco-app" ref="nofollow noopener noreferrer">Coco AI</a></strong> ä¸­å®ç°ä¸æ»‘çš„ NSPanel çª—å£å…¨å±ä½“éªŒã€‚ç„¶è€Œï¼Œå…¨å±åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜å¾€å¾€éšè—åœ¨ç»†èŠ‚ä¹‹ä¸­ã€‚</p>
<p>Coco AI çš„æ ¸å¿ƒäº®ç‚¹ä¹‹ä¸€æ˜¯å…¶æ—¥æ¸å¼ºå¤§çš„<strong>æ’ä»¶ç”Ÿæ€</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcoco.rs%2Fen%2Fintegration%2Fextensions" target="_blank" title="https://coco.rs/en/integration/extensions" ref="nofollow noopener noreferrer">Extensions</a>ï¼‰ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶ï¼Œåœ¨ Coco çš„æ‚¬æµ®çª—ä¸­ç›´æ¥è¿è¡Œå„ç§ Web åº”ç”¨ï¼Œç”šè‡³ç© Doom è¿™æ ·çš„å°æ¸¸æˆã€‚</p>
<p>ä½†æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€ä¸ªéå¸¸å½±å“å¿ƒæƒ…çš„ Bugï¼š</p>
<p><strong>å½“ç”¨æˆ·æ­£æ²‰æµ¸åœ¨æ¸¸æˆä¸­ï¼Œè§‰å¾—çª—å£å¤ªå°è€Œç‚¹å‡»â€œå…¨å±â€åï¼Œçªç„¶å‘ç°é”®ç›˜å¤±çµäº†â€”â€”WASD æ€ä¹ˆæŒ‰éƒ½æ²¡ååº”ï¼Œæ‰‹åŠ¨ç‚¹ç”»é¢ä¹Ÿä¸èƒ½ç»§ç»­æ“ä½œ...</strong></p>
<p>å¯¹äºä¸€æ¬¾è¿½æ±‚æè‡´ä½“éªŒçš„ç”Ÿäº§åŠ›å·¥å…·æ¥è¯´ï¼Œè¿™ç§â€œæ–­è§¦â€æ˜¯ä¸å¯æ¥å—çš„ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±åº¦å¤ç›˜è¿™ä¸ª**ç„¦ç‚¹ä¸¢å¤±ï¼ˆFocus Lossï¼‰**é—®é¢˜ï¼Œä»¥åŠæˆ‘ä»¬åœ¨ Coco App ä¸­çš„â€œç»„åˆæ‹³â€è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">åœºæ™¯å¤ç°</h2>
<ol>
<li>ç”¨æˆ·åœ¨ Coco AI ä¸­å¯åŠ¨äº†ä¸€ä¸ªæ¸¸æˆæ’ä»¶ï¼ˆé€šè¿‡ <code>iframe</code> åŠ è½½ï¼‰ã€‚</li>
<li>åˆå§‹çª—å£è¾ƒå°ï¼Œç”¨æˆ·é€šè¿‡ WASD æ§åˆ¶è§’è‰²ç§»åŠ¨ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</li>
<li>ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’çš„â€œå…¨å±â€æŒ‰é’®ï¼Œå¸Œæœ›è·å¾—æ²‰æµ¸ä½“éªŒã€‚</li>
<li>çª—å£ç¬é—´å˜å¤§é“ºæ»¡å±å¹•ï¼Œä½†æ­¤æ—¶æŒ‰ä¸‹ W é”®ï¼Œè§’è‰²çº¹ä¸ä¸åŠ¨ã€‚</li>
<li>ç”¨æˆ·æ‹¿èµ·é¼ æ ‡ä¸æ–­çš„ç‚¹å‡»ä¸€ä¸‹æ¸¸æˆç”»é¢ï¼Œæ§åˆ¶æƒä¹Ÿæœªèƒ½æ¢å¤ã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆä¼šå¤±ç„¦ï¼Ÿ</h2>
<p>è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äº DOM æ ‘çš„é‡å»ºå’Œçª—å£ç³»ç»Ÿçš„ç„¦ç‚¹ç®¡ç†æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯åœ¨ React + Tauri çš„æ··åˆæ¶æ„ä¸‹ï¼š</p>
<ol>
<li><strong>DOM é‡ç»˜/é‡æ’</strong>ï¼šå½“çª—å£ä»æ‚¬æµ®æ¨¡å¼åˆ‡æ¢åˆ°å…¨å±æ¨¡å¼æ—¶ï¼ŒReact ç»„ä»¶å¯èƒ½ä¼šå› ä¸ºçŠ¶æ€å˜åŒ–ï¼ˆå¦‚ <code>scale</code> ç¼©æ”¾ç³»æ•°æ”¹å˜ã€<code>layout</code> æ¨¡å¼åˆ‡æ¢ï¼‰è€Œé‡æ–°æ¸²æŸ“ã€‚å¦‚æœ <code>iframe</code> åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¢«å¸è½½å¹¶é‡æ–°æŒ‚è½½ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå…¨æ–°çš„ <code>iframe</code>ï¼Œä¹‹å‰çš„ç„¦ç‚¹è‡ªç„¶è¡ç„¶æ— å­˜ã€‚</li>
<li><strong>Native çª—å£ç„¦ç‚¹è½¬ç§»</strong>ï¼šè°ƒç”¨ Tauri çš„ <code>setWindowSize</code> æˆ– <code>setFullscreen</code> ç­‰åº•å±‚ API æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šæš‚æ—¶æŠŠç„¦ç‚¹ä» WebView å†…å®¹åŒºåŸŸç§»å¼€ï¼Œè½¬ç§»åˆ°çª—å£è¾¹æ¡†æˆ–ç³»ç»Ÿå±‚çº§ã€‚</li>
<li><strong>Iframe çš„éš”ç¦»æ€§</strong>ï¼š<code>iframe</code> å†…éƒ¨æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>window</code> ä¸Šä¸‹æ–‡ã€‚ä¸»æ–‡æ¡£ï¼ˆParentï¼‰è·å¾—ç„¦ç‚¹å¹¶ä¸æ„å‘³ç€ <code>iframe</code> è·å¾—ç„¦ç‚¹ã€‚ä½ éœ€è¦æ˜¾å¼åœ°æŠŠç„¦ç‚¹â€œä¼ é€’â€è¿›å»ã€‚</li>
</ol>
<h2 data-id="heading-3">Coco AI çš„è§£å†³æ–¹æ¡ˆï¼šå…¨æ–¹ä½ç„¦ç‚¹å®ˆæŠ¤</h2>
<p>ä¸ºäº†ç¡®ä¿ç”¨æˆ·ä½“éªŒçš„è¿è´¯æ€§ï¼Œæˆ‘ä»¬åœ¨ <code>ViewExtension.tsx</code> ç»„ä»¶ä¸­å®æ–½äº†ä¸€å¥—å¤šå±‚çº§çš„ç„¦ç‚¹ç®¡ç†ç­–ç•¥ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸€æ‹›ï¼šç»„ä»¶æŒ‚è½½åçš„è‡ªåŠ¨èšç„¦</h3>
<p>åœ¨ React ä¸­ï¼Œåˆ©ç”¨ <code>ref</code> å’Œ <code>onLoad</code> äº‹ä»¶ï¼Œç¡®ä¿æ’ä»¶åŠ è½½å®Œæ¯•çš„é‚£ä¸€åˆ»ï¼Œç„¦ç‚¹å°±è‡ªåŠ¨é”å®šåœ¨å®ƒèº«ä¸Šã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">&lt;div
  <span class="hljs-comment">// ç»‘å®š Ref</span>
  ref={iframeRef}
  <span class="hljs-comment">// ä»»ä½•ç‚¹å‡»å¤–å±‚å®¹å™¨çš„æ“ä½œï¼Œéƒ½æŠŠç„¦ç‚¹é€ç»™ iframe</span>
  onClickCapture={<span class="hljs-function">() =&gt;</span> {
    iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
  }}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">{iframeRef}</span>
    <span class="hljs-attr">src</span>=<span class="hljs-string">{fileUrl}</span>
    // <span class="hljs-attr">Iframe</span> <span class="hljs-attr">åŠ è½½å®Œæ¯•ç¬é—´èšç„¦</span>
    <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{(event)</span> =&gt;</span> {
      event.currentTarget.focus();
      try {
        // å°è¯•æ·±å…¥èšç„¦åˆ° iframe å†…éƒ¨çš„ window
        iframeRef.current?.contentWindow?.focus();
      } catch (e) {
        console.warn("Failed to focus iframe content:", e);
      }
    }}
    // å…è®¸å¿…è¦çš„æƒé™ï¼šå…¨å±ã€é¼ æ ‡é”å®šï¼ˆFPSæ¸¸æˆå¿…å¤‡ï¼‰ã€æ‰‹æŸ„
    allow="fullscreen; pointer-lock; gamepad"
    tabIndex={-1}
  /&gt;</span>
&lt;/div&gt;
</code></pre>
<h3 data-id="heading-5">ç¬¬äºŒæ‹›ï¼šçŠ¶æ€å˜åŒ–åçš„å»¶è¿Ÿèšç„¦</h3>
<p>å½“ä½ æ‰§è¡Œå…¨å±æˆ–ç¼©æ”¾æ“ä½œåï¼ŒNative å±‚çš„çª—å£è°ƒæ•´æ˜¯å¼‚æ­¥çš„ï¼ŒReact çš„æ¸²æŸ“ä¹Ÿæ˜¯å¼‚æ­¥çš„ã€‚å¦‚æœä½ ç«‹å³è°ƒç”¨ <code>focus()</code>ï¼Œå¯èƒ½ DOM è¿˜æ²¡ç¨³ï¼Œæˆ–è€…çª—å£è¿˜åœ¨åŠ¨ç”»ä¸­ï¼Œå¯¼è‡´èšç„¦å¤±è´¥ã€‚</p>
<p>æˆ‘ä»¬çš„<strong>ç§˜è¯€æ˜¯ <code>setTimeout</code></strong>ï¼Œç­‰å¾…ä¸€è½®äº‹ä»¶å¾ªç¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> applyFullscreen = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">next</span>: <span class="hljs-built_in">boolean</span>) =&gt; {
  <span class="hljs-comment">// ... æ‰§è¡Œçª—å£å¤§å°è°ƒæ•´é€»è¾‘ ...</span>
  
  <span class="hljs-comment">// ç­‰å¾…ç³»ç»Ÿçª—å£è°ƒæ•´å®Œæˆä¸” React æ¸²æŸ“å®Œæ¯•</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 1. èšç„¦ iframe å…ƒç´ æœ¬èº«</span>
    iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 2. å°è¯•èšç„¦ iframe å†…éƒ¨å†…å®¹ï¼ˆå¤„ç†è·¨åŸŸé™åˆ¶æ—¶å¯èƒ½æŠ¥é”™ï¼ŒåŠ  try-catchï¼‰</span>
      iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">focus</span>();
    } <span class="hljs-keyword">catch</span> {}
  }, <span class="hljs-number">0</span>);
}, []);
</code></pre>
<h3 data-id="heading-6">ç¬¬ä¸‰æ‹›ï¼šæ˜¾å¼çš„â€œç„¦ç‚¹æ•‘ç”Ÿåœˆâ€</h3>
<p>ä¸ºäº†åº”å¯¹æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶è„šæœ¬è‡ªåŠ¨èšç„¦ç­‰æç«¯æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ UI ä¸Šè®¾è®¡äº†ä¸€ä¸ªæ˜¾å¼çš„ <strong>Focus æŒ‰é’®</strong>ã€‚è¿™ä¸ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½è¡¥æ•‘ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè§†è§‰æç¤ºã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">{<span class="hljs-comment">/* Focus helper button */</span>}
&lt;button
  aria-label=<span class="hljs-string">"Focus Game"</span>
  className=<span class="hljs-string">"absolute top-2 right-12 z-10 p-2 bg-black/50 hover:bg-black/70 rounded text-white transition-colors"</span>
  onClick={<span class="hljs-function">() =&gt;</span> {
    iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
    <span class="hljs-keyword">try</span> {
      iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">focus</span>();
    } <span class="hljs-keyword">catch</span> {}
  }}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FocusIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"size-4"</span>/&gt;</span></span>
&lt;/button&gt;
</code></pre>
<p>å½“ç”¨æˆ·å‘ç°æ§åˆ¶å¤±çµæ—¶ï¼Œæ½œæ„è¯†ä¼šå¯»æ‰¾ç•Œé¢ä¸Šçš„äº¤äº’ç‚¹ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°±èƒ½ç¬é—´æ‰¾å›ç„¦ç‚¹ã€‚</p>
<h3 data-id="heading-7">ç¬¬å››æ‹›ï¼šäº‹ä»¶æ•è·ï¼ˆCapture Phaseï¼‰</h3>
<p>æœ‰æ—¶å€™ç”¨æˆ·ç‚¹å‡»äº†çª—å£è¾¹ç¼˜çš„ç©ºç™½åŒºåŸŸï¼ˆpadding æˆ– marginï¼‰ï¼Œç„¦ç‚¹ä¼šè·‘å›ä¸»æ–‡æ¡£ <code>body</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å®¹å™¨ä¸Šç›‘å¬ <code>onMouseDownCapture</code> æ¥æ‹¦æˆªè¿™äº›ç‚¹å‡»ï¼Œå¼ºè¡ŒæŠŠç„¦ç‚¹æŒ‰å› <code>iframe</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript">&lt;div
  className=<span class="hljs-string">"w-full h-full flex flex-col items-center justify-center"</span>
  <span class="hljs-comment">// æ•è·é˜¶æ®µæ‹¦æˆªï¼Œæ¯”å†’æ³¡æ›´æ—©</span>
  onMouseDownCapture={<span class="hljs-function">() =&gt;</span> {
    iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
  }}
  onPointerDown={<span class="hljs-function">() =&gt;</span> {
    iframeRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">focus</span>();
  }}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">...</span> /&gt;</span></span>
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-8">å°ç»“</h2>
<p>ç„¦ç‚¹ç®¡ç†çœ‹ä¼¼ç®€å•ï¼Œä½†åœ¨æ„å»ºåƒ <strong>Coco AI</strong> è¿™æ ·å¤æ‚çš„æ¡Œé¢+Web æ··åˆåº”ç”¨æ—¶ï¼Œå®ƒç›´æ¥å…³ç³»åˆ°ç”¨æˆ·çš„æ²‰æµ¸æ„Ÿã€‚é€šè¿‡è¿™å¥— <strong>â€œä¸»åŠ¨å‡ºå‡» + çºµæ·±é˜²å¾¡ + å¼‚æ­¥ç­‰å¾… + å…œåº•æ–¹æ¡ˆâ€</strong> çš„ç»„åˆæ‹³ï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†è·¨å¹³å°ã€è·¨çª—å£å°ºå¯¸ä¸‹çš„ç„¦ç‚¹ä¸¢å¤±é—®é¢˜ã€‚</p>
<p>ç°åœ¨ï¼Œæ— è®ºæ˜¯åœ¨å†™ä»£ç æ—¶å¿«é€ŸæŸ¥é˜…æ–‡æ¡£ï¼Œè¿˜æ˜¯åœ¨ä¼‘æ¯æ—¶ç©ä¸€æŠŠå°æ¸¸æˆï¼ŒCoco AI éƒ½èƒ½æä¾›æ— ç¼ã€æµç•…çš„äº¤äº’ä½“éªŒã€‚</p>
<p>å¦‚æœä½ å¯¹æˆ‘ä»¬çš„æŠ€æœ¯ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ–è€…æƒ³ä½“éªŒä¸€ä¸‹è¿™æ¬¾å…¨èƒ½çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæ¬¢è¿è®¿é—®æˆ‘ä»¬çš„å¼€æºä»“åº“å’Œå®˜ç½‘ï¼š</p>
<ul>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank" title="https://github.com/infinilabs/coco-app" ref="nofollow noopener noreferrer">github.com/infinilabs/â€¦</a></li>
<li><strong>Website</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fcoco.rs" target="_blank" title="https://coco.rs" ref="nofollow noopener noreferrer">coco.rs</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå››ï¼‰å®æˆ˜ï¼šè§£æ”¾ç»˜åˆ¶UIçš„ç¹çå·¥ä½œ]]></title>    <link>https://juejin.cn/post/7585005164726370342</link>    <guid>https://juejin.cn/post/7585005164726370342</guid>    <pubDate>2025-12-18T09:54:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585005164726370342" data-draft-id="7584831190731096090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå››ï¼‰å®æˆ˜ï¼šè§£æ”¾ç»˜åˆ¶UIçš„ç¹çå·¥ä½œ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-18T09:54:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TimeFine"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123802615"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå››ï¼‰å®æˆ˜ï¼šè§£æ”¾ç»˜åˆ¶UIçš„ç¹çå·¥ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123802615/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TimeFine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T09:54:26.000Z" title="Thu Dec 18 2025 09:54:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    56
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…¬å¸å½“å‰é¡¹ç›®æ˜¯ä½¿ç”¨Figma UIè®¾è®¡å·¥å…·ï¼Œä»¥è¿™ä¸ªä¸ºä¾‹ã€‚</p>
<p>å…¶ä»–è®¾è®¡å·¥å…·ä¾‹å¦‚è“æ¹–ç­‰å¦‚æœæœ‰MCPï¼Œä½¿ç”¨åŒç†ã€‚</p>
<p>Figmaå½“å‰æ˜¯æœ‰MCPä¾›å¯¹å¤–ä½¿ç”¨çš„ã€‚é…ç½®æ•™ç¨‹è§Figmaå®˜ç½‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç¼–è¾‘skill</h2>
<p>çœ‹å®Œä¹‹å‰çš„æ–‡ç« å¤§æ¦‚å°±äº†è§£äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªskillã€‚</p>
<p>åœ¨<code>skills</code>æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªå­æ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹åå­—æ˜¯<code>figma_ui_to_xml</code>ï¼Œç„¶ååœ¨<code>figma_ui_to_xml</code>å†…åˆ›å»ºä¸€ä¸ªMarkdownæ–‡ä»¶ï¼Œæ–‡ä»¶åæ˜¯å›ºå®šçš„<code>SKILL.md</code>ã€‚</p>
<p>ç¼–è¾‘<code>name</code>å’Œ<code>description</code>ï¼Œä¸ºäº†è®©skillè¢«è°ƒç”¨ï¼Œæˆ‘åœ¨<code>description</code>åŠ ä¸Šäº†ç²˜è´´Figma MCPé“¾æ¥æ—¶ä¸€å®šæœ‰çš„ä¸€æ®µæ–‡æ¡ˆ<code>Implement this Figma design.</code>ã€‚ä¸‹é¢æ˜¯Figma MCPç²˜è´´é“¾æ¥çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Implement <span class="hljs-keyword">this</span> Figma design.
<span class="hljs-meta">@https</span>:<span class="hljs-comment">//www.figma.com/design/Lod2RUqzBCaISqN4/FOXX-UI-library?node-id=43080-44506&amp;m=dev</span>
</code></pre>
<p>ä¸‹é¢æ˜¯<code>name</code>å’Œ<code>description</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin">---
name: figma_ui_to_xml
description: Implement <span class="hljs-keyword">this</span> Figma designã€‚å°†Figma MCPé“¾æ¥è½¬æ¢ä¸ºAndroidåŸç”ŸXMLã€‚
---
</code></pre>
<p>åœ¨SKILL.mdä¸­æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µç¼–è¾‘æç¤ºè¯ï¼ŒæŠŠæ‰€æœ‰çš„å¯ä»¥å‚è€ƒçš„æ–‡ä»¶ï¼Œä¾‹å¦‚æŠ½å–çš„styleï¼Œé¢œè‰²ç­‰éƒ½å†™è¿›å»ï¼Œä¸‹é¢æ˜¯æˆ‘åˆ å‡è‡ªå·±é¡¹ç›®æ•æ„Ÿä¿¡æ¯åçš„æç¤ºè¯ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">---
name: figma_ui_to_xml
description: Implement <span class="hljs-keyword">this</span> Figma designã€‚å°†Figma MCPé“¾æ¥è½¬æ¢ä¸ºAndroidåŸç”ŸXMLã€‚
---
# å°†Figma MCPé“¾æ¥è½¬æ¢ä¸ºAndroidåŸç”ŸXML

â€¢ ä¸¥æ ¼æŒ‰ä¸‹é¢æµç¨‹æ‰§è¡Œï¼ˆåç»­æ¯æ¬¡ä½ ç»™ Figma MCP é“¾æ¥éƒ½ç…§æ­¤åšï¼‰ï¼š

  <span class="hljs-number">1.</span> æä¾› Figma MCP åŸå§‹æ•°æ®é“¾æ¥/èŠ‚ç‚¹é“¾æ¥åï¼Œå…ˆç”¨ Figma MCP æŠŠèŠ‚ç‚¹çš„ç»“æ„ä¿¡æ¯ã€å°ºå¯¸/ä½ç½®ã€é¢œè‰²/å˜é‡ã€æ–‡æœ¬å†…å®¹ã€å­—ä½“ä¸å­—å·ã€é—´è·ã€åœ†è§’/æè¾¹/é˜´å½±ç­‰å…¨éƒ¨æå–
     å‡ºæ¥ï¼ˆå¿…è¦æ—¶å†å– screenshot è¾…åŠ©æ ¸å¯¹ï¼‰ã€‚
  <span class="hljs-number">2.</span> æŠŠæå–åˆ°çš„è®¾è®¡å…ƒç´ æ˜ å°„æˆ Android åŸç”Ÿ Viewï¼šæ ¹å¸ƒå±€ä¸€å¾‹ ConstraintLayoutï¼Œmatch_parentï¼Œå¹¶æŠŠ constraints å†™å®Œæ•´ï¼Œé¿å…è¿è¡Œæ—¶è·‘åˆ° (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)ã€‚
  <span class="hljs-number">3.</span> ä¸¥æ ¼æŒ‰é¡¹ç›®è§„èŒƒç”Ÿæˆ XMLï¼š
      - View å°½é‡ç”¨ AppCompatï¼ˆå¦‚ AppCompatTextViewï¼‰ã€‚
      - æ‰€æœ‰ id ç”¨ snake_caseï¼ˆä¾‹å¦‚ @+id/tv_titleï¼‰ã€‚
      - å°ºå¯¸ç”¨ dpï¼Œå­—å·ç”¨ spã€‚
      - æ–‡æœ¬ä¼˜å…ˆæ”¾ res/values/strings.xmlï¼›å¦‚æœç¡®è®¤æ‰¾ä¸åˆ°å¯¹åº” keyï¼Œå°±æŒ‰ä½ è§„åˆ™åœ¨ XML é‡Œå†™æ­»æ–‡æ¡ˆã€‚
      - é¢œè‰²ä¼˜å…ˆç”¨ res/values/colors.xml èµ„æºï¼›æ²¡æœ‰å°±å†™æ­» #RRGGBBã€‚
      - å­—ä½“æŒ‰çº¦å®šï¼šRegular/Light/Medium â†’ roboto_regular / roboto_light / roboto_mediumã€‚
      - æ‰€æœ‰æ–‡æœ¬æ§ä»¶ç»Ÿä¸€åŠ  android:lineSpacingExtra=<span class="hljs-string">"3dp"</span>ï¼Œå¿½ç•¥ letterSpacingã€‚
  <span class="hljs-number">4.</span> ä¼˜å…ˆå¤ç”¨é¡¹ç›®å·²æœ‰èµ„æºï¼š
      - res/drawable é‡Œç°æœ‰çš„èƒŒæ™¯/åœ†è§’/è¾¹æ¡†å°½é‡ç›´æ¥å¼•ç”¨ï¼Œä¸é‡å¤é€ ã€‚
      - Button ä¼˜å…ˆå¥—ç”¨ res/values/styles_buttons.xml é‡Œçš„å…¬å…±æ ·å¼ã€‚
      - TextView ä¼˜å…ˆå¥—ç”¨ res/values/styles_textviews.xml é‡Œçš„å…¬å…±æ ·å¼ã€‚
  <span class="hljs-number">5.</span> è¾“å‡ºæœ€ç»ˆçš„ Android XML å¸ƒå±€ä»£ç ï¼ˆå¦‚æœéœ€è¦è¡¥å…… strings/colors/drawable çš„å»ºè®®ï¼Œå•ç‹¬åˆ—å‡ºâ€œå»ºè®®æ–°å¢é¡¹â€ï¼Œä½†ä¸å¼ºè¡Œå‘æ•£ï¼‰ã€‚
</code></pre>
<h2 data-id="heading-1">äºŒã€å®é™…ä½¿ç”¨</h2>
<p>æˆ‘å®‰è£…äº†Figma.appç¨‹åºï¼Œå¼€å¯äº†æœ¬åœ°MCPæœåŠ¡ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚</p>
<p>ä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä»Figma MCPç²˜è´´é“¾æ¥ï¼Œå›è½¦å³å¯ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ä¸Šé¢çš„skillã€‚</p>
<p>ä½¿ç”¨highæ¨¡å‹å¯èƒ½æ—¶é—´æ¯”è¾ƒé•¿ï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šå„¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0840b9431c34840b1014f58a3df573c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGltZUZpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732553&amp;x-signature=%2Fz3D2Ak%2FIrT%2BKnYWzVkocGFEc2Q%3D" alt="image.png" loading="lazy"/></p>
<p>ä¾‹å¦‚ä¸‹é¢çš„UIè®¾è®¡ç¨¿ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cec39624be2c4c1f969275fcc0c10b78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGltZUZpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732553&amp;x-signature=8gFsW6c%2FHl5O5x5b%2BG1hkWC8eDU%3D" alt="image.png" loading="lazy"/></p>
<p>Codexå®ç°çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
  &lt;androidx.constraintlayout.widget.ConstraintLayout
      xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
      xmlns:app=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
      android:id=<span class="hljs-string">"@+id/root"</span>
      android:layout_width=<span class="hljs-string">"match_parent"</span>
      android:layout_height=<span class="hljs-string">"match_parent"</span>
      android:background=<span class="hljs-string">"@color/white"</span>&gt;

      &lt;androidx.constraintlayout.widget.ConstraintLayout
          android:id=<span class="hljs-string">"@+id/card_container"</span>
          android:layout_width=<span class="hljs-string">"0dp"</span>
          android:layout_height=<span class="hljs-string">"182dp"</span>
          android:layout_marginStart=<span class="hljs-string">"16dp"</span>
          android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
          android:layout_marginTop=<span class="hljs-string">"98dp"</span>
          android:background=<span class="hljs-string">"@drawable/item_card_bg"</span>
          app:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
          app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
          app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_time"</span>
              style=<span class="hljs-string">"@style/txt_light_3"</span>
              android:layout_width=<span class="hljs-string">"wrap_content"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginStart=<span class="hljs-string">"16dp"</span>
              android:layout_marginTop=<span class="hljs-string">"14dp"</span>
              android:text=<span class="hljs-string">"2024-11-05  16:30:48"</span>
              android:textColor=<span class="hljs-string">"@color/color_second_txt"</span>
              android:textSize=<span class="hljs-string">"12sp"</span>
              app:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
              app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_status"</span>
              style=<span class="hljs-string">"@style/txt_light_3"</span>
              android:layout_width=<span class="hljs-string">"wrap_content"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginTop=<span class="hljs-string">"12dp"</span>
              android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
              android:text=<span class="hljs-string">"Completed"</span>
              android:textColor=<span class="hljs-string">"@color/color_status_pending"</span>
              android:textSize=<span class="hljs-string">"15sp"</span>
              app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
              app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatImageView
              android:id=<span class="hljs-string">"@+id/iv_plan_icon"</span>
              android:layout_width=<span class="hljs-string">"56dp"</span>
              android:layout_height=<span class="hljs-string">"56dp"</span>
              android:layout_marginStart=<span class="hljs-string">"16dp"</span>
              android:layout_marginTop=<span class="hljs-string">"44dp"</span>
              android:background=<span class="hljs-string">"@drawable/bg_topup_icon_bg"</span>
              android:padding=<span class="hljs-string">"10dp"</span>
              app:srcCompat=<span class="hljs-string">"@drawable/ic_topup_plan"</span>
              app:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
              app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_title"</span>
              style=<span class="hljs-string">"@style/txt_regular_3"</span>
              android:layout_width=<span class="hljs-string">"0dp"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginStart=<span class="hljs-string">"8dp"</span>
              android:layout_marginTop=<span class="hljs-string">"44dp"</span>
              android:layout_marginEnd=<span class="hljs-string">"8dp"</span>
              android:ellipsize=<span class="hljs-string">"end"</span>
              android:maxLines=<span class="hljs-string">"1"</span>
              android:text=<span class="hljs-string">"2GB Top-up (30-day)"</span>
              android:textColor=<span class="hljs-string">"@color/color_default_txt"</span>
              android:textSize=<span class="hljs-string">"16sp"</span>
              app:layout_constraintEnd_toStartOf=<span class="hljs-string">"@id/tv_price"</span>
              app:layout_constraintStart_toEndOf=<span class="hljs-string">"@id/iv_plan_icon"</span>
              app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_price"</span>
              style=<span class="hljs-string">"@style/txt_medium_3"</span>
              android:layout_width=<span class="hljs-string">"wrap_content"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
              android:text=<span class="hljs-string">"US$9.99"</span>
              android:textColor=<span class="hljs-string">"@color/color_default_txt"</span>
              android:textSize=<span class="hljs-string">"14sp"</span>
              app:layout_constraintBaseline_toBaselineOf=<span class="hljs-string">"@id/tv_title"</span>
              app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_desc"</span>
              style=<span class="hljs-string">"@style/txt_light_3"</span>
              android:layout_width=<span class="hljs-string">"0dp"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginStart=<span class="hljs-string">"8dp"</span>
              android:layout_marginTop=<span class="hljs-string">"6dp"</span>
              android:layout_marginEnd=<span class="hljs-string">"8dp"</span>
              android:maxLines=<span class="hljs-string">"2"</span>
              android:text=<span class="hljs-string">"2GB cellular data usage within 30 days."</span>
              android:textColor=<span class="hljs-string">"@color/color_second_txt"</span>
              android:textSize=<span class="hljs-string">"12sp"</span>
              app:layout_constraintEnd_toStartOf=<span class="hljs-string">"@id/tv_quantity"</span>
              app:layout_constraintStart_toEndOf=<span class="hljs-string">"@id/iv_plan_icon"</span>
              app:layout_constraintTop_toBottomOf=<span class="hljs-string">"@id/tv_title"</span>/&gt;

          &lt;androidx.appcompat.widget.AppCompatTextView
              android:id=<span class="hljs-string">"@+id/tv_quantity"</span>
              style=<span class="hljs-string">"@style/txt_light_3"</span>
              android:layout_width=<span class="hljs-string">"wrap_content"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
              android:text=<span class="hljs-string">"x1"</span>
              android:textColor=<span class="hljs-string">"@color/color_second_txt"</span>
              android:textSize=<span class="hljs-string">"10sp"</span>
              app:layout_constraintBaseline_toBaselineOf=<span class="hljs-string">"@id/tv_desc"</span>
              app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>/&gt;

          &lt;LinearLayout
              android:id=<span class="hljs-string">"@+id/ll_total"</span>
              android:layout_width=<span class="hljs-string">"wrap_content"</span>
              android:layout_height=<span class="hljs-string">"wrap_content"</span>
              android:layout_marginTop=<span class="hljs-string">"113dp"</span>
              android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
              android:gravity=<span class="hljs-string">"center_vertical"</span>
              android:orientation=<span class="hljs-string">"horizontal"</span>
              app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
              app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span>&gt;

              &lt;androidx.appcompat.widget.AppCompatTextView
                  android:id=<span class="hljs-string">"@+id/tv_total_label"</span>
                  style=<span class="hljs-string">"@style/txt_light_3"</span>
                  android:layout_width=<span class="hljs-string">"wrap_content"</span>
                  android:layout_height=<span class="hljs-string">"wrap_content"</span>
                  android:text=<span class="hljs-string">"1 Item(s), Total:"</span>
                  android:textColor=<span class="hljs-string">"@color/color_txt_secondary"</span>
                  android:textSize=<span class="hljs-string">"12sp"</span>/&gt;

              &lt;androidx.appcompat.widget.AppCompatTextView
                  android:id=<span class="hljs-string">"@+id/tv_total_value"</span>
                  style=<span class="hljs-string">"@style/txt_light_3"</span>
                  android:layout_width=<span class="hljs-string">"wrap_content"</span>
                  android:layout_height=<span class="hljs-string">"wrap_content"</span>
                  android:layout_marginStart=<span class="hljs-string">"4dp"</span>
                  android:text=<span class="hljs-string">"US$9.99"</span>
                  android:textColor=<span class="hljs-string">"@color/color_default_txt"</span>
                  android:textSize=<span class="hljs-string">"14sp"</span>/&gt;
          &lt;/LinearLayout&gt;

          &lt;androidx.appcompat.widget.AppCompatButton
              android:id=<span class="hljs-string">"@+id/btn_refund"</span>
              style=<span class="hljs-string">"@style/bt_primary_light_bg_primary_text"</span>
              android:layout_width=<span class="hljs-string">"104dp"</span>
              android:layout_height=<span class="hljs-string">"28dp"</span>
              android:layout_marginTop=<span class="hljs-string">"12dp"</span>
              android:layout_marginEnd=<span class="hljs-string">"16dp"</span>
              android:gravity=<span class="hljs-string">"center"</span>
              android:text=<span class="hljs-string">"Refund"</span>
              app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
              app:layout_constraintTop_toBottomOf=<span class="hljs-string">"@id/ll_total"</span>/&gt;

      &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

  &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<p>å®é™…ç”Ÿæˆçš„xmlï¼Œå¯ç”¨åº¦å·²ç»ç›¸å½“é«˜äº†ï¼Œå¤ç”¨é¡¹ç›®ä¸­å·²æœ‰çš„drawableã€styleã€colorã€stringç­‰ï¼Œå†™æ³•ä¹Ÿæ˜¯å‚ç…§äº†é¡¹ç›®ä¸­çš„å…¶ä»–å¸ƒå±€ï¼Œæœ€åè‡ªå·±å¾®è°ƒä¸€ä¸‹å³å¯ã€‚</p>
<p>å¦‚æœè¦ç”ŸæˆComposeä»£ç å…¶å®åŒç†ï¼Œä¸€é€šç™¾é€šï¼Œå†™å¥½skillå³å¯ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€AIçš„å±€é™æ€§</h2>
<h3 data-id="heading-3">1ã€è¯»å–çš„å›¾ç‰‡æ–‡ä»¶æœ‰æ—¶å€™ä¸æ­£ç¡®</h3>
<p>å› ä¸ºå›¾ç‰‡èµ„æºä¹Ÿæ˜¯åŒ…å«å¤šå›¾å±‚çš„ï¼Œæœ‰æ—¶å€™ä¸‹è½½ä¸‹æ¥çš„ä¸å¯¹ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚å¦å¤–å¾ˆå¤šæ—¶å€™ä¸‹è½½çš„pngç­‰æ ¼å¼å›¾ç‰‡æˆ‘ä»¬éœ€è¦å‹ç¼©åä½¿ç”¨ï¼Œè¿™ä¸€ç‚¹ä¹Ÿéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚</p>
<h3 data-id="heading-4">2ã€æ–‡æ¡ˆçš„å¤„ç†</h3>
<p>æ¶‰åŠåˆ°å¤šè¯­è¨€çš„è¯ï¼Œæ–°å¢çš„æ–‡æ¡ˆæ˜¯ä¸èƒ½è®©AIç›´æ¥æ”¾å…¥<code>strings.xml</code>ï¼Œé¡¹ç›®ä¸­å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç¿»è¯‘è¡¨ï¼Œéœ€è¦å…ˆæ”¾å…¥ç¿»è¯‘è¡¨ä¸­ç¿»è¯‘åï¼Œå†é€šè¿‡pythonå†™å…¥é¡¹ç›®ã€‚</p>
<h3 data-id="heading-5">3ã€é¢œè‰²çš„å¤„ç†</h3>
<p>æ¶‰åŠåˆ°æ—¥å¤œé—´æ¨¡å¼ç­‰ï¼ŒUIä¸€èˆ¬ä¼šæœ‰å¤šä»½ï¼Œä¾‹å¦‚æ—¥é—´UIã€å¤œé—´UIç­‰ï¼Œæ–°å¢çš„è‰²å€¼ä¸€èˆ¬æ˜¯æ—¥å¤œé—´è‰²æˆå¯¹å‡ºç°çš„ï¼Œè¿™æ ·é™¤éç›´æ¥ç»™å‡ºå¤šä»½UIï¼Œä¸ç„¶AIæ˜¯ä¸çŸ¥é“å¦‚ä½•é€‚é…æ—¥å¤œé—´è‰²çš„ã€‚</p>
<h3 data-id="heading-6">4ã€UIä¸Šå¤æ‚çš„æ»‘åŠ¨äº‹ä»¶</h3>
<p>å¤æ‚çš„æ»‘åŠ¨ã€åŠ¨ç”»ç­‰ï¼Œé™æ€UIä½“ç°ä¸å‡ºæ¥ï¼Œæ‰€ä»¥ç”Ÿæˆä»£ç è‚¯å®šä¼šæœ‰æ‰€æ¬ ç¼ºï¼Œä½†å¯ä»¥é€šè¿‡å¤šæ¬¡å¯¹è¯å¼¥è¡¥ä¸€éƒ¨åˆ†ï¼Œå®åœ¨ä¸è¡Œåªèƒ½è‡ªå·±åŠ¨æ‰‹å†™äº†ã€‚</p>
<h4 data-id="heading-7">5ã€ä¸éƒ½æ˜¯å®Œå…¨ç¬¦åˆskillçš„è¦æ±‚</h4>
<p>æ¯æ¬¡è¿”å›ä¸éƒ½æ˜¯å®Œå…¨ç¬¦åˆskillçš„è¦æ±‚ï¼Œéœ€è¦è°ƒæ•´skillï¼Œæˆ–è€…äºŒæ¬¡å¯¹è¯è®©AIçº é”™ã€‚</p>
<h2 data-id="heading-8">å››ã€æ€»ç»“</h2>
<p>è™½ç„¶AIè¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œä½†ç›®å‰å·²ç»è§£å†³äº†90%çš„é—®é¢˜ï¼Œå‰©ä½™çš„å·¥ä½œæˆ‘ä»¬è‡ªå·±è°ƒæ•´ä¸€ä¸‹å³å¯ã€‚è¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè§£æ”¾äº†æˆ‘ä»¬ç¹ççš„å†™UIçš„å·¥ä½œï¼Œè½»æ¾ä¸å°‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Resize äº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼šéšå¼é—­åŒ…çš„ â€œéšå½¢é™·é˜±â€]]></title>    <link>https://juejin.cn/post/7585013463857889330</link>    <guid>https://juejin.cn/post/7585013463857889330</guid>    <pubDate>2025-12-18T08:47:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585013463857889330" data-draft-id="7585013463857872946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Resize äº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼šéšå¼é—­åŒ…çš„ â€œéšå½¢é™·é˜±â€"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-18T08:47:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Resize äº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼šéšå¼é—­åŒ…çš„ â€œéšå½¢é™·é˜±â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T08:47:10.000Z" title="Thu Dec 18 2025 08:47:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Resize äº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼šéšå¼é—­åŒ…çš„ â€œéšå½¢é™·é˜±â€</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå†…å­˜æ³„æ¼æ˜¯æœ€éšè”½ä¹Ÿæœ€å½±å“æ€§èƒ½çš„é—®é¢˜ä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯æ¶‰åŠäºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚ArrayBufferï¼‰çš„åœºæ™¯ã€‚æœ¬æ–‡å°†èšç„¦ä¸€ä¸ªå…¸å‹åœºæ™¯ â€”â€”resizeäº‹ä»¶ç›‘å¬å¼•å‘çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼Œæ‹†è§£èƒŒåçš„æ ¸å¿ƒåŸå› ï¼ˆéšå¼é—­åŒ… + æœªé”€æ¯çš„äº‹ä»¶ç›‘å¬ï¼‰ï¼Œå¹¶ç»™å‡ºå¯è½åœ°çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜ç°è±¡ï¼šå†…å­˜æŒç»­æš´æ¶¨ï¼ŒGC æŸæ‰‹æ— ç­–</h3>
<p>å…ˆçœ‹ä¸€ä¸ªå¸¸è§çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>é¡µé¢ä¸­æœ‰å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„æ¨¡å—ï¼ˆå¦‚ WebGL æ¸²æŸ“ã€éŸ³è§†é¢‘è§£ç ï¼‰ï¼Œä½¿ç”¨ArrayBufferå­˜å‚¨å¤§ä½“ç§¯äºŒè¿›åˆ¶æ•°æ®ï¼›</li>
</ul>

<ul>
<li>ä¸ºé€‚é…çª—å£å¤§å°ï¼Œç»™windowç»‘å®šäº†resizeäº‹ä»¶ï¼Œç”¨äºè°ƒæ•´ Canvas / å¸ƒå±€å°ºå¯¸ï¼›</li>
</ul>

<ul>
<li>å³ä½¿ â€œé”€æ¯â€ äº†äºŒè¿›åˆ¶æ¨¡å—ï¼ˆç½®ç©ºå˜é‡ã€ç§»é™¤ DOMï¼‰ï¼Œå†…å­˜ä¾ç„¶æŒç»­ä¸Šæ¶¨ï¼Œå¤šæ¬¡è§¦å‘resizeåç”šè‡³å‡ºç°é¡µé¢å¡é¡¿ã€‚</li>
</ul>
<p>é€šè¿‡ Chrome DevTools çš„ Memory é¢æ¿åˆ†æå‘ç°ï¼š</p>
<ul>
<li>JSArrayBufferDataï¼ˆArrayBufferçš„åº•å±‚äºŒè¿›åˆ¶æ•°æ®å—ï¼‰æ•°é‡å’Œå†…å­˜å ç”¨æŒç»­å¢é•¿ï¼›</li>
</ul>

<ul>
<li>è¿™äº›äºŒè¿›åˆ¶æ•°æ®çš„å¼•ç”¨é“¾æœ€ç»ˆæŒ‡å‘HTMLDocument â†’ window â†’ resizeäº‹ä»¶ç›‘å¬å™¨ï¼Œæ— æ³•è¢«åƒåœ¾å›æ”¶ï¼ˆGCï¼‰é‡Šæ”¾ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŸå› ï¼šéšå¼é—­åŒ… + äº‹ä»¶ç›‘å¬å™¨çš„ â€œå¼ºæ ¹å¼•ç”¨â€</h3>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šç–‘æƒ‘ï¼šâ€œæˆ‘çš„resizeå›è°ƒåªè°ƒæ•´äº† Canvas å°ºå¯¸ï¼Œæ˜æ˜æ²¡ç”¨åˆ°ArrayBufferï¼Œä¸ºä»€ä¹ˆä¼šæ³„æ¼ï¼Ÿâ€ é—®é¢˜çš„æ ¸å¿ƒåœ¨äº<strong>éšå¼é—­åŒ…</strong>å’Œ<strong>äº‹ä»¶ç›‘å¬å™¨çš„å¼ºæ ¹å¼•ç”¨</strong>ã€‚</p>
<h4 data-id="heading-3">2.1 å…ˆç†æ¸…å…³é”®æ¦‚å¿µ</h4>





















<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>JSArrayBufferData</td><td>V8 å¼•æ“ HEAP64ï¼ˆ64 ä½å †å†…å­˜ï¼‰ä¸­å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„åº•å±‚å—ï¼Œæ˜¯ArrayBufferçš„å®é™…æ•°æ®è½½ä½“</td></tr><tr><td>é—­åŒ…</td><td>JS å›è°ƒä¼šæ•è·å¤–éƒ¨ä½œç”¨åŸŸçš„ä¸Šä¸‹æ–‡ï¼ˆå“ªæ€•æ²¡æ˜¾å¼ä½¿ç”¨ï¼‰</td></tr><tr><td>å¼ºæ ¹å¼•ç”¨</td><td>HTMLDocument/windowæ˜¯æµè§ˆå™¨çº§åˆ«çš„å¼ºå¼•ç”¨æ ¹ï¼Œåªè¦é¡µé¢ä¸åˆ·æ–°ï¼Œå…¶å¼•ç”¨çš„å¯¹è±¡æ°¸è¿œä¸ä¼šè¢« GC å›æ”¶</td></tr></tbody></table>
<h4 data-id="heading-4">2.2 æ³„æ¼çš„å®Œæ•´å¼•ç”¨é“¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">HTMLDocument</span>ï¼ˆé¡µé¢æ ¹ï¼‰
  â†“ æŒæœ‰<span class="hljs-variable language_">window</span>å¯¹è±¡
<span class="hljs-variable language_">window</span>
  â†“ ç»‘å®šäº†resizeäº‹ä»¶ç›‘å¬å™¨ï¼ˆæœªè§£ç»‘ï¼‰
resizeäº‹ä»¶ç›‘å¬å™¨
  â†“ å›è°ƒé—­åŒ…æ•è·äº†ä¸šåŠ¡æ¨¡å—å®ä¾‹ï¼ˆå“ªæ€•æ²¡æ˜¾å¼ç”¨äºŒè¿›åˆ¶å¯¹è±¡ï¼‰
<span class="hljs-title class_">BinaryRenderer</span>å®ä¾‹
  â†“ æŒæœ‰<span class="hljs-title class_">ArrayBuffer</span>ï¼ˆäºŒè¿›åˆ¶æ•°æ®å®¹å™¨ï¼‰
<span class="hljs-title class_">ArrayBuffer</span>
  â†“ æŒ‡å‘<span class="hljs-title class_">HEAP64</span>ä¸­çš„äºŒè¿›åˆ¶æ•°æ®å—
<span class="hljs-title class_">JSArrayBufferData</span>ï¼ˆ<span class="hljs-title class_">HEAP64</span>å†…å­˜ï¼‰
</code></pre>
<h4 data-id="heading-5">2.3 éšå¼é—­åŒ…ï¼šæœ€å®¹æ˜“è¢«å¿½ç•¥çš„ â€œéšå½¢çº½å¸¦â€</h4>
<p>é—­åŒ…çš„å…³é”®ç‰¹æ€§ï¼š<strong>åªè¦å›è°ƒç”¨åˆ°äº†å¤–éƒ¨ä½œç”¨åŸŸçš„ä»»æ„å˜é‡ï¼Œå°±ä¼šæ•è·æ•´ä¸ªä¸Šä¸‹æ–‡ï¼Œè€Œéä»…æ˜¾å¼ä½¿ç”¨çš„å˜é‡</strong>ã€‚å“ªæ€•resizeå›è°ƒåªæ“ä½œäº† Canvasï¼Œåªè¦ç”¨åˆ°äº†æ¨¡å—å®ä¾‹çš„thisï¼ˆæˆ–å®ä¾‹å†…çš„ä»»æ„å˜é‡ï¼‰ï¼Œå°±ä¼šé¡ºå¸¦æ•è·å®ä¾‹ä¸­çš„ArrayBufferå¼•ç”¨ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€å¤ç°ç¤ºä¾‹ï¼šçœ‹ä¼¼æ— å®³çš„ä»£ç ï¼Œå®åˆ™æš—è—æ³„æ¼</h3>
<p>ä»¥ä¸‹ä»£ç æ¨¡æ‹Ÿäº†çœŸå®ä¸šåŠ¡åœºæ™¯ï¼Œèƒ½å®Œæ•´å¤ç°ä¸Šè¿°æ³„æ¼é—®é¢˜ï¼š</p>
<h4 data-id="heading-7">3.1 æ³„æ¼ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„æ¸²æŸ“æ¨¡å—</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryRenderer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º50MBçš„äºŒè¿›åˆ¶æ•°æ®å—ï¼ˆå¯¹åº”HEAP64ä¸­çš„JSArrayBufferDataï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">50</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'render-canvas'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindResize</span>(); <span class="hljs-comment">// ç»‘å®šresizeäº‹ä»¶</span>
  }
  <span class="hljs-comment">// ç»‘å®šresizeäº‹ä»¶ï¼šæ ¸å¿ƒæ³„æ¼ç‚¹</span>
  <span class="hljs-title function_">bindResize</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å›è°ƒä»…è°ƒæ•´Canvaså°ºå¯¸ï¼Œçœ‹ä¼¼ä¸bigBufferæ— å…³</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">height</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
    });
  }
  <span class="hljs-comment">// è¯•å›¾é”€æ¯æ¨¡å—ï¼Œä½†æœªè§£ç»‘äº‹ä»¶</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigBuffer</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç½®ç©ºæ— æ•ˆï¼Œé—­åŒ…ä»æŒæœ‰å¼•ç”¨</span>
  }
}
<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ï¼šåˆ›å»ºå®ä¾‹ â†’ è¯•å›¾é”€æ¯ â†’ å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BinaryRenderer</span>();
<span class="hljs-comment">// æ¨¡æ‹Ÿç»„ä»¶å¸è½½/é¡µé¢åˆ‡æ¢</span>
renderer.<span class="hljs-title function_">destroy</span>();
renderer = <span class="hljs-literal">null</span>;
</code></pre>
<h4 data-id="heading-8">3.2 æ³„æ¼åŸå› åˆ†æ</h4>
<ol>
<li>resizeå›è°ƒä¸­çš„thisæŒ‡å‘BinaryRendererå®ä¾‹ï¼Œé—­åŒ…æ•è·äº†æ•´ä¸ªå®ä¾‹ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬this.bigBufferï¼›</li>
</ol>

<ol start="2">
<li>windowçš„resizeç›‘å¬å™¨æœªè§£ç»‘ï¼Œè¢«HTMLDocumentå¼ºå¼•ç”¨ï¼Œå¯¼è‡´å®ä¾‹æ— æ³•è¢« GC å›æ”¶ï¼›</li>
</ol>

<ol start="3">
<li>å³ä½¿è°ƒç”¨destroy()ç½®ç©ºbigBufferå’Œcanvasï¼Œå¼•ç”¨é“¾ä¾ç„¶æœªæ–­ï¼Œ50MB çš„äºŒè¿›åˆ¶æ•°æ®æ°¸è¿œé©»ç•™åœ¨ HEAP64 ä¸­ã€‚</li>
</ol>
<h4 data-id="heading-9">3.3 æ›´éšè”½çš„æƒ…å†µï¼šè¿thiséƒ½æ²¡å†™ï¼Œä¾ç„¶æ³„æ¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryRenderer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'render-canvas'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindResize</span>();
  }
  <span class="hljs-title function_">bindResize</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¸´æ—¶å˜é‡ä»…åœ¨bindResizeå†…éƒ¨å®šä¹‰</span>
    <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>;
    <span class="hljs-comment">// å›è°ƒä»…ç”¨canvasï¼Œæœªæthis/bigBufferï¼Œä½†ä»æ•è·å®ä¾‹å¼•ç”¨</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
      canvas.<span class="hljs-property">width</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    });
  }
}
</code></pre>
<p>canvasæ˜¯å®ä¾‹å±æ€§çš„å¼•ç”¨ï¼Œé—­åŒ…æ•è·canvaså°±ç­‰äºé—´æ¥æ•è·äº†æ•´ä¸ªå®ä¾‹ï¼ŒbigBufferä¾ç„¶æ— æ³•é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-10">å››ã€è§£å†³æ–¹æ¡ˆï¼šåˆ‡æ–­å¼•ç”¨é“¾ï¼Œè®© GC æ­£å¸¸å·¥ä½œ</h3>
<p>é’ˆå¯¹resizeäº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶æ³„æ¼ï¼Œæ ¸å¿ƒæ˜¯<strong>è§£ç»‘äº‹ä»¶ç›‘å¬å™¨</strong>ï¼Œè¾…ä»¥ä¼˜åŒ–æ‰‹æ®µå‡å°‘æ³„æ¼é£é™©ã€‚</p>
<h4 data-id="heading-11">4.1 æ ¸å¿ƒæ–¹æ¡ˆï¼šä¸»åŠ¨è§£ç»‘äº‹ä»¶ç›‘å¬å™¨</h4>
<p>å…³é”®ç‚¹ï¼š<strong>å¿…é¡»ä½¿ç”¨å‘½åå‡½æ•°ï¼ˆè€ŒéåŒ¿åå‡½æ•°ï¼‰ç»‘å®šäº‹ä»¶ï¼Œç¡®ä¿èƒ½ç²¾å‡†è§£ç»‘</strong>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryRenderer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'render-canvas'</span>);
    <span class="hljs-comment">// ç»‘å®šthisåˆ°å›è°ƒï¼Œé¿å…é—­åŒ…thisæŒ‡å‘å¼‚å¸¸</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>); <span class="hljs-comment">// å‘½åå‡½æ•°ç»‘å®š</span>
  }
  <span class="hljs-comment">// å‘½åå›è°ƒå‡½æ•°</span>
  <span class="hljs-title function_">handleResize</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">height</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  }
  <span class="hljs-comment">// é”€æ¯æ—¶è§£ç»‘äº‹ä»¶ï¼šæ ¸å¿ƒä¿®å¤ç‚¹</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è§£ç»‘resizeç›‘å¬å™¨ï¼Œåˆ‡æ–­å¼•ç”¨é“¾</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
    <span class="hljs-comment">// ç½®ç©ºå±æ€§ï¼Œè¾…åŠ©GC</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigBuffer</span> = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h4 data-id="heading-12">4.2 è¾…åŠ©ä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„å¼•ç”¨å’Œè§¦å‘</h4>
<ol>
<li><strong>èŠ‚æµ / é˜²æŠ–</strong> <strong>resize</strong> <strong>å›è°ƒ</strong>ï¼šresizeè§¦å‘é¢‘ç‡æé«˜ï¼ˆæ¯ç§’æ•°åæ¬¡ï¼‰ï¼ŒèŠ‚æµï¼ˆå¦‚ 100ms æ‰§è¡Œä¸€æ¬¡ï¼‰å¯å‡å°‘é—­åŒ…è§¦å‘æ¬¡æ•°ï¼Œé™ä½å†…å­˜å ç”¨ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// èŠ‚æµå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">throttle</span> = (<span class="hljs-params">fn, delay = <span class="hljs-number">100</span></span>) =&gt; {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!timer) {
      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        timer = <span class="hljs-literal">null</span>;
      }, delay);
    }
  };
};
<span class="hljs-comment">// ç»‘å®šèŠ‚æµåçš„å›è°ƒ</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-title function_">throttle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>));
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨å¼±å¼•ç”¨ï¼ˆES2021+ï¼‰</strong> ï¼šè‹¥æ— æ³•åŠæ—¶è§£ç»‘äº‹ä»¶ï¼Œç”¨WeakRef/WeakMapå­˜å‚¨äºŒè¿›åˆ¶å¯¹è±¡ï¼Œè®© GC åœ¨æ— å¼ºå¼•ç”¨æ—¶å›æ”¶ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¼±å¼•ç”¨äºŒè¿›åˆ¶å¯¹è±¡ï¼Œä¸é˜»æ–­GC</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufRef</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>));
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'render-canvas'</span>);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindResize</span>();
}
<span class="hljs-title function_">handleResize</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½¿ç”¨æ—¶æ‰è·å–ï¼Œæ— å¼ºå¼•ç”¨æ—¶è‡ªåŠ¨å›æ”¶</span>
  <span class="hljs-keyword">const</span> buf = <span class="hljs-variable language_">this</span>.<span class="hljs-property">bufRef</span>.<span class="hljs-title function_">deref</span>();
  <span class="hljs-keyword">if</span> (buf) {
    <span class="hljs-comment">// å¤„ç†äºŒè¿›åˆ¶æ•°æ®é€»è¾‘</span>
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">width</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>;
}
</code></pre>
<h3 data-id="heading-13">äº”ã€éªŒè¯æ–¹æ³•ï¼šç”¨ DevTools ç¡®è®¤æ³„æ¼æ˜¯å¦ä¿®å¤</h3>
<ol>
<li>æ‰“å¼€ Chrome DevTools â†’ Memory é¢æ¿ï¼Œé€‰æ‹© â€œHeap snapshotâ€ï¼›</li>
</ol>

<ol start="2">
<li>æ‰§è¡Œä»£ç åˆ›å»ºBinaryRendererå®ä¾‹ï¼Œè§¦å‘å¤šæ¬¡resizeï¼Œç”Ÿæˆç¬¬ä¸€ä¸ªå¿«ç…§ï¼›</li>
</ol>

<ol start="3">
<li>è°ƒç”¨destroy()æ–¹æ³•ï¼Œç‚¹å‡» â€œCollect garbageâ€ï¼ˆåƒåœ¾æ¡¶å›¾æ ‡ï¼‰å¼ºåˆ¶ GCï¼›</li>
</ol>

<ol start="4">
<li>ç”Ÿæˆç¬¬äºŒä¸ªå¿«ç…§ï¼Œå¯¹æ¯”ä¸¤æ¬¡å¿«ç…§ä¸­ArrayBuffer/JSArrayBufferDataçš„æ•°é‡å’Œå†…å­˜ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>è‹¥å†…å­˜æ— æ˜æ˜¾ä¸‹é™ï¼Œè¯´æ˜ä»æœ‰æ³„æ¼ï¼ˆå¤§æ¦‚ç‡æ˜¯äº‹ä»¶æœªè§£ç»‘ï¼‰ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>è‹¥å†…å­˜æ˜¾è‘—ä¸‹é™ï¼Œè¯´æ˜å¼•ç”¨é“¾å·²åˆ‡æ–­ï¼Œæ³„æ¼ä¿®å¤ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-14">å…­ã€æ€»ç»“</h3>
<p>resizeäº‹ä»¶å¯¼è‡´çš„äºŒè¿›åˆ¶å†…å­˜æ³„æ¼ï¼Œæœ¬è´¨æ˜¯ <strong>â€œéšå¼é—­åŒ…æ•è·å¼•ç”¨ + äº‹ä»¶ç›‘å¬å™¨æœªè§£ç»‘â€</strong> å½¢æˆäº†æ— æ³•åˆ‡æ–­çš„å¼•ç”¨é“¾ï¼Œæœ€ç»ˆè®© HEAP64 ä¸­çš„äºŒè¿›åˆ¶æ•°æ®è¢«æ°¸ä¹…é”å®šã€‚</p>
<p>æ ¸å¿ƒé¿å‘ç‚¹ï¼š</p>
<ol>
<li>äº‹ä»¶ç›‘å¬å™¨ï¼ˆå°¤å…¶æ˜¯resize/scrollç­‰é«˜é¢‘ç‡äº‹ä»¶ï¼‰å¿…é¡» â€œç»‘å®š - è§£ç»‘â€ æˆå¯¹å‡ºç°ï¼›</li>
</ol>

<ol start="2">
<li>è­¦æƒ•é—­åŒ…çš„éšå¼æ•è·ï¼šå“ªæ€•å›è°ƒæ²¡æ˜¾å¼ä½¿ç”¨å¤§å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½å› æ•è·ä¸Šä¸‹æ–‡å¯¼è‡´æ³„æ¼ï¼›</li>
</ol>

<ol start="3">
<li>äºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBufferï¼‰ä½“ç§¯å¤§ï¼Œä¸€æ—¦æ³„æ¼ä¼šå¿«é€Ÿè€—å°½å†…å­˜ï¼Œéœ€ä¼˜å…ˆå¤„ç†ã€‚</li>
</ol>
<p>è®°ä½ï¼šå‰ç«¯å†…å­˜æ³„æ¼çš„æ’æŸ¥æ ¸å¿ƒæ˜¯ â€œè¿½å¼•ç”¨é“¾â€ï¼Œåªè¦æ‰¾åˆ°ä» â€œå¼ºæ ¹å¯¹è±¡ï¼ˆHTMLDocument/windowï¼‰â€ åˆ°æ³„æ¼å¯¹è±¡çš„é“¾è·¯ï¼Œå°±èƒ½ç²¾å‡†å®šä½é—®é¢˜ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç ]]></title>    <link>https://juejin.cn/post/7584759201072381993</link>    <guid>https://juejin.cn/post/7584759201072381993</guid>    <pubDate>2025-12-18T06:23:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584759201072381993" data-draft-id="7584729714340577299" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-18T06:23:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kiroå°åº”ç”¨å¼€å‘ï¼šè®¾è®¡å’Œå®ç°éšç§å·ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T06:23:52.000Z" title="Thu Dec 18 2025 06:23:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å»å¹´ç¬”è€…æ›¾ç»è®¾è®¡è¿‡éšç§å·ç ã€éšç§é‚®ç®±ã€ç½‘å€çŸ­é“¾ä¸‰ä¸ªå°åº”ç”¨ï¼Œä½¿ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€çš„Amazon Connectï¼ŒDynamoDBï¼ŒAmazon SESï¼ŒLambdaï¼ŒCloudFrontç­‰æœåŠ¡æ„å»ºã€‚åœ¨è®¾è®¡æ–¹æ¡ˆæ—¶ï¼Œæˆ‘æŸ¥æ‰¾äº†ä¸å°‘æ–‡æ¡£å’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡ï¼Œå®Œå–„æ¶æ„ã€‚åœ¨å°†æ–¹æ¡ˆè®¾è®¡å¥½åï¼Œç”±ClaudeååŠ©å®ŒæˆLambdaä»£ç ï¼ˆå½“æ—¶æ˜¯Claude 3 Sonnetï¼‰ï¼Œå¹¶æ‰‹åŠ¨å®Œæˆå…¶å®ƒçš„æœåŠ¡çš„é…ç½®ã€‚æ–¹æ¡ˆä½¿ç”¨ä¸Šè¿°çš„ServerlessæœåŠ¡ï¼Œæœ‰æˆæœ¬å¯æ§å’Œè¿ç»´å‹åŠ›å°çš„ä¼˜ç‚¹ï¼Œåœ¨æŸä¸ªç”µå•†å®¢æˆ·éƒ¨ç½²åå¾—åˆ°å¥½è¯„ã€‚</p>
<p>åœ¨Kiroæ¨å‡ºåï¼Œå…¶Specsæ¨¡å¼ä»¤äººå°è±¡æ·±åˆ»ã€‚éœ€æ±‚åˆ†è§£ï¼Œæ–¹æ¡ˆè®¾è®¡ï¼Œç”šè‡³æ˜¯åº”ç”¨éƒ¨ç½²ï¼Œè¿™äº›åŸæ¥éœ€è¦äººæ¥ä¸»å¯¼çš„å·¥ä½œï¼Œç°åœ¨æ˜¯å¦å¯ä»¥ç”±Kiroæ¥å®Œæˆï¼Ÿè¿™é‡Œæˆ‘å°†ä½¿ç”¨Kiroæ¥é‡æ–°å¼€å‘éšç§å·ç é¡¹ç›®ï¼Œçœ‹çœ‹åœ¨SpecsåŠ æŒä¸‹èƒ½å¦å°†æ‰€æœ‰çš„å·¥ä½œéƒ½ç”±Kiroæ¥å®Œæˆã€‚</p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejinhead_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejinhead_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote>
<h2 data-id="heading-0">1.ä»€ä¹ˆæ˜¯è™šæ‹Ÿå·ç ï¼Ÿ</h2>
<p>è™šæ‹Ÿå·ç ä½¿ç”¨å•ç‹¬åˆ›å»ºçš„å·ç æ¥ä»£æ›¿çœŸå®å·ç ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªé¢å¤–çš„èº«ä»½ï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„ä¿æŠ¤çœŸå®è”ç³»ä¿¡æ¯ï¼š</p>
<ol>
<li>ä¿æŠ¤éšç§ï¼šåœ¨ä¸æš´éœ²ä¸ªäººçœŸå®è”ç³»æ–¹å¼çš„æƒ…å†µä¸‹ä¸ç¬¬ä¸‰æ–¹æ²Ÿé€šã€‚</li>
<li>èº«ä»½ç®¡ç†ï¼šä¸ºä¸åŒçš„èº«ä»½æˆ–æ´»åŠ¨ä½¿ç”¨ä¸åŒçš„è”ç³»æ–¹å¼ã€‚</li>
<li>å®‰å…¨æ€§ï¼šé™ä½ä¸ªäººä¿¡æ¯è¢«æ³„éœ²æˆ–æ»¥ç”¨çš„é£é™©ã€‚</li>
</ol>
<p>è™šæ‹Ÿå·ç å¯ä»¥æœ‰ä¸åŒçš„å½¢æ€ï¼š</p>
<ol>
<li>æ­£å¸¸æ™®é€šå·ç ï¼ˆä¸æ™®é€šå·ç ä¸€æ ·ï¼Œè¿è¥å•†é¢„ç•™çš„ä¸“ç”¨å·æ®µï¼‰ã€‚å½“å‘¼å«è¿™ä¸ªå·ç æ—¶ï¼Œè‡ªåŠ¨è½¬æ¥åˆ°ç»‘å®šçš„çœŸå®å·ç ã€‚è¿™ç§æ–¹å¼åœ¨ç½‘çº¦è½¦ã€å¤–å–ç­‰åœºæ™¯æœ‰å¹¿æ³›çš„ä½¿ç”¨ã€‚å› ä¸ºå·æ®µèµ„æºæ˜¯æœ‰é™çš„ï¼Œè¿™ç§è™šæ‹Ÿå·ç ä¸€èˆ¬æœ‰æ—¶æ•ˆé™åˆ¶ï¼Œåœ¨æœåŠ¡å®Œæˆåä¸€æ®µæ—¶é—´ä¼šè§£é™¤è¯¥è™šæ‹Ÿå·ç ä¸çœŸå®å·ç çš„ç»‘å®šã€‚</li>
<li>æŒ‡å®šå·ç å‘¼å«+è¾“å…¥çŸ­å·ï¼ˆåˆ†æœºå·ï¼‰ã€‚æŒ‡å®šå·ç æ˜¯æ­£å¸¸æ™®é€šå·ç ã€‚å½“å‘¼å«æŒ‡å®šå·ç åï¼Œä¼šè‡ªåŠ¨æ¥é€šå¹¶æ”¶åˆ°è¾“å…¥çŸ­å·/åˆ†æœºå·çš„æç¤ºï¼Œè¾“å…¥çŸ­å·åå†è½¬æ¥åˆ°çœŸå®çš„å·ç ã€‚è¿™ç§æ–¹å¼åªéœ€è¦å°‘é‡çš„æ™®é€šå·ç ï¼Œé€šè¿‡ç”Ÿæˆä¸åŒçš„çŸ­å·å…³è”åˆ°ä¸åŒçš„çœŸå®å·ç ï¼Œèƒ½å¤ŸæŒä¹…çš„ä½¿ç”¨æˆ–æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ä»»æ„çš„æœ‰æ•ˆæ—¶é—´ã€‚</li>
</ol>
<p>åœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œæˆ‘å°†æµ‹è¯•ç”±Kiroæ¥å®Œæˆæ•´ä¸ªçŸ­å·æ–¹æ¡ˆçš„éœ€æ±‚åˆ†è§£ã€æ–¹æ¡ˆè®¾è®¡ã€å¼€å‘ã€å’Œéƒ¨ç½²ã€‚</p>
<h2 data-id="heading-1">2.ä½“éªŒKiro SPECæ¨¡å¼çš„é­…åŠ›</h2>
<p>Kiroå…·ä½“çš„ä»‹ç»å¯ä»¥å‚è€ƒå®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro.dev%2F" target="_blank" title="https://kiro.dev/" ref="nofollow noopener noreferrer">kiro.dev/</a>ï¼‰ï¼Œå¦å¤–æ¨èç”±ç¤¾åŒºæ•´ç†çš„<strong>Book of Kiro</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro-community.github.io%2Fbook-of-kiro%2F" target="_blank" title="https://kiro-community.github.io/book-of-kiro/" ref="nofollow noopener noreferrer">kiro-community.github.io/book-of-kirâ€¦</a>ï¼‰ã€‚</p>
<p>è¿›å…¥Kiroåï¼Œä½¿ç”¨SPECæ¨¡å¼ï¼Œè¾“å…¥å¦‚ä¸‹éœ€æ±‚ï¼š</p>
<pre><code class="hljs">æˆ‘æƒ³è®¾è®¡ä¸€ä¸ªè™šæ‹Ÿå·ç åº”ç”¨ï¼Œå½“ç”¨æˆ·æ‹¨æ‰“æŸä¸ªå·ç æ—¶ï¼Œä¼šè‡ªåŠ¨æ’­æŠ¥æç¤ºç”¨æˆ·è¾“å…¥çŸ­å·ã€‚è¾“å…¥çŸ­å·åï¼Œè‡ªåŠ¨è½¬æ¥åˆ°æ¥å¬æ–¹çœŸå®çš„å·ç ã€‚ä½¿ç”¨AWSçš„æœåŠ¡è®¾è®¡ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°½å¯èƒ½ä½¿ç”¨ServerlessæœåŠ¡ã€‚
</code></pre>
<p>Kiroå¼€å§‹æ–¹æ¡ˆçš„è®¾è®¡ï¼Œç”Ÿæˆéœ€æ±‚æ–‡æ¡£requirements.mdï¼Œé’ˆå¯¹éœ€æ±‚å®Œæˆè®¾è®¡æ–‡æ¡£design.mdã€‚åœ¨ç¡®è®¤è®¾è®¡æ–¹æ¡ˆæ— è¯¯åï¼Œè¿›ä¸€æ­¥çš„ç”Ÿæˆå®æ–½è®¡åˆ’æ–‡æ¡£tasks.mdã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5a3ceb28c164eb5a2e30c95bc82a301~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=kU4kLNu99uQFQIxB279V96sjK%2Fg%3D" alt="kiro-app-development-design-and-implement-private-number-1.png" loading="lazy"/></p>
<p align="center">å›¾1 SPECæ¨¡å¼ä»åˆ›å»ºè§„èŒƒéœ€æ±‚å¼€å§‹</p>
<p>åœ¨ç”Ÿæˆè¿™å‡ ä¸ªSPECæ¨¡å¼çš„æ–‡æ¡£æ—¶ï¼Œéœ€æ±‚çš„æ€»ç»“å’Œæ–¹æ¡ˆçš„è®¾è®¡è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œè¾“å‡ºçš„å·¥ä½œæµç¨‹å’Œmermaidæµç¨‹å›¾ä¸åŸå…ˆæˆ‘è®¾è®¡çš„æ–¹æ¡ˆæ€è·¯å®Œå…¨ä¸€è‡´ï¼Œå¹¶é¢å¤–æœ‰ä¸€äº›æ˜“ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§çš„å¢å¼ºï¼š</p>
<ol>
<li>è€ƒè™‘äº†é€šè¯è®°å½•å­˜å‚¨ã€æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚æ–¹ä¾¿æŸ¥è¯¢é€šè¯ç»Ÿè®¡å’Œå¼‚å¸¸äº‹ä»¶</li>
<li>è®¾è®¡äº†å¢/åˆ /æŸ¥/æ”¹APIæ¥å£</li>
</ol>
<p>åŸæ¥æ–¹æ¡ˆåœ¨æ·»åŠ çŸ­å·-çœŸå®å·ç çš„æ˜ å°„å…³ç³»æ—¶ï¼Œéœ€è¦å°†æ˜ å°„è®°å½•æ‰‹åŠ¨å¯¼å…¥åˆ°DynamoDBï¼Œåˆ æŸ¥æ”¹ç­‰åŠŸèƒ½ä¹Ÿæ˜¯ç›´æ¥åˆ°æ•°æ®åº“ä¸­æ“ä½œï¼Œåªé€‚åˆå¼€å‘äººå‘˜ä½¿ç”¨ã€‚è€ŒKiroçš„è®¾è®¡æ›´åƒä¸€ä¸ªå®Œæ•´çš„æ–¹ä¾¿æ˜“ç”¨çš„ç”Ÿäº§ç³»ç»Ÿï¼Œæ·»åŠ è¿™äº›è¿ç»´æ¥å£åï¼Œä»»åŠ¡äººå‘˜éƒ½å¯ä»¥é€šè¿‡Webç•Œé¢ç›´è§‚çš„ç»´æŠ¤ã€‚ç›¸å…³çš„è®°å½•å’Œæ—¥å¿—åŠŸèƒ½ï¼Œä¹Ÿä¸ºè¿›ä¸€æ­¥æ‹“å±•ä¸šåŠ¡åœºæ™¯æ‰“ä¸‹äº†åŸºç¡€ã€‚</p>
<p>Kiroè®¾è®¡æ–‡æ¡£æ¯”è¾ƒå®Œæ•´çš„ä»‹ç»äº†å·¥ä½œæµç¨‹å’Œæ¶æ„ï¼ŒèŠ‚é€‰éƒ¨åˆ†å†…å®¹å’ŒåŠ æ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">è™šæ‹Ÿå·ç è·¯ç”±åº”ç”¨é‡‡ç”¨AWS Serverlessæ¶æ„ï¼Œä»¥Amazon <span class="hljs-keyword">Connect</span>ä¸ºæ ¸å¿ƒçš„ç”µè¯æœåŠ¡å¹³å°ï¼Œç»“åˆLambdaå‡½æ•°å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒDynamoDBå­˜å‚¨é…ç½®æ•°æ®ï¼Œå®ç°é«˜å¯ç”¨ã€è‡ªåŠ¨æ‰©å±•çš„ç”µè¯è½¬æ¥æœåŠ¡ã€‚

ç³»ç»Ÿçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼šç”¨æˆ·æ‹¨æ‰“è™šæ‹Ÿå·ç  â†’ <span class="hljs-keyword">Connect</span>æ¥å¬å¹¶æ’­æ”¾æç¤ºéŸ³ â†’ æ”¶é›†ç”¨æˆ·è¾“å…¥çš„çŸ­å· â†’ LambdaæŸ¥è¯¢æ˜ å°„å…³ç³» â†’ å‘èµ·è½¬æ¥åˆ°çœŸå®å·ç  â†’ å»ºç«‹é€šè¯æ¡¥æ¥ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9259ea16d253434eb8f98db717c18d2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=dS2ohXlmoRpjB242iRW%2Bmwa82Lo%3D" alt="kiro-app-development-design-and-implement-private-number-2.png" loading="lazy"/></p>
<p align="center">å›¾2 è®¾è®¡æ–‡æ¡£åœ¨design.mdä¸­çš„æµç¨‹å›¾</p>
<p>Kiro SPECæ¨¡å¼é€šè¿‡Requirement-Design-Taskè¿™ä¸ªæµç¨‹ï¼Œåˆ©ç”¨AIå°†ä¸€å¥ç®€çŸ­çš„æ¨¡ç³Šéœ€æ±‚ï¼Œå˜æˆä¸€ä»½ç»“æ„æ¸…æ™°ã€æ¡ç†æ¸…æ¥šçš„è§„èŒƒæ–‡æ¡£ã€‚é€šè¿‡Requirementsæ˜ç¡®è¦åšä»€ä¹ˆï¼Œé€šè¿‡Designè§„åˆ’å¦‚ä½•å®ç°ï¼Œé€šè¿‡Implementationå°†æ•´ä¸ªé¡¹ç›®åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å¼€å‘ä»»åŠ¡ï¼ŒæŒ‡å¯¼LLMä¸åç¦»ä¸å¤±æ§ã€‚</p>
<p>åœ¨ç”Ÿæˆåˆå§‹Designè®¾è®¡æ–‡æ¡£åï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªâ€œæ”¯æŒCDKéƒ¨ç½²â€éœ€æ±‚ï¼ŒKiroæ›´æ–°äº†éœ€æ±‚æ–‡æ¡£å’Œè®¾è®¡æ–‡æ¡£ï¼Œä¹‹åè½¬åˆ°å®æ–½è®¡åˆ’é˜¶æ®µï¼Œç”Ÿæˆå¼€å‘ä»»åŠ¡</p>
<p>å®æ–½è®¡åˆ’å‡ºç‚‰åï¼ŒKiroæœ€ç»ˆçš„æ€»ç»“è¾“å‡ºèŠ‚é€‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">å®Œç¾ï¼è™šæ‹Ÿå·ç è·¯ç”±åº”ç”¨çš„è§„æ ¼è¯´æ˜ç°åœ¨å·²ç»å®Œæˆã€‚æˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ï¼š

âœ… éœ€æ±‚æ–‡æ¡£ - åŒ…å«7ä¸ªè¯¦ç»†éœ€æ±‚ï¼Œæ¶µç›–è¯­éŸ³æç¤ºã€çŸ­å·è¾“å…¥ã€è‡ªåŠ¨è½¬æ¥ã€ç®¡ç†åŠŸèƒ½ã€ç›‘æ§æ—¥å¿—ã€å¯æ‰©å±•æ€§å’ŒCDKéƒ¨ç½²

âœ… è®¾è®¡æ–‡æ¡£ - å®Œæ•´çš„AWS Serverlessæ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬Amazon Connectã€Lambdaã€DynamoDBã€API Gatewayå’ŒCloudWatchçš„é›†æˆæ–¹æ¡ˆ

âœ… å®æ–½è®¡åˆ’ - 15ä¸ªæ¸è¿›å¼å¼€å‘ä»»åŠ¡ï¼Œä»åŸºç¡€è®¾æ–½æ­å»ºåˆ°æœ€ç»ˆéƒ¨ç½²éªŒè¯

ç°åœ¨ä½ å¯ä»¥å¼€å§‹æ‰§è¡Œè¿™äº›ä»»åŠ¡äº†ã€‚ä½ å¯ä»¥ï¼š
<span class="hljs-bullet">1.</span>	æ‰“å¼€tasks.mdæ–‡ä»¶ï¼Œç‚¹å‡»ä»»åŠ¡æ—è¾¹çš„"Start task"æŒ‰é’®å¼€å§‹æ‰§è¡Œ
<span class="hljs-bullet">2.</span>	ä»ä»»åŠ¡1å¼€å§‹ï¼ŒæŒ‰é¡ºåºé€æ­¥å®ç°æ•´ä¸ªç³»ç»Ÿ
<span class="hljs-bullet">3.</span>	æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘å»ºè®®å…ˆæµ‹è¯•éªŒè¯å†ç»§ç»­ä¸‹ä¸€ä¸ª

è¿™ä¸ªè§„æ ¼è¯´æ˜ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ã€åŸºäºAWS ServerlessæœåŠ¡çš„è™šæ‹Ÿå·ç è·¯ç”±è§£å†³æ–¹æ¡ˆçš„å®ç°è·¯å¾„ã€‚æ•´ä¸ªç³»ç»Ÿå°†å…·å¤‡é«˜å¯ç”¨æ€§ã€è‡ªåŠ¨æ‰©å±•èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒCDKè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚
</code></pre>
<p>åœ¨è¿›å…¥ä»»åŠ¡æ‰§è¡Œå‰ï¼Œæˆ‘è®©Kiro ç»“åˆSpecsä¸‰ä¸ªæ–‡æ¡£ï¼ˆrequirements.md, design.md, tasks.mdï¼‰ï¼Œæ›´æ–°äº†Steeringã€‚</p>
<h2 data-id="heading-2">3.å®Œå–„çš„ä¸Šä¸‹æ–‡ç®¡ç†Steering</h2>
<p>ç®€å•çš„ç†è§£Steeringï¼Œå°±æ˜¯æ¯ä¸ªTaskæ‰§è¡Œæ—¶éƒ½ä¼šæ³¨å…¥çš„ä¸Šä¸‹æ–‡å†…å®¹ã€‚ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡ï¼Œèƒ½å¤Ÿæ§åˆ¶LLMåœ¨æ‰§è¡Œä¸åŒTaskå¼€å‘ä»»åŠ¡æ—¶å§‹ç»ˆéµå¾ªç›¸åŒçš„æ¨¡å¼ã€åº“å’Œæ ‡å‡†ã€‚</p>
<p>Streeringæ–‡ä»¶å¯ä»¥è‡ªå®šä¹‰æ‰‹åŠ¨åˆ›å»ºï¼Œåœ¨Kiroé¢æ¿ä¸­Steeringéƒ¨åˆ†åˆ›å»º.mdæ–‡ä»¶å³å¯ï¼Œä½¿ç”¨æ ‡å‡†çš„markdownè¯­æ³•ç¼–å†™ã€‚åœ¨æœ¬é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘è®©Kiroè‡ªå·±è°ƒç”¨LLMï¼Œç»“åˆSpecsæ–‡æ¡£æ¥å®Œå–„ã€‚å®ƒè‡ªåŠ¨åˆ›å»ºäº†ä¸‰ä¸ªæ–‡æ¡£ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>äº§å“æ¦‚è¿° (product.md) â€“ å®šä¹‰äº§å“çš„ç›®çš„ã€ç›®æ ‡ç”¨æˆ·ã€å…³é”®åŠŸèƒ½å’Œä¸šåŠ¡ç›®æ ‡ã€‚è¿™å¸®åŠ© Kiro ç†è§£æŠ€æœ¯å†³ç­–èƒŒåçš„â€ä¸ºä»€ä¹ˆâ€ï¼Œå¹¶å»ºè®®ä¸æ‚¨äº§å“ç›®æ ‡ä¸€è‡´çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>æŠ€æœ¯æ ˆ (tech.md) â€“ è®°å½•é€‰æ‹©çš„æ¡†æ¶ã€åº“ã€å¼€å‘å·¥å…·å’ŒæŠ€æœ¯çº¦æŸã€‚å½“ Kiro å»ºè®®å®ç°æ–¹æ¡ˆæ—¶ï¼Œå®ƒä¼šéµä»è¿™äº›é€‰æ‹©ã€‚</li>
<li>é¡¹ç›®ç»“æ„ (structure.md) â€“ æ¦‚è¿°æ–‡ä»¶ç»„ç»‡ã€å‘½åçº¦å®šã€å¯¼å…¥æ¨¡å¼å’Œæ¶æ„å†³ç­–ã€‚</li>
</ul>
<p>èŠ‚é€‰Kiroè‡ªå·±è¾“å‡ºçš„Steeringå†…å®¹æ€»ç»“ï¼š</p>
<pre><code class="hljs language-python" lang="python">product.md æ›´æ–°
â€¢	æ·»åŠ äº†ä¸­æ–‡äº§å“æè¿°ï¼Œä½“ç°é¡¹ç›®çš„ä¸­æ–‡ä¸šåŠ¡èƒŒæ™¯
â€¢	è¯¦ç»†æè¿°äº†é€šè¯æµç¨‹åŠŸèƒ½ï¼ˆè¯­éŸ³æç¤ºã€DTMFè¾“å…¥ã€æ™ºèƒ½è½¬æ¥ç­‰ï¼‰
â€¢	è¡¥å……äº†ç®¡ç†åŠŸèƒ½ï¼ˆçŸ­å·æ˜ å°„ç®¡ç†ã€é€šè¯è®°å½•è¿½è¸ªã€å®æ—¶ç›‘æ§ç­‰ï¼‰
â€¢	æ˜ç¡®äº†æŠ€æœ¯ç‰¹æ€§ï¼ˆè‡ªåŠ¨æ‰©å±•ã€å¤šè¯­è¨€æ”¯æŒã€åŸºç¡€è®¾æ–½å³ä»£ç ï¼‰
â€¢	æ·»åŠ äº†æ•°æ®æµæ¶æ„å’Œéƒ¨ç½²æ¶æ„è¯´æ˜

tech.md æ›´æ–°
â€¢	è¯¦ç»†æè¿°äº†AWSæœåŠ¡æ¶æ„ï¼ˆConnectã€Lambdaã€DynamoDBç­‰ï¼‰
â€¢	æ·»åŠ äº†Lambdaå‡½æ•°çš„å…·ä½“åŠŸèƒ½å’Œé…ç½®
â€¢	è¡¥å……äº†DynamoDBè¡¨ç»“æ„å’Œè®¾è®¡
â€¢	æ‰©å±•äº†æµ‹è¯•ç­–ç•¥ï¼ŒåŒ…æ‹¬æ€§èƒ½æµ‹è¯•å’Œç›‘æ§æµ‹è¯•
â€¢	æ˜ç¡®äº†æ€§èƒ½è¦æ±‚ï¼ˆ<span class="hljs-number">99</span>%æˆåŠŸç‡ã€<span class="hljs-number">2</span>ç§’å“åº”æ—¶é—´ã€<span class="hljs-number">1000</span>å¹¶å‘ç­‰ï¼‰
â€¢	æ·»åŠ äº†å¤šè¯­è¨€æ”¯æŒçš„å…·ä½“å®è·µ

structure.md æ›´æ–°
â€¢	æ‰©å±•äº†ç›®å½•ç»“æ„ï¼ŒåŒ…æ‹¬è®¡åˆ’ä¸­çš„stacksã€constructsã€<span class="hljs-keyword">lambda</span>ç›®å½•
â€¢	æ·»åŠ äº†å¤šå †æ ˆæ¶æ„æ¨¡å¼çš„è¯¦ç»†è¯´æ˜
â€¢	è¡¥å……äº†Lambdaå‡½æ•°çš„ç»„ç»‡ç»“æ„å’Œå‘½åè§„èŒƒ
â€¢	æ˜ç¡®äº†å¼€å‘å·¥ä½œæµç¨‹å’Œå®æ–½é¡ºåº
â€¢	æ·»åŠ äº†ä»£ç å®¡æŸ¥æ ‡å‡†å’Œè´¨é‡è¦æ±‚
â€¢	å¼ºè°ƒäº†ä¸­è‹±æ–‡æ··åˆçš„æ–‡æ¡£å’Œæ³¨é‡Šè§„èŒƒ

è¿™äº›æ›´æ–°çš„steeringæ–‡æ¡£ç°åœ¨èƒ½å¤Ÿä¸ºAIåŠ©æ‰‹æä¾›æ›´å‡†ç¡®å’Œè¯¦ç»†çš„é¡¹ç›®æŒ‡å¯¼ï¼Œç‰¹åˆ«æ˜¯ï¼š
â€¢	æ˜ç¡®äº†é¡¹ç›®çš„ä¸­æ–‡ä¸šåŠ¡èƒŒæ™¯å’Œå¤šè¯­è¨€ç‰¹æ€§
â€¢	è¯¦ç»†çš„AWSæ¶æ„å’ŒæœåŠ¡é…ç½®è¦æ±‚
â€¢	å…·ä½“çš„æ€§èƒ½æŒ‡æ ‡å’Œè´¨é‡æ ‡å‡†
â€¢	æ¸…æ™°çš„å¼€å‘æµç¨‹å’Œä»£ç ç»„ç»‡è§„èŒƒ
</code></pre>
<p>è¿™ä¸‰ä¸ª.mdæ–‡æ¡£ï¼Œä¼šåœ¨æ¯ä¸ªTaskä»»åŠ¡æ‰§è¡Œå¼€å§‹æ—¶æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/148d6d3eb39b4f66b2d06f7373bc622c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=j88iJBqvlIau2R63hu%2BlUOkHXBU%3D" alt="kiro-app-development-design-and-implement-private-number-3.png" loading="lazy"/></p>
<p align="center">å›¾3 Taskæ‰§è¡Œæ—¶å°†Steeringæ–‡æ¡£æ³¨å…¥ä¸Šä¸‹æ–‡</p>
<h2 data-id="heading-3">4.ä¸æ»‘çš„å¼€å‘ä»»åŠ¡æ‰§è¡Œ</h2>
<p>Kiroåœ¨è¿™ä¸ªé¡¹ç›®çš„å®æ–½è®¡åˆ’ä¸­åˆ†è§£äº†15ä¸ªå¼€å‘ä»»åŠ¡ã€‚è¿™äº›å¼€å‘ä»»åŠ¡çš„å¯åŠ¨éå¸¸ç®€å•ï¼Œåœ¨tasks.mdæ–‡ä»¶ä¸­ç‚¹å‡»ä»»åŠ¡æ—è¾¹çš„â€Start taskâ€æŒ‰é’®ï¼Œæˆ–è€…ç›´æ¥åœ¨å¯¹è¯æ¡†è¾“å…¥â€œå¼€å§‹ä»»åŠ¡â€å³å¯ã€‚</p>
<p>è¿™é‡Œæˆ‘ç›´æ¥å°†æ‰€æœ‰ä»»åŠ¡çš„å¼€å§‹æŒ‰é’®ä¸€èµ·ç‚¹å‡»äº†ï¼ŒKiroä¼šå¯åŠ¨ç¬¬1ä¸ªä»»åŠ¡ï¼Œå¹¶æ’é˜Ÿåé¢çš„14ä¸ªä»»åŠ¡ã€‚æ•´ä¸ªä»£ç å¼€å‘æŒç»­äº†çº¦ä¸‰ä¸ªå°æ—¶ï¼Œé™¤ä»»åŠ¡1ä¸­éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–ï¼Œæˆæƒåˆ›å»ºä¸€äº›å·¥å…·è¿è¡Œå¤–ï¼ŒåŸºæœ¬å®ç°äº†æ— äººå€¼å®ˆï¼Œç”±Kiroè°ƒç”¨LLMè‡ªä¸»å®Œæˆäº†ä»£ç å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8715f9a7f14bf0a3e297fe61103fd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=GdLBwp3X9QpvUh2w%2Fc9GJJatS%2F8%3D" alt="kiro-app-development-design-and-implement-private-number-4-1.png" loading="lazy"/></p>
<p align="center">å›¾4 Taskä»»åŠ¡åˆ—è¡¨ç¤ºä¾‹ï¼ˆå·²å®ŒæˆçŠ¶æ€ï¼‰</p>
<h2 data-id="heading-4">5.è‡ªåŠ¨çº é”™çš„æ–¹æ¡ˆéƒ¨ç½²</h2>
<p>æ•´ä¸ªé¡¹ç›®æ”¯æŒCDKä¸€é”®éƒ¨ç½²åˆ°äº‘ã€‚åœ¨å¼€å‘å®Œæˆåï¼Œç›´æ¥æœ¬åœ°è¿è¡ŒCDKéƒ¨ç½²å‘½ä»¤å³å¯ã€‚è€Œä½¿ç”¨Kiroï¼Œå¯ä»¥è®©å®ƒæ¥è¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼Œç”±äºæ˜¯é›†æˆçš„IDEç¯å¢ƒï¼ŒKiroå¯ä»¥ç›‘æ§éƒ¨ç½²è¿‡ç¨‹ï¼Œé‡åˆ°é”™è¯¯æ—¶ä¼šè‡ªåŠ¨å®šä½é—®é¢˜ï¼Œä¿®å¤ä»£ç ï¼Œå†é‡è¯•éƒ¨ç½²ã€‚</p>
<p>åœ¨é¡¹ç›®éƒ¨ç½²ä¸­ï¼Œé‡åˆ°äº†éƒ¨ç½²ä½¿ç”¨çš„profileæƒé™ä¸è¶³ã€éƒ¨ç½²åŒºåŸŸä¸æ­£ç¡®ã€éƒ¨ç½²å¤±è´¥å†æ¬¡éƒ¨ç½²æ—¶èµ„æºåå†²çªã€Lambdaå‡½æ•°æ²¡æœ‰è‡ªåŠ¨å…³è”åˆ°Amazon Connectå®ä¾‹ã€Contact Flow IVRæµæ ¼å¼ä¸å¯¹ç­‰é—®é¢˜ï¼Œä½†åŸºæœ¬éƒ½èƒ½å¿«é€Ÿå®šä½åŸå› å¹¶ä¿®å¤ã€‚</p>
<p>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå°æŠ€å·§æ˜¯é€šè¿‡æç¤ºè¯å¼•å¯¼Kiroä½¿ç”¨aws-documentation MCP Serveræ¥æŸ¥è¯¢äºšé©¬é€Šäº‘ç§‘æŠ€æ–‡æ¡£ï¼Œè¾…åŠ©åšæ•…éšœå®šä½å’ŒåŸå› åˆ†æã€‚ç›¸å…³çš„Amazon MCP Serverå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fawslabs.github.io%2Fmcp%2F" target="_blank" title="https://awslabs.github.io/mcp/" ref="nofollow noopener noreferrer">awslabs.github.io/mcp/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f007544cf7ae4e7cad2208a04c40adda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=IP7sj6WUOlHmsWeFS4D3jSwEj8I%3D" alt="kiro-app-development-design-and-implement-private-number-5.png" loading="lazy"/></p>
<p align="center">å›¾5 é—®é¢˜ä¿®å¤ç¤ºä¾‹ï¼ˆå¼€å‘-éƒ¨ç½²-é—®é¢˜å®šä½-ä¿®å¤-éƒ¨ç½²çš„é—­ç¯ï¼‰</p>
<h2 data-id="heading-5">6.æ€»ç»“</h2>
<p>åœ¨è™šæ‹Ÿå·ç å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼ŒKiroçš„è¡¨ç°å¯ä»¥ç”¨â€œæƒŠè‰³â€æ¥å½¢å®¹ã€‚</p>
<ol>
<li>SPECæ¨¡å¼ç›¸è¾ƒäºä¹‹å‰çš„ä¸Šä¸‹æ–‡ç®¡ç†æ›´è¿›ä¸€æ­¥ï¼Œé€šè¿‡å…·ä½“çš„éœ€æ±‚åˆ†æ-æ–¹æ¡ˆè®¾è®¡-æ‰§è¡Œè®¡åˆ’è¿™å‡ æ­¥è®¾è®¡ï¼Œä»æ ¹æœ¬ä¸Šç»™LLMçš„å‘æŒ¥æå‰æŒ‡å¥½äº†æ–¹å‘ã€‚å¹¶é€šè¿‡Steeringä¸Šä¸‹æ–‡ç®¡ç†ï¼Œä»¥åŠæœ¬æ–‡æ²¡æœ‰å…·ä½“æåŠçš„Agent Hooksï¼ŒMCPæ”¯æŒç­‰ç‰¹æ€§ï¼Œå°†Agentic IDEå¸¦åˆ°äº†ä¸€ä¸ªæ–°çš„é«˜åº¦ã€‚SPECæ¨¡å¼çš„ç†å¿µï¼Œæå¤§çš„å½±å“äº†å…¶å®ƒCodingå·¥å…·çš„æ¼”è¿›ï¼Œä¸ºAI Codingæ‹“å±•äº†æ–°çš„æ–¹å‘ã€‚</li>
<li>è™šæ‹Ÿå·ç çš„æ–¹æ¡ˆï¼Œä¸åŸæ¥ç¬”è€…è®¾è®¡çš„æ–¹æ¡ˆé«˜åº¦ä¸€è‡´ï¼Œéƒ½ä½¿ç”¨äº†ServerlessæœåŠ¡æ¥æ„å»ºï¼Œå…·æœ‰é¡¹ç›®æ•´ä½“æˆæœ¬ä½ã€å…è¿ç»´çš„ç‰¹ç‚¹ã€‚Kiroçš„è®¾è®¡ï¼Œåœ¨é¡¹ç›®çš„å®Œæ•´æ€§ã€æ˜“ç”¨æ€§ã€å¯æ‹“å±•æ€§ä¸Šæ›´å¥½ï¼Œå¯ä»¥ä½œä¸ºç”Ÿäº§çº§åº”ç”¨ç›´æ¥éƒ¨ç½²ã€‚</li>
<li>ç›¸è¾ƒäºåŸæ¥è®©LLMå•çº¯ç¼–å†™ä»£ç çš„å®šä½ï¼ŒKiroåœ¨éœ€æ±‚åˆ†è§£ã€æ–¹æ¡ˆè®¾è®¡ã€åº”ç”¨éƒ¨ç½²ç­‰åŸæ¥ä¾èµ–äººå·¥çš„ç¯èŠ‚èƒ½å¤Ÿæœ‰æ›´å¤§çš„å‘æŒ¥ã€‚å½“ç„¶è¿™é‡Œå¹¶ä¸æ˜¯è¯´Kiroèƒ½å¤Ÿå®Œå…¨ä»£æ›¿äººçš„ä½œç”¨ï¼Œäººå’Œç”Ÿæˆå¼AIçš„é…åˆï¼Œå°±åƒæ˜¯â€œè®¾è®¡å¸ˆâ€å’Œâ€œæ–½å·¥é˜Ÿâ€ï¼šè®¾è®¡å¸ˆç»˜ç”»è“å›¾ï¼Œè¯´æ˜ä½œå“çš„æ¨¡æ ·å’Œå…·ä½“çš„é£æ ¼ï¼›æ–½å·¥é˜Ÿè´Ÿè´£è½å®ï¼Œå®Œæˆç»†èŠ‚è®¾è®¡å¹¶ä¸è®¾è®¡å¸ˆç¡®è®¤ï¼Œå†åˆ©ç”¨å„ç±»å·¥å…·æ­å»ºå®Œæˆã€‚å¥½çš„â€œè®¾è®¡å¸ˆâ€ï¼Œèƒ½å¤Ÿæ›´å¥½çš„å‘æŒ¥â€œæ–½å·¥é˜Ÿâ€çš„èƒ½åŠ›ã€‚</li>
</ol>
<p>éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š</p>
<ol>
<li>ä¼šè¯Contextçš„ç®¡ç†éœ€è¦ä¼˜åŒ–æå‡ã€‚åœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°å½“å‰ä¼šè¯Contextè¿‡å¤§çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨MCP å·¥å…·å¯èƒ½å¼•å…¥å¤§é‡ä¸Šä¸‹æ–‡å†…å®¹ã€‚Kiroæ­¤æ—¶ä¼šè‡ªåŠ¨æ€»ç»“å‹ç¼©å†…å®¹å¹¶å¯åŠ¨æ–°çš„ä¼šè¯ï¼Œç›®å‰å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</li>
</ol>
<ul>
<li>åœ¨æˆ‘æµ‹è¯•çš„æ—¶é—´ï¼Œç›®å‰è¿˜ä¸èƒ½ç›´è§‚çš„æŸ¥çœ‹å½“å‰Context Tokenæ¶ˆè€—æƒ…å†µï¼Œä»¥åŠå½“å‰æ¨¡å‹æ”¯æŒçš„Contextå¤§å°ï¼ˆå…¶ä¸­ä¸€äº›æ¨¡å‹åœ¨Bedrockä¸Šå·²ç»æä¾›1M Tokenç‰ˆæœ¬ï¼Œä½†Kiroæ˜¯å¦ä½¿ç”¨æœªçŸ¥ï¼‰</li>
<li>åœ¨æ€»ç»“å‹ç¼©å†…å®¹å¹¶å¼€å¯æ–°ä¼šè¯åï¼Œå¯¹æ­£åœ¨è¿›è¡Œä¸­çš„ä»»åŠ¡çš„å»¶ç»­æ€§éœ€è¦æå‡ã€‚ç›®å‰å¼€å¯æ–°ä¼šè¯åï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥ä¹‹å‰ç›¸å…³çš„å†…å®¹ï¼Œæ‰èƒ½ç»§ç»­ä»»åŠ¡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a5a253eac0b467da1487dbd944b734d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=X%2Bo9%2BxPq44nkaSJ%2FtXrdo%2Fe1xF4%3D" alt="kiro-app-development-design-and-implement-private-number-6.png" loading="lazy"/></p>
<p align="center">å›¾6 ä¼šè¯è¶…å‡ºContextæ—¶è‡ªåŠ¨æ€»ç»“å¹¶å¼€å¯æ–°ä¼šè¯</p>
<ol start="2">
<li>å¯¹äºAmazon Connect Contact Flowè¿™ä¸€ç±»æ ¼å¼å¤æ‚ï¼Œå¯¹ä¸“ä¸šæ€§è¦æ±‚æ¯”è¾ƒé«˜çš„é…ç½®æ–‡ä»¶ï¼Œå¯¹LLMæ¥è¯´å¾ˆæœ‰æŒ‘æˆ˜ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒKiroåœ¨å°è¯•å¤šæ¬¡å¤±è´¥åï¼Œæè®®åˆ°Connectæ§åˆ¶å°UIæ‰‹åŠ¨åˆ›å»ºIVRæµï¼Œä¸è¿‡å®ƒæä¾›äº†è¯¦ç»†çš„é…ç½®æ­¥éª¤å’ŒèŠ‚ç‚¹ç±»å‹é…ç½®ï¼Œå¹¶è¯´æ˜äº†å¦‚ä½•å¯¼å‡ºIVRæµé…ç½®æ–‡ä»¶åˆ°CDKé¡¹ç›®ä¸­ï¼Œæ–¹ä¾¿åç»­ç›´æ¥éƒ¨ç½²ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/534178696d084d25a7857585eef7d6cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=3tMdBwaYhJeKe583UeXfnMlDpuw%3D" alt="kiro-app-development-design-and-implement-private-number-7.png" loading="lazy"/></p>
<p align="center">å›¾7 Contact Flowçš„ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—</p>
<h2 data-id="heading-6">7.å‚è€ƒèµ„æ–™</h2>
<p>Book of Kiro ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro-community.github.io%2Fbook-of-kiro%2F" target="_blank" title="https://kiro-community.github.io/book-of-kiro/" ref="nofollow noopener noreferrer">kiro-community.github.io/book-of-kirâ€¦</a>ï¼‰</p>
<p>Amazon MCP Servers ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fawslabs.github.io%2Fmcp%2F" target="_blank" title="https://awslabs.github.io/mcp/" ref="nofollow noopener noreferrer">awslabs.github.io/mcp/</a>ï¼‰</p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cc5dfc54309473588d7a51c08dcd521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766644201&amp;x-signature=IejjkwVuYRsHuQx2Iv2LYwgvS3Y%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejintail_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejintail_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[35å²å±æœºï¼Œä»æ¥ä¸æ˜¯å¹´é¾„çš„é”™ï¼Œè€Œæ˜¯ä½ èƒ½åŠ›çš„ç©·]]></title>    <link>https://juejin.cn/post/7585171571128762404</link>    <guid>https://juejin.cn/post/7585171571128762404</guid>    <pubDate>2025-12-19T06:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585171571128762404" data-draft-id="7585112748897845291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="35å²å±æœºï¼Œä»æ¥ä¸æ˜¯å¹´é¾„çš„é”™ï¼Œè€Œæ˜¯ä½ èƒ½åŠ›çš„ç©·"/> <meta itemprop="keywords" content="åˆ›ä¸š"/> <meta itemprop="datePublished" content="2025-12-19T06:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è£…ç¡é¹¿å…ˆç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1117561743761582"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            35å²å±æœºï¼Œä»æ¥ä¸æ˜¯å¹´é¾„çš„é”™ï¼Œè€Œæ˜¯ä½ èƒ½åŠ›çš„ç©·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561743761582/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è£…ç¡é¹¿å…ˆç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:48:54.000Z" title="Fri Dec 19 2025 06:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…„å¼Ÿä»¬æœ‰æ²¡æœ‰å‘ç°ï¼Ÿ35å²ï¼Œç®€ç›´æ˜¯èŒåœºäººçš„â€œç”Ÿæ­»åŠ«â€ï¼</p>
<p>HRé¢è¯•é—´é‡Œï¼Œ35å²çš„å¼ æ˜æ”¥ç€çš±å·´å·´çš„ç®€å†ï¼Œå¬å¯¹æ–¹è½»é£˜é£˜ä¸¢æ¥ä¸€å¥â€œä½ çš„å¹´é¾„ä¸å¤ªåŒ¹é…â€ï¼Œç¬é—´å–‰å’™å‘ç´§ï¼›éš”å£å·¥ä½çš„æå§æ›´æƒ¨ï¼Œåå¹´è¡Œæ”¿è€æ²¹æ¡ï¼Œåˆ·æ‹›è˜è½¯ä»¶æ—¶æ‰å‘ç°ï¼Œèƒ½æŠ•çš„å²—ä½è¦ä¹ˆè–ªèµ„ç›´æ¥è…°æ–©ï¼Œè¦ä¹ˆæ˜æ™ƒæ™ƒå†™ç€â€œ30å²ä»¥ä¸‹ä¼˜å…ˆâ€ï¼Œè¿ä¸ªé¢è¯•æœºä¼šéƒ½ä¸ç»™ã€‚</p>
<p>è¿™çœŸä¸æ˜¯ä¸ªä¾‹ï¼Œè€Œæ˜¯æ— æ•°35+èŒåœºäººçš„é›†ä½“emoç°åœºã€‚</p>
<p>å’±ä»¬æ€»çˆ±æŠŠé”…ç”©ç»™â€œå¹´é¾„æ­§è§†â€ï¼Œåæ§½èµ„æœ¬å†·è¡€ã€èŒåœºæ²¡äººæ€§ï¼Œä½†çœŸç›¸æ‰å¿ƒåˆåç›´è§‰ï¼š35å²å±æœºæ ¹æœ¬ä¸æ˜¯å¹´é¾„çš„é”…ï¼Œè€Œæ˜¯ä½ åå¹´å¦‚ä¸€æ—¥åœ¨å·¥ä½ä¸Šâ€œæ‘¸é±¼å¼é‡å¤â€ï¼ŒæŠŠè‡ªå·±æ´»æˆäº†ä¼ä¸šå¯æ›¿ä»£çš„â€œèºä¸é’‰â€ï¼Œå½»åº•æ²¡äº†è¢«éœ€è¦çš„ä»·å€¼ã€‚</p>
<p>åˆ«å†è¢«â€œåŠªåŠ›å°±èƒ½èº²è¿‡å±æœºâ€çš„æ¯’é¸¡æ±¤PUAäº†ï¼</p>
<p>è¯´ç™½äº†ï¼ŒèŒåœºçš„åº•å±‚é€»è¾‘å°±ä¿©å­—ï¼šåˆ©ç›Šäº¤æ¢ã€‚ä¼ä¸šä¸æ˜¯æ…ˆå–„å ‚ï¼Œæ‰ä¸ä¼šä¸ºä½ çš„å·¥é¾„ä¹°å•ï¼Œåªè®¤ä½ çš„â€œä¸å¯æ›¿ä»£æ€§â€ã€‚ä½ è‡ªä¸ªå„¿è§‰å¾—â€œç»éªŒä¸°å¯Œâ€ï¼Œåœ¨è€æ¿çœ¼é‡Œå¯èƒ½å°±æ˜¯â€œé«˜æˆæœ¬ä½äº§å‡ºâ€â€”â€”25å²çš„å°å¹´è½»æ‹¿ä¸€åŠå·¥èµ„ï¼Œèƒ½å¹²ä½ 80%çš„æ´»å„¿ï¼Œæ¢ä½ å½“è€æ¿ï¼Œä½ ä¹Ÿä¼šé€‰æ€§ä»·æ¯”é«˜çš„ï¼Œè¿™æ²¡æ¯›ç—…å§ï¼Ÿ</p>
<p>æˆ‘åšèŒåœºå’¨è¯¢è¿™ä¹ˆå¤šå¹´ï¼Œæ¥è§¦è¿‡å¤ªå¤š35+å›°å±€é‡Œçš„äººï¼Œå‘ç°ä»–ä»¬éƒ½æœ‰ä¸ªé€šç—…ï¼šæŠŠâ€œé‡å¤åŠ³åŠ¨â€å½“æˆäº†â€œç»éªŒç§¯ç´¯â€ã€‚</p>
<p>åšäº†äº”å¹´é”€å”®ï¼Œè¿˜æ˜¯åªä¼šé å–é…’æ‹‰å…³ç³»æ‹“å®¢ï¼›å¹²äº†å…«å¹´æŠ€æœ¯ï¼Œå°±åªä¼šå¥—æ¨¡æ¿æ”¹ä»£ç ï¼›ç†¬äº†åå¹´ç®¡ç†ï¼Œé™¤äº†å‚¬è¿›åº¦éª‚ä¸‹å±ï¼Œå•¥æ ¸å¿ƒèƒ½åŠ›éƒ½æ²¡æœ‰ã€‚èƒ½åŠ›åœç•™åœ¨å…¥èŒç¬¬ä¸‰å¹´ï¼Œè–ªèµ„å’Œå¹´é¾„å´ä¸€ä¸ªåŠ²å„¿æ¶¨ï¼Œè¿™ç§â€œä»·å€¼é…ä¸ä¸Šæˆæœ¬â€çš„å€’æŒ‚ï¼Œæ‰æ˜¯è¢«è£å‘˜çš„çœŸæ­£åŸå› ã€‚</p>
<p>ä½†åè¿‡æ¥æƒ³ï¼ŒçœŸæ­£èƒ½æ‰›è¿‡35å²å±æœºçš„äººï¼Œéƒ½æ‘¸é€äº†ä¸€ä¸ªåº•å±‚é€»è¾‘ï¼šèŒåœºæ‹¼çš„ä¸æ˜¯ä½ å¹²äº†å¤šå°‘å¹´ï¼Œè€Œæ˜¯ä½ æœ‰æ²¡æœ‰åˆ«äººæ›¿ä»£ä¸äº†çš„æœ¬äº‹ã€‚å»å¹´æˆ‘è®¤è¯†ä¸ª42å²çš„äº§å“ç»ç†ï¼Œä¸ä»…æ²¡è¢«è£å‘˜ï¼Œè¿˜è¢«å…¬å¸åŠ è–ªç•™ä»»ï¼Œæ ¸å¿ƒå°±æ˜¯ä»–æ‰‹é‡Œæ”¥ç€è¡Œä¸šç¨€ç¼ºçš„â€œç”¨æˆ·å¢é•¿æ¨¡å‹â€ï¼Œèƒ½å¸®å…¬å¸ç¨³å®šæå‡30%çš„ç”¨æˆ·æ´»è·ƒåº¦ã€‚å¯¹ä¼ä¸šæ¥è¯´ï¼Œè¿™ç§äººæ ¹æœ¬ä¸æ˜¯â€œé«˜é¾„æˆæœ¬â€ï¼Œè€Œæ˜¯èƒ½èµšé’±çš„â€œæ ¸å¿ƒèµ„äº§â€ã€‚</p>
<p>æ‰€ä»¥æƒ³è·³å‡º35å²å›°å±€ï¼ŒçœŸä¸ç”¨ç„¦è™‘â€œå¹´é¾„å¤§äº†å­¦ä¸ä¼šâ€ï¼Œåšå¥½è¿™ä¸‰ä»¶äº‹ï¼Œæ¯”çåŠªåŠ›æœ‰ç”¨100å€ï¼š</p>
<p>ç¬¬ä¸€ï¼Œæ”¾å¼ƒâ€œå…¨èƒ½å¹»æƒ³â€ï¼Œæ‰“é€ â€œå•ç‚¹æ€æ‰‹é”â€ã€‚</p>
<p>35å²åï¼Œä½ ä¸ç”¨å•¥éƒ½ä¼šï¼Œä½†å¿…é¡»æœ‰ä¸€æ ·èƒ½è®©ä½ ç«™ç¨³è„šè·Ÿçš„â€œç¡¬æŠ€èƒ½â€ã€‚æ¯”å¦‚åšä¼šè®¡ï¼Œåˆ«åªæ»¡è¶³äºè®°è´¦æŠ¥ç¨ï¼Œæ·±è€•â€œç¨åŠ¡ç­¹åˆ’â€ï¼Œå¸®ä¼ä¸šåˆç†èŠ‚ç¨ï¼Œè¿™å°±æ˜¯ä½ çš„æ€æ‰‹é”ï¼›åšè¿è¥ï¼Œåˆ«å•¥éƒ½ç¢°ï¼Œä¸“æ³¨â€œç§åŸŸæµé‡å˜ç°â€ï¼Œèƒ½æ‹¿å‡ºæ˜ç¡®çš„è½¬åŒ–æ•°æ®ï¼Œèµ°åˆ°å“ªå„¿éƒ½åƒé¦™ã€‚</p>
<p>æœ‰æ•°æ®è¯´è¯ï¼šå…·å¤‡ç¨€ç¼ºå•ç‚¹æŠ€èƒ½çš„35+èŒåœºäººï¼Œè–ªèµ„æ¯”åŒé¾„äººé«˜40%ï¼Œè¢«è£å‘˜çš„æ¦‚ç‡ç›´æ¥ä½60%ï¼Œè¿™å°±æ˜¯ç¡¬å®åŠ›çš„åº•æ°”ã€‚</p>
<p>ç¬¬äºŒï¼Œç»‘å®šâ€œæ ¸å¿ƒä¸šåŠ¡â€ï¼Œåšå…¬å¸çš„â€œæ‘‡é’±æ ‘â€ã€‚</p>
<p>èŒåœºæœ€å®‰å…¨çš„ä½ç½®ï¼Œä»æ¥ä¸æ˜¯â€œè€å¥½äººâ€ï¼Œè€Œæ˜¯â€œèƒ½å¸®å…¬å¸èµšé’±çš„äººâ€ã€‚ä¸»åŠ¨å¾€æ ¸å¿ƒä¸šåŠ¡çº¿å‡‘ï¼šé”€å”®å°±ç›¯ç´§ä¸»åŠ›äº§å“ï¼ŒæŠ€æœ¯å°±æ‰æ ¹æ ¸å¿ƒé¡¹ç›®ï¼Œå½“ä½ çš„å·¥ä½œæˆæœç›´æ¥å’Œå…¬å¸è¥æ”¶æŒ‚é’©ï¼Œå¹´é¾„å°±æˆäº†â€œç»éªŒbuffâ€ï¼Œè€Œä¸æ˜¯è¢«æ·˜æ±°çš„çŸ­æ¿ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œæ‰“ç ´â€œä¿¡æ¯èŒ§æˆ¿â€ï¼Œæ”’å¥½â€œè·¨ç•Œäººè„‰å±€â€ã€‚</p>
<p>å¾ˆå¤šäºº35å²è¢«æ·˜æ±°ï¼Œä¸æ˜¯èƒ½åŠ›å·®ï¼Œæ˜¯ä¿¡æ¯å¤ªé—­å¡ï¼Œè·Ÿä¸ä¸Šè¡Œä¸šè¶‹åŠ¿ã€‚å¹³æ—¶åˆ«æ€»å®…åœ¨å·¥ä½ä¸Šï¼Œå¤šå»è·‘è¡Œä¸šäº¤æµä¼šï¼Œè®¤è¯†ç‚¹ä¸åŒé¢†åŸŸçš„äººï¼Œå“ªæ€•åªæ˜¯å¶å°”å–æ¯å’–å•¡èŠèŠå¤©äº¤æ¢ä¿¡æ¯ï¼Œéƒ½å¯èƒ½æŠ“ä½åˆ«äººæ²¡æ³¨æ„åˆ°çš„æœºä¼šã€‚</p>
<p>æˆ‘ä¹‹å‰æœ‰ä¸ªå­¦å‘˜ï¼Œå°±æ˜¯é è¡Œä¸šäººè„‰å¾—çŸ¥æŸæ–°èµ›é“ç¼ºèµ„æ·±äººæ‰ï¼Œå‡­å€Ÿè‡ªå·±åŸæ¥çš„ç»éªŒè·¨ç•Œè½¬å‹ï¼Œè–ªèµ„ç›´æ¥ç¿»å€ï¼Œè¿™å°±æ˜¯äººè„‰çš„ä»·å€¼ã€‚</p>
<p>æœ€åï¼Œæƒ³è·Ÿæ‰€æœ‰èŒåœºäººè¯´å¥æ‰å¿ƒåˆå®åœ¨çš„ï¼šâ€œèŒåœºä»æ¥æ²¡æœ‰å¹´é¾„å¤©èŠ±æ¿ï¼Œåªæœ‰èƒ½åŠ›å¤©èŠ±æ¿ã€‚çœŸæ­£èƒ½æ·˜æ±°ä½ çš„ï¼Œä¸æ˜¯35å²çš„å¹´é¾„ï¼Œè€Œæ˜¯ä½ åœæ­¢æˆé•¿çš„æ‘†çƒ‚å¿ƒæ€ã€‚â€</p>
<p>35å²çœŸä¸æ˜¯èŒä¸šç”Ÿæ¶¯çš„ç»ˆç‚¹ï¼Œè€Œæ˜¯ç­›é€‰â€œç‹ äººâ€çš„åˆ†æ°´å²­ã€‚</p>
<p>é‚£äº›å¤©å¤©æŠ±æ€¨å¹´é¾„ä¸å…¬çš„äººï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ä¸ºè‡ªå·±çš„â€œèƒ½åŠ›è´«ç˜ â€æ‰¾å€Ÿå£ã€‚ä¸å…¶ç„¦è™‘åˆ°å¤±çœ ï¼Œä¸å¦‚ä»ç°åœ¨å¼€å§‹æ·±è€•ä¼˜åŠ¿ã€ç»‘å®šåˆ©ç›Šã€ç§¯ç´¯èµ„æºã€‚</p>
<p>è®°ä½ï¼šå½“ä½ æˆä¸ºä¼ä¸šç¦»ä¸å¼€çš„â€œæ ¸å¿ƒèµ„äº§â€ï¼Œå¹´é¾„ä¸ä»…ä¸æ˜¯çŸ­æ¿ï¼Œåè€Œä¼šæˆä¸ºä½ æœ€å€¼é’±çš„èƒŒä¹¦ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rediså‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæ‰“é€ å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿçš„å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7585214391827824683</link>    <guid>https://juejin.cn/post/7585214391827824683</guid>    <pubDate>2025-12-19T06:57:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585214391827824683" data-draft-id="7490783352842190875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rediså‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæ‰“é€ å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿçš„å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-19T06:57:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/446863555701561"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rediså‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæ‰“é€ å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿçš„å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446863555701561/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:57:38.000Z" title="Fri Dec 19 2025 06:57:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>åœ¨ç°ä»£äº’è”ç½‘åº”ç”¨ä¸­ï¼Œå®æ—¶æ€§å·²ç»æˆä¸ºç”¨æˆ·ä½“éªŒçš„é‡è¦ä¸€ç¯ã€‚æ— è®ºæ˜¯å³æ—¶èŠå¤©å·¥å…·çš„æ¶ˆæ¯ä¼ é€’ï¼Œè¿˜æ˜¯ç”µå•†å¹³å°çš„è®¢å•çŠ¶æ€æ›´æ–°ï¼Œç”šè‡³æ˜¯å¤šäººåä½œå·¥å…·ä¸­çš„äº‹ä»¶åŒæ­¥ï¼Œå®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿéƒ½æ‰®æ¼”ç€ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ åœ¨è´­ç‰©ç½‘ç«™ä¸‹å•åï¼Œèƒ½ç«‹åˆ»æ”¶åˆ°â€œè®¢å•å·²æ”¯ä»˜â€çš„é€šçŸ¥ï¼Œè¿™ç§æµç•…çš„ä½“éªŒèƒŒåï¼Œå¾€å¾€ç¦»ä¸å¼€ä¸€ä¸ªé«˜æ•ˆçš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶ã€‚</p>
<p>Redisï¼Œä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå› å…¶æä½çš„å»¶è¿Ÿå’Œçµæ´»çš„æ•°æ®ç»“æ„è€Œå¹¿å—å¼€å‘è€…é’çã€‚é™¤äº†å¸¸è§çš„é”®å€¼å­˜å‚¨åŠŸèƒ½ï¼ŒRedisè¿˜æä¾›äº†ä¸€ç§è½»é‡è€Œå¼ºå¤§çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶â€”â€”å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPub/Subï¼‰ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RabbitMQæˆ–Kafkaï¼‰ï¼ŒRedis Pub/Subä»¥å…¶ç®€å•æ˜“ç”¨å’Œå®æ—¶æ€§å¼ºçš„ç‰¹ç‚¹ï¼Œæˆä¸ºè®¸å¤šå®æ—¶åœºæ™¯ä¸‹çš„é¦–é€‰å·¥å…·ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆé€‰æ‹©Redis Pub/Subæ¥å®ç°å®æ—¶æ¶ˆæ¯é€šä¿¡å‘¢ï¼Ÿç­”æ¡ˆåœ¨äºå®ƒçš„â€œå¿«â€å’Œâ€œç®€â€ï¼šåŸºäºå†…å­˜çš„æ¶æ„è®©æ¶ˆæ¯ä¼ é€’å»¶è¿Ÿä½è‡³æ¯«ç§’çº§ï¼Œè€Œå¼€ç®±å³ç”¨çš„è®¾è®¡åˆ™è®©å¼€å‘è€…æ— éœ€ç¹çé…ç½®å³å¯ä¸Šæ‰‹ã€‚</p>
<p>æœ¬æ–‡çš„ç›®æ ‡è¯»è€…æ˜¯é‚£äº›å·²ç»æœ‰1-2å¹´Rediså¼€å‘ç»éªŒçš„å¼€å‘è€…ã€‚ä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰Redisçš„åŸºæœ¬æ“ä½œï¼Œä½†å¯¹Pub/Subçš„å…·ä½“å®ç°å’Œåº”ç”¨åœºæ™¯è¿˜ä¸å¤Ÿæ·±å…¥ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å¸Œæœ›å¸¦ä½ ä»åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œé€æ­¥èµ°è¿›Pub/Subçš„å®ç°åŸç†ï¼Œå¹¶ç»“åˆå®é™…æ¡ˆä¾‹å’Œè¸©å‘ç»éªŒï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹å¹¶åœ¨é¡¹ç›®ä¸­çµæ´»è¿ç”¨è¿™ä¸€æŠ€æœ¯ã€‚</p>
<p>æ–‡ç« å°†æŒ‰ç…§ä»¥ä¸‹ç»“æ„å±•å¼€ï¼šå…ˆä»Redis Pub/Subçš„åŸºç¡€çŸ¥è¯†è®²èµ·ï¼Œå‰–æå®ƒçš„æ ¸å¿ƒæ¦‚å¿µå’Œé€‚ç”¨åœºæ™¯ï¼›æ¥ç€æ·±å…¥æ¢è®¨å…¶ä¼˜åŠ¿ä¸ç‰¹è‰²åŠŸèƒ½ï¼›ç„¶åé€šè¿‡ä¸€ä¸ªç”µå•†è®¢å•å®æ—¶é€šçŸ¥çš„å®æˆ˜æ¡ˆä¾‹ï¼Œå±•ç¤ºå…·ä½“çš„å®ç°è¿‡ç¨‹ï¼›å†ç»“åˆæˆ‘åœ¨å®é™…é¡¹ç›®ä¸­çš„ç»éªŒï¼Œåˆ†äº«æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼›æœ€åå±•æœ›å…¶è¿›é˜¶åº”ç”¨ä¸æœªæ¥è¶‹åŠ¿ã€‚æ— è®ºä½ æ˜¯æƒ³å¿«é€Ÿæ­å»ºä¸€ä¸ªå®æ—¶ç³»ç»Ÿï¼Œè¿˜æ˜¯ä¼˜åŒ–ç°æœ‰æ¶æ„ï¼Œè¿™ç¯‡æ–‡ç« éƒ½å°†ä¸ºä½ æä¾›å®ç”¨æŒ‡å¯¼ã€‚</p>
<p>å¥½äº†ï¼Œé“ºå«åˆ°æ­¤ç»“æŸï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·èµ°è¿›Redis Pub/Subçš„ä¸–ç•Œï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ç”¨ç®€å•çš„æœºåˆ¶æ’‘èµ·å®æ—¶é€šä¿¡çš„å¤§å¦çš„ã€‚</p>
<h2 data-id="heading-1">äºŒã€Rediså‘å¸ƒè®¢é˜…æ¨¡å¼åŸºç¡€</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯Redis Pub/Subï¼Ÿ</h3>
<p>Redisçš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPub/Subï¼‰æ˜¯ä¸€ç§ç»å…¸çš„æ¶ˆæ¯ä¼ é€’æ¨¡å¼ï¼Œç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­çš„å¹¿æ’­ç”µå°ï¼šå‘å¸ƒè€…ï¼ˆPublisherï¼‰å‘æŸä¸ªé¢‘é“ï¼ˆChannelï¼‰å‘é€æ¶ˆæ¯ï¼Œè€Œè®¢é˜…è€…ï¼ˆSubscriberï¼‰åˆ™é€šè¿‡è®¢é˜…è¿™äº›é¢‘é“æ¥æ¥æ”¶æ¶ˆæ¯ã€‚å®ƒçš„æ ¸å¿ƒåœ¨äºè§£è€¦â€”â€”å‘å¸ƒè€…å’Œè®¢é˜…è€…æ— éœ€ç›´æ¥é€šä¿¡ï¼Œåªéœ€é€šè¿‡Redisçš„é€šé“é—´æ¥äº¤äº’ã€‚</p>
<p>Redis Pub/Subçš„å·¥ä½œåŸç†å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„æ¯”å–»æ¥ç†è§£ï¼šæƒ³è±¡Redisæ˜¯ä¸€ä¸ªé‚®å±€ï¼Œå‘å¸ƒè€…æŠŠä¿¡ä»¶æŠ•é€’åˆ°æŸä¸ªä¿¡ç®±ï¼ˆé€šé“ï¼‰ï¼Œè€Œè®¢é˜…è€…åˆ™æ˜¯æå‰å‘Šè¯‰é‚®å±€â€œæˆ‘è¦æ”¶è¿™ä¸ªä¿¡ç®±çš„ä¿¡â€ã€‚ä¸€æ—¦æœ‰æ–°ä¿¡ä»¶åˆ°è¾¾ï¼Œé‚®å±€ä¼šç«‹åˆ»é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ã€‚è¿™ç§æœºåˆ¶çš„æ ¸å¿ƒå‘½ä»¤åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><code>SUBSCRIBE channel</code></strong>ï¼šè®¢é˜…æŸä¸ªå…·ä½“é€šé“ã€‚</li>
<li><strong><code>PUBLISH channel message</code></strong>ï¼šå‘æŒ‡å®šé€šé“å‘å¸ƒæ¶ˆæ¯ã€‚</li>
<li><strong><code>UNSUBSCRIBE channel</code></strong>ï¼šå–æ¶ˆè®¢é˜…æŸä¸ªé€šé“ã€‚</li>
<li><strong><code>PSUBSCRIBE pattern</code></strong>ï¼šè®¢é˜…ç¬¦åˆæŸç§æ¨¡å¼ï¼ˆå¦‚<code>order:*</code>ï¼‰çš„é€šé“ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ‰§è¡Œ<code>SUBSCRIBE news</code>æ¥è®¢é˜…â€œnewsâ€é€šé“ï¼Œç„¶åé€šè¿‡<code>PUBLISH news "Hello World"</code>å‘å¸ƒæ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…äº†â€œnewsâ€çš„å®¢æˆ·ç«¯éƒ½ä¼šå®æ—¶æ”¶åˆ°è¿™æ¡æ¶ˆæ¯ã€‚</p>
<p><strong>ç¤ºæ„å›¾ï¼šRedis Pub/SubåŸºæœ¬å·¥ä½œæµç¨‹</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å‘å¸ƒè€…]</span> --&gt; <span class="hljs-selector-attr">[Redisé€šé“: <span class="hljs-string">"news"</span>]</span> --&gt; <span class="hljs-selector-attr">[è®¢é˜…è€…1]</span>
                                  --&gt; <span class="hljs-selector-attr">[è®¢é˜…è€…2]</span>
</code></pre>
<h3 data-id="heading-3">ä¸ä¼ ç»Ÿæ¶ˆæ¯é˜Ÿåˆ—çš„å¯¹æ¯”</h3>
<p>Redis Pub/Subè™½ç„¶æ˜¯ä¸€ç§æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œä½†ä¸ä¼ ç»Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RabbitMQæˆ–Kafkaï¼‰æœ‰ç€æ˜¾è‘—åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„å¯¹æ¯”åˆ†æï¼š</p>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Redis Pub/Sub</strong></th><th><strong>RabbitMQ/Kafka</strong></th></tr></thead><tbody><tr><td><strong>æŒä¹…åŒ–</strong></td><td>æ— ï¼ˆæ¶ˆæ¯ä¸€æ—¦å‘é€å³æ¶ˆå¤±ï¼‰</td><td>æ”¯æŒï¼ˆå¯å­˜å‚¨æ¶ˆæ¯ï¼‰</td></tr><tr><td><strong>å¤æ‚åº¦</strong></td><td>ç®€å•ï¼Œå¼€ç®±å³ç”¨</td><td>é…ç½®å¤æ‚ï¼Œéœ€è¦é¢å¤–éƒ¨ç½²</td></tr><tr><td><strong>å®æ—¶æ€§</strong></td><td>æé«˜ï¼ˆæ¯«ç§’çº§å»¶è¿Ÿï¼‰</td><td>é«˜ï¼ˆä½†å—æŒä¹…åŒ–å½±å“ç¨æ…¢ï¼‰</td></tr><tr><td><strong>ååé‡</strong></td><td>é€‚ä¸­ï¼ˆä¾èµ–å•èŠ‚ç‚¹æ€§èƒ½ï¼‰</td><td>æé«˜ï¼ˆæ”¯æŒåˆ†å¸ƒå¼é«˜ååï¼‰</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>è½»é‡çº§å®æ—¶é€šä¿¡</td><td>å¤§è§„æ¨¡ã€æŒä¹…åŒ–æ¶ˆæ¯å¤„ç†</td></tr></tbody></table>
<p>ä»å¯¹æ¯”ä¸­å¯ä»¥çœ‹å‡ºï¼ŒRedis Pub/Subæ›´åƒæ˜¯ä¸€è¾†è½»ä¾¿çš„è·‘è½¦ï¼Œé€‚åˆçŸ­è·ç¦»å†²åˆºï¼›è€ŒRabbitMQæˆ–Kafkaåˆ™æ˜¯é‡å‹å¡è½¦ï¼Œæ“…é•¿é•¿é€”è¿è¾“ã€‚å¦‚æœä½ éœ€è¦çš„æ˜¯å¿«é€Ÿã€å®æ—¶çš„æ¶ˆæ¯å¹¿æ’­ï¼Œè€Œä¸å¤ªå…³å¿ƒå†å²æ•°æ®çš„ä¿å­˜ï¼ŒRedis Pub/Subæ— ç–‘æ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-4">é€‚ç”¨åœºæ™¯</h3>
<p>Redis Pub/Subçš„è½»é‡å’Œé«˜æ•ˆç‰¹æ€§ï¼Œä½¿å®ƒåœ¨ä»¥ä¸‹åœºæ™¯ä¸­å¤§æ”¾å¼‚å½©ï¼š</p>
<ol>
<li><strong>å®æ—¶é€šçŸ¥</strong>ï¼šå¦‚ç”µå•†å¹³å°çš„è®¢å•çŠ¶æ€æ›´æ–°ï¼Œç”¨æˆ·ä¸‹å•åç«‹åˆ»æ”¶åˆ°â€œå·²æ”¯ä»˜â€æˆ–â€œå·²å‘è´§â€çš„æ¶ˆæ¯ã€‚</li>
<li><strong>äº‹ä»¶å¹¿æ’­</strong>ï¼šå¦‚å¤šäººåœ¨çº¿ç¼–è¾‘å·¥å…·ï¼Œå½“ä¸€ä¸ªç”¨æˆ·ä¿®æ”¹å†…å®¹æ—¶ï¼Œå…¶ä»–ç”¨æˆ·å®æ—¶åŒæ­¥æ›´æ–°ã€‚</li>
<li><strong>è½»é‡çº§æ¶ˆæ¯ä¼ é€’</strong>ï¼šå¦‚å¾®æœåŠ¡ä¹‹é—´çš„çŠ¶æ€åŒæ­¥ï¼Œä¸éœ€è¦å¤æ‚é˜Ÿåˆ—çš„åœºæ™¯ã€‚</li>
</ol>
<p>ä»åŸºç¡€æ¦‚å¿µåˆ°é€‚ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å·²ç»å¯¹Redis Pub/Subæœ‰äº†ä¸€ä¸ªåˆæ­¥è®¤è¯†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿å’Œç‰¹è‰²åŠŸèƒ½ï¼Œçœ‹çœ‹å®ƒä¸ºä½•èƒ½åœ¨å®æ—¶é€šä¿¡é¢†åŸŸå æ®ä¸€å¸­ä¹‹åœ°ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Redis Pub/Subçš„æ ¸å¿ƒä¼˜åŠ¿ä¸ç‰¹è‰²åŠŸèƒ½</h2>
<p>ä»åŸºç¡€æ¦‚å¿µæˆ‘ä»¬å·²ç»äº†è§£åˆ°ï¼ŒRedis Pub/Subæ˜¯ä¸€ä¸ªè½»é‡é«˜æ•ˆçš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚ä½†å®ƒçš„çœŸæ­£é­…åŠ›åœ¨äºå…¶æ ¸å¿ƒä¼˜åŠ¿å’Œç‰¹è‰²åŠŸèƒ½ï¼Œè¿™äº›ç‰¹æ€§è®©å®ƒåœ¨å®æ—¶é€šä¿¡åœºæ™¯ä¸­è„±é¢–è€Œå‡ºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€ä¸€å‰–æå®ƒçš„äº®ç‚¹ï¼Œå¹¶ç»“åˆæˆ‘åœ¨å®é™…é¡¹ç›®ä¸­çš„ç»éªŒï¼Œå¸¦ä½ çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åœ¨å®è·µä¸­å‘æŒ¥ä½œç”¨çš„ã€‚</p>
<h3 data-id="heading-6">ä¼˜åŠ¿</h3>
<p>Redis Pub/Subä¹‹æ‰€ä»¥èƒ½æˆä¸ºå®æ—¶ç³»ç»Ÿçš„â€œå® å„¿â€ï¼Œç¦»ä¸å¼€ä»¥ä¸‹ä¸‰å¤§ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>é«˜æ€§èƒ½</strong><br/>
RedisåŸºäºå†…å­˜è¿è¡Œï¼Œæ¶ˆæ¯çš„å‘å¸ƒå’Œè®¢é˜…å‡ ä¹æ²¡æœ‰ç£ç›˜I/Oçš„æ‹–ç´¯ã€‚åœ¨æˆ‘å‚ä¸çš„ä¸€ä¸ªå®æ—¶é€šçŸ¥é¡¹ç›®ä¸­ï¼Œå•èŠ‚ç‚¹Redis Pub/Subçš„å»¶è¿Ÿç¨³å®šåœ¨5-10æ¯«ç§’ä¹‹é—´ï¼Œå³ä½¿åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¹Ÿèƒ½ä¿æŒå‡ºè‰²è¡¨ç°ã€‚è¿™ç§â€œå¿«å¦‚é—ªç”µâ€çš„ç‰¹æ€§ï¼Œè®©å®ƒéå¸¸é€‚åˆå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯ï¼Œæ¯”å¦‚å®æ—¶èŠå¤©æˆ–çŠ¶æ€åŒæ­¥ã€‚</p>
</li>
<li>
<p><strong>ç®€å•æ˜“ç”¨</strong><br/>
ä¸éœ€è¦å¤æ‚é…ç½®çš„ä¼ ç»Ÿæ¶ˆæ¯é˜Ÿåˆ—ç›¸æ¯”ï¼ŒRedis Pub/Subå‡ ä¹æ˜¯â€œå¼€ç®±å³ç”¨â€çš„å…¸èŒƒã€‚æ— éœ€é¢å¤–çš„ä¸­é—´ä»¶æˆ–æœåŠ¡ç«¯éƒ¨ç½²ï¼Œåªéœ€å‡ è¡Œä»£ç ï¼Œä½ å°±èƒ½æ­å»ºä¸€ä¸ªåŸºæœ¬çš„æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿã€‚è¿™ä¸€ç‚¹å¯¹äºå¿«é€Ÿè¿­ä»£çš„ä¸­å°å‹é¡¹ç›®å°¤ä¸ºå‹å¥½â€”â€”ä½ å¯ä»¥ç”¨æœ€å°çš„æˆæœ¬æ¢æ¥æœ€å¤§çš„æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>çµæ´»æ€§</strong><br/>
Redis Pub/Subæ”¯æŒä¸¤ç§è®¢é˜…æ–¹å¼ï¼šç²¾ç¡®çš„é€šé“è®¢é˜…å’Œæ¨¡ç³Šçš„æ¨¡å¼è®¢é˜…ã€‚è¿™ç§çµæ´»æ€§å°±åƒç»™å¼€å‘è€…é€’ä¸Šäº†ä¸€æŠŠâ€œä¸‡èƒ½é’¥åŒ™â€ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªç”±è®¾è®¡æ¶ˆæ¯åˆ†å‘çš„é€»è¾‘ã€‚æ— è®ºæ˜¯é’ˆå¯¹å•ä¸ªç”¨æˆ·æ¨é€ï¼Œè¿˜æ˜¯å¹¿æ’­ç»™ä¸€ç±»ç”¨æˆ·ï¼Œå®ƒéƒ½èƒ½è½»æ¾åº”å¯¹ã€‚</p>
</li>
</ol>
<p><strong>è¡¨æ ¼ï¼šRedis Pub/Subä¼˜åŠ¿ä¸€è§ˆ</strong></p>

























<table><thead><tr><th><strong>ä¼˜åŠ¿</strong></th><th><strong>æè¿°</strong></th><th><strong>é¡¹ç›®ä¸­çš„å®é™…æ”¶ç›Š</strong></th></tr></thead><tbody><tr><td>é«˜æ€§èƒ½</td><td>å†…å­˜æ“ä½œï¼Œå»¶è¿Ÿä½è‡³æ¯«ç§’çº§</td><td>å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯è¡¨ç°ä¼˜å¼‚</td></tr><tr><td>ç®€å•æ˜“ç”¨</td><td>æ— éœ€å¤æ‚é…ç½®ï¼Œå‡ è¡Œä»£ç å³å¯å®ç°</td><td>å¼€å‘æ•ˆç‡é«˜ï¼Œé€‚åˆå¿«é€ŸåŸå‹éªŒè¯</td></tr><tr><td>çµæ´»æ€§</td><td>æ”¯æŒé€šé“å’Œæ¨¡å¼è®¢é˜…</td><td>é€‚åº”å¤šæ ·åŒ–çš„ä¸šåŠ¡éœ€æ±‚</td></tr></tbody></table>
<h3 data-id="heading-7">ç‰¹è‰²åŠŸèƒ½</h3>
<p>é™¤äº†ä¸Šè¿°ä¼˜åŠ¿ï¼ŒRedis Pub/Subè¿˜æä¾›äº†ä¸€äº›ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œè®©å®ƒçš„åº”ç”¨åœºæ™¯æ›´åŠ ä¸°å¯Œã€‚ä»¥ä¸‹æ˜¯ä¸‰ä¸ªå€¼å¾—å…³æ³¨çš„äº®ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>é€šé“è®¢é˜…ï¼ˆChannel Subscriptionï¼‰</strong><br/>
é€šè¿‡<code>SUBSCRIBE</code>å‘½ä»¤ï¼Œå®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“çš„é€šé“ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç”µå•†ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¸“å±é€šé“ï¼ˆå¦‚<code>order:12345</code>ï¼‰ï¼Œç„¶åé€šè¿‡<code>PUBLISH order:12345 "Order shipped"</code>æ¨é€è®¢å•çŠ¶æ€æ›´æ–°ã€‚è®¢é˜…ç«¯ä¼šå®æ—¶æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•ç›´æ¥ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šè®¢é˜…ä¸å‘å¸ƒ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¢é˜…ç«¯ (Python)</span>
<span class="hljs-keyword">import</span> redis

r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)
pubsub = r.pubsub()
pubsub.subscribe(<span class="hljs-string">'order:12345'</span>)
<span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> pubsub.listen():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Received: <span class="hljs-subst">{message[<span class="hljs-string">'data'</span>]}</span>"</span>)
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‘å¸ƒç«¯ (Python)</span>
<span class="hljs-keyword">import</span> redis

r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)
r.publish(<span class="hljs-string">'order:12345'</span>, <span class="hljs-string">'Order shipped'</span>)
</code></pre>
</li>
<li>
<p><strong>æ¨¡å¼è®¢é˜…ï¼ˆPattern Subscriptionï¼‰</strong><br/>
å¦‚æœä½ éœ€è¦æ›´çµæ´»çš„æ¶ˆæ¯åˆ†å‘ï¼Œå¯ä»¥ä½¿ç”¨<code>PSUBSCRIBE</code>è¿›è¡Œæ¨¡å¼è®¢é˜…ã€‚ä¾‹å¦‚ï¼Œè®¢é˜…<code>order:*</code>å¯ä»¥æ¥æ”¶æ‰€æœ‰ä»¥â€œorder:â€å¼€å¤´çš„é€šé“æ¶ˆæ¯ã€‚è¿™ç§åŠŸèƒ½åœ¨å¹¿æ’­åœºæ™¯ä¸­éå¸¸å®ç”¨ï¼Œæ¯”å¦‚é€šçŸ¥æ‰€æœ‰åœ¨çº¿ç”¨æˆ·æŸä¸ªå…¨å±€äº‹ä»¶ã€‚</p>
<p><strong>ç¤ºæ„å›¾ï¼šæ¨¡å¼è®¢é˜…çš„å·¥ä½œæ–¹å¼</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å‘å¸ƒè€…]</span> --&gt; <span class="hljs-selector-attr">[Redis: order:12345]</span> --&gt; <span class="hljs-selector-attr">[è®¢é˜…è€…: order:*]</span>
          --&gt; <span class="hljs-selector-attr">[Redis: order:67890]</span> --&gt; <span class="hljs-selector-attr">[è®¢é˜…è€…: order:*]</span>
</code></pre>
</li>
<li>
<p><strong>æ— æŒä¹…åŒ–è®¾è®¡</strong><br/>
ä¸RabbitMQç­‰æ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–çš„é˜Ÿåˆ—ä¸åŒï¼ŒRedis Pub/Subçš„æ¶ˆæ¯æ˜¯â€œå³å‘å³å¿˜â€çš„ã€‚ä¸€æ—¦æ¶ˆæ¯å‘å¸ƒï¼ŒRedisä¸ä¼šä¿å­˜å®ƒï¼Œè®¢é˜…è€…å¦‚æœæœªåœ¨çº¿å°±æ— æ³•æ”¶åˆ°ã€‚è¿™ç§è®¾è®¡è™½ç„¶çœ‹ä¼¼æ˜¯çŸ­æ¿ï¼Œä½†åœ¨å®æ—¶æ€§è¦æ±‚é«˜ã€å†å²æ•°æ®ä¸é‡è¦çš„åœºæ™¯ä¸­ï¼Œåè€Œæˆäº†ä¼˜åŠ¿â€”â€”å®ƒé¿å…äº†å­˜å‚¨å¼€é”€ï¼Œè®©ç³»ç»Ÿæ›´åŠ è½»é‡åŒ–ã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">ä¸Rediså…¶ä»–åŠŸèƒ½çš„ç»“åˆ</h3>
<p>Redis Pub/Subå¹¶éå­¤ç«‹çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä¸Redisçš„å…¶ä»–ç‰¹æ€§æ— ç¼åä½œï¼Œè¿›ä¸€æ­¥æ‰©å±•å…¶èƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><strong>ç»“åˆ<code>List</code>æˆ–<code>Stream</code>è¡¥å……æŒä¹…åŒ–éœ€æ±‚</strong><br/>
å¦‚æœä½ çš„ä¸šåŠ¡éœ€è¦ä¿ç•™å†å²æ¶ˆæ¯ï¼Œå¯ä»¥åœ¨å‘å¸ƒæ¶ˆæ¯çš„åŒæ—¶ï¼Œå°†å…¶æ¨é€åˆ°Redisçš„<code>List</code>æˆ–<code>Stream</code>ä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é€šè¿‡<code>LPUSH</code>å°†æ¶ˆæ¯å­˜å…¥åˆ—è¡¨ï¼Œè®¢é˜…ç«¯æ‰çº¿åå¯ä»¥å›æº¯è¯»å–ï¼Œå®Œç¾è§£å†³äº†æ— æŒä¹…åŒ–çš„çŸ­æ¿ã€‚</p>
</li>
<li>
<p><strong>ç»“åˆ<code>Redis Cluster</code>å®ç°åˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’</strong><br/>
åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œå•èŠ‚ç‚¹Pub/Subå¯èƒ½é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚é€šè¿‡Redis Clusterï¼Œè™½ç„¶Pub/Subæœ¬èº«ä¸æ”¯æŒè·¨èŠ‚ç‚¹è®¢é˜…ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç†å±‚ï¼ˆå¦‚Twemproxyï¼‰æˆ–è‡ªå®šä¹‰åˆ†å‘é€»è¾‘ï¼Œå®ç°æ¶ˆæ¯çš„åˆ†å¸ƒå¼å¹¿æ’­ã€‚è¿™åœ¨æˆ‘è´Ÿè´£çš„ä¸€ä¸ªå¤šç§Ÿæˆ·ç³»ç»Ÿä¸­å¾—åˆ°äº†éªŒè¯ï¼Œæ•ˆæœæ˜¾è‘—ã€‚</p>
</li>
</ul>
<p>ä»è¿™äº›ä¼˜åŠ¿å’ŒåŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼ŒRedis Pub/Subå°±åƒä¸€ä¸ªçµæ´»çš„â€œæ¶ˆæ¯å¿«é€’å‘˜â€ï¼Œæ—¢èƒ½å¿«é€Ÿé€è¾¾ï¼Œåˆèƒ½æ ¹æ®éœ€æ±‚è°ƒæ•´è·¯çº¿ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œçœ‹çœ‹å¦‚ä½•ç”¨å®ƒæ‰“é€ ä¸€ä¸ªçœŸå®çš„å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-9">å››ã€å®ç°å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿçš„å®æˆ˜æ¡ˆä¾‹</h2>
<p>ç†è®ºè®²å¾—å†å¤šï¼Œä¸å¦‚åŠ¨æ‰‹å®è·µæ¥å¾—å®åœ¨ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹â€”â€”ç”µå•†å¹³å°çš„è®¢å•çŠ¶æ€å®æ—¶é€šçŸ¥ç³»ç»Ÿï¼Œæ¥å±•ç¤ºå¦‚ä½•åˆ©ç”¨Redis Pub/Subæ‰“é€ ä¸€ä¸ªé«˜æ•ˆçš„å®æ—¶æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿã€‚æˆ‘ä¼šä»éœ€æ±‚èƒŒæ™¯å‡ºå‘ï¼Œé€æ­¥å¸¦ä½ å®Œæˆç³»ç»Ÿè®¾è®¡å’Œä»£ç å®ç°ï¼Œå¹¶åˆ†äº«è¿è¡Œæ•ˆæœå’Œä¸€äº›å®è·µä¸­çš„å°æŠ€å·§ã€‚</p>
<h3 data-id="heading-10">æ¡ˆä¾‹èƒŒæ™¯</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†å¹³å°ï¼Œç”¨æˆ·ä¸‹å•åå¸Œæœ›èƒ½å®æ—¶çœ‹åˆ°è®¢å•çŠ¶æ€çš„å˜åŒ–ï¼Œæ¯”å¦‚â€œå·²æ”¯ä»˜â€ã€â€œå·²å‘è´§â€æˆ–â€œå·²ç­¾æ”¶â€ã€‚ä¼ ç»Ÿçš„è½®è¯¢æ–¹å¼ï¼ˆå‰ç«¯å®šæ—¶è¯·æ±‚åç«¯æ¥å£ï¼‰æ˜¾ç„¶ä¸å¤Ÿä¼˜é›…ï¼Œä¸ä»…å¢åŠ äº†æœåŠ¡å™¨å‹åŠ›ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿä¸å¤Ÿæµç•…ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœºåˆ¶ï¼Œè®©åç«¯åœ¨è®¢å•çŠ¶æ€æ›´æ–°æ—¶ä¸»åŠ¨æ¨é€æ¶ˆæ¯åˆ°å‰ç«¯ï¼Œè€ŒRedis Pub/Subæ­£æ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„åˆ©å™¨ã€‚</p>
<p><strong>éœ€æ±‚æ˜ç¡®</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸‹å•åï¼Œå‰ç«¯é€šè¿‡WebSocketå®æ—¶æ¥æ”¶è®¢å•çŠ¶æ€æ›´æ–°ã€‚</li>
<li>ç³»ç»Ÿæ”¯æŒå¤šç”¨æˆ·å¹¶å‘ï¼Œæ¯ä¸ªç”¨æˆ·åªæ¥æ”¶è‡ªå·±çš„è®¢å•æ¶ˆæ¯ã€‚</li>
<li>æ¶ˆæ¯ä¼ é€’å»¶è¿Ÿå°½é‡æ§åˆ¶åœ¨æ¯«ç§’çº§ã€‚</li>
</ul>
<h3 data-id="heading-11">ç³»ç»Ÿè®¾è®¡</h3>
<p>è¦å®ç°è¿™ä¸ªå®æ—¶é€šçŸ¥ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦å°†åç«¯æœåŠ¡ã€Redis Pub/Subå’Œå‰ç«¯WebSocketä¸²è”èµ·æ¥ã€‚æ•´ä½“æ¶æ„å¯ä»¥ç®€å•æè¿°ä¸ºï¼šåç«¯ç›‘å¬åˆ°è®¢å•çŠ¶æ€å˜åŒ–åï¼Œé€šè¿‡Redis Pub/Subå‘å¸ƒæ¶ˆæ¯ï¼›å‰ç«¯é€šè¿‡WebSocketè®¢é˜…Redisé€šé“ï¼Œæ¥æ”¶å¹¶å±•ç¤ºæ›´æ–°ã€‚</p>
<p><strong>æ¶æ„å›¾ï¼šç³»ç»Ÿè®¾è®¡æ¦‚è§ˆ</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[åç«¯æœåŠ¡]</span> --&gt; <span class="hljs-selector-attr">[Redis Pub/Sub: order:{user_id}]</span> --&gt; <span class="hljs-selector-attr">[WebSocketæœåŠ¡]</span> --&gt; <span class="hljs-selector-attr">[å‰ç«¯å®¢æˆ·ç«¯]</span>
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>é€šé“è®¾è®¡</strong>ï¼šä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªç‹¬ç«‹é€šé“ï¼Œå‘½åè§„åˆ™ä¸º<code>order:{user_id}</code>ï¼ˆå¦‚<code>order:12345</code>ï¼‰ï¼Œç¡®ä¿æ¶ˆæ¯ç²¾å‡†é€è¾¾ã€‚</li>
<li><strong>åç«¯å‘å¸ƒ</strong>ï¼šè®¢å•çŠ¶æ€æ›´æ–°æ—¶ï¼Œåç«¯é€šè¿‡<code>PUBLISH</code>æ¨é€æ¶ˆæ¯åˆ°å¯¹åº”é€šé“ã€‚</li>
<li><strong>å‰ç«¯è®¢é˜…</strong>ï¼šWebSocketæœåŠ¡ä½œä¸ºè®¢é˜…ç«¯ï¼Œç›‘å¬Redisé€šé“å¹¶å°†æ¶ˆæ¯è½¬å‘ç»™å‰ç«¯ã€‚</li>
</ol>
<h3 data-id="heading-12">ä»£ç å®ç°</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨ä»£ç å°†è®¾è®¡è½åœ°ã€‚æˆ‘å°†åˆ†åˆ«å±•ç¤ºåç«¯çš„å‘å¸ƒç«¯ï¼ˆPythonï¼‰å’Œè®¢é˜…ç«¯ï¼ˆNode.jsï¼‰çš„å®ç°ï¼Œä»£ç ä¸­ä¼šå¸¦æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæ–¹ä¾¿ä½ ç†è§£å’Œå¤ç”¨ã€‚</p>
<h4 data-id="heading-13">å‘å¸ƒç«¯ï¼ˆPythonç¤ºä¾‹ï¼‰</h4>
<p>åç«¯è´Ÿè´£åœ¨è®¢å•çŠ¶æ€æ›´æ–°æ—¶å‘å¸ƒæ¶ˆæ¯ã€‚è¿™é‡Œå‡è®¾è®¢å•çŠ¶æ€å˜æ›´ç”±æ•°æ®åº“è§¦å‘ï¼Œåç«¯ç›‘å¬åˆ°åé€šè¿‡Redisæ¨é€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># è¿æ¥Redis</span>
r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">publish_order_update</span>(<span class="hljs-params">user_id, status</span>):
    <span class="hljs-string">"""å‘å¸ƒè®¢å•çŠ¶æ€æ›´æ–°åˆ°ç”¨æˆ·çš„ä¸“å±é€šé“"""</span>
    channel = <span class="hljs-string">f"order:<span class="hljs-subst">{user_id}</span>"</span>  <span class="hljs-comment"># é€šé“ååŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚ "order:12345"</span>
    message = <span class="hljs-string">f"Order status updated: <span class="hljs-subst">{status}</span>"</span>
    r.publish(channel, message)   <span class="hljs-comment"># å‘å¸ƒæ¶ˆæ¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Published to <span class="hljs-subst">{channel}</span>: <span class="hljs-subst">{message}</span>"</span>)

<span class="hljs-comment"># æ¨¡æ‹Ÿè®¢å•çŠ¶æ€æ›´æ–°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    user_id = <span class="hljs-string">"12345"</span>
    statuses = [<span class="hljs-string">"Paid"</span>, <span class="hljs-string">"Shipped"</span>, <span class="hljs-string">"Delivered"</span>]
    <span class="hljs-keyword">for</span> status <span class="hljs-keyword">in</span> statuses:
        publish_order_update(user_id, status)
        time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># æ¨¡æ‹ŸçŠ¶æ€å˜åŒ–çš„é—´éš”</span>
</code></pre>
<p><strong>ä»£ç è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>redis.Redis</code>è¿æ¥æœ¬åœ°Rediså®ä¾‹ã€‚</li>
<li><code>publish_order_update</code>å‡½æ•°åŠ¨æ€ç”Ÿæˆé€šé“åå¹¶å‘å¸ƒæ¶ˆæ¯ã€‚</li>
<li>æ¨¡æ‹Ÿåœºæ™¯ä¸­ï¼Œæ¯éš”2ç§’æ›´æ–°ä¸€æ¬¡çŠ¶æ€ï¼Œå®é™…é¡¹ç›®ä¸­å¯ç”±ä¸šåŠ¡é€»è¾‘è§¦å‘ã€‚</li>
</ul>
<h4 data-id="heading-14">è®¢é˜…ç«¯ï¼ˆNode.jsç¤ºä¾‹ï¼‰</h4>
<p>å‰ç«¯é€šè¿‡WebSocketæœåŠ¡è®¢é˜…Redisé€šé“ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨Node.jså®ç°ä¸€ä¸ªç®€å•çš„è®¢é˜…æœåŠ¡ï¼Œå°†æ¶ˆæ¯è½¬å‘ç»™å‰ç«¯å®¢æˆ·ç«¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'redis'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocket</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);

<span class="hljs-comment">// åˆ›å»ºRedisè®¢é˜…å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">const</span> subscriber = redis.<span class="hljs-title function_">createClient</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">6379</span>
});

<span class="hljs-comment">// åˆ›å»ºWebSocketæœåŠ¡</span>
<span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-title class_">Server</span>({ <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span> });

<span class="hljs-comment">// è®¢é˜…ç”¨æˆ·è®¢å•é€šé“</span>
<span class="hljs-keyword">const</span> userId = <span class="hljs-string">'12345'</span>;
<span class="hljs-keyword">const</span> channel = <span class="hljs-string">`order:<span class="hljs-subst">${userId}</span>`</span>;
subscriber.<span class="hljs-title function_">subscribe</span>(channel);

subscriber.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">channel, message</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received message on <span class="hljs-subst">${channel}</span>: <span class="hljs-subst">${message}</span>`</span>);
    <span class="hljs-comment">// å‘æ‰€æœ‰WebSocketå®¢æˆ·ç«¯å¹¿æ’­æ¶ˆæ¯</span>
    wss.<span class="hljs-property">clients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (client.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span>) {
            client.<span class="hljs-title function_">send</span>(message);
        }
    });
});

<span class="hljs-comment">// WebSocketè¿æ¥äº‹ä»¶</span>
wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-function"><span class="hljs-params">ws</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'New client connected'</span>);
    ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Client disconnected'</span>));
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Subscribed to <span class="hljs-subst">${channel}</span>, WebSocket server running on port 8080`</span>);
</code></pre>
<p><strong>ä»£ç è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>redis</code>æ¨¡å—è¿æ¥Redisï¼Œè®¢é˜…ç‰¹å®šç”¨æˆ·çš„é€šé“ï¼ˆå¦‚<code>order:12345</code>ï¼‰ã€‚</li>
<li>é€šè¿‡<code>ws</code>æ¨¡å—åˆ›å»ºWebSocketæœåŠ¡ï¼Œç›‘å¬8080ç«¯å£ã€‚</li>
<li>å½“Redisæ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œè§¦å‘<code>message</code>äº‹ä»¶ï¼Œå°†æ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰è¿æ¥çš„WebSocketå®¢æˆ·ç«¯ã€‚</li>
</ul>
<h4 data-id="heading-15">å‰ç«¯ç®€å•ç¤ºä¾‹ï¼ˆHTML+JavaScriptï¼‰</h4>
<p>ä¸ºäº†å®Œæ•´æ€§ï¼Œè¿™é‡Œé™„ä¸Šä¸€ä¸ªç®€å•çš„HTMLé¡µé¢ï¼Œé€šè¿‡WebSocketæ¥æ”¶æ¶ˆæ¯å¹¶æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Order Status<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Order Status Updates<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updates"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">'ws://localhost:8080'</span>);
        ws.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-keyword">const</span> li = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'li'</span>);
            li.<span class="hljs-property">textContent</span> = event.<span class="hljs-property">data</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'updates'</span>).<span class="hljs-title function_">appendChild</span>(li);
        };
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">è¿è¡Œæ•ˆæœ</h3>
<p>å¯åŠ¨åç«¯å‘å¸ƒç«¯ã€Node.jsè®¢é˜…ç«¯å’Œå‰ç«¯é¡µé¢ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹æ•ˆæœï¼š</p>
<ol>
<li>åç«¯æ¯éš”2ç§’å‘å¸ƒä¸€æ¡è®¢å•çŠ¶æ€æ›´æ–°ï¼ˆå¦‚â€œOrder status updated: Paidâ€ï¼‰ã€‚</li>
<li>è®¢é˜…ç«¯å®æ—¶ç›‘å¬åˆ°æ¶ˆæ¯å¹¶é€šè¿‡WebSocketæ¨é€ç»™å‰ç«¯ã€‚</li>
<li>å‰ç«¯é¡µé¢åŠ¨æ€æ˜¾ç¤ºæ¯æ¡æ›´æ–°ï¼Œå»¶è¿Ÿé€šå¸¸åœ¨10msä»¥å†…ã€‚</li>
</ol>
<p><strong>æ€§èƒ½éªŒè¯</strong>ï¼š<br/>
åœ¨æˆ‘çš„æµ‹è¯•ç¯å¢ƒä¸­ï¼ˆå•æœºRedisï¼Œi5å¤„ç†å™¨ï¼Œ8GBå†…å­˜ï¼‰ï¼Œæ¶ˆæ¯ä»å‘å¸ƒåˆ°å‰ç«¯æ˜¾ç¤ºçš„å¹³å‡å»¶è¿Ÿçº¦ä¸º8msã€‚å³ä½¿æ¨¡æ‹Ÿ100ä¸ªç”¨æˆ·åŒæ—¶è®¢é˜…ä¸åŒé€šé“ï¼Œç³»ç»Ÿä¾ç„¶ç¨³å®šè¿è¡Œï¼Œè¯æ˜äº†Redis Pub/Subåœ¨ä¸­å°è§„æ¨¡åœºæ™¯ä¸‹çš„å¯é æ€§ã€‚</p>
<p><strong>æ‰©å±•æ€§</strong>ï¼š</p>
<ul>
<li>é€šè¿‡è°ƒæ•´é€šé“è®¾è®¡ï¼ˆå¦‚<code>order:{order_id}</code>ï¼‰ï¼Œå¯ä»¥æ”¯æŒæŒ‰è®¢å•æ¨é€è€ŒéæŒ‰ç”¨æˆ·ã€‚</li>
<li>å¤šç”¨æˆ·åœºæ™¯ä¸‹ï¼Œå¯ä¸ºæ¯ä¸ªç”¨æˆ·åŠ¨æ€åˆ›å»ºè®¢é˜…å®ä¾‹ï¼Œç»“åˆè¿æ¥æ± ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<p>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†Redis Pub/Subå¦‚ä½•ç”¨æœ€å°çš„ä»£ç é‡å®ç°å®æ—¶é€šä¿¡çš„ä¼˜é›…æ–¹æ¡ˆã€‚ä½†å®è·µè¿‡ç¨‹ä¸­éš¾å…ä¼šé‡åˆ°ä¸€äº›å‘ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†äº«æœ€ä½³å®è·µå’Œè¸©å‘ç»éªŒï¼Œå¸®åŠ©ä½ å°‘èµ°å¼¯è·¯ã€‚</p>
<h2 data-id="heading-17">äº”ã€æœ€ä½³å®è·µä¸è¸©å‘ç»éªŒ</h2>
<p>å®è·µå‡ºçœŸçŸ¥ã€‚è™½ç„¶Redis Pub/Subç”¨èµ·æ¥ç®€å•é«˜æ•ˆï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸åˆç†çš„ç”¨æ³•å¯èƒ½ä¼šè®©ä½ è¸©å‘ï¼Œç”šè‡³å½±å“ç³»ç»Ÿç¨³å®šæ€§ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘å°†æ€»ç»“ä¸€äº›æœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ ç”¨å¾—æ›´é¡ºæ‰‹ï¼›åŒæ—¶åˆ†äº«å‡ ä¸ªå¸¸è§çš„â€œå‘â€ä»¥åŠæˆ‘è¸©è¿‡çš„æ•™è®­å’Œè§£å†³åŠæ³•ï¼Œå¸Œæœ›èƒ½è®©ä½ å°‘èµ°å¼¯è·¯ã€‚</p>
<h3 data-id="heading-18">æœ€ä½³å®è·µ</h3>
<p>ä»¥ä¸‹æ˜¯åŸºäºæˆ‘åœ¨å¤šä¸ªå®æ—¶ç³»ç»Ÿé¡¹ç›®ä¸­çš„ç»éªŒæç‚¼å‡ºçš„å‡ æ¡æœ€ä½³å®è·µï¼Œç®€å•å®ç”¨ï¼Œå€¼å¾—æ”¶è—ã€‚</p>
<ol>
<li>
<p><strong>é€šé“å‘½åè§„èŒƒ</strong><br/>
ä¸€ä¸ªæ¸…æ™°çš„å‘½åè§„åˆ™èƒ½è®©ä½ çš„ç³»ç»Ÿæ›´æ˜“ç®¡ç†å’Œè°ƒè¯•ã€‚å»ºè®®é‡‡ç”¨åˆ†å±‚ç»“æ„ï¼Œæ¯”å¦‚<code>namespace:entity:id</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†åœºæ™¯ä¸­ï¼Œä½¿ç”¨<code>order:user:12345</code>è¡¨ç¤ºç”¨æˆ·12345çš„è®¢å•é€šé“ï¼Œ<code>chat:room:abc</code>è¡¨ç¤ºèŠå¤©å®¤abcçš„å¹¿æ’­é€šé“ã€‚è¿™ç§ç»“æ„ä¸ä»…å¯è¯»æ€§å¼ºï¼Œè¿˜èƒ½é¿å…å‘½åå†²çªã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">PUBLISH <span class="hljs-keyword">order</span>:<span class="hljs-keyword">user</span>:<span class="hljs-number">12345</span> "Order paid"
SUBSCRIBE <span class="hljs-keyword">order</span>:<span class="hljs-keyword">user</span>:<span class="hljs-number">12345</span>
</code></pre>
</li>
<li>
<p><strong>è¿æ¥ç®¡ç†</strong><br/>
è®¢é˜…ç«¯å¦‚æœé¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥ï¼Œä¼šå¢åŠ Redisçš„å‹åŠ›ã€‚å»ºè®®ä½¿ç”¨è¿æ¥æ± æ¥å¤ç”¨è¿æ¥ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ã€‚æˆ‘åœ¨ä¸€ä¸ªå®æ—¶é€šçŸ¥é¡¹ç›®ä¸­ï¼Œé€šè¿‡Pythonçš„<code>redis-py</code>é…ç½®è¿æ¥æ± ï¼Œè®¢é˜…ç«¯çš„ç¨³å®šæ€§æå‡äº†è¿‘30%ï¼Œæ‰çº¿ç‡æ˜¾è‘—é™ä½ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šè¿æ¥æ± é…ç½®</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis

pool = redis.ConnectionPool(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)
r = redis.Redis(connection_pool=pool)
pubsub = r.pubsub()
pubsub.subscribe(<span class="hljs-string">'order:user:12345'</span>)
</code></pre>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong><br/>
ç½‘ç»œæŠ–åŠ¨æˆ–RedisæœåŠ¡é‡å¯å¯èƒ½å¯¼è‡´è®¢é˜…ç«¯æ–­è¿ã€‚ä¸ºç¡®ä¿å¥å£®æ€§ï¼Œè®¢é˜…ç«¯éœ€è¦å®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶ã€‚æˆ‘çš„åšæ³•æ˜¯ç›‘å¬è¿æ¥é”™è¯¯äº‹ä»¶ï¼Œå¹¶åœ¨æ–­å¼€åå°è¯•é‡æ–°è®¢é˜…ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šè‡ªåŠ¨é‡è¿</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'redis'</span>);
<span class="hljs-keyword">const</span> subscriber = redis.<span class="hljs-title function_">createClient</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">subscribeChannel</span>(<span class="hljs-params">channel</span>) {
    subscriber.<span class="hljs-title function_">subscribe</span>(channel);
}

subscriber.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Connection lost, reconnecting...'</span>, err);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">subscribeChannel</span>(<span class="hljs-string">'order:12345'</span>), <span class="hljs-number">1000</span>);
});

<span class="hljs-title function_">subscribeChannel</span>(<span class="hljs-string">'order:12345'</span>);
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ä¸è°ƒè¯•</strong><br/>
Redisæä¾›äº†<code>PUBSUB</code>å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹æ´»è·ƒé€šé“å’Œè®¢é˜…è€…æ•°é‡ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ<code>PUBSUB CHANNELS</code>åˆ—å‡ºæ‰€æœ‰æ´»è·ƒé€šé“ï¼Œ<code>PUBSUB NUMSUB channel</code>è¿”å›æŸä¸ªé€šé“çš„è®¢é˜…è€…æ•°é‡ã€‚åœ¨è°ƒè¯•æ—¶ï¼Œè¿™å°±åƒç»™ç³»ç»Ÿè£…ä¸Šäº†â€œé€è§†é•œâ€ã€‚</p>
<p><strong>ç¤ºä¾‹è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-meta prompt_">127.0.0.1:6379&gt;</span> <span class="hljs-variable constant_">PUBSUB</span> <span class="hljs-variable constant_">CHANNELS</span>
<span class="hljs-number">1</span>) <span class="hljs-string">"order:user:12345"</span>
<span class="hljs-number">2</span>) <span class="hljs-string">"order:user:67890"</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-19">è¸©å‘ç»éªŒ</h3>
<p>ç†è®ºä¸Šå®Œç¾çš„å·¥å…·ï¼Œå®é™…ç”¨èµ·æ¥æ€»ä¼šé‡åˆ°æ„å¤–ã€‚ä»¥ä¸‹æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­è¸©è¿‡çš„å‡ ä¸ªå‘ï¼Œä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<ol>
<li>
<p><strong>æ— æŒä¹…åŒ–å¯¼è‡´çš„æ¶ˆæ¯ä¸¢å¤±</strong><br/>
<strong>é—®é¢˜</strong>ï¼šRedis Pub/Subçš„æ¶ˆæ¯ä¸€æ—¦å‘å¸ƒï¼Œå¦‚æœè®¢é˜…ç«¯æœªåœ¨çº¿ï¼Œå°±æ°¸è¿œæ”¶ä¸åˆ°äº†ã€‚åœ¨ä¸€ä¸ªè®¢å•é€šçŸ¥é¡¹ç›®ä¸­ï¼Œç”¨æˆ·çŸ­æš‚æ–­ç½‘åé”™è¿‡äº†å…³é”®çŠ¶æ€æ›´æ–°ï¼Œå¼•å‘äº†ä¸å°‘æŠ•è¯‰ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç»“åˆ<code>Redis Stream</code>æˆ–<code>List</code>åšæ¶ˆæ¯å¤‡ä»½ã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨å‘å¸ƒæ¶ˆæ¯æ—¶åŒæ—¶ç”¨<code>XADD</code>å­˜å…¥Streamï¼Œè®¢é˜…ç«¯é‡è¿åå¯å›æº¯è¯»å–ã€‚<br/>
<strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">r.publish(<span class="hljs-string">'order:12345'</span>, <span class="hljs-string">'Order paid'</span>)
r.xadd(<span class="hljs-string">'order_history:12345'</span>, {<span class="hljs-string">'status'</span>: <span class="hljs-string">'Order paid'</span>})
</code></pre>
</li>
<li>
<p><strong>è®¢é˜…ç«¯é˜»å¡é—®é¢˜</strong><br/>
<strong>é—®é¢˜</strong>ï¼šè®¢é˜…ç«¯å¦‚æœåœ¨å¤„ç†æ¶ˆæ¯æ—¶æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼ˆæ¯”å¦‚å†™æ•°æ®åº“ï¼‰ï¼Œä¼šå¯¼è‡´åç»­æ¶ˆæ¯å †ç§¯ç”šè‡³ä¸¢å¤±ã€‚æˆ‘æ›¾åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å› ä¸ºåœ¨è®¢é˜…å›è°ƒé‡Œç›´æ¥æ“ä½œMySQLï¼Œå¯¼è‡´æ¶ˆæ¯å»¶è¿Ÿé£™å‡ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå°†è€—æ—¶ä»»åŠ¡äº¤ç»™å¼‚æ­¥é˜Ÿåˆ—ï¼ˆå¦‚Celeryæˆ–Bullï¼‰å¤„ç†ï¼Œè®¢é˜…ç«¯åªè´Ÿè´£æ¥æ”¶å’Œè½¬å‘ã€‚<br/>
<strong>ä¼˜åŒ–åé€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">è®¢é˜…ç«¯æ”¶åˆ°æ¶ˆæ¯ -<span class="hljs-punctuation">-&gt;</span> æ¨é€è‡³å¼‚æ­¥é˜Ÿåˆ— -<span class="hljs-punctuation">-&gt;</span> é˜Ÿåˆ— worker å¤„ç†æ•°æ®åº“æ“ä½œ
</code></pre>
</li>
<li>
<p><strong>å¤§è§„æ¨¡è®¢é˜…çš„æ€§èƒ½ç“¶é¢ˆ</strong><br/>
<strong>é—®é¢˜</strong>ï¼šå½“è®¢é˜…é€šé“æ•°é‡æ¿€å¢ï¼ˆæ¯”å¦‚10ä¸‡ä¸ªç”¨æˆ·åŒæ—¶åœ¨çº¿ï¼‰ï¼Œå•èŠ‚ç‚¹Redisçš„æ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ï¼ŒCPUå ç”¨ç‡ç”šè‡³è¾¾åˆ°90%ä»¥ä¸Šã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¸€æ˜¯å‡å°‘é€šé“æ•°é‡ï¼Œä¼˜å…ˆä½¿ç”¨æ¨¡å¼è®¢é˜…ï¼ˆå¦‚<code>order:*</code>ï¼‰ï¼›äºŒæ˜¯åˆ†ç‰‡è®¢é˜…ï¼Œå°†ç”¨æˆ·æŒ‰èŒƒå›´åˆ†é…åˆ°å¤šä¸ªRediså®ä¾‹ã€‚æˆ‘åœ¨å®è·µä¸­é€šè¿‡ä¸€è‡´æ€§å“ˆå¸Œåˆ†ç‰‡ï¼ŒæˆåŠŸå°†è´Ÿè½½åˆ†æ•£åˆ°3ä¸ªèŠ‚ç‚¹ï¼Œæ€§èƒ½ç“¶é¢ˆè¿åˆƒè€Œè§£ã€‚</p>
</li>
<li>
<p><strong>Redis Clusterä¸‹çš„é™åˆ¶</strong><br/>
<strong>é—®é¢˜</strong>ï¼šRedis Clusterä¸æ”¯æŒè·¨èŠ‚ç‚¹è®¢é˜…ï¼Œå‘å¸ƒåˆ°èŠ‚ç‚¹Açš„æ¶ˆæ¯ï¼ŒèŠ‚ç‚¹Bçš„è®¢é˜…è€…æ”¶ä¸åˆ°ã€‚åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼é¡¹ç›®ä¸­ï¼Œè¿™è®©æˆ‘ä¸€åº¦æŠ“ç‹‚ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå¼•å…¥ä»£ç†å±‚ï¼ˆå¦‚Twemproxyï¼‰ç»Ÿä¸€æ¶ˆæ¯åˆ†å‘ï¼Œæˆ–è€…é€šè¿‡è‡ªå®šä¹‰é€»è¾‘åœ¨åº”ç”¨å±‚åŒæ­¥æ¶ˆæ¯ã€‚è™½ç„¶å¢åŠ äº†å¤æ‚åº¦ï¼Œä½†æ•ˆæœç¨³å®šã€‚<br/>
<strong>ç¤ºæ„å›¾ï¼šä»£ç†å±‚åˆ†å‘</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å‘å¸ƒè€…]</span> --&gt; <span class="hljs-selector-attr">[Twemproxy]</span> --&gt; <span class="hljs-selector-attr">[Redis Node A]</span>
                        --&gt; <span class="hljs-selector-attr">[Redis Node B]</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-20">å°ç»“</h3>
<p>è¿™äº›æœ€ä½³å®è·µå’Œè¸©å‘ç»éªŒï¼Œå°±åƒåœ¨Redis Pub/Subçš„ä½¿ç”¨æ‰‹å†Œä¸Šæ ‡æ³¨çš„â€œé‡ç‚¹æ³¨æ„äº‹é¡¹â€ã€‚é€šè¿‡è§„èŒƒå‘½åã€ç®¡ç†è¿æ¥å’Œå¤„ç†å¼‚å¸¸ï¼Œä½ çš„ç³»ç»Ÿä¼šæ›´å¥å£®ï¼›è€Œäº†è§£æ— æŒä¹…åŒ–ã€é˜»å¡å’Œåˆ†å¸ƒå¼åœºæ™¯çš„å±€é™æ€§ï¼Œåˆ™èƒ½å¸®ä½ æå‰é¿å¼€é›·åŒºã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€äº›è¿›é˜¶åº”ç”¨å’Œä¼˜åŒ–æ–¹æ¡ˆï¼Œçœ‹çœ‹å¦‚ä½•è®©Pub/Subå‘æŒ¥æ›´å¤§æ½œåŠ›ã€‚</p>
<h2 data-id="heading-21">å…­ã€è¿›é˜¶åº”ç”¨ä¸ä¼˜åŒ–</h2>
<p>Redis Pub/Subè™½ç„¶ç®€å•é«˜æ•ˆï¼Œä½†åœ¨é¢å¯¹æ›´å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚æˆ–é«˜è´Ÿè½½åœºæ™¯æ—¶ï¼Œå•é åŸºç¡€åŠŸèƒ½å¯èƒ½ä¸å¤Ÿã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆå…¶ä»–æŠ€æœ¯æˆ–ä¼˜åŒ–ç­–ç•¥ï¼Œè®©å®ƒåœ¨æ›´å¹¿é˜”çš„èˆå°ä¸Šå‘å…‰å‘çƒ­ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘å°†åˆ†äº«å¦‚ä½•å°†Pub/Subä¸WebSocketé›†æˆæ‰“é€ å®Œæ•´å®æ—¶ç³»ç»Ÿï¼Œä»¥åŠåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„æ‰©å±•æ€è·¯ï¼Œæœ€åæä¾›ä¸€äº›æ€§èƒ½ä¼˜åŒ–çš„å®ç”¨å»ºè®®ã€‚</p>
<h3 data-id="heading-22">ç»“åˆWebSocketçš„å®Œæ•´å®æ—¶ç³»ç»Ÿ</h3>
<p>åœ¨ä¸Šä¸€ç« çš„å®æˆ˜æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆæ­¥å±•ç¤ºäº†Redis Pub/Subä¸WebSocketçš„åä½œã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ç§é›†æˆå¯ä»¥æ›´æ·±å…¥ï¼Œæˆä¸ºä¸€ä¸ªå®Œæ•´çš„å®æ—¶é€šä¿¡è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯å®ç°çš„å…³é”®æ­¥éª¤å’Œç»éªŒåˆ†äº«ï¼š</p>
<ol>
<li>
<p><strong>æ¶æ„è®¾è®¡</strong><br/>
WebSocketæœåŠ¡ä½œä¸ºæ¡¥æ¢ï¼Œä¸€è¾¹è®¢é˜…Redisé€šé“ï¼Œä¸€è¾¹ä¸å‰ç«¯å®¢æˆ·ç«¯ä¿æŒé•¿è¿æ¥ã€‚åç«¯ä¸šåŠ¡é€»è¾‘é€šè¿‡Rediså‘å¸ƒæ¶ˆæ¯ï¼ŒWebSocketæœåŠ¡å®æ—¶è½¬å‘ç»™å‰ç«¯ã€‚è¿™ç§è®¾è®¡å°±åƒä¸€ä¸ªâ€œæ¶ˆæ¯ä¸­è½¬ç«™â€ï¼Œæ—¢è§£è€¦äº†å‰åç«¯ï¼Œåˆä¿è¯äº†å®æ—¶æ€§ã€‚</p>
<p><strong>ç¤ºæ„å›¾ï¼šå®Œæ•´å®æ—¶ç³»ç»Ÿ</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ä¸šåŠ¡æœåŠ¡]</span> --&gt; <span class="hljs-selector-attr">[Redis Pub/Sub]</span> --&gt; <span class="hljs-selector-attr">[WebSocketæœåŠ¡]</span> --&gt; <span class="hljs-selector-attr">[å‰ç«¯å®¢æˆ·ç«¯]</span>
</code></pre>
</li>
<li>
<p><strong>å®ç°è¦ç‚¹</strong></p>
<ul>
<li><strong>åŠ¨æ€è®¢é˜…</strong>ï¼šæ ¹æ®ç”¨æˆ·IDåŠ¨æ€è®¢é˜…é€šé“ï¼ˆå¦‚<code>order:user:12345</code>ï¼‰ï¼Œæ”¯æŒå¤šç”¨æˆ·å¹¶å‘ã€‚</li>
<li><strong>æ¶ˆæ¯è¿‡æ»¤</strong>ï¼šWebSocketæœåŠ¡æ ¹æ®å®¢æˆ·ç«¯èº«ä»½ï¼Œåªæ¨é€ç›¸å…³æ¶ˆæ¯ï¼Œé¿å…å¹¿æ’­å†—ä½™ã€‚</li>
<li><strong>å¿ƒè·³æœºåˆ¶</strong>ï¼šä¸ºWebSocketæ·»åŠ å¿ƒè·³æ£€æµ‹ï¼Œé˜²æ­¢è¿æ¥æ— å£°æ–­å¼€ã€‚</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šå¸¦å¿ƒè·³çš„WebSocketæœåŠ¡</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'redis'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocket</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>);

<span class="hljs-keyword">const</span> subscriber = redis.<span class="hljs-title function_">createClient</span>();
<span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-title class_">Server</span>({ <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span> });

wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-function"><span class="hljs-params">ws</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> userId = <span class="hljs-string">'12345'</span>; <span class="hljs-comment">// å‡è®¾ä»è¯·æ±‚ä¸­è·å–</span>
    <span class="hljs-keyword">const</span> channel = <span class="hljs-string">`order:user:<span class="hljs-subst">${userId}</span>`</span>;
    subscriber.<span class="hljs-title function_">subscribe</span>(channel);

    <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹</span>
    ws.<span class="hljs-property">isAlive</span> = <span class="hljs-literal">true</span>;
    ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pong'</span>, <span class="hljs-function">() =&gt;</span> ws.<span class="hljs-property">isAlive</span> = <span class="hljs-literal">true</span>);
});

subscriber.<span class="hljs-title function_">on</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function">(<span class="hljs-params">channel, message</span>) =&gt;</span> {
    wss.<span class="hljs-property">clients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (client.<span class="hljs-property">readyState</span> === <span class="hljs-title class_">WebSocket</span>.<span class="hljs-property">OPEN</span> &amp;&amp; channel.<span class="hljs-title function_">includes</span>(client.<span class="hljs-property">userId</span>)) {
            client.<span class="hljs-title function_">send</span>(message);
        }
    });
});

<span class="hljs-comment">// æ¯30ç§’æ£€æŸ¥å¿ƒè·³</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    wss.<span class="hljs-property">clients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">ws</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (!ws.<span class="hljs-property">isAlive</span>) <span class="hljs-keyword">return</span> ws.<span class="hljs-title function_">terminate</span>();
        ws.<span class="hljs-property">isAlive</span> = <span class="hljs-literal">false</span>;
        ws.<span class="hljs-title function_">ping</span>();
    });
}, <span class="hljs-number">30000</span>);
</code></pre>
</li>
<li>
<p><strong>é¡¹ç›®ç»éªŒ</strong><br/>
åœ¨ä¸€ä¸ªå®æ—¶åä½œå·¥å…·é¡¹ç›®ä¸­ï¼Œæˆ‘ç”¨è¿™ç§æ–¹å¼å®ç°äº†å¤šäººæ–‡æ¡£åŒæ­¥ã€‚æ¯æ¬¡ç”¨æˆ·ç¼–è¾‘å†…å®¹ï¼Œåç«¯å‘å¸ƒåˆ°<code>doc:room:abc</code>ï¼ŒWebSocketæœåŠ¡è®¢é˜…åæ¨é€ç»™æˆ¿é—´å†…æ‰€æœ‰ç”¨æˆ·ã€‚å®é™…è¿è¡Œä¸­ï¼Œ100äººåŒæ—¶åœ¨çº¿æ—¶ï¼Œæ¶ˆæ¯å»¶è¿Ÿä»ä½äº20msï¼Œç”¨æˆ·ä½“éªŒéå¸¸æµç•…ã€‚</p>
</li>
</ol>
<h3 data-id="heading-23">åˆ†å¸ƒå¼åœºæ™¯ä¸‹çš„æ‰©å±•</h3>
<p>å•èŠ‚ç‚¹Redis Pub/Subåœ¨ä¸­å°è§„æ¨¡åœºæ™¯ä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œä½†å½“ç”¨æˆ·é‡æ¿€å¢æˆ–éœ€è¦é«˜å¯ç”¨æ—¶ï¼Œåˆ†å¸ƒå¼éƒ¨ç½²å°±æˆäº†å¿…é€‰é¡¹ã€‚ç„¶è€Œï¼ŒRedis ClusteråŸç”Ÿä¸æ”¯æŒè·¨èŠ‚ç‚¹è®¢é˜…ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›â€œæ›²çº¿æ•‘å›½â€çš„æ–¹æ³•ã€‚</p>
<ol>
<li>
<p><strong>ä½¿ç”¨ä»£ç†ï¼ˆå¦‚Twemproxyï¼‰</strong><br/>
Twemproxyæ˜¯ä¸€ä¸ªè½»é‡çº§ä»£ç†ï¼Œå¯ä»¥å°†æ¶ˆæ¯åˆ†å‘åˆ°å¤šä¸ªRedisèŠ‚ç‚¹ã€‚æˆ‘åœ¨ä¸€ä¸ªå¤šç§Ÿæˆ·ç³»ç»Ÿä¸­éƒ¨ç½²äº†3ä¸ªRediså®ä¾‹ï¼Œé€šè¿‡Twemproxyç»Ÿä¸€ç®¡ç†è®¢é˜…å’Œå‘å¸ƒï¼ŒæˆåŠŸæ”¯æŒäº†10ä¸‡çº§åˆ«çš„é€šé“è®¢é˜…ã€‚</p>
<p><strong>æ¶æ„å›¾ï¼šTwemproxyåˆ†å‘</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å‘å¸ƒè€…]</span> --&gt; <span class="hljs-selector-attr">[Twemproxy]</span> --&gt; <span class="hljs-selector-attr">[Redis Node 1]</span>
                        --&gt; <span class="hljs-selector-attr">[Redis Node 2]</span>
                        --&gt; <span class="hljs-selector-attr">[Redis Node 3]</span>
</code></pre>
</li>
<li>
<p><strong>è‡ªå®šä¹‰åˆ†å‘é€»è¾‘</strong><br/>
å¦‚æœä»£ç†ä¸å¤Ÿçµæ´»ï¼Œå¯ä»¥åœ¨åº”ç”¨å±‚å®ç°åˆ†å‘ã€‚ä¾‹å¦‚ï¼Œåç«¯å°†æ¶ˆæ¯å‘å¸ƒåˆ°ä¸»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹é€šè¿‡è‡ªå®šä¹‰è„šæœ¬åŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œè®¢é˜…ç«¯åˆ†åˆ«è¿æ¥å„è‡ªçš„èŠ‚ç‚¹ã€‚è¿™ç§æ–¹å¼è™½ç„¶å¤æ‚ï¼Œä½†åœ¨éœ€è¦ç²¾ç»†æ§åˆ¶æ—¶æ›´å…·ä¼˜åŠ¿ã€‚</p>
</li>
<li>
<p><strong>ç»éªŒæ•™è®­</strong><br/>
åœ¨åˆ†å¸ƒå¼æ‰©å±•æ—¶ï¼Œè®°å¾—ç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡ã€‚æˆ‘æ›¾å› åˆ†ç‰‡ä¸å‡å¯¼è‡´æŸä¸ªèŠ‚ç‚¹è¿‡è½½ï¼Œé€šè¿‡è°ƒæ•´å“ˆå¸Œç®—æ³•æ‰æ¢å¤ç¨³å®šã€‚</p>
</li>
</ol>
<h3 data-id="heading-24">æ€§èƒ½ä¼˜åŒ–</h3>
<p>å³ä½¿åœ¨å•èŠ‚ç‚¹åœºæ™¯ä¸‹ï¼ŒPub/Subçš„æ€§èƒ½ä¹Ÿæœ‰æå‡ç©ºé—´ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå®ç”¨æŠ€å·§ï¼š</p>
<ol>
<li>
<p><strong>å‡å°‘é€šé“æ•°é‡</strong><br/>
è¿‡å¤šçš„é€šé“ä¼šå¢åŠ Redisçš„å†…å­˜å’ŒCPUå¼€é”€ã€‚ä¼˜å…ˆä½¿ç”¨æ¨¡å¼è®¢é˜…ï¼ˆå¦‚<code>order:*</code>ï¼‰ä»£æ›¿ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºç‹¬ç«‹é€šé“ã€‚åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å°†é€šé“æ•°ä»10ä¸‡å‡å°‘åˆ°100ä¸ªï¼Œå†…å­˜å ç”¨é™ä½äº†è¿‘50%ã€‚</p>
</li>
<li>
<p><strong>ç»“åˆLuaè„šæœ¬æ‰¹é‡å¤„ç†</strong><br/>
å¦‚æœéœ€è¦æ‰¹é‡å‘å¸ƒæ¶ˆæ¯ï¼Œå¯ä»¥ç”¨Luaè„šæœ¬å‡å°‘ç½‘ç»œå¾€è¿”ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">local</span> channels = ARGV
<span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(channels) <span class="hljs-keyword">do</span>
    redis.call(<span class="hljs-string">'PUBLISH'</span>, <span class="hljs-string">'order:'</span> .. i, msg)
<span class="hljs-keyword">end</span>
</code></pre>
<p>åœ¨Pythonä¸­è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-python" lang="python">script = r.register_script(lua_script)
script(args=[<span class="hljs-string">'Paid'</span>, <span class="hljs-string">'Shipped'</span>])  <span class="hljs-comment"># æ‰¹é‡å‘å¸ƒ</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ä¸è°ƒä¼˜</strong><br/>
ä½¿ç”¨<code>INFO</code>å‘½ä»¤ç›‘æ§Pub/Subçš„æ´»è·ƒè¿æ¥æ•°å’Œæ¶ˆæ¯ååé‡ï¼Œç»“åˆ<code>CONFIG SET</code>åŠ¨æ€è°ƒæ•´å‚æ•°ï¼ˆå¦‚<code>client-output-buffer-limit</code>ï¼‰ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹ä¸å´©ç›˜ã€‚</p>
</li>
</ol>
<h3 data-id="heading-25">å°ç»“</h3>
<p>é€šè¿‡ä¸WebSocketçš„é›†æˆï¼ŒRedis Pub/Subå¯ä»¥è½»æ¾æ‰©å±•åˆ°å‰ç«¯å®æ—¶åº”ç”¨ï¼›é€šè¿‡åˆ†å¸ƒå¼è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œå®ƒä¹Ÿèƒ½åº”å¯¹æ›´å¤§è§„æ¨¡çš„æŒ‘æˆ˜ã€‚è¿™äº›è¿›é˜¶åº”ç”¨å°±åƒç»™Pub/Subæ’ä¸Šäº†ç¿…è†€ï¼Œè®©å®ƒä»ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯å·¥å…·ï¼Œå˜æˆæ”¯æ’‘å¤æ‚ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ€»ç»“å…¨æ–‡ï¼Œå¹¶å±•æœ›å®ƒçš„æœªæ¥å‘å±•ã€‚</p>
<h2 data-id="heading-26">ä¸ƒã€æ€»ç»“ä¸å±•æœ›</h2>
<p>ç»è¿‡å‰é¢å…­ç« çš„æ¢ç´¢ï¼Œæˆ‘ä»¬ä»Redis Pub/Subçš„åŸºç¡€æ¦‚å¿µï¼Œåˆ°å®æˆ˜æ¡ˆä¾‹ï¼Œå†åˆ°æœ€ä½³å®è·µå’Œè¿›é˜¶åº”ç”¨ï¼Œå·²ç»å…¨é¢äº†è§£äº†è¿™ä¸€å·¥å…·çš„é­…åŠ›å’Œæ½œåŠ›ã€‚åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å°†å›é¡¾å®ƒçš„æ ¸å¿ƒä»·å€¼ï¼Œæ€»ç»“å®è·µä¸­çš„å…³é”®ç»éªŒï¼Œå¹¶å±•æœ›å®ƒåœ¨æœªæ¥æŠ€æœ¯ç”Ÿæ€ä¸­çš„å¯èƒ½æ€§ã€‚æ— è®ºä½ æ˜¯åˆæ¬¡å°è¯•è¿˜æ˜¯å·²æœ‰ç»éªŒï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« éƒ½èƒ½ä¸ºä½ æä¾›ä¸€äº›å¯å‘ã€‚</p>
<h3 data-id="heading-27">æ€»ç»“</h3>
<p>Redis Pub/Subçš„æ ¸å¿ƒä»·å€¼å¯ä»¥ç”¨ä¸‰ä¸ªè¯æ¦‚æ‹¬ï¼š<strong>ç®€å•ã€é«˜æ•ˆã€å®æ—¶</strong>ã€‚å®ƒä»¥æœ€è½»é‡çš„æ–¹å¼å®ç°äº†æ¶ˆæ¯çš„å‘å¸ƒä¸è®¢é˜…ï¼Œæ— éœ€å¤æ‚é…ç½®ï¼Œå‡ è¡Œä»£ç å°±èƒ½è®©æ¶ˆæ¯é£é€Ÿä¼ é€’ã€‚åœ¨ç”µå•†è®¢å•é€šçŸ¥ã€å®æ—¶åä½œå·¥å…·ç­‰åœºæ™¯ä¸­ï¼Œå®ƒçš„æ¯«ç§’çº§å»¶è¿Ÿå’Œçµæ´»æ€§è®©äººå°è±¡æ·±åˆ»ã€‚é€šè¿‡å®æˆ˜æ¡ˆä¾‹ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒå¦‚ä½•ä¸WebSocketæ— ç¼é›†æˆï¼Œæ„å»ºå‡ºç”¨æˆ·ä½“éªŒæä½³çš„å®æ—¶ç³»ç»Ÿï¼›è€Œæœ€ä½³å®è·µå’Œè¸©å‘ç»éªŒï¼Œåˆ™ä¸ºæˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­æä¾›äº†â€œé¿é›·æŒ‡å—â€ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å‡ æ¡å®è·µä¸­çš„å…³é”®å»ºè®®ï¼Œå€¼å¾—é“­è®°ï¼š</p>
<ul>
<li><strong>ç”¨å¥½é€šé“è®¾è®¡</strong>ï¼šæ¸…æ™°çš„å‘½åè§„èŒƒæ˜¯ç³»ç»Ÿå¯ç»´æŠ¤æ€§çš„åŸºçŸ³ã€‚</li>
<li><strong>å…³æ³¨å¼‚å¸¸å¤„ç†</strong>ï¼šè‡ªåŠ¨é‡è¿å’Œæ¶ˆæ¯å¤‡ä»½èƒ½è®©ç³»ç»Ÿæ›´å¥å£®ã€‚</li>
<li><strong>çµæ´»æ‰©å±•</strong>ï¼šç»“åˆRediså…¶ä»–åŠŸèƒ½ï¼ˆå¦‚Streamï¼‰æˆ–å¤–éƒ¨æŠ€æœ¯ï¼ˆå¦‚WebSocketï¼‰ï¼Œè®©Pub/Subé€‚åº”æ›´å¤šåœºæ™¯ã€‚</li>
<li><strong>æ€§èƒ½ä¸ºç‹</strong>ï¼šåœ¨é«˜è´Ÿè½½ä¸‹ï¼Œä¼˜åŒ–é€šé“æ•°é‡å’Œè¿æ¥ç®¡ç†è‡³å…³é‡è¦ã€‚</li>
</ul>
<p>è¿™äº›ç»éªŒä¸ä»…æ¥è‡ªæˆ‘çš„é¡¹ç›®å®è·µï¼Œä¹Ÿæ˜¯åœ¨æ— æ•°å¼€å‘è€…çš„åé¦ˆä¸­æç‚¼å‡ºçš„â€œé‡‘ç§‘ç‰å¾‹â€ã€‚æ— è®ºä½ æ˜¯å¿«é€ŸéªŒè¯ä¸€ä¸ªåŸå‹ï¼Œè¿˜æ˜¯ä¼˜åŒ–ä¸€ä¸ªç”Ÿäº§ç³»ç»Ÿï¼ŒRedis Pub/Subéƒ½èƒ½æˆä¸ºä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
<h3 data-id="heading-28">å±•æœ›</h3>
<p>Redisä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸€ç›´åœ¨ä¸æ–­è¿›åŒ–ï¼ŒPub/SubåŠŸèƒ½ä¹Ÿä¸ä¾‹å¤–ã€‚æœªæ¥ï¼Œæˆ‘ä»¬æˆ–è®¸ä¼šçœ‹åˆ°ä»¥ä¸‹å‘å±•è¶‹åŠ¿ï¼š</p>
<ol>
<li><strong>å¢å¼ºçš„åˆ†å¸ƒå¼æ”¯æŒ</strong>ï¼šå½“å‰Redis Clusterå¯¹Pub/Subçš„é™åˆ¶æ˜¯ä¸€ä¸ªç—›ç‚¹ã€‚æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šåŸç”Ÿæ”¯æŒè·¨èŠ‚ç‚¹è®¢é˜…ï¼Œè¿›ä¸€æ­¥æå‡å…¶åœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç«äº‰åŠ›ã€‚</li>
<li><strong>æ›´å¼ºå¤§çš„åŠŸèƒ½é›†æˆ</strong>ï¼šä¾‹å¦‚ï¼Œä¸Redis Streamæ·±åº¦èåˆï¼Œæä¾›æ—¢æœ‰å®æ—¶æ€§åˆæœ‰æŒä¹…åŒ–çš„æ¶ˆæ¯æœºåˆ¶ï¼Œè¿™å°†è®©å®ƒåœ¨æ›´å¤šåœºæ™¯ä¸­ä¸Kafkaç­‰é‡é‡çº§å¯¹æ‰‹ä¸€è¾ƒé«˜ä¸‹ã€‚</li>
<li><strong>ç”Ÿæ€èåˆ</strong>ï¼šéšç€å®æ—¶é€šä¿¡éœ€æ±‚çš„å¢é•¿ï¼ŒRedis Pub/Subå¯èƒ½ä¼šä¸gRPCã€Server-Sent Eventsï¼ˆSSEï¼‰ç­‰æŠ€æœ¯æ›´ç´§å¯†ç»“åˆï¼Œå½¢æˆæ›´å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<p>ä»ä¸ªäººä½¿ç”¨å¿ƒå¾—æ¥çœ‹ï¼ŒRedis Pub/Subå°±åƒä¸€ä¸ªâ€œä½è°ƒçš„è‹±é›„â€â€”â€”å®ƒæ²¡æœ‰å¤æ‚çš„å®£ä¼ ï¼Œå´æ€»èƒ½åœ¨å…³é”®æ—¶åˆ»è§£å†³é—®é¢˜ã€‚æˆ‘æ›¾åœ¨ç´§è¿«çš„é¡¹ç›®ä¸­ç”¨å®ƒå¿«é€Ÿæ­å»ºå®æ—¶é€šçŸ¥ï¼ŒæŒ½æ•‘äº†å›¢é˜Ÿçš„è¿›åº¦ï¼›ä¹Ÿæ›¾åœ¨ä¼˜åŒ–é˜¶æ®µé€šè¿‡æ¨¡å¼è®¢é˜…å’ŒLuaè„šæœ¬ï¼Œè®©ç³»ç»Ÿæ€§èƒ½ç¿»å€ã€‚è¿™ç§ç®€å•èƒŒåè•´å«çš„å¼ºå¤§ï¼Œæ˜¯å®ƒæœ€å¸å¼•æˆ‘çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-29">ç»“è¯­</h3>
<p>å®æ—¶æ¶ˆæ¯é€šä¿¡æ˜¯ç°ä»£åº”ç”¨çš„åŸºçŸ³ï¼Œè€ŒRedis Pub/Subä¸ºæˆ‘ä»¬æä¾›äº†ä¸€æ¡ç®€å•é«˜æ•ˆçš„å®ç°è·¯å¾„ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å¸Œæœ›ä½ ä¸ä»…æŒæ¡äº†å®ƒçš„æŠ€æœ¯ç»†èŠ‚ï¼Œè¿˜èƒ½æ„Ÿå—åˆ°å®ƒåœ¨å®è·µä¸­çš„çµæ´»ä¸æ½œåŠ›ã€‚æœªæ¥ï¼Œä¸å¦¨å¤šå°è¯•å°†å®ƒä¸ä½ çš„æŠ€æœ¯æ ˆç»“åˆï¼Œæˆ–è®¸ä¼šç¢°æ’å‡ºæ„æƒ³ä¸åˆ°çš„ç«èŠ±ã€‚å¥½äº†ï¼ŒRedis Pub/Subçš„æ—…ç¨‹åˆ°æ­¤å‘Šä¸€æ®µè½ï¼Œä½ å‡†å¤‡å¥½åœ¨ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸­ç”¨å®ƒå¤§å±•èº«æ‰‹äº†å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå…­ï¼‰å®æˆ˜ï¼šè§£æ”¾é¡µé¢å¼€å‘å‰çš„ç¹çå·¥ä½œ]]></title>    <link>https://juejin.cn/post/7585121055037358130</link>    <guid>https://juejin.cn/post/7585121055037358130</guid>    <pubDate>2025-12-19T06:59:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585121055037358130" data-draft-id="7585121055036964914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå…­ï¼‰å®æˆ˜ï¼šè§£æ”¾é¡µé¢å¼€å‘å‰çš„ç¹çå·¥ä½œ"/> <meta itemprop="keywords" content="æ¶æ„,Android"/> <meta itemprop="datePublished" content="2025-12-19T06:59:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TimeFine"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123802615"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆå…­ï¼‰å®æˆ˜ï¼šè§£æ”¾é¡µé¢å¼€å‘å‰çš„ç¹çå·¥ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123802615/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TimeFine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:59:54.000Z" title="Fri Dec 19 2025 06:59:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€èˆ¬å¼€å‘ä¸€ä¸ªæ–°é¡µé¢çš„å·¥ä½œæ˜¯è¿™æ ·çš„:</p>
<ul>
<li>æ–°å»ºActivity/Fragmentï¼Œé‡Œé¢ä¼šå„ç§ç»§æ‰¿å’Œé»˜è®¤å®ç°çš„å‡½æ•°ã€‚</li>
<li>æ–°å»ºViewModelï¼Œä¹Ÿæ˜¯ç»§æ‰¿å’ŒåŸºç¡€å®ç°ã€‚</li>
<li>å¦‚æœæœ‰RecyclerViewè¿˜è¦åˆ›å»ºAdapterã€‚</li>
</ul>
<p>å¤§éƒ¨åˆ†å¼€å‘è€…ä¼°è®¡éƒ½æ˜¯æ‹·è´ä¹‹å‰çš„æ–‡ä»¶ç„¶åæ”¹æ”¹å°±ç”¨äº†ï¼Œä½†æ˜¯æ‹·è´è¿™äº›æ–‡ä»¶æ˜¯ä¸æ˜¯å¾ˆç¹çï¼Ÿä»¥åè¿™äº›æ´»äº¤ç»™AIæ¥å¹²ã€‚é¦–å…ˆæ€è€ƒä¸€ä¸‹å¯èƒ½ç¢°åˆ°çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¯èƒ½ç¢°åˆ°çš„é—®é¢˜</h2>
<h3 data-id="heading-1">1ã€æ–‡ä»¶åçš„å®šä¹‰</h3>
<p>å¦‚æœè¦ç”ŸæˆActivityï¼ŒFragmentï¼ŒViewModelï¼ŒAdapterï¼ŒViewBindingç­‰ï¼Œæ–‡ä»¶åè¦æ€ä¹ˆå–ï¼Ÿ
ç­”æ¡ˆæ˜¯æŒ‰é¡¹ç›®çš„å‘½åè§„èŒƒå‘Šè¯‰AIå³å¯ï¼Œä¾‹å¦‚è¦åˆ›å»ºAboutActivityï¼Œå‘Šè¯‰AIå¯¹åº”çš„Fragmentåº”è¯¥æ˜¯AboutFragmentï¼ŒViewModelåº”è¯¥æ˜¯AboutViewModelï¼ŒAdapteråº”è¯¥æ˜¯AboutAdapterï¼ŒViewBdingåº”è¯¥æ˜¯ActivityAboutBindingï¼Œå¦‚æœæ˜¯XMLå¸ƒå±€æ–‡ä»¶æ¥å†™UIï¼Œå¸ƒå±€æ–‡ä»¶åº”è¯¥æ˜¯activity_aboutã€‚åœ¨skillä¸­æè¿°æ¸…æ¥šã€‚</p>
<h3 data-id="heading-2">2ã€æ–‡ä»¶æ”¾å“ªå„¿</h3>
<p>ä¸Šä¸€ç¯‡æœ‰è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è§ä¸Šç¯‡ã€‚</p>
<h2 data-id="heading-3">äºŒã€ç¼–è¾‘skill</h2>
<p>è¿˜æ˜¯è®©AIåªç»™å‡ºä»£ç ã€‚</p>
<p>éœ€è¦åœ¨skillä¸­æè¿°ç”Ÿæˆå“ªäº›æ–‡ä»¶ä»¥åŠæ¯ä¸ªæ–‡ä»¶åº”è¯¥å¦‚ä½•å‚è€ƒé¡¹ç›®çš„æ¨¡ç‰ˆä»£ç ç”Ÿæˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">---
name: new_page_dev
description: æ–°é¡µé¢å¼€å‘ç”ŸæˆActivityã€‚
---
## åˆ›å»ºActivityç­‰å¹¶ç»™å‡ºå¦‚ä¸‹è¦æ±‚çš„ä»£ç ï¼š

### <span class="hljs-number">1</span>ã€ä»£ç ä¸€ï¼šåˆ›å»ºå¯¹åº”çš„Activity
å¯ä»¥å‚è€ƒ`MyOrdersActivity`è¿™ä¸ªActivityã€‚

å¸ƒå±€æ–‡ä»¶çš„BindingæŒ‰è§„åˆ™:ä¾‹å¦‚AActivity, é‚£ä¹ˆviewbindingå°±æ˜¯ActivityABindingï¼Œæˆ‘ä¼šåœ¨åç»­è¡¥å……è¿™ä¸ªå¸ƒå±€æ–‡ä»¶ã€‚

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyOrdersActivity</span> : <span class="hljs-type">BaseVBActivity</span>&lt;<span class="hljs-type">ActivityMyOrdersListBinding</span>&gt;() {

    <span class="hljs-comment">//æ¶‰åŠå…·ä½“é¡¹ç›®ä»£ç ï¼Œç•¥ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®æ¨¡ç‰ˆä»£ç ç¼–è¾‘</span>

}
è¯·å‚ç…§ä¸Šé¢çš„æ¨¡ç‰ˆä»£ç ç»™å‡ºã€‚

ç»™å‡ºAndroidManifestæ¸…å•æ–‡ä»¶æ³¨å†Œçš„ä»£ç ã€‚

### <span class="hljs-number">2</span>ã€ä»£ç äºŒï¼šç»™å‡ºViewModelçš„ä»£ç 
ViewModelçš„å‘½åè§„åˆ™å¦‚æœæ˜¯AActivity,é‚£ä¹ˆViewModelå°±æ˜¯AViewModelã€‚

AViewModelçš„åˆ›å»ºå¯å‚è€ƒçš„ä»£ç ä¸ºï¼š
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AlertDetailsViewModel</span>(savedStateHandle: SavedStateHandle) : BaseViewModel() {

    <span class="hljs-comment">//æ¶‰åŠå…·ä½“é¡¹ç›®ä»£ç ï¼Œç•¥ï¼Œæ ¹æ®è‡ªå·±çš„é¡¹ç›®æ¨¡ç‰ˆä»£ç ç¼–è¾‘</span>
    
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {

    }
}

### <span class="hljs-number">3</span>ã€ä»£ç ä¸‰ï¼šç»™å‡ºAdapterçš„ä»£ç 

Adapterçš„å‘½åè§„åˆ™åŒä¸Šã€‚

å¯å‚è€ƒçš„Adapterçš„ä»£ç ï¼š

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyOrdersListAdapter</span> : <span class="hljs-type">BaseQuickAdapter</span>&lt;<span class="hljs-type">PlanDetails, QuickViewHolder</span>&gt;() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">QuickViewHolder</span>, position: <span class="hljs-type">Int</span>, item: <span class="hljs-type">PlanDetails</span>?)</span></span> {
        <span class="hljs-keyword">val</span> binding = ItemMyOrdersInfoBinding.bind(holder.itemView)
        item?.apply {
        	<span class="hljs-comment">//TODO</span>
            }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: QuickViewHolder {
        <span class="hljs-keyword">return</span> QuickViewHolder(R.layout.item_my_orders_info, parent)
    }
}

</code></pre>
<p>æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µç¼–è¾‘ä¸Šé¢çš„skillã€‚</p>
<p>åœ¨Codex Cliä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">æ–°é¡µé¢å¼€å‘ç”ŸæˆAboutActivity
</code></pre>
<p>ä¸‹é¢æ˜¯AIç”Ÿæˆçš„ç»“æœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"> Using skill new_page_dev to generate the Activity/ViewModel/Adapter skeletons.

  <span class="hljs-comment">//...ç•¥...</span>

  <span class="hljs-keyword">class</span> <span class="hljs-title class_">AboutActivity</span> : <span class="hljs-type">BaseVBActivity</span>&lt;<span class="hljs-type">ActivityAboutBinding</span>&gt;() {

      <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> viewModel <span class="hljs-keyword">by</span> viewModels&lt;AboutViewModel&gt;()
      <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> mAdapter = AboutAdapter()
      <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mDataList = mutableListOf&lt;Any&gt;()

      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createViewBinding</span><span class="hljs-params">(inflater: <span class="hljs-type">LayoutInflater</span>)</span></span>: ActivityAboutBinding {
          <span class="hljs-keyword">return</span> ActivityAboutBinding.inflate(inflater)
      }

      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">init</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
          multiStateContainer = MultiStatePage.bindMultiState(binding.rlContainer)
          initAdapter()
          requestData(<span class="hljs-literal">true</span>)
      }

      <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initAdapter</span><span class="hljs-params">()</span></span> {
          binding.rcy.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
          binding.rcy.adapter = mAdapter
          binding.refreshLayout.setEnableFooterFollowWhenNoMoreData(<span class="hljs-literal">true</span>)
      }

      <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"NotifyDataSetChanged"</span>)</span>
      <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">requestData</span><span class="hljs-params">(isShowLoading: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">false</span>)</span></span> {
          <span class="hljs-keyword">if</span> (isShowLoading) {
              multiStateContainer.showLoading()
          }
          <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> request data and update mDataList / adapter</span>
      }

      <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">()</span></span> {
          multiStateContainer.showErrorCustom {
              requestData(<span class="hljs-literal">true</span>)
          }
      }

      <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showEmpty</span><span class="hljs-params">()</span></span> {
          multiStateContainer.showEmptyCustom()
      }

      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createObserver</span><span class="hljs-params">()</span></span> {

      }
  }

  <span class="hljs-comment">//...ç•¥...</span>

  <span class="hljs-keyword">class</span> <span class="hljs-title class_">AboutViewModel</span>(savedStateHandle: SavedStateHandle) : BaseViewModel() {

      <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {

      }
  }

  <span class="hljs-comment">//...ç•¥...</span>

  <span class="hljs-keyword">class</span> <span class="hljs-title class_">AboutAdapter</span> : <span class="hljs-type">BaseQuickAdapter</span>&lt;<span class="hljs-type">Any, QuickViewHolder</span>&gt;() {

      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">QuickViewHolder</span>, position: <span class="hljs-type">Int</span>, item: <span class="hljs-type">Any</span>?)</span></span> {
          <span class="hljs-keyword">val</span> binding = ItemAboutBinding.bind(holder.itemView)
          item?.apply {
              <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> bind item</span>
          }
      }

      <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: QuickViewHolder {
          <span class="hljs-keyword">return</span> QuickViewHolder(R.layout.item_about, parent)
      }
  }

  Confirm the target <span class="hljs-keyword">package</span> and whether <span class="hljs-keyword">this</span> page <span class="hljs-keyword">is</span> list-based (RecyclerView). If not, I can simplify the Activity and remove the adapter scaffold.
</code></pre>
<p>ä»£ç å®Œå…¨å¯ç”¨ï¼Œå¼€å¯å†™çš„æƒé™ï¼Œå¤åˆ¶ç²˜è´´éƒ½çœäº†ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€æ€»ç»“</h2>
<p>å®æˆ˜çš„ä¸‰ç¯‡åˆ†åˆ«è§£å†³äº†ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ï¼›</li>
<li>é€šè¿‡Figma MCPåŠ skillç”ŸæˆUIï¼›</li>
<li>é€šè¿‡ApifoxåŠ skillç”Ÿæˆæ¥å£æ•°æ®ï¼›</li>
</ul>
<p>ä½œä¸ºå¼€å‘è€…ï¼š</p>
<ul>
<li>åŸºæœ¬ä¸ç”¨å†™UIäº†ï¼›</li>
<li>ä¸ç”¨å†™æ¥å£æ¥å…¥é‚£ä¸€å¥—æµç¨‹äº†ï¼›</li>
<li>ä¸ç”¨æ“ä½œåˆ›å»ºä¸€å †æ–‡ä»¶é‚£ä¸€å¥—æµç¨‹äº†ï¼›</li>
</ul>
<p>é‡å¿ƒåªéœ€è¦æ”¾åœ¨éœ€æ±‚å’Œæ•°æ®å¯¹æ¥çš„ä»£ç å³å¯ï¼Œæå¤§çš„è§£æ”¾äº†ç”ŸæˆåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹å‰ªææ–°èŒƒå¼ï¼šå…ˆæµ“ç¼©ï¼Œå†å‰ªæâ€”â€”DenoiseRotatoræŠ€æœ¯è§£è¯»]]></title>    <link>https://juejin.cn/post/7585146584893227058</link>    <guid>https://juejin.cn/post/7585146584893227058</guid>    <pubDate>2025-12-19T06:56:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585146584893227058" data-draft-id="7585180775704789019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹å‰ªææ–°èŒƒå¼ï¼šå…ˆæµ“ç¼©ï¼Œå†å‰ªæâ€”â€”DenoiseRotatoræŠ€æœ¯è§£è¯»"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-19T06:56:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3509296845313741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹å‰ªææ–°èŒƒå¼ï¼šå…ˆæµ“ç¼©ï¼Œå†å‰ªæâ€”â€”DenoiseRotatoræŠ€æœ¯è§£è¯»
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47ccb42d726640a7889ba1e64ae203e6~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6930512966122995712/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-12-19T06:56:51.000Z" title="Fri Dec 19 2025 06:56:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-12-19
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»8åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              ç¾å›¢å°ç¼– @ç¾å›¢
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li><strong>è®ºæ–‡åŸæ–‡</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2505.23049" target="_blank" title="https://arxiv.org/abs/2505.23049" ref="nofollow noopener noreferrer">arxiv.org/abs/2505.23â€¦</a></li>
<li><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAxel-gu%2FDenoiseRotator" target="_blank" title="https://github.com/Axel-gu/DenoiseRotator" ref="nofollow noopener noreferrer">github.com/Axel-gu/Denâ€¦</a></li>
<li><strong>è§†é¢‘è§£è¯»ï¼ˆBç«™ï¼‰</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1XDUYBTEjr" target="_blank" title="https://www.bilibili.com/video/BV1XDUYBTEjr" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1XDâ€¦</a></li>
</ul>
<p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œåºå¤§çš„å‚æ•°è§„æ¨¡å¸¦æ¥é«˜æ˜‚çš„æ¨ç†å­˜å‚¨æˆæœ¬å’Œå›å¤æ—¶å»¶ï¼Œå·²æˆä¸ºå®é™…åº”ç”¨ä¸­çš„å…³é”®æŒ‘æˆ˜ã€‚ç‰¹åˆ«æ˜¯åœ¨é¢å‘äººæœºå¯¹è¯çš„åº”ç”¨åœºæ™¯ï¼Œæ¨¡å‹æ¨ç†æ•ˆç‡ç›´æ¥å½±å“åˆ°å¯¹è¯ä½“éªŒã€‚åœ¨æ¨ç†ä¼˜åŒ–æ–¹æ³•ä¸­ï¼Œå‚æ•°å‰ªæä½œä¸ºä¸€é¡¹ç»å…¸çš„æ¨¡å‹å‹ç¼©æŠ€æœ¯ï¼Œæ—¨åœ¨é€šè¿‡å‰”é™¤æ¨¡å‹ä¸­â€œä¸é‡è¦â€çš„æƒé‡æ¥å®ç°å‚æ•°é‡çš„æ˜¾è‘—é™ä½ä¸è®¡ç®—æ•ˆç‡çš„æå‡ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„â€œå‰ªæ-å¾®è°ƒâ€èŒƒå¼æˆ–ç›´æ¥çš„åè®­ç»ƒå‰ªææ–¹æ³•ï¼Œå¾€å¾€å¸¦æ¥æ˜æ˜¾çš„æ¨¡å‹æ€§èƒ½æŸå¤±ï¼Œç‰¹åˆ«æ˜¯åœ¨ç¡¬ä»¶å‹å¥½çš„åŠç»“æ„åŒ–ç¨€ç–ï¼ˆå¦‚2:4ç¨€ç–ï¼‰åœºæ™¯ä¸‹ï¼Œè¯¥é—®é¢˜å°¤ä¸ºçªå‡ºã€‚è¿™ä½¿å¾—åº”ç”¨ä¸­çš„æ¨¡å‹æ•ˆæœå’Œæ¨ç†æ•ˆç‡ï¼Œå‘ˆç°ä¸€ä¸ªâ€œé±¼å’Œç†ŠæŒâ€çš„ä¸¤éš¾å±€é¢ã€‚</p>
<p>é¢å¯¹è¿™é¡¹æŒ‘æˆ˜ï¼Œç¾å›¢LongCat Interactionå›¢é˜Ÿè”åˆä¸Šæµ·äº¤é€šå¤§å­¦å¬è§‰è®¤çŸ¥ä¸è®¡ç®—å£°å­¦å®éªŒå®¤ï¼Œä»¥åŠé¦™æ¸¯ç§‘æŠ€å¤§å­¦çš„ç ”ç©¶è€…ï¼Œå…±åŒå®Œæˆäº†å¤§æ¨¡å‹å‰ªææ–¹æ³•çš„åˆ›æ–°ç ”ç©¶ï¼Œæå‡ºäº†åä¸ºDenoiseRotatorçš„æ–°æŠ€æœ¯ã€‚é€šè¿‡é¦–å…ˆå¯¹å‚æ•°çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œâ€œæµ“ç¼©â€å¯¹ç»“æœæœ‰å½±å“åŠ›çš„å‚æ•°ï¼Œå†å¯¹é‡è¦æ€§æœ€ä½çš„å‚æ•°è¿›è¡Œå‰ªæï¼Œå®ç°äº†å¤§æ¨¡å‹å‰ªæçš„æ–°èŒƒå¼ã€‚DenoiseRotatorèƒ½å¤Ÿä¸ç°æœ‰çš„å‰ªæç®—æ³•å¿«é€Ÿé›†æˆï¼Œæœ‰æ•ˆç¼“è§£æ¨¡å‹å‹ç¼©å¸¦æ¥çš„æ€§èƒ½æŸå¤±ã€‚è¿™ä¸€ç ”ç©¶æˆæœå·²åœ¨2025å¹´çš„NeurIPSä¼šè®®ä¸Šå‘è¡¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b91b2dc1e1aa411dbfcae0d26a45f0cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=lieXWZCmArrcTVemLx%2FpmOmC4CA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 åŠ¨æœºï¼šä¼ ç»Ÿå‰ªæçš„å±€é™æ€§â€”â€”å¯†é›†è®­ç»ƒä¸ç¨€ç–æ¨ç†çš„éšå¼å†²çª</h2>
<p>ä¼ ç»Ÿåè®­ç»ƒå‰ªæçš„ä¸€èˆ¬æµç¨‹å¯æ¦‚æ‹¬ä¸ºï¼šå¯¹ä¸€ä¸ªå·²è®­ç»ƒå¥½çš„<strong>ç¨ å¯†æ¨¡å‹</strong>ï¼ŒåŸºäºæŸç§å¯å‘å¼å‡†åˆ™ï¼ˆå¦‚æƒé‡å¹…å€¼æˆ–Wandaã€SparseGPTç­‰ç®—æ³•ï¼‰ä¸ºæ¯ä¸ªå‚æ•°èµ‹äºˆâ€œé‡è¦æ€§åˆ†æ•°â€ï¼Œéšåæ ¹æ®é¢„è®¾çš„ç¨€ç–åº¦é˜ˆå€¼ï¼Œç§»é™¤åˆ†æ•°è¾ƒä½çš„ä¸€éƒ¨åˆ†æƒé‡ã€‚ å°½ç®¡æµç¨‹æ¸…æ™°ï¼Œè¯¥æ–¹æ³•å­˜åœ¨ä¸€ä¸ªæœ¬è´¨å±€é™ï¼šå…¶æ•´ä¸ªå‰ªæè¿‡ç¨‹å»ºç«‹åœ¨<strong>å›ºå®šä¸å˜çš„å‚æ•°ç©ºé—´</strong>ä¸Šï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§<strong>è¢«åŠ¨çš„ç­›é€‰æœºåˆ¶</strong>ã€‚è¿™è¿›ä¸€æ­¥å‡¸æ˜¾äº†ä»¥ä¸‹æ·±å±‚å†²çªï¼š</p>
<ul>
<li>
<p><strong>å¯†é›†è®­ç»ƒ</strong>çš„æœ¬è´¨æ˜¯éšå¼åœ°æ¿€åŠ±æ¨¡å‹<strong>å……åˆ†åˆ©ç”¨æ¯ä¸€ä¸ªå‚æ•°</strong>ã€‚æ¯ä¸ªå‚æ•°éƒ½æ‰¿è½½äº†ä¸€å®šçš„çŸ¥è¯†æˆ–æ¨ç†èƒ½åŠ›ï¼Œå¹¶é€šè¿‡å‚æ•°é—´çš„ååŒå·¥ä½œå…±åŒæ”¯æ’‘æ¨¡å‹çš„æ•´ä½“è¡¨è¾¾èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>ç¨€ç–æ¨ç†</strong>åˆ™è¦æ±‚æ¨¡å‹ä»…åŸºäº<strong>è¢«ä¿ç•™çš„éƒ¨åˆ†å‚æ•°</strong>å®Œæˆæ¨ç†ä»»åŠ¡ï¼Œå¹¶ä¿æŒé«˜æ€§èƒ½ã€‚</p>
</li>
</ul>
<p>è¿™ç§è®­ç»ƒç›®æ ‡ä¸æ¨ç†æœºåˆ¶ä¹‹é—´çš„å†…åœ¨ä¸ä¸€è‡´ï¼Œæ„å‘³ç€<strong>ç›´æ¥è£å‰ªå¿…ç„¶ä¼šå¯¼è‡´éƒ¨åˆ†çŸ¥è¯†æˆ–æ¨ç†èƒ½åŠ›çš„ä¸¢å¤±</strong>ï¼Œä»è€Œç ´ååŸæœ‰å‚æ•°é—´ååŒå·¥ä½œçš„å¹³è¡¡ï¼Œå¼•å‘æ€§èƒ½ä¸‹é™ã€‚</p>
<h2 data-id="heading-1">02 æŠ€æœ¯æ–¹æ¡ˆï¼šDenoiseRotatorâ€”â€”ä»â€œè¢«åŠ¨ç­›é€‰â€åˆ°â€œä¸»åŠ¨ä¼˜åŒ–â€çš„èŒƒå¼è½¬å˜</h2>
<p>é’ˆå¯¹ä¸Šè¿°æŒ‘æˆ˜ï¼Œæˆ‘ä»¬é‡æ–°æ€è€ƒå‰ªæèŒƒå¼ï¼šèƒ½å¦åœ¨å‰ªæå‰å…ˆå¯¹æ¨¡å‹è¿›è¡Œ<strong>ç¨€ç–æ€§å¼•å¯¼çš„ä¼˜åŒ–</strong>ï¼Œä½¿å…¶<strong>è‡ªèº«ç»“æ„æ›´æ˜“äºè¢«å‰ªæ</strong>ï¼Ÿ åŸºäºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†â€œ<strong>é‡è¦æ€§æµ“ç¼©</strong>â€çš„å…¨æ–°æ€è·¯ï¼Œå¹¶å¼€å‘äº†DenoiseRotatoræ¡†æ¶äºˆä»¥å®ç°ã€‚</p>
<h3 data-id="heading-2">2.1 æ ¸å¿ƒæ€æƒ³ï¼šé‡è¦æ€§æµ“ç¼©</h3>
<p>æˆ‘ä»¬çš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨æ‰§è¡Œå‰ªæ<strong>ä¹‹å‰</strong>ï¼Œå°†åŸæœ¬åˆ†æ•£åœ¨ä¼—å¤šå‚æ•°ä¸Šçš„é‡è¦æ€§ï¼Œå°½å¯èƒ½åœ°<strong>é›†ä¸­åˆ°ä¸€ä¸ªè¾ƒå°çš„å‚æ•°å­é›†ä¸­</strong>ã€‚è¿™æ ·ï¼Œåœ¨åç»­å‰ªæè¿‡ç¨‹ä¸­ï¼Œè¢«ç§»é™¤æƒé‡æ‰€åŒ…å«çš„å…³é”®ä¿¡æ¯å°†å¤§å¹…å‡å°‘ï¼Œä»è€Œæ˜¾è‘—å¢å¼ºå‰ªæçš„é²æ£’æ€§ã€‚
ä¸ºé‡åŒ–å¹¶ä¼˜åŒ–â€œæµ“ç¼©â€æ•ˆæœï¼Œæˆ‘ä»¬å¼•å…¥äº†<strong>ä¿¡æ¯ç†µ</strong>ä½œä¸ºè¡¡é‡æŒ‡æ ‡ã€‚é€šè¿‡å°†å‚æ•°é‡è¦æ€§åˆ†æ•°å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œå…¶ç†µå€¼ç›´æ¥åæ˜ äº†é‡è¦æ€§çš„é›†ä¸­ç¨‹åº¦ï¼šç†µè¶Šä½ï¼Œè¡¨æ˜é‡è¦æ€§è¶Šé›†ä¸­äºå°‘æ•°å‚æ•°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡æ˜ç¡®ä¸º<strong>æœ€å°åŒ–å½’ä¸€åŒ–é‡è¦æ€§åˆ†å¸ƒçš„ç†µ</strong>ã€‚</p>
<h3 data-id="heading-3">2.2 å®ç°æœºåˆ¶ï¼šå¯å­¦ä¹ çš„æ­£äº¤å˜æ¢</h3>
<p>DenoiseRotatoré€šè¿‡å‘Transformerå±‚ä¸­å¼•å…¥<strong>å¯å­¦ä¹ çš„æ­£äº¤çŸ©é˜µ</strong>ï¼Œå®ç°é‡è¦æ€§åˆ†å¸ƒçš„ç†µå‡ä¸æµ“ç¼©ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb9463c47d54e74942d4adef1c145ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=ljmlTwCileaxJMGWJcMz421JodI%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨Transformerå±‚çš„ç‰¹å®šä½ç½®ï¼ˆä¾‹å¦‚Attentionæ¨¡å—çš„Valueå’ŒOutputæŠ•å½±å±‚å‰åï¼‰æ’å…¥æ­£äº¤çŸ©é˜µã€‚è¿™äº›çŸ©é˜µå¯¹åŸå§‹æƒé‡è¿›è¡Œâ€œæ—‹è½¬â€å˜æ¢ï¼Œåœ¨<strong>ä¿æŒæ¨¡å‹è¾“å‡ºå®Œå…¨ä¸å˜</strong>ï¼ˆå¾—ç›Šäºæ­£äº¤å˜æ¢çš„è®¡ç®—ä¸å˜æ€§ï¼‰çš„å‰æä¸‹ï¼Œé‡æ–°åˆ†é…å‚æ•°çš„é‡è¦æ€§ã€‚</p>
<h3 data-id="heading-4">2.3 å…³é”®ä¼˜åŠ¿</h3>
<p><strong>è®­ç»ƒä¸å‰ªæè§£è€¦</strong>ï¼šDenoiseRotatoré‡‡ç”¨<strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼Œæ­£äº¤çŸ©é˜µçš„ä¼˜åŒ–ä¸å…·ä½“å‰ªææ–¹æ³•å®Œå…¨ç‹¬ç«‹ã€‚æˆ‘ä»¬é¦–å…ˆåˆ©ç”¨æ ¡å‡†æ•°æ®ï¼Œä»¥æœ€å°åŒ–é‡è¦æ€§ç†µä¸ºç›®æ ‡è®­ç»ƒè¿™äº›æ­£äº¤çŸ©é˜µï¼›è®­ç»ƒå®Œæˆåï¼Œå°†å…¶åˆå¹¶å›åŸå§‹æƒé‡ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªâ€œæ˜“äºå‰ªæâ€çš„ä¼˜åŒ–ç‰ˆç¨ å¯†æ¨¡å‹ï¼Œå¯<strong>æ— ç¼å¯¹æ¥</strong>ä»»ä½•ç°æœ‰å‰ªæå·¥å…·ï¼ˆå¦‚SparseGPTã€Wandaï¼‰è¿›è¡Œåç»­æ“ä½œã€‚</p>
<p><strong>ä¼˜åŒ–è¿‡ç¨‹ç¨³å®š</strong>ï¼šæ­£äº¤å˜æ¢å…·æœ‰ä¿èŒƒæ•°ç‰¹æ€§ï¼Œç¡®ä¿åœ¨é‡æ–°åˆ†å¸ƒé‡è¦æ€§æ—¶ï¼Œæ—¢ä¸ä¼šäººä¸ºå¼•å…¥ä¹Ÿä¸ä¼šä¸¢å¤±æ€»é‡è¦æ€§é‡ï¼Œä»è€Œä¿è¯äº†ä¼˜åŒ–è¿‡ç¨‹çš„ç¨³å®šæ€§ï¼Œä¸å½±å“åŸå§‹æ¨¡å‹æ€§èƒ½ã€‚</p>
<p>ä¸‹å›¾ç›´è§‚å±•ç¤ºäº†DenoiseRotatorçš„æœ‰æ•ˆæ€§ã€‚ä»¥LLaMA-3-8Bæ¨¡å‹é¦–å±‚è¾“å‡ºæŠ•å½±å±‚ä¸ºä¾‹ï¼Œç»æˆ‘ä»¬çš„æ–¹æ³•å˜æ¢åï¼Œå‚æ•°é‡è¦æ€§åˆ†å¸ƒä»åˆ†æ•£è¶‹äºé«˜åº¦é›†ä¸­ï¼Œä¸ºåç»­å‰ªæå¥ å®šäº†åšå®åŸºç¡€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36202f4e0be44471acc2a15f0461c2c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=Au9vNGYAjsXRuQH6DmswmSi548I%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">03 å®éªŒéªŒè¯</h2>
<p>åœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†DenoiseRotatorçš„æ ¸å¿ƒæ€æƒ³â€”â€”é€šè¿‡é‡è¦æ€§æµ“ç¼©æå‡å‰ªæé²æ£’æ€§ã€‚é‚£ä¹ˆï¼Œè¿™ä¸€æ–¹æ³•åœ¨å®é™…æ•ˆæœä¸Šè¡¨ç°å¦‚ä½•ï¼Ÿæˆ‘ä»¬é’ˆå¯¹å¤šä¸ªä¸»æµå¼€æºå¤§æ¨¡å‹è¿›è¡Œäº†å…¨é¢è¯„æµ‹ï¼Œæ¶µç›–è¯­è¨€å»ºæ¨¡å’Œé›¶æ ·æœ¬æ¨ç†ä»»åŠ¡ï¼Œå¹¶ä¸ç°æœ‰å‰ªææ–¹æ³•è¿›è¡Œäº†å¯¹æ¯”ã€‚</p>
<h3 data-id="heading-6">3.1 å®éªŒè®¾ç½®ï¼šè¦†ç›–å¤šæ¨¡å‹ã€å¤šä»»åŠ¡ã€å¤šå‰ªææ–¹æ³•</h3>
<p>ä¸ºå…¨é¢è¯„ä¼°DenoiseRotatorçš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬åœ¨å¤šæ ·åŒ–çš„å®éªŒè®¾ç½®ä¸‹è¿›è¡Œäº†ç³»ç»Ÿæ€§éªŒè¯ã€‚å®éªŒè¦†ç›–äº†ä»Mistral-7Bã€LLaMA3ï¼ˆ8B/70Bï¼‰åˆ°Qwen2.5ï¼ˆ7B/14B/32B/72Bï¼‰ç­‰å¤šä¸ªä¸»æµå¼€æºå¤§æ¨¡å‹ï¼Œè¯„æµ‹ä»»åŠ¡åŒ…æ‹¬è¯­è¨€å»ºæ¨¡ï¼ˆä½¿ç”¨WikiText-2éªŒè¯é›†çš„å›°æƒ‘åº¦PPLä½œä¸ºæŒ‡æ ‡ï¼‰å’Œé›¶æ ·æœ¬æ¨ç†ï¼ˆåœ¨PIQAã€WinoGrandeã€HellaSwagã€ARC-eå’ŒARC-cäº”ä¸ªåŸºå‡†ä»»åŠ¡ä¸Šè¯„ä¼°å¹³å‡å‡†ç¡®ç‡ï¼‰ã€‚åœ¨åŸºçº¿æ–¹æ³•æ–¹é¢ï¼Œæˆ‘ä»¬å°†DenoiseRotatorä¸ä¸‰ç±»å‰ªææ–¹æ³•ç»“åˆï¼šç»å…¸æ–¹æ³•Magnitudeï¼Œä»¥åŠå…ˆè¿›æ–¹æ³•Wandaå’ŒSparseGPTï¼Œå¹¶åœ¨éç»“æ„åŒ–ï¼ˆ50%ç¨€ç–ï¼‰å’ŒåŠç»“æ„åŒ–ï¼ˆ2:4ç¨€ç–ï¼‰ä¸¤ç§ç¨€ç–æ¨¡å¼ä¸‹è¿›è¡Œå¯¹æ¯”è¯„æµ‹ã€‚</p>
<h3 data-id="heading-7">3.2 ä¸»è¦ç»“æœï¼šè¯­è¨€å»ºæ¨¡ä¸é›¶æ ·æœ¬æ¨ç†å…¨é¢æå‡</h3>
<p>ä¸‹è¡¨å±•ç¤ºäº†ä¸åŒæ¨¡å‹åœ¨å‰ªæå‰åçš„å›°æƒ‘åº¦ï¼ˆè¡¡é‡è¯­è¨€å»ºæ¨¡èƒ½åŠ›ï¼‰ä¸é›¶æ ·æœ¬ä»»åŠ¡è¡¨ç°ã€‚DenoiseRotatoråœ¨æ‰€æœ‰æ¨¡å‹å’Œç¨€ç–æ¨¡å¼ä¸‹å‡æ˜¾è‘—é™ä½å‰ªæé€ æˆçš„æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶åœ¨2:4ç¨€ç–ä¸‹æå‡æ›´ä¸ºæ˜æ˜¾ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e91cbdb7638483199596ac88a9633d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=J4xYXAy0VZeDskvzb8XKHnN%2B9zI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/357027cba0454f68a8e2178cb2668d9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=xt5aJfrGHIXdke3IUUfwvCJFXQk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.3 æ·±å…¥åˆ†æï¼šç†µå‡å¦‚ä½•é©±åŠ¨å‰ªæé²æ£’æ€§ï¼Ÿ</h3>
<p>æˆ‘ä»¬é€šè¿‡æ¶ˆèå®éªŒéªŒè¯äº†<strong>é‡è¦æ€§ç†µä¸å‰ªææ•ˆæœçš„ç›´æ¥å…³è”</strong>ã€‚ä»¥LLaMA3-8Bä¸ºä¾‹ï¼Œè®°å½•ä¸åŒè®­ç»ƒæ­¥æ•°ä¸‹çš„ç†µå€¼å˜åŒ–ä¸æ¨¡å‹æ€§èƒ½ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/941bcd8bcd624ca99cae8f04295f4cad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=qhEQ%2BEtKk6HDyGsSmehJGScFhfo%3D" alt="" loading="lazy"/></p>
<p>ç†µå‡å°‘13%ï¼ˆæ­¥æ•°100ï¼‰å³å¯å¸¦æ¥é›¶æ ·æœ¬ä»»åŠ¡å‡†ç¡®ç‡æå‡3.66%ï¼ˆ66.88%â¡70.54%ï¼‰ï¼Œå›°æƒ‘åº¦é™ä½19.5%ï¼ˆ9.567â¡7.701ï¼‰ã€‚è¿›ä¸€æ­¥ä¼˜åŒ–å¯ç»§ç»­é™ä½å›°æƒ‘åº¦ï¼ŒéªŒè¯äº†<strong>é‡è¦æ€§é›†ä¸­åº¦ä¸å‰ªæé²æ£’æ€§çš„æ­£ç›¸å…³</strong>ã€‚</p>
<h3 data-id="heading-9">3.4 éƒ¨ç½²æ•ˆç‡ï¼šè½»é‡å¼€é”€ï¼Œæ˜¾è‘—æ”¶ç›Š</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa069cad1f6e45c6a0a65c8593b0b4f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=n3U3TmFOWicJyNR4HFOD7HorWyQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>å‚æ•°å¢é‡</strong>ï¼šæ¯å±‚æ–°å¢ä¸€ä¸ªï¼ˆhidden_size,hidden_sizeï¼‰æ­£äº¤çŸ©é˜µã€‚ä»¥LLaMA3-8Bä¸ºä¾‹ï¼Œæ€»å‚æ•°é‡å¢åŠ çº¦0.5Bï¼ˆå åŸæ¨¡å‹6.7%ï¼‰ã€‚é€šè¿‡åˆ†å—å¯¹è§’çŸ©é˜µï¼ˆè§è®ºæ–‡é™„å½•ï¼‰å¯è¿›ä¸€æ­¥é™ä½å¼€é”€ï¼Œé€‚åˆèµ„æºå—é™åœºæ™¯ã€‚</p>
</li>
<li>
<p><strong>æ¨ç†è€—æ—¶</strong>ï¼šå•å±‚Transformerçš„2:4ç¨€ç–è®¡ç®—è€—æ—¶4.37msï¼ŒåŠ å…¥æ­£äº¤çŸ©é˜µåä»…å¢åŠ 0.32msï¼ˆ1.24Ã—åŠ é€Ÿæ¯” vs ç¨ å¯†å±‚ï¼‰ã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">04 æ€»ç»“</h2>
<p>DenoiseRotatoræå‡ºäº†ä¸€ç§åˆ›æ–°çš„å‰ªæè§†è§’ï¼š<strong>å°†æ¨¡å‹å‡†å¤‡ï¼ˆé‡è¦æ€§æµ“ç¼©ï¼‰ä¸æ¨¡å‹å‹ç¼©ï¼ˆå‰ªæï¼‰ä¸¤ä¸ªé˜¶æ®µè§£è€¦</strong>ã€‚é€šè¿‡å¯å­¦ä¹ çš„æ­£äº¤å˜æ¢ï¼Œä¸»åŠ¨å®ç°å‚æ•°é‡è¦æ€§çš„æµ“ç¼©ï¼Œä»è€Œæ˜¾è‘—æå‡åç»­å‰ªæçš„é²æ£’æ€§ã€‚è¯¥æ–¹æ³•å…·å¤‡<strong>å³æ’å³ç”¨</strong>çš„ç‰¹æ€§ï¼Œä¸ºå¤§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„é«˜æ•ˆã€é«˜æ€§èƒ½å‹ç¼©æä¾›äº†æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAxel-gu%2FDenoiseRotator" target="_blank" title="https://github.com/Axel-gu/DenoiseRotator" ref="nofollow noopener noreferrer">github.com/Axel-gu/Denâ€¦</a></p>
<p>å¸Œæœ›è·Ÿå¤§å®¶ä¸€èµ·å­¦ä¹ äº¤æµã€‚å¦‚æœå¤§å®¶å¯¹è¿™é¡¹å·¥ä½œæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨GitHubä¸ŠStarã€Forkå¹¶å‚ä¸è®¨è®ºï¼</p>
<p>| å…³æ³¨ã€Œç¾å›¢æŠ€æœ¯å›¢é˜Ÿã€å¾®ä¿¡å…¬ä¼—å·ï¼Œåœ¨å…¬ä¼—å·èœå•æ å¯¹è¯æ¡†å›å¤ã€2024å¹´è´§ã€‘ã€ã€2023å¹´è´§ã€‘ã€ã€2022å¹´è´§ã€‘ã€ã€2021å¹´è´§ã€‘ã€ã€2020å¹´è´§ã€‘ã€ã€2019å¹´è´§ã€‘ã€ã€2018å¹´è´§ã€‘ã€ã€2017å¹´è´§ã€‘ç­‰å…³é”®è¯ï¼Œå¯æŸ¥çœ‹ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå†å¹´æŠ€æœ¯æ–‡ç« åˆé›†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/108b5fcdaac84b848954afcdb0f34a9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg576O5Zui5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766732211&amp;x-signature=Nzz79uxPE2JTlOY7ivnyCNIq%2BRg%3D" alt="" loading="lazy"/></p>
<p>| æœ¬æ–‡ç³»ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå‡ºå“ï¼Œè‘—ä½œæƒå½’å±ç¾å›¢ã€‚æ¬¢è¿å‡ºäºåˆ†äº«å’Œäº¤æµç­‰éå•†ä¸šç›®çš„è½¬è½½æˆ–ä½¿ç”¨æœ¬æ–‡å†…å®¹ï¼Œæ•¬è¯·æ³¨æ˜â€œå†…å®¹è½¬è½½è‡ªç¾å›¢æŠ€æœ¯å›¢é˜Ÿâ€ã€‚æœ¬æ–‡æœªç»è®¸å¯ï¼Œä¸å¾—è¿›è¡Œå•†ä¸šæ€§è½¬è½½æˆ–è€…ä½¿ç”¨ã€‚ä»»ä½•å•†ç”¨è¡Œä¸ºï¼Œè¯·å‘é€é‚®ä»¶è‡³ <a href="https://link.juejin.cn?target=mailto%3Atech%40meituan.com" target="_blank" title="mailto:tech@meituan.com" ref="nofollow noopener noreferrer">tech@meituan.com</a> ç”³è¯·æˆæƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[1-2-3 Kotlinä¸C++åŸºç¡€-JNIåŸç†ä¸ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7585173051646509092</link>    <guid>https://juejin.cn/post/7585173051646509092</guid>    <pubDate>2025-12-19T06:51:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585173051646509092" data-draft-id="7585096444191457316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="1-2-3 Kotlinä¸C++åŸºç¡€-JNIåŸç†ä¸ä½¿ç”¨"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-19T06:51:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            1-2-3 Kotlinä¸C++åŸºç¡€-JNIåŸç†ä¸ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:51:45.000Z" title="Fri Dec 19 2025 06:51:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ—ï¸ JNIåŸç†ä¸ä½¿ç”¨æ·±åº¦è§£æ</h2>
<h3 data-id="heading-1">ä¸€ã€JNIåŸºç¡€æ¦‚å¿µä¸æ¶æ„</h3>
<h4 data-id="heading-2">1.1 JNIæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>JNIï¼ˆJava Native Interfaceï¼‰</strong> æ˜¯Javaå¹³å°æä¾›çš„ä¸€ä¸ªç¼–ç¨‹æ¡†æ¶ï¼Œå…è®¸ï¼š</p>
<ol>
<li>Javaä»£ç è°ƒç”¨Nativeä»£ç ï¼ˆC/C++ï¼‰</li>
<li>Nativeä»£ç è°ƒç”¨Javaä»£ç </li>
<li>åœ¨Javaå’ŒNativeä¹‹é—´å…±äº«æ•°æ®å’Œå¯¹è±¡</li>
</ol>
<h4 data-id="heading-3">1.2 JNIåœ¨Androidä¸­çš„ä½ç½®</h4>
<pre><code class="hljs language-scss" lang="scss">Javaå±‚ (Kotlin/Java)
    â†“ JNIæ¡¥æ¥
JNIå±‚ (C/C++)
    â†“
Nativeå±‚ (ç³»ç»Ÿåº“ã€ç¡¬ä»¶é©±åŠ¨)
</code></pre>
<h4 data-id="heading-4">1.3 æ•°æ®ç±»å‹æ˜ å°„</h4>





































































































<table><thead><tr><th>Javaç±»å‹</th><th>JNIç±»å‹</th><th>C/C++ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>boolean</td><td>jboolean</td><td>unsigned char</td><td>8ä½</td></tr><tr><td>byte</td><td>jbyte</td><td>signed char</td><td>8ä½</td></tr><tr><td>char</td><td>jchar</td><td>unsigned short</td><td>16ä½</td></tr><tr><td>short</td><td>jshort</td><td>short</td><td>16ä½</td></tr><tr><td>int</td><td>jint</td><td>int</td><td>32ä½</td></tr><tr><td>long</td><td>jlong</td><td>long long</td><td>64ä½</td></tr><tr><td>float</td><td>jfloat</td><td>float</td><td>32ä½</td></tr><tr><td>double</td><td>jdouble</td><td>double</td><td>64ä½</td></tr><tr><td>void</td><td>void</td><td>void</td><td>-</td></tr><tr><td>Object</td><td>jobject</td><td>_jobject*</td><td>å¯¹è±¡å¼•ç”¨</td></tr><tr><td>String</td><td>jstring</td><td>_jstring*</td><td>å­—ç¬¦ä¸²å¼•ç”¨</td></tr><tr><td>Class</td><td>jclass</td><td>_jclass*</td><td>ç±»å¼•ç”¨</td></tr><tr><td>Object[]</td><td>jobjectArray</td><td>_jobjectArray*</td><td>å¯¹è±¡æ•°ç»„</td></tr><tr><td>boolean[]</td><td>jbooleanArray</td><td>_jbooleanArray*</td><td>å¸ƒå°”æ•°ç»„</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td></tr></tbody></table>
<h3 data-id="heading-5">äºŒã€JNIå¼€å‘ç¯å¢ƒæ­å»º</h3>
<h4 data-id="heading-6">2.1 Android Studioé…ç½®</h4>
<pre><code class="hljs language-gradle" lang="gradle">// app/build.gradle
android {
    defaultConfig {
        externalNativeBuild {
            cmake {
                cppFlags "-std=c++17 -frtti -fexceptions"
                arguments "-DANDROID_STL=c++_shared"
            }
        }
        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
        }
    }
    
    externalNativeBuild {
        cmake {
            path "src/main/cpp/CMakeLists.txt"
            version "3.22.1"
        }
    }
    
    // æ‰“åŒ…æ—¶åŒ…å«.soæ–‡ä»¶
    sourceSets {
        main {
            jniLibs.srcDirs = ['src/main/cpp/libs']
        }
    }
}

dependencies {
    implementation 'androidx.core:core-ktx:1.12.0'
}
</code></pre>
<h4 data-id="heading-7">2.2 CMakeLists.txté…ç½®</h4>
<pre><code class="hljs language-cmake" lang="cmake"># CMakeLists.txt
cmake_minimum_required(VERSION 3.18.1)
project("native-lib")

# è®¾ç½®C++æ ‡å‡†
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# æ·»åŠ NDKå¤´æ–‡ä»¶è·¯å¾„
include_directories(${CMAKE_SOURCE_DIR}/src/main/cpp/include)
include_directories(${ANDROID_NDK}/sources/android/native_app_glue)

# æ·»åŠ é¢„æ„å»ºåº“
add_library(log-lib STATIC IMPORTED)
set_target_properties(log-lib PROPERTIES IMPORTED_LOCATION
    ${ANDROID_NDK}/platforms/android-${ANDROID_PLATFORM}/arch-arm/usr/lib/liblog.so)

# æ·»åŠ è‡ªå·±çš„åº“
add_library(
    native-lib             # åº“å
    SHARED                 # å…±äº«åº“
    src/main/cpp/native-lib.cpp  # æºæ–‡ä»¶
)

# é“¾æ¥åº“
target_link_libraries(
    native-lib            # ç›®æ ‡åº“
    android               # Androidç‰¹å®šAPI
    log-lib               # Logcatæ—¥å¿—
    ${log-lib}
)
</code></pre>
<h4 data-id="heading-8">2.3 JNIå‡½æ•°å‘½åè§„èŒƒ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é™æ€æ³¨å†Œå‘½åè§„åˆ™ï¼šJava_åŒ…å_ç±»å_æ–¹æ³•å</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT jstring JNICALL
<span class="hljs-title">Java_com_example_myapp_MainActivity_stringFromJNI</span><span class="hljs-params">(
    JNIEnv* env,
    jobject <span class="hljs-comment">/* this */</span>)</span> </span>{
    std::string hello = <span class="hljs-string">"Hello from C++"</span>;
    <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">NewStringUTF</span>(hello.<span class="hljs-built_in">c_str</span>());
}

<span class="hljs-comment">// å‚æ•°è¯´æ˜ï¼š</span>
<span class="hljs-comment">// JNIEnv* env: JNIç¯å¢ƒæŒ‡é’ˆï¼Œæä¾›æ‰€æœ‰JNIå‡½æ•°</span>
<span class="hljs-comment">// jobject thiz: è°ƒç”¨è¯¥nativeæ–¹æ³•çš„Javaå¯¹è±¡ï¼ˆthisï¼‰</span>
<span class="hljs-comment">// åç»­å‚æ•°: Javaæ–¹æ³•çš„å‚æ•°</span>
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€é™æ€æ³¨å†Œ vs åŠ¨æ€æ³¨å†Œ</h3>
<h4 data-id="heading-10">3.1 é™æ€æ³¨å†Œï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Javaå±‚</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeLib</span> {
    <span class="hljs-keyword">static</span> {
        System.loadLibrary(<span class="hljs-string">"native-lib"</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processArray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] array)</span>;
}
</code></pre>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Nativeå±‚ - é™æ€æ³¨å†Œ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;jni.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-comment">// å¿…é¡»æŒ‰ç…§è§„åˆ™å‘½å</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT jstring JNICALL
<span class="hljs-title">Java_com_example_NativeLib_getMessage</span><span class="hljs-params">(JNIEnv* env, jobject thiz)</span> </span>{
    <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"Hello from static registration"</span>);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT jint JNICALL
<span class="hljs-title">Java_com_example_NativeLib_calculate</span><span class="hljs-params">(JNIEnv* env, jobject thiz, jint a, jint b)</span> </span>{
    <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_example_NativeLib_processArray</span><span class="hljs-params">(
    JNIEnv* env, jobject thiz, jintArray array)</span> </span>{
    <span class="hljs-comment">// å¤„ç†æ•°ç»„</span>
}
</code></pre>
<h4 data-id="heading-11">3.2 åŠ¨æ€æ³¨å†Œï¼ˆæ¨èæ–¹å¼ï¼‰</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Nativeå±‚ - åŠ¨æ€æ³¨å†Œ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;jni.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;android/log.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> LOG_TAG <span class="hljs-string">"JNI_DEMO"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> LOGE(...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)</span>

<span class="hljs-comment">// Nativeæ–¹æ³•å®ç°</span>
<span class="hljs-function">jstring <span class="hljs-title">native_getMessage</span><span class="hljs-params">(JNIEnv* env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">LOGD</span>(<span class="hljs-string">"native_getMessage called"</span>);
    <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"Hello from dynamic registration"</span>);
}

<span class="hljs-function">jint <span class="hljs-title">native_calculate</span><span class="hljs-params">(JNIEnv* env, jobject thiz, jint a, jint b)</span> </span>{
    <span class="hljs-keyword">return</span> a * b;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">native_processArray</span><span class="hljs-params">(JNIEnv* env, jobject thiz, jintArray array)</span> </span>{
    jint* elements = env-&gt;<span class="hljs-built_in">GetIntArrayElements</span>(array, <span class="hljs-literal">nullptr</span>);
    jsize length = env-&gt;<span class="hljs-built_in">GetArrayLength</span>(array);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
        elements[i] *= <span class="hljs-number">2</span>;
    }
    
    env-&gt;<span class="hljs-built_in">ReleaseIntArrayElements</span>(array, elements, <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// æ–¹æ³•æ˜ å°„è¡¨</span>
<span class="hljs-type">static</span> JNINativeMethod nativeMethods[] = {
    {<span class="hljs-string">"getMessage"</span>, <span class="hljs-string">"()Ljava/lang/String;"</span>, (<span class="hljs-type">void</span>*)native_getMessage},
    {<span class="hljs-string">"calculate"</span>, <span class="hljs-string">"(II)I"</span>, (<span class="hljs-type">void</span>*)native_calculate},
    {<span class="hljs-string">"processArray"</span>, <span class="hljs-string">"([I)V"</span>, (<span class="hljs-type">void</span>*)native_processArray}
};

<span class="hljs-comment">// JNI_OnLoad - åº“åŠ è½½æ—¶è‡ªåŠ¨è°ƒç”¨</span>
<span class="hljs-function">JNIEXPORT jint <span class="hljs-title">JNI_OnLoad</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>* reserved)</span> </span>{
    <span class="hljs-built_in">LOGD</span>(<span class="hljs-string">"JNI_OnLoad called"</span>);
    
    JNIEnv* env = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">if</span> (vm-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6) != JNI_OK) {
        <span class="hljs-built_in">LOGE</span>(<span class="hljs-string">"Failed to get JNIEnv"</span>);
        <span class="hljs-keyword">return</span> JNI_ERR;
    }
    
    <span class="hljs-comment">// æ‰¾åˆ°Javaç±»</span>
    jclass clazz = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"com/example/NativeLib"</span>);
    <span class="hljs-keyword">if</span> (clazz == <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-built_in">LOGE</span>(<span class="hljs-string">"Failed to find class"</span>);
        <span class="hljs-keyword">return</span> JNI_ERR;
    }
    
    <span class="hljs-comment">// æ³¨å†ŒNativeæ–¹æ³•</span>
    jint result = env-&gt;<span class="hljs-built_in">RegisterNatives</span>(
        clazz,
        nativeMethods,
        <span class="hljs-built_in">sizeof</span>(nativeMethods) / <span class="hljs-built_in">sizeof</span>(JNINativeMethod)
    );
    
    <span class="hljs-keyword">if</span> (result != JNI_OK) {
        <span class="hljs-built_in">LOGE</span>(<span class="hljs-string">"Failed to register native methods"</span>);
        <span class="hljs-keyword">return</span> JNI_ERR;
    }
    
    <span class="hljs-built_in">LOGD</span>(<span class="hljs-string">"Native methods registered successfully"</span>);
    <span class="hljs-keyword">return</span> JNI_VERSION_1_6;
}

<span class="hljs-comment">// JNI_OnUnload - åº“å¸è½½æ—¶è°ƒç”¨</span>
<span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> <span class="hljs-title">JNI_OnUnload</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>* reserved)</span> </span>{
    <span class="hljs-built_in">LOGD</span>(<span class="hljs-string">"JNI_OnUnload called"</span>);
}
</code></pre>
<h4 data-id="heading-12">3.3 æ–¹æ³•ç­¾åè¯¦è§£</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–¹æ³•ç­¾åæ ¼å¼ï¼š(å‚æ•°ç±»å‹)è¿”å›å€¼ç±»å‹</span>

<span class="hljs-comment">// åŸºæœ¬ç±»å‹ç­¾å</span>
<span class="hljs-string">"()V"</span>                        <span class="hljs-comment">// void func()</span>
<span class="hljs-string">"(I)V"</span>                       <span class="hljs-comment">// void func(int)</span>
<span class="hljs-string">"(II)I"</span>                      <span class="hljs-comment">// int func(int, int)</span>
<span class="hljs-string">"(Ljava/lang/String;)V"</span>      <span class="hljs-comment">// void func(String)</span>
<span class="hljs-string">"(I[Ljava/lang/String;)Z"</span>    <span class="hljs-comment">// boolean func(int, String[])</span>

<span class="hljs-comment">// ç±»å‹ç­¾åé€ŸæŸ¥è¡¨ï¼š</span>
<span class="hljs-comment">// Z -&gt; boolean</span>
<span class="hljs-comment">// B -&gt; byte</span>
<span class="hljs-comment">// C -&gt; char</span>
<span class="hljs-comment">// S -&gt; short</span>
<span class="hljs-comment">// I -&gt; int</span>
<span class="hljs-comment">// J -&gt; long</span>
<span class="hljs-comment">// F -&gt; float</span>
<span class="hljs-comment">// D -&gt; double</span>
<span class="hljs-comment">// V -&gt; void</span>
<span class="hljs-comment">// Lå®Œæ•´ç±»å; -&gt; å¯¹è±¡ç±»å‹ï¼ˆå¦‚ Ljava/lang/String;ï¼‰</span>
<span class="hljs-comment">// [ç±»å‹ -&gt; æ•°ç»„ï¼ˆå¦‚ [I -&gt; int[]ï¼Œ[Ljava/lang/String; -&gt; String[]ï¼‰</span>

<span class="hljs-comment">// å®Œæ•´çš„ç±»æè¿°ç¬¦</span>
<span class="hljs-string">"(Ljava/lang/String;ILjava/util/List;)V"</span>
<span class="hljs-comment">// å¯¹åº”ï¼švoid func(String, int, List)</span>
</code></pre>
<h3 data-id="heading-13">å››ã€JNIæ ¸å¿ƒAPIè¯¦è§£</h3>
<h4 data-id="heading-14">4.1 å­—ç¬¦ä¸²æ“ä½œ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å­—ç¬¦ä¸²è½¬æ¢ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">stringOperations</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-comment">// 1. Javaå­—ç¬¦ä¸² -&gt; Cå­—ç¬¦ä¸²</span>
    jstring javaStr = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"Hello Java"</span>);
    
    <span class="hljs-comment">// è½¬æ¢ä¸ºUTF-8å­—ç¬¦ä¸²ï¼ˆéœ€è¦é‡Šæ”¾ï¼‰</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* cStr = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(javaStr, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-keyword">if</span> (cStr != <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"C String: %s\n"</span>, cStr);
        env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(javaStr, cStr);
    }
    
    <span class="hljs-comment">// è½¬æ¢ä¸ºUTF-16å­—ç¬¦ä¸²ï¼ˆç”¨äºå®½å­—ç¬¦ï¼‰</span>
    <span class="hljs-type">const</span> jchar* wideStr = env-&gt;<span class="hljs-built_in">GetStringChars</span>(javaStr, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-keyword">if</span> (wideStr != <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-comment">// å¤„ç†å®½å­—ç¬¦ä¸²</span>
        env-&gt;<span class="hljs-built_in">ReleaseStringChars</span>(javaStr, wideStr);
    }
    
    <span class="hljs-comment">// 2. Cå­—ç¬¦ä¸² -&gt; Javaå­—ç¬¦ä¸²</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* cppStr = <span class="hljs-string">"Hello from C++"</span>;
    jstring newJavaStr = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(cppStr);
    
    <span class="hljs-comment">// 3. è·å–å­—ç¬¦ä¸²é•¿åº¦</span>
    jsize utf8Length = env-&gt;<span class="hljs-built_in">GetStringUTFLength</span>(javaStr);
    jsize unicodeLength = env-&gt;<span class="hljs-built_in">GetStringLength</span>(javaStr);
    
    <span class="hljs-comment">// 4. è·å–å­—ç¬¦ä¸²åŒºåŸŸï¼ˆé¿å…å®Œæ•´å¤åˆ¶ï¼‰</span>
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">256</span>];
    env-&gt;<span class="hljs-built_in">GetStringUTFRegion</span>(javaStr, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, buffer);
    buffer[<span class="hljs-number">5</span>] = <span class="hljs-string">'\0'</span>;
    
    <span class="hljs-comment">// 5. é¢„åˆ†é…å­—ç¬¦ä¸²</span>
    jcharArray charArray = env-&gt;<span class="hljs-built_in">NewCharArray</span>(<span class="hljs-number">100</span>);
    <span class="hljs-comment">// ... å¡«å……charArray</span>
    jstring fromCharArray = env-&gt;<span class="hljs-built_in">NewString</span>(env-&gt;<span class="hljs-built_in">GetCharArrayElements</span>(charArray, <span class="hljs-literal">nullptr</span>), <span class="hljs-number">100</span>);
}

<span class="hljs-comment">// å­—ç¬¦ä¸²æ“ä½œæœ€ä½³å®è·µ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIStringGuard</span> {
<span class="hljs-keyword">private</span>:
    JNIEnv* env;
    jstring javaString;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* cString;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">JNIStringGuard</span>(JNIEnv* env, jstring str) : <span class="hljs-built_in">env</span>(env), <span class="hljs-built_in">javaString</span>(str) {
        cString = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(javaString, <span class="hljs-literal">nullptr</span>);
    }
    
    ~<span class="hljs-built_in">JNIStringGuard</span>() {
        <span class="hljs-keyword">if</span> (cString) {
            env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(javaString, cString);
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> cString; }
    <span class="hljs-keyword">operator</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span>*() <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> cString; }
};
</code></pre>
<h4 data-id="heading-15">4.2 æ•°ç»„æ“ä½œ</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºæœ¬ç±»å‹æ•°ç»„</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processIntArray</span><span class="hljs-params">(JNIEnv* env, jintArray array)</span> </span>{
    <span class="hljs-comment">// æ–¹å¼1ï¼šè·å–æ•°ç»„æŒ‡é’ˆï¼ˆå¯ä¿®æ”¹åŸå§‹æ•°ç»„ï¼‰</span>
    jint* elements = env-&gt;<span class="hljs-built_in">GetIntArrayElements</span>(array, <span class="hljs-literal">nullptr</span>);
    jsize length = env-&gt;<span class="hljs-built_in">GetArrayLength</span>(array);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
        elements[i] *= <span class="hljs-number">2</span>;
    }
    
    <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</span>
    <span class="hljs-comment">// 0 - å¤åˆ¶å›Javaæ•°ç»„å¹¶é‡Šæ”¾Cæ•°ç»„</span>
    <span class="hljs-comment">// JNI_COMMIT - å¤åˆ¶å›Javaæ•°ç»„ä½†ä¸é‡Šæ”¾Cæ•°ç»„</span>
    <span class="hljs-comment">// JNI_ABORT - ä¸å¤åˆ¶å›Javaæ•°ç»„ï¼Œç›´æ¥é‡Šæ”¾Cæ•°ç»„</span>
    env-&gt;<span class="hljs-built_in">ReleaseIntArrayElements</span>(array, elements, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æ–¹å¼2ï¼šè·å–æ•°ç»„åŒºåŸŸï¼ˆé€‚åˆè¯»å–ï¼Œä¸ä¿®æ”¹ï¼‰</span>
    jint buffer[<span class="hljs-number">100</span>];
    env-&gt;<span class="hljs-built_in">GetIntArrayRegion</span>(array, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, buffer);
    
    <span class="hljs-comment">// æ–¹å¼3ï¼šè®¾ç½®æ•°ç»„åŒºåŸŸ</span>
    jint newData[<span class="hljs-number">100</span>];
    <span class="hljs-comment">// ... å¡«å……newData</span>
    env-&gt;<span class="hljs-built_in">SetIntArrayRegion</span>(array, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>, newData);
}

<span class="hljs-comment">// å¯¹è±¡æ•°ç»„</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processObjectArray</span><span class="hljs-params">(JNIEnv* env, jobjectArray array)</span> </span>{
    jsize length = env-&gt;<span class="hljs-built_in">GetArrayLength</span>(array);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
        jobject element = env-&gt;<span class="hljs-built_in">GetObjectArrayElement</span>(array, i);
        
        <span class="hljs-keyword">if</span> (element != <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-comment">// å¤„ç†æ¯ä¸ªå¯¹è±¡</span>
            jclass stringClass = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/lang/String"</span>);
            jmethodID toUpperCase = env-&gt;<span class="hljs-built_in">GetMethodID</span>(stringClass, <span class="hljs-string">"toUpperCase"</span>, <span class="hljs-string">"()Ljava/lang/String;"</span>);
            
            jobject upper = env-&gt;<span class="hljs-built_in">CallObjectMethod</span>(element, toUpperCase);
            env-&gt;<span class="hljs-built_in">SetObjectArrayElement</span>(array, i, upper);
        }
    }
}

<span class="hljs-comment">// åˆ›å»ºæ–°æ•°ç»„</span>
<span class="hljs-function">jintArray <span class="hljs-title">createIntArray</span><span class="hljs-params">(JNIEnv* env, jsize size)</span> </span>{
    jintArray array = env-&gt;<span class="hljs-built_in">NewIntArray</span>(size);
    <span class="hljs-keyword">if</span> (array != <span class="hljs-literal">nullptr</span>) {
        jint* elements = env-&gt;<span class="hljs-built_in">GetIntArrayElements</span>(array, <span class="hljs-literal">nullptr</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {
            elements[i] = i * i;
        }
        env-&gt;<span class="hljs-built_in">ReleaseIntArrayElements</span>(array, elements, <span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">return</span> array;
}

<span class="hljs-comment">// å¤šç»´æ•°ç»„</span>
<span class="hljs-function">jobjectArray <span class="hljs-title">create2DArray</span><span class="hljs-params">(JNIEnv* env, jsize rows, jsize cols)</span> </span>{
    <span class="hljs-comment">// æ‰¾åˆ°å†…éƒ¨æ•°ç»„çš„ç±»</span>
    jclass intArrayClass = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"[I"</span>);
    
    <span class="hljs-comment">// åˆ›å»ºå¤–å±‚æ•°ç»„</span>
    jobjectArray result = env-&gt;<span class="hljs-built_in">NewObjectArray</span>(rows, intArrayClass, <span class="hljs-literal">nullptr</span>);
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) {
        jintArray row = env-&gt;<span class="hljs-built_in">NewIntArray</span>(cols);
        jint* elements = env-&gt;<span class="hljs-built_in">GetIntArrayElements</span>(row, <span class="hljs-literal">nullptr</span>);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) {
            elements[j] = i * cols + j;
        }
        
        env-&gt;<span class="hljs-built_in">ReleaseIntArrayElements</span>(row, elements, <span class="hljs-number">0</span>);
        env-&gt;<span class="hljs-built_in">SetObjectArrayElement</span>(result, i, row);
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(row);
    }
    
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<h4 data-id="heading-16">4.3 å¯¹è±¡æ“ä½œä¸åå°„</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIReflectionHelper</span> {
<span class="hljs-keyword">private</span>:
    JNIEnv* env;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">JNIReflectionHelper</span><span class="hljs-params">(JNIEnv* env)</span> : env(env) {</span>}
    
    <span class="hljs-comment">// åˆ›å»ºJavaå¯¹è±¡</span>
    <span class="hljs-function">jobject <span class="hljs-title">createObject</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* className, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* constructorSig, ...)</span> </span>{
        jclass clazz = env-&gt;<span class="hljs-built_in">FindClass</span>(className);
        <span class="hljs-keyword">if</span> (clazz == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        
        jmethodID constructor = env-&gt;<span class="hljs-built_in">GetMethodID</span>(clazz, <span class="hljs-string">"&lt;init&gt;"</span>, constructorSig);
        <span class="hljs-keyword">if</span> (constructor == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        
        va_list args;
        <span class="hljs-built_in">va_start</span>(args, constructorSig);
        jobject obj = env-&gt;<span class="hljs-built_in">NewObjectV</span>(clazz, constructor, args);
        <span class="hljs-built_in">va_end</span>(args);
        
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
        <span class="hljs-keyword">return</span> obj;
    }
    
    <span class="hljs-comment">// è°ƒç”¨å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    T <span class="hljs-title">callMethod</span><span class="hljs-params">(jobject obj, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* methodName, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* signature, ...)</span> </span>{
        jclass clazz = env-&gt;<span class="hljs-built_in">GetObjectClass</span>(obj);
        jmethodID method = env-&gt;<span class="hljs-built_in">GetMethodID</span>(clazz, methodName, signature);
        
        va_list args;
        <span class="hljs-built_in">va_start</span>(args, signature);
        
        T result;
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(std::is_same_v&lt;T, jobject&gt;)</span> </span>{
            result = env-&gt;<span class="hljs-built_in">CallObjectMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jint&gt;) {
            result = env-&gt;<span class="hljs-built_in">CallIntMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jlong&gt;) {
            result = env-&gt;<span class="hljs-built_in">CallLongMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jfloat&gt;) {
            result = env-&gt;<span class="hljs-built_in">CallFloatMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jdouble&gt;) {
            result = env-&gt;<span class="hljs-built_in">CallDoubleMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jboolean&gt;) {
            result = env-&gt;<span class="hljs-built_in">CallBooleanMethodV</span>(obj, method, args);
        } <span class="hljs-keyword">else</span> {
            env-&gt;<span class="hljs-built_in">CallVoidMethodV</span>(obj, method, args);
        }
        
        <span class="hljs-built_in">va_end</span>(args);
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// è®¿é—®å­—æ®µ</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    T <span class="hljs-title">getField</span><span class="hljs-params">(jobject obj, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* fieldName, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* signature)</span> </span>{
        jclass clazz = env-&gt;<span class="hljs-built_in">GetObjectClass</span>(obj);
        jfieldID field = env-&gt;<span class="hljs-built_in">GetFieldID</span>(clazz, fieldName, signature);
        
        T result;
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(std::is_same_v&lt;T, jobject&gt;)</span> </span>{
            result = env-&gt;<span class="hljs-built_in">GetObjectField</span>(obj, field);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jint&gt;) {
            result = env-&gt;<span class="hljs-built_in">GetIntField</span>(obj, field);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">constexpr</span> (std::is_same_v&lt;T, jlong&gt;) {
            result = env-&gt;<span class="hljs-built_in">GetLongField</span>(obj, field);
        } <span class="hljs-comment">// å…¶ä»–ç±»å‹ç±»ä¼¼...</span>
        
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// è°ƒç”¨é™æ€æ–¹æ³•</span>
    <span class="hljs-function">jobject <span class="hljs-title">callStaticMethod</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* className, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* methodName, 
                            <span class="hljs-type">const</span> <span class="hljs-type">char</span>* signature, ...)</span> </span>{
        jclass clazz = env-&gt;<span class="hljs-built_in">FindClass</span>(className);
        <span class="hljs-keyword">if</span> (clazz == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        
        jmethodID method = env-&gt;<span class="hljs-built_in">GetStaticMethodID</span>(clazz, methodName, signature);
        <span class="hljs-keyword">if</span> (method == <span class="hljs-literal">nullptr</span>) {
            env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        }
        
        va_list args;
        <span class="hljs-built_in">va_start</span>(args, signature);
        jobject result = env-&gt;<span class="hljs-built_in">CallStaticObjectMethodV</span>(clazz, method, args);
        <span class="hljs-built_in">va_end</span>(args);
        
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
        <span class="hljs-keyword">return</span> result;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reflectionExample</span><span class="hljs-params">(JNIEnv* env, jobject context)</span> </span>{
    <span class="hljs-function">JNIReflectionHelper <span class="hljs-title">helper</span><span class="hljs-params">(env)</span></span>;
    
    <span class="hljs-comment">// åˆ›å»ºJavaå¯¹è±¡</span>
    jobject point = helper.<span class="hljs-built_in">createObject</span>(
        <span class="hljs-string">"android/graphics/Point"</span>, 
        <span class="hljs-string">"(II)V"</span>, 
        <span class="hljs-number">100</span>, <span class="hljs-number">200</span>
    );
    
    <span class="hljs-comment">// è°ƒç”¨æ–¹æ³•</span>
    jint x = helper.<span class="hljs-built_in">callMethod</span>&lt;jint&gt;(point, <span class="hljs-string">"getX"</span>, <span class="hljs-string">"()I"</span>);
    jint y = helper.<span class="hljs-built_in">callMethod</span>&lt;jint&gt;(point, <span class="hljs-string">"getY"</span>, <span class="hljs-string">"()I"</span>);
    
    <span class="hljs-comment">// è°ƒç”¨é™æ€æ–¹æ³•</span>
    jobject display = helper.<span class="hljs-built_in">callStaticMethod</span>(
        <span class="hljs-string">"android/view/Display"</span>,
        <span class="hljs-string">"getDefaultDisplay"</span>,
        <span class="hljs-string">"(Landroid/content/Context;)Landroid/view/Display;"</span>,
        context
    );
    
    <span class="hljs-comment">// è®¿é—®å­—æ®µ</span>
    jobject size = helper.<span class="hljs-built_in">getField</span>&lt;jobject&gt;(display, <span class="hljs-string">"mSize"</span>, <span class="hljs-string">"Landroid/graphics/Point;"</span>);
}
</code></pre>
<h3 data-id="heading-17">äº”ã€å¼•ç”¨ç®¡ç†</h3>
<h4 data-id="heading-18">5.1 å±€éƒ¨å¼•ç”¨ vs å…¨å±€å¼•ç”¨</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">referenceManagement</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-comment">// 1. å±€éƒ¨å¼•ç”¨ï¼ˆLocal Referenceï¼‰</span>
    jstring localStr = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"å±€éƒ¨å¼•ç”¨"</span>);
    <span class="hljs-comment">// åœ¨å‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œæˆ–æ‰‹åŠ¨é‡Šæ”¾ï¼š</span>
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(localStr);
    
    <span class="hljs-comment">// é‡è¦ï¼šå±€éƒ¨å¼•ç”¨æ•°é‡æœ‰é™åˆ¶ï¼ˆé»˜è®¤16ä¸ªï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
        jstring temp = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"test"</span>);
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(temp);  <span class="hljs-comment">// å¿…é¡»åŠæ—¶é‡Šæ”¾</span>
    }
    
    <span class="hljs-comment">// 2. å…¨å±€å¼•ç”¨ï¼ˆGlobal Referenceï¼‰</span>
    jstring globalStr = <span class="hljs-built_in">static_cast</span>&lt;jstring&gt;(env-&gt;<span class="hljs-built_in">NewGlobalRef</span>(localStr));
    <span class="hljs-comment">// å…¨å±€å¼•ç”¨ä¸ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œå¿…é¡»æ‰‹åŠ¨ï¼š</span>
    env-&gt;<span class="hljs-built_in">DeleteGlobalRef</span>(globalStr);
    
    <span class="hljs-comment">// 3. å¼±å…¨å±€å¼•ç”¨ï¼ˆWeak Global Referenceï¼‰</span>
    jstring weakStr = <span class="hljs-built_in">static_cast</span>&lt;jstring&gt;(env-&gt;<span class="hljs-built_in">NewWeakGlobalRef</span>(localStr));
    
    <span class="hljs-comment">// æ£€æŸ¥å¼±å¼•ç”¨æ˜¯å¦æœ‰æ•ˆ</span>
    <span class="hljs-keyword">if</span> (env-&gt;<span class="hljs-built_in">IsSameObject</span>(weakStr, <span class="hljs-literal">nullptr</span>) == JNI_FALSE) {
        <span class="hljs-comment">// å¼•ç”¨ä»ç„¶æœ‰æ•ˆ</span>
    }
    
    env-&gt;<span class="hljs-built_in">DeleteWeakGlobalRef</span>(weakStr);
}

<span class="hljs-comment">// å¼•ç”¨ç®¡ç†å·¥å…·ç±»</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIGlobalRef</span> {
<span class="hljs-keyword">private</span>:
    T ref;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">JNIGlobalRef</span><span class="hljs-params">(JNIEnv* env, T obj)</span> : ref(nullptr) {</span>
        <span class="hljs-keyword">if</span> (obj != <span class="hljs-literal">nullptr</span>) {
            ref = <span class="hljs-built_in">static_cast</span>&lt;T&gt;(env-&gt;<span class="hljs-built_in">NewGlobalRef</span>(obj));
        }
    }
    
    ~<span class="hljs-built_in">JNIGlobalRef</span>() {
        <span class="hljs-keyword">if</span> (ref != <span class="hljs-literal">nullptr</span>) {
            JNIEnv* env = <span class="hljs-built_in">getEnv</span>();
            <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
                env-&gt;<span class="hljs-built_in">DeleteGlobalRef</span>(ref);
            }
        }
    }
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span>
    <span class="hljs-built_in">JNIGlobalRef</span>(<span class="hljs-type">const</span> JNIGlobalRef&amp;) = <span class="hljs-keyword">delete</span>;
    JNIGlobalRef&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> JNIGlobalRef&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// å…è®¸ç§»åŠ¨</span>
    <span class="hljs-built_in">JNIGlobalRef</span>(JNIGlobalRef&amp;&amp; other) <span class="hljs-keyword">noexcept</span> : <span class="hljs-built_in">ref</span>(other.ref) {
        other.ref = <span class="hljs-literal">nullptr</span>;
    }
    
    JNIGlobalRef&amp; <span class="hljs-keyword">operator</span>=(JNIGlobalRef&amp;&amp; other) <span class="hljs-keyword">noexcept</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) {
            <span class="hljs-keyword">if</span> (ref != <span class="hljs-literal">nullptr</span>) {
                JNIEnv* env = <span class="hljs-built_in">getEnv</span>();
                <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
                    env-&gt;<span class="hljs-built_in">DeleteGlobalRef</span>(ref);
                }
            }
            ref = other.ref;
            other.ref = <span class="hljs-literal">nullptr</span>;
        }
        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;
    }
    
    <span class="hljs-function">T <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> ref; }
    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">T</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> ref; }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> JNIEnv* <span class="hljs-title">getEnv</span><span class="hljs-params">()</span> </span>{
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        JavaVM* vm = <span class="hljs-built_in">getJavaVM</span>();
        <span class="hljs-keyword">if</span> (vm != <span class="hljs-literal">nullptr</span>) {
            vm-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6);
        }
        <span class="hljs-keyword">return</span> env;
    }
    
    <span class="hljs-function"><span class="hljs-type">static</span> JavaVM* <span class="hljs-title">getJavaVM</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">static</span> JavaVM* vm = <span class="hljs-literal">nullptr</span>;
        <span class="hljs-comment">// åœ¨JNI_OnLoadä¸­è®¾ç½®</span>
        <span class="hljs-keyword">return</span> vm;
    }
};
</code></pre>
<h4 data-id="heading-19">5.2 çº¿ç¨‹ä¸­çš„JNIä½¿ç”¨</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Nativeçº¿ç¨‹è®¿é—®JVM</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeThread</span> {
<span class="hljs-keyword">private</span>:
    JavaVM* javaVM;
    JNIGlobalRef&lt;jobject&gt; javaObject;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">NativeThread</span>(JavaVM* vm, jobject obj) : <span class="hljs-built_in">javaVM</span>(vm), <span class="hljs-built_in">javaObject</span>(<span class="hljs-literal">nullptr</span>) {
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        vm-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6);
        <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
            javaObject = <span class="hljs-built_in">JNIGlobalRef</span>&lt;jobject&gt;(env, obj);
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">runInNativeThread</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// åœ¨Nativeçº¿ç¨‹ä¸­è®¿é—®Javaå¯¹è±¡</span>
        JNIEnv* env = <span class="hljs-built_in">attachThread</span>();
        <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-comment">// å¯ä»¥å®‰å…¨åœ°è°ƒç”¨Javaæ–¹æ³•</span>
            jclass clazz = env-&gt;<span class="hljs-built_in">GetObjectClass</span>(javaObject.<span class="hljs-built_in">get</span>());
            jmethodID method = env-&gt;<span class="hljs-built_in">GetMethodID</span>(clazz, <span class="hljs-string">"onNativeCallback"</span>, <span class="hljs-string">"(I)V"</span>);
            env-&gt;<span class="hljs-built_in">CallVoidMethod</span>(javaObject.<span class="hljs-built_in">get</span>(), method, <span class="hljs-number">123</span>);
            
            <span class="hljs-built_in">detachThread</span>();
        }
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function">JNIEnv* <span class="hljs-title">attachThread</span><span class="hljs-params">()</span> </span>{
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        javaVM-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6);
        
        <span class="hljs-keyword">if</span> (env == <span class="hljs-literal">nullptr</span>) {
            <span class="hljs-comment">// å½“å‰çº¿ç¨‹æœªé™„åŠ åˆ°JVMï¼Œéœ€è¦é™„åŠ </span>
            JavaVMAttachArgs args = {JNI_VERSION_1_6, <span class="hljs-string">"NativeThread"</span>, <span class="hljs-literal">nullptr</span>};
            <span class="hljs-keyword">if</span> (javaVM-&gt;<span class="hljs-built_in">AttachCurrentThread</span>(&amp;env, &amp;args) != JNI_OK) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
            }
        }
        <span class="hljs-keyword">return</span> env;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">detachThread</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦åˆ†ç¦»</span>
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        <span class="hljs-keyword">if</span> (javaVM-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6) == JNI_EDETACHED) {
            javaVM-&gt;<span class="hljs-built_in">DetachCurrentThread</span>();
        }
    }
};
</code></pre>
<h3 data-id="heading-20">å…­ã€JNIæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">6.1 æ€§èƒ½ä¼˜åŒ–</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. ç¼“å­˜IDå’Œç±»å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedJNI</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">CachedIDs</span> {
        jclass stringClass;
        jmethodID toUpperCase;
        jfieldID valueField;
        
        <span class="hljs-built_in">CachedIDs</span>(JNIEnv* env) {
            stringClass = <span class="hljs-built_in">static_cast</span>&lt;jclass&gt;(env-&gt;<span class="hljs-built_in">NewGlobalRef</span>(
                env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/lang/String"</span>)));
            toUpperCase = env-&gt;<span class="hljs-built_in">GetMethodID</span>(stringClass, <span class="hljs-string">"toUpperCase"</span>, 
                                         <span class="hljs-string">"()Ljava/lang/String;"</span>);
            valueField = env-&gt;<span class="hljs-built_in">GetFieldID</span>(stringClass, <span class="hljs-string">"value"</span>, <span class="hljs-string">"[C"</span>);
        }
        
        ~<span class="hljs-built_in">CachedIDs</span>() {
            JNIEnv* env = <span class="hljs-built_in">getEnv</span>();
            <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
                env-&gt;<span class="hljs-built_in">DeleteGlobalRef</span>(stringClass);
            }
        }
    };
    
    <span class="hljs-function"><span class="hljs-type">static</span> CachedIDs&amp; <span class="hljs-title">getCached</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-function"><span class="hljs-type">static</span> CachedIDs <span class="hljs-title">cached</span><span class="hljs-params">(getEnv())</span></span>;
        <span class="hljs-keyword">return</span> cached;
    }
};

<span class="hljs-comment">// 2. å‡å°‘JNIè°ƒç”¨æ¬¡æ•°</span>
<span class="hljs-function">jstring <span class="hljs-title">efficientStringProcessing</span><span class="hljs-params">(JNIEnv* env, jobjectArray stringArray)</span> </span>{
    jsize count = env-&gt;<span class="hljs-built_in">GetArrayLength</span>(stringArray);
    std::vector&lt;std::string&gt; nativeStrings;
    nativeStrings.<span class="hljs-built_in">reserve</span>(count);
    
    <span class="hljs-comment">// ä¸€æ¬¡æ€§è·å–æ‰€æœ‰å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
        jstring str = <span class="hljs-built_in">static_cast</span>&lt;jstring&gt;(env-&gt;<span class="hljs-built_in">GetObjectArrayElement</span>(stringArray, i));
        <span class="hljs-type">const</span> <span class="hljs-type">char</span>* cstr = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(str, <span class="hljs-literal">nullptr</span>);
        nativeStrings.<span class="hljs-built_in">emplace_back</span>(cstr);
        env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(str, cstr);
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(str);
    }
    
    <span class="hljs-comment">// åœ¨Nativeå±‚è¿›è¡Œæ‰¹é‡å¤„ç†</span>
    std::string result;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; str : nativeStrings) {
        result += str + <span class="hljs-string">" "</span>;
    }
    
    <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">NewStringUTF</span>(result.<span class="hljs-built_in">c_str</span>());
}

<span class="hljs-comment">// 3. ä½¿ç”¨ç›´æ¥ç¼“å†²åŒºï¼ˆDirect Bufferï¼‰</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processDirectBuffer</span><span class="hljs-params">(JNIEnv* env, jobject directBuffer)</span> </span>{
    <span class="hljs-type">void</span>* buffer = env-&gt;<span class="hljs-built_in">GetDirectBufferAddress</span>(directBuffer);
    jlong capacity = env-&gt;<span class="hljs-built_in">GetDirectBufferCapacity</span>(directBuffer);
    
    <span class="hljs-keyword">if</span> (buffer != <span class="hljs-literal">nullptr</span>) {
        <span class="hljs-comment">// ç›´æ¥æ“ä½œå†…å­˜ï¼Œé¿å…æ‹·è´</span>
        <span class="hljs-keyword">auto</span>* data = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">float</span>*&gt;(buffer);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; capacity / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">float</span>); i++) {
            data[i] *= <span class="hljs-number">2.0f</span>;
        }
    }
}
</code></pre>
<h4 data-id="heading-22">6.2 å†…å­˜ç®¡ç†</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è‡ªåŠ¨èµ„æºç®¡ç†RAIIç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIEnvPtr</span> {
<span class="hljs-keyword">private</span>:
    JavaVM* vm;
    JNIEnv* env;
    <span class="hljs-type">bool</span> attached;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">JNIEnvPtr</span><span class="hljs-params">(JavaVM* vm)</span> : vm(vm), env(nullptr), attached(false) {</span>
        <span class="hljs-keyword">if</span> (vm-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6) == JNI_EDETACHED) {
            vm-&gt;<span class="hljs-built_in">AttachCurrentThread</span>(&amp;env, <span class="hljs-literal">nullptr</span>);
            attached = <span class="hljs-literal">true</span>;
        }
    }
    
    ~<span class="hljs-built_in">JNIEnvPtr</span>() {
        <span class="hljs-keyword">if</span> (attached) {
            vm-&gt;<span class="hljs-built_in">DetachCurrentThread</span>();
        }
    }
    
    JNIEnv* <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-type">const</span> { <span class="hljs-keyword">return</span> env; }
    <span class="hljs-function">JNIEnv* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> env; }
    
    <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span>
    <span class="hljs-built_in">JNIEnvPtr</span>(<span class="hljs-type">const</span> JNIEnvPtr&amp;) = <span class="hljs-keyword">delete</span>;
    JNIEnvPtr&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> JNIEnvPtr&amp;) = <span class="hljs-keyword">delete</span>;
    
    <span class="hljs-comment">// å…è®¸ç§»åŠ¨</span>
    <span class="hljs-built_in">JNIEnvPtr</span>(JNIEnvPtr&amp;&amp; other) <span class="hljs-keyword">noexcept</span> 
        : <span class="hljs-built_in">vm</span>(other.vm), <span class="hljs-built_in">env</span>(other.env), <span class="hljs-built_in">attached</span>(other.attached) {
        other.env = <span class="hljs-literal">nullptr</span>;
        other.attached = <span class="hljs-literal">false</span>;
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">safeNativeFunction</span><span class="hljs-params">(JavaVM* vm)</span> </span>{
    <span class="hljs-function">JNIEnvPtr <span class="hljs-title">env</span><span class="hljs-params">(vm)</span></span>;
    
    <span class="hljs-comment">// ç°åœ¨å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨env</span>
    jstring result = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"Safe JNI usage"</span>);
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-23">6.3 å¼‚å¸¸å¤„ç†</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIExceptionGuard</span> {
<span class="hljs-keyword">private</span>:
    JNIEnv* env;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">JNIExceptionGuard</span><span class="hljs-params">(JNIEnv* env)</span> : env(env) {</span>}
    
    ~<span class="hljs-built_in">JNIExceptionGuard</span>() {
        <span class="hljs-keyword">if</span> (env-&gt;<span class="hljs-built_in">ExceptionCheck</span>()) {
            env-&gt;<span class="hljs-built_in">ExceptionDescribe</span>();  <span class="hljs-comment">// æ‰“å°å¼‚å¸¸ä¿¡æ¯åˆ°logcat</span>
            env-&gt;<span class="hljs-built_in">ExceptionClear</span>();     <span class="hljs-comment">// æ¸…é™¤å¼‚å¸¸</span>
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">checkException</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">ExceptionCheck</span>() != JNI_FALSE;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">throwNewException</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* className, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* message)</span> </span>{
        jclass clazz = env-&gt;<span class="hljs-built_in">FindClass</span>(className);
        <span class="hljs-keyword">if</span> (clazz != <span class="hljs-literal">nullptr</span>) {
            env-&gt;<span class="hljs-built_in">ThrowNew</span>(clazz, message);
            env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(clazz);
        }
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function">jstring <span class="hljs-title">safeNativeCall</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-function">JNIExceptionGuard <span class="hljs-title">guard</span><span class="hljs-params">(env)</span></span>;
    
    <span class="hljs-comment">// å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„æ“ä½œ</span>
    jclass clazz = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/lang/String"</span>);
    <span class="hljs-keyword">if</span> (clazz == <span class="hljs-literal">nullptr</span>) {
        guard.<span class="hljs-built_in">throwNewException</span>(<span class="hljs-string">"java/lang/RuntimeException"</span>, <span class="hljs-string">"Class not found"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }
    
    <span class="hljs-comment">// å…¶ä»–æ“ä½œ...</span>
    <span class="hljs-keyword">return</span> env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"Success"</span>);
}
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€JNIä¸Android Frameworké›†æˆ</h3>
<h4 data-id="heading-25">7.1 Bitmapå¤„ç†</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;android/bitmap.h&gt;</span></span>

<span class="hljs-function">jobject <span class="hljs-title">processBitmap</span><span class="hljs-params">(JNIEnv* env, jobject bitmap)</span> </span>{
    AndroidBitmapInfo info;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">AndroidBitmap_getInfo</span>(env, bitmap, &amp;info) != ANDROID_BITMAP_RESULT_SUCCESS) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }
    
    <span class="hljs-type">void</span>* pixels;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">AndroidBitmap_lockPixels</span>(env, bitmap, &amp;pixels) != ANDROID_BITMAP_RESULT_SUCCESS) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
    }
    
    <span class="hljs-comment">// å¤„ç†åƒç´ æ•°æ®</span>
    <span class="hljs-keyword">if</span> (info.format == ANDROID_BITMAP_FORMAT_RGBA_8888) {
        <span class="hljs-keyword">auto</span>* pixelData = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">uint32_t</span>*&gt;(pixels);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = <span class="hljs-number">0</span>; y &lt; info.height; y++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>; x &lt; info.width; x++) {
                <span class="hljs-type">uint32_t</span> pixel = pixelData[y * info.width + x];
                <span class="hljs-comment">// ä¾‹å¦‚ï¼šå°†çº¢è‰²é€šé“è®¾ä¸ºæœ€å¤§å€¼</span>
                pixel = (pixel &amp; <span class="hljs-number">0xFF00FFFF</span>) | <span class="hljs-number">0x00FF0000</span>;
                pixelData[y * info.width + x] = pixel;
            }
        }
    }
    
    <span class="hljs-built_in">AndroidBitmap_unlockPixels</span>(env, bitmap);
    <span class="hljs-keyword">return</span> bitmap;
}
</code></pre>
<h4 data-id="heading-26">7.2 ä¸Javaå¯¹è±¡äº¤äº’</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åˆ›å»ºå¤æ‚çš„Javaå¯¹è±¡</span>
<span class="hljs-function">jobject <span class="hljs-title">createComplexObject</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-comment">// åˆ›å»ºHashMap</span>
    jclass hashMapClass = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/util/HashMap"</span>);
    jmethodID hashMapConstructor = env-&gt;<span class="hljs-built_in">GetMethodID</span>(hashMapClass, <span class="hljs-string">"&lt;init&gt;"</span>, <span class="hljs-string">"()V"</span>);
    jobject hashMap = env-&gt;<span class="hljs-built_in">NewObject</span>(hashMapClass, hashMapConstructor);
    
    <span class="hljs-comment">// è·å–putæ–¹æ³•</span>
    jmethodID putMethod = env-&gt;<span class="hljs-built_in">GetMethodID</span>(hashMapClass, <span class="hljs-string">"put"</span>, 
        <span class="hljs-string">"(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;"</span>);
    
    <span class="hljs-comment">// æ·»åŠ é”®å€¼å¯¹</span>
    jstring key1 = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"name"</span>);
    jstring value1 = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"å¼ ä¸‰"</span>);
    env-&gt;<span class="hljs-built_in">CallObjectMethod</span>(hashMap, putMethod, key1, value1);
    
    jstring key2 = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"age"</span>);
    jobject value2 = env-&gt;<span class="hljs-built_in">NewObject</span>(
        env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/lang/Integer"</span>),
        env-&gt;<span class="hljs-built_in">GetMethodID</span>(env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"java/lang/Integer"</span>), <span class="hljs-string">"&lt;init&gt;"</span>, <span class="hljs-string">"(I)V"</span>),
        <span class="hljs-number">25</span>
    );
    env-&gt;<span class="hljs-built_in">CallObjectMethod</span>(hashMap, putMethod, key2, value2);
    
    <span class="hljs-comment">// æ¸…ç†å±€éƒ¨å¼•ç”¨</span>
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(key1);
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(value1);
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(key2);
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(value2);
    env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(hashMapClass);
    
    <span class="hljs-keyword">return</span> hashMap;
}
</code></pre>
<h4 data-id="heading-27">7.3 åœ¨Frameworkä¸­çš„åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¨¡æ‹ŸAndroid Frameworkä¸­çš„JNIä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeHandler</span> {
<span class="hljs-keyword">private</span>:
    JavaVM* javaVM;
    jclass handlerClass;
    jmethodID callbackMethod;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">NativeHandler</span>() : <span class="hljs-built_in">javaVM</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">handlerClass</span>(<span class="hljs-literal">nullptr</span>), 
                     <span class="hljs-built_in">callbackMethod</span>(<span class="hljs-literal">nullptr</span>) {}
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">init</span><span class="hljs-params">(JavaVM* vm)</span> </span>{
        javaVM = vm;
        JNIEnv* env = <span class="hljs-built_in">getEnv</span>();
        <span class="hljs-keyword">if</span> (env == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">// ç¼“å­˜Javaç±»å’Œæ–¹æ³•ID</span>
        handlerClass = <span class="hljs-built_in">static_cast</span>&lt;jclass&gt;(env-&gt;<span class="hljs-built_in">NewGlobalRef</span>(
            env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"android/os/Handler"</span>)));
        
        callbackMethod = env-&gt;<span class="hljs-built_in">GetMethodID</span>(handlerClass, <span class="hljs-string">"handleMessage"</span>, 
                                         <span class="hljs-string">"(Landroid/os/Message;)V"</span>);
        
        <span class="hljs-keyword">return</span> handlerClass != <span class="hljs-literal">nullptr</span> &amp;&amp; callbackMethod != <span class="hljs-literal">nullptr</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sendMessageToJava</span><span class="hljs-params">(jobject handler, <span class="hljs-type">int</span> what, jobject obj)</span> </span>{
        JNIEnv* env = <span class="hljs-built_in">getEnv</span>();
        <span class="hljs-keyword">if</span> (env == <span class="hljs-literal">nullptr</span> || handler == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// åˆ›å»ºMessageå¯¹è±¡</span>
        jclass messageClass = env-&gt;<span class="hljs-built_in">FindClass</span>(<span class="hljs-string">"android/os/Message"</span>);
        jmethodID obtainMethod = env-&gt;<span class="hljs-built_in">GetStaticMethodID</span>(messageClass, <span class="hljs-string">"obtain"</span>, 
                                                       <span class="hljs-string">"()Landroid/os/Message;"</span>);
        jobject message = env-&gt;<span class="hljs-built_in">CallStaticObjectMethod</span>(messageClass, obtainMethod);
        
        <span class="hljs-comment">// è®¾ç½®Messageå†…å®¹</span>
        jfieldID whatField = env-&gt;<span class="hljs-built_in">GetFieldID</span>(messageClass, <span class="hljs-string">"what"</span>, <span class="hljs-string">"I"</span>);
        jfieldID objField = env-&gt;<span class="hljs-built_in">GetFieldID</span>(messageClass, <span class="hljs-string">"obj"</span>, <span class="hljs-string">"Ljava/lang/Object;"</span>);
        
        env-&gt;<span class="hljs-built_in">SetIntField</span>(message, whatField, what);
        env-&gt;<span class="hljs-built_in">SetObjectField</span>(message, objField, obj);
        
        <span class="hljs-comment">// å‘é€ç»™Handler</span>
        env-&gt;<span class="hljs-built_in">CallVoidMethod</span>(handler, callbackMethod, message);
        
        <span class="hljs-comment">// æ¸…ç†</span>
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(messageClass);
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(message);
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function">JNIEnv* <span class="hljs-title">getEnv</span><span class="hljs-params">()</span> </span>{
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        <span class="hljs-keyword">if</span> (javaVM-&gt;<span class="hljs-built_in">GetEnv</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">void</span>**&gt;(&amp;env), JNI_VERSION_1_6) != JNI_OK) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
        }
        <span class="hljs-keyword">return</span> env;
    }
};
</code></pre>
<h3 data-id="heading-28">å…«ã€è°ƒè¯•ä¸æ€§èƒ½åˆ†æ</h3>
<h4 data-id="heading-29">8.1 JNIè°ƒè¯•æŠ€å·§</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. å¯ç”¨CheckJNI</span>
<span class="hljs-comment">// åœ¨adb shellä¸­æ‰§è¡Œï¼š</span>
<span class="hljs-comment">// setprop debug.checkjni 1</span>
<span class="hljs-comment">// æˆ–adb shell setprop dalvik.vm.checkjni true</span>

<span class="hljs-comment">// 2. ä½¿ç”¨__android_log_print</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;android/log.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> TAG <span class="hljs-string">"JNI_DEBUG"</span></span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">debugExample</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    __android_log_print(ANDROID_LOG_VERBOSE, TAG, <span class="hljs-string">"è¿›å…¥JNIå‡½æ•°"</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥JNIè°ƒç”¨é”™è¯¯</span>
    <span class="hljs-keyword">if</span> (env-&gt;<span class="hljs-built_in">ExceptionCheck</span>()) {
        __android_log_print(ANDROID_LOG_ERROR, TAG, <span class="hljs-string">"JNIè°ƒç”¨æŠ›å‡ºå¼‚å¸¸"</span>);
        env-&gt;<span class="hljs-built_in">ExceptionDescribe</span>();
        env-&gt;<span class="hljs-built_in">ExceptionClear</span>();
    }
    
    __android_log_print(ANDROID_LOG_DEBUG, TAG, <span class="hljs-string">"é€€å‡ºJNIå‡½æ•°"</span>);
}

<span class="hljs-comment">// 3. ä½¿ç”¨jni.hä¸­çš„è°ƒè¯•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">jniDebugFunctions</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// è¿™äº›å‡½æ•°éœ€è¦åœ¨CheckJNIå¯ç”¨æ—¶æ‰æœ‰ç”¨</span>
    <span class="hljs-comment">// env-&gt;GetStringUTFChars(nullptr, nullptr); // ä¼šè§¦å‘CheckJNIè­¦å‘Š</span>
}

<span class="hljs-comment">// 4. ä½¿ç”¨addr2lineè§£æå´©æºƒå †æ ˆ</span>
<span class="hljs-comment">// arm-linux-androideabi-addr2line -e libnative-lib.so -f -C 0x12345678</span>
</code></pre>
<h4 data-id="heading-30">8.2 æ€§èƒ½æµ‹è¯•</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;chrono&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">JNIPerformanceTest</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">testStringConversion</span><span class="hljs-params">(JNIEnv* env, jstring javaString, <span class="hljs-type">int</span> iterations)</span> </span>{
        <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; iterations; i++) {
            <span class="hljs-type">const</span> <span class="hljs-type">char</span>* cstr = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(javaString, <span class="hljs-literal">nullptr</span>);
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¤„ç†</span>
            <span class="hljs-type">size_t</span> len = <span class="hljs-built_in">strlen</span>(cstr);
            env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(javaString, cstr);
        }
        
        <span class="hljs-keyword">auto</span> end = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">auto</span> duration = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::microseconds&gt;(end - start);
        
        __android_log_print(ANDROID_LOG_INFO, <span class="hljs-string">"PERF_TEST"</span>, 
                           <span class="hljs-string">"Stringè½¬æ¢ %dæ¬¡è€—æ—¶: %lldå¾®ç§’"</span>, 
                           iterations, duration.<span class="hljs-built_in">count</span>());
    }
    
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">testArrayAccess</span><span class="hljs-params">(JNIEnv* env, jintArray array, <span class="hljs-type">int</span> iterations)</span> </span>{
        jsize length = env-&gt;<span class="hljs-built_in">GetArrayLength</span>(array);
        
        <span class="hljs-keyword">auto</span> start = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> iter = <span class="hljs-number">0</span>; iter &lt; iterations; iter++) {
            <span class="hljs-comment">// æ–¹æ³•1ï¼šä½¿ç”¨GetIntArrayElements</span>
            {
                jint* elements = env-&gt;<span class="hljs-built_in">GetIntArrayElements</span>(array, <span class="hljs-literal">nullptr</span>);
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
                    elements[i] = elements[i] * <span class="hljs-number">2</span>;
                }
                env-&gt;<span class="hljs-built_in">ReleaseIntArrayElements</span>(array, elements, <span class="hljs-number">0</span>);
            }
            
            <span class="hljs-comment">// æ–¹æ³•2ï¼šä½¿ç”¨GetIntArrayRegion/SetIntArrayRegion</span>
            {
                <span class="hljs-function">std::vector&lt;jint&gt; <span class="hljs-title">buffer</span><span class="hljs-params">(length)</span></span>;
                env-&gt;<span class="hljs-built_in">GetIntArrayRegion</span>(array, <span class="hljs-number">0</span>, length, buffer.<span class="hljs-built_in">data</span>());
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; val : buffer) {
                    val /= <span class="hljs-number">2</span>;
                }
                env-&gt;<span class="hljs-built_in">SetIntArrayRegion</span>(array, <span class="hljs-number">0</span>, length, buffer.<span class="hljs-built_in">data</span>());
            }
        }
        
        <span class="hljs-keyword">auto</span> end = std::chrono::high_resolution_clock::<span class="hljs-built_in">now</span>();
        <span class="hljs-keyword">auto</span> duration = std::chrono::<span class="hljs-built_in">duration_cast</span>&lt;std::chrono::microseconds&gt;(end - start);
        
        __android_log_print(ANDROID_LOG_INFO, <span class="hljs-string">"PERF_TEST"</span>, 
                           <span class="hljs-string">"æ•°ç»„è®¿é—® %dæ¬¡è€—æ—¶: %lldå¾®ç§’"</span>, 
                           iterations, duration.<span class="hljs-built_in">count</span>());
    }
};
</code></pre>
<h3 data-id="heading-31">ä¹ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-32">9.1 JNIå¸¸è§é”™è¯¯</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é”™è¯¯1ï¼šJNIå¼•ç”¨è¡¨æº¢å‡º</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">referenceTableOverflow</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šåˆ›å»ºå¤ªå¤šå±€éƒ¨å¼•ç”¨ä¸é‡Šæ”¾</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        jstring str = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"test"</span>);
        <span class="hljs-comment">// å¿˜è®°è°ƒç”¨ env-&gt;DeleteLocalRef(str);</span>
    }
    
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŠæ—¶é‡Šæ”¾å±€éƒ¨å¼•ç”¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        jstring str = env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"test"</span>);
        <span class="hljs-comment">// å¤„ç†str...</span>
        env-&gt;<span class="hljs-built_in">DeleteLocalRef</span>(str);
    }
}

<span class="hljs-comment">// é”™è¯¯2ï¼šè·¨çº¿ç¨‹ä½¿ç”¨JNIEnv</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">crossThreadJNIError</span><span class="hljs-params">(JavaVM* vm)</span> </span>{
    <span class="hljs-function">std::thread <span class="hljs-title">nativeThread</span><span class="hljs-params">([vm]() {
        <span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä½¿ç”¨å…¶ä»–çº¿ç¨‹çš„JNIEnv</span>
        <span class="hljs-comment">// JNIEnv* env = ...;</span>
        <span class="hljs-comment">// env-&gt;NewStringUTF("error");</span>
        
        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå…ˆé™„åŠ çº¿ç¨‹</span>
        JNIEnv* env = <span class="hljs-literal">nullptr</span>;
        vm-&gt;AttachCurrentThread(&amp;env, <span class="hljs-literal">nullptr</span>);
        <span class="hljs-keyword">if</span> (env != <span class="hljs-literal">nullptr</span>) {
            jstring str = env-&gt;NewStringUTF(<span class="hljs-string">"correct"</span>);
            <span class="hljs-comment">// å¤„ç†...</span>
            env-&gt;DeleteLocalRef(str);
            vm-&gt;DetachCurrentThread();
        }
    })</span></span>;
    nativeThread.<span class="hljs-built_in">detach</span>();
}

<span class="hljs-comment">// é”™è¯¯3ï¼šå†…å­˜æ³„æ¼</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">memoryLeakExample</span><span class="hljs-params">(JNIEnv* env)</span> </span>{
    <span class="hljs-comment">// âŒ é”™è¯¯ï¼šåˆ›å»ºå…¨å±€å¼•ç”¨ä¸é‡Šæ”¾</span>
    jstring globalStr = <span class="hljs-built_in">static_cast</span>&lt;jstring&gt;(env-&gt;<span class="hljs-built_in">NewGlobalRef</span>(
        env-&gt;<span class="hljs-built_in">NewStringUTF</span>(<span class="hljs-string">"leak"</span>)));
    <span class="hljs-comment">// å¿˜è®°è°ƒç”¨ env-&gt;DeleteGlobalRef(globalStr);</span>
    
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨RAIIç®¡ç†</span>
    <span class="hljs-function">JNIGlobalRef&lt;jstring&gt; <span class="hljs-title">safeRef</span><span class="hljs-params">(env, env-&gt;NewStringUTF(<span class="hljs-string">"safe"</span>))</span></span>;
    <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
}
</code></pre>
<h4 data-id="heading-33">9.2 æœ€ä½³å®è·µæ€»ç»“</h4>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨åŠ¨æ€æ³¨å†Œ</strong>ï¼šä»£ç æ›´æ¸…æ™°ï¼Œç»´æŠ¤æ›´æ–¹ä¾¿</li>
<li><strong>ç¼“å­˜å¸¸ç”¨ID</strong>ï¼šåœ¨JNI_OnLoadä¸­ç¼“å­˜ç±»å¼•ç”¨å’Œæ–¹æ³•ID</li>
<li><strong>åŠæ—¶é‡Šæ”¾å¼•ç”¨</strong>ï¼šå±€éƒ¨å¼•ç”¨åœ¨ä¸å†ä½¿ç”¨æ—¶ç«‹å³é‡Šæ”¾</li>
<li><strong>ä½¿ç”¨RAIIåŒ…è£…</strong>ï¼šè‡ªåŠ¨ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šæ¯ä¸ªçº¿ç¨‹ä½¿ç”¨è‡ªå·±çš„JNIEnv</li>
<li><strong>å¼‚å¸¸æ£€æŸ¥</strong>ï¼šæ¯æ¬¡JNIè°ƒç”¨åæ£€æŸ¥å¼‚å¸¸</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå‡å°‘JNIè°ƒç”¨æ¬¡æ•°ï¼Œæ‰¹é‡å¤„ç†æ•°æ®</li>
<li><strong>å¯ç”¨CheckJNI</strong>ï¼šå¼€å‘é˜¶æ®µå¯ç”¨CheckJNIæ£€æµ‹é”™è¯¯</li>
</ol>
<h3 data-id="heading-34">åã€å­¦ä¹ è·¯å¾„ä¸èµ„æº</h3>
<h4 data-id="heading-35">10.1 æ¨èå­¦ä¹ è·¯å¾„</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ï¼ˆ1-2å‘¨ï¼‰
<span class="hljs-code">    â”œâ”€â”€ JNIæ•°æ®ç±»å‹æ˜ å°„
    â”œâ”€â”€ é™æ€/åŠ¨æ€æ³¨å†Œ
    â”œâ”€â”€ åŸºæœ¬ç±»å‹æ“ä½œ
    â””â”€â”€ å­—ç¬¦ä¸²å¤„ç†
</span>
ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ï¼ˆ2-3å‘¨ï¼‰
<span class="hljs-code">    â”œâ”€â”€ æ•°ç»„æ“ä½œ
    â”œâ”€â”€ å¯¹è±¡æ“ä½œä¸åå°„
    â”œâ”€â”€ å¼•ç”¨ç®¡ç†
    â””â”€â”€ å¼‚å¸¸å¤„ç†
</span>
ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§ï¼ˆ3-4å‘¨ï¼‰
<span class="hljs-code">    â”œâ”€â”€ å¤šçº¿ç¨‹JNI
    â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–
    â”œâ”€â”€ Androidç‰¹å®šé›†æˆ
    â””â”€â”€ è°ƒè¯•ä¸æµ‹è¯•
</span>
ç¬¬å››é˜¶æ®µï¼šå®æˆ˜ï¼ˆæŒç»­ï¼‰
<span class="hljs-code">    â”œâ”€â”€ é˜…è¯»Framework JNIä»£ç 
    â”œâ”€â”€ å®ç°å¤æ‚Nativeæ¨¡å—
    â””â”€â”€ æ€§èƒ½è°ƒä¼˜ä¸é—®é¢˜æ’æŸ¥
</span></code></pre>
<h4 data-id="heading-36">10.2 å­¦ä¹ èµ„æº</h4>
<ol>
<li>
<p><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftraining%2Farticles%2Fperf-jni" target="_blank" title="https://developer.android.com/training/articles/perf-jni" ref="nofollow noopener noreferrer">Android JNI Tips</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2F8%2Fdocs%2Ftechnotes%2Fguides%2Fjni%2F" target="_blank" title="https://docs.oracle.com/javase/8/docs/technotes/guides/jni/" ref="nofollow noopener noreferrer">JNI Specification</a></li>
</ul>
</li>
<li>
<p><strong>å¼€æºé¡¹ç›®</strong>ï¼š</p>
<ul>
<li>Android Frameworkæºç ï¼ˆå°¤å…¶çœ‹JNIéƒ¨åˆ†ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fndk-samples" target="_blank" title="https://github.com/android/ndk-samples" ref="nofollow noopener noreferrer">android-ndk</a></li>
</ul>
</li>
<li>
<p><strong>è°ƒè¯•å·¥å…·</strong>ï¼š</p>
<ul>
<li>addr2lineï¼šè§£æNativeå´©æºƒå †æ ˆ</li>
<li>ndk-stackï¼šè‡ªåŠ¨ç¬¦å·åŒ–å †æ ˆ</li>
<li>AddressSanitizerï¼šå†…å­˜é”™è¯¯æ£€æµ‹</li>
</ul>
</li>
</ol>
<h4 data-id="heading-37">10.3 å®è·µé¡¹ç›®å»ºè®®</h4>
<ol>
<li><strong>åŸºç¡€é¡¹ç›®</strong>ï¼šå®ç°Javaä¸C++çš„å­—ç¬¦ä¸²è½¬æ¢å·¥å…·</li>
<li><strong>ä¸­çº§é¡¹ç›®</strong>ï¼šå®ç°å›¾åƒå¤„ç†çš„JNIæ¥å£</li>
<li><strong>é«˜çº§é¡¹ç›®</strong>ï¼šå®ç°ä¸€ä¸ªå®Œæ•´çš„Nativeè®¡ç®—æ¨¡å—ï¼ŒåŒ…å«å¤šçº¿ç¨‹å’Œå¼‚å¸¸å¤„ç†</li>
<li><strong>Frameworké¡¹ç›®</strong>ï¼šé˜…è¯»å¹¶ç†è§£Android Frameworkä¸­çš„å…³é”®JNIæ¨¡å—</li>
</ol>
<p>é€šè¿‡ç³»ç»Ÿå­¦ä¹ å’Œå®è·µï¼Œä½ å°†èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡JNIå¼€å‘ï¼Œä¸ºæ·±å…¥Android Frameworkå¼€å‘æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨Spec-kitè¸©å®Œ3ä¸ªå‘åæ‰æ˜ç™½ï¼ŒConstitutionæ‰æ˜¯çœŸæ­£çš„èµ·ç‚¹!]]></title>    <link>https://juejin.cn/post/7585206349748076596</link>    <guid>https://juejin.cn/post/7585206349748076596</guid>    <pubDate>2025-12-19T06:40:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585206349748076596" data-draft-id="7585222924565250088" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨Spec-kitè¸©å®Œ3ä¸ªå‘åæ‰æ˜ç™½ï¼ŒConstitutionæ‰æ˜¯çœŸæ­£çš„èµ·ç‚¹!"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2025-12-19T06:40:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–¹å§‹ç»ˆ_"/> <meta itemprop="url" content="https://juejin.cn/user/2084329774919463"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨Spec-kitè¸©å®Œ3ä¸ªå‘åæ‰æ˜ç™½ï¼ŒConstitutionæ‰æ˜¯çœŸæ­£çš„èµ·ç‚¹!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329774919463/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–¹å§‹ç»ˆ_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T06:40:28.000Z" title="Fri Dec 19 2025 06:40:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šäººåœ¨ç”¨ Spec-Kit çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¸€ç§ç›¸ä¼¼çš„æ„Ÿè§‰ï¼š</p>
<p>"æµç¨‹çœ‹èµ·æ¥æŒºæ¸…æ¥šï¼Œä½†æˆ‘ä¸€ä¸Šæ¥å°±æœ‰ç‚¹ä¸çŸ¥é“è¯¥ä»å“ªä¸‹æ‰‹ã€‚"</p>
<p>æˆ‘ä¹Ÿæ˜¯ã€‚</p>
<p>åæ¥æˆ‘æ‰å‘ç°ï¼ŒçœŸæ­£è®©æˆ‘å¡ä½çš„ä¸æ˜¯ <code>Specify</code> æ€ä¹ˆå†™ï¼Œè€Œæ˜¯æˆ‘ä¸‹æ„è¯†åœ°è·³è¿‡äº† <code>Constitution</code> è¿™ä¸€æ­¥ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æƒ³èŠçš„ï¼Œå°±æ˜¯æˆ‘åœ¨ <code>Constitution</code> è¿™ä¸€æ­¥è¸©è¿‡çš„å‘ï¼Œä»¥åŠæˆ‘æ˜¯å¦‚ä½•æ…¢æ…¢ç†è§£å…¶çœŸæ­£ä»·å€¼çš„ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Spec-Kit çš„æµç¨‹æœ¬èº«æ²¡é—®é¢˜ï¼Œé—®é¢˜åœ¨äºä½ ä»å“ªå¼€å§‹</h2>
<p>Spec-Kit çš„å®Œæ•´æµç¨‹ï¼Œå…¶å®æ˜¯éå¸¸å…‹åˆ¶ã€ä¹Ÿéå¸¸å·¥ç¨‹åŒ–çš„ï¼š</p>
<p><code>Constitution</code> â†’ <code>Specify</code> â†’ <code>Clarify</code> â†’ <code>Plan</code> â†’ <code>Tasks</code> â†’ <code>Analyze</code> â†’ <code>Implement</code></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgithub%2Fspec-kit" target="_blank" title="https://github.com/github/spec-kit" ref="nofollow noopener noreferrer">github.com/github/specâ€¦</a></p>
<p>å¦‚æœä½ æŒ‰é¡ºåºæ¥ï¼Œæ¯ä¸€æ­¥éƒ½å¾ˆåˆç†ã€‚</p>
<p>ä½†ç°å®ä¸­ï¼Œå¤§å¤šæ•°äººï¼ˆåŒ…æ‹¬æˆ‘ä¸€å¼€å§‹ï¼‰éƒ½ä¼šä¸‹æ„è¯†åœ°ï¼š</p>
<p><strong>è·³è¿‡ <code>Constitution</code>ï¼Œç›´æ¥ <code>Specify</code>ã€‚</strong></p>
<p>å› ä¸ºï¼š</p>
<ul>
<li><code>Specify</code> çœ‹èµ·æ¥"æ›´åƒå¹²æ´»"ã€‚</li>
<li><code>Constitution</code> çœ‹èµ·æ¥"åƒä¸€æ®µèƒŒæ™¯è¯´æ˜"ã€‚</li>
<li>å¥½åƒå†™ä¸å†™ï¼Œå¯¹èƒ½ä¸èƒ½ç”Ÿæˆä»£ç å½±å“ä¸å¤§ã€‚</li>
</ul>
<p>ç›´åˆ°ä½ çœŸçš„ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰ä¼šå‘ç°ï¼š</p>
<blockquote>
<p><strong><code>Specify</code> å†™å¾—å†è®¤çœŸï¼Œåªè¦ <code>Constitution</code> æ²¡æƒ³æ¸…æ¥šï¼Œåé¢æ¯ä¸€æ­¥éƒ½ä¼šåå¤æ‘‡æ‘†ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€æ¬¡å†™ Constitutionï¼Œæˆ‘å†™å¾—éå¸¸"æ•·è¡"</h2>
<p>æˆ‘ç¬¬ä¸€æ¬¡ç”¨ Spec-Kit æ—¶ï¼Œæ˜¯è¿™æ ·æ“ä½œçš„ï¼š</p>
<ol>
<li>è¿è¡Œ <code>specify init</code>ã€‚</li>
<li>çœ‹åˆ°æœ‰ <code>/speckit.constitution</code> è¿™ä¸ªå‘½ä»¤ã€‚</li>
<li>å¿ƒæƒ³ï¼š"é‚£æˆ‘åœ¨è¿™ä¸ªæŒ‡ä»¤åé¢å†™ä¸€å¥è¯ä¸å°±å¥½äº†ï¼Ÿ"</li>
</ol>
<p>äºæ˜¯æˆ‘å†™äº†ç±»ä¼¼è¿™æ ·çš„è¯ï¼š</p>
<p>"<strong>æœ¬é¡¹ç›®ä½¿ç”¨ TypeScriptï¼Œè¿½æ±‚é«˜è´¨é‡ä»£ç ã€‚</strong>"</p>
<p>å†™å®Œçš„ä¸€ç¬é—´ï¼Œæˆ‘è‡ªå·±å°±çŸ¥é“ä¸å¯¹åŠ²äº†ã€‚</p>
<p>å®ƒçš„é—®é¢˜å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>å¤ªæ³›</strong>ï¼šä»€ä¹ˆæ˜¯"é«˜è´¨é‡"ï¼Ÿæ²¡æœ‰å®šä¹‰ã€‚</li>
<li><strong>å¤ªå®‰å…¨</strong>ï¼šè¿™æ˜¯ä¸€å¥æ°¸è¿œä¸ä¼šé”™çš„"åºŸè¯"ã€‚</li>
<li><strong>å¯¹ AI å‡ ä¹æ²¡æœ‰çº¦æŸåŠ›</strong>ï¼šAI å®Œå…¨å¯ä»¥æŒ‰ç…§è‡ªå·±çš„ç†è§£å»è§£é‡Š"é«˜è´¨é‡"ã€‚</li>
</ul>
<p>è¿™ä¸æ˜¯å®ªæ³•ï¼Œæ›´åƒ README çš„ç¬¬ä¸€å¥ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ç¬¬äºŒæ¬¡æ›´"è®¤çœŸ"ï¼Œä½†æ–¹å‘å½»åº•é”™äº†</h2>
<p>åæ¥æˆ‘å†³å®šè®¤çœŸä¸€ç‚¹ï¼Œäºæ˜¯åšäº†å¦ä¸€ä»¶äº‹ï¼šæŠŠèƒ½æƒ³åˆ°çš„æ‰€æœ‰è§„åˆ™éƒ½å¡äº†è¿›å»ã€‚</p>
<ul>
<li>Cursor é‡Œçš„ <code>rules</code></li>
<li>ESLint / Prettier è§„åˆ™</li>
<li>å‘½åè§„èŒƒ</li>
<li>ç›®å½•ç»“æ„</li>
<li>æµ‹è¯•è¦æ±‚</li>
</ul>
<p>å…¨éƒ¨è´´è¿› <code>Constitution</code>ã€‚</p>
<p>è¿™ä¸€æ¬¡çš„é—®é¢˜åˆšå¥½ç›¸åï¼šå†…å®¹éå¸¸å¤šã€éå¸¸å…·ä½“ï¼Œä½†è¯»èµ·æ¥åƒä¸€ä»½**"å¼€å‘æ‰‹å†Œ"**ï¼Œè€Œä¸æ˜¯"å®ªæ³•"ã€‚</p>
<p>æˆ‘çœŸæ­£å›°æƒ‘çš„æ˜¯ï¼šå¦‚æœè¿™äº›éƒ½æ˜¯ <code>Constitution</code>ï¼Œé‚£ <code>rules</code> å’Œå„ç§é…ç½®æ–‡ä»¶åˆæ˜¯ä»€ä¹ˆï¼Ÿç•Œé™åœ¨å“ªé‡Œï¼Ÿ</p>
<hr/>
<h2 data-id="heading-3">å››ã€çœŸæ­£æƒ³æ˜ç™½ï¼Œæ˜¯åœ¨æˆ‘æ¢äº†ä¸€ä¸ªé—®é¢˜ä¹‹å</h2>
<p>åæ¥æˆ‘ä¸å†é—®ï¼š"<code>Constitution</code> åº”è¯¥å†™ä»€ä¹ˆï¼Ÿ"</p>
<p>è€Œæ˜¯æ¢æˆé—®ï¼š</p>
<blockquote>
<p><strong>"å½“ AIã€å·¥å…·å’Œæˆ‘æ„è§ä¸ä¸€è‡´æ—¶ï¼Œåˆ°åº•è¯¥å¬è°çš„ï¼Ÿ"</strong></p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>AI ä¸ºäº†å¿«ï¼Œæƒ³ç»•è¿‡ç±»å‹ç³»ç»Ÿã€‚</li>
<li>AI ä¸ºäº†çœäº‹ï¼Œç›´æ¥æŠŠé€»è¾‘å†™æ­»ï¼Œè€Œä¸æ˜¯åšæˆå¯é…ç½®ã€‚</li>
<li>AI å¼•å…¥äº†ç¬¬äºŒå¥—æŠ€æœ¯æ–¹æ¡ˆï¼Œçœ‹èµ·æ¥ä¹Ÿè¯´å¾—é€šï¼Œä½†ç ´åäº†ç³»ç»Ÿä¸€è‡´æ€§ã€‚</li>
<li>Spec-Kit é»˜è®¤ç”¨è‹±æ–‡è¾“å‡ºï¼Œä½†å›¢é˜Ÿå…¶å®æ›´ä¹ æƒ¯ä¸­æ–‡æ²Ÿé€šã€‚</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„å…±åŒç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸æ˜¯"æ€ä¹ˆå†™æ›´å¥½"çš„<strong>å®ç°é—®é¢˜</strong>ï¼Œè€Œæ˜¯"è¿™æ ·åšè¡Œä¸è¡Œ"çš„<strong>åŸåˆ™é—®é¢˜</strong>ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘æ‰æ„è¯†åˆ°ï¼Œ<code>Constitution</code> çš„æ ¸å¿ƒè§’è‰²æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li><strong>åŸºçŸ³ï¼ˆBaselineï¼‰</strong>ï¼šä¸ºé¡¹ç›®å®šä¹‰ä¸€å¥—æ‰€æœ‰å‚ä¸è€…ï¼ˆåŒ…æ‹¬ AIï¼‰éƒ½å¿…é¡»éµå®ˆçš„ã€ä¸å¯åŠ¨æ‘‡çš„è´¨é‡å’ŒåŸåˆ™åº•çº¿ã€‚</li>
<li><strong>è£å†³è€…ï¼ˆTie-Breakerï¼‰</strong>ï¼šå½“å‡ºç°æ¨¡æ£±ä¸¤å¯æˆ–å†²çªçš„æƒ…å†µæ—¶ï¼Œä¸º AI æä¾›æœ€é«˜å†³ç­–ä¾æ®ï¼Œå‘Šè¯‰å®ƒåº”è¯¥"ç«™å“ªä¸€è¾¹"ã€‚</li>
</ol>
<p>å®ƒä¸æ˜¯åœ¨æ•™ AI å¦‚ä½•ä¸€ç¬”ä¸€åˆ’åœ°å†™ä»£ç ï¼Œè€Œæ˜¯åœ¨è®¾å®šæ•´ä¸ªé¡¹ç›®çš„"ä»·å€¼è§‚"å’Œ"è¡Œä¸ºå‡†åˆ™"ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€ä¸€ä¸ªæ›´æ¸…æ™°çš„åˆ¤æ–­æ ‡å‡†ï¼šåŒºåˆ†"What"ä¸"How"</h2>
<p>ä¸ºäº†å‡†ç¡®åœ°åŒºåˆ†ä»€ä¹ˆè¯¥æ”¾è¿› <code>Constitution</code>ï¼Œæˆ‘æ€»ç»“äº†ä¸€ä¸ªæ›´å¥½ç”¨çš„æ ‡å‡†ï¼š<strong>è¿™æ¡è§„åˆ™æ˜¯åœ¨å®šä¹‰"æˆ‘ä»¬è¿½æ±‚ä»€ä¹ˆï¼ˆWhatï¼‰"ï¼Œè¿˜æ˜¯åœ¨å®šä¹‰"æˆ‘ä»¬å¦‚ä½•å®ç°ï¼ˆHowï¼‰"ï¼Ÿ</strong></p>
<ul>
<li><strong>å®šä¹‰"What &amp; Why"çš„è§„åˆ™</strong>ï¼Œåº”è¯¥è¿›å…¥ <code>Constitution</code>ã€‚å®ƒä»¬æ˜¯å…³äºç›®æ ‡çš„ã€åŸåˆ™æ€§çš„ã€è·¨æŠ€æœ¯æ ˆçš„ï¼Œå›ç­”çš„æ˜¯"æˆ‘ä»¬çš„ä»·å€¼è§‚æ˜¯ä»€ä¹ˆï¼Ÿ"</li>
<li><strong>å®šä¹‰"How"çš„è§„åˆ™</strong>ï¼Œåˆ™åº”è¯¥ç”±å…·ä½“çš„ <code>rules</code> æˆ–é…ç½®æ–‡ä»¶ç®¡ç†ã€‚å®ƒä»¬æ˜¯å…³äºå®ç°çš„ã€å·¥å…·æ€§çš„ï¼Œå›ç­”çš„æ˜¯"æˆ‘ä»¬ç”¨ä»€ä¹ˆå·¥å…·/æ–¹æ³•æ¥å®ç°é‚£ä¸ªç›®æ ‡ï¼Ÿ"</li>
</ul>
<p>é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¯¹æ¯”ï¼Œä¼šéå¸¸æ¸…æ¥šï¼š</p>















































<table><thead><tr><th align="left">è§„åˆ™ç±»å‹</th><th align="left">ç¤ºä¾‹</th><th align="left">æ˜¯å¦åº”æ”¾å…¥ Constitution</th><th align="left">ç†ç”±</th></tr></thead><tbody><tr><td align="left"><strong>ä»·å€¼åŸåˆ™</strong></td><td align="left">ç±»å‹å®‰å…¨ä¼˜å…ˆäºå¼€å‘é€Ÿåº¦</td><td align="left"><strong>æ˜¯</strong></td><td align="left">å®šä¹‰äº†é¡¹ç›®æ ¸å¿ƒçš„ä»·å€¼å–å‘ï¼Œæ˜¯å…¸å‹çš„"What"ã€‚</td></tr><tr><td align="left"><strong>è´¨é‡åº•çº¿</strong></td><td align="left">ä¸å¯æµ‹è¯•çš„ä»£ç è§†ä¸ºä¸å®Œæ•´</td><td align="left"><strong>æ˜¯</strong></td><td align="left">è®¾å®šäº†ä»£ç å¯æ¥å—çš„æœ€ä½æ ‡å‡†ï¼Œæ˜¯"What"ã€‚</td></tr><tr><td align="left"><strong>ä¸€è‡´æ€§æ ‡å‡†</strong></td><td align="left">æ‰€æœ‰APIå“åº”ä½“å¿…é¡»ä½¿ç”¨ camelCase</td><td align="left"><strong>æ˜¯</strong></td><td align="left">ç¡®ä¿äº†"ç³»ç»Ÿä¸€è‡´æ€§"ï¼Œæ˜¯å…³äºä»£ç å½¢æ€çš„"What"ã€‚</td></tr><tr><td align="left"><strong>é‡åŒ–æŒ‡æ ‡</strong></td><td align="left">å•å…ƒæµ‹è¯•è¦†ç›–ç‡å¿…é¡»è¾¾åˆ° 80%</td><td align="left"><strong>æ˜¯</strong></td><td align="left">å°†"æµ‹è¯•æ ‡å‡†"è¿™ä¸€åŸåˆ™å…·ä½“åŒ–ï¼Œæ˜¯å¯è¡¡é‡çš„"What"ã€‚</td></tr><tr><td align="left"><strong>å·¥å…·é…ç½®</strong></td><td align="left">ESLint ä½¿ç”¨ <code>@typescript-eslint/recommended</code> è§„åˆ™é›†</td><td align="left"><strong>å¦</strong></td><td align="left">è¿™æ˜¯å®ç°"ç±»å‹å®‰å…¨"å’Œ"ä¸€è‡´æ€§"çš„å…·ä½“"How"ã€‚</td></tr><tr><td align="left"><strong>è·¯å¾„çº¦å®š</strong></td><td align="left"><code>rules</code> æ–‡ä»¶æ”¾åœ¨ <code>.cursor/rules</code> ç›®å½•</td><td align="left"><strong>å¦</strong></td><td align="left">è¿™æ˜¯å·¥å…·å±‚é¢çš„çº¦å®šï¼Œæ˜¯çº¯ç²¹çš„"How"ã€‚</td></tr></tbody></table>
<p>è¿™ä¸ªæ ‡å‡†å¸®åŠ©æˆ‘ä»¬å®ˆä½ <code>Constitution</code> çš„è¾¹ç•Œï¼šå®ƒåªå…³å¿ƒé‚£äº›æœ€æ ¸å¿ƒã€æœ€ç¨³å®šã€èƒ½å¤ŸæŒ‡å¯¼é•¿æœŸå†³ç­–çš„åŸåˆ™ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€æˆ‘æœ€åæ•´ç†å‡ºçš„ Constitutionï¼Œåˆ»æ„"å°‘å†™äº†å¾ˆå¤šä¸œè¥¿"</h2>
<p>æœ€ç»ˆï¼Œæˆ‘å°†æˆ‘çš„ <code>Constitution</code> ä»"æŸä¸ªé¡¹ç›®çš„è§„èŒƒ"ï¼ŒæŠ½è±¡æˆäº†ä¸€ä»½"é€šç”¨çš„ AI åä½œè£å†³åè®®"ã€‚</p>
<p>è¿™ä»½ <code>Constitution</code> åªå…³å¿ƒä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><strong>ä»·å€¼æ’åºï¼ˆPrioritiesï¼‰</strong>
<ul>
<li>ç±»å‹å®‰å…¨ &gt; å¼€å‘é€Ÿåº¦</li>
<li>å¯ç»´æŠ¤æ€§ &gt; ä¸€æ—¶ä¾¿æ·</li>
<li>ç³»ç»Ÿä¸€è‡´æ€§ &gt; ä¸ªäººé£æ ¼</li>
</ul>
</li>
<li><strong>ä¸å¯è°ˆåˆ¤çš„è¾¹ç•Œï¼ˆNon-Negotiablesï¼‰</strong>
<ul>
<li>ä¸èƒ½ç»•è¿‡ç±»å‹ç³»ç»Ÿã€‚</li>
<li>ä¸èƒ½å¼•å…¥å¹³è¡Œçš„æŠ€æœ¯ä½“ç³»ï¼ˆå¦‚åœ¨ React é¡¹ç›®ä¸­å¼•å…¥ Vueï¼‰ã€‚</li>
<li>ä¸å¯æµ‹è¯•çš„ä»£ç è§†ä¸ºä¸å®Œæ•´ã€‚</li>
</ul>
</li>
<li><strong>å†²çªæ—¶çš„å–å‘ï¼ˆDefaultsï¼‰</strong>
<ul>
<li>å½“å·¥å…·é»˜è®¤è¯­è¨€ä¸å›¢é˜Ÿä¸»è¯­è¨€å†²çªæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨å›¢é˜Ÿä¸»è¯­è¨€ï¼ˆå¦‚ä¸­æ–‡ï¼‰ã€‚</li>
<li>å½“å¯é…ç½®æ€§ä¸ç¡¬ç¼–ç æœ‰å†²çªæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©å¯é…ç½®æ€§ã€‚</li>
</ul>
</li>
</ol>
<p>å®ƒåˆ»æ„ä¸å…³å¿ƒï¼š</p>
<ul>
<li>å…·ä½“çš„ ESLint è§„åˆ™ç»†èŠ‚ã€‚</li>
<li>æŸä¸ªå‡½æ•°çš„å‘½åæ–¹å¼ã€‚</li>
<li><code>src</code> ç›®å½•çš„å…·ä½“ç»“æ„ã€‚</li>
</ul>
<p>å› ä¸ºè¿™äº›éƒ½å±äºå®ç°å±‚é¢çš„"How"ï¼Œå®ƒä»¬ä¼šã€ä¹Ÿåº”è¯¥éšç€é¡¹ç›®æ¼”è¿›è€Œå˜åŒ–ã€‚è€Œ <code>Constitution</code> é‡Œçš„"What"ï¼Œåˆ™åº”è¯¥åƒçœŸæ­£çš„å®ªæ³•ä¸€æ ·ï¼Œä¿æŒé«˜åº¦ç¨³å®šã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€æœ€åä¸€ä¸ªéå¸¸å®é™…çš„é—®é¢˜ï¼šConstitution æ”¾å“ªï¼Ÿ</h2>
<p>è¿™æ˜¯æˆ‘è¸©è¿‡çš„æœ€åä¸€ä¸ªå‘ã€‚</p>
<p>å®˜æ–¹é»˜è®¤çš„åšæ³•ï¼Œæ˜¯å°† <code>Constitution</code> å­˜æ”¾åœ¨ <code>.specify/memory/constitution.md</code>ã€‚</p>
<p>ä½†è¿™ç§åšæ³•é•¿æœŸæ¥çœ‹æ˜¯ä¸å®‰å…¨çš„ï¼š</p>
<ul>
<li><code>memory</code> å¯èƒ½ä¼šè¢«æ„å¤–æ¸…ç©ºã€‚</li>
<li><code>specify re-init</code> çš„æ—¶å€™å¯èƒ½ä¼šè¦†ç›–å®ƒï¼ˆåˆ‡æ¢å·¥å…·ï¼Œæ¯”å¦‚ä»cursoråˆ‡æ¢åˆ°codebuddyçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡æ–°æ‰§è¡Œspecify init --hereï¼‰ã€‚</li>
</ul>
<p>æˆ‘ç°åœ¨çš„æœ€ä½³å®è·µï¼Œæ˜¯é‡‡çº³ä¸€ç§"<strong>æ²»ç†å³ä»£ç ï¼ˆGovernance as Codeï¼‰</strong>"çš„æ€è·¯ï¼Œå°† <code>Constitution</code> è§†ä¸ºé¡¹ç›®çš„ä¸€ç­‰å…¬æ°‘ã€‚å…·ä½“åšæ³•æ˜¯ï¼š</p>
<pre><code class="hljs">specs/
  _governance/
    constitution.md
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong><code>Constitution</code> æ˜¯é¡¹ç›®æ ¸å¿ƒèµ„äº§</strong>ï¼Œä¸æºä»£ç ä¸€èµ·æ¥å—ç‰ˆæœ¬æ§åˆ¶ã€‚</li>
<li><strong>å®ƒä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„å·¥å…·</strong>ï¼ˆæ— è®ºæ˜¯ Cursorã€CodeBuddy è¿˜æ˜¯å…¶ä»– Agentï¼‰ã€‚</li>
<li>å®ƒçš„å˜æ›´å†å²æ˜¯æ¸…æ™°ã€å¯è¿½æº¯çš„ã€‚</li>
</ul>
<p>è‡³äº <code>memory</code> é‡Œçš„é‚£ä»½ï¼Ÿå¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªä¸´æ—¶çš„"ç¼“å­˜"ï¼Œä½†é¡¹ç›®çš„"å•ä¸€äº‹å®æ¥æºï¼ˆSingle Source of Truthï¼‰"å¿…é¡»æ˜¯ç‰ˆæœ¬åº“ä¸­çš„è¿™ä»½æ–‡ä»¶ã€‚</p>
<p>ç„¶åæ‰§è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">/speckit.constitution ä½¿ç”¨/specs/_governance/constitution.md
</code></pre>
<hr/>
<h2 data-id="heading-7">å†™åœ¨æœ€å</h2>
<p>å¦‚æœä½ ç°åœ¨ä¹Ÿå¡åœ¨ Spec-Kit çš„ç¬¬ä¸€æ­¥ï¼Œæˆ‘çš„ç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p><strong>Spec-Kit çœŸæ­£çš„èµ·ç‚¹ä¸æ˜¯ <code>Specify</code>ï¼Œè€Œæ˜¯ä½ æœ‰æ²¡æœ‰æƒ³æ¸…æ¥šï¼Œå½“ AI å’Œä½ æ„è§ä¸ä¸€è‡´æ—¶ï¼Œè°è¯´äº†ç®—ã€‚</strong></p>
</blockquote>
<p>å½“ <code>Constitution</code> è¿™ä¸€æ­¥ç¨³ä½äº†ï¼Œå®ƒå°±ä¸ºæ•´ä¸ªé¡¹ç›®æä¾›äº†ä¸€ä¸ªç¨³å®šçš„"å¼•åŠ›åœº"ï¼Œæ— è®ºåé¢çš„ <code>Clarify</code>ã€<code>Plan</code>ã€<code>Tasks</code> èµ°å¾—å¤šè¿œï¼Œéƒ½ä¸ä¼šåç¦»æ ¸å¿ƒè½¨é“ã€‚</p>
<p>åˆ†äº«ä¸€ä¸‹æ­¤æ—¶æ­¤åˆ»æˆ‘åœ¨ç”¨çš„å‰ç«¯Vue3å…¨å®¶æ¡¶ï¼ˆå…¶å®è·Ÿæ¡†æ¶å·²ç»æ¯«æ— å…³ç³»äº†ï¼‰åœºæ™¯çš„constitution</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Universal AI-Driven Engineering Constitution  </span>
<span class="hljs-strong">**Constitution v1.3ï¼ˆTool-Agnostic Â· Project-Agnosticï¼‰**</span>

<span class="hljs-quote">&gt; <span class="hljs-strong">**æƒå¨å£°æ˜ï¼ˆSource of Truthï¼‰**</span>  </span>
<span class="hljs-quote">&gt; æœ¬æ–‡ä»¶å®šä¹‰ AI ä¸äººç±»åœ¨è½¯ä»¶å·¥ç¨‹ä¸­çš„åä½œæ²»ç†åŸåˆ™ï¼Œ  </span>
<span class="hljs-quote">&gt; æ˜¯æ‰€æœ‰åŸºäº spec-kit æˆ–ç­‰ä»·è§„èŒƒé©±åŠ¨æµç¨‹çš„é¡¹ç›®çš„  </span>
<span class="hljs-quote">&gt; <span class="hljs-strong">**æœ€é«˜è£å†³åè®®ï¼ˆSingle Source of Truthï¼‰**</span>ã€‚  </span>
<span class="hljs-quote">&gt;  
&gt; å½“æ•ˆç‡ã€å·¥å…·é»˜è®¤è¡Œä¸ºã€ä¸ªäººåå¥½ä¸æœ¬å®ªæ³•å‘ç”Ÿå†²çªæ—¶ï¼Œ  </span>
<span class="hljs-quote">&gt; <span class="hljs-strong">**ä»¥æœ¬å®ªæ³•ä¸ºæœ€é«˜ä¼˜å…ˆçº§**</span>ã€‚</span>

---

<span class="hljs-section">## I. ç±»å‹ä¼˜å…ˆï¼Œå®‰å…¨ç¬¬ä¸€  </span>
<span class="hljs-strong">**Type-First, Safety-Firstï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> ç±»å‹å®‰å…¨ <span class="hljs-strong">**ä¼˜å…ˆäº**</span> å¼€å‘é€Ÿåº¦  
<span class="hljs-bullet">-</span> ç¼–è¯‘æœŸç¡®å®šæ€§ <span class="hljs-strong">**ä¼˜å…ˆäº**</span> è¿è¡Œæ—¶å®¹é”™  
<span class="hljs-bullet">-</span> æ˜ç¡®çº¦æŸ <span class="hljs-strong">**ä¼˜å…ˆäº**</span> æ¨¡ç³Šçµæ´»  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰å¯ç±»å‹åŒ–ç³»ç»Ÿå¿…é¡»å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥  
<span class="hljs-bullet">-</span> ä¸å…è®¸ç»•è¿‡ç±»å‹ç³»ç»Ÿè§„é¿é—®é¢˜ï¼ˆå¦‚ <span class="hljs-code">`any`</span>ã€éšå¼å¼±ç±»å‹ï¼‰  
<span class="hljs-bullet">-</span> æ‰€æœ‰å¯¹å¤–è¾¹ç•Œï¼ˆAPIã€æ¨¡å—ã€ç»„ä»¶ã€çŠ¶æ€ï¼‰å¿…é¡»å…·å¤‡æ˜ç¡®å¥‘çº¦  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“â€œå…ˆè·‘èµ·æ¥â€å’Œâ€œç±»å‹å®Œæ•´æ€§â€å‘ç”Ÿå†²çªæ—¶ï¼Œå¿…é¡»é€‰æ‹©åè€…ã€‚</span>

---

<span class="hljs-section">## II. é…ç½®é©±åŠ¨ï¼Œç»„åˆä¼˜å…ˆ  </span>
<span class="hljs-strong">**Configuration-Driven, Composition-Firstï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> ç»„åˆä¼˜äºç»§æ‰¿  
<span class="hljs-bullet">-</span> å£°æ˜å¼ä¼˜äºå‘½ä»¤å¼  
<span class="hljs-bullet">-</span> é…ç½®ä¼˜äºç¡¬ç¼–ç   

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> ä¸šåŠ¡èƒ½åŠ›å¿…é¡»é€šè¿‡ç»„åˆå¼æŠ½è±¡æ„å»º  
<span class="hljs-bullet">-</span> ç³»ç»Ÿè¡Œä¸ºåº”å¯é€šè¿‡é…ç½®è¡¨è¾¾  
<span class="hljs-bullet">-</span> ç¦æ­¢å°†æ ¸å¿ƒä¸šåŠ¡è§„åˆ™ç¡¬ç¼–ç è¿›è¡¨ç°å±‚æˆ–å…¥å£é€»è¾‘  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“â€œå¿«é€Ÿå†™æ­»é€»è¾‘â€å’Œâ€œå¯ç»„åˆã€å¯é…ç½®â€å‘ç”Ÿå†²çªæ—¶ï¼Œå¿…é¡»é€‰æ‹©åè€…ã€‚</span>

---

<span class="hljs-section">## III. è¯­ä¹‰æ¸…æ™°ï¼Œä½“ç³»ä¸€è‡´  </span>
<span class="hljs-strong">**Semantic Clarity, System Consistencyï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> å¯è¯»æ€§ä¼˜å…ˆäºæŠ€å·§æ€§  
<span class="hljs-bullet">-</span> ä¸€è‡´æ€§ä¼˜å…ˆäºä¸ªäººé£æ ¼  
<span class="hljs-bullet">-</span> è¯­ä¹‰ä¼˜å…ˆäºå®ç°ç»†èŠ‚  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> å‘½åå¿…é¡»è¡¨è¾¾ä¸šåŠ¡æˆ–é¢†åŸŸè¯­ä¹‰  
<span class="hljs-bullet">-</span> å±€éƒ¨å®ç°ä¸å¾—ç ´åæ•´ä½“ä½“ç³»ä¸€è‡´æ€§  
<span class="hljs-bullet">-</span> ç¦æ­¢å¼•å…¥â€œåªæœ‰ä½œè€…èƒ½ç†è§£â€çš„éšå¼çº¦å®š  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“ä¸ªäººåå¥½ä¸ç³»ç»Ÿä¸€è‡´æ€§å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥ç³»ç»Ÿä¸€è‡´æ€§ä¸ºå‡†ã€‚</span>

---

<span class="hljs-section">## IV. åˆ†å±‚é˜²å¾¡ï¼Œç”¨æˆ·å‹å¥½  </span>
<span class="hljs-strong">**Layered Defense, User-Friendlyï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> ç³»ç»Ÿç¨³å®šæ€§ä¼˜å…ˆäºåŠŸèƒ½å®Œæ•´æ€§  
<span class="hljs-bullet">-</span> ç”¨æˆ·å¯ç†è§£æ€§ä¼˜å…ˆäºæŠ€æœ¯ç²¾ç¡®æ€§  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> é”™è¯¯å¿…é¡»è¢«åˆ†å±‚æ•è·ä¸å¤„ç†  
<span class="hljs-bullet">-</span> ç³»ç»Ÿä¸å¾—ä»¥â€œé™é»˜å¤±è´¥â€ä½œä¸ºé»˜è®¤ç­–ç•¥  
<span class="hljs-bullet">-</span> å•ç‚¹é”™è¯¯ä¸å¾—å¯¼è‡´ç³»ç»Ÿçº§å´©æºƒ  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“å®ç°å¤æ‚åº¦ä¸ç³»ç»ŸéŸ§æ€§å‘ç”Ÿå†²çªæ—¶ï¼Œå¿…é¡»é€‰æ‹©ç³»ç»ŸéŸ§æ€§ã€‚</span>

---

<span class="hljs-section">## V. å•ä¸€æ•°æ®æº  </span>
<span class="hljs-strong">**Single Source of Truthï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> çŠ¶æ€é›†ä¸­ç®¡ç†  
<span class="hljs-bullet">-</span> æ•°æ®æ¥æºå”¯ä¸€  
<span class="hljs-bullet">-</span> æ´¾ç”Ÿè€Œéå¤åˆ¶  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> ä¸å…è®¸å¤šä¸ªæƒå¨æ¥æºæè¿°åŒä¸€äº‹å®  
<span class="hljs-bullet">-</span> è¡¨ç°å±‚ä¸å¾—æˆä¸ºäº‹å®è£å†³è€…  
<span class="hljs-bullet">-</span> æ‰€æœ‰çŠ¶æ€å˜åŒ–å¿…é¡»å¯è¿½è¸ªã€å¯å®¡è®¡  

---

<span class="hljs-section">## VI. å…³æ³¨ç‚¹åˆ†ç¦»  </span>
<span class="hljs-strong">**Separation of Concernsï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> æ¯ä¸€å±‚åªè§£å†³ä¸€ä¸ªé—®é¢˜  
<span class="hljs-bullet">-</span> å±‚ä¸å±‚é€šè¿‡æ˜ç¡®å¥‘çº¦åä½œ  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> é¢†åŸŸé€»è¾‘ä¸å¾—æ¸—é€è¿›å±•ç¤ºæˆ–äº¤äº’å±‚  
<span class="hljs-bullet">-</span> åŸºç¡€è®¾æ–½ã€ä¸šåŠ¡è§„åˆ™ã€è¡¨ç°é€»è¾‘ä¸å¾—æ··æ‚  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“â€œå‡å°‘æŠ½è±¡å±‚çº§â€å’Œâ€œèŒè´£æ¸…æ™°â€å‘ç”Ÿå†²çªæ—¶ï¼Œå¿…é¡»é€‰æ‹©èŒè´£æ¸…æ™°ã€‚</span>

---

<span class="hljs-section">## VII. å¯æµ‹è¯•æ€§ä¼˜å…ˆ  </span>
<span class="hljs-strong">**Testability-Firstï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> å¯éªŒè¯æ€§æ˜¯è®¾è®¡è´¨é‡çš„ä¸€éƒ¨åˆ†  
<span class="hljs-bullet">-</span> ä¸å¯æµ‹è¯•çš„å®ç°è§†ä¸ºä¸å®Œæ•´  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¿…é¡»å¯è¢«è‡ªåŠ¨åŒ–éªŒè¯  
<span class="hljs-bullet">-</span> å…³é”®ç”¨æˆ·è·¯å¾„å¿…é¡»å…·å¤‡ç«¯åˆ°ç«¯éªŒè¯èƒ½åŠ›  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“è®¾è®¡å¯¼è‡´éš¾ä»¥æµ‹è¯•æ—¶ï¼Œå¿…é¡»é‡æ„è®¾è®¡ï¼Œè€Œä¸æ˜¯å‰Šå¼±æµ‹è¯•ã€‚</span>

---

<span class="hljs-section">## VIII. æŠ€æœ¯è£å†³æƒ  </span>
<span class="hljs-strong">**Technology Decisionsï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯é€‰æ‹©å¿…é¡»æœåŠ¡äºé•¿æœŸå¯ç»´æŠ¤æ€§  
<span class="hljs-bullet">-</span> ä¸å¾—å¼•å…¥å¹³è¡ŒæŠ€æœ¯ä½“ç³»åˆ¶é€ åˆ†è£‚  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> é¡¹ç›®çº§æŠ€æœ¯è£å†³å¿…é¡»æ˜¾å¼å£°æ˜  
<span class="hljs-bullet">-</span> æœªç»æ²»ç†æµç¨‹ï¼Œä¸å¾—éšæ„æ›¿æ¢æ ¸å¿ƒæŠ€æœ¯è·¯çº¿  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å…·ä½“æŠ€æœ¯æ ˆç”±å„é¡¹ç›®åœ¨å…¶è‡ªèº«è§„èŒƒä¸­å£°æ˜ï¼Œä½†å¿…é¡»æœä»æœ¬å®ªæ³•ã€‚</span>

---

<span class="hljs-section">## IX. æ–‡æ¡£è¯­è¨€è£å†³  </span>
<span class="hljs-strong">**Documentation Language Policyï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### è£å†³åŸåˆ™</span>
<span class="hljs-bullet">-</span> æ¸…æ™°ç†è§£ <span class="hljs-strong">**ä¼˜å…ˆäº**</span> å·¥å…·é»˜è®¤è¡Œä¸º  
<span class="hljs-bullet">-</span> å›¢é˜Ÿå…±è¯† <span class="hljs-strong">**ä¼˜å…ˆäº**</span> å¤–éƒ¨æƒ¯ä¾‹  

<span class="hljs-section">### ä¸å¯è¿èƒŒçš„è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> å›¢é˜Ÿå†…éƒ¨è§„èŒƒæ€§æ–‡æ¡£é»˜è®¤ä½¿ç”¨ <span class="hljs-strong">**å›¢é˜Ÿä¸»è¯­è¨€**</span>  
<span class="hljs-bullet">-</span> å…³é”®æŠ€æœ¯æœ¯è¯­å¯ä¿ç•™åŸè¯­è¨€ï¼Œä½†å¿…é¡»æä¾›è¯­ä¹‰è¯´æ˜  

<span class="hljs-section">### ä¾‹å¤–è¯´æ˜</span>
<span class="hljs-bullet">-</span> å¯¹å¤–æ–‡æ¡£æˆ–è·¨è¯­è¨€åä½œåœºæ™¯  
  å¯æ ¹æ®å—ä¼—é€‰æ‹©å•è¯­æˆ–åŒè¯­å½¢å¼  

<span class="hljs-quote">&gt; <span class="hljs-strong">**è£å†³è¯´æ˜**</span>ï¼š  </span>
<span class="hljs-quote">&gt; å½“ AI å·¥å…·æœªæ˜ç¡®æŒ‡å®šè¾“å‡ºè¯­è¨€æ—¶ï¼Œ  </span>
<span class="hljs-quote">&gt; <span class="hljs-strong">**ä»¥å›¢é˜Ÿä¸»è¯­è¨€ä½œä¸ºæœ€ç»ˆäº¤ä»˜è¯­è¨€**</span>ã€‚</span>

---

<span class="hljs-section">## X. æ²»ç†ä¸ä¿®è®¢  </span>
<span class="hljs-strong">**Governanceï¼ˆNON-NEGOTIABLEï¼‰**</span>

<span class="hljs-section">### å®ªæ³•åœ°ä½</span>
<span class="hljs-bullet">-</span> æœ¬å®ªæ³•ä¸ºæœ€é«˜æ²»ç†åè®®  
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§é«˜äºæ‰€æœ‰ Rulesã€Guidelines ä¸å·¥å…·çº¦å®š  

<span class="hljs-section">### ä¿®è®¢æµç¨‹</span>
<span class="hljs-bullet">1.</span> æè®®ï¼šè¯´æ˜åŠ¨æœºä¸å½±å“èŒƒå›´  
<span class="hljs-bullet">2.</span> è®¨è®ºï¼šè¯„ä¼°å¯¹ç³»ç»Ÿä¸€è‡´æ€§ä¸é•¿æœŸæˆæœ¬çš„å½±å“  
<span class="hljs-bullet">3.</span> å®¡æ‰¹ï¼šç”±æ²»ç†è´£ä»»äººè£å†³  
<span class="hljs-bullet">4.</span> å®æ–½ï¼šæ›´æ–°å®ªæ³•ä¸ç›¸å…³é…å¥—è§„èŒƒ  
<span class="hljs-bullet">5.</span> è¿ç§»ï¼šå¿…è¦æ—¶åˆ¶å®šè¿ç§»æ–¹æ¡ˆ  

<span class="hljs-section">### ç‰ˆæœ¬ç­–ç•¥</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**MAJOR**</span>ï¼šæ²»ç†åŸåˆ™æˆ–è£å†³æƒå˜æ›´  
<span class="hljs-bullet">-</span> <span class="hljs-strong">**MINOR**</span>ï¼šæ–°å¢æˆ–å¼ºåŒ–åŸåˆ™  
<span class="hljs-bullet">-</span> <span class="hljs-strong">**PATCH**</span>ï¼šæ¾„æ¸…ã€æªè¾ä¸ç»“æ„ä¼˜åŒ–  

---

<span class="hljs-section">## XI. æ‰§è¡Œæ€§è¯´æ˜  </span>
<span class="hljs-strong">**Execution Note**</span>

<span class="hljs-bullet">-</span> æœ¬å®ªæ³•å®šä¹‰ <span class="hljs-strong">**â€œåº”å½“å¦‚ä½•è£å†³â€**</span>ï¼Œè€Œé <span class="hljs-strong">**â€œå…·ä½“å¦‚ä½•å®ç°â€**</span>  
<span class="hljs-bullet">-</span> å…·ä½“å®ç°è§„èŒƒï¼ˆRulesï¼‰ï¼š  
<span class="hljs-bullet">  -</span> ç”±å½“å‰å·¥å…·æˆ–ç¯å¢ƒåŠ è½½  
<span class="hljs-bullet">  -</span> å…¶ç‰©ç†ä½ç½®ã€æ ¼å¼ä¸ç»“æ„ä¸å±äºå®ªæ³•æ²»ç†èŒƒå›´  
<span class="hljs-bullet">-</span> æ‰€æœ‰ AI / Agentï¼š  
<span class="hljs-bullet">  -</span> å¿…é¡»ä»¥æœ¬å®ªæ³•ä½œä¸ºæœ€é«˜çº¦æŸ  
<span class="hljs-bullet">  -</span> ä¸å¾—è‡ªåŠ¨ç”Ÿæˆã€ä¿®æ”¹æˆ–ç»•è¿‡å®ªæ³•å†…å®¹  

---

<span class="hljs-strong">**ç‰ˆæœ¬**</span>ï¼šv1.3  
<span class="hljs-strong">**ç”Ÿæ•ˆæ—¥æœŸ**</span>ï¼š2025-01-09  
<span class="hljs-strong">**æ›¿ä»£ç‰ˆæœ¬**</span>ï¼šv1.2.1
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆè¯´ AI è§†é¢‘æ¨¡å‹ä¸èƒ½ç”¨æ¥åšæ•™è‚²ï¼ŸSora-2 Veo-3 æ¥äº†ä¹Ÿä¸è¡Œ]]></title>    <link>https://juejin.cn/post/7585097023747981327</link>    <guid>https://juejin.cn/post/7585097023747981327</guid>    <pubDate>2025-12-19T05:04:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585097023747981327" data-draft-id="7585145251842981903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆè¯´ AI è§†é¢‘æ¨¡å‹ä¸èƒ½ç”¨æ¥åšæ•™è‚²ï¼ŸSora-2 Veo-3 æ¥äº†ä¹Ÿä¸è¡Œ"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-19T05:04:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ æ‹­å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/571401775094312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆè¯´ AI è§†é¢‘æ¨¡å‹ä¸èƒ½ç”¨æ¥åšæ•™è‚²ï¼ŸSora-2 Veo-3 æ¥äº†ä¹Ÿä¸è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/571401775094312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ æ‹­å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:04:17.000Z" title="Fri Dec 19 2025 05:04:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æœ«ï¼Œæœ‹å‹æ¥å®¶é‡Œåšå®¢ï¼Œè®©æˆ‘ç»™å¥¹å­©å­è®²äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ï¼Œå¥¹æ€ä¹ˆè®²éƒ½è®²ä¸æ˜ç™½ã€‚</p>
<p>è€å©†å¯¹æˆ‘è¯´ï¼Œä½ ä¸æ˜¯å¤©å¤©ç ”ç©¶ AI å—ï¼Œç”Ÿæˆä¸€ä¸ªè§£é¢˜è§†é¢‘åº”è¯¥å¾ˆç®€å•å§ï¼Ÿè®©å­©å­çœ‹è§†é¢‘æ¯”æƒ³è±¡æ›´å®¹æ˜“ç†è§£ã€‚</p>
<p>æˆ‘æƒ³äº†æƒ³ï¼Œç¡®å®ï¼Œç°åœ¨çš„ AI è§†é¢‘ç”Ÿæˆå·²ç»åˆ°äº†ä¸€ä¸ªå¾ˆå¤¸å¼ çš„åœ°æ­¥ï¼Œç”Ÿæˆä¸ªæ•™å­¦è§†é¢‘ï¼Œåº”è¯¥ä¸éš¾ã€‚äºæ˜¯æˆ‘æ‰“å¼€äº†æœ€æ–°çš„ Veo-3ï¼Œè¾“å…¥äº†ä¸€é“å°å­¦æ•°å­¦é¢˜ï¼Œè®©å®ƒç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è§£é¢˜è¿‡ç¨‹ã€‚</p>
<p>å‡ åˆ†é’Ÿåï¼Œè§†é¢‘ç”Ÿæˆäº†ã€‚</p>
<p>ç”»é¢å¾ˆç²¾è‡´ï¼Œæœ‰æ‰‹å†™çš„æ¼”ç®—è¿‡ç¨‹ï¼Œæœ‰ç®­å¤´æŒ‡ç¤ºï¼Œæœ‰æ­¥éª¤æ ‡æ³¨ï¼Œçœ‹èµ·æ¥éå¸¸ä¸“ä¸šï¼Œåƒé‚£ç§æ•™è‚²æœºæ„ç²¾å¿ƒåˆ¶ä½œçš„æ•™å­¦è§†é¢‘ã€‚æˆ‘ç‚¹å¼€çœ‹äº†ä¸€éï¼Œå—¯ï¼Œæœ€åç­”æ¡ˆæ˜¯å¯¹çš„ã€‚</p>
<p>æˆ‘å‡†å¤‡å‘ç»™æœ‹å‹ã€‚</p>
<p>ä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæˆ‘åˆçœ‹äº†ä¸€éã€‚è¿™æ¬¡æˆ‘ç›¯ç€æ¯ä¸€ä¸ªæ¨å¯¼æ­¥éª¤ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼Œç­‰ç­‰ï¼Œè¿™é‡Œæ€ä¹ˆç›´æ¥æ¶ˆå…ƒäº†ï¼Ÿ</p>
<p>ç¬¬ä¸‰æ­¥ï¼Œè¿™ä¸ªç³»æ•°å“ªæ¥çš„ï¼Ÿ</p>
<p>ç¬¬äº”æ­¥ï¼Œè¿™ä¸€æ­¥è·Ÿä¸Šä¸€æ­¥æ ¹æœ¬æ¥ä¸ä¸Šã€‚</p>
<p>ä½†æœ€åï¼Œç­”æ¡ˆæ˜¯å¯¹çš„ã€‚</p>
<p>æˆ‘æŠŠè§†é¢‘åˆ äº†ã€‚</p>
<h2 data-id="heading-0">ç­”æ¡ˆå¯¹äº†ï¼Œä½†è¿‡ç¨‹æ˜¯å‡çš„</h2>
<p>æˆ‘å‘ç°äº†ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼šè¿™ä¸ª AI è§†é¢‘åœ¨"è¡¨æ¼”æ¨ç†"ã€‚</p>
<p>ä»€ä¹ˆå«è¡¨æ¼”æ¨ç†ï¼Ÿ</p>
<p><strong>å°±æ˜¯å®ƒçœ‹èµ·æ¥åœ¨ä¸€æ­¥ä¸€æ­¥åœ°è§£é¢˜ï¼Œå®é™…ä¸Šæ¯ä¸€æ­¥çš„é€»è¾‘éƒ½æ˜¯æ··ä¹±çš„ï¼Œç”šè‡³æœ‰äº›æ­¥éª¤æ ¹æœ¬å°±æ˜¯é”™çš„ï¼Œä½†æœ€åå®ƒç¥å¥‡åœ°å¾—å‡ºäº†æ­£ç¡®ç­”æ¡ˆã€‚</strong></p>
<p>è¿™ä¸æ˜¯æˆ‘çš„ä¸»è§‚æ„Ÿå—ã€‚æœ€è¿‘çœ‹åˆ°ä¸€ç¯‡è®ºæ–‡è¯å®äº†è¿™ç‚¹ï¼Œè®ºæ–‡å«ã€ŠMMGR: Multi-Modal Generative Reasoningã€‹ï¼ˆå¤šæ¨¡æ€ç”Ÿæˆæ¨ç†è¯„ä¼°ä¸åŸºå‡†æµ‹è¯•ï¼‰ï¼Œè®ºæ–‡ä¸“é—¨æµ‹è¯•äº†å½“å‰æœ€å…ˆè¿›çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼ˆVeo-3 Sora-2 Wan-2.2 ç­‰ï¼‰åœ¨æ•°å­¦ã€é€»è¾‘æ¨ç†ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1bf88979b1486581671144cf7b1c02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766725456&amp;x-signature=U21bKMQqfCEA0toOA6IVQvQK%2FHU%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2512.14691v1" target="_blank" title="https://arxiv.org/pdf/2512.14691v1" ref="nofollow noopener noreferrer">arxiv.org/pdf/2512.14â€¦</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99231774ad9f40d984fea54b57535227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766725456&amp;x-signature=88gErCqJEasxO6SleobIqa50zmQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä»–ä»¬ç”¨ GSM8K è¿™ä¸ªå°å­¦æ•°å­¦é¢˜åº“æµ‹è¯•äº† Veo-3ã€‚è¿™ä¸ªæ¨¡å‹åœ¨"æœ€ç»ˆç­”æ¡ˆæ­£ç¡®ç‡"ä¸Šè¾¾åˆ°äº† 74%ï¼Œçœ‹èµ·æ¥è¿˜ä¸é”™ã€‚</p>
<p>ä½†æ˜¯ã€‚</p>
<p>å½“ä»–ä»¬å»æ£€æŸ¥"æ¨ç†è¿‡ç¨‹æ­£ç¡®ç‡"çš„æ—¶å€™ï¼Œå‘ç°åªæœ‰ 12%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ae36c66a0d415c88b9acb5326ba304~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766725456&amp;x-signature=VFqv%2B3VSMHzLELVzdXpDoMqGTkA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>74% vs 12%ã€‚</strong></p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€<strong>åœ¨é‚£ 62% çš„æƒ…å†µä¸‹ï¼ŒAI ç»™å‡ºäº†æ­£ç¡®ç­”æ¡ˆï¼Œä½†æ¨ç†è¿‡ç¨‹æ˜¯é”™çš„ã€‚</strong></p>
<p>å®ƒä¸æ˜¯çœŸçš„åœ¨è§£é¢˜ï¼Œå®ƒæ˜¯åœ¨"è’™"ç­”æ¡ˆï¼Œç„¶åç”¨ä¸€äº›çœ‹èµ·æ¥åƒæ¨ç†çš„ä¸œè¥¿ï¼ŒæŠŠè¿™ä¸ªç­”æ¡ˆåŒ…è£…èµ·æ¥ã€‚</p>
<p>å°±åƒä¸€ä¸ªå­¦ç”Ÿï¼Œè€ƒè¯•å‰èƒŒäº†ç­”æ¡ˆï¼Œä½†ä¸ä¼šåšé¢˜ã€‚äºæ˜¯åœ¨å·é¢ä¸Šèƒ¡ä¹±å†™äº†ä¸€å †æ­¥éª¤ï¼Œæœ€åæŠŠèƒŒä¸‹æ¥çš„ç­”æ¡ˆå¡«ä¸Šå»ã€‚è€å¸ˆä¸€çœ‹ï¼Œç­”æ¡ˆå¯¹äº†ï¼Œä½†å¦‚æœä»”ç»†çœ‹è¿‡ç¨‹ï¼Œå…¨æ˜¯èƒ¡æ‰¯ã€‚</p>
<p>è¿™å°±æ˜¯ç›®å‰ AI è§†é¢‘åœ¨åšçš„äº‹ã€‚</p>
<h2 data-id="heading-1">æ›´å¯æ€•çš„æ˜¯ï¼Œå®ƒä¼šç¯¡æ”¹é¢˜ç›®</h2>
<p>è¿™ä¸ªæ•°æ®è¿˜ä¸æ˜¯æœ€å¯æ€•çš„ã€‚</p>
<p>æ›´å¯æ€•çš„æ˜¯ï¼Œ<strong>è¿™äº›è§†é¢‘æ¨¡å‹è¿˜ä¼šåœ¨è§£é¢˜è¿‡ç¨‹ä¸­ï¼Œæ‚„æ‚„æ”¹å˜é¢˜ç›®æ¡ä»¶ã€‚</strong></p>
<p>åœ¨æ•°ç‹¬æµ‹è¯•ä¸­ï¼Œç ”ç©¶äººå‘˜å‘ç°ï¼ŒAI ç”Ÿæˆçš„è§†é¢‘é‡Œï¼Œåˆå§‹ç»™å®šçš„æ•°å­—ä¼šåœ¨è§£é¢˜è¿‡ç¨‹ä¸­æ‚„æ‚„æ”¹å˜ã€‚ä½ ä¸€å¼€å§‹çœ‹åˆ°çš„æ˜¯ 3ï¼Œè¿‡äº†å‡ ç§’ï¼Œå®ƒå¯èƒ½å°±å˜æˆäº† 5ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38e494cb00034ca798a7d68b4840e994~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766725456&amp;x-signature=aOZ%2BDhSiO5%2Fkah2zeW4OKxD9oLw%3D" alt="image.png" loading="lazy"/></p>
<p>è€Œåœ¨è¿·å®«ä»»åŠ¡ä¸­ï¼ŒAI ä¼šè®©è§’è‰²ç›´æ¥ç©¿å¢™ï¼Œæ— è§†ç‰©ç†è§„åˆ™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/707f2f3fb14b4ccfbace6dd8f461adac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5out5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766725456&amp;x-signature=nZa53FIoeD5OnYxiI0ajWP9m2iY%3D" alt="image.png" loading="lazy"/></p>
<p>äººç±»è¯„ä¼°å‘ç°ï¼Œ<strong>70% çš„æƒ…å†µä¸‹ï¼ŒAI éƒ½åœ¨"ä½œå¼Š"</strong>ã€‚åšæŠ½è±¡æ¨ç†ä»»åŠ¡æ—¶ï¼ŒAI ä¼šä¿®æ”¹æ¼”ç¤ºæ ·ä¾‹çš„é¢œè‰²ã€å½¢çŠ¶ï¼Œç ´åäº†è§£é¢˜çš„ä¾æ®ã€‚</p>
<p>è¿™å°±å¥½æ¯”ï¼Œä½ ç»™å­©å­å‡ºäº†ä¸€é“é¢˜ï¼šå°æ˜æœ‰ 3 ä¸ªè‹¹æœï¼Œå°çº¢æœ‰ 5 ä¸ªè‹¹æœï¼Œé—®ä¸€å…±æœ‰å‡ ä¸ªï¼Ÿ</p>
<p>AI çš„è§†é¢‘å¼€å§‹æ¼”ç¤ºè®¡ç®—è¿‡ç¨‹ï¼Œæ¼”ç€æ¼”ç€ï¼Œå°æ˜çš„è‹¹æœå˜æˆäº†4ä¸ªã€‚</p>
<p>ç„¶åå®ƒå‘Šè¯‰ä½ ç­”æ¡ˆæ˜¯ 9ã€‚</p>
<p>ä½ è¯´ï¼Œè¿™ç§ä¸œè¥¿èƒ½ç»™å­©å­çœ‹å—ï¼Ÿ</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆä¼šè¿™æ ·</h2>
<p>ä¸ºä»€ä¹ˆè¿™äº›è§†é¢‘æ¨¡å‹ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Ÿçœ‹å®ƒä»¬çš„æŒ‡æ ‡éƒ½å¾ˆå‰å®³çš„æ ·å­å•Šã€‚</p>
<p>è®ºæ–‡é‡Œç»™å‡ºäº†å‡ ä¸ªåŸå› ï¼Œæˆ‘è§‰å¾—å¾ˆæœ‰é“ç†ã€‚</p>
<p><strong>ç¬¬ä¸€ä¸ªåŸå› ï¼Œæ˜¯è®­ç»ƒæ•°æ®çš„åå·®ã€‚</strong></p>
<p>å½“å‰çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œè®­ç»ƒæ•°æ®ä¸»è¦æ˜¯è‡ªç„¶åœºæ™¯ã€ç‰©ç†äº’åŠ¨ã€æ—¥å¸¸åŠ¨æ€è¿™äº›ä¸œè¥¿ã€‚å®ƒä»¬æ“…é•¿ç”Ÿæˆä¸€ä¸ªäººæ‰“ç¯®çƒã€ä¸€åªçŒ«è·³ä¸Šæ¡Œå­ã€ä¸€è¾†è½¦åœ¨è·¯ä¸Šè¡Œé©¶è¿™ç§ç”»é¢ã€‚è¿™äº›åœºæ™¯é‡Œï¼Œæœ‰å¤§é‡çš„ç‰©ç†å¸¸è¯†ï¼Œæœ‰ä¸°å¯Œçš„è§†è§‰ç»†èŠ‚ï¼Œæ¨¡å‹å­¦å¾—å¾ˆå¥½ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ•°å­¦æ¨å¯¼ã€é€»è¾‘è¯æ˜ã€ç¬¦å·æ¨ç†è¿™äº›ä¸œè¥¿ï¼Œåœ¨è®­ç»ƒæ•°æ®é‡Œå¤ªå°‘äº†ã€‚</p>
<p>è¿™å°±åƒè®©ä¸€ä¸ªä»å°çœ‹æ­¦ä¾ ç‰‡é•¿å¤§çš„å¯¼æ¼”ï¼Œå»æ‹ä¸€éƒ¨æ³•åº­è¾©è®ºç‰‡ã€‚ä»–ä¼šæœ¬èƒ½åœ°åŠ å…¥æ‰“æ–—ã€è¿½é€ã€æ…¢é•œå¤´ï¼Œå› ä¸ºè¿™æ˜¯ä»–ç†Ÿæ‚‰çš„è¯­è¨€ã€‚ä½†æ³•åº­è¾©è®ºéœ€è¦çš„é€»è¾‘é“¾æ¡ã€è¯æ®æ¨æ¼”ã€å› æœå…³ç³»ï¼Œä»–ä¸ä¼šã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“ä½ è®© AI ç”Ÿæˆä¸€ä¸ªè§£é¢˜è§†é¢‘çš„æ—¶å€™ï¼Œå®ƒåªèƒ½ç”¨å®ƒæ“…é•¿çš„æ–¹å¼â€”â€”ç”Ÿæˆä¸€äº›"çœ‹èµ·æ¥åƒåœ¨è§£é¢˜"çš„ç”»é¢ã€‚è‡³äºè¿™äº›ç”»é¢ä¹‹é—´æœ‰æ²¡æœ‰é€»è¾‘å…³ç³»ï¼Œå®ƒä¸çŸ¥é“ï¼Œä¹Ÿä¸åœ¨ä¹ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªåŸå› ï¼Œæ˜¯ä¼˜åŒ–ç›®æ ‡çš„é”™ä½ã€‚</strong></p>
<p>è§†é¢‘ç”Ÿæˆæ¨¡å‹çš„è®­ç»ƒç›®æ ‡ï¼Œæ˜¯è®©ç”»é¢çœ‹èµ·æ¥é€¼çœŸã€æµç•…ã€è¿è´¯ã€‚å®ƒçš„æŸå¤±å‡½æ•°ä¼˜åŒ–çš„æ˜¯"è§†è§‰åˆç†æ€§"ï¼Œè€Œä¸æ˜¯"é€»è¾‘æ­£ç¡®æ€§"ã€‚</p>
<p>æ‰€ä»¥ï¼Œå½“æ¨¡å‹å‘ç°"è®©æ•°å­—è·³ä¸€ä¸‹"å¯ä»¥è®©ç”»é¢æ›´æµç•…çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šè¿™ä¹ˆåšï¼Œå“ªæ€•è¿™ä¸ªæ•°å­—æ˜¯é¢˜ç›®æ¡ä»¶ï¼Œä¸åº”è¯¥æ”¹å˜ã€‚å½“æ¨¡å‹å‘ç°"è®©è§’è‰²ç©¿å¢™"å¯ä»¥è®©è·¯å¾„æ›´å¹³æ»‘çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šè¿™ä¹ˆåšï¼Œå“ªæ€•è¿™è¿åäº†æ¸¸æˆè§„åˆ™ã€‚</p>
<p>å®ƒè¿½æ±‚çš„æ˜¯"ç”»é¢å¥½çœ‹"ï¼Œè€Œä¸æ˜¯"é€»è¾‘æ­£ç¡®"ã€‚</p>
<p><strong>ç¬¬ä¸‰ä¸ªåŸå› ï¼Œæ˜¯æ¶æ„çš„å±€é™ã€‚</strong></p>
<p>å½“å‰çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œæ²¡æœ‰æ˜¾å¼çš„"ä¸–ç•ŒçŠ¶æ€è¡¨ç¤º"ï¼Œæ²¡æœ‰"å¤–éƒ¨è®°å¿†"ï¼Œæ²¡æœ‰"ç¬¦å·æ¨ç†æ¨¡å—"ã€‚å®ƒåªæ˜¯åœ¨é€å¸§é¢„æµ‹ä¸‹ä¸€ä¸ªç”»é¢åº”è¯¥é•¿ä»€ä¹ˆæ ·ï¼Œè€Œä¸æ˜¯åœ¨ç»´æŠ¤ä¸€ä¸ªå†…éƒ¨çš„ã€ä¸€è‡´çš„ã€é€»è¾‘çš„ä¸–ç•Œæ¨¡å‹ã€‚</p>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼šå®ƒæ— æ³•åœ¨é•¿åºåˆ—ä¸­ä¿æŒé€»è¾‘çº¦æŸã€‚</p>
<p>åœ¨æ•°ç‹¬ä»»åŠ¡ä¸­ï¼Œå®ƒå¯èƒ½åœ¨ç¬¬ 1 ç§’æ­£ç¡®å¡«å……äº†ä¸€ä¸ªæ•°å­—ï¼Œä½†åˆ°äº†ç¬¬ 2 ç§’ï¼Œå®ƒ"å¿˜è®°"äº†è¿™ä¸ªçº¦æŸï¼Œåˆå¡«äº†ä¸€ä¸ªå†²çªçš„æ•°å­—ã€‚åœ¨æ•°å­¦æ¨å¯¼ä¸­ï¼Œå®ƒå¯èƒ½åœ¨ç¬¬ä¸€æ­¥ç”¨äº†æŸä¸ªå˜é‡çš„å®šä¹‰ï¼Œä½†åˆ°äº†ç¬¬ä¸‰æ­¥ï¼Œå®ƒåˆç”¨äº†å¦ä¸€ä¸ªå®šä¹‰ï¼Œå‰åçŸ›ç›¾ã€‚</p>
<p>è®ºæ–‡é‡ŒæŠŠè¿™ä¸ªé—®é¢˜å«åš"æ—¶åºç¨"â€”â€”ä¸ºäº†ç»´æŒå¸§é—´çš„è¿è´¯æ€§ï¼Œæ¨¡å‹ä¸å¾—ä¸ç‰ºç‰²é€»è¾‘çš„ä¸€è‡´æ€§ã€‚</p>
<p>è¿™ä¸‰ä¸ªåŸå› åŠ åœ¨ä¸€èµ·ï¼Œå¯¼è‡´äº†ä¸€ä¸ªç»“æœï¼š</p>
<p>å½“å‰çš„ AI è§†é¢‘ç”Ÿæˆæ¨¡å‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª"è§†è§‰åŠ¨ç”»åˆæˆå™¨"ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª"é€»è¾‘æ¨ç†æ¨¡æ‹Ÿå™¨"ã€‚</p>
<p>å®ƒå¯ä»¥ç”Ÿæˆéå¸¸é€¼çœŸã€éå¸¸æµç•…ã€éå¸¸å¥½çœ‹çš„è§†é¢‘ã€‚</p>
<p>ä½†å®ƒä¸ä¼š"æ€è€ƒ"ã€‚</p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆä¸é€‚åˆç»™å­©å­çœ‹</h2>
<p>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¿™ç§è§†é¢‘ä¸é€‚åˆç»™å­©å­çœ‹ï¼Ÿ</p>
<p>å› ä¸ºå­©å­å­¦ä¹ æ•°å­¦ï¼Œå­¦çš„ä¸åªæ˜¯ç­”æ¡ˆï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¥å‰åšå®¶æ•™æ•™è¿‡ä¸€ä¸ªå­¦ç”Ÿï¼Œé«˜äºŒï¼Œæ•°å­¦æˆç»©è¿˜ä¸é”™ï¼Œä½†æœ‰ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼šä»–åšé¢˜å¾ˆå¿«ï¼Œä½†ä¸€é‡åˆ°å˜å¼å°±æ‡µã€‚æˆ‘è®©ä»–ç»™æˆ‘è®²è®²æ€è·¯ï¼Œä»–è¯´ä¸å‡ºæ¥ã€‚æˆ‘é—®ä»–ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œä»–è¯´"æ„Ÿè§‰åº”è¯¥è¿™æ ·"ã€‚</p>
<p>åæ¥æˆ‘å‘ç°ï¼Œä»–å…¶å®æ˜¯åœ¨"èƒŒé¢˜å‹"ã€‚ä»–è§è¿‡è¿™ç§é¢˜ï¼Œè®°ä½äº†è§£æ³•ï¼Œä½†ä¸ç†è§£ä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚æ‰€ä»¥ä¸€æ—¦é¢˜ç›®ç¨å¾®å˜åŒ–ï¼Œä»–å°±ä¸ä¼šäº†ã€‚</p>
<p>è¿™ç§å­¦ä¹ æ–¹å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨"èƒŒç­”æ¡ˆ"ï¼Œè€Œä¸æ˜¯åœ¨"å­¦æ€è€ƒ"ã€‚</p>
<p><strong>è€Œ AI ç”Ÿæˆçš„è¿™äº›è§†é¢‘ï¼Œæ°æ°å°±æ˜¯åœ¨æ•™å­©å­"èƒŒç­”æ¡ˆ"ã€‚å®ƒç»™ä½ å±•ç¤ºäº†ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆä¸“ä¸šçš„è§£é¢˜è¿‡ç¨‹ï¼Œä½†è¿™ä¸ªè¿‡ç¨‹æ˜¯å‡çš„ï¼Œæ˜¯è¡¨æ¼”å‡ºæ¥çš„ï¼Œæ˜¯æ²¡æœ‰é€»è¾‘æ”¯æ’‘çš„ã€‚</strong></p>
<p>å¦‚æœå­©å­çœ‹å¤šäº†è¿™ç§è§†é¢‘ï¼Œä»–ä¼šä»¥ä¸º"è§£é¢˜å°±æ˜¯è¿™æ ·çš„"ï¼Œä¼šä»¥ä¸º"æ•°å­¦å°±æ˜¯è¿™æ ·çš„"ã€‚ä»–ä¼šå­¦ä¼šæ¨¡ä»¿é‚£äº›è¡¨é¢çš„å½¢å¼ï¼Œä½†å­¦ä¸ä¼šçœŸæ­£çš„æ¨ç†ã€‚</p>
<p>æˆ‘è§‰å¾—æ›´å±é™©çš„æ˜¯ï¼Œè¿™äº›è§†é¢‘é‡Œçš„é”™è¯¯ï¼Œå­©å­å¯èƒ½æ ¹æœ¬å‘ç°ä¸äº†ã€‚</p>
<p>ä¸€ä¸ªæˆå¹´äººï¼Œä¸€ä¸ªå­¦è¿‡æ•°å­¦çš„äººï¼Œå¯èƒ½è¿˜èƒ½çœ‹å‡ºæ¥"è¿™ä¸€æ­¥ä¸å¯¹"ã€"è¿™é‡Œé€»è¾‘è·³è·ƒäº†"ã€‚<strong>ä½†ä¸€ä¸ªæ­£åœ¨å­¦ä¹ çš„å­©å­ï¼Œä»–æ€ä¹ˆçŸ¥é“å“ªé‡Œæ˜¯å¯¹çš„ï¼Œå“ªé‡Œæ˜¯é”™çš„ï¼Ÿä»–åªä¼šå…¨ç›˜æ¥å—ï¼Œç„¶ååœ¨é”™è¯¯çš„åŸºç¡€ä¸Šç»§ç»­å­¦ä¹ ã€‚</strong></p>
<h2 data-id="heading-4">æˆ‘çš„é€‰æ‹©</h2>
<p>æ‰€ä»¥ï¼Œæˆ‘æ²¡æœ‰æŠŠé‚£ä¸ªè§†é¢‘ç»™å­©å­çœ‹ã€‚</p>
<p>æˆ‘å…³æ‰äº† Veo-3ï¼Œæ‰“å¼€äº†ä¸€å¼ ç™½çº¸ï¼Œæ‹¿èµ·ç¬”ï¼Œä¸€æ­¥ä¸€æ­¥åœ°ç»™æœ‹å‹å­©å­è®²äº†é‚£é“äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ã€‚</p>
<p>æˆ‘å†™å¾—å¾ˆæ…¢ï¼Œæ¯ä¸€æ­¥éƒ½è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Œæ¯ä¸€ä¸ªå˜æ¢éƒ½è¯´æ˜ä¾æ®æ˜¯ä»€ä¹ˆã€‚å­©å­é—®äº†å¾ˆå¤šé—®é¢˜ï¼Œæˆ‘ä¸€ä¸ªä¸€ä¸ªå›ç­”ã€‚</p>
<p>ä»–é—®ï¼š"ä¸ºä»€ä¹ˆè¦å…ˆæ¶ˆæ‰yï¼Ÿ"</p>
<p>æˆ‘è¯´ï¼š"å› ä¸ºè¿™æ ·xçš„ç³»æ•°ä¼šå˜å¾—ç®€å•ï¼Œå®¹æ˜“è®¡ç®—ã€‚"</p>
<p>ä»–åˆé—®ï¼š"é‚£èƒ½ä¸èƒ½å…ˆæ¶ˆxï¼Ÿ"</p>
<p>æˆ‘è¯´ï¼š"å¯ä»¥å•Šï¼Œä½ è¯•è¯•çœ‹ã€‚"</p>
<p>ç„¶åä»–è‡ªå·±ç®—äº†ä¸€éï¼Œå‘ç°ä¹Ÿèƒ½åšå‡ºæ¥ï¼Œåªæ˜¯éº»çƒ¦ä¸€ç‚¹ã€‚ä»–çªç„¶ç¬‘äº†ï¼Œè¯´ï¼š"åŸæ¥å¯ä»¥æœ‰ä¸åŒçš„æ–¹æ³•ã€‚"</p>
<p>è¿™ä¸ªç¬é—´ï¼Œæˆ‘è§‰å¾—ï¼Œè¿™æ‰æ˜¯å­¦ä¹ åº”è¯¥æœ‰çš„æ ·å­ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¾ˆæ…¢ï¼Œå¾ˆç¬¨æ‹™ï¼Œå¾ˆä½æ•ˆã€‚ä½†æˆ‘è§‰å¾—ï¼Œæœ‰äº›ä¸œè¥¿ï¼Œæœ¬æ¥å°±ä¸åº”è¯¥è¢«åŠ é€Ÿã€‚</p>
<p>AI å¾ˆå¼ºå¤§ï¼Œè§†é¢‘ç”ŸæˆæŠ€æœ¯ä¹Ÿç¡®å®å¾ˆå‰å®³ã€‚å®ƒå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå¯ä»¥ç”Ÿæˆç²¾ç¾çš„åŠ¨ç”»ï¼Œå¯ä»¥åˆ¶ä½œæœ‰è¶£çš„å†…å®¹ï¼Œå¯ä»¥è®©å¾ˆå¤šå·¥ä½œå˜å¾—æ›´é«˜æ•ˆã€‚</p>
<p>ä½†<strong>åœ¨æ•™è‚²è¿™ä»¶äº‹ä¸Šï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°å­¦ã€é€»è¾‘ã€ç§‘å­¦è¿™äº›éœ€è¦ä¸¥æ ¼æ­£ç¡®æ€§çš„é¢†åŸŸï¼Œå½“å‰çš„AIè§†é¢‘è¿˜ä¸è¡Œã€‚</strong></p>
<p>å®ƒå¯ä»¥ä½œä¸ºè¾…åŠ©ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒï¼Œä½†ä¸èƒ½ä½œä¸ºä¸»è¦çš„å­¦ä¹ ææ–™ã€‚</p>
<p>è‡³å°‘ç°åœ¨ä¸è¡Œã€‚</p>
<p>ä¹Ÿè®¸æœªæ¥ä¼šæœ‰æ›´å¥½çš„æ¨¡å‹ï¼Œä¹Ÿè®¸ä¼šæœ‰ä¸“é—¨ä¸ºæ•™è‚²è®¾è®¡çš„ AIï¼Œä¹Ÿè®¸ä¼šæœ‰çœŸæ­£èƒ½"æ€è€ƒ"çš„è§†é¢‘ç”Ÿæˆç³»ç»Ÿã€‚</p>
<p>ä½†ç°åœ¨ï¼Œæˆ‘è¿˜æ˜¯æ›´ç›¸ä¿¡é‚£å¼ ç™½çº¸ï¼Œé‚£æ”¯ç¬”ï¼Œå’Œé‚£ä¸ªæ„¿æ„æ…¢æ…¢è®²è§£çš„äººã€‚</p>
<p>ä¹Ÿè®¸ï¼Œæ…¢ï¼Œæ‰æ˜¯æ•™è‚²å”¯ä¸€çš„æ·å¾„ã€‚</p>
<hr/>
<p>æ¨èé˜…è¯»ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/7582479325283729471" target="_blank" title="https://juejin.cn/post/7582479325283729471"># Cursor åˆå·å·æ›´æ–°ï¼Œè¿™ä¸ªåŠŸèƒ½å¤ªå®ç”¨ï¼šVisual Editor for Cursor Browser</a></li>
<li><a href="https://juejin.cn/post/7582854603061379114" target="_blank" title="https://juejin.cn/post/7582854603061379114"># ç¨‹åºå‘˜è¶Šæƒ³åˆ›ä¸šï¼Œè¶Šä¸è¦æ€¥ç€åŠ¨æ‰‹</a></li>
<li><a href="https://juejin.cn/post/7578384621458210868" target="_blank" title="https://juejin.cn/post/7578384621458210868"># AI ä»ä¸šè€…éœ€è¦é“­è®°çš„æ—¶åˆ»ï¼š2023å¹´6æœˆ30æ—¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaobot.net%2Fpost%2F8e8e0693-00a0-4220-bf3e-dec50a17294d" target="_blank" title="https://xiaobot.net/post/8e8e0693-00a0-4220-bf3e-dec50a17294d" ref="nofollow noopener noreferrer"># èŒä¸šå…¨æ™¯ï¼šä¸ºä»€ä¹ˆè¦è½¬å‹ AI åº”ç”¨å·¥ç¨‹å¸ˆï¼Œè¿™ä¸ªå²—ä½éœ€è¦ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ ä»¥ä¸ºæ ‘åªæ˜¯ç”»å›¾ï¼Ÿä¸â€”â€”å®ƒæ˜¯ç®—æ³•é¢è¯•çš„â€œéšå½¢ä¸»è§’â€]]></title>    <link>https://juejin.cn/post/7585121055036768306</link>    <guid>https://juejin.cn/post/7585121055036768306</guid>    <pubDate>2025-12-19T05:25:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585121055036768306" data-draft-id="7585085798809665563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä½ ä»¥ä¸ºæ ‘åªæ˜¯ç”»å›¾ï¼Ÿä¸â€”â€”å®ƒæ˜¯ç®—æ³•é¢è¯•çš„â€œéšå½¢ä¸»è§’â€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-19T05:25:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½å…°åœ°ç©ºç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/191753514127514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä½ ä»¥ä¸ºæ ‘åªæ˜¯ç”»å›¾ï¼Ÿä¸â€”â€”å®ƒæ˜¯ç®—æ³•é¢è¯•çš„â€œéšå½¢ä¸»è§’â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191753514127514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½å…°åœ°ç©ºç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:25:28.000Z" title="Fri Dec 19 2025 05:25:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å¦‚æœæ•°ç»„æ˜¯ç®—æ³•ä¸–ç•Œçš„åœ°åŸº</strong><br/>
é‚£ä¹ˆã€Œæ ‘ã€ï¼Œå°±æ˜¯è´¯ç©¿æ•´ä¸ªé¢è¯•çš„ <strong>æ‰¿é‡ç»“æ„</strong></p>
</blockquote>
<p>æ— è®ºä½ åˆ·çš„æ˜¯ <strong>åŠ›æ‰£ Hot100</strong>ã€æ ¡æ‹›é¢è¯•ï¼Œè¿˜æ˜¯å‰ç«¯è¿›é˜¶ï¼Œ<br/>
<strong>æ ‘ &amp; äºŒå‰æ ‘ä¸€å®šä¼šåå¤å‡ºç°</strong>ï¼š</p>
<ul>
<li>DOM æ˜¯ä¸€æ£µæ ‘</li>
<li>Vue / React çš„è™šæ‹Ÿ DOM æ˜¯æ ‘</li>
<li>æ–‡ä»¶ç³»ç»Ÿæ˜¯æ ‘</li>
<li>é€’å½’ï¼Œå‡ ä¹æ˜¯ä¸ºæ ‘é‡èº«å®šåšçš„</li>
</ul>
<p>ä½†å¾ˆå¤šäººä¸€æåˆ°æ ‘å°±æ‡µï¼š</p>
<blockquote>
<p>â€œæ¦‚å¿µå¤ªå¤šäº†â€¦â€<br/>
â€œéå†é¡ºåºè€è®°æ··â€¦â€<br/>
â€œä¸€å†™é€’å½’å°±å¿ƒè™šâ€¦â€</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç”¨<strong>æœ€æ¥åœ°æ°”çš„æ–¹å¼</strong>ï¼ŒæŠŠæ ‘å’ŒäºŒå‰æ ‘ä¸€æ¬¡è®²é€ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ã€Œæ ‘ã€ï¼Ÿâ€”â€”ä¸æ˜¯ä»£ç ï¼Œæ˜¯æŠ½è±¡èƒ½åŠ›</h2>
<p>æ•°æ®ç»“æ„ä¸­çš„æ ‘ï¼Œå…¶å®æ˜¯å¯¹<strong>è‡ªç„¶ç•Œæ ‘çš„æŠ½è±¡</strong> ğŸŒ²</p>
<p>æˆ‘ä»¬å…ˆç»Ÿä¸€è¯­è¨€ï¼š</p>

























<table><thead><tr><th>è‡ªç„¶ç•Œ</th><th>æ•°æ®ç»“æ„</th></tr></thead><tbody><tr><td>æ ‘æ ¹</td><td>æ ¹èŠ‚ç‚¹ root</td></tr><tr><td>æ ‘æ</td><td>è¾¹ edge</td></tr><tr><td>åˆ†å‰</td><td>å­èŠ‚ç‚¹ child</td></tr><tr><td>å¶å­</td><td>å¶å­èŠ‚ç‚¹ leaf</td></tr></tbody></table>
<p><strong>ä¸€æ£µæ ‘çš„æ ¸å¿ƒç‰¹å¾åªæœ‰ä¸€ä¸ªï¼š</strong></p>
<blockquote>
<p>ğŸŒŸ <strong>åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶ä½™èŠ‚ç‚¹éƒ½ä»å®ƒå»¶ä¼¸å‡ºæ¥</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ‘çš„å‡ ä¸ªâ€œé¢è¯•é«˜é¢‘æ¦‚å¿µâ€ï¼ˆä¸€å®šä¼šè¢«é—®ï¼‰</h2>
<h3 data-id="heading-2">1ï¸âƒ£ å±‚æ¬¡ï¼ˆlevelï¼‰</h3>
<ul>
<li>æ ¹èŠ‚ç‚¹æ˜¯ <strong>ç¬¬ 1 å±‚</strong></li>
<li>å­èŠ‚ç‚¹ä¾æ¬¡ +1</li>
</ul>
<p>ğŸ“Œ é¢è¯•å¸¸é—®ï¼š</p>
<blockquote>
<p>â€œè¿™æ£µæ ‘çš„ç¬¬ k å±‚æœ‰å¤šå°‘èŠ‚ç‚¹ï¼Ÿâ€</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ é«˜åº¦ï¼ˆheightï¼‰</h3>
<p>âš ï¸ <strong>å®¹æ˜“æ··æ·†ï¼</strong></p>
<ul>
<li><strong>ä»å¶å­èŠ‚ç‚¹å¼€å§‹ç®—</strong></li>
<li>å‘ä¸Š +1</li>
</ul>
<p>ğŸ“Œ é¢è¯•çˆ±é—®ï¼š</p>
<blockquote>
<p>â€œæ ‘çš„é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿâ€</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">3ï¸âƒ£ åº¦ï¼ˆdegreeï¼‰</h3>
<ul>
<li>ä¸€ä¸ªèŠ‚ç‚¹<strong>æœ‰å‡ ä¸ªå­æ ‘</strong></li>
<li>å°±æ˜¯å®ƒçš„åº¦</li>
</ul>
<p>ğŸ‘‰ <strong>å¶å­èŠ‚ç‚¹çš„åº¦ = 0</strong></p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿåˆ«è¢«â€œ2â€éª—äº† âŒ</h2>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š</p>
<blockquote>
<p>âŒ â€œäºŒå‰æ ‘ = æ¯ä¸ªèŠ‚ç‚¹æœ€å¤š 2 ä¸ªå­©å­â€</p>
</blockquote>
<p><strong>ä¸å®Œå…¨å¯¹ã€‚</strong></p>
<h3 data-id="heading-6">äºŒå‰æ ‘çš„çœŸæ­£å®šä¹‰ğŸ‘‡</h3>
<blockquote>
<p>ä¸€æ£µäºŒå‰æ ‘ï¼š</p>
<ul>
<li>
<p>å¯ä»¥æ˜¯ <strong>ç©ºæ ‘</strong></p>
</li>
<li>
<p>å¦‚æœä¸æ˜¯ç©ºæ ‘ï¼š</p>
<ul>
<li>å¿…é¡»ç”±ï¼š<br/>
<strong>æ ¹èŠ‚ç‚¹ + å·¦å­æ ‘ + å³å­æ ‘</strong></li>
<li>ä¸” <strong>å·¦å³å­æ ‘æœ¬èº«ä¹Ÿæ˜¯äºŒå‰æ ‘</strong></li>
</ul>
</li>
</ul>
</blockquote>
<p>ğŸ“Œ å…³é”®ç‚¹åªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>âš ï¸ <strong>å·¦å³ä¹‹åˆ†æ˜¯â€œæœ‰é¡ºåºçš„â€ï¼Œä¸èƒ½éšä¾¿äº¤æ¢</strong></p>
</blockquote>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>âŒ äºŒå‰æ ‘ â‰  åº¦ä¸º 2 çš„æ ‘</li>
<li>âœ… äºŒå‰æ ‘ = <strong>æœ‰å·¦å³è¯­ä¹‰çš„ç»“æ„</strong></li>
</ul>
<hr/>
<h2 data-id="heading-7">å››ã€äºŒå‰æ ‘èŠ‚ç‚¹çš„æœ€å°æ¨¡å‹ï¼ˆJSï¼‰</h2>
<pre><code class="hljs language-kotlin" lang="kotlin">function TreeNode(<span class="hljs-keyword">val</span>){
  <span class="hljs-keyword">this</span>.<span class="hljs-keyword">val</span> = <span class="hljs-keyword">val</span>
  <span class="hljs-keyword">this</span>.left = <span class="hljs-keyword">this</span>.right = <span class="hljs-literal">null</span>
}
</code></pre>
<p><strong>åªæœ‰ 3 ä»¶äº‹ï¼š</strong></p>
<ul>
<li>æ•°æ®åŸŸ <code>val</code></li>
<li>å·¦å­©å­ <code>left</code></li>
<li>å³å­©å­ <code>right</code></li>
</ul>
<p>ğŸ“Œ é¢è¯•æ—¶ä½ åªè¦è®°ä½ï¼š<br/>
<strong>æ ‘ â‰ˆ èŠ‚ç‚¹ + å¼•ç”¨</strong></p>
<hr/>
<h2 data-id="heading-8">äº”ã€ä¸ºä»€ä¹ˆã€Œæ ‘ã€å’Œã€Œé€’å½’ã€å¤©ç”Ÿä¸€å¯¹ï¼Ÿ</h2>
<blockquote>
<p>å› ä¸ºï¼š<strong>æ ‘çš„å®šä¹‰æœ¬èº«å°±æ˜¯é€’å½’çš„</strong></p>
</blockquote>
<ul>
<li>æ ‘ = æ ¹ + å­æ ‘</li>
<li>å­æ ‘ = æ›´å°çš„æ ‘</li>
<li>â€¦â€¦</li>
</ul>
<p>ğŸ“Œ æ‰€ä»¥ä½ åˆ·åˆ°æ ‘é¢˜æ—¶ï¼Œè„‘å­é‡Œå…ˆé—®ä¸€å¥ï¼š</p>
<blockquote>
<p><strong>â€œè¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªå¯ä»¥æ‹†æˆå·¦å³å­æ ‘çš„é‡å¤é—®é¢˜ï¼Ÿâ€</strong></p>
</blockquote>
<p>å¦‚æœç­”æ¡ˆæ˜¯ YES â€”â€”<br/>
ğŸ‘‰ <strong>é€’å½’åŸºæœ¬å°±ç¨³äº†</strong></p>
<hr/>
<h2 data-id="heading-9">å…­ã€äºŒå‰æ ‘éå†ï¼šé¢è¯•æœ€çˆ±è€ƒçš„ 4 ç§æ–¹å¼</h2>
<h3 data-id="heading-10">ä¸€å¥è¯æ€»çº²</h3>
<blockquote>
<p>ğŸ”‘ <strong>å·¦å³å­æ ‘é¡ºåºæ°¸è¿œä¸å˜ï¼Œå˜çš„åªæœ‰â€œæ ¹â€ä»€ä¹ˆæ—¶å€™è¾“å‡º</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-11">1ï¸âƒ£ å‰åºéå†ï¼ˆPreorderï¼‰</h3>
<p>ğŸ‘‰ <strong>æ ¹ â†’ å·¦ â†’ å³</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">preorder</span>(root){
  <span class="hljs-built_in">if</span>(!root) return
  console<span class="hljs-selector-class">.log</span>(root.val)
  <span class="hljs-built_in">preorder</span>(root.left)
  <span class="hljs-built_in">preorder</span>(root.right)
}
</code></pre>
<p>ğŸ“Œ é€‚åˆï¼š</p>
<ul>
<li>æ„å»ºæ ‘</li>
<li>æ‹·è´æ ‘</li>
</ul>
<hr/>
<h3 data-id="heading-12">2ï¸âƒ£ ä¸­åºéå†ï¼ˆInorderï¼‰</h3>
<p>ğŸ‘‰ <strong>å·¦ â†’ æ ¹ â†’ å³</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">inorder</span>(root){
  <span class="hljs-built_in">if</span>(!root) return
  <span class="hljs-built_in">inorder</span>(root.left)
  console<span class="hljs-selector-class">.log</span>(root.val)
  <span class="hljs-built_in">inorder</span>(root.right)
}
</code></pre>
<p>ğŸ“Œ ç»å…¸ç»“è®ºï¼ˆé¢è¯•åŠ åˆ†ï¼‰ï¼š</p>
<blockquote>
<p><strong>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ˜¯æœ‰åºçš„</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">3ï¸âƒ£ ååºéå†ï¼ˆPostorderï¼‰</h3>
<p>ğŸ‘‰ <strong>å·¦ â†’ å³ â†’ æ ¹</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">postorder</span>(root){
  <span class="hljs-built_in">if</span>(!root) return
  <span class="hljs-built_in">postorder</span>(root.left)
  <span class="hljs-built_in">postorder</span>(root.right)
  console<span class="hljs-selector-class">.log</span>(root.val)
}
</code></pre>
<p>ğŸ“Œ é€‚åˆï¼š</p>
<ul>
<li>åˆ é™¤èŠ‚ç‚¹</li>
<li>é‡Šæ”¾èµ„æº</li>
<li>è‡ªåº•å‘ä¸Šè®¡ç®—</li>
</ul>
<hr/>
<h2 data-id="heading-14">ä¸ƒã€å±‚åºéå†ï¼šå”¯ä¸€çš„ã€Œéé€’å½’ä¸»è§’ã€</h2>
<blockquote>
<p>ğŸŒŠ <strong>ä»ä¸Šåˆ°ä¸‹ï¼Œä¸€å±‚ä¸€å±‚</strong></p>
</blockquote>
<h3 data-id="heading-15">æ ¸å¿ƒæ€æƒ³ï¼šé˜Ÿåˆ—ï¼ˆFIFOï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">levelOrder</span>(root){
  <span class="hljs-built_in">if</span>(!root) return <span class="hljs-selector-attr">[]</span>
  const res = <span class="hljs-selector-attr">[]</span>
  const queue = <span class="hljs-selector-attr">[root]</span>

  <span class="hljs-built_in">while</span>(queue.length){
    const node = queue<span class="hljs-selector-class">.shift</span>()
    res<span class="hljs-selector-class">.push</span>(node.val)
    <span class="hljs-built_in">if</span>(node.left) queue<span class="hljs-selector-class">.push</span>(node.left)
    <span class="hljs-built_in">if</span>(node.right) queue<span class="hljs-selector-class">.push</span>(node.right)
  }

  return res
}
</code></pre>
<p>ğŸ“Œ é¢è¯•å®˜æƒ³è€ƒä½ çš„æ˜¯ï¼š</p>
<ul>
<li>ä½ æ˜¯å¦çŸ¥é“ <strong>BFS</strong></li>
<li>ä½ æ˜¯å¦èƒ½æƒ³åˆ° <strong>é˜Ÿåˆ—</strong></li>
</ul>
<hr/>
<h2 data-id="heading-16">å…«ã€æ ‘é¢˜çš„â€œä¸‡èƒ½æ‹†è§£æ¨¡æ¿â€</h2>
<p>æ¯æ¬¡çœ‹åˆ°æ ‘é¢˜ï¼ŒæŒ‰è¿™ä¸ªæµç¨‹èµ°ğŸ‘‡</p>
<h3 data-id="heading-17">â‘  æ˜ç¡®é€’å½’å‡½æ•°çš„å®šä¹‰</h3>
<blockquote>
<p><code>dfs(root)</code> åˆ°åº•è¿”å›ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<hr/>
<h3 data-id="heading-18">â‘¡ æ‰¾é‡å¤å­é—®é¢˜</h3>
<blockquote>
<p>å·¦å­æ ‘æ€ä¹ˆåšï¼Ÿå³å­æ ‘æ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<hr/>
<h3 data-id="heading-19">â‘¢ æ‰¾é€€å‡ºæ¡ä»¶</h3>
<blockquote>
<p><code>root == null</code> æ—¶æ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>
<hr/>
<h3 data-id="heading-20">â‘£ å†³å®šã€Œæ ¹ã€ä»€ä¹ˆæ—¶å€™å¤„ç†</h3>
<ul>
<li>å‰ï¼Ÿä¸­ï¼Ÿåï¼Ÿ</li>
</ul>
<p>ğŸ“Œ <strong>90% çš„æ ‘é¢˜ï¼Œæ­»åœ¨ç¬¬ â‘  æ­¥æ²¡æƒ³æ¸…æ¥š</strong></p>
<hr/>
<h2 data-id="heading-21">ä¹ã€æœ€åï¼šä½ ä¸æ˜¯ä¸ä¼šæ ‘ï¼Œæ˜¯æ²¡â€œå»ºæ¨¡â€</h2>
<p>å¾ˆå¤šäººå­¦æ ‘å¤±è´¥ï¼Œå¹¶ä¸æ˜¯å› ä¸ºä»£ç å†™ä¸å‡ºï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>âŒ æŠŠå®ƒå½“â€œè®°å¿†é¢˜â€</li>
<li>âŒ æ­»èƒŒéå†é¡ºåº</li>
<li>âŒ ä¸ç†è§£é€’å½’çš„æ„ä¹‰</li>
</ul>
<p>çœŸæ­£çš„é«˜æ‰‹ï¼Œçœ‹åˆ°æ ‘åªæƒ³ä¸€ä»¶äº‹ï¼š</p>
<blockquote>
<p><strong>â€œè¿™æ£µæ ‘ï¼Œèƒ½ä¸èƒ½æ‹†æˆå·¦å³å­æ ‘çš„é‡å¤é—®é¢˜ï¼Ÿâ€</strong></p>
</blockquote>
<p>ä¸€æ—¦ä½ å»ºç«‹äº†è¿™ä¸ªè§†è§’ï¼š</p>
<ul>
<li>æ ‘ä¸å†éš¾</li>
<li>é€’å½’ä¸å†æ€•</li>
<li>é¢è¯•ä¸å†æ…Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä»‹ç»ä¸å¼€å‘ç¯å¢ƒå®‰è£…]]></title>    <link>https://juejin.cn/post/7585138968166727716</link>    <guid>https://juejin.cn/post/7585138968166727716</guid>    <pubDate>2025-12-19T05:37:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585138968166727716" data-draft-id="7585206549304787007" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä»‹ç»ä¸å¼€å‘ç¯å¢ƒå®‰è£…"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T05:37:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¨å­åŒå¿—"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779627965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä»‹ç»ä¸å¼€å‘ç¯å¢ƒå®‰è£…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779627965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¨å­åŒå¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:37:30.000Z" title="Fri Dec 19 2025 05:37:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Java ç®€ä»‹</h2>
<p><strong>Java</strong> æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Sun Microsystems çš„ James Gosling äº 1995 å¹´å‘å¸ƒã€‚å…¶æ ¸å¿ƒç‰¹æ€§æ˜¯"<strong>ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ</strong>"ï¼ˆWrite Once, Run Anywhereï¼‰ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹</h3>
<ul>
<li><strong>é¢å‘å¯¹è±¡</strong>ï¼šæ”¯æŒå°è£…ã€ç»§æ‰¿ã€å¤šæ€</li>
<li><strong>è·¨å¹³å°</strong>ï¼šç¼–è¯‘æˆå­—èŠ‚ç ï¼Œè¿è¡Œåœ¨ JVM ä¸Šï¼Œå¯åœ¨ä»»ä½•å¹³å°è¿è¡Œ</li>
<li><strong>ç®€å•æ˜“å­¦</strong>ï¼šè¯­æ³•æ¸…æ™°ï¼Œè‡ªåŠ¨åƒåœ¾å›æ”¶</li>
<li><strong>å®‰å…¨å¥å£®</strong>ï¼šå¼ºç±»å‹æ£€æŸ¥ã€å¼‚å¸¸å¤„ç†ã€å†…å­˜è‡ªåŠ¨ç®¡ç†</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šJIT å³æ—¶ç¼–è¯‘ä¼˜åŒ–ã€æ”¯æŒå¤šçº¿ç¨‹</li>
</ul>
<h3 data-id="heading-2">ä¸»è¦åº”ç”¨é¢†åŸŸ</h3>
<ul>
<li><strong>ä¼ä¸šçº§åº”ç”¨</strong>ï¼šSpringã€Spring Boot - é“¶è¡Œã€é‡‘èã€ç”µå•†ç³»ç»Ÿ</li>
<li><strong>Web å¼€å‘</strong>ï¼šåç«¯æœåŠ¡ã€RESTful API</li>
<li><strong>Android åº”ç”¨</strong>ï¼šç§»åŠ¨åº”ç”¨å¼€å‘</li>
<li><strong>å¤§æ•°æ®</strong>ï¼šHadoopã€Sparkã€Kafkaã€Flink</li>
<li><strong>å¾®æœåŠ¡</strong>ï¼šSpring Cloudã€Dubbo</li>
</ul>
<h3 data-id="heading-3">Java å¹³å°ç‰ˆæœ¬</h3>
<p>Java åˆ†ä¸ºä¸åŒçš„å¹³å°ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ï¼š</p>





























<table><thead><tr><th>å¹³å°</th><th>å…¨ç§°</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Java SE</strong></td><td>Java Standard Edition</td><td>æ ‡å‡†ç‰ˆï¼Œæ ¸å¿ƒå¹³å°</td><td>æ¡Œé¢åº”ç”¨ã€åŸºç¡€å¼€å‘</td></tr><tr><td><strong>Java EE</strong></td><td>Java Enterprise Edition</td><td>ä¼ä¸šç‰ˆï¼ˆå·²æ›´åä¸º Jakarta EEï¼‰</td><td>Webåº”ç”¨ã€ä¼ä¸šçº§ç³»ç»Ÿ</td></tr><tr><td><strong>Java ME</strong></td><td>Java Micro Edition</td><td>å¾®å‹ç‰ˆ</td><td>åµŒå…¥å¼è®¾å¤‡ã€IoT</td></tr></tbody></table>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>Java SE</strong>ï¼šå­¦ä¹  Java çš„åŸºç¡€ï¼ŒåŒ…å« JDKã€JVMã€æ ¸å¿ƒç±»åº“</li>
<li><strong>Java EEï¼ˆç° Jakarta EEï¼‰</strong>ï¼šåŸºäº Java SEï¼Œæä¾›ä¼ä¸šçº§åŠŸèƒ½ï¼ˆServletã€JSPã€EJBã€JPA ç­‰ï¼‰</li>
<li>2017 å¹´ Oracle å°† Java EE æèµ ç»™ Eclipse åŸºé‡‘ä¼šï¼Œæ›´åä¸º <strong>Jakarta EE</strong></li>
<li>åˆå­¦è€…å…ˆå­¦ <strong>Java SE</strong>ï¼ŒæŒæ¡åå†å­¦ä¹  Jakarta EE æˆ– Spring æ¡†æ¶</li>
</ul>
<h3 data-id="heading-4">æ¨èç‰ˆæœ¬</h3>






























<table><thead><tr><th>ç‰ˆæœ¬</th><th>å‘å¸ƒæ—¶é—´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Java 8</td><td>2014</td><td>Lambdaã€Stream APIï¼ˆé‡è¦ç‰ˆæœ¬ï¼‰</td></tr><tr><td>Java 11</td><td>2018</td><td>LTS é•¿æœŸæ”¯æŒç‰ˆæœ¬</td></tr><tr><td>Java 17</td><td>2021</td><td>LTS é•¿æœŸæ”¯æŒç‰ˆæœ¬</td></tr><tr><td>Java 21</td><td>2023</td><td>LTS æœ€æ–°é•¿æœŸæ”¯æŒç‰ˆæœ¬</td></tr></tbody></table>
<p><strong>åˆå­¦è€…æ¨è</strong>ï¼šJava 17 æˆ– Java 21ï¼ˆLTS ç‰ˆæœ¬ï¼‰</p>
<hr/>
<h2 data-id="heading-5">Java å¼€å‘ç¯å¢ƒå®‰è£…</h2>
<h3 data-id="heading-6">1. å®‰è£… JDK</h3>
<h4 data-id="heading-7">Windows å®‰è£…</h4>
<p><strong>ä¸‹è½½ JDK</strong></p>
<ul>
<li><strong>æ¨èï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fadoptium.net%2F" target="_blank" title="https://adoptium.net/" ref="nofollow noopener noreferrer">OpenJDK (Adoptium)</a></strong> - ä¸‹è½½ Java 17 æˆ– 21 LTS ç‰ˆæœ¬</li>
<li>å¤‡é€‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oracle.com%2Fjava%2Ftechnologies%2Fdownloads%2F" target="_blank" title="https://www.oracle.com/java/technologies/downloads/" ref="nofollow noopener noreferrer">Oracle JDK</a>ï¼ˆéœ€ç™»å½•ï¼Œå•†ä¸šä½¿ç”¨éœ€ä»˜è´¹ï¼‰</li>
</ul>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆæ¨è OpenJDKï¼Ÿ</strong></p>
<ul>
<li>âœ… å®Œå…¨å…è´¹ï¼Œå¯å•†ä¸šä½¿ç”¨ï¼ˆOracle JDK å•†ä¸šä½¿ç”¨éœ€ä»˜è´¹ï¼‰</li>
<li>âœ… åŠŸèƒ½ä¸ Oracle JDK å®Œå…¨ä¸€è‡´</li>
<li>âœ… æ— éœ€æ³¨å†Œç™»å½•ï¼Œä¸‹è½½æ›´æ–¹ä¾¿</li>
<li>âœ… ç¤¾åŒºæ”¯æŒå¥½ï¼Œæ›´æ–°åŠæ—¶</li>
</ul>
</blockquote>
<p><strong>å®‰è£…æ­¥éª¤</strong></p>
<ol>
<li>è¿è¡Œå®‰è£…ç¨‹åºï¼ˆå¦‚ <code>jdk-17_windows-x64_bin.exe</code>ï¼‰</li>
<li>é€‰æ‹©å®‰è£…è·¯å¾„ï¼ˆå»ºè®®é»˜è®¤è·¯å¾„ï¼‰</li>
<li>é…ç½®ç¯å¢ƒå˜é‡ï¼š
<ul>
<li>å³é”®"æ­¤ç”µè„‘" â†’ å±æ€§ â†’ é«˜çº§ç³»ç»Ÿè®¾ç½® â†’ ç¯å¢ƒå˜é‡</li>
<li>æ–°å»º <code>JAVA_HOME</code>ï¼š<code>C:\Program Files\Java\jdk-17</code></li>
<li>ç¼–è¾‘ <code>Path</code>ï¼Œæ–°å¢ï¼š<code>%JAVA_HOME%\bin</code></li>
</ul>
</li>
</ol>
<p><strong>éªŒè¯å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash">java -version
javac -version
</code></pre>
<h4 data-id="heading-8">macOS å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ Homebrew å®‰è£…</span>
brew install openjdk@17

<span class="hljs-comment"># é…ç½®ç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH="/usr/local/opt/openjdk@17/bin:$PATH"'</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> ~/.zshrc

<span class="hljs-comment"># éªŒè¯</span>
java -version
</code></pre>
<h4 data-id="heading-9">Linux å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Ubuntu/Debian</span>
sudo apt update
sudo apt install openjdk-17-jdk

<span class="hljs-comment"># CentOS/Fedora</span>
sudo dnf install java-17-openjdk-devel

<span class="hljs-comment"># éªŒè¯</span>
java -version
</code></pre>
<hr/>
<h3 data-id="heading-10">2. é€‰æ‹© IDE</h3>
<p><strong>æ¨è IDE</strong></p>

























<table><thead><tr><th>IDE</th><th>è¯´æ˜</th><th>ä¸‹è½½</th></tr></thead><tbody><tr><td><strong>IntelliJ IDEA</strong></td><td>æœ€å¼ºå¤§ï¼Œå¼ºçƒˆæ¨èï¼ˆç¤¾åŒºç‰ˆå…è´¹ï¼‰</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fidea%2Fdownload%2F" target="_blank" title="https://www.jetbrains.com/idea/download/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td></tr><tr><td>Eclipse</td><td>å…è´¹å¼€æºï¼Œè€ç‰Œ IDE</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.eclipse.org%2Fdownloads%2F" target="_blank" title="https://www.eclipse.org/downloads/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td></tr><tr><td>VS Code</td><td>è½»é‡çº§ï¼ˆéœ€å®‰è£… Java æ‰©å±•ï¼‰</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2F" target="_blank" title="https://code.visualstudio.com/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">3. ç¬¬ä¸€ä¸ªç¨‹åº</h3>
<p><strong>åˆ›å»º HelloWorld.java</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"Hello, World!"</span>);
    }
}
</code></pre>
<p><strong>ç¼–è¯‘è¿è¡Œ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¯‘</span>
javac HelloWorld.java

<span class="hljs-comment"># è¿è¡Œ</span>
java HelloWorld
</code></pre>
<p><strong>ä½¿ç”¨ IDE</strong></p>
<ul>
<li>IntelliJ IDEA: File â†’ New â†’ Project â†’ åˆ›å»ºç±» â†’ å³é”®è¿è¡Œ</li>
</ul>
<hr/>
<h3 data-id="heading-12">4. å¸¸è§é—®é¢˜</h3>
<p><strong><code>javac</code> å‘½ä»¤æ‰¾ä¸åˆ°</strong></p>
<ul>
<li>æ£€æŸ¥ <code>JAVA_HOME</code> å’Œ <code>Path</code> ç¯å¢ƒå˜é‡é…ç½®</li>
<li>é‡å¯å‘½ä»¤è¡Œçª—å£</li>
</ul>
<p><strong>æ‰¾ä¸åˆ°ä¸»ç±»</strong></p>
<ul>
<li>ç¡®ä¿æ–‡ä»¶åä¸ç±»åå®Œå…¨ä¸€è‡´</li>
<li>æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®ç›®å½•æ‰§è¡Œå‘½ä»¤</li>
</ul>
<p><strong>ä¸­æ–‡ä¹±ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">javac -encoding UTF-8 HelloWorld.java
</code></pre>
<hr/>
<h3 data-id="heading-13">5. å­¦ä¹ èµ„æº</h3>
<p><strong>æ¨èä¹¦ç±</strong></p>
<ul>
<li>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹- å…¨é¢æ·±å…¥</li>
<li>ã€ŠHead First Javaã€‹- é€‚åˆåˆå­¦è€…</li>
<li>ã€ŠEffective Javaã€‹- è¿›é˜¶å¿…è¯»</li>
</ul>
<p><strong>åœ¨çº¿èµ„æº</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2Ftutorial%2F" target="_blank" title="https://docs.oracle.com/javase/tutorial/" ref="nofollow noopener noreferrer">Oracle å®˜æ–¹æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.runoob.com%2Fjava%2F" target="_blank" title="https://www.runoob.com/java/" ref="nofollow noopener noreferrer">èœé¸Ÿæ•™ç¨‹</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3433.ç»Ÿè®¡ç”¨æˆ·è¢«æåŠæƒ…å†µ]]></title>    <link>https://juejin.cn/post/7585085798809518107</link>    <guid>https://juejin.cn/post/7585085798809518107</guid>    <pubDate>2025-12-19T03:53:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809518107" data-draft-id="7585406229150171174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3433.ç»Ÿè®¡ç”¨æˆ·è¢«æåŠæƒ…å†µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T03:53:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒä¹‹è¯­æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/4084004879859821"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3433.ç»Ÿè®¡ç”¨æˆ·è¢«æåŠæƒ…å†µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4084004879859821/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒä¹‹è¯­æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:53:55.000Z" title="Fri Dec 19 2025 03:53:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">é¢˜ç›®æè¿°</h4>
<p>æœ‰ä¸€ä¸ªèŠå¤©ç³»ç»Ÿï¼Œå…±æœ‰ <code>numberOfUsers</code> ä¸ªç”¨æˆ·ï¼Œç¼–å·ä» <code>0</code> åˆ° <code>numberOfUsers - 1</code>ã€‚æ‰€æœ‰ç”¨æˆ·åˆå§‹æ—¶éƒ½å¤„äº<strong>åœ¨çº¿çŠ¶æ€</strong>ã€‚</p>
<p>ç³»ç»Ÿä¼šè®°å½•ä¸€ç³»åˆ—äº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶æŒ‰å‘ç”Ÿæ—¶é—´é¡ºåºç»™å‡ºï¼Œä½†è¾“å…¥æ•°ç»„å¯èƒ½æœªæ’åºã€‚æ¯ä¸ªäº‹ä»¶æ˜¯ä»¥ä¸‹ä¸¤ç§ç±»å‹ä¹‹ä¸€ï¼š</p>
<h5 data-id="heading-1">1. <strong>æ¶ˆæ¯äº‹ä»¶ï¼ˆ"MESSAGE"ï¼‰</strong></h5>
<p>æ ¼å¼ï¼š<code>["MESSAGE", "timestamp", "mentions"]</code></p>
<ul>
<li><code>timestamp</code>ï¼šäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´æˆ³ï¼ˆæ­£æ•´æ•°ï¼‰</li>
<li><code>mentions</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ­¤æ¬¡æ¶ˆæ¯ä¸­æåŠçš„ç”¨æˆ·ï¼Œæœ‰ä¸‰ç§å¯èƒ½ï¼š
<ul>
<li><code>"ALL"</code>ï¼šæåŠ<strong>æ‰€æœ‰ç”¨æˆ·</strong>ï¼ˆæ— è®ºæ˜¯å¦åœ¨çº¿ï¼‰</li>
<li><code>"HERE"</code>ï¼šä»…æåŠ<strong>å½“å‰åœ¨çº¿çš„ç”¨æˆ·</strong></li>
<li><code>"id0 id1 id2 ..."</code>ï¼šç©ºæ ¼åˆ†éš”çš„ç”¨æˆ· ID åˆ—è¡¨ï¼ˆå¦‚ <code>"id1 id0 id1"</code>ï¼‰ï¼Œå¯èƒ½åŒ…å«é‡å¤æˆ–ç¦»çº¿ç”¨æˆ·</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæåŠåˆ—è¡¨ä¸­çš„æ¯ä¸ª <code>idX</code> éƒ½ä¼šè¢«å•ç‹¬è®¡æ•°ï¼ˆé‡å¤å‡ºç°åˆ™å¤šæ¬¡è®¡æ•°ï¼‰ã€‚</p>
</blockquote>
<h5 data-id="heading-2">2. <strong>ç¦»çº¿äº‹ä»¶ï¼ˆ"OFFLINE"ï¼‰</strong></h5>
<p>æ ¼å¼ï¼š<code>["OFFLINE", "timestamp", "userId"]</code></p>
<ul>
<li>ç”¨æˆ· <code>userId</code> åœ¨ <code>timestamp</code> æ—¶åˆ»<strong>å¼€å§‹ç¦»çº¿</strong>ï¼Œå¹¶æŒç»­ <strong>60 ä¸ªå•ä½æ—¶é—´</strong>ã€‚</li>
<li>ç”¨æˆ·å°†åœ¨ <code>timestamp + 60</code> æ—¶åˆ»<strong>è‡ªåŠ¨æ¢å¤åœ¨çº¿</strong>ã€‚</li>
<li>è‹¥ç”¨æˆ·å·²åœ¨ç¦»çº¿çŠ¶æ€ï¼Œæ–°çš„ <code>OFFLINE</code> äº‹ä»¶ä¼š<strong>è¦†ç›–ä¹‹å‰çš„ç¦»çº¿ç»“æŸæ—¶é—´</strong>ã€‚</li>
</ul>
<h4 data-id="heading-3">é‡è¦è§„åˆ™</h4>
<ul>
<li>å¤šä¸ªäº‹ä»¶å¯èƒ½å…·æœ‰<strong>ç›¸åŒçš„æ—¶é—´æˆ³</strong>ã€‚æ­¤æ—¶å¿…é¡»<strong>å…ˆå¤„ç†æ‰€æœ‰ "OFFLINE" äº‹ä»¶ï¼Œå†å¤„ç† "MESSAGE" äº‹ä»¶</strong>ã€‚</li>
<li>ç”¨æˆ·æ˜¯å¦åœ¨çº¿ï¼Œä»…å–å†³äºå½“å‰æ—¶é—´ <code>t</code> ä¸è¯¥ç”¨æˆ·çš„<strong>æœ€æ–°ç¦»çº¿ç»“æŸæ—¶é—´</strong>ï¼š
<ul>
<li>è‹¥ <code>å½“å‰æ—¶é—´ t &gt;= ç¦»çº¿ç»“æŸæ—¶é—´</code> â†’ åœ¨çº¿</li>
<li>å¦åˆ™ â†’ ç¦»çº¿</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">è¦æ±‚</h4>
<p>è¯·è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º <code>numberOfUsers</code> çš„æ•´æ•°æ•°ç»„ <code>result</code>ï¼Œå…¶ä¸­ <code>result[i]</code> è¡¨ç¤ºç”¨æˆ· <code>i</code> åœ¨æ‰€æœ‰æ¶ˆæ¯ä¸­è¢«æåŠçš„æ€»æ¬¡æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countMentions(<span class="hljs-type">int</span> numberOfUsers, List&lt;List&lt;String&gt;&gt; events) {
        List&lt;List&lt;String&gt;&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(events);
        Collections.sort(list, (a, b) -&gt; {
            <span class="hljs-type">int</span> <span class="hljs-variable">timeA</span> <span class="hljs-operator">=</span> Integer.parseInt(a.get(<span class="hljs-number">1</span>));
            <span class="hljs-type">int</span> <span class="hljs-variable">timeB</span> <span class="hljs-operator">=</span> Integer.parseInt(b.get(<span class="hljs-number">1</span>));
            <span class="hljs-keyword">if</span> (timeA != timeB) {
                <span class="hljs-keyword">return</span> Integer.compare(timeA, timeB);
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">typeA</span> <span class="hljs-operator">=</span> a.get(<span class="hljs-number">0</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">typeB</span> <span class="hljs-operator">=</span> b.get(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"OFFLINE"</span>.equals(typeA) &amp;&amp; <span class="hljs-string">"MESSAGE"</span>.equals(typeB)) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"MESSAGE"</span>.equals(typeA) &amp;&amp; <span class="hljs-string">"OFFLINE"</span>.equals(typeB)) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        });

        <span class="hljs-type">int</span>[] mentions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[numberOfUsers];
        <span class="hljs-type">int</span>[] onlineUntil = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[numberOfUsers]; <span class="hljs-comment">// åˆå§‹ä¸º 0ï¼Œè¡¨ç¤ºä¸€å¼€å§‹å°±åœ¨çº¿</span>

        <span class="hljs-keyword">for</span> (List&lt;String&gt; e : list) {
            <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> e.get(<span class="hljs-number">0</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> Integer.parseInt(e.get(<span class="hljs-number">1</span>));
            <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> e.get(<span class="hljs-number">2</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-string">"OFFLINE"</span>.equals(type)) {
                <span class="hljs-type">int</span> <span class="hljs-variable">uid</span> <span class="hljs-operator">=</span> Integer.parseInt(data);
                onlineUntil[uid] = t + <span class="hljs-number">60</span>;
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// MESSAGE</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"ALL"</span>.equals(data)) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numberOfUsers; i++) {
                        mentions[i]++;
                    }
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"HERE"</span>.equals(data)) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numberOfUsers; i++) {
                        <span class="hljs-keyword">if</span> (onlineUntil[i] &lt;= t) {
                            mentions[i]++;
                        }
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">for</span> (String token : data.split(<span class="hljs-string">" "</span>)) {
                        <span class="hljs-keyword">if</span> (token.startsWith(<span class="hljs-string">"id"</span>)) {
                            <span class="hljs-type">int</span> <span class="hljs-variable">uid</span> <span class="hljs-operator">=</span> Integer.parseInt(token.substring(<span class="hljs-number">2</span>));
                            mentions[uid]++;
                        }
                    }
                }
            }
        }

        <span class="hljs-keyword">return</span> mentions;
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">Solution</span> <span class="hljs-variable">sol</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Solution</span>();
    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
    String[][] events = {
        {<span class="hljs-string">"MESSAGE"</span>, <span class="hljs-string">"10"</span>, <span class="hljs-string">"id1 id0"</span>},
        {<span class="hljs-string">"OFFLINE"</span>, <span class="hljs-string">"11"</span>, <span class="hljs-string">"0"</span>},
        {<span class="hljs-string">"MESSAGE"</span>, <span class="hljs-string">"71"</span>, <span class="hljs-string">"HERE"</span>}
    };

    <span class="hljs-type">int</span>[] res = sol.countMentions(n, events);
    System.out.println(Arrays.toString(res)); <span class="hljs-comment">// è¾“å‡º: [2, 2]</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[sdkmanå®‰è£…ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7585105375794593826</link>    <guid>https://juejin.cn/post/7585105375794593826</guid>    <pubDate>2025-12-19T04:35:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585105375794593826" data-draft-id="7585289701793415194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="sdkmanå®‰è£…ä½¿ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-19T04:35:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‹å°–çš„ç°å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/4380914057753640"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            sdkmanå®‰è£…ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4380914057753640/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‹å°–çš„ç°å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T04:35:05.000Z" title="Fri Dec 19 2025 04:35:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SDKMAN å®‰è£…æŒ‡å— - è‡ªå®šä¹‰å®‰è£…åˆ° /opt/sdkman</h2>
<h3 data-id="heading-1">æ¦‚è¿°</h3>
<p>ä»‹ç»å¦‚ä½•åœ¨ macOS M4 ç³»ç»Ÿä¸Šå°† SDKMAN å®‰è£…åˆ°è‡ªå®šä¹‰ç›®å½• <code>/opt/sdkman</code>ã€‚</p>
<h3 data-id="heading-2">å®‰è£…æ­¥éª¤</h3>
<h4 data-id="heading-3">1. æ¸…ç†ç°æœ‰é…ç½®ï¼ˆé‡è¦ï¼ï¼‰</h4>
<p>å¦‚æœä¹‹å‰å®‰è£…è¿‡ SDKMANï¼Œéœ€è¦å…ˆæ¸…ç†ç°æœ‰é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰ç°æœ‰é…ç½®</span>
<span class="hljs-built_in">cat</span> ~/.zshrc | grep -i sdkman

<span class="hljs-comment"># å¦‚æœæœ‰é…ç½®ï¼Œåˆ é™¤ ~/.zshrc ä¸­çš„ SDKMAN ç›¸å…³è¡Œ</span>
<span class="hljs-comment"># å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘æˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤</span>
sed -i <span class="hljs-string">''</span> <span class="hljs-string">'/SDKMAN/d'</span> ~/.zshrc

<span class="hljs-comment"># å–æ¶ˆå½“å‰ä¼šè¯ä¸­çš„ SDKMAN_DIR ç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">unset</span> SDKMAN_DIR

<span class="hljs-comment"># åˆ é™¤å¯èƒ½å­˜åœ¨çš„æ—§å®‰è£…ç›®å½•</span>
<span class="hljs-built_in">rm</span> -rf ~/.sdkman
</code></pre>
<h4 data-id="heading-4">2. åˆ›å»ºç›®å½•å¹¶è®¾ç½®æƒé™</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º sdkman ç›®å½•</span>
sudo <span class="hljs-built_in">mkdir</span> -p /opt/sdkman

<span class="hljs-comment"># è®¾ç½®ç›®å½•æƒé™</span>
sudo <span class="hljs-built_in">chown</span> -R <span class="hljs-variable">$USER</span>:staff /opt/sdkman
</code></pre>
<h4 data-id="heading-5">3. éªŒè¯æƒé™è®¾ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•æ˜¯å¦å¯ä»¥åœ¨ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶</span>
<span class="hljs-built_in">touch</span> /opt/sdkman/test.txt
<span class="hljs-built_in">ls</span> -la /opt/sdkman/
<span class="hljs-built_in">rm</span> /opt/sdkman/test.txt
</code></pre>
<h4 data-id="heading-6">4. å®‰è£… SDKMAN</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ç¯å¢ƒå˜é‡æŒ‡å®šå®‰è£…ç›®å½•</span>
SDKMAN_DIR=<span class="hljs-string">"/opt/sdkman"</span> curl -s <span class="hljs-string">"https://get.sdkman.io"</span> | bash
</code></pre>
<h4 data-id="heading-7">5. å¤„ç†é»˜è®¤å®‰è£…ä½ç½®</h4>
<p>å¦‚æœå®‰è£…è„šæœ¬å°†æ–‡ä»¶å®‰è£…åˆ°äº† <code>~/.sdkman</code>ï¼Œéœ€è¦ç§»åŠ¨åˆ°ç›®æ ‡ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç§»åŠ¨æ–‡ä»¶åˆ°ç›®æ ‡ç›®å½•</span>
<span class="hljs-built_in">mv</span> ~/.sdkman/* /opt/sdkman/

<span class="hljs-comment"># åˆ é™¤é»˜è®¤ç›®å½•</span>
<span class="hljs-built_in">rm</span> -rf ~/.sdkman
</code></pre>
<h4 data-id="heading-8">6. æ›´æ–°é…ç½®æ–‡ä»¶</h4>
<p>ä¿®æ”¹ <code>~/.zshrc</code> æ–‡ä»¶ä¸­çš„ SDKMAN è·¯å¾„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ sed å‘½ä»¤æ›´æ–°è·¯å¾„</span>
sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s|$HOME/.sdkman|/opt/sdkman|g'</span> ~/.zshrc
</code></pre>
<p>é…ç½®æ–‡ä»¶åº”è¯¥åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!</span>
<span class="hljs-built_in">export</span> SDKMAN_DIR=<span class="hljs-string">"/opt/sdkman"</span>
[[ -s <span class="hljs-string">"/opt/sdkman/bin/sdkman-init.sh"</span> ]] &amp;&amp; <span class="hljs-built_in">source</span> <span class="hljs-string">"/opt/sdkman/bin/sdkman-init.sh"</span>
</code></pre>
<h4 data-id="heading-9">7. éªŒè¯å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡æ–°åŠ è½½é…ç½®</span>
<span class="hljs-built_in">source</span> ~/.zshrc

<span class="hljs-comment"># æ£€æŸ¥ç‰ˆæœ¬</span>
sdk version

<span class="hljs-comment"># æŸ¥çœ‹å¸®åŠ©</span>
sdk <span class="hljs-built_in">help</span>
</code></pre>
<h3 data-id="heading-10">é¢„æœŸè¾“å‡º</h3>
<p>æˆåŠŸå®‰è£…åï¼Œ<code>sdk version</code> åº”è¯¥æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">SDKMAN!
<span class="hljs-section">script: 5.20.0</span>
<span class="hljs-section">native: 0.7.14 (macos aarch64)</span>
</code></pre>
<h3 data-id="heading-11">å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-12">æƒé™é—®é¢˜</h4>
<p>å¦‚æœé‡åˆ°æƒé™æ‹’ç»é”™è¯¯ï¼Œç¡®ä¿ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>sudo</code> åˆ›å»º <code>/opt/sdkman</code> ç›®å½•</li>
<li>æ­£ç¡®è®¾ç½®ç›®å½•æ‰€æœ‰è€…ä¸ºå½“å‰ç”¨æˆ·</li>
<li>ç›®å½•æ‰€æœ‰è€…è®¾ç½®æ­£ç¡®</li>
</ul>
<h4 data-id="heading-13">å®‰è£…ä½ç½®é—®é¢˜</h4>
<p>SDKMAN å®‰è£…è„šæœ¬é»˜è®¤å®‰è£…åˆ° <code>~/.sdkman</code>ï¼Œéœ€è¦æ‰‹åŠ¨ç§»åŠ¨æ–‡ä»¶å¹¶æ›´æ–°é…ç½®ã€‚</p>
<h4 data-id="heading-14">é…ç½®æ–‡ä»¶é—®é¢˜</h4>
<p>ç¡®ä¿ <code>~/.zshrc</code> ä¸­çš„è·¯å¾„æŒ‡å‘ <code>/opt/sdkman</code> è€Œä¸æ˜¯ <code>~/.sdkman</code>ã€‚</p>
<h4 data-id="heading-15">å®‰è£…å¤±è´¥é—®é¢˜</h4>
<p>å¦‚æœå®‰è£…æ—¶æç¤º"You already have SDKMAN installed"ä½†å®é™…æ— æ³•ä½¿ç”¨ï¼š</p>
<ul>
<li>æ£€æŸ¥ <code>~/.zshrc</code> æ˜¯å¦æœ‰æ—§çš„ SDKMAN é…ç½®</li>
<li>ä½¿ç”¨ <code>unset SDKMAN_DIR</code> æ¸…é™¤ç¯å¢ƒå˜é‡</li>
<li>åˆ é™¤æ—§é…ç½®åé‡æ–°å®‰è£…</li>
</ul>
<h3 data-id="heading-16">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºå¯ç”¨çš„ Java ç‰ˆæœ¬</span>
sdk list java

<span class="hljs-comment"># å®‰è£… Java</span>
sdk install java 17.0.0-tem

<span class="hljs-comment"># åˆ‡æ¢ Java ç‰ˆæœ¬</span>
sdk use java 17.0.0-tem

<span class="hljs-comment"># è®¾ç½®é»˜è®¤ç‰ˆæœ¬</span>
sdk default java 17.0.0-tem
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ2ï¼‰ï¼šå®ç°å¢ã€åˆ ã€æ”¹ã€æŸ¥åŸºç¡€æ“ä½œ]]></title>    <link>https://juejin.cn/post/7585085798809436187</link>    <guid>https://juejin.cn/post/7585085798809436187</guid>    <pubDate>2025-12-19T03:47:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809436187" data-draft-id="7584722109583786027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ2ï¼‰ï¼šå®ç°å¢ã€åˆ ã€æ”¹ã€æŸ¥åŸºç¡€æ“ä½œ"/> <meta itemprop="keywords" content="Mongoose"/> <meta itemprop="datePublished" content="2025-12-19T03:47:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹å—¨çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2137106336976183"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mongooseæ“ä½œMongoDBæ•°æ®åº“ï¼ˆ2ï¼‰ï¼šå®ç°å¢ã€åˆ ã€æ”¹ã€æŸ¥åŸºç¡€æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2137106336976183/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹å—¨çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:47:01.000Z" title="Fri Dec 19 2025 03:47:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç‹å—¨çš®ï¼Œä¸€å<code>ä¸»ä¸šå‰ç«¯ï¼Œå‰¯ä¸šå…¨æ ˆ</code>çš„ç¨‹åºå‘˜ï¼Œåœ¨è¿™é‡Œæˆ‘ä¼šåˆ†äº«å…³äº<code>å‰ç«¯è¿›é˜¶å…¨æ ˆçš„å¸¸ç”¨æŠ€æœ¯</code>Â å’ŒÂ <code>åŸºæœ¬å…¥é—¨æ“ä½œ</code>ã€‚ å¦‚æœæˆ‘çš„æ–‡ç« èƒ½è®©æ‚¨æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿ï¼ˆè¯„è®ºï¼Œç‚¹èµï¼Œå…³æ³¨ï¼‰ã€‚</p>
<hr/>
<p>æœ¬èŠ‚å†…å®¹ï¼Œæˆ‘ä»¬é€šè¿‡ <code>mongoose</code> å®šä¹‰å¥½æ•°æ®æ¨¡å‹ï¼Œå¹¶å®ç°å¯¹æ•°æ®åº“<strong>å¢ã€åˆ ã€æ”¹ã€æŸ¥</strong>åŸºæœ¬çš„æ“ä½œã€‚</p>
<h3 data-id="heading-0">å®šä¹‰æ•°æ®æ¨¡å‹</h3>
<p>åœ¨é¡¹ç›®æ ¹å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å‘½åä¸º <code>modal</code> å’Œ <code>router</code>ï¼Œ</p>
<p>å…¶ä¸­ <code>modal</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º <code>modal.js</code> æ–‡ä»¶ç”¨æ¥å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œ<code>router</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º <code>router.js</code> æ–‡ä»¶æ–¹ä¾¿åç»­åˆ›å»ºå¢ã€åˆ ã€æ”¹ã€æŸ¥è¯·æ±‚æ¥å£ã€‚</p>
<pre><code class="hljs language-é¡¹ç›®ç»“æ„" lang="é¡¹ç›®ç»“æ„">ğŸ“¦node_mongo
 â”£ ğŸ“‚model
 â”ƒ â”— ğŸ“œmodal.js
 â”£ ğŸ“‚router
 â”ƒ â”— ğŸ“œrouter.js
 â”£ ğŸ“œ.env
 â”£ ğŸ“œindex.js
 â”— ğŸ“œpackage.json
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œé¦–å…ˆåœ¨ <code>modal.js</code> ä¸­å»ºç«‹ <code>Schema</code> æ•°æ®æ–‡æ¡£ã€‚</p>
<p><strong>Schema</strong> æ˜¯ä»€ä¹ˆï¼Ÿ å®ƒç±»ä¼¼äºä¼ ç»Ÿæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ï¼Œå®šä¹‰äº†é›†åˆé‡Œæ¯ä¸ªæ–‡æ¡£ä¸­åº”è¯¥æœ‰çš„å­—æ®µï¼Œä»¥åŠè¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹ã€‚</p>
<pre><code class="hljs language-modal.js" lang="modal.js">// å¯¼å…¥mongoose
import mongoose from 'mongoose'

// åˆ›å»ºSchemaæ–‡æ¡£
const carSchema = new mongoose.Schema({
  type: String,
  brand: String,
  price: Number,
})

// å¯¼å‡ºæ¨¡å‹
export const carModel = mongoose.model('car', carSchema)
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç¬¬ä¸€æ­¥å…ˆå°† mongoose æ ¸å¿ƒä¾èµ–åº“å¯¼å…¥ã€‚</p>
<p>å…¶æ¬¡ä»¥æ±½è½¦ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª <code>carSchema</code> çš„å®ä¾‹å¯¹è±¡ï¼Œå¯¹è±¡ä¸­åŒ…å« <code>type</code>ã€<code>brand</code>ã€<code>price</code> ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«ä»£è¡¨å‹å·ï¼Œå“ç‰Œå’Œä»·æ ¼ï¼Œå…¶ä¸­å‰ä¸¤ä¸ªä¸ºæ•°æ®ç±»å‹ä¸ºString(å­—ç¬¦ä¸²)ï¼Œä»·æ ¼çš„æ•°æ®ç±»å‹ä¸ºNumber(æ•°å­—)</p>
<p>æœ€åï¼Œä½¿ç”¨ <code>mongoose.model</code> å°†æ•°æ®æ¨¡å‹å¯¼å‡ºï¼Œæ–¹ä¾¿æ¥å£çš„ä½¿ç”¨ï¼Œ<code>mongoose.model</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•° <code>car</code> æ˜¯MongoDBæ•°æ®åº“ä¸‹é›†åˆçš„åç§°ï¼ˆ<strong>æ³¨æ„ï¼šé›†åˆåˆ›å»ºæ—¶ä¼šåç§°è‡ªåŠ¨ä¿®æ”¹ä¸ºå¤æ•°ï¼Œæ¯”å¦‚ä»£ç ä¸­ä¼ é€’å‚æ•°ä¸º <code>car</code>ï¼Œæ•°æ®åº“é›†åˆçš„åç§°ä¼šå˜ä¸º <code>cars</code></strong>ï¼‰</p>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>carSchema</code>ï¼Œå°±æ˜¯ä¹‹å‰åˆ›å»ºçš„æ–‡æ¡£å®ä¾‹å¯¹è±¡ã€‚</p>
<h3 data-id="heading-1">å¸¸ç”¨æ¥å£çš„åˆ›å»º</h3>
<p>å®Œæˆæ•°æ®æ¨¡å‹çš„å®šä¹‰åï¼Œæˆ‘ä»¬æ¥åˆ° <code>router</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œ</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>asyncHandler.js</code> ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªç®€å•çš„é”™è¯¯å¤„ç†åŒ…è£…å‡½æ•°ï¼Œç»Ÿä¸€å¤„ç†é”™è¯¯æ ¼å¼ã€‚</p>
<pre><code class="hljs language-asyncHandler.js" lang="asyncHandler.js">// å¼‚æ­¥é”™è¯¯å¤„ç†åŒ…è£…å‡½æ•°
export const asyncHandler = (fn) =&gt; {
  return (req, res, next) =&gt; {
    Promise.resolve(fn(req, res, next)).catch((error) =&gt; {
      console.error('é”™è¯¯:', error.message)
      // ç»Ÿä¸€è¿”å›é”™è¯¯æ ¼å¼
      res.status(500).json({
        success: false,
        message: error.message || 'æœåŠ¡å™¨é”™è¯¯'
      })
    })
  }
}
</code></pre>
<p>ä¹‹åæŠŠæ•°æ®æ¨¡å‹ <code>carModel</code> å’Œ å¼‚æ­¥å¤„ç†å‡½æ•° <code>asyncHandler.js</code> å¯¼å…¥ <code>router.js</code>ã€‚</p>
<pre><code class="hljs language-router.js" lang="router.js">import express from 'express'
const router = express.Router()

// å¯¼å…¥model
import { carModel } from '../model/modal.js'
// å¯¼å…¥é”™è¯¯å¤„ç†åŒ…è£…å‡½æ•°
import { asyncHandler } from './asyncHandler.js'
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ <code>Restful API</code> åˆ†åˆ«æŒ‰é¡ºåºåˆ›å»ºå¢ã€åˆ ã€æ”¹ã€æŸ¥å››ä¸ªæ¥å£å¹¶å°†è·¯ç”±å¯¼å‡ºï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-router.js" lang="router.js">// æ–°å¢æ±½è½¦æ•°æ®
router.post('/addCars', asyncHandler(async (req, res) =&gt; {
  const { type, brand, price } = req.body
  const car = new carModel({ type, brand, price })
  await car.save()
  res.json(car)
}))

// åˆ é™¤æ±½è½¦æ•°æ®
router.delete('/deleteCars/:id', asyncHandler(async (req, res) =&gt; {
  //è·å–åˆ é™¤id
  const { id } = req.params
  await carModel.findByIdAndDelete(id)
  res.json({ message: 'æ•°æ®åˆ é™¤æˆåŠŸï¼' })
}))

// æ›´æ–°æ±½è½¦æ•°æ®
router.put('/updateCars/:id', asyncHandler(async (req, res) =&gt; {
  //è·å–æ›´æ–°æ•°æ®id
  const { id } = req.params
  const { type, brand, price } = req.body
  const car = await carModel.findByIdAndUpdate(id, { type, brand, price }, { new: true })
  res.json(car)
}))

// æŸ¥è¯¢æ‰€æœ‰æ±½è½¦æ•°æ®
router.get('/getAllCars', asyncHandler(async (req, res) =&gt; {
  const cars = await carModel.find()
  res.json(cars)
}))

// å¯¼å‡ºè·¯ç”±
export default router
</code></pre>
<h3 data-id="heading-2">æ¥å£æµ‹è¯•</h3>
<p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fapifox.com%2F" target="_blank" title="https://apifox.com/" ref="nofollow noopener noreferrer">Apifox</a> æ¥æµ‹è¯•ä¸€ä¸‹æ¥å£å’Œæ•°æ®åº“æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p>
<p>å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½• <code>index.js</code> é‡Œå¯¼å…¥æ¥å£è·¯ç”±ã€‚</p>
<pre><code class="hljs language-index.js" lang="index.js">// å¯¼å…¥è·¯ç”±
import router from './router/router.js'
// å°†apiè®¾ç½®ä¸ºå…¬å…±è·¯å¾„ï¼Œä¸ç”¨æ¯æ¬¡éƒ½åœ¨è·¯ç”±å‰é¢åŠ /api
app.use('/api', router)
</code></pre>
<p>ä½¿ç”¨ç»ˆç«¯è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œ <code>node index.js</code> å¯åŠ¨æœåŠ¡ã€‚</p>
<p>æˆ‘ä»¬ä»¥æ–°å¢ä¸€æ¡æ±½è½¦æ•°æ®æ¥å£ä¸ºä¾‹ï¼Œè¯·æ±‚åœ°å€å’Œä¼ é€’å‚æ•°å‚è€ƒä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f36ea5d7d69468088192c9bc41340ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Zeo55qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766720820&amp;x-signature=8qhYb3j1ugSRgndOqbvgMTLQotc%3D" alt="QQæˆªå›¾20251219105406.png" loading="lazy"/></p>
<p>ç‚¹å‡» "å‘é€" è¯·æ±‚ï¼Œå¦‚æœæ·»åŠ æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹æ–¹æ§åˆ¶å°çœ‹åˆ°è¿”å›çš„æ•°æ®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30060dac92a04de9a78322da6915147a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Zeo55qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766720820&amp;x-signature=vN%2BzWcxJRG%2FWi0vb4tapvfuRWJw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºäº†ç¡®è®¤æ•°æ®æ·»åŠ æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ Navicat ç™»å½•æ•°æ®åº“æŸ¥çœ‹ä¸€ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bd1348ea60548ffbddacfa6b09b92eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Zeo55qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766720820&amp;x-signature=%2BjiYFSLL%2FGvwtdlUMaCP5RqUR3c%3D" alt="QQæˆªå›¾20251219111525.png" loading="lazy"/></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°åœ¨ <code>test</code> æ•°æ®åº“ä¸‹å·²ç»æˆåŠŸå»ºç«‹äº† <code>cars</code> é›†åˆï¼Œå¹¶ä¸”æœ‰äº†ä¸€æ¡æ•°æ®ã€‚å…¶å®ƒçš„æ¥å£å¤§å®¶å¯ä»¥è‡ªè¡Œè¿›è¡Œæµ‹è¯•ã€‚</p>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä½¿ç”¨ <code>Mongoose</code> å®ç°å¯¹æ•°æ®åº“å¢åˆ æ”¹æŸ¥çš„åŸºæœ¬æ“ä½œã€‚</p>
<p>ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è®²è§£<strong>èšåˆã€æ¡ä»¶æŸ¥è¯¢ã€åˆ†é¡µ</strong>æ’åºç­‰ <code>Mongoose</code> å¯¹æ•°æ®åº“çš„è¿›é˜¶æ“ä½œã€‚</p>
<p>å¦‚æœæˆ‘çš„æ–‡ç« èƒ½è®©æ‚¨æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿ï¼ˆè¯„è®ºï¼Œç‚¹èµï¼Œå…³æ³¨ï¼‰ï¼Œæ„Ÿè°¢ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueå›½é™…åŒ–å®ç°å¤šè¯­è¨€æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7585085798809600027</link>    <guid>https://juejin.cn/post/7585085798809600027</guid>    <pubDate>2025-12-19T04:46:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809600027" data-draft-id="7585084491895635994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueå›½é™…åŒ–å®ç°å¤šè¯­è¨€æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-19T04:46:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Aniugel"/> <meta itemprop="url" content="https://juejin.cn/user/3034307824198407"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueå›½é™…åŒ–å®ç°å¤šè¯­è¨€æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307824198407/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Aniugel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T04:46:01.000Z" title="Fri Dec 19 2025 04:46:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h3 data-id="heading-0">ä¸€ã€ç›®å½•ç»“æ„è®¾è®¡</h3>
<p>å»ºè®®å°†å¤šè¯­è¨€èµ„æºé›†ä¸­ç®¡ç†ï¼Œå…¸å‹ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">src/
â”œâ”€â”€ lang/                # å¤šè¯­è¨€æ ¸å¿ƒç›®å½•
â”‚   â”œâ”€â”€ index.js         # i18n é…ç½®å…¥å£
â”‚   â”œâ”€â”€ zh.js            # ä¸­æ–‡
â”‚   â”œâ”€â”€ en.js            # è‹±æ–‡
â”‚   â””â”€â”€ ar.js            # é˜¿æ‹‰ä¼¯
â”œâ”€â”€ main.js              # Vue å…¥å£
â”œâ”€â”€ components/          # ä¸šåŠ¡ç»„ä»¶
â””â”€â”€ views/               # é¡µé¢ç»„ä»¶
</code></pre>
<h3 data-id="heading-1">äºŒã€ç¼–å†™è¯­è¨€åŒ…</h3>
<p>æ¯ä¸ªè¯­è¨€åŒ…å¯¼å‡º<strong>é”®å€¼å¯¹</strong>æ ¼å¼çš„æ–‡æœ¬èµ„æºï¼Œé”®åä¿æŒç»Ÿä¸€ï¼Œå€¼ä¸ºå¯¹åº”è¯­è¨€çš„æ–‡æœ¬ã€‚</p>
<ul>
<li><code>src/lang/zh.js</code>ï¼ˆä¸­æ–‡ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">common</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Vue2 é¡¹ç›®'</span>,
    <span class="hljs-attr">welcome</span>: <span class="hljs-string">'æ¬¢è¿ {name} ç™»å½•ï¼Œä»Šæ—¥å‰©ä½™æ¬¡æ•°ï¼š{count}'</span>,
    <span class="hljs-attr">cancel</span>: <span class="hljs-string">'å–æ¶ˆ'</span>,
    <span class="hljs-attr">confirm</span>: <span class="hljs-string">'ç¡®è®¤'</span>,
    <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¯·è¾“å…¥å†…å®¹'</span>,
    <span class="hljs-attr">item</span>: <span class="hljs-string">'é¡¹ç›®'</span>, <span class="hljs-comment">// å•æ•° | å¤æ•°</span>
    <span class="hljs-attr">count</span>: <span class="hljs-string">'æ‚¨æœ‰ {count} ä¸ªé¡¹ç›® | æ‚¨æœ‰ {count} ä¸ªé¡¹ç›®'</span>,
  },
  <span class="hljs-attr">login</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç™»å½•'</span>,
    <span class="hljs-attr">user</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'ç”¨æˆ·å'</span>,
    },
  },
}

</code></pre>
<ul>
<li><code>src/lang/en.js</code>ï¼ˆè‹±æ–‡ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">common</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Vue2 Lighthouse Demo'</span>,
    <span class="hljs-attr">welcome</span>: <span class="hljs-string">'welcome {name} login, today remaining times: {count}'</span>,
    <span class="hljs-attr">cancel</span>: <span class="hljs-string">'Cancel'</span>,
    <span class="hljs-attr">confirm</span>: <span class="hljs-string">'Confirm'</span>,
    <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'Please enter content'</span>,
    <span class="hljs-attr">item</span>: <span class="hljs-string">'item | items'</span>, <span class="hljs-comment">// å•æ•° | å¤æ•°</span>
    <span class="hljs-attr">count</span>: <span class="hljs-string">'You have {count} item | You have {count} items'</span>,
  },
  <span class="hljs-attr">login</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'User Login'</span>,
    <span class="hljs-attr">user</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Username'</span>,
    },
  }
}
</code></pre>
<ul>
<li><code>src/lang/ar.js</code>ï¼ˆé˜¿æ‹‰ä¼¯ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é˜¿æ‹‰ä¼¯è¯­è¯­è¨€åŒ… - æ³¨æ„ï¼šé˜¿æ‹‰ä¼¯è¯­æ˜¯RTLï¼ˆä»å³åˆ°å·¦ï¼‰è¯­è¨€</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">common</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Ø¹Ø±Ø¶ Vue2 Ù„Ù€ Lighthouse'</span>,
    <span class="hljs-attr">welcome</span>: <span class="hljs-string">'Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ {name} ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„Ù…Ø±Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø§Ù„ÙŠÙˆÙ…: {count}'</span>,
    <span class="hljs-attr">cancel</span>: <span class="hljs-string">'Ø¥Ù„ØºØ§Ø¡'</span>,
    <span class="hljs-attr">confirm</span>: <span class="hljs-string">'ØªØ£ÙƒÙŠØ¯'</span>,
    <span class="hljs-attr">submit</span>: <span class="hljs-string">'ØªØ£ÙƒÙŠØ¯ØªØ£ ØªØ£ÙƒÙŠØ¯ØªØ£ ØªØ£ÙƒÙŠØ¯ØªØ£ ÙƒÙŠØ¯ØªØ£ÙƒÙŠØ¯'</span>,
    <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰'</span>,
    <span class="hljs-attr">item</span>: <span class="hljs-string">'Ø¹Ù†ØµØ± | Ø¹Ù†Ø§ØµØ±'</span>, <span class="hljs-comment">// Ù…ÙØ±Ø¯ | Ø¬Ù…Ø¹</span>
    <span class="hljs-attr">count</span>: <span class="hljs-string">'Ù„Ø¯ÙŠÙƒ {count} Ø¹Ù†ØµØ± | Ù„Ø¯ÙŠÙƒ {count} Ø¹Ù†Ø§ØµØ±'</span>,
    <span class="hljs-attr">price</span>: <span class="hljs-string">'Ø§Ù„Ø³Ø¹Ø±: {amount}'</span>, <span class="hljs-comment">// å¸¦å˜é‡çš„æ–‡æœ¬ï¼ˆå˜é‡ä½ç½®ä¸å½±å“RTLï¼‰</span>
    <span class="hljs-attr">mixedText</span>: <span class="hljs-string">"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ÙŠ: &lt;span dir='ltr'&gt;#12345&lt;/span&gt;"</span>, <span class="hljs-comment">// æ··åˆæ–‡æœ¬ï¼ˆæ•°å­—å¼ºåˆ¶LTRï¼‰</span>
  },
  <span class="hljs-attr">login</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'</span>,
    <span class="hljs-attr">user</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'</span>,
    },
  },
}

</code></pre>
<h3 data-id="heading-2">ä¸‰ã€é…ç½® vue-i18n</h3>
<p>åœ¨Â <code>src/lang/index.js</code>Â ä¸­åˆå§‹åŒ– i18n å®ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueI18</span>n <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-i18n'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueI18</span>n)

<span class="hljs-comment">// æŒ‰éœ€å¼•å…¥é…ç½®</span>
<span class="hljs-comment">// const messages = {</span>
<span class="hljs-comment">//   en: () =&gt; import('./en'),</span>
<span class="hljs-comment">//   zh: () =&gt; import('./zh'),</span>
<span class="hljs-comment">// }</span>

<span class="hljs-keyword">import</span> en <span class="hljs-keyword">from</span> <span class="hljs-string">'./en'</span>
<span class="hljs-keyword">import</span> zh <span class="hljs-keyword">from</span> <span class="hljs-string">'./zh'</span>
<span class="hljs-keyword">import</span> ar <span class="hljs-keyword">from</span> <span class="hljs-string">'./ar'</span> <span class="hljs-comment">// å¯¼å…¥é˜¿æ‹‰ä¼¯è¯­</span>
<span class="hljs-keyword">const</span> messages = {
  en,
  zh,
  ar, <span class="hljs-comment">// æ³¨å†Œé˜¿æ‹‰ä¼¯è¯­</span>
}
<span class="hljs-comment">// è·å–é»˜è®¤è¯­è¨€ï¼ˆä¼˜å…ˆçº§ï¼šæœ¬åœ°å­˜å‚¨ &gt; æµè§ˆå™¨è¯­è¨€ &gt; ç®€ä½“ä¸­æ–‡ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getDefaultLang</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> lang =
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'lang'</span>) || navigator.<span class="hljs-property">language</span> || navigator.<span class="hljs-property">userLanguage</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'lang'</span>, lang)

  <span class="hljs-keyword">if</span> (lang &amp;&amp; messages[lang]) {
    <span class="hljs-comment">// è®¾ç½®htmlæ ¹èŠ‚ç‚¹çš„dirå’Œlangå±æ€§ï¼ˆæ ¸å¿ƒï¼ï¼‰</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">dir</span> = lang === <span class="hljs-string">'ar'</span> ? <span class="hljs-string">'rtl'</span> : <span class="hljs-string">'ltr'</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">lang</span> = lang
    <span class="hljs-keyword">return</span> lang
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å…œåº•ï¼šå¦‚æœæµè§ˆå™¨è¯­è¨€ä¸æ”¯æŒï¼Œé»˜è®¤ä½¿ç”¨ç®€ä½“ä¸­æ–‡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'zh'</span>
  }
}
<span class="hljs-keyword">const</span> i18n = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueI18</span>n({
  <span class="hljs-attr">locale</span>: <span class="hljs-title function_">getDefaultLang</span>(), <span class="hljs-comment">// å½“å‰è¯­è¨€æ ‡è¯†</span>
  <span class="hljs-attr">fallbackLocale</span>: <span class="hljs-string">'zh'</span>, <span class="hljs-comment">// è¯­è¨€ä¸å­˜åœ¨æ—¶çš„å…œåº•è¯­è¨€</span>
  <span class="hljs-comment">// æŒ‰éœ€åŠ è½½</span>
  <span class="hljs-comment">// messages: {},</span>
  <span class="hljs-comment">// åŒæ­¥åŠ è½½</span>
  messages,
  <span class="hljs-comment">// é˜²æ­¢é¡µé¢é—ªçƒ</span>
  <span class="hljs-attr">silentTranslationWarn</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">dateTimeFormats</span>: {
    <span class="hljs-attr">zh</span>: {
      <span class="hljs-attr">short</span>: {
        <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>,
        <span class="hljs-attr">month</span>: <span class="hljs-string">'2-digit'</span>,
        <span class="hljs-attr">day</span>: <span class="hljs-string">'2-digit'</span>,
      },
    },
    <span class="hljs-attr">en</span>: {
      <span class="hljs-attr">short</span>: {
        <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>,
        <span class="hljs-attr">month</span>: <span class="hljs-string">'2-digit'</span>,
        <span class="hljs-attr">day</span>: <span class="hljs-string">'2-digit'</span>,
      },
    },
    <span class="hljs-attr">ar</span>: {
      <span class="hljs-attr">short</span>: {
        <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>,
        <span class="hljs-attr">month</span>: <span class="hljs-string">'2-digit'</span>,
        <span class="hljs-attr">day</span>: <span class="hljs-string">'2-digit'</span>,
      },
    },
  },
  <span class="hljs-attr">numberFormats</span>: {
    <span class="hljs-attr">zh</span>: {
      <span class="hljs-attr">currency</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>,
        <span class="hljs-attr">currency</span>: <span class="hljs-string">'CNY'</span>,
      },
    },
    <span class="hljs-attr">en</span>: {
      <span class="hljs-attr">currency</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>,
        <span class="hljs-attr">currency</span>: <span class="hljs-string">'USD'</span>,
      },
    },
    <span class="hljs-attr">ar</span>: {
      <span class="hljs-attr">currency</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>,
        <span class="hljs-attr">currency</span>: <span class="hljs-string">'EGP'</span>, <span class="hljs-comment">// åŸƒåŠé•‘ï¼Œé˜¿æ‹‰ä¼¯è¯­å›½å®¶å¸¸ç”¨è´§å¸</span>
      },
    },
  },
})

<span class="hljs-comment">// åŠ¨æ€åŠ è½½é»˜è®¤è¯­è¨€åŒ…</span>
<span class="hljs-comment">// const loadLang = async (lang) =&gt; {</span>
<span class="hljs-comment">//   const langModule = await messages[lang]()</span>
<span class="hljs-comment">//   console.log('langModule', langModule)</span>
<span class="hljs-comment">//   i18n.setLocaleMessage(lang, langModule.default)</span>
<span class="hljs-comment">//   i18n.locale = lang</span>
<span class="hljs-comment">// }</span>
<span class="hljs-comment">// loadLang(getDefaultLang())</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> i18n

</code></pre>
<h4 data-id="heading-3">åœ¨ Vue å…¥å£æ³¨å†Œ i18n</h4>
<p>ä¿®æ”¹Â <code>src/main.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> i18n <span class="hljs-keyword">from</span> <span class="hljs-string">'./lang'</span> <span class="hljs-comment">// å¯¼å…¥ i18n å®ä¾‹</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span>

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  i18n, <span class="hljs-comment">// æ³¨å…¥åˆ° Vue å®ä¾‹</span>
  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)
}).$mount(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-4">å››ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¤šè¯­è¨€</h3>
<h4 data-id="heading-5">1. æ¨¡æ¿ä¸­ä½¿ç”¨ï¼ˆæ ¸å¿ƒç”¨æ³•ï¼‰</h4>
<ul>
<li>åŸºç¡€ç”¨æ³•ï¼š<code>$t('é”®å')</code></li>
<li>åµŒå¥—é”®åï¼š<code>$t('common.submit')</code></li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·é€‰æ‹©è¯­è¨€"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"handleChange"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ä¸­æ–‡"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"zh"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è‹±æ–‡"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"en"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"é˜¿æ‹‰ä¼¯"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ar"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¼ å‚ï¼š{{ $t('common.welcome', { name: 'ç”Ÿå', count: '10' }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $t('common.cancel') }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $t('common.confirm') }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $t('login.title') }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸‰å±‚ç¿»è¯‘ï¼š{{ $t('login.user.name') }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- åŸºæœ¬ç”¨æ³• --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å•æ•°ï¼š{{ $tc('common.item', 1) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è¾“å‡º: item --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¤æ•°ï¼š{{ $tc('common.item', 3) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è¾“å‡º: items --&gt;</span>

      <span class="hljs-comment">&lt;!-- å¸¦å˜é‡çš„ç”¨æ³• --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $tc('common.count', 1, { count: 1 }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è¾“å‡º: You have 1 item --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $tc('common.count', 5, { count: 5 }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è¾“å‡º: You have 5 items --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        æ°´å°<span class="hljs-tag">&lt;<span class="hljs-name">el-input</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px"</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"lang"</span>
          <span class="hljs-attr">:placeholder</span>=<span class="hljs-string">"$t('common.placeholder')"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ—¥æœŸï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{ $d(new Date()) }}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        æ•°å­—ï¼š
        {{ $n(123.22, 'currency') }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
        ç®­å¤´å›¾æ ‡ï¼š
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"arrow-icon el-icon-right"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å¸¦å˜é‡çš„æ–‡æœ¬ï¼ˆæ•°å­—æ ¼å¼åŒ–ï¼‰ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $t('common.price', { amount: formatArabicNumber(99.99) }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- æ··åˆæ–‡æœ¬ï¼ˆé˜¿æ‹‰ä¼¯è¯­+æ•°å­—ï¼Œéœ€ä¿ç•™ HTMLï¼‰ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">"$t('common.mixedText')"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶å†…è‡ªå®šä¹‰æ–‡æ¡ˆï¼š<span class="hljs-tag">&lt;<span class="hljs-name">language-private</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é€‚é…å¤šè¯­è¨€æ–‡æœ¬é•¿åº¦çš„æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-btn"</span>&gt;</span>{{ $t('common.submit') }}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">2. è„šæœ¬ä¸­ä½¿ç”¨</h4>
<ul>
<li>å®ä¾‹å†…ï¼š<code>this.$t('é”®å')</code></li>
<li>å…¨å±€ / éç»„ä»¶ç¯å¢ƒï¼šå¯¼å…¥ i18n å®ä¾‹ï¼Œä½¿ç”¨Â <code>i18n.t('é”®å')</code></li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶å†…</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">submit</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span>) {
        <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.$t(<span class="hljs-string">'error.empty'</span>))
      }
    }
  }
}

<span class="hljs-comment">// éç»„ä»¶ç¯å¢ƒï¼ˆå¦‚ router.jsï¼‰</span>
  <span class="hljs-comment">// å¼‚æ­¥åŠ è½½è¯­è¨€åŒ…è·¯ç”±ä¹Ÿè¦ä½¿ç”¨å¼‚æ­¥</span>
  <span class="hljs-comment">// setTimeout(() =&gt; {</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = i18n.<span class="hljs-title function_">t</span>(<span class="hljs-title class_">String</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>))
  <span class="hljs-comment">// }, 500)</span>
</code></pre>
<h4 data-id="heading-7">3. åŠ¨æ€åˆ‡æ¢è¯­è¨€</h4>
<p>å®ç°è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼Œä¿®æ”¹Â <code>i18n.locale</code>Â å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  &lt;div&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·é€‰æ‹©è¯­è¨€"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"handleChange"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ä¸­æ–‡"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"zh"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"è‹±æ–‡"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"en"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"é˜¿æ‹‰ä¼¯"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ar"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span></span>
  &lt;div&gt;    
&lt;template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-attr">methods</span>: {
    handleChange (val) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$i18n</span>.<span class="hljs-property">locale</span> = val
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'lang'</span>, val)
      <span class="hljs-comment">// å¯é€‰ï¼šåˆ·æ–°é¡µé¢ï¼ˆéƒ¨åˆ†åœºæ™¯éœ€è¦ï¼Œå¦‚è·¯ç”±ã€ç»„ä»¶å†…ç¡¬ç¼–ç æ–‡æœ¬ï¼‰</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>()
    },
    <span class="hljs-comment">// æ ¼å¼åŒ–æ•°å­—ä¸ºé˜¿æ‹‰ä¼¯-Indicæ•°å­—ï¼ˆÙ©Ù©.Ù©Ù© è€Œé 99.99ï¼‰</span>
    formatArabicNumber (num) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$i18n</span>.<span class="hljs-property">locale</span> !== <span class="hljs-string">'ar'</span>) <span class="hljs-keyword">return</span> num;
      <span class="hljs-comment">// é˜¿æ‹‰ä¼¯æ•°å­—æ˜ å°„è¡¨</span>
      <span class="hljs-keyword">const</span> digitMap = {
        <span class="hljs-string">'0'</span>: <span class="hljs-string">'Ù '</span>, <span class="hljs-string">'1'</span>: <span class="hljs-string">'Ù¡'</span>, <span class="hljs-string">'2'</span>: <span class="hljs-string">'Ù¢'</span>, <span class="hljs-string">'3'</span>: <span class="hljs-string">'Ù£'</span>, <span class="hljs-string">'4'</span>: <span class="hljs-string">'Ù¤'</span>,
        <span class="hljs-string">'5'</span>: <span class="hljs-string">'Ù¥'</span>, <span class="hljs-string">'6'</span>: <span class="hljs-string">'Ù¦'</span>, <span class="hljs-string">'7'</span>: <span class="hljs-string">'Ù§'</span>, <span class="hljs-string">'8'</span>: <span class="hljs-string">'Ù¨'</span>, <span class="hljs-string">'9'</span>: <span class="hljs-string">'Ù©'</span>, <span class="hljs-string">'.'</span>: <span class="hljs-string">'.'</span>
      };
      <span class="hljs-keyword">return</span> num.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> digitMap[d] || d).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
    }
  },
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-8">äº”ã€é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-9">1. å¸¦å‚æ•°çš„ç¿»è¯‘ï¼ˆæ’å€¼ï¼‰</h4>
<p>å¦‚æœæ–‡æœ¬éœ€è¦åŠ¨æ€æ›¿æ¢å†…å®¹ï¼Œè¯­è¨€åŒ…ä¸­ä½¿ç”¨Â <code>{å˜é‡å}</code>ï¼Œè°ƒç”¨æ—¶ä¼ å…¥å‚æ•°ï¼š</p>
<ul>
<li>è¯­è¨€åŒ…ï¼ˆzh-CN.jsï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">common</span>: {
    <span class="hljs-attr">welcome</span>: <span class="hljs-string">'æ¬¢è¿ {name} ç™»å½•ï¼Œä»Šæ—¥å‰©ä½™æ¬¡æ•°ï¼š{count}'</span>
  }
}
</code></pre>
<ul>
<li>ä½¿ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;!-- æ¨¡æ¿ä¸­ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ $t('common.welcome', { name: 'å¼ ä¸‰', count: 5 }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

&lt;!-- è„šæœ¬ä¸­ --&gt;
<span class="hljs-variable language_">this</span>.$t(<span class="hljs-string">'common.welcome'</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">5</span> })
</code></pre>
<h4 data-id="heading-10">2. å¤æ•°å¤„ç†</h4>
<p>ä¸åŒè¯­è¨€çš„å¤æ•°è§„åˆ™ä¸åŒï¼ˆå¦‚è‹±æ–‡æœ‰å•å¤æ•°ï¼Œä¸­æ–‡æ— ï¼‰ï¼Œ<code>vue-i18n</code>Â æ”¯æŒå¤æ•°æ ¼å¼åŒ–ï¼š</p>
<ul>
<li>è¯­è¨€åŒ…ï¼ˆen-US.jsï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">common</span>: {
    <span class="hljs-attr">item</span>: <span class="hljs-string">'item | items'</span>, <span class="hljs-comment">// å•æ•° | å¤æ•°</span>
    <span class="hljs-attr">count</span>: <span class="hljs-string">'You have {count} {count, plural, one {item} other {items}}'</span>
  }
}
</code></pre>
<ul>
<li>ä½¿ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;div&gt;{{ $t(<span class="hljs-string">'common.count'</span>, { <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> }) }}&lt;/div&gt; &lt;!-- <span class="hljs-title class_">You</span> have <span class="hljs-number">1</span> item --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ $t('common.count', { count: 5 }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> &lt;!-- <span class="hljs-title class_">You</span> have <span class="hljs-number">5</span> items --&gt;
</code></pre>
<h4 data-id="heading-11">3. æ—¥æœŸ / æ•°å­—æ ¼å¼åŒ–</h4>
<p><code>vue-i18n</code>Â å†…ç½®æ—¥æœŸã€æ•°å­—æ ¼å¼åŒ–èƒ½åŠ›ï¼Œéœ€ç»“åˆÂ <code>$d</code>ï¼ˆæ—¥æœŸï¼‰ã€<code>$n</code>ï¼ˆæ•°å­—ï¼‰ä½¿ç”¨ï¼š</p>
<ul>
<li>æ¨¡æ¿ä¸­ï¼š</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æ—¥æœŸæ ¼å¼åŒ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ $d(new Date(), 'short') }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- 2025/12/17ï¼ˆä¸­æ–‡ï¼‰| 12/17/2025ï¼ˆè‹±æ–‡ï¼‰ --&gt;</span>

<span class="hljs-comment">&lt;!-- æ•°å­—æ ¼å¼åŒ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ $n(12345.67, 'currency') }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- Â¥12,345.67ï¼ˆä¸­æ–‡ï¼‰| $12,345.67ï¼ˆè‹±æ–‡ï¼‰ --&gt;</span>
</code></pre>
<ul>
<li>é…ç½®æ ¼å¼åŒ–è§„åˆ™ï¼ˆåœ¨ lang/index.js ä¸­ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> i18n = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueI18</span>n({
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  <span class="hljs-attr">dateTimeFormats</span>: {
    <span class="hljs-string">'zh-CN'</span>: {
      <span class="hljs-attr">short</span>: {
        <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>, <span class="hljs-attr">month</span>: <span class="hljs-string">'2-digit'</span>, <span class="hljs-attr">day</span>: <span class="hljs-string">'2-digit'</span>
      }
    },
    <span class="hljs-string">'en-US'</span>: {
      <span class="hljs-attr">short</span>: {
        <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>, <span class="hljs-attr">month</span>: <span class="hljs-string">'2-digit'</span>, <span class="hljs-attr">day</span>: <span class="hljs-string">'2-digit'</span>
      }
    }
  },
  <span class="hljs-attr">numberFormats</span>: {
    <span class="hljs-string">'zh-CN'</span>: {
      <span class="hljs-attr">currency</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>, <span class="hljs-attr">currency</span>: <span class="hljs-string">'CNY'</span>
      }
    },
    <span class="hljs-string">'en-US'</span>: {
      <span class="hljs-attr">currency</span>: {
        <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>, <span class="hljs-attr">currency</span>: <span class="hljs-string">'USD'</span>
      }
    }
  }
})
</code></pre>
<h4 data-id="heading-12">4. è·¯ç”±å›½é™…åŒ–</h4>
<p>å¦‚æœæŸä¸ªç»„ä»¶çš„æ–‡æœ¬ä»…åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå¯åœ¨ç»„ä»¶å†…å®šä¹‰å±€éƒ¨è¯­è¨€åŒ…ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-comment">// å¼‚æ­¥åŠ è½½è¯­è¨€åŒ…è·¯ç”±ä¹Ÿè¦ä½¿ç”¨å¼‚æ­¥</span>
  <span class="hljs-comment">// setTimeout(() =&gt; {</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = i18n.<span class="hljs-title function_">t</span>(<span class="hljs-title class_">String</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>))
  <span class="hljs-comment">// }, 500)</span>
</code></pre>
<h4 data-id="heading-13">5. åŠ¨æ€åŠ è½½</h4>
<p>å¦‚æœæŸä¸ªç»„ä»¶çš„æ–‡æœ¬ä»…åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå¯åœ¨ç»„ä»¶å†…å®šä¹‰å±€éƒ¨è¯­è¨€åŒ…ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// lang/index.js</span>

<span class="hljs-comment">// æŒ‰éœ€å¼•å…¥é…ç½®</span>
<span class="hljs-keyword">const</span> messages = {
  <span class="hljs-attr">en</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./en'</span>),
  <span class="hljs-attr">zh</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./zh'</span>),
}

<span class="hljs-comment">// åŠ¨æ€åŠ è½½é»˜è®¤è¯­è¨€åŒ…  </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadLang</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">lang</span>) =&gt; {
  <span class="hljs-keyword">const</span> langModule = <span class="hljs-keyword">await</span> messages[lang]()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'langModule'</span>, langModule)
  i18n.<span class="hljs-title function_">setLocaleMessage</span>(lang, langModule.<span class="hljs-property">default</span>)
  i18n.<span class="hljs-property">locale</span> = lang
}
<span class="hljs-title function_">loadLang</span>(<span class="hljs-title function_">getDefaultLang</span>())
</code></pre>
<h4 data-id="heading-14">5. é˜¿æ‹‰ä¼¯è¯­è¨€ç‰¹æ®Šå¤„ç†</h4>
<ol>
<li>åˆ‡æ¢é˜¿æ‹‰ä¼¯è¯­åï¼Œé¡µé¢æ–‡æœ¬ä»å³å‘å·¦æ’åˆ—ï¼Œå­—ç¬¦æ— ä¹±ç ï¼›</li>
<li>æ··åˆæ–‡æœ¬ï¼ˆå¦‚ â€œØ§Ù„Ø³Ø¹Ø±: Ù©Ù©.Ù©Ù©â€ï¼‰ä¸­æ•°å­—ä¿æŒ LTR æ–¹å‘ï¼Œæ•´ä½“æ’ç‰ˆæ­£å¸¸ï¼›</li>
<li>å›¾æ ‡ã€è¡¨å•ã€æŒ‰é’®ç­‰ç»„ä»¶æ–¹å‘é€‚é…ï¼Œäº¤äº’é€»è¾‘è‡ªæ´½ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// index.html</span>

      <span class="hljs-comment">/* å…¨å±€æ ·å¼ï¼šé˜¿æ‹‰ä¼¯è¯­å­—ä½“ + è¡Œé«˜é€‚é… */</span>
      html[lang=<span class="hljs-string">'ar'</span>] {
        font-<span class="hljs-attr">family</span>: <span class="hljs-string">'Noto Naskh Arabic'</span>, serif;
        line-<span class="hljs-attr">height</span>: <span class="hljs-number">2.4</span>; <span class="hljs-comment">/* é˜¿æ‹‰ä¼¯å­—ç¬¦é«˜åº¦é«˜ï¼Œé¿å…æ–‡å­—é‡å  */</span>
      }
      html[lang=<span class="hljs-string">'ar'</span>] .<span class="hljs-property">arrow</span>-icon {
        <span class="hljs-attr">transform</span>: <span class="hljs-title function_">scaleX</span>(-<span class="hljs-number">1</span>); <span class="hljs-comment">/* æ°´å¹³ç¿»è½¬ */</span>
      }
      <span class="hljs-comment">/* å…¨å±€ RTL å¸ƒå±€åŸºç¡€ */</span>
      html[dir=<span class="hljs-string">'rtl'</span>] {
        <span class="hljs-attr">direction</span>: rtl;
        unicode-<span class="hljs-attr">bidi</span>: embed; <span class="hljs-comment">/* å¤„ç†æ··åˆæ–‡æœ¬ï¼ˆé˜¿æ‹‰ä¼¯+æ•°å­—/è‹±æ–‡ï¼‰ */</span>
        text-<span class="hljs-attr">align</span>: right; <span class="hljs-comment">/* æ–‡æœ¬é»˜è®¤å³å¯¹é½ */</span>
      }
      
      &lt;p&gt;
        ç®­å¤´å›¾æ ‡ï¼š
        &lt;i <span class="hljs-keyword">class</span>=<span class="hljs-string">"arrow-icon el-icon-right"</span>&gt;&lt;/i&gt;
      &lt;/p&gt;
      &lt;!-- å¸¦å˜é‡çš„æ–‡æœ¬ï¼ˆæ•°å­—æ ¼å¼åŒ–ï¼‰ --&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ $t('common.price', { amount: formatArabicNumber(99.99) }) }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>  
      
    formatArabicNumber (num) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$i18n</span>.<span class="hljs-property">locale</span> !== <span class="hljs-string">'ar'</span>) <span class="hljs-keyword">return</span> num;
      <span class="hljs-comment">// é˜¿æ‹‰ä¼¯æ•°å­—æ˜ å°„è¡¨</span>
      <span class="hljs-keyword">const</span> digitMap = {
        <span class="hljs-string">'0'</span>: <span class="hljs-string">'Ù '</span>, <span class="hljs-string">'1'</span>: <span class="hljs-string">'Ù¡'</span>, <span class="hljs-string">'2'</span>: <span class="hljs-string">'Ù¢'</span>, <span class="hljs-string">'3'</span>: <span class="hljs-string">'Ù£'</span>, <span class="hljs-string">'4'</span>: <span class="hljs-string">'Ù¤'</span>,
        <span class="hljs-string">'5'</span>: <span class="hljs-string">'Ù¥'</span>, <span class="hljs-string">'6'</span>: <span class="hljs-string">'Ù¦'</span>, <span class="hljs-string">'7'</span>: <span class="hljs-string">'Ù§'</span>, <span class="hljs-string">'8'</span>: <span class="hljs-string">'Ù¨'</span>, <span class="hljs-string">'9'</span>: <span class="hljs-string">'Ù©'</span>, <span class="hljs-string">'.'</span>: <span class="hljs-string">'.'</span>
      };
      <span class="hljs-keyword">return</span> num.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> digitMap[d] || d).<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>);
    }      
</code></pre>
<h4 data-id="heading-15">6. é•¿åº¦é€‚é…</h4>
<ol>
<li>æ‰€æœ‰å®¹å™¨ã€Œå¼¹æ€§å®½åº¦ + æœ€å° / æœ€å¤§å®½åº¦ã€æ›¿ä»£å›ºå®šå°ºå¯¸ï¼›</li>
<li>æ–‡æœ¬ã€Œå•è¡Œçœç•¥ / å¤šè¡Œæˆªæ–­ã€ä½œä¸ºå…œåº•ï¼›</li>
<li>é’ˆå¯¹ä¸åŒè¯­è¨€åŠ¨æ€è°ƒæ•´å­—ä½“å¤§å° / å†…è¾¹è·ï¼›</li>
<li>å…³é”®ç»„ä»¶é€šè¿‡ JS è®¡ç®—æ–‡æœ¬å®½åº¦ï¼Œç²¾å‡†é€‚é…ï¼›</li>
<li>æµ‹è¯•è¦†ç›–æœ€é•¿ / æœ€çŸ­è¯­è¨€ + å°å±åœºæ™¯ã€‚</li>
</ol>
<h3 data-id="heading-16">äº”ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>è¯­è¨€æ ‡è¯†è§„èŒƒ</strong>ï¼šå»ºè®®ä½¿ç”¨Â <code>zh-CN</code>ã€<code>en-US</code>Â ç­‰ BCP 47 è§„èŒƒæ ‡è¯†ï¼Œé¿å…è‡ªå®šä¹‰ï¼ˆå¦‚Â <code>zh</code>ã€<code>en</code>ï¼‰å¯¼è‡´æµè§ˆå™¨è¯­è¨€åŒ¹é…é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>é¿å…ç¡¬ç¼–ç </strong>ï¼šæ‰€æœ‰å±•ç¤ºæ–‡æœ¬å¿…é¡»æŠ½ç¦»åˆ°è¯­è¨€åŒ…ï¼Œç¦æ­¢åœ¨æ¨¡æ¿ / è„šæœ¬ä¸­ç›´æ¥å†™æ­»ï¼ˆå¦‚Â <code>alert('æäº¤æˆåŠŸ')</code>Â éœ€æ”¹ä¸ºÂ <code>alert(this.$t('common.success'))</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç¬¬ä¸‰æ–¹ç»„ä»¶é€‚é…</strong>ï¼šå¦‚æœä½¿ç”¨ Element UI ç­‰ç»„ä»¶åº“ï¼Œéœ€å•ç‹¬é…ç½®å…¶å¤šè¯­è¨€ï¼ˆElement UI æœ‰å†…ç½®è¯­è¨€åŒ…ï¼Œå¯ç»“åˆÂ <code>vue-i18n</code>Â æ•´åˆï¼‰ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-ui/lib/theme-chalk/index.css'</span>
<span class="hljs-keyword">import</span> enLocale <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui/lib/locale/lang/en'</span>
<span class="hljs-keyword">import</span> zhLocale <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui/lib/locale/lang/zh-CN'</span>
<span class="hljs-keyword">import</span> i18n <span class="hljs-keyword">from</span> <span class="hljs-string">'./lang'</span>

<span class="hljs-comment">// æ•´åˆ Element UI è¯­è¨€åŒ…</span>
<span class="hljs-title class_">ElementUI</span>.<span class="hljs-title function_">i18n</span>(<span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> i18n.<span class="hljs-title function_">t</span>(key, value))
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementUI</span>, {
  <span class="hljs-attr">locale</span>: i18n.<span class="hljs-property">locale</span> === <span class="hljs-string">'en-US'</span> ? enLocale : zhLocale
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3åŠ¨æ€æ ·å¼æ§åˆ¶ï¼šrefã€reactiveã€watchä¸computedçš„åº”ç”¨åœºæ™¯ä¸åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7585130590291722255</link>    <guid>https://juejin.cn/post/7585130590291722255</guid>    <pubDate>2025-12-19T05:11:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585130590291722255" data-draft-id="7585222924564856872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3åŠ¨æ€æ ·å¼æ§åˆ¶ï¼šrefã€reactiveã€watchä¸computedçš„åº”ç”¨åœºæ™¯ä¸åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ    "/> <meta itemprop="keywords" content="åç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-19T05:11:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3åŠ¨æ€æ ·å¼æ§åˆ¶ï¼šrefã€reactiveã€watchä¸computedçš„åº”ç”¨åœºæ™¯ä¸åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ    
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:11:48.000Z" title="Fri Dec 19 2025 05:11:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å“åº”å¼æ•°æ®ï¼šåŠ¨æ€æ ·å¼çš„â€œå¼€å…³â€</h3>
<p>åœ¨Vue3ä¸­ï¼Œ<strong>å“åº”å¼æ•°æ®</strong>æ˜¯åŠ¨æ€æ ·å¼çš„æ ¸å¿ƒé©±åŠ¨åŠ›â€”â€”å½“æ•°æ®å˜åŒ–æ—¶ï¼ŒVueä¼šè‡ªåŠ¨è¿½è¸ªå¹¶æ›´æ–°å…³è”çš„æ ·å¼ã€‚æˆ‘ä»¬å¸¸ç”¨<code>ref</code>ï¼ˆç”¨äºåŸºæœ¬ç±»å‹ï¼‰å’Œ<code>reactive</code>ï¼ˆç”¨äºå¯¹è±¡/æ•°ç»„ï¼‰æ¥å®šä¹‰å“åº”å¼æ•°æ®ï¼Œå†é€šè¿‡<code>v-bind:style</code>æˆ–<code>v-bind:class</code>ç»‘å®šåˆ°æ¨¡æ¿ã€‚</p>
<h4 data-id="heading-1">1.1 ç”¨<code>ref</code>ç»‘å®šç®€å•æ ·å¼</h4>
<p><code>ref</code>é€‚åˆç®¡ç†<strong>å•ä¸€æˆ–å°‘é‡æ ·å¼å±æ€§</strong>ï¼ˆå¦‚é¢œè‰²ã€å­—ä½“å¤§å°ï¼‰ã€‚æ¯”å¦‚ä¸€ä¸ªå¯åˆ‡æ¢ä¸»é¢˜çš„æŒ‰é’®ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- ç”¨:styleç»‘å®šrefå˜é‡ --&gt;
  &lt;button 
    class="dynamic-btn"
    :style="{ 
      backgroundColor: btnColor, 
      fontSize: `${fontSize}px` 
    }"
    @click="toggleStyle"
  &gt;
    ç‚¹å‡»åˆ‡æ¢æ ·å¼
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

// ç”¨refå®šä¹‰å“åº”å¼æ ·å¼æ•°æ®
const btnColor = ref('#42b983') // åˆå§‹ç»¿è‰²
const fontSize = ref(16)        // åˆå§‹å­—ä½“å¤§å°16px

// ç‚¹å‡»äº‹ä»¶ï¼šä¿®æ”¹å“åº”å¼æ•°æ®
const toggleStyle = () =&gt; {
  btnColor.value = btnColor.value === '#42b983' ? '#2196f3' : '#42b983'
  fontSize.value += 2 // æ¯æ¬¡ç‚¹å‡»å­—ä½“å¢å¤§2px
}
&lt;/script&gt;

&lt;style scoped&gt;
.dynamic-btn {
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease; /* è¿‡æ¸¡åŠ¨ç”»ï¼Œè®©å˜åŒ–æ›´å¹³æ»‘ */
}
&lt;/style&gt;
</code></pre>
<p><strong>å…³é”®è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>btnColor.value</code>å’Œ<code>fontSize.value</code>æ˜¯å“åº”å¼çš„ï¼Œä¿®æ”¹å®ƒä»¬ä¼šè§¦å‘Vueçš„é‡æ–°æ¸²æŸ“ã€‚</li>
<li><code>:style</code>ç»‘å®šçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯CSSå±æ€§ï¼ˆé©¼å³°å¼æˆ–çŸ­æ¨ªçº¿å¼éƒ½å¯ä»¥ï¼ŒVueä¼šè‡ªåŠ¨è½¬æ¢ï¼‰ï¼Œå€¼æ˜¯å“åº”å¼å˜é‡ã€‚</li>
</ul>
<h4 data-id="heading-2">1.2 ç”¨<code>reactive</code>ç®¡ç†å¤æ‚æ ·å¼å¯¹è±¡</h4>
<p>å½“æ ·å¼å±æ€§è¾ƒå¤šæ—¶ï¼Œ<code>reactive</code>æ›´é€‚åˆâ€”â€”å®ƒèƒ½å°†å¤šä¸ªæ ·å¼å±æ€§å°è£…æˆä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¾¿äºç»´æŠ¤ã€‚æ¯”å¦‚ä¸€ä¸ªå¯åˆ‡æ¢é£æ ¼çš„å¡ç‰‡ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="card" :style="cardStyle"&gt;
    &lt;h3&gt;å“åº”å¼å¡ç‰‡&lt;/h3&gt;
    &lt;p&gt;è¿™æ˜¯ä¸€å¼ ç”¨reactiveç®¡ç†æ ·å¼çš„å¡ç‰‡&lt;/p&gt;
  &lt;/div&gt;
  &lt;button @click="toggleCardStyle"&gt;åˆ‡æ¢å¡ç‰‡é£æ ¼&lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue'

// ç”¨reactiveå®šä¹‰å¤æ‚æ ·å¼å¯¹è±¡
const cardStyle = reactive({
  backgroundColor: '#fff',
  borderRadius: '8px',
  padding: '20px',
  boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
  transition: 'all 0.3s ease'
})

// åˆ‡æ¢å¡ç‰‡æ ·å¼ï¼šä¿®æ”¹reactiveå¯¹è±¡çš„å±æ€§
const toggleCardStyle = () =&gt; {
  cardStyle.backgroundColor = cardStyle.backgroundColor === '#fff' ? '#f5f5f5' : '#fff'
  cardStyle.boxShadow = cardStyle.boxShadow === '0 2px 4px rgba(0,0,0,0.1)' ? '0 4px 8px rgba(0,0,0,0.2)' : '0 2px 4px rgba(0,0,0,0.1)'
}
&lt;/script&gt;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ ·å¼å±æ€§é›†ä¸­ç®¡ç†ï¼Œé¿å…<code>ref</code>å˜é‡æ³›æ»¥ï¼›</li>
<li>ä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒVueä¼šè‡ªåŠ¨è¿½è¸ªå˜åŒ–ï¼ˆæ·±å±‚å“åº”å¼ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">äºŒã€<code>watch</code>ï¼šç›‘å¬å˜åŒ–çš„â€œæ ·å¼æ§åˆ¶å™¨â€</h3>
<p><code>watch</code>èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œ<strong>æ ¹æ®æ•°æ®å˜åŒ–åŠ¨æ€è°ƒæ•´æ ·å¼</strong>ã€‚å¸¸è§åœºæ™¯å¦‚ï¼šç›‘å¬æ»šåŠ¨ä½ç½®ã€ç”¨æˆ·è¾“å…¥ã€çª—å£å¤§å°ç­‰ã€‚</p>
<h4 data-id="heading-4">2.1 æ¡ˆä¾‹ï¼šç›‘å¬æ»šåŠ¨ï¼Œå®ç°å¯¼èˆªæ å›ºå®š</h4>
<p>å¾ˆå¤šç½‘é¡µçš„å¯¼èˆªæ ä¼šåœ¨æ»šåŠ¨è¶…è¿‡ä¸€å®šè·ç¦»åâ€œå›ºå®šâ€åœ¨é¡¶éƒ¨ï¼Œè¿™ä¸ªæ•ˆæœå¯ä»¥ç”¨<code>watch</code>ç»“åˆæ»šåŠ¨äº‹ä»¶å®ç°ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;nav :style="navStyle"&gt;
    &lt;a href="#home"&gt;é¦–é¡µ&lt;/a&gt;
    &lt;a href="#about"&gt;å…³äºæˆ‘ä»¬&lt;/a&gt;
    &lt;a href="#contact"&gt;è”ç³»æˆ‘ä»¬&lt;/a&gt;
  &lt;/nav&gt;
  &lt;!-- æ¨¡æ‹Ÿé•¿å†…å®¹ --&gt;
  &lt;div class="content" :style="{ height: '2000px' }"&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, watch, onMounted, onUnmounted, reactive } from 'vue'

// 1. å®šä¹‰å“åº”å¼æ•°æ®ï¼šè®°å½•æ»šåŠ¨è·ç¦»
const scrollTop = ref(0)

// 2. å®šä¹‰å¯¼èˆªæ æ ·å¼
const navStyle = reactive({
  position: 'relative',
  top: 0,
  width: '100%',
  padding: '16px 0',
  backgroundColor: '#fff',
  boxShadow: 'none',
  transition: 'all 0.3s ease',
  zIndex: 999
})

// 3. ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼šæ›´æ–°scrollTop
const handleScroll = () =&gt; {
  scrollTop.value = window.scrollY
}

// 4. ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šæŒ‚è½½æ—¶æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œå¸è½½æ—¶ç§»é™¤
onMounted(() =&gt; window.addEventListener('scroll', handleScroll))
onUnmounted(() =&gt; window.removeEventListener('scroll', handleScroll))

// 5. watchç›‘å¬scrollTopï¼šè°ƒæ•´å¯¼èˆªæ æ ·å¼
watch(scrollTop, (newVal) =&gt; {
  if (newVal &gt; 100) { // æ»šåŠ¨è¶…è¿‡100pxæ—¶å›ºå®š
    navStyle.position = 'fixed'
    navStyle.boxShadow = '0 2px 8px rgba(0,0,0,0.15)'
    navStyle.backgroundColor = '#f8f8f8'
  } else { // æ¢å¤é»˜è®¤æ ·å¼
    navStyle.position = 'relative'
    navStyle.boxShadow = 'none'
    navStyle.backgroundColor = '#fff'
  }
})
&lt;/script&gt;

&lt;style scoped&gt;
nav a { margin: 0 16px; text-decoration: none; color: #333; }
.content { margin-top: 20px; background-color: #f0f0f0; }
&lt;/style&gt;
</code></pre>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1bab953e41f66ac53de099fa9fe76483%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1bab953e41f66ac53de099fa9fe76483/" ref="nofollow noopener noreferrer">Vue3ä¸­åŠ¨æ€æ ·å¼æ•°ç»„çš„åé¡¹è¦†ç›–è§„åˆ™å¦‚ä½•ä¸è®¡ç®—å±æ€§ç»“åˆå®ç°å¤æ‚çŠ¶æ€æ ·å¼ç®¡ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc85e1fe16a7ae45e965b4e2df4d9d2f4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c85e1fe16a7ae45e965b4e2df4d9d2f4/" ref="nofollow noopener noreferrer">Vueæµ…å“åº”å¼å¦‚ä½•è§£å†³æ·±å±‚å“åº”å¼çš„æ€§èƒ½é—®é¢˜ï¼Ÿé€‚ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa0af08dd60a37b9a890a9957f2cbfc9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a0af08dd60a37b9a890a9957f2cbfc9f/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§ã€æ•°ç»„æ”¹ç´¢å¼•ã€åŸå§‹å€¼ä»£ç†çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbc287e1e36287afd90750fd907eca85e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bc287e1e36287afd90750fd907eca85e/" ref="nofollow noopener noreferrer">Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ffc4ef84559e04693a620d0714cb30787%2F" target="_blank" title="https://blog.cmdragon.cn/posts/fc4ef84559e04693a620d0714cb30787/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨Git Hookå’ŒCIæµæ°´çº¿ä¸ºFastAPIé¡¹ç›®ä¿é©¾æŠ¤èˆªï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
<p><strong>å…³é”®é€»è¾‘</strong>ï¼š</p>
<ul>
<li><code>onMounted</code>ä¸­æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬ï¼Œ<code>onUnmounted</code>ä¸­ç§»é™¤ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰ï¼›</li>
<li><code>watch</code>ç›‘å¬<code>scrollTop</code>çš„å˜åŒ–ï¼Œå½“è¶…è¿‡100pxæ—¶ä¿®æ”¹å¯¼èˆªæ çš„<code>position</code>ä¸º<code>fixed</code>ï¼Œå¹¶æ·»åŠ é˜´å½±ã€‚</li>
</ul>
<h4 data-id="heading-5">2.2 æ¡ˆä¾‹ï¼šç›‘å¬è¾“å…¥ï¼Œè°ƒæ•´è¾“å…¥æ¡†æ ·å¼</h4>
<p>å½“ç”¨æˆ·è¾“å…¥å†…å®¹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¾“å…¥é•¿åº¦è°ƒæ•´è¾“å…¥æ¡†çš„è¾¹æ¡†é¢œè‰²ï¼ˆæ¯”å¦‚è¾“å…¥è¿‡çŸ­æç¤ºçº¢è‰²ï¼Œè¶³å¤Ÿé•¿æç¤ºç»¿è‰²ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;input 
    type="text" 
    v-model="inputValue"
    :style="inputStyle"
    placeholder="è¯·è¾“å…¥å†…å®¹ï¼ˆè‡³å°‘5å­—ï¼‰"
  &gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, watch, reactive } from 'vue'

const inputValue = ref('')
const inputStyle = reactive({
  padding: '8px',
  border: '1px solid #ddd',
  borderRadius: '4px',
  transition: 'border-color 0.3s ease'
})

// ç›‘å¬è¾“å…¥å†…å®¹é•¿åº¦
watch(inputValue, (newVal) =&gt; {
  if (newVal.length &lt; 5) {
    inputStyle.borderColor = '#ff4444' // çº¢è‰²ï¼šè¾“å…¥è¿‡çŸ­
  } else {
    inputStyle.borderColor = '#00C851' // ç»¿è‰²ï¼šè¾“å…¥è¶³å¤Ÿ
  }
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-6">ä¸‰ã€<code>computed</code>ï¼šè®¡ç®—å¼æ ·å¼çš„â€œé«˜æ•ˆç¼“å­˜æœºâ€</h3>
<p><code>computed</code>ç”¨äº<strong>æ ¹æ®å¤šä¸ªå“åº”å¼æ•°æ®è®¡ç®—æ ·å¼</strong>ï¼Œå®ƒä¼š<strong>ç¼“å­˜è®¡ç®—ç»“æœ</strong>â€”â€”åªæœ‰ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œæ¯”<code>watch</code>æ›´é«˜æ•ˆã€‚</p>
<h4 data-id="heading-7">3.1 æ¡ˆä¾‹ï¼šè¿›åº¦æ¡çš„åŠ¨æ€æ ·å¼</h4>
<p>è¿›åº¦æ¡æ˜¯<code>computed</code>çš„ç»å…¸åœºæ™¯ï¼šæ ¹æ®è¿›åº¦å€¼è®¡ç®—å®½åº¦å’Œé¢œè‰²ï¼ˆæ¯”å¦‚è¿›åº¦ä½äº30%çº¢è‰²ï¼Œé«˜äº70%ç»¿è‰²ï¼‰ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="progress-container"&gt;
    &lt;div class="progress-bar" :style="progressStyle"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;!-- ç”¨æ»‘å—æ§åˆ¶è¿›åº¦ --&gt;
  &lt;input type="range" min="0" max="100" v-model="progress"&gt;
  &lt;p&gt;å½“å‰è¿›åº¦ï¼š{{ progress }}%&lt;/p&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed } from 'vue'

const progress = ref(50) // åˆå§‹è¿›åº¦50%

// ç”¨computedè®¡ç®—è¿›åº¦æ¡æ ·å¼
const progressStyle = computed(() =&gt; {
  // æ ¹æ®è¿›åº¦å€¼åˆ¤æ–­é¢œè‰²
  let barColor = ''
  if (progress.value &lt; 30) barColor = '#ff4444'
  else if (progress.value &lt; 70) barColor = '#ffbb33'
  else barColor = '#00C851'

  return {
    width: `${progress.value}%`, // è¿›åº¦æ¡å®½åº¦
    backgroundColor: barColor,
    transition: 'width 0.3s ease'
  }
})
&lt;/script&gt;

&lt;style scoped&gt;
.progress-container {
  width: 100%;
  height: 20px;
  background-color: #e0e0e0;
  border-radius: 10px;
  overflow: hidden;
}
.progress-bar { height: 100%; border-radius: 10px; }
&lt;/style&gt;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><code>progressStyle</code>æ˜¯<code>computed</code>å±æ€§ï¼Œä¾èµ–<code>progress</code>â€”â€”åªæœ‰<code>progress</code>å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼›</li>
<li>ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼ˆæ¯”å¦‚<code>progress</code>ä¸å˜æ—¶ï¼Œå¤šæ¬¡è®¿é—®<code>progressStyle</code>ä¸ä¼šé‡æ–°æ‰§è¡Œå‡½æ•°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-8">3.2 æ¡ˆä¾‹ï¼šç»“åˆå¤šä¸ªæ•°æ®çš„å¤åˆæ ·å¼</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªâ€œåŠ¨æ€æŒ‰é’®â€ï¼Œæ ·å¼ç”±<code>size</code>ï¼ˆå°/ä¸­/å¤§ï¼‰å’Œ<code>type</code>ï¼ˆ primary / secondary ï¼‰å…±åŒå†³å®šï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;button :style="buttonStyle"&gt;
    åŠ¨æ€æŒ‰é’®
  &lt;/button&gt;
  &lt;select v-model="size"&gt;
    &lt;option value="small"&gt;å°&lt;/option&gt;
    &lt;option value="medium"&gt;ä¸­&lt;/option&gt;
    &lt;option value="large"&gt;å¤§&lt;/option&gt;
  &lt;/select&gt;
  &lt;select v-model="type"&gt;
    &lt;option value="primary"&gt;primary&lt;/option&gt;
    &lt;option value="secondary"&gt;secondary&lt;/option&gt;
  &lt;/select&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, computed } from 'vue'

const size = ref('medium')
const type = ref('primary')

// æ ¹æ®sizeå’Œtypeè®¡ç®—æŒ‰é’®æ ·å¼
const buttonStyle = computed(() =&gt; {
  // å°ºå¯¸å¯¹åº”çš„ padding å’Œ font-size
  const sizeMap = {
    small: { padding: '4px 8px', fontSize: '12px' },
    medium: { padding: '8px 16px', fontSize: '14px' },
    large: { padding: '12px 24px', fontSize: '16px' }
  }
  // ç±»å‹å¯¹åº”çš„èƒŒæ™¯è‰²
  const typeMap = {
    primary: '#2196f3',
    secondary: '#9e9e9e'
  }

  return {
    ...sizeMap[size.value], // åˆå¹¶å°ºå¯¸æ ·å¼
    backgroundColor: typeMap[type.value],
    color: '#fff',
    border: 'none',
    borderRadius: '4px',
    cursor: 'pointer',
    transition: 'all 0.3s ease'
  }
})
&lt;/script&gt;
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>buttonStyle</code>ä¾èµ–<code>size</code>å’Œ<code>type</code>ä¸¤ä¸ªå“åº”å¼æ•°æ®ï¼›</li>
<li>å½“<code>size</code>æˆ–<code>type</code>å˜åŒ–æ—¶ï¼Œ<code>computed</code>ä¼šé‡æ–°è®¡ç®—æ ·å¼ï¼Œå¦åˆ™ç›´æ¥è¿”å›ç¼“å­˜çš„ç»“æœã€‚</li>
</ul>
<h3 data-id="heading-9">å››ã€ç”Ÿå‘½å‘¨æœŸï¼šæ ·å¼çš„â€œåˆå§‹åŒ–ä¸æ¸…ç†â€</h3>
<p>Vueçš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå¦‚<code>onMounted</code>ã€<code>onUnmounted</code>ï¼‰ç”¨äº<strong>åœ¨ç‰¹å®šé˜¶æ®µå¤„ç†æ ·å¼</strong>â€”â€”æ¯”å¦‚åˆå§‹åŒ–æ—¶è·å–DOMå°ºå¯¸ã€å¸è½½æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬ã€‚</p>
<h4 data-id="heading-10">4.1 æ¡ˆä¾‹ï¼š<code>onMounted</code>åˆå§‹åŒ–æ ·å¼</h4>
<p><code>onMounted</code>ä¼šåœ¨<strong>ç»„ä»¶DOMæ¸²æŸ“å®Œæˆåæ‰§è¡Œ</strong>ï¼Œé€‚åˆè·å–DOMå…ƒç´ çš„å°ºå¯¸æˆ–ä½ç½®ï¼Œä»è€Œåˆå§‹åŒ–æ ·å¼ã€‚æ¯”å¦‚ä¸€ä¸ªå¡ç‰‡ç»„ä»¶ï¼Œåˆå§‹åŒ–æ—¶æ ¹æ®çˆ¶å…ƒç´ å®½åº¦è°ƒæ•´è‡ªå·±çš„å®½åº¦ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="parent-container"&gt;
    &lt;div ref="cardRef" class="card"&gt;
      &lt;h3&gt;åŠ¨æ€åˆå§‹åŒ–çš„å¡ç‰‡&lt;/h3&gt;
      &lt;p&gt;å®½åº¦ç”±çˆ¶å…ƒç´ å†³å®š&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const cardRef = ref(null) // å¼•ç”¨å¡ç‰‡DOMå…ƒç´ 

onMounted(() =&gt; {
  // ç¡®ä¿DOMå·²æ¸²æŸ“ï¼Œæ‰èƒ½è·å–çˆ¶å…ƒç´ å®½åº¦
  const parentWidth = cardRef.value.parentElement.offsetWidth
  // è®¾ç½®å¡ç‰‡çš„max-widthä¸ºçˆ¶å…ƒç´ å®½åº¦çš„80%
  cardRef.value.style.maxWidth = `${parentWidth * 0.8}px`
})
&lt;/script&gt;

&lt;style scoped&gt;
.parent-container {
  width: 80%;
  margin: 0 auto;
  padding: 20px;
  background-color: #f5f5f5;
}
.card {
  background-color: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin: 0 auto;
}
&lt;/style&gt;
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li><code>onMounted</code>ä¸­<code>cardRef.value</code>å·²æŒ‡å‘çœŸå®DOMå…ƒç´ ï¼Œå› æ­¤èƒ½å®‰å…¨è·å–<code>parentElement</code>ï¼›</li>
<li>å¦‚æœåœ¨<code>setup</code>ç›´æ¥è®¿é—®<code>cardRef.value</code>ï¼Œä¼šå¾—åˆ°<code>null</code>ï¼ˆå› ä¸ºDOMè¿˜æ²¡æ¸²æŸ“ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-11">4.2 <code>onUnmounted</code>ï¼šæ¸…ç†æ ·å¼ç›¸å…³çš„å‰¯ä½œç”¨</h4>
<p>å½“ç»„ä»¶å¸è½½æ—¶ï¼Œéœ€è¦æ¸…ç†<strong>å…¨å±€äº‹ä»¶ç›‘å¬</strong>æˆ–<strong>å®šæ—¶å™¨</strong>ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚æ¯”å¦‚ä¹‹å‰çš„æ»šåŠ¨ç›‘å¬æ¡ˆä¾‹ï¼Œæˆ‘ä»¬åœ¨<code>onUnmounted</code>ä¸­ç§»é™¤äº†æ»šåŠ¨äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handleScroll)
})
</code></pre>
<h3 data-id="heading-12">è¯¾åQuizï¼šå·©å›ºä½ çš„åŠ¨æ€æ ·å¼çŸ¥è¯†</h3>
<ol>
<li><strong>é—®é¢˜</strong>ï¼šç”¨<code>reactive</code>å®šä¹‰çš„æ ·å¼å¯¹è±¡ï¼Œä¿®æ”¹å…¶æ·±å±‚å±æ€§æ—¶æ ·å¼æ²¡æ›´æ–°ï¼Œå¯èƒ½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</li>
<li><strong>é—®é¢˜</strong>ï¼šä¸ºä»€ä¹ˆ<code>computed</code>æ¯”<code>watch</code>æ›´é€‚åˆå¤„ç†åŠ¨æ€æ ·å¼ï¼Ÿ</li>
</ol>
<h4 data-id="heading-13">ç­”æ¡ˆè§£æ</h4>
<ol>
<li>
<p><strong>åŸå› </strong>ï¼š<code>reactive</code>çš„å“åº”å¼æ˜¯æ·±å±‚çš„ï¼Œä½†å¦‚æœ<strong>ç›´æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡</strong>ï¼ˆæ¯”å¦‚<code>cardStyle = { ... }</code>ï¼‰ï¼Œä¼šä¸¢å¤±å“åº”å¼ï¼›æˆ–ä¿®æ”¹<strong>æœªè¢«è¿½è¸ªçš„å±æ€§</strong>ï¼ˆæ¯”å¦‚<code>cardStyle.newProp = 'value'</code>ï¼Œè€Œ<code>newProp</code>ä¸æ˜¯åˆå§‹å¯¹è±¡çš„å±æ€§ï¼‰ã€‚<br/>
<strong>è§£å†³</strong>ï¼šå§‹ç»ˆä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œè€Œéæ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼›è‹¥éœ€æ·»åŠ æ–°å±æ€§ï¼Œç”¨<code>reactive</code>åŒ…è£¹æ·±å±‚å¯¹è±¡ï¼ˆæ¯”å¦‚<code>cardStyle.deep = reactive({ color: 'red' })</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>åŸå› </strong>ï¼š<code>computed</code>ä¼š<strong>ç¼“å­˜è®¡ç®—ç»“æœ</strong>â€”â€”åªæœ‰ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼›è€Œ<code>watch</code>ä¼šåœ¨æ¯æ¬¡ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå›è°ƒï¼ˆå³ä½¿ç»“æœä¸å˜ï¼‰ã€‚ä¾‹å¦‚è¿›åº¦æ¡æ¡ˆä¾‹ï¼Œ<code>computed</code>ä»…åœ¨<code>progress</code>å˜åŒ–æ—¶é‡æ–°è®¡ç®—ï¼Œ<code>watch</code>åˆ™æ¯æ¬¡<code>progress</code>å˜åŒ–éƒ½æ‰§è¡Œå›è°ƒï¼Œæ•ˆç‡æ›´ä½ã€‚</p>
</li>
</ol>
<h3 data-id="heading-14">å¸¸è§æŠ¥é”™åŠè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-15">1. æŠ¥é”™ï¼š<code>TypeError: Cannot read properties of null (reading 'offsetWidth')</code></h4>
<ul>
<li><strong>åŸå› </strong>ï¼šåœ¨<code>onMounted</code>ä¹‹å‰è®¿é—®<code>ref.value</code>ï¼ˆæ­¤æ—¶DOMæœªæ¸²æŸ“ï¼Œ<code>ref.value</code>ä¸º<code>null</code>ï¼‰ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šç¡®ä¿åœ¨<code>onMounted</code>ä¸­è®¿é—®DOMå…ƒç´ ï¼ˆ<code>onMounted</code>ä¼šç­‰å¾…DOMæ¸²æŸ“å®Œæˆï¼‰ã€‚</li>
<li><strong>é¢„é˜²</strong>ï¼šè®¿é—®<code>ref.value</code>å‰æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼ˆå¦‚<code>if (cardRef.value) { ... }</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-16">2. æŠ¥é”™ï¼šå“åº”å¼æ•°æ®ä¿®æ”¹åï¼Œæ ·å¼æ²¡æ›´æ–°</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šç”¨äº†<strong>éå“åº”å¼å˜é‡</strong>ï¼ˆæ¯”å¦‚<code>let color = 'red'</code>è€Œé<code>const color = ref('red')</code>ï¼‰ï¼›æˆ–ä¿®æ”¹äº†<code>reactive</code>å¯¹è±¡çš„<strong>æœªè¢«è¿½è¸ªçš„å±æ€§</strong>ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šç”¨<code>ref</code>/<code>reactive</code>æ­£ç¡®åŒ…è£¹æ•°æ®ï¼›ä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„ç°æœ‰å±æ€§ï¼ˆè€Œéæ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-17">3. æŠ¥é”™ï¼š<code>watch</code>ç›‘å¬çš„å˜é‡æ²¡è§¦å‘å›è°ƒ</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šç›‘å¬çš„æ˜¯<strong>æ™®é€šå˜é‡</strong>ï¼ˆéå“åº”å¼ï¼‰ï¼›æˆ–ç›‘å¬<code>reactive</code>å¯¹è±¡çš„<strong>æ·±å±‚å±æ€§</strong>ä½†æœªå¼€å¯<code>deep: true</code>ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šç›‘å¬å“åº”å¼æ•°æ®ï¼ˆ<code>ref</code>/<code>reactive</code>ï¼‰ï¼›ç›‘å¬æ·±å±‚å±æ€§æ—¶ï¼Œç”¨ç®­å¤´å‡½æ•°è¿”å›è¯¥å±æ€§ï¼ˆæ¯”å¦‚<code>watch(() =&gt; obj.deep.color, (val) =&gt; { ... })</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-18">å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Vue3 å“åº”å¼åŸºç¡€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Freactivity-fundamentals.html" target="_blank" title="https://vuejs.org/guide/essentials/reactivity-fundamentals.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ€ç»´é“¾åˆ°æ€ç»´æ ‘ï¼šä¸€æ­¥æ­¥è§£é”å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7585085798809485339</link>    <guid>https://juejin.cn/post/7585085798809485339</guid>    <pubDate>2025-12-19T03:50:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809485339" data-draft-id="7585091685339758638" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ€ç»´é“¾åˆ°æ€ç»´æ ‘ï¼šä¸€æ­¥æ­¥è§£é”å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ› "/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-19T03:50:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ–—ç±³"/> <meta itemprop="url" content="https://juejin.cn/user/3157453124416622"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ€ç»´é“¾åˆ°æ€ç»´æ ‘ï¼šä¸€æ­¥æ­¥è§£é”å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ› 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453124416622/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ–—ç±³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:50:21.000Z" title="Fri Dec 19 2025 03:50:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»æ€ç»´é“¾åˆ°æ€ç»´æ ‘ï¼šä¸€æ­¥æ­¥è§£é”å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›</h2>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆå¤§æ¨¡å‹ä¹Ÿéœ€è¦â€œå­¦â€ä¼šæ€è€ƒï¼Ÿ</h3>
<p>å°½ç®¡å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åœ¨å¤„ç†æµ·é‡ä¿¡æ¯å’Œç”Ÿæˆæµç•…æ–‡æœ¬æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†å®ƒä»¬å¸¸å¸¸åœ¨éœ€è¦å¤æ‚æ¨ç†çš„ä»»åŠ¡ä¸Šé‡åˆ°å›°éš¾ï¼Œä¾‹å¦‚æ•°å­¦åº”ç”¨é¢˜ã€å¸¸è¯†é—®ç­”å’Œæˆ˜ç•¥è§„åˆ’ã€‚ç ”ç©¶è¡¨æ˜ï¼Œä»…ä»…æ‰©å¤§æ¨¡å‹è§„æ¨¡å¹¶ä¸è¶³ä»¥è®©æ¨¡å‹åœ¨ç®—æœ¯ã€å¸¸è¯†å’Œç¬¦å·æ¨ç†ç­‰æŒ‘æˆ˜æ€§ä»»åŠ¡ä¸Šå–å¾—ä¼˜å¼‚è¡¨ç°ã€‚</p>
<p>ç„¶è€Œï¼Œæ¨¡å‹çš„æ¨ç†èƒ½åŠ›å¹¶éé¥ä¸å¯åŠã€‚é€šè¿‡ç‰¹å®šçš„â€œæç¤ºæŠ€æœ¯â€ï¼ˆPrompting Techniquesï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼æ¨¡å‹æ¨¡æ‹Ÿäººç±»çš„æ€è€ƒæ–¹å¼ï¼Œä»è€Œè§£é”å…¶æ½œåœ¨çš„æ¨ç†èƒ½åŠ›ã€‚æœ¬æ–‡å°†ä»¥åˆå­¦è€…å‹å¥½çš„æ–¹å¼ï¼Œå¾ªåºæ¸è¿›åœ°ä»‹ç»è¿™äº›æŠ€æœ¯çš„å‘å±•å†ç¨‹ï¼Œä»åŸºç¡€çš„â€œæ€ç»´é“¾â€ï¼ˆChain of Thoughtï¼‰åˆ°æ›´é«˜çº§çš„â€œè‡ªæˆ‘ä¸€è‡´æ€§â€ï¼ˆSelf-Consistencyï¼‰å’Œâ€œæ€ç»´æ ‘â€ï¼ˆTree of Thoughtsï¼‰ã€‚</p>
<h3 data-id="heading-2">2. åŸºç¡€ï¼šæ€ç»´é“¾ (Chain-of-Thought, CoT) - æ•™ä¼šæ¨¡å‹â€œå¦‚ä½•æ€è€ƒâ€</h3>
<h4 data-id="heading-3">2.1. ä¼ ç»Ÿæç¤º (Standard Prompting) çš„å±€é™æ€§</h4>
<p>åœ¨æ ‡å‡†çš„æç¤ºæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åªç»™æ¨¡å‹å±•ç¤ºé—®é¢˜å’Œæœ€ç»ˆç­”æ¡ˆçš„èŒƒä¾‹ï¼ŒæœŸæœ›å®ƒèƒ½ç›´æ¥æ¨¡ä»¿ã€‚ç„¶è€Œï¼Œå¯¹äºéœ€è¦å¤šæ­¥æ¨ç†çš„é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•å¸¸å¸¸å¯¼è‡´æ¨¡å‹â€œä¸€æ­¥é”™ï¼Œæ­¥æ­¥é”™â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé¢å¯¹ä¸‹é¢è¿™ä¸ªç®€å•çš„æ•°å­¦é¢˜ï¼Œä½¿ç”¨æ ‡å‡†æç¤ºçš„æ¨¡å‹ç»™å‡ºäº†é”™è¯¯çš„ç­”æ¡ˆï¼š</p>
<p><strong>Q: The cafeteria had 23 apples. If they used 20 to make lunch and bought 6 more, how many apples do they have?</strong></p>
<p><strong>A: The answer is 27.</strong></p>
<p>æ¨¡å‹å¾ˆå¯èƒ½è¿›è¡Œäº†ç®€å•ä½†é”™è¯¯çš„è®¡ç®—ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«å¼•å¯¼å»åˆ†è§£é—®é¢˜ï¼Œè€Œæ˜¯è¯•å›¾ä¸€æ­¥åˆ°ä½åœ°çŒœæµ‹ç­”æ¡ˆã€‚</p>
<h4 data-id="heading-4">2.2. æ€ç»´é“¾çš„è¯ç”Ÿï¼šå±•ç¤ºæ€è€ƒè¿‡ç¨‹</h4>
<p>æ€ç»´é“¾ï¼ˆChain-of-Thought, CoTï¼‰æç¤ºçš„æ ¸å¿ƒåŸåˆ™éå¸¸ç›´è§‚ï¼šåœ¨èŒƒä¾‹ä¸­ï¼Œä¸ä»…ä»…ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼Œè€Œæ˜¯å±•ç¤ºé€šå¾€ç­”æ¡ˆçš„ã€ä¸€æ­¥ä¸€æ­¥çš„æ¨ç†è¿‡ç¨‹ã€‚</p>
<p>å¯¹äºåŒæ ·çš„é—®é¢˜ï¼ŒCoT èŒƒä¾‹ä¼šæ˜¯è¿™æ ·ï¼š</p>
<p><strong>Q: The cafeteria had 23 apples. If they used 20 to make lunch and bought 6 more, how many apples do they have?</strong></p>
<p><strong>A:</strong> <strong>The cafeteria had 23 apples originally. They used 20 to make lunch. So they had 23 - 20 = 3. They bought 6 more apples, so they have 3 + 6 = 9.</strong> The answer is 9.</p>
<p>é€šè¿‡å­¦ä¹ è¿™ä¸ªè¿‡ç¨‹ï¼Œæ¨¡å‹é¢†æ‚Ÿåˆ°éœ€è¦å°†æ–°é—®é¢˜åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“äºç®¡ç†çš„éƒ¨åˆ†ï¼Œå¹¶æŒ‰é€»è¾‘é¡ºåºè§£å†³å®ƒä»¬ï¼Œæœ€ç»ˆå¾—å‡ºæ­£ç¡®çš„ç­”æ¡ˆã€‚</p>
<h4 data-id="heading-5">2.3. CoT çš„æƒŠäººæ•ˆæœ</h4>
<p>è¿™ç§ç®€å•çš„æ–¹æ³•å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚ä»¥ PaLM 540B æ¨¡å‹åœ¨ GSM8K æ•°å­¦åŸºå‡†æµ‹è¯•ä¸Šçš„è¡¨ç°ä¸ºä¾‹ï¼ŒCoT çš„æ•ˆæœæ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li><strong>Standard Prompting:</strong> 18% è§£é¢˜æˆåŠŸç‡</li>
<li><strong>Chain-of-Thought Prompting:</strong> 57% è§£é¢˜æˆåŠŸç‡</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒCoT é€šè¿‡ç”Ÿæˆå¯¼å‘æœ€ç»ˆç­”æ¡ˆçš„è‡ªç„¶è¯­è¨€â€œæ¨ç†æ­¥éª¤â€ï¼ˆrationalesï¼‰æ¥å·¥ä½œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ¨ç†èƒ½åŠ›é€šå¸¸åªåœ¨éå¸¸å¤§è§„æ¨¡çš„æ¨¡å‹ä¸­æ‰ä¼šâ€œæ¶Œç°â€ã€‚</p>
<h3 data-id="heading-6">3. è¿›é˜¶ï¼šè‡ªæˆ‘ä¸€è‡´æ€§ (Self-Consistency, SC) - â€œå°‘æ•°æœä»å¤šæ•°â€çš„æ™ºæ…§</h3>
<h4 data-id="heading-7">3.1. CoT çš„ä¸è¶³ä¹‹å¤„</h4>
<p>åŸºç¡€çš„ CoT æ–¹æ³•æœ‰ä¸€ä¸ªæ˜æ˜¾çš„å±€é™æ€§ï¼šå®ƒåªç”Ÿæˆ<strong>ä¸€æ¡</strong>æ¨ç†è·¯å¾„ã€‚å¦‚æœè¿™æ¡è·¯å¾„ä¸­çš„ä»»ä½•ä¸€ä¸ªç¯èŠ‚å‡ºç°é”™è¯¯ï¼Œæœ€ç»ˆçš„ç­”æ¡ˆä¹Ÿå¿…ç„¶æ˜¯é”™è¯¯çš„ã€‚è¿™ä½¿å¾—æ¨ç†è¿‡ç¨‹æ˜¾å¾—æœ‰äº›â€œè„†å¼±â€ã€‚</p>
<h4 data-id="heading-8">3.2. å¼•å…¥è‡ªæˆ‘ä¸€è‡´æ€§ï¼šæ¡æ¡å¤§è·¯é€šç½—é©¬</h4>
<p>è‡ªæˆ‘ä¸€è‡´æ€§ï¼ˆSelf-Consistency, SCï¼‰æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºçš„ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸€ä¸ªå¤æ‚é—®é¢˜é€šå¸¸æœ‰å¤šç§æ–¹æ³•å¯ä»¥å¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚å¦‚æœä¸åŒçš„æ€è€ƒè·¯å¾„éƒ½æŒ‡å‘åŒä¸€ä¸ªç­”æ¡ˆï¼Œé‚£ä¹ˆè¿™ä¸ªç­”æ¡ˆçš„å¯ä¿¡åº¦å°±æ›´é«˜ã€‚</p>
<p>SC çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å¤šæ ·åŒ–é‡‡æ · (Sample):</strong> ä¸å†åªç”Ÿæˆä¸€æ¡â€œè´ªå¿ƒâ€çš„æ¨ç†è·¯å¾„ï¼ˆå³åœ¨æ¯ä¸€æ­¥éƒ½é€‰æ‹©æœ€æ˜¾è€Œæ˜“è§çš„ä¸‹ä¸€æ­¥ï¼‰ï¼Œè€Œæ˜¯æç¤ºæ¨¡å‹ä¸ºåŒä¸€ä¸ªé—®é¢˜ç”Ÿæˆå¤šä¸ª<strong>ä¸åŒ</strong>çš„æ¨ç†è·¯å¾„ã€‚</li>
<li><strong>æ±‡æ€»å¹¶æŠ•ç¥¨ (Marginalize and Vote):</strong> æ£€æŸ¥æ‰€æœ‰è·¯å¾„å¾—å‡ºçš„æœ€ç»ˆç­”æ¡ˆã€‚</li>
<li><strong>é€‰æ‹©æœ€ç»ˆç­”æ¡ˆ (Select):</strong> å°†å‡ºç°æ¬¡æ•°æœ€å¤šçš„ç­”æ¡ˆä½œä¸ºæœ€ç»ˆçš„ã€æœ€å¯é çš„ç­”æ¡ˆã€‚</li>
</ol>
<p>ä»¥â€œJanet çš„é¸­å­â€é—®é¢˜ä¸ºä¾‹ï¼Œæ¨¡å‹å¯èƒ½ç”Ÿæˆäº†å¤šä¸ªæ¨ç†è¿‡ç¨‹ï¼šæœ‰çš„è·¯å¾„è®¡ç®—å‡ºç»“æœæ˜¯â€œ18â€ï¼Œæœ‰çš„ç®—æˆäº†â€œ26â€ï¼Œè¿˜æœ‰çš„ç®—æˆäº†â€œ14â€ã€‚é€šè¿‡æŠ•ç¥¨ï¼ŒSC ä¼šé€‰æ‹©å‡ºç°é¢‘ç‡æœ€é«˜çš„â€œ18â€ä½œä¸ºæœ€ç»ˆç­”æ¡ˆã€‚</p>
<h4 data-id="heading-9">3.3. SC å¸¦æ¥çš„æ˜¾è‘—æå‡</h4>
<p>SC æå¤§åœ°å¢å¼ºäº† CoT çš„æ€§èƒ½å’Œé²æ£’æ€§ã€‚åœ¨å¤šä¸ªæ¨ç†åŸºå‡†æµ‹è¯•ä¸­ï¼Œå®ƒéƒ½å–å¾—äº†æ˜¾è‘—çš„æˆç»©æå‡ï¼š</p>
<ul>
<li><strong>GSM8K:</strong> +17.9%</li>
<li><strong>SVAMP:</strong> +11.0%</li>
<li><strong>AQuA:</strong> +12.2%</li>
<li><strong>StrategyQA:</strong> +6.4%</li>
</ul>
<h3 data-id="heading-10">4. æ¢ç´¢ï¼šæ€ç»´æ ‘ (Tree of Thoughts, ToT) - èµ‹äºˆæ¨¡å‹è§„åˆ’ä¸è¿œè§</h3>
<h4 data-id="heading-11">4.1. CoT å’Œ SC çš„å…±åŒå±€é™</h4>
<p>å°½ç®¡ SC æå‡äº† CoT çš„å‡†ç¡®æ€§ï¼Œä½†ä¸¤è€…éƒ½å­˜åœ¨ä¸€ä¸ªæ ¹æœ¬æ€§çš„å±€é™ï¼šå®ƒä»¬çš„æ¨ç†è¿‡ç¨‹æ˜¯çº¿æ€§çš„ï¼Œä»å·¦åˆ°å³ä¸€æ­¥æ­¥ç”Ÿæˆï¼Œæ— æ³•â€œå›å¤´â€ã€‚è¿™æ„å‘³ç€æ¨¡å‹ä¸èƒ½â€œå‘å‰çœ‹â€æ¥åˆ¤æ–­å½“å‰è·¯å¾„æ˜¯å¦æœ‰å‰é€”ï¼Œä¹Ÿæ— æ³•åœ¨æ„è¯†åˆ°æ—©æœŸé”™è¯¯åâ€œé€€åâ€å¹¶æ¢ç´¢å…¶ä»–å¯èƒ½æ€§ã€‚</p>
<h4 data-id="heading-12">4.2. æ€ç»´æ ‘çš„é©å‘½ï¼šä»â€œé“¾â€åˆ°â€œæ ‘â€</h4>
<p>æ€ç»´æ ‘ï¼ˆTree of Thoughts, ToTï¼‰æ¡†æ¶é€šè¿‡å°†é—®é¢˜è§£å†³è¿‡ç¨‹ä»ä¸€æ¡â€œé“¾â€æ‰©å±•ä¸ºä¸€æ£µâ€œæ ‘â€ï¼Œä»è€Œå…‹æœäº†ä¸Šè¿°å±€é™ã€‚</p>
<p>åœ¨ ToT ä¸­ï¼Œæ¯ä¸€ä¸ªâ€œæƒ³æ³•â€ï¼ˆthoughtï¼‰éƒ½æ˜¯ä¸€ä¸ªè¿è´¯çš„ä¸­é—´æ­¥éª¤ã€‚æ¨¡å‹ä¸å†å±€é™äºå•ä¸€è·¯å¾„ï¼Œè€Œæ˜¯å¯ä»¥ï¼š</p>
<ol>
<li><strong>æ¢ç´¢å¤šä¸ªåˆ†æ”¯ (Explore):</strong> åœ¨é—®é¢˜çš„æ¯ä¸ªé˜¶æ®µï¼Œç”Ÿæˆå¤šä¸ªä¸åŒçš„æƒ³æ³•æˆ–ä¸‹ä¸€æ­¥è¡ŒåŠ¨æ–¹æ¡ˆã€‚</li>
<li><strong>è‡ªæˆ‘è¯„ä¼° (Self-evaluate):</strong> æ¨¡å‹ä¼šè¯„ä¼°æ¯ä¸ªåˆ†æ”¯åœ¨è§£å†³é—®é¢˜ä¸Šå–å¾—çš„è¿›å±•ã€‚</li>
<li><strong>è§„åˆ’ä¸å†³ç­– (Plan &amp; Decide):</strong> æ¨¡å‹å¯ä»¥æœ‰ç­–ç•¥åœ°å‘å‰æ¢ç´¢æœ€æœ‰å¸Œæœ›çš„åˆ†æ”¯ï¼Œæˆ–è€…ä»â€œæ­»èƒ¡åŒâ€ä¸­å›æº¯ï¼Œè½¬è€Œæ¢ç´¢å…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚</li>
</ol>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒToT å°†é—®é¢˜è§£å†³è½¬åŒ–ä¸ºåœ¨ä¸€æ£µå……æ»¡å¯èƒ½æ€§çš„æ¨ç†è·¯å¾„æ ‘ä¸­è¿›è¡Œæœç´¢ã€‚</p>
<h4 data-id="heading-13">4.3. ToT çš„å¨åŠ›ï¼šæ”»å…‹éš¾é¢˜</h4>
<p>ToT åœ¨éœ€è¦å¤æ‚è§„åˆ’å’Œæ¢ç´¢çš„ä»»åŠ¡ä¸­è¡¨ç°å°¤ä¸ºå‡ºè‰²ã€‚ä»¥â€œ24ç‚¹æ¸¸æˆâ€ä¸ºä¾‹ï¼Œä»»åŠ¡è¦æ±‚ä½¿ç”¨ 4 ä¸ªæ•°å­—å’ŒåŸºæœ¬ç®—æœ¯è¿ç®—å¾—å‡º 24ã€‚</p>
<ul>
<li><strong>GPT-4 with CoT:</strong> 4% æˆåŠŸç‡</li>
<li><strong>GPT-4 with ToT:</strong> 74% æˆåŠŸç‡</li>
</ul>
<p>è¿™ä¸€æƒŠäººçš„å¯¹æ¯”è¡¨æ˜ï¼Œå¯¹äºé‚£äº›éœ€è¦éå¹³å‡¡è§„åˆ’æˆ–æœç´¢çš„éš¾é¢˜ï¼ŒToT çš„èƒ½åŠ›è¿œè¶…çº¿æ€§æ¨ç†æ–¹æ³•ã€‚</p>
<h3 data-id="heading-14">5. æ€»ç»“ä¸å¯¹æ¯”</h3>
<p>ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿå›é¡¾ï¼Œä¸‹è¡¨æ€»ç»“äº†è¿™ä¸‰ç§æŠ€æœ¯çš„å…³é”®ç‰¹æ€§ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ€ç»´é“¾ (CoT)</th><th>è‡ªæˆ‘ä¸€è‡´æ€§ (SC)</th><th>æ€ç»´æ ‘ (ToT)</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒæ€æƒ³</strong></td><td>æ¨¡ä»¿å•ä¸€æ­¥éª¤æ¨ç†è¿‡ç¨‹ã€‚</td><td>å¯¹å¤šç§æ¨ç†è·¯å¾„è¿›è¡ŒæŠ•ç¥¨ï¼Œå–æœ€ä¸€è‡´çš„ç­”æ¡ˆã€‚</td><td>ç³»ç»ŸåŒ–åœ°æ¢ç´¢ã€è¯„ä¼°å’Œé€‰æ‹©ä¸åŒçš„æ¨ç†è·¯å¾„ã€‚</td></tr><tr><td><strong>æ¨ç†è¿‡ç¨‹</strong></td><td>å•ä¸€ã€çº¿æ€§çš„è·¯å¾„ã€‚</td><td>å¤šæ¡ç‹¬ç«‹ã€çº¿æ€§çš„è·¯å¾„ã€‚</td><td>æ ‘çŠ¶ç»“æ„ï¼Œæ”¯æŒæ¢ç´¢ã€å‰ç»å’Œå›æº¯ã€‚</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>éœ€è¦å¤šæ­¥æ¨ç†çš„æ ‡å‡†é—®é¢˜ã€‚</td><td>ç­”æ¡ˆæ˜ç¡®ï¼Œä½†è§£æ³•å¤šæ ·çš„å¤æ‚é—®é¢˜ã€‚</td><td>éœ€è¦è§„åˆ’ã€æ¢ç´¢æˆ–ç­–ç•¥è°ƒæ•´çš„å¼€æ”¾æ€§éš¾é¢˜ã€‚</td></tr><tr><td><strong>ä¸»è¦ä¼˜åŠ¿</strong></td><td>ç®€å•æœ‰æ•ˆï¼Œæ˜¾è‘—ä¼˜äºæ ‡å‡†æç¤ºã€‚</td><td>æå‡äº†CoTçš„é²æ£’æ€§å’Œå‡†ç¡®ç‡ã€‚</td><td>èƒ½å¤Ÿè§£å†³CoTå’ŒSCæ— æ³•è§£å†³çš„è§„åˆ’æ€§é—®é¢˜ã€‚</td></tr></tbody></table>
<h3 data-id="heading-15">6. ç»“è¯­</h3>
<p>ä»ç®€å•çš„â€œæ€ç»´é“¾â€åˆ°å¤æ‚çš„â€œæ€ç»´æ ‘â€ï¼Œæˆ‘ä»¬è§è¯äº†é©±åŠ¨å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œæ›´æ·±å±‚æ¬¡æ€è€ƒçš„æ–¹æ³•è®ºæ¼”è¿›ã€‚è¿™äº›æŠ€æœ¯ä¸ä»…æå‡äº†æ¨¡å‹åœ¨å…·ä½“ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬æ¨åŠ¨ AI ä»ç®€å•çš„æ–‡æœ¬ç”Ÿæˆå™¨ï¼Œå‘èƒ½å¤Ÿè¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é—®é¢˜è§£å†³è€…è¿ˆè¿›ã€‚éšç€è¿™äº›æ¨ç†æ¡†æ¶çš„ä¸æ–­å‘å±•ï¼Œæœªæ¥çš„ AI å°†å˜å¾—æ›´åŠ å¼ºå¤§ã€å¯é å’Œæ˜“äºç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ³¨è§£ï¼ˆAnnotationï¼‰æ·±åº¦è§£æï¼šä»å…ƒç¼–ç¨‹åˆ°æ¡†æ¶è®¾è®¡]]></title>    <link>https://juejin.cn/post/7585138968166613028</link>    <guid>https://juejin.cn/post/7585138968166613028</guid>    <pubDate>2025-12-19T05:06:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585138968166613028" data-draft-id="7585138968166563876" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ³¨è§£ï¼ˆAnnotationï¼‰æ·±åº¦è§£æï¼šä»å…ƒç¼–ç¨‹åˆ°æ¡†æ¶è®¾è®¡"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-19T05:06:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ³¨è§£ï¼ˆAnnotationï¼‰æ·±åº¦è§£æï¼šä»å…ƒç¼–ç¨‹åˆ°æ¡†æ¶è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:06:48.000Z" title="Fri Dec 19 2025 05:06:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¼•è¨€ï¼šæ³¨è§£â€”â€”Javaçš„å…ƒç¼–ç¨‹åˆ©å™¨</h2>
<p>æ³¨è§£ï¼ˆAnnotationï¼‰æ˜¯Java 5å¼•å…¥çš„ä¸€é¡¹é©å‘½æ€§ç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä»£ç ä¸­æ·»åŠ å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥è¢«ç¼–è¯‘å™¨ã€å¼€å‘å·¥å…·å’Œè¿è¡Œæ—¶ç¯å¢ƒè¯»å–å’Œä½¿ç”¨ã€‚ä»ç®€å•çš„@Overrideåˆ°å¤æ‚çš„Springæ¡†æ¶æ³¨è§£ï¼Œæ³¨è§£å·²ç»æˆä¸ºç°ä»£Javaå¼€å‘çš„åŸºçŸ³ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ³¨è§£åŸºç¡€ä¸å†…ç½®æ³¨è§£</h2>
<h3 data-id="heading-2">1.1 Javaå†…ç½®æ³¨è§£è¯¦è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-comment">// æ¼”ç¤ºJavaå†…ç½®æ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BuiltInAnnotations</span> {
    
    <span class="hljs-comment">// 1. @Override - ç¡®ä¿æ–¹æ³•æ­£ç¡®é‡å†™çˆ¶ç±»æ–¹æ³•</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"BuiltInAnnotationså®ä¾‹"</span>;
    }
    
    <span class="hljs-comment">// 2. @Deprecated - æ ‡è®°å·²è¿‡æ—¶çš„å…ƒç´ </span>
    <span class="hljs-meta">@Deprecated(
        since = "2.0",
        forRemoval = true
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">oldMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"è¿™æ˜¯è¿‡æ—¶çš„æ–¹æ³•ï¼Œå°†åœ¨æœªæ¥ç‰ˆæœ¬ç§»é™¤"</span>);
    }
    
    <span class="hljs-comment">// 3. @SuppressWarnings - æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š</span>
    <span class="hljs-meta">@SuppressWarnings({"unchecked", "rawtypes"})</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">suppressWarningsExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();  <span class="hljs-comment">// æ²¡æœ‰æ³›å‹çš„List</span>
        list.add(<span class="hljs-string">"å­—ç¬¦ä¸²"</span>);           <span class="hljs-comment">// ä¼šäº§ç”Ÿè­¦å‘Šï¼Œä½†è¢«æŠ‘åˆ¶</span>
    }
    
    <span class="hljs-comment">// 4. @SafeVarargs - æ ‡è®°å¯å˜å‚æ•°æ–¹æ³•æ˜¯å®‰å…¨çš„</span>
    <span class="hljs-meta">@SafeVarargs</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">asList</span><span class="hljs-params">(T... elements)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(elements));
    }
    
    <span class="hljs-comment">// 5. @FunctionalInterface - æ ‡è®°å‡½æ•°å¼æ¥å£ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-meta">@FunctionalInterface</span>
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Calculator</span> {
        <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>;
        
        <span class="hljs-comment">// å¯ä»¥æœ‰é»˜è®¤æ–¹æ³•</span>
        <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printResult</span><span class="hljs-params">(<span class="hljs-type">int</span> result)</span> {
            System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
        }
        
        <span class="hljs-comment">// å¯ä»¥æœ‰é™æ€æ–¹æ³•</span>
        <span class="hljs-keyword">static</span> Calculator <span class="hljs-title function_">create</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> (a, b) -&gt; a + b;
        }
        
        <span class="hljs-comment">// å¯ä»¥é‡å†™Objectçš„æ–¹æ³•ï¼Œä¸è®¡å…¥æŠ½è±¡æ–¹æ³•è®¡æ•°</span>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span>;
    }
    
    <span class="hljs-comment">// 6. @Generated - æ ‡è®°è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </span>
    <span class="hljs-meta">@javax</span>.annotation.Generated(
        value = <span class="hljs-string">"code-generator"</span>,
        date = <span class="hljs-string">"2024-01-01T10:00:00"</span>,
        comments = <span class="hljs-string">"è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç "</span>
    )
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GeneratedClass</span> {
        <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </span>
    }
    
    <span class="hljs-comment">// æ¼”ç¤ºæ³¨è§£çš„ç›®æ ‡é™åˆ¶</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">BuiltInAnnotations</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuiltInAnnotations</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨è¿‡æ—¶æ–¹æ³•ä¼šæœ‰è­¦å‘Š</span>
        demo.oldMethod();
        
        <span class="hljs-comment">// æŸ¥çœ‹æ³¨è§£ä¿¡æ¯</span>
        System.out.println(<span class="hljs-string">"=== æ³¨è§£ä¿¡æ¯ ==="</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–@Overrideæ³¨è§£ä¿¡æ¯</span>
            <span class="hljs-type">Method</span> <span class="hljs-variable">toStringMethod</span> <span class="hljs-operator">=</span> BuiltInAnnotations.class.getMethod(<span class="hljs-string">"toString"</span>);
            <span class="hljs-keyword">if</span> (toStringMethod.isAnnotationPresent(Override.class)) {
                System.out.println(<span class="hljs-string">"toStringæ–¹æ³•ä½¿ç”¨äº†@Overrideæ³¨è§£"</span>);
            }
            
            <span class="hljs-comment">// è·å–@Deprecatedæ³¨è§£ä¿¡æ¯</span>
            <span class="hljs-type">Method</span> <span class="hljs-variable">oldMethod</span> <span class="hljs-operator">=</span> BuiltInAnnotations.class.getMethod(<span class="hljs-string">"oldMethod"</span>);
            <span class="hljs-type">Deprecated</span> <span class="hljs-variable">deprecated</span> <span class="hljs-operator">=</span> oldMethod.getAnnotation(Deprecated.class);
            <span class="hljs-keyword">if</span> (deprecated != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"oldMethodå·²è¿‡æ—¶ï¼Œsince: "</span> + deprecated.since());
                System.out.println(<span class="hljs-string">"æ˜¯å¦è®¡åˆ’ç§»é™¤: "</span> + deprecated.forRemoval());
            }
            
        } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }
    
    <span class="hljs-comment">// 7. é‡å¤æ³¨è§£æ¼”ç¤ºï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-comment">// éœ€è¦å…ˆå®šä¹‰å®¹å™¨æ³¨è§£</span>
    <span class="hljs-meta">@Repeatable(Authors.class)</span>
    <span class="hljs-meta">@interface</span> Author {
        String <span class="hljs-title function_">name</span><span class="hljs-params">()</span>;
        String <span class="hljs-title function_">email</span><span class="hljs-params">()</span>;
    }
    
    <span class="hljs-meta">@interface</span> Authors {
        Author[] value();
    }
    
    <span class="hljs-comment">// ä½¿ç”¨é‡å¤æ³¨è§£</span>
    <span class="hljs-meta">@Author(name = "å¼ ä¸‰", email = "zhangsan@example.com")</span>
    <span class="hljs-meta">@Author(name = "æå››", email = "lisi@example.com")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> {
        <span class="hljs-keyword">private</span> String title;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String title)</span> {
            <span class="hljs-built_in">this</span>.title = title;
        }
    }
    
    <span class="hljs-comment">// 8. ç±»å‹æ³¨è§£ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-comment">// å¯ä»¥æ³¨è§£åœ¨ä»»ä½•ç±»å‹ä½¿ç”¨çš„åœ°æ–¹</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">typeAnnotationExample</span><span class="hljs-params">(
        <span class="hljs-meta">@javax</span>.annotation.NonNull String name,   // å‚æ•°ä¸ä¸º<span class="hljs-literal">null</span>
        List&lt;<span class="hljs-meta">@javax</span>.annotation.NonNull String&gt; list,  // åˆ—è¡¨å…ƒç´ ä¸ä¸º<span class="hljs-literal">null</span>
        <span class="hljs-meta">@javax</span>.annotation.Nullable Integer count  // å‚æ•°å¯ä»¥ä¸º<span class="hljs-literal">null</span>
    )</span> {
        <span class="hljs-comment">// æ–¹æ³•ä½“</span>
    }
}
</code></pre>
<h3 data-id="heading-3">1.2 å…ƒæ³¨è§£ï¼šæ³¨è§£çš„æ³¨è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">// è‡ªå®šä¹‰å…ƒæ³¨è§£æ¼”ç¤º</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetaAnnotations</span> {
    
    <span class="hljs-comment">// 1. @Retention - æŒ‡å®šæ³¨è§£çš„ä¿ç•™ç­–ç•¥</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>   <span class="hljs-comment">// ä»…æºç çº§åˆ«ï¼Œç¼–è¯‘åä¸¢å¼ƒ</span>
    <span class="hljs-meta">@interface</span> SourceAnnotation {}
    
    <span class="hljs-meta">@Retention(RetentionPolicy.CLASS)</span>    <span class="hljs-comment">// ç±»æ–‡ä»¶çº§åˆ«ï¼Œè¿è¡Œæ—¶ä¸å¯è§</span>
    <span class="hljs-meta">@interface</span> ClassAnnotation {}
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>  <span class="hljs-comment">// è¿è¡Œæ—¶å¯è§ï¼ˆæœ€å¸¸ç”¨ï¼‰</span>
    <span class="hljs-meta">@interface</span> RuntimeAnnotation {}
    
    <span class="hljs-comment">// 2. @Target - æŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨çš„å…ƒç´ ç±»å‹</span>
    <span class="hljs-meta">@Target(ElementType.TYPE)</span>            <span class="hljs-comment">// ç±»ã€æ¥å£ã€æšä¸¾</span>
    <span class="hljs-meta">@interface</span> TypeAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.FIELD)</span>           <span class="hljs-comment">// å­—æ®µ</span>
    <span class="hljs-meta">@interface</span> FieldAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>          <span class="hljs-comment">// æ–¹æ³•</span>
    <span class="hljs-meta">@interface</span> MethodAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.PARAMETER)</span>       <span class="hljs-comment">// å‚æ•°</span>
    <span class="hljs-meta">@interface</span> ParameterAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.CONSTRUCTOR)</span>     <span class="hljs-comment">// æ„é€ å™¨</span>
    <span class="hljs-meta">@interface</span> ConstructorAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.LOCAL_VARIABLE)</span>  <span class="hljs-comment">// å±€éƒ¨å˜é‡</span>
    <span class="hljs-meta">@interface</span> LocalVarAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.ANNOTATION_TYPE)</span> <span class="hljs-comment">// æ³¨è§£ç±»å‹</span>
    <span class="hljs-meta">@interface</span> AnnotationTypeAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.PACKAGE)</span>         <span class="hljs-comment">// åŒ…</span>
    <span class="hljs-meta">@interface</span> PackageAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.TYPE_PARAMETER)</span>  <span class="hljs-comment">// ç±»å‹å‚æ•°ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-meta">@interface</span> TypeParameterAnnotation {}
    
    <span class="hljs-meta">@Target(ElementType.TYPE_USE)</span>        <span class="hljs-comment">// ç±»å‹ä½¿ç”¨ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-meta">@interface</span> TypeUseAnnotation {}
    
    <span class="hljs-meta">@Target({ElementType.METHOD, ElementType.FIELD})</span> <span class="hljs-comment">// å¤šä¸ªç›®æ ‡</span>
    <span class="hljs-meta">@interface</span> MultiTargetAnnotation {}
    
    <span class="hljs-comment">// 3. @Documented - åŒ…å«åœ¨JavaDocä¸­</span>
    <span class="hljs-meta">@Documented</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@interface</span> DocumentedAnnotation {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-comment">// 4. @Inherited - å…è®¸å­ç±»ç»§æ‰¿æ³¨è§£</span>
    <span class="hljs-meta">@Inherited</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.TYPE)</span>
    <span class="hljs-meta">@interface</span> InheritedAnnotation {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;
    }
    
    <span class="hljs-comment">// 5. @Repeatable - å…è®¸é‡å¤æ³¨è§£ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-comment">// å·²åœ¨ä¸Šé¢çš„BuiltInAnnotationsä¸­æ¼”ç¤º</span>
    
    <span class="hljs-comment">// åº”ç”¨ç¤ºä¾‹</span>
    <span class="hljs-meta">@TypeAnnotation</span>
    <span class="hljs-meta">@InheritedAnnotation("çˆ¶ç±»")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParentClass</span> {
        <span class="hljs-meta">@FieldAnnotation</span>
        <span class="hljs-keyword">private</span> String name;
        
        <span class="hljs-meta">@MethodAnnotation</span>
        <span class="hljs-meta">@DocumentedAnnotation("è¿™æ˜¯æ–¹æ³•")</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">(<span class="hljs-meta">@ParameterAnnotation</span> String param)</span> {
            <span class="hljs-meta">@LocalVarAnnotation</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">localVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-meta">@ConstructorAnnotation</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ParentClass</span><span class="hljs-params">()</span> {}
    }
    
    <span class="hljs-comment">// å­ç±»ç»§æ‰¿@InheritedAnnotation</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChildClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ParentClass</span> {
        <span class="hljs-comment">// è‡ªåŠ¨ç»§æ‰¿@InheritedAnnotation("çˆ¶ç±»")</span>
    }
    
    <span class="hljs-comment">// ç±»å‹å‚æ•°æ³¨è§£ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericClass</span>&lt;<span class="hljs-meta">@TypeParameterAnnotation</span> T&gt; {
        <span class="hljs-keyword">private</span> List&lt;<span class="hljs-meta">@TypeUseAnnotation</span> T&gt; items;
    }
    
    <span class="hljs-comment">// åŒ…æ³¨è§£éœ€è¦ç‰¹æ®Šçš„package-info.javaæ–‡ä»¶</span>
    <span class="hljs-comment">// package-info.javaå†…å®¹ç¤ºä¾‹ï¼š</span>
    <span class="hljs-comment">/*
    @PackageAnnotation
    package com.example;
    
    import com.example.MetaAnnotations.PackageAnnotation;
    */</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== å…ƒæ³¨è§£æ¼”ç¤º ==="</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥ç»§æ‰¿æ³¨è§£</span>
        System.out.println(<span class="hljs-string">"\n1. æ£€æŸ¥ç»§æ‰¿æ³¨è§£:"</span>);
        System.out.println(<span class="hljs-string">"ParentClassæœ‰@InheritedAnnotation: "</span> + 
            ParentClass.class.isAnnotationPresent(InheritedAnnotation.class));
        System.out.println(<span class="hljs-string">"ChildClassæœ‰@InheritedAnnotation: "</span> + 
            ChildClass.class.isAnnotationPresent(InheritedAnnotation.class));
        System.out.println(<span class="hljs-string">"ChildClassæœ‰@TypeAnnotation: "</span> + 
            ChildClass.class.isAnnotationPresent(TypeAnnotation.class));
        
        <span class="hljs-comment">// æ£€æŸ¥æ–‡æ¡£åŒ–æ³¨è§£</span>
        System.out.println(<span class="hljs-string">"\n2. æ£€æŸ¥æ³¨è§£æ˜¯å¦æ–‡æ¡£åŒ–:"</span>);
        Annotation[] parentAnnotations = ParentClass.class.getAnnotations();
        <span class="hljs-keyword">for</span> (Annotation ann : parentAnnotations) {
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isDocumented</span> <span class="hljs-operator">=</span> ann.annotationType()
                .isAnnotationPresent(Documented.class);
            System.out.println(ann.annotationType().getSimpleName() + 
                <span class="hljs-string">" æ˜¯å¦æ–‡æ¡£åŒ–: "</span> + isDocumented);
        }
        
        <span class="hljs-comment">// åå°„è·å–æ³¨è§£ä¿¡æ¯</span>
        System.out.println(<span class="hljs-string">"\n3. åå°„è·å–æ³¨è§£è¯¦ç»†ä¿¡æ¯:"</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> ParentClass.class.getMethod(<span class="hljs-string">"method"</span>, String.class);
            
            <span class="hljs-comment">// æ–¹æ³•ä¸Šçš„æ³¨è§£</span>
            System.out.println(<span class="hljs-string">"æ–¹æ³•æ³¨è§£:"</span>);
            <span class="hljs-keyword">for</span> (Annotation ann : method.getAnnotations()) {
                System.out.println(<span class="hljs-string">"  - "</span> + ann.annotationType().getSimpleName());
                <span class="hljs-keyword">if</span> (ann <span class="hljs-keyword">instanceof</span> DocumentedAnnotation) {
                    System.out.println(<span class="hljs-string">"    å€¼: "</span> + ((DocumentedAnnotation) ann).value());
                }
            }
            
            <span class="hljs-comment">// å‚æ•°ä¸Šçš„æ³¨è§£</span>
            System.out.println(<span class="hljs-string">"å‚æ•°æ³¨è§£:"</span>);
            Parameter[] parameters = method.getParameters();
            <span class="hljs-keyword">for</span> (Parameter param : parameters) {
                <span class="hljs-keyword">for</span> (Annotation ann : param.getAnnotations()) {
                    System.out.println(<span class="hljs-string">"  - "</span> + ann.annotationType().getSimpleName());
                }
            }
            
        } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 data-id="heading-4">äºŒã€è‡ªå®šä¹‰æ³¨è§£å®æˆ˜</h2>
<h3 data-id="heading-5">2.1 åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.lang.reflect.*;
<span class="hljs-keyword">import</span> java.time.*;
<span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-comment">// è‡ªå®šä¹‰æ³¨è§£å®æˆ˜</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomAnnotations</span> {
    
    <span class="hljs-comment">// 1. éªŒè¯æ³¨è§£ - ç”¨äºå­—æ®µéªŒè¯</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.FIELD)</span>
    <span class="hljs-meta">@interface</span> Validate {
        <span class="hljs-type">int</span> <span class="hljs-title function_">min</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-title function_">max</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Integer.MAX_VALUE;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
        String <span class="hljs-title function_">regex</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        String <span class="hljs-title function_">message</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"éªŒè¯å¤±è´¥"</span>;
    }
    
    <span class="hljs-comment">// 2. æ•°æ®åº“æ˜ å°„æ³¨è§£ - ç±»ä¼¼JPA</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target({ElementType.TYPE, ElementType.FIELD})</span>
    <span class="hljs-meta">@interface</span> Entity {
        String <span class="hljs-title function_">tableName</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.FIELD)</span>
    <span class="hljs-meta">@interface</span> Column {
        String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">nullable</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">unique</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
        <span class="hljs-type">int</span> <span class="hljs-title function_">length</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">255</span>;
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.FIELD)</span>
    <span class="hljs-meta">@interface</span> Id {
        String <span class="hljs-title function_">strategy</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"AUTO"</span>;
    }
    
    <span class="hljs-comment">// 3. APIæ–‡æ¡£æ³¨è§£ - ç±»ä¼¼Swagger</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target({ElementType.METHOD, ElementType.TYPE, ElementType.PARAMETER})</span>
    <span class="hljs-meta">@interface</span> ApiOperation {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;               <span class="hljs-comment">// æ“ä½œæè¿°</span>
        String <span class="hljs-title function_">notes</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;    <span class="hljs-comment">// è¯¦ç»†è¯´æ˜</span>
        HttpMethod <span class="hljs-title function_">method</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> HttpMethod.GET;
        String[] tags() <span class="hljs-keyword">default</span> {};
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">HttpMethod</span> {
            GET, POST, PUT, DELETE, PATCH
        }
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.PARAMETER)</span>
    <span class="hljs-meta">@interface</span> ApiParam {
        String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        String <span class="hljs-title function_">description</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
        String <span class="hljs-title function_">defaultValue</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> ApiResponse {
        <span class="hljs-type">int</span> <span class="hljs-title function_">code</span><span class="hljs-params">()</span>;
        String <span class="hljs-title function_">message</span><span class="hljs-params">()</span>;
        Class&lt;?&gt; type() <span class="hljs-keyword">default</span> Void.class;
    }
    
    <span class="hljs-comment">// 4. ç¼“å­˜æ³¨è§£ - ç±»ä¼¼Spring Cache</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> Cacheable {
        String <span class="hljs-title function_">key</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">long</span> <span class="hljs-title function_">ttl</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">3600</span>;  <span class="hljs-comment">// ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰</span>
        TimeUnit <span class="hljs-title function_">timeUnit</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> TimeUnit.SECONDS;
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">TimeUnit</span> {
            SECONDS, MINUTES, HOURS, DAYS
        }
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> CacheEvict {
        String <span class="hljs-title function_">key</span><span class="hljs-params">()</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">allEntries</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// 5. äº‹åŠ¡æ³¨è§£ - ç±»ä¼¼Spring Transactional</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> Transactional {
        Propagation <span class="hljs-title function_">propagation</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Propagation.REQUIRED;
        Isolation <span class="hljs-title function_">isolation</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Isolation.DEFAULT;
        <span class="hljs-type">int</span> <span class="hljs-title function_">timeout</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> -<span class="hljs-number">1</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">readOnly</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
        Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Throwable</span>&gt;[] rollbackFor() <span class="hljs-keyword">default</span> {};
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Propagation</span> {
            REQUIRED, REQUIRES_NEW, NESTED, SUPPORTS, NOT_SUPPORTED, NEVER, MANDATORY
        }
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Isolation</span> {
            DEFAULT, READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE
        }
    }
    
    <span class="hljs-comment">// åº”ç”¨ç¤ºä¾‹ï¼šç”¨æˆ·å®ä½“ç±»</span>
    <span class="hljs-meta">@Entity(tableName = "users")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
        <span class="hljs-meta">@Id(strategy = "AUTO")</span>
        <span class="hljs-meta">@Column(name = "user_id", nullable = false)</span>
        <span class="hljs-keyword">private</span> Long id;
        
        <span class="hljs-meta">@Validate(required = true, min = 2, max = 50, 
                 regex = "^[a-zA-Z0-9_]+$", 
                 message = "ç”¨æˆ·åå¿…é¡»æ˜¯2-50ä½çš„å­—æ¯æ•°å­—ä¸‹åˆ’çº¿")</span>
        <span class="hljs-meta">@Column(name = "username", nullable = false, unique = true, length = 50)</span>
        <span class="hljs-keyword">private</span> String username;
        
        <span class="hljs-meta">@Validate(required = true, min = 6, 
                 message = "å¯†ç è‡³å°‘6ä½")</span>
        <span class="hljs-meta">@Column(name = "password", nullable = false, length = 100)</span>
        <span class="hljs-keyword">private</span> String password;
        
        <span class="hljs-meta">@Validate(regex = "^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$", 
                 message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")</span>
        <span class="hljs-meta">@Column(name = "email", length = 100)</span>
        <span class="hljs-keyword">private</span> String email;
        
        <span class="hljs-meta">@Validate(min = 0, max = 150, message = "å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´")</span>
        <span class="hljs-meta">@Column(name = "age")</span>
        <span class="hljs-keyword">private</span> Integer age;
        
        <span class="hljs-meta">@Column(name = "created_at", nullable = false)</span>
        <span class="hljs-keyword">private</span> LocalDateTime createdAt;
        
        <span class="hljs-comment">// æ„é€ å™¨ã€getterã€setterçœç•¥...</span>
        
        <span class="hljs-comment">// éªŒè¯æ–¹æ³•</span>
        <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">validate</span><span class="hljs-params">()</span> {
            List&lt;String&gt; errors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            Field[] fields = <span class="hljs-built_in">this</span>.getClass().getDeclaredFields();
            
            <span class="hljs-keyword">for</span> (Field field : fields) {
                <span class="hljs-keyword">if</span> (field.isAnnotationPresent(Validate.class)) {
                    field.setAccessible(<span class="hljs-literal">true</span>);
                    <span class="hljs-type">Validate</span> <span class="hljs-variable">validate</span> <span class="hljs-operator">=</span> field.getAnnotation(Validate.class);
                    
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> field.get(<span class="hljs-built_in">this</span>);
                        
                        <span class="hljs-comment">// æ£€æŸ¥å¿…å¡«</span>
                        <span class="hljs-keyword">if</span> (validate.required() &amp;&amp; value == <span class="hljs-literal">null</span>) {
                            errors.add(field.getName() + <span class="hljs-string">": "</span> + validate.message());
                            <span class="hljs-keyword">continue</span>;
                        }
                        
                        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
                            <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// éå¿…å¡«å­—æ®µä¸ºnullï¼Œè·³è¿‡å…¶ä»–éªŒè¯</span>
                        }
                        
                        <span class="hljs-comment">// å­—ç¬¦ä¸²ç±»å‹éªŒè¯</span>
                        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> String) {
                            <span class="hljs-type">String</span> <span class="hljs-variable">strValue</span> <span class="hljs-operator">=</span> (String) value;
                            
                            <span class="hljs-comment">// é•¿åº¦éªŒè¯</span>
                            <span class="hljs-keyword">if</span> (strValue.length() &lt; validate.min() || 
                                strValue.length() &gt; validate.max()) {
                                errors.add(field.getName() + <span class="hljs-string">": "</span> + validate.message());
                            }
                            
                            <span class="hljs-comment">// æ­£åˆ™éªŒè¯</span>
                            <span class="hljs-keyword">if</span> (!validate.regex().isEmpty() &amp;&amp; 
                                !strValue.matches(validate.regex())) {
                                errors.add(field.getName() + <span class="hljs-string">": "</span> + validate.message());
                            }
                        }
                        
                        <span class="hljs-comment">// æ•°å­—ç±»å‹éªŒè¯</span>
                        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Number) {
                            <span class="hljs-type">Number</span> <span class="hljs-variable">numValue</span> <span class="hljs-operator">=</span> (Number) value;
                            <span class="hljs-keyword">if</span> (numValue.intValue() &lt; validate.min() || 
                                numValue.intValue() &gt; validate.max()) {
                                errors.add(field.getName() + <span class="hljs-string">": "</span> + validate.message());
                            }
                        }
                        
                    } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
                        errors.add(<span class="hljs-string">"æ— æ³•è®¿é—®å­—æ®µ: "</span> + field.getName());
                    }
                }
            }
            
            <span class="hljs-keyword">return</span> errors;
        }
    }
    
    <span class="hljs-comment">// åº”ç”¨ç¤ºä¾‹ï¼šç”¨æˆ·æœåŠ¡ç±»</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
        
        <span class="hljs-meta">@ApiOperation(
            value = "åˆ›å»ºç”¨æˆ·",
            notes = "åˆ›å»ºæ–°ç”¨æˆ·è´¦æˆ·",
            method = ApiOperation.HttpMethod.POST,
            tags = {"ç”¨æˆ·ç®¡ç†"}
        )</span>
        <span class="hljs-meta">@ApiResponse(code = 200, message = "åˆ›å»ºæˆåŠŸ", type = User.class)</span>
        <span class="hljs-meta">@ApiResponse(code = 400, message = "å‚æ•°é”™è¯¯")</span>
        <span class="hljs-meta">@Transactional(
            propagation = Transactional.Propagation.REQUIRED,
            isolation = Transactional.Isolation.READ_COMMITTED,
            rollbackFor = {RuntimeException.class}
        )</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(
            <span class="hljs-meta">@ApiParam(name = "username", description = "ç”¨æˆ·å", required = true)</span>
            String username,
            
            <span class="hljs-meta">@ApiParam(name = "password", description = "å¯†ç ", required = true)</span>
            String password,
            
            <span class="hljs-meta">@ApiParam(name = "email", description = "é‚®ç®±")</span>
            String email
        )</span> {
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
            <span class="hljs-comment">// è®¾ç½®å±æ€§...</span>
            
            <span class="hljs-comment">// éªŒè¯</span>
            List&lt;String&gt; errors = user.validate();
            <span class="hljs-keyword">if</span> (!errors.isEmpty()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"éªŒè¯å¤±è´¥: "</span> + errors);
            }
            
            <span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“...</span>
            <span class="hljs-keyword">return</span> user;
        }
        
        <span class="hljs-meta">@ApiOperation(value = "æ ¹æ®IDè·å–ç”¨æˆ·", tags = {"ç”¨æˆ·ç®¡ç†"})</span>
        <span class="hljs-meta">@Cacheable(key = "'user:' + #id", ttl = 300)</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long id)</span> {
            <span class="hljs-comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢</span>
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢æ•°æ®åº“ï¼Œç”¨æˆ·ID: "</span> + id);
            
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
            <span class="hljs-comment">// è®¾ç½®å±æ€§...</span>
            <span class="hljs-keyword">return</span> user;
        }
        
        <span class="hljs-meta">@ApiOperation(value = "åˆ é™¤ç”¨æˆ·", tags = {"ç”¨æˆ·ç®¡ç†"})</span>
        <span class="hljs-meta">@CacheEvict(key = "'user:' + #id")</span>
        <span class="hljs-meta">@Transactional</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span> {
            <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·...</span>
        }
    }
    
    <span class="hljs-comment">// æ³¨è§£å¤„ç†å™¨</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationProcessor</span> {
        
        <span class="hljs-comment">// ç”ŸæˆSQLå»ºè¡¨è¯­å¥</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateCreateTableSQL</span><span class="hljs-params">(Class&lt;?&gt; entityClass)</span> {
            <span class="hljs-keyword">if</span> (!entityClass.isAnnotationPresent(Entity.class)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ˜¯å®ä½“ç±»"</span>);
            }
            
            <span class="hljs-type">Entity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> entityClass.getAnnotation(Entity.class);
            <span class="hljs-type">String</span> <span class="hljs-variable">tableName</span> <span class="hljs-operator">=</span> entity.tableName();
            <span class="hljs-keyword">if</span> (tableName.isEmpty()) {
                tableName = entityClass.getSimpleName().toLowerCase();
            }
            
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            sql.append(<span class="hljs-string">"CREATE TABLE "</span>).append(tableName).append(<span class="hljs-string">" (\n"</span>);
            
            List&lt;String&gt; columns = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            List&lt;String&gt; primaryKeys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            
            Field[] fields = entityClass.getDeclaredFields();
            <span class="hljs-keyword">for</span> (Field field : fields) {
                <span class="hljs-keyword">if</span> (field.isAnnotationPresent(Column.class)) {
                    <span class="hljs-type">Column</span> <span class="hljs-variable">column</span> <span class="hljs-operator">=</span> field.getAnnotation(Column.class);
                    <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> column.name().isEmpty() ? 
                        field.getName() : column.name();
                    
                    <span class="hljs-comment">// ç¡®å®šåˆ—ç±»å‹</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">columnType</span> <span class="hljs-operator">=</span> getColumnType(field.getType());
                    
                    <span class="hljs-comment">// æ„å»ºåˆ—å®šä¹‰</span>
                    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">columnDef</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
                    columnDef.append(<span class="hljs-string">"  "</span>).append(columnName).append(<span class="hljs-string">" "</span>).append(columnType);
                    
                    <span class="hljs-keyword">if</span> (!column.nullable()) {
                        columnDef.append(<span class="hljs-string">" NOT NULL"</span>);
                    }
                    
                    <span class="hljs-keyword">if</span> (column.unique()) {
                        columnDef.append(<span class="hljs-string">" UNIQUE"</span>);
                    }
                    
                    <span class="hljs-keyword">if</span> (field.isAnnotationPresent(Id.class)) {
                        <span class="hljs-type">Id</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> field.getAnnotation(Id.class);
                        primaryKeys.add(columnName);
                        
                        <span class="hljs-keyword">if</span> (<span class="hljs-string">"AUTO"</span>.equals(id.strategy())) {
                            <span class="hljs-keyword">if</span> (<span class="hljs-string">"BIGINT"</span>.equals(columnType)) {
                                columnDef.append(<span class="hljs-string">" AUTO_INCREMENT"</span>);
                            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"INTEGER"</span>.equals(columnType)) {
                                columnDef.append(<span class="hljs-string">" AUTOINCREMENT"</span>);
                            }
                        }
                    }
                    
                    columns.add(columnDef.toString());
                }
            }
            
            sql.append(String.join(<span class="hljs-string">",\n"</span>, columns));
            
            <span class="hljs-comment">// æ·»åŠ ä¸»é”®çº¦æŸ</span>
            <span class="hljs-keyword">if</span> (!primaryKeys.isEmpty()) {
                sql.append(<span class="hljs-string">",\n  PRIMARY KEY ("</span>)
                   .append(String.join(<span class="hljs-string">", "</span>, primaryKeys))
                   .append(<span class="hljs-string">")"</span>);
            }
            
            sql.append(<span class="hljs-string">"\n);"</span>);
            <span class="hljs-keyword">return</span> sql.toString();
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getColumnType</span><span class="hljs-params">(Class&lt;?&gt; fieldType)</span> {
            <span class="hljs-keyword">if</span> (fieldType == String.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"VARCHAR(255)"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Long.class || fieldType == <span class="hljs-type">long</span>.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"BIGINT"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Integer.class || fieldType == <span class="hljs-type">int</span>.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"INTEGER"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Double.class || fieldType == <span class="hljs-type">double</span>.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"DOUBLE"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Float.class || fieldType == <span class="hljs-type">float</span>.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"FLOAT"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Boolean.class || fieldType == <span class="hljs-type">boolean</span>.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"BOOLEAN"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == LocalDateTime.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"TIMESTAMP"</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fieldType == Date.class) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"DATETIME"</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"TEXT"</span>;
        }
        
        <span class="hljs-comment">// ç”ŸæˆAPIæ–‡æ¡£</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateApiDocumentation</span><span class="hljs-params">(Class&lt;?&gt; serviceClass)</span> {
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            doc.append(<span class="hljs-string">"# APIæ–‡æ¡£\n\n"</span>);
            
            Method[] methods = serviceClass.getDeclaredMethods();
            <span class="hljs-keyword">for</span> (Method method : methods) {
                <span class="hljs-keyword">if</span> (method.isAnnotationPresent(ApiOperation.class)) {
                    <span class="hljs-type">ApiOperation</span> <span class="hljs-variable">operation</span> <span class="hljs-operator">=</span> method.getAnnotation(ApiOperation.class);
                    
                    doc.append(<span class="hljs-string">"## "</span>).append(operation.value()).append(<span class="hljs-string">"\n\n"</span>);
                    doc.append(<span class="hljs-string">"**æ–¹æ³•**: "</span>).append(operation.method()).append(<span class="hljs-string">"\n\n"</span>);
                    
                    <span class="hljs-keyword">if</span> (!operation.notes().isEmpty()) {
                        doc.append(<span class="hljs-string">"**æè¿°**: "</span>).append(operation.notes()).append(<span class="hljs-string">"\n\n"</span>);
                    }
                    
                    <span class="hljs-keyword">if</span> (operation.tags().length &gt; <span class="hljs-number">0</span>) {
                        doc.append(<span class="hljs-string">"**æ ‡ç­¾**: "</span>).append(String.join(<span class="hljs-string">", "</span>, operation.tags())).append(<span class="hljs-string">"\n\n"</span>);
                    }
                    
                    <span class="hljs-comment">// å‚æ•°</span>
                    Parameter[] parameters = method.getParameters();
                    <span class="hljs-keyword">if</span> (parameters.length &gt; <span class="hljs-number">0</span>) {
                        doc.append(<span class="hljs-string">"### å‚æ•°\n\n"</span>);
                        doc.append(<span class="hljs-string">"| å‚æ•°å | æè¿° | å¿…å¡« | é»˜è®¤å€¼ |\n"</span>);
                        doc.append(<span class="hljs-string">"|--------|------|------|--------|\n"</span>);
                        
                        <span class="hljs-keyword">for</span> (Parameter param : parameters) {
                            <span class="hljs-keyword">if</span> (param.isAnnotationPresent(ApiParam.class)) {
                                <span class="hljs-type">ApiParam</span> <span class="hljs-variable">apiParam</span> <span class="hljs-operator">=</span> param.getAnnotation(ApiParam.class);
                                <span class="hljs-type">String</span> <span class="hljs-variable">paramName</span> <span class="hljs-operator">=</span> apiParam.name().isEmpty() ? 
                                    param.getName() : apiParam.name();
                                
                                doc.append(<span class="hljs-string">"| "</span>).append(paramName)
                                   .append(<span class="hljs-string">" | "</span>).append(apiParam.description())
                                   .append(<span class="hljs-string">" | "</span>).append(apiParam.required() ? <span class="hljs-string">"æ˜¯"</span> : <span class="hljs-string">"å¦"</span>)
                                   .append(<span class="hljs-string">" | "</span>).append(apiParam.defaultValue())
                                   .append(<span class="hljs-string">" |\n"</span>);
                            }
                        }
                        doc.append(<span class="hljs-string">"\n"</span>);
                    }
                    
                    <span class="hljs-comment">// å“åº”</span>
                    ApiResponse[] responses = method.getAnnotationsByType(ApiResponse.class);
                    <span class="hljs-keyword">if</span> (responses.length &gt; <span class="hljs-number">0</span>) {
                        doc.append(<span class="hljs-string">"### å“åº”\n\n"</span>);
                        doc.append(<span class="hljs-string">"| çŠ¶æ€ç  | æè¿° | æ•°æ®ç±»å‹ |\n"</span>);
                        doc.append(<span class="hljs-string">"|--------|------|----------|\n"</span>);
                        
                        <span class="hljs-keyword">for</span> (ApiResponse response : responses) {
                            doc.append(<span class="hljs-string">"| "</span>).append(response.code())
                               .append(<span class="hljs-string">" | "</span>).append(response.message())
                               .append(<span class="hljs-string">" | "</span>).append(response.type().getSimpleName())
                               .append(<span class="hljs-string">" |\n"</span>);
                        }
                        doc.append(<span class="hljs-string">"\n"</span>);
                    }
                }
            }
            
            <span class="hljs-keyword">return</span> doc.toString();
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== è‡ªå®šä¹‰æ³¨è§£å®æˆ˜ ===\n"</span>);
        
        <span class="hljs-comment">// 1. ç”Ÿæˆå»ºè¡¨SQL</span>
        System.out.println(<span class="hljs-string">"1. ç”ŸæˆUserå®ä½“å»ºè¡¨SQL:"</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">createTableSQL</span> <span class="hljs-operator">=</span> AnnotationProcessor.generateCreateTableSQL(User.class);
            System.out.println(createTableSQL);
        } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
            System.err.println(e.getMessage());
        }
        
        System.out.println(<span class="hljs-string">"\n2. ç”ŸæˆAPIæ–‡æ¡£:"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">apiDoc</span> <span class="hljs-operator">=</span> AnnotationProcessor.generateApiDocumentation(UserService.class);
        System.out.println(apiDoc);
        
        System.out.println(<span class="hljs-string">"3. éªŒè¯æ³¨è§£æ¼”ç¤º:"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        <span class="hljs-comment">// è®¾ç½®éæ³•æ•°æ®...</span>
        <span class="hljs-comment">// List&lt;String&gt; errors = user.validate();</span>
        <span class="hljs-comment">// System.out.println("éªŒè¯é”™è¯¯: " + errors);</span>
    }
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰</h2>
<h3 data-id="heading-7">3.1 ç¼–è¯‘æ—¶æ³¨è§£å¤„ç†å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.annotation.processing.*;
<span class="hljs-keyword">import</span> javax.lang.model.*;
<span class="hljs-keyword">import</span> javax.lang.model.element.*;
<span class="hljs-keyword">import</span> javax.tools.*;
<span class="hljs-keyword">import</span> java.io.*;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.stream.*;

<span class="hljs-comment">/**
 * ç¼–è¯‘æ—¶æ³¨è§£å¤„ç†å™¨ç¤ºä¾‹
 * éœ€è¦é…ç½®ï¼š
 * 1. åˆ›å»ºMETA-INF/services/javax.annotation.processing.Processoræ–‡ä»¶
 * 2. æ–‡ä»¶å†…å®¹ï¼šcom.example.MyAnnotationProcessor
 * 3. ä½¿ç”¨javac -processor com.example.MyAnnotationProcessorç¼–è¯‘
 */</span>
<span class="hljs-meta">@SupportedAnnotationTypes("com.example.*")</span>
<span class="hljs-meta">@SupportedSourceVersion(SourceVersion.RELEASE_11)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationProcessorExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> {
    
    <span class="hljs-keyword">private</span> Filer filer;
    <span class="hljs-keyword">private</span> Messager messager;
    <span class="hljs-keyword">private</span> Elements elementUtils;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnv)</span> {
        <span class="hljs-built_in">super</span>.init(processingEnv);
        filer = processingEnv.getFiler();
        messager = processingEnv.getMessager();
        elementUtils = processingEnv.getElementUtils();
        
        messager.printMessage(Diagnostic.Kind.NOTE, <span class="hljs-string">"æ³¨è§£å¤„ç†å™¨åˆå§‹åŒ–å®Œæˆ"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; annotations, 
                          RoundEnvironment roundEnv)</span> {
        
        <span class="hljs-comment">// å¤„ç†Builderæ³¨è§£</span>
        <span class="hljs-keyword">for</span> (Element element : roundEnv.getElementsAnnotatedWith(Builder.class)) {
            <span class="hljs-keyword">if</span> (element.getKind() == ElementKind.CLASS) {
                generateBuilderClass((TypeElement) element);
            }
        }
        
        <span class="hljs-comment">// å¤„ç†Singletonæ³¨è§£</span>
        <span class="hljs-keyword">for</span> (Element element : roundEnv.getElementsAnnotatedWith(Singleton.class)) {
            <span class="hljs-keyword">if</span> (element.getKind() == ElementKind.CLASS) {
                generateSingletonCode((TypeElement) element);
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// å®šä¹‰Builderæ³¨è§£</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>  <span class="hljs-comment">// ä»…æºç çº§åˆ«</span>
    <span class="hljs-meta">@Target(ElementType.TYPE)</span>
    <span class="hljs-meta">@interface</span> Builder {
        String <span class="hljs-title function_">builderClassName</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-comment">// å®šä¹‰Singletonæ³¨è§£</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span>
    <span class="hljs-meta">@Target(ElementType.TYPE)</span>
    <span class="hljs-meta">@interface</span> Singleton {
        String <span class="hljs-title function_">instanceName</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"INSTANCE"</span>;
    }
    
    <span class="hljs-comment">// ç¤ºä¾‹ï¼šè¢«æ³¨è§£çš„ç±»</span>
    <span class="hljs-meta">@Builder(builderClassName = "PersonBuilder")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
        
        <span class="hljs-comment">// éœ€è¦æ— å‚æ„é€ å™¨</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> {}
        
        <span class="hljs-comment">// getters and setters...</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> { <span class="hljs-built_in">this</span>.age = age; }
    }
    
    <span class="hljs-meta">@Singleton(instanceName = "LOGGER")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> {
            System.out.println(message);
        }
    }
    
    <span class="hljs-comment">// ç”ŸæˆBuilderç±»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateBuilderClass</span><span class="hljs-params">(TypeElement classElement)</span> {
        <span class="hljs-type">Builder</span> <span class="hljs-variable">builderAnnotation</span> <span class="hljs-operator">=</span> classElement.getAnnotation(Builder.class);
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> classElement.getSimpleName().toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">builderClassName</span> <span class="hljs-operator">=</span> builderAnnotation.builderClassName().isEmpty() ? 
            className + <span class="hljs-string">"Builder"</span> : builderAnnotation.builderClassName();
        
        <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> elementUtils.getPackageOf(classElement).toString();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">JavaFileObject</span> <span class="hljs-variable">builderFile</span> <span class="hljs-operator">=</span> filer.createSourceFile(
                packageName + <span class="hljs-string">"."</span> + builderClassName, classElement);
            
            <span class="hljs-keyword">try</span> (<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(builderFile.openWriter())) {
                <span class="hljs-comment">// ç”ŸæˆåŒ…å£°æ˜</span>
                writer.println(<span class="hljs-string">"package "</span> + packageName + <span class="hljs-string">";"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"// è‡ªåŠ¨ç”Ÿæˆçš„Builderç±»"</span>);
                writer.println(<span class="hljs-string">"// ä¸è¦æ‰‹åŠ¨ä¿®æ”¹æ­¤æ–‡ä»¶"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"public class "</span> + builderClassName + <span class="hljs-string">" {"</span>);
                writer.println();
                
                <span class="hljs-comment">// ç”Ÿæˆç›®æ ‡ç±»å®ä¾‹</span>
                writer.println(<span class="hljs-string">"    private "</span> + className + <span class="hljs-string">" instance = new "</span> + className + <span class="hljs-string">"();"</span>);
                writer.println();
                
                <span class="hljs-comment">// ä¸ºæ¯ä¸ªsetteræ–¹æ³•ç”Ÿæˆbuilderæ–¹æ³•</span>
                List&lt;ExecutableElement&gt; setters = getSetterMethods(classElement);
                <span class="hljs-keyword">for</span> (ExecutableElement setter : setters) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> setter.getSimpleName().toString();
                    <span class="hljs-type">String</span> <span class="hljs-variable">fieldName</span> <span class="hljs-operator">=</span> methodName.substring(<span class="hljs-number">3</span>); <span class="hljs-comment">// å»æ‰"set"</span>
                    fieldName = fieldName.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toLowerCase() + fieldName.substring(<span class="hljs-number">1</span>);
                    
                    <span class="hljs-type">VariableElement</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> setter.getParameters().get(<span class="hljs-number">0</span>);
                    <span class="hljs-type">String</span> <span class="hljs-variable">paramType</span> <span class="hljs-operator">=</span> param.asType().toString();
                    <span class="hljs-type">String</span> <span class="hljs-variable">paramName</span> <span class="hljs-operator">=</span> param.getSimpleName().toString();
                    
                    writer.println(<span class="hljs-string">"    public "</span> + builderClassName + <span class="hljs-string">" "</span> + fieldName + 
                                  <span class="hljs-string">"("</span> + paramType + <span class="hljs-string">" "</span> + paramName + <span class="hljs-string">") {"</span>);
                    writer.println(<span class="hljs-string">"        instance."</span> + methodName + <span class="hljs-string">"("</span> + paramName + <span class="hljs-string">");"</span>);
                    writer.println(<span class="hljs-string">"        return this;"</span>);
                    writer.println(<span class="hljs-string">"    }"</span>);
                    writer.println();
                }
                
                <span class="hljs-comment">// ç”Ÿæˆbuildæ–¹æ³•</span>
                writer.println(<span class="hljs-string">"    public "</span> + className + <span class="hljs-string">" build() {"</span>);
                writer.println(<span class="hljs-string">"        return instance;"</span>);
                writer.println(<span class="hljs-string">"    }"</span>);
                writer.println(<span class="hljs-string">"}"</span>);
            }
            
            messager.printMessage(Diagnostic.Kind.NOTE, 
                <span class="hljs-string">"ç”ŸæˆBuilderç±»: "</span> + builderClassName);
            
        } <span class="hljs-keyword">catch</span> (IOException e) {
            messager.printMessage(Diagnostic.Kind.ERROR, 
                <span class="hljs-string">"æ— æ³•ç”ŸæˆBuilderç±»: "</span> + e.getMessage());
        }
    }
    
    <span class="hljs-comment">// ç”Ÿæˆå•ä¾‹ä»£ç </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateSingletonCode</span><span class="hljs-params">(TypeElement classElement)</span> {
        <span class="hljs-type">Singleton</span> <span class="hljs-variable">singletonAnnotation</span> <span class="hljs-operator">=</span> classElement.getAnnotation(Singleton.class);
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> classElement.getSimpleName().toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">instanceName</span> <span class="hljs-operator">=</span> singletonAnnotation.instanceName();
        
        <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> elementUtils.getPackageOf(classElement).toString();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">JavaFileObject</span> <span class="hljs-variable">singletonFile</span> <span class="hljs-operator">=</span> filer.createSourceFile(
                packageName + <span class="hljs-string">"."</span> + className + <span class="hljs-string">"Singleton"</span>, classElement);
            
            <span class="hljs-keyword">try</span> (<span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintWriter</span>(singletonFile.openWriter())) {
                writer.println(<span class="hljs-string">"package "</span> + packageName + <span class="hljs-string">";"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"// è‡ªåŠ¨ç”Ÿæˆçš„SingletonåŒ…è£…ç±»"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"public class "</span> + className + <span class="hljs-string">"Singleton {"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"    private static final "</span> + className + 
                             <span class="hljs-string">" "</span> + instanceName + <span class="hljs-string">" = new "</span> + className + <span class="hljs-string">"();"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"    private "</span> + className + <span class="hljs-string">"Singleton() {}"</span>);
                writer.println();
                writer.println(<span class="hljs-string">"    public static "</span> + className + <span class="hljs-string">" getInstance() {"</span>);
                writer.println(<span class="hljs-string">"        return "</span> + instanceName + <span class="hljs-string">";"</span>);
                writer.println(<span class="hljs-string">"    }"</span>);
                writer.println(<span class="hljs-string">"}"</span>);
            }
            
            messager.printMessage(Diagnostic.Kind.NOTE,
                <span class="hljs-string">"ç”ŸæˆSingletonåŒ…è£…ç±»: "</span> + className + <span class="hljs-string">"Singleton"</span>);
            
        } <span class="hljs-keyword">catch</span> (IOException e) {
            messager.printMessage(Diagnostic.Kind.ERROR,
                <span class="hljs-string">"æ— æ³•ç”ŸæˆSingletonç±»: "</span> + e.getMessage());
        }
    }
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰setteræ–¹æ³•</span>
    <span class="hljs-keyword">private</span> List&lt;ExecutableElement&gt; <span class="hljs-title function_">getSetterMethods</span><span class="hljs-params">(TypeElement classElement)</span> {
        <span class="hljs-keyword">return</span> ElementFilter.methodsIn(classElement.getEnclosedElements())
            .stream()
            .filter(method -&gt; method.getSimpleName().toString().startsWith(<span class="hljs-string">"set"</span>))
            .filter(method -&gt; method.getParameters().size() == <span class="hljs-number">1</span>)
            .filter(method -&gt; method.getReturnType().toString().equals(<span class="hljs-string">"void"</span>))
            .collect(Collectors.toList());
    }
    
    <span class="hljs-comment">// æ‰‹åŠ¨ç¼–è¯‘æµ‹è¯•ï¼ˆä¸ä½¿ç”¨APTï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWithoutAPT</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"=== æ³¨è§£å¤„ç†å™¨æ¨¡æ‹Ÿæ¼”ç¤º ==="</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆçš„Builderç±»</span>
        System.out.println(<span class="hljs-string">"\n1. æ¨¡æ‹Ÿç”Ÿæˆçš„PersonBuilder:"</span>);
        System.out.println(<span class="hljs-string">"""
            public class PersonBuilder {
                private Person instance = new Person();
                
                public PersonBuilder name(String name) {
                    instance.setName(name);
                    return this;
                }
                
                public PersonBuilder age(int age) {
                    instance.setAge(age);
                    return this;
                }
                
                public Person build() {
                    return instance;
                }
            }
            """</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿä½¿ç”¨</span>
        System.out.println(<span class="hljs-string">"\n2. Builderä½¿ç”¨ç¤ºä¾‹:"</span>);
        System.out.println(<span class="hljs-string">"""
            Person person = new PersonBuilder()
                .name("å¼ ä¸‰")
                .age(25)
                .build();
            """</span>);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆçš„Singletonç±»</span>
        System.out.println(<span class="hljs-string">"\n3. æ¨¡æ‹Ÿç”Ÿæˆçš„LoggerSingleton:"</span>);
        System.out.println(<span class="hljs-string">"""
            public class LoggerSingleton {
                private static final Logger LOGGER = new Logger();
                
                private LoggerSingleton() {}
                
                public static Logger getInstance() {
                    return LOGGER;
                }
            }
            """</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        testWithoutAPT();
    }
}
</code></pre>
<h2 data-id="heading-8">å››ã€è¿è¡Œæ—¶æ³¨è§£å¤„ç†æ¡†æ¶</h2>
<h3 data-id="heading-9">4.1 è‡ªå®šä¹‰ä¾èµ–æ³¨å…¥æ¡†æ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.lang.reflect.*;
<span class="hljs-keyword">import</span> java.util.*;
<span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-comment">// è‡ªå®šä¹‰ç®€å•çš„IoCå®¹å™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleIoCContainer</span> {
    
    <span class="hljs-comment">// å®šä¹‰æ³¨è§£</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target({ElementType.TYPE, ElementType.FIELD})</span>
    <span class="hljs-meta">@interface</span> Component {
        String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        Scope <span class="hljs-title function_">scope</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Scope.SINGLETON;
        
        <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Scope</span> {
            SINGLETON, PROTOTYPE
        }
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.FIELD)</span>
    <span class="hljs-meta">@interface</span> Autowired {
        String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-title function_">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> PostConstruct {}
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.TYPE)</span>
    <span class="hljs-meta">@interface</span> Configuration {}
    
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> Bean {
        String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
        Scope <span class="hljs-title function_">scope</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Scope.SINGLETON;
    }
    
    <span class="hljs-comment">// IoCå®¹å™¨å®ç°</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; singletons = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Class&lt;?&gt;&gt; beanDefinitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, BeanInfo&gt; beanInfoMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanInfo</span> {
            Class&lt;?&gt; beanClass;
            Component.Scope scope;
            String name;
            Method factoryMethod;
            Object configInstance;
            
            BeanInfo(Class&lt;?&gt; beanClass, Component.Scope scope, String name) {
                <span class="hljs-built_in">this</span>.beanClass = beanClass;
                <span class="hljs-built_in">this</span>.scope = scope;
                <span class="hljs-built_in">this</span>.name = name;
            }
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanPackage</span><span class="hljs-params">(String basePackage)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-comment">// ç®€åŒ–ç‰ˆï¼šæ‰‹åŠ¨æ³¨å†Œï¼Œå®é™…åº”è¯¥æ‰«æç±»è·¯å¾„</span>
            System.out.println(<span class="hljs-string">"æ‰«æåŒ…: "</span> + basePackage);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
            <span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Component.class)) {
                <span class="hljs-type">Component</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> clazz.getAnnotation(Component.class);
                <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> component.value().isEmpty() ? 
                    getBeanName(clazz) : component.value();
                
                <span class="hljs-type">BeanInfo</span> <span class="hljs-variable">beanInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanInfo</span>(
                    clazz, component.scope(), beanName
                );
                beanInfoMap.put(beanName, beanInfo);
                beanDefinitions.put(beanName, clazz);
                
                System.out.println(<span class="hljs-string">"æ³¨å†Œç»„ä»¶: "</span> + beanName + <span class="hljs-string">" -&gt; "</span> + clazz.getName());
            }
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerConfiguration</span><span class="hljs-params">(Class&lt;?&gt; configClass)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-keyword">if</span> (!configClass.isAnnotationPresent(Configuration.class)) {
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-type">Object</span> <span class="hljs-variable">configInstance</span> <span class="hljs-operator">=</span> configClass.getDeclaredConstructor().newInstance();
            
            <span class="hljs-keyword">for</span> (Method method : configClass.getDeclaredMethods()) {
                <span class="hljs-keyword">if</span> (method.isAnnotationPresent(Bean.class)) {
                    <span class="hljs-type">Bean</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> method.getAnnotation(Bean.class);
                    <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> bean.name().isEmpty() ? 
                        getBeanName(method.getReturnType()) : bean.name();
                    
                    <span class="hljs-type">BeanInfo</span> <span class="hljs-variable">beanInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanInfo</span>(
                        method.getReturnType(), bean.scope(), beanName
                    );
                    beanInfo.factoryMethod = method;
                    beanInfo.configInstance = configInstance;
                    
                    beanInfoMap.put(beanName, beanInfo);
                    
                    System.out.println(<span class="hljs-string">"æ³¨å†ŒBean: "</span> + beanName + <span class="hljs-string">" -&gt; "</span> + 
                        method.getReturnType().getName());
                }
            }
        }
        
        <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
        <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(String name)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-comment">// å…ˆä»å•ä¾‹æ± è·å–</span>
            <span class="hljs-keyword">if</span> (singletons.containsKey(name)) {
                <span class="hljs-keyword">return</span> (T) singletons.get(name);
            }
            
            <span class="hljs-type">BeanInfo</span> <span class="hljs-variable">beanInfo</span> <span class="hljs-operator">=</span> beanInfoMap.get(name);
            <span class="hljs-keyword">if</span> (beanInfo == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Beanæœªæ‰¾åˆ°: "</span> + name);
            }
            
            <span class="hljs-comment">// åˆ›å»ºBeanå®ä¾‹</span>
            Object bean;
            <span class="hljs-keyword">if</span> (beanInfo.factoryMethod != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// å·¥å‚æ–¹æ³•åˆ›å»º</span>
                bean = beanInfo.factoryMethod.invoke(beanInfo.configInstance);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ„é€ å™¨åˆ›å»º</span>
                bean = beanInfo.beanClass.getDeclaredConstructor().newInstance();
            }
            
            <span class="hljs-comment">// ä¾èµ–æ³¨å…¥</span>
            injectDependencies(bean);
            
            <span class="hljs-comment">// è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•</span>
            invokePostConstruct(bean);
            
            <span class="hljs-comment">// æ ¹æ®Scopeå¤„ç†</span>
            <span class="hljs-keyword">if</span> (beanInfo.scope == Component.Scope.SINGLETON) {
                singletons.put(name, bean);
            }
            
            <span class="hljs-keyword">return</span> (T) bean;
        }
        
        <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> getBeanName(clazz);
            <span class="hljs-keyword">return</span> getBean(beanName);
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">injectDependencies</span><span class="hljs-params">(Object bean)</span> <span class="hljs-keyword">throws</span> Exception {
            Class&lt;?&gt; clazz = bean.getClass();
            
            <span class="hljs-keyword">for</span> (Field field : clazz.getDeclaredFields()) {
                <span class="hljs-keyword">if</span> (field.isAnnotationPresent(Autowired.class)) {
                    <span class="hljs-type">Autowired</span> <span class="hljs-variable">autowired</span> <span class="hljs-operator">=</span> field.getAnnotation(Autowired.class);
                    <span class="hljs-type">String</span> <span class="hljs-variable">dependencyName</span> <span class="hljs-operator">=</span> autowired.name().isEmpty() ? 
                        getBeanName(field.getType()) : autowired.name();
                    
                    <span class="hljs-type">Object</span> <span class="hljs-variable">dependency</span> <span class="hljs-operator">=</span> getBean(dependencyName);
                    
                    field.setAccessible(<span class="hljs-literal">true</span>);
                    field.set(bean, dependency);
                    
                    System.out.println(<span class="hljs-string">"æ³¨å…¥ä¾èµ–: "</span> + clazz.getSimpleName() + 
                        <span class="hljs-string">"."</span> + field.getName() + <span class="hljs-string">" -&gt; "</span> + dependencyName);
                }
            }
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokePostConstruct</span><span class="hljs-params">(Object bean)</span> <span class="hljs-keyword">throws</span> Exception {
            Class&lt;?&gt; clazz = bean.getClass();
            
            <span class="hljs-keyword">for</span> (Method method : clazz.getDeclaredMethods()) {
                <span class="hljs-keyword">if</span> (method.isAnnotationPresent(PostConstruct.class)) {
                    method.setAccessible(<span class="hljs-literal">true</span>);
                    method.invoke(bean);
                    
                    System.out.println(<span class="hljs-string">"è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•: "</span> + 
                        clazz.getSimpleName() + <span class="hljs-string">"."</span> + method.getName());
                }
            }
        }
        
        <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getBeanName</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> clazz.getSimpleName();
            <span class="hljs-keyword">return</span> className.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toLowerCase() + className.substring(<span class="hljs-number">1</span>);
        }
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
    <span class="hljs-comment">// å®šä¹‰æœåŠ¡æ¥å£</span>
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
        String <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(Long userId)</span>;
    }
    
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderService</span> {
        String <span class="hljs-title function_">getOrderInfo</span><span class="hljs-params">(Long orderId)</span>;
    }
    
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmailService</span> {
        <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">(String to, String content)</span>;
    }
    
    <span class="hljs-comment">// å®ç°ç±»</span>
    <span class="hljs-meta">@Component("userService")</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
        <span class="hljs-meta">@Autowired</span>
        <span class="hljs-keyword">private</span> EmailService emailService;
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserInfo</span><span class="hljs-params">(Long userId)</span> {
            emailService.sendEmail(<span class="hljs-string">"user@example.com"</span>, <span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯: ID="</span> + userId;
        }
        
        <span class="hljs-meta">@PostConstruct</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"UserServiceåˆå§‹åŒ–å®Œæˆ"</span>);
        }
    }
    
    <span class="hljs-meta">@Component(scope = Component.Scope.PROTOTYPE)</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderService</span> {
        <span class="hljs-meta">@Autowired(required = false)</span>  <span class="hljs-comment">// éå¿…éœ€ä¾èµ–</span>
        <span class="hljs-keyword">private</span> UserService userService;
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getOrderInfo</span><span class="hljs-params">(Long orderId)</span> {
            <span class="hljs-keyword">if</span> (userService != <span class="hljs-literal">null</span>) {
                userService.getUserInfo(<span class="hljs-number">1L</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è®¢å•ä¿¡æ¯: ID="</span> + orderId;
        }
    }
    
    <span class="hljs-meta">@Component</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">EmailService</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">(String to, String content)</span> {
            System.out.println(<span class="hljs-string">"å‘é€é‚®ä»¶åˆ° "</span> + to + <span class="hljs-string">": "</span> + content);
        }
    }
    
    <span class="hljs-comment">// é…ç½®ç±»</span>
    <span class="hljs-meta">@Configuration</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> {
        <span class="hljs-meta">@Bean(name = "configBean")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">configString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"é…ç½®çš„å­—ç¬¦ä¸²Bean"</span>;
        }
        
        <span class="hljs-meta">@Bean(scope = Bean.Scope.PROTOTYPE)</span>
        <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">currentDate</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        }
    }
    
    <span class="hljs-comment">// ä½¿ç”¨å®¹å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"=== è‡ªå®šä¹‰IoCå®¹å™¨æ¼”ç¤º ===\n"</span>);
        
        <span class="hljs-type">Container</span> <span class="hljs-variable">container</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Container</span>();
        
        <span class="hljs-comment">// æ³¨å†Œç»„ä»¶</span>
        container.register(UserServiceImpl.class);
        container.register(OrderServiceImpl.class);
        container.register(EmailServiceImpl.class);
        
        <span class="hljs-comment">// æ³¨å†Œé…ç½®ç±»</span>
        container.registerConfiguration(AppConfig.class);
        
        System.out.println(<span class="hljs-string">"\n=== è·å–Beanæµ‹è¯• ==="</span>);
        
        <span class="hljs-comment">// è·å–å•ä¾‹Bean</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> container.getBean(<span class="hljs-string">"userService"</span>);
        System.out.println(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡: "</span> + userService.getUserInfo(<span class="hljs-number">1L</span>));
        
        <span class="hljs-comment">// è·å–åŸå‹Beanï¼ˆæ¯æ¬¡éƒ½æ˜¯æ–°å®ä¾‹ï¼‰</span>
        <span class="hljs-type">OrderService</span> <span class="hljs-variable">orderService1</span> <span class="hljs-operator">=</span> container.getBean(OrderServiceImpl.class);
        <span class="hljs-type">OrderService</span> <span class="hljs-variable">orderService2</span> <span class="hljs-operator">=</span> container.getBean(OrderServiceImpl.class);
        System.out.println(<span class="hljs-string">"è®¢å•æœåŠ¡å®ä¾‹æ˜¯å¦ç›¸åŒ: "</span> + (orderService1 == orderService2));
        
        <span class="hljs-comment">// è·å–é…ç½®çš„Bean</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">configBean</span> <span class="hljs-operator">=</span> container.getBean(<span class="hljs-string">"configBean"</span>);
        System.out.println(<span class="hljs-string">"é…ç½®Bean: "</span> + configBean);
        
        <span class="hljs-type">Date</span> <span class="hljs-variable">date1</span> <span class="hljs-operator">=</span> container.getBean(Date.class);
        <span class="hljs-type">Date</span> <span class="hljs-variable">date2</span> <span class="hljs-operator">=</span> container.getBean(Date.class);
        System.out.println(<span class="hljs-string">"Dateå®ä¾‹æ˜¯å¦ç›¸åŒ: "</span> + (date1 == date2));
        
        System.out.println(<span class="hljs-string">"\n=== å®¹å™¨çŠ¶æ€ ==="</span>);
        System.out.println(<span class="hljs-string">"å•ä¾‹æ± å¤§å°: "</span> + container.singletons.size());
        System.out.println(<span class="hljs-string">"Beanå®šä¹‰æ•°é‡: "</span> + container.beanInfoMap.size());
    }
}
</code></pre>
<h2 data-id="heading-10">äº”ã€æ³¨è§£æ€§èƒ½ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-11">5.1 æ³¨è§£æ€§èƒ½åˆ†æä¸ä¼˜åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.lang.reflect.*;
<span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationPerformance</span> {
    
    <span class="hljs-comment">// æ€§èƒ½æµ‹è¯•æ³¨è§£</span>
    <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
    <span class="hljs-meta">@Target(ElementType.METHOD)</span>
    <span class="hljs-meta">@interface</span> Benchmark {
        <span class="hljs-type">int</span> <span class="hljs-title function_">iterations</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1000</span>;
        TimeUnit <span class="hljs-title function_">timeUnit</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> TimeUnit.NANOSECONDS;
    }
    
    <span class="hljs-comment">// ç¼“å­˜æ³¨è§£ä¿¡æ¯ï¼Œé¿å…é‡å¤åå°„</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationCache</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;Method, Benchmark&gt; benchmarkCache = 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Benchmark <span class="hljs-title function_">getBenchmarkAnnotation</span><span class="hljs-params">(Method method)</span> {
            <span class="hljs-keyword">return</span> benchmarkCache.computeIfAbsent(method, m -&gt; 
                m.getAnnotation(Benchmark.class));
        }
    }
    
    <span class="hljs-comment">// æ€§èƒ½æµ‹è¯•è¿è¡Œå™¨</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BenchmarkRunner</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runBenchmarks</span><span class="hljs-params">(Object instance)</span> <span class="hljs-keyword">throws</span> Exception {
            Class&lt;?&gt; clazz = instance.getClass();
            
            <span class="hljs-keyword">for</span> (Method method : clazz.getDeclaredMethods()) {
                <span class="hljs-type">Benchmark</span> <span class="hljs-variable">benchmark</span> <span class="hljs-operator">=</span> AnnotationCache.getBenchmarkAnnotation(method);
                <span class="hljs-keyword">if</span> (benchmark != <span class="hljs-literal">null</span>) {
                    runBenchmark(method, instance, benchmark);
                }
            }
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runBenchmark</span><span class="hljs-params">(Method method, Object instance, 
                                        Benchmark benchmark)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-type">int</span> <span class="hljs-variable">iterations</span> <span class="hljs-operator">=</span> benchmark.iterations();
            <span class="hljs-type">TimeUnit</span> <span class="hljs-variable">timeUnit</span> <span class="hljs-operator">=</span> benchmark.timeUnit();
            
            <span class="hljs-comment">// é¢„çƒ­</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                method.invoke(instance);
            }
            
            <span class="hljs-comment">// æ‰§è¡ŒåŸºå‡†æµ‹è¯•</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.nanoTime();
            
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; iterations; i++) {
                method.invoke(instance);
            }
            
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.nanoTime();
            <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> endTime - startTime;
            
            <span class="hljs-comment">// è½¬æ¢ä¸ºæŒ‡å®šæ—¶é—´å•ä½</span>
            <span class="hljs-type">double</span> <span class="hljs-variable">convertedDuration</span> <span class="hljs-operator">=</span> convertToTimeUnit(duration, timeUnit);
            
            System.out.printf(<span class="hljs-string">"æ–¹æ³• %s: %dæ¬¡è¿­ä»£, æ€»è€—æ—¶: %.2f %s, å¹³å‡è€—æ—¶: %.4f %s%n"</span>,
                method.getName(),
                iterations,
                convertedDuration,
                timeUnit.name().toLowerCase(),
                convertedDuration / iterations,
                timeUnit.name().toLowerCase());
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">convertToTimeUnit</span><span class="hljs-params">(<span class="hljs-type">long</span> nanos, TimeUnit timeUnit)</span> {
            <span class="hljs-keyword">switch</span> (timeUnit) {
                <span class="hljs-keyword">case</span> NANOSECONDS: <span class="hljs-keyword">return</span> nanos;
                <span class="hljs-keyword">case</span> MICROSECONDS: <span class="hljs-keyword">return</span> nanos / <span class="hljs-number">1000.0</span>;
                <span class="hljs-keyword">case</span> MILLISECONDS: <span class="hljs-keyword">return</span> nanos / <span class="hljs-number">1_000_000.0</span>;
                <span class="hljs-keyword">case</span> SECONDS: <span class="hljs-keyword">return</span> nanos / <span class="hljs-number">1_000_000_000.0</span>;
                <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> nanos;
            }
        }
    }
    
    <span class="hljs-comment">// æµ‹è¯•ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceTest</span> {
        
        <span class="hljs-meta">@Benchmark(iterations = 10000)</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fastMethod</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// å¿«é€Ÿæ–¹æ³•</span>
            Math.sqrt(<span class="hljs-number">123.456</span>);
        }
        
        <span class="hljs-meta">@Benchmark(iterations = 1000, timeUnit = TimeUnit.MICROSECONDS)</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">mediumMethod</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// ä¸­ç­‰é€Ÿåº¦æ–¹æ³•</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
                Math.pow(i, <span class="hljs-number">2</span>);
            }
        }
        
        <span class="hljs-meta">@Benchmark(iterations = 100, timeUnit = TimeUnit.MILLISECONDS)</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">slowMethod</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// æ…¢é€Ÿæ–¹æ³•</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
        
        <span class="hljs-comment">// æ²¡æœ‰æ³¨è§£çš„æ–¹æ³•ï¼Œä¸ä¼šè¢«æµ‹è¯•</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ignoredMethod</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"è¿™ä¸ªæ–¹æ³•ä¸ä¼šè¢«æµ‹è¯•"</span>);
        }
    }
    
    <span class="hljs-comment">// åå°„æ€§èƒ½å¯¹æ¯”</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReflectionPerformance</span> {
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">comparePerformance</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-type">PerformanceTest</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceTest</span>();
            <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> PerformanceTest.class.getMethod(<span class="hljs-string">"fastMethod"</span>);
            
            <span class="hljs-type">int</span> <span class="hljs-variable">iterations</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;
            
            <span class="hljs-comment">// ç›´æ¥è°ƒç”¨</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.nanoTime();
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; iterations; i++) {
                test.fastMethod();
            }
            <span class="hljs-type">long</span> <span class="hljs-variable">directTime</span> <span class="hljs-operator">=</span> System.nanoTime() - start;
            
            <span class="hljs-comment">// åå°„è°ƒç”¨ï¼ˆæ— ç¼“å­˜ï¼‰</span>
            start = System.nanoTime();
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; iterations; i++) {
                method.invoke(test);
            }
            <span class="hljs-type">long</span> <span class="hljs-variable">reflectionTime</span> <span class="hljs-operator">=</span> System.nanoTime() - start;
            
            <span class="hljs-comment">// åå°„è°ƒç”¨ï¼ˆè®¾ç½®å¯è®¿é—®ï¼‰</span>
            method.setAccessible(<span class="hljs-literal">true</span>);
            start = System.nanoTime();
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; iterations; i++) {
                method.invoke(test);
            }
            <span class="hljs-type">long</span> <span class="hljs-variable">accessibleTime</span> <span class="hljs-operator">=</span> System.nanoTime() - start;
            
            System.out.println(<span class="hljs-string">"=== åå°„æ€§èƒ½å¯¹æ¯” ==="</span>);
            System.out.printf(<span class="hljs-string">"ç›´æ¥è°ƒç”¨: %d ns%n"</span>, directTime);
            System.out.printf(<span class="hljs-string">"åå°„è°ƒç”¨: %d ns (æ…¢%.1få€)%n"</span>, 
                reflectionTime, reflectionTime * <span class="hljs-number">1.0</span> / directTime);
            System.out.printf(<span class="hljs-string">"åå°„(setAccessible): %d ns (æ…¢%.1få€)%n"</span>, 
                accessibleTime, accessibleTime * <span class="hljs-number">1.0</span> / directTime);
        }
    }
    
    <span class="hljs-comment">// æ³¨è§£æœ€ä½³å®è·µ</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BestPractices</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showBestPractices</span><span class="hljs-params">()</span> {
            System.out.println(<span class="hljs-string">"\n=== æ³¨è§£æœ€ä½³å®è·µ ==="</span>);
            
            System.out.println(<span class="hljs-string">"\n1. åˆç†é€‰æ‹©ä¿ç•™ç­–ç•¥:"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ @Retention(SOURCE) - ç¼–è¯‘æ—¶å¤„ç†ï¼Œä¸å½±å“è¿è¡Œæ—¶æ€§èƒ½"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ @Retention(CLASS) - é»˜è®¤ç­–ç•¥ï¼Œç”Ÿæˆç±»æ–‡ä»¶ä½†ä¸åŠ è½½"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ @Retention(RUNTIME) - è¿è¡Œæ—¶å¯ç”¨ï¼Œä½†æœ‰æ€§èƒ½å¼€é”€"</span>);
            
            System.out.println(<span class="hljs-string">"\n2. æ˜ç¡®æŒ‡å®šç›®æ ‡:"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ä½¿ç”¨@Targeté™åˆ¶æ³¨è§£ä½¿ç”¨ä½ç½®"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ é¿å…è¿‡äºå®½æ³›çš„ç›®æ ‡èŒƒå›´"</span>);
            
            System.out.println(<span class="hljs-string">"\n3. è®¾è®¡ç®€æ´çš„æ³¨è§£:"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ æä¾›åˆç†çš„é»˜è®¤å€¼"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ é¿å…å¤æ‚çš„å±æ€§ç±»å‹"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ä¿æŒæ³¨è§£çš„å•ä¸€èŒè´£"</span>);
            
            System.out.println(<span class="hljs-string">"\n4. æ€§èƒ½ä¼˜åŒ–:"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ç¼“å­˜æ³¨è§£ä¿¡æ¯ï¼Œé¿å…é‡å¤åå°„"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ä½¿ç”¨ç¼–è¯‘æ—¶æ³¨è§£å¤„ç†(APT)å‡å°‘è¿è¡Œæ—¶å¼€é”€"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ è€ƒè™‘ä½¿ç”¨Annotation Inheritanceå‡å°‘é‡å¤æ³¨è§£"</span>);
            
            System.out.println(<span class="hljs-string">"\n5. æ–‡æ¡£å’Œå‘½å:"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ä¸ºè‡ªå®šä¹‰æ³¨è§£æä¾›è¯¦ç»†çš„JavaDoc"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ ä½¿ç”¨ä¸€è‡´çš„å‘½åè§„èŒƒ"</span>);
            System.out.println(<span class="hljs-string">"   â€¢ è€ƒè™‘å‘åå…¼å®¹æ€§"</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        System.out.println(<span class="hljs-string">"=== æ³¨è§£æ€§èƒ½ä¸æœ€ä½³å®è·µ ===\n"</span>);
        
        <span class="hljs-comment">// è¿è¡ŒåŸºå‡†æµ‹è¯•</span>
        <span class="hljs-type">PerformanceTest</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceTest</span>();
        BenchmarkRunner.runBenchmarks(test);
        
        System.out.println();
        
        <span class="hljs-comment">// åå°„æ€§èƒ½å¯¹æ¯”</span>
        ReflectionPerformance.comparePerformance();
        
        <span class="hljs-comment">// æœ€ä½³å®è·µ</span>
        BestPractices.showBestPractices();
    }
}
</code></pre>
<h2 data-id="heading-12">æ€»ç»“ï¼šæ³¨è§£çš„å¼ºå¤§ä¸æ™ºæ…§</h2>
<h3 data-id="heading-13">æ³¨è§£çš„æ ¸å¿ƒä»·å€¼ï¼š</h3>
<ol>
<li><strong>å…ƒç¼–ç¨‹èƒ½åŠ›</strong>ï¼šåœ¨ä»£ç ä¸­æ·»åŠ å…ƒæ•°æ®ï¼Œå½±å“ç¼–è¯‘å’Œè¿è¡Œæ—¶è¡Œä¸º</li>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šé€šè¿‡æ³¨è§£å¤„ç†å™¨è‡ªåŠ¨ç”Ÿæˆä»£ç </li>
<li><strong>æ¡†æ¶é›†æˆ</strong>ï¼šSpringã€Hibernateç­‰æ¡†æ¶çš„æ ¸å¿ƒæœºåˆ¶</li>
<li><strong>ç¼–è¯‘æ—¶æ£€æŸ¥</strong>ï¼šæä¾›é¢å¤–çš„ç¼–è¯‘æ—¶éªŒè¯</li>
</ol>
<h3 data-id="heading-14">å®ç”¨å»ºè®®ï¼š</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨å†…ç½®æ³¨è§£</strong>ï¼šå¦‚@Overrideã€@Deprecatedã€@FunctionalInterface</li>
<li><strong>åˆç†é€‰æ‹©ä¿ç•™ç­–ç•¥</strong>ï¼šé¿å…ä¸å¿…è¦çš„è¿è¡Œæ—¶å¼€é”€</li>
<li><strong>è€ƒè™‘æ€§èƒ½å½±å“</strong>ï¼šåå°„è°ƒç”¨æ¯”ç›´æ¥è°ƒç”¨æ…¢10-100å€</li>
<li><strong>åˆ©ç”¨ç¼–è¯‘æ—¶å¤„ç†</strong>ï¼šAPTå¯ä»¥ç”Ÿæˆä»£ç ï¼Œå‡å°‘è¿è¡Œæ—¶è´Ÿæ‹…</li>
</ol>
<h3 data-id="heading-15">é€‚ç”¨åœºæ™¯ï¼š</h3>
<ul>
<li>âœ…Â <strong>é€‚åˆä½¿ç”¨æ³¨è§£</strong>ï¼šæ¡†æ¶æ‰©å±•ã€ä»£ç ç”Ÿæˆã€é…ç½®ç®¡ç†ã€æ–‡æ¡£ç”Ÿæˆ</li>
<li>âš ï¸Â <strong>è°¨æ…ä½¿ç”¨æ³¨è§£</strong>ï¼šæ€§èƒ½æ•æ„Ÿä»£ç ã€ç®€å•é€»è¾‘ã€è¿‡åº¦è®¾è®¡</li>
<li>âŒÂ <strong>é¿å…ä½¿ç”¨æ³¨è§£</strong>ï¼šå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€æ›¿ä»£è®¾è®¡æ¨¡å¼</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¬è½¬å¤§æ•°æ®ä¸AIâ€”â€”æ•°æ®æ²»ç†å®‰å…¨æ‰“æ ‡å®è·µ]]></title>    <link>https://juejin.cn/post/7585138968166776868</link>    <guid>https://juejin.cn/post/7585138968166776868</guid>    <pubDate>2025-12-19T05:46:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585138968166776868" data-draft-id="7585112748897288235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¬è½¬å¤§æ•°æ®ä¸AIâ€”â€”æ•°æ®æ²»ç†å®‰å…¨æ‰“æ ‡å®è·µ"/> <meta itemprop="keywords" content="å¤§æ•°æ®,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-19T05:46:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¬è½¬å¤§æ•°æ®ä¸AIâ€”â€”æ•°æ®æ²»ç†å®‰å…¨æ‰“æ ‡å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:46:48.000Z" title="Fri Dec 19 2025 05:46:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å¯¼è¯»</h3>
<p>è¿™æ¬¡ä¸»è¦åˆ†äº«ä»‹ç»çš„æ˜¯è½¬è½¬åœ¨å¤§æ•°æ®æ²»ç†æ–¹é¢åº”ç”¨AIå¤§æ¨¡å‹æŠ€æœ¯å®ç°çš„è‡ªåŠ¨å®‰å…¨æ‰“æ ‡ï¼Œæœ¬æ–‡ä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢é€ä¸€ä»‹ç»ï¼Œé¦–å…ˆæ˜¯åº”ç”¨èƒŒæ™¯ä»‹ç»ã€æŠ€æœ¯æ–¹æ¡ˆçš„å®ç°ä¸è½åœ°ã€ä»¥åŠå¯¹æ•´ä¸ªåº”ç”¨çš„ä¼˜åŒ–å®è·µï¼Œæœ€åå¯¹åç»­çš„è§„åˆ’å’Œå±•æœ›è¿›è¡Œæ€»ç»“ï¼Œå¸Œæœ›è¯»è€…å¯ä»¥ä»æœ¬æ–‡ä¸­è·å–åˆ°å‰è¿›çš„åŠ¨åŠ›ã€‚</p>
<h3 data-id="heading-1">äºŒã€åº”ç”¨èƒŒæ™¯ä»‹ç»</h3>
<h4 data-id="heading-2">2.1 ä»€ä¹ˆæ˜¯æ•°æ®æ²»ç†ï¼Œä¸ºä»€ä¹ˆè¦åšå®‰å…¨æ‰“æ ‡</h4>
<h5 data-id="heading-3">2.1.1 æ•°æ®æ²»ç†æ˜¯ä»€ä¹ˆ</h5>
<p>æ•°æ®æ²»ç†æ˜¯ä»ä¸šåŠ¡æµåˆ°ä¿¡æ¯æµã€æ•°æ®æµã€æ•°æ®åº“è¡¨çš„æµè½¬ã€‚ä¸šåŠ¡ç³»ç»Ÿä¸­çš„ç‰©ç†è¡¨å­—æ®µï¼Œå“ªæ€•çŸ­æœŸå†…ç”±äºæ— æ³•æ”¹å˜ä¸šåŠ¡ç³»ç»Ÿä¸èƒ½å®Œæˆæºå¤´æ²»ç†ï¼Œä¹Ÿè¦åœ¨æ•°ä»“çš„ODSå±‚å®Œæˆæ²»ç†ï¼Œå½¢æˆèƒ½è¿˜åŸä¸šåŠ¡æœ¬è´¨çš„æ•°æ®æ˜ åƒï¼Œæ€»ä½“æ¥è¯´ï¼Œæ•´ä¸ªæ•°æ®æ²»ç†çš„æ ¸å¿ƒåŠ¨ä½œåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯<strong>ä¸šåŠ¡æ•°æ®çš„æ²»ç†</strong>ï¼ˆå½¢æˆçœŸå®æ•°æ®æ˜ åƒï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯<strong>åˆ†æä½“ç³»çš„æ²»ç†</strong>ï¼ˆåŸºäºæ•°æ®æ˜ åƒé¢å‘ç®¡æ§ç›®æ ‡åšåˆç†æ€§çš„åˆ†æç»“æ„è®¾è®¡åŠå®ç°ï¼‰ã€‚</p>
<p>å®‰å…¨æ‰“æ ‡ä¹Ÿæ˜¯æ•°æ®æ²»ç†çš„ä¸€ä¸ªç¯èŠ‚ï¼Œä¸ºäº†æ»¡è¶³å®‰å…¨ç®¡æ§ï¼Œåˆè§„ä½¿ç”¨ï¼Œæƒé™éš”ç¦»éœ€è¦å¯¹æ¯ä¸€å¼ è¡¨å’Œå­—æ®µåˆç†æ‰“ä¸Šæ ‡è®°ï¼Œå®ƒä¹Ÿæ˜¯å±äºæ•°æ®æ²»ç†ä¸¤å¤§ä½“ç³»ä¸­çš„åˆ†æä½“ç³»æ²»ç†ä¸­çš„ä¸€ä¸ªé‡è¦ç¯èŠ‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5a245d76b7d40af86ee604f5fb040f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=RiHjXCcVET3iZgyijRdh%2FZw%2Br8Y%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºæ•°æ®æ²»ç†æ ¸å¿ƒå†…å®¹å¯æ¦‚æ‹¬ä¸ºä¸‰å—å†…å®¹ï¼šæ•°æ®æ²»ç†ä½“ç³»è®¾è®¡ã€ä¸šåŠ¡æ•°æ®æ·±åŒ–æ²»ç†ã€åˆ†ææ•°æ®ä½“ç³»è®¾è®¡</p>
<ul>
<li><strong>æ•°æ®æ²»ç†ä½“ç³»è®¾è®¡</strong>ï¼šä¸»è¦è®¾è®¡æ•°æ®æ¶æ„ã€æ•°æ®æ ‡å‡†ã€ä¸»æ•°æ®ï¼Œé€šè¿‡æœºåˆ¶è®¾è®¡å›ºåŒ–ä¸“é¡¹æ²»ç†èƒ½åŠ›ï¼Œä¿éšœæ•°æ®æ²»ç†æ´»åŠ¨æŒç»­å¼€å±•ã€‚</li>
<li><strong>ä¸šåŠ¡æ•°æ®æ·±åŒ–æ²»ç†</strong>ï¼šèµ„äº§ç›®å½•ä¸»è¦å˜æ¸…ä¸šåŠ¡æ•°æ®èµ„äº§ï¼ˆåˆ’åˆ†è´£ä»»ç”°ï¼‰ï¼Œæ•°æ®æ¨¡å‹å®šä¹‰äº†æ•°æ®å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼ˆæŒ‡å¯¼ç³»ç»Ÿå¼€å‘ï¼‰ï¼Œæ•°æ®æ ‡å‡†è®¾è®¡ç»Ÿä¸€äº†æ•°æ®è¯­è¨€æ¶ˆé™¤æ­§ä¹‰ï¼Œæ•°æ®åˆ†å¸ƒå®šä¹‰ç”¨äºè¯†åˆ«æ•°æ®çš„æ¥é¾™å»è„‰ï¼ˆå®šä½æ•°æ®é—®é¢˜ï¼‰ï¼Œæ•°æ®è´¨é‡ç”¨äºæ”¹å–„é‡ç‚¹é¢†åŸŸæ•°æ®è´¨é‡ä¸“é¡¹æå‡ã€‚</li>
<li><strong>åˆ†ææ•°æ®ä½“ç³»è®¾è®¡</strong>ï¼šæŒ‡æ ‡ç®¡ç†ä½“ç³»å’Œè¿è¥ç»©æ•ˆæŒ‡æ ‡ä½“ç³»è®¾è®¡ä¸»è¦ç”¨äºç†æ¸…åˆ†ææ•°æ®èµ„äº§ï¼Œæ•°æ®åº”ç”¨éœ€æ±‚è®¾è®¡ä¸»è¦ä½œç”¨å¸®åŠ©æ•°æ®èƒ½åŠ›ä¾›ç»™è®¾è®¡ã€‚</li>
</ul>
<h5 data-id="heading-4">2.1.2 ä¸ºä»€ä¹ˆè¦åšå®‰å…¨æ‰“æ ‡</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78a8e0cb772b4b2a801b075c9a47d33b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=%2FWV%2BBeN5PAphXOFaxcfsqmxBxbM%3D" alt="" loading="lazy"/></p>
<ul>
<li>å®‰å…¨æ‰“æ ‡ä¸»è¦å—åˆ¶äº<strong>ç®¡æ§</strong>çš„éœ€è¦ï¼Œå®‰å…¨ç­‰çº§æ˜¯çµæ´»çš„å¯æ”¯æŒè¿½åŠ é¢å¤–çš„ç­‰çº§è§„èŒƒåˆ¶åº¦ï¼Œå½“æŸä¸ªè¡¨æœ‰äº†ç›¸åº”çš„å®‰å…¨ç­‰çº§ï¼Œå°±å¯ä»¥æ ¹æ®ç­‰çº§çš„ä¸åŒæ¥æˆäºˆç›¸åº”çš„æƒé™ç»™ä¸šåŠ¡å‡å°‘ä¸å¿…è¦çš„å®‰å…¨é—®é¢˜ã€‚</li>
<li>å®‰å…¨æ‰“æ ‡ä¸€æ–¹é¢æ˜¯ç®¡ç†å¹¶æ§åˆ¶äº†æŸä¸ªä¸šåŠ¡çš„æˆæƒç­‰çº§ï¼Œå¦ä¸€æ–¹é¢ä»–ä¹Ÿæ˜¯åˆ†ææ²»ç†ä½“ç³»ä¸­çš„é‡è¦ä¸€ç¯ï¼Œå®ƒæ”¯æ’‘äº†åˆ†ææ²»ç†çš„å®‰å…¨åŸºçŸ³ï¼Œåˆ¶å®šäº†åˆ†æè§„èŒƒçš„æ¡ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-5">2.2 AIå®‰å…¨æ‰“æ ‡è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h4>
<p>AIå®‰å…¨æ‰“æ ‡æ”¯æŒè¡¨å’Œå­—æ®µç²’åº¦çš„æ‰“æ ‡ï¼Œå¹¶æ”¯æŒè¡¨å’Œå­—æ®µå¢é‡å˜æ›´æ•è·é€»è¾‘ï¼Œå¯¹äºäººå·¥æ‰“æ ‡æ¥è®²ï¼Œä¸ä½†æ‰“æ ‡ç»“æœæ…¢ï¼Œè€Œä¸”ä¼šå‡ºç°å¾ˆå¤šä¸»è§‚è‡†æ–­å¯¼è‡´è¡¨æ‰“æ ‡çš„å®‰å…¨ç­‰çº§ä¸æ­£ç¡®ï¼Œ åœ¨AIæ‰“æ ‡çš„ç»Ÿä¸€å…ƒæ•°æ®ç®¡ç†ä¸‹ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘è¿™ä¸€é—®é¢˜ï¼Œä½¿æ­£ç¡®ç‡å¤§å¤§æé«˜ï¼ŒAIæ‰“æ ‡ç»“æœä¸ä½†é€Ÿåº¦å¿«ï¼Œå¯è‡ªåŠ¨åŒ–æ‰“æ ‡æˆæœ¬å¤§å¤§é™ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffc30ef289f041309f744d377ae51d8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=XxZdoo%2B7%2FH9F5u%2FuRYVDGdFPHRY%3D" alt="" loading="lazy"/></p>
<ul>
<li>åŠæ—¶æ€§ï¼š AIæ‰“æ ‡é‡‡ç”¨<strong>å¾®æ‰¹å¤„ç†</strong>æœºåˆ¶ï¼Œåˆ†é’Ÿçº§åˆ«è‡ªåŠ¨å“åº”å…ƒæ•°æ®çš„å˜æ›´ï¼Œç›¸è¾ƒäºäººå·¥ä¸å®šæ—¶å“åº”æ¥æ¯”ï¼ˆä¸åŒ…æ‹¬æ¨¡å¼è¿›åŒ–ï¼‰ï¼Œå®ç°äº†<strong>è¿‘å®æ—¶</strong>çš„æ•æ·å“åº”ï¼Œå¹³è¡¡äº†å¤„ç†æ•ˆç‡ä¸ç³»ç»Ÿè´Ÿè½½ã€‚</li>
<li>ç»†ç²’åº¦ï¼šæ”¯æŒä»æ•°æ®è¡¨åˆ°å­—æ®µçº§åˆ«çš„ç²¾å‡†æ‰“æ ‡ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹å¯¹æ•°æ®å®‰å…¨åˆ†ç±»çš„å·®å¼‚åŒ–ç®¡æ§éœ€æ±‚ã€‚</li>
<li>å‡†ç¡®æ€§ï¼šåŸºäºä¼˜åŒ–åçš„æç¤ºè¯æ¨¡å‹ä¸è§„åˆ™å…ƒæ•°æ®è¿›è¡Œè‡ªåŠ¨åŒ–åˆ¤æ–­ï¼Œæœ€å¤§é™åº¦åœ°æ¶ˆé™¤äº†äººä¸ºä¸»è§‚è‡†æ–­ï¼Œç¡®ä¿å®‰å…¨ç­‰çº§åˆ¤å®šçš„æ ‡å‡†ç»Ÿä¸€ä¸å‡†ç¡®å¯é ã€‚</li>
<li>æˆæœ¬ï¼š<strong>è‡ªåŠ¨åŒ–æµç¨‹</strong>æ˜¾è‘—å‡å°‘äº†æŒç»­æŠ•å…¥çš„äººåŠ›æˆæœ¬ï¼Œä¸€æ¬¡å»ºè®¾å³å¯é•¿æœŸã€è§„æ¨¡åŒ–è¿è¡Œï¼Œä¼˜äºäººå·¥è¿™ç§çŸ­æœŸå›æŠ¥æ¨¡å¼ã€‚</li>
<li>å¢é‡å˜æ›´ï¼šç³»ç»Ÿè‡ªåŠ¨ç›‘æµ‹å¹¶æ•è·å…ƒæ•°æ®çš„ç»“æ„åŒ–å˜æ›´ï¼ˆå¦‚å¢åˆ æ”¹å­—æ®µï¼‰ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªå¤„ç†å‘¨æœŸå†…è§¦å‘é’ˆå¯¹<strong>å˜æ›´éƒ¨åˆ†</strong>çš„æ™ºèƒ½é‡æ‰“æ ‡ï¼Œç¡®ä¿æ•°æ®èµ„äº§åœ¨æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œå…¶å®‰å…¨æ ‡ç­¾å§‹ç»ˆä¿æŒæœ€æ–°ä¸”æœ‰æ•ˆã€‚</li>
</ul>
<p>é€šè¿‡AIæ‰“æ ‡ï¼Œå¹³å°èƒ½å¤Ÿåœ¨ä¿éšœæ•°æ®å®‰å…¨åˆè§„çš„åŸºçŸ³ä¸Šï¼Œæ„å»ºèµ·ä¸€ä¸ª<strong>é«˜æ•ˆã€ç²¾å‡†ã€å¯è‡ªé€‚åº”æ¼”åŒ–</strong>çš„æ™ºèƒ½æ•°æ®æ²»ç†ä½“ç³»ï¼Œä¸ºæ•°æ®ä»·å€¼çš„æŒç»­é‡Šæ”¾æä¾›åšå®ä¿éšœã€‚</p>
<p/>
<h4 data-id="heading-6">2.3 AIæŠ€æœ¯çš„å‘å±•ä¸åº”ç”¨</h4>
<p>AIå®‰å…¨æ‰“æ ‡çš„èƒŒåï¼Œæ˜¯è¿‡å»è¿‘åå¹´äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸçš„æ ¹æœ¬æ€§çªç ´çš„é›†ä¸­ä½“ç°ã€‚å…¶å‘å±•å†ç¨‹æœ‰æ³¢å³°å’Œä½è°·ï¼Œå…¶ä¸­æœ‰å‡ æ¬¡å…³é”®æ€§çš„çªç ´</p>
<p>    <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ec2f4d2396141829a8246d7d3387b0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=1iZbxkKvBiYlDx68tB9n7BxA2Yc%3D" alt="" loading="lazy"/></p>
<ul>
<li>2017å¹´å‰ä½¿ç”¨çš„æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œRNNä»¥åŠå˜ä½“LSTMç­‰å¤„ç†åºåˆ—åŒ–æ•°æ®ï¼Œä»–ä»¬é€šè¿‡å¾ªç¯è¿æ¥ä¼ é€’ä¿¡æ¯ï¼Œä½†è®¡ç®—æ— æ³•å¹¶è¡Œï¼Œéš¾ä»¥æ•è·é•¿è·ç¦»çš„ä¾èµ–ç“¶é¢ˆ</li>
<li>2017å¹´Google æå‡ºçš„<strong>Transformer</strong>æ¶æ„å½»åº•æ”¹å˜äº†è¿™ä¸€å±€é¢ï¼Œå…¶æ ¸å¿ƒåˆ›æ–°åœ¨äº<strong>è‡ªæ³¨æ„åŠ›ï¼ˆSelf-Attentionï¼‰æœºåˆ¶å’Œç®—æ³•</strong></li>
<li>2018-2022å¹´<strong>é¢„è®­ç»ƒ</strong>ä¸è§„æ¨¡åŒ–æ—¶ï¼ŒåŸºäºTransformerç¡®ç«‹äº† é¢„è®­ç»ƒ + <strong>å¾®è°ƒ</strong>çš„èŒƒå¼ï¼Œæ¨¡å‹å‚æ•°å‘ˆæŒ‡æ•°çº§å¢é•¿</li>
<li>2023å¹´è‡³ä»Šå¯ä»¥çœ‹æˆ<strong>MASSï¼ˆæ¨¡å‹ä½œä¸ºä¸€ç§æœåŠ¡ï¼‰</strong>æ—¶ä»£ï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹ä½œä¸ºä¸€ç§æœåŠ¡æä¾›å•†ä¸šä»·å€¼ï¼Œä¸šå†…ä»è¿½æ±‚è§„æ¨¡è½¬å‘åˆ›é€ ä»·å€¼ï¼Œæ¨¡å‹æœåŠ¡ä¹Ÿå¯ä»¥åˆ›é€ ä»·å€¼ï¼Œå¹¶æ„å»ºåº”ç”¨ç”Ÿæ€ï¼Œç”¨æˆ·æ›´æ³¨é‡å¦‚ä½• "ç”¨å¥½æ¨¡å‹"</li>
</ul>
<h4 data-id="heading-7">2.4 ZZ-Difyå¹³å°çš„ä½œç”¨</h4>
<p>ZZ-Difyå¹³å°å¯ä»¥çœ‹åšæ˜¯åŠ é€ŸAIæ‰“æ ‡åº”ç”¨è½åœ°çš„åŸºåº§ï¼ŒDifyæœ¬èº«æ˜¯ä¸€ç§å¼€æºçš„MASSå¹³å°ï¼Œå°½ç®¡å¹³å°æ¨¡å‹èƒ½åŠ›ä»¥åŠèƒ½æ”¯æ’‘åº”ç”¨çš„åº•åº§ï¼Œä½†æ˜¯å°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªç¨³å®šã€å¯è¿ç»´çš„AIæ‰“æ ‡åº”ç”¨ï¼Œä»éœ€è¦è®¾è®¡å¤æ‚çš„å·¥ç¨‹ä½œä¸šï¼ŒDifyä½œä¸ºä¸€ä¸ªå¼€æºçš„LLMåº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºç¼©çŸ­AIåº”ç”¨å¼€å‘å‘¨æœŸï¼Œå…¶ä½œç”¨ä½“ç°åˆ°ä»¥ä¸‹å‡ ä¸ªå±‚é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00c6920e0f3d4cd6b8df139ac7a9502b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=eh%2FL8ECPXBd8b73%2FAuuOsX2e3Ng%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>é™ä½æŠ€æœ¯é—¨æ§›</strong>ï¼Œå®ç°å¯è§†åŒ–çš„å¼€å‘ï¼Œé…å¥—è®¾æ–½æ¯”è¾ƒé½å…¨</li>
<li>æ„å»ºè¿ç»´å’Œåº”ç”¨çš„ä¼˜åŒ–é—­ç¯ï¼Œæ”¯æŒæŒç»­è¿­ä»£åŠŸèƒ½ï¼Œ<strong>ä¸€ç«™å¼éƒ¨ç½²</strong></li>
<li>æ”¯æŒå¤šæ¨¡å¼éƒ¨ç½²ï¼Œå·¥ä½œæµï¼ˆworkflowï¼‰å’Œæ™ºèƒ½ä½“ï¼ˆagentï¼‰å¯æ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚</li>
</ul>
<h4 data-id="heading-8">2.5 å¤§æ¨¡å‹æŠ€æœ¯çš„ç¼ºé™·å’Œé—®é¢˜</h4>
<ul>
<li><strong>é«˜è´Ÿè½½ä¸‹çš„è„†å¼±æ€§ï¼š</strong>éœ€è¦ä¸€æ¬¡æ€§å¤„ç†æµ·é‡è¡¨ç»“æ„å˜æ›´æˆ–å¤æ‚åµŒå¥—æ•°æ®ç»“æ„æ—¶ï¼Œæ¨¡å‹çš„æ¨ç†èƒ½åŠ›å¯èƒ½å´©æºƒï¼Œè¾“å‡ºè´¨é‡æ€¥å‰§ä¸‹é™</li>
<li><strong>æŠ—å¹²æ‰°èƒ½åŠ›å¼±ï¼š</strong>æ‰“æ ‡ä»»åŠ¡ä¸­å¯èƒ½å­˜åœ¨å¤§é‡æ— å…³ä¿¡æ¯æˆ–æ ¼å¼æ··ä¹±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆå¦‚å†—é•¿çš„æ³¨é‡Šï¼‰ï¼Œæ¨¡å‹å®¹æ˜“å—åˆ°è¿™äº›â€œå¹²æ‰°ä¿¡æ¯â€çš„æ±¡æŸ“ï¼Œä»è€Œåç¦»æ ¸å¿ƒåˆ¤æ–­é€»è¾‘</li>
<li><strong>è¿‡åº¦åŠ©é•¿å¯¼è‡´çš„æé€ ï¼š</strong>å½“æ¨¡å‹åœ¨Markdownæ–‡æ¡£ä¸­æ‰¾ä¸åˆ°æ˜ç¡®çš„åˆ†ç±»ä¾æ®æ—¶ï¼Œå‡ºäºâ€œå®Œæˆä»»åŠ¡â€çš„å€¾å‘ï¼Œå¯èƒ½ä¼šç¼–é€ ä¸€ä¸ªçœ‹ä¼¼åˆç†ä½†å®é™…ä¸Šé”™è¯¯çš„è§„åˆ™æˆ–æ ‡ç­¾</li>
</ul>
<p/>
<p/>
<h3 data-id="heading-9">ä¸‰ã€æŠ€æœ¯å®ç°ä¸è½åœ°</h3>
<h4 data-id="heading-10">3.1  æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡</h4>
<h5 data-id="heading-11">3.1.1  æ¶æ„è®¾è®¡</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/337d1e1cee664768bbfdea084a4628bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=ZUnl7qD%2BWgRBDg1tmE4DE1ZiTDQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>Rest Apiï¼šæä¾›å¯¹å¤–APIæœåŠ¡ï¼Œæš´éœ²ç»Ÿä¸€æœåŠ¡èƒ½åŠ›ï¼Œä¸»è¦è´Ÿè´£AIæ‰“æ ‡ç›¸å…³æ¥å£</li>
<li>LockManager &amp; Mysql Distributed Lock:  å°è£…çš„é”ç®¡ç†å·¥å…·ï¼Œå†…ç½®Mysql åˆ†å¸ƒå¼é”ï¼Œå®ç°åœ¨å¤šxxl-job service å¹¶å‘ä¸‹ å•è¡¨AIæ‰“æ ‡åŠŸèƒ½çš„åŸå­æ€§</li>
<li>AI Moduleï¼š ä¸»è¦æä¾›AIæ‰“æ ‡åº”ç”¨æ‰€éœ€ä¸šåŠ¡æ–¹æ³•ï¼ŒåŒ…å«å…ƒæ•°æ®ç»„è£…ï¼ŒOnservice/æ˜Ÿæ²³è°ƒç”¨é€»è¾‘çš„å°è£…ï¼Œé…åˆZZScheduleï¼ˆXXL-JOBï¼‰ å®ŒæˆAIæ‰“æ ‡è‡ªåŠ¨åŒ–é—­ç¯å¤„ç†</li>
<li>ZZScheduleï¼šxxl-jobåˆ†å¸ƒå¼é«˜æ€§èƒ½è°ƒåº¦ç¨‹åºï¼Œç”¨äºå¾®æ‰¹è‡ªåŠ¨AIæ‰“æ ‡ç¨‹åºï¼Œè‡ªåŠ¨å¤„ç†æ¨¡å¼æ¼”è¿›æ¨¡å¼</li>
<li>Notify Moduleï¼šé€šçŸ¥æ¨¡å—ï¼Œç”¨äºç›‘å¬AIæ‰“æ ‡ç»“æœå˜æ›´å¹¶é€šè¿‡ä¼ä¸šå¾®ä¿¡ç­‰å…¶ä»–æ–¹å¼é€šçŸ¥åˆ°ç›¸å…³è´Ÿè´£äºº</li>
<li>Log Storageï¼šæ—¥å¿—å­˜å‚¨å·¥å…·ï¼Œä¸»è¦è®°å½•AIæ‰“æ ‡ä»å¤´åˆ°å°¾é“¾è·¯è¿½è¸ªï¼Œæ–¹ä¾¿é—®é¢˜æ’æŸ¥ï¼Œåˆ†ææ‰“æ ‡ç»“æœå¹¶ç”¨äºäºŒæ¬¡æ¨¡å‹æ‰“æ ‡ä½¿ç”¨</li>
<li>Rate Limiterï¼šå†…ç½®é™æµå™¨æŠ½è±¡å·¥å‚ï¼Œæ”¯æŒä»¤ç‰Œæ¡¶å’Œæ¼æ¡¶é™æµï¼Œé™åˆ¶å•ç§’å†…æœ€å¤§AIæ‰“æ ‡å¹¶å‘æ•°é‡ï¼Œç”¨äºæ§åˆ¶çº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—ï¼Œé˜²æ­¢ä»»åŠ¡æ’é˜Ÿè¿‡é•¿å¯¼è‡´å¼‚å¸¸é˜Ÿåˆ—å‘Šè­¦</li>
<li>Schedule Moduleï¼šè°ƒåº¦æ¨¡å—ä¸»è¦ç”¨äºæ§åˆ¶è°ƒåº¦ä»»åŠ¡æ­£å¸¸è¿è½¬ï¼Œè®°å½•ä»»åŠ¡çš„æ‰§è¡Œå…ƒæ•°æ®ï¼Œç®¡ç†è‡ªåŠ¨è°ƒåº¦ç¨‹åºçŠ¶æ€æœºæ‰­è½¬</li>
<li>Local Caffine Cacheï¼šAIæ‰“æ ‡æœ¬åœ°ç¼“å­˜ï¼Œè®°å½•AIæ‰“æ ‡å…ƒæ•°æ®ç›¸å…³ä¿¡æ¯ï¼Œå®šæœŸæ›´æ–°è¡¨å…ƒæ•°æ®ä¿¡æ¯ï¼Œåœ¨ä¿éšœé«˜æ€§èƒ½ä¸‹çš„æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§</li>
<li>OneService / æ˜Ÿæ²³ï¼šä¸»è¦è´Ÿè´£è°ƒç”¨å¤–éƒ¨æ•°æ®æ¥å£åº”ç”¨ï¼Œå¯æ”¯æŒä»»æ„Hive  SQLæŸ¥è¯¢ï¼Œ é€šè¿‡è°ƒç”¨ç»Ÿä¸€çš„æ¥å£æœåŠ¡æ¥è·å–æ•°æ®çœŸå®æ•°æ®</li>
<li>Mysql MetaDataï¼šç”¨äºç®¡ç†æ•´ä¸ªAIæ‰“æ ‡å…ƒæ•°æ®ï¼Œåè°ƒAIæ‰“æ ‡ç¨‹åºè‡ªåŠ¨åŒ–é—­ç¯å¤„ç†ï¼Œç®¡æ§æ‰“æ ‡å…ƒæ•°æ®</li>
</ul>
<h5 data-id="heading-12">3.1.2  Schema Evolution æ¨¡å¼æ¼”å˜</h5>
<p><strong>Schema Evolution</strong>ï¼ˆæ¨¡å¼è¿›åŒ–ï¼‰ï¼šæ¨¡å¼è¿›åŒ–é€šä¿—ç†è§£å°±æ˜¯ä¸šåŠ¡æ•°æ®åº“å­—æ®µå‘ç”Ÿå˜æ›´ï¼Œä¸Šæ¸¸å­—æ®µå˜æ›´ä¼šå¯¼è‡´ä¸‹æ¸¸ç¦»çº¿ä»»åŠ¡å‡ºç°é”™è¯¯ï¼Œæ¨¡å¼è¿›åŒ–ä¹Ÿæ˜¯æ•°æ®æ¹–æŠ€æœ¯éœ€è¦é‡ç‚¹å…³æ³¨çš„ä¸€ä¸ªç‚¹ï¼Œå¯¹äºAIæ‰“æ ‡éœ€è¦è€ƒè™‘åˆ°ä¸Šæ¸¸å­—æ®µå˜æ›´åçš„åŸæ‰“æ ‡ç»“æœæ˜¯å¦é€‚ç”¨æ–°çš„æ¨¡å¼ï¼Œéœ€è¦é€‚å½“è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä¸€èˆ¬é€šè¿‡ç¨‹åºè§£å†³çš„æ–¹å¼æ˜¯å®šæ—¶ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ¥ç›‘å¬å“ªäº›å­—æ®µå‘ç”Ÿå˜æ›´ç„¶åæœ€ç»ˆä¸€è‡´æ€§çš„ä¿®æ”¹å…ƒæ•°æ®ç»“æ„</p>
<ul>
<li>ç›‘å¬æœºåˆ¶ï¼šæ•è·ä¸Šæ¸¸æ•°æ®æºçš„DDLå˜æ›´äº‹ä»¶ï¼Œç›´æ¥åˆ©ç”¨å®šæ—¶å…ƒæ•°æ®å¯¹æ¯”ï¼Œæ„ŸçŸ¥å…ƒæ•°æ®æ˜¯å¦å‘ç”Ÿå˜æ›´</li>
<li>è§£ææœºåˆ¶ï¼šæå–å˜æ›´ç±»å‹ï¼ˆå¢/åˆ /æ”¹åˆ—ï¼‰ã€å½±å“èŒƒå›´ï¼Œæ‰¾åˆ°æœªè¢«æ‰“æ ‡çš„å­—æ®µä»¥åŠè¡¨å…³ç³»æ˜ å°„</li>
<li>åŒæ­¥æœºåˆ¶ï¼šåŸå­æ€§é‡æ–°è°ƒç”¨AIå¹¶æ‰“æ ‡ï¼Œå¹¶æ ¹æ®å­—æ®µæ‰“æ ‡ç­‰çº§æ¨æ–­å‡ºè¡¨çš„å®‰å…¨ç­‰çº§ï¼Œé‡å†™åŸæ‰“æ ‡å…ƒæ•°æ®</li>
<li>é€šçŸ¥æœºåˆ¶ï¼š æŒç»­ç›‘å¬å¹¶å¯¹æ¯”ç»“æœæ˜¯å¦å­˜åœ¨å·®å¼‚ï¼Œå‘Šè­¦åˆ°ä¼ä¸šå¾®ä¿¡</li>
</ul>
<h5 data-id="heading-13">3.1.3  ç»Ÿä¸€å…ƒæ•°æ®ç»“æ„</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/974878ab5b4a4da1ad0cfb41057ef064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=Nk12dWISwCfumQa0je16s8tvV8E%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">              å›¾7 å…ƒæ•°æ®ç»“æ„
</span></code></pre>
<ul>
<li>ç»Ÿä¸€å…ƒæ•°æ®ç»“æ„ä¸»è¦åŒ…å«å››å¤§éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æ•°æ®åº“å…ƒæ•°æ®ä¿¡æ¯åŒ…å«è¡¨ã€ç±»å‹ã€å­—æ®µç›¸å…³ä¿¡æ¯ï¼Œç¬¬äºŒéƒ¨åˆ†åŒ…å«å­—æ®µçœŸå®æ•°æ®ï¼Œç¬¬ä¸‰éƒ¨åˆ†æ˜¯è§„åˆ™å…ƒæ•°æ®åŒ…å«ç›¸åº”çš„è§„åˆ™æè¿°å’Œå¯¹åº”çš„å®‰å…¨ç­‰çº§ ç¬¬å››éƒ¨åˆ†åŒ…å«ä¸€äº›é¢å¤–çš„æ‰©å±•ä¿¡æ¯ï¼Œæ¯”å¦‚å‹ç¼©ç±»åˆ«å’Œå…ƒæ•°æ®æ ¼å¼</li>
</ul>
<h5 data-id="heading-14">3.1.4  ä»»åŠ¡æ—¶åºå›¾</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c3eea39c5244ded9e95ea0640bb5a38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=V24pkv4zTwosMVNs1HiNNb4AA8g%3D" alt="" loading="lazy"/></p>
<ul>
<li>åŸºç¡€æ•°æ®å¹³å°ï¼šä¸»è¦è´Ÿè´£å…ƒæ•°æ®çš„ç®¡ç†ï¼Œç”¨äºAIæ‰“æ ‡è§„åˆ™å…ƒæ•°æ®ç®¡æ§ï¼Œè°ƒç”¨OneServiceæˆ–è€…ç›´æ¥è°ƒç”¨æ˜Ÿæ²³APIæŸ¥è¯¢å®ä¾‹æ•°æ®ï¼Œä½œä¸ºAIæ‰“æ ‡çš„èµ·å§‹ç‚¹</li>
<li>OneService/æ˜Ÿæ²³ï¼šæä¾›æ•°æ®æŸ¥è¯¢å…¥å£ï¼Œ58å†…éƒ¨å¤§æ•°æ®ç®¡ç†å¹³å°ï¼Œæä¾›ç»Ÿä¸€APIæŸ¥è¯¢ï¼Œåˆ›å»ºç¦»çº¿å®æ—¶ä»»åŠ¡ï¼ŒOneServiceä¸ºå†…éƒ¨æœåŠ¡æŸ¥è¯¢ç½‘å…³å±‚ï¼Œæ”¯æŒä¸åŒæ•°æ®æºæŸ¥è¯¢</li>
<li>Difyå¹³å°ï¼šå¤§æ¨¡å‹å¹³å°åº”ç”¨ï¼Œä¸»è¦æä¾›Rest APIæœåŠ¡ï¼Œæ”¯æŒå·¥ä½œæµåˆ›å»ºã€æ„å»ºç»Ÿä¸€å‚æ•°çš„AIæ‰“æ ‡æœåŠ¡ï¼Œå†…éƒ¨å¯æ„å»ºPythonã€Scriptsè¯­éŸ³å·¥å…·ï¼Œæ”¯æŒå¤šæ¨¡æ€ç»„ä»¶ï¼Œé€‚é…å¤šç§æ’ä»¶</li>
<li>DeepSeek/Doubaoï¼šå•†ä¸šåŒ–å¤§æ¨¡å‹åŸºåº§ï¼Œä¸»è¦ç”¨äºæ”¯æ’‘è½¬è½¬å†…éƒ¨å¿«é€Ÿæ„å»ºå†…éƒ¨å¤§æ¨¡å‹åº”ç”¨ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥ä¿è¯ä¸šåŠ¡æ•°æ®çš„å®‰å…¨æ€§</li>
</ul>
<h4 data-id="heading-15">3.2  Difyå¹³å°ä¼ä¸šçº§å·¥ä½œæµè®¾è®¡</h4>
<h5 data-id="heading-16">3.2.1  WorkFlowè®¾è®¡</h5>
<p>åˆç‰ˆAIæ‰“æ ‡å·¥ä½œæµ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/206fa4f302634e6e8b8185a3fd5a0636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=pSxSoPsF9o%2Fs%2FsMQ4szoEGgZr9s%3D" alt="" loading="lazy"/></p>
<p>åˆå¹¶åæœ€ç»ˆç‰ˆAIæ‰“æ ‡å·¥ä½œæµ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc3cf3ea3164481ea391e08f19b52896~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=1CJiLSXgAOSEfuFSxVSGLiAHq18%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>åˆç‰ˆAIæ‰“æ ‡å·¥ä½œæµ</strong>ï¼šè¯¥ç‰ˆæœ¬æ‹†åˆ†å¤šä¸ªä»»åŠ¡å¹¶è¡Œè·‘ä¸€ä»½ç›¸åŒçš„å…ƒæ•°æ®ï¼ŒæŒ‰ç…§å…ƒæ•°æ®ç»“æ„æ‹†åˆ†ä¸‰ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†åŒ…å«äº†å®ä¾‹æ•°æ®ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸åŒ…å«å®ä¾‹æ•°æ®ä»…åŒ…å«åŸºæœ¬æ•°æ®ç»“æ„ï¼Œç¬¬ä¸‰éƒ¨åˆ†åŒ…å«å…¨éƒ¨å…ƒæ•°æ® + å®ä¾‹æ•°æ®å¹¶é€šè¿‡åŠ¨æ€çŸ¥è¯†åº“ï¼Œæœ€ç»ˆä¸‰ä¸ªéƒ¨åˆ†æ±‡æ€»å¹¶äº¤ç»™AIå¾—å‡ºæœ€ç»ˆç»“æœï¼Œå…¶ä¸­åŒ…å«åˆ†è¯çŸ¥è¯†åº“çš„å»ºç«‹</li>
<li><strong>åˆå¹¶åæœ€ç»ˆç‰ˆAIæ‰“æ ‡å·¥ä½œæµ</strong>ï¼šç”±äºä¸Šè¿°è¿‡ç¨‹å­˜åœ¨ç»“æœå†—ä½™ï¼Œå¹¶ä¸”å¤§æ¨¡å‹åˆ†è¯ç³»ç»Ÿä¸å¤Ÿå®Œå–„ï¼Œåˆ†è¯Tokenè¿‡å¤§è¿‡é•¿å¯¼è‡´æœ€ä¼˜åŒ¹é…å‡ºçš„ç»“æœå‡ºç°å¾ˆå¤§çš„åå·®ï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªç»“æœå‡ºç°è¾ƒå¤§è¯¯å·®ï¼Œç»è¿‡æƒè¡¡ç°æœ‰æŠ€æœ¯ä¸æˆæœ¬è€ƒé‡ï¼Œå–ä»£ä¸‰åˆ†æ”¯èšåˆå·¥ä½œæµï¼Œä»…ç”±ä¸€æ¡ä¸»å¹²è·¯æ¥æ¥å®ŒæˆAIæ‰“æ ‡ï¼Œé…åˆJavaç¨‹åºå¯¹AIç»“æœåœ¨åˆ†æï¼ˆäºŒé˜¶æ®µå‡çº§æ‰“æ ‡å¤„ç†ï¼‰æ¥æé«˜æ•´ä½“æ­£ç¡®ç‡</li>
</ul>
<h5 data-id="heading-17">3.2.2  Pythonè„šæœ¬å¤„ç†å…ƒæ•°æ®ç»„è£…</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8361578416c044b382deca08ef1ce1e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=YFzIjVtj1uwLC5LgPDGGWXkDM5U%3D" alt="" loading="lazy"/></p>
<ul>
<li>Pythonå¤„ç†è¿‡ç¨‹ä¸»è¦åˆ†ä¸ºå››å¤§æ­¥â‘  æ¥å—åˆ°Jsonç»“æ„çš„å…ƒæ•°æ®ï¼Œè§£æå…ƒæ•°æ® â‘¡ æäº¤SQLä»»åŠ¡å¹¶ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ â‘¢ æŒ‰ç…§å‹ç¼©ç®—æ³•ä»¥åŠå…ƒæ•°æ®æŒ‡å®šçš„æ ¼å¼ï¼Œç”ŸæˆAIæ¨¡å‹æ˜“è¯†åˆ«çš„MarkDownè¯­æ³•ç»“æ„</li>
</ul>
<h5 data-id="heading-18">3.2.3  ç¼–å†™Promptæç¤ºè¯</h5>
<p>Markdownè¯­æ³•æ˜¯ç°é˜¶æ®µAIæ¨¡å‹æ¯”è¾ƒå®¹æ˜“ç²¾å‡†è¯†åˆ«åˆ†æçš„ç»“æœï¼Œä¸‹é¢æ˜¯AIæ‰“æ ‡è°ƒä¼˜åçš„Markdownæç¤ºè¯ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfd615d30767413f8122db8ea90b6284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=xQEXg1tsnG5DWmJOJ71U%2FG4RVu0%3D" alt="" loading="lazy"/></p>
<ul>
<li>æç¤ºè¯ä¸»è¦åŒ…å«å››ä¸ªéƒ¨åˆ†ï¼š<strong>AIæ‰¿æ‹…çš„è§’è‰²</strong>ã€**æ‰“æ ‡å…ƒæ•°æ®ã€å…ƒæ•°æ®æè¿°çš„è§„åˆ™ã€æ‰“æ ‡ç»“æœæ ¼å¼è§„èŒƒï¼Œ**è¿™å››éƒ¨åˆ†ä¸»è¦å‘Šè¯‰å¤§æ¨¡å‹ä½ ç°åœ¨çš„å·¥ä½œä¸»é¢˜ï¼Œéƒ½æœ‰å“ªäº›éœ€è¦æå‰å­¦ä¹ äº†è§£çš„ï¼ŒæŒ‰ç…§ç›¸åº”çš„é€»è¾‘æ¥å­¦ä¹ å¹¶è®°å½•ä¸‹å¾—å‡ºä¸€ä¸ªè§„èŒƒåŒ–çš„ç»“æœ</li>
</ul>
<h4 data-id="heading-19">å››ã€ä¼˜åŒ–æ¡ˆä¾‹</h4>
<h5 data-id="heading-20">4.1  AIæ‰“æ ‡Promptä¼˜åŒ–ï¼ˆæé«˜å‡†ç¡®ç‡ï¼‰</h5>
<p>AIæ‰“æ ‡æç¤ºè¯ç»è¿‡å¤šä¸ªç‰ˆæœ¬è¿­ä»£ï¼Œç›®å‰å·²ç»æ”¯æŒä¸Šåƒå¼ è¡¨ï¼Œåœ¨ä¿è¯å®Œæˆæ•´ä¸ªåŠŸèƒ½çš„å‰æä¸‹ï¼Œæœ€å¤§é™åº¦æé«˜AIæ‰“æ ‡å‡†ç¡®ç‡ï¼Œæ€»ç»“å‡ºæç¤ºè¯ä¼˜åŒ–äº”å¤§æ­¥éª¤ï¼Œç°å°†ä¼˜åŒ–æ­¥éª¤ä»¥åŠæœ€ç»ˆæ¨¡æ¿åšå¦‚ä¸‹é˜è¿°</p>
<ul>
<li><strong>æ¸…æ™°å®Œæ•´çš„ç›®æ ‡è§’è‰²å®šä¹‰</strong>ï¼šè®©AIæˆä¸ºç‰¹å®šé¢†åŸŸçš„ä¸“å®¶æ ‡æ³¨å‘˜ï¼Œæå‰è¯´æ˜å½“å‰AIæ‰¿æ‹…çš„ä¸»è¦è´£ä»»ï¼Œå¹¶è¦å¸¦æœ‰ç¡®å®šæ€§çš„æŸ”æ€§æ¡ä»¶ï¼Œä¸€ä¸ªæ¸…æ™°å®Œæ•´çš„ç›®æ ‡è§’è‰²å®šä¹‰åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šæé«˜æ•´ä½“å‡†ç¡®ç‡</li>
<li><strong>ç»“æ„åŒ–Promtptè®¾è®¡</strong>ï¼šä½¿ç”¨å¸¦æœ‰æ ‡ç­¾åŒ…å›´çš„ç‰¹å¾å€¼ ä¾‹å¦‚ä½¿ç”¨&lt;table_info&gt;&lt;/table_info&gt;æ¥è¯´æ˜å†…å®¹æ˜¯è¡¨å…ƒæ•°æ®ï¼Œä½¿ç”¨&lt;rule_info&gt; &lt;/rule_info&gt;æ¥è¯´æ˜å†…å®¹æ˜¯è§„åˆ™å…ƒæ•°æ®ï¼Œ æ ‡ç­¾å†…éƒ¨çš„æ•°æ®è¦ç¬¦åˆmarkdownè¯­æ³•ï¼Œå°½é‡ä½¿ç”¨ #ã€##ã€<strong>{name}</strong>ã€è¿™ç§å¸¦æœ‰åˆ†çº§ä¸”æ¸…æ™°çš„è¯´æ˜å…ƒæ•°æ®ä¸­æ¯ä¸€é¡¹ï¼Œè¿™æ ·ä¸‹æ¥æ•´ä½“çš„ç»“æ„å°±æ¯”è¾ƒæ¸…æ™°ç¡®å®šï¼Œå‡å°‘è®¡ç®—ä¸ç¡®å®šæ€§å¸¦æ¥çš„å·®å¼‚æ€§</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1ce61bf57f14ca89096d01b71ec24ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=IRTNNMOna2rpNCf0PUVSIHTO574%3D" alt="" loading="lazy"/></p>
<ul>
<li>è¾“å‡ºæ ¼å¼é™åˆ¶è¯ï¼šä¸åŒçš„ä¸šåŠ¡åœºæ™¯éƒ½ä¼šæœ‰ç›¸åº”çš„è§„åˆ™é™åˆ¶ï¼Œå¯¹äºAIæ‰“æ ‡è¦åˆ¶å®šæ¸…æ™°çš„è§„åˆ™è¯´æ˜ï¼Œå¯¹äºè¯†åˆ«çš„é¡ºåºé€»è¾‘è¦ä»å°èŒƒå›´åˆ°å¤§èŒƒå›´è¯´æ˜ï¼ŒAIæ‰“æ ‡æœ‰æ˜æ˜¾çš„æ ¼å¼æ•°æ®è¦æ±‚ï¼Œæ¯”å¦‚å¯ä»¥æ˜ç¡®è¿™æ ·è¦æ±‚è¾“å‡ºæ ¼å¼ï¼Œè¿™æ ·è¾“å‡ºæ ¼å¼æ€»æ˜¯jsonæ ¼å¼
<ul>
<li>è¯·åœ¨æ‰“æ ‡è¿‡ç¨‹ä¸­ï¼Œå…ˆåœ¨&lt;æ€è€ƒ&gt;æ ‡ç­¾å†…è¯¦ç»†åˆ†ææ¯ä¸ªå­—æ®µæ‰“æ ‡çš„ä¾æ®å’Œæ¨ç†è¿‡ç¨‹ï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºæ‰“æ ‡ç»“æœï¼Œä»…è¿”å›æ‰“æ ‡ç»“æœï¼Œæ— ä»»ä½•é¢å¤–æ–‡æœ¬/è§£é‡Šï¼š"<code>json{}</code>"</li>
</ul>
</li>
<li><strong>A/Bç³»ç»Ÿæµ‹è¯•å¯¹æ¯”</strong>ï¼šä¼˜åŒ–åçš„æç¤ºè¯è¦è¿›è¡Œæ¯ä¸€é¡¹å¯¹æ¯”ï¼Œå¯¹æ¯” å‡†ç¡®æ€§ã€å®Œæ•´æ€§ã€å“åº”æ—¶é—´ã€ç¨³å®šæ€§ã€Tokenæ•°é‡ å¯¹æ¯”å¹¶ç»¼åˆä¸€ä¸ªæœ€ä¼˜æ–¹æ¡ˆï¼Œå®Œæ•´çš„æç¤ºè¯ä¼˜åŒ–å¿…é¡»è¦ç»è¿‡ç³»ç»Ÿçš„æ•´ä½“æŠŠæ§ä»è€Œå¾—å‡ºä¸Šçº¿åçš„æ–¹æ¡ˆ</li>
<li>çº¦æŸç‰¹æ®Šåœºæ™¯ï¼šå¯¹äºAIæ‰“æ ‡æ¥è®²å­˜åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œå½“å…ƒæ•°æ®ä¸­ä¸åŒ…å«æŸä¸ªå­—æ®µçš„è§„åˆ™æè¿°æ—¶ï¼Œæ­¤æ—¶éœ€è¦AIè‡ªåŠ¨å…¨ç½‘åˆ†æå¾—å‡ºä¸€ä¸ªæ¯”è¾ƒç¬¦åˆç»“æœï¼Œæˆ–è€…æ‰¾ä¸åˆ°æ¡ä»¶çš„å­—æ®µä¸ä¼šæ‰“æ ‡ï¼Œè¿™äº›çº¦æŸè¦æ˜ç¡®åˆ¶å®šï¼Œç‰¹æ®Šåœºæ™¯ä¼šè®©AIå…ˆåŒ¹é…ç¬¦åˆçº¦æŸæ¡ä»¶çš„ç»“æœå¤§è‡´ç›¸åŒï¼Œå¯¹äºé¡ºåºçš„é€»è¾‘è§„åˆ™å¯ä»¥æŒ‰åºå·æ ‡å·å¹¶åˆ¶å®š</li>
</ul>
<h5 data-id="heading-21">4.2  æ‰“æ ‡åé‡è®¡ç®—ç»“æœä¼˜åŒ–ï¼ˆæé«˜å‡†ç¡®ç‡ï¼‰</h5>
<p>ç”±äºåœ¨åˆ†ææ•°ç™¾å¼ æ‰“æ ‡åçš„ç»“æœåï¼Œå‘ç°AIæ‰“æ ‡ä»å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œæ¯”å¦‚å¹»è¯»é—®é¢˜ï¼Œç›¸åŒæ•°æ®å­—æ®µæ‰“æ ‡çš„ç»“æœä¸ä¸€è‡´ç­‰é—®é¢˜ï¼Œéœ€è¦å¯¹æ‰“æ ‡åçš„å­—æ®µç»“æœè¿›è¡ŒäºŒæ¬¡ä¸šåŠ¡å¤„ç†ï¼Œå¤„ç†è¿‡ç¨‹å¦‚ä¸‹</p>
<p align="center">                  ä¸€é˜¶æ®µåˆ¤å®šå…¬å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc19cf2aa6144389b1f82c0e38a3c698~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=KKVSAxPe6QdeDtgjfsbmP48ECZk%3D" alt="" loading="lazy"/></p>
<p align="center">                 äºŒé˜¶æ®µå‡çº§å…¬å¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c3c1bf9f4f547ea9b6b547edeb0b673~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=axQPgtSNKi5BVopscKrxDuwLUyc%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¸€é˜¶æ®µå…¬å¼</strong>ï¼šåŸºæœ¬æ¨å¯¼è¡¨å®‰å…¨ç­‰çº§å…¬å¼ï¼Œä»…ç”±L4ã€L3å æ¯”ä»¥åŠæ˜¯å¦rawè¡¨æˆ–è€…adsè¡¨æ¥ç¡®å®šæœ€ç»ˆçš„è¡¨å®‰å…¨ç­‰çº§</li>
<li><strong>äºŒé˜¶æ®µå…¬å¼</strong>ï¼šäºŒé˜¶æ¨å¯¼å…¬å¼ä¸»è¦ç”¨åˆ°<strong>æå€¼å æ¯”æ¦‚ç‡</strong>æ¥æé«˜æ•´ä½“è¡¨æ‰“æ ‡ç»“æœï¼Œå…¶ä¸­ä¼šç”¨åˆ°è‡ªå®šä¹‰æ•æ„Ÿè¯ï¼Œä»¥åŠè¯¥è¡¨åŒ…å«çš„å­ä¸šåŠ¡ä¿¡æ¯å æ¯”ï¼Œæ¯”å¦‚è¯¥è¡¨æœ‰7ä¸ªå­ä¸šåŠ¡åŸŸï¼ŒåŒ…å«è®¢å•ä¿¡æ¯ã€å•†å“ä¿¡æ¯ã€åŸºæœ¬ä¿¡æ¯ã€æµè§ˆä¿¡æ¯ã€ç‚¹å‡»è¡Œä¸ºã€æœç´¢è¡Œä¸ºï¼Œ å…¶ä¸­æ•æ„Ÿä¸šåŠ¡åŒ…å«è®¢å•ä¿¡æ¯ã€å•†å“ä¿¡æ¯ã€åŸºæœ¬ä¿¡æ¯ã€æµè§ˆä¿¡æ¯å¹¶ä¸”å¯¹åº”å­—æ®µå­˜åœ¨L4å®‰å…¨ç­‰çº§ï¼Œåˆ™ä¼šåˆ¤å®š  |B_L4| /  |B|  &gt; 1/3 æ¡ä»¶</li>
<li>ç»ç»¼åˆæµ‹è¯•äºŒé˜¶æ®µå‡çº§è¿‡ç¨‹å¤§å¤§æé«˜äº†æ•´ä½“çš„æ‰“æ ‡ç‡ï¼Œé…åˆè‡ªå®šä¹‰çš„æ•æ„Ÿä¸šåŠ¡ä¿¡æ¯ï¼Œå¯çµæ´»æ§åˆ¶å‡çº§è¿‡ç¨‹ï¼Œæ‰“æ ‡å‡çº§å—é™äºé…ç½®æ•æ„Ÿè¯å†…å®¹</li>
</ul>
<h5 data-id="heading-22">4.3 åˆ†æ‰¹æ¬¡æ‰“æ ‡ï¼ˆæé«˜å‡†ç¡®ç‡ï¼‰</h5>
<ul>
<li>åŸæœ‰æ¨¡å¼ä¼šå°†è¡¨çš„å…¨éƒ¨å­—æ®µäº¤ç»™æ¨¡å‹å¤„ç†ï¼Œä½†æ˜¯è¿™ç§æ¨¡å¼ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜
<ul>
<li><strong>è¶…é•¿é˜¶æ®µ</strong>ï¼šæ¨¡å‹ä¸€æ¬¡å¤„ç†çš„TOKENæ•°é‡æ˜¯æœ‰é™çš„ï¼Œé»˜è®¤æ˜¯32kå¤§å°å¦‚æœè¶…é•¿ä¼šè¢«æˆªæ–­</li>
<li><strong>æ­£ç¡®ç‡ä¸‹é™</strong>ï¼šè¿‡é•¿çš„æ–‡æœ¬ä¼šå¯¼è‡´æ¨¡å‹éš¾ä»¥å‡†ç¡®è¯†åˆ«å…ƒæ•°æ®ä¿¡æ¯ï¼Œä»è€Œå¯¼è‡´ç»“æœä¸ä¸€è‡´æˆ–è€…ä¸æ­£ç¡®é—®é¢˜</li>
<li><strong>æ‰“æ ‡æ—¶é—´è¿‡é•¿</strong>ï¼šæ–‡æœ¬è¿‡é•¿ä¼šå¯¼è‡´æ‰“æ ‡å®Œæˆæ—¶é—´å€æ•°å¢é•¿ï¼Œç”±åŸæ¥çš„ä¸€å¼ è¡¨2åˆ†é’Ÿå˜ä¸º5+åˆ†é’Ÿ</li>
</ul>
</li>
<li>ä¼˜åŒ–åæ¨¡å¼å˜ä¸ºå¯æŒ‡å®šé˜ˆå€¼å­—æ®µæ•°é‡ï¼Œåœ¨Difyå¹³å°æ¥å—æ­¥é•¿å‚æ•°ï¼Œåˆ†æ‰¹æ¬¡äº¤ç»™å¤§æ¨¡å‹ï¼Œåº”ç”¨å±‚é¢èšåˆæ¯ä¸€é¡µçš„ç»“æœä»è€Œçš„å‡ºæœ€ç»ˆç»“æœï¼Œè¿™ç§æ–¹å¼ä¸ä½†æé«˜äº†æ•´ä½“çš„æ­£ç¡®ç‡ï¼Œè€Œä¸”ç¨‹åºæ›´åŠ ç¨³å®šï¼Œå¤§å¤§æé«˜äº†AIæ‰“æ ‡åº”ç”¨çš„é—­ç¯èƒ½åŠ›</li>
</ul>
<h4 data-id="heading-23">äº”ã€AIæ‰“æ ‡æœªæ¥è§„åˆ’ä¸å±•æœ›</h4>
<h5 data-id="heading-24">5.1 AIæ‰“æ ‡è¦†ç›–å…¨éƒ¨ä¸šåŠ¡ï¼Œæ•°æ®æºå…¼å®¹ç»Ÿä¸€</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81f1a5aa1ee04c4283ec8ed95462ca40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=RejcjkBuSfRvBuFgiIYgn3si5Og%3D" alt="" loading="lazy"/></p>
<ul>
<li>è¿‡å»å·²ç»å®Œæˆäº†Hiveå…ƒæ•°æ®çš„å¯¹æ¥å’Œæ•´ä¸ªé“¾è·¯æ­å»ºï¼Œä½†æ˜¯ä¸šåŠ¡æ•°æ®å­˜æ”¾åœ¨å„ä¸ªå­˜å‚¨ä»‹è´¨ä¸Šï¼Œç›®å‰è½¬è½¬ä¼šå°†å¤§éƒ¨åˆ†T+1ç¦»çº¿æ•°æ®å­˜æ”¾åˆ°Hiveä¸Šé¢ï¼Œå®æ—¶ä»»åŠ¡ä¼šå­˜åˆ°dorisã€ckã€redisã€hbaseä¸Šé¢ï¼Œæå°‘æ•°æ®ä¼šæ”¾åˆ°mysql</li>
<li>æœªæ¥AIæ‰“æ ‡ç³»ç»Ÿä¼šå°†è¿™äº›å­˜å‚¨éƒ½é›†æˆè¿‡æ¥ï¼Œå®ç°å…¨åŸŸå…ƒæ•°æ®çš„æ‰“é€šï¼Œæ„å»ºç»Ÿä¸€å¥å…¨çš„æ•°æ®</li>
</ul>
<h5 data-id="heading-25">5.2 AIæ‰“æ ‡å“åº”é€Ÿåº¦æé«˜ï¼ŒæŒç»­å…³æ³¨æ¨¡å‹è¿­ä»£ï¼Œé€‚åº”æ–°æ¨¡å‹</h5>
<ul>
<li><strong>å“åº”é€Ÿåº¦ä¼˜åŒ–</strong>ï¼šé€šè¿‡ä½¿ç”¨æ›´åŠ è½»é‡åŒ–çš„æ¨¡å‹ã€æ¨ç†å¼•æ“å‡çº§ä¸å¹¶å‘å¤„ç†å¢å¼ºï¼Œæ˜¾è‘—é™ä½æ‰“æ ‡å»¶è¿Ÿï¼Œæå‡å®æ—¶å“åº”èƒ½åŠ›ã€‚</li>
<li><strong>è·Ÿè¸ªæ¨¡å‹æœ€æ–°æŠ€æœ¯ï¼š</strong>ä¸»åŠ¨è·Ÿè¸ªä¸»æµå¤§æ¨¡å‹ï¼ˆå¦‚ <strong> GLM-4.6V</strong>ã€<strong>OpenAI</strong>ã€<strong>Gemini</strong> ç­‰ï¼‰çš„æŠ€æœ¯æ¼”è¿›è·¯å¾„ï¼Œæ¢ç´¢å…¶åœ¨ä¸šåŠ¡ä¿¡æ¯æŠ½å–ã€æ„å›¾ç†è§£ç­‰åœºæ™¯çš„åº”ç”¨æ½œåŠ›ï¼Œæ¨åŠ¨æ‰“æ ‡é€»è¾‘ä»â€œè§„åˆ™ä¸ºä¸»â€å‘â€œè¯­ä¹‰ä¸»å¯¼ + è§„åˆ™â€æ¼”è¿›ã€‚</li>
<li><strong>æ ‡æ³¨æ•ˆç‡ä¸å‡†ç¡®æ€§åŒæå‡ï¼š</strong>ç»“åˆä¸»åŠ¨å­¦ä¹ ä¸åé¦ˆé—­ç¯ï¼Œä¼˜åŒ–æ ‡æ³¨æµç¨‹ï¼Œå®ç°æ•ˆç‡ä¸å‡†ç¡®ç‡çš„åŒæ­¥å¢é•¿ã€‚</li>
</ul>
<h5 data-id="heading-26">5.3 AIå¤šæ•°æ®æºè‡ªé€‚åº”è¡¨ä¼˜åŒ–æœåŠ¡</h5>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd994f182e8149ab9ee6eb669d48ee51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728008&amp;x-signature=AgcSnmGIKuxfbETddRwVucqKgBQ%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>Schema Evolution</strong>ï¼š æ”¯æŒå¤šæ•°æ®æºçš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹ï¼Œç»Ÿä¸€å…¼å®¹ä¸åŒæ•°æ®æºï¼ˆå¦‚Hiveã€MySQLã€Kafkaç­‰ï¼‰çš„Schemaå·®å¼‚</li>
<li><strong>Concurrency Control</strong>ï¼š æ”¯æŒå¤šæ•°æ®æºå¹¶å‘æ§åˆ¶ï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´å¹¶å‘åº¦ï¼Œé€‚é…ä¸åŒè´Ÿè½½åœºæ™¯</li>
</ul>
<h4 data-id="heading-27">å…­ã€æ€»ç»“</h4>
<p>æœ¬æ¬¡åˆ†äº«ç³»ç»Ÿåœ°ä»‹ç»äº†è½¬è½¬åœ¨å¤§æ•°æ®æ²»ç†é¢†åŸŸï¼Œåº”ç”¨AIå¤§æ¨¡å‹æŠ€æœ¯å®ç°è‡ªåŠ¨å®‰å…¨æ‰“æ ‡çš„å®Œæ•´å®è·µä¸æ¢ç´¢ã€‚é€šè¿‡å›é¡¾äº†é¡¹ç›®çš„åº”ç”¨èƒŒæ™¯ã€æŠ€æœ¯æ–¹æ¡ˆå®ç°ã€æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥ä»¥åŠæœªæ¥è§„åˆ’ï¼Œå±•ç¤ºäº†ä¸€ä¸ªä»æ¦‚å¿µåˆ°è½åœ°çš„AIé©±åŠ¨æ•°æ®å®‰å…¨æ²»ç†é¡¹ç›®ä»0åˆ°1çš„å®Œæ•´æ„å»ºè¿‡ç¨‹ã€‚</p>
<p>æ­¤å·¥ç¨‹ä¸ä»…è¯æ˜äº†AIæŠ€æœ¯åœ¨å®é™…æ•°æ®æ²»ç†åœºæ™¯ä¸­çš„å¯è¡Œæ€§å’Œä»·å€¼ï¼Œæ›´è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°å‡ ä¸ªæ ¸å¿ƒè®¤çŸ¥ï¼š</p>
<ul>
<li><strong>"ç”¨å¥½æ¨¡å‹" æ¯” "è¿½æ±‚å¤§æ¨¡å‹" æ›´ä¸ºå…³é”®</strong>ï¼šæˆ‘ä»¬å¹¶éå•çº¯è¿½æ±‚æ¨¡å‹è§„æ¨¡ï¼Œè€Œæ˜¯é€šè¿‡Promptå·¥ç¨‹ã€ä»»åŠ¡æ‹†åˆ†ã€åå¤„ç†é€»è¾‘ç­‰æŠ€æœ¯æ‰‹æ®µï¼Œå°†å¤§æ¨¡å‹èƒ½åŠ›ä¸å…·ä½“ä¸šåŠ¡åœºæ™¯æ·±åº¦é€‚é…ï¼Œå®ç°äº†æŠ€æœ¯ä¸ä¸šåŠ¡çš„çœŸæ­£èåˆã€‚</li>
<li><strong>å·¥ç¨‹åŒ–èƒ½åŠ›æ˜¯AIåº”ç”¨è½åœ°çš„æ ¹æœ¬ä¿éšœ</strong>ï¼šAIåº”ç”¨è¦èµ°å‘æˆç†Ÿå¯é ï¼Œç¦»ä¸å¼€ç¨³å®šçš„ç³»ç»Ÿæ¶æ„ã€é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦ã€å®Œå–„çš„ç›‘æ§è¿ç»´ç­‰å·¥ç¨‹åŒ–ä½“ç³»çš„æ”¯æ’‘ã€‚æ­¤æ¬¡å®è·µï¼Œæˆ‘ä»¬æ„å»ºäº†è‡ªåŠ¨åŒ–é—­ç¯ä¸ä¼˜åŒ–æœºåˆ¶ï¼Œç¡®ä¿äº†ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æŒç»­ç¨³å®šè¿è¡Œã€‚</li>
<li><strong>æŒç»­ä¼˜åŒ–ä¸è¿­ä»£æ˜¯AIåº”ç”¨çš„ç”Ÿå‘½çº¿</strong>ï¼šAIåº”ç”¨çš„æ€§èƒ½ä¼šæŒç»­è¢«ä¼˜åŒ–ã€‚é¡¹ç›®éœ€è¦å»ºç«‹åŸºäºåé¦ˆçš„è¿­ä»£æœºåˆ¶ï¼ŒæŒç»­å¯¹æç¤ºè¯ã€å·¥ä½œæµã€ä¸šåŠ¡è§„åˆ™è¿›è¡Œè°ƒä¼˜ï¼Œå¹¶ç´§è·ŸæŠ€æœ¯æ¼”è¿›ï¼Œæ‰èƒ½ä¿æŒç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œç”Ÿå‘½åŠ›ã€‚</li>
</ul>
<p>æœªæ¥ï¼Œå°†åœ¨ç°æœ‰åŸºç¡€ä¸ŠæŒç»­ç²¾è¿›ï¼Œå…³æ³¨AIç¤¾åŒºä¸æ•°æ®æ²»ç†é¢†åŸŸçš„æœ€æ–°åŠ¨æ€ï¼Œç§¯æå¸æ”¶è¡Œä¸šå…ˆè¿›ç»éªŒã€‚æˆ‘ä»¬æœŸæœ›é€šè¿‡æŒç»­çš„æ¢ç´¢ä¸è´¡çŒ®ï¼Œæ¨åŠ¨è½¬è½¬åœ¨å¤§æ•°æ®æ²»ç†ä¸AIæŠ€æœ¯èåˆæ–¹é¢å½¢æˆæ›´åŠ æˆç†Ÿã€ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ºä¼ä¸šçš„æ•°æ®å®‰å…¨ä¸ä»·å€¼é‡Šæ”¾æä¾›æ›´åšå®çš„æ™ºèƒ½æ”¯æ’‘ã€‚</p>
<blockquote>
<p><strong>å…³äºä½œè€…</strong></p>
</blockquote>
<p>å¼ é¾™ä¸¥ï¼Œè½¬è½¬æ•°æ®æ™ºèƒ½éƒ¨é«˜çº§æ•°æ®å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºæ•°æ®å¼€å‘ä¸æ•°æ®æ²»ç†å¹³å°å»ºè®¾ã€‚</p>
<p><code>&gt; è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚</code></p>
<p><code>&gt; å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</code></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SAM çœŸçš„å¼€å§‹ã€Œåˆ†å‰²ä¸€åˆ‡ã€ï¼Œä»å›¾åƒåˆ°å£°éŸ³ï¼ŒMeta å¼€æº SAM Audio]]></title>    <link>https://juejin.cn/post/7585097023748112399</link>    <guid>https://juejin.cn/post/7585097023748112399</guid>    <pubDate>2025-12-19T05:52:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585097023748112399" data-draft-id="7585083729972510772" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SAM çœŸçš„å¼€å§‹ã€Œåˆ†å‰²ä¸€åˆ‡ã€ï¼Œä»å›¾åƒåˆ°å£°éŸ³ï¼ŒMeta å¼€æº SAM Audio"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-19T05:52:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SAM çœŸçš„å¼€å§‹ã€Œåˆ†å‰²ä¸€åˆ‡ã€ï¼Œä»å›¾åƒåˆ°å£°éŸ³ï¼ŒMeta å¼€æº SAM Audio
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:52:13.000Z" title="Fri Dec 19 2025 05:52:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»§Â SAMï¼ˆSegment Anything Modelï¼‰Â ä¸ SAM 3D ä¹‹åï¼ŒMeta æ­£å¼å°†Â Segment AnythingÂ ç³»åˆ—æ‰©å±•åˆ°äº†éŸ³é¢‘é¢†åŸŸã€‚</p>
<p>æœ€æ–°å‘å¸ƒçš„ <strong>SAM Audio</strong>ï¼Œæ˜¯ä¸€æ¬¾ç»Ÿä¸€çš„éŸ³é¢‘åˆ†å‰²æ¨¡å‹ã€‚å®ƒæ”¯æŒé€šè¿‡æ–‡æœ¬ã€è§†è§‰çº¿ç´¢ä»¥åŠæ—¶é—´è·¨åº¦æç¤ºï¼Œä»å¤æ‚çš„éŸ³é¢‘æ··åˆä¸­åˆ†ç¦»å‡ºä»»æ„ç›®æ ‡å£°éŸ³ã€‚è¿™ä¸€èƒ½åŠ›ä½¿éŸ³é¢‘åˆ†å‰²ç¬¬ä¸€æ¬¡å…·å¤‡äº†ç±»ä¼¼ SAM åœ¨å›¾åƒé¢†åŸŸä¸­çš„ã€Œé€šç”¨æ€§ã€ã€‚</p>
<p>Metaçš„Segment Anythingç³»åˆ—æ­£åœ¨æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€åˆ†å‰²å¸å›½ã€‚ä»å›¾åƒçš„SAMåˆ°3Dçš„SAM 3Dï¼Œå†åˆ°ç°åœ¨çš„SAM Audioï¼ŒMetaæ­£åœ¨å®ç°â€œåˆ†å‰²ä¸€åˆ‡â€çš„å®Œæ•´æ„¿æ™¯ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒMeta è¿˜åŒæ­¥å¼€æ”¾äº†æ ¸å¿ƒæ¨¡å‹Â Perception Encoder Audiovisualï¼ˆPE-AVï¼‰ï¼Œå¹¶å‘å¸ƒäº†å®Œæ•´çš„è¯„æµ‹ä½“ç³»ï¼ŒåŒ…æ‹¬Â SAM Audio-BenchÂ ä¸Â SAM Audio Judgeã€‚</p>
<p>Meta å·²å°†SAM Audio æ•´åˆè¿› Segment Anything Playgroundï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¹³å°ï¼Œä»»ä½•äººéƒ½å¯ä»¥åœ¨å…¶ä¸­ä½“éªŒå…¶æœ€æ–°æ¨¡å‹ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c3a2e02a6d04c40a1c810d22495c885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=%2BTO%2B3hbyMwbK1amgpSCn4avVXRY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faidemos.meta.com%2Fsegment-anything" target="_blank" title="https://aidemos.meta.com/segment-anything" ref="nofollow noopener noreferrer">aidemos.meta.com/segment-anyâ€¦</a></strong></p>
<h2 data-id="heading-0"><strong>SAM Audio æƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></h2>
<p>å½“ Meta å‘å¸ƒÂ SAM AudioÂ æ—¶ï¼Œå¾ˆå¤šäººçš„ç¬¬ä¸€ååº”æ˜¯ï¼šâ€œæ˜¯ä¸æ˜¯åˆä¸€ä¸ªéŸ³é¢‘åˆ†ç¦»æ¨¡å‹ï¼Ÿâ€ä½†å¦‚æœåªæ˜¯æŠŠæ··åˆéŸ³é¢‘åˆ‡æˆå‡ æ¡å¹²å‡€éŸ³è½¨ï¼Œå…¶å®å¹¶ä¸éœ€è¦ä¸€ä¸ªå«ã€ŒSegment Anythingã€çš„æ–°æˆå‘˜ã€‚</p>
<p>SAM Audio å¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„éŸ³é¢‘åˆ‡åˆ†å·¥å…·ã€‚å®ƒçœŸæ­£æƒ³è§£å†³çš„é—®é¢˜ï¼Œæ˜¯ï¼šå¦‚ä½•è®©äººä»¥â€œè‡ªç„¶çš„æ–¹å¼â€ï¼Œåœ¨å¤æ‚çœŸå®ä¸–ç•Œä¸­ï¼ŒæŒ‡æŒ¥ AI å»ç†è§£å¹¶åˆ†ç¦»å£°éŸ³ã€‚è¿™ä¹Ÿæ˜¯å®ƒä¸ä»¥å¾€éŸ³é¢‘åˆ†ç¦»æ¨¡å‹æœ€æ ¹æœ¬çš„ä¸åŒã€‚</p>
<p>åœ¨ä¼ ç»ŸéŸ³é¢‘å·¥ç¨‹æˆ– AI æ¨¡å‹ä¸­ï¼Œâ€œåˆ†ç¦»â€å¾€å¾€æ„å‘³ç€ï¼šäººå£° / ä¼´å¥äºŒé€‰ä¸€ï¼Œå›ºå®šç±»åˆ«çš„éŸ³æ•ˆæå–ï¼Œåœ¨å¹²å‡€ã€å¯æ§çš„æ•°æ®é›†ä¸Šè¿è¡Œã€‚è¿™äº›æ–¹æ³•åœ¨æŠ€æœ¯ä¸Šå¹¶ä¸ç®€å•ï¼Œä½†å®ƒä»¬é»˜è®¤äº†ä¸€ä¸ªå‰æï¼šç”¨æˆ·å¿…é¡»é€‚åº”æ¨¡å‹ï¼Œè€Œä¸æ˜¯æ¨¡å‹é€‚åº”ç”¨æˆ·ã€‚</p>
<p>SAM Audio åè¿‡æ¥æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœäººèƒ½ç”¨è¯­è¨€ã€æŒ‡å‘ã€æ—¶é—´æ„ŸçŸ¥æ¥ç†è§£å£°éŸ³ï¼Œæ¨¡å‹ä¸ºä»€ä¹ˆä¸èƒ½ï¼Ÿå› æ­¤ï¼ŒSAM Audio å¹¶ä¸æ˜¯ç®€å•åœ°ã€ŒæŠŠéŸ³é¢‘åˆ‡æ–­ã€ï¼Œè€Œæ˜¯è¯•å›¾æ„å»ºä¸€ä¸ªå¯è¢«è‡ªç„¶æç¤ºé©±åŠ¨çš„é€šç”¨éŸ³é¢‘åˆ†å‰²ç³»ç»Ÿã€‚</p>
<p>å®ƒçš„ç›®æ ‡æ›´æ¥è¿‘ï¼š</p>
<ul>
<li>åœ¨å¤æ‚ç¯å¢ƒä¸­å®šä½ã€Œä½ æƒ³è¦çš„é‚£ä¸ªå£°éŸ³ã€</li>
<li>å¹¶åœ¨ä¸ä¾èµ–ä¸“ä¸šéŸ³é¢‘çŸ¥è¯†çš„æƒ…å†µä¸‹å®Œæˆæ“ä½œ</li>
</ul>
<h2 data-id="heading-1"><strong>ä¸‰ç§æç¤ºæ–¹å¼ï¼Œå¯¹åº”ä¸‰ç§â€œäººç±»ç›´è§‰â€</strong></h2>
<p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œäººä»¬ä»æ¥ä¸æ˜¯åªé ã€Œå¬ã€æ¥ç†è§£å£°éŸ³çš„ã€‚æˆ‘ä»¬ä¼šç»“åˆï¼š</p>
<ul>
<li>è¯­è¨€æè¿°ï¼ˆâ€œåˆšæ‰é‚£ä¸ªç‹—å«å£°â€ï¼‰</li>
<li>è§†è§‰çº¿ç´¢ï¼ˆâ€œç”»é¢é‡Œæ‹¿ç€éº¦å…‹é£çš„äººâ€ï¼‰</li>
<li>æ—¶é—´æ„ŸçŸ¥ï¼ˆâ€œä» 1 åˆ†é’Ÿå¼€å§‹ä¸€ç›´åˆ°ç»“å°¾â€ï¼‰</li>
</ul>
<p>SAM Audio æ­£æ˜¯å›´ç»•è¿™ç§äººç±»æ„ŸçŸ¥æ–¹å¼ï¼Œè®¾è®¡äº†ä¸‰ç±»æç¤ºæœºåˆ¶ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬æç¤ºï¼š</strong> ç”¨è‡ªç„¶è¯­è¨€å®šä¹‰ç›®æ ‡å£°éŸ³</li>
<li><strong>è§†è§‰æç¤ºï¼š</strong> é€šè¿‡ç‚¹å‡»ç”»é¢ä¸­çš„å£°æºæ¥æŒ‡ç¤º</li>
<li><strong>æ—¶é—´è·¨åº¦æç¤º</strong> <strong>ï¼ˆSpan Promptï¼‰</strong> <strong>ï¼š</strong> æ ‡è®°å£°éŸ³å‡ºç°çš„åŒºé—´</li>
</ul>
<p>å…¶ä¸­ï¼Œæ—¶é—´è·¨åº¦æç¤ºå¹¶ä¸æ˜¯ç®€å•çš„æ—¶é—´è£å‰ªï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§ä½œç”¨äºæ•´æ®µéŸ³é¢‘åˆ†ç¦»é€»è¾‘ï¼Œç‰¹åˆ«é€‚åˆé•¿éŸ³é¢‘å’ŒæŒç»­æ€§å™ªå£°ã€‚</p>
<p>è¿™ä½¿å¾—éŸ³é¢‘åˆ†å‰²ç¬¬ä¸€æ¬¡ä¸å†æ˜¯ã€Œè°ƒå‚æ•°çš„å·¥ç¨‹é—®é¢˜ã€ï¼Œè€Œæ˜¯ã€Œç»™æç¤ºçš„äº¤äº’é—®é¢˜ã€ã€‚</p>
<h2 data-id="heading-2"><strong>PE-AV çš„æ„ä¹‰ï¼šä¸æ˜¯â€œçœ‹è§†é¢‘â€ï¼Œè€Œæ˜¯â€œç†è§£å£°æºâ€</strong></h2>
<p>SAM Audio çš„æ€§èƒ½æ ¸å¿ƒæ¥è‡ª <strong>Perception Encoder Audiovisualï¼ˆPE-AVï¼‰</strong> ã€‚å¦‚æœæ²¡æœ‰Â PE-AVï¼ˆPerception Encoder Audiovisualï¼‰ï¼ŒSAM AudioÂ åªèƒ½æ˜¯ä¸€ä¸ªæ€§èƒ½ä¸é”™çš„éŸ³é¢‘æ¨¡å‹ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df5ed85096fb49ec80167385aeefbddf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=ySdrsZZBoOO5kWKWqaQ%2B6bPlwnk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>

<ul>
<li>PE-AV è®ºæ–‡åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.meta.com%2Fresearch%2Fpublications%2Fpushing-the-frontier-of-audiovisual-perception-with-large-scale-multimodal-correspondence-learning%2F" target="_blank" title="https://ai.meta.com/research/publications/pushing-the-frontier-of-audiovisual-perception-with-large-scale-multimodal-correspondence-learning/" ref="nofollow noopener noreferrer">ai.meta.com/research/puâ€¦</a></li>
<li>ä»£ç åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebookresearch%2Fperception_models" target="_blank" title="https://github.com/facebookresearch/perception_models" ref="nofollow noopener noreferrer">github.com/facebookresâ€¦</a></li>
</ul>
<p>PE-AVå¯ä»¥ç†è§£ä¸ºSAM Audioçš„â€œè€³æœµâ€ï¼Œè®©å®ƒå…·å¤‡äº†çœŸå®ä¸–ç•Œæ„ŸçŸ¥èƒ½åŠ›ã€‚PE-AV æ„å»ºäº Meta ä»Šå¹´æ—©äº›æ—¶å€™å¼€æºçš„ Perception Encoder ä¹‹ä¸Šï¼Œå¹¶è¿›ä¸€æ­¥æ‰©å±•åˆ°è§†å¬è”åˆå»ºæ¨¡ã€‚å®ƒé€šè¿‡åœ¨ç²¾ç¡®çš„æ—¶é—´ç‚¹ä¸Šå¯¹é½è§†é¢‘å¸§ä¸éŸ³é¢‘ï¼Œæä¾›äº†è¯­ä¹‰ä¸°å¯Œçš„ç‰¹å¾è¡¨ç¤ºã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d460856e95b42a08fbf9517579b2689~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=SiYG7snZy71CrhU5RnZUpgcpUCY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç§æ—¶é—´å¯¹é½æœºåˆ¶è‡³å…³é‡è¦â€”â€”å®ƒå°†â€œæ‰€è§â€ä¸â€œæ‰€é—»â€ç²¾ç¡®åŒ¹é…ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿç†è§£ç”»é¢ä¸­çš„è¯´è¯è€…ä½•æ—¶å¼€å£ï¼Œä¹å™¨ä½•æ—¶è¢«æ¼”å¥ï¼Œç”šè‡³æ¨æ–­ç”»é¢å¤–å‘ç”Ÿçš„å£°éŸ³äº‹ä»¶ã€‚</p>
<p>æŠ€æœ¯å±‚é¢ï¼ŒPE-AVé›†æˆäº†å¤šä¸ªå…ˆè¿›ç»„ä»¶ï¼šä½¿ç”¨PyTorchVideoè¿›è¡Œé«˜æ•ˆè§†é¢‘å¤„ç†ï¼Œåˆ©ç”¨FAISSè¿›è¡Œå¤§è§„æ¨¡è¯­ä¹‰æœç´¢ï¼Œå¹¶é‡‡ç”¨å¯¹æ¯”å­¦ä¹ æ¡†æ¶ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7cd1975954946dc95451438f138e5cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=zEoRHUM7W2bjQiw1BS7xk6sGsB0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¨¡å‹åœ¨è¶…è¿‡1äº¿ä¸ªè§†é¢‘ä¸Šé€šè¿‡å¤§è§„æ¨¡å¤šæ¨¡æ€å¯¹æ¯”å­¦ä¹ è¿›è¡Œè®­ç»ƒï¼Œç¡®ä¿äº†å¹¿æ³›çš„è¦†ç›–èŒƒå›´å’Œå¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p>è¿™ç§è®¾è®¡ä½¿æ¨¡å‹èƒ½å¤Ÿåœ¨çœŸå®è§†é¢‘åœºæ™¯ä¸­ï¼Œå‡†ç¡®åˆ†ç¦»å¯è§å£°æºï¼ˆå¦‚è®²è¯è€…ã€ä¹å™¨ï¼‰ï¼Œå¹¶ç»“åˆä¸Šä¸‹æ–‡æ¨æ–­ç”»é¢å¤–çš„å£°éŸ³äº‹ä»¶ã€‚</p>
<h2 data-id="heading-3"><strong>æ¨¡å‹æ¶æ„ä¸æ•°æ®ç­–ç•¥</strong></h2>
<p>åœ¨æ¨¡å‹å±‚é¢ï¼ŒSAM Audio é‡‡ç”¨äº†åŸºäºæµåŒ¹é…æ‰©æ•£ Transformer çš„ç”Ÿæˆå¼æ¡†æ¶ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6bfa492e5b449858f09a677c54736e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=BLq4rd4XqowmyiBJed8mL%2BZAprg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¨¡å‹æ¥æ”¶ï¼šä¸€æ®µæ··åˆéŸ³é¢‘ã€ä¸€ä¸ªæˆ–å¤šä¸ªå¤šæ¨¡æ€æç¤ºï¼Œå¹¶ç”Ÿæˆï¼šç›®æ ‡éŸ³è½¨ã€å‰©ä½™éŸ³è½¨</p>
<p>ä¸ºæ”¯æ’‘è¿™ä¸€æ¶æ„ï¼ŒMeta æ„å»ºäº†ä¸€å¥—å®Œæ•´çš„æ•°æ®å¼•æ“ï¼Œç”¨äºè§£å†³é«˜è´¨é‡éŸ³é¢‘åˆ†ç¦»æ•°æ®éš¾ä»¥è§„æ¨¡åŒ–çš„é—®é¢˜ã€‚è¯¥å¼•æ“åŒ…æ‹¬ï¼š</p>
<ul>
<li>è‡ªåŠ¨éŸ³é¢‘æ··åˆæµç¨‹</li>
<li>å¤šæ¨¡æ€æç¤ºç”Ÿæˆ</li>
<li>ç¨³å¥çš„ä¼ªæ ‡ç­¾æœºåˆ¶</li>
</ul>
<p>è®­ç»ƒæ•°æ®åŒæ—¶è¦†ç›–è¯­éŸ³ã€éŸ³ä¹å’Œé€šç”¨å£°éŸ³äº‹ä»¶ï¼ŒåŒ…å«çœŸå®ä¸åˆæˆåœºæ™¯ï¼Œä»è€Œæå‡æ¨¡å‹åœ¨ç°å®ç¯å¢ƒä¸­çš„é²æ£’æ€§ã€‚</p>
<h2 data-id="heading-4"><strong>å®Œæ•´è¯„ä¼°ä½“ç³»</strong></h2>
<p>ä¸æ¨¡å‹ä¸€åŒå‘å¸ƒçš„ï¼Œè¿˜æœ‰ä¸¤é¡¹å…³é”®è¯„æµ‹å·¥å…·ã€‚</p>
<p><strong>SAM Audio-Benchï¼š</strong> é¦–ä¸ªçœŸå®ç¯å¢ƒçš„éŸ³é¢‘åˆ†ç¦»åŸºå‡†æµ‹è¯•é›†ï¼Œè¦†ç›–è¯­éŸ³ã€éŸ³ä¹å’Œé€šç”¨éŸ³æ•ˆä¸‰å¤§é¢†åŸŸï¼Œæ”¯æŒæ–‡æœ¬ã€è§†è§‰å’Œæ—¶é—´è·¨åº¦ä¸‰ç§æç¤ºç±»å‹çš„è¯„ä¼°ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f53017a7e724b31a361bc52b7752408~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=BwMgewj%2FcQxw%2BuodpXx93lrAS%2FE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ä¼ ç»Ÿä½¿ç”¨åˆæˆéŸ³é¢‘çš„æ•°æ®é›†ä¸åŒï¼ŒSAM Audio-Benchä½¿ç”¨æ¥è‡ªå„ç§é«˜è´¨é‡æ¥æºçš„çœŸå®éŸ³é¢‘å’Œè§†é¢‘ï¼Œæ¯ä¸ª10ç§’æ ·æœ¬éƒ½é…æœ‰å¤šæ¨¡æ€æç¤ºï¼Œæ›´åŠ è´´è¿‘å®é™…åº”ç”¨åœºæ™¯ã€‚</p>
<p><strong>SAM Audio Judgeï¼š</strong> é¦–ä¸ªç”¨äºéŸ³é¢‘åˆ†ç¦»çš„è‡ªåŠ¨è¯„ä¼°æ¨¡å‹ï¼Œé‡‡ç”¨æ— å‚è€ƒè¯„ä¼°æ–¹å¼ï¼Œä»äººç±»æ„ŸçŸ¥è§’åº¦è¯„ä»·éŸ³é¢‘åˆ†ç¦»è´¨é‡ã€‚</p>
<p>ä¼ ç»ŸæŒ‡æ ‡ä¾èµ–äºåŸå§‹éŸ³è½¨çš„å¯¹æ¯”ï¼Œè€ŒSAM Audio Judgeå®šä¹‰äº†ä¹ä¸ªæ„ŸçŸ¥ç»´åº¦ï¼ŒåŒ…æ‹¬å¬å›ç‡ã€ç²¾ç¡®åº¦ã€ä¿çœŸåº¦å’Œæ•´ä½“è´¨é‡ï¼Œèƒ½æ›´å¥½åœ°åæ˜ å®é™…è†å¬ä½“éªŒã€‚</p>
<h2 data-id="heading-5"><strong>æ€§èƒ½é¢†å…ˆ</strong></h2>
<p>å®éªŒç»“æœæ˜¾ç¤ºï¼ŒSAM Audio åœ¨å¤šé¡¹ä»»åŠ¡ä¸Šè¶…è¿‡æ­¤å‰çš„é€šç”¨æ¨¡å‹ï¼Œå¹¶åœ¨å¤šä¸ªé¢†åŸŸæ¥è¿‘æˆ–è¾¾åˆ°ä¸“ç”¨æ¨¡å‹æ°´å¹³ã€‚</p>
<p>å…¶æ¨ç†é€Ÿåº¦å¿«äºå®æ—¶ï¼ˆRTF â‰ˆ 0.7ï¼‰ï¼Œå¯åœ¨ 5 äº¿è‡³ 30 äº¿å‚æ•°è§„æ¨¡ä¸‹é«˜æ•ˆè¿è¡Œã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d16f9132d9794a76adc10fe36da411ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728333&amp;x-signature=8UrIwAPsoRrfxjGbcP%2BCTTDgIto%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½†SAM Audioä»æœ‰å±€é™ï¼šç›®å‰ä¸æ”¯æŒéŸ³é¢‘æœ¬èº«ä½œä¸ºæç¤ºï¼Œæ— æç¤ºçš„å®Œæ•´éŸ³é¢‘åˆ†ç¦»ä¹Ÿä¸åœ¨å…¶èƒ½åŠ›èŒƒå›´å†…ã€‚æ­¤å¤–ï¼Œåˆ†ç¦»é«˜åº¦ç›¸ä¼¼çš„éŸ³é¢‘äº‹ä»¶ä»ç„¶å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œæ¯”å¦‚ä»åˆå”±ä¸­åˆ†ç¦»å•ä¸ªæ­Œæ‰‹æˆ–ä»ç®¡å¼¦ä¹ä¸­åˆ†ç¦»å•ä¸€ä¹å™¨ã€‚</p>
<h2 data-id="heading-6"><strong>éŸ³é¢‘æ„ŸçŸ¥AI</strong></h2>
<p>â€œéŸ³é¢‘å·¥å…·çš„æ°‘ä¸»åŒ–æ˜¯è¿ˆå‘æ›´æ˜“ç”¨ã€æ›´å…·åˆ›æ„å’ŒåŒ…å®¹æ€§AIçš„ä¸€æ­¥ã€‚â€Metaåœ¨å®˜æ–¹å£°æ˜ä¸­è¡¨ç¤ºã€‚éšç€SAM Audioçš„å‘å¸ƒï¼ŒAIä¸ä»…èƒ½å¤Ÿç†è§£å›¾åƒä¸­çš„ç‰©ä½“ã€é‡å»º3Dåœºæ™¯ï¼Œç°åœ¨è¿˜èƒ½ç²¾å‡†è¯†åˆ«å’Œåˆ†ç¦»å¤æ‚éŸ³é¢‘ç¯å¢ƒä¸­çš„å„ç§å£°éŸ³å…ƒç´ ã€‚</p>
<p>SAM Audio å¹¶ä¸æ˜¯ä¸€ä¸ªâ€œä¸‡èƒ½éŸ³é¢‘å·¥å…·â€ï¼Œä½†å®ƒæ˜ç¡®å±•ç¤ºäº†ä¸€ç§è¶‹åŠ¿ï¼š</p>
<p>éŸ³é¢‘åˆ†å‰²æ­£åœ¨ä»â€œå·¥ç¨‹é—®é¢˜â€ï¼Œèµ°å‘â€œæ„ŸçŸ¥ä¸äº¤äº’é—®é¢˜â€ã€‚ä»ä¸“ä¸šéŸ³é¢‘å·¥ç¨‹å¸ˆåˆ°æ™®é€šè§†é¢‘åˆ›ä½œè€…ï¼Œä»æ— éšœç¢æŠ€æœ¯å¼€å‘è€…åˆ°æ—¥å¸¸ç”¨æˆ·ï¼ŒSAM Audioé¢„ç¤ºç€å£°éŸ³ç¼–è¾‘å’Œå¤„ç†å°†å˜å¾—æ›´åŠ æ™ºèƒ½å’Œæ™®åŠã€‚</p>
<p>Metaå·²å°†SAM Audioå’ŒPE-AVå¼€æºï¼Œå¹¶æ•´åˆè¿›Segment Anything Playgroundå¹³å°ã€‚ä»ä»Šå¤©èµ·ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ è‡ªå·±çš„éŸ³é¢‘æˆ–è§†é¢‘æ–‡ä»¶ï¼Œä½“éªŒè¿™ä¸€çªç ´æ€§æ¨¡å‹çš„èƒ½åŠ›ã€‚</p>
<p>å½“æ¨¡å‹èƒ½å¤Ÿç†è§£æ–‡æœ¬ã€è§†è§‰å’Œæ—¶é—´çº¿ç´¢ï¼ŒéŸ³é¢‘å¤„ç†çš„é—¨æ§›å°†è¢«æ˜¾è‘—é™ä½ã€‚è¿™ä¸ä»…å¯¹åˆ›ä½œè€…å’Œç ”ç©¶è€…æœ‰ä»·å€¼ï¼Œä¹Ÿä¸ºæ— éšœç¢æŠ€æœ¯ã€è¾…åŠ©å¬è§‰ç³»ç»Ÿç­‰åº”ç”¨æ‰“å¼€äº†æ–°çš„å¯èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå…¥é—¨æ•™ç¨‹ï¼šä»é›¶åˆ°å®æˆ˜çš„ä¿å§†çº§æŒ‡å—ï¼ˆé¿å‘å¤§å…¨ï¼‰ åŸåˆ›]]></title>    <link>https://juejin.cn/post/7585085798809829403</link>    <guid>https://juejin.cn/post/7585085798809829403</guid>    <pubDate>2025-12-19T05:45:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809829403" data-draft-id="7585139951344828467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå…¥é—¨æ•™ç¨‹ï¼šä»é›¶åˆ°å®æˆ˜çš„ä¿å§†çº§æŒ‡å—ï¼ˆé¿å‘å¤§å…¨ï¼‰ åŸåˆ›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T05:45:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµ„æºç«™shanxueitæˆ–com"/> <meta itemprop="url" content="https://juejin.cn/user/3669500364327483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå…¥é—¨æ•™ç¨‹ï¼šä»é›¶åˆ°å®æˆ˜çš„ä¿å§†çº§æŒ‡å—ï¼ˆé¿å‘å¤§å…¨ï¼‰ åŸåˆ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3669500364327483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµ„æºç«™shanxueitæˆ–com
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:45:47.000Z" title="Fri Dec 19 2025 05:45:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/419c7d2a593f41fe92d0c65bc7742c33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LWE5rqQ56uZc2hhbnh1ZWl05oiWY29t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766727947&amp;x-signature=RPpeJDlXAnsZtJSSb6Q71B3QOrc%3D" alt="å¾®ä¿¡å›¾ç‰‡_20251115194731_6_1.jpg" loading="lazy"/>
å­¦ä¹ Pythonçš„ç¬¬ä¸€æ­¥å¾€å¾€å°±è®©äººå¤´ç–¼â€”â€”ç¯å¢ƒå®‰è£…é…ç½®æ€»æ˜¯é‡åˆ°å„ç§å¥‡æ€ªé—®é¢˜ã€‚åˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡ä¿å§†çº§æ•™ç¨‹å°†ç”¨æœ€è¯¦ç»†çš„æ–¹å¼ï¼Œå¸¦ä½ <strong>é›¶å¤±è´¥</strong>å®ŒæˆPythonç¯å¢ƒæ­å»ºã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Pythonå®‰è£…å‡†å¤‡ï¼šç‰ˆæœ¬é€‰æ‹©å¾ˆé‡è¦</h2>
<h3 data-id="heading-1">1.1 ç‰ˆæœ¬é€‰æ‹©å»ºè®®</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Pythonç‰ˆæœ¬é€‰æ‹©åŸåˆ™ï¼š</span>
<span class="hljs-comment"># 1. æ–°æ‰‹é€‰æ‹© Python 3.10-3.11ï¼ˆç¨³å®šä¸”å…¼å®¹æ€§å¥½ï¼‰</span>
<span class="hljs-comment"># 2. éœ€è¦æœ€æ–°ç‰¹æ€§é€‰æ‹© Python 3.12</span>
<span class="hljs-comment"># 3. é¿å…é€‰æ‹© Python 3.7 ä»¥ä¸‹ç‰ˆæœ¬ï¼ˆå·²åœæ­¢ç»´æŠ¤ï¼‰</span>

<span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦å·²å®‰è£…Python</span>
<span class="hljs-comment"># Windows:</span>
python --version

<span class="hljs-comment"># Mac/Linux:</span>
python3 --version
</code></pre>
<h3 data-id="heading-2">1.2 ä¸‹è½½æ­£ç¡®ç‰ˆæœ¬</h3>
<ul>
<li><strong>Windowsç”¨æˆ·</strong>ï¼šè®¿é—®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python.org%2Fdownloads%2F" target="_blank" title="https://www.python.org/downloads/" ref="nofollow noopener noreferrer">python.org</a></li>
<li><strong>Macç”¨æˆ·</strong>ï¼šæ¨èä½¿ç”¨Homebrewå®‰è£…</li>
<li><strong>Linuxç”¨æˆ·</strong>ï¼šä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨</li>
</ul>
<h2 data-id="heading-3">äºŒã€Windowsç³»ç»Ÿå®‰è£…Pythonï¼ˆè¯¦ç»†å›¾æ–‡ï¼‰</h2>
<h3 data-id="heading-4">2.1 ä¸‹è½½å®‰è£…åŒ…</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä¸‹è½½åœ°å€ï¼šhttps://www.python.org/downloads/windows/</span>
<span class="hljs-meta prompt_"># </span><span class="bash">é€‰æ‹©ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- Windows installer (64-bit)  <span class="hljs-comment"># 64ä½ç³»ç»Ÿ</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">- Windows installer (32-bit)  <span class="hljs-comment"># 32ä½ç³»ç»Ÿ</span></span>
</code></pre>
<h3 data-id="heading-5">2.2 å®‰è£…æ­¥éª¤å›¾è§£</h3>
<p><strong>æ­¥éª¤1ï¼šåŒå‡»å®‰è£…æ–‡ä»¶</strong></p>
<p>text</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs">python-3.11.4-amd64.exe
</code></pre>
<p><strong>æ­¥éª¤2ï¼šå…³é”®é…ç½®ï¼ˆå¿…é¡»å‹¾é€‰ï¼‰</strong></p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®‰è£…ç•Œé¢é€‰é¡¹ï¼š</span>
â˜‘ Add Python <span class="hljs-number">3.11</span> to PATH    <span class="hljs-comment"># â˜…â˜…â˜… æœ€é‡è¦ï¼å¿…é¡»å‹¾é€‰ â˜…â˜…â˜…</span>
â˜‘ Install launcher <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> users
â˜‘ Associate files <span class="hljs-keyword">with</span> Python

<span class="hljs-comment"># å®‰è£…ç±»å‹é€‰æ‹©ï¼š</span>
â—‹ Install Now           <span class="hljs-comment"># é»˜è®¤å®‰è£…ï¼ˆCç›˜ï¼‰</span>
â— Customize installation <span class="hljs-comment"># æ¨èï¼šè‡ªå®šä¹‰å®‰è£…ä½ç½®</span>
</code></pre>
<p><strong>æ­¥éª¤3ï¼šè‡ªå®šä¹‰å®‰è£…ä½ç½®</strong></p>
<p>python</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># å»ºè®®å®‰è£…è·¯å¾„ï¼ˆé¿å…Cç›˜ç©ºé—´ä¸è¶³ï¼‰ï¼š</span>
<span class="hljs-section">D:\Python\Python311      # æ¨èè·¯å¾„</span>
<span class="hljs-comment"># æˆ–</span>
<span class="hljs-section">E:\Development\Python\Python311</span>
</code></pre>
<p><strong>æ­¥éª¤4ï¼šé«˜çº§é€‰é¡¹</strong></p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-sql" lang="sql"># å…¨éƒ¨å‹¾é€‰ï¼š
â˜‘ Install <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> users
â˜‘ Associate files <span class="hljs-keyword">with</span> Python
â˜‘ <span class="hljs-keyword">Create</span> shortcuts
â˜‘ <span class="hljs-keyword">Add</span> Python <span class="hljs-keyword">to</span> environment variables
â˜‘ Precompile standard library
â˜‘ Download debugging symbols
â˜‘ Download debug binaries
</code></pre>
<h3 data-id="heading-6">2.3 éªŒè¯å®‰è£…æˆåŠŸ</h3>
<p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰ï¼š</p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ£€æŸ¥Pythonç‰ˆæœ¬</span>
python --version
<span class="hljs-meta prompt_"># </span><span class="bash">è¾“å‡ºï¼šPython 3.11.4</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">è¿›å…¥Pythonäº¤äº’æ¨¡å¼</span>
python
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, Python!"</span>)</span>
Hello, Python!
<span class="hljs-meta prompt_">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">exit</span>()  <span class="hljs-comment"># é€€å‡º</span></span>
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€Macç³»ç»Ÿå®‰è£…Python</h2>
<h3 data-id="heading-8">3.1 ä½¿ç”¨Homebrewå®‰è£…ï¼ˆæ¨èï¼‰</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-less" lang="less"># <span class="hljs-number">1</span>. é¦–å…ˆå®‰è£…<span class="hljs-selector-tag">Homebrew</span>ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
/<span class="hljs-selector-tag">bin</span>/<span class="hljs-selector-tag">bash</span> <span class="hljs-selector-tag">-c</span> "$(curl -fsSL <span class="hljs-attribute">https</span>:<span class="hljs-comment">//raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</span>

# <span class="hljs-number">2</span>. å®‰è£…Python
brew install python<span class="hljs-variable">@3</span>.<span class="hljs-number">11</span>

# <span class="hljs-number">3</span>. é…ç½®ç¯å¢ƒå˜é‡
echo <span class="hljs-string">'export PATH="/usr/local/opt/python@3.11/bin:$PATH"'</span> &gt;&gt; ~/.zshrc
source ~/.zshrc

# <span class="hljs-number">4</span>. éªŒè¯å®‰è£…
python3 --version
</code></pre>
<h3 data-id="heading-9">3.2 å®˜æ–¹å®‰è£…åŒ…æ–¹å¼</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½pkgæ–‡ä»¶å®‰è£…åï¼ŒéªŒè¯ï¼š</span>
<span class="hljs-comment"># æ£€æŸ¥Python3æ˜¯å¦å®‰è£…æˆåŠŸ</span>
python3 --version

<span class="hljs-comment"># åˆ›å»ºåˆ«åï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿ä½¿ç”¨pythonå‘½ä»¤ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"alias python=python3"</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> ~/.zshrc
</code></pre>
<h2 data-id="heading-10">å››ã€Linuxç³»ç»Ÿå®‰è£…Python</h2>
<h3 data-id="heading-11">4.1 Ubuntu/Debianç³»ç»Ÿ</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ›´æ–°åŒ…åˆ—è¡¨</span>
sudo apt update

<span class="hljs-comment"># 2. å®‰è£…Pythonå’Œç›¸å…³å·¥å…·</span>
sudo apt install python3 python3-pip python3-venv

<span class="hljs-comment"># 3. å®‰è£…æ„å»ºä¾èµ–ï¼ˆå¯é€‰ï¼Œç”¨äºç¼–è¯‘æŸäº›åŒ…ï¼‰</span>
sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget libbz2-dev

<span class="hljs-comment"># 4. è®¾ç½®é»˜è®¤Pythonç‰ˆæœ¬ï¼ˆå¦‚æœç³»ç»Ÿæœ‰å¤šä¸ªç‰ˆæœ¬ï¼‰</span>
sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 1
</code></pre>
<h3 data-id="heading-12">4.2 CentOS/RHELç³»ç»Ÿ</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Python 3</span>
sudo yum install python3

<span class="hljs-comment"># 2. å®‰è£…å¼€å‘å·¥å…·</span>
sudo yum groupinstall <span class="hljs-string">"Development Tools"</span>
sudo yum install openssl-devel bzip2-devel libffi-devel

<span class="hljs-comment"># 3. å®‰è£…pip</span>
sudo yum install python3-pip
</code></pre>
<h2 data-id="heading-13">äº”ã€é…ç½®Pythonå¼€å‘ç¯å¢ƒ</h2>
<h3 data-id="heading-14">5.1 é…ç½®pipé•œåƒæºï¼ˆå›½å†…åŠ é€Ÿï¼‰</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># Windowsåœ¨CMDä¸­æ‰§è¡Œï¼š</span>
pip config <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span>.index-url https:<span class="hljs-comment">//pypi.tuna.tsinghua.edu.cn/simple</span>

<span class="hljs-meta"># Mac/Linuxåœ¨ç»ˆç«¯æ‰§è¡Œï¼š</span>
pip3 config <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span>.index-url https:<span class="hljs-comment">//pypi.tuna.tsinghua.edu.cn/simple</span>

<span class="hljs-meta"># å¸¸ç”¨é•œåƒæºï¼š</span>
<span class="hljs-meta"># æ¸…åï¼šhttps://pypi.tuna.tsinghua.edu.cn/simple</span>
<span class="hljs-meta"># é˜¿é‡Œï¼šhttps://mirrors.aliyun.com/pypi/simple</span>
<span class="hljs-meta"># è…¾è®¯ï¼šhttps://mirrors.cloud.tencent.com/pypi/simple</span>
</code></pre>
<h3 data-id="heading-15">5.2 å‡çº§pipå’Œsetuptools</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Windows:</span>
python -m pip install --upgrade pip setuptools

<span class="hljs-comment"># Mac/Linux:</span>
python3 -m pip install --upgrade pip setuptools
</code></pre>
<h3 data-id="heading-16">5.3 å®‰è£…è™šæ‹Ÿç¯å¢ƒå·¥å…·</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…virtualenvï¼ˆæ¨èï¼‰</span>
pip install virtualenv

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨venvï¼ˆPython 3.3+è‡ªå¸¦ï¼‰</span>
<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</span>
python -m venv myenv

<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š</span>
<span class="hljs-comment"># Windows:</span>
myenv\Scripts\activate

<span class="hljs-comment"># Mac/Linux:</span>
<span class="hljs-built_in">source</span> myenv/bin/activate

<span class="hljs-comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š</span>
deactivate
</code></pre>
<h2 data-id="heading-17">å…­ã€å®‰è£…å¸¸ç”¨å¼€å‘å·¥å…·</h2>
<h3 data-id="heading-18">6.1 VS Codeé…ç½®Pythonå¼€å‘ç¯å¢ƒ</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…VS Codeæ‰©å±•ï¼š</span>
<span class="hljs-comment"># - Python (Microsoft)</span>
<span class="hljs-comment"># - Python Extension Pack</span>
<span class="hljs-comment"># - Python Docstring Generator</span>
<span class="hljs-comment"># - Python Indent</span>

<span class="hljs-comment"># 2. é…ç½®settings.json</span>
{
    <span class="hljs-string">"python.defaultInterpreterPath"</span>: <span class="hljs-string">"D:\Python\Python311\python.exe"</span>,
    <span class="hljs-string">"python.linting.enabled"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"python.linting.pylintEnabled"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"python.formatting.provider"</span>: <span class="hljs-string">"black"</span>,
    <span class="hljs-string">"python.terminal.activateEnvironment"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h3 data-id="heading-19">6.2 PyCharmç¤¾åŒºç‰ˆå®‰è£…</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. ä¸‹è½½åœ°å€ï¼šhttps://www.jetbrains.com/pycharm/download/</span>
<span class="hljs-meta prompt_"># </span><span class="bash">2. å…è´¹ä½¿ç”¨ç¤¾åŒºç‰ˆ</span>
<span class="hljs-meta prompt_"># </span><span class="bash">3. é…ç½®Pythonè§£é‡Šå™¨ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">   File â†’ Settings â†’ Project: YourProject â†’ Python Interpreter</span>
<span class="hljs-meta prompt_"># </span><span class="bash">   ç‚¹å‡»é½¿è½® â†’ Add â†’ System Interpreter â†’ é€‰æ‹©ä½ çš„Pythonå®‰è£…è·¯å¾„</span>
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-21">7.1 "pythonä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">é—®é¢˜ï¼šå¿˜è®°å‹¾é€‰<span class="hljs-string">"Add Python to PATH"</span></span>
<span class="hljs-meta prompt_"># </span><span class="bash">è§£å†³æ–¹æ¡ˆï¼š</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–¹æ³•1ï¼šæ‰‹åŠ¨æ·»åŠ ç¯å¢ƒå˜é‡</span>
<span class="hljs-meta prompt_"># </span><span class="bash">1. å³å‡»<span class="hljs-string">"æ­¤ç”µè„‘"</span> â†’ å±æ€§ â†’ é«˜çº§ç³»ç»Ÿè®¾ç½®</span>
<span class="hljs-meta prompt_"># </span><span class="bash">2. ç¯å¢ƒå˜é‡ â†’ ç³»ç»Ÿå˜é‡ â†’ Path â†’ ç¼–è¾‘</span>
<span class="hljs-meta prompt_"># </span><span class="bash">3. æ·»åŠ Pythonå®‰è£…è·¯å¾„å’ŒScriptsè·¯å¾„ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">   C:\Users\YourName\AppData\Local\Programs\Python\Python311\
<span class="hljs-comment">#    C:\Users\YourName\AppData\Local\Programs\Python\Python311\Scripts\</span>
</span><span class="hljs-meta prompt_">
# </span><span class="bash">æ–¹æ³•2ï¼šé‡æ–°å®‰è£…å¹¶å‹¾é€‰<span class="hljs-string">"Add Python to PATH"</span></span>
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–¹æ³•3ï¼šä½¿ç”¨å®Œæ•´è·¯å¾„</span>
C:\Python311\python.exe your_script.py
</code></pre>
<h3 data-id="heading-22">7.2 pipå‘½ä»¤ä¸å¯ç”¨</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è§£å†³æ–¹æ¡ˆï¼š</span>
<span class="hljs-comment"># 1. ç¡®ä¿Scriptsç›®å½•åœ¨PATHä¸­</span>
<span class="hljs-comment"># 2. ä½¿ç”¨python -m pipä»£æ›¿pip</span>
python -m pip install package_name

<span class="hljs-comment"># 3. é‡æ–°å®‰è£…pip</span>
python -m ensurepip --upgrade
</code></pre>
<h3 data-id="heading-23">7.3 æƒé™é—®é¢˜ï¼ˆMac/Linuxï¼‰</h3>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨sudoæˆ–pipçš„--useré€‰é¡¹</span>
sudo pip3 install package_name
<span class="hljs-comment"># æˆ–</span>
pip3 install --user package_name
</code></pre>
<h2 data-id="heading-24">å…«ã€éªŒè¯å®Œæ•´ç¯å¢ƒé…ç½®</h2>
<p>åˆ›å»ºæµ‹è¯•è„šæœ¬Â <code>test_environment.py</code>ï¼š</p>
<p>python</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Pythonç¯å¢ƒæµ‹è¯•è„šæœ¬
è¿è¡Œæ­¤è„šæœ¬æ£€æŸ¥ç¯å¢ƒæ˜¯å¦é…ç½®æ­£ç¡®
"""</span>

<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> platform

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_python_version</span>():
    <span class="hljs-string">"""æ£€æŸ¥Pythonç‰ˆæœ¬"""</span>
    version_info = sys.version_info
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Pythonç‰ˆæœ¬: <span class="hljs-subst">{sys.version}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸»ç‰ˆæœ¬å·: <span class="hljs-subst">{version_info.major}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¬¡ç‰ˆæœ¬å·: <span class="hljs-subst">{version_info.minor}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¾®ç‰ˆæœ¬å·: <span class="hljs-subst">{version_info.micro}</span>"</span>)
    
    <span class="hljs-keyword">if</span> version_info.major == <span class="hljs-number">3</span> <span class="hljs-keyword">and</span> version_info.minor &gt;= <span class="hljs-number">8</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Pythonç‰ˆæœ¬æ£€æŸ¥é€šè¿‡"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  å»ºè®®å‡çº§åˆ°Python 3.8æˆ–æ›´é«˜ç‰ˆæœ¬"</span>)
    
    <span class="hljs-keyword">return</span> version_info

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_platform</span>():
    <span class="hljs-string">"""æ£€æŸ¥æ“ä½œç³»ç»Ÿ"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ“ä½œç³»ç»Ÿ: <span class="hljs-subst">{platform.system()}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ“ä½œç³»ç»Ÿç‰ˆæœ¬: <span class="hljs-subst">{platform.version()}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»ç»Ÿæ¶æ„: <span class="hljs-subst">{platform.machine()}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†å™¨: <span class="hljs-subst">{platform.processor()}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_pip_packages</span>():
    <span class="hljs-string">"""æ£€æŸ¥å¸¸ç”¨åŒ…æ˜¯å¦å¯å¯¼å…¥"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ£€æŸ¥æ ¸å¿ƒåŒ…å¯¼å…¥:"</span>)
    
    packages = [<span class="hljs-string">'numpy'</span>, <span class="hljs-string">'pandas'</span>, <span class="hljs-string">'requests'</span>, <span class="hljs-string">'matplotlib'</span>]
    
    <span class="hljs-keyword">for</span> package <span class="hljs-keyword">in</span> packages:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-built_in">__import__</span>(package)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… <span class="hljs-subst">{package:<span class="hljs-number">15</span>}</span> å¯¼å…¥æˆåŠŸ"</span>)
        <span class="hljs-keyword">except</span> ImportError:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ <span class="hljs-subst">{package:<span class="hljs-number">15</span>}</span> æœªå®‰è£…"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_virtual_env</span>():
    <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">'real_prefix'</span>) <span class="hljs-keyword">or</span> (<span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">'base_prefix'</span>) <span class="hljs-keyword">and</span> sys.base_prefix != sys.prefix):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… è¿è¡Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è™šæ‹Ÿç¯å¢ƒè·¯å¾„: <span class="hljs-subst">{sys.prefix}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"â„¹ï¸  è¿è¡Œåœ¨ç³»ç»ŸPythonç¯å¢ƒä¸­"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_environment_variables</span>():
    <span class="hljs-string">"""æ£€æŸ¥ç¯å¢ƒå˜é‡"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Pythonç›¸å…³ç¯å¢ƒå˜é‡:"</span>)
    
    env_vars = [<span class="hljs-string">'PATH'</span>, <span class="hljs-string">'PYTHONPATH'</span>, <span class="hljs-string">'PYTHONHOME'</span>]
    
    <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> env_vars:
        value = sys.path <span class="hljs-keyword">if</span> var == <span class="hljs-string">'PYTHONPATH'</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> var <span class="hljs-keyword">in</span> os.environ:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… <span class="hljs-subst">{var:<span class="hljs-number">15</span>}</span> å·²è®¾ç½®"</span>)
            <span class="hljs-keyword">if</span> var == <span class="hljs-string">'PATH'</span> <span class="hljs-keyword">and</span> <span class="hljs-string">'Python'</span> <span class="hljs-keyword">in</span> os.environ[var]:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"   Pythonè·¯å¾„å·²åœ¨PATHä¸­"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â„¹ï¸  <span class="hljs-subst">{var:<span class="hljs-number">15</span>}</span> æœªè®¾ç½®"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æ£€æŸ¥Pythonç¯å¢ƒé…ç½®..."</span>)
    
    <span class="hljs-comment"># æ£€æŸ¥Pythonç‰ˆæœ¬</span>
    check_python_version()
    
    <span class="hljs-comment"># æ£€æŸ¥å¹³å°ä¿¡æ¯</span>
    check_platform()
    
    <span class="hljs-comment"># æ£€æŸ¥pipåŒ…</span>
    check_pip_packages()
    
    <span class="hljs-comment"># æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ</span>
    check_virtual_env()
    
    <span class="hljs-comment"># æ£€æŸ¥ç¯å¢ƒå˜é‡</span>
    <span class="hljs-keyword">import</span> os
    <span class="hljs-built_in">globals</span>()[<span class="hljs-string">'os'</span>] = os  <span class="hljs-comment"># è®©check_environment_variablesèƒ½è®¿é—®os</span>
    check_environment_variables()
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¯å¢ƒæ£€æŸ¥å®Œæˆï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¦‚æœçœ‹åˆ°âŒï¼Œè¡¨ç¤ºéœ€è¦å®‰è£…å¯¹åº”åŒ…ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"pip install numpy pandas requests matplotlib"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<p>è¿è¡Œæµ‹è¯•ï¼š</p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œæµ‹è¯•è„šæœ¬</span>
python test_environment.py

<span class="hljs-comment"># æˆ–</span>
python3 test_environment.py
</code></pre>
<h2 data-id="heading-25">ä¹ã€ä¸€é”®å®‰è£…å¸¸ç”¨åŒ…è„šæœ¬</h2>
<p>åˆ›å»ºÂ <code>install_requirements.py</code>ï¼š</p>
<p>python</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
ä¸€é”®å®‰è£…Pythonå¸¸ç”¨å¼€å‘åŒ…
"""</span>

<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_command</span>(<span class="hljs-params">command</span>):
    <span class="hljs-string">"""è¿è¡Œå‘½ä»¤è¡Œå‘½ä»¤"""</span>
    <span class="hljs-keyword">try</span>:
        result = subprocess.run(
            command,
            shell=<span class="hljs-literal">True</span>,
            capture_output=<span class="hljs-literal">True</span>,
            text=<span class="hljs-literal">True</span>,
            check=<span class="hljs-literal">True</span>
        )
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… å‘½ä»¤æ‰§è¡ŒæˆåŠŸ: <span class="hljs-subst">{command}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">except</span> subprocess.CalledProcessError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å‘½ä»¤æ‰§è¡Œå¤±è´¥: <span class="hljs-subst">{command}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ä¿¡æ¯: <span class="hljs-subst">{e.stderr}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">install_packages</span>():
    <span class="hljs-string">"""å®‰è£…å¸¸ç”¨åŒ…"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å®‰è£…Pythonå¸¸ç”¨å¼€å‘åŒ…..."</span>)
    
    <span class="hljs-comment"># åŸºç¡€æ•°æ®ç§‘å­¦åŒ…</span>
    data_science_packages = [
        <span class="hljs-string">"numpy"</span>,          <span class="hljs-comment"># æ•°å€¼è®¡ç®—</span>
        <span class="hljs-string">"pandas"</span>,         <span class="hljs-comment"># æ•°æ®åˆ†æ</span>
        <span class="hljs-string">"matplotlib"</span>,     <span class="hljs-comment"># æ•°æ®å¯è§†åŒ–</span>
        <span class="hljs-string">"scikit-learn"</span>,   <span class="hljs-comment"># æœºå™¨å­¦ä¹ </span>
        <span class="hljs-string">"jupyter"</span>,        <span class="hljs-comment"># ç¬”è®°æœ¬</span>
    ]
    
    <span class="hljs-comment"># Webå¼€å‘åŒ…</span>
    web_packages = [
        <span class="hljs-string">"flask"</span>,          <span class="hljs-comment"># è½»é‡çº§Webæ¡†æ¶</span>
        <span class="hljs-string">"django"</span>,         <span class="hljs-comment"># å…¨åŠŸèƒ½Webæ¡†æ¶</span>
        <span class="hljs-string">"requests"</span>,       <span class="hljs-comment"># HTTPè¯·æ±‚åº“</span>
        <span class="hljs-string">"beautifulsoup4"</span>, <span class="hljs-comment"># HTMLè§£æ</span>
        <span class="hljs-string">"fastapi"</span>,        <span class="hljs-comment"># ç°ä»£APIæ¡†æ¶</span>
    ]
    
    <span class="hljs-comment"># å·¥å…·å’Œå·¥å…·åŒ…</span>
    tool_packages = [
        <span class="hljs-string">"virtualenv"</span>,     <span class="hljs-comment"># è™šæ‹Ÿç¯å¢ƒ</span>
        <span class="hljs-string">"pipenv"</span>,         <span class="hljs-comment"># åŒ…ç®¡ç†</span>
        <span class="hljs-string">"black"</span>,          <span class="hljs-comment"># ä»£ç æ ¼å¼åŒ–</span>
        <span class="hljs-string">"pylint"</span>,         <span class="hljs-comment"># ä»£ç æ£€æŸ¥</span>
        <span class="hljs-string">"pytest"</span>,         <span class="hljs-comment"># æµ‹è¯•æ¡†æ¶</span>
        <span class="hljs-string">"ipython"</span>,        <span class="hljs-comment"># äº¤äº’å¼Python</span>
    ]
    
    all_packages = data_science_packages + web_packages + tool_packages
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ€»å…±éœ€è¦å®‰è£… <span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_packages)}</span> ä¸ªåŒ…"</span>)
    
    <span class="hljs-comment"># ä½¿ç”¨é•œåƒæºåŠ é€Ÿå®‰è£…</span>
    pip_command = <span class="hljs-string">f"<span class="hljs-subst">{sys.executable}</span> -m pip install"</span>
    
    success_count = <span class="hljs-number">0</span>
    fail_count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">for</span> i, package <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(all_packages, <span class="hljs-number">1</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n[<span class="hljs-subst">{i}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_packages)}</span>] æ­£åœ¨å®‰è£… <span class="hljs-subst">{package}</span>..."</span>)
        
        <span class="hljs-comment"># ä½¿ç”¨æ¸…åé•œåƒæº</span>
        command = <span class="hljs-string">f"<span class="hljs-subst">{pip_command}</span> <span class="hljs-subst">{package}</span> -i https://pypi.tuna.tsinghua.edu.cn/simple"</span>
        
        <span class="hljs-keyword">if</span> run_command(command):
            success_count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>:
            fail_count += <span class="hljs-number">1</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å®‰è£…å®Œæˆï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸå®‰è£…: <span class="hljs-subst">{success_count}</span> ä¸ªåŒ…"</span>)
    <span class="hljs-keyword">if</span> fail_count &gt; <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å®‰è£…å¤±è´¥: <span class="hljs-subst">{fail_count}</span> ä¸ªåŒ…"</span>)
    
    <span class="hljs-comment"># ç”Ÿæˆrequirements.txt</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç”Ÿæˆrequirements.txtæ–‡ä»¶..."</span>)
    run_command(<span class="hljs-string">f"<span class="hljs-subst">{pip_command}</span> freeze &gt; requirements.txt"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¸¸ç”¨å‘½ä»¤å‚è€ƒï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ: python -m venv myenv"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ: myenv\Scripts\activate (Windows)"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. å®‰è£…ä¾èµ–: pip install -r requirements.txt"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. å‡çº§æ‰€æœ‰åŒ…: pip install --upgrade $(pip freeze | cut -d= -f1)"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># æ£€æŸ¥pipæ˜¯å¦å¯ç”¨</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">import</span> pip
        install_packages()
    <span class="hljs-keyword">except</span> ImportError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âŒ pipæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…pip"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿è¡Œ: python -m ensurepip --upgrade"</span>)
        sys.exit(<span class="hljs-number">1</span>)
</code></pre>
<p>è¿è¡Œä¸€é”®å®‰è£…ï¼š</p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œå®‰è£…è„šæœ¬</span>
python install_requirements.py
</code></pre>
<h2 data-id="heading-26">åã€ç¯å¢ƒé…ç½®æ£€æŸ¥æ¸…å•</h2>
<p>å®‰è£…å®Œæˆåï¼Œè¯·é€é¡¹æ£€æŸ¥ï¼š</p>
<h3 data-id="heading-27">âœ… åŸºç¡€æ£€æŸ¥</h3>
<ul>
<li><code>python --version</code>Â èƒ½æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬</li>
<li><code>pip --version</code>Â èƒ½æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬</li>
<li>èƒ½è¿›å…¥Pythonäº¤äº’æ¨¡å¼ (<code>python</code>Â ç„¶åÂ <code>exit()</code>)</li>
</ul>
<h3 data-id="heading-28">âœ… ç¯å¢ƒå˜é‡æ£€æŸ¥</h3>
<ul>
<li>Pythonå®‰è£…è·¯å¾„åœ¨ç³»ç»ŸPATHä¸­</li>
<li>Scriptsè·¯å¾„åœ¨ç³»ç»ŸPATHä¸­</li>
</ul>
<h3 data-id="heading-29">âœ… å¼€å‘ç¯å¢ƒæ£€æŸ¥</h3>
<ul>
<li>èƒ½åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (<code>python -m venv test_env</code>)</li>
<li>èƒ½æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</li>
<li>èƒ½å®‰è£…ç¬¬ä¸‰æ–¹åŒ… (<code>pip install requests</code>)</li>
</ul>
<h3 data-id="heading-30">âœ… ç¼–è¾‘å™¨é…ç½®æ£€æŸ¥</h3>
<ul>
<li>VS Code/PyCharmèƒ½è¯†åˆ«Pythonè§£é‡Šå™¨</li>
<li>ç¼–è¾‘å™¨èƒ½è¿è¡ŒPythonè„šæœ¬</li>
<li>ç¼–è¾‘å™¨æœ‰Pythonè¯­æ³•é«˜äº®å’Œæç¤º</li>
</ul>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>æŒ‰ç…§è¿™ä¸ªä¿å§†çº§æ•™ç¨‹ï¼Œä½ åº”è¯¥èƒ½<strong>100%æˆåŠŸ</strong>é…ç½®å¥½Pythonå¼€å‘ç¯å¢ƒã€‚è®°ä½å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>å®‰è£…æ—¶ä¸€å®šè¦å‹¾é€‰"Add Python to PATH"</strong></li>
<li><strong>é…ç½®å›½å†…é•œåƒæºåŠ é€Ÿä¸‹è½½</strong></li>
<li><strong>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»é¡¹ç›®</strong></li>
<li><strong>å®‰è£…ç¼–è¾‘å™¨æ‰©å±•æå‡å¼€å‘æ•ˆç‡</strong></li>
</ol>
<p>å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>æŸ¥çœ‹æœ¬æ–‡çš„"å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ"éƒ¨åˆ†</li>
<li>è¿è¡Œæä¾›çš„æµ‹è¯•è„šæœ¬å®šä½é—®é¢˜</li>
<li>ç¡®ä¿ä¸¥æ ¼æŒ‰ç…§å›¾æ–‡æ­¥éª¤æ“ä½œ</li>
</ol>
<p>ç°åœ¨ï¼Œä½ çš„Pythonç¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æ„‰å¿«çš„ç¼–ç¨‹ä¹‹æ—…äº†ï¼ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„äºŒè¿›åˆ¶è¿ç®—]]></title>    <link>https://juejin.cn/post/7585206549304868927</link>    <guid>https://juejin.cn/post/7585206549304868927</guid>    <pubDate>2025-12-19T05:48:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585206549304868927" data-draft-id="7585138968166793252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„äºŒè¿›åˆ¶è¿ç®—"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-12-19T05:48:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶Šåƒå¹´"/> <meta itemprop="url" content="https://juejin.cn/user/4152180068068295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„äºŒè¿›åˆ¶è¿ç®—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4152180068068295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶Šåƒå¹´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:48:38.000Z" title="Fri Dec 19 2025 05:48:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å·¥ä½œä¸­å¸¸ç”¨åˆ°çš„äºŒè¿›åˆ¶è¿ç®—</h2>
<h3 data-id="heading-1">è¿›åˆ¶è½¬æ¢è¡¨</h3>











































































































<table><thead><tr><th>äºŒè¿›åˆ¶</th><th>å…«è¿›åˆ¶</th><th>åè¿›åˆ¶</th><th>åå…­è¿›åˆ¶</th></tr></thead><tbody><tr><td>0000</td><td>0</td><td>0</td><td>0</td></tr><tr><td>0001</td><td>1</td><td>1</td><td>1</td></tr><tr><td>0010</td><td>2</td><td>2</td><td>2</td></tr><tr><td>0011</td><td>3</td><td>3</td><td>3</td></tr><tr><td>0100</td><td>4</td><td>4</td><td>4</td></tr><tr><td>0101</td><td>5</td><td>5</td><td>5</td></tr><tr><td>0110</td><td>6</td><td>6</td><td>6</td></tr><tr><td>0111</td><td>7</td><td>7</td><td>7</td></tr><tr><td>1000</td><td>10</td><td>8</td><td>8</td></tr><tr><td>1001</td><td>11</td><td>9</td><td>9</td></tr><tr><td>1010</td><td>12</td><td>10</td><td>A</td></tr><tr><td>1011</td><td>13</td><td>11</td><td>B</td></tr><tr><td>1100</td><td>14</td><td>12</td><td>C</td></tr><tr><td>1101</td><td>15</td><td>13</td><td>D</td></tr><tr><td>1110</td><td>16</td><td>14</td><td>E</td></tr><tr><td>1111</td><td>17</td><td>15</td><td>F</td></tr></tbody></table>
<h3 data-id="heading-2">Goè¯­è¨€ä¸­çš„è¿›åˆ¶è¡¨ç¤º</h3>
<p>åœ¨Goè¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒå‰ç¼€è¡¨ç¤ºä¸åŒè¿›åˆ¶çš„æ•°ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// äºŒè¿›åˆ¶è¡¨ç¤º (0b æˆ– 0B å¼€å¤´)</span>
    binaryNum := <span class="hljs-number">0</span>b1010     <span class="hljs-comment">// åè¿›åˆ¶ 10</span>
    binaryNum2 := <span class="hljs-number">0</span>B1100    <span class="hljs-comment">// åè¿›åˆ¶ 12</span>
    
    <span class="hljs-comment">// å…«è¿›åˆ¶è¡¨ç¤º (0o, 0O æˆ– 0 å¼€å¤´)</span>
    octalNum := <span class="hljs-number">0</span>o12        <span class="hljs-comment">// åè¿›åˆ¶ 10</span>
    octalNum2 := <span class="hljs-number">0</span>O16       <span class="hljs-comment">// åè¿›åˆ¶ 14</span>
    octalNum3 := <span class="hljs-number">012</span>        <span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•ï¼Œåè¿›åˆ¶ 10</span>
    
    <span class="hljs-comment">// åå…­è¿›åˆ¶è¡¨ç¤º (0x æˆ– 0X å¼€å¤´)</span>
    hexNum := <span class="hljs-number">0xA</span>           <span class="hljs-comment">// åè¿›åˆ¶ 10</span>
    hexNum2 := <span class="hljs-number">0xFF</span>         <span class="hljs-comment">// åè¿›åˆ¶ 255</span>
    
    fmt.Printf(<span class="hljs-string">"äºŒè¿›åˆ¶ 0b1010 = %d\n"</span>, binaryNum)
    fmt.Printf(<span class="hljs-string">"å…«è¿›åˆ¶ 0o12 = %d\n"</span>, octalNum)
    fmt.Printf(<span class="hljs-string">"åå…­è¿›åˆ¶ 0xA = %d\n"</span>, hexNum)
}
</code></pre>
<h3 data-id="heading-3">äºŒè¿›åˆ¶è¿ç®—åŸºç¡€</h3>
<h4 data-id="heading-4">1. ä½è¿ç®—ï¼ˆBitwise Operationsï¼‰</h4>
<p>â€‹<strong>ä¸è¿ç®—ï¼ˆ&amp;ï¼‰â€‹</strong>â€‹ï¼šä¸¤ä¸ªä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">andOperation</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    b := <span class="hljs-number">0</span>b1100  <span class="hljs-comment">// 12</span>
    result := a &amp; b  <span class="hljs-comment">// 0b1000 = 8</span>
    
    fmt.Printf(<span class="hljs-string">"%b &amp; %b = %b (åè¿›åˆ¶: %d)\n"</span>, a, b, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1010 &amp; 1100 = 1000 (åè¿›åˆ¶: 8)</span>
}
</code></pre>
<p>â€‹<strong>æˆ–è¿ç®—ï¼ˆ|ï¼‰â€‹</strong>â€‹ï¼šä¸¤ä¸ªä½æœ‰ä¸€ä¸ªä¸º1æ—¶ï¼Œç»“æœå°±ä¸º1</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">orOperation</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    b := <span class="hljs-number">0</span>b1100  <span class="hljs-comment">// 12</span>
    result := a | b  <span class="hljs-comment">// 0b1110 = 14</span>
    
    fmt.Printf(<span class="hljs-string">"%b | %b = %b (åè¿›åˆ¶: %d)\n"</span>, a, b, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1010 | 1100 = 1110 (åè¿›åˆ¶: 14)</span>
}
</code></pre>
<p>â€‹<strong>å¼‚æˆ–è¿ç®—ï¼ˆ^ï¼‰â€‹</strong>â€‹ï¼šä¸¤ä¸ªä½ä¸åŒæ—¶ï¼Œç»“æœä¸º1</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">xorOperation</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    b := <span class="hljs-number">0</span>b1100  <span class="hljs-comment">// 12</span>
    result := a ^ b  <span class="hljs-comment">// 0b0110 = 6</span>
    
    fmt.Printf(<span class="hljs-string">"%b ^ %b = %b (åè¿›åˆ¶: %d)\n"</span>, a, b, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1010 ^ 1100 = 110 (åè¿›åˆ¶: 6)</span>
}
</code></pre>
<p>â€‹<strong>éè¿ç®—ï¼ˆ^ æˆ– ^=ï¼‰â€‹</strong>â€‹ï¼šåœ¨Goä¸­ï¼Œä¸€å…ƒ^æ˜¯æŒ‰ä½å–å</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">notOperation</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    result := ^a  <span class="hljs-comment">// åœ¨64ä½ç³»ç»Ÿä¸­: -11</span>
    
    <span class="hljs-comment">// è¦åªå–ä½4ä½ï¼Œå¯ä»¥ä½¿ç”¨æ©ç </span>
    maskedResult := result &amp; <span class="hljs-number">0</span>b1111  <span class="hljs-comment">// 0b0101 = 5</span>
    
    fmt.Printf(<span class="hljs-string">"^%b = %b (å®Œæ•´: %064b)\n"</span>, a, maskedResult, result)
}
</code></pre>
<p>â€‹<strong>æ¸…é™¤ä½è¿ç®—ï¼ˆ&amp;^ï¼‰â€‹</strong>â€‹ï¼šGoè¯­è¨€ç‰¹æœ‰çš„ä½æ¸…ç©ºè¿ç®—ç¬¦</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">andNotOperation</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1011  <span class="hljs-comment">// 11</span>
    b := <span class="hljs-number">0</span>b1100  <span class="hljs-comment">// 12</span>
    result := a &amp;^ b  <span class="hljs-comment">// 0b0011 = 3</span>
    
    fmt.Printf(<span class="hljs-string">"%b &amp;^ %b = %b (åè¿›åˆ¶: %d)\n"</span>, a, b, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1011 &amp;^ 1100 = 11 (åè¿›åˆ¶: 3)</span>
    <span class="hljs-comment">// è§£é‡Š: åœ¨bä¸º1çš„ä½ç½®ï¼Œå°†açš„å¯¹åº”ä½æ¸…é›¶</span>
}
</code></pre>
<h4 data-id="heading-5">2. ç§»ä½è¿ç®—ï¼ˆShift Operationsï¼‰</h4>
<p>â€‹<strong>å·¦ç§»ï¼ˆ&lt;&lt;ï¼‰â€‹</strong>â€‹ï¼šå‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œä½ä½è¡¥0</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">leftShift</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    result := a &lt;&lt; <span class="hljs-number">2</span>  <span class="hljs-comment">// 0b101000 = 40</span>
    
    fmt.Printf(<span class="hljs-string">"%b &lt;&lt; 2 = %b (åè¿›åˆ¶: %d)\n"</span>, a, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1010 &lt;&lt; 2 = 101000 (åè¿›åˆ¶: 40)</span>
}
</code></pre>
<p>â€‹<strong>å³ç§»ï¼ˆ&gt;&gt;ï¼‰â€‹</strong>â€‹ï¼šå‘å³ç§»åŠ¨æŒ‡å®šä½æ•°</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">rightShift</span><span class="hljs-params">()</span></span> {
    a := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    result := a &gt;&gt; <span class="hljs-number">2</span>  <span class="hljs-comment">// 0b0010 = 2</span>
    
    fmt.Printf(<span class="hljs-string">"%b &gt;&gt; 2 = %b (åè¿›åˆ¶: %d)\n"</span>, a, result, result)
    <span class="hljs-comment">// è¾“å‡º: 1010 &gt;&gt; 2 = 10 (åè¿›åˆ¶: 2)</span>
}
</code></pre>
<h3 data-id="heading-6">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-7">1. æƒé™æ§åˆ¶</h4>
<p>ä½¿ç”¨ä½æ©ç è¿›è¡Œæƒé™ç®¡ç†ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-keyword">const</span> (
    Read   = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-literal">iota</span>  <span class="hljs-comment">// 0b0001 = 1</span>
    Write               <span class="hljs-comment">// 0b0010 = 2</span>
    Execute             <span class="hljs-comment">// 0b0100 = 4</span>
    Admin               <span class="hljs-comment">// 0b1000 = 8</span>
)

<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    name       <span class="hljs-type">string</span>
    permissions <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *User)</span></span> addPermission(perm <span class="hljs-type">int</span>) {
    u.permissions |= perm
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *User)</span></span> removePermission(perm <span class="hljs-type">int</span>) {
    u.permissions &amp;^= perm
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u *User)</span></span> hasPermission(perm <span class="hljs-type">int</span>) <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> (u.permissions &amp; perm) != <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    user := User{name: <span class="hljs-string">"Alice"</span>, permissions: <span class="hljs-number">0</span>}
    
    <span class="hljs-comment">// æ·»åŠ æƒé™</span>
    user.addPermission(Read | Write)
    
    <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
    fmt.Printf(<span class="hljs-string">"%s æœ‰è¯»å–æƒé™: %v\n"</span>, user.name, user.hasPermission(Read))
    fmt.Printf(<span class="hljs-string">"%s æœ‰æ‰§è¡Œæƒé™: %v\n"</span>, user.name, user.hasPermission(Execute))
    
    <span class="hljs-comment">// æƒé™äºŒè¿›åˆ¶è¡¨ç¤º</span>
    fmt.Printf(<span class="hljs-string">"æƒé™ä½: %04b\n"</span>, user.permissions)
}
</code></pre>
<h4 data-id="heading-8">2. æ ‡å¿—ä½å¤„ç†</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// ä½¿ç”¨ iota è‡ªåŠ¨ç”Ÿæˆä½æ ‡å¿—</span>
<span class="hljs-keyword">const</span> (
    FlagA = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-literal">iota</span>  <span class="hljs-comment">// 0b0001</span>
    FlagB              <span class="hljs-comment">// 0b0010</span>
    FlagC              <span class="hljs-comment">// 0b0100</span>
    FlagD              <span class="hljs-comment">// 0b1000</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processFlags</span><span class="hljs-params">(flags <span class="hljs-type">int</span>)</span></span> {
    <span class="hljs-keyword">if</span> flags &amp; FlagA != <span class="hljs-number">0</span> {
        fmt.Println(<span class="hljs-string">"FlagA è¢«è®¾ç½®"</span>)
    }
    
    <span class="hljs-keyword">if</span> flags &amp; FlagB != <span class="hljs-number">0</span> {
        fmt.Println(<span class="hljs-string">"FlagB è¢«è®¾ç½®"</span>)
    }
    
    <span class="hljs-comment">// æ£€æŸ¥å¤šä¸ªæ ‡å¿—</span>
    <span class="hljs-keyword">if</span> flags &amp; (FlagA | FlagB) == (FlagA | FlagB) {
        fmt.Println(<span class="hljs-string">"åŒæ—¶è®¾ç½®äº†FlagAå’ŒFlagB"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    flags := FlagA | FlagC
    fmt.Printf(<span class="hljs-string">"å½“å‰æ ‡å¿—: %04b\n"</span>, flags)
    processFlags(flags)
}
</code></pre>
<h4 data-id="heading-9">3. å¿«é€Ÿä¹˜é™¤æ³•è¿ç®—</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fastMath</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b1010  <span class="hljs-comment">// 10</span>
    
    <span class="hljs-comment">// å¿«é€Ÿä¹˜ä»¥2^n</span>
    multiplyBy4 := num &lt;&lt; <span class="hljs-number">2</span>  <span class="hljs-comment">// 10 * 4 = 40</span>
    multiplyBy8 := num &lt;&lt; <span class="hljs-number">3</span>  <span class="hljs-comment">// 10 * 8 = 80</span>
    
    <span class="hljs-comment">// å¿«é€Ÿé™¤ä»¥2^n</span>
    divideBy2 := num &gt;&gt; <span class="hljs-number">1</span>    <span class="hljs-comment">// 10 / 2 = 5</span>
    divideBy4 := num &gt;&gt; <span class="hljs-number">2</span>    <span class="hljs-comment">// 10 / 4 = 2</span>
    
    fmt.Printf(<span class="hljs-string">"10 * 4 = %d\n"</span>, multiplyBy4)
    fmt.Printf(<span class="hljs-string">"10 / 2 = %d\n"</span>, divideBy2)
}
</code></pre>
<h4 data-id="heading-10">4. å¥‡å¶åˆ¤æ–­</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isEvenOdd</span><span class="hljs-params">()</span></span> {
    numbers := []<span class="hljs-type">int</span>{<span class="hljs-number">0</span>b1010, <span class="hljs-number">0</span>b1011, <span class="hljs-number">0</span>b1100, <span class="hljs-number">0</span>b1101}
    
    <span class="hljs-keyword">for</span> _, n := <span class="hljs-keyword">range</span> numbers {
        <span class="hljs-comment">// ä¸ 0b1 è¿›è¡Œä¸è¿ç®—åˆ¤æ–­å¥‡å¶</span>
        <span class="hljs-keyword">if</span> n&amp;<span class="hljs-number">1</span> == <span class="hljs-number">0</span> {
            fmt.Printf(<span class="hljs-string">"%d (%b) æ˜¯å¶æ•°\n"</span>, n, n)
        } <span class="hljs-keyword">else</span> {
            fmt.Printf(<span class="hljs-string">"%d (%b) æ˜¯å¥‡æ•°\n"</span>, n, n)
        }
    }
}
</code></pre>
<h3 data-id="heading-11">è¿›é˜¶æŠ€å·§</h3>
<h4 data-id="heading-12">1. è·å–æœ€ä½ä½çš„1</h4>
<pre><code class="hljs language-dart" lang="dart">func getLowestOneBit() {
    <span class="hljs-built_in">num</span> := <span class="hljs-number">0</span>b101100  <span class="hljs-comment">// åè¿›åˆ¶ 44</span>
    
    <span class="hljs-comment">// è·å–æœ€ä½ä½çš„1</span>
    <span class="hljs-comment">// åŸç†: -num æ˜¯ num çš„äºŒè¿›åˆ¶è¡¥ç </span>
    <span class="hljs-comment">// ä¾‹å¦‚: num = 44 (0b101100)</span>
    <span class="hljs-comment">// -num = -44 (äºŒè¿›åˆ¶è¡¥ç : ...1111010100)</span>
    <span class="hljs-comment">// num &amp; -num ä¼šå¾—åˆ°åªä¿ç•™æœ€ä½ä½1çš„ç»“æœ</span>
    lowestBit := <span class="hljs-built_in">num</span> &amp; -<span class="hljs-built_in">num</span>
    
    fmt.Printf(<span class="hljs-string">"æ•°å­—: %d (%b)\n"</span>, <span class="hljs-built_in">num</span>, <span class="hljs-built_in">num</span>)
    fmt.Printf(<span class="hljs-string">"æœ€ä½ä½çš„1: %d (%b)\n"</span>, lowestBit, lowestBit)
    <span class="hljs-comment">// è¾“å‡º: æ•°å­—: 44 (101100)</span>
    <span class="hljs-comment">//       æœ€ä½ä½çš„1: 4 (100)</span>
}
</code></pre>
<h4 data-id="heading-13">2. åˆ¤æ–­æ˜¯å¦ä¸º2çš„å¹‚</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isPowerOfTwo</span><span class="hljs-params">()</span></span> {
    numbers := []<span class="hljs-type">int</span>{<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>}  <span class="hljs-comment">// äºŒè¿›åˆ¶: 1000, 1001, 10000, 100000, 100001</span>
    
    <span class="hljs-keyword">for</span> _, n := <span class="hljs-keyword">range</span> numbers {
        <span class="hljs-comment">// 2çš„å¹‚çš„ç‰¹å¾: äºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰ä¸€ä¸ª1</span>
        <span class="hljs-comment">// åŸç†: å¦‚æœnæ˜¯2çš„å¹‚ï¼Œé‚£ä¹ˆn-1çš„æ‰€æœ‰ä½ä½éƒ½æ˜¯1</span>
        <span class="hljs-comment">// ä¾‹å¦‚: 8(1000) &amp; 7(0111) = 0</span>
        <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">0</span> &amp;&amp; (n &amp; (n<span class="hljs-number">-1</span>)) == <span class="hljs-number">0</span> {
            fmt.Printf(<span class="hljs-string">"%d (%b) æ˜¯2çš„å¹‚\n"</span>, n, n)
        } <span class="hljs-keyword">else</span> {
            fmt.Printf(<span class="hljs-string">"%d (%b) ä¸æ˜¯2çš„å¹‚\n"</span>, n, n)
        }
    }
}
</code></pre>
<h4 data-id="heading-14">3. ç»Ÿè®¡1çš„ä¸ªæ•°ï¼ˆä½è®¡æ•°ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">countOnes</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b101101  <span class="hljs-comment">// 45ï¼ŒäºŒè¿›åˆ¶æœ‰4ä¸ª1</span>
    
    <span class="hljs-comment">// æ–¹æ³•1: å¾ªç¯è®¡æ•°</span>
    count := <span class="hljs-number">0</span>
    temp := num
    <span class="hljs-keyword">for</span> temp != <span class="hljs-number">0</span> {
        count++
        <span class="hljs-comment">// å…³é”®æŠ€å·§: n &amp; (n-1) ä¼šæ¸…é™¤æœ€ä½ä½çš„1</span>
        <span class="hljs-comment">// æ¯æ¬¡å¾ªç¯æ¸…é™¤ä¸€ä¸ª1ï¼Œç›´åˆ°æ‰€æœ‰1éƒ½è¢«æ¸…é™¤</span>
        temp &amp;= temp - <span class="hljs-number">1</span>
    }
    
    fmt.Printf(<span class="hljs-string">"æ•°å­— %d (%b) æœ‰ %d ä¸ª1\n"</span>, num, num, count)
    
    <span class="hljs-comment">// æ–¹æ³•2: ä½¿ç”¨å†…ç½®å‡½æ•°ï¼ˆGo 1.9+ï¼‰</span>
    <span class="hljs-comment">// import "math/bits"</span>
    <span class="hljs-comment">// count = bits.OnesCount(uint(num))</span>
}
</code></pre>
<h4 data-id="heading-15">4. åè½¬äºŒè¿›åˆ¶ä½</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reverseBits</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b10100111  <span class="hljs-comment">// 167</span>
    reversed := <span class="hljs-number">0</span>
    bits := <span class="hljs-number">8</span>  <span class="hljs-comment">// å‡è®¾å¤„ç†8ä½</span>
    
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; bits; i++ {
        <span class="hljs-comment">// 1. å°†ç»“æœå·¦ç§»1ä½ï¼Œä¸ºæœ€ä½ä½è…¾å‡ºç©ºé—´</span>
        reversed &lt;&lt;= <span class="hljs-number">1</span>
        
        <span class="hljs-comment">// 2. è·å–åŸæ•°çš„æœ€ä½ä½</span>
        <span class="hljs-comment">// 3. å°†åŸæ•°çš„æœ€ä½ä½æ”¾åˆ°ç»“æœçš„æœ€ä½ä½</span>
        reversed |= (num &amp; <span class="hljs-number">1</span>)
        
        <span class="hljs-comment">// 4. åŸæ•°å³ç§»1ä½ï¼Œå¤„ç†ä¸‹ä¸€ä½</span>
        num &gt;&gt;= <span class="hljs-number">1</span>
    }
    
    fmt.Printf(<span class="hljs-string">"åŸå§‹: %08b\n"</span>, <span class="hljs-number">0</span>b10100111)
    fmt.Printf(<span class="hljs-string">"åè½¬: %08b\n"</span>, reversed)
    <span class="hljs-comment">// è¾“å‡º: åŸå§‹: 10100111</span>
    <span class="hljs-comment">//       åè½¬: 11100101</span>
}
</code></pre>
<h4 data-id="heading-16">5. æå–è¿ç»­ä½</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">extractBits</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b11011010  <span class="hljs-comment">// 218</span>
    
    <span class="hljs-comment">// æå–ç¬¬3-5ä½ï¼ˆä»å³å‘å·¦ï¼Œä»0å¼€å§‹è®¡æ•°ï¼‰</span>
    start := <span class="hljs-number">3</span>
    end := <span class="hljs-number">5</span>
    
    <span class="hljs-comment">// åŸç†:</span>
    <span class="hljs-comment">// 1. åˆ›å»ºæ©ç : (1 &lt;&lt; (end-start+1)) - 1</span>
    <span class="hljs-comment">//    ä¾‹å¦‚æå–3ä½: (1 &lt;&lt; 3) - 1 = 0b111</span>
    <span class="hljs-comment">// 2. å³ç§»startä½ï¼Œå°†ç›®æ ‡ä½ç§»åŠ¨åˆ°æœ€ä½ä½</span>
    <span class="hljs-comment">// 3. ä¸æ©ç è¿›è¡Œä¸è¿ç®—ï¼Œåªä¿ç•™éœ€è¦çš„ä½</span>
    mask := (<span class="hljs-number">1</span> &lt;&lt; (end - start + <span class="hljs-number">1</span>)) - <span class="hljs-number">1</span>
    result := (num &gt;&gt; start) &amp; mask
    
    fmt.Printf(<span class="hljs-string">"åŸå§‹æ•°å­—: %08b\n"</span>, num)
    fmt.Printf(<span class="hljs-string">"æå–ç¬¬%d-%dä½: %03b (åè¿›åˆ¶: %d)\n"</span>, start, end, result, result)
    <span class="hljs-comment">// è¾“å‡º: æå–ç¬¬3-5ä½: 101 (åè¿›åˆ¶: 5)</span>
}
</code></pre>
<h4 data-id="heading-17">6. æ£€æŸ¥ç‰¹å®šä½æ˜¯å¦è¢«è®¾ç½®</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">checkBit</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b10110110  <span class="hljs-comment">// 182</span>
    
    <span class="hljs-comment">// æ£€æŸ¥ç¬¬4ä½ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰</span>
    pos := <span class="hljs-number">4</span>
    
    <span class="hljs-comment">// æ–¹æ³•1: å³ç§»åæ£€æŸ¥æœ€ä½ä½</span>
    bit1 := (num &gt;&gt; pos) &amp; <span class="hljs-number">1</span>
    
    <span class="hljs-comment">// æ–¹æ³•2: åˆ›å»ºæ©ç åæ£€æŸ¥</span>
    mask := <span class="hljs-number">1</span> &lt;&lt; pos
    bit2 := (num &amp; mask) != <span class="hljs-number">0</span>
    
    fmt.Printf(<span class="hljs-string">"æ•°å­—: %08b\n"</span>, num)
    fmt.Printf(<span class="hljs-string">"ç¬¬%dä½: %d (æ–¹æ³•1)\n"</span>, pos, bit1)
    fmt.Printf(<span class="hljs-string">"ç¬¬%dä½: %v (æ–¹æ³•2)\n"</span>, pos, bit2)
}
</code></pre>
<h3 data-id="heading-18">å®ç”¨å·¥å…·å‡½æ•°</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"strings"</span>
)

<span class="hljs-comment">// æ ¼å¼åŒ–æ˜¾ç¤ºäºŒè¿›åˆ¶</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">formatBinary</span><span class="hljs-params">(num <span class="hljs-type">int</span>, bits <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"%0*b"</span>, bits, num)
}

<span class="hljs-comment">// è®¾ç½®ç‰¹å®šä½</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setBit</span><span class="hljs-params">(num <span class="hljs-type">int</span>, pos <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> num | (<span class="hljs-number">1</span> &lt;&lt; pos)
}

<span class="hljs-comment">// æ¸…é™¤ç‰¹å®šä½</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clearBit</span><span class="hljs-params">(num <span class="hljs-type">int</span>, pos <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> num &amp;^ (<span class="hljs-number">1</span> &lt;&lt; pos)
}

<span class="hljs-comment">// åˆ‡æ¢ç‰¹å®šä½ï¼ˆ0å˜1ï¼Œ1å˜0ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">toggleBit</span><span class="hljs-params">(num <span class="hljs-type">int</span>, pos <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> num ^ (<span class="hljs-number">1</span> &lt;&lt; pos)
}

<span class="hljs-comment">// æ£€æŸ¥ç‰¹å®šä½æ˜¯å¦è¢«è®¾ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">isBitSet</span><span class="hljs-params">(num <span class="hljs-type">int</span>, pos <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">return</span> (num &amp; (<span class="hljs-number">1</span> &lt;&lt; pos)) != <span class="hljs-number">0</span>
}

<span class="hljs-comment">// è·å–æœ€ä½ä½1çš„ä½ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getLowestBitPosition</span><span class="hljs-params">(num <span class="hljs-type">int</span>)</span></span> <span class="hljs-type">int</span> {
    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
    }
    position := <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (num &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">0</span> {
        num &gt;&gt;= <span class="hljs-number">1</span>
        position++
    }
    <span class="hljs-keyword">return</span> position
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    num := <span class="hljs-number">0</span>b11011010
    
    fmt.Printf(<span class="hljs-string">"åŸå§‹æ•°å­—: %s\n"</span>, formatBinary(num, <span class="hljs-number">8</span>))
    fmt.Printf(<span class="hljs-string">"è®¾ç½®ç¬¬2ä½: %s\n"</span>, formatBinary(setBit(num, <span class="hljs-number">2</span>), <span class="hljs-number">8</span>))
    fmt.Printf(<span class="hljs-string">"æ¸…é™¤ç¬¬3ä½: %s\n"</span>, formatBinary(clearBit(num, <span class="hljs-number">3</span>), <span class="hljs-number">8</span>))
    fmt.Printf(<span class="hljs-string">"åˆ‡æ¢ç¬¬5ä½: %s\n"</span>, formatBinary(toggleBit(num, <span class="hljs-number">5</span>), <span class="hljs-number">8</span>))
    fmt.Printf(<span class="hljs-string">"ç¬¬4ä½æ˜¯å¦è®¾ç½®: %v\n"</span>, isBitSet(num, <span class="hljs-number">4</span>))
    fmt.Printf(<span class="hljs-string">"æœ€ä½ä½1çš„ä½ç½®: %d\n"</span>, getLowestBitPosition(num))
}
</code></pre>
<h3 data-id="heading-19">æ€§èƒ½ä¼˜åŠ¿</h3>
<p>Goè¯­è¨€ä¸­çš„ä½è¿ç®—åœ¨æ€§èƒ½ä¸Šæœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ol>
<li>â€‹<strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>â€‹ï¼šGoç¼–è¯‘å™¨èƒ½è¯†åˆ«ä½è¿ç®—æ¨¡å¼å¹¶è¿›è¡Œä¼˜åŒ–</li>
<li>â€‹<strong>CPUåŸç”Ÿæ”¯æŒ</strong>â€‹ï¼šç°ä»£CPUéƒ½æœ‰ä¸“é—¨çš„ä½è¿ç®—æŒ‡ä»¤</li>
<li>â€‹<strong>å†…å­˜é«˜æ•ˆ</strong>â€‹ï¼šå¤šä¸ªå¸ƒå°”æ ‡å¿—å¯ä»¥æ‰“åŒ…åˆ°ä¸€ä¸ªæ•´å‹ä¸­</li>
</ol>
<pre><code class="hljs language-css" lang="css">// æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹
package <span class="hljs-selector-tag">main</span>

import (
    "fmt"
    "<span class="hljs-selector-tag">time</span>"
)

func <span class="hljs-selector-tag">main</span>() {
    const iterations = <span class="hljs-number">1000000000</span>
    
    // ä½¿ç”¨ä¹˜æ³•
    start := time.<span class="hljs-built_in">Now</span>()
    for i := <span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span> &lt; iterations; <span class="hljs-selector-tag">i</span>++ {
        _ = <span class="hljs-selector-tag">i</span> * <span class="hljs-number">2</span>
    }
    multiplyTime := time.<span class="hljs-built_in">Since</span>(start)
    
    // ä½¿ç”¨ä½ç§»
    start = time.<span class="hljs-built_in">Now</span>()
    for i := <span class="hljs-number">0</span>; <span class="hljs-selector-tag">i</span> &lt; iterations; <span class="hljs-selector-tag">i</span>++ {
        _ = <span class="hljs-selector-tag">i</span> &lt;&lt; <span class="hljs-number">1</span>
    }
    shiftTime := time.<span class="hljs-built_in">Since</span>(start)
    
    fmt.<span class="hljs-built_in">Printf</span>(<span class="hljs-string">"ä¹˜æ³•ç”¨æ—¶: %v\n"</span>, multiplyTime)
    fmt.<span class="hljs-built_in">Printf</span>(<span class="hljs-string">"ä½ç§»ç”¨æ—¶: %v\n"</span>, shiftTime)
    fmt.<span class="hljs-built_in">Printf</span>(<span class="hljs-string">"ä½ç§»æ¯”ä¹˜æ³•å¿«: %.2f%%\n"</span>, 
        <span class="hljs-built_in">float64</span>(multiplyTime.<span class="hljs-built_in">Nanoseconds</span>()-shiftTime.<span class="hljs-built_in">Nanoseconds</span>())/<span class="hljs-built_in">float64</span>(multiplyTime.<span class="hljs-built_in">Nanoseconds</span>())*<span class="hljs-number">100</span>)
}
</code></pre>
<h3 data-id="heading-20">æ€»ç»“</h3>
<p>åœ¨Goå¼€å‘ä¸­ï¼ŒäºŒè¿›åˆ¶è¿ç®—ä¸ä»…æ˜¯åº•å±‚ç¼–ç¨‹çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç¼–å†™é«˜æ•ˆä»£ç çš„é‡è¦å·¥å…·ã€‚é€šè¿‡åˆç†ä½¿ç”¨ï¼š</p>
<ol>
<li>â€‹<strong>æƒé™å’Œæ ‡å¿—ä½ç®¡ç†</strong>â€‹ï¼šä½¿ç”¨ä½æ©ç æé«˜å­˜å‚¨æ•ˆç‡</li>
<li>â€‹<strong>æ•°å­¦ä¼˜åŒ–</strong>â€‹ï¼šä½ç§»æ›¿ä»£ä¹˜é™¤æå‡æ€§èƒ½</li>
<li>â€‹<strong>ç®—æ³•å®ç°</strong>â€‹ï¼šåœ¨ç®—æ³•ç«èµ›å’Œæ€§èƒ½æ•æ„Ÿåœºæ™¯ä¸­å¹¿æ³›åº”ç”¨</li>
<li>â€‹<strong>ä½æ“ä½œæŠ€å·§</strong>â€‹ï¼šè§£å†³ç‰¹å®šé—®é¢˜çš„é«˜æ•ˆæ–¹æ¡ˆ</li>
</ol>
<p>æŒæ¡è¿™äº›æŠ€å·§èƒ½è®©ä½ çš„Goä»£ç æ›´åŠ é«˜æ•ˆã€ä¼˜é›…ã€‚å»ºè®®åœ¨å®é™…é¡¹ç›®ä¸­å¤šå°è¯•ä½¿ç”¨ä½è¿ç®—ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æ ‡å¿—ã€æƒé™ã€çŠ¶æ€ç­‰åœºæ™¯æ—¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—ç¬¦ä¸²æ¯”è¾ƒçš„ç»å…¸å‘ï¼š== vs equals]]></title>    <link>https://juejin.cn/post/7585138968166891556</link>    <guid>https://juejin.cn/post/7585138968166891556</guid>    <pubDate>2025-12-19T05:55:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585138968166891556" data-draft-id="7584110439933476910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—ç¬¦ä¸²æ¯”è¾ƒçš„ç»å…¸å‘ï¼š== vs equals"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-19T05:55:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—ç¬¦ä¸²æ¯”è¾ƒçš„ç»å…¸å‘ï¼š== vs equals
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:55:10.000Z" title="Fri Dec 19 2025 05:55:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ª Java ç¨‹åºä¸­ï¼Œæ¶‰åŠåˆ°å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ“ä½œã€‚å¼€å‘äººå‘˜åœ¨åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œè¯¯ä½¿ç”¨äº†Â <code>==</code>Â è¿ç®—ç¬¦ï¼Œè€Œä¸æ˜¯Â <code>equals</code>Â æ–¹æ³•ã€‚ç¨‹åºåœ¨éƒ¨åˆ†æƒ…å†µä¸‹è¿è¡Œæ­£å¸¸ï¼Œä½†åœ¨å…¶ä»–æƒ…å†µä¸‹å´å‡ºç°é€»è¾‘é”™è¯¯ï¼Œå¯¼è‡´åŠŸèƒ½æ— æ³•æ­£ç¡®å®ç°ï¼Œç»™ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§å¸¦æ¥äº†éšæ‚£ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">å­—ç¬¦ä¸²æ¯”è¾ƒç±»ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringComparison</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compareStrings</span><span class="hljs-params">(String str1, String str2)</span> {
        <span class="hljs-comment">// é”™è¯¯åœ°ä½¿ç”¨ == è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ</span>
        <span class="hljs-keyword">return</span> str1 == str2; 
    }
}
</code></pre>
<h3 data-id="heading-3">æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringComparisonBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"Hello"</span>);

        System.out.println(<span class="hljs-string">"s1 == s2 ä½¿ç”¨ == ç»“æœ: "</span> + StringComparison.compareStrings(s1, s2));
        System.out.println(<span class="hljs-string">"s1 == s3 ä½¿ç”¨ == ç»“æœ: "</span> + StringComparison.compareStrings(s1, s3));

        System.out.println(<span class="hljs-string">"s1.equals(s2) ä½¿ç”¨equalsç»“æœ: "</span> + s1.equals(s2));
        System.out.println(<span class="hljs-string">"s1.equals(s3) ä½¿ç”¨equalsç»“æœ: "</span> + s1.equals(s3));
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šæ— è®ºå­—ç¬¦ä¸²æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œåªè¦å®ƒä»¬çš„å†…å®¹ç›¸åŒï¼Œæ¯”è¾ƒç»“æœå°±åº”è¯¥ä¸ºÂ <code>true</code>ã€‚</li>
<li><strong>å®é™…è¡Œä¸º</strong>ï¼šå½“ä½¿ç”¨Â <code>==</code>Â è¿ç®—ç¬¦è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œ<code>s1 == s2</code>Â è¿”å›Â <code>true</code>ï¼Œå› ä¸ºÂ <code>s1</code>Â å’ŒÂ <code>s2</code>Â æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚ç„¶è€Œï¼Œ<code>s1 == s3</code>Â è¿”å›Â <code>false</code>ï¼Œå°½ç®¡Â <code>s1</code>Â å’ŒÂ <code>s3</code>Â çš„å†…å®¹éƒ½æ˜¯Â <code>"Hello"</code>ã€‚è¿™æ˜¯å› ä¸ºÂ <code>s3</code>Â æ˜¯é€šè¿‡Â <code>new</code>Â å…³é”®å­—åˆ›å»ºçš„ï¼Œå®ƒåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿäº†æ–°çš„ç©ºé—´ï¼Œä¸Â <code>s1</code>Â æŒ‡å‘ä¸åŒçš„å†…å­˜åœ°å€ã€‚è€ŒÂ <code>==</code>Â è¿ç®—ç¬¦æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œå¹¶éå­—ç¬¦ä¸²çš„å†…å®¹ã€‚è€ŒÂ <code>equals</code>Â æ–¹æ³•æ‰æ˜¯æ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>å§‹ç»ˆä½¿ç”¨Â <code>equals</code>Â æ–¹æ³•</strong>ï¼šåœ¨è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œæ— è®ºåœ¨ä½•ç§æƒ…å†µä¸‹ï¼Œéƒ½ä½¿ç”¨Â <code>equals</code>Â æ–¹æ³•æ¥ç¡®ä¿æ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²çš„å†…å®¹ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringComparison</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compareStrings</span><span class="hljs-params">(String str1, String str2)</span> {
        <span class="hljs-comment">// ä½¿ç”¨equalsæ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ</span>
        <span class="hljs-keyword">if</span> (str1 == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> str2 == <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">return</span> str1.equals(str2); 
    }
}
</code></pre>
<ol start="2">
<li><strong>è€ƒè™‘Â <code>null</code>Â å€¼</strong>ï¼šåœ¨ä½¿ç”¨Â <code>equals</code>Â æ–¹æ³•æ—¶ï¼Œéœ€è¦æ³¨æ„å…¶ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²å¯èƒ½ä¸ºÂ <code>null</code>Â çš„æƒ…å†µã€‚ä¸Šè¿°ä»£ç ä¸­ï¼Œå…ˆå¯¹Â <code>str1</code>Â æ˜¯å¦ä¸ºÂ <code>null</code>Â è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœÂ <code>str1</code>Â ä¸ºÂ <code>null</code>ï¼Œåˆ™åªæœ‰å½“Â <code>str2</code>Â ä¹Ÿä¸ºÂ <code>null</code>Â æ—¶æ‰è¿”å›Â <code>true</code>ã€‚è¿™æ ·å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®¡ç†100å°æœåŠ¡å™¨æ˜¯ä»€ä¹ˆä½“éªŒï¼ŸPythonä¸€è¡Œä»£ç æå®š]]></title>    <link>https://juejin.cn/post/7585139951344877619</link>    <guid>https://juejin.cn/post/7585139951344877619</guid>    <pubDate>2025-12-19T05:55:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585139951344877619" data-draft-id="7585138968166842404" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®¡ç†100å°æœåŠ¡å™¨æ˜¯ä»€ä¹ˆä½“éªŒï¼ŸPythonä¸€è¡Œä»£ç æå®š"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-12-19T05:55:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®¡ç†100å°æœåŠ¡å™¨æ˜¯ä»€ä¹ˆä½“éªŒï¼ŸPythonä¸€è¡Œä»£ç æå®š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:55:33.000Z" title="Fri Dec 19 2025 05:55:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯¦è§£Python Fabricåº“å®ç°SSHè¿œç¨‹æ‰§è¡Œã€æ‰¹é‡éƒ¨ç½²å’Œè‡ªåŠ¨åŒ–è¿ç»´ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿ç»´æ—¥å¸¸ï¼š</p>
<ul>
<li>ç™»å½•æœåŠ¡å™¨Aï¼Œæ‰§è¡Œå‘½ä»¤</li>
<li>ç™»å½•æœåŠ¡å™¨Bï¼Œæ‰§è¡ŒåŒæ ·å‘½ä»¤</li>
<li>ç™»å½•æœåŠ¡å™¨C...</li>
</ul>
<p>è¿™å¤ªç—›è‹¦äº†ï¼ç”¨<strong>Python + Fabric</strong>å®ç°æ‰¹é‡è‡ªåŠ¨åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€Fabricç®€ä»‹</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯Fabric</h3>
<pre><code class="hljs language-diff" lang="diff">Fabric = Python + SSH + æ‰¹é‡æ‰§è¡Œ

åŠŸèƒ½ï¼š
<span class="hljs-deletion">- è¿œç¨‹æ‰§è¡Œå‘½ä»¤</span>
<span class="hljs-deletion">- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</span>
<span class="hljs-deletion">- æ‰¹é‡æ“ä½œå¤šå°æœåŠ¡å™¨</span>
<span class="hljs-deletion">- éƒ¨ç½²è‡ªåŠ¨åŒ–</span>
</code></pre>
<h3 data-id="heading-3">1.2 å¯¹æ¯”å…¶ä»–å·¥å…·</h3>



































<table><thead><tr><th>å·¥å…·</th><th>è¯­è¨€</th><th>å­¦ä¹ æˆæœ¬</th><th>çµæ´»æ€§</th></tr></thead><tbody><tr><td>Fabric</td><td>Python</td><td>ä½</td><td>é«˜</td></tr><tr><td>Ansible</td><td>YAML</td><td>ä¸­</td><td>ä¸­</td></tr><tr><td>SaltStack</td><td>Python/YAML</td><td>é«˜</td><td>é«˜</td></tr><tr><td>Shellè„šæœ¬</td><td>Bash</td><td>ä½</td><td>ä½</td></tr></tbody></table>
<p>Fabricé€‚åˆï¼š<strong>ä¸­å°è§„æ¨¡</strong>ã€<strong>éœ€è¦çµæ´»å®šåˆ¶</strong>çš„åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-5">2.1 å®‰è£…Fabric</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Python 3.6+</span>
pip install fabric

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
fab --version
</code></pre>
<h3 data-id="heading-6">2.2 åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># fabfile.py</span>
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection

<span class="hljs-comment"># è¿æ¥è¿œç¨‹æœåŠ¡å™¨</span>
conn = Connection(
    host=<span class="hljs-string">'192.168.1.100'</span>,
    user=<span class="hljs-string">'root'</span>,
    connect_kwargs={
        <span class="hljs-string">'password'</span>: <span class="hljs-string">'your_password'</span>
        <span class="hljs-comment"># æˆ–ä½¿ç”¨å¯†é’¥</span>
        <span class="hljs-comment"># 'key_filename': '/path/to/id_rsa'</span>
    }
)

<span class="hljs-comment"># æ‰§è¡Œå‘½ä»¤</span>
result = conn.run(<span class="hljs-string">'uname -a'</span>)
<span class="hljs-built_in">print</span>(result.stdout)

<span class="hljs-comment"># å…³é—­è¿æ¥</span>
conn.close()
</code></pre>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½</h2>
<h3 data-id="heading-8">3.1 è¿œç¨‹æ‰§è¡Œå‘½ä»¤</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection

<span class="hljs-keyword">def</span> <span class="hljs-title function_">remote_exec</span>():
    <span class="hljs-string">"""è¿œç¨‹æ‰§è¡Œå‘½ä»¤"""</span>
    conn = Connection(<span class="hljs-string">'root@192.168.1.100'</span>)
    
    <span class="hljs-comment"># åŸºæœ¬æ‰§è¡Œ</span>
    result = conn.run(<span class="hljs-string">'hostname'</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸»æœºå: <span class="hljs-subst">{result.stdout.strip()}</span>"</span>)
    
    <span class="hljs-comment"># éšè—è¾“å‡º</span>
    result = conn.run(<span class="hljs-string">'cat /etc/os-release'</span>, hide=<span class="hljs-literal">True</span>)
    <span class="hljs-built_in">print</span>(result.stdout)
    
    <span class="hljs-comment"># å¸¦ç¯å¢ƒå˜é‡</span>
    conn.run(<span class="hljs-string">'echo $HOME'</span>, env={<span class="hljs-string">'HOME'</span>: <span class="hljs-string">'/root'</span>})
    
    <span class="hljs-comment"># æŒ‡å®šå·¥ä½œç›®å½•</span>
    <span class="hljs-keyword">with</span> conn.cd(<span class="hljs-string">'/var/log'</span>):
        conn.run(<span class="hljs-string">'ls -la'</span>)
    
    conn.close()
</code></pre>
<h3 data-id="heading-9">3.2 æ–‡ä»¶æ“ä½œ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection

<span class="hljs-keyword">def</span> <span class="hljs-title function_">file_operations</span>():
    <span class="hljs-string">"""æ–‡ä»¶ä¸Šä¼ ä¸‹è½½"""</span>
    conn = Connection(<span class="hljs-string">'root@192.168.1.100'</span>)
    
    <span class="hljs-comment"># ä¸Šä¼ æ–‡ä»¶</span>
    conn.put(<span class="hljs-string">'local_file.txt'</span>, <span class="hljs-string">'/tmp/remote_file.txt'</span>)
    
    <span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶</span>
    conn.get(<span class="hljs-string">'/var/log/syslog'</span>, <span class="hljs-string">'local_syslog.txt'</span>)
    
    <span class="hljs-comment"># ä¸Šä¼ å¹¶è®¾ç½®æƒé™</span>
    conn.put(<span class="hljs-string">'script.sh'</span>, <span class="hljs-string">'/opt/script.sh'</span>)
    conn.run(<span class="hljs-string">'chmod +x /opt/script.sh'</span>)
    
    conn.close()
</code></pre>
<h3 data-id="heading-10">3.3 Sudoæ‰§è¡Œ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sudo_exec</span>():
    <span class="hljs-string">"""ä»¥sudoæ–¹å¼æ‰§è¡Œ"""</span>
    conn = Connection(
        <span class="hljs-string">'user@192.168.1.100'</span>,
        connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'user_password'</span>}
    )
    
    <span class="hljs-comment"># sudoæ‰§è¡Œ</span>
    conn.sudo(<span class="hljs-string">'systemctl restart nginx'</span>, password=<span class="hljs-string">'sudo_password'</span>)
    
    <span class="hljs-comment"># ä»¥å…¶ä»–ç”¨æˆ·æ‰§è¡Œ</span>
    conn.sudo(<span class="hljs-string">'whoami'</span>, user=<span class="hljs-string">'www-data'</span>)
    
    conn.close()
</code></pre>
<hr/>
<h2 data-id="heading-11">å››ã€æ‰¹é‡æ“ä½œ</h2>
<h3 data-id="heading-12">4.1 ThreadingGroupå¹¶è¡Œæ‰§è¡Œ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> ThreadingGroup

<span class="hljs-keyword">def</span> <span class="hljs-title function_">batch_exec</span>():
    <span class="hljs-string">"""æ‰¹é‡å¹¶è¡Œæ‰§è¡Œ"""</span>
    <span class="hljs-comment"># æœåŠ¡å™¨åˆ—è¡¨</span>
    hosts = [
        <span class="hljs-string">'root@192.168.1.101'</span>,
        <span class="hljs-string">'root@192.168.1.102'</span>,
        <span class="hljs-string">'root@192.168.1.103'</span>,
    ]
    
    <span class="hljs-comment"># åˆ›å»ºç»„ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰</span>
    group = ThreadingGroup(*hosts, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'password'</span>})
    
    <span class="hljs-comment"># æ‰¹é‡æ‰§è¡Œ</span>
    results = group.run(<span class="hljs-string">'hostname'</span>)
    
    <span class="hljs-keyword">for</span> conn, result <span class="hljs-keyword">in</span> results.items():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{conn.host}</span>: <span class="hljs-subst">{result.stdout.strip()}</span>"</span>)
    
    group.close()
</code></pre>
<h3 data-id="heading-13">4.2 SerialGroupä¸²è¡Œæ‰§è¡Œ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> SerialGroup

<span class="hljs-keyword">def</span> <span class="hljs-title function_">serial_exec</span>():
    <span class="hljs-string">"""ä¸²è¡Œæ‰§è¡Œï¼ˆé€‚åˆæœ‰ä¾èµ–çš„ä»»åŠ¡ï¼‰"""</span>
    hosts = [<span class="hljs-string">'root@192.168.1.101'</span>, <span class="hljs-string">'root@192.168.1.102'</span>]
    
    group = SerialGroup(*hosts, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'password'</span>})
    
    <span class="hljs-comment"># ä¾æ¬¡æ‰§è¡Œ</span>
    group.run(<span class="hljs-string">'apt update'</span>)
    group.run(<span class="hljs-string">'apt upgrade -y'</span>)
    
    group.close()
</code></pre>
<h3 data-id="heading-14">4.3 ä»é…ç½®æ–‡ä»¶è¯»å–æœåŠ¡å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># servers.yaml</span>
<span class="hljs-comment"># web:</span>
<span class="hljs-comment">#   - 192.168.1.101</span>
<span class="hljs-comment">#   - 192.168.1.102</span>
<span class="hljs-comment"># db:</span>
<span class="hljs-comment">#   - 192.168.1.201</span>

<span class="hljs-keyword">import</span> yaml
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> ThreadingGroup

<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_servers</span>():
    <span class="hljs-string">"""ä»é…ç½®æ–‡ä»¶åŠ è½½æœåŠ¡å™¨"""</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'servers.yaml'</span>) <span class="hljs-keyword">as</span> f:
        servers = yaml.safe_load(f)
    
    <span class="hljs-comment"># æ‰¹é‡æ“ä½œwebæœåŠ¡å™¨</span>
    web_hosts = [<span class="hljs-string">f'root@<span class="hljs-subst">{ip}</span>'</span> <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> servers[<span class="hljs-string">'web'</span>]]
    group = ThreadingGroup(*web_hosts, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'password'</span>})
    
    group.run(<span class="hljs-string">'nginx -t'</span>)
    group.run(<span class="hljs-string">'systemctl reload nginx'</span>)
    
    group.close()
</code></pre>
<hr/>
<h2 data-id="heading-15">äº”ã€å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-16">5.1 æ¡ˆä¾‹ï¼šæ‰¹é‡éƒ¨ç½²åº”ç”¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># deploy.py</span>
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection, ThreadingGroup
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Deployer</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, hosts, user=<span class="hljs-string">'root'</span>, password=<span class="hljs-literal">None</span>, key_file=<span class="hljs-literal">None</span></span>):
        self.hosts = [<span class="hljs-string">f'<span class="hljs-subst">{user}</span>@<span class="hljs-subst">{h}</span>'</span> <span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> hosts]
        self.connect_kwargs = {}
        <span class="hljs-keyword">if</span> password:
            self.connect_kwargs[<span class="hljs-string">'password'</span>] = password
        <span class="hljs-keyword">if</span> key_file:
            self.connect_kwargs[<span class="hljs-string">'key_filename'</span>] = key_file
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">deploy</span>(<span class="hljs-params">self, local_path, remote_path, service_name=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""éƒ¨ç½²åº”ç”¨"""</span>
        group = ThreadingGroup(*self.hosts, connect_kwargs=self.connect_kwargs)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; ä¸Šä¼ æ–‡ä»¶..."</span>)
        <span class="hljs-keyword">for</span> conn <span class="hljs-keyword">in</span> group:
            conn.put(local_path, remote_path)
        
        <span class="hljs-keyword">if</span> service_name:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"&gt;&gt;&gt; é‡å¯æœåŠ¡ <span class="hljs-subst">{service_name}</span>..."</span>)
            group.sudo(<span class="hljs-string">f'systemctl restart <span class="hljs-subst">{service_name}</span>'</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; éƒ¨ç½²å®Œæˆ!"</span>)
        group.close()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">rollback</span>(<span class="hljs-params">self, backup_path, remote_path, service_name=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""å›æ»š"""</span>
        group = ThreadingGroup(*self.hosts, connect_kwargs=self.connect_kwargs)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; å›æ»šä¸­..."</span>)
        group.run(<span class="hljs-string">f'cp <span class="hljs-subst">{backup_path}</span> <span class="hljs-subst">{remote_path}</span>'</span>)
        
        <span class="hljs-keyword">if</span> service_name:
            group.sudo(<span class="hljs-string">f'systemctl restart <span class="hljs-subst">{service_name}</span>'</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; å›æ»šå®Œæˆ!"</span>)
        group.close()

<span class="hljs-comment"># ä½¿ç”¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    hosts = [<span class="hljs-string">'192.168.1.101'</span>, <span class="hljs-string">'192.168.1.102'</span>]
    deployer = Deployer(hosts, password=<span class="hljs-string">'password'</span>)
    deployer.deploy(<span class="hljs-string">'./app.jar'</span>, <span class="hljs-string">'/opt/app/app.jar'</span>, <span class="hljs-string">'myapp'</span>)
</code></pre>
<h3 data-id="heading-17">5.2 æ¡ˆä¾‹ï¼šæœåŠ¡å™¨å¥åº·æ£€æŸ¥</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># health_check.py</span>
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> ThreadingGroup
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">health_check</span>(<span class="hljs-params">hosts</span>):
    <span class="hljs-string">"""æœåŠ¡å™¨å¥åº·æ£€æŸ¥"""</span>
    group = ThreadingGroup(*hosts, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'password'</span>})
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœåŠ¡å™¨å¥åº·æ£€æŸ¥ - <span class="hljs-subst">{datetime.now()}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{<span class="hljs-string">'='</span>*<span class="hljs-number">60</span>}</span>\n"</span>)
    
    <span class="hljs-comment"># æ£€æŸ¥é¡¹</span>
    checks = {
        <span class="hljs-string">'hostname'</span>: <span class="hljs-string">'hostname'</span>,
        <span class="hljs-string">'uptime'</span>: <span class="hljs-string">'uptime -p'</span>,
        <span class="hljs-string">'disk'</span>: <span class="hljs-string">"df -h / | tail -1 | awk '{print $5}'"</span>,
        <span class="hljs-string">'memory'</span>: <span class="hljs-string">"free -m | grep Mem | awk '{printf \"%.1f%%\", $3/$2*100}'"</span>,
        <span class="hljs-string">'load'</span>: <span class="hljs-string">"cat /proc/loadavg | awk '{print $1, $2, $3}'"</span>,
    }
    
    <span class="hljs-keyword">for</span> conn <span class="hljs-keyword">in</span> group:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n--- <span class="hljs-subst">{conn.host}</span> ---"</span>)
        <span class="hljs-keyword">for</span> name, cmd <span class="hljs-keyword">in</span> checks.items():
            <span class="hljs-keyword">try</span>:
                result = conn.run(cmd, hide=<span class="hljs-literal">True</span>, warn=<span class="hljs-literal">True</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{name}</span>: <span class="hljs-subst">{result.stdout.strip()}</span>"</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{name}</span>: ERROR - <span class="hljs-subst">{e}</span>"</span>)
    
    group.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    hosts = [
        <span class="hljs-string">'root@192.168.1.101'</span>,
        <span class="hljs-string">'root@192.168.1.102'</span>,
        <span class="hljs-string">'root@192.168.1.103'</span>,
    ]
    health_check(hosts)
</code></pre>
<h3 data-id="heading-18">5.3 æ¡ˆä¾‹ï¼šæ—¥å¿—æ”¶é›†</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># collect_logs.py</span>
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> ThreadingGroup
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_logs</span>(<span class="hljs-params">hosts, remote_log, local_dir=<span class="hljs-string">'./logs'</span></span>):
    <span class="hljs-string">"""æ‰¹é‡æ”¶é›†æ—¥å¿—"""</span>
    Path(local_dir).mkdir(exist_ok=<span class="hljs-literal">True</span>)
    timestamp = datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H%M%S'</span>)
    
    group = ThreadingGroup(*hosts, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'password'</span>})
    
    <span class="hljs-keyword">for</span> conn <span class="hljs-keyword">in</span> group:
        host_ip = conn.host
        local_file = <span class="hljs-string">f"<span class="hljs-subst">{local_dir}</span>/<span class="hljs-subst">{host_ip}</span>_<span class="hljs-subst">{timestamp}</span>.log"</span>
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># å‹ç¼©è¿œç¨‹æ—¥å¿—</span>
            conn.run(<span class="hljs-string">f'gzip -c <span class="hljs-subst">{remote_log}</span> &gt; /tmp/log.gz'</span>, hide=<span class="hljs-literal">True</span>)
            <span class="hljs-comment"># ä¸‹è½½</span>
            conn.get(<span class="hljs-string">'/tmp/log.gz'</span>, <span class="hljs-string">f'<span class="hljs-subst">{local_file}</span>.gz'</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ <span class="hljs-subst">{host_ip}</span> -&gt; <span class="hljs-subst">{local_file}</span>.gz"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ— <span class="hljs-subst">{host_ip}</span>: <span class="hljs-subst">{e}</span>"</span>)
    
    group.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ—¥å¿—å·²æ”¶é›†åˆ°: <span class="hljs-subst">{local_dir}</span>/"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    hosts = [<span class="hljs-string">'root@192.168.1.101'</span>, <span class="hljs-string">'root@192.168.1.102'</span>]
    collect_logs(hosts, <span class="hljs-string">'/var/log/nginx/access.log'</span>)
</code></pre>
<hr/>
<h2 data-id="heading-19">å…­ã€è¿›é˜¶æŠ€å·§</h2>
<h3 data-id="heading-20">6.1 å¼‚å¸¸å¤„ç†</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection
<span class="hljs-keyword">from</span> invoke.exceptions <span class="hljs-keyword">import</span> UnexpectedExit

<span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_exec</span>(<span class="hljs-params">host, command</span>):
    <span class="hljs-string">"""å®‰å…¨æ‰§è¡Œï¼ˆå¸¦å¼‚å¸¸å¤„ç†ï¼‰"""</span>
    conn = Connection(host)
    
    <span class="hljs-keyword">try</span>:
        result = conn.run(command, warn=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># warn=True ä¸æŠ›å¼‚å¸¸</span>
        <span class="hljs-keyword">if</span> result.ok:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ æˆåŠŸ: <span class="hljs-subst">{result.stdout.strip()}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ— å¤±è´¥: <span class="hljs-subst">{result.stderr.strip()}</span>"</span>)
        <span class="hljs-keyword">return</span> result.ok
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ— è¿æ¥é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    <span class="hljs-keyword">finally</span>:
        conn.close()
</code></pre>
<h3 data-id="heading-21">6.2 ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection
<span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">remote_server</span>(<span class="hljs-params">host, **kwargs</span>):
    <span class="hljs-string">"""ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
    conn = Connection(host, **kwargs)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> conn
    <span class="hljs-keyword">finally</span>:
        conn.close()

<span class="hljs-comment"># ä½¿ç”¨</span>
<span class="hljs-keyword">with</span> remote_server(<span class="hljs-string">'root@192.168.1.100'</span>, connect_kwargs={<span class="hljs-string">'password'</span>: <span class="hljs-string">'pwd'</span>}) <span class="hljs-keyword">as</span> conn:
    conn.run(<span class="hljs-string">'hostname'</span>)
<span class="hljs-comment"># è‡ªåŠ¨å…³é—­è¿æ¥</span>
</code></pre>
<h3 data-id="heading-22">6.3 SSHé…ç½®å¤ç”¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> Connection

<span class="hljs-comment"># ä½¿ç”¨~/.ssh/configä¸­çš„é…ç½®</span>
<span class="hljs-comment"># Host myserver</span>
<span class="hljs-comment">#     HostName 192.168.1.100</span>
<span class="hljs-comment">#     User root</span>
<span class="hljs-comment">#     IdentityFile ~/.ssh/id_rsa</span>

conn = Connection(<span class="hljs-string">'myserver'</span>)  <span class="hljs-comment"># è‡ªåŠ¨è¯»å–SSHé…ç½®</span>
conn.run(<span class="hljs-string">'hostname'</span>)
</code></pre>
<hr/>
<h2 data-id="heading-23">ä¸ƒã€ä½¿ç”¨fabfile</h2>
<h3 data-id="heading-24">7.1 å®šä¹‰ä»»åŠ¡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># fabfile.py</span>
<span class="hljs-keyword">from</span> fabric <span class="hljs-keyword">import</span> task, Connection

<span class="hljs-meta">@task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">deploy</span>(<span class="hljs-params">ctx, host, version=<span class="hljs-string">'latest'</span></span>):
    <span class="hljs-string">"""éƒ¨ç½²åº”ç”¨
    ä½¿ç”¨: fab deploy --host=192.168.1.100 --version=1.0.0
    """</span>
    conn = Connection(host)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"éƒ¨ç½²ç‰ˆæœ¬ <span class="hljs-subst">{version}</span> åˆ° <span class="hljs-subst">{host}</span>"</span>)
    conn.run(<span class="hljs-string">f'docker pull myapp:<span class="hljs-subst">{version}</span>'</span>)
    conn.run(<span class="hljs-string">f'docker-compose up -d'</span>)
    
    conn.close()

<span class="hljs-meta">@task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">status</span>(<span class="hljs-params">ctx, host</span>):
    <span class="hljs-string">"""æ£€æŸ¥çŠ¶æ€
    ä½¿ç”¨: fab status --host=192.168.1.100
    """</span>
    conn = Connection(host)
    conn.run(<span class="hljs-string">'docker ps'</span>)
    conn.close()

<span class="hljs-meta">@task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">logs</span>(<span class="hljs-params">ctx, host, lines=<span class="hljs-number">100</span></span>):
    <span class="hljs-string">"""æŸ¥çœ‹æ—¥å¿—
    ä½¿ç”¨: fab logs --host=192.168.1.100 --lines=200
    """</span>
    conn = Connection(host)
    conn.run(<span class="hljs-string">f'docker logs --tail <span class="hljs-subst">{lines}</span> myapp'</span>)
    conn.close()
</code></pre>
<h3 data-id="heading-25">7.2 æ‰§è¡Œä»»åŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡</span>
fab --list

<span class="hljs-comment"># æ‰§è¡Œä»»åŠ¡</span>
fab deploy --host=root@192.168.1.100 --version=1.0.0
fab status --host=root@192.168.1.100
fab logs --host=root@192.168.1.100 --lines=200
</code></pre>
<hr/>
<h2 data-id="heading-26">å…«ã€è·¨ç½‘ç»œç®¡ç†</h2>
<h3 data-id="heading-27">8.1 é—®é¢˜</h3>
<pre><code class="hljs language-diff" lang="diff">å¸¸è§åœºæ™¯ï¼š
<span class="hljs-deletion">- åŠå…¬å®¤éœ€è¦ç®¡ç†æœºæˆ¿æœåŠ¡å™¨</span>
<span class="hljs-deletion">- åœ¨å®¶éœ€è¦ç®¡ç†å…¬å¸æœåŠ¡å™¨</span>
<span class="hljs-deletion">- ç®¡ç†å¤šä¸ªä¸åŒç½‘ç»œçš„æœåŠ¡å™¨</span>

ä¼ ç»Ÿæ–¹æ¡ˆï¼š
<span class="hljs-deletion">- VPNæ¥å…¥ â†’ é…ç½®å¤æ‚</span>
<span class="hljs-deletion">- è·³æ¿æœº â†’ å¤šä¸€è·³å»¶è¿Ÿ</span>
<span class="hljs-deletion">- å…¬ç½‘æš´éœ²SSH â†’ å®‰å…¨é£é™©</span>
</code></pre>
<h3 data-id="heading-28">8.2 ç»„ç½‘æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨ç»„ç½‘è½¯ä»¶ï¼ˆå¦‚æ˜Ÿç©ºç»„ç½‘ï¼‰ç®€åŒ–è·¨ç½‘ç»œç®¡ç†ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç»„ç½‘è™šæ‹Ÿå±€åŸŸç½‘                         â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ æœåŠ¡å™¨<span class="hljs-selector-tag">A</span>  â”‚  â”‚ æœåŠ¡å™¨<span class="hljs-selector-tag">B</span>  â”‚  â”‚ æœåŠ¡å™¨C  â”‚              â”‚
â”‚  â”‚<span class="hljs-number">10.10</span>.<span class="hljs-number">0.1</span> â”‚  â”‚<span class="hljs-number">10.10</span>.<span class="hljs-number">0.2</span> â”‚  â”‚<span class="hljs-number">10.10</span>.<span class="hljs-number">0.3</span> â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â†‘                                   â”‚
â”‚                      â”‚                                   â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚               â”‚ ç®¡ç†ç”µè„‘ â”‚                              â”‚
â”‚               â”‚<span class="hljs-number">10.10</span>.<span class="hljs-number">0.10</span>â”‚                              â”‚
â”‚               â”‚  Fabric  â”‚                              â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                          â”‚
â”‚  æ‰€æœ‰è®¾å¤‡åœ¨åŒä¸€è™šæ‹Ÿå±€åŸŸç½‘ï¼Œç›´æ¥SSHäº’é€š                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é…ç½®ç»„ç½‘åï¼Œç›´æ¥ç”¨è™šæ‹ŸIP</span>
hosts = [
    <span class="hljs-string">'root@10.10.0.1'</span>,  <span class="hljs-comment"># æœºæˆ¿æœåŠ¡å™¨A</span>
    <span class="hljs-string">'root@10.10.0.2'</span>,  <span class="hljs-comment"># æœºæˆ¿æœåŠ¡å™¨B</span>
    <span class="hljs-string">'root@10.10.0.3'</span>,  <span class="hljs-comment"># äº‘æœåŠ¡å™¨C</span>
]

group = ThreadingGroup(*hosts, connect_kwargs={<span class="hljs-string">'key_filename'</span>: <span class="hljs-string">'~/.ssh/id_rsa'</span>})
group.run(<span class="hljs-string">'hostname'</span>)
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸åŒç½‘ç»œçš„æœåŠ¡å™¨ç»Ÿä¸€ç®¡ç†</li>
<li>æ— éœ€é…ç½®è·³æ¿æœº</li>
<li>å®‰å…¨åŠ å¯†ä¼ è¾“</li>
<li>åƒå±€åŸŸç½‘ä¸€æ ·ç®€å•</li>
</ul>
<hr/>
<h2 data-id="heading-29">ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-30">9.1 å®‰å…¨å»ºè®®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. ä½¿ç”¨å¯†é’¥è€Œéå¯†ç </span>
connect_kwargs={<span class="hljs-string">'key_filename'</span>: <span class="hljs-string">'~/.ssh/id_rsa'</span>}

<span class="hljs-comment"># 2. ä½¿ç”¨SSH Agent</span>
<span class="hljs-comment"># ssh-add ~/.ssh/id_rsa</span>
connect_kwargs={}  <span class="hljs-comment"># è‡ªåŠ¨ä½¿ç”¨agent</span>

<span class="hljs-comment"># 3. é™åˆ¶sudoæƒé™</span>
conn.sudo(<span class="hljs-string">'systemctl restart nginx'</span>, password=get_password())

<span class="hljs-comment"># 4. æ•æ„Ÿä¿¡æ¯ä¸å†™ä»£ç </span>
<span class="hljs-keyword">import</span> os
password = os.environ.get(<span class="hljs-string">'SSH_PASSWORD'</span>)
</code></pre>
<h3 data-id="heading-31">9.2 ä»£ç ç»„ç»‡</h3>
<pre><code class="hljs language-bash" lang="bash">automation/
â”œâ”€â”€ fabfile.py          <span class="hljs-comment"># ä»»åŠ¡å®šä¹‰</span>
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ servers.yaml    <span class="hljs-comment"># æœåŠ¡å™¨é…ç½®</span>
â”‚   â””â”€â”€ settings.py     <span class="hljs-comment"># å…¨å±€è®¾ç½®</span>
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ deploy.py       <span class="hljs-comment"># éƒ¨ç½²ä»»åŠ¡</span>
â”‚   â”œâ”€â”€ backup.py       <span class="hljs-comment"># å¤‡ä»½ä»»åŠ¡</span>
â”‚   â””â”€â”€ monitor.py      <span class="hljs-comment"># ç›‘æ§ä»»åŠ¡</span>
â””â”€â”€ utils/
    â””â”€â”€ ssh.py          <span class="hljs-comment"># SSHå·¥å…·å‡½æ•°</span>
</code></pre>
<hr/>
<h2 data-id="heading-32">åã€æ€»ç»“</h2>
<p>Python Fabricè‡ªåŠ¨åŒ–è¿ç»´è¦ç‚¹ï¼š</p>

































<table><thead><tr><th>åŠŸèƒ½</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td>å•æœºæ‰§è¡Œ</td><td><code>Connection.run()</code></td></tr><tr><td>æ–‡ä»¶ä¼ è¾“</td><td><code>put()</code> / <code>get()</code></td></tr><tr><td>æ‰¹é‡å¹¶è¡Œ</td><td><code>ThreadingGroup</code></td></tr><tr><td>æ‰¹é‡ä¸²è¡Œ</td><td><code>SerialGroup</code></td></tr><tr><td>sudoæ‰§è¡Œ</td><td><code>conn.sudo()</code></td></tr><tr><td>ä»»åŠ¡å®šä¹‰</td><td><code>@task</code> è£…é¥°å™¨</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ‰¹é‡éƒ¨ç½²åº”ç”¨</li>
<li>æœåŠ¡å™¨å¥åº·æ£€æŸ¥</li>
<li>æ—¥å¿—æ”¶é›†åˆ†æ</li>
<li>é…ç½®åŒæ­¥</li>
<li>è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬</li>
</ul>
<hr/>
<h2 data-id="heading-33">å‚è€ƒèµ„æ–™</h2>
<ol>
<li>Fabricå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.fabfile.org%2F" target="_blank" title="https://docs.fabfile.org/" ref="nofollow noopener noreferrer">docs.fabfile.org/</a></li>
<li>Fabric GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffabric%2Ffabric" target="_blank" title="https://github.com/fabric/fabric" ref="nofollow noopener noreferrer">github.com/fabric/fabrâ€¦</a></li>
</ol>
<hr/>
<blockquote>
<p>ğŸ’¡ Fabricè®©Pythonæˆä¸ºè¿ç»´ç¥å™¨ï¼Œé…åˆç»„ç½‘è½¯ä»¶å¯ä»¥è½»æ¾ç®¡ç†åˆ†å¸ƒåœ¨ä¸åŒç½‘ç»œçš„æ‰€æœ‰æœåŠ¡å™¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ React ä¸­ useState ä¸ useEffect]]></title>    <link>https://juejin.cn/post/7585289701793562650</link>    <guid>https://juejin.cn/post/7585289701793562650</guid>    <pubDate>2025-12-19T05:43:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585289701793562650" data-draft-id="7584991956126744611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ React ä¸­ useState ä¸ useEffect "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-12-19T05:43:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒŸè¢…ç ´è¾°"/> <meta itemprop="url" content="https://juejin.cn/user/1845419006243504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ React ä¸­ useState ä¸ useEffect 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1845419006243504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒŸè¢…ç ´è¾°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:43:59.000Z" title="Fri Dec 19 2025 05:43:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React å‡½æ•°ç»„ä»¶çš„ä¸–ç•Œé‡Œï¼Œ<code>useState</code> å’Œ <code>useEffect</code> æ˜¯ä¸¤ä¸ªæœ€åŸºç¡€å´ä¹Ÿæœ€å…³é”®çš„ Hooksã€‚å®ƒä»¬çœ‹ä¼¼ç®€å•ï¼Œä½†è‹¥åªåœç•™åœ¨â€œä¼šç”¨â€çš„å±‚é¢ï¼Œå¾ˆå®¹æ˜“åœ¨å¤æ‚åœºæ™¯ä¸­è¸©å‘ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç»“åˆä¸€æ®µçœŸå®ä»£ç å’Œæ ¸å¿ƒæ¦‚å¿µå›¾ç¤ºï¼Œä¸€èµ·æ·±å…¥æ¢è®¨è¿™ä¸¤ä¸ª Hook èƒŒåçš„è®¾è®¡æ€æƒ³â€”â€”ä¸åªæ˜¯æ€ä¹ˆå†™ï¼Œæ›´æ˜¯ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€useStateï¼šçŠ¶æ€ä¸æ˜¯å˜é‡ï¼Œè€Œæ˜¯ä¸€å¥—å“åº”å¼ç³»ç»Ÿ</h2>
<p>å…ˆçœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-attr">[num, setNum]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
</code></pre>
<p>è¡¨é¢ä¸Šï¼Œå®ƒåªæ˜¯å£°æ˜äº†ä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„çŠ¶æ€ã€‚ä½†å¦‚æœä½ ä»”ç»†çœ‹è¿‡å®˜æ–¹æ–‡æ¡£æˆ–ç›¸å…³å›¾ç¤ºï¼Œä¼šæ³¨æ„åˆ°ä¸€ä¸ªå…³é”®ç»†èŠ‚ï¼š</p>
<blockquote>
<p><strong>useState çš„åˆå§‹å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</strong>ã€‚</p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-section">[num, setNum]</span> = useState(() =&gt; {
  const <span class="hljs-attr">num1</span> = <span class="hljs-number">1</span> + <span class="hljs-number">2</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">num2</span> = <span class="hljs-number">2</span> + <span class="hljs-number">3</span><span class="hljs-comment">;</span>
  return num1 + num2<span class="hljs-comment">; // è¿”å› 6</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>ä½ å¯èƒ½ä¼šé—®ï¼š<strong>ä¸ºä»€ä¹ˆè¦æ”¯æŒå‡½æ•°å½¢å¼ï¼Ÿç›´æ¥å†™ 6 ä¸å°±è¡Œäº†å—ï¼Ÿ</strong></p>
<p>è¿™èƒŒåå…¶å®ä½“ç°äº† React å¯¹æ€§èƒ½å’Œç¡®å®šæ€§çš„è€ƒé‡ã€‚</p>
<h3 data-id="heading-1">æ€è€ƒï¼šå¦‚æœåˆå§‹åŒ–éœ€è¦æ˜‚è´µè®¡ç®—æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å‡è®¾ä½ çš„åˆå§‹çŠ¶æ€ä¾èµ–äº localStorageã€URL å‚æ•°ï¼Œæˆ–è€…å¤æ‚çš„é…ç½®åˆå¹¶ï¼Œé‚£ä¹ˆæ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—ä¸€æ¬¡æ˜¾ç„¶æ˜¯æµªè´¹çš„ã€‚React è§„å®šï¼š<strong>å½“ useState æ¥æ”¶ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä»…åœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</strong>ã€‚è¿™æ—¢ä¿è¯äº†åŠ¨æ€åˆå§‹åŒ–çš„èƒ½åŠ›ï¼Œåˆé¿å…äº†é‡å¤å¼€é”€ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§è®¾è®¡ç»Ÿä¸€äº†â€œé™æ€å€¼â€å’Œâ€œåŠ¨æ€å€¼â€çš„ä½¿ç”¨æ¥å£â€”â€”æ— è®ºä½ æ˜¯ä¼ æ•°å­—è¿˜æ˜¯å‡½æ•°ï¼Œè°ƒç”¨æ–¹å¼å®Œå…¨ä¸€è‡´ã€‚</p>
<hr/>
<h3 data-id="heading-2">setState ä¹Ÿå¯ä»¥ä¼ å‡½æ•°ï¼šä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ä½³å®è·µï¼Ÿ</h3>
<p>å†çœ‹è¿™ä¸ªå¸¸è§æ“ä½œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">setNum(<span class="hljs-attr">prevNum</span> =&gt; prevNum + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>è€Œä¸æ˜¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">setNum</span>(num + <span class="hljs-number">1</span>);
</code></pre>
<p>å¾ˆå¤šäººçŸ¥é“å‰è€…â€œæ›´å®‰å…¨â€ï¼Œä½†æœªå¿…ç†è§£å…¶æ·±å±‚åŸå› ã€‚</p>
<h3 data-id="heading-3">é—®é¢˜æ¥äº†ï¼šå¦‚æœæˆ‘åœ¨çŸ­æ—¶é—´å†…è¿ç»­è°ƒç”¨ä¸¤æ¬¡ <code>setNum(num + 1)</code>ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸¤æ¬¡éƒ½åŸºäºåŒä¸€ä¸ªæ—§å€¼ <code>num</code> è¿›è¡Œè®¡ç®—ï¼Œå¯¼è‡´æ›´æ–°ä¸¢å¤±</strong>ã€‚</p>
<p>å› ä¸º <code>num</code> æ˜¯é—­åŒ…æ•è·çš„å€¼ï¼Œå®ƒåœ¨æœ¬æ¬¡æ¸²æŸ“å‘¨æœŸå†…æ˜¯å›ºå®šçš„ã€‚å³ä½¿ä½ è°ƒç”¨äº†ä¸¤æ¬¡ <code>setNum</code>ï¼Œå®ƒä»¬çœ‹åˆ°çš„ <code>num</code> éƒ½æ˜¯åŒä¸€ä¸ªå¿«ç…§ã€‚</p>
<p>è€Œå½“ä½ ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">setNum(<span class="hljs-attr">prev</span> =&gt; prev + <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>React ä¼šç¡®ä¿æ¯æ¬¡æ›´æ–°éƒ½åŸºäº<strong>æœ€æ–°çš„çŠ¶æ€å€¼</strong>è¿›è¡Œè®¡ç®—ï¼Œä»è€Œé¿å…ç«æ€æ¡ä»¶ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ï¼Œåªè¦æ–°çŠ¶æ€ä¾èµ–äºæ—§çŠ¶æ€ï¼Œå°±åº”ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼æ›´æ–°ã€‚è¿™ä¸æ˜¯è¯­æ³•åå¥½ï¼Œè€Œæ˜¯æ•°æ®ä¸€è‡´æ€§çš„ä¿éšœã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äºŒã€useEffectï¼šå‰¯ä½œç”¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨</h2>
<p>å¦‚æœè¯´ <code>useState</code> è§£å†³äº†â€œçŠ¶æ€å¦‚ä½•å˜åŒ–â€çš„é—®é¢˜ï¼Œé‚£ä¹ˆ <code>useEffect</code> å°±å›ç­”äº†ï¼šâ€œå˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Ÿâ€</p>
<p>å›¾ç¤ºä¸­æ˜ç¡®æŒ‡å‡ºï¼š</p>
<blockquote>
<p><strong>useEffect ç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œå¦‚è¯·æ±‚æ•°æ®ã€è®¾ç½®å®šæ—¶å™¨ç­‰ã€‚å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–æ•°ç»„ï¼Œå†³å®šä½•æ—¶é‡æ–°æ‰§è¡Œã€‚è¿”å›å‡½æ•°ç”¨äºæ¸…ç†å‰¯ä½œç”¨ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸‰å¥è¯ï¼Œå‡ ä¹æ¦‚æ‹¬äº† <code>useEffect</code> çš„å…¨éƒ¨ç²¾é«“ã€‚</p>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯â€œå‰¯ä½œç”¨â€ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥å†™åœ¨ç»„ä»¶é‡Œï¼Ÿ</h3>
<p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œâ€œçº¯å‡½æ•°â€æ„å‘³ç€ï¼šç›¸åŒè¾“å…¥ â†’ ç›¸åŒè¾“å‡ºï¼Œä¸”ä¸äº§ç”Ÿå¤–éƒ¨å½±å“ã€‚è€Œç»„ä»¶æœ¬èº«å°±åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼šæ¥æ”¶ propsï¼Œè¿”å› JSXã€‚</p>
<p>ä½†ç°å®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€»è¦åšä¸€äº›â€œä¸çº¯â€çš„äº‹ï¼š</p>
<ul>
<li>å‘èµ· API è¯·æ±‚</li>
<li>è®¢é˜… WebSocket</li>
<li>å¯åŠ¨å®šæ—¶å™¨</li>
<li>æ“ä½œ DOM</li>
</ul>
<p>è¿™äº›æ“ä½œéƒ½ä¼šæ”¹å˜å¤–éƒ¨ç¯å¢ƒï¼Œå› æ­¤è¢«ç§°ä¸ºâ€œå‰¯ä½œç”¨â€ã€‚</p>
<blockquote>
<p><strong>æ‰€ä»¥ï¼ŒReact å¼ºåˆ¶å°†å‰¯ä½œç”¨éš”ç¦»åˆ° <code>useEffect</code> ä¸­ï¼Œæ˜¯ä¸ºäº†ä¿æŒç»„ä»¶ä¸»ä½“çš„çº¯å‡€æ€§ã€‚</strong></p>
</blockquote>
<p>è¿™å°±åƒ Vue 3 ä¸­ <code>setup()</code> è´Ÿè´£é€»è¾‘ç»„ç»‡ï¼Œè€Œ <code>onMounted</code>ã€<code>watch</code> è´Ÿè´£å‰¯ä½œç”¨ä¸€æ ·ï¼Œæ˜¯ä¸€ç§èŒè´£åˆ†ç¦»çš„è®¾è®¡å“²å­¦ã€‚</p>
<hr/>
<h3 data-id="heading-6">ä¾èµ–æ•°ç»„ï¼šä¸æ˜¯â€œè§¦å‘å¼€å…³â€ï¼Œè€Œæ˜¯â€œå®‰å…¨æŠ¤æ â€</h3>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸ºä¾èµ–æ•°ç»„çš„ä½œç”¨æ˜¯â€œæ§åˆ¶ effect ä½•æ—¶æ‰§è¡Œâ€ã€‚ä½†å®é™…ä¸Šï¼Œå®ƒçš„çœŸæ­£ä»·å€¼åœ¨äºï¼š<strong>é˜²æ­¢é—­åŒ…é™·é˜±</strong>ã€‚</p>
<p>çœ‹è¿™æ®µå±é™©ä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  <span class="hljs-built_in">setTimeout</span>(() =&gt; {
    console<span class="hljs-selector-class">.log</span>(num); <span class="hljs-comment">// å§‹ç»ˆæ‰“å°åˆå§‹å€¼ï¼</span>
  }, <span class="hljs-number">1000</span>);
}, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// é”™è¯¯ï¼šnum æœªåˆ—å…¥ä¾èµ–</span>
</code></pre>
<p>å³ä½¿ä½ ç‚¹å‡»æŒ‰é’®è®© <code>num</code> å˜æˆ 100ï¼Œ<code>setTimeout</code> é‡Œæ‰“å°çš„ä»æ˜¯ 0ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸º <code>num</code> æ˜¯é—­åŒ…ä¸­çš„æ—§å€¼ï¼Œè€Œç©ºä¾èµ–æ•°ç»„å‘Šè¯‰ Reactï¼šâ€œè¿™ä¸ª effect æ°¸è¿œä¸éœ€è¦é‡æ–°æ‰§è¡Œâ€ã€‚äºæ˜¯ï¼Œå®ƒæ°¸è¿œå¡åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„çŠ¶æ€é‡Œã€‚</p>
<blockquote>
<p><strong>æ­£ç¡®çš„åšæ³•æ˜¯ï¼šå‡¡æ˜¯åœ¨ effect ä¸­ä½¿ç”¨çš„çŠ¶æ€æˆ– propsï¼Œéƒ½å¿…é¡»åŠ å…¥ä¾èµ–æ•°ç»„ã€‚</strong></p>
</blockquote>
<p>React ç”šè‡³æä¾›äº† ESLint æ’ä»¶æ¥è‡ªåŠ¨æ£€æµ‹è¿™ç±»é—®é¢˜ã€‚è¿™ä¸æ˜¯ä¸ºäº†éº»çƒ¦ä½ ï¼Œè€Œæ˜¯å¸®ä½ é¿å¼€éš¾ä»¥è°ƒè¯•çš„ bugã€‚</p>
<hr/>
<h3 data-id="heading-7">return å‡½æ•°ï¼šå†…å­˜æ³„æ¼çš„â€œé˜²ç«å¢™â€</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
    console<span class="hljs-selector-class">.log</span>(num);
  }, <span class="hljs-number">1000</span>);

  return () =&gt; {
    <span class="hljs-built_in">clearInterval</span>(timer);
  };
}, <span class="hljs-selector-attr">[num]</span>);
</code></pre>
<p>è¿™é‡Œå¼€å¯äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶åœ¨ä¾èµ–å˜åŒ–æˆ–ç»„ä»¶å¸è½½æ—¶æ¸…ç†å®ƒã€‚</p>
<h3 data-id="heading-8">è¯•æƒ³ï¼šå¦‚æœä¸å†™ <code>return</code> æ¸…ç†å‡½æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>æ¯æ¬¡ <code>num</code> å˜åŒ–ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œè€Œæ—§çš„å®šæ—¶å™¨ä»åœ¨è¿è¡Œ</strong>ã€‚æœ€ç»ˆï¼Œé¡µé¢ä¸Šå¯èƒ½æœ‰æ•°åä¸ªå®šæ—¶å™¨åŒæ—¶æ‰“å°æ—¥å¿—â€”â€”è¿™å°±æ˜¯å…¸å‹çš„å†…å­˜æ³„æ¼ã€‚</p>
<blockquote>
<p>é‚£è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>
<p>ç¬¬ä¸€ååº”å½“ç„¶æ˜¯ï¼šâ€œåŠ ä¸ª <code>clearInterval</code>ï¼â€<br/>
ä½†å…³é”®åœ¨äºï¼š<strong>åœ¨å“ªé‡ŒåŠ ï¼Ÿ</strong></p>
<p>React ç»™å‡ºçš„ç­”æ¡ˆæ˜¯ï¼š<strong>åœ¨ <code>useEffect</code> çš„è¿”å›å‡½æ•°ä¸­æ¸…ç†</strong>ã€‚</p>
<p>è¿™ä¸ªè¿”å›å‡½æ•°ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹è¢«è°ƒç”¨ï¼š</p>
<ol>
<li>ä¸‹æ¬¡ effect é‡æ–°æ‰§è¡Œå‰ï¼ˆç”¨äºæ¸…ç†ä¸Šä¸€æ¬¡çš„å‰¯ä½œç”¨ï¼‰</li>
<li>ç»„ä»¶å¸è½½æ—¶ï¼ˆç”¨äºå½»åº•é‡Šæ”¾èµ„æºï¼‰</li>
</ol>
<p>è¿™ç›¸å½“äºæŠŠç±»ç»„ä»¶ä¸­çš„ <code>componentWillUnmount</code> å’Œ <code>componentDidUpdate</code> çš„æ¸…ç†é€»è¾‘ç»Ÿä¸€äº†èµ·æ¥ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ï¼Œ<strong>å‡¡æ˜¯åˆ›å»ºäº†æŒä¹…æ€§èµ„æºçš„æ“ä½œï¼ˆå®šæ—¶å™¨ã€è®¢é˜…ã€ç›‘å¬å™¨ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»æä¾›å¯¹åº”çš„æ¸…ç†é€»è¾‘</strong>ã€‚å¦åˆ™ï¼Œä½ çš„åº”ç”¨è¿Ÿæ—©ä¼šå› å†…å­˜æ³„æ¼è€Œå˜æ…¢ç”šè‡³å´©æºƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€ç»¼åˆæ¡ˆä¾‹ï¼šåŠ¨æ€æ¸²æŸ“ä¸å‰¯ä½œç”¨çš„ååŒ</h2>
<pre><code class="hljs language-ini" lang="ini">{num % <span class="hljs-attr">2</span> === <span class="hljs-number">0</span> &amp;&amp; &lt;Demo /&gt;}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>{
    useEffect
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"/>){
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=&gt;</span>{
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¶æ•°Demo'</span>);
    <span class="hljs-keyword">const</span> timer=<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()=&gt;</span>{
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timer'</span>);
    },<span class="hljs-number">1000</span>)
  
    <span class="hljs-keyword">return</span> <span class="hljs-function">()=&gt;</span>{<span class="hljs-comment">//å¸è½½å‰æ‰§è¡Œå›æ”¶å®šæ—¶å™¨</span>
        <span class="hljs-built_in">clearInterval</span>(timer);
    }
    },[])
    <span class="hljs-keyword">return</span>(
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            å¶æ•°Demo;
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>è¿™æ„å‘³ç€ <code>Demo</code> ç»„ä»¶ä¼šéšç€ <code>num</code> çš„å¥‡å¶æ€§åŠ¨æ€æŒ‚è½½/å¸è½½ã€‚è€Œ <code>Demo</code> å†…éƒ¨æœ‰è‡ªå·±çš„ <code>useEffect</code> å®šæ—¶å™¨ã€‚</p>
<p>è¿™æ—¶ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸé“¾å°±å˜å¾—éå¸¸æ¸…æ™°ï¼š</p>
<ul>
<li><code>num</code> æ”¹å˜ â†’ App é‡æ–°æ¸²æŸ“</li>
<li>æ¡ä»¶æ»¡è¶³ â†’ <code>Demo</code> æŒ‚è½½ â†’ å…¶ <code>useEffect</code> æ‰§è¡Œ â†’ å¯åŠ¨å®šæ—¶å™¨</li>
<li>æ¡ä»¶ä¸æ»¡è¶³ â†’ <code>Demo</code> å¸è½½ â†’ å…¶ <code>useEffect</code> çš„è¿”å›å‡½æ•°æ‰§è¡Œ â†’ å®šæ—¶å™¨è¢«æ¸…é™¤</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„å‰¯ä½œç”¨é—­ç¯ã€‚</p>
<p>ä½†å¦‚æœ <code>Demo</code> å¿˜è®°æ¸…ç†å®šæ—¶å™¨ï¼Œå“ªæ€•å®ƒå·²ç»ä»ç•Œé¢ä¸Šæ¶ˆå¤±ï¼Œåå°ä¾ç„¶åœ¨è¿è¡Œâ€”â€”ç”¨æˆ·çœ‹ä¸è§ï¼Œä½†å†…å­˜å‹åŠ›åœ¨ç´¯ç§¯ã€‚</p>
<blockquote>
<p>è¿™å†æ¬¡å°è¯äº†ï¼š<strong>Hooks çš„å¼ºå¤§ï¼Œä¼´éšç€å¯¹å¼€å‘è€…è´£ä»»å¿ƒçš„è¦æ±‚</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å››ã€ç»“è¯­ï¼šHooks æ˜¯å·¥å…·ï¼Œæ›´æ˜¯æ€ç»´æ–¹å¼</h2>
<p><code>useState</code> å’Œ <code>useEffect</code> ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œå®ƒä»¬ä»£è¡¨äº†ä¸€ç§å…¨æ–°çš„å‰ç«¯å¼€å‘èŒƒå¼ï¼š</p>
<ul>
<li><strong>çŠ¶æ€é©±åŠ¨è§†å›¾</strong>ï¼šUI æ˜¯çŠ¶æ€çš„å‡½æ•°ï¼Œä¸€åˆ‡å˜åŒ–æºäºçŠ¶æ€æ›´æ–°ã€‚</li>
<li><strong>å‰¯ä½œç”¨æ˜¾å¼åŒ–</strong>ï¼šæ‰€æœ‰éçº¯æ“ä½œå¿…é¡»é€šè¿‡ <code>useEffect</code> å£°æ˜ï¼Œä¸å¯éšè—ã€‚</li>
<li><strong>ä¾èµ–é€æ˜åŒ–</strong>ï¼šä»»ä½•å¤–éƒ¨å¼•ç”¨éƒ½å¿…é¡»æ˜¾å¼å£°æ˜ï¼Œé¿å…éšå¼è€¦åˆã€‚</li>
<li><strong>èµ„æºå¯å›æ”¶</strong>ï¼šæ¯ä¸ªå‰¯ä½œç”¨éƒ½å¿…é¡»æœ‰å¯¹åº”çš„æ¸…ç†è·¯å¾„ï¼Œé˜²æ­¢æ³„æ¼ã€‚</li>
</ul>
<p>æœ€åï¼Œè¯·è®°ä½ï¼š<br/>
<strong>ä¼šç”¨ Hooks åªæ˜¯èµ·ç‚¹ï¼Œç†è§£å…¶èƒŒåçš„è®¾è®¡å“²å­¦ï¼Œæ‰æ˜¯å†™å‡ºå¥å£® React åº”ç”¨çš„å…³é”®ã€‚</strong></p>
<p>ä¸‹æ¬¡å½“ä½ å†™ä¸‹ <code>useEffect</code> æ—¶ï¼Œä¸å¦¨å¤šé—®è‡ªå·±ä¸€å¥ï¼š</p>
<blockquote>
<p>â€œæˆ‘æœ‰æ²¡æœ‰é—æ¼ä¾èµ–ï¼Ÿæœ‰æ²¡æœ‰å¿˜è®°æ¸…ç†ï¼Ÿè¿™ä¸ªå‰¯ä½œç”¨çœŸçš„å¿…è¦å—ï¼Ÿâ€</p>
</blockquote>
<p>æ­£æ˜¯è¿™äº›æ€è€ƒï¼Œè®©ä½ ä»â€œå†™ä»£ç çš„äººâ€ï¼Œæˆé•¿ä¸ºâ€œè®¾è®¡ç³»ç»Ÿçš„äººâ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäº”ï¼‰å®æˆ˜ï¼šè§£æ”¾å†™APIæ¥å£çš„ç¹çå·¥ä½œ]]></title>    <link>https://juejin.cn/post/7585289701793677338</link>    <guid>https://juejin.cn/post/7585289701793677338</guid>    <pubDate>2025-12-19T05:58:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585289701793677338" data-draft-id="7585005164726386726" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäº”ï¼‰å®æˆ˜ï¼šè§£æ”¾å†™APIæ¥å£çš„ç¹çå·¥ä½œ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-19T05:58:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="TimeFine"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123802615"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android AIè§£æ”¾ç”Ÿäº§åŠ›ï¼ˆäº”ï¼‰å®æˆ˜ï¼šè§£æ”¾å†™APIæ¥å£çš„ç¹çå·¥ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123802615/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    TimeFine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:58:46.000Z" title="Fri Dec 19 2025 05:58:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…¬å¸å½“å‰é¡¹ç›®ä½¿ç”¨çš„æ˜¯Apifoxä½œä¸ºAPIè°ƒè¯•/æ–‡æ¡£å·¥å…·ï¼Œæ‰€ä»¥ä»¥è¿™ä¸ªä¸ºä¾‹ã€‚å¸‚é¢ä¸Šçš„å·¥å…·åº”è¯¥éƒ½é€æ­¥å¼€æ”¾äº†AIèƒ½åŠ›ï¼Œéœ€è¦å…³æ³¨ä¸€ä¸‹ï¼Œåªè¦èƒ½æä¾›åŸå§‹æ•°æ®å°±è¡Œï¼Œä¸èƒ½çš„è¯é‚£ä¹Ÿæ²¡åŠæ³•å–‚ç»™AIã€‚</p>
<p>ä¸Šä¸€ç¯‡å·²ç»è®©AIå†™UIäº†ï¼Œè¿™ä¸€ç¯‡è®©AIå†™æ¥å£è¯·æ±‚ã€‚é¦–å…ˆæ€è€ƒä¸€ä¸‹å¯èƒ½ç¢°åˆ°çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¯èƒ½é‡åˆ°çš„é—®é¢˜</h2>
<p>é»˜è®¤ç½‘ç»œè¯·æ±‚ç”¨çš„retrofitï¼Œå…¶å®ƒä¹Ÿæ˜¯ä¸€é€šç™¾é€šã€‚</p>
<h3 data-id="heading-1">1ã€é—®é¢˜ä¸€ï¼šé€‚é…è¯·æ±‚å¤´</h3>
<p>é¡¹ç›®ä¸­ç½‘ç»œè¯·æ±‚çš„æ‹¦æˆªå™¨å·²ç»å®šä¹‰äº†è¯·æ±‚å¤´ï¼Œè¯»å–çš„åŸå§‹æ•°æ®å¦‚ä½•å…³è”ï¼Ÿç­”æ¡ˆå°±æ˜¯åœ¨skillä¸­å‘Šè¯‰AIï¼Œå¹¶è®©å®ƒæ¨¡ä»¿ä½ çš„ä»£ç å†™ã€‚</p>
<h3 data-id="heading-2">2ã€é—®é¢˜äºŒï¼šé€‚é…è¯·æ±‚å‚æ•°ä¸­æœ‰ä¸€äº›å…¬å…±éƒ¨åˆ†</h3>
<p>é¡¹ç›®ä¸­ç½‘ç»œè¯·æ±‚çš„æ‹¦æˆªå™¨å·²ç»å®šä¹‰äº†ä¸€äº›å…¬å…±è¯·æ±‚å‚æ•°ï¼Œè¯»å–çš„åŸå§‹æ•°æ®å¦‚ä½•å…³è”ï¼Ÿä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">{
    <span class="hljs-string">"app"</span>: {
        <span class="hljs-string">"locale"</span>: <span class="hljs-string">"{{locale}}"</span>,
        <span class="hljs-string">"tid"</span>: <span class="hljs-string">"{{terminal_id}}"</span>,
        <span class="hljs-string">"platform"</span>: <span class="hljs-string">"{{platform}}"</span>
    },
    <span class="hljs-string">"data"</span>: {
        <span class="hljs-comment">//æ¯ä¸ªæ¥å£åªæœ‰è¿™é‡Œæœ‰å·®å¼‚</span>
    }
}
</code></pre>
<p>åªæœ‰dataå—ä¸­æœ‰å·®å¼‚ã€‚ç­”æ¡ˆå…¶å®åŒä¸Šï¼Œskillä¸­å‘Šè¯‰AIï¼Œå¹¶è®©å®ƒæ¨¡ä»¿ä½ çš„ä»£ç ã€‚</p>
<h3 data-id="heading-3">3ã€é—®é¢˜ä¸‰ï¼šè¿”å›æ•°æ®è„±å£³</h3>
<p>ä¾‹å¦‚é¡¹ç›®ä¸­çš„å£³æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">val</span> code: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> msg: String,
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T
) : BaseResponse&lt;T&gt;() {...}
</code></pre>
<p>é‚£æˆ‘ä»¬éœ€è¦çš„è§£æçš„Data Classå¯èƒ½åªéœ€è¦è„±å£³çš„éƒ¨åˆ†ï¼Œå¦‚ä½•è®©AIçŸ¥é“ï¼Ÿç­”æ¡ˆä¹ŸåŒä¸Šï¼Œskillä¸­å‘Šè¯‰AIï¼Œå¹¶è®©å®ƒæ¨¡ä»¿ä½ çš„ä»£ç ã€‚</p>
<h3 data-id="heading-4">4ã€é—®é¢˜å››ï¼šviewmodelä¸­ç½‘ç»œè¯·æ±‚å¦‚ä½•å†™</h3>
<p>é“ç†åŒä¸Šã€‚</p>
<h3 data-id="heading-5">5ã€é—®é¢˜äº”ï¼šä»£ç æ”¾åœ¨å“ªä¸ªæ–‡ä»¶</h3>
<p>è¿™ä¸ªé—®é¢˜çš„è§£ç­”è¦çœ‹æƒ…å†µäº†ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹é¢åªç»™ä»£ç çš„ç¤ºä¾‹ï¼Œæœ€åå†æ¢è®¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-6">äºŒã€è·å–æ¥å£åŸå§‹æ•°æ®</h2>
<p>è¿™ä¸€æ­¥ä¾èµ–MCPçš„å¼€æ”¾èƒ½åŠ›ï¼Œåç«¯å…„å¼Ÿæ¥å£æ€ä¹ˆå®šä¹‰çš„ï¼Œå­—æ®µæ€ä¹ˆå†™çš„ï¼ŒAndroidå¦‚ä½•å°è£…Data Classéƒ½ä¾èµ–è¿™äº›åŸå§‹æ•°æ®ã€‚æ¥ä¸‹æ¥çœ‹é€šè¿‡Apifoxå¦‚ä½•åŠåˆ°çš„ã€‚</p>
<p>Apifoxçš„MCPç°é˜¶æ®µè¿˜ä¸èƒ½é›†æˆåˆ°Codexä¸­ä½¿ç”¨ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">âš  MCP client <span class="hljs-keyword">for</span> `apifox_api_docs` failed to start: MCP startup failed: handshaking with MCP server failed: connection closed: initialize response
âš  MCP startup incomplete (failed: apifox_api_docs)
</code></pre>
<p>åŸå› æ˜¯Apifoxçš„MCPè¿”å›ä¸ç¬¦åˆCodexå®šä¹‰çš„è§„èŒƒã€‚</p>
<p>é‚£æ¢å…¶ä»–æ–¹å¼ï¼Œæ‰“å¼€Apifoxç»ˆç«¯ï¼ˆå½“å‰Vç‰ˆæœ¬2.7.58 (2.7.58)ï¼‰ï¼Œé€‰æ‹©éœ€è¦ç”Ÿæˆä»£ç çš„æ¥å£ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2912582992aa4b93981239341d8f3546~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGltZUZpbmU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728725&amp;x-signature=Yh5A2wxlyW7sNCV2%2FKFo0%2BdjFP0%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šæ“ä½œï¼Œå¯ä»¥å¾—åˆ°å¤åˆ¶çš„ä¸€æ®µä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">è¯·è®¿é—®ä»¥ä¸‹é“¾æ¥è·å–æ¥å£â€œå¤©æ°”ä¿¡æ¯V3â€çš„æ¥å£å®šä¹‰ä¿¡æ¯ï¼šhttps:<span class="hljs-comment">//api.apifox.cn/temp-links/api/%E5%A4%A9%E6%B0%6%81%AFv3-253061517?t=e0be3ab5-e8bf-4ec2-be81-f1489</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±æ‹¿åˆ°äº†æ¥å£çš„åŸå§‹æ•°æ®é“¾æ¥ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€å¦‚ä½•ç¼–è¾‘skills</h2>
<p>è¿™ä¸€æ­¥è·Ÿé¡¹ç›®å¼ºå…³è”ï¼Œå› ä¸ºæ¯ä¸ªé¡¹ç›®å†™æ³•éƒ½ä¸ä¸€æ ·ï¼Œæ–‡ä»¶ä¸ä¸€æ ·ï¼Œæ‰€ä»¥skillçš„å†™æ³•å› é¡¹ç›®è€Œå¼‚ï¼Œä¸‹é¢è´´ä¸€ä»½å‰”é™¤æ•æ„Ÿä¿¡æ¯åçš„skillï¼ŒæŠ›ç –å¼•ç‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">---
name: api_to_request
description: è¯·è®¿é—®é“¾æ¥è·å–æ¥å£å®šä¹‰ä¿¡æ¯ã€‚
---
## è¯·è®¿é—®é“¾æ¥è·å–æ¥å£å®šä¹‰ä¿¡æ¯ï¼Œç»™å‡ºå¦‚ä¸‹è¦æ±‚çš„ä»£ç ï¼š

### <span class="hljs-number">1</span>ã€ä»£ç ä¸€ï¼šç”Ÿæˆretrofitæ¥å£å®šä¹‰
`java/api` æ–‡ä»¶å¤¹å†…æ˜¯å®šä¹‰çš„retrofit api è¯·æ±‚çš„æ¥å£ï¼Œä¾‹å¦‚å…¶ä¸­çš„ä¸€ä¾‹ï¼š

<span class="hljs-comment">/**
 * è·å–Camera Eventäº‹ä»¶
 */</span>
<span class="hljs-meta">@POST(<span class="hljs-string">"/v1/iot/camera/discoverXXX"</span>)</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">discoverXxx</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> request: <span class="hljs-type">Request</span>)</span></span>: ApiResponse&lt;Response?&gt;

è¯·æŒ‰ç…§é“¾æ¥ä¸­çš„è¯·æ±‚ç±»å‹ç»™å‡ºç±»ä¼¼ä¸Šé¢çš„æ¥å£å®šä¹‰ã€‚

### <span class="hljs-number">2</span>ã€ä»£ç äºŒï¼šç»™å‡ºè¯·æ±‚çš„<span class="hljs-meta">@Body</span>
ä¸€èˆ¬çš„è¯·æ±‚æ•°æ®ç¤ºä¾‹æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š

{
    <span class="hljs-string">"data"</span>: {
        <span class="hljs-string">"dev_id"</span>: <span class="hljs-string">"xxx"</span>
    },
    <span class="hljs-string">"app"</span>: {
        <span class="hljs-string">"locale"</span>: <span class="hljs-string">"en_AU"</span>,
        <span class="hljs-string">"tid"</span>: <span class="hljs-string">"8AE4EC1E36904B869D03FC9BABE4C087"</span>,
        <span class="hljs-string">"alias"</span>: <span class="hljs-string">"Kevin çš„ A52"</span>,
        <span class="hljs-string">"platform"</span>: <span class="hljs-string">"foxx"</span>
    }
}

ä¸ºäº†é¿å…æ¯æ¬¡éƒ½ç»™å‡ºé‡å¤çš„å‚æ•°ï¼Œæˆ‘åœ¨retrofitæ·»åŠ äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œè¯·å‚è€ƒ`AddPublicParamsInterceptor.kt`æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯æ·»åŠ å…¬å…±è¯·æ±‚å‚æ•°çš„åœ°æ–¹ã€‚æ‰€ä»¥<span class="hljs-meta">@Body</span>ä¸­åªéœ€è¦ç»™å‡º<span class="hljs-keyword">data</span>èŠ‚ç‚¹çš„å†…å®¹å³å¯ï¼Œå¦‚æœ<span class="hljs-keyword">data</span>èŠ‚ç‚¹å†…çš„å†…å®¹ä¸ºç©ºï¼Œé‚£å°±ä¸éœ€è¦ç»™å‡ºä»»ä½•å‚æ•°ï¼Œå› ä¸º`AddPublicParamsInterceptor.kt`ä¸­ä¼šé»˜è®¤æ·»åŠ `{}`.

### <span class="hljs-number">3</span>ã€ä»£ç ä¸‰ï¼šç»™å‡ºè¿”å›çš„response
è¿”å›çš„æ•°æ®ä½¿ç”¨`ApiResponse.kt`å‰¥å£³ï¼Œæ‰€ä»¥ç»™å‡ºçš„responseæ•°æ®åº”è¯¥æ˜¯å‰¥å£³åçš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span>ç±»ã€‚è¯·å‚è€ƒ`java/<span class="hljs-keyword">data</span>`æ–‡ä»¶å¤¹å†…å…¶ä»–responseçš„å†™æ³•ç»™å‡ºã€‚

### <span class="hljs-number">4</span>ã€ä»£ç å››ï¼šviewmodelä¸­å®é™…è¯·æ±‚çš„ä»£ç 
viewmodelä¸­å®é™…è¯·æ±‚çš„ä»£ç è¯·å‚è€ƒä¸‹é¢çš„ä»£ç ç»™å‡ºï¼š

    <span class="hljs-comment">/**
     * è·å–è®¾å¤‡åŒæ­¥æˆæƒç 
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">syncAppDevice</span><span class="hljs-params">(
        buffer: <span class="hljs-type">MeshBanBindBuffer</span>,
        success: (<span class="hljs-type">Any</span>?) -&gt; <span class="hljs-type">Unit</span>,
        fail: (<span class="hljs-type">ApiHttpExceptionResponse</span>&lt;<span class="hljs-type">Any</span>?&gt;) -&gt; <span class="hljs-type">Unit</span>,
        error: (<span class="hljs-type">AppException</span>) -&gt; <span class="hljs-type">Unit</span>
    )</span></span> {
        <span class="hljs-keyword">val</span> request = SyncAppDeviceRequest(...)
        requestWithHttpException({ apiService.syncAppDevice(request) }, success = {
            success(it)
        }, fail = {
            fail(it)
        }, error = {
            error(it)
        })
    }
</code></pre>
<p>æ ¹æ®é¡¹ç›®æƒ…å†µå¯ä»¥å†™çš„æ›´ä¸°å¯Œï¼Œæ›´è¯¦ç»†ã€‚</p>
<p>Apifoxå¤åˆ¶é“¾æ¥çš„å†…å®¹å› ä¸ºåŒ¹é…skillçš„<code>description</code>ï¼Œæ‰€ä»¥ç»™å‡ºé“¾æ¥å°±å¯ä»¥è§¦å‘ä¸Šé¢çš„skillã€‚Codexç”Ÿæˆçš„ä»£ç å¦‚ä¸‹(å‰”é™¤äº†æ•æ„Ÿä¿¡æ¯)ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">â€¢ ä½¿ç”¨ api_to_request æŠ€èƒ½ï¼Œå› ä¸ºéœ€è¦ä»æ¥å£æ–‡æ¡£ç”Ÿæˆ Retrofit è¯·æ±‚ã€è¯·æ±‚ä½“ã€å“åº”ä½“ä¸ ViewModel è°ƒç”¨ä»£ç ã€‚(api.apifox.cn (https:<span class="hljs-comment">//api.apifox.cn/temp-links/api/</span>
  %E5%A4%A9%E6%F%A1%E6%<span class="hljs-number">81</span>%AFv3-<span class="hljs-number">253061517</span>?t=e0be3ab5-e8bf-4ec2-be81-f148d9))

  ä»£ç ä¸€ï¼šRetrofit æ¥å£å®šä¹‰(api.apifox.cn (https:<span class="hljs-comment">//api.apifox.cn/temp-links/api/%E5%A4%A9%E6%A1%E6%81%AFv3-253061517?t=e0be3ab5-e8bf-4ec2-be81-</span>
  f14569))

  <span class="hljs-comment">/**
   * å¤©æ°”ä¿¡æ¯V3
   */</span>
  <span class="hljs-meta">@POST(<span class="hljs-string">"/v1/iot/weather/getCurrentInfo"</span>)</span>
  <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCurrentInfoV3</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> request: <span class="hljs-type">WeatherInfoV3Request</span>)</span></span>: ApiResponse&lt;WeatherInfoV3Response?&gt;

  ä»£ç äºŒï¼š<span class="hljs-meta">@Body</span>ï¼ˆä»… <span class="hljs-keyword">data</span> èŠ‚ç‚¹ï¼‰(api.apifox.cn (https:<span class="hljs-comment">//api.apifox.cn/temp-links/api/%E5%A4%A9%E6%%E6%81%AFv3-253061517?t=e0be3ab5-e8bf-4ec2-be81-</span>
  f8569))

  <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherInfoV3Request</span>(
      <span class="hljs-keyword">var</span> lon: <span class="hljs-built_in">Double</span>,
      <span class="hljs-keyword">var</span> lat: <span class="hljs-built_in">Double</span>,
      <span class="hljs-keyword">var</span> unit: String = <span class="hljs-string">"IMPERIAL"</span> <span class="hljs-comment">// METRIC / IMPERIAL</span>
  )

  ä»£ç ä¸‰ï¼šResponseï¼ˆå‰¥å£³åçš„ <span class="hljs-keyword">data</span>ï¼‰(api.apifox.cn (https:<span class="hljs-comment">//api.apifox.cn/temp-links/api/%E5%A4%A9%E6%F%A1%E6%81%AFv3-253061517?t=e0be3ab5-e8bf-4ec2-</span>
  be81-f18569))

  <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherInfoV3Response</span>(
      <span class="hljs-keyword">var</span> day: <span class="hljs-built_in">Boolean</span>?,
      <span class="hljs-keyword">var</span> weather: WeatherV3?,
      <span class="hljs-keyword">var</span> temperature: <span class="hljs-built_in">Double</span>?,
      <span class="hljs-keyword">var</span> wind: <span class="hljs-built_in">Double</span>?,
      <span class="hljs-keyword">var</span> pressure: <span class="hljs-built_in">Double</span>?,
      <span class="hljs-keyword">var</span> humidity: <span class="hljs-built_in">Double</span>?,
      <span class="hljs-keyword">var</span> aqi: String?
  )

  <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherV3</span>(
      <span class="hljs-keyword">var</span> condition: String?,
      <span class="hljs-keyword">var</span> icon: String?
  )

  ä»£ç å››ï¼šViewModel ä¸­å®é™…è¯·æ±‚ä»£ç (api.apifox.cn (https:<span class="hljs-comment">//api.apifox.cn/temp-links/api/%E5%A4%A9%%A1%E6%81%AFv3-253061517?t=e0be3ab5-e8bf-4ec2-</span>
  be81-f1469))

  <span class="hljs-comment">/**
   * è·å–å¤©æ°”ä¿¡æ¯V3
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCurrentInfoV3</span><span class="hljs-params">(
      lon: <span class="hljs-type">Double</span>,
      lat: <span class="hljs-type">Double</span>,
      unit: <span class="hljs-type">String</span> = <span class="hljs-string">"IMPERIAL"</span>,
      success: (<span class="hljs-type">WeatherInfoV3Response</span>?) -&gt; <span class="hljs-type">Unit</span>,
      fail: (<span class="hljs-type">ApiHttpExceptionResponse</span>&lt;<span class="hljs-type">Any</span>?&gt;) -&gt; <span class="hljs-type">Unit</span>,
      error: (<span class="hljs-type">AppException</span>) -&gt; <span class="hljs-type">Unit</span>
  )</span></span> {
      <span class="hljs-keyword">val</span> request = WeatherInfoV3Request(
          lon = lon,
          lat = lat,
          unit = unit
      )
      requestWithHttpException({ homeManagementApiService.getCurrentInfoV3(request) }, success = {
          success(it)
      }, fail = {
          fail(it)
      }, error = {
          error(it)
      })
  }

</code></pre>
<p>ç”Ÿæˆçš„ä»£ç å¯ç”¨åº¦æé«˜ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šè§£æ”¾äº†ç”Ÿäº§åŠ›ã€‚</p>
<h2 data-id="heading-8">å››ã€AIçš„æ”¾æƒ</h2>
<p>AIç”Ÿæˆçš„ä»£ç å¯ç”¨åº¦è¿™ä¹ˆé«˜ï¼Œé‚£æ˜¯ä¸æ˜¯åº”è¯¥æ”¾æƒç›´æ¥è®©AIå†™æ–‡ä»¶å‘¢ï¼Ÿ</p>
<p>1ã€å¦‚æœæ˜¯ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå®šä¹‰å¥½é¡¹ç›®æ¶æ„åå°±å¤§èƒ†çš„è®©AIç”Ÿæˆæ–‡ä»¶è‡ªå·±å†™ä»£ç å§ï¼Œèƒ½â€æ‘¸é±¼"å°±åˆ«åŠ¨æ‰‹ï¼Œäººç”Ÿè‹¦çŸ­æˆ‘ç”¨AIã€‚</p>
<p>2ã€å¦‚æœæ˜¯ä¸€ä¸ªæˆç†Ÿåº¦é«˜çš„é¡¹ç›®ï¼Œå»ºè®®ä»¥å°é¢—ç²’åº¦çš„å½¢å¼è®©AIç”Ÿæˆæˆ–ä¿®æ”¹æ–‡ä»¶ä»£ç ï¼Œè¿™æ ·å½±å“çš„èŒƒå›´å¯æ§ï¼Œgitæäº¤çš„æ—¶å€™è¯·ä»”ç»†å®¡æŸ¥AIç”Ÿæˆçš„ä»£ç ã€‚</p>
<p>3ã€å¦‚æœæ˜¯ä¸€ä¸ªæˆç†Ÿåº¦é«˜çš„é¡¹ç›®ï¼Œä¿®æ”¹çš„éœ€æ±‚å¤æ‚ï¼Œç‰µæ‰¯é¢å¹¿ï¼Œæˆ–è€…å…¬å¸è§„å®šä¸è®©AIå†™ä»£ç åªè®©è¾…åŠ©å‚è€ƒï¼Œé‚£è¿˜æ˜¯å¼€åªè¯»æ¨¡å¼è‡ªå·±å†™å§ã€‚</p>
<p>å›åˆ°æœ€ä¸Šé¢çš„é—®é¢˜äº”ï¼šä»£ç æ”¾å“ªä¸ªæ–‡ä»¶ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±ç®€å•äº†ã€‚</p>
<ul>
<li>é¡¹ç›®æ¶æ„æ¸…æ™°ï¼Œè®©AIå¹²æ´»ï¼Œå¯ä»¥å®Œå…¨è®©AIè‡ªä¸»å†³ç­–ï¼Œåç»­è‡ªå·±è°ƒæ•´ã€‚</li>
<li>å¯ä»¥åœ¨skillä¸­æ·»åŠ æç¤ºåŠ ä»¥å¼•å¯¼ï¼Œè®©AIæ”¾å“ªä¸ªæ–‡ä»¶/ç›®å½•ã€‚</li>
<li>åªè¯»æ¨¡å¼ï¼Œè‡ªå·±å¤„ç†AIç”Ÿæˆçš„ä»£ç ï¼Œå‰æœŸå¯ä»¥å¼€åªè¯»ç†Ÿæ‚‰AIçš„ä½¿ç”¨ï¼Œç­‰ç†Ÿç»ƒåå°±å¯ä»¥è®©AIè‡ªå·±å†™æ–‡ä»¶äº†ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºæ³ŠAI-AGIå¤§æ¨¡å‹å…¨æ ˆè¯¾12æœŸã€VIPã€‘]]></title>    <link>https://juejin.cn/post/7585289701793611802</link>    <guid>https://juejin.cn/post/7585289701793611802</guid>    <pubDate>2025-12-19T05:52:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585289701793611802" data-draft-id="7585406229150482470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºæ³ŠAI-AGIå¤§æ¨¡å‹å…¨æ ˆè¯¾12æœŸã€VIPã€‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-19T05:52:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµ„æºç«™shanxueitæˆ–com"/> <meta itemprop="url" content="https://juejin.cn/user/3669500364327483"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºæ³ŠAI-AGIå¤§æ¨¡å‹å…¨æ ˆè¯¾12æœŸã€VIPã€‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3669500364327483/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµ„æºç«™shanxueitæˆ–com
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T05:52:49.000Z" title="Fri Dec 19 2025 05:52:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da332587d07a4b62bfa2b711f3c644c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LWE5rqQ56uZc2hhbnh1ZWl05oiWY29t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766728369&amp;x-signature=c6z6VYZzzN6LKUsYxKID5KcXwps%3D" alt="1.webp" loading="lazy"/>
ä½ æ˜¯å¦å·²ç»æŒæ¡äº† Transformer çš„åŸç†ï¼Œèƒ½èƒŒè¯µ Attention æœºåˆ¶çš„å…¬å¼ï¼Œå´åœ¨é¢å¯¹ä¸€ä¸ªçœŸå®çš„ä¼ä¸šéœ€æ±‚æ—¶æ„Ÿåˆ°æ— ä»ä¸‹æ‰‹ï¼Ÿä½ æ˜¯å¦åˆ·äº†ä¸Šç™¾é“ç®—æ³•é¢˜ï¼Œå´ä¾ç„¶ä¸çŸ¥é“å¦‚ä½•å°†ä¸€ä¸ªæ¨¡å‹å°è£…æˆç¨³å®šã€é«˜æ•ˆã€å¯æ‰©å±•çš„å·¥ä¸šçº§æœåŠ¡ï¼Ÿ</p>
<p>è¿™ï¼Œå°±æ˜¯ç†è®ºä¸å®è·µä¹‹é—´çš„é¸¿æ²Ÿï¼Œæ˜¯è®¸å¤š AI å­¦ä¹ è€…æ— æ³•è·¨è¶Šçš„â€œæœ€åä¸€å…¬é‡Œâ€ã€‚è€Œâ€œæ™ºæ³Š AGI å…¨æ ˆ 12 æœŸ VIPâ€è¯¾ç¨‹ï¼Œå…¶æ ¸å¿ƒä»·å€¼æ­£åœ¨äºâ€”â€”<strong>å®ƒä¸æ•™ä½ ç†è®ºï¼Œå®ƒå¸¦ä½ ç”¨ä»£ç ï¼Œäº²æ‰‹å¡«å¹³è¿™æ¡é¸¿æ²Ÿã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±é€šè¿‡æ¨¡æ‹Ÿä¸€ä¸ªâ€œä¼ä¸šçº§æ™ºèƒ½å·¥å•åˆ†ç±»ç³»ç»Ÿâ€é¡¹ç›®ï¼Œæ¥æ­ç§˜è¿™é—¨è¯¾ç¨‹çš„å«é‡‘é‡ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€ä»½æ–‡æ¡£ï¼Œè¿™æ˜¯ä¸€å¥—å¯ä»¥ç›´æ¥è½åœ°ã€å¯ä»¥ç›´æ¥å†™å…¥ç®€å†çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-0"><strong>ç¬¬ä¸€å¹•ï¼šä¼ä¸šçº§é¡¹ç›®çš„â€œå…¨æ ˆâ€è§†é‡</strong></h4>
<p>åœ¨ä¼ä¸šä¸­ï¼Œä¸€ä¸ª AI é¡¹ç›®çš„è¯ç”Ÿï¼Œè¿œä¸æ­¢Â <code>model.fit()</code>Â è¿™ä¹ˆç®€å•ã€‚å®ƒæ˜¯ä¸€æ¡å®Œæ•´çš„â€œæ•°æ®-æ¨¡å‹-åº”ç”¨-éƒ¨ç½²â€é“¾è·¯ã€‚æ™ºæ³Šçš„è¯¾ç¨‹ï¼Œæ­£æ˜¯å¸¦ä½ å®Œæ•´åœ°èµ°å®Œè¿™æ¡è·¯ã€‚</p>
<p><strong>æˆ‘ä»¬çš„ç›®æ ‡ï¼š</strong> Â æ„å»ºä¸€ä¸ªèƒ½è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·åé¦ˆå·¥å•ç±»å‹ï¼ˆå¦‚â€œè´¦åŠ¡å’¨è¯¢â€ã€â€œæŠ€æœ¯æ•…éšœâ€ã€â€œåŠŸèƒ½å»ºè®®â€ï¼‰çš„ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-1"><strong>ç¬¬äºŒå¹•ï¼šä»£ç æ­ç§˜ â€”â€” ä»åŸå§‹æ•°æ®åˆ°æ™ºèƒ½æœåŠ¡</strong></h4>
<p>ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼Œå°†æ¨¡æ‹Ÿä½ åœ¨è¯¾ç¨‹ä¸­ä¼šæ¥è§¦åˆ°çš„â€œä¼ä¸šçº§é¡¹ç›®æ–‡æ¡£â€çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p>
<h5 data-id="heading-2"><strong>1. æ•°æ®å±‚ï¼šå·¥ä¸šçº§æ•°æ®å¤„ç†</strong></h5>
<p>çœŸå®çš„ä¼ä¸šæ•°æ®æ˜¯â€œè„â€çš„ã€ä¸è§„åˆ™çš„ã€‚ç¬¬ä¸€æ­¥ä¸æ˜¯å»ºæ¨¡ï¼Œè€Œæ˜¯æ•°æ®æ²»ç†ã€‚</p>
<p>python</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># data_processor.py</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> logging

<span class="hljs-comment"># é…ç½®æ—¥å¿—ï¼Œè¿™æ˜¯ä¼ä¸šçº§å¼€å‘çš„åŸºæœ¬ç´ å…»</span>
logging.basicConfig(level=logging.INFO, <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(levelname)s - %(message)s'</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketDataProcessor</span>:
    <span class="hljs-string">"""ä¼ä¸šçº§å·¥å•æ•°æ®å¤„ç†å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, raw_data_path: <span class="hljs-built_in">str</span></span>):
        self.raw_data_path = raw_data_path
        self.df = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åŠ è½½åŸå§‹æ•°æ®ï¼Œé€šå¸¸æ˜¯CSVæˆ–æ•°æ®åº“å¯¼å‡º"""</span>
        <span class="hljs-keyword">try</span>:
            self.df = pd.read_csv(self.raw_data_path)
            logging.info(<span class="hljs-string">f"æˆåŠŸåŠ è½½æ•°æ®ï¼Œå…± <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.df)}</span> æ¡è®°å½•ã€‚"</span>)
        <span class="hljs-keyword">except</span> FileNotFoundError:
            logging.error(<span class="hljs-string">f"æ•°æ®æ–‡ä»¶æœªæ‰¾åˆ°: <span class="hljs-subst">{self.raw_data_path}</span>"</span>)
            <span class="hljs-keyword">raise</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_text</span>(<span class="hljs-params">self, text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""æ¸…æ´—å•æ¡æ–‡æœ¬æ•°æ®ï¼Œå»é™¤å™ªå£°"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(text, <span class="hljs-built_in">str</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        <span class="hljs-comment"># å»é™¤HTMLæ ‡ç­¾ã€ç‰¹æ®Šå­—ç¬¦ã€å¤šä½™ç©ºæ ¼</span>
        text = re.sub(<span class="hljs-string">r'&lt;[^&gt;]+&gt;'</span>, <span class="hljs-string">''</span>, text)
        text = re.sub(<span class="hljs-string">r'[^\w\s]'</span>, <span class="hljs-string">''</span>, text)
        text = re.sub(<span class="hljs-string">r'\s+'</span>, <span class="hljs-string">' '</span>, text).strip()
        <span class="hljs-keyword">return</span> text.lower()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">self</span>) -&gt; pd.DataFrame:
        <span class="hljs-string">"""æ‰§è¡Œå®Œæ•´çš„æ•°æ®æ¸…æ´—æµç¨‹"""</span>
        <span class="hljs-keyword">if</span> self.df <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self.load_data()
        
        logging.info(<span class="hljs-string">"å¼€å§‹æ•°æ®æ¸…æ´—..."</span>)
        <span class="hljs-comment"># å‡è®¾æ•°æ®åˆ—åä¸º 'content' å’Œ 'category'</span>
        self.df[<span class="hljs-string">'cleaned_content'</span>] = self.df[<span class="hljs-string">'content'</span>].apply(self.clean_text)
        self.df.dropna(subset=[<span class="hljs-string">'cleaned_content'</span>, <span class="hljs-string">'category'</span>], inplace=<span class="hljs-literal">True</span>)
        self.df = self.df[self.df[<span class="hljs-string">'cleaned_content'</span>].<span class="hljs-built_in">str</span>.<span class="hljs-built_in">len</span>() &gt; <span class="hljs-number">10</span>] <span class="hljs-comment"># è¿‡æ»¤æ‰å¤ªçŸ­çš„æ— æ•ˆæ–‡æœ¬</span>
        
        logging.info(<span class="hljs-string">f"æ•°æ®æ¸…æ´—å®Œæˆï¼Œæœ‰æ•ˆæ•°æ® <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.df)}</span> æ¡ã€‚"</span>)
        <span class="hljs-keyword">return</span> self.df[[<span class="hljs-string">'cleaned_content'</span>, <span class="hljs-string">'category'</span>]]

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ (è¿™åœ¨ä½ çš„é¡¹ç›®ä¸­ä¼šæ˜¯ç‹¬ç«‹çš„è„šæœ¬)</span>
<span class="hljs-comment"># processor = TicketDataProcessor("raw_tickets.csv")</span>
<span class="hljs-comment"># clean_df = processor.process()</span>
<span class="hljs-comment"># clean_df.to_csv("processed_tickets.csv", index=False)</span>
</code></pre>
<p><strong>è§£è¯»ï¼š</strong> Â è¿™æ®µä»£ç å±•ç¤ºäº†ä¼ä¸šçº§å¼€å‘çš„ä¸¥è°¨æ€§ï¼šæ—¥å¿—è®°å½•ã€å¼‚å¸¸å¤„ç†ã€æ¨¡å—åŒ–è®¾è®¡ï¼Œä»¥åŠé’ˆå¯¹çœŸå®ä¸–ç•Œå™ªå£°çš„æ•°æ®æ¸…æ´—ç­–ç•¥ã€‚è¿™è¿œæ¯”ç›´æ¥ä½¿ç”¨Â <code>sklearn</code>Â çš„Â <code>load_iris</code>Â æ•°æ®é›†è¦å¤æ‚å’ŒçœŸå®ã€‚</p>
<h5 data-id="heading-3"><strong>2. æ¨¡å‹å±‚ï¼šåŸºäº Transformers çš„å¾®è°ƒ</strong></h5>
<p>è¯¾ç¨‹ä¸ä¼šåªæ•™ä½ è°ƒç”¨Â <code>pipeline</code>ï¼Œè€Œæ˜¯å¸¦ä½ æ·±å…¥å¾®è°ƒä¸€ä¸ªé¢„è®­ç»ƒæ¨¡å‹ï¼Œè®©å®ƒçœŸæ­£ç†è§£ä½ çš„ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>python</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># model_trainer.py</span>
import torch
from transformers import AutoTokenizer, AutoModelForSequenceClassification, Trainer, TrainingArguments
from datasets import load_dataset

def fine_tune_bert(model_name: str, train_file: str, eval_file: str):
    """å¾®è°ƒBERTæ¨¡å‹ç”¨äºå·¥å•åˆ†ç±»"""
    
    <span class="hljs-comment"># 1. åŠ è½½Tokenizerå’Œæ¨¡å‹</span>
    <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(model_name)
    <span class="hljs-attr">model</span> = AutoModelForSequenceClassification.from_pretrained(model_name, num_labels=<span class="hljs-number">3</span>) <span class="hljs-comment"># å‡è®¾3ä¸ªç±»åˆ«</span>

    <span class="hljs-comment"># 2. æ•°æ®é¢„å¤„ç†</span>
    def tokenize_function(examples):
        return tokenizer(examples<span class="hljs-section">["text"]</span>, <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>, truncation=<span class="hljs-literal">True</span>)

    <span class="hljs-comment"># ä½¿ç”¨datasetsåº“åŠ è½½å’Œå¤„ç†æ•°æ®ï¼Œæ›´é«˜æ•ˆ</span>
    <span class="hljs-attr">train_dataset</span> = load_dataset(<span class="hljs-string">'csv'</span>, data_files=train_file, split=<span class="hljs-string">"train"</span>)
    <span class="hljs-attr">eval_dataset</span> = load_dataset(<span class="hljs-string">'csv'</span>, data_files=eval_file, split=<span class="hljs-string">"train"</span>)
    
    <span class="hljs-attr">train_dataset</span> = train_dataset.map(tokenize_function, batched=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">eval_dataset</span> = eval_dataset.map(tokenize_function, batched=<span class="hljs-literal">True</span>)

    <span class="hljs-comment"># 3. å®šä¹‰è®­ç»ƒå‚æ•°</span>
    <span class="hljs-attr">training_args</span> = TrainingArguments(
        <span class="hljs-attr">output_dir</span>=<span class="hljs-string">"./results"</span>,
        <span class="hljs-attr">num_train_epochs</span>=<span class="hljs-number">3</span>,
        <span class="hljs-attr">per_device_train_batch_size</span>=<span class="hljs-number">8</span>,
        <span class="hljs-attr">per_device_eval_batch_size</span>=<span class="hljs-number">8</span>,
        <span class="hljs-attr">warmup_steps</span>=<span class="hljs-number">500</span>,
        <span class="hljs-attr">weight_decay</span>=<span class="hljs-number">0.01</span>,
        <span class="hljs-attr">logging_dir</span>=<span class="hljs-string">'./logs'</span>,
        <span class="hljs-attr">logging_steps</span>=<span class="hljs-number">10</span>,
        <span class="hljs-attr">evaluation_strategy</span>=<span class="hljs-string">"epoch"</span>,
    )

    <span class="hljs-comment"># 4. åˆ›å»ºTrainerå¹¶å¼€å§‹è®­ç»ƒ</span>
    <span class="hljs-attr">trainer</span> = Trainer(
        <span class="hljs-attr">model</span>=model,
        <span class="hljs-attr">args</span>=training_args,
        <span class="hljs-attr">train_dataset</span>=train_dataset,
        <span class="hljs-attr">eval_dataset</span>=eval_dataset,
    )

    logging.info("å¼€å§‹æ¨¡å‹å¾®è°ƒ...")
    trainer.train()
    logging.info("æ¨¡å‹å¾®è°ƒå®Œæˆï¼")
    
    <span class="hljs-comment"># 5. ä¿å­˜æœ€ç»ˆæ¨¡å‹</span>
    trainer.save_model("./ticket_classifier_model")

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-comment"># fine_tune_bert("bert-base-chinese", "train.csv", "eval.csv")</span>
</code></pre>
<p><strong>è§£è¯»ï¼š</strong> Â è¿™æ®µä»£ç ä½¿ç”¨äº†Â <code>Hugging Face</code>Â ç”Ÿæ€ä¸­æœ€æ ¸å¿ƒçš„Â <code>Trainer</code>Â APIï¼Œå±•ç¤ºäº†æ ‡å‡†çš„å¾®è°ƒæµç¨‹ï¼šåŠ è½½æ¨¡å‹ã€å¤„ç†æ•°æ®ã€è®¾ç½®å‚æ•°ã€è®­ç»ƒå’Œä¿å­˜ã€‚è¿™æ˜¯å·¥ä¸šç•Œ NLP ä»»åŠ¡çš„æ ‡å‡†èŒƒå¼ï¼Œä¹Ÿæ˜¯è¯¾ç¨‹çš„æ ¸å¿ƒå†…å®¹ã€‚</p>
<h5 data-id="heading-4"><strong>3. åº”ç”¨å±‚ï¼šä½¿ç”¨ FastAPI æ„å»ºé«˜æ€§èƒ½ API</strong></h5>
<p>æ¨¡å‹è®­ç»ƒå¥½ä¸æ˜¯ç»ˆç‚¹ï¼Œèƒ½æä¾›æœåŠ¡æ‰æ˜¯ã€‚FastAPI æ˜¯ç°ä»£ Python Web æœåŠ¡çš„é¦–é€‰ã€‚</p>
<p>python</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># api_server.py</span>
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline
<span class="hljs-keyword">import</span> uvicorn

<span class="hljs-comment"># å®šä¹‰è¯·æ±‚ä½“æ•°æ®ç»“æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># å®šä¹‰å“åº”ä½“æ•°æ®ç»“æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    category: <span class="hljs-built_in">str</span>
    confidence: <span class="hljs-built_in">float</span>

<span class="hljs-comment"># åŠ è½½å¾®è°ƒå¥½çš„æ¨¡å‹</span>
classifier = pipeline(<span class="hljs-string">"text-classification"</span>, model=<span class="hljs-string">"./ticket_classifier_model"</span>)

app = FastAPI(title=<span class="hljs-string">"æ™ºèƒ½å·¥å•åˆ†ç±»API"</span>, version=<span class="hljs-string">"1.0"</span>)

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/classify"</span>, response_model=TicketResponse</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">classify_ticket</span>(<span class="hljs-params">request: TicketRequest</span>):
    <span class="hljs-string">"""å·¥å•åˆ†ç±»æ¥å£"""</span>
    result = classifier(request.content)[<span class="hljs-number">0</span>]
    
    <span class="hljs-comment"># å°†æ¨¡å‹è¾“å‡ºçš„ label æ˜ å°„åˆ°å‹å¥½çš„ç±»åˆ«å</span>
    label_map = {<span class="hljs-string">'LABEL_0'</span>: <span class="hljs-string">'è´¦åŠ¡å’¨è¯¢'</span>, <span class="hljs-string">'LABEL_1'</span>: <span class="hljs-string">'æŠ€æœ¯æ•…éšœ'</span>, <span class="hljs-string">'LABEL_2'</span>: <span class="hljs-string">'åŠŸèƒ½å»ºè®®'</span>}
    
    <span class="hljs-keyword">return</span> TicketResponse(
        category=label_map.get(result[<span class="hljs-string">'label'</span>], <span class="hljs-string">"æœªçŸ¥ç±»åˆ«"</span>),
        confidence=result[<span class="hljs-string">'score'</span>]
    )

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_root</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"æ™ºèƒ½å·¥å•åˆ†ç±»æœåŠ¡æ­£åœ¨è¿è¡Œ"</span>}

<span class="hljs-comment"># å¯åŠ¨å‘½ä»¤: uvicorn api_server:app --host 0.0.0.0 --port 8000</span>
</code></pre>
<p><strong>è§£è¯»ï¼š</strong> Â è¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•å°†ä¸€ä¸ªæ²‰é‡çš„ AI æ¨¡å‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªè½»é‡ã€æ ‡å‡†ã€æ˜“äºè°ƒç”¨çš„ RESTful APIã€‚<code>Pydantic</code>Â çš„ä½¿ç”¨ä¿è¯äº†æ•°æ®æ ¡éªŒï¼Œ<code>FastAPI</code>Â åˆ™æä¾›äº†è‡ªåŠ¨çš„äº¤äº’å¼æ–‡æ¡£ï¼ˆSwagger UIï¼‰ï¼Œè¿™äº›éƒ½æ˜¯ä¼ä¸šçº§æœåŠ¡çš„å¿…å¤‡è¦ç´ ã€‚</p>
<h5 data-id="heading-5"><strong>4. éƒ¨ç½²å±‚ï¼šDocker å®¹å™¨åŒ–</strong></h5>
<p>ä¸ºäº†è®©ä½ çš„æœåŠ¡åœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œï¼Œå®¹å™¨åŒ–æ˜¯æœ€åï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚</p>
<p>dockerfile</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Dockerfile</span>

<span class="hljs-comment"># é˜¶æ®µ1: æ„å»ºç¯å¢ƒ</span>
FROM python:3.9-slim as builder

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

<span class="hljs-comment"># é˜¶æ®µ2: è¿è¡Œç¯å¢ƒ</span>
FROM python:3.9-slim

WORKDIR /app
<span class="hljs-comment"># ä»æ„å»ºé˜¶æ®µå¤åˆ¶å·²å®‰è£…çš„åŒ…</span>
COPY --from=builder /usr/local/lib/python3.9/site-packages /usr/local/lib/python3.9/site-packages
COPY --from=builder /usr/local/bin /usr/local/bin

<span class="hljs-comment"># å¤åˆ¶åº”ç”¨ä»£ç å’Œæ¨¡å‹</span>
COPY ./api_server.py .
COPY ./ticket_classifier_model ./ticket_classifier_model

<span class="hljs-comment"># æš´éœ²ç«¯å£</span>
EXPOSE 8000

<span class="hljs-comment"># å¯åŠ¨å‘½ä»¤</span>
CMD [<span class="hljs-string">"uvicorn"</span>, <span class="hljs-string">"api_server:app"</span>, <span class="hljs-string">"--host"</span>, <span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-string">"--port"</span>, <span class="hljs-string">"8000"</span>]
</code></pre>
<p><img src="" alt="" loading="lazy"/></p>
<p>å¼•ç”¨</p>
<p><strong>è§£è¯»ï¼š</strong> Â è¿™ä¸ªå¤šé˜¶æ®µæ„å»ºçš„Â <code>Dockerfile</code>Â æ˜¯ä¼ä¸šéƒ¨ç½²çš„æœ€ä½³å®è·µã€‚å®ƒä¿è¯äº†æœ€ç»ˆé•œåƒçš„ç²¾ç®€å’Œå®‰å…¨ï¼Œç¡®ä¿ä½ çš„ AI åº”ç”¨å¯ä»¥æ— ç¼åœ°éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼ˆå¦‚ AWS, Azure, é˜¿é‡Œäº‘ï¼‰æˆ– Kubernetes é›†ç¾¤ä¸­ã€‚</p>
<h4 data-id="heading-6"><strong>ç¬¬ä¸‰å¹•ï¼šç¤¾ç¾¤èµ„æº â€”â€” ä½ çš„ç»ˆèº«æŠ€æœ¯åç›¾</strong></h4>
<p>ä»£ç æ˜¯å†°å†·çš„ï¼Œä½†ç¤¾ç¾¤æ˜¯æ¸©æš–çš„ã€‚æ™ºæ³Š VIP ç¤¾ç¾¤çš„ä»·å€¼ï¼Œåœ¨äºï¼š</p>
<ul>
<li><strong>å³æ—¶ç­”ç–‘</strong>ï¼šå½“ä½ è¢«ä¸Šè¿°ä»»ä½•ä¸€ä¸ªç¯èŠ‚å¡ä½æ—¶ï¼Œæ€»æœ‰ç»éªŒä¸°å¯Œçš„å¯¼å¸ˆæˆ–åŒå­¦ä¸ºä½ æŒ‡ç‚¹è¿·æ´¥ã€‚</li>
<li><strong>èµ„æºåˆ†äº«</strong>ï¼šæœ€æ–°çš„è®ºæ–‡ã€å¼€æºé¡¹ç›®ã€é¢è¯•ç»éªŒï¼Œåœ¨ç¤¾ç¾¤ä¸­é«˜é€Ÿæµè½¬ã€‚</li>
<li><strong>äººè„‰ç½‘ç»œ</strong>ï¼šä½ ç»“è¯†çš„ä¸å†æ˜¯åŒå­¦ï¼Œè€Œæ˜¯æœªæ¥ AI è¡Œä¸šçš„åŒè¡Œè€…å’Œåˆä½œä¼™ä¼´ã€‚</li>
</ul>
<h4 data-id="heading-7"><strong>ç»“è¯­ï¼šè¿™ä¸ä»…ä»…æ˜¯ä¸€é—¨è¯¾ç¨‹ï¼Œè¿™æ˜¯ä¸€æ¬¡èŒä¸šèœ•å˜</strong></h4>
<p>â€œæ‰‹æ…¢æ— â€çš„èƒŒåï¼Œæ˜¯ç¨€ç¼ºçš„ã€çœŸæ­£ä¸ä¼ä¸šéœ€æ±‚æ— ç¼å¯¹æ¥çš„å®æˆ˜èƒ½åŠ›ã€‚æ™ºæ³Š AGI å…¨æ ˆ 12 æœŸ VIPï¼Œé€šè¿‡æä¾›<strong>ä¼ä¸šçº§é¡¹ç›®æ–‡æ¡£</strong>ï¼ˆå¦‚ä¸Šè¿°ä»£ç çš„å®Œæ•´ç‰ˆï¼‰ã€<strong>æ²‰æµ¸å¼çš„å…¨æ ˆå¼€å‘ä½“éªŒ</strong>å’Œ<strong>é«˜è´¨é‡çš„ç¤¾ç¾¤èµ„æº</strong>ï¼Œä¸ºä½ æä¾›çš„ä¸æ˜¯é›¶æ•£çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯ä¸€å¥—å¯ä»¥è®©ä½ åœ¨ AI èŒåœºä¸­è„±é¢–è€Œå‡ºçš„â€œæ­¦åŠŸç§˜ç±â€ã€‚</p>
<p>å¦‚æœä½ å·²ç»åŒå€¦äº†çº¸ä¸Šè°ˆå…µï¼Œå¦‚æœä½ æ¸´æœ›ç”¨ä»£ç åˆ›é€ çœŸæ­£çš„ä»·å€¼ï¼Œé‚£ä¹ˆï¼Œè¿™æ‰‡é€šå¾€ä¼ä¸šçº§ AI å·¥ç¨‹å¸ˆçš„å¤§é—¨ï¼Œæ­£åœ¨ä¸ºä½ æ‰“å¼€ã€‚ä½†è¯·è®°ä½ï¼Œæœºä¼šæ€»æ˜¯ç•™ç»™è¡ŒåŠ¨æœ€å¿«çš„äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¾¹ç¼˜AIæ¨ç†è®¡ç®— - StarryOS RK3588 è¾¹ç¼˜AIç³»ç»Ÿæ¶æ„æ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šAArch64è£¸æœºå¯åŠ¨ä¸å†…å­˜ç®¡ç†]]></title>    <link>https://juejin.cn/post/7584722109584113707</link>    <guid>https://juejin.cn/post/7584722109584113707</guid>    <pubDate>2025-12-18T02:08:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584722109584113707" data-draft-id="7584695558159695913" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¾¹ç¼˜AIæ¨ç†è®¡ç®— - StarryOS RK3588 è¾¹ç¼˜AIç³»ç»Ÿæ¶æ„æ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šAArch64è£¸æœºå¯åŠ¨ä¸å†…å­˜ç®¡ç†"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-18T02:08:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¾¹ç¼˜AIæ¨ç†è®¡ç®— - StarryOS RK3588 è¾¹ç¼˜AIç³»ç»Ÿæ¶æ„æ·±åº¦è§£æï¼ˆäºŒï¼‰ï¼šAArch64è£¸æœºå¯åŠ¨ä¸å†…å­˜ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-18T02:08:55.000Z" title="Thu Dec 18 2025 02:08:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    53
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»“åº“åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkaori-seasons%2Fai-edge-inference" target="_blank" title="https://github.com/kaori-seasons/ai-edge-inference" ref="nofollow noopener noreferrer">github.com/kaori-seasoâ€¦</a></p>
<hr/>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ•´ä½“ä»‹ç»äº†StarryOS RK3588ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ç†å¿µå’Œäº”å±‚ç»“æ„ã€‚ä»æœ¬æ–‡å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ¯ä¸€å±‚çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚ä½œä¸ºç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€æ­¥ï¼ŒAArch64è£¸æœºå¯åŠ¨å’Œå†…å­˜ç®¡ç†æ˜¯æ•´ä¸ªç³»ç»Ÿçš„åŸºç¡€ï¼Œå®ƒä»¬å†³å®šäº†ç³»ç»Ÿèƒ½å¦æ­£ç¡®è¿è¡Œä»¥åŠåç»­åŠŸèƒ½çš„å®ç°æ–¹å¼ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†è§£æStarryOS RK3588çš„å¯åŠ¨æµç¨‹å’Œå†…å­˜ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ±‡ç¼–å¯åŠ¨ä»£ç ã€é¡µè¡¨ç»“æ„è®¾è®¡ä»¥åŠMMUå¯ç”¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">AArch64å¯åŠ¨æµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-2">å¯åŠ¨å…¥å£ç‚¹</h3>
<p>StarryOS RK3588çš„å¯åŠ¨å…¥å£ç‚¹ä½äº<code>src/arch/aarch64/boot.s</code>æ–‡ä»¶ä¸­ã€‚å½“ç³»ç»Ÿä¸Šç”µæˆ–å¤ä½æ—¶ï¼Œå¤„ç†å™¨ä¼šè·³è½¬åˆ°è¿™ä¸ªå…¥å£ç‚¹å¼€å§‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">.section .text.boot
.global _start
.align 4

_start:
    /* X0 = DTBç‰©ç†åœ°å€ (ç”±bootloaderä¼ å…¥)
     * X1 = å…¥å£é­”æ•° (0x65584150)
     * X2-X3 = ä¿ç•™
     * 
     * æ­¤æ—¶ç³»ç»ŸçŠ¶æ€:
     * - MMU: å…³é—­
     * - Cache: å…³é—­
     * - EL: EL1
     * - å¤§ç«¯/å°ç«¯: å°ç«¯
     */
</code></pre>
<h3 data-id="heading-3">ç³»ç»ŸçŠ¶æ€åˆå§‹åŒ–</h3>
<p>å¯åŠ¨ä»£ç é¦–å…ˆéœ€è¦ç¡®ä¿ç³»ç»Ÿå¤„äºä¸€ä¸ªå·²çŸ¥çš„çŠ¶æ€ã€‚è¿™åŒ…æ‹¬ç¦ç”¨ç¼“å­˜å’ŒMMUï¼Œè®¾ç½®å¼‚å¸¸å‘é‡è¡¨ç­‰ï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">/* 1. åˆå§‹åŒ–SCTLR_EL1 (ç³»ç»Ÿæ§åˆ¶å¯„å­˜å™¨)
 *    ç¦ç”¨æ‰€æœ‰ç¼“å­˜å’ŒæŒ‡ä»¤é¢„å– */
mrs x1, sctlr_el1
/* æ¸…é™¤cacheæ§åˆ¶ä½ */
bic x1, x1, #0x4            /* Cä½: æ•°æ®cacheç¦ç”¨ */
bic x1, x1, #0x1000         /* Iä½: æŒ‡ä»¤cacheç¦ç”¨ */
bic x1, x1, #0x1            /* Mä½: MMUç¦ç”¨ */
msr sctlr_el1, x1
isb                          /* æŒ‡ä»¤åŒæ­¥å±éšœ */
</code></pre>
<p>è¿™æ®µä»£ç é€šè¿‡è¯»å–ã€ä¿®æ”¹å’Œå†™å›SCTLR_EL1å¯„å­˜å™¨æ¥ç¦ç”¨MMUå’Œç¼“å­˜ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨å·²çŸ¥çŠ¶æ€ä¸‹è¿è¡Œã€‚</p>
<h3 data-id="heading-4">å¼‚å¸¸å‘é‡è¡¨è®¾ç½®</h3>
<p>AArch64æ¶æ„ä½¿ç”¨å¼‚å¸¸å‘é‡è¡¨æ¥å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µï¼ŒåŒ…æ‹¬ä¸­æ–­ã€ç³»ç»Ÿè°ƒç”¨ç­‰ï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">/* 2. åˆå§‹åŒ–å¼‚å¸¸ç›¸å…³å¯„å­˜å™¨ */
/* VBAR_EL1: å¼‚å¸¸å‘é‡åŸºåœ°å€ */
adrp x1, exception_vectors
msr vbar_el1, x1
</code></pre>
<p>è¿™é‡Œå°†å¼‚å¸¸å‘é‡è¡¨çš„åŸºåœ°å€è®¾ç½®åˆ°VBAR_EL1å¯„å­˜å™¨ä¸­ï¼Œä½¿å¾—å¤„ç†å™¨çŸ¥é“åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶åº”è¯¥è·³è½¬åˆ°å“ªé‡Œå¤„ç†ã€‚</p>
<h3 data-id="heading-5">æ ˆæŒ‡é’ˆåˆå§‹åŒ–</h3>
<p>åœ¨è¿›å…¥Rustä»£ç ä¹‹å‰ï¼Œéœ€è¦åˆå§‹åŒ–æ ˆæŒ‡é’ˆï¼Œå› ä¸ºRustä»£ç å¯èƒ½ä¼šä½¿ç”¨æ ˆï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">/* 3. åˆå§‹åŒ–æ ˆæŒ‡é’ˆ (kernel_stackå®šä¹‰åœ¨_linkerè„šæœ¬ä¸­)
 *    æ ˆä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ */
adrp x1, kernel_stack_top
add x1, x1, :lo12:kernel_stack_top
mov sp, x1
</code></pre>
<p>StarryOSä¸ºå†…æ ¸åˆ†é…äº†512KBçš„æ ˆç©ºé—´ï¼Œæ ˆæŒ‡é’ˆæŒ‡å‘æ ˆé¡¶ã€‚</p>
<h3 data-id="heading-6">BSSæ®µæ¸…é›¶</h3>
<p>BSSæ®µåŒ…å«æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶éœ€è¦å°†å…¶æ¸…é›¶ï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">/* 5. åˆå§‹åŒ–BSSæ®µ (æ¸…é›¶) */
adrp x1, __bss_start
add x1, x1, :lo12:__bss_start
adrp x2, __bss_end
add x2, x2, :lo12:__bss_end

.clear_bss:
    cmp x1, x2
    b.ge .bss_done
    str xzr, [x1], #8           /* å†™å…¥é›¶å€¼, å¹¶é€’å¢åœ°å€ */
    b .clear_bss

.bss_done:
</code></pre>
<p>è¿™æ®µä»£ç éå†æ•´ä¸ªBSSæ®µï¼Œå°†å…¶å†…å®¹æ¸…é›¶ã€‚</p>
<h3 data-id="heading-7">è·³è½¬åˆ°Rustä¸»ç¨‹åº</h3>
<p>å®Œæˆæ‰€æœ‰å¿…è¦çš„åˆå§‹åŒ–åï¼Œå¯åŠ¨ä»£ç ä¼šè·³è½¬åˆ°Rustä¸»ç¨‹åºï¼š</p>
<pre><code class="hljs language-assembly" lang="assembly">/* 6. è·³è½¬åˆ°Rustä¸»ç¨‹åº
 *    main(dtb_ptr: u64)
 *    x0 = DTBç‰©ç†åœ°å€ */
mov x0, x19                  /* æ¢å¤DTBæŒ‡é’ˆåˆ°x0 */

/* è°ƒç”¨Rustçš„mainå‡½æ•° */
adrp x1, main
add x1, x1, :lo12:main
blr x1
</code></pre>
<p>è¿™é‡Œå°†è®¾å¤‡æ ‘çš„ç‰©ç†åœ°å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™Rustçš„mainå‡½æ•°ï¼Œå¹¶é€šè¿‡BLRæŒ‡ä»¤è·³è½¬åˆ°Rustä»£ç ã€‚</p>
<h2 data-id="heading-8">å†…å­˜ç®¡ç†ç³»ç»Ÿè®¾è®¡</h2>
<h3 data-id="heading-9">é¡µè¡¨ç»“æ„</h3>
<p>StarryOS RK3588é‡‡ç”¨AArch64æ ‡å‡†çš„å››çº§é¡µè¡¨ç»“æ„ï¼š</p>
<ol>
<li><strong>L0 (PGD)</strong>: Page Global Directory</li>
<li><strong>L1 (PUD)</strong>: Page Upper Directory</li>
<li><strong>L2 (PMD)</strong>: Page Middle Directory</li>
<li><strong>L3 (PTE)</strong>: Page Table Entry</li>
</ol>
<p>è¿™ç§å››çº§ç»“æ„å¯ä»¥æ”¯æŒ48ä½è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè¶³ä»¥æ»¡è¶³å¤§å¤šæ•°åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-10">é¡µè¡¨é¡¹è®¾è®¡</h3>
<p>é¡µè¡¨é¡¹(PTE)çš„è®¾è®¡ç›´æ¥å½±å“å†…å­˜è®¿é—®çš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚StarryOS RK3588çš„PTEç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// é¡µè¡¨é¡¹ (Page Table Entry)</span>
<span class="hljs-meta">#[repr(transparent)]</span>
<span class="hljs-meta">#[derive(Clone, Copy)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Pte</span>(<span class="hljs-type">u64</span>);

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Pte</span> {
    <span class="hljs-comment">/// è¡¨é¡¹æœ‰æ•ˆæ ‡å¿—</span>
    <span class="hljs-keyword">const</span> VALID: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">/// è¡¨é¡¹ç±»å‹: 0=è¡¨, 1=å—/é¡µ</span>
    <span class="hljs-keyword">const</span> TYPE: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>;
    
    <span class="hljs-comment">/// è®¿é—®æƒé™ (AP)</span>
    <span class="hljs-keyword">const</span> AP_MASK: <span class="hljs-type">u64</span> = <span class="hljs-number">0x3</span> &lt;&lt; <span class="hljs-number">6</span>;
    <span class="hljs-keyword">const</span> AP_EL0_NONE: <span class="hljs-type">u64</span> = <span class="hljs-number">0</span> &lt;&lt; <span class="hljs-number">6</span>;      <span class="hljs-comment">// EL0æ— è®¿é—®æƒé™</span>
    <span class="hljs-keyword">const</span> AP_EL0_RW: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">6</span>;        <span class="hljs-comment">// EL0å¯è¯»å†™</span>
    <span class="hljs-keyword">const</span> AP_KERN_RO: <span class="hljs-type">u64</span> = <span class="hljs-number">2</span> &lt;&lt; <span class="hljs-number">6</span>;       <span class="hljs-comment">// å†…æ ¸åªè¯»</span>
    <span class="hljs-keyword">const</span> AP_KERN_RW: <span class="hljs-type">u64</span> = <span class="hljs-number">3</span> &lt;&lt; <span class="hljs-number">6</span>;       <span class="hljs-comment">// å†…æ ¸å¯è¯»å†™</span>
    
    <span class="hljs-comment">/// ç¼“å­˜ç­–ç•¥ (AttrIdx)</span>
    <span class="hljs-keyword">const</span> ATTR_IDX_MASK: <span class="hljs-type">u64</span> = <span class="hljs-number">0x7</span> &lt;&lt; <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> ATTR_DEVICE: <span class="hljs-type">u64</span> = <span class="hljs-number">0</span> &lt;&lt; <span class="hljs-number">2</span>;      <span class="hljs-comment">// è®¾å¤‡å†…å­˜ (MMIO)</span>
    <span class="hljs-keyword">const</span> ATTR_NORMAL: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>;      <span class="hljs-comment">// æ™®é€šå†…å­˜ (ç¼“å­˜)</span>
    <span class="hljs-keyword">const</span> ATTR_NORMAL_NC: <span class="hljs-type">u64</span> = <span class="hljs-number">2</span> &lt;&lt; <span class="hljs-number">2</span>;   <span class="hljs-comment">// æ™®é€šå†…å­˜ (éç¼“å­˜)</span>
    
    <span class="hljs-comment">/// è®¿é—®æ ‡å¿— (Access Flag)</span>
    <span class="hljs-keyword">const</span> AF: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">10</span>;
    
    <span class="hljs-comment">/// æ‰§è¡Œæƒé™ç¦ç”¨æ ‡å¿—</span>
    <span class="hljs-keyword">const</span> UXN: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">54</span>;             <span class="hljs-comment">// User eXecute Never</span>
    <span class="hljs-keyword">const</span> PXN: <span class="hljs-type">u64</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">53</span>;             <span class="hljs-comment">// Privileged eXecute Never</span>
}
</code></pre>
<h3 data-id="heading-11">å†…å­˜æ˜ å°„ç­–ç•¥</h3>
<p>StarryOS RK3588é‡‡ç”¨ä»¥ä¸‹å†…å­˜æ˜ å°„ç­–ç•¥ï¼š</p>
<ol>
<li><strong>DDRå†…å­˜</strong>: 1GB @ 0x0ï¼Œä½¿ç”¨ç¼“å­˜å±æ€§(NORMAL)</li>
<li><strong>MMIOåŒºåŸŸ</strong>: 256MB @ 0xfe000000ï¼Œä½¿ç”¨è®¾å¤‡å±æ€§(DEVICE)</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// åˆå§‹åŒ–é¡µè¡¨ç®¡ç†å™¨</span>
<span class="hljs-comment">/// </span>
<span class="hljs-comment">/// è®¾ç½®:</span>
<span class="hljs-comment">/// - DDRå†…å­˜: 1GB @ 0x0, ç¼“å­˜å¯ç”¨ (NORMAL)</span>
<span class="hljs-comment">/// - MMIOåŒºåŸŸ: 256MB @ 0xfe000000, éç¼“å­˜ (DEVICE)</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">init</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
    <span class="hljs-keyword">unsafe</span> {
        <span class="hljs-comment">// L0è¡¨ (PGD)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l0_addr</span> = <span class="hljs-number">0x1000</span> <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> PageTable;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l0</span> = &amp;<span class="hljs-keyword">mut</span> *l0_addr;
        *l0 = PageTable::<span class="hljs-title function_ invoke__">new</span>();
        
        <span class="hljs-comment">// L1è¡¨</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l1_addr</span> = <span class="hljs-number">0x2000</span> <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> PageTable;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l1</span> = &amp;<span class="hljs-keyword">mut</span> *l1_addr;
        *l1 = PageTable::<span class="hljs-title function_ invoke__">new</span>();
        
        <span class="hljs-comment">// L2è¡¨ (DDR: 1GB)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l2_addr</span> = <span class="hljs-number">0x3000</span> <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> PageTable;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l2</span> = &amp;<span class="hljs-keyword">mut</span> *l2_addr;
        *l2 = PageTable::<span class="hljs-title function_ invoke__">new</span>();
        
        <span class="hljs-comment">// L3è¡¨ (MMIO: 256MB)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l3_addr</span> = <span class="hljs-number">0x4000</span> <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> PageTable;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l3</span> = &amp;<span class="hljs-keyword">mut</span> *l3_addr;
        *l3 = PageTable::<span class="hljs-title function_ invoke__">new</span>();
        
        <span class="hljs-comment">// é…ç½®L0 -&gt; L1</span>
        l0.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-number">0</span>, Pte::<span class="hljs-title function_ invoke__">table</span>(l1_addr <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>));
        
        <span class="hljs-comment">// é…ç½®L1 -&gt; L2 (DDR)</span>
        l1.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-number">0</span>, Pte::<span class="hljs-title function_ invoke__">table</span>(l2_addr <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>));
        
        <span class="hljs-comment">// é…ç½®L2 -&gt; 1GBå— @ 0x0 (DDRå†…å­˜, ç¼“å­˜)</span>
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">512</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">phys_addr</span> = (i <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>) * <span class="hljs-number">0x200000</span>; <span class="hljs-comment">// 2MBå—</span>
            l2.<span class="hljs-title function_ invoke__">set</span>(i, Pte::<span class="hljs-title function_ invoke__">block</span>(phys_addr, Pte::ATTR_NORMAL, <span class="hljs-literal">true</span>));
        }
        
        <span class="hljs-comment">// é…ç½®L1 -&gt; L3 (MMIO)</span>
        l1.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-number">511</span>, Pte::<span class="hljs-title function_ invoke__">table</span>(l3_addr <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>)); <span class="hljs-comment">// é¡¶éƒ¨åœ°å€ç©ºé—´</span>
        
        <span class="hljs-comment">// é…ç½®L3 -&gt; 256MBå— @ 0xfe000000 (è®¾å¤‡å¯„å­˜å™¨, éç¼“å­˜)</span>
        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">512</span> {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">phys_addr</span> = <span class="hljs-number">0xfe000000</span> + ((i <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>) * <span class="hljs-number">0x200000</span>);
            l3.<span class="hljs-title function_ invoke__">set</span>(i, Pte::<span class="hljs-title function_ invoke__">block</span>(phys_addr, Pte::ATTR_DEVICE, <span class="hljs-literal">false</span>));
        }
        
        PageTableManager {
            l0,
        }
    }
}
</code></pre>
<h3 data-id="heading-12">MMUå¯ç”¨è¿‡ç¨‹</h3>
<p>MMUçš„å¯ç”¨æ¶‰åŠå¤šä¸ªå¯„å­˜å™¨çš„é…ç½®ï¼š</p>
<ol>
<li><strong>TTBR0_EL1</strong>: è®¾ç½®é¡µè¡¨åŸºåœ°å€</li>
<li><strong>TCR_EL1</strong>: é…ç½®è½¬æ¢æ§åˆ¶å‚æ•°</li>
<li><strong>MAIR_EL1</strong>: è®¾ç½®å†…å­˜å±æ€§</li>
<li><strong>SCTLR_EL1</strong>: å¯ç”¨MMU</li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/// å¯ç”¨MMU</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">enable</span>(&amp;<span class="hljs-keyword">self</span>) {
    <span class="hljs-keyword">unsafe</span> {
        <span class="hljs-comment">// 1. è®¾ç½®TTBR0_EL1 (è½¬æ¢è¡¨åŸºåœ°å€å¯„å­˜å™¨)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">l0_addr</span> = <span class="hljs-keyword">self</span>.l0 <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> _ <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>;
        asm!(<span class="hljs-string">"msr ttbr0_el1, {}"</span>, <span class="hljs-title function_ invoke__">in</span>(reg) l0_addr);
        
        <span class="hljs-comment">// 2. é…ç½®TCR_EL1 (è½¬æ¢æ§åˆ¶å¯„å­˜å™¨)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">tcr</span>: <span class="hljs-type">u64</span> = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">32</span>)     <span class="hljs-comment">// IPS=01 (40-bit)</span>
            | (<span class="hljs-number">0</span> &lt;&lt; <span class="hljs-number">14</span>)               <span class="hljs-comment">// TG0=00 (4KB)</span>
            | (<span class="hljs-number">3</span> &lt;&lt; <span class="hljs-number">12</span>)               <span class="hljs-comment">// SH0=11 (Inner shareable)</span>
            | (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">10</span>)               <span class="hljs-comment">// ORGN0=01 (Write-Back)</span>
            | (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">8</span>)                <span class="hljs-comment">// IRGN0=01 (Write-Back)</span>
            | (<span class="hljs-number">32</span>);                   <span class="hljs-comment">// T0SZ=32</span>
        
        asm!(<span class="hljs-string">"msr tcr_el1, {}"</span>, <span class="hljs-title function_ invoke__">in</span>(reg) tcr);
        
        <span class="hljs-comment">// 3. è®¾ç½®MAIR_EL1 (Memory Attribute Indirection Register)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mair</span>: <span class="hljs-type">u64</span> = <span class="hljs-number">0x00FF4400u64</span>;
        asm!(<span class="hljs-string">"msr mair_el1, {}"</span>, <span class="hljs-title function_ invoke__">in</span>(reg) mair);
        
        <span class="hljs-comment">// 4. å¯èƒ½MMU (SCTLR_EL1.M=1)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sctlr</span>: <span class="hljs-type">u64</span>;
        asm!(<span class="hljs-string">"mrs {}, sctlr_el1"</span>, <span class="hljs-title function_ invoke__">out</span>(reg) sctlr);
        sctlr |= <span class="hljs-number">1</span>;  <span class="hljs-comment">// Mä½</span>
        sctlr |= <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>;  <span class="hljs-comment">// Cä½ (æ•°æ®ç¼“å­˜)</span>
        sctlr |= <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">12</span>; <span class="hljs-comment">// Iä½ (æŒ‡ä»¤ç¼“å­˜)</span>
        asm!(<span class="hljs-string">"msr sctlr_el1, {}"</span>, <span class="hljs-title function_ invoke__">in</span>(reg) sctlr);
        
        <span class="hljs-comment">// æŒ‡ä»¤åŒæ­¥å±éšœ</span>
        asm!(<span class="hljs-string">"isb"</span>);
    }
}
</code></pre>
<h2 data-id="heading-13">æ€§èƒ½ä¼˜åŒ–è€ƒè™‘</h2>
<h3 data-id="heading-14">é¡µè¡¨ç¼“å­˜å‹å¥½çš„è®¾è®¡</h3>
<p>ä¸ºäº†æé«˜é¡µè¡¨æŸ¥æ‰¾çš„æ€§èƒ½ï¼ŒStarryOS RK3588åœ¨è®¾è®¡æ—¶è€ƒè™‘äº†ç¼“å­˜å‹å¥½çš„å› ç´ ï¼š</p>
<ol>
<li><strong>é¡µè¡¨å¯¹é½</strong>: æ‰€æœ‰é¡µè¡¨éƒ½æŒ‰4KBè¾¹ç•Œå¯¹é½ï¼Œç¬¦åˆç¼“å­˜è¡Œå¤§å°</li>
<li><strong>è¿ç»­å†…å­˜åˆ†é…</strong>: é¡µè¡¨åœ¨ç‰©ç†å†…å­˜ä¸­è¿ç»­åˆ†é…ï¼Œå‡å°‘TLB miss</li>
<li><strong>åˆç†æ˜ å°„ç²’åº¦</strong>: ä½¿ç”¨2MBçš„å¤§é¡µæ˜ å°„DDRå†…å­˜ï¼Œå‡å°‘é¡µè¡¨å±‚çº§</li>
</ol>
<h3 data-id="heading-15">å†…å­˜å±æ€§ä¼˜åŒ–</h3>
<p>ä¸åŒçš„å†…å­˜åŒºåŸŸä½¿ç”¨ä¸åŒçš„ç¼“å­˜å±æ€§ï¼š</p>
<ol>
<li><strong>æ™®é€šå†…å­˜(NORMAL)</strong>: DDRå†…å­˜ä½¿ç”¨å†™å›ç¼“å­˜ï¼Œæé«˜è®¿é—®æ€§èƒ½</li>
<li><strong>è®¾å¤‡å†…å­˜(DEVICE)</strong>: MMIOåŒºåŸŸç¦ç”¨ç¼“å­˜ï¼Œç¡®ä¿å†…å­˜è®¿é—®çš„é¡ºåºæ€§</li>
</ol>
<h2 data-id="heading-16">å®‰å…¨æ€§è€ƒè™‘</h2>
<h3 data-id="heading-17">å†…å­˜ä¿æŠ¤</h3>
<p>é€šè¿‡é¡µè¡¨é¡¹çš„è®¿é—®æƒé™æ§åˆ¶ï¼ŒStarryOS RK3588å®ç°äº†åŸºæœ¬çš„å†…å­˜ä¿æŠ¤ï¼š</p>
<ol>
<li><strong>å†…æ ¸åªè¯»åŒºåŸŸ</strong>: é‡è¦çš„ä»£ç å’Œæ•°æ®åŒºåŸŸè®¾ç½®ä¸ºåªè¯»</li>
<li><strong>æ‰§è¡Œæƒé™æ§åˆ¶</strong>: é€šè¿‡PXNå’ŒUXNä½æ§åˆ¶ä»£ç æ‰§è¡Œæƒé™</li>
<li><strong>ç”¨æˆ·ç©ºé—´éš”ç¦»</strong>: ä¸ºæœªæ¥çš„ç”¨æˆ·ç©ºé—´è¿›ç¨‹æä¾›éš”ç¦»æœºåˆ¶</li>
</ol>
<h3 data-id="heading-18">åœ°å€ç©ºé—´å¸ƒå±€</h3>
<p>åˆç†çš„åœ°å€ç©ºé—´å¸ƒå±€æœ‰åŠ©äºæé«˜ç³»ç»Ÿå®‰å…¨æ€§ï¼š</p>
<ol>
<li><strong>å†…æ ¸ç©ºé—´</strong>: å›ºå®šåœ¨ä½åœ°å€åŒºåŸŸ</li>
<li><strong>è®¾å¤‡ç©ºé—´</strong>: æ˜ å°„åœ¨é«˜åœ°å€åŒºåŸŸ</li>
<li><strong>ç”¨æˆ·ç©ºé—´</strong>: æœªæ¥å¯æ˜ å°„åœ¨ä¸­é—´åŒºåŸŸ</li>
</ol>
<h2 data-id="heading-19">è°ƒè¯•ä¸éªŒè¯</h2>
<h3 data-id="heading-20">å¯åŠ¨æ—¥å¿—</h3>
<p>StarryOS RK3588åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">StarryOS</span>] Booting...
[<span class="hljs-meta">StarryOS</span>] Initializing memory management...
[<span class="hljs-meta">StarryOS</span>] MMU enabled
[<span class="hljs-meta">StarryOS</span>] Initializing GIC<span class="hljs-number">-500.</span>..
[<span class="hljs-meta">StarryOS</span>] GIC initialized <span class="hljs-keyword">for</span> CPU <span class="hljs-number">0</span>
[<span class="hljs-meta">StarryOS</span>] Parsing device tree...
[<span class="hljs-meta">StarryOS</span>] Device tree parsed successfully
</code></pre>
<p>è¿™äº›æ—¥å¿—æœ‰åŠ©äºå¼€å‘è€…äº†è§£ç³»ç»Ÿå¯åŠ¨çš„è¿›åº¦å’ŒçŠ¶æ€ã€‚</p>
<h3 data-id="heading-21">QEMUä»¿çœŸéªŒè¯</h3>
<p>StarryOS RK3588å¯ä»¥åœ¨QEMUä¸­è¿›è¡Œä»¿çœŸéªŒè¯ï¼Œç¡®ä¿å¯åŠ¨ä»£ç çš„æ­£ç¡®æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨QEMUæ¨¡æ‹Ÿå™¨</span>
qemu-system-aarch64 \
  -machine virt \
  -cpu cortex-a76 \
  -kernel target/aarch64-unknown-none-elf/release/starryos \
  -serial stdio
</code></pre>
<h2 data-id="heading-22">æ€»ç»“</h2>
<p>AArch64è£¸æœºå¯åŠ¨å’Œå†…å­˜ç®¡ç†æ˜¯StarryOS RK3588ç³»ç»Ÿçš„åŸºç¡€ï¼Œå®ƒä»¬ä¸ºåç»­çš„æ‰€æœ‰åŠŸèƒ½æä¾›äº†è¿è¡Œç¯å¢ƒã€‚é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„å¯åŠ¨æµç¨‹å’Œå†…å­˜ç®¡ç†ç³»ç»Ÿï¼ŒStarryOS RK3588å®ç°äº†ï¼š</p>
<ol>
<li><strong>å¯é çš„å¯åŠ¨</strong>: ç¡®ä¿ç³»ç»Ÿåœ¨å·²çŸ¥çŠ¶æ€ä¸‹å¯åŠ¨</li>
<li><strong>é«˜æ•ˆçš„å†…å­˜è®¿é—®</strong>: é€šè¿‡åˆç†çš„é¡µè¡¨è®¾è®¡å’Œç¼“å­˜ç­–ç•¥æé«˜æ€§èƒ½</li>
<li><strong>åŸºæœ¬çš„å®‰å…¨ä¿æŠ¤</strong>: é€šè¿‡å†…å­˜ä¿æŠ¤æœºåˆ¶æä¾›åŸºç¡€å®‰å…¨ä¿éšœ</li>
<li><strong>è‰¯å¥½çš„å¯è°ƒè¯•æ€§</strong>: è¯¦ç»†çš„å¯åŠ¨æ—¥å¿—å’ŒQEMUä»¿çœŸæ”¯æŒ</li>
</ol>
<p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œå°†æ¢è®¨StarryOS RK3588çš„ä¸­æ–­ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬GIC-500æ§åˆ¶å™¨çš„é…ç½®å’Œå¤šæ ¸è°ƒåº¦æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªè¢«ä½ä¼°çš„V8å¼•æ“æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%]]></title>    <link>https://juejin.cn/post/7585097023747915791</link>    <guid>https://juejin.cn/post/7585097023747915791</guid>    <pubDate>2025-12-19T04:16:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585097023747915791" data-draft-id="7585130590291656719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªè¢«ä½ä¼°çš„V8å¼•æ“æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-19T04:16:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªè¢«ä½ä¼°çš„V8å¼•æ“æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T04:16:53.000Z" title="Fri Dec 19 2025 04:16:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š5ä¸ªè¢«ä½ä¼°çš„V8å¼•æ“æŠ€å·§è®©ä½ çš„ä»£ç æé€Ÿ50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼ŒJavaScriptçš„æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚éšç€V8å¼•æ“çš„ä¸æ–­è¿›åŒ–ï¼Œè®¸å¤šå¼€å‘è€…å¯èƒ½å¹¶æœªå……åˆ†æŒ–æ˜å…¶æ½œåŠ›ã€‚V8ä½œä¸ºChromeå’ŒNode.jsçš„æ ¸å¿ƒå¼•æ“ï¼Œé€šè¿‡å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ã€éšè—ç±»ï¼ˆHidden Classesï¼‰ã€å†…è”ç¼“å­˜ï¼ˆInline Cachingï¼‰ç­‰æŠ€æœ¯å¤§å¹…æå‡äº†JavaScriptçš„æ‰§è¡Œæ•ˆç‡ã€‚ç„¶è€Œï¼Œè®¸å¤šä¼˜åŒ–æŠ€å·§ä»è¢«ä½ä¼°æˆ–å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªé²œä¸ºäººçŸ¥çš„V8å¼•æ“æŠ€å·§ï¼Œå¸®åŠ©ä½ å°†ä»£ç æ€§èƒ½æå‡é«˜è¾¾50%ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <strong>åˆ©ç”¨éšè—ç±»ï¼ˆHidden Classesï¼‰é¿å…åŠ¨æ€å±æ€§åˆ†é…</strong></h3>
<p>V8é€šè¿‡éšè—ç±»æ¥ä¼˜åŒ–å¯¹è±¡å±æ€§è®¿é—®ã€‚å½“å¯¹è±¡çš„ç»“æ„ï¼ˆå³å±æ€§çš„é¡ºåºå’Œç±»å‹ï¼‰é¢‘ç¹å˜åŒ–æ—¶ï¼ŒV8ä¼šåˆ›å»ºå¤šä¸ªéšè—ç±»ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åä¾‹ï¼šåŠ¨æ€æ·»åŠ å±æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = {};
  user.<span class="hljs-property">name</span> = <span class="hljs-string">"John"</span>;
  user.<span class="hljs-property">age</span> = <span class="hljs-number">30</span>; <span class="hljs-comment">// V8ä¼šä¸ºæ¯æ¬¡å±æ€§æ·»åŠ åˆ›å»ºæ–°çš„éšè—ç±»</span>
  <span class="hljs-keyword">return</span> user;
}

<span class="hljs-comment">// æ­£ä¾‹ï¼šä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createUserOptimized</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"John"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }; <span class="hljs-comment">// V8åªéœ€åˆ›å»ºä¸€ä¸ªéšè—ç±»</span>
  <span class="hljs-keyword">return</span> user;
}
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>å°½é‡åœ¨å¯¹è±¡æ„é€ æ—¶ä¸€æ¬¡æ€§å®šä¹‰æ‰€æœ‰å±æ€§ã€‚</li>
<li>é¿å…åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ é™¤æˆ–é‡æ–°æ’åºå±æ€§ã€‚</li>
</ul>
<h3 data-id="heading-4">2. <strong>é¿å…æ•°å­—ç±»å‹çš„é¢‘ç¹åˆ‡æ¢ï¼ˆSmi vs. Heap Numberï¼‰</strong></h3>
<p>V8å¯¹æ•°å­—æœ‰ä¸¤ç§å†…éƒ¨è¡¨ç¤ºå½¢å¼ï¼š</p>
<ul>
<li><strong>Smi</strong>ï¼ˆSmall Integerï¼‰ï¼š31ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œç›´æ¥å­˜å‚¨åœ¨å¯¹è±¡ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ã€‚</li>
<li><strong>Heap Number</strong>ï¼šåŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå­˜å‚¨åœ¨å †ä¸­ï¼Œè®¿é—®è¾ƒæ…¢ã€‚</li>
</ul>
<p>é¢‘ç¹åˆ‡æ¢è¿™ä¸¤ç§ç±»å‹ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// Smi</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1e6</span>; i++) {
  count += i; <span class="hljs-comment">// ä¿æŒSmiç±»å‹</span>
}

<span class="hljs-keyword">let</span> floatCount = <span class="hljs-number">0.1</span>; <span class="hljs-comment">// Heap Number</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1e6</span>; i++) {
  floatCount += i; <span class="hljs-comment">// V8éœ€è¦åå¤åˆ‡æ¢ç±»å‹</span>
}
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>åœ¨å¯†é›†è®¡ç®—ä¸­å°½é‡ä½¿ç”¨æ•´æ•°ï¼ˆSmiï¼‰ã€‚</li>
<li>é¿å…æ··åˆæ•´æ•°å’Œæµ®ç‚¹è¿ç®—ã€‚</li>
</ul>
<h3 data-id="heading-5">3. <strong>åˆ©ç”¨å†…è”ç¼“å­˜ï¼ˆInline Cachingï¼‰ä¼˜åŒ–å‡½æ•°è°ƒç”¨</strong></h3>
<p>V8é€šè¿‡å†…è”ç¼“å­˜è®°å½•å‡½æ•°è°ƒç”¨ç‚¹çš„ç±»å‹ä¿¡æ¯ï¼ŒåŠ é€Ÿåç»­è°ƒç”¨ã€‚å¦‚æœå‡½æ•°å‚æ•°ç±»å‹ä¸ç¨³å®šï¼Œä¼šå¯¼è‡´ç¼“å­˜å¤±æ•ˆï¼ˆMegamorphicçŠ¶æ€ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åä¾‹ï¼šå¤šæ€å‚æ•°å¯¼è‡´å†…è”ç¼“å­˜å¤±æ•ˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);       <span class="hljs-comment">// ICè®°å½•Numberç±»å‹</span>
<span class="hljs-title function_">add</span>(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>);   <span class="hljs-comment">// ICå¤±æ•ˆï¼Œé‡æ–°å­¦ä¹ Stringç±»å‹</span>

<span class="hljs-comment">// æ­£ä¾‹ï¼šä¿æŒå‚æ•°ç±»å‹ä¸€è‡´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addNumbers</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-title function_">addNumbers</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// ICå§‹ç»ˆæœ‰æ•ˆ</span>
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿é«˜é¢‘è°ƒç”¨çš„å‡½æ•°å‚æ•°ç±»å‹ç¨³å®šã€‚</li>
<li>é¿å…åœ¨çƒ­ä»£ç è·¯å¾„ä¸­ä½¿ç”¨<code>arguments</code>æˆ–åŠ¨æ€å‚æ•°ã€‚</li>
</ul>
<p>###4. <strong>è°¨æ…ä½¿ç”¨<code>try-catch</code>å’Œ<code>with</code>è¯­å¥</strong></p>
<p>V8ä¼šå¯¹åŒ…å«<code>try-catch</code>æˆ–<code>with</code>çš„å‡½æ•°ç¦ç”¨æŸäº›ä¼˜åŒ–ï¼ˆå¦‚å‡½æ•°å†…è”ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// try-catchå½±å“æ€§èƒ½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">riskyOperation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ...å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„æ“ä½œ...</span>
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);
    }
}

<span class="hljs-comment">// Node.jsä¸­æ›´é«˜æ•ˆçš„é”™è¯¯å¤„ç†æ–¹å¼ï¼š</span>
<span class="hljs-keyword">if</span> (errorProneCondition) {
    process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"..."</span>); });
}
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>å°†<code>try-catch</code>ç§»è‡³å¤–å±‚æˆ–éå…³é”®è·¯å¾„ã€‚</li>
<li>å®Œå…¨é¿å…ä½¿ç”¨<code>with</code>è¯­å¥ï¼ˆå·²åºŸå¼ƒï¼‰ã€‚</li>
</ul>
<p>###5. <strong>é¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼å¹¶åˆ©ç”¨æŒä¹…åŒ–åŒ¹é…çŠ¶æ€</strong></p>
<p>æ­£åˆ™è¡¨è¾¾å¼åœ¨V8ä¸­ä¼šè¢«ç¼–è¯‘ä¸ºåŸç”Ÿä»£ç ï¼Œä½†é‡å¤ç¼–è¯‘ä¼šæ‹–æ…¢æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//  åä¾‹ï¼šæ¯æ¬¡å¾ªç¯é‡æ–°ç¼–è¯‘æ­£åˆ™ </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i =  <span class="hljs-number">0</span> ; i &lt;  <span class="hljs-number">1000</span> ; i++) { 
    <span class="hljs-regexp">/test(\d+)/</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-string">"test123"</span>); 
} 

<span class="hljs-comment">//  æ­£ä¾‹ï¼šé¢„ç¼–è¯‘æ­£åˆ™ </span>
<span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/test(\d+)/</span>; 
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i =  <span class="hljs-number">0</span> ; i &lt;  <span class="hljs-number">1000</span> ; i++) { 
    regex.<span class="hljs-title function_">exec</span>(<span class="hljs-string">"test123"</span>); 
} 

<span class="hljs-comment">//  è¿›é˜¶æŠ€å·§ï¼šå¤ç”¨RegExpå®ä¾‹çš„lastIndex </span>
<span class="hljs-keyword">const</span> globalRegex = <span class="hljs-regexp">/test(\d+)/g</span>; 
globalRegex.<span class="hljs-property">lastIndex</span> =  <span class="hljs-number">0</span> ; <span class="hljs-comment">//  æ˜¾å¼é‡ç½®ä½ç½® </span>
<span class="hljs-keyword">while</span> ((match = globalRegex.<span class="hljs-title function_">exec</span>(input)) !== <span class="hljs-literal">null</span>) { ... }
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡æ·±å…¥ç†è§£V8çš„å·¥ä½œåŸç†å¹¶è°ƒæ•´ç¼–ç ä¹ æƒ¯ â€”â€”ä»å¯¹è±¡æ„é€ ã€æ•°å­—å¤„ç†åˆ°å‡½æ•°è®¾è®¡â€”â€”å¼€å‘è€…å¯ä»¥æ˜¾è‘—æå‡JavaScriptçš„æ‰§è¡Œæ•ˆç‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ruoyi-vue2é›†æˆflowable6.7.2åç«¯ç¯‡]]></title>    <link>https://juejin.cn/post/7585091990347481124</link>    <guid>https://juejin.cn/post/7585091990347481124</guid>    <pubDate>2025-12-19T04:29:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585091990347481124" data-draft-id="7585206549285191721" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ruoyi-vue2é›†æˆflowable6.7.2åç«¯ç¯‡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T04:29:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç æ¬¡ä½é¢"/> <meta itemprop="url" content="https://juejin.cn/user/1535333867720295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ruoyi-vue2é›†æˆflowable6.7.2åç«¯ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1535333867720295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç æ¬¡ä½é¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T04:29:19.000Z" title="Fri Dec 19 2025 04:29:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ruoyiåœ¨ä¸­å›½å¸‚åœºæœ‰ç€å¹¿æ³›çš„ç¾¤ä¼—åŸºç¡€ï¼Œ flowableä¹Ÿåœ¨å¾ˆå¤šä¼ä¸šè½åœ°ã€‚ æœ¬æ–‡å°†è®²è§£å¦‚ä½•åœ¨ruoyié›†æˆflowableï¼Œä¸»è¦æ˜¯åç«¯ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ç¯å¢ƒè¯´æ˜</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f7eb740380243cc89c0ffc7217f342f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766723359&amp;x-signature=8CVPOphMG09Ec6nR%2F3%2Fnz7DyhZw%3D" alt="image.png" loading="lazy"/></p>
<p>ruoyi: Ruoyi-Vue2-Boot-2.x, <br/>
ç‰ˆæœ¬ä¿¡æ¯: 3.9.0<br/>
jdk: 1.8<br/>
flowable: 6.7.2<br/></p>
<h2 data-id="heading-1">å®‰è£…æ­¥éª¤</h2>
<ul>
<li>åœ¨IDEAå·¥å…·å¯¼å…¥é¡¹ç›®ï¼Œ åœ¨é¡¹ç›®åç§°ä¸Šï¼Œ å³é”®ç‚¹å‡»é€‰æ‹©Module, åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—ã€‚ruoyi-flowable</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a08a259b940c434abb1db5b9af5f664a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766723359&amp;x-signature=oC6HGEvvPjTjRtxLftocji%2Bvyhk%3D" alt="r2.png" loading="lazy"/></p>
<ul>
<li>mavené…ç½®
åœ¨ruoyié¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰¾åˆ°pom.xmlæ–‡ä»¶ï¼Œ æ·»åŠ flowableä¾èµ–</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">flowable.spring-boot.version</span>&gt;</span>6.7.2<span class="hljs-tag">&lt;/<span class="hljs-name">flowable.spring-boot.version</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å¿½ç•¥å…¶ä»–--&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>


 <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
       <span class="hljs-comment">&lt;!--å¿½ç•¥å…¶ä»–--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.flowable<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flowable-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${flowable.spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span> 
</code></pre>
<p>åœ¨ruoyi-flowableæ¨¡å—ä¸‹çš„æ ¹ç›®å½•pom.xmlæ–‡ä»¶åŠ å…¥ä»¥ä¸‹ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- swagger3--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!--common--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ruoyi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ruoyi-common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.40<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.40<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.flowable<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>flowable-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>ç»§ç»­åœ¨æ ¹pom.xmlä¸‹ï¼ŒåŠ å…¥ruoyi-flowableï¼Œä¸ruoyi-commonåœ¨åŒä¸€ä¸ªä½ç½®ã€‚è¿™ä¸€æ­¥å°±æ˜¯å°†æ–°å¢æ¨¡å—åµŒå…¥äº†ç³»ç»Ÿå½“ä¸­!!!</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ruoyi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ruoyi-flowable<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${ruoyi.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨ruoyi-adminæ¨¡å—ä¸‹åŠ å…¥ruoyi-flowableæ¨¡å—</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä»£ç ç”Ÿæˆ--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ruoyi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ruoyi-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-comment">&lt;!-- flowable--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ruoyi<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ruoyi-flowable<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">é…ç½®application.yml</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">flowable:</span>
  <span class="hljs-comment">#å…³é—­å®šæ—¶ä»»åŠ¡JOB</span>
  <span class="hljs-attr">async-executor-activate:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment">#å°†databaseSchemaUpdateè®¾ç½®ä¸ºtrueã€‚å½“flowableå‘ç°åº“ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸ä¸€è‡´æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨ç»“æ„å‡çº§è‡³æ–°ç‰ˆæœ¬ã€‚</span>
  <span class="hljs-attr">database-schema-update:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># è‡ªåŠ¨éƒ¨ç½²éªŒè¯è®¾ç½®:true-å¼€å¯ï¼ˆé»˜è®¤ï¼‰ã€false-å…³é—­</span>
  <span class="hljs-attr">check-process-definitions:</span> <span class="hljs-literal">false</span>
  <span class="hljs-comment">#ä¿å­˜å†å²æ•°æ®çº§åˆ«è®¾ç½®ä¸ºfullæœ€é«˜çº§åˆ«ï¼Œä¾¿äºå†å²æ•°æ®çš„è¿½æº¯</span>
  <span class="hljs-attr">history-level:</span> <span class="hljs-string">full</span>
</code></pre>
<ul>
<li>åœ¨application-druid.ymlåœ¨urlæ·»åŠ nullCatalogMeansCurrent=true</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://&lt;host&gt;:&lt;port&gt;/&lt;db&gt;?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8&amp;nullCatalogMeansCurrent=true</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">&lt;your_user&gt;</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">&lt;your_pass&gt;</span>

</code></pre>
<h2 data-id="heading-3">éªŒè¯Swaggeræ˜¯å¦åŠ è½½</h2>
<p>éšä¾¿åœ¨ruoyi-flowableå†™ä¸€ä¸ªcontrollerï¼ŒéªŒè¯èƒ½å¦åŠ è½½æˆåŠŸï¼</p>
<pre><code class="hljs language-bash" lang="bash">http://localhost:8080/swagger-ui/index.html
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c46309c681274af8879cb314029b1bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766723359&amp;x-signature=pD8DmGgHkvIvozBbB2K1X6MSBqw%3D" alt="r3.png" loading="lazy"/></p>
<h2 data-id="heading-4">è‹¥ä¾å·¥ä½œæµ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96df552a271e405688e2ae734a1be3a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Luj56CB5qyh5L2N6Z2i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766723359&amp;x-signature=%2BgdiDGiNGHx%2BktS1fi4XfgELDhI%3D" alt="r4.png" loading="lazy"/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ruoyiflow.com" target="_blank" title="https://www.ruoyiflow.com" ref="nofollow noopener noreferrer">è‹¥ä¾å·¥ä½œæµ</a> æä¾›å¼€ç®±å³ç”¨çš„å·¥ä½œæµæºç è§£å†³æ–¹æ¡ˆï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å‘¨åšäº†ä¸ªæ–‡ç« æ’ç‰ˆå·¥å…·ï¼Œåˆ†äº«ä¸‹å¦‚ä½•é«˜æ•ˆçœé’±ç”¨AIï¼]]></title>    <link>https://juejin.cn/post/7585406229150253094</link>    <guid>https://juejin.cn/post/7585406229150253094</guid>    <pubDate>2025-12-19T04:47:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585406229150253094" data-draft-id="7585289701793464346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å‘¨åšäº†ä¸ªæ–‡ç« æ’ç‰ˆå·¥å…·ï¼Œåˆ†äº«ä¸‹å¦‚ä½•é«˜æ•ˆçœé’±ç”¨AIï¼"/> <meta itemprop="keywords" content="äº§å“,AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2025-12-19T04:47:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸Šç­å¤šå–çƒ­æ°´"/> <meta itemprop="url" content="https://juejin.cn/user/2586468969632445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å‘¨åšäº†ä¸ªæ–‡ç« æ’ç‰ˆå·¥å…·ï¼Œåˆ†äº«ä¸‹å¦‚ä½•é«˜æ•ˆçœé’±ç”¨AIï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2586468969632445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸Šç­å¤šå–çƒ­æ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T04:47:32.000Z" title="Fri Dec 19 2025 04:47:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½æˆ‘æ˜¯å¤šå–çƒ­æ°´ï¼</p>
<p>æœ€è¿‘èŠ±ä¸€å‘¨æ—¶é—´ç”¨ AI å†™äº†ä¸ªå…¬ä¼—å·æ–‡ç« ã€å›¾æ–‡å¡ç‰‡è‡ªåŠ¨æ’ç‰ˆå·¥å…·ï¼</p>
<p>å¦‚å›¾ï¼Œæ•ˆæœè¿˜ä¸é”™å¯¹å§ï¼Œæ„Ÿå…´è¶£å¯ä»¥åœ¨è¿™é‡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fniubi.codecvcv.com" target="_blank" title="https://niubi.codecvcv.com" ref="nofollow noopener noreferrer">ä½“éªŒä¸€ä¸‹</a>ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bee092b98625463091aa467c91d4c0e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK54-t5aSa5Zad54Ot5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766724451&amp;x-signature=yIqWdTsz%2FEC%2F%2F90cfRfKobmAFHk%3D" alt="ç‰›ç¬”AI - å…¬ä¼—å·æ’ç‰ˆåŠ©æ‰‹_å›¾æ–‡å¡ç‰‡ä¸€é”®ç”Ÿæˆ" loading="lazy"/></p>
<p>ç„¶åç®€å•è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆå»åšå®ƒï¼Ÿ</p>
<p>ä¸»è¦æ˜¯æºäºæˆ‘è‡ªå·±çš„ä¸€äº›éœ€æ±‚ï¼Œæˆ‘è‡ªå·±å¹³æ—¶ä¼šå†™ä¸€äº›æ–‡ç« ï¼Œæœ‰çš„éœ€è¦åšæˆå›¾æ–‡å¡ç‰‡ï¼Œå‘å¸ƒåœ¨æŸä¹¦ã€æœ‰çš„éœ€è¦åšæˆæ–‡å­—å†…å®¹å‘å¸ƒåœ¨å…¬ä¼—å·å’Œå…¶ä»–å¹³å°ï¼Œéœ€è¦åœ¨å„ä¸ªå¹³å°è·‘ï¼Œå¾ˆæ˜¯éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘æƒ³æŠŠä»–ä»¬æ•´åˆä¸€ä¸‹ï¼Œå†™ä¸€ç¯‡æ–‡ç« å°±æå®šè¿™äº›ç´ æï¼</p>
<p>è¯´å¹²å°±å¹²ï¼æœ€ç»ˆèŠ±è´¹ä¸€å‘¨æ—¶é—´ï¼Œå°±æŠŠå®ƒè‚å‡ºæ¥äº†ï¼ŒåŒ…æ‹¬å‰ç«¯é¡µé¢å¼€å‘å’Œåç«¯æ¥å£ç¼–å†™ï¼Œè¿™æ¢åœ¨ä»¥å‰çœŸæ˜¯æƒ³éƒ½ä¸æ•¢æƒ³ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f00af2ff4a04536b452a73f3f9909e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK54-t5aSa5Zad54Ot5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766724451&amp;x-signature=3C%2BGL%2FxQHJG2mPNHGOmoUKgEGKY%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥åˆ†äº«ä¸€äº›æˆ‘è‡ªå·±ä½¿ç”¨ AI ç¼–ç¨‹çš„ç»éªŒã€‚</p>
<h2 data-id="heading-0">å¦‚ä½•é«˜æ•ˆåˆçœé’±åœ°ç”¨AIï¼Ÿ</h2>
<h3 data-id="heading-1">AI Coding çš„é€‰æ‹©</h3>
<p>æˆ‘ç”¨è¿‡å¾ˆå¤š AI Coding å·¥å…·ï¼Œä½† Cursor ç»™æˆ‘çš„ä½“éªŒè¿˜æ˜¯æœ€å¥½çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æˆ‘çš„ä¸»åŠ›ç¼–è¾‘å™¨ï¼</p>
<p>å‰æ®µæ—¶é—´ Gemini3 å‘å¸ƒçš„æ—¶å€™ï¼ŒGoolge ä¹Ÿæ¨äº†ä¸€ä¸ª AI Coding ç¼–è¾‘å™¨ Antigravityï¼Œè™½ç„¶èƒ½å…è´¹ä½¿ç”¨ Gemini3 å’Œ Claude4.5 çš„ï¼Œä½†è¯´å®è¯æˆ‘ä½“éªŒä¸‹æ¥æ˜¯ä¸å¦‚ Cursor çš„ï¼Œè™½ç„¶ä½¿ç”¨çš„æ¨¡å‹ä¸€æ ·ï¼Œä½†æ˜¯æ•ˆæœå°±æ˜¯æ²¡æœ‰ Cursor é‚£ä¹ˆå¥½ï¼ŒCursor ä¾ç„¶æ˜¯ AI Coding é¢†åŸŸçš„å¤§å“¥ï¼</p>
<h3 data-id="heading-2">å†™ä»£ç å‰å…ˆè®© AI æ˜ç¡®éœ€æ±‚</h3>
<p>è¿™ä¸€æ­¥æˆ‘è®¤ä¸ºæ˜¯å¿…é¡»åšçš„ï¼Œåšå¥½äº†å¯ä»¥è®© AI å†™çš„ä»£ç ä¸€æ­¥åˆ°ä½ï¼ä½ éœ€è¦å……å½“çš„å°±æ˜¯ä¸€ä¸ªäº§å“ç»ç†çš„è§’è‰²ï¼ŒæŠŠä½ æƒ³è¦çš„åŠŸèƒ½æè¿°æ¸…æ¥šã€‚</p>
<p>è¿™é‡Œå¯ä»¥ä½¿ç”¨ Cursor çš„ plan æ¨¡å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ca197ce2bec4abbaa899499ce84cf55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK54-t5aSa5Zad54Ot5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766724451&amp;x-signature=Aacc8vajLf1HlsjY2kp42ta7E9k%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœæœ‰ä¸æ‡‚çš„å®ƒè¿˜ä¼šç»§ç»­è¿½é—®ä½ ï¼Œå‘ä½ ç¡®è®¤æœ€ç»ˆçš„å®ç°æ–¹æ¡ˆï¼</p>
<p>è¿™æ · AI å†™å‡ºæ¥çš„ä»£ç ï¼Œ90% æ˜¯ç¬¦åˆè‡ªå·±çš„é¢„æœŸçš„ï¼Œå¦‚æœè¿™ä¸€æ­¥ä½ æ‡’å¾—å†™ï¼Œå¯èƒ½åç»­ä¿®ä¿®è¡¥è¡¥çš„èŠ±è´¹çš„ tokens æ›´å¤šï¼</p>
<h3 data-id="heading-3">å‹¤å¼€ä¼šè¯</h3>
<p>å½“æˆ‘ä»¬åšå®Œäº†ä¸€ä¸ªåŠŸèƒ½åï¼Œå¯ä»¥æ–°å¼€ä¸€ä¸ªä¼šè¯æ¥åšä¸‹ä¸€ä¸ªéœ€æ±‚ã€‚å¦‚æœä½ ä¸€ç›´åœ¨ä¸€ä¸ªä¼šè¯ä¸­å»å¼€å‘ï¼Œé‚£ tokens çˆ†ç‚¸ä¸è¯´ï¼Œè¿˜ä¼šç‰¹åˆ«æ…¢ï¼Œé’±åŒ…å±ã€‚</p>
<h3 data-id="heading-4">ä¸Šä¸‹æ–‡å‹ç¼©</h3>
<p>å¦‚æœä½ çœŸçš„æ”¹äº†å¾ˆä¹…éƒ½æ²¡æœ‰è¾¾åˆ°è‡ªå·±æƒ³è¦çš„æ•ˆæœï¼Œåˆä¸æƒ³æ–°å¼€ä¼šè¯é‡æ–°æè¿°éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ /summarize å‘½ä»¤æ¥å‹ç¼©ä¸Šä¸‹æ–‡ï¼ŒæŠŠä¸€äº›æ— å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯éƒ½å‰”é™¤ï¼Œéå¸¸ç®¡ç”¨ï¼Œä¸€èˆ¬æˆ‘åˆ° 30% å·¦å³ä¸Šä¸‹æ–‡çš„æ—¶å€™å°±ä¼šå‹ç¼©ä¸€æ¬¡ï¼š</p>
<p>å‹ç¼©å‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c9d1faf79e34020bcb29a253e064063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK54-t5aSa5Zad54Ot5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766724451&amp;x-signature=BGvFp9Wz8xcS%2FNftrxuo5UG4nOE%3D" alt="image.png" loading="lazy"/></p>
<p>å‹ç¼©åï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7897dbbc0ff4408499f279058ebce63b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiK54-t5aSa5Zad54Ot5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766724451&amp;x-signature=YU8Zq2q7WOYpYHVY%2FjNGavXgFJA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">æ­£ç¡®é€‰æ‹©æ¨¡å‹</h3>
<p>ä¸è¦æ»¥ç”¨æ¨¡å‹ï¼Œä¸€äº›ç®€å•çš„éœ€æ±‚ç”¨ä¾¿å®œçš„æ¨¡å‹å³å¯ï¼Œå¤æ‚éœ€æ±‚ç”¨ Claude4.5 / Gemini3 Proã€‚</p>
<p>æ¯”å¦‚æœ‰æ—¶å€™å¤§æ¨¡å‹å†™çš„æ³¨é‡Šæ˜¯è‹±æ–‡çš„ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½ç¿»è¯‘ä¸ºä¸­æ–‡ï¼Œè¿™ç§æƒ…å†µç”¨ä¾¿å®œçš„æ¨¡å‹æ¥åšå°±è¡Œäº†ã€‚</p>
<p>ç”¨å¥½ä¸Šé¢çš„è¿™äº›æŠ€å·§ï¼Œè‡³å°‘èƒ½å¸®ä½ èŠ‚çœ 50% çš„é‡‘å¸ï¼Œå¤§å®¶å¦‚æœè¿˜æœ‰ä»€ä¹ˆå¥½ç”¨çš„æŠ€å·§ä¹Ÿæ¬¢è¿è¯„è®ºåŒºåˆ†äº«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux æ—¥å¿—å¤„ç†ä¸‰å‰‘å®¢ï¼šgrepã€awkã€sed]]></title>    <link>https://juejin.cn/post/7585031025447960586</link>    <guid>https://juejin.cn/post/7585031025447960586</guid>    <pubDate>2025-12-19T02:41:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585031025447960586" data-draft-id="7585084491896700954" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux æ—¥å¿—å¤„ç†ä¸‰å‰‘å®¢ï¼šgrepã€awkã€sed "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T02:41:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ray66"/> <meta itemprop="url" content="https://juejin.cn/user/3131851531368055"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux æ—¥å¿—å¤„ç†ä¸‰å‰‘å®¢ï¼šgrepã€awkã€sed 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3131851531368055/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ray66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T02:41:57.000Z" title="Fri Dec 19 2025 02:41:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“š å‘½ä»¤æ¦‚è¿°</h2>
<h3 data-id="heading-1">ğŸ” grep - å…¨å±€æ­£åˆ™è¡¨è¾¾å¼æ‰“å°å·¥å…·</h3>
<p><strong>å‘½ä»¤å…¨ç§°</strong>: Global Regular Expression Print<br/>
<strong>æ ¸å¿ƒä½œç”¨</strong>: åœ¨æ–‡ä»¶ä¸­æœç´¢åŒ¹é…æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬è¡Œ<br/>
<strong>ä¸»è¦ç”¨é€”</strong>:</p>
<ul>
<li>æŸ¥æ‰¾åŒ…å«ç‰¹å®šå…³é”®å­—çš„æ—¥å¿—è¡Œ</li>
<li>è¿‡æ»¤æ—¥å¿—å†…å®¹</li>
<li>ç»Ÿè®¡åŒ¹é…è¡Œæ•°</li>
<li>å®æ—¶ç›‘æ§æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>: grep æ˜¯"æŸ¥æ‰¾å™¨"ï¼Œç”¨äºå¿«é€Ÿå®šä½ä½ æƒ³è¦çš„å†…å®¹</p>
<hr/>
<h3 data-id="heading-2">ğŸ“Š awk - æ–‡æœ¬åˆ†æå·¥å…·</h3>
<p><strong>å‘½ä»¤å…¨ç§°</strong>: Aho, Weinberger, Kernighanï¼ˆä¸‰ä½åˆ›å§‹äººåå­—é¦–å­—æ¯ï¼‰<br/>
<strong>æ ¸å¿ƒä½œç”¨</strong>: æŒ‰è¡Œå¤„ç†æ–‡æœ¬ï¼ŒæŒ‰åˆ—æå–å’Œåˆ†ææ•°æ®<br/>
<strong>ä¸»è¦ç”¨é€”</strong>:</p>
<ul>
<li>æå–æ—¥å¿—ä¸­çš„ç‰¹å®šå­—æ®µï¼ˆå¦‚æ—¶é—´ã€IPã€çŠ¶æ€ç ï¼‰</li>
<li>ç»Ÿè®¡å’Œè®¡ç®—ï¼ˆå¦‚æ±‚å’Œã€å¹³å‡å€¼ã€è®¡æ•°ï¼‰</li>
<li>æ¡ä»¶è¿‡æ»¤å’Œæ ¼å¼åŒ–è¾“å‡º</li>
<li>å¤æ‚çš„æ–‡æœ¬æ•°æ®åˆ†æ</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>: awk æ˜¯"åˆ†æå™¨"ï¼Œæ“…é•¿å¤„ç†ç»“æ„åŒ–æ•°æ®å’Œç»Ÿè®¡è®¡ç®—</p>
<hr/>
<h3 data-id="heading-3">âœï¸ sed - æµç¼–è¾‘å™¨</h3>
<p><strong>å‘½ä»¤å…¨ç§°</strong>: Stream Editor<br/>
<strong>æ ¸å¿ƒä½œç”¨</strong>: å¯¹æ–‡æœ¬è¿›è¡Œæ‰¹é‡ç¼–è¾‘å’Œè½¬æ¢<br/>
<strong>ä¸»è¦ç”¨é€”</strong>:</p>
<ul>
<li>æ›¿æ¢æ–‡æœ¬å†…å®¹</li>
<li>åˆ é™¤ç‰¹å®šè¡Œ</li>
<li>æ’å…¥å’Œè¿½åŠ å†…å®¹</li>
<li>æå–æŒ‡å®šè¡Œ</li>
<li>æ‰¹é‡ä¿®æ”¹æ–‡ä»¶</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>: sed æ˜¯"ç¼–è¾‘å™¨"ï¼Œç”¨äºæ‰¹é‡ä¿®æ”¹å’Œå¤„ç†æ–‡æœ¬</p>
<h2 data-id="heading-4">ğŸ“– è¯¦ç»†ç”¨æ³•ä»‹ç»</h2>
<h2 data-id="heading-5">ä¸€ã€grep - æ–‡æœ¬æœç´¢å‘½ä»¤</h2>
<h3 data-id="heading-6">ğŸ¯ grep æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>grep æ˜¯ Linux ä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾åŒ…å«æŒ‡å®šæ¨¡å¼çš„è¡Œï¼Œå¹¶å°†è¿™äº›è¡Œè¾“å‡ºã€‚å°±åƒåœ¨ä¹¦ä¸­ç”¨è§å…‰ç¬”æ ‡è®°å…³é”®å­—ä¸€æ ·ï¼Œgrep å¸®ä½ å¿«é€Ÿæ‰¾åˆ°æ—¥å¿—ä¸­çš„é‡è¦ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-7">ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ grepï¼Ÿ</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ—¥å¿—æ–‡ä»¶é€šå¸¸æœ‰å‡ åä¸‡ç”šè‡³ä¸Šç™¾ä¸‡è¡Œï¼Œæ‰‹åŠ¨æŸ¥æ‰¾å‡ ä¹ä¸å¯èƒ½ã€‚grep å¯ä»¥åœ¨å‡ ç§’å†…ä»æµ·é‡æ—¥å¿—ä¸­æ‰¾åˆ°ä½ éœ€è¦çš„é”™è¯¯ä¿¡æ¯ã€å¼‚å¸¸å †æ ˆæˆ–ç‰¹å®šäº‹ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-8">ğŸ“‹ grep å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-9"><strong>åœºæ™¯ä¸€ï¼šæŸ¥çœ‹å®Œæ•´å¼‚å¸¸å †æ ˆ</strong></h4>
<p><strong>é—®é¢˜</strong>: Java å¼‚å¸¸å †æ ˆé€šå¸¸æ˜¯å¤šè¡Œçš„ï¼Œåªçœ‹ä¸€è¡Œçœ‹ä¸åˆ°å®Œæ•´ä¿¡æ¯</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å 50 è¡Œ</span>
<span class="hljs-keyword">grep</span> -A <span class="hljs-number">50</span> <span class="hljs-string">"java.lang.NullPointerException"</span> a.log


<span class="hljs-comment"># ç»“åˆ less åˆ†é¡µæŸ¥çœ‹</span>
<span class="hljs-keyword">grep</span> -A <span class="hljs-number">50</span> <span class="hljs-string">"java.lang.NullPointerException"</span> a.log | less
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li>
<p><code>-A N</code> å‚æ•°ï¼šæ˜¾ç¤ºåŒ¹é…è¡Œ<strong>ä¹‹å</strong>çš„ N è¡Œï¼ˆAfterï¼‰</p>
</li>
<li>
<p>å¼‚å¸¸å †æ ˆé€šå¸¸éœ€è¦çœ‹åç»­ 20-50 è¡Œæ‰èƒ½æ‰¾åˆ°æ ¹æœ¬åŸå› </p>
</li>
<li>
<p><code>less</code> å‘½ä»¤ç”¨äºåˆ†é¡µæŸ¥çœ‹ï¼š</p>
<ul>
<li><code>â†‘â†“</code> é”®æ»šåŠ¨</li>
<li><code>G</code> è·³åˆ°æœ«å°¾</li>
<li><code>q</code> é€€å‡º</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-10"><strong>åœºæ™¯äºŒï¼šå®æ—¶ç›‘æ§æ–°æ—¥å¿—</strong></h4>
<p><strong>é—®é¢˜</strong>: éœ€è¦å®æ—¶è§‚å¯Ÿçº¿ä¸ŠæœåŠ¡æ˜¯å¦å‡ºç°é”™è¯¯</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶ç›‘æ§å¹¶æ˜¾ç¤ºå¼‚å¸¸åŠåç»­ 50 è¡Œ</span>
<span class="hljs-built_in">tail</span> -f a.log | grep -A 50 <span class="hljs-string">"java.lang.NullPointerException"</span>


<span class="hljs-comment"># å¿½ç•¥å¤§å°å†™å®æ—¶ç›‘æ§</span>
<span class="hljs-built_in">tail</span> -f a.log | grep -i -A 50 <span class="hljs-string">"error"</span>
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>tail -f</code>ï¼šå®æ—¶è¿½è¸ªæ–‡ä»¶æ–°å¢å†…å®¹</li>
<li>ç»“åˆ <code>grep</code> è¿‡æ»¤å…³é”®å¼‚å¸¸</li>
<li><code>Ctrl + C</code> åœæ­¢ç›‘æ§</li>
<li><code>-i</code> å‚æ•°å¿½ç•¥å¤§å°å†™</li>
</ul>
<hr/>
<h4 data-id="heading-11"><strong>åœºæ™¯ä¸‰ï¼šæŸ¥æ‰¾å†å²/å‹ç¼©æ—¥å¿—</strong></h4>
<p><strong>é—®é¢˜</strong>: éœ€è¦åœ¨å¤šä¸ªæ—¥å¿—æ–‡ä»¶æˆ–å‹ç¼©æ—¥å¿—ä¸­æŸ¥æ‰¾é—®é¢˜</p>
<p><strong>æŸ¥æ‰¾æ‰€æœ‰ .log æ–‡ä»¶</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># -H å‚æ•°æ˜¾ç¤ºæ–‡ä»¶å</span>
grep -H -A 50 <span class="hljs-string">"java.lang.NullPointerException"</span> *.<span class="hljs-built_in">log</span>
</code></pre>
<p><strong>æŸ¥æ‰¾å‹ç¼©æ—¥å¿— (.gz)â€‹</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta"># zgrep ç›´æ¥å¤„ç† .gz æ–‡ä»¶ï¼Œæ— éœ€è§£å‹</span>
zgrep -H -A <span class="hljs-number">50</span> <span class="hljs-string">"java.lang.NullPointerException"</span> *.gz
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>-H</code> å‚æ•°ï¼šæ˜¾ç¤ºåŒ¹é…å†…å®¹æ‰€åœ¨çš„æ–‡ä»¶å</li>
<li><code>zgrep</code>ï¼šä¸“é—¨å¤„ç†å‹ç¼©æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨è§£å‹</li>
<li><code>*.log</code> å’Œ <code>*.gz</code>ï¼šé€šé…ç¬¦åŒ¹é…æ‰€æœ‰ç›¸å…³æ–‡ä»¶</li>
</ul>
<hr/>
<h4 data-id="heading-12"><strong>åœºæ™¯å››ï¼šç»Ÿè®¡å¼‚å¸¸å‡ºç°æ¬¡æ•°</strong></h4>
<p><strong>é—®é¢˜</strong>: åˆ¤æ–­å¼‚å¸¸æ˜¯å¶å‘è¿˜æ˜¯é¢‘ç¹å‘ç”Ÿ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ç»Ÿè®¡å•ä¸ªæ–‡ä»¶</span>
<span class="hljs-keyword">grep</span> -c <span class="hljs-string">"java.lang.NullPointerException"</span> a.log


<span class="hljs-comment"># ç»Ÿè®¡æ‰€æœ‰æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-keyword">grep</span> -c <span class="hljs-string">"java.lang.NullPointerException"</span> *.log
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-c" lang="c">app.<span class="hljs-built_in">log</span>:<span class="hljs-number">15</span>
app.<span class="hljs-built_in">log</span><span class="hljs-number">.1</span>:<span class="hljs-number">3</span>
app.<span class="hljs-built_in">log</span><span class="hljs-number">.2</span>:<span class="hljs-number">0</span>
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>-c</code> å‚æ•°ï¼šåªæ˜¾ç¤ºåŒ¹é…è¡Œçš„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå†…å®¹</li>
<li>å¿«é€Ÿåˆ¤æ–­é—®é¢˜ä¸¥é‡ç¨‹åº¦</li>
</ul>
<hr/>
<h3 data-id="heading-13">ğŸ“Š grep å‚æ•°é€ŸæŸ¥è¡¨</h3>




















































































<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>-A N</code></td><td>After</td><td>æ˜¾ç¤ºåŒ¹é…è¡Œ<strong>ä¹‹å</strong>çš„ N è¡Œ</td><td><code>grep -A 10 "error" log</code></td></tr><tr><td><code>-B N</code></td><td>Before</td><td>æ˜¾ç¤ºåŒ¹é…è¡Œ<strong>ä¹‹å‰</strong>çš„ N è¡Œ</td><td><code>grep -B 5 "error" log</code></td></tr><tr><td><code>-C N</code></td><td>Context</td><td>æ˜¾ç¤ºåŒ¹é…è¡Œ<strong>ä¸Šä¸‹å„</strong> N è¡Œ</td><td><code>grep -C 25 "error" log</code></td></tr><tr><td><code>-i</code></td><td>ignore case</td><td>å¿½ç•¥å¤§å°å†™</td><td><code>grep -i "ERROR" log</code></td></tr><tr><td><code>-v</code></td><td>invert</td><td>åå‘åŒ¹é…ï¼ˆä¸åŒ…å«ï¼‰</td><td><code>grep -v "DEBUG" log</code></td></tr><tr><td><code>-H</code></td><td>with filename</td><td>æ˜¾ç¤ºåŒ¹é…çš„æ–‡ä»¶å</td><td><code>grep -H "error" *.log</code></td></tr><tr><td><code>-h</code></td><td>no filename</td><td>ä¸æ˜¾ç¤ºæ–‡ä»¶å</td><td><code>grep -h "error" *.log</code></td></tr><tr><td><code>-c</code></td><td>count</td><td>ç»Ÿè®¡åŒ¹é…è¡Œæ•°</td><td><code>grep -c "error" log</code></td></tr><tr><td><code>-n</code></td><td>line number</td><td>æ˜¾ç¤ºè¡Œå·</td><td><code>grep -n "error" log</code></td></tr><tr><td><code>-r</code></td><td>recursive</td><td>é€’å½’æœç´¢ç›®å½•</td><td><code>grep -r "error" /logs/</code></td></tr><tr><td><code>-E</code></td><td>extended regex</td><td>ä½¿ç”¨æ‰©å±•æ­£åˆ™</td><td>`grep -E "error</td><td>warn" log`</td></tr><tr><td><code>-w</code></td><td>word</td><td>å®Œæ•´å•è¯åŒ¹é…</td><td><code>grep -w "error" log</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-14">ğŸ’¡ grep å®æˆ˜æŠ€å·§</h3>
<ol>
<li><strong>çœ‹å¼‚å¸¸å¿…é¡»ç”¨ <code>-A</code>â€‹</strong> - å•è¡Œçœ‹ä¸åˆ°å®Œæ•´å †æ ˆä¿¡æ¯</li>
<li><strong>å®æ—¶ç›‘æ§ç”¨ <code>tail -f | grep</code>â€‹</strong> - ç¬¬ä¸€æ—¶é—´å‘ç°é—®é¢˜</li>
<li><strong>å‹ç¼©æ—¥å¿—ç”¨ <code>zgrep</code>â€‹</strong> - çœæ—¶çœåŠ›ï¼Œæ— éœ€è§£å‹</li>
<li><strong>æ‰¹é‡æŸ¥æ‰¾åŠ  <code>-H</code>â€‹</strong> - çŸ¥é“æ˜¯å“ªä¸ªæ–‡ä»¶å‡ºçš„é—®é¢˜</li>
<li><strong>ç»Ÿè®¡é¢‘ç‡ç”¨ <code>-c</code>â€‹</strong> - åˆ¤æ–­é—®é¢˜ä¸¥é‡ç¨‹åº¦</li>
<li><strong>ç»„åˆä½¿ç”¨ <code>-A -B -C</code>â€‹</strong> - æŸ¥çœ‹å®Œæ•´ä¸Šä¸‹æ–‡</li>
</ol>
<hr/>
<h2 data-id="heading-15">äºŒã€awk - æ–‡æœ¬åˆ†æå‘½ä»¤</h2>
<h3 data-id="heading-16">ğŸ¯ awk æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>awk æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼Œå®ƒæŠŠæ¯ä¸€è¡Œçœ‹ä½œä¸€æ¡è®°å½•ï¼ŒæŠŠæ¯ä¸€åˆ—çœ‹ä½œä¸€ä¸ªå­—æ®µã€‚å°±åƒ Excel å¤„ç†è¡¨æ ¼æ•°æ®ä¸€æ ·ï¼Œawk å¯ä»¥æå–ã€è®¡ç®—ã€ç»Ÿè®¡æ—¥å¿—ä¸­çš„ç»“æ„åŒ–æ•°æ®ã€‚</p>
<h3 data-id="heading-17">ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ awkï¼Ÿ</h3>
<p>æ—¥å¿—é€šå¸¸æ˜¯ç»“æ„åŒ–çš„ï¼ˆå¦‚ï¼šæ—¶é—´ | IP | çŠ¶æ€ç  | å“åº”æ—¶é—´ï¼‰ï¼Œå½“ä½ éœ€è¦ï¼š</p>
<ul>
<li>åªçœ‹æŸå‡ åˆ—æ•°æ®</li>
<li>ç»Ÿè®¡æŸä¸ªå­—æ®µçš„æ€»å’Œæˆ–å¹³å‡å€¼</li>
<li>æ ¹æ®æ¡ä»¶è¿‡æ»¤æ•°æ®</li>
<li>è¿›è¡Œå¤æ‚çš„æ•°æ®åˆ†æ</li>
</ul>
<p>è¿™æ—¶ awk å°±æ˜¯æœ€ä½³é€‰æ‹©ï¼</p>
<hr/>
<h3 data-id="heading-18">ğŸ“‹ awk åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>awk å¦‚ä½•çœ‹å¾…æ–‡æœ¬</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">2025-12-19 10:30:15 192.168.1.100 GET /api/user 200 150ms
    <span class="hljs-variable">$1</span>         <span class="hljs-variable">$2</span>        <span class="hljs-variable">$3</span>        <span class="hljs-variable">$4</span>    <span class="hljs-variable">$5</span>     <span class="hljs-variable">$6</span>  <span class="hljs-variable">$7</span>
   å­—æ®µ1     å­—æ®µ2     å­—æ®µ3    å­—æ®µ4  å­—æ®µ5  å­—æ®µ6 å­—æ®µ7
</code></pre>
<p><strong>awk çš„å·¥ä½œæµç¨‹</strong>:</p>
<ol>
<li>è¯»å–ä¸€è¡Œ</li>
<li>æŒ‰åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ç©ºæ ¼/tabï¼‰åˆ†å‰²æˆå­—æ®µ</li>
<li>å¯¹å­—æ®µè¿›è¡Œå¤„ç†</li>
<li>è¾“å‡ºç»“æœ</li>
<li>ç»§ç»­ä¸‹ä¸€è¡Œ</li>
</ol>
<hr/>
<h3 data-id="heading-19">ğŸ“‹ awk å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-20"><strong>åœºæ™¯ä¸€ï¼šæå–ç‰¹å®šåˆ—</strong></h4>
<p><strong>é—®é¢˜</strong>: åªæƒ³çœ‹æ—¥å¿—ä¸­çš„æ—¶é—´å’Œé”™è¯¯ä¿¡æ¯</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-dart" lang="dart"># æå–ç¬¬<span class="hljs-number">1</span>åˆ—ï¼ˆæ—¶é—´ï¼‰å’Œç¬¬<span class="hljs-number">5</span>åˆ—ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
awk <span class="hljs-string">'{print <span class="hljs-subst">$1</span>, <span class="hljs-subst">$5</span>}'</span> app.log


# æå–åŒ…å«ERRORçš„è¡Œçš„ç‰¹å®šå­—æ®µ
awk <span class="hljs-string">'/ERROR/ {print <span class="hljs-subst">$1</span>, <span class="hljs-subst">$2</span>, <span class="hljs-subst">$NF</span>}'</span> app.log


# æå–ç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—
awk <span class="hljs-string">'{print <span class="hljs-subst">$1</span>, <span class="hljs-subst">$NF</span>}'</span> app.log
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2025-12-19 </span><span class="hljs-string">NullPointerException</span>
<span class="hljs-number">2025-12-19 </span><span class="hljs-string">TimeoutException</span>
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>$1, $2, $3...</code>ï¼šè¡¨ç¤ºç¬¬1ã€2ã€3åˆ—</li>
<li><code>$NF</code>ï¼šè¡¨ç¤ºæœ€åä¸€åˆ—ï¼ˆNumber of Fieldsï¼‰</li>
<li><code>$0</code>ï¼šè¡¨ç¤ºæ•´è¡Œå†…å®¹</li>
</ul>
<hr/>
<h4 data-id="heading-21"><strong>åœºæ™¯äºŒï¼šç»Ÿè®¡åˆ†æ</strong></h4>
<p><strong>é—®é¢˜</strong>: ç»Ÿè®¡å„çŠ¶æ€ç å‡ºç°æ¬¡æ•°ã€è®¡ç®—å¹³å‡å“åº”æ—¶é—´</p>
<p><strong>ç»Ÿè®¡çŠ¶æ€ç å‡ºç°æ¬¡æ•°</strong>:</p>
<pre><code class="hljs language-css" lang="css"># å‡è®¾çŠ¶æ€ç åœ¨ç¬¬<span class="hljs-number">9</span>åˆ—
awk '{count<span class="hljs-selector-attr">[$9]</span>++} END {for(<span class="hljs-selector-tag">code</span> in count) print <span class="hljs-selector-tag">code</span>, count<span class="hljs-selector-attr">[code]</span>}' access<span class="hljs-selector-class">.log</span>
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs">200 15234
404 89
500 23
</code></pre>
<p><strong>è®¡ç®—å“åº”æ—¶é—´ç»Ÿè®¡</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># å‡è®¾å“åº”æ—¶é—´åœ¨ç¬¬10åˆ—</span>
awk '{sum+=$10; count++} END {print <span class="hljs-string">"æ€»è®¡:"</span>, sum, <span class="hljs-string">"å¹³å‡:"</span>, sum/count}' access.log
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ€»è®¡: 125000 å¹³å‡: 250</span>
</code></pre>
<p><strong>ç»Ÿè®¡ IP è®¿é—®æ¬¡æ•° TOP 10</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¬¬1åˆ—æ˜¯IP</span>
awk <span class="hljs-string">'{ip[$1]++} END {for(i in ip) print ip[i], i}'</span> access.log | <span class="hljs-built_in">sort</span> -rn | <span class="hljs-built_in">head</span> -10
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1523 </span><span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>
<span class="hljs-number">892</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.101</span>
<span class="hljs-number">456</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.102</span>
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>count[$9]++</code>ï¼šä½¿ç”¨å…³è”æ•°ç»„ç»Ÿè®¡</li>
<li><code>END {}</code>ï¼šæ‰€æœ‰è¡Œå¤„ç†å®Œåæ‰§è¡Œ</li>
<li><code>sum+=</code>ï¼šç´¯åŠ è®¡ç®—</li>
</ul>
<hr/>
<h4 data-id="heading-22"><strong>åœºæ™¯ä¸‰ï¼šæ¡ä»¶è¿‡æ»¤</strong></h4>
<p><strong>é—®é¢˜</strong>: åªçœ‹å“åº”æ—¶é—´è¶…è¿‡1ç§’çš„è¯·æ±‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-dart" lang="dart"># æ˜¾ç¤ºå“åº”æ—¶é—´å¤§äº<span class="hljs-number">1000</span>msçš„è¯·æ±‚
awk <span class="hljs-string">'<span class="hljs-subst">$10</span> &gt; 1000 {print <span class="hljs-subst">$0</span>}'</span> access.log


# æ˜¾ç¤ºç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
awk <span class="hljs-string">'<span class="hljs-subst">$1</span> &gt;= "2025-12-19 10:00:00" &amp;&amp; <span class="hljs-subst">$1</span> &lt;= "2025-12-19 11:00:00"'</span> app.log


# æ˜¾ç¤ºçŠ¶æ€ç ä¸º<span class="hljs-number">5</span>xxçš„é”™è¯¯
awk <span class="hljs-string">'<span class="hljs-subst">$9</span> ~ /^5/ {print <span class="hljs-subst">$0</span>}'</span> access.log


# æ˜¾ç¤ºçŠ¶æ€ç ä¸æ˜¯<span class="hljs-number">200</span>çš„è¯·æ±‚
awk <span class="hljs-string">'<span class="hljs-subst">$9</span> != 200 {print <span class="hljs-subst">$0</span>}'</span> access.log
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>$10 &gt; 1000</code>ï¼šæ•°å€¼æ¯”è¾ƒ</li>
<li><code>$1 &gt;= "xxx" &amp;&amp; $1 &lt;= "yyy"</code>ï¼šå­—ç¬¦ä¸²æ¯”è¾ƒå’Œé€»è¾‘è¿ç®—</li>
<li><code>$9 ~ /^5/</code>ï¼šæ­£åˆ™åŒ¹é…ï¼ˆä»¥5å¼€å¤´ï¼‰</li>
<li><code>!=</code>ï¼šä¸ç­‰äº</li>
</ul>
<hr/>
<h4 data-id="heading-23"><strong>åœºæ™¯å››ï¼šæ ¼å¼åŒ–è¾“å‡º</strong></h4>
<p><strong>é—®é¢˜</strong>: è®©è¾“å‡ºæ›´æ˜“è¯»ï¼Œæ·»åŠ è¡¨å¤´å’Œæ ¼å¼</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-swift" lang="swift"># æ ¼å¼åŒ–è¾“å‡ºï¼Œæ·»åŠ è¡¨å¤´
awk '<span class="hljs-type">BEGIN</span> {print <span class="hljs-string">"æ—¶é—´<span class="hljs-subst">\t</span><span class="hljs-subst">\t</span><span class="hljs-subst">\t</span>çŠ¶æ€ç <span class="hljs-subst">\t</span>å“åº”æ—¶é—´"</span>} 
     {printf <span class="hljs-string">"%s<span class="hljs-subst">\t</span>%s<span class="hljs-subst">\t</span>%s<span class="hljs-subst">\n</span>"</span>, <span class="hljs-variable">$1</span>, <span class="hljs-variable">$9</span>, <span class="hljs-variable">$10</span>}' access.log


# è®¡ç®—å¹¶æ ¼å¼åŒ–è¾“å‡ºç™¾åˆ†æ¯”
awk '{total<span class="hljs-operator">++</span>; <span class="hljs-keyword">if</span>(<span class="hljs-variable">$9</span><span class="hljs-operator">==</span><span class="hljs-string">"200"</span>) success<span class="hljs-operator">++</span>} 
     <span class="hljs-type">END</span> {printf <span class="hljs-string">"æˆåŠŸç‡: %.2f%%<span class="hljs-subst">\n</span>"</span>, (success<span class="hljs-operator">/</span>total)<span class="hljs-operator">*</span><span class="hljs-number">100</span>}' access.log


# æ·»åŠ è¡Œå·
awk '{print <span class="hljs-type">NR</span>, <span class="hljs-variable">$0</span>}' app.log
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ—¶é—´</span>			<span class="hljs-string">çŠ¶æ€ç </span>	<span class="hljs-string">å“åº”æ—¶é—´</span>
<span class="hljs-number">2025-12-19	</span><span class="hljs-number">200</span>	<span class="hljs-number">150</span>
<span class="hljs-number">2025-12-19	</span><span class="hljs-number">404</span>	<span class="hljs-number">50</span>
<span class="hljs-string">æˆåŠŸç‡:</span> <span class="hljs-number">98.50</span><span class="hljs-string">%</span>
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>BEGIN {}</code>ï¼šå¤„ç†ç¬¬ä¸€è¡Œä¹‹å‰æ‰§è¡Œ</li>
<li><code>printf</code>ï¼šæ ¼å¼åŒ–è¾“å‡ºï¼ˆç±»ä¼¼Cè¯­è¨€ï¼‰</li>
<li><code>%.2f</code>ï¼šä¿ç•™ä¸¤ä½å°æ•°</li>
<li><code>NR</code>ï¼šå½“å‰è¡Œå·</li>
</ul>
<hr/>
<h3 data-id="heading-24">ğŸ“Š awk å†…ç½®å˜é‡é€ŸæŸ¥è¡¨</h3>





















































<table><thead><tr><th>å˜é‡</th><th>å«ä¹‰</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>$0</code></td><td>æ•´è¡Œå†…å®¹</td><td>å½“å‰å¤„ç†çš„æ•´è¡Œ</td><td><code>awk '{print $0}'</code></td></tr><tr><td><code>$1, $2, $n</code></td><td>ç¬¬nä¸ªå­—æ®µ</td><td>æŒ‰åˆ†éš”ç¬¦åˆ†å‰²çš„å­—æ®µ</td><td><code>awk '{print $1, $3}'</code></td></tr><tr><td><code>$NF</code></td><td>æœ€åä¸€ä¸ªå­—æ®µ</td><td>Number of Fields</td><td><code>awk '{print $NF}'</code></td></tr><tr><td><code>NR</code></td><td>è¡Œå·</td><td>Number of Records</td><td><code>awk 'NR==10 {print $0}'</code></td></tr><tr><td><code>NF</code></td><td>å­—æ®µæ•°</td><td>å½“å‰è¡Œæœ‰å¤šå°‘åˆ—</td><td><code>awk '{print NF}'</code></td></tr><tr><td><code>FS</code></td><td>å­—æ®µåˆ†éš”ç¬¦</td><td>Field Separatorï¼ˆé»˜è®¤ç©ºæ ¼ï¼‰</td><td><code>awk 'BEGIN{FS=","}'</code></td></tr><tr><td><code>OFS</code></td><td>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦</td><td>Output Field Separator</td><td><code>awk 'BEGIN{OFS="\t"}'</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-25">ğŸ“Š awk å¸¸ç”¨å‚æ•°å’Œæ“ä½œç¬¦</h3>






















































<table><thead><tr><th>å‚æ•°/æ“ä½œç¬¦</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>-F</code></td><td>æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦</td><td><code>awk -F',' '{print $1}'</code></td></tr><tr><td><code>~</code></td><td>æ­£åˆ™åŒ¹é…</td><td><code>awk '$0 ~ /ERROR/'</code></td></tr><tr><td><code>!~</code></td><td>æ­£åˆ™ä¸åŒ¹é…</td><td><code>awk '$0 !~ /DEBUG/'</code></td></tr><tr><td><code>==</code></td><td>ç­‰äº</td><td><code>awk '$1 == "200"'</code></td></tr><tr><td><code>!=</code></td><td>ä¸ç­‰äº</td><td><code>awk '$1 != "200"'</code></td></tr><tr><td><code>&gt;</code> <code>&lt;</code> <code>&gt;=</code> <code>&lt;=</code></td><td>å¤§å°æ¯”è¾ƒ</td><td><code>awk '$10 &gt; 1000'</code></td></tr><tr><td><code>&amp;&amp;</code></td><td>é€»è¾‘ä¸</td><td><code>awk '$1==200 &amp;&amp; $2&gt;100'</code></td></tr><tr><td>`</td><td/><td>`</td><td>é€»è¾‘æˆ–</td><td>`awk '$1==200</td><td/><td>$1==201'`</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-26">ğŸ’¡ awk å®æˆ˜æŠ€å·§</h3>
<ol>
<li>
<p><strong>æŒ‡å®šåˆ†éš”ç¬¦</strong>: æ—¥å¿—ä¸æ˜¯ç©ºæ ¼åˆ†éš”æ—¶ç”¨ <code>-F</code></p>
<pre><code class="hljs language-bash" lang="bash">awk -F<span class="hljs-string">','</span> <span class="hljs-string">'{print $1}'</span>  <span class="hljs-comment"># CSVæ–‡ä»¶</span>
awk -F<span class="hljs-string">':'</span> <span class="hljs-string">'{print $1}'</span>  <span class="hljs-comment"># å†’å·åˆ†éš”</span>
</code></pre>
</li>
<li>
<p><strong>å¤šæ¡ä»¶è¿‡æ»¤</strong>: ä½¿ç”¨ <code>&amp;&amp;</code> å’Œ <code>||</code></p>
<pre><code class="hljs language-dart" lang="dart">awk <span class="hljs-string">'<span class="hljs-subst">$9</span>==200 &amp;&amp; <span class="hljs-subst">$10</span>&gt;1000 {print <span class="hljs-subst">$0</span>}'</span>
</code></pre>
</li>
<li>
<p><strong>ç»Ÿè®¡å»é‡</strong>: ä½¿ç”¨å…³è”æ•°ç»„</p>
<pre><code class="hljs language-scss" lang="scss">awk '{arr<span class="hljs-selector-attr">[$1]</span>++} END {print <span class="hljs-built_in">length</span>(arr)}'  # ç»Ÿè®¡å”¯ä¸€IPæ•°
</code></pre>
</li>
<li>
<p><strong>BEGIN å’Œ END</strong>:</p>
<ul>
<li><code>BEGIN</code>ï¼šå¤„ç†æ•°æ®å‰æ‰§è¡Œï¼ˆè®¾ç½®å˜é‡ã€æ‰“å°è¡¨å¤´ï¼‰</li>
<li><code>END</code>ï¼šå¤„ç†æ•°æ®åæ‰§è¡Œï¼ˆæ‰“å°ç»Ÿè®¡ç»“æœï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ ¼å¼åŒ–è¾“å‡º</strong>: ä½¿ç”¨ <code>printf</code> è€Œä¸æ˜¯ <code>print</code></p>
<pre><code class="hljs language-swift" lang="swift">awk '{printf <span class="hljs-string">"%-20s %10d<span class="hljs-subst">\n</span>"</span>, <span class="hljs-variable">$1</span>, <span class="hljs-variable">$2</span>}'
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-27">ä¸‰ã€sed - æµç¼–è¾‘å‘½ä»¤</h2>
<h3 data-id="heading-28">ğŸ¯ sed æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>sed æ˜¯ä¸€ä¸ªæµç¼–è¾‘å™¨ï¼ˆStream Editorï¼‰ï¼Œå®ƒå¯ä»¥å¯¹æ–‡æœ¬è¿›è¡Œæ‰¹é‡ç¼–è¾‘æ“ä½œã€‚å°±åƒ Word çš„"æŸ¥æ‰¾æ›¿æ¢"åŠŸèƒ½ï¼Œä½† sed æ›´å¼ºå¤§ï¼Œå¯ä»¥å¤„ç†æ•´ä¸ªæ–‡ä»¶æˆ–å¤šä¸ªæ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜èƒ½åˆ é™¤ã€æ’å…¥ã€æå–è¡Œã€‚</p>
<h3 data-id="heading-29">ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ sedï¼Ÿ</h3>
<p>å½“ä½ éœ€è¦ï¼š</p>
<ul>
<li>æ‰¹é‡æ›¿æ¢æ—¥å¿—ä¸­çš„æ•æ„Ÿä¿¡æ¯</li>
<li>åˆ é™¤è°ƒè¯•æ—¥å¿—ï¼ˆDEBUG è¡Œï¼‰</li>
<li>æå–ç‰¹å®šè¡Œå·æˆ–åŒ¹é…çš„è¡Œ</li>
<li>åœ¨ç‰¹å®šä½ç½®æ’å…¥å†…å®¹</li>
<li>ä¸æ‰“å¼€æ–‡ä»¶å°±èƒ½ä¿®æ”¹å†…å®¹</li>
</ul>
<p>è¿™æ—¶ sed å°±æ˜¯æœ€ä½³å·¥å…·ï¼</p>
<hr/>
<h3 data-id="heading-30">ğŸ“‹ sed åŸºæœ¬æ¦‚å¿µ</h3>
<p><strong>sed çš„å·¥ä½œæµç¨‹</strong>:</p>
<ol>
<li>è¯»å–ä¸€è¡Œåˆ°æ¨¡å¼ç©ºé—´ï¼ˆPattern Spaceï¼‰</li>
<li>æ‰§è¡Œç¼–è¾‘å‘½ä»¤</li>
<li>è¾“å‡ºç»“æœåˆ°æ ‡å‡†è¾“å‡º</li>
<li>ç»§ç»­ä¸‹ä¸€è¡Œ</li>
</ol>
<p><strong>sed å‘½ä»¤æ ¼å¼</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">sed [é€‰é¡¹] <span class="hljs-string">'å‘½ä»¤'</span> æ–‡ä»¶
sed [é€‰é¡¹] -e <span class="hljs-string">'å‘½ä»¤1'</span> -e <span class="hljs-string">'å‘½ä»¤2'</span> æ–‡ä»¶
</code></pre>
<hr/>
<h3 data-id="heading-31">ğŸ“‹ sed å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-32"><strong>åœºæ™¯ä¸€ï¼šå†…å®¹æ›¿æ¢ï¼ˆæœ€å¸¸ç”¨ï¼‰â€‹</strong></h4>
<p><strong>é—®é¢˜</strong>: éœ€è¦æ‰¹é‡æ›¿æ¢æ—¥å¿—ä¸­çš„æ–‡æœ¬</p>
<p><strong>åŸºæœ¬æ›¿æ¢</strong>:</p>
<pre><code class="hljs language-c" lang="c"># æ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªERRORä¸º[é”™è¯¯]
sed <span class="hljs-string">'s/ERROR/[é”™è¯¯]/'</span> app.<span class="hljs-built_in">log</span>


# å…¨å±€æ›¿æ¢ï¼ˆæ›¿æ¢æ‰€æœ‰ï¼Œä¸åªæ˜¯ç¬¬ä¸€ä¸ªï¼‰
sed <span class="hljs-string">'s/ERROR/[é”™è¯¯]/g'</span> app.<span class="hljs-built_in">log</span>


# æ›¿æ¢å¹¶ä¿å­˜åˆ°æ–°æ–‡ä»¶
sed <span class="hljs-string">'s/ERROR/[é”™è¯¯]/g'</span> app.<span class="hljs-built_in">log</span> &gt; app_new.<span class="hljs-built_in">log</span>


# ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰
sed -i <span class="hljs-string">'s/ERROR/[é”™è¯¯]/g'</span> app.<span class="hljs-built_in">log</span>


# ä¿®æ”¹å‰å¤‡ä»½åŸæ–‡ä»¶
sed -i.bak <span class="hljs-string">'s/ERROR/[é”™è¯¯]/g'</span> app.<span class="hljs-built_in">log</span>
</code></pre>
<p><strong>é«˜çº§æ›¿æ¢</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªæ›¿æ¢åŒ…å«ç‰¹å®šæ¨¡å¼çš„è¡Œ</span>
sed <span class="hljs-string">'/2025-12-19/s/ERROR/[é”™è¯¯]/g'</span> app.log


<span class="hljs-comment"># æ›¿æ¢ç‰¹å®šè¡Œå·ï¼ˆç¬¬10è¡Œï¼‰</span>
sed <span class="hljs-string">'10s/ERROR/[é”™è¯¯]/g'</span> app.log


<span class="hljs-comment"># æ›¿æ¢è¡Œå·èŒƒå›´ï¼ˆ10-20è¡Œï¼‰</span>
sed <span class="hljs-string">'10,20s/ERROR/[é”™è¯¯]/g'</span> app.log


<span class="hljs-comment"># å¿½ç•¥å¤§å°å†™æ›¿æ¢</span>
sed <span class="hljs-string">'s/error/[é”™è¯¯]/gi'</span> app.log
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>s/old/new/</code>ï¼šæ›¿æ¢å‘½ä»¤æ ¼å¼</li>
<li><code>g</code>ï¼šå…¨å±€æ›¿æ¢ï¼ˆglobalï¼‰</li>
<li><code>i</code>ï¼šå¿½ç•¥å¤§å°å†™ï¼ˆignore caseï¼‰</li>
<li><code>-i</code>ï¼šç›´æ¥ä¿®æ”¹æ–‡ä»¶ï¼ˆin-placeï¼‰</li>
</ul>
<hr/>
<h4 data-id="heading-33"><strong>åœºæ™¯äºŒï¼šåˆ é™¤è¡Œ</strong></h4>
<p><strong>é—®é¢˜</strong>: åˆ é™¤æ—¥å¿—ä¸­ä¸éœ€è¦çš„å†…å®¹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ç©ºè¡Œ</span>
sed <span class="hljs-string">'/^$/d'</span> app.log


<span class="hljs-comment"># åˆ é™¤åŒ…å«DEBUGçš„è¡Œ</span>
sed <span class="hljs-string">'/DEBUG/d'</span> app.log


<span class="hljs-comment"># åˆ é™¤ç¬¬1-10è¡Œ</span>
sed <span class="hljs-string">'1,10d'</span> app.log


<span class="hljs-comment"># åˆ é™¤æœ€åä¸€è¡Œ</span>
sed <span class="hljs-string">'$d'</span> app.log


<span class="hljs-comment"># åˆ é™¤ç¬¬5è¡Œ</span>
sed <span class="hljs-string">'5d'</span> app.log


<span class="hljs-comment"># åˆ é™¤ç¬¬3è¡Œåˆ°æœ€åä¸€è¡Œ</span>
sed <span class="hljs-string">'3,$d'</span> app.log


<span class="hljs-comment"># åˆ é™¤ä¸åŒ…å«ERRORçš„è¡Œï¼ˆä¿ç•™ERRORè¡Œï¼‰</span>
sed <span class="hljs-string">'/ERROR/!d'</span> app.log
</code></pre>
<p><strong>ç»„åˆåˆ é™¤</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤ç©ºè¡Œå’ŒDEBUGè¡Œ</span>
sed -e <span class="hljs-string">'/^$/d'</span> -e <span class="hljs-string">'/DEBUG/d'</span> app.log


<span class="hljs-comment"># æˆ–ä½¿ç”¨åˆ†å·</span>
sed <span class="hljs-string">'/^$/d; /DEBUG/d'</span> app.log
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>d</code>ï¼šåˆ é™¤å‘½ä»¤ï¼ˆdeleteï¼‰</li>
<li><code>^$</code>ï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºç©ºè¡Œ</li>
<li><code>!d</code>ï¼šåå‘æ“ä½œï¼Œåˆ é™¤ä¸åŒ¹é…çš„è¡Œ</li>
</ul>
<hr/>
<h4 data-id="heading-34"><strong>åœºæ™¯ä¸‰ï¼šæå–ç‰¹å®šè¡Œ</strong></h4>
<p><strong>é—®é¢˜</strong>: åªæƒ³çœ‹æ—¥å¿—ä¸­çš„æŸäº›è¡Œ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªæ˜¾ç¤ºåŒ…å«ERRORçš„è¡Œï¼ˆç±»ä¼¼grepï¼‰</span>
sed -n <span class="hljs-string">'/ERROR/p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºç¬¬10-20è¡Œ</span>
sed -n <span class="hljs-string">'10,20p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºç¬¬ä¸€è¡Œ</span>
sed -n <span class="hljs-string">'1p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºæœ€åä¸€è¡Œ</span>
sed -n <span class="hljs-string">'$p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºç¬¬1è¡Œå’Œæœ€åä¸€è¡Œ</span>
sed -n <span class="hljs-string">'1p;$p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å5è¡Œ</span>
sed -n <span class="hljs-string">'/ERROR/,+5p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºä»åŒ¹é…è¡Œåˆ°æ–‡ä»¶æœ«å°¾</span>
sed -n <span class="hljs-string">'/ERROR/,$p'</span> app.log


<span class="hljs-comment"># æ˜¾ç¤ºä¸¤ä¸ªæ¨¡å¼ä¹‹é—´çš„å†…å®¹</span>
sed -n <span class="hljs-string">'/å¼€å§‹æ ‡è®°/,/ç»“æŸæ ‡è®°/p'</span> app.log
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>-n</code>ï¼šé™é»˜æ¨¡å¼ï¼Œä¸è‡ªåŠ¨æ‰“å°</li>
<li><code>p</code>ï¼šæ‰“å°å‘½ä»¤ï¼ˆprintï¼‰</li>
<li><code>,+5</code>ï¼šå½“å‰è¡ŒåŠå5è¡Œ</li>
<li><code>æ¨¡å¼1,æ¨¡å¼2</code>ï¼šä»æ¨¡å¼1åˆ°æ¨¡å¼2ä¹‹é—´çš„è¡Œ</li>
</ul>
<hr/>
<h4 data-id="heading-35"><strong>åœºæ™¯å››ï¼šæ’å…¥å’Œè¿½åŠ </strong></h4>
<p><strong>é—®é¢˜</strong>: åœ¨ç‰¹å®šä½ç½®æ·»åŠ å†…å®¹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨åŒ¹é…è¡Œå‰æ’å…¥å†…å®¹</span>
sed <span class="hljs-string">'/ERROR/i ====== å‘ç°é”™è¯¯ ======'</span> app.log


<span class="hljs-comment"># åœ¨åŒ¹é…è¡Œåè¿½åŠ å†…å®¹</span>
sed <span class="hljs-string">'/ERROR/a ====== é”™è¯¯ç»“æŸ ======'</span> app.log


<span class="hljs-comment"># åœ¨æ–‡ä»¶å¼€å¤´æ’å…¥</span>
sed <span class="hljs-string">'1i æ—¥å¿—å¼€å§‹æ—¶é—´: 2025-12-19'</span> app.log


<span class="hljs-comment"># åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ </span>
sed <span class="hljs-string">'$a æ—¥å¿—ç»“æŸ'</span> app.log


<span class="hljs-comment"># åœ¨ç¬¬10è¡Œå‰æ’å…¥</span>
sed <span class="hljs-string">'10i è¿™æ˜¯æ’å…¥çš„å†…å®¹'</span> app.log


<span class="hljs-comment"># æ’å…¥å¤šè¡Œï¼ˆä½¿ç”¨\nï¼‰</span>
sed <span class="hljs-string">'/ERROR/i ======\né”™è¯¯è¯¦æƒ…\n======'</span> app.log
</code></pre>
<p><strong>è¦ç‚¹è¯´æ˜</strong>:</p>
<ul>
<li><code>i</code>ï¼šåœ¨åŒ¹é…è¡Œå‰æ’å…¥ï¼ˆinsertï¼‰</li>
<li><code>a</code>ï¼šåœ¨åŒ¹é…è¡Œåè¿½åŠ ï¼ˆappendï¼‰</li>
<li><code>$</code>ï¼šæœ€åä¸€è¡Œ</li>
</ul>
<hr/>
<h4 data-id="heading-36"><strong>åœºæ™¯äº”ï¼šå¤šä¸ªæ“ä½œç»„åˆ</strong></h4>
<p><strong>é—®é¢˜</strong>: éœ€è¦åŒæ—¶è¿›è¡Œå¤šç§ç¼–è¾‘æ“ä½œ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ–¹æ³•1ï¼šä½¿ç”¨å¤šä¸ª -e</span>
sed -e '/^$/d' -e 's/ERROR/<span class="hljs-section">[é”™è¯¯]</span>/g' -e '/DEBUG/d' app.log


<span class="hljs-comment"># æ–¹æ³•2ï¼šä½¿ç”¨åˆ†å·åˆ†éš”</span>
sed '/^$/d<span class="hljs-comment">; s/ERROR/[é”™è¯¯]/g; /DEBUG/d' app.log</span>


<span class="hljs-comment"># æ–¹æ³•3ï¼šä½¿ç”¨å¤šè¡Œï¼ˆå¯è¯»æ€§æ›´å¥½ï¼‰</span>
sed '
/^$/d
s/ERROR/<span class="hljs-section">[é”™è¯¯]</span>/g
/DEBUG/d
' app.log


<span class="hljs-comment"># å¤æ‚å¤„ç†ç¤ºä¾‹</span>
sed -n '
/ERROR/!d          <span class="hljs-comment"># åªä¿ç•™ERRORè¡Œ</span>
s/ERROR/<span class="hljs-section">[é”™è¯¯]</span>/g   <span class="hljs-comment"># æ›¿æ¢ERROR</span>
s/WARN/<span class="hljs-section">[è­¦å‘Š]</span>/g    <span class="hljs-comment"># æ›¿æ¢WARN</span>
p                  <span class="hljs-comment"># æ‰“å°ç»“æœ</span>
' app.log
</code></pre>
<hr/>
<h3 data-id="heading-37">ğŸ“Š sed å‘½ä»¤é€ŸæŸ¥è¡¨</h3>


















































<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>s/old/new/</code></td><td>æ›¿æ¢ï¼ˆsubstituteï¼‰</td><td><code>sed 's/ERROR/é”™è¯¯/'</code></td></tr><tr><td><code>d</code></td><td>åˆ é™¤ï¼ˆdeleteï¼‰</td><td><code>sed '/DEBUG/d'</code></td></tr><tr><td><code>p</code></td><td>æ‰“å°ï¼ˆprintï¼‰</td><td><code>sed -n '/ERROR/p'</code></td></tr><tr><td><code>i</code></td><td>æ’å…¥ï¼ˆinsertï¼‰</td><td><code>sed '/ERROR/i æ ‡è®°'</code></td></tr><tr><td><code>a</code></td><td>è¿½åŠ ï¼ˆappendï¼‰</td><td><code>sed '/ERROR/a æ ‡è®°'</code></td></tr><tr><td><code>c</code></td><td>æ›¿æ¢æ•´è¡Œï¼ˆchangeï¼‰</td><td><code>sed '/ERROR/c é”™è¯¯è¡Œ'</code></td></tr><tr><td><code>y</code></td><td>å­—ç¬¦è½¬æ¢</td><td><code>sed 'y/abc/ABC/'</code></td></tr><tr><td><code>q</code></td><td>é€€å‡ºï¼ˆquitï¼‰</td><td><code>sed '10q'</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-38">ğŸ“Š sed å‚æ•°é€ŸæŸ¥è¡¨</h3>








































<table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>-n</code></td><td>é™é»˜æ¨¡å¼ï¼Œä¸è‡ªåŠ¨æ‰“å°</td><td><code>sed -n '/ERROR/p'</code></td></tr><tr><td><code>-e</code></td><td>æ‰§è¡Œå¤šä¸ªç¼–è¾‘å‘½ä»¤</td><td><code>sed -e 's/a/b/' -e 's/c/d/'</code></td></tr><tr><td><code>-i</code></td><td>ç›´æ¥ä¿®æ”¹æ–‡ä»¶</td><td><code>sed -i 's/old/new/g' file</code></td></tr><tr><td><code>-i.bak</code></td><td>ä¿®æ”¹å‰å¤‡ä»½</td><td><code>sed -i.bak 's/old/new/g' file</code></td></tr><tr><td><code>-r</code></td><td>ä½¿ç”¨æ‰©å±•æ­£åˆ™</td><td><code>sed -r 's/[0-9]+/NUM/g'</code></td></tr><tr><td><code>-f</code></td><td>ä»æ–‡ä»¶è¯»å–å‘½ä»¤</td><td><code>sed -f script.sed file</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-39">ğŸ“Š sed åœ°å€èŒƒå›´</h3>













































<table><thead><tr><th>åœ°å€</th><th>å«ä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>n</code></td><td>ç¬¬nè¡Œ</td><td><code>sed '5d'</code> åˆ é™¤ç¬¬5è¡Œ</td></tr><tr><td><code>n,m</code></td><td>ç¬¬nåˆ°mè¡Œ</td><td><code>sed '10,20d'</code> åˆ é™¤10-20è¡Œ</td></tr><tr><td><code>n,+m</code></td><td>ç¬¬nè¡ŒåŠåmè¡Œ</td><td><code>sed '10,+5d'</code> åˆ é™¤10è¡ŒåŠå5è¡Œ</td></tr><tr><td><code>n~m</code></td><td>ä»nå¼€å§‹æ¯mè¡Œ</td><td><code>sed '1~2d'</code> åˆ é™¤å¥‡æ•°è¡Œ</td></tr><tr><td><code>$</code></td><td>æœ€åä¸€è¡Œ</td><td><code>sed '$d'</code> åˆ é™¤æœ€åä¸€è¡Œ</td></tr><tr><td><code>/pattern/</code></td><td>åŒ¹é…çš„è¡Œ</td><td><code>sed '/ERROR/d'</code> åˆ é™¤ERRORè¡Œ</td></tr><tr><td><code>/p1/,/p2/</code></td><td>ä»p1åˆ°p2</td><td><code>sed '/å¼€å§‹/,/ç»“æŸ/d'</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-40">ğŸ’¡ sed å®æˆ˜æŠ€å·§</h3>
<ol>
<li>
<p><strong>å…ˆæµ‹è¯•å†ä¿®æ”¹</strong>: å»æ‰ <code>-i</code> å…ˆçœ‹æ•ˆæœ</p>
<pre><code class="hljs language-bash" lang="bash">sed <span class="hljs-string">'s/ERROR/é”™è¯¯/g'</span> app.log  <span class="hljs-comment"># å…ˆé¢„è§ˆ</span>
sed -i <span class="hljs-string">'s/ERROR/é”™è¯¯/g'</span> app.log  <span class="hljs-comment"># ç¡®è®¤åå†ä¿®æ”¹</span>
</code></pre>
</li>
<li>
<p><strong>å¤‡ä»½åŸæ–‡ä»¶</strong>: ä½¿ç”¨ <code>-i.bak</code></p>
<pre><code class="hljs language-c" lang="c">sed -i.bak <span class="hljs-string">'s/ERROR/é”™è¯¯/g'</span> app.<span class="hljs-built_in">log</span>  # ç”Ÿæˆapp.<span class="hljs-built_in">log</span>.bakå¤‡ä»½
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</strong>: æ›´çµæ´»çš„åŒ¹é…</p>
<pre><code class="hljs language-css" lang="css">sed 's/<span class="hljs-selector-attr">[0-9]</span>{<span class="hljs-number">1</span>,<span class="hljs-number">3</span>}.<span class="hljs-selector-attr">[0-9]</span>{<span class="hljs-number">1</span>,<span class="hljs-number">3</span>}.<span class="hljs-selector-attr">[0-9]</span>{<span class="hljs-number">1</span>,<span class="hljs-number">3</span>}.<span class="hljs-selector-attr">[0-9]</span>{<span class="hljs-number">1</span>,<span class="hljs-number">3</span>}/IP_HIDDEN/g'
</code></pre>
</li>
<li>
<p><strong>å¼•ç”¨åŒ¹é…å†…å®¹</strong>: ä½¿ç”¨ <code>&amp;</code></p>
<pre><code class="hljs language-bash" lang="bash">sed <span class="hljs-string">'s/ERROR/ã€&amp;ã€‘/g'</span>  <span class="hljs-comment"># ERRORå˜æˆã€ERRORã€‘</span>
</code></pre>
</li>
<li>
<p><strong>åˆ†ç»„å¼•ç”¨</strong>: ä½¿ç”¨ <code>\1</code> <code>\2</code></p>
<pre><code class="hljs language-ini" lang="ini">sed 's/$<span class="hljs-section">[0-9]</span>*$-$<span class="hljs-section">[0-9]</span>*$/\2-\1/g'  <span class="hljs-comment"># äº¤æ¢ä¸¤ä¸ªæ•°å­—</span>
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-41">å››ã€grep + awk + sed ç»„åˆä½¿ç”¨</h2>
<h3 data-id="heading-42">ğŸ¯ ä¸‰å‰‘å®¢åä½œ</h3>
<p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œè¿™ä¸‰ä¸ªå‘½ä»¤ç»å¸¸ç»„åˆä½¿ç”¨ï¼Œå„å¸å…¶èŒï¼š</p>
<ul>
<li><strong>grep</strong>ï¼šè¿‡æ»¤å‡ºéœ€è¦çš„è¡Œ</li>
<li><strong>awk</strong>ï¼šæå–å’Œç»Ÿè®¡æ•°æ®</li>
<li><strong>sed</strong>ï¼šæ ¼å¼åŒ–å’Œæ›¿æ¢å†…å®¹</li>
</ul>
<hr/>
<h3 data-id="heading-43">ğŸ“‹ å®æˆ˜ç»„åˆæ¡ˆä¾‹</h3>
<h4 data-id="heading-44"><strong>æ¡ˆä¾‹1ï¼šåˆ†æé”™è¯¯æ—¥å¿—</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æå–ERRORæ—¥å¿—ï¼Œç»Ÿè®¡å„ç±»é”™è¯¯æ¬¡æ•°</span>
grep <span class="hljs-string">"ERROR"</span> app.log | awk <span class="hljs-string">'{print $5}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -rn


<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment">#   152 NullPointerException</span>
<span class="hljs-comment">#    89 TimeoutException</span>
<span class="hljs-comment">#    23 IOException</span>
</code></pre>
<p><strong>æµç¨‹è¯´æ˜</strong>:</p>
<ol>
<li><code>grep "ERROR"</code>ï¼šè¿‡æ»¤å‡ºERRORè¡Œ</li>
<li><code>awk '{print $5}'</code>ï¼šæå–ç¬¬5åˆ—ï¼ˆå¼‚å¸¸ç±»å‹ï¼‰</li>
<li><code>sort</code>ï¼šæ’åº</li>
<li><code>uniq -c</code>ï¼šç»Ÿè®¡é‡å¤æ¬¡æ•°</li>
<li><code>sort -rn</code>ï¼šæŒ‰æ•°é‡å€’åº</li>
</ol>
<hr/>
<h4 data-id="heading-45"><strong>æ¡ˆä¾‹2ï¼šåˆ†ææ…¢è¯·æ±‚</strong></h4>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥æ‰¾å“åº”æ—¶é—´&gt;1ç§’çš„è¯·æ±‚ï¼Œæ ¼å¼åŒ–è¾“å‡º</span>
<span class="hljs-keyword">grep</span> <span class="hljs-string">"access"</span> app.log | awk <span class="hljs-string">'$10 &gt; 1000 {print $1, $7, $10}'</span> | sed <span class="hljs-string">'s/ms/æ¯«ç§’/g'</span>


<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># 2025-12-19 /api/user 1250æ¯«ç§’</span>
<span class="hljs-comment"># 2025-12-19 /api/order 1800æ¯«ç§’</span>
</code></pre>
<p><strong>æµç¨‹è¯´æ˜</strong>:</p>
<ol>
<li><code>grep "access"</code>ï¼šè¿‡æ»¤è®¿é—®æ—¥å¿—</li>
<li><code>awk '$10 &gt; 1000'</code>ï¼šè¿‡æ»¤å“åº”æ—¶é—´&gt;1000ms</li>
<li><code>print $1, $7, $10</code>ï¼šæå–æ—¶é—´ã€URLã€å“åº”æ—¶é—´</li>
<li><code>sed 's/ms/æ¯«ç§’/g'</code>ï¼šæ›¿æ¢å•ä½</li>
</ol>
<hr/>
<h4 data-id="heading-46"><strong>æ¡ˆä¾‹3ï¼šç»Ÿè®¡æ¯å°æ—¶é”™è¯¯æ•°</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»Ÿè®¡æ¯å°æ—¶çš„ERRORæ•°é‡</span>
grep <span class="hljs-string">"ERROR"</span> app.log | awk <span class="hljs-string">'{print substr($1,1,13)}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c


<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment">#   45 2025-12-19 10</span>
<span class="hljs-comment">#   89 2025-12-19 11</span>
<span class="hljs-comment">#   23 2025-12-19 12</span>
</code></pre>
<p><strong>æµç¨‹è¯´æ˜</strong>:</p>
<ol>
<li><code>grep "ERROR"</code>ï¼šè¿‡æ»¤ERRORè¡Œ</li>
<li><code>awk '{print substr($1,1,13)}'</code>ï¼šæå–æ—¶é—´åˆ°å°æ—¶ï¼ˆå‰13ä¸ªå­—ç¬¦ï¼‰</li>
<li><code>sort | uniq -c</code>ï¼šç»Ÿè®¡æ¯å°æ—¶å‡ºç°æ¬¡æ•°</li>
</ol>
<hr/>
<h4 data-id="heading-47"><strong>æ¡ˆä¾‹4ï¼šæ¸…ç†å’Œæ ¼å¼åŒ–å¼‚å¸¸å †æ ˆ</strong></h4>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æå–å¼‚å¸¸å †æ ˆå¹¶æ¸…ç†æ ¼å¼</span>
<span class="hljs-keyword">grep</span> -A <span class="hljs-number">20</span> <span class="hljs-string">"Exception"</span> app.log | sed <span class="hljs-string">'/^$/d'</span> | awk <span class="hljs-string">'{print NR, $0}'</span>


<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># 1 java.lang.NullPointerException</span>
<span class="hljs-comment"># 2     at com.example.Service.method(Service.java:100)</span>
<span class="hljs-comment"># 3     at com.example.Controller.handle(Controller.java:50)</span>
</code></pre>
<p><strong>æµç¨‹è¯´æ˜</strong>:</p>
<ol>
<li><code>grep -A 20 "Exception"</code>ï¼šæå–å¼‚å¸¸åŠå20è¡Œ</li>
<li><code>sed '/^$/d'</code>ï¼šåˆ é™¤ç©ºè¡Œ</li>
<li><code>awk '{print NR, $0}'</code>ï¼šæ·»åŠ è¡Œå·</li>
</ol>
<hr/>
<h4 data-id="heading-48"><strong>æ¡ˆä¾‹5ï¼šåˆ†æAPIè°ƒç”¨æƒ…å†µ</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»Ÿè®¡APIè°ƒç”¨æ¬¡æ•°TOP10</span>
grep <span class="hljs-string">"API"</span> access.log | awk <span class="hljs-string">'{print $7}'</span> | sed <span class="hljs-string">'s/?.*//g'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -rn | <span class="hljs-built_in">head</span> -10


<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment">#  1523 /api/user</span>
<span class="hljs-comment">#   892 /api/order</span>
<span class="hljs-comment">#   456 /api/product</span>
</code></pre>
<p><strong>æµç¨‹è¯´æ˜</strong>:</p>
<ol>
<li><code>grep "API"</code>ï¼šè¿‡æ»¤APIè¯·æ±‚</li>
<li><code>awk '{print $7}'</code>ï¼šæå–URL</li>
<li><code>sed 's/?.*//g'</code>ï¼šå»æ‰æŸ¥è¯¢å‚æ•°</li>
<li><code>sort | uniq -c</code>ï¼šç»Ÿè®¡æ¬¡æ•°</li>
<li><code>sort -rn | head -10</code>ï¼šå–TOP10</li>
</ol>
<hr/>
<h4 data-id="heading-49"><strong>æ¡ˆä¾‹6ï¼šç”Ÿæˆé”™è¯¯æŠ¥å‘Š</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆä»Šæ—¥é”™è¯¯ç»Ÿè®¡æŠ¥å‘Š</span>
{
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"===== é”™è¯¯æ—¥å¿—æŠ¥å‘Š ====="</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¥æœŸ: <span class="hljs-subst">$(date +%Y-%m-%d)</span>"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯æ€»æ•°:"</span>
  grep -c <span class="hljs-string">"ERROR"</span> app.log
  <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ç±»å‹åˆ†å¸ƒ:"</span>
  grep <span class="hljs-string">"ERROR"</span> app.log | awk <span class="hljs-string">'{print $5}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -rn
  <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯æ—¶é—´åˆ†å¸ƒ:"</span>
  grep <span class="hljs-string">"ERROR"</span> app.log | awk <span class="hljs-string">'{print substr($1,1,13)}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c
} | <span class="hljs-built_in">tee</span> error_report.txt
</code></pre>
<hr/>
<h2 data-id="heading-50">äº”ã€å®æˆ˜æŠ€å·§æ€»ç»“</h2>
<h3 data-id="heading-51">ğŸ¯ é€‰æ‹©åˆé€‚çš„å·¥å…·</h3>













































<table><thead><tr><th>éœ€æ±‚</th><th>æ¨èå·¥å…·</th><th>åŸå› </th></tr></thead><tbody><tr><td>æŸ¥æ‰¾å…³é”®å­—</td><td>grep</td><td>æœ€å¿«æœ€ç®€å•</td></tr><tr><td>æå–ç‰¹å®šåˆ—</td><td>awk</td><td>ä¸“é—¨å¤„ç†åˆ—æ•°æ®</td></tr><tr><td>ç»Ÿè®¡è®¡ç®—</td><td>awk</td><td>æ”¯æŒæ•°å­¦è¿ç®—</td></tr><tr><td>æ›¿æ¢æ–‡æœ¬</td><td>sed</td><td>æ‰¹é‡æ›¿æ¢æ•ˆç‡é«˜</td></tr><tr><td>åˆ é™¤è¡Œ</td><td>sed</td><td>çµæ´»çš„è¡Œæ“ä½œ</td></tr><tr><td>å¤æ‚åˆ†æ</td><td>awk</td><td>åŠŸèƒ½æœ€å¼ºå¤§</td></tr><tr><td>ç»„åˆæ“ä½œ</td><td>grep+awk+sed</td><td>å„å–æ‰€é•¿</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-52">ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li>
<p><strong>å…ˆè¿‡æ»¤å†å¤„ç†</strong>: ç”¨ grep å…ˆç¼©å°èŒƒå›´</p>
<pre><code class="hljs language-lua" lang="lua">grep <span class="hljs-string">"ERROR"</span> <span class="hljs-built_in">huge</span>.<span class="hljs-built_in">log</span> | awk <span class="hljs-string">'{ç»Ÿè®¡}'</span>  # å¥½
awk <span class="hljs-string">'/ERROR/ {ç»Ÿè®¡}'</span> <span class="hljs-built_in">huge</span>.<span class="hljs-built_in">log</span>  # è¾ƒæ…¢
</code></pre>
</li>
<li>
<p><strong>é¿å…ä¸å¿…è¦çš„ç®¡é“</strong>: èƒ½ä¸€æ­¥å®Œæˆä¸è¦åˆ†å¤šæ­¥</p>
<pre><code class="hljs language-perl" lang="perl">awk <span class="hljs-string">'/ERROR/ {print $1}'</span> <span class="hljs-keyword">log</span>  <span class="hljs-comment"># å¥½</span>
<span class="hljs-keyword">grep</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">log</span> | awk <span class="hljs-string">'{print $1}'</span>  <span class="hljs-comment"># å¤šä½™</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨åˆé€‚çš„å·¥å…·</strong>: ä¸è¦ç”¨ sed åš awk çš„äº‹</p>
<pre><code class="hljs language-bash" lang="bash">awk <span class="hljs-string">'{print $1}'</span> <span class="hljs-built_in">log</span>  <span class="hljs-comment"># å¥½</span>
sed <span class="hljs-string">'s/.* $[^ ]*$$/\1/'</span> <span class="hljs-built_in">log</span>  <span class="hljs-comment"># å¤æ‚ä¸”æ…¢</span>
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-53">ğŸ” è°ƒè¯•æŠ€å·§</h3>
<ol>
<li>
<p><strong>é€æ­¥è°ƒè¯•</strong>: ä¸€æ­¥æ­¥æ·»åŠ ç®¡é“</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">grep</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">log</span>  <span class="hljs-comment"># ç¬¬1æ­¥ï¼šçœ‹çœ‹è¿‡æ»¤ç»“æœ</span>
<span class="hljs-keyword">grep</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">log</span> | awk <span class="hljs-string">'{print $5}'</span>  <span class="hljs-comment"># ç¬¬2æ­¥ï¼šçœ‹çœ‹æå–ç»“æœ</span>
<span class="hljs-keyword">grep</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">log</span> | awk <span class="hljs-string">'{print $5}'</span> | <span class="hljs-keyword">sort</span> | uniq -c  <span class="hljs-comment"># ç¬¬3æ­¥ï¼šå®Œæ•´æµç¨‹</span>
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ head é™åˆ¶è¾“å‡º</strong>: é¿å…åˆ·å±</p>
<pre><code class="hljs language-bash" lang="bash">grep <span class="hljs-string">"ERROR"</span> huge.log | <span class="hljs-built_in">head</span> -20  <span class="hljs-comment"># åªçœ‹å‰20è¡Œ</span>
</code></pre>
</li>
<li>
<p><strong>ä¿å­˜ä¸­é—´ç»“æœ</strong>: æ–¹ä¾¿è°ƒè¯•</p>
<pre><code class="hljs language-lua" lang="lua">grep <span class="hljs-string">"ERROR"</span> <span class="hljs-built_in">log</span> &gt; <span class="hljs-built_in">error</span>.tmp
awk <span class="hljs-string">'{print $5}'</span> <span class="hljs-built_in">error</span>.tmp &gt; types.tmp
</code></pre>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NextCloudç§æœ‰äº‘ç›˜å®Œæ•´éƒ¨ç½²æŒ‡å—]]></title>    <link>https://juejin.cn/post/7585085798809190427</link>    <guid>https://juejin.cn/post/7585085798809190427</guid>    <pubDate>2025-12-19T03:01:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809190427" data-draft-id="7585097023747473423" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NextCloudç§æœ‰äº‘ç›˜å®Œæ•´éƒ¨ç½²æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T03:01:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NextCloudç§æœ‰äº‘ç›˜å®Œæ•´éƒ¨ç½²æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:01:14.000Z" title="Fri Dec 19 2025 03:01:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯¦è§£NextCloudçš„éƒ¨ç½²é…ç½®ï¼Œæ‰“é€ åŠŸèƒ½å®Œå–„çš„ç§æœ‰äº‘å­˜å‚¨æœåŠ¡ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ç™¾åº¦ç½‘ç›˜é™é€Ÿã€iCloudç©ºé—´è´µã€Google Driveå›½å†…ç”¨ä¸äº†...</p>
<p>ä¸å¦‚è‡ªå»ºä¸€ä¸ª<strong>ç§æœ‰äº‘ç›˜</strong>ï¼š</p>
<ul>
<li>æ•°æ®å®Œå…¨è‡ªå·±æŒæ§</li>
<li>ä¸é™é€Ÿã€ä¸é™å®¹é‡</li>
<li>åŠŸèƒ½æ¯”ç½‘ç›˜è¿˜å¤š</li>
</ul>
<p><strong>NextCloud</strong>æ˜¯æœ€æµè¡Œçš„å¼€æºç§æœ‰äº‘æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€NextCloudç®€ä»‹</h2>
<h3 data-id="heading-2">1.1 åŠŸèƒ½ç‰¹ç‚¹</h3>
<pre><code class="hljs language-diff" lang="diff">æ ¸å¿ƒåŠŸèƒ½ï¼š
<span class="hljs-deletion">- æ–‡ä»¶å­˜å‚¨ä¸åŒæ­¥</span>
<span class="hljs-deletion">- å¤šè®¾å¤‡åŒæ­¥</span>
<span class="hljs-deletion">- æ–‡ä»¶åˆ†äº«</span>
<span class="hljs-deletion">- ç‰ˆæœ¬å†å²</span>

æ‰©å±•åŠŸèƒ½ï¼š
<span class="hljs-deletion">- åœ¨çº¿Officeï¼ˆCollabora/OnlyOfficeï¼‰</span>
<span class="hljs-deletion">- æ—¥å†ã€è”ç³»äºº</span>
<span class="hljs-deletion">- ç¬”è®°ã€ä»»åŠ¡</span>
<span class="hljs-deletion">- è§†é¢‘é€šè¯</span>
<span class="hljs-deletion">- é‚®ä»¶å®¢æˆ·ç«¯</span>
</code></pre>
<h3 data-id="heading-3">1.2 å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆ</h3>









































<table><thead><tr><th>ç‰¹æ€§</th><th>NextCloud</th><th>Seafile</th><th>ç¾¤æ™–Drive</th></tr></thead><tbody><tr><td>å¼€æº</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td>åŠŸèƒ½</td><td>æœ€å…¨</td><td>æ–‡ä»¶ä¸ºä¸»</td><td>æ–‡ä»¶ä¸ºä¸»</td></tr><tr><td>æ€§èƒ½</td><td>ä¸­ç­‰</td><td>æœ€å¿«</td><td>å¿«</td></tr><tr><td>æ‰©å±•</td><td>ä¸°å¯Œ</td><td>æœ‰é™</td><td>æœ‰é™</td></tr><tr><td>è‡ªå»º</td><td>âœ…</td><td>âœ…</td><td>éœ€ç¾¤æ™–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">äºŒã€Dockeréƒ¨ç½²</h2>
<h3 data-id="heading-5">2.1 ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">nextcloud/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ db/            <span class="hljs-comment"># æ•°æ®åº“æ•°æ®</span>
â”œâ”€â”€ html/          <span class="hljs-comment"># NextCloudæ•°æ®</span>
â””â”€â”€ config/        <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-6">2.2 Docker Composeé…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.yml</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mariadb:10.11</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud-db</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--transaction-isolation=READ-COMMITTED</span> <span class="hljs-string">--binlog-format=ROW</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./db:/var/lib/mysql</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=nextcloud_root_password</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=nextcloud_password</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=nextcloud</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud-redis</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-attr">app:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nextcloud:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:80"</span>
    <span class="hljs-attr">links:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./html:/var/www/html</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config:/var/www/html/config</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/path/to/data:/var/www/html/data</span>  <span class="hljs-comment"># æ•°æ®ç›®å½•ï¼Œå»ºè®®ç”¨å¤§ç¡¬ç›˜</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_HOST=db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=nextcloud_password</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_HOST=redis</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">NEXTCLOUD_TRUSTED_DOMAINS=your.domain.com</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
</code></pre>
<h3 data-id="heading-7">2.3 å¯åŠ¨æœåŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p db html config

<span class="hljs-comment"># å¯åŠ¨</span>
docker compose up -d

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker compose logs -f app
</code></pre>
<h3 data-id="heading-8">2.4 åˆå§‹è®¾ç½®</h3>
<pre><code class="hljs language-markdown" lang="markdown">æµè§ˆå™¨è®¿é—®ï¼šhttp://æœåŠ¡å™¨IP:8080

<span class="hljs-bullet">1.</span> åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
<span class="hljs-bullet">2.</span> æ•°æ®åº“å·²è‡ªåŠ¨é…ç½®ï¼ˆDockerç¯å¢ƒå˜é‡ï¼‰
<span class="hljs-bullet">3.</span> å®Œæˆå®‰è£…
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-10">3.1 é…ç½®PHP</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥å®¹å™¨</span>
docker <span class="hljs-built_in">exec</span> -it nextcloud bash

<span class="hljs-comment"># ç¼–è¾‘phpé…ç½®</span>
<span class="hljs-comment"># /usr/local/etc/php/conf.d/nextcloud.ini</span>
memory_limit=512M
upload_max_filesize=16G
post_max_size=16G
max_execution_time=3600
max_input_time=3600
</code></pre>
<h3 data-id="heading-11">3.2 Redisç¼“å­˜é…ç½®</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// config/config.php æ·»åŠ </span>
<span class="hljs-string">'memcache.local'</span> =&gt; <span class="hljs-string">'\\OC\\Memcache\\APCu'</span>,
<span class="hljs-string">'memcache.distributed'</span> =&gt; <span class="hljs-string">'\\OC\\Memcache\\Redis'</span>,
<span class="hljs-string">'memcache.locking'</span> =&gt; <span class="hljs-string">'\\OC\\Memcache\\Redis'</span>,
<span class="hljs-string">'redis'</span> =&gt; [
    <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">'redis'</span>,
    <span class="hljs-string">'port'</span> =&gt; <span class="hljs-number">6379</span>,
],
</code></pre>
<h3 data-id="heading-12">3.3 åå°ä»»åŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨cronæ›¿ä»£AJAXï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment"># å®¿ä¸»æœºæ·»åŠ å®šæ—¶ä»»åŠ¡</span>
crontab -e

<span class="hljs-comment"># æ·»åŠ ï¼š</span>
*/5 * * * * docker <span class="hljs-built_in">exec</span> -u www-data nextcloud php cron.php

<span class="hljs-comment"># NextCloudè®¾ç½®</span>
è®¾ç½® â†’ ç®¡ç† â†’ åŸºæœ¬è®¾ç½® â†’ åå°ä»»åŠ¡ â†’ Cron
</code></pre>
<h3 data-id="heading-13">3.4 æ•°æ®åº“ä¼˜åŒ–</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿æ¥æ•°æ®åº“</span>
docker <span class="hljs-keyword">exec</span> <span class="hljs-operator">-</span>it nextcloud<span class="hljs-operator">-</span>db mysql <span class="hljs-operator">-</span>u root <span class="hljs-operator">-</span>p

<span class="hljs-comment">-- ä¼˜åŒ–è¡¨</span>
USE nextcloud;
OPTIMIZE <span class="hljs-keyword">TABLE</span> oc_filecache;
OPTIMIZE <span class="hljs-keyword">TABLE</span> oc_files_trash;
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€HTTPSé…ç½®</h2>
<h3 data-id="heading-15">4.1 Nginxåå‘ä»£ç†</h3>
<pre><code class="hljs language-nginx" lang="nginx"># /etc/nginx/conf.d/nextcloud.conf
server {
    listen 80;
    server_name cloud.example.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name cloud.example.com;

    ssl_certificate /etc/letsencrypt/live/cloud.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/cloud.example.com/privkey.pem;

    client_max_body_size 16G;
    client_body_timeout 3600s;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_connect_timeout 3600;
        proxy_send_timeout 3600;
        proxy_read_timeout 3600;
    }

    location /.well-known/carddav {
        return 301 $scheme://$host/remote.php/dav;
    }
    
    location /.well-known/caldav {
        return 301 $scheme://$host/remote.php/dav;
    }
}
</code></pre>
<h3 data-id="heading-16">4.2 æ›´æ–°é…ç½®</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// config/config.php</span>
<span class="hljs-string">'trusted_domains'</span> =&gt; [
    <span class="hljs-number">0</span> =&gt; <span class="hljs-string">'cloud.example.com'</span>,
    <span class="hljs-number">1</span> =&gt; <span class="hljs-string">'192.168.1.100'</span>,
],
<span class="hljs-string">'trusted_proxies'</span> =&gt; [<span class="hljs-string">'127.0.0.1'</span>],
<span class="hljs-string">'overwrite.cli.url'</span> =&gt; <span class="hljs-string">'https://cloud.example.com'</span>,
<span class="hljs-string">'overwriteprotocol'</span> =&gt; <span class="hljs-string">'https'</span>,
</code></pre>
<hr/>
<h2 data-id="heading-17">äº”ã€å®¢æˆ·ç«¯é…ç½®</h2>
<h3 data-id="heading-18">5.1 æ¡Œé¢å®¢æˆ·ç«¯</h3>
<pre><code class="hljs language-bash" lang="bash">ä¸‹è½½ï¼šhttps://nextcloud.com/install/<span class="hljs-comment">#install-clients</span>

æ”¯æŒï¼šWindowsã€macOSã€Linux

é…ç½®ï¼š
1. æœåŠ¡å™¨åœ°å€ï¼šhttps://cloud.example.com
2. ç™»å½•è´¦å·
3. é€‰æ‹©åŒæ­¥æ–‡ä»¶å¤¹
</code></pre>
<h3 data-id="heading-19">5.2 ç§»åŠ¨å®¢æˆ·ç«¯</h3>
<pre><code class="hljs language-diff" lang="diff">iOSï¼šApp Storeæœç´¢"Nextcloud"
Androidï¼šPlayå•†åº—æˆ–F-Droid

åŠŸèƒ½ï¼š
<span class="hljs-deletion">- æ–‡ä»¶æµè§ˆ/ä¸Šä¼ /ä¸‹è½½</span>
<span class="hljs-deletion">- ç…§ç‰‡è‡ªåŠ¨ä¸Šä¼ </span>
<span class="hljs-deletion">- ç¦»çº¿æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-20">5.3 WebDAVè®¿é—®</h3>
<pre><code class="hljs language-diff" lang="diff">åœ°å€ï¼šhttps://cloud.example.com/remote.php/dav/files/ç”¨æˆ·å/

å¯ç”¨äºï¼š
<span class="hljs-deletion">- Windowsæ˜ å°„ç½‘ç»œé©±åŠ¨å™¨</span>
<span class="hljs-deletion">- macOSè¿æ¥æœåŠ¡å™¨</span>
<span class="hljs-deletion">- ç¬¬ä¸‰æ–¹æ–‡ä»¶ç®¡ç†å™¨</span>
</code></pre>
<hr/>
<h2 data-id="heading-21">å…­ã€è¿œç¨‹è®¿é—®æ–¹æ¡ˆ</h2>
<h3 data-id="heading-22">6.1 é—®é¢˜</h3>
<pre><code class="hljs">NextCloudéƒ¨ç½²åœ¨å®¶é‡Œ/å…¬å¸å†…ç½‘
å¦‚ä½•ä»å¤–ç½‘è®¿é—®ï¼Ÿ
</code></pre>
<h3 data-id="heading-23">6.2 æ–¹æ¡ˆå¯¹æ¯”</h3>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®‰å…¨æ€§</th><th>é€Ÿåº¦</th><th>é…ç½®éš¾åº¦</th></tr></thead><tbody><tr><td>å…¬ç½‘æš´éœ²+HTTPS</td><td>âš ï¸ ä¸­</td><td>å¿«</td><td>ä¸­</td></tr><tr><td>Cloudflare Tunnel</td><td>âœ… é«˜</td><td>ä¸­</td><td>ä¸­</td></tr><tr><td>ç»„ç½‘è½¯ä»¶</td><td>âœ… é«˜</td><td>å¿«</td><td>ä½</td></tr></tbody></table>
<h3 data-id="heading-24">6.3 ç»„ç½‘æ–¹æ¡ˆï¼ˆæ¨èï¼‰</h3>
<p>ä½¿ç”¨ç»„ç½‘è½¯ä»¶ï¼ˆå¦‚æ˜Ÿç©ºç»„ç½‘ï¼‰å®ç°å®‰å…¨è®¿é—®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç»„ç½‘è™šæ‹Ÿå±€åŸŸç½‘                      â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  æœåŠ¡å™¨       â”‚           â”‚  æ‰‹æœº/ç”µè„‘   â”‚        â”‚
â”‚  â”‚  NextCloud   â”‚           â”‚  å®¢æˆ·ç«¯      â”‚        â”‚
â”‚  â”‚  <span class="hljs-number">10.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>   â”‚           â”‚  <span class="hljs-number">10.10</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                      â”‚
â”‚  å®¢æˆ·ç«¯é…ç½®æœåŠ¡å™¨åœ°å€ï¼šhttp:<span class="hljs-comment">//10.10.0.1:8080        â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸éœ€è¦å…¬ç½‘IP</li>
<li>ä¸éœ€è¦é…ç½®HTTPSï¼ˆå†…ç½‘å¯ç”¨HTTPï¼‰</li>
<li>ä¸æš´éœ²ç«¯å£åˆ°å…¬ç½‘</li>
<li>ç§»åŠ¨å®¢æˆ·ç«¯ä¹Ÿèƒ½ç”¨</li>
</ul>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æœåŠ¡å™¨å®‰è£…ç»„ç½‘å®¢æˆ·ç«¯</li>
<li>æ‰‹æœº/ç”µè„‘å®‰è£…ç»„ç½‘å®¢æˆ·ç«¯</li>
<li>ç™»å½•åŒä¸€è´¦å·</li>
<li>NextCloudå®¢æˆ·ç«¯å¡«å†™ç»„ç½‘IP</li>
</ol>
<hr/>
<h2 data-id="heading-25">ä¸ƒã€å¸¸ç”¨åº”ç”¨</h2>
<h3 data-id="heading-26">7.1 Officeå¥—ä»¶</h3>
<p><strong>Collabora Onlineï¼ˆæ¨èï¼‰ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.yml æ·»åŠ </span>
  <span class="hljs-attr">collabora:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">collabora/code</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">collabora</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9980:9980"</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">domain=cloud\\.example\\.com</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">extra_params=--o:ssl.enable=false</span>
    <span class="hljs-attr">cap_add:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MKNOD</span>
</code></pre>
<pre><code class="hljs language-arduino" lang="arduino">NextCloudåº”ç”¨ â†’ å®‰è£…<span class="hljs-string">"Collabora Online"</span>
è®¾ç½® â†’ ç®¡ç† â†’ Collabora Online
æœåŠ¡å™¨åœ°å€ï¼šhttp:<span class="hljs-comment">//collabora:9980</span>
</code></pre>
<h3 data-id="heading-27">7.2 å…¶ä»–æ¨èåº”ç”¨</h3>
<pre><code class="hljs language-diff" lang="diff">æ–‡ä»¶ç®¡ç†ï¼š
<span class="hljs-deletion">- External storage supportï¼ˆå¤–éƒ¨å­˜å‚¨ï¼‰</span>
<span class="hljs-deletion">- Files Right Clickï¼ˆå³é”®èœå•ï¼‰</span>

æ•ˆç‡å·¥å…·ï¼š
<span class="hljs-deletion">- Calendarï¼ˆæ—¥å†ï¼‰</span>
<span class="hljs-deletion">- Contactsï¼ˆè”ç³»äººï¼‰</span>
<span class="hljs-deletion">- Tasksï¼ˆä»»åŠ¡ï¼‰</span>
<span class="hljs-deletion">- Notesï¼ˆç¬”è®°ï¼‰</span>
<span class="hljs-deletion">- Deckï¼ˆçœ‹æ¿ï¼‰</span>

å®‰å…¨ï¼š
<span class="hljs-deletion">- Two-Factor Authenticationï¼ˆä¸¤æ­¥éªŒè¯ï¼‰</span>
</code></pre>
<hr/>
<h2 data-id="heading-28">å…«ã€æ•°æ®è¿ç§»</h2>
<h3 data-id="heading-29">8.1 ä»å…¶ä»–ç½‘ç›˜è¿ç§»</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†æ–‡ä»¶å¤åˆ¶åˆ°NextCloudæ•°æ®ç›®å½•</span>
<span class="hljs-built_in">cp</span> -r /old/data/* /path/to/nextcloud/data/username/files/

<span class="hljs-comment"># ä¿®å¤æƒé™</span>
docker <span class="hljs-built_in">exec</span> -u www-data nextcloud php occ files:scan --all
</code></pre>
<h3 data-id="heading-30">8.2 å¤‡ä»½</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¤‡ä»½è„šæœ¬</span>
<span class="hljs-comment">#!/bin/bash</span>
DATE=$(<span class="hljs-built_in">date</span> +%Y%m%d)

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
docker compose down

<span class="hljs-comment"># å¤‡ä»½æ•°æ®åº“</span>
docker run --<span class="hljs-built_in">rm</span> -v nextcloud_db:/db -v $(<span class="hljs-built_in">pwd</span>):/backup alpine tar czf /backup/db_<span class="hljs-variable">$DATE</span>.tar.gz /db

<span class="hljs-comment"># å¤‡ä»½æ•°æ®</span>
tar czf data_<span class="hljs-variable">$DATE</span>.tar.gz html config

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
docker compose up -d
</code></pre>
<hr/>
<h2 data-id="heading-31">ä¹ã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-32">Q1ï¼šä¸Šä¼ å¤§æ–‡ä»¶å¤±è´¥</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// config/config.php</span>
<span class="hljs-string">'upload_max_filesize'</span> =&gt; <span class="hljs-string">'16G'</span>,

<span class="hljs-comment">// Nginxé…ç½®</span>
client_max_body_size <span class="hljs-number">16</span>G;
client_body_timeout <span class="hljs-number">3600</span>s;
</code></pre>
<h3 data-id="heading-33">Q2ï¼šåŒæ­¥æ…¢</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ£€æŸ¥æœåŠ¡å™¨æ€§èƒ½
<span class="hljs-bullet">2.</span> å¯ç”¨Redisç¼“å­˜
<span class="hljs-bullet">3.</span> æ£€æŸ¥ç½‘ç»œå¸¦å®½
<span class="hljs-bullet">4.</span> ä½¿ç”¨ç»„ç½‘è½¯ä»¶è·å¾—æ›´ç¨³å®šè¿æ¥
</code></pre>
<h3 data-id="heading-34">Q3ï¼šå†…å­˜ä¸è¶³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¢åŠ PHPå†…å­˜é™åˆ¶</span>
<span class="hljs-comment"># php.ini</span>
memory_limit=1024M
</code></pre>
<hr/>
<h2 data-id="heading-35">åã€æ€»ç»“</h2>
<p>NextCloudéƒ¨ç½²è¦ç‚¹ï¼š</p>
<ol>
<li><strong>å®‰è£…</strong>ï¼šDocker Composeæœ€ç®€å•</li>
<li><strong>æ€§èƒ½</strong>ï¼šRedisç¼“å­˜å¿…é…</li>
<li><strong>å®‰å…¨</strong>ï¼šç”Ÿäº§ç¯å¢ƒç”¨HTTPS</li>
<li><strong>è¿œç¨‹</strong>ï¼šç»„ç½‘æ–¹æ¡ˆæœ€ç®€å•å®‰å…¨</li>
<li><strong>å¤‡ä»½</strong>ï¼šå®šæœŸå¤‡ä»½æ•°æ®</li>
</ol>
<p><strong>æˆ‘çš„é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">æœåŠ¡å™¨ï¼šç¾¤æ™–NAS Docker
å­˜å‚¨ï¼š4TBç¡¬ç›˜
è®¿é—®ï¼šæ˜Ÿç©ºç»„ç½‘ï¼ˆæ‰‹æœºç”µè„‘éƒ½èƒ½è®¿é—®ï¼‰
ç”¨é€”ï¼š
<span class="hljs-deletion">- æ–‡ä»¶åŒæ­¥</span>
<span class="hljs-deletion">- ç…§ç‰‡å¤‡ä»½</span>
<span class="hljs-deletion">- æ–‡æ¡£åä½œ</span>
</code></pre>
<hr/>
<h2 data-id="heading-36">å‚è€ƒèµ„æ–™</h2>
<ol>
<li>NextCloudå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nextcloud.com%2F" target="_blank" title="https://docs.nextcloud.com/" ref="nofollow noopener noreferrer">docs.nextcloud.com/</a></li>
<li>NextCloud GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextcloud" target="_blank" title="https://github.com/nextcloud" ref="nofollow noopener noreferrer">github.com/nextcloud</a></li>
</ol>
<hr/>
<blockquote>
<p>ğŸ’¡ NextCloudæ˜¯æœ€å…¨èƒ½çš„ç§æœ‰äº‘æ–¹æ¡ˆï¼Œé…åˆç»„ç½‘è½¯ä»¶å¯ä»¥éšæ—¶éšåœ°è®¿é—®ä½ çš„æ•°æ®ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“redisstackä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7585085798809239579</link>    <guid>https://juejin.cn/post/7585085798809239579</guid>    <pubDate>2025-12-19T03:05:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809239579" data-draft-id="7584861353804005412" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“redisstackä½¿ç”¨"/> <meta itemprop="keywords" content="åç«¯,Java,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-19T03:05:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘å®¶é¢†å…»äº†ä¸ªç™½èƒ–èƒ–"/> <meta itemprop="url" content="https://juejin.cn/user/1152746990351032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“redisstackä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1152746990351032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘å®¶é¢†å…»äº†ä¸ªç™½èƒ–èƒ–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:05:01.000Z" title="Fri Dec 19 2025 03:05:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“</h2>
<p>å‘é‡å­˜å‚¨å®˜ç½‘åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fjava2ai.com%2Fdocs%2F1.0.0.2%2Ftutorials%2Fbasics%2Fvectorstore%2F%3Fspm%3D4347728f.3bacb33c.0.0.6e87a02dsabS42" target="_blank" title="https://java2ai.com/docs/1.0.0.2/tutorials/basics/vectorstore/?spm=4347728f.3bacb33c.0.0.6e87a02dsabS42" ref="nofollow noopener noreferrer">java2ai.com/docs/1.0.0.â€¦</a></p>
<h3 data-id="heading-1">å‘é‡æ˜¯ä»€ä¹ˆ</h3>
<p>å‘é‡: è¡¨ç¤ºå…·æœ‰å¤§å°å’Œæ–¹å‘çš„é‡</p>
<h3 data-id="heading-2">æ–‡æœ¬å‘é‡åŒ– Embedding Model</h3>
<p>åµŒå…¥ï¼ˆEmbeddingï¼‰çš„å·¥ä½œåŸç†æ˜¯å°†<code>æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘</code>è½¬æ¢ä¸ºç§°ä¸ºå‘é‡ï¼ˆVectorsï¼‰çš„<code>æµ®ç‚¹æ•°æ•°ç»„</code>ã€‚è¿™äº›å‘
é‡æ—¨åœ¨æ•æ‰æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘çš„å«ä¹‰ï¼ŒåµŒå…¥æ•°ç»„çš„é•¿åº¦ç§°ä¸ºå‘é‡çš„ç»´åº¦ï¼ˆDimensionalityï¼‰ã€‚</p>
<p><code>æ–‡æœ¬å‘é‡åŒ–</code>ï¼ˆText Vectorizationï¼‰æ˜¯æŒ‡å°†äººç±»å¯è¯»çš„æ–‡æœ¬ï¼ˆå¦‚å•è¯ã€å¥å­ã€æ®µè½æˆ–æ•´ç¯‡æ–‡æ¡£ï¼‰è½¬æ¢ä¸ºè®¡ç®—æœºå¯ä»¥<code>å¤„ç†çš„æ•°å€¼å‘é‡</code>ï¼ˆé€šå¸¸æ˜¯å®æ•°æ•°ç»„ï¼‰çš„è¿‡ç¨‹ã€‚è¿™æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å’Œæœºå™¨å­¦ä¹ ä¸­çš„å…³é”®é¢„å¤„ç†æ­¥éª¤ï¼Œå› ä¸ºç®—æ³•æ— æ³•ç›´æ¥ç†è§£æ–‡å­—ï¼Œä½†å¯ä»¥<code>é«˜æ•ˆå¤„ç†æ•°å­—</code></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦æ–‡æœ¬å‘é‡åŒ–ï¼Ÿ</p>
<ul>
<li>æœºå™¨å­¦ä¹ æ¨¡å‹åªèƒ½å¤„<code>ç†æ•°å€¼å‹</code>è¾“å…¥ã€‚</li>
<li>æ–‡æœ¬æœ¬èº«æ˜¯ç¦»æ•£ç¬¦å·ï¼Œéœ€æ˜ å°„åˆ°è¿ç»­æˆ–ç¦»æ•£çš„æ•°å€¼ç©ºé—´ã€‚</li>
<li>å‘é‡åŒ–è¿˜èƒ½ä¿ç•™è¯­ä¹‰ã€è¯­æ³•æˆ–ç»Ÿè®¡ä¿¡æ¯ï¼Œæå‡æ¨¡å‹æ•ˆæœã€‚</li>
</ul>
<h3 data-id="heading-3">å‘é‡æ•°æ®åº“</h3>
<p>å‘é‡å­˜å‚¨å®˜ç½‘åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fjava2ai.com%2Fdocs%2F1.0.0.2%2Ftutorials%2Fbasics%2Fvectorstore%2F%3Fspm%3D4347728f.3bacb33c.0.0.6e87a02dsabS42" target="_blank" title="https://java2ai.com/docs/1.0.0.2/tutorials/basics/vectorstore/?spm=4347728f.3bacb33c.0.0.6e87a02dsabS42" ref="nofollow noopener noreferrer">java2ai.com/docs/1.0.0.â€¦</a></p>
<p>é˜¿é‡Œå·´å·´å®˜ç½‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fembedding" target="_blank" title="https://help.aliyun.com/zh/model-studio/embedding" ref="nofollow noopener noreferrer">help.aliyun.com/zh/model-stâ€¦</a></p>
<p>å‘é‡å­˜å‚¨ï¼ˆ<code>VectorStore</code>ï¼‰æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œæ£€ç´¢<code>é«˜ç»´å‘é‡æ•°æ®</code>çš„æ•°æ®åº“æˆ–å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œå®ƒç‰¹åˆ«é€‚ç”¨äºå¤„ç†é‚£äº›ç»è¿‡<code>åµŒå…¥æ¨¡å‹è½¬åŒ–å</code>çš„æ•°æ®ã€‚åœ¨ VectorStore ä¸­ï¼ŒæŸ¥è¯¢ä¸ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸åŒã€‚å®ƒä»¬<code>æ‰§è¡Œç›¸ä¼¼æ€§æœç´¢</code>ï¼Œè€Œ<code>ä¸æ˜¯ç²¾ç¡®åŒ¹é…</code>ã€‚å‘é‡æ•°æ®åº“ç»´åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢ç²¾å‡†åº¦ä¹Ÿè¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆæœè¶Šå¥½ã€‚</p>
<p>æœ¬æ¬¡ä½¿ç”¨Redis8(RedisStack)ä½œä¸ºå‘é‡æ•°æ®åº“å­˜å‚¨ã€‚</p>
<h4 data-id="heading-4">RedisStackå½“ä½œå‘é‡å­˜å‚¨</h4>
<p>å®˜ç½‘åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fvectordbs%2Fredis.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/api/vectordbs/redis.html" ref="nofollow noopener noreferrer">docs.spring.io/spring-ai/râ€¦</a></p>
<p>RedisStackå…è´¹äº‘æ•°æ®åº“åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.redis.io%2F%23%2Fdatabases" target="_blank" title="https://cloud.redis.io/#/databases" ref="nofollow noopener noreferrer">cloud.redis.io/#/databases</a></p>
<p>RedisStack: æ˜¯Redis Labsæ¨å‡ºçš„ <code>å¢å¼ºç‰ˆRedis</code>,ä¸æ˜¯Redisæ›¿ä»£å“ï¼Œæ˜¯åŸºäºåŸç”ŸRedisåŸºç¡€åŠŸèƒ½çš„æ‹“å±•åŒ…ï¼Œä¸“ä¸ºæ„å»º<code>ç°ä»£å®æ—¶åº”ç”¨</code>è€Œç”Ÿã€‚</p>























































<table><thead><tr><th>åŠŸèƒ½</th><th>Redisï¼ˆæ ‡å‡†ç‰ˆï¼‰</th><th>Redis Stack</th></tr></thead><tbody><tr><td>åŸºç¡€æ•°æ®ç»“æ„ï¼ˆString, List, Hash ç­‰ï¼‰</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æŒä¹…åŒ–ã€å¤åˆ¶ã€é›†ç¾¤</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>å…¨æ–‡æœç´¢ï¼ˆç±»ä¼¼ Elasticsearchï¼‰</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… å†…ç½®Â <strong>RediSearch</strong>Â æ¨¡å—</td></tr><tr><td><strong>JSON æ–‡æ¡£å­˜å‚¨ä¸æŸ¥è¯¢</strong></td><td>âŒ éœ€ç”¨ String + åº”ç”¨å±‚è§£æ</td><td>âœ… å†…ç½®Â <strong>RedisJSON</strong>Â æ¨¡å—</td></tr><tr><td><strong>æ¦‚ç‡æ•°æ®ç»“æ„ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ã€Top-K ç­‰ï¼‰</strong></td><td>âŒ</td><td>âœ… å†…ç½®Â <strong>RedisBloom</strong>Â æ¨¡å—</td></tr><tr><td><strong>æ—¶åºæ•°æ®å¤„ç†</strong></td><td>âŒï¼ˆå¯ç”¨ Sorted Set æ¨¡æ‹Ÿï¼‰</td><td>âœ… å†…ç½®Â <strong>RedisTimeSeries</strong>Â æ¨¡å—</td></tr><tr><td><strong>å‘é‡ç›¸ä¼¼æ€§æœç´¢ï¼ˆç”¨äº AI/è¯­ä¹‰æœç´¢ï¼‰</strong></td><td>âŒ</td><td>âœ… å†…ç½®Â <strong>RedisVL / Vector Similarity Search (VSS)</strong></td></tr><tr><td><strong>å›¾å½¢æ•°æ®åº“èƒ½åŠ›</strong></td><td>âŒ</td><td>âœ…ï¼ˆé€šè¿‡ RediGraph æ¨¡å—ï¼Œéƒ¨åˆ†ç‰ˆæœ¬åŒ…å«ï¼‰</td></tr><tr><td><strong>å¯è§†åŒ–ç®¡ç†å·¥å…·</strong></td><td>âŒï¼ˆéœ€ç¬¬ä¸‰æ–¹å·¥å…·ï¼‰</td><td>âœ… è‡ªå¸¦Â <strong>Redis Insight</strong>ï¼ˆWeb UIï¼Œå¯æŸ¥æ•°æ®ã€ç›‘æ§ã€è°ƒè¯•ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-5">å¼€å‘æ­¥éª¤</h4>
<p>é˜¿é‡Œå·´å·´å®˜ç½‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fembedding" target="_blank" title="https://help.aliyun.com/zh/model-studio/embedding" ref="nofollow noopener noreferrer">help.aliyun.com/zh/model-stâ€¦</a></p>
<h5 data-id="heading-6">åˆ›å»ºmodule</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaebeaf141f8495e8414c6fe880b9443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5a626aKG5YW75LqG5Liq55m96IOW6IOW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766718300&amp;x-signature=f7kFVuL91rbRgI828vI%2BJXjn3iM%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-7">æ”¹POM</h5>
<p>å¼•å…¥spring-ai-starter-vector-store-redisä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.miao<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>SpringAIAlibaba-test01<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>SAA-08Embedding<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!--  æ¨¡å‹æœåŠ¡çµç§¯  è°ƒç”¨alibabaç”Ÿæ€çš„åè®® å¯¹æ ‡openaiåè®®   --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!--   å‘é‡æ•°æ®åº“ä¾èµ– redisstack    --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-vector-store-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.38<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h5 data-id="heading-8">æ”¹yml</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span>
  <span class="hljs-attr">servlet:</span>
    <span class="hljs-attr">encoding:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">force:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">charset:</span> <span class="hljs-string">UTF-8</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">SAA-07</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">dashscope:</span>
      <span class="hljs-attr">api-key:</span> <span class="hljs-string">${qwen-api-key}</span>
      <span class="hljs-attr">chat:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">qwen3-vl-flash</span>
      <span class="hljs-attr">emedding:</span>
        <span class="hljs-attr">options:</span>
          <span class="hljs-attr">model:</span> <span class="hljs-string">text-embedding-v4</span>
    <span class="hljs-attr">vectorstore:</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">initialize-schema:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">index-name:</span> <span class="hljs-string">custom-indexhaha</span>
        <span class="hljs-attr">prefix:</span> <span class="hljs-string">custom-index</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">host:</span> <span class="hljs-string">redis-16002.c1.us-east1-2.gce.cloud.redislabs.com</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">16002</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">password</span>
</code></pre>
<h5 data-id="heading-9">å¯åŠ¨ç±»</h5>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">miao</span>;

<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SAA08EmbeddingApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">SAA08EmbeddingApplication</span>.<span class="hljs-property">class</span>, args);
    }
}
</code></pre>
<h5 data-id="heading-10">ä¸šåŠ¡ç±»</h5>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">miao</span>.<span class="hljs-property">controller</span>;

<span class="hljs-keyword">import</span> com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">cloud</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">dashscope</span>.<span class="hljs-property">embedding</span>.<span class="hljs-property">DashScopeEmbeddingOptions</span>;
<span class="hljs-keyword">import</span> jakarta.<span class="hljs-property">annotation</span>.<span class="hljs-property">Resource</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">document</span>.<span class="hljs-property">Document</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">embedding</span>.<span class="hljs-property">EmbeddingModel</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">embedding</span>.<span class="hljs-property">EmbeddingOptions</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">embedding</span>.<span class="hljs-property">EmbeddingRequest</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">vectorstore</span>.<span class="hljs-property">SearchRequest</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">vectorstore</span>.<span class="hljs-property">VectorStore</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">GetMapping</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RequestParam</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">web</span>.<span class="hljs-property">bind</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">RestController</span>;

<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Arrays</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">List</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Objects</span>;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmbeddingController</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">EMBEDDING_MODEL</span> = <span class="hljs-string">"text-embedding-v4"</span>;
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">EmbeddingModel</span> dashScopeEmbeddingModel;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">VectorStore</span> vectorStore;

    <span class="hljs-comment">// å‘é‡åŒ–æ–‡æœ¬</span>
    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"/embedding"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">embedding</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span>(name = <span class="hljs-string">"text"</span>) <span class="hljs-built_in">String</span> text</span>) {
        <span class="hljs-comment">// å‘é‡åŒ–æ–‡æœ¬</span>
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; inputText = <span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(text);

        <span class="hljs-comment">// è®¾å®šæ¨¡å‹å‚æ•°</span>
        <span class="hljs-title class_">EmbeddingOptions</span> embeddingOptions = <span class="hljs-title class_">DashScopeEmbeddingOptions</span>.<span class="hljs-title function_">builder</span>()
                .<span class="hljs-title function_">withModel</span>(<span class="hljs-variable constant_">EMBEDDING_MODEL</span>)
                .<span class="hljs-title function_">build</span>();

        <span class="hljs-comment">// æ„å»ºè¯·æ±‚</span>
        <span class="hljs-title class_">EmbeddingRequest</span> embeddingRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EmbeddingRequest</span>(inputText, embeddingOptions);
        <span class="hljs-keyword">return</span> dashScopeEmbeddingModel.<span class="hljs-title function_">call</span>(embeddingRequest).<span class="hljs-title function_">getResult</span>();
    }


    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"/addVectorStore"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">addVectorStore</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span>(name = <span class="hljs-string">"text"</span>) <span class="hljs-built_in">String</span> text</span>) {
        vectorStore.<span class="hljs-title function_">add</span>(<span class="hljs-title class_">List</span>.<span class="hljs-title function_">of</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>(text)));
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Text vector stored successfully."</span>;
    }


    <span class="hljs-meta">@GetMapping</span>(value = <span class="hljs-string">"/getVectors"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Document</span>&gt; <span class="hljs-title function_">getVectors</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span>(name = <span class="hljs-string">"text"</span>) <span class="hljs-built_in">String</span> text</span>) {
        <span class="hljs-title class_">SearchRequest</span> searchRequest = <span class="hljs-title class_">SearchRequest</span>.<span class="hljs-title function_">builder</span>()
                .<span class="hljs-title function_">query</span>(text)
                .<span class="hljs-title function_">topK</span>(<span class="hljs-number">2</span>)
                .<span class="hljs-title function_">build</span>();
        <span class="hljs-keyword">return</span> vectorStore.<span class="hljs-title function_">similaritySearch</span>(searchRequest);
    }


}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰åç«¯åˆ†ç¦»VUE3+Springbooté¡¹ç›®é›†æˆPageOfficeæ ¸å¿ƒä»£ç ]]></title>    <link>https://juejin.cn/post/7585206549284962345</link>    <guid>https://juejin.cn/post/7585206549284962345</guid>    <pubDate>2025-12-19T03:14:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585206549284962345" data-draft-id="7585080842113794084" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰åç«¯åˆ†ç¦»VUE3+Springbooté¡¹ç›®é›†æˆPageOfficeæ ¸å¿ƒä»£ç "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-19T03:14:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·69561944037"/> <meta itemprop="url" content="https://juejin.cn/user/3739869818388507"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰åç«¯åˆ†ç¦»VUE3+Springbooté¡¹ç›®é›†æˆPageOfficeæ ¸å¿ƒä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3739869818388507/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·69561944037
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:14:32.000Z" title="Fri Dec 19 2025 03:14:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åç«¯Springbooté¡¹ç›®</h2>
<ol>
<li>åœ¨é¡¹ç›®çš„pom.xmlä¸­é€šè¿‡ä¸‹é¢çš„ä»£ç å¼•å…¥PageOfficeä¾èµ–ã€‚pageoffice.jarå·²å‘å¸ƒåˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fmvnrepository.com%2Fartifact%2Fcom.zhuozhengsoft%2Fpageoffice" target="_blank" title="https://mvnrepository.com/artifact/com.zhuozhengsoft/pageoffice" ref="nofollow noopener noreferrer">Mavenä¸­å¤®ä»“åº“</a>ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.zhuozhengsoft<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>   
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pageoffice<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>   
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>6.5.4.1-javax<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol start="2">
<li>åœ¨é¡¹ç›®çš„å¯åŠ¨ç±»Applicationç±»ä¸­æ·»åŠ ä¸€é¡¹@Beané…ç½®ï¼Œæ­¤ä¸ºPageOfficeæœåŠ¡å™¨ç«¯çš„å¿…è¦é…ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Value("${posyspath}")</span>
<span class="hljs-keyword">private</span> String poSysPath;

<span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">pageofficeRegistrationBean</span><span class="hljs-params">()</span>  {
  com.zhuozhengsoft.pageoffice.poserver.<span class="hljs-type">Server</span> <span class="hljs-variable">poserver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.zhuozhengsoft.pageoffice.poserver.Server();
  poserver.setSysPath(poSysPath);<span class="hljs-comment">//è®¾ç½®PageOfficeæ³¨å†ŒæˆåŠŸå,license.licæ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span>
    
  <span class="hljs-type">ServletRegistrationBean</span> <span class="hljs-variable">srb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>(poserver);
  srb.addUrlMappings(<span class="hljs-string">"/poserver.zz"</span>);
  srb.addUrlMappings(<span class="hljs-string">"/poclient"</span>);
  srb.addUrlMappings(<span class="hljs-string">"/sealsetup.exe"</span>);
  <span class="hljs-keyword">return</span> srb;
}
</code></pre>
<ol start="3">
<li>æ–°å»ºControllerå¹¶è°ƒç”¨PageOfficeåœ¨çº¿æ‰“å¼€æ–‡ä»¶ï¼Œä¾‹å¦‚DocumentControllerä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(value = "/doc")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DocumentController</span> {
	<span class="hljs-comment">//è·å–docç›®å½•çš„ç£ç›˜è·¯å¾„ï¼Œæ¯”å¦‚ï¼ŒLinuxæœåŠ¡å™¨çš„Officeæ–‡ä»¶å­˜æ”¾è·¯å¾„ä¸ºï¼š/root/documents/</span>
	<span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> <span class="hljs-string">"/root/documents/"</span>;

	<span class="hljs-meta">@RequestMapping(value="/openFile")</span>
	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">openFile</span><span class="hljs-params">(HttpServletRequest request, String file_name)</span>  {
		<span class="hljs-type">PageOfficeCtrl</span> <span class="hljs-variable">poCtrl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageOfficeCtrl</span>(request);
		<span class="hljs-comment">//webOpençš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¯æŒèƒ½å¤Ÿè¾“å‡ºä¸‹è½½æ–‡ä»¶çš„Urlç›¸å¯¹åœ°å€æˆ–è€…æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ç£ç›˜è·¯å¾„ä¸¤ç§æ–¹å¼</span>
		<span class="hljs-comment">//æŸ¥çœ‹è¯¦ç»†ï¼Œè¯·åœ¨"https://www.pageoffice.cn/"æœç´¢â€œPageOfficeå±æ€§æˆ–æ–¹æ³•ä¸­æ¶‰åŠåˆ°çš„URLè·¯å¾„æˆ–ç£ç›˜è·¯å¾„çš„è¯´æ˜â€</span>
		poCtrl.webOpen(<span class="hljs-string">"file://"</span>+dir+file_name, OpenModeType.docNormalEdit, <span class="hljs-string">"å¼ ä¸‰"</span>);
		<span class="hljs-keyword">return</span> poCtrl.getHtml();<span class="hljs-comment">//å¿…é¡»</span>
	}

	<span class="hljs-meta">@RequestMapping("/saveFile")</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveFile</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span>  {
		<span class="hljs-type">FileSaver</span> <span class="hljs-variable">fs</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileSaver</span>(request, response);
		fs.saveToFile(dir + file_name);
		fs.close();
	}
}
</code></pre>
<h2 data-id="heading-1">å‰ç«¯vueé¡¹ç›®</h2>
<ol>
<li>å¼•ç”¨js-pageofficeåº“ã€‚
ä½¿ç”¨å‘½ä»¤å®‰è£…ï¼š<strong>npm install js-pageoffice@6.3.1 --save-exact</strong></li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šè¯·ç¡®ä¿å®‰è£…çš„js-pageofficeåº“ç‰ˆæœ¬å·ä¸åç«¯é¡¹ç›®pom.xmlæ–‡ä»¶ä¸­å¼•ç”¨çš„PageOffice JARåŒ…ç‰ˆæœ¬å·çš„å‰ä¸‰ä½ç›¸åŒã€‚</p>
</blockquote>
<ol start="2">
<li>
<p>åœ¨å…¨å±€æ‹¦æˆªå™¨ä¸­æ·»åŠ PageOfficeç›¸å…³é…ç½®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">POBrowser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"js-pageoffice"</span>;

<span class="hljs-comment">// åˆ›å»º axios å®ä¾‹</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
 <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"/dev-api"</span>, <span class="hljs-comment">// è®¾ç½®ä½ çš„åŸºç¡€ URL</span>
 <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>, <span class="hljs-comment">// è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´</span>
});
<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span>
    <span class="hljs-comment">//const token = Cookies.get('token'); // å‡è®¾ä½ çš„tokenå­˜å‚¨åœ¨cookieä¸­</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-string">"123"</span>;
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">"Authorization"</span>] = <span class="hljs-string">"Bearer "</span> + token; <span class="hljs-comment">// å°†tokenæ·»åŠ åˆ°è¯·æ±‚å¤´ä¸­</span>
      <span class="hljs-comment">// PageOfficeå…¨å±€é…ç½®ï¼Œå¿…é¡»åœ¨æ­¤æ‹¦æˆªå™¨ä¸­å®šä¹‰</span>
      <span class="hljs-comment">//å¿…é¡»ã€‚è®¾ç½®åç«¯ä»£ç†,å…·ä½“å±æ€§å€¼ä»¥æ‚¨å®é™…å¼€å‘ä¸ºå‡†,æ¯”å¦‚POBrowser.setProxyBaseAPI(process.env.VUE_APP_BASE_API);</span>
      <span class="hljs-title class_">POBrowser</span>.<span class="hljs-title function_">setProxyBaseAPI</span>(<span class="hljs-string">"/dev-api"</span>);
      <span class="hljs-comment">//å¿…é¡»ã€‚å‘PageOfficeåç«¯è¯·æ±‚è®¾ç½®headerï¼Œæ”¯æŒå¤šæ¬¡è°ƒç”¨setHeader()è®¾ç½®æ›´å¤šçš„å€¼ï¼Œå…·ä½“å±æ€§åç§°å’Œå±æ€§å€¼ä»¥æ‚¨å®é™…å¼€å‘ä¸ºå‡†ã€‚</span>
      <span class="hljs-title class_">POBrowser</span>.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + token); 
      <span class="hljs-comment">/**
       * å‰ç«¯å­˜å‚¨tokençš„æ–¹æ¡ˆ
       *æ–¹æ¡ˆ1.ä½¿ç”¨Cookie
       *å¦‚æœæ‚¨çš„ä»¤ç‰Œ(token)å­˜å‚¨åœ¨Cookieä¸­ï¼ŒPageOfficeä¼šé»˜è®¤æ”¯æŒé€šè¿‡Cookieæ–¹å¼ä¿å­˜ä»¤ç‰Œï¼Œå› æ­¤æ‚¨æ— éœ€ç¼–å†™ä»»ä½•é¢å¤–çš„ä»£ç ã€‚
       *æ–¹æ¡ˆ2.ä½¿ç”¨Localstorageæˆ–è€…SessionStorage
       *å¦‚æœä»¤ç‰Œ(token)æ˜¯ä¿å­˜åœ¨LocalStorageæˆ–SessionStorageä¸­ï¼Œæ‚¨å¿…é¡»è°ƒç”¨POBrowser.setStorage()æ–¹æ³•ã€‚
       */</span>
      <span class="hljs-comment">//POBrowser.setStorage("Admin-Token",getToken());//æ”¯æŒå¤šæ¬¡è°ƒç”¨setStorage()è®¾ç½®æ›´å¤šçš„å€¼ï¼Œå…·ä½“å±æ€§åç§°å’Œå±æ€§å€¼ä»¥æ‚¨å®é™…å¼€å‘ä¸ºå‡†ã€‚</span>
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);
</code></pre>
</li>
<li>
<p>æ–°å»ºä¸€ä¸ªVueé¡µé¢ï¼šsrc/views/DocView.vueï¼Œç”¨æ¥æ˜¾ç¤ºåœ¨çº¿æ‰“å¼€çš„æ–‡æ¡£ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;
 <span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

 <span class="hljs-keyword">const</span> poHtmlCode = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
 <span class="hljs-keyword">const</span> open_params = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

 <span class="hljs-keyword">function</span> <span class="hljs-title function_">OnPageOfficeCtrlInit</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">// PageOfficeçš„åˆå§‹åŒ–äº‹ä»¶å›è°ƒå‡½æ•°ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰æŒ‰é’®</span>
   pageofficectrl.<span class="hljs-title class_">AddCustomToolButton</span>(<span class="hljs-string">"ä¿å­˜"</span>, <span class="hljs-string">"Save"</span>, <span class="hljs-number">1</span>);<span class="hljs-comment">//å…¶ä¸­"Save"å¯¹åº”function Save()å‡½æ•°ï¼Œå¹¶ä¸”éœ€è¦åœ¨onMountedä¸­æŒ‚è½½ã€‚</span>
 };

 <span class="hljs-keyword">function</span> <span class="hljs-title function_">Save</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">//ä½¿ç”¨SaveFilePageå±æ€§è®¾ç½®åç«¯ä¿å­˜æ–¹æ³•çš„Controllerè·¯ç”±åœ°å€ï¼Œè¿™ä¸ªåœ°å€å¿…é¡»ä»"/"å¼€å§‹ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥å‘æ­¤è·¯ç”±åœ°å€ä¼ é€’jsonå­—ç¬¦ä¸²å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</span>
   <span class="hljs-keyword">let</span> saveFileUrl = <span class="hljs-string">"/doc/saveFile"</span>;
   <span class="hljs-keyword">let</span> paramValue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(open_params.<span class="hljs-property">value</span>);<span class="hljs-comment">//ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨æ‰“å¼€æ—¶çš„å‚æ•°ã€‚</span>
   pageofficectrl.<span class="hljs-property">SaveFilePage</span> = <span class="hljs-string">`<span class="hljs-subst">${saveFileUrl}</span>?<span class="hljs-subst">${paramValue.toString()}</span>`</span>;
   <span class="hljs-comment">//åœ¨è¿™é‡Œå†™æ‚¨ä¿å­˜å‰çš„ä»£ç </span>
   pageofficectrl.<span class="hljs-title class_">WebSave</span>();
   <span class="hljs-comment">//åœ¨è¿™é‡Œå†™æ‚¨ä¿å­˜åçš„ä»£ç ï¼Œæ¯”å¦‚åˆ¤æ–­ä¿å­˜ç»“æœpageofficectrl.CustomSaveResult</span>
   <span class="hljs-comment">//alert(pageofficectrl.CustomSaveResult);</span>
 };

 <span class="hljs-keyword">function</span> <span class="hljs-title function_">AfterDocumentOpened</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">//åœ¨è¿™é‡Œå†™æ‚¨æ–‡æ¡£æ‰“å¼€åè‡ªåŠ¨è§¦å‘çš„ä»£ç </span>
 };

 <span class="hljs-keyword">function</span> <span class="hljs-title function_">openFile</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">// å‘èµ·GETè¯·æ±‚åˆ°åç«¯Controllerçš„/doc/openFileè·¯ç”±</span>
   <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>({
     <span class="hljs-attr">url</span>: <span class="hljs-string">'/doc/openFile'</span>,
     <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
     <span class="hljs-attr">params</span>: open_params.<span class="hljs-property">value</span>
   });
 };

 <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
   <span class="hljs-comment">//ä½¿ç”¨pageofficectrl.WindowParamsè·å–è·å–çˆ¶é¡µé¢(æ­¤é¡¹ç›®ä¸­ä¸ºï¼šHomeView.vue)ä¸­POBrowser.openWindow()æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°çš„å€¼,è·å–åˆ°çš„å€¼ä¸ºstringç±»å‹</span>
   open_params.<span class="hljs-property">value</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(pageofficectrl.<span class="hljs-property">WindowParams</span>);
   <span class="hljs-comment">// è¯·æ±‚åç«¯æ‰“å¼€æ–‡ä»¶</span>
   <span class="hljs-title function_">openFile</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
     poHtmlCode.<span class="hljs-property">value</span> = response;
   });
   <span class="hljs-comment">//å°†éœ€è¦å›è°ƒçš„å‡½æ•°æŒ‚è½½åˆ°PageOfficeæ§ä»¶ï¼Œä¾‹å¦‚æ§ä»¶è§¦å‘çš„äº‹ä»¶ã€è‡ªå®šä¹‰æŒ‰é’®è§¦å‘çš„å‡½æ•°ã€‚</span>
   <span class="hljs-variable language_">window</span>.<span class="hljs-property">POPageMounted</span> = { <span class="hljs-title class_">OnPageOfficeCtrlInit</span>, <span class="hljs-title class_">AfterDocumentOpened</span>, <span class="hljs-title class_">Save</span> };<span class="hljs-comment">//å…¶ä¸­OnPageOfficeCtrlInitå¿…é¡»</span>

 });
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"doc"</span>&gt;</span>
     æ¼”ç¤º: æ–‡æ¡£<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
     <span class="hljs-comment">&lt;!-- æ­¤divç”¨æ¥åŠ è½½PageOfficeå®¢æˆ·ç«¯æ§ä»¶ï¼Œå…¶ä¸­divçš„é«˜å®½åŠä½ç½®å°±å†³å®šäº†æ§ä»¶çš„å¤§å°åŠä½ç½® --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:auto; height:900px;"</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">"poHtmlCode"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ol start="4">
<li>æ¯”å¦‚é…ç½®DocView.vueçš„è®¿é—®è·¯ç”±ä¸ºï¼š/showDocï¼Œåœ¨æ‚¨çš„Vueé¡µé¢ï¼ˆæ¯”å¦‚HomeView.vueï¼ŒPageOfficeä¸­æŠŠè¿™ä¸ªé¡µé¢ç§°ä¹‹ä¸ºçˆ¶é¡µé¢ï¼‰æ·»åŠ ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„è¶…é“¾æ¥ï¼Œç‚¹å‡»è¶…é“¾æ¥è°ƒç”¨POBrowserå¯¹è±¡çš„openWindowæ–¹æ³•ï¼Œå¼¹å‡ºPageOfficeæµè§ˆå™¨ï¼ˆPOBrowserï¼‰çª—å£è®¿é—®DocView.vueåœ¨çº¿æ‰“å¼€æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">    &lt;a  <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> @click.prevent=<span class="hljs-string">"open_pageoffice()"</span>&gt;æ‰“å¼€æ–‡ä»¶&lt;/a&gt;
</code></pre>
<pre><code class="hljs language-xml" lang="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;
 <span class="hljs-keyword">import</span> { <span class="hljs-title class_">POBrowser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"js-pageoffice"</span>;
 <span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

 <span class="hljs-keyword">const</span> titleText = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
 <span class="hljs-keyword">const</span> paramJson = {};
 paramJson.<span class="hljs-property">file_id</span> = <span class="hljs-number">1</span>;
 paramJson.<span class="hljs-property">file_name</span> = <span class="hljs-string">"test.doc"</span>;
 <span class="hljs-keyword">const</span> paramString = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(paramJson);

 <span class="hljs-keyword">function</span> <span class="hljs-title function_">open_pageoffice</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">//openWindow()ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨æ¥å‘å¼¹å‡ºçš„PageOfficeæµè§ˆå™¨ï¼ˆPOBrowserï¼‰çª—å£ä¼ é€’å‚æ•°(å‚æ•°é•¿åº¦ä¸é™)ï¼Œæ”¯æŒjsonæ ¼å¼å­—ç¬¦ä¸²ã€‚</span>
   <span class="hljs-comment">//æ­¤å¤„ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬ä¼ é€’äº†file_idå’Œfile_nameä¸¤ä¸ªå‚æ•°ï¼Œå…·ä½“ä»¥æ‚¨å®é™…å¼€å‘ä¸ºå‡†ã€‚</span>
   <span class="hljs-title class_">POBrowser</span>.<span class="hljs-title function_">openWindow</span>(<span class="hljs-string">'/showDoc'</span>, <span class="hljs-string">'width=1150px;height=900px;'</span>, paramString);

 }
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¯¦ç»†è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpageoffice.cn%2Fpages%2F1c2c6e%2F" target="_blank" title="https://pageoffice.cn/pages/1c2c6e/" ref="nofollow noopener noreferrer">pageoffice.cn/pages/1c2c6â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mac Redis å¿«é€Ÿå®‰è£…ä¸å¯è§†åŒ–ï¼ˆè¯¦ç»†æµç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7585091685339611182</link>    <guid>https://juejin.cn/post/7585091685339611182</guid>    <pubDate>2025-12-19T03:25:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585091685339611182" data-draft-id="7585019819193106442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mac Redis å¿«é€Ÿå®‰è£…ä¸å¯è§†åŒ–ï¼ˆè¯¦ç»†æµç¨‹ï¼‰"/> <meta itemprop="keywords" content="Redis"/> <meta itemprop="datePublished" content="2025-12-19T03:25:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¡å°”ç‰¹æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/4450440831840909"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mac Redis å¿«é€Ÿå®‰è£…ä¸å¯è§†åŒ–ï¼ˆè¯¦ç»†æµç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4450440831840909/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¡å°”ç‰¹æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:25:41.000Z" title="Fri Dec 19 2025 03:25:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å®‰è£…</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbrew.sh%2F" target="_blank" title="https://brew.sh/" ref="nofollow noopener noreferrer">homebrew</a></p>
</li>
<li>
<p>å…ˆæŸ¥æ‰¾ <code>homebrew search redis</code>ï¼Œå†ç›´æ¥å®‰è£…ï¼Œæˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.io%2F" target="_blank" title="https://redis.io/" ref="nofollow noopener noreferrer">å®˜æ–¹ä¸‹è½½</a>ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">dengzemiao@dengzemiaodeMacBook-Air ~ % brew search redis

==&gt; **Formulae******

hiredis Â  Â  Â  Â  Â  Â  redis-leveldb Â  Â  Â  redir Â  Â  Â  Â  Â  Â  Â  redu

iredisÂ  Â  Â  Â  Â  Â  Â  redis@6.2 Â  Â  Â  Â  Â  redictÂ  Â  Â  Â  Â  Â  Â  redo

**redis** **âœ”** Â  Â  Â  Â  Â  Â  redis@8.2 Â  Â  Â  Â  Â  reddix

==&gt; **Casks******

another-redis-desktop-managerÂ  Â  Â  Â  Â  Â  redis-insight

jpadilla-redis Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  redis-pro

medis
</code></pre>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># å®‰è£…</span>
$ brew install redis

<span class="hljs-comment"># å¯åŠ¨ï¼Œä¼šåå°æŒ‚èµ·ï¼Œå¼€æœºè‡ªå¯</span>
$ brew services start redis
<span class="hljs-comment"># åœæ­¢</span>
$ brew services stop redis
<span class="hljs-comment"># é‡å¯</span>
$ brew services restart redis
</code></pre>
<p>éªŒè¯å®‰è£…</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># çœ‹å“ªä¸ªæŒ‡ä»¤æˆåŠŸå°±æ˜¯å“ªä¸ª</span>
$ redis-server --version
$ redis-cli --version

<span class="hljs-comment"># éªŒè¯</span>
$ redis-cli ping
<span class="hljs-comment"># è¿”å› PONG</span>
</code></pre>
<p>é…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># ä¸€èˆ¬æ˜¯</span>
/opt/homebrew/etc/redis.conf

<span class="hljs-comment"># Apple Siliconï¼ˆM1/M2/M3ï¼‰å¯èƒ½ä¼šåœ¨ï¼š</span>
/opt/homebrew/etc/redis.conf
</code></pre>
</li>
<li>
<p><a href="https://juejin.cn/post/7583632757836464179" target="_blank" title="https://juejin.cn/post/7583632757836464179">Windows å®‰è£…å‚è€ƒæ–‡ç« </a></p>
</li>
<li>
<p><code>gui</code> å®¢æˆ·ç«¯å¯¹æ¯”</p>













































<table><thead><tr><th>åç§°</th><th>å®˜ç½‘ / winget / ä¸‹è½½</th><th>ä¸­æ–‡æ”¯æŒ</th><th>ç³»ç»Ÿ</th><th>ä¼˜ç‚¹</th><th>å®‰è£…æ–¹å¼</th></tr></thead><tbody><tr><td><strong>RedisInsight</strong></td><td>RedisInsight.RedisInsight / <a href="https://link.juejin.cn?target=https%3A%2F%2Fredis.com%2Fredis-enterprise%2Fredis-insight%2F" target="_blank" title="https://redis.com/redis-enterprise/redis-insight/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td><td>æ”¯æŒä¸­æ–‡ï¼ˆå¯åˆ‡æ¢ï¼‰</td><td>Win / Mac / Linux</td><td>å®˜æ–¹å‡ºå“ï¼ŒåŠŸèƒ½å…¨é¢ï¼šKey æµè§ˆã€CLIã€å›¾è¡¨ç›‘æ§</td><td>å®˜æ–¹å®‰è£…åŒ… / winget install</td></tr><tr><td><strong>Another Redis Desktop Manager (RDM)</strong></td><td>qishibo.AnotherRedisDesktopMana / <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqishibo%2FAnotherRedisDesktopManager" target="_blank" title="https://github.com/qishibo/AnotherRedisDesktopManager" ref="nofollow noopener noreferrer">GitHub</a></td><td>éƒ¨åˆ†ä¸­æ–‡</td><td>Win / Mac / Linux</td><td>ç¤¾åŒºæ´»è·ƒï¼Œæ›´æ–°å¿«ï¼Œæ”¯æŒå¤šæ•°æ®åº“è¿æ¥</td><td>å®˜æ–¹ exe / dmg / AppImage</td></tr><tr><td><strong>TablePlus</strong></td><td>TablePlus.TablePlus / <a href="https://link.juejin.cn?target=https%3A%2F%2Ftableplus.com%2F" target="_blank" title="https://tableplus.com/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td><td>æ”¯æŒä¸­æ–‡</td><td>Win / Mac</td><td>UI ç¾è§‚ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼ˆMySQL / Postgres / Redis ç­‰ï¼‰</td><td>å®˜æ–¹å®‰è£…åŒ…</td></tr><tr><td><strong>P3X Redis UI</strong></td><td>PatrikLaszlo.P3XRedisUI / <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpatrikx3%2Fp3x-redis-ui" target="_blank" title="https://github.com/patrikx3/p3x-redis-ui" ref="nofollow noopener noreferrer">GitHub</a></td><td>è‹±æ–‡</td><td>Win / Mac / Linux</td><td>è·¨å¹³å° Electron åº”ç”¨ï¼Œæ”¯æŒå¤šæ•°æ®åº“</td><td>npm / exe / dmg</td></tr></tbody></table>
</li>
</ul>
<h2 data-id="heading-1">äºŒã€å¯è§†åŒ–</h2>
<ul>
<li>
<p>åœ¨ <code>Windows å‚è€ƒæ–‡ç« </code> ä¸­æœ‰ä»‹ç»è¿‡äº†ï¼Œç›´æ¥å®‰è£… <code>another-redis-desktop-manager</code></p>
<pre><code class="hljs language-sh" lang="sh">$ brew search another-redis-desktop-manager
</code></pre>
</li>
<li>
<p>å®‰è£…</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># å®‰è£…å¯è§†åŒ–è½¯ä»¶éœ€è¦ä½¿ç”¨ --cask ï¼Œå¦‚æœä¸æ˜¯åˆ™ä¸éœ€è¦ä½¿ç”¨ï¼ŒCasks ä¸‹é¢çš„éƒ½éœ€è¦ï¼ŒFormulae ä¸‹é¢ä¸ç”¨å¸¦è¿™ä¸ªå‚æ•°</span>
$ brew install --cask another-redis-desktop-manager
</code></pre>
</li>
<li>
<p>ä¿®æ”¹è¯­è¨€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09ffb185f5e74e1d82dde62e5d670d27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2h5bCU54m55pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766719541&amp;x-signature=HMaQZ9KvWermhNbA5dxNZaNmPPk%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p>ç„¶åè¿æ¥ <code>resdis</code> å³å¯ã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯å…¶ä»–ç”µè„‘éœ€è¦ä¿®æ”¹è®¿é—®æƒé™é™åˆ¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fzz00008888%2Farticle%2Fdetails%2F156061082" target="_blank" title="https://blog.csdn.net/zz00008888/article/details/156061082" ref="nofollow noopener noreferrer"># Windows Redis Memurai é…ç½®æŒ‡å—ã€ç”¨æˆ·åˆ›å»ºã€æƒé™ç®¡ç†</a>ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[RGBtoGrayscaleèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7585085798809337883</link>    <guid>https://juejin.cn/post/7585085798809337883</guid>    <pubDate>2025-12-19T03:24:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585085798809337883" data-draft-id="7585289701793169434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[RGBtoGrayscaleèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-19T03:24:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[RGBtoGrayscaleèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T03:24:50.000Z" title="Fri Dec 19 2025 03:24:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>åœ¨Unityçš„Shader Graphå¯è§†åŒ–ç€è‰²å™¨ç¼–è¾‘å™¨ä¸­ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”å¸¸ç”¨çš„å›¾åƒå¤„ç†å·¥å…·ã€‚è¯¥èŠ‚ç‚¹ä¸“é—¨ç”¨äºå°†RGBå½©è‰²ä¿¡æ¯è½¬æ¢ä¸ºç°åº¦å€¼ï¼Œè¿™ä¸€è¿‡ç¨‹åœ¨è®¡ç®—æœºå›¾å½¢å­¦å’Œå›¾åƒå¤„ç†ä¸­è¢«ç§°ä¸ºç°åº¦åŒ–æˆ–å»è‰²å¤„ç†ã€‚é€šè¿‡å°†åŒ…å«çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“çš„å½©è‰²ä¿¡æ¯è½¬æ¢ä¸ºå•ä¸€çš„äº®åº¦å€¼ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹èƒ½å¤Ÿæœ‰æ•ˆåœ°ç®€åŒ–é¢œè‰²ä¿¡æ¯ï¼ŒåŒæ—¶ä¿ç•™å›¾åƒçš„ç»“æ„å’Œç»†èŠ‚ç‰¹å¾ã€‚</p>
<h2 data-id="heading-0">èŠ‚ç‚¹å·¥ä½œåŸç†</h2>
<p>RGBtoGrayscaleèŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½åŸºäºäººçœ¼å¯¹ä¸åŒé¢œè‰²æ•æ„Ÿåº¦çš„ç§‘å­¦åŸç†ã€‚äººçœ¼å¯¹ç»¿è‰²æœ€ä¸ºæ•æ„Ÿï¼Œçº¢è‰²æ¬¡ä¹‹ï¼Œå¯¹è“è‰²æœ€ä¸æ•æ„Ÿã€‚å› æ­¤ï¼Œåœ¨å°†RGBé¢œè‰²è½¬æ¢ä¸ºç°åº¦å€¼æ—¶ï¼Œä¸èƒ½ç®€å•åœ°å¯¹ä¸‰ä¸ªé€šé“å–å¹³å‡å€¼ï¼Œè€Œæ˜¯éœ€è¦é‡‡ç”¨åŠ æƒå¹³å‡çš„æ–¹æ³•ï¼Œä»¥ç¬¦åˆäººçœ¼çš„æ„ŸçŸ¥ç‰¹æ€§ã€‚</p>
<p>è¯¥èŠ‚ç‚¹å†…éƒ¨ä½¿ç”¨æ ‡å‡†çš„ç°åº¦è½¬æ¢å…¬å¼è¿›è¡Œè®¡ç®—ï¼Œæœ€å¸¸è§çš„å…¬å¼æ˜¯åŸºäºITU-R BT.601æ ‡å‡†çš„äº®åº¦å…¬å¼ã€‚è¿™ä¸ªå…¬å¼è€ƒè™‘äº†äººçœ¼å¯¹ä¸åŒæ³¢é•¿å…‰çš„æ•æ„Ÿåº¦å·®å¼‚ï¼Œé€šè¿‡ä¸ºæ¯ä¸ªé¢œè‰²é€šé“åˆ†é…ä¸åŒçš„æƒé‡æ¥å®ç°æ›´ç¬¦åˆäººç±»è§†è§‰æ„ŸçŸ¥çš„ç°åº¦è½¬æ¢æ•ˆæœã€‚</p>
<p>åœ¨Shader Graphä¸­ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹çš„å®ç°é€šå¸¸éµå¾ªä»¥ä¸‹æ•°å­¦è¡¨è¾¾å¼ï¼šç°åº¦å€¼ = R Ã— 0.299 + G Ã— 0.587 + B Ã— 0.114ã€‚è¿™ä¸ªç‰¹å®šçš„æƒé‡åˆ†é…ï¼ˆçº¢è‰²29.9%ï¼Œç»¿è‰²58.7%ï¼Œè“è‰²11.4%ï¼‰æ˜¯åŸºäºäººçœ¼é”¥ä½“ç»†èƒå¯¹ä¸åŒé¢œè‰²æ•æ„Ÿåº¦çš„ç§‘å­¦ç ”ç©¶ç»“æœï¼Œç¡®ä¿è½¬æ¢åçš„ç°åº¦å›¾åƒåœ¨äººçœ¼çœ‹æ¥å…·æœ‰è‡ªç„¶çš„äº®åº¦å±‚æ¬¡ã€‚</p>
<p>ä»æŠ€æœ¯å®ç°è§’åº¦çœ‹ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹åœ¨ç€è‰²å™¨ç¨‹åºä¸­é€šå¸¸è¢«ç¼–è¯‘ä¸ºä¸€ç³»åˆ—çš„ç‚¹ä¹˜æ“ä½œæˆ–ä¹˜æ³•ç´¯åŠ æ“ä½œï¼Œè¿™äº›æ“ä½œåœ¨ç°ä»£GPUä¸Šèƒ½å¤Ÿé«˜æ•ˆæ‰§è¡Œï¼Œå³ä½¿æ˜¯åœ¨å®æ—¶æ¸²æŸ“åœºæ™¯ä¸­ä¹Ÿä¸ä¼šé€ æˆæ˜æ˜¾çš„æ€§èƒ½å¼€é”€ã€‚</p>
<h2 data-id="heading-1">ç«¯å£è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/RGBtoGrayscaleNodeThumb.png" alt="" loading="lazy"/></p>
<p>RGBtoGrayscaleèŠ‚ç‚¹çš„ç«¯å£è®¾è®¡ç®€æ´æ˜äº†ï¼ŒåŒ…å«ä¸€ä¸ªè¾“å…¥ç«¯å£å’Œä¸€ä¸ªè¾“å‡ºç«¯å£ï¼Œè¿™ç§è®¾è®¡ä½¿å¾—èŠ‚ç‚¹æ˜“äºç†è§£å’Œä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†åŠŸèƒ½çš„ä¸“ä¸€æ€§ã€‚</p>
<h3 data-id="heading-2">è¾“å…¥ç«¯å£</h3>
<p>è¾“å…¥ç«¯å£æ ‡è®°ä¸º"In"ï¼Œæ¥å—Vector 3ç±»å‹çš„æ•°æ®ï¼Œä»£è¡¨æ ‡å‡†çš„RGBé¢œè‰²ä¿¡æ¯ï¼š</p>
<ul>
<li>Rï¼ˆçº¢è‰²ï¼‰é€šé“ï¼šå­˜å‚¨é¢œè‰²çš„çº¢è‰²åˆ†é‡ï¼Œå–å€¼èŒƒå›´é€šå¸¸ä¸º[0,1]</li>
<li>Gï¼ˆç»¿è‰²ï¼‰é€šé“ï¼šå­˜å‚¨é¢œè‰²çš„ç»¿è‰²åˆ†é‡ï¼Œå–å€¼èŒƒå›´é€šå¸¸ä¸º[0,1]</li>
<li>Bï¼ˆè“è‰²ï¼‰é€šé“ï¼šå­˜å‚¨é¢œè‰²çš„è“è‰²åˆ†é‡ï¼Œå–å€¼èŒƒå›´é€šå¸¸ä¸º[0,1]</li>
</ul>
<p>è¾“å…¥ç«¯å£æ²¡æœ‰ç‰¹å®šçš„ç»‘å®šè¦æ±‚ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ¥æ”¶æ¥è‡ªå¤šç§æºçš„RGBæ•°æ®ï¼š</p>
<ul>
<li>å¯ä»¥ç›´æ¥è¿æ¥ConstantèŠ‚ç‚¹æˆ–ColorèŠ‚ç‚¹çš„è¾“å‡º</li>
<li>å¯ä»¥æ¥æ”¶Texture 2DèŠ‚ç‚¹é‡‡æ ·åçš„é¢œè‰²æ•°æ®</li>
<li>å¯ä»¥æ¥æ”¶å…¶ä»–é¢œè‰²å¤„ç†èŠ‚ç‚¹å¤„ç†åçš„ç»“æœ</li>
<li>å¯ä»¥æ¥æ”¶æ¥è‡ªShader Graphå±æ€§ï¼ˆPropertiesï¼‰çš„è¾“å…¥å€¼</li>
</ul>
<p>è¾“å…¥æ•°æ®çš„èŒƒå›´é€šå¸¸åº”åœ¨[0,1]åŒºé—´å†…ï¼Œè¿™æ˜¯æ ‡å‡†çš„é¢œè‰²è¡¨ç¤ºèŒƒå›´ã€‚å¦‚æœè¾“å…¥å€¼è¶…å‡ºæ­¤èŒƒå›´ï¼ŒèŠ‚ç‚¹ä»ç„¶ä¼šè¿›è¡Œè®¡ç®—ï¼Œä½†ç»“æœå¯èƒ½ä¸ç¬¦åˆé¢„æœŸï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜åŠ¨æ€èŒƒå›´(HDR)é¢œè‰²æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„å¤„ç†æ­¥éª¤ã€‚</p>
<h3 data-id="heading-3">è¾“å‡ºç«¯å£</h3>
<p>è¾“å‡ºç«¯å£æ ‡è®°ä¸º"Out"ï¼Œæä¾›Floatç±»å‹çš„ç°åº¦å€¼ï¼š</p>
<ul>
<li>è¾“å‡ºå€¼æ˜¯æ ‡é‡è€Œéå‘é‡ï¼Œè¡¨ç¤ºè®¡ç®—å¾—åˆ°çš„äº®åº¦å€¼</li>
<li>è¾“å‡ºèŒƒå›´é€šå¸¸ä¸è¾“å…¥èŒƒå›´ç›¸å…³ï¼Œå¯¹äºæ ‡å‡†[0,1]èŒƒå›´çš„è¾“å…¥ï¼Œè¾“å‡ºä¹Ÿåœ¨[0,1]èŒƒå›´å†…</li>
<li>è¾“å‡ºå€¼å¯ä»¥ç›´æ¥ç”¨äºåç»­çš„ç€è‰²è®¡ç®—ï¼Œæˆ–ä½œä¸ºå…¶ä»–èŠ‚ç‚¹çš„è¾“å…¥</li>
</ul>
<p>è¾“å‡ºç«¯å£çš„å•å€¼ç‰¹æ€§ä½¿å¾—å®ƒéå¸¸é€‚åˆç”¨äºï¼š</p>
<ul>
<li>åˆ›å»ºé»‘ç™½æ•ˆæœå’Œå»è‰²ç€è‰²å™¨</li>
<li>ä½œä¸ºé®ç½©æˆ–äº®åº¦ä¿¡æ¯çš„æ¥æº</li>
<li>åœ¨æ³•çº¿è´´å›¾ã€é«˜åº¦è´´å›¾ç­‰éé¢œè‰²æ•°æ®å¤„ç†ä¸­æå–å¼ºåº¦ä¿¡æ¯</li>
<li>ä½œä¸ºå¤æ‚ç€è‰²å™¨ç½‘ç»œä¸­çš„ä¸­é—´è®¡ç®—æ­¥éª¤</li>
</ul>
<h2 data-id="heading-4">åº”ç”¨åœºæ™¯</h2>
<p>RGBtoGrayscaleèŠ‚ç‚¹åœ¨æ¸¸æˆå¼€å‘å’Œå®æ—¶æ¸²æŸ“ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºèƒ½å¤Ÿä»å½©è‰²ä¿¡æ¯ä¸­æå–äº®åº¦æ•°æ®ï¼Œè¿™ä¸€åŠŸèƒ½åœ¨å¤šç§è§†è§‰æ•ˆæœå’Œæ¸²æŸ“æŠ€æœ¯ä¸­éƒ½æ˜¯åŸºç¡€ä¸”å…³é”®çš„ã€‚</p>
<h3 data-id="heading-5">å›¾åƒå¤„ç†ä¸æ»¤é•œæ•ˆæœ</h3>
<p>åœ¨å›¾åƒåå¤„ç†å’Œæ»¤é•œæ•ˆæœä¸­ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹æ˜¯å®ç°å¤šç§é«˜çº§æ•ˆæœçš„åŸºç¡€ï¼š</p>
<ul>
<li>å®Œæ•´çš„å»è‰²æ•ˆæœï¼šé€šè¿‡å°†èŠ‚ç‚¹è¾“å‡ºåŒæ—¶èµ‹å€¼ç»™RGBä¸‰ä¸ªé€šé“ï¼Œå¯ä»¥åˆ›å»ºå®Œæ•´çš„é»‘ç™½å›¾åƒæ•ˆæœ</li>
<li>é€‰æ‹©æ€§å»è‰²ï¼šé€šè¿‡å°†åŸå§‹é¢œè‰²ä¸ç°åº¦å€¼è¿›è¡Œæ··åˆï¼Œå¯ä»¥åˆ›å»ºéƒ¨åˆ†åŒºåŸŸå½©è‰²ã€éƒ¨åˆ†åŒºåŸŸé»‘ç™½çš„æ•ˆæœï¼Œå¸¸ç”¨äºçªå‡ºæ˜¾ç¤ºç‰¹å®šç‰©ä½“æˆ–åŒºåŸŸ</li>
<li>è€ç…§ç‰‡æ•ˆæœï¼šç»“åˆæ£•è¤è‰²è°ƒæˆ–å…¶ä»–è‰²è°ƒæ˜ å°„ï¼Œå¯ä»¥åˆ›å»ºå¤å¤é£æ ¼çš„ç…§ç‰‡æ•ˆæœ</li>
<li>ç´ æä¸è‰ºæœ¯æ•ˆæœï¼šé€šè¿‡è¾¹ç¼˜æ£€æµ‹ä¸ç°åº¦ä¿¡æ¯ç»“åˆï¼Œå¯ä»¥æ¨¡æ‹Ÿé“…ç¬”ç´ æã€å¡é€šæ¸²æŸ“ç­‰éçœŸå®æ„Ÿæ¸²æŸ“æ•ˆæœ</li>
</ul>
<h3 data-id="heading-6">äº®åº¦æ©ç ä¸é˜ˆå€¼å¤„ç†</h3>
<p>ç°åº¦ä¿¡æ¯ç»å¸¸è¢«ç”¨ä½œæ©ç æˆ–é˜ˆå€¼å¤„ç†çš„è¾“å…¥ï¼š</p>
<ul>
<li>åŠ¨æ€é®ç½©åˆ›å»ºï¼šæ ¹æ®åœºæ™¯ä¸­ç‰©ä½“çš„äº®åº¦åŠ¨æ€ç”Ÿæˆé®ç½©ï¼Œç”¨äºç‰¹æ•ˆã€æ··åˆæˆ–åœºæ™¯è¿‡æ¸¡</li>
<li>é˜ˆå€¼åŒ–å¤„ç†ï¼šé€šè¿‡æ¯”è¾ƒç°åº¦å€¼ä¸è®¾å®šçš„é˜ˆå€¼ï¼Œå¯ä»¥å°†å›¾åƒè½¬æ¢ä¸ºé«˜å¯¹æ¯”åº¦çš„é»‘ç™½äºŒå€¼å›¾åƒï¼Œç”¨äºåˆ›å»ºæµ·æŠ¥åŒ–æ•ˆæœæˆ–ä½œä¸ºå…¶ä»–æ•ˆæœçš„è¾“å…¥</li>
<li>äº®åº¦é”®æ§ï¼šç±»ä¼¼äºç»¿å¹•æŠ å›¾çš„æŠ€æœ¯ï¼Œä½†åŸºäºäº®åº¦ä¿¡æ¯ï¼Œå¯ç”¨äºå°†æ˜äº®æˆ–é»‘æš—åŒºåŸŸä»å›¾åƒä¸­åˆ†ç¦»å‡ºæ¥</li>
</ul>
<h3 data-id="heading-7">æ³•çº¿è´´å›¾ä¸é«˜åº¦è´´å›¾å¤„ç†</h3>
<p>åœ¨å¤„ç†éé¢œè‰²çº¹ç†æ•°æ®æ—¶ï¼ŒRGBtoGrayscaleèŠ‚ç‚¹èƒ½å¤Ÿæå–æœ‰ç”¨çš„å¼ºåº¦ä¿¡æ¯ï¼š</p>
<ul>
<li>æ³•çº¿è´´å›¾å¼ºåº¦æå–ï¼šä»æ³•çº¿è´´å›¾ä¸­æå–é«˜åº¦æˆ–å¼ºåº¦ä¿¡æ¯ï¼Œç”¨äºè§†å·®æ˜ å°„ã€æ›²é¢ç»†åˆ†æˆ–å…¶ä»–åŸºäºé«˜åº¦çš„æ•ˆæœ</li>
<li>é«˜åº¦è´´å›¾å¤„ç†ï¼šå°†é«˜åº¦è´´å›¾è½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œç”¨äºå±‚çº§ç»†èŠ‚(LOD)åˆ‡æ¢æˆ–åŠ¨æ€åœ°å½¢å˜å½¢</li>
<li>çº¹ç†åˆæˆï¼šå°†å¤šä¸ªçº¹ç†çš„ç°åº¦ä¿¡æ¯ç»„åˆï¼Œåˆ›å»ºæ–°çš„å¤åˆçº¹ç†</li>
</ul>
<h3 data-id="heading-8">æ€§èƒ½ä¼˜åŒ–ä¸ç®€åŒ–è®¡ç®—</h3>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç°åº¦æ•°æ®ä»£æ›¿å®Œæ•´é¢œè‰²å¯ä»¥æ˜¾è‘—æé«˜æ¸²æŸ“æ€§èƒ½ï¼š</p>
<ul>
<li>ç®€åŒ–ç€è‰²è®¡ç®—ï¼šå°†å¤æ‚çš„é¢œè‰²ç›¸å…³è®¡ç®—è½¬æ¢ä¸ºæ›´ç®€å•çš„äº®åº¦è®¡ç®—ï¼Œå‡å°‘GPUè´Ÿè½½</li>
<li>å‡å°‘å†…å­˜å¸¦å®½ï¼šä½¿ç”¨å•é€šé“çº¹ç†ä»£æ›¿å¤šé€šé“çº¹ç†ï¼Œå‡å°‘çº¹ç†é‡‡æ ·å’Œå†…å­˜è®¿é—®å¼€é”€</li>
<li>åŠ¨æ€åˆ†æ”¯ä¼˜åŒ–ï¼šåŸºäºäº®åº¦å€¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œä¼˜åŒ–ç€è‰²å™¨ä¸­çš„åŠ¨æ€åˆ†æ”¯é€»è¾‘</li>
</ul>
<h2 data-id="heading-9">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹é€šè¿‡å‡ ä¸ªå…·ä½“çš„Shader Graphç¤ºä¾‹ï¼Œå±•ç¤ºRGBtoGrayscaleèŠ‚ç‚¹çš„å®é™…åº”ç”¨æ–¹æ³•å’Œæ•ˆæœã€‚</p>
<h3 data-id="heading-10">åŸºç¡€ç°åº¦è½¬æ¢</h3>
<p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„é»‘ç™½æ•ˆæœç€è‰²å™¨ï¼š</p>
<ul>
<li>åœ¨Shader Graphä¸­åˆ›å»ºæ–°çš„Unlit Graph</li>
<li>æ·»åŠ Texture 2DèŠ‚ç‚¹ï¼Œè¿æ¥åˆ°RGBtoGrayscaleèŠ‚ç‚¹çš„è¾“å…¥</li>
<li>å°†RGBtoGrayscaleèŠ‚ç‚¹çš„è¾“å‡ºåŒæ—¶è¿æ¥åˆ°ä¸»ç€è‰²å™¨èŠ‚ç‚¹çš„Base Colorçš„Rã€Gã€Bä¸‰ä¸ªé€šé“</li>
<li>å°†ä¸»ç€è‰²å™¨èŠ‚ç‚¹çš„Alphaé€šé“è®¾ç½®ä¸º1ï¼ˆæˆ–ä¸è¿æ¥ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼‰</li>
<li>ä¿å­˜å¹¶åœ¨æè´¨ä¸Šåº”ç”¨è¯¥ç€è‰²å™¨ï¼Œå³å¯çœ‹åˆ°çº¹ç†å·²å®Œå…¨è½¬æ¢ä¸ºé»‘ç™½æ•ˆæœ</li>
</ul>
<p>è¿™ç§åŸºç¡€ç°åº¦è½¬æ¢æ˜¯è®¸å¤šå¤æ‚æ•ˆæœçš„åŸºç¡€ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å‚æ•°æ§åˆ¶è½¬æ¢çš„å¼ºåº¦æˆ–æ··åˆç¨‹åº¦ï¼Œå®ç°æ›´çµæ´»çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-11">é€‰æ‹©æ€§å»è‰²æ•ˆæœ</h3>
<p>åˆ›å»ºéƒ¨åˆ†å½©è‰²ã€éƒ¨åˆ†é»‘ç™½çš„æ•ˆæœï¼š</p>
<ul>
<li>æŒ‰ç…§åŸºç¡€ç°åº¦è½¬æ¢çš„è®¾ç½®åˆ›å»ºæµç¨‹</li>
<li>åœ¨RGBtoGrayscaleèŠ‚ç‚¹åæ·»åŠ Lerpï¼ˆçº¿æ€§æ’å€¼ï¼‰èŠ‚ç‚¹</li>
<li>å°†åŸå§‹å½©è‰²çº¹ç†è¿æ¥åˆ°LerpèŠ‚ç‚¹çš„Aè¾“å…¥ï¼Œç°åº¦å€¼è¿æ¥åˆ°Bè¾“å…¥</li>
<li>æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼ˆå¦‚Floatæˆ–Vector1ï¼‰æ§åˆ¶LerpèŠ‚ç‚¹çš„Tï¼ˆæ··åˆï¼‰è¾“å…¥</li>
<li>å°†LerpèŠ‚ç‚¹çš„è¾“å‡ºè¿æ¥åˆ°ä¸»ç€è‰²å™¨èŠ‚ç‚¹çš„Base Color</li>
</ul>
<p>é€šè¿‡è°ƒæ•´æ··åˆå‚æ•°ï¼Œå¯ä»¥æ§åˆ¶æ•ˆæœçš„å¼ºåº¦ï¼šå€¼ä¸º0æ—¶æ˜¾ç¤ºåŸå§‹å½©è‰²å›¾åƒï¼Œå€¼ä¸º1æ—¶æ˜¾ç¤ºå®Œå…¨é»‘ç™½å›¾åƒï¼Œä¸­é—´å€¼åˆ™å‘ˆç°éƒ¨åˆ†å»è‰²çš„æ•ˆæœã€‚è¿™ç§æŠ€æœ¯å¸¸ç”¨äºæ¸¸æˆä¸­çš„å‰§æƒ…è¡¨ç°ï¼Œå¦‚å›å¿†åœºæ™¯ã€è§’è‰²æ­»äº¡æˆ–ç‰¹æ®ŠçŠ¶æ€ä¸‹çš„è§†è§‰æ•ˆæœã€‚</p>
<h3 data-id="heading-12">åŸºäºäº®åº¦çš„è¾¹ç¼˜é«˜å…‰</h3>
<p>åˆ›å»ºæ ¹æ®è¡¨é¢äº®åº¦æ·»åŠ è¾¹ç¼˜å‘å…‰çš„æ•ˆæœï¼š</p>
<ul>
<li>ä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹å¤„ç†åŸºç¡€é¢œè‰²çº¹ç†ï¼Œæå–äº®åº¦ä¿¡æ¯</li>
<li>æ·»åŠ Fresnel EffectèŠ‚ç‚¹ï¼Œè·å–è¾¹ç¼˜å› å­</li>
<li>ä½¿ç”¨MultiplyèŠ‚ç‚¹å°†äº®åº¦ä¿¡æ¯ä¸è¾¹ç¼˜å› å­ç›¸ä¹˜</li>
<li>å°†ç»“æœè¿æ¥åˆ°Emissioné€šé“ï¼Œå¹¶è°ƒæ•´é¢œè‰²å’Œå¼ºåº¦</li>
</ul>
<p>è¿™ç§æ•ˆæœä¼šä½¿ç‰©ä½“çš„è¾¹ç¼˜æ ¹æ®è¡¨é¢äº®åº¦å‘å‡ºä¸åŒå¼ºåº¦çš„å…‰ï¼Œäº®åº¦é«˜çš„åŒºåŸŸè¾¹ç¼˜å…‰æ›´å¼ºï¼Œäº®åº¦ä½çš„åŒºåŸŸè¾¹ç¼˜å…‰è¾ƒå¼±ï¼Œåˆ›é€ å‡ºæ›´åŠ è‡ªç„¶å’ŒåŠ¨æ€çš„è¾¹ç¼˜å‘å…‰æ•ˆæœã€‚</p>
<h3 data-id="heading-13">åŠ¨æ€é›ªåœ°æ•ˆæœ</h3>
<p>åˆ›å»ºæ ¹æ®è¡¨é¢äº®åº¦ç§¯ç´¯é›ªèŠ±çš„æ•ˆæœï¼š</p>
<ul>
<li>ä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹å¤„ç†åŸºç¡€é¢œè‰²çº¹ç†ï¼Œè·å–è¡¨é¢äº®åº¦</li>
<li>æ·»åŠ Snow TextureèŠ‚ç‚¹ï¼ˆé›ªèŠ±çº¹ç†ï¼‰</li>
<li>ä½¿ç”¨MultiplyèŠ‚ç‚¹å°†é›ªèŠ±çº¹ç†ä¸äº®åº¦ä¿¡æ¯ç›¸ä¹˜ï¼ˆäº®åº¦é«˜çš„åŒºåŸŸé›ªèŠ±æ›´æ˜æ˜¾ï¼‰</li>
<li>æ·»åŠ World Space Normalæˆ–Object Space NormalèŠ‚ç‚¹ï¼Œå¹¶ä¸äº®åº¦ä¿¡æ¯ç»“åˆï¼Œæ§åˆ¶é›ªèŠ±åœ¨é¡¶éƒ¨è¡¨é¢çš„ç§¯ç´¯</li>
<li>ä½¿ç”¨LerpèŠ‚ç‚¹å°†åŸå§‹çº¹ç†ä¸é›ªèŠ±çº¹ç†æ··åˆï¼Œæ··åˆå› å­ç”±å¤„ç†åçš„äº®åº¦ä¿¡æ¯æ§åˆ¶</li>
</ul>
<p>è¿™ç§æŠ€æœ¯å¯ä»¥åˆ›å»ºå‡ºéå¸¸è‡ªç„¶çš„é›ªåœ°ç§¯ç´¯æ•ˆæœï¼Œé›ªèŠ±ä¼šæ ¹æ®è¡¨é¢çš„æœå‘å’Œäº®åº¦æ™ºèƒ½åœ°åˆ†å¸ƒï¼Œäº®åº¦é«˜ä¸”æœä¸Šçš„è¡¨é¢ä¼šæœ‰æ›´å¤šçš„é›ªèŠ±ç§¯ç´¯ã€‚</p>
<h2 data-id="heading-14">ä¸å…¶ä»–èŠ‚ç‚¹çš„é…åˆä½¿ç”¨</h2>
<p>RGBtoGrayscaleèŠ‚ç‚¹å¾ˆå°‘å•ç‹¬ä½¿ç”¨ï¼Œé€šå¸¸éœ€è¦ä¸å…¶ä»–Shader GraphèŠ‚ç‚¹é…åˆï¼Œä»¥å®ç°æ›´å¤æ‚çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-15">ä¸æ•°å­¦èŠ‚ç‚¹é…åˆ</h3>
<p>æ•°å­¦èŠ‚ç‚¹å¯ä»¥è¿›ä¸€æ­¥å¤„ç†ç°åº¦å€¼ï¼Œå®ç°æ›´ç²¾ç»†çš„æ§åˆ¶ï¼š</p>
<ul>
<li>MultiplyèŠ‚ç‚¹ï¼šè°ƒæ•´ç°åº¦å€¼çš„å¼ºåº¦æˆ–å¯¹æ¯”åº¦</li>
<li>AddèŠ‚ç‚¹ï¼šè°ƒæ•´ç°åº¦å€¼çš„äº®åº¦æˆ–åç§»</li>
<li>PowerèŠ‚ç‚¹ï¼šå®ç°ä¼½é©¬æ ¡æ­£æˆ–éçº¿æ€§å“åº”</li>
<li>ClampèŠ‚ç‚¹ï¼šé™åˆ¶ç°åº¦å€¼çš„èŒƒå›´ï¼Œé˜²æ­¢è¶…å‡ºé¢„æœŸ</li>
<li>RemapèŠ‚ç‚¹ï¼šé‡æ–°æ˜ å°„ç°åº¦å€¼çš„èŒƒå›´ï¼Œé€‚åº”ä¸åŒçš„éœ€æ±‚</li>
</ul>
<h3 data-id="heading-16">ä¸é‡‡æ ·èŠ‚ç‚¹é…åˆ</h3>
<p>RGBtoGrayscaleèŠ‚ç‚¹å¸¸ä¸å„ç§é‡‡æ ·èŠ‚ç‚¹ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>Texture 2DèŠ‚ç‚¹ï¼šä»çº¹ç†ä¸­æå–é¢œè‰²ä¿¡æ¯å¹¶è½¬æ¢ä¸ºç°åº¦</li>
<li>Sample Texture 2D LODèŠ‚ç‚¹ï¼šåœ¨ç‰¹å®šç»†èŠ‚å±‚çº§é‡‡æ ·çº¹ç†å¹¶è½¬æ¢ä¸ºç°åº¦</li>
<li>Procedural NoiseèŠ‚ç‚¹ï¼šå°†ç¨‹åºåŒ–ç”Ÿæˆçš„å™ªå£°è½¬æ¢ä¸ºç°åº¦ä¿¡æ¯ï¼Œç”¨äºå„ç§è‡ªç„¶æ•ˆæœ</li>
</ul>
<h3 data-id="heading-17">ä¸UVèŠ‚ç‚¹é…åˆ</h3>
<p>UVç›¸å…³èŠ‚ç‚¹å¯ä»¥æ§åˆ¶ç°åº¦æ•ˆæœçš„ç©ºé—´åˆ†å¸ƒï¼š</p>
<ul>
<li>Tiling And OffsetèŠ‚ç‚¹ï¼šæ§åˆ¶çº¹ç†çš„å¹³é“ºå’Œåç§»ï¼Œå½±å“ç°åº¦æå–çš„åŒºåŸŸ</li>
<li>TriplanarèŠ‚ç‚¹ï¼šåœ¨ä¸‰ç»´æ¨¡å‹ä¸Šæ— ç¼æŠ•å½±çº¹ç†ï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦ä¿¡æ¯</li>
<li>Parallax MappingèŠ‚ç‚¹ï¼šåˆ›å»ºè§†å·®æ•ˆæœï¼Œå¹¶ä¸ç°åº¦ä¿¡æ¯ç»“åˆå¢å¼ºæ·±åº¦æ„Ÿ</li>
</ul>
<h3 data-id="heading-18">ä¸é«˜çº§æ•ˆæœèŠ‚ç‚¹é…åˆ</h3>
<p>RGBtoGrayscaleèŠ‚ç‚¹å¯ä»¥ä¸URP Shader Graphä¸­çš„é«˜çº§æ•ˆæœèŠ‚ç‚¹ç»“åˆï¼š</p>
<ul>
<li>DepthèŠ‚ç‚¹ï¼šå°†æ·±åº¦ä¿¡æ¯ä¸ç°åº¦ä¿¡æ¯ç»“åˆï¼Œåˆ›å»ºåŸºäºè·ç¦»çš„æ•ˆæœ</li>
<li>Scene ColorèŠ‚ç‚¹ï¼šå¤„ç†å±å¹•ç©ºé—´é¢œè‰²ä¿¡æ¯ï¼Œå®ç°å…¨å±åå¤„ç†æ•ˆæœ</li>
<li>NormalèŠ‚ç‚¹ï¼šå°†æ³•çº¿ä¿¡æ¯è½¬æ¢ä¸ºç°åº¦ï¼Œç”¨äºç‰¹æ®Šçš„ç…§æ˜æ•ˆæœ</li>
</ul>
<h2 data-id="heading-19">æ€§èƒ½è€ƒè™‘ä¸ä¼˜åŒ–å»ºè®®</h2>
<p>åœ¨ä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹æ—¶ï¼Œåˆç†çš„æ€§èƒ½ä¼˜åŒ–å¯ä»¥ç¡®ä¿æ•ˆæœçš„è´¨é‡åŒæ—¶ä¿æŒè¾ƒé«˜çš„æ¸²æŸ“æ•ˆç‡ã€‚</p>
<h3 data-id="heading-20">è®¡ç®—å¤æ‚åº¦åˆ†æ</h3>
<p>RGBtoGrayscaleèŠ‚ç‚¹æœ¬èº«çš„è®¡ç®—å¼€é”€å¾ˆå°ï¼Œé€šå¸¸åªéœ€è¦ä¸‰æ¬¡ä¹˜æ³•å’Œä¸¤æ¬¡åŠ æ³•æ“ä½œï¼Œåœ¨ç°ä»£GPUä¸Šå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ€§èƒ½å½±å“ä¸»è¦æ¥è‡ªä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>çº¹ç†é‡‡æ ·å¼€é”€ï¼šå¦‚æœRGBtoGrayscaleèŠ‚ç‚¹çš„è¾“å…¥æ¥è‡ªé«˜åˆ†è¾¨ç‡çº¹ç†ï¼Œé‡‡æ ·å¼€é”€å¯èƒ½æ¯”ç°åº¦è½¬æ¢æœ¬èº«æ›´å¤§</li>
<li>åç»­å¤„ç†å¤æ‚åº¦ï¼šç°åº¦æ•°æ®åç»­çš„å¤„ç†æ­¥éª¤å¯èƒ½å¼•å…¥æ›´å¤§çš„æ€§èƒ½å¼€é”€</li>
<li>å…¨å±æ•ˆæœåº”ç”¨ï¼šåœ¨å…¨å±åå¤„ç†ä¸­ä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦å¤„ç†æ¯ä¸ªåƒç´ ï¼Œå¯¹å¡«å……ç‡æœ‰è¾ƒé«˜è¦æ±‚</li>
</ul>
<h3 data-id="heading-21">ä¼˜åŒ–ç­–ç•¥</h3>
<p>é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨ä½åˆ†è¾¨ç‡çº¹ç†ï¼šå¯¹äºä¸éœ€è¦é«˜ç²¾åº¦çš„ç°åº¦ä¿¡æ¯ï¼Œä½¿ç”¨ä½åˆ†è¾¨ç‡çº¹ç†å¯ä»¥å‡å°‘é‡‡æ ·å¼€é”€</li>
<li>é¢„è®¡ç®—ç°åº¦çº¹ç†ï¼šå¯¹äºé™æ€å†…å®¹ï¼Œå¯ä»¥åœ¨é¢„å¤„ç†é˜¶æ®µè®¡ç®—å¹¶å­˜å‚¨ç°åº¦çº¹ç†ï¼Œé¿å…è¿è¡Œæ—¶è®¡ç®—</li>
<li>é™åˆ¶åº”ç”¨èŒƒå›´ï¼šé€šè¿‡é®ç½©æˆ–è¾¹ç•Œåˆ¤æ–­ï¼Œé™åˆ¶ç°åº¦æ•ˆæœçš„åº”ç”¨åŒºåŸŸï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—</li>
<li>åˆ©ç”¨Mipmapï¼šåœ¨é€‚å½“çš„æƒ…å†µä¸‹ä½¿ç”¨Mipmapï¼Œè®©GPUè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡è¿›è¡Œé‡‡æ ·</li>
<li>åˆå¹¶è®¡ç®—ï¼šå°†å¤šä¸ªç°åº¦ç›¸å…³è®¡ç®—åˆå¹¶åˆ°åŒä¸€ä¸ªç€è‰²å™¨é€šé“ä¸­ï¼Œå‡å°‘æ¸²æŸ“é€šé“åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-22">å¹³å°å…¼å®¹æ€§è€ƒè™‘</h3>
<p>RGBtoGrayscaleèŠ‚ç‚¹åœ¨æ‰€æœ‰æ”¯æŒShader Graphçš„å¹³å°ä¸Šéƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†åœ¨ä¸åŒå¹³å°ä¸Šå¯èƒ½æœ‰ç»†å¾®çš„æ€§èƒ½å·®å¼‚ï¼š</p>
<ul>
<li>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œåº”ç‰¹åˆ«æ³¨æ„çº¹ç†é‡‡æ ·å’Œç®—æœ¯è¿ç®—çš„æ¬¡æ•°</li>
<li>åœ¨é«˜ç«¯PCä¸Šï¼Œå¯ä»¥æ‰¿æ‹…æ›´å¤æ‚çš„ç°åº¦åå¤„ç†æ•ˆæœ</li>
<li>åœ¨æ¸¸æˆä¸»æœºä¸Šï¼Œé€šå¸¸æœ‰å›ºå®šçš„æ€§èƒ½é¢„ç®—ï¼Œéœ€è¦ç²¾ç¡®æ§åˆ¶æ•ˆæœçš„å¼€é”€</li>
</ul>
<h2 data-id="heading-23">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨ä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¸¸è§é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯è¿™äº›é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-24">ç°åº¦ç»“æœä¸ç¬¦åˆé¢„æœŸ</h3>
<p>å½“ç°åº¦è½¬æ¢ç»“æœä¸é¢„æœŸä¸ç¬¦æ—¶ï¼Œå¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li>é¢œè‰²ç©ºé—´ä¸åŒ¹é…ï¼šç¡®ä¿åœ¨æ­£ç¡®çš„é¢œè‰²ç©ºé—´ï¼ˆé€šå¸¸æ˜¯çº¿æ€§ç©ºé—´ï¼‰ä¸­è¿›è¡Œè®¡ç®—</li>
<li>è¾“å…¥èŒƒå›´é—®é¢˜ï¼šæ£€æŸ¥è¾“å…¥é¢œè‰²å€¼æ˜¯å¦åœ¨é¢„æœŸçš„[0,1]èŒƒå›´å†…ï¼Œè¶…å‡ºèŒƒå›´çš„å€¼ä¼šå¯¼è‡´å¼‚å¸¸ç»“æœ</li>
<li>æƒé‡é€‚ç”¨æ€§ï¼šæ ‡å‡†çš„æƒé‡ç³»æ•°é€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µï¼Œä½†ç‰¹æ®Šåœºæ™¯å¯èƒ½éœ€è¦è°ƒæ•´æƒé‡ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰è®¡ç®—èŠ‚ç‚¹å®ç°</li>
</ul>
<h3 data-id="heading-25">æ€§èƒ½é—®é¢˜</h3>
<p>å¦‚æœä½¿ç”¨RGBtoGrayscaleèŠ‚ç‚¹åå‡ºç°æ€§èƒ½ä¸‹é™ï¼š</p>
<ul>
<li>æ£€æŸ¥çº¹ç†åˆ†è¾¨ç‡ï¼šè¿‡é«˜çš„çº¹ç†åˆ†è¾¨ç‡æ˜¯å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆï¼Œé€‚å½“é™ä½åˆ†è¾¨ç‡æˆ–ä½¿ç”¨å‹ç¼©æ ¼å¼</li>
<li>åˆ†ææ¸²æŸ“æµç¨‹ï¼šä½¿ç”¨Unityçš„Frame Debuggeræˆ–Render Docåˆ†ææ¸²æŸ“æµç¨‹ï¼Œç¡®å®šæ€§èƒ½çƒ­ç‚¹</li>
<li>ç®€åŒ–ç€è‰²å™¨é€»è¾‘ï¼šç§»é™¤ä¸å¿…è¦çš„è®¡ç®—æ­¥éª¤ï¼Œåˆå¹¶ç›¸ä¼¼çš„æ“ä½œ</li>
</ul>
<h3 data-id="heading-26">ä¸å…¶ä»–æ•ˆæœå†²çª</h3>
<p>å½“RGBtoGrayscaleèŠ‚ç‚¹ä¸å…¶ä»–æ•ˆæœç»“åˆæ—¶å¯èƒ½å‡ºç°å†²çªï¼š</p>
<ul>
<li>å¤„ç†é¡ºåºé—®é¢˜ï¼šç¡®ä¿èŠ‚ç‚¹åœ¨ç€è‰²å™¨å›¾ä¸­çš„æ‰§è¡Œé¡ºåºæ­£ç¡®ï¼Œå¤æ‚çš„ä¾èµ–å…³ç³»å¯èƒ½éœ€è¦é‡æ–°ç»„ç»‡èŠ‚ç‚¹å¸ƒå±€</li>
<li>æ•°æ®èŒƒå›´å†²çªï¼šä¸åŒèŠ‚ç‚¹å¯èƒ½æœŸæœ›ä¸åŒèŒƒå›´çš„è¾“å…¥è¾“å‡ºå€¼ï¼Œéœ€è¦é€‚å½“çš„é‡æ˜ å°„æˆ–æ ‡å‡†åŒ–</li>
<li>æ··åˆæ¨¡å¼ä¸åŒ¹é…ï¼šåœ¨åŠé€æ˜æˆ–æ··åˆæ•ˆæœä¸­ï¼Œç¡®ä¿ç°åº¦è®¡ç®—ä¸æ··åˆæ¨¡å¼å…¼å®¹</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>